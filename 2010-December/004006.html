<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Avidemux-svn-commit] r6830 - in	branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg: .	ffmpeg_config libavcodec libavcodec/x86 libavcore libavformat	libavutil libswscale patches patches/avcodec patches/avformat	patches/avutil patches/avutils patches/swscale
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/avidemux-svn-commit/2010-December/index.html" >
   <LINK REL="made" HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r6830%20-%20in%0A%09branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg%3A%20.%0A%09ffmpeg_config%20libavcodec%20libavcodec/x86%20libavcore%20libavformat%0A%09libavutil%20libswscale%20patches%20patches/avcodec%20patches/avformat%0A%09patches/avutil%20patches/avutils%20patches/swscale&In-Reply-To=%3C20101210080640.E36B5480E5F%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004005.html">
   <LINK REL="Next"  HREF="004007.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Avidemux-svn-commit] r6830 - in	branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg: .	ffmpeg_config libavcodec libavcodec/x86 libavcore libavformat	libavutil libswscale patches patches/avcodec patches/avformat	patches/avutil patches/avutils patches/swscale</H1>
    <B>mean at mail.berlios.de</B> 
    <A HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r6830%20-%20in%0A%09branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg%3A%20.%0A%09ffmpeg_config%20libavcodec%20libavcodec/x86%20libavcore%20libavformat%0A%09libavutil%20libswscale%20patches%20patches/avcodec%20patches/avformat%0A%09patches/avutil%20patches/avutils%20patches/swscale&In-Reply-To=%3C20101210080640.E36B5480E5F%40sheep.berlios.de%3E"
       TITLE="[Avidemux-svn-commit] r6830 - in	branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg: .	ffmpeg_config libavcodec libavcodec/x86 libavcore libavformat	libavutil libswscale patches patches/avcodec patches/avformat	patches/avutil patches/avutils patches/swscale">mean at mail.berlios.de
       </A><BR>
    <I>Fri Dec 10 09:06:40 CET 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="004005.html">[Avidemux-svn-commit] r6829 - in	branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg: .	libavcodec libavformat libswscale
</A></li>
        <LI>Next message: <A HREF="004007.html">[Avidemux-svn-commit] r6831 -	branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4006">[ date ]</a>
              <a href="thread.html#4006">[ thread ]</a>
              <a href="subject.html#4006">[ subject ]</a>
              <a href="author.html#4006">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: mean
Date: 2010-12-10 09:06:40 +0100 (Fri, 10 Dec 2010)
New Revision: 6830

Added:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/ff_spsinfo.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/ffpng.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcore/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avcodec/dsputil.c.patch
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avcodec/x86_mathops.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutil/
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutil/avutil.h.patch
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutil/bswap.h.patch
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutil/common.h.patch
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutil/internal.h.patch
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutil/intreadwrite.h.patch
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutil/lfg.c.patch
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutil/lfg.h.patch
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutil/libm.h.patch
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutil/mem.c.patch
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutil/pixfmt.h.patch
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutil/timer.h.patch
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/swscale/
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/swscale/swscale_template.c.patch
Removed:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/png.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avcodec/x86_mathops.h.patch
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutils/avutil.h.patch
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutils/internal.h.patch
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutils/lfg.c.patch
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutils/lfg.h.patch
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutils/libm.h.patch
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutils/mem.c.patch
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutils/timer.h.patch
Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/dopatch.sh
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/ffmpeg_config/config.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/ffmpeg_config/ffconf.c
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/avcodec.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/dsputil.c
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/fft.c
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/h263dec.c
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/h264_parser.c
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/h264dsp.c
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/mpeg12.c
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/mpeg12enc.c
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/mpegvideo.c
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/mpegvideo_enc.c
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/png.c
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/pngdec.c
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/pngenc.c
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/utils.c
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/x86/mathops.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavformat/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavformat/file.c
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavformat/flvenc.c
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavformat/isom.c
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavformat/matroskaenc.c
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavformat/movenc.c
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavformat/mpegenc.c
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavformat/mpegtsenc.c
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavformat/utils.c
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavutil/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavutil/avutil.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavutil/bswap.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavutil/common.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavutil/internal.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavutil/intreadwrite.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavutil/lfg.c
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavutil/lfg.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavutil/libm.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavutil/mem.c
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavutil/pixfmt.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavutil/timer.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libswscale/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libswscale/swscale_template.c
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avcodec/avcodec.h.patch
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avcodec/h263dec.c.patch
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avcodec/h264_parser.c.patch
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avcodec/mpeg12.c.patch
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avcodec/mpegvideo.c.patch
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avcodec/mpegvideo_enc.c.patch
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avcodec/pngdec.c.patch
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avcodec/utils.c.patch
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avformat/flvenc.c.patch
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avformat/isom.c.patch
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avformat/matroskaenc.c.patch
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avformat/movenc.c.patch
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avformat/mpegenc.c.patch
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avformat/mpegtsenc.c.patch
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avformat/utils.c.patch
Log:
[core] update ffmpeg

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/CMakeLists.txt	2010-12-10 08:06:37 UTC (rev 6829)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/CMakeLists.txt	2010-12-10 08:06:40 UTC (rev 6830)
@@ -15,6 +15,9 @@
 	ADD_DEFINITIONS(-mdynamic-no-pic)
 ENDIF (ADM_CPU_X86_64 OR ADM_CPU_PPC)
 include_directories(ffmpeg_config)
+#
+add_definitions(-DFFMPEG_CONFIGURATION=&quot;avidemux&quot;)
+add_definitions(-DFFMPEG_LICENSE=&quot;GPL&quot;)
 # Linker flags
 IF (APPLE)
 	SET(CMAKE_SHARED_LINKER_FLAGS &quot;${CMAKE_SHARED_LINKER_FLAGS} -Wl,-single_module -Wl,-read_only_relocs,suppress&quot;)
@@ -32,5 +35,6 @@
 ADD_SUBDIRECTORY(libavcodec)
 ADD_SUBDIRECTORY(libavformat)
 ADD_SUBDIRECTORY(libavutil)
+ADD_SUBDIRECTORY(libavcore)
 ADD_SUBDIRECTORY(libswscale)
 ADD_SUBDIRECTORY(libpostproc)

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/dopatch.sh
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/dopatch.sh	2010-12-10 08:06:37 UTC (rev 6829)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/dopatch.sh	2010-12-10 08:06:40 UTC (rev 6830)
@@ -5,7 +5,7 @@
 	dts=$1
 	for i in patches/$src/*.patch ; do
 		echo $i
-       	 	git apply -p2   &lt; $i
+       	 	patch -p3   &lt;   $i
 	done
 	
 }

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/ffmpeg_config/config.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/ffmpeg_config/config.h	2010-12-10 08:06:37 UTC (rev 6829)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/ffmpeg_config/config.h	2010-12-10 08:06:40 UTC (rev 6830)
@@ -1,599 +1,613 @@
-#include &quot;ADM_coreConfig.h&quot;
-#define CONFIG_H263_VAAPI_HWACCEL 0
-#define CONFIG_MPEG2_VAAPI_HWACCEL 0
-#define CONFIG_MPEG4_VAAPI_HWACCEL 0
-#define CONFIG_VC1_VAAPI_HWACCEL 0
-#define CONFIG_WMV3_VAAPI_HWACCEL 0
-#define CONFIG_H264_DXVA2_HWACCEL 0
-#define CONFIG_H264_VAAPI_HWACCEL 0
-#define CONFIG_VC1_DXVA2_HWACCEL 0
-#define CONFIG_VC1_DXVA2_HWACCEL 0
-#define CONFIG_WMV3_DXVA2_HWACCEL 0
-#define CONFIG_MPEG2_DXVA2_HWACCEL 0
-#ifdef USE_VDPAU
-#define CONFIG_H264_VDPAU_DECODER 1
-#define CONFIG_MPEG_VDPAU_DECODER 1
-#define CONFIG_MPEG1_VDPAU_DECODER 1
-#define CONFIG_VC1_VDPAU_DECODER 1
-#define CONFIG_WMV3_VDPAU_DECODER 1
-#else // USE_VDPAU
-#define CONFIG_H264_VDPAU_DECODER 0
-#define CONFIG_MPEG_VDPAU_DECODER 0
-#define CONFIG_MPEG1_VDPAU_DECODER 0
-#define CONFIG_VC1_VDPAU_DECODER 0
-#define CONFIG_WMV3_VDPAU_DECODER 0
-#endif // 
-#define CONFIG_MPEG4_VDPAU_DECODER 0
-#ifdef HAVE_MALLOC_H
-#undef HAVE_MALLOC_H 
-#define HAVE_MALLOC_H 1
-#else // HAVE_MALLOC_H
-#define HAVE_MALLOC_H 0
-#endif// HAVE_MALLOC_H
-#define CONFIG_SVQ1_DECODER 1
-#define CONFIG_AAC_DECODER 1
-#define CONFIG_MPEG4AAC_DECODER 1
-#define CONFIG_DCA_DECODER 1
-#define CONFIG_MP3_DECODER 1
-#define CONFIG_MP2_DECODER 1
-#define CONFIG_AC3_DECODER 1
-#define CONFIG_EAC3_DECODER 1
-#define CONFIG_NELLYMOSER_DECODER 1
-#define CONFIG_ADPCM_IMA_AMV_DECODER 1
-#define CONFIG_CINEPAK_DECODER 1
-#define CONFIG_DNXHD_DECODER 1
-#define CONFIG_FOURXM_DECODER 1
-#define CONFIG_FRAPS_DECODER 1
-#define CONFIG_H263_DECODER 1
-#define CONFIG_H264_DECODER 1
-#define CONFIG_INDEO2_DECODER 1
-#define CONFIG_INDEO3_DECODER 1
-#define CONFIG_INTERPLAY_VIDEO_DECODER 1
-#define CONFIG_MPEGVIDEO_DECODER 1
-#define CONFIG_MSVIDEO1_DECODER 1
-#define CONFIG_VC1_DECODER 1
-#define CONFIG_VCR1_DECODER 1
-#define CONFIG_VP5_DECODER 1
-#define CONFIG_VP6_DECODER 1
-#define CONFIG_VP6A_DECODER 1
-#define CONFIG_VP6F_DECODER 1
-#define CONFIG_WMV3_DECODER 1
-#define CONFIG_WMV1_DECODER 1
-#define CONFIG_WMV2_DECODER 1
-#define CONFIG_VP3_DECODER 1
-#define CONFIG_MPEG4_DECODER 1
-#define CONFIG_MSMPEG4V1_DECODER 1
-#define CONFIG_MSMPEG4V2_DECODER 1
-#define CONFIG_MSMPEG4V3_DECODER 1
-#define CONFIG_MJPEGB_DECODER 1
-#define CONFIG_MJPEG_DECODER 1
-#define CONFIG_WMAV2_DECODER 1
-#define CONFIG_DVVIDEO_DECODER 1
-#define CONFIG_HUFFYUV_DECODER 1
-#define CONFIG_FFVHUFF_DECODER 1
-#define CONFIG_SVQ3_DECODER 1
-#define CONFIG_TSCC_DECODER 1
-#define CONFIG_QDM2_DECODER 1
-#define CONFIG_FFV1_DECODER 1
-#define CONFIG_MPEG1VIDEO_DECODER 1
-#define CONFIG_MPEG2VIDEO_DECODER 1
-#define CONFIG_RV10_DECODER 1
-#define CONFIG_RV20_DECODER 1
-#define CONFIG_DVBSUB_DECODER 1
-#define CONFIG_FLV_DECODER 1
-#define CONFIG_SNOW_DECODER 1
-#define CONFIG_AMV_DECODER 1
-#define CONFIG_INDEO5_DECODER 1
-#define CONFIG_MP1FLOAT_DECODER 1
-#define CONFIG_MP2FLOAT_DECODER 1
-#define CONFIG_MP3FLOAT_DECODER 1
-#define CONFIG_INDEO5_DECODER 1
-#define CONFIG_INDEO5_DECODER 1
-#define CONFIG_VP8_DECODER 1
-#define CONFIG_PNG_DECODER 1
-#define CONFIG_LIBVPX_DECODER 0
-#define CONFIG_GSM_MS_DECODER 0
-#define CONFIG_GSM_DECODER 0
-#define CONFIG_ANSI_DECODER 0
-#define CONFIG_PICTOR_DECODER 0
-#define CONFIG_MP3ADUFLOAT_DECODER 0
-#define CONFIG_MP3ON4FLOAT_DECODER 0
-#define CONFIG_CDGRAPHICS_DECODER 0
-#define CONFIG_ANM_DECODER 0
-#define CONFIG_AURA_DECODER 0
-#define CONFIG_AURA2_DECODER 0
-#define CONFIG_BINK_DECODER 0
-#define CONFIG_FRWU_DECODER 0
-#define CONFIG_IFF_BYTERUN1_DECODER 0
-#define CONFIG_IFF_ILBM_DECODER 0
-#define CONFIG_KGV1_DECODER 0
-#define CONFIG_R210_DECODER 0
-#define CONFIG_YOP_DECODER 0
-#define CONFIG_KGV1_DECODER 0
-#define CONFIG_ALS_DECODER 0
-#define CONFIG_AMRNB_DECODER 0
-#define CONFIG_ATRAC1_DECODER 0
-#define CONFIG_BINKAUDIO_DCT_DECODER 0
-#define CONFIG_BINKAUDIO_RDFT_DECODER 0
-#define CONFIG_ATRAC1_DECODER 0
-#define CONFIG_SIPR_DECODER 0
-#define CONFIG_TWINVQ_DECODER 0
-#define CONFIG_WMAPRO_DECODER 0
-#define CONFIG_WMAVOICE_DECODER 0
-#define CONFIG_PCM_BLURAY_DECODER 0
-#define CONFIG_PGSSUB_DECODER 0
-#define CONFIG_DPX_DECODER 0
-#define CONFIG_EAMAD_DECODER 0
-#define CONFIG_TMV_DECODER 0
-#define CONFIG_V210_DECODER 0
-#define CONFIG_LIBOPENCORE_AMRNB_DECODER 0
-#define CONFIG_LIBOPENCORE_AMRWB_DECODER 0
-#define CONFIG_LIBSPEEX_DECODER 0
-#define CONFIG_LIBSCHROEDINGER_DECODER 0
-#define CONFIG_LIBOPENJPEG_DECODER 0
-#define CONFIG_LIBDIRAC_DECODER 0
-#define CONFIG_ADPCM_IMA_ISS_DECODER 0
-#define CONFIG_ADPCM_EA_MAXIS_XA_DECODER 0
-#define CONFIG_PCM_F64LE_DECODER 0
-#define CONFIG_PCM_F64BE_DECODER 0
-#define CONFIG_PCM_F32LE_DECODER 0
-#define CONFIG_PCM_F32BE_DECODER 0
-#define CONFIG_PCM_DVD_DECODER 0
-#define CONFIG_TRUEHD_DECODER 0
-#define CONFIG_QCELP_DECODER 0
-#define CONFIG_MP1_DECODER 0
-#define CONFIG_MLP_DECODER 0
-#define CONFIG_ALAC_DECODER 0
-#define CONFIG_PGMYUV_DECODER 0
-#define CONFIG_PPM_DECODER 0
-#define CONFIG_EATGV_DECODER 0
-#define CONFIG_EATQI_DECODER 0
-#define CONFIG_EIGHTSVX_EXP_DECODER 0
-#define CONFIG_EIGHTSVX_FIB_DECODER 0
-#define CONFIG_ESCAPE124_DECODER 0
-#define CONFIG_MIMIC_DECODER 0
-#define CONFIG_MOTIONPIXELS_DECODER 0
-#define CONFIG_PAM_DECODER 0
-#define CONFIG_PBM_DECODER 0
-#define CONFIG_PGM_DECODER 0
-#define CONFIG_RL2_DECODER 0
-#define CONFIG_RV30_DECODER 0
-#define CONFIG_RV40_DECODER 0
-#define CONFIG_V210X_DECODER 0
-#define CONFIG_BFI_DECODER 0
-#define CONFIG_EACMV_DECODER 0
-#define CONFIG_EATGQ_DECODER 0
-#define CONFIG_PCX_DECODER 0
-#define CONFIG_SUNRAST_DECODER 0
-#define CONFIG_VB_DECODER 0
-#define CONFIG_XSUB_DECODER 0
-#define CONFIG_APE_DECODER 0
-#define CONFIG_MPC8_DECODER 0
-#define CONFIG_PCM_S16LE_PLANAR_DECODER 0
-#define CONFIG_PCM_ZORK_DECODER 0
-#define CONFIG_ADPCM_EA_R1_DECODER 0
-#define CONFIG_ADPCM_EA_R2_DECODER 0
-#define CONFIG_ADPCM_EA_R3_DECODER 0
-#define CONFIG_ADPCM_EA_XAS_DECODER 0
-#define CONFIG_ADPCM_IMA_EA_EACS_DECODER 0
-#define CONFIG_ADPCM_IMA_EA_SEAD_DECODER 0
-#define CONFIG_AASC_DECODER 0
-#define CONFIG_AVS_DECODER 0
-#define CONFIG_BETHSOFTVID_DECODER 0
-#define CONFIG_C93_DECODER 0
-#define CONFIG_CAVS_DECODER 0
-#define CONFIG_CLJR_DECODER 0
-#define CONFIG_CSCD_DECODER 0
-#define CONFIG_CYUV_DECODER 0
-#define CONFIG_DSICINVIDEO_DECODER 0
-#define CONFIG_DXA_DECODER 0
-#define CONFIG_EIGHTBPS_DECODER 0
-#define CONFIG_FLIC_DECODER 0
-#define CONFIG_IDCIN_DECODER 0
-#define CONFIG_KMVC_DECODER 0
-#define CONFIG_LOCO_DECODER 0
-#define CONFIG_MDEC_DECODER 0
-#define CONFIG_MMVIDEO_DECODER 0
-#define CONFIG_MPEG_XVMC_DECODER 0
-#define CONFIG_MSRLE_DECODER 0
-#define CONFIG_MSZH_DECODER 0
-#define CONFIG_NUV_DECODER 0
-#define CONFIG_PTX_DECODER 0
-#define CONFIG_QDRAW_DECODER 0
-#define CONFIG_QPEG_DECODER 0
-#define CONFIG_RPZA_DECODER 0
-#define CONFIG_SMACKER_DECODER 0
-#define CONFIG_SMC_DECODER 0
-#define CONFIG_SP5X_DECODER 0
-#define CONFIG_THEORA_DECODER 0
-#define CONFIG_THP_DECODER 0
-#define CONFIG_TIERTEXSEQVIDEO_DECODER 0
-#define CONFIG_TRUEMOTION1_DECODER 0
-#define CONFIG_TRUEMOTION2_DECODER 0
-#define CONFIG_TXD_DECODER 0
-#define CONFIG_ULTI_DECODER 0
-#define CONFIG_VMDVIDEO_DECODER 0
-#define CONFIG_VMNC_DECODER 0
-#define CONFIG_VQA_DECODER 0
-#define CONFIG_WNV1_DECODER 0
-#define CONFIG_XAN_WC3_DECODER 0
-#define CONFIG_XL_DECODER 0
-#define CONFIG_ALAC_DECODER 0
-#define CONFIG_ATRAC3_DECODER 0
-#define CONFIG_COOK_DECODER 0
-#define CONFIG_DSICINAUDIO_DECODER 0
-#define CONFIG_IMC_DECODER 0
-#define CONFIG_LIBA52_DECODER 0
-#define CONFIG_LIBFAAD_DECODER 0
-#define CONFIG_MACE3_DECODER 0
-#define CONFIG_MACE6_DECODER 0
-#define CONFIG_MP3ADU_DECODER 0
-#define CONFIG_MP3ON4_DECODER 0
-#define CONFIG_MPC7_DECODER 0
-#define CONFIG_RA_144_DECODER 0
-#define CONFIG_RA_288_DECODER 0
-#define CONFIG_SHORTEN_DECODER 0
-#define CONFIG_SMACKAUD_DECODER 0
-#define CONFIG_TRUESPEECH_DECODER 0
-#define CONFIG_TTA_DECODER 0
-#define CONFIG_VMDAUDIO_DECODER 0
-#define CONFIG_WAVPACK_DECODER 0
-#define CONFIG_WS_SND1_DECODER 0
-#define CONFIG_INTERPLAY_DPCM_DECODER 0
-#define CONFIG_SOL_DPCM_DECODER 0
-#define CONFIG_XAN_DPCM_DECODER 0
-#define CONFIG_ADPCM_THP_DECODER 0
-#define CONFIG_ASV1_DECODER 0
-#define CONFIG_ASV2_DECODER 0
-#define CONFIG_BMP_DECODER 0
-#define CONFIG_FLASHSV_DECODER 0
-#define CONFIG_GIF_DECODER 0
-#define CONFIG_H261_DECODER 0
-#define CONFIG_H263I_DECODER 0
-#define CONFIG_JPEGLS_DECODER 0
-#define CONFIG_QTRLE_DECODER 0
-#define CONFIG_RAWVIDEO_DECODER 0
-#define CONFIG_ROQ_DECODER 0
-#define CONFIG_SGI_DECODER 0
-#define CONFIG_TARGA_DECODER 0
-#define CONFIG_TIFF_DECODER 0
-#define CONFIG_ZLIB_DECODER 0
-#define CONFIG_ZMBV_DECODER 0
-#define CONFIG_FLAC_DECODER 0
-#define CONFIG_LIBAMR_NB_DECODER 0
-#define CONFIG_LIBAMR_WB_DECODER 0
-#define CONFIG_LIBGSM_DECODER 0
-#define CONFIG_LIBGSM_MS_DECODER 0
-#define CONFIG_SONIC_DECODER 0
-#define CONFIG_VORBIS_DECODER 0
-#define CONFIG_WMAV1_DECODER 0
-#define CONFIG_PCM_ALAW_DECODER 0
-#define CONFIG_PCM_MULAW_DECODER 0
-#define CONFIG_PCM_S8_DECODER 0
-#define CONFIG_PCM_S16BE_DECODER 0
-#define CONFIG_PCM_S16LE_DECODER 0
-#define CONFIG_PCM_S24BE_DECODER 0
-#define CONFIG_PCM_S24DAUD_DECODER 0
-#define CONFIG_PCM_S24LE_DECODER 0
-#define CONFIG_PCM_S32BE_DECODER 0
-#define CONFIG_PCM_S32LE_DECODER 0
-#define CONFIG_PCM_U8_DECODER 0
-#define CONFIG_PCM_U16BE_DECODER 0
-#define CONFIG_PCM_U16LE_DECODER 0
-#define CONFIG_PCM_U24BE_DECODER 0
-#define CONFIG_PCM_U24LE_DECODER 0
-#define CONFIG_PCM_U32BE_DECODER 0
-#define CONFIG_PCM_U32LE_DECODER 0
-#define CONFIG_ROQ_DPCM_DECODER 0
-#define CONFIG_ADPCM_4XM_DECODER 0
-#define CONFIG_ADPCM_ADX_DECODER 0
-#define CONFIG_ADPCM_CT_DECODER 0
-#define CONFIG_ADPCM_EA_DECODER 0
-#define CONFIG_ADPCM_G726_DECODER 0
-#define CONFIG_ADPCM_IMA_DK3_DECODER 0
-#define CONFIG_ADPCM_IMA_DK4_DECODER 0
-#define CONFIG_ADPCM_IMA_QT_DECODER 0
-#define CONFIG_ADPCM_IMA_SMJPEG_DECODER 0
-#define CONFIG_ADPCM_IMA_WAV_DECODER 0
-#define CONFIG_ADPCM_IMA_WS_DECODER 0
-#define CONFIG_ADPCM_MS_DECODER 0
-#define CONFIG_ADPCM_SBPRO_2_DECODER 0
-#define CONFIG_ADPCM_SBPRO_3_DECODER 0
-#define CONFIG_ADPCM_SBPRO_4_DECODER 0
-#define CONFIG_ADPCM_SWF_DECODER 0
-#define CONFIG_ADPCM_XA_DECODER 0
-#define CONFIG_ADPCM_YAMAHA_DECODER 0
-#define CONFIG_DVDSUB_DECODER 0
-#define CONFIG_LIBVORBIS_DECODER 0
-#define CONFIG_VP8_PARSER 1
-#define CONFIG_AAC_PARSER 1
-#define CONFIG_H263_PARSER 1
-#define CONFIG_H264_PARSER 1
-#define CONFIG_MPEG4VIDEO_PARSER 1
-#define CONFIG_AC3_PARSER 0
-#define CONFIG_CAVSVIDEO_PARSER 0
-#define CONFIG_DCA_PARSER 0
-#define CONFIG_DVBSUB_PARSER 0
-#define CONFIG_DVDSUB_PARSER 0
-#define CONFIG_H261_PARSER 0
-#define CONFIG_MJPEG_PARSER 0
-#define CONFIG_MPEGAUDIO_PARSER 0
-#define CONFIG_MPEGVIDEO_PARSER 0
-#define CONFIG_PNM_PARSER 0
-#define CONFIG_VC1_PARSER 0
-#define CONFIG_VP3_PARSER 0
-#define CONFIG_DNXHD_PARSER 0
-#define CONFIG_DIRAC_PARSER 0
-#define CONFIG_AAC_ENCODER 1
-#define CONFIG_MJPEG_ENCODER 1
-#define CONFIG_MSMPEG4V3_ENCODER 1
-#define CONFIG_H263P_ENCODER 1
-#define CONFIG_AC3_ENCODER 1
-#define CONFIG_FFV1_ENCODER 1
-#define CONFIG_FLV1_ENCODER 1
-#define CONFIG_FFVHUFF_ENCODER 1
-#define CONFIG_H263_ENCODER 1
-#define CONFIG_MPEG1VIDEO_ENCODER 1
-#define CONFIG_MPEG2VIDEO_ENCODER 1
-#define CONFIG_MPEG4_ENCODER 1
-#define CONFIG_FLV_ENCODER 1
-#define CONFIG_MP2_ENCODER 1
-#define CONFIG_DVVIDEO_ENCODER 1
-#define CONFIG_HUFFYUV_ENCODER 1
-#define CONFIG_DVBSUB_ENCODER 1
-#define CONFIG_SNOW_ENCODER 1
-#define CONFIG_LIBVPX_ENCODER 0
-#define CONFIG_RA_144_ENCODER 0
-#define CONFIG_XSUB_ENCODER 0
-#define CONFIG_V210_ENCODER 0
-#define CONFIG_LIBOPENCORE_AMRNB_ENCODER 0
-#define CONFIG_LIBSCHROEDINGER_ENCODER 0
-#define CONFIG_LIBDIRAC_ENCODER 0
-#define CONFIG_PCM_F64LE_ENCODER 0
-#define CONFIG_PCM_F64BE_ENCODER 0
-#define CONFIG_PCM_F32BE_ENCODER 0
-#define CONFIG_PCM_F32LE_ENCODER 0
-#define CONFIG_NELLYMOSER_ENCODER 0
-#define CONFIG_ALAC_ENCODER 0
-#define CONFIG_PCX_ENCODER 0
-#define CONFIG_DNXHD_ENCODER 0
-#define CONFIG_PCM_ZORK_ENCODER 0
-#define CONFIG_ADPCM_IMA_AMV_ENCODER 0
-#define CONFIG_LIBX264_ENCODER 0
-#define CONFIG_LIBXVID_ENCODER 0
-#define CONFIG_LJPEG_ENCODER 0
-#define CONFIG_PAM_ENCODER 0
-#define CONFIG_PBM_ENCODER 0
-#define CONFIG_PGM_ENCODER 0
-#define CONFIG_PGMYUV_ENCODER 0
-#define CONFIG_PPM_ENCODER 0
-#define CONFIG_LIBFAAC_ENCODER 0
-#define CONFIG_LIBMP3LAME_ENCODER 0
-#define CONFIG_LIBTHEORA_ENCODER 0
-#define CONFIG_SONIC_LS_ENCODER 0
-#define CONFIG_ASV1_ENCODER 0
-#define CONFIG_ASV2_ENCODER 0
-#define CONFIG_BMP_ENCODER 0
-#define CONFIG_FLASHSV_ENCODER 0
-#define CONFIG_GIF_ENCODER 0
-#define CONFIG_H261_ENCODER 0
-#define CONFIG_JPEGLS_ENCODER 0
-#define CONFIG_MSMPEG4V1_ENCODER 0
-#define CONFIG_MSMPEG4V2_ENCODER 0
-#define CONFIG_PNG_ENCODER 0
-#define CONFIG_QTRLE_ENCODER 0
-#define CONFIG_RAWVIDEO_ENCODER 0
-#define CONFIG_ROQ_ENCODER 0
-#define CONFIG_RV10_ENCODER 0
-#define CONFIG_RV20_ENCODER 0
-#define CONFIG_SGI_ENCODER 0
-#define CONFIG_SVQ1_ENCODER 0
-#define CONFIG_TARGA_ENCODER 0
-#define CONFIG_TIFF_ENCODER 0
-#define CONFIG_WMV1_ENCODER 0
-#define CONFIG_WMV2_ENCODER 0
-#define CONFIG_ZLIB_ENCODER 0
-#define CONFIG_ZMBV_ENCODER 0
-#define CONFIG_FLAC_ENCODER 0
-#define CONFIG_LIBAMR_NB_ENCODER 0
-#define CONFIG_LIBAMR_WB_ENCODER 0
-#define CONFIG_LIBGSM_ENCODER 0
-#define CONFIG_LIBGSM_MS_ENCODER 0
-#define CONFIG_SONIC_ENCODER 0
-#define CONFIG_VORBIS_ENCODER 0
-#define CONFIG_WMAV1_ENCODER 0
-#define CONFIG_WMAV2_ENCODER 0
-#define CONFIG_PCM_ALAW_ENCODER 0
-#define CONFIG_PCM_MULAW_ENCODER 0
-#define CONFIG_PCM_S8_ENCODER 0
-#define CONFIG_PCM_S16BE_ENCODER 0
-#define CONFIG_PCM_S16LE_ENCODER 0
-#define CONFIG_PCM_S24BE_ENCODER 0
-#define CONFIG_PCM_S24DAUD_ENCODER 0
-#define CONFIG_PCM_S24LE_ENCODER 0
-#define CONFIG_PCM_S32BE_ENCODER 0
-#define CONFIG_PCM_S32LE_ENCODER 0
-#define CONFIG_PCM_U8_ENCODER 0
-#define CONFIG_PCM_U16BE_ENCODER 0
-#define CONFIG_PCM_U16LE_ENCODER 0
-#define CONFIG_PCM_U24BE_ENCODER 0
-#define CONFIG_PCM_U24LE_ENCODER 0
-#define CONFIG_PCM_U32BE_ENCODER 0
-#define CONFIG_PCM_U32LE_ENCODER 0
-#define CONFIG_ROQ_DPCM_ENCODER 0
-#define CONFIG_ADPCM_4XM_ENCODER 0
-#define CONFIG_ADPCM_ADX_ENCODER 0
-#define CONFIG_ADPCM_CT_ENCODER 0
-#define CONFIG_ADPCM_EA_ENCODER 0
-#define CONFIG_ADPCM_G726_ENCODER 0
-#define CONFIG_ADPCM_IMA_DK3_ENCODER 0
-#define CONFIG_ADPCM_IMA_DK4_ENCODER 0
-#define CONFIG_ADPCM_IMA_QT_ENCODER 0
-#define CONFIG_ADPCM_IMA_SMJPEG_ENCODER 0
-#define CONFIG_ADPCM_IMA_WAV_ENCODER 0
-#define CONFIG_ADPCM_IMA_WS_ENCODER 0
-#define CONFIG_ADPCM_MS_ENCODER 0
-#define CONFIG_ADPCM_SBPRO_2_ENCODER 0
-#define CONFIG_ADPCM_SBPRO_3_ENCODER 0
-#define CONFIG_ADPCM_SBPRO_4_ENCODER 0
-#define CONFIG_ADPCM_SWF_ENCODER 0
-#define CONFIG_ADPCM_XA_ENCODER 0
-#define CONFIG_ADPCM_YAMAHA_ENCODER 0
-#define CONFIG_DVDSUB_ENCODER 0
-#define CONFIG_LIBVORBIS_ENCODER 0
-#define CONFIG_CHOMP_BSF 0
-#define CONFIG_AAC_ADTSTOASC_BSF 0
-#define CONFIG_MP3_HEADER_COMPRESS_BSF 0
-#define CONFIG_IMX_DUMP_HEADER_BSF 0
-#define CONFIG_DUMP_EXTRADATA_BSF 0
-#define CONFIG_REMOVE_EXTRADATA_BSF 0
-#define CONFIG_NOISE_BSF 0
-#define CONFIG_MP3_HEADER_DECOMPRESS_BSF 0
-#define CONFIG_MJPEGA_DUMP_HEADER_BSF 0
-#define CONFIG_H264_MP4TOANNEXB_BSF 0
-#define CONFIG_MOV2TEXTSUB_BSF 0
-#define CONFIG_TEXT2MOVSUB_BSF 0
-#define CONFIG_MUXERS 1
-#define CONFIG_MATROSKA_MUXER 1
-#define CONFIG_WEBM_MUXER 1
-#define CONFIG_MOV_MUXER 1
-#define CONFIG_IPOD_MUXER 1
-#define CONFIG_MP4_MUXER 1
-#define CONFIG_PSP_MUXER 1
-#define CONFIG_TG2_MUXER 1
-#define CONFIG_TGP_MUXER 1
-#define CONFIG_MPEG1VCD_MUXER 1
-#define CONFIG_MPEG2SVCD_MUXER 1
-#define CONFIG_MPEG2DVD_MUXER 1
-#define CONFIG_MPEG2VOB_MUXER 1
-#define CONFIG_W64_DEMUXER 0
-#define CONFIG_ENCODERS 1
-#define CONFIG_DVVIDEO_ENCODER 1
-#define CONFIG_SNOW_ENCODER 1
-#define CONFIG_DECODERS 1
-#define CONFIG_DVVIDEO_DECODER 1
-#define CONFIG_H263_DECODER 1
-#define CONFIG_MPEG4_DECODER 1
-#define CONFIG_SNOW_DECODER 1
-#define CONFIG_VC1_DECODER 1
-#define CONFIG_WMV2_DECODER 1
-#define CONFIG_WMV3_DECODER 1
-#define CONFIG_SWSCALE_ALPHA 0
-#define CONFIG_MPEGAUDIO_HP 1
-#define CONFIG_ZLIB 1
-#define CONFIG_GPL 1
-#define CONFIG_ARMV4L 0
-#define CONFIG_MLIB 0
-#define CONFIG_SPARC 0
-#define CONFIG_ALPHA 0
-#define CONFIG_MMI 0
-#define CONFIG_SH4 0
-#define CONFIG_BFIN 0
-#define CONFIG_SMALL 0
-#define CONFIG_MLP_PARSER 0
-//****************** SYSTEM *******************
-#	define ARCH_ARM 0
-#	define ARCH_ALPHA 0
-#	define ARCH_PPC 0
-#	define ARCH_SH4 0
-#	define ARCH_BFIN 0
-#	define HAVE_MMI 0
-#	define HAVE_VIS 0
-#	define CONFIG_GRAY 0
-#	define HAVE_TRUNCF 1
-#ifdef __APPLE__
-#	define CONFIG_DARWIN 1
-#endif
-#if defined(ADM_CPU_X86_32)
-#	define ARCH_X86 1
-#	define ARCH_X86_32 1
-#	define ARCH_X86_64 0
-#	define HAVE_ALTIVEC 0
-#elif defined(ADM_CPU_X86_64)
-#	define ARCH_X86 1
-#	define ARCH_X86_64 1
-#	define HAVE_ALTIVEC 0
-#elif defined(ADM_CPU_PPC)
-#	define ARCH_POWERPC 1
-#ifdef ADM_CPU_ALTIVEC
-#	define HAVE_ALTIVEC 1
-#ifndef __APPLE__
-#	define HAVE_ALTIVEC_H 1
-#endif	// __APPLE__
-#endif	// ADM_CPU_ALTIVEC
-#ifdef ADM_CPU_DCBZL
-#	define HAVE_DCBZL 1
-#endif	// ADM_CPU_DCBZL
-#endif	// ADM_CPU_X86_32
-#ifndef ADM_MINIMAL_INCLUDE
-#if defined(ADM_CPU_X86_32) &amp;&amp; defined(ADM_CPU_MMX2)
-#	define HAVE_MMX2 1
-#endif
-#ifdef ADM_CPU_SSSE3
-#	define HAVE_SSSE3 1
-#endif
-#endif //ADM_MINIMAL_INCLUDE
-#ifdef ARCH_POWERPC
-#	define ENABLE_POWERPC 1
-#else
-#	define ENABLE_POWERPC 0
-#endif
-#ifdef ARCH_X86
-#	define ENABLE_BSWAP 1
-#ifndef ADM_MINIMAL_INCLUDE
-#	define HAVE_MMX 1
-#	define HAVE_SSE 1
-#	define HAVE_AMD3DNOW 1
-#	define HAVE_AMD3DNOWEXT 1
-#	define ENABLE_MMX 1
-#endif //ADM_MINIMAL_INCLUDE
-#	define HAVE_FAST_UNALIGNED 1
-#	define HAVE_EBP_AVAILABLE 1
-#	define HAVE_EBX_AVAILABLE 1
-#else
-#	define ENABLE_MMX 0
-#	define HAVE_SSE 0
-#	define HAVE_AMD3DNOW 0
-#	define HAVE_AMD3DNOWEXT 0
-#endif
-#ifdef ARCH_X86_64
-#	define HAVE_FAST_64BIT 1
-#endif
-#ifdef ADM_BIG_ENDIAN
-#	define WORDS_BIGENDIAN 1
-#endif
-#ifdef USE_YASM
-#define ENABLE_YASM      1
-#define HAVE_YASM        1
-#else // USE_YASM
-#define ENABLE_YASM      0
-#define HAVE_YASM        0
-#endif // USE_YASM
-#define CONFIG_FILE_PROTOCOL  1
-#define CONFIG_MDCT     1
-#define CONFIG_DCT      1
-#define CONFIG_LPC      1
-#define CONFIG_H264DSP  1
-#define ENABLE_ARM      0
-#define ENABLE_PPC      0
-#define ENABLE_THREADS 1
-#define ENABLE_ENCODERS 1
-#define CONFIG_MUXERS 1
-#define CONFIG_DEMUXERS 1
-#define ENABLE_VIS 0
-#define ENABLE_GRAY 0
-#define HAVE_LRINTF 1
-#define HAVE_LLRINT 1
-#define HAVE_LRINT 1
-#define HAVE_LOG2 1
-#define HAVE_ROUND 1
-#define HAVE_ROUNDF 1
-#define HAVE_THREADS 1
-#define RUNTIME_CPUDETECT 1
-#define CONFIG_RUNTIME_CPUDETECT 1
-#if defined( __MINGW32__) || defined(__APPLE__)
-#define EXTERN_PREFIX &quot;_&quot;
-#else // __MINGW32__
-#define EXTERN_PREFIX
-#endif // __MINGW32__
-#define restrict __restrict__
+#include &quot;ADM_coreConfig.h&quot;
+#define CONFIG_H263_VAAPI_HWACCEL 0
+#define CONFIG_MPEG2_VAAPI_HWACCEL 0
+#define CONFIG_MPEG4_VAAPI_HWACCEL 0
+#define CONFIG_VC1_VAAPI_HWACCEL 0
+#define CONFIG_WMV3_VAAPI_HWACCEL 0
+#define CONFIG_H264_DXVA2_HWACCEL 0
+#define CONFIG_H264_VAAPI_HWACCEL 0
+#define CONFIG_VC1_DXVA2_HWACCEL 0
+#define CONFIG_VC1_DXVA2_HWACCEL 0
+#define CONFIG_WMV3_DXVA2_HWACCEL 0
+#define CONFIG_MPEG2_DXVA2_HWACCEL 0
+#ifdef USE_VDPAU
+#define CONFIG_H264_VDPAU_DECODER 1
+#define CONFIG_MPEG_VDPAU_DECODER 1
+#define CONFIG_MPEG1_VDPAU_DECODER 1
+#define CONFIG_VC1_VDPAU_DECODER 1
+#define CONFIG_WMV3_VDPAU_DECODER 1
+#else // USE_VDPAU
+#define CONFIG_H264_VDPAU_DECODER 0
+#define CONFIG_MPEG_VDPAU_DECODER 0
+#define CONFIG_MPEG1_VDPAU_DECODER 0
+#define CONFIG_VC1_VDPAU_DECODER 0
+#define CONFIG_WMV3_VDPAU_DECODER 0
+#endif // 
+#define CONFIG_MPEG4_VDPAU_DECODER 0
+#ifdef HAVE_MALLOC_H
+#undef HAVE_MALLOC_H 
+#define HAVE_MALLOC_H 1
+#else // HAVE_MALLOC_H
+#define HAVE_MALLOC_H 0
+#endif// HAVE_MALLOC_H
+#define CONFIG_R10K_DECODER 1
+#define CONFIG_AAC_LATM_DECODER 1
+#define CONFIG_PCM_LXF_DECODER 1
+#define CONFIG_ADPCM_G722_DECODER 1
+#define CONFIG_ASS_DECODER 1
+#define CONFIG_SVQ1_DECODER 1
+#define CONFIG_AAC_DECODER 1
+#define CONFIG_MPEG4AAC_DECODER 1
+#define CONFIG_DCA_DECODER 1
+#define CONFIG_MP3_DECODER 1
+#define CONFIG_MP2_DECODER 1
+#define CONFIG_AC3_DECODER 1
+#define CONFIG_EAC3_DECODER 1
+#define CONFIG_NELLYMOSER_DECODER 1
+#define CONFIG_ADPCM_IMA_AMV_DECODER 1
+#define CONFIG_CINEPAK_DECODER 1
+#define CONFIG_DNXHD_DECODER 1
+#define CONFIG_FOURXM_DECODER 1
+#define CONFIG_FRAPS_DECODER 1
+#define CONFIG_H263_DECODER 1
+#define CONFIG_H264_DECODER 1
+#define CONFIG_INDEO2_DECODER 1
+#define CONFIG_INDEO3_DECODER 1
+#define CONFIG_INTERPLAY_VIDEO_DECODER 1
+#define CONFIG_MPEGVIDEO_DECODER 1
+#define CONFIG_MSVIDEO1_DECODER 1
+#define CONFIG_VC1_DECODER 1
+#define CONFIG_VCR1_DECODER 1
+#define CONFIG_VP5_DECODER 1
+#define CONFIG_VP6_DECODER 1
+#define CONFIG_VP6A_DECODER 1
+#define CONFIG_VP6F_DECODER 1
+#define CONFIG_WMV3_DECODER 1
+#define CONFIG_WMV1_DECODER 1
+#define CONFIG_WMV2_DECODER 1
+#define CONFIG_VP3_DECODER 1
+#define CONFIG_MPEG4_DECODER 1
+#define CONFIG_MSMPEG4V1_DECODER 1
+#define CONFIG_MSMPEG4V2_DECODER 1
+#define CONFIG_MSMPEG4V3_DECODER 1
+#define CONFIG_MJPEGB_DECODER 1
+#define CONFIG_MJPEG_DECODER 1
+#define CONFIG_WMAV2_DECODER 1
+#define CONFIG_DVVIDEO_DECODER 1
+#define CONFIG_HUFFYUV_DECODER 1
+#define CONFIG_FFVHUFF_DECODER 1
+#define CONFIG_SVQ3_DECODER 1
+#define CONFIG_TSCC_DECODER 1
+#define CONFIG_QDM2_DECODER 1
+#define CONFIG_FFV1_DECODER 1
+#define CONFIG_MPEG1VIDEO_DECODER 1
+#define CONFIG_MPEG2VIDEO_DECODER 1
+#define CONFIG_RV10_DECODER 1
+#define CONFIG_RV20_DECODER 1
+#define CONFIG_DVBSUB_DECODER 1
+#define CONFIG_FLV_DECODER 1
+#define CONFIG_SNOW_DECODER 1
+#define CONFIG_AMV_DECODER 1
+#define CONFIG_INDEO5_DECODER 1
+#define CONFIG_MP1FLOAT_DECODER 1
+#define CONFIG_MP2FLOAT_DECODER 1
+#define CONFIG_MP3FLOAT_DECODER 1
+#define CONFIG_INDEO5_DECODER 1
+#define CONFIG_INDEO5_DECODER 1
+#define CONFIG_VP8_DECODER 1
+#define CONFIG_PNG_DECODER 1
+#define CONFIG_LIBVPX_DECODER 0
+#define CONFIG_GSM_MS_DECODER 0
+#define CONFIG_GSM_DECODER 0
+#define CONFIG_ANSI_DECODER 0
+#define CONFIG_PICTOR_DECODER 0
+#define CONFIG_MP3ADUFLOAT_DECODER 0
+#define CONFIG_MP3ON4FLOAT_DECODER 0
+#define CONFIG_CDGRAPHICS_DECODER 0
+#define CONFIG_ANM_DECODER 0
+#define CONFIG_AURA_DECODER 0
+#define CONFIG_AURA2_DECODER 0
+#define CONFIG_BINK_DECODER 0
+#define CONFIG_FRWU_DECODER 0
+#define CONFIG_IFF_BYTERUN1_DECODER 0
+#define CONFIG_IFF_ILBM_DECODER 0
+#define CONFIG_KGV1_DECODER 0
+#define CONFIG_R210_DECODER 0
+#define CONFIG_YOP_DECODER 0
+#define CONFIG_KGV1_DECODER 0
+#define CONFIG_ALS_DECODER 0
+#define CONFIG_AMRNB_DECODER 0
+#define CONFIG_ATRAC1_DECODER 0
+#define CONFIG_BINKAUDIO_DCT_DECODER 0
+#define CONFIG_BINKAUDIO_RDFT_DECODER 0
+#define CONFIG_ATRAC1_DECODER 0
+#define CONFIG_SIPR_DECODER 0
+#define CONFIG_TWINVQ_DECODER 0
+#define CONFIG_WMAPRO_DECODER 0
+#define CONFIG_WMAVOICE_DECODER 0
+#define CONFIG_PCM_BLURAY_DECODER 0
+#define CONFIG_PGSSUB_DECODER 0
+#define CONFIG_DPX_DECODER 0
+#define CONFIG_EAMAD_DECODER 0
+#define CONFIG_TMV_DECODER 0
+#define CONFIG_V210_DECODER 0
+#define CONFIG_LIBOPENCORE_AMRNB_DECODER 0
+#define CONFIG_LIBOPENCORE_AMRWB_DECODER 0
+#define CONFIG_LIBSPEEX_DECODER 0
+#define CONFIG_LIBSCHROEDINGER_DECODER 0
+#define CONFIG_LIBOPENJPEG_DECODER 0
+#define CONFIG_LIBDIRAC_DECODER 0
+#define CONFIG_ADPCM_IMA_ISS_DECODER 0
+#define CONFIG_ADPCM_EA_MAXIS_XA_DECODER 0
+#define CONFIG_PCM_F64LE_DECODER 0
+#define CONFIG_PCM_F64BE_DECODER 0
+#define CONFIG_PCM_F32LE_DECODER 0
+#define CONFIG_PCM_F32BE_DECODER 0
+#define CONFIG_PCM_DVD_DECODER 0
+#define CONFIG_TRUEHD_DECODER 0
+#define CONFIG_QCELP_DECODER 0
+#define CONFIG_MP1_DECODER 0
+#define CONFIG_MLP_DECODER 0
+#define CONFIG_ALAC_DECODER 0
+#define CONFIG_PGMYUV_DECODER 0
+#define CONFIG_PPM_DECODER 0
+#define CONFIG_EATGV_DECODER 0
+#define CONFIG_EATQI_DECODER 0
+#define CONFIG_EIGHTSVX_EXP_DECODER 0
+#define CONFIG_EIGHTSVX_FIB_DECODER 0
+#define CONFIG_ESCAPE124_DECODER 0
+#define CONFIG_MIMIC_DECODER 0
+#define CONFIG_MOTIONPIXELS_DECODER 0
+#define CONFIG_PAM_DECODER 0
+#define CONFIG_PBM_DECODER 0
+#define CONFIG_PGM_DECODER 0
+#define CONFIG_RL2_DECODER 0
+#define CONFIG_RV30_DECODER 0
+#define CONFIG_RV40_DECODER 0
+#define CONFIG_V210X_DECODER 0
+#define CONFIG_BFI_DECODER 0
+#define CONFIG_EACMV_DECODER 0
+#define CONFIG_EATGQ_DECODER 0
+#define CONFIG_PCX_DECODER 0
+#define CONFIG_SUNRAST_DECODER 0
+#define CONFIG_VB_DECODER 0
+#define CONFIG_XSUB_DECODER 0
+#define CONFIG_APE_DECODER 0
+#define CONFIG_MPC8_DECODER 0
+#define CONFIG_PCM_S16LE_PLANAR_DECODER 0
+#define CONFIG_PCM_ZORK_DECODER 0
+#define CONFIG_ADPCM_EA_R1_DECODER 0
+#define CONFIG_ADPCM_EA_R2_DECODER 0
+#define CONFIG_ADPCM_EA_R3_DECODER 0
+#define CONFIG_ADPCM_EA_XAS_DECODER 0
+#define CONFIG_ADPCM_IMA_EA_EACS_DECODER 0
+#define CONFIG_ADPCM_IMA_EA_SEAD_DECODER 0
+#define CONFIG_AASC_DECODER 0
+#define CONFIG_AVS_DECODER 0
+#define CONFIG_BETHSOFTVID_DECODER 0
+#define CONFIG_C93_DECODER 0
+#define CONFIG_CAVS_DECODER 0
+#define CONFIG_CLJR_DECODER 0
+#define CONFIG_CSCD_DECODER 0
+#define CONFIG_CYUV_DECODER 0
+#define CONFIG_DSICINVIDEO_DECODER 0
+#define CONFIG_DXA_DECODER 0
+#define CONFIG_EIGHTBPS_DECODER 0
+#define CONFIG_FLIC_DECODER 0
+#define CONFIG_IDCIN_DECODER 0
+#define CONFIG_KMVC_DECODER 0
+#define CONFIG_LOCO_DECODER 0
+#define CONFIG_MDEC_DECODER 0
+#define CONFIG_MMVIDEO_DECODER 0
+#define CONFIG_MPEG_XVMC_DECODER 0
+#define CONFIG_MSRLE_DECODER 0
+#define CONFIG_MSZH_DECODER 0
+#define CONFIG_NUV_DECODER 0
+#define CONFIG_PTX_DECODER 0
+#define CONFIG_QDRAW_DECODER 0
+#define CONFIG_QPEG_DECODER 0
+#define CONFIG_RPZA_DECODER 0
+#define CONFIG_SMACKER_DECODER 0
+#define CONFIG_SMC_DECODER 0
+#define CONFIG_SP5X_DECODER 0
+#define CONFIG_THEORA_DECODER 0
+#define CONFIG_THP_DECODER 0
+#define CONFIG_TIERTEXSEQVIDEO_DECODER 0
+#define CONFIG_TRUEMOTION1_DECODER 0
+#define CONFIG_TRUEMOTION2_DECODER 0
+#define CONFIG_TXD_DECODER 0
+#define CONFIG_ULTI_DECODER 0
+#define CONFIG_VMDVIDEO_DECODER 0
+#define CONFIG_VMNC_DECODER 0
+#define CONFIG_VQA_DECODER 0
+#define CONFIG_WNV1_DECODER 0
+#define CONFIG_XAN_WC3_DECODER 0
+#define CONFIG_XL_DECODER 0
+#define CONFIG_ALAC_DECODER 0
+#define CONFIG_ATRAC3_DECODER 0
+#define CONFIG_COOK_DECODER 0
+#define CONFIG_DSICINAUDIO_DECODER 0
+#define CONFIG_IMC_DECODER 0
+#define CONFIG_LIBA52_DECODER 0
+#define CONFIG_LIBFAAD_DECODER 0
+#define CONFIG_MACE3_DECODER 0
+#define CONFIG_MACE6_DECODER 0
+#define CONFIG_MP3ADU_DECODER 0
+#define CONFIG_MP3ON4_DECODER 0
+#define CONFIG_MPC7_DECODER 0
+#define CONFIG_RA_144_DECODER 0
+#define CONFIG_RA_288_DECODER 0
+#define CONFIG_SHORTEN_DECODER 0
+#define CONFIG_SMACKAUD_DECODER 0
+#define CONFIG_TRUESPEECH_DECODER 0
+#define CONFIG_TTA_DECODER 0
+#define CONFIG_VMDAUDIO_DECODER 0
+#define CONFIG_WAVPACK_DECODER 0
+#define CONFIG_WS_SND1_DECODER 0
+#define CONFIG_INTERPLAY_DPCM_DECODER 0
+#define CONFIG_SOL_DPCM_DECODER 0
+#define CONFIG_XAN_DPCM_DECODER 0
+#define CONFIG_ADPCM_THP_DECODER 0
+#define CONFIG_ASV1_DECODER 0
+#define CONFIG_ASV2_DECODER 0
+#define CONFIG_BMP_DECODER 0
+#define CONFIG_FLASHSV_DECODER 0
+#define CONFIG_GIF_DECODER 0
+#define CONFIG_H261_DECODER 0
+#define CONFIG_H263I_DECODER 0
+#define CONFIG_JPEGLS_DECODER 0
+#define CONFIG_QTRLE_DECODER 0
+#define CONFIG_RAWVIDEO_DECODER 0
+#define CONFIG_ROQ_DECODER 0
+#define CONFIG_SGI_DECODER 0
+#define CONFIG_TARGA_DECODER 0
+#define CONFIG_TIFF_DECODER 0
+#define CONFIG_ZLIB_DECODER 0
+#define CONFIG_ZMBV_DECODER 0
+#define CONFIG_FLAC_DECODER 0
+#define CONFIG_LIBAMR_NB_DECODER 0
+#define CONFIG_LIBAMR_WB_DECODER 0
+#define CONFIG_LIBGSM_DECODER 0
+#define CONFIG_LIBGSM_MS_DECODER 0
+#define CONFIG_SONIC_DECODER 0
+#define CONFIG_VORBIS_DECODER 0
+#define CONFIG_WMAV1_DECODER 0
+#define CONFIG_PCM_ALAW_DECODER 0
+#define CONFIG_PCM_MULAW_DECODER 0
+#define CONFIG_PCM_S8_DECODER 0
+#define CONFIG_PCM_S16BE_DECODER 0
+#define CONFIG_PCM_S16LE_DECODER 0
+#define CONFIG_PCM_S24BE_DECODER 0
+#define CONFIG_PCM_S24DAUD_DECODER 0
+#define CONFIG_PCM_S24LE_DECODER 0
+#define CONFIG_PCM_S32BE_DECODER 0
+#define CONFIG_PCM_S32LE_DECODER 0
+#define CONFIG_PCM_U8_DECODER 0
+#define CONFIG_PCM_U16BE_DECODER 0
+#define CONFIG_PCM_U16LE_DECODER 0
+#define CONFIG_PCM_U24BE_DECODER 0
+#define CONFIG_PCM_U24LE_DECODER 0
+#define CONFIG_PCM_U32BE_DECODER 0
+#define CONFIG_PCM_U32LE_DECODER 0
+#define CONFIG_ROQ_DPCM_DECODER 0
+#define CONFIG_ADPCM_4XM_DECODER 0
+#define CONFIG_ADPCM_ADX_DECODER 0
+#define CONFIG_ADPCM_CT_DECODER 0
+#define CONFIG_ADPCM_EA_DECODER 0
+#define CONFIG_ADPCM_G726_DECODER 0
+#define CONFIG_ADPCM_IMA_DK3_DECODER 0
+#define CONFIG_ADPCM_IMA_DK4_DECODER 0
+#define CONFIG_ADPCM_IMA_QT_DECODER 0
+#define CONFIG_ADPCM_IMA_SMJPEG_DECODER 0
+#define CONFIG_ADPCM_IMA_WAV_DECODER 0
+#define CONFIG_ADPCM_IMA_WS_DECODER 0
+#define CONFIG_ADPCM_MS_DECODER 0
+#define CONFIG_ADPCM_SBPRO_2_DECODER 0
+#define CONFIG_ADPCM_SBPRO_3_DECODER 0
+#define CONFIG_ADPCM_SBPRO_4_DECODER 0
+#define CONFIG_ADPCM_SWF_DECODER 0
+#define CONFIG_ADPCM_XA_DECODER 0
+#define CONFIG_ADPCM_YAMAHA_DECODER 0
+#define CONFIG_DVDSUB_DECODER 0
+#define CONFIG_LIBVORBIS_DECODER 0
+#define CONFIG_VP8_PARSER 1
+#define CONFIG_AAC_PARSER 1
+#define CONFIG_H263_PARSER 1
+#define CONFIG_H264_PARSER 1
+#define CONFIG_MPEG4VIDEO_PARSER 1
+#define CONFIG_AC3_PARSER 0
+#define CONFIG_CAVSVIDEO_PARSER 0
+#define CONFIG_DCA_PARSER 0
+#define CONFIG_DVBSUB_PARSER 0
+#define CONFIG_DVDSUB_PARSER 0
+#define CONFIG_H261_PARSER 0
+#define CONFIG_MJPEG_PARSER 0
+#define CONFIG_MPEGAUDIO_PARSER 0
+#define CONFIG_MPEGVIDEO_PARSER 0
+#define CONFIG_PNM_PARSER 0
+#define CONFIG_VC1_PARSER 0
+#define CONFIG_VP3_PARSER 0
+#define CONFIG_DNXHD_PARSER 0
+#define CONFIG_DIRAC_PARSER 0
+#define CONFIG_AAC_ENCODER 1
+#define CONFIG_MJPEG_ENCODER 1
+#define CONFIG_MSMPEG4V3_ENCODER 1
+#define CONFIG_H263P_ENCODER 1
+#define CONFIG_AC3_ENCODER 1
+#define CONFIG_FFV1_ENCODER 1
+#define CONFIG_FLV1_ENCODER 1
+#define CONFIG_FFVHUFF_ENCODER 1
+#define CONFIG_H263_ENCODER 1
+#define CONFIG_MPEG1VIDEO_ENCODER 1
+#define CONFIG_MPEG2VIDEO_ENCODER 1
+#define CONFIG_MPEG4_ENCODER 1
+#define CONFIG_FLV_ENCODER 1
+#define CONFIG_MP2_ENCODER 1
+#define CONFIG_DVVIDEO_ENCODER 1
+#define CONFIG_HUFFYUV_ENCODER 1
+#define CONFIG_DVBSUB_ENCODER 1
+#define CONFIG_SNOW_ENCODER 1
+#define CONFIG_A64MULTI_ENCODER 0
+#define CONFIG_A64MULTI5_ENCODER 0
+#define CONFIG_ADPCM_G722_ENCODER 0
+#define CONFIG_ASS_ENCODER 0
+#define CONFIG_LIBXAVS_ENCODER 0
+#define CONFIG_LIBVPX_ENCODER 0
+#define CONFIG_RA_144_ENCODER 0
+#define CONFIG_XSUB_ENCODER 0
+#define CONFIG_V210_ENCODER 0
+#define CONFIG_LIBOPENCORE_AMRNB_ENCODER 0
+#define CONFIG_LIBSCHROEDINGER_ENCODER 0
+#define CONFIG_LIBDIRAC_ENCODER 0
+#define CONFIG_PCM_F64LE_ENCODER 0
+#define CONFIG_PCM_F64BE_ENCODER 0
+#define CONFIG_PCM_F32BE_ENCODER 0
+#define CONFIG_PCM_F32LE_ENCODER 0
+#define CONFIG_NELLYMOSER_ENCODER 0
+#define CONFIG_ALAC_ENCODER 0
+#define CONFIG_PCX_ENCODER 0
+#define CONFIG_DNXHD_ENCODER 0
+#define CONFIG_PCM_ZORK_ENCODER 0
+#define CONFIG_ADPCM_IMA_AMV_ENCODER 0
+#define CONFIG_LIBX264_ENCODER 0
+#define CONFIG_LIBXVID_ENCODER 0
+#define CONFIG_LJPEG_ENCODER 0
+#define CONFIG_PAM_ENCODER 0
+#define CONFIG_PBM_ENCODER 0
+#define CONFIG_PGM_ENCODER 0
+#define CONFIG_PGMYUV_ENCODER 0
+#define CONFIG_PPM_ENCODER 0
+#define CONFIG_LIBFAAC_ENCODER 0
+#define CONFIG_LIBMP3LAME_ENCODER 0
+#define CONFIG_LIBTHEORA_ENCODER 0
+#define CONFIG_SONIC_LS_ENCODER 0
+#define CONFIG_ASV1_ENCODER 0
+#define CONFIG_ASV2_ENCODER 0
+#define CONFIG_BMP_ENCODER 0
+#define CONFIG_FLASHSV_ENCODER 0
+#define CONFIG_GIF_ENCODER 0
+#define CONFIG_H261_ENCODER 0
+#define CONFIG_JPEGLS_ENCODER 0
+#define CONFIG_MSMPEG4V1_ENCODER 0
+#define CONFIG_MSMPEG4V2_ENCODER 0
+#define CONFIG_PNG_ENCODER 0
+#define CONFIG_QTRLE_ENCODER 0
+#define CONFIG_RAWVIDEO_ENCODER 0
+#define CONFIG_ROQ_ENCODER 0
+#define CONFIG_RV10_ENCODER 0
+#define CONFIG_RV20_ENCODER 0
+#define CONFIG_SGI_ENCODER 0
+#define CONFIG_SVQ1_ENCODER 0
+#define CONFIG_TARGA_ENCODER 0
+#define CONFIG_TIFF_ENCODER 0
+#define CONFIG_WMV1_ENCODER 0
+#define CONFIG_WMV2_ENCODER 0
+#define CONFIG_ZLIB_ENCODER 0
+#define CONFIG_ZMBV_ENCODER 0
+#define CONFIG_FLAC_ENCODER 0
+#define CONFIG_LIBAMR_NB_ENCODER 0
+#define CONFIG_LIBAMR_WB_ENCODER 0
+#define CONFIG_LIBGSM_ENCODER 0
+#define CONFIG_LIBGSM_MS_ENCODER 0
+#define CONFIG_SONIC_ENCODER 0
+#define CONFIG_VORBIS_ENCODER 0
+#define CONFIG_WMAV1_ENCODER 0
+#define CONFIG_WMAV2_ENCODER 0
+#define CONFIG_PCM_ALAW_ENCODER 0
+#define CONFIG_PCM_MULAW_ENCODER 0
+#define CONFIG_PCM_S8_ENCODER 0
+#define CONFIG_PCM_S16BE_ENCODER 0
+#define CONFIG_PCM_S16LE_ENCODER 0
+#define CONFIG_PCM_S24BE_ENCODER 0
+#define CONFIG_PCM_S24DAUD_ENCODER 0
+#define CONFIG_PCM_S24LE_ENCODER 0
+#define CONFIG_PCM_S32BE_ENCODER 0
+#define CONFIG_PCM_S32LE_ENCODER 0
+#define CONFIG_PCM_U8_ENCODER 0
+#define CONFIG_PCM_U16BE_ENCODER 0
+#define CONFIG_PCM_U16LE_ENCODER 0
+#define CONFIG_PCM_U24BE_ENCODER 0
+#define CONFIG_PCM_U24LE_ENCODER 0
+#define CONFIG_PCM_U32BE_ENCODER 0
+#define CONFIG_PCM_U32LE_ENCODER 0
+#define CONFIG_ROQ_DPCM_ENCODER 0
+#define CONFIG_ADPCM_4XM_ENCODER 0
+#define CONFIG_ADPCM_ADX_ENCODER 0
+#define CONFIG_ADPCM_CT_ENCODER 0
+#define CONFIG_ADPCM_EA_ENCODER 0
+#define CONFIG_ADPCM_G726_ENCODER 0
+#define CONFIG_ADPCM_IMA_DK3_ENCODER 0
+#define CONFIG_ADPCM_IMA_DK4_ENCODER 0
+#define CONFIG_ADPCM_IMA_QT_ENCODER 0
+#define CONFIG_ADPCM_IMA_SMJPEG_ENCODER 0
+#define CONFIG_ADPCM_IMA_WAV_ENCODER 0
+#define CONFIG_ADPCM_IMA_WS_ENCODER 0
+#define CONFIG_ADPCM_MS_ENCODER 0
+#define CONFIG_ADPCM_SBPRO_2_ENCODER 0
+#define CONFIG_ADPCM_SBPRO_3_ENCODER 0
+#define CONFIG_ADPCM_SBPRO_4_ENCODER 0
+#define CONFIG_ADPCM_SWF_ENCODER 0
+#define CONFIG_ADPCM_XA_ENCODER 0
+#define CONFIG_ADPCM_YAMAHA_ENCODER 0
+#define CONFIG_DVDSUB_ENCODER 0
+#define CONFIG_LIBVORBIS_ENCODER 0
+#define CONFIG_MJPEG2JPEG_BSF 0
+#define CONFIG_CHOMP_BSF 0
+#define CONFIG_AAC_ADTSTOASC_BSF 0
+#define CONFIG_MP3_HEADER_COMPRESS_BSF 0
+#define CONFIG_IMX_DUMP_HEADER_BSF 0
+#define CONFIG_DUMP_EXTRADATA_BSF 0
+#define CONFIG_REMOVE_EXTRADATA_BSF 0
+#define CONFIG_NOISE_BSF 0
+#define CONFIG_MP3_HEADER_DECOMPRESS_BSF 0
+#define CONFIG_MJPEGA_DUMP_HEADER_BSF 0
+#define CONFIG_H264_MP4TOANNEXB_BSF 0
+#define CONFIG_MOV2TEXTSUB_BSF 0
+#define CONFIG_TEXT2MOVSUB_BSF 0
+#define CONFIG_MUXERS 1
+#define CONFIG_MATROSKA_MUXER 1
+#define CONFIG_WEBM_MUXER 1
+#define CONFIG_MOV_MUXER 1
+#define CONFIG_IPOD_MUXER 1
+#define CONFIG_MP4_MUXER 1
+#define CONFIG_PSP_MUXER 1
+#define CONFIG_TG2_MUXER 1
+#define CONFIG_TGP_MUXER 1
+#define CONFIG_MPEG1VCD_MUXER 1
+#define CONFIG_MPEG2SVCD_MUXER 1
+#define CONFIG_MPEG2DVD_MUXER 1
+#define CONFIG_MPEG2VOB_MUXER 1
+#define CONFIG_W64_DEMUXER 0
+#define CONFIG_ENCODERS 1
+#define CONFIG_DVVIDEO_ENCODER 1
+#define CONFIG_SNOW_ENCODER 1
+#define CONFIG_DECODERS 1
+#define CONFIG_DVVIDEO_DECODER 1
+#define CONFIG_H263_DECODER 1
+#define CONFIG_MPEG4_DECODER 1
+#define CONFIG_SNOW_DECODER 1
+#define CONFIG_VC1_DECODER 1
+#define CONFIG_WMV2_DECODER 1
+#define CONFIG_WMV3_DECODER 1
+#define CONFIG_SWSCALE_ALPHA 0
+#define CONFIG_MPEGAUDIO_HP 1
+#define CONFIG_ZLIB 1
+#define CONFIG_GPL 1
+#define CONFIG_ARMV4L 0
+#define CONFIG_MLIB 0
+#define CONFIG_SPARC 0
+#define CONFIG_ALPHA 0
+#define CONFIG_MMI 0
+#define CONFIG_SH4 0
+#define CONFIG_BFIN 0
+#define CONFIG_SMALL 0
+#define CONFIG_FLAC_PARSER 0
+#define CONFIG_AAC_LATM_PARSER 0
+#define CONFIG_MLP_PARSER 0
+//****************** SYSTEM *******************
+#	define ARCH_ARM 0
+#	define ARCH_ALPHA 0
+#	define ARCH_PPC 0
+#	define ARCH_SH4 0
+#	define ARCH_BFIN 0
+#	define HAVE_MMI 0
+#	define HAVE_VIS 0
+#	define CONFIG_GRAY 0
+#	define HAVE_TRUNCF 1
+#ifdef __APPLE__
+#	define CONFIG_DARWIN 1
+#endif
+#if defined(ADM_CPU_X86_32)
+#	define ARCH_X86 1
+#	define ARCH_X86_32 1
+#	define ARCH_X86_64 0
+#	define HAVE_ALTIVEC 0
+#elif defined(ADM_CPU_X86_64)
+#	define ARCH_X86 1
+#	define ARCH_X86_64 1
+#	define HAVE_ALTIVEC 0
+#elif defined(ADM_CPU_PPC)
+#	define ARCH_POWERPC 1
+#ifdef ADM_CPU_ALTIVEC
+#	define HAVE_ALTIVEC 1
+#ifndef __APPLE__
+#	define HAVE_ALTIVEC_H 1
+#endif	// __APPLE__
+#endif	// ADM_CPU_ALTIVEC
+#ifdef ADM_CPU_DCBZL
+#	define HAVE_DCBZL 1
+#endif	// ADM_CPU_DCBZL
+#endif	// ADM_CPU_X86_32
+#ifndef ADM_MINIMAL_INCLUDE
+#if defined(ADM_CPU_X86_32) &amp;&amp; defined(ADM_CPU_MMX2)
+//#	define HAVE_MMX2 1
+#endif
+#ifdef ADM_CPU_SSSE3
+#	define HAVE_SSSE3 1
+#endif
+#endif //ADM_MINIMAL_INCLUDE
+#ifdef ARCH_POWERPC
+#	define ENABLE_POWERPC 1
+#else
+#	define ENABLE_POWERPC 0
+#endif
+#ifdef ARCH_X86
+#	define ENABLE_BSWAP 1
+#ifndef ADM_MINIMAL_INCLUDE
+#	define HAVE_MMX 1
+#	define HAVE_MMX2 1
+#	define HAVE_SSE 1
+#	define HAVE_AMD3DNOW 1
+#	define HAVE_AMD3DNOWEXT 1
+#	define ENABLE_MMX 1
+#endif //ADM_MINIMAL_INCLUDE
+#	define HAVE_FAST_UNALIGNED 1
+#	define HAVE_EBP_AVAILABLE 1
+#	define HAVE_EBX_AVAILABLE 1
+#else
+#	define ENABLE_MMX 0
+#	define HAVE_SSE 0
+#	define HAVE_AMD3DNOW 0
+#	define HAVE_AMD3DNOWEXT 0
+#endif
+#ifdef ARCH_X86_64
+#	define HAVE_FAST_64BIT 1
+#endif
+#ifdef ADM_BIG_ENDIAN
+#	define WORDS_BIGENDIAN 1
+#endif
+#ifdef USE_YASM
+#define ENABLE_YASM      1
+#define HAVE_YASM        1
+#else // USE_YASM
+#define ENABLE_YASM      0
+#define HAVE_YASM        0
+#endif // USE_YASM
+#define CONFIG_FILE_PROTOCOL  1
+#define CONFIG_MDCT     1
+#define CONFIG_DCT      1
+#define CONFIG_LPC      1
+#define CONFIG_H264DSP  1
+#define ENABLE_ARM      0
+#define ENABLE_PPC      0
+#define ENABLE_THREADS 1
+#define ENABLE_ENCODERS 1
+#define CONFIG_MUXERS 1
+#define CONFIG_DEMUXERS 1
+#define ENABLE_VIS 0
+#define ENABLE_GRAY 0
+#define HAVE_LRINTF 1
+#define HAVE_LLRINT 1
+#define HAVE_LRINT 1
+#define HAVE_LOG2 1
+#define HAVE_ROUND 1
+#define HAVE_ROUNDF 1
+#define HAVE_THREADS 1
+#define RUNTIME_CPUDETECT 1
+#define CONFIG_RUNTIME_CPUDETECT 1
+#if defined( __MINGW32__) || defined(__APPLE__)
+#define EXTERN_PREFIX &quot;_&quot;
+#else // __MINGW32__
+#define EXTERN_PREFIX
+#endif // __MINGW32__
+#define restrict __restrict__

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/ffmpeg_config/ffconf.c
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/ffmpeg_config/ffconf.c	2010-12-10 08:06:37 UTC (rev 6829)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/ffmpeg_config/ffconf.c	2010-12-10 08:06:40 UTC (rev 6830)
@@ -53,6 +53,12 @@
 
 #define DECLARE_DECODER(a,b); printf(&quot;#define CONFIG_&quot;#a&quot;_DECODER 1\n&quot;);
   
+    DECLARE_DECODER (R10K, svq1);
+    DECLARE_DECODER (AAC_LATM, svq1);
+    DECLARE_DECODER (PCM_LXF, svq1);
+    DECLARE_DECODER (ADPCM_G722, svq1);
+    DECLARE_DECODER (ASS, svq1);
+
     DECLARE_DECODER (SVQ1, svq1);
     DECLARE_DECODER(AAC, eatgq);
     DECLARE_DECODER(MPEG4AAC, mpeg4aac);
@@ -390,6 +396,12 @@
 
 #undef DECLARE_ENCODER
 #define DECLARE_ENCODER(a,b); printf(&quot;#define CONFIG_&quot;#a&quot;_ENCODER 0\n&quot;); 
+    DECLARE_ENCODER(A64MULTI, amv);
+    DECLARE_ENCODER(A64MULTI5, amv);
+    DECLARE_ENCODER(ADPCM_G722, amv);
+    DECLARE_ENCODER(ASS, amv);
+    DECLARE_ENCODER(LIBXAVS, amv);
+
     DECLARE_ENCODER(LIBVPX, amv);
     DECLARE_ENCODER(RA_144, amv);
     DECLARE_ENCODER(XSUB, amv);
@@ -495,6 +507,7 @@
 
 #define DECLARE_BSF(a,b); printf(&quot;#define CONFIG_&quot;#a&quot;_BSF 0\n&quot;);
 
+	DECLARE_BSF(MJPEG2JPEG, mp3_header_compress);
 	DECLARE_BSF(CHOMP, mp3_header_compress);
 	DECLARE_BSF(AAC_ADTSTOASC, mp3_header_compress);
 	DECLARE_BSF(MP3_HEADER_COMPRESS, mp3_header_compress);
@@ -558,6 +571,8 @@
 	ENABLE(BFIN, bfin);
 	ENABLE(SMALL, small);
 #define DECLARE_ENABLE_PARSER(a,b); printf(&quot;#define CONFIG_&quot;#a&quot;_PARSER 0\n&quot;);
+	DECLARE_ENABLE_PARSER(FLAC, wmv3);
+	DECLARE_ENABLE_PARSER(AAC_LATM, wmv3);
 	DECLARE_ENABLE_PARSER(MLP, wmv3);
         printf(&quot;//****************** SYSTEM *******************\n&quot;);
 	printf(&quot;#	define ARCH_ARM 0\n&quot;);

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/CMakeLists.txt	2010-12-10 08:06:37 UTC (rev 6829)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/CMakeLists.txt	2010-12-10 08:06:40 UTC (rev 6830)
@@ -38,6 +38,7 @@
         synth_filter.c    mpeg4videodec.c h264_cabac.c h264_cavlc.c vp56dsp.c h264_loopfilter.c
         h264_sei.c h264_ps.c svq3.c h264dsp.c flvdec.c pngdec.c png.c
         aacps.c  aacpsy.c aacadtsdec.c lpc.c vp8_parser.c vp8.c vp8dsp.c inverse.c dct.c aacdec.c
+	vp56rac.c r210dec.c assdec.c g722.c ass.c
         )
 
 if(USE_VDPAU)
@@ -46,28 +47,18 @@
 
 IF(ADM_CPU_X86)
 	SET(${ADM_LIB}_SRCS  ${${ADM_LIB}_SRCS}
-		  x86/mpegvideo_mmx.c   x86/dsputil_mmx.c
-		x86/fdct_mmx.c  x86/motion_est_mmx.c  x86/simple_idct_mmx.c  
-		x86/idct_mmx_xvid.c    x86/snowdsp_mmx.c
-                x86/idct_sse2_xvid.c 
-                x86/vp8dsp-init.c
-                x86/mpegaudiodec_mmx.c
-                x86/lpc_mmx.c
-                x86/fft.c
-                x86/dct32_sse.c
-                #x86/fft_sse.c
-                #x86/fft_3dn2.c
-		#x86/fft_3dn.c  
-                x86/dsputilenc_mmx.c  x86/vc1dsp_mmx.c  x86/idct_mmx.c)
+		x86/cavsdsp_mmx.c               x86/dsputil_mmx.c                  x86/mlpdsp.c                  x86/simple_idct_mmx.c
+		x86/dct32_sse.c                 x86/fft.c                  x86/idct_mmx.c        x86/motion_est_mmx.c          x86/snowdsp_mmx.c
+		x86/dnxhd_mmx.c                 x86/idct_mmx_xvid.c   x86/mpegaudiodec_mmx.c        x86/vc1dsp_mmx.c
+		x86/dsputilenc_mmx.c            x86/fdct_mmx.c                  x86/h264dsp_mmx.c          x86/idct_sse2_xvid.c  x86/mpegvideo_mmx.c           x86/vp56dsp_init.c
+		x86/h264_intrapred_init.c  x86/lpc_mmx.c           x86/vp8dsp-init.c
+		)
         IF(USE_YASM)
                 SET(YASM_SOURCE         
-                                x86/h264_intrapred.asm
-                                x86/vp8dsp.asm
-                                x86/vc1dsp_yasm.asm
-                                x86/dsputil_yasm.asm
-                                x86/fft_mmx.asm
-                                x86/h264_deblock_sse2.asm
-                                x86/h264_idct_sse2.asm)
+				x86/deinterlace.asm      x86/dsputil_yasm.asm  x86/h264_chromamc.asm  x86/h264_idct.asm       
+				x86/h264_weight.asm  x86/vp3dsp.asm   x86/vp8dsp.asm  x86/x86util.asm
+				x86/dsputilenc_yasm.asm  x86/fft_mmx.asm       x86/h264_deblock.asm   x86/h264_intrapred.asm  
+				x86/vc1dsp_yasm.asm  x86/vp56dsp.asm  x86/x86inc.asm)
                 SET(YASM_DEP x86/fft_3dn2.c  x86/fft_3dn.c   x86/fft_sse.c)
                  FOREACH(yasm_files ${YASM_SOURCE})
                         SET(tgt1 ${CMAKE_CURRENT_BINARY_DIR}/${yasm_files}.o)
@@ -101,6 +92,6 @@
 IF(USE_YASM)
   ADD_DEPENDENCIES(${ADM_LIB} ${YASM_OBJ})
 ENDIF(USE_YASM)
-TARGET_LINK_LIBRARIES(${ADM_LIB} ADM_core6 ADM_libavutil6 ${ZLIB_LIBRARY})
+TARGET_LINK_LIBRARIES(${ADM_LIB} ADM_core6 ADM_libavcore6 ADM_libavutil6 ${ZLIB_LIBRARY})
 
 ADM_INSTALL_LIB(${ADM_LIB} )

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/avcodec.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/avcodec.h	2010-12-10 08:06:37 UTC (rev 6829)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/avcodec.h	2010-12-10 08:06:40 UTC (rev 6830)
@@ -669,6 +669,8 @@
 #define CODEC_FLAG2_PSY           0x00080000 ///&lt; Use psycho visual optimizations.
 #define CODEC_FLAG2_SSIM          0x00100000 ///&lt; Compute SSIM during encoding, error[] values are undefined.
 #define CODEC_FLAG2_INTRA_REFRESH 0x00200000 ///&lt; Use periodic insertion of intra blocks instead of keyframes.
+//MEANX: NEVER EVER USE CLOSED GOP ?
+#define CODEC_FLAG2_32_PULLDOWN   0x80000000 
 
 /* Unsupported options :
  *              Syntax Arithmetic coding (SAC)
@@ -1563,6 +1565,7 @@
      * - decoding: unused
      */
     int rc_max_rate;
+    int rc_max_rate_header; /*&lt; That one is set in the header MEANX */
 
     /**
      * minimum bitrate
@@ -1577,6 +1580,8 @@
      * - decoding: unused
      */
     int rc_buffer_size;
+    int rc_buffer_size_header;  /*&lt; That one is set in the header MEANX*/
+
     float rc_buffer_aggressivity;
 
     /**

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/dsputil.c
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/dsputil.c	2010-12-10 08:06:37 UTC (rev 6829)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/dsputil.c	2010-12-10 08:06:40 UTC (rev 6830)
@@ -39,7 +39,7 @@
 #include &quot;lpc.h&quot;
 #include &quot;ac3dec.h&quot;
 #include &quot;vorbis.h&quot;
-#include &quot;png.h&quot;
+#include &quot;ffpng.h&quot;
 #include &quot;vp8dsp.h&quot;
 
 uint8_t ff_cropTbl[256 + 2 * MAX_NEG_CROP] = {0, };

Added: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/ff_spsinfo.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/ff_spsinfo.h	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/ff_spsinfo.h	2010-12-10 08:06:40 UTC (rev 6830)
@@ -0,0 +1,17 @@
+#ifndef FF_SPS_INFO_H
+#define FF_SPS_INFO_H
+
+typedef struct
+{
+	int width;
+	int height;
+	int fps1000;
+	int darNum;
+	int darDen;
+	int hasStructInfo;
+	int CpbDpbToSkip;
+}ffSpsInfo;
+
+
+#endif
+

Copied: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/ffpng.h (from rev 6829, branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/png.h)
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/ffpng.h	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/ffpng.h	2010-12-10 08:06:40 UTC (rev 6830)
@@ -0,0 +1,78 @@
+/*
+ * PNG image format
+ * Copyright (c) 2003 Fabrice Bellard
+ *
+ * This file is part of FFmpeg.
+ *
+ * FFmpeg is free software; you can redistribute it and/or
+ * modify it under the terms of the GNU Lesser General Public
+ * License as published by the Free Software Foundation; either
+ * version 2.1 of the License, or (at your option) any later version.
+ *
+ * FFmpeg is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+ * Lesser General Public License for more details.
+ *
+ * You should have received a copy of the GNU Lesser General Public
+ * License along with FFmpeg; if not, write to the Free Software
+ * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
+ */
+
+#ifndef AVCODEC_PNG_H
+#define AVCODEC_PNG_H
+
+#include &lt;stdint.h&gt;
+
+#define PNG_COLOR_MASK_PALETTE    1
+#define PNG_COLOR_MASK_COLOR      2
+#define PNG_COLOR_MASK_ALPHA      4
+
+#define PNG_COLOR_TYPE_GRAY 0
+#define PNG_COLOR_TYPE_PALETTE  (PNG_COLOR_MASK_COLOR | PNG_COLOR_MASK_PALETTE)
+#define PNG_COLOR_TYPE_RGB        (PNG_COLOR_MASK_COLOR)
+#define PNG_COLOR_TYPE_RGB_ALPHA  (PNG_COLOR_MASK_COLOR | PNG_COLOR_MASK_ALPHA)
+#define PNG_COLOR_TYPE_GRAY_ALPHA (PNG_COLOR_MASK_ALPHA)
+
+#define PNG_FILTER_TYPE_LOCO   64
+#define PNG_FILTER_VALUE_NONE  0
+#define PNG_FILTER_VALUE_SUB   1
+#define PNG_FILTER_VALUE_UP    2
+#define PNG_FILTER_VALUE_AVG   3
+#define PNG_FILTER_VALUE_PAETH 4
+#define PNG_FILTER_VALUE_MIXED 5
+
+#define PNG_IHDR      0x0001
+#define PNG_IDAT      0x0002
+#define PNG_ALLIMAGE  0x0004
+#define PNG_PLTE      0x0008
+
+#define NB_PASSES 7
+
+extern const uint8_t ff_pngsig[8];
+extern const uint8_t ff_mngsig[8];
+
+/* Mask to determine which y pixels are valid in a pass */
+extern const uint8_t ff_png_pass_ymask[NB_PASSES];
+
+/* minimum x value */
+extern const uint8_t ff_png_pass_xmin[NB_PASSES];
+
+/* x shift to get row width */
+extern const uint8_t ff_png_pass_xshift[NB_PASSES];
+
+/* Mask to determine which pixels are valid in a pass */
+extern const uint8_t ff_png_pass_mask[NB_PASSES];
+
+void *ff_png_zalloc(void *opaque, unsigned int items, unsigned int size);
+
+void ff_png_zfree(void *opaque, void *ptr);
+
+int ff_png_get_nb_channels(int color_type);
+
+/* compute the row size of an interleaved pass */
+int ff_png_pass_row_size(int pass, int bits_per_pixel, int width);
+
+void ff_add_png_paeth_prediction(uint8_t *dst, uint8_t *src, uint8_t *top, int w, int bpp);
+
+#endif /* AVCODEC_PNG_H */

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/fft.c
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/fft.c	2010-12-10 08:06:37 UTC (rev 6829)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/fft.c	2010-12-10 08:06:40 UTC (rev 6830)
@@ -105,7 +105,7 @@
 
     if (ARCH_ARM)     ff_fft_init_arm(s);
     if (HAVE_ALTIVEC) ff_fft_init_altivec(s);
-    if (HAVE_MMX)     ff_fft_init_mmx(s);
+    // MEANX if (HAVE_MMX)     ff_fft_init_mmx(s);
 
     for(j=4; j&lt;=nbits; j++) {
         ff_init_ff_cos_tabs(j);

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/h263dec.c
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/h263dec.c	2010-12-10 08:06:37 UTC (rev 6829)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/h263dec.c	2010-12-10 08:06:40 UTC (rev 6830)
@@ -120,7 +120,24 @@
 
     return 0;
 }
+/* MeanX : Ugly patch to detect vo ppacked stuff ... */
+int av_is_voppacked(AVCodecContext *avctx, int *vop_packed, int *gmc, int *qpel)
+{
+    MpegEncContext *s = avctx-&gt;priv_data;
+    // set sane default
+    *vop_packed=0;
+    *gmc=0;
+    *qpel=0;
+    if(avctx-&gt;codec-&gt;id!=CODEC_ID_MPEG4) return 0;
+    	
+  	*vop_packed=(s-&gt;divx_packed);
+	*qpel=s-&gt;quarter_sample;
+	*gmc=0;	// FIXME
+	return 1;
 
+  }
+  /* MeanX */
+
 av_cold int ff_h263_decode_end(AVCodecContext *avctx)
 {
     MpegEncContext *s = avctx-&gt;priv_data;
@@ -422,6 +439,12 @@
     } else {
         ret = h263_decode_picture_header(s);
     }
+	//MEANX we need to do it here also for quicktime file / ctts atom 
+        // we need the correct frame type, and qt file may contain 
+        // vop not coded frame.
+        pict-&gt;pict_type=s-&gt;current_picture.pict_type= s-&gt;pict_type;
+        pict-&gt;key_frame=s-&gt;current_picture.key_frame= s-&gt;pict_type == FF_I_TYPE;
+        //MEANX
 
     if(ret==FRAME_SKIPPED) return get_consumed_bytes(s, buf_size);
 
@@ -717,6 +740,14 @@
 
 assert(s-&gt;current_picture.pict_type == s-&gt;current_picture_ptr-&gt;pict_type);
 assert(s-&gt;current_picture.pict_type == s-&gt;pict_type);
+/* MEANX */
+  if(s-&gt;current_picture_ptr)
+      s-&gt;current_picture_ptr-&gt;opaque=pict-&gt;opaque;
+/* MEANX */
+
+
+
+
     if (s-&gt;pict_type == FF_B_TYPE || s-&gt;low_delay) {
         *pict= *(AVFrame*)s-&gt;current_picture_ptr;
     } else if (s-&gt;last_picture_ptr != NULL) {

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/h264_parser.c
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/h264_parser.c	2010-12-10 08:06:37 UTC (rev 6829)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/h264_parser.c	2010-12-10 08:06:40 UTC (rev 6830)
@@ -29,10 +29,51 @@
 #include &quot;h264_parser.h&quot;
 #include &quot;h264data.h&quot;
 #include &quot;golomb.h&quot;
-
+#include &quot;ff_spsinfo.h&quot; // MEANX
 #include &lt;assert.h&gt;
+ // MEANX
+/**
+    \fn AVCodecParserContext
+*/
+int ff_h264_info(AVCodecParserContext *parser,ffSpsInfo *info)
+{
+    H264Context *ctx = parser-&gt;priv_data;
+    memset(info,0,sizeof(*info));
+    if(!ctx-&gt;sps.mb_width || !ctx-&gt;sps.mb_height)
+    {
+        return 0;
+    }
+    info-&gt;width=ctx-&gt;sps.mb_width  * 16;
+    info-&gt;height=(2-ctx-&gt;sps.frame_mbs_only_flag)*ctx-&gt;sps.mb_height * 16;
+    if(ctx-&gt;sps.timing_info_present_flag)
+    {
+            float scale=ctx-&gt;sps.time_scale ;
+            float ticks=ctx-&gt;sps.num_units_in_tick;
+            info-&gt;fps1000 =  (uint32_t) ((scale/ticks) *    1000.);
+#undef printf
+            printf(&quot;Scale : %d, tick=%d, fps=%d\n&quot;,(int)scale,(int)ticks,(int)info-&gt;fps1000);
+    }else
+    {
+            printf(&quot;[H264] No timing information\n&quot;);
+            info-&gt;fps1000=25000;
+    }
+    // D.2.2 SEI Timing present if CpbDbpDelayPresentFlag=1 or pictStructPresent=1
+    // CpbDbpDelayPresentFlag =1 if nal_hdr or vcl_hrd or ???
+    int f=ctx-&gt;sps.nal_hrd_parameters_present_flag | ctx-&gt;sps.vcl_hrd_parameters_present_flag;
+    info-&gt;hasStructInfo=f | ctx-&gt;sps.pic_struct_present_flag;;
+    // While decoding SEI, if CpbDpbDelaysPresentFlags is there we skip cpb_removal_delay + dpb_output_delay
 
-
+    info-&gt;CpbDpbToSkip=0;
+    if(f)
+    {
+        info-&gt;CpbDpbToSkip=ctx-&gt;sps.cpb_removal_delay_length+ctx-&gt;sps.dpb_output_delay_length;
+    }
+#warning fixme sar vs dar
+    info-&gt;darNum=ctx-&gt;sps.sar.num;
+    info-&gt;darDen=ctx-&gt;sps.sar.den;
+    return 1;
+}
+// /MEANX
 int ff_h264_find_frame_end(H264Context *h, const uint8_t *buf, int buf_size)
 {
     int i;

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/h264dsp.c
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/h264dsp.c	2010-12-10 08:06:37 UTC (rev 6829)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/h264dsp.c	2010-12-10 08:06:40 UTC (rev 6830)
@@ -316,5 +316,7 @@
 
     if (ARCH_ARM) ff_h264dsp_init_arm(c);
     if (HAVE_ALTIVEC) ff_h264dsp_init_ppc(c);
+#if CONFIG_H264DSP //MEANX
     if (HAVE_MMX) ff_h264dsp_init_x86(c);
+#endif
 }

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/mpeg12.c
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/mpeg12.c	2010-12-10 08:06:37 UTC (rev 6829)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/mpeg12.c	2010-12-10 08:06:40 UTC (rev 6830)
@@ -1948,7 +1948,12 @@
         ff_er_frame_end(s);
 
         MPV_frame_end(s);
+/* MEANX */
+  if(s-&gt;current_picture_ptr)
+      s-&gt;current_picture_ptr-&gt;opaque=pict-&gt;opaque;
+/* MEANX */
 
+
         if (s-&gt;pict_type == FF_B_TYPE || s-&gt;low_delay) {
             *pict= *(AVFrame*)s-&gt;current_picture_ptr;
             ff_print_debug_info(s, pict);

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/mpeg12enc.c
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/mpeg12enc.c	2010-12-10 08:06:37 UTC (rev 6829)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/mpeg12enc.c	2010-12-10 08:06:40 UTC (rev 6830)
@@ -127,10 +127,19 @@
             s-&gt;frame_rate_index= i;
         }
     }
+ /* MEANX 
+
     if(dmin)
         return -1;
     else
         return 0;
+  */
+        if(dmin&gt;4)
+   {
+        av_log(0,AV_LOG_ERROR,&quot;We did a roundup ! Expect async!\n&quot;);
+   }
+        return 0; //MEANX
+
 }
 
 static av_cold int encode_init(AVCodecContext *avctx)
@@ -209,6 +218,7 @@
             put_sbits(&amp;s-&gt;pb, 12, s-&gt;width );
             put_sbits(&amp;s-&gt;pb, 12, s-&gt;height);
 
+#if 0 //MEANX
             for(i=1; i&lt;15; i++){
                 float error= aspect_ratio;
                 if(s-&gt;codec_id == CODEC_ID_MPEG1VIDEO || i &lt;=1)
@@ -223,20 +233,44 @@
                     s-&gt;aspect_ratio_info= i;
                 }
             }
+#endif // MEANX
+            //MEANX put_bits(&amp;s-&gt;pb, 4, s-&gt;aspect_ratio_info);
+            //MEANX put_bits(&amp;s-&gt;pb, 4, s-&gt;frame_rate_index);
+ // MEANX 4:3
+  if(s-&gt;avctx-&gt;sample_aspect_ratio.num==16 &amp;&amp; s-&gt;avctx-&gt;sample_aspect_ratio.den==9)
+            {
+                //printf(&quot;FFmpeg : Wide\n&quot;);
+                put_bits(&amp;s-&gt;pb,4,3); //16:9
+            }
+            else        //4:3
+            {
+              if(s-&gt;codec_id == CODEC_ID_MPEG2VIDEO)
+                put_bits(&amp;s-&gt;pb, 4, 2);
+              else
+                put_bits(&amp;s-&gt;pb, 4, 12); // MPEG1
+            }
+// /MEANX
 
-            put_bits(&amp;s-&gt;pb, 4, s-&gt;aspect_ratio_info);
-            put_bits(&amp;s-&gt;pb, 4, s-&gt;frame_rate_index);
+// //MEANX PULLDOWN            put_bits(&amp;s-&gt;pb, 4, s-&gt;frame_rate_index);
+if((s-&gt;flags2 &amp; CODEC_FLAG2_32_PULLDOWN) &amp;&amp; (s-&gt;codec_id == CODEC_ID_MPEG2VIDEO))
+            {           
+                put_bits(&amp;s-&gt;pb, 4,4);
+            }
+            else
+            {                                  
+                put_bits(&amp;s-&gt;pb, 4, s-&gt;frame_rate_index);
+            } //MEANX pulldown
 
-            if(s-&gt;avctx-&gt;rc_max_rate){
-                v = (s-&gt;avctx-&gt;rc_max_rate + 399) / 400;
+            if(s-&gt;avctx-&gt;rc_max_rate_header){ //MEANX we use header
+                v = (s-&gt;avctx-&gt;rc_max_rate_header + 399) / 400;
                 if (v &gt; 0x3ffff &amp;&amp; s-&gt;codec_id == CODEC_ID_MPEG1VIDEO)
                     v = 0x3ffff;
             }else{
                 v= 0x3FFFF;
             }
 
-            if(s-&gt;avctx-&gt;rc_buffer_size)
-                vbv_buffer_size = s-&gt;avctx-&gt;rc_buffer_size;
+            if(s-&gt;avctx-&gt;rc_buffer_size_header) // MEANX we use header
+                vbv_buffer_size = s-&gt;avctx-&gt;rc_buffer_size_header;
             else
                 /* VBV calculation: Scaled so that a VCD has the proper VBV size of 40 kilobytes */
                 vbv_buffer_size = (( 20 * s-&gt;bit_rate) / (1151929 / 2)) * 8 * 1024;
@@ -269,8 +303,17 @@
 
                 put_bits(&amp;s-&gt;pb, 3, s-&gt;avctx-&gt;profile); //profile
                 put_bits(&amp;s-&gt;pb, 4, s-&gt;avctx-&gt;level); //level
+   // MEANX pulldown put_bits(&amp;s-&gt;pb, 1, s-&gt;progressive_sequence);
+  // MEANX Pulldown
+ if(s-&gt;flags2 &amp; CODEC_FLAG2_32_PULLDOWN) //MEANX
+                        put_bits(&amp;s-&gt;pb, 1, 0);
+                else
+                        put_bits(&amp;s-&gt;pb, 1, s-&gt;progressive_sequence);
 
-                put_bits(&amp;s-&gt;pb, 1, s-&gt;progressive_sequence);
+
+// /MEANX
+
+
                 put_bits(&amp;s-&gt;pb, 2, s-&gt;chroma_format);
                 put_bits(&amp;s-&gt;pb, 2, s-&gt;width &gt;&gt;12);
                 put_bits(&amp;s-&gt;pb, 2, s-&gt;height&gt;&gt;12);
@@ -339,6 +382,8 @@
 
 void mpeg1_encode_picture_header(MpegEncContext *s, int picture_number)
 {
+	int tff,rff; //MEANX
+
     mpeg1_encode_sequence_header(s);
 
     /* mpeg1 picture header */
@@ -375,6 +420,49 @@
 
     s-&gt;frame_pred_frame_dct = 1;
     if(s-&gt;codec_id == CODEC_ID_MPEG2VIDEO){
+ /* MEANX -- Pulldown */
+        if(s-&gt;flags2 &amp; CODEC_FLAG2_32_PULLDOWN)
+        {
+        
+                switch((s-&gt;picture_number - 
+                          s-&gt;gop_picture_number)&amp;3)
+                {
+                        case 0:
+                        default:
+                                rff=1;
+                                tff=1;
+                                break;
+                        case 1:
+                                rff=0;
+                                tff=0;
+                                break;
+                        case 2:
+                                rff=1;
+                                tff=0;
+                                break;
+                        case 3:
+                                rff=0;
+                                tff=1;
+                                break;
+                }               
+           }
+        else
+        {
+                if (s-&gt;progressive_sequence) 
+                {
+                        tff=0; /* no repeat */
+                } else 
+                {
+                        tff= s-&gt;current_picture_ptr-&gt;top_field_first;
+                }
+                rff=s-&gt;repeat_first_field;
+        
+        }
+
+//               /MEANX pulldown
+
+
+
         put_header(s, EXT_START_CODE);
         put_bits(&amp;s-&gt;pb, 4, 8); //pic ext
         if (s-&gt;pict_type == FF_P_TYPE || s-&gt;pict_type == FF_B_TYPE) {
@@ -393,11 +481,16 @@
 
         assert(s-&gt;picture_structure == PICT_FRAME);
         put_bits(&amp;s-&gt;pb, 2, s-&gt;picture_structure);
+#if 0 //MEANX
+
         if (s-&gt;progressive_sequence) {
             put_bits(&amp;s-&gt;pb, 1, 0); /* no repeat */
         } else {
             put_bits(&amp;s-&gt;pb, 1, s-&gt;current_picture_ptr-&gt;top_field_first);
         }
+#endif
+         put_bits(&amp;s-&gt;pb, 1, tff);  //MEANX PULLDOWN
+
         /* XXX: optimize the generation of this flag with entropy
            measures */
         s-&gt;frame_pred_frame_dct = s-&gt;progressive_sequence;
@@ -407,7 +500,10 @@
         put_bits(&amp;s-&gt;pb, 1, s-&gt;q_scale_type);
         put_bits(&amp;s-&gt;pb, 1, s-&gt;intra_vlc_format);
         put_bits(&amp;s-&gt;pb, 1, s-&gt;alternate_scan);
-        put_bits(&amp;s-&gt;pb, 1, s-&gt;repeat_first_field);
+ // MEANX put_bits(&amp;s-&gt;pb, 1, s-&gt;repeat_first_field);
+	put_bits(&amp;s-&gt;pb, 1, rff);
+      // /MEANX
+
         s-&gt;progressive_frame = s-&gt;progressive_sequence;
         put_bits(&amp;s-&gt;pb, 1, s-&gt;chroma_format == CHROMA_420 ? s-&gt;progressive_frame : 0); /* chroma_420_type */
         put_bits(&amp;s-&gt;pb, 1, s-&gt;progressive_frame);

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/mpegvideo.c
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/mpegvideo.c	2010-12-10 08:06:37 UTC (rev 6829)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/mpegvideo.c	2010-12-10 08:06:40 UTC (rev 6830)
@@ -653,7 +653,11 @@
     FF_ALLOCZ_OR_GOTO(s-&gt;avctx, s-&gt;prev_pict_types, PREV_PICT_TYPES_BUFFER_SIZE, fail);
 
     s-&gt;parse_context.state= -1;
-    if((s-&gt;avctx-&gt;debug&amp;(FF_DEBUG_VIS_QP|FF_DEBUG_VIS_MB_TYPE)) || (s-&gt;avctx-&gt;debug_mv)){
+ //MEANX: Allocate them always, as they may be free when we decode 1st image
+
+    // MEANXif((s-&gt;avctx-&gt;debug&amp;(FF_DEBUG_VIS_QP|FF_DEBUG_VIS_MB_TYPE)) || (s-&gt;avctx-&gt;debug_mv)){
+if(1){ // MEANX
+
        s-&gt;visualization_buffer[0] = av_malloc((s-&gt;mb_width*16 + 2*EDGE_WIDTH) * s-&gt;mb_height*16 + 2*EDGE_WIDTH);
        s-&gt;visualization_buffer[1] = av_malloc((s-&gt;mb_width*16 + 2*EDGE_WIDTH) * s-&gt;mb_height*16 + 2*EDGE_WIDTH);
        s-&gt;visualization_buffer[2] = av_malloc((s-&gt;mb_width*16 + 2*EDGE_WIDTH) * s-&gt;mb_height*16 + 2*EDGE_WIDTH);

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/mpegvideo_enc.c
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/mpegvideo_enc.c	2010-12-10 08:06:37 UTC (rev 6829)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/mpegvideo_enc.c	2010-12-10 08:06:40 UTC (rev 6830)
@@ -367,12 +367,14 @@
 
         av_log(avctx, AV_LOG_INFO, &quot;Warning vbv_delay will be set to 0xFFFF (=VBR) as the specified vbv buffer is too large for the given bitrate!\n&quot;);
     }
+#if 0 //MEANX
 
     if((s-&gt;flags &amp; CODEC_FLAG_4MV) &amp;&amp; s-&gt;codec_id != CODEC_ID_MPEG4
        &amp;&amp; s-&gt;codec_id != CODEC_ID_H263 &amp;&amp; s-&gt;codec_id != CODEC_ID_H263P &amp;&amp; s-&gt;codec_id != CODEC_ID_FLV1){
         av_log(avctx, AV_LOG_ERROR, &quot;4MV not supported by codec\n&quot;);
         return -1;
     }
+#endif
 
     if(s-&gt;obmc &amp;&amp; s-&gt;avctx-&gt;mb_decision != FF_MB_DECISION_SIMPLE){
         av_log(avctx, AV_LOG_ERROR, &quot;OBMC is only supported with simple mb decision\n&quot;);
@@ -413,10 +415,12 @@
         return -1;
     }
 
+#if 0 //MEANX
     if(s-&gt;mpeg_quant &amp;&amp; s-&gt;codec_id != CODEC_ID_MPEG4){ //FIXME mpeg2 uses that too
         av_log(avctx, AV_LOG_ERROR, &quot;mpeg2 style quantization not supported by codec\n&quot;);
         return -1;
     }
+#endif
 
     if((s-&gt;flags &amp; CODEC_FLAG_CBP_RD) &amp;&amp; !avctx-&gt;trellis){
         av_log(avctx, AV_LOG_ERROR, &quot;CBP RD needs trellis quant\n&quot;);

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/png.c
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/png.c	2010-12-10 08:06:37 UTC (rev 6829)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/png.c	2010-12-10 08:06:40 UTC (rev 6830)
@@ -20,7 +20,7 @@
  */
 #include &quot;avcodec.h&quot;
 #include &quot;bytestream.h&quot;
-#include &quot;png.h&quot;
+#include &quot;ffpng.h&quot;
 
 const uint8_t ff_pngsig[8] = {137, 80, 78, 71, 13, 10, 26, 10};
 const uint8_t ff_mngsig[8] = {138, 77, 78, 71, 13, 10, 26, 10};

Deleted: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/png.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/png.h	2010-12-10 08:06:37 UTC (rev 6829)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/png.h	2010-12-10 08:06:40 UTC (rev 6830)
@@ -1,78 +0,0 @@
-/*
- * PNG image format
- * Copyright (c) 2003 Fabrice Bellard
- *
- * This file is part of FFmpeg.
- *
- * FFmpeg is free software; you can redistribute it and/or
- * modify it under the terms of the GNU Lesser General Public
- * License as published by the Free Software Foundation; either
- * version 2.1 of the License, or (at your option) any later version.
- *
- * FFmpeg is distributed in the hope that it will be useful,
- * but WITHOUT ANY WARRANTY; without even the implied warranty of
- * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
- * Lesser General Public License for more details.
- *
- * You should have received a copy of the GNU Lesser General Public
- * License along with FFmpeg; if not, write to the Free Software
- * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
- */
-
-#ifndef AVCODEC_PNG_H
-#define AVCODEC_PNG_H
-
-#include &lt;stdint.h&gt;
-
-#define PNG_COLOR_MASK_PALETTE    1
-#define PNG_COLOR_MASK_COLOR      2
-#define PNG_COLOR_MASK_ALPHA      4
-
-#define PNG_COLOR_TYPE_GRAY 0
-#define PNG_COLOR_TYPE_PALETTE  (PNG_COLOR_MASK_COLOR | PNG_COLOR_MASK_PALETTE)
-#define PNG_COLOR_TYPE_RGB        (PNG_COLOR_MASK_COLOR)
-#define PNG_COLOR_TYPE_RGB_ALPHA  (PNG_COLOR_MASK_COLOR | PNG_COLOR_MASK_ALPHA)
-#define PNG_COLOR_TYPE_GRAY_ALPHA (PNG_COLOR_MASK_ALPHA)
-
-#define PNG_FILTER_TYPE_LOCO   64
-#define PNG_FILTER_VALUE_NONE  0
-#define PNG_FILTER_VALUE_SUB   1
-#define PNG_FILTER_VALUE_UP    2
-#define PNG_FILTER_VALUE_AVG   3
-#define PNG_FILTER_VALUE_PAETH 4
-#define PNG_FILTER_VALUE_MIXED 5
-
-#define PNG_IHDR      0x0001
-#define PNG_IDAT      0x0002
-#define PNG_ALLIMAGE  0x0004
-#define PNG_PLTE      0x0008
-
-#define NB_PASSES 7
-
-extern const uint8_t ff_pngsig[8];
-extern const uint8_t ff_mngsig[8];
-
-/* Mask to determine which y pixels are valid in a pass */
-extern const uint8_t ff_png_pass_ymask[NB_PASSES];
-
-/* minimum x value */
-extern const uint8_t ff_png_pass_xmin[NB_PASSES];
-
-/* x shift to get row width */
-extern const uint8_t ff_png_pass_xshift[NB_PASSES];
-
-/* Mask to determine which pixels are valid in a pass */
-extern const uint8_t ff_png_pass_mask[NB_PASSES];
-
-void *ff_png_zalloc(void *opaque, unsigned int items, unsigned int size);
-
-void ff_png_zfree(void *opaque, void *ptr);
-
-int ff_png_get_nb_channels(int color_type);
-
-/* compute the row size of an interleaved pass */
-int ff_png_pass_row_size(int pass, int bits_per_pixel, int width);
-
-void ff_add_png_paeth_prediction(uint8_t *dst, uint8_t *src, uint8_t *top, int w, int bpp);
-
-#endif /* AVCODEC_PNG_H */

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/pngdec.c
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/pngdec.c	2010-12-10 08:06:37 UTC (rev 6829)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/pngdec.c	2010-12-10 08:06:40 UTC (rev 6830)
@@ -21,7 +21,7 @@
 #include &quot;libavcore/imgutils.h&quot;
 #include &quot;avcodec.h&quot;
 #include &quot;bytestream.h&quot;
-#include &quot;png.h&quot;
+#include &quot;ffpng.h&quot;
 #include &quot;dsputil.h&quot;
 
 /* TODO:

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/pngenc.c
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/pngenc.c	2010-12-10 08:06:37 UTC (rev 6829)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/pngenc.c	2010-12-10 08:06:40 UTC (rev 6830)
@@ -21,7 +21,7 @@
 #include &quot;avcodec.h&quot;
 #include &quot;bytestream.h&quot;
 #include &quot;dsputil.h&quot;
-#include &quot;png.h&quot;
+#include &quot;ffpng.h&quot;
 
 /* TODO:
  * - add 2, 4 and 16 bit depth support

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/utils.c
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/utils.c	2010-12-10 08:06:37 UTC (rev 6829)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/utils.c	2010-12-10 08:06:40 UTC (rev 6830)
@@ -658,10 +658,12 @@
 
     if((avctx-&gt;codec-&gt;capabilities &amp; CODEC_CAP_DELAY) || avpkt-&gt;size){
         //FIXME remove the check below _after_ ensuring that all audio check that the available space is enough
+#if 0 // MEANX : Silence
         if(*frame_size_ptr &lt; AVCODEC_MAX_AUDIO_FRAME_SIZE){
             av_log(avctx, AV_LOG_ERROR, &quot;buffer smaller than AVCODEC_MAX_AUDIO_FRAME_SIZE\n&quot;);
             return -1;
         }
+#endif
         if(*frame_size_ptr &lt; FF_MIN_BUFFER_SIZE ||
         *frame_size_ptr &lt; avctx-&gt;channels * avctx-&gt;frame_size * sizeof(int16_t)){
             av_log(avctx, AV_LOG_ERROR, &quot;buffer %d too small\n&quot;, *frame_size_ptr);
@@ -967,13 +969,13 @@
 
 const char *avcodec_configuration(void)
 {
-    return FFMPEG_CONFIGURATION;
+    return &quot;avidemux&quot;; //FFMPEG_CONFIGURATION;
 }
 
 const char *avcodec_license(void)
 {
 #define LICENSE_PREFIX &quot;libavcodec license: &quot;
-    return LICENSE_PREFIX FFMPEG_LICENSE + sizeof(LICENSE_PREFIX) - 1;
+    return LICENSE_PREFIX /*FFMPEG_LICENSE*/ &quot;GPL&quot; + sizeof(LICENSE_PREFIX) - 1;
 }
 
 void avcodec_init(void)

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/x86/mathops.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/x86/mathops.h	2010-12-10 08:06:37 UTC (rev 6829)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/x86/mathops.h	2010-12-10 08:06:40 UTC (rev 6830)
@@ -21,8 +21,12 @@
 
 #ifndef AVCODEC_X86_MATHOPS_H
 #define AVCODEC_X86_MATHOPS_H
+// MEANX
+#ifndef ADM_NO_CONFIG_H
+#include &quot;config.h&quot;
+#endif
+// /MEANX
 
-#include &quot;config.h&quot;
 #include &quot;libavutil/common.h&quot;
 
 #if ARCH_X86_32

Added: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcore/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcore/CMakeLists.txt	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcore/CMakeLists.txt	2010-12-10 08:06:40 UTC (rev 6830)
@@ -0,0 +1,10 @@
+SET(ADM_LIB ADM_libavcore6)
+
+SET(${ADM_LIB}_SRCS 
+audioconvert.c  imgutils.c  parseutils.c  samplefmt.c  utils.c
+)
+
+ADD_LIBRARY(${ADM_LIB} SHARED ${${ADM_LIB}_SRCS})
+TARGET_LINK_LIBRARIES(${ADM_LIB} ADM_core6)
+
+ADM_INSTALL_LIB(${ADM_LIB} )

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavformat/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavformat/CMakeLists.txt	2010-12-10 08:06:37 UTC (rev 6829)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavformat/CMakeLists.txt	2010-12-10 08:06:40 UTC (rev 6830)
@@ -7,6 +7,7 @@
 	avc.c   riff.c
         mpegenc.c
         movenchint.c sdp.c adtsenc.c flacenc.c flacenc_header.c vorbiscomment.c
+	id3v2.c id3v1.c avlanguage.c
 )
 IF(WIN32)
   ADD_DEFINITIONS(-DHAVE_DOS_PATHS=1)

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavformat/file.c
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavformat/file.c	2010-12-10 08:06:37 UTC (rev 6829)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavformat/file.c	2010-12-10 08:06:40 UTC (rev 6830)
@@ -30,7 +30,73 @@
 #include &lt;stdlib.h&gt;
 #include &quot;os_support.h&quot;
 
+// GRUNTSTER start
+#ifdef __WIN32
+#include &lt;windows.h&gt;
 
+int utf8StringToWideChar(const char *utf8String, int utf8StringLength, wchar_t *wideCharString)
+{
+	int wideCharStringLength = MultiByteToWideChar(CP_UTF8, 0, utf8String, utf8StringLength, NULL, 0);
+
+	if (wideCharString)
+		MultiByteToWideChar(CP_UTF8, 0, utf8String, utf8StringLength, wideCharString, wideCharStringLength);
+
+	return wideCharStringLength;
+}
+
+int ADM_open(const char *path, int oflag, ...)
+{
+	int fileNameLength = utf8StringToWideChar(path, -1, NULL);
+	wchar_t wcFile[fileNameLength];
+	int creation = 0, access = 0;
+	HANDLE hFile;
+
+	utf8StringToWideChar(path, -1, wcFile);
+
+	if (oflag &amp; O_WRONLY || oflag &amp; O_RDWR)
+	{
+		access = GENERIC_WRITE;
+
+		if (oflag &amp; O_RDWR)
+			access |= GENERIC_READ;
+
+		if (oflag &amp; O_CREAT)
+		{
+			if (oflag &amp; O_EXCL)
+				creation = CREATE_NEW;
+			else if (oflag &amp; O_TRUNC)
+				creation = CREATE_ALWAYS;
+			else
+				creation = OPEN_ALWAYS;
+		}
+		else if (oflag &amp; O_TRUNC)
+			creation = TRUNCATE_EXISTING;
+	}
+	else if (oflag &amp; O_RDONLY)
+		creation = OPEN_EXISTING;
+
+	if (creation &amp; GENERIC_WRITE)
+	{
+		hFile = CreateFileW(wcFile, access, 0, NULL, creation, 0, NULL);
+
+		if (hFile == INVALID_HANDLE_VALUE)
+			return -1;
+		else
+			CloseHandle(hFile);
+	}
+
+	hFile = CreateFileW(wcFile, access, FILE_SHARE_READ, NULL, creation, 0, NULL);
+
+	if (hFile == INVALID_HANDLE_VALUE)
+		return -1;
+	else
+		return _open_osfhandle((intptr_t)hFile, oflag);
+}
+
+#define open ADM_open
+#endif
+// GRUNTSTER end
+
 /* standard file protocol */
 
 static int file_read(URLContext *h, unsigned char *buf, int size)

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavformat/flvenc.c
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavformat/flvenc.c	2010-12-10 08:06:37 UTC (rev 6829)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavformat/flvenc.c	2010-12-10 08:06:40 UTC (rev 6830)
@@ -443,7 +443,8 @@
     &quot;video/x-flv&quot;,
     &quot;flv&quot;,
     sizeof(FLVContext),
-#if CONFIG_LIBMP3LAME
+//MEANX #if CONFIG_LIBMP3LAME
+#ifdef HAVE_LIBMP3LAME
     CODEC_ID_MP3,
 #else // CONFIG_LIBMP3LAME
     CODEC_ID_ADPCM_SWF,
@@ -455,3 +456,9 @@
     .codec_tag= (const AVCodecTag* const []){flv_video_codec_ids, flv_audio_codec_ids, 0},
     .flags= AVFMT_GLOBALHEADER | AVFMT_VARIABLE_FPS,
 };
+// MEANX
+int flvenc_init(void)
+{
+    av_register_output_format(&amp;flv_muxer);
+    return 0;
+}
\ No newline at end of file

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavformat/isom.c
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavformat/isom.c	2010-12-10 08:06:37 UTC (rev 6829)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavformat/isom.c	2010-12-10 08:06:40 UTC (rev 6830)
@@ -222,7 +222,10 @@
     { CODEC_ID_MP1, MKTAG('.', 'm', 'p', '1') }, /* MPEG layer 1 */
     { CODEC_ID_MP2, MKTAG('.', 'm', 'p', '2') }, /* MPEG layer 2 */
 
-    { CODEC_ID_MP3, MKTAG('.', 'm', 'p', '3') }, /* MPEG layer 3 */ /* sample files at <A HREF="http://www.3ivx.com/showcase.html">http://www.3ivx.com/showcase.html</A> use this tag */
+    //MEANX { CODEC_ID_MP3, MKTAG('.', 'm', 'p', '3') }, /* MPEG layer 3 */ /* sample files at <A HREF="http://www.3ivx.com/showcase.html">http://www.3ivx.com/showcase.html</A> use this tag */
+     { CODEC_ID_MP3, MKTAG( 'm', 'p', '4','a') },
+     { CODEC_ID_MP2, MKTAG( 'm', 'p', '4', 'a') },
+    // /MEANX
     { CODEC_ID_MP3, 0x6D730055 }, /* MPEG layer 3 */
 
 /*  { CODEC_ID_OGG_VORBIS, MKTAG('O', 'g', 'g', 'S') }, *//* sample files at <A HREF="http://heroinewarrior.com/xmovie.php3">http://heroinewarrior.com/xmovie.php3</A> use this tag */

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavformat/matroskaenc.c
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavformat/matroskaenc.c	2010-12-10 08:06:37 UTC (rev 6829)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavformat/matroskaenc.c	2010-12-10 08:06:40 UTC (rev 6830)
@@ -410,6 +410,7 @@
 
 static int put_xiph_codecpriv(AVFormatContext *s, ByteIOContext *pb, AVCodecContext *codec)
 {
+#if 0 // MEANX avidemux does thing differently
     uint8_t *header_start[3];
     int header_len[3];
     int first_header_size;
@@ -434,6 +435,28 @@
         put_buffer(pb, header_start[j], header_len[j]);
 
     return 0;
+#else
+   // Not endian safe....
+      uint32_t packetLen[3],*ptr=(uint32_t *)codec-&gt;extradata;
+      uint8_t *data[3],i,j;
+      if( 3*4+ptr[0]+ptr[1]+ptr[2]!=codec-&gt;extradata_size)
+      {
+        av_log(s, AV_LOG_ERROR, &quot;Broken avidemux xiph header.\n&quot;);
+        return -1;
+      }
+      data[0]=codec-&gt;extradata+3*4;
+      data[1]=data[0]+ptr[0];
+      data[2]=data[1]+ptr[1];
+      put_byte(pb, 2);                    // number packets - 1
+      for (j = 0; j &lt; 2; j++) 
+      {
+          put_xiph_size(pb, ptr[j]);
+      }
+      for (j = 0; j &lt; 3; j++)
+        put_buffer(pb, data[j], ptr[j]);
+      
+      return 0; // /MEANX
+#endif
 }
 
 static void get_aac_sample_rates(AVFormatContext *s, AVCodecContext *codec, int *sample_rate, int *output_sample_rate)
@@ -551,6 +574,23 @@
         put_ebml_uint (pb, MATROSKA_ID_TRACKNUMBER     , i + 1);
         put_ebml_uint (pb, MATROSKA_ID_TRACKUID        , i + 1);
         put_ebml_uint (pb, MATROSKA_ID_TRACKFLAGLACING , 0);    // no lacing (yet)
+/**  MEANX : Add a default duration for video **/
+        if(codec-&gt;codec_type==CODEC_TYPE_VIDEO)
+        {
+          if(codec-&gt;time_base.den &amp;&amp; codec-&gt;time_base.num)
+          {
+            int num=codec-&gt;time_base.num;
+            int den=codec-&gt;time_base.den;
+            unsigned int default_duration;
+            float period=num;
+                  period/=den;
+                  period*=1000*1000*1000; // in ns
+                  default_duration=(unsigned int)floor(period);
+                  put_ebml_uint (pb, MATROSKA_ID_TRACKDEFAULTDURATION ,default_duration);
+          }
+        }
+        
+/**  MEANX : Add a default duration for video **/
 
         if ((tag = av_metadata_get(st-&gt;metadata, &quot;title&quot;, NULL, 0)))
             put_ebml_string(pb, MATROSKA_ID_TRACKNAME, tag-&gt;value);
@@ -1226,3 +1266,17 @@
     .codec_tag = (const AVCodecTag* const []){ff_codec_wav_tags, 0},
 };
 #endif
+
+ // MEANX
+ //
+ int matroskaenc_init(void)
+ {
+     av_register_output_format(&amp;matroska_muxer);
+#if CONFIG_WEBM_MUXER
+     av_register_output_format(&amp;webm_muxer);
+#endif
+     return 0;
+ }
+ // /MEANX
+
+

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavformat/movenc.c
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavformat/movenc.c	2010-12-10 08:06:37 UTC (rev 6829)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavformat/movenc.c	2010-12-10 08:06:40 UTC (rev 6830)
@@ -2299,3 +2299,15 @@
     .codec_tag = (const AVCodecTag* const []){codec_ipod_tags, 0},
 };
 #endif
+/* MEANX */
+int movenc_init(void)
+{
+    av_register_output_format(&amp;mov_muxer);
+    av_register_output_format(&amp;tgp_muxer);
+    av_register_output_format(&amp;mp4_muxer);
+    av_register_output_format(&amp;psp_muxer);
+    av_register_output_format(&amp;tg2_muxer);
+    av_register_output_format(&amp;ipod_muxer);
+    return 0;
+}
+/* MEANX */

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavformat/mpegenc.c
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavformat/mpegenc.c	2010-12-10 08:06:37 UTC (rev 6829)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavformat/mpegenc.c	2010-12-10 08:06:40 UTC (rev 6830)
@@ -1306,3 +1306,13 @@
     mpeg_mux_end,
 };
 #endif
+// MEANX
+//
+int mpegenc_init(void)
+{
+    av_register_output_format(&amp;mpeg2dvd_muxer);
+    av_register_output_format(&amp;mpeg2svcd_muxer);
+    av_register_output_format(&amp;mpeg2vob_muxer);
+    av_register_output_format(&amp;mpeg1vcd_muxer);
+    return 0;
+}
\ No newline at end of file

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavformat/mpegtsenc.c
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavformat/mpegtsenc.c	2010-12-10 08:06:37 UTC (rev 6829)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavformat/mpegtsenc.c	2010-12-10 08:06:40 UTC (rev 6830)
@@ -958,3 +958,8 @@
     mpegts_write_packet,
     mpegts_write_end,
 };
+int mpegtsenc_init(void)
+{
+    av_register_output_format(&amp;mpegts_muxer);
+    return 0;
+}
\ No newline at end of file

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavformat/utils.c
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavformat/utils.c	2010-12-10 08:06:37 UTC (rev 6829)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavformat/utils.c	2010-12-10 08:06:40 UTC (rev 6830)
@@ -50,13 +50,14 @@
 
 const char *avformat_configuration(void)
 {
-    return FFMPEG_CONFIGURATION;
+    return &quot;avidemux&quot;; // MEANX FFMPEG_CONFIGURATION;
 }
 
 const char *avformat_license(void)
 {
 #define LICENSE_PREFIX &quot;libavformat license: &quot;
-    return LICENSE_PREFIX FFMPEG_LICENSE + sizeof(LICENSE_PREFIX) - 1;
+        return LICENSE_PREFIX &quot;GPL&quot;;
+//MEANX    return LICENSE_PREFIX FFMPEG_LICENSE + sizeof(LICENSE_PREFIX) - 1;
 }
 
 /* fraction handling */

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavutil/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavutil/CMakeLists.txt	2010-12-10 08:06:37 UTC (rev 6829)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavutil/CMakeLists.txt	2010-12-10 08:06:40 UTC (rev 6830)
@@ -1,6 +1,8 @@
 SET(ADM_LIB ADM_libavutil6)
 
 SET(${ADM_LIB}_SRCS 
+opt.c
+cpu.c
 eval.c
 adler32.c
 aes.c
@@ -27,6 +29,11 @@
 pixdesc.c
 sha.c
 )
+IF(ADM_CPU_X86)
+	SET(${ADM_LIB}_SRCS  ${${ADM_LIB}_SRCS}
+			x86/cpu.c
+				)
+ENDIF(ADM_CPU_X86)
 
 ADD_LIBRARY(${ADM_LIB} SHARED ${${ADM_LIB}_SRCS})
 TARGET_LINK_LIBRARIES(${ADM_LIB} ADM_core6)

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavutil/avutil.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavutil/avutil.h	2010-12-10 08:06:37 UTC (rev 6829)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavutil/avutil.h	2010-12-10 08:06:40 UTC (rev 6830)
@@ -26,7 +26,14 @@
  * external API header
  */
 
+/* MEANX
+ * - */
+#define ASMALIGN(ZEROBITS) &quot;.p2align &quot; #ZEROBITS &quot;\n\t&quot;
+/* /MEANX
+ */
 
+
+
 #define AV_STRINGIFY(s)         AV_TOSTRING(s)
 #define AV_TOSTRING(s) #s
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavutil/bswap.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavutil/bswap.h	2010-12-10 08:06:37 UTC (rev 6829)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavutil/bswap.h	2010-12-10 08:06:40 UTC (rev 6830)
@@ -27,7 +27,7 @@
 #define AVUTIL_BSWAP_H
 
 #include &lt;stdint.h&gt;
-#include &quot;libavutil/avconfig.h&quot;
+#include &quot;ffmpeg_config/libavutil/avconfig.h&quot; //MEANX
 #include &quot;attributes.h&quot;
 
 #ifdef HAVE_AV_CONFIG_H

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavutil/common.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavutil/common.h	2010-12-10 08:06:37 UTC (rev 6829)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavutil/common.h	2010-12-10 08:06:40 UTC (rev 6830)
@@ -35,7 +35,7 @@
 #include &lt;stdlib.h&gt;
 #include &lt;string.h&gt;
 #include &quot;attributes.h&quot;
-#include &quot;libavutil/avconfig.h&quot;
+#include &quot;ffmpeg_config/libavutil/avconfig.h&quot; //MEANX
 
 #if AV_HAVE_BIGENDIAN
 #   define AV_NE(be, le) (be)

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavutil/internal.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavutil/internal.h	2010-12-10 08:06:37 UTC (rev 6829)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavutil/internal.h	2010-12-10 08:06:40 UTC (rev 6830)
@@ -34,7 +34,11 @@
 #include &lt;stdint.h&gt;
 #include &lt;stddef.h&gt;
 #include &lt;assert.h&gt;
+//MEANX
+#ifndef ADM_NO_CONFIG_H
 #include &quot;config.h&quot;
+#endif
+// /MEANX
 #include &quot;attributes.h&quot;
 #include &quot;timer.h&quot;
 
@@ -101,6 +105,8 @@
 #endif
 
 /* Use to export labels from asm. */
+#include &quot;ADM_mangle.h&quot;
+#if 0 // MEANX
 #define LABEL_MANGLE(a) EXTERN_PREFIX #a
 
 // Use rip-relative addressing if compiling PIC code on x86-64.
@@ -111,7 +117,7 @@
 #endif
 
 #define MANGLE(a) EXTERN_PREFIX LOCAL_MANGLE(a)
-
+#endif // MEANX
 /* debug stuff */
 
 /* dprintf macros */
@@ -140,12 +146,14 @@
 #endif
 
 /* avoid usage of dangerous/inappropriate system functions */
+#if 0 //MEANX
 #undef  malloc
 #define malloc please_use_av_malloc
 #undef  free
 #define free please_use_av_free
 #undef  realloc
 #define realloc please_use_av_realloc
+#endif
 #undef  time
 #define time time_is_forbidden_due_to_security_issues
 #undef  rand

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavutil/intreadwrite.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavutil/intreadwrite.h	2010-12-10 08:06:37 UTC (rev 6829)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavutil/intreadwrite.h	2010-12-10 08:06:40 UTC (rev 6830)
@@ -20,7 +20,7 @@
 #define AVUTIL_INTREADWRITE_H
 
 #include &lt;stdint.h&gt;
-#include &quot;libavutil/avconfig.h&quot;
+#include &quot;ffmpeg_config/libavutil/avconfig.h&quot; //MEANX
 #include &quot;attributes.h&quot;
 #include &quot;bswap.h&quot;
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavutil/lfg.c
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavutil/lfg.c	2010-12-10 08:06:37 UTC (rev 6829)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavutil/lfg.c	2010-12-10 08:06:40 UTC (rev 6830)
@@ -39,7 +39,7 @@
         c-&gt;state[i+2]= AV_RL32(tmp+8);
         c-&gt;state[i+3]= AV_RL32(tmp+12);
     }
-    c-&gt;index=0;
+    c-&gt;xindex=0;
 }
 
 void av_bmg_get(AVLFG *lfg, double out[2])

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavutil/lfg.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavutil/lfg.h	2010-12-10 08:06:37 UTC (rev 6829)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavutil/lfg.h	2010-12-10 08:06:40 UTC (rev 6830)
@@ -24,7 +24,7 @@
 
 typedef struct {
     unsigned int state[64];
-    int index;
+    int xindex;
 } AVLFG;
 
 void av_lfg_init(AVLFG *c, unsigned int seed);
@@ -36,8 +36,8 @@
  * it may be good enough and faster for your specific use case.
  */
 static inline unsigned int av_lfg_get(AVLFG *c){
-    c-&gt;state[c-&gt;index &amp; 63] = c-&gt;state[(c-&gt;index-24) &amp; 63] + c-&gt;state[(c-&gt;index-55) &amp; 63];
-    return c-&gt;state[c-&gt;index++ &amp; 63];
+    c-&gt;state[c-&gt;xindex &amp; 63] = c-&gt;state[(c-&gt;xindex-24) &amp; 63] + c-&gt;state[(c-&gt;xindex-55) &amp; 63];
+    return c-&gt;state[c-&gt;xindex++ &amp; 63];
 }
 
 /**
@@ -46,9 +46,9 @@
  * Please also consider av_lfg_get() above, it is faster.
  */
 static inline unsigned int av_mlfg_get(AVLFG *c){
-    unsigned int a= c-&gt;state[(c-&gt;index-55) &amp; 63];
-    unsigned int b= c-&gt;state[(c-&gt;index-24) &amp; 63];
-    return c-&gt;state[c-&gt;index++ &amp; 63] = 2*a*b+a+b;
+    unsigned int a= c-&gt;state[(c-&gt;xindex-55) &amp; 63];
+    unsigned int b= c-&gt;state[(c-&gt;xindex-24) &amp; 63];
+    return c-&gt;state[c-&gt;xindex++ &amp; 63] = 2*a*b+a+b;
 }
 
 /**

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavutil/libm.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavutil/libm.h	2010-12-10 08:06:37 UTC (rev 6829)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavutil/libm.h	2010-12-10 08:06:40 UTC (rev 6830)
@@ -25,7 +25,11 @@
 #define AVUTIL_LIBM_H
 
 #include &lt;math.h&gt;
+//MEANX
+#ifndef ADM_NO_CONFIG_H
 #include &quot;config.h&quot;
+#endif
+///MEANX
 #include &quot;attributes.h&quot;
 
 #if !HAVE_EXP2

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavutil/mem.c
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavutil/mem.c	2010-12-10 08:06:37 UTC (rev 6829)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavutil/mem.c	2010-12-10 08:06:40 UTC (rev 6830)
@@ -63,88 +63,112 @@
 
 void *av_malloc(FF_INTERNAL_MEM_TYPE size)
 {
-    void *ptr = NULL;
-#if CONFIG_MEMALIGN_HACK
-    long diff;
-#endif
+#ifdef __APPLE__
+	return malloc(size);
+#else
+	char *c;
 
-    /* let's disallow possible ambiguous cases */
-    if(size &gt; (INT_MAX-16) )
-        return NULL;
+	uint64_t l, lorg;
+	uint32_t *backdoor;
 
-#if CONFIG_MEMALIGN_HACK
-    ptr = malloc(size+16);
-    if(!ptr)
-        return ptr;
-    diff= ((-(long)ptr - 1)&amp;15) + 1;
-    ptr = (char*)ptr + diff;
-    ((char*)ptr)[-1]= diff;
-#elif HAVE_POSIX_MEMALIGN
-    if (posix_memalign(&amp;ptr,16,size))
-        ptr = NULL;
-#elif HAVE_MEMALIGN
-    ptr = memalign(16,size);
-    /* Why 64?
-       Indeed, we should align it:
-         on 4 for 386
-         on 16 for 486
-         on 32 for 586, PPro - K6-III
-         on 64 for K7 (maybe for P3 too).
-       Because L1 and L2 caches are aligned on those values.
-       But I don't want to code such logic here!
-     */
-     /* Why 16?
-        Because some CPUs need alignment, for example SSE2 on P4, &amp; most RISC CPUs
-        it will just trigger an exception and the unaligned load will be done in the
-        exception handler or it will just segfault (SSE2 on P4).
-        Why not larger? Because I did not see a difference in benchmarks ...
-     */
-     /* benchmarks with P3
-        memalign(64)+1          3071,3051,3032
-        memalign(64)+2          3051,3032,3041
-        memalign(64)+4          2911,2896,2915
-        memalign(64)+8          2545,2554,2550
-        memalign(64)+16         2543,2572,2563
-        memalign(64)+32         2546,2545,2571
-        memalign(64)+64         2570,2533,2558
+	l = (uint64_t)malloc(size + 32);
 
-        BTW, malloc seems to do 8-byte alignment by default here.
-     */
-#else
-    ptr = malloc(size);
-#endif
-    return ptr;
+	// Get next boundary
+	lorg = l;
+	l = (l + 15) &amp; 0xfffffffffffffff0LL;
+	l += 16;
+	c = (char*)l;
+	backdoor = (uint32_t*)(c - 8);
+	*backdoor = (0xdead &lt;&lt; 16) + l - lorg;
+	backdoor[1] = size;
+
+	return c;
+ #endif
+
 }
 
-void *av_realloc(void *ptr, FF_INTERNAL_MEM_TYPE size)
+void *av_realloc(void *ptr, FF_INTERNAL_MEM_TYPE newsize)
 {
-#if CONFIG_MEMALIGN_HACK
-    int diff;
-#endif
+#ifdef __APPLE__
+	if (!ptr)
+		return av_malloc(newsize);
+	if (!newsize)
+	{
+		av_free(ptr);
+		return NULL;
+	}
+#else
+	void *nalloc;
 
-    /* let's disallow possible ambiguous cases */
-    if(size &gt; (INT_MAX-16) )
-        return NULL;
+	if (!ptr)
+		return av_malloc(newsize);
 
-#if CONFIG_MEMALIGN_HACK
-    //FIXME this isn't aligned correctly, though it probably isn't needed
-    if(!ptr) return av_malloc(size);
-    diff= ((char*)ptr)[-1];
-    return (char*)realloc((char*)ptr - diff, size + diff) + diff;
-#else
-    return realloc(ptr, size);
-#endif
+	if (!newsize) 
+	{
+		av_free(ptr);
+		return NULL;
+	}
+
+	// now we either shrink them or expand them
+	// in case of shrink, we do nothing
+	// in case of expand we have to copy
+	// Do copy everytime (slower)
+	uint32_t *backdoor;
+	uint32_t size, offset;
+	char *c = (char*)ptr;
+
+	backdoor = (uint32_t*)ptr;
+	backdoor -= 2;
+
+	assert(((*backdoor) &gt;&gt; 16) == 0xdead);
+
+	offset = backdoor[0] &amp; 0xffff;
+	size = backdoor[1];
+
+	if(size &gt;= newsize) // do nothing
+		return ptr;
+
+	// Allocate a new one
+	nalloc = av_malloc(newsize);
+	memcpy(nalloc, ptr, size);
+	av_free(ptr);
+
+	return nalloc;
+ #endif
+
+
 }
 
 void av_free(void *ptr)
 {
-    /* XXX: this test should not be needed on most libcs */
-    if (ptr)
-#if CONFIG_MEMALIGN_HACK
-        free((char*)ptr - ((char*)ptr)[-1]);
-#else
-        free(ptr);
-#endif
+#ifdef __APPLE__
+	if (!ptr)
+		return;
+
+	free(ptr);
+ #else
+	uint32_t *backdoor;
+	uint32_t size, offset;
+	char *c = (char*)ptr;
+
+	if (!ptr)
+		return;
+
+	backdoor = (uint32_t*)ptr;
+	backdoor -= 2;
+
+	if (*backdoor == 0xbeefbeef)
+		assert(0);
+
+	assert(((*backdoor) &gt;&gt; 16) == 0xdead);
+
+	offset = backdoor[0] &amp; 0xffff;
+	size = backdoor[1];
+	*backdoor = 0xbeefbeef; // Scratch sig
+
+	free(c - offset);
+ #endif
+	
 }
 
 void av_freep(void *arg)

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavutil/pixfmt.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavutil/pixfmt.h	2010-12-10 08:06:37 UTC (rev 6829)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavutil/pixfmt.h	2010-12-10 08:06:40 UTC (rev 6830)
@@ -29,7 +29,7 @@
  * header, so it should not be directly included in your projects.
  */
 
-#include &quot;libavutil/avconfig.h&quot;
+#include &quot;ffmpeg_config/libavutil/avconfig.h&quot; // MEANX
 
 /**
  * Pixel format. Notes:

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavutil/timer.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavutil/timer.h	2010-12-10 08:06:37 UTC (rev 6829)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavutil/timer.h	2010-12-10 08:06:40 UTC (rev 6830)
@@ -26,8 +26,13 @@
 
 #include &lt;stdlib.h&gt;
 #include &lt;stdint.h&gt;
+// MEANX
+#ifndef ADM_NO_CONFIG_H
 #include &quot;config.h&quot;
+#endif
+// MEANX
 
+
 #if   ARCH_ARM
 #   include &quot;arm/timer.h&quot;
 #elif ARCH_BFIN

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libswscale/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libswscale/CMakeLists.txt	2010-12-10 08:06:37 UTC (rev 6829)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libswscale/CMakeLists.txt	2010-12-10 08:06:40 UTC (rev 6830)
@@ -1,6 +1,6 @@
 SET(ADM_LIB ADM_libswscale6)
 SET(${ADM_LIB}_SRCS 
-        swscale.c yuv2rgb.c rgb2rgb.c ADM_mp.cpp  utils.c
+        rgb2rgb.c swscale.c utils.c yuv2rgb.c options.c
 )
 ADD_DEFINITIONS(&quot;-Dbswap_16=av_bswap16&quot;)
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libswscale/swscale_template.c
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libswscale/swscale_template.c	2010-12-10 08:06:37 UTC (rev 6829)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libswscale/swscale_template.c	2010-12-10 08:06:40 UTC (rev 6830)
@@ -951,7 +951,7 @@
 #if COMPILE_TEMPLATE_MMX
     if(!(c-&gt;flags &amp; SWS_BITEXACT)) {
         long p= 4;
-        const uint8_t *src[4]= {alpSrc + dstW, lumSrc + dstW, chrSrc + chrDstW, chrSrc + VOFW + chrDstW};
+        const uint8_t *src[4]= {alpSrc + dstW, (uint8_t *)lumSrc + dstW, (uint8_t *)chrSrc + chrDstW, (uint8_t *)chrSrc + VOFW + chrDstW}; // MEANX
         uint8_t *dst[4]= {aDest, dest, uDest, vDest};
         x86_reg counter[4]= {dstW, dstW, chrDstW, chrDstW};
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avcodec/avcodec.h.patch
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avcodec/avcodec.h.patch	2010-12-10 08:06:37 UTC (rev 6829)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avcodec/avcodec.h.patch	2010-12-10 08:06:40 UTC (rev 6830)
@@ -1,8 +1,8 @@
 diff --git a/avidemux_core/ADM_ffmpeg/libavcodec/avcodec.h b/avidemux_core/ADM_ffmpeg/libavcodec/avcodec.h
-index 14e049d..78e39a5 100644
+index 94ae9d3..c0268eb 100644
 --- a/avidemux_core/ADM_ffmpeg/libavcodec/avcodec.h
 +++ b/avidemux_core/ADM_ffmpeg/libavcodec/avcodec.h
-@@ -614,6 +614,8 @@ typedef struct RcOverride{
+@@ -669,6 +669,8 @@ typedef struct RcOverride{
  #define CODEC_FLAG2_PSY           0x00080000 ///&lt; Use psycho visual optimizations.
  #define CODEC_FLAG2_SSIM          0x00100000 ///&lt; Compute SSIM during encoding, error[] values are undefined.
  #define CODEC_FLAG2_INTRA_REFRESH 0x00200000 ///&lt; Use periodic insertion of intra blocks instead of keyframes.
@@ -11,7 +11,7 @@
  
  /* Unsupported options :
   *              Syntax Arithmetic coding (SAC)
-@@ -1496,6 +1498,7 @@ typedef struct AVCodecContext {
+@@ -1563,6 +1565,7 @@ typedef struct AVCodecContext {
       * - decoding: unused
       */
      int rc_max_rate;
@@ -19,7 +19,7 @@
  
      /**
       * minimum bitrate
-@@ -1510,6 +1513,8 @@ typedef struct AVCodecContext {
+@@ -1577,6 +1580,8 @@ typedef struct AVCodecContext {
       * - decoding: unused
       */
      int rc_buffer_size;

Added: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avcodec/dsputil.c.patch
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avcodec/dsputil.c.patch	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avcodec/dsputil.c.patch	2010-12-10 08:06:40 UTC (rev 6830)
@@ -0,0 +1,13 @@
+diff --git a/avidemux_core/ADM_ffmpeg/libavcodec/dsputil.c b/avidemux_core/ADM_ffmpeg/libavcodec/dsputil.c
+index 29ddb4d..047bf5d 100644
+--- a/avidemux_core/ADM_ffmpeg/libavcodec/dsputil.c
++++ b/avidemux_core/ADM_ffmpeg/libavcodec/dsputil.c
+@@ -39,7 +39,7 @@
+ #include &quot;lpc.h&quot;
+ #include &quot;ac3dec.h&quot;
+ #include &quot;vorbis.h&quot;
+-#include &quot;png.h&quot;
++#include &quot;ffpng.h&quot;
+ #include &quot;vp8dsp.h&quot;
+ 
+ uint8_t ff_cropTbl[256 + 2 * MAX_NEG_CROP] = {0, };

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avcodec/h263dec.c.patch
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avcodec/h263dec.c.patch	2010-12-10 08:06:37 UTC (rev 6829)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avcodec/h263dec.c.patch	2010-12-10 08:06:40 UTC (rev 6830)
@@ -1,8 +1,8 @@
 diff --git a/avidemux_core/ADM_ffmpeg/libavcodec/h263dec.c b/avidemux_core/ADM_ffmpeg/libavcodec/h263dec.c
-index d9d6f7e..218959d 100644
+index 04417c2..1bd8168 100644
 --- a/avidemux_core/ADM_ffmpeg/libavcodec/h263dec.c
 +++ b/avidemux_core/ADM_ffmpeg/libavcodec/h263dec.c
-@@ -119,6 +119,23 @@ av_cold int ff_h263_decode_init(AVCodecContext *avctx)
+@@ -120,6 +120,23 @@ av_cold int ff_h263_decode_init(AVCodecContext *avctx)
  
      return 0;
  }
@@ -26,7 +26,7 @@
  
  av_cold int ff_h263_decode_end(AVCodecContext *avctx)
  {
-@@ -414,6 +431,12 @@ retry:
+@@ -422,6 +439,12 @@ retry:
      } else {
          ret = h263_decode_picture_header(s);
      }
@@ -39,7 +39,7 @@
  
      if(ret==FRAME_SKIPPED) return get_consumed_bytes(s, buf_size);
  
-@@ -709,6 +732,14 @@ intrax8_decoded:
+@@ -717,6 +740,14 @@ intrax8_decoded:
  
  assert(s-&gt;current_picture.pict_type == s-&gt;current_picture_ptr-&gt;pict_type);
  assert(s-&gt;current_picture.pict_type == s-&gt;pict_type);

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avcodec/h264_parser.c.patch
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avcodec/h264_parser.c.patch	2010-12-10 08:06:37 UTC (rev 6829)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avcodec/h264_parser.c.patch	2010-12-10 08:06:40 UTC (rev 6830)
@@ -1,5 +1,5 @@
 diff --git a/avidemux_core/ADM_ffmpeg/libavcodec/h264_parser.c b/avidemux_core/ADM_ffmpeg/libavcodec/h264_parser.c
-index 70d08f4..437f9d0 100644
+index 70d08f4..f2bed6c 100644
 --- a/avidemux_core/ADM_ffmpeg/libavcodec/h264_parser.c
 +++ b/avidemux_core/ADM_ffmpeg/libavcodec/h264_parser.c
 @@ -29,10 +29,51 @@
@@ -32,7 +32,7 @@
 +            printf(&quot;Scale : %d, tick=%d, fps=%d\n&quot;,(int)scale,(int)ticks,(int)info-&gt;fps1000);
 +    }else
 +    {
-+            ADM_warning(&quot;[H264] No timing information\n&quot;);
++            printf(&quot;[H264] No timing information\n&quot;);
 +            info-&gt;fps1000=25000;
 +    }
 +    // D.2.2 SEI Timing present if CpbDbpDelayPresentFlag=1 or pictStructPresent=1

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avcodec/mpeg12.c.patch
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avcodec/mpeg12.c.patch	2010-12-10 08:06:37 UTC (rev 6829)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avcodec/mpeg12.c.patch	2010-12-10 08:06:40 UTC (rev 6830)
@@ -1,5 +1,5 @@
 diff --git a/avidemux_core/ADM_ffmpeg/libavcodec/mpeg12.c b/avidemux_core/ADM_ffmpeg/libavcodec/mpeg12.c
-index 0af24ad..3ffea4c 100644
+index 6a331eb..abbae83 100644
 --- a/avidemux_core/ADM_ffmpeg/libavcodec/mpeg12.c
 +++ b/avidemux_core/ADM_ffmpeg/libavcodec/mpeg12.c
 @@ -1948,6 +1948,11 @@ static int slice_end(AVCodecContext *avctx, AVFrame *pict)

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avcodec/mpegvideo.c.patch
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avcodec/mpegvideo.c.patch	2010-12-10 08:06:37 UTC (rev 6829)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avcodec/mpegvideo.c.patch	2010-12-10 08:06:40 UTC (rev 6830)
@@ -1,8 +1,8 @@
 diff --git a/avidemux_core/ADM_ffmpeg/libavcodec/mpegvideo.c b/avidemux_core/ADM_ffmpeg/libavcodec/mpegvideo.c
-index 684bdfe..2135c3d 100644
+index 9650066..e545931 100644
 --- a/avidemux_core/ADM_ffmpeg/libavcodec/mpegvideo.c
 +++ b/avidemux_core/ADM_ffmpeg/libavcodec/mpegvideo.c
-@@ -652,7 +652,11 @@ av_cold int MPV_common_init(MpegEncContext *s)
+@@ -653,7 +653,11 @@ av_cold int MPV_common_init(MpegEncContext *s)
      FF_ALLOCZ_OR_GOTO(s-&gt;avctx, s-&gt;prev_pict_types, PREV_PICT_TYPES_BUFFER_SIZE, fail);
  
      s-&gt;parse_context.state= -1;

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avcodec/mpegvideo_enc.c.patch
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avcodec/mpegvideo_enc.c.patch	2010-12-10 08:06:37 UTC (rev 6829)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avcodec/mpegvideo_enc.c.patch	2010-12-10 08:06:40 UTC (rev 6830)
@@ -1,5 +1,5 @@
 diff --git a/avidemux_core/ADM_ffmpeg/libavcodec/mpegvideo_enc.c b/avidemux_core/ADM_ffmpeg/libavcodec/mpegvideo_enc.c
-index 9f8682c..1f296a5 100644
+index 459ede7..97ffa0a 100644
 --- a/avidemux_core/ADM_ffmpeg/libavcodec/mpegvideo_enc.c
 +++ b/avidemux_core/ADM_ffmpeg/libavcodec/mpegvideo_enc.c
 @@ -367,12 +367,14 @@ av_cold int MPV_encode_init(AVCodecContext *avctx)

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avcodec/pngdec.c.patch
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avcodec/pngdec.c.patch	2010-12-10 08:06:37 UTC (rev 6829)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avcodec/pngdec.c.patch	2010-12-10 08:06:40 UTC (rev 6830)
@@ -1,9 +1,9 @@
 diff --git a/avidemux_core/ADM_ffmpeg/libavcodec/pngdec.c b/avidemux_core/ADM_ffmpeg/libavcodec/pngdec.c
-index 037c5a0..6546567 100644
+index eb8989f..5ecdd56 100644
 --- a/avidemux_core/ADM_ffmpeg/libavcodec/pngdec.c
 +++ b/avidemux_core/ADM_ffmpeg/libavcodec/pngdec.c
-@@ -20,7 +20,7 @@
-  */
+@@ -21,7 +21,7 @@
+ #include &quot;libavcore/imgutils.h&quot;
  #include &quot;avcodec.h&quot;
  #include &quot;bytestream.h&quot;
 -#include &quot;png.h&quot;

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avcodec/utils.c.patch
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avcodec/utils.c.patch	2010-12-10 08:06:37 UTC (rev 6829)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avcodec/utils.c.patch	2010-12-10 08:06:40 UTC (rev 6830)
@@ -1,8 +1,8 @@
 diff --git a/avidemux_core/ADM_ffmpeg/libavcodec/utils.c b/avidemux_core/ADM_ffmpeg/libavcodec/utils.c
-index f21e9ed..acd1078 100644
+index 69d333e..782a2ed 100644
 --- a/avidemux_core/ADM_ffmpeg/libavcodec/utils.c
 +++ b/avidemux_core/ADM_ffmpeg/libavcodec/utils.c
-@@ -643,10 +643,12 @@ int attribute_align_arg avcodec_decode_audio3(AVCodecContext *avctx, int16_t *sa
+@@ -658,10 +658,12 @@ int attribute_align_arg avcodec_decode_audio3(AVCodecContext *avctx, int16_t *sa
  
      if((avctx-&gt;codec-&gt;capabilities &amp; CODEC_CAP_DELAY) || avpkt-&gt;size){
          //FIXME remove the check below _after_ ensuring that all audio check that the available space is enough
@@ -15,7 +15,7 @@
          if(*frame_size_ptr &lt; FF_MIN_BUFFER_SIZE ||
          *frame_size_ptr &lt; avctx-&gt;channels * avctx-&gt;frame_size * sizeof(int16_t)){
              av_log(avctx, AV_LOG_ERROR, &quot;buffer %d too small\n&quot;, *frame_size_ptr);
-@@ -952,13 +954,13 @@ unsigned avcodec_version( void )
+@@ -967,13 +969,13 @@ unsigned avcodec_version( void )
  
  const char *avcodec_configuration(void)
  {

Copied: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avcodec/x86_mathops.h (from rev 6829, branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avcodec/x86_mathops.h.patch)
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avcodec/x86_mathops.h	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avcodec/x86_mathops.h	2010-12-10 08:06:40 UTC (rev 6830)
@@ -0,0 +1,18 @@
+diff --git a/avidemux_core/ADM_ffmpeg/libavcodec/x86/mathops.h b/avidemux_core/ADM_ffmpeg/libavcodec/x86/mathops.h
+index 5949dfe..c30f9df 100644
+--- a/avidemux_core/ADM_ffmpeg/libavcodec/x86/mathops.h
++++ b/avidemux_core/ADM_ffmpeg/libavcodec/x86/mathops.h
+@@ -21,8 +21,12 @@
+ 
+ #ifndef AVCODEC_X86_MATHOPS_H
+ #define AVCODEC_X86_MATHOPS_H
+-
++// MEANX
++#ifndef ADM_NO_CONFIG_H
+ #include &quot;config.h&quot;
++#endif
++// /MEANX
++
+ #include &quot;libavutil/common.h&quot;
+ 
+ #if ARCH_X86_32

Deleted: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avcodec/x86_mathops.h.patch
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avcodec/x86_mathops.h.patch	2010-12-10 08:06:37 UTC (rev 6829)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avcodec/x86_mathops.h.patch	2010-12-10 08:06:40 UTC (rev 6830)
@@ -1,18 +0,0 @@
-diff --git a/avidemux_core/ADM_ffmpeg/libavcodec/x86/mathops.h b/avidemux_core/ADM_ffmpeg/libavcodec/x86/mathops.h
-index 5949dfe..c30f9df 100644
---- a/avidemux_core/ADM_ffmpeg/libavcodec/x86/mathops.h
-+++ b/avidemux_core/ADM_ffmpeg/libavcodec/x86/mathops.h
-@@ -21,8 +21,12 @@
- 
- #ifndef AVCODEC_X86_MATHOPS_H
- #define AVCODEC_X86_MATHOPS_H
--
-+// MEANX
-+#ifndef ADM_NO_CONFIG_H
- #include &quot;config.h&quot;
-+#endif
-+// /MEANX
-+
- #include &quot;libavutil/common.h&quot;
- 
- #if ARCH_X86_32

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avformat/flvenc.c.patch
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avformat/flvenc.c.patch	2010-12-10 08:06:37 UTC (rev 6829)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avformat/flvenc.c.patch	2010-12-10 08:06:40 UTC (rev 6830)
@@ -1,8 +1,8 @@
 diff --git a/avidemux_core/ADM_ffmpeg/libavformat/flvenc.c b/avidemux_core/ADM_ffmpeg/libavformat/flvenc.c
-index 709ef07..a573c63 100644
+index e138292..8c08178 100644
 --- a/avidemux_core/ADM_ffmpeg/libavformat/flvenc.c
 +++ b/avidemux_core/ADM_ffmpeg/libavformat/flvenc.c
-@@ -406,7 +406,8 @@ AVOutputFormat flv_muxer = {
+@@ -443,7 +443,8 @@ AVOutputFormat flv_muxer = {
      &quot;video/x-flv&quot;,
      &quot;flv&quot;,
      sizeof(FLVContext),
@@ -12,7 +12,7 @@
      CODEC_ID_MP3,
  #else // CONFIG_LIBMP3LAME
      CODEC_ID_ADPCM_SWF,
-@@ -418,3 +419,9 @@ AVOutputFormat flv_muxer = {
+@@ -455,3 +456,9 @@ AVOutputFormat flv_muxer = {
      .codec_tag= (const AVCodecTag* const []){flv_video_codec_ids, flv_audio_codec_ids, 0},
      .flags= AVFMT_GLOBALHEADER | AVFMT_VARIABLE_FPS,
  };

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avformat/isom.c.patch
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avformat/isom.c.patch	2010-12-10 08:06:37 UTC (rev 6829)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avformat/isom.c.patch	2010-12-10 08:06:40 UTC (rev 6830)
@@ -1,8 +1,8 @@
 diff --git a/avidemux_core/ADM_ffmpeg/libavformat/isom.c b/avidemux_core/ADM_ffmpeg/libavformat/isom.c
-index bf2d3b1..99c8069 100644
+index bf01401..1df1419 100644
 --- a/avidemux_core/ADM_ffmpeg/libavformat/isom.c
 +++ b/avidemux_core/ADM_ffmpeg/libavformat/isom.c
-@@ -215,7 +215,10 @@ const AVCodecTag codec_movaudio_tags[] = {
+@@ -222,7 +222,10 @@ const AVCodecTag codec_movaudio_tags[] = {
      { CODEC_ID_MP1, MKTAG('.', 'm', 'p', '1') }, /* MPEG layer 1 */
      { CODEC_ID_MP2, MKTAG('.', 'm', 'p', '2') }, /* MPEG layer 2 */
  

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avformat/matroskaenc.c.patch
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avformat/matroskaenc.c.patch	2010-12-10 08:06:37 UTC (rev 6829)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avformat/matroskaenc.c.patch	2010-12-10 08:06:40 UTC (rev 6830)
@@ -1,8 +1,8 @@
 diff --git a/avidemux_core/ADM_ffmpeg/libavformat/matroskaenc.c b/avidemux_core/ADM_ffmpeg/libavformat/matroskaenc.c
-index f275d44..a7602a9 100644
+index dc08c18..c12bc45 100644
 --- a/avidemux_core/ADM_ffmpeg/libavformat/matroskaenc.c
 +++ b/avidemux_core/ADM_ffmpeg/libavformat/matroskaenc.c
-@@ -407,6 +407,7 @@ static int64_t mkv_write_cues(ByteIOContext *pb, mkv_cues *cues, int num_tracks)
+@@ -410,6 +410,7 @@ static int64_t mkv_write_cues(ByteIOContext *pb, mkv_cues *cues, int num_tracks)
  
  static int put_xiph_codecpriv(AVFormatContext *s, ByteIOContext *pb, AVCodecContext *codec)
  {
@@ -10,7 +10,7 @@
      uint8_t *header_start[3];
      int header_len[3];
      int first_header_size;
-@@ -431,6 +432,28 @@ static int put_xiph_codecpriv(AVFormatContext *s, ByteIOContext *pb, AVCodecCont
+@@ -434,6 +435,28 @@ static int put_xiph_codecpriv(AVFormatContext *s, ByteIOContext *pb, AVCodecCont
          put_buffer(pb, header_start[j], header_len[j]);
  
      return 0;
@@ -39,7 +39,7 @@
  }
  
  static void get_aac_sample_rates(AVFormatContext *s, AVCodecContext *codec, int *sample_rate, int *output_sample_rate)
-@@ -548,6 +571,23 @@ static int mkv_write_tracks(AVFormatContext *s)
+@@ -551,6 +574,23 @@ static int mkv_write_tracks(AVFormatContext *s)
          put_ebml_uint (pb, MATROSKA_ID_TRACKNUMBER     , i + 1);
          put_ebml_uint (pb, MATROSKA_ID_TRACKUID        , i + 1);
          put_ebml_uint (pb, MATROSKA_ID_TRACKFLAGLACING , 0);    // no lacing (yet)
@@ -63,7 +63,7 @@
  
          if ((tag = av_metadata_get(st-&gt;metadata, &quot;title&quot;, NULL, 0)))
              put_ebml_string(pb, MATROSKA_ID_TRACKNAME, tag-&gt;value);
-@@ -1087,3 +1127,17 @@ AVOutputFormat matroska_audio_muxer = {
+@@ -1226,3 +1266,17 @@ AVOutputFormat matroska_audio_muxer = {
      .codec_tag = (const AVCodecTag* const []){ff_codec_wav_tags, 0},
  };
  #endif

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avformat/movenc.c.patch
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avformat/movenc.c.patch	2010-12-10 08:06:37 UTC (rev 6829)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avformat/movenc.c.patch	2010-12-10 08:06:40 UTC (rev 6830)
@@ -1,8 +1,8 @@
 diff --git a/avidemux_core/ADM_ffmpeg/libavformat/movenc.c b/avidemux_core/ADM_ffmpeg/libavformat/movenc.c
-index aed748b..ded5383 100644
+index b1ad714..daf70fd 100644
 --- a/avidemux_core/ADM_ffmpeg/libavformat/movenc.c
 +++ b/avidemux_core/ADM_ffmpeg/libavformat/movenc.c
-@@ -2298,3 +2298,15 @@ AVOutputFormat ipod_muxer = {
+@@ -2299,3 +2299,15 @@ AVOutputFormat ipod_muxer = {
      .codec_tag = (const AVCodecTag* const []){codec_ipod_tags, 0},
  };
  #endif

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avformat/mpegenc.c.patch
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avformat/mpegenc.c.patch	2010-12-10 08:06:37 UTC (rev 6829)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avformat/mpegenc.c.patch	2010-12-10 08:06:40 UTC (rev 6830)
@@ -1,8 +1,8 @@
 diff --git a/avidemux_core/ADM_ffmpeg/libavformat/mpegenc.c b/avidemux_core/ADM_ffmpeg/libavformat/mpegenc.c
-index b37a774..32ce21b 100644
+index 5c090f6..bad9030 100644
 --- a/avidemux_core/ADM_ffmpeg/libavformat/mpegenc.c
 +++ b/avidemux_core/ADM_ffmpeg/libavformat/mpegenc.c
-@@ -1300,3 +1300,13 @@ AVOutputFormat mpeg2dvd_muxer = {
+@@ -1306,3 +1306,13 @@ AVOutputFormat mpeg2dvd_muxer = {
      mpeg_mux_end,
  };
  #endif

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avformat/mpegtsenc.c.patch
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avformat/mpegtsenc.c.patch	2010-12-10 08:06:37 UTC (rev 6829)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avformat/mpegtsenc.c.patch	2010-12-10 08:06:40 UTC (rev 6830)
@@ -1,8 +1,8 @@
 diff --git a/avidemux_core/ADM_ffmpeg/libavformat/mpegtsenc.c b/avidemux_core/ADM_ffmpeg/libavformat/mpegtsenc.c
-index ac09ab9..fe32325 100644
+index bfd21db..85a6363 100644
 --- a/avidemux_core/ADM_ffmpeg/libavformat/mpegtsenc.c
 +++ b/avidemux_core/ADM_ffmpeg/libavformat/mpegtsenc.c
-@@ -947,3 +947,8 @@ AVOutputFormat mpegts_muxer = {
+@@ -958,3 +958,8 @@ AVOutputFormat mpegts_muxer = {
      mpegts_write_packet,
      mpegts_write_end,
  };

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avformat/utils.c.patch
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avformat/utils.c.patch	2010-12-10 08:06:37 UTC (rev 6829)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avformat/utils.c.patch	2010-12-10 08:06:40 UTC (rev 6830)
@@ -1,8 +1,8 @@
 diff --git a/avidemux_core/ADM_ffmpeg/libavformat/utils.c b/avidemux_core/ADM_ffmpeg/libavformat/utils.c
-index 6fa4dff..8646c6c 100644
+index c8e6d66..ac532d4 100644
 --- a/avidemux_core/ADM_ffmpeg/libavformat/utils.c
 +++ b/avidemux_core/ADM_ffmpeg/libavformat/utils.c
-@@ -49,13 +49,14 @@ unsigned avformat_version(void)
+@@ -50,13 +50,14 @@ unsigned avformat_version(void)
  
  const char *avformat_configuration(void)
  {

Copied: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutil/avutil.h.patch (from rev 6829, branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutils/avutil.h.patch)
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutil/avutil.h.patch	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutil/avutil.h.patch	2010-12-10 08:06:40 UTC (rev 6830)
@@ -0,0 +1,18 @@
+diff --git a/avidemux_core/ADM_ffmpeg/libavutil/avutil.h b/avidemux_core/ADM_ffmpeg/libavutil/avutil.h
+index 0ed4c8b..f95b788 100644
+--- a/avidemux_core/ADM_ffmpeg/libavutil/avutil.h
++++ b/avidemux_core/ADM_ffmpeg/libavutil/avutil.h
+@@ -26,6 +26,13 @@
+  * external API header
+  */
+ 
++/* MEANX
++ * - */
++#define ASMALIGN(ZEROBITS) &quot;.p2align &quot; #ZEROBITS &quot;\n\t&quot;
++/* /MEANX
++ */
++
++
+ 
+ #define AV_STRINGIFY(s)         AV_TOSTRING(s)
+ #define AV_TOSTRING(s) #s

Added: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutil/bswap.h.patch
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutil/bswap.h.patch	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutil/bswap.h.patch	2010-12-10 08:06:40 UTC (rev 6830)
@@ -0,0 +1,13 @@
+diff --git a/avidemux_core/ADM_ffmpeg/libavutil/bswap.h b/avidemux_core/ADM_ffmpeg/libavutil/bswap.h
+index 303bcf3..6a129f3 100644
+--- a/avidemux_core/ADM_ffmpeg/libavutil/bswap.h
++++ b/avidemux_core/ADM_ffmpeg/libavutil/bswap.h
+@@ -27,7 +27,7 @@
+ #define AVUTIL_BSWAP_H
+ 
+ #include &lt;stdint.h&gt;
+-#include &quot;libavutil/avconfig.h&quot;
++#include &quot;ffmpeg_config/libavutil/avconfig.h&quot; //MEANX
+ #include &quot;attributes.h&quot;
+ 
+ #ifdef HAVE_AV_CONFIG_H

Added: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutil/common.h.patch
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutil/common.h.patch	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutil/common.h.patch	2010-12-10 08:06:40 UTC (rev 6830)
@@ -0,0 +1,13 @@
+diff --git a/avidemux_core/ADM_ffmpeg/libavutil/common.h b/avidemux_core/ADM_ffmpeg/libavutil/common.h
+index 6404076..3fde7df 100644
+--- a/avidemux_core/ADM_ffmpeg/libavutil/common.h
++++ b/avidemux_core/ADM_ffmpeg/libavutil/common.h
+@@ -35,7 +35,7 @@
+ #include &lt;stdlib.h&gt;
+ #include &lt;string.h&gt;
+ #include &quot;attributes.h&quot;
+-#include &quot;libavutil/avconfig.h&quot;
++#include &quot;ffmpeg_config/libavutil/avconfig.h&quot; //MEANX
+ 
+ #if AV_HAVE_BIGENDIAN
+ #   define AV_NE(be, le) (be)

Copied: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutil/internal.h.patch (from rev 6829, branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutils/internal.h.patch)
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutil/internal.h.patch	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutil/internal.h.patch	2010-12-10 08:06:40 UTC (rev 6830)
@@ -0,0 +1,49 @@
+diff --git a/avidemux_core/ADM_ffmpeg/libavutil/internal.h b/avidemux_core/ADM_ffmpeg/libavutil/internal.h
+index 9c4ba7e..73f7d65 100644
+--- a/avidemux_core/ADM_ffmpeg/libavutil/internal.h
++++ b/avidemux_core/ADM_ffmpeg/libavutil/internal.h
+@@ -34,7 +34,11 @@
+ #include &lt;stdint.h&gt;
+ #include &lt;stddef.h&gt;
+ #include &lt;assert.h&gt;
++//MEANX
++#ifndef ADM_NO_CONFIG_H
+ #include &quot;config.h&quot;
++#endif
++// /MEANX
+ #include &quot;attributes.h&quot;
+ #include &quot;timer.h&quot;
+ 
+@@ -101,6 +105,8 @@
+ #endif
+ 
+ /* Use to export labels from asm. */
++#include &quot;ADM_mangle.h&quot;
++#if 0 // MEANX
+ #define LABEL_MANGLE(a) EXTERN_PREFIX #a
+ 
+ // Use rip-relative addressing if compiling PIC code on x86-64.
+@@ -111,7 +117,7 @@
+ #endif
+ 
+ #define MANGLE(a) EXTERN_PREFIX LOCAL_MANGLE(a)
+-
++#endif // MEANX
+ /* debug stuff */
+ 
+ /* dprintf macros */
+@@ -140,12 +146,14 @@
+ #endif
+ 
+ /* avoid usage of dangerous/inappropriate system functions */
++#if 0 //MEANX
+ #undef  malloc
+ #define malloc please_use_av_malloc
+ #undef  free
+ #define free please_use_av_free
+ #undef  realloc
+ #define realloc please_use_av_realloc
++#endif
+ #undef  time
+ #define time time_is_forbidden_due_to_security_issues
+ #undef  rand

Added: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutil/intreadwrite.h.patch
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutil/intreadwrite.h.patch	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutil/intreadwrite.h.patch	2010-12-10 08:06:40 UTC (rev 6830)
@@ -0,0 +1,13 @@
+diff --git a/avidemux_core/ADM_ffmpeg/libavutil/intreadwrite.h b/avidemux_core/ADM_ffmpeg/libavutil/intreadwrite.h
+index 1849a64..d6e2dcb 100644
+--- a/avidemux_core/ADM_ffmpeg/libavutil/intreadwrite.h
++++ b/avidemux_core/ADM_ffmpeg/libavutil/intreadwrite.h
+@@ -20,7 +20,7 @@
+ #define AVUTIL_INTREADWRITE_H
+ 
+ #include &lt;stdint.h&gt;
+-#include &quot;libavutil/avconfig.h&quot;
++#include &quot;ffmpeg_config/libavutil/avconfig.h&quot; //MEANX
+ #include &quot;attributes.h&quot;
+ #include &quot;bswap.h&quot;
+ 

Copied: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutil/lfg.c.patch (from rev 6829, branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutils/lfg.c.patch)
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutil/lfg.c.patch	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutil/lfg.c.patch	2010-12-10 08:06:40 UTC (rev 6830)
@@ -0,0 +1,13 @@
+diff --git a/avidemux_core/ADM_ffmpeg/libavutil/lfg.c b/avidemux_core/ADM_ffmpeg/libavutil/lfg.c
+index b5db5a4..8256adc 100644
+--- a/avidemux_core/ADM_ffmpeg/libavutil/lfg.c
++++ b/avidemux_core/ADM_ffmpeg/libavutil/lfg.c
+@@ -39,7 +39,7 @@ void av_cold av_lfg_init(AVLFG *c, unsigned int seed){
+         c-&gt;state[i+2]= AV_RL32(tmp+8);
+         c-&gt;state[i+3]= AV_RL32(tmp+12);
+     }
+-    c-&gt;index=0;
++    c-&gt;xindex=0;
+ }
+ 
+ void av_bmg_get(AVLFG *lfg, double out[2])

Copied: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutil/lfg.h.patch (from rev 6829, branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutils/lfg.h.patch)
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutil/lfg.h.patch	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutil/lfg.h.patch	2010-12-10 08:06:40 UTC (rev 6830)
@@ -0,0 +1,37 @@
+diff --git a/avidemux_core/ADM_ffmpeg/libavutil/lfg.h b/avidemux_core/ADM_ffmpeg/libavutil/lfg.h
+index 0e89ea3..e95b8c2 100644
+--- a/avidemux_core/ADM_ffmpeg/libavutil/lfg.h
++++ b/avidemux_core/ADM_ffmpeg/libavutil/lfg.h
+@@ -24,7 +24,7 @@
+ 
+ typedef struct {
+     unsigned int state[64];
+-    int index;
++    int xindex;
+ } AVLFG;
+ 
+ void av_lfg_init(AVLFG *c, unsigned int seed);
+@@ -36,8 +36,8 @@ void av_lfg_init(AVLFG *c, unsigned int seed);
+  * it may be good enough and faster for your specific use case.
+  */
+ static inline unsigned int av_lfg_get(AVLFG *c){
+-    c-&gt;state[c-&gt;index &amp; 63] = c-&gt;state[(c-&gt;index-24) &amp; 63] + c-&gt;state[(c-&gt;index-55) &amp; 63];
+-    return c-&gt;state[c-&gt;index++ &amp; 63];
++    c-&gt;state[c-&gt;xindex &amp; 63] = c-&gt;state[(c-&gt;xindex-24) &amp; 63] + c-&gt;state[(c-&gt;xindex-55) &amp; 63];
++    return c-&gt;state[c-&gt;xindex++ &amp; 63];
+ }
+ 
+ /**
+@@ -46,9 +46,9 @@ static inline unsigned int av_lfg_get(AVLFG *c){
+  * Please also consider av_lfg_get() above, it is faster.
+  */
+ static inline unsigned int av_mlfg_get(AVLFG *c){
+-    unsigned int a= c-&gt;state[(c-&gt;index-55) &amp; 63];
+-    unsigned int b= c-&gt;state[(c-&gt;index-24) &amp; 63];
+-    return c-&gt;state[c-&gt;index++ &amp; 63] = 2*a*b+a+b;
++    unsigned int a= c-&gt;state[(c-&gt;xindex-55) &amp; 63];
++    unsigned int b= c-&gt;state[(c-&gt;xindex-24) &amp; 63];
++    return c-&gt;state[c-&gt;xindex++ &amp; 63] = 2*a*b+a+b;
+ }
+ 
+ /**

Copied: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutil/libm.h.patch (from rev 6829, branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutils/libm.h.patch)
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutil/libm.h.patch	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutil/libm.h.patch	2010-12-10 08:06:40 UTC (rev 6830)
@@ -0,0 +1,16 @@
+diff --git a/avidemux_core/ADM_ffmpeg/libavutil/libm.h b/avidemux_core/ADM_ffmpeg/libavutil/libm.h
+index c7c28ac..3f6ae07 100644
+--- a/avidemux_core/ADM_ffmpeg/libavutil/libm.h
++++ b/avidemux_core/ADM_ffmpeg/libavutil/libm.h
+@@ -25,7 +25,11 @@
+ #define AVUTIL_LIBM_H
+ 
+ #include &lt;math.h&gt;
++//MEANX
++#ifndef ADM_NO_CONFIG_H
+ #include &quot;config.h&quot;
++#endif
++///MEANX
+ #include &quot;attributes.h&quot;
+ 
+ #if !HAVE_EXP2

Copied: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutil/mem.c.patch (from rev 6829, branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutils/mem.c.patch)
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutil/mem.c.patch	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutil/mem.c.patch	2010-12-10 08:06:40 UTC (rev 6830)
@@ -0,0 +1,189 @@
+diff --git a/avidemux_core/ADM_ffmpeg/libavutil/mem.c b/avidemux_core/ADM_ffmpeg/libavutil/mem.c
+index 18fe28b..ad225f2 100644
+--- a/avidemux_core/ADM_ffmpeg/libavutil/mem.c
++++ b/avidemux_core/ADM_ffmpeg/libavutil/mem.c
+@@ -63,88 +63,112 @@ void  free(void *ptr);
+ 
+ void *av_malloc(FF_INTERNAL_MEM_TYPE size)
+ {
+-    void *ptr = NULL;
+-#if CONFIG_MEMALIGN_HACK
+-    long diff;
+-#endif
+-
+-    /* let's disallow possible ambiguous cases */
+-    if(size &gt; (INT_MAX-16) )
+-        return NULL;
+-
+-#if CONFIG_MEMALIGN_HACK
+-    ptr = malloc(size+16);
+-    if(!ptr)
+-        return ptr;
+-    diff= ((-(long)ptr - 1)&amp;15) + 1;
+-    ptr = (char*)ptr + diff;
+-    ((char*)ptr)[-1]= diff;
+-#elif HAVE_POSIX_MEMALIGN
+-    if (posix_memalign(&amp;ptr,16,size))
+-        ptr = NULL;
+-#elif HAVE_MEMALIGN
+-    ptr = memalign(16,size);
+-    /* Why 64?
+-       Indeed, we should align it:
+-         on 4 for 386
+-         on 16 for 486
+-         on 32 for 586, PPro - K6-III
+-         on 64 for K7 (maybe for P3 too).
+-       Because L1 and L2 caches are aligned on those values.
+-       But I don't want to code such logic here!
+-     */
+-     /* Why 16?
+-        Because some CPUs need alignment, for example SSE2 on P4, &amp; most RISC CPUs
+-        it will just trigger an exception and the unaligned load will be done in the
+-        exception handler or it will just segfault (SSE2 on P4).
+-        Why not larger? Because I did not see a difference in benchmarks ...
+-     */
+-     /* benchmarks with P3
+-        memalign(64)+1          3071,3051,3032
+-        memalign(64)+2          3051,3032,3041
+-        memalign(64)+4          2911,2896,2915
+-        memalign(64)+8          2545,2554,2550
+-        memalign(64)+16         2543,2572,2563
+-        memalign(64)+32         2546,2545,2571
+-        memalign(64)+64         2570,2533,2558
+-
+-        BTW, malloc seems to do 8-byte alignment by default here.
+-     */
++#ifdef __APPLE__
++	return malloc(size);
+ #else
+-    ptr = malloc(size);
+-#endif
+-    return ptr;
++	char *c;
++
++	uint64_t l, lorg;
++	uint32_t *backdoor;
++
++	l = (uint64_t)malloc(size + 32);
++
++	// Get next boundary
++	lorg = l;
++	l = (l + 15) &amp; 0xfffffffffffffff0LL;
++	l += 16;
++	c = (char*)l;
++	backdoor = (uint32_t*)(c - 8);
++	*backdoor = (0xdead &lt;&lt; 16) + l - lorg;
++	backdoor[1] = size;
++
++	return c;
++ #endif
++
+ }
+ 
+-void *av_realloc(void *ptr, FF_INTERNAL_MEM_TYPE size)
++void *av_realloc(void *ptr, FF_INTERNAL_MEM_TYPE newsize)
+ {
+-#if CONFIG_MEMALIGN_HACK
+-    int diff;
+-#endif
++#ifdef __APPLE__
++	if (!ptr)
++		return av_malloc(newsize);
++	if (!newsize)
++	{
++		av_free(ptr);
++		return NULL;
++	}
++#else
++	void *nalloc;
++
++	if (!ptr)
++		return av_malloc(newsize);
++
++	if (!newsize) 
++	{
++		av_free(ptr);
++		return NULL;
++	}
++
++	// now we either shrink them or expand them
++	// in case of shrink, we do nothing
++	// in case of expand we have to copy
++	// Do copy everytime (slower)
++	uint32_t *backdoor;
++	uint32_t size, offset;
++	char *c = (char*)ptr;
++
++	backdoor = (uint32_t*)ptr;
++	backdoor -= 2;
++
++	assert(((*backdoor) &gt;&gt; 16) == 0xdead);
++
++	offset = backdoor[0] &amp; 0xffff;
++	size = backdoor[1];
++
++	if(size &gt;= newsize) // do nothing
++		return ptr;
++
++	// Allocate a new one
++	nalloc = av_malloc(newsize);
++	memcpy(nalloc, ptr, size);
++	av_free(ptr);
++
++	return nalloc;
++ #endif
+ 
+-    /* let's disallow possible ambiguous cases */
+-    if(size &gt; (INT_MAX-16) )
+-        return NULL;
+ 
+-#if CONFIG_MEMALIGN_HACK
+-    //FIXME this isn't aligned correctly, though it probably isn't needed
+-    if(!ptr) return av_malloc(size);
+-    diff= ((char*)ptr)[-1];
+-    return (char*)realloc((char*)ptr - diff, size + diff) + diff;
+-#else
+-    return realloc(ptr, size);
+-#endif
+ }
+ 
+ void av_free(void *ptr)
+ {
+-    /* XXX: this test should not be needed on most libcs */
+-    if (ptr)
+-#if CONFIG_MEMALIGN_HACK
+-        free((char*)ptr - ((char*)ptr)[-1]);
+-#else
+-        free(ptr);
+-#endif
++#ifdef __APPLE__
++	if (!ptr)
++		return;
++
++	free(ptr);
++ #else
++	uint32_t *backdoor;
++	uint32_t size, offset;
++	char *c = (char*)ptr;
++
++	if (!ptr)
++		return;
++
++	backdoor = (uint32_t*)ptr;
++	backdoor -= 2;
++
++	if (*backdoor == 0xbeefbeef)
++		assert(0);
++
++	assert(((*backdoor) &gt;&gt; 16) == 0xdead);
++
++	offset = backdoor[0] &amp; 0xffff;
++	size = backdoor[1];
++	*backdoor = 0xbeefbeef; // Scratch sig
++
++	free(c - offset);
++ #endif
++	
+ }
+ 
+ void av_freep(void *arg)

Added: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutil/pixfmt.h.patch
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutil/pixfmt.h.patch	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutil/pixfmt.h.patch	2010-12-10 08:06:40 UTC (rev 6830)
@@ -0,0 +1,13 @@
+diff --git a/avidemux_core/ADM_ffmpeg/libavutil/pixfmt.h b/avidemux_core/ADM_ffmpeg/libavutil/pixfmt.h
+index 8ec91c8..6882d41 100644
+--- a/avidemux_core/ADM_ffmpeg/libavutil/pixfmt.h
++++ b/avidemux_core/ADM_ffmpeg/libavutil/pixfmt.h
+@@ -29,7 +29,7 @@
+  * header, so it should not be directly included in your projects.
+  */
+ 
+-#include &quot;libavutil/avconfig.h&quot;
++#include &quot;ffmpeg_config/libavutil/avconfig.h&quot; // MEANX
+ 
+ /**
+  * Pixel format. Notes:

Copied: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutil/timer.h.patch (from rev 6829, branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutils/timer.h.patch)
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutil/timer.h.patch	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutil/timer.h.patch	2010-12-10 08:06:40 UTC (rev 6830)
@@ -0,0 +1,17 @@
+diff --git a/avidemux_core/ADM_ffmpeg/libavutil/timer.h b/avidemux_core/ADM_ffmpeg/libavutil/timer.h
+index cd8fba8..66be371 100644
+--- a/avidemux_core/ADM_ffmpeg/libavutil/timer.h
++++ b/avidemux_core/ADM_ffmpeg/libavutil/timer.h
+@@ -26,7 +26,12 @@
+ 
+ #include &lt;stdlib.h&gt;
+ #include &lt;stdint.h&gt;
++// MEANX
++#ifndef ADM_NO_CONFIG_H
+ #include &quot;config.h&quot;
++#endif
++// MEANX
++
+ 
+ #if   ARCH_ARM
+ #   include &quot;arm/timer.h&quot;

Deleted: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutils/avutil.h.patch
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutils/avutil.h.patch	2010-12-10 08:06:37 UTC (rev 6829)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutils/avutil.h.patch	2010-12-10 08:06:40 UTC (rev 6830)
@@ -1,18 +0,0 @@
-diff --git a/avidemux_core/ADM_ffmpeg/libavutil/avutil.h b/avidemux_core/ADM_ffmpeg/libavutil/avutil.h
-index 50b29fc..691c5cb 100644
---- a/avidemux_core/ADM_ffmpeg/libavutil/avutil.h
-+++ b/avidemux_core/ADM_ffmpeg/libavutil/avutil.h
-@@ -26,6 +26,13 @@
-  * external API header
-  */
- 
-+/* MEANX
-+ * - */
-+#define ASMALIGN(ZEROBITS) &quot;.p2align &quot; #ZEROBITS &quot;\n\t&quot;
-+/* /MEANX
-+ */
-+
-+
- 
- #define AV_STRINGIFY(s)         AV_TOSTRING(s)
- #define AV_TOSTRING(s) #s

Deleted: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutils/internal.h.patch
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutils/internal.h.patch	2010-12-10 08:06:37 UTC (rev 6829)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutils/internal.h.patch	2010-12-10 08:06:40 UTC (rev 6830)
@@ -1,49 +0,0 @@
-diff --git a/avidemux_core/ADM_ffmpeg/libavutil/internal.h b/avidemux_core/ADM_ffmpeg/libavutil/internal.h
-index 53d2b94..6cfbc6a 100644
---- a/avidemux_core/ADM_ffmpeg/libavutil/internal.h
-+++ b/avidemux_core/ADM_ffmpeg/libavutil/internal.h
-@@ -34,7 +34,11 @@
- #include &lt;stdint.h&gt;
- #include &lt;stddef.h&gt;
- #include &lt;assert.h&gt;
-+//MEANX
-+#ifndef ADM_NO_CONFIG_H
- #include &quot;config.h&quot;
-+#endif
-+// /MEANX
- #include &quot;attributes.h&quot;
- #include &quot;timer.h&quot;
- 
-@@ -101,6 +105,8 @@
- #endif
- 
- /* Use to export labels from asm. */
-+#include &quot;ADM_mangle.h&quot;
-+#if 0 // MEANX
- #define LABEL_MANGLE(a) EXTERN_PREFIX #a
- 
- // Use rip-relative addressing if compiling PIC code on x86-64.
-@@ -111,7 +117,7 @@
- #endif
- 
- #define MANGLE(a) EXTERN_PREFIX LOCAL_MANGLE(a)
--
-+#endif // MEANX
- /* debug stuff */
- 
- /* dprintf macros */
-@@ -140,12 +146,14 @@
- #endif
- 
- /* avoid usage of dangerous/inappropriate system functions */
-+#if 0 //MEANX
- #undef  malloc
- #define malloc please_use_av_malloc
- #undef  free
- #define free please_use_av_free
- #undef  realloc
- #define realloc please_use_av_realloc
-+#endif
- #undef  time
- #define time time_is_forbidden_due_to_security_issues
- #undef  rand

Deleted: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutils/lfg.c.patch
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutils/lfg.c.patch	2010-12-10 08:06:37 UTC (rev 6829)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutils/lfg.c.patch	2010-12-10 08:06:40 UTC (rev 6830)
@@ -1,13 +0,0 @@
-diff --git a/avidemux_core/ADM_ffmpeg/libavutil/lfg.c b/avidemux_core/ADM_ffmpeg/libavutil/lfg.c
-index b5db5a4..8256adc 100644
---- a/avidemux_core/ADM_ffmpeg/libavutil/lfg.c
-+++ b/avidemux_core/ADM_ffmpeg/libavutil/lfg.c
-@@ -39,7 +39,7 @@ void av_cold av_lfg_init(AVLFG *c, unsigned int seed){
-         c-&gt;state[i+2]= AV_RL32(tmp+8);
-         c-&gt;state[i+3]= AV_RL32(tmp+12);
-     }
--    c-&gt;index=0;
-+    c-&gt;xindex=0;
- }
- 
- void av_bmg_get(AVLFG *lfg, double out[2])

Deleted: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutils/lfg.h.patch
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutils/lfg.h.patch	2010-12-10 08:06:37 UTC (rev 6829)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutils/lfg.h.patch	2010-12-10 08:06:40 UTC (rev 6830)
@@ -1,37 +0,0 @@
-diff --git a/avidemux_core/ADM_ffmpeg/libavutil/lfg.h b/avidemux_core/ADM_ffmpeg/libavutil/lfg.h
-index 0e89ea3..e95b8c2 100644
---- a/avidemux_core/ADM_ffmpeg/libavutil/lfg.h
-+++ b/avidemux_core/ADM_ffmpeg/libavutil/lfg.h
-@@ -24,7 +24,7 @@
- 
- typedef struct {
-     unsigned int state[64];
--    int index;
-+    int xindex;
- } AVLFG;
- 
- void av_lfg_init(AVLFG *c, unsigned int seed);
-@@ -36,8 +36,8 @@ void av_lfg_init(AVLFG *c, unsigned int seed);
-  * it may be good enough and faster for your specific use case.
-  */
- static inline unsigned int av_lfg_get(AVLFG *c){
--    c-&gt;state[c-&gt;index &amp; 63] = c-&gt;state[(c-&gt;index-24) &amp; 63] + c-&gt;state[(c-&gt;index-55) &amp; 63];
--    return c-&gt;state[c-&gt;index++ &amp; 63];
-+    c-&gt;state[c-&gt;xindex &amp; 63] = c-&gt;state[(c-&gt;xindex-24) &amp; 63] + c-&gt;state[(c-&gt;xindex-55) &amp; 63];
-+    return c-&gt;state[c-&gt;xindex++ &amp; 63];
- }
- 
- /**
-@@ -46,9 +46,9 @@ static inline unsigned int av_lfg_get(AVLFG *c){
-  * Please also consider av_lfg_get() above, it is faster.
-  */
- static inline unsigned int av_mlfg_get(AVLFG *c){
--    unsigned int a= c-&gt;state[(c-&gt;index-55) &amp; 63];
--    unsigned int b= c-&gt;state[(c-&gt;index-24) &amp; 63];
--    return c-&gt;state[c-&gt;index++ &amp; 63] = 2*a*b+a+b;
-+    unsigned int a= c-&gt;state[(c-&gt;xindex-55) &amp; 63];
-+    unsigned int b= c-&gt;state[(c-&gt;xindex-24) &amp; 63];
-+    return c-&gt;state[c-&gt;xindex++ &amp; 63] = 2*a*b+a+b;
- }
- 
- /**

Deleted: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutils/libm.h.patch
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutils/libm.h.patch	2010-12-10 08:06:37 UTC (rev 6829)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutils/libm.h.patch	2010-12-10 08:06:40 UTC (rev 6830)
@@ -1,16 +0,0 @@
-diff --git a/avidemux_core/ADM_ffmpeg/libavutil/libm.h b/avidemux_core/ADM_ffmpeg/libavutil/libm.h
-index c7c28ac..3f6ae07 100644
---- a/avidemux_core/ADM_ffmpeg/libavutil/libm.h
-+++ b/avidemux_core/ADM_ffmpeg/libavutil/libm.h
-@@ -25,7 +25,11 @@
- #define AVUTIL_LIBM_H
- 
- #include &lt;math.h&gt;
-+//MEANX
-+#ifndef ADM_NO_CONFIG_H
- #include &quot;config.h&quot;
-+#endif
-+///MEANX
- #include &quot;attributes.h&quot;
- 
- #if !HAVE_EXP2

Deleted: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutils/mem.c.patch
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutils/mem.c.patch	2010-12-10 08:06:37 UTC (rev 6829)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutils/mem.c.patch	2010-12-10 08:06:40 UTC (rev 6830)
@@ -1,182 +0,0 @@
-diff --git a/avidemux_core/ADM_ffmpeg/libavutil/mem.c b/avidemux_core/ADM_ffmpeg/libavutil/mem.c
-index 8cad089..8e95a78 100644
---- a/avidemux_core/ADM_ffmpeg/libavutil/mem.c
-+++ b/avidemux_core/ADM_ffmpeg/libavutil/mem.c
-@@ -63,87 +63,110 @@ void  free(void *ptr);
- 
- void *av_malloc(unsigned int size)
- {
--    void *ptr = NULL;
--#if CONFIG_MEMALIGN_HACK
--    long diff;
--#endif
--
--    /* let's disallow possible ambiguous cases */
--    if(size &gt; (INT_MAX-16) )
--        return NULL;
--
--#if CONFIG_MEMALIGN_HACK
--    ptr = malloc(size+16);
--    if(!ptr)
--        return ptr;
--    diff= ((-(long)ptr - 1)&amp;15) + 1;
--    ptr = (char*)ptr + diff;
--    ((char*)ptr)[-1]= diff;
--#elif HAVE_POSIX_MEMALIGN
--    if (posix_memalign(&amp;ptr,16,size))
--        ptr = NULL;
--#elif HAVE_MEMALIGN
--    ptr = memalign(16,size);
--    /* Why 64?
--       Indeed, we should align it:
--         on 4 for 386
--         on 16 for 486
--         on 32 for 586, PPro - K6-III
--         on 64 for K7 (maybe for P3 too).
--       Because L1 and L2 caches are aligned on those values.
--       But I don't want to code such logic here!
--     */
--     /* Why 16?
--        Because some CPUs need alignment, for example SSE2 on P4, &amp; most RISC CPUs
--        it will just trigger an exception and the unaligned load will be done in the
--        exception handler or it will just segfault (SSE2 on P4).
--        Why not larger? Because I did not see a difference in benchmarks ...
--     */
--     /* benchmarks with P3
--        memalign(64)+1          3071,3051,3032
--        memalign(64)+2          3051,3032,3041
--        memalign(64)+4          2911,2896,2915
--        memalign(64)+8          2545,2554,2550
--        memalign(64)+16         2543,2572,2563
--        memalign(64)+32         2546,2545,2571
--        memalign(64)+64         2570,2533,2558
--
--        BTW, malloc seems to do 8-byte alignment by default here.
--     */
-+#ifdef __APPLE__
-+	return malloc(size);
- #else
--    ptr = malloc(size);
-+	char *c;
-+
-+	uint64_t l, lorg;
-+	uint32_t *backdoor;
-+
-+	l = (uint64_t)malloc(size + 32);
-+
-+	// Get next boundary
-+	lorg = l;
-+	l = (l + 15) &amp; 0xfffffffffffffff0LL;
-+	l += 16;
-+	c = (char*)l;
-+	backdoor = (uint32_t*)(c - 8);
-+	*backdoor = (0xdead &lt;&lt; 16) + l - lorg;
-+	backdoor[1] = size;
-+
-+	return c;
- #endif
--    return ptr;
- }
- 
--void *av_realloc(void *ptr, unsigned int size)
-+void *av_realloc(void *ptr, unsigned int newsize)
- {
--#if CONFIG_MEMALIGN_HACK
--    int diff;
--#endif
-+#ifdef __APPLE__
-+	if (!ptr)
-+		return av_malloc(newsize);
- 
--    /* let's disallow possible ambiguous cases */
--    if(size &gt; (INT_MAX-16) )
--        return NULL;
-+	if (!newsize)
-+	{
-+		av_free(ptr);
-+		return NULL;
-+	}
- 
--#if CONFIG_MEMALIGN_HACK
--    //FIXME this isn't aligned correctly, though it probably isn't needed
--    if(!ptr) return av_malloc(size);
--    diff= ((char*)ptr)[-1];
--    return (char*)realloc((char*)ptr - diff, size + diff) + diff;
-+	return realloc(ptr, newsize);
- #else
--    return realloc(ptr, size);
-+	void *nalloc;
-+
-+	if (!ptr)
-+		return av_malloc(newsize);
-+
-+	if (!newsize) 
-+	{
-+		av_free(ptr);
-+		return NULL;
-+	}
-+
-+	// now we either shrink them or expand them
-+	// in case of shrink, we do nothing
-+	// in case of expand we have to copy
-+	// Do copy everytime (slower)
-+	uint32_t *backdoor;
-+	uint32_t size, offset;
-+	char *c = (char*)ptr;
-+
-+	backdoor = (uint32_t*)ptr;
-+	backdoor -= 2;
-+
-+	assert(((*backdoor) &gt;&gt; 16) == 0xdead);
-+
-+	offset = backdoor[0] &amp; 0xffff;
-+	size = backdoor[1];
-+
-+	if(size &gt;= newsize) // do nothing
-+		return ptr;
-+
-+	// Allocate a new one
-+	nalloc = av_malloc(newsize);
-+	memcpy(nalloc, ptr, size);
-+	av_free(ptr);
-+
-+	return nalloc;
- #endif
- }
- 
- void av_free(void *ptr)
- {
--    /* XXX: this test should not be needed on most libcs */
--    if (ptr)
--#if CONFIG_MEMALIGN_HACK
--        free((char*)ptr - ((char*)ptr)[-1]);
-+#ifdef __APPLE__
-+	if (!ptr)
-+		return;
-+
-+	free(ptr);
- #else
--        free(ptr);
-+	uint32_t *backdoor;
-+	uint32_t size, offset;
-+	char *c = (char*)ptr;
-+
-+	if (!ptr)
-+		return;
-+
-+	backdoor = (uint32_t*)ptr;
-+	backdoor -= 2;
-+
-+	if (*backdoor == 0xbeefbeef)
-+		assert(0);
-+
-+	assert(((*backdoor) &gt;&gt; 16) == 0xdead);
-+
-+	offset = backdoor[0] &amp; 0xffff;
-+	size = backdoor[1];
-+	*backdoor = 0xbeefbeef; // Scratch sig
-+
-+	free(c - offset);
- #endif
- }
- 

Deleted: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutils/timer.h.patch
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutils/timer.h.patch	2010-12-10 08:06:37 UTC (rev 6829)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/avutils/timer.h.patch	2010-12-10 08:06:40 UTC (rev 6830)
@@ -1,17 +0,0 @@
-diff --git a/avidemux_core/ADM_ffmpeg/libavutil/timer.h b/avidemux_core/ADM_ffmpeg/libavutil/timer.h
-index cd8fba8..66be371 100644
---- a/avidemux_core/ADM_ffmpeg/libavutil/timer.h
-+++ b/avidemux_core/ADM_ffmpeg/libavutil/timer.h
-@@ -26,7 +26,12 @@
- 
- #include &lt;stdlib.h&gt;
- #include &lt;stdint.h&gt;
-+// MEANX
-+#ifndef ADM_NO_CONFIG_H
- #include &quot;config.h&quot;
-+#endif
-+// MEANX
-+
- 
- #if   ARCH_ARM
- #   include &quot;arm/timer.h&quot;

Added: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/swscale/swscale_template.c.patch
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/swscale/swscale_template.c.patch	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/patches/swscale/swscale_template.c.patch	2010-12-10 08:06:40 UTC (rev 6830)
@@ -0,0 +1,13 @@
+diff --git a/avidemux_core/ADM_ffmpeg/libswscale/swscale_template.c b/avidemux_core/ADM_ffmpeg/libswscale/swscale_template.c
+index 34868ac..88575e6 100644
+--- a/avidemux_core/ADM_ffmpeg/libswscale/swscale_template.c
++++ b/avidemux_core/ADM_ffmpeg/libswscale/swscale_template.c
+@@ -951,7 +951,7 @@ static inline void RENAME(yuv2yuv1)(SwsContext *c, const int16_t *lumSrc, const
+ #if COMPILE_TEMPLATE_MMX
+     if(!(c-&gt;flags &amp; SWS_BITEXACT)) {
+         long p= 4;
+-        const uint8_t *src[4]= {alpSrc + dstW, lumSrc + dstW, chrSrc + chrDstW, chrSrc + VOFW + chrDstW};
++        const uint8_t *src[4]= {alpSrc + dstW, (uint8_t *)lumSrc + dstW, (uint8_t *)chrSrc + chrDstW, (uint8_t *)chrSrc + VOFW + chrDstW}; // MEANX
+         uint8_t *dst[4]= {aDest, dest, uDest, vDest};
+         x86_reg counter[4]= {dstW, dstW, chrDstW, chrDstW};
+ 


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004005.html">[Avidemux-svn-commit] r6829 - in	branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg: .	libavcodec libavformat libswscale
</A></li>
	<LI>Next message: <A HREF="004007.html">[Avidemux-svn-commit] r6831 -	branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4006">[ date ]</a>
              <a href="thread.html#4006">[ thread ]</a>
              <a href="subject.html#4006">[ subject ]</a>
              <a href="author.html#4006">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">More information about the Avidemux-svn-commit
mailing list</a><br>
</body></html>
