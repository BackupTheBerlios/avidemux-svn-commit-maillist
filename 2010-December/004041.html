<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Avidemux-svn-commit] r6865 - in branches/avidemux_2.6_branch_mean: avidemux avidemux/cli avidemux/cli/ADM_userInterfaces/ADM_dialog avidemux/common/ADM_editor avidemux/common/ADM_videoCodec/src avidemux/gtk avidemux/gtk/ADM_userInterfaces/ADM_gui2 avidemux/qt4 avidemux_core avidemux_core/ADM_core/include avidemux_core/ADM_core/src avidemux_core/ADM_coreAudioParser/src avidemux_core/ADM_coreImage/src avidemux_core/ADM_coreMuxer/include avidemux_core/ADM_coreMuxer/src avidemux_core/ADM_coreUtils/include avidemux_core/ADM_coreUtils/src avidemux_core/ADM_coreVideoCodec/include avidemux_core/ADM_coreVideoCodec/src avidemux_core/ADM_coreVideoEncoder/include avidemux_core/ADM_coreVideoEncoder/src avidemux_core/ADM_coreVideoFilter/src avidemux_plugins avidemux_plugins/ADM_audioDecoders/ADM_ad_ima_adpcm avidemux_plugins/ADM_audioDecoders/ADM_ad_lav avidemux_plugins/ADM_audioDecoders/ADM_ad_ms_adpcm avidemux_plugins/ADM_audioEncoders/lavcodec avidemux_plugins/ADM_demuxers/Asf avidemux_plugins/ADM_ demuxers/Flv avidemux_plugins/ADM_demuxers/Matroska avidemux_plugins/ADM_demuxers/MpegTS avidemux_plugins/ADM_muxers/muxerDummy avidemux_plugins/ADM_muxers/muxerFlv avidemux_plugins/ADM_muxers/muxerMkv avidemux_plugins/ADM_muxers/muxerMp4 avidemux_plugins/ADM_muxers/muxerffPS avidemux_plugins/ADM_muxers/muxerffTS avidemux_plugins/ADM_videoEncoder/ffFlv1 avidemux_plugins/ADM_videoEncoder/ffMpeg2 avidemux_plugins/ADM_videoEncoder/ffMpeg4 avidemux_plugins/ADM_videoEncoder/ffMsMpeg4 avidemux_plugins/ADM_videoEncoder/huff avidemux_plugins/ADM_videoEncoder/jpeg avidemux_plugins/ADM_videoFilters/Equalizer/gtk avidemux_plugins/ADM_videoFilters/ForcedPP avidemux_plugins/ADM_videoFilters/MPDelogo avidemux_plugins/ADM_videoFilters/MPDelogo/gtk avidemux_plugins/ADM_videoFilters/McDeint avidemux_plugins/ADM_videoFilters/Mosaic avidemux_plugins/ADM_videoFilters6/lavDeint avidemux_plugins/ADM_videoFilters6/resize cmake cmake/patches myOwnPlugins/demuxer
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/avidemux-svn-commit/2010-December/index.html" >
   <LINK REL="made" HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r6865%20-%20in%20branches/avidemux_2.6_branch_mean%3A%0A%20avidemux%20avidemux/cli%20avidemux/cli/ADM_userInterfaces/ADM_dialog%0A%20avidemux/common/ADM_editor%20avidemux/common/ADM_videoCodec/src%20avidemux/gtk%0A%20avidemux/gtk/ADM_userInterfaces/ADM_gui2%20avidemux/qt4%20avidemux_core%0A%20avidemux_core/ADM_core/include%20avidemux_core/ADM_core/src%0A%20avidemux_core/ADM_coreAudioParser/src%20avidemux_core/ADM_coreImage/src%0A%20avidemux_core/ADM_coreMuxer/include%20avidemux_core/ADM_coreMuxer/src%0A%20avidemux_core/ADM_coreUtils/include%20avidemux_core/ADM_coreUtils/src%0A%20avidemux_core/ADM_coreVideoCodec/include%0A%20avidemux_core/ADM_coreVideoCodec/src%0A%20avidemux_core/ADM_coreVideoEncoder/include%0A%20avidemux_core/ADM_coreVideoEncoder/src%0A%20avidemux_core/ADM_coreVideoFilter/src%20avidemux_plugins%0A%20avidemux_plugins/ADM_audioDecoders/ADM_ad_ima_adpcm%0A%20avidemux_plugins/ADM_audioDecoders/ADM_ad_lav%0A%20avidemux_plugins/ADM_audioDecoders/ADM_ad_ms_adpcm%0A%20avidemux_plugins/ADM_audioEncoders/lavcodec%0A%20avidemux_plugins/ADM_demuxers/Asf%20avidemux_plugins/ADM_%20demuxers/Flv%0A%20avidemux_plugins/ADM_demuxers/Matroska%20avidemux_plugins/ADM_demuxers/MpegTS%0A%20avidemux_plugins/ADM_muxers/muxerDummy%20avidemux_plugins/ADM_muxers/muxerFlv%0A%20avidemux_plugins/ADM_muxers/muxerMkv%20avidemux_plugins/ADM_muxers/muxerMp4%0A%20avidemux_plugins/ADM_muxers/muxerffPS%20avidemux_plugins/ADM_muxers/muxerffTS%0A%20avidemux_plugins/ADM_videoEncoder/ffFlv1%0A%20avidemux_plugins/ADM_videoEncoder/ffMpeg2%0A%20avidemux_plugins/ADM_videoEncoder/ffMpeg4%0A%20avidemux_plugins/ADM_videoEncoder/ffMsMpeg4%0A%20avidemux_plugins/ADM_videoEncoder/huff%0A%20avidemux_plugins/ADM_videoEncoder/jpeg%0A%20avidemux_plugins/ADM_videoFilters/Equalizer/gtk%0A%20avidemux_plugins/ADM_videoFilters/ForcedPP%0A%20avidemux_plugins/ADM_videoFilters/MPDelogo%0A%20avidemux_plugins/ADM_videoFilters/MPDelogo/gtk%0A%20avidemux_plugins/ADM_videoFilters/McDeint%0A%20avidemux_plugins/ADM_videoFilters/Mosaic%0A%20avidemux_plugins/ADM_videoFilters6/lavDeint%0A%20avidemux_plugins/ADM_videoFilters6/resize%20cmake%20cmake/patches%0A%20myOwnPlugins/demuxer&In-Reply-To=%3C20101227194652.A87AE480587%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004040.html">
   <LINK REL="Next"  HREF="004042.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Avidemux-svn-commit] r6865 - in branches/avidemux_2.6_branch_mean: avidemux avidemux/cli avidemux/cli/ADM_userInterfaces/ADM_dialog avidemux/common/ADM_editor avidemux/common/ADM_videoCodec/src avidemux/gtk avidemux/gtk/ADM_userInterfaces/ADM_gui2 avidemux/qt4 avidemux_core avidemux_core/ADM_core/include avidemux_core/ADM_core/src avidemux_core/ADM_coreAudioParser/src avidemux_core/ADM_coreImage/src avidemux_core/ADM_coreMuxer/include avidemux_core/ADM_coreMuxer/src avidemux_core/ADM_coreUtils/include avidemux_core/ADM_coreUtils/src avidemux_core/ADM_coreVideoCodec/include avidemux_core/ADM_coreVideoCodec/src avidemux_core/ADM_coreVideoEncoder/include avidemux_core/ADM_coreVideoEncoder/src avidemux_core/ADM_coreVideoFilter/src avidemux_plugins avidemux_plugins/ADM_audioDecoders/ADM_ad_ima_adpcm avidemux_plugins/ADM_audioDecoders/ADM_ad_lav avidemux_plugins/ADM_audioDecoders/ADM_ad_ms_adpcm avidemux_plugins/ADM_audioEncoders/lavcodec avidemux_plugins/ADM_demuxers/Asf avidemux_plugins/ADM_ demuxers/Flv avidemux_plugins/ADM_demuxers/Matroska avidemux_plugins/ADM_demuxers/MpegTS avidemux_plugins/ADM_muxers/muxerDummy avidemux_plugins/ADM_muxers/muxerFlv avidemux_plugins/ADM_muxers/muxerMkv avidemux_plugins/ADM_muxers/muxerMp4 avidemux_plugins/ADM_muxers/muxerffPS avidemux_plugins/ADM_muxers/muxerffTS avidemux_plugins/ADM_videoEncoder/ffFlv1 avidemux_plugins/ADM_videoEncoder/ffMpeg2 avidemux_plugins/ADM_videoEncoder/ffMpeg4 avidemux_plugins/ADM_videoEncoder/ffMsMpeg4 avidemux_plugins/ADM_videoEncoder/huff avidemux_plugins/ADM_videoEncoder/jpeg avidemux_plugins/ADM_videoFilters/Equalizer/gtk avidemux_plugins/ADM_videoFilters/ForcedPP avidemux_plugins/ADM_videoFilters/MPDelogo avidemux_plugins/ADM_videoFilters/MPDelogo/gtk avidemux_plugins/ADM_videoFilters/McDeint avidemux_plugins/ADM_videoFilters/Mosaic avidemux_plugins/ADM_videoFilters6/lavDeint avidemux_plugins/ADM_videoFilters6/resize cmake cmake/patches myOwnPlugins/demuxer</H1>
    <B>gruntster at mail.berlios.de</B> 
    <A HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r6865%20-%20in%20branches/avidemux_2.6_branch_mean%3A%0A%20avidemux%20avidemux/cli%20avidemux/cli/ADM_userInterfaces/ADM_dialog%0A%20avidemux/common/ADM_editor%20avidemux/common/ADM_videoCodec/src%20avidemux/gtk%0A%20avidemux/gtk/ADM_userInterfaces/ADM_gui2%20avidemux/qt4%20avidemux_core%0A%20avidemux_core/ADM_core/include%20avidemux_core/ADM_core/src%0A%20avidemux_core/ADM_coreAudioParser/src%20avidemux_core/ADM_coreImage/src%0A%20avidemux_core/ADM_coreMuxer/include%20avidemux_core/ADM_coreMuxer/src%0A%20avidemux_core/ADM_coreUtils/include%20avidemux_core/ADM_coreUtils/src%0A%20avidemux_core/ADM_coreVideoCodec/include%0A%20avidemux_core/ADM_coreVideoCodec/src%0A%20avidemux_core/ADM_coreVideoEncoder/include%0A%20avidemux_core/ADM_coreVideoEncoder/src%0A%20avidemux_core/ADM_coreVideoFilter/src%20avidemux_plugins%0A%20avidemux_plugins/ADM_audioDecoders/ADM_ad_ima_adpcm%0A%20avidemux_plugins/ADM_audioDecoders/ADM_ad_lav%0A%20avidemux_plugins/ADM_audioDecoders/ADM_ad_ms_adpcm%0A%20avidemux_plugins/ADM_audioEncoders/lavcodec%0A%20avidemux_plugins/ADM_demuxers/Asf%20avidemux_plugins/ADM_%20demuxers/Flv%0A%20avidemux_plugins/ADM_demuxers/Matroska%20avidemux_plugins/ADM_demuxers/MpegTS%0A%20avidemux_plugins/ADM_muxers/muxerDummy%20avidemux_plugins/ADM_muxers/muxerFlv%0A%20avidemux_plugins/ADM_muxers/muxerMkv%20avidemux_plugins/ADM_muxers/muxerMp4%0A%20avidemux_plugins/ADM_muxers/muxerffPS%20avidemux_plugins/ADM_muxers/muxerffTS%0A%20avidemux_plugins/ADM_videoEncoder/ffFlv1%0A%20avidemux_plugins/ADM_videoEncoder/ffMpeg2%0A%20avidemux_plugins/ADM_videoEncoder/ffMpeg4%0A%20avidemux_plugins/ADM_videoEncoder/ffMsMpeg4%0A%20avidemux_plugins/ADM_videoEncoder/huff%0A%20avidemux_plugins/ADM_videoEncoder/jpeg%0A%20avidemux_plugins/ADM_videoFilters/Equalizer/gtk%0A%20avidemux_plugins/ADM_videoFilters/ForcedPP%0A%20avidemux_plugins/ADM_videoFilters/MPDelogo%0A%20avidemux_plugins/ADM_videoFilters/MPDelogo/gtk%0A%20avidemux_plugins/ADM_videoFilters/McDeint%0A%20avidemux_plugins/ADM_videoFilters/Mosaic%0A%20avidemux_plugins/ADM_videoFilters6/lavDeint%0A%20avidemux_plugins/ADM_videoFilters6/resize%20cmake%20cmake/patches%0A%20myOwnPlugins/demuxer&In-Reply-To=%3C20101227194652.A87AE480587%40sheep.berlios.de%3E"
       TITLE="[Avidemux-svn-commit] r6865 - in branches/avidemux_2.6_branch_mean: avidemux avidemux/cli avidemux/cli/ADM_userInterfaces/ADM_dialog avidemux/common/ADM_editor avidemux/common/ADM_videoCodec/src avidemux/gtk avidemux/gtk/ADM_userInterfaces/ADM_gui2 avidemux/qt4 avidemux_core avidemux_core/ADM_core/include avidemux_core/ADM_core/src avidemux_core/ADM_coreAudioParser/src avidemux_core/ADM_coreImage/src avidemux_core/ADM_coreMuxer/include avidemux_core/ADM_coreMuxer/src avidemux_core/ADM_coreUtils/include avidemux_core/ADM_coreUtils/src avidemux_core/ADM_coreVideoCodec/include avidemux_core/ADM_coreVideoCodec/src avidemux_core/ADM_coreVideoEncoder/include avidemux_core/ADM_coreVideoEncoder/src avidemux_core/ADM_coreVideoFilter/src avidemux_plugins avidemux_plugins/ADM_audioDecoders/ADM_ad_ima_adpcm avidemux_plugins/ADM_audioDecoders/ADM_ad_lav avidemux_plugins/ADM_audioDecoders/ADM_ad_ms_adpcm avidemux_plugins/ADM_audioEncoders/lavcodec avidemux_plugins/ADM_demuxers/Asf avidemux_plugins/ADM_ demuxers/Flv avidemux_plugins/ADM_demuxers/Matroska avidemux_plugins/ADM_demuxers/MpegTS avidemux_plugins/ADM_muxers/muxerDummy avidemux_plugins/ADM_muxers/muxerFlv avidemux_plugins/ADM_muxers/muxerMkv avidemux_plugins/ADM_muxers/muxerMp4 avidemux_plugins/ADM_muxers/muxerffPS avidemux_plugins/ADM_muxers/muxerffTS avidemux_plugins/ADM_videoEncoder/ffFlv1 avidemux_plugins/ADM_videoEncoder/ffMpeg2 avidemux_plugins/ADM_videoEncoder/ffMpeg4 avidemux_plugins/ADM_videoEncoder/ffMsMpeg4 avidemux_plugins/ADM_videoEncoder/huff avidemux_plugins/ADM_videoEncoder/jpeg avidemux_plugins/ADM_videoFilters/Equalizer/gtk avidemux_plugins/ADM_videoFilters/ForcedPP avidemux_plugins/ADM_videoFilters/MPDelogo avidemux_plugins/ADM_videoFilters/MPDelogo/gtk avidemux_plugins/ADM_videoFilters/McDeint avidemux_plugins/ADM_videoFilters/Mosaic avidemux_plugins/ADM_videoFilters6/lavDeint avidemux_plugins/ADM_videoFilters6/resize cmake cmake/patches myOwnPlugins/demuxer">gruntster at mail.berlios.de
       </A><BR>
    <I>Mon Dec 27 20:46:52 CET 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="004040.html">[Avidemux-svn-commit] r6864 - in branches/avidemux_2.6_branch_mean:	avidemux_core/ADM_core/src cmake
</A></li>
        <LI>Next message: <A HREF="004042.html">[Avidemux-svn-commit] r6866 -	branches/avidemux_2.6_branch_mean/cmake
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4041">[ date ]</a>
              <a href="thread.html#4041">[ thread ]</a>
              <a href="subject.html#4041">[ subject ]</a>
              <a href="author.html#4041">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: gruntster
Date: 2010-12-27 20:46:51 +0100 (Mon, 27 Dec 2010)
New Revision: 6865

Added:
   branches/avidemux_2.6_branch_mean/cmake/FindPatch.cmake
   branches/avidemux_2.6_branch_mean/cmake/admFFmpegBuild.cmake
   branches/avidemux_2.6_branch_mean/cmake/admFFmpegClean.cmake
   branches/avidemux_2.6_branch_mean/cmake/admFFmpegMake.cmake
   branches/avidemux_2.6_branch_mean/cmake/admFFmpegPrepareSvn.cmake
   branches/avidemux_2.6_branch_mean/cmake/admFFmpegPrepareTar.cmake
   branches/avidemux_2.6_branch_mean/cmake/admFFmpegUtil.cmake
   branches/avidemux_2.6_branch_mean/cmake/patches/
   branches/avidemux_2.6_branch_mean/cmake/patches/common.mak.diff
   branches/avidemux_2.6_branch_mean/cmake/patches/config.mak.diff
   branches/avidemux_2.6_branch_mean/cmake/patches/config_macosx.mak.diff
   branches/avidemux_2.6_branch_mean/cmake/patches/createPatches.sh
   branches/avidemux_2.6_branch_mean/cmake/patches/libavcodec_avcodec.h.patch
   branches/avidemux_2.6_branch_mean/cmake/patches/libavcodec_ff_spsinfo.h.patch
   branches/avidemux_2.6_branch_mean/cmake/patches/libavcodec_ffv1.c.patch
   branches/avidemux_2.6_branch_mean/cmake/patches/libavcodec_h263dec.c.patch
   branches/avidemux_2.6_branch_mean/cmake/patches/libavcodec_h264.c.patch
   branches/avidemux_2.6_branch_mean/cmake/patches/libavcodec_h264_parser.c.patch
   branches/avidemux_2.6_branch_mean/cmake/patches/libavcodec_mpeg12.c.patch
   branches/avidemux_2.6_branch_mean/cmake/patches/libavcodec_mpeg12enc.c.patch
   branches/avidemux_2.6_branch_mean/cmake/patches/libavcodec_mpegvideo.c.patch
   branches/avidemux_2.6_branch_mean/cmake/patches/libavcodec_mpegvideo_enc.c.patch
   branches/avidemux_2.6_branch_mean/cmake/patches/libavcodec_utils.c.patch
   branches/avidemux_2.6_branch_mean/cmake/patches/libavcodec_vc1dec.c.patch
   branches/avidemux_2.6_branch_mean/cmake/patches/libavformat_file.c.patch
   branches/avidemux_2.6_branch_mean/cmake/patches/libavformat_isom.c.patch
   branches/avidemux_2.6_branch_mean/cmake/patches/libavformat_matroskaenc.c.patch
   branches/avidemux_2.6_branch_mean/cmake/patches/libavutil_avutil.h.patch
Removed:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/include/ADM_includeFfmpeg.h
   branches/avidemux_2.6_branch_mean/cmake/FindYasm.cmake
Modified:
   branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_dialog/DIA_none.cpp
   branches/avidemux_2.6_branch_mean/avidemux/cli/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edRenderInternal.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/src/ADM_ffmpeg_vdpau.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/src/ADM_videoCodec.cpp
   branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_gui2/GUI_gtkRender.cpp
   branches/avidemux_2.6_branch_mean/avidemux/gtk/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/qt4/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/include/ADM_inttype.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/ADM_cpuCap.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/ADM_memcpy.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioParser/src/ADM_eac3info.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioParser/src/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/ADM_colorspace.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/ADM_imageResizer.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/ADM_imageSave.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/ADM_imageUtils.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/ADM_pp.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreMuxer/include/ADM_coreMuxerFfmpeg.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreMuxer/src/ADM_coreMuxerFfmpeg.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreMuxer/src/ADM_dynaMuxer.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreMuxer/src/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/include/ADM_coreCodecMapping.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_coreCodecMapping.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_getbits.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_infoExtractorH264.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_paramList.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoCodec/include/ADM_codecFFsimple.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoCodec/include/ADM_ffmp43.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoCodec/src/ADM_codecSearch.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoCodec/src/ADM_ffmp43.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoCodec/src/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/include/ADM_coreVideoEncoderFFmpeg_param.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/ADM_coreVideoEncoder.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/src/DIA_flyDialog.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_ima_adpcm/ADM_ad_ima_adpcm.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_lav/ADM_ad_lav.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_lav/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_ms_adpcm/ADM_ad_ms_adpcm.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lavcodec/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lavcodec/audioencoder_lavcodec.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Asf/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Flv/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Matroska/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerDummy/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerFlv/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerFlv/muxerFlv.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerFlv/muxerFlvConfig.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerFlv/muxerFlvPlugin.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerMkv/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerMkv/muxerMkv.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerMkv/muxerMkvConfig.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerMkv/muxerMkvPlugin.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerMp4/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerMp4/muxerMP4.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerMp4/muxerMP4Config.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerMp4/muxerMP4Plugin.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffPS/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffPS/muxerffPS.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffPS/muxerffPSConfig.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffPS/muxerffPSPlugin.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffTS/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffTS/muxerffTS.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffTS/muxerffTSConfig.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffTS/muxerffTSPlugin.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffFlv1/ADM_ffFlv1.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffFlv1/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffFlv1/ffFlv1Plugin.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg2/ADM_ffMpeg2.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg2/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg2/ffMpeg2Plugin.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ffMpeg4Plugin.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMsMpeg4/ADM_ffMsMp4.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMsMpeg4/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMsMpeg4/ffMsMp4Plugin.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/huff/ADM_huffEncoder.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/huff/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/huff/huffPlugin.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/jpeg/ADM_jpegEncoder.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/jpeg/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/jpeg/jpegPlugin.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters/Equalizer/gtk/DIA_equalizer.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters/ForcedPP/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters/MPDelogo/ADM_vidMPdelogo.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters/MPDelogo/gtk/DIA_mpdelogo.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters/McDeint/ADM_vidMcDeint.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters/Mosaic/ADM_vidMosaic.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/lavDeint/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/lavDeint/lavDeint.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/swScaleResize.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/cmake/ADM_coreConfig.h.cmake
   branches/avidemux_2.6_branch_mean/cmake/admConfigSummary.cmake
   branches/avidemux_2.6_branch_mean/cmake/admCoreIncludes.cmake
   branches/avidemux_2.6_branch_mean/myOwnPlugins/demuxer/CMakeLists.txt
Log:
[ffmpeg] port FFmpeg build scripts from 2.5 branch

Modified: branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_dialog/DIA_none.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_dialog/DIA_none.cpp	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_dialog/DIA_none.cpp	2010-12-27 19:46:51 UTC (rev 6865)
@@ -13,7 +13,6 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include &quot;ADM_includeFfmpeg.h&quot;
 #include &quot;config.h&quot;
 
 #include &lt;string.h&gt;
@@ -21,14 +20,9 @@
 #include &lt;stdlib.h&gt;
 
 #include &quot;ADM_default.h&quot;
-
-#include &quot;ADM_assert.h&quot;
 #include &quot;audioencoder.h&quot;
-#include &quot;ADM_lavcodec.h&quot;
 #include &quot;ADM_render/GUI_render.cpp&quot;
-//#include &quot;ADM_codecs/ADM_ffmpegConfig.h&quot;
 
-//#include &quot;ADM_userInterfaces/ADM_render/GUI_renderInternal.h&quot;
 extern int global_argc;
 extern char **global_argv;
 extern void initTranslator(void);
@@ -36,19 +30,6 @@
 
 int SliderIsShifted = 0;
 
-
-
-
-#ifdef USE_XX_XVID 
-#include &quot;xvid.h&quot;
-int  DIA_getXvidCompressParams(COMPRESSION_MODE * mode, uint32_t * qz,
-		      uint32_t * br,uint32_t *fsize,xvidEncParam *param) {return 0;}
-#endif
-
-
-
-
-
 //uint8_t DIA_getPartial(PARTIAL_CONFIG *param,AVDMGenericVideoStream *son,AVDMGenericVideoStream *previous) {return 0;}
 uint8_t DIA_pipe(char **cmd,char **param) {return 0;}
 //uint8_t DIA_vobsub(vobSubParam *param) {return 0;}
@@ -120,11 +101,11 @@
 	printf(&quot;End of program..\n&quot;);
 	printf(&quot;*********************************\n&quot;);
 	printf(&quot;*********************************\n&quot;);
-}
-bool UI_End(void)
-{
-    return true;
 }
-bool UI_setDecoderName(const char *name) {return true;}
+bool UI_End(void)
+{
+    return true;
+}
+bool UI_setDecoderName(const char *name) {return true;}
 int32_t UI_readJog(void) {return 0;};
 //EOF

Modified: branches/avidemux_2.6_branch_mean/avidemux/cli/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/cli/CMakeLists.txt	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux/cli/CMakeLists.txt	2010-12-27 19:46:51 UTC (rev 6865)
@@ -20,7 +20,7 @@
 CONFIGURE_FILE(&quot;${AVIDEMUX_TOP_SOURCE_DIR}/cmake/config.h.cmake&quot; &quot;${CMAKE_BINARY_DIR}/config/cli/config.h&quot;)
 MESSAGE(STATUS &quot;CLI config.h generated&quot;)
 
-INCLUDE_DIRECTORIES(&quot;${CMAKE_BINARY_DIR}/config/cli/&quot;)
+INCLUDE_DIRECTORIES(BEFORE &quot;${CMAKE_BINARY_DIR}/config/cli/&quot;)
 
 ###########################################
 # Executable

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edRenderInternal.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edRenderInternal.cpp	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edRenderInternal.cpp	2010-12-27 19:46:51 UTC (rev 6865)
@@ -16,7 +16,6 @@
  *                                                                         *
  ***************************************************************************/
 
-#include &quot;ADM_includeFfmpeg.h&quot;
 #include &quot;ADM_cpp.h&quot;
 #include &lt;math.h&gt;
 #include &quot;ADM_default.h&quot;

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/src/ADM_ffmpeg_vdpau.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/src/ADM_ffmpeg_vdpau.cpp	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/src/ADM_ffmpeg_vdpau.cpp	2010-12-27 19:46:51 UTC (rev 6865)
@@ -21,13 +21,12 @@
  *                                                                         *
  ***************************************************************************/
 
-extern &quot;C&quot; {
-#include &quot;ADM_lavcodec.h&quot;
-}
 #include &quot;ADM_default.h&quot;
+
 #ifdef USE_VDPAU
 extern &quot;C&quot; {
- #include &quot;ADM_ffmpeg/libavcodec/vdpau.h&quot;
+#include &quot;libavcodec/avcodec.h&quot;
+#include &quot;libavcodec/vdpau.h&quot;
 }
 
 #include &quot;ADM_codec.h&quot;

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/src/ADM_videoCodec.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/src/ADM_videoCodec.cpp	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/src/ADM_videoCodec.cpp	2010-12-27 19:46:51 UTC (rev 6865)
@@ -16,10 +16,6 @@
  *                                                                         *
  ***************************************************************************/
 
-extern &quot;C&quot;
-{
-#include &quot;ADM_lavcodec.h&quot;
-};
 #include &quot;ADM_default.h&quot;
 #include &quot;ADM_codec.h&quot;
 #include &quot;ADM_ffmp43.h&quot;

Modified: branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake	2010-12-27 19:46:51 UTC (rev 6865)
@@ -1,15 +1,18 @@
 ########################################
 # Definitions and Includes
 ########################################
-if(NOT PLUGINS)
-        SET(AVIDEMUX_TOP_SOURCE_DIR ${CMAKE_SOURCE_DIR}/../..)
-endif(NOT PLUGINS)
+if (NOT PLUGINS)
+	SET(AVIDEMUX_TOP_SOURCE_DIR ${CMAKE_SOURCE_DIR}/../..)
+endif (NOT PLUGINS)
+
 SET(CMAKE_MODULE_PATH &quot;${AVIDEMUX_TOP_SOURCE_DIR}/cmake&quot; &quot;${CMAKE_MODULE_PATH}&quot;)
+
 ########################################
 # Shared cmake part
 ########################################
 ADD_DEFINITIONS(-D_FILE_OFFSET_BITS=64 -D_LARGE_FILES)
 include(admMainChecks)
+
 ########################################
 # Add include dirs
 ########################################
@@ -26,6 +29,7 @@
 IF (GETTEXT_FOUND)
 	INCLUDE_DIRECTORIES(${GETTEXT_INCLUDE_DIR})
 ENDIF (GETTEXT_FOUND)
+
 INCLUDE_DIRECTORIES(&quot;${CMAKE_CURRENT_SOURCE_DIR}/../common/&quot;)
 INCLUDE_DIRECTORIES(&quot;${CMAKE_CURRENT_SOURCE_DIR}/../common/ADM_audioFilter/include&quot;)
 INCLUDE_DIRECTORIES(&quot;${CMAKE_CURRENT_SOURCE_DIR}/../common/ADM_commonUI&quot;)
@@ -51,6 +55,11 @@
 ../common/ADM_slave.cpp
 )
 
+########################################
+# FFmpeg
+########################################
+include_directories(&quot;${AVIDEMUX_TOP_SOURCE_DIR}/ffmpeg&quot;)
+
 #############################################
 # Add core libs
 #############################################
@@ -71,11 +80,6 @@
 ADM_coreVideoEncoder6
 ADM_coreVideoFilter6
 ADM_coreImageLoader6
-ADM_libavcodec6
-ADM_libavformat6
-ADM_libavutil6
-ADM_libswscale6
-ADM_libpostproc6
 ADM_coreTinyPy6
 )
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_gui2/GUI_gtkRender.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_gui2/GUI_gtkRender.cpp	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_gui2/GUI_gtkRender.cpp	2010-12-27 19:46:51 UTC (rev 6865)
@@ -36,7 +36,6 @@
 #include &quot;../ADM_render/GUI_accelRender.h&quot;
 
 #include &quot;ADM_colorspace.h&quot;
-#include &quot;ADM_ffmpeg/libswscale/ADM_mp.h&quot;
 
 void GUI_gtk_grow_off(int onff);
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/CMakeLists.txt	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/CMakeLists.txt	2010-12-27 19:46:51 UTC (rev 6865)
@@ -23,7 +23,7 @@
 CONFIGURE_FILE(&quot;${AVIDEMUX_TOP_SOURCE_DIR}/cmake/config.h.cmake&quot; &quot;${CMAKE_BINARY_DIR}/config/gtk/config.h&quot;)
 MESSAGE(STATUS &quot;GTK config.h generated&quot;)
 
-INCLUDE_DIRECTORIES(&quot;${CMAKE_BINARY_DIR}/config/gtk/&quot;)
+INCLUDE_DIRECTORIES(BEFORE &quot;${CMAKE_BINARY_DIR}/config/gtk/&quot;)
 
 ###########################################
 # Executable

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/CMakeLists.txt	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/CMakeLists.txt	2010-12-27 19:46:51 UTC (rev 6865)
@@ -30,7 +30,7 @@
 CONFIGURE_FILE(&quot;${AVIDEMUX_TOP_SOURCE_DIR}/cmake/config.h.cmake&quot; &quot;${CMAKE_BINARY_DIR}/config/qt4/config.h&quot;)
 MESSAGE(STATUS &quot;QT4 config.h generated&quot;)
 
-INCLUDE_DIRECTORIES(&quot;${CMAKE_BINARY_DIR}/config/qt4/&quot;)
+INCLUDE_DIRECTORIES(BEFORE &quot;${CMAKE_BINARY_DIR}/config/qt4/&quot;)
 
 
 ###########################################

Deleted: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/include/ADM_includeFfmpeg.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/include/ADM_includeFfmpeg.h	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/include/ADM_includeFfmpeg.h	2010-12-27 19:46:51 UTC (rev 6865)
@@ -1,4 +0,0 @@
-#define __STDC_CONSTANT_MACROS  1 // Lavcodec crap
-#define __STDC_LIMIT_MACROS 1
-#define ADM_NO_CONFIG_H
-

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/include/ADM_inttype.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/include/ADM_inttype.h	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/include/ADM_inttype.h	2010-12-27 19:46:51 UTC (rev 6865)
@@ -24,6 +24,8 @@
 typedef unsigned char ADM_filename;
 
 #ifdef HAVE_STDINT_H
+#define __STDC_CONSTANT_MACROS
+#define __STDC_LIMIT_MACROS
 #include &lt;stdint.h&gt;
 #define GOT_TYPES
 #endif

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/ADM_cpuCap.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/ADM_cpuCap.cpp	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/ADM_cpuCap.cpp	2010-12-27 19:46:51 UTC (rev 6865)
@@ -10,9 +10,6 @@
 //
 //
 #include &quot;ADM_coreConfig.h&quot;
-#ifdef ADM_CPU_X86
-#include &quot;ADM_lavcodec.h&quot;
-#endif
 #include &quot;ADM_default.h&quot;
 
 #if defined(__MINGW32__)

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/ADM_memcpy.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/ADM_memcpy.cpp	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/ADM_memcpy.cpp	2010-12-27 19:46:51 UTC (rev 6865)
@@ -34,9 +34,12 @@
 #include &lt;stdlib.h&gt;
 #include &lt;string.h&gt;
 #include &quot;ADM_coreConfig.h&quot;
-#include &quot;ADM_lavcodec.h&quot;
 #include &quot;ADM_default.h&quot;
 
+extern &quot;C&quot; {
+#include &quot;libavcodec/avcodec.h&quot;
+}
+
 adm_fast_memcpy myAdmMemcpy=NULL;
 /* Original comments from mplayer (file: aclib.c)
  This part of code was taken by me from Linux-2.4.3 and slightly modified

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/CMakeLists.txt	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/CMakeLists.txt	2010-12-27 19:46:51 UTC (rev 6865)
@@ -4,7 +4,7 @@
         ADM_debug.cpp 
         ADM_queue.cpp
 )
-include_directories(${AVIDEMUX_TOP_SOURCE_DIR}/avidemux_core/ADM_ffmpeg/)
+
 ADD_LIBRARY(ADM_core6 SHARED ${ADM_core_SRCS})
 ADD_TARGET_DEFINITIONS(ADM_core6 ADM_DEBUG FIND_LEAKS)
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioParser/src/ADM_eac3info.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioParser/src/ADM_eac3info.cpp	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioParser/src/ADM_eac3info.cpp	2010-12-27 19:46:51 UTC (rev 6865)
@@ -7,13 +7,11 @@
 
 */
 
-#include &quot;ADM_includeFfmpeg.h&quot;
 #include &quot;ADM_default.h&quot;
-
 #include &quot;ADM_eac3info.h&quot;
+
 extern &quot;C&quot;
 {
-#define ADM_NO_CONFIG_H
 #define sign_extend
 #include &quot;libavcodec/internal.h&quot;
 #include &quot;libavcodec/ac3_parser.h&quot;

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioParser/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioParser/src/CMakeLists.txt	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioParser/src/CMakeLists.txt	2010-12-27 19:46:51 UTC (rev 6865)
@@ -12,6 +12,6 @@
 ADD_DEFINITIONS(-DCPU_CLIPS_POSITIVE=0 -DCPU_CLIPS_NEGATIVE=0)
 #*************************************************
 ADD_LIBRARY(ADM_audioParser6 SHARED ${ADMaudioParser_SRCS})
-TARGET_LINK_LIBRARIES(ADM_audioParser6 ADM_core6 ADM_coreUtils6 ADM_coreUI6  ADM_libavcodec6 ADM_libavformat6 ADM_libavutil6)
+TARGET_LINK_LIBRARIES(ADM_audioParser6 ADM_core6 ADM_coreUtils6 ADM_coreUI6  ADM_libavcodec ADM_libavformat ADM_libavutil)
 
 ADM_INSTALL_LIB(ADM_audioParser6)

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/ADM_colorspace.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/ADM_colorspace.cpp	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/ADM_colorspace.cpp	2010-12-27 19:46:51 UTC (rev 6865)
@@ -14,16 +14,14 @@
  *                                                                         *
  ***************************************************************************/
 
-
-#include &quot;ADM_includeFfmpeg.h&quot;
 #include &quot;ADM_default.h&quot;
 #include &quot;ADM_colorspace.h&quot;
 #include &quot;ADM_image.h&quot;
 
 extern &quot;C&quot; {
-#include &quot;ADM_ffmpeg/libavcodec/avcodec.h&quot;
-#include &quot;ADM_ffmpeg/libavutil/avutil.h&quot;
-#include &quot;ADM_ffmpeg/libswscale/swscale.h&quot;
+#include &quot;libavcodec/avcodec.h&quot;
+#include &quot;libavutil/avutil.h&quot;
+#include &quot;libswscale/swscale.h&quot;
 }
 
 #include &quot;ADM_rgb.h&quot; 

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/ADM_imageResizer.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/ADM_imageResizer.cpp	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/ADM_imageResizer.cpp	2010-12-27 19:46:51 UTC (rev 6865)
@@ -11,14 +11,13 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include &quot;ADM_includeFfmpeg.h&quot;
-#include &quot;ADM_default.h&quot;
 
+#include &quot;ADM_default.h&quot;
 #include &quot;ADM_imageResizer.h&quot;
 
 extern &quot;C&quot; {
-#include &quot;ADM_ffmpeg/libavcodec/avcodec.h&quot;
-#include &quot;ADM_ffmpeg/libswscale/swscale.h&quot;
+#include &quot;libavcodec/avcodec.h&quot;
+#include &quot;libswscale/swscale.h&quot;
 }
 
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/ADM_imageSave.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/ADM_imageSave.cpp	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/ADM_imageSave.cpp	2010-12-27 19:46:51 UTC (rev 6865)
@@ -1,17 +1,21 @@
-/**
-      \file A
-      \brief 2nd part of ADMImage, put here to avoid weird dependancies
-*/
-#include &quot;ADM_includeFfmpeg.h&quot;
-#include &quot;ADM_default.h&quot;
-#include &quot;ADM_image.h&quot;
-#include &quot;ADM_bitmap.h&quot;
-#include &quot;DIA_coreToolkit.h&quot;
-#include &quot;ADM_colorspace.h&quot;
-#include &quot;ADM_lavcodec.h&quot;
-/**
-    \fn SwapMe
-*/
+/**
+      \file A
+      \brief 2nd part of ADMImage, put here to avoid weird dependancies
+*/
+
+#include &quot;ADM_default.h&quot;
+#include &quot;ADM_image.h&quot;
+#include &quot;ADM_bitmap.h&quot;
+#include &quot;DIA_coreToolkit.h&quot;
+#include &quot;ADM_colorspace.h&quot;
+
+extern &quot;C&quot; {
+#include &quot;libavcodec/avcodec.h&quot;
+}
+
+/**
+    \fn SwapMe
+*/
 static inline void SwapMe(uint8_t *tgt,uint8_t *src,int nb);
 void SwapMe(uint8_t *tgt,uint8_t *src,int nb)
 {
@@ -30,60 +34,60 @@
    return;
     
 }
-
-/**
-    \fn saveAsBmp
-    \brief save current image into filename, into bmp format
-*/
-bool  ADMImage::saveAsBmp(const char *filename)
-{
-  ADM_BITMAPFILEHEADER bmfh;
-  ADM_BITMAPINFOHEADER bmph;
-  FILE *fd;
-  uint32_t sz;
-  uint16_t s16;
-  uint32_t s32;
-
-  sz = _width* _height * 3;
-
-  bmfh.bfReserved1 = bmfh.bfReserved2 = 0;
-  bmfh.bfOffBits = sizeof (bmfh) + sizeof (bmph);
-//_________________________________________
-  bmph.biSize = sizeof (bmph);
-  bmph.biWidth = _width;
-  bmph.biHeight = _height;
-  bmph.biPlanes = 1;
-  bmph.biBitCount = 24;
-  bmph.biCompression = 0;	// COMPRESSION NONE
-  bmph.biSizeImage = sz;
-  bmph.biXPelsPerMeter = 0;
-  bmph.biYPelsPerMeter = 0;
-  bmph.biClrUsed = 0;
-  bmph.biClrImportant = 0;
-/*
-	bmph.resolutionUnits=0;
-	bmph.origin=0;
-	bmph.colorEncoding=0;
-*/
-
-  ADMImageDefault image(_width,_height);
-
-
-  printf (&quot;\n %u x %u=%u\n&quot;, bmph.biWidth, bmph.biHeight, sz);
-
-  uint8_t *out;
-
-        out=(uint8_t *)ADM_alloc(sz);
-        if(!out)
-        {
-            GUI_Error_HIG(QT_TR_NOOP(&quot;Memory error&quot;), NULL);
-//            ADM_dealloc(out);
-            return 0;
-        }
-        ADMColorScalerSimple converter(bmph.biWidth, bmph.biHeight, ADM_COLOR_YV12,ADM_COLOR_RGB24);
-        converter.convertImage(this,out);
-        uint32_t ww=bmph.biWidth;
-        uint32_t hh=bmph.biHeight;
+
+/**
+    \fn saveAsBmp
+    \brief save current image into filename, into bmp format
+*/
+bool  ADMImage::saveAsBmp(const char *filename)
+{
+  ADM_BITMAPFILEHEADER bmfh;
+  ADM_BITMAPINFOHEADER bmph;
+  FILE *fd;
+  uint32_t sz;
+  uint16_t s16;
+  uint32_t s32;
+
+  sz = _width* _height * 3;
+
+  bmfh.bfReserved1 = bmfh.bfReserved2 = 0;
+  bmfh.bfOffBits = sizeof (bmfh) + sizeof (bmph);
+//_________________________________________
+  bmph.biSize = sizeof (bmph);
+  bmph.biWidth = _width;
+  bmph.biHeight = _height;
+  bmph.biPlanes = 1;
+  bmph.biBitCount = 24;
+  bmph.biCompression = 0;	// COMPRESSION NONE
+  bmph.biSizeImage = sz;
+  bmph.biXPelsPerMeter = 0;
+  bmph.biYPelsPerMeter = 0;
+  bmph.biClrUsed = 0;
+  bmph.biClrImportant = 0;
+/*
+	bmph.resolutionUnits=0;
+	bmph.origin=0;
+	bmph.colorEncoding=0;
+*/
+
+  ADMImageDefault image(_width,_height);
+
+
+  printf (&quot;\n %u x %u=%u\n&quot;, bmph.biWidth, bmph.biHeight, sz);
+
+  uint8_t *out;
+
+        out=(uint8_t *)ADM_alloc(sz);
+        if(!out)
+        {
+            GUI_Error_HIG(QT_TR_NOOP(&quot;Memory error&quot;), NULL);
+//            ADM_dealloc(out);
+            return 0;
+        }
+        ADMColorScalerSimple converter(bmph.biWidth, bmph.biHeight, ADM_COLOR_YV12,ADM_COLOR_RGB24);
+        converter.convertImage(this,out);
+        uint32_t ww=bmph.biWidth;
+        uint32_t hh=bmph.biHeight;
         uint8_t swap[ww*3];
         uint8_t *up=out;
         uint8_t *down=out+(hh-1)*ww*3;
@@ -95,128 +99,128 @@
             memcpy( down,swap,ww*3);
             down-=3*ww;
             up+=3*ww;
-        }
-
-        fd = ADM_fopen (filename, &quot;wb&quot;);
-        if (!fd)
-        {
-                GUI_Error_HIG (QT_TR_NOOP(&quot;Something bad happened&quot;), NULL);
-                ADM_dealloc(out);
-                return 0;
-        }
-
-	// Bitmpap file header, not using tructure due to gcc padding it
-#ifdef ADM_BIG_ENDIAN
-	s16 = 0x424D;
-#else
-  	s16 = 0x4D42;
-#endif
-  	s32 = 14 + sizeof (bmph) + sz;
-#ifdef ADM_BIG_ENDIAN
-	#define SWAP32(x) x=R32(x)
-#else
-	#define SWAP32(x) ;
-#endif
-        SWAP32(s32);
-        fwrite (&amp;s16, 2, 1, fd);
-        fwrite (&amp;s32, 4, 1, fd);
-        s32 = 0;
-        fwrite (&amp;s32, 4, 1, fd);
-        s32 = 14 + sizeof (bmph);
-        SWAP32(s32);
-        fwrite (&amp;s32, 4, 1, fd);
-#ifdef ADM_BIG_ENDIAN
-	Endian_BitMapInfo(&amp;bmph);
-#endif
-        fwrite (&amp;bmph, sizeof (bmph), 1, fd);
-        fwrite (out, sz, 1, fd);
-
-        fclose(fd);
-        ADM_dealloc(out);
-        return 1;
-}
-/**
-    \fn saveAsJpg
-    \brief save current image into filename, into jpg format
-*/
-bool  ADMImage::saveAsJpg(const char *filename)
-{
-
-AVCodecContext   *context=NULL;   
-AVFrame          frame;     
-bool             result=false;
-AVCodec          *codec=NULL;
-uint8_t          buffer[_width*_height*4];
-int              sz=0,r=0;
-
-    context=avcodec_alloc_context();
-    if(!context) 
-    {
-        printf(&quot;[saveAsJpg] Cannot allocate context\n&quot;);
-        return false;
-    }
-    codec=avcodec_find_encoder(CODEC_ID_MJPEG);
-    if(!codec)
-    {
-        printf(&quot;[saveAsJpg] Cannot allocate codec\n&quot;);
-        goto jpgCleanup;
-    }
-    context-&gt;pix_fmt =PIX_FMT_YUV420P;
-    context-&gt;strict_std_compliance = -1;
-    context-&gt;time_base.den=1;
-    context-&gt;time_base.num=1;
-    context-&gt;width=_width;
-    context-&gt;height=_height;
-    r=avcodec_open(context, codec); 
-    if(r&lt;0)
-    {
-        printf(&quot;[saveAsJpg] Cannot mix codec and context\n&quot;);
-        ADM_dealloc (context);
-        return false;
-    }
-    // Setup our image &amp; stuff....
-        
-
-        frame.linesize[0] = GetPitch(PLANAR_Y); 
-        frame.linesize[1] = GetPitch(PLANAR_U); 
-        frame.linesize[2] = GetPitch(PLANAR_V); 
-        
-        frame.data[0] = GetWritePtr(PLANAR_Y);
-        frame.data[2] = GetWritePtr(PLANAR_U);
-        frame.data[1] = GetWritePtr(PLANAR_V);
-    // Grab a temp buffer
-    
-    // Encode!
-      context-&gt;flags |= CODEC_FLAG_QSCALE;
-      frame.quality = (int) floor (FF_QP2LAMBDA * 2+ 0.5);
-        
-        if ((sz = avcodec_encode_video (context, buffer, _width*_height*4, &amp;frame)) &lt; 0)
-        {
-            printf(&quot;[jpeg] Error %d encoding video\n&quot;,sz);
-            goto  jpgCleanup;
-        }
-        // Ok now write our file...
-        {
-            FILE *f=ADM_fopen(filename,&quot;wb&quot;);
-            if(f)
-            {
-                fwrite(buffer,sz,1,f);
-                fclose(f);
-                result=true;
-            }else
-            {
-                printf(&quot;[saveAsJpeg] Cannot open %s for writing!\n&quot;,filename);
-
-            }
-       }
-
-// Cleanup
-jpgCleanup:
-    if(context)
-    {
-        avcodec_close (context);
-        ADM_dealloc (context);
-    }
-    context=NULL;
-    return result;
-}
+        }
+
+        fd = ADM_fopen (filename, &quot;wb&quot;);
+        if (!fd)
+        {
+                GUI_Error_HIG (QT_TR_NOOP(&quot;Something bad happened&quot;), NULL);
+                ADM_dealloc(out);
+                return 0;
+        }
+
+	// Bitmpap file header, not using tructure due to gcc padding it
+#ifdef ADM_BIG_ENDIAN
+	s16 = 0x424D;
+#else
+  	s16 = 0x4D42;
+#endif
+  	s32 = 14 + sizeof (bmph) + sz;
+#ifdef ADM_BIG_ENDIAN
+	#define SWAP32(x) x=R32(x)
+#else
+	#define SWAP32(x) ;
+#endif
+        SWAP32(s32);
+        fwrite (&amp;s16, 2, 1, fd);
+        fwrite (&amp;s32, 4, 1, fd);
+        s32 = 0;
+        fwrite (&amp;s32, 4, 1, fd);
+        s32 = 14 + sizeof (bmph);
+        SWAP32(s32);
+        fwrite (&amp;s32, 4, 1, fd);
+#ifdef ADM_BIG_ENDIAN
+	Endian_BitMapInfo(&amp;bmph);
+#endif
+        fwrite (&amp;bmph, sizeof (bmph), 1, fd);
+        fwrite (out, sz, 1, fd);
+
+        fclose(fd);
+        ADM_dealloc(out);
+        return 1;
+}
+/**
+    \fn saveAsJpg
+    \brief save current image into filename, into jpg format
+*/
+bool  ADMImage::saveAsJpg(const char *filename)
+{
+
+AVCodecContext   *context=NULL;   
+AVFrame          frame;     
+bool             result=false;
+AVCodec          *codec=NULL;
+uint8_t          buffer[_width*_height*4];
+int              sz=0,r=0;
+
+    context=avcodec_alloc_context();
+    if(!context) 
+    {
+        printf(&quot;[saveAsJpg] Cannot allocate context\n&quot;);
+        return false;
+    }
+    codec=avcodec_find_encoder(CODEC_ID_MJPEG);
+    if(!codec)
+    {
+        printf(&quot;[saveAsJpg] Cannot allocate codec\n&quot;);
+        goto jpgCleanup;
+    }
+    context-&gt;pix_fmt =PIX_FMT_YUV420P;
+    context-&gt;strict_std_compliance = -1;
+    context-&gt;time_base.den=1;
+    context-&gt;time_base.num=1;
+    context-&gt;width=_width;
+    context-&gt;height=_height;
+    r=avcodec_open(context, codec); 
+    if(r&lt;0)
+    {
+        printf(&quot;[saveAsJpg] Cannot mix codec and context\n&quot;);
+        ADM_dealloc (context);
+        return false;
+    }
+    // Setup our image &amp; stuff....
+        
+
+        frame.linesize[0] = GetPitch(PLANAR_Y); 
+        frame.linesize[1] = GetPitch(PLANAR_U); 
+        frame.linesize[2] = GetPitch(PLANAR_V); 
+        
+        frame.data[0] = GetWritePtr(PLANAR_Y);
+        frame.data[2] = GetWritePtr(PLANAR_U);
+        frame.data[1] = GetWritePtr(PLANAR_V);
+    // Grab a temp buffer
+    
+    // Encode!
+      context-&gt;flags |= CODEC_FLAG_QSCALE;
+      frame.quality = (int) floor (FF_QP2LAMBDA * 2+ 0.5);
+        
+        if ((sz = avcodec_encode_video (context, buffer, _width*_height*4, &amp;frame)) &lt; 0)
+        {
+            printf(&quot;[jpeg] Error %d encoding video\n&quot;,sz);
+            goto  jpgCleanup;
+        }
+        // Ok now write our file...
+        {
+            FILE *f=ADM_fopen(filename,&quot;wb&quot;);
+            if(f)
+            {
+                fwrite(buffer,sz,1,f);
+                fclose(f);
+                result=true;
+            }else
+            {
+                printf(&quot;[saveAsJpeg] Cannot open %s for writing!\n&quot;,filename);
+
+            }
+       }
+
+// Cleanup
+jpgCleanup:
+    if(context)
+    {
+        avcodec_close (context);
+        ADM_dealloc (context);
+    }
+    context=NULL;
+    return result;
+}

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/ADM_imageUtils.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/ADM_imageUtils.cpp	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/ADM_imageUtils.cpp	2010-12-27 19:46:51 UTC (rev 6865)
@@ -12,23 +12,14 @@
  *                                                                         *
  ***************************************************************************/
 
-
-
 #include &quot;ADM_default.h&quot;
 #include &quot;ADM_image.h&quot;
 #include &quot;ADM_bitmap.h&quot;
 #include &quot;avifmt.h&quot;
 #include &quot;avifmt2.h&quot;
 #include &quot;ADM_bitstream.h&quot;
-
 #include &quot;DIA_coreToolkit.h&quot;
 
-#if 0
-#include &quot;ADM_encoderConf.h&quot;
-#include &quot;ADM_codecs/ADM_codec.h&quot;
-#include &quot;ADM_lavcodec.h&quot;
-#include &quot;ADM_codecs/ADM_ffmpeg.h&quot;
-#endif
 #define QT_TR_NOOP(x) x // No translation in core*
 static uint8_t tinyAverage(uint8_t *dst, uint8_t *src1, uint8_t *src2,uint32_t l)
 {

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/ADM_pp.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/ADM_pp.cpp	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/ADM_pp.cpp	2010-12-27 19:46:51 UTC (rev 6865)
@@ -18,12 +18,12 @@
 //             4 Dering
 // strength between 0 and 5
 
-#include &quot;ADM_includeFfmpeg.h&quot;
-#include &quot;ADM_lavcodec.h&quot;
+#include &quot;ADM_default.h&quot;
+
 extern &quot;C&quot; {
-#include &quot;ADM_ffmpeg/libpostproc/postprocess.h&quot;
+#include &quot;libpostproc/postprocess.h&quot;
 }
-#include &quot;ADM_default.h&quot;
+
 #include &quot;ADM_image.h&quot;
 #include &quot;ADM_imageFlags.h&quot;
 #include &quot;ADM_pp.h&quot;

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/CMakeLists.txt	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/CMakeLists.txt	2010-12-27 19:46:51 UTC (rev 6865)
@@ -25,6 +25,6 @@
 	TARGET_LINK_LIBRARIES(ADM_coreImage6 -Wl,-read_only_relocs,suppress)
 ENDIF (APPLE)
 
-TARGET_LINK_LIBRARIES(ADM_coreImage6 ADM_core6 ADM_coreUI6 ADM_libswscale6 ADM_libpostproc6 ADM_coreUtils6)
-TARGET_LINK_LIBRARIES(ADM_coreImage6 ADM_libavcodec6 ADM_libavutil6 )
+TARGET_LINK_LIBRARIES(ADM_coreImage6 ADM_core6 ADM_coreUI6 ADM_libswscale ADM_libpostproc ADM_coreUtils6)
+TARGET_LINK_LIBRARIES(ADM_coreImage6 ADM_libavcodec ADM_libavutil)
 ADM_INSTALL_LIB(ADM_coreImage6)

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreMuxer/include/ADM_coreMuxerFfmpeg.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreMuxer/include/ADM_coreMuxerFfmpeg.h	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreMuxer/include/ADM_coreMuxerFfmpeg.h	2010-12-27 19:46:51 UTC (rev 6865)
@@ -22,14 +22,12 @@
 #include &quot;fourcc.h&quot;
 #include &quot;ADM_muxer.h&quot;
 #include &quot;ADM_muxerUtils.h&quot;
-#include &quot;ADM_lavcodec.h&quot;
+
 extern &quot;C&quot;
 {
     #include &quot;libavformat/avformat.h&quot;
 };
-#ifndef INT64_C
-#define INT64_C(x) (uint64_t)(x##LL)
-#endif
+
 /**
     \class muxerFFmpeg
 */

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreMuxer/src/ADM_coreMuxerFfmpeg.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreMuxer/src/ADM_coreMuxerFfmpeg.cpp	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreMuxer/src/ADM_coreMuxerFfmpeg.cpp	2010-12-27 19:46:51 UTC (rev 6865)
@@ -16,7 +16,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include &quot;ADM_includeFfmpeg.h&quot;
+
 #include &quot;ADM_default.h&quot;
 #include &quot;fourcc.h&quot;
 #include &quot;ADM_coreMuxerFfmpeg.h&quot;

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreMuxer/src/ADM_dynaMuxer.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreMuxer/src/ADM_dynaMuxer.cpp	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreMuxer/src/ADM_dynaMuxer.cpp	2010-12-27 19:46:51 UTC (rev 6865)
@@ -1,252 +1,255 @@
-/***************************************************************************
-                          ADM_coreMuxer.cpp  -  description
-                             -------------------
-    copyright            : (C) 2008 by mean
-    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#include &quot;ADM_includeFfmpeg.h&quot;
-#include &lt;vector&gt;
-#include &quot;ADM_default.h&quot;
-#include &quot;ADM_muxerInternal.h&quot;
-#include &quot;ADM_muxerProto.h&quot;
-void ADM_MuxersCleanup(void);
-
-ADM_muxer *ADM_muxerSpawn(uint32_t magic,const char *name);
-
-std::vector &lt;ADM_dynMuxer *&gt; ListOfMuxers;
-/**
-    \fn ADM_mux_configure
-    \brief 
-*/
-bool ADM_mux_configure(int index)
-{
-    ADM_assert(index&lt;ListOfMuxers.size());
-    return ListOfMuxers[index]-&gt;configure();
-}
-
-/**
-        \fn ADM_mx_getNbMuxers
-        \brief Returns the number of muxers plugins except one
-*/
-uint32_t ADM_mx_getNbMuxers(void)
-{
-    return ListOfMuxers.size();
-}
-/**
-    \fn ADM_mx_getDisplayName
-    \brief Returns display name for muxer i
-*/
-const char *ADM_mx_getDisplayName(uint32_t i)
-{
-    ADM_assert(i&lt;ListOfMuxers.size());
-    return ListOfMuxers[i]-&gt;displayName;
-}
-/**
-    \fn ADM_mx_getName
-    \brief Returns internal name for muxer i
-*/
-const char *ADM_mx_getName(uint32_t i)
-{
-    ADM_assert(i&lt;ListOfMuxers.size());
-    return ListOfMuxers[i]-&gt;name;
-}
-
-/**
-    \fn     ADM_dm_getDemuxerInfo
-    \brief  Get Infos about the demuxer #th plugin
-*/
-bool     ADM_mx_getMuxerInfo(int filter, const char **name, uint32_t *major,uint32_t *minor,uint32_t *patch)
-{
-    ADM_assert(filter&lt;ListOfMuxers.size());
-    ListOfMuxers[filter]-&gt;getVersion(major,minor,patch);
-    *name=ListOfMuxers[filter]-&gt;descriptor;
-    return true;
-}
-/**
-    \fn tryLoadingMuxerPlugin
-    \brief Try loading the file given as argument as a muxer
-
-*/
-#define Fail(x) {printf(&quot;%s:&quot;#x&quot;\n&quot;,file);goto er;}
-static bool tryLoadingMuxerPlugin(const char *file)
-{
-	ADM_dynMuxer *dll=new ADM_dynMuxer(file);
-    if(!dll-&gt;initialised) Fail(CannotLoad);
-    if(dll-&gt;apiVersion!=ADM_MUXER_API_VERSION) Fail(WrongApiVersion);
-
-    ListOfMuxers.push_back(dll); // Needed for cleanup. FIXME TODO Delete it.
-    printf(&quot;[Muxers] Registered filter %s as  %s\n&quot;,file,dll-&gt;descriptor);
-    return true;
-	// Fail!
-er:
-	delete dll;
-	return false;
-
-}
-/**
- * 	\fn ADM_mx_loadPlugins
- *  \brief load all audio device plugins
- */
-uint8_t ADM_mx_loadPlugins(const char *path)
-{
-#define MAX_EXTERNAL_FILTER 100
-// FIXME Factorize
-
-	char *files[MAX_EXTERNAL_FILTER];
-	uint32_t nbFile;
-
-	memset(files,0,sizeof(char *)*MAX_EXTERNAL_FILTER);
-	printf(&quot;[ADM_mx_plugin] Scanning directory %s\n&quot;,path);
-
-	if(!buildDirectoryContent(&amp;nbFile, path, files, MAX_EXTERNAL_FILTER, SHARED_LIB_EXT))
-	{
-		printf(&quot;[ADM_av_plugin] Cannot parse plugin\n&quot;);
-		return 0;
-	}
-
-	for(int i=0;i&lt;nbFile;i++)
-		tryLoadingMuxerPlugin(files[i]);
-
-	printf(&quot;[ADM_mx_plugin] Scanning done\n&quot;);
-
-	return 1;
-}
-/**
-    \fn ADM_mx_cleanup
-*/
-bool ADM_mx_cleanup(void) 
-{
-    ADM_MuxersCleanup();
-    return true;
-}
-/**
-    \fn ADM_mx_getExtraConf
-    \brief Retrieve extra configuration from current muxer
-*/
-bool ADM_mx_getExtraConf(int index,CONFcouple **c)
-{
-    *c=NULL;
-    if(index&gt;=ListOfMuxers.size())
-    {
-        ADM_error(&quot;Given index exceeds muxer list\n&quot;,index);
-        return false;
-    }
-    ADM_dynMuxer *mux=ListOfMuxers[index];
-    return mux-&gt;getConfiguration(c);
-    
-}
-/**
-    \fn ADM_mx_setExtraConf
-    \brief Set extra configuration from current muxer
-*/
-bool ADM_mx_setExtraConf(int index,CONFcouple *c)
-{
-    if(!c) return true;
-    if(index&gt;=ListOfMuxers.size())
-    {
-        ADM_error(&quot;Given index exceeds muxer list\n&quot;,index);
-        return false;
-    }
-    ADM_dynMuxer *mux=ListOfMuxers[index];
-    return mux-&gt;setConfiguration(c);
-    
-}
-/**
-        \fn ADM_MuxersCleanup
-        \brief Current device is no longer used, delete
-*/
-void ADM_MuxersCleanup(void)
-{
-        int nb=ListOfMuxers.size();
-        for(int i=0;i&lt;nb;i++)
-                {
-                        if(ListOfMuxers[i]) delete ListOfMuxers[i];
-                        ListOfMuxers[i]=NULL;
-                }
-}
-
-/**
-    \fn ADM_muxerIndexFromName
-    \brief return muxer index from name, -1 if error
-*/
-int ADM_MuxerIndexFromName(const char *name)
-{
-    int n=ListOfMuxers.size();
-    for(int i=0;i&lt;n;i++)
-    {
-        ADM_dynMuxer *mux=ListOfMuxers[i];
-        if(!strcasecmp(mux-&gt;name,name)) return i;
-    }
-    return -1;
-}
-/**
-    \fn ADM_MuxerSpawn
-    \brief Locate the correct demuxer and instantiate it
-
-*/
-ADM_muxer *ADM_MuxerSpawn(const char *name)
-{
-int found=-1;
-uint32_t score=0;
-uint32_t mark;
-    found=ADM_MuxerIndexFromName(name);
-    if(score &amp;&amp; found!=-1)
-    {
-        return ListOfMuxers[found]-&gt;createmuxer();
-    }
-    return NULL;
-}
-
-/**
-    \fn ADM_MuxerSpawnFromIndex
-    \brief Locate the correct demuxer and instantiate it
-
-*/
-ADM_muxer *ADM_MuxerSpawnFromIndex(int index)
-{
-    ADM_assert(index&lt;ListOfMuxers.size());
-    return ListOfMuxers[index]-&gt;createmuxer();
-}
-
-
-//___________________________________________
-extern &quot;C&quot;
-{
-    #include &quot;ADM_ffmpeg/libavformat/avformat.h&quot;
-    #include &quot;ADM_ffmpeg/libavformat/avio.h&quot; // to get regiter protocol
-};
-extern &quot;C&quot;
-{
-extern void movenc_init(void);
-extern void flvenc_init(void);
-extern void matroskaenc_init(void);
-extern void mpegenc_init(void);
-extern void mpegtsenc_init(void);
-}
-extern struct URLProtocol file_protocol ;
-/**
-
-
-*/
-void ADM_lavFormatInit(void)
-{
-    // Init lavformat
-
-        movenc_init();
-        flvenc_init();
-        matroskaenc_init();
-        mpegenc_init();
-        mpegtsenc_init();
-        av_register_protocol(&amp;file_protocol);
-}
-// EOF
-
+/***************************************************************************
+                          ADM_coreMuxer.cpp  -  description
+                             -------------------
+    copyright            : (C) 2008 by mean
+    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#include &lt;vector&gt;
+#include &quot;ADM_default.h&quot;
+#include &quot;ADM_muxerInternal.h&quot;
+#include &quot;ADM_muxerProto.h&quot;
+void ADM_MuxersCleanup(void);
+
+ADM_muxer *ADM_muxerSpawn(uint32_t magic,const char *name);
+
+std::vector &lt;ADM_dynMuxer *&gt; ListOfMuxers;
+/**
+    \fn ADM_mux_configure
+    \brief 
+*/
+bool ADM_mux_configure(int index)
+{
+    ADM_assert(index&lt;ListOfMuxers.size());
+    return ListOfMuxers[index]-&gt;configure();
+}
+
+/**
+        \fn ADM_mx_getNbMuxers
+        \brief Returns the number of muxers plugins except one
+*/
+uint32_t ADM_mx_getNbMuxers(void)
+{
+    return ListOfMuxers.size();
+}
+/**
+    \fn ADM_mx_getDisplayName
+    \brief Returns display name for muxer i
+*/
+const char *ADM_mx_getDisplayName(uint32_t i)
+{
+    ADM_assert(i&lt;ListOfMuxers.size());
+    return ListOfMuxers[i]-&gt;displayName;
+}
+/**
+    \fn ADM_mx_getName
+    \brief Returns internal name for muxer i
+*/
+const char *ADM_mx_getName(uint32_t i)
+{
+    ADM_assert(i&lt;ListOfMuxers.size());
+    return ListOfMuxers[i]-&gt;name;
+}
+
+/**
+    \fn     ADM_dm_getDemuxerInfo
+    \brief  Get Infos about the demuxer #th plugin
+*/
+bool     ADM_mx_getMuxerInfo(int filter, const char **name, uint32_t *major,uint32_t *minor,uint32_t *patch)
+{
+    ADM_assert(filter&lt;ListOfMuxers.size());
+    ListOfMuxers[filter]-&gt;getVersion(major,minor,patch);
+    *name=ListOfMuxers[filter]-&gt;descriptor;
+    return true;
+}
+/**
+    \fn tryLoadingMuxerPlugin
+    \brief Try loading the file given as argument as a muxer
+
+*/
+#define Fail(x) {printf(&quot;%s:&quot;#x&quot;\n&quot;,file);goto er;}
+static bool tryLoadingMuxerPlugin(const char *file)
+{
+	ADM_dynMuxer *dll=new ADM_dynMuxer(file);
+    if(!dll-&gt;initialised) Fail(CannotLoad);
+    if(dll-&gt;apiVersion!=ADM_MUXER_API_VERSION) Fail(WrongApiVersion);
+
+    ListOfMuxers.push_back(dll); // Needed for cleanup. FIXME TODO Delete it.
+    printf(&quot;[Muxers] Registered filter %s as  %s\n&quot;,file,dll-&gt;descriptor);
+    return true;
+	// Fail!
+er:
+	delete dll;
+	return false;
+
+}
+/**
+ * 	\fn ADM_mx_loadPlugins
+ *  \brief load all audio device plugins
+ */
+uint8_t ADM_mx_loadPlugins(const char *path)
+{
+#define MAX_EXTERNAL_FILTER 100
+// FIXME Factorize
+
+	char *files[MAX_EXTERNAL_FILTER];
+	uint32_t nbFile;
+
+	memset(files,0,sizeof(char *)*MAX_EXTERNAL_FILTER);
+	printf(&quot;[ADM_mx_plugin] Scanning directory %s\n&quot;,path);
+
+	if(!buildDirectoryContent(&amp;nbFile, path, files, MAX_EXTERNAL_FILTER, SHARED_LIB_EXT))
+	{
+		printf(&quot;[ADM_av_plugin] Cannot parse plugin\n&quot;);
+		return 0;
+	}
+
+	for(int i=0;i&lt;nbFile;i++)
+		tryLoadingMuxerPlugin(files[i]);
+
+	printf(&quot;[ADM_mx_plugin] Scanning done\n&quot;);
+
+	return 1;
+}
+/**
+    \fn ADM_mx_cleanup
+*/
+bool ADM_mx_cleanup(void) 
+{
+    ADM_MuxersCleanup();
+    return true;
+}
+/**
+    \fn ADM_mx_getExtraConf
+    \brief Retrieve extra configuration from current muxer
+*/
+bool ADM_mx_getExtraConf(int index,CONFcouple **c)
+{
+    *c=NULL;
+    if(index&gt;=ListOfMuxers.size())
+    {
+        ADM_error(&quot;Given index exceeds muxer list\n&quot;,index);
+        return false;
+    }
+    ADM_dynMuxer *mux=ListOfMuxers[index];
+    return mux-&gt;getConfiguration(c);
+    
+}
+/**
+    \fn ADM_mx_setExtraConf
+    \brief Set extra configuration from current muxer
+*/
+bool ADM_mx_setExtraConf(int index,CONFcouple *c)
+{
+    if(!c) return true;
+    if(index&gt;=ListOfMuxers.size())
+    {
+        ADM_error(&quot;Given index exceeds muxer list\n&quot;,index);
+        return false;
+    }
+    ADM_dynMuxer *mux=ListOfMuxers[index];
+    return mux-&gt;setConfiguration(c);
+    
+}
+/**
+        \fn ADM_MuxersCleanup
+        \brief Current device is no longer used, delete
+*/
+void ADM_MuxersCleanup(void)
+{
+        int nb=ListOfMuxers.size();
+        for(int i=0;i&lt;nb;i++)
+                {
+                        if(ListOfMuxers[i]) delete ListOfMuxers[i];
+                        ListOfMuxers[i]=NULL;
+                }
+}
+
+/**
+    \fn ADM_muxerIndexFromName
+    \brief return muxer index from name, -1 if error
+*/
+int ADM_MuxerIndexFromName(const char *name)
+{
+    int n=ListOfMuxers.size();
+    for(int i=0;i&lt;n;i++)
+    {
+        ADM_dynMuxer *mux=ListOfMuxers[i];
+        if(!strcasecmp(mux-&gt;name,name)) return i;
+    }
+    return -1;
+}
+/**
+    \fn ADM_MuxerSpawn
+    \brief Locate the correct demuxer and instantiate it
+
+*/
+ADM_muxer *ADM_MuxerSpawn(const char *name)
+{
+int found=-1;
+uint32_t score=0;
+uint32_t mark;
+    found=ADM_MuxerIndexFromName(name);
+    if(score &amp;&amp; found!=-1)
+    {
+        return ListOfMuxers[found]-&gt;createmuxer();
+    }
+    return NULL;
+}
+
+/**
+    \fn ADM_MuxerSpawnFromIndex
+    \brief Locate the correct demuxer and instantiate it
+
+*/
+ADM_muxer *ADM_MuxerSpawnFromIndex(int index)
+{
+    ADM_assert(index&lt;ListOfMuxers.size());
+    return ListOfMuxers[index]-&gt;createmuxer();
+}
+
+
+//___________________________________________
+extern &quot;C&quot;
+{
+    #include &quot;libavformat/avformat.h&quot;
+};
+
+void ADM_lavFormatInit(void)
+{
+	av_register_all();
+
+	// Make sure avformat is correctly configured
+	const char* formats[] = {&quot;mpegts&quot;, &quot;dvd&quot;, &quot;vcd&quot;, &quot;svcd&quot;, &quot;mp4&quot;, &quot;psp&quot;, &quot;flv&quot;, &quot;matroska&quot;};
+	AVOutputFormat *avfmt;
+
+	for (int i = 0; i &lt; 8; i++)
+	{
+		avfmt = av_guess_format(formats[i], NULL, NULL);
+
+		if (avfmt == NULL)
+		{
+			printf(&quot;Error: %s muxer isn't registered\n&quot;, formats[i]);
+			ADM_assert(0);
+		}
+	}
+
+	URLProtocol *up = av_protocol_next(NULL);
+
+	if (strcmp(up-&gt;name, &quot;file&quot;) != 0)
+	{
+		printf(&quot;Error: file protocol isn't registered\n&quot;);
+		ADM_assert(0);
+	}
+}
+// EOF
+

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreMuxer/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreMuxer/src/CMakeLists.txt	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreMuxer/src/CMakeLists.txt	2010-12-27 19:46:51 UTC (rev 6865)
@@ -8,7 +8,7 @@
 #*************************************************
 ADD_LIBRARY(ADM_coreMuxer6 SHARED ${ADMcoreMuxer_SRCS})
 INCLUDE_DIRECTORIES(${CMAKE_SOURCE_DIR}/avidemux/ADM_coreAudio/include)
-INCLUDE_DIRECTORIES(${CMAKE_SOURCE_DIR}/avidemux/ADM_libraries/ADM_ffmpeg)
-TARGET_LINK_LIBRARIES(ADM_coreMuxer6 ADM_coreImage6 ADM_coreAudio6 ADM_core6 ADM_libavcodec6 ADM_libavformat6 ADM_libavutil6 ADM_coreUtils6)
 
+TARGET_LINK_LIBRARIES(ADM_coreMuxer6 ADM_coreImage6 ADM_coreAudio6 ADM_core6 ADM_libavcodec ADM_libavformat ADM_libavutil ADM_coreUtils6)
+
 ADM_INSTALL_LIB(ADM_coreMuxer6)

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/include/ADM_coreCodecMapping.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/include/ADM_coreCodecMapping.h	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/include/ADM_coreCodecMapping.h	2010-12-27 19:46:51 UTC (rev 6865)
@@ -18,7 +18,7 @@
 #ifndef ADM_CORE_CODEC_MAPPING_H
 #define ADM_CORE_CODEC_MAPPING_H
 extern &quot;C&quot; {
-#include &quot;ADM_lavcodec.h&quot;
+#include &quot;libavcodec/avcodec.h&quot;
 }
 
 typedef struct

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_coreCodecMapping.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_coreCodecMapping.cpp	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_coreCodecMapping.cpp	2010-12-27 19:46:51 UTC (rev 6865)
@@ -15,7 +15,6 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include &quot;ADM_includeFfmpeg.h&quot;
 
 #include &quot;ADM_default.h&quot;
 #include &quot;ADM_coreCodecMapping.h&quot;

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_getbits.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_getbits.cpp	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_getbits.cpp	2010-12-27 19:46:51 UTC (rev 6865)
@@ -12,7 +12,6 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include &quot;ADM_includeFfmpeg.h&quot;
 
 #include &quot;ADM_default.h&quot;
 
@@ -20,16 +19,14 @@
 #define ADM_getbits_H
 extern &quot;C&quot;
 {
-#define ADM_NO_CONFIG_H
-#include &quot;ADM_ffmpeg/libavutil/common.h&quot;
-#include &quot;ADM_ffmpeg/libavutil/bswap.h&quot;
+#include &quot;libavutil/common.h&quot;
+#include &quot;libavutil/bswap.h&quot;
 #ifndef INT_MAX
 #define INT_MAX (0x7FFFFFFF)
 #endif
-#include &quot;ADM_ffmpeg/ffmpeg_config/config.h&quot;
-#include &quot;ADM_ffmpeg/libavutil/internal.h&quot;
-#include &quot;ADM_ffmpeg/libavcodec/get_bits.h&quot;
-#include &quot;ADM_ffmpeg/libavcodec/golomb.h&quot;
+#include &quot;libavutil/avconfig.h&quot;
+#include &quot;libavcodec/get_bits.h&quot;
+#include &quot;libavcodec/golomb.h&quot;
 }
 #undef printf
 #undef sprintf

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_infoExtractorH264.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_infoExtractorH264.cpp	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_infoExtractorH264.cpp	2010-12-27 19:46:51 UTC (rev 6865)
@@ -12,8 +12,8 @@
  *                                                                         *
  ***************************************************************************/
 
+#include &quot;ADM_default.h&quot;
 
-#include &quot;ADM_includeFfmpeg.h&quot;
 extern &quot;C&quot;
 {
 #include &quot;libavcodec/parser.h&quot;
@@ -21,7 +21,7 @@
 #include &quot;libavcodec/ff_spsinfo.h&quot;
 extern int ff_h264_info(AVCodecParserContext *parser,ffSpsInfo *ndo);
 }
-#include &quot;ADM_default.h&quot;
+
 #include &quot;ADM_Video.h&quot;
 
 #include &quot;fourcc.h&quot;

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_paramList.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_paramList.cpp	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_paramList.cpp	2010-12-27 19:46:51 UTC (rev 6865)
@@ -17,7 +17,7 @@
  *   the Free Software Foundation; either version 2 of the License, or     *
  *   (at your option) any later version.                                   *
  ***************************************************************************/
-#include &quot;ADM_includeFfmpeg.h&quot;
+
 #include &quot;ADM_default.h&quot;
 #include &quot;ADM_paramList.h&quot;
 #include &lt;stddef.h&gt;

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/CMakeLists.txt	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/CMakeLists.txt	2010-12-27 19:46:51 UTC (rev 6865)
@@ -18,7 +18,7 @@
 
 ADD_LIBRARY(ADM_coreUtils6 SHARED ${ADM_coreUtils_SRCS})
 
-TARGET_LINK_LIBRARIES(ADM_coreUtils6 ADM_core6 ADM_coreUI6 ADM_libavutil6 ADM_libavcodec6 ${LIBXML2_LIBRARIES})
+TARGET_LINK_LIBRARIES(ADM_coreUtils6 ADM_core6 ADM_coreUI6 ADM_libavutil ADM_libavcodec ${LIBXML2_LIBRARIES})
 
 
 ADD_SOURCE_CFLAGS(prefs.cpp -I${LIBXML2_INCLUDE_DIR} ${LIBXML2_DEFINITIONS})

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoCodec/include/ADM_codecFFsimple.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoCodec/include/ADM_codecFFsimple.h	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoCodec/include/ADM_codecFFsimple.h	2010-12-27 19:46:51 UTC (rev 6865)
@@ -19,10 +19,12 @@
  ***************************************************************************/
 #ifndef ADM_CODEC_FF_SIMPLE
 #define ADM_CODEC_FF_SIMPLE
+#include &quot;ADM_default.h&quot;
+
 extern &quot;C&quot; {
-#include &quot;ADM_lavcodec.h&quot;
+#include &quot;libavcodec/avcodec.h&quot;
 }
-#include &quot;ADM_default.h&quot;
+
 #include &quot;ADM_codec.h&quot;
 #include &quot;ADM_ffmp43.h&quot;
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoCodec/include/ADM_ffmp43.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoCodec/include/ADM_ffmp43.h	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoCodec/include/ADM_ffmp43.h	2010-12-27 19:46:51 UTC (rev 6865)
@@ -1,144 +1,148 @@
-/***************************************************************************
-                          ADM_ffmp43.h  -  description
-                             -------------------
-                             
-	Mpeg4 ****decoder******** using ffmpeg
-	                              
-    begin                : Wed Sep 25 2002
-    copyright            : (C) 2002 by mean
-    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#ifndef ADM_FFMP43_H
-#define ADM_FFMP43_H
-
-#include &quot;ADM_lavcodec.h&quot;
-
-/**
-    \class decoderFF
-    \brief Base class for lavcodec based decoder
-*/
-class decoderFF:public decoders
-{
-protected:
-
-  int codecId;
-  uint8_t _refCopy;
-  AVCodecContext *_context;
-  AVFrame _frame;
-  uint8_t *_internalBuffer;
-  uint8_t _allowNull;
-  uint32_t _swapUV;
-  uint32_t frameType (void);
-  uint8_t clonePic (AVFrame * src, ADMImage * out);
-  void decoderMultiThread ();
-  uint32_t _showMv;
-  uint32_t _gmc;
-  uint32_t _usingMT;
-public:
-
-    decoderFF (uint32_t w, uint32_t h,uint32_t fcc, uint32_t extraDataLen, uint8_t *extraData,uint32_t bpp);
-    virtual ~ decoderFF ();
-  virtual bool dontcopy (void)
-  {
-    return true;
-  }
-  virtual bool uncompress (ADMCompressedImage * in, ADMImage * out);
-  virtual bool setParam (void);
-  virtual bool bFramePossible (void)
-  {
-    return false;
-  }
-  virtual bool decodeHeaderOnly (void);
-  virtual bool decodeFull (void);
-//  virtual uint32_t getSpecificMpeg4Info (void);
-  virtual uint8_t getPARWidth (void);
-  virtual uint8_t getPARHeight (void);
-  virtual bool    flush(void);
-  virtual const char *getDecoderName(void) {return &quot;Lavcodec&quot;;}
-};
-
-class decoderFFDiv3:public decoderFF
-{
-protected:
-public:
-  decoderFFDiv3 (uint32_t w, uint32_t h,uint32_t fcc, uint32_t extraDataLen, uint8_t *extraData,uint32_t bpp);
-};
-
-class decoderFFMpeg4:public decoderFF
-{
-protected:
-public:
-        decoderFFMpeg4 (uint32_t w, uint32_t h,uint32_t fcc, uint32_t extraDataLen, uint8_t *extraData,uint32_t bpp);
-  bool uncompress (ADMCompressedImage * in, ADMImage * out);
-  // mpeg4 can have B-frame
-  virtual bool bFramePossible (void)
-  {
-    return 1;
-  }
-};
-class decoderFFMpeg12:public decoderFF
-{
-protected:
-public:
-  decoderFFMpeg12 (uint32_t w, uint32_t h,uint32_t fcc, uint32_t extraDataLen, uint8_t *extraData,uint32_t bpp);
-  // mpeg1/2 can have B-frame
-  virtual bool bFramePossible (void)
-  {
-    return 1;
-  }
-
-};
-
-class decoderFFDV:public decoderFF
-{
-protected:
-public:
-  decoderFFDV (uint32_t w, uint32_t h,uint32_t fcc, uint32_t extraDataLen, uint8_t *extraData,uint32_t bpp);
-};
-
-class decoderFFH264:public decoderFF
-{
-protected:
-  uint32_t _lowDelay;
-public:
-  decoderFFH264 (uint32_t w, uint32_t h,uint32_t fcc, uint32_t extraDataLen, uint8_t *extraData,uint32_t bpp);
-  virtual bool bFramePossible (void)
-  {
-      return true;
-  }
-  bool   uncompress (ADMCompressedImage * in, ADMImage * out);
-};
-
-class decoderFFhuff:public decoderFF
-{
-protected:
-public:
-  decoderFFhuff (uint32_t w, uint32_t h,uint32_t fcc, uint32_t extraDataLen, uint8_t *extraData,uint32_t bpp);
-};
-
-class decoderFF_ffhuff:public decoderFF
-{
-protected:
-public:
-  decoderFF_ffhuff (uint32_t w, uint32_t h,uint32_t fcc, uint32_t extraDataLen, uint8_t *extraData,uint32_t bpp);
-};
-
+/***************************************************************************
+                          ADM_ffmp43.h  -  description
+                             -------------------
+                             
+	Mpeg4 ****decoder******** using ffmpeg
+	                              
+    begin                : Wed Sep 25 2002
+    copyright            : (C) 2002 by mean
+    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#ifndef ADM_FFMP43_H
+#define ADM_FFMP43_H
+
+extern &quot;C&quot; {
+#include &quot;libavcodec/avcodec.h&quot;
+}
+
+#include &quot;ADM_codec.h&quot;
+
+/**
+    \class decoderFF
+    \brief Base class for lavcodec based decoder
+*/
+class decoderFF:public decoders
+{
+protected:
+
+  int codecId;
+  uint8_t _refCopy;
+  AVCodecContext *_context;
+  AVFrame _frame;
+  uint8_t *_internalBuffer;
+  uint8_t _allowNull;
+  uint32_t _swapUV;
+  uint32_t frameType (void);
+  uint8_t clonePic (AVFrame * src, ADMImage * out);
+  void decoderMultiThread ();
+  uint32_t _showMv;
+  uint32_t _gmc;
+  uint32_t _usingMT;
+public:
+
+    decoderFF (uint32_t w, uint32_t h,uint32_t fcc, uint32_t extraDataLen, uint8_t *extraData,uint32_t bpp);
+    virtual ~ decoderFF ();
+  virtual bool dontcopy (void)
+  {
+    return true;
+  }
+  virtual bool uncompress (ADMCompressedImage * in, ADMImage * out);
+  virtual bool setParam (void);
+  virtual bool bFramePossible (void)
+  {
+    return false;
+  }
+  virtual bool decodeHeaderOnly (void);
+  virtual bool decodeFull (void);
+//  virtual uint32_t getSpecificMpeg4Info (void);
+  virtual uint8_t getPARWidth (void);
+  virtual uint8_t getPARHeight (void);
+  virtual bool    flush(void);
+  virtual const char *getDecoderName(void) {return &quot;Lavcodec&quot;;}
+};
+
+class decoderFFDiv3:public decoderFF
+{
+protected:
+public:
+  decoderFFDiv3 (uint32_t w, uint32_t h,uint32_t fcc, uint32_t extraDataLen, uint8_t *extraData,uint32_t bpp);
+};
+
+class decoderFFMpeg4:public decoderFF
+{
+protected:
+public:
+        decoderFFMpeg4 (uint32_t w, uint32_t h,uint32_t fcc, uint32_t extraDataLen, uint8_t *extraData,uint32_t bpp);
+  bool uncompress (ADMCompressedImage * in, ADMImage * out);
+  // mpeg4 can have B-frame
+  virtual bool bFramePossible (void)
+  {
+    return 1;
+  }
+};
+class decoderFFMpeg12:public decoderFF
+{
+protected:
+public:
+  decoderFFMpeg12 (uint32_t w, uint32_t h,uint32_t fcc, uint32_t extraDataLen, uint8_t *extraData,uint32_t bpp);
+  // mpeg1/2 can have B-frame
+  virtual bool bFramePossible (void)
+  {
+    return 1;
+  }
+
+};
+
+class decoderFFDV:public decoderFF
+{
+protected:
+public:
+  decoderFFDV (uint32_t w, uint32_t h,uint32_t fcc, uint32_t extraDataLen, uint8_t *extraData,uint32_t bpp);
+};
+
+class decoderFFH264:public decoderFF
+{
+protected:
+  uint32_t _lowDelay;
+public:
+  decoderFFH264 (uint32_t w, uint32_t h,uint32_t fcc, uint32_t extraDataLen, uint8_t *extraData,uint32_t bpp);
+  virtual bool bFramePossible (void)
+  {
+      return true;
+  }
+  bool   uncompress (ADMCompressedImage * in, ADMImage * out);
+};
+
+class decoderFFhuff:public decoderFF
+{
+protected:
+public:
+  decoderFFhuff (uint32_t w, uint32_t h,uint32_t fcc, uint32_t extraDataLen, uint8_t *extraData,uint32_t bpp);
+};
+
+class decoderFF_ffhuff:public decoderFF
+{
+protected:
+public:
+  decoderFF_ffhuff (uint32_t w, uint32_t h,uint32_t fcc, uint32_t extraDataLen, uint8_t *extraData,uint32_t bpp);
+};
+
 class decoderFFPng : public decoderFF
 {
 public:
 	decoderFFPng(uint32_t w, uint32_t h, uint32_t fcc, uint32_t extraDataLen, uint8_t *extraData, uint32_t bpp);
-};
-
-#endif
-
-// EOF
-
+};
+
+#endif
+
+// EOF
+

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoCodec/src/ADM_codecSearch.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoCodec/src/ADM_codecSearch.cpp	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoCodec/src/ADM_codecSearch.cpp	2010-12-27 19:46:51 UTC (rev 6865)
@@ -18,11 +18,12 @@
  *                                                                         *
  ***************************************************************************/
 
+#include &quot;ADM_default.h&quot;
+
 extern &quot;C&quot;
 {
-#include &quot;ADM_lavcodec.h&quot;
+#include &quot;libavcodec/avcodec.h&quot;
 };
-#include &quot;ADM_default.h&quot;
 
 #ifdef BIG_ENDIAN
 #undef BIG_ENDIAN

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoCodec/src/ADM_ffmp43.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoCodec/src/ADM_ffmp43.cpp	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoCodec/src/ADM_ffmp43.cpp	2010-12-27 19:46:51 UTC (rev 6865)
@@ -13,15 +13,9 @@
  *                                                                         *
  ***************************************************************************/
 
-extern &quot;C&quot; {
-#include &quot;ADM_lavcodec.h&quot;
-}
 #include &quot;ADM_default.h&quot;
-
-#include &quot;ADM_codec.h&quot;
 #include &quot;ADM_ffmp43.h&quot;
 #include &quot;DIA_coreToolkit.h&quot;
-//#include &quot;ADM_videoInfoExtractor.h&quot;
 
 extern int ADM_cpu_num_processors(void);
 extern &quot;C&quot;
@@ -583,7 +577,6 @@
 }
 
 //***************
-extern uint8_t  lavformat_init(void);
 extern void     avcodec_init(void );
 extern  void    avcodec_register_all(void );
 extern &quot;C&quot;
@@ -598,8 +591,8 @@
 {
     avcodec_init();
     avcodec_register_all();
-//BAZOOKA    lavformat_init();
     av_log_set_callback(adm_lavLogCallback);
+
 #ifdef ADM_DEBUG
   //  av_log_set_level(AV_LOG_DEBUG);
 #endif

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoCodec/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoCodec/src/CMakeLists.txt	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoCodec/src/CMakeLists.txt	2010-12-27 19:46:51 UTC (rev 6865)
@@ -14,9 +14,9 @@
                                           ADM_coreImage6 
                                           ADM_coreUI6
                                           ADM_coreUtils6
-                                          ADM_libavcodec6
-                                          ADM_libavformat6
-                                          ADM_libavutil6)
+                                          ADM_libavcodec
+                                          ADM_libavformat
+                                          ADM_libavutil)
 ADM_INSTALL_LIB(ADM_coreVideoCodec6)
 
 REMOVE_DEFINITIONS(-DHAVE_CONFIG_H)

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/include/ADM_coreVideoEncoderFFmpeg_param.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/include/ADM_coreVideoEncoderFFmpeg_param.h	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/include/ADM_coreVideoEncoderFFmpeg_param.h	2010-12-27 19:46:51 UTC (rev 6865)
@@ -22,7 +22,8 @@
 #define ADM_AVCODEC_SETTING_VERSION 2
 extern &quot;C&quot; 
 {
-#include &quot;ADM_lavcodec.h&quot;
+#include &quot;libavcodec/avcodec.h&quot;
 }
+
 #include &quot;FFcodecContext.h&quot;
 #endif

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/ADM_coreVideoEncoder.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/ADM_coreVideoEncoder.cpp	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/ADM_coreVideoEncoder.cpp	2010-12-27 19:46:51 UTC (rev 6865)
@@ -15,13 +15,15 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include &quot;ADM_includeFfmpeg.h&quot;
+
 #include &quot;ADM_default.h&quot;
 #include &quot;ADM_coreVideoEncoder.h&quot;
+
 extern &quot;C&quot; 
 {
-#include &quot;ADM_lavcodec.h&quot;
+#include &quot;libavcodec/avcodec.h&quot;
 }
+
 /**
     \fn ADM_coreVideoEncoder
 */                          

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/CMakeLists.txt	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoEncoder/src/CMakeLists.txt	2010-12-27 19:46:51 UTC (rev 6865)
@@ -4,7 +4,7 @@
 )
 
 ADD_LIBRARY(ADM_coreVideoEncoder6 SHARED ${ADM_CoreVideoEncoder_SRCS})
-TARGET_LINK_LIBRARIES(ADM_coreVideoEncoder6 ADM_core6 ADM_coreUtils6 ADM_coreImage6 ADM_libavcodec6 ADM_libavutil6 )
+TARGET_LINK_LIBRARIES(ADM_coreVideoEncoder6 ADM_core6 ADM_coreUtils6 ADM_coreImage6 ADM_libavcodec ADM_libavutil)
 
 ADM_INSTALL_LIB(ADM_coreVideoEncoder6)
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/src/DIA_flyDialog.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/src/DIA_flyDialog.cpp	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/src/DIA_flyDialog.cpp	2010-12-27 19:46:51 UTC (rev 6865)
@@ -12,16 +12,14 @@
 *                                                                         *
 ***************************************************************************///
 
-#include &quot;ADM_includeFfmpeg.h&quot;
 #include &quot;ADM_default.h&quot;
-
 #include &quot;ADM_coreVideoFilter.h&quot;
 #define ADM_FLY_INTERNAL
 #include &quot;DIA_flyDialog.h&quot;
 #include &quot;ADM_assert.h&quot;
 
 extern &quot;C&quot; {
-#include &quot;ADM_ffmpeg/libavcodec/avcodec.h&quot;
+#include &quot;libavcodec/avcodec.h&quot;
 }
 /**
     \fn    ADM_flyDialog

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/CMakeLists.txt	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/CMakeLists.txt	2010-12-27 19:46:51 UTC (rev 6865)
@@ -23,12 +23,6 @@
 	checkVDPAU()
 ENDIF(NOT CROSS)
 
-########################################
-# YASM
-########################################
-include(FindYasm)
-admFindYasm()
-
 #########################################
 # Debug Summary
 ########################################
@@ -51,6 +45,11 @@
 include(admCoreIncludes)
 
 ########################################
+# Build FFmpeg
+########################################
+include(admFFmpegBuild)
+
+########################################
 # Directories to build
 ########################################
 ADD_SUBDIRECTORY(ADM_core)
@@ -69,7 +68,6 @@
 ADD_SUBDIRECTORY(ADM_coreUtils)
 ADD_SUBDIRECTORY(ADM_coreVideoEncoder)
 ADD_SUBDIRECTORY(ADM_coreVideoFilter)
-ADD_SUBDIRECTORY(ADM_ffmpeg)
 ADD_SUBDIRECTORY(ADM_coreJobs)
 ADD_SUBDIRECTORY(ADM_coreSocket)
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_ima_adpcm/ADM_ad_ima_adpcm.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_ima_adpcm/ADM_ad_ima_adpcm.cpp	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_ima_adpcm/ADM_ad_ima_adpcm.cpp	2010-12-27 19:46:51 UTC (rev 6865)
@@ -32,8 +32,8 @@
  ***************************************************************************/
 #include &quot;ADM_default.h&quot;
 #include &lt;math.h&gt;
-#define ADM_NO_CONFIG_H
-#include &quot;ADM_ffmpeg/libavutil/bswap.h&quot;
+
+#include &quot;libavutil/bswap.h&quot;
 #include &quot;ADM_ad_plugin.h&quot;
 
 /**

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_lav/ADM_ad_lav.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_lav/ADM_ad_lav.cpp	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_lav/ADM_ad_lav.cpp	2010-12-27 19:46:51 UTC (rev 6865)
@@ -13,8 +13,13 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include &quot;ADM_lavcodec.h&quot;
+
 #include &quot;ADM_default.h&quot;
+
+extern &quot;C&quot; {
+#include &quot;libavcodec/avcodec.h&quot;
+}
+
 #include &quot;ADM_ad_plugin.h&quot;
 #include &quot;fourcc.h&quot;
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_lav/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_lav/CMakeLists.txt	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_lav/CMakeLists.txt	2010-12-27 19:46:51 UTC (rev 6865)
@@ -1,10 +1,9 @@
+INCLUDE(ad_plugin)
 
-	INCLUDE(ad_plugin)
-	
-	SET(ADM_ad_lav_SRCS ADM_ad_lav.cpp)
+SET(ADM_ad_lav_SRCS ADM_ad_lav.cpp)
 
-	ADD_LIBRARY(ADM_ad_lav SHARED ${ADM_ad_lav_SRCS})
-	TARGET_LINK_LIBRARIES(ADM_ad_lav ADM_coreUtils6 ADM_libavcodec6 ADM_libavutil6)
+ADD_LIBRARY(ADM_ad_lav SHARED ${ADM_ad_lav_SRCS})
+TARGET_LINK_LIBRARIES(ADM_ad_lav ADM_coreUtils6 ADM_libavcodec ADM_libavutil)
 
-	INIT_AUDIO_PLUGIN(ADM_ad_lav)
-	INSTALL_AUDIODECODER(ADM_ad_lav)
+INIT_AUDIO_PLUGIN(ADM_ad_lav)
+INSTALL_AUDIODECODER(ADM_ad_lav)
\ No newline at end of file

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_ms_adpcm/ADM_ad_ms_adpcm.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_ms_adpcm/ADM_ad_ms_adpcm.cpp	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_ms_adpcm/ADM_ad_ms_adpcm.cpp	2010-12-27 19:46:51 UTC (rev 6865)
@@ -71,7 +71,6 @@
 
 
 #include &quot;ADM_default.h&quot;
-#define ADM_NO_CONFIG_H
 #include &quot;ADM_coreAudio.h&quot;
 #include &quot;ADM_audiocodec.h&quot;
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lavcodec/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lavcodec/CMakeLists.txt	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lavcodec/CMakeLists.txt	2010-12-27 19:46:51 UTC (rev 6865)
@@ -1,12 +1,11 @@
 	INCLUDE(ae_plugin)
-
-        include_directories(.)
+	include_directories(.)
 #====
 	SET(ADM_ae_lav_mp2_SRCS audioencoder_lavcodec.cpp)
 
 	ADD_LIBRARY(ADM_ae_lav_mp2 SHARED ${ADM_ae_lav_mp2_SRCS})
 	ADD_TARGET_CFLAGS(ADM_ae_lav_mp2 &quot;-DADM_AE_SET='\&quot;ADM_lav_mp2.h\&quot;'&quot;)
-	TARGET_LINK_LIBRARIES(ADM_ae_lav_mp2  ADM_libavcodec6)
+	TARGET_LINK_LIBRARIES(ADM_ae_lav_mp2  ADM_libavcodec)
 
 	INIT_AUDIO_ENCODER(ADM_ae_lav_mp2)
 	INSTALL_AUDIOENCODER(ADM_ae_lav_mp2)
@@ -15,7 +14,7 @@
 
 	ADD_LIBRARY(ADM_ae_lav_ac3 SHARED ${ADM_ae_lav_ac3_SRCS})
 	ADD_TARGET_CFLAGS(ADM_ae_lav_ac3 &quot;-DADM_AE_SET='\&quot;ADM_lav_ac3.h\&quot;'&quot;)
-	TARGET_LINK_LIBRARIES(ADM_ae_lav_ac3  ADM_libavcodec6)
+	TARGET_LINK_LIBRARIES(ADM_ae_lav_ac3  ADM_libavcodec)
 
 	INIT_AUDIO_ENCODER(ADM_ae_lav_ac3)
 	INSTALL_AUDIOENCODER(ADM_ae_lav_ac3)
@@ -24,9 +23,8 @@
 
 	ADD_LIBRARY(ADM_ae_lav_aac SHARED ${ADM_ae_lav_aac_SRCS})
 	ADD_TARGET_CFLAGS(ADM_ae_lav_aac &quot;-DADM_AE_SET='\&quot;ADM_lav_aac.h\&quot;'&quot;)
-	TARGET_LINK_LIBRARIES(ADM_ae_lav_aac  ADM_libavcodec6)
+	TARGET_LINK_LIBRARIES(ADM_ae_lav_aac  ADM_libavcodec)
 
 	INIT_AUDIO_ENCODER(ADM_ae_lav_aac)
 	INSTALL_AUDIOENCODER(ADM_ae_lav_aac)
-#====
-
+#====
\ No newline at end of file

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lavcodec/audioencoder_lavcodec.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lavcodec/audioencoder_lavcodec.cpp	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lavcodec/audioencoder_lavcodec.cpp	2010-12-27 19:46:51 UTC (rev 6865)
@@ -16,17 +16,17 @@
  *                                                                         *
  ***************************************************************************/
 
-#include &quot;ADM_includeFfmpeg.h&quot;
 #include &quot;ADM_default.h&quot;
+
+extern &quot;C&quot; {
+#include &quot;libavcodec/avcodec.h&quot;
+}
+
 #include &quot;DIA_factory.h&quot;
 #include &quot;DIA_coreToolkit.h&quot;
 #include &quot;audioencoder.h&quot;
 #include &quot;audioencoderInternal.h&quot;
-//
 
-
-#include &quot;ADM_lavcodec.h&quot;
-
 #include ADM_AE_SET
 
 #include &quot;audioencoder_lavcodec.h&quot;

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Asf/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Asf/CMakeLists.txt	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Asf/CMakeLists.txt	2010-12-27 19:46:51 UTC (rev 6865)
@@ -10,9 +10,5 @@
 
 ADD_LIBRARY(ADM_dm_asf SHARED ${ADM_asf_SRCS})
 
-#TARGET_LINK_LIBRARIES(ADM_dm_asf ADM_libavutil6)
-
-INCLUDE_DIRECTORIES(&quot;${AVIDEMUX_SOURCE_DIR}/avidemux/ADM_libraries/ADM_ffmpeg&quot;)
-
 INIT_DEMUXER(ADM_dm_asf)
 INSTALL_DEMUXER(ADM_dm_asf)

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Flv/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Flv/CMakeLists.txt	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Flv/CMakeLists.txt	2010-12-27 19:46:51 UTC (rev 6865)
@@ -7,9 +7,7 @@
 
 ADD_LIBRARY(ADM_dm_flv SHARED ${ADM_flv_SRCS})
 
-TARGET_LINK_LIBRARIES(ADM_dm_flv ADM_libavutil6)
+TARGET_LINK_LIBRARIES(ADM_dm_flv ADM_libavutil)
 
-INCLUDE_DIRECTORIES(&quot;${AVIDEMUX_SOURCE_DIR}/avidemux/ADM_libraries/ADM_ffmpeg&quot;)
-
 INIT_DEMUXER(ADM_dm_flv)
 INSTALL_DEMUXER(ADM_dm_flv)

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Matroska/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Matroska/CMakeLists.txt	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Matroska/CMakeLists.txt	2010-12-27 19:46:51 UTC (rev 6865)
@@ -11,7 +11,7 @@
 )
 ADD_LIBRARY(ADM_dm_matroska SHARED ${ADM_matroska_SRCS})
 
-TARGET_LINK_LIBRARIES(ADM_dm_matroska ADM_libavutil6 ADM_audioParser6)
+TARGET_LINK_LIBRARIES(ADM_dm_matroska ADM_libavutil ADM_audioParser6)
 
 INIT_DEMUXER(ADM_dm_matroska)
 INSTALL_DEMUXER(ADM_dm_matroska)

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/CMakeLists.txt	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/CMakeLists.txt	2010-12-27 19:46:51 UTC (rev 6865)
@@ -17,11 +17,11 @@
 )
 
 ADD_LIBRARY(ADM_dm_ts SHARED ${ADM_ts_SRCS})
-TARGET_LINK_LIBRARIES(ADM_dm_ts ADM_coreDemuxerMpeg6 ADM_audioParser6  ADM_libavutil6 ADM_libavcodec6 ADM_libavformat6)
+TARGET_LINK_LIBRARIES(ADM_dm_ts ADM_coreDemuxerMpeg6 ADM_audioParser6  ADM_libavutil ADM_libavcodec ADM_libavformat)
+
 # For ffmpeg includes
 INCLUDE_DIRECTORIES(&quot;${AVIDEMUX_SOURCE_DIR}/avidemux/&quot;) 
 INCLUDE_DIRECTORIES(&quot;${AVIDEMUX_SOURCE_DIR}/avidemux/ADM_libraries&quot;) 
-INCLUDE_DIRECTORIES(&quot;${AVIDEMUX_SOURCE_DIR}/avidemux/ADM_libraries/ADM_ffmpeg&quot;) 
 INCLUDE_DIRECTORIES(&quot;${AVIDEMUX_SOURCE_DIR}/avidemux/ADM_coreDemuxerMpeg/include&quot;)
 
 INIT_DEMUXER(ADM_dm_ts)

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerDummy/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerDummy/CMakeLists.txt	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerDummy/CMakeLists.txt	2010-12-27 19:46:51 UTC (rev 6865)
@@ -6,9 +6,5 @@
 
 ADD_LIBRARY(ADM_mx_dummy SHARED ${ADM_dummy_SRCS})
 
-#TARGET_LINK_LIBRARIES(ADM_dm_flv ADM_libavutil)
-
-INCLUDE_DIRECTORIES(&quot;${AVIDEMUX_SOURCE_DIR}/avidemux/ADM_libraries/ADM_ffmpeg&quot;)
-
 INIT_MUXER(ADM_mx_dummy)
 INSTALL_MUXER(ADM_mx_dummy)

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerFlv/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerFlv/CMakeLists.txt	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerFlv/CMakeLists.txt	2010-12-27 19:46:51 UTC (rev 6865)
@@ -6,8 +6,7 @@
 )
 
 ADD_LIBRARY(ADM_mx_flv SHARED ${ADM_flv_SRCS})
-TARGET_LINK_LIBRARIES(ADM_mx_flv  ADM_libavutil6 ADM_libavformat6 ADM_libavcodec6)
-INCLUDE_DIRECTORIES(&quot;${AVIDEMUX_SOURCE_DIR}/avidemux/ADM_libraries/ADM_ffmpeg&quot;)
+TARGET_LINK_LIBRARIES(ADM_mx_flv  ADM_libavutil ADM_libavformat ADM_libavcodec)
 
 INIT_MUXER(ADM_mx_flv)
 INSTALL_MUXER(ADM_mx_flv)

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerFlv/muxerFlv.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerFlv/muxerFlv.cpp	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerFlv/muxerFlv.cpp	2010-12-27 19:46:51 UTC (rev 6865)
@@ -16,7 +16,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include &quot;ADM_includeFfmpeg.h&quot;
+
 #include &quot;ADM_default.h&quot;
 #include &quot;fourcc.h&quot;
 #include &quot;muxerFlv.h&quot;

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerFlv/muxerFlvConfig.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerFlv/muxerFlvConfig.cpp	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerFlv/muxerFlvConfig.cpp	2010-12-27 19:46:51 UTC (rev 6865)
@@ -12,7 +12,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include &quot;ADM_includeFfmpeg.h&quot;
+
 #include &quot;ADM_default.h&quot;
 #include &quot;ADM_muxerInternal.h&quot;
 #include &quot;muxerFlv.h&quot;

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerFlv/muxerFlvPlugin.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerFlv/muxerFlvPlugin.cpp	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerFlv/muxerFlvPlugin.cpp	2010-12-27 19:46:51 UTC (rev 6865)
@@ -13,7 +13,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include &quot;ADM_includeFfmpeg.h&quot;
+
 #include &quot;ADM_default.h&quot;
 #include &quot;ADM_muxerInternal.h&quot;
 #include &quot;muxerFlv.h&quot;

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerMkv/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerMkv/CMakeLists.txt	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerMkv/CMakeLists.txt	2010-12-27 19:46:51 UTC (rev 6865)
@@ -7,8 +7,7 @@
 
 ADD_LIBRARY(ADM_mx_Mkv SHARED ${ADM_Mkv_SRCS})
 
-INCLUDE_DIRECTORIES(&quot;${AVIDEMUX_SOURCE_DIR}/avidemux/ADM_libraries/ADM_ffmpeg&quot;)
-TARGET_LINK_LIBRARIES(ADM_mx_Mkv  ADM_libavutil6 ADM_libavcodec6 ADM_libavformat6)
+TARGET_LINK_LIBRARIES(ADM_mx_Mkv  ADM_libavutil ADM_libavcodec ADM_libavformat)
 INIT_MUXER(ADM_mx_Mkv)
 INSTALL_MUXER(ADM_mx_Mkv)
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerMkv/muxerMkv.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerMkv/muxerMkv.cpp	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerMkv/muxerMkv.cpp	2010-12-27 19:46:51 UTC (rev 6865)
@@ -16,7 +16,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include &quot;ADM_includeFfmpeg.h&quot;
+
 #include &quot;ADM_default.h&quot;
 #include &quot;fourcc.h&quot;
 #include &quot;muxerMkv.h&quot;

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerMkv/muxerMkvConfig.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerMkv/muxerMkvConfig.cpp	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerMkv/muxerMkvConfig.cpp	2010-12-27 19:46:51 UTC (rev 6865)
@@ -12,7 +12,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include &quot;ADM_includeFfmpeg.h&quot;
+
 #include &quot;ADM_default.h&quot;
 #include &quot;ADM_muxerInternal.h&quot;
 #include &quot;muxerMkv.h&quot;

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerMkv/muxerMkvPlugin.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerMkv/muxerMkvPlugin.cpp	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerMkv/muxerMkvPlugin.cpp	2010-12-27 19:46:51 UTC (rev 6865)
@@ -13,7 +13,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include &quot;ADM_includeFfmpeg.h&quot;
+
 #include &quot;ADM_default.h&quot;
 #include &quot;ADM_muxerInternal.h&quot;
 #include &quot;muxerMkv.h&quot;

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerMp4/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerMp4/CMakeLists.txt	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerMp4/CMakeLists.txt	2010-12-27 19:46:51 UTC (rev 6865)
@@ -7,8 +7,6 @@
 
 ADD_LIBRARY(ADM_mx_mp4 SHARED ${ADM_mp4_SRCS})
 
-INCLUDE_DIRECTORIES(&quot;${AVIDEMUX_SOURCE_DIR}/avidemux/ADM_libraries/ADM_ffmpeg&quot;)
-TARGET_LINK_LIBRARIES(ADM_mx_mp4  ADM_libavutil6 ADM_libavcodec6 ADM_libavformat6)
+TARGET_LINK_LIBRARIES(ADM_mx_mp4  ADM_libavutil ADM_libavcodec ADM_libavformat)
 INIT_MUXER(ADM_mx_mp4)
-INSTALL_MUXER(ADM_mx_mp4)
-
+INSTALL_MUXER(ADM_mx_mp4)
\ No newline at end of file

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerMp4/muxerMP4.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerMp4/muxerMP4.cpp	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerMp4/muxerMP4.cpp	2010-12-27 19:46:51 UTC (rev 6865)
@@ -16,7 +16,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include &quot;ADM_includeFfmpeg.h&quot;
+
 #include &quot;ADM_default.h&quot;
 #include &quot;fourcc.h&quot;
 #include &quot;muxerMP4.h&quot;

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerMp4/muxerMP4Config.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerMp4/muxerMP4Config.cpp	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerMp4/muxerMP4Config.cpp	2010-12-27 19:46:51 UTC (rev 6865)
@@ -12,7 +12,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include &quot;ADM_includeFfmpeg.h&quot;
+
 #include &quot;ADM_default.h&quot;
 #include &quot;ADM_muxerInternal.h&quot;
 #include &quot;muxerMP4.h&quot;

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerMp4/muxerMP4Plugin.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerMp4/muxerMP4Plugin.cpp	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerMp4/muxerMP4Plugin.cpp	2010-12-27 19:46:51 UTC (rev 6865)
@@ -13,7 +13,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include &quot;ADM_includeFfmpeg.h&quot;
+
 #include &quot;ADM_default.h&quot;
 #include &quot;ADM_muxerInternal.h&quot;
 #include &quot;muxerMP4.h&quot;

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffPS/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffPS/CMakeLists.txt	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffPS/CMakeLists.txt	2010-12-27 19:46:51 UTC (rev 6865)
@@ -7,8 +7,7 @@
 
 ADD_LIBRARY(ADM_mx_ffPS SHARED ${ADM_ffPS_SRCS})
 
-INCLUDE_DIRECTORIES(&quot;${AVIDEMUX_SOURCE_DIR}/avidemux/ADM_libraries/ADM_ffmpeg&quot;)
-TARGET_LINK_LIBRARIES(ADM_mx_ffPS  ADM_libavutil6 ADM_libavcodec6 ADM_libavformat6)
+TARGET_LINK_LIBRARIES(ADM_mx_ffPS  ADM_libavutil ADM_libavcodec ADM_libavformat)
 INIT_MUXER(ADM_mx_ffPS)
 INSTALL_MUXER(ADM_mx_ffPS)
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffPS/muxerffPS.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffPS/muxerffPS.cpp	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffPS/muxerffPS.cpp	2010-12-27 19:46:51 UTC (rev 6865)
@@ -16,7 +16,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include &quot;ADM_includeFfmpeg.h&quot;
+
 #include &quot;ADM_default.h&quot;
 #include &quot;fourcc.h&quot;
 #include &quot;muxerffPS.h&quot;

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffPS/muxerffPSConfig.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffPS/muxerffPSConfig.cpp	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffPS/muxerffPSConfig.cpp	2010-12-27 19:46:51 UTC (rev 6865)
@@ -12,7 +12,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include &quot;ADM_includeFfmpeg.h&quot;
+
 #include &quot;ADM_default.h&quot;
 #include &quot;ADM_muxerInternal.h&quot;
 #include &quot;muxerffPS.h&quot;

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffPS/muxerffPSPlugin.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffPS/muxerffPSPlugin.cpp	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffPS/muxerffPSPlugin.cpp	2010-12-27 19:46:51 UTC (rev 6865)
@@ -13,7 +13,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include &quot;ADM_includeFfmpeg.h&quot;
+
 #include &quot;ADM_default.h&quot;
 #include &quot;ADM_muxerInternal.h&quot;
 #include &quot;muxerffPS.h&quot;

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffTS/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffTS/CMakeLists.txt	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffTS/CMakeLists.txt	2010-12-27 19:46:51 UTC (rev 6865)
@@ -7,8 +7,7 @@
 
 ADD_LIBRARY(ADM_mx_ffTS SHARED ${ADM_ffTS_SRCS})
 
-INCLUDE_DIRECTORIES(&quot;${AVIDEMUX_SOURCE_DIR}/avidemux/ADM_libraries/ADM_ffmpeg&quot;)
-TARGET_LINK_LIBRARIES(ADM_mx_ffTS  ADM_libavutil6 ADM_libavcodec6 ADM_libavformat6)
+TARGET_LINK_LIBRARIES(ADM_mx_ffTS  ADM_libavutil ADM_libavcodec ADM_libavformat)
 INIT_MUXER(ADM_mx_ffTS)
 INSTALL_MUXER(ADM_mx_ffTS)
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffTS/muxerffTS.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffTS/muxerffTS.cpp	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffTS/muxerffTS.cpp	2010-12-27 19:46:51 UTC (rev 6865)
@@ -16,7 +16,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include &quot;ADM_includeFfmpeg.h&quot;
+
 #include &quot;ADM_default.h&quot;
 #include &quot;fourcc.h&quot;
 #include &quot;muxerffTS.h&quot;

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffTS/muxerffTSConfig.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffTS/muxerffTSConfig.cpp	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffTS/muxerffTSConfig.cpp	2010-12-27 19:46:51 UTC (rev 6865)
@@ -12,7 +12,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include &quot;ADM_includeFfmpeg.h&quot;
+
 #include &quot;ADM_default.h&quot;
 #include &quot;ADM_muxerInternal.h&quot;
 #include &quot;muxerffTS.h&quot;

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffTS/muxerffTSPlugin.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffTS/muxerffTSPlugin.cpp	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffTS/muxerffTSPlugin.cpp	2010-12-27 19:46:51 UTC (rev 6865)
@@ -13,7 +13,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include &quot;ADM_includeFfmpeg.h&quot;
+
 #include &quot;ADM_default.h&quot;
 #include &quot;ADM_muxerInternal.h&quot;
 #include &quot;muxerffTS.h&quot;

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffFlv1/ADM_ffFlv1.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffFlv1/ADM_ffFlv1.cpp	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffFlv1/ADM_ffFlv1.cpp	2010-12-27 19:46:51 UTC (rev 6865)
@@ -15,7 +15,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include &quot;ADM_lavcodec.h&quot;
+
 #include &quot;ADM_default.h&quot;
 #include &quot;ADM_ffFlv1.h&quot;
 #undef ADM_MINIMAL_UI_INTERFACE // we need the full UI

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffFlv1/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffFlv1/CMakeLists.txt	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffFlv1/CMakeLists.txt	2010-12-27 19:46:51 UTC (rev 6865)
@@ -10,6 +10,5 @@
 
 INIT_VIDEO_ENCODER(ADM_ve_ffFlv1)
 INSTALL_VIDEO_ENCODER(ADM_ve_ffFlv1)
-TARGET_LINK_LIBRARIES(ADM_ve_ffFlv1 ADM_libavcodec6 ADM_libavutil6)
-INCLUDE_DIRECTORIES(&quot;${AVIDEMUX_SOURCE_DIR}/avidemux/&quot;)
-INCLUDE_DIRECTORIES(&quot;${AVIDEMUX_SOURCE_DIR}/avidemux/ADM_libraries/ADM_ffmpeg&quot;)
+TARGET_LINK_LIBRARIES(ADM_ve_ffFlv1 ADM_libavcodec ADM_libavutil)
+INCLUDE_DIRECTORIES(&quot;${AVIDEMUX_SOURCE_DIR}/avidemux/&quot;)
\ No newline at end of file

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffFlv1/ffFlv1Plugin.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffFlv1/ffFlv1Plugin.cpp	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffFlv1/ffFlv1Plugin.cpp	2010-12-27 19:46:51 UTC (rev 6865)
@@ -15,7 +15,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include &quot;ADM_includeFfmpeg.h&quot;
+
 #include &quot;ADM_default.h&quot;
 #include &quot;ADM_ffFlv1.h&quot;
 #include &quot;ADM_coreVideoEncoderInternal.h&quot;

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg2/ADM_ffMpeg2.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg2/ADM_ffMpeg2.cpp	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg2/ADM_ffMpeg2.cpp	2010-12-27 19:46:51 UTC (rev 6865)
@@ -15,7 +15,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include &quot;ADM_lavcodec.h&quot;
+
 #include &quot;ADM_default.h&quot;
 #include &quot;ADM_ffMpeg2.h&quot;
 #undef ADM_MINIMAL_UI_INTERFACE // we need the full UI

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg2/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg2/CMakeLists.txt	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg2/CMakeLists.txt	2010-12-27 19:46:51 UTC (rev 6865)
@@ -10,6 +10,5 @@
 
 INIT_VIDEO_ENCODER(ADM_ve_ffMpeg2)
 INSTALL_VIDEO_ENCODER(ADM_ve_ffMpeg2)
-TARGET_LINK_LIBRARIES(ADM_ve_ffMpeg2 ADM_libavcodec6 ADM_libavutil6)
+TARGET_LINK_LIBRARIES(ADM_ve_ffMpeg2 ADM_libavcodec ADM_libavutil)
 INCLUDE_DIRECTORIES(&quot;${AVIDEMUX_SOURCE_DIR}/avidemux/&quot;)
-INCLUDE_DIRECTORIES(&quot;${AVIDEMUX_SOURCE_DIR}/avidemux/ADM_libraries/ADM_ffmpeg&quot;)

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg2/ffMpeg2Plugin.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg2/ffMpeg2Plugin.cpp	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg2/ffMpeg2Plugin.cpp	2010-12-27 19:46:51 UTC (rev 6865)
@@ -15,7 +15,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include &quot;ADM_includeFfmpeg.h&quot;
+
 #include &quot;ADM_default.h&quot;
 #include &quot;ADM_ffMpeg2.h&quot;
 #include &quot;ADM_coreVideoEncoderInternal.h&quot;

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.cpp	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ADM_ffMpeg4.cpp	2010-12-27 19:46:51 UTC (rev 6865)
@@ -15,7 +15,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include &quot;ADM_lavcodec.h&quot;
+
 #include &quot;ADM_default.h&quot;
 #include &quot;ADM_ffMpeg4.h&quot;
 #undef ADM_MINIMAL_UI_INTERFACE // we need the full UI

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/CMakeLists.txt	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/CMakeLists.txt	2010-12-27 19:46:51 UTC (rev 6865)
@@ -10,6 +10,5 @@
 
 INIT_VIDEO_ENCODER(ADM_ve_ffMpeg4)
 INSTALL_VIDEO_ENCODER(ADM_ve_ffMpeg4)
-TARGET_LINK_LIBRARIES(ADM_ve_ffMpeg4 ADM_libavcodec6 ADM_libavutil6)
-INCLUDE_DIRECTORIES(&quot;${AVIDEMUX_SOURCE_DIR}/avidemux/&quot;)
-INCLUDE_DIRECTORIES(&quot;${AVIDEMUX_SOURCE_DIR}/avidemux/ADM_libraries/ADM_ffmpeg&quot;)
+TARGET_LINK_LIBRARIES(ADM_ve_ffMpeg4 ADM_libavcodec ADM_libavutil)
+INCLUDE_DIRECTORIES(&quot;${AVIDEMUX_SOURCE_DIR}/avidemux/&quot;)
\ No newline at end of file

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ffMpeg4Plugin.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ffMpeg4Plugin.cpp	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMpeg4/ffMpeg4Plugin.cpp	2010-12-27 19:46:51 UTC (rev 6865)
@@ -15,7 +15,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include &quot;ADM_includeFfmpeg.h&quot;
+
 #include &quot;ADM_default.h&quot;
 #include &quot;ADM_ffMpeg4.h&quot;
 #include &quot;ADM_coreVideoEncoderInternal.h&quot;

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMsMpeg4/ADM_ffMsMp4.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMsMpeg4/ADM_ffMsMp4.cpp	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMsMpeg4/ADM_ffMsMp4.cpp	2010-12-27 19:46:51 UTC (rev 6865)
@@ -15,7 +15,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include &quot;ADM_lavcodec.h&quot;
+
 #include &quot;ADM_default.h&quot;
 #include &quot;ADM_ffMsMp4.h&quot;
 #undef ADM_MINIMAL_UI_INTERFACE // we need the full UI

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMsMpeg4/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMsMpeg4/CMakeLists.txt	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMsMpeg4/CMakeLists.txt	2010-12-27 19:46:51 UTC (rev 6865)
@@ -10,6 +10,5 @@
 
 INIT_VIDEO_ENCODER(ADM_ve_ffMsMp4)
 INSTALL_VIDEO_ENCODER(ADM_ve_ffMsMp4)
-TARGET_LINK_LIBRARIES(ADM_ve_ffMsMp4 ADM_libavcodec6 ADM_libavutil6)
-INCLUDE_DIRECTORIES(&quot;${AVIDEMUX_SOURCE_DIR}/avidemux/&quot;)
-INCLUDE_DIRECTORIES(&quot;${AVIDEMUX_SOURCE_DIR}/avidemux/ADM_libraries/ADM_ffmpeg&quot;)
+TARGET_LINK_LIBRARIES(ADM_ve_ffMsMp4 ADM_libavcodec ADM_libavutil)
+INCLUDE_DIRECTORIES(&quot;${AVIDEMUX_SOURCE_DIR}/avidemux/&quot;)
\ No newline at end of file

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMsMpeg4/ffMsMp4Plugin.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMsMpeg4/ffMsMp4Plugin.cpp	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/ffMsMpeg4/ffMsMp4Plugin.cpp	2010-12-27 19:46:51 UTC (rev 6865)
@@ -15,7 +15,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include &quot;ADM_includeFfmpeg.h&quot;
+
 #include &quot;ADM_default.h&quot;
 #include &quot;ADM_ffMsMp4.h&quot;
 #include &quot;ADM_coreVideoEncoderInternal.h&quot;

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/huff/ADM_huffEncoder.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/huff/ADM_huffEncoder.cpp	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/huff/ADM_huffEncoder.cpp	2010-12-27 19:46:51 UTC (rev 6865)
@@ -15,7 +15,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include &quot;ADM_lavcodec.h&quot;
+
 #include &quot;ADM_default.h&quot;
 #include &quot;ADM_huffEncoder.h&quot;
 #include &quot;DIA_factory.h&quot;

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/huff/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/huff/CMakeLists.txt	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/huff/CMakeLists.txt	2010-12-27 19:46:51 UTC (rev 6865)
@@ -9,7 +9,6 @@
 ADD_LIBRARY(ADM_ve_huff SHARED ${huff_SRCS})
 
 INIT_VIDEO_ENCODER(ADM_ve_huff)
-INSTALL_VIDEO_ENCODER(ADM_ve_huff)
-TARGET_LINK_LIBRARIES(ADM_ve_huff ADM_libavcodec6 ADM_libavutil6)
-INCLUDE_DIRECTORIES(&quot;${AVIDEMUX_SOURCE_DIR}/avidemux/&quot;)
-INCLUDE_DIRECTORIES(&quot;${AVIDEMUX_SOURCE_DIR}/avidemux/ADM_libraries/ADM_ffmpeg&quot;)
+INSTALL_VIDEO_ENCODER(ADM_ve_huff)
+TARGET_LINK_LIBRARIES(ADM_ve_huff ADM_libavcodec ADM_libavutil)
+INCLUDE_DIRECTORIES(&quot;${AVIDEMUX_SOURCE_DIR}/avidemux/&quot;)
\ No newline at end of file

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/huff/huffPlugin.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/huff/huffPlugin.cpp	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/huff/huffPlugin.cpp	2010-12-27 19:46:51 UTC (rev 6865)
@@ -15,7 +15,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include &quot;ADM_includeFfmpeg.h&quot;
+
 #include &quot;ADM_default.h&quot;
 #include &quot;ADM_huffEncoder.h&quot;
 #include &quot;ADM_coreVideoEncoderInternal.h&quot;

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/jpeg/ADM_jpegEncoder.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/jpeg/ADM_jpegEncoder.cpp	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/jpeg/ADM_jpegEncoder.cpp	2010-12-27 19:46:51 UTC (rev 6865)
@@ -15,10 +15,11 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include &quot;ADM_lavcodec.h&quot;
+
 #include &quot;ADM_default.h&quot;
 #include &quot;ADM_jpegEncoder.h&quot;
 #include &quot;DIA_factory.h&quot;
+
 jpeg_encoder jpegConf= {ADM_COLOR_YV12,2};
 /**
         \fn ADM_jpegEncoder

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/jpeg/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/jpeg/CMakeLists.txt	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/jpeg/CMakeLists.txt	2010-12-27 19:46:51 UTC (rev 6865)
@@ -9,7 +9,6 @@
 ADD_LIBRARY(ADM_ve_jpeg SHARED ${jpeg_SRCS})
 
 INIT_VIDEO_ENCODER(ADM_ve_jpeg)
-INSTALL_VIDEO_ENCODER(ADM_ve_jpeg)
-TARGET_LINK_LIBRARIES(ADM_ve_jpeg ADM_libavcodec6 ADM_libavutil6)
-INCLUDE_DIRECTORIES(&quot;${AVIDEMUX_SOURCE_DIR}/avidemux/&quot;)
-INCLUDE_DIRECTORIES(&quot;${AVIDEMUX_SOURCE_DIR}/avidemux/ADM_libraries/ADM_ffmpeg&quot;)
+INSTALL_VIDEO_ENCODER(ADM_ve_jpeg)
+TARGET_LINK_LIBRARIES(ADM_ve_jpeg ADM_libavcodec ADM_libavutil)
+INCLUDE_DIRECTORIES(&quot;${AVIDEMUX_SOURCE_DIR}/avidemux/&quot;)
\ No newline at end of file

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/jpeg/jpegPlugin.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/jpeg/jpegPlugin.cpp	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/jpeg/jpegPlugin.cpp	2010-12-27 19:46:51 UTC (rev 6865)
@@ -15,7 +15,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include &quot;ADM_includeFfmpeg.h&quot;
+
 #include &quot;ADM_default.h&quot;
 #include &quot;ADM_coreVideoEncoderInternal.h&quot;
 #include &quot;ADM_jpegEncoder.h&quot;

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters/Equalizer/gtk/DIA_equalizer.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters/Equalizer/gtk/DIA_equalizer.cpp	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters/Equalizer/gtk/DIA_equalizer.cpp	2010-12-27 19:46:51 UTC (rev 6865)
@@ -28,7 +28,7 @@
 #include &quot;ADM_vidEqualizer.h&quot;
 #include &quot;ADM_colorspace.h&quot;
 extern &quot;C&quot; {
-#include &quot;../../../ADM_libraries/ADM_ffmpeg/ADM_lavcodec/avcodec.h&quot;
+#include &quot;libavcodec/avcodec.h&quot;
 }
 
 static ColYuvRgb    *rgbConv=NULL;

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters/ForcedPP/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters/ForcedPP/CMakeLists.txt	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters/ForcedPP/CMakeLists.txt	2010-12-27 19:46:51 UTC (rev 6865)
@@ -1,5 +1,4 @@
 INCLUDE(vf_plugin)
-INCLUDE_DIRECTORIES(&quot;${AVIDEMUX_SOURCE_DIR}/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libpostproc&quot;)
 
 SET(ADM_vf_forcedPP_SRCS ADM_vidForcedPP.cpp)
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters/MPDelogo/ADM_vidMPdelogo.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters/MPDelogo/ADM_vidMPdelogo.cpp	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters/MPDelogo/ADM_vidMPdelogo.cpp	2010-12-27 19:46:51 UTC (rev 6865)
@@ -8,15 +8,12 @@
  ***************************************************************************/
 
 #include &quot;ADM_default.h&quot;
-
-
 #include &quot;ADM_videoFilterDynamic.h&quot;
 
-
 extern &quot;C&quot; {
-#include &quot;ADM_libraries/ADM_ffmpeg/ADM_lavcodec/avcodec.h&quot;
-#include &quot;ADM_libraries/ADM_ffmpeg/ADM_lavutil/avutil.h&quot;
-#include &quot;ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale.h&quot;
+#include &quot;libavcodec/avcodec.h&quot;
+#include &quot;libavutil/avutil.h&quot;
+#include &quot;libswscale/swscale.h&quot;
 }
 
 #include &quot;ADM_vidMPdelogo.h&quot;

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters/MPDelogo/gtk/DIA_mpdelogo.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters/MPDelogo/gtk/DIA_mpdelogo.cpp	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters/MPDelogo/gtk/DIA_mpdelogo.cpp	2010-12-27 19:46:51 UTC (rev 6865)
@@ -24,14 +24,13 @@
 
 #include &quot;ADM_toolkitGtk.h&quot;
 
-
 #include &quot;ADM_image.h&quot;
 #include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_colorspace.h&quot;
 #include &quot;ADM_vidMPdelogo.h&quot;
 
 extern &quot;C&quot; {
-#include &quot;ADM_libraries/ADM_ffmpeg/ADM_lavcodec/avcodec.h&quot;
+#include &quot;libavcodec/avcodec.h&quot;
 }
 
 static GtkWidget	*create_dialog1 (void);

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters/McDeint/ADM_vidMcDeint.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters/McDeint/ADM_vidMcDeint.cpp	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters/McDeint/ADM_vidMcDeint.cpp	2010-12-27 19:46:51 UTC (rev 6865)
@@ -22,7 +22,6 @@
 */
 
 #include &quot;ADM_default.h&quot;
-#include &quot;ADM_lavcodec.h&quot;
 #include &quot;ADM_videoFilterDynamic.h&quot;
 #include &quot;ADM_vidMcDeint_param.h&quot;
 #include &quot;DIA_factory.h&quot;

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters/Mosaic/ADM_vidMosaic.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters/Mosaic/ADM_vidMosaic.cpp	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters/Mosaic/ADM_vidMosaic.cpp	2010-12-27 19:46:51 UTC (rev 6865)
@@ -16,15 +16,12 @@
  ***************************************************************************/
 #include &quot;ADM_default.h&quot;
 #include &quot;ADM_videoFilterDynamic.h&quot;
-
 #include &quot;DIA_factory.h&quot;
 
-
 extern &quot;C&quot; {
-#include &quot;ADM_libraries/ADM_ffmpeg/ADM_lavcodec/avcodec.h&quot;
-#include &quot;ADM_libraries/ADM_ffmpeg/ADM_lavutil/avutil.h&quot;
-#include &quot;ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale.h&quot;
-
+#include &quot;libavcodec/avcodec.h&quot;
+#include &quot;libavutil/avutil.h&quot;
+#include &quot;libswscale/swscale.h&quot;
 }
 
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/lavDeint/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/lavDeint/CMakeLists.txt	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/lavDeint/CMakeLists.txt	2010-12-27 19:46:51 UTC (rev 6865)
@@ -5,7 +5,7 @@
 
 ADD_VIDEO_FILTER(ADM_vf_lavDeint ${ADM_vf_lavDeint_SRCS})
 IF(DO_COMMON)
-  TARGET_LINK_LIBRARIES(ADM_vf_lavDeint ADM_libpostproc6 )
+  TARGET_LINK_LIBRARIES(ADM_vf_lavDeint ADM_libpostproc)
 ENDIF(DO_COMMON)
 INIT_VIDEO_FILTER(ADM_vf_lavDeint)
 INSTALL_VIDEO_FILTER(ADM_vf_lavDeint)

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/lavDeint/lavDeint.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/lavDeint/lavDeint.cpp	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/lavDeint/lavDeint.cpp	2010-12-27 19:46:51 UTC (rev 6865)
@@ -15,13 +15,12 @@
  *                                                                         *
  ***************************************************************************/
 
-#include &quot;ADM_includeFfmpeg.h&quot;
-#include &quot;ADM_lavcodec.h&quot;
+#include &quot;ADM_default.h&quot;
+
 extern &quot;C&quot; {
-#include &quot;ADM_ffmpeg/libpostproc/postprocess.h&quot;
+#include &quot;libpostproc/postprocess.h&quot;
 }
 
-#include &quot;ADM_default.h&quot;
 #include &quot;ADM_coreVideoFilterInternal.h&quot;
 #include &quot;DIA_factory.h&quot;
 #include &quot;lav.h&quot;

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/CMakeLists.txt	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/CMakeLists.txt	2010-12-27 19:46:51 UTC (rev 6865)
@@ -10,7 +10,7 @@
 SET(ADM_vf_swscaleResize_QT4_UI      qt4/resizing)
 INIT_VIDEO_FILTER_QT4(ADM_vf_swscaleResize_qt4 ${ADM_vf_swscaleResize_QT4_SRCS} ${ADM_vf_swscaleResize_QT4_Headers} ${ADM_vf_swscaleResize_QT4_UI} ${ADM_vf_swscaleResize_SRCS})
 IF(DO_QT4)
-    TARGET_LINK_LIBRARIES(ADM_vf_swscaleResize_qt4 ADM_libswscale6 )
+    TARGET_LINK_LIBRARIES(ADM_vf_swscaleResize_qt4 ADM_libswscale)
 ENDIF(DO_QT4)
 # /QT4
 
@@ -20,7 +20,7 @@
 SET(ADM_vf_swscaleResize_GTK_SRCS    gtk/gtk_resize.cpp)
 INIT_VIDEO_FILTER_GTK(ADM_vf_swscaleResize_gtk ${ADM_vf_swscaleResize_GTK_SRCS} ${ADM_vf_swscaleResize_SRCS})
 IF(DO_GTK)
-    TARGET_LINK_LIBRARIES(ADM_vf_swscaleResize_gtk ADM_libswscale6 )
+    TARGET_LINK_LIBRARIES(ADM_vf_swscaleResize_gtk ADM_libswscale)
 ENDIF(DO_GTK)
 
 # ----------------- CLI Version -----------------------
@@ -28,7 +28,7 @@
 SET(ADM_vf_swscaleResize_CLI_SRCS    cli/cli_resize.cpp)
 INIT_VIDEO_FILTER_CLI(ADM_vf_swscaleResize_cli ${ADM_vf_swscaleResize_SRCS} ${ADM_vf_swscaleResize_CLI_SRCS})
 IF(DO_CLI)
-    TARGET_LINK_LIBRARIES(ADM_vf_swscaleResize_cli ADM_libswscale6 )
+    TARGET_LINK_LIBRARIES(ADM_vf_swscaleResize_cli ADM_libswscale)
 ENDIF(DO_CLI)
 
 # /QT4

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/swScaleResize.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/swScaleResize.cpp	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resize/swScaleResize.cpp	2010-12-27 19:46:51 UTC (rev 6865)
@@ -14,15 +14,17 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include &quot;ADM_includeFfmpeg.h&quot;
+
 #include &quot;ADM_default.h&quot;
 #include &quot;ADM_coreVideoFilterInternal.h&quot;
 #include &quot;DIA_factory.h&quot;
+
 extern &quot;C&quot; {
-#include &quot;ADM_ffmpeg/libavcodec/avcodec.h&quot;
-#include &quot;ADM_ffmpeg/libavutil/avutil.h&quot;
-#include &quot;ADM_ffmpeg/libswscale/swscale.h&quot;
+#include &quot;libavcodec/avcodec.h&quot;
+#include &quot;libavutil/avutil.h&quot;
+#include &quot;libswscale/swscale.h&quot;
 }
+
 #include &quot;swresize.h&quot;
 #include &quot;swresize_desc.cpp&quot;
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/CMakeLists.txt	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/CMakeLists.txt	2010-12-27 19:46:51 UTC (rev 6865)
@@ -37,6 +37,9 @@
 LINK_DIRECTORIES(&quot;${AVIDEMUX_LIB_DIR}&quot;)
 INCLUDE_DIRECTORIES(${AVIDEMUX_INCLUDE_DIR}/avidemux/2.6/)
 
+include(admFFmpegUtil)
+registerFFmpeg(&quot;${CMAKE_SOURCE_DIR}/../ffmpeg&quot; &quot;${AVIDEMUX_LIB_DIR}&quot; 1)
+
 IF (FRESH_BUILD)
 	MESSAGE(&quot;&quot;)
 ENDIF (FRESH_BUILD)

Modified: branches/avidemux_2.6_branch_mean/cmake/ADM_coreConfig.h.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/ADM_coreConfig.h.cmake	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/cmake/ADM_coreConfig.h.cmake	2010-12-27 19:46:51 UTC (rev 6865)
@@ -21,8 +21,6 @@
 
 // use vdpau h264 hw decoding 
 #cmakedefine USE_VDPAU
-// use yasm
-#cmakedefine USE_YASM
 
 // 'gettimeofday' function is present
 #cmakedefine HAVE_GETTIMEOFDAY

Added: branches/avidemux_2.6_branch_mean/cmake/FindPatch.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/FindPatch.cmake	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/cmake/FindPatch.cmake	2010-12-27 19:46:51 UTC (rev 6865)
@@ -0,0 +1,19 @@
+if (NOT PATCH_EXECUTABLE)
+	message(STATUS &quot;Checking for patch&quot;)
+	message(STATUS &quot;******************&quot;)
+
+	find_program(PATCH_EXECUTABLE patch)
+	set(PATCH_EXECUTABLE ${PATCH_EXECUTABLE} CACHE STRING &quot;&quot;)
+
+	if (PATCH_EXECUTABLE)
+		message(STATUS &quot;Found patch&quot;)
+		
+		if (VERBOSE)
+			message(STATUS &quot;Path: ${PATCH_EXECUTABLE}&quot;)
+		endif (VERBOSE)
+	else (PATCH_EXECUTABLE)
+		message(FATAL_ERROR &quot;patch not found&quot;)
+	endif (PATCH_EXECUTABLE)
+
+	message(&quot;&quot;)
+endif (NOT PATCH_EXECUTABLE)
\ No newline at end of file

Deleted: branches/avidemux_2.6_branch_mean/cmake/FindYasm.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/FindYasm.cmake	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/cmake/FindYasm.cmake	2010-12-27 19:46:51 UTC (rev 6865)
@@ -1,46 +0,0 @@
-# - Extract information from a subversion working copy
-MACRO(admFindYasm )
-
-FIND_PROGRAM(YASM_EXECUTABLE yasm
-  DOC &quot;yasm command line assembler&quot;)
-MARK_AS_ADVANCED(YASM_EXECUTABLE)
-
-IF(YASM_EXECUTABLE)
-        
-        SET(EXE  &quot;cd ${_dir}&amp;&amp; ${GIT_EXECUTABLE} svn log | head -2  | grep '^r' | sed 's/ .*$//g'&quot; )
-        MESSAGE(STATUS &quot;Found yasm&quot;)
-        SET(USE_YASM 1)
-        IF(WIN32)
-           IF(ADM_CPU_X86_64)
-                SET(YASM_FLAGS -f win64 )
-           ELSE(ADM_CPU_X86_64)
-                SET(YASM_FLAGS -f win32 -DPREFIX)
-           ENDIF(ADM_CPU_X86_64)
-        ELSE(WIN32)
-                IF(APPLE)
-                        SET(YASM_FLAGS -f macho -DPREFIX -DPIC)
-                ELSE(APPLE)
-                        SET(YASM_FLAGS -f elf -DPIC -g dwarf2)
-                ENDIF(APPLE)
-        ENDIF(WIN32)
-        IF(ADM_CPU_X86_64)
-                SET(YASM_FLAGS ${YASM_FLAGS} -DARCH_X86_64 -m amd64)
-        ELSE(ADM_CPU_X86_64)
-                SET(YASM_FLAGS ${YASM_FLAGS} -DARCH_X86_32)
-        ENDIF(ADM_CPU_X86_64)
-        MESSAGE(STATUS &quot;Found yasm, flags ${YASM_FLAGS}&quot;)
-MACRO(YASM_COMPILE _in _out _inc)
-        ADD_CUSTOM_COMMAND(
-                OUTPUT ${_out}
-                COMMAND ${CMAKE_COMMAND} -E echo &quot;Generating&quot; ${_out} &quot;from&quot; ${_in}
-                COMMAND ${YASM_EXECUTABLE} -i ${_inc}  ${YASM_FLAGS} ${_in} -o ${_out}
-                DEPENDS ${_in}
-                VERBATIM
-                )
-ENDMACRO(YASM_COMPILE)
-
-ENDIF(YASM_EXECUTABLE)
-
-ENDMACRO(admFindYasm )
-
-# 

Modified: branches/avidemux_2.6_branch_mean/cmake/admConfigSummary.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/admConfigSummary.cmake	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/cmake/admConfigSummary.cmake	2010-12-27 19:46:51 UTC (rev 6865)
@@ -26,7 +26,6 @@
 ADM_DISPLAY(&quot;SDL       &quot; &quot;${USE_SDL}&quot;)
 ADM_DISPLAY(&quot;XVideo    &quot; &quot;${USE_XV}&quot; &quot;${XVIDEO_CAPABLE}&quot;)
 ADM_DISPLAY(&quot;VDPAU     &quot; &quot;${USE_VDPAU}&quot; )
-ADM_DISPLAY(&quot;YASM      &quot; &quot;${USE_YASM}&quot; )
 
 MESSAGE(&quot;*********************&quot;)
 

Modified: branches/avidemux_2.6_branch_mean/cmake/admCoreIncludes.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/admCoreIncludes.cmake	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/cmake/admCoreIncludes.cmake	2010-12-27 19:46:51 UTC (rev 6865)
@@ -1,6 +1,5 @@
 INCLUDE_DIRECTORIES(${AVIDEMUX_TOP_SOURCE_DIR}/avidemux_core)
 INCLUDE_DIRECTORIES(${AVIDEMUX_TOP_SOURCE_DIR}/avidemux_core/ADM_core/include)
-INCLUDE_DIRECTORIES(${AVIDEMUX_TOP_SOURCE_DIR}/avidemux_core/ADM_ffmpeg)
 INCLUDE_DIRECTORIES(${AVIDEMUX_TOP_SOURCE_DIR}/avidemux_core/ADM_coreAudioFilter/include)
 INCLUDE_DIRECTORIES(${AVIDEMUX_TOP_SOURCE_DIR}/avidemux_core/ADM_coreAudioParser/include)
 INCLUDE_DIRECTORIES(${AVIDEMUX_TOP_SOURCE_DIR}/avidemux_core/ADM_coreAudio/include)
@@ -17,6 +16,4 @@
 INCLUDE_DIRECTORIES(${AVIDEMUX_TOP_SOURCE_DIR}/avidemux_core/ADM_coreVideoCodec/include)
 INCLUDE_DIRECTORIES(${AVIDEMUX_TOP_SOURCE_DIR}/avidemux_core/ADM_coreImageLoader/include)
 INCLUDE_DIRECTORIES(${AVIDEMUX_TOP_SOURCE_DIR}/avidemux_core/ADM_coreJobs/include)
-INCLUDE_DIRECTORIES(${AVIDEMUX_TOP_SOURCE_DIR}/avidemux_core/ADM_ffmpeg)
-INCLUDE_DIRECTORIES(${AVIDEMUX_INCLUDE_DIR}/avidemux/2.6/)
-
+INCLUDE_DIRECTORIES(${AVIDEMUX_INCLUDE_DIR}/avidemux/2.6/)
\ No newline at end of file

Added: branches/avidemux_2.6_branch_mean/cmake/admFFmpegBuild.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/admFFmpegBuild.cmake	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/cmake/admFFmpegBuild.cmake	2010-12-27 19:46:51 UTC (rev 6865)
@@ -0,0 +1,186 @@
+include(admFFmpegUtil)
+
+set(FFMPEG_VERSION 26061)	# <A HREF="http://git.ffmpeg.org/?p=ffmpeg;a=snapshot;h=2be4fa05c5528073bcfc472d1c23f2d77b679a9d;sf=tgz">http://git.ffmpeg.org/?p=ffmpeg;a=snapshot;h=2be4fa05c5528073bcfc472d1c23f2d77b679a9d;sf=tgz</A>
+set(SWSCALE_VERSION 32676)	# <A HREF="http://git.ffmpeg.org/?p=libswscale;a=snapshot;h=d1a43021d9198868fa7a023a30e5ee9e09a907d3;sf=tgz">http://git.ffmpeg.org/?p=libswscale;a=snapshot;h=d1a43021d9198868fa7a023a30e5ee9e09a907d3;sf=tgz</A>
+
+set(FFMPEG_SOURCE_DIR &quot;${CMAKE_SOURCE_DIR}/../ffmpeg&quot;)
+set(FFMPEG_BINARY_DIR &quot;${CMAKE_BINARY_DIR}/ffmpeg&quot;)
+
+set(FFMPEG_DECODERS  adpcm_ima_amv  amv  bmp  cinepak  cyuv  dca  dvbsub  dvvideo  ffv1  ffvhuff  flv  fraps  h263  h264  huffyuv  mjpeg
+					 mjpegb  mpeg2video  mpeg4  msmpeg4v2  msmpeg4v3  msvideo1  nellymoser  png  qdm2  rawvideo  snow  svq3  theora  tscc
+					 vc1  vp3  vp6  vp6a  vp6f  wmav2  wmv1  wmv2  wmv3)
+set(FFMPEG_ENCODERS  ac3  dvvideo  ffv1  ffvhuff  flv  h263  huffyuv  mjpeg  mp2  mpeg1video  mpeg2video  mpeg4  snow)
+set(FFMPEG_MUXERS  flv  matroska  mpeg1vcd  mpeg2dvd  mpeg2svcd  mpegts  mov  mp4  psp)
+set(FFMPEG_PARSERS  ac3  h263  h264  mpeg4video)
+set(FFMPEG_PROTOCOLS  file)
+set(FFMPEG_FLAGS  --enable-shared --disable-static --disable-everything --enable-hwaccels --enable-postproc --enable-gpl 
+				  --enable-runtime-cpudetect --disable-network --disable-ffplay --disable-ffprobe --prefix=${CMAKE_INSTALL_PREFIX})
+
+include(admFFmpegPrepareTar)
+
+if (NOT FFMPEG_PREPARED)
+	include(admFFmpegPrepareSvn)
+endif (NOT FFMPEG_PREPARED)
+
+if (NOT VERBOSE)
+	set(ffmpegBuildOutput OUTPUT_VARIABLE FFMPEG_CONFIGURE_OUTPUT)
+endif (NOT VERBOSE)
+
+message(&quot;&quot;)
+
+if (FFMPEG_PERFORM_PATCH)
+	find_package(Patch)
+	file(GLOB patchFiles &quot;${CMAKE_SOURCE_DIR}/../cmake/patches/*.patch&quot;)
+
+	foreach(patchFile ${patchFiles})
+		execute_process(COMMAND ${PATCH_EXECUTABLE} -p0 -i &quot;${patchFile}&quot;
+						WORKING_DIRECTORY &quot;${FFMPEG_SOURCE_DIR}&quot;)
+	endforeach(patchFile)
+
+	if (UNIX)
+		patch_file(&quot;${FFMPEG_SOURCE_DIR}&quot; &quot;${CMAKE_MODULE_PATH}/patches/common.mak.diff&quot;)
+	endif (UNIX)
+
+	message(&quot;&quot;)
+endif (FFMPEG_PERFORM_PATCH)
+
+# Configure FFmpeg, if required
+foreach (decoder ${FFMPEG_DECODERS})
+	set(FFMPEG_FLAGS ${FFMPEG_FLAGS} --enable-decoder=${decoder})
+endforeach (decoder)
+
+foreach (encoder ${FFMPEG_ENCODERS})
+	set(FFMPEG_FLAGS ${FFMPEG_FLAGS} --enable-encoder=${encoder})
+endforeach (encoder)
+
+foreach (muxer ${FFMPEG_MUXERS})
+	set(FFMPEG_FLAGS ${FFMPEG_FLAGS} --enable-muxer=${muxer})
+endforeach (muxer)
+
+foreach (parser ${FFMPEG_PARSERS})
+	set(FFMPEG_FLAGS ${FFMPEG_FLAGS} --enable-parser=${parser})
+endforeach (parser)
+
+foreach (protocol ${FFMPEG_PROTOCOLS})
+	set(FFMPEG_FLAGS ${FFMPEG_FLAGS} --enable-protocol=${protocol})
+endforeach (protocol)
+
+if (WIN32)
+	if (ADM_CPU_X86_32)
+		set(FFMPEG_FLAGS ${FFMPEG_FLAGS} --enable-memalign-hack)
+	endif (ADM_CPU_X86_32)
+
+	set(FFMPEG_FLAGS ${FFMPEG_FLAGS} --enable-w32threads)
+else (WIN32)
+	set(FFMPEG_FLAGS ${FFMPEG_FLAGS} --enable-pthreads)
+endif (WIN32)
+
+if (NOT ADM_DEBUG)
+	set(FFMPEG_FLAGS ${FFMPEG_FLAGS} --disable-debug)
+endif (NOT ADM_DEBUG)
+
+if (CMAKE_C_FLAGS)
+	set(FFMPEG_FLAGS ${FFMPEG_FLAGS} --extra-cflags=${CMAKE_C_FLAGS})
+endif (CMAKE_C_FLAGS)
+
+if (CMAKE_SHARED_LINKER_FLAGS)
+	set(FFMPEG_FLAGS ${FFMPEG_FLAGS} --extra-ldflags=${CMAKE_SHARED_LINKER_FLAGS})
+endif (CMAKE_SHARED_LINKER_FLAGS)
+
+if (CROSS_ARCH OR CROSS_OS)
+	set(FFMPEG_FLAGS ${FFMPEG_FLAGS} --enable-cross-compile)
+endif (CROSS_ARCH OR CROSS_OS)
+
+if (CROSS_ARCH)
+	set(CROSS_ARCH &quot;${CROSS_ARCH}&quot; CACHE STRING &quot;&quot;)
+	set(FFMPEG_FLAGS ${FFMPEG_FLAGS} --arch=${CROSS_ARCH})
+endif (CROSS_ARCH)
+
+if (CROSS_OS)
+	set(CROSS_OS &quot;${CROSS_OS}&quot; CACHE STRING &quot;&quot;)
+	set(FFMPEG_FLAGS ${FFMPEG_FLAGS} --target-os=${CROSS_OS})
+endif (CROSS_OS)
+
+if (FF_FLAGS)
+	set(FF_FLAGS &quot;${FF_FLAGS}&quot; CACHE STRING &quot;&quot;)
+	set(FFMPEG_FLAGS ${FFMPEG_FLAGS} ${FF_FLAGS})
+endif (FF_FLAGS)
+
+if (NOT &quot;${LAST_FFMPEG_FLAGS}&quot; STREQUAL &quot;${FFMPEG_FLAGS}&quot;)
+	set(FFMPEG_PERFORM_BUILD 1)
+endif (NOT &quot;${LAST_FFMPEG_FLAGS}&quot; STREQUAL &quot;${FFMPEG_FLAGS}&quot;)
+
+if (NOT EXISTS &quot;${FFMPEG_BINARY_DIR}/Makefile&quot;)
+	set(FFMPEG_PERFORM_BUILD 1)
+endif (NOT EXISTS &quot;${FFMPEG_BINARY_DIR}/Makefile&quot;)
+
+if (FFMPEG_PERFORM_BUILD)
+	message(STATUS &quot;Configuring FFmpeg&quot;)
+	set(LAST_FFMPEG_FLAGS &quot;${FFMPEG_FLAGS}&quot; CACHE STRING &quot;&quot; FORCE)
+
+	file(MAKE_DIRECTORY &quot;${FFMPEG_BINARY_DIR}&quot;)
+	file(REMOVE &quot;${FFMPEG_BINARY_DIR}/ffmpeg${CMAKE_EXECUTABLE_SUFFIX}&quot;)
+	file(REMOVE &quot;${FFMPEG_BINARY_DIR}/ffmpeg_g${CMAKE_EXECUTABLE_SUFFIX}&quot;)
+
+	execute_process(COMMAND sh ${FFMPEG_SOURCE_DIR}/configure ${FFMPEG_FLAGS}
+					WORKING_DIRECTORY &quot;${FFMPEG_BINARY_DIR}&quot;
+					${ffmpegBuildOutput})
+
+	if (ADM_CPU_X86)
+		file(READ ${FFMPEG_BINARY_DIR}/config.h FF_CONFIG_H)
+		string(REGEX MATCH &quot;#define[ ]+HAVE_YASM[ ]+1&quot; FF_YASM &quot;${FF_CONFIG_H}&quot;)
+
+		if (NOT FF_YASM)
+			message(FATAL_ERROR &quot;Yasm was not found.&quot;)
+		endif (NOT FF_YASM)
+
+		if (WIN32)
+			string(REGEX MATCH &quot;#define[ ]+CONFIG_DXVA2[ ]+1&quot; FF_DXVA2 &quot;${FF_CONFIG_H}&quot;)
+			
+			if (NOT FF_DXVA2)
+				message(FATAL_ERROR &quot;DXVA2 not detected.  Ensure the dxva2api.h system header exists (available from Microsoft or <A HREF="http://downloads.videolan.org/pub/videolan/testing/contrib/dxva2api.h">http://downloads.videolan.org/pub/videolan/testing/contrib/dxva2api.h</A>).&quot;)
+			endif (NOT FF_DXVA2)
+		endif (WIN32)
+	endif (ADM_CPU_X86)
+
+	execute_process(COMMAND ${CMAKE_COMMAND} -E make_directory &quot;libavutil&quot;
+					WORKING_DIRECTORY &quot;${CMAKE_BINARY_DIR}/config&quot;)
+
+	execute_process(COMMAND ${CMAKE_COMMAND} -E copy &quot;./libavutil/avconfig.h&quot; &quot;${CMAKE_BINARY_DIR}/config/libavutil&quot;
+					WORKING_DIRECTORY &quot;${FFMPEG_BINARY_DIR}&quot;)
+
+	if (APPLE)
+		find_patch()
+		patch_file(&quot;${FFMPEG_BINARY_DIR}&quot; &quot;${CMAKE_SOURCE_DIR}/cmake/patches/config_macosx.mak.diff&quot;)
+	elseif (UNIX)
+		find_patch()
+		patch_file(&quot;${FFMPEG_BINARY_DIR}&quot; &quot;${CMAKE_SOURCE_DIR}/cmake/patches/config.mak.diff&quot;)
+	endif (APPLE)
+
+	message(&quot;&quot;)
+endif (FFMPEG_PERFORM_BUILD)
+
+# Build FFmpeg
+add_custom_command(OUTPUT &quot;${FFMPEG_BINARY_DIR}/ffmpeg${CMAKE_EXECUTABLE_SUFFIX}&quot;
+				   COMMAND ${CMAKE_COMMAND} -DCMAKE_BUILD_TOOL=${CMAKE_BUILD_TOOL} -P &quot;${CMAKE_SOURCE_DIR}/../cmake/admFFmpegMake.cmake&quot;
+				   WORKING_DIRECTORY &quot;${FFMPEG_BINARY_DIR}&quot;)
+
+add_custom_target(ffmpeg ALL
+				  DEPENDS &quot;${FFMPEG_BINARY_DIR}/ffmpeg${CMAKE_EXECUTABLE_SUFFIX}&quot;)
+
+# Add and install libraries
+registerFFmpeg(&quot;${FFMPEG_SOURCE_DIR}&quot; &quot;${FFMPEG_BINARY_DIR}&quot; 0)
+
+install(FILES &quot;${FFMPEG_BINARY_DIR}/libswscale/${LIBSWSCALE_LIB}&quot; DESTINATION &quot;${AVIDEMUX_INSTALL_DIR}&quot;)
+install(FILES &quot;${FFMPEG_BINARY_DIR}/libpostproc/${LIBPOSTPROC_LIB}&quot; DESTINATION &quot;${AVIDEMUX_INSTALL_DIR}&quot;)
+install(FILES &quot;${FFMPEG_BINARY_DIR}/libavutil/${LIBAVUTIL_LIB}&quot; DESTINATION &quot;${AVIDEMUX_INSTALL_DIR}&quot;)
+install(FILES &quot;${FFMPEG_BINARY_DIR}/libavcodec/${LIBAVCODEC_LIB}&quot; DESTINATION &quot;${AVIDEMUX_INSTALL_DIR}&quot;)
+install(FILES &quot;${FFMPEG_BINARY_DIR}/libavformat/${LIBAVFORMAT_LIB}&quot; DESTINATION &quot;${AVIDEMUX_INSTALL_DIR}&quot;)
+install(FILES &quot;${FFMPEG_BINARY_DIR}/libavcore/${LIBAVCORE_LIB}&quot; DESTINATION &quot;${AVIDEMUX_INSTALL_DIR}&quot;)
+install(FILES &quot;${FFMPEG_BINARY_DIR}/libavutil/avconfig.h&quot; DESTINATION &quot;${AVIDEMUX_INCLUDE_DIR}/avidemux/2.6/libavutil&quot;) 
+
+# Clean FFmpeg
+add_custom_target(cleanffmpeg
+				  COMMAND ${CMAKE_COMMAND} -P &quot;${CMAKE_SOURCE_DIR}/cmake/admFFmpegClean.cmake&quot;
+				  WORKING_DIRECTORY &quot;${FFMPEG_BINARY_DIR}&quot;
+				  COMMENT &quot;Cleaning FFmpeg&quot;)

Added: branches/avidemux_2.6_branch_mean/cmake/admFFmpegClean.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/admFFmpegClean.cmake	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/cmake/admFFmpegClean.cmake	2010-12-27 19:46:51 UTC (rev 6865)
@@ -0,0 +1,2 @@
+execute_process(COMMAND make clean
+				WORKING_DIRECTORY &quot;${FFMPEG_BINARY_DIR}&quot;)
\ No newline at end of file

Added: branches/avidemux_2.6_branch_mean/cmake/admFFmpegMake.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/admFFmpegMake.cmake	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/cmake/admFFmpegMake.cmake	2010-12-27 19:46:51 UTC (rev 6865)
@@ -0,0 +1 @@
+execute_process(COMMAND ${CMAKE_BUILD_TOOL})
\ No newline at end of file

Added: branches/avidemux_2.6_branch_mean/cmake/admFFmpegPrepareSvn.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/admFFmpegPrepareSvn.cmake	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/cmake/admFFmpegPrepareSvn.cmake	2010-12-27 19:46:51 UTC (rev 6865)
@@ -0,0 +1,54 @@
+find_package(Subversion)
+
+if (NOT VERBOSE)
+	set(ffmpegSvnOutput OUTPUT_VARIABLE FFMPEG_SVN_OUTPUT)
+	set(swscaleSvnOutput OUTPUT_VARIABLE SWSCALE_SVN_OUTPUT)
+endif (NOT VERBOSE)
+
+# Checkout FFmpeg source and patch it
+if (NOT IS_DIRECTORY &quot;${FFMPEG_SOURCE_DIR}/.svn&quot;)
+	message(STATUS &quot;Checking out FFmpeg&quot;)
+	execute_process(COMMAND ${Subversion_SVN_EXECUTABLE} co <A HREF="svn://svn.ffmpeg.org/ffmpeg/trunk">svn://svn.ffmpeg.org/ffmpeg/trunk</A> -r ${FFMPEG_VERSION} --ignore-externals &quot;${FFMPEG_SOURCE_DIR}&quot;
+					${ffmpegSvnOutput})
+
+	message(STATUS &quot;Checking out libswscale&quot;)
+	execute_process(COMMAND ${Subversion_SVN_EXECUTABLE} co <A HREF="svn://svn.ffmpeg.org/mplayer/trunk/libswscale">svn://svn.ffmpeg.org/mplayer/trunk/libswscale</A> -r ${SWSCALE_VERSION} &quot;${FFMPEG_SOURCE_DIR}/libswscale&quot;
+					${swscaleSvnOutput})
+
+	message(&quot;&quot;)
+
+	set(FFMPEG_PERFORM_PATCH 1)
+endif (NOT IS_DIRECTORY &quot;${FFMPEG_SOURCE_DIR}/.svn&quot;)
+
+# Check version
+Subversion_WC_INFO(${FFMPEG_SOURCE_DIR} ffmpeg)
+message(STATUS &quot;FFmpeg revision: ${ffmpeg_WC_REVISION}&quot;)
+
+if (NOT ${ffmpeg_WC_REVISION} EQUAL ${FFMPEG_VERSION})
+	MESSAGE(STATUS &quot;Updating to revision ${FFMPEG_VERSION}&quot;)
+	set(FFMPEG_PERFORM_BUILD 1)
+	set(FFMPEG_PERFORM_PATCH 1)
+
+	execute_process(COMMAND ${Subversion_SVN_EXECUTABLE} revert -R &quot;${FFMPEG_SOURCE_DIR}&quot;
+					${ffmpegSvnOutput})
+	execute_process(COMMAND ${Subversion_SVN_EXECUTABLE} up -r ${FFMPEG_VERSION} --ignore-externals &quot;${FFMPEG_SOURCE_DIR}&quot;
+					${ffmpegSvnOutput})	
+
+	message(&quot;&quot;)
+endif (NOT ${ffmpeg_WC_REVISION} EQUAL ${FFMPEG_VERSION})
+
+message(&quot;&quot;)
+
+Subversion_WC_INFO(${FFMPEG_SOURCE_DIR}/libswscale swscale)
+message(STATUS &quot;libswscale revision: ${swscale_WC_REVISION}&quot;)
+
+if (NOT ${swscale_WC_REVISION} EQUAL ${SWSCALE_VERSION})
+	message(STATUS &quot;Updating to revision ${SWSCALE_VERSION}&quot;)
+	set(FFMPEG_PERFORM_BUILD 1)
+	set(FFMPEG_PERFORM_PATCH 1)
+
+	execute_process(COMMAND ${Subversion_SVN_EXECUTABLE} revert -R &quot;${FFMPEG_SOURCE_DIR}/libswscale&quot;
+					${swscaleSvnOutput})
+	execute_process(COMMAND ${Subversion_SVN_EXECUTABLE} up -r ${SWSCALE_VERSION} &quot;${FFMPEG_SOURCE_DIR}/libswscale&quot;
+					${swscaleSvnOutput})
+endif (NOT ${swscale_WC_REVISION} EQUAL ${SWSCALE_VERSION})
\ No newline at end of file

Added: branches/avidemux_2.6_branch_mean/cmake/admFFmpegPrepareTar.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/admFFmpegPrepareTar.cmake	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/cmake/admFFmpegPrepareTar.cmake	2010-12-27 19:46:51 UTC (rev 6865)
@@ -0,0 +1,34 @@
+if (NOT VERBOSE)
+	set(ffmpegExtractOutput OUTPUT_VARIABLE FFMPEG_EXTRACT_OUTPUT)
+endif (NOT VERBOSE)
+
+set(FFMPEG_SOURCE_ARCHIVE &quot;ffmpeg_r${FFMPEG_VERSION}.tar.gz&quot;)
+set(SWSCALE_SOURCE_ARCHIVE &quot;libswscale_r${SWSCALE_VERSION}.tar.gz&quot;)
+
+if (EXISTS &quot;${LIBRARY_SOURCE_DIR}/${FFMPEG_SOURCE_ARCHIVE}&quot; AND EXISTS &quot;${LIBRARY_SOURCE_DIR}/${SWSCALE_SOURCE_ARCHIVE}&quot;)
+	if (NOT EXISTS &quot;${FFMPEG_SOURCE_DIR}/ffmpeg.c&quot; OR NOT ${LAST_FFMPEG_VERSION} EQUAL ${FFMPEG_VERSION})
+		find_package(Tar)
+
+		execute_process(COMMAND ${TAR_EXECUTABLE} xvf ${FFMPEG_SOURCE_ARCHIVE}
+					WORKING_DIRECTORY &quot;${LIBRARY_SOURCE_DIR}&quot;
+					${ffmpegExtractOutput})
+
+		set(FFMPEG_PERFORM_PATCH 1)
+		set(FFMPEG_PERFORM_BUILD 1)
+	endif (NOT EXISTS &quot;${FFMPEG_SOURCE_DIR}/ffmpeg.c&quot; OR NOT ${LAST_FFMPEG_VERSION} EQUAL ${FFMPEG_VERSION})
+
+	if (NOT EXISTS &quot;${FFMPEG_SOURCE_DIR}/libswscale/swscale.c&quot; OR NOT ${LAST_SWSCALE_VERSION} EQUAL ${SWSCALE_VERSION})
+		find_package(Tar)
+
+		execute_process(COMMAND ${TAR_EXECUTABLE} xvf ../${SWSCALE_SOURCE_ARCHIVE}
+					WORKING_DIRECTORY &quot;${FFMPEG_SOURCE_DIR}&quot;
+					${ffmpegExtractOutput})
+
+		set(FFMPEG_PERFORM_PATCH 1)
+		set(FFMPEG_PERFORM_BUILD 1)
+	endif (NOT EXISTS &quot;${FFMPEG_SOURCE_DIR}/libswscale/swscale.c&quot; OR NOT ${LAST_SWSCALE_VERSION} EQUAL ${SWSCALE_VERSION})
+
+	set(FFMPEG_PREPARED 1)
+	set(LAST_FFMPEG_VERSION &quot;${FFMPEG_VERSION}&quot; CACHE STRING &quot;&quot; FORCE)
+	set(LAST_SWSCALE_VERSION &quot;${SWSCALE_VERSION}&quot; CACHE STRING &quot;&quot; FORCE)
+endif (EXISTS &quot;${LIBRARY_SOURCE_DIR}/${FFMPEG_SOURCE_ARCHIVE}&quot; AND EXISTS &quot;${LIBRARY_SOURCE_DIR}/${SWSCALE_SOURCE_ARCHIVE}&quot;)
\ No newline at end of file

Added: branches/avidemux_2.6_branch_mean/cmake/admFFmpegUtil.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/admFFmpegUtil.cmake	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/cmake/admFFmpegUtil.cmake	2010-12-27 19:46:51 UTC (rev 6865)
@@ -0,0 +1,72 @@
+MACRO (getFfmpegVersionFromHeader description headerFile definition ffmpegVersion)
+	FILE(READ &quot;${headerFile}&quot; FFMPEG_H)
+	STRING(REGEX MATCH &quot;#define[ ]+${definition}[ ]+([0-9]+)&quot; FFMPEG_H &quot;${FFMPEG_H}&quot;)
+	STRING(REGEX REPLACE &quot;.*[ ]([0-9]+).*&quot; &quot;\\1&quot; ${ffmpegVersion} &quot;${FFMPEG_H}&quot;)
+ENDMACRO (getFfmpegVersionFromHeader)
+
+MACRO (getFfmpegLibNames sourceDir)
+	getFfmpegVersionFromHeader(&quot;libavcodec&quot; &quot;${sourceDir}/libavcodec/avcodec.h&quot; LIBAVCODEC_VERSION_MAJOR LIBAVCODEC_VERSION)
+	getFfmpegVersionFromHeader(&quot;libavcore&quot; &quot;${sourceDir}/libavcore/avcore.h&quot; LIBAVCORE_VERSION_MAJOR LIBAVCORE_VERSION)	
+	getFfmpegVersionFromHeader(&quot;libavformat&quot; &quot;${sourceDir}/libavformat/avformat.h&quot; LIBAVFORMAT_VERSION_MAJOR LIBAVFORMAT_VERSION)
+	getFfmpegVersionFromHeader(&quot;libavutil&quot; &quot;${sourceDir}/libavutil/avutil.h&quot; LIBAVUTIL_VERSION_MAJOR LIBAVUTIL_VERSION)
+	getFfmpegVersionFromHeader(&quot;libpostproc&quot; &quot;${sourceDir}/libpostproc/postprocess.h&quot; LIBPOSTPROC_VERSION_MAJOR LIBPOSTPROC_VERSION)
+	getFfmpegVersionFromHeader(&quot;libswscale&quot; &quot;${sourceDir}/libswscale/swscale.h&quot; LIBSWSCALE_VERSION_MAJOR LIBSWSCALE_VERSION)
+
+	if (UNIX)
+		set(LIBAVCODEC_ADM ADM5)
+	endif (UNIX)
+
+	if (APPLE)
+		set(LIBAVCODEC_LIB lib${LIBAVCODEC_ADM}avcodec.${LIBAVCODEC_VERSION}${CMAKE_SHARED_LIBRARY_SUFFIX})
+		set(LIBAVCORE_LIB lib${LIBAVCODEC_ADM}avcore.${LIBAVCORE_VERSION}${CMAKE_SHARED_LIBRARY_SUFFIX})
+		set(LIBAVFORMAT_LIB lib${LIBAVCODEC_ADM}avformat.${LIBAVFORMAT_VERSION}${CMAKE_SHARED_LIBRARY_SUFFIX})
+		set(LIBAVUTIL_LIB lib${LIBAVCODEC_ADM}avutil.${LIBAVUTIL_VERSION}${CMAKE_SHARED_LIBRARY_SUFFIX})
+		set(LIBPOSTPROC_LIB lib${LIBAVCODEC_ADM}postproc.${LIBPOSTPROC_VERSION}${CMAKE_SHARED_LIBRARY_SUFFIX})
+		set(LIBSWSCALE_LIB lib${LIBAVCODEC_ADM}swscale.${LIBSWSCALE_VERSION}${CMAKE_SHARED_LIBRARY_SUFFIX})
+	elseif (UNIX)
+		set(LIBAVCODEC_LIB lib${LIBAVCODEC_ADM}avcodec${CMAKE_SHARED_LIBRARY_SUFFIX}.${LIBAVCODEC_VERSION})
+		set(LIBAVCORE_LIB lib${LIBAVCODEC_ADM}avcore${CMAKE_SHARED_LIBRARY_SUFFIX}.${LIBAVCORE_VERSION})
+		set(LIBAVFORMAT_LIB lib${LIBAVCODEC_ADM}avformat${CMAKE_SHARED_LIBRARY_SUFFIX}.${LIBAVFORMAT_VERSION})
+		set(LIBAVUTIL_LIB lib${LIBAVCODEC_ADM}avutil${CMAKE_SHARED_LIBRARY_SUFFIX}.${LIBAVUTIL_VERSION})
+		set(LIBPOSTPROC_LIB lib${LIBAVCODEC_ADM}postproc${CMAKE_SHARED_LIBRARY_SUFFIX}.${LIBPOSTPROC_VERSION})
+		set(LIBSWSCALE_LIB lib${LIBAVCODEC_ADM}swscale${CMAKE_SHARED_LIBRARY_SUFFIX}.${LIBSWSCALE_VERSION})
+	else (APPLE)
+		set(LIBAVCODEC_LIB ${LIBAVCODEC_ADM}avcodec-${LIBAVCODEC_VERSION}${CMAKE_SHARED_LIBRARY_SUFFIX})
+		set(LIBAVCORE_LIB ${LIBAVCODEC_ADM}avcore-${LIBAVCORE_VERSION}${CMAKE_SHARED_LIBRARY_SUFFIX})
+		set(LIBAVFORMAT_LIB ${LIBAVCODEC_ADM}avformat-${LIBAVFORMAT_VERSION}${CMAKE_SHARED_LIBRARY_SUFFIX})
+		set(LIBAVUTIL_LIB ${LIBAVCODEC_ADM}avutil-${LIBAVUTIL_VERSION}${CMAKE_SHARED_LIBRARY_SUFFIX})
+		set(LIBPOSTPROC_LIB ${LIBAVCODEC_ADM}postproc-${LIBPOSTPROC_VERSION}${CMAKE_SHARED_LIBRARY_SUFFIX})
+		set(LIBSWSCALE_LIB ${LIBAVCODEC_ADM}swscale-${LIBSWSCALE_VERSION}${CMAKE_SHARED_LIBRARY_SUFFIX})
+	endif (APPLE)
+ENDMACRO (getFfmpegLibNames)
+
+MACRO (registerFFmpeg sourceDir binaryDir installed)
+	getFfmpegLibNames(&quot;${sourceDir}&quot;)
+
+	add_library(ADM_libswscale UNKNOWN IMPORTED)
+	add_library(ADM_libpostproc UNKNOWN IMPORTED)
+	add_library(ADM_libavutil UNKNOWN IMPORTED)
+	add_library(ADM_libavcodec UNKNOWN IMPORTED)
+	add_library(ADM_libavformat UNKNOWN IMPORTED)
+	add_library(ADM_libavcore UNKNOWN IMPORTED)
+
+	if (${installed})
+		set_property(TARGET ADM_libswscale PROPERTY IMPORTED_LOCATION &quot;${binaryDir}/${LIBSWSCALE_LIB}&quot;)
+		set_property(TARGET ADM_libpostproc PROPERTY IMPORTED_LOCATION &quot;${binaryDir}/${LIBPOSTPROC_LIB}&quot;)
+		set_property(TARGET ADM_libavutil PROPERTY IMPORTED_LOCATION &quot;${binaryDir}/${LIBAVUTIL_LIB}&quot;)
+		set_property(TARGET ADM_libavcodec PROPERTY IMPORTED_LOCATION &quot;${binaryDir}/${LIBAVCODEC_LIB}&quot;)
+		set_property(TARGET ADM_libavformat PROPERTY IMPORTED_LOCATION &quot;${binaryDir}/${LIBAVFORMAT_LIB}&quot;)
+		set_property(TARGET ADM_libavcore PROPERTY IMPORTED_LOCATION &quot;${binaryDir}/${LIBAVCORE_LIB}&quot;)
+	else (${installed})
+		set_property(TARGET ADM_libswscale PROPERTY IMPORTED_LOCATION &quot;${binaryDir}/libswscale/${LIBSWSCALE_LIB}&quot;)
+		set_property(TARGET ADM_libpostproc PROPERTY IMPORTED_LOCATION &quot;${binaryDir}/libpostproc/${LIBPOSTPROC_LIB}&quot;)
+		set_property(TARGET ADM_libavutil PROPERTY IMPORTED_LOCATION &quot;${binaryDir}/libavutil/${LIBAVUTIL_LIB}&quot;)
+		set_property(TARGET ADM_libavcodec PROPERTY IMPORTED_LOCATION &quot;${binaryDir}/libavcodec/${LIBAVCODEC_LIB}&quot;)
+		set_property(TARGET ADM_libavformat PROPERTY IMPORTED_LOCATION &quot;${binaryDir}/libavformat/${LIBAVFORMAT_LIB}&quot;)
+		set_property(TARGET ADM_libavcore PROPERTY IMPORTED_LOCATION &quot;${binaryDir}/libavcore/${LIBAVCORE_LIB}&quot;)
+	endif (${installed})
+
+	include_directories(&quot;${sourceDir}&quot;)
+	include_directories(&quot;${sourceDir}/libavutil&quot;)
+	include_directories(&quot;${sourceDir}/libpostproc&quot;)
+ENDMACRO (registerFFmpeg)
\ No newline at end of file

Added: branches/avidemux_2.6_branch_mean/cmake/patches/common.mak.diff
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/patches/common.mak.diff	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/cmake/patches/common.mak.diff	2010-12-27 19:46:51 UTC (rev 6865)
@@ -0,0 +1,13 @@
+Index: common.mak
+===================================================================
+--- common.mak	(revision 18300)
++++ common.mak	(working copy)
+@@ -62,7 +62,7 @@
+ FFLIBS    := $(FFLIBS-yes) $(FFLIBS)
+ TESTPROGS += $(TESTPROGS-yes)
+ 
+-FFEXTRALIBS := $(addprefix -l,$(addsuffix $(BUILDSUF),$(FFLIBS))) $(EXTRALIBS)
++FFEXTRALIBS := $(addprefix -lADM5,$(addsuffix $(BUILDSUF),$(FFLIBS))) $(EXTRALIBS)
+ FFLDFLAGS   := $(addprefix -L$(BUILD_ROOT)/lib,$(ALLFFLIBS)) $(LDFLAGS)
+ 
+ EXAMPLES  := $(addprefix $(SUBDIR),$(addsuffix -example$(EXESUF),$(EXAMPLES)))

Added: branches/avidemux_2.6_branch_mean/cmake/patches/config.mak.diff
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/patches/config.mak.diff	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/cmake/patches/config.mak.diff	2010-12-27 19:46:51 UTC (rev 6865)
@@ -0,0 +1,11 @@
+--- config.mak.old	2009-05-01 19:26:13.808782802 +0200
++++ config.mak	2009-05-01 18:10:25.000085291 +0200
+@@ -60,7 +60,7 @@
+ BUILD_SHARED=yes
+ PIC=-fPIC -DPIC
+ LIBTARGET=
+-SLIBNAME=$(SLIBPREF)$(FULLNAME)$(SLIBSUF)
++SLIBNAME=$(SLIBPREF)ADM6$(FULLNAME)$(SLIBSUF)
+ SLIBNAME_WITH_VERSION=$(SLIBNAME).$(LIBVERSION)
+ SLIBNAME_WITH_MAJOR=$(SLIBNAME).$(LIBMAJOR)
+ SLIB_CREATE_DEF_CMD=

Added: branches/avidemux_2.6_branch_mean/cmake/patches/config_macosx.mak.diff
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/patches/config_macosx.mak.diff	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/cmake/patches/config_macosx.mak.diff	2010-12-27 19:46:51 UTC (rev 6865)
@@ -0,0 +1,13 @@
+--- config.mak.old	2009-05-01 19:26:13.808782802 +0200
++++ config.mak	2009-05-01 18:10:25.000085291 +0200
+@@ -60,7 +60,7 @@
+ INSTALL=install
+ LIBTARGET=
+-SLIBNAME=$(SLIBPREF)$(FULLNAME)$(SLIBSUF)
+-SLIBNAME_WITH_VERSION=$(SLIBPREF)$(FULLNAME).$(LIBVERSION)$(SLIBSUF)
+-SLIBNAME_WITH_MAJOR=$(SLIBPREF)$(FULLNAME).$(LIBMAJOR)$(SLIBSUF)
++SLIBNAME=$(SLIBPREF)ADM6$(FULLNAME)$(SLIBSUF)
++SLIBNAME_WITH_VERSION=$(SLIBPREF)ADM5$(FULLNAME).$(LIBVERSION)$(SLIBSUF)
++SLIBNAME_WITH_MAJOR=$(SLIBPREF)ADM5$(FULLNAME).$(LIBMAJOR)$(SLIBSUF)
+ SLIB_CREATE_DEF_CMD=
+ SLIB_EXTRA_CMD=

Added: branches/avidemux_2.6_branch_mean/cmake/patches/createPatches.sh
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/patches/createPatches.sh	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/cmake/patches/createPatches.sh	2010-12-27 19:46:51 UTC (rev 6865)
@@ -0,0 +1,35 @@
+#!/bin/bash
+
+export curDir=$PWD
+export ffmpegPath=../../avidemux/ADM_libraries/ffmpeg
+
+function updatePatch {
+	cd $ffmpegPath
+	cp $1/$2 $1/$2.new
+	svn revert $1/$2
+	unix2dos $1/$2
+	unix2dos $1/$2.new
+	mv $1/$2 $1/$2.old
+	mv $1/$2.new $1/$2
+	diff -u $1/$2.old $1/$2 &gt; $curDir/$1_$2.patch
+	rm $1/$2.old
+	cd $curDir
+	dos2unix $1_$2.patch
+}
+
+updatePatch libavcodec avcodec.h
+updatePatch libavcodec ffv1.c
+updatePatch libavcodec h263dec.c
+updatePatch libavcodec h264.c
+updatePatch libavcodec h264_parser.c
+updatePatch libavcodec mpeg12.c
+updatePatch libavcodec mpeg12enc.c
+updatePatch libavcodec mpegvideo.c
+updatePatch libavcodec mpegvideo_enc.c
+updatePatch libavcodec utils.c
+updatePatch libavcodec vc1dec.c
+updatePatch libavformat file.c
+updatePatch libavformat isom.c
+updatePatch libavformat matroskaenc.c
+updatePatch libavutil avutil.h
+

Added: branches/avidemux_2.6_branch_mean/cmake/patches/libavcodec_avcodec.h.patch
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/patches/libavcodec_avcodec.h.patch	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/cmake/patches/libavcodec_avcodec.h.patch	2010-12-27 19:46:51 UTC (rev 6865)
@@ -0,0 +1,28 @@
+--- libavcodec/avcodec.h.old	2010-12-20 13:49:18 +0000
++++ libavcodec/avcodec.h	2010-12-20 13:49:18 +0000
+@@ -665,6 +665,8 @@
+ #define CODEC_FLAG2_PSY           0x00080000 ///&lt; Use psycho visual optimizations.
+ #define CODEC_FLAG2_SSIM          0x00100000 ///&lt; Compute SSIM during encoding, error[] values are undefined.
+ #define CODEC_FLAG2_INTRA_REFRESH 0x00200000 ///&lt; Use periodic insertion of intra blocks instead of keyframes.
++//MEANX: NEVER EVER USE CLOSED GOP ?
++#define CODEC_FLAG2_32_PULLDOWN   0x80000000
+ 
+ /* Unsupported options :
+  *              Syntax Arithmetic coding (SAC)
+@@ -1559,6 +1561,7 @@
+      * - decoding: unused
+      */
+     int rc_max_rate;
++    int rc_max_rate_header; /*&lt; That one is set in the header MEANX */
+ 
+     /**
+      * minimum bitrate
+@@ -1573,6 +1576,8 @@
+      * - decoding: unused
+      */
+     int rc_buffer_size;
++    int rc_buffer_size_header;  /*&lt; That one is set in the header MEANX*/
++
+     float rc_buffer_aggressivity;
+ 
+     /**

Added: branches/avidemux_2.6_branch_mean/cmake/patches/libavcodec_ff_spsinfo.h.patch
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/patches/libavcodec_ff_spsinfo.h.patch	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/cmake/patches/libavcodec_ff_spsinfo.h.patch	2010-12-27 19:46:51 UTC (rev 6865)
@@ -0,0 +1,22 @@
+Index: libavcodec/ff_spsinfo.h
+===================================================================
+--- libavcodec/ff_spsinfo.h	(revision 0)
++++ libavcodec/ff_spsinfo.h	(revision 0)
+@@ -0,0 +1,17 @@
++#ifndef FF_SPS_INFO_H
++#define FF_SPS_INFO_H
++
++typedef struct
++{
++	int width;
++	int height;
++	int fps1000;
++	int darNum;
++	int darDen;
++	int hasStructInfo;
++	int CpbDpbToSkip;
++}ffSpsInfo;
++
++
++#endif
++

Added: branches/avidemux_2.6_branch_mean/cmake/patches/libavcodec_ffv1.c.patch
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/patches/libavcodec_ffv1.c.patch	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/cmake/patches/libavcodec_ffv1.c.patch	2010-12-27 19:46:51 UTC (rev 6865)
@@ -0,0 +1,11 @@
+--- libavcodec/ffv1.c.old	2010-12-20 13:49:20 +0000
++++ libavcodec/ffv1.c	2010-12-20 13:49:20 +0000
+@@ -1734,6 +1734,8 @@
+         clear_state(f);
+     }else{
+         p-&gt;key_frame= 0;
++         p-&gt;pict_type= FF_P_TYPE; // MEANX : looks more like a P to me as user
++
+     }
+     if(f-&gt;ac&gt;1){
+         int i;

Added: branches/avidemux_2.6_branch_mean/cmake/patches/libavcodec_h263dec.c.patch
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/patches/libavcodec_h263dec.c.patch	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/cmake/patches/libavcodec_h263dec.c.patch	2010-12-27 19:46:51 UTC (rev 6865)
@@ -0,0 +1,56 @@
+--- libavcodec/h263dec.c.old	2010-12-20 13:49:21 +0000
++++ libavcodec/h263dec.c	2010-12-20 13:49:21 +0000
+@@ -120,6 +120,25 @@
+ 
+     return 0;
+ }
++/* MeanX : Ugly patch to detect vo ppacked stuff ... */
++int av_is_voppacked(AVCodecContext *avctx, int *vop_packed, int *gmc, int *qpel);
++
++int av_is_voppacked(AVCodecContext *avctx, int *vop_packed, int *gmc, int *qpel)
++{
++    MpegEncContext *s = avctx-&gt;priv_data;
++    // set sane default
++    *vop_packed=0;
++    *gmc=0;
++    *qpel=0;
++    if(avctx-&gt;codec-&gt;id!=CODEC_ID_MPEG4) return 0;
++    	
++  	*vop_packed=(s-&gt;divx_packed);
++	*qpel=s-&gt;quarter_sample;
++	*gmc=0;	// FIXME
++	return 1;
++
++  }
++  /* MeanX */
+ 
+ av_cold int ff_h263_decode_end(AVCodecContext *avctx)
+ {
+@@ -422,6 +441,12 @@
+     } else {
+         ret = h263_decode_picture_header(s);
+     }
++	//MEANX we need to do it here also for quicktime file / ctts atom 
++        // we need the correct frame type, and qt file may contain 
++        // vop not coded frame.
++        pict-&gt;pict_type=s-&gt;current_picture.pict_type= s-&gt;pict_type;
++        pict-&gt;key_frame=s-&gt;current_picture.key_frame= s-&gt;pict_type == FF_I_TYPE;
++        //MEANX
+ 
+     if(ret==FRAME_SKIPPED) return get_consumed_bytes(s, buf_size);
+ 
+@@ -717,6 +742,14 @@
+ 
+ assert(s-&gt;current_picture.pict_type == s-&gt;current_picture_ptr-&gt;pict_type);
+ assert(s-&gt;current_picture.pict_type == s-&gt;pict_type);
++/* MEANX */
++  if(s-&gt;current_picture_ptr)
++      s-&gt;current_picture_ptr-&gt;opaque=pict-&gt;opaque;
++/* MEANX */
++
++
++
++
+     if (s-&gt;pict_type == FF_B_TYPE || s-&gt;low_delay) {
+         *pict= *(AVFrame*)s-&gt;current_picture_ptr;
+     } else if (s-&gt;last_picture_ptr != NULL) {

Added: branches/avidemux_2.6_branch_mean/cmake/patches/libavcodec_h264.c.patch
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/patches/libavcodec_h264.c.patch	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/cmake/patches/libavcodec_h264.c.patch	2010-12-27 19:46:51 UTC (rev 6865)
@@ -0,0 +1,22 @@
+--- libavcodec/h264.c.old	2010-12-20 13:49:22 +0000
++++ libavcodec/h264.c	2010-12-20 13:49:22 +0000
+@@ -3395,6 +3395,19 @@
+     return 0;
+ }
+ 
++/* MEANX */
++int av_getAVCStreamInfo(AVCodecContext *avctx, uint32_t  *nalSize, uint32_t *isAvc);
++
++int av_getAVCStreamInfo(AVCodecContext *avctx, uint32_t  *nalSize, uint32_t *isAvc)
++{
++      H264Context *h = avctx-&gt;priv_data;
++      assert(h);
++      *nalSize=h-&gt;nal_length_size;
++      *isAvc=h-&gt;is_avc;
++	return 1;
++
++  }
++/* MeanX */
+ 
+ AVCodec h264_decoder = {
+     &quot;h264&quot;,

Added: branches/avidemux_2.6_branch_mean/cmake/patches/libavcodec_h264_parser.c.patch
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/patches/libavcodec_h264_parser.c.patch	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/cmake/patches/libavcodec_h264_parser.c.patch	2010-12-27 19:46:51 UTC (rev 6865)
@@ -0,0 +1,55 @@
+--- libavcodec/h264_parser.c.old	2010-12-20 13:49:23 +0000
++++ libavcodec/h264_parser.c	2010-12-20 13:49:23 +0000
+@@ -30,7 +30,52 @@
+ #include &quot;h264data.h&quot;
+ #include &quot;golomb.h&quot;
+ 
++#include &quot;ff_spsinfo.h&quot; // MEANX
+ #include &lt;assert.h&gt;
++ // MEANX
++int ff_h264_info(AVCodecParserContext *parser,ffSpsInfo *info);
++/**
++    \fn AVCodecParserContext
++*/
++int ff_h264_info(AVCodecParserContext *parser,ffSpsInfo *info)
++{
++    H264Context *ctx = parser-&gt;priv_data;
++    memset(info,0,sizeof(*info));
++    if(!ctx-&gt;sps.mb_width || !ctx-&gt;sps.mb_height)
++    {
++        return 0;
++    }
++    info-&gt;width=ctx-&gt;sps.mb_width  * 16;
++    info-&gt;height=(2-ctx-&gt;sps.frame_mbs_only_flag)*ctx-&gt;sps.mb_height * 16;
++    if(ctx-&gt;sps.timing_info_present_flag)
++    {
++            float scale=ctx-&gt;sps.time_scale ;
++            float ticks=ctx-&gt;sps.num_units_in_tick;
++            info-&gt;fps1000 =  (uint32_t) ((scale/ticks) *    1000.);
++#undef printf
++            printf(&quot;Scale : %d, tick=%d, fps=%d\n&quot;,(int)scale,(int)ticks,(int)info-&gt;fps1000);
++    }else
++    {
++            printf(&quot;[H264] No timing information\n&quot;);
++            info-&gt;fps1000=25000;
++    }
++    // D.2.2 SEI Timing present if CpbDbpDelayPresentFlag=1 or pictStructPresent=1
++    // CpbDbpDelayPresentFlag =1 if nal_hdr or vcl_hrd or ???
++    int f=ctx-&gt;sps.nal_hrd_parameters_present_flag | ctx-&gt;sps.vcl_hrd_parameters_present_flag;
++    info-&gt;hasStructInfo=f | ctx-&gt;sps.pic_struct_present_flag;;
++    // While decoding SEI, if CpbDpbDelaysPresentFlags is there we skip cpb_removal_delay + dpb_output_delay
++
++    info-&gt;CpbDpbToSkip=0;
++    if(f)
++    {
++        info-&gt;CpbDpbToSkip=ctx-&gt;sps.cpb_removal_delay_length+ctx-&gt;sps.dpb_output_delay_length;
++    }
++#warning fixme sar vs dar
++    info-&gt;darNum=ctx-&gt;sps.sar.num;
++    info-&gt;darDen=ctx-&gt;sps.sar.den;
++    return 1;
++}
++// /MEANX
+ 
+ 
+ int ff_h264_find_frame_end(H264Context *h, const uint8_t *buf, int buf_size)

Added: branches/avidemux_2.6_branch_mean/cmake/patches/libavcodec_mpeg12.c.patch
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/patches/libavcodec_mpeg12.c.patch	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/cmake/patches/libavcodec_mpeg12.c.patch	2010-12-27 19:46:51 UTC (rev 6865)
@@ -0,0 +1,14 @@
+--- libavcodec/mpeg12.c.old	2010-12-20 13:49:23 +0000
++++ libavcodec/mpeg12.c	2010-12-20 13:49:23 +0000
+@@ -1948,6 +1948,11 @@
+         ff_er_frame_end(s);
+ 
+         MPV_frame_end(s);
++/* MEANX */
++  if(s-&gt;current_picture_ptr)
++      s-&gt;current_picture_ptr-&gt;opaque=pict-&gt;opaque;
++/* MEANX */
++
+ 
+         if (s-&gt;pict_type == FF_B_TYPE || s-&gt;low_delay) {
+             *pict= *(AVFrame*)s-&gt;current_picture_ptr;

Added: branches/avidemux_2.6_branch_mean/cmake/patches/libavcodec_mpeg12enc.c.patch
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/patches/libavcodec_mpeg12enc.c.patch	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/cmake/patches/libavcodec_mpeg12enc.c.patch	2010-12-27 19:46:51 UTC (rev 6865)
@@ -0,0 +1,188 @@
+--- libavcodec/mpeg12enc.c.old	2010-12-20 13:49:24 +0000
++++ libavcodec/mpeg12enc.c	2010-12-20 13:49:24 +0000
+@@ -127,10 +127,19 @@
+             s-&gt;frame_rate_index= i;
+         }
+     }
++ /* MEANX 
++
+     if(dmin)
+         return -1;
+     else
+         return 0;
++  */
++        if(dmin&gt;4)
++   {
++        av_log(0,AV_LOG_ERROR,&quot;We did a roundup ! Expect async!\n&quot;);
++   }
++        return 0; //MEANX
++
+ }
+ 
+ static av_cold int encode_init(AVCodecContext *avctx)
+@@ -209,6 +218,7 @@
+             put_sbits(&amp;s-&gt;pb, 12, s-&gt;width );
+             put_sbits(&amp;s-&gt;pb, 12, s-&gt;height);
+ 
++#if 0 //MEANX
+             for(i=1; i&lt;15; i++){
+                 float error= aspect_ratio;
+                 if(s-&gt;codec_id == CODEC_ID_MPEG1VIDEO || i &lt;=1)
+@@ -223,20 +233,44 @@
+                     s-&gt;aspect_ratio_info= i;
+                 }
+             }
++#endif // MEANX
++            //MEANX put_bits(&amp;s-&gt;pb, 4, s-&gt;aspect_ratio_info);
++            //MEANX put_bits(&amp;s-&gt;pb, 4, s-&gt;frame_rate_index);
++ // MEANX 4:3
++  if(s-&gt;avctx-&gt;sample_aspect_ratio.num==16 &amp;&amp; s-&gt;avctx-&gt;sample_aspect_ratio.den==9)
++            {
++                //printf(&quot;FFmpeg : Wide\n&quot;);
++                put_bits(&amp;s-&gt;pb,4,3); //16:9
++            }
++            else        //4:3
++            {
++              if(s-&gt;codec_id == CODEC_ID_MPEG2VIDEO)
++                put_bits(&amp;s-&gt;pb, 4, 2);
++              else
++                put_bits(&amp;s-&gt;pb, 4, 12); // MPEG1
++            }
++// /MEANX
+ 
+-            put_bits(&amp;s-&gt;pb, 4, s-&gt;aspect_ratio_info);
+-            put_bits(&amp;s-&gt;pb, 4, s-&gt;frame_rate_index);
++// //MEANX PULLDOWN            put_bits(&amp;s-&gt;pb, 4, s-&gt;frame_rate_index);
++if((s-&gt;flags2 &amp; CODEC_FLAG2_32_PULLDOWN) &amp;&amp; (s-&gt;codec_id == CODEC_ID_MPEG2VIDEO))
++            {           
++                put_bits(&amp;s-&gt;pb, 4,4);
++            }
++            else
++            {                                  
++                put_bits(&amp;s-&gt;pb, 4, s-&gt;frame_rate_index);
++            } //MEANX pulldown
+ 
+-            if(s-&gt;avctx-&gt;rc_max_rate){
+-                v = (s-&gt;avctx-&gt;rc_max_rate + 399) / 400;
++            if(s-&gt;avctx-&gt;rc_max_rate_header){ //MEANX we use header
++                v = (s-&gt;avctx-&gt;rc_max_rate_header + 399) / 400;
+                 if (v &gt; 0x3ffff &amp;&amp; s-&gt;codec_id == CODEC_ID_MPEG1VIDEO)
+                     v = 0x3ffff;
+             }else{
+                 v= 0x3FFFF;
+             }
+ 
+-            if(s-&gt;avctx-&gt;rc_buffer_size)
+-                vbv_buffer_size = s-&gt;avctx-&gt;rc_buffer_size;
++            if(s-&gt;avctx-&gt;rc_buffer_size_header) // MEANX we use header
++                vbv_buffer_size = s-&gt;avctx-&gt;rc_buffer_size_header;
+             else
+                 /* VBV calculation: Scaled so that a VCD has the proper VBV size of 40 kilobytes */
+                 vbv_buffer_size = (( 20 * s-&gt;bit_rate) / (1151929 / 2)) * 8 * 1024;
+@@ -269,8 +303,17 @@
+ 
+                 put_bits(&amp;s-&gt;pb, 3, s-&gt;avctx-&gt;profile); //profile
+                 put_bits(&amp;s-&gt;pb, 4, s-&gt;avctx-&gt;level); //level
++   // MEANX pulldown put_bits(&amp;s-&gt;pb, 1, s-&gt;progressive_sequence);
++  // MEANX Pulldown
++ if(s-&gt;flags2 &amp; CODEC_FLAG2_32_PULLDOWN) //MEANX
++                        put_bits(&amp;s-&gt;pb, 1, 0);
++                else
++                        put_bits(&amp;s-&gt;pb, 1, s-&gt;progressive_sequence);
++
++
++// /MEANX
++
+ 
+-                put_bits(&amp;s-&gt;pb, 1, s-&gt;progressive_sequence);
+                 put_bits(&amp;s-&gt;pb, 2, s-&gt;chroma_format);
+                 put_bits(&amp;s-&gt;pb, 2, s-&gt;width &gt;&gt;12);
+                 put_bits(&amp;s-&gt;pb, 2, s-&gt;height&gt;&gt;12);
+@@ -339,6 +382,8 @@
+ 
+ void mpeg1_encode_picture_header(MpegEncContext *s, int picture_number)
+ {
++	int tff,rff; //MEANX
++
+     mpeg1_encode_sequence_header(s);
+ 
+     /* mpeg1 picture header */
+@@ -375,6 +420,49 @@
+ 
+     s-&gt;frame_pred_frame_dct = 1;
+     if(s-&gt;codec_id == CODEC_ID_MPEG2VIDEO){
++ /* MEANX -- Pulldown */
++        if(s-&gt;flags2 &amp; CODEC_FLAG2_32_PULLDOWN)
++        {
++        
++                switch((s-&gt;picture_number - 
++                          s-&gt;gop_picture_number)&amp;3)
++                {
++                        case 0:
++                        default:
++                                rff=1;
++                                tff=1;
++                                break;
++                        case 1:
++                                rff=0;
++                                tff=0;
++                                break;
++                        case 2:
++                                rff=1;
++                                tff=0;
++                                break;
++                        case 3:
++                                rff=0;
++                                tff=1;
++                                break;
++                }               
++           }
++        else
++        {
++                if (s-&gt;progressive_sequence) 
++                {
++                        tff=0; /* no repeat */
++                } else 
++                {
++                        tff= s-&gt;current_picture_ptr-&gt;top_field_first;
++                }
++                rff=s-&gt;repeat_first_field;
++        
++        }
++
++//               /MEANX pulldown
++
++
++
+         put_header(s, EXT_START_CODE);
+         put_bits(&amp;s-&gt;pb, 4, 8); //pic ext
+         if (s-&gt;pict_type == FF_P_TYPE || s-&gt;pict_type == FF_B_TYPE) {
+@@ -393,11 +481,16 @@
+ 
+         assert(s-&gt;picture_structure == PICT_FRAME);
+         put_bits(&amp;s-&gt;pb, 2, s-&gt;picture_structure);
++#if 0 //MEANX
++
+         if (s-&gt;progressive_sequence) {
+             put_bits(&amp;s-&gt;pb, 1, 0); /* no repeat */
+         } else {
+             put_bits(&amp;s-&gt;pb, 1, s-&gt;current_picture_ptr-&gt;top_field_first);
+         }
++#endif
++         put_bits(&amp;s-&gt;pb, 1, tff);  //MEANX PULLDOWN
++
+         /* XXX: optimize the generation of this flag with entropy
+            measures */
+         s-&gt;frame_pred_frame_dct = s-&gt;progressive_sequence;
+@@ -407,7 +500,10 @@
+         put_bits(&amp;s-&gt;pb, 1, s-&gt;q_scale_type);
+         put_bits(&amp;s-&gt;pb, 1, s-&gt;intra_vlc_format);
+         put_bits(&amp;s-&gt;pb, 1, s-&gt;alternate_scan);
+-        put_bits(&amp;s-&gt;pb, 1, s-&gt;repeat_first_field);
++ // MEANX put_bits(&amp;s-&gt;pb, 1, s-&gt;repeat_first_field);
++	put_bits(&amp;s-&gt;pb, 1, rff);
++      // /MEANX
++
+         s-&gt;progressive_frame = s-&gt;progressive_sequence;
+         put_bits(&amp;s-&gt;pb, 1, s-&gt;chroma_format == CHROMA_420 ? s-&gt;progressive_frame : 0); /* chroma_420_type */
+         put_bits(&amp;s-&gt;pb, 1, s-&gt;progressive_frame);

Added: branches/avidemux_2.6_branch_mean/cmake/patches/libavcodec_mpegvideo.c.patch
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/patches/libavcodec_mpegvideo.c.patch	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/cmake/patches/libavcodec_mpegvideo.c.patch	2010-12-27 19:46:51 UTC (rev 6865)
@@ -0,0 +1,15 @@
+--- libavcodec/mpegvideo.c.old	2010-12-20 13:49:25 +0000
++++ libavcodec/mpegvideo.c	2010-12-20 13:49:25 +0000
+@@ -653,7 +653,11 @@
+     FF_ALLOCZ_OR_GOTO(s-&gt;avctx, s-&gt;prev_pict_types, PREV_PICT_TYPES_BUFFER_SIZE, fail);
+ 
+     s-&gt;parse_context.state= -1;
+-    if((s-&gt;avctx-&gt;debug&amp;(FF_DEBUG_VIS_QP|FF_DEBUG_VIS_MB_TYPE)) || (s-&gt;avctx-&gt;debug_mv)){
++ //MEANX: Allocate them always, as they may be free when we decode 1st image
++
++    // MEANXif((s-&gt;avctx-&gt;debug&amp;(FF_DEBUG_VIS_QP|FF_DEBUG_VIS_MB_TYPE)) || (s-&gt;avctx-&gt;debug_mv)){
++if(1){ // MEANX
++
+        s-&gt;visualization_buffer[0] = av_malloc((s-&gt;mb_width*16 + 2*EDGE_WIDTH) * s-&gt;mb_height*16 + 2*EDGE_WIDTH);
+        s-&gt;visualization_buffer[1] = av_malloc((s-&gt;mb_width*16 + 2*EDGE_WIDTH) * s-&gt;mb_height*16 + 2*EDGE_WIDTH);
+        s-&gt;visualization_buffer[2] = av_malloc((s-&gt;mb_width*16 + 2*EDGE_WIDTH) * s-&gt;mb_height*16 + 2*EDGE_WIDTH);

Added: branches/avidemux_2.6_branch_mean/cmake/patches/libavcodec_mpegvideo_enc.c.patch
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/patches/libavcodec_mpegvideo_enc.c.patch	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/cmake/patches/libavcodec_mpegvideo_enc.c.patch	2010-12-27 19:46:51 UTC (rev 6865)
@@ -0,0 +1,30 @@
+--- libavcodec/mpegvideo_enc.c.old	2010-12-20 13:49:26 +0000
++++ libavcodec/mpegvideo_enc.c	2010-12-20 13:49:26 +0000
+@@ -367,12 +367,14 @@
+ 
+         av_log(avctx, AV_LOG_INFO, &quot;Warning vbv_delay will be set to 0xFFFF (=VBR) as the specified vbv buffer is too large for the given bitrate!\n&quot;);
+     }
++#if 0 //MEANX
+ 
+     if((s-&gt;flags &amp; CODEC_FLAG_4MV) &amp;&amp; s-&gt;codec_id != CODEC_ID_MPEG4
+        &amp;&amp; s-&gt;codec_id != CODEC_ID_H263 &amp;&amp; s-&gt;codec_id != CODEC_ID_H263P &amp;&amp; s-&gt;codec_id != CODEC_ID_FLV1){
+         av_log(avctx, AV_LOG_ERROR, &quot;4MV not supported by codec\n&quot;);
+         return -1;
+     }
++#endif
+ 
+     if(s-&gt;obmc &amp;&amp; s-&gt;avctx-&gt;mb_decision != FF_MB_DECISION_SIMPLE){
+         av_log(avctx, AV_LOG_ERROR, &quot;OBMC is only supported with simple mb decision\n&quot;);
+@@ -413,10 +415,12 @@
+         return -1;
+     }
+ 
++#if 0 //MEANX
+     if(s-&gt;mpeg_quant &amp;&amp; s-&gt;codec_id != CODEC_ID_MPEG4){ //FIXME mpeg2 uses that too
+         av_log(avctx, AV_LOG_ERROR, &quot;mpeg2 style quantization not supported by codec\n&quot;);
+         return -1;
+     }
++#endif
+ 
+     if((s-&gt;flags &amp; CODEC_FLAG_CBP_RD) &amp;&amp; !avctx-&gt;trellis){
+         av_log(avctx, AV_LOG_ERROR, &quot;CBP RD needs trellis quant\n&quot;);

Added: branches/avidemux_2.6_branch_mean/cmake/patches/libavcodec_utils.c.patch
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/patches/libavcodec_utils.c.patch	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/cmake/patches/libavcodec_utils.c.patch	2010-12-27 19:46:51 UTC (rev 6865)
@@ -0,0 +1,15 @@
+--- libavcodec/utils.c.old	2010-12-20 13:49:27 +0000
++++ libavcodec/utils.c	2010-12-20 13:49:27 +0000
+@@ -659,10 +659,12 @@
+ 
+     if((avctx-&gt;codec-&gt;capabilities &amp; CODEC_CAP_DELAY) || avpkt-&gt;size){
+         //FIXME remove the check below _after_ ensuring that all audio check that the available space is enough
++#if 0 // MEANX : Silence
+         if(*frame_size_ptr &lt; AVCODEC_MAX_AUDIO_FRAME_SIZE){
+             av_log(avctx, AV_LOG_ERROR, &quot;buffer smaller than AVCODEC_MAX_AUDIO_FRAME_SIZE\n&quot;);
+             return -1;
+         }
++#endif
+         if(*frame_size_ptr &lt; FF_MIN_BUFFER_SIZE ||
+         *frame_size_ptr &lt; avctx-&gt;channels * avctx-&gt;frame_size * sizeof(int16_t)){
+             av_log(avctx, AV_LOG_ERROR, &quot;buffer %d too small\n&quot;, *frame_size_ptr);

Added: branches/avidemux_2.6_branch_mean/cmake/patches/libavcodec_vc1dec.c.patch
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/patches/libavcodec_vc1dec.c.patch	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/cmake/patches/libavcodec_vc1dec.c.patch	2010-12-27 19:46:51 UTC (rev 6865)
@@ -0,0 +1,14 @@
+--- libavcodec/vc1dec.c.old	2010-12-20 13:49:28 +0000
++++ libavcodec/vc1dec.c	2010-12-20 13:49:28 +0000
+@@ -3146,7 +3146,10 @@
+     AVFrame *pict = data;
+     uint8_t *buf2 = NULL;
+     const uint8_t *buf_start = buf;
+-
++/** MEANX **/
++    if(s-&gt;flags&amp; CODEC_FLAG_LOW_DELAY)
++        s-&gt;low_delay=1;
++/** /MEANX **/
+     /* no supplementary picture */
+     if (buf_size == 0) {
+         /* special case for last picture */

Added: branches/avidemux_2.6_branch_mean/cmake/patches/libavformat_file.c.patch
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/patches/libavformat_file.c.patch	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/cmake/patches/libavformat_file.c.patch	2010-12-27 19:46:51 UTC (rev 6865)
@@ -0,0 +1,78 @@
+--- libavformat/file.c.old	2010-12-20 13:49:28 +0000
++++ libavformat/file.c	2010-12-20 13:49:29 +0000
+@@ -30,6 +30,75 @@
+ #include &lt;stdlib.h&gt;
+ #include &quot;os_support.h&quot;
+ 
++// GRUNTSTER start
++#ifdef __WIN32
++#include &lt;windows.h&gt;
++
++int utf8StringToWideChar(const char *utf8String, int utf8StringLength, wchar_t *wideCharString);
++int ADM_open(const char *path, int oflag, ...);
++
++int utf8StringToWideChar(const char *utf8String, int utf8StringLength, wchar_t *wideCharString)
++{
++	int wideCharStringLength = MultiByteToWideChar(CP_UTF8, 0, utf8String, utf8StringLength, NULL, 0);
++
++	if (wideCharString)
++		MultiByteToWideChar(CP_UTF8, 0, utf8String, utf8StringLength, wideCharString, wideCharStringLength);
++
++	return wideCharStringLength;
++}
++
++int ADM_open(const char *path, int oflag, ...)
++{
++	int fileNameLength = utf8StringToWideChar(path, -1, NULL);
++	wchar_t wcFile[fileNameLength];
++	int creation = 0, access = 0;
++	HANDLE hFile;
++
++	utf8StringToWideChar(path, -1, wcFile);
++
++	if (oflag &amp; O_WRONLY || oflag &amp; O_RDWR)
++	{
++		access = GENERIC_WRITE;
++
++		if (oflag &amp; O_RDWR)
++			access |= GENERIC_READ;
++
++		if (oflag &amp; O_CREAT)
++		{
++			if (oflag &amp; O_EXCL)
++				creation = CREATE_NEW;
++			else if (oflag &amp; O_TRUNC)
++				creation = CREATE_ALWAYS;
++			else
++				creation = OPEN_ALWAYS;
++		}
++		else if (oflag &amp; O_TRUNC)
++			creation = TRUNCATE_EXISTING;
++	}
++	else if (oflag &amp; O_RDONLY)
++		creation = OPEN_EXISTING;
++
++	if (creation &amp; GENERIC_WRITE)
++	{
++		hFile = CreateFileW(wcFile, access, 0, NULL, creation, 0, NULL);
++
++		if (hFile == INVALID_HANDLE_VALUE)
++			return -1;
++		else
++			CloseHandle(hFile);
++	}
++
++	hFile = CreateFileW(wcFile, access, FILE_SHARE_READ, NULL, creation, 0, NULL);
++
++	if (hFile == INVALID_HANDLE_VALUE)
++		return -1;
++	else
++		return _open_osfhandle((intptr_t)hFile, oflag);
++}
++
++#define open ADM_open
++#endif
++// GRUNTSTER end
+ 
+ /* standard file protocol */
+ 

Added: branches/avidemux_2.6_branch_mean/cmake/patches/libavformat_isom.c.patch
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/patches/libavformat_isom.c.patch	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/cmake/patches/libavformat_isom.c.patch	2010-12-27 19:46:51 UTC (rev 6865)
@@ -0,0 +1,14 @@
+--- libavformat/isom.c.old	2010-12-20 13:49:29 +0000
++++ libavformat/isom.c	2010-12-20 13:49:29 +0000
+@@ -222,7 +222,10 @@
+     { CODEC_ID_MP1, MKTAG('.', 'm', 'p', '1') }, /* MPEG layer 1 */
+     { CODEC_ID_MP2, MKTAG('.', 'm', 'p', '2') }, /* MPEG layer 2 */
+ 
+-    { CODEC_ID_MP3, MKTAG('.', 'm', 'p', '3') }, /* MPEG layer 3 */ /* sample files at <A HREF="http://www.3ivx.com/showcase.html">http://www.3ivx.com/showcase.html</A> use this tag */
++    //MEANX { CODEC_ID_MP3, MKTAG('.', 'm', 'p', '3') }, /* MPEG layer 3 */ /* sample files at <A HREF="http://www.3ivx.com/showcase.html">http://www.3ivx.com/showcase.html</A> use this tag */
++     { CODEC_ID_MP3, MKTAG( 'm', 'p', '4','a') },
++     { CODEC_ID_MP2, MKTAG( 'm', 'p', '4', 'a') },
++    // /MEANX
+     { CODEC_ID_MP3, 0x6D730055 }, /* MPEG layer 3 */
+ 
+ /*  { CODEC_ID_OGG_VORBIS, MKTAG('O', 'g', 'g', 'S') }, *//* sample files at <A HREF="http://heroinewarrior.com/xmovie.php3">http://heroinewarrior.com/xmovie.php3</A> use this tag */

Added: branches/avidemux_2.6_branch_mean/cmake/patches/libavformat_matroskaenc.c.patch
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/patches/libavformat_matroskaenc.c.patch	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/cmake/patches/libavformat_matroskaenc.c.patch	2010-12-27 19:46:51 UTC (rev 6865)
@@ -0,0 +1,64 @@
+--- libavformat/matroskaenc.c.old	2010-12-20 13:49:30 +0000
++++ libavformat/matroskaenc.c	2010-12-20 13:49:30 +0000
+@@ -410,6 +410,7 @@
+ 
+ static int put_xiph_codecpriv(AVFormatContext *s, ByteIOContext *pb, AVCodecContext *codec)
+ {
++#if 0 // MEANX avidemux does thing differently
+     uint8_t *header_start[3];
+     int header_len[3];
+     int first_header_size;
+@@ -434,6 +435,28 @@
+         put_buffer(pb, header_start[j], header_len[j]);
+ 
+     return 0;
++#else
++   // Not endian safe....
++      uint32_t packetLen[3],*ptr=(uint32_t *)codec-&gt;extradata;
++      uint8_t *data[3],i,j;
++      if( 3*4+ptr[0]+ptr[1]+ptr[2]!=codec-&gt;extradata_size)
++      {
++        av_log(s, AV_LOG_ERROR, &quot;Broken avidemux xiph header.\n&quot;);
++        return -1;
++      }
++      data[0]=codec-&gt;extradata+3*4;
++      data[1]=data[0]+ptr[0];
++      data[2]=data[1]+ptr[1];
++      put_byte(pb, 2);                    // number packets - 1
++      for (j = 0; j &lt; 2; j++) 
++      {
++          put_xiph_size(pb, ptr[j]);
++      }
++      for (j = 0; j &lt; 3; j++)
++        put_buffer(pb, data[j], ptr[j]);
++      
++      return 0; // /MEANX
++#endif
+ }
+ 
+ static void get_aac_sample_rates(AVFormatContext *s, AVCodecContext *codec, int *sample_rate, int *output_sample_rate)
+@@ -552,6 +575,24 @@
+         put_ebml_uint (pb, MATROSKA_ID_TRACKUID        , i + 1);
+         put_ebml_uint (pb, MATROSKA_ID_TRACKFLAGLACING , 0);    // no lacing (yet)
+ 
++ 		/**  MEANX : Add a default duration for video **/
++ 		if(codec-&gt;codec_type==CODEC_TYPE_VIDEO)
++ 		{
++ 			if(codec-&gt;time_base.den &amp;&amp; codec-&gt;time_base.num)
++ 			{
++ 				int num = codec-&gt;time_base.num;
++ 				int den = codec-&gt;time_base.den;
++ 				unsigned int default_duration;
++ 				float period = num;
++ 
++ 				period /= den;
++ 				period *= 1000*1000*1000; // in ns
++ 				default_duration = (unsigned int)floor(period);
++ 				put_ebml_uint(pb, MATROSKA_ID_TRACKDEFAULTDURATION, default_duration);
++ 			}
++ 		}
++ 		/**  MEANX : Add a default duration for video **/
++
+         if ((tag = av_metadata_get(st-&gt;metadata, &quot;title&quot;, NULL, 0)))
+             put_ebml_string(pb, MATROSKA_ID_TRACKNAME, tag-&gt;value);
+         tag = av_metadata_get(st-&gt;metadata, &quot;language&quot;, NULL, 0);

Added: branches/avidemux_2.6_branch_mean/cmake/patches/libavutil_avutil.h.patch
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/patches/libavutil_avutil.h.patch	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/cmake/patches/libavutil_avutil.h.patch	2010-12-27 19:46:51 UTC (rev 6865)
@@ -0,0 +1,16 @@
+--- libavutil/avutil.h.old	2010-12-20 13:49:31 +0000
++++ libavutil/avutil.h	2010-12-20 13:49:31 +0000
+@@ -26,6 +26,13 @@
+  * external API header
+  */
+ 
++/* MEANX
++ * - */
++#define ASMALIGN(ZEROBITS) &quot;.p2align &quot; #ZEROBITS &quot;\n\t&quot;
++/* /MEANX
++ */
++
++
+ 
+ #define AV_STRINGIFY(s)         AV_TOSTRING(s)
+ #define AV_TOSTRING(s) #s

Modified: branches/avidemux_2.6_branch_mean/myOwnPlugins/demuxer/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/myOwnPlugins/demuxer/CMakeLists.txt	2010-12-26 10:39:41 UTC (rev 6864)
+++ branches/avidemux_2.6_branch_mean/myOwnPlugins/demuxer/CMakeLists.txt	2010-12-27 19:46:51 UTC (rev 6865)
@@ -1,7 +1,7 @@
-###################################################
-#
-#
-###################################################
+###################################################
+#
+#
+###################################################
 MESSAGE(&quot;#####################################&quot;)
 MESSAGE(&quot;Custom demuxer plugin template Started&quot;)
 MESSAGE(&quot;#####################################&quot;)
@@ -13,8 +13,8 @@
 ########################################
 # Where is the top dir ?
 ########################################
-
-MESSAGE(STATUS &quot;Checking for AVIDEMUX_SOURCE_DIR, AVIDEMUX_LIB_DIR, AVIDEMUX_INCLUDE_DIR...&quot;)
+
+MESSAGE(STATUS &quot;Checking for AVIDEMUX_SOURCE_DIR, AVIDEMUX_LIB_DIR, AVIDEMUX_INCLUDE_DIR...&quot;)
 IF (NOT AVIDEMUX_SOURCE_DIR)
 	MESSAGE(FATAL_ERROR &quot;Please add -DAVIDEMUX_SOURCE_DIR=path_to_avidemux_source. You just need the source tree.&quot;)
 ELSE (NOT AVIDEMUX_TOP_SOURCE_DIR)
@@ -33,10 +33,10 @@
         ## We need AVIDEMUX_INCLUDE_DIR 
 	#SET(AVIDEMUX_INCLUDE_DIR &quot;${AVIDEMUX_INCLUDE_DIR}&quot; CACHE STRING &quot;&quot;)
 #ENDIF (NOT AVIDEMUX_INCLUDE_DIR)
-
-
-
-
+
+
+
+
 # Common definitions...
 SET(CMAKE_MODULE_PATH &quot;${AVIDEMUX_TOP_SOURCE_DIR}/cmake&quot; &quot;${CMAKE_MODULE_PATH}&quot;)
 include(${AVIDEMUX_TOP_SOURCE_DIR}/avidemux/commonCmakeApplication.cmake)
@@ -61,20 +61,18 @@
 # Global options
 ########################################
 OPTION(VERBOSE &quot;&quot; OFF)
-################################################
-# Now really define our plugin...
-###############################################
+################################################
+# Now really define our plugin...
+###############################################
 
-include(dm_plugin)
-SET(ADM_wtv_SRCS 
-	ADM_wtvAudio.cpp
-        ADM_wtv.cpp  
-        ADM_wtvPlugin.cpp
-)
-
-ADD_LIBRARY(ADM_dm_wtv SHARED ${ADM_wtv_SRCS})
-
-INCLUDE_DIRECTORIES(&quot;${AVIDEMUX_SOURCE_DIR}/avidemux/ADM_libraries/ADM_ffmpeg&quot;)
-
-INIT_DEMUXER(ADM_dm_wtv)
-INSTALL_DEMUXER(ADM_dm_wtv)
+include(dm_plugin)
+SET(ADM_wtv_SRCS 
+	ADM_wtvAudio.cpp
+        ADM_wtv.cpp  
+        ADM_wtvPlugin.cpp
+)
+
+ADD_LIBRARY(ADM_dm_wtv SHARED ${ADM_wtv_SRCS})
+
+INIT_DEMUXER(ADM_dm_wtv)
+INSTALL_DEMUXER(ADM_dm_wtv)


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004040.html">[Avidemux-svn-commit] r6864 - in branches/avidemux_2.6_branch_mean:	avidemux_core/ADM_core/src cmake
</A></li>
	<LI>Next message: <A HREF="004042.html">[Avidemux-svn-commit] r6866 -	branches/avidemux_2.6_branch_mean/cmake
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4041">[ date ]</a>
              <a href="thread.html#4041">[ thread ]</a>
              <a href="subject.html#4041">[ subject ]</a>
              <a href="author.html#4041">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">More information about the Avidemux-svn-commit
mailing list</a><br>
</body></html>
