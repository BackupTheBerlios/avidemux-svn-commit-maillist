<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Avidemux-svn-commit] r6811 - in	branches/avidemux_2.6_branch_mean/foreignBuilds/mswin: .	avidemux avidemux/Tools faac faad fontconfig js lame libogg	libvorbis libvpx nspr opencore-amr x264 xvid
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/avidemux-svn-commit/2010-December/index.html" >
   <LINK REL="made" HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r6811%20-%20in%0A%09branches/avidemux_2.6_branch_mean/foreignBuilds/mswin%3A%20.%0A%09avidemux%20avidemux/Tools%20faac%20faad%20fontconfig%20js%20lame%20libogg%0A%09libvorbis%20libvpx%20nspr%20opencore-amr%20x264%20xvid&In-Reply-To=%3C20101207192732.A49F7480D89%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003989.html">
   <LINK REL="Next"  HREF="003991.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Avidemux-svn-commit] r6811 - in	branches/avidemux_2.6_branch_mean/foreignBuilds/mswin: .	avidemux avidemux/Tools faac faad fontconfig js lame libogg	libvorbis libvpx nspr opencore-amr x264 xvid</H1>
    <B>gruntster at mail.berlios.de</B> 
    <A HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r6811%20-%20in%0A%09branches/avidemux_2.6_branch_mean/foreignBuilds/mswin%3A%20.%0A%09avidemux%20avidemux/Tools%20faac%20faad%20fontconfig%20js%20lame%20libogg%0A%09libvorbis%20libvpx%20nspr%20opencore-amr%20x264%20xvid&In-Reply-To=%3C20101207192732.A49F7480D89%40sheep.berlios.de%3E"
       TITLE="[Avidemux-svn-commit] r6811 - in	branches/avidemux_2.6_branch_mean/foreignBuilds/mswin: .	avidemux avidemux/Tools faac faad fontconfig js lame libogg	libvorbis libvpx nspr opencore-amr x264 xvid">gruntster at mail.berlios.de
       </A><BR>
    <I>Tue Dec  7 20:27:32 CET 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="003989.html">[Avidemux-svn-commit] r6810 -	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_vorbis
</A></li>
        <LI>Next message: <A HREF="003991.html">[Avidemux-svn-commit] r6812 - in branches/avidemux_2.6_branch_mean:	. foreignBuilds
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3990">[ date ]</a>
              <a href="thread.html#3990">[ thread ]</a>
              <a href="subject.html#3990">[ subject ]</a>
              <a href="author.html#3990">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: gruntster
Date: 2010-12-07 20:27:32 +0100 (Tue, 07 Dec 2010)
New Revision: 6811

Added:
   branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/faac/
   branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/faac/Perform Build.bat
   branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/faad/
   branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/faad/Perform Build.bat
   branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/fontconfig/
   branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/fontconfig/Perform Build.bat
   branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/fontconfig/libtool.patch
   branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/js/
   branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/js/Makefile.ref.patch
   branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/js/Perform Build.bat
   branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/js/WINNT6.1.mk
   branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/js/jsnum.c.patch
   branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/lame/
   branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/lame/Perform Build.bat
   branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/libogg/
   branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/libogg/Perform Build.bat
   branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/libvorbis/
   branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/libvorbis/Perform Build.bat
   branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/libvorbis/libtool.patch
   branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/libvpx/
   branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/libvpx/Perform Build.bat
   branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/libvpx/configure.patch
   branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/libvpx/configure.sh.patch
   branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/nspr/
   branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/nspr/Perform Build.bat
   branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/opencore-amr/
   branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/opencore-amr/Perform Build.bat
   branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/opencore-amr/amrnb_Makefile.in
   branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/opencore-amr/amrwb_Makefile.in
   branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/xvid/
   branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/xvid/Perform Build.bat
   branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/xvid/configure.patch
   branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/xvid/nasm.inc.patch
Modified:
   branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/Set Common Environment Variables.bat
   branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/avidemux/1c. Post-build.bat
   branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/avidemux/2. Create Packages.bat
   branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/avidemux/2b. Package SDK.bat
   branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/avidemux/2c. Package Build.bat
   branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/avidemux/Set Avidemux Environment Variables.bat
   branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/avidemux/Tools/Build Plugins.bat
   branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/avidemux/Tools/gennotes.sh
   branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/avidemux/Tools/gentouch.sh
   branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/x264/Perform Build.bat
Log:
[win] upgrade build scripts

Modified: branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/Set Common Environment Variables.bat
===================================================================
--- branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/Set Common Environment Variables.bat	2010-12-07 19:25:23 UTC (rev 6810)
+++ branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/Set Common Environment Variables.bat	2010-12-07 19:27:32 UTC (rev 6811)
@@ -3,26 +3,18 @@
 set nsisDir=%ProgramFiles32%\NSIS
 
 set devDir=E:\Dev
+set msysDir=E:/Dev/MSYS
 
-if &quot;%BuildBits%&quot; == &quot;32&quot; (
-	set msysDir=E:/Dev/MSYS
-	set qtDir=%devDir%\Qt32
-	set CFLAGS=-m32 
-	set CXXFLAGS=-m32
-	set LDFLAGS=-m32
-	goto :setVars )
+if &quot;%BuildBits%&quot; == &quot;32&quot; goto :setVars
+if &quot;%BuildBits%&quot; == &quot;64&quot; goto :setVars
 
-if &quot;%BuildBits%&quot; == &quot;64&quot; (
-	set msysDir=E:/Dev/MSYS-64
-	set qtDir=%devDir%\Qt64
-	goto :setVars )
-
 echo Error - BuildBits variable not set
 goto error
 
 :setVars
-set mingwDir=%devDir%\MinGW64
-set usrLocalDir=%msysDir%/local32
+set mingwDir=%devDir%\MinGW%BuildBits%
+set usrLocalDir=%msysDir%/local%BuildBits%
+set qtDir=%devDir%\Qt%BuildBits%
 set CMAKE_INCLUDE_PATH=%usrLocalDir%/include
 set CMAKE_LIBRARY_PATH=%usrLocalDir%/lib
 set PKG_CONFIG_PATH=%usrLocalDir%\lib\pkgconfig
@@ -30,6 +22,8 @@
 set CFLAGS=%CFLAGS% -I%CMAKE_INCLUDE_PATH% -L%CMAKE_LIBRARY_PATH%
 set CXXFLAGS=%CXXFLAGS% -I%CMAKE_INCLUDE_PATH% -L%CMAKE_LIBRARY_PATH%
 set LDFLAGS=%LDFLAGS% -shared-libgcc -lstdc++ -L%CMAKE_LIBRARY_PATH%
+set admBuildDir=%devDir%\avidemux_2.6_build%BuildBits%
+set admSdkBuildDir=%devDir%\avidemux_2.6_build%BuildBits%_sdk
 
 if exist &quot;%qtDir%&quot; (
 	for /f %%d in ('dir /b /ad /on %qtDir%') do set qtVer=%%d
@@ -73,7 +67,7 @@
 	goto error
 )
 
-set PATH=%cmakeDir%;%mingwDir%\bin;%usrLocalDir%\bin;%msysDir%\bin;%msysDir%\local32\bin;%qtDir%\bin;%PATH%
+set PATH=%cmakeDir%;%mingwDir%\bin;%usrLocalDir%\bin;%msysDir%\bin;%msysDir%\local-shared\bin;%qtDir%\bin;c:\strawberry\perl\bin;%PATH%
 
 goto end
 

Modified: branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/avidemux/1c. Post-build.bat
===================================================================
--- branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/avidemux/1c. Post-build.bat	2010-12-07 19:25:23 UTC (rev 6810)
+++ branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/avidemux/1c. Post-build.bat	2010-12-07 19:27:32 UTC (rev 6811)
@@ -1,98 +1,100 @@
-mkdir &quot;%sdkBuildDir%\lib&quot;
-move &quot;%buildDir%\lib\*.a&quot; &quot;%sdkBuildDir%\lib&quot;
+mkdir &quot;%sdkBuildDir%\lib%BuildBits%&quot;
+move &quot;%buildDir%\lib\*.a&quot; &quot;%sdkBuildDir%\lib%BuildBits%&quot;
 del /s &quot;%buildDir%\*.a&quot;
 
-mkdir &quot;%sdkBuildDir%\plugin-examples&quot;
-cd &quot;%sdkBuildDir%\plugin-examples&quot;
-copy &quot;%curDir%\Tools\Build Plugins.bat&quot; &quot;%sdkBuildDir%\plugin-examples&quot;
+if &quot;%BuildBits%&quot; == &quot;32&quot; (
+	mkdir &quot;%sdkBuildDir%\plugin-examples&quot;
+	cd &quot;%sdkBuildDir%\plugin-examples&quot;
+	copy &quot;%curDir%\Tools\Build Plugins.bat&quot; &quot;%sdkBuildDir%\plugin-examples&quot;
 
-mkdir &quot;audioDecoders&quot;
-mkdir &quot;audioDecoders\ac3&quot;
-xcopy /s &quot;%sourceDir%\plugins\ADM_audioDecoders\ADM_ad_ac3&quot; &quot;audioDecoders\ac3&quot;
+	mkdir &quot;audioDecoders&quot;
+	mkdir &quot;audioDecoders\ac3&quot;
+	xcopy /s &quot;%sourceDir%\plugins\ADM_audioDecoders\ADM_ad_ac3&quot; &quot;audioDecoders\ac3&quot;
 
-mkdir &quot;audioDevices&quot;
-mkdir &quot;audioDevices\win32&quot;
-xcopy /s &quot;%sourceDir%\plugins\ADM_audioDevices\Win32&quot; &quot;audioDevices\win32&quot;
+	mkdir &quot;audioDevices&quot;
+	mkdir &quot;audioDevices\win32&quot;
+	xcopy /s &quot;%sourceDir%\plugins\ADM_audioDevices\Win32&quot; &quot;audioDevices\win32&quot;
 
-mkdir &quot;audioEncoders&quot;
-mkdir &quot;audioEncoders\pcm&quot;
-xcopy /s &quot;%sourceDir%\plugins\ADM_audioEncoders\pcm&quot; &quot;audioEncoders\pcm&quot;
+	mkdir &quot;audioEncoders&quot;
+	mkdir &quot;audioEncoders\pcm&quot;
+	xcopy /s &quot;%sourceDir%\plugins\ADM_audioEncoders\pcm&quot; &quot;audioEncoders\pcm&quot;
 
-mkdir &quot;videoEncoders&quot;
-mkdir &quot;videoEncoders\mpeg2enc&quot;
-mkdir &quot;videoEncoders\mpeg2enc\common&quot;
-xcopy /s &quot;%sourceDir%\plugins\ADM_videoEncoder\ADM_vidEnc_mpeg2enc&quot; &quot;videoEncoders\mpeg2enc&quot;
-xcopy /s &quot;%sourceDir%\plugins\ADM_videoEncoder\common&quot; &quot;videoEncoders\mpeg2enc\common&quot;
-xcopy /s &quot;%msysDir%\local\lib\libxml2.dll.a&quot; &quot;videoEncoders\mpeg2enc&quot;
-xcopy /s &quot;%msysDir%\local\include\libxml2&quot; &quot;videoEncoders\mpeg2enc&quot;
-rmdir /s/q &quot;videoEncoders\mpeg2enc\mpeg2enc\altivec&quot;
+	mkdir &quot;videoEncoders&quot;
+	mkdir &quot;videoEncoders\mpeg2enc&quot;
+	mkdir &quot;videoEncoders\mpeg2enc\common&quot;
+	xcopy /s &quot;%sourceDir%\plugins\ADM_videoEncoder\ADM_vidEnc_mpeg2enc&quot; &quot;videoEncoders\mpeg2enc&quot;
+	xcopy /s &quot;%sourceDir%\plugins\ADM_videoEncoder\common&quot; &quot;videoEncoders\mpeg2enc\common&quot;
+	xcopy /s &quot;%usrLocalDir%\lib\libxml2.dll.a&quot; &quot;videoEncoders\mpeg2enc&quot;
+	xcopy /s &quot;%usrLocalDir%\include\libxml2&quot; &quot;videoEncoders\mpeg2enc&quot;
+	rmdir /s/q &quot;videoEncoders\mpeg2enc\mpeg2enc\altivec&quot;
 
-mkdir &quot;videoFilters&quot;
-mkdir &quot;videoFilters\fade&quot;
-xcopy /s &quot;%sourceDir%\plugins\ADM_videoFilters\Fade&quot; &quot;videoFilters\fade&quot;
+	mkdir &quot;videoFilters&quot;
+	mkdir &quot;videoFilters\fade&quot;
+	xcopy /s &quot;%sourceDir%\plugins\ADM_videoFilters\Fade&quot; &quot;videoFilters\fade&quot;
 
-del /s CMakeLists.txt
+	del /s CMakeLists.txt
 
-mkdir &quot;%sdkBuildDir%\include&quot;
-mkdir &quot;%sdkBuildDir%\include\ADM_encoder&quot;
-mkdir &quot;%sdkBuildDir%\include\libavutil&quot;
-cd &quot;%sdkBuildDir%\include&quot;
+	mkdir &quot;%sdkBuildDir%\include&quot;
+	mkdir &quot;%sdkBuildDir%\include\ADM_encoder&quot;
+	mkdir &quot;%sdkBuildDir%\include\libavutil&quot;
+	cd &quot;%sdkBuildDir%\include&quot;
 
-copy &quot;%sourceDir%\%buildFolder%\config\ADM_coreConfig.h&quot;
-copy &quot;%sourceDir%\%buildFolder%\config\libavutil\avconfig.h&quot; libavutil
-copy &quot;%sourceDir%\avidemux\ADM_audiocodec\ADM_ad_plugin.h&quot;
-copy &quot;%sourceDir%\avidemux\ADM_audiocodec\ADM_audiocodec.h&quot;
-copy &quot;%sourceDir%\avidemux\ADM_audiodevice\ADM_audiodevice.h&quot;
-copy &quot;%sourceDir%\avidemux\ADM_audiodevice\ADM_audioDeviceInternal.h&quot;
-copy &quot;%sourceDir%\avidemux\ADM_core\include\ADM_assert.h&quot;
-copy &quot;%sourceDir%\avidemux\ADM_core\include\ADM_clock.h&quot;
-copy &quot;%sourceDir%\avidemux\ADM_core\include\ADM_cpucap.h&quot;
-copy &quot;%sourceDir%\avidemux\ADM_core\include\ADM_default.h&quot;
-copy &quot;%sourceDir%\avidemux\ADM_core\include\ADM_dynamicLoading.h&quot;
-copy &quot;%sourceDir%\avidemux\ADM_core\include\ADM_files.h&quot;
-copy &quot;%sourceDir%\avidemux\ADM_core\include\ADM_inttype.h&quot;
-copy &quot;%sourceDir%\avidemux\ADM_core\include\ADM_mangle.h&quot;
-copy &quot;%sourceDir%\avidemux\ADM_core\include\ADM_misc.h&quot;
-copy &quot;%sourceDir%\avidemux\ADM_coreAudio\include\ADM_audioCodecEnum.h&quot;
-copy &quot;%sourceDir%\avidemux\ADM_coreAudio\include\ADM_audiodef.h&quot;
-copy &quot;%sourceDir%\avidemux\ADM_coreAudio\include\ADM_audioFilter.h&quot;
-copy &quot;%sourceDir%\avidemux\ADM_coreAudio\include\ADM_coreAudio.h&quot;
-copy &quot;%sourceDir%\avidemux\ADM_coreAudio\include\audioencoder.h&quot;
-copy &quot;%sourceDir%\avidemux\ADM_coreAudio\include\audioencoderInternal.h&quot;
-copy &quot;%sourceDir%\avidemux\ADM_coreImage\include\ADM_confCouple.h&quot;
-copy &quot;%sourceDir%\avidemux\ADM_coreImage\include\ADM_image.h&quot;
-copy &quot;%sourceDir%\avidemux\ADM_coreImage\include\ADM_rgb.h&quot;
-copy &quot;%sourceDir%\avidemux\ADM_coreImage\include\ADM_videoFilter.h&quot;
-copy &quot;%sourceDir%\avidemux\ADM_coreImage\include\ADM_videoFilterCache.h&quot;
-copy &quot;%sourceDir%\avidemux\ADM_coreImage\include\ADM_videoFilterDynamic.h&quot;
-copy &quot;%sourceDir%\avidemux\ADM_coreImage\include\ADM_videoFilter_iface.h&quot;
-copy &quot;%sourceDir%\avidemux\ADM_coreImage\include\ADM_videoFilter_internal.h&quot;
-copy &quot;%sourceDir%\avidemux\ADM_coreUI\include\DIA_coreToolkit.h&quot;
-copy &quot;%sourceDir%\avidemux\ADM_coreUI\include\DIA_factory.h&quot;
-copy &quot;%sourceDir%\avidemux\ADM_coreUI\include\DIA_uiTypes.h&quot;
-copy &quot;%sourceDir%\avidemux\ADM_encoder\ADM_vidEncode.hxx&quot; ADM_encoder
-copy &quot;%sourceDir%\avidemux\ADM_libraries\ffmpeg\libavutil\pixfmt.h&quot; libavutil
-copy &quot;%sourceDir%\avidemux\ADM_plugin\ADM_vidEnc_plugin.h&quot;
-copy &quot;%sourceDir%\avidemux\ADM_plugin\ADM_plugin_translate.h&quot;
+	copy &quot;%sourceDir%\%buildFolder%\config\ADM_coreConfig.h&quot;
+	copy &quot;%sourceDir%\%buildFolder%\config\libavutil\avconfig.h&quot; libavutil
+	copy &quot;%sourceDir%\avidemux\ADM_audiocodec\ADM_ad_plugin.h&quot;
+	copy &quot;%sourceDir%\avidemux\ADM_audiocodec\ADM_audiocodec.h&quot;
+	copy &quot;%sourceDir%\avidemux\ADM_audiodevice\ADM_audiodevice.h&quot;
+	copy &quot;%sourceDir%\avidemux\ADM_audiodevice\ADM_audioDeviceInternal.h&quot;
+	copy &quot;%sourceDir%\avidemux\ADM_core\include\ADM_assert.h&quot;
+	copy &quot;%sourceDir%\avidemux\ADM_core\include\ADM_clock.h&quot;
+	copy &quot;%sourceDir%\avidemux\ADM_core\include\ADM_cpucap.h&quot;
+	copy &quot;%sourceDir%\avidemux\ADM_core\include\ADM_default.h&quot;
+	copy &quot;%sourceDir%\avidemux\ADM_core\include\ADM_dynamicLoading.h&quot;
+	copy &quot;%sourceDir%\avidemux\ADM_core\include\ADM_files.h&quot;
+	copy &quot;%sourceDir%\avidemux\ADM_core\include\ADM_inttype.h&quot;
+	copy &quot;%sourceDir%\avidemux\ADM_core\include\ADM_mangle.h&quot;
+	copy &quot;%sourceDir%\avidemux\ADM_core\include\ADM_misc.h&quot;
+	copy &quot;%sourceDir%\avidemux\ADM_coreAudio\include\ADM_audioCodecEnum.h&quot;
+	copy &quot;%sourceDir%\avidemux\ADM_coreAudio\include\ADM_audiodef.h&quot;
+	copy &quot;%sourceDir%\avidemux\ADM_coreAudio\include\ADM_audioFilter.h&quot;
+	copy &quot;%sourceDir%\avidemux\ADM_coreAudio\include\ADM_coreAudio.h&quot;
+	copy &quot;%sourceDir%\avidemux\ADM_coreAudio\include\audioencoder.h&quot;
+	copy &quot;%sourceDir%\avidemux\ADM_coreAudio\include\audioencoderInternal.h&quot;
+	copy &quot;%sourceDir%\avidemux\ADM_coreImage\include\ADM_confCouple.h&quot;
+	copy &quot;%sourceDir%\avidemux\ADM_coreImage\include\ADM_image.h&quot;
+	copy &quot;%sourceDir%\avidemux\ADM_coreImage\include\ADM_rgb.h&quot;
+	copy &quot;%sourceDir%\avidemux\ADM_coreImage\include\ADM_videoFilter.h&quot;
+	copy &quot;%sourceDir%\avidemux\ADM_coreImage\include\ADM_videoFilterCache.h&quot;
+	copy &quot;%sourceDir%\avidemux\ADM_coreImage\include\ADM_videoFilterDynamic.h&quot;
+	copy &quot;%sourceDir%\avidemux\ADM_coreImage\include\ADM_videoFilter_iface.h&quot;
+	copy &quot;%sourceDir%\avidemux\ADM_coreImage\include\ADM_videoFilter_internal.h&quot;
+	copy &quot;%sourceDir%\avidemux\ADM_coreUI\include\DIA_coreToolkit.h&quot;
+	copy &quot;%sourceDir%\avidemux\ADM_coreUI\include\DIA_factory.h&quot;
+	copy &quot;%sourceDir%\avidemux\ADM_coreUI\include\DIA_uiTypes.h&quot;
+	copy &quot;%sourceDir%\avidemux\ADM_encoder\ADM_vidEncode.hxx&quot; ADM_encoder
+	copy &quot;%sourceDir%\avidemux\ADM_libraries\ffmpeg\libavutil\pixfmt.h&quot; libavutil
+	copy &quot;%sourceDir%\avidemux\ADM_plugin\ADM_vidEnc_plugin.h&quot;
+	copy &quot;%sourceDir%\avidemux\ADM_plugin\ADM_plugin_translate.h&quot;
 
-cd &quot;%sourceDir%\po&quot;
-svn revert -R .
-sh qt_update_pro.sh
-echo ./avidemux_blank.ts &gt;&gt; avidemux.pro
-lupdate avidemux.pro
+	cd &quot;%sourceDir%\po&quot;
+	svn revert -R .
+	sh qt_update_pro.sh
+	echo ./avidemux_blank.ts &gt;&gt; avidemux.pro
+	lupdate avidemux.pro
 
-mkdir &quot;%sdkBuildDir%\i18n&quot;
-mkdir &quot;%sdkBuildDir%\i18n\qt4&quot;
-mkdir &quot;%sdkBuildDir%\i18n\gtk&quot;
+	mkdir &quot;%sdkBuildDir%\i18n&quot;
+	mkdir &quot;%sdkBuildDir%\i18n\qt4&quot;
+	mkdir &quot;%sdkBuildDir%\i18n\gtk&quot;
 
-copy *.ts &quot;%sdkBuildDir%\i18n\qt4&quot;
-copy qt_filter_context.xslt &quot;%sdkBuildDir%\i18n\qt4\qt_filter_context.xsl&quot;
-copy &quot;%curDir%\Tools\Build Qt Translations.bat&quot; &quot;%sdkBuildDir%\i18n\qt4\Build Translations.bat&quot;
+	copy *.ts &quot;%sdkBuildDir%\i18n\qt4&quot;
+	copy qt_filter_context.xslt &quot;%sdkBuildDir%\i18n\qt4\qt_filter_context.xsl&quot;
+	copy &quot;%curDir%\Tools\Build Qt Translations.bat&quot; &quot;%sdkBuildDir%\i18n\qt4\Build Translations.bat&quot;
 
-del avidemux_blank.ts
+	del avidemux_blank.ts
 
-sh update_pot.bash
-copy avidemux.pot &quot;%sdkBuildDir%\i18n\gtk&quot;
-for %%A in (*.po) do msgmerge %%A avidemux.pot -o &quot;%sdkBuildDir%\i18n\gtk\%%A&quot;
+	sh update_pot.bash
+	copy avidemux.pot &quot;%sdkBuildDir%\i18n\gtk&quot;
+	for %%A in (*.po) do msgmerge %%A avidemux.pot -o &quot;%sdkBuildDir%\i18n\gtk\%%A&quot;
 
-svn revert -R .
\ No newline at end of file
+	svn revert -R .
+)
\ No newline at end of file

Modified: branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/avidemux/2. Create Packages.bat
===================================================================
--- branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/avidemux/2. Create Packages.bat	2010-12-07 19:25:23 UTC (rev 6810)
+++ branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/avidemux/2. Create Packages.bat	2010-12-07 19:27:32 UTC (rev 6811)
@@ -29,8 +29,8 @@
 call &quot;Get Revision Number&quot;
 cd ..
 
-set packageDir=%CD%\%revisionNo%
-mkdir %packageDir%
+set packageDir=%CD%\%revisionNo% [%BuildBits%-bit]
+mkdir &quot;%packageDir%&quot;
 
 cd &quot;%curDir%&quot;
 call &quot;2b. Package SDK.bat&quot;

Modified: branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/avidemux/2b. Package SDK.bat
===================================================================
--- branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/avidemux/2b. Package SDK.bat	2010-12-07 19:25:23 UTC (rev 6810)
+++ branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/avidemux/2b. Package SDK.bat	2010-12-07 19:27:32 UTC (rev 6811)
@@ -1,6 +1,19 @@
-set baseFile=avidemux_sdk_2.5_r%revisionNo%_win%BuildBits%
-set zipFile=%baseFile%.zip
+set zipFile=avidemux_sdk_2.5_r%revisionNo%_win.zip
 
-cd &quot;%sdkBuildDir%&quot;
+if &quot;%BuildBits%&quot; == &quot;32&quot; (
+	set sdk32BuildDir=%sdkBuildDir%
+	set sdk64BuildDir=%sdkBuildDir:build32=build64%
+)
+
+if &quot;%BuildBits%&quot; == &quot;64&quot; (
+	set sdk32BuildDir=%sdkBuildDir:build64=build32%
+	set sdk64BuildDir=%sdkBuildDir%
+)
+
+cd &quot;%sdk32BuildDir%&quot;
 zip -r &quot;%packageDir%\%zipFile%&quot; *
+
+cd &quot;%sdk64BuildDir%&quot;
+zip -r &quot;%packageDir%\%zipFile%&quot; *
+
 advzip -z -4 &quot;%packageDir%\%zipFile%&quot;
\ No newline at end of file

Modified: branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/avidemux/2c. Package Build.bat
===================================================================
--- branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/avidemux/2c. Package Build.bat	2010-12-07 19:25:23 UTC (rev 6810)
+++ branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/avidemux/2c. Package Build.bat	2010-12-07 19:27:32 UTC (rev 6811)
@@ -2,11 +2,14 @@
 set zipFile=%baseFile%.zip
 
 copy &quot;%buildDir%\Change Log.html&quot; &quot;%packageDir%&quot;
-move &quot;Tools\Package Notes.html&quot; &quot;%packageDir%&quot;
+move &quot;Tools\Package Notes [%BuildBits%].html&quot; &quot;%packageDir%\Package Notes.html&quot;
 
 cd %buildDir%
-echo -- Generating GTK+ Installer --
-&quot;%nsisDir%\makensis&quot; /V2 /NOCD /DINST_GTK /DBUILD_BITS=%BuildBits% /DNSIDIR=&quot;%curDir%\..\..\installer&quot; /DEXEDIR=&quot;%packageDir%&quot; &quot;%curDir%\..\..\installer\avidemux.nsi&quot;
+if &quot;%BuildBits%&quot; == &quot;32&quot; (
+	echo -- Generating GTK+ Installer --
+	&quot;%nsisDir%\makensis&quot; /V2 /NOCD /DINST_GTK /DBUILD_BITS=%BuildBits% /DNSIDIR=&quot;%curDir%\..\..\installer&quot; /DEXEDIR=&quot;%packageDir%&quot; &quot;%curDir%\..\..\installer\avidemux.nsi&quot;
+)
+
 echo -- Generating Qt Installer --
 &quot;%nsisDir%\makensis&quot; /V2 /NOCD /DINST_QT /DBUILD_BITS=%BuildBits% /DNSIDIR=&quot;%curDir%\..\..\installer&quot; /DEXEDIR=&quot;%packageDir%&quot; &quot;%curDir%\..\..\installer\avidemux.nsi&quot;
 

Modified: branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/avidemux/Set Avidemux Environment Variables.bat
===================================================================
--- branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/avidemux/Set Avidemux Environment Variables.bat	2010-12-07 19:25:23 UTC (rev 6810)
+++ branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/avidemux/Set Avidemux Environment Variables.bat	2010-12-07 19:27:32 UTC (rev 6811)
@@ -40,8 +40,8 @@
 set buildQtFolder=%buildFolder%\qt
 set buildPluginFolder=%buildFolder%\plugins
 
-set buildDir=%devDir%\avidemux_2.6_build%BuildBits%
-set sdkBuildDir=%devDir%\avidemux_2.6_build%BuildBits%_sdk
+set buildDir=%admBuildDir%
+set sdkBuildDir=%admSdkBuildDir%
 
 set curDir=%CD%
 cd ..\..\..
@@ -53,9 +53,7 @@
 	goto error
 )
 
-if &quot;%BuildBits%&quot; == &quot;32&quot; (set jsFolder=js)
-if &quot;%BuildBits%&quot; == &quot;64&quot; (set jsFolder=js-64)
-
+set jsFolder=js-1.7.0-%BuildBits%
 set SpiderMonkeySourceDir=%devDir%\%jsFolder%\src
 set SpiderMonkeyLibDir=%devDir%\%jsFolder%\src\WINNT6.1_OPT.OBJ
 

Modified: branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/avidemux/Tools/Build Plugins.bat
===================================================================
--- branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/avidemux/Tools/Build Plugins.bat	2010-12-07 19:25:23 UTC (rev 6810)
+++ branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/avidemux/Tools/Build Plugins.bat	2010-12-07 19:27:32 UTC (rev 6811)
@@ -1,17 +1,14 @@
 @echo off
 
-if &quot;%1&quot; == &quot;&quot; (
-	echo Usage: &quot;Build Plugins.bat&quot; [MinGW directory]
-	echo e.g. &quot;Build Plugins.bat&quot; C:\MinGW
-	goto :EOF
-)
+if &quot;%1&quot; == &quot;&quot; goto displayUsage
+if &quot;%2&quot; == &quot;&quot; goto displayUsage
 
 set curDir=%CD%
 set includeDir=&quot;%curDir%\..\include&quot;
-set libDir=&quot;%curDir%\..\lib&quot;
-set ar=&quot;%1\bin\ar&quot;
-set gcc=&quot;%1\bin\gcc&quot; -O3 -DNDEBUG
-set gxx=&quot;%1\bin\g++&quot; -O3 -DNDEBUG -Wl,-enable-auto-import -Wl,-s
+set libDir=&quot;%curDir%\..\lib%1&quot;
+set ar=&quot;%2\bin\ar&quot;
+set gcc=&quot;%2\bin\gcc&quot; -O3 -DNDEBUG
+set gxx=&quot;%2\bin\g++&quot; -O3 -DNDEBUG -Wl,-enable-auto-import -Wl,-s
 
 echo ** AC-3 Audio Decoder **
 
@@ -52,4 +49,11 @@
 
 cd videoFilters\fade
 %gxx% -shared *.cpp -o libADM_vf_fade.dll -I%includeDir% -L%libDir% -lADM_coreImage.dll -lADM_core.dll -lADM_coreUI.dll
-cd %curDir%
\ No newline at end of file
+cd %curDir%
+
+goto :EOF
+
+:displayUsage
+	echo Usage: &quot;Build Plugins.bat&quot; [Bitness] [MinGW directory]
+	echo e.g. &quot;Build Plugins.bat&quot; 32 C:\MinGW
+	goto :EOF
\ No newline at end of file

Modified: branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/avidemux/Tools/gennotes.sh
===================================================================
--- branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/avidemux/Tools/gennotes.sh	2010-12-07 19:25:23 UTC (rev 6810)
+++ branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/avidemux/Tools/gennotes.sh	2010-12-07 19:27:32 UTC (rev 6811)
@@ -1 +1 @@
-xsltproc package_notes.xslt &quot;../Package Notes.xml&quot; &gt; &quot;Package Notes.html&quot;
\ No newline at end of file
+xsltproc package_notes.xslt &quot;../Package Notes.xml&quot; &gt; &quot;Package Notes [$BUILDBITS].html&quot;
\ No newline at end of file

Modified: branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/avidemux/Tools/gentouch.sh
===================================================================
--- branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/avidemux/Tools/gentouch.sh	2010-12-07 19:25:23 UTC (rev 6810)
+++ branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/avidemux/Tools/gentouch.sh	2010-12-07 19:27:32 UTC (rev 6811)
@@ -1 +1 @@
-xsltproc touch_files.xslt &quot;../Package Notes.xml&quot; &gt; &quot;../Touch 2.5 Files.html&quot;
\ No newline at end of file
+xsltproc touch_files.xslt &quot;../Package Notes.xml&quot; &gt; &quot;../Touch 2.5 Files [$BUILDBITS].html&quot;
\ No newline at end of file

Added: branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/faac/Perform Build.bat
===================================================================
--- branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/faac/Perform Build.bat	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/faac/Perform Build.bat	2010-12-07 19:27:32 UTC (rev 6811)
@@ -0,0 +1,62 @@
<A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">+ at echo</A> off
+
+echo MSYS build for FAAC
+echo ===================
+echo 1. 32-bit build
+echo 2. 64-bit build
+echo X. Exit
+echo.
+
+choice /c 12x
+
+if errorlevel 1 set BuildBits=32
+if errorlevel 2 set BuildBits=64
+if errorlevel 3 goto :eof
+
+verify &gt;nul
+call &quot;../Set Common Environment Variables&quot;
+if errorlevel 1 goto end
+
+set package=faac-1.28.tar.gz
+set sourceFolder=faac-1.28-%BuildBits%
+set tarFolder=faac-1.28
+set curDir=%CD%
+
+if not exist %package% (
+	echo.
+	echo Downloading
+	wget <A HREF="http://downloads.sourceforge.net/faac/%package%">http://downloads.sourceforge.net/faac/%package%</A>
+)
+
+if errorlevel 1 goto end
+
+echo.
+echo Preparing
+rm -r -f &quot;%devDir%\%sourceFolder%&quot;
+if errorlevel 1 goto end
+
+mkdir &quot;%devDir%\%sourceFolder%&quot;
+if errorlevel 1 goto end
+
+tar xfz &quot;%package%&quot; -C &quot;%devDir%/%sourceFolder%&quot;
+if errorlevel 1 goto end
+
+cd &quot;%devDir%\%sourceFolder%&quot;
+
+for /f &quot;delims=&quot; %%a in ('dir /b %tarFolder%') do (
+  move &quot;%CD%\%tarFolder%\%%a&quot; &quot;%CD%&quot;
+)
+
+copy &quot;.\include\*.h&quot; &quot;%usrLocalDir%\include&quot;
+cd libfaac
+gcc -s -O3 -shared -I../include *.c -o&quot;%usrLocalDir%/bin/libfaac.dll&quot; -Wl,--out-implib,&quot;%usrLocalDir%/lib/libfaac.a&quot;
+if errorlevel 1 goto end
+
+copy &quot;%usrLocalDir%\bin\libfaac.dll&quot; &quot;%admBuildDir%&quot;
+goto end
+
+:error
+echo Error
+
+:end
+pause
\ No newline at end of file

Added: branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/faad/Perform Build.bat
===================================================================
--- branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/faad/Perform Build.bat	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/faad/Perform Build.bat	2010-12-07 19:27:32 UTC (rev 6811)
@@ -0,0 +1,62 @@
<A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">+ at echo</A> off
+
+echo MSYS build for FAAD
+echo ===================
+echo 1. 32-bit build
+echo 2. 64-bit build
+echo X. Exit
+echo.
+
+choice /c 12x
+
+if errorlevel 1 set BuildBits=32
+if errorlevel 2 set BuildBits=64
+if errorlevel 3 goto :eof
+
+verify &gt;nul
+call &quot;../Set Common Environment Variables&quot;
+if errorlevel 1 goto end
+
+set package=faad2-2.7.tar.gz
+set sourceFolder=faac-2.7-%BuildBits%
+set tarFolder=faad2-2.7
+set curDir=%CD%
+
+if not exist %package% (
+	echo.
+	echo Downloading
+	wget <A HREF="http://downloads.sourceforge.net/faac/%package%">http://downloads.sourceforge.net/faac/%package%</A>
+)
+
+if errorlevel 1 goto end
+
+echo.
+echo Preparing
+rm -r -f &quot;%devDir%\%sourceFolder%&quot;
+if errorlevel 1 goto end
+
+mkdir &quot;%devDir%\%sourceFolder%&quot;
+if errorlevel 1 goto end
+
+tar xfz &quot;%package%&quot; -C &quot;%devDir%/%sourceFolder%&quot;
+if errorlevel 1 goto end
+
+cd &quot;%devDir%\%sourceFolder%&quot;
+
+for /f &quot;delims=&quot; %%a in ('dir /b %tarFolder%') do (
+  move &quot;%CD%\%tarFolder%\%%a&quot; &quot;%CD%&quot;
+)
+
+copy &quot;.\include\*.h&quot; &quot;%usrLocalDir%\include&quot;
+cd libfaad
+gcc -s -O3 -DHAVE_MEMCPY=1 -DHAVE_STRING_H=1 -DHAVE_STDINT_H=1 -I../include -I&quot;.&quot; *.c -shared -o &quot;%usrLocalDir%/bin/libfaad2.dll&quot; -Wl,--out-implib,&quot;%usrLocalDir%/lib/libfaad.a&quot;
+if errorlevel 1 goto end
+
+copy &quot;%usrLocalDir%\bin\libfaad2.dll&quot; &quot;%admBuildDir%&quot;
+goto end
+
+:error
+echo Error
+
+:end
+pause
\ No newline at end of file

Added: branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/fontconfig/Perform Build.bat
===================================================================
--- branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/fontconfig/Perform Build.bat	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/fontconfig/Perform Build.bat	2010-12-07 19:27:32 UTC (rev 6811)
@@ -0,0 +1,77 @@
<A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">+ at echo</A> off
+
+echo MSYS build for fontconfig
+echo =========================
+echo 1. 32-bit build
+echo 2. 64-bit build
+echo X. Exit
+echo.
+
+choice /c 12x
+
+if errorlevel 1 set BuildBits=32
+if errorlevel 2 set BuildBits=64
+if errorlevel 3 goto :eof
+
+verify &gt;nul
+call &quot;../Set Common Environment Variables&quot;
+if errorlevel 1 goto end
+
+set package=fontconfig-2.8.0.tar.gz
+set sourceFolder=fontconfig-2.8.0-%BuildBits%
+set tarFolder=fontconfig-2.8.0
+set curDir=%CD%
+
+if not exist %package% (
+	echo.
+	echo Downloading
+	wget <A HREF="http://fontconfig.org/release/%package%">http://fontconfig.org/release/%package%</A>
+)
+
+if errorlevel 1 goto end
+
+echo.
+echo Preparing
+rm -r -f &quot;%devDir%\%sourceFolder%&quot;
+if errorlevel 1 goto end
+
+mkdir &quot;%devDir%\%sourceFolder%&quot;
+if errorlevel 1 goto end
+
+tar xfz &quot;%package%&quot; -C &quot;%devDir%/%sourceFolder%&quot;
+if errorlevel 1 goto end
+
+cd &quot;%devDir%\%sourceFolder%&quot;
+
+for /f &quot;delims=&quot; %%a in ('dir /b %tarFolder%') do (
+  move &quot;%CD%\%tarFolder%\%%a&quot; &quot;%CD%&quot;
+)
+
+echo.
+echo Configuring
+sh ./configure --prefix=&quot;%usrLocalDir%&quot; --disable-static
+
+if &quot;%BuildBits%&quot; == &quot;64&quot; (
+	echo.
+	echo Patching
+	patch -p0 -i &quot;%curDir%\libtool.patch&quot;
+)
+
+if errorlevel 1 goto end
+echo.
+pause
+
+make install
+if errorlevel 1 goto end
+
+del &quot;%usrLocalDir%\etc\fonts\fonts.conf.bak&quot;
+copy &quot;%usrLocalDir%\bin\libfontconfig-1.dll&quot; &quot;%admBuildDir%&quot;
+xcopy /s/y &quot;%usrLocalDir%\etc\fonts\*.*&quot; &quot;%admBuildDir%\etc\fonts\&quot;
+
+goto end
+
+:error
+echo Error
+
+:end
+pause
\ No newline at end of file

Added: branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/fontconfig/libtool.patch
===================================================================
--- branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/fontconfig/libtool.patch	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/fontconfig/libtool.patch	2010-12-07 19:27:32 UTC (rev 6811)
@@ -0,0 +1,11 @@
+--- libtool.orig	2010-11-27 22:40:35 +0000
++++ libtool	2010-11-27 22:52:21 +0000
+@@ -117,7 +117,7 @@
+ reload_cmds=&quot;\$LD\$reload_flag -o \$output\$reload_objs&quot;
+ 
+ # Method to check whether dependent libraries are shared objects.
+-deplibs_check_method=&quot;file_magic file format pei*-i386(.*architecture: i386)?&quot;
++deplibs_check_method=&quot;file_magic file format pei*-x86-64(.*architecture: i386)?&quot;
+ 
+ # Command to use when deplibs_check_method == &quot;file_magic&quot;.
+ file_magic_cmd=&quot;\$OBJDUMP -f&quot;

Added: branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/js/Makefile.ref.patch
===================================================================
--- branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/js/Makefile.ref.patch	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/js/Makefile.ref.patch	2010-12-07 19:27:32 UTC (rev 6811)
@@ -0,0 +1,11 @@
+--- src/Makefile.ref.orig	2010-11-28 02:53:57 +0000
++++ src/Makefile.ref	2010-11-28 02:53:12 +0000
+@@ -94,7 +94,7 @@
+ ifeq ($(OS_ARCH),WINNT)
+ _MSC_VER = $(shell $(CC) 2&gt;&amp;1 | sed -n 's/.*Compiler Version \([0-9]*\)\.\([0-9]*\).*/\1\2/p')
+ ifeq (,$(filter-out 1200 1300 1310,$(_MSC_VER)))
+-CFLAGS += -Op
++#CFLAGS += -Op
+ else
+ CFLAGS += -fp:precise
+ endif

Added: branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/js/Perform Build.bat
===================================================================
--- branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/js/Perform Build.bat	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/js/Perform Build.bat	2010-12-07 19:27:32 UTC (rev 6811)
@@ -0,0 +1,76 @@
<A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">+ at echo</A> off
+
+%~d0
+cd &quot;%~dp0&quot;
+
+echo MSYS build for SpiderMonkey
+echo ===========================
+echo 1. 32-bit build
+echo 2. 64-bit build
+echo X. Exit
+echo.
+
+choice /c 12x
+
+if errorlevel 1 set BuildBits=32
+if errorlevel 2 set BuildBits=64
+if errorlevel 3 goto :eof
+
+verify &gt;nul
+call &quot;../Set Common Environment Variables&quot;
+if errorlevel 1 goto end
+
+set package=js-1.7.0.tar.gz
+set sourceFolder=js-1.7.0-%BuildBits%
+set tarFolder=js
+set curDir=%CD%
+
+if not exist %package% (
+	echo.
+	echo Downloading
+	wget <A HREF="http://ftp.mozilla.org/pub/mozilla.org/js/%package%">http://ftp.mozilla.org/pub/mozilla.org/js/%package%</A>
+)
+
+if errorlevel 1 goto end
+
+echo.
+echo Preparing
+rm -r -f &quot;%devDir%\%sourceFolder%&quot;
+if errorlevel 1 goto end
+
+mkdir &quot;%devDir%\%sourceFolder%&quot;
+if errorlevel 1 goto end
+
+tar xfz &quot;%package%&quot; -C &quot;%devDir%/%sourceFolder%&quot;
+if errorlevel 1 goto end
+
+cd &quot;%devDir%\%sourceFolder%&quot;
+
+for /f &quot;delims=&quot; %%a in ('dir /b %tarFolder%') do (
+	move &quot;%CD%\%tarFolder%\%%a&quot; &quot;%CD%&quot;
+)
+
+echo.
+echo Patching
+copy &quot;%curDir%\WINNT6.1.mk&quot; .\src\config
+patch -p0 -i &quot;%curDir%\Makefile.ref.patch&quot;
+patch -p0 -i &quot;%curDir%\jsnum.c.patch&quot;
+
+echo.
+cd src
+windres -i js3240.rc -o jsres.o -O coff
+set CFLAGS=%CFLAGS% -I&quot;%usrLocalDir%/include/nspr&quot;
+make -f Makefile.ref JS_DIST=&quot;%usrLocalDir%&quot; BUILD_OPT=1 JS_HAS_FILE_OBJECT=1 XLDFLAGS=&quot;%LDFLAGS% jsres.o -L%usrLocalDir%/lib -lnspr4&quot;
+if errorlevel 1 goto end
+echo.
+
+copy &quot;WINNT6.1_OPT.OBJ\libjs.dll&quot; &quot;%usrLocalDir%\bin&quot;
+copy &quot;%usrLocalDir%\bin\libjs.dll&quot; &quot;%admBuildDir%&quot;
+
+goto end
+
+:error
+echo Error
+
+:end
+pause
\ No newline at end of file

Added: branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/js/WINNT6.1.mk
===================================================================
--- branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/js/WINNT6.1.mk	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/js/WINNT6.1.mk	2010-12-07 19:27:32 UTC (rev 6811)
@@ -0,0 +1,26 @@
+CC = gcc
+CCC = g++
+LD = g++
+
+CFLAGS +=  -Wall -Wno-format
+OS_CFLAGS = -D_X86_=1 -DXP_WIN -DXP_WIN32 -DWIN32 -D_WINDOWS -D_WIN32 -DWINVER=0x500 -D_WIN32_WINNT=0x500 -D_MINGW -DEXPORT_JS_API
+
+XMKSHLIBOPTS += -Wl,--out-implib=$(OBJDIR)/libjs.dll.a
+RANLIB = ranlib
+MKSHLIB = $(LD) -shared $(XMKSHLIBOPTS)
+
+ifdef BUILD_OPT
+OS_CFLAGS += -s
+endif
+
+#.c.o:
+#      $(CC) -c -MD $*.d $(CFLAGS) $&lt;
+
+CPU_ARCH = x86
+GFX_ARCH = win32
+
+JSDLL_CFLAGS = -DEXPORT_JS_API
+OS_LIBS = -lm -lc
+
+PREBUILT_CPUCFG = 1
+SO_SUFFIX=dll
\ No newline at end of file

Added: branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/js/jsnum.c.patch
===================================================================
--- branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/js/jsnum.c.patch	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/js/jsnum.c.patch	2010-12-07 19:27:32 UTC (rev 6811)
@@ -0,0 +1,11 @@
+--- src/jsnum.c.orig	2007-04-06 21:53:22 +0100
++++ src/jsnum.c	2010-11-28 03:00:05 +0000
+@@ -528,7 +528,7 @@
+  * to 53 bit mantissa.
+  * On Alpha platform this is handled via Compiler option.
+  */
+-#define FIX_FPU() _control87(MCW_EM | PC_53, MCW_EM | MCW_PC)
++#define FIX_FPU() _control87(_MCW_EM | _PC_53, _MCW_EM | _MCW_PC)
+ 
+ #else
+ 

Added: branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/lame/Perform Build.bat
===================================================================
--- branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/lame/Perform Build.bat	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/lame/Perform Build.bat	2010-12-07 19:27:32 UTC (rev 6811)
@@ -0,0 +1,72 @@
<A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">+ at echo</A> off
+
+echo MSYS build for LAME
+echo ===================
+echo 1. 32-bit build
+echo 2. 64-bit build
+echo X. Exit
+echo.
+
+choice /c 12x
+
+if errorlevel 1 set BuildBits=32
+if errorlevel 2 set BuildBits=64
+if errorlevel 3 goto :eof
+
+verify &gt;nul
+call &quot;../Set Common Environment Variables&quot;
+if errorlevel 1 goto end
+
+set package=lame-3.98.4.tar.gz
+set sourceFolder=lame-3.98.4-%BuildBits%
+set tarFolder=lame-3.98.4
+set curDir=%CD%
+
+if not exist %package% (
+	echo.
+	echo Downloading
+	wget <A HREF="http://sourceforge.net/projects/lame/files/lame/3.98.4/%package%/download/">http://sourceforge.net/projects/lame/files/lame/3.98.4/%package%/download/</A>
+)
+
+if errorlevel 1 goto end
+
+echo.
+echo Preparing
+rm -r -f &quot;%devDir%\%sourceFolder%&quot;
+if errorlevel 1 goto end
+
+mkdir &quot;%devDir%\%sourceFolder%&quot;
+if errorlevel 1 goto end
+
+tar xfz &quot;%package%&quot; -C &quot;%devDir%\%sourceFolder%&quot;
+if errorlevel 1 goto end
+
+cd &quot;%devDir%\%sourceFolder%&quot;
+
+for /f &quot;delims=&quot; %%a in ('dir /b %tarFolder%') do (
+  move &quot;%CD%\%tarFolder%\%%a&quot; &quot;%CD%&quot;
+)
+
+echo.
+echo Configuring
+
+if &quot;%BuildBits%&quot; == &quot;32&quot; sh ./configure --prefix=&quot;%usrLocalDir%&quot; --disable-static --enable-nasm
+if &quot;%BuildBits%&quot; == &quot;64&quot; sh ./configure --prefix=&quot;%usrLocalDir%&quot; --disable-static
+
+if errorlevel 1 goto end
+echo.
+pause
+
+make install
+if errorlevel 1 goto end
+
+strip &quot;%usrLocalDir%\bin\libmp3lame-0.dll&quot;
+copy &quot;%usrLocalDir%\bin\libmp3lame-0.dll&quot; &quot;%admBuildDir%&quot;
+
+goto end
+
+:error
+echo Error
+
+:end
+pause
\ No newline at end of file

Added: branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/libogg/Perform Build.bat
===================================================================
--- branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/libogg/Perform Build.bat	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/libogg/Perform Build.bat	2010-12-07 19:27:32 UTC (rev 6811)
@@ -0,0 +1,70 @@
<A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">+ at echo</A> off
+
+echo MSYS build for libogg
+echo =====================
+echo 1. 32-bit build
+echo 2. 64-bit build
+echo X. Exit
+echo.
+
+choice /c 12x
+
+if errorlevel 1 set BuildBits=32
+if errorlevel 2 set BuildBits=64
+if errorlevel 3 goto :eof
+
+verify &gt;nul
+call &quot;../Set Common Environment Variables&quot;
+if errorlevel 1 goto end
+
+set package=libogg-1.2.1.tar.gz
+set sourceFolder=libogg-1.2.1-%BuildBits%
+set tarFolder=libogg-1.2.1
+set curDir=%CD%
+
+if not exist %package% (
+	echo.
+	echo Downloading
+	wget <A HREF="http://downloads.xiph.org/releases/ogg/%package%">http://downloads.xiph.org/releases/ogg/%package%</A>
+)
+
+if errorlevel 1 goto end
+
+echo.
+echo Preparing
+rm -r -f &quot;%devDir%\%sourceFolder%&quot;
+if errorlevel 1 goto end
+
+mkdir &quot;%devDir%\%sourceFolder%&quot;
+if errorlevel 1 goto end
+
+tar xfz &quot;%package%&quot; -C &quot;%devDir%\%sourceFolder%&quot;
+if errorlevel 1 goto end
+
+cd &quot;%devDir%\%sourceFolder%&quot;
+
+for /f &quot;delims=&quot; %%a in ('dir /b %tarFolder%') do (
+  move &quot;%CD%\%tarFolder%\%%a&quot; &quot;%CD%&quot;
+)
+
+echo.
+echo Configuring
+
+sh ./configure --prefix=&quot;%usrLocalDir%&quot; --disable-static
+
+if errorlevel 1 goto end
+echo.
+pause
+
+make install-strip
+if errorlevel 1 goto end
+
+copy &quot;%usrLocalDir%\bin\libogg-0.dll&quot; &quot;%admBuildDir%&quot;
+
+goto end
+
+:error
+echo Error
+
+:end
+pause
\ No newline at end of file

Added: branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/libvorbis/Perform Build.bat
===================================================================
--- branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/libvorbis/Perform Build.bat	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/libvorbis/Perform Build.bat	2010-12-07 19:27:32 UTC (rev 6811)
@@ -0,0 +1,75 @@
<A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">+ at echo</A> off
+
+echo MSYS build for libvorbis
+echo ========================
+echo 1. 32-bit build
+echo 2. 64-bit build
+echo X. Exit
+echo.
+
+choice /c 12x
+
+if errorlevel 1 set BuildBits=32
+if errorlevel 2 set BuildBits=64
+if errorlevel 3 goto :eof
+
+verify &gt;nul
+call &quot;../Set Common Environment Variables&quot;
+if errorlevel 1 goto end
+
+set package=libvorbis-1.3.2.tar.gz
+set sourceFolder=libvorbis-1.3.2-%BuildBits%
+set tarFolder=libvorbis-1.3.2
+set curDir=%CD%
+
+if not exist %package% (
+	echo.
+	echo Downloading
+	wget <A HREF="http://downloads.xiph.org/releases/vorbis/%package%">http://downloads.xiph.org/releases/vorbis/%package%</A>
+)
+
+if errorlevel 1 goto end
+
+echo.
+echo Preparing
+rm -r -f &quot;%devDir%\%sourceFolder%&quot;
+if errorlevel 1 goto end
+
+mkdir &quot;%devDir%\%sourceFolder%&quot;
+if errorlevel 1 goto end
+
+tar xfz &quot;%package%&quot; -C &quot;%devDir%\%sourceFolder%&quot;
+if errorlevel 1 goto end
+
+cd &quot;%devDir%\%sourceFolder%&quot;
+
+for /f &quot;delims=&quot; %%a in ('dir /b %tarFolder%') do (
+	move &quot;%CD%\%tarFolder%\%%a&quot; &quot;%CD%&quot;
+)
+
+echo.
+echo Configuring
+
+sh ./configure --prefix=&quot;%usrLocalDir%&quot; --disable-static --disable-examples --disable-docs
+
+echo.
+echo Patching
+patch -p0 -i &quot;%curDir%\libtool.patch&quot;
+
+if errorlevel 1 goto end
+echo.
+pause
+
+make install-strip
+if errorlevel 1 goto end
+
+copy &quot;%usrLocalDir%\bin\libvorbis-0.dll&quot; &quot;%admBuildDir%&quot;
+copy &quot;%usrLocalDir%\bin\libvorbisenc-2.dll&quot; &quot;%admBuildDir%&quot;
+
+goto end
+
+:error
+echo Error
+
+:end
+pause
\ No newline at end of file

Added: branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/libvorbis/libtool.patch
===================================================================
--- branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/libvorbis/libtool.patch	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/libvorbis/libtool.patch	2010-12-07 19:27:32 UTC (rev 6811)
@@ -0,0 +1,24 @@
+--- libtool.orig	2010-11-27 19:32:53 +0000
++++ libtool	2010-11-27 19:33:08 +0000
+@@ -6446,8 +6446,8 @@
+ 		esac
+ 		else
+ 		  eval libdir=`${SED} -n -e 's/^libdir=\(.*\)$/\1/p' $deplib`
+-		  test -z &quot;$libdir&quot; &amp;&amp; \
+-		    func_fatal_error &quot;\`$deplib' is not a valid libtool archive&quot;
++		  #test -z &quot;$libdir&quot; &amp;&amp; \
++		    #func_fatal_error &quot;\`$deplib' is not a valid libtool archive&quot;
+ 		  test &quot;$absdir&quot; != &quot;$libdir&quot; &amp;&amp; \
+ 		    func_warning &quot;\`$deplib' seems to be moved&quot;
+ 
+@@ -8570,8 +8570,8 @@
+ 		func_basename &quot;$deplib&quot;
+ 		name=&quot;$func_basename_result&quot;
+ 		eval libdir=`${SED} -n -e 's/^libdir=\(.*\)$/\1/p' $deplib`
+-		test -z &quot;$libdir&quot; &amp;&amp; \
+-		  func_fatal_error &quot;\`$deplib' is not a valid libtool archive&quot;
++		#test -z &quot;$libdir&quot; &amp;&amp; \
++		  #func_fatal_error &quot;\`$deplib' is not a valid libtool archive&quot;
+ 		newdependency_libs=&quot;$newdependency_libs $libdir/$name&quot;
+ 		;;
+ 	      *) newdependency_libs=&quot;$newdependency_libs $deplib&quot; ;;

Added: branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/libvpx/Perform Build.bat
===================================================================
--- branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/libvpx/Perform Build.bat	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/libvpx/Perform Build.bat	2010-12-07 19:27:32 UTC (rev 6811)
@@ -0,0 +1,74 @@
<A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">+ at echo</A> off
+
+echo MSYS build for libvpx
+echo =====================
+echo 1. 32-bit build
+echo 2. 64-bit build
+echo X. Exit
+echo.
+
+choice /c 12x
+
+if errorlevel 1 set BuildBits=32
+if errorlevel 2 set BuildBits=64
+if errorlevel 3 goto :eof
+
+verify &gt;nul
+call &quot;../Set Common Environment Variables&quot;
+if errorlevel 1 goto end
+
+set package=libvpx-v0.9.5.tar.bz2
+set sourceFolder=libvpx-0.9.5-%BuildBits%
+set tarFolder=libvpx-v0.9.5
+set curDir=%CD%
+
+if not exist %package% (
+	echo.
+	echo Downloading
+	wget <A HREF="http://webm.googlecode.com/files/%package%">http://webm.googlecode.com/files/%package%</A>
+)
+
+if errorlevel 1 goto end
+
+echo.
+echo Preparing
+rm -r -f &quot;%devDir%\%sourceFolder%&quot;
+if errorlevel 1 goto end
+
+mkdir &quot;%devDir%\%sourceFolder%&quot;
+if errorlevel 1 goto end
+
+tar xfj &quot;%package%&quot; -C &quot;%devDir%\%sourceFolder%&quot;
+if errorlevel 1 goto end
+
+cd &quot;%devDir%\%sourceFolder%&quot;
+
+for /f &quot;delims=&quot; %%a in ('dir /b %tarFolder%') do (
+  move &quot;%CD%\%tarFolder%\%%a&quot; &quot;%CD%&quot;
+)
+
+echo.
+echo Patching
+patch -p0 -i &quot;%curDir%\configure.patch&quot;
+patch -p0 -i &quot;%curDir%\configure.sh.patch&quot;
+
+echo.
+echo Configuring
+
+if &quot;%BuildBits%&quot; == &quot;32&quot; sh ./configure --prefix=&quot;%usrLocalDir%&quot; --disable-vp8-encoder
+if &quot;%BuildBits%&quot; == &quot;64&quot; sh ./configure --prefix=&quot;%usrLocalDir%&quot; --disable-vp8-encoder --target=x86_64-win64-gcc
+
+if errorlevel 1 goto end
+echo.
+pause
+
+make install
+if errorlevel 1 goto end
+
+goto end
+
+:error
+echo Error
+
+:end
+pause
\ No newline at end of file

Added: branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/libvpx/configure.patch
===================================================================
--- branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/libvpx/configure.patch	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/libvpx/configure.patch	2010-12-07 19:27:32 UTC (rev 6811)
@@ -0,0 +1,10 @@
+--- configure.orig	2010-11-27 11:16:30 +0000
++++ configure	2010-11-27 11:15:53 +0000
+@@ -117,6 +117,7 @@
+ all_platforms=&quot;${all_platforms} x86_64-linux-gcc&quot;
+ all_platforms=&quot;${all_platforms} x86_64-linux-icc&quot;
+ all_platforms=&quot;${all_platforms} x86_64-solaris-gcc&quot;
++all_platforms=&quot;${all_platforms} x86_64-win64-gcc&quot;
+ all_platforms=&quot;${all_platforms} x86_64-win64-vs8&quot;
+ all_platforms=&quot;${all_platforms} x86_64-win64-vs9&quot;
+ all_platforms=&quot;${all_platforms} universal-darwin8-gcc&quot;

Added: branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/libvpx/configure.sh.patch
===================================================================
--- branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/libvpx/configure.sh.patch	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/libvpx/configure.sh.patch	2010-12-07 19:27:32 UTC (rev 6811)
@@ -0,0 +1,17 @@
+--- build/make/configure.sh.orig	2010-10-28 14:14:14 +0100
++++ build/make/configure.sh	2010-11-27 11:45:42 +0000
+@@ -877,8 +877,12 @@
+         [ &quot;${AS##*/}&quot; = nasm ] &amp;&amp; add_asflags -Ox
+         AS_SFX=.asm
+         case  ${tgt_os} in
+-            win*)
+-                add_asflags -f win${bits}
++            win32)
++                add_asflags -f win32
++                enabled debug &amp;&amp; add_asflags -g dwarf2
++            ;;
++			win64)
++                add_asflags -f x64
+                 enabled debug &amp;&amp; add_asflags -g dwarf2
+             ;;
+             linux*|solaris*)

Added: branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/nspr/Perform Build.bat
===================================================================
--- branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/nspr/Perform Build.bat	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/nspr/Perform Build.bat	2010-12-07 19:27:32 UTC (rev 6811)
@@ -0,0 +1,80 @@
<A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">+ at echo</A> off
+
+%~d0
+cd &quot;%~dp0&quot;
+
+echo MSYS build for nspr
+echo ===================
+echo 1. 32-bit build
+echo 2. 64-bit build
+echo X. Exit
+echo.
+
+choice /c 12x
+
+if errorlevel 1 set BuildBits=32
+if errorlevel 2 set BuildBits=64
+if errorlevel 3 goto :eof
+
+verify &gt;nul
+call &quot;../Set Common Environment Variables&quot;
+if errorlevel 1 goto end
+
+set package=nspr-4.8.6.tar.gz
+set sourceFolder=nspr-4.8.6-%BuildBits%
+set tarFolder=nspr-4.8.6
+set curDir=%CD%
+
+if not exist %package% (
+	echo.
+	echo Downloading
+	wget <A HREF="ftp://ftp.mozilla.org/pub/mozilla.org/nspr/releases/v4.8.6/src/%package%">ftp://ftp.mozilla.org/pub/mozilla.org/nspr/releases/v4.8.6/src/%package%</A>
+)
+
+if errorlevel 1 goto end
+
+echo.
+echo Preparing
+rm -r -f &quot;%devDir%\%sourceFolder%&quot;
+if errorlevel 1 goto end
+
+mkdir &quot;%devDir%\%sourceFolder%&quot;
+if errorlevel 1 goto end
+
+tar xfz &quot;%package%&quot; -C &quot;%devDir%/%sourceFolder%&quot;
+if errorlevel 1 goto end
+
+cd &quot;%devDir%\%sourceFolder%&quot;
+
+for /f &quot;delims=&quot; %%a in ('dir /b %tarFolder%') do (
+	move &quot;%CD%\%tarFolder%\%%a&quot; &quot;%CD%&quot;
+)
+
+echo.
+echo Configuring
+cd mozilla\nsprpub
+sh ./configure --prefix=&quot;%usrLocalDir%&quot; --enable-strip --enable-win32-target=WIN95 --enable-optimize --disable-debug
+
+if errorlevel 1 goto end
+echo.
+pause
+
+make
+if errorlevel 1 goto end
+
+make install
+if errorlevel 1 goto end
+
+move &quot;%usrLocalDir%\lib\nspr4.dll&quot; &quot;%usrLocalDir%\bin&quot;
+copy &quot;%usrLocalDir%\bin\nspr4.dll&quot; &quot;%admBuildDir%&quot;
+
+pexports &quot;%usrLocalDir%/bin/nspr4.dll&quot; &gt; nspr4.def
+dlltool -d nspr4.def -l &quot;%usrLocalDir%/lib/nspr4.dll.a&quot;
+
+goto end
+
+:error
+echo Error
+
+:end
+pause
\ No newline at end of file

Added: branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/opencore-amr/Perform Build.bat
===================================================================
--- branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/opencore-amr/Perform Build.bat	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/opencore-amr/Perform Build.bat	2010-12-07 19:27:32 UTC (rev 6811)
@@ -0,0 +1,75 @@
<A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">+ at echo</A> off
+
+echo MSYS build for opencore-amr
+echo ===========================
+echo 1. 32-bit build
+echo 2. 64-bit build
+echo X. Exit
+echo.
+
+choice /c 12x
+
+if errorlevel 1 set BuildBits=32
+if errorlevel 2 set BuildBits=64
+if errorlevel 3 goto :eof
+
+verify &gt;nul
+call &quot;../Set Common Environment Variables&quot;
+if errorlevel 1 goto end
+
+set package=opencore-amr-0.1.2.tar.gz
+set sourceFolder=opencore-amr-0.1.2-%BuildBits%
+set tarFolder=opencore-amr-0.1.2
+set curDir=%CD%
+
+if not exist %package% (
+	echo.
+	echo Downloading
+	wget <A HREF="http://sourceforge.net/projects/opencore-amr/files/opencore-amr/0.1.2/%package%/download">http://sourceforge.net/projects/opencore-amr/files/opencore-amr/0.1.2/%package%/download</A>
+)
+
+if errorlevel 1 goto end
+
+echo.
+echo Preparing
+rm -r -f &quot;%devDir%\%sourceFolder%&quot;
+if errorlevel 1 goto end
+
+mkdir &quot;%devDir%\%sourceFolder%&quot;
+if errorlevel 1 goto end
+
+tar xfz &quot;%package%&quot; -C &quot;%devDir%\%sourceFolder%&quot;
+if errorlevel 1 goto end
+cd &quot;%devDir%\%sourceFolder%&quot;
+
+for /f &quot;delims=&quot; %%a in ('dir /b %tarFolder%') do (
+  move &quot;%CD%\%tarFolder%\%%a&quot; &quot;%CD%&quot;
+)
+
+echo.
+echo Patching
+patch -p0 -i &quot;%curDir%\amrnb_Makefile.in&quot;
+patch -p0 -i &quot;%curDir%\amrwb_Makefile.in&quot;
+
+echo.
+echo Configuring
+
+sh ./configure --prefix=&quot;%usrLocalDir%&quot; --disable-static
+
+if errorlevel 1 goto end
+echo.
+pause
+
+make install-strip
+if errorlevel 1 goto end
+
+copy &quot;%usrLocalDir%\bin\libopencore-amrnb-0.dll&quot; &quot;%admBuildDir%&quot;
+copy &quot;%usrLocalDir%\bin\libopencore-amrwb-0.dll&quot; &quot;%admBuildDir%&quot;
+
+goto end
+
+:error
+echo Error
+
+:end
+pause
\ No newline at end of file

Added: branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/opencore-amr/amrnb_Makefile.in
===================================================================
--- branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/opencore-amr/amrnb_Makefile.in	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/opencore-amr/amrnb_Makefile.in	2010-12-07 19:27:32 UTC (rev 6811)
@@ -0,0 +1,11 @@
+--- amrnb/Makefile.in.orig	2009-09-18 18:45:43 +0100
++++ amrnb/Makefile.in	2010-11-27 20:52:08 +0000
+@@ -274,7 +274,7 @@
+ pkgconfigdir = $(libdir)/pkgconfig
+ pkgconfig_DATA = opencore-amrnb.pc
+ lib_LTLIBRARIES = libopencore-amrnb.la
+-libopencore_amrnb_la_LDFLAGS = -version-info @OPENCORE_AMRNB_VERSION@
++libopencore_amrnb_la_LDFLAGS = -version-info @OPENCORE_AMRNB_VERSION@ -no-undefined
+ 
+ # Our sources to include. There are certain sources we exclude and they are
+ # $(DEC_SRC_DIR)/decoder_gsm_amr.cpp

Added: branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/opencore-amr/amrwb_Makefile.in
===================================================================
--- branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/opencore-amr/amrwb_Makefile.in	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/opencore-amr/amrwb_Makefile.in	2010-12-07 19:27:32 UTC (rev 6811)
@@ -0,0 +1,11 @@
+--- amrwb/Makefile.in.orig	2010-11-27 20:54:46 +0000
++++ amrwb/Makefile.in	2010-11-27 20:52:45 +0000
+@@ -250,7 +250,7 @@
+ pkgconfigdir = $(libdir)/pkgconfig
+ pkgconfig_DATA = opencore-amrwb.pc
+ lib_LTLIBRARIES = libopencore-amrwb.la
+-libopencore_amrwb_la_LDFLAGS = -version-info @OPENCORE_AMRWB_VERSION@
++libopencore_amrwb_la_LDFLAGS = -version-info @OPENCORE_AMRWB_VERSION@ -no-undefined
+ 
+ # Our sources to include. There are certain sources we exclude and they are
+ # $(DEC_SRC_DIR)/decoder_amr_wb.cpp

Modified: branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/x264/Perform Build.bat
===================================================================
--- branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/x264/Perform Build.bat	2010-12-07 19:25:23 UTC (rev 6810)
+++ branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/x264/Perform Build.bat	2010-12-07 19:27:32 UTC (rev 6811)
@@ -16,7 +16,7 @@
 verify &gt;nul
 call &quot;../Set Common Environment Variables&quot;
 
-if errorlevel 1 goto error
+if errorlevel 1 goto end
 
 set PATH=%PATH%;%devDir%\Git\bin
 
@@ -24,32 +24,26 @@
 del &quot;%usrLocalDir%\include\x264.h&quot;
 cd &quot;%devDir%&quot;
 
-if &quot;%BuildBits%&quot; == &quot;32&quot; (
-	set sourceFolder=x264
-	set buildFolder=build
-)
-
-if &quot;%BuildBits%&quot; == &quot;64&quot; (
-	set sourceFolder=x264-64
-	set buildFolder=build64
-	set configFlags=--host=x86_64-pc-mingw32
-)
-
+set sourceFolder=x264-%BuildBits%
 rm -r -f %sourceFolder%
+if errorlevel 1 goto end
 
 echo Downloading from git
 git clone <A HREF="git://git.videolan.org/x264.git">git://git.videolan.org/x264.git</A> %sourceFolder%
 if errorlevel 1 goto end
 
 cd &quot;%devDir%/%sourceFolder%&quot;
-sh ./configure --prefix=/usr/local --enable-shared %configFlags%
+
+if &quot;%BuildBits%&quot; == &quot;32&quot; sh ./configure --prefix=%usrLocalDir% --enable-shared
+if &quot;%BuildBits%&quot; == &quot;64&quot; sh ./configure --prefix=%usrLocalDir% --enable-shared --host=x86_64-pc-mingw32
+
 if errorlevel 1 goto end
 
 make install
 if errorlevel 1 goto end
 
-del &quot;%devDir%\avidemux_2.5_%buildFolder%\libx264-*.dll&quot;
-copy &quot;%usrLocalDir%/bin/libx264-*.dll&quot; &quot;%devDir%\avidemux_2.5_%buildFolder%&quot;
+del &quot;%admBuildDir%\libx264-*.dll&quot;
+copy &quot;%usrLocalDir%/bin/libx264-*.dll&quot; &quot;%admBuildDir%&quot;
 
 :end
 pause
\ No newline at end of file

Added: branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/xvid/Perform Build.bat
===================================================================
--- branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/xvid/Perform Build.bat	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/xvid/Perform Build.bat	2010-12-07 19:27:32 UTC (rev 6811)
@@ -0,0 +1,79 @@
<A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">+ at echo</A> off
+
+echo MSYS build for Xvid
+echo ===================
+echo 1. 32-bit build
+echo 2. 64-bit build
+echo X. Exit
+echo.
+
+choice /c 12x
+
+if errorlevel 1 set BuildBits=32
+if errorlevel 2 set BuildBits=64
+if errorlevel 3 goto :eof
+
+verify &gt;nul
+call &quot;../Set Common Environment Variables&quot;
+if errorlevel 1 goto end
+
+set package=xvidcore-1.2.2.tar.gz
+set sourceFolder=xvidcore-1.2.2-%BuildBits%
+set curDir=%CD%
+
+if not exist %package% (
+	echo.
+	echo Downloading
+	wget <A HREF="http://downloads.xvid.org/downloads/%package%">http://downloads.xvid.org/downloads/%package%</A>
+)
+
+if errorlevel 1 goto end
+
+echo.
+echo Preparing
+rm -r -f &quot;%devDir%\%sourceFolder%&quot;
+if errorlevel 1 goto end
+
+mkdir &quot;%devDir%\%sourceFolder%&quot;
+if errorlevel 1 goto end
+
+tar xfz &quot;%package%&quot; -C &quot;%devDir%\%sourceFolder%&quot;
+if errorlevel 1 goto end
+
+cd &quot;%devDir%\%sourceFolder%&quot;
+
+for /f &quot;delims=&quot; %%a in ('dir /b xvidcore') do (
+  move &quot;%CD%\xvidcore\%%a&quot; &quot;%CD%&quot;
+)
+
+echo.
+echo Patching
+patch -p0 -i &quot;%curDir%\configure.patch&quot;
+patch -p0 -i &quot;%curDir%\nasm.inc.patch&quot;
+
+echo.
+echo Configuring
+cd build\generic
+
+if &quot;%BuildBits%&quot; == &quot;32&quot; sh ./configure --prefix=&quot;%usrLocalDir%&quot;
+if &quot;%BuildBits%&quot; == &quot;64&quot; sh ./configure --prefix=&quot;%usrLocalDir%&quot; --build=x86_64-pc-mingw32
+if errorlevel 1 goto end
+echo.
+pause
+
+make LDFLAGS=&quot;%LDFLAGS% -Wl,-s&quot;
+if errorlevel 1 goto end
+
+make install
+if errorlevel 1 goto end
+
+move &quot;%usrLocalDir%\lib\xvidcore.dll&quot; &quot;%usrLocalDir%\bin&quot;
+copy &quot;%usrLocalDir%\bin\xvidcore.dll&quot; &quot;%admBuildDir%&quot;
+copy &quot;.\=build\xvidcore.dll.a&quot; &quot;%usrLocalDir%\lib&quot;
+goto end
+
+:error
+echo Error
+
+:end
+pause
\ No newline at end of file

Added: branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/xvid/configure.patch
===================================================================
--- branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/xvid/configure.patch	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/xvid/configure.patch	2010-12-07 19:27:32 UTC (rev 6811)
@@ -0,0 +1,11 @@
+--- build/generic/configure.orig	2009-05-28 18:13:31 +0100
++++ build/generic/configure	2010-11-27 10:25:35 +0000
+@@ -1319,7 +1319,7 @@
+ API_MAJOR=&quot;4&quot;
+ API_MINOR=&quot;2&quot;
+ 
+-minimum_yasm_minor_version=8
++minimum_yasm_minor_version=1
+ minimum_nasm_minor_version=0
+ minimum_nasm_major_version=2
+ nasm_prog=&quot;nasm&quot;

Added: branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/xvid/nasm.inc.patch
===================================================================
--- branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/xvid/nasm.inc.patch	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/foreignBuilds/mswin/xvid/nasm.inc.patch	2010-12-07 19:27:32 UTC (rev 6811)
@@ -0,0 +1,16 @@
+--- src/nasm.inc.orig	2009-05-28 16:04:35 +0100
++++ src/nasm.inc	2010-11-27 10:51:04 +0000
+@@ -157,9 +157,10 @@
+ %define XVID_MOVSXD movsx
+ %endif
+ 
+-
+-%ifdef WINDOWS
+-      %define PREFIX
++%ifndef ARCH_IS_X86_64
++      %ifdef WINDOWS
++            %define PREFIX
++      %endif
+ %endif
+ 
+ %ifdef NO_PREFIX


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003989.html">[Avidemux-svn-commit] r6810 -	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_vorbis
</A></li>
	<LI>Next message: <A HREF="003991.html">[Avidemux-svn-commit] r6812 - in branches/avidemux_2.6_branch_mean:	. foreignBuilds
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3990">[ date ]</a>
              <a href="thread.html#3990">[ thread ]</a>
              <a href="subject.html#3990">[ subject ]</a>
              <a href="author.html#3990">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">More information about the Avidemux-svn-commit
mailing list</a><br>
</body></html>
