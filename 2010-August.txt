From mean at mail.berlios.de  Sun Aug  1 08:39:27 2010
From: mean at mail.berlios.de (mean at mail.berlios.de)
Date: Sun,  1 Aug 2010 08:39:27 +0200
Subject: [Avidemux-svn-commit] r6496 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog
Message-ID: <20100801063927.85326480EC3@sheep.berlios.de>

Author: mean
Date: 2010-08-01 08:39:27 +0200 (Sun, 01 Aug 2010)
New Revision: 6496

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_encoding.cpp
Log:
[cli] Lord mulder flush patch

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_encoding.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_encoding.cpp	2010-07-28 05:30:42 UTC (rev 6495)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_encoding.cpp	2010-08-01 06:39:27 UTC (rev 6496)
@@ -200,6 +200,7 @@
           setVideoSizeIn((_videoSize>>20));
 
           fprintf(stderr,"Done:%u%% Frames: %u/%u ETA: %02u:%02u:%02u\r",percent,_lastnb,_total,hh,mm,ss);
+          fflush(stderr);
 
 }
 void DIA_encoding::setQuantIn(int size)



From mean at mail.berlios.de  Mon Aug  2 07:42:11 2010
From: mean at mail.berlios.de (mean at mail.berlios.de)
Date: Mon,  2 Aug 2010 07:42:11 +0200
Subject: [Avidemux-svn-commit] r6497 -
	branches/avidemux_2.5_branch_gruntster/cmake
Message-ID: <20100802054211.4CB47480EE5@sheep.berlios.de>

Author: mean
Date: 2010-08-02 07:42:11 +0200 (Mon, 02 Aug 2010)
New Revision: 6497

Modified:
   branches/avidemux_2.5_branch_gruntster/cmake/admCheckAudioDeviceLibs.cmake
Log:
[Pulse] automagic deps removal for pulse simple, patch by floppymaster

Modified: branches/avidemux_2.5_branch_gruntster/cmake/admCheckAudioDeviceLibs.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admCheckAudioDeviceLibs.cmake	2010-08-01 06:39:27 UTC (rev 6496)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admCheckAudioDeviceLibs.cmake	2010-08-02 05:42:11 UTC (rev 6497)
@@ -145,47 +145,51 @@
 
 	MESSAGE(STATUS "Checking for PulseAudio Simple")
 	MESSAGE(STATUS "******************************")
-        IF (PULSEAUDIOSIMPLE_INCLUDE_DIR AND PULSEAUDIOSIMPLE_LIBRARIES)
-        # in cache already
-         SET(PULSEAUDIOSIMPLE_FIND_QUIETLY TRUE)
-        ENDIF (PULSEAUDIOSIMPLE_INCLUDE_DIR AND PULSEAUDIOSIMPLE_LIBRARIES)
+	IF (PULSEAUDIOSIMPLE)
+           IF (PULSEAUDIOSIMPLE_INCLUDE_DIR AND PULSEAUDIOSIMPLE_LIBRARIES)
+           # in cache already
+            SET(PULSEAUDIOSIMPLE_FIND_QUIETLY TRUE)
+           ENDIF (PULSEAUDIOSIMPLE_INCLUDE_DIR AND PULSEAUDIOSIMPLE_LIBRARIES)
 
            # use pkg-config to get the directories and then use these values
-        # in the FIND_PATH() and FIND_LIBRARY() calls
-        INCLUDE(UsePkgConfig)
-        PKGCONFIG(libpulse-simple _PASIncDir _PASLinkDir _PASLinkFlags _PASCflags)
-        SET(PULSEAUDIOSIMPLE_DEFINITIONS ${_PASCflags})
+           # in the FIND_PATH() and FIND_LIBRARY() calls
+           INCLUDE(UsePkgConfig)
+           PKGCONFIG(libpulse-simple _PASIncDir _PASLinkDir _PASLinkFlags _PASCflags)
+           SET(PULSEAUDIOSIMPLE_DEFINITIONS ${_PASCflags})
 
-        FIND_PATH(PULSEAUDIOSIMPLE_INCLUDE_DIR pulse/simple.h
-        PATHS
-        ${_PASIncDir}
-        PATH_SUFFIXES pulse
-        )
+           FIND_PATH(PULSEAUDIOSIMPLE_INCLUDE_DIR pulse/simple.h
+           PATHS
+           ${_PASIncDir}
+           PATH_SUFFIXES pulse
+           )
 
-        FIND_LIBRARY(PULSEAUDIOSIMPLE_LIBRARIES NAMES pulse-simple libpulse-simple
-        PATHS
-        ${_PASLinkDir}
-        )
+           FIND_LIBRARY(PULSEAUDIOSIMPLE_LIBRARIES NAMES pulse-simple libpulse-simple
+           PATHS
+           ${_PASLinkDir}
+           )
 
-        IF (PULSEAUDIOSIMPLE_INCLUDE_DIR AND PULSEAUDIOSIMPLE_LIBRARIES)
-         SET(PULSEAUDIOSIMPLE_FOUND TRUE)
-        ELSE (PULSEAUDIOSIMPLE_INCLUDE_DIR AND PULSEAUDIOSIMPLE_LIBRARIES)
-         SET(PULSEAUDIOSIMPLE_FOUND FALSE)
-        ENDIF (PULSEAUDIOSIMPLE_INCLUDE_DIR AND PULSEAUDIOSIMPLE_LIBRARIES)
+           IF (PULSEAUDIOSIMPLE_INCLUDE_DIR AND PULSEAUDIOSIMPLE_LIBRARIES)
+            SET(PULSEAUDIOSIMPLE_FOUND TRUE)
+           ELSE (PULSEAUDIOSIMPLE_INCLUDE_DIR AND PULSEAUDIOSIMPLE_LIBRARIES)
+            SET(PULSEAUDIOSIMPLE_FOUND FALSE)
+           ENDIF (PULSEAUDIOSIMPLE_INCLUDE_DIR AND PULSEAUDIOSIMPLE_LIBRARIES)
 
-        IF (PULSEAUDIOSIMPLE_FOUND)
-         IF (NOT PULSEAUDIOSIMPLE_FIND_QUIETLY)
-          MESSAGE(STATUS "Found PulseAudio Simple: ${PULSEAUDIOSIMPLE_LIBRARIES}")
-        ENDIF (NOT PULSEAUDIOSIMPLE_FIND_QUIETLY)
-        SET(USE_PULSE_SIMPLE 1)
-        ELSE (PULSEAUDIOSIMPLE_FOUND)
-         MESSAGE(STATUS "Could NOT find PulseAudioSimple")
-        ENDIF (PULSEAUDIOSIMPLE_FOUND)
+           IF (PULSEAUDIOSIMPLE_FOUND)
+            IF (NOT PULSEAUDIOSIMPLE_FIND_QUIETLY)
+             MESSAGE(STATUS "Found PulseAudio Simple: ${PULSEAUDIOSIMPLE_LIBRARIES}")
+           ENDIF (NOT PULSEAUDIOSIMPLE_FIND_QUIETLY)
+           SET(USE_PULSE_SIMPLE 1)
+           ELSE (PULSEAUDIOSIMPLE_FOUND)
+            MESSAGE(STATUS "Could NOT find PulseAudioSimple")
+           ENDIF (PULSEAUDIOSIMPLE_FOUND)
 
 		SET(ENV{ADM_HAVE_PULSEAUDIO} ${PULSEAUDIOSIMPLE_FOUND})
-        MARK_AS_ADVANCED(PULSEAUDIOSIMPLE_INCLUDE_DIR PULSEAUDIOSIMPLE_LIBRARIES)
+           MARK_AS_ADVANCED(PULSEAUDIOSIMPLE_INCLUDE_DIR PULSEAUDIOSIMPLE_LIBRARIES)
 
 		MESSAGE("")
+	ELSE (PULSEAUDIOSIMPLE)
+		MESSAGE("${MSG_DISABLE_OPTION}")
+	ENDIF (PULSEAUDIOSIMPLE)
 ELSE (UNIX AND NOT APPLE)
 	SET(PULSEAUDIOSIMPLE_CAPABLE FALSE)
 ENDIF (UNIX AND NOT APPLE)



From gruntster at mail.berlios.de  Mon Aug  2 21:07:49 2010
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Mon,  2 Aug 2010 21:07:49 +0200
Subject: [Avidemux-svn-commit] r6498 - in
	branches/avidemux_2.5_branch_gruntster/avidemux: ADM_encoder
	ADM_script
Message-ID: <20100802190749.37AE848024D@sheep.berlios.de>

Author: gruntster
Date: 2010-08-02 21:07:48 +0200 (Mon, 02 Aug 2010)
New Revision: 6498

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_encCodecDesc.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_pluginLoad.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_vidEncode.hxx
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSFunctions.cpp
Log:
[vidEnc] move menu entries from compression params

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_encCodecDesc.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_encCodecDesc.h	2010-08-02 05:42:11 UTC (rev 6497)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_encCodecDesc.h	2010-08-02 19:07:48 UTC (rev 6498)
@@ -1,16 +1,18 @@
 #ifndef ADM_CODEC_CONFIG_
 #define ADM_CODEC_CONFIG_
 
-#define REQUANT_AS_CODE
 #include "ADM_vidEncode.hxx"
 // Yv12
 extern uint8_t DIA_requant(COMPRES_PARAMS *incoming);
 
+CODEC_INFO yv12codecInfo = {
+  QT_TR_NOOP("YV12 (raw)"),
+  "YV12",
+  "YV12"
+};
+
 COMPRES_PARAMS yv12codec = {
   CodecYV12,
-  QT_TR_NOOP("YV12 (raw)"),
-  "YV12",
-  "YV12",
   COMPRESS_CQ,
   1,
   1500,
@@ -23,13 +25,16 @@
   NULL
 };
 
-#if defined REQUANT_AS_CODE
 uint32_t RequantFactorExtra=1000; // 1000* the actual requant factor
+
+CODEC_INFO RequantCodecInfo = {
+    QT_TR_NOOP("MPEG-2 requant"),
+    "REQUANT",
+    "Mpeg2 Requantizer"
+};
+
 COMPRES_PARAMS RequantCodec = {
     CodecRequant,
-    QT_TR_NOOP("MPEG-2 requant"),
-    "REQUANT",
-    "Mpeg2 Requantizer",
     COMPRESS_CQ,
     4,
     1500,
@@ -41,24 +46,29 @@
     sizeof (RequantFactorExtra),
     DIA_requant
 };
-#endif
 
-COMPRES_PARAMS DUMMYONE =
-  { CodecDummy, QT_TR_NOOP("dummy"), "dummy", "dummy", COMPRESS_CQ, 4, 1500, 700,1000, 0, 0,
-NULL, 0 };
-COMPRES_PARAMS CopyCodec =
-  { CodecCopy, QT_TR_NOOP("Copy"), "Copy", "Copy", COMPRESS_CQ, 4, 1500, 700,1000, 0, 0, NULL,
-0 };
+CODEC_INFO CopyCodecInfo = {
+	QT_TR_NOOP("Copy"),
+	"Copy",
+	"Copy"
+};
 
+COMPRES_PARAMS CopyCodec = { CodecCopy, COMPRESS_CQ, 4, 1500, 700,1000, 0, 0, NULL, 0 };
+
+CODEC_INFO *internalVideoCodecInfo[] = {
+  &CopyCodecInfo,
+  &RequantCodecInfo,
+  &yv12codecInfo
+};
+
 COMPRES_PARAMS *internalVideoCodec[] = {
   &CopyCodec,
   &RequantCodec,
-  &yv12codec,
-  &DUMMYONE
+  &yv12codec
 };
 
 int getInternalVideoCodecCount()
 {
-	return (sizeof(internalVideoCodec) / sizeof(COMPRES_PARAMS*)) - 1;	// There is a dummy extra one at the end
+	return (sizeof(internalVideoCodec) / sizeof(COMPRES_PARAMS*));
 }
 #endif

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_pluginLoad.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_pluginLoad.cpp	2010-08-02 05:42:11 UTC (rev 6497)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_pluginLoad.cpp	2010-08-02 19:07:48 UTC (rev 6498)
@@ -28,9 +28,13 @@
 using namespace std;
 
 vector<COMPRES_PARAMS> AllVideoCodec;
+vector<CODEC_INFO> AllVideoCodecInfo;
+
 int defaultVideoEncoder = -1;
 
 extern COMPRES_PARAMS *internalVideoCodec[];
+extern CODEC_INFO *internalVideoCodecInfo[];
+
 extern int getInternalVideoCodecCount();
 
 #if 1
@@ -248,7 +252,7 @@
 	int internalCodecCount = getInternalVideoCodecCount();
 
 	for (int i = 0; i < internalCodecCount; i++)
-		pluginIds.insert(internalVideoCodec[i]->tagName);
+		pluginIds.insert(internalVideoCodecInfo[i]->tagName);
 
 	for (list<ADM_vidEnc_plugin*>::iterator it = ADM_videoEncoderPlugins.begin(); it != ADM_videoEncoderPlugins.end(); it++)
 	{
@@ -271,18 +275,21 @@
 		// internal
 		for (int i = 0; i < internalCodecCount; i++)
 		{			
-			if (string(internalVideoCodec[i]->tagName) == itRankedPlugin->id)
+			if (string(internalVideoCodecInfo[i]->tagName) == itRankedPlugin->id)
 			{
 				COMPRES_PARAMS param;
+				CODEC_INFO info;
 
 				param.codec = internalVideoCodec[i]->codec;
-				param.menuName = internalVideoCodec[i]->menuName;
-				param.tagName = internalVideoCodec[i]->tagName;
 				param.extra_param = internalVideoCodec[i]->extra_param;
 				param.extraSettings = internalVideoCodec[i]->extraSettings;
 				param.extraSettingsLen = internalVideoCodec[i]->extraSettingsLen;
 
+				info.menuName = internalVideoCodecInfo[i]->menuName;
+				info.tagName = internalVideoCodecInfo[i]->tagName;
+
 				AllVideoCodec.push_back(param);
+				AllVideoCodecInfo.push_back(info);
 				found = true;
 
 				if (itRankedPlugin->isDefault)
@@ -329,19 +336,23 @@
 				*it--;
 
 				COMPRES_PARAMS param;
+				CODEC_INFO info;
 
 				if ((prevType != NULL && strcmp(prevType, codecType) == 0) || (nextType != NULL && strcmp(nextType, codecType) == 0))
-					param.menuName = string(codecType) + " (" + string(codecName) + ")";
+					info.menuName = string(codecType) + " (" + string(codecName) + ")";
 				else
-					param.menuName = codecType;
+					info.menuName = codecType;
 
-				param.codec = CodecExternal;
-				param.tagName = codecName;
+				info.tagName = codecName;
+
+				param.codec = CodecExternal;				
 				param.extra_param = counter;
 				param.extraSettings = NULL;
 				param.extraSettingsLen = 0;
 
 				AllVideoCodec.push_back(param);
+				AllVideoCodecInfo.push_back(info);
+
 				int length = plugin->getOptions(plugin->encoderId, NULL, NULL, 0);
 				char *pluginOptions = new char[length + 1];
 				vidEncOptions encodeOptions;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_vidEncode.hxx
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_vidEncode.hxx	2010-08-02 05:42:11 UTC (rev 6497)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_vidEncode.hxx	2010-08-02 19:07:48 UTC (rev 6498)
@@ -50,12 +50,16 @@
 #define ADM_EXTRA_PARAM_JS 0x100
 #define ADM_EXTRA_PARAM    0x200
 
-struct COMPRES_PARAMS
+struct CODEC_INFO
 {
-	SelectCodecType codec;
 	std::string menuName;
 	const char *tagName;
 	const char *descriptor;
+};
+
+struct COMPRES_PARAMS
+{
+	SelectCodecType codec;
 	COMPRESSION_MODE mode;
 	uint32_t qz, bitrate, finalsize,avg_bitrate;  // avg_bitrate is in kb/s!!
 	uint32_t capabilities;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.cpp	2010-08-02 05:42:11 UTC (rev 6497)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.cpp	2010-08-02 19:07:48 UTC (rev 6498)
@@ -38,6 +38,7 @@
 
 extern int defaultVideoEncoder;
 extern std::vector<COMPRES_PARAMS> AllVideoCodec;
+extern std::vector<CODEC_INFO> AllVideoCodecInfo;
 extern uint8_t DIA_videoCodec(int *codecIndex);
 extern void UI_setVideoCodec(int i);
 extern void getMainWindowHandles(intptr_t *handle, intptr_t *nativeHandle);
@@ -269,7 +270,7 @@
 
 	ADM_assert(i < nb);
 
-	return AllVideoCodec[i].menuName.c_str();
+	return AllVideoCodecInfo[i].menuName.c_str();
 }
 
 void videoCodecChanged(int newCodecIndex)
@@ -296,7 +297,7 @@
 
 	for (uint32_t i = 0; i < nb; i++)
 	{
-		if (!strcasecmp(name, AllVideoCodec[i].tagName))
+		if (!strcasecmp(name, AllVideoCodecInfo[i].tagName))
 		{
 			printf ("\n Codec %s found\n", name);
 			videoCodecSetCodec(i);
@@ -309,7 +310,7 @@
 	printf (" Available codec : %d\n", sizeof (AllVideoCodec) / sizeof (COMPRES_PARAMS));
 
 	for (uint32_t i = 0; i < nb; i++)
-		printf ("%s:%s\n", AllVideoCodec[i].tagName, AllVideoCodec[i].descriptor);
+		printf ("%s:%s\n", AllVideoCodecInfo[i].tagName, AllVideoCodecInfo[i].descriptor);
 
 	return 0;
 }
@@ -390,7 +391,7 @@
 
 const char *videoCodecGetName(void)
 {
-	return AllVideoCodec[currentCodecIndex].tagName;
+	return AllVideoCodecInfo[currentCodecIndex].tagName;
 }
 
 ///
@@ -731,7 +732,7 @@
 	{
 		if (extraLen != param->extraSettingsLen)
 		{
-			printf("Codec:%s\n", param->descriptor);
+			printf("Codec:%s\n", AllVideoCodecInfo[currentCodecIndex].descriptor);
 			printf("Expected :%d got:%d\n", param->extraSettingsLen, extraLen);
 			ADM_assert(0);
 		}

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSFunctions.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSFunctions.cpp	2010-08-02 05:42:11 UTC (rev 6497)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSFunctions.cpp	2010-08-02 19:07:48 UTC (rev 6498)
@@ -623,9 +623,6 @@
 {
    COMPRES_PARAMS test={
   CodecYV12,
-  "YV12 (raw)",
-  "YV12",
-  "YV12",
   COMPRESS_CQ,
   1,
   1500,



From gruntster at mail.berlios.de  Mon Aug  2 21:43:53 2010
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Mon,  2 Aug 2010 21:43:53 +0200
Subject: [Avidemux-svn-commit] r6499 - in
	branches/avidemux_2.5_branch_gruntster:
	avidemux/ADM_audiocodec cmake cmake/patches
Message-ID: <20100802194353.1D66C480274@sheep.berlios.de>

Author: gruntster
Date: 2010-08-02 21:43:52 +0200 (Mon, 02 Aug 2010)
New Revision: 6499

Added:
   branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_vc1dec.c.patch
Removed:
   branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_vc1_lowdelay.c.patch
Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_codecimaadpcm.cpp
   branches/avidemux_2.5_branch_gruntster/cmake/admFFmpegBuild.cmake
   branches/avidemux_2.5_branch_gruntster/cmake/patches/createPatches.sh
   branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_avcodec.h.patch
   branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_utils.c.patch
Log:
[ffmpeg] update FFmpeg to r24666 & libswscale to r31906

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_codecimaadpcm.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_codecimaadpcm.cpp	2010-08-02 19:07:48 UTC (rev 6498)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_codecimaadpcm.cpp	2010-08-02 19:43:52 UTC (rev 6499)
@@ -35,10 +35,10 @@
 #define QT_IMA_ADPCM_BLOCK_SIZE 0x22
 #define QT_IMA_ADPCM_SAMPLES_PER_BLOCK 64
 
-#define BE_16(x) (be2me_16(*(unsigned short *)(x)))
-#define BE_32(x) (be2me_32(*(unsigned int *)(x)))
-#define LE_16(x) (le2me_16(*(unsigned short *)(x)))
-#define LE_32(x) (le2me_32(*(unsigned int *)(x)))
+#define BE_16(x) (av_be2ne16(*(unsigned short *)(x)))
+#define BE_32(x) (av_be2ne32(*(unsigned int *)(x)))
+#define LE_16(x) (av_le2ne16(*(unsigned short *)(x)))
+#define LE_32(x) (av_le2ne32(*(unsigned int *)(x)))
 
 int ms_ima_adpcm_decode_block(unsigned short *output,
   unsigned char *input, int channels, int block_size);

Modified: branches/avidemux_2.5_branch_gruntster/cmake/admFFmpegBuild.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admFFmpegBuild.cmake	2010-08-02 19:07:48 UTC (rev 6498)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admFFmpegBuild.cmake	2010-08-02 19:43:52 UTC (rev 6499)
@@ -1,7 +1,7 @@
 include(admFFmpegUtil)
 
-set(FFMPEG_VERSION 24078)	# http://git.ffmpeg.org/?p=ffmpeg;a=snapshot;h=831c3578f4948450c5b186dad4608638f13dce44;sf=tgz
-set(SWSCALE_VERSION 31642)	# http://git.ffmpeg.org/?p=libswscale;a=snapshot;h=fbeec9e0c5f6be5bb5ac082c2dc5c435628005c4;sf=tgz
+set(FFMPEG_VERSION 24666)	# http://git.ffmpeg.org/?p=ffmpeg;a=snapshot;h=64c439749fac9240ca3e267b84b1d83f588a9c06;sf=tgz
+set(SWSCALE_VERSION 31906)	# http://git.ffmpeg.org/?p=libswscale;a=snapshot;h=233bcae1499042c80d2111bc76086302793029a9;sf=tgz
 
 set(LIBRARY_SOURCE_DIR "${CMAKE_SOURCE_DIR}/avidemux/ADM_libraries")
 set(FFMPEG_SOURCE_DIR "${LIBRARY_SOURCE_DIR}/ffmpeg")

Modified: branches/avidemux_2.5_branch_gruntster/cmake/patches/createPatches.sh
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/patches/createPatches.sh	2010-08-02 19:07:48 UTC (rev 6498)
+++ branches/avidemux_2.5_branch_gruntster/cmake/patches/createPatches.sh	2010-08-02 19:43:52 UTC (rev 6499)
@@ -26,6 +26,7 @@
 updatePatch libavcodec mpegvideo.c
 updatePatch libavcodec mpegvideo_enc.c
 updatePatch libavcodec utils.c
+updatePatch libavcodec vc1dec.c
 updatePatch libavformat file.c
 updatePatch libavformat isom.c
 updatePatch libavformat matroskaenc.c

Modified: branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_avcodec.h.patch
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_avcodec.h.patch	2010-08-02 19:07:48 UTC (rev 6498)
+++ branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_avcodec.h.patch	2010-08-02 19:43:52 UTC (rev 6499)
@@ -1,8 +1,8 @@
-*** libavcodec/avcodec.h.old	Tue Jul  6 19:51:18 2010
---- libavcodec/avcodec.h	Tue Jul  6 19:51:18 2010
+*** libavcodec/avcodec.h.old	Mon Aug  2 20:19:48 2010
+--- libavcodec/avcodec.h	Mon Aug  2 20:19:48 2010
 ***************
-*** 600,605 ****
---- 600,607 ----
+*** 614,619 ****
+--- 614,621 ----
   #define CODEC_FLAG2_PSY           0x00080000 ///< Use psycho visual optimizations.
   #define CODEC_FLAG2_SSIM          0x00100000 ///< Compute SSIM during encoding, error[] values are undefined.
   #define CODEC_FLAG2_INTRA_REFRESH 0x00200000 ///< Use periodic insertion of intra blocks instead of keyframes.
@@ -12,8 +12,8 @@
   /* Unsupported options :
    *              Syntax Arithmetic coding (SAC)
 ***************
-*** 1482,1487 ****
---- 1484,1490 ----
+*** 1496,1501 ****
+--- 1498,1504 ----
        * - decoding: unused
        */
       int rc_max_rate;
@@ -22,8 +22,8 @@
       /**
        * minimum bitrate
 ***************
-*** 1496,1501 ****
---- 1499,1506 ----
+*** 1510,1515 ****
+--- 1513,1520 ----
        * - decoding: unused
        */
       int rc_buffer_size;

Modified: branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_utils.c.patch
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_utils.c.patch	2010-08-02 19:07:48 UTC (rev 6498)
+++ branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_utils.c.patch	2010-08-02 19:43:52 UTC (rev 6499)
@@ -1,8 +1,8 @@
-*** libavcodec/utils.c.old	Tue Jul  6 19:51:25 2010
---- libavcodec/utils.c	Tue Jul  6 19:51:25 2010
+*** libavcodec/utils.c.old	Mon Aug  2 20:19:56 2010
+--- libavcodec/utils.c	Mon Aug  2 20:19:56 2010
 ***************
-*** 636,645 ****
---- 636,647 ----
+*** 644,653 ****
+--- 644,655 ----
   
       if((avctx->codec->capabilities & CODEC_CAP_DELAY) || avpkt->size){
           //FIXME remove the check below _after_ ensuring that all audio check that the available space is enough

Deleted: branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_vc1_lowdelay.c.patch
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_vc1_lowdelay.c.patch	2010-08-02 19:07:48 UTC (rev 6498)
+++ branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_vc1_lowdelay.c.patch	2010-08-02 19:43:52 UTC (rev 6499)
@@ -1,16 +0,0 @@
-Index: libavcodec/vc1dec.c
-===================================================================
---- libavcodec/vc1dec.c	(revision 23514)
-+++ libavcodec/vc1dec.c	(working copy)
-@@ -3118,7 +3118,10 @@
-     AVFrame *pict = data;
-     uint8_t *buf2 = NULL;
-     const uint8_t *buf_start = buf;
--
-+/** MEANX **/
-+    if(s->flags& CODEC_FLAG_LOW_DELAY)
-+        s->low_delay=1;
-+/** /MEANX **/
-     /* no supplementary picture */
-     if (buf_size == 0) {
-         /* special case for last picture */

Copied: branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_vc1dec.c.patch (from rev 6498, branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_vc1_lowdelay.c.patch)
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_vc1dec.c.patch	                        (rev 0)
+++ branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_vc1dec.c.patch	2010-08-02 19:43:52 UTC (rev 6499)
@@ -0,0 +1,22 @@
+*** libavcodec/vc1dec.c.old	Mon Aug  2 20:19:57 2010
+--- libavcodec/vc1dec.c	Mon Aug  2 20:19:57 2010
+***************
+*** 3146,3152 ****
+      AVFrame *pict = data;
+      uint8_t *buf2 = NULL;
+      const uint8_t *buf_start = buf;
+! 
+      /* no supplementary picture */
+      if (buf_size == 0) {
+          /* special case for last picture */
+--- 3146,3155 ----
+      AVFrame *pict = data;
+      uint8_t *buf2 = NULL;
+      const uint8_t *buf_start = buf;
+! /** MEANX **/
+!     if(s->flags& CODEC_FLAG_LOW_DELAY)
+!         s->low_delay=1;
+! /** /MEANX **/
+      /* no supplementary picture */
+      if (buf_size == 0) {
+          /* special case for last picture */



From gruntster at mail.berlios.de  Mon Aug  2 22:23:15 2010
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Mon,  2 Aug 2010 22:23:15 +0200
Subject: [Avidemux-svn-commit] r6500 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog
Message-ID: <20100802202316.0AC05480274@sheep.berlios.de>

Author: gruntster
Date: 2010-08-02 22:23:15 +0200 (Mon, 02 Aug 2010)
New Revision: 6500

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_pluginManager.cpp
Log:
[vidEnc] missed file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_pluginManager.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_pluginManager.cpp	2010-08-02 19:43:52 UTC (rev 6499)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_pluginManager.cpp	2010-08-02 20:23:15 UTC (rev 6500)
@@ -25,7 +25,7 @@
 #define PLUGIN_ID           Qt::UserRole
 #define PLUGIN_IS_DEFAULT   Qt::UserRole + 1
 
-extern COMPRES_PARAMS *internalVideoCodec[];
+extern CODEC_INFO *internalVideoCodecInfo[];
 extern uint32_t ADM_ve_getNbEncoders(void);
 extern bool ADM_ve_getEncoderInfo(int filter, const char **id, const char **name, const char **type, const char **desc, uint32_t *major, uint32_t *minor, uint32_t *patch);
 extern int getInternalVideoCodecCount();
@@ -82,12 +82,12 @@
 	{
 		UiPlugVersionInfo versionInfo;
 
-		versionInfo.name = internalVideoCodec[i]->menuName;
+		versionInfo.name = internalVideoCodecInfo[i]->menuName;
 		versionInfo.version = QString("%1.0.%2").arg(VERSION).arg(ADM_SUBVERSION).toUtf8().constData();
 		versionInfo.description = tr("Internal video encoder").toUtf8().constData();
 
-		pluginIds.insert(internalVideoCodec[i]->tagName);
-		plugins[internalVideoCodec[i]->tagName] = versionInfo;
+		pluginIds.insert(internalVideoCodecInfo[i]->tagName);
+		plugins[internalVideoCodecInfo[i]->tagName] = versionInfo;
 	}
 
 	for (int i = 0; i < pluginCount; i++)



From mean at mail.berlios.de  Tue Aug  3 08:15:19 2010
From: mean at mail.berlios.de (mean at mail.berlios.de)
Date: Tue,  3 Aug 2010 08:15:19 +0200
Subject: [Avidemux-svn-commit] r6501 -
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS
Message-ID: <20100803061519.5E93C480787@sheep.berlios.de>

Author: mean
Date: 2010-08-03 08:15:19 +0200 (Tue, 03 Aug 2010)
New Revision: 6501

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psAudio.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psComputeTimeStamp.cpp
Log:
[PS/Demux] Remove first audio seek point if it has no DTS

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psAudio.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psAudio.cpp	2010-08-02 20:23:15 UTC (rev 6500)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psAudio.cpp	2010-08-03 06:15:19 UTC (rev 6501)
@@ -101,6 +101,7 @@
             return true;
         }
     }
+    ADM_warning("[psAudio] Cannot find seek point\n");
     return false;
 }
 /**

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psComputeTimeStamp.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psComputeTimeStamp.cpp	2010-08-02 20:23:15 UTC (rev 6500)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psComputeTimeStamp.cpp	2010-08-03 06:15:19 UTC (rev 6501)
@@ -32,6 +32,69 @@
         uint64_t lastDts=0,lastPts=0,dtsIncrement=0;
 
 
+        // Let's make sure the fist audio seek point is not ADM_NO_PTS
+        for(int i=0;i<listOfAudioTracks.size();i++)
+        {
+
+            vector          <ADM_mpgAudioSeekPoint > *seekPoints=&(listOfAudioTracks[i]->access->seekPoints);
+            uint64_t dts=(*seekPoints)[0].dts;
+            if(dts!=ADM_NO_PTS) continue;
+            ADM_warning("[PS] Audio track %d has no timestamp for first seek point, guessing...\n",i);
+            int offset=0;
+            int max=(*seekPoints).size();
+            while(offset<max)
+            {
+                    if(   (*seekPoints)[offset].dts!=ADM_NO_PTS) break;
+                    offset++;
+            }
+            if(offset>=max)
+            {
+                    ADM_error("No valid DTS in audio track\n");
+                    continue;
+            }
+#if 1
+            // Remove first seek point with no PTS...
+            if(offset) ADM_info("Deleting %d seekPoints with no timestamp\n",offset);
+            for(int rm=0;rm<offset;rm++)
+                    (*seekPoints).erase( (*seekPoints).begin());
+#else
+
+            // Compute the missing DTS using byterate and assuming CBR
+            uint64_t future=(*seekPoints)[offset].dts;
+            uint64_t bytes=(*seekPoints)[offset].size;
+            double   byteRate= listOfAudioTracks[i]->header.byterate;
+            if(!byteRate)
+            {
+                ADM_error("No bytereate, cannot fix seekpoints\n");
+                continue;
+            }
+            for(int point=offset-1;point>=0;point++)
+            {
+                double deltaBytes=(*seekPoints)[point].size;
+                double deltaTime=0;
+                printf("Computing DTS for seek point %d, bytes %"LLU", with reference bytes %"LLU" time %"LLU" us\n",
+                                    point,(uint64_t)deltaBytes,bytes,future);
+                if(deltaBytes>bytes)
+                {
+                        ADM_error("Size going back at seek point %d\n",i);
+                        goto next;
+                }
+                deltaBytes=(double)bytes-deltaBytes; // Bytes -> us
+                deltaBytes=deltaBytes*1000*1000.; 
+                deltaTime=deltaBytes/byteRate;
+                if(deltaTime>future)
+                {
+                        ADM_error("Computed time correction too big : %"LLU" max=%"LLU"\n",
+                                            (uint64_t)deltaTime, (uint64_t)future);
+                        (*seekPoints)[point].dts=0;
+                }else
+                (*seekPoints)[point].dts=(uint64_t)(future-deltaTime);
+            }
+#endif
+next:
+                ;
+        }
+
         // For audio, The first packet in the seekpoints happens a bit after the action
         // It means some audio may have been seen since we locked on video.
         // So we compute the DTS of the first real packet



From gruntster at mail.berlios.de  Tue Aug  3 21:48:37 2010
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Tue,  3 Aug 2010 21:48:37 +0200
Subject: [Avidemux-svn-commit] r6502 - in
	branches/avidemux_2.5_branch_gruntster: avidemux cmake
	platforms/windows/installer
Message-ID: <20100803194837.D2481480DF2@sheep.berlios.de>

Author: gruntster
Date: 2010-08-03 21:48:37 +0200 (Tue, 03 Aug 2010)
New Revision: 6502

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/cmake/admFFmpegBuild.cmake
   branches/avidemux_2.5_branch_gruntster/cmake/admFFmpegUtil.cmake
   branches/avidemux_2.5_branch_gruntster/platforms/windows/installer/avidemux.nsi
Log:
[ffmpeg] link and install avcore 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt	2010-08-03 06:15:19 UTC (rev 6501)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt	2010-08-03 19:48:37 UTC (rev 6502)
@@ -273,7 +273,8 @@
 	ADM_libpostproc
 	ADM_libswscale
 	ADM_libavcodec
-	ADM_libavformat)
+	ADM_libavformat
+	ADM_libavcore)
 
 if (USE_SYSTEM_SPIDERMONKEY)
 	ADD_LIB_ALL_TARGETS(${SPIDERMONKEY_LIBRARY_DIR})

Modified: branches/avidemux_2.5_branch_gruntster/cmake/admFFmpegBuild.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admFFmpegBuild.cmake	2010-08-03 06:15:19 UTC (rev 6501)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admFFmpegBuild.cmake	2010-08-03 19:48:37 UTC (rev 6502)
@@ -198,6 +198,10 @@
 set_property(TARGET ADM_libavformat PROPERTY IMPORTED_LOCATION "${FFMPEG_BINARY_DIR}/libavformat/${LIBAVFORMAT_LIB}")
 install(FILES "${FFMPEG_BINARY_DIR}/libavformat/${LIBAVFORMAT_LIB}" DESTINATION "${FFMPEG_INSTALL_DIR}")
 
+add_library(ADM_libavcore UNKNOWN IMPORTED)
+set_property(TARGET ADM_libavcore PROPERTY IMPORTED_LOCATION "${FFMPEG_BINARY_DIR}/libavcore/${LIBAVCORE_LIB}")
+install(FILES "${FFMPEG_BINARY_DIR}/libavcore/${LIBAVCORE_LIB}" DESTINATION "${FFMPEG_INSTALL_DIR}")
+
 include_directories("${FFMPEG_SOURCE_DIR}")
 include_directories("${FFMPEG_SOURCE_DIR}/libavutil")
 include_directories("${FFMPEG_SOURCE_DIR}/libpostproc")

Modified: branches/avidemux_2.5_branch_gruntster/cmake/admFFmpegUtil.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admFFmpegUtil.cmake	2010-08-03 06:15:19 UTC (rev 6501)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admFFmpegUtil.cmake	2010-08-03 19:48:37 UTC (rev 6502)
@@ -6,6 +6,7 @@
 
 MACRO (getFfmpegLibNames sourceDir)
 	getFfmpegVersionFromHeader("libavcodec" "${sourceDir}/libavcodec/avcodec.h" LIBAVCODEC_VERSION_MAJOR LIBAVCODEC_VERSION)
+	getFfmpegVersionFromHeader("libavcore" "${sourceDir}/libavcore/avcore.h" LIBAVCORE_VERSION_MAJOR LIBAVCORE_VERSION)	
 	getFfmpegVersionFromHeader("libavformat" "${sourceDir}/libavformat/avformat.h" LIBAVFORMAT_VERSION_MAJOR LIBAVFORMAT_VERSION)
 	getFfmpegVersionFromHeader("libavutil" "${sourceDir}/libavutil/avutil.h" LIBAVUTIL_VERSION_MAJOR LIBAVUTIL_VERSION)
 	getFfmpegVersionFromHeader("libpostproc" "${sourceDir}/libpostproc/postprocess.h" LIBPOSTPROC_VERSION_MAJOR LIBPOSTPROC_VERSION)
@@ -17,18 +18,21 @@
 
 	if (APPLE)
 		set(LIBAVCODEC_LIB lib${LIBAVCODEC_ADM}avcodec.${LIBAVCODEC_VERSION}${CMAKE_SHARED_LIBRARY_SUFFIX})
+		set(LIBAVCORE_LIB lib${LIBAVCODEC_ADM}avcore.${LIBAVCORE_VERSION}${CMAKE_SHARED_LIBRARY_SUFFIX})
 		set(LIBAVFORMAT_LIB lib${LIBAVCODEC_ADM}avformat.${LIBAVFORMAT_VERSION}${CMAKE_SHARED_LIBRARY_SUFFIX})
 		set(LIBAVUTIL_LIB lib${LIBAVCODEC_ADM}avutil.${LIBAVUTIL_VERSION}${CMAKE_SHARED_LIBRARY_SUFFIX})
 		set(LIBPOSTPROC_LIB lib${LIBAVCODEC_ADM}postproc.${LIBPOSTPROC_VERSION}${CMAKE_SHARED_LIBRARY_SUFFIX})
 		set(LIBSWSCALE_LIB lib${LIBAVCODEC_ADM}swscale.${LIBSWSCALE_VERSION}${CMAKE_SHARED_LIBRARY_SUFFIX})
 	elseif (UNIX)
 		set(LIBAVCODEC_LIB lib${LIBAVCODEC_ADM}avcodec${CMAKE_SHARED_LIBRARY_SUFFIX}.${LIBAVCODEC_VERSION})
+		set(LIBAVCORE_LIB lib${LIBAVCODEC_ADM}avcore${CMAKE_SHARED_LIBRARY_SUFFIX}.${LIBAVCORE_VERSION})
 		set(LIBAVFORMAT_LIB lib${LIBAVCODEC_ADM}avformat${CMAKE_SHARED_LIBRARY_SUFFIX}.${LIBAVFORMAT_VERSION})
 		set(LIBAVUTIL_LIB lib${LIBAVCODEC_ADM}avutil${CMAKE_SHARED_LIBRARY_SUFFIX}.${LIBAVUTIL_VERSION})
 		set(LIBPOSTPROC_LIB lib${LIBAVCODEC_ADM}postproc${CMAKE_SHARED_LIBRARY_SUFFIX}.${LIBPOSTPROC_VERSION})
 		set(LIBSWSCALE_LIB lib${LIBAVCODEC_ADM}swscale${CMAKE_SHARED_LIBRARY_SUFFIX}.${LIBSWSCALE_VERSION})
 	else (APPLE)
 		set(LIBAVCODEC_LIB ${LIBAVCODEC_ADM}avcodec-${LIBAVCODEC_VERSION}${CMAKE_SHARED_LIBRARY_SUFFIX})
+		set(LIBAVCORE_LIB ${LIBAVCODEC_ADM}avcore-${LIBAVCORE_VERSION}${CMAKE_SHARED_LIBRARY_SUFFIX})
 		set(LIBAVFORMAT_LIB ${LIBAVCODEC_ADM}avformat-${LIBAVFORMAT_VERSION}${CMAKE_SHARED_LIBRARY_SUFFIX})
 		set(LIBAVUTIL_LIB ${LIBAVCODEC_ADM}avutil-${LIBAVUTIL_VERSION}${CMAKE_SHARED_LIBRARY_SUFFIX})
 		set(LIBPOSTPROC_LIB ${LIBAVCODEC_ADM}postproc-${LIBPOSTPROC_VERSION}${CMAKE_SHARED_LIBRARY_SUFFIX})

Modified: branches/avidemux_2.5_branch_gruntster/platforms/windows/installer/avidemux.nsi
===================================================================
--- branches/avidemux_2.5_branch_gruntster/platforms/windows/installer/avidemux.nsi	2010-08-03 06:15:19 UTC (rev 6501)
+++ branches/avidemux_2.5_branch_gruntster/platforms/windows/installer/avidemux.nsi	2010-08-03 19:48:37 UTC (rev 6502)
@@ -297,6 +297,7 @@
     ${File} COPYING.
     ${File} README.
     ${File} avcodec-*.dll
+    ${File} avcore-*.dll
     ${File} avformat-*.dll
     ${File} avutil-*.dll
     ${File} postproc-*.dll



From mean at mail.berlios.de  Fri Aug  6 20:09:36 2010
From: mean at mail.berlios.de (mean at mail.berlios.de)
Date: Fri,  6 Aug 2010 20:09:36 +0200
Subject: [Avidemux-svn-commit] r6503 -
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS
Message-ID: <20100806180936.2B3CF480F0E@sheep.berlios.de>

Author: mean
Date: 2010-08-06 20:09:35 +0200 (Fri, 06 Aug 2010)
New Revision: 6503

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psIndex.cpp
Log:
[PSIndexer] Give more info when dts reset happens

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psIndex.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psIndex.cpp	2010-08-03 19:48:37 UTC (rev 6502)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psIndex.cpp	2010-08-06 18:09:35 UTC (rev 6503)
@@ -27,6 +27,7 @@
 #include "ADM_psAudioProbe.h"
 #include "DIA_working.h"
 #include "ADM_indexFile.h"
+#include "ADM_vidMisc.h"
 
 static const char Type[5]={'X','I','P','B','P'};  // Frame type
 static const char Structure[4]={'X','T','B','F'}; // X Top Bottom Frame
@@ -105,6 +106,7 @@
         DIA_workingBase  *ui;
         bool             headerDumped;
         uint64_t         lastValidVideoDts;
+       
 public:
                 PsIndexer(void);
                 ~PsIndexer();
@@ -113,7 +115,13 @@
         bool    writeAudio(void);
         bool    writeSystem(const char *filename,bool append);
         bool    Mark(indexerData *data,dmxPacketInfo *s,markType update);
-
+        uint64_t timeConvert(uint64_t x) // 90 kHz tick -> us
+                    {
+                         if(x==ADM_NO_PTS) return ADM_NO_PTS;
+                            x=x*1000;
+                            x/=90;
+                            return x;
+                    }
 };
 /**
       \fn psIndexer 
@@ -139,6 +147,7 @@
     ui=createWorking ("Indexing");
     headerDumped=false;
     lastValidVideoDts=ADM_NO_PTS;
+    
 }
 
 /**
@@ -210,6 +219,9 @@
 
           switch(startCode)
                   {
+                  
+
+                            ;
                   case 0xB3: // sequence start
                           Mark(&data,&info,markStart);
                           data.state=idx_startAtGopOrSeq;
@@ -327,6 +339,8 @@
                                     if(lastValidVideoDts>info.dts)
                                     {
                                             ADM_warning("DTS are going back, aborting, maybe several video appended ?");
+                                            ADM_warning("last Valid Dts %s\n",ADM_us2plain(timeConvert(lastValidVideoDts)));
+                                            ADM_warning("current    Dts %s\n",ADM_us2plain(timeConvert(info.dts)));
                                             goto theEnd;
                                      }
                             }



From mean at mail.berlios.de  Fri Aug  6 20:09:38 2010
From: mean at mail.berlios.de (mean at mail.berlios.de)
Date: Fri,  6 Aug 2010 20:09:38 +0200
Subject: [Avidemux-svn-commit] r6504 - in branches/avidemux_2.6_branch_mean:
	avidemux_core/ADM_coreDemuxerMpeg/include
	avidemux_core/ADM_coreDemuxerMpeg/src
	avidemux_plugins/ADM_demuxers/MpegPS
Message-ID: <20100806180938.11823480F0E@sheep.berlios.de>

Author: mean
Date: 2010-08-06 20:09:37 +0200 (Fri, 06 Aug 2010)
New Revision: 6504

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/include/dmxPSPacket.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/src/dmxPSPacket.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psIndex.cpp
Log:
[PS/Demux] Partially handle SCR reset in DVD (video only)

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/include/dmxPSPacket.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/include/dmxPSPacket.h	2010-08-06 18:09:35 UTC (rev 6503)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/include/dmxPSPacket.h	2010-08-06 18:09:37 UTC (rev 6504)
@@ -119,7 +119,7 @@
 #endif
 };
 /**
-    \class psPacketLinearTracker
+    \class packetStats
 */
 typedef struct
 {
@@ -131,13 +131,25 @@
     uint32_t startSize;
     uint64_t startDts;
 }packetStats;
-
+/**
+    \class psPacketLinearTracker
+    \brief Same as psPacketLinear, but keep stats
+*/
 class psPacketLinearTracker : public psPacketLinear
 {
 protected:
-      packetStats stats[256];
+        packetStats stats[256];
+        uint64_t    lastVobuEnd;    // In 90 Khz tick
+        uint64_t    nextVobuEnd;    // In 90 Khz tick
+        uint64_t    lastVobuPosition; 
+        uint64_t    nextVobuPosition; 
+        bool        decodeVobuPCI(uint32_t size,uint8_t *data);
+        bool        decodeVobuDSI(uint32_t size);
 
+
 public:
+        uint64_t        getLastVobuEndTime(void) {return lastVobuEnd;}
+        uint64_t        getLastVobuPosition(void) {return lastVobuPosition;}
                         psPacketLinearTracker(uint8_t pid);
                         ~psPacketLinearTracker();
          packetStats    *getStat(int intdex);

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/src/dmxPSPacket.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/src/dmxPSPacket.cpp	2010-08-06 18:09:35 UTC (rev 6503)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/src/dmxPSPacket.cpp	2010-08-06 18:09:37 UTC (rev 6504)
@@ -5,7 +5,19 @@
     email                : fixounet at free.fr
         
  ***************************************************************************/
+/**
+    Stream remapping 
 
+            00--   : AC3 audio
+            20--   : Subtitles
+            40--   : DTS
+            60--   : VOBU
+            80--   : 
+            A0--   : PCM
+            C0/E0..: Mpeg2 audio/Mpeg2 video/
+
+
+*/
 /***************************************************************************
  *                                                                         *
  *   This program is free software; you can redistribute it and/or modify  *
@@ -124,7 +136,8 @@
         // subs 20-29
         // private data 1/2
 #define INSIDE(min,max) (stream>=min && stream<max)
-        if(!(  INSIDE(0xC0,0xC9) || INSIDE(0xE0,0xE9) || INSIDE(0x20,0x29) || stream==PRIVATE_STREAM_1 || stream==PRIVATE_STREAM_2
+        if(!(  INSIDE(0xC0,0xC9) || INSIDE(0xE0,0xE9) || INSIDE(0x20,0x29) || 
+                    stream==PRIVATE_STREAM_1 || stream==PRIVATE_STREAM_2
         			)) goto _again2;
         // Ok we got a candidate
         if(!getPacketInfo(stream,&substream,&len,&pts,&dts))   
@@ -133,10 +146,14 @@
         }
         
         //printf("Main Stream :%x substream :%x\n",stream,substream);
-        if(stream==PRIVATE_STREAM_1) globstream=0xFF00+substream;
-                else                 globstream=stream;
-
-        *pid=globstream;
+        switch(stream)
+        {
+                case PRIVATE_STREAM_1: globstream=0xFF00+substream; break;
+                case PRIVATE_STREAM_2: globstream=0xF000+substream; break;
+                default:               globstream=stream;break;
+                        
+        }
+        *pid=globstream; // Keep only LSB 8 BITS
         *opts=pts;
         *odts=dts;
         *packetSize=len;
@@ -175,7 +192,13 @@
                         ||(stream==SYSTEM_START_CODE) //?
                         ) // special case, no header
                         {
+                                
                                 *olen=size;      
+                                if(PRIVATE_STREAM_2==stream)
+                                {
+                                    *substream=_file->read8i()+0x60;
+                                    (*olen)--;
+                                }
                                 return 1;
                         }
                                 
@@ -589,7 +612,11 @@
 */
  psPacketLinearTracker::psPacketLinearTracker(uint8_t pid)  : psPacketLinear(pid)
 {
-   resetStats();
+    resetStats();
+    lastVobuEnd=0;
+    nextVobuEnd=0;
+    nextVobuPosition=0;
+    lastVobuPosition=0;
 }
 /**
     \fn ~psPacketLinearTracker
@@ -608,6 +635,74 @@
     return stats+index;
 }
 /**
+    \fn decodeVobuPCI
+*/
+bool psPacketLinearTracker::decodeVobuPCI(uint32_t size,uint8_t *data)
+{
+/*
+	nv_pck_lbn 	: 32;  // block length
+	vobu_cat 	: 16;  // vobu category
+	reserved 	: 16;
+	vobu_uop_ctl 	: 32;  // user operation
+	vobu_s_ptm	: 32;  // vobu start time in 90KHz system clock unit
+	vobu_e_ptm	: 32;  // vobu end time
+	vobu_sl_e_ptm	: 32;  // sequence end termiation time
+	e_eltm		: 32;  // cell elapse time
+	vobu_isrc[32]	: 32 * 8;
+*/
+    if(size!=0x3D3)
+        {
+            ADM_warning("PCI Data not 0x3D4 but 0x%x\n",size+1);
+            return false;
+        }
+        uint8_t *ptr=data;
+        ptr+=4+2+2+4;
+#define MK32(x) {x=(ptr[0]<<24)+(ptr[1]<<16)+(ptr[2]<<8)+ptr[3];ptr+=4;}
+        uint32_t start;
+        uint32_t end;
+        uint32_t seqEnd;
+        MK32(start);
+        MK32(end);
+        MK32(seqEnd);
+//        ADM_info("Vobu start : %d end: %d seqEnd:%d\n",start,end,seqEnd);
+        lastVobuEnd=nextVobuEnd;
+        nextVobuEnd=end;
+        lastVobuPosition=nextVobuPosition;
+        _file->getpos(&nextVobuPosition);
+        _file->forward(size-5*4+2*2);
+        return true;
+}   
+/**
+    \fn decodeVobuDSI
+*/
+
+bool psPacketLinearTracker::decodeVobuDSI(uint32_t size)
+{
+
+        if(size!=0x3f9)
+        {
+            ADM_warning("DSI Data not 0x3fa but 0x%x\n",size+1);
+            return false;
+        }
+#define P32(x) printf(#x" :%d ",_file->read32i());
+#define P16(x) printf(#x" :%d ",_file->read16i());
+
+        P32(pck_scr);
+        P32(pck_lbn);
+        _file->read32i();//end add
+        _file->read32i();// ref1
+        _file->read32i();// ref2
+        _file->read32i();// ref3
+        P16(vobid);
+        _file->read8i();
+        P16(cellid);
+        _file->read8i();
+        P32(etm);
+        printf("\n");
+        return true;
+
+}
+/**
     \fn getPacketgetPacketOfType
     \brief Keep track of all the packets we have seen so far.
     Usefull to detect the streams present and to look up the PTS/DTS of audio streams for the audio part of the index
@@ -625,6 +720,12 @@
                 // Update 
                 ADM_assert(tmppid<0x100);
                 packetStats *p=stats+tmppid;
+                if(tmppid==0x60) // VOBU PCI
+                {
+                    decodeVobuPCI(*packetSize,buffer);
+                    continue;
+                }
+                
                 uint64_t ts=*pts;
                 if(ts==ADM_NO_PTS) ts=*dts;
                 if(ts!=ADM_NO_PTS)

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psIndex.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psIndex.cpp	2010-08-06 18:09:35 UTC (rev 6503)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psIndex.cpp	2010-08-06 18:09:37 UTC (rev 6504)
@@ -106,6 +106,7 @@
         DIA_workingBase  *ui;
         bool             headerDumped;
         uint64_t         lastValidVideoDts;
+        uint64_t         timeOffset; // In 90 khz Tick
        
 public:
                 PsIndexer(void);
@@ -147,7 +148,7 @@
     ui=createWorking ("Indexing");
     headerDumped=false;
     lastValidVideoDts=ADM_NO_PTS;
-    
+    timeOffset=0;
 }
 
 /**
@@ -334,14 +335,37 @@
                                                   info.startAt,info.offset);
                                   continue;
                           }
+                          //
+                          if(info.dts!=ADM_NO_PTS) info.dts+=timeOffset;
+                          if(info.pts!=ADM_NO_PTS) info.pts+=timeOffset;
                           if(lastValidVideoDts!=ADM_NO_PTS && info.dts!=ADM_NO_PTS)
                           {
+                            // Handle SCR reset, that happens a lot on DVD
                                     if(lastValidVideoDts>info.dts)
                                     {
-                                            ADM_warning("DTS are going back, aborting, maybe several video appended ?");
-                                            ADM_warning("last Valid Dts %s\n",ADM_us2plain(timeConvert(lastValidVideoDts)));
-                                            ADM_warning("current    Dts %s\n",ADM_us2plain(timeConvert(info.dts)));
-                                            goto theEnd;
+                                            ADM_warning("DTS are going back, maybe several video appended ?\n");
+                                            uint64_t newOffset=pkt->getLastVobuEndTime();
+                                            uint64_t newPosition=pkt->getLastVobuPosition();
+                                            ADM_info("Trying to correct with VOBU offset :%s\n",
+                                                            ADM_us2plain(timeConvert(newOffset)));
+
+                                            uint64_t newDts=info.dts+newOffset;
+                                            if(newDts>lastValidVideoDts)
+                                            {
+                                                  ADM_info("SCR reset, using vobu to correct. New time offset %s, position 0x%"LLX"\n",
+                                                            ADM_us2plain(timeConvert(newOffset)),newPosition);
+                                                  ADM_warning("last Valid Dts %s\n",ADM_us2plain(timeConvert(lastValidVideoDts)));
+                                                  info.dts=newDts;
+                                                  if(info.pts!=ADM_NO_PTS)
+                                                        info.pts=info.pts+newOffset;
+                                                  timeOffset+=newOffset;
+                                                  ADM_info("TimeOffset is now %s\n",ADM_us2plain(timeConvert(timeOffset)));
+                                            }else
+                                            {
+                                                ADM_warning("last Valid Dts %s\n",ADM_us2plain(timeConvert(lastValidVideoDts)));
+                                                ADM_warning("current    Dts %s\n",ADM_us2plain(timeConvert(info.dts)));
+                                                goto theEnd;
+                                            }
                                      }
                             }
                             if(info.dts!=ADM_NO_PTS)



From mean at mail.berlios.de  Sun Aug  8 10:16:23 2010
From: mean at mail.berlios.de (mean at mail.berlios.de)
Date: Sun,  8 Aug 2010 10:16:23 +0200
Subject: [Avidemux-svn-commit] r6505 -
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS
Message-ID: <20100808081623.5DECE480F13@sheep.berlios.de>

Author: mean
Date: 2010-08-08 10:16:23 +0200 (Sun, 08 Aug 2010)
New Revision: 6505

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psIndex.cpp
Log:
[psIndex] Save scr reset points in index file

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psIndex.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psIndex.cpp	2010-08-06 18:09:37 UTC (rev 6504)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psIndex.cpp	2010-08-08 08:16:23 UTC (rev 6505)
@@ -93,6 +93,15 @@
     markEnd,
     markNow
 }markType;
+/**
+    \struct scrGap
+    \brief Map gap/reset in the scr flow to put everything back to linear / monotonic
+*/
+typedef struct
+{
+    uint64_t position;
+    uint64_t timeOffset;
+}scrGap;
 
 /**
     \class PsIndexer
@@ -107,7 +116,9 @@
         bool             headerDumped;
         uint64_t         lastValidVideoDts;
         uint64_t         timeOffset; // In 90 khz Tick
-       
+        bool             handleScrReset(uint64_t dts);
+        vector <scrGap>  listOfScrReset;
+        bool             writeScrReset(void);
 public:
                 PsIndexer(void);
                 ~PsIndexer();
@@ -336,39 +347,12 @@
                                   continue;
                           }
                           //
-                          if(info.dts!=ADM_NO_PTS) info.dts+=timeOffset;
-                          if(info.pts!=ADM_NO_PTS) info.pts+=timeOffset;
                           if(lastValidVideoDts!=ADM_NO_PTS && info.dts!=ADM_NO_PTS)
                           {
-                            // Handle SCR reset, that happens a lot on DVD
-                                    if(lastValidVideoDts>info.dts)
-                                    {
-                                            ADM_warning("DTS are going back, maybe several video appended ?\n");
-                                            uint64_t newOffset=pkt->getLastVobuEndTime();
-                                            uint64_t newPosition=pkt->getLastVobuPosition();
-                                            ADM_info("Trying to correct with VOBU offset :%s\n",
-                                                            ADM_us2plain(timeConvert(newOffset)));
-
-                                            uint64_t newDts=info.dts+newOffset;
-                                            if(newDts>lastValidVideoDts)
-                                            {
-                                                  ADM_info("SCR reset, using vobu to correct. New time offset %s, position 0x%"LLX"\n",
-                                                            ADM_us2plain(timeConvert(newOffset)),newPosition);
-                                                  ADM_warning("last Valid Dts %s\n",ADM_us2plain(timeConvert(lastValidVideoDts)));
-                                                  info.dts=newDts;
-                                                  if(info.pts!=ADM_NO_PTS)
-                                                        info.pts=info.pts+newOffset;
-                                                  timeOffset+=newOffset;
-                                                  ADM_info("TimeOffset is now %s\n",ADM_us2plain(timeConvert(timeOffset)));
-                                            }else
-                                            {
-                                                ADM_warning("last Valid Dts %s\n",ADM_us2plain(timeConvert(lastValidVideoDts)));
-                                                ADM_warning("current    Dts %s\n",ADM_us2plain(timeConvert(info.dts)));
-                                                goto theEnd;
-                                            }
-                                     }
-                            }
-                            if(info.dts!=ADM_NO_PTS)
+                            if(lastValidVideoDts>(info.dts+timeOffset))
+                                if(false==handleScrReset(info.dts)) goto theEnd;
+                          }
+                          if(info.dts!=ADM_NO_PTS)
                             {
                                     lastValidVideoDts=info.dts;
                             }
@@ -396,9 +380,12 @@
         qfprintf(index,"\n# Found %"LU" images \n",data.nbPics); // Size
         qfprintf(index,"# Found %"LU" frame pictures\n",video.frameCount); // Size
         qfprintf(index,"# Found %"LU" field pictures\n",video.fieldCount); // Size
+
+       
         // Now write the header
         writeVideo(&video);
         writeAudio();
+        writeScrReset();
         qfprintf(index,"\n[End]\n");
         qfclose(index);
         index=NULL;
@@ -489,7 +476,33 @@
     qfprintf(index,"AR=%d\n",video->ar);
     return true;
 }
+
 /**
+    \fn writeScrReset
+    \brief 
+*/
+bool PsIndexer::writeScrReset(void)
+{
+ // Dump resets
+    int n=listOfScrReset.size();
+    if(!n)
+    {
+        ADM_info("No SCR reset detected\n");
+        return true;
+    }
+    qfprintf(index,"[ScrResets]\n");
+    qfprintf(index,"NbResets=%d\n",n);
+    for(int i=0;i<n;i++)
+    {
+        char head[30];
+        sprintf(head,"Reset%1d",i);
+        qfprintf(index,"#%s\n",ADM_us2plain(timeConvert(listOfScrReset[i].timeOffset)));
+        qfprintf(index,"%s.position=%"LLD"\n",head,listOfScrReset[i].position);
+        qfprintf(index,"%s.timeOffset=%"LLD"\n",head,listOfScrReset[i].timeOffset);
+    }
+    return true;
+}
+/**
     \fn writeSystem
     \brief Write system part of index file
 */
@@ -525,6 +538,38 @@
     }
     return true;
 }
+/**
+    \fn handleScrReset
+*/
+bool PsIndexer::handleScrReset(uint64_t dts)
+{
+#define PRETTY(x) ADM_us2plain(timeConvert(x))
+        ADM_warning("DTS are going back, maybe several video appended ?\n");
+        uint64_t newOffset=timeOffset+pkt->getLastVobuEndTime();
+        uint64_t newPosition=pkt->getLastVobuPosition();
+        ADM_info("Trying to correct with VOBU offset :%s\n", PRETTY(newOffset));
+
+        uint64_t newDts=dts+newOffset;
+        if(newDts>lastValidVideoDts)
+        {
+              ADM_info("SCR reset, using vobu to correct. New time offset %s, position 0x%"LLX"\n",
+                        PRETTY(newOffset),newPosition);
+              ADM_warning("last Valid Dts %s\n",PRETTY(lastValidVideoDts));
+              timeOffset=newOffset;
+              ADM_info("TimeOffset is now %s\n",PRETTY(timeOffset));
+
+              scrGap newGap;
+              newGap.position=newPosition;
+              newGap.timeOffset=newOffset;
+              listOfScrReset.push_back(newGap);
+              return true;
+        }else
+        {
+            ADM_warning("last Valid Dts %s\n",PRETTY(lastValidVideoDts));
+            ADM_warning("current    Dts %s\n",PRETTY(dts));
+            return false;
+        }
+}
 /********************************************************************************************/
 /********************************************************************************************/
 /********************************************************************************************/



From mean at mail.berlios.de  Sun Aug  8 10:16:24 2010
From: mean at mail.berlios.de (mean at mail.berlios.de)
Date: Sun,  8 Aug 2010 10:16:24 +0200
Subject: [Avidemux-svn-commit] r6506 - in branches/avidemux_2.6_branch_mean:
	avidemux_core/ADM_coreDemuxerMpeg/include
	avidemux_core/ADM_coreDemuxerMpeg/src
	avidemux_plugins/ADM_demuxers/MpegPS
Message-ID: <20100808081625.0EC9C480F13@sheep.berlios.de>

Author: mean
Date: 2010-08-08 10:16:24 +0200 (Sun, 08 Aug 2010)
New Revision: 6506

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/include/ADM_indexFile.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/src/ADM_indexFile.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_ps.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_ps.h
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psReadIndex.cpp
Log:
[PsDemux] Read ScrReset from index file and update images Pts/Dts with it. Audio still not ok

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/include/ADM_indexFile.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/include/ADM_indexFile.h	2010-08-08 08:16:23 UTC (rev 6505)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/include/ADM_indexFile.h	2010-08-08 08:16:24 UTC (rev 6506)
@@ -42,6 +42,7 @@
     char *getValue(void);
     bool  isNumeric(void);
     uint32_t getAsNumber(void);
+    uint64_t getAsNumber64(void);
 };
 
 /**
@@ -65,6 +66,7 @@
     bool close(void);
     bool goToSection(const char *section);
     bool readSection(const char *section);
+    uint64_t getAsUint64(const char *token);
     uint32_t getAsUint32(const char *token);
     uint32_t getAsHex(const char *token);
     char *getAsString(const char *token);

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/src/ADM_indexFile.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/src/ADM_indexFile.cpp	2010-08-08 08:16:23 UTC (rev 6505)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/src/ADM_indexFile.cpp	2010-08-08 08:16:24 UTC (rev 6506)
@@ -59,7 +59,16 @@
     v=atoi(value);
     return v;
 }
+/**
 
+*/
+uint64_t dmxToken::getAsNumber64(void)
+{
+uint64_t v;
+    sscanf(value,"%"LLD,&v);
+    return v;
+}
+
 //****************************************************************************************
 
 /**
@@ -100,6 +109,8 @@
         if(!strcasecmp(name,tk->getName())) return tk;
     }
     printf("[indexFile] Token %s not found\n",name);
+    for(int i=0;i<ListOfTokens.size();i++)
+        printf("  [%d]%s\n",i,ListOfTokens[i]->getName());
     return NULL;
 }
 /**
@@ -169,8 +180,14 @@
         tail=strstr((char *)buffer,"=");
         if(!tail) 
         {
-            printf("[psIndexer]Weird line :%s\n",buffer);
-            break;
+            if(buffer[0]=='#') // Comment
+            {
+
+            }else   
+            {
+                printf("[psIndexer]Weird line :%s\n",buffer);
+                break;
+            }
         }else
         {
             *tail=0;
@@ -194,7 +211,17 @@
     printf("[psIndex] token %s is not a digit : %s\n",name,token->getValue());
     return 0;
 }
+/**
 
+*/
+uint64_t indexFile::getAsUint64(const char *name)
+{
+    dmxToken *token=searchToken(name);
+    if(!token) return 0;
+    if(token->isNumeric()) return token->getAsNumber64();
+    printf("[psIndex] token %s is not a digit : %s\n",name,token->getValue());
+    return 0;
+}
 /** 
     \fn getAsHex
     \read entry as hex

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_ps.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_ps.cpp	2010-08-08 08:16:23 UTC (rev 6505)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_ps.cpp	2010-08-08 08:16:24 UTC (rev 6506)
@@ -88,6 +88,30 @@
         printf("[psDemux] Cannot read index for file %s\n",idxName);
         goto abt;
     }
+    if(readScrReset(&index))
+    {
+        ADM_info("Adjusting timestamps\n");
+        // Update PTS/DTS of video taking SCR Resets into account
+        int nbPoints=listOfScrGap.size();
+        int index=0;
+        uint64_t pivot=listOfScrGap[0].position;
+        uint64_t timeOffset=0;
+        uint32_t nbImage=ListOfFrames.size();
+        for(int i=0;i<nbImage;i++)
+        {
+            dmxFrame *frame=ListOfFrames[i];
+            if(frame->startAt>pivot) // next gap
+            {
+                    timeOffset=listOfScrGap[index].timeOffset;
+                    index++;
+                    if(index>=nbPoints) pivot=0xfffffffffffffffLL;
+                        else pivot=listOfScrGap[index].position;
+            }
+            if(frame->dts!=ADM_NO_PTS) frame->dts+=timeOffset;
+            if(frame->pts!=ADM_NO_PTS) frame->pts+=timeOffset;
+        }
+        ADM_info("Adjusted %d scr reset out of %d\n",(int)index,(int)nbPoints);
+    }
     updatePtsDts();
     _videostream.dwLength= _mainaviheader.dwTotalFrames=ListOfFrames.size();
     printf("[psDemux] Found %d video frames\n",_videostream.dwLength);

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_ps.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_ps.h	2010-08-08 08:16:23 UTC (rev 6505)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_ps.h	2010-08-08 08:16:24 UTC (rev 6506)
@@ -91,6 +91,15 @@
 
 
 };
+/**
+    \struct scrGap
+    \brief Map gap/reset in the scr flow to put everything back to linear / monotonic
+*/
+typedef struct
+{
+    uint64_t position;
+    uint64_t timeOffset;
+}scrGap;
 
 /**
     \Class psHeader
@@ -105,6 +114,7 @@
     bool    readVideo(indexFile *index);
     bool    readAudio(indexFile *index,const char *name);
     bool    readIndex(indexFile *index);
+    bool    readScrReset(indexFile *index);
 
     bool    processVideoIndex(char *buffer);
     bool    processAudioIndex(char *buffer);
@@ -116,6 +126,7 @@
     uint64_t        timeConvert(uint64_t x);
     bool            updatePtsDts(void);
 protected:
+    vector <scrGap> listOfScrGap;
     vector <ADM_psTrackDescriptor *>listOfAudioTracks;
   public:
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psReadIndex.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psReadIndex.cpp	2010-08-08 08:16:23 UTC (rev 6505)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psReadIndex.cpp	2010-08-08 08:16:24 UTC (rev 6506)
@@ -245,4 +245,43 @@
     }
     return true;
 }
+
+/**
+    \fn readScrReset
+*/
+bool    psHeader::readScrReset(indexFile *index)
+{
+    ADM_info("[psDemuxer] Reading ScrResets\n");
+    if(!index->readSection("ScrResets"))
+    {
+        ADM_info("No ScrResets\n");
+        return false;
+    }
+    uint32_t nbTracks=0;
+    
+    nbTracks=index->getAsUint32("NbResets");
+    if(!nbTracks)
+    {
+        printf("[PsDemux] No ScrResets\n");
+        return false;
+    }
+    ADM_info("Found %d scrResets\n",(int)nbTracks);
+    for(int i=0;i<nbTracks;i++)
+    {
+        char header[40];
+        char body[40];
+        sprintf(header,"Reset%d.",i);
+        uint64_t position,timeOffset;
+#define readInt64(x,y) {sprintf(body,"%s"#y,header);x=index->getAsUint64(body);printf("->%02d:"#y"=%"LLU"\n",i,x);}
+        
+        readInt64(position,position);
+        readInt64(timeOffset,timeOffset);
+        scrGap gap;
+        gap.position=position;
+        gap.timeOffset=timeOffset;
+        listOfScrGap.push_back(gap);
+    }
+  
+    return true;
+}
 //EOF
\ No newline at end of file



From mean at mail.berlios.de  Sun Aug  8 10:16:26 2010
From: mean at mail.berlios.de (mean at mail.berlios.de)
Date: Sun,  8 Aug 2010 10:16:26 +0200
Subject: [Avidemux-svn-commit] r6507 -
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS
Message-ID: <20100808081626.43136480F13@sheep.berlios.de>

Author: mean
Date: 2010-08-08 10:16:26 +0200 (Sun, 08 Aug 2010)
New Revision: 6507

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_ps.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_ps.h
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psAudio.cpp
Log:
[Ps/Demux] Handle scr reset for audio, we have still a gop off

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_ps.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_ps.cpp	2010-08-08 08:16:24 UTC (rev 6506)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_ps.cpp	2010-08-08 08:16:26 UTC (rev 6507)
@@ -111,6 +111,9 @@
             if(frame->pts!=ADM_NO_PTS) frame->pts+=timeOffset;
         }
         ADM_info("Adjusted %d scr reset out of %d\n",(int)index,(int)nbPoints);
+        ADM_info("Updating audio with list of SCR\n");
+        for(int i=0;i<listOfAudioTracks.size();i++)
+                  listOfAudioTracks[i]->access->setScrGapList(&listOfScrGap) ;
     }
     updatePtsDts();
     _videostream.dwLength= _mainaviheader.dwTotalFrames=ListOfFrames.size();

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_ps.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_ps.h	2010-08-08 08:16:24 UTC (rev 6506)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_ps.h	2010-08-08 08:16:26 UTC (rev 6507)
@@ -30,6 +30,17 @@
 using std::vector;
 
 /**
+    \struct scrGap
+    \brief Map gap/reset in the scr flow to put everything back to linear / monotonic
+*/
+typedef struct
+{
+    uint64_t position;
+    uint64_t timeOffset;
+}scrGap;
+typedef vector <scrGap> ListOfScr;
+
+/**
     \fn ADM_psAccess
 */
 class ADM_psAccess : public ADM_audioAccess
@@ -39,6 +50,7 @@
                 psPacket        demuxer;
                 uint8_t         pid;
                 uint64_t        dtsOffset;
+                const  ListOfScr *listOfScr;
                 
 public:
                 bool            setTimeOffset(uint64_t of) {dtsOffset=of;return true;}
@@ -63,9 +75,13 @@
                         bool      push(uint64_t at, uint64_t dts,uint32_t size);
                                     /// Convert raw timestamp to scaled timestamp in us
                 uint64_t          timeConvert(uint64_t x);
+                                    /// Convert raw timestamp to unscaled timestamp in us
+                uint64_t          timeConvertRaw(uint64_t x);
 
                 virtual uint32_t  getLength(void);
 
+                bool    setScrGapList(const ListOfScr *list) ;/// Give audio a list of scr reset
+
 };
 /**
     \class ADM_psTrackDescriptor
@@ -92,17 +108,7 @@
 
 };
 /**
-    \struct scrGap
-    \brief Map gap/reset in the scr flow to put everything back to linear / monotonic
-*/
-typedef struct
-{
-    uint64_t position;
-    uint64_t timeOffset;
-}scrGap;
-
-/**
-    \Class psHeader
+    \class psHeader
     \brief mpeg ps demuxer
 
 */
@@ -126,7 +132,7 @@
     uint64_t        timeConvert(uint64_t x);
     bool            updatePtsDts(void);
 protected:
-    vector <scrGap> listOfScrGap;
+    ListOfScr                       listOfScrGap;
     vector <ADM_psTrackDescriptor *>listOfAudioTracks;
   public:
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psAudio.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psAudio.cpp	2010-08-08 08:16:24 UTC (rev 6506)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psAudio.cpp	2010-08-08 08:16:26 UTC (rev 6507)
@@ -21,7 +21,7 @@
 #include <math.h>
 
 #include "ADM_ps.h"
-
+#include "ADM_vidMisc.h"
 #if 0
     #define aprintf printf
 #else
@@ -37,6 +37,7 @@
         if(append) fp=FP_APPEND;
         this->pid=pid;
         if(!demuxer.open(name,fp)) ADM_assert(0);
+        listOfScr=NULL;
 }
 
 /**
@@ -118,6 +119,19 @@
 
 }
 /**
+    \fn timeConvertRaw
+    \brief Convert time in ticks raw from the stream (90 kHz tick) to avidemux time (us)
+*/
+uint64_t ADM_psAccess::timeConvertRaw(uint64_t x)
+{
+    if(x==ADM_NO_PTS) return ADM_NO_PTS;
+    x=x*1000;
+    x/=90;
+    return x;
+
+}
+
+/**
     \fn getPacket
 */
 bool      ADM_psAccess::getPacket(uint8_t *buffer, uint32_t *size, uint32_t maxSize,uint64_t *dts)
@@ -126,6 +140,24 @@
     if(false==demuxer.getPacketOfType(pid,maxSize,size,&p,&d,buffer,&start)) return false;
     if(d==ADM_NO_PTS) *dts=p;
             else *dts=d;
+
+    // Update dts if needed due to scr reset
+    if(listOfScr && *dts!=ADM_NO_PTS)
+    {
+        uint64_t timeOffset=0;
+        for(int i=0;i<listOfScr->size();i++)
+        {
+            if(start>(*listOfScr)[i].position) 
+            {
+                
+                timeOffset=(*listOfScr)[i].timeOffset;
+               // printf("New timeOffset :%d %d ms\n",i,(int)(timeOffset/1000));
+                
+            }
+        }
+        *dts+=timeOffset;
+    }
+
     *dts=timeConvert(*dts);
     if(*dts!=ADM_NO_PTS) 
     {
@@ -134,6 +166,41 @@
 
     return true;
 }
-
-
+/**
+    \fn setScrGapList
+*/
+bool    ADM_psAccess::setScrGapList(const ListOfScr *list) 
+{
+        ADM_assert(list);
+        listOfScr=list;
+        //Update seek points
+        int n=seekPoints.size();
+        uint64_t pivot=(*list)[0].position;
+        uint64_t timeOffset=0;
+        int index=0;
+        for(int i=0;i<n;i++)
+        {
+            ADM_mpgAudioSeekPoint *point=&(seekPoints[i]);
+           
+            if(point->dts!=ADM_NO_PTS) 
+            {
+                point->dts+=timeOffset;
+#if 0
+                printf("%d:%d Offset : %s ",i,n,ADM_us2plain(timeConvertRaw(timeOffset)));
+                printf(" dts : %s\n",ADM_us2plain(timeConvertRaw(point->dts)));
+#endif
+            }
+            // since audio seek point are done at the END, 
+            // we will increase timeOffset for the next
+#warning fixme  do something smarter
+            if(point->position>pivot)
+            {
+                timeOffset=((*list)[index].timeOffset);
+                index++;
+                if(index>(*list).size()) pivot=0x8000000000000LL;
+                        else pivot=(*list)[index].position;
+            }
+        }
+        return true;
+}
 //EOF



From mean at mail.berlios.de  Sun Aug  8 10:16:27 2010
From: mean at mail.berlios.de (mean at mail.berlios.de)
Date: Sun,  8 Aug 2010 10:16:27 +0200
Subject: [Avidemux-svn-commit] r6508 - in branches/avidemux_2.6_branch_mean:
	avidemux_core/ADM_coreDemuxerMpeg/include
	avidemux_core/ADM_coreDemuxerMpeg/src
	avidemux_plugins/ADM_demuxers/MpegPS
Message-ID: <20100808081627.9A511480F13@sheep.berlios.de>

Author: mean
Date: 2010-08-08 10:16:27 +0200 (Sun, 08 Aug 2010)
New Revision: 6508

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/include/dmxPSPacket.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/src/dmxPSPacket.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psIndex.cpp
Log:
[PS] about correct time correction when Scr Reset happens

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/include/dmxPSPacket.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/include/dmxPSPacket.h	2010-08-08 08:16:26 UTC (rev 6507)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/include/dmxPSPacket.h	2010-08-08 08:16:27 UTC (rev 6508)
@@ -150,6 +150,7 @@
 public:
         uint64_t        getLastVobuEndTime(void) {return lastVobuEnd;}
         uint64_t        getLastVobuPosition(void) {return lastVobuPosition;}
+        uint64_t        getNextVobuPosition(void) {return nextVobuPosition;}
                         psPacketLinearTracker(uint8_t pid);
                         ~psPacketLinearTracker();
          packetStats    *getStat(int intdex);

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/src/dmxPSPacket.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/src/dmxPSPacket.cpp	2010-08-08 08:16:26 UTC (rev 6507)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/src/dmxPSPacket.cpp	2010-08-08 08:16:27 UTC (rev 6508)
@@ -664,11 +664,17 @@
         MK32(start);
         MK32(end);
         MK32(seqEnd);
-//        ADM_info("Vobu start : %d end: %d seqEnd:%d\n",start,end,seqEnd);
+        
+        lastVobuPosition=nextVobuPosition;
         lastVobuEnd=nextVobuEnd;
+
         nextVobuEnd=end;
-        lastVobuPosition=nextVobuPosition;
         _file->getpos(&nextVobuPosition);
+#if 0
+        ADM_info("At : 0x%"LLX", Vobu start : %d end: %d seqEnd:%d\n",nextVobuPosition,start,end,seqEnd);
+      
+#endif
+
         _file->forward(size-5*4+2*2);
         return true;
 }   

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psIndex.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psIndex.cpp	2010-08-08 08:16:26 UTC (rev 6507)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psIndex.cpp	2010-08-08 08:16:27 UTC (rev 6508)
@@ -347,6 +347,8 @@
                                   continue;
                           }
                           //
+                         //   printf("Found pic of type %d at 0x%"LLX" dts=%s\n",type,info.startAt,ADM_us2plain(info.dts));
+                          //
                           if(lastValidVideoDts!=ADM_NO_PTS && info.dts!=ADM_NO_PTS)
                           {
                             if(lastValidVideoDts>(info.dts+timeOffset))
@@ -546,7 +548,7 @@
 #define PRETTY(x) ADM_us2plain(timeConvert(x))
         ADM_warning("DTS are going back, maybe several video appended ?\n");
         uint64_t newOffset=timeOffset+pkt->getLastVobuEndTime();
-        uint64_t newPosition=pkt->getLastVobuPosition();
+        uint64_t newPosition=pkt->getNextVobuPosition();
         ADM_info("Trying to correct with VOBU offset :%s\n", PRETTY(newOffset));
 
         uint64_t newDts=dts+newOffset;



From mean at mail.berlios.de  Sun Aug  8 11:20:47 2010
From: mean at mail.berlios.de (mean at mail.berlios.de)
Date: Sun,  8 Aug 2010 11:20:47 +0200
Subject: [Avidemux-svn-commit] r6509 -
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS
Message-ID: <20100808092047.44663480F13@sheep.berlios.de>

Author: mean
Date: 2010-08-08 11:20:47 +0200 (Sun, 08 Aug 2010)
New Revision: 6509

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psIndex.cpp
Log:
[PsDemux] Scr reset, much better handling of multiple resets

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psIndex.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psIndex.cpp	2010-08-08 08:16:27 UTC (rev 6508)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psIndex.cpp	2010-08-08 09:20:47 UTC (rev 6509)
@@ -347,11 +347,11 @@
                                   continue;
                           }
                           //
-                         //   printf("Found pic of type %d at 0x%"LLX" dts=%s\n",type,info.startAt,ADM_us2plain(info.dts));
+                          //  printf("Found pic of type %d at 0x%"LLX" dts=%s\n",type,info.startAt,ADM_us2plain(timeConvert(info.dts)));
                           //
                           if(lastValidVideoDts!=ADM_NO_PTS && info.dts!=ADM_NO_PTS)
                           {
-                            if(lastValidVideoDts>(info.dts+timeOffset))
+                            if(lastValidVideoDts>(info.dts))
                                 if(false==handleScrReset(info.dts)) goto theEnd;
                           }
                           if(info.dts!=ADM_NO_PTS)
@@ -552,7 +552,7 @@
         ADM_info("Trying to correct with VOBU offset :%s\n", PRETTY(newOffset));
 
         uint64_t newDts=dts+newOffset;
-        if(newDts>lastValidVideoDts)
+        if(newDts>lastValidVideoDts+timeOffset)
         {
               ADM_info("SCR reset, using vobu to correct. New time offset %s, position 0x%"LLX"\n",
                         PRETTY(newOffset),newPosition);



From mean at mail.berlios.de  Sun Aug  8 20:08:38 2010
From: mean at mail.berlios.de (mean at mail.berlios.de)
Date: Sun,  8 Aug 2010 20:08:38 +0200
Subject: [Avidemux-svn-commit] r6510 - in branches/avidemux_2.6_branch_mean:
	avidemux_core/ADM_coreDemuxerMpeg/include
	avidemux_plugins/ADM_demuxers/MpegPS
Message-ID: <20100808180838.B70F6480964@sheep.berlios.de>

Author: mean
Date: 2010-08-08 20:08:38 +0200 (Sun, 08 Aug 2010)
New Revision: 6510

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/include/ADM_indexFile.h
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psIndex.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psReadIndex.cpp
Log:
[PS/Demux] Also store PTS/DTS for each frame in index file like for TS/Demux. It is not very useful as that information is often not present

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/include/ADM_indexFile.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/include/ADM_indexFile.h	2010-08-08 09:20:47 UTC (rev 6509)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/include/ADM_indexFile.h	2010-08-08 18:08:38 UTC (rev 6510)
@@ -22,7 +22,7 @@
     \class indexFile
     \brief Read a index file easily
 */
-#define ADM_INDEX_FILE_VERSION 2
+#define ADM_INDEX_FILE_VERSION 3
 #define ADM_INDEX_BUFFER (20*1024)
 /**
     \class dmxToken

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psIndex.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psIndex.cpp	2010-08-08 09:20:47 UTC (rev 6509)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psIndex.cpp	2010-08-08 18:08:38 UTC (rev 6510)
@@ -85,6 +85,7 @@
     indexerState    state;
     psPacketLinear *pkt;
     int32_t         nextOffset;
+    uint64_t        gopStartDts;
 }indexerData;
 
 typedef enum
@@ -347,7 +348,9 @@
                                   continue;
                           }
                           //
-                          //  printf("Found pic of type %d at 0x%"LLX" dts=%s\n",type,info.startAt,ADM_us2plain(timeConvert(info.dts)));
+#if 0
+                            printf("Found pic of type %d at 0x%"LLX" dts=%s pts=%s\n",type,info.startAt,ADM_us2plain(timeConvert(info.dts)),ADM_us2plain(timeConvert(info.pts)));
+#endif
                           //
                           if(lastValidVideoDts!=ADM_NO_PTS && info.dts!=ADM_NO_PTS)
                           {
@@ -443,10 +446,19 @@
             }
             // start a new line
             qfprintf(index,"\nVideo at:%08"LLX":%04"LX" Pts:%08"LLD":%08"LLD" ",data->startAt,data->offset,info->pts,info->dts);
+            data->gopStartDts=info->dts;
             data->nextOffset=-2;
         }
-    
-        qfprintf(index,"%c%c",Type[data->frameType],Structure[data->picStructure&3]);
+        int64_t deltaDts,deltaPts;
+#if 0
+        printf("Dts%"LLD",PTS:%"LLD"\n",info->dts, info->pts);
+#endif
+        if(info->dts==-1 || data->gopStartDts==-1) deltaDts=-1;
+                else deltaDts=(int64_t)info->dts-(int64_t)data->gopStartDts;
+        if(info->pts==-1 || data->gopStartDts==-1) deltaPts=-1;
+                else deltaPts=(int64_t)info->pts-(int64_t)data->gopStartDts;
+        qfprintf(index,"%c%c:%"LLD":%"LLD,Type[data->frameType],Structure[data->picStructure&3],
+                    deltaPts,deltaDts);
     }
     if(update==markEnd || update==markNow)
     {

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psReadIndex.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psReadIndex.cpp	2010-08-08 09:20:47 UTC (rev 6509)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psReadIndex.cpp	2010-08-08 18:08:38 UTC (rev 6510)
@@ -19,7 +19,8 @@
 #include "DIA_coreToolkit.h"
 #include "ADM_indexFile.h"
 #include "ADM_ps.h"
-
+#include "ADM_cpp.h"
+#include "ADM_string.h"
 #include <math.h>
 /**
         \fn readIndex
@@ -106,6 +107,7 @@
             if(!start) return true;
             start+=1;
             int count=0;
+            int64_t gopDts=-1;
             while(1)
             {
                 char *cur=start;
@@ -113,6 +115,7 @@
                 char picStruct='F';
                 char *next;
                 uint32_t len;
+                int64_t framePts,frameDts;
                 type=*cur;
                 if(type==0x0a || type==0x0d || !type) break;
                 cur++;
@@ -125,22 +128,32 @@
                 }
                 cur++;
                 next=strstr(start," ");
-                ADM_assert(1==sscanf(cur,"%"LX,&len));
+                *next=0;
+                {
+                    string me=string(cur); // pts:dts:length (dec/dec/hex)
+                    vector <string> result;
+                    ADM_splitString(":",me,result);
+                    
+                    ADM_assert(1==sscanf(result[2].c_str(),"%"LX,&len));
+                    ADM_assert(1==sscanf(result[0].c_str(),"%"LLD,&framePts));
+                    ADM_assert(1==sscanf(result[1].c_str(),"%"LLD,&frameDts));
+                }
                 
-                
                 dmxFrame *frame=new dmxFrame;
-                if(!count)
+                if(!count) // First item.. PTS & DTS are provided as header
                 {
                     frame->pts=pts;
                     frame->dts=dts;
-
+                    gopDts=frame->dts;
                     frame->startAt=startAt;
                     frame->index=offset;
 
                 }else       
                 {
-                    frame->pts=ADM_NO_PTS;
-                    frame->dts=ADM_NO_PTS;
+                    if(gopDts!=ADM_NO_PTS && frameDts!=ADM_NO_PTS) frame->dts=frameDts+gopDts;
+                            else frame->dts=ADM_NO_PTS;
+                    if(gopDts!=ADM_NO_PTS && framePts!=ADM_NO_PTS) frame->pts=framePts+gopDts;
+                            else frame->pts=ADM_NO_PTS;
                     frame->startAt=0;
                     frame->index=0;
                 }



From mean at mail.berlios.de  Mon Aug  9 06:53:13 2010
From: mean at mail.berlios.de (mean at mail.berlios.de)
Date: Mon,  9 Aug 2010 06:53:13 +0200
Subject: [Avidemux-svn-commit] r6511 -
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS
Message-ID: <20100809045313.CB1EA4802F3@sheep.berlios.de>

Author: mean
Date: 2010-08-09 06:53:13 +0200 (Mon, 09 Aug 2010)
New Revision: 6511

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psReadIndex.cpp
Log:
[Ps/Demux] win32 fix

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psReadIndex.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psReadIndex.cpp	2010-08-08 18:08:38 UTC (rev 6510)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psReadIndex.cpp	2010-08-09 04:53:13 UTC (rev 6511)
@@ -13,13 +13,12 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-
+#include "ADM_cpp.h"
 #include "ADM_default.h"
 #include "fourcc.h"
 #include "DIA_coreToolkit.h"
 #include "ADM_indexFile.h"
 #include "ADM_ps.h"
-#include "ADM_cpp.h"
 #include "ADM_string.h"
 #include <math.h>
 /**



From mean at mail.berlios.de  Mon Aug  9 07:53:21 2010
From: mean at mail.berlios.de (mean at mail.berlios.de)
Date: Mon,  9 Aug 2010 07:53:21 +0200
Subject: [Avidemux-svn-commit] r6512 - in branches/avidemux_2.6_branch_mean:
	avidemux/common/ADM_editor avidemux_plugins/ADM_demuxers/MpegPS
Message-ID: <20100809055321.EBDD94802F3@sheep.berlios.de>

Author: mean
Date: 2010-08-09 07:53:21 +0200 (Mon, 09 Aug 2010)
New Revision: 6512

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edPtsDts.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psComputeTimeStamp.cpp
Log:
[Editor] Try to detect & fix PTS/DTS of 24 fps video inside 30 fps video (Mpeg2 pulldown)

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edPtsDts.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edPtsDts.cpp	2010-08-09 04:53:13 UTC (rev 6511)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edPtsDts.cpp	2010-08-09 05:53:21 UTC (rev 6512)
@@ -303,6 +303,45 @@
     ADM_info("Computing missing DTS\n");
 
     int updated=0;
+    // Special case, for 24/1001 video try to detect them
+    // And alter timeIncrement accordingly
+    int backIndex=-1;
+    uint64_t backDts=ADM_NO_PTS;
+    uint64_t increment24fps=41708;
+    int nbFixup=0;
+    if(timeIncrementUs>33300 && timeIncrementUs<33400) // 29.997 fps
+    {
+        for(int i=0;i<nbFrames;i++)
+        {
+            hdr->getPtsDts(i,&pts,&dts);
+            if(dts!=ADM_NO_PTS)
+            {
+                if(backIndex!=-1)
+                {
+                    double deltaFrame=i-backIndex;
+                    if(deltaFrame>1)
+                    {
+                        double deltaTime=dts-backDts;
+                        deltaTime=deltaTime/(deltaFrame);
+                        if(deltaTime>41700 & deltaTime<41800)
+                        {
+                            for(int j=backIndex+1;j<i;j++)
+                            {
+                                hdr->setPtsDts(j,ADM_NO_PTS,backDts+(j-backIndex)*increment24fps);
+                            }
+                            nbFixup+=i-backIndex; 
+                        }
+                    }
+                }
+                backIndex=i;
+                backDts=dts;
+            }
+        }
+        ADM_info("Fixed %d/%d frames as 24 fps\n",nbFixup,nbFrames);
+    }
+
+
+    // Fill-in the gaps
     for(int i=0;i<nbFrames;i++)
     {
         hdr->getPtsDts(i,&pts,&dts);

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psComputeTimeStamp.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psComputeTimeStamp.cpp	2010-08-09 04:53:13 UTC (rev 6511)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psComputeTimeStamp.cpp	2010-08-09 05:53:21 UTC (rev 6512)
@@ -177,6 +177,14 @@
         // for video
         // We are sure to have both PTS & DTS for 1st image
         // Guess missing DTS/PTS for video
+#if 1
+        for(int i=0;i<ListOfFrames.size();i++)
+        {
+            dmxFrame *frame=ListOfFrames[i];
+            if(frame->dts!=ADM_NO_PTS) frame->dts=timeConvert(frame->dts);
+            if(frame->pts!=ADM_NO_PTS) frame->pts=timeConvert(frame->pts);
+        }
+#else
         int noUpdate=0;
         for(int i=0;i<ListOfFrames.size();i++)
         {
@@ -215,6 +223,7 @@
                 frame->pts=lastPts=timeConvert(frame->pts);
             }
         }
+#endif
         // convert to us for Audio tracks (seek points)
         for(int i=0;i<listOfAudioTracks.size();i++)
         {



From mean at mail.berlios.de  Wed Aug 11 07:41:55 2010
From: mean at mail.berlios.de (mean at mail.berlios.de)
Date: Wed, 11 Aug 2010 07:41:55 +0200
Subject: [Avidemux-svn-commit] r6513 -
	branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src
Message-ID: <20100811054155.26961480E8C@sheep.berlios.de>

Author: mean
Date: 2010-08-11 07:41:54 +0200 (Wed, 11 Aug 2010)
New Revision: 6513

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/avidemutils.cpp
Log:
[core] Use double for increment<->fps to avoid rounding issue

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/avidemutils.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/avidemutils.cpp	2010-08-09 05:53:21 UTC (rev 6512)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/avidemutils.cpp	2010-08-11 05:41:54 UTC (rev 6513)
@@ -28,6 +28,7 @@
 #include "ADM_coreUtils.h"
 
 #define QT_TR_NOOP(x) x
+
 uint8_t  mk_hex(uint8_t a, uint8_t b);
 char    *ADM_escape(const ADM_filename *incoming);
 bool     ADM_findMpegStartCode(uint8_t *start, uint8_t *end,uint8_t *outstartcode,uint32_t *offset);
@@ -274,7 +275,7 @@
 }
 uint32_t ADM_UsecFromFps1000(uint32_t fps1000)
 {
-float f;
+double f;
       if(fps1000>250000) fps1000=25000; // safe default;
       if(!fps1000) fps1000=25000; // safe default;
 
@@ -292,7 +293,7 @@
 uint32_t ADM_Fps1000FromUs(uint64_t us)
 {
     if(us<1000) return 1000;
-    float f;
+    double f;
     f=us;
     f=1000000./f;
     f*=1000;



From mean at mail.berlios.de  Wed Aug 11 07:41:56 2010
From: mean at mail.berlios.de (mean at mail.berlios.de)
Date: Wed, 11 Aug 2010 07:41:56 +0200
Subject: [Avidemux-svn-commit] r6514 -
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resampleFps
Message-ID: <20100811054156.4F266480E8C@sheep.berlios.de>

Author: mean
Date: 2010-08-11 07:41:56 +0200 (Wed, 11 Aug 2010)
New Revision: 6514

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resampleFps/ADM_vidResampleFPS.cpp
Log:
[VideoFilter:ResampleFps] Preliminary resample fps filter

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resampleFps/ADM_vidResampleFPS.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resampleFps/ADM_vidResampleFPS.cpp	2010-08-11 05:41:54 UTC (rev 6513)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resampleFps/ADM_vidResampleFPS.cpp	2010-08-11 05:41:56 UTC (rev 6514)
@@ -23,6 +23,12 @@
 
 #include "confResampleFps.h"
 #include "confResampleFps_desc.cpp"
+
+#if 1
+    #define aprintf(...) {}
+#else
+    #define aprintf ADM_info
+#endif
 /**
     \class resampleFps
 
@@ -32,10 +38,14 @@
 protected:
         confResampleFps     configuration;
         bool                updateIncrement(void);
+        uint64_t            baseTime;
+        ADMImage            *frames[2];
+        bool                refill(void);
+        bool                prefill;
 public:
                             resampleFps(ADM_coreVideoFilter *previous,CONFcouple *conf);
                             ~resampleFps();
-
+        bool                goToTime(uint64_t usSeek);
         virtual const char   *getConfiguration(void);                   /// Return  current configuration as a human readable string
         virtual bool         getNextFrame(uint32_t *fn,ADMImage *image);    /// Return the next image
         virtual bool         getCoupledConf(CONFcouple **couples) ;   /// Return the current filter configuration
@@ -68,6 +78,7 @@
     {
         f*=1000;
       configuration.newFps=(uint32_t)floor(f+0.4);
+      prefill=0;
       updateIncrement();
       return 1;
     }
@@ -79,7 +90,9 @@
 */
 bool resampleFps::updateIncrement(void)
 {
-
+    info.frameIncrement=ADM_UsecFromFps1000(configuration.newFps);
+  
+    return true;
 }
 /**
     \fn getConfiguration
@@ -95,12 +108,16 @@
 */
 resampleFps::resampleFps(  ADM_coreVideoFilter *previous,CONFcouple *setup) : ADM_coreVideoFilter(previous,setup)
 {
+    baseTime=0;
+    prefill=false;
+    frames[0]=frames[1]=NULL;
     if(!setup || !ADM_paramLoad(setup,confResampleFps_param,&configuration))
     {
         // Default value
-#warning todo get fps from increment
-        configuration.newFps=25000;
+        configuration.newFps=ADM_Fps1000FromUs(previous->getInfo()->frameIncrement);
     }
+    if(!frames[0]) frames[0]=new ADMImageDefault(info.width,info.height);
+    if(!frames[1]) frames[1]=new ADMImageDefault(info.width,info.height);
     updateIncrement();
 }
 /**
@@ -109,9 +126,33 @@
 */
 resampleFps::~resampleFps()
 {
-  
+    if(frames[0]) delete frames[0];
+    if(frames[1]) delete frames[1];
+    frames[0]=frames[1]=NULL;
 }
 /**
+     \fn refill
+*/
+bool resampleFps::refill(void)
+{
+    ADMImage *nw=frames[0];
+    uint32_t img=0;
+    frames[0]=frames[1];
+    frames[1]=nw;
+    return previousFilter->getNextFrame(&img,nw);
+}
+/**
+    \fn goToTime
+    \brief called when seeking. Need to cleanup our stuff.
+*/
+bool         resampleFps::goToTime(uint64_t usSeek)
+{
+    if(false==ADM_coreVideoFilter::goToTime(usSeek)) return false;
+    prefill=false;
+    return true;
+}
+
+/**
     \fn getCoupledConf
 */ 
 bool         resampleFps::getCoupledConf(CONFcouple **couples)
@@ -123,7 +164,47 @@
 */
  bool         resampleFps::getNextFrame(uint32_t *fn,ADMImage *image)
 {
-    return false;
+
+    if(!prefill)
+    {
+          if(false==refill()) return false;
+          if(false==refill()) return false;
+          prefill=1;
+    }
+
+    uint64_t thisTime=baseTime+(nextFrame*info.frameIncrement);
+
+again:
+    
+    uint64_t frame1Dts=frames[0]->Pts;
+    uint64_t frame2Dts=frames[1]->Pts;
+    aprintf("Frame : %d, timeIncrement %d ms, Wanted : %"LLU", available %"LLU" and %"LLU"\n",
+                    nextFrame,info.frameIncrement/1000,thisTime,frame1Dts,frame2Dts);
+    if(thisTime>frame1Dts && thisTime>frame2Dts)
+    {
+        if(false==refill()) return false;
+        goto again;
+    }
+    if(thisTime<frame1Dts && thisTime<frame2Dts)
+    {
+        image->duplicate(frames[0]);
+        image->Pts=thisTime;
+        *fn=nextFrame++;
+        return true;
+    }
+    // In between, take closer
+    double diff1=(double)thisTime-double(frame1Dts);
+    double diff2=(double)thisTime-double(frame2Dts);
+    if(diff1<0) diff1=-diff1;
+    if(diff2<0) diff2=-diff2;
+    int index=1;
+    if(diff1<diff2) index=0;
+
+    image->duplicate(frames[index]);
+    image->Pts=thisTime;
+    *fn=nextFrame++;
+    return true;
+}
 #if 0
   ADMImage *mysrc1=NULL;
   ADMImage *mysrc2=NULL;
@@ -235,7 +316,8 @@
       vidCache->unlockAll();
     }
   return 1;
+}
 #endif 
-}
 
+
 //EOF



From mean at mail.berlios.de  Wed Aug 11 07:41:57 2010
From: mean at mail.berlios.de (mean at mail.berlios.de)
Date: Wed, 11 Aug 2010 07:41:57 +0200
Subject: [Avidemux-svn-commit] r6515 -
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resampleFps
Message-ID: <20100811054157.58BC9480E8C@sheep.berlios.de>

Author: mean
Date: 2010-08-11 07:41:57 +0200 (Wed, 11 Aug 2010)
New Revision: 6515

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resampleFps/ADM_vidResampleFPS.cpp
Log:
[resampleFps] Handle seeking better

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resampleFps/ADM_vidResampleFPS.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resampleFps/ADM_vidResampleFPS.cpp	2010-08-11 05:41:56 UTC (rev 6514)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resampleFps/ADM_vidResampleFPS.cpp	2010-08-11 05:41:57 UTC (rev 6515)
@@ -1,9 +1,10 @@
 /***************************************************************************
-                          Resample fps
-                             -------------------
-    begin                : Wed Nov 6 2002
-    copyright            : (C) 2002 by mean
-    email                : fixounet at free.fr
+    \file ADM_vidResampleFps
+    \author mean fixounet at free.fr
+    \brief Simple filter that enforces output constant frame per second
+    Can be used both to change fps of a movie or to enforce in case of drops
+    or pulldown. In that case, the input is a mix of 24 & 30 fps, the output
+    is fixed 24 fps.
  ***************************************************************************/
 
 /***************************************************************************
@@ -40,8 +41,8 @@
         bool                updateIncrement(void);
         uint64_t            baseTime;
         ADMImage            *frames[2];
-        bool                refill(void);
-        bool                prefill;
+        bool                refill(void);   // Fetch next frame
+        bool                prefill;        // If true we already have 2 frames fetched
 public:
                             resampleFps(ADM_coreVideoFilter *previous,CONFcouple *conf);
                             ~resampleFps();
@@ -132,6 +133,9 @@
 }
 /**
      \fn refill
+     \brief fetch a new frame from source, shift the old one as "old"
+    frames[0]=old
+    frames[1]=new
 */
 bool resampleFps::refill(void)
 {
@@ -165,11 +169,12 @@
  bool         resampleFps::getNextFrame(uint32_t *fn,ADMImage *image)
 {
 
-    if(!prefill)
+    if(!prefill) // Empty, need 1/ to refill, 2/ to rebase
     {
           if(false==refill()) return false;
+          baseTime=frames[1]->Pts;
           if(false==refill()) return false;
-          prefill=1;
+          prefill=true;
     }
 
     uint64_t thisTime=baseTime+(nextFrame*info.frameIncrement);



From mean at mail.berlios.de  Wed Aug 11 07:41:58 2010
From: mean at mail.berlios.de (mean at mail.berlios.de)
Date: Wed, 11 Aug 2010 07:41:58 +0200
Subject: [Avidemux-svn-commit] r6516 -
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resampleFps
Message-ID: <20100811054158.56D69480E8C@sheep.berlios.de>

Author: mean
Date: 2010-08-11 07:41:58 +0200 (Wed, 11 Aug 2010)
New Revision: 6516

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resampleFps/ADM_vidResampleFPS.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resampleFps/confResampleFps.conf
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resampleFps/confResampleFps.h
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resampleFps/confResampleFps_desc.cpp
Log:
[resampleFps] Fps is now a rationnal

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resampleFps/ADM_vidResampleFPS.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resampleFps/ADM_vidResampleFPS.cpp	2010-08-11 05:41:57 UTC (rev 6515)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resampleFps/ADM_vidResampleFPS.cpp	2010-08-11 05:41:58 UTC (rev 6516)
@@ -42,7 +42,7 @@
         uint64_t            baseTime;
         ADMImage            *frames[2];
         bool                refill(void);   // Fetch next frame
-        bool                prefill;        // If true we already have 2 frames fetched
+        bool                prefillDone;        // If true we already have 2 frames fetched
 public:
                             resampleFps(ADM_coreVideoFilter *previous,CONFcouple *conf);
                             ~resampleFps();
@@ -67,8 +67,8 @@
 */
 bool resampleFps::configure(void)
 {
-  float f=configuration.newFps; 
-  f/=1000;
+    float f=configuration.newFpsNum; 
+    f/=configuration.newFpsDen;
   
   
     diaElemFloat fps(&f,QT_TR_NOOP("_New frame rate:"),1,200.);
@@ -77,9 +77,10 @@
   
     if( diaFactoryRun(QT_TR_NOOP("Resample fps"),1,elems))
     {
-        f*=1000;
-      configuration.newFps=(uint32_t)floor(f+0.4);
-      prefill=0;
+      f*=1000;
+      configuration.newFpsNum=(uint32_t)floor(f+0.4);
+      configuration.newFpsDen=(uint32_t)1000;
+      prefillDone=false;
       updateIncrement();
       return 1;
     }
@@ -91,7 +92,9 @@
 */
 bool resampleFps::updateIncrement(void)
 {
-    info.frameIncrement=ADM_UsecFromFps1000(configuration.newFps);
+    float f=configuration.newFpsNum*1000;
+    f/=configuration.newFpsDen;
+    info.frameIncrement=ADM_UsecFromFps1000((uint32_t)f);
   
     return true;
 }
@@ -101,7 +104,7 @@
 const char *resampleFps::getConfiguration( void )
 {
 static char buf[100];
- snprintf(buf,99," Resample to %2.2f fps",(double)configuration.newFps/1000.);
+ snprintf(buf,99," Resample to %2.2f fps",(double)configuration.newFpsNum/configuration.newFpsDen);
  return buf;  
 }
 /**
@@ -110,12 +113,13 @@
 resampleFps::resampleFps(  ADM_coreVideoFilter *previous,CONFcouple *setup) : ADM_coreVideoFilter(previous,setup)
 {
     baseTime=0;
-    prefill=false;
+    prefillDone=false;
     frames[0]=frames[1]=NULL;
     if(!setup || !ADM_paramLoad(setup,confResampleFps_param,&configuration))
     {
         // Default value
-        configuration.newFps=ADM_Fps1000FromUs(previous->getInfo()->frameIncrement);
+        configuration.newFpsNum=ADM_Fps1000FromUs(previous->getInfo()->frameIncrement);
+        configuration.newFpsDen=1000;
     }
     if(!frames[0]) frames[0]=new ADMImageDefault(info.width,info.height);
     if(!frames[1]) frames[1]=new ADMImageDefault(info.width,info.height);
@@ -152,7 +156,7 @@
 bool         resampleFps::goToTime(uint64_t usSeek)
 {
     if(false==ADM_coreVideoFilter::goToTime(usSeek)) return false;
-    prefill=false;
+    prefillDone=false;
     return true;
 }
 
@@ -169,16 +173,19 @@
  bool         resampleFps::getNextFrame(uint32_t *fn,ADMImage *image)
 {
 
-    if(!prefill) // Empty, need 1/ to refill, 2/ to rebase
+    if(!prefillDone) // Empty, need 1/ to refill, 2/ to rebase
     {
           if(false==refill()) return false;
-          baseTime=frames[1]->Pts;
+          baseTime=frames[1]->Pts;  // We start at the first frame
           if(false==refill()) return false;
-          prefill=true;
+          prefillDone=true;
     }
+    float offset=configuration.newFpsDen;
+    offset*=1000000LL;
+    offset*=nextFrame;
+    offset/=configuration.newFpsNum;
+    uint64_t thisTime=baseTime+(uint64_t)offset;
 
-    uint64_t thisTime=baseTime+(nextFrame*info.frameIncrement);
-
 again:
     
     uint64_t frame1Dts=frames[0]->Pts;

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resampleFps/confResampleFps.conf
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resampleFps/confResampleFps.conf	2010-08-11 05:41:57 UTC (rev 6515)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resampleFps/confResampleFps.conf	2010-08-11 05:41:58 UTC (rev 6516)
@@ -1 +1,2 @@
-uint32_t:newFps
+uint32_t:newFpsDen
+uint32_t:newFpsNum

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resampleFps/confResampleFps.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resampleFps/confResampleFps.h	2010-08-11 05:41:57 UTC (rev 6515)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resampleFps/confResampleFps.h	2010-08-11 05:41:58 UTC (rev 6516)
@@ -2,7 +2,8 @@
 #ifndef ADM_confResampleFps_CONF_H
 #define ADM_confResampleFps_CONF_H
 typedef struct {
-   uint32_t newFps;
+   uint32_t newFpsDen;
+   uint32_t newFpsNum;
 }confResampleFps;
 #endif //confResampleFps
 //EOF

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resampleFps/confResampleFps_desc.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resampleFps/confResampleFps_desc.cpp	2010-08-11 05:41:57 UTC (rev 6515)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resampleFps/confResampleFps_desc.cpp	2010-08-11 05:41:58 UTC (rev 6516)
@@ -1,5 +1,6 @@
 // Automatically generated, do not edit!
 const ADM_paramList confResampleFps_param[]={
- {"newFps",offsetof( confResampleFps,newFps),"uint32_t",ADM_param_uint32_t},
+ {"newFpsDen",offsetof( confResampleFps,newFpsDen),"uint32_t",ADM_param_uint32_t},
+ {"newFpsNum",offsetof( confResampleFps,newFpsNum),"uint32_t",ADM_param_uint32_t},
 {NULL,0,NULL}
 };



From mean at mail.berlios.de  Wed Aug 11 07:41:59 2010
From: mean at mail.berlios.de (mean at mail.berlios.de)
Date: Wed, 11 Aug 2010 07:41:59 +0200
Subject: [Avidemux-svn-commit] r6517 -
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resampleFps
Message-ID: <20100811054159.70939480E8C@sheep.berlios.de>

Author: mean
Date: 2010-08-11 07:41:59 +0200 (Wed, 11 Aug 2010)
New Revision: 6517

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resampleFps/ADM_vidResampleFPS.cpp
Log:
[resampleFps] Add some predefined values

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resampleFps/ADM_vidResampleFPS.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resampleFps/ADM_vidResampleFPS.cpp	2010-08-11 05:41:58 UTC (rev 6516)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resampleFps/ADM_vidResampleFPS.cpp	2010-08-11 05:41:59 UTC (rev 6517)
@@ -62,31 +62,8 @@
                         "Resample FPS",            // Display name
                         "Change and enforce FPS. Keep duration and sync." // Description
                     );
+
 /**
-    \fn configure
-*/
-bool resampleFps::configure(void)
-{
-    float f=configuration.newFpsNum; 
-    f/=configuration.newFpsDen;
-  
-  
-    diaElemFloat fps(&f,QT_TR_NOOP("_New frame rate:"),1,200.);
-    
-    diaElem *elems[1]={&fps};
-  
-    if( diaFactoryRun(QT_TR_NOOP("Resample fps"),1,elems))
-    {
-      f*=1000;
-      configuration.newFpsNum=(uint32_t)floor(f+0.4);
-      configuration.newFpsDen=(uint32_t)1000;
-      prefillDone=false;
-      updateIncrement();
-      return 1;
-    }
-    return 0;
-}
-/**
     \fn updateIncrement
     \brief FPS->TimeIncrement
 */
@@ -330,6 +307,62 @@
   return 1;
 }
 #endif 
+/**
+    \fn configure
+*/
+bool resampleFps::configure(void)
+{
+const uint32_t num[6]={1,24000,25000,30000,50000,60000};
+const uint32_t den[6]={1,1001,1000,1001,1000,1001};
+uint32_t nbPredefined=sizeof(num)/sizeof(uint32_t);
 
+    float f=configuration.newFpsNum; 
+    f/=configuration.newFpsDen;
+  
+   diaMenuEntry tFps[]={
+                             {0,      QT_TR_NOOP("Custom"),NULL},
+                             {1,   QT_TR_NOOP("23.976 (Film)"),NULL},
+                             {2,      QT_TR_NOOP("25  (PAL)"),NULL},
+                             {3,  QT_TR_NOOP("29.97 (NTSC)"),NULL},
+                             {4,   QT_TR_NOOP("50 (Pal)"),NULL},
+                             {5,      QT_TR_NOOP("59.93  (NTSC)"),NULL}
 
+          };
+    uint32_t sel=0;
+    
+    // See if a predefined value is ok
+    for(int i=0;i<nbPredefined;i++)
+    {
+        double fpsFloat=num[i];
+        fpsFloat/=den[i];
+        if(fabs(f-fpsFloat)<0.02) sel=i;
+    }
+
+
+    diaElemMenu mFps(&(sel),   QT_TR_NOOP("_Mode:"), 6,tFps);
+    diaElemFloat fps(&f,QT_TR_NOOP("_New frame rate:"),1,200.);
+
+    mFps.link(tFps+0,1,&fps);
+
+    diaElem *elems[2]={&mFps,&fps};
+  
+    if( diaFactoryRun(QT_TR_NOOP("Resample fps"),2,elems))
+    {
+      if(!sel)
+      {
+          f*=1000;
+          configuration.newFpsNum=(uint32_t)floor(f+0.4);
+          configuration.newFpsDen=(uint32_t)1000;
+      }else 
+        {
+            configuration.newFpsNum=num[sel];
+            configuration.newFpsDen=den[sel];
+        }
+      prefillDone=false;
+      updateIncrement();
+      return 1;
+    }
+    return 0;
+}
+
 //EOF



From mean at mail.berlios.de  Wed Aug 11 07:42:00 2010
From: mean at mail.berlios.de (mean at mail.berlios.de)
Date: Wed, 11 Aug 2010 07:42:00 +0200
Subject: [Avidemux-svn-commit] r6518 -
	branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters
Message-ID: <20100811054200.91AAC480E8C@sheep.berlios.de>

Author: mean
Date: 2010-08-11 07:42:00 +0200 (Wed, 11 Aug 2010)
New Revision: 6518

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters/mainfilter.ui
Log:
[Qt4] fix "noise" icon

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters/mainfilter.ui
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters/mainfilter.ui	2010-08-11 05:41:59 UTC (rev 6517)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters/mainfilter.ui	2010-08-11 05:42:00 UTC (rev 6518)
@@ -435,8 +435,8 @@
          <string>Noise</string>
         </property>
         <property name="icon">
-         <iconset>
-          <normaloff>../../../common/ADM_icons/videoFilter/5.png</normaloff>../../../common/ADM_icons/videoFilter/5.png</iconset>
+         <iconset resource="filter.qrc">
+          <normaloff>:/new/prefix1/common/ADM_icons/videoFilter/5.png</normaloff>:/new/prefix1/common/ADM_icons/videoFilter/5.png</iconset>
         </property>
        </item>
        <item>



From mean at mail.berlios.de  Wed Aug 11 07:42:01 2010
From: mean at mail.berlios.de (mean at mail.berlios.de)
Date: Wed, 11 Aug 2010 07:42:01 +0200
Subject: [Avidemux-svn-commit] r6519 -
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resampleFps
Message-ID: <20100811054201.9B433480E8C@sheep.berlios.de>

Author: mean
Date: 2010-08-11 07:42:01 +0200 (Wed, 11 Aug 2010)
New Revision: 6519

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resampleFps/ADM_vidResampleFPS.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resampleFps/confResampleFps.conf
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resampleFps/confResampleFps.h
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resampleFps/confResampleFps_desc.cpp
Log:
[resampleFps] Store the predefined fps into the filter conf, avoid rounding

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resampleFps/ADM_vidResampleFPS.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resampleFps/ADM_vidResampleFPS.cpp	2010-08-11 05:42:00 UTC (rev 6518)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resampleFps/ADM_vidResampleFPS.cpp	2010-08-11 05:42:01 UTC (rev 6519)
@@ -30,6 +30,26 @@
 #else
     #define aprintf ADM_info
 #endif
+
+typedef struct 
+{
+    const char *desc;
+    uint32_t num;
+    uint32_t den;
+}PredefinedFps_t;
+
+const PredefinedFps_t predefinedFps[]=
+{
+ {QT_TR_NOOP("Custom"),         10000,1000},
+ {QT_TR_NOOP("25  (PAL)"),      25000,1000},
+ {QT_TR_NOOP("23.976 (Film)"),  24000,1001},
+ {QT_TR_NOOP("29.97 (NTSC)"),   30000,1001},
+ {QT_TR_NOOP("50 (Pal)"),       50000,1000},
+ {QT_TR_NOOP("59.93  (NTSC)"),  60000,1001}
+};
+
+#define nbPredefined (sizeof(predefinedFps)/sizeof(PredefinedFps_t))
+
 /**
     \class resampleFps
 
@@ -95,6 +115,7 @@
     if(!setup || !ADM_paramLoad(setup,confResampleFps_param,&configuration))
     {
         // Default value
+        configuration.mode=0;
         configuration.newFpsNum=ADM_Fps1000FromUs(previous->getInfo()->frameIncrement);
         configuration.newFpsDen=1000;
     }
@@ -312,51 +333,39 @@
 */
 bool resampleFps::configure(void)
 {
-const uint32_t num[6]={1,24000,25000,30000,50000,60000};
-const uint32_t den[6]={1,1001,1000,1001,1000,1001};
-uint32_t nbPredefined=sizeof(num)/sizeof(uint32_t);
 
     float f=configuration.newFpsNum; 
     f/=configuration.newFpsDen;
+
+ADM_assert(nbPredefined == 6);
   
    diaMenuEntry tFps[]={
-                             {0,      QT_TR_NOOP("Custom"),NULL},
-                             {1,   QT_TR_NOOP("23.976 (Film)"),NULL},
-                             {2,      QT_TR_NOOP("25  (PAL)"),NULL},
-                             {3,  QT_TR_NOOP("29.97 (NTSC)"),NULL},
-                             {4,   QT_TR_NOOP("50 (Pal)"),NULL},
-                             {5,      QT_TR_NOOP("59.93  (NTSC)"),NULL}
+#define Z(x)                 {x,     predefinedFps[x].desc}
+                    Z(0),Z(1),Z(2),Z(3),Z(4),Z(5)
 
           };
-    uint32_t sel=0;
+    uint32_t sel=configuration.mode;
     
-    // See if a predefined value is ok
-    for(int i=0;i<nbPredefined;i++)
-    {
-        double fpsFloat=num[i];
-        fpsFloat/=den[i];
-        if(fabs(f-fpsFloat)<0.02) sel=i;
-    }
 
-
-    diaElemMenu mFps(&(sel),   QT_TR_NOOP("_Mode:"), 6,tFps);
+    diaElemMenu mFps(&(configuration.mode),   QT_TR_NOOP("_Mode:"), 6,tFps);
     diaElemFloat fps(&f,QT_TR_NOOP("_New frame rate:"),1,200.);
 
-    mFps.link(tFps+0,1,&fps);
+    mFps.link(tFps+0,1,&fps); // only activate entry in custom mode
 
     diaElem *elems[2]={&mFps,&fps};
   
     if( diaFactoryRun(QT_TR_NOOP("Resample fps"),2,elems))
     {
-      if(!sel)
+      if(!configuration.mode) // Custom mode
       {
           f*=1000;
           configuration.newFpsNum=(uint32_t)floor(f+0.4);
           configuration.newFpsDen=(uint32_t)1000;
-      }else 
+      }else   // Preset
         {
-            configuration.newFpsNum=num[sel];
-            configuration.newFpsDen=den[sel];
+            const PredefinedFps_t *me=&(predefinedFps[configuration.mode]);
+            configuration.newFpsNum=me->num;
+            configuration.newFpsDen=me->den;
         }
       prefillDone=false;
       updateIncrement();

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resampleFps/confResampleFps.conf
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resampleFps/confResampleFps.conf	2010-08-11 05:42:00 UTC (rev 6518)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resampleFps/confResampleFps.conf	2010-08-11 05:42:01 UTC (rev 6519)
@@ -1,2 +1,3 @@
+uint32_t:mode
 uint32_t:newFpsDen
 uint32_t:newFpsNum

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resampleFps/confResampleFps.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resampleFps/confResampleFps.h	2010-08-11 05:42:00 UTC (rev 6518)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resampleFps/confResampleFps.h	2010-08-11 05:42:01 UTC (rev 6519)
@@ -2,6 +2,7 @@
 #ifndef ADM_confResampleFps_CONF_H
 #define ADM_confResampleFps_CONF_H
 typedef struct {
+   uint32_t mode;
    uint32_t newFpsDen;
    uint32_t newFpsNum;
 }confResampleFps;

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resampleFps/confResampleFps_desc.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resampleFps/confResampleFps_desc.cpp	2010-08-11 05:42:00 UTC (rev 6518)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/resampleFps/confResampleFps_desc.cpp	2010-08-11 05:42:01 UTC (rev 6519)
@@ -1,5 +1,6 @@
 // Automatically generated, do not edit!
 const ADM_paramList confResampleFps_param[]={
+ {"mode",offsetof( confResampleFps,mode),"uint32_t",ADM_param_uint32_t},
  {"newFpsDen",offsetof( confResampleFps,newFpsDen),"uint32_t",ADM_param_uint32_t},
  {"newFpsNum",offsetof( confResampleFps,newFpsNum),"uint32_t",ADM_param_uint32_t},
 {NULL,0,NULL}



From mean at mail.berlios.de  Fri Aug 13 07:31:59 2010
From: mean at mail.berlios.de (mean at mail.berlios.de)
Date: Fri, 13 Aug 2010 07:31:59 +0200
Subject: [Avidemux-svn-commit] r6520 -
	branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVdpau/src
Message-ID: <20100813053159.95439480EDD@sheep.berlios.de>

Author: mean
Date: 2010-08-13 07:31:59 +0200 (Fri, 13 Aug 2010)
New Revision: 6520

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVdpau/src/ADM_coreVdpau.cpp
Log:
[vdpau] dont use absolute path, patch from j.kardell

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVdpau/src/ADM_coreVdpau.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVdpau/src/ADM_coreVdpau.cpp	2010-08-11 05:42:01 UTC (rev 6519)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVdpau/src/ADM_coreVdpau.cpp	2010-08-13 05:31:59 UTC (rev 6520)
@@ -50,7 +50,7 @@
 bool admVdpau::init(GUI_WindowInfo *x)
 {
     memset(&ADM_coreVdpau::funcs,0,sizeof(ADM_coreVdpau::funcs));
-    if(false==vdpauDynaLoader.loadLibrary("/usr/lib/libvdpau.so"))
+    if(false==vdpauDynaLoader.loadLibrary("libvdpau.so"))
     {
         ADM_info("Cannot load libvdpau.so\n");
         return false;



From mean at mail.berlios.de  Fri Aug 13 08:08:32 2010
From: mean at mail.berlios.de (mean at mail.berlios.de)
Date: Fri, 13 Aug 2010 08:08:32 +0200
Subject: [Avidemux-svn-commit] r6521 - in
	branches/avidemux_2.6_branch_mean/avidemux:
	cli/ADM_userInterfaces/ADM_gui2 gtk/ADM_userInterfaces/ADM_gui2
	qt4/ADM_userInterfaces/ADM_gui
Message-ID: <20100813060832.C327F480EDD@sheep.berlios.de>

Author: mean
Date: 2010-08-13 08:08:32 +0200 (Fri, 13 Aug 2010)
New Revision: 6521

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_gui2/gui_none.cpp
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_gui2/GUI_bindings.cpp
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/ADM_qslider.cpp
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/ADM_qslider.h
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/Q_gui2.cpp
Log:
[ui] set and update the markA/markB visual indication

Modified: branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_gui2/gui_none.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_gui2/gui_none.cpp	2010-08-13 05:31:59 UTC (rev 6520)
+++ branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_gui2/gui_none.cpp	2010-08-13 06:08:32 UTC (rev 6521)
@@ -76,8 +76,6 @@
 
 void UI_updateTimeCount(uint32_t curFrame, uint32_t fps)
 {}
-void UI_setTimeCount(uint32_t curFrame,uint32_t total, uint32_t fps)
-{}
 
 double 	UI_readScale( void )
 {

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_gui2/GUI_bindings.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_gui2/GUI_bindings.cpp	2010-08-13 05:31:59 UTC (rev 6520)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_gui2/GUI_bindings.cpp	2010-08-13 06:08:32 UTC (rev 6521)
@@ -778,23 +778,6 @@
 
 }
 /**
-    \fn UI_setFrameCount
-	
-*/
-
-void UI_setFrameCount(uint32_t curFrame,uint32_t total)
-{
-    char text[80];
-    if(total) total--; // We display from 0 to X
-    // frames
-   // sprintf(text, "%"LU" ", curFrame);
-   // gtk_label_set_text((GtkLabel *) guiCurFrame, text);
-    gtk_write_entry(guiCurFrame,curFrame);
-      sprintf(text, "/ %"LU"", total);
-    gtk_label_set_text((GtkLabel *) guiTotalFrame, text);
-
-}
-/**
     \fn UI_setTotalTime
     \brief SEt the total duration of video
 */

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/ADM_qslider.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/ADM_qslider.cpp	2010-08-13 05:31:59 UTC (rev 6520)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/ADM_qslider.cpp	2010-08-13 06:08:32 UTC (rev 6521)
@@ -17,28 +17,35 @@
 #include <QtGui/QPainter>
 #include <QtGui/QSlider>
 #include "ADM_qslider.h"
+#include "ADM_assert.h"
+/**
+    \fn ADM_QSlider
+*/
 
 ADM_QSlider::ADM_QSlider(QWidget *parent) : QSlider(parent)
 {
-	frameCount = markerA = markerB = 0;
+   totalDuration= markerATime= markerBTime =0;
+	
 }
-
+/**
+    \fn paintEvent
+*/
 void ADM_QSlider::paintEvent(QPaintEvent *event)
 {
 	QSlider::paintEvent(event);	
 
-	int a = markerA, b = markerB;
+	uint64_t a = markerATime, b = markerBTime;
 
-	if (markerA > markerB)
+	if (markerATime > markerBTime)
 	{
-		b = markerA;
-		a = markerB; 
+		b = markerATime;
+		a = markerBTime; 
 	}
 
-	if (frameCount > 0 && (a != 0 || b != frameCount))
+	if (totalDuration > 0LL && (a != 0 || b != totalDuration))
 	{
-		int left = (a * width()) / frameCount;
-		int right = (b * width()) / frameCount;
+		int left  = (int)(((double)a * width()) / (double)totalDuration);
+		int right = (int)(((double)b * width()) / (double)totalDuration);
 
 		QPainter painter(this);
 
@@ -47,35 +54,44 @@
 		painter.end();
 	}
 }
+/**
+    \fn setMarkerA
+*/
 
-void ADM_QSlider::setMarkerA(uint32_t frameIndex)
+void ADM_QSlider::setMarkerA(uint64_t frameIndex)
 {
-	setMarkers(frameIndex, markerB);
+	setMarkers(frameIndex, markerBTime);
 }
-
-void ADM_QSlider::setMarkerB(uint32_t frameIndex)
+/**
+    \fn setMarkerB
+*/
+void ADM_QSlider::setMarkerB(uint64_t frameIndex)
 {
-	setMarkers(markerA, frameIndex);
+	setMarkers(markerATime, frameIndex);
 }
-
-void ADM_QSlider::setMarkers(uint32_t frameIndexA, uint32_t frameIndexB)
+/**
+    \fn setMarkers
+*/
+void ADM_QSlider::setMarkers(uint64_t frameIndexA, uint64_t frameIndexB)
 {
-	if (frameIndexA > frameCount)
-		printf("[ADM_QSlider] Marker A is out of bounds (%u, %u)\n", markerA, frameCount);
-	else if (frameIndexB > frameCount)
-		printf("[ADM_QSlider] Marker B is out of bounds (%u, %u)\n", markerB, frameCount);
+	if (frameIndexA > totalDuration)
+		printf("[ADM_QSlider] Marker A is out of bounds (%"LLU", %"LLU")\n", markerATime, totalDuration);
+	else if (frameIndexB > totalDuration)
+		printf("[ADM_QSlider] Marker B is out of bounds (%"LLU", %"LLU")\n", markerBTime, totalDuration);
 	else
 	{
-		markerA = frameIndexA;
-		markerB = frameIndexB;
+		markerATime = frameIndexA;
+		markerBTime = frameIndexB;
 
 		repaint();
 	}
 }
-
-void ADM_QSlider::setFrameCount(uint32_t count)
+/**
+        \fn setTotalDuration
+*/
+void ADM_QSlider::setTotalDuration(uint64_t duration)
 {
-	frameCount = count;
+	totalDuration = duration;
 	repaint();
 }
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/ADM_qslider.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/ADM_qslider.h	2010-08-13 05:31:59 UTC (rev 6520)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/ADM_qslider.h	2010-08-13 06:08:32 UTC (rev 6521)
@@ -1,19 +1,23 @@
 #ifndef ADM_Q_SLIDER_H
 #define ADM_Q_SLIDER_H
 #include "ADM_inttype.h"
+/**
+    \class ADM_QSlider
+
+*/
 class ADM_QSlider : public QSlider
 {
 protected:
-	uint32_t frameCount, markerA, markerB;
+	uint64_t totalDuration, markerATime, markerBTime;
 	void paintEvent(QPaintEvent *event);
 
 public:
 	ADM_QSlider(QWidget *parent = 0); 
 
-	void setMarkerA(uint32_t frameIndex);
-	void setMarkerB(uint32_t frameIndex);
-	void setMarkers(uint32_t frameIndexA, uint32_t frameIndexB);
-	void setFrameCount(uint32_t count);
+	void setMarkerA(uint64_t frameIndex);
+	void setMarkerB(uint64_t frameIndex);
+	void setMarkers(uint64_t frameIndexA, uint64_t frameIndexB);
+	void setTotalDuration(uint64_t duration);
 };
 
 #endif

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/Q_gui2.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/Q_gui2.cpp	2010-08-13 05:31:59 UTC (rev 6520)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/Q_gui2.cpp	2010-08-13 06:08:32 UTC (rev 6521)
@@ -838,27 +838,8 @@
 	WIDGET(currentTime)->setText(text);
 }
 
-/**
-    \fn     UI_updateTimeCount(uint32_t curFrame,uint32_t fps)
-    \brief  Display the time corresponding to current frame according to fps (fps1000) and total duration
-*/
-void UI_setTimeCount(uint32_t curFrame,uint32_t total, uint32_t fps)
-{
-	char text[80];   
-	uint32_t mm,hh,ss,ms;
 
-	if(total) total--; // We display from 0 to X
 
-	UI_updateTimeCount(curFrame,fps);
-	frame2time(total,fps, &hh, &mm, &ss, &ms);
-	sprintf(text, "/ %02d:%02d:%02d.%03d", hh, mm, ss, ms);
-	WIDGET(totalTime)->setText(text);
-
-	slider->setFrameCount(total);
-
-	currentFps = fps;	
-}
-
 /**
     \fn UI_setCurrentTime
     \brief Set current PTS of displayed video
@@ -888,6 +869,7 @@
     ms2time(shorty,&hh,&mm,&ss,&ms);
   	sprintf(text, "/%02d:%02d:%02d.%03d", hh, mm, ss, ms);
     WIDGET(totalTime)->setText(text);
+    slider->setTotalDuration(curTime);
 }
 /**
     \fn     UI_setMarkers(uint64_t Ptsa, uint32_t Ptsb )
@@ -896,6 +878,7 @@
 void UI_setMarkers(uint64_t a, uint64_t b)
 {
 	char text[80];
+    uint64_t absoluteA=a,absoluteB=b;
     uint32_t hh,mm,ss,ms;
     uint32_t timems;
     a/=1000;
@@ -911,7 +894,7 @@
 	snprintf(text,79,"%02"LU":%02"LU":%02"LU".%02"LU,hh,mm,ss,ms);
 	WIDGET(pushButtonJumpToMarkerB)->setText(text);
 
-	//slider->setMarkers(a, b);
+	slider->setMarkers(absoluteA, absoluteB);
 }
 
 /**



From mean at mail.berlios.de  Sat Aug 14 11:22:43 2010
From: mean at mail.berlios.de (mean at mail.berlios.de)
Date: Sat, 14 Aug 2010 11:22:43 +0200
Subject: [Avidemux-svn-commit] r6522 -
	branches/avidemux_2.6_branch_mean/avidemux/common/ADM_osSupport
Message-ID: <20100814092243.716F4480EE5@sheep.berlios.de>

Author: mean
Date: 2010-08-14 11:22:43 +0200 (Sat, 14 Aug 2010)
New Revision: 6522

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_osSupport/ADM_crashHook.cpp
Log:
[All] Crash file is saved as py not as js

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_osSupport/ADM_crashHook.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_osSupport/ADM_crashHook.cpp	2010-08-13 06:08:32 UTC (rev 6521)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_osSupport/ADM_crashHook.cpp	2010-08-14 09:22:43 UTC (rev 6522)
@@ -21,11 +21,11 @@
 #include "ADM_editor/ADM_edit.hxx"
 extern ADM_Composer *video_body;
 
-#define CRASH_FILE "crash.js"
+#define CRASH_FILE "crash.py"
 
 void saveCrashProject(void);
-extern char *ADM_getBaseDir(void);
-extern void A_parseECMAScript(const char *name);
+extern char *ADM_getBaseDir(void);
+bool A_parseTinyPyScript(const char *name);
 
 /**
     \fn saveCrashProject
@@ -43,7 +43,7 @@
   strcat(where,"/");
   strcat(where,name);
   printf("Saving crash file to %s\n",where);
-  video_body->saveAsScript (where, NULL);
+  video_body->saveAsPyScript (where);
   delete[] where;
 }
 /**
@@ -65,7 +65,7 @@
     if(GUI_Confirmation_HIG(QT_TR_NOOP("Load it"),QT_TR_NOOP("Crash file"),
        QT_TR_NOOP("I have detected a crash file. \nDo you want to load it  ?\n(It will be deleted in all cases, you should save it if you want to keep it)")))
     {
-       A_parseECMAScript(where);
+       A_parseTinyPyScript(where);
     }
     unlink(where);
   }else



From mean at mail.berlios.de  Sat Aug 14 11:22:45 2010
From: mean at mail.berlios.de (mean at mail.berlios.de)
Date: Sat, 14 Aug 2010 11:22:45 +0200
Subject: [Avidemux-svn-commit] r6523 - in
	branches/avidemux_2.6_branch_mean/avidemux/common: .
	ADM_videoFilter2/src
Message-ID: <20100814092245.23E6E480EE5@sheep.berlios.de>

Author: mean
Date: 2010-08-14 11:22:44 +0200 (Sat, 14 Aug 2010)
New Revision: 6523

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_videoFilters.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/gui_play.cpp
Log:
[videoFilter] Destroy from the end to avoid issue with pump that keeps pumping data from destroyed filter

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_videoFilters.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_videoFilters.cpp	2010-08-14 09:22:43 UTC (rev 6522)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_videoFilters.cpp	2010-08-14 09:22:44 UTC (rev 6523)
@@ -264,8 +264,14 @@
 {
     ADM_assert(chain->size());
     int nb=chain->size();
-    for(int i=0;i<nb;i++)
+    if(!nb)
     {
+        ADM_info("Empty filter chain\n");
+        return true;
+    }
+    nb--;
+    for(int i=nb;i>=0;i--) // delete from the end
+    {
         ADM_coreVideoFilter *filter=(*chain)[i];
         delete filter;
         (*chain)[i]=NULL;

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/gui_play.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/gui_play.cpp	2010-08-14 09:22:43 UTC (rev 6522)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/gui_play.cpp	2010-08-14 09:22:44 UTC (rev 6523)
@@ -176,6 +176,7 @@
 */
 bool GUIPlayback::cleanup(void)
 {
+        ADM_info("Cleaning up..\n");
         cleanupAudio();
         if(videoChain)
         {



From mean at mail.berlios.de  Sun Aug 15 09:02:10 2010
From: mean at mail.berlios.de (mean at mail.berlios.de)
Date: Sun, 15 Aug 2010 09:02:10 +0200
Subject: [Avidemux-svn-commit] r6524 -
	branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters
Message-ID: <20100815070211.40257480F44@sheep.berlios.de>

Author: mean
Date: 2010-08-15 09:02:10 +0200 (Sun, 15 Aug 2010)
New Revision: 6524

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters/mainfilter.ui
Log:
[ui/qt4] Remove vcd.... resize shortcut button

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters/mainfilter.ui
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters/mainfilter.ui	2010-08-14 09:22:44 UTC (rev 6523)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters/mainfilter.ui	2010-08-15 07:02:10 UTC (rev 6524)
@@ -34,108 +34,6 @@
      <property name="spacing">
       <number>6</number>
      </property>
-     <item row="4" column="0" colspan="2">
-      <layout class="QGridLayout">
-       <property name="margin">
-        <number>0</number>
-       </property>
-       <property name="spacing">
-        <number>6</number>
-       </property>
-       <item row="0" column="1">
-        <widget class="QPushButton" name="pushButtonSVCD">
-         <property name="sizePolicy">
-          <sizepolicy hsizetype="Preferred" vsizetype="Fixed">
-           <horstretch>0</horstretch>
-           <verstretch>0</verstretch>
-          </sizepolicy>
-         </property>
-         <property name="minimumSize">
-          <size>
-           <width>72</width>
-           <height>0</height>
-          </size>
-         </property>
-         <property name="text">
-          <string>&amp;SVCD res</string>
-         </property>
-         <property name="icon">
-          <iconset resource="filter.qrc">
-           <normaloff>:/new/prefix1/common/ADM_icons/videoFilter/cd.png</normaloff>:/new/prefix1/common/ADM_icons/videoFilter/cd.png</iconset>
-         </property>
-        </widget>
-       </item>
-       <item row="1" column="1">
-        <widget class="QPushButton" name="pushButtonVCD">
-         <property name="sizePolicy">
-          <sizepolicy hsizetype="Preferred" vsizetype="Fixed">
-           <horstretch>0</horstretch>
-           <verstretch>0</verstretch>
-          </sizepolicy>
-         </property>
-         <property name="minimumSize">
-          <size>
-           <width>72</width>
-           <height>0</height>
-          </size>
-         </property>
-         <property name="text">
-          <string>&amp;VCD res</string>
-         </property>
-         <property name="icon">
-          <iconset resource="filter.qrc">
-           <normaloff>:/new/prefix1/common/ADM_icons/videoFilter/cd.png</normaloff>:/new/prefix1/common/ADM_icons/videoFilter/cd.png</iconset>
-         </property>
-        </widget>
-       </item>
-       <item row="1" column="0">
-        <widget class="QPushButton" name="pushButtonHalfDVD">
-         <property name="sizePolicy">
-          <sizepolicy hsizetype="Expanding" vsizetype="Preferred">
-           <horstretch>0</horstretch>
-           <verstretch>0</verstretch>
-          </sizepolicy>
-         </property>
-         <property name="minimumSize">
-          <size>
-           <width>72</width>
-           <height>0</height>
-          </size>
-         </property>
-         <property name="text">
-          <string>&amp;Half D1 res</string>
-         </property>
-         <property name="icon">
-          <iconset resource="filter.qrc">
-           <normaloff>:/new/prefix1/common/ADM_icons/videoFilter/cd.png</normaloff>:/new/prefix1/common/ADM_icons/videoFilter/cd.png</iconset>
-         </property>
-        </widget>
-       </item>
-       <item row="0" column="0">
-        <widget class="QPushButton" name="pushButtonDVD">
-         <property name="sizePolicy">
-          <sizepolicy hsizetype="Preferred" vsizetype="Fixed">
-           <horstretch>0</horstretch>
-           <verstretch>0</verstretch>
-          </sizepolicy>
-         </property>
-         <property name="minimumSize">
-          <size>
-           <width>72</width>
-           <height>0</height>
-          </size>
-         </property>
-         <property name="text">
-          <string>&amp;DVD res</string>
-         </property>
-         <property name="icon">
-          <iconset resource="filter.qrc">
-           <normaloff>:/new/prefix1/common/ADM_icons/videoFilter/cd.png</normaloff>:/new/prefix1/common/ADM_icons/videoFilter/cd.png</iconset>
-         </property>
-        </widget>
-       </item>
-      </layout>
-     </item>
      <item row="1" column="2" rowspan="4" colspan="2">
       <widget class="QListWidget" name="listWidgetAvailable">
        <property name="sizePolicy">
@@ -371,7 +269,7 @@
        </property>
       </widget>
      </item>
-     <item row="1" column="0" rowspan="3" colspan="2">
+     <item row="1" column="0" rowspan="4" colspan="2">
       <widget class="QListWidget" name="listFilterCategory">
        <property name="sizePolicy">
         <sizepolicy hsizetype="Fixed" vsizetype="Expanding">
@@ -540,10 +438,6 @@
   <tabstop>listFilterCategory</tabstop>
   <tabstop>listWidgetAvailable</tabstop>
   <tabstop>listWidgetActive</tabstop>
-  <tabstop>pushButtonDVD</tabstop>
-  <tabstop>pushButtonSVCD</tabstop>
-  <tabstop>pushButtonHalfDVD</tabstop>
-  <tabstop>pushButtonVCD</tabstop>
   <tabstop>toolButtonAdd</tabstop>
   <tabstop>toolButtonConfigure</tabstop>
   <tabstop>toolButtonPartial</tabstop>



From mean at mail.berlios.de  Sun Aug 15 09:02:12 2010
From: mean at mail.berlios.de (mean at mail.berlios.de)
Date: Sun, 15 Aug 2010 09:02:12 +0200
Subject: [Avidemux-svn-commit] r6525 - in
	branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2:
	binding include py src
Message-ID: <20100815070212.C80B3480F44@sheep.berlios.de>

Author: mean
Date: 2010-08-15 09:02:12 +0200 (Sun, 15 Aug 2010)
New Revision: 6525

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/binding/adm.admPyClass
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_scriptCommon.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm_gen.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_scriptAvidemux.cpp
Log:
[script] Add get aspect

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/binding/adm.admPyClass
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/binding/adm.admPyClass	2010-08-15 07:02:10 UTC (rev 6524)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/binding/adm.admPyClass	2010-08-15 07:02:12 UTC (rev 6525)
@@ -9,6 +9,8 @@
 /* METHOD */ int scriptSetPostProc:setPostProc      (int ,int , int ) 
 /* METHOD */ int scriptGetWidth:getWidth            (void) 
 /* METHOD */ int scriptGetHeight:getHeight          (void) 
+/* METHOD */ int scriptGetPARWidth:getPARWidth      (void) 
+/* METHOD */ int scriptGetPARHeight:getPARHeight    (void) 
 /* METHOD */ int scriptGetFps1000:getFps1000        (void) 
 /* METHOD */ str scriptGetVideoCodec:getVideoCodec(void) 
 /* METHOD */ int scriptAudioReset:audioReset        (void) 

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_scriptCommon.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_scriptCommon.h	2010-08-15 07:02:10 UTC (rev 6524)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_scriptCommon.h	2010-08-15 07:02:12 UTC (rev 6525)
@@ -37,6 +37,8 @@
 // Info
 int scriptGetWidth ( void) ;
 int scriptGetHeight ( void) ;
+int scriptGetPARWidth(void);
+int scriptGetPARHeight(void);
 int scriptGetFps1000 ( void) ;
 char *jsGetVideoCodec ( void) ;
 // Misc

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm_gen.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm_gen.cpp	2010-08-15 07:02:10 UTC (rev 6524)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm_gen.cpp	2010-08-15 07:02:12 UTC (rev 6525)
@@ -44,6 +44,15 @@
   int r=  scriptLoadVideo(p0); 
   return tp_number(r);
 }
+// getPARWidth -> int scriptGetPARWidth (void ) 
+static tp_obj zzpy_getPARWidth(TP)
+ {
+  tp_obj self=tp_getraw( tp);
+  tinyParams pm(tp);
+  void *me=(void *)pm.asThis(&self,ADM_PYID_AVIDEMUX);
+  int r=  scriptGetPARWidth(); 
+  return tp_number(r);
+}
 // clearSegments -> int scriptClearSegments (void ) 
 static tp_obj zzpy_clearSegments(TP)
  {
@@ -209,6 +218,15 @@
   ADM_dealloc(r);
   return o;
 }
+// getPARHeight -> int scriptGetPARHeight (void ) 
+static tp_obj zzpy_getPARHeight(TP)
+ {
+  tp_obj self=tp_getraw( tp);
+  tinyParams pm(tp);
+  void *me=(void *)pm.asThis(&self,ADM_PYID_AVIDEMUX);
+  int r=  scriptGetPARHeight(); 
+  return tp_number(r);
+}
 tp_obj zzpy__pyAdm_get(tp_vm *vm)
 {
   tp_obj self=tp_getraw( vm);
@@ -243,6 +261,10 @@
   {
      return tp_method(vm,self,zzpy_loadVideo);
   }
+  if (!strcmp(key, "getPARWidth"))
+  {
+     return tp_method(vm,self,zzpy_getPARWidth);
+  }
   if (!strcmp(key, "clearSegments"))
   {
      return tp_method(vm,self,zzpy_clearSegments);
@@ -307,6 +329,10 @@
   {
      return tp_method(vm,self,zzpy_getVideoCodec);
   }
+  if (!strcmp(key, "getPARHeight"))
+  {
+     return tp_method(vm,self,zzpy_getPARHeight);
+  }
   return tp_get(vm,self,tp_string(key));
 }
 tp_obj zzpy__pyAdm_set(tp_vm *vm)
@@ -356,6 +382,7 @@
 	jsLog("saveBmp(str)\n");
 	jsLog("addVideoFilter(str,couples)\n");
 	jsLog("loadVideo(str )\n");
+	jsLog("getPARWidth(void)\n");
 	jsLog("clearSegments(void)\n");
 	jsLog("getHeight(void)\n");
 	jsLog("setPostProc(int ,int , int )\n");
@@ -372,6 +399,7 @@
 	jsLog("setContainer(str,couples)\n");
 	jsLog("audioReset(void)\n");
 	jsLog("getVideoCodec(void)\n");
+	jsLog("getPARHeight(void)\n");
 };
 tp_obj initClasspyAdm(tp_vm *vm)
 {

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_scriptAvidemux.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_scriptAvidemux.cpp	2010-08-15 07:02:10 UTC (rev 6524)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_scriptAvidemux.cpp	2010-08-15 07:02:12 UTC (rev 6525)
@@ -52,6 +52,20 @@
         
     return ret;
 }
+/**
+    \fn scriptGetPARWidth
+*/
+int scriptGetPARWidth(void)
+{
+    return video_body->getPARWidth();
+}
+/**
+    \fn scriptGetPARHeigth
+*/
+int scriptGetPARHeight(void)
+{
+    return video_body->getPARHeight();
+}
 
 /**
     \fn jsAppendFile



From mean at mail.berlios.de  Sun Aug 15 09:02:13 2010
From: mean at mail.berlios.de (mean at mail.berlios.de)
Date: Sun, 15 Aug 2010 09:02:13 +0200
Subject: [Avidemux-svn-commit] r6526 - in branches/avidemux_2.6_branch_mean:
	. scripts
Message-ID: <20100815070214.0C79D480F44@sheep.berlios.de>

Author: mean
Date: 2010-08-15 09:02:13 +0200 (Sun, 15 Aug 2010)
New Revision: 6526

Added:
   branches/avidemux_2.6_branch_mean/scripts/
   branches/avidemux_2.6_branch_mean/scripts/automkv.py
Log:
[py] add simple DVB-T -> mkv auto script

Added: branches/avidemux_2.6_branch_mean/scripts/automkv.py
===================================================================
--- branches/avidemux_2.6_branch_mean/scripts/automkv.py	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/scripts/automkv.py	2010-08-15 07:02:13 UTC (rev 6526)
@@ -0,0 +1,89 @@
+# simple tinypy script that creates a MKV/AC3 file from input
+#  a PAL DVB capture
+
+adm=Avidemux()
+gui=Gui()
+#** Audio **
+adm.audioReset()
+adm.audioCodec("LavAC3",192)
+#** Muxer **
+adm.setContainer("MKV")
+# Do we need to resize ?
+width=adm.getWidth()
+height=adm.getHeight()
+fps=adm.getFps1000()
+aspectW=adm.getPARWidth()
+aspectH=adm.getPARHeight()
+print('Aspect: ',aspectW,', ',aspectH,'\n')
+#
+aspect=(aspectW,aspectH)
+ar=0
+if aspect == (1,1):
+        ar=0
+elif aspect == (16,15):
+        ar=1
+elif aspect == (64,45):
+        ar=2
+else:
+        print('Cannot guess aspect ratio')
+####################################################
+# Create a display menu to select Aspect ratio
+# And resize type 576p, 720p, ...
+####################################################
+listOfWidth=[720,1280]
+mnuSourceRatio = DFMenu("Source Aspect Ratio:");
+mnuSourceRatio.addItem("1:1")
+mnuSourceRatio.addItem("4:3")
+mnuSourceRatio.addItem("16:9")
+mnuSourceRatio.index=ar
+
+mnuResize = DFMenu("Video to create :");
+mnuResize.addItem("720 pixels")
+mnuResize.addItem("1280 pixels")
+
+toggleDeint = DFToggle("Deinterlace:");
+
+dlgWizard = DialogFactory("Automkv Source Aspect Ratio "); 
+dlgWizard.addControl(mnuSourceRatio);  
+dlgWizard.addControl(mnuResize);  
+dlgWizard.addControl(toggleDeint);  
+
+res=dlgWizard.show()                                                                                                                        
+if res==1: 
+        ar=mnuSourceRatio.index
+        rsz=listOfWidth[mnuResize.index]
+        deinterlace=toggleDeint.value
+else:   
+        return
+#################################################################
+#  We have resize width, get resize Height from aspect ratio
+#################################################################
+if(ar==0) : # 1:1
+        newHeight=rsz
+elif(ar==1): # 4:3
+        newHeight=(rsz*3)/4
+elif(ar==2): # 16:9
+        newHeight=(rsz*9)/16
+# roundup newHeight to closer multiple of 16
+newHeight=newHeight>>4
+newHeight=newHeight<<4
+print("The end ar:",ar,"Width :",rsz," height:",newHeight)
+# if deinterlace is set do it with vdpau
+if(deinterlace):
+        str1="targetWidth="+str(rsz)
+        str2="targetHeight="+str(newHeight)
+        adm.addVideoFilter("vdpauDeint","resizeToggle=True","deintMode=2",str1,str2)
+#else plain resize
+else:
+        str1="width="+str(rsz)
+        str2="height="+str(newHeight)
+        adm.addVideoFilter("swscale",str1,str2,"algo=2","sourceAR=1","targetAR=1")
+       
+# Set video codec 
+adm.videoCodec("x264","params=AQ=18","MaxRefFrames=2","MinIdr=10","MaxIdr=150","threads=99","_8x8=True","_8x8P=True","_8x8B=True","_4x4=True" ,"_8x8I=True","_4x4I=True","MaxBFrame=2","profile=30","CABAC=True","Trellis=True")                       
+
+# popup user
+popupString="All set for "+str(rsz)+" wide video, x264/AC3/MKV."
+if(deinterlace):
+        popupString=popupString+"\nDeinterlace is on (vdpau)."
+gui.displayInfo("Ok",popupString)



From mean at mail.berlios.de  Sun Aug 15 09:02:15 2010
From: mean at mail.berlios.de (mean at mail.berlios.de)
Date: Sun, 15 Aug 2010 09:02:15 +0200
Subject: [Avidemux-svn-commit] r6527 -
	branches/avidemux_2.6_branch_mean/autononreg/py/avidemux
Message-ID: <20100815070215.4061B480F44@sheep.berlios.de>

Author: mean
Date: 2010-08-15 09:02:14 +0200 (Sun, 15 Aug 2010)
New Revision: 6527

Added:
   branches/avidemux_2.6_branch_mean/autononreg/py/avidemux/pyDoubleLoad.py
Log:
[py] Simple script to check leak : double load a file

Added: branches/avidemux_2.6_branch_mean/autononreg/py/avidemux/pyDoubleLoad.py
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/py/avidemux/pyDoubleLoad.py	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/autononreg/py/avidemux/pyDoubleLoad.py	2010-08-15 07:02:14 UTC (rev 6527)
@@ -0,0 +1,10 @@
+adm=Avidemux()
+gui=Gui()
+editor=Editor()
+file="/work/samples/avi/2mn.avi"
+if(adm.loadVideo(file)==0):
+   displayError("Cannot load file")
+if(adm.loadVideo(file)==0):
+   displayError("Cannot load file")
+editor.dumpAllSegments()
+



From mean at mail.berlios.de  Sun Aug 15 09:02:16 2010
From: mean at mail.berlios.de (mean at mail.berlios.de)
Date: Sun, 15 Aug 2010 09:02:16 +0200
Subject: [Avidemux-svn-commit] r6528 -
	branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters
Message-ID: <20100815070216.776CC480F44@sheep.berlios.de>

Author: mean
Date: 2010-08-15 09:02:16 +0200 (Sun, 15 Aug 2010)
New Revision: 6528

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters/mainfilter.ui
Log:
[filter/qt4] Remove load/save icons

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters/mainfilter.ui
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters/mainfilter.ui	2010-08-15 07:02:14 UTC (rev 6527)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters/mainfilter.ui	2010-08-15 07:02:16 UTC (rev 6528)
@@ -110,19 +110,6 @@
         <number>0</number>
        </property>
        <item>
-        <spacer>
-         <property name="orientation">
-          <enum>Qt::Horizontal</enum>
-         </property>
-         <property name="sizeHint" stdset="0">
-          <size>
-           <width>0</width>
-           <height>22</height>
-          </size>
-         </property>
-        </spacer>
-       </item>
-       <item>
         <widget class="QToolButton" name="toolButtonConfigure">
          <property name="sizePolicy">
           <sizepolicy hsizetype="Fixed" vsizetype="Preferred">
@@ -149,39 +136,6 @@
         </widget>
        </item>
        <item>
-        <widget class="QToolButton" name="toolButtonLoad">
-         <property name="text">
-          <string>Load</string>
-         </property>
-         <property name="icon">
-          <iconset resource="filter.qrc">
-           <normaloff>:/new/prefix1/common/ADM_icons/videoFilter/fileopen.png</normaloff>:/new/prefix1/common/ADM_icons/videoFilter/fileopen.png</iconset>
-         </property>
-        </widget>
-       </item>
-       <item>
-        <widget class="QToolButton" name="toolButtonSave">
-         <property name="text">
-          <string>Save</string>
-         </property>
-         <property name="icon">
-          <iconset resource="filter.qrc">
-           <normaloff>:/new/prefix1/common/ADM_icons/videoFilter/filesave.png</normaloff>:/new/prefix1/common/ADM_icons/videoFilter/filesave.png</iconset>
-         </property>
-        </widget>
-       </item>
-       <item>
-        <widget class="QToolButton" name="toolButtonSaveScript">
-         <property name="text">
-          <string>Save Script</string>
-         </property>
-         <property name="icon">
-          <iconset resource="filter.qrc">
-           <normaloff>:/new/prefix1/common/ADM_icons/videoFilter/filesaveas.png</normaloff>:/new/prefix1/common/ADM_icons/videoFilter/filesaveas.png</iconset>
-         </property>
-        </widget>
-       </item>
-       <item>
         <widget class="QToolButton" name="toolButtonDown">
          <property name="text">
           <string>Down</string>
@@ -204,6 +158,19 @@
         </widget>
        </item>
        <item>
+        <spacer>
+         <property name="orientation">
+          <enum>Qt::Horizontal</enum>
+         </property>
+         <property name="sizeHint" stdset="0">
+          <size>
+           <width>0</width>
+           <height>22</height>
+          </size>
+         </property>
+        </spacer>
+       </item>
+       <item>
         <widget class="QToolButton" name="pushButtonRemove">
          <property name="text">
           <string>Remove</string>
@@ -441,9 +408,6 @@
   <tabstop>toolButtonAdd</tabstop>
   <tabstop>toolButtonConfigure</tabstop>
   <tabstop>toolButtonPartial</tabstop>
-  <tabstop>toolButtonLoad</tabstop>
-  <tabstop>toolButtonSave</tabstop>
-  <tabstop>toolButtonSaveScript</tabstop>
   <tabstop>toolButtonDown</tabstop>
   <tabstop>toolButtonUp</tabstop>
   <tabstop>pushButtonRemove</tabstop>



From mean at mail.berlios.de  Sun Aug 15 09:02:17 2010
From: mean at mail.berlios.de (mean at mail.berlios.de)
Date: Sun, 15 Aug 2010 09:02:17 +0200
Subject: [Avidemux-svn-commit] r6529 -
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/vdpauFilters
Message-ID: <20100815070217.B5F8A480F44@sheep.berlios.de>

Author: mean
Date: 2010-08-15 09:02:17 +0200 (Sun, 15 Aug 2010)
New Revision: 6529

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/vdpauFilters/ADM_vidVdpauFilterDeint.cpp
Log:
[vdpauDeint] Correctly handle end of stream

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/vdpauFilters/ADM_vidVdpauFilterDeint.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/vdpauFilters/ADM_vidVdpauFilterDeint.cpp	2010-08-15 07:02:16 UTC (rev 6528)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/vdpauFilters/ADM_vidVdpauFilterDeint.cpp	2010-08-15 07:02:17 UTC (rev 6529)
@@ -37,6 +37,7 @@
 class vdpauVideoFilterDeint : public  ADM_coreVideoFilter
 {
 protected:
+                    bool                 eof;
                     bool                 secondField;
                     uint64_t             nextPts;
                     ADMColorScalerSimple *scaler;
@@ -110,6 +111,7 @@
 bool         vdpauVideoFilterDeint::goToTime(uint64_t usSeek)
 {
     secondField=false;
+    eof=false;
     for(int i=0;i<ADM_NB_SURFACES;i++)             frameDesc[i]=ADM_INVALID_FRAME_NUM;
     return ADM_coreVideoFilter::goToTime(usSeek);
 }
@@ -183,6 +185,7 @@
 */
 vdpauVideoFilterDeint::vdpauVideoFilterDeint(ADM_coreVideoFilter *in, CONFcouple *setup): ADM_coreVideoFilter(in,setup)
 {
+    eof=false;
     for(int i=0;i<ADM_NB_SURFACES;i++)
         input[i]=VDP_INVALID_HANDLE;
     mixer=VDP_INVALID_HANDLE;
@@ -280,7 +283,7 @@
     if(!next) // empty image
     {
         frameDesc[surfaceIndex%ADM_NB_SURFACES]=ADM_INVALID_FRAME_NUM;
-        ADM_warning("No image to upload\n");
+        ADM_warning("VdpauDeint:No image to upload\n");
         return true;
     }
   // Blit our image to surface
@@ -395,6 +398,11 @@
 bool vdpauVideoFilterDeint::getNextFrame(uint32_t *fn,ADMImage *image)
 {
 bool r=true;
+    if(eof)
+    {
+        ADM_warning("[VdpauDeint] End of stream\n");
+        return false;
+    }
 #define FAIL {r=false;goto endit;}
      if(passThrough) return previousFilter->getNextFrame(fn,image);
     // top field has already been sent, grab bottom field
@@ -424,13 +432,18 @@
     // regular image, in fact we get the next image here
     
     ADMImage *next= vidCache->getImage(nextFrame+1);
+    if(next)
+    {
+        //printf("VDPAU DEINT : incoming PTS=%"LLU"\n",next->Pts);
+    }
     if(false==uploadImage(next,nextFrame+1,nextFrame+1)) 
             {
                 vidCache->unlockAll();
+                
                 FAIL
             }
+   if(!next) eof=true; // End of stream
    
-   
     // Now get our image back from surface...
     sendField(true,next); // always send top field
     if(configuration.deintMode==ADM_KEEP_TOP || configuration.deintMode==ADM_KEEP_BOTH)
@@ -462,6 +475,7 @@
     nextFrame++;
     image->Pts=nextPts;
     if(next) nextPts=next->Pts;
+   // printf("VDPAU OUT PTS= %"LLU"\n",image->Pts);
     return r;
 }
 #endif



From mean at mail.berlios.de  Sun Aug 15 09:31:54 2010
From: mean at mail.berlios.de (mean at mail.berlios.de)
Date: Sun, 15 Aug 2010 09:31:54 +0200
Subject: [Avidemux-svn-commit] r6530 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer
Message-ID: <20100815073154.30869480F44@sheep.berlios.de>

Author: mean
Date: 2010-08-15 09:31:54 +0200 (Sun, 15 Aug 2010)
New Revision: 6530

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_indexer.cpp
Log:
[TS/h264] Fix indexing h264 in mpeg TS

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_indexer.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_indexer.cpp	2010-08-15 07:02:17 UTC (rev 6529)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_indexer.cpp	2010-08-15 07:31:54 UTC (rev 6530)
@@ -305,6 +305,7 @@
                             break;
           case DMX_PAYLOAD_H264:
                             qfprintf(out,"Payload  : H264\n"); // MPEG,MP_4,H264
+                            break;
           case DMX_PAYLOAD_VC1:
                             qfprintf(out,"Payload  : VC1 \n"); // MPEG,MP_4,H264
                             break;



From mean at mail.berlios.de  Sun Aug 15 16:45:46 2010
From: mean at mail.berlios.de (mean at mail.berlios.de)
Date: Sun, 15 Aug 2010 16:45:46 +0200
Subject: [Avidemux-svn-commit] r6531 -
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/crop
Message-ID: <20100815144546.A2C1F480F44@sheep.berlios.de>

Author: mean
Date: 2010-08-15 16:45:46 +0200 (Sun, 15 Aug 2010)
New Revision: 6531

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/crop/DIA_flyCrop.cpp
Log:
[crop] Add doxygen header (cosmetic)

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/crop/DIA_flyCrop.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/crop/DIA_flyCrop.cpp	2010-08-15 07:31:54 UTC (rev 6530)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/crop/DIA_flyCrop.cpp	2010-08-15 14:45:46 UTC (rev 6531)
@@ -24,6 +24,10 @@
 
 static uint8_t 		Metrics( uint8_t *in, uint32_t width,uint32_t *avg, uint32_t *eqt);
 static uint8_t 		MetricsV( uint8_t *in, uint32_t width,uint32_t height,uint32_t *avg, uint32_t *eqt);
+/**
+    \fn process
+	\brief 
+*/
 
 uint8_t    flyCrop::process(void)
 {
@@ -92,9 +96,10 @@
 		copyRgbFinalToDisplay();
 }
 
-/*----------------------------------
-  autocrop
------------------------------------*/
+/**
+     \fn autocrop
+	\brief 
+*/
 
 uint8_t  flyCrop::autocrop(void)
 {
@@ -176,10 +181,11 @@
         display();
         return 1;
 }
-/*---------------------------------------------
-	Compute the average value of pixels
-	and eqt is the "ecart type"
+/**
+     \fn Metrics
+	\brief Compute the average value of pixels	and eqt is the "ecart type"
 */
+
 uint8_t Metrics( uint8_t *in, uint32_t width,uint32_t *avg, uint32_t *eqt)
 {
 
@@ -201,9 +207,9 @@
               *eqt=eq;
               return 1;
 }
-/*---------------------------------------------
-	Compute the average value of pixels
-	and eqt is the "ecart type"
+/**
+     \fn MetricsV
+	\brief Compute the average value of pixels	and eqt is the "ecart type"
 */
 uint8_t MetricsV( uint8_t *in,uint32_t width, uint32_t height,uint32_t *avg, uint32_t *eqt)
 {



From mean at mail.berlios.de  Sun Aug 15 16:45:49 2010
From: mean at mail.berlios.de (mean at mail.berlios.de)
Date: Sun, 15 Aug 2010 16:45:49 +0200
Subject: [Avidemux-svn-commit] r6532 - in branches/avidemux_2.6_branch_mean:
	avidemux/cli/ADM_UIs/include avidemux/cli/ADM_UIs/src
	avidemux/gtk/ADM_UIs/include avidemux/gtk/ADM_UIs/src
	avidemux/gtk/ADM_userInterfaces/ADM_dialog
	avidemux/qt4/ADM_UIs/include avidemux/qt4/ADM_UIs/src
	avidemux/qt4/ADM_userInterfaces/ADM_dialog
	avidemux/qt4/ADM_userInterfaces/ADM_filters
	avidemux_core/ADM_coreVideoFilter/include
	avidemux_core/ADM_coreVideoFilter/src
	avidemux_plugins/ADM_videoFilters6/crop
	avidemux_plugins/ADM_videoFilters6/crop/gtk
	avidemux_plugins/ADM_videoFilters6/crop/qt4
Message-ID: <20100815144549.64F7A480F44@sheep.berlios.de>

Author: mean
Date: 2010-08-15 16:45:49 +0200 (Sun, 15 Aug 2010)
New Revision: 6532

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_UIs/include/DIA_flyDialogCli.h
   branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_UIs/src/DIA_flyDialogCli.cpp
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/include/DIA_flyDialogGtk.h
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/DIA_flyDialogGtk.cpp
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_flyPreview.h
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_preview.cpp
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/include/DIA_flyDialogQt4.h
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_flyDialogQt4.cpp
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/DIA_flyPreview.h
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters/Q_seekablePreview.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/include/DIA_flyDialog.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/src/DIA_flyDialog.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/crop/DIA_flyCrop.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/crop/DIA_flyCrop.h
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/crop/gtk/DIA_crop.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/crop/qt4/Q_crop.cpp
Log:
[fly] split yuv & rgb handling in flyDialog

Modified: branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_UIs/include/DIA_flyDialogCli.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_UIs/include/DIA_flyDialogCli.h	2010-08-15 14:45:46 UTC (rev 6531)
+++ branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_UIs/include/DIA_flyDialogCli.h	2010-08-15 14:45:49 UTC (rev 6532)
@@ -25,7 +25,7 @@
                                 ADM_flyDialog(width,height,in,canvas,slider,yuv,resizeMethod) {};
 
   virtual uint8_t  cleanup2(void);
-  virtual uint8_t  isRgbInverted(void);
+  virtual bool     isRgbInverted(void);
   virtual uint8_t  display(void);
   virtual float   calcZoomFactor(void);
   virtual uint32_t sliderGet(void);

Modified: branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_UIs/src/DIA_flyDialogCli.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_UIs/src/DIA_flyDialogCli.cpp	2010-08-15 14:45:46 UTC (rev 6531)
+++ branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_UIs/src/DIA_flyDialogCli.cpp	2010-08-15 14:45:49 UTC (rev 6532)
@@ -46,7 +46,7 @@
         return 0;      
 }
 
-uint8_t ADM_flyDialogCli::isRgbInverted(void)
+bool ADM_flyDialogCli::isRgbInverted(void)
 {
         return 0; 
 }

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/include/DIA_flyDialogGtk.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/include/DIA_flyDialogGtk.h	2010-08-15 14:45:46 UTC (rev 6531)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/include/DIA_flyDialogGtk.h	2010-08-15 14:45:49 UTC (rev 6532)
@@ -31,13 +31,13 @@
   ADM_flyDialogGtk(uint32_t width, uint32_t height, ADM_coreVideoFilter *in,
                               void *canvas, void *slider, int yuv, ResizeMethod resizeMethod);
   virtual           ~ADM_flyDialogGtk(void);
-  virtual uint8_t  isRgbInverted(void);
-  virtual uint8_t  display(void);
-  virtual float   calcZoomFactor(void);
+  virtual bool     isRgbInverted(void);
+  virtual uint8_t  display(uint8_t *rgbdata);
+  virtual float    calcZoomFactor(void);
   virtual uint32_t sliderGet(void);
   virtual uint8_t  sliderSet(uint32_t value);
-  virtual void    postInit(uint8_t reInit);
-  virtual bool    setCurrentPts(uint64_t  pts){return true;};
+  virtual void     postInit(uint8_t reInit);
+  virtual bool     setCurrentPts(uint64_t  pts){return true;};
 };
 
 #endif

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/DIA_flyDialogGtk.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/DIA_flyDialogGtk.cpp	2010-08-15 14:45:46 UTC (rev 6531)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/DIA_flyDialogGtk.cpp	2010-08-15 14:45:49 UTC (rev 6532)
@@ -111,10 +111,10 @@
 	return UI_calcZoomToFitScreen(window, (GtkWidget*)_canvas, _w, _h);
 }
 
-uint8_t  ADM_flyDialogGtk::display(void)
+uint8_t  ADM_flyDialogGtk::display(uint8_t *rgbData)
 {
 	ADM_assert(_canvas);
-	ADM_assert(_rgbBufferOut);
+	ADM_assert(rgbData);
     GtkWidget *widget=(GtkWidget*)_canvas;
     gdk_draw_rgb_32_image(widget->window, widget->style->fg_gc[GTK_STATE_NORMAL], 0,    // X
                        0,       // y
@@ -122,7 +122,7 @@
                        _zoomH,       //h*2, // heigth
                        GDK_RGB_DITHER_NONE,
                        //GDK_RGB_DITHER_MAX,  // dithering
-                       (guchar *) _rgbBufferOut,  // buffer
+                       (guchar *) rgbData,  // buffer
                        _zoomW * 4);
 
 	//GUI_RGBDisplay(_rgbBufferOut, _zoomW, _zoomH, _canvas);
@@ -145,9 +145,9 @@
 	return 1; 
 }
 
-uint8_t ADM_flyDialogGtk::isRgbInverted(void)
+bool ADM_flyDialogGtk::isRgbInverted(void)
 {
-	return 0; 
+	return false; 
 }
 
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_flyPreview.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_flyPreview.h	2010-08-15 14:45:46 UTC (rev 6531)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_flyPreview.h	2010-08-15 14:45:49 UTC (rev 6532)
@@ -7,24 +7,40 @@
 	uint8_t download(void) {return 1;}
 	uint8_t upload(void) {return 1;}
 	uint8_t cleanup(void) {return 1;}
-	uint8_t setData(uint8_t *buffer) {_rgb->convert(buffer, _rgbBufferOut); return 1;}
+	uint8_t setData(uint8_t *buffer) 
+            {
+              #warning FIXME  NO DISPLAY   
+            action->process();
+            //_rgb->convert(buffer, _rgbBufferOut); 
+            return 1;
 
+            }
+
 	flyPreview(uint32_t width, uint32_t height, void *canvas) : 
-	  ADM_flyDialogGtk(width, height, NULL, canvas, NULL, 0, RESIZE_NONE) {delete[] _rgbBuffer; _rgbBuffer = NULL;};
-	virtual ~flyPreview(void) {_rgbBuffer = NULL;};
+	  ADM_flyDialogGtk(width, height, NULL, canvas, NULL, true, RESIZE_AUTO) 
+        {
+            
+        };
+	virtual ~flyPreview(void) {};
     bool setCurrentPts(uint64_t pts) {return 1;}
 };
 
 class flySeekablePreview : public ADM_flyDialogGtk
 {
 public:
-	uint8_t process(void) {_rgbBufferOut = _rgbBuffer; return 1;}
+    uint8_t processYuv(ADMImage *in,ADMImage *out) 
+            {
+                out->duplicate(in);
+                return 1;
+            }
+
 	uint8_t download(void) {return 1;}
 	uint8_t upload(void) {return 1;}
 	uint8_t cleanup(void) {return 1;}
     bool setCurrentPts(uint64_t pts) {return 1;}
 	flySeekablePreview(uint32_t width, uint32_t height, ADM_coreVideoFilter *videoStream, void *canvas, void *slider) : 
-	  ADM_flyDialogGtk(width, height, videoStream, canvas, slider, 0, RESIZE_AUTO) {delete[] _rgbBufferOut; _rgbBufferOut = NULL;};
-	virtual ~flySeekablePreview(void) {_rgbBufferOut = NULL;};
+	  ADM_flyDialogGtk(width, height, videoStream, canvas, slider, 0, RESIZE_AUTO) 
+            {};
+	virtual ~flySeekablePreview(void) {};
 };
 #endif

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_preview.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_preview.cpp	2010-08-15 14:45:46 UTC (rev 6531)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_preview.cpp	2010-08-15 14:45:49 UTC (rev 6532)
@@ -77,7 +77,7 @@
 	gtk_widget_show(dialog);
 
 	seekablePreview = new flySeekablePreview(width, height, videoStream, WID(drawingarea1), WID(scale));
-	seekablePreview->process();
+//	seekablePreview->process();
 	seekablePreview->sliderSet(frame);
 	seekablePreview->sliderChanged();
 
@@ -97,7 +97,7 @@
 
 void seekablePreview_draw(void)
 {
-	seekablePreview->display();
+	seekablePreview->sameImage();
 }
 
 void seekablePreview_frame_changed(void)
@@ -131,9 +131,7 @@
 {
 	if (dialog)
 	{
-		preview->setData(buffer);
-		preview->display();
-
+		preview->display(buffer);
 		return 1;
 	}
 
@@ -153,7 +151,7 @@
 
 void preview_draw(void)
 {
-	preview->display();
+	preview->sameImage();
 }
 
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/include/DIA_flyDialogQt4.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/include/DIA_flyDialogQt4.h	2010-08-15 14:45:46 UTC (rev 6531)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/include/DIA_flyDialogQt4.h	2010-08-15 14:45:49 UTC (rev 6532)
@@ -38,13 +38,13 @@
                               void *canvas, void *slider, int yuv, ResizeMethod resizeMethod);
 
   
-  virtual uint8_t  isRgbInverted(void);
-  virtual uint8_t  display(void);
-  virtual float   calcZoomFactor(void);
+  virtual bool     isRgbInverted(void);
+  virtual uint8_t  display(uint8_t *rgbData);
+  virtual float    calcZoomFactor(void);
   virtual uint32_t sliderGet(void);
   virtual uint8_t  sliderSet(uint32_t value);
-  virtual void    postInit(uint8_t reInit);
-    bool          setCurrentPts(uint64_t pts) {return 1;}
+  virtual void     postInit(uint8_t reInit);
+    bool           setCurrentPts(uint64_t pts) {return 1;}
 };
 
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_flyDialogQt4.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_flyDialogQt4.cpp	2010-08-15 14:45:46 UTC (rev 6531)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_flyDialogQt4.cpp	2010-08-15 14:45:49 UTC (rev 6532)
@@ -105,12 +105,12 @@
     \brief
 */
 
-uint8_t  ADM_flyDialogQt4::display(void)
+uint8_t  ADM_flyDialogQt4::display(uint8_t *rgbData)
 {
    ADM_QCanvas *view=(ADM_QCanvas *)_canvas;
    ADM_assert(view);
-   view->dataBuffer=_rgbBufferOut;
-   if(!_rgbBufferOut)
+   view->dataBuffer=rgbData;
+   if(!rgbData)
    {
       ADM_info("flyDialog: No rgbuffer ??\n"); 
    } 
@@ -146,7 +146,7 @@
     \fn    isRgbInverted
     \brief
 */
-uint8_t  ADM_flyDialogQt4::isRgbInverted(void)
+bool  ADM_flyDialogQt4::isRgbInverted(void)
 {
   return 1; 
 }

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/DIA_flyPreview.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/DIA_flyPreview.h	2010-08-15 14:45:46 UTC (rev 6531)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/DIA_flyPreview.h	2010-08-15 14:45:49 UTC (rev 6532)
@@ -7,21 +7,40 @@
 	uint8_t download(void) {return 1;}
 	uint8_t upload(void) {return 1;}
 	uint8_t cleanup(void) {return 1;}
-	uint8_t setData(uint8_t *buffer) {_rgb->convert(buffer, _rgbBufferOut); return 1;}
+	uint8_t setData(uint8_t *buffer) 
+        {
+#warning FIXME  NO DISPLAY   
+            action->process();
+            //_rgb->convert(buffer, _rgbBufferOut); 
+            return 1;
+        }
 
 	flyPreview(uint32_t width, uint32_t height, void *canvas) : 
-	  ADM_flyDialogQt4(width, height, NULL, canvas, NULL, 0, RESIZE_NONE) {delete[] _rgbBuffer; _rgbBuffer = NULL;};
-	virtual ~flyPreview(void) {_rgbBuffer = NULL;};
+	  ADM_flyDialogQt4(width, height, NULL, canvas, NULL, true, RESIZE_NONE) 
+            {
+                
+            };
+	virtual ~flyPreview(void) 
+            {
+
+            };
 };
 
 typedef bool (*CookieFunc)(void *c,uint64_t pts);
+/**
+    \class flySeekablePreview
+*/
 class flySeekablePreview : public ADM_flyDialogQt4
 {
 protected:
     void *cookie;
     CookieFunc cookieFunc;
 public:
-	uint8_t process(void) {_rgbBufferOut = _rgbBuffer; return 1;}
+	uint8_t processYuv(ADMImage *in,ADMImage *out) 
+            {
+                out->duplicate(in);
+                return 1;
+            }
 	uint8_t download(void) {return 1;}
 	uint8_t upload(void) {return 1;}
 	uint8_t cleanup(void) {return 1;}
@@ -32,8 +51,11 @@
                 return true;
             }
 	flySeekablePreview(uint32_t width, uint32_t height, ADM_coreVideoFilter *videoStream, void *canvas, void *slider) : 
-	  ADM_flyDialogQt4(width, height, videoStream, canvas, slider, 0, RESIZE_AUTO) {delete[] _rgbBufferOut; _rgbBufferOut = NULL;cookie=NULL;cookieFunc=NULL;};
-	virtual ~flySeekablePreview(void) {_rgbBufferOut = NULL;};
+	  ADM_flyDialogQt4(width, height, videoStream, canvas, slider, true, RESIZE_LAST) 
+        {
+                cookie=NULL;cookieFunc=NULL;
+        };
+	virtual ~flySeekablePreview(void) {};
     bool setCookieFunc(CookieFunc cookieFunc, void *cookie)
         {
                 this->cookieFunc=cookieFunc;

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters/Q_seekablePreview.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters/Q_seekablePreview.cpp	2010-08-15 14:45:46 UTC (rev 6531)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters/Q_seekablePreview.cpp	2010-08-15 14:45:49 UTC (rev 6532)
@@ -55,8 +55,9 @@
 	canvas = new ADM_QCanvas(ui.frame, canvasWidth, canvasHeight);
 	canvas->show();
 	seekablePreview = new flySeekablePreview(canvasWidth, canvasHeight, videoStream, canvas, ui.horizontalSlider);	
-    seekablePreview->setCookieFunc(setCurrentPtsCallback,this);
-	seekablePreview->process();
+    seekablePreview->setCookieFunc(setCurrentPtsCallback,this);
+#warning FIXME NO UPDATE
+//	seekablePreview->process();
 	seekablePreview->sliderChanged();
 }
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/include/DIA_flyDialog.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/include/DIA_flyDialog.h	2010-08-15 14:45:46 UTC (rev 6531)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/include/DIA_flyDialog.h	2010-08-15 14:45:49 UTC (rev 6532)
@@ -11,6 +11,10 @@
  Case 2: The filter process RGV
  
  YUV-> YUV2RGB->RGB->Process->RGBUFFEROUT
+
+The ADM_flyDialog implments the common part
+The yuv/rgb specific part is implement through ADM_flyDialogAction (yuv/rgb)
+
  
  ***************************************************************************/
 
@@ -51,7 +55,7 @@
 };
 
 class diaMenuEntry;  // defined in DIA_factory.h; only need pointer here
-
+class ADM_flyDialog;
 struct MenuMapping
 {
     const char * widgetName; // name of the combo box widget or equivalent
@@ -59,7 +63,46 @@
     uint32_t count;
     const diaMenuEntry * menu;
 };
+/**
+    \class ADM_flyDialogAction
+*/
+class ADM_flyDialogAction
+{
+protected:
+            ADM_flyDialog *parent;
+            ADM_flyDialogAction(ADM_flyDialog *parent) {this->parent=parent;}
+public:
+  virtual   ~ADM_flyDialogAction() {}
+  virtual    bool process(void)=0;
+  virtual    void resetScaler(void)=0;
+};
 
+class ADM_flyDialogActionYuv: public ADM_flyDialogAction
+{
+protected:
+          ADMImage      *_yuvBufferOut;
+          ADMColorScalerFull *yuvToRgb;
+public:
+            ADM_flyDialogActionYuv(ADM_flyDialog *parent);
+            ~ADM_flyDialogActionYuv();
+        void resetScaler(void);
+        bool process(void);
+};
+
+class ADM_flyDialogActionRgb: public ADM_flyDialogAction
+{
+protected:
+          uint8_t       *_rgbBuffer;
+          uint8_t       *_rgbBufferOut;
+          ADMColorScalerFull *yuv2rgb;
+          ADMColorScalerFull *rgb2rgb;
+public:
+            ADM_flyDialogActionRgb(ADM_flyDialog *parent);
+            ~ADM_flyDialogActionRgb();
+        bool process(void);
+        void resetScaler(void);
+};
+//***************************************
 typedef float gfloat;
 /**
     \class ADM_flyDialog
@@ -67,7 +110,13 @@
 */
 class ADM_flyDialog
 {
+    friend class ADM_flyDialogAction;
+    friend class ADM_flyDialogActionYuv;
+    friend class ADM_flyDialogActionRgb;
   protected:
+   virtual ADM_colorspace toRgbColor(void);
+          void          updateZoom(void);
+          ADM_flyDialogAction *action;
           uint64_t      _currentPts;
           uint32_t      _w, _h, _zoomW, _zoomH;
           float         _zoom;
@@ -75,43 +124,35 @@
           ADM_coreVideoFilter *_in;
       
           ADMImage      *_yuvBuffer;
-          ADMImage      *_yuvBufferOut;
-          uint8_t       *_rgbBuffer;
-          uint8_t       *_rgbBufferOut;
           uint8_t       *_rgbBufferDisplay;
+
+
+          
           uint8_t       _isYuvProcessing;
           ResizeMethod  _resizeMethod;
-          ADMImageResizer *_resizer;
-
   
           void EndConstructor(void);
-          void copyYuvFinalToRgb(void);
-          void copyYuvScratchToRgb(void);
-          void copyRgbFinalToDisplay(void);
-
           
   public:
-          void recomputeSize(void);
-          virtual bool nextImage(void);
+          void               recomputeSize(void);
+          virtual bool       nextImage(void);
+          virtual bool       sameImage(void);
   public:
           void    *_cookie; // whatever
           void    *_slider; // widget
           void    *_canvas; // Drawing zone
-          ADMColorScalerSimple *_rgb;
-
+          
+  
+  //virtual bool       refresh();
           /* Filter dependant */
-  virtual uint8_t    process(void)=0;
+  virtual uint8_t    processYuv(ADMImage* in, ADMImage *out) {ADM_assert(0);}
+  virtual uint8_t    processRgb(uint8_t *in, uint8_t *out) {ADM_assert(0);}
   virtual uint8_t    download(void)=0;
   virtual uint8_t    upload(void)=0;
   virtual bool       setCurrentPts(uint64_t pts)=0;
           /* /filter dependant */
   
-        /* This is GTK/QT/whatever dependant */
-          
   
-          
-          
-  
   virtual uint8_t  update(void) {return 1;};
             uint8_t  cleanup(void);
   
@@ -122,14 +163,15 @@
 #endif
 
           ADM_flyDialog(uint32_t width, uint32_t height, ADM_coreVideoFilter *in,
-                             void *canvas, void *slider, int yuv, ResizeMethod resizeMethod);
+                             void *canvas, void *slider, int yuv, 
+                             ResizeMethod resizeMethod);
   virtual ~ADM_flyDialog(void);
 // UI dependant part
 // They are not defined as pure to avoid unresolved problem, especially on win32.
 // You should never use flyDialog as is, but using the macro to pull flyDialogGtk/flyDialogQt4/... 
-  
-  virtual uint8_t  isRgbInverted(void)=0;
-  virtual uint8_t  display(void)=0;
+public:  
+  virtual bool     isRgbInverted(void)=0;
+  virtual uint8_t  display(uint8_t *rgbData)=0;
   virtual float    calcZoomFactor(void)=0;
   virtual uint32_t sliderGet(void)=0;             // Return the slider value between 0 and ADM_FLY_SLIDER_MAX
   virtual uint8_t  sliderSet(uint32_t value) =0;  // Set slider value between 0 and ADM_FLY_SLIDE_MAX
@@ -164,3 +206,4 @@
 #endif //  ADM_FLY_INTERNAL
 
 #endif
+

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/src/DIA_flyDialog.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/src/DIA_flyDialog.cpp	2010-08-15 14:45:46 UTC (rev 6531)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/src/DIA_flyDialog.cpp	2010-08-15 14:45:49 UTC (rev 6532)
@@ -44,76 +44,59 @@
 	_cookie = NULL;
 	_resizeMethod = resizeMethod;
     _zoomChangeCount = 0;
-    _resizer=NULL;
     _rgbBufferDisplay=NULL;
 
-	_rgb=NULL;
-
 	_yuvBuffer=new ADMImageDefault(_w,_h);
 
+	_currentPts=0;	
+}
+/**
+    \fn updateZoom
+*/
+void ADM_flyDialog::updateZoom(void)
+{   
+        if(_rgbBufferDisplay) delete _rgbBufferDisplay;
+        _rgbBufferDisplay = new uint8_t[_zoomW * _zoomH * 4];
+        action->resetScaler();
+}
+
+/**
+ *      \fn Endconstructor
+ *      \brief We need to call some virtual functions in the constructor; 
+        it does not work, so we do the 2nd part of the constructor here
+ */
+void ADM_flyDialog::EndConstructor(void)
+ {
 	if(_isYuvProcessing)
 	{
-		_yuvBufferOut=new ADMImageDefault(_w,_h);
-		_rgbBuffer=NULL;
+        action=new ADM_flyDialogActionYuv(this);
 	}
 	else
 	{
-		_rgbBuffer =new uint8_t [_w*_h*4];
-		_yuvBufferOut=NULL;
+		action=new ADM_flyDialogActionRgb(this);
 	}
 
-	_rgbBufferOut =new uint8_t [_w*_h*4];
-
-	_currentPts=0;
-
-	
-}
-/**
- *      \fn Endconstructor
- *      \brief We call some virtual functions in the constructor; it does not work, so we do the 2nd part of the constructor here
- */
-void ADM_flyDialog::EndConstructor(void)
-  {
-        if (isRgbInverted())
-            _rgb =new ADMColorScalerSimple(_w,_h,ADM_COLOR_YV12,ADM_COLOR_BGR32A);
-        else
-            _rgb =new ADMColorScalerSimple(_w,_h,ADM_COLOR_YV12,ADM_COLOR_RGB32A);
-        if (_resizeMethod == RESIZE_AUTO || _resizeMethod == RESIZE_LAST)
+        if (_resizeMethod != RESIZE_NONE)
+        {
+                _zoom = calcZoomFactor();
+                if (_zoom == 1)
                 {
-                        _zoom = calcZoomFactor();
-
-                        if (_zoom == 1)
-                                _resizeMethod = RESIZE_NONE;
-                        else
-                        {
-                                _zoomW = uint32_t (_w * _zoom);
-                                _zoomH = uint32_t (_h * _zoom);
-                        }
+                        _resizeMethod = RESIZE_NONE;
                 }
-                else
-                        _zoom = 1;
-
-                if (_resizeMethod == RESIZE_AUTO || _resizeMethod == RESIZE_LAST)
-                {
-                        ADM_colorspace sourceColour;
-
-                        if (_resizeMethod == RESIZE_AUTO || _isYuvProcessing)
-                                sourceColour = ADM_COLOR_YV12;
-                        else
-                                sourceColour = ADM_COLOR_RGB32A;
-
-                        _resizer = new ADMImageResizer(_w, _h, _zoomW, _zoomH, sourceColour, ADM_COLOR_RGB32A);
-                        _rgbBufferDisplay = new uint8_t[_w * _h * 4];
-                }
-                else
-                {
-                        _zoomW = _w;
-                        _zoomH = _h;
-
-                        _resizer = NULL;
-                        _rgbBufferDisplay = NULL;
-                }
-                postInit (false);
+        }
+        if(_resizeMethod==RESIZE_NONE)
+        {
+            _zoom=1;
+            _zoomW=_w;
+            _zoomH=_h;
+        }
+        else
+        {
+                _zoomW = uint32_t (_w * _zoom);
+                _zoomH = uint32_t (_h * _zoom);
+        }
+        updateZoom();
+        postInit (false);
   }
 /**
     \fn    recomputeSize
@@ -159,28 +142,7 @@
     _zoom = new_zoom;
     _zoomW = new_zoomW;
     _zoomH = new_zoomH;
-
-    delete _resizer;
-    if (_resizeMethod == RESIZE_AUTO || _resizeMethod == RESIZE_LAST)
-    {
-        ADM_colorspace sourceColour;
-
-        if (_resizeMethod == RESIZE_AUTO || _isYuvProcessing)
-            sourceColour = ADM_COLOR_YV12;
-        else
-            sourceColour = ADM_COLOR_RGB32A;
-
-        _resizer = new ADMImageResizer(_w, _h, _zoomW, _zoomH, sourceColour, ADM_COLOR_RGB32A);
-        if (!_rgbBufferDisplay)
-            _rgbBufferDisplay = new uint8_t[_w * _h * 4];
-    }
-    else
-    {
-        _resizer = NULL;
-        delete _rgbBufferDisplay;
-        _rgbBufferDisplay = NULL;
-    }
-
+    updateZoom();
     postInit (true);
     sliderChanged();
 }
@@ -193,14 +155,9 @@
 {
 #define DEL1(x)    if(x) {delete [] x;x=NULL;}
 #define DEL2(x)    if(x) {delete  x;x=NULL;}
-  
-	DEL2(_yuvBufferOut);
 	DEL2(_yuvBuffer);
-	DEL1(_rgbBuffer);
-	DEL1(_rgbBufferOut);
 	DEL1(_rgbBufferDisplay);
-	DEL2(_rgb);
-	DEL2(_resizer);
+    DEL2(action);
 }
 /**
     \fn ~ADM_flyDialog
@@ -208,8 +165,6 @@
 */
 ADM_flyDialog::~ADM_flyDialog(void)
 {
-  
-  // FIXME cleanup2();
   cleanup(); 
 }
 
@@ -224,7 +179,6 @@
   uint32_t len,flags;
   
     ADM_assert(_yuvBuffer);
-    ADM_assert(_rgbBufferOut);
     ADM_assert(_in);
 
 
@@ -238,6 +192,22 @@
    return nextImage();
 }
 /**
+    \fn toRgbColor
+*/
+ADM_colorspace ADM_flyDialog::toRgbColor(void)
+{
+    if(isRgbInverted()) return ADM_COLOR_BGR32A;
+    return ADM_COLOR_RGB32A;
+}
+/**
+    \fn sameImage
+*/
+bool ADM_flyDialog::sameImage(void)
+{
+    action->process();
+    return display(_rgbBufferDisplay);
+}
+/**
     \fn nextImage
 */
 bool ADM_flyDialog::nextImage(void)
@@ -249,61 +219,87 @@
       return 0;
     }
     setCurrentPts(_yuvBuffer->Pts);
-    // Process...    
-    if(_isYuvProcessing)
-    {
-        process();
-		copyYuvFinalToRgb();
-    }
-	else // RGB Processing      
-    {
-        ADM_assert(_rgbBuffer);
-		copyYuvScratchToRgb();
-        process();
-    }
-    return display();
+    // Process...   
+    action->process();
+    return display(_rgbBufferDisplay);
 }
-/**
-    \fn    copyYuvFinalToRgb
-    \brief
-*/
-
-void ADM_flyDialog::copyYuvFinalToRgb(void)
+//************************************
+// Implement the specific part
+// i.e. yuv processing or RGB processing
+//************************************
+ADM_flyDialogActionYuv::ADM_flyDialogActionYuv(ADM_flyDialog *p) : 
+                     ADM_flyDialogAction(p)
 {
-	if (_resizeMethod == RESIZE_AUTO || _resizeMethod == RESIZE_LAST)
-		_resizer->resize(_yuvBufferOut, _rgbBufferOut);
-	else
-		_rgb->convertImage(_yuvBufferOut, _rgbBufferOut);
+        _yuvBufferOut=new ADMImageDefault(parent->_w,parent->_h);
+        yuvToRgb=NULL;
+        
 }
-/**
-    \fn    copyYuvScratchToRgb
-    \brief
-*/
-
-void ADM_flyDialog::copyYuvScratchToRgb(void)
+void ADM_flyDialogActionYuv::resetScaler(void)
 {
-	if (_resizeMethod == RESIZE_AUTO)
-		_resizer->resize(_yuvBuffer,_rgbBuffer);
-	else
-		_rgb->convertImage(_yuvBuffer,_rgbBuffer);
+    if(yuvToRgb) delete yuvToRgb;
+    yuvToRgb=new ADMColorScalerFull(ADM_CS_BICUBIC, 
+                            parent->_w,
+                            parent->_h,
+                            parent->_zoomW,
+                            parent->_zoomH,
+                            ADM_COLOR_YV12,parent->toRgbColor());
 }
-/**
-    \fn    copyRgbFinalToDisplay
-    \brief
-*/
-
-void ADM_flyDialog::copyRgbFinalToDisplay(void)
+ADM_flyDialogActionYuv::~ADM_flyDialogActionYuv()
 {
-	if (_resizeMethod == RESIZE_LAST)
-	{
-		_resizer->resize(_rgbBufferOut, _rgbBufferDisplay);
-
-		uint8_t* tempRgb = _rgbBufferDisplay;
-
-		_rgbBufferDisplay = _rgbBufferOut;
-		_rgbBufferOut = tempRgb;
-	}
+    if(_yuvBufferOut) delete _yuvBufferOut;
+    _yuvBufferOut=NULL;
 }
-
+bool ADM_flyDialogActionYuv::process(void)
+{
+        parent-> processYuv(parent->_yuvBuffer,_yuvBufferOut);
+        yuvToRgb->convertImage(_yuvBufferOut,parent->_rgbBufferDisplay);
+        return true;
+}
+//*****************************************
+ADM_flyDialogActionRgb::ADM_flyDialogActionRgb(ADM_flyDialog *p) :  ADM_flyDialogAction(p)
+{
+    uint32_t size=parent->_w*parent->_h*4;
+    _rgbBuffer=new uint8_t [size];
+    _rgbBufferOut=new uint8_t [size];
+     yuv2rgb =new ADMColorScalerSimple(parent->_w,parent->_h,ADM_COLOR_YV12,
+                parent->toRgbColor());
+    rgb2rgb=NULL;
+}
+void ADM_flyDialogActionRgb::resetScaler(void)
+{
+    if(rgb2rgb) delete rgb2rgb;
+    rgb2rgb=new ADMColorScalerFull(ADM_CS_BICUBIC, 
+                            parent->_w,
+                            parent->_h,
+                            parent->_zoomW,
+                            parent->_zoomH,
+                            ADM_COLOR_RGB32A,ADM_COLOR_RGB32A);
+}
+ADM_flyDialogActionRgb::~ADM_flyDialogActionRgb()
+{
+    if(_rgbBuffer) delete [] _rgbBuffer;
+    if(_rgbBufferOut) delete [] _rgbBufferOut;
+    if(rgb2rgb) delete rgb2rgb;
+    if(yuv2rgb) delete yuv2rgb;
+    rgb2rgb=NULL;
+    yuv2rgb=NULL;
+    _rgbBuffer=NULL;
+    _rgbBufferOut=NULL;
+    
+}
+bool ADM_flyDialogActionRgb::process(void)
+{
+    yuv2rgb->convertImage(parent->_yuvBuffer,_rgbBuffer);
+    if (parent->_resizeMethod != RESIZE_NONE)
+    {
+        parent->processRgb(_rgbBuffer,_rgbBufferOut);
+        rgb2rgb->convert(_rgbBufferOut, parent->_rgbBufferDisplay);
+    }else
+    {
+        parent->processRgb(_rgbBuffer,parent->_rgbBufferDisplay);
+    }
+    return true;
+}
+//******************************
 //EOF
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/crop/DIA_flyCrop.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/crop/DIA_flyCrop.cpp	2010-08-15 14:45:46 UTC (rev 6531)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/crop/DIA_flyCrop.cpp	2010-08-15 14:45:49 UTC (rev 6532)
@@ -28,16 +28,15 @@
     \fn process
 	\brief 
 */
-
-uint8_t    flyCrop::process(void)
+uint8_t    flyCrop::processRgb(uint8_t *imageIn, uint8_t *imageOut)
 {
         uint32_t x,y;
         uint8_t  *in;
         uint32_t w=_w,h=_h;
   
         
-        memcpy(_rgbBufferOut,_rgbBuffer,_w*_h*4);
-        in=_rgbBufferOut;
+        memcpy(imageOut,imageIn,_w*_h*4);
+        in=imageOut;
         for(y=0;y<top;y++)
         {
                 for(x=0;x<w;x++)
@@ -52,7 +51,7 @@
                 }
         }
         // bottom
-        in=_rgbBufferOut+(w*4)*(h-bottom);
+        in=imageOut+(w*4)*(h-bottom);
         for(y=0;y<bottom;y++)
         {
                 for(x=0;x<w;x++)
@@ -66,7 +65,7 @@
                 }
         }
         // left
-        in=_rgbBufferOut;
+        in=imageOut;
         uint32_t stride=4*w-4;
         for(y=0;y<h;y++)
         {
@@ -93,7 +92,6 @@
   
         }
 
-		copyRgbFinalToDisplay();
 }
 
 /**
@@ -177,8 +175,7 @@
         top=top & 0xfffe;
         bottom=bottom & 0xfffe;
         upload();
-        process();
-        display();
+        sameImage();
         return 1;
 }
 /**

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/crop/DIA_flyCrop.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/crop/DIA_flyCrop.h	2010-08-15 14:45:46 UTC (rev 6531)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/crop/DIA_flyCrop.h	2010-08-15 14:45:49 UTC (rev 6532)
@@ -6,11 +6,11 @@
   public:
    uint32_t left,right,top,bottom;
   public:
-   uint8_t    process(void);
+   uint8_t    processRgb(uint8_t *imageIn, uint8_t *imageOut);
    uint8_t    download(void);
    uint8_t    upload(void);
    uint8_t    autocrop(void);
-   flyCrop (uint32_t width,uint32_t height,ADM_coreVideoFilter *in,
+              flyCrop (uint32_t width,uint32_t height,ADM_coreVideoFilter *in,
                                     void *canvas, void *slider) : FLY_DIALOG_TYPE(width, height,in,canvas, slider,0,RESIZE_LAST) {};
 };
 #endif

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/crop/gtk/DIA_crop.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/crop/gtk/DIA_crop.cpp	2010-08-15 14:45:46 UTC (rev 6531)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/crop/gtk/DIA_crop.cpp	2010-08-15 14:45:49 UTC (rev 6532)
@@ -124,15 +124,15 @@
 {
   if(lock) return;
   myCrop->download();
-  myCrop->process();
-  myCrop->display();
+  myCrop->sameImage();
+  //myCrop->display();
 }
 /*---------------------------------------------------------------------------
 	Actually draw the working frame on screen
 */
 gboolean ui_draw( void )
 {
-        myCrop->display();
+        myCrop->sameImage();
 }
 void ui_read (void )
 {
@@ -154,9 +154,9 @@
         myCrop->bottom=0;
         myCrop->top=0;
         
-	myCrop->upload();
-        myCrop->process();
-        myCrop->display();
+        myCrop->upload();
+        myCrop->sameImage();
+        //myCrop->display();
 }
 
 /*---------------------------------------------------------------------------

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/crop/qt4/Q_crop.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/crop/qt4/Q_crop.cpp	2010-08-15 14:45:46 UTC (rev 6531)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/crop/qt4/Q_crop.cpp	2010-08-15 14:45:49 UTC (rev 6532)
@@ -82,8 +82,7 @@
   if(lock) return;
   lock++;
   myCrop->download();
-  myCrop->process();
-  myCrop->display();
+  myCrop->sameImage();
   lock--;
 }
 
@@ -101,8 +100,7 @@
          myCrop->top=0;
          lock++;
          myCrop->upload();
-         myCrop->process();
-         myCrop->display();
+         myCrop->sameImage();
          lock--;
 }
 



From mean at mail.berlios.de  Tue Aug 17 07:36:34 2010
From: mean at mail.berlios.de (mean at mail.berlios.de)
Date: Tue, 17 Aug 2010 07:36:34 +0200
Subject: [Avidemux-svn-commit] r6533 - in branches/avidemux_2.6_branch_mean:
	avidemux/qt4/ADM_userInterfaces/ADM_dialog
	avidemux_core/ADM_coreVideoFilter/include
	avidemux_plugins/ADM_videoFilters6
	avidemux_plugins/ADM_videoFilters6/stackField
Message-ID: <20100817053634.A1D5C480C94@sheep.berlios.de>

Author: mean
Date: 2010-08-17 07:36:34 +0200 (Tue, 17 Aug 2010)
New Revision: 6533

Added:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/stackField/
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/stackField/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/stackField/stackField.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/stackField/unstackField.cpp
Modified:
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/DIA_flyPreview.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/include/DIA_flyDialog.h
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/CMakeLists.txt
Log:
[VideoFilters] Add stack/unstack fields

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/DIA_flyPreview.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/DIA_flyPreview.h	2010-08-15 14:45:49 UTC (rev 6532)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/DIA_flyPreview.h	2010-08-17 05:36:34 UTC (rev 6533)
@@ -7,6 +7,7 @@
 	uint8_t download(void) {return 1;}
 	uint8_t upload(void) {return 1;}
 	uint8_t cleanup(void) {return 1;}
+#if 0
 	uint8_t setData(uint8_t *buffer) 
         {
 #warning FIXME  NO DISPLAY   
@@ -14,7 +15,7 @@
             //_rgb->convert(buffer, _rgbBufferOut); 
             return 1;
         }
-
+#endif
 	flyPreview(uint32_t width, uint32_t height, void *canvas) : 
 	  ADM_flyDialogQt4(width, height, NULL, canvas, NULL, true, RESIZE_NONE) 
             {
@@ -46,7 +47,7 @@
 	uint8_t cleanup(void) {return 1;}
     bool    setCurrentPts(uint64_t pts)
             {
-                if(cookieFunc)
+                if(cookieFunc)              // Used as a callback to update timestamp
                     cookieFunc(cookie,pts);
                 return true;
             }

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/include/DIA_flyDialog.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/include/DIA_flyDialog.h	2010-08-15 14:45:49 UTC (rev 6532)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/include/DIA_flyDialog.h	2010-08-17 05:36:34 UTC (rev 6533)
@@ -143,14 +143,14 @@
           void    *_canvas; // Drawing zone
           
   
-  //virtual bool       refresh();
-          /* Filter dependant */
+  
+  /* Filter dependant : you have to implement them*/
   virtual uint8_t    processYuv(ADMImage* in, ADMImage *out) {ADM_assert(0);}
   virtual uint8_t    processRgb(uint8_t *in, uint8_t *out) {ADM_assert(0);}
   virtual uint8_t    download(void)=0;
   virtual uint8_t    upload(void)=0;
   virtual bool       setCurrentPts(uint64_t pts)=0;
-          /* /filter dependant */
+  /* /filter dependant */
   
   
   virtual uint8_t  update(void) {return 1;};
@@ -166,9 +166,7 @@
                              void *canvas, void *slider, int yuv, 
                              ResizeMethod resizeMethod);
   virtual ~ADM_flyDialog(void);
-// UI dependant part
-// They are not defined as pure to avoid unresolved problem, especially on win32.
-// You should never use flyDialog as is, but using the macro to pull flyDialogGtk/flyDialogQt4/... 
+// UI dependant part : They are implemented in ADM_flyDialogGtk/Qt/...
 public:  
   virtual bool     isRgbInverted(void)=0;
   virtual uint8_t  display(uint8_t *rgbData)=0;

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/CMakeLists.txt	2010-08-15 14:45:49 UTC (rev 6532)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/CMakeLists.txt	2010-08-17 05:36:34 UTC (rev 6533)
@@ -9,3 +9,4 @@
 ADD_SUBDIRECTORY(addBorder)
 ADD_SUBDIRECTORY(swapUV)
 ADD_SUBDIRECTORY(resampleFps)
+ADD_SUBDIRECTORY(stackField)

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/stackField/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/stackField/CMakeLists.txt	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/stackField/CMakeLists.txt	2010-08-17 05:36:34 UTC (rev 6533)
@@ -0,0 +1,13 @@
+INCLUDE(vf_plugin)
+
+
+SET(ADM_vf_stackField_SRCS stackField.cpp)
+ADD_VIDEO_FILTER(ADM_vf_stackField ${ADM_vf_stackField_SRCS})
+INIT_VIDEO_FILTER(ADM_vf_stackField)
+INSTALL_VIDEO_FILTER(ADM_vf_stackField)
+
+SET(ADM_vf_unstackField_SRCS unstackField.cpp)
+ADD_VIDEO_FILTER(ADM_vf_unstackField ${ADM_vf_unstackField_SRCS})
+INIT_VIDEO_FILTER(ADM_vf_unstackField)
+INSTALL_VIDEO_FILTER(ADM_vf_unstackField)
+

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/stackField/stackField.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/stackField/stackField.cpp	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/stackField/stackField.cpp	2010-08-17 05:36:34 UTC (rev 6533)
@@ -0,0 +1,127 @@
+/** *************************************************************************
+                    \fn       stackFieldFilter.cpp  
+                    \brief 
+
+    copyright            : (C) 2009 by mean
+
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#include "ADM_default.h"
+#include "ADM_coreVideoFilterInternal.h"
+
+/**
+    \class stackFieldFilter
+*/
+class stackFieldFilter : public  ADM_coreVideoFilter
+{
+protected:
+        ADMImage            *current;
+public:
+                
+                    stackFieldFilter(ADM_coreVideoFilter *previous,CONFcouple *conf);
+                    ~stackFieldFilter();
+
+        virtual const char   *getConfiguration(void);                   /// Return  current configuration as a human readable string
+        virtual bool         getNextFrame(uint32_t *fn,ADMImage *image);    /// Return the next image
+	 //  virtual FilterInfo  *getInfo(void);                             /// Return picture parameters after this filter
+        virtual bool         getCoupledConf(CONFcouple **couples) ;   /// Return the current filter configuration
+        virtual bool         configure(void) {return true;}             /// Start graphical user interface
+};
+
+// Add the hook to make it valid plugin
+DECLARE_VIDEO_FILTER(   stackFieldFilter,   // Class
+                        1,0,0,              // Version
+                        ADM_UI_ALL,         // UI
+                        VF_INTERLACING,            // Category
+                        "stackField",            // internal name (must be uniq!)
+                        "Stack Fields",            // Display name
+                        "Put even lines on top, odd lines at bottom." // Description
+                    );
+
+// Now implements the interesting parts
+/**
+    \fn stackFieldFilter
+    \brief constructor
+*/
+stackFieldFilter::stackFieldFilter(  ADM_coreVideoFilter *in,CONFcouple *setup) : ADM_coreVideoFilter(in,setup)
+{
+UNUSED_ARG(setup);
+
+    // By default the info field contains the output of previous filter
+    // Tweak it here if you change fps, duration, width,...
+    current=new ADMImageDefault(info.width,info.height);
+}
+/**
+    \fn stackFieldFilter
+    \brief destructor
+*/
+stackFieldFilter::~stackFieldFilter()
+{
+   delete current;
+   current=NULL;
+}
+
+/**
+    \fn getFrame
+    \brief Get a processed frame
+*/
+bool stackFieldFilter::getNextFrame(uint32_t *fn,ADMImage *image)
+{
+    // since we do nothing, just get the output of previous filter
+    if(false==previousFilter->getNextFrame(fn,current))
+    {
+        ADM_warning("stackField : Cannot get frame\n");
+        return false;
+    }
+    // do in place flip
+    image->copyInfo(current);
+    for(int i=PLANAR_Y;i<PLANAR_LAST;i++)
+    {
+        ADM_PLANE plane=(ADM_PLANE)i;
+        uint32_t srcPitch=current->GetPitch(plane);
+        uint32_t dstPitch=image->GetPitch(plane);
+        uint8_t  *src=current->GetReadPtr(plane);
+        uint8_t  *dst=image->GetWritePtr(plane);
+        uint32_t w=info.width;
+        uint32_t h=info.height;
+        if(plane)
+                {
+                        w>>=1;
+                        h>>=1;
+                }
+        // Even
+        BitBlit(dst, dstPitch,src,srcPitch*2,w,h/2);
+        BitBlit(dst+(dstPitch*h)/2, dstPitch,src+srcPitch,srcPitch*2,w,h/2);
+        
+    }
+    return true;
+}
+/**
+    \fn getCoupledConf
+    \brief Return our current configuration as couple name=value
+*/
+bool         stackFieldFilter::getCoupledConf(CONFcouple **couples)
+{
+    *couples=new CONFcouple(0); // Even if we dont have configuration we must allocate one 
+    return true;
+}
+/**
+    \fn getConfiguration
+    \brief Return current setting as a string
+*/
+const char *stackFieldFilter::getConfiguration(void)
+{
+    
+    return "Stack Field.";
+}
+// Normally not needed :virtual FilterInfo  *getInfo(void)
+//EOF

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/stackField/unstackField.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/stackField/unstackField.cpp	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/stackField/unstackField.cpp	2010-08-17 05:36:34 UTC (rev 6533)
@@ -0,0 +1,127 @@
+/** *************************************************************************
+                    \fn       unstackFieldFilter.cpp  
+                    \brief 
+
+    copyright            : (C) 2009 by mean
+
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#include "ADM_default.h"
+#include "ADM_coreVideoFilterInternal.h"
+
+/**
+    \class unstackFieldFilter
+*/
+class unstackFieldFilter : public  ADM_coreVideoFilter
+{
+protected:
+        ADMImage            *current;
+public:
+                
+                    unstackFieldFilter(ADM_coreVideoFilter *previous,CONFcouple *conf);
+                    ~unstackFieldFilter();
+
+        virtual const char   *getConfiguration(void);                   /// Return  current configuration as a human readable string
+        virtual bool         getNextFrame(uint32_t *fn,ADMImage *image);    /// Return the next image
+	 //  virtual FilterInfo  *getInfo(void);                             /// Return picture parameters after this filter
+        virtual bool         getCoupledConf(CONFcouple **couples) ;   /// Return the current filter configuration
+        virtual bool         configure(void) {return true;}             /// Start graphical user interface
+};
+
+// Add the hook to make it valid plugin
+DECLARE_VIDEO_FILTER(   unstackFieldFilter,   // Class
+                        1,0,0,              // Version
+                        ADM_UI_ALL,         // UI
+                        VF_INTERLACING,            // Category
+                        "unstackField",            // internal name (must be uniq!)
+                        "Unstack Fields",            // Display name
+                        "Weave top and bottom halves." // Description
+                    );
+
+// Now implements the interesting parts
+/**
+    \fn unstackFieldFilter
+    \brief constructor
+*/
+unstackFieldFilter::unstackFieldFilter(  ADM_coreVideoFilter *in,CONFcouple *setup) : ADM_coreVideoFilter(in,setup)
+{
+UNUSED_ARG(setup);
+
+    // By default the info field contains the output of previous filter
+    // Tweak it here if you change fps, duration, width,...
+    current=new ADMImageDefault(info.width,info.height);
+}
+/**
+    \fn unstackFieldFilter
+    \brief destructor
+*/
+unstackFieldFilter::~unstackFieldFilter()
+{
+   delete current;
+   current=NULL;
+}
+
+/**
+    \fn getFrame
+    \brief Get a processed frame
+*/
+bool unstackFieldFilter::getNextFrame(uint32_t *fn,ADMImage *image)
+{
+    // since we do nothing, just get the output of previous filter
+    if(false==previousFilter->getNextFrame(fn,current))
+    {
+        ADM_warning("unstackField : Cannot get frame\n");
+        return false;
+    }
+    // do in place flip
+    image->copyInfo(current);
+    for(int i=PLANAR_Y;i<PLANAR_LAST;i++)
+    {
+        ADM_PLANE plane=(ADM_PLANE)i;
+        uint32_t srcPitch=current->GetPitch(plane);
+        uint32_t dstPitch=image->GetPitch(plane);
+        uint8_t  *src=current->GetReadPtr(plane);
+        uint8_t  *dst=image->GetWritePtr(plane);
+        uint32_t w=info.width;
+        uint32_t h=info.height;
+        if(plane)
+                {
+                        w>>=1;
+                        h>>=1;
+                }
+        // Even
+        BitBlit(dst, dstPitch*2,src,srcPitch,w,h/2);
+        BitBlit(dst+dstPitch, dstPitch*2,src+(srcPitch*h)/2,srcPitch,w,h/2);
+        
+    }
+    return true;
+}
+/**
+    \fn getCoupledConf
+    \brief Return our current configuration as couple name=value
+*/
+bool         unstackFieldFilter::getCoupledConf(CONFcouple **couples)
+{
+    *couples=new CONFcouple(0); // Even if we dont have configuration we must allocate one 
+    return true;
+}
+/**
+    \fn getConfiguration
+    \brief Return current setting as a string
+*/
+const char *unstackFieldFilter::getConfiguration(void)
+{
+    
+    return "Unstack Field.";
+}
+// Normally not needed :virtual FilterInfo  *getInfo(void)
+//EOF



From mean at mail.berlios.de  Wed Aug 18 21:03:25 2010
From: mean at mail.berlios.de (mean at mail.berlios.de)
Date: Wed, 18 Aug 2010 21:03:25 +0200
Subject: [Avidemux-svn-commit] r6534 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_matroska
Message-ID: <20100818190325.731A44808B3@sheep.berlios.de>

Author: mean
Date: 2010-08-18 21:03:25 +0200 (Wed, 18 Aug 2010)
New Revision: 6534

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_matroska/ADM_mkv.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_matroska/ADM_mkv.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_matroska/ADM_mkvEntries.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_matroska/ADM_mkv_audio.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_matroska/mkv_tagenum.h
Log:
[mkv] add support for stripped/repeat headers, fixes # 106

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_matroska/ADM_mkv.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_matroska/ADM_mkv.cpp	2010-08-17 05:36:34 UTC (rev 6533)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_matroska/ADM_mkv.cpp	2010-08-18 19:03:25 UTC (rev 6534)
@@ -361,9 +361,7 @@
   mkvIndex *dx=&(_tracks[0]._index[framenum]);
 
   _parser->seek(dx->pos);
-  _parser->readBin(img->data,dx->size);
-  img->dataLength=dx->size;
-
+   img->dataLength=readAndRepeat(0,img->data,dx->size);
   img->flags=dx->flags;
 
   if(!framenum) img->flags=AVI_KEY_FRAME;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_matroska/ADM_mkv.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_matroska/ADM_mkv.h	2010-08-17 05:36:34 UTC (rev 6533)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_matroska/ADM_mkv.h	2010-08-18 19:03:25 UTC (rev 6534)
@@ -23,6 +23,7 @@
 #include "ADM_editor/ADM_Video.h"
 #include "ADM_audio/aviaudio.hxx"
 #include "ADM_inputs/ADM_matroska/ADM_ebml.h"
+#define MKV_MAX_REPEAT_HEADER_SIZE 16
 
 
 typedef struct
@@ -46,6 +47,11 @@
   /* Used for both */
   uint8_t    *extraData;
   uint32_t   extraDataLen;
+  /* */
+  uint32_t   headerRepeatSize;
+  uint8_t    headerRepeat[MKV_MAX_REPEAT_HEADER_SIZE];
+
+
   mkvIndex  *_index;
   uint32_t  _nbIndex;  // current size of the index
   uint32_t  _indexMax; // Max size of the index
@@ -73,6 +79,17 @@
     uint8_t                     goToCluster(uint32_t x);
     uint8_t                     getPacket(uint8_t *dest, uint32_t *packlen, uint32_t *samples,uint32_t *timecode);
     uint32_t                    _curTimeCode;
+
+  int                       readAndRepeat(uint8_t *buffer, uint32_t len)
+                            {
+                                 uint32_t rpt=_track->headerRepeatSize;
+                                  _parser->readBin(buffer+rpt,len);
+                                  if(rpt)
+                                    memcpy(buffer,_track->headerRepeat,rpt);
+                                  return len+rpt;
+                            }
+
+
   public:
                                 mkvAudio(const char *name,mkvTrak *track,mkvIndex *clust,uint32_t nbClusters);
 
@@ -125,6 +142,16 @@
     uint32_t                getCurrentAudioStreamNumber(void);
     uint8_t                 getAudioStreamsInfo(uint32_t *nbStreams, audioInfo **infos);
     uint8_t                 rescaleTrack(mkvTrak *track,uint32_t durationMs);
+    int                     readAndRepeat(int index,uint8_t *buffer, uint32_t len)
+                            {
+                                 uint32_t rpt=_tracks[index].headerRepeatSize;
+                                  _parser->readBin(buffer+rpt,len);
+                                  if(rpt)
+                                    memcpy(buffer,_tracks[index].headerRepeat,rpt);
+                                  return len+rpt;
+                            }
+   //__________________________
+
   public:
 
       uint8_t               hasPtsDts(void) {return 1;} // Return 1 if the container gives PTS & DTS info

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_matroska/ADM_mkvEntries.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_matroska/ADM_mkvEntries.cpp	2010-08-17 05:36:34 UTC (rev 6533)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_matroska/ADM_mkvEntries.cpp	2010-08-18 19:03:25 UTC (rev 6534)
@@ -46,6 +46,10 @@
           uint8_t *extraData;
 
           void dump(void);
+          uint32_t   headerRepeatSize;
+          uint8_t    headerRepeat[MKV_MAX_REPEAT_HEADER_SIZE];
+
+
 };
 /* Prototypes */
 static uint8_t entryWalk(ADM_ebml_file *head,uint32_t headlen,entryDesc *entry);
@@ -146,6 +150,13 @@
         _tracks[0].extraData=entry.extraData;
         _tracks[0].extraDataLen=entry.extraDataLen;
         _tracks[0].streamIndex=entry.trackNo;
+         uint32_t hdr=entry.headerRepeatSize;
+        if(hdr)
+        {
+            _tracks[0].headerRepeatSize=entry.headerRepeatSize;
+            memcpy(_tracks[0].headerRepeat,entry.headerRepeat,hdr);
+            printf("video has %d bytes of repeated headers\n",hdr);
+        }
 
         return 1;
       }
@@ -166,6 +177,14 @@
           t->_defaultFrameDuration=entry.defaultDuration;
          else
            t->_defaultFrameDuration=0;
+         uint32_t hdr=entry.headerRepeatSize;
+         if(hdr)
+         {
+            t->headerRepeatSize=entry.headerRepeatSize;
+            memcpy(t->headerRepeat,entry.headerRepeat,hdr);
+         }
+
+
         _nbAudioTrack++;
         return 1;
       }
@@ -196,6 +215,14 @@
       }
       switch(id)
       {
+        case  MKV_CONTENT_COMPRESSION_SETTINGS: 
+#warning todo: check it is stripping
+                    if(len<=MKV_MAX_REPEAT_HEADER_SIZE)
+                    {
+                        father.readBin(entry->headerRepeat,len);
+                        entry->headerRepeatSize=len;
+                    };
+                    break;
 
         case  MKV_TRACK_NUMBER: entry->trackNo=father.readUnsignedInt(len);break;
         case  MKV_TRACK_TYPE: entry->trackType=father.readUnsignedInt(len);break;
@@ -218,6 +245,10 @@
         }
         case  MKV_AUDIO_SETTINGS:
         case  MKV_VIDEO_SETTINGS:
+        case  MKV_CONTENT_ONE_ENCODING:
+        case  MKV_CONTENT_ENCODINGS:
+        case  MKV_CONTENT_COMPRESSION:
+
                   entryWalk(&father,len,entry);
                   break;
         case MKV_CODEC_ID:

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_matroska/ADM_mkv_audio.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_matroska/ADM_mkv_audio.cpp	2010-08-17 05:36:34 UTC (rev 6533)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_matroska/ADM_mkv_audio.cpp	2010-08-18 19:03:25 UTC (rev 6534)
@@ -88,8 +88,9 @@
     // Have we still lace to go ?
     if(_currentLace<_maxLace)
     {
-      _clusterParser->readBin(dest,_Laces[_currentLace]);
-      *packlen= _Laces[_currentLace];
+      
+      *packlen= readAndRepeat(dest, _Laces[_currentLace]);
+
       vprintf("Continuing lacing : %u bytes, lacing %u/%u\n",*packlen,_currentLace,_maxLace);
 
      
@@ -160,9 +161,7 @@
                       case 0 : // no lacing
 
                               vprintf("No lacing :%d bytes\n",remaining);
-                              _clusterParser->readBin(dest,remaining);
-                              *packlen=remaining;
-                              
+                              *packlen= readAndRepeat(dest, remaining);          
                               _currentLace=_maxLace=0;
 
                               return 1;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_matroska/mkv_tagenum.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_matroska/mkv_tagenum.h	2010-08-17 05:36:34 UTC (rev 6533)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_matroska/mkv_tagenum.h	2010-08-18 19:03:25 UTC (rev 6534)
@@ -129,6 +129,14 @@
    MKTAG(MKV_CRC32,0xBF,ADM_MKV_TYPE_BINARY),
    MKTAG(MKV_PREV_SIZE,0xAB,ADM_MKV_TYPE_UINTEGER),
    MKTAG(MKV_POSITION,0xA7,ADM_MKV_TYPE_UINTEGER),
+   //*********** COMPRESSION ETC...**************
+    MKTAG(MKV_CONTENT_ENCODINGS,0x6d80,ADM_MKV_TYPE_CONTAINER),
+    MKTAG(MKV_CONTENT_ONE_ENCODING,0x6240,ADM_MKV_TYPE_CONTAINER),
+    MKTAG(MKV_CONTENT_ENCODING_TYPE,0x5033,ADM_MKV_TYPE_UINTEGER),
+    MKTAG(MKV_CONTENT_COMPRESSION,0x5034,ADM_MKV_TYPE_CONTAINER),
+    MKTAG(MKV_CONTENT_COMPRESSION_ALGO,0x4254,ADM_MKV_TYPE_UINTEGER),
+    MKTAG(MKV_CONTENT_COMPRESSION_SETTINGS,0x4255,ADM_MKV_TYPE_BINARY),
+   //*********** The END.**************
 
          //*************************
    MKTAG(MKV_MAX,0xFFFF,ADM_MKV_TYPE_UNKNOWN)



From mean at mail.berlios.de  Wed Aug 18 21:03:56 2010
From: mean at mail.berlios.de (mean at mail.berlios.de)
Date: Wed, 18 Aug 2010 21:03:56 +0200
Subject: [Avidemux-svn-commit] r6535 -
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Matroska
Message-ID: <20100818190356.72CE64808B3@sheep.berlios.de>

Author: mean
Date: 2010-08-18 21:03:56 +0200 (Wed, 18 Aug 2010)
New Revision: 6535

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Matroska/ADM_mkv.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Matroska/ADM_mkv.h
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Matroska/ADM_mkvEntries.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Matroska/ADM_mkv_audio.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Matroska/mkv_tagenum.h
Log:
[mkv] Support for stripped/repeared headers

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Matroska/ADM_mkv.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Matroska/ADM_mkv.cpp	2010-08-18 19:03:25 UTC (rev 6534)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Matroska/ADM_mkv.cpp	2010-08-18 19:03:56 UTC (rev 6535)
@@ -502,7 +502,7 @@
 uint8_t                 mkvHeader::getFrameSize(uint32_t frame,uint32_t *size)
 {
     if(frame>=_tracks[0].index.size()) return 0;
-    *size=_tracks[0].index[frame].size;
+    *size=_tracks[0].index[frame].size+_tracks[0].headerRepeatSize;
     return 1;
 }
 
@@ -521,10 +521,7 @@
   _parser->seek(dx->pos);
   _parser->readSignedInt(2); // Timecode
   _parser->readu8();  // flags
-
-  _parser->readBin(img->data,dx->size-3);
-  img->dataLength=dx->size-3;
-
+  img->dataLength=readAndRepeat(0,img->data, dx->size-3);
   img->flags=dx->flags;
   img->demuxerDts=dx->Dts;
   img->demuxerPts=dx->Pts;

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Matroska/ADM_mkv.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Matroska/ADM_mkv.h	2010-08-18 19:03:25 UTC (rev 6534)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Matroska/ADM_mkv.h	2010-08-18 19:03:56 UTC (rev 6535)
@@ -26,6 +26,7 @@
 #include "ADM_audioStream.h"
 #include "ADM_ebml.h"
 #include <vector>
+#define MKV_MAX_REPEAT_HEADER_SIZE 16
 /**
     \struct mkvIndex
     \brief defines a frame, audio or video
@@ -58,7 +59,9 @@
   /* Used for both */
   uint8_t    *extraData;
   uint32_t   extraDataLen;
-  
+  /* */
+  uint32_t   headerRepeatSize;
+  uint8_t    headerRepeat[MKV_MAX_REPEAT_HEADER_SIZE];
   mkvListOfIndex  index;
 
   uint32_t  _sizeInBytes; // Approximate size in bytes of that stream
@@ -85,7 +88,15 @@
 
     uint8_t                     goToBlock(uint32_t x);
     bool                        initLaces(uint32_t nbLaces,uint64_t time);
- 
+     int              readAndRepeat(uint8_t *buffer, uint32_t len)
+                        {
+                             uint32_t rpt=_track->headerRepeatSize;
+                              _parser->readBin(buffer+rpt,len);
+                              if(rpt)
+                                memcpy(buffer,_track->headerRepeat,rpt);
+                              return len+rpt;
+                        }
+
 public:
                                   mkvAccess(const char *name,mkvTrak *track);
                 virtual           ~mkvAccess();
@@ -162,6 +173,14 @@
 // AVI io
     virtual uint8_t  open(const char *name);
     virtual uint8_t  close(void) ;
+    int              readAndRepeat(int index,uint8_t *buffer, uint32_t len)
+                        {
+                             uint32_t rpt=_tracks[index].headerRepeatSize;
+                              _parser->readBin(buffer+rpt,len);
+                              if(rpt)
+                                memcpy(buffer,_tracks[index].headerRepeat,rpt);
+                              return len+rpt;
+                        }
   //__________________________
   //  Info
   //__________________________

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Matroska/ADM_mkvEntries.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Matroska/ADM_mkvEntries.cpp	2010-08-18 19:03:25 UTC (rev 6534)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Matroska/ADM_mkvEntries.cpp	2010-08-18 19:03:56 UTC (rev 6535)
@@ -36,8 +36,11 @@
           uint32_t defaultDuration;
           float    trackScale;
           uint8_t *extraData;
+        
+          void dump(void);
+          uint32_t   headerRepeatSize;
+          uint8_t    headerRepeat[MKV_MAX_REPEAT_HEADER_SIZE];
 
-          void dump(void);
 };
 /* Prototypes */
 static uint8_t entryWalk(ADM_ebml_file *head,uint32_t headlen,entryDesc *entry);
@@ -152,6 +155,15 @@
             _tracks[0].extraDataLen=entry.extraDataLen;
         }
         _tracks[0].streamIndex=entry.trackNo;
+        
+        uint32_t hdr=entry.headerRepeatSize;
+        if(hdr)
+        {
+            _tracks[0].headerRepeatSize=entry.headerRepeatSize;
+            memcpy(_tracks[0].headerRepeat,entry.headerRepeat,hdr);
+            ADM_info("video has %d bytes of repeated headers\n",hdr);
+        }
+        
         return 1;
       }
       if(entry.trackType==2 && _nbAudioTrack<ADM_MKV_MAX_TRACKS)
@@ -171,6 +183,13 @@
           t->_defaultFrameDuration=entry.defaultDuration;
          else
            t->_defaultFrameDuration=0;
+        uint32_t hdr=entry.headerRepeatSize;
+        if(hdr)
+        {
+           t->headerRepeatSize=entry.headerRepeatSize;
+            memcpy(t->headerRepeat,entry.headerRepeat,hdr);
+        }
+
         _nbAudioTrack++;
         return 1;
       }
@@ -201,7 +220,14 @@
       }
       switch(id)
       {
-
+        case  MKV_CONTENT_COMPRESSION_SETTINGS: 
+#warning todo: check it is stripping
+                    if(len<=MKV_MAX_REPEAT_HEADER_SIZE)
+                    {
+                        father.readBin(entry->headerRepeat,len);
+                        entry->headerRepeatSize=len;
+                    };
+                    break;
         case  MKV_TRACK_NUMBER: entry->trackNo=father.readUnsignedInt(len);break;
         case  MKV_TRACK_TYPE: entry->trackType=father.readUnsignedInt(len);break;
 
@@ -226,6 +252,9 @@
         }
         case  MKV_AUDIO_SETTINGS:
         case  MKV_VIDEO_SETTINGS:
+        case  MKV_CONTENT_ONE_ENCODING:
+        case  MKV_CONTENT_ENCODINGS:
+        case  MKV_CONTENT_COMPRESSION:
                   entryWalk(&father,len,entry);
                   break;
         case MKV_CODEC_ID:

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Matroska/ADM_mkv_audio.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Matroska/ADM_mkv_audio.cpp	2010-08-18 19:03:25 UTC (rev 6534)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Matroska/ADM_mkv_audio.cpp	2010-08-18 19:03:56 UTC (rev 6535)
@@ -214,13 +214,13 @@
   uint64_t id;
   ADM_MKV_TYPE type;
   const char *ss;
+  
 //  vprintf("Enter: Currently at :%llx\n",_clusterParser->tell());
 
     // Have we still lace to go ?
     if(_currentLace<_maxLace)
     {
-      _parser->readBin(dest,_Laces[_currentLace]);
-      *packlen= _Laces[_currentLace];
+      *packlen= readAndRepeat(dest, _Laces[_currentLace]);
       ADM_assert(*packlen<maxSize);
       vprintf("Continuing lacing : %u bytes, lacing %u/%u\n",*packlen,_currentLace,_maxLace);
       *timecode=_lastDtsBase+_laceIncrementUs*_currentLace;
@@ -248,8 +248,7 @@
               case 0 : // no lacing
 
                       vprintf("No lacing :%d bytes\n",(int)size);
-                      _parser->readBin(dest,size);
-                      *packlen=size;                      
+                      *packlen= readAndRepeat(dest, _Laces[size]);              
                       _currentLace=_maxLace=0;
                       _currentBlock++;
                       return 1;
@@ -274,8 +273,7 @@
                         }
 
                         // The first one has Dts
-                         _parser->readBin(dest,_Laces[0]);
-                        *packlen=_Laces[0];
+                        *packlen= readAndRepeat(dest, _Laces[0]);              
                         _Laces[nbLaces-1]=size;
 
                         initLaces(nbLaces,time);
@@ -294,8 +292,7 @@
                         {
                           _Laces[i]=bsize;
                         }
-                        _parser->readBin(dest,bsize);
-                        *packlen=bsize;
+                        *packlen= readAndRepeat(dest, bsize);              
                         // The first one has Dts
                         initLaces(nbLaces,time);
                        
@@ -333,8 +330,7 @@
                         _Laces[nbLaces-1]=consumed-sum;
 
                           // Take the 1st laces, it has timestamp
-                          _parser->readBin(dest,_Laces[0]);
-                          *packlen= _Laces[0];
+                          *packlen= readAndRepeat(dest, _Laces[0]);              
                           ADM_assert(*packlen<maxSize);
                           vprintf("Continuing lacing : dts : %lu %u bytes, lacing %u/%u\n",time,*packlen,_currentLace,_maxLace);
                           initLaces(nbLaces,time);

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Matroska/mkv_tagenum.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Matroska/mkv_tagenum.h	2010-08-18 19:03:25 UTC (rev 6534)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Matroska/mkv_tagenum.h	2010-08-18 19:03:56 UTC (rev 6535)
@@ -130,7 +130,14 @@
     MKTAG(MKV_CRC32,0xBF,ADM_MKV_TYPE_BINARY),
     MKTAG(MKV_PREV_SIZE,0xAB,ADM_MKV_TYPE_UINTEGER),
     MKTAG(MKV_POSITION,0xA7,ADM_MKV_TYPE_UINTEGER),
-         //*************************
+   //*********** COMPRESSION ETC...**************
+    MKTAG(MKV_CONTENT_ENCODINGS,0x6d80,ADM_MKV_TYPE_CONTAINER),
+    MKTAG(MKV_CONTENT_ONE_ENCODING,0x6240,ADM_MKV_TYPE_CONTAINER),
+    MKTAG(MKV_CONTENT_ENCODING_TYPE,0x5033,ADM_MKV_TYPE_UINTEGER),
+    MKTAG(MKV_CONTENT_COMPRESSION,0x5034,ADM_MKV_TYPE_CONTAINER),
+    MKTAG(MKV_CONTENT_COMPRESSION_ALGO,0x4254,ADM_MKV_TYPE_UINTEGER),
+    MKTAG(MKV_CONTENT_COMPRESSION_SETTINGS,0x4255,ADM_MKV_TYPE_BINARY),
+   //*********** The END.**************
    MKTAG(MKV_MAX,0xFFFF,ADM_MKV_TYPE_UNKNOWN)
 
 #undef MKTAG



From mean at mail.berlios.de  Thu Aug 19 07:59:04 2010
From: mean at mail.berlios.de (mean at mail.berlios.de)
Date: Thu, 19 Aug 2010 07:59:04 +0200
Subject: [Avidemux-svn-commit] r6536 -
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Matroska
Message-ID: <20100819055904.4CDBC480A9F@sheep.berlios.de>

Author: mean
Date: 2010-08-19 07:59:04 +0200 (Thu, 19 Aug 2010)
New Revision: 6536

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Matroska/ADM_mkv_audio.cpp
Log:
[mkv] Use correct lace size

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Matroska/ADM_mkv_audio.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Matroska/ADM_mkv_audio.cpp	2010-08-18 19:03:56 UTC (rev 6535)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Matroska/ADM_mkv_audio.cpp	2010-08-19 05:59:04 UTC (rev 6536)
@@ -248,7 +248,7 @@
               case 0 : // no lacing
 
                       vprintf("No lacing :%d bytes\n",(int)size);
-                      *packlen= readAndRepeat(dest, _Laces[size]);              
+                      *packlen= readAndRepeat(dest,size);              
                       _currentLace=_maxLace=0;
                       _currentBlock++;
                       return 1;



From mean at mail.berlios.de  Sat Aug 21 11:37:27 2010
From: mean at mail.berlios.de (mean at mail.berlios.de)
Date: Sat, 21 Aug 2010 11:37:27 +0200
Subject: [Avidemux-svn-commit] r6537 - in
	branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces:
	. ADM_dialog ADM_filters
Message-ID: <20100821093727.49793480ABA@sheep.berlios.de>

Author: mean
Date: 2010-08-21 11:37:26 +0200 (Sat, 21 Aug 2010)
New Revision: 6537

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_dialog/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_filters/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/CMakeLists.txt
Log:
[Cli ] Build ui specific libs as static like gtk/qt4. Should solve build problem on McAsX

Modified: branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_dialog/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_dialog/CMakeLists.txt	2010-08-19 05:59:04 UTC (rev 6536)
+++ branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_dialog/CMakeLists.txt	2010-08-21 09:37:26 UTC (rev 6537)
@@ -4,4 +4,4 @@
 	alert_none.cpp  DIA_busy.cpp  
         DIA_indexing.cpp  DIA_none.cpp  DIA_working.cpp  OCR_none.cpp)
 
-ADD_LIBRARY(${ADM_LIB} SHARED ${${ADM_LIB}_SRCS})
+ADD_LIBRARY(${ADM_LIB} STATIC ${${ADM_LIB}_SRCS})

Modified: branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_filters/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_filters/CMakeLists.txt	2010-08-19 05:59:04 UTC (rev 6536)
+++ branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_filters/CMakeLists.txt	2010-08-21 09:37:26 UTC (rev 6537)
@@ -3,4 +3,4 @@
 SET(${ADM_LIB}_SRCS 
 	filter_none.cpp)
 
-ADD_LIBRARY(${ADM_LIB} SHARED ${${ADM_LIB}_SRCS})
+ADD_LIBRARY(${ADM_LIB} STATIC ${${ADM_LIB}_SRCS})

Modified: branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/CMakeLists.txt	2010-08-19 05:59:04 UTC (rev 6536)
+++ branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/CMakeLists.txt	2010-08-21 09:37:26 UTC (rev 6537)
@@ -3,4 +3,4 @@
 ADD_SUBDIRECTORY(ADM_filters)
 ADD_SUBDIRECTORY(ADM_gui2)
 ADD_SUBDIRECTORY(ADM_shell)
-ADD_LIBRARY(ADM_toolkitCli6 SHARED ui_support.cpp)
+ADD_LIBRARY(ADM_toolkitCli6 STATIC ui_support.cpp)



From mean at mail.berlios.de  Sat Aug 21 14:22:04 2010
From: mean at mail.berlios.de (mean at mail.berlios.de)
Date: Sat, 21 Aug 2010 14:22:04 +0200
Subject: [Avidemux-svn-commit] r6538 -
	branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_gui2
Message-ID: <20100821122204.3517D480ABA@sheep.berlios.de>

Author: mean
Date: 2010-08-21 14:22:04 +0200 (Sat, 21 Aug 2010)
New Revision: 6538

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_gui2/CMakeLists.txt
Log:
[Cli] Shared->static, take 2

Modified: branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_gui2/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_gui2/CMakeLists.txt	2010-08-21 09:37:26 UTC (rev 6537)
+++ branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_gui2/CMakeLists.txt	2010-08-21 12:22:04 UTC (rev 6538)
@@ -3,4 +3,4 @@
 SET(${ADM_LIB}_SRCS 
 	file_none.cpp  gui_none.cpp  preview_none.cpp)
 
-ADD_LIBRARY(${ADM_LIB} SHARED ${${ADM_LIB}_SRCS})
+ADD_LIBRARY(${ADM_LIB} STATIC ${${ADM_LIB}_SRCS})



From mean at mail.berlios.de  Sun Aug 22 08:27:09 2010
From: mean at mail.berlios.de (mean at mail.berlios.de)
Date: Sun, 22 Aug 2010 08:27:09 +0200
Subject: [Avidemux-svn-commit] r6539 -
	branches/avidemux_2.5_branch_gruntster/po
Message-ID: <20100822062709.313E7480FB4@sheep.berlios.de>

Author: mean
Date: 2010-08-22 08:27:08 +0200 (Sun, 22 Aug 2010)
New Revision: 6539

Modified:
   branches/avidemux_2.5_branch_gruntster/po/hu.po
Log:
[po] Hungarian translation update by alaci

Modified: branches/avidemux_2.5_branch_gruntster/po/hu.po
===================================================================
--- branches/avidemux_2.5_branch_gruntster/po/hu.po	2010-08-21 12:22:04 UTC (rev 6538)
+++ branches/avidemux_2.5_branch_gruntster/po/hu.po	2010-08-22 06:27:08 UTC (rev 6539)
@@ -1,20 +1,24 @@
-# Hungarian translations for PACKAGE package.
+# Translation of Avidemux to Hungarian
 # Copyright (C) 2009 THE PACKAGE'S COPYRIGHT HOLDER
-# This file is distributed under the same license as the PACKAGE package.
-# Laszlo Andrassy <andrassy.laszlo at gmail.com>, 2009.
+# This file is distributed under the same license as the Avidemux package.
+# L?szl? Andr?ssy <andrassy.laszlo at gmail.com>, 2009-2010.
 #
 msgid ""
 msgstr ""
-"Project-Id-Version: Avidemux 2.5+svn_5560\n"
+"Project-Id-Version: Avidemux_SVN_6512\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2010-06-13 21:49+0100\n"
-"PO-Revision-Date: 2009-11-27 17:07+0100\n"
+"POT-Creation-Date: 2010-06-14 19:03+0100\n"
+"PO-Revision-Date: 2010-08-09 08:41+0100\n"
 "Last-Translator: Andr?ssy L?szl? <andrassy.laszlo at gmail.com>\n"
 "Language-Team: Hungarian\n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: 8bit\n"
+"PO-Creation-Date: 2009-10-19 09:25+0100\n"
 "Plural-Forms: nplurals=2; plural=(n != 1);\n"
+"X-Poedit-Language: Hungarian\n"
+"X-Poedit-Country: HUNGARY\n"
+"X-Poedit-SourceCharset: utf-8\n"
 
 #: avidemux/ADM_editor/ADM_outputfmt.h:54
 #: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:369
@@ -24,7 +28,7 @@
 
 #: avidemux/ADM_editor/ADM_outputfmt.h:55
 msgid "AVI, dual audio"
-msgstr "AVI, dual audi?"
+msgstr "AVI, dual hang"
 
 #: avidemux/ADM_editor/ADM_outputfmt.h:56
 msgid "AVI, pack VOP"
@@ -126,7 +130,7 @@
 
 #: avidemux/ADM_audiocodec/ADM_codecwma.cpp:93
 msgid "Cannot open WMA2 codec."
-msgstr "Nem lehet megnyitni a WMA2 kodeket"
+msgstr "Nem lehet megnyitni a WMA2 kodeket."
 
 #: avidemux/ADM_audiofilter/audiofilter_buildchain.cpp:288
 msgid "Codec Error"
@@ -134,23 +138,19 @@
 
 #: avidemux/ADM_audiofilter/audiofilter_buildchain.cpp:288
 msgid ""
-"The number of channels is greater than what the selected audio codec can "
-"do.\n"
+"The number of channels is greater than what the selected audio codec can do.\n"
 "Either change codec or use the mixer filter to have less channels."
 msgstr ""
-"A csatorn?k sz?ma nagyobb mint amit a kiv?lasztott audi? kodek t?mogat.\n"
-"V?lasszon m?s kodek-et vagy haszn?lja a mixer sz?r?t a kevesebb csatorna "
-"?rdek?ben."
+"A csatorn?k sz?ma nagyobb mint amit a kiv?lasztott hangkodek t?mogat.\n"
+"V?lasszon m?s kodek-et vagy haszn?lja a mixer sz?r?t a kevesebb csatorna ?rdek?ben."
 
 #: avidemux/ADM_audiofilter/audiofilter_buildchain.cpp:300
 msgid "[BuildChain] Encoder initialization failed"
 msgstr "[BuildChain] k?dol? inicializ?l?sa sikertelen"
 
 #: avidemux/ADM_audiofilter/audiofilter_buildchain.cpp:300
-msgid ""
-"Not activated, make sure number of channels and bitrate are compatible with "
-"encoder!"
-msgstr ""
+msgid "Not activated, make sure number of channels and bitrate are compatible with encoder!"
+msgstr "Nem aktiv?lhat?. Gy?z?dj?n meg r?la, hogy a csatorn?k sz?ma ?s a bitsebess?g kompatibilis-e a k?dol?val!"
 
 #: avidemux/ADM_codecs/ADM_ffmp43.cpp:44
 msgid "Internal error finding codec"
@@ -168,12 +168,14 @@
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:227
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:234
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:243
-#: avidemux/gtk_gui.cpp:944 avidemux/gtk_gui.cpp:1554
+#: avidemux/gtk_gui.cpp:944
+#: avidemux/gtk_gui.cpp:1554
 #: avidemux/gtk_gui.cpp:2688
 msgid "File error"
 msgstr "F?jl hiba"
 
-#: avidemux/ADM_coreUI/src/DIA_fileSel.cpp:127 avidemux/gtk_gui.cpp:941
+#: avidemux/ADM_coreUI/src/DIA_fileSel.cpp:127
+#: avidemux/gtk_gui.cpp:941
 #, c-format
 msgid "Cannot open \"%s\"."
 msgstr "A f?jl \"%s\" megnyit?sa sikertelen."
@@ -192,7 +194,7 @@
 #: avidemux/ADM_coreUI/src/DIA_fileSel.cpp:167
 #: avidemux/ADM_coreUI/src/DIA_fileSel.cpp:181
 msgid "It is possible that you are trying to overwrite an input file!"
-msgstr "Lehet, hogy bemeneti f?jlt pr?b?l fel?l?rni!"
+msgstr "Lehet, hogy egy bemeneti f?jlt pr?b?l fel?l?rni!"
 
 #: avidemux/ADM_coreUI/src/DIA_fileSel.cpp:192
 msgid "Cannot write the file"
@@ -217,7 +219,7 @@
 
 #: avidemux/ADM_editor/ADM_edFrameType.cpp:91
 msgid "Rebuilding Frames"
-msgstr "Frame-ek ?jra?p?t?se"
+msgstr "K?pkock?k ?jra?p?t?se"
 
 #: avidemux/ADM_editor/ADM_edFrameType.cpp:127
 msgid "Aborted"
@@ -225,48 +227,41 @@
 
 #: avidemux/ADM_editor/ADM_edit.cpp:71
 msgid ""
-"Avidemux detected VBR MP3 audio in this file. For keeping audio/video in "
-"sync, time map is needed. Build it now?\n"
+"Avidemux detected VBR MP3 audio in this file. For keeping audio/video in sync, time map is needed. Build it now?\n"
 "\n"
 "You can do it later with \"Audio -> Build VBR Time Map\"."
 msgstr ""
-"Az Avidemux, VBR MP3 audi?t ?szlelt a f?jlban. Az audi?/vide? "
-"szinkronfenntart?sa ?rdek?ben sz?ks?g van id?t?rk?pre.\n"
+"Az Avidemux, VBR MP3 hangs?vot ?szlelt a f?jlban. Az hang/k?p szinkronfenntart?sa ?rdek?ben sz?ks?g van id?t?rk?pre.\n"
 "Megcsin?lja most?\n"
-"K?s?bb is megteheti ebben a men?pontban: \"Audio -> VBR id?t?rk?p k?sz?t?se"
-"\"."
+"K?s?bb is megteheti ebben a men?pontban: \"Audio -> VBR id?t?rk?p k?sz?t?se\"."
 
 #: avidemux/ADM_editor/ADM_edit.cpp:419
 msgid "File type identified but no loader support detected..."
-msgstr "A f?jl t?pusa azonos?tva, de nincs el?rhet? bet?lt? t?mogat?s"
+msgstr "A f?jl t?pusa azonos?tva, de nincs el?rhet? bet?lt? t?mogat?s..."
 
 #: avidemux/ADM_editor/ADM_edit.cpp:420
 msgid "May be related to an old index file."
-msgstr "?sszef?gg?sbe hozhat? egy r?gi index f?jl-al"
+msgstr "?sszef?gg?sbe hozhat? egy r?gi index f?jl-al."
 
 #: avidemux/ADM_editor/ADM_edit.cpp:427
 #, c-format
 msgid "Attempt to open %s failed!"
-msgstr "A %s f?jl megnyit?si k?s?rlete sikertelen"
+msgstr "A %s f?jl megnyit?si k?s?rlete sikertelen!"
 
 #: avidemux/ADM_editor/ADM_edit.cpp:443
 msgid "Video dimensions don't match."
-msgstr "A vide? m?retei nem egyeznek"
+msgstr "A vide? m?retei nem egyeznek."
 
 #: avidemux/ADM_editor/ADM_edit.cpp:443
 msgid ""
-"You cannot mix different video dimensions yet. Using the partial video "
-"filter later will not work around this problem. The workaround is:\n"
+"You cannot mix different video dimensions yet. Using the partial video filter later will not work around this problem. The workaround is:\n"
 "\n"
-"1) \"Resize\" / \"Add Border\" / \"Crop\" each stream to the same "
-"resolution\n"
+"1) \"Resize\" / \"Add Border\" / \"Crop\" each stream to the same resolution\n"
 "2) Concatenate them together"
 msgstr ""
-"Egyel?re a k?l?nb?z? vide? m?reteket nem lehet keverni. A r?szleges vide? "
-"sz?r? haszn?lata nem megold?s erre a probl?m?ra. A megold?s a k?vetkez?:\n"
+"Egyel?re a k?l?nb?z? vide? m?reteket nem lehet keverni. A r?szleges vide? sz?r? haszn?lata nem megold?s erre a probl?m?ra. A megold?s a k?vetkez?:\n"
 "\n"
-"1) \"?tm?retez?s\"/ \" Keret hozz?ad?sa\"/ \" V?g?s \" minden stream "
-"ugyanazzal a felbont?ssal\n"
+"1) \"?tm?retez?s\"/ \" Keret hozz?ad?sa\"/ \" V?g?s \" minden m?sor ugyanazzal a felbont?ssal\n"
 "2) ?sszef?zni ?ket"
 
 #: avidemux/ADM_editor/ADM_edit.cpp:555
@@ -287,16 +282,12 @@
 
 #: avidemux/ADM_editor/ADM_edit.cpp:589
 msgid ""
-"If the file is using B-frames as reference it can lead to a crash or "
-"stuttering.\n"
-"Avidemux can use another mode which is safe but YOU WILL LOSE FRAME "
-"ACCURACY.\n"
+"If the file is using B-frames as reference it can lead to a crash or stuttering.\n"
+"Avidemux can use another mode which is safe but YOU WILL LOSE FRAME ACCURACY.\n"
 "Do you want to use that mode?"
 msgstr ""
-"Ha a f?jl B-frame-et haszn?l referenciak?nt, az ?sszeoml?shoz vagy "
-"akadoz?shoz vezethet.\n"
-"Az Avidemux haszn?lhat m?s m?dot is, amely biztons?gos de elvesz?ti a frame-"
-"ek pontoss?g?t.\n"
+"Ha a f?jl B-k?pkock?kat haszn?l referenciak?nt, az ?sszeoml?shoz vagy akadoz?shoz vezethet.\n"
+"Az Avidemux haszn?lhat m?s m?dot is, amely biztons?gos de elvesz?ti a k?pkock?k pontoss?g?t.\n"
 "Szeretn?, hogy haszn?lja ezt a m?dot?"
 
 #: avidemux/ADM_editor/ADM_edit.cpp:719
@@ -313,7 +304,7 @@
 
 #: avidemux/ADM_editor/ADM_edit.cpp:740
 msgid "Using backup decoder - not frame accurate."
-msgstr "A biztons?gi m?solat dek?der haszn?lata - nem frame pontos."
+msgstr "A biztons?gi m?solat dek?der haszn?lata - nem k?pkocka pontos."
 
 #: avidemux/ADM_editor/ADM_edit.cpp:744
 msgid "Weird"
@@ -330,7 +321,7 @@
 #: avidemux/ADM_editor/ADM_edit.cpp:757
 msgid "You should use Tool->Rebuild frame. Do it now ?"
 msgstr ""
-"?rdemes haszn?lni az Eszk?z?k->Frame-ek ?jra?p?t?se men?pontot.\n"
+"?rdemes haszn?lni az Eszk?z?k->K?pkock?k ?jra?p?t?se men?pontot.\n"
 "Elind?tja most?"
 
 #: avidemux/ADM_editor/ADM_edit.cpp:1526
@@ -339,7 +330,7 @@
 " Do you want to index it?"
 msgstr ""
 "A f?jl, MPEG stream.\n"
-"K?sz?t hozz? indexet?"
+" K?sz?t hozz? indexet?"
 
 #: avidemux/ADM_editor/ADM_edit.cpp:1578
 msgid "Indexing failed"
@@ -355,7 +346,7 @@
 
 #: avidemux/ADM_editor/ADM_edLoadSave.cpp:323
 msgid "No more supported."
-msgstr "M?r nem t?mogatott"
+msgstr "M?r nem t?mogatott."
 
 #: avidemux/ADM_encoder/adm_encRequant.cpp:93
 msgid "Requant"
@@ -367,7 +358,7 @@
 
 #: avidemux/ADM_filter/filter_declaration.cpp:46
 msgid "Embed VobSub subtitles into picture."
-msgstr "Be?gyazott VobSub felirat a k?pben"
+msgstr "Be?gyazott VobSub felirat a k?pben."
 
 #: avidemux/ADM_filter/filter_declaration.cpp:47
 msgid "DVB sub"
@@ -382,12 +373,8 @@
 msgstr "?tlagsz?m?t?s"
 
 #: avidemux/ADM_filter/filter_declaration.cpp:50
-msgid ""
-"Compute average luma value for each pixel throughout all frames, and save to "
-"file"
-msgstr ""
-"Sz?moljon ?tlagos luma ?rt?ket minden pixel-re az ?sszes frame-en, ?s mentse "
-"f?jlba"
+msgid "Compute average luma value for each pixel throughout all frames, and save to file"
+msgstr "Sz?moljon ?tlagos f?nyess?g (luma) ?rt?ket minden pixel-re az ?sszes k?pkock?n, ?s mentse f?jlba"
 
 #: avidemux/ADM_filter/filter_declaration.cpp:51
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:395
@@ -397,8 +384,7 @@
 
 #: avidemux/ADM_filter/filter_declaration.cpp:51
 msgid "Force too-bright/too-dim pixels to 0 and the rest to 255 or vice-versa"
-msgstr ""
-"T?l vil?gos/t?l s?t?t pixeleket 0-ra, a t?bbit 255-re m?dos?tja vagy ford?tva"
+msgstr "T?l vil?gos/t?l s?t?t pixeleket 0-ra, a t?bbit 255-re m?dos?tja vagy ford?tva"
 
 #: avidemux/ADM_filter/filter_declaration.cpp:52
 msgid "Particle List"
@@ -414,7 +400,7 @@
 
 #: avidemux/ADM_filter/filter_declaration.cpp:53
 msgid "\"Erase\" arbitrary areas of each frame"
-msgstr "Minden frame tetsz?leges ter?let?nek 't?rl?se'"
+msgstr "Minden k?pkocka tetsz?leges ter?let?nek 't?rl?se'"
 
 #: avidemux/ADM_filter/filter_declaration.cpp:54
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1084
@@ -422,12 +408,8 @@
 msgstr "Sv?jci bicska"
 
 #: avidemux/ADM_filter/filter_declaration.cpp:54
-msgid ""
-"Apply operation like P'=P*A, P-A, P+A, etc. using a convolution, rolling "
-"average, image from file, or constant"
-msgstr ""
-"M?velet alkalmaz?sa, mint P '= P * A, PA, P + A, stb. konvol?ci? "
-"seg?ts?g?vel, mozg? ?tlag, k?p <- f?jlb?l, vagy ?lland?"
+msgid "Apply operation like P'=P*A, P-A, P+A, etc. using a convolution, rolling average, image from file, or constant"
+msgstr "M?velet alkalmaz?sa, mint P '= P * A, PA, P + A, stb. konvol?ci? seg?ts?g?vel, mozg? ?tlag, k?p <- f?jlb?l, vagy ?lland?"
 
 #: avidemux/ADM_filter/filter_declaration.cpp:57
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_partial.cpp:109
@@ -437,11 +419,11 @@
 
 #: avidemux/ADM_filter/filter_declaration.cpp:58
 msgid "Add Framenumber"
-msgstr "Frame sorsz?m hozz?ad?sa"
+msgstr "K?pkocka sorsz?m hozz?ad?sa"
 
 #: avidemux/ADM_filter/filter_declaration.cpp:58
 msgid "Print frame number directly in image"
-msgstr "Frame sorsz?m k?zvetlen megjelen?t?se a k?pben"
+msgstr "K?pkocka sorsz?m k?zvetlen megjelen?t?se a k?pben"
 
 #: avidemux/ADM_filter/filter_saveload.cpp:149
 msgid "Problem reading XML filters"
@@ -461,7 +443,7 @@
 
 #: avidemux/ADM_filter/filter_saveload.cpp:281
 msgid "Node not found"
-msgstr "A node nem tal?lhat?"
+msgstr "A csom?pont nem tal?lhat?"
 
 #: avidemux/ADM_inputs/ADM_h263/ADM_h263.cpp:256
 msgid "Size is not (s)QCIF"
@@ -506,11 +488,11 @@
 
 #: avidemux/ADM_inputs/ADM_nuv/ADM_nuv.cpp:754
 msgid "Size mismatch"
-msgstr "M?ret elt?r?s"
+msgstr "M?retelt?r?s"
 
 #: avidemux/ADM_inputs/ADM_nuv/ADM_nuv.cpp:754
 msgid "Expect a crash."
-msgstr "?sszeoml?s v?rhat?"
+msgstr "?sszeoml?s v?rhat?."
 
 #: avidemux/ADM_inputs/ADM_nuv/ADM_nuv.cpp:1046
 msgid "Do you want to save an index ?"
@@ -522,7 +504,7 @@
 
 #: avidemux/ADM_inputs/ADM_ogm/ADM_ogm.cpp:420
 msgid "Scanning OGM"
-msgstr "IGM vizsg?lata"
+msgstr "OGM vizsg?lata"
 
 #: avidemux/ADM_inputs/ADM_openDML/ADM_openDML.cpp:270
 #: avidemux/ADM_inputs/ADM_openDML/ADM_openDML.cpp:352
@@ -540,11 +522,11 @@
 
 #: avidemux/ADM_libraries/ADM_lvemux/ADM_muxer.cpp:75
 msgid "Incompatible audio"
-msgstr "Nem kompatibilis audi?"
+msgstr "Nem kompatibilis hangs?v"
 
 #: avidemux/ADM_libraries/ADM_lvemux/ADM_muxer.cpp:75
 msgid "For DVD, audio must be MP2 or AC3."
-msgstr "DVD-n?l az audi? MP2 vagy AC3 lehet."
+msgstr "DVD-n?l a hangs?v MP2 vagy AC3 lehet."
 
 #: avidemux/ADM_libraries/ADM_lvemux/ADM_muxer.cpp:82
 msgid "lvemux init failed"
@@ -614,7 +596,8 @@
 msgid "Could not open \"%s\" for writing."
 msgstr "A f?jlt \"%s\" nem lehet ?r?sra megnyitni."
 
-#: avidemux/ADM_ocr/ADM_ocrEngine.cpp:83 avidemux/ADM_ocr/ADM_ocrEngine.cpp:89
+#: avidemux/ADM_ocr/ADM_ocrEngine.cpp:83
+#: avidemux/ADM_ocr/ADM_ocrEngine.cpp:89
 msgid "Input file error"
 msgstr "Bemeneti f?jl hiba"
 
@@ -624,7 +607,7 @@
 
 #: avidemux/ADM_ocr/ADM_ocrEngine.cpp:89
 msgid "Bitmap source failed"
-msgstr "Bitmap forr?s sikertelen"
+msgstr "Bitk?p forr?s sikertelen"
 
 #: avidemux/ADM_ocr/ADM_ocrEngine.cpp:97
 msgid "Problem loading sub"
@@ -677,28 +660,28 @@
 "(Ez k?s?bb minden esetben t?r?lve lesz. Ha meg akarja tartani, mentenie kell)"
 
 #: avidemux/ADM_osSupport/ADM_misc.cpp:17
-#, fuzzy, c-format
+#, c-format
 msgid "%u minutes"
-msgstr "%lu perc"
+msgstr "%u perc"
 
 #: avidemux/ADM_osSupport/ADM_misc.cpp:21
-#, fuzzy, c-format
+#, c-format
 msgid "%u minute"
-msgstr "%lu perc"
+msgstr "%u perc"
 
 #: avidemux/ADM_osSupport/ADM_misc.cpp:29
-#, fuzzy, c-format
+#, c-format
 msgid "%u second"
-msgstr "%lu m?sodperc"
+msgstr "%u m?sodperc"
 
 #: avidemux/ADM_osSupport/ADM_misc.cpp:33
-#, fuzzy, c-format
+#, c-format
 msgid "%u seconds"
-msgstr "%lu m?sodperc"
+msgstr "%u m?sodperc"
 
 #: avidemux/ADM_outputs/ADM_lavformat.cpp:373
 msgid "Incompatible frame rate"
-msgstr "Nem kompatibilis frame-r?ta"
+msgstr "Nem kompatibilis k?pkockasebess?g"
 
 #: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:63
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:216
@@ -708,35 +691,35 @@
 
 #: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:64
 msgid "Mux every N video frames"
-msgstr "Minden N-edik vide? frame multiplexel?se"
+msgstr "Minden N-edik vide? k?pkocka egyes?t?se"
 
 #: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:65
 msgid "Mux by packet size"
-msgstr "Multiplexel?s csomagm?ret alapj?n"
+msgstr "Egyes?t?s csomagm?ret alapj?n"
 
 #: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:68
 msgid "Muxing _type:"
-msgstr "Multiplexel?s _t?pusa:"
+msgstr "Egyes?t?s _t?pusa:"
 
 #: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:69
 msgid "_Split every MB:"
-msgstr "Feloszt?s az al?bbi m?retre (MB) :"
+msgstr "Feloszt?s az al?bbi m?retre (MB):"
 
 #: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:71
 msgid "Mux _every x video frames:"
-msgstr "Minden X-edik vide? frame multiplexel?se"
+msgstr "Minden X-edik vide? k?pkocka egyes?t?se:"
 
 #: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:72
 msgid "Mux in _blocks of x bytes:"
-msgstr "Multiplexel?s x b?jtos blokkokban"
+msgstr "Egyes?t?s x b?jtos blokkokban:"
 
 #: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:79
 msgid "AVI Muxer Options"
-msgstr "AVI Multiplexer be?ll?t?sa"
+msgstr "AVI Muxer be?ll?t?sa"
 
 #: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:178
 msgid "Error initalizing audio filters"
-msgstr "Az audi? sz?r? aktiv?l?sa nem siker?lt"
+msgstr "A hangsz?r? aktiv?l?sa nem siker?lt"
 
 #: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:187
 msgid "Error initalizing video filters"
@@ -755,7 +738,8 @@
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:555
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:570
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:206
-#: avidemux/gtk_gui.cpp:2057 avidemux/gtk_gui.cpp:2156
+#: avidemux/gtk_gui.cpp:2057
+#: avidemux/gtk_gui.cpp:2156
 #: plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/h263Encoder.cpp:197
 #: plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg4aspEncoder.cpp:197
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1182
@@ -766,7 +750,7 @@
 #: plugins/ADM_videoFilters/Rotate/ADM_vidRotate.cpp:260
 #: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:94
 msgid "None"
-msgstr "Nincs"
+msgstr "Nincs v?ltoztat?s"
 
 #: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:446
 #: avidemux/ADM_outputs/oplug_avi/op_avisavecopy.cpp:89
@@ -821,9 +805,8 @@
 msgstr "AMR-NB"
 
 #: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:497
-#, fuzzy
 msgid "AMR-WB"
-msgstr "AMR-NB"
+msgstr "AMR-WB"
 
 #: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:498
 msgid "MSADPCM"
@@ -901,13 +884,13 @@
 #: avidemux/ADM_outputs/oplug_avi/op_savesmart.cpp:91
 #: avidemux/gui_savenew.cpp:341
 msgid "Smart Copy"
-msgstr "Intelligens m?sol?s"
+msgstr "Gyorsm?sol?s"
 
 #: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:124
 #: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:172
 #: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:140
 msgid "Cannot initialize the video stream"
-msgstr "A vide? stream-et nem lehet inicializ?lni"
+msgstr "A vide?folyamot nem lehet inicializ?lni"
 
 #: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:129
 msgid "Dummy"
@@ -928,7 +911,7 @@
 #: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:304
 #: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:456
 msgid "KeyFrame error"
-msgstr "KeyFrame hiba"
+msgstr "Kulcsk?pkocka hiba"
 
 #: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:202
 #: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:318
@@ -938,7 +921,7 @@
 "The beginning frame is not a key frame.\n"
 "Please move the A marker."
 msgstr ""
-"A kezd? frame nem keyframe.\n"
+"A kezd? k?pkocka nem kulcsk?pkocka.\n"
 "Helyezze ?t az ?A? jelz?t."
 
 #: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:134
@@ -952,20 +935,20 @@
 #: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:156
 #: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:161
 msgid "Unsupported audio"
-msgstr "Nem t?mogatott audi?"
+msgstr "Nem t?mogatott hangs?v"
 
 #: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:156
 msgid "Audio must be mp3 for flv output."
-msgstr "Flv kimenetn?l az audi?nak MP3-nak kell lennie"
+msgstr "Flv kimenetn?l a hangs?vnak MP3-nak kell lennie."
 
 #: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:161
 msgid "Frequency must be 44100, 22050 or 11025 Hz."
-msgstr "A frekvenci?nak 44100, 22500 vagy 11025Hz-nek kell lennie"
+msgstr "A frekvenci?nak 44100, 22500 vagy 11025Hz-nek kell lennie."
 
 #: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:215
 #: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:211
 msgid "Cannot initialize the audio stream"
-msgstr "Az audi? stream inicializ?l?sa sikertelen"
+msgstr "Az hangfolyam inicializ?l?sa sikertelen"
 
 #: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:115
 msgid "PSP"
@@ -973,7 +956,7 @@
 
 #: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:229
 msgid "Invalid audio stream detected"
-msgstr "?rv?nytelen audi? stream"
+msgstr "?rv?nytelen hangfolyam"
 
 #: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:229
 msgid ""
@@ -981,7 +964,7 @@
 "\n"
 "Continue anyway?"
 msgstr ""
-"Az audi? stream ?rv?nytelen ebben a t?rol? form?tumban.\n"
+"A hangfolyam ?rv?nytelen ebben a t?rol? form?tumban.\n"
 "\n"
 "Mindenk?ppen folytatja?"
 
@@ -991,32 +974,30 @@
 
 #: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:79
 msgid "You can't use the Copy codec."
-msgstr "Nem haszn?lhat \"M?sol?s\" kodeket"
+msgstr "Nem haszn?lhat \"M?sol?s\" kodeket."
 
 #: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:84
 #: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:113
 #: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:124
 msgid "There is no audio track"
-msgstr "Ez nem audi? s?v"
+msgstr "Ez nem hangs?v"
 
 #: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:91
 msgid "The first frame is not intra frame"
-msgstr "Az els? frame nem intra frame."
+msgstr "Az els? k?pkocka nem intra k?pkocka"
 
 #: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:91
 msgid "Use the &lt;&lt; and the &gt;&gt; buttons to move using Intra frames."
-msgstr ""
-"Haszn?lja az &lt;&lt; ?s a &gt;&gt; gombokat az intra frame-ek mozgat?s?hoz."
+msgstr "Haszn?lja az &lt;&lt; ?s a &gt;&gt; gombokat az intra k?pkock?k mozgat?s?hoz."
 
 #: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:103
 #: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:134
 msgid "Audio track is not suitable"
-msgstr "Az audi? s?v nem megfelel?"
+msgstr "Az hangs?v nem megfelel?"
 
 #: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:135
 msgid "For DVD, audio must be 48 kHz MP2(stereo), AC3, DTS or LPCM (stereo)."
-msgstr ""
-"DVD audi?nak 48kHz-es sztere? MP2-nek, AC3-nak vagy LPCM-nek kell lennie."
+msgstr "A DVD hangs?vnak 48kHz-es MP2-nek (sztere?), AC3-nak, DTS-nek vagy LPCM-nek (sztere?) kell lennie."
 
 #: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:174
 msgid "---"
@@ -1044,16 +1025,15 @@
 
 #: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:147
 msgid "For VCD, audio must be 44.1 kHz MP2."
-msgstr "VCD audi?nak 44.1kHz-es MP2-nek kell lennie."
+msgstr "A VCD hangs?vnak 44.1kHz-es MP2-nek kell lennie."
 
 #: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:159
-#, fuzzy
 msgid "For SVCD, audio must be 44.1 kHz MP2."
-msgstr "VCD audi?nak 44.1kHz-es MP2-nek kell lennie."
+msgstr "A SVCD hangs?vnak 44.1kHz-es MP2-nek kell lennie."
 
 #: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:171
 msgid "For DVD, audio must be 48 kHz MP2, AC3 or LPCM."
-msgstr "DVD audi?nak 48kHz-es MP2-nek, AC3-nak vagy LPCM-nek kell lennie."
+msgstr "A DVD hangs?vnak 48kHz-es MP2-nek, AC3-nak vagy LPCM-nek kell lennie."
 
 #: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:211
 msgid "MPEG Requantizer"
@@ -1068,7 +1048,8 @@
 msgstr "Menet 1/2"
 
 #: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:326
-#: avidemux/ADM_outputs/oplug_ogm/op_ogsave.cpp:101 avidemux/gtk_gui.cpp:1554
+#: avidemux/ADM_outputs/oplug_ogm/op_ogsave.cpp:101
+#: avidemux/gtk_gui.cpp:1554
 #: avidemux/gtk_gui.cpp:2688
 #, c-format
 msgid "Cannot open \"%s\" for writing."
@@ -1084,7 +1065,7 @@
 
 #: avidemux/ADM_outputs/oplug_ogm/op_ogsave.cpp:123
 msgid "Could not initialize audio"
-msgstr "Az audi? inicializ?l?sa sikertelen"
+msgstr "Az hang inicializ?l?sa sikertelen"
 
 #: avidemux/ADM_outputs/oplug_ogm/op_ogsavecopy.cpp:56
 msgid "Saving..."
@@ -1112,7 +1093,7 @@
 
 #: avidemux/ADM_script/ADM_JSFunctions.cpp:529
 msgid "Float"
-msgstr "Float"
+msgstr "Lebeg?pontos sz?m"
 
 #: avidemux/ADM_script/ADM_JSFunctions.cpp:547
 msgid "Toggle"
@@ -1158,11 +1139,11 @@
 #: avidemux/ADM_UIs/ADM_GTK/src/FAC_bitrate.cpp:282
 #: plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/flv1Encoder.cpp:89
 msgid "_Bitrate (kb/s):"
-msgstr "_Bitr?ta (kb/s):"
+msgstr "_Bitsebess?g (kb/s):"
 
 #: avidemux/ADM_UIs/ADM_GTK/src/FAC_bitrate.cpp:167
 msgid "Single pass - bitrate"
-msgstr "Egymenetes - bitr?ta"
+msgstr "Egymenetes - bitsebess?g"
 
 #: avidemux/ADM_UIs/ADM_GTK/src/FAC_bitrate.cpp:169
 msgid "Single pass - constant quality"
@@ -1173,36 +1154,33 @@
 msgstr "Egymenetes - ugyanaz a qz mint az inputn?l"
 
 #: avidemux/ADM_UIs/ADM_GTK/src/FAC_bitrate.cpp:173
-#, fuzzy
 msgid "Single pass - Average quantiser"
-msgstr "Egymenetes - ?tlagos quantizer"
+msgstr "Egymenetes - ?tlagos kvant?l?s"
 
 #: avidemux/ADM_UIs/ADM_GTK/src/FAC_bitrate.cpp:176
 msgid "Two pass - video size"
-msgstr "K?tmenetes - video m?ret"
+msgstr "K?tmenetes - vide? m?ret"
 
 #: avidemux/ADM_UIs/ADM_GTK/src/FAC_bitrate.cpp:178
 msgid "Two pass - average bitrate"
-msgstr "K?tmenetes - ?tlagos bitr?ta"
+msgstr "K?tmenetes - ?tlagos bitsebess?g"
 
 #: avidemux/ADM_UIs/ADM_GTK/src/FAC_bitrate.cpp:287
 #: plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mjpegEncoder.cpp:85
-#, fuzzy
 msgid "_Quantiser:"
-msgstr "Quantiser:"
+msgstr "_Kvant?l?:"
 
 #: avidemux/ADM_UIs/ADM_GTK/src/FAC_bitrate.cpp:292
-#, fuzzy
 msgid "A_vg Quantiser:"
-msgstr "?_tl Quantizer:"
+msgstr "?_tl kvant?l?s:"
 
 #: avidemux/ADM_UIs/ADM_GTK/src/FAC_bitrate.cpp:297
 msgid "_Video size (MB):"
-msgstr "_Video m?ret (MB):"
+msgstr "_Vide? m?ret (MB):"
 
 #: avidemux/ADM_UIs/ADM_GTK/src/FAC_bitrate.cpp:302
 msgid "_Average bitrate (kb/s):"
-msgstr "?tlagos _bitr?ta (kb/s):"
+msgstr "?tlagos _bitsebess?g (kb/s):"
 
 #: avidemux/ADM_UIs/ADM_GTK/src/FAC_bitrate.cpp:307
 msgid "-"
@@ -1228,14 +1206,12 @@
 msgstr "Biztos, hogy t?rli a kiv?lasztott be?ll?t?st?"
 
 #: avidemux/ADM_UIs/ADM_GTK/src/FAC_configMenu.cpp:302
-#, fuzzy
 msgid "Configuration:"
-msgstr "FLV1 be?ll?t?sok"
+msgstr "Be?ll?t?sok:"
 
 #: avidemux/ADM_UIs/ADM_GTK/src/FAC_configMenu.cpp:316
-#, fuzzy
 msgid "Delete"
-msgstr "T?r?lt"
+msgstr "T?rl?s"
 
 #: avidemux/ADM_UIs/ADM_GTK/src/FAC_hex.cpp:106
 #: avidemux/ADM_UIs/ADM_GTK/src/FAC_hex.cpp:140
@@ -1263,7 +1239,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:48
 msgid "_Dynamic range compression"
-msgstr "_Dynamic range compression"
+msgstr "_Dinamikus s?vt?m?r?t?s"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:50
 msgid "_Time shift (ms):"
@@ -1271,15 +1247,15 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:50
 msgid "Time shift value (ms)"
-msgstr "Id?eltol?s m?rt?ke (ms):"
+msgstr "Id?eltol?s m?rt?ke (ms)"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:58
 msgid "R_esampling (Hz):"
-msgstr "R_esampling (Hz):"
+msgstr "?_jra-mintav?telez?s (Hz):"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:58
 msgid "Resampling frequency (Hz)"
-msgstr "Resampling frekvencia (Hz)"
+msgstr "?jra-mintav?telez?si frekvencia (Hz)"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:67
 msgid "Film to PAL"
@@ -1291,7 +1267,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:71
 msgid "_Frame rate change:"
-msgstr "_Frame-r?ta csere:"
+msgstr "_K?pkockasebess?g csere:"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:76
 msgid "Automatic (max -3 dB)"
@@ -1303,20 +1279,20 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:79
 msgid "_Gain mode:"
-msgstr "_Gain m?d:"
+msgstr "_Er?s?t?s m?d:"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:81
 msgid "G_ain value:"
-msgstr "G_ain ?rt?ke:"
+msgstr "E_r?s?t?s ?rt?ke:"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:83
 #: plugins/ADM_videoFilters/colorYUV/gtk/DIA_coloryuv.cpp:184
 msgid "Gain"
-msgstr "Gain"
+msgstr "Er?s?t?s"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:88
 msgid "No change"
-msgstr "Nincs csere"
+msgstr "Nincs v?ltoztat?s"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:89
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:87
@@ -1371,7 +1347,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:105
 msgid "Audio Filters"
-msgstr "Audi? sz?r?k"
+msgstr "Hangsz?r?k"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp:55
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp:124
@@ -1380,31 +1356,31 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp:210
 msgid "Max. bitrate:"
-msgstr "Max. bitr?ta:"
+msgstr "Max. bitsebess?g:"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp:211
 msgid "Average bitrate:"
-msgstr "?tlagos bitr?ta:"
+msgstr "?tlagos bitsebess?g:"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp:212
 msgid "Number of I frames:"
-msgstr "I frame-ek sz?ma:"
+msgstr "I k?pkock?k sz?ma:"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp:213
 msgid "Number of P frames:"
-msgstr "P frame-ek sz?ma:"
+msgstr "P k?pkock?k sz?ma:"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp:214
 msgid "Number of B frames:"
-msgstr "B frame-ek sz?ma:"
+msgstr "B k?pkock?k sz?ma:"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp:215
 msgid "Max. B frames:"
-msgstr "Max. B frame-ek:"
+msgstr "Max. B k?pkock?k:"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp:228
 msgid "Bitrate Histogram"
-msgstr "Bitr?ta hisztogram"
+msgstr "Bitsebess?g hisztogram"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:80
 msgid "Fontconfig"
@@ -1461,11 +1437,11 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_gototime.cpp:11
 msgid "_Seconds:"
-msgstr "_M?sodpercek"
+msgstr "_M?sodpercek:"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_gototime.cpp:14
 msgid "Go to Time"
-msgstr "Id?pontra ug?s"
+msgstr "Id?pontra ugr?s"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_jobs_save.cpp:7
 msgid "_Job name:"
@@ -1477,7 +1453,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_jobs_save.cpp:8
 msgid "Select Video To Write"
-msgstr "Video kijel?l?se ?r?sra"
+msgstr "Vide? kijel?l?se ?r?sra"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_jobs_save.cpp:11
 msgid "Save Job"
@@ -1490,7 +1466,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavDecoder.cpp:28
 msgid "Show motion _vectors"
-msgstr "Motion vektorok megjelen?t?se"
+msgstr "Mozg?svektorok megjelen?t?se"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavDecoder.cpp:30
 msgid "Decoder Options"
@@ -1578,40 +1554,40 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_plugins.cpp:45
 msgid "Audio Plugins"
-msgstr "Audi? sz?r?k"
+msgstr "Hangb?vitm?nyek"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_plugins.cpp:68
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:320
 msgid "Audio"
-msgstr "Audi?"
+msgstr "Hang"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_plugins.cpp:74
 msgid "Video Encoder Plugins"
-msgstr "Vide?-k?dol? plugin-ok"
+msgstr "Vide?-k?dol? b?v?tm?nyek"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_plugins.cpp:98
 msgid "Video Encoder"
-msgstr "Vide?-k?d?l?"
+msgstr "Vide?-k?d?l?k"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_plugins.cpp:103
 msgid "Audio Device Plugins"
-msgstr "Audi? eszk?z plugin-ok"
+msgstr "Hangeszk?z b?v?tm?nyek"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_plugins.cpp:125
 msgid "Audio Device"
-msgstr "Audi? eszk?z"
+msgstr "Hangeszk?z"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_plugins.cpp:132
 msgid "Audio Encoder Plugins"
-msgstr "Audi?-k?dol? plugin-ok"
+msgstr "Hang-k?dol? b?v?tm?nyek"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_plugins.cpp:154
 msgid "Audio Encoders"
-msgstr "Audi?-k?d?l?"
+msgstr "Hang-k?d?l?k"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_plugins.cpp:161
 msgid "Plugins Info"
-msgstr "Plugin inf?"
+msgstr "B?v?tm?ny inf?"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp:21
 #: plugins/ADM_videoFilters/ForcedPP/ADM_vidForcedPP.cpp:44
@@ -1622,13 +1598,13 @@
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:287
 #: plugins/ADM_videoFilters/ForcedPP/ADM_vidForcedPP.cpp:56
 msgid "_Horizontal deblocking"
-msgstr "_V?zszintes deblocking"
+msgstr "_V?zszintes blokkbont?s"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp:33
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:288
 #: plugins/ADM_videoFilters/ForcedPP/ADM_vidForcedPP.cpp:57
 msgid "_Vertical deblocking"
-msgstr "_F?gg?leges deblocking"
+msgstr "_F?gg?leges blokkbont?s"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp:34
 #: plugins/ADM_videoFilters/ForcedPP/ADM_vidForcedPP.cpp:58
@@ -1645,7 +1621,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:167
 msgid "_Accept non-standard audio frequency for DVD"
-msgstr "Nem sz_abv?nyos DVD audi? frekvencia elfogad?sa"
+msgstr "Nem sz_abv?nyos DVD hangs?v frekvencia elfogad?sa"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:168
 msgid "Create _OpenDML files"
@@ -1661,7 +1637,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:171
 msgid "_Disable NUV audio sync"
-msgstr "NUV au_di? szinkron tilt?sa"
+msgstr "NUV ha_ngszinkron tilt?sa"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:173
 msgid "Automatically _build VBR map"
@@ -1747,11 +1723,11 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:221
 msgid "_Indexing/unpacking priority:"
-msgstr "_Indexel?si/kicsomagol?si priorit?s"
+msgstr "_Indexel?si/kicsomagol?si priorit?s:"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:222
 msgid "_Playback priority:"
-msgstr "_Visszaj?tsz?si priorit?s"
+msgstr "_Visszaj?tsz?si priorit?s:"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:224
 msgid "Prioritisation"
@@ -1799,7 +1775,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:259
 msgid "Master"
-msgstr "Master"
+msgstr "Els?dleges"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:260
 msgid "_Volume control:"
@@ -1823,7 +1799,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:284
 msgid "_AudioDevice"
-msgstr "_Audi?eszk?z"
+msgstr "_Hangeszk?z"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:289
 msgid "De_ringing"
@@ -1837,7 +1813,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:291
 msgid "Default Postprocessing"
-msgstr "Alap?rtelmezet ut?munk?latok"
+msgstr "Alap?rtelmezett ut?munk?latok"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:298
 msgid "Use _Global GlyphSet"
@@ -1888,7 +1864,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_requant.cpp:35
 msgid "Requant Configuration"
-msgstr "Requant be?ll?t?sok"
+msgstr "Requant be?ll?t?sa"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:35
 msgid "_VOB file(s):"
@@ -1904,7 +1880,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:36
 msgid "Select IFO file"
-msgstr "IFO f?jl kiv?lasz?sa"
+msgstr "IFO f?jl kiv?laszt?sa"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:37
 msgid "VobSub file:"
@@ -1912,11 +1888,11 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:37
 msgid "Select VobSub file"
-msgstr "VobSub f?jl kiv?laszt?sa:"
+msgstr "VobSub f?jl kiv?laszt?sa"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:42
 msgid "VOB to VobSub"
-msgstr "VOB VobSub-ba"
+msgstr "VOB -> VobSub"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:46
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:51
@@ -1925,15 +1901,15 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:56
 msgid "Please select a correct VobSub path/dir"
-msgstr "A megfelel? VobSub ?tvonal/k?nyvt?r kiv?laszt?sa"
+msgstr "V?lassza ki a megfelel? VobSub ?tvonalat/k?nyvt?rat"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_about.cpp:33
 msgid "and all the others."
-msgstr "?s minden egy?b"
+msgstr "?s minden egy?b."
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_about.cpp:56
 msgid "Multi-platform Video Editor"
-msgstr "T?bb-plattformos Vide? Szerkeszt?"
+msgstr "Multi-platformos Vide? Szerkeszt?"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_about.cpp:57
 msgid ""
@@ -1945,8 +1921,7 @@
 "\t\t       Version 2, June 1991\n"
 "\n"
 " Copyright (C) 1989, 1991 Free Software Foundation, Inc.\n"
-"                       51 Franklin St, Fifth Floor, Boston, MA  02110-1301  "
-"USA\n"
+"                       51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA\n"
 " Everyone is permitted to copy and distribute verbatim copies\n"
 " of this license document, but changing it is not allowed.\n"
 "\n"
@@ -2081,8 +2056,7 @@
 "\n"
 "    a) Accompany it with the complete corresponding machine-readable\n"
 "    source code, which must be distributed under the terms of Sections\n"
-"    1 and 2 above on a medium customarily used for software interchange; "
-"or,\n"
+"    1 and 2 above on a medium customarily used for software interchange; or,\n"
 "\n"
 "    b) Accompany it with a written offer, valid for at least three\n"
 "    years, to give any third party, for a charge no more than your\n"
@@ -2189,8 +2163,7 @@
 "later version\", you have the option of following the terms and conditions\n"
 "either of that version or of any later version published by the Free\n"
 "Software Foundation.  If the Program does not specify a version number of\n"
-"this License, you may choose any version ever published by the Free "
-"Software\n"
+"this License, you may choose any version ever published by the Free Software\n"
 "Foundation.\n"
 "\n"
 "  10. If you wish to incorporate parts of the Program into other free\n"
@@ -2206,8 +2179,7 @@
 "  11. BECAUSE THE PROGRAM IS LICENSED FREE OF CHARGE, THERE IS NO WARRANTY\n"
 "FOR THE PROGRAM, TO THE EXTENT PERMITTED BY APPLICABLE LAW.  EXCEPT WHEN\n"
 "OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR OTHER PARTIES\n"
-"PROVIDE THE PROGRAM \"AS IS\" WITHOUT WARRANTY OF ANY KIND, EITHER "
-"EXPRESSED\n"
+"PROVIDE THE PROGRAM \"AS IS\" WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESSED\n"
 "OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF\n"
 "MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  THE ENTIRE RISK AS\n"
 "TO THE QUALITY AND PERFORMANCE OF THE PROGRAM IS WITH YOU.  SHOULD THE\n"
@@ -2252,8 +2224,7 @@
 "\n"
 "    You should have received a copy of the GNU General Public License\n"
 "    along with this program; if not, write to the Free Software\n"
-"    Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  "
-"USA\n"
+"    Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA\n"
 "\n"
 "\n"
 "Also add information on how to contact you by electronic and paper mail.\n"
@@ -2262,8 +2233,7 @@
 "when it starts in an interactive mode:\n"
 "\n"
 "    Gnomovision version 69, Copyright (C) year name of author\n"
-"    Gnomovision comes with ABSOLUTELY NO WARRANTY; for details type `show "
-"w'.\n"
+"    Gnomovision comes with ABSOLUTELY NO WARRANTY; for details type `show w'.\n"
 "    This is free software, and you are welcome to redistribute it\n"
 "    under certain conditions; type `show c' for details.\n"
 "\n"
@@ -2296,8 +2266,7 @@
 "\t\t       Version 2, June 1991\n"
 "\n"
 " Copyright (C) 1989, 1991 Free Software Foundation, Inc.\n"
-"                       51 Franklin St, Fifth Floor, Boston, MA  02110-1301  "
-"USA\n"
+"                       51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA\n"
 " Everyone is permitted to copy and distribute verbatim copies\n"
 " of this license document, but changing it is not allowed.\n"
 "\n"
@@ -2432,8 +2401,7 @@
 "\n"
 "    a) Accompany it with the complete corresponding machine-readable\n"
 "    source code, which must be distributed under the terms of Sections\n"
-"    1 and 2 above on a medium customarily used for software interchange; "
-"or,\n"
+"    1 and 2 above on a medium customarily used for software interchange; or,\n"
 "\n"
 "    b) Accompany it with a written offer, valid for at least three\n"
 "    years, to give any third party, for a charge no more than your\n"
@@ -2540,8 +2508,7 @@
 "later version\", you have the option of following the terms and conditions\n"
 "either of that version or of any later version published by the Free\n"
 "Software Foundation.  If the Program does not specify a version number of\n"
-"this License, you may choose any version ever published by the Free "
-"Software\n"
+"this License, you may choose any version ever published by the Free Software\n"
 "Foundation.\n"
 "\n"
 "  10. If you wish to incorporate parts of the Program into other free\n"
@@ -2557,8 +2524,7 @@
 "  11. BECAUSE THE PROGRAM IS LICENSED FREE OF CHARGE, THERE IS NO WARRANTY\n"
 "FOR THE PROGRAM, TO THE EXTENT PERMITTED BY APPLICABLE LAW.  EXCEPT WHEN\n"
 "OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR OTHER PARTIES\n"
-"PROVIDE THE PROGRAM \"AS IS\" WITHOUT WARRANTY OF ANY KIND, EITHER "
-"EXPRESSED\n"
+"PROVIDE THE PROGRAM \"AS IS\" WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESSED\n"
 "OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF\n"
 "MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  THE ENTIRE RISK AS\n"
 "TO THE QUALITY AND PERFORMANCE OF THE PROGRAM IS WITH YOU.  SHOULD THE\n"
@@ -2603,8 +2569,7 @@
 "\n"
 "    You should have received a copy of the GNU General Public License\n"
 "    along with this program; if not, write to the Free Software\n"
-"    Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  "
-"USA\n"
+"    Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA\n"
 "\n"
 "\n"
 "Also add information on how to contact you by electronic and paper mail.\n"
@@ -2613,8 +2578,7 @@
 "when it starts in an interactive mode:\n"
 "\n"
 "    Gnomovision version 69, Copyright (C) year name of author\n"
-"    Gnomovision comes with ABSOLUTELY NO WARRANTY; for details type `show "
-"w'.\n"
+"    Gnomovision comes with ABSOLUTELY NO WARRANTY; for details type `show w'.\n"
 "    This is free software, and you are welcome to redistribute it\n"
 "    under certain conditions; type `show c' for details.\n"
 "\n"
@@ -2641,11 +2605,11 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_about.cpp:62
 msgid "translator-credits"
-msgstr "Andr?ssy L?szl? <andrassy.laszlo at gmail.com>, 2009"
+msgstr "Andr?ssy L?szl? <andrassy.laszlo at gmail.com>, 2009-2010"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_acodec.cpp:104
 msgid "AudioCodec"
-msgstr "Audi? Kodek"
+msgstr "Hang-Kodek"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_acodec.cpp:132
 msgid "Configure codec"
@@ -2731,7 +2695,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:564
 msgid "Audio bitrate in kb/s for track 1 (0 for no audio)"
-msgstr "Audi? bitr?ta kb/mp-ben -> s?v 1 (0 - nincs audi?)"
+msgstr "Hang bitsebess?g kb/mp-ben -> s?v 1 (0 - nincs hang)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:571
 msgid "Track _2: "
@@ -2739,15 +2703,15 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:579
 msgid "Audio bitrate in kb/s for track 2 (optional)"
-msgstr "Audi? bitr?ta kb/mp-ben -> s?v 2 (opcion?lis)"
+msgstr "Hang bitsebess?g kb/mp-ben -> s?v 2 (opcion?lis)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:583
 msgid "<b>Audio Bitrate</b>"
-msgstr "<b>Audi? bitr?ta</b>"
+msgstr "<b>Hang bitsebess?g</b>"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:609
 msgid "Audio size (MB):"
-msgstr "Audi? m?ret (MB):"
+msgstr "Hangs?v m?ret (MB):"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:617
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:633
@@ -2782,7 +2746,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:663
 msgid "Video bitrate:"
-msgstr "Vide? bitr?ta:"
+msgstr "Vide? bitsebess?g:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:671
 msgid "Bits per pixel:"
@@ -2799,12 +2763,12 @@
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:148
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:170
 msgid "Privileges Required"
-msgstr "Enged?ly sz?ks?ges"
+msgstr "Jogosults?g sz?ks?ges"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:148
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:170
 msgid "Root privileges are required to perform this operation."
-msgstr "Root jog sz?ks?ges a m?velet v?grehajt?s?hoz."
+msgstr "Root jogosults?g sz?ks?ges a m?velet v?grehajt?s?hoz."
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:191
 msgid "Shutting down"
@@ -2837,7 +2801,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:562
 msgid "<b>Audio Codec:</b>"
-msgstr "<b>Audi? Kodek:</b>"
+msgstr "<b>Hang Kodek:</b>"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:577
 msgid "<b>Container:</b>"
@@ -2845,19 +2809,19 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:609
 msgid "<b>Processed Frames:</b>"
-msgstr "<b>Feldolgozott frame-ek:</b>"
+msgstr "<b>Feldolgozott k?pkock?k:</b>"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:617
 msgid "<b>Total Frames:</b>"
-msgstr "<b>?sszes frame:</b>"
+msgstr "<b>?sszes k?pkocka:</b>"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:625
 msgid "<b>Quantiser:</b>"
-msgstr "<b>Quantiser:</b>"
+msgstr "<b>Kvant?l?:</b>"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:633
 msgid "<b>Average Bitrate:</b>"
-msgstr "<b>?tlagos bitr?ta:</b>"
+msgstr "<b>?tlagos bitsebess?g:</b>"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:641
 msgid "0 kB/s"
@@ -2869,7 +2833,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:694
 msgid "<b>Audio Size:</b>"
-msgstr "<b>Audi? m?ret:</b>"
+msgstr "<b>Hangs?v m?ret:</b>"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:702
 msgid "<b>Total Size:</b>"
@@ -2892,7 +2856,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:767
 msgid "<b>Frames/sec:</b>"
-msgstr "<b>Frame/mp:</b>"
+msgstr "<b>K?pkocka/mp:</b>"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:813
 msgid "Shut down computer when finished"
@@ -2915,14 +2879,12 @@
 msgstr "Sz?net / Megszak?t"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eraser.cpp:815
-#, fuzzy
 msgid "First Frame"
-msgstr "El_s? frame"
+msgstr "Els? k?pkocka"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eraser.cpp:820
-#, fuzzy
 msgid "Last Frame"
-msgstr "Uto_ls? frame"
+msgstr "Utols? k?pkocka"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eraser.cpp:1181
 #: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:257
@@ -2930,12 +2892,10 @@
 msgstr "T?rl? be?ll?t?sa"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eraser.cpp:1212
-#, fuzzy
 msgid "Brush _Mode:  "
 msgstr "Ecset _M?d:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eraser.cpp:1224
-#, fuzzy
 msgid "Brush _Size:  "
 msgstr "Ecset _m?rete:"
 
@@ -2950,63 +2910,50 @@
 msgstr "A_datf?jl t?rl?:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eraser.cpp:1269
-msgid ""
-"File in which eraser mask information (the list below and the pixels erased "
-"for each range) will be stored"
-msgstr ""
+msgid "File in which eraser mask information (the list below and the pixels erased for each range) will be stored"
+msgstr "A f?jl amelyikben a t?rl?si maszk inform?ci? van (az al?bbi lista, ?s az ?sszes tartom?nyb?l t?r?lt pixelek) t?rolva lesz"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eraser.cpp:1285
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:699
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1537
-#, fuzzy
 msgid "_Debugging settings (bits):   "
-msgstr "Hibakeres?si be?ll?t?sok (bits):   "
+msgstr "Hibakeres?si be?ll?t?sok (bitek):   "
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eraser.cpp:1303
-#, fuzzy
 msgid "_First frame:   "
-msgstr "Els? frame"
+msgstr "_Els? k?pkocka:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eraser.cpp:1311
-msgid ""
-"First frame to which currently selected eraser mask applies; 0 means first "
-"frame of video"
-msgstr ""
+msgid "First frame to which currently selected eraser mask applies; 0 means first frame of video"
+msgstr "Els? k?pkocka, amelyre a jelenleg kiv?lasztott t?rl? maszk ?rv?nyes; 0 - a vide? els? k?pkock?ja"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eraser.cpp:1318
-#, fuzzy
 msgid "_Last frame:   "
-msgstr "Utols? frame"
+msgstr "_Utols? k?pkocka:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eraser.cpp:1326
-msgid ""
-"Last frame to which currently selected eraser mask applies; use e.g. "
-"99999999 to represent the last frame of video"
-msgstr ""
+msgid "Last frame to which currently selected eraser mask applies; use e.g. 99999999 to represent the last frame of video"
+msgstr "Utols? k?pkocka, amelyre a jelenleg kiv?lasztott t?rl? maszk ?rv?nyes; 99999999 - a vide? utols? k?pkock?ja"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eraser.cpp:1351
 msgid "Duplicate"
-msgstr ""
+msgstr "Kett?z?s"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eraser.cpp:1355
-msgid ""
-"Make a copy of the currently selected eraser mask and insert it as the "
-"following row"
-msgstr ""
+msgid "Make a copy of the currently selected eraser mask and insert it as the following row"
+msgstr "M?solat k?sz?t?se a jelenleg kiv?lasztott t?rl? maszkr?l ?s besz?r?sa a k?vetkez? sorba"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eraser.cpp:1372
-#, fuzzy
 msgid "Last Frame in Range"
-msgstr "Uto_ls? frame"
+msgstr "Utols? k?pkocka a tartom?nyban"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eraser.cpp:1377
-#, fuzzy
 msgid "First Frame in Range"
-msgstr "El_s? frame"
+msgstr "Els? k?pkocka a tartom?nyban"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eraser.cpp:1382
 msgid "Jump to:  "
-msgstr ""
+msgstr "Ugr?s a(z):"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eraser.cpp:1418
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:745
@@ -3214,11 +3161,11 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_partial.cpp:123
 msgid "Start frame for partial :"
-msgstr "Kezd? frame :"
+msgstr "Kezd? k?pkocka :"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_partial.cpp:130
 msgid "End frame for partial :"
-msgstr "Utols? frame :"
+msgstr "Utols? k?pkocka :"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_partial.cpp:153
 msgid "Configure partialized filter"
@@ -3229,41 +3176,34 @@
 msgstr "R?szecske-elemz?si konfigur?ci?"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:536
-#, fuzzy
 msgid "Particle Detection"
-msgstr "Elemek list?ja"
+msgstr "Elemek felismer?se"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:563
-#, fuzzy
 msgid "Mi_nimum area for a particle to be detected:    "
-msgstr "Mi_nimum ter?let egy r?szecske ?rz?kel?se sz?m?ra"
+msgstr "Mi_nimum ter?let egy r?szecske ?rz?kel?se sz?m?ra:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:577
-#, fuzzy
 msgid "Ma_ximum area for a particle to be detected:   "
-msgstr "Ma_ximum ter?let egy r?szecske ?rz?kel?se sz?m?ra"
+msgstr "Ma_ximum ter?let egy r?szecske ?rz?kel?se sz?m?ra:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:595
-#, fuzzy
 msgid "_Left side crop (ignore this many pixels on the left):        "
-msgstr "Ba_l oldali v?g?s (r?szecsk?ket mell?zi):"
+msgstr "Ba_l oldali v?g?s (pixelek kihagy?sa a bal oldalon):"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:609
-#, fuzzy
 msgid "_Right side crop (ignore this many pixels on the right):     "
-msgstr "_Jobb oldali v?g?s (r?szecsk?ket mell?zi):"
+msgstr "_Jobb oldali v?g?s (pixelek kihagy?sa a jobb oldalon):"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:623
 msgid "_Top crop (ignore this many pixels on the top):                  "
-msgstr ""
+msgstr "_Fels? v?g?s (pixelek kihagy?sa fels? r?szen)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:637
-#, fuzzy
 msgid "_Bottom crop (ignore this many pixels on the bottom):   "
-msgstr "_Als? oldali v?g?s (r?szecsk?ket mell?zi):"
+msgstr "Als? v?g?s (pixelek kihagy?sa az als? r?szen):"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:655
-#, fuzzy
 msgid "Output _Format:   "
 msgstr "Kimeneti _Form?tum:"
 
@@ -3275,7 +3215,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:685
 msgid "_Camera Number for output file:      "
-msgstr ""
+msgstr "_Kamera sz?ma a kimeneti f?jlhoz:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_pause.cpp:76
 msgid "Paused"
@@ -3320,7 +3260,7 @@
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:53
 #, c-format
 msgid "%ld frames"
-msgstr "%ld frame"
+msgstr "%ld k?pkocka"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:63
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:113
@@ -3354,11 +3294,11 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:214
 msgid "Frame Rate:"
-msgstr "Frame-r?ta:"
+msgstr "K?pkockasebess?g:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:221
 msgid "Frame Count:"
-msgstr "Frame mennyis?g:"
+msgstr "K?pkocka mennyis?g:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:228
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:406
@@ -3384,7 +3324,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:317
 msgid "Global Motion Compensation:"
-msgstr "Global Motion Compensation (GMC):"
+msgstr "Glob?lis mozg?skompenz?ci? (GMC):"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:331
 msgid "Packed Bitstream:"
@@ -3392,7 +3332,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:345
 msgid "Quarter Pixel:"
-msgstr "Quarter Pixel:"
+msgstr "Negyed Pixel:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:359
 msgid "<b>Extra Video Properties</b>"
@@ -3409,7 +3349,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:392
 msgid "Bitrate:"
-msgstr "Bitr?ta:"
+msgstr "Bitsebess?g:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:399
 msgid "Frequency:"
@@ -3421,12 +3361,12 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:462
 msgid "Variable Bitrate:"
-msgstr "V?ltoz? bitr?ta"
+msgstr "V?ltoz? bitsebess?g:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:476
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1064
 msgid "<b>Audio</b>"
-msgstr "<b>Audi?</b>"
+msgstr "<b>Hang</b>"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_quota.cpp:70
 msgid "Filesystem full / quota exceeded"
@@ -3521,13 +3461,13 @@
 #: plugins/ADM_videoFilters/AvisynthResize/gtk/gtk_resize.cpp:442
 #: plugins/ADM_videoFilters/MplayerResize/gtk/gtk_resize.cpp:442
 msgid "Bilinear"
-msgstr "Bilinear"
+msgstr "Biline?ris"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:451
 #: plugins/ADM_videoFilters/AvisynthResize/gtk/gtk_resize.cpp:446
 #: plugins/ADM_videoFilters/MplayerResize/gtk/gtk_resize.cpp:446
 msgid "Bicubic"
-msgstr "Bicubic"
+msgstr "Bikubikus"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:455
 #: plugins/ADM_videoFilters/AvisynthResize/gtk/gtk_resize.cpp:450
@@ -3541,138 +3481,125 @@
 msgstr "Sv?jci bicska be?ll?t?sa"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1111
-#, fuzzy
 msgid "Select _Operation on each pixel P and input A:   "
-msgstr "M?velet _kiv?laszt?sa minden P pixelen ?s A: bemeneten"
+msgstr "M?velet _kiv?laszt?sa minden P pixelen ?s A bemeneten:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1123
-#, fuzzy
 msgid "Input _Type:   "
-msgstr "Bemenet t?pusa:"
+msgstr "Bemenet _t?pusa:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1142
-#, fuzzy
 msgid "Input _File (convolution kernel):   "
-msgstr "Bemeneti _F?jl (k?p vagy konvol?ci?s kernel):"
+msgstr "Bemeneti _F?jl (konvol?ci?s kernel):"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1146
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1161
-#, fuzzy
 msgid "Select Convolution Kernel File"
-msgstr "Felirat f?jl kiv?laszt?sa"
+msgstr "Konvol?ci?s Kernel f?jl kiv?laszt?sa"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1157
-#, fuzzy
 msgid "Input _File (image file):   "
-msgstr "Bemeneti _F?jl (k?p vagy konvol?ci?s kernel):"
+msgstr "Bemeneti _F?jl (k?pf?jl):"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1183
 msgid "First, _add to each float pixel value:   "
-msgstr ""
+msgstr "El?sz?r, minden lebeg?pontos pixel ?rt?k megad?sa:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1197
 msgid "Then, _multiply each float pixel value by:   "
-msgstr ""
+msgstr "Azut?n, minden lebeg?pontos pixel ?rt?k szorz?sa ezzel:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1211
 msgid "Mi_nimum loaded pixel value (will be scaled to 0):"
-msgstr ""
+msgstr "Mi_nimum bet?lt?tt pixel ?rt?k (0-ig lesz sk?l?zva):"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1237
 msgid "Ma_ximum loaded pixel value (will be scaled to 255):"
-msgstr ""
+msgstr "Ma_ximum bet?lt?tt pixel ?rt?k (255-ig lesz sk?l?zva):"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1259
 msgid "Pixel Value Scaling as Image File is Loaded"
-msgstr ""
+msgstr "Pixel ?rt?k m?retez?s k?pf?jl bet?lt?sekor"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1271
-#, fuzzy
 msgid "Input _Constant:      "
 msgstr "Bemeneti ?lland?:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1288
 msgid "Memory constant _alpha:   "
-msgstr ""
+msgstr "Mem?ria ?lland? _alfa:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1298
-#, fuzzy
 msgid " = 1 / "
-msgstr "P' = P / A"
+msgstr " = 1 / "
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1312
-#, fuzzy
 msgid "_Look ahead "
-msgstr "_N frame el?olvas?sa:"
+msgstr "_El?olvas?s "
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1323
 msgid " frames.  (Anything > 0 will be slower.)"
-msgstr ""
+msgstr " k?pkock?k. (B?rmi > 0 lassabb lesz.)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1335
 msgid "_Initial average (\"head start\") is "
-msgstr ""
+msgstr "A _kezdeti ?tlag (\"f? start\") "
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1342
 msgid "straight"
-msgstr ""
+msgstr "egyenes"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1343
-#, fuzzy
 msgid "rolling"
-msgstr "Sz?tag"
+msgstr "g?rd?l?"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1345
-#, fuzzy
 msgid " average"
-msgstr "?tlagsz?m?t?s"
+msgstr " ?tlag"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1353
 msgid "      of frames "
-msgstr ""
+msgstr "      k?pkock?k?"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1363
 msgid " through "
-msgstr ""
+msgstr " kereszt?l"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1381
-#, fuzzy
 msgid "Integer _Bias (will be added to result of selected operation):"
-msgstr "_Bias (hozz?ad?dik az eredm?nyhez):"
+msgstr "Eg?sz _Bias (hozz?ad?dik a kiv?lasztott m?velet eredm?ny?hez):"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1421
 msgid "First, _add to each pixel result value:   "
-msgstr ""
+msgstr "El?sz?r, minden pixel eredm?ny ?rt?k?nek megad?sa:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1435
 msgid "Then, _multiply each pixel result value by:   "
-msgstr ""
+msgstr "Azut?n, minden pixel eredm?ny ?rt?k szorz?sa ezzel:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1449
 msgid "Mi_nimum result value (will be scaled to 0):"
-msgstr ""
+msgstr "Mi_nimum eredm?ny ?rt?k (0-ig lesz sk?l?zva):"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1475
 msgid "Ma_ximum result value (will be scaled to 255):"
-msgstr ""
+msgstr "Ma_ximum eredm?ny ?rt?k (255-ig lesz sk?l?zva):"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1497
 msgid "Pixel Value Scaling on Result of Selected Operation"
-msgstr ""
+msgstr "Pixel ?rt?k m?retez?s a kiv?lasztott m?velet eredm?nye alapj?n"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1506
 msgid "(description of current config will go here)"
-msgstr ""
+msgstr "(az aktu?lis be?ll?t?s le?r?sa itt lesz)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1523
-#, fuzzy
 msgid "_Histogram every N frames (0 to disable):   "
-msgstr "Hisztogram minden N frame-re (0 - letilt?s)"
+msgstr "Hisztogram minden N k?pkock?ra (0 - letilt?s):"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1594
-#, fuzzy
 msgid "Enable Preview"
-msgstr "El?n?zet"
+msgstr "El?n?zet enged?lyez?se"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:194
 #: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:152
@@ -3681,11 +3608,11 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:417
 msgid "Minimum value to be in-range:"
-msgstr "Minimum ?rt?k a tartom?nyon bel?l:"
+msgstr "Minim?lis ?rt?k a tartom?nyon bel?l:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:450
 msgid "Maximum value to be in-range:"
-msgstr "Maximum ?rt?k a tartom?nyon bel?l:"
+msgstr "Maxim?lis ?rt?k a tartom?nyon bel?l:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:481
 msgid "Output values:   "
@@ -3701,7 +3628,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:495
 msgid "Debugging settings (bits):   "
-msgstr "Hibakeres?si be?ll?t?sok (bits):   "
+msgstr "Hibakeres?si be?ll?t?sok (bitek):   "
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vcodec.cpp:74
 msgid "Video encoder"
@@ -3712,7 +3639,7 @@
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1084
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1155
 msgid "Configure"
-msgstr "Be?ll?t?s"
+msgstr "Be?ll?t?sok"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:82
 msgid "none"
@@ -3728,7 +3655,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:102
 msgid "The idx/sub file does not set."
-msgstr "Az idx/sub f?jl nincs be?ll?tva"
+msgstr "Az idx/sub f?jl nincs be?ll?tva."
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:183
 msgid "VobSub Settings"
@@ -3748,7 +3675,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:233
 msgid "Shift (ms) :"
-msgstr "Eltol?s (ms)"
+msgstr "Eltol?s (ms):"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_working.cpp:211
 msgid "Processing"
@@ -3849,7 +3776,6 @@
 msgstr "A kiv?lasztott sz?r? hozz?ad?sa az akt?v sz?r?k list?j?hoz"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:162
-#, fuzzy
 msgid "<b>Active Filters</b>"
 msgstr "<b>Akt?v sz?r?k</b>"
 
@@ -3866,14 +3792,12 @@
 msgstr "Sz?r? mozgat?sa fel"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:224
-#, fuzzy
 msgid "Open filter list"
-msgstr "Filter lista megnyit?sa [Ctrl-O]"
+msgstr "Sz?r?lista megnyit?sa"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:233
-#, fuzzy
 msgid "Save filter list"
-msgstr "Sz?r?lista ment?se [Ctrl-S]"
+msgstr "Sz?r?lista ment?se"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:239
 msgid "P_artial"
@@ -3897,7 +3821,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtersub.cpp:53
 msgid "Video Filters"
-msgstr "Video sz?r?k"
+msgstr "Vide? sz?r?k"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtersub.cpp:113
 msgid "VCD res"
@@ -3933,12 +3857,12 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp:551
 msgid "Separate"
-msgstr "K?l?nb?z?"
+msgstr "Lev?lasztva"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp:806
 #, c-format
 msgid "Frame:%c(%02d)"
-msgstr "Frame:%c(%02d)"
+msgstr "K?pkocka:%c(%02d)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:266
 msgid "Avidemux"
@@ -3974,7 +3898,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:356
 msgid "Save _Project"
-msgstr "_Projekt ment?se..."
+msgstr "_Projekt ment?se"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:364
 msgid "Save P_roject As..."
@@ -3994,7 +3918,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:396
 msgid "Co_nnect to avsproxy"
-msgstr "Csatla_koz?s Avsproxy-hoz"
+msgstr "Csatlakoz?s _Avsproxy-hoz"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:405
 msgid "Proper_ties"
@@ -4006,11 +3930,11 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:432
 msgid "_Edit"
-msgstr "Sz_erkeszt?s"
+msgstr "_Szerkeszt?s"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:439
 msgid "_Reset Edits"
-msgstr "_M?dos?t?sok vissza?ll?t?sa"
+msgstr "M?dos?t?sok _vissza?ll?t?sa"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:452
 msgid "Cu_t"
@@ -4058,7 +3982,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:557
 msgid "Z_oom 1:2"
-msgstr "N_agy?t?s 1:2"
+msgstr "_Nagy?t?s 1:2"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:564
 msgid "Zoom _1:1"
@@ -4070,7 +3994,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:578
 msgid "Vi_deo"
-msgstr "Vi_de?"
+msgstr "_Vide?"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:585
 msgid "_Decoder Options"
@@ -4094,12 +4018,12 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:624
 msgid "_Frame Rate"
-msgstr "_Frame-r?ta"
+msgstr "_K?pkockasebess?g"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:628
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:677
 msgid "_Encoder"
-msgstr "K?_dol?"
+msgstr "K?d_ol?"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:635
 msgid "Fil_ters"
@@ -4107,7 +4031,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:642
 msgid "_Audio"
-msgstr "_Audi?"
+msgstr "_Hang"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:649
 msgid "_Main Track"
@@ -4123,7 +4047,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:666
 msgid "S_ave..."
-msgstr "_Ment?s"
+msgstr "_Ment?s..."
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:684
 msgid "_Filters"
@@ -4139,19 +4063,19 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:711
 msgid "_Rebuild Frames (I & B)"
-msgstr "F_rame-ek ?jra?p?t?se (I & B)"
+msgstr "K?_pkock?k ?jra?p?t?se (I & B)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:715
 msgid "C_heck Frames (slow)"
-msgstr "Fr_ame-ek ellen?rz?se (lass?)"
+msgstr "K?pkock?k e_llen?rz?se (lass?)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:719
 msgid "_Bitrate Histogram"
-msgstr "_Bitr?ta hisztogram"
+msgstr "_Bitsebess?g hisztogram"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:723
 msgid "_Scan for Black Frames..."
-msgstr "Bla_ck frame-ek keres?se..."
+msgstr "Bla_ck k?pkock?k keres?se..."
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:732
 msgid "_VOB -> VobSub"
@@ -4171,15 +4095,15 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:753
 msgid "_Frame Hex Dump"
-msgstr "_Frame Hex Dump"
+msgstr "_K?pkocka Hex Dump"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:757
 msgid "A_uto"
-msgstr "A_uto"
+msgstr "_Auto"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:761
 msgid "_Go"
-msgstr "_Ind?t?s"
+msgstr "Nav_ig?l?s"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:768
 msgid "_Play/Stop"
@@ -4187,35 +4111,35 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:779
 msgid "P_revious Frame"
-msgstr "El?z? f_rame"
+msgstr "El?z? k?_pkocka"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:790
 msgid "_Next Frame"
-msgstr "K?_vetkez? frame"
+msgstr "K?_vetkez? k?pkocka"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:801
 msgid "Pr_evious Intra Frame"
-msgstr "El?_z? Intra frame"
+msgstr "El?_z? Intra k?pkocka"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:812
 msgid "Next _Intra Frame"
-msgstr "K?ve_tkez? Intra frame"
+msgstr "K?ve_tkez? Intra k?pkocka"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:823
 msgid "Previou_s Black Frame"
-msgstr "El?z? Bl_ack frame"
+msgstr "El?z? fekete k?pkock_a"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:827
 msgid "Ne_xt Black Frame"
-msgstr "K?vetke_z? Black frame"
+msgstr "K?vet_kez? fekete k?pkocka"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:831
 msgid "_First Frame"
-msgstr "El_s? frame"
+msgstr "El_s? k?pkocka"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:842
 msgid "_Last Frame"
-msgstr "Uto_ls? frame"
+msgstr "Ut_ols? k?pkocka"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:858
 msgid "Go to Marker _A"
@@ -4235,7 +4159,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:899
 msgid "_Custom"
-msgstr "E_gy?ni"
+msgstr "_Egy?ni"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:903
 msgid "_Help"
@@ -4243,7 +4167,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:910
 msgid "_Plugins"
-msgstr "_Plugin-ok"
+msgstr "_B?v?tm?nyek"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:914
 msgid "_Built-in Support"
@@ -4263,11 +4187,11 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:952
 msgid "Audio/video file information"
-msgstr "A f?jl Audi?/Vide? inform?ci?i"
+msgstr "Hang/Vide? f?jl inform?ci?k"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:963
 msgid "Bitrate/size calculator"
-msgstr "Bitr?ta/m?ret kalkul?tor"
+msgstr "Bitsebess?g/m?ret kalkul?tor"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1047
 msgid "Configure video encoder"
@@ -4284,11 +4208,11 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1087
 msgid "Configure audio encoder"
-msgstr "Audi? k?d?l? be?ll?t?sa"
+msgstr "Hang k?d?l? be?ll?t?sa"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1095
 msgid "Audio filters"
-msgstr "Audi? sz?r?k"
+msgstr "Hangsz?r?k"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1116
 msgid "Shift:"
@@ -4300,7 +4224,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1125
 msgid "Audio/video time shift (ms)"
-msgstr "Audi?/Vide? id? eltol?sa (ms)"
+msgstr "Hang/Vide? id?eltol?s (ms)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1128
 msgid "ms"
@@ -4312,11 +4236,11 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1177
 msgid "Frame: "
-msgstr "Frame: "
+msgstr "K?pkocka: "
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1184
 msgid "Current frame"
-msgstr "Aktu?lis frame"
+msgstr "Aktu?lis k?pkocka"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1189
 msgid "/ 0000000"
@@ -4340,7 +4264,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1214
 msgid "Frame: ?"
-msgstr "Frame: ?"
+msgstr "K?pkocka: ?"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1238
 msgid "Play"
@@ -4352,19 +4276,19 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1264
 msgid "Previous frame"
-msgstr "El?z? frame"
+msgstr "El?z? k?pkocka"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1279
 msgid "Next frame"
-msgstr "K?vetkez? frame"
+msgstr "K?vetkez? k?pkocka"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1294
 msgid "Previous keyframe"
-msgstr "El?z? keyframe"
+msgstr "El?z? kulcsk?pkocka"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1309
 msgid "Next keyframe"
-msgstr "K?vetkez? keyframe"
+msgstr "K?vetkez? kulcsk?pkocka"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1323
 msgid "Selection: start"
@@ -4376,19 +4300,19 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1345
 msgid "Previous black frame"
-msgstr "El?z? Black frame"
+msgstr "El?z? fekete k?pkocka"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1356
 msgid "Next black frame"
-msgstr "K?vetkez? Black frame"
+msgstr "K?vetkez? fekete k?pkocka"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1367
 msgid "First frame"
-msgstr "Els? frame"
+msgstr "Els? k?pkocka"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1378
 msgid "Last frame"
-msgstr "Utols? frame"
+msgstr "Utols? k?pkocka"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1392
 msgid "<b>Selection</b>"
@@ -4474,24 +4398,23 @@
 
 #: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:171
 msgid "_Start Frame (first frame # to include in average):"
-msgstr "Kezd? frame (els? frame # ?tlagba belesz?m?t):"
+msgstr "Kezd? k?pkocka(els? k?pkocka # ?tlagba belesz?m?t):"
 
 #: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:175
 msgid "_End Frame (last frame # to include), -1 = last:"
-msgstr "Utols? frame (utols? frame # belesz?m?t), -1 = utols?:"
+msgstr "Utols? k?pkocka(utols? k?pkocka # belesz?m?t), -1 = utols?:"
 
 #: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:179
 msgid "Select output file"
 msgstr "Kimeneti f?jl kiv?laszt?sa"
 
 #: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:182
-msgid ""
-"_Bias (only for display; use 0 for average, 128 for frame minus average):"
-msgstr "_Bias (csak megjelen?t?s, 0 = ?tlagos, 128 = frame m?nusz ?tlag):"
+msgid "_Bias (only for display; use 0 for average, 128 for frame minus average):"
+msgstr "_Bias (csak megjelen?t?s, 0 = ?tlagos, 128 = k?pkocka m?nusz ?tlag):"
 
 #: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:186
 msgid "Current frame minus average so far"
-msgstr "Aktu?lis frame m?nusz eddigi ?tlag"
+msgstr "Aktu?lis k?pkocka m?nusz eddigi ?tlag"
 
 #: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:187
 msgid "Average so far"
@@ -4570,7 +4493,7 @@
 
 #: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:131
 msgid "New format, preferred, good for Tracker3D"
-msgstr "?j form?tum ami jobb a Tracker3D-nek"
+msgstr "?j form?tum, javasolt, jobb a Tracker3D-nek"
 
 #: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:133
 msgid "DG at UWA format (includes shape info & bounding box)"
@@ -4590,7 +4513,7 @@
 
 #: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:166
 msgid "Mi_nimum area for a particle to be detected:"
-msgstr "Mi_nimum ter?let egy r?szecske ?rz?kel?se sz?m?ra"
+msgstr "Mi_nimum ter?let egy r?szecske ?rz?kel?se sz?m?ra:"
 
 #: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:169
 msgid "Ma_ximum area for a particle to be detected:"
@@ -4614,7 +4537,8 @@
 
 #: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:187
 #: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:321
-#: avidemux/gtk_gui.cpp:2068 avidemux/gtk_gui.cpp:2165
+#: avidemux/gtk_gui.cpp:2068
+#: avidemux/gtk_gui.cpp:2165
 msgid "Select file"
 msgstr "F?jl kiv?laszt?sa"
 
@@ -4668,11 +4592,11 @@
 
 #: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:274
 msgid "A = pixel from image file as float; Load image from file"
-msgstr "A = pixel k?pf?jlb?l float-k?nt; K?p bet?lt?se f?jlb?l"
+msgstr "A = pixel k?pf?jlb?l lebeg?pontosk?nt; K?p bet?lt?se f?jlb?l"
 
 #: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:276
 msgid "A = pixel from image file as integer; Load image from file"
-msgstr "A = pixel k?pf?jlb?l integer-k?nt; K?p bet?lt?se f?jlb?l"
+msgstr "A = pixel k?pf?jlb?l eg?szk?nt; K?p bet?lt?se f?jlb?l"
 
 #: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:278
 msgid "A = floating point constant value"
@@ -4684,7 +4608,7 @@
 
 #: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:285
 msgid "Select _Operation on each pixel P and input A:"
-msgstr "M?velet _kiv?laszt?sa minden P pixelen ?s A: bemeneten"
+msgstr "M?velet _kiv?laszt?sa minden P pixelen ?s A bemeneten:"
 
 #: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:290
 msgid "Input _Type:"
@@ -4699,7 +4623,7 @@
 "_Load Bias (added to each pixel\n"
 "in file image when loaded):"
 msgstr ""
-"_Bias bet?lt?se (hozz?dva minden pixelhez\n"
+"_Elt?r?t?s (Bias) bet?lt?se (hozz?adva minden pixelhez\n"
 "a k?pf?jl bet?lt?sekor):"
 
 #: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:329
@@ -4720,35 +4644,31 @@
 "(where A = (1-alpha)*A + alpha*(curr_frame + lookahead)):"
 msgstr ""
 "Mem?ria ?lland? _alpha\n"
-"(ahol A = (1-alpha)*A + alpha*(aktu?lis f_rame + lookahead)):"
+"(ahol A = (1-alpha)*A + alpha*(aktu?lis k?pko_cka + el?olvas?s)):"
 
 #: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:344
 msgid "Look ahead _N frames:"
-msgstr "_N frame el?olvas?sa:"
+msgstr "_N k?pkocka el?olvas?sa:"
 
 #: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:348
 msgid "Init _Start Frame (first frame # to use for head start):"
-msgstr "Kezd? frame (els? frame # f? ind?t?shoz haszn?lhat?):"
+msgstr "Kezd? k?pkocka (els? k?pkocka # f? ind?t?shoz haszn?lhat?):"
 
 #: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:352
 msgid "Init _End Frame (last frame # to use for head start):"
-msgstr "Befejez? frame (utols? frame # f? ind?t?shoz haszn?lhat?):"
+msgstr "Befejez? k?pkocka (utols? k?pkocka # f? ind?t?shoz haszn?lhat?):"
 
 #: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:356
-msgid ""
-"Init By _Rolling (compute head start using a rolling average rather than a "
-"straight average)"
-msgstr ""
-"Mozg?si ?tlag m?dszer (a fej ind?t?s?t mozg?si ?tlaggal sz?m?tja ki, egyenes "
-"?tlag helyett)"
+msgid "Init By _Rolling (compute head start using a rolling average rather than a straight average)"
+msgstr "G?rd?l?s m?dszer (a fej ind?t?s?t g?rd?l?si ?tlaggal sz?m?tja ki, egyenes ?tlag helyett)"
 
 #: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:361
 msgid "_Bias (will be added to result):"
-msgstr "_Bias (hozz?ad?dik az eredm?nyhez):"
+msgstr "_Elt?r?t?s (Bias)(hozz?ad?dik az eredm?nyhez):"
 
 #: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:364
 msgid "_Result Bias (added to each result pixel):"
-msgstr "Bias e_redm?ny (hozz?adva minden pixel eredm?nyhez):"
+msgstr "Elt?r?t?s (Bias) e_redm?ny (hozz?adva minden pixel eredm?nyhez):"
 
 #: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:368
 msgid ""
@@ -4758,26 +4678,23 @@
 
 #: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:373
 msgid "_Histogram every N frames (0 to disable):"
-msgstr "Hisztogram minden N frame-re (0 - letilt?s)"
+msgstr "Hisztogram minden N k?pkock?ra (0 - letilt?s)"
 
 #: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:135
 msgid "Mi_nimum value to be in-range:"
-msgstr "Minimum ?rt?k a tartom?nyon bel?l"
+msgstr "Minim?lis ?rt?k a tartom?nyon bel?l"
 
 #: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:136
 msgid "Ma_ximum value to be in-range:"
-msgstr "Maximum ?rt?k a tartom?nyon bel?l"
+msgstr "Maxim?lis ?rt?k a tartom?nyon bel?l"
 
 #: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:139
 msgid "In-range values go white, out-of-range go black"
-msgstr ""
-"Tartom?nyon bel?li ?rt?kn?l feh?r, tartom?nyon k?v?li ?rt?kn?l fekete legyen"
+msgstr "Tartom?nyon bel?li ?rt?kn?l feh?r, tartom?nyon k?v?li ?rt?kn?l fekete legyen"
 
 #: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:140
 msgid "In-range values go black, out-of-range go white"
-msgstr ""
-"Tartom?nyon bel?li ?rt?kn?l fekete,\n"
-"tartom?nyon k?v?li ?rt?kn?l feh?r legyen"
+msgstr "Tartom?nyon bel?li ?rt?kn?l fekete, tartom?nyon k?v?li ?rt?kn?l feh?r legyen"
 
 #: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:145
 msgid "Output values:"
@@ -4788,13 +4705,12 @@
 msgstr "V?lassza ki az ECMAScript-et a futtat?shoz"
 
 #: avidemux/gtk_gui.cpp:291
-#, fuzzy
 msgid "Audio filters cannot be applied in Copy mode"
-msgstr "Dual audi?s?vot csak 'M?sol?s' m?dban lehet haszn?lni"
+msgstr "M?sol?s m?dban nem lehet hangsz?r?ket alkalmazni"
 
 #: avidemux/gtk_gui.cpp:291
 msgid "To apply filters the audio must be transcoded."
-msgstr ""
+msgstr "A sz?r?ket alkalmazni kell a hang ?tk?dol?s?hoz."
 
 #: avidemux/gtk_gui.cpp:347
 msgid "Obsolete"
@@ -4808,13 +4724,14 @@
 msgid "Select Video/Image File..."
 msgstr "Vide?/K?p f?jl kiv?laszt?sa..."
 
-#: avidemux/gtk_gui.cpp:434 avidemux/gtk_gui.cpp:446
+#: avidemux/gtk_gui.cpp:434
+#: avidemux/gtk_gui.cpp:446
 msgid "Select Workbench to Save"
 msgstr "Projekt kiv?laszt?sa ment?sre"
 
 #: avidemux/gtk_gui.cpp:476
 msgid "Select Raw File to Save"
-msgstr "Raw f?jl kiv?laszt?sa ment?sre"
+msgstr "Nyers (Raw) f?jl kiv?laszt?sa ment?sre"
 
 #: avidemux/gtk_gui.cpp:486
 msgid "Select AVI File..."
@@ -4822,11 +4739,11 @@
 
 #: avidemux/gtk_gui.cpp:489
 msgid "Select AVI File to Append..."
-msgstr "AVI f?jl kiv?laszt?sa hozz?f?z?sre"
+msgstr "AVI f?jl kiv?laszt?sa hozz?f?z?sre..."
 
 #: avidemux/gtk_gui.cpp:493
 msgid "Select File to Save Audio"
-msgstr "F?jl kiv?laszt?sa audi? ment?sre"
+msgstr "F?jl kiv?laszt?sa a hang ment?s?re"
 
 #: avidemux/gtk_gui.cpp:527
 msgid "Select JPEG Sequence to Save"
@@ -4840,7 +4757,8 @@
 msgid "Select JPEG to Save"
 msgstr "JPEG kiv?laszt?sa ment?sre"
 
-#: avidemux/gtk_gui.cpp:599 avidemux/gtk_gui.cpp:722
+#: avidemux/gtk_gui.cpp:599
+#: avidemux/gtk_gui.cpp:722
 msgid "Select File to Save"
 msgstr "F?jl kiv?laszt?sa ment?sre"
 
@@ -4858,28 +4776,26 @@
 
 #: avidemux/gtk_gui.cpp:709
 msgid "Go to Frame"
-msgstr "Ugr?s frame-hez"
+msgstr "Ugr?s k?pkock?hoz"
 
 #: avidemux/gtk_gui.cpp:709
 msgid "_Go to frame:"
-msgstr "U_gr?s frame-hez"
+msgstr "U_gr?s k?pkock?hoz:"
 
 #: avidemux/gtk_gui.cpp:714
 msgid "Out of bounds"
-msgstr "Megengedett ter?leten k?v?li"
+msgstr "K?tetlen"
 
-#: avidemux/gtk_gui.cpp:720 avidemux/gtk_gui.cpp:728 avidemux/gtk_gui.cpp:775
+#: avidemux/gtk_gui.cpp:720
+#: avidemux/gtk_gui.cpp:728
+#: avidemux/gtk_gui.cpp:775
 #: avidemux/gtk_gui.cpp:1967
 msgid "Marker A > B"
 msgstr "Jelz? A > B"
 
 #: avidemux/gtk_gui.cpp:720
-msgid ""
-"An invalid frame range has been selected.  Make sure marker A is placed "
-"before marker B."
-msgstr ""
-"?rv?nytelen frame tartom?ny van kijel?lve. Gy?z?dj?n meg r?la, hogy egy ?A? "
-"jelz? el van helyezve a ?B? el?tt."
+msgid "An invalid frame range has been selected.  Make sure marker A is placed before marker B."
+msgstr "?rv?nytelen k?pkocka tartom?ny van kijel?lve. Gy?z?dj?n meg r?la, hogy egy ?A? jelz? el van helyezve a ?B? el?tt."
 
 #: avidemux/gtk_gui.cpp:728
 msgid "Cannot copy."
@@ -4894,9 +4810,8 @@
 msgstr "Biztos?"
 
 #: avidemux/gtk_gui.cpp:775
-#, fuzzy
 msgid "Cannot cut."
-msgstr "Nem lehet m?solni."
+msgstr "Nem lehet kiv?gni."
 
 #: avidemux/gtk_gui.cpp:818
 msgid "Use custom value"
@@ -4904,11 +4819,11 @@
 
 #: avidemux/gtk_gui.cpp:819
 msgid "Frame Rate"
-msgstr "Frame-r?ta"
+msgstr "K?pkockasebess?g"
 
 #: avidemux/gtk_gui.cpp:819
 msgid "_Frames per second"
-msgstr "_Frame / m?sodperc"
+msgstr "_K?pkockasebess?g / m?sodperc"
 
 #: avidemux/gtk_gui.cpp:822
 msgid "PAL - 25 FPS"
@@ -4924,11 +4839,11 @@
 
 #: avidemux/gtk_gui.cpp:826
 msgid "Standard Frame Rate:"
-msgstr "Szabv?nyos frame-r?ta:"
+msgstr "Szabv?nyos k?pkockasebess?g:"
 
 #: avidemux/gtk_gui.cpp:832
 msgid "Change Frame Rate"
-msgstr "Frame-r?ta m?dos?t?sa"
+msgstr "K?pkockasebess?g m?dos?t?sa"
 
 #: avidemux/gtk_gui.cpp:868
 msgid "Width is not a multiple of 8"
@@ -4936,19 +4851,19 @@
 
 #: avidemux/gtk_gui.cpp:869
 msgid "This will make trouble for AVI files."
-msgstr "Ez probl?m?t okozhat az AVI f?jloknak"
+msgstr "Ez probl?m?t okozhat az AVI f?jloknak."
 
 #: avidemux/gtk_gui.cpp:880
 msgid "Video filters cannot be applied in Copy mode"
-msgstr ""
+msgstr "M?sol?s m?dban nem lehet vide?sz?r?ket alkalmazni"
 
 #: avidemux/gtk_gui.cpp:880
 msgid "To apply filters the video must be transcoded."
-msgstr ""
+msgstr "A sz?r?ket alkalmazni kell az vide? ?tk?dol?s?hoz."
 
 #: avidemux/gtk_gui.cpp:885
 msgid "Rebuild all Keyframes?"
-msgstr "Minden keyframe ?jra?p?t?se?"
+msgstr "Minden kulcsk?pkocka ?jra?p?t?se?"
 
 #: avidemux/gtk_gui.cpp:941
 msgid "Permission error"
@@ -4982,54 +4897,53 @@
 
 #: avidemux/gtk_gui.cpp:1028
 msgid "Multiple Audio Tracks"
-msgstr "T?bb Audi? s?v"
+msgstr "T?bb hangs?v"
 
 #: avidemux/gtk_gui.cpp:1028
 msgid ""
 "The file you just loaded contains several audio tracks.\n"
 "Go to Audio->MainTrack to select the active one."
 msgstr ""
-"Az im?nt bet?lt?tt f?jl t?bb audi? s?vot tartalmaz.\n"
-"Nyissa meg az 'Audi?' -> 'F? audi? s?v' men?t ?s v?lassza ki az egyiket."
+"Az im?nt bet?lt?tt f?jl t?bb hangs?vot tartalmaz.\n"
+"Nyissa meg az 'Hang' -> 'F? hangs?v' men?t ?s v?lassza ki az egyiket."
 
 #: avidemux/gtk_gui.cpp:1082
 msgid "No audio decoder found for this file"
-msgstr "Audi? dek?der a f?jlhoz nem tal?lhat?"
+msgstr "Hang dek?der a f?jlhoz nem tal?lhat?"
 
 #: avidemux/gtk_gui.cpp:1083
 msgid "Save (A+V) will generate bad AVI. Save audio will work."
-msgstr "(A+V) ment?se hib?s AVI-t fog gener?lni. Az audi? ment?se m?k?dni fog."
+msgstr "(A+V) ment?se hib?s AVI-t fog gener?lni. A hang ment?se m?k?dni fog."
 
 #: avidemux/gtk_gui.cpp:1142
 msgid "Something failed when appending"
 msgstr "A hozz?f?z?sn?l valami nem siker?lt"
 
-#: avidemux/gtk_gui.cpp:1153 avidemux/gtk_gui.cpp:1986
+#: avidemux/gtk_gui.cpp:1153
+#: avidemux/gtk_gui.cpp:1986
 msgid "Something bad happened (II)"
 msgstr "Valami rossz t?rt?nt (II)"
 
 #: avidemux/gtk_gui.cpp:1217
 msgid "Cannot save the audio in copy mode"
-msgstr "M?sol?s m?dban nem lehet az audi?t menteni"
+msgstr "M?sol?s m?dban nem lehet a hangs?vot menteni"
 
 #: avidemux/gtk_gui.cpp:1217
-msgid ""
-"Select WAV PCM as the audio codec, otherwise the audio file would be raw PCM."
-msgstr ""
-"V?lasszuk a PCM WAV-ot mint audi? codec-et, ellenkez? esetben a hangf?jlt "
-"nyers PCM lenne."
+msgid "Select WAV PCM as the audio codec, otherwise the audio file would be raw PCM."
+msgstr "V?lasszuk a PCM WAV-ot mint hang kodek-et, ellenkez? esetben a hangf?jlt nyers PCM lenne."
 
-#: avidemux/gtk_gui.cpp:1225 avidemux/gtk_gui.cpp:1593
+#: avidemux/gtk_gui.cpp:1225
+#: avidemux/gtk_gui.cpp:1593
 msgid "Saving audio"
-msgstr "Audi? ment?se"
+msgstr "Hang ment?se"
 
 #: avidemux/gtk_gui.cpp:1302
 msgid "Get Frame"
-msgstr "Frame bek?r?s"
+msgstr "K?pkocka bek?r?s"
 
 #: avidemux/gtk_gui.cpp:1302
 msgid "Cannot get this frame to save"
-msgstr "Ezt a frame-et nem lehet menteni"
+msgstr "Ezt a k?pkock?t nem lehet menteni"
 
 #: avidemux/gtk_gui.cpp:1340
 msgid "Mark A > B"
@@ -5045,13 +4959,14 @@
 
 #: avidemux/gtk_gui.cpp:1355
 msgid "Cannot decode frame"
-msgstr "Frame dek?dol?sa sikertelen"
+msgstr "K?pkocka dek?dol?sa sikertelen"
 
 #: avidemux/gtk_gui.cpp:1355
 msgid "Aborting."
 msgstr "Megszak?tva."
 
-#: avidemux/gtk_gui.cpp:1366 avidemux/gtk_gui.cpp:1385
+#: avidemux/gtk_gui.cpp:1366
+#: avidemux/gtk_gui.cpp:1385
 #: avidemux/gtk_gui.cpp:2330
 msgid "Done"
 msgstr "K?sz"
@@ -5067,7 +4982,7 @@
 
 #: avidemux/gtk_gui.cpp:1368
 msgid "Could not save all images."
-msgstr "Nem lehetett menteni az ?sszes k?pet"
+msgstr "Nem lehetett menteni az ?sszes k?pet."
 
 #: avidemux/gtk_gui.cpp:1385
 #, c-format
@@ -5081,13 +4996,15 @@
 #: avidemux/gtk_gui.cpp:1387
 #, c-format
 msgid "Saving %s as a BMP file failed."
-msgstr "%s ment?se mint BMP f?jl, sikertelen"
+msgstr "%s ment?se mint BMP f?jl, sikertelen."
 
-#: avidemux/gtk_gui.cpp:1409 avidemux/gtk_gui.cpp:1475
+#: avidemux/gtk_gui.cpp:1409
+#: avidemux/gtk_gui.cpp:1475
 msgid "Failed to open the file"
 msgstr "F?jl megnyit?sa sikertelen"
 
-#: avidemux/gtk_gui.cpp:1409 avidemux/gtk_gui.cpp:1475
+#: avidemux/gtk_gui.cpp:1409
+#: avidemux/gtk_gui.cpp:1475
 msgid "Not a WAV file?"
 msgstr "Ez nem WAV f?jl?"
 
@@ -5097,7 +5014,7 @@
 
 #: avidemux/gtk_gui.cpp:1547
 msgid "Cannot decompress audio frame"
-msgstr "Audi? frame kicsomagol?sa sikertelen"
+msgstr "Hang frame kicsomagol?sa sikertelen"
 
 #: avidemux/gtk_gui.cpp:1561
 msgid "Memory Error"
@@ -5105,7 +5022,7 @@
 
 #: avidemux/gtk_gui.cpp:1614
 msgid "No frames to encode"
-msgstr "Nincs k?dolhat? frame"
+msgstr "Nincs k?dolhat? k?pkocka"
 
 #: avidemux/gtk_gui.cpp:1614
 msgid "Please check markers. Is \"A>\" == \">B\"?"
@@ -5113,7 +5030,7 @@
 
 #: avidemux/gtk_gui.cpp:1753
 msgid "Saving raw video stream"
-msgstr "Nyers (RAW) vide? stream ment?se"
+msgstr "Nyers (RAW) vide?folyam ment?se"
 
 #: avidemux/gtk_gui.cpp:1902
 msgid "Checking video"
@@ -5126,76 +5043,86 @@
 #: avidemux/gtk_gui.cpp:1922
 #, c-format
 msgid "Errors found in %u frames"
-msgstr "Hiba van %u frame-ben"
+msgstr "Hiba van %u k?pkock?ban"
 
 #: avidemux/gtk_gui.cpp:1940
 msgid "Cannot decompress the audio stream"
-msgstr "Audi? stream kicsomagol?sa sikertelen"
+msgstr "Hangfolyam kicsomagol?sa sikertelen"
 
 #: avidemux/gtk_gui.cpp:1940
 msgid "Switch audio codec to Copy."
-msgstr "Az audi? kodek ?tkapcsol?sa 'M?sol?s'-ra"
+msgstr "?ll?tsa ?t a hang kodek-et 'M?sol?s'-ra."
 
 #: avidemux/gtk_gui.cpp:1967
 msgid "Cannot delete the selection."
-msgstr "A kijel?l?st nem lehet t?r?lni"
+msgstr "A kijel?l?st nem lehet t?r?lni."
 
 #: avidemux/gtk_gui.cpp:1972
 msgid "You can't remove all frames"
-msgstr "Nem lehet elt?vol?tani az ?sszes frame-et"
+msgstr "Nem lehet elt?vol?tani az ?sszes k?pkock?t"
 
-#: avidemux/gtk_gui.cpp:1979 avidemux/gtk_gui.cpp:2601
+#: avidemux/gtk_gui.cpp:1979
+#: avidemux/gtk_gui.cpp:2601
 msgid "Something bad happened"
 msgstr "Valami rossz t?rt?nt"
 
 #: avidemux/gtk_gui.cpp:2048
 msgid "Could not get tracks info"
-msgstr "A s?v(ok) inform?ci?i nem el?rhet?ek."
+msgstr "A s?v(ok) inform?ci?i nem el?rhet?ek"
 
 #: avidemux/gtk_gui.cpp:2056
 msgid "Take audio from video file"
-msgstr "Audi? beemel?se vide? f?jlb?l"
+msgstr "Hang beemel?se vide? f?jlb?l"
 
-#: avidemux/gtk_gui.cpp:2057 avidemux/gtk_gui.cpp:2156
+#: avidemux/gtk_gui.cpp:2057
+#: avidemux/gtk_gui.cpp:2156
 msgid "No audio"
-msgstr "Nem audi?"
+msgstr "Nincs hangs?v"
 
-#: avidemux/gtk_gui.cpp:2058 avidemux/gtk_gui.cpp:2157
+#: avidemux/gtk_gui.cpp:2058
+#: avidemux/gtk_gui.cpp:2157
 msgid "External AC3"
 msgstr "K?ls? AC3"
 
-#: avidemux/gtk_gui.cpp:2058 avidemux/gtk_gui.cpp:2157
+#: avidemux/gtk_gui.cpp:2058
+#: avidemux/gtk_gui.cpp:2157
 msgid "Take audio from external AC3 file"
-msgstr "Audi? beemel?se k?ls? AC3 f?jlb?l"
+msgstr "Hangs?v beemel?se k?ls? AC3 f?jlb?l"
 
-#: avidemux/gtk_gui.cpp:2059 avidemux/gtk_gui.cpp:2158
+#: avidemux/gtk_gui.cpp:2059
+#: avidemux/gtk_gui.cpp:2158
 msgid "External MP3"
 msgstr "K?ls? MP3"
 
-#: avidemux/gtk_gui.cpp:2059 avidemux/gtk_gui.cpp:2158
+#: avidemux/gtk_gui.cpp:2059
+#: avidemux/gtk_gui.cpp:2158
 msgid "Take audio from external MP3 file"
-msgstr "Audi? beemel?se k?ls? MP3 f?jlb?l"
+msgstr "Hangs?v beemel?se k?ls? MP3 f?jlb?l"
 
-#: avidemux/gtk_gui.cpp:2060 avidemux/gtk_gui.cpp:2159
+#: avidemux/gtk_gui.cpp:2060
+#: avidemux/gtk_gui.cpp:2159
 msgid "External WAV"
 msgstr "K?ls? WAV"
 
-#: avidemux/gtk_gui.cpp:2060 avidemux/gtk_gui.cpp:2159
+#: avidemux/gtk_gui.cpp:2060
+#: avidemux/gtk_gui.cpp:2159
 msgid "Take audio from external WAV file"
-msgstr "Audi? beemel?se k?ls? WAV f?jlb?l"
+msgstr "Hangs?v beemel?se k?ls? WAV f?jlb?l"
 
-#: avidemux/gtk_gui.cpp:2064 avidemux/gtk_gui.cpp:2164
+#: avidemux/gtk_gui.cpp:2064
+#: avidemux/gtk_gui.cpp:2164
 msgid "_Audio source:"
-msgstr "_Audi? forr?s:"
+msgstr "_Hangforr?s:"
 
-#: avidemux/gtk_gui.cpp:2068 avidemux/gtk_gui.cpp:2165
+#: avidemux/gtk_gui.cpp:2068
+#: avidemux/gtk_gui.cpp:2165
 msgid "_External file:"
 msgstr "_K?ls? f?jl:"
 
 #: avidemux/gtk_gui.cpp:2077
 #, c-format
 msgid "Audio track %d (%s/%d channels/%d kbit per s/%d ms shift)"
-msgstr "Audi? s?v %d (%s/%d csatorna - %d kbit/mp - %d ms eltol?s)"
+msgstr "Hangs?v %d (%s/%d csatorna - %d kbit/mp - %d ms eltol?s)"
 
 #: avidemux/gtk_gui.cpp:2083
 msgid "_Track from video:"
@@ -5203,25 +5130,28 @@
 
 #: avidemux/gtk_gui.cpp:2093
 msgid "Main Audio Track"
-msgstr "F? audi? s?v"
+msgstr "F? hangs?v"
 
-#: avidemux/gtk_gui.cpp:2099 avidemux/gtk_gui.cpp:2177
+#: avidemux/gtk_gui.cpp:2099
+#: avidemux/gtk_gui.cpp:2177
 msgid "Cannot load"
 msgstr "Beolvas?s sikertelen"
 
-#: avidemux/gtk_gui.cpp:2099 avidemux/gtk_gui.cpp:2177
+#: avidemux/gtk_gui.cpp:2099
+#: avidemux/gtk_gui.cpp:2177
 msgid "The selected audio file does not exist."
-msgstr "A kiv?lasztott audi? f?jl nem l?tezik"
+msgstr "A kiv?lasztott hangf?jl nem l?tezik."
 
 #: avidemux/gtk_gui.cpp:2174
 msgid "Second Audio Track"
-msgstr "M?sodik audi? s?v"
+msgstr "M?sodik hangs?v"
 
 #: avidemux/gtk_gui.cpp:2206
 msgid "Error loading the MP3 file"
 msgstr "MP3 f?jl bet?lt?si hiba"
 
-#: avidemux/gtk_gui.cpp:2215 avidemux/gtk_gui.cpp:2237
+#: avidemux/gtk_gui.cpp:2215
+#: avidemux/gtk_gui.cpp:2237
 #: avidemux/gtk_gui.cpp:2259
 msgid "Second track loaded"
 msgstr "M?sodik s?v beolvasva"
@@ -5240,9 +5170,7 @@
 
 #: avidemux/gtk_gui.cpp:2318
 msgid "Saving the job failed. Maybe you have permission issue with ~/.avidemux"
-msgstr ""
-"A feladat ment?se sikertelen. Lehet, hogy jogosults?g hiba a(z) ~/.avidemux "
-"k?nyvt?rban"
+msgstr "A feladat ment?se sikertelen. Lehet, hogy jogosults?g hiba a(z) ~/.avidemux k?nyvt?rban"
 
 #: avidemux/gtk_gui.cpp:2330
 #, c-format
@@ -5252,7 +5180,7 @@
 #: avidemux/gtk_gui.cpp:2334
 #, c-format
 msgid "File %s was NOT saved correctly."
-msgstr "A %s f?jl ment?se NEM siker?lt"
+msgstr "A %s f?jl ment?se NEM siker?lt."
 
 #: avidemux/gtk_gui.cpp:2500
 msgid "AvsProxy"
@@ -5272,11 +5200,11 @@
 
 #: avidemux/gtk_gui.cpp:2533
 msgid "Frame type:"
-msgstr "Frame t?pus:"
+msgstr "K?pkocka t?pus:"
 
 #: avidemux/gtk_gui.cpp:2534
 msgid "Frame size:"
-msgstr "Frame m?ret"
+msgstr "K?pkocka m?ret:"
 
 #: avidemux/gtk_gui.cpp:2536
 msgid "Frame Hex Dump"
@@ -5292,16 +5220,15 @@
 
 #: avidemux/gtk_gui.cpp:2691
 msgid "Cannot encode the frame"
-msgstr "A frame k?dol?sa sikertelen"
+msgstr "A k?pkocka k?dol?sa sikertelen"
 
 #: avidemux/gtk_gui.cpp:2698
-#, fuzzy
 msgid "Cannot initialise JPEG encoder"
-msgstr "A vide? stream-et nem lehet inicializ?lni"
+msgstr "A JPEG k?dol?t nem lehet inicializ?lni"
 
 #: avidemux/guiplay.cpp:352
 msgid "Trouble initializing audio device"
-msgstr "Probl?ma az audi? eszk?z inicializ?s?n?l"
+msgstr "Probl?ma a hangeszk?z inicializ?l?s?n?l"
 
 #: avidemux/GUI_jobs.cpp:37
 msgid "Oops"
@@ -5315,18 +5242,21 @@
 msgid "There are no jobs stored"
 msgstr "Nincsenek t?rolt feladatok"
 
-#: avidemux/gui_navigate.cpp:74 avidemux/gui_navigate.cpp:112
-#: avidemux/gui_navigate.cpp:394 avidemux/gui_navigate.cpp:430
+#: avidemux/gui_navigate.cpp:74
+#: avidemux/gui_navigate.cpp:112
+#: avidemux/gui_navigate.cpp:394
+#: avidemux/gui_navigate.cpp:430
 msgid "Decompressing error"
 msgstr "Kicsomagol?si hiba"
 
 #: avidemux/gui_navigate.cpp:74
 msgid "Cannot decode next frame."
-msgstr "A k?vetkez? frame dek?dol?sa sikertelen"
+msgstr "A k?vetkez? k?pkocka dek?dol?sa sikertelen."
 
-#: avidemux/gui_navigate.cpp:112 avidemux/gui_navigate.cpp:430
+#: avidemux/gui_navigate.cpp:112
+#: avidemux/gui_navigate.cpp:430
 msgid "Cannot decode keyframe."
-msgstr "A keyframe dek?dol?sa sikertelen"
+msgstr "A kulcsk?pkocka dek?dol?sa sikertelen."
 
 #: avidemux/gui_navigate.cpp:238
 msgid "Seeking"
@@ -5334,21 +5264,22 @@
 
 #: avidemux/gui_navigate.cpp:319
 msgid "Finding black frames"
-msgstr "Black frame keres?se"
+msgstr "Fekete k?pkocka keres?se"
 
 #: avidemux/gui_navigate.cpp:394
 msgid "Cannot decode the frame."
-msgstr "A frame dek?dol?sa sikertelen"
+msgstr "A k?pkocka dek?dol?sa sikertelen."
 
 #: avidemux/gui_savenew.cpp:78
 msgid "Dual audio can only be used in copy mode"
-msgstr "Dual audi?s?vot csak 'M?sol?s' m?dban lehet haszn?lni"
+msgstr "Dual hangs?vot csak 'M?sol?s' m?dban lehet haszn?lni"
 
 #: avidemux/gui_savenew.cpp:78
 msgid "Select Copy as the video codec."
-msgstr "'M?sol?s' m?d kiv?laszt?sa mint vide? kodek"
+msgstr "'M?sol?s' m?d kiv?laszt?sa mint vide? kodek."
 
-#: avidemux/gui_savenew.cpp:198 avidemux/gui_savenew.cpp:214
+#: avidemux/gui_savenew.cpp:198
+#: avidemux/gui_savenew.cpp:214
 #: avidemux/gui_savenew.cpp:227
 msgid "Incompatible output format"
 msgstr "Nem kompatibilis kimeneti form?tum"
@@ -5359,17 +5290,19 @@
 
 #: avidemux/gui_savenew.cpp:248
 msgid "Select a second audio track in the Audio menu."
-msgstr "M?sodik audi? s?v kiv?laszt?sa az 'Audi?' men?ben"
+msgstr "M?sodik hangs?v kiv?laszt?sa a 'Hang' men?ben."
 
 #: avidemux/gui_savenew.cpp:252
 msgid "Select dual audio AVI to write"
-msgstr "Dual audi? s?vos AVI kiv?laszt?sa ?r?sra"
+msgstr "Dual hangs?vos AVI kiv?laszt?sa ?r?sra"
 
-#: avidemux/gui_savenew.cpp:274 avidemux/gui_savenew.cpp:292
+#: avidemux/gui_savenew.cpp:274
+#: avidemux/gui_savenew.cpp:292
 msgid "This cannot have packed VOP"
 msgstr "Ez nem tud VOP-ot becsomagolni"
 
-#: avidemux/gui_savenew.cpp:274 avidemux/gui_savenew.cpp:292
+#: avidemux/gui_savenew.cpp:274
+#: avidemux/gui_savenew.cpp:292
 msgid "It is not MPEG-4 video. File will not be saved."
 msgstr "Ez nem MPEG-4 vide?. A f?jl nem lehet menteni."
 
@@ -5392,13 +5325,13 @@
 #: plugins/ADM_audioEncoders/twolame/audioencoder_twolame.cpp:227
 #: plugins/ADM_audioEncoders/vorbis/audioencoder_vorbis.cpp:310
 msgid "_Bitrate:"
-msgstr "_Bitr?ta:"
+msgstr "_Bitsebess?g:"
 
 #: plugins/ADM_audioEncoders/aften/audioencoder_aften.cpp:250
 #: plugins/ADM_audioEncoders/faac/audioencoder_faac.cpp:276
 #: plugins/ADM_audioEncoders/lavcodec/audioencoder_lavcodec.cpp:223
 msgid "Aften Configuration"
-msgstr "Aften be?ll?t?s"
+msgstr "Aften be?ll?t?sa"
 
 #: plugins/ADM_audioEncoders/lame/audioencoder_lame.cpp:289
 #: plugins/ADM_audioEncoders/twolame/audioencoder_twolame.cpp:212
@@ -5424,13 +5357,13 @@
 
 #: plugins/ADM_audioEncoders/lame/audioencoder_lame.cpp:303
 msgid "Bit_rate mode:"
-msgstr "Bitr?ta m?d:"
+msgstr "Bitsebess?g m?d:"
 
 #: plugins/ADM_audioEncoders/lame/audioencoder_lame.cpp:323
 #: plugins/ADM_audioEncoders/vorbis/audioencoder_vorbis.cpp:311
 #: plugins/ADM_videoFilters/Decimate/ADM_vidDecDec.cpp:185
 msgid "_Quality:"
-msgstr "_Min?s?g"
+msgstr "_Min?s?g:"
 
 #: plugins/ADM_audioEncoders/lame/audioencoder_lame.cpp:325
 msgid "_Disable reservoir"
@@ -5442,7 +5375,7 @@
 
 #: plugins/ADM_audioEncoders/twolame/audioencoder_twolame.cpp:231
 msgid "TwoLame Configuration"
-msgstr "TwoLame be?ll?t?s"
+msgstr "TwoLame be?ll?t?sa"
 
 #: plugins/ADM_audioEncoders/vorbis/audioencoder_vorbis.cpp:295
 msgid "VBR"
@@ -5462,11 +5395,11 @@
 
 #: plugins/ADM_audioEncoders/vorbis/audioencoder_vorbis.cpp:314
 msgid "Vorbis Configuration"
-msgstr "Vorbis be?ll?t?s"
+msgstr "Vorbis be?ll?t?sa"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/dvEncoder.cpp:74
 msgid "The DV encoder only accepts the following profiles:"
-msgstr ""
+msgstr "A DV k?dol? csak a k?vetkez? profilokat fogadja el:"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/dvEncoder.cpp:85
 #: plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/h263Encoder.cpp:479
@@ -5485,14 +5418,12 @@
 #: plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg2Encoder.cpp:277
 #: plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg1Encoder.cpp:78
 #: plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg2Encoder.cpp:111
-#, fuzzy
 msgid "Settings"
-msgstr "V?g?s be?ll?t?sa"
+msgstr "Be?ll?t?sok"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/flv1Encoder.cpp:100
-#, fuzzy
 msgid "avcodec Sorenson Spark Configuration"
-msgstr "Libavcodec MPEG-2 be?ll?t?sa"
+msgstr "avcodec Sorenson Spark be?ll?t?s"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/h263Encoder.cpp:198
 #: plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg4aspEncoder.cpp:198
@@ -5522,129 +5453,111 @@
 #: plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/h263Encoder.cpp:208
 #: plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg4aspEncoder.cpp:208
 msgid "Sum of Absolute Differences"
-msgstr ""
+msgstr "Abszol?t k?l?nbs?gek ?sszege"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/h263Encoder.cpp:209
 #: plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg4aspEncoder.cpp:209
-#, fuzzy
 msgid "Fewest Bits"
-msgstr "Legkevesebb bit(ek) (vhq)"
+msgstr "Legkevesebb bit(ek)"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/h263Encoder.cpp:210
 #: plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg4aspEncoder.cpp:210
-#, fuzzy
 msgid "Rate Distortion"
-msgstr "R?ta torz?t?sa"
+msgstr "Sebess?gtorzul?s"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/h263Encoder.cpp:216
 #: plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg4aspEncoder.cpp:216
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:620
-#, fuzzy
 msgid "Encoding Mode"
-msgstr "_K?dol?si m?d:"
+msgstr "K?dol?si m?d"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/h263Encoder.cpp:219
 #: plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg4aspEncoder.cpp:219
-#, fuzzy
 msgid "Motion Estimation Method:"
-msgstr "Motion Estimation"
+msgstr "Mozg?sbecsl?si m?dszer:"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/h263Encoder.cpp:220
 #: plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg4aspEncoder.cpp:220
 msgid "_Maximum Consecutive B-frames:"
-msgstr ""
+msgstr "_Maxim?lis egym?st k?vet? B-k?pkock?k:"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/h263Encoder.cpp:221
 #: plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg4aspEncoder.cpp:221
-#, fuzzy
 msgid "4 _Motion Vector"
-msgstr "Motion vektorok megjelen?t?se"
+msgstr "4 _mozg?svektor"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/h263Encoder.cpp:222
 #: plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg4aspEncoder.cpp:222
-#, fuzzy
 msgid "_Quarter Pixel"
-msgstr "Quarter Pixel:"
+msgstr "_Quarter Pixel"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/h263Encoder.cpp:223
 #: plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg4aspEncoder.cpp:223
-#, fuzzy
 msgid "_Global Motion Compensation"
-msgstr "Global Motion Compensation (GMC):"
+msgstr "_Glob?lis mozg?skompenz?ci? (GMC)"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/h263Encoder.cpp:226
 #: plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg4aspEncoder.cpp:226
 msgid "Motion Estimation"
-msgstr "Motion Estimation"
+msgstr "Mozg?sbecsl?s"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/h263Encoder.cpp:229
 #: plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg4aspEncoder.cpp:229
-#, fuzzy
 msgid "_Quantisation Type:"
-msgstr "_Quantization t?pus:"
+msgstr "_Kvant?l?s t?pusa:"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/h263Encoder.cpp:230
 #: plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg4aspEncoder.cpp:230
-#, fuzzy
 msgid "_Macroblock Decision Mode:"
-msgstr "_Macroblock d?nt?s:"
+msgstr "_Macroblock d?nt?shozatal m?dja:"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/h263Encoder.cpp:231
 #: plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg4aspEncoder.cpp:231
-#, fuzzy
 msgid "Mi_nimum Quantiser:"
-msgstr "Mi_n. quantizer:"
+msgstr "Mi_nimum Kvant?l?s:"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/h263Encoder.cpp:232
 #: plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg4aspEncoder.cpp:232
-#, fuzzy
 msgid "Ma_ximum Quantiser:"
-msgstr "Ma_x. quantizer:"
+msgstr "Ma_ximum Kvant?l?s:"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/h263Encoder.cpp:233
 #: plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg4aspEncoder.cpp:233
-#, fuzzy
 msgid "Maximum Quantiser _Difference:"
-msgstr "Max. quantizer _difference:"
+msgstr "Maxim?lis kvant?l?si _elt?r?s:"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/h263Encoder.cpp:234
 #: plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg4aspEncoder.cpp:234
-#, fuzzy
 msgid "_Quantiser Compression:"
-msgstr "_Quantizer t?m?r?t?s:"
+msgstr "_Kvant?l? t?m?r?t?s:"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/h263Encoder.cpp:235
 #: plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg4aspEncoder.cpp:235
-#, fuzzy
 msgid "Quantiser _Blur:"
-msgstr "Quantizer el_mos?s:"
+msgstr "Kvant?l? el_mos?s:"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/h263Encoder.cpp:236
 #: plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg4aspEncoder.cpp:236
-#, fuzzy
 msgid "_Trellis Quantisation"
-msgstr "_Trellis quantization"
+msgstr "_Trellis kvant?l?s"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/h263Encoder.cpp:239
 #: plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg4aspEncoder.cpp:239
-#, fuzzy
 msgid "Quantisation"
-msgstr "Quantization"
+msgstr "Kvant?l?s"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/h263Encoder.cpp:263
 #: plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg4aspEncoder.cpp:263
-#, fuzzy
 msgid "avcodec H.263 Configuration"
-msgstr "Libavcodec MPEG-2 be?ll?t?sa"
+msgstr "avcodec H.263 be?ll?t?sa"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/h263Encoder.cpp:471
 msgid "The H.263 encoder only accepts the following resolutions:"
-msgstr ""
+msgstr "A H.263 k?dol? csak a k?vetkez? felbont?sokat fogadja el:"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mjpegEncoder.cpp:95
-#, fuzzy
 msgid "avcodec M-JPEG Configuration"
-msgstr "Libavcodec MPEG-2 be?ll?t?sa"
+msgstr "avcodec M-JPEG be?ll?t?sa"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1Encoder.cpp:229
 #: plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg2Encoder.cpp:250
@@ -5662,7 +5575,7 @@
 #: plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg2Encoder.cpp:252
 #: plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg2Encoder.cpp:88
 msgid "Anime"
-msgstr "Anime"
+msgstr "Anim?ci?"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1Encoder.cpp:232
 #: plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg2Encoder.cpp:253
@@ -5692,22 +5605,22 @@
 #: plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg2Encoder.cpp:263
 #: plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg2Encoder.cpp:99
 msgid "Ma_x. bitrate:"
-msgstr "Ma_x. bitr?ta:"
+msgstr "Ma_x. bitsebess?g:"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1Encoder.cpp:243
 #: plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg2Encoder.cpp:264
 msgid "Mi_n. bitrate:"
-msgstr "Mi_n. bitr?ta:"
+msgstr "Mi_n. bitsebess?g:"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1Encoder.cpp:244
 #: plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg2Encoder.cpp:265
 msgid "_Use Xvid rate control"
-msgstr "Xvid bitr?ta kontrol haszn?lata"
+msgstr "Xvid bitsebess?g kontroll haszn?lata"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1Encoder.cpp:245
 #: plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg2Encoder.cpp:266
 msgid "_Buffer size:"
-msgstr "_Puffer m?ret"
+msgstr "_Puffer m?ret:"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1Encoder.cpp:246
 #: plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg2Encoder.cpp:267
@@ -5725,28 +5638,25 @@
 #: plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg2Encoder.cpp:270
 #: plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg2Encoder.cpp:104
 msgid "_Interlacing:"
-msgstr "_V?ltottsoros:"
+msgstr "_V?ltottsoross?g:"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1Encoder.cpp:259
-#, fuzzy
 msgid "avcodec MPEG-1 Configuration"
-msgstr "Libavcodec MPEG-2 be?ll?t?sa"
+msgstr "avcodec MPEG-1 be?ll?t?sa"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg2Encoder.cpp:280
-#, fuzzy
 msgid "avcodec MPEG-2 Configuration"
-msgstr "Libavcodec MPEG-2 be?ll?t?sa"
+msgstr "avcodec MPEG-2 be?ll?t?sa"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg1Encoder.cpp:71
 #: plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg2Encoder.cpp:100
 msgid "New sequence every (MB):"
-msgstr ""
+msgstr "?j sorozat minden (MB):"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg1Encoder.cpp:81
 #: plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg2Encoder.cpp:114
-#, fuzzy
 msgid "mpeg2enc Configuration"
-msgstr "Aften be?ll?t?s"
+msgstr "mpeg2enc be?ll?t?sa"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg2Encoder.cpp:78
 #: scripts/auto/Optical Disc/translate_dummy.cpp:4
@@ -5756,228 +5666,197 @@
 #: plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg2Encoder.cpp:79
 #: scripts/auto/Optical Disc/translate_dummy.cpp:5
 msgid "Super Video CD"
-msgstr ""
+msgstr "Super Video CD"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg2Encoder.cpp:101
-#, fuzzy
 msgid "Stream _type:"
-msgstr "Frame t?pus:"
+msgstr "Bitfolyam _t?pus:"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:177
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:397
-#, fuzzy
 msgid "Target bitrate (kb/s)"
-msgstr "?tlagos _bitr?ta (kb/s):"
+msgstr "C?l bitsebess?g (kb/s)"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:181
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:405
-#, fuzzy
 msgid "Target video size (MB)"
-msgstr "C?l vide? m?rete:"
+msgstr "C?l vide? m?rete (MB)"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:185
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:409
-#, fuzzy
 msgid "Average bitrate (kb/s)"
-msgstr "?tlagos _bitr?ta (kb/s):"
+msgstr "?tlagos bitsebess?g (kb/s)"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:599
-#, fuzzy
 msgid "x264 Configuration"
-msgstr "MPEG-2 be?ll?t?sa"
+msgstr "x264 be?ll?t?sa"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:627
-#, fuzzy
 msgid "Quantizer"
-msgstr "_Quantizer:"
+msgstr "Kvant?l?"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:634
-#, fuzzy
 msgid "Target Size"
-msgstr "C?l vide? m?rete:"
+msgstr "C?l m?rete"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:647
-msgid ""
-"Constant Quantizer - Each frame will have the same compression. Low numbers "
-"equal higher quality while high numbers equal lower quality."
-msgstr ""
+msgid "Constant Quantizer - Each frame will have the same compression. Low numbers equal higher quality while high numbers equal lower quality."
+msgstr "?lland? kvant?l?s - Minden k?pkocka azonos t?m?r?t?s? lesz. Kisebb sz?m magasabb min?s?g, nagyobb sz?m alacsonyabb min?s?g."
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:655
-#, fuzzy
 msgid "Target bitrate or file size"
-msgstr "C?l vide? m?rete:"
+msgstr "C?l vide? bitsebess?ge vagy f?jl m?rete"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:663
-#, fuzzy
 msgid "Single Pass - Quality Quantizer (Average)"
-msgstr "Egymenetes - ?tlagos quantizer"
+msgstr "Egymenetes - Min?s?gi kvant?l?s (?tlagos)"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:664
-#, fuzzy
 msgid "Single Pass - Quality Quantizer (Constant)"
-msgstr "Egymenetes - ?tlagos quantizer"
+msgstr "Egymenetes - Min?s?gi kvant?l?s (?lland?)"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:665
-#, fuzzy
 msgid "Single Pass - Bitrate (Average)"
-msgstr "Egymenetes - bitr?ta"
+msgstr "Egymenetes - Bitsebess?g (?tlagos)"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:666
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:824
-#, fuzzy
 msgid "Two Pass - Video Size"
-msgstr "K?tmenetes - video m?ret"
+msgstr "K?tmenetes - Vide? m?ret"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:667
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:828
-#, fuzzy
 msgid "Two Pass - Average Bitrate"
-msgstr "K?tmenetes - ?tlagos bitr?ta"
+msgstr "K?tmenetes - ?tlagos bitsebess?g"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:669
-#, fuzzy
 msgid "Bitrate"
-msgstr "Bitr?ta:"
+msgstr "Bitsebess?g"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:702
 msgid "Partition Decision"
-msgstr ""
+msgstr "Part?ci? d?nt?s"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:709
-#, fuzzy
 msgid "Method"
 msgstr "M?d"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:721
 msgid "1 - QPel SAD (Fastest)"
-msgstr ""
+msgstr "1 - QPel SAD (Leggyorsabb)"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:722
 msgid "2 - QPel SATD"
-msgstr ""
+msgstr "2 - QPel SATD"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:723
 msgid "3 - HPel on MB then QPel"
-msgstr ""
+msgstr "3 - HPel a MB akkor QPel"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:724
 msgid "4 - Always QPel"
-msgstr ""
+msgstr "4 - Mindig QPel"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:725
 msgid "5 - QPel + Bidirectional ME"
-msgstr ""
+msgstr "5 - QPel + k?tir?ny? ME"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:726
 msgid "6 - RD on I/P frames (Default)"
-msgstr ""
+msgstr "6 - RD az I/P k?pkock?kon (Alap?rtelmezett)"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:727
 msgid "7 - RD on all frames"
-msgstr ""
+msgstr "7 - RD az ?sszes k?pkock?n"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:728
 msgid "8 - RD refinement on I/P frames"
-msgstr ""
+msgstr "8 - RD finom?t?s az I/P k?pkock?kon"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:729
 msgid "9 - RD refinement on all frames"
-msgstr ""
+msgstr "9 - RD finom?t?s az ?sszes k?pkock?n"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:736
 msgid "Diamond Search"
-msgstr ""
+msgstr "Diamond keres?s"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:737
 msgid "Hexagonal Search"
-msgstr ""
+msgstr "Hexagonal keres?s"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:738
 msgid "Uneven Multi-hexagon"
-msgstr ""
+msgstr "Egyenl?tlen Multi-hexagon"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:739
-#, fuzzy
 msgid "Exhaustive Search"
-msgstr "Hadamard alapos keres?s"
+msgstr "R?szletes keres?s"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:740
 msgid "Hadamard Exhaustive Search"
 msgstr "Hadamard alapos keres?s"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:748
-#, fuzzy
 msgid "Max. Ref. Frames"
-msgstr "Max. B frame-ek:"
+msgstr "Max. Ref. k?pkock?k"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:755
 msgid "Range"
-msgstr ""
+msgstr "Tartom?ny"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:768
-msgid ""
-"Define how many pixels are analysed for motion estimation. The higher the "
-"range the more accurate the analysis but the slower the encoding time."
-msgstr ""
+msgid "Define how many pixels are analysed for motion estimation. The higher the range the more accurate the analysis but the slower the encoding time."
+msgstr "Adja meg h?ny pixelt k?v?n elemezni a mozg?s becsl?s?hez. Magasabb ?rt?ktartom?nyban az elemz?s pontosabb de hosszabb a k?dol?si id?."
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:777
-msgid ""
-"Set how many previous frames can be referenced by a P/B-frame. Numbers above "
-"5 do not seem to improve quality greatly. Numbers 3 to 5 are recommended."
-msgstr ""
+msgid "Set how many previous frames can be referenced by a P/B-frame. Numbers above 5 do not seem to improve quality greatly. Numbers 3 to 5 are recommended."
+msgstr "Meghat?rozhatja, hogy h?ny el?z? k?pkock?ra hivatkozhat egy P/B-k?pkocka. 5-n?l magasabb ?rt?k, jelent?sen nem jav?tja a min?s?get. 3-5 k?z?tti ?rt?k aj?nlott."
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:780
-#, fuzzy
 msgid "Chroma ME"
-msgstr "Chroma U"
+msgstr "Sz?ness?g ME"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:785
 msgid "Use color information for detecting motion to improve quality"
-msgstr ""
+msgstr "Sz?ninform?ci? haszn?lata a mozg?s?rz?kel?shez a jobb min?s?g ?rdek?ben"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:788
 msgid "Mixed Refs"
-msgstr ""
+msgstr "Mixed Refs"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:793
 msgid "Calculate referencing individually based on each partition"
-msgstr ""
+msgstr "Egy?ni hivatkoz?sok kisz?m?t?sa az ?sszes part?ci? alapj?n"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:799
 msgid "Fast P-Skip"
-msgstr ""
+msgstr "Gyors P-?tl?p?s"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:802
-msgid ""
-"Early skip detection on P-frames to speedup encoding. Quality will be "
-"slightly reduced."
-msgstr ""
+msgid "Early skip detection on P-frames to speedup encoding. Quality will be slightly reduced."
+msgstr "Korai ?tl?p?s ?rz?kel?s a P-k?pkock?kon a k?dol?si sebess?g n?vel?s?hez. A min?s?ge n?mileg cs?kken."
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:805
-#, fuzzy
 msgid "DCT Decimate"
-msgstr "Decomb Decimate"
+msgstr "DCT Decimate"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:810
-#, fuzzy
 msgid "Interlaced"
-msgstr "V?ltottsoros TFF"
+msgstr "V?ltottsoros"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:813
 msgid "Input video is interlaced"
-msgstr ""
+msgstr "A bemeneti vide? v?ltottsoros"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:815
-#, fuzzy
 msgid "<b>Motion Estimation</b>"
-msgstr "Motion Estimation"
+msgstr "<b>Mozg?sbecsl?s</b>"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:844
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:855
-msgid ""
-"Enforce the size of a decoded pixel decoded to a certain value. Set this to "
-"1:1 for non-anamorphic video."
-msgstr ""
+msgid "Enforce the size of a decoded pixel decoded to a certain value. Set this to 1:1 for non-anamorphic video."
+msgstr "A dek?dolhat? pixelek dek?dol?si m?ret?nek k?nyszer?t?se egy bizonyos ?rt?kre. ?ll?tsa 1:1-re nem anamorfikus vide?n?l."
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:845
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:856
@@ -5987,967 +5866,824 @@
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:848
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:1076
-#, fuzzy
 msgid ":"
-msgstr "B:"
+msgstr ":"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:864
-msgid ""
-"Set a custom aspect ratio. The default 1:1 is recommended for most video."
-msgstr ""
+msgid "Set a custom aspect ratio. The default 1:1 is recommended for most video."
+msgstr "Saj?t k?par?ny be?ll?t?sa. Az alap?rtelmezett 1:1 aj?nlott a legt?bb vide?hoz."
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:869
-#, fuzzy
 msgid "Predefined Aspect Ratio"
-msgstr "K?par?ny:"
+msgstr "El?re meghat?rozott k?par?ny"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:874
-#, fuzzy
 msgid "Set a common predefined aspect ratio"
-msgstr "Nem lehet meghat?rozni a k?par?nyt"
+msgstr "?ltal?nos k?par?ny megad?sa"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:878
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:1065
-#, fuzzy
 msgid "As Input"
-msgstr "Bemenet"
+msgstr "Bemenetk?nt"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:899
-#, fuzzy
 msgid "<b>Sample Aspect Ratio</b>"
-msgstr "<b>Kijel?l?s</b>"
+msgstr "<b>Minta k?par?ny</b>"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:926
-#, fuzzy
 msgid "CABAC"
-msgstr "AAC"
+msgstr "CABAC"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:929
-msgid ""
-"Lossless compression technique that reduces bitrate by approximately 10%. "
-"Increases encoding and decoding time."
-msgstr ""
+msgid "Lossless compression technique that reduces bitrate by approximately 10%. Increases encoding and decoding time."
+msgstr "Vesztes?gmentes t?m?r?t?si elj?r?s, amely cs?kkenti a bitsebess?get mintegy 10%-kal. N?veli a k?dol?si ?s dek?dol?si id?t."
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:936
 msgid "Trellis"
-msgstr ""
+msgstr "Trellis"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:945
-msgid ""
-"Use Trellis Rate Distortion Optimisation to find optimal encoding for each "
-"block. Level 0 equals disabled, level 1 equals normal and level 2 equals "
-"high."
-msgstr ""
+msgid "Use Trellis Rate Distortion Optimisation to find optimal encoding for each block. Level 0 equals disabled, level 1 equals normal and level 2 equals high."
+msgstr "Trellis sebess?gtorzul?s optimaliz?l?s haszn?lata a blokkonk?nti optim?lis k?dol?s meghat?roz?s?hoz. 0 szint - letiltva, 1 szint - norm?l ?s 2 szint - magas."
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:952
-#, fuzzy
 msgid "Noise Reduction"
-msgstr "Chroma zajcs?kkent?s 2"
+msgstr "Zajcs?kkent?s"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:961
 msgid "Set the amount of noise reduction"
-msgstr ""
+msgstr "Zajcs?kkent?s m?rt?k?nek megad?sa"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:968
-#, fuzzy
 msgid "Deblocking Filter"
-msgstr "Video sz?r?k"
+msgstr "Blokkbont?s sz?r?"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:971
 msgid "Enable in-loop deblocking to filter the video"
-msgstr ""
+msgstr "Huroksz?r? (blokkbont?s) enged?lyez?se a vide?n"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:988
-#, fuzzy
 msgid "Strength"
-msgstr "_Er?ss?g:"
+msgstr "Er?ss?g"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1002
-msgid ""
-"Threshold for block detection. Positive values will detect more blocks, "
-"negative values will detect less."
-msgstr ""
+msgid "Threshold for block detection. Positive values will detect more blocks, negative values will detect less."
+msgstr "Blokk felismer?s hat?r?rt?k. Pozit?v ?rt?k t?bb, negat?v ?rt?k kevesebb blokk felismer?st tesz lehet?v?."
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1011
 msgid "Positive values will soften the video, negative values will sharpen"
-msgstr ""
+msgstr "Pozit?v ?rt?k l?gy?t, negat?v ?rt?k ?les?t a vide?n"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1014
-#, fuzzy
 msgid "<b>Misc. Options</b>"
-msgstr "<b>Kijel?l?s</b>"
+msgstr "<b>Egy?b opci?k</b>"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1019
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:1091
 msgid "Motion & Misc"
-msgstr ""
+msgstr "Mozg?s & Egy?b"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1045
-#, fuzzy
 msgid "8x8 Transform"
-msgstr "?talak?t?s"
+msgstr "8x8 ?talak?t?s"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1048
 msgid "General block breakdown transformation"
-msgstr ""
+msgstr "?ltal?nos blokk feloszt?s ?talak?t?s"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1051
 msgid "8x8, 8x16 and 16x8 P-frame search"
-msgstr ""
+msgstr "8x8, 8x16 ?s 16x8 P-k?pkocka keres?s"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1054
 msgid "Improve the P-frame quality"
-msgstr ""
+msgstr "P-k?pkocka min?s?g jav?t?s"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1057
 msgid "8x8, 8x16 and 16x8 B-frame search"
-msgstr ""
+msgstr "8x8, 8x16 ?s 16x8 B-k?pkocka keres?s"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1060
 msgid "Improve the B-frame quality"
-msgstr ""
+msgstr "B-k?pkocka min?s?g jav?t?s"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1063
 msgid "4x4, 4x8 and 8x4 P-frame search"
-msgstr ""
+msgstr "4x4, 4x8 ?s 8x4 P-k?pkocka keres?s"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1066
 msgid "Further improve the P-frame quality"
-msgstr ""
+msgstr "Tov?bbi P-k?pkocka min?s?g jav?t?s"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1068
 msgid "8x8 Intra search"
-msgstr ""
+msgstr "8x8 Intra keres?s"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1071
 msgid "Enable DCT Intra block search to improve quality"
-msgstr ""
+msgstr "DCT Intra block keres?s enged?lyez?se a min?s?g n?vel?s?hez"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1074
 msgid "4x4 Intra search"
-msgstr ""
+msgstr "4x4 Intra keres?s"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1077
 msgid "Further enable DCT Intra block search to improve quality"
-msgstr ""
+msgstr "Tov?bbi DCT Intra blokk keres?s enged?lyez?se a min?s?g jav?t?s?nak ?rdek?ben"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1080
 msgid "<b>Partition Macroblocks</b>"
-msgstr ""
+msgstr "<b>Part?ci? makroblokkok</b>"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1104
 msgid "Bias"
-msgstr ""
+msgstr "Elt?r?t?s (Bias)"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1111
 msgid "Max Consecutive"
-msgstr ""
+msgstr "Max egym?st k?vet?"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1124
-msgid ""
-"Increase / decrease probability for how often B-frames are used. It will not "
-"violate the maximum consecutive frame limit."
-msgstr ""
+msgid "Increase / decrease probability for how often B-frames are used. It will not violate the maximum consecutive frame limit."
+msgstr "N?veli / cs?kkenti a B-k?pkock?k haszn?lat?nak val?sz?n?s?g?t. Nem fogja t?ll?pni a maxim?lis egym?st k?vet? k?pkocka korl?tot."
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1133
-msgid ""
-"Set the maximum number of consecutive B-frames. This defines how many "
-"duplicate frames can be dropped. Numbers 2 to 5 are recommended. This "
-"greatly improves the use of bitrate and quality."
-msgstr ""
+msgid "Set the maximum number of consecutive B-frames. This defines how many duplicate frames can be dropped. Numbers 2 to 5 are recommended. This greatly improves the use of bitrate and quality."
+msgstr "?ll?tsa be az egym?st k?vet? B-k?pkock?k maxim?lis sz?m?t. Ez hat?rozza meg, hogy h?ny duplik?lt k?pkock?t lehet eldobni. 2-5 aj?nlott. Ez nagyban jav?tja a bitr?ta ?s min?s?g haszn?lat?t."
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1147
 msgid "Weighted Biprediction"
-msgstr ""
+msgstr "S?lyozott Biprediction"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1152
 msgid "Enables weighting of B-frames to help fades"
-msgstr ""
+msgstr "A B-k?pkock?k s?lyoz?s?nak enged?lyez?se, az ?tmenet seg?t?se ?rdek?ben"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1155
-#, fuzzy
 msgid "Adaptative DCT"
-msgstr "Block Adaptative:"
+msgstr "Alkalmazkod? DCT"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1160
-msgid ""
-"Use fewer B-frames if needed. This is always recommended. If not enabled, "
-"the codec will always use the maximum number of consecutive B-frames."
-msgstr ""
+msgid "Use fewer B-frames if needed. This is always recommended. If not enabled, the codec will always use the maximum number of consecutive B-frames."
+msgstr "Kevesebb B-k?pkocka haszn?lata ha sz?ks?ges. Ez mindig aj?nlott. Ha nincs enged?lyezve, a kodek mindig maxim?lis sz?m? egym?st k?vet? B-k?pkock?t haszn?l."
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1163
 msgid "Use as Reference"
-msgstr ""
+msgstr "Haszn?lat referenciak?nt"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1168
-msgid ""
-"Allow B-frames to make references non-linearly to another B-frame (instead "
-"of creating a duplicate copy)"
-msgstr ""
+msgid "Allow B-frames to make references non-linearly to another B-frame (instead of creating a duplicate copy)"
+msgstr "Lehet?v? teszi, hogy egy B-k?pkocka nem line?ris hivatkoz?sokat hozzon l?tre m?sik B-k?pkocka sz?m?ra (ahelyett, hogy kett?s m?solat k?sz?lj?n)"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1174
 msgid "B-Frame Direct Mode"
-msgstr ""
+msgstr "B-k?pkocka k?zvetlen m?d"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1183
-#, fuzzy
 msgid "Spatial"
-msgstr "R?szleges"
+msgstr "T?rbeli"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1184
-#, fuzzy
 msgid "Temporal"
-msgstr "?tmenet t?rl?"
+msgstr "?tmenet"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1185
-#, fuzzy
 msgid "Auto"
-msgstr "A_uto"
+msgstr "Auto"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1187
-#, fuzzy
 msgid "<b>B-Frames</b>"
-msgstr "<b>Frame/mp:</b>"
+msgstr "<b>B-k?pkocka</b>"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1192
-#, fuzzy
 msgid "Partitions & Frames"
-msgstr "El?z? f_rame"
+msgstr "Part?ci?k & K?pkock?k"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1227
 msgid "Set how much \"bitrate bonus\" a keyframe can get"
-msgstr ""
+msgstr "?ll?tsa be, hogy mennyi \"bitsebess?g b?nuszt\" kaphat egy kulcsk?pkocka"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1236
-msgid ""
-"Set how much bitrate is deducted from a B-frame as compared to the previous "
-"P-frame"
-msgstr ""
+msgid "Set how much bitrate is deducted from a B-frame as compared to the previous P-frame"
+msgstr "Meghat?rozhatja, hogy mekkora bitsebess?get kell levonni a B-k?pkock?b?l az el?z? P-k?pkock?hoz k?pest"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1245
-msgid ""
-"Define how much the bitrate can fluctuate over the entire video. 0% results "
-"in a constant bitrate stream, while 100% results in a pure quality based "
-"bitrate stream."
-msgstr ""
+msgid "Define how much the bitrate can fluctuate over the entire video. 0% results in a constant bitrate stream, while 100% results in a pure quality based bitrate stream."
+msgstr "Adja meg, hogy a bitsebess?g mennyit v?ltozhat az eg?sz vide? alatt. 0%-?lland? sebess?g? bitfolyamot, 100%-tiszta min?s?g alap? bitfolyamot eredm?nyez."
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1248
 msgid "Keyframe Boost (%)"
-msgstr ""
+msgstr "Kulcsk?pkocka fokoz?s (%)"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1255
-#, fuzzy
 msgid "B-frame Reduction (%)"
-msgstr "Chroma zajcs?kkent?s 2"
+msgstr "B-k?pkocka cs?kkent?s (%)"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1262
 msgid "Bitrate Variability (%)"
-msgstr ""
+msgstr "Bitsebess?g v?ltoz?konys?g (%)"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1269
-#, fuzzy
 msgid "<b>Bitrate</b>"
-msgstr "<b>Audi? bitr?ta</b>"
+msgstr "<b>Bitsebess?g</b>"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1289
 msgid "Min QP"
-msgstr ""
+msgstr "Min QP"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1296
-#, fuzzy
 msgid "Max QP"
-msgstr "Max"
+msgstr "Max QP"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1303
 msgid "Max QP Step"
-msgstr ""
+msgstr "Max QP l?p?s"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1317
 msgid "Enforce a minimum quantizer level"
-msgstr ""
+msgstr "Minim?lis kvant?l?si szint k?nyszer?t?se"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1326
 msgid "Enforce a maximum quantizer level"
-msgstr ""
+msgstr "Maxim?lis kvant?l?si szint k?nyszer?t?se"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1335
-msgid ""
-"Define how much the quantizer rate can change between two consecutive frames"
-msgstr ""
+msgid "Define how much the quantizer rate can change between two consecutive frames"
+msgstr "Adja meg, hogy kvant?l?s ?rt?ke mennyit v?ltozhat k?t egym?st k?vet? k?pkocka k?z?tt"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1338
-#, fuzzy
 msgid "<b>Quantization Limits</b>"
-msgstr "<b>Quantiser:</b>"
+msgstr "<b>Kvant?l?si korl?toz?sok</b>"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1365
-msgid ""
-"Increase / decrease sensitivity for detecting scene changes. Improves I-"
-"frame usage and quality."
-msgstr ""
+msgid "Increase / decrease sensitivity for detecting scene changes. Improves I-frame usage and quality."
+msgstr "Jelenetv?lt?s-felismer?s ?rz?kenys?g?nek n?vel?se / cs?kkent?se. Jav?tja az I-k?pkocka haszn?lat ?s min?s?g?t."
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1368
-#, fuzzy
 msgid "Scene Cut Threshold"
-msgstr "Eldob?si hat?r?rt?k"
+msgstr "Jelenetv?g?si hat?r?rt?k"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1375
 msgid "Min IDR Frame Interval"
-msgstr ""
+msgstr "Min. IDR k?pkocka intervallum"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1388
-msgid ""
-"Set minimum frame interval between IDR frames. Defines the minimum amount a "
-"frame can be reused and referenced by other frames before a new IDR frame is "
-"established."
-msgstr ""
+msgid "Set minimum frame interval between IDR frames. Defines the minimum amount a frame can be reused and referenced by other frames before a new IDR frame is established."
+msgstr "Adja meg az IDR k?pkock?k k?z?tti minim?lis id?k?zt. Ez hat?rozza meg a k?pkock?k minim?lis ?jrafelhaszn?l?si ?s hivatkoz?si mennyis?g?t m?s k?pkock?k sz?m?ra miel?tt egy ?j IDR k?pkocka j?n l?tre."
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1397
-msgid ""
-"Set maximum frame interval between IDR frames. Defines the maximum amount a "
-"frame can be reused and referenced by other frames before a new IDR frame is "
-"established."
-msgstr ""
+msgid "Set maximum frame interval between IDR frames. Defines the maximum amount a frame can be reused and referenced by other frames before a new IDR frame is established."
+msgstr "Adja meg az IDR k?pkock?k k?z?tti maxim?lis id?k?zt. Ez hat?rozza meg a k?pkock?k maxim?lis ?jrafelhaszn?l?si ?s hivatkoz?si mennyis?g?t m?s k?pkock?k sz?m?ra miel?tt egy ?j IDR k?pkocka j?n l?tre."
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1400
 msgid "Max IDR Frame Interval"
-msgstr ""
+msgstr "Max. IDR k?pkocka intervallum"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1407
-#, fuzzy
 msgid "<b>More Rate Settings</b>"
-msgstr "<b>Be?ll?t?sok</b>"
+msgstr "<b>Tov?bbi sebess?g be?ll?t?sok</b>"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1427
-#, fuzzy
 msgid "VBV Buffer Size"
-msgstr "_Puffer m?ret"
+msgstr "VBV puffer m?ret"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1434
 msgid "Initial VBV Buffer (%)"
-msgstr ""
+msgstr "Kezdeti VBV puffer (%)"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1441
-#, fuzzy
 msgid "Maximum Local Bitrate"
-msgstr "V?ltoz? bitr?ta"
+msgstr "Maxim?lis helyi bitsebess?g"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1472
-#, fuzzy
 msgid "<b>Video Buffer Verifier</b>"
-msgstr "<b>Vide? m?ret:</b>"
+msgstr "<b>Vide? puffer ellen?rz?</b>"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1477
 msgid "Rate Control"
-msgstr "R?ta fel?gyelet"
+msgstr "Sebess?g fel?gyelet"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1505
-#, fuzzy
 msgid "Bitrate Variance"
-msgstr "Bitr?ta Faktor"
+msgstr "Bitsebess?g elt?r?s"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1518
-msgid ""
-"Allowed variance of average bitrate. Lower values mean less variance. Higher "
-"values mean more variance."
-msgstr ""
+msgid "Allowed variance of average bitrate. Lower values mean less variance. Higher values mean more variance."
+msgstr "Elfogadott elt?r?s az ?tlagos bitsebess?gben. Alacsonyabb ?rt?k kisebb, magasabb ?rt?k nagyobb elt?r?st enged."
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1527
-msgid ""
-"Allowed variance of average quantizer or quality. Lower values mean less "
-"variance. Higher values mean more variance. Note that 0 means constant "
-"quality while 1 means constant fluctuation. Recommended 0.6."
-msgstr ""
+msgid "Allowed variance of average quantizer or quality. Lower values mean less variance. Higher values mean more variance. Note that 0 means constant quality while 1 means constant fluctuation. Recommended 0.6."
+msgstr "Elfogadott elt?r?s az ?tlagos kvant?l?sban vagy min?s?gben. Alacsonyabb ?rt?k kisebb, magasabb ?rt?k nagyobb elt?r?st enged. 0-?lland? min?s?get, 1-?lland? v?ltoz?st jelent. Aj?nlott 0.6."
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1536
 msgid "Reduced fluctuations in Quantizer (before curve compression)"
-msgstr ""
+msgstr "Cs?kkentett ingadoz?sok a kvant?l?sban (g?rbet?m?r?t?s el?tt)"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1547
-#, fuzzy
 msgid "Quantizer Compression"
-msgstr "_Quantizer t?m?r?t?s:"
+msgstr "Kvant?l? t?m?r?t?s"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1554
 msgid "Temp. Blur of Est. Frame Complexity"
-msgstr ""
+msgstr "Ideiglenesen elmossa a k?pkocka ?sszetetts?g?t"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1561
 msgid "Temp. Blur of Quant. after CC"
-msgstr ""
+msgstr "Ideiglenesen elmossa a Quant., a CC ut?n"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1568
-#, fuzzy
 msgid "<b>Misc</b>"
-msgstr "<b>M?d</b>"
+msgstr "<b>Egy?b</b>"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1594
 msgid "Quantization factors used between I and P-frames"
-msgstr ""
+msgstr "Kvant?l?si t?nyez?k figyelembe v?tele I ?s P-k?pkock?k k?z?tt"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1603
 msgid "Quantization used between P and B-frames"
-msgstr ""
+msgstr "Kvant?l?s haszn?lata P ?s B-k?pkock?k k?z?tt"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1612
 msgid "Quantization difference between chroma (color) and luma (brightness)"
-msgstr ""
+msgstr "Kvant?l?si k?l?nbs?g chroma (sz?ness?g) ?s a luma (f?nyess?g) k?z?tt"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1615
 msgid "Factor between I and P-frame Quants"
-msgstr ""
+msgstr "I ?s a P-k?pkock?k k?z?tti t?nyez?"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1622
 msgid "Factor between P and B-frame Quants"
-msgstr ""
+msgstr "P ?s a B-k?pkock?k k?z?tti t?nyez?"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1629
-#, fuzzy
 msgid "Chroma QP Offset"
-msgstr "Chroma eltol?s"
+msgstr "Sz?ness?g QP eltol?s"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1636
-#, fuzzy
 msgid "<b>Quantizers</b>"
-msgstr "<b>Quantiser:</b>"
+msgstr "<b>Kvant?l?k</b>"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1654
-#, fuzzy
 msgid "Flat Matrix"
-msgstr "M?trix"
+msgstr "Flat m?trix"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1661
-#, fuzzy
 msgid "JVT Matrix"
-msgstr "M?trix"
+msgstr "JVT m?trix"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1671
-#, fuzzy
 msgid "Custom Matrix"
-msgstr "Egy?ni"
+msgstr "Egy?ni m?trix"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1681
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:1153
-#, fuzzy
 msgid "Open CQM file"
-msgstr "F?jl megnyit?sa"
+msgstr "CQM f?jl megnyit?sa"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1689
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:1161
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:1586
 msgid "Edit Custom Matrix"
-msgstr ""
+msgstr "Egy?ni m?trix szerkeszt?se"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1692
-#, fuzzy
 msgid "Edit loaded custom quantization matrix file"
-msgstr "Hiba az egy?ni m?trix f?jl beolvas?sakor."
+msgstr "A bet?lt?tt egy?ni kvant?l?si m?trix f?jl szerkeszt?se"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1694
-#, fuzzy
 msgid "<b>Quantization Matrices</b>"
-msgstr "_Quantization t?pus:"
+msgstr "<b>Kvant?l?si Matric?k</b>"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1699
-#, fuzzy
 msgid "More"
-msgstr "M?d"
+msgstr "Tov?bbi"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp:1707
-#, fuzzy
 msgid "_Defaults"
-msgstr "Alap?rtelmezett"
+msgstr "_Alap?rtelmezett"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:98
-#, fuzzy
 msgid "Select Xvid matrix file to load"
-msgstr "M?trix f?jl kiv?laszt?sa"
+msgstr "Xvid m?trix f?jl kiv?laszt?sa bet?lt?sre"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:110
-#, fuzzy
 msgid "Error Loading"
-msgstr "Hiba a k?dol?s alatt"
+msgstr "Bet?lt?si hiba"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:110
-#, fuzzy
 msgid "Error loadind the custom matrix file."
 msgstr "Hiba az egy?ni m?trix f?jl beolvas?sakor."
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:132
-#, fuzzy
 msgid "Matrix Loaded"
-msgstr "M?trix"
+msgstr "M?trix bet?ltve"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:132
-#, fuzzy
 msgid "The custom matrix file has been successfully loaded."
-msgstr "A %s f?jl sikeresen mentve."
+msgstr "Az egy?ni m?trix f?jl sikeresen bet?ltve."
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:550
-#, fuzzy
 msgid "Select Custom Matrix File to write"
-msgstr "OGM f?jl kiv?laszt?sa ?r?sra"
+msgstr "Egy?ni m?trix f?jl kiv?laszt?sa ?r?sra"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:556
-#, fuzzy
 msgid "Error Writing"
-msgstr "BMP-be konvert?l?s sikertelen"
+msgstr "Hiba ?r?skor"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:556
-#, fuzzy
 msgid "Error writing the custom matrix file."
-msgstr "Hiba az egy?ni m?trix f?jl beolvas?sakor."
+msgstr "Hiba az egy?ni m?trix f?jl ?r?sakor."
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:756
-#, fuzzy
 msgid "Xvid Configuration"
-msgstr "Vorbis be?ll?t?s"
+msgstr "Xvid be?ll?t?sa"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:790
-#, fuzzy
 msgid "Encoding type:"
-msgstr "_K?dol?si m?d:"
+msgstr "K?dol?si m?d:"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:795
-#, fuzzy
 msgid "Bitrate (kb/s):"
-msgstr "_Bitr?ta (kb/s):"
+msgstr "Bitsebess?g (kb/s):"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:800
-#, fuzzy
 msgid "Quantizer:"
-msgstr "_Quantizer:"
+msgstr "Kvant?l?:"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:812
 msgid "Select 1-pass or 2-pass encoding"
-msgstr ""
+msgstr "Egy- vagy k?tmenetes k?dol?s kiv?laszt?sa"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:816
-#, fuzzy
 msgid "Single Pass - Bitrate"
-msgstr "Egymenetes - bitr?ta"
+msgstr "Egymenetes - Bitsebess?g"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:820
-#, fuzzy
 msgid "Single Pass - Quantizer"
-msgstr "Egymenetes - ?tlagos quantizer"
+msgstr "Egymenetes - Kvant?l?s"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:837
-#, fuzzy
 msgid "Target video bitrate"
-msgstr "C?l bitr?ta:"
+msgstr "Vide? bitsebess?g"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:844
 msgid "Constant quantizer - each frame will get the same compression"
-msgstr ""
+msgstr "?lland? kvant?l?s - minden k?pkocka azonos t?m?r?t?s? lesz"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:846
-#, fuzzy
 msgid "Variable bitrate mode"
-msgstr "V?ltoz? bitr?ta"
+msgstr "V?ltoz? bitsebess?g"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:858
-#, fuzzy
 msgid "_Interlaced"
-msgstr "V?ltottsoros TFF"
+msgstr "V?ltottsoros"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:861
-msgid ""
-"Enables interlaced frame support - use only if your source contains "
-"interlacing artifacts (i.e. fields instead of progressive frames)"
-msgstr ""
+msgid "Enables interlaced frame support - use only if your source contains interlacing artifacts (i.e. fields instead of progressive frames)"
+msgstr "V?ltottsoros k?pkocka t?mogat?s enged?lyez?se - haszn?lata csak akkor javasolt ha a forr?s v?ltottsoros adatokat tartalmaz (mez?k, folyamatos k?pkock?k helyett)"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:863
 msgid "_Greyscale"
-msgstr ""
+msgstr "Sz?rkesk?la"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:866
 msgid "Encode in black & white"
-msgstr ""
+msgstr "K?dol?s fekete-feh?r-ben"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:872
 msgid "Ca_rtoon mode"
-msgstr ""
+msgstr "Rajzfilm m?d"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:875
 msgid "Enables special motion estimation features for cartoons/anime"
-msgstr ""
+msgstr "Speci?lis mozg?sbecsl?si funkci?k enged?lyez?se (Rajzfilm/anim?ci?)"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:877
-#, fuzzy
 msgid "C_hroma optimizer"
-msgstr "C_hroma z?r:"
+msgstr "S_z?n optimaliz?l?"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:880
 msgid "Enables a chroma optimizer prefilter"
-msgstr ""
+msgstr "Sz?ness?g optimaliz?l? el?sz?r? enged?lyez?se"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:886
 msgid "Turbo Mode"
-msgstr ""
+msgstr "Turb? m?d"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:889
 msgid "Enables fast 1st pass encoding"
-msgstr ""
+msgstr "Gyors egymenetes k?dol?s enged?lyez?se"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:891
-#, fuzzy
 msgid "Packed bitstream"
-msgstr "Packed Bitstream:"
+msgstr "Packed Bitstream"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:894
 msgid "Enables Divx like packed vop, DO NOT SET, it is ugly"
-msgstr ""
+msgstr "Divx, mint a csomagolt vop enged?lyez?se. Ne ?ll?tsd be mert cs?nya"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:896
-#, fuzzy
 msgid "Main"
-msgstr "Gain"
+msgstr "F?"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:915
 msgid "Motion search precision:"
-msgstr ""
+msgstr "Mozg?s keres?si pontoss?g:"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:919
-#, fuzzy
 msgid "VHQ mode:"
-msgstr "_Gain m?d:"
+msgstr "VHQ m?d:"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:932
-msgid ""
-"Higher settings give higher quality results, at the cost of slower encoding"
-msgstr ""
+msgid "Higher settings give higher quality results, at the cost of slower encoding"
+msgstr "A nagyobb ?rt?kek jobb min?s?g? eredm?nyt ad, de a k?dol?s lassabb"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:936
-#, fuzzy
 msgid "0 - None"
-msgstr "Nincs"
+msgstr "0 - Nincs"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:940
-#, fuzzy
 msgid "1 - Low"
-msgstr "Alacsony"
+msgstr "1 - Alacsony"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:944
-#, fuzzy
 msgid "2 - Medium"
-msgstr "K?zepes"
+msgstr "2 - K?zepes"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:948
-#, fuzzy
 msgid "3 - High"
-msgstr "Magas"
+msgstr "3 - Magas"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:957
 msgid "VHQ enables an additional search process to increase quality"
-msgstr ""
+msgstr "A VHQ tov?bbi keres?si folyamatot haszn?l a min?s?g jav?t?sa ?rdek?ben"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:961
 msgid "0 - Off"
-msgstr ""
+msgstr "0 - Ki"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:965
 msgid "1 - Mode decision"
-msgstr ""
+msgstr "1 - M?d d?nt?s"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:969
 msgid "2 - Limited search"
-msgstr ""
+msgstr "2 - Korl?tozott keres?s"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:973
 msgid "3 - Medium search"
-msgstr ""
+msgstr "3 - K?zepes keres?s"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:977
 msgid "4 - Wide search"
-msgstr ""
+msgstr "4 - Sz?les keres?s"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:987
-#, fuzzy
 msgid "C_hroma motion"
-msgstr "C_hroma z?r:"
+msgstr "S_z?n mozg?s"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:990
 msgid "Use chroma information to estimate motion"
-msgstr ""
+msgstr "Haszn?lja a sz?ness?g adatokat a mozg?s becsl?s?re"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:992
-#, fuzzy
 msgid "_4MV"
 msgstr "4_MV"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:995
 msgid "Use 4 motion vectors per macroblock, might give better compression"
-msgstr ""
+msgstr "Haszn?ljon 4 mozg?svektort makroblokkonk?nt, lehet hogy jobb lesz a t?m?r?t?s"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:1001
 msgid "Max I-frame interval:"
-msgstr ""
+msgstr "Max I-k?pkocka intervallum:"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:1009
 msgid "Maximum number of frames allowed between I-frames"
-msgstr ""
+msgstr "Az I-k?pkock?k k?z?tt enged?lyezett maxim?lis k?pkock?k sz?ma"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:1024
-#, fuzzy
 msgid "Number of B-frames:"
-msgstr "B frame-ek sz?ma:"
+msgstr "B k?pkock?k sz?ma:"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:1032
-msgid ""
-"Maximum number of sequential B-frames (when set to 0, the original I/P "
-"encoder is used)"
-msgstr ""
+msgid "Maximum number of sequential B-frames (when set to 0, the original I/P encoder is used)"
+msgstr "Az egym?st k?vet? B-k?pkock?k maxim?lis sz?ma (0 - eredeti I/P k?dol? haszn?lata)"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:1038
-#, fuzzy
 msgid "_Qpel"
-msgstr "_Qp:"
+msgstr "_Qpel"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:1041
 msgid "Use Quarter pixel resolution for a more precise motion estimation"
-msgstr ""
+msgstr "Negyed pixel felbont?s haszn?lata a pontosabb mozg?s becsl?s ?rdek?ben"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:1043
 msgid "_GMC"
 msgstr "_GMC"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:1046
-msgid ""
-"Global Motion Compensation can save bits on camera pans, zooming and rotation"
-msgstr ""
+msgid "Global Motion Compensation can save bits on camera pans, zooming and rotation"
+msgstr "A glob?lis mozg?skompenz?ci? biteket tud megsp?rolni kameramozg?s, nagy?t?s ?s forgat?s eset?n"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:1048
 msgid "_BVHQ"
-msgstr ""
+msgstr "_BVHQ"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:1051
 msgid "Produces nicer-looking B-frames"
-msgstr ""
+msgstr "Szebb megjelen?s? B-k?pkock?kat k?sz?t"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:1053
 msgid "Advanced Simple Profile"
 msgstr "Advanced Simple Profile"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:1068
-#, fuzzy
 msgid "Get PAR from input video file"
-msgstr "Audi? beemel?se vide? f?jlb?l"
+msgstr "PAR beemel?se a bemeneti vide? f?jlb?l"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:1074
-#, fuzzy
 msgid "Pixel Width"
-msgstr " Sz?less?g "
+msgstr "Pixel sz?less?g"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:1085
-#, fuzzy
 msgid "Pixel Height"
-msgstr " Magass?g "
+msgstr "Pixel magass?g"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:1086
-#, fuzzy
 msgid "Pixel Aspect Ratio"
-msgstr "K?par?ny:"
+msgstr "Pixel m?retar?ny"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:1104
-#, fuzzy
 msgid "Quantization type:"
-msgstr "_Quantization t?pus:"
+msgstr "_Kvant?l?s t?pusa:"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:1108
-#, fuzzy
 msgid "_H.263"
-msgstr "H.263"
+msgstr "_H.263"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:1111
 msgid "H.263 quantizers smooth the picture (useful at lower bitrates)"
-msgstr ""
+msgstr "H.263 kvant?l? a k?p sim?t?s?hoz (hasznos alacsonyabb bitsebess?gn?l)"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:1115
-#, fuzzy
 msgid "_MPEG"
-msgstr "MPEG"
+msgstr "_MPEG"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:1118
-msgid ""
-"MPEG quantizers (slightly slower) produce sharper picture (useful at higher "
-"bitrates)"
-msgstr ""
+msgid "MPEG quantizers (slightly slower) produce sharper picture (useful at higher bitrates)"
+msgstr "MPEG kvant?l?s (valamivel lassabb) ?lesebb k?pet k?sz?t (hasznos nagyobb bitsebess?gn?l)"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:1122
-#, fuzzy
 msgid "_Custom Matrix"
-msgstr "E_gy?ni"
+msgstr "E_gy?ni m?trix"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:1132
 msgid "Load Custom Matrix:  "
-msgstr ""
+msgstr "Egy?ni m?trix bet?lt?se:"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:1178
-#, fuzzy
 msgid "I-frame quantizer - Min:"
-msgstr "Ma_x. quantizer:"
+msgstr "I-k?pkocka kvant?l?s - Min:"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:1183
-#, fuzzy
 msgid "P-frame quantizer - Min:"
-msgstr "Ma_x. quantizer:"
+msgstr "P-k?pkocka kvant?l?s - Min:"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:1188
-#, fuzzy
 msgid "B-frame quantizer - Min:"
-msgstr "Ma_x. quantizer:"
+msgstr "B-k?pkocka kvant?l?s - Min:"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:1201
 msgid "Minimum quantizer allowed for I-frames"
-msgstr ""
+msgstr "I-k?pkock?khoz megengedett minim?lis kvant?l?s"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:1207
 msgid "Minimum quantizer allowed for P-frames"
-msgstr ""
+msgstr "P-k?pkock?khoz megengedett minim?lis kvant?l?s"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:1213
 msgid "Minimum quantizer allowed for B-frames"
-msgstr ""
+msgstr "B-k?pkock?khoz megengedett minim?lis kvant?l?s"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:1219
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:1224
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:1229
-#, fuzzy
 msgid "Max:"
-msgstr "Max"
+msgstr "Max:"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:1242
 msgid "Maximum quantizer allowed for I-frames"
-msgstr ""
+msgstr "I-k?pkock?khoz megengedett maxim?lis kvant?l?s"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:1248
 msgid "Maximum quantizer allowed for P-frames"
-msgstr ""
+msgstr "P-k?pkock?khoz megengedett maxim?lis kvant?l?s"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:1254
 msgid "Maximum quantizer allowed for B-frames"
-msgstr ""
+msgstr "B-k?pkock?khoz megengedett maxim?lis kvant?l?s"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:1256
-#, fuzzy
 msgid "Quantizer restrictions"
-msgstr "_Quantizer t?m?r?t?s:"
+msgstr "_Kvant?l?si korl?toz?sok"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:1260
 msgid "_Trellis quantization"
-msgstr "_Trellis quantization"
+msgstr "_Trellis kvant?l?s"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:1263
 msgid "Rate distortion quantization, will find optimal encoding for each block"
-msgstr ""
+msgstr "Sebess?gtorzul?s kvant?l?s, megtal?lja az optim?lis k?dol?st minden egyes blokkn?l"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:1265
 msgid "Quantization"
-msgstr "Quantization"
+msgstr "Kvant?l?s"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:1293
 msgid "I-frame boost (%):"
-msgstr ""
+msgstr "I-k?pkocka boost (%):"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:1298
 msgid "I-frames closer than ... frames..."
-msgstr ""
+msgstr "I-k?pkock?k k?zelebb vannak, mint ... k?pkock?k ..."
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:1303
 msgid "...are reduced by (%):"
-msgstr ""
+msgstr "...cs?kkentik ennyivel (%):"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:1308
 msgid "Max overflow improvement (%):"
-msgstr ""
+msgstr "Max t?lcsordul?s javul?s (%):"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:1313
 msgid "Max overflow degradation (%):"
-msgstr ""
+msgstr "Max t?lcsordul?s roml?s (%):"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:1325
 #, c-format
 msgid "A value of 20 will give 20% more bits to every I-frame"
-msgstr ""
+msgstr "A 20-as ?rt?k, 20 sz?zal?kkal t?bb bitet ad minden I-k?pkock?hoz"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:1331
-msgid ""
-"I-frames appearing in the range below this value will be treated as "
-"consecutive keyframes"
-msgstr ""
+msgid "I-frames appearing in the range below this value will be treated as consecutive keyframes"
+msgstr "I-k?pkock?k, amik a tartom?nyban ez alatt az ?rt?k alatt fognak megjelenni, egym?st k?vet? kulcsk?pkockak?nt lesznek kezelve"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:1336
-msgid ""
-"Reduction of bitrate for the first consecutive I-frames. The last I-frame "
-"will get treated normally"
-msgstr ""
+msgid "Reduction of bitrate for the first consecutive I-frames. The last I-frame will get treated normally"
+msgstr "Bitsebess?g cs?kkent?se az els? egym?st k?vet? I-k?pkock?kon. Az utols? I-k?pkocka norm?l m?don lesz kezelve"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:1341
-msgid ""
-"How much of the overflow the codec can eat into during undersized sections - "
-"larger values will bridge the gap faster"
-msgstr ""
+msgid "How much of the overflow the codec can eat into during undersized sections - larger values will bridge the gap faster"
+msgstr "Mennyi az a t?lcsordul?s, amit a kodek az alulm?retezett r?szek alatt kihagyhat - a nagyobb ?rt?k gyorsabban ?t fogja hidalni a r?st"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:1346
-msgid ""
-"How much of the overflow the codec can eat into during oversized sections - "
-"larger values will bridge the gap faster"
-msgstr ""
+msgid "How much of the overflow the codec can eat into during oversized sections - larger values will bridge the gap faster"
+msgstr "Mennyi az a t?lcsordul?s, amit a kodek a t?lm?retezett r?szek alatt kihagyhat - a nagyobb ?rt?k gyorsabban ?t fogja hidalni a r?st"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:1348
 msgid "Two pass tuning"
-msgstr ""
+msgstr "K?tmenetes hangol?s"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:1365
 msgid "High bitrate scenes (%):"
-msgstr ""
+msgstr "Magas bitsebess?g? jelenetek (%):"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:1370
 msgid "Low bitrate scenes (%):"
-msgstr ""
+msgstr "Alacsony bitsebess?g? jelenetek (%):"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:1375
 msgid "Overflow control strength (%):"
-msgstr ""
+msgstr "T?lcsordul?s ellen?rz?s er?ss?ge (%):"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:1387
-msgid ""
-"The higher this value, the more bits get taken from frames larger than the "
-"average size, and redistributed to others"
-msgstr ""
+msgid "The higher this value, the more bits get taken from frames larger than the average size, and redistributed to others"
+msgstr "Ha magasabb az ?rt?k, t?bb bit van kiv?ve az ?tlagos m?retn?l nagyobb k?pkock?kb?l, ?s m?sokra van sz?tosztva"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:1392
-msgid ""
-"The higher this value, the more bits get assigned to frames below the "
-"average frame size"
-msgstr ""
+msgid "The higher this value, the more bits get assigned to frames below the average frame size"
+msgstr "Ha magasabb az ?rt?k, t?bb bit lesz kijel?lve a k?pkock?knak az ?tlagos k?pkockam?ret alatt"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:1397
-msgid ""
-"0 = default from core (let XviD decide), else overflow payback percent per "
-"frame"
-msgstr ""
+msgid "0 = default from core (let XviD decide), else overflow payback percent per frame"
+msgstr "0 = alap?rtelmez?s a magb?l (XviD d?nti el), egy?bk?nt t?lcsordul?s megt?r?l?si sz?zal?k k?pkock?nk?nt"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:1399
-#, fuzzy
 msgid "Curve compression"
-msgstr "_Quantizer t?m?r?t?s:"
+msgstr "_G?rbe t?m?r?t?s"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:1403
-#, fuzzy
 msgid "Second Pass"
 msgstr "2. menet"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:1609
-#, fuzzy
 msgid "<b>Intra Matrix</b>"
-msgstr "<b>Tel?tetts?g:</b>"
+msgstr "<b>Intra m?trix</b>"
 
 #: plugins/ADM_videoEncoder/ADM_vidEnc_xvid/gtk/xvidConfigDialog.cpp:1627
-#, fuzzy
 msgid "<b>Inter Matrix</b>"
-msgstr "<b>Tel?tetts?g:</b>"
+msgstr "<b>Inter m?trix</b>"
 
 #: plugins/ADM_videoFilters/AddBorders/ADM_vidAddBorder.cpp:30
 msgid "Add black borders"
@@ -6955,7 +6691,7 @@
 
 #: plugins/ADM_videoFilters/AddBorders/ADM_vidAddBorder.cpp:33
 msgid "Add pure black border(s)."
-msgstr "Tiszta fekete szeg?ly(ek) hozz?ad?sa"
+msgstr "Tiszta fekete szeg?ly(ek) hozz?ad?sa."
 
 #: plugins/ADM_videoFilters/AddBorders/ADM_vidAddBorder.cpp:212
 #: plugins/ADM_videoFilters/BlackenBorders/ADM_vidBlackenBorders.cpp:212
@@ -6984,7 +6720,7 @@
 #: plugins/ADM_videoFilters/AddBorders/ADM_vidAddBorder.cpp:222
 #: plugins/ADM_videoFilters/BlackenBorders/ADM_vidBlackenBorders.cpp:223
 msgid "Incorrect parameters"
-msgstr "Helytelen param?ter"
+msgstr "Helytelen param?ter(ek)"
 
 #: plugins/ADM_videoFilters/AddBorders/ADM_vidAddBorder.cpp:222
 #: plugins/ADM_videoFilters/BlackenBorders/ADM_vidBlackenBorders.cpp:223
@@ -7022,7 +6758,7 @@
 
 #: plugins/ADM_videoFilters/Animated/DIA_animated.cpp:43
 msgid "Vignette frame number"
-msgstr "C?mke frame sorsz?ma:"
+msgstr "C?mke k?pkocka sorsz?ma"
 
 #: plugins/ADM_videoFilters/Animated/DIA_animated.cpp:47
 msgid "Timecode:"
@@ -7058,7 +6794,7 @@
 
 #: plugins/ADM_videoFilters/ASharp/gtk/DIA_asharp.cpp:210
 msgid "High Quality Block Filtering :"
-msgstr ""
+msgstr "Kiv?l? min?s?g? blokk sz?r?s:"
 
 #: plugins/ADM_videoFilters/Ass/ADM_vidASS.cpp:47
 #: plugins/ADM_videoFilters/Ass/ADM_vidASS.cpp:92
@@ -7067,7 +6803,7 @@
 
 #: plugins/ADM_videoFilters/Ass/ADM_vidASS.cpp:50
 msgid "Add ASS/SSA subtitles to the picture."
-msgstr "ASS/SSA felirat hozz?ad?sa a k?phez"
+msgstr "ASS/SSA felirat hozz?ad?sa a k?phez."
 
 #: plugins/ADM_videoFilters/Ass/ADM_vidASS.cpp:84
 msgid "_Subtitle file (ASS/SSA):"
@@ -7096,7 +6832,7 @@
 
 #: plugins/ADM_videoFilters/AvisynthResize/ADM_vidResize.cpp:39
 msgid "Picture resizer ported from Avisynth (C Version, slow)."
-msgstr "K?p ?tm?retez?, Avisynt-b?l portolva (C verzi?, lass?)"
+msgstr "K?p ?tm?retez?, Avisynt-b?l portolva (C verzi?, lass?)."
 
 #: plugins/ADM_videoFilters/AvisynthResize/ADM_vidResize.cpp:240
 #: plugins/ADM_videoFilters/MplayerResize/ADM_vidMPLResize.cpp:130
@@ -7110,39 +6846,35 @@
 
 #: plugins/ADM_videoFilters/AvsFilter/avsfilter.cpp:488
 msgid "Avisynth script filter (avsfilter), ver 0.7a(internal)"
-msgstr ""
+msgstr "Avisynth szkript sz?r? (avsfilter), ver 0.7a(bels?)"
 
 #: plugins/ADM_videoFilters/AvsFilter/avsfilter.cpp:491
 msgid "Use avisynth script as video filter."
-msgstr ""
+msgstr "AviSynth szkript haszn?lata mint vide?sz?r?."
 
 #: plugins/ADM_videoFilters/AvsFilter/avsfilter.cpp:538
-#, fuzzy
 msgid "_loader file:"
-msgstr "_K?ls? f?jl:"
+msgstr "_bet?lt? f?jl:"
 
 #: plugins/ADM_videoFilters/AvsFilter/avsfilter.cpp:539
 msgid "Select loader filename[avsload.exe]"
-msgstr ""
+msgstr "V?lassza ki bet?lt? f?jlnev?t[avsload.exe]"
 
 #: plugins/ADM_videoFilters/AvsFilter/avsfilter.cpp:541
-#, fuzzy
 msgid "_avs file:"
-msgstr "_IFO f?jl:"
+msgstr "_avs f?jl:"
 
 #: plugins/ADM_videoFilters/AvsFilter/avsfilter.cpp:542
-#, fuzzy
 msgid "Select avs filename[*.avs]"
-msgstr "Adatf?jl kiv?laszt?sa"
+msgstr "AVS f?jln?v[*.avs] kiv?laszt?sa"
 
 #: plugins/ADM_videoFilters/AvsFilter/avsfilter.cpp:543
 msgid "_pipe timeout:"
-msgstr ""
+msgstr "_adatcsatorna id?t?ll?p?s:"
 
 #: plugins/ADM_videoFilters/AvsFilter/avsfilter.cpp:547
-#, fuzzy
 msgid "AvsFilter config"
-msgstr "Fontbe?ll?t?s"
+msgstr "AvsFilter be?ll?t?sa"
 
 #: plugins/ADM_videoFilters/BlackenBorders/ADM_vidBlackenBorders.cpp:59
 msgid "Blacken borders"
@@ -7159,11 +6891,11 @@
 #: plugins/ADM_videoFilters/BlendRemover/ADM_vidBlendRemoval.cpp:59
 #: plugins/ADM_videoFilters/BlendRemover/ADM_vidBlendRemoval.cpp:80
 msgid "Blend Removal"
-msgstr "Blend elt?vol?t?"
+msgstr "Elmosotts?g elt?vol?t?"
 
 #: plugins/ADM_videoFilters/BlendRemover/ADM_vidBlendRemoval.cpp:62
 msgid "Try to remove blending."
-msgstr "Pr?b?lja meg elt?vol?tani a Blending-et."
+msgstr "Megpr?b?lja elt?vol?tani az elmosotts?got."
 
 #: plugins/ADM_videoFilters/BlendRemover/ADM_vidBlendRemoval.cpp:71
 #: plugins/ADM_videoFilters/BlendRemover/ADM_vidHardIvtcRemoval.cpp:78
@@ -7172,15 +6904,11 @@
 #: plugins/ADM_videoFilters/MSharpen/ADM_vidMSharpen.cpp:158
 #: plugins/ADM_videoFilters/MSmooth/ADM_vidMsmooth.cpp:183
 msgid "_Threshold:"
-msgstr "_Hat?r?rt?k"
+msgstr "_Hat?r?rt?k:"
 
 #: plugins/ADM_videoFilters/BlendRemover/ADM_vidBlendRemoval.cpp:72
-msgid ""
-"If value is smaller than threshold it is considered valid.Smaller value "
-"might mean more false positive."
-msgstr ""
-"Ha az ?rt?k kisebb, mint a hat?r?rt?k, az ?rv?nyesnek tekinthet?. Lehet, "
-"hogy a kisebb ?rt?k t?bb hamis pozit?vot jelent."
+msgid "If value is smaller than threshold it is considered valid.Smaller value might mean more false positive."
+msgstr "Ha az ?rt?k kisebb, mint a hat?r?rt?k, az ?rv?nyesnek tekinthet?. Lehet, hogy a kisebb ?rt?k t?bb hamis pozit?vot jelent."
 
 #: plugins/ADM_videoFilters/BlendRemover/ADM_vidBlendRemoval.cpp:74
 #: plugins/ADM_videoFilters/BlendRemover/ADM_vidHardIvtcRemoval.cpp:81
@@ -7199,8 +6927,7 @@
 #: plugins/ADM_videoFilters/BlendRemover/ADM_vidBlendRemoval.cpp:75
 #: plugins/ADM_videoFilters/BlendRemover/ADM_vidHardIvtcRemoval.cpp:82
 msgid "If metric is less than identical, images are considered identical"
-msgstr ""
-"Ha a metrika kevesebb mint megegyez?, a k?peket azonosnak kell tekinteni"
+msgstr "Ha a metrika kevesebb mint megegyez?, a k?peket azonosnak kell tekinteni"
 
 #: plugins/ADM_videoFilters/BlendRemover/ADM_vidBlendRemoval.cpp:76
 #: plugins/ADM_videoFilters/BlendRemover/ADM_vidHardIvtcRemoval.cpp:83
@@ -7213,21 +6940,16 @@
 msgstr "Metrika megjelen?t?_se a k?pben (hibakeress?s)"
 
 #: plugins/ADM_videoFilters/BlendRemover/ADM_vidHardIvtcRemoval.cpp:66
-#, fuzzy
 msgid "Hard pulldown removal"
-msgstr "Leg?rd?l? dupe elt?vol?t?sa"
+msgstr "Kem?ny pulldown elt?vol?t?s"
 
 #: plugins/ADM_videoFilters/BlendRemover/ADM_vidHardIvtcRemoval.cpp:69
 msgid "Remove IVTC that has been analog captured or resized."
 msgstr "IVTC elt?vol?t?sa, ha anal?g m?don r?gz?tett vagy ?tm?retezett."
 
 #: plugins/ADM_videoFilters/BlendRemover/ADM_vidHardIvtcRemoval.cpp:79
-msgid ""
-"If value is smaller than threshold it is considered valid. Smaller value "
-"might mean more false positive"
-msgstr ""
-"Ha az ?rt?k kisebb, mint a hat?r?rt?k, az ?rv?nyesnek tekinthet?. Lehet, "
-"hogy a kisebb ?rt?k t?bb hamis pozit?vot jelent."
+msgid "If value is smaller than threshold it is considered valid. Smaller value might mean more false positive"
+msgstr "Ha az ?rt?k kisebb, mint a hat?r?rt?k, az ?rv?nyesnek tekinthet?. Lehet, hogy a kisebb ?rt?k t?bb hamis pozit?vot jelent"
 
 #: plugins/ADM_videoFilters/BlendRemover/ADM_vidHardIvtcRemoval.cpp:82
 msgid "_Identical:"
@@ -7241,36 +6963,36 @@
 #: plugins/ADM_videoFilters/colorYUV/gtk/DIA_coloryuv.cpp:198
 #: plugins/ADM_videoFilters/Contrast/gtk/DIA_contrast.cpp:220
 msgid "Chroma U"
-msgstr "Chroma U"
+msgstr "Sz?ness?g U"
 
 #: plugins/ADM_videoFilters/Chroma/ADM_vidChromaU.cpp:30
 msgid "Keep chroma U only."
-msgstr "Csak a Chroma U megtart?sa"
+msgstr "Csak az U sz?ness?g megtart?sa."
 
 #: plugins/ADM_videoFilters/Chroma/ADM_vidChromaV.cpp:27
 #: plugins/ADM_videoFilters/colorYUV/gtk/DIA_coloryuv.cpp:205
 msgid "Chroma V"
-msgstr "Chroma V"
+msgstr "Sz?ness?g V"
 
 #: plugins/ADM_videoFilters/Chroma/ADM_vidChromaV.cpp:30
 msgid "Keep chroma V only."
-msgstr "Csak a Chroma V megtart?sa"
+msgstr "Csak a V sz?ness?g megtart?sa."
 
 #: plugins/ADM_videoFilters/ChromaShift/ADM_vidChromaShift.cpp:36
 msgid "Chroma shift"
-msgstr "Chroma eltol?s"
+msgstr "Sz?ness?g eltol?s"
 
 #: plugins/ADM_videoFilters/ChromaShift/ADM_vidChromaShift.cpp:39
 msgid "Shift chroma U/V to fix badly synced luma/chroma."
-msgstr "Chroma U/V eltol?sa, rosszul szinkroniz?lt luma/chroma jav?t?s?ra"
+msgstr "Sz?ness?g U/V eltol?sa, rosszul szinkroniz?lt fenyess?g/sz?ness?g jav?t?s?ra."
 
 #: plugins/ADM_videoFilters/ChromaShift/gtk/DIA_chromaShift.cpp:62
 msgid "Chroma Shift"
-msgstr "Chroma eltol?s"
+msgstr "Sz?ness?g eltol?s"
 
 #: plugins/ADM_videoFilters/ChromaShift/gtk/DIA_chromaShift.cpp:179
 msgid "ChromaShift"
-msgstr "Chroma-eltol?s"
+msgstr "Sz?ness?g-eltol?s"
 
 #: plugins/ADM_videoFilters/ChromaShift/gtk/DIA_chromaShift.cpp:193
 msgid "U Shift :"
@@ -7290,11 +7012,11 @@
 
 #: plugins/ADM_videoFilters/CNR2/ADM_vidCNR2.cpp:86
 msgid "Chroma noise reduction filter by MarcFD/Tritical.."
-msgstr "Chroma zajcs?kkent? sz?r? MarcFD/Tritical-t?l..."
+msgstr "Sz?ness?g zajcs?kkent? sz?r? MarcFD/Tritical-t?l..."
 
 #: plugins/ADM_videoFilters/CNR2/gtk/DIA_cnr2.cpp:123
 msgid "Chroma Noise Reduction 2"
-msgstr "Chroma zajcs?kkent?s 2"
+msgstr "Sz?ness?g zajcs?kkent?s 2"
 
 #: plugins/ADM_videoFilters/CNR2/gtk/DIA_cnr2.cpp:148
 msgid "<b>Scene change Treshold</b>"
@@ -7310,19 +7032,19 @@
 
 #: plugins/ADM_videoFilters/CNR2/gtk/DIA_cnr2.cpp:190
 msgid "Luma :"
-msgstr "Luma :"
+msgstr "F?nyess?g :"
 
 #: plugins/ADM_videoFilters/CNR2/gtk/DIA_cnr2.cpp:197
 msgid "Chroma U :"
-msgstr "Chroma U :"
+msgstr "Sz?ness?g U :"
 
 #: plugins/ADM_videoFilters/CNR2/gtk/DIA_cnr2.cpp:204
 msgid "Chroma V :"
-msgstr "Chroma V :"
+msgstr "Sz?ness?g V :"
 
 #: plugins/ADM_videoFilters/CNR2/gtk/DIA_cnr2.cpp:247
 msgid "Narrow"
-msgstr "Pontos"
+msgstr "Keskeny"
 
 #: plugins/ADM_videoFilters/CNR2/gtk/DIA_cnr2.cpp:272
 msgid "<b>Settings</b>"
@@ -7330,7 +7052,7 @@
 
 #: plugins/ADM_videoFilters/CNR2/gtk/DIA_cnr2.cpp:291
 msgid "Use also chroma to detect scene change"
-msgstr "Chroma haszn?lata a jelenetv?lt?s ?rz?kel?s?re"
+msgstr "Sz?ness?g haszn?lata a jelenetv?lt?s ?rz?kel?s?re"
 
 #: plugins/ADM_videoFilters/CNR2/gtk/DIA_cnr2.cpp:295
 msgid "<b>Mode</b>"
@@ -7342,9 +7064,7 @@
 
 #: plugins/ADM_videoFilters/colorYUV/ADM_vidColorYuv.cpp:72
 msgid "Alter colors (auto white balance etc...). Ported from Avisynth."
-msgstr ""
-"Sz?nek megv?ltoztat?sa (automatikus feh?regyens?ly, stb...) AviSynth-b?l "
-"portolva."
+msgstr "Sz?nek megv?ltoztat?sa (automatikus feh?regyens?ly, stb...) AviSynth-b?l portolva."
 
 #: plugins/ADM_videoFilters/colorYUV/gtk/DIA_coloryuv.cpp:139
 msgid "ColorYuv (From avisynth)"
@@ -7373,7 +7093,7 @@
 
 #: plugins/ADM_videoFilters/colorYUV/gtk/DIA_coloryuv.cpp:308
 msgid "<b>Color Correction Matrix</b>"
-msgstr "<b>Sz?nkorrekci?s M?trix</b>"
+msgstr "<b>Sz?nkorrekci?s m?trix</b>"
 
 #: plugins/ADM_videoFilters/colorYUV/gtk/DIA_coloryuv.cpp:331
 msgid "Matrix"
@@ -7417,7 +7137,7 @@
 
 #: plugins/ADM_videoFilters/colorYUV/gtk/DIA_coloryuv.cpp:388
 msgid "AutoGain"
-msgstr "AutoGain"
+msgstr "AutoEr?s?t?s"
 
 #: plugins/ADM_videoFilters/colorYUV/gtk/DIA_coloryuv.cpp:392
 msgid "Display Stats"
@@ -7429,19 +7149,19 @@
 
 #: plugins/ADM_videoFilters/colorYUV/gtk/DIA_coloryuv.cpp:400
 msgid "<b>frame2</b>"
-msgstr "<b>frame2</b>"
+msgstr "<b>k?pkocka2</b>"
 
 #: plugins/ADM_videoFilters/Contrast/ADM_vidContrast.cpp:37
 msgid "Adjust contrast, brightness and colors."
-msgstr "Kontraszt, f?nyer? ?s sz?nbe?ll?t?s"
+msgstr "Kontraszt, f?nyer? ?s sz?nbe?ll?t?s."
 
 #: plugins/ADM_videoFilters/Contrast/gtk/DIA_contrast.cpp:216
 msgid "Luma"
-msgstr "Luma"
+msgstr "F?nyess?g"
 
 #: plugins/ADM_videoFilters/Contrast/gtk/DIA_contrast.cpp:224
 msgid "Chroma v"
-msgstr "Chroma v"
+msgstr "Sz?ness?g v"
 
 #: plugins/ADM_videoFilters/Crop/ADM_vidCrop.cpp:53
 msgid "Crop"
@@ -7477,16 +7197,16 @@
 
 #: plugins/ADM_videoFilters/CurveEditor/ADM_vidCurveEditor.cpp:48
 msgid "Color Curve Editor"
-msgstr ""
+msgstr "Sz?ng?rbe szerkeszt?"
 
 #: plugins/ADM_videoFilters/CurveEditor/ADM_vidCurveEditor.cpp:51
 msgid "Color adjustment by color curves in YUV color space."
-msgstr ""
+msgstr "Sz?nbe?ll?t?s sz?ng?rb?kkel a YUV sz?nt?rben."
 
 #: plugins/ADM_videoFilters/CurveEditor/ADM_vidCurveEditor.cpp:152
 #, c-format
 msgid "Control points count: Y:%d, U:%d, V:%d"
-msgstr ""
+msgstr "Ellen?rz?si pontok sz?ma: Y:%d, U:%d, V:%d"
 
 #: plugins/ADM_videoFilters/Decimate/ADM_vidDecDec.cpp:155
 #: plugins/ADM_videoFilters/Decimate/ADM_vidDecDec.cpp:192
@@ -7495,7 +7215,7 @@
 
 #: plugins/ADM_videoFilters/Decimate/ADM_vidDecDec.cpp:158
 msgid "Useful to remove dupes left by Telecide."
-msgstr "Telecide visszamaradt duplik?ci?inak elt?vol?t?s?ra haszn?lhat?"
+msgstr "Telecide visszamaradt duplik?ci?inak elt?vol?t?s?ra haszn?lhat?."
 
 #: plugins/ADM_videoFilters/Decimate/ADM_vidDecDec.cpp:171
 msgid "Discard closer"
@@ -7511,23 +7231,23 @@
 
 #: plugins/ADM_videoFilters/Decimate/ADM_vidDecDec.cpp:174
 msgid "Pulldown dupe removal"
-msgstr "Leg?rd?l? dupe elt?vol?t?sa"
+msgstr "Pulldown dupe elt?vol?t?sa"
 
 #: plugins/ADM_videoFilters/Decimate/ADM_vidDecDec.cpp:177
 msgid "Fastest (no chroma, partial luma)"
-msgstr "Leggyorsabb (nincs chroma, r?szleges luma)"
+msgstr "Leggyorsabb (nincs sz?ness?g, r?szleges f?nyess?g)"
 
 #: plugins/ADM_videoFilters/Decimate/ADM_vidDecDec.cpp:178
 msgid "Fast (partial luma and chroma)"
-msgstr "Gyors (r?szleges luma ?s chroma)"
+msgstr "Gyors (r?szleges f?nyess?g ?s sz?ness?g)"
 
 #: plugins/ADM_videoFilters/Decimate/ADM_vidDecDec.cpp:179
 msgid "Medium (full luma, no chroma)"
-msgstr "K?zepes (teljes luma, nincs chroma)"
+msgstr "K?zepes (teljes f?nyess?g, nincs sz?ness?g)"
 
 #: plugins/ADM_videoFilters/Decimate/ADM_vidDecDec.cpp:180
 msgid "Slow (full luma and chroma)"
-msgstr "Lass? (teljes luma ?s chroma)"
+msgstr "Lass? (teljes f?nyess?g ?s sz?ness?g)"
 
 #: plugins/ADM_videoFilters/Decimate/ADM_vidDecDec.cpp:186
 msgid "_Threshold 1:"
@@ -7547,15 +7267,15 @@
 
 #: plugins/ADM_videoFilters/Deinterlace/ADM_vidDeinterlace.cpp:39
 msgid "Mask interlacing artifacts. Port of Smart deinterlace."
-msgstr "Mask interlacing artifacts. Port of Smart deinterlace."
+msgstr "V?ltottsoros mell?kterm?kek maszkol?sa. Smart deinterlace-b?l portolva."
 
 #: plugins/ADM_videoFilters/Delta/ADM_vidDelta.cpp:39
 msgid "Luma delta"
-msgstr "Luma delta"
+msgstr "F?nyess?g delta"
 
 #: plugins/ADM_videoFilters/Delta/ADM_vidDelta.cpp:42
 msgid "Difference between current and previous picture."
-msgstr "Az el?z? ?s a jelenlegi k?p k?z?tti k?l?nbs?g:"
+msgstr "Az el?z? ?s a jelenlegi k?p k?z?tti k?l?nbs?g."
 
 #: plugins/ADM_videoFilters/Denoise/ADM_vidDenoise.cpp:41
 msgid "Port of Transcode DNR."
@@ -7563,19 +7283,19 @@
 
 #: plugins/ADM_videoFilters/Denoise/ADM_vidDenoise.cpp:380
 msgid "_Luma lock:"
-msgstr "_Luma z?r:"
+msgstr "_F?nyess?g z?r:"
 
 #: plugins/ADM_videoFilters/Denoise/ADM_vidDenoise.cpp:381
 msgid "C_hroma lock:"
-msgstr "C_hroma z?r:"
+msgstr "_Sz?ness?g z?r:"
 
 #: plugins/ADM_videoFilters/Denoise/ADM_vidDenoise.cpp:382
 msgid "L_uma threshold:"
-msgstr "L_uma hat?r?rt?k:"
+msgstr "F?_nyess?g hat?r?rt?k:"
 
 #: plugins/ADM_videoFilters/Denoise/ADM_vidDenoise.cpp:383
 msgid "Ch_roma threshold:"
-msgstr "Ch_roma hat?r?rt?k:"
+msgstr "S_z?ness?g hat?r?rt?k:"
 
 #: plugins/ADM_videoFilters/Denoise/ADM_vidDenoise.cpp:385
 msgid "_Scene change:"
@@ -7598,15 +7318,15 @@
 
 #: plugins/ADM_videoFilters/DgBob/ADM_vidDGbob.cpp:81
 msgid "Keep nb of frames and fps"
-msgstr "Frame sz?m ?s fps fenntart?sa"
+msgstr "K?pkockasz?m ?s fps fenntart?sa"
 
 #: plugins/ADM_videoFilters/DgBob/ADM_vidDGbob.cpp:82
 msgid "Double nb of frames and fps"
-msgstr "Frame sz?m ?s fps k?tszerez?se"
+msgstr "K?pkockasz?m ?s fps k?tszerez?se"
 
 #: plugins/ADM_videoFilters/DgBob/ADM_vidDGbob.cpp:83
 msgid "Double nb of frames (slow motion)"
-msgstr "Frame sz?m k?tszerez?se (slow motion)"
+msgstr "K?pkockasz?m k?tszerez?se (lass? mozg?s)"
 
 #: plugins/ADM_videoFilters/DgBob/ADM_vidDGbob.cpp:86
 #: plugins/ADM_videoFilters/KernelDeint/ADM_vidKernelDeint.cpp:74
@@ -7650,11 +7370,11 @@
 
 #: plugins/ADM_videoFilters/Eq2/ADM_vidEq2.cpp:62
 msgid "Adjust contrast, brightness, saturation and gamma."
-msgstr "Kontraszt, f?nyer?, tel?tetts?g ?s gamma be?ll?t?sa"
+msgstr "Kontraszt, f?nyer?, tel?tetts?g ?s gamma be?ll?t?sa."
 
 #: plugins/ADM_videoFilters/Eq2/gtk/DIA_eq2.cpp:219
 msgid "Brigh_tness:"
-msgstr "F?nye_r?"
+msgstr "F?nye_r?:"
 
 #: plugins/ADM_videoFilters/Eq2/gtk/DIA_eq2.cpp:227
 msgid "_Saturation:"
@@ -7690,24 +7410,24 @@
 
 #: plugins/ADM_videoFilters/Equalizer/ADM_vidEqualizer.cpp:44
 msgid "Luma equalizer"
-msgstr "Luma equalizer"
+msgstr "F?nyess?g-szab?lyz?"
 
 #: plugins/ADM_videoFilters/Equalizer/ADM_vidEqualizer.cpp:47
 msgid "Luma correction filter with histogram."
-msgstr "Luma korrekci?s sz?r? hisztogrammal."
+msgstr "F?nyess?g korrekci?s sz?r? hisztogrammal."
 
 #: plugins/ADM_videoFilters/Equalizer/gtk/DIA_equalizer.cpp:437
 msgid "Equalizer"
-msgstr "Equalizer"
+msgstr "Szab?lyz?"
 
 #: plugins/ADM_videoFilters/Fade/ADM_vidFade.cpp:42
 #: plugins/ADM_videoFilters/Fade/ADM_vidFade.cpp:65
 msgid "Fade"
-msgstr "?tt?n?s"
+msgstr "?tmenet"
 
 #: plugins/ADM_videoFilters/Fade/ADM_vidFade.cpp:45
 msgid "Fade in/out."
-msgstr "?tt?n?s, els?t?t?t?s/kivil?gos?t?s"
+msgstr "?tmenet, els?t?t?t?s/kivil?gos?t?s."
 
 #: plugins/ADM_videoFilters/Fade/ADM_vidFade.cpp:52
 msgid "Out"
@@ -7727,15 +7447,15 @@
 
 #: plugins/ADM_videoFilters/Fade/ADM_vidFade.cpp:58
 msgid "_Fade type:"
-msgstr "?_tt?n?s t?pusa:"
+msgstr "?_tmenet t?pusa:"
 
 #: plugins/ADM_videoFilters/Fade/ADM_vidFade.cpp:59
 msgid "_Start frame:"
-msgstr "_Kezd? frame:"
+msgstr "_Kezd? k?pkocka:"
 
 #: plugins/ADM_videoFilters/Fade/ADM_vidFade.cpp:60
 msgid "_End frame:"
-msgstr "_Befejel? frame:"
+msgstr "_Befejez? k?pkocka:"
 
 #: plugins/ADM_videoFilters/Fade/ADM_vidFade.cpp:61
 msgid "Fade to _black"
@@ -7747,23 +7467,22 @@
 
 #: plugins/ADM_videoFilters/Fade/ADM_vidFade.cpp:70
 msgid "Start must be before end, and both within video # of frames."
-msgstr ""
-"A kezd?snek a v?g el?tt kell lennie, ?s mindkett?nek vide?n bel?l # frame-ek."
+msgstr "A kezd?snek a v?g el?tt kell lennie, ?s mindkett?nek vide?n bel?l # k?pkock?k."
 
 #: plugins/ADM_videoFilters/FastConvolution/ADM_vidFastConvolution.cpp:172
 #: plugins/ADM_videoFilters/LargeMedian/ADM_vidLargeMedian.cpp:294
 msgid "_Process luma"
-msgstr "_Process luma"
+msgstr "_F?nyess?g folyamat"
 
 #: plugins/ADM_videoFilters/FastConvolution/ADM_vidFastConvolution.cpp:172
 #: plugins/ADM_videoFilters/LargeMedian/ADM_vidLargeMedian.cpp:294
 msgid "Process luma plane"
-msgstr "Process luma plane"
+msgstr "F?nyess?g folyamat-szint"
 
 #: plugins/ADM_videoFilters/FastConvolution/ADM_vidFastConvolution.cpp:173
 #: plugins/ADM_videoFilters/LargeMedian/ADM_vidLargeMedian.cpp:295
 msgid "P_rocess chroma"
-msgstr "P_rocess chroma"
+msgstr "_Sz?ness?g folyamat"
 
 #: plugins/ADM_videoFilters/FastConvolution/ADM_vidFastConvolution.cpp:176
 msgid "Fast Convolution"
@@ -7787,7 +7506,7 @@
 #: plugins/ADM_videoFilters/FastConvolution/Mean.cpp:27
 #: plugins/ADM_videoFilters/FastConvolution/Median.cpp:30
 msgid "Median kernel 3x3. Remove high frequency noise."
-msgstr "Median kernel 3x3. Nagyfrekvenci?s zajok elt?vol?t?sa"
+msgstr "Median kernel 3x3. Nagyfrekvenci?s zajok elt?vol?t?sa."
 
 #: plugins/ADM_videoFilters/FastConvolution/Mean.cpp:31
 msgid "Mean"
@@ -7803,7 +7522,7 @@
 
 #: plugins/ADM_videoFilters/FastConvolution/Sharpen.cpp:30
 msgid "Enhance difference between near pixels."
-msgstr "Pixelek k?z?tti k?l?nbs?g n?vel?se"
+msgstr "Pixelek k?z?tti k?l?nbs?g n?vel?se."
 
 #: plugins/ADM_videoFilters/FluxSmooth/ADM_vidFlux.cpp:57
 #: plugins/ADM_videoFilters/FluxSmooth/ADM_vidFlux.cpp:134
@@ -7816,11 +7535,11 @@
 
 #: plugins/ADM_videoFilters/FluxSmooth/ADM_vidFlux.cpp:129
 msgid "_Temporal threshold:"
-msgstr "_T?rbeli hat?r?rt?k:"
+msgstr "_Id?beli hat?r?rt?k:"
 
 #: plugins/ADM_videoFilters/FluxSmooth/ADM_vidFlux.cpp:130
 msgid "_Spatial threshold:"
-msgstr "_Id?beli hat?r?rt?k:"
+msgstr "_T?rbeli hat?r?rt?k:"
 
 #: plugins/ADM_videoFilters/ForcedPP/ADM_vidForcedPP.cpp:32
 msgid "Forced postprocessing"
@@ -7832,7 +7551,7 @@
 
 #: plugins/ADM_videoFilters/ForcedPP/ADM_vidForcedPP.cpp:45
 msgid "_Quantizer:"
-msgstr "_Quantizer:"
+msgstr "_Kvant?l?:"
 
 #: plugins/ADM_videoFilters/ForcedPP/ADM_vidForcedPP.cpp:65
 msgid "Forced Postprocessing"
@@ -7863,14 +7582,12 @@
 msgstr "<b>Tel?tetts?g:</b>"
 
 #: plugins/ADM_videoFilters/KeepField/ADM_vidHzStackField.cpp:34
-#, fuzzy
 msgid "Horizontal Stack Field"
-msgstr "_V?zszintes csoportos?t?s:"
+msgstr "V?zszintes Stack mez?"
 
 #: plugins/ADM_videoFilters/KeepField/ADM_vidHzStackField.cpp:37
-#, fuzzy
 msgid "Put both fields side by side."
-msgstr "Botj mez?ket egym?s mell? tenni"
+msgstr "Tedd mindk?t mez?t egym?s mell?."
 
 #: plugins/ADM_videoFilters/KeepField/ADM_vidMergeField.cpp:36
 msgid "Merge fields"
@@ -7878,20 +7595,19 @@
 
 #: plugins/ADM_videoFilters/KeepField/ADM_vidMergeField.cpp:39
 msgid "Merge two pictures as if they were two fields."
-msgstr "K?t k?p egyes?t?se, mintha k?t mez? voln?nak"
+msgstr "K?t k?p egyes?t?se, mintha k?t mez? voln?nak."
 
 #: plugins/ADM_videoFilters/KeepField/ADM_vidSeparateField.cpp:32
-#, fuzzy
 msgid "Separate Fields"
 msgstr "K?l?n?ll? mez?k"
 
 #: plugins/ADM_videoFilters/KeepField/ADM_vidSeparateField.cpp:35
 msgid "Each field becomes full picture, half sized."
-msgstr "Mindegyik fele m?ret? mez? teljes k?p lesz."
+msgstr "Minden mez? 1/2 m?ret? teljes k?p lesz."
 
 #: plugins/ADM_videoFilters/KeepField/ADM_vidStackField.cpp:35
 msgid "Stack fields"
-msgstr "Stack fields"
+msgstr "Stack mez?k"
 
 #: plugins/ADM_videoFilters/KeepField/ADM_vidStackField.cpp:38
 msgid "Put two fields on top of one another."
@@ -7903,7 +7619,7 @@
 
 #: plugins/ADM_videoFilters/KeepField/ADM_vidUnstackField.cpp:37
 msgid "Interleave top and bottom part of the picture."
-msgstr "K?p als? ?s fels? r?sz?t ?szef?s?lni"
+msgstr "K?p als? ?s fels? r?sz?t ?sszef?s?lni."
 
 #: plugins/ADM_videoFilters/KernelDeint/ADM_vidKernelDeint.cpp:48
 #: plugins/ADM_videoFilters/KernelDeint/ADM_vidKernelDeint.cpp:82
@@ -7952,7 +7668,7 @@
 
 #: plugins/ADM_videoFilters/LargeMedian/ADM_vidLargeMedian.cpp:37
 msgid "Median kernel 5x5. Good for reducing chroma noise."
-msgstr "Median kernel 5x5. Chroma zaj cs?kkent?s?re haszn?lhat?."
+msgstr "Median kernel 5x5. Sz?ness?g zaj cs?kkent?s?re haszn?lhat?."
 
 #: plugins/ADM_videoFilters/LargeMedian/ADM_vidLargeMedian.cpp:299
 msgid "Large Median 5x5"
@@ -7989,7 +7705,7 @@
 
 #: plugins/ADM_videoFilters/lavDeinterlace/ADM_lavpp_deint.cpp:113
 msgid "Lowpass5 deint"
-msgstr ""
+msgstr "Lowpass5 deint"
 
 #: plugins/ADM_videoFilters/lavDeinterlace/ADM_lavpp_deint.cpp:117
 msgid "_Deinterlacing:"
@@ -8014,7 +7730,7 @@
 
 #: plugins/ADM_videoFilters/Logo/ADM_vidLogo.cpp:80
 msgid "Select JPEG file"
-msgstr "JPEG f?jl kiv?laszt?sa:"
+msgstr "JPEG f?jl kiv?laszt?sa"
 
 #: plugins/ADM_videoFilters/Logo/ADM_vidLogo.cpp:81
 msgid "_X Position:"
@@ -8030,11 +7746,11 @@
 
 #: plugins/ADM_videoFilters/LumaOnly/ADM_vidLuma.cpp:28
 msgid "Luma only"
-msgstr "Csak Luma"
+msgstr "Csak f?nyess?g"
 
 #: plugins/ADM_videoFilters/LumaOnly/ADM_vidLuma.cpp:31
 msgid "Convert picture to greyscale (black and white)."
-msgstr "K?p sz?rke?rnyalatoss? alak?t?sa (fekete-feh?r)"
+msgstr "K?p sz?rke?rnyalatoss? alak?t?sa (fekete-feh?r)."
 
 #: plugins/ADM_videoFilters/McDeint/ADM_vidMcDeint.cpp:76
 #: plugins/ADM_videoFilters/McDeint/ADM_vidMcDeint.cpp:107
@@ -8060,7 +7776,7 @@
 
 #: plugins/ADM_videoFilters/McDeint/ADM_vidMcDeint.cpp:95
 msgid "Extra slow (same as 3+multiple reference frames)"
-msgstr "Nagyon lass? (ugyanaz, mint 3+t?bbsz?r?s referencia frame-ek)"
+msgstr "Nagyon lass? (ugyanaz, mint 3+t?bbsz?r?s referencia k?pkock?k)"
 
 #: plugins/ADM_videoFilters/McDeint/ADM_vidMcDeint.cpp:102
 msgid "_Field dominance:"
@@ -8076,7 +7792,7 @@
 
 #: plugins/ADM_videoFilters/Mosaic/ADM_vidMosaic.cpp:66
 msgid "Split the picture into tiny thumbnails."
-msgstr "K?p sz?tbont?sa kis k?pekre"
+msgstr "K?p sz?tbont?sa kis k?pekre."
 
 #: plugins/ADM_videoFilters/Mosaic/ADM_vidMosaic.cpp:75
 msgid "_Horizontal stacking:"
@@ -8092,7 +7808,7 @@
 
 #: plugins/ADM_videoFilters/Mosaic/ADM_vidMosaic.cpp:78
 msgid "Show _frame"
-msgstr "_Frame megjelen?t?se:"
+msgstr "_Keret megjelen?t?se"
 
 #: plugins/ADM_videoFilters/Mosaic/ADM_vidMosaic.cpp:83
 msgid "Mosaic"
@@ -8128,7 +7844,7 @@
 
 #: plugins/ADM_videoFilters/MPDelogo/gtk/DIA_mpdelogo.cpp:250
 msgid "Band"
-msgstr "Band"
+msgstr "S?v"
 
 #: plugins/ADM_videoFilters/MplayerDenoise3D/ADM_vidMPLD3D.cpp:32
 #: plugins/ADM_videoFilters/MplayerDenoise3D/ADM_vidMPLD3D.cpp:66
@@ -8137,22 +7853,22 @@
 
 #: plugins/ADM_videoFilters/MplayerDenoise3D/ADM_vidMPLD3D.cpp:35
 msgid "High quality version of denoise3d. Slower but more precise."
-msgstr "Denoise3d k?v?l? min?s?g? verzi?ja. Lassabb de pontosabb."
+msgstr "Denoise3d kiv?l? min?s?g? verzi?ja. Lassabb de pontosabb."
 
 #: plugins/ADM_videoFilters/MplayerDenoise3D/ADM_vidMPLD3D.cpp:60
 #: plugins/ADM_videoFilters/MplayerDenoise3D/ADM_vidMPLD3Dlow.cpp:60
 msgid "_Spatial luma strength:"
-msgstr "_T?rbeli luma er?ss?ge:"
+msgstr "_T?rbeli f?nyess?g er?ss?ge:"
 
 #: plugins/ADM_videoFilters/MplayerDenoise3D/ADM_vidMPLD3D.cpp:61
 #: plugins/ADM_videoFilters/MplayerDenoise3D/ADM_vidMPLD3Dlow.cpp:61
 msgid "S_patial chroma strength:"
-msgstr "T?_rbeli chroma er?ss?ge:"
+msgstr "T?_rbeli sz?ness?g er?ss?ge:"
 
 #: plugins/ADM_videoFilters/MplayerDenoise3D/ADM_vidMPLD3D.cpp:62
 #: plugins/ADM_videoFilters/MplayerDenoise3D/ADM_vidMPLD3Dlow.cpp:62
 msgid "_Temporal strength:"
-msgstr "_?tmenet er?ss?ge"
+msgstr "_?tmenet er?ss?ge:"
 
 #: plugins/ADM_videoFilters/MplayerDenoise3D/ADM_vidMPLD3Dlow.cpp:33
 #: plugins/ADM_videoFilters/MplayerDenoise3D/ADM_vidMPLD3Dlow.cpp:66
@@ -8169,7 +7885,7 @@
 
 #: plugins/ADM_videoFilters/MplayerResize/ADM_vidMPLResize.cpp:86
 msgid "Change image size. Faster than Avisynth's Resize."
-msgstr "K?p ?tm?retez?se. Gyorsabb mint az Avisynt ?tm?retez?"
+msgstr "K?p ?tm?retez?se. Gyorsabb mint az Avisynt ?tm?retez?."
 
 #: plugins/ADM_videoFilters/MSharpen/ADM_vidMSharpen.cpp:80
 #: plugins/ADM_videoFilters/MSharpen/ADM_vidMSharpen.cpp:164
@@ -8186,7 +7902,7 @@
 
 #: plugins/ADM_videoFilters/MSharpen/ADM_vidMSharpen.cpp:156
 msgid "_High Q"
-msgstr "_High Q"
+msgstr "_Kiv?l? M"
 
 #: plugins/ADM_videoFilters/MSmooth/ADM_vidMsmooth.cpp:103
 msgid "MSmooth by Donald Graft"
@@ -8194,11 +7910,11 @@
 
 #: plugins/ADM_videoFilters/MSmooth/ADM_vidMsmooth.cpp:106
 msgid "Smooth the image, don't blur edges. Useful on anime."
-msgstr "K?p l?gy?t?sa. Nem mossa el az ?leket. Anime-n?l hasznos."
+msgstr "K?p l?gy?t?sa. Nem mossa el az ?leket. Anim?ci?n?l hasznos."
 
 #: plugins/ADM_videoFilters/MSmooth/ADM_vidMsmooth.cpp:181
 msgid "_High quality"
-msgstr "_K?v?l? min?s?g"
+msgstr "_Kiv?l? min?s?g"
 
 #: plugins/ADM_videoFilters/MSmooth/ADM_vidMsmooth.cpp:182
 msgid "Show _mask"
@@ -8230,15 +7946,15 @@
 
 #: plugins/ADM_videoFilters/PalShift/ADM_vidPalSmart.cpp:44
 msgid "Smartly revert non constant PAL field shift."
-msgstr "Nem ?lland? PAL mez?k eltol?s?nak 'okos' visszat?r?se"
+msgstr "Nem ?lland? PAL mez?k eltol?s?nak 'okos' visszat?r?se."
 
 #: plugins/ADM_videoFilters/Pulldown/ADM_vidPulldown.cpp:38
 msgid "Pulldown"
-msgstr "Leny?l?"
+msgstr "Pulldown"
 
 #: plugins/ADM_videoFilters/Pulldown/ADM_vidPulldown.cpp:41
 msgid "Convert 24 fps to 30 fps by repeating fields."
-msgstr "24 fps-r?l 30 fps-re konvert?l?s a mez?k ism?tl?s?vel"
+msgstr "24 fps-r?l 30 fps-re konvert?l?s a mez?k ism?tl?s?vel."
 
 #: plugins/ADM_videoFilters/PulldownRemoval/ADM_vidFieldUnblend.cpp:73
 msgid "Metrics"
@@ -8255,15 +7971,15 @@
 
 #: plugins/ADM_videoFilters/ResampleFps/ADM_vidResampleFPS.cpp:57
 msgid "Change framerate while keeping duration."
-msgstr "Frame-r?ta m?dos?t?sa az id?tartam megtart?s?val"
+msgstr "K?pkockasebess?g m?dos?t?sa az id?tartam megtart?s?val."
 
 #: plugins/ADM_videoFilters/ResampleFps/ADM_vidResampleFPS.cpp:72
 msgid "_New frame rate:"
-msgstr "?_j frame-r?ta:"
+msgstr "?_j k?pkockasebess?g:"
 
 #: plugins/ADM_videoFilters/ResampleFps/ADM_vidResampleFPS.cpp:73
 msgid "_Blend"
-msgstr "_Kever?s"
+msgstr "_Vegy?t?s"
 
 #: plugins/ADM_videoFilters/Reverse/ADM_vidReverse.cpp:33
 msgid "Reverse"
@@ -8271,7 +7987,7 @@
 
 #: plugins/ADM_videoFilters/Reverse/ADM_vidReverse.cpp:36
 msgid "Play video backward."
-msgstr "Video lej?tsz?sa visszafel?."
+msgstr "Vide? lej?tsz?sa visszafel?."
 
 #: plugins/ADM_videoFilters/Rotate/ADM_vidRotate.cpp:54
 #: plugins/ADM_videoFilters/Rotate/ADM_vidRotate.cpp:267
@@ -8280,7 +7996,7 @@
 
 #: plugins/ADM_videoFilters/Rotate/ADM_vidRotate.cpp:57
 msgid "Rotate the picture by 90, 180 or 270 degrees."
-msgstr "K?p elforgat?sa 90, 180 vagy 270 fokkal"
+msgstr "K?p elforgat?sa 90, 180 vagy 270 fokkal."
 
 #: plugins/ADM_videoFilters/Rotate/ADM_vidRotate.cpp:261
 msgid "90 degrees"
@@ -8308,7 +8024,7 @@
 
 #: plugins/ADM_videoFilters/Rotate/ADM_vidRotate.cpp:265
 msgid "_Angle:"
-msgstr "_Sz?g"
+msgstr "_Sz?g:"
 
 #: plugins/ADM_videoFilters/Soften/ADM_vidSoften.cpp:55
 #: plugins/ADM_videoFilters/Soften/ADM_vidSoften.cpp:75
@@ -8317,15 +8033,15 @@
 
 #: plugins/ADM_videoFilters/Soften/ADM_vidSoften.cpp:58
 msgid "A variant of stabilize."
-msgstr "A stabiliz?l?s egy v?ltozata"
+msgstr "A stabiliz?l?s egy v?ltozata."
 
 #: plugins/ADM_videoFilters/Soften/ADM_vidSoften.cpp:69
 msgid "_Luma threshold:"
-msgstr "_Luma hat?r?rt?k:"
+msgstr "_F?nyess?g hat?r?rt?k:"
 
 #: plugins/ADM_videoFilters/Soften/ADM_vidSoften.cpp:70
 msgid "C_hroma threshold:"
-msgstr "C_hroma hat?r?rt?k:"
+msgstr "_Sz?ness?g hat?r?rt?k:"
 
 #: plugins/ADM_videoFilters/Soften/ADM_vidSoften.cpp:71
 msgid "_Radius:"
@@ -8342,7 +8058,7 @@
 
 #: plugins/ADM_videoFilters/Srt/ADM_vidSRT.cpp:189
 msgid "Could not open subtitle file"
-msgstr "A feliratf?jlt nem lehet megynitni"
+msgstr "A feliratf?jlt nem lehet megnyitni"
 
 #: plugins/ADM_videoFilters/Srt/ADM_vidSRT.cpp:209
 msgid "Cannot identify subtitle format"
@@ -8362,7 +8078,7 @@
 
 #: plugins/ADM_videoFilters/Srt/DIA_srt.cpp:41
 msgid "Chinese Traditional (Big5)"
-msgstr "K?nai trad?cion?lis (Big5)"
+msgstr "K?nai tradicion?lis (Big5)"
 
 #: plugins/ADM_videoFilters/Srt/DIA_srt.cpp:42
 msgid "Cyrillic"
@@ -8426,7 +8142,7 @@
 
 #: plugins/ADM_videoFilters/Srt/DIA_srt.cpp:105
 msgid "_Auto split"
-msgstr "_Aut? feloszt?s:"
+msgstr "_Aut? feloszt?s"
 
 #: plugins/ADM_videoFilters/Srt/DIA_srt.cpp:106
 msgid "_Delay (ms):"
@@ -8476,7 +8192,7 @@
 
 #: plugins/ADM_videoFilters/SwapField/ADM_vidSwapFields.cpp:34
 msgid "Swap top and bottom fields."
-msgstr "Fels? ?s als? mez?k felcser?l?se"
+msgstr "Fels? ?s als? mez?k felcser?l?se."
 
 #: plugins/ADM_videoFilters/SwapField/ADM_vidSwapSmart.cpp:35
 msgid "Smart swap fields"
@@ -8484,9 +8200,7 @@
 
 #: plugins/ADM_videoFilters/SwapField/ADM_vidSwapSmart.cpp:38
 msgid "Smartly swap fields. Needed when field order changes."
-msgstr ""
-"Intelligens mez? felcser?l?s. Sz?ks?ges, amikor a mez?k sorrendje "
-"megv?ltozik."
+msgstr "Intelligens mez? felcser?l?s. Sz?ks?ges, amikor a mez?k sorrendje megv?ltozik."
 
 #: plugins/ADM_videoFilters/SwapUV/ADM_vidUVSwap.cpp:28
 msgid "Swap U and V"
@@ -8494,7 +8208,7 @@
 
 #: plugins/ADM_videoFilters/SwapUV/ADM_vidUVSwap.cpp:31
 msgid "Invert chroma U and chroma V."
-msgstr "Chroma U ?s Chroma V invert?l?sa."
+msgstr "Sz?ness?g U ?s Sz?ness?g V invert?l?sa."
 
 #: plugins/ADM_videoFilters/Tdeint/ADM_vidTdeint.cpp:154
 #: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:108
@@ -8615,15 +8329,15 @@
 
 #: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:91
 msgid "_Evalute all frames"
-msgstr "?sszes f_rame ki?rt?kel?se"
+msgstr "?sszes k?pko_cka ki?rt?kel?se"
 
 #: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:94
 msgid "Motion threshold, l_uma:"
-msgstr "Motion hat?r?rt?k, l_uma:"
+msgstr "Motion hat?r?rt?k, _F?nyess?g:"
 
 #: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:95
 msgid "Motion threshold, c_hroma:"
-msgstr "Motion hat?r?rt?k, c_hroma:"
+msgstr "Motion hat?r?rt?k, _Sz?ness?g:"
 
 #: plugins/ADM_videoFilters/Tdeint/DIA_tdeint.cpp:96
 msgid "Area com_bing threshold:"
@@ -8648,7 +8362,7 @@
 
 #: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:57
 msgid "Great deinterlacing package including IVTC."
-msgstr "Nagyszer? deinterlace csomag, IVTC-vel"
+msgstr "Nagyszer? deinterlace csomag, IVTC-vel."
 
 #: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:76
 msgid "No strategy"
@@ -8684,7 +8398,7 @@
 
 #: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:97
 msgid "Postproc and show zones (debug)"
-msgstr "Ut?munk?latok ?s z?n?k megjelen?t?se (hibakeres?s)."
+msgstr "Ut?munk?latok ?s z?n?k megjelen?t?se (hibakeres?s)"
 
 #: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:98
 msgid "Process image (not fields)"
@@ -8704,7 +8418,7 @@
 
 #: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:106
 msgid "_Try backward:"
-msgstr "_Pr?b?lja visszafel?"
+msgstr "_Pr?b?lja visszafel?:"
 
 #: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:108
 msgid "_Direct threshold:"
@@ -8724,7 +8438,7 @@
 
 #: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:113
 msgid "_Use chroma to decide"
-msgstr "C_hroma haszn?lata a d?nt?shez"
+msgstr "S_z?ness?g haszn?lata a d?nt?shez"
 
 #: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:114
 msgid "Sho_w info"
@@ -8736,7 +8450,7 @@
 
 #: plugins/ADM_videoFilters/Telecide/ADM_vidDecTelecide.cpp:116
 msgid "Bl_end"
-msgstr "Kever?s"
+msgstr "Vegy?t?s"
 
 #: plugins/ADM_videoFilters/TemporalCleaner/ADM_vidVlad.cpp:71
 #: plugins/ADM_videoFilters/TemporalCleaner/ADM_vidVlad.cpp:95
@@ -8749,11 +8463,11 @@
 
 #: plugins/ADM_videoFilters/TemporalCleaner/ADM_vidVlad.cpp:90
 msgid "_Luma temporal threshold:"
-msgstr "_Luma ?tmenet hat?r?rt?k:"
+msgstr "_F?nyess?g ?tmenet hat?r?rt?k:"
 
 #: plugins/ADM_videoFilters/TemporalCleaner/ADM_vidVlad.cpp:91
 msgid "Ch_roma temporal threshold:"
-msgstr "_Chroma ?tmenet hat?r?rt?k:"
+msgstr "_Sz?ness?g ?tmenet hat?r?rt?k:"
 
 #: plugins/ADM_videoFilters/TIsophote/ADM_vidTisophote.cpp:46
 msgid "TIsophote"
@@ -8777,15 +8491,15 @@
 
 #: plugins/ADM_videoFilters/TIsophote/ADM_vidTisophote.cpp:68
 msgid "_Chroma:"
-msgstr "_Chroma:"
+msgstr "_Sz?ness?g:"
 
 #: plugins/ADM_videoFilters/TIsophote/ADM_vidTisophote.cpp:68
 msgid "Process chroma."
-msgstr "Chroma feldolgoz?s"
+msgstr "Sz?ness?g folyamat."
 
 #: plugins/ADM_videoFilters/TIsophote/ADM_vidTisophote.cpp:69
 msgid "_Step:"
-msgstr "_L?p?s"
+msgstr "_L?p?s:"
 
 #: plugins/ADM_videoFilters/TIsophote/ADM_vidTisophote.cpp:69
 msgid "Step."
@@ -8801,7 +8515,7 @@
 
 #: plugins/ADM_videoFilters/VerticalFlip/ADM_vidFlipV.cpp:51
 msgid "Vertically flip the picture."
-msgstr "A k?p f?gg?leges t?kr?z?se"
+msgstr "A k?p f?gg?leges t?kr?z?se."
 
 #: plugins/ADM_videoFilters/Whirl/ADM_vidWhirl.cpp:59
 msgid "Whirl"
@@ -8809,7 +8523,7 @@
 
 #: plugins/ADM_videoFilters/Whirl/ADM_vidWhirl.cpp:62
 msgid "Useless whirlwind effect."
-msgstr "?rv?ny hat?s haszn?lhatatlan"
+msgstr "?rv?ny hat?s haszn?lhatatlan."
 
 #: plugins/ADM_videoFilters/Yadif/ADM_vidYadif.cpp:77
 #: plugins/ADM_videoFilters/Yadif/ADM_vidYadif.cpp:152
@@ -8840,452 +8554,41 @@
 msgid "_Order:"
 msgstr "S_orrend:"
 
-#: scripts/auto/Optical Disc/DVD.js:9 Disc/Super Video CD.js:9 Disc/Video
+#: scripts/auto/Optical Disc/DVD.js:9
+#: Disc/Super Video CD.js:9
+#: Disc/Video
 msgid "A video file must be open to use this Auto Wizard."
-msgstr ""
+msgstr "A vide? f?jl-t kell megnyitni az Auto Var?zsl? haszn?lat?hoz."
 
 #: scripts/auto/Optical Disc/DVD.js:12
-#, fuzzy
 msgid "DVD Auto Wizard"
-msgstr "Var?zsl?"
+msgstr "DVD Auto Var?zsl?"
 
 #: scripts/auto/Optical Disc/Super Video CD.js:12
 msgid "Super Video CD Auto Wizard"
-msgstr ""
+msgstr "Super Video CD Auto Var?zsl?"
 
 #: scripts/auto/Optical Disc/Video CD.js:12
-#, fuzzy
 msgid "Video CD Auto Wizard"
-msgstr "Var?zsl?"
+msgstr "Vide? CD Auto Var?zsl?"
 
 #: scripts/video/autoWizard.js:4
-#, fuzzy
 msgid "Resolution:"
-msgstr "Teljes id?tartam:"
+msgstr "Felbont?s:"
 
 #: scripts/video/autoWizard.js:5
-#, fuzzy
 msgid "Source Aspect Ratio:"
 msgstr "_Forr?s k?par?nya:"
 
 #: scripts/video/autoWizard.js:6
-#, fuzzy
 msgid "Destination Aspect Ratio:"
 msgstr "C?_l k?par?nya:"
 
 #: scripts/auto/Optical Disc/translate_dummy.cpp:3
 msgid "Optical Disc"
-msgstr ""
+msgstr "Optikai lemez"
 
 #: scripts/auto/Optical Disc/translate_dummy.cpp:6
-#, fuzzy
 msgid "Video CD"
-msgstr "Vide?"
+msgstr "Vide? CD"
 
-#~ msgid "MJPEG"
-#~ msgstr "MJPEG"
-
-#~ msgid "Xvid"
-#~ msgstr "Xvid"
-
-#~ msgid "Xvid4"
-#~ msgstr "Xvid4"
-
-#~ msgid "LavCodec"
-#~ msgstr "LavCodec"
-
-#~ msgid "DivX"
-#~ msgstr "DivX"
-
-#~ msgid "H.263 (lavc)"
-#~ msgstr "H.263 (lavc)"
-
-#~ msgid "H.263+ (lavc)"
-#~ msgstr "H.263+ (lavc)"
-
-#~ msgid "MPEG-4 ASP (lavc)"
-#~ msgstr "MPEG-4 ASP (lavc)"
-
-#~ msgid "DV (lavc)"
-#~ msgstr "DV (lavc)"
-
-#~ msgid "FLV1 (lavc)"
-#~ msgstr "FLV1 (lavc)"
-
-#~ msgid "Snow (lavc)"
-#~ msgstr "Snow (lavc)"
-
-#~ msgid "FF Huffyuv (lavc)"
-#~ msgstr "FF Huffyuv (lavc)"
-
-#~ msgid "Huffyuv (lavc)"
-#~ msgstr "Huffyuv (lavc)"
-
-#~ msgid "FFV1 (lavc)"
-#~ msgstr "FFV1 (lavc)"
-
-#~ msgid "MJPEG (lavc)"
-#~ msgstr "MJPEG (lavc)"
-
-#~ msgid "VCD (lavc)"
-#~ msgstr "VCD (lavc)"
-
-#~ msgid "DVD (lavc)"
-#~ msgstr "DVD (lavc)"
-
-#~ msgid "SVCD (lavc)"
-#~ msgstr "SVCD (lavc)"
-
-#~ msgid "VCD (mpeg2enc)"
-#~ msgstr "VCD (mpeg2enc)"
-
-#~ msgid "SVCD (mpeg2enc)"
-#~ msgstr "SVCD (mpeg2enc)"
-
-#~ msgid "DVD (mpeg2enc)"
-#~ msgstr "DVD (mpeg2enc)"
-
-#~ msgid "MPEG-4 ASP (Xvid4)"
-#~ msgstr "MPEG-4 ASP (Xvid4)"
-
-#~ msgid "Not activated."
-#~ msgstr "Nem aktiv?lt"
-
-#~ msgid "Pipe to"
-#~ msgstr "Tov?bb?t?s a"
-
-#~ msgid "Application path/name (/usr/bin/sox...)"
-#~ msgstr "Alkalmaz?s ?tvonal/n?v (/usr/bin/sox...)"
-
-#~ msgid "Full parameter line"
-#~ msgstr "Teljes param?ter sor"
-
-#~ msgid "Extra Shrink Factor :"
-#~ msgstr "Extra Shrink t?nyez? :"
-
-#~ msgid "Extra Settings"
-#~ msgstr "Extra be?ll?t?sok"
-
-#~ msgid "Lame command"
-#~ msgstr "Lame parancs"
-
-#~ msgid "Enter parameters (i.e. -b 192 -m s ...)"
-#~ msgstr "Param?terek (pl. -b 192 -m s ...)"
-
-#~ msgid "AVI _Muxer glyph"
-#~ msgstr "AVI _Muxer be?ll?t?sa"
-
-#~ msgid "_VCD"
-#~ msgstr "_VCD"
-
-#~ msgid "_SVCD"
-#~ msgstr "_SVCD"
-
-#~ msgid "_DVD"
-#~ msgstr "_DVD"
-
-#~ msgid "_PSP"
-#~ msgstr "_PSP"
-
-#~ msgid "PSP (_H.264)"
-#~ msgstr "PSP (_H.264)"
-
-#~ msgid "F_LV"
-#~ msgstr "F_LV"
-
-#~ msgid "IPOD (mpeg4)"
-#~ msgstr "_IPOD (mpeg4)"
-
-#~ msgid "Save Script"
-#~ msgstr "Szkript ment?se"
-
-#~ msgid "Save as script [Ctrl-J]"
-#~ msgstr "Szkript ment?se m?s n?ven [Ctrl-J]"
-
-#~ msgid "DVD Res"
-#~ msgstr "DVD felb"
-
-#~ msgid "DVD resolution [Ctrl-1]"
-#~ msgstr "DVD felbont?s [Ctrl-1]"
-
-#~ msgid "Half D1 Res"
-#~ msgstr "F?l D1 felb"
-
-#~ msgid "Half D1 resolution [Ctrl-2]"
-#~ msgstr "F?l D1 felbont?s [Ctrl-2]"
-
-#~ msgid "SVCD Res"
-#~ msgstr "SVCD felb"
-
-#~ msgid "SVCD resolution [Ctrl-3]"
-#~ msgstr "SVCD felbont?s [Ctrl-3]"
-
-#~ msgid "VCD Res"
-#~ msgstr "VCD felb"
-
-#~ msgid "VCD resolution [Ctrl-4]"
-#~ msgstr "VCD felbont?s [Ctrl-4]"
-
-#~ msgid "Noise"
-#~ msgstr "Zaj"
-
-#~ msgid "Sharpness"
-#~ msgstr "?les?t?s"
-
-#~ msgid "Misc"
-#~ msgstr "Vegyes"
-
-#~ msgid "External"
-#~ msgstr "K?ls?"
-
-#~ msgid "VCD 40 kB"
-#~ msgstr "VCD 40 kB"
-
-#~ msgid "SVCD 112 kB"
-#~ msgstr "SVCD 112 kB"
-
-#~ msgid "DVD 224 kB"
-#~ msgstr "DVD 224 kB"
-
-#~ msgid "_Swap U&V"
-#~ msgstr "U&V c_sere"
-
-#~ msgid "MJPEG Configuration"
-#~ msgstr "MJPEG be?ll?t?sa"
-
-#~ msgid "Video Codecs"
-#~ msgstr "Video kodek-ek"
-
-#~ msgid "x264"
-#~ msgstr "x264"
-
-#~ msgid "aRts"
-#~ msgstr "aRts"
-
-#~ msgid "ESD"
-#~ msgstr "ESD"
-
-#~ msgid "FreeType 2"
-#~ msgstr "FreeType 2"
-
-#~ msgid "ALSA"
-#~ msgstr "ALSA"
-
-#~ msgid "OSS"
-#~ msgstr "OSS"
-
-#~ msgid "Codecs"
-#~ msgstr "Kodekek"
-
-#~ msgid "VCD"
-#~ msgstr "VCD"
-
-#~ msgid "SVCD"
-#~ msgstr "SVCD"
-
-#~ msgid "DVD half D1"
-#~ msgstr "DVD f?l D1"
-
-#~ msgid "PSP (480 * 272)"
-#~ msgstr "PSP (480 * 272)"
-
-#~ msgid "PSP full res. (720 * 480)"
-#~ msgstr "PSP teljes felb. (720 * 480)"
-
-#~ msgid "_Target type:"
-#~ msgstr "C?l _t?pusa:"
-
-#~ msgid "_Split MPEG files every (MB):"
-#~ msgstr "MPEG f?jlok feloszt?sa az al?bbi m?retre (MB) :"
-
-#~ msgid "_Filter directory:"
-#~ msgstr "_Sz?r?k k?nyvt?ra:"
-
-#~ msgid "Select filter directory"
-#~ msgstr "Sz?r?k k?nyvt?r?nak kiv?laszt?sa"
-
-#~ msgid "_Load external filters"
-#~ msgstr "_K?ls? sz?r?k beolvas?sa"
-
-#~ msgid "External Filters"
-#~ msgstr "K?ls? sz?r?k"
-
-#~ msgid "X1"
-#~ msgstr "X1"
-
-#~ msgid "MB comparison"
-#~ msgstr "MB ?sszehasonl?t?s"
-
-#~ msgid "Matrices"
-#~ msgstr "M?trixok"
-
-#~ msgid "_Quarter pixel"
-#~ msgstr "_Quarter pixel"
-
-#~ msgid "_Number of B frames:"
-#~ msgstr "B frame-ek sz?ma:"
-
-#~ msgid "_Filesize tolerance (kb):"
-#~ msgstr "_F?jlm?ret tolerancia (kb):"
-
-#~ msgid "libavcodec MPEG-4 configuration"
-#~ msgstr "Libavcodec MPEG-4 be?ll?t?sa"
-
-#~ msgid "libmpeg2enc VCD"
-#~ msgstr "Libmpeg2enc VCD"
-
-#~ msgid "libmpeg2enc SVCD"
-#~ msgstr "Libmpeg2enc SVCD"
-
-#~ msgid "libmpeg2enc DVD"
-#~ msgstr "Libmpeg2enc DVD"
-
-#~ msgid "FFmpeg MPEG-1 VBR"
-#~ msgstr "FFmpeg MPEG-1 VBR"
-
-#~ msgid "FFmpeg MPEG-2 SVCD VBR"
-#~ msgstr "FFmpeg MPEG-2 SVCD VBR"
-
-#~ msgid "FFmpeg MPEG-2 DVD VBR"
-#~ msgstr "FFmpeg MPEG-2 DVD VBR"
-
-#~ msgid "Error in pass 1"
-#~ msgstr "Hiba az els? menetben"
-
-#~ msgid "Error in pass 2"
-#~ msgstr "Hiba a m?sodik menetben"
-
-#~ msgid "Troubles ahead"
-#~ msgstr "Probl?m?k el?l"
-
-#~ msgid "This a VOP packed AVI."
-#~ msgstr "Ez egy VOP csomagolt AVI."
-
-#~ msgid "Internal error opening codec"
-#~ msgstr "Bels? hiba a kodek megnyit?s?n?l"
-
-#~ msgid "Internal error with context for  codec"
-#~ msgstr "Bels? hiba a kodek-el ?sszef?g?sben"
-
-#~ msgid "At the moment, the DV codec only accepts 720*576 at 25"
-#~ msgstr "Jelenleg a DV codec csak 720*576 at 25-?s felbont?st fogad el "
-
-#~ msgid "Only QCIF and subQCIF are allowed for H.263"
-#~ msgstr "H.263-n?l csak QCIF ?s subQCIF megengedettek"
-
-#~ msgid ""
-#~ "This is to be used to undo packed VOP on MPEG-4.\n"
-#~ "Continue ?"
-#~ msgstr ""
-#~ "Ezt a t?m?r?tett VOP visszavon?s?ra lehet haszn?lni MPEG-4-n?l.\n"
-#~ "Folytatja ?"
-
-#~ msgid "Select AVI File to Write"
-#~ msgstr "AVI f?jl kiv?laszt?sa ?r?sra"
-
-#~ msgid "No audio track"
-#~ msgstr "Nincs audi? s?v"
-
-#~ msgid "An audio track is necessary to create such file"
-#~ msgstr "Egy audi? s?v sz?ks?ges az ilyen t?pus? f?jl l?trehoz?s?hoz"
-
-#~ msgid "Cannot select the MPEG-4 SP codec."
-#~ msgstr "Nem lehet kiv?lasztani az MPEG-4 SP kodek-et."
-
-#~ msgid "No AAC audio encoder plugin found."
-#~ msgstr "AAC audi? k?dol? plugin nem tal?lhat?."
-
-#~ msgid ""
-#~ "The MP3 codec does not allow disabling reservoir.\n"
-#~ "Install lame plugin"
-#~ msgstr ""
-#~ "Az MP3 kodek nem engedi letiltani t?rol?t.\n"
-#~ "Telep?tse a LAME plugin-t"
-
-#~ msgid ""
-#~ "You don't have LAME!.\n"
-#~ "It is needed to create FLV  video."
-#~ msgstr ""
-#~ "Nincs LAME telep?tve!\n"
-#~ "Ez sz?ks?ges FLV vide? k?sz?t?shez."
-
-#~ msgid "Cannot select FLV1  codec."
-#~ msgstr "Nem v?laszthat? FLV1 kodek."
-
-#~ msgid "Cannot select mpeg4 sp codec."
-#~ msgstr "Nem v?laszthat? MPEG4 SP kodek."
-
-#~ msgid ""
-#~ "You don't have FAAC!.\n"
-#~ "It is needed to create PSP compatible video."
-#~ msgstr ""
-#~ "Nincs FAAC telep?tve!\n"
-#~ "Ez sz?ks?ges PSP kompatibilis vide? k?sz?t?shez."
-
-#~ msgid "Unknown flag :"
-#~ msgstr "Ismeretlen jelz?:"
-
-#~ msgid "Xvid Configuration File (*.xml)"
-#~ msgstr "Xvid konvigur?ci?s f?jl (*.xml)"
-
-#~ msgid "kbit/s"
-#~ msgstr "kbit/s"
-
-#~ msgid "MB"
-#~ msgstr "MB"
-
-#~ msgid "Average Bitrate:"
-#~ msgstr "?tlag bitr?ta:"
-
-#~ msgid "Read Error"
-#~ msgstr "Olvas?si hiba"
-
-#~ msgid "Quantiser"
-#~ msgstr "Quantiser"
-
-#~ msgid "Frame Start"
-#~ msgstr "Kezd? frame"
-
-#~ msgid "Frame End"
-#~ msgstr "Utols? frame"
-
-#~ msgid "Value"
-#~ msgstr "?rt?k"
-
-#~ msgid "9 (Best)"
-#~ msgstr "9 (Legjobb)"
-
-#~ msgid "Disabled"
-#~ msgstr "Letiltva"
-
-#~ msgid "Enabled"
-#~ msgstr "Enged?lyezve"
-
-#~ msgid "x264 Configuration File (*.xml)"
-#~ msgstr "x264 konfigur?ci?s f?jl (*.xml)"
-
-#~ msgid "Quality:"
-#~ msgstr "Min?s?g:"
-
-#~ msgid ""
-#~ "Trellis optimisation isn't possible without CABAC coding enabled.  "
-#~ "Trellis optimisation will automatically be disabled.\n"
-#~ "\n"
-#~ " Do you wish to continue?"
-#~ msgstr ""
-#~ "Trellis optimaliz?l?s nem lehets?ges a CABAC k?dol?s enged?lyez?se "
-#~ "n?lk?l. Trellis optimaliz?l?s automatikusan letiltva.\n"
-#~ "Biztos, hogy folytatja?"
-
-#~ msgid ""
-#~ "Trellis optimisation requires CABAC coding to be enabled.  CABAC coding "
-#~ "will automatically be enabled.\n"
-#~ "\n"
-#~ "Do you wish to continue?"
-#~ msgstr ""
-#~ "Trellis optimaliz?l?s nem lehets?ges a CABAC k?dol?s enged?lyez?se "
-#~ "n?lk?l. Trellis optimaliz?l?s automatikusan enged?lyezve.\n"
-#~ "Biztos, hogy folytatja?"
-
-#~ msgid "Are you sure you wish to delete the selected zone?"
-#~ msgstr "Biztos, hogy t?rli a kiv?lasztott z?n?t?"



From mean at mail.berlios.de  Mon Aug 23 20:22:04 2010
From: mean at mail.berlios.de (mean at mail.berlios.de)
Date: Mon, 23 Aug 2010 20:22:04 +0200
Subject: [Avidemux-svn-commit] r6541 - in
	branches/avidemux_2.6_branch_mean/avidemux_core: ADM_core/src
	ADM_coreDemuxerMpeg/src
Message-ID: <20100823182204.AEE55480259@sheep.berlios.de>

Author: mean
Date: 2010-08-23 20:22:04 +0200 (Mon, 23 Aug 2010)
New Revision: 6541

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/ADM_fileio.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/ADM_memcpy.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/src/dmx_io.cpp
Log:
[core] Fix some cppcheck warnings

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/ADM_fileio.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/ADM_fileio.cpp	2010-08-22 06:27:11 UTC (rev 6540)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/ADM_fileio.cpp	2010-08-23 18:22:04 UTC (rev 6541)
@@ -361,25 +361,21 @@
 #endif
 
 	// Try to open the .avidemux directory
-	char *dirname = new char[strlen(home) + strlen(ADM_DIR_NAME) + 2];
-	strcpy(dirname, home);
-	strcat(dirname, ADM_DIR_NAME);
 
-	if (!ADM_mkdir(dirname))
+	strcpy(ADM_basedir, home);
+	strcat(ADM_basedir, ADM_DIR_NAME);
+    delete [] home;
+    home=NULL;
+
+	if (!ADM_mkdir(ADM_basedir))
 	{
 		printf("Oops: cannot create the .avidemux directory", NULL);
-		delete [] dirname;
 		return NULL;
 	}
 
-	delete [] dirname;
-
-	// Now built the filename
-	strncpy(ADM_basedir,home, 1023);
-	strncat(ADM_basedir, ADM_DIR_NAME, 1023 - strlen(ADM_basedir));
+	// Now built the filename
 	baseDirDone = 1;
 	printf("Using %s as base directory for prefs/jobs/...\n", ADM_basedir);
-
 	return ADM_basedir;
 }
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/ADM_memcpy.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/ADM_memcpy.cpp	2010-08-22 06:27:11 UTC (rev 6540)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/ADM_memcpy.cpp	2010-08-23 18:22:04 UTC (rev 6541)
@@ -401,7 +401,7 @@
 #if defined(ADM_CPU_X86)
 static unsigned long long int rdtsc(void)
 {
-  unsigned long long int x;
+  unsigned long long int x=0;
 
   /* that should prevent us from trying cpuid with old cpus */
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/src/dmx_io.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/src/dmx_io.cpp	2010-08-22 06:27:11 UTC (rev 6540)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/src/dmx_io.cpp	2010-08-23 18:22:04 UTC (rev 6541)
@@ -131,7 +131,7 @@
                 number[decimals] = '\0';
 
                 // <right> part
-                right = new char[ strlen(dot) ];
+                right = new char[ strlen(dot)+1 ];
                 strcpy( right, dot );
 
                 // add the file, and all existing follow-ups



From mean at mail.berlios.de  Mon Aug 23 20:22:05 2010
From: mean at mail.berlios.de (mean at mail.berlios.de)
Date: Mon, 23 Aug 2010 20:22:05 +0200
Subject: [Avidemux-svn-commit] r6542 -
	branches/avidemux_2.6_branch_mean/avidemux/common
Message-ID: <20100823182205.E1201480259@sheep.berlios.de>

Author: mean
Date: 2010-08-23 20:22:05 +0200 (Mon, 23 Aug 2010)
New Revision: 6542

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/gui_navigate.cpp
Log:
[ui] Disable crashing/legacy function from UI

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp	2010-08-23 18:22:04 UTC (rev 6541)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp	2010-08-23 18:22:05 UTC (rev 6542)
@@ -89,6 +89,7 @@
 extern void audioCodecChanged(int newcodec);
 extern void videoCodecChanged(int newcodec);
 extern bool ADM_mux_configure(int index);
+void brokenAct(void);
 //
 //  Sub gui files...
 //
@@ -128,6 +129,13 @@
   }
   switch (action)
     {
+        case ACT_TimeShift:
+        case ACT_JumpToFrame:
+        case ACT_JumpToTime:
+        case ACT_Goto:
+        case ACT_AudioMap:
+                                brokenAct();
+                                return;
         case ACT_PY_SHELL:
                                 interactiveTinyPy();
                                 return;
@@ -1451,5 +1459,10 @@
                admPreview::samePicture();
                GUI_setCurrentFrameAndTime();
 }
+void brokenAct(void)
+{
+    GUI_Error_HIG("Oops","This function is disabled or no longer valid");
+}
+
 //
 // EOF

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/gui_navigate.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/gui_navigate.cpp	2010-08-23 18:22:04 UTC (rev 6541)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/gui_navigate.cpp	2010-08-23 18:22:05 UTC (rev 6542)
@@ -87,21 +87,6 @@
                  
             }
             break;
-      case ACT_Goto:
-#if 0
-          uint32_t fn;
-          fn = video_body->getCurrentFrame();
-          if (DIA_GetIntegerValue
-              ((int *) &fn, 0, avifileinfo->nb_frames,
-               QT_TR_NOOP("Go to Frame"), QT_TR_NOOP("_Go to frame:")))
-            {
-            if (fn < avifileinfo->nb_frames)
-                GUI_GoToFrame(fn);
-            else
-                GUI_Error_HIG(QT_TR_NOOP("Out of bounds"), NULL);
-            }
-#endif
-          break;
       case ACT_Back25Frames:
 #if 0
           if (video_body->getCurrentFrame() >= 25)
@@ -168,15 +153,6 @@
              GUI_setCurrentFrameAndTime();
             //GUI_GoToKFrameTime(0);
             break;
-      case ACT_JumpToFrame:
-        {
-              // read value
-              uint32_t nf = UI_readCurFrame();
-              if (nf < avifileinfo->nb_frames)
-                  GUI_GoToFrame(nf);
-              UI_JumpDone();
-        }
-	  break;
       case ACT_JumpToTime:
 	  {
 	      uint16_t hh, mm, ss, ms;



From mean at mail.berlios.de  Mon Aug 23 20:22:07 2010
From: mean at mail.berlios.de (mean at mail.berlios.de)
Date: Mon, 23 Aug 2010 20:22:07 +0200
Subject: [Avidemux-svn-commit] r6543 -
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_amrnb
Message-ID: <20100823182207.211B1480259@sheep.berlios.de>

Author: mean
Date: 2010-08-23 20:22:06 +0200 (Mon, 23 Aug 2010)
New Revision: 6543

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_amrnb/ADM_ad_amrnb.cpp
Log:
[amr_nb] Fix build, patch from jan kardell

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_amrnb/ADM_ad_amrnb.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_amrnb/ADM_ad_amrnb.cpp	2010-08-23 18:22:05 UTC (rev 6542)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_amrnb/ADM_ad_amrnb.cpp	2010-08-23 18:22:06 UTC (rev 6543)
@@ -41,7 +41,8 @@
 };
 // Supported formats + declare our plugin
 //*******************************************************
-   static  uint32_t Formats[]={WAV_AMRNB};
+   
+   static ad_supportedFormat Formats[]={{WAV_AMRNB,AD_MEDIUM_QUAL}};
    DECLARE_AUDIO_DECODER(ADM_AudiocodecAmrNb,						// Class
 		   	0,0,1, 												// Major, minor,patch 
 		   	Formats, 											// Supported formats



From mean at mail.berlios.de  Mon Aug 23 20:22:08 2010
From: mean at mail.berlios.de (mean at mail.berlios.de)
Date: Mon, 23 Aug 2010 20:22:08 +0200
Subject: [Avidemux-svn-commit] r6544 -
	branches/avidemux_2.6_branch_mean/avidemux/common
Message-ID: <20100823182208.33BB2480259@sheep.berlios.de>

Author: mean
Date: 2010-08-23 20:22:08 +0200 (Mon, 23 Aug 2010)
New Revision: 6544

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/gui_navigate.cpp
Log:
[UI] Half baked go to time

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/gui_navigate.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/gui_navigate.cpp	2010-08-23 18:22:06 UTC (rev 6543)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/gui_navigate.cpp	2010-08-23 18:22:08 UTC (rev 6544)
@@ -430,7 +430,11 @@
         pts*=1000;
         pts+=ms;
         pts*=1000;
+        // Try to find a frame just before pts...
+#warning Fixme, be more accurate
+        if(false==video_body->getPKFramePTS(&pts)) return false;
 
+        //
         return GUI_GoToTime(pts);
 
 }



From mean at mail.berlios.de  Mon Aug 23 20:22:09 2010
From: mean at mail.berlios.de (mean at mail.berlios.de)
Date: Mon, 23 Aug 2010 20:22:09 +0200
Subject: [Avidemux-svn-commit] r6545 - in branches/avidemux_2.6_branch_mean:
	avidemux/cli avidemux/gtk avidemux/qt4 avidemux_core
	avidemux_plugins
Message-ID: <20100823182209.90F06480259@sheep.berlios.de>

Author: mean
Date: 2010-08-23 20:22:09 +0200 (Mon, 23 Aug 2010)
New Revision: 6545

Added:
   branches/avidemux_2.6_branch_mean/avidemux/gtk/gtkPackageRpm.cmake
Modified:
   branches/avidemux_2.6_branch_mean/avidemux/cli/cliPackageRpm.cmake
   branches/avidemux_2.6_branch_mean/avidemux/qt4/qt4PackageRpm.cmake
   branches/avidemux_2.6_branch_mean/avidemux_core/corePackageRpm.cmake
   branches/avidemux_2.6_branch_mean/avidemux_plugins/pluginsPackageRpm.cmake
Log:
[packaging] Rpm fixup, patch by jan kardell

Modified: branches/avidemux_2.6_branch_mean/avidemux/cli/cliPackageRpm.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/cli/cliPackageRpm.cmake	2010-08-23 18:22:08 UTC (rev 6544)
+++ branches/avidemux_2.6_branch_mean/avidemux/cli/cliPackageRpm.cmake	2010-08-23 18:22:09 UTC (rev 6545)
@@ -6,7 +6,7 @@
 SET (CPACK_GENERATOR "RPM")
 # ARCH
 IF (X86_64_SUPPORTED)
-SET(CPACK_RPM_PACKAGE_ARCHITECTURE "amd64")
+SET(CPACK_RPM_PACKAGE_ARCHITECTURE "x86_64")
 ELSE (X86_64_SUPPORTED)
 SET(CPACK_RPM_PACKAGE_ARCHITECTURE "i386")
 ENDIF (X86_64_SUPPORTED)
@@ -21,6 +21,8 @@
 SET(CPACK_PACKAGE_VERSION_PATCH "0_${ADM_SUBVERSION}")
 #
 SET(CPACK_PACKAGE_NAME "avidemux3-cli")
+SET(CPACK_PACKAGE_FILE_NAME "${CPACK_PACKAGE_NAME}-${CPACK_PACKAGE_VERSION_MAJOR}.${CPACK_PACKAGE_VERSION_MINOR}.${CPACK_PACKAGE_VERSION_PATCH}.${CPACK_RPM_PACKAGE_ARCHITECTURE}")
+
 #
 
 include(CPack)

Added: branches/avidemux_2.6_branch_mean/avidemux/gtk/gtkPackageRpm.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/gtkPackageRpm.cmake	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/gtkPackageRpm.cmake	2010-08-23 18:22:09 UTC (rev 6545)
@@ -0,0 +1,26 @@
+##############################                                                                                                                                                     
+# RPM                                                                                                                                                                              
+##############################                                                                                                                                                     
+SET(CPACK_SET_DESTDIR "ON")
+SET(CPACK_RPM_PACKAGE_NAME "avidemux3-gtk")
+SET (CPACK_GENERATOR "RPM")
+# ARCH                                                                                                                                                                             
+IF (X86_64_SUPPORTED)
+SET(CPACK_RPM_PACKAGE_ARCHITECTURE "x86_64")
+ELSE (X86_64_SUPPORTED)
+SET(CPACK_RPM_PACKAGE_ARCHITECTURE "i386")
+ENDIF (X86_64_SUPPORTED)
+# Mandatory                                                                                                                                                                        
+SET(CPACK_RPM_PACKAGE_VENDOR "mean")
+SET(CPACK_RPM_PACKAGE_DESCRIPTION "Simple video editor,main program gtk version ")
+# Some more infos                                                                                                                                                                  
+SET(CPACK_PACKAGE_VERSION_MAJOR "2")
+SET(CPACK_PACKAGE_VERSION_MINOR "6")
+SET(CPACK_PACKAGE_VERSION_PATCH "0")
+SET(CPACK_PACKAGE_VERSION_PATCH "0_${ADM_SUBVERSION}")
+#                                                                                                                                                                                  
+SET(CPACK_PACKAGE_NAME "avidemux3-gtk")
+#                                                                                                                                                                                  
+SET(CPACK_PACKAGE_FILE_NAME "${CPACK_PACKAGE_NAME}-${CPACK_PACKAGE_VERSION_MAJOR}.${CPACK_PACKAGE_VERSION_MINOR}.${CPACK_PACKAGE_VERSION_PATCH}.${CPACK_RPM_PACKAGE_ARCHITECTURE}")
+include(CPack)
+

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/qt4PackageRpm.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/qt4PackageRpm.cmake	2010-08-23 18:22:08 UTC (rev 6544)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/qt4PackageRpm.cmake	2010-08-23 18:22:09 UTC (rev 6545)
@@ -6,7 +6,7 @@
 SET (CPACK_GENERATOR "RPM")
 # ARCH
 IF (X86_64_SUPPORTED)
-SET(CPACK_RPM_PACKAGE_ARCHITECTURE "amd64")
+SET(CPACK_RPM_PACKAGE_ARCHITECTURE "x86_64")
 ELSE (X86_64_SUPPORTED)
 SET(CPACK_RPM_PACKAGE_ARCHITECTURE "i386")
 ENDIF (X86_64_SUPPORTED)
@@ -22,5 +22,6 @@
 #
 SET(CPACK_PACKAGE_NAME "avidemux3-qt4")
 #
+SET(CPACK_PACKAGE_FILE_NAME "${CPACK_PACKAGE_NAME}-${CPACK_PACKAGE_VERSION_MAJOR}.${CPACK_PACKAGE_VERSION_MINOR}.${CPACK_PACKAGE_VERSION_PATCH}.${CPACK_RPM_PACKAGE_ARCHITECTURE}")
 
 include(CPack)

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/corePackageRpm.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/corePackageRpm.cmake	2010-08-23 18:22:08 UTC (rev 6544)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/corePackageRpm.cmake	2010-08-23 18:22:09 UTC (rev 6545)
@@ -6,7 +6,7 @@
 SET (CPACK_GENERATOR "RPM")
 # ARCH
 IF (X86_64_SUPPORTED)
-SET(CPACK_RPM_PACKAGE_ARCHITECTURE "amd64")
+SET(CPACK_RPM_PACKAGE_ARCHITECTURE "x86_64")
 ELSE (X86_64_SUPPORTED)
 SET(CPACK_RPM_PACKAGE_ARCHITECTURE "i686")
 ENDIF (X86_64_SUPPORTED)
@@ -23,5 +23,6 @@
 #
 SET(CPACK_PACKAGE_NAME "avidemux3-core")
 #
+SET(CPACK_PACKAGE_FILE_NAME "${CPACK_PACKAGE_NAME}-${CPACK_PACKAGE_VERSION_MAJOR}.${CPACK_PACKAGE_VERSION_MINOR}.${CPACK_PACKAGE_VERSION_PATCH}.${CPACK_RPM_PACKAGE_ARCHITECTURE}")
 
 include(CPack)

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/pluginsPackageRpm.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/pluginsPackageRpm.cmake	2010-08-23 18:22:08 UTC (rev 6544)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/pluginsPackageRpm.cmake	2010-08-23 18:22:09 UTC (rev 6545)
@@ -6,7 +6,7 @@
 SET (CPACK_GENERATOR "RPM")
 # ARCH
 IF (X86_64_SUPPORTED)
-SET(CPACK_RPM_PACKAGE_ARCHITECTURE "amd64")
+SET(CPACK_RPM_PACKAGE_ARCHITECTURE "x86_64")
 ELSE (X86_64_SUPPORTED)
 SET(CPACK_RPM_PACKAGE_ARCHITECTURE "i386")
 ENDIF (X86_64_SUPPORTED)
@@ -25,5 +25,6 @@
 #
 SET(CPACK_PACKAGE_NAME "avidemux3-plugins-${PLUGIN_UI}")
 #
+SET(CPACK_PACKAGE_FILE_NAME "${CPACK_PACKAGE_NAME}-${CPACK_PACKAGE_VERSION_MAJOR}.${CPACK_PACKAGE_VERSION_MINOR}.${CPACK_PACKAGE_VERSION_PATCH}.${CPACK_RPM_PACKAGE_ARCHITECTURE}")
 
 include(CPack)



From mean at mail.berlios.de  Mon Aug 23 20:23:38 2010
From: mean at mail.berlios.de (mean at mail.berlios.de)
Date: Mon, 23 Aug 2010 20:23:38 +0200
Subject: [Avidemux-svn-commit] r6546 -
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffTS
Message-ID: <20100823182338.8D142480259@sheep.berlios.de>

Author: mean
Date: 2010-08-23 20:23:38 +0200 (Mon, 23 Aug 2010)
New Revision: 6546

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffTS/muxerffTSPlugin.cpp
Log:
[TS Muxer] Fix plugin info, patch by jan kardell

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffTS/muxerffTSPlugin.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffTS/muxerffTSPlugin.cpp	2010-08-23 18:22:09 UTC (rev 6545)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffTS/muxerffTSPlugin.cpp	2010-08-23 18:23:38 UTC (rev 6546)
@@ -24,7 +24,7 @@
 ADM_MUXER_BEGIN( muxerffTS,
                     1,0,0,
                     "ffTS",    // Internal name
-                    "ffMpeg PS muxer plugin (c) Mean 2009",
+                    "ffMpeg TS muxer plugin (c) Mean 2009",
                     "ffTS Muxer", // DIsplay name
                     ffTSConfigure,
                     ts_muxer_param, //template



From mean at mail.berlios.de  Mon Aug 23 20:42:54 2010
From: mean at mail.berlios.de (mean at mail.berlios.de)
Date: Mon, 23 Aug 2010 20:42:54 +0200
Subject: [Avidemux-svn-commit] r6547 -
	branches/avidemux_2.6_branch_mean/cmake
Message-ID: <20100823184254.D9970480259@sheep.berlios.de>

Author: mean
Date: 2010-08-23 20:42:54 +0200 (Mon, 23 Aug 2010)
New Revision: 6547

Modified:
   branches/avidemux_2.6_branch_mean/cmake/admInstallDir.cmake
Log:
[build] Try to detect if library folder is xx/lib, xx/lib32 or xx/lib64, patch by jan kardell

Modified: branches/avidemux_2.6_branch_mean/cmake/admInstallDir.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/admInstallDir.cmake	2010-08-23 18:23:38 UTC (rev 6546)
+++ branches/avidemux_2.6_branch_mean/cmake/admInstallDir.cmake	2010-08-23 18:42:54 UTC (rev 6547)
@@ -15,7 +15,13 @@
                 MESSAGE(STATUS "No install dir provided, using /usr/local")
         ENDIF(NOT AVIDEMUX_INSTALL_DIR )
         SET(AVIDEMUX_BIN_DIR ${AVIDEMUX_INSTALL_DIR}/bin)
-        SET(AVIDEMUX_LIB_DIR ${AVIDEMUX_INSTALL_DIR}/lib)
+        IF(CMAKE_C_IMPLICIT_LINK_DIRECTORIES MATCHES "\\/lib64([; ]|$)")
+                SET(AVIDEMUX_LIB_DIR ${AVIDEMUX_INSTALL_DIR}/lib64)
+        ELSEIF(CMAKE_C_IMPLICIT_LINK_DIRECTORIES MATCHES "\\/lib32([; ]|$)")
+                SET(AVIDEMUX_LIB_DIR ${AVIDEMUX_INSTALL_DIR}/lib32)
+        ELSE(CMAKE_C_IMPLICIT_LINK_DIRECTORIES MATCHES "\\/lib64([; ]|$)")
+                SET(AVIDEMUX_LIB_DIR ${AVIDEMUX_INSTALL_DIR}/lib)
+        ENDIF(CMAKE_C_IMPLICIT_LINK_DIRECTORIES MATCHES "\\/lib64([; ]|$)")
 ENDIF(WIN32)
 SET(AVIDEMUX_INCLUDE_DIR ${AVIDEMUX_INSTALL_DIR}/include)
 #



From mean at mail.berlios.de  Tue Aug 24 08:04:00 2010
From: mean at mail.berlios.de (mean at mail.berlios.de)
Date: Tue, 24 Aug 2010 08:04:00 +0200
Subject: [Avidemux-svn-commit] r6548 -
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_vorbis
Message-ID: <20100824060400.E03F9480D1F@sheep.berlios.de>

Author: mean
Date: 2010-08-24 08:04:00 +0200 (Tue, 24 Aug 2010)
New Revision: 6548

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_vorbis/CMakeLists.txt
Log:
[vorbis] Dont link to vorbis enc

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_vorbis/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_vorbis/CMakeLists.txt	2010-08-23 18:42:54 UTC (rev 6547)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_vorbis/CMakeLists.txt	2010-08-24 06:04:00 UTC (rev 6548)
@@ -10,7 +10,6 @@
         ADD_LIBRARY(ADM_ad_vorbis SHARED ${ADM_ad_vorbis_SRCS})
 
         TARGET_LINK_LIBRARIES(ADM_ad_vorbis ${VORBIS_LIBRARY_DIR})
-        TARGET_LINK_LIBRARIES(ADM_ad_vorbis ${VORBISENC_LIBRARY_DIR})
 
         include_directories(${VORBIS_INCLUDE_DIR})
 



From mean at mail.berlios.de  Tue Aug 24 08:04:02 2010
From: mean at mail.berlios.de (mean at mail.berlios.de)
Date: Tue, 24 Aug 2010 08:04:02 +0200
Subject: [Avidemux-svn-commit] r6549 - in
	branches/avidemux_2.6_branch_mean/avidemux:
	cli/ADM_userInterfaces/ADM_gui2 common/ADM_commonUI
	common/ADM_editor gtk/ADM_userInterfaces/ADM_gui2
	qt4/ADM_userInterfaces/ADM_gui
Message-ID: <20100824060402.F3988480D1F@sheep.berlios.de>

Author: mean
Date: 2010-08-24 08:04:02 +0200 (Tue, 24 Aug 2010)
New Revision: 6549

Removed:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_outputfmt.h
Modified:
   branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_gui2/gui_none.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/GUI_ui.h
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_gui2/GUI_bindings.cpp
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/Q_gui2.cpp
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/gui2.ui
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/translation_table.h
Log:
[UI] Remove obsolete reference to ADM_outputfmt.h, make the time entry non editable, add a time pushbutton

Modified: branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_gui2/gui_none.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_gui2/gui_none.cpp	2010-08-24 06:04:00 UTC (rev 6548)
+++ branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_gui2/gui_none.cpp	2010-08-24 06:04:02 UTC (rev 6549)
@@ -140,7 +140,7 @@
 }
 void UI_purge( void )
 {}
-uint32_t UI_GetCurrentFormat( void )
+int UI_GetCurrentFormat( void )
 {
 	return cliFormat;
 }

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/GUI_ui.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/GUI_ui.h	2010-08-24 06:04:00 UTC (rev 6548)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/GUI_ui.h	2010-08-24 06:04:02 UTC (rev 6549)
@@ -1,7 +1,7 @@
 #ifndef ADM_GUI_UI_H
 #define ADM_GUI_UI_H
 
-#include "ADM_editor/ADM_outputfmt.h"
+//#include "ADM_editor/ADM_outputfmt.h"
 
 void UI_updateFrameCount(uint32_t curFrame);
 void UI_setFrameCount(uint32_t curFrame,uint32_t total);
@@ -36,7 +36,7 @@
 void UI_setVideoCodec( int i);
 
 /* We deal index wise here...*/
-uint32_t UI_GetCurrentFormat( void );
+int      UI_GetCurrentFormat( void );
 bool 	 UI_SetCurrentFormat( uint32_t fmt );
 
 void UI_toogleSide(void);

Deleted: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_outputfmt.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_outputfmt.h	2010-08-24 06:04:00 UTC (rev 6548)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_outputfmt.h	2010-08-24 06:04:02 UTC (rev 6549)
@@ -1,59 +0,0 @@
-//
-// C++ Interface: %{MODULE}
-//
-// Description: 
-//
-//
-// (c) Mean, fixounet at free.fr
-//
-// Copyright: See COPYING file that comes with this distribution
-// 2002-2004
-//
-#ifndef ADM_OUT_FMT
-#define ADM_OUT_FMT
-
-typedef enum 
-{
-	ADM_AVI=0,
-	ADM_AVI_DUAL,
-	ADM_AVI_PAK,
-	ADM_AVI_UNP,
-	ADM_PS,
-	ADM_TS,
-	ADM_ES,
-	ADM_MP4,
-	ADM_OGM,
-	ADM_PSP,
-	ADM_FLV,
-        ADM_MATROSKA,
-	ADM_DUMMY,
-	ADM_FORMAT_MAX,
-}ADM_OUT_FORMAT;
-
-typedef struct 
-{
-  ADM_OUT_FORMAT format;
-  const char *text;
-}ADM_FORMAT_DESC;
-/**
- * 	This is used to fill-in the menus in GUIs
- */
-const ADM_FORMAT_DESC ADM_allOutputFormat[]=
-{
-  {ADM_AVI,QT_TR_NOOP("AVI")},
-  {ADM_AVI_DUAL,QT_TR_NOOP("AVI, dual audio")},
-  {ADM_AVI_PAK,QT_TR_NOOP("AVI, pack VOP")},
-  {ADM_AVI_UNP,QT_TR_NOOP("AVI, unpack VOP")},  
-  {ADM_PS,QT_TR_NOOP("MPEG-PS (A+V)")},
-  {ADM_TS,QT_TR_NOOP("MPEG-TS (A+V)")},
-  {ADM_ES,QT_TR_NOOP("MPEG video")},
-  {ADM_MP4,QT_TR_NOOP("MP4")},
-  {ADM_OGM,QT_TR_NOOP("OGM")},
-  {ADM_PSP,QT_TR_NOOP("PSP")},
-  {ADM_FLV,QT_TR_NOOP("FLV")},
-  {ADM_MATROSKA,QT_TR_NOOP("MKV")},
-  {ADM_DUMMY,QT_TR_NOOP("DUMMY")}
-};
-
-#endif
-//EOF

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_gui2/GUI_bindings.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_gui2/GUI_bindings.cpp	2010-08-24 06:04:00 UTC (rev 6548)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_gui2/GUI_bindings.cpp	2010-08-24 06:04:02 UTC (rev 6549)
@@ -1191,7 +1191,7 @@
     \brief Returns index of the currently selected container
 
 */
-uint32_t UI_GetCurrentFormat( void )
+int UI_GetCurrentFormat( void )
 {
 
 	return (uint32_t)gtk_combo_box_get_active(GTK_COMBO_BOX(glade.getWidget(FORMAT_WIDGET)));

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/Q_gui2.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/Q_gui2.cpp	2010-08-24 06:04:00 UTC (rev 6548)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/Q_gui2.cpp	2010-08-24 06:04:02 UTC (rev 6549)
@@ -23,7 +23,7 @@
 
 //#include "ADM_codecs/ADM_codec.h"
 #include "gui_action.hxx"
-#include "ADM_editor/ADM_outputfmt.h"
+//#include "ADM_editor/ADM_outputfmt.h"
 #include "DIA_fileSel.h"
 #include "ADM_vidMisc.h"
 #include "prefs.h"
@@ -277,7 +277,7 @@
 	ui.currentTime->setValidator(timeValidator);
 	ui.currentTime->setInputMask("99:99:99.999");
 
-	connect(ui.currentTime, SIGNAL(editingFinished()), this, SLOT(currentTimeChanged()));
+	//connect(ui.currentTime, SIGNAL(editingFinished()), this, SLOT(currentTimeChanged()));
 
 	/* Build the custom menu */
     jsMenu=new QMenu("javaScript");
@@ -289,7 +289,7 @@
 	this->installEventFilter(this);
 	slider->installEventFilter(this);
 	
-	ui.currentTime->installEventFilter(this);
+	//ui.currentTime->installEventFilter(this);
 
 	this->setFocus(Qt::OtherFocusReason);
 
@@ -947,11 +947,11 @@
     \brief  Returns the current selected output format
 */
 
-ADM_OUT_FORMAT 	UI_GetCurrentFormat( void )
+int 	UI_GetCurrentFormat( void )
 {
 	int i=WIDGET(comboBoxFormat)->currentIndex();
 	if(i<0) i=0;
-	return (ADM_OUT_FORMAT)i; 
+	return (int)i; 
 }
 /**
     \fn     UI_SetCurrentFormat( ADM_OUT_FORMAT fmt )

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/gui2.ui
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/gui2.ui	2010-08-24 06:04:00 UTC (rev 6548)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/gui2.ui	2010-08-24 06:04:02 UTC (rev 6549)
@@ -990,15 +990,9 @@
              <number>0</number>
             </property>
             <item>
-             <widget class="QLabel" name="label_6">
-              <property name="sizePolicy">
-               <sizepolicy hsizetype="Preferred" vsizetype="Fixed">
-                <horstretch>0</horstretch>
-                <verstretch>0</verstretch>
-               </sizepolicy>
-              </property>
+             <widget class="QPushButton" name="pushButtonTime">
               <property name="text">
-               <string>Time:</string>
+               <string>Time</string>
               </property>
              </widget>
             </item>
@@ -1022,6 +1016,9 @@
               <property name="maxLength">
                <number>12</number>
               </property>
+              <property name="readOnly">
+               <bool>true</bool>
+              </property>
              </widget>
             </item>
             <item>
@@ -1366,7 +1363,6 @@
     <addaction name="actionGo_to_Marker_A"/>
     <addaction name="actionGo_to_Marker_B"/>
     <addaction name="separator"/>
-    <addaction name="actionJump_to_Frame"/>
     <addaction name="actionJump_to_Time"/>
    </widget>
    <widget class="QMenu" name="menuTools">
@@ -1382,6 +1378,17 @@
     <addaction name="actionJavaScript_shell"/>
     <addaction name="actionPython_Shell"/>
    </widget>
+   <widget class="QMenu" name="menuAudio">
+    <property name="title">
+     <string>&amp;Audio</string>
+    </property>
+    <addaction name="actionMain_Track"/>
+    <addaction name="actionSecondary_Track"/>
+    <addaction name="actionBuild_VBR_time_map"/>
+    <addaction name="separator"/>
+    <addaction name="actionSave_2"/>
+    <addaction name="actionFilters_2"/>
+   </widget>
    <widget class="QMenu" name="menuFile">
     <property name="title">
      <string>&amp;File</string>
@@ -1425,17 +1432,6 @@
     <addaction name="separator"/>
     <addaction name="actionQuit"/>
    </widget>
-   <widget class="QMenu" name="menuAudio">
-    <property name="title">
-     <string>&amp;Audio</string>
-    </property>
-    <addaction name="actionMain_Track"/>
-    <addaction name="actionSecondary_Track"/>
-    <addaction name="actionBuild_VBR_time_map"/>
-    <addaction name="separator"/>
-    <addaction name="actionSave_2"/>
-    <addaction name="actionFilters_2"/>
-   </widget>
    <addaction name="menuFile"/>
    <addaction name="menuEdit"/>
    <addaction name="menuView"/>

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/translation_table.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/translation_table.h	2010-08-24 06:04:00 UTC (rev 6548)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/translation_table.h	2010-08-24 06:04:02 UTC (rev 6549)
@@ -47,7 +47,6 @@
 PROCESS(actionLast_Frame,ACT_End) \
 PROCESS(actionGo_to_Marker_A,ACT_GotoMarkA) \
 PROCESS(actionGo_to_Marker_B,ACT_GotoMarkB) \
-PROCESS(actionJump_to_Frame,ACT_Goto) \
 PROCESS(actionJump_to_Time,ACT_GotoTime) \
 PROCESS(actionShow_built_in_support,ACT_BUILT_IN) \
 PROCESS(actionAbout_avidemux,ACT_About) \
@@ -97,7 +96,8 @@
 PROCESS(toolButtonFirstFrame, ACT_Begin) \
 PROCESS(toolButtonLastFrame, ACT_End) \
 PROCESS(pushButtonJumpToMarkerA, ACT_GotoMarkA) \
-PROCESS(pushButtonJumpToMarkerB, ACT_GotoMarkB)
+PROCESS(pushButtonJumpToMarkerB, ACT_GotoMarkB) \
+PROCESS(pushButtonTime, ACT_GotoTime)
 
 
 /*



From mean at mail.berlios.de  Tue Aug 24 08:04:05 2010
From: mean at mail.berlios.de (mean at mail.berlios.de)
Date: Tue, 24 Aug 2010 08:04:05 +0200
Subject: [Avidemux-svn-commit] r6550 - in
	branches/avidemux_2.6_branch_mean/avidemux: common
	common/ADM_audioFilter/src common/ADM_audiocodec
	common/ADM_commonUI common/ADM_editor common/ADM_render
	common/ADM_toolkit common/ADM_videoFilter2/src
	qt4/ADM_UIs/src qt4/ADM_userInterfaces/ADM_dialog
	qt4/ADM_userInterfaces/ADM_gui
Message-ID: <20100824060405.CAE17480D1F@sheep.berlios.de>

Author: mean
Date: 2010-08-24 08:04:05 +0200 (Tue, 24 Aug 2010)
New Revision: 6550

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audio_encoderPlugin.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audiofilter_film2pal.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audiofilter_mixer.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audiofilter_normalize.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_audiocodec.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/DIA_plugins.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edLoadSave.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_render/GUI_accelRender.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_toolkit/automation.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_videoFilters.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/GUI_jobs.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/gui_navigate.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/gui_play.cpp
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/FAC_matrix.cpp
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_filesel.cpp
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_toggle.cpp
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/alert_qt4.cpp
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/Q_gui2.cpp
Log:
[all] Suppress some cppcheck warnings

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audio_encoderPlugin.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audio_encoderPlugin.cpp	2010-08-24 06:04:02 UTC (rev 6549)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audio_encoderPlugin.cpp	2010-08-24 06:04:05 UTC (rev 6550)
@@ -68,6 +68,7 @@
 		}
         ADM_AudioEncoderLoader(const char *name, const char *menuName) : ADM_LibWrapper()
 		{
+                    initialised=false;
                     encoderBlock=new ADM_audioEncoder;
                     memset(encoderBlock,0,sizeof(*encoderBlock));
                     encoderBlock->codecName=name;

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audiofilter_film2pal.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audiofilter_film2pal.cpp	2010-08-24 06:04:02 UTC (rev 6549)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audiofilter_film2pal.cpp	2010-08-24 06:04:05 UTC (rev 6550)
@@ -57,8 +57,8 @@
 {
   uint32_t len,i,rendered;
   uint32_t chan=_wavHeader.channels;
-  float *start;
   
+  
   shrink();
   fillIncomingBuffer(status);
   

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audiofilter_mixer.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audiofilter_mixer.cpp	2010-08-24 06:04:02 UTC (rev 6549)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audiofilter_mixer.cpp	2010-08-24 06:04:05 UTC (rev 6550)
@@ -572,7 +572,6 @@
 {
 
     uint32_t rd = 0;
-    uint8_t *in,*out;
     int nbSampleMax=max/_wavHeader.channels;
     uint8_t input_channels = _previous->getInfo()->channels;
 
@@ -596,7 +595,6 @@
     // How many ?
 
     // Let's go
-    int processed=0;
     int available=0;
     if(!nbSampleMax)
     {

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audiofilter_normalize.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audiofilter_normalize.cpp	2010-08-24 06:04:02 UTC (rev 6549)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audiofilter_normalize.cpp	2010-08-24 06:04:05 UTC (rev 6550)
@@ -76,7 +76,7 @@
 uint8_t AUDMAudioFilterNormalize::preprocess(void)
 {
 
-    int16_t *ptr;
+
     uint32_t scanned = 0, ch = 0;
     AUD_Status status;
     _ratio = 0;
@@ -171,7 +171,7 @@
       if(*status==AUD_END_OF_STREAM) return 0;
       ADM_assert(0);
     }
-    float *in,*out,tmp;
+    float tmp;
     for (i = 0; i < rd; i++)
     {
       tmp=_incomingBuffer[i];

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_audiocodec.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_audiocodec.h	2010-08-24 06:04:02 UTC (rev 6549)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_audiocodec.h	2010-08-24 06:04:05 UTC (rev 6550)
@@ -30,6 +30,7 @@
         {
             UNUSED_ARG(fourcc);
             _init=0;
+            _wavHeader=NULL;
         };
 
         virtual	~ADM_Audiocodec() {};

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/DIA_plugins.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/DIA_plugins.cpp	2010-08-24 06:04:02 UTC (rev 6549)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/DIA_plugins.cpp	2010-08-24 06:04:05 UTC (rev 6550)
@@ -69,7 +69,7 @@
             ADM_ad_getFilterInfo(i, &name,&major,&minor,&patch);
             snprintf(versionString,255,"%02d.%02d.%02d",major,minor,patch);
             strncpy(infoString,name,255);
-            if(strlen(infoString))
+            if((*infoString))
             {
                 end=strlen(infoString)+infoString-1;
                 // Remove trailing line feed
@@ -98,7 +98,7 @@
             ADM_ve6_getEncoderInfo(i, &name,&major,&minor,&patch);
             snprintf(versionString,255,"%02d.%02d.%02d",major,minor,patch);
             strncpy(infoString,name,255);
-            if(strlen(infoString))
+            if((*infoString))
             {
                 end=strlen(infoString)+infoString-1;
                 // Remove trailing line feed
@@ -127,7 +127,7 @@
             ADM_vd6_getEncoderInfo(i, &name,&major,&minor,&patch);
             snprintf(versionString,255,"%02d.%02d.%02d",major,minor,patch);
             strncpy(infoString,name,255);
-            if(strlen(infoString))
+            if((*infoString))
             {
                 end=strlen(infoString)+infoString-1;
                 // Remove trailing line feed
@@ -155,7 +155,7 @@
             ADM_av_getDeviceInfo(i, &name,&major,&minor,&patch);
             snprintf(versionString,255,"%02d.%02d.%02d",major,minor,patch);
             strncpy(infoString,name,255);
-            if(strlen(infoString))
+            if((*infoString))
             {
                 end=strlen(infoString)+infoString-1;
                 // Remove trailing line feed
@@ -184,7 +184,7 @@
             ADM_ae_getAPluginEncoderInfo(i, &name,&major,&minor,&patch);
             snprintf(versionString,255,"%02d.%02d.%02d",major,minor,patch);
             strncpy(infoString,name,255);
-            if(strlen(infoString))
+            if(*(infoString))
             {
                 end=strlen(infoString)+infoString-1;
                 // Remove trailing line feed
@@ -213,7 +213,7 @@
             ADM_dm_getDemuxerInfo(i, &name,&major,&minor,&patch);
             snprintf(versionString,255,"%02d.%02d.%02d",major,minor,patch);
             strncpy(infoString,name,255);
-            if(strlen(infoString))
+            if(*(infoString))
             {
                 end=strlen(infoString)+infoString-1;
                 // Remove trailing line feed
@@ -243,7 +243,7 @@
             ADM_mx_getMuxerInfo(i, &name,&major,&minor,&patch);
             snprintf(versionString,255,"%02d.%02d.%02d",major,minor,patch);
             strncpy(infoString,name,255);
-            if(strlen(infoString))
+            if(*(infoString))
             {
                 end=strlen(infoString)+infoString-1;
                 // Remove trailing line feed

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edLoadSave.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edLoadSave.cpp	2010-08-24 06:04:02 UTC (rev 6549)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edLoadSave.cpp	2010-08-24 06:04:05 UTC (rev 6550)
@@ -63,7 +63,6 @@
 {
     const char *truefalse[]={"false","true"};
     ADM_info(" **Saving script project %s**\n",name);
-    char *    tmp;
 
     if (!_segments.getNbSegments())
         return 1;

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_render/GUI_accelRender.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_render/GUI_accelRender.h	2010-08-24 06:04:02 UTC (rev 6549)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_render/GUI_accelRender.h	2010-08-24 06:04:05 UTC (rev 6550)
@@ -28,7 +28,7 @@
                         bool calcDisplayFromZoom(renderZoom zoom);
                         bool baseInit(uint32_t w,uint32_t h,renderZoom zoom);
        public:
-                                VideoRenderBase( void) {scaler=NULL;};
+                                VideoRenderBase( void) {scaler=NULL;currentZoom=ZOOM_1_1;};
                                 ~VideoRenderBase() {if(scaler) delete scaler;scaler=NULL;}
               virtual	bool    init(GUI_WindowInfo * window, uint32_t w, uint32_t h,renderZoom zoom)=0;
               virtual	bool    stop(void)=0;

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_toolkit/automation.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_toolkit/automation.cpp	2010-08-24 06:04:02 UTC (rev 6549)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_toolkit/automation.cpp	2010-08-24 06:04:05 UTC (rev 6550)
@@ -602,12 +602,12 @@
 */
 uint8_t scriptAddVar(char *var,char *value)
 {
-        if(!var || !strlen(var))
+        if(!var || !(*var))
         {
                 printf("Script : Var name invalid\n");
                 return 0;
         }
-        if(!value || !strlen(value))
+        if(!value || !(*value))
         {
                 printf("Script : value invalid\n");
                 return 0;

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_videoFilters.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_videoFilters.cpp	2010-08-24 06:04:02 UTC (rev 6549)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_videoFilters.cpp	2010-08-24 06:04:05 UTC (rev 6550)
@@ -246,7 +246,6 @@
     // 1- Add bridge always # 1
     ADM_videoFilterBridge *bridge=new ADM_videoFilterBridge(startAt,endAt);
     chain->push_back(bridge);
-    ADM_coreVideoFilter *f=bridge;
     // Last create the thread
 #if 1
     int m=chain->size();

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/GUI_jobs.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/GUI_jobs.cpp	2010-08-24 06:04:02 UTC (rev 6549)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/GUI_jobs.cpp	2010-08-24 06:04:05 UTC (rev 6550)
@@ -29,7 +29,6 @@
 uint8_t GUI_jobs(void)
 {
 uint32_t nb;
-char     *name;
         memset(jobName,0,sizeof(jobName));
 char *jobDir=ADM_getJobDir();
         if(!buildDirectoryContent(&nb,ADM_getJobDir(),jobName,MAX_JOBS,".js"))

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp	2010-08-24 06:04:02 UTC (rev 6549)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp	2010-08-24 06:04:05 UTC (rev 6550)
@@ -105,8 +105,6 @@
 */
 void HandleAction (Action action)
 {
-  static int recursive = 0;
-
   uint32_t nf = 0;
   uint32_t old;
   // handle out of band actions
@@ -156,7 +154,6 @@
         case ACT_RECENT2:
         case ACT_RECENT3:
                 const char **name;
-                char* fileName;
                 int rank;
 
                 name=prefs->get_lastfiles();

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/gui_navigate.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/gui_navigate.cpp	2010-08-24 06:04:02 UTC (rev 6549)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/gui_navigate.cpp	2010-08-24 06:04:05 UTC (rev 6550)
@@ -388,13 +388,6 @@
 */
 void GUI_setAllFrameAndTime(void)
 {
-    char text[80];
-    double len;
-    // int val;
-
-    // if(!guiReady) return ;
-    text[0] = 0;
-
     //UI_updateFrameCount(video_body->getCurrentFrame());
     UI_setCurrentTime(admPreview::getCurrentPts());
     UI_setTotalTime(video_body->getVideoDuration());

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/gui_play.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/gui_play.cpp	2010-08-24 06:04:02 UTC (rev 6549)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/gui_play.cpp	2010-08-24 06:04:05 UTC (rev 6550)
@@ -344,10 +344,6 @@
     uint32_t channels,frequency;
 
     wavbuf = 0;
-
-//    if (!currentaudiostream)	  return;
-
-    double db;
     uint64_t startPts=firstPts;
 
     playbackAudio = createPlaybackFilter(startPts,0);

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/FAC_matrix.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/FAC_matrix.cpp	2010-08-24 06:04:02 UTC (rev 6549)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/FAC_matrix.cpp	2010-08-24 06:04:05 UTC (rev 6550)
@@ -112,7 +112,6 @@
 	QSpinBox **arrayWidget=( QSpinBox **)myWidget;
 			 
 			 ADM_assert(arrayWidget);
-			 int index=0;
 			  for(int y=0;y<_matrixSize*_matrixSize;y++)
 			  {
 				  if(onoff) arrayWidget[y]->setEnabled(1);

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_filesel.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_filesel.cpp	2010-08-24 06:04:02 UTC (rev 6549)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_filesel.cpp	2010-08-24 06:04:05 UTC (rev 6550)
@@ -143,7 +143,7 @@
   param=(void *)filename;
   paramTitle=shortkey(toggleTitle);
 
-  if (!selectFileDesc || strlen(selectFileDesc) == 0)
+  if (!selectFileDesc || *(selectFileDesc) == 0)
 	  tip = toggleTitle;
   else
       tip = selectFileDesc;
@@ -199,7 +199,7 @@
   param=(void *)filename;
   paramTitle=shortkey(toggleTitle);
 
-  if (!selectDirDesc || strlen(selectDirDesc) == 0)
+  if (!selectDirDesc || *(selectDirDesc) == 0)
 	  tip = toggleTitle;
   else
       tip = selectDirDesc;

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_toggle.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_toggle.cpp	2010-08-24 06:04:02 UTC (rev 6549)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_toggle.cpp	2010-08-24 06:04:05 UTC (rev 6550)
@@ -115,7 +115,7 @@
 
 diaElemToggle::~diaElemToggle()
 {
-  ADM_QCheckBox *box=(ADM_QCheckBox *)myWidget;
+//  ADM_QCheckBox *box=(ADM_QCheckBox *)myWidget;
  // if(box) delete box;
   myWidget=NULL;
   if(paramTitle)

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/alert_qt4.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/alert_qt4.cpp	2010-08-24 06:04:02 UTC (rev 6549)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/alert_qt4.cpp	2010-08-24 06:04:05 UTC (rev 6550)
@@ -47,7 +47,6 @@
 void            GUI_Info_HIG(const ADM_LOG_LEVEL level,const char *primary, const char *secondary_format)
 {
   uint32_t msglvl=2;
-  char *string;
   char alertstring[1024];
 
         prefs->get(MESSAGE_LEVEL,&msglvl);
@@ -77,7 +76,6 @@
 void            GUI_Error_HIG(const char *primary, const char *secondary_format)
 {
   uint32_t msglvl=2;
-  char *string;
   char alertstring[1024];
   
   
@@ -135,7 +133,6 @@
 {
 uint32_t msglvl=2;
 char alertstring[1024];
-char alertstring2[1024];
         if (beQuiet)
               {
                       printf("Info: %s\n", primary);

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/Q_gui2.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/Q_gui2.cpp	2010-08-24 06:04:02 UTC (rev 6549)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/Q_gui2.cpp	2010-08-24 06:04:05 UTC (rev 6550)
@@ -755,7 +755,7 @@
 	char *title;
 	const char* defaultTitle = "Avidemux";
 
-	if (name && strlen(name) > 0)
+	if (name && (*name) )
 	{
 		title = new char[strlen(defaultTitle) + strlen(name) + 3 + 1];
 



From mean at mail.berlios.de  Wed Aug 25 20:01:00 2010
From: mean at mail.berlios.de (mean at mail.berlios.de)
Date: Wed, 25 Aug 2010 20:01:00 +0200
Subject: [Avidemux-svn-commit] r6551 -
	branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces
Message-ID: <20100825180100.A73F0480A0D@sheep.berlios.de>

Author: mean
Date: 2010-08-25 20:01:00 +0200 (Wed, 25 Aug 2010)
New Revision: 6551

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ui_support.cpp
Log:
[qt4] Dont try to update translation if none are loaded

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ui_support.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ui_support.cpp	2010-08-24 06:04:05 UTC (rev 6550)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ui_support.cpp	2010-08-25 18:01:00 UTC (rev 6551)
@@ -9,7 +9,7 @@
 #include <Carbon/Carbon.h>
 #endif
 #include <QtGui/QPaintEngine>
-
+#include "ADM_default.h"
 #include "ADM_inttype.h"
 #include "ADM_files.h"
 #include "DIA_uiTypes.h"
@@ -21,17 +21,18 @@
 static QMap<QString, char*> *map = NULL;
 static bool translatorLoaded = false;
 
-static void loadTranslation(QTranslator *qTranslator, QString translation)
+static int loadTranslation(QTranslator *qTranslator, QString translation)
 {
-	printf("[Locale] Loading language file %s ", translation.toUtf8().constData());	
+	ADM_info("[Locale] Loading language file %s ", translation.toUtf8().constData());	
 
 	if (qTranslator->load(translation))
 	{
 		QApplication::installTranslator(qTranslator);
-		printf("succeeded\n");
+		ADM_info("succeeded\n");
+        return 1;
 	}
-	else
-		printf("FAILED\n");
+    ADM_warning("FAILED\n");
+    return 0;
 }
 
 void initTranslator(void) {}
@@ -76,11 +77,13 @@
 #else
 	QString appdir = ADM_getInstallRelativePath("share","avidemux","i18n");
 #endif
-
-	loadTranslation(&qtTranslator, appdir + "qt_" + QLocale::system().name());
-	loadTranslation(&avidemuxTranslator, appdir + "avidemux_" + QLocale::system().name());
+    int nbLoaded=0;
+	nbLoaded+=loadTranslation(&qtTranslator, appdir + "qt_" + QLocale::system().name());
+	nbLoaded+=loadTranslation(&avidemuxTranslator, appdir + "avidemux_" + QLocale::system().name());
 	translatorLoaded = true;
-
+    if(!nbLoaded) // Nothing to translate..
+        return;
+    ADM_info("Updating translations...\n");
 	// Re-translate existing map (to take care of global strings already allocated)
 	QMapIterator<QString, char*> mapIterator(*map);
 
@@ -101,7 +104,7 @@
 		memcpy(buffer, translatedMessage.constData(), copyLength);
 	}
 
-	printf("[Locale] Test: &Edit -> %s\n\n", HIDE_STRING_FROM_QT("MainWindow", "&Edit").toUtf8().data());
+	ADM_info("[Locale] Test: &Edit -> %s\n\n", HIDE_STRING_FROM_QT("MainWindow", "&Edit").toUtf8().data());
 }
 
 void destroyTranslator(void)



From mean at mail.berlios.de  Wed Aug 25 20:01:02 2010
From: mean at mail.berlios.de (mean at mail.berlios.de)
Date: Wed, 25 Aug 2010 20:01:02 +0200
Subject: [Avidemux-svn-commit] r6552 - in branches/avidemux_2.6_branch_mean:
	avidemux/common avidemux/gtk/ADM_userInterfaces/ADM_filters
	avidemux/gtk/ADM_userInterfaces/ADM_toolkit_gtk
	avidemux/gtk/ADM_userInterfaces/glade
	avidemux/gtk/ADM_userInterfaces/glade/main cmake
Message-ID: <20100825180103.E3763480A0D@sheep.berlios.de>

Author: mean
Date: 2010-08-25 20:01:02 +0200 (Wed, 25 Aug 2010)
New Revision: 6552

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/main.cpp
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_filters/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_toolkit_gtk/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/cmake/ADM_coreConfig.h.cmake
   branches/avidemux_2.6_branch_mean/cmake/ad_plugin.cmake
   branches/avidemux_2.6_branch_mean/cmake/admInstallDir.cmake
   branches/avidemux_2.6_branch_mean/cmake/admPluginVideoEncoder.cmake
   branches/avidemux_2.6_branch_mean/cmake/ae_plugin.cmake
   branches/avidemux_2.6_branch_mean/cmake/av_plugin.cmake
   branches/avidemux_2.6_branch_mean/cmake/dm_plugin.cmake
   branches/avidemux_2.6_branch_mean/cmake/mx_plugin.cmake
   branches/avidemux_2.6_branch_mean/cmake/vd_plugin.cmake
   branches/avidemux_2.6_branch_mean/cmake/ve_plugin.cmake
   branches/avidemux_2.6_branch_mean/cmake/vf_plugin.cmake
Log:
[All] lib/lib32/lib64 for plugins, patch by jan kardell

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/main.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/main.cpp	2010-08-25 18:01:00 UTC (rev 6551)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/main.cpp	2010-08-25 18:01:02 UTC (rev 6552)
@@ -223,9 +223,9 @@
 #ifdef __APPLE__
     const char *startDir="../Resources/lib";
 #else
-    const char *startDir="lib";
+    const char *startDir=ADM_RELATIVE_LIB_DIR;
 #endif
-	char *adPlugins = ADM_getInstallRelativePath(startDir,"ADM_plugins6","audioDecoder");
+    char *adPlugins = ADM_getInstallRelativePath(startDir,"ADM_plugins6","audioDecoder");
     char *avPlugins = ADM_getInstallRelativePath(startDir,"ADM_plugins6","audioDevices");    
     char *aePlugins = ADM_getInstallRelativePath(startDir,"ADM_plugins6","audioEncoders");    
     char *dmPlugins = ADM_getInstallRelativePath(startDir,"ADM_plugins6","demuxers");    

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_filters/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_filters/CMakeLists.txt	2010-08-25 18:01:00 UTC (rev 6551)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_filters/CMakeLists.txt	2010-08-25 18:01:02 UTC (rev 6552)
@@ -6,4 +6,4 @@
 
 ADD_LIBRARY(${ADM_LIB} STATIC ${${ADM_LIB}_SRCS})
 FILE(GLOB ADM_filterIcons ${AVIDEMUX_TOP_SOURCE_DIR}/avidemux/common/ADM_icons/videoFilter/*.png)
-INSTALL(FILES videoFilter.gtkBuilder ${ADM_filterIcons} DESTINATION "${CMAKE_INSTALL_PREFIX}/lib/ADM_glade/videoFilter")
+INSTALL(FILES videoFilter.gtkBuilder ${ADM_filterIcons} DESTINATION "${AVIDEMUX_LIB_DIR}/ADM_glade/videoFilter")

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_toolkit_gtk/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_toolkit_gtk/CMakeLists.txt	2010-08-25 18:01:00 UTC (rev 6551)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_toolkit_gtk/CMakeLists.txt	2010-08-25 18:01:02 UTC (rev 6552)
@@ -8,6 +8,6 @@
 
 )
 
-ADD_DEFINITIONS("-DTARGET_DIR='\"${CMAKE_INSTALL_PREFIX}/lib/ADM_glade/\"' -DSOURCE_DIR='\"${CMAKE_CURRENT_SOURCE_DIR}\"'")
+ADD_DEFINITIONS("-DTARGET_DIR='\"${AVIDEMUX_LIB_DIR}/ADM_glade/\"' -DSOURCE_DIR='\"${CMAKE_CURRENT_SOURCE_DIR}\"'")
 ADD_LIBRARY(${ADM_LIB} SHARED ${${ADM_LIB}_SRCS})
 ADM_INSTALL_LIB(${ADM_LIB})

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/CMakeLists.txt	2010-08-25 18:01:00 UTC (rev 6551)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/CMakeLists.txt	2010-08-25 18:01:02 UTC (rev 6552)
@@ -3,5 +3,5 @@
 #set(ADM_glade
 #gtk2_build.glade
 #)
-#INSTALL(FILES ${ADM_glade} DESTINATION "${CMAKE_INSTALL_PREFIX}/lib/ADM_glade/")
+#INSTALL(FILES ${ADM_glade} DESTINATION "${AVIDEMUX_LIB_DIR}/ADM_glade/")
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/CMakeLists.txt	2010-08-25 18:01:00 UTC (rev 6551)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/glade/main/CMakeLists.txt	2010-08-25 18:01:02 UTC (rev 6552)
@@ -7,6 +7,6 @@
 )
 
 FILE(GLOB ADM_icons ${AVIDEMUX_TOP_SOURCE_DIR}/avidemux/common/ADM_icons/*.png)
-INSTALL(FILES ${ADM_glade} ${ADM_icons} DESTINATION "${CMAKE_INSTALL_PREFIX}/lib/ADM_glade/main")
+INSTALL(FILES ${ADM_glade} ${ADM_icons} DESTINATION "${AVIDEMUX_LIB_DIR}/ADM_glade/main")
 
 

Modified: branches/avidemux_2.6_branch_mean/cmake/ADM_coreConfig.h.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/ADM_coreConfig.h.cmake	2010-08-25 18:01:00 UTC (rev 6551)
+++ branches/avidemux_2.6_branch_mean/cmake/ADM_coreConfig.h.cmake	2010-08-25 18:01:02 UTC (rev 6552)
@@ -2,6 +2,7 @@
 #define ADM_CORE_H
 
 #define ADM_INSTALL_DIR "${CMAKE_INSTALL_PREFIX}"
+#define ADM_RELATIVE_LIB_DIR "${AVIDEMUX_RELATIVE_LIB_DIR}"
 
 // GCC - CPU
 #cmakedefine ADM_BIG_ENDIAN

Modified: branches/avidemux_2.6_branch_mean/cmake/ad_plugin.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/ad_plugin.cmake	2010-08-25 18:01:00 UTC (rev 6551)
+++ branches/avidemux_2.6_branch_mean/cmake/ad_plugin.cmake	2010-08-25 18:01:02 UTC (rev 6552)
@@ -4,5 +4,5 @@
 
 MACRO(INSTALL_AUDIODECODER _lib)
 	TARGET_LINK_LIBRARIES(${_lib} ADM_core6 )
-	INSTALL(TARGETS ${_lib} DESTINATION "${CMAKE_INSTALL_PREFIX}/lib/ADM_plugins6/audioDecoder/")
+	INSTALL(TARGETS ${_lib} DESTINATION "${AVIDEMUX_LIB_DIR}/ADM_plugins6/audioDecoder/")
 ENDMACRO(INSTALL_AUDIODECODER)

Modified: branches/avidemux_2.6_branch_mean/cmake/admInstallDir.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/admInstallDir.cmake	2010-08-25 18:01:00 UTC (rev 6551)
+++ branches/avidemux_2.6_branch_mean/cmake/admInstallDir.cmake	2010-08-25 18:01:02 UTC (rev 6552)
@@ -8,6 +8,7 @@
 
         SET(AVIDEMUX_BIN_DIR ${AVIDEMUX_INSTALL_DIR})
         SET(AVIDEMUX_LIB_DIR ${AVIDEMUX_INSTALL_DIR})
+        SET(AVIDEMUX_RELATIVE_LIB_DIR "")
 ELSE(WIN32)
 # Unix
         IF(NOT AVIDEMUX_INSTALL_DIR )
@@ -16,12 +17,13 @@
         ENDIF(NOT AVIDEMUX_INSTALL_DIR )
         SET(AVIDEMUX_BIN_DIR ${AVIDEMUX_INSTALL_DIR}/bin)
         IF(CMAKE_C_IMPLICIT_LINK_DIRECTORIES MATCHES "\\/lib64([; ]|$)")
-                SET(AVIDEMUX_LIB_DIR ${AVIDEMUX_INSTALL_DIR}/lib64)
+                SET(AVIDEMUX_RELATIVE_LIB_DIR lib64)
         ELSEIF(CMAKE_C_IMPLICIT_LINK_DIRECTORIES MATCHES "\\/lib32([; ]|$)")
-                SET(AVIDEMUX_LIB_DIR ${AVIDEMUX_INSTALL_DIR}/lib32)
+                SET(AVIDEMUX_RELATIVE_LIB_DIR lib32)
         ELSE(CMAKE_C_IMPLICIT_LINK_DIRECTORIES MATCHES "\\/lib64([; ]|$)")
-                SET(AVIDEMUX_LIB_DIR ${AVIDEMUX_INSTALL_DIR}/lib)
+                SET(AVIDEMUX_RELATIVE_LIB_DIR lib)
         ENDIF(CMAKE_C_IMPLICIT_LINK_DIRECTORIES MATCHES "\\/lib64([; ]|$)")
+        SET(AVIDEMUX_LIB_DIR ${AVIDEMUX_INSTALL_DIR}/${AVIDEMUX_RELATIVE_LIB_DIR})
 ENDIF(WIN32)
 SET(AVIDEMUX_INCLUDE_DIR ${AVIDEMUX_INSTALL_DIR}/include)
 #

Modified: branches/avidemux_2.6_branch_mean/cmake/admPluginVideoEncoder.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/admPluginVideoEncoder.cmake	2010-08-25 18:01:00 UTC (rev 6551)
+++ branches/avidemux_2.6_branch_mean/cmake/admPluginVideoEncoder.cmake	2010-08-25 18:01:02 UTC (rev 6552)
@@ -6,5 +6,5 @@
 ENDMACRO(INIT_VIDEO_ENCODER_PLUGIN)
 
 MACRO(INSTALL_VIDEO_ENCODER _lib)
-	INSTALL(TARGETS ${_lib} DESTINATION "${CMAKE_INSTALL_PREFIX}/lib/ADM_plugins/videoEncoder/")
+	INSTALL(TARGETS ${_lib} DESTINATION "${AVIDEMUX_LIB_DIR}/ADM_plugins/videoEncoder/")
 ENDMACRO(INSTALL_VIDEO_ENCODER)

Modified: branches/avidemux_2.6_branch_mean/cmake/ae_plugin.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/ae_plugin.cmake	2010-08-25 18:01:00 UTC (rev 6551)
+++ branches/avidemux_2.6_branch_mean/cmake/ae_plugin.cmake	2010-08-25 18:01:02 UTC (rev 6552)
@@ -9,6 +9,6 @@
 ENDMACRO(INIT_AUDIO_ENCODER)
 
 MACRO(INSTALL_AUDIOENCODER _lib)
-	INSTALL(TARGETS ${_lib} DESTINATION "${CMAKE_INSTALL_PREFIX}/lib/ADM_plugins6/audioEncoders/")
+	INSTALL(TARGETS ${_lib} DESTINATION "${AVIDEMUX_LIB_DIR}/ADM_plugins6/audioEncoders/")
 	TARGET_LINK_LIBRARIES(${_lib} ADM_core6 ADM_coreUI6 ADM_coreAudio6 ADM_coreAudioEncoder6 ADM_coreUtils6)
 ENDMACRO(INSTALL_AUDIOENCODER)

Modified: branches/avidemux_2.6_branch_mean/cmake/av_plugin.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/av_plugin.cmake	2010-08-25 18:01:00 UTC (rev 6551)
+++ branches/avidemux_2.6_branch_mean/cmake/av_plugin.cmake	2010-08-25 18:01:02 UTC (rev 6552)
@@ -6,5 +6,5 @@
 ENDMACRO(INIT_AUDIO_DEVICE)
 
 MACRO(INSTALL_AUDIODEVICE _lib)
-	INSTALL(TARGETS ${_lib} DESTINATION "${CMAKE_INSTALL_PREFIX}/lib/ADM_plugins6/audioDevices/")
+	INSTALL(TARGETS ${_lib} DESTINATION "${AVIDEMUX_LIB_DIR}/ADM_plugins6/audioDevices/")
 ENDMACRO(INSTALL_AUDIODEVICE)

Modified: branches/avidemux_2.6_branch_mean/cmake/dm_plugin.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/dm_plugin.cmake	2010-08-25 18:01:00 UTC (rev 6551)
+++ branches/avidemux_2.6_branch_mean/cmake/dm_plugin.cmake	2010-08-25 18:01:02 UTC (rev 6552)
@@ -3,5 +3,5 @@
 
 MACRO(INSTALL_DEMUXER _lib)
         TARGET_LINK_LIBRARIES(${_lib} ADM_core6 ADM_coreUtils6 ADM_coreAudio6 ADM_coreImage6 ADM_coreUI6 ADM_core6 ADM_coreDemuxer6)
-	INSTALL(TARGETS ${_lib} DESTINATION "${CMAKE_INSTALL_PREFIX}/lib/ADM_plugins6/demuxers/")
+	INSTALL(TARGETS ${_lib} DESTINATION "${AVIDEMUX_LIB_DIR}/ADM_plugins6/demuxers/")
 ENDMACRO(INSTALL_DEMUXER)

Modified: branches/avidemux_2.6_branch_mean/cmake/mx_plugin.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/mx_plugin.cmake	2010-08-25 18:01:00 UTC (rev 6551)
+++ branches/avidemux_2.6_branch_mean/cmake/mx_plugin.cmake	2010-08-25 18:01:02 UTC (rev 6552)
@@ -3,5 +3,5 @@
 
 MACRO(INSTALL_MUXER _lib)
         TARGET_LINK_LIBRARIES(${_lib} ADM_core6 ADM_coreUtils6 ADM_coreAudio6 ADM_coreImage6 ADM_coreUI6 ADM_core6 ADM_coreMuxer6)
-	INSTALL(TARGETS ${_lib} DESTINATION "${CMAKE_INSTALL_PREFIX}/lib/ADM_plugins6/muxers/")
+	INSTALL(TARGETS ${_lib} DESTINATION "${AVIDEMUX_LIB_DIR}/ADM_plugins6/muxers/")
 ENDMACRO(INSTALL_MUXER)

Modified: branches/avidemux_2.6_branch_mean/cmake/vd_plugin.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/vd_plugin.cmake	2010-08-25 18:01:00 UTC (rev 6551)
+++ branches/avidemux_2.6_branch_mean/cmake/vd_plugin.cmake	2010-08-25 18:01:02 UTC (rev 6552)
@@ -1,7 +1,7 @@
 #
 #  Macro to declare an video decoder plugin
 #
-SET(VD_PLUGIN_DIR "${CMAKE_INSTALL_PREFIX}/lib/ADM_plugins6/videoDecoders/")
+SET(VD_PLUGIN_DIR "${AVIDEMUX_LIB_DIR}/ADM_plugins6/videoDecoders/")
 MACRO(INIT_VIDEO_DECODER _lib)
 	INCLUDE_DIRECTORIES("${AVIDEMUX_TOP_SOURCE_DIR}/avidemux/ADM_core/include")
 	INCLUDE_DIRECTORIES("${AVIDEMUX_TOP_SOURCE_DIR}/avidemux/ADM_coreVideoCodec/include")

Modified: branches/avidemux_2.6_branch_mean/cmake/ve_plugin.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/ve_plugin.cmake	2010-08-25 18:01:00 UTC (rev 6551)
+++ branches/avidemux_2.6_branch_mean/cmake/ve_plugin.cmake	2010-08-25 18:01:02 UTC (rev 6552)
@@ -1,7 +1,7 @@
 #
 #  Macro to declare an video encoder plugin
 #
-SET(VE_PLUGIN_DIR "${CMAKE_INSTALL_PREFIX}/lib/ADM_plugins6/videoEncoders/")
+SET(VE_PLUGIN_DIR "${AVIDEMUX_LIB_DIR}/ADM_plugins6/videoEncoders/")
 MACRO(INIT_VIDEO_ENCODER _lib)
 	INCLUDE_DIRECTORIES("${AVIDEMUX_TOP_SOURCE_DIR}/avidemux/ADM_core/include")
 	INCLUDE_DIRECTORIES("${AVIDEMUX_TOP_SOURCE_DIR}/avidemux/ADM_coreVideoEncoder/include")

Modified: branches/avidemux_2.6_branch_mean/cmake/vf_plugin.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/vf_plugin.cmake	2010-08-25 18:01:00 UTC (rev 6551)
+++ branches/avidemux_2.6_branch_mean/cmake/vf_plugin.cmake	2010-08-25 18:01:02 UTC (rev 6552)
@@ -1,4 +1,4 @@
-SET(VF_PLUGIN_DIR "${CMAKE_INSTALL_PREFIX}/lib/ADM_plugins6/videoFilters/")
+SET(VF_PLUGIN_DIR "${AVIDEMUX_LIB_DIR}/ADM_plugins6/videoFilters/")
 ############## INIT_VIDEO_FILTER_INTERNAL ###################"
 MACRO(INIT_VIDEO_FILTER_INTERNAL _lib)
     INCLUDE_DIRECTORIES(.)



From mean at mail.berlios.de  Tue Aug 31 17:28:49 2010
From: mean at mail.berlios.de (mean at mail.berlios.de)
Date: Tue, 31 Aug 2010 17:28:49 +0200
Subject: [Avidemux-svn-commit] r6553 -
	branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src
Message-ID: <20100831152849.D31BE480FEF@sheep.berlios.de>

Author: mean
Date: 2010-08-31 17:28:49 +0200 (Tue, 31 Aug 2010)
New Revision: 6553

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/ADM_imageOperation.cpp
Log:
[core] Renable copyImage/copyImageAlpha

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/ADM_imageOperation.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/ADM_imageOperation.cpp	2010-08-25 18:01:02 UTC (rev 6552)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/ADM_imageOperation.cpp	2010-08-31 15:28:49 UTC (rev 6553)
@@ -38,7 +38,7 @@
             destStride=this->GetPitch((ADM_PLANE)plane);
             int opHeight=_height;
             int opWidth=_width;
-            if(plane!=PLANAR_Y) 
+            if(plane!=PLANAR_Y)
             {
                 opHeight>>=1;
                 opWidth>>=1;
@@ -97,7 +97,7 @@
             int opHeight=_height;
             int opWidth=_width;
             uint8_t color=0;
-            if(plane!=PLANAR_Y) 
+            if(plane!=PLANAR_Y)
             {
                 opHeight>>=1;
                 opWidth>>=1;
@@ -118,9 +118,7 @@
 */
 bool ADMImage::copyTo(ADMImage *dest, uint32_t x,uint32_t y)
 {
-    ADM_assert(0);
-#warning not implemented
-#if 0    
+
     uint32_t box_w=_width, box_h=_height;
     // Clip if needed
     if(y>dest->_height)
@@ -136,21 +134,27 @@
 
     if(x+box_w>dest->_width) box_w=dest->_width-x;
     if(y+box_h>dest->_height) box_h=dest->_height-y;
+    // Get Source plane
+    uint8_t *srcPlanes[3];
+    uint8_t *dstPlanes[3];
+    dest->GetWritePlanes(dstPlanes);
+    GetReadPlanes(srcPlanes);
 
+    uint32_t srcPitches[3],dstPitches[3];
+    dest->GetPitches(dstPitches);
+    GetPitches(srcPitches);
     // do y
-    BitBlit(YPLANE(dest)+x+dest->_width*y,dest->_width,
-            data,_width,
-            box_w,box_h);
-    // Do u
-    BitBlit(UPLANE(dest)+x/2+(dest->_width*y)/4,dest->_width/2,
-            UPLANE(this),_width>>1,
-            box_w>>1,box_h>>1);
-
-    BitBlit(VPLANE(dest)+x/2+(dest->_width*y)/4,dest->_width/2,
-            VPLANE(this),_width>>1,
-            box_w>>1,box_h>>1);
-
-#endif
+    for(int i=0;i<3;i++)
+    {
+        int xx=x;
+        int yy=y;
+        int ww=box_w;
+        int hh=box_h;
+        if(i) {xx/=2;yy/=2;ww/=2;hh/=2;} /// u or v
+        BitBlit(dstPlanes[i]+xx+dstPitches[i]*yy, dstPitches[i],
+                     srcPlanes[i],srcPitches[i],
+                     ww,hh);
+    }
     return 1;
 
 }
@@ -162,9 +166,7 @@
 */
 bool ADMImage::copyToAlpha(ADMImage *dest, uint32_t x,uint32_t y,uint32_t alpha)
 {
-#warning not implemented
-    ADM_assert(0);
-#if 0
+
     uint32_t box_w=_width, box_h=_height;
     // Clip if needed
     if(y>dest->_height)
@@ -180,15 +182,27 @@
 
     if(x+box_w>dest->_width) box_w=dest->_width-x;
     if(y+box_h>dest->_height) box_h=dest->_height-y;
+    // Get Source plane
+    uint8_t *srcPlanes[3];
+    uint8_t *dstPlanes[3];
+    dest->GetWritePlanes(dstPlanes);
+    GetReadPlanes(srcPlanes);
 
+    uint32_t srcPitches[3],dstPitches[3];
+    dest->GetPitches(dstPitches);
+    GetPitches(srcPitches);
     // do y
-    BitBlitAlpha(YPLANE(dest)+x+dest->_width*y,dest->_width,         data,_width,            box_w,box_h,alpha);
-    // Do u
-    BitBlitAlpha(UPLANE(dest)+x/2+(dest->_width*y)/4,dest->_width/2,   UPLANE(this),_width>>1,  box_w>>1,box_h>>1,alpha);
-    // and V
-    BitBlitAlpha(VPLANE(dest)+x/2+(dest->_width*y)/4,dest->_width/2, VPLANE(this),_width>>1, box_w>>1,box_h>>1,alpha);
-
-#endif
+    for(int i=0;i<3;i++)
+    {
+        int xx=x;
+        int yy=y;
+        int ww=box_w;
+        int hh=box_h;
+        if(i) {xx/=2;yy/=2;ww/=2;hh/=2;} /// u or v
+        BitBlitAlpha(dstPlanes[i]+xx+dstPitches[i]*yy, dstPitches[i],
+                     srcPlanes[i],srcPitches[i],
+                     ww,hh,alpha);
+    }
     return 1;
 }
 



From mean at mail.berlios.de  Tue Aug 31 17:28:51 2010
From: mean at mail.berlios.de (mean at mail.berlios.de)
Date: Tue, 31 Aug 2010 17:28:51 +0200
Subject: [Avidemux-svn-commit] r6554 - branches/avidemux_2.6_branch_mean
Message-ID: <20100831152851.1EF3C480FEF@sheep.berlios.de>

Author: mean
Date: 2010-08-31 17:28:50 +0200 (Tue, 31 Aug 2010)
New Revision: 6554

Modified:
   branches/avidemux_2.6_branch_mean/bootStrap.bash
Log:
[build] Set Qt as default + fix when no packaging is selected

Modified: branches/avidemux_2.6_branch_mean/bootStrap.bash
===================================================================
--- branches/avidemux_2.6_branch_mean/bootStrap.bash	2010-08-31 15:28:49 UTC (rev 6553)
+++ branches/avidemux_2.6_branch_mean/bootStrap.bash	2010-08-31 15:28:50 UTC (rev 6554)
@@ -5,10 +5,10 @@
 packages_ext=""
 do_core=1
 do_cli=0
-do_gtk=1
-do_qt4=0
+do_gtk=0
+do_qt4=1
 do_plugins=1
-debug=0
+debug=1
 fail()
 {
         echo "** Failed at $1**"
@@ -33,8 +33,12 @@
         mkdir $BUILDDIR || fail mkdir
         cd $BUILDDIR 
         cmake $PKG -DCMAKE_EDIT_COMMAND=vim -DAVIDEMUX_SOURCE_DIR=$TOP -DCMAKE_INSTALL_PREFIX=/usr $EXTRA $DEBUG -G "$BUILDER" $SOURCEDIR || fail cmakeZ
-        make -j 2 > /tmp/log$BUILDDIR || fail make
-        fakeroot make package DESTDIR=debPack || fail package
+        make -j 2 >& /tmp/log$BUILDDIR || fail make
+	if  [ "x$PKG" = "x" ] ; then
+	  echo "No packaging..."
+        else
+          fakeroot make package DESTDIR=debPack || fail package
+	fi
 }
 printModule()
 {



From mean at mail.berlios.de  Tue Aug 31 17:28:52 2010
From: mean at mail.berlios.de (mean at mail.berlios.de)
Date: Tue, 31 Aug 2010 17:28:52 +0200
Subject: [Avidemux-svn-commit] r6555 -
	branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src
Message-ID: <20100831152852.93844480FEF@sheep.berlios.de>

Author: mean
Date: 2010-08-31 17:28:52 +0200 (Tue, 31 Aug 2010)
New Revision: 6555

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_paramList.cpp
Log:
[paramList] Support strings

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_paramList.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_paramList.cpp	2010-08-31 15:28:50 UTC (rev 6554)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_paramList.cpp	2010-08-31 15:28:52 UTC (rev 6555)
@@ -1,13 +1,13 @@
 /** *************************************************************************
     \file ADM_paramList
-    \brief Handle Param list 
-    \author  mean (C) 2009/2010   fixounet at free.fr                
+    \brief Handle Param list
+    \author  mean (C) 2009/2010   fixounet at free.fr
     Usually only basic types should be handled by this
     We make 2 exceptions though :
         * lavcodec settings as we use a lot of derivative class. It is to simplify derivative configuration
-        * same for COMPRESS_PARAMS, since is used by all video encoder, it is "smart" to make it a dedicated 
+        * same for COMPRESS_PARAMS, since is used by all video encoder, it is "smart" to make it a dedicated
                     configuration type.
-    
+
  ***************************************************************************/
 
 /***************************************************************************
@@ -67,7 +67,7 @@
         while(*n!=':' && *n) n++;
         n--;
         memcpy(tmp,s+1,n-s);
-        tmp[n-s]=0;       
+        tmp[n-s]=0;
         s=n+1;
        // printf("tmp:%s\n",tmp);
         // Now we have aaa=bbb in tmp, split it
@@ -164,7 +164,7 @@
     if(!strcasecmp(tmp,"AQ")) {params->mode=COMPRESS_AQ;params->qz=val;return true;}
     ADM_error("Unknown mode :%s\n",tmp);
     return false;
-    
+
 }
 /**
     \fn compressWriteToString
@@ -276,8 +276,14 @@
                             }
                        }
                         break;
-                        
-           case ADM_param_string: ADM_error("not implemented string for paramList\n");ADM_assert(0);
+
+           case ADM_param_string:
+                    {
+                        char   *var;
+                        couples->readAsString(name,&var);
+                        *(char  **)(address+params[i].offset)=var;
+                    }
+                    break;
         }
     }
     return true;
@@ -299,7 +305,7 @@
     *couples=new CONFcouple(p);
     CONFcouple *c=*couples;
     uint8_t *address=(uint8_t *)s;
-   
+
     for(int i=0;i<p;i++)
     {
         const char *name=params[i].paramName;
@@ -348,7 +354,20 @@
                         }
               }
                 break;
-           case ADM_param_string: ADM_error("not implemented string for paramList\n");ADM_assert(0);
+           case ADM_param_string:
+                {
+                        char *var;
+                        var=*(char  **)(address+params[i].offset);
+                        bool r=c->writeAsString(name,var);
+                        if(false==r)
+                        {
+                                ADM_error("Error writing string\n");
+                                return false;
+                        }
+                }
+                break;
+            default:
+                    ADM_assert(0);
         }
     }
     return true;



From mean at mail.berlios.de  Tue Aug 31 17:28:54 2010
From: mean at mail.berlios.de (mean at mail.berlios.de)
Date: Tue, 31 Aug 2010 17:28:54 +0200
Subject: [Avidemux-svn-commit] r6556 - in branches/avidemux_2.6_branch_mean:
	. myOwnPlugins myOwnPlugins/demuxer myOwnPlugins/videoFilter
Message-ID: <20100831152854.1886A480FEF@sheep.berlios.de>

Author: mean
Date: 2010-08-31 17:28:53 +0200 (Tue, 31 Aug 2010)
New Revision: 6556

Added:
   branches/avidemux_2.6_branch_mean/myOwnPlugins/
   branches/avidemux_2.6_branch_mean/myOwnPlugins/demuxer/
   branches/avidemux_2.6_branch_mean/myOwnPlugins/demuxer/ADM_wtv.cpp
   branches/avidemux_2.6_branch_mean/myOwnPlugins/demuxer/ADM_wtv.h
   branches/avidemux_2.6_branch_mean/myOwnPlugins/demuxer/ADM_wtvAudio.cpp
   branches/avidemux_2.6_branch_mean/myOwnPlugins/demuxer/ADM_wtvIo.h
   branches/avidemux_2.6_branch_mean/myOwnPlugins/demuxer/ADM_wtvPlugin.cpp
   branches/avidemux_2.6_branch_mean/myOwnPlugins/demuxer/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/myOwnPlugins/demuxer/readme.txt
   branches/avidemux_2.6_branch_mean/myOwnPlugins/videoFilter/
   branches/avidemux_2.6_branch_mean/myOwnPlugins/videoFilter/ADM_vidLogo.cpp
   branches/avidemux_2.6_branch_mean/myOwnPlugins/videoFilter/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/myOwnPlugins/videoFilter/logo.conf
   branches/avidemux_2.6_branch_mean/myOwnPlugins/videoFilter/logo.h
   branches/avidemux_2.6_branch_mean/myOwnPlugins/videoFilter/logo_desc.cpp
   branches/avidemux_2.6_branch_mean/myOwnPlugins/videoFilter/readme.txt
Log:
[myOwnFilter] Couple of standalone filter template for people wanting to write their own withour rebuilding avidemux

Added: branches/avidemux_2.6_branch_mean/myOwnPlugins/demuxer/ADM_wtv.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/myOwnPlugins/demuxer/ADM_wtv.cpp	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/myOwnPlugins/demuxer/ADM_wtv.cpp	2010-08-31 15:28:53 UTC (rev 6556)
@@ -0,0 +1,236 @@
+/** *************************************************************************
+    \file       ADM_wtv.cpp
+    \brief      WTV demuxer
+    copyright            : (C) 2010 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#include "ADM_default.h"
+#include "ADM_Video.h"
+#include "ADM_assert.h"
+
+#include "fourcc.h"
+#include "DIA_coreToolkit.h"
+#include "ADM_wtv.h"
+
+#if 0
+#define aprintf printf
+#else
+#define aprintf(...) {}
+#endif
+
+/**
+    \fn getAudioInfo
+*/
+WAVHeader *wtvHeader::getAudioInfo(uint32_t i )
+{
+  if(!_nbAudioTrack) return NULL;
+
+  ADM_assert(i<_nbAudioTrack);
+  if(!_audioAccess) return NULL;
+  return &(_allAudioTracks[i].wavHeader);
+}
+/**
+    \fn getAudioStream
+*/
+uint8_t    wtvHeader::getAudioStream(uint32_t i,ADM_audioStream  **audio)
+{
+ *audio=NULL;
+  if(!_nbAudioTrack) return true;
+  ADM_assert(i<_nbAudioTrack);
+  *audio=_audioStreams[i];
+ return 1;
+}
+/**
+    \fn getNbAudioStreams
+*/
+uint8_t                 wtvHeader::getNbAudioStreams(void)
+{
+    return _nbAudioTrack;
+}
+
+/**
+    \fn Dump
+*/
+
+void wtvHeader::Dump(void)
+{
+
+  printf("*********** WTV INFO***********\n");
+}
+
+/**
+    \fn close
+*/
+
+uint8_t wtvHeader::close(void)
+{
+	if (_fd)
+		fclose(_fd);
+
+	_fd=NULL;
+
+  if(_videoExtraData)
+  {
+    delete [] _videoExtraData;
+    _videoExtraData=NULL;
+  }
+  if(myName)
+  {
+    delete myName;
+    myName=NULL;
+  }
+  if(_videoExtraData)
+  {
+    delete [] _videoExtraData;
+    _videoExtraData=NULL;
+  }
+
+
+
+  for(int i=0;i<_nbAudioTrack;i++)
+  {
+    wtvAudioTrak *trk=&(_allAudioTracks[i]);
+    if(trk->extraData) delete [] trk->extraData;
+    trk->extraData=NULL;
+    delete    _audioAccess[i];
+    _audioAccess[i]=NULL;
+    delete _audioStreams[i];
+    _audioStreams[i]=NULL;
+  }
+  return 1;
+}
+/**
+    \fn wtvHeader
+*/
+
+
+ wtvHeader::wtvHeader( void ) : vidHeader()
+{
+  _fd=NULL;
+  _videoIndex=-1;
+  myName=NULL;
+  _videoStreamId=0;
+  nbImage=0;
+  memset(&(_allAudioTracks[0]),0,sizeof(_allAudioTracks));
+  memset(&(_audioAccess[0]),0,sizeof(_audioAccess));
+  memset(&(_audioStreams[0]),0,sizeof(_audioStreams));
+  _nbAudioTrack=0;
+
+}
+/**
+    \fn ~ wtvHeader
+*/
+
+ wtvHeader::~wtvHeader(  )
+{
+  close();
+}
+/**
+    \fn open
+*/
+
+uint8_t wtvHeader::open(const char *name)
+{
+  _fd=ADM_fopen(name,"rb");
+  if(!_fd)
+  {
+    GUI_Error_HIG("File Error.","Cannot open file\n");
+    return 0;
+  }
+  return false;
+  for(int i=0;i<_nbAudioTrack;i++)
+  {
+        _audioAccess[i]=new wtvAudioAccess(this,i);
+        _audioStreams[i]=ADM_audioCreateStream(&(_allAudioTracks[i].wavHeader), _audioAccess[i]);
+  }
+  return 1;
+}
+/**
+    \fn setFlag
+*/
+
+  uint8_t  wtvHeader::setFlag(uint32_t frame,uint32_t flags)
+{
+  ADM_assert(frame<nbImage);
+  return 1;
+}
+/**
+    \fn getFlags
+*/
+
+uint32_t wtvHeader::getFlags(uint32_t frame,uint32_t *flags)
+{
+  if(frame>=nbImage) return 0;
+  *flags=AVI_KEY_FRAME;
+  return 1;
+}
+/**
+    \fn getFrameSize
+*/
+uint8_t     wtvHeader::getFrameSize(uint32_t frame,uint32_t *size)
+{
+    *size=0;
+    if(frame>=nbImage) return 0;
+    *size=1;
+    return true;
+}
+/**
+    \fn getTime
+*/
+uint64_t                   wtvHeader::getTime(uint32_t frameNum)
+{
+     if(frameNum>=nbImage) return 0;
+     return ADM_NO_PTS;
+}
+/**
+    \fn getTime
+*/
+
+uint64_t                   wtvHeader::getVideoDuration(void)
+{
+    return 01000000LL;
+}
+/**
+    \fn getTime
+*/
+
+bool                       wtvHeader::getPtsDts(uint32_t frame,uint64_t *pts,uint64_t *dts)
+{
+    if(frame>=nbImage) return false;
+    *pts=ADM_NO_PTS;
+    *dts=ADM_NO_PTS;
+    return true;
+}
+/**
+    \fn getTime
+*/
+
+bool                       wtvHeader::setPtsDts(uint32_t frame,uint64_t pts,uint64_t dts)
+{
+     if(frame>=nbImage) return false;
+    return true;
+}
+/**
+    \fn getFrame
+*/
+uint8_t  wtvHeader::getFrame(uint32_t framenum,ADMCompressedImage *img)
+{
+  img->dataLength=0;
+  img->flags=AVI_KEY_FRAME;
+  return false;
+}
+/*
+    __________________________________________________________
+*/
+
+//EOF

Added: branches/avidemux_2.6_branch_mean/myOwnPlugins/demuxer/ADM_wtv.h
===================================================================
--- branches/avidemux_2.6_branch_mean/myOwnPlugins/demuxer/ADM_wtv.h	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/myOwnPlugins/demuxer/ADM_wtv.h	2010-08-31 15:28:53 UTC (rev 6556)
@@ -0,0 +1,162 @@
+/***************************************************************************
+                          ADM_pics.h  -  description
+                             -------------------
+    begin                : Mon Jun 3 2002
+    copyright            : (C) 2002/2009 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#ifndef ADM_ASF_H
+#define ADM_ASF_H
+#include <vector>
+using std::vector;
+#include "ADM_Video.h"
+#include "ADM_queue.h"
+
+
+#define ASF_MAX_AUDIO_TRACK 8
+
+#define WTV_CHUNK_SIZE (0x40*0x1000)
+
+class wtvHeader;
+
+typedef enum
+{
+   ADM_CHUNK_WTV_TIMING_CHUNK,
+   ADM_CHUNK_WTV_DATA_CHUNK,
+   ADM_CHUNK_WTV_STREAM_CHUNK,
+   ADM_CHUNK_WTV_SUBTITLE_CHUNK,
+   ADM_CHUNK_WTV_LANGUAGE_CHUNK,
+
+   ADM_CHUNK_WTV_UNKNOWN_CHUNK
+}ADM_KNOWN_CHUNK;
+
+typedef struct
+{
+  const char *name;
+  uint32_t len;
+  uint8_t val[16];
+  ADM_KNOWN_CHUNK id;
+}chunky;
+
+typedef struct
+{
+  uint32_t     streamIndex;
+  uint32_t     extraDataLen;
+  uint8_t      *extraData;
+  uint32_t     nbPackets;
+  uint32_t     length;
+  uint64_t     lastDts;
+  WAVHeader    wavHeader;
+}wtvAudioTrak;
+
+/**
+    \class wtvAudioAccess
+    \brief Audio access class for asf/wmv
+*/
+class wtvAudioAccess : public ADM_audioAccess
+{
+  protected:
+    uint32_t                _myRank;
+    char                    *myName;
+    uint32_t                _streamId;
+    uint32_t                _dataStart;
+    FILE                    *_fd;
+    ADM_queue               readQueue;
+    uint32_t                _packetSize;
+    class wtvHeader         *_father;
+    wtvAudioTrak            *_track;
+  public:
+                                wtvAudioAccess(wtvHeader *father,uint32_t rank);
+    virtual                     ~wtvAudioAccess();
+
+    virtual bool      canSeekTime(void) {return true;};
+    virtual bool      canSeekOffset(void) {return true;};
+    virtual bool      canGetDuration(void) {return true;};
+
+    virtual uint32_t  getLength(void) {return _track->length;}
+    virtual bool      goToTime(uint64_t timeUs) ;
+    virtual bool      isCBR(void) {return true;};
+
+
+    virtual uint64_t  getPos(void);
+    virtual bool      setPos(uint64_t pos);
+    virtual uint64_t  getDurationInUs(void) ;
+
+    virtual bool   getPacket(uint8_t *buffer, uint32_t *size, uint32_t maxSize,uint64_t *dts);
+
+};
+
+/**
+    \class wtvHeader
+    \brief Asf Demuxer
+*/
+
+class wtvHeader         :public vidHeader
+{
+  protected:
+    uint64_t                _duration;  // Duration 100 ns
+  protected:
+
+    FILE                    *_fd;
+
+    int32_t                 _videoIndex;
+    uint32_t                _videoStreamId;
+
+    uint8_t                 close(void);
+
+
+  public: // Shared with audio track
+    char                    *myName;
+
+    uint32_t                nbImage;
+    uint32_t                _nbAudioTrack;
+    wtvAudioAccess          *_audioAccess[ASF_MAX_AUDIO_TRACK];
+    wtvAudioTrak             _allAudioTracks[ASF_MAX_AUDIO_TRACK];
+    ADM_audioStream         *_audioStreams[ASF_MAX_AUDIO_TRACK];
+    // / Shared
+  public:
+                                        wtvHeader(void);
+   virtual                              ~wtvHeader();
+                uint8_t                 open(const char *name);
+      //__________________________
+      //				 Audio
+      //__________________________
+
+    virtual 	WAVHeader              *getAudioInfo(uint32_t i )  ;
+    virtual 	uint8_t                 getAudioStream(uint32_t i,ADM_audioStream  **audio);
+    virtual     uint8_t                 getNbAudioStreams(void);
+    // Frames
+      //__________________________
+      //				 video
+      //__________________________
+
+    virtual 	uint8_t                 setFlag(uint32_t frame,uint32_t flags);
+    virtual 	uint32_t                getFlags(uint32_t frame,uint32_t *flags);
+    virtual 	uint8_t                 getFrameSize(uint32_t frame,uint32_t *size);
+    virtual 	uint8_t                 getFrame(uint32_t framenum,ADMCompressedImage *img);
+
+    virtual   void                       Dump(void);
+    virtual   uint64_t                   getTime(uint32_t frameNum);
+    virtual   uint64_t                   getVideoDuration(void);
+
+    // Return true if the container provides pts informations
+    virtual   bool                       providePts(void) {return false;};
+    //
+    virtual   bool                       getPtsDts(uint32_t frame,uint64_t *pts,uint64_t *dts);
+    virtual   bool                       setPtsDts(uint32_t frame,uint64_t pts,uint64_t dts);
+
+
+};
+#endif
+
+

Added: branches/avidemux_2.6_branch_mean/myOwnPlugins/demuxer/ADM_wtvAudio.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/myOwnPlugins/demuxer/ADM_wtvAudio.cpp	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/myOwnPlugins/demuxer/ADM_wtvAudio.cpp	2010-08-31 15:28:53 UTC (rev 6556)
@@ -0,0 +1,84 @@
+/***************************************************************************
+    copyright            : (C) 2006 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+
+#include "ADM_default.h"
+#include "ADM_Video.h"
+
+#include "fourcc.h"
+#include "ADM_wtv.h"
+/**
+    \fn getDurationInUs
+*/
+uint64_t  wtvAudioAccess::getDurationInUs(void)
+{
+    return 0;
+}
+/**
+    \fn wtvAudioAccess
+*/
+
+wtvAudioAccess::~wtvAudioAccess()
+{
+	printf("[asfAudio] Destroying track\n");
+
+	fclose(_fd);
+	_fd = NULL;
+}
+
+/**
+    \fn wtvAudioAccess
+*/
+
+wtvAudioAccess::wtvAudioAccess(wtvHeader *father,uint32_t myRank)
+{
+
+}
+
+uint64_t  wtvAudioAccess::getPos(void)
+{
+    return 0;
+}
+
+/**
+    \fn setPos
+*/
+
+bool   wtvAudioAccess::setPos(uint64_t newoffset)
+{
+
+  return 1;
+}
+
+/**
+    \fn goToTime
+*/
+
+bool   wtvAudioAccess::goToTime(uint64_t dts_us)
+{
+
+    return false;
+}
+
+/**
+    \fn getPacket
+
+*/
+bool  wtvAudioAccess::getPacket(uint8_t *dest, uint32_t *len, uint32_t maxSize,uint64_t *dts)
+{
+
+
+  return 0;
+}
+//EOF

Added: branches/avidemux_2.6_branch_mean/myOwnPlugins/demuxer/ADM_wtvIo.h
===================================================================
--- branches/avidemux_2.6_branch_mean/myOwnPlugins/demuxer/ADM_wtvIo.h	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/myOwnPlugins/demuxer/ADM_wtvIo.h	2010-08-31 15:28:53 UTC (rev 6556)
@@ -0,0 +1,35 @@
+  uint64_t  asfPacket::read64(void)
+      {
+        uint64_t lo,hi;
+        lo=read32();
+        hi=read32();
+        _offset+=8;
+        ADM_assert(_offset<=pakSize);
+        return lo+(hi<<32); 
+        
+      }
+      uint32_t   asfPacket::read32(void)
+      {
+        uint8_t c[4];
+        fread(c,4,1,_fd);
+        _offset+=4;
+        ADM_assert(_offset<=pakSize);
+        return c[0]+(c[1]<<8)+(c[2]<<16)+(c[3]<<24);
+      }
+      uint32_t   asfPacket::read16(void)
+      {
+        uint8_t c[2];
+        fread(c,2,1,_fd);
+        _offset+=2;
+        ADM_assert(_offset<=pakSize);
+        return c[0]+(c[1]<<8);
+      }
+      
+      uint8_t   asfPacket::read8(void)
+      {
+        uint8_t c[1];
+        fread(c,1,1,_fd);
+        _offset++;
+        ADM_assert(_offset<=pakSize);
+        return c[0];
+      }

Added: branches/avidemux_2.6_branch_mean/myOwnPlugins/demuxer/ADM_wtvPlugin.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/myOwnPlugins/demuxer/ADM_wtvPlugin.cpp	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/myOwnPlugins/demuxer/ADM_wtvPlugin.cpp	2010-08-31 15:28:53 UTC (rev 6556)
@@ -0,0 +1,51 @@
+/***************************************************************************
+    copyright            : (C) 2007 by mean
+    email                : fixounet at free.fr
+
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include "ADM_default.h"
+#include "ADM_wtv.h"
+#include "ADM_demuxerInternal.h"
+#include "fourcc.h"
+
+ADM_DEMUXER_BEGIN( wtvHeader, 50,
+                    1,0,0,
+                    "wtv",
+                    "wtv DUMMY demuxer plugin (c) Mean 2010"
+                );
+
+/**
+    \fn Probe
+*/
+
+extern "C"  uint32_t         probe(uint32_t magic, const char *fileName)
+{
+    const uint8_t signature[16]= {0xB7,0xD8,0x00,0x20,0x37,0x49,0xDA,0x11,0xA6,0x4E,0x00,0x07,0xE9,0x5E,0xAD,0x8D};
+
+    FILE *f=ADM_fopen(fileName,"rb");
+    if(!f)
+    {
+            ADM_error("Cannot open %s\n",fileName);
+            return 0;
+    }
+    uint8_t buffer[16];
+    fread(buffer,16,1,f);
+    fclose(f);
+    if(!memcmp(buffer,signature,16))
+    {
+            ADM_info("WTV signature found\n");
+            return 100;
+    }
+
+    ADM_info (" [wtv] Cannot open that\n");
+    return 0;
+}

Added: branches/avidemux_2.6_branch_mean/myOwnPlugins/demuxer/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/myOwnPlugins/demuxer/CMakeLists.txt	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/myOwnPlugins/demuxer/CMakeLists.txt	2010-08-31 15:28:53 UTC (rev 6556)
@@ -0,0 +1,80 @@
+###################################################
+#
+#
+###################################################
+MESSAGE("#####################################")
+MESSAGE("Custom demuxer plugin template Started")
+MESSAGE("#####################################")
+MESSAGE("")
+
+SET(ADM_PROJECT AdmAsfDemuxer)
+SET(PLUGINS TRUE)
+CMAKE_MINIMUM_REQUIRED(VERSION 2.4.7 FATAL_ERROR)
+########################################
+# Where is the top dir ?
+########################################
+
+MESSAGE(STATUS "Checking for AVIDEMUX_SOURCE_DIR, AVIDEMUX_LIB_DIR, AVIDEMUX_INCLUDE_DIR...")
+IF (NOT AVIDEMUX_SOURCE_DIR)
+	MESSAGE(FATAL_ERROR "Please add -DAVIDEMUX_SOURCE_DIR=path_to_avidemux_source. You just need the source tree.")
+ELSE (NOT AVIDEMUX_TOP_SOURCE_DIR)
+        # We need TOP_SOURCE_DIR 
+	SET(AVIDEMUX_TOP_SOURCE_DIR "${AVIDEMUX_SOURCE_DIR}" CACHE STRING "")
+ENDIF (NOT AVIDEMUX_SOURCE_DIR)
+#IF (NOT AVIDEMUX_LIB_DIR)
+	#MESSAGE(FATAL_ERROR "Please add -DAVIDEMUX_LIB_DIR=path_to_avidemux_lib. It is probably /usr/lib or /usr/lib64.")
+#ELSE (NOT AVIDEMUX_LIB_DIR)
+        ## We need AVIDEMUX_LIB_DIR 
+	#SET(AVIDEMUX_LIB_DIR "${AVIDEMUX_LIB_DIR}" CACHE STRING "")
+#ENDIF (NOT AVIDEMUX_LIB_DIR)
+#IF (NOT AVIDEMUX_INCLUDE_DIR)
+	#MESSAGE(FATAL_ERROR "Please add -DAVIDEMUX_INCLUDE_DIR=path_to_avidemux_lib. It is probably /usr/include .")
+#ELSE (NOT AVIDEMUX_INCLUDE_DIR)
+        ## We need AVIDEMUX_INCLUDE_DIR 
+	#SET(AVIDEMUX_INCLUDE_DIR "${AVIDEMUX_INCLUDE_DIR}" CACHE STRING "")
+#ENDIF (NOT AVIDEMUX_INCLUDE_DIR)
+
+
+
+
+# Common definitions...
+SET(CMAKE_MODULE_PATH "${AVIDEMUX_TOP_SOURCE_DIR}/cmake" "${CMAKE_MODULE_PATH}")
+include(${AVIDEMUX_TOP_SOURCE_DIR}/avidemux/commonCmakeApplication.cmake)
+########################################
+# Add include dirs
+########################################
+SET(AVIDEMUX_INSTALL_DIR "${CMAKE_INSTALL_PREFIX}")
+MARK_AS_ADVANCED(AVIDEMUX_INSTALL_DIR)
+include(admInstallDir)
+#########################################
+# Get regular stuff from main app
+#########################################
+include(admCoreIncludes)
+LINK_DIRECTORIES("${AVIDEMUX_LIB_DIR}")
+INCLUDE_DIRECTORIES(${AVIDEMUX_INCLUDE_DIR}/avidemux/2.6/)
+
+IF (FRESH_BUILD)
+	MESSAGE("")
+ENDIF (FRESH_BUILD)
+
+########################################
+# Global options
+########################################
+OPTION(VERBOSE "" OFF)
+################################################
+# Now really define our plugin...
+###############################################
+
+include(dm_plugin)
+SET(ADM_wtv_SRCS 
+	ADM_wtvAudio.cpp
+        ADM_wtv.cpp  
+        ADM_wtvPlugin.cpp
+)
+
+ADD_LIBRARY(ADM_dm_wtv SHARED ${ADM_wtv_SRCS})
+
+INCLUDE_DIRECTORIES("${AVIDEMUX_SOURCE_DIR}/avidemux/ADM_libraries/ADM_ffmpeg")
+
+INIT_DEMUXER(ADM_dm_wtv)
+INSTALL_DEMUXER(ADM_dm_wtv)

Added: branches/avidemux_2.6_branch_mean/myOwnPlugins/demuxer/readme.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/myOwnPlugins/demuxer/readme.txt	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/myOwnPlugins/demuxer/readme.txt	2010-08-31 15:28:53 UTC (rev 6556)
@@ -0,0 +1,5 @@
+
+On Linux
+=========
+mkdir obj && cd obj && 
+cmake -G "CodeBlocks - Unix Makefiles" -DAVIDEMUX_SOURCE_DIR=path-to-avidemux-source/ -DCMAKE_INSTALL_PREFIX=/usr .. && make && sudo make install

Added: branches/avidemux_2.6_branch_mean/myOwnPlugins/videoFilter/ADM_vidLogo.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/myOwnPlugins/videoFilter/ADM_vidLogo.cpp	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/myOwnPlugins/videoFilter/ADM_vidLogo.cpp	2010-08-31 15:28:53 UTC (rev 6556)
@@ -0,0 +1,161 @@
+/***************************************************************************
+
+		Put a logon on video
+
+    copyright            : (C) 2007 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#include "ADM_default.h"
+#include "ADM_coreVideoFilterInternal.h"
+#include "logo.h"
+#include "logo_desc.cpp"
+#include "ADM_imageLoader.h"
+#include "DIA_factory.h"
+#include "DIA_coreToolkit.h"
+/**
+    \class addLogopFilter
+*/
+class addLogopFilter : public  ADM_coreVideoFilter
+{
+protected:
+                ADMImage    *myImage;
+                logo        configuration;
+                bool        reloadImage(void);
+public:
+                    addLogopFilter(ADM_coreVideoFilter *previous,CONFcouple *conf);
+                    ~addLogopFilter();
+
+        virtual const char   *getConfiguration(void);                   /// Return  current configuration as a human readable string
+        virtual bool         getNextFrame(uint32_t *fn,ADMImage *image);    /// Return the next image
+	 //  virtual FilterInfo  *getInfo(void);                             /// Return picture parameters after this filter
+        virtual bool         getCoupledConf(CONFcouple **couples) ;     /// Return the current filter configuration
+        virtual bool         configure(void);                           /// Start graphical user interface
+};
+
+// Add the hook to make it valid plugin
+DECLARE_VIDEO_FILTER(   addLogopFilter,   // Class
+                        1,0,0,              // Version
+                        ADM_UI_ALL,         // UI
+                        VF_TRANSFORM,            // Category
+                        "addLogo",            // internal name (must be uniq!)
+                        "Add logo.",            // Display name
+                        "Put a logo on top of video, with alpha blending." // Description
+                    );
+
+// Now implements the interesting parts
+/**
+    \fn addLogopFilter
+    \brief constructor
+*/
+addLogopFilter::addLogopFilter(  ADM_coreVideoFilter *in,CONFcouple *setup) : ADM_coreVideoFilter(in,setup)
+{
+    myImage=NULL;
+    if(!setup || !ADM_paramLoad(setup,logo_param,&configuration))
+    {
+        // Default value
+        configuration.x=0;
+        configuration.y=0;
+        configuration.alpha=255;
+        configuration.logo=NULL;
+    }
+    myName="logo";
+    reloadImage();
+}
+/**
+
+*/
+bool addLogopFilter::reloadImage(void)
+{
+        if(myImage) delete myImage;
+        myImage=NULL;
+
+        if(!configuration.logo)
+        {
+            return false;
+        }
+        myImage=createImageFromFile(configuration.logo);
+        if(!myImage) return false;
+        return true;
+}
+/**
+    \fn addLogopFilter
+    \brief destructor
+*/
+addLogopFilter::~addLogopFilter()
+{
+    if(configuration.logo) ADM_dealloc(configuration.logo);
+    configuration.logo=NULL;
+    if(myImage) delete myImage;
+    myImage=NULL;
+}
+
+/**
+    \fn getFrame
+    \brief Get a processed frame
+*/
+bool addLogopFilter::getNextFrame(uint32_t *fn,ADMImage *image)
+{
+    // since we do nothing, just get the output of previous filter
+    if(false==previousFilter->getNextFrame(fn,image))
+    {
+        ADM_warning("logoFilter : Cannot get frame\n");
+        return false;
+    }
+    // do in place flip
+#if 1
+    if(myImage)
+        myImage->copyToAlpha(image,configuration.x,configuration.y,configuration.alpha);
+#endif
+    return true;
+}
+/**
+    \fn getCoupledConf
+    \brief Return our current configuration as couple name=value
+*/
+bool         addLogopFilter::getCoupledConf(CONFcouple **couples)
+{
+    return ADM_paramSave(couples, logo_param,&configuration);
+}
+/**
+    \fn getConfiguration
+    \brief Return current setting as a string
+*/
+const char *addLogopFilter::getConfiguration(void)
+{
+    return "Add logo.";
+}
+
+/**
+    \fn configure
+*/
+bool addLogopFilter::configure( void)
+{
+#define PX(x) &(configuration.x)
+	   diaElemFile       file(0,(char **)PX(logo),QT_TR_NOOP("_Logo (jpg file):"), NULL, QT_TR_NOOP("Select JPEG file"));
+	   diaElemUInteger   positionX(PX(x),QT_TR_NOOP("_X Position:"),0,info.width);
+	   diaElemUInteger   positionY(PX(y),QT_TR_NOOP("_Y Position:"),0,info.height);
+	   diaElemUInteger   alpha(PX(alpha),QT_TR_NOOP("_Alpha:"),0,255);
+
+	   diaElem *elems[4]={&file,&positionX,&positionY,&alpha};
+
+	   if( diaFactoryRun(QT_TR_NOOP("Logo"),4,elems))
+	   {
+		   if(false==reloadImage())
+            GUI_Error_HIG("Oops","Cannot load the logo");
+		   return true;
+	   }
+	   return false;
+}
+
+
+/************************************************/
+//EOF

Added: branches/avidemux_2.6_branch_mean/myOwnPlugins/videoFilter/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/myOwnPlugins/videoFilter/CMakeLists.txt	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/myOwnPlugins/videoFilter/CMakeLists.txt	2010-08-31 15:28:53 UTC (rev 6556)
@@ -0,0 +1,57 @@
+###################################################
+MESSAGE("#####################################")
+MESSAGE("Custom videoFilter plugin template Started")
+MESSAGE("#####################################")
+MESSAGE("")
+
+SET(ADM_PROJECT AdmLogoVideoFilter)
+SET(PLUGINS TRUE)
+CMAKE_MINIMUM_REQUIRED(VERSION 2.4.7 FATAL_ERROR)
+########################################
+# Where is the top dir ?
+########################################
+
+MESSAGE(STATUS "Checking for AVIDEMUX_SOURCE_DIR, AVIDEMUX_LIB_DIR, AVIDEMUX_INCLUDE_DIR...")
+IF (NOT AVIDEMUX_SOURCE_DIR)
+	MESSAGE(FATAL_ERROR "Please add -DAVIDEMUX_SOURCE_DIR=path_to_avidemux_source. You just need the source tree.")
+ELSE (NOT AVIDEMUX_TOP_SOURCE_DIR)
+        # We need TOP_SOURCE_DIR 
+	SET(AVIDEMUX_TOP_SOURCE_DIR "${AVIDEMUX_SOURCE_DIR}" CACHE STRING "")
+ENDIF (NOT AVIDEMUX_SOURCE_DIR)
+
+# Common definitions...
+SET(CMAKE_MODULE_PATH "${AVIDEMUX_TOP_SOURCE_DIR}/cmake" "${CMAKE_MODULE_PATH}")
+include(${AVIDEMUX_TOP_SOURCE_DIR}/avidemux/commonCmakeApplication.cmake)
+########################################
+# Add include dirs
+########################################
+SET(AVIDEMUX_INSTALL_DIR "${CMAKE_INSTALL_PREFIX}")
+MARK_AS_ADVANCED(AVIDEMUX_INSTALL_DIR)
+include(admInstallDir)
+#########################################
+# Get regular stuff from main app
+#########################################
+include(admCoreIncludes)
+LINK_DIRECTORIES("${AVIDEMUX_LIB_DIR}")
+INCLUDE_DIRECTORIES(${AVIDEMUX_INCLUDE_DIR}/avidemux/2.6/)
+
+IF (FRESH_BUILD)
+	MESSAGE("")
+ENDIF (FRESH_BUILD)
+
+########################################
+# Global options
+########################################
+OPTION(VERBOSE "" OFF)
+################################################
+# Now really define our plugin...
+###############################################
+INCLUDE(vf_plugin)
+
+
+SET(ADM_vf_logo_SRCS ADM_vidLogo.cpp)
+
+ADD_LIBRARY(ADM_vf_logo SHARED ${ADM_vf_logo_SRCS})
+
+INIT_VIDEO_FILTER(ADM_vf_logo)
+INSTALL_VIDEO_FILTER(ADM_vf_logo)

Added: branches/avidemux_2.6_branch_mean/myOwnPlugins/videoFilter/logo.conf
===================================================================
--- branches/avidemux_2.6_branch_mean/myOwnPlugins/videoFilter/logo.conf	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/myOwnPlugins/videoFilter/logo.conf	2010-08-31 15:28:53 UTC (rev 6556)
@@ -0,0 +1,4 @@
+uint32_t:x
+uint32_t:y
+uint32_t:alpha
+string:logo

Added: branches/avidemux_2.6_branch_mean/myOwnPlugins/videoFilter/logo.h
===================================================================
--- branches/avidemux_2.6_branch_mean/myOwnPlugins/videoFilter/logo.h	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/myOwnPlugins/videoFilter/logo.h	2010-08-31 15:28:53 UTC (rev 6556)
@@ -0,0 +1,11 @@
+// Automatically generated, do not edit!
+#ifndef ADM_logo_CONF_H
+#define ADM_logo_CONF_H
+typedef struct {
+   uint32_t x;
+   uint32_t y;
+   uint32_t alpha;
+   char * logo;
+}logo;
+#endif //logo
+//EOF

Added: branches/avidemux_2.6_branch_mean/myOwnPlugins/videoFilter/logo_desc.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/myOwnPlugins/videoFilter/logo_desc.cpp	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/myOwnPlugins/videoFilter/logo_desc.cpp	2010-08-31 15:28:53 UTC (rev 6556)
@@ -0,0 +1,8 @@
+// Automatically generated, do not edit!
+const ADM_paramList logo_param[]={
+ {"x",offsetof( logo,x),"uint32_t",ADM_param_uint32_t},
+ {"y",offsetof( logo,y),"uint32_t",ADM_param_uint32_t},
+ {"alpha",offsetof( logo,alpha),"uint32_t",ADM_param_uint32_t},
+ {"logo",offsetof( logo,logo),"char *",ADM_param_string},
+{NULL,0,NULL}
+};

Added: branches/avidemux_2.6_branch_mean/myOwnPlugins/videoFilter/readme.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/myOwnPlugins/videoFilter/readme.txt	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/myOwnPlugins/videoFilter/readme.txt	2010-08-31 15:28:53 UTC (rev 6556)
@@ -0,0 +1,5 @@
+
+On Linux
+=========
+mkdir obj && cd obj && 
+cmake -G "CodeBlocks - Unix Makefiles" -DAVIDEMUX_SOURCE_DIR=path-to-avidemux-source/ -DCMAKE_INSTALL_PREFIX=/usr .. && make && sudo make install



From mean at mail.berlios.de  Tue Aug 31 17:43:49 2010
From: mean at mail.berlios.de (mean at mail.berlios.de)
Date: Tue, 31 Aug 2010 17:43:49 +0200
Subject: [Avidemux-svn-commit] r6557 - in
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6:
	. logo
Message-ID: <20100831154349.A9E97480FEF@sheep.berlios.de>

Author: mean
Date: 2010-08-31 17:43:49 +0200 (Tue, 31 Aug 2010)
New Revision: 6557

Added:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/logo/
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/logo/ADM_vidLogo.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/logo/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/logo/logo.conf
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/logo/logo.h
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/logo/logo_desc.cpp
Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/CMakeLists.txt
Log:
[videoFilter] Add logo as a regular filter

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/CMakeLists.txt	2010-08-31 15:28:53 UTC (rev 6556)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/CMakeLists.txt	2010-08-31 15:43:49 UTC (rev 6557)
@@ -10,3 +10,4 @@
 ADD_SUBDIRECTORY(swapUV)
 ADD_SUBDIRECTORY(resampleFps)
 ADD_SUBDIRECTORY(stackField)
+ADD_SUBDIRECTORY(logo)

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/logo/ADM_vidLogo.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/logo/ADM_vidLogo.cpp	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/logo/ADM_vidLogo.cpp	2010-08-31 15:43:49 UTC (rev 6557)
@@ -0,0 +1,161 @@
+/***************************************************************************
+
+		Put a logon on video
+
+    copyright            : (C) 2007 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#include "ADM_default.h"
+#include "ADM_coreVideoFilterInternal.h"
+#include "logo.h"
+#include "logo_desc.cpp"
+#include "ADM_imageLoader.h"
+#include "DIA_factory.h"
+#include "DIA_coreToolkit.h"
+/**
+    \class addLogopFilter
+*/
+class addLogopFilter : public  ADM_coreVideoFilter
+{
+protected:
+                ADMImage    *myImage;
+                logo        configuration;
+                bool        reloadImage(void);
+public:
+                    addLogopFilter(ADM_coreVideoFilter *previous,CONFcouple *conf);
+                    ~addLogopFilter();
+
+        virtual const char   *getConfiguration(void);                   /// Return  current configuration as a human readable string
+        virtual bool         getNextFrame(uint32_t *fn,ADMImage *image);    /// Return the next image
+	 //  virtual FilterInfo  *getInfo(void);                             /// Return picture parameters after this filter
+        virtual bool         getCoupledConf(CONFcouple **couples) ;     /// Return the current filter configuration
+        virtual bool         configure(void);                           /// Start graphical user interface
+};
+
+// Add the hook to make it valid plugin
+DECLARE_VIDEO_FILTER(   addLogopFilter,   // Class
+                        1,0,0,              // Version
+                        ADM_UI_ALL,         // UI
+                        VF_TRANSFORM,            // Category
+                        "addLogo",            // internal name (must be uniq!)
+                        "Add logo.",            // Display name
+                        "Put a logo on top of video, with alpha blending." // Description
+                    );
+
+// Now implements the interesting parts
+/**
+    \fn addLogopFilter
+    \brief constructor
+*/
+addLogopFilter::addLogopFilter(  ADM_coreVideoFilter *in,CONFcouple *setup) : ADM_coreVideoFilter(in,setup)
+{
+    myImage=NULL;
+    if(!setup || !ADM_paramLoad(setup,logo_param,&configuration))
+    {
+        // Default value
+        configuration.x=0;
+        configuration.y=0;
+        configuration.alpha=255;
+        configuration.logo=NULL;
+    }
+    myName="logo";
+    reloadImage();
+}
+/**
+
+*/
+bool addLogopFilter::reloadImage(void)
+{
+        if(myImage) delete myImage;
+        myImage=NULL;
+
+        if(!configuration.logo)
+        {
+            return false;
+        }
+        myImage=createImageFromFile(configuration.logo);
+        if(!myImage) return false;
+        return true;
+}
+/**
+    \fn addLogopFilter
+    \brief destructor
+*/
+addLogopFilter::~addLogopFilter()
+{
+    if(configuration.logo) ADM_dealloc(configuration.logo);
+    configuration.logo=NULL;
+    if(myImage) delete myImage;
+    myImage=NULL;
+}
+
+/**
+    \fn getFrame
+    \brief Get a processed frame
+*/
+bool addLogopFilter::getNextFrame(uint32_t *fn,ADMImage *image)
+{
+    // since we do nothing, just get the output of previous filter
+    if(false==previousFilter->getNextFrame(fn,image))
+    {
+        ADM_warning("logoFilter : Cannot get frame\n");
+        return false;
+    }
+    // do in place flip
+#if 1
+    if(myImage)
+        myImage->copyToAlpha(image,configuration.x,configuration.y,configuration.alpha);
+#endif
+    return true;
+}
+/**
+    \fn getCoupledConf
+    \brief Return our current configuration as couple name=value
+*/
+bool         addLogopFilter::getCoupledConf(CONFcouple **couples)
+{
+    return ADM_paramSave(couples, logo_param,&configuration);
+}
+/**
+    \fn getConfiguration
+    \brief Return current setting as a string
+*/
+const char *addLogopFilter::getConfiguration(void)
+{
+    return "Add logo.";
+}
+
+/**
+    \fn configure
+*/
+bool addLogopFilter::configure( void)
+{
+#define PX(x) &(configuration.x)
+	   diaElemFile       file(0,(char **)PX(logo),QT_TR_NOOP("_Logo (jpg file):"), NULL, QT_TR_NOOP("Select JPEG file"));
+	   diaElemUInteger   positionX(PX(x),QT_TR_NOOP("_X Position:"),0,info.width);
+	   diaElemUInteger   positionY(PX(y),QT_TR_NOOP("_Y Position:"),0,info.height);
+	   diaElemUInteger   alpha(PX(alpha),QT_TR_NOOP("_Alpha:"),0,255);
+
+	   diaElem *elems[4]={&file,&positionX,&positionY,&alpha};
+
+	   if( diaFactoryRun(QT_TR_NOOP("Logo"),4,elems))
+	   {
+		   if(false==reloadImage())
+            GUI_Error_HIG("Oops","Cannot load the logo");
+		   return true;
+	   }
+	   return false;
+}
+
+
+/************************************************/
+//EOF

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/logo/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/logo/CMakeLists.txt	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/logo/CMakeLists.txt	2010-08-31 15:43:49 UTC (rev 6557)
@@ -0,0 +1,9 @@
+INCLUDE(vf_plugin)
+
+
+SET(ADM_vf_logo_SRCS ADM_vidLogo.cpp)
+
+ADD_LIBRARY(ADM_vf_logo SHARED ${ADM_vf_logo_SRCS})
+
+INIT_VIDEO_FILTER(ADM_vf_logo)
+INSTALL_VIDEO_FILTER(ADM_vf_logo)

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/logo/logo.conf
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/logo/logo.conf	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/logo/logo.conf	2010-08-31 15:43:49 UTC (rev 6557)
@@ -0,0 +1,4 @@
+uint32_t:x
+uint32_t:y
+uint32_t:alpha
+string:logo

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/logo/logo.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/logo/logo.h	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/logo/logo.h	2010-08-31 15:43:49 UTC (rev 6557)
@@ -0,0 +1,11 @@
+// Automatically generated, do not edit!
+#ifndef ADM_logo_CONF_H
+#define ADM_logo_CONF_H
+typedef struct {
+   uint32_t x;
+   uint32_t y;
+   uint32_t alpha;
+   char * logo;
+}logo;
+#endif //logo
+//EOF

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/logo/logo_desc.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/logo/logo_desc.cpp	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/logo/logo_desc.cpp	2010-08-31 15:43:49 UTC (rev 6557)
@@ -0,0 +1,8 @@
+// Automatically generated, do not edit!
+const ADM_paramList logo_param[]={
+ {"x",offsetof( logo,x),"uint32_t",ADM_param_uint32_t},
+ {"y",offsetof( logo,y),"uint32_t",ADM_param_uint32_t},
+ {"alpha",offsetof( logo,alpha),"uint32_t",ADM_param_uint32_t},
+ {"logo",offsetof( logo,logo),"char *",ADM_param_string},
+{NULL,0,NULL}
+};



From mean at mail.berlios.de  Tue Aug 31 18:01:56 2010
From: mean at mail.berlios.de (mean at mail.berlios.de)
Date: Tue, 31 Aug 2010 18:01:56 +0200
Subject: [Avidemux-svn-commit] r6558 -
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Matroska
Message-ID: <20100831160156.558DA480FEF@sheep.berlios.de>

Author: mean
Date: 2010-08-31 18:01:55 +0200 (Tue, 31 Aug 2010)
New Revision: 6558

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Matroska/ADM_mkvIndexer.cpp
Log:
[mkv/Demux] Handle also stripped headers when getting the frame type

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Matroska/ADM_mkvIndexer.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Matroska/ADM_mkvIndexer.cpp	2010-08-31 15:43:49 UTC (rev 6557)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Matroska/ADM_mkvIndexer.cpp	2010-08-31 16:01:55 UTC (rev 6558)
@@ -162,7 +162,7 @@
   ix.flags=AVI_KEY_FRAME;
   ix.Dts=timecodeMS*1000LL;
   ix.Pts=timecodeMS*1000LL;
-  
+   uint32_t rpt=_tracks[0].headerRepeatSize;
   // since frame type is unreliable for mkv, we scan each frame
   // For the 2 most common cases : mp4 & h264.
   // Hackish, we already read the 3 bytes header
@@ -171,24 +171,28 @@
   {
     if( isMpeg4Compatible(_videostream.fccHandler))
     {
-        uint8_t *buffer=(uint8_t *)alloca(size*sizeof(uint8_t));
-        
-            parser->readBin(buffer,size-3);
+        uint8_t *buffer=(uint8_t *)alloca((rpt+size)*sizeof(uint8_t));
+            if(rpt)
+                memcpy(buffer,_tracks[0].headerRepeat,rpt);
+            parser->readBin(buffer+rpt,size-3);
             // Search the frame type...
 
              uint32_t nb,vopType,timeinc=16;
              ADM_vopS vops[10];
              vops[0].type=AVI_KEY_FRAME;
-             ADM_searchVop(buffer,buffer+size-3,&nb,vops, &timeinc);
+             ADM_searchVop(buffer,buffer+rpt+size-3,&nb,vops, &timeinc);
              ix.flags=vops[0].type;
         
     }else
     if(isH264Compatible(_videostream.fccHandler))
     {
-                uint8_t *buffer=(uint8_t *)alloca(size);
+                uint8_t *buffer=(uint8_t *)alloca(size+rpt);
                 uint32_t flags=AVI_KEY_FRAME;
-                parser->readBin(buffer,size-3);
-                extractH264FrameType(2,buffer,size-3,&flags); // Nal size is not used in that case
+                
+                if(rpt)
+                        memcpy(buffer,_tracks[0].headerRepeat,rpt);
+                parser->readBin(buffer+rpt,size-3);
+                extractH264FrameType(2,buffer,rpt+size-3,&flags); // Nal size is not used in that case
                 if(flags & AVI_KEY_FRAME)
                 {
                     printf("[MKV/H264] Frame %"LU" is a keyframe\n",(uint32_t)Track->index.size());



From mean at mail.berlios.de  Tue Aug 31 18:07:09 2010
From: mean at mail.berlios.de (mean at mail.berlios.de)
Date: Tue, 31 Aug 2010 18:07:09 +0200
Subject: [Avidemux-svn-commit] r6559 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_matroska
Message-ID: <20100831160709.620B8480FEF@sheep.berlios.de>

Author: mean
Date: 2010-08-31 18:07:09 +0200 (Tue, 31 Aug 2010)
New Revision: 6559

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_matroska/ADM_mkvIndexer.cpp
Log:
[mkv/demux] Also take into account repeat header when setting the frame type

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_matroska/ADM_mkvIndexer.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_matroska/ADM_mkvIndexer.cpp	2010-08-31 16:01:55 UTC (rev 6558)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_matroska/ADM_mkvIndexer.cpp	2010-08-31 16:07:09 UTC (rev 6559)
@@ -290,30 +290,35 @@
   Track->_nbIndex++;
 
   if(track) return 1; // no 0 track = audio or subs, we are done here
+  uint32_t rpt=_tracks[0].headerRepeatSize;
 
     // Try to update frame type on the fly...
     // Only do it for Mpeg4 SP/ASP/AVC
     if( isMpeg4Compatible(_videostream.fccHandler))
     {
-        uint8_t buffer[size];
+        uint8_t buffer[size+rpt];
         
-        parser->readBin(buffer,size-3);
+        parser->readBin(buffer+rpt,size-3);
         // Search the frame type...
+        if(rpt)
+           memcpy(buffer,_tracks[0].headerRepeat,rpt);
 
          uint32_t nb,vopType,timeinc=16;
          ADM_vopS vops[10];
          vops[0].type=AVI_KEY_FRAME;
-         ADM_searchVop(buffer,buffer+size-3,&nb,vops, &timeinc);
+         ADM_searchVop(buffer,buffer+rpt+size-3,&nb,vops, &timeinc);
          index[x].flags=vops[0].type;
     
     }
     else
     if(isH264Compatible(_videostream.fccHandler))
     {
-        uint8_t buffer[size];
+        uint8_t buffer[size+rpt];
             uint32_t flags=AVI_KEY_FRAME;
-            parser->readBin(buffer,size-3);
-            extractH264FrameType(2,buffer,size-3,&flags); // Nal size is not used in that case
+            parser->readBin(buffer+rpt,size-3);
+            if(rpt)
+               memcpy(buffer,_tracks[0].headerRepeat,rpt);
+            extractH264FrameType(2,buffer,rpt+size-3,&flags); // Nal size is not used in that case
             if(flags & AVI_KEY_FRAME)
             {
                 //printf("[MKV/H264] Frame %"LU" is a keyframe\n",(uint32_t)Track->index.size());



