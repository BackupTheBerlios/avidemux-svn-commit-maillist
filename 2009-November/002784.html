<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Avidemux-svn-commit] r5576 - in branches/avidemux_2.6_branch_mean:	. avidemux/cli avidemux/cli/ADM_UIs/src	avidemux/cli/ADM_userInterfaces	avidemux/cli/ADM_userInterfaces/ADM_dialog	avidemux/cli/ADM_userInterfaces/ADM_filters	avidemux/cli/ADM_userInterfaces/ADM_gui2 avidemux/common
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/avidemux-svn-commit/2009-November/index.html" >
   <LINK REL="made" HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r5576%20-%20in%20branches/avidemux_2.6_branch_mean%3A%0A%09.%20avidemux/cli%20avidemux/cli/ADM_UIs/src%0A%09avidemux/cli/ADM_userInterfaces%0A%09avidemux/cli/ADM_userInterfaces/ADM_dialog%0A%09avidemux/cli/ADM_userInterfaces/ADM_filters%0A%09avidemux/cli/ADM_userInterfaces/ADM_gui2%20avidemux/common&In-Reply-To=%3C200911281348.nASDmCR7013420%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002783.html">
   <LINK REL="Next"  HREF="002785.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Avidemux-svn-commit] r5576 - in branches/avidemux_2.6_branch_mean:	. avidemux/cli avidemux/cli/ADM_UIs/src	avidemux/cli/ADM_userInterfaces	avidemux/cli/ADM_userInterfaces/ADM_dialog	avidemux/cli/ADM_userInterfaces/ADM_filters	avidemux/cli/ADM_userInterfaces/ADM_gui2 avidemux/common</H1>
    <B>mean at BerliOS</B> 
    <A HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r5576%20-%20in%20branches/avidemux_2.6_branch_mean%3A%0A%09.%20avidemux/cli%20avidemux/cli/ADM_UIs/src%0A%09avidemux/cli/ADM_userInterfaces%0A%09avidemux/cli/ADM_userInterfaces/ADM_dialog%0A%09avidemux/cli/ADM_userInterfaces/ADM_filters%0A%09avidemux/cli/ADM_userInterfaces/ADM_gui2%20avidemux/common&In-Reply-To=%3C200911281348.nASDmCR7013420%40sheep.berlios.de%3E"
       TITLE="[Avidemux-svn-commit] r5576 - in branches/avidemux_2.6_branch_mean:	. avidemux/cli avidemux/cli/ADM_UIs/src	avidemux/cli/ADM_userInterfaces	avidemux/cli/ADM_userInterfaces/ADM_dialog	avidemux/cli/ADM_userInterfaces/ADM_filters	avidemux/cli/ADM_userInterfaces/ADM_gui2 avidemux/common">mean at mail.berlios.de
       </A><BR>
    <I>Sat Nov 28 14:48:12 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="002783.html">[Avidemux-svn-commit] r5575 -	branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script
</A></li>
        <LI>Next message: <A HREF="002785.html">[Avidemux-svn-commit] r5577 -	branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2784">[ date ]</a>
              <a href="thread.html#2784">[ thread ]</a>
              <a href="subject.html#2784">[ subject ]</a>
              <a href="author.html#2784">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: mean
Date: 2009-11-28 14:48:11 +0100 (Sat, 28 Nov 2009)
New Revision: 5576

Added:
   branches/avidemux_2.6_branch_mean/avidemux/cli/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/cli/cliPackageDebian.cmake
Modified:
   branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_UIs/src/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_UIs/src/FAC_toggle.cpp
   branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_dialog/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_dialog/DIA_none.cpp
   branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_dialog/DIA_working.cpp
   branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_filters/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_gui2/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_gui2/gui_none.cpp
   branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_gui2/preview_none.cpp
   branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/common/main.cpp
   branches/avidemux_2.6_branch_mean/bootStrap.bash
Log:
[cli] Cli build target (untested)

Modified: branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_UIs/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_UIs/src/CMakeLists.txt	2009-11-28 13:48:09 UTC (rev 5575)
+++ branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_UIs/src/CMakeLists.txt	2009-11-28 13:48:11 UTC (rev 5576)
@@ -1,4 +1,4 @@
-SET(ADM_LIB ADM_UICli)
+SET(ADM_LIB ADM_UI_Cli6)
 
 SET(${ADM_LIB}_SRCS 
 	DIA_dialogFactory.cpp

Modified: branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_UIs/src/FAC_toggle.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_UIs/src/FAC_toggle.cpp	2009-11-28 13:48:09 UTC (rev 5575)
+++ branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_UIs/src/FAC_toggle.cpp	2009-11-28 13:48:11 UTC (rev 5576)
@@ -97,7 +97,7 @@
 //******************************************************
 
 diaElemFloat::diaElemFloat(ELEM_TYPE_FLOAT *intValue,const char *toggleTitle, 
-                            ELEM_TYPE_FLOAT min, ELEM_TYPE_FLOAT max,const char *tip)
+                            ELEM_TYPE_FLOAT min, ELEM_TYPE_FLOAT max,const char *tip,int decimal)
   : diaElem(ELEM_FLOAT)
 {
 }

Modified: branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_dialog/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_dialog/CMakeLists.txt	2009-11-28 13:48:09 UTC (rev 5575)
+++ branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_dialog/CMakeLists.txt	2009-11-28 13:48:11 UTC (rev 5576)
@@ -1,8 +1,7 @@
-SET(ADM_LIB ADM_dialogNone)
+SET(ADM_LIB ADM_dialogCli6)
 
 SET(${ADM_LIB}_SRCS 
 	alert_none.cpp  DIA_busy.cpp  
-#DIA_encoding.cpp   i
         DIA_indexing.cpp  DIA_none.cpp  DIA_working.cpp  OCR_none.cpp)
 
-ADD_ADM_LIB_CLI_TARGET(${ADM_LIB} ${${ADM_LIB}_SRCS})
+ADD_LIBRARY(${ADM_LIB} SHARED ${${ADM_LIB}_SRCS})

Modified: branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_dialog/DIA_none.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_dialog/DIA_none.cpp	2009-11-28 13:48:09 UTC (rev 5575)
+++ branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_dialog/DIA_none.cpp	2009-11-28 13:48:11 UTC (rev 5576)
@@ -27,20 +27,14 @@
 #include &quot;ADM_videoFilter.h&quot;
 
 
-#include &quot;ADM_video/ADM_vidPartial_param.h&quot;
 
 
-#include &quot;ADM_videoFilter/ADM_vobsubinfo.h&quot;
-#include &quot;ADM_videoFilter/ADM_vidVobSub.h&quot;
-
-
 #include &quot;audioencoder.h&quot;
 #include &quot;ADM_lavcodec.h&quot;
-#include &quot;ADM_codecs/ADM_ffmpegConfig.h&quot;
+#include &quot;ADM_render/GUI_render.cpp&quot;
+//#include &quot;ADM_codecs/ADM_ffmpegConfig.h&quot;
 
-#include &quot;ADM_ocr/ADM_ocr.h&quot;
-#include &quot;ADM_ocr/ADM_ocrInternal.h&quot;
-#include &quot;ADM_userInterfaces/ADM_render/GUI_renderInternal.h&quot;
+//#include &quot;ADM_userInterfaces/ADM_render/GUI_renderInternal.h&quot;
 extern int global_argc;
 extern char **global_argv;
 extern void initTranslator(void);
@@ -61,9 +55,9 @@
 
 
 
-uint8_t DIA_getPartial(PARTIAL_CONFIG *param,AVDMGenericVideoStream *son,AVDMGenericVideoStream *previous) {return 0;}
+//uint8_t DIA_getPartial(PARTIAL_CONFIG *param,AVDMGenericVideoStream *son,AVDMGenericVideoStream *previous) {return 0;}
 uint8_t DIA_pipe(char **cmd,char **param) {return 0;}
-uint8_t DIA_vobsub(vobSubParam *param) {return 0;}
+//uint8_t DIA_vobsub(vobSubParam *param) {return 0;}
 uint8_t DIA_quota(char *) {return 0;}
 const char * GUI_getCustomScript(uint32_t nb) {return 0;}
 uint8_t DIA_RecentFiles( char **name ) {return 0;}
@@ -112,14 +106,14 @@
                       PARTICLE_PARAM * param,
                       const MenuMapping * menu_mapping,
                       uint32_t menu_mapping_count) { return 255; }
-uint8_t ADM_ocrUpdateNbLines(void *ui,uint32_t cur,uint32_t total) {return 0;}
-uint8_t ADM_ocrUpdateNbGlyphs(void *ui,uint32_t nbGlyphs) {return 0;}
-uint8_t ADM_ocrUpdateTextAndTime(void *ui,char *decodedString,char *timeCode) {	return 0;}
-uint8_t ADM_ocrDrawFull(void *d,uint8_t *data) {return 0;}
-uint8_t ADM_ocrUiEnd(void *d) {	return 0;}
-void *ADM_ocrUiSetup(void) {return 0;}
-uint8_t ADM_ocrSetRedrawSize(void *ui,uint32_t w,uint32_t h) {return 0;}
-ReplyType glyphToText(admGlyph *glyph,admGlyph *head,char *decodedString) {return ReplyOk;}
+//uint8_t ADM_ocrUpdateNbLines(void *ui,uint32_t cur,uint32_t total) {return 0;}
+//uint8_t ADM_ocrUpdateNbGlyphs(void *ui,uint32_t nbGlyphs) {return 0;}
+//uint8_t ADM_ocrUpdateTextAndTime(void *ui,char *decodedString,char *timeCode) {	return 0;}
+//uint8_t ADM_ocrDrawFull(void *d,uint8_t *data) {return 0;}
+//uint8_t ADM_ocrUiEnd(void *d) {	return 0;}
+//void *ADM_ocrUiSetup(void) {return 0;}
+//uint8_t ADM_ocrSetRedrawSize(void *ui,uint32_t w,uint32_t h) {return 0;}
+//ReplyType glyphToText(admGlyph *glyph,admGlyph *head,char *decodedString) {return ReplyOk;}
 extern void UI_purge(void);
 extern ADM_RENDER_TYPE UI_getPreferredRender(void);
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_dialog/DIA_working.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_dialog/DIA_working.cpp	2009-11-28 13:48:09 UTC (rev 5575)
+++ branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_dialog/DIA_working.cpp	2009-11-28 13:48:11 UTC (rev 5576)
@@ -30,9 +30,7 @@
 #include &quot;config.h&quot;
 #include &quot;ADM_default.h&quot;
 
-#include &quot;ADM_osSupport/ADM_debugID.h&quot;
-#define MODULE_NAME MODULE_CLOCKnTIMELEFT
-#include &quot;ADM_osSupport/ADM_debug.h&quot;
+#define aprintf ADM_info
 
 # include &quot;config.h&quot;
 #include &quot;DIA_working.h&quot;

Modified: branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_filters/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_filters/CMakeLists.txt	2009-11-28 13:48:09 UTC (rev 5575)
+++ branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_filters/CMakeLists.txt	2009-11-28 13:48:11 UTC (rev 5576)
@@ -1,6 +1,6 @@
-SET(ADM_LIB ADM_dialogFiltersNone)
+SET(ADM_LIB ADM_filtersCli6)
 
 SET(${ADM_LIB}_SRCS 
 	filter_none.cpp)
 
-ADD_ADM_LIB_CLI_TARGET(${ADM_LIB} ${${ADM_LIB}_SRCS})
\ No newline at end of file
+ADD_LIBRARY(${ADM_LIB} SHARED ${${ADM_LIB}_SRCS})

Modified: branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_gui2/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_gui2/CMakeLists.txt	2009-11-28 13:48:09 UTC (rev 5575)
+++ branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_gui2/CMakeLists.txt	2009-11-28 13:48:11 UTC (rev 5576)
@@ -1,6 +1,6 @@
-SET(ADM_LIB ADM_dialogGuiNone)
+SET(ADM_LIB ADM_gui2Cli6)
 
 SET(${ADM_LIB}_SRCS 
 	file_none.cpp  gui_none.cpp  preview_none.cpp)
 
-ADD_ADM_LIB_CLI_TARGET(${ADM_LIB} ${${ADM_LIB}_SRCS})
\ No newline at end of file
+ADD_LIBRARY(${ADM_LIB} SHARED ${${ADM_LIB}_SRCS})

Modified: branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_gui2/gui_none.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_gui2/gui_none.cpp	2009-11-28 13:48:09 UTC (rev 5575)
+++ branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_gui2/gui_none.cpp	2009-11-28 13:48:11 UTC (rev 5576)
@@ -15,7 +15,7 @@
 #include &quot;GUI_ui.h&quot;
 #include &quot;ADM_colorspace.h&quot;
 
-static uint32_t format=0;
+static uint32_t cliFormat=0;
 static int audioCodec=0;
 static int videoCodec=0;
  
@@ -31,15 +31,17 @@
 }
 
 //**************************************************
-bool 	UI_SetCurrentFormat( uint32_t fmt )
+#if 0
+uint8_t 	UI_SetCurrentFormat( ADM_OUT_FORMAT fmt )
 {
 format=fmt;
 }
 
-uint32_t 	UI_GetCurrentFormat( void )
+ADM_OUT_FORMAT 	UI_GetCurrentFormat( void )
 {
   return format;
 }
+#endif
 //**************************************************
 int 	UI_getCurrentVCodec(void)
 {
@@ -73,12 +75,9 @@
 
 void UI_updateTimeCount(uint32_t curFrame, uint32_t fps)
 {}
-void UI_setCurrentTime(uint64_t curTime)
+void UI_setTimeCount(uint32_t curFrame,uint32_t total, uint32_t fps)
 {}
-void UI_setTotalTime(uint64_t curTime)
-{}
 
-
 double 	UI_readScale( void )
 {
   return 0;
@@ -87,8 +86,6 @@
 {}
 void 	UI_setFrameType( uint32_t frametype,uint32_t qp)
 {}
-void 	UI_setMarkers(uint64_t a, uint64_t b )
-{}
 void 	UI_setTitle(const char *name)
 {}
 
@@ -144,5 +141,22 @@
 }
 void UI_purge( void )
 {}
+uint32_t UI_GetCurrentFormat( void )
+{
+	return cliFormat;
+}
+bool UI_SetCurrentFormat( uint32_t f )
+{
+	cliFormat=f;
+}
+void UI_setCurrentTime(uint64_t x)
+{
 
+}
+void UI_setMarkers(uint64_t a,uint64_t b)
+{
+}
+void UI_setTotalTime(uint64_t t)
+{
+}
 // EOF

Modified: branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_gui2/preview_none.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_gui2/preview_none.cpp	2009-11-28 13:48:09 UTC (rev 5575)
+++ branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_gui2/preview_none.cpp	2009-11-28 13:48:11 UTC (rev 5576)
@@ -12,7 +12,7 @@
 #include &quot;ADM_editor/ADM_edit.hxx&quot;
 #include &quot;ADM_videoFilter.h&quot;
 
-#include &quot;ADM_userInterfaces/ADM_render/GUI_render.h&quot;
+#include &quot;ADM_render/GUI_render.h&quot;
 
 void UI_rgbDraw(void *widg,uint32_t w, uint32_t h,uint8_t *ptr) {}
 void UI_updateDrawWindowSize(void *win,uint32_t w,uint32_t h) {}
@@ -23,4 +23,3 @@
 uint8_t DIA_previewUpdate(uint8_t *buffer) {return 1;}
 void DIA_previewEnd(void) {}
 uint8_t DIA_previewStillAlive(void) {return 1;}
-uint8_t DIA_filterPreview(const char *captionText, AVDMGenericVideoStream *videoStream, uint32_t frame) {}

Modified: branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/CMakeLists.txt	2009-11-28 13:48:09 UTC (rev 5575)
+++ branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/CMakeLists.txt	2009-11-28 13:48:11 UTC (rev 5576)
@@ -1,5 +1,5 @@
-ADD_ADM_LIB_CLI_TARGET(ADM_UI_None ui_support.cpp)
 
 ADD_SUBDIRECTORY(ADM_dialog)
 ADD_SUBDIRECTORY(ADM_filters)
 ADD_SUBDIRECTORY(ADM_gui2)
+ADD_LIBRARY(ADM_toolkitCli6 SHARED ui_support.cpp)

Added: branches/avidemux_2.6_branch_mean/avidemux/cli/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/cli/CMakeLists.txt	2009-11-28 13:48:09 UTC (rev 5575)
+++ branches/avidemux_2.6_branch_mean/avidemux/cli/CMakeLists.txt	2009-11-28 13:48:11 UTC (rev 5576)
@@ -0,0 +1,124 @@
+MESSAGE(&quot;#########################################&quot;)
+MESSAGE(&quot;Configure for avidemux Cli Started&quot;)
+MESSAGE(&quot;#########################################&quot;)
+MESSAGE(&quot;&quot;)
+SET(VERSION 2.6.0)
+CMAKE_MINIMUM_REQUIRED(VERSION 2.4.7 FATAL_ERROR)
+if (COMMAND cmake_policy)
+	cmake_policy(VERSION 2.4)
+	cmake_policy(SET CMP0003 NEW)
+	#cmake_policy(SET CMP0011 OLD)
+endif (COMMAND cmake_policy)
+SET( ADM_PROJECT Avidemux_cli)
+
+include(../commonCmakeApplication.cmake)
+##########################################
+# Config
+##########################################
+ADD_DEFINITIONS(-DADM_UI_TYPE_BUILD=ADM_UI_CLI)
+SET(CONFIG_HEADER_TYPE ADM_BUILD_CLI)
+SET(UI_SUFFIX cli)
+#
+CONFIGURE_FILE(&quot;${AVIDEMUX_TOP_SOURCE_DIR}/cmake/config.h.cmake&quot; &quot;${CMAKE_BINARY_DIR}/config/cli/config.h&quot;)
+MESSAGE(STATUS &quot;CLI config.h generated&quot;)
+
+INCLUDE_DIRECTORIES(&quot;${CMAKE_BINARY_DIR}/config/cli/&quot;)
+###########################################
+# Executable
+###########################################
+ADD_EXECUTABLE(avidemux3_cli ${ADM_EXE_SRCS})
+ADD_TARGET_CFLAGS(avidemux3_cli &quot;-I${CMAKE_BINARY_DIR}/config/cli&quot;)
+########################################
+# Add subdirectories 
+########################################
+ADD_SUBDIRECTORY(../common ./common)
+ADD_SUBDIRECTORY(ADM_UIs ./ADM_UIsCli)
+ADD_SUBDIRECTORY(ADM_userInterfaces ./ADM_userInterfacesCli)
+# Executable
+
+SDLify(../common/main.cpp)
+ADD_SOURCE_CFLAGS(../common/main.cpp &quot;-DADM_SUBVERSION=${ADM_SUBVERSION}&quot;)
+###########################################
+# Construct common libraries
+###########################################
+
+IF (ADM_DEBUG AND FIND_LEAKS)
+	TARGET_LINK_LIBRARIES(avidemux3_cli ADM_nvwa)
+ENDIF (ADM_DEBUG AND FIND_LEAKS)
+
+FOREACH (_libName ${commonLibs1})
+        TARGET_LINK_LIBRARIES(avidemux3_cli ${_libName})
+ENDFOREACH (_libName ${commonLibs})
+
+TARGET_LINK_LIBRARIES(avidemux3_cli ADM_filtersCli6)
+
+FOREACH (_libName ${commonLibs2})
+        TARGET_LINK_LIBRARIES(avidemux3_cli ${_libName})
+ENDFOREACH (_libName ${commonLibs})
+FOREACH (_libName ${coreLibs})
+        TARGET_LINK_LIBRARIES(avidemux3_cli ${_libName})
+ENDFOREACH (_libName ${commonLibs})
+
+#############################################
+# Add gtk specific libs
+#############################################
+TARGET_LINK_LIBRARIES(avidemux3_cli ADM_UI_Cli6)
+TARGET_LINK_LIBRARIES(avidemux3_cli ADM_dialogCli6)
+TARGET_LINK_LIBRARIES(avidemux3_cli ADM_gui2Cli6)
+TARGET_LINK_LIBRARIES(avidemux3_cli ADM_toolkitCli6)
+TARGET_LINK_LIBRARIES(avidemux3_cli ADM_UI_Cli6)
+###########################################
+# External libs
+###########################################
+# gettext
+IF (GETTEXT_FOUND)
+	TARGET_LINK_LIBRARIES(avidemux3_cli ${GETTEXT_LIBRARY_DIR})
+ENDIF (GETTEXT_FOUND)
+# PNG
+IF (USE_PNG)
+        TARGET_LINK_LIBRARIES(avidemux3_cli ${PNG_LIBRARIES})
+	
+ENDIF (USE_PNG)
+
+
+# XVideo
+IF (USE_XV)
+        TARGET_LINK_LIBRARIES(avidemux3_cli ${XVIDEO_LIBRARY_DIR})
+ENDIF (USE_XV)
+
+# SDL
+IF (USE_SDL)
+        TARGET_LINK_LIBRARIES(avidemux3_cli ${SDL_LIBRARY})
+ENDIF (USE_SDL)
+
+###########################################
+# UI Specific
+###########################################
+ADD_TARGET_LDFLAGS(avidemux3_cli ${GTK_LDFLAGS} ${GTHREAD_LDFLAGS})
+
+
+###########################################
+# OS Specific
+###########################################
+IF (WIN32)
+	target_link_libraries(ADM_osSupport)
+
+	IF (MINGW)
+		target_link_libraries(avidemux3_cli -mno-cygwin)
+	ENDIF (MINGW)
+
+	target_link_libraries(avidemux3_cli winmm)
+        ADD_TARGET_LDFLAGS(avidemux3_cli &quot;-mwindows&quot;)
+
+ENDIF (WIN32)
+#
+# libxml2
+#
+TARGET_LINK_LIBRARIES(avidemux3_cli ${LIBXML2_LIBRARIES})
+###########################################
+# Install
+###########################################
+ADM_LINK_THREAD(avidemux3_cli)
+ADM_INSTALL_BIN(avidemux3_cli)
+INSTALL(FILES ${CMAKE_BINARY_DIR}/config/cli/config.h DESTINATION &quot;${AVIDEMUX_INCLUDE_DIR}/avidemux/2.6/cli&quot;) 
+include(./cliPackageDebian.cmake)

Added: branches/avidemux_2.6_branch_mean/avidemux/cli/cliPackageDebian.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/cli/cliPackageDebian.cmake	2009-11-28 13:48:09 UTC (rev 5575)
+++ branches/avidemux_2.6_branch_mean/avidemux/cli/cliPackageDebian.cmake	2009-11-28 13:48:11 UTC (rev 5576)
@@ -0,0 +1,34 @@
+##############################
+# DEBIAN
+##############################
+SET(CPACK_SET_DESTDIR &quot;ON&quot;)
+SET(CPACK_DEBIAN_PACKAGE_NAME &quot;avidemux3-cli&quot;)
+SET (CPACK_GENERATOR &quot;DEB&quot;)
+# ARCH
+IF (X86_64_SUPPORTED)
+SET(CPACK_DEBIAN_PACKAGE_ARCHITECTURE &quot;amd64&quot;)
+ELSE (X86_64_SUPPORTED)
+SET(CPACK_DEBIAN_PACKAGE_ARCHITECTURE &quot;i386&quot;)
+ENDIF (X86_64_SUPPORTED)
+# Mandatory
+SET(CPACK_DEBIAN_PACKAGE_MAINTAINER &quot;mean&quot;)
+SET(CPACK_DEBIAN_PACKAGE_DESCRIPTION &quot;Simple video editori,main program gtk version &quot;)
+
+# Build our deps list
+# Build deps SET(DEPS &quot;debhelper (&gt;&gt; 4), libfreetype6-dev, libxml2-dev,  libxv-dev, dpatch , cmake, desktop-file-utils&quot;)
+SET(DEPS &quot;libc6 (&gt;=2.4),libglib2.0-0 (&gt;=2.14.0),libstdc++6 (&gt;=4.2.1),libx11-6,  libxml2 (&gt;=2.6.27), libxv1, zlib1g (&gt;=1:1.1.4), avidemux3-core (&gt;=2.6.0)&quot;)
+# Add optional DEPS here
+SET(CPACK_DEBIAN_PACKAGE_DEPENDS &quot;${DEPS}&quot;)
+#
+SET(CPACK_DEBIAN_PACKAGE_SECTION &quot;extra&quot;)
+SET(CPACK_DEBIAN_PACKAGE_PRIORITY &quot;optional&quot;)
+# Some more infos
+SET(CPACK_PACKAGE_VERSION_MAJOR &quot;2&quot;)
+SET(CPACK_PACKAGE_VERSION_MINOR &quot;6&quot;)
+SET(CPACK_PACKAGE_VERSION_PATCH &quot;0&quot;)
+SET(CPACK_PACKAGE_VERSION_PATCH &quot;0-${ADM_SUBVERSION}&quot;)
+#
+SET(CPACK_PACKAGE_NAME &quot;avidemux3-cli&quot;)
+#
+
+include(CPack)

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/main.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/main.cpp	2009-11-28 13:48:09 UTC (rev 5575)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/main.cpp	2009-11-28 13:48:11 UTC (rev 5576)
@@ -293,7 +293,7 @@
 	__try1(exceptionHandler);
 #endif
 
-#ifdef USE_VDPAU
+#if defined( USE_VDPAU) &amp;&amp; (ADM_UI_TYPE_BUILD!=ADM_UI_CLI)
     printf(&quot;Probing for VDPAU...\n&quot;);
     if(vdpauProbe()==true) printf(&quot;VDPAU available\n&quot;);
         else printf(&quot;VDPAU not available\n&quot;);

Modified: branches/avidemux_2.6_branch_mean/bootStrap.bash
===================================================================
--- branches/avidemux_2.6_branch_mean/bootStrap.bash	2009-11-28 13:48:09 UTC (rev 5575)
+++ branches/avidemux_2.6_branch_mean/bootStrap.bash	2009-11-28 13:48:11 UTC (rev 5576)
@@ -1,5 +1,6 @@
 #!/bin/bash
 do_core=1
+do_cli=0
 do_gtk=1
 do_qt4=0
 do_plugins=1
@@ -38,6 +39,7 @@
         printModule $do_core Core
         printModule $do_gtk Gtk
         printModule $do_qt4 Qt4
+        printModule $do_cli Cli
         printModule $do_plugins Plugins
 }
 usage()
@@ -47,6 +49,8 @@
         echo &quot;  --help            : Print usage&quot;
         echo &quot;  --with-core       : Build core&quot;
         echo &quot;  --without-core    : Dont build core&quot;
+        echo &quot;  --with-cli        : Build cli&quot;
+        echo &quot;  --without-cli     : Dont build cli&quot;
         echo &quot;  --with-gtk        : Build gtk&quot;
         echo &quot;  --without-gtk     : Dont build gtk&quot;
         echo &quot;  --with-core       : Build core&quot;
@@ -66,6 +70,9 @@
          --without-qt4)
                 do_qt4=0
              ;;
+         --without-cli)
+                do_cli=0
+             ;;
          --without-gtk)
                 do_gtk=0
              ;;
@@ -78,6 +85,9 @@
          --with-qt4)
                 do_qt4=1
              ;;
+         --with-cli)
+                do_cli=1
+             ;;
          --with-gtk)
                 do_gtk=1
              ;;
@@ -111,6 +121,11 @@
         cd $TOP
         Process buildQt4 ../avidemux/qt4
 fi
+if [ &quot;x$do_cli&quot; = &quot;x1&quot; ] ; then 
+        echo &quot;** CLI **&quot;
+        cd $TOP
+        Process buildCli ../avidemux/cli
+fi
 if [ &quot;x$do_qt4&quot; = &quot;x1&quot; ] ; then 
         echo &quot;** GTK **&quot;
         cd $TOP


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002783.html">[Avidemux-svn-commit] r5575 -	branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script
</A></li>
	<LI>Next message: <A HREF="002785.html">[Avidemux-svn-commit] r5577 -	branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2784">[ date ]</a>
              <a href="thread.html#2784">[ thread ]</a>
              <a href="subject.html#2784">[ subject ]</a>
              <a href="author.html#2784">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">More information about the Avidemux-svn-commit
mailing list</a><br>
</body></html>
