<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Avidemux-svn-commit] r5566 - in	branches/avidemux_2.5_branch_gruntster: cmake	plugins/ADM_videoEncoder/ADM_vidEnc_x264	plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk	plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/avidemux-svn-commit/2009-November/index.html" >
   <LINK REL="made" HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r5566%20-%20in%0A%09branches/avidemux_2.5_branch_gruntster%3A%20cmake%0A%09plugins/ADM_videoEncoder/ADM_vidEnc_x264%0A%09plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk%0A%09plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4&In-Reply-To=%3C200911262124.nAQLOxB1003214%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002774.html">
   <LINK REL="Next"  HREF="002776.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Avidemux-svn-commit] r5566 - in	branches/avidemux_2.5_branch_gruntster: cmake	plugins/ADM_videoEncoder/ADM_vidEnc_x264	plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk	plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4</H1>
    <B>gruntster at mail.berlios.de</B> 
    <A HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r5566%20-%20in%0A%09branches/avidemux_2.5_branch_gruntster%3A%20cmake%0A%09plugins/ADM_videoEncoder/ADM_vidEnc_x264%0A%09plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk%0A%09plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4&In-Reply-To=%3C200911262124.nAQLOxB1003214%40sheep.berlios.de%3E"
       TITLE="[Avidemux-svn-commit] r5566 - in	branches/avidemux_2.5_branch_gruntster: cmake	plugins/ADM_videoEncoder/ADM_vidEnc_x264	plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk	plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4">gruntster at mail.berlios.de
       </A><BR>
    <I>Thu Nov 26 22:24:59 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="002774.html">[Avidemux-svn-commit] r5565 -	branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioEncoders/lame
</A></li>
        <LI>Next message: <A HREF="002776.html">[Avidemux-svn-commit] r5567 - in	branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264:	. qt4
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2775">[ date ]</a>
              <a href="thread.html#2775">[ thread ]</a>
              <a href="subject.html#2775">[ subject ]</a>
              <a href="author.html#2775">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: gruntster
Date: 2009-11-26 22:24:49 +0100 (Thu, 26 Nov 2009)
New Revision: 5566

Modified:
   branches/avidemux_2.5_branch_gruntster/cmake/admCheckX264.cmake
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.glade
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.h
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Param.xsd
Log:
[x264] increase minimum supported core version to 67

Modified: branches/avidemux_2.5_branch_gruntster/cmake/admCheckX264.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admCheckX264.cmake	2009-11-26 20:33:11 UTC (rev 5565)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admCheckX264.cmake	2009-11-26 21:24:49 UTC (rev 5566)
@@ -14,14 +14,14 @@
 				STRING(REGEX REPLACE &quot;.*[ ]([0-9]+).*&quot; &quot;\\1&quot; x264_version &quot;${X264_H}&quot;)
 				MESSAGE(STATUS &quot;  core version: ${x264_version}&quot;)
 				
-				IF (x264_version LESS 54)
-					MESSAGE(&quot;WARNING: x264 core version is too old.  At least version 54 is required.&quot;)
+				IF (x264_version LESS 67)
+					MESSAGE(&quot;WARNING: x264 core version is too old.  At least version 67 is required.&quot;)
 					SET(X264_FOUND 0)
 				ELSEIF (x264_version GREATER 73)
 					FIND_HEADER_AND_LIB(X264 x264.h x264 x264_encoder_open_${x264_version})
-				ELSE (x264_version LESS 54)
+				ELSE (x264_version LESS 67)
 					FIND_HEADER_AND_LIB(X264 x264.h x264 x264_encoder_open)
-				ENDIF (x264_version LESS 54)
+				ENDIF (x264_version LESS 67)
 			ELSE (_X264_FOUND)
 				SET(X264_FOUND 0)
 			ENDIF (_X264_FOUND)

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.cpp	2009-11-26 20:33:11 UTC (rev 5565)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.cpp	2009-11-26 21:24:49 UTC (rev 5566)
@@ -603,17 +603,11 @@
 	printf(&quot;[x264] rc.f_rf_constant = %f\n&quot;, x264Param-&gt;rc.f_rf_constant);
 	printf(&quot;[x264] rc.i_qp_constant = %d\n&quot;, x264Param-&gt;rc.i_qp_constant);	
 	printf(&quot;[x264] analyse.i_subpel_refine = %d\n&quot;, x264Param-&gt;analyse.i_subpel_refine);
-#if X264_BUILD &lt; 65
-	printf(&quot;[x264] analyse.b_bframe_rdo = %d\n&quot;, x264Param-&gt;analyse.b_bframe_rdo);
-#endif
 	printf(&quot;[x264] analyse.i_me_method = %d\n&quot;, x264Param-&gt;analyse.i_me_method);
 	printf(&quot;[x264] analyse.i_me_range = %d\n&quot;, x264Param-&gt;analyse.i_me_range);
 	printf(&quot;[x264] analyse.i_mv_range = %d\n&quot;, x264Param-&gt;analyse.i_mv_range);
 	printf(&quot;[x264] analyse.i_mv_range_thread = %d\n&quot;, x264Param-&gt;analyse.i_mv_range_thread);
 	printf(&quot;[x264] analyse.i_direct_mv_pred = %d\n&quot;, x264Param-&gt;analyse.i_direct_mv_pred);
-#if X264_BUILD &lt; 66
-	printf(&quot;[x264] analyse.i_direct_8x8_inference = %d\n&quot;, x264Param-&gt;analyse.i_direct_8x8_inference);
-#endif
 	printf(&quot;[x264] analyse.b_weighted_bipred = %d\n&quot;, x264Param-&gt;analyse.b_weighted_bipred);
 	printf(&quot;[x264] analyse.b_transform_8x8 = %d\n&quot;, x264Param-&gt;analyse.b_transform_8x8);
 	printf(&quot;[x264] analyse.inter = %d\n&quot;, x264Param-&gt;analyse.inter);
@@ -630,22 +624,12 @@
 #else
 	printf(&quot;[x264] b_bframe_pyramid = %d\n&quot;, x264Param-&gt;b_bframe_pyramid);
 #endif
-#if X264_BUILD &gt;= 63
 	printf(&quot;[x264] i_bframe_adaptive = %d\n&quot;, x264Param-&gt;i_bframe_adaptive);
-#else
-	printf(&quot;[x264] b_bframe_adaptive = %d\n&quot;, x264Param-&gt;b_bframe_adaptive);
-#endif
 	printf(&quot;[x264] i_keyint_max = %d\n&quot;, x264Param-&gt;i_keyint_max);
 	printf(&quot;[x264] i_keyint_min = %d\n&quot;, x264Param-&gt;i_keyint_min);
 	printf(&quot;[x264] i_scenecut_threshold = %d\n&quot;, x264Param-&gt;i_scenecut_threshold);
-#if X264_BUILD &lt; 67
-	printf(&quot;[x264] b_pre_scenecut = %d\n&quot;, x264Param-&gt;b_pre_scenecut);
-#endif
 	printf(&quot;[x264] analyse.b_mixed_references = %d\n&quot;, x264Param-&gt;analyse.b_mixed_references);
 	printf(&quot;[x264] analyse.b_chroma_me = %d\n&quot;, x264Param-&gt;analyse.b_chroma_me);
-#if X264_BUILD &lt; 65
-	printf(&quot;[x264] analyse.b_bidir_me = %d\n&quot;, x264Param-&gt;analyse.b_bidir_me);
-#endif
 	printf(&quot;[x264] analyse.i_trellis = %d\n&quot;, x264Param-&gt;analyse.i_trellis);
 	printf(&quot;[x264] analyse.b_fast_pskip = %d\n&quot;, x264Param-&gt;analyse.b_fast_pskip);
 	printf(&quot;[x264] analyse.b_dct_decimate = %d\n&quot;, x264Param-&gt;analyse.b_dct_decimate);

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp	2009-11-26 20:33:11 UTC (rev 5565)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp	2009-11-26 21:24:49 UTC (rev 5566)
@@ -78,34 +78,6 @@
 	gtk_window_set_transient_for(GTK_WINDOW(dialog), GTK_WINDOW(configParameters-&gt;parent));
 	gtk_dialog_add_action_widget(GTK_DIALOG(dialog), WID(buttonResetDaults), ACTION_LOAD_DEFAULT);
 
-#if X264_BUILD &gt;= 58
-	gtk_combo_box_append_text(GTK_COMBO_BOX(WID(comboboxMethod)), _(&quot;Hadamard Exhaustive Search&quot;));
-#endif
-
-#if X264_BUILD &gt;= 65
-	gtk_combo_box_append_text (GTK_COMBO_BOX(WID(comboboxPartitionDecision)), _(&quot;1 - QPel SAD (Fastest)&quot;));
-	gtk_combo_box_append_text (GTK_COMBO_BOX(WID(comboboxPartitionDecision)), _(&quot;2 - QPel SATD&quot;));
-	gtk_combo_box_append_text (GTK_COMBO_BOX(WID(comboboxPartitionDecision)), _(&quot;3 - HPel on MB then QPel&quot;));
-	gtk_combo_box_append_text (GTK_COMBO_BOX(WID(comboboxPartitionDecision)), _(&quot;4 - Always QPel&quot;));
-	gtk_combo_box_append_text (GTK_COMBO_BOX(WID(comboboxPartitionDecision)), _(&quot;5 - QPel + Bidirectional ME&quot;));
-	gtk_combo_box_append_text (GTK_COMBO_BOX(WID(comboboxPartitionDecision)), _(&quot;6 - RD on I/P frames (Default)&quot;));
-	gtk_combo_box_append_text (GTK_COMBO_BOX(WID(comboboxPartitionDecision)), _(&quot;7 - RD on all frames&quot;));
-	gtk_combo_box_append_text (GTK_COMBO_BOX(WID(comboboxPartitionDecision)), _(&quot;8 - RD refinement on I/P frames&quot;));
-	gtk_combo_box_append_text (GTK_COMBO_BOX(WID(comboboxPartitionDecision)), _(&quot;9 - RD refinement on all frames&quot;));
-
-	gtk_widget_hide(WID(checkbuttonBidirME));
-#else
-	gtk_combo_box_append_text (GTK_COMBO_BOX(WID(comboboxPartitionDecision)), _(&quot;1  - Extremely Low (Fastest)&quot;));
-	gtk_combo_box_append_text (GTK_COMBO_BOX(WID(comboboxPartitionDecision)), _(&quot;2  - Very Low&quot;));
-	gtk_combo_box_append_text (GTK_COMBO_BOX(WID(comboboxPartitionDecision)), _(&quot;3  - Low&quot;));
-	gtk_combo_box_append_text (GTK_COMBO_BOX(WID(comboboxPartitionDecision)), _(&quot;4  - Medium&quot;));
-	gtk_combo_box_append_text (GTK_COMBO_BOX(WID(comboboxPartitionDecision)), _(&quot;5  - High (Default)&quot;));
-	gtk_combo_box_append_text (GTK_COMBO_BOX(WID(comboboxPartitionDecision)), _(&quot;6  - Very High&quot;));
-	gtk_combo_box_append_text (GTK_COMBO_BOX(WID(comboboxPartitionDecision)), _(&quot;6B - Very High (RDO on B-frames)&quot;));
-	gtk_combo_box_append_text (GTK_COMBO_BOX(WID(comboboxPartitionDecision)), _(&quot;7  - Ultra High&quot;));
-	gtk_combo_box_append_text (GTK_COMBO_BOX(WID(comboboxPartitionDecision)), _(&quot;7B - Ultra High (RDO on B-frames)&quot;));
-#endif
-
 	loadOptions(dialog, options);
 	updateMode(dialog, encodeOptions-&gt;encodeMode, encodeOptions-&gt;encodeModeParameter);
 	updateDeblockingFilter(dialog);
@@ -293,9 +265,6 @@
 	gtk_toggle_button_set_active(GTK_TOGGLE_BUTTON(WID(checkbuttonDCTDecimate)), options-&gt;getDctDecimate());
 	gtk_toggle_button_set_active(GTK_TOGGLE_BUTTON(WID(checkbuttoninterlaced)), options-&gt;getInterlaced());
 	gtk_toggle_button_set_active(GTK_TOGGLE_BUTTON(WID(checkbuttonBasReference)), options-&gt;getBFrameReferences());
-#if X264_BUILD &lt; 65
-	gtk_toggle_button_set_active(GTK_TOGGLE_BUTTON(WID(checkbuttonBidirME)), options-&gt;getBidirectionalMotionEstimation());
-#endif
 	gtk_toggle_button_set_active(GTK_TOGGLE_BUTTON(WID(checkbuttonAdaptative)), options-&gt;getAdaptiveBFrameDecision());
 	gtk_toggle_button_set_active(GTK_TOGGLE_BUTTON(WID(checkbuttonWeighted)), options-&gt;getWeightedPrediction());
 	gtk_toggle_button_set_active(GTK_TOGGLE_BUTTON(WID(checkbuttonMixedRefs)), options-&gt;getMixedReferences());
@@ -343,28 +312,7 @@
 	gtk_toggle_button_set_active(GTK_TOGGLE_BUTTON(WID(checkbutton8x8I)), options-&gt;getPartitionI8x8());
 	gtk_toggle_button_set_active(GTK_TOGGLE_BUTTON(WID(checkbutton4x4I)), options-&gt;getPartitionI4x4());
 	gtk_toggle_button_set_active(GTK_TOGGLE_BUTTON(WID(radiobuttonAsInputAR)), options-&gt;getSarAsInput());
-
-#if X264_BUILD &lt; 65
-	int decisionItem;
-
-	if (options-&gt;getSubpixelRefinement() &lt; 6)
-		decisionItem = options-&gt;getSubpixelRefinement() - 1;
-	else
-		if (options-&gt;getSubpixelRefinement() == 6)
-			if (options-&gt;getBFrameRdo())
-				decisionItem = 6;
-			else
-				decisionItem = 5;
-		else
-			if (options-&gt;getBFrameRdo())
-				decisionItem = 8;
-			else
-				decisionItem = 7;
-#else
-	int decisionItem = options-&gt;getSubpixelRefinement() - 1;
-#endif
-
-	gtk_combo_box_set_active(GTK_COMBO_BOX(WID(comboboxPartitionDecision)), decisionItem);
+	gtk_combo_box_set_active(GTK_COMBO_BOX(WID(comboboxPartitionDecision)), options-&gt;getSubpixelRefinement() - 1);
 }
 
 void saveOptions(GtkWidget *dialog, x264Options *options)
@@ -373,9 +321,6 @@
 	options-&gt;setDctDecimate(gtk_toggle_button_get_active(GTK_TOGGLE_BUTTON(WID(checkbuttonDCTDecimate))));
 	options-&gt;setInterlaced(gtk_toggle_button_get_active(GTK_TOGGLE_BUTTON(WID(checkbuttoninterlaced))));
 	options-&gt;setBFrameReferences(gtk_toggle_button_get_active(GTK_TOGGLE_BUTTON(WID(checkbuttonBasReference))));
-#if X264_BUILD &lt; 65
-	options-&gt;setBidirectionalMotionEstimation(gtk_toggle_button_get_active(GTK_TOGGLE_BUTTON(WID(checkbuttonBidirME))));
-#endif
 	options-&gt;setAdaptiveBFrameDecision(gtk_toggle_button_get_active(GTK_TOGGLE_BUTTON(WID(checkbuttonAdaptative))));
 	options-&gt;setWeightedPrediction(gtk_toggle_button_get_active(GTK_TOGGLE_BUTTON(WID(checkbuttonWeighted))));
 	options-&gt;setMixedReferences(gtk_toggle_button_get_active(GTK_TOGGLE_BUTTON(WID(checkbuttonMixedRefs))));
@@ -434,28 +379,7 @@
 	}
 
 	options-&gt;setSarAsInput(gtk_toggle_button_get_active(GTK_TOGGLE_BUTTON(WID(radiobuttonAsInputAR))));
-
-	uint32_t decisionItem = gtk_combo_box_get_active(GTK_COMBO_BOX(WID(comboboxPartitionDecision)));
-
-#if X264_BUILD &lt; 65
-	if (decisionItem &lt; 6)
-	{
-		options-&gt;setSubpixelRefinement(decisionItem + 1);
-		options-&gt;setBFrameRdo(false);
-	}
-	else if (decisionItem == 6)
-	{
-		options-&gt;setSubpixelRefinement(6);
-		options-&gt;setBFrameRdo(true);
-	}
-	else
-	{
-		options-&gt;setSubpixelRefinement(7);
-		options-&gt;setBFrameRdo(decisionItem == 8);
-	}
-#else
-	options-&gt;setSubpixelRefinement(decisionItem + 1);
-#endif
+	options-&gt;setSubpixelRefinement(gtk_combo_box_get_active(GTK_COMBO_BOX(WID(comboboxPartitionDecision))) + 1);
 }
 
 GtkWidget*
@@ -561,7 +485,6 @@
   GtkWidget *spinbuttonMaxBFrame;
   GtkWidget *alignment20;
   GtkWidget *table6;
-  GtkWidget *checkbuttonBidirME;
   GtkWidget *checkbuttonWeighted;
   GtkWidget *checkbuttonAdaptative;
   GtkWidget *checkbuttonBasReference;
@@ -801,6 +724,15 @@
   gtk_table_attach (GTK_TABLE (table7), comboboxPartitionDecision, 1, 3, 0, 1,
                     (GtkAttachOptions) (GTK_FILL),
                     (GtkAttachOptions) (GTK_FILL), 0, 0);
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxPartitionDecision), _(&quot;1 - QPel SAD (Fastest)&quot;));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxPartitionDecision), _(&quot;2 - QPel SATD&quot;));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxPartitionDecision), _(&quot;3 - HPel on MB then QPel&quot;));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxPartitionDecision), _(&quot;4 - Always QPel&quot;));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxPartitionDecision), _(&quot;5 - QPel + Bidirectional ME&quot;));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxPartitionDecision), _(&quot;6 - RD on I/P frames (Default)&quot;));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxPartitionDecision), _(&quot;7 - RD on all frames&quot;));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxPartitionDecision), _(&quot;8 - RD refinement on I/P frames&quot;));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxPartitionDecision), _(&quot;9 - RD refinement on all frames&quot;));
 
   comboboxMethod = gtk_combo_box_new_text ();
   gtk_widget_show (comboboxMethod);
@@ -811,6 +743,7 @@
   gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxMethod), _(&quot;Hexagonal Search&quot;));
   gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxMethod), _(&quot;Uneven Multi-hexagon&quot;));
   gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxMethod), _(&quot;Exhaustive Search&quot;));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxMethod), _(&quot;Hadamard Exhaustive Search&quot;));
 
   table11 = gtk_table_new (2, 3, FALSE);
   gtk_widget_show (table11);
@@ -1217,13 +1150,6 @@
   gtk_table_set_row_spacings (GTK_TABLE (table6), 3);
   gtk_table_set_col_spacings (GTK_TABLE (table6), 10);
 
-  checkbuttonBidirME = gtk_check_button_new_with_mnemonic (_(&quot;Bidirectional ME&quot;));
-  gtk_widget_show (checkbuttonBidirME);
-  gtk_table_attach (GTK_TABLE (table6), checkbuttonBidirME, 1, 2, 0, 1,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_tooltips_set_tip (tooltips, checkbuttonBidirME, _(&quot;Optimise both motion vectors in B-frames. This will improve quality but take more time for encoding.&quot;), NULL);
-
   checkbuttonWeighted = gtk_check_button_new_with_mnemonic (_(&quot;Weighted Biprediction&quot;));
   gtk_widget_show (checkbuttonWeighted);
   gtk_table_attach (GTK_TABLE (table6), checkbuttonWeighted, 1, 2, 1, 2,
@@ -1888,7 +1814,6 @@
   GLADE_HOOKUP_OBJECT (dialog1, spinbuttonMaxBFrame, &quot;spinbuttonMaxBFrame&quot;);
   GLADE_HOOKUP_OBJECT (dialog1, alignment20, &quot;alignment20&quot;);
   GLADE_HOOKUP_OBJECT (dialog1, table6, &quot;table6&quot;);
-  GLADE_HOOKUP_OBJECT (dialog1, checkbuttonBidirME, &quot;checkbuttonBidirME&quot;);
   GLADE_HOOKUP_OBJECT (dialog1, checkbuttonWeighted, &quot;checkbuttonWeighted&quot;);
   GLADE_HOOKUP_OBJECT (dialog1, checkbuttonAdaptative, &quot;checkbuttonAdaptative&quot;);
   GLADE_HOOKUP_OBJECT (dialog1, checkbuttonBasReference, &quot;checkbuttonBasReference&quot;);

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.glade
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.glade	2009-11-26 20:33:11 UTC (rev 5565)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.glade	2009-11-26 21:24:49 UTC (rev 5566)
@@ -401,16 +401,15 @@
 				  &lt;child&gt;
 				    &lt;widget class=&quot;GtkComboBox&quot; id=&quot;comboboxPartitionDecision&quot;&gt;
 				      &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
-				      &lt;property name=&quot;items&quot; translatable=&quot;yes&quot;&gt;1  - Extremely Low (Fastest)
-2  - Very Low
-3  - Low
-4  - Medium
-5  - High (Default)
-6  - Very High
-6B - Very High (RDO on B-frames)
-7  - Ultra High
-7B - Ultra High (RDO on B-frames)
-&lt;/property&gt;
+				      &lt;property name=&quot;items&quot; translatable=&quot;yes&quot;&gt;1 - QPel SAD (Fastest)
+2 - QPel SATD
+3 - HPel on MB then QPel
+4 - Always QPel
+5 - QPel + Bidirectional ME
+6 - RD on I/P frames (Default)
+7 - RD on all frames
+8 - RD refinement on I/P frames
+9 - RD refinement on all frames&lt;/property&gt;
 				      &lt;property name=&quot;add_tearoffs&quot;&gt;False&lt;/property&gt;
 				      &lt;property name=&quot;focus_on_click&quot;&gt;True&lt;/property&gt;
 				    &lt;/widget&gt;
@@ -430,7 +429,8 @@
 				      &lt;property name=&quot;items&quot; translatable=&quot;yes&quot;&gt;Diamond Search
 Hexagonal Search
 Uneven Multi-hexagon
-Exhaustive Search&lt;/property&gt;
+Exhaustive Search
+Hadamard Exhaustive Search&lt;/property&gt;
 				      &lt;property name=&quot;add_tearoffs&quot;&gt;False&lt;/property&gt;
 				      &lt;property name=&quot;focus_on_click&quot;&gt;True&lt;/property&gt;
 				    &lt;/widget&gt;
@@ -1748,29 +1748,6 @@
 				      &lt;property name=&quot;column_spacing&quot;&gt;10&lt;/property&gt;
 
 				      &lt;child&gt;
-					&lt;widget class=&quot;GtkCheckButton&quot; id=&quot;checkbuttonBidirME&quot;&gt;
-					  &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
-					  &lt;property name=&quot;tooltip&quot; translatable=&quot;yes&quot;&gt;Optimise both motion vectors in B-frames. This will improve quality but take more time for encoding.&lt;/property&gt;
-					  &lt;property name=&quot;can_focus&quot;&gt;True&lt;/property&gt;
-					  &lt;property name=&quot;label&quot; translatable=&quot;yes&quot;&gt;Bidirectional ME&lt;/property&gt;
-					  &lt;property name=&quot;use_underline&quot;&gt;True&lt;/property&gt;
-					  &lt;property name=&quot;relief&quot;&gt;GTK_RELIEF_NORMAL&lt;/property&gt;
-					  &lt;property name=&quot;focus_on_click&quot;&gt;True&lt;/property&gt;
-					  &lt;property name=&quot;active&quot;&gt;False&lt;/property&gt;
-					  &lt;property name=&quot;inconsistent&quot;&gt;False&lt;/property&gt;
-					  &lt;property name=&quot;draw_indicator&quot;&gt;True&lt;/property&gt;
-					&lt;/widget&gt;
-					&lt;packing&gt;
-					  &lt;property name=&quot;left_attach&quot;&gt;1&lt;/property&gt;
-					  &lt;property name=&quot;right_attach&quot;&gt;2&lt;/property&gt;
-					  &lt;property name=&quot;top_attach&quot;&gt;0&lt;/property&gt;
-					  &lt;property name=&quot;bottom_attach&quot;&gt;1&lt;/property&gt;
-					  &lt;property name=&quot;x_options&quot;&gt;fill&lt;/property&gt;
-					  &lt;property name=&quot;y_options&quot;&gt;&lt;/property&gt;
-					&lt;/packing&gt;
-				      &lt;/child&gt;
-
-				      &lt;child&gt;
 					&lt;widget class=&quot;GtkCheckButton&quot; id=&quot;checkbuttonWeighted&quot;&gt;
 					  &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
 					  &lt;property name=&quot;tooltip&quot; translatable=&quot;yes&quot;&gt;Enables weighting of B-frames to help fades&lt;/property&gt;

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp	2009-11-26 20:33:11 UTC (rev 5565)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp	2009-11-26 21:24:49 UTC (rev 5566)
@@ -84,53 +84,17 @@
 	connect(ui.dct8x8CheckBox, SIGNAL(toggled(bool)), this, SLOT(dct8x8CheckBox_toggled(bool)));
 	connect(ui.p8x8CheckBox, SIGNAL(toggled(bool)), this, SLOT(p8x8CheckBox_toggled(bool)));
 
-#if X264_BUILD &gt;= 57
-	ui.meMethodComboBox-&gt;addItem(QT_TR_NOOP(&quot;Hadamard Exhaustive Search&quot;));
-#endif
-
-#if X264_BUILD &gt;= 65
-	ui.rdoCheckBox-&gt;setVisible(false);
-	ui.label_37-&gt;setText(QT_TR_NOOP(&quot;9 (Best)&quot;));
-	ui.meSlider-&gt;setMaximum(9);
-	ui.meSpinBox-&gt;setMaximum(9);
-#endif
-
-#if X264_BUILD &gt;= 66
-	ui.label_41-&gt;setVisible(false);
-	ui.predictSizeComboBox-&gt;setVisible(false);
-#endif
-
-#if X264_BUILD &gt;= 67
 	ui.scenecutDetectionCheckBox-&gt;setVisible(false);
-#endif
 
 	// Frame tab
 	connect(ui.loopFilterCheckBox, SIGNAL(toggled(bool)), this, SLOT(loopFilterCheckBox_toggled(bool)));
 	connect(ui.cabacCheckBox, SIGNAL(toggled(bool)), this, SLOT(cabacCheckBox_toggled(bool)));
 
-#if X264_BUILD &lt; 63
-	ui.adaptiveBFrameComboBox-&gt;clear();
-	ui.adaptiveBFrameComboBox-&gt;addItem(QT_TR_NOOP(&quot;Disabled&quot;));
-	ui.adaptiveBFrameComboBox-&gt;addItem(QT_TR_NOOP(&quot;Enabled&quot;));
-#endif
-
 	// Analysis tab
 	connect(ui.trellisCheckBox, SIGNAL(toggled(bool)), this, SLOT(trellisCheckBox_toggled(bool)));
 	connect(ui.matrixCustomEditButton, SIGNAL(pressed()), this, SLOT(matrixCustomEditButton_pressed()));
 
-#if X264_BUILD &gt;= 65
-	ui.bFrameMotionEstCheckBox-&gt;setVisible(false);
-#endif
-
-#if X264_BUILD &lt; 64
-	ui.lblPsychoRDO-&gt;setVisible(false);
-	ui.psychoRdoSpinBox-&gt;setVisible(false);
-#endif
-
 	// Quantiser tab
-#if X264_BUILD &lt; 59
-	ui.aqGroupBox-&gt;setEnabled(false);
-#endif
 #if X264_BUILD &gt;= 69
 	connect(ui.aqVarianceCheckBox, SIGNAL(toggled(bool)), this, SLOT(aqVarianceCheckBox_toggled(bool)));
 #endif
@@ -451,13 +415,6 @@
 void x264ConfigDialog::meSlider_valueChanged(int value)
 {
 	ui.meSpinBox-&gt;setValue(value);
-
-#if X264_BUILD &lt; 65
-	ui.rdoCheckBox-&gt;setEnabled(value &gt;= 6);
-
-	if (value &lt; 6)
-		ui.rdoCheckBox-&gt;setChecked(false);
-#endif
 }
 
 void x264ConfigDialog::meSpinBox_valueChanged(int value)
@@ -685,9 +642,6 @@
 
 	// Motion Estimation tab
 	ui.meSpinBox-&gt;setValue(options-&gt;getSubpixelRefinement());
-#if X264_BUILD &lt; 65
-	ui.rdoCheckBox-&gt;setChecked(options-&gt;getBFrameRdo());
-#endif
 	ui.meMethodComboBox-&gt;setCurrentIndex(options-&gt;getMotionEstimationMethod());
 	ui.mvRangeSpinBox-&gt;setValue(options-&gt;getMotionVectorSearchRange());
 
@@ -708,16 +662,9 @@
 	}
 
 	ui.predictModeComboBox-&gt;setCurrentIndex(options-&gt;getDirectPredictionMode());
-
-#if X264_BUILD &lt; 66
-	if (options-&gt;getDirectPredictionSize() == -1)
-		ui.predictSizeComboBox-&gt;setCurrentIndex(0);
-	else
-		ui.predictSizeComboBox-&gt;setCurrentIndex(options-&gt;getDirectPredictionSize());
-#endif
-
-	// Prediction tab
 	ui.weightedPredictCheckBox-&gt;setChecked(options-&gt;getWeightedPrediction());
+
+	// Partition tab
 	ui.p8x8CheckBox-&gt;setChecked(options-&gt;getPartitionP8x8());
 	ui.b8x8CheckBox-&gt;setChecked(options-&gt;getPartitionB8x8());
 	ui.p4x4CheckBox-&gt;setChecked(options-&gt;getPartitionP4x4());
@@ -740,16 +687,10 @@
 	ui.maxGopSizeSpinBox-&gt;setValue(options-&gt;getGopMaximumSize());
 	ui.minGopSizeSpinBox-&gt;setValue(options-&gt;getGopMinimumSize());
 	ui.IFrameThresholdSpinBox-&gt;setValue(options-&gt;getScenecutThreshold());
-#if X264_BUILD &lt; 67
-	ui.scenecutDetectionCheckBox-&gt;setChecked(options-&gt;getPreScenecutDetection());
-#endif
 
 	// Analysis tab
 	ui.mixedRefsCheckBox-&gt;setChecked(options-&gt;getMixedReferences());
 	ui.chromaMotionEstCheckBox-&gt;setChecked(options-&gt;getChromaMotionEstimation());
-#if X264_BUILD &lt; 65
-	ui.bFrameMotionEstCheckBox-&gt;setChecked(options-&gt;getBidirectionalMotionEstimation());
-#endif
 
 	if (options-&gt;getTrellis() &amp;&amp; options-&gt;getCabac())
 	{
@@ -761,10 +702,7 @@
 
 	ui.fastPSkipCheckBox-&gt;setChecked(options-&gt;getFastPSkip());
 	ui.dctDecimateCheckBox-&gt;setChecked(options-&gt;getDctDecimate());
-
-#if X264_BUILD &gt;= 64
 	ui.psychoRdoSpinBox-&gt;setValue(options-&gt;getPsychoRdo());
-#endif
 
 	ui.noiseReductionSpinBox-&gt;setValue(options-&gt;getNoiseReduction());
 	ui.interLumaSpinBox-&gt;setValue(options-&gt;getInterLumaDeadzone());
@@ -801,11 +739,8 @@
 	ui.quantiserCurveCompressSpinBox-&gt;setValue((int)floor(options-&gt;getQuantiserCurveCompression() * 100 + .5));
 	ui.quantiserBeforeCompressSpinBox-&gt;setValue(options-&gt;getReduceFluxBeforeCurveCompression());
 	ui.quantiserAfterCompressSpinBox-&gt;setValue(options-&gt;getReduceFluxAfterCurveCompression());
-
-#if X264_BUILD &gt;= 62
 	ui.aqVarianceCheckBox-&gt;setChecked(options-&gt;getAdaptiveQuantiserMode() == X264_AQ_VARIANCE);
 	ui.aqStrengthSpinBox-&gt;setValue(options-&gt;getAdaptiveQuantiserStrength());
-#endif	// X264_BUILD &gt;= 62
 
 	// Advanced tab
 	ui.vbvMaxBitrateSpinBox-&gt;setValue(options-&gt;getVbvMaximumBitrate());
@@ -913,9 +848,6 @@
 
 	// Motion Estimation tab
 	options-&gt;setSubpixelRefinement(ui.meSpinBox-&gt;value());
-#if X264_BUILD &lt; 65
-	options-&gt;setBFrameRdo(ui.rdoCheckBox-&gt;isChecked());
-#endif
 	options-&gt;setMotionEstimationMethod(ui.meMethodComboBox-&gt;currentIndex());
 	options-&gt;setMotionVectorSearchRange(ui.mvRangeSpinBox-&gt;value());
 	
@@ -930,14 +862,6 @@
 		options-&gt;setMotionVectorThreadBuffer(-1);
 
 	options-&gt;setDirectPredictionMode(ui.predictModeComboBox-&gt;currentIndex());
-
-#if X264_BUILD &lt; 66
-	if (ui.predictSizeComboBox-&gt;currentIndex() == 0)
-		options-&gt;setDirectPredictionSize(-1);
-	else
-		options-&gt;setDirectPredictionSize(ui.predictSizeComboBox-&gt;currentIndex());
-#endif
-
 	options-&gt;setWeightedPrediction(ui.weightedPredictCheckBox-&gt;isChecked());
 	options-&gt;setDct8x8(ui.dct8x8CheckBox-&gt;isChecked());
 	options-&gt;setPartitionP8x8(ui.p8x8CheckBox-&gt;isChecked());
@@ -960,16 +884,10 @@
 	options-&gt;setGopMaximumSize(ui.maxGopSizeSpinBox-&gt;value());
 	options-&gt;setGopMinimumSize(ui.minGopSizeSpinBox-&gt;value());
 	options-&gt;setScenecutThreshold(ui.IFrameThresholdSpinBox-&gt;value());
-#if X264_BUILD &lt; 67
-	options-&gt;setPreScenecutDetection(ui.scenecutDetectionCheckBox-&gt;isChecked());
-#endif
 
 	// Analysis tab
 	options-&gt;setMixedReferences(ui.mixedRefsCheckBox-&gt;isChecked());
 	options-&gt;setChromaMotionEstimation(ui.chromaMotionEstCheckBox-&gt;isChecked());
-#if X264_BUILD &lt; 65
-	options-&gt;setBidirectionalMotionEstimation(ui.bFrameMotionEstCheckBox-&gt;isChecked());
-#endif
 
 	if (ui.trellisCheckBox-&gt;isChecked())
 		options-&gt;setTrellis(ui.trellisComboBox-&gt;currentIndex() + 1);
@@ -978,11 +896,7 @@
 
 	options-&gt;setFastPSkip(ui.fastPSkipCheckBox-&gt;isChecked());
 	options-&gt;setDctDecimate(ui.dctDecimateCheckBox-&gt;isChecked());
-
-#if X264_BUILD &gt;= 64
 	options-&gt;setPsychoRdo(ui.psychoRdoSpinBox-&gt;value());
-#endif
-
 	options-&gt;setNoiseReduction(ui.noiseReductionSpinBox-&gt;value());
 	options-&gt;setInterLumaDeadzone(ui.interLumaSpinBox-&gt;value());
 	options-&gt;setIntraLumaDeadzone(ui.intraLumaSpinBox-&gt;value());
@@ -1015,14 +929,12 @@
 	options-&gt;setReduceFluxBeforeCurveCompression(ui.quantiserBeforeCompressSpinBox-&gt;value());
 	options-&gt;setReduceFluxAfterCurveCompression(ui.quantiserAfterCompressSpinBox-&gt;value());
 
-#if X264_BUILD &gt;= 62
 	if (ui.aqVarianceCheckBox-&gt;isChecked())
 		options-&gt;setAdaptiveQuantiserMode(X264_AQ_VARIANCE);
 	else
 		options-&gt;setAdaptiveQuantiserMode(X264_AQ_NONE);
 
 	options-&gt;setAdaptiveQuantiserStrength(ui.aqStrengthSpinBox-&gt;value());
-#endif	// X264_BUILD &gt;= 62
 
 	// Advanced tab
 	options-&gt;setVbvMaximumBitrate(ui.vbvMaxBitrateSpinBox-&gt;value());

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui	2009-11-26 20:33:11 UTC (rev 5565)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui	2009-11-26 21:24:49 UTC (rev 5566)
@@ -7,7 +7,7 @@
     &lt;x&gt;0&lt;/x&gt;
     &lt;y&gt;0&lt;/y&gt;
     &lt;width&gt;523&lt;/width&gt;
-    &lt;height&gt;540&lt;/height&gt;
+    &lt;height&gt;536&lt;/height&gt;
    &lt;/rect&gt;
   &lt;/property&gt;
   &lt;property name=&quot;windowTitle&quot; &gt;
@@ -100,7 +100,7 @@
      &lt;/property&gt;
      &lt;property name=&quot;sizeHint&quot; &gt;
       &lt;size&gt;
-       &lt;width&gt;491&lt;/width&gt;
+       &lt;width&gt;505&lt;/width&gt;
        &lt;height&gt;10&lt;/height&gt;
       &lt;/size&gt;
      &lt;/property&gt;
@@ -846,6 +846,11 @@
                   &lt;string&gt;Exhaustive Search&lt;/string&gt;
                  &lt;/property&gt;
                 &lt;/item&gt;
+                &lt;item&gt;
+                 &lt;property name=&quot;text&quot; &gt;
+                  &lt;string&gt;Hadamard Exhaustive Search&lt;/string&gt;
+                 &lt;/property&gt;
+                &lt;/item&gt;
                &lt;/widget&gt;
               &lt;/item&gt;
               &lt;item&gt;
@@ -866,7 +871,7 @@
            &lt;/layout&gt;
           &lt;/item&gt;
           &lt;item&gt;
-           &lt;layout class=&quot;QVBoxLayout&quot; &gt;
+           &lt;layout class=&quot;QHBoxLayout&quot; &gt;
             &lt;property name=&quot;margin&quot; &gt;
              &lt;number&gt;0&lt;/number&gt;
             &lt;/property&gt;
@@ -879,18 +884,18 @@
                &lt;number&gt;0&lt;/number&gt;
               &lt;/property&gt;
               &lt;property name=&quot;spacing&quot; &gt;
-               &lt;number&gt;6&lt;/number&gt;
+               &lt;number&gt;12&lt;/number&gt;
               &lt;/property&gt;
               &lt;item&gt;
-               &lt;layout class=&quot;QHBoxLayout&quot; &gt;
+               &lt;layout class=&quot;QVBoxLayout&quot; &gt;
                 &lt;property name=&quot;margin&quot; &gt;
                  &lt;number&gt;0&lt;/number&gt;
                 &lt;/property&gt;
                 &lt;property name=&quot;spacing&quot; &gt;
-                 &lt;number&gt;12&lt;/number&gt;
+                 &lt;number&gt;0&lt;/number&gt;
                 &lt;/property&gt;
                 &lt;item&gt;
-                 &lt;layout class=&quot;QVBoxLayout&quot; &gt;
+                 &lt;layout class=&quot;QHBoxLayout&quot; &gt;
                   &lt;property name=&quot;margin&quot; &gt;
                    &lt;number&gt;0&lt;/number&gt;
                   &lt;/property&gt;
@@ -898,142 +903,119 @@
                    &lt;number&gt;0&lt;/number&gt;
                   &lt;/property&gt;
                   &lt;item&gt;
-                   &lt;layout class=&quot;QHBoxLayout&quot; &gt;
-                    &lt;property name=&quot;margin&quot; &gt;
-                     &lt;number&gt;0&lt;/number&gt;
+                   &lt;widget class=&quot;QLabel&quot; name=&quot;label_35&quot; &gt;
+                    &lt;property name=&quot;text&quot; &gt;
+                     &lt;string&gt;1 (Fast)&lt;/string&gt;
                     &lt;/property&gt;
-                    &lt;property name=&quot;spacing&quot; &gt;
-                     &lt;number&gt;0&lt;/number&gt;
-                    &lt;/property&gt;
-                    &lt;item&gt;
-                     &lt;widget class=&quot;QLabel&quot; name=&quot;label_35&quot; &gt;
-                      &lt;property name=&quot;text&quot; &gt;
-                       &lt;string&gt;1 (Fast)&lt;/string&gt;
-                      &lt;/property&gt;
-                     &lt;/widget&gt;
-                    &lt;/item&gt;
-                    &lt;item&gt;
-                     &lt;spacer&gt;
-                      &lt;property name=&quot;orientation&quot; &gt;
-                       &lt;enum&gt;Qt::Horizontal&lt;/enum&gt;
-                      &lt;/property&gt;
-                      &lt;property name=&quot;sizeHint&quot; &gt;
-                       &lt;size&gt;
-                        &lt;width&gt;40&lt;/width&gt;
-                        &lt;height&gt;20&lt;/height&gt;
-                       &lt;/size&gt;
-                      &lt;/property&gt;
-                     &lt;/spacer&gt;
-                    &lt;/item&gt;
-                    &lt;item&gt;
-                     &lt;widget class=&quot;QLabel&quot; name=&quot;label_36&quot; &gt;
-                      &lt;property name=&quot;text&quot; &gt;
-                       &lt;string&gt;Subpixel Refinement&lt;/string&gt;
-                      &lt;/property&gt;
-                     &lt;/widget&gt;
-                    &lt;/item&gt;
-                    &lt;item&gt;
-                     &lt;spacer&gt;
-                      &lt;property name=&quot;orientation&quot; &gt;
-                       &lt;enum&gt;Qt::Horizontal&lt;/enum&gt;
-                      &lt;/property&gt;
-                      &lt;property name=&quot;sizeHint&quot; &gt;
-                       &lt;size&gt;
-                        &lt;width&gt;40&lt;/width&gt;
-                        &lt;height&gt;20&lt;/height&gt;
-                       &lt;/size&gt;
-                      &lt;/property&gt;
-                     &lt;/spacer&gt;
-                    &lt;/item&gt;
-                    &lt;item&gt;
-                     &lt;widget class=&quot;QLabel&quot; name=&quot;label_37&quot; &gt;
-                      &lt;property name=&quot;text&quot; &gt;
-                       &lt;string&gt;7 (Best)&lt;/string&gt;
-                      &lt;/property&gt;
-                     &lt;/widget&gt;
-                    &lt;/item&gt;
-                   &lt;/layout&gt;
+                   &lt;/widget&gt;
                   &lt;/item&gt;
                   &lt;item&gt;
-                   &lt;widget class=&quot;QSlider&quot; name=&quot;meSlider&quot; &gt;
-                    &lt;property name=&quot;sizePolicy&quot; &gt;
-                     &lt;sizepolicy&gt;
-                      &lt;hsizetype&gt;5&lt;/hsizetype&gt;
-                      &lt;vsizetype&gt;0&lt;/vsizetype&gt;
-                      &lt;horstretch&gt;0&lt;/horstretch&gt;
-                      &lt;verstretch&gt;0&lt;/verstretch&gt;
-                     &lt;/sizepolicy&gt;
+                   &lt;spacer&gt;
+                    &lt;property name=&quot;orientation&quot; &gt;
+                     &lt;enum&gt;Qt::Horizontal&lt;/enum&gt;
                     &lt;/property&gt;
-                    &lt;property name=&quot;minimumSize&quot; &gt;
+                    &lt;property name=&quot;sizeHint&quot; &gt;
                      &lt;size&gt;
-                      &lt;width&gt;375&lt;/width&gt;
-                      &lt;height&gt;0&lt;/height&gt;
+                      &lt;width&gt;40&lt;/width&gt;
+                      &lt;height&gt;20&lt;/height&gt;
                      &lt;/size&gt;
                     &lt;/property&gt;
-                    &lt;property name=&quot;minimum&quot; &gt;
-                     &lt;number&gt;1&lt;/number&gt;
+                   &lt;/spacer&gt;
+                  &lt;/item&gt;
+                  &lt;item&gt;
+                   &lt;widget class=&quot;QLabel&quot; name=&quot;label_36&quot; &gt;
+                    &lt;property name=&quot;text&quot; &gt;
+                     &lt;string&gt;Subpixel Refinement&lt;/string&gt;
                     &lt;/property&gt;
-                    &lt;property name=&quot;maximum&quot; &gt;
-                     &lt;number&gt;7&lt;/number&gt;
-                    &lt;/property&gt;
-                    &lt;property name=&quot;pageStep&quot; &gt;
-                     &lt;number&gt;1&lt;/number&gt;
-                    &lt;/property&gt;
-                    &lt;property name=&quot;value&quot; &gt;
-                     &lt;number&gt;5&lt;/number&gt;
-                    &lt;/property&gt;
+                   &lt;/widget&gt;
+                  &lt;/item&gt;
+                  &lt;item&gt;
+                   &lt;spacer&gt;
                     &lt;property name=&quot;orientation&quot; &gt;
                      &lt;enum&gt;Qt::Horizontal&lt;/enum&gt;
                     &lt;/property&gt;
-                    &lt;property name=&quot;tickPosition&quot; &gt;
-                     &lt;enum&gt;QSlider::TicksBelow&lt;/enum&gt;
+                    &lt;property name=&quot;sizeHint&quot; &gt;
+                     &lt;size&gt;
+                      &lt;width&gt;40&lt;/width&gt;
+                      &lt;height&gt;20&lt;/height&gt;
+                     &lt;/size&gt;
                     &lt;/property&gt;
+                   &lt;/spacer&gt;
+                  &lt;/item&gt;
+                  &lt;item&gt;
+                   &lt;widget class=&quot;QLabel&quot; name=&quot;label_37&quot; &gt;
+                    &lt;property name=&quot;text&quot; &gt;
+                     &lt;string&gt;9 (Best)&lt;/string&gt;
+                    &lt;/property&gt;
                    &lt;/widget&gt;
                   &lt;/item&gt;
                  &lt;/layout&gt;
                 &lt;/item&gt;
                 &lt;item&gt;
-                 &lt;widget class=&quot;QSpinBox&quot; name=&quot;meSpinBox&quot; &gt;
-                  &lt;property name=&quot;maximum&quot; &gt;
-                   &lt;number&gt;7&lt;/number&gt;
+                 &lt;widget class=&quot;QSlider&quot; name=&quot;meSlider&quot; &gt;
+                  &lt;property name=&quot;sizePolicy&quot; &gt;
+                   &lt;sizepolicy&gt;
+                    &lt;hsizetype&gt;5&lt;/hsizetype&gt;
+                    &lt;vsizetype&gt;0&lt;/vsizetype&gt;
+                    &lt;horstretch&gt;0&lt;/horstretch&gt;
+                    &lt;verstretch&gt;0&lt;/verstretch&gt;
+                   &lt;/sizepolicy&gt;
                   &lt;/property&gt;
+                  &lt;property name=&quot;minimumSize&quot; &gt;
+                   &lt;size&gt;
+                    &lt;width&gt;375&lt;/width&gt;
+                    &lt;height&gt;0&lt;/height&gt;
+                   &lt;/size&gt;
+                  &lt;/property&gt;
                   &lt;property name=&quot;minimum&quot; &gt;
                    &lt;number&gt;1&lt;/number&gt;
                   &lt;/property&gt;
+                  &lt;property name=&quot;maximum&quot; &gt;
+                   &lt;number&gt;9&lt;/number&gt;
+                  &lt;/property&gt;
+                  &lt;property name=&quot;pageStep&quot; &gt;
+                   &lt;number&gt;1&lt;/number&gt;
+                  &lt;/property&gt;
                   &lt;property name=&quot;value&quot; &gt;
                    &lt;number&gt;5&lt;/number&gt;
                   &lt;/property&gt;
+                  &lt;property name=&quot;orientation&quot; &gt;
+                   &lt;enum&gt;Qt::Horizontal&lt;/enum&gt;
+                  &lt;/property&gt;
+                  &lt;property name=&quot;tickPosition&quot; &gt;
+                   &lt;enum&gt;QSlider::TicksBelow&lt;/enum&gt;
+                  &lt;/property&gt;
                  &lt;/widget&gt;
                 &lt;/item&gt;
                &lt;/layout&gt;
               &lt;/item&gt;
               &lt;item&gt;
-               &lt;spacer&gt;
-                &lt;property name=&quot;orientation&quot; &gt;
-                 &lt;enum&gt;Qt::Horizontal&lt;/enum&gt;
+               &lt;widget class=&quot;QSpinBox&quot; name=&quot;meSpinBox&quot; &gt;
+                &lt;property name=&quot;maximum&quot; &gt;
+                 &lt;number&gt;9&lt;/number&gt;
                 &lt;/property&gt;
-                &lt;property name=&quot;sizeHint&quot; &gt;
-                 &lt;size&gt;
-                  &lt;width&gt;40&lt;/width&gt;
-                  &lt;height&gt;20&lt;/height&gt;
-                 &lt;/size&gt;
+                &lt;property name=&quot;minimum&quot; &gt;
+                 &lt;number&gt;1&lt;/number&gt;
                 &lt;/property&gt;
-               &lt;/spacer&gt;
+                &lt;property name=&quot;value&quot; &gt;
+                 &lt;number&gt;5&lt;/number&gt;
+                &lt;/property&gt;
+               &lt;/widget&gt;
               &lt;/item&gt;
              &lt;/layout&gt;
             &lt;/item&gt;
             &lt;item&gt;
-             &lt;widget class=&quot;QCheckBox&quot; name=&quot;rdoCheckBox&quot; &gt;
-              &lt;property name=&quot;enabled&quot; &gt;
-               &lt;bool&gt;false&lt;/bool&gt;
+             &lt;spacer&gt;
+              &lt;property name=&quot;orientation&quot; &gt;
+               &lt;enum&gt;Qt::Horizontal&lt;/enum&gt;
               &lt;/property&gt;
-              &lt;property name=&quot;text&quot; &gt;
-               &lt;string&gt;Rate Distortion Optimisation for B-frames&lt;/string&gt;
+              &lt;property name=&quot;sizeHint&quot; &gt;
+               &lt;size&gt;
+                &lt;width&gt;40&lt;/width&gt;
+                &lt;height&gt;20&lt;/height&gt;
+               &lt;/size&gt;
               &lt;/property&gt;
-              &lt;property name=&quot;checked&quot; &gt;
-               &lt;bool&gt;false&lt;/bool&gt;
-              &lt;/property&gt;
-             &lt;/widget&gt;
+             &lt;/spacer&gt;
             &lt;/item&gt;
            &lt;/layout&gt;
           &lt;/item&gt;
@@ -1210,7 +1192,7 @@
            &lt;number&gt;6&lt;/number&gt;
           &lt;/property&gt;
           &lt;item&gt;
-           &lt;layout class=&quot;QVBoxLayout&quot; &gt;
+           &lt;layout class=&quot;QHBoxLayout&quot; &gt;
             &lt;property name=&quot;margin&quot; &gt;
              &lt;number&gt;0&lt;/number&gt;
             &lt;/property&gt;
@@ -1218,130 +1200,71 @@
              &lt;number&gt;6&lt;/number&gt;
             &lt;/property&gt;
             &lt;item&gt;
-             &lt;layout class=&quot;QGridLayout&quot; &gt;
+             &lt;widget class=&quot;QLabel&quot; name=&quot;label_40&quot; &gt;
+              &lt;property name=&quot;text&quot; &gt;
+               &lt;string&gt;Direct Prediction Mode:&lt;/string&gt;
+              &lt;/property&gt;
+             &lt;/widget&gt;
+            &lt;/item&gt;
+            &lt;item&gt;
+             &lt;layout class=&quot;QHBoxLayout&quot; &gt;
               &lt;property name=&quot;margin&quot; &gt;
                &lt;number&gt;0&lt;/number&gt;
               &lt;/property&gt;
               &lt;property name=&quot;spacing&quot; &gt;
                &lt;number&gt;6&lt;/number&gt;
               &lt;/property&gt;
-              &lt;item row=&quot;1&quot; column=&quot;0&quot; &gt;
-               &lt;widget class=&quot;QLabel&quot; name=&quot;label_41&quot; &gt;
-                &lt;property name=&quot;text&quot; &gt;
-                 &lt;string&gt;Direct Prediction Size:&lt;/string&gt;
+              &lt;item&gt;
+               &lt;widget class=&quot;QComboBox&quot; name=&quot;predictModeComboBox&quot; &gt;
+                &lt;property name=&quot;currentIndex&quot; &gt;
+                 &lt;number&gt;1&lt;/number&gt;
                 &lt;/property&gt;
-               &lt;/widget&gt;
-              &lt;/item&gt;
-              &lt;item row=&quot;0&quot; column=&quot;0&quot; &gt;
-               &lt;widget class=&quot;QLabel&quot; name=&quot;label_40&quot; &gt;
-                &lt;property name=&quot;text&quot; &gt;
-                 &lt;string&gt;Direct Prediction Mode:&lt;/string&gt;
-                &lt;/property&gt;
-               &lt;/widget&gt;
-              &lt;/item&gt;
-              &lt;item row=&quot;0&quot; column=&quot;1&quot; &gt;
-               &lt;layout class=&quot;QHBoxLayout&quot; &gt;
-                &lt;property name=&quot;margin&quot; &gt;
-                 &lt;number&gt;0&lt;/number&gt;
-                &lt;/property&gt;
-                &lt;property name=&quot;spacing&quot; &gt;
-                 &lt;number&gt;6&lt;/number&gt;
-                &lt;/property&gt;
                 &lt;item&gt;
-                 &lt;widget class=&quot;QComboBox&quot; name=&quot;predictModeComboBox&quot; &gt;
-                  &lt;property name=&quot;currentIndex&quot; &gt;
-                   &lt;number&gt;1&lt;/number&gt;
-                  &lt;/property&gt;
-                  &lt;item&gt;
-                   &lt;property name=&quot;text&quot; &gt;
-                    &lt;string&gt;None&lt;/string&gt;
-                   &lt;/property&gt;
-                  &lt;/item&gt;
-                  &lt;item&gt;
-                   &lt;property name=&quot;text&quot; &gt;
-                    &lt;string&gt;Spatial&lt;/string&gt;
-                   &lt;/property&gt;
-                  &lt;/item&gt;
-                  &lt;item&gt;
-                   &lt;property name=&quot;text&quot; &gt;
-                    &lt;string&gt;Temporal&lt;/string&gt;
-                   &lt;/property&gt;
-                  &lt;/item&gt;
-                  &lt;item&gt;
-                   &lt;property name=&quot;text&quot; &gt;
-                    &lt;string&gt;Auto&lt;/string&gt;
-                   &lt;/property&gt;
-                  &lt;/item&gt;
-                 &lt;/widget&gt;
+                 &lt;property name=&quot;text&quot; &gt;
+                  &lt;string&gt;None&lt;/string&gt;
+                 &lt;/property&gt;
                 &lt;/item&gt;
                 &lt;item&gt;
-                 &lt;spacer&gt;
-                  &lt;property name=&quot;orientation&quot; &gt;
-                   &lt;enum&gt;Qt::Horizontal&lt;/enum&gt;
-                  &lt;/property&gt;
-                  &lt;property name=&quot;sizeHint&quot; &gt;
-                   &lt;size&gt;
-                    &lt;width&gt;40&lt;/width&gt;
-                    &lt;height&gt;20&lt;/height&gt;
-                   &lt;/size&gt;
-                  &lt;/property&gt;
-                 &lt;/spacer&gt;
+                 &lt;property name=&quot;text&quot; &gt;
+                  &lt;string&gt;Spatial&lt;/string&gt;
+                 &lt;/property&gt;
                 &lt;/item&gt;
-               &lt;/layout&gt;
-              &lt;/item&gt;
-              &lt;item row=&quot;1&quot; column=&quot;1&quot; &gt;
-               &lt;layout class=&quot;QHBoxLayout&quot; &gt;
-                &lt;property name=&quot;margin&quot; &gt;
-                 &lt;number&gt;0&lt;/number&gt;
-                &lt;/property&gt;
-                &lt;property name=&quot;spacing&quot; &gt;
-                 &lt;number&gt;6&lt;/number&gt;
-                &lt;/property&gt;
                 &lt;item&gt;
-                 &lt;widget class=&quot;QComboBox&quot; name=&quot;predictSizeComboBox&quot; &gt;
-                  &lt;item&gt;
-                   &lt;property name=&quot;text&quot; &gt;
-                    &lt;string&gt;Smallest Possible&lt;/string&gt;
-                   &lt;/property&gt;
-                  &lt;/item&gt;
-                  &lt;item&gt;
-                   &lt;property name=&quot;text&quot; &gt;
-                    &lt;string&gt;4x4&lt;/string&gt;
-                   &lt;/property&gt;
-                  &lt;/item&gt;
-                  &lt;item&gt;
-                   &lt;property name=&quot;text&quot; &gt;
-                    &lt;string&gt;8x8&lt;/string&gt;
-                   &lt;/property&gt;
-                  &lt;/item&gt;
-                 &lt;/widget&gt;
+                 &lt;property name=&quot;text&quot; &gt;
+                  &lt;string&gt;Temporal&lt;/string&gt;
+                 &lt;/property&gt;
                 &lt;/item&gt;
                 &lt;item&gt;
-                 &lt;spacer&gt;
-                  &lt;property name=&quot;orientation&quot; &gt;
-                   &lt;enum&gt;Qt::Horizontal&lt;/enum&gt;
-                  &lt;/property&gt;
-                  &lt;property name=&quot;sizeHint&quot; &gt;
-                   &lt;size&gt;
-                    &lt;width&gt;40&lt;/width&gt;
-                    &lt;height&gt;20&lt;/height&gt;
-                   &lt;/size&gt;
-                  &lt;/property&gt;
-                 &lt;/spacer&gt;
+                 &lt;property name=&quot;text&quot; &gt;
+                  &lt;string&gt;Auto&lt;/string&gt;
+                 &lt;/property&gt;
                 &lt;/item&gt;
-               &lt;/layout&gt;
+               &lt;/widget&gt;
               &lt;/item&gt;
+              &lt;item&gt;
+               &lt;spacer&gt;
+                &lt;property name=&quot;orientation&quot; &gt;
+                 &lt;enum&gt;Qt::Horizontal&lt;/enum&gt;
+                &lt;/property&gt;
+                &lt;property name=&quot;sizeHint&quot; &gt;
+                 &lt;size&gt;
+                  &lt;width&gt;40&lt;/width&gt;
+                  &lt;height&gt;20&lt;/height&gt;
+                 &lt;/size&gt;
+                &lt;/property&gt;
+               &lt;/spacer&gt;
+              &lt;/item&gt;
              &lt;/layout&gt;
             &lt;/item&gt;
-            &lt;item&gt;
-             &lt;widget class=&quot;QCheckBox&quot; name=&quot;weightedPredictCheckBox&quot; &gt;
-              &lt;property name=&quot;text&quot; &gt;
-               &lt;string&gt;Weighted Prediction for B-frames&lt;/string&gt;
-              &lt;/property&gt;
-             &lt;/widget&gt;
-            &lt;/item&gt;
            &lt;/layout&gt;
           &lt;/item&gt;
+          &lt;item&gt;
+           &lt;widget class=&quot;QCheckBox&quot; name=&quot;weightedPredictCheckBox&quot; &gt;
+            &lt;property name=&quot;text&quot; &gt;
+             &lt;string&gt;Weighted Prediction for B-frames&lt;/string&gt;
+            &lt;/property&gt;
+           &lt;/widget&gt;
+          &lt;/item&gt;
          &lt;/layout&gt;
         &lt;/widget&gt;
        &lt;/item&gt;
@@ -2116,13 +2039,6 @@
            &lt;/widget&gt;
           &lt;/item&gt;
           &lt;item&gt;
-           &lt;widget class=&quot;QCheckBox&quot; name=&quot;bFrameMotionEstCheckBox&quot; &gt;
-            &lt;property name=&quot;text&quot; &gt;
-             &lt;string&gt;Motion Estimation Before and After B-frames&lt;/string&gt;
-            &lt;/property&gt;
-           &lt;/widget&gt;
-          &lt;/item&gt;
-          &lt;item&gt;
            &lt;layout class=&quot;QHBoxLayout&quot; &gt;
             &lt;property name=&quot;margin&quot; &gt;
              &lt;number&gt;0&lt;/number&gt;
@@ -4203,14 +4119,12 @@
   &lt;tabstop&gt;meMethodComboBox&lt;/tabstop&gt;
   &lt;tabstop&gt;meSlider&lt;/tabstop&gt;
   &lt;tabstop&gt;meSpinBox&lt;/tabstop&gt;
-  &lt;tabstop&gt;rdoCheckBox&lt;/tabstop&gt;
   &lt;tabstop&gt;mvRangeSpinBox&lt;/tabstop&gt;
   &lt;tabstop&gt;mvLengthCheckBox&lt;/tabstop&gt;
   &lt;tabstop&gt;mvLengthSpinBox&lt;/tabstop&gt;
   &lt;tabstop&gt;minThreadBufferCheckBox&lt;/tabstop&gt;
   &lt;tabstop&gt;minThreadBufferSpinBox&lt;/tabstop&gt;
   &lt;tabstop&gt;predictModeComboBox&lt;/tabstop&gt;
-  &lt;tabstop&gt;predictSizeComboBox&lt;/tabstop&gt;
   &lt;tabstop&gt;weightedPredictCheckBox&lt;/tabstop&gt;
   &lt;tabstop&gt;dct8x8CheckBox&lt;/tabstop&gt;
   &lt;tabstop&gt;p8x8CheckBox&lt;/tabstop&gt;
@@ -4234,7 +4148,6 @@
   &lt;tabstop&gt;scenecutDetectionCheckBox&lt;/tabstop&gt;
   &lt;tabstop&gt;mixedRefsCheckBox&lt;/tabstop&gt;
   &lt;tabstop&gt;chromaMotionEstCheckBox&lt;/tabstop&gt;
-  &lt;tabstop&gt;bFrameMotionEstCheckBox&lt;/tabstop&gt;
   &lt;tabstop&gt;trellisCheckBox&lt;/tabstop&gt;
   &lt;tabstop&gt;trellisComboBox&lt;/tabstop&gt;
   &lt;tabstop&gt;fastPSkipCheckBox&lt;/tabstop&gt;

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp	2009-11-26 20:33:11 UTC (rev 5565)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp	2009-11-26 21:24:49 UTC (rev 5566)
@@ -276,18 +276,6 @@
 		_param.i_scenecut_threshold = scenecutThreshold;
 }
 
-#if X264_BUILD &lt; 67
-bool x264Options::getPreScenecutDetection(void)
-{
-	return _param.b_pre_scenecut;
-}
-
-void x264Options::setPreScenecutDetection(bool preScenecutDetection)
-{
-	_param.b_pre_scenecut = preScenecutDetection;
-}
-#endif
-
 unsigned int x264Options::getBFrames(void)
 {
 	return _param.i_bframe;
@@ -301,21 +289,13 @@
 
 unsigned int x264Options::getAdaptiveBFrameDecision(void)
 {
-#if X264_BUILD &gt;= 63
 	return _param.i_bframe_adaptive;
-#else
-	return _param.b_bframe_adaptive;
-#endif
 }
 
 void x264Options::setAdaptiveBFrameDecision(unsigned int adaptiveBframeDecision)
 {
 	if (adaptiveBframeDecision &lt;= 2)
-#if X264_BUILD &gt;= 63
 		_param.i_bframe_adaptive = adaptiveBframeDecision;
-#else
-		_param.b_bframe_adaptive = adaptiveBframeDecision;
-#endif
 }
 
 int x264Options::getBFrameBias(void)
@@ -566,19 +546,6 @@
 		_param.analyse.i_direct_mv_pred = directPredictionMode;
 }
 
-#if X264_BUILD &lt; 66
-int x264Options::getDirectPredictionSize(void)
-{
-	return _param.analyse.i_direct_8x8_inference;
-}
-
-void x264Options::setDirectPredictionSize(int directPredictionSize)
-{
-	if (directPredictionSize &gt;= -1 &amp;&amp; directPredictionSize &lt;= 1)
-		_param.analyse.i_direct_8x8_inference = directPredictionSize;
-}
-#endif
-
 int x264Options::getChromaLumaQuantiserDifference(void)
 {
 	return _param.analyse.i_chroma_qp_offset;
@@ -644,18 +611,6 @@
 		_param.analyse.i_subpel_refine = subpixelRefinement;
 }
 
-#if X264_BUILD &lt; 65
-bool x264Options::getBidirectionalMotionEstimation(void)
-{
-	return _param.analyse.b_bidir_me;
-}
-
-void x264Options::setBidirectionalMotionEstimation(bool bidirectionalMotionEstimation)
-{
-	_param.analyse.b_bidir_me = bidirectionalMotionEstimation;
-}
-#endif
-
 bool x264Options::getChromaMotionEstimation(void)
 {
 	return _param.analyse.b_chroma_me;
@@ -666,18 +621,6 @@
 	_param.analyse.b_chroma_me = chromaMotionEstimation;
 }
 
-#if X264_BUILD &lt; 65
-bool x264Options::getBFrameRdo(void)
-{
-	return _param.analyse.b_bframe_rdo;
-}
-
-void x264Options::setBFrameRdo(bool bFrameRdo)
-{
-	_param.analyse.b_bframe_rdo = bFrameRdo;
-}
-#endif
-
 bool x264Options::getMixedReferences(void)
 {
 	return _param.analyse.b_mixed_references;
@@ -719,7 +662,6 @@
 	_param.analyse.b_dct_decimate = dctDecimate;
 }
 
-#if X264_BUILD &gt;= 64
 float x264Options::getPsychoRdo(void)
 {
 	return _param.analyse.f_psy_rd;
@@ -730,7 +672,6 @@
 	if (psychoRdo &gt;= 0 &amp;&amp; psychoRdo &lt;= 10)
 		_param.analyse.f_psy_rd = psychoRdo;
 }
-#endif
 
 unsigned int x264Options::getNoiseReduction(void)
 {
@@ -864,7 +805,6 @@
 		_param.rc.f_pb_factor = pbFrameQuantiser;
 }
 
-#if X264_BUILD &gt;= 62
 unsigned int x264Options::getAdaptiveQuantiserMode(void)
 {
 	return _param.rc.i_aq_mode;
@@ -885,7 +825,6 @@
 {
 	_param.rc.f_aq_strength = adaptiveQuantiserStrength;
 }
-#endif
 
 #if X264_BUILD &gt;= 69
 bool x264Options::getMbTree(void)
@@ -1142,9 +1081,6 @@
 	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)&quot;gopMaximumSize&quot;, number2String(xmlBuffer, bufferSize, getGopMaximumSize()));
 	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)&quot;gopMinimumSize&quot;, number2String(xmlBuffer, bufferSize, getGopMinimumSize()));
 	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)&quot;scenecutThreshold&quot;, number2String(xmlBuffer, bufferSize, getScenecutThreshold()));
-#if X264_BUILD &lt; 67
-	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)&quot;preScenecutDetection&quot;, boolean2String(xmlBuffer, bufferSize, getPreScenecutDetection()));
-#endif
 	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)&quot;bFrames&quot;, number2String(xmlBuffer, bufferSize, getBFrames()));
 	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)&quot;adaptiveBframeDecision&quot;, number2String(xmlBuffer, bufferSize, getAdaptiveBFrameDecision()));
 	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)&quot;bFrameBias&quot;, number2String(xmlBuffer, bufferSize, getBFrameBias()));
@@ -1232,25 +1168,6 @@
 			break;
 	}
 
-	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)&quot;directPredictionMode&quot;, xmlBuffer);
-
-#if X264_BUILD &lt; 66
-	switch (getDirectPredictionSize())
-	{
-		case 0:
-			strcpy((char*)xmlBuffer, &quot;4x4&quot;);
-			break;
-		case 1:
-			strcpy((char*)xmlBuffer, &quot;8x8&quot;);
-			break;
-		case -1:
-			strcpy((char*)xmlBuffer, &quot;smallest&quot;);
-			break;
-	}
-
-	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)&quot;directPredictionSize&quot;, xmlBuffer);
-#endif
-
 	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)&quot;chromaLumaQuantiserDifference&quot;, number2String(xmlBuffer, bufferSize, getChromaLumaQuantiserDifference()));
 
 	switch (getMotionEstimationMethod())
@@ -1264,11 +1181,9 @@
 		case X264_ME_ESA:
 			strcpy((char*)xmlBuffer, &quot;exhaustive&quot;);
 			break;
-#if X264_BUILD &gt;= 57
 		case X264_ME_TESA:
 			strcpy((char*)xmlBuffer, &quot;hadamard&quot;);
 			break;
-#endif
 		case X264_ME_HEX:
 		default:
 			strcpy((char*)xmlBuffer, &quot;hexagonal&quot;);
@@ -1280,13 +1195,7 @@
 	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)&quot;motionVectorLength&quot;, number2String(xmlBuffer, bufferSize, getMotionVectorLength()));
 	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)&quot;motionVectorThreadBuffer&quot;, number2String(xmlBuffer, bufferSize, getMotionVectorThreadBuffer()));
 	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)&quot;subpixelRefinement&quot;, number2String(xmlBuffer, bufferSize, getSubpixelRefinement()));
-#if X264_BUILD &lt; 65
-	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)&quot;bidirectionalMotionEstimation&quot;, boolean2String(xmlBuffer, bufferSize, getBidirectionalMotionEstimation()));
-#endif
 	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)&quot;chromaMotionEstimation&quot;, boolean2String(xmlBuffer, bufferSize, getChromaMotionEstimation()));
-#if X264_BUILD &lt; 65
-	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)&quot;bFrameRdo&quot;, boolean2String(xmlBuffer, bufferSize, getBFrameRdo()));
-#endif
 	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)&quot;mixedReferences&quot;, boolean2String(xmlBuffer, bufferSize, getMixedReferences()));
 
 	switch (getTrellis())
@@ -1321,7 +1230,6 @@
 	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)&quot;ipFrameQuantiser&quot;, number2String(xmlBuffer, bufferSize, getIpFrameQuantiser()));
 	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)&quot;pbFrameQuantiser&quot;, number2String(xmlBuffer, bufferSize, getPbFrameQuantiser()));
 
-#if X264_BUILD &gt;= 62
 	switch (getAdaptiveQuantiserMode())
 	{
 		case X264_AQ_NONE:
@@ -1334,7 +1242,6 @@
 
 	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)&quot;adaptiveQuantiserMode&quot;, xmlBuffer);
 	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)&quot;adaptiveQuantiserStrength&quot;, number2String(xmlBuffer, bufferSize, getAdaptiveQuantiserStrength()));
-#endif
 
 #if X264_BUILD &gt;= 69
 	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)&quot;mbTree&quot;, boolean2String(xmlBuffer, bufferSize, getMbTree()));
@@ -1404,10 +1311,6 @@
 				setGopMinimumSize(atoi(content));
 			else if (strcmp((char*)xmlChild-&gt;name, &quot;scenecutThreshold&quot;) == 0)
 				setScenecutThreshold(atoi(content));
-#if X264_BUILD &lt; 67
-			else if (strcmp((char*)xmlChild-&gt;name, &quot;preScenecutDetection&quot;) == 0)
-				setPreScenecutDetection(string2Boolean(content));
-#endif
 			else if (strcmp((char*)xmlChild-&gt;name, &quot;bFrames&quot;) == 0)
 				setBFrames(atoi(content));
 			else if (strcmp((char*)xmlChild-&gt;name, &quot;adaptiveBframeDecision&quot;) == 0)
@@ -1675,21 +1578,6 @@
 
 				setDirectPredictionMode(directPredictionMode);
 			}
-#if X264_BUILD &lt; 66
-			else if (strcmp((char*)xmlChild-&gt;name, &quot;directPredictionSize&quot;) == 0)
-			{
-				int directPredictionSize = -1;
-
-				if (strcmp(content, &quot;4x4&quot;) == 0)
-					directPredictionSize = 0;
-				else if (strcmp(content, &quot;8x8&quot;) == 0)
-					directPredictionSize = 1;
-				else if (strcmp(content, &quot;smallest&quot;) == 0)
-					directPredictionSize = -1;
-
-				setDirectPredictionSize(directPredictionSize);
-			}
-#endif
 			else if (strcmp((char*)xmlChild-&gt;name, &quot;chromaLumaQuantiserDifference&quot;) == 0)
 				setChromaLumaQuantiserDifference(atoi(content));
 			else if (strcmp((char*)xmlChild-&gt;name, &quot;motionEstimationMethod&quot;) == 0)
@@ -1704,10 +1592,8 @@
 					motionEstimationMethod = X264_ME_UMH;
 				else if (strcmp(content, &quot;exhaustive&quot;) == 0)
 					motionEstimationMethod = X264_ME_ESA;
-#if X264_BUILD &gt;= 57
 				else if (strcmp(content, &quot;hadamard&quot;) == 0)
 					motionEstimationMethod = X264_ME_TESA;
-#endif
 
 				setMotionEstimationMethod(motionEstimationMethod);
 			}
@@ -1719,16 +1605,8 @@
 				setMotionVectorThreadBuffer(atoi(content));
 			else if (strcmp((char*)xmlChild-&gt;name, &quot;subpixelRefinement&quot;) == 0)
 				setSubpixelRefinement(atoi(content));
-#if X264_BUILD &lt; 65
-			else if (strcmp((char*)xmlChild-&gt;name, &quot;bidirectionalMotionEstimation&quot;) == 0)
-				setBidirectionalMotionEstimation(string2Boolean(content));
-#endif
 			else if (strcmp((char*)xmlChild-&gt;name, &quot;chromaMotionEstimation&quot;) == 0)
 				setChromaMotionEstimation(string2Boolean(content));
-#if X264_BUILD &lt; 65
-			else if (strcmp((char*)xmlChild-&gt;name, &quot;bFrameRdo&quot;) == 0)
-				setBFrameRdo(string2Boolean(content));
-#endif
 			else if (strcmp((char*)xmlChild-&gt;name, &quot;mixedReferences&quot;) == 0)
 				setMixedReferences(string2Boolean(content));
 			else if (strcmp((char*)xmlChild-&gt;name, &quot;trellis&quot;) == 0)
@@ -1788,7 +1666,6 @@
 				setIpFrameQuantiser(string2Float(content));
 			else if (strcmp((char*)xmlChild-&gt;name, &quot;pbFrameQuantiser&quot;) == 0)
 				setPbFrameQuantiser(string2Float(content));
-#if X264_BUILD &gt;= 62
 			else if (strcmp((char*)xmlChild-&gt;name, &quot;adaptiveQuantiserMode&quot;) == 0)
 			{
 				int adaptiveQuantiserMode = X264_AQ_VARIANCE;
@@ -1802,7 +1679,6 @@
 			}
 			else if (strcmp((char*)xmlChild-&gt;name, &quot;adaptiveQuantiserStrength&quot;) == 0)
 				setAdaptiveQuantiserStrength(string2Float(content));
-#endif
 #if X264_BUILD &gt;= 69
 			else if (strcmp((char*)xmlChild-&gt;name, &quot;mbTree&quot;) == 0)
 				setMbTree(string2Boolean(content));

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.h	2009-11-26 20:33:11 UTC (rev 5565)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.h	2009-11-26 21:24:49 UTC (rev 5566)
@@ -109,11 +109,6 @@
 	unsigned int getScenecutThreshold(void);
 	void setScenecutThreshold(unsigned int scenecutThreshold);
 
-#if X264_BUILD &lt; 67
-	bool getPreScenecutDetection(void);
-	void setPreScenecutDetection(bool preScenecutDetection);
-#endif
-
 	unsigned int getBFrames(void);
 	void setBFrames(unsigned int bFrames);
 
@@ -186,11 +181,6 @@
 	unsigned int getDirectPredictionMode(void);
 	void setDirectPredictionMode(unsigned int directPredictionMode);
 
-#if X264_BUILD &lt; 66
-	int getDirectPredictionSize(void);
-	void setDirectPredictionSize(int directPredictionSize);
-#endif
-
 	int getChromaLumaQuantiserDifference(void);
 	void setChromaLumaQuantiserDifference(int chromaLumaQuantiserDifference);
 
@@ -209,19 +199,9 @@
 	unsigned int getSubpixelRefinement(void);
 	void setSubpixelRefinement(unsigned int subpixelRefinement);
 
-#if X264_BUILD &lt; 65
-	bool getBidirectionalMotionEstimation(void);
-	void setBidirectionalMotionEstimation(bool bidirectionalMotionEstimation);
-#endif
-
 	bool getChromaMotionEstimation(void);
 	void setChromaMotionEstimation(bool chromaMotionEstimation);
 
-#if X264_BUILD &lt; 65
-	bool getBFrameRdo(void);
-	void setBFrameRdo(bool bFrameRdo);
-#endif
-
 	bool getMixedReferences(void);
 	void setMixedReferences(bool mixedReferences);
 
@@ -234,10 +214,8 @@
 	bool getDctDecimate(void);
 	void setDctDecimate(bool dctDecimate);
 
-#if X264_BUILD &gt;= 64
 	float getPsychoRdo(void);
 	void setPsychoRdo(float psychoRdo);
-#endif
 
 	unsigned int getNoiseReduction(void);
 	void setNoiseReduction(unsigned int noiseReduction);
@@ -281,13 +259,11 @@
 	float getPbFrameQuantiser(void);
 	void setPbFrameQuantiser(float pbFrameQuantiser);
 
-#if X264_BUILD &gt;= 62
 	unsigned int getAdaptiveQuantiserMode(void);
 	void setAdaptiveQuantiserMode(unsigned int adaptiveQuantiserMode);
 
 	float getAdaptiveQuantiserStrength(void);
 	void setAdaptiveQuantiserStrength(float adaptiveQuantiserStrength);
-#endif
 
 #if X264_BUILD &gt;= 69
 	bool getMbTree(void);

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Param.xsd
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Param.xsd	2009-11-26 20:33:11 UTC (rev 5565)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Param.xsd	2009-11-26 21:24:49 UTC (rev 5566)
@@ -177,6 +177,7 @@
                   &lt;/xs:restriction&gt;
                 &lt;/xs:simpleType&gt;
               &lt;/xs:element&gt;
+              &lt;!-- preScenecutDetection deprecated core 67 --&gt;
               &lt;xs:element name=&quot;preScenecutDetection&quot; type=&quot;xs:boolean&quot; minOccurs=&quot;0&quot;/&gt;
               &lt;xs:element name=&quot;bFrames&quot; minOccurs=&quot;0&quot;&gt;
                 &lt;xs:simpleType&gt;
@@ -293,6 +294,7 @@
                         &lt;/xs:restriction&gt;
                       &lt;/xs:simpleType&gt;
                     &lt;/xs:element&gt;
+                    &lt;!-- directPredictionSize deprecated core 66 --&gt;
                     &lt;xs:element name=&quot;directPredictionSize&quot; minOccurs=&quot;0&quot;&gt;
                       &lt;xs:simpleType&gt;
                         &lt;xs:restriction base=&quot;xs:string&quot;&gt;
@@ -346,8 +348,10 @@
                         &lt;/xs:restriction&gt;
                       &lt;/xs:simpleType&gt;
                     &lt;/xs:element&gt;
+                    &lt;!-- bidirectionalMotionEstimation deprecated core 65 --&gt;
                     &lt;xs:element name=&quot;bidirectionalMotionEstimation&quot; type=&quot;xs:boolean&quot; minOccurs=&quot;0&quot;/&gt;
                     &lt;xs:element name=&quot;chromaMotionEstimation&quot; type=&quot;xs:boolean&quot; minOccurs=&quot;0&quot;/&gt;
+                    &lt;!-- bFrameRdo deprecated core 65 --&gt;
                     &lt;xs:element name=&quot;bFrameRdo&quot; type=&quot;xs:boolean&quot; minOccurs=&quot;0&quot;/&gt;
                     &lt;xs:element name=&quot;mixedReferences&quot; type=&quot;xs:boolean&quot; minOccurs=&quot;0&quot;/&gt;
                     &lt;xs:element name=&quot;trellis&quot; minOccurs=&quot;0&quot;&gt;


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002774.html">[Avidemux-svn-commit] r5565 -	branches/avidemux_2.5_branch_gruntster/plugins/ADM_audioEncoders/lame
</A></li>
	<LI>Next message: <A HREF="002776.html">[Avidemux-svn-commit] r5567 - in	branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264:	. qt4
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2775">[ date ]</a>
              <a href="thread.html#2775">[ thread ]</a>
              <a href="subject.html#2775">[ subject ]</a>
              <a href="author.html#2775">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">More information about the Avidemux-svn-commit
mailing list</a><br>
</body></html>
