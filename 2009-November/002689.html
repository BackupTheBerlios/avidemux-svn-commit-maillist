<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Avidemux-svn-commit] r5477 - in branches/avidemux_2.6_branch_mean:	avidemux/common/ADM_editor avidemux_plugins/ADM_muxers/muxerAvi	avidemux_plugins/ADM_muxers/muxerFlv	avidemux_plugins/ADM_muxers/muxerMkv	avidemux_plugins/ADM_muxers/muxerffPS	avidemux_plugins/ADM_muxers/muxerffTS
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/avidemux-svn-commit/2009-November/index.html" >
   <LINK REL="made" HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r5477%20-%20in%20branches/avidemux_2.6_branch_mean%3A%0A%09avidemux/common/ADM_editor%20avidemux_plugins/ADM_muxers/muxerAvi%0A%09avidemux_plugins/ADM_muxers/muxerFlv%0A%09avidemux_plugins/ADM_muxers/muxerMkv%0A%09avidemux_plugins/ADM_muxers/muxerffPS%0A%09avidemux_plugins/ADM_muxers/muxerffTS&In-Reply-To=%3C200911131335.nADDZKlX012763%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002687.html">
   <LINK REL="Next"  HREF="002688.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Avidemux-svn-commit] r5477 - in branches/avidemux_2.6_branch_mean:	avidemux/common/ADM_editor avidemux_plugins/ADM_muxers/muxerAvi	avidemux_plugins/ADM_muxers/muxerFlv	avidemux_plugins/ADM_muxers/muxerMkv	avidemux_plugins/ADM_muxers/muxerffPS	avidemux_plugins/ADM_muxers/muxerffTS</H1>
    <B>mean at BerliOS</B> 
    <A HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r5477%20-%20in%20branches/avidemux_2.6_branch_mean%3A%0A%09avidemux/common/ADM_editor%20avidemux_plugins/ADM_muxers/muxerAvi%0A%09avidemux_plugins/ADM_muxers/muxerFlv%0A%09avidemux_plugins/ADM_muxers/muxerMkv%0A%09avidemux_plugins/ADM_muxers/muxerffPS%0A%09avidemux_plugins/ADM_muxers/muxerffTS&In-Reply-To=%3C200911131335.nADDZKlX012763%40sheep.berlios.de%3E"
       TITLE="[Avidemux-svn-commit] r5477 - in branches/avidemux_2.6_branch_mean:	avidemux/common/ADM_editor avidemux_plugins/ADM_muxers/muxerAvi	avidemux_plugins/ADM_muxers/muxerFlv	avidemux_plugins/ADM_muxers/muxerMkv	avidemux_plugins/ADM_muxers/muxerffPS	avidemux_plugins/ADM_muxers/muxerffTS">mean at mail.berlios.de
       </A><BR>
    <I>Fri Nov 13 14:35:20 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="002687.html">[Avidemux-svn-commit] r5476 -	branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui
</A></li>
        <LI>Next message: <A HREF="002688.html">[Avidemux-svn-commit] r5478 - in	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers:	muxerAvi muxerffTS
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2689">[ date ]</a>
              <a href="thread.html#2689">[ thread ]</a>
              <a href="subject.html#2689">[ subject ]</a>
              <a href="author.html#2689">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: mean
Date: 2009-11-13 14:35:19 +0100 (Fri, 13 Nov 2009)
New Revision: 5477

Added:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/avi_muxer.conf
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/avi_muxer.h
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffPS/ps_muxer.conf
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffPS/ps_muxer.h
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffPS/ps_muxer_desc.cpp
Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edLoadSave.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/muxerAvi.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/muxerAvi.h
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/muxerAviPlugin.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/op_aviwrite.hxx
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerFlv/muxerFlv.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerFlv/muxerFlv.h
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerFlv/muxerFlvConfig.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerMkv/muxerMkvPlugin.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffPS/muxerffPS.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffPS/muxerffPS.h
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffPS/muxerffPSPlugin.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffTS/muxerffTS.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffTS/muxerffTS.h
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffTS/muxerffTSPlugin.cpp
Log:
[Muxer] Update all muxer to use the new configuration scheme + update javascript

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edLoadSave.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edLoadSave.cpp	2009-11-13 13:35:18 UTC (rev 5476)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edLoadSave.cpp	2009-11-13 13:35:19 UTC (rev 5477)
@@ -187,11 +187,9 @@
 #endif
    CONFcouple *couples=NULL;
    getAudioExtraConf(&amp;bitrate,&amp;couples);
-   if(couples==NULL)
-    qfprintf(fd,&quot;app.audio.codec(\&quot;%s\&quot;,%d);\n&quot;,audioCodecGetName(),bitrate); 
-   else
+    qfprintf(fd,&quot;app.audio.codec(\&quot;%s\&quot;,%d&quot;,audioCodecGetName(),bitrate); 
+   if(couples)
     {
-        qfprintf(fd,&quot;app.audio.codec(\&quot;%s\&quot;,%d&quot;, audioCodecGetName(),bitrate); 
         uint32_t n=couples-&gt;getSize();
         
         for(int i=0;i&lt;n;i++)
@@ -200,10 +198,10 @@
             couples-&gt;getInternalName(i,&amp;name,&amp;value);
             qfprintf(fd,&quot;,\&quot;%s=%s\&quot;&quot;,name,value);
         }
-        qfprintf(fd,&quot;);\n&quot;);
         delete couples;
         couples=NULL;
     }
+    qfprintf(fd,&quot;);\n&quot;);
    
 #if 0   
    //qfprintf(fd,&quot;app.audio.process=%s;\n&quot;,truefalse[audioProcessMode()]);
@@ -242,15 +240,15 @@
         
 #endif        
   // -------- Muxer -----------------------
+        qfprintf(fd,&quot;\n//** Muxer **\n&quot;);
         CONFcouple *containerConf=NULL;
         uint32_t index=UI_GetCurrentFormat();
         const char *containerName=ADM_mx_getName(index);
         ADM_mx_getExtraConf( index,&amp;containerConf);
-        if(containerConf==NULL)
-            qfprintf(fd,&quot;app.setContainer(\&quot;%s\&quot;);\n&quot;,containerName); 
-        else
+        
+        qfprintf(fd,&quot;app.setContainer(\&quot;%s\&quot;&quot;,containerName); 
+        if(containerConf)
         {
-            qfprintf(fd,&quot;app.setContainer(\&quot;%s\&quot;&quot;, containerName); 
             uint32_t n=containerConf-&gt;getSize();
             
             for(int i=0;i&lt;n;i++)
@@ -259,10 +257,11 @@
                 containerConf-&gt;getInternalName(i,&amp;name,&amp;value);
                 qfprintf(fd,&quot;,\&quot;%s=%s\&quot;&quot;,name,value);
             }
-            qfprintf(fd,&quot;);\n&quot;);
+         
             delete couples;
             couples=NULL;
         }
+        qfprintf(fd,&quot;);\n&quot;);
   // -------- /Muxer -----------------------
   if(outputname)
   {

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/avi_muxer.conf
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/avi_muxer.conf	2009-11-13 13:35:18 UTC (rev 5476)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/avi_muxer.conf	2009-11-13 13:35:19 UTC (rev 5477)
@@ -0,0 +1 @@
+uint32_t:odmlType

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/avi_muxer.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/avi_muxer.h	2009-11-13 13:35:18 UTC (rev 5476)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/avi_muxer.h	2009-11-13 13:35:19 UTC (rev 5477)
@@ -0,0 +1,8 @@
+// Automatically generated, do not edit!
+#ifndef ADM_avi_muxer_CONF_H
+#define ADM_avi_muxer_CONF_H
+typedef struct {
+   uint32_t odmlType;
+}avi_muxer;
+#endif //avi_muxer
+//EOF

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/muxerAvi.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/muxerAvi.cpp	2009-11-13 13:35:18 UTC (rev 5476)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/muxerAvi.cpp	2009-11-13 13:35:19 UTC (rev 5477)
@@ -36,7 +36,7 @@
 #define aprintf printf
 #endif
 
-AVIMUXERCONFIG muxerConfig=
+avi_muxer muxerConfig=
 {
     HIDDEN
 };

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/muxerAvi.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/muxerAvi.h	2009-11-13 13:35:18 UTC (rev 5476)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/muxerAvi.h	2009-11-13 13:35:19 UTC (rev 5477)
@@ -20,13 +20,10 @@
 #include &quot;ADM_muxer.h&quot;
 #include &quot;op_aviwrite.hxx&quot;
 #include &quot;ADM_audioClock.h&quot;
+#include &quot;avi_muxer.h&quot;
 
-typedef struct
-{
-        doODML_t odmlType;
-}AVIMUXERCONFIG;
 
-extern AVIMUXERCONFIG muxerConfig;
+extern avi_muxer muxerConfig;
 
 /**
     \class muxerAvi

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/muxerAviPlugin.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/muxerAviPlugin.cpp	2009-11-13 13:35:18 UTC (rev 5476)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/muxerAviPlugin.cpp	2009-11-13 13:35:19 UTC (rev 5477)
@@ -16,7 +16,7 @@
 #include &quot;ADM_default.h&quot;
 #include &quot;ADM_muxerInternal.h&quot;
 #include &quot;muxerAvi.h&quot;
-
+#include &quot;avi_muxer_desc.cpp&quot;
 #include &quot;fourcc.h&quot;
  extern &quot;C&quot; bool AviConfigure(void);
 
@@ -26,7 +26,7 @@
                     &quot;AVI muxer plugin (c) Mean 2008&quot;,
                     &quot;AVI Muxer&quot;, // DIsplay name
                     AviConfigure,
-                    NULL,
-                    NULL
+                    avi_muxer_param, //template
+                    &amp;muxerConfig
                 );
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/op_aviwrite.hxx
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/op_aviwrite.hxx	2009-11-13 13:35:18 UTC (rev 5476)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/op_aviwrite.hxx	2009-11-13 13:35:19 UTC (rev 5477)
@@ -86,7 +86,7 @@
  class  aviWrite
  {
  protected:
-        doODML_t             doODML;
+        uint32_t             doODML;
 		FILE 		         *_out;
         ADMFile              *_file;
 		MainAVIHeader	     _mainheader;

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerFlv/muxerFlv.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerFlv/muxerFlv.cpp	2009-11-13 13:35:18 UTC (rev 5476)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerFlv/muxerFlv.cpp	2009-11-13 13:35:19 UTC (rev 5477)
@@ -28,10 +28,6 @@
 #define aprintf printf
 #endif
 
-FLVMUXERCONFIG muxerConfig=
-{
-    0
-};
 
 
 /**

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerFlv/muxerFlv.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerFlv/muxerFlv.h	2009-11-13 13:35:18 UTC (rev 5476)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerFlv/muxerFlv.h	2009-11-13 13:35:19 UTC (rev 5477)
@@ -19,14 +19,7 @@
 
 #include &quot;ADM_muxer.h&quot;
 #include &quot;ADM_coreMuxerFfmpeg.h&quot;
-typedef struct
-{
-    
-    uint32_t       dummy;
-}FLVMUXERCONFIG;
 
-extern FLVMUXERCONFIG muxerConfig;
-
 class muxerFlv : public muxerFFmpeg
 {
 protected:

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerFlv/muxerFlvConfig.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerFlv/muxerFlvConfig.cpp	2009-11-13 13:35:18 UTC (rev 5476)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerFlv/muxerFlvConfig.cpp	2009-11-13 13:35:19 UTC (rev 5477)
@@ -20,22 +20,7 @@
 #include &quot;fourcc.h&quot;
 bool flvConfigure(void)
 {
-/*
-        uint32_t fmt=(uint32_t)muxerConfig.muxerType;
-        uint32_t alt=(uint32_t)muxerConfig.useAlternateMP3Tag;
-        diaMenuEntry format[]={{MP4_MUXER_MP4,&quot;MP4&quot;},{MP4_MUXER_PSP,&quot;PSP&quot;}};
-        diaElemMenu  menuFormat(&amp;fmt,&quot;Muxing Format&quot;,2,format,&quot;&quot;);
-        diaElemToggle alternate(&amp;alt,&quot;Use alternate MP3 tag&quot;);
 
-        diaElem *tabs[]={&amp;menuFormat,&amp;alternate};
-        if( diaFactoryRun((&quot;MP4 Muxer&quot;),2,tabs))
-        {
-            muxerConfig.muxerType=(MP4_MUXER_TYPE)fmt;
-            muxerConfig.useAlternateMP3Tag=alt;
-            return true;
-        }
-        return false;
-*/
     return true;
 }
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerMkv/muxerMkvPlugin.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerMkv/muxerMkvPlugin.cpp	2009-11-13 13:35:18 UTC (rev 5476)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerMkv/muxerMkvPlugin.cpp	2009-11-13 13:35:19 UTC (rev 5477)
@@ -27,6 +27,6 @@
                     &quot;Mkv Muxer&quot;, // DIsplay name
                     mkvConfigure,
                     NULL,
-                    0
+                    NULL
                 );
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffPS/muxerffPS.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffPS/muxerffPS.cpp	2009-11-13 13:35:18 UTC (rev 5476)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffPS/muxerffPS.cpp	2009-11-13 13:35:19 UTC (rev 5477)
@@ -43,7 +43,7 @@
     { &quot;dvd&quot;, 224,11000,9800},
 };
 
-psMuxerConfig_s psMuxerConfig=
+ps_muxer psMuxerConfig=
 {
     MUXER_DVD,false
 };
@@ -172,7 +172,7 @@
 
 */
 #define FAIL(x) {*er=x;return false;}
-bool muxerffPS::verifyCompatibility(bool nonCompliantOk, psMuxingType muxingType,
+bool muxerffPS::verifyCompatibility(bool nonCompliantOk, uint32_t muxingType,
                                     ADM_videoStream *s,uint32_t nbAudioTrack,ADM_audioStream **a, 
                                     const char **er)
 {

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffPS/muxerffPS.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffPS/muxerffPS.h	2009-11-13 13:35:18 UTC (rev 5476)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffPS/muxerffPS.h	2009-11-13 13:35:19 UTC (rev 5477)
@@ -19,7 +19,7 @@
 
 #include &quot;ADM_muxer.h&quot;
 #include &quot;ADM_coreMuxerFfmpeg.h&quot;
-
+#include &quot;ps_muxer.h&quot;
 typedef enum
 {
     MUXER_VCD=0,
@@ -27,14 +27,10 @@
     MUXER_DVD=2
 }psMuxingType;
 
-typedef struct
-{
-    psMuxingType muxingType;
-    bool         acceptNonCompliant;
-}psMuxerConfig_s;
 
-extern psMuxerConfig_s psMuxerConfig;
 
+extern ps_muxer psMuxerConfig;
+
 /**
     \fn class muxerffPS
 */
@@ -43,7 +39,7 @@
 protected:
         
         bool muxerRescaleVideoTimeDts(uint64_t *time,uint64_t computedDts);
-        bool verifyCompatibility(bool nonCompliantOk, psMuxingType muxingType,
+        bool verifyCompatibility(bool nonCompliantOk, uint32_t muxingType,
                                     ADM_videoStream *s,uint32_t nbAudioTrack,ADM_audioStream **a, 
                                     const char **er);
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffPS/muxerffPSPlugin.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffPS/muxerffPSPlugin.cpp	2009-11-13 13:35:18 UTC (rev 5476)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffPS/muxerffPSPlugin.cpp	2009-11-13 13:35:19 UTC (rev 5477)
@@ -16,7 +16,7 @@
 #include &quot;ADM_default.h&quot;
 #include &quot;ADM_muxerInternal.h&quot;
 #include &quot;muxerffPS.h&quot;
-
+#include &quot;ps_muxer_desc.cpp&quot;
 #include &quot;fourcc.h&quot;
  bool ffPSConfigure(void);
 
@@ -26,7 +26,7 @@
                     &quot;ffMpeg PS muxer plugin (c) Mean 2009&quot;,
                     &quot;ffPS Muxer&quot;, // DIsplay name
                     ffPSConfigure,
-                    NULL,
-                    NULL
+                    ps_muxer_param, //template
+                    &amp;psMuxerConfig //config
                 );
 

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffPS/ps_muxer.conf
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffPS/ps_muxer.conf	2009-11-13 13:35:18 UTC (rev 5476)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffPS/ps_muxer.conf	2009-11-13 13:35:19 UTC (rev 5477)
@@ -0,0 +1,2 @@
+uint32_t:muxingType
+bool:acceptNonCompliant

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffPS/ps_muxer.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffPS/ps_muxer.h	2009-11-13 13:35:18 UTC (rev 5476)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffPS/ps_muxer.h	2009-11-13 13:35:19 UTC (rev 5477)
@@ -0,0 +1,9 @@
+// Automatically generated, do not edit!
+#ifndef ADM_ps_muxer_CONF_H
+#define ADM_ps_muxer_CONF_H
+typedef struct {
+   uint32_t muxingType;
+   bool acceptNonCompliant;
+}ps_muxer;
+#endif //ps_muxer
+//EOF

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffPS/ps_muxer_desc.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffPS/ps_muxer_desc.cpp	2009-11-13 13:35:18 UTC (rev 5476)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffPS/ps_muxer_desc.cpp	2009-11-13 13:35:19 UTC (rev 5477)
@@ -0,0 +1,6 @@
+// Automatically generated, do not edit!
+const ADM_paramList ps_muxer_param[]={
+ {&quot;muxingType&quot;,offsetof( ps_muxer,muxingType),&quot;uint32_t&quot;,ADM_param_uint32_t},
+ {&quot;acceptNonCompliant&quot;,offsetof( ps_muxer,acceptNonCompliant),&quot;bool&quot;,ADM_param_bool},
+{NULL,0,NULL}
+};

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffTS/muxerffTS.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffTS/muxerffTS.cpp	2009-11-13 13:35:18 UTC (rev 5476)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffTS/muxerffTS.cpp	2009-11-13 13:35:19 UTC (rev 5477)
@@ -28,7 +28,7 @@
 #define aprintf printf
 #endif
 
-tsMuxerConfig_s tsMuxerConfig=
+ts_muxer tsMuxerConfig=
 {
     false
 };

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffTS/muxerffTS.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffTS/muxerffTS.h	2009-11-13 13:35:18 UTC (rev 5476)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffTS/muxerffTS.h	2009-11-13 13:35:19 UTC (rev 5477)
@@ -19,15 +19,10 @@
 
 #include &quot;ADM_muxer.h&quot;
 #include &quot;ADM_coreMuxerFfmpeg.h&quot;
+#include &quot;ts_muxer.h&quot;
 
-typedef struct
-{
- 
-    bool         acceptNonCompliant;
-}tsMuxerConfig_s;
+extern ts_muxer tsMuxerConfig;
 
-extern tsMuxerConfig_s tsMuxerConfig;
-
 /**
     \fn class muxerffTS
 */

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffTS/muxerffTSPlugin.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffTS/muxerffTSPlugin.cpp	2009-11-13 13:35:18 UTC (rev 5476)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffTS/muxerffTSPlugin.cpp	2009-11-13 13:35:19 UTC (rev 5477)
@@ -16,7 +16,7 @@
 #include &quot;ADM_default.h&quot;
 #include &quot;ADM_muxerInternal.h&quot;
 #include &quot;muxerffTS.h&quot;
-
+#include &quot;ts_muxer_desc.cpp&quot;
 #include &quot;fourcc.h&quot;
  bool ffTSConfigure(void);
 
@@ -26,7 +26,7 @@
                     &quot;ffMpeg PS muxer plugin (c) Mean 2009&quot;,
                     &quot;ffTS Muxer&quot;, // DIsplay name
                     ffTSConfigure,
-                    NULL,
-                    NULL
+                    ts_muxer_param, //template
+                    &amp;tsMuxerConfig //config
                 );
 


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002687.html">[Avidemux-svn-commit] r5476 -	branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui
</A></li>
	<LI>Next message: <A HREF="002688.html">[Avidemux-svn-commit] r5478 - in	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers:	muxerAvi muxerffTS
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2689">[ date ]</a>
              <a href="thread.html#2689">[ thread ]</a>
              <a href="subject.html#2689">[ subject ]</a>
              <a href="author.html#2689">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">More information about the Avidemux-svn-commit
mailing list</a><br>
</body></html>
