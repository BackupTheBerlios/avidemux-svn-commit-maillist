<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Avidemux-svn-commit] r2898 - in	branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces:	ADM_GTK/ADM_dialog ADM_QT4/ADM_dialog ADM_QT4/ADM_dialogFactory
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/avidemux-svn-commit/2007-March/index.html" >
   <LINK REL="made" HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r2898%20-%20in%0A%09branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces%3A%0A%09ADM_GTK/ADM_dialog%20ADM_QT4/ADM_dialog%20ADM_QT4/ADM_dialogFactory&In-Reply-To=%3C200703241737.l2OHb4CU031792%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000217.html">
   <LINK REL="Next"  HREF="000219.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Avidemux-svn-commit] r2898 - in	branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces:	ADM_GTK/ADM_dialog ADM_QT4/ADM_dialog ADM_QT4/ADM_dialogFactory</H1>
    <B>mean at BerliOS</B> 
    <A HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r2898%20-%20in%0A%09branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces%3A%0A%09ADM_GTK/ADM_dialog%20ADM_QT4/ADM_dialog%20ADM_QT4/ADM_dialogFactory&In-Reply-To=%3C200703241737.l2OHb4CU031792%40sheep.berlios.de%3E"
       TITLE="[Avidemux-svn-commit] r2898 - in	branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces:	ADM_GTK/ADM_dialog ADM_QT4/ADM_dialog ADM_QT4/ADM_dialogFactory">mean at mail.berlios.de
       </A><BR>
    <I>Sat Mar 24 18:37:04 CET 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000217.html">[Avidemux-svn-commit] r2897 - in	branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces:	ADM_NONE/ADM_dialogFactory ADM_QT4/ADM_dialog	ADM_QT4/ADM_dialogFactory ADM_QT4/ADM_gui ADM_commonUI
</A></li>
        <LI>Next message: <A HREF="000219.html">[Avidemux-svn-commit] r2899 - in	branches/avidemux_2.4_branch/avidemux: . ADM_editor	ADM_libraries/ADM_utilities ADM_userInterfaces/ADM_commonUI
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#218">[ date ]</a>
              <a href="thread.html#218">[ thread ]</a>
              <a href="subject.html#218">[ subject ]</a>
              <a href="author.html#218">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: mean
Date: 2007-03-24 18:37:03 +0100 (Sat, 24 Mar 2007)
New Revision: 2898

Removed:
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_prefs.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_pref.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/pref.ui
Modified:
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/Makefile.am
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Makefile.am
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_dialogFactory.cpp
Log:
add missing widget for dialogFactor/QT

Deleted: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_prefs.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_prefs.cpp	2007-03-23 18:33:23 UTC (rev 2897)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_prefs.cpp	2007-03-24 17:37:03 UTC (rev 2898)
@@ -1,798 +0,0 @@
-//
-/*
- * DO NOT EDIT THIS FILE - it is generated by Glade.
- */
-
-
-#include &lt;sys/types.h&gt;
-#include &lt;sys/stat.h&gt;
-#include &lt;unistd.h&gt;
-#include &lt;string.h&gt;
-#include &lt;stdio.h&gt;
-
-#include &lt;gdk/gdkkeysyms.h&gt;
-#include &lt;gtk/gtk.h&gt;
-
-
-# include &lt;config.h&gt;
-
-#include &quot;default.h&quot;
-#include &quot;ADM_toolkit_gtk/ADM_gladeSupport.h&quot;
-#include &quot;ADM_toolkit_gtk/toolkit_gtk.h&quot;
-#include &quot;ADM_toolkit_gtk/toolkit_gtk_include.h&quot;
-#include &quot;ADM_toolkit/filesel.h&quot;
-
-# include &quot;prefs.h&quot;
-#include &quot;ADM_audiodevice/audio_out.h&quot;
-
-#include &quot;ADM_assert.h&quot;
-#include &quot;GUI_render.h&quot;
-#include &quot;ADM_osSupport/ADM_cpuCap.h&quot;
-#include &quot;ADM_toolkit/toolkit.hxx&quot;
-
-static GtkWidget	*create_dialog1 (void);
-static void setpp(void);
-
-static GtkWidget *dialog=NULL;
-
-extern void 		AVDM_audioPref( void );
-
-typedef struct stVideoDevice
-{
-        ADM_RENDER_TYPE type;
-        char            *name;
-
-}stVideoDevice;
-
-static stVideoDevice myVideoDevice[]
-={
-        {RENDER_GTK,&quot;Gtk (no accel)&quot;},
-#ifdef USE_XV
-        {RENDER_XV,&quot;Xvideo accel (best)&quot;},
-#endif
-#ifdef USE_SDL
-        {RENDER_SDL,&quot;SDL accel&quot;},
-#endif
-
-};
-
-uint8_t DIA_Preferences2(void);
-
-
-uint8_t DIA_Preferences2(void)
-{
-uint8_t ret=0;
-gint r;
-char *str;
-const char *nullstring=&quot;&quot;;
-#ifdef HAVE_AUDIO
-AUDIO_DEVICE olddevice,newdevice;
-#endif
-uint32_t	lavcodec_mpeg=0;
-uint32_t        use_odml=0;
-uint32_t	autosplit=0;
-GtkWidget *wids[10];
-GtkWidget *videowids[10];
-uint32_t k;
-unsigned int renderI;
-ADM_RENDER_TYPE render;
-uint32_t useTray=0;
-uint32_t useMaster=0;
-uint32_t useAutoIndex=0;
-uint32_t useSwap=0;
-uint32_t useNuv=0;
-uint32_t mthreads=0;	
-uint32_t downmix;
-uint32_t mpeg_no_limit=0;
-	dialog=create_dialog1();
-//	gtk_transient(dialog);
-        gtk_register_dialog(dialog);
-
-        if(!prefs-&gt;get(FEATURE_USE_SYSTRAY,&amp;useTray)) useTray=0;
-        gtk_toggle_button_set_active( GTK_TOGGLE_BUTTON(WID(checkbuttonSystray)),useTray);
-        
-        if(!prefs-&gt;get(FEATURE_MPEG_NO_LIMIT,&amp;mpeg_no_limit)) mpeg_no_limit=0;
-        gtk_toggle_button_set_active( GTK_TOGGLE_BUTTON(WID(checkbuttonLimit)),mpeg_no_limit);
-        
-
-//****************************	
-#if 0
-#define SET_CPU(x,y) gtk_widget_set_sensitive(WID(check##x),0); \
-        if(CpuCaps::has##y()) gtk_toggle_button_set_active( GTK_TOGGLE_BUTTON(WID(check##x)),1);
-#else
-        #define SET_CPU(x,y)
-#endif
-        SET_CPU(MMX,MMX);
-        SET_CPU(MMXEXT,MMXEXT);
-        SET_CPU(3DNOW,3DNOW);
-        SET_CPU(SSE,SSE);
-        SET_CPU(SSE2,SSE2);
-        //gtk_widget_set_sensitive( (WID(checkAltivec)),0);
-        gtk_widget_set_sensitive( (WID(checkbuttonReuseLog)),0);
-//****************************
-#ifdef HAVE_AUDIO
-	olddevice=newdevice=AVDM_getCurrentDevice();
-#endif
-	
-	#define CONNECT(A,B)  gtk_signal_connect (GTK_OBJECT(lookup_widget(dialog,#A)), &quot;clicked&quot;, \
-		      GTK_SIGNAL_FUNC (B), (void *) NULL);
-
-	
-#define SPIN_GET(x,y) {x= gtk_spin_button_get_value_as_int(GTK_SPIN_BUTTON(WID(y))) ;}
-#define SPIN_SET(x,y)  {gtk_spin_button_set_value(GTK_SPIN_BUTTON(WID(y)),(gfloat)x) ;}
-
-	// Alsa
-        if( prefs-&gt;get(DEVICE_AUDIO_ALSA_DEVICE, &amp;str) != RC_OK )
-               str = ADM_strdup(&quot;plughw:0,0&quot;);
-        gtk_write_entry_string(WID(entryALSADevice), str);
-        ADM_dealloc(str);
-	// Multithreads
-	if(!prefs-&gt;get(FEATURE_MULTI_THREAD, &amp;mthreads))
-	{
-		mthreads=0;		
-	}
-        SPIN_SET(mthreads,spinbuttonThread);
-	// VCD/SVCD split point		
-	if(!prefs-&gt;get(SETTINGS_MPEGSPLIT, &amp;autosplit))
-	{
-		autosplit=690;		
-	}
-	// Fill entry
-         SPIN_SET(autosplit,spinbuttonMPEGSplit);
-        		
-	if(!prefs-&gt;get(FEATURE_USE_LAVCODEC_MPEG, &amp;lavcodec_mpeg))
-	{
-		lavcodec_mpeg=0;		
-	}		
-	gtk_toggle_button_set_active( GTK_TOGGLE_BUTTON(WID(checkbuttonLibavcodec)),
-			lavcodec_mpeg);
-        
-        // Open DML (Gmv)
-        if(!prefs-&gt;get(FEATURE_USE_ODML, &amp;use_odml))
-        {
-          use_odml=0;                
-        }               
-        gtk_toggle_button_set_active( GTK_TOGGLE_BUTTON(WID(checkbuttonOpenDML)),
-                                      use_odml);
-
-        if(!prefs-&gt;get(FEATURE_AUDIOBAR_USES_MASTER, &amp;useMaster))
-                useMaster=0;
-        
-        if(useMaster) RADIO_SET(radiobuttonMaster,1);
-                else RADIO_SET(radiobuttonPCM,1);
-
-
-        if(!prefs-&gt;get(FEATURE_TRYAUTOIDX, &amp;useAutoIndex))
-                useAutoIndex=0;
-        gtk_toggle_button_set_active( GTK_TOGGLE_BUTTON(WID(checkbuttonAutoindex)),useAutoIndex);
-
-        
-        if(!prefs-&gt;get(FEATURE_SWAP_IF_A_GREATER_THAN_B, &amp;useSwap))
-                useSwap=0;
-        gtk_toggle_button_set_active( GTK_TOGGLE_BUTTON(WID(checkbuttonSwapAB)),useSwap);
-
-
-        if(!prefs-&gt;get(FEATURE_DISABLE_NUV_RESYNC, &amp;useNuv))
-                useNuv=0;
-        gtk_toggle_button_set_active( GTK_TOGGLE_BUTTON(WID(checkbuttonNuvResync)),useNuv);
-        // _____________Message level_____________
-        //________________________________________
-        GtkComboBox     *combo_box;
-        unsigned int msg=2;
-        prefs-&gt;get(MESSAGE_LEVEL,&amp;msg);
-        combo_box=GTK_COMBO_BOX(WID(comboboxMessageLevel));
-        gtk_combo_box_set_active(combo_box,msg);
-        
-        // ___________Video accel device ______________________________________________
-        
-        
-        combo_box=GTK_COMBO_BOX(WID(comboboxVideoOutput));
-        int vd=0;
-        if(prefs-&gt;get(DEVICE_VIDEODEVICE,&amp;renderI)!=RC_OK)
-        {       
-                render=RENDER_GTK;
-        }else
-        {
-                render=(ADM_RENDER_TYPE)renderI;
-        }
-        for(uint32_t i=0;i&lt;sizeof(myVideoDevice)/sizeof(stVideoDevice);i++)
-        {
-                if(myVideoDevice[i].type==render)
-                        {
-                                vd=i;
-                        }
-                gtk_combo_box_append_text      (combo_box,myVideoDevice[i].name);
-        }               
-        gtk_combo_box_set_active(combo_box,vd);
-#ifdef HAVE_AUDIO
-        // ___________ Downmixing ______________________________________________
-        if(prefs-&gt;get(DOWNMIXING_PROLOGIC,&amp;downmix)!=RC_OK)
-        {       
-            downmix=0;
-        }
-        combo_box=GTK_COMBO_BOX(WID(comboboxDownMix));
-        gtk_combo_box_set_active(combo_box,downmix);
-	// ___________ Audio accel device ______________________________________________
-        
-        combo_box=GTK_COMBO_BOX(WID(comboboxAudioOutput));
-        for(uint32_t i=0;i&lt;sizeof(audioDeviceList)/sizeof(DEVICELIST);i++)
-        {
-                if(audioDeviceList[i].id==olddevice)
-                {
-                        k=i;
-                }
-                gtk_combo_box_append_text      (combo_box,audioDeviceList[i].name);
-        }
-        gtk_combo_box_set_active(combo_box,k);
-#endif
-        // _______ External Filter Xfilter__________________
-        uint32_t activeXfilter=0;
-        prefs-&gt;get(FILTERS_AUTOLOAD_ACTIVE,&amp;activeXfilter);
-        gtk_toggle_button_set_active( GTK_TOGGLE_BUTTON(WID(checkbuttonXfilter)),activeXfilter);
-        
-         if( prefs-&gt;get(FILTERS_AUTOLOAD_PATH, &amp;str) != RC_OK )
-#ifndef CYG_MANGLING
-               str = ADM_strdup(&quot;/tmp&quot;);
-#else
-               str = ADM_strdup(&quot;c:\\&quot;);
-#endif
-        gtk_write_entry_string(WID(entryXfilter), str);
-        ADM_dealloc(str);
-        //______________________________________________________
-        // Callback for button
-        gtk_signal_connect(GTK_OBJECT(WID(buttonPostprocLevel)), &quot;clicked&quot;,GTK_SIGNAL_FUNC(setpp),   NULL);
-	 // __________ run _____________________
-
-	gtk_dialog_run(GTK_DIALOG(dialog));
-	{
-		ret=1;
-#ifdef HAVE_AUDIO
-		// Limit
-                mpeg_no_limit=gtk_toggle_button_get_active( GTK_TOGGLE_BUTTON(WID(checkbuttonLimit)));
-		prefs-&gt;set(FEATURE_MPEG_NO_LIMIT, mpeg_no_limit);
-                // Get downmix
-                k=gtk_combo_box_get_active(GTK_COMBO_BOX(WID(comboboxDownMix)));
-                prefs-&gt;set(DOWNMIXING_PROLOGIC,k);
-                
-		// Get device
-		k=gtk_combo_box_get_active(GTK_COMBO_BOX(WID(comboboxAudioOutput)));
-		newdevice=audioDeviceList[k].id;
-		if(newdevice!=olddevice)
-		{
-			AVDM_switch(newdevice);
-		}
-                //
-                //alsa device
-                str=gtk_editable_get_chars(GTK_EDITABLE (WID(entryALSADevice)), 0, -1);
-                if(str)
-                        prefs-&gt;set(DEVICE_AUDIO_ALSA_DEVICE, str);
-#endif
-                uint32_t s;
-                s=gtk_combo_box_get_active(GTK_COMBO_BOX(WID(comboboxMessageLevel)));
-                prefs-&gt;set(MESSAGE_LEVEL,s);
-                // video device
-
-                k=gtk_combo_box_get_active(GTK_COMBO_BOX(WID(comboboxVideoOutput)));
-                render=myVideoDevice[k].type;
-                renderI=(int)render;
-                prefs-&gt;set(DEVICE_VIDEODEVICE,renderI);
-                //************* Xfilter
-                activeXfilter=gtk_toggle_button_get_active( GTK_TOGGLE_BUTTON(WID(checkbuttonXfilter)));
-                prefs-&gt;set(FILTERS_AUTOLOAD_ACTIVE,activeXfilter);
-                
-                 str=gtk_editable_get_chars(GTK_EDITABLE (WID(entryXfilter)), 0, -1);
-                if(str)
-                        prefs-&gt;set(FILTERS_AUTOLOAD_PATH, str);
-                
-                
-                //**************
-                useTray=gtk_toggle_button_get_active( GTK_TOGGLE_BUTTON(WID(checkbuttonSystray)));
-                prefs-&gt;set(FEATURE_USE_SYSTRAY,useTray);
-                
-                //*************
-                if(RADIO_GET(radiobuttonMaster))
-                        prefs-&gt;set(FEATURE_AUDIOBAR_USES_MASTER,(uint32_t) 1);
-                else
-                        prefs-&gt;set(FEATURE_AUDIOBAR_USES_MASTER,(uint32_t) 0);
-
-                ///*********
-		lavcodec_mpeg=gtk_toggle_button_get_active( GTK_TOGGLE_BUTTON(WID(checkbuttonLibavcodec)));
-		prefs-&gt;set(FEATURE_USE_LAVCODEC_MPEG, lavcodec_mpeg);
-                
-                use_odml=gtk_toggle_button_get_active( GTK_TOGGLE_BUTTON(WID(checkbuttonOpenDML)));
-                prefs-&gt;set(FEATURE_USE_ODML, use_odml);
-                
-                SPIN_GET(autosplit,spinbuttonMPEGSplit);
-		prefs-&gt;set(SETTINGS_MPEGSPLIT, autosplit);
-                
-                //
-                SPIN_GET(mthreads,spinbuttonThread);
-                if(mthreads&lt;2) mthreads=0;
-                prefs-&gt;set(FEATURE_MULTI_THREAD, mthreads);
-                //
-
-                useAutoIndex=gtk_toggle_button_get_active( GTK_TOGGLE_BUTTON(WID(checkbuttonAutoindex)));
-                prefs-&gt;set(FEATURE_TRYAUTOIDX, useAutoIndex);
-
-                useSwap=gtk_toggle_button_get_active( GTK_TOGGLE_BUTTON(WID(checkbuttonSwapAB)));
-                prefs-&gt;set(FEATURE_SWAP_IF_A_GREATER_THAN_B, useSwap);
-
-                useNuv=gtk_toggle_button_get_active( GTK_TOGGLE_BUTTON(WID(checkbuttonNuvResync)));
-                prefs-&gt;set(FEATURE_DISABLE_NUV_RESYNC, useNuv);
-		
-	}
-        gtk_unregister_dialog(dialog);
-	gtk_widget_destroy(dialog);
-	dialog=NULL;
-	return ret;
-}
-extern int DIA_getMPParams( uint32_t *pplevel, uint32_t *ppstrength,uint32_t *swap);
-void setpp(void)
-{
-        uint32_t type,strength,uv=0;
-
-        if(!prefs-&gt;get(DEFAULT_POSTPROC_TYPE,&amp;type)) type=3;
-        if(!prefs-&gt;get(DEFAULT_POSTPROC_VALUE,&amp;strength)) strength=3;
-        if( DIA_getMPParams( &amp;type,&amp;strength,&amp;uv))
-        {
-                prefs-&gt;set(DEFAULT_POSTPROC_TYPE,type);
-                prefs-&gt;set(DEFAULT_POSTPROC_VALUE,strength);
-
-        }
-	video_body-&gt;setPostProc(type, strength, uv);
-}
-/*
-void on_callback_lame(GtkButton * button, gpointer user_data)
-{
-char *lame=NULL;
-
-	 GUI_FileSelRead(&quot;Where is lame ?&quot;, &amp;lame);
-	 if(lame)
-	 {
-	 	gtk_write_entry_string(WID(entryLame), lame);
-	 	
-	 }
-
-}
-*/
-void on_callback_toolame(GtkButton * button, gpointer user_data)
-{
-char *lame=NULL;
-gint r;
-	 GUI_FileSelRead(&quot;Where is toolame ?&quot;, &amp;lame);
-	 if(lame)
-	 {
-	 	gtk_write_entry_string(WID(entryToolame), lame);		
-	 }
-
-
-}
-//*************************
-
-
-GtkWidget*
-create_dialog1 (void)
-{
-  GtkWidget *Preferences;
-  GtkWidget *dialog_vbox1;
-  GtkWidget *notebook1;
-  GtkWidget *vbox12;
-  GtkWidget *hbox3;
-  GtkWidget *label11;
-  GtkWidget *comboboxMessageLevel;
-  GtkWidget *checkbuttonSwapAB;
-  GtkWidget *checkbuttonSystray;
-  GtkWidget *checkbuttonSavePrefs;
-  GtkWidget *label21;
-  GtkWidget *vbox16;
-  GtkWidget *checkbuttonAutoindex;
-  GtkWidget *checkbuttonNuvResync;
-  GtkWidget *checkbuttonLibavcodec;
-  GtkWidget *buttonPostprocLevel;
-  GtkWidget *label23;
-  GtkWidget *vbox14;
-  GtkWidget *hbox4;
-  GtkWidget *label13;
-  GtkObject *spinbuttonMPEGSplit_adj;
-  GtkWidget *spinbuttonMPEGSplit;
-  GtkWidget *checkbuttonOpenDML;
-  GtkWidget *checkbuttonReuseLog;
-  GtkWidget *checkbuttonLimit;
-  GtkWidget *label22;
-  GtkWidget *table1;
-  GtkWidget *label18;
-  GtkWidget *label19;
-  GtkWidget *comboboxAudioOutput;
-  GtkWidget *entryALSADevice;
-  GtkWidget *radiobuttonMaster;
-  GSList *radiobuttonMaster_group = NULL;
-  GtkWidget *radiobuttonPCM;
-  GtkWidget *label20;
-  GtkWidget *label29;
-  GtkWidget *comboboxDownMix;
-  GtkWidget *label25;
-  GtkWidget *table2;
-  GtkWidget *hbox5;
-  GtkWidget *label16;
-  GtkWidget *comboboxVideoOutput;
-  GtkWidget *label24;
-  GtkWidget *hbox6;
-  GtkWidget *label27;
-  GtkObject *spinbuttonThread_adj;
-  GtkWidget *spinbuttonThread;
-  GtkWidget *label28;
-  GtkWidget *label26;
-  GtkWidget *table3;
-  GtkWidget *label31;
-  GtkWidget *checkbuttonXfilter;
-  GtkWidget *label32;
-  GtkWidget *hbox7;
-  GtkWidget *entryXfilter;
-  GtkWidget *buttonXfilter;
-  GtkWidget *image1;
-  GtkWidget *label30;
-  GtkWidget *dialog_action_area1;
-  GtkWidget *okbutton1;
-
-  Preferences = gtk_dialog_new ();
-  gtk_container_set_border_width (GTK_CONTAINER (Preferences), 6);
-  gtk_window_set_title (GTK_WINDOW (Preferences), _(&quot;Preferences&quot;));
-  gtk_window_set_resizable (GTK_WINDOW (Preferences), FALSE);
-  gtk_window_set_type_hint (GTK_WINDOW (Preferences), GDK_WINDOW_TYPE_HINT_DIALOG);
-  gtk_dialog_set_has_separator (GTK_DIALOG (Preferences), FALSE);
-
-  dialog_vbox1 = GTK_DIALOG (Preferences)-&gt;vbox;
-  gtk_widget_show (dialog_vbox1);
-
-  notebook1 = gtk_notebook_new ();
-  gtk_widget_show (notebook1);
-  gtk_box_pack_start (GTK_BOX (dialog_vbox1), notebook1, FALSE, FALSE, 0);
-  gtk_container_set_border_width (GTK_CONTAINER (notebook1), 6);
-
-  vbox12 = gtk_vbox_new (FALSE, 6);
-  gtk_widget_show (vbox12);
-  gtk_container_add (GTK_CONTAINER (notebook1), vbox12);
-  gtk_notebook_set_tab_label_packing (GTK_NOTEBOOK (notebook1), vbox12,
-                                      FALSE, FALSE, GTK_PACK_START);
-  gtk_container_set_border_width (GTK_CONTAINER (vbox12), 12);
-
-  hbox3 = gtk_hbox_new (FALSE, 12);
-  gtk_widget_show (hbox3);
-  gtk_box_pack_start (GTK_BOX (vbox12), hbox3, TRUE, TRUE, 0);
-
-  label11 = gtk_label_new_with_mnemonic (_(&quot;_Message level:&quot;));
-  gtk_widget_show (label11);
-  gtk_box_pack_start (GTK_BOX (hbox3), label11, FALSE, FALSE, 0);
-
-  comboboxMessageLevel = gtk_combo_box_new_text ();
-  gtk_widget_show (comboboxMessageLevel);
-  gtk_box_pack_start (GTK_BOX (hbox3), comboboxMessageLevel, TRUE, TRUE, 0);
-  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxMessageLevel), _(&quot;No alerts&quot;));
-  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxMessageLevel), _(&quot;Display only error alerts&quot;));
-  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxMessageLevel), _(&quot;Display all alerts&quot;));
-
-  checkbuttonSwapAB = gtk_check_button_new_with_mnemonic (_(&quot;_Swap marks A and B if A &gt; B&quot;));
-  gtk_widget_show (checkbuttonSwapAB);
-  gtk_box_pack_start (GTK_BOX (vbox12), checkbuttonSwapAB, FALSE, FALSE, 0);
-
-  checkbuttonSystray = gtk_check_button_new_with_mnemonic (_(&quot;_Go to systray when encoding&quot;));
-  gtk_widget_show (checkbuttonSystray);
-  gtk_box_pack_start (GTK_BOX (vbox12), checkbuttonSystray, FALSE, FALSE, 0);
-
-  checkbuttonSavePrefs = gtk_check_button_new_with_mnemonic (_(&quot;S_ave preferences on exit&quot;));
-  gtk_widget_show (checkbuttonSavePrefs);
-  gtk_box_pack_start (GTK_BOX (vbox12), checkbuttonSavePrefs, FALSE, FALSE, 0);
-
-  label21 = gtk_label_new (_(&quot;User Interface&quot;));
-  gtk_widget_show (label21);
-  gtk_notebook_set_tab_label (GTK_NOTEBOOK (notebook1), gtk_notebook_get_nth_page (GTK_NOTEBOOK (notebook1), 0), label21);
-
-  vbox16 = gtk_vbox_new (FALSE, 6);
-  gtk_widget_show (vbox16);
-  gtk_container_add (GTK_CONTAINER (notebook1), vbox16);
-  gtk_notebook_set_tab_label_packing (GTK_NOTEBOOK (notebook1), vbox16,
-                                      FALSE, FALSE, GTK_PACK_START);
-  gtk_container_set_border_width (GTK_CONTAINER (vbox16), 12);
-
-  checkbuttonAutoindex = gtk_check_button_new_with_mnemonic (_(&quot;_Automatically index MPEG files&quot;));
-  gtk_widget_show (checkbuttonAutoindex);
-  gtk_box_pack_start (GTK_BOX (vbox16), checkbuttonAutoindex, FALSE, FALSE, 0);
-
-  checkbuttonNuvResync = gtk_check_button_new_with_mnemonic (_(&quot;_Disable NuppelVideo resync&quot;));
-  gtk_widget_show (checkbuttonNuvResync);
-  gtk_box_pack_start (GTK_BOX (vbox16), checkbuttonNuvResync, FALSE, FALSE, 0);
-
-  checkbuttonLibavcodec = gtk_check_button_new_with_mnemonic (_(&quot;_Use libavcodec MPEG decoder&quot;));
-  gtk_widget_show (checkbuttonLibavcodec);
-  gtk_box_pack_start (GTK_BOX (vbox16), checkbuttonLibavcodec, FALSE, FALSE, 0);
-
-  buttonPostprocLevel = gtk_button_new_with_mnemonic (_(&quot;_Set Default Postprocessing Level&quot;));
-  gtk_widget_show (buttonPostprocLevel);
-  gtk_box_pack_start (GTK_BOX (vbox16), buttonPostprocLevel, FALSE, FALSE, 0);
-
-  label23 = gtk_label_new (_(&quot;Input&quot;));
-  gtk_widget_show (label23);
-  gtk_notebook_set_tab_label (GTK_NOTEBOOK (notebook1), gtk_notebook_get_nth_page (GTK_NOTEBOOK (notebook1), 1), label23);
-
-  vbox14 = gtk_vbox_new (FALSE, 6);
-  gtk_widget_show (vbox14);
-  gtk_container_add (GTK_CONTAINER (notebook1), vbox14);
-  gtk_notebook_set_tab_label_packing (GTK_NOTEBOOK (notebook1), vbox14,
-                                      FALSE, FALSE, GTK_PACK_START);
-  gtk_container_set_border_width (GTK_CONTAINER (vbox14), 12);
-
-  hbox4 = gtk_hbox_new (FALSE, 12);
-  gtk_widget_show (hbox4);
-  gtk_box_pack_start (GTK_BOX (vbox14), hbox4, FALSE, FALSE, 0);
-
-  label13 = gtk_label_new_with_mnemonic (_(&quot;_MPEG auto split (MB):&quot;));
-  gtk_widget_show (label13);
-  gtk_box_pack_start (GTK_BOX (hbox4), label13, FALSE, FALSE, 0);
-
-  spinbuttonMPEGSplit_adj = gtk_adjustment_new (790, 400, 5000, 1, 10, 10);
-  spinbuttonMPEGSplit = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonMPEGSplit_adj), 1, 0);
-  gtk_widget_show (spinbuttonMPEGSplit);
-  gtk_box_pack_start (GTK_BOX (hbox4), spinbuttonMPEGSplit, FALSE, FALSE, 0);
-
-  checkbuttonOpenDML = gtk_check_button_new_with_mnemonic (_(&quot;_Use OpenDML (don't split large AVI files)&quot;));
-  gtk_widget_show (checkbuttonOpenDML);
-  gtk_box_pack_start (GTK_BOX (vbox14), checkbuttonOpenDML, FALSE, FALSE, 0);
-
-  checkbuttonReuseLog = gtk_check_button_new_with_mnemonic (_(&quot;_Reuse 2-pass log&quot;));
-  gtk_widget_show (checkbuttonReuseLog);
-  gtk_box_pack_start (GTK_BOX (vbox14), checkbuttonReuseLog, FALSE, FALSE, 0);
-
-  checkbuttonLimit = gtk_check_button_new_with_mnemonic (_(&quot;Allow non standard audio frequency for DVD output&quot;));
-  gtk_widget_show (checkbuttonLimit);
-  gtk_box_pack_start (GTK_BOX (vbox14), checkbuttonLimit, FALSE, FALSE, 0);
-
-  label22 = gtk_label_new (_(&quot;Output&quot;));
-  gtk_widget_show (label22);
-  gtk_notebook_set_tab_label (GTK_NOTEBOOK (notebook1), gtk_notebook_get_nth_page (GTK_NOTEBOOK (notebook1), 2), label22);
-
-  table1 = gtk_table_new (4, 3, FALSE);
-  gtk_widget_show (table1);
-  gtk_container_add (GTK_CONTAINER (notebook1), table1);
-  gtk_notebook_set_tab_label_packing (GTK_NOTEBOOK (notebook1), table1,
-                                      FALSE, FALSE, GTK_PACK_START);
-  gtk_container_set_border_width (GTK_CONTAINER (table1), 12);
-  gtk_table_set_row_spacings (GTK_TABLE (table1), 6);
-  gtk_table_set_col_spacings (GTK_TABLE (table1), 12);
-
-  label18 = gtk_label_new_with_mnemonic (_(&quot;_Audio output:&quot;));
-  gtk_widget_show (label18);
-  gtk_table_attach (GTK_TABLE (table1), label18, 0, 1, 0, 1,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_misc_set_alignment (GTK_MISC (label18), 0, 0.5);
-
-  label19 = gtk_label_new_with_mnemonic (_(&quot;ALSA _device:&quot;));
-  gtk_widget_show (label19);
-  gtk_table_attach (GTK_TABLE (table1), label19, 0, 1, 1, 2,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_misc_set_alignment (GTK_MISC (label19), 0, 0.5);
-
-  comboboxAudioOutput = gtk_combo_box_new_text ();
-  gtk_widget_show (comboboxAudioOutput);
-  gtk_table_attach (GTK_TABLE (table1), comboboxAudioOutput, 1, 3, 0, 1,
-                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
-                    (GtkAttachOptions) (GTK_FILL), 0, 0);
-
-  entryALSADevice = gtk_entry_new ();
-  gtk_widget_show (entryALSADevice);
-  gtk_table_attach (GTK_TABLE (table1), entryALSADevice, 1, 3, 1, 2,
-                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-
-  radiobuttonMaster = gtk_radio_button_new_with_mnemonic (NULL, _(&quot;_Master&quot;));
-  gtk_widget_show (radiobuttonMaster);
-  gtk_table_attach (GTK_TABLE (table1), radiobuttonMaster, 2, 3, 3, 4,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_radio_button_set_group (GTK_RADIO_BUTTON (radiobuttonMaster), radiobuttonMaster_group);
-  radiobuttonMaster_group = gtk_radio_button_get_group (GTK_RADIO_BUTTON (radiobuttonMaster));
-
-  radiobuttonPCM = gtk_radio_button_new_with_mnemonic (NULL, _(&quot;_PCM&quot;));
-  gtk_widget_show (radiobuttonPCM);
-  gtk_table_attach (GTK_TABLE (table1), radiobuttonPCM, 1, 2, 3, 4,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_radio_button_set_group (GTK_RADIO_BUTTON (radiobuttonPCM), radiobuttonMaster_group);
-  radiobuttonMaster_group = gtk_radio_button_get_group (GTK_RADIO_BUTTON (radiobuttonPCM));
-
-  label20 = gtk_label_new_with_mnemonic (_(&quot;_Volume bar controls:&quot;));
-  gtk_widget_show (label20);
-  gtk_table_attach (GTK_TABLE (table1), label20, 0, 1, 3, 4,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_misc_set_alignment (GTK_MISC (label20), 0, 0.5);
-
-  label29 = gtk_label_new (_(&quot;Local Playback Downmixing&quot;));
-  gtk_widget_show (label29);
-  gtk_table_attach (GTK_TABLE (table1), label29, 0, 1, 2, 3,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_misc_set_alignment (GTK_MISC (label29), 0, 0.5);
-
-  comboboxDownMix = gtk_combo_box_new_text ();
-  gtk_widget_show (comboboxDownMix);
-  gtk_table_attach (GTK_TABLE (table1), comboboxDownMix, 1, 2, 2, 3,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (GTK_FILL), 0, 0);
-  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxDownMix), _(&quot;No downmixing (multichannel)&quot;));
-  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxDownMix), _(&quot;Dolby Prologic&quot;));
-  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxDownMix), _(&quot;Dolby Prologic 2&quot;));
-
-  label25 = gtk_label_new (_(&quot;Audio&quot;));
-  gtk_widget_show (label25);
-  gtk_notebook_set_tab_label (GTK_NOTEBOOK (notebook1), gtk_notebook_get_nth_page (GTK_NOTEBOOK (notebook1), 3), label25);
-
-  table2 = gtk_table_new (2, 2, FALSE);
-  gtk_widget_show (table2);
-  gtk_container_add (GTK_CONTAINER (notebook1), table2);
-  gtk_notebook_set_tab_label_packing (GTK_NOTEBOOK (notebook1), table2,
-                                      FALSE, FALSE, GTK_PACK_START);
-
-  hbox5 = gtk_hbox_new (FALSE, 12);
-  gtk_widget_show (hbox5);
-  gtk_table_attach (GTK_TABLE (table2), hbox5, 0, 2, 0, 2,
-                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
-                    (GtkAttachOptions) (GTK_FILL), 0, 0);
-  gtk_container_set_border_width (GTK_CONTAINER (hbox5), 12);
-
-  label16 = gtk_label_new_with_mnemonic (_(&quot;_Video output:&quot;));
-  gtk_widget_show (label16);
-  gtk_box_pack_start (GTK_BOX (hbox5), label16, FALSE, FALSE, 0);
-
-  comboboxVideoOutput = gtk_combo_box_new_text ();
-  gtk_widget_show (comboboxVideoOutput);
-  gtk_box_pack_start (GTK_BOX (hbox5), comboboxVideoOutput, TRUE, TRUE, 0);
-
-  label24 = gtk_label_new (_(&quot;Video&quot;));
-  gtk_widget_show (label24);
-  gtk_notebook_set_tab_label (GTK_NOTEBOOK (notebook1), gtk_notebook_get_nth_page (GTK_NOTEBOOK (notebook1), 4), label24);
-
-  hbox6 = gtk_hbox_new (FALSE, 0);
-  gtk_widget_show (hbox6);
-  gtk_container_add (GTK_CONTAINER (notebook1), hbox6);
-
-  label27 = gtk_label_new (_(&quot;Enable multithreading : &quot;));
-  gtk_widget_show (label27);
-  gtk_box_pack_start (GTK_BOX (hbox6), label27, FALSE, FALSE, 0);
-
-  spinbuttonThread_adj = gtk_adjustment_new (0, 0, 4, 1, 10, 10);
-  spinbuttonThread = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonThread_adj), 1, 0);
-  gtk_widget_show (spinbuttonThread);
-  gtk_box_pack_start (GTK_BOX (hbox6), spinbuttonThread, FALSE, TRUE, 0);
-  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonThread), TRUE);
-
-  label28 = gtk_label_new (_(&quot;Threads&quot;));
-  gtk_widget_show (label28);
-  gtk_box_pack_start (GTK_BOX (hbox6), label28, FALSE, FALSE, 0);
-
-  label26 = gtk_label_new (_(&quot;MultiThread&quot;));
-  gtk_widget_show (label26);
-  gtk_notebook_set_tab_label (GTK_NOTEBOOK (notebook1), gtk_notebook_get_nth_page (GTK_NOTEBOOK (notebook1), 5), label26);
-
-  table3 = gtk_table_new (2, 2, FALSE);
-  gtk_widget_show (table3);
-  gtk_container_add (GTK_CONTAINER (notebook1), table3);
-
-  label31 = gtk_label_new (_(&quot;Load external filters&quot;));
-  gtk_widget_show (label31);
-  gtk_table_attach (GTK_TABLE (table3), label31, 0, 1, 0, 1,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_misc_set_alignment (GTK_MISC (label31), 0, 0.5);
-
-  checkbuttonXfilter = gtk_check_button_new_with_mnemonic (&quot;&quot;);
-  gtk_widget_show (checkbuttonXfilter);
-  gtk_table_attach (GTK_TABLE (table3), checkbuttonXfilter, 1, 2, 0, 1,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-
-  label32 = gtk_label_new (_(&quot;Path to external filters&quot;));
-  gtk_widget_show (label32);
-  gtk_table_attach (GTK_TABLE (table3), label32, 0, 1, 1, 2,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_misc_set_alignment (GTK_MISC (label32), 0, 0.5);
-
-  hbox7 = gtk_hbox_new (FALSE, 0);
-  gtk_widget_show (hbox7);
-  gtk_table_attach (GTK_TABLE (table3), hbox7, 1, 2, 1, 2,
-                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
-                    (GtkAttachOptions) (GTK_FILL), 0, 0);
-
-  entryXfilter = gtk_entry_new ();
-  gtk_widget_show (entryXfilter);
-  gtk_box_pack_start (GTK_BOX (hbox7), entryXfilter, TRUE, TRUE, 0);
-
-  buttonXfilter = gtk_button_new ();
-  gtk_widget_show (buttonXfilter);
-  gtk_box_pack_start (GTK_BOX (hbox7), buttonXfilter, FALSE, FALSE, 0);
-
-  image1 = gtk_image_new_from_stock (&quot;gtk-open&quot;, GTK_ICON_SIZE_BUTTON);
-  gtk_widget_show (image1);
-  gtk_container_add (GTK_CONTAINER (buttonXfilter), image1);
-
-  label30 = gtk_label_new (_(&quot;External filter&quot;));
-  gtk_widget_show (label30);
-  gtk_notebook_set_tab_label (GTK_NOTEBOOK (notebook1), gtk_notebook_get_nth_page (GTK_NOTEBOOK (notebook1), 6), label30);
-
-  dialog_action_area1 = GTK_DIALOG (Preferences)-&gt;action_area;
-  gtk_widget_show (dialog_action_area1);
-  gtk_button_box_set_layout (GTK_BUTTON_BOX (dialog_action_area1), GTK_BUTTONBOX_END);
-
-  okbutton1 = gtk_button_new_from_stock (&quot;gtk-close&quot;);
-  gtk_widget_show (okbutton1);
-  gtk_dialog_add_action_widget (GTK_DIALOG (Preferences), okbutton1, GTK_RESPONSE_CLOSE);
-  GTK_WIDGET_SET_FLAGS (okbutton1, GTK_CAN_DEFAULT);
-
-  gtk_label_set_mnemonic_widget (GTK_LABEL (label13), spinbuttonMPEGSplit);
-  gtk_label_set_mnemonic_widget (GTK_LABEL (label19), entryALSADevice);
-  gtk_label_set_mnemonic_widget (GTK_LABEL (label20), radiobuttonPCM);
-
-  /* Store pointers to all widgets, for use by lookup_widget(). */
-  GLADE_HOOKUP_OBJECT_NO_REF (Preferences, Preferences, &quot;Preferences&quot;);
-  GLADE_HOOKUP_OBJECT_NO_REF (Preferences, dialog_vbox1, &quot;dialog_vbox1&quot;);
-  GLADE_HOOKUP_OBJECT (Preferences, notebook1, &quot;notebook1&quot;);
-  GLADE_HOOKUP_OBJECT (Preferences, vbox12, &quot;vbox12&quot;);
-  GLADE_HOOKUP_OBJECT (Preferences, hbox3, &quot;hbox3&quot;);
-  GLADE_HOOKUP_OBJECT (Preferences, label11, &quot;label11&quot;);
-  GLADE_HOOKUP_OBJECT (Preferences, comboboxMessageLevel, &quot;comboboxMessageLevel&quot;);
-  GLADE_HOOKUP_OBJECT (Preferences, checkbuttonSwapAB, &quot;checkbuttonSwapAB&quot;);
-  GLADE_HOOKUP_OBJECT (Preferences, checkbuttonSystray, &quot;checkbuttonSystray&quot;);
-  GLADE_HOOKUP_OBJECT (Preferences, checkbuttonSavePrefs, &quot;checkbuttonSavePrefs&quot;);
-  GLADE_HOOKUP_OBJECT (Preferences, label21, &quot;label21&quot;);
-  GLADE_HOOKUP_OBJECT (Preferences, vbox16, &quot;vbox16&quot;);
-  GLADE_HOOKUP_OBJECT (Preferences, checkbuttonAutoindex, &quot;checkbuttonAutoindex&quot;);
-  GLADE_HOOKUP_OBJECT (Preferences, checkbuttonNuvResync, &quot;checkbuttonNuvResync&quot;);
-  GLADE_HOOKUP_OBJECT (Preferences, checkbuttonLibavcodec, &quot;checkbuttonLibavcodec&quot;);
-  GLADE_HOOKUP_OBJECT (Preferences, buttonPostprocLevel, &quot;buttonPostprocLevel&quot;);
-  GLADE_HOOKUP_OBJECT (Preferences, label23, &quot;label23&quot;);
-  GLADE_HOOKUP_OBJECT (Preferences, vbox14, &quot;vbox14&quot;);
-  GLADE_HOOKUP_OBJECT (Preferences, hbox4, &quot;hbox4&quot;);
-  GLADE_HOOKUP_OBJECT (Preferences, label13, &quot;label13&quot;);
-  GLADE_HOOKUP_OBJECT (Preferences, spinbuttonMPEGSplit, &quot;spinbuttonMPEGSplit&quot;);
-  GLADE_HOOKUP_OBJECT (Preferences, checkbuttonOpenDML, &quot;checkbuttonOpenDML&quot;);
-  GLADE_HOOKUP_OBJECT (Preferences, checkbuttonReuseLog, &quot;checkbuttonReuseLog&quot;);
-  GLADE_HOOKUP_OBJECT (Preferences, checkbuttonLimit, &quot;checkbuttonLimit&quot;);
-  GLADE_HOOKUP_OBJECT (Preferences, label22, &quot;label22&quot;);
-  GLADE_HOOKUP_OBJECT (Preferences, table1, &quot;table1&quot;);
-  GLADE_HOOKUP_OBJECT (Preferences, label18, &quot;label18&quot;);
-  GLADE_HOOKUP_OBJECT (Preferences, label19, &quot;label19&quot;);
-  GLADE_HOOKUP_OBJECT (Preferences, comboboxAudioOutput, &quot;comboboxAudioOutput&quot;);
-  GLADE_HOOKUP_OBJECT (Preferences, entryALSADevice, &quot;entryALSADevice&quot;);
-  GLADE_HOOKUP_OBJECT (Preferences, radiobuttonMaster, &quot;radiobuttonMaster&quot;);
-  GLADE_HOOKUP_OBJECT (Preferences, radiobuttonPCM, &quot;radiobuttonPCM&quot;);
-  GLADE_HOOKUP_OBJECT (Preferences, label20, &quot;label20&quot;);
-  GLADE_HOOKUP_OBJECT (Preferences, label29, &quot;label29&quot;);
-  GLADE_HOOKUP_OBJECT (Preferences, comboboxDownMix, &quot;comboboxDownMix&quot;);
-  GLADE_HOOKUP_OBJECT (Preferences, label25, &quot;label25&quot;);
-  GLADE_HOOKUP_OBJECT (Preferences, table2, &quot;table2&quot;);
-  GLADE_HOOKUP_OBJECT (Preferences, hbox5, &quot;hbox5&quot;);
-  GLADE_HOOKUP_OBJECT (Preferences, label16, &quot;label16&quot;);
-  GLADE_HOOKUP_OBJECT (Preferences, comboboxVideoOutput, &quot;comboboxVideoOutput&quot;);
-  GLADE_HOOKUP_OBJECT (Preferences, label24, &quot;label24&quot;);
-  GLADE_HOOKUP_OBJECT (Preferences, hbox6, &quot;hbox6&quot;);
-  GLADE_HOOKUP_OBJECT (Preferences, label27, &quot;label27&quot;);
-  GLADE_HOOKUP_OBJECT (Preferences, spinbuttonThread, &quot;spinbuttonThread&quot;);
-  GLADE_HOOKUP_OBJECT (Preferences, label28, &quot;label28&quot;);
-  GLADE_HOOKUP_OBJECT (Preferences, label26, &quot;label26&quot;);
-  GLADE_HOOKUP_OBJECT (Preferences, table3, &quot;table3&quot;);
-  GLADE_HOOKUP_OBJECT (Preferences, label31, &quot;label31&quot;);
-  GLADE_HOOKUP_OBJECT (Preferences, checkbuttonXfilter, &quot;checkbuttonXfilter&quot;);
-  GLADE_HOOKUP_OBJECT (Preferences, label32, &quot;label32&quot;);
-  GLADE_HOOKUP_OBJECT (Preferences, hbox7, &quot;hbox7&quot;);
-  GLADE_HOOKUP_OBJECT (Preferences, entryXfilter, &quot;entryXfilter&quot;);
-  GLADE_HOOKUP_OBJECT (Preferences, buttonXfilter, &quot;buttonXfilter&quot;);
-  GLADE_HOOKUP_OBJECT (Preferences, image1, &quot;image1&quot;);
-  GLADE_HOOKUP_OBJECT (Preferences, label30, &quot;label30&quot;);
-  GLADE_HOOKUP_OBJECT_NO_REF (Preferences, dialog_action_area1, &quot;dialog_action_area1&quot;);
-  GLADE_HOOKUP_OBJECT (Preferences, okbutton1, &quot;okbutton1&quot;);
-
-  return Preferences;
-}
-

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/Makefile.am
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/Makefile.am	2007-03-23 18:33:23 UTC (rev 2897)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/Makefile.am	2007-03-24 17:37:03 UTC (rev 2898)
@@ -13,7 +13,7 @@
 	DIA_resize.cpp DIA_working.cpp \
 	DIA_working.h DIA_busy.cpp DIA_busy.h DIA_exLame.cpp DIA_pipe.cpp DIA_mpeg2opt.cpp \
 	DIA_xvcd.cpp DIA_muxer.cpp \
-	DIA_xvid.cpp DIA_crop.cpp DIA_color.cpp DIA_encoding.cpp  DIA_prefs.cpp \
+	DIA_xvid.cpp DIA_crop.cpp DIA_color.cpp DIA_encoding.cpp   \
 	DIA_requant.cpp DIA_xvid4.cpp DIA_lavcodec.cpp \
 	DIA_pause.cpp \
 	DIA_lavdecoder.cpp DIA_calculator.cpp DIA_equalizer.cpp \
@@ -48,7 +48,7 @@
 DIA_audio.cpp        DIA_idx_pg.h         DIA_pause.cpp       \
 DIA_audioTrack.cpp   DIA_pipe.cpp        DIA_working.cpp \
 DIA_defaultAudio.cpp  DIA_jobs.cpp        DIA_working.h \
-DIA_jobs_save.cpp    DIA_prefs.cpp       DIA_x264.cpp \
+DIA_jobs_save.cpp     DIA_x264.cpp \
 DIA_preview.cpp     DIA_xvcd.cpp \
 DIA_busy.cpp         DIA_properties.cpp  DIA_xvid.cpp \
 DIA_busy.h           DIA_lavcodec.cpp     DIA_quota.cpp       DIA_xvid4.cpp \

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Makefile.am
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Makefile.am	2007-03-23 18:33:23 UTC (rev 2897)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Makefile.am	2007-03-24 17:37:03 UTC (rev 2898)
@@ -1,7 +1,7 @@
 
 noinst_LIBRARIES = libADM_dialog.a 
 libADM_dialog_a_SOURCES = DIA_busy.cpp  alert_qt4.cpp DIA_none.cpp OCR_none.cpp DIA_indexing.cpp \
-AQ_props.cpp AQ_working.cpp AQ_encoding.cpp AQ_pref.cpp
+AQ_props.cpp AQ_working.cpp AQ_encoding.cpp 
 
 INCLUDES = $(all_includes)  $(XML_CFLAGS)  $(FREETYPE_CFLAGS) -DADM_SUBVERSION=@ADM_SUBVERSION@ \
 		-I../../../ADM_libraries/ADM_utilities \

Deleted: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_pref.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_pref.cpp	2007-03-23 18:33:23 UTC (rev 2897)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_pref.cpp	2007-03-24 17:37:03 UTC (rev 2898)
@@ -1,338 +0,0 @@
-//
-/*
- * DO NOT EDIT THIS FILE - it is generated by Glade.
- */
-
-#include &quot;config.h&quot;
-#include &lt;stdio.h&gt;
-#include &lt;stdlib.h&gt;
-#include &lt;math.h&gt;
-#include &lt;sys/types.h&gt;
-#include &lt;sys/stat.h&gt;
-#include &lt;unistd.h&gt;
-#define Ui_Dialog Ui_prefDialog
-#include &quot;ui_pref.h&quot;
-#undef Ui_Dialog
-
-#include &quot;default.h&quot;
-#include &quot;ADM_toolkit/filesel.h&quot;
-
-# include &quot;prefs.h&quot;
-#include &quot;ADM_audiodevice/audio_out.h&quot;
-#include &quot;ADM_audio/ADM_audiodef.h&quot;
-
-#include &quot;ADM_assert.h&quot;
-#include &quot;GUI_render.h&quot;
-#include &quot;ADM_osSupport/ADM_cpuCap.h&quot;
-#include &quot;ADM_toolkit/toolkit.hxx&quot;
-
-static void setpp(void);
-/*******************************************************/
-class prefWindow : public QDialog
-{
-     Q_OBJECT
-
- public:
-     prefWindow();
-     Ui_prefDialog ui;
- public slots:
- private slots:
- private:
-};
-
-
-prefWindow::prefWindow()     : QDialog()
- {
-     ui.setupUi(this);
-     //connect( (ui.pushButton),SIGNAL(pressed()),this,SLOT(buttonPressed()));
- }
-/*******************************************************/
-
-extern void 		AVDM_audioPref( void );
-
-typedef struct stVideoDevice
-{
-        ADM_RENDER_TYPE type;
-        char            *name;
-
-}stVideoDevice;
-
-static stVideoDevice myVideoDevice[]
-={
-        {RENDER_GTK,&quot;QT (no accel)&quot;},
-#ifdef USE_XV
-        {RENDER_XV,&quot;Xvideo accel (best)&quot;},
-#endif
-#ifdef USE_SDL
-        {RENDER_SDL,&quot;SDL accel&quot;},
-#endif
-
-};
-
-uint8_t DIA_Preferences2(void);
-
-/**
-      \fn     DIA_Preferences(void)
-      \brief  Show the preference dialog box
-
-
-*/
-uint8_t DIA_Preferences2(void)
-{
-uint8_t ret=0;
-int r;
-char *str;
-const char *nullstring=&quot;&quot;;
-#ifdef HAVE_AUDIO
-AUDIO_DEVICE olddevice,newdevice;
-#endif
-uint32_t	lavcodec_mpeg=0;
-uint32_t        use_odml=0;
-uint32_t	autosplit=0;
-uint32_t k;
-unsigned int renderI;
-ADM_RENDER_TYPE render;
-uint32_t useTray=0;
-uint32_t useMaster=0;
-uint32_t useAutoIndex=0;
-uint32_t useSwap=0;
-uint32_t useNuv=0;
-uint32_t mthreads=0;	
-uint32_t downmix;
-uint32_t mpeg_no_limit=0;
-
-        prefWindow dialog;
-        
-        //
-#define WIDGET(x) (dialog.ui.x)
-
-        if(!prefs-&gt;get(FEATURE_USE_SYSTRAY,&amp;useTray)) useTray=0;
-        WIDGET(checkBoxSystray)-&gt;setChecked(useTray);
-
-        
-        if(!prefs-&gt;get(FEATURE_MPEG_NO_LIMIT,&amp;mpeg_no_limit)) mpeg_no_limit=0;
-          WIDGET(checkBoxDVDNonStd)-&gt;setChecked(mpeg_no_limit);
-
-//****************************	
-#if 0
-#if 0
-#define SET_CPU(x,y) gtk_widget_set_sensitive(WID(check##x),0); \
-        if(CpuCaps::has##y()) gtk_toggle_button_set_active( GTK_TOGGLE_BUTTON(WID(check##x)),1);
-#else
-        #define SET_CPU(x,y)
-#endif
-        SET_CPU(MMX,MMX);
-        SET_CPU(MMXEXT,MMXEXT);
-        SET_CPU(3DNOW,3DNOW);
-        SET_CPU(SSE,SSE);
-        SET_CPU(SSE2,SSE2);
-#endif        
-//****************************
-#ifdef HAVE_AUDIO
-	olddevice=newdevice=AVDM_getCurrentDevice();
-#endif
-	
-        // Alsa
-        if( prefs-&gt;get(DEVICE_AUDIO_ALSA_DEVICE, &amp;str) != RC_OK )
-                str = ADM_strdup(&quot;plughw:0,0&quot;);
-        WIDGET(lineEditAlsa)-&gt;setText(str);
-        ADM_dealloc(str);
-        // Multithreads
-        if(!prefs-&gt;get(FEATURE_MULTI_THREAD, &amp;mthreads))
-        {
-                mthreads=0;		
-        }
-        WIDGET(spinBox)-&gt;setValue(mthreads);
-  
-        // VCD/SVCD split point		
-        if(!prefs-&gt;get(SETTINGS_MPEGSPLIT, &amp;autosplit))
-        {
-                autosplit=690;		
-        }
-        // Fill entry
-        WIDGET(spinBoxSplit)-&gt;setValue(autosplit);		
-        if(!prefs-&gt;get(FEATURE_USE_LAVCODEC_MPEG, &amp;lavcodec_mpeg))
-        {
-                lavcodec_mpeg=0;		
-        }
-        WIDGET(checkBoxLavMpeg)-&gt;setChecked(lavcodec_mpeg);		
-        // Open DML (Gmv)
-        if(!prefs-&gt;get(FEATURE_USE_ODML, &amp;use_odml))
-        {
-          use_odml=0;                
-        }   
-        WIDGET(checkBoxopenDML)-&gt;setChecked(use_odml);
-
-        if(!prefs-&gt;get(FEATURE_AUDIOBAR_USES_MASTER, &amp;useMaster))
-                useMaster=0;
-        if(useMaster)
-            WIDGET(radioButtonMaster)-&gt;setChecked(1);
-          else
-            WIDGET(radioButtonPCM)-&gt;setChecked(1);
-//         if(useMaster) RADIO_SET(radiobuttonMaster,1);
-//                 else RADIO_SET(radiobuttonPCM,1);
-
-
-        if(!prefs-&gt;get(FEATURE_TRYAUTOIDX, &amp;useAutoIndex))
-                useAutoIndex=0;
-        WIDGET(checkBoxAutoIndex)-&gt;setChecked(useAutoIndex);
-
-        
-        if(!prefs-&gt;get(FEATURE_SWAP_IF_A_GREATER_THAN_B, &amp;useSwap))
-                useSwap=0;
-        WIDGET(checkBoxSwapAB)-&gt;setChecked(useSwap);
-
-
-        if(!prefs-&gt;get(FEATURE_DISABLE_NUV_RESYNC, &amp;useNuv))
-                useNuv=0;
-        WIDGET(checkBoxNuv)-&gt;setChecked(useNuv);
-        // _____________Message level_____________
-        //________________________________________
-
-        unsigned int msg=2;
-        prefs-&gt;get(MESSAGE_LEVEL,&amp;msg);
-#define NB_MSG 3
-        const char *msgT[NB_MSG]={
-            _(&quot;No alerts&quot;),
-            _(&quot;Only Errors&quot;),
-            _(&quot;All Messages&quot;)
-        };
-        for(int i=0;i&lt;NB_MSG;i++)
-          WIDGET(comboBoxMessage)-&gt;addItem(msgT[i]);
-         WIDGET(comboBoxMessage)-&gt;setCurrentIndex(msg);
-        
-        // ___________Video accel device ______________________________________________
-        int vd=0;
-        if(prefs-&gt;get(DEVICE_VIDEODEVICE,&amp;renderI)!=RC_OK)
-        {       
-                render=RENDER_GTK;
-        }else
-        {
-                render=(ADM_RENDER_TYPE)renderI;
-        }
-        for(uint32_t i=0;i&lt;sizeof(myVideoDevice)/sizeof(stVideoDevice);i++)
-        {
-                if(myVideoDevice[i].type==render)
-                        {
-                                vd=i;
-                        }
-                WIDGET(comboBoxVideo)-&gt;addItem(myVideoDevice[i].name);
-        }
-               WIDGET(comboBoxVideo)-&gt;setCurrentIndex(vd);
-#ifdef HAVE_AUDIO
-        // ___________ Downmixing ______________________________________________
-        if(prefs-&gt;get(DOWNMIXING_PROLOGIC,&amp;downmix)!=RC_OK)
-        {       
-            downmix=0;
-        }
-        for( int i=0;i&lt;NB_LOCAL_DOWNMIX;i++)
-        {
-          WIDGET(comboBoxDownmix)-&gt;addItem(localDownmixing[i].desc);
-        }
-        WIDGET(comboBoxDownmix)-&gt;setCurrentIndex(downmix);
-	// ___________ Audio accel device ______________________________________________
-        
-//         combo_box=GTK_COMBO_BOX(WID(comboboxAudioOutput));
-        for(uint32_t i=0;i&lt;sizeof(audioDeviceList)/sizeof(DEVICELIST);i++)
-        {
-                if(audioDeviceList[i].id==olddevice)
-                {
-                        k=i;
-                }
-                WIDGET(comboBoxAudioDevice)-&gt;addItem(audioDeviceList[i].name);
-        }
-        WIDGET(comboBoxAudioDevice)-&gt;setCurrentIndex(k);
-#endif
-        //______________________________________________________
-        // Callback for button
-//         gtk_signal_connect(GTK_OBJECT(WID(buttonPostprocLevel)), &quot;clicked&quot;,GTK_SIGNAL_FUNC(setpp),   NULL);
-        // __________ run _____________________
-        if(QDialog::Accepted==dialog.exec())
-        {
-                ret=1;
-#ifdef HAVE_AUDIO
-                // Limit
-                mpeg_no_limit=WIDGET(checkBoxDVDNonStd)-&gt;checkState();
-                prefs-&gt;set(FEATURE_MPEG_NO_LIMIT, mpeg_no_limit);
-                // Get downmix
-                downmix=WIDGET(comboBoxDownmix)-&gt;currentIndex();
-                prefs-&gt;set(DOWNMIXING_PROLOGIC,downmix);
-                
-                // Get device
-                k= WIDGET(comboBoxAudioDevice)-&gt;currentIndex();
-                newdevice=audioDeviceList[k].id;
-                if(newdevice!=olddevice)
-                {
-                        AVDM_switch(newdevice);
-                }
-                //
-                //alsa device
-                str=NULL;
-                str=WIDGET(lineEditAlsa)-&gt;text().toAscii().data();
-                if(str)
-                        prefs-&gt;set(DEVICE_AUDIO_ALSA_DEVICE, str);
-#endif
-                uint32_t s;
-                s=WIDGET(comboBoxMessage)-&gt;currentIndex();
-                prefs-&gt;set(MESSAGE_LEVEL,s);
-                // video device
-                k=WIDGET(comboBoxVideo)-&gt;currentIndex();
-                render=myVideoDevice[k].type;
-                renderI=(int)render;
-                prefs-&gt;set(DEVICE_VIDEODEVICE,renderI);
-        
-                //**************
-                useTray=WIDGET(checkBoxSystray)-&gt;checkState();
-                prefs-&gt;set(FEATURE_USE_SYSTRAY,useTray);
-                
-                //*************
-                if(WIDGET(radioButtonMaster)-&gt;isChecked())
-                            prefs-&gt;set(FEATURE_AUDIOBAR_USES_MASTER,(uint32_t) 1);
-                else
-                          prefs-&gt;set(FEATURE_AUDIOBAR_USES_MASTER,(uint32_t) 0);
-
-                ///*********
-                lavcodec_mpeg=WIDGET(checkBoxLavMpeg)-&gt;checkState();		
-                prefs-&gt;set(FEATURE_USE_LAVCODEC_MPEG, lavcodec_mpeg);
-                
-                use_odml=WIDGET(checkBoxopenDML)-&gt;checkState();
-                prefs-&gt;set(FEATURE_USE_ODML, use_odml);
-                
-                autosplit=WIDGET(spinBoxSplit)-&gt;value();		
-                prefs-&gt;set(SETTINGS_MPEGSPLIT, autosplit);
-                
-                //
-                mthreads=WIDGET(spinBox)-&gt;value();	
-                if(mthreads&lt;2) mthreads=0;
-                prefs-&gt;set(FEATURE_MULTI_THREAD, mthreads);
-
-                useAutoIndex=WIDGET(checkBoxAutoIndex)-&gt;checkState();
-                prefs-&gt;set(FEATURE_TRYAUTOIDX, useAutoIndex);
-
-                useSwap=WIDGET(checkBoxSwapAB)-&gt;checkState(); 
-                prefs-&gt;set(FEATURE_SWAP_IF_A_GREATER_THAN_B, useSwap);
-
-                useNuv=WIDGET(checkBoxNuv)-&gt;checkState(); 
-                prefs-&gt;set(FEATURE_DISABLE_NUV_RESYNC, useNuv);
-		
-	}
-       
-	return ret;
-}
-extern int DIA_getMPParams( uint32_t *pplevel, uint32_t *ppstrength,uint32_t *swap);
-void setpp(void)
-{
-        uint32_t type,strength,uv=0;
-
-        if(!prefs-&gt;get(DEFAULT_POSTPROC_TYPE,&amp;type)) type=3;
-        if(!prefs-&gt;get(DEFAULT_POSTPROC_VALUE,&amp;strength)) strength=3;
-        if( DIA_getMPParams( &amp;type,&amp;strength,&amp;uv))
-        {
-                prefs-&gt;set(DEFAULT_POSTPROC_TYPE,type);
-                prefs-&gt;set(DEFAULT_POSTPROC_VALUE,strength);
-
-        }
-//	video_body-&gt;setPostProc(type, strength, uv);
-}
-//EOF
-

Deleted: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/pref.ui
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/pref.ui	2007-03-23 18:33:23 UTC (rev 2897)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/pref.ui	2007-03-24 17:37:03 UTC (rev 2898)
@@ -1,359 +0,0 @@
-&lt;ui version=&quot;4.0&quot; &gt;
- &lt;class&gt;Dialog&lt;/class&gt;
- &lt;widget class=&quot;QDialog&quot; name=&quot;Dialog&quot; &gt;
-  &lt;property name=&quot;geometry&quot; &gt;
-   &lt;rect&gt;
-    &lt;x&gt;0&lt;/x&gt;
-    &lt;y&gt;0&lt;/y&gt;
-    &lt;width&gt;560&lt;/width&gt;
-    &lt;height&gt;234&lt;/height&gt;
-   &lt;/rect&gt;
-  &lt;/property&gt;
-  &lt;property name=&quot;windowTitle&quot; &gt;
-   &lt;string&gt;Preferences&lt;/string&gt;
-  &lt;/property&gt;
-  &lt;layout class=&quot;QGridLayout&quot; &gt;
-   &lt;property name=&quot;margin&quot; &gt;
-    &lt;number&gt;9&lt;/number&gt;
-   &lt;/property&gt;
-   &lt;property name=&quot;spacing&quot; &gt;
-    &lt;number&gt;6&lt;/number&gt;
-   &lt;/property&gt;
-   &lt;item row=&quot;1&quot; column=&quot;0&quot; &gt;
-    &lt;widget class=&quot;QDialogButtonBox&quot; name=&quot;buttonBox&quot; &gt;
-     &lt;property name=&quot;orientation&quot; &gt;
-      &lt;enum&gt;Qt::Horizontal&lt;/enum&gt;
-     &lt;/property&gt;
-     &lt;property name=&quot;standardButtons&quot; &gt;
-      &lt;set&gt;QDialogButtonBox::Cancel|QDialogButtonBox::NoButton|QDialogButtonBox::Ok&lt;/set&gt;
-     &lt;/property&gt;
-    &lt;/widget&gt;
-   &lt;/item&gt;
-   &lt;item row=&quot;0&quot; column=&quot;0&quot; &gt;
-    &lt;widget class=&quot;QTabWidget&quot; name=&quot;tabWidget&quot; &gt;
-     &lt;property name=&quot;currentIndex&quot; &gt;
-      &lt;number&gt;5&lt;/number&gt;
-     &lt;/property&gt;
-     &lt;widget class=&quot;QWidget&quot; name=&quot;tab&quot; &gt;
-      &lt;attribute name=&quot;title&quot; &gt;
-       &lt;string&gt;User Interface&lt;/string&gt;
-      &lt;/attribute&gt;
-      &lt;layout class=&quot;QVBoxLayout&quot; &gt;
-       &lt;property name=&quot;margin&quot; &gt;
-        &lt;number&gt;9&lt;/number&gt;
-       &lt;/property&gt;
-       &lt;property name=&quot;spacing&quot; &gt;
-        &lt;number&gt;6&lt;/number&gt;
-       &lt;/property&gt;
-       &lt;item&gt;
-        &lt;layout class=&quot;QHBoxLayout&quot; &gt;
-         &lt;property name=&quot;margin&quot; &gt;
-          &lt;number&gt;0&lt;/number&gt;
-         &lt;/property&gt;
-         &lt;property name=&quot;spacing&quot; &gt;
-          &lt;number&gt;6&lt;/number&gt;
-         &lt;/property&gt;
-         &lt;item&gt;
-          &lt;widget class=&quot;QLabel&quot; name=&quot;label_7&quot; &gt;
-           &lt;property name=&quot;text&quot; &gt;
-            &lt;string&gt;Message Level&lt;/string&gt;
-           &lt;/property&gt;
-          &lt;/widget&gt;
-         &lt;/item&gt;
-         &lt;item&gt;
-          &lt;widget class=&quot;QComboBox&quot; name=&quot;comboBoxMessage&quot; /&gt;
-         &lt;/item&gt;
-        &lt;/layout&gt;
-       &lt;/item&gt;
-       &lt;item&gt;
-        &lt;widget class=&quot;QCheckBox&quot; name=&quot;checkBoxSwapAB&quot; &gt;
-         &lt;property name=&quot;text&quot; &gt;
-          &lt;string&gt;Swap A &amp; B markers if A &gt; B&lt;/string&gt;
-         &lt;/property&gt;
-        &lt;/widget&gt;
-       &lt;/item&gt;
-       &lt;item&gt;
-        &lt;widget class=&quot;QCheckBox&quot; name=&quot;checkBoxSystray&quot; &gt;
-         &lt;property name=&quot;text&quot; &gt;
-          &lt;string&gt;Go to systray when encoding&lt;/string&gt;
-         &lt;/property&gt;
-        &lt;/widget&gt;
-       &lt;/item&gt;
-       &lt;item&gt;
-        &lt;widget class=&quot;QCheckBox&quot; name=&quot;checkBoxSavePref&quot; &gt;
-         &lt;property name=&quot;text&quot; &gt;
-          &lt;string&gt;Save preference on exit&lt;/string&gt;
-         &lt;/property&gt;
-        &lt;/widget&gt;
-       &lt;/item&gt;
-      &lt;/layout&gt;
-     &lt;/widget&gt;
-     &lt;widget class=&quot;QWidget&quot; name=&quot;tab_2&quot; &gt;
-      &lt;attribute name=&quot;title&quot; &gt;
-       &lt;string&gt;Input&lt;/string&gt;
-      &lt;/attribute&gt;
-      &lt;layout class=&quot;QVBoxLayout&quot; &gt;
-       &lt;property name=&quot;margin&quot; &gt;
-        &lt;number&gt;9&lt;/number&gt;
-       &lt;/property&gt;
-       &lt;property name=&quot;spacing&quot; &gt;
-        &lt;number&gt;6&lt;/number&gt;
-       &lt;/property&gt;
-       &lt;item&gt;
-        &lt;widget class=&quot;QCheckBox&quot; name=&quot;checkBoxAutoIndex&quot; &gt;
-         &lt;property name=&quot;text&quot; &gt;
-          &lt;string&gt;Automatically index MPEG files&lt;/string&gt;
-         &lt;/property&gt;
-        &lt;/widget&gt;
-       &lt;/item&gt;
-       &lt;item&gt;
-        &lt;widget class=&quot;QCheckBox&quot; name=&quot;checkBoxNuv&quot; &gt;
-         &lt;property name=&quot;text&quot; &gt;
-          &lt;string&gt;Disable NuppelVideo a/v sync&lt;/string&gt;
-         &lt;/property&gt;
-        &lt;/widget&gt;
-       &lt;/item&gt;
-       &lt;item&gt;
-        &lt;widget class=&quot;QCheckBox&quot; name=&quot;checkBoxLavMpeg&quot; &gt;
-         &lt;property name=&quot;text&quot; &gt;
-          &lt;string&gt;Use lavcodec mpeg1/2 decoder&lt;/string&gt;
-         &lt;/property&gt;
-        &lt;/widget&gt;
-       &lt;/item&gt;
-       &lt;item&gt;
-        &lt;widget class=&quot;QPushButton&quot; name=&quot;pushButtonPP&quot; &gt;
-         &lt;property name=&quot;text&quot; &gt;
-          &lt;string&gt;Set default post processing&lt;/string&gt;
-         &lt;/property&gt;
-        &lt;/widget&gt;
-       &lt;/item&gt;
-      &lt;/layout&gt;
-     &lt;/widget&gt;
-     &lt;widget class=&quot;QWidget&quot; name=&quot;tab_3&quot; &gt;
-      &lt;attribute name=&quot;title&quot; &gt;
-       &lt;string&gt;Output&lt;/string&gt;
-      &lt;/attribute&gt;
-      &lt;layout class=&quot;QGridLayout&quot; &gt;
-       &lt;property name=&quot;margin&quot; &gt;
-        &lt;number&gt;9&lt;/number&gt;
-       &lt;/property&gt;
-       &lt;property name=&quot;spacing&quot; &gt;
-        &lt;number&gt;6&lt;/number&gt;
-       &lt;/property&gt;
-       &lt;item row=&quot;0&quot; column=&quot;0&quot; &gt;
-        &lt;layout class=&quot;QHBoxLayout&quot; &gt;
-         &lt;property name=&quot;margin&quot; &gt;
-          &lt;number&gt;0&lt;/number&gt;
-         &lt;/property&gt;
-         &lt;property name=&quot;spacing&quot; &gt;
-          &lt;number&gt;6&lt;/number&gt;
-         &lt;/property&gt;
-         &lt;item&gt;
-          &lt;widget class=&quot;QLabel&quot; name=&quot;label_6&quot; &gt;
-           &lt;property name=&quot;text&quot; &gt;
-            &lt;string&gt;MPEG auto split every (MB)&lt;/string&gt;
-           &lt;/property&gt;
-          &lt;/widget&gt;
-         &lt;/item&gt;
-         &lt;item&gt;
-          &lt;widget class=&quot;QSpinBox&quot; name=&quot;spinBoxSplit&quot; &gt;
-           &lt;property name=&quot;maximum&quot; &gt;
-            &lt;number&gt;4096&lt;/number&gt;
-           &lt;/property&gt;
-           &lt;property name=&quot;minimum&quot; &gt;
-            &lt;number&gt;1&lt;/number&gt;
-           &lt;/property&gt;
-          &lt;/widget&gt;
-         &lt;/item&gt;
-        &lt;/layout&gt;
-       &lt;/item&gt;
-       &lt;item row=&quot;3&quot; column=&quot;0&quot; &gt;
-        &lt;widget class=&quot;QCheckBox&quot; name=&quot;checkBoxDVDNonStd&quot; &gt;
-         &lt;property name=&quot;text&quot; &gt;
-          &lt;string&gt;Allow non standard audio frequency for DVD&lt;/string&gt;
-         &lt;/property&gt;
-        &lt;/widget&gt;
-       &lt;/item&gt;
-       &lt;item row=&quot;2&quot; column=&quot;0&quot; &gt;
-        &lt;widget class=&quot;QCheckBox&quot; name=&quot;checkBoxReuse&quot; &gt;
-         &lt;property name=&quot;text&quot; &gt;
-          &lt;string&gt;Reuse 2 pass log file&lt;/string&gt;
-         &lt;/property&gt;
-        &lt;/widget&gt;
-       &lt;/item&gt;
-       &lt;item row=&quot;1&quot; column=&quot;0&quot; &gt;
-        &lt;widget class=&quot;QCheckBox&quot; name=&quot;checkBoxopenDML&quot; &gt;
-         &lt;property name=&quot;text&quot; &gt;
-          &lt;string&gt;Use OpenDML (don't split large AVI files)&lt;/string&gt;
-         &lt;/property&gt;
-        &lt;/widget&gt;
-       &lt;/item&gt;
-      &lt;/layout&gt;
-     &lt;/widget&gt;
-     &lt;widget class=&quot;QWidget&quot; name=&quot;tab_4&quot; &gt;
-      &lt;attribute name=&quot;title&quot; &gt;
-       &lt;string&gt;Audio&lt;/string&gt;
-      &lt;/attribute&gt;
-      &lt;layout class=&quot;QGridLayout&quot; &gt;
-       &lt;property name=&quot;margin&quot; &gt;
-        &lt;number&gt;9&lt;/number&gt;
-       &lt;/property&gt;
-       &lt;property name=&quot;spacing&quot; &gt;
-        &lt;number&gt;6&lt;/number&gt;
-       &lt;/property&gt;
-       &lt;item row=&quot;0&quot; column=&quot;1&quot; &gt;
-        &lt;widget class=&quot;QComboBox&quot; name=&quot;comboBoxAudioDevice&quot; /&gt;
-       &lt;/item&gt;
-       &lt;item row=&quot;3&quot; column=&quot;0&quot; &gt;
-        &lt;widget class=&quot;QLabel&quot; name=&quot;label_5&quot; &gt;
-         &lt;property name=&quot;text&quot; &gt;
-          &lt;string&gt;Volume bar controls &lt;/string&gt;
-         &lt;/property&gt;
-        &lt;/widget&gt;
-       &lt;/item&gt;
-       &lt;item row=&quot;1&quot; column=&quot;1&quot; &gt;
-        &lt;widget class=&quot;QLineEdit&quot; name=&quot;lineEditAlsa&quot; /&gt;
-       &lt;/item&gt;
-       &lt;item row=&quot;0&quot; column=&quot;0&quot; &gt;
-        &lt;widget class=&quot;QLabel&quot; name=&quot;label_2&quot; &gt;
-         &lt;property name=&quot;text&quot; &gt;
-          &lt;string&gt;Audio output device&lt;/string&gt;
-         &lt;/property&gt;
-        &lt;/widget&gt;
-       &lt;/item&gt;
-       &lt;item row=&quot;1&quot; column=&quot;0&quot; &gt;
-        &lt;widget class=&quot;QLabel&quot; name=&quot;label_3&quot; &gt;
-         &lt;property name=&quot;text&quot; &gt;
-          &lt;string&gt;Alsa device&lt;/string&gt;
-         &lt;/property&gt;
-        &lt;/widget&gt;
-       &lt;/item&gt;
-       &lt;item row=&quot;2&quot; column=&quot;0&quot; &gt;
-        &lt;widget class=&quot;QLabel&quot; name=&quot;label_4&quot; &gt;
-         &lt;property name=&quot;text&quot; &gt;
-          &lt;string&gt;Local playback downmixing&lt;/string&gt;
-         &lt;/property&gt;
-        &lt;/widget&gt;
-       &lt;/item&gt;
-       &lt;item row=&quot;3&quot; column=&quot;1&quot; &gt;
-        &lt;layout class=&quot;QHBoxLayout&quot; &gt;
-         &lt;property name=&quot;margin&quot; &gt;
-          &lt;number&gt;0&lt;/number&gt;
-         &lt;/property&gt;
-         &lt;property name=&quot;spacing&quot; &gt;
-          &lt;number&gt;6&lt;/number&gt;
-         &lt;/property&gt;
-         &lt;item&gt;
-          &lt;widget class=&quot;QRadioButton&quot; name=&quot;radioButtonPCM&quot; &gt;
-           &lt;property name=&quot;text&quot; &gt;
-            &lt;string&gt;PCM&lt;/string&gt;
-           &lt;/property&gt;
-          &lt;/widget&gt;
-         &lt;/item&gt;
-         &lt;item&gt;
-          &lt;widget class=&quot;QRadioButton&quot; name=&quot;radioButtonMaster&quot; &gt;
-           &lt;property name=&quot;text&quot; &gt;
-            &lt;string&gt;Master&lt;/string&gt;
-           &lt;/property&gt;
-          &lt;/widget&gt;
-         &lt;/item&gt;
-        &lt;/layout&gt;
-       &lt;/item&gt;
-       &lt;item row=&quot;2&quot; column=&quot;1&quot; &gt;
-        &lt;widget class=&quot;QComboBox&quot; name=&quot;comboBoxDownmix&quot; /&gt;
-       &lt;/item&gt;
-      &lt;/layout&gt;
-     &lt;/widget&gt;
-     &lt;widget class=&quot;QWidget&quot; name=&quot;Video&quot; &gt;
-      &lt;attribute name=&quot;title&quot; &gt;
-       &lt;string&gt;Video&lt;/string&gt;
-      &lt;/attribute&gt;
-      &lt;layout class=&quot;QHBoxLayout&quot; &gt;
-       &lt;property name=&quot;margin&quot; &gt;
-        &lt;number&gt;9&lt;/number&gt;
-       &lt;/property&gt;
-       &lt;property name=&quot;spacing&quot; &gt;
-        &lt;number&gt;6&lt;/number&gt;
-       &lt;/property&gt;
-       &lt;item&gt;
-        &lt;widget class=&quot;QLabel&quot; name=&quot;label&quot; &gt;
-         &lt;property name=&quot;text&quot; &gt;
-          &lt;string&gt;Video output on playback&lt;/string&gt;
-         &lt;/property&gt;
-        &lt;/widget&gt;
-       &lt;/item&gt;
-       &lt;item&gt;
-        &lt;widget class=&quot;QComboBox&quot; name=&quot;comboBoxVideo&quot; &gt;
-         &lt;property name=&quot;sizeIncrement&quot; &gt;
-          &lt;size&gt;
-           &lt;width&gt;2&lt;/width&gt;
-           &lt;height&gt;0&lt;/height&gt;
-          &lt;/size&gt;
-         &lt;/property&gt;
-        &lt;/widget&gt;
-       &lt;/item&gt;
-      &lt;/layout&gt;
-     &lt;/widget&gt;
-     &lt;widget class=&quot;QWidget&quot; name=&quot;MultiThread&quot; &gt;
-      &lt;attribute name=&quot;title&quot; &gt;
-       &lt;string&gt;MultiThreading&lt;/string&gt;
-      &lt;/attribute&gt;
-      &lt;layout class=&quot;QHBoxLayout&quot; &gt;
-       &lt;property name=&quot;margin&quot; &gt;
-        &lt;number&gt;9&lt;/number&gt;
-       &lt;/property&gt;
-       &lt;property name=&quot;spacing&quot; &gt;
-        &lt;number&gt;6&lt;/number&gt;
-       &lt;/property&gt;
-       &lt;item&gt;
-        &lt;widget class=&quot;QLabel&quot; name=&quot;label_8&quot; &gt;
-         &lt;property name=&quot;text&quot; &gt;
-          &lt;string&gt;# Of threads (0 or 1 means no multithreading)&lt;/string&gt;
-         &lt;/property&gt;
-        &lt;/widget&gt;
-       &lt;/item&gt;
-       &lt;item&gt;
-        &lt;widget class=&quot;QSpinBox&quot; name=&quot;spinBox&quot; /&gt;
-       &lt;/item&gt;
-      &lt;/layout&gt;
-     &lt;/widget&gt;
-    &lt;/widget&gt;
-   &lt;/item&gt;
-  &lt;/layout&gt;
- &lt;/widget&gt;
- &lt;resources/&gt;
- &lt;connections&gt;
-  &lt;connection&gt;
-   &lt;sender&gt;buttonBox&lt;/sender&gt;
-   &lt;signal&gt;accepted()&lt;/signal&gt;
-   &lt;receiver&gt;Dialog&lt;/receiver&gt;
-   &lt;slot&gt;accept()&lt;/slot&gt;
-   &lt;hints&gt;
-    &lt;hint type=&quot;sourcelabel&quot; &gt;
-     &lt;x&gt;248&lt;/x&gt;
-     &lt;y&gt;254&lt;/y&gt;
-    &lt;/hint&gt;
-    &lt;hint type=&quot;destinationlabel&quot; &gt;
-     &lt;x&gt;157&lt;/x&gt;
-     &lt;y&gt;274&lt;/y&gt;
-    &lt;/hint&gt;
-   &lt;/hints&gt;
-  &lt;/connection&gt;
-  &lt;connection&gt;
-   &lt;sender&gt;buttonBox&lt;/sender&gt;
-   &lt;signal&gt;rejected()&lt;/signal&gt;
-   &lt;receiver&gt;Dialog&lt;/receiver&gt;
-   &lt;slot&gt;reject()&lt;/slot&gt;
-   &lt;hints&gt;
-    &lt;hint type=&quot;sourcelabel&quot; &gt;
-     &lt;x&gt;316&lt;/x&gt;
-     &lt;y&gt;260&lt;/y&gt;
-    &lt;/hint&gt;
-    &lt;hint type=&quot;destinationlabel&quot; &gt;
-     &lt;x&gt;286&lt;/x&gt;
-     &lt;y&gt;274&lt;/y&gt;
-    &lt;/hint&gt;
-   &lt;/hints&gt;
-  &lt;/connection&gt;
- &lt;/connections&gt;
-&lt;/ui&gt;

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_dialogFactory.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_dialogFactory.cpp	2007-03-23 18:33:23 UTC (rev 2897)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_dialogFactory.cpp	2007-03-24 17:37:03 UTC (rev 2898)
@@ -26,6 +26,7 @@
 #include &lt;QDialogButtonBox&gt;
 #include &lt;QDialogButtonBox&gt;
 #include &lt;QPushButton&gt;
+#include &lt;QTabWidget&gt;
 
 #include &quot;default.h&quot;
 #include &quot;ADM_commonUI/DIA_factory.h&quot;
@@ -42,7 +43,7 @@
  private:
 };
 
-
+static void insertTab(uint32_t index, diaElemTabs *tab, QTabWidget *wtab);
 factoryWindow::factoryWindow()     : QDialog()
  {
 //     ui.setupUi(this);
@@ -130,44 +131,57 @@
   dialog.setWindowTitle(title);
   
   QGridLayout layout(&amp;dialog);
-#if 0
-  /* First compute the size of our window */
-  int vsize=0;
-  for(int i=0;i&lt;nb;i++)
-  {
-    ADM_assert(elems[i]);
-     vsize+=elems[i]-&gt;getSize(); 
-  }
 
- int  v=0;
-  for(int i=0;i&lt;nb;i++)
-  {
-    ADM_assert(elems[i]);
-     elems[i]-&gt;setMe( (void *)&amp;dialog,&amp;layout,v); 
-     v+=elems[i]-&gt;getSize();
-    
-  }
+  // Add tabs
+  QTabWidget wtabs((QWidget *)&amp;dialog);
   // Add buttons
    QDialogButtonBox buttonBox((QWidget *)&amp;dialog);
     buttonBox.setStandardButtons(QDialogButtonBox::Ok
                             | QDialogButtonBox::Cancel);
      QObject::connect(&amp;buttonBox, SIGNAL(accepted()), &amp;dialog, SLOT(accept()));
      QObject::connect(&amp;buttonBox, SIGNAL(rejected()), &amp;dialog, SLOT(reject()));
-     layout.addWidget(&amp;buttonBox,vsize,0);
+     
+     for(int i=0;i&lt;nb;i++)
+     {
+        ADM_assert(tabs[i]);
+        insertTab(i,tabs[i],&amp;wtabs); 
+    
+      }
+     
+     layout.addWidget(&amp;wtabs,0,0);
+     layout.addWidget(&amp;buttonBox,1,0);
   // run
   dialog.setLayout(&amp;layout);
   if(dialog.exec()==QDialog::Accepted)
   {
-     for(int i=0;i&lt;nb;i++)
-     {
-        ADM_assert(elems[i]);
-        elems[i]-&gt;getMe(); 
-    
-      }
-    return 1;
+   
   }
-#endif
   return 0;
   
 }
+
+void insertTab(uint32_t index, diaElemTabs *tab, QTabWidget *wtab)
+{
+
+  QWidget *wid=new QWidget;
+  QGridLayout *layout=new QGridLayout(wid);
+  
+  /* First compute the size of our window */
+  int vsize=0;
+  for(int i=0;i&lt;tab-&gt;nbElems;i++)
+  {
+    ADM_assert(tab-&gt;dias[i]);
+     vsize+=tab-&gt;dias[i]-&gt;getSize(); 
+  }
+
+ int  v=0;
+  for(int i=0;i&lt;tab-&gt;nbElems;i++)
+  {
+     ADM_assert(tab-&gt;dias[i]);
+     tab-&gt;dias[i]-&gt;setMe( wid,layout,v); 
+     v+=tab-&gt;dias[i]-&gt;getSize();
+    
+  }
+  wtab-&gt;addTab(wid,tab-&gt;title);
+}
 //EOF


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000217.html">[Avidemux-svn-commit] r2897 - in	branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces:	ADM_NONE/ADM_dialogFactory ADM_QT4/ADM_dialog	ADM_QT4/ADM_dialogFactory ADM_QT4/ADM_gui ADM_commonUI
</A></li>
	<LI>Next message: <A HREF="000219.html">[Avidemux-svn-commit] r2899 - in	branches/avidemux_2.4_branch/avidemux: . ADM_editor	ADM_libraries/ADM_utilities ADM_userInterfaces/ADM_commonUI
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#218">[ date ]</a>
              <a href="thread.html#218">[ thread ]</a>
              <a href="subject.html#218">[ subject ]</a>
              <a href="author.html#218">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">More information about the Avidemux-svn-commit
mailing list</a><br>
</body></html>
