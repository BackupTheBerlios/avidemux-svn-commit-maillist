<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Avidemux-svn-commit] r4009 - in	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4:	ADM_dialogFactory ADM_filters
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/avidemux-svn-commit/2008-May/index.html" >
   <LINK REL="made" HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r4009%20-%20in%0A%09branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4%3A%0A%09ADM_dialogFactory%20ADM_filters&In-Reply-To=%3C200805020140.m421elNL026254%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001268.html">
   <LINK REL="Next"  HREF="001270.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Avidemux-svn-commit] r4009 - in	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4:	ADM_dialogFactory ADM_filters</H1>
    <B>gruntster at mail.berlios.de</B> 
    <A HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r4009%20-%20in%0A%09branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4%3A%0A%09ADM_dialogFactory%20ADM_filters&In-Reply-To=%3C200805020140.m421elNL026254%40sheep.berlios.de%3E"
       TITLE="[Avidemux-svn-commit] r4009 - in	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4:	ADM_dialogFactory ADM_filters">gruntster at mail.berlios.de
       </A><BR>
    <I>Fri May  2 03:40:47 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001268.html">[Avidemux-svn-commit] r4008 - in	branches/avidemux_2.5_branch_gruntster/avidemux:	ADM_coreImage/include ADM_coreUI/include ADM_filter	ADM_videoFilter plugins/ADM_videoFilters	plugins/ADM_videoFilters/BlendRemover	plugins/ADM_videoFilters/Chroma	plugins/ADM_videoFilters/DgBob plugins/ADM_videoFilters/Fade	plugins/ADM_videoFilters/ResampleFps	plugins/ADM_videoFilters/Reverse	plugins/ADM_videoFilters/TemporalCleaner	plugins/ADM_videoFilters/Yadif
</A></li>
        <LI>Next message: <A HREF="001270.html">[Avidemux-svn-commit] r4010 - in	branches/avidemux_2.5_branch_gruntster:	avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters	avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui	avidemux/ADM_userInterfaces/ADM_QT4/ADM_ocr cmake
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1269">[ date ]</a>
              <a href="thread.html#1269">[ thread ]</a>
              <a href="subject.html#1269">[ subject ]</a>
              <a href="author.html#1269">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: gruntster
Date: 2008-05-02 03:40:36 +0200 (Fri, 02 May 2008)
New Revision: 4009

Added:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_bitrate.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_button.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_dialogFactory.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_filesel.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_menu.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_slider.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_threadCount.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_toggle.h
Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_bar.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_float.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_frame.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_hex.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_integer.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_matrix.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_notch.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_readOnlyText.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_bitrate.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_button.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_dialogFactory.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_filesel.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_menu.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_slider.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_threadCount.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_toggle.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/CMakeLists.txt
Log:
[CMake] generate Qt files with CMake (part 2)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/CMakeLists.txt	2008-05-01 18:21:27 UTC (rev 4008)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/CMakeLists.txt	2008-05-02 01:40:36 UTC (rev 4009)
@@ -1,18 +1,17 @@
 SET(ADM_LIB ADM_dialogFactoryQt4)
 
+QT4_WRAP_CPP(${ADM_LIB}_source
+	T_bitrate.h  T_button.h  T_dialogFactory.h  T_filesel.h  T_menu.h  T_slider.h
+	T_threadCount.h  T_toggle.h)
+
 SET(${ADM_LIB}_T
-	bitrate  
-	dialogFactory  
-	button
-	filesel        
-	menu
-	toggle
-	threadCount
-	slider)
+	T_bitrate.cpp  T_button.cpp  T_dialogFactory.cpp  T_filesel.cpp  T_menu.cpp
+	T_slider.cpp  T_threadCount.cpp  T_toggle.cpp)
 
 SET(${ADM_LIB}_SRCS
-	FAC_bar.cpp    FAC_frame.cpp  FAC_integer.cpp  FAC_notch.cpp         
+	FAC_bar.cpp    FAC_frame.cpp  FAC_integer.cpp  FAC_notch.cpp
 	FAC_float.cpp  FAC_hex.cpp    FAC_readOnlyText.cpp
-	FAC_matrix.cpp)
+	FAC_matrix.cpp  ${${ADM_LIB}_source}  ${${ADM_LIB}_T})
 
-INCLUDE(adm_qt4)
\ No newline at end of file
+INCLUDE_DIRECTORIES(${CMAKE_CURRENT_BINARY_DIR})
+ADD_ADM_LIB_QT4_TARGET(${ADM_LIB} ${${ADM_LIB}_SRCS})
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_bar.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_bar.cpp	2008-05-01 18:21:27 UTC (rev 4008)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_bar.cpp	2008-05-02 01:40:36 UTC (rev 4009)
@@ -15,23 +15,13 @@
 
 #include &quot;config.h&quot;
 
+#include &lt;QtGui/QGridLayout&gt;
+#include &lt;QtGui/QLabel&gt;
+#include &lt;QtGui/QProgressBar&gt;
 
-#include &lt;string.h&gt;
-#include &lt;stdio.h&gt;
-#include &lt;stdlib.h&gt;
-#include &lt;math.h&gt;
-
-#include &lt;QDialog&gt;
-#include &lt;QSpinBox&gt;
-#include &lt;QGridLayout&gt;
-#include &lt;QLabel&gt;
-#include &lt;QProgressBar&gt;
-
 #include &quot;ADM_default.h&quot;
 #include &quot;DIA_factory.h&quot;
-#include &quot;ADM_assert.h&quot;
 
-
 extern const char *shortkey(const char *);
 
 namespace ADM_Qt4Factory

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_float.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_float.cpp	2008-05-01 18:21:27 UTC (rev 4008)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_float.cpp	2008-05-02 01:40:36 UTC (rev 4009)
@@ -15,20 +15,12 @@
 
 #include &quot;config.h&quot;
 
+#include &lt;QtGui/QGridLayout&gt;
+#include &lt;QtGui/QLabel&gt;
+#include &lt;QtGui/QSpinBox&gt;
 
-#include &lt;string.h&gt;
-#include &lt;stdio.h&gt;
-#include &lt;stdlib.h&gt;
-#include &lt;math.h&gt;
-
-#include &lt;QDialog&gt;
-#include &lt;QSpinBox&gt;
-#include &lt;QGridLayout&gt;
-#include &lt;QLabel&gt;
-
 #include &quot;ADM_default.h&quot;
 #include &quot;DIA_factory.h&quot;
-#include &quot;ADM_assert.h&quot;
 
 extern const char *shortkey(const char *);
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_frame.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_frame.cpp	2008-05-01 18:21:27 UTC (rev 4008)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_frame.cpp	2008-05-02 01:40:36 UTC (rev 4009)
@@ -15,21 +15,11 @@
 
 #include &quot;config.h&quot;
 
+#include &lt;QtGui/QGridLayout&gt;
+#include &lt;QtGui/QLabel&gt;
 
-#include &lt;string.h&gt;
-#include &lt;stdio.h&gt;
-#include &lt;stdlib.h&gt;
-#include &lt;math.h&gt;
-
-#include &lt;QDialog&gt;
-#include &lt;QMessageBox&gt;
-#include &lt;QGridLayout&gt;
-#include &lt;QCheckBox&gt;
-#include &lt;QLabel&gt;
-
 #include &quot;ADM_default.h&quot;
 #include &quot;DIA_factory.h&quot;
-#include &quot;ADM_assert.h&quot;
 
 extern const char *shortkey(const char *);
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_hex.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_hex.cpp	2008-05-01 18:21:27 UTC (rev 4008)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_hex.cpp	2008-05-02 01:40:36 UTC (rev 4009)
@@ -15,20 +15,9 @@
 
 #include &quot;config.h&quot;
 
-
-#include &lt;string.h&gt;
-#include &lt;stdio.h&gt;
-#include &lt;stdlib.h&gt;
-#include &lt;math.h&gt;
-
-#include &lt;QDialog&gt;
-#include &lt;QMessageBox&gt;
-#include &lt;QGridLayout&gt;
-#include &lt;QCheckBox&gt;
-
 #include &quot;ADM_default.h&quot;
 #include &quot;DIA_factory.h&quot;
-#include &quot;ADM_assert.h&quot;
+
 namespace ADM_qt4Factory
 {
 class diaElemHex : public diaElem

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_integer.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_integer.cpp	2008-05-01 18:21:27 UTC (rev 4008)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_integer.cpp	2008-05-02 01:40:36 UTC (rev 4009)
@@ -15,23 +15,13 @@
 
 #include &quot;config.h&quot;
 
+#include &lt;QtGui/QSpinBox&gt;
+#include &lt;QtGui/QGridLayout&gt;
+#include &lt;QtGui/QLabel&gt;
 
-#include &lt;string.h&gt;
-#include &lt;stdio.h&gt;
-#include &lt;stdlib.h&gt;
-#include &lt;math.h&gt;
-
-#include &lt;QDialog&gt;
-#include &lt;QSpinBox&gt;
-#include &lt;QGridLayout&gt;
-#include &lt;QLabel&gt;
-#include &lt;QSlider&gt;
-
 #include &quot;ADM_default.h&quot;
 #include &quot;DIA_factory.h&quot;
-#include &quot;ADM_assert.h&quot;
 
-
 extern const char *shortkey(const char *);
 
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_matrix.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_matrix.cpp	2008-05-01 18:21:27 UTC (rev 4008)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_matrix.cpp	2008-05-02 01:40:36 UTC (rev 4009)
@@ -15,20 +15,12 @@
 
 #include &quot;config.h&quot;
 
+#include &lt;QtGui/QSpinBox&gt;
+#include &lt;QtGui/QGridLayout&gt;
+#include &lt;QtGui/QLabel&gt;
 
-#include &lt;string.h&gt;
-#include &lt;stdio.h&gt;
-#include &lt;stdlib.h&gt;
-#include &lt;math.h&gt;
-
-#include &lt;QDialog&gt;
-#include &lt;QSpinBox&gt;
-#include &lt;QGridLayout&gt;
-#include &lt;QLabel&gt;
-
 #include &quot;ADM_default.h&quot;
 #include &quot;DIA_factory.h&quot;
-#include &quot;ADM_assert.h&quot;
 
 extern const char *shortkey(const char *);
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_notch.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_notch.cpp	2008-05-01 18:21:27 UTC (rev 4008)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_notch.cpp	2008-05-02 01:40:36 UTC (rev 4009)
@@ -15,20 +15,11 @@
 
 #include &quot;config.h&quot;
 
+#include &lt;QtGui/QGridLayout&gt;
+#include &lt;QtGui/QCheckBox&gt;
 
-#include &lt;string.h&gt;
-#include &lt;stdio.h&gt;
-#include &lt;stdlib.h&gt;
-#include &lt;math.h&gt;
-
-#include &lt;QDialog&gt;
-#include &lt;QMessageBox&gt;
-#include &lt;QGridLayout&gt;
-#include &lt;QCheckBox&gt;
-
 #include &quot;ADM_default.h&quot;
 #include &quot;DIA_factory.h&quot;
-#include &quot;ADM_assert.h&quot;
 
 extern const char *shortkey(const char *);
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_readOnlyText.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_readOnlyText.cpp	2008-05-01 18:21:27 UTC (rev 4008)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_readOnlyText.cpp	2008-05-02 01:40:36 UTC (rev 4009)
@@ -15,23 +15,13 @@
 
 #include &quot;config.h&quot;
 
+#include &lt;QtGui/QGridLayout&gt;
+#include &lt;QtGui/QLabel&gt;
+#include &lt;QtGui/QLineEdit&gt;
 
-#include &lt;string.h&gt;
-#include &lt;stdio.h&gt;
-#include &lt;stdlib.h&gt;
-#include &lt;math.h&gt;
-
-#include &lt;QDialog&gt;
-#include &lt;QSpinBox&gt;
-#include &lt;QGridLayout&gt;
-#include &lt;QLabel&gt;
-#include &lt;QLineEdit&gt;
-
 #include &quot;ADM_default.h&quot;
 #include &quot;DIA_factory.h&quot;
-#include &quot;ADM_assert.h&quot;
 
-
 extern const char *shortkey(const char *);
 
 namespace ADM_qt4Factory

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_bitrate.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_bitrate.cpp	2008-05-01 18:21:27 UTC (rev 4008)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_bitrate.cpp	2008-05-02 01:40:36 UTC (rev 4009)
@@ -14,23 +14,9 @@
  ***************************************************************************/
 
 #include &quot;config.h&quot;
-
-
-#include &lt;string.h&gt;
-#include &lt;stdio.h&gt;
-#include &lt;stdlib.h&gt;
-#include &lt;math.h&gt;
-
-#include &lt;QDialog&gt;
-#include &lt;QMessageBox&gt;
-#include &lt;QGridLayout&gt;
-#include &lt;QSpinBox&gt;
-#include &lt;QComboBox&gt;
-#include &lt;QLabel&gt;
-
+#include &quot;T_bitrate.h&quot;
 #include &quot;ADM_default.h&quot;
 #include &quot;DIA_factory.h&quot;
-#include &quot;ADM_assert.h&quot;
 
 extern const char *shortkey(const char *);
 
@@ -38,9 +24,7 @@
 {
 class diaElemBitrate : public diaElemBitrateBase
 {
-protected:
 public:
-  
   diaElemBitrate(COMPRES_PARAMS *p,const char *toggleTitle,const char *tip=NULL);
   virtual ~diaElemBitrate() ;
   void setMe(void *dialog, void *opaque,uint32_t line);
@@ -50,74 +34,51 @@
   void updateMe(void);
 };
 
-class  ADM_Qbitrate : public QWidget
+ADM_Qbitrate::ADM_Qbitrate(QWidget *z,COMPRES_PARAMS *p,uint32_t mq,QGridLayout *layout,int line) : QWidget(z) 
 {
-     Q_OBJECT
-    
-  signals:
-        
-        
-   public slots:
-        void comboChanged(int i);
-  public:
-        QSpinBox        *box;
-        QComboBox       *combo;
-        QLabel          *text1;
-        QLabel          *text2;
-        COMPRES_PARAMS  *compress;
-        uint32_t        maxQ;
-        ADM_Qbitrate(QWidget *z,COMPRES_PARAMS *p,uint32_t mq,QGridLayout *layout,int line) : QWidget(z) 
-        {
-          
-           compress=p;
-           combo=new QComboBox(z);
-           
-           maxQ=mq;
-           int index=0,set=-1;
+	compress=p;
+	combo=new QComboBox(z);
+
+	maxQ=mq;
+	int index=0,set=-1;
 #define add(x,z,y) if(compress-&gt;capabilities &amp; ADM_ENC_CAP_##x) {combo-&gt;addItem(QString::fromUtf8(y));\
-						if(p-&gt;mode==COMPRESS_##z) set=index;\
-						index++;}
-  
-  add(CBR,CBR,QT_TR_NOOP(&quot;Constant Bitrate&quot;));
-  add(CQ,CQ,QT_TR_NOOP(&quot;Constant Quality&quot;));
-  add(SAME,SAME,QT_TR_NOOP(&quot;Same Quantizer as Input&quot;));
-  add(AQ,AQ,QT_TR_NOOP(&quot;Average Quantizer&quot;));
-  add(2PASS,2PASS,QT_TR_NOOP(&quot;Two Pass - Video Size&quot;));
-  add(2PASS_BR,2PASS_BITRATE,QT_TR_NOOP(&quot;Two Pass - Average Bitrate&quot;));
-  
-           combo-&gt;show();
-           
-           text1=new QLabel( QString::fromUtf8(QT_TR_NOOP(&quot;Encoding mode&quot;)),z);
-          text1-&gt;setBuddy(combo);
-          text1-&gt;show();
-          
-           box=new QSpinBox(z);
-           box-&gt;show();
-           
-           text2=new QLabel( QString::fromUtf8(QT_TR_NOOP(&quot;Bitrate&quot;)),z);
-           text2-&gt;setBuddy(combo);
-          
-          
-          layout-&gt;addWidget(text1,line,0);
-          layout-&gt;addWidget(combo,line,1);
-          
-          layout-&gt;addWidget(text2,line+1,0);
-          layout-&gt;addWidget(box,line+1,1);
-       
-       
-          if(set!=-1) 
-          {
-        	  	combo-&gt;setCurrentIndex(set);
-        	  	comboChanged(set);
-          }
-          QObject::connect(combo, SIGNAL(currentIndexChanged(int )), this, SLOT(comboChanged(int )));
-          
-          
-        }
-        virtual ~ADM_Qbitrate() ;
-        void readBack(void);
-};
+	if(p-&gt;mode==COMPRESS_##z) set=index;\
+	index++;}
 
+	add(CBR,CBR,QT_TR_NOOP(&quot;Constant Bitrate&quot;));
+	add(CQ,CQ,QT_TR_NOOP(&quot;Constant Quality&quot;));
+	add(SAME,SAME,QT_TR_NOOP(&quot;Same Quantizer as Input&quot;));
+	add(AQ,AQ,QT_TR_NOOP(&quot;Average Quantizer&quot;));
+	add(2PASS,2PASS,QT_TR_NOOP(&quot;Two Pass - Video Size&quot;));
+	add(2PASS_BR,2PASS_BITRATE,QT_TR_NOOP(&quot;Two Pass - Average Bitrate&quot;));
+
+	combo-&gt;show();
+
+	text1=new QLabel( QString::fromUtf8(QT_TR_NOOP(&quot;Encoding mode&quot;)),z);
+	text1-&gt;setBuddy(combo);
+	text1-&gt;show();
+
+	box=new QSpinBox(z);
+	box-&gt;show();
+
+	text2=new QLabel( QString::fromUtf8(QT_TR_NOOP(&quot;Bitrate&quot;)),z);
+	text2-&gt;setBuddy(combo);
+
+	layout-&gt;addWidget(text1,line,0);
+	layout-&gt;addWidget(combo,line,1);
+
+	layout-&gt;addWidget(text2,line+1,0);
+	layout-&gt;addWidget(box,line+1,1);
+
+	if(set!=-1) 
+	{
+		combo-&gt;setCurrentIndex(set);
+		comboChanged(set);
+	}
+
+	QObject::connect(combo, SIGNAL(currentIndexChanged(int )), this, SLOT(comboChanged(int )));
+}
+
 /**
  * 	\fn 	readPullDown
  * \brief 	Convert the raw read of the combox into the actual compression mode

Added: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_bitrate.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_bitrate.h	2008-05-01 18:21:27 UTC (rev 4008)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_bitrate.h	2008-05-02 01:40:36 UTC (rev 4009)
@@ -0,0 +1,34 @@
+#ifndef T_bitrate_h
+#define T_bitrate_h
+
+#include &lt;QtGui/QComboBox&gt;
+#include &lt;QtGui/QGridLayout&gt;
+#include &lt;QtGui/QLabel&gt;
+#include &lt;QtGui/QSpinBox&gt;
+
+#include &quot;ADM_inttype.h&quot;
+#include &quot;ADM_encoder/ADM_vidEncode.hxx&quot;
+
+namespace ADM_Qt4Factory
+{
+	class  ADM_Qbitrate : public QWidget
+	{
+		Q_OBJECT
+
+	public slots:
+		void comboChanged(int i);
+
+	public:
+		QSpinBox        *box;
+		QComboBox       *combo;
+		QLabel          *text1;
+		QLabel          *text2;
+		COMPRES_PARAMS  *compress;
+		uint32_t        maxQ;
+
+		ADM_Qbitrate(QWidget *z, COMPRES_PARAMS *p, uint32_t mq, QGridLayout *layout, int line);
+		virtual ~ADM_Qbitrate();
+		void readBack(void);
+	};
+}
+#endif	// T_bitrate_h

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_button.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_button.cpp	2008-05-01 18:21:27 UTC (rev 4008)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_button.cpp	2008-05-02 01:40:36 UTC (rev 4009)
@@ -14,23 +14,8 @@
  ***************************************************************************/
 
 #include &quot;config.h&quot;
-
-
-#include &lt;string.h&gt;
-#include &lt;stdio.h&gt;
-#include &lt;stdlib.h&gt;
-#include &lt;math.h&gt;
-
-#include &lt;QDialog&gt;
-#include &lt;QMessageBox&gt;
-#include &lt;QGridLayout&gt;
-#include &lt;QPushButton&gt;
-#include &lt;QComboBox&gt;
-#include &lt;QLabel&gt;
-
+#include &quot;T_button.h&quot;
 #include &quot;ADM_default.h&quot;
-#include &quot;DIA_factory.h&quot;
-#include &quot;ADM_assert.h&quot;
 
 extern const char *shortkey(const char *);
 namespace ADM_Qt4Factory
@@ -48,35 +33,16 @@
   void      enable(uint32_t onoff) ;
 };
 
-
-class  ADM_Qbutton : public QWidget
+ADM_Qbutton::ADM_Qbutton(QWidget *z,QGridLayout *layout,const char *blah,int line,ADM_FAC_CALLBACK *cb, void *cookie) : QWidget(z) 
 {
-     Q_OBJECT
-    
-  signals:
-        
-        
-   public slots:
-        void clicked(bool i);
-  protected :
-          ADM_FAC_CALLBACK *_cb;
-          void *_cookie;
-  public:
-         QPushButton *button;
-        
-        ADM_Qbutton(QWidget *z,QGridLayout *layout,const char *blah,int line,ADM_FAC_CALLBACK *cb, void *cookie) : QWidget(z) 
-        {
-          
-           _cb=cb;
-           _cookie=cookie;
-           button=new QPushButton(QString::fromUtf8(blah),z);
-           button-&gt;show();
-           layout-&gt;addWidget(button,line,0);
-           QObject::connect(button, SIGNAL(clicked(bool)), this, SLOT(clicked(bool )));
-        }
-        virtual ~ADM_Qbutton() ;
-        
-};
+	_cb=cb;
+	_cookie=cookie;
+	button=new QPushButton(QString::fromUtf8(blah),z);
+	button-&gt;show();
+	layout-&gt;addWidget(button,line,0);
+	QObject::connect(button, SIGNAL(clicked(bool)), this, SLOT(clicked(bool )));
+}
+
 void ADM_Qbutton::clicked(bool i)
 {
     _cb(_cookie);

Added: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_button.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_button.h	2008-05-01 18:21:27 UTC (rev 4008)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_button.h	2008-05-02 01:40:36 UTC (rev 4009)
@@ -0,0 +1,31 @@
+#ifndef T_button_h
+#define T_button_h
+
+#include &lt;QtGui/QGridLayout&gt;
+#include &lt;QtGui/QPushButton&gt;
+#include &lt;QtGui/QWidget&gt;
+
+#include &quot;ADM_inttype.h&quot;
+#include &quot;DIA_factory.h&quot;
+
+namespace ADM_Qt4Factory
+{
+	class ADM_Qbutton : public QWidget
+	{
+		Q_OBJECT
+
+	public slots:
+		void clicked(bool i);
+
+	protected :
+		ADM_FAC_CALLBACK *_cb;
+		void *_cookie;
+
+	public:
+		QPushButton *button;
+
+		ADM_Qbutton(QWidget *z, QGridLayout *layout, const char *blah, int line, ADM_FAC_CALLBACK *cb, void *cookie);
+		virtual ~ADM_Qbutton();
+	};
+}
+#endif	// T_button_h

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_dialogFactory.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_dialogFactory.cpp	2008-05-01 18:21:27 UTC (rev 4008)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_dialogFactory.cpp	2008-05-02 01:40:36 UTC (rev 4009)
@@ -12,40 +12,18 @@
  *                                                                         *
  ***************************************************************************/
 
-#include &quot;config.h&quot;
+#include &lt;QtGui/QDialogButtonBox&gt;
+#include &lt;QtGui/QGridLayout&gt;
+#include &lt;QtGui/QSpacerItem&gt;
+#include &lt;QtGui/QTabWidget&gt;
 
-
-#include &lt;string.h&gt;
-#include &lt;stdio.h&gt;
-#include &lt;stdlib.h&gt;
-#include &lt;math.h&gt;
-
-#include &lt;QDialog&gt;
-#include &lt;QMessageBox&gt;
-#include &lt;QGridLayout&gt;
-#include &lt;QDialogButtonBox&gt;
-#include &lt;QDialogButtonBox&gt;
-#include &lt;QPushButton&gt;
-#include &lt;QTabWidget&gt;
-
+#include &quot;config.h&quot;
+#include &quot;T_dialogFactory.h&quot;
 #include &quot;ADM_default.h&quot;
 #include &quot;DIA_factory.h&quot;
 #include &quot;DIA_coreToolkit.h&quot;
 #include &quot;DIA_coreUI_internal.h&quot;
 
-#include &quot;ADM_assert.h&quot;
-
-class factoryWindow : public QDialog
-{
-     Q_OBJECT
-
- public:
-     factoryWindow();
- public slots:
- private slots:
- private:
-};
-
 static void insertTab(uint32_t index, diaElemTabs *tab, QTabWidget *wtab);
 factoryWindow::factoryWindow()     : QDialog()
  {

Added: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_dialogFactory.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_dialogFactory.h	2008-05-01 18:21:27 UTC (rev 4008)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_dialogFactory.h	2008-05-02 01:40:36 UTC (rev 4009)
@@ -0,0 +1,13 @@
+#ifndef T_dialogFactory_h
+#define T_dialogFactory_h
+
+#include &lt;QtGui/QDialog&gt;
+
+class factoryWindow : public QDialog
+{
+	Q_OBJECT
+
+public:
+	factoryWindow();
+};
+#endif	// T_dialogFactory_h

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_filesel.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_filesel.cpp	2008-05-01 18:21:27 UTC (rev 4008)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_filesel.cpp	2008-05-02 01:40:36 UTC (rev 4009)
@@ -14,36 +14,16 @@
  ***************************************************************************/
 
 #include &quot;config.h&quot;
-
-
-#include &lt;string.h&gt;
-#include &lt;stdio.h&gt;
-#include &lt;stdlib.h&gt;
-#include &lt;math.h&gt;
-
-#include &lt;QDialog&gt;
-#include &lt;QMessageBox&gt;
-#include &lt;QGridLayout&gt;
-#include &lt;QLineEdit&gt;
-#include &lt;QLabel&gt;
-#include &lt;QDialogButtonBox&gt;
-
+#include &quot;T_filesel.h&quot;
 #include &quot;ADM_default.h&quot;
 #include &quot;prefs.h&quot;
 #include &quot;DIA_factory.h&quot;
-#include &quot;ADM_assert.h&quot;
 #include &quot;DIA_fileSel.h&quot;
+
 extern const char *shortkey(const char *);
 void GUI_FileSelRead(const char *label, char * * name);
 #define MAX_SEL 2040
 
-typedef enum 
-{
-    ADM_FILEMODE_DIR,
-    ADM_FILEMODE_READ,
-    ADM_FILEMODE_WRITE
-}ADM_fileMode;
-
 namespace ADM_Qt4Factory
 {
 class diaElemFile : public diaElemFileBase
@@ -76,101 +56,83 @@
   void   enable(uint32_t onoff);
 };
 
+void ADM_Qfilesel::buttonPressed(QAbstractButton *s)
+{ 
+	uint8_t r=0;
+	char buffer[MAX_SEL+1],*txt;
+	txt=&quot;&quot;;
+	switch(fileMode)
+	{
+		case ADM_FILEMODE_READ:
+			r=FileSel_SelectRead(selectDesc,buffer,MAX_SEL,txt);
+			break;
+		case ADM_FILEMODE_WRITE:
+			if (defaultSuffix)
+			{
+				const char * lastfilename;
+				if (prefs-&gt;get(LASTFILES_FILE1,(ADM_filename **)&amp;lastfilename))
+				{
+					strcpy (buffer, lastfilename);
+					char * cptr = buffer + strlen (buffer);
+					while (cptr &gt; buffer)
+					{
+						if (*cptr == '.')
+						{
+							strcpy (cptr + 1, defaultSuffix);
+							txt = buffer;
+							printf (&quot;Default output filename is %s based on &quot;
+								&quot;%s + %s\n&quot;,
+								txt, lastfilename, defaultSuffix);
+							break;
+						}
+						--cptr;
+					}
+				}
+			}
+			r=FileSel_SelectWrite(selectDesc,buffer,MAX_SEL,txt);
+			break;
 
-class  ADM_Qfilesel : public QWidget
-{
-     Q_OBJECT
-    
-  signals:
-        
-        
-   public slots:
-        void buttonPressed(QAbstractButton *s)
-        { 
-          uint8_t r=0;
-          char buffer[MAX_SEL+1],*txt;
-          txt=&quot;&quot;;
-          switch(fileMode)
-          {
-            case ADM_FILEMODE_READ:
-                r=FileSel_SelectRead(selectDesc,buffer,MAX_SEL,txt);
-                break;
-            case ADM_FILEMODE_WRITE:
-                if (defaultSuffix)
-                {
-                    const char * lastfilename;
-                    if (prefs-&gt;get(LASTFILES_FILE1,(ADM_filename **)&amp;lastfilename))
-                    {
-                        strcpy (buffer, lastfilename);
-                        char * cptr = buffer + strlen (buffer);
-                        while (cptr &gt; buffer)
-                        {
-                            if (*cptr == '.')
-                            {
-                                strcpy (cptr + 1, defaultSuffix);
-                                txt = buffer;
-                                printf (&quot;Default output filename is %s based on &quot;
-                                        &quot;%s + %s\n&quot;,
-                                        txt, lastfilename, defaultSuffix);
-                                break;
-                            }
-                            --cptr;
-                        }
-                    }
-                }
-                r=FileSel_SelectWrite(selectDesc,buffer,MAX_SEL,txt);
-                break;
+		case ADM_FILEMODE_DIR:
+			r=FileSel_SelectDir(selectDesc,buffer,MAX_SEL,txt);
+			break;
+		default:
+			ADM_assert(0);
+	}
+	if(r)
+	{
+		edit-&gt;setText(QString::fromUtf8(buffer));
+	}
+}
 
-            case ADM_FILEMODE_DIR:
-                r=FileSel_SelectDir(selectDesc,buffer,MAX_SEL,txt);
-                break;
-            default: ADM_assert(0);
-          }
-          if(r)
-          {
-			  edit-&gt;setText(QString::fromUtf8(buffer));
-          }
-        }
-  public:
-        QLineEdit *edit;
-        QDialogButtonBox *button;
-        QLabel *text;
-        ADM_fileMode fileMode;
-        const char * defaultSuffix;
-		const char* selectDesc;
+ADM_Qfilesel::ADM_Qfilesel(QWidget *z,const char *title,const char *entry,QGridLayout *layout,int line, ADM_fileMode mode, const char * defaultSuffix, const char* selectDesc) : 
+	QWidget(z), defaultSuffix (defaultSuffix), selectDesc (selectDesc)
+{          
+	fileMode=mode;
+	edit=new QLineEdit(QString::fromUtf8(entry),z);
 
-        ADM_Qfilesel(QWidget *z,const char *title,const char *entry,QGridLayout *layout,int line, ADM_fileMode mode, const char * defaultSuffix, const char* selectDesc)
-            : QWidget(z),
-              defaultSuffix (defaultSuffix),
-			  selectDesc (selectDesc)
-        {          
-          fileMode=mode;
-		  edit=new QLineEdit(QString::fromUtf8(entry),z);
-          
-          edit-&gt;show();
-          
-          button=new QDialogButtonBox(QDialogButtonBox::Open,Qt::Horizontal,z);
-          button-&gt;show();
+	edit-&gt;show();
 
-		  text=new QLabel(QString::fromUtf8(title),z);
-          text-&gt;setBuddy(edit);
-          layout-&gt;addWidget(text,line,0);
-          layout-&gt;addWidget(edit,line,1);
-          layout-&gt;addWidget(button,line,2);
-          //QObject::connect(&amp;button, SIGNAL(accepted()), NULL, SLOT(accept())); 
-          connect( button,SIGNAL(clicked(QAbstractButton  *)),this,SLOT(buttonPressed(QAbstractButton  *)));
-        }
-        ~ADM_Qfilesel() 
-            {
+	button=new QDialogButtonBox(QDialogButtonBox::Open,Qt::Horizontal,z);
+	button-&gt;show();
+
+	text=new QLabel(QString::fromUtf8(title),z);
+	text-&gt;setBuddy(edit);
+	layout-&gt;addWidget(text,line,0);
+	layout-&gt;addWidget(edit,line,1);
+	layout-&gt;addWidget(button,line,2);
+	//QObject::connect(&amp;button, SIGNAL(accepted()), NULL, SLOT(accept())); 
+	connect( button,SIGNAL(clicked(QAbstractButton  *)),this,SLOT(buttonPressed(QAbstractButton  *)));
+}
+
+ADM_Qfilesel::~ADM_Qfilesel() 
+{
 #if 1 //Memleak or autoclean ?
-                if(edit) delete edit;
-                if(button) delete button;
-                if(text) delete text;
+	if(edit) delete edit;
+	if(button) delete button;
+	if(text) delete text;
 #endif
-            };
 };
 
-
 diaElemFile::diaElemFile(uint32_t writemode,char **filename,const char *toggleTitle,
                          const char *defaultSuffix,const char *selectFileDesc)
   : diaElemFileBase()

Added: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_filesel.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_filesel.h	2008-05-01 18:21:27 UTC (rev 4008)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_filesel.h	2008-05-02 01:40:36 UTC (rev 4009)
@@ -0,0 +1,39 @@
+#ifndef T_filesel_h
+#define T_filesel_h
+
+#include &lt;QtGui/QAbstractButton&gt;
+#include &lt;QtGui/QDialogButtonBox&gt;
+#include &lt;QtGui/QGridLayout&gt;
+#include &lt;QtGui/QLabel&gt;
+#include &lt;QtGui/QLineEdit&gt;
+#include &lt;QtGui/QWidget&gt;
+
+namespace ADM_Qt4Factory
+{
+	typedef enum 
+	{
+		ADM_FILEMODE_DIR,
+		ADM_FILEMODE_READ,
+		ADM_FILEMODE_WRITE
+	} ADM_fileMode;
+
+	class ADM_Qfilesel : public QWidget
+	{
+		Q_OBJECT
+
+	public slots:
+		void buttonPressed(QAbstractButton *s);
+
+	public:
+		QLineEdit *edit;
+		QDialogButtonBox *button;
+		QLabel *text;
+		ADM_fileMode fileMode;
+		const char *defaultSuffix;
+		const char *selectDesc;
+
+		ADM_Qfilesel(QWidget *z, const char *title, const char *entry, QGridLayout *layout, int line, ADM_fileMode mode, const char * defaultSuffix, const char* selectDesc);
+		~ADM_Qfilesel();
+	};
+}
+#endif	// T_filesel_h

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_menu.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_menu.cpp	2008-05-01 18:21:27 UTC (rev 4008)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_menu.cpp	2008-05-02 01:40:36 UTC (rev 4009)
@@ -14,54 +14,22 @@
  ***************************************************************************/
 
 #include &quot;config.h&quot;
-
-
-#include &lt;string.h&gt;
-#include &lt;stdio.h&gt;
-#include &lt;stdlib.h&gt;
-#include &lt;math.h&gt;
-
-#include &lt;QDialog&gt;
-#include &lt;QComboBox&gt;
-#include &lt;QLabel&gt;
-#include &lt;QGridLayout&gt;
-
+#include &quot;T_menu.h&quot;
 #include &quot;ADM_default.h&quot;
-#include &quot;DIA_factory.h&quot;
-#include &quot;ADM_assert.h&quot;
 
-#include &lt;QCheckBox&gt;
+#include &lt;QtGui/QGridLayout&gt;
+#include &lt;QtGui/QLabel&gt;
 
-
 extern const char *shortkey(const char *);
 
 namespace ADM_qt4Factory
 {
-class diaElemMenuDynamic : public diaElemMenuDynamicBase
-{
-protected:
-	
-
-public:
-  diaElemMenuDynamic(uint32_t *intValue,const char *itle, uint32_t nb, 
-               diaMenuEntryDynamic **menu,const char *tip=NULL);
-  
-  virtual   ~diaElemMenuDynamic() ;
-  void      setMe(void *dialog, void *opaque,uint32_t line);
-  void      getMe(void);
-  virtual uint8_t   link(diaMenuEntryDynamic *entry,uint32_t onoff,diaElem *w);
-  virtual void      updateMe(void);
-  virtual void      enable(uint32_t onoff) ;
-  virtual void      finalize(void);
-};
-//**********************
 class diaElemMenu : public diaElemMenuBase
 {
 protected:
-	
-
 	diaElemMenuDynamic  *dyna;
 	diaMenuEntryDynamic  **menus;	
+
 public:
   diaElemMenu(uint32_t *intValue,const char *itle, uint32_t nb, 
                const diaMenuEntry *menu,const char *tip=NULL);
@@ -77,34 +45,21 @@
 
 /**/
 
-  class ADM_QComboBox : public QComboBox
+ADM_QComboBox::ADM_QComboBox(QWidget *root,diaElemMenuDynamic *menu) : QComboBox(root)
 {
-      Q_OBJECT
-    
-  signals:
-        
-        
-   public slots:
-        void changed(int i)
-        {
-          _menu-&gt;updateMe();
-        }
-  protected:
-        diaElemMenuDynamic *_menu;
-  public:
-  ADM_QComboBox(QWidget *root,diaElemMenuDynamic *menu) : QComboBox(root)
-  {
-    _menu=menu;
-  }
-  void connectMe(void)
-  {
-    QObject::connect(this, SIGNAL(currentIndexChanged(int)), this, SLOT(changed(int )));
-  }
-  
-};
+	_menu=menu;
+}
 
-/**/
+void ADM_QComboBox::changed(int i)
+{
+	_menu-&gt;updateMe();
+}
 
+void ADM_QComboBox::connectMe(void)
+{
+	QObject::connect(this, SIGNAL(currentIndexChanged(int)), this, SLOT(changed(int )));
+}
+
 diaElemMenu::diaElemMenu(uint32_t *intValue,const char *itle, uint32_t nb, 
                const diaMenuEntry *menu,const char *tip)
   : diaElemMenuBase()

Added: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_menu.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_menu.h	2008-05-01 18:21:27 UTC (rev 4008)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_menu.h	2008-05-02 01:40:36 UTC (rev 4009)
@@ -0,0 +1,40 @@
+#ifndef T_menu_h
+#define T_menu_h
+
+#include &lt;QtGui/QComboBox&gt;
+
+#include &quot;ADM_inttype.h&quot;
+#include &quot;DIA_factory.h&quot;
+
+namespace ADM_qt4Factory
+{
+	class diaElemMenuDynamic : public diaElemMenuDynamicBase
+	{
+	public:
+		diaElemMenuDynamic(uint32_t *intValue, const char *itle, uint32_t nb, diaMenuEntryDynamic **menu, const char *tip = NULL);
+
+		virtual   ~diaElemMenuDynamic() ;
+		void      setMe(void *dialog, void *opaque,uint32_t line);
+		void      getMe(void);
+		virtual uint8_t   link(diaMenuEntryDynamic *entry,uint32_t onoff,diaElem *w);
+		virtual void      updateMe(void);
+		virtual void      enable(uint32_t onoff) ;
+		virtual void      finalize(void);
+	};
+
+	class ADM_QComboBox : public QComboBox
+	{
+		Q_OBJECT
+
+	public slots:
+		void changed(int i);
+
+	protected:
+		diaElemMenuDynamic *_menu;
+
+	public:
+		ADM_QComboBox(QWidget *root,diaElemMenuDynamic *menu);
+		void connectMe(void);
+	};
+}
+#endif	// T_menu_h

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_slider.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_slider.cpp	2008-05-01 18:21:27 UTC (rev 4008)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_slider.cpp	2008-05-02 01:40:36 UTC (rev 4009)
@@ -14,32 +14,18 @@
  ***************************************************************************/
 
 #include &quot;config.h&quot;
-
-
-#include &lt;string.h&gt;
-#include &lt;stdio.h&gt;
-#include &lt;stdlib.h&gt;
-#include &lt;math.h&gt;
-
-#include &lt;QDialog&gt;
-#include &lt;QSpinBox&gt;
-#include &lt;QGridLayout&gt;
-#include &lt;QLabel&gt;
-#include &lt;QSlider&gt;
-
+#include &quot;T_slider.h&quot;
 #include &quot;ADM_default.h&quot;
 #include &quot;DIA_factory.h&quot;
-#include &quot;ADM_assert.h&quot;
 
+#include &lt;QtGui/QGridLayout&gt;
+#include &lt;QtGui/QHBoxLayout&gt;
+#include &lt;QtGui/QLabel&gt;
 
 extern const char *shortkey(const char *);
 
-
-
 namespace ADM_qt4Factory
 {
-
-
 class diaElemUSlider : public diaElemSliderBase
 {
   protected:
@@ -68,30 +54,11 @@
   
 };
 
-
-//********************************************************************
-
-class SpinSlider : public QWidget
+int SpinSlider::value()
 {
-    Q_OBJECT
+	return spinner-&gt;value();
+}
 
-public:
-    SpinSlider (QWidget * parent = 0);
-    int value() const { return spinner-&gt;value(); }
-
-signals:
-    void valueChanged (int value);
-
-public slots:
-    void setValue (int value);
-    void setMinimum (int value);
-    void setMaximum (int value);
-
-private:
-    QSlider * slider;
-    QSpinBox * spinner;
-};
-
 SpinSlider::SpinSlider (QWidget * parent)
     : QWidget (parent)
 {

Added: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_slider.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_slider.h	2008-05-01 18:21:27 UTC (rev 4008)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_slider.h	2008-05-02 01:40:36 UTC (rev 4009)
@@ -0,0 +1,31 @@
+#ifndef T_slider_h
+#define T_slider_h
+
+#include &lt;QtGui/QSlider&gt;
+#include &lt;QtGui/QSpinBox&gt;
+#include &lt;QtGui/QWidget&gt;
+
+namespace ADM_qt4Factory
+{
+	class SpinSlider : public QWidget
+	{
+		Q_OBJECT
+
+	public:
+		SpinSlider (QWidget *parent = 0);
+		int value();
+
+	signals:
+		void valueChanged (int value);
+
+	public slots:
+		void setValue (int value);
+		void setMinimum (int value);
+		void setMaximum (int value);
+
+	private:
+		QSlider * slider;
+		QSpinBox * spinner;
+	};
+}
+#endif	// T_slider_h

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_threadCount.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_threadCount.cpp	2008-05-01 18:21:27 UTC (rev 4008)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_threadCount.cpp	2008-05-02 01:40:36 UTC (rev 4009)
@@ -14,19 +14,12 @@
 ***************************************************************************/
 
 #include &quot;config.h&quot;
-
-#include &lt;QGridLayout&gt;
-#include &lt;QLabel&gt;
-#include &lt;QRadioButton&gt;
-#include &lt;QButtonGroup&gt;
-#include &lt;QSpinBox&gt;
-
+#include &quot;T_threadCount.h&quot;
 #include &quot;ADM_default.h&quot;
 #include &quot;DIA_factory.h&quot;
 
 extern const char* shortkey(const char*);
 
-
 namespace ADM_qt4Factory
 {
 
@@ -41,87 +34,69 @@
   void getMe(void);
 };
 
-class ADM_QthreadCount : public QWidget
+void ADM_QthreadCount::radioGroupChanged(QAbstractButton *s)
 {
-	Q_OBJECT
+	spinBox-&gt;setEnabled(radiobutton3-&gt;isChecked());
+}
 
-signals:
+ADM_QthreadCount::ADM_QthreadCount(QWidget *widget, const char *title, uint32_t value, QGridLayout *layout, int line) : QWidget(widget) 
+{
+	radiobutton1 = new QRadioButton(QString::fromUtf8(QT_TR_NOOP(&quot;Disabled&quot;)), widget);
+	radiobutton2 = new QRadioButton(QString::fromUtf8(QT_TR_NOOP(&quot;Auto-detect&quot;)), widget);
+	radiobutton3 = new QRadioButton(QString::fromUtf8(QT_TR_NOOP(&quot;Custom&quot;)), widget);
 
-public slots:
+	buttonGroup = new QButtonGroup;
+	buttonGroup-&gt;addButton(radiobutton1);
+	buttonGroup-&gt;addButton(radiobutton2);
+	buttonGroup-&gt;addButton(radiobutton3);
 
-	void radioGroupChanged(QAbstractButton *s)
-	{
-		spinBox-&gt;setEnabled(radiobutton3-&gt;isChecked());
-	}
+	spinBox = new QSpinBox();
+	spinBox-&gt;setRange(2, 32);
 
-public:
+	text = new QLabel(QString::fromUtf8(title), widget);
+	text-&gt;setBuddy(radiobutton1);
 
-	QLabel *text;
-	QRadioButton *radiobutton1;
-	QRadioButton *radiobutton2;
-	QRadioButton *radiobutton3;
-	QButtonGroup *buttonGroup;
-	QSpinBox *spinBox;
+	layout-&gt;addWidget(text, line, 0);
+	layout-&gt;addWidget(radiobutton1, line, 1);
+	layout-&gt;addWidget(radiobutton2, line, 2);
+	layout-&gt;addWidget(radiobutton3, line, 3);
+	layout-&gt;addWidget(spinBox, line, 4);
 
-	ADM_QthreadCount(QWidget *widget, const char *title, uint32_t value, QGridLayout *layout, int line) : QWidget(widget) 
-	{
-		radiobutton1 = new QRadioButton(QString::fromUtf8(QT_TR_NOOP(&quot;Disabled&quot;)), widget);
-		radiobutton2 = new QRadioButton(QString::fromUtf8(QT_TR_NOOP(&quot;Auto-detect&quot;)), widget);
-		radiobutton3 = new QRadioButton(QString::fromUtf8(QT_TR_NOOP(&quot;Custom&quot;)), widget);
+	QObject::connect(buttonGroup, SIGNAL(buttonClicked(QAbstractButton*)), this, SLOT(radioGroupChanged(QAbstractButton*)));
 
-		buttonGroup = new QButtonGroup;
-		buttonGroup-&gt;addButton(radiobutton1);
-		buttonGroup-&gt;addButton(radiobutton2);
-		buttonGroup-&gt;addButton(radiobutton3);
+	spinBox-&gt;setEnabled(value &gt; 1);
 
-		spinBox = new QSpinBox();
-		spinBox-&gt;setRange(2, 32);
-
-		text = new QLabel(QString::fromUtf8(title), widget);
-		text-&gt;setBuddy(radiobutton1);
-
-		layout-&gt;addWidget(text, line, 0);
-		layout-&gt;addWidget(radiobutton1, line, 1);
-		layout-&gt;addWidget(radiobutton2, line, 2);
-		layout-&gt;addWidget(radiobutton3, line, 3);
-		layout-&gt;addWidget(spinBox, line, 4);
-
-		QObject::connect(buttonGroup, SIGNAL(buttonClicked(QAbstractButton*)), this, SLOT(radioGroupChanged(QAbstractButton*)));
-
-		spinBox-&gt;setEnabled(value &gt; 1);
-
-		if (value == 0)
-			radiobutton2-&gt;setChecked(true);
-		else if (value == 1)
-			radiobutton1-&gt;setChecked(true);
-		else
-		{
-			radiobutton3-&gt;setChecked(true);
-			spinBox-&gt;setValue(value);
-		}
+	if (value == 0)
+		radiobutton2-&gt;setChecked(true);
+	else if (value == 1)
+		radiobutton1-&gt;setChecked(true);
+	else
+	{
+		radiobutton3-&gt;setChecked(true);
+		spinBox-&gt;setValue(value);
 	}
+}
 
-	~ADM_QthreadCount() 
-	{
-		if (buttonGroup)
-			delete buttonGroup;
+ADM_QthreadCount::~ADM_QthreadCount() 
+{
+	if (buttonGroup)
+		delete buttonGroup;
 
-		if (radiobutton1)
-			delete radiobutton1;
+	if (radiobutton1)
+		delete radiobutton1;
 
-		if (radiobutton2)
-			delete radiobutton2;
+	if (radiobutton2)
+		delete radiobutton2;
 
-		if (radiobutton3)
-			delete radiobutton3;
+	if (radiobutton3)
+		delete radiobutton3;
 
-		if (spinBox)
-			delete spinBox;
+	if (spinBox)
+		delete spinBox;
 
-		if (text)
-			delete text;
-	}
-};
+	if (text)
+		delete text;
+}
 
 diaElemThreadCount::diaElemThreadCount(uint32_t *value, const char *title, const char *tip) : diaElem(ELEM_THREAD_COUNT)
 {

Added: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_threadCount.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_threadCount.h	2008-05-01 18:21:27 UTC (rev 4008)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_threadCount.h	2008-05-02 01:40:36 UTC (rev 4009)
@@ -0,0 +1,32 @@
+#ifndef T_threadCount_h
+#define T_threadCount_h
+
+#include &lt;QtGui/QButtonGroup&gt;
+#include &lt;QtGui/QGridLayout&gt;
+#include &lt;QtGui/QLabel&gt;
+#include &lt;QtGui/QRadioButton&gt;
+#include &lt;QtGui/QSpinBox&gt;
+#include &lt;QtGui/QWidget&gt;
+
+namespace ADM_qt4Factory
+{
+	class ADM_QthreadCount : public QWidget
+	{
+		Q_OBJECT
+
+	public slots:
+		void radioGroupChanged(QAbstractButton *s);
+
+	public:
+		QLabel *text;
+		QRadioButton *radiobutton1;
+		QRadioButton *radiobutton2;
+		QRadioButton *radiobutton3;
+		QButtonGroup *buttonGroup;
+		QSpinBox *spinBox;
+
+		ADM_QthreadCount(QWidget *widget, const char *title, uint32_t value, QGridLayout *layout, int line);
+		~ADM_QthreadCount();
+	};
+}
+#endif	// T_threadCount_h

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_toggle.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_toggle.cpp	2008-05-01 18:21:27 UTC (rev 4008)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_toggle.cpp	2008-05-02 01:40:36 UTC (rev 4009)
@@ -13,27 +13,16 @@
  *                                                                         *
  ***************************************************************************/
 
-#include &quot;config.h&quot;
+#include &lt;QtGui/QGridLayout&gt;
+#include &lt;QtGui/QSpinBox&gt;
 
-
-#include &lt;string.h&gt;
-#include &lt;stdio.h&gt;
-#include &lt;stdlib.h&gt;
-#include &lt;math.h&gt;
-
-#include &lt;QDialog&gt;
-#include &lt;QMessageBox&gt;
-#include &lt;QGridLayout&gt;
-#include &lt;QCheckBox&gt;
-#include &lt;QSpinBox&gt;
-
+#include &quot;config.h&quot;
+#include &quot;T_toggle.h&quot;
 #include &quot;ADM_default.h&quot;
 #include &quot;DIA_factory.h&quot;
-#include &quot;ADM_assert.h&quot;
 
 extern const char *shortkey(const char *);
 
-
 namespace ADM_qt4Factory
 {
 class diaElemToggle : public diaElemToggleBase
@@ -85,54 +74,32 @@
   void      enable(uint32_t onoff) ;
 };
 
+void ADM_QCheckBox::changed(int i)
+{
+	switch(_type)
+	{
+		case TT_TOGGLE:
+			((diaElemToggle *)_toggle)-&gt;updateMe();break;
+		case TT_TOGGLE_UINT:
+			((diaElemToggleUint *)_toggle)-&gt;updateMe();break;
+		case TT_TOGGLE_INT:
+			((diaElemToggleInt *)_toggle)-&gt;updateMe();break;
+		default:
+			ADM_assert(0);
+	}
+}
 
+ADM_QCheckBox::ADM_QCheckBox(const QString &amp; str,QWidget *root,void *toggle,TOG_TYPE type) : QCheckBox(str,root)
+{
+	_toggle=toggle;
+	_type=type;
+}
 
-typedef enum
+void ADM_QCheckBox::connectMe(void)
 {
-    TT_TOGGLE,TT_TOGGLE_UINT,TT_TOGGLE_INT
-  
-}TOG_TYPE;
-class ADM_QCheckBox : public QCheckBox
-{
-      Q_OBJECT
-    
-  signals:
-  protected:
-        void     *_toggle;
-        TOG_TYPE _type;
-        
-   public slots:
-        void changed(int i)
-        {
-          switch(_type)
-          {
-            case TT_TOGGLE:
-                              ((diaElemToggle *)_toggle)-&gt;updateMe();break;
-            case TT_TOGGLE_UINT:
-                              ((diaElemToggleUint *)_toggle)-&gt;updateMe();break;
-            case TT_TOGGLE_INT:
-                              ((diaElemToggleInt *)_toggle)-&gt;updateMe();break;
-            default:
-                  ADM_assert(0);
-          }
-        }
-  public:
-  ADM_QCheckBox(const QString &amp; str,QWidget *root,void *toggle,TOG_TYPE type) : QCheckBox(str,root)
-  {
-    _toggle=toggle;
-    _type=type;
-  }
-  void connectMe(void)
-  {
-    QObject::connect(this, SIGNAL(stateChanged(int)), this, SLOT(changed(int )));
-  }
-  
-};
+	QObject::connect(this, SIGNAL(stateChanged(int)), this, SLOT(changed(int )));
+}
 
-/**/
-
-
-
 diaElemToggle::diaElemToggle(uint32_t *toggleValue,const char *toggleTitle, const char *tip)
   : diaElemToggleBase()
 {

Added: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_toggle.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_toggle.h	2008-05-01 18:21:27 UTC (rev 4008)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_toggle.h	2008-05-02 01:40:36 UTC (rev 4009)
@@ -0,0 +1,32 @@
+#ifndef T_toggle_h
+#define T_toggle_h
+
+#include &lt;QtGui/QCheckBox&gt;
+#include &lt;QtGui/QWidget&gt;
+
+namespace ADM_qt4Factory
+{
+	typedef enum
+	{
+		TT_TOGGLE,
+		TT_TOGGLE_UINT,
+		TT_TOGGLE_INT
+	} TOG_TYPE;
+
+	class ADM_QCheckBox : public QCheckBox
+	{
+		Q_OBJECT
+
+	protected:
+		void     *_toggle;
+		TOG_TYPE _type;
+
+	public slots:
+		void changed(int i);
+
+	public:
+		ADM_QCheckBox(const QString &amp; str, QWidget *root, void *toggle, TOG_TYPE type);
+		void connectMe(void);
+	};
+}
+#endif	// T_toggle_h

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/CMakeLists.txt	2008-05-01 18:21:27 UTC (rev 4008)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/CMakeLists.txt	2008-05-02 01:40:36 UTC (rev 4009)
@@ -4,6 +4,6 @@
 
 SET(${ADM_LIB}_Q mainfilter)
 
-Q_RCC(filter)
+INCLUDE(adm_qt4)
 
-INCLUDE(adm_qt4)
\ No newline at end of file
+Q_RCC(filter)
\ No newline at end of file


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001268.html">[Avidemux-svn-commit] r4008 - in	branches/avidemux_2.5_branch_gruntster/avidemux:	ADM_coreImage/include ADM_coreUI/include ADM_filter	ADM_videoFilter plugins/ADM_videoFilters	plugins/ADM_videoFilters/BlendRemover	plugins/ADM_videoFilters/Chroma	plugins/ADM_videoFilters/DgBob plugins/ADM_videoFilters/Fade	plugins/ADM_videoFilters/ResampleFps	plugins/ADM_videoFilters/Reverse	plugins/ADM_videoFilters/TemporalCleaner	plugins/ADM_videoFilters/Yadif
</A></li>
	<LI>Next message: <A HREF="001270.html">[Avidemux-svn-commit] r4010 - in	branches/avidemux_2.5_branch_gruntster:	avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters	avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui	avidemux/ADM_userInterfaces/ADM_QT4/ADM_ocr cmake
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1269">[ date ]</a>
              <a href="thread.html#1269">[ thread ]</a>
              <a href="subject.html#1269">[ subject ]</a>
              <a href="author.html#1269">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">More information about the Avidemux-svn-commit
mailing list</a><br>
</body></html>
