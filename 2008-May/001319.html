<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Avidemux-svn-commit] r4062 - in	branches/avidemux_2.5_branch_gruntster: avidemux	avidemux/ADM_UIs/ADM_CLI avidemux/ADM_UIs/ADM_CLI/src	avidemux/ADM_UIs/ADM_GTK/include avidemux/ADM_UIs/ADM_GTK/src	avidemux/ADM_UIs/ADM_QT4 avidemux/ADM_UIs/ADM_QT4/include	avidemux/ADM_UIs/ADM_QT4/src avidemux/ADM_coreImage/include	avidemux/ADM_coreImage/src avidemux/ADM_coreUI/include	avidemux/ADM_filter avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog	avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog	avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog	avidemux/ADM_userInterfaces/ADM_QT4/ADM_ocr	avidemux/ADM_userInterfaces/ADM_commonUI	avidemux/ADM_userInterfaces/ADM_render	avidemux/plugins/ADM_videoFilters/AvisynthResize	avidemux/plugins/ADM_videoFilters/CNR2	avidemux/plugins/ADM_videoFilters/ChromaShift	avidemux/plugins/ADM_videoFilters/Equalizer	avidemux/plugins/ADM_videoFilters/MPDelogo	avidemux/plugins/ADM_videoFilters/MplayerResize	avidemux/plugins/ADM_videoFilters/colorYUV cmake
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/avidemux-svn-commit/2008-May/index.html" >
   <LINK REL="made" HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r4062%20-%20in%0A%09branches/avidemux_2.5_branch_gruntster%3A%20avidemux%0A%09avidemux/ADM_UIs/ADM_CLI%20avidemux/ADM_UIs/ADM_CLI/src%0A%09avidemux/ADM_UIs/ADM_GTK/include%20avidemux/ADM_UIs/ADM_GTK/src%0A%09avidemux/ADM_UIs/ADM_QT4%20avidemux/ADM_UIs/ADM_QT4/include%0A%09avidemux/ADM_UIs/ADM_QT4/src%20avidemux/ADM_coreImage/include%0A%09avidemux/ADM_coreImage/src%20avidemux/ADM_coreUI/include%0A%09avidemux/ADM_filter%20avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog%0A%09avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog%0A%09avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog%0A%09avidemux/ADM_userInterfaces/ADM_QT4/ADM_ocr%0A%09avidemux/ADM_userInterfaces/ADM_commonUI%0A%09avidemux/ADM_userInterfaces/ADM_render%0A%09avidemux/plugins/ADM_videoFilters/AvisynthResize%0A%09avidemux/plugins/ADM_videoFilters/CNR2%0A%09avidemux/plugins/ADM_videoFilters/ChromaShift%0A%09avidemux/plugins/ADM_videoFilters/Equalizer%0A%09avidemux/plugins/ADM_videoFilters/MPDelogo%0A%09avidemux/plugins/ADM_videoFilters/MplayerResize%0A%09avidemux/plugins/ADM_videoFilters/colorYUV%20cmake&In-Reply-To=%3C200805241916.m4OJGOS3002644%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001318.html">
   <LINK REL="Next"  HREF="001320.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Avidemux-svn-commit] r4062 - in	branches/avidemux_2.5_branch_gruntster: avidemux	avidemux/ADM_UIs/ADM_CLI avidemux/ADM_UIs/ADM_CLI/src	avidemux/ADM_UIs/ADM_GTK/include avidemux/ADM_UIs/ADM_GTK/src	avidemux/ADM_UIs/ADM_QT4 avidemux/ADM_UIs/ADM_QT4/include	avidemux/ADM_UIs/ADM_QT4/src avidemux/ADM_coreImage/include	avidemux/ADM_coreImage/src avidemux/ADM_coreUI/include	avidemux/ADM_filter avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog	avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog	avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog	avidemux/ADM_userInterfaces/ADM_QT4/ADM_ocr	avidemux/ADM_userInterfaces/ADM_commonUI	avidemux/ADM_userInterfaces/ADM_render	avidemux/plugins/ADM_videoFilters/AvisynthResize	avidemux/plugins/ADM_videoFilters/CNR2	avidemux/plugins/ADM_videoFilters/ChromaShift	avidemux/plugins/ADM_videoFilters/Equalizer	avidemux/plugins/ADM_videoFilters/MPDelogo	avidemux/plugins/ADM_videoFilters/MplayerResize	avidemux/plugins/ADM_videoFilters/colorYUV cmake</H1>
    <B>mean at BerliOS</B> 
    <A HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r4062%20-%20in%0A%09branches/avidemux_2.5_branch_gruntster%3A%20avidemux%0A%09avidemux/ADM_UIs/ADM_CLI%20avidemux/ADM_UIs/ADM_CLI/src%0A%09avidemux/ADM_UIs/ADM_GTK/include%20avidemux/ADM_UIs/ADM_GTK/src%0A%09avidemux/ADM_UIs/ADM_QT4%20avidemux/ADM_UIs/ADM_QT4/include%0A%09avidemux/ADM_UIs/ADM_QT4/src%20avidemux/ADM_coreImage/include%0A%09avidemux/ADM_coreImage/src%20avidemux/ADM_coreUI/include%0A%09avidemux/ADM_filter%20avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog%0A%09avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog%0A%09avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog%0A%09avidemux/ADM_userInterfaces/ADM_QT4/ADM_ocr%0A%09avidemux/ADM_userInterfaces/ADM_commonUI%0A%09avidemux/ADM_userInterfaces/ADM_render%0A%09avidemux/plugins/ADM_videoFilters/AvisynthResize%0A%09avidemux/plugins/ADM_videoFilters/CNR2%0A%09avidemux/plugins/ADM_videoFilters/ChromaShift%0A%09avidemux/plugins/ADM_videoFilters/Equalizer%0A%09avidemux/plugins/ADM_videoFilters/MPDelogo%0A%09avidemux/plugins/ADM_videoFilters/MplayerResize%0A%09avidemux/plugins/ADM_videoFilters/colorYUV%20cmake&In-Reply-To=%3C200805241916.m4OJGOS3002644%40sheep.berlios.de%3E"
       TITLE="[Avidemux-svn-commit] r4062 - in	branches/avidemux_2.5_branch_gruntster: avidemux	avidemux/ADM_UIs/ADM_CLI avidemux/ADM_UIs/ADM_CLI/src	avidemux/ADM_UIs/ADM_GTK/include avidemux/ADM_UIs/ADM_GTK/src	avidemux/ADM_UIs/ADM_QT4 avidemux/ADM_UIs/ADM_QT4/include	avidemux/ADM_UIs/ADM_QT4/src avidemux/ADM_coreImage/include	avidemux/ADM_coreImage/src avidemux/ADM_coreUI/include	avidemux/ADM_filter avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog	avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog	avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog	avidemux/ADM_userInterfaces/ADM_QT4/ADM_ocr	avidemux/ADM_userInterfaces/ADM_commonUI	avidemux/ADM_userInterfaces/ADM_render	avidemux/plugins/ADM_videoFilters/AvisynthResize	avidemux/plugins/ADM_videoFilters/CNR2	avidemux/plugins/ADM_videoFilters/ChromaShift	avidemux/plugins/ADM_videoFilters/Equalizer	avidemux/plugins/ADM_videoFilters/MPDelogo	avidemux/plugins/ADM_videoFilters/MplayerResize	avidemux/plugins/ADM_videoFilters/colorYUV cmake">mean at mail.berlios.de
       </A><BR>
    <I>Sat May 24 21:16:24 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001318.html">[Avidemux-svn-commit] r4061 - in	branches/avidemux_2.5_branch_gruntster: .	avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264
</A></li>
        <LI>Next message: <A HREF="001320.html">[Avidemux-svn-commit] r4063 - in	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_CLI:	. include
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1319">[ date ]</a>
              <a href="thread.html#1319">[ thread ]</a>
              <a href="subject.html#1319">[ subject ]</a>
              <a href="author.html#1319">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: mean
Date: 2008-05-24 21:16:19 +0200 (Sat, 24 May 2008)
New Revision: 4062

Added:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_CLI/src/
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_CLI/src/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_CLI/src/DIA_dialogFactory.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_CLI/src/DIA_flyDialogCli.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_CLI/src/FAC_toggle.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/include/DIA_flyDialogGtk.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/DIA_flyDialogGtk.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/include/
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/include/DIA_flyDialogQt4.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/include/DIA_flyDialogQt4_template.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/FAC_bar.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/FAC_float.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/FAC_frame.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/FAC_hex.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/FAC_integer.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/FAC_matrix.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/FAC_notch.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/FAC_readOnlyText.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_bitrate.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_bitrate.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_button.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_button.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_dialogFactory.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_dialogFactory.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_filesel.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_filesel.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_flyDialogQt4.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_menu.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_menu.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_slider.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_slider.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_threadCount.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_threadCount.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_toggle.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_toggle.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/include/DIA_flyDialog.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/DIA_flyDialog.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_preview.h
Removed:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_CLI/DIA_dialogFactory.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_CLI/FAC_toggle.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/FAC_bar.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/FAC_float.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/FAC_frame.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/FAC_hex.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/FAC_integer.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/FAC_matrix.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/FAC_notch.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/FAC_readOnlyText.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_bitrate.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_bitrate.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_button.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_button.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_dialogFactory.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_dialogFactory.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_filesel.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_filesel.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_menu.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_menu.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_slider.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_slider.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_threadCount.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_threadCount.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_toggle.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_toggle.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_flyDialog.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_flyDialog.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/ADM_flyTemplate.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_flyDialogQt4.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_flyDialog.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyDialog.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyDialog.h
Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_CLI/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/include/ADM_videoFilterDynamic.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_uiTypes.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_preview.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_asharp.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_contrast.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_eq2.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_hue.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_srt.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_ocr/Q_ocr.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_render/GUI_render.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_render/GUI_render.h
   branches/avidemux_2.5_branch_gruntster/avidemux/gtk_gui.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/gui_navigate.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/guiplay.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoFilters/AvisynthResize/ADM_vidResize.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoFilters/CNR2/ADM_vidCNR2.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoFilters/ChromaShift/ADM_vidChromaShift.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoFilters/Equalizer/ADM_vidEqualizer.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoFilters/MPDelogo/ADM_vidMPdelogo.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoFilters/MplayerResize/ADM_vidMPLResize.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoFilters/colorYUV/ADM_vidColorYuv.cpp
   branches/avidemux_2.5_branch_gruntster/cmake/vf_plugin_gtk.cmake
   branches/avidemux_2.5_branch_gruntster/cmake/vf_plugin_qt4.cmake
Log:
[Merge] flyDialog


Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_CLI/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_CLI/CMakeLists.txt	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_CLI/CMakeLists.txt	2008-05-24 19:16:19 UTC (rev 4062)
@@ -1,10 +1,3 @@
-SET(ADM_LIB ADM_UICli)
+ADD_SUBDIRECTORY(src)
 
-SET(${ADM_LIB}_SRCS 
-	DIA_dialogFactory.cpp  
-        FAC_toggle.cpp
-)
 
-ADD_LIBRARY(${ADM_LIB}  SHARED ${${ADM_LIB}_SRCS})
-
-INSTALL(TARGETS ${ADM_LIB} RUNTIME DESTINATION ${BIN_DIR} LIBRARY DESTINATION lib)

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_CLI/DIA_dialogFactory.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_CLI/DIA_dialogFactory.cpp	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_CLI/DIA_dialogFactory.cpp	2008-05-24 19:16:19 UTC (rev 4062)
@@ -1,45 +0,0 @@
-/***************************************************************************
-  DIA_dialogFactory.cpp
-  (C) 2006 Mean <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">Fixounet at free.fr</A> 
-***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-
-#include &lt;string.h&gt;
-#include &lt;stdio.h&gt;
-
-#include &quot;ADM_default.h&quot;
-
-#include &quot;DIA_factory.h&quot;
-#include &quot;ADM_assert.h&quot;
-
-/**
-    \fn diaFactoryRun(const char *title,uint32_t nb,diaElem **elems)
-    \brief  Run a dialog made of nb elems, each elem being described in the **elems
-    @return 0 on failure, 1 on success
-*/
-
-uint8_t diaFactoryRun(const char *title,uint32_t nb,diaElem **elems)
-{
-  return 0;
-  
-}
-uint8_t diaFactoryRunTabs(const char *title,uint32_t nb,diaElemTabs **tabs)
-{
-  return 0; 
-}
-void InitFactory(void)
-{
-	
-}
-
-
-//EOF

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_CLI/FAC_toggle.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_CLI/FAC_toggle.cpp	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_CLI/FAC_toggle.cpp	2008-05-24 19:16:19 UTC (rev 4062)
@@ -1,479 +0,0 @@
-/***************************************************************************
-  FAC_toggle.cpp
-  Handle dialog factory element : Toggle
-  (C) 2006 Mean <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">Fixounet at free.fr</A> 
-***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-
-
-#include &lt;string.h&gt;
-#include &lt;stdio.h&gt;
-#include &lt;math.h&gt;
-
-#include &quot;ADM_default.h&quot;
-
-#include &quot;DIA_factory.h&quot;
-#include &quot;ADM_assert.h&quot;
-
-
-
-
-diaElemToggle::diaElemToggle(uint32_t *toggleValue,const char *toggleTitle, const char *tip)
-  : diaElemToggleBase()
-{
-}
-
-diaElemToggle::~diaElemToggle()
-{
-  
-}
-void diaElemToggle::setMe(void *dialog, void *opaque,uint32_t l)
-{
-}
-void diaElemToggle::getMe(void)
-{
-}
-void diaElemToggle::enable(uint32_t onoff) {}
-void   diaElemToggle::finalize(void)
-{
-  updateMe(); 
-}
-void   diaElemToggle::updateMe(void)
-{
-
-}
-
-//******************************************************
-diaElemInteger::diaElemInteger(int32_t *intValue,const char *toggleTitle, int32_t min, int32_t max,const char *tip)
-  : diaElem(ELEM_TOGGLE)
-{
- }
-
-diaElemInteger::~diaElemInteger()
-{
-  
-}
-void diaElemInteger::setMe(void *dialog, void *opaque,uint32_t line)
-{
- 
-}
-void diaElemInteger::getMe(void)
-{
- 
-}
-uint8_t   diaElemToggle::link(uint32_t onoff,diaElem *w)
-{
-  
-}
-void diaElemInteger::enable(uint32_t onoff) {}
-//******************************************************
-diaElemUInteger::diaElemUInteger(uint32_t *intValue,const char *toggleTitle, uint32_t min, uint32_t max,const char *tip)
-  : diaElem(ELEM_TOGGLE)
-{
- }
-
-diaElemUInteger::~diaElemUInteger()
-{
-  
-}
-void diaElemUInteger::setMe(void *dialog, void *opaque,uint32_t line)
-{
- 
-}
-void diaElemUInteger::getMe(void)
-{
- 
-}
-void diaElemUInteger::enable(uint32_t onoff) {}
-//******************************************************
-
-diaElemFloat::diaElemFloat(ELEM_TYPE_FLOAT *intValue,const char *toggleTitle, 
-                            ELEM_TYPE_FLOAT min, ELEM_TYPE_FLOAT max,const char *tip)
-  : diaElem(ELEM_FLOAT)
-{
-}
-
-diaElemFloat::~diaElemFloat()
-{
-  
-}
-void diaElemFloat::setMe(void *dialog, void *opaque,uint32_t line)
-{
-  
-}
-void diaElemFloat::getMe(void)
-{
- 
-}
-void diaElemFloat::enable(uint32_t onoff) {}
-//******************************************************
-
-diaElemBar::diaElemBar(uint32_t percent,const char *toggleTitle)
-  : diaElem(ELEM_BAR)
-{
-}
-
-diaElemBar::~diaElemBar()
-{
-  
-}
-void diaElemBar::setMe(void *dialog, void *opaque,uint32_t line)
-{
-  
-}
-void diaElemBar::getMe(void)
-{
- 
-}
-
-//******************************************************
-
-diaElemMenu::diaElemMenu(uint32_t *intValue,const char *itle, uint32_t nb, 
-               const diaMenuEntry *menu,const char *tip)
-  : diaElemMenuBase()
-{
-}
-
-diaElemMenu::~diaElemMenu()
-{
-  
-}
-void diaElemMenu::setMe(void *dialog, void *opaque,uint32_t line)
-{
-  
-}
-void diaElemMenu::getMe(void)
-{
- 
-}
-uint8_t   diaElemMenu::link(diaMenuEntry *entry,uint32_t onoff,diaElem *w)
-{
-}
-void   diaElemMenu::enable(uint32_t onoff)
-{}
-void diaElemMenu::finalize(void)
-{ 
-}
-void   diaElemMenu::updateMe(void)
-{
-}
-//*****************
-diaElemFile::diaElemFile(uint32_t write,char **filename,const char *toggleTitle,
-                         const char *defaultSuffix, const char *tip)
-  : diaElemFileBase()
-{
- 
-}
-
-diaElemFile::~diaElemFile()
-{
-  
-}
-void diaElemFile::setMe(void *dialog, void *opaque,uint32_t line)
-{
- 
-  
-}
-void diaElemFile::getMe(void)
-{
- 
-}
-void   diaElemFile::enable(uint32_t onoff)
-{}
-#include &quot;ADM_encoder/ADM_vidEncode.hxx&quot;
-  diaElemBitrate::diaElemBitrate(COMPRES_PARAMS *p,const char *toggleTitle,const char *tip)
-  : diaElemBitrateBase()
-{
-  
-}
-diaElemBitrate::~diaElemBitrate()
-{
-  
-}
-void diaElemBitrate::setMe(void *dialog, void *opaque,uint32_t line)
-{
- 
-  
-}
-void diaElemBitrate::getMe(void)
-{
- 
-}
-void diaElemFile::changeFile(void)
-{
-}
-void diaElemBitrate::setMaxQz(uint32_t qz)
-{
-}
-//******************************************************
-diaElemReadOnlyText::diaElemReadOnlyText(const char *readyOnly,const char *toggleTitle,const char *tip)
-  : diaElem(ELEM_ROTEXT)
-{
- 
-} 
-diaElemReadOnlyText::~diaElemReadOnlyText()
-{
-  
-}
-void diaElemReadOnlyText::setMe(void *dialog, void *opaque,uint32_t line)
-{
- 
-  
-}
-void diaElemReadOnlyText::getMe(void)
-{
- 
-}
-
-//******************************************************
-diaElemNotch::diaElemNotch(uint32_t yes,const char *toggleTitle, const char *tip)
-  : diaElem(ELEM_NOTCH)
-{
- 
-}
-
-diaElemNotch::~diaElemNotch()
-{
-  
-}
-void diaElemNotch::setMe(void *dialog, void *opaque,uint32_t line)
-{
-  
-}
- void diaElemNotch::getMe(void) {};
-
-//******************************************************
-diaElemDirSelect::diaElemDirSelect(char **filename,const char *toggleTitle,const char *tip)  : diaElemDirSelectBase() {}
-diaElemDirSelect::~diaElemDirSelect() {}
-void diaElemDirSelect::setMe(void *dialog, void *opaque,uint32_t line) {}
-void diaElemDirSelect::getMe(void) {}
-  
-void diaElemDirSelect::changeFile(void) {}
-void   diaElemDirSelect::enable(uint32_t onoff){}
-//******************************************************
-diaElemText::diaElemText(char **text,const char *toggleTitle,const char *tip)
-    : diaElem(ELEM_NOTCH) {}
-diaElemText::~diaElemText() {}
-void diaElemText::setMe(void *dialog, void *opaque,uint32_t line) {}
-void diaElemText::getMe(void) {}  
-void diaElemText::enable(uint32_t onoff) {};
-            
-//******************************************************
-diaElemMenuDynamic::diaElemMenuDynamic(uint32_t *intValue,const char *itle, uint32_t nb, 
-                diaMenuEntryDynamic **menu,const char *tip)
-  : diaElemMenuDynamicBase()
-{
-}
-
-diaElemMenuDynamic::~diaElemMenuDynamic()
-{ 
-}
-void      diaElemMenuDynamic::updateMe(void)
-{
-
-}
-void diaElemMenuDynamic::setMe(void *dialog, void *opaque,uint32_t line)
-{
-}
-
-void diaElemMenuDynamic::getMe(void)
-{ 
-}
-uint8_t   diaElemMenuDynamic::link(diaMenuEntryDynamic *entry,uint32_t onoff,diaElem *w)
-{
-}
-void   diaElemMenuDynamic::enable(uint32_t onoff)
-{}
-void diaElemMenuDynamic::finalize(void)
-{ 
-}
-//******************************************************
-diaElemFrame::diaElemFrame(const char *toggleTitle, const char *tip)
-  : diaElemFrameBase()
-{
-  
-}
-void diaElemFrame::swallow(diaElem *widget)
-{
- 
-}
-diaElemFrame::~diaElemFrame()
-{
-  
-}
-void diaElemFrame::setMe(void *dialog, void *opaque,uint32_t line)
-{
- 
-}
-void diaElemFrame::getMe(void)
-{
-  
-}
-void diaElemFrame::enable(uint32_t onoff)
-{
-
-}
-void diaElemFrame::finalize(void)
-{
-}
-//**************************
-
-  
-  diaElemHex::diaElemHex(const char *toggleTitle, uint32_t dataSize,uint8_t *data) :diaElem(ELEM_HEXDUMP){};
-  diaElemHex::~diaElemHex() {};
-  void diaElemHex::setMe(void *dialog, void *opaque,uint32_t line) {};
-  void diaElemHex::getMe(void) {} ;
-  void diaElemHex::finalize(void) {};
-//**************************
-diaElemToggleUint::diaElemToggleUint(uint32_t *toggleValue,const char *toggleTitle, uint32_t *uintval, const char *name,uint32_t min,uint32_t max,const char *tip)
-  : diaElem(ELEM_TOGGLE_UINT)
-{
- 
-}
-diaElemToggleUint::~diaElemToggleUint()
-{
-  
-}
-void diaElemToggleUint::setMe(void *dialog, void *opaque,uint32_t line)
-{
- 
-  
-}
-void diaElemToggleUint::getMe(void)
-{
-  
-}
-void   diaElemToggleUint::finalize(void)
-{
-  updateMe();
-}
-void   diaElemToggleUint::updateMe(void)
-{
-  
-    
-}
-void   diaElemToggleUint::enable(uint32_t onoff)
-{
-   
-}
-//**************************
-diaElemToggleInt::diaElemToggleInt(uint32_t *toggleValue,const char *toggleTitle, int32_t *uintval, const char *name,int32_t min,int32_t max,const char *tip)
-  :diaElem(ELEM_TOGGLE_INT)
-{
- 
-}
-diaElemToggleInt::~diaElemToggleInt()
-{
-  
-}
-void diaElemToggleInt::setMe(void *dialog, void *opaque,uint32_t line)
-{
- 
-  
-}
-void diaElemToggleInt::getMe(void)
-{
-  
-}
-void   diaElemToggleInt::finalize(void)
-{
-}
-void   diaElemToggleInt::enable(uint32_t onoff)
-{
-}
-//*********************************************************
-diaElemButton:: diaElemButton(const char *toggleTitle, ADM_FAC_CALLBACK *cb,void *cookie,const char *tip)
-  : diaElem(ELEM_BUTTON)
-{
-}
-
-diaElemButton::~diaElemButton()
-{
-  
-}
-
-void diaElemButton::setMe(void *dialog, void *opaque,uint32_t line)
-{
-  
-}
-void diaElemButton::getMe(void)
-{
-  
-}
-void   diaElemButton::enable(uint32_t onoff)
-{
-
-}
-//***
-#if 0
- template &lt;typename T&gt;
- diaElemGenericSlider&lt;T&gt;::diaElemGenericSlider(T *value,const char *toggleTitle, T min,T max,T incr,const char *tip)
-     : diaElem(ELEM_SLIDER)
-  {
- }
-  
- template &lt;typename T&gt;
- diaElemGenericSlider&lt;T&gt;::~diaElemGenericSlider()
-  {
-  }
- 
- template &lt;typename T&gt;
- void diaElemGenericSlider&lt;T&gt;::setMe(void *dialog, void *opaque,uint32_t line)
-  {
-  }
- 
- template &lt;typename T&gt;
- void diaElemGenericSlider&lt;T&gt;::getMe(void)
-  {
-  }
-  
- template &lt;typename T&gt;
- void diaElemGenericSlider&lt;T&gt;::enable(uint32_t onoff) 
-  {
-  }
-  
- template class diaElemGenericSlider &lt;int32_t&gt;;
- template class diaElemGenericSlider &lt;uint32_t&gt;;
- template class diaElemGenericSlider &lt;ELEM_TYPE_FLOAT&gt;;
-//****
-#endif
-
-
- diaElemMatrix::diaElemMatrix(uint8_t *trix,const char *toggleTitle, uint32_t trixSize,const char *tip)
-   : diaElem(ELEM_MATRIX)
- {
- }
-
- diaElemMatrix::~diaElemMatrix()
- {
- }
- void diaElemMatrix::setMe(void *dialog, void *opaque,uint32_t line)
- {
-
- }
- void diaElemMatrix::getMe(void)
- {
-   
- }
- void diaElemMatrix::enable(uint32_t onoff)
- {
- }
-
-
-
-//***
-diaElemThreadCount::diaElemThreadCount(uint32_t *value, const char *title, const char *tip) : diaElem(ELEM_THREAD_COUNT) {}
-diaElemThreadCount::~diaElemThreadCount() {}
-void diaElemThreadCount::setMe(void *dialog, void *opaque, uint32_t line) {}
-void diaElemThreadCount::getMe(void) {}
-
-//EOF

Copied: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_CLI/src/CMakeLists.txt (from rev 4061, branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_CLI/CMakeLists.txt)
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_CLI/CMakeLists.txt	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_CLI/src/CMakeLists.txt	2008-05-24 19:16:19 UTC (rev 4062)
@@ -0,0 +1,11 @@
+SET(ADM_LIB ADM_UICli)
+
+SET(${ADM_LIB}_SRCS 
+	DIA_dialogFactory.cpp  
+        FAC_toggle.cpp
+        DIA_flyDialogCli.cpp
+)
+INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR}/../include)
+ADD_LIBRARY(${ADM_LIB}  SHARED ${${ADM_LIB}_SRCS})
+
+INSTALL(TARGETS ${ADM_LIB} RUNTIME DESTINATION ${BIN_DIR} LIBRARY DESTINATION lib)

Copied: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_CLI/src/DIA_dialogFactory.cpp (from rev 4061, branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_CLI/DIA_dialogFactory.cpp)
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_CLI/DIA_dialogFactory.cpp	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_CLI/src/DIA_dialogFactory.cpp	2008-05-24 19:16:19 UTC (rev 4062)
@@ -0,0 +1,45 @@
+/***************************************************************************
+  DIA_dialogFactory.cpp
+  (C) 2006 Mean <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">Fixounet at free.fr</A> 
+***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+
+#include &lt;string.h&gt;
+#include &lt;stdio.h&gt;
+
+#include &quot;ADM_default.h&quot;
+
+#include &quot;DIA_factory.h&quot;
+#include &quot;ADM_assert.h&quot;
+
+/**
+    \fn diaFactoryRun(const char *title,uint32_t nb,diaElem **elems)
+    \brief  Run a dialog made of nb elems, each elem being described in the **elems
+    @return 0 on failure, 1 on success
+*/
+
+uint8_t diaFactoryRun(const char *title,uint32_t nb,diaElem **elems)
+{
+  return 0;
+  
+}
+uint8_t diaFactoryRunTabs(const char *title,uint32_t nb,diaElemTabs **tabs)
+{
+  return 0; 
+}
+void InitFactory(void)
+{
+	
+}
+
+
+//EOF

Added: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_CLI/src/DIA_flyDialogCli.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_CLI/src/DIA_flyDialogCli.cpp	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_CLI/src/DIA_flyDialogCli.cpp	2008-05-24 19:16:19 UTC (rev 4062)
@@ -0,0 +1,85 @@
+/***************************************************************************
+    copyright            : (C) 2006 by mean
+    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
+***************************************************************************/
+
+/***************************************************************************
+*                                                                         *
+*   This program is free software; you can redistribute it and/or modify  *
+*   it under the terms of the GNU General Public License as published by  *
+*   the Free Software Foundation; either version 2 of the License, or     *
+*   (at your option) any later version.                                   *
+*                                                                         *
+***************************************************************************///
+
+
+
+#include &lt;math.h&gt;
+
+#include &quot;ADM_default.h&quot;
+
+#include &quot;ADM_image.h&quot;
+#include &quot;ADM_videoFilter.h&quot;
+#include &quot;DIA_flyDialog.h&quot;
+#include &quot;DIA_flyDialogCli.h&quot;
+#include &quot;ADM_assert.h&quot;
+
+void ADM_flyDialogCli::postInit(uint8_t reInit)
+{
+}
+
+
+float ADM_flyDialogCli::calcZoomFactor(void)
+{
+        return 0;      
+}
+
+uint8_t  ADM_flyDialogCli::display(void)
+{
+        return 0;      
+}
+
+uint32_t ADM_flyDialogCli::sliderGet(void)
+{
+        return 0;      
+}
+
+uint8_t ADM_flyDialogCli::sliderSet(uint32_t value)
+{
+        return 0;      
+}
+
+uint8_t ADM_flyDialogCli::isRgbInverted(void)
+{
+        return 0; 
+}
+
+void ADM_flyDialogCli::setupMenus (const void * params, 
+                                const MenuMapping * menu_mapping,
+                                uint32_t menu_mapping_count)
+{
+        return ;
+}
+
+uint32_t ADM_flyDialogCli::getMenuValue (const MenuMapping * mm)
+{
+        return 0;
+}
+
+void ADM_flyDialogCli::getMenuValues ( void * params,
+                                   const MenuMapping * menu_mapping,
+                                   uint32_t menu_mapping_count)
+{
+        return ;
+}
+
+const MenuMapping *
+ADM_flyDialogCli::lookupMenu (const char * widgetName,
+                           const MenuMapping * menu_mapping,
+                           uint32_t menu_mapping_count)
+{
+    return 0;
+}
+
+//EOF
+

Copied: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_CLI/src/FAC_toggle.cpp (from rev 4061, branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_CLI/FAC_toggle.cpp)
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_CLI/FAC_toggle.cpp	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_CLI/src/FAC_toggle.cpp	2008-05-24 19:16:19 UTC (rev 4062)
@@ -0,0 +1,479 @@
+/***************************************************************************
+  FAC_toggle.cpp
+  Handle dialog factory element : Toggle
+  (C) 2006 Mean <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">Fixounet at free.fr</A> 
+***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+
+
+#include &lt;string.h&gt;
+#include &lt;stdio.h&gt;
+#include &lt;math.h&gt;
+
+#include &quot;ADM_default.h&quot;
+
+#include &quot;DIA_factory.h&quot;
+#include &quot;ADM_assert.h&quot;
+
+
+
+
+diaElemToggle::diaElemToggle(uint32_t *toggleValue,const char *toggleTitle, const char *tip)
+  : diaElemToggleBase()
+{
+}
+
+diaElemToggle::~diaElemToggle()
+{
+  
+}
+void diaElemToggle::setMe(void *dialog, void *opaque,uint32_t l)
+{
+}
+void diaElemToggle::getMe(void)
+{
+}
+void diaElemToggle::enable(uint32_t onoff) {}
+void   diaElemToggle::finalize(void)
+{
+  updateMe(); 
+}
+void   diaElemToggle::updateMe(void)
+{
+
+}
+
+//******************************************************
+diaElemInteger::diaElemInteger(int32_t *intValue,const char *toggleTitle, int32_t min, int32_t max,const char *tip)
+  : diaElem(ELEM_TOGGLE)
+{
+ }
+
+diaElemInteger::~diaElemInteger()
+{
+  
+}
+void diaElemInteger::setMe(void *dialog, void *opaque,uint32_t line)
+{
+ 
+}
+void diaElemInteger::getMe(void)
+{
+ 
+}
+uint8_t   diaElemToggle::link(uint32_t onoff,diaElem *w)
+{
+  
+}
+void diaElemInteger::enable(uint32_t onoff) {}
+//******************************************************
+diaElemUInteger::diaElemUInteger(uint32_t *intValue,const char *toggleTitle, uint32_t min, uint32_t max,const char *tip)
+  : diaElem(ELEM_TOGGLE)
+{
+ }
+
+diaElemUInteger::~diaElemUInteger()
+{
+  
+}
+void diaElemUInteger::setMe(void *dialog, void *opaque,uint32_t line)
+{
+ 
+}
+void diaElemUInteger::getMe(void)
+{
+ 
+}
+void diaElemUInteger::enable(uint32_t onoff) {}
+//******************************************************
+
+diaElemFloat::diaElemFloat(ELEM_TYPE_FLOAT *intValue,const char *toggleTitle, 
+                            ELEM_TYPE_FLOAT min, ELEM_TYPE_FLOAT max,const char *tip)
+  : diaElem(ELEM_FLOAT)
+{
+}
+
+diaElemFloat::~diaElemFloat()
+{
+  
+}
+void diaElemFloat::setMe(void *dialog, void *opaque,uint32_t line)
+{
+  
+}
+void diaElemFloat::getMe(void)
+{
+ 
+}
+void diaElemFloat::enable(uint32_t onoff) {}
+//******************************************************
+
+diaElemBar::diaElemBar(uint32_t percent,const char *toggleTitle)
+  : diaElem(ELEM_BAR)
+{
+}
+
+diaElemBar::~diaElemBar()
+{
+  
+}
+void diaElemBar::setMe(void *dialog, void *opaque,uint32_t line)
+{
+  
+}
+void diaElemBar::getMe(void)
+{
+ 
+}
+
+//******************************************************
+
+diaElemMenu::diaElemMenu(uint32_t *intValue,const char *itle, uint32_t nb, 
+               const diaMenuEntry *menu,const char *tip)
+  : diaElemMenuBase()
+{
+}
+
+diaElemMenu::~diaElemMenu()
+{
+  
+}
+void diaElemMenu::setMe(void *dialog, void *opaque,uint32_t line)
+{
+  
+}
+void diaElemMenu::getMe(void)
+{
+ 
+}
+uint8_t   diaElemMenu::link(diaMenuEntry *entry,uint32_t onoff,diaElem *w)
+{
+}
+void   diaElemMenu::enable(uint32_t onoff)
+{}
+void diaElemMenu::finalize(void)
+{ 
+}
+void   diaElemMenu::updateMe(void)
+{
+}
+//*****************
+diaElemFile::diaElemFile(uint32_t write,char **filename,const char *toggleTitle,
+                         const char *defaultSuffix, const char *tip)
+  : diaElemFileBase()
+{
+ 
+}
+
+diaElemFile::~diaElemFile()
+{
+  
+}
+void diaElemFile::setMe(void *dialog, void *opaque,uint32_t line)
+{
+ 
+  
+}
+void diaElemFile::getMe(void)
+{
+ 
+}
+void   diaElemFile::enable(uint32_t onoff)
+{}
+#include &quot;ADM_encoder/ADM_vidEncode.hxx&quot;
+  diaElemBitrate::diaElemBitrate(COMPRES_PARAMS *p,const char *toggleTitle,const char *tip)
+  : diaElemBitrateBase()
+{
+  
+}
+diaElemBitrate::~diaElemBitrate()
+{
+  
+}
+void diaElemBitrate::setMe(void *dialog, void *opaque,uint32_t line)
+{
+ 
+  
+}
+void diaElemBitrate::getMe(void)
+{
+ 
+}
+void diaElemFile::changeFile(void)
+{
+}
+void diaElemBitrate::setMaxQz(uint32_t qz)
+{
+}
+//******************************************************
+diaElemReadOnlyText::diaElemReadOnlyText(const char *readyOnly,const char *toggleTitle,const char *tip)
+  : diaElem(ELEM_ROTEXT)
+{
+ 
+} 
+diaElemReadOnlyText::~diaElemReadOnlyText()
+{
+  
+}
+void diaElemReadOnlyText::setMe(void *dialog, void *opaque,uint32_t line)
+{
+ 
+  
+}
+void diaElemReadOnlyText::getMe(void)
+{
+ 
+}
+
+//******************************************************
+diaElemNotch::diaElemNotch(uint32_t yes,const char *toggleTitle, const char *tip)
+  : diaElem(ELEM_NOTCH)
+{
+ 
+}
+
+diaElemNotch::~diaElemNotch()
+{
+  
+}
+void diaElemNotch::setMe(void *dialog, void *opaque,uint32_t line)
+{
+  
+}
+ void diaElemNotch::getMe(void) {};
+
+//******************************************************
+diaElemDirSelect::diaElemDirSelect(char **filename,const char *toggleTitle,const char *tip)  : diaElemDirSelectBase() {}
+diaElemDirSelect::~diaElemDirSelect() {}
+void diaElemDirSelect::setMe(void *dialog, void *opaque,uint32_t line) {}
+void diaElemDirSelect::getMe(void) {}
+  
+void diaElemDirSelect::changeFile(void) {}
+void   diaElemDirSelect::enable(uint32_t onoff){}
+//******************************************************
+diaElemText::diaElemText(char **text,const char *toggleTitle,const char *tip)
+    : diaElem(ELEM_NOTCH) {}
+diaElemText::~diaElemText() {}
+void diaElemText::setMe(void *dialog, void *opaque,uint32_t line) {}
+void diaElemText::getMe(void) {}  
+void diaElemText::enable(uint32_t onoff) {};
+            
+//******************************************************
+diaElemMenuDynamic::diaElemMenuDynamic(uint32_t *intValue,const char *itle, uint32_t nb, 
+                diaMenuEntryDynamic **menu,const char *tip)
+  : diaElemMenuDynamicBase()
+{
+}
+
+diaElemMenuDynamic::~diaElemMenuDynamic()
+{ 
+}
+void      diaElemMenuDynamic::updateMe(void)
+{
+
+}
+void diaElemMenuDynamic::setMe(void *dialog, void *opaque,uint32_t line)
+{
+}
+
+void diaElemMenuDynamic::getMe(void)
+{ 
+}
+uint8_t   diaElemMenuDynamic::link(diaMenuEntryDynamic *entry,uint32_t onoff,diaElem *w)
+{
+}
+void   diaElemMenuDynamic::enable(uint32_t onoff)
+{}
+void diaElemMenuDynamic::finalize(void)
+{ 
+}
+//******************************************************
+diaElemFrame::diaElemFrame(const char *toggleTitle, const char *tip)
+  : diaElemFrameBase()
+{
+  
+}
+void diaElemFrame::swallow(diaElem *widget)
+{
+ 
+}
+diaElemFrame::~diaElemFrame()
+{
+  
+}
+void diaElemFrame::setMe(void *dialog, void *opaque,uint32_t line)
+{
+ 
+}
+void diaElemFrame::getMe(void)
+{
+  
+}
+void diaElemFrame::enable(uint32_t onoff)
+{
+
+}
+void diaElemFrame::finalize(void)
+{
+}
+//**************************
+
+  
+  diaElemHex::diaElemHex(const char *toggleTitle, uint32_t dataSize,uint8_t *data) :diaElem(ELEM_HEXDUMP){};
+  diaElemHex::~diaElemHex() {};
+  void diaElemHex::setMe(void *dialog, void *opaque,uint32_t line) {};
+  void diaElemHex::getMe(void) {} ;
+  void diaElemHex::finalize(void) {};
+//**************************
+diaElemToggleUint::diaElemToggleUint(uint32_t *toggleValue,const char *toggleTitle, uint32_t *uintval, const char *name,uint32_t min,uint32_t max,const char *tip)
+  : diaElem(ELEM_TOGGLE_UINT)
+{
+ 
+}
+diaElemToggleUint::~diaElemToggleUint()
+{
+  
+}
+void diaElemToggleUint::setMe(void *dialog, void *opaque,uint32_t line)
+{
+ 
+  
+}
+void diaElemToggleUint::getMe(void)
+{
+  
+}
+void   diaElemToggleUint::finalize(void)
+{
+  updateMe();
+}
+void   diaElemToggleUint::updateMe(void)
+{
+  
+    
+}
+void   diaElemToggleUint::enable(uint32_t onoff)
+{
+   
+}
+//**************************
+diaElemToggleInt::diaElemToggleInt(uint32_t *toggleValue,const char *toggleTitle, int32_t *uintval, const char *name,int32_t min,int32_t max,const char *tip)
+  :diaElem(ELEM_TOGGLE_INT)
+{
+ 
+}
+diaElemToggleInt::~diaElemToggleInt()
+{
+  
+}
+void diaElemToggleInt::setMe(void *dialog, void *opaque,uint32_t line)
+{
+ 
+  
+}
+void diaElemToggleInt::getMe(void)
+{
+  
+}
+void   diaElemToggleInt::finalize(void)
+{
+}
+void   diaElemToggleInt::enable(uint32_t onoff)
+{
+}
+//*********************************************************
+diaElemButton:: diaElemButton(const char *toggleTitle, ADM_FAC_CALLBACK *cb,void *cookie,const char *tip)
+  : diaElem(ELEM_BUTTON)
+{
+}
+
+diaElemButton::~diaElemButton()
+{
+  
+}
+
+void diaElemButton::setMe(void *dialog, void *opaque,uint32_t line)
+{
+  
+}
+void diaElemButton::getMe(void)
+{
+  
+}
+void   diaElemButton::enable(uint32_t onoff)
+{
+
+}
+//***
+#if 0
+ template &lt;typename T&gt;
+ diaElemGenericSlider&lt;T&gt;::diaElemGenericSlider(T *value,const char *toggleTitle, T min,T max,T incr,const char *tip)
+     : diaElem(ELEM_SLIDER)
+  {
+ }
+  
+ template &lt;typename T&gt;
+ diaElemGenericSlider&lt;T&gt;::~diaElemGenericSlider()
+  {
+  }
+ 
+ template &lt;typename T&gt;
+ void diaElemGenericSlider&lt;T&gt;::setMe(void *dialog, void *opaque,uint32_t line)
+  {
+  }
+ 
+ template &lt;typename T&gt;
+ void diaElemGenericSlider&lt;T&gt;::getMe(void)
+  {
+  }
+  
+ template &lt;typename T&gt;
+ void diaElemGenericSlider&lt;T&gt;::enable(uint32_t onoff) 
+  {
+  }
+  
+ template class diaElemGenericSlider &lt;int32_t&gt;;
+ template class diaElemGenericSlider &lt;uint32_t&gt;;
+ template class diaElemGenericSlider &lt;ELEM_TYPE_FLOAT&gt;;
+//****
+#endif
+
+
+ diaElemMatrix::diaElemMatrix(uint8_t *trix,const char *toggleTitle, uint32_t trixSize,const char *tip)
+   : diaElem(ELEM_MATRIX)
+ {
+ }
+
+ diaElemMatrix::~diaElemMatrix()
+ {
+ }
+ void diaElemMatrix::setMe(void *dialog, void *opaque,uint32_t line)
+ {
+
+ }
+ void diaElemMatrix::getMe(void)
+ {
+   
+ }
+ void diaElemMatrix::enable(uint32_t onoff)
+ {
+ }
+
+
+
+//***
+diaElemThreadCount::diaElemThreadCount(uint32_t *value, const char *title, const char *tip) : diaElem(ELEM_THREAD_COUNT) {}
+diaElemThreadCount::~diaElemThreadCount() {}
+void diaElemThreadCount::setMe(void *dialog, void *opaque, uint32_t line) {}
+void diaElemThreadCount::getMe(void) {}
+
+//EOF

Added: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/include/DIA_flyDialogGtk.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/include/DIA_flyDialogGtk.h	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/include/DIA_flyDialogGtk.h	2008-05-24 19:16:19 UTC (rev 4062)
@@ -0,0 +1,50 @@
+/****************************************************************************
+ copyright            : (C) 2007 by mean
+ email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
+ 
+ Simple class to do filter that have a configuration that have real time effect
+ 
+ Case 1: The filter process YUV
+ 
+ YUV-&gt; Process-&gt;YUVOUT-&gt;YUV2RGB-&gt;RGBUFFEROUT
+ 
+ Case 2: The filter process RGV
+ 
+ YUV-&gt; YUV2RGB-&gt;RGB-&gt;Process-&gt;RGBUFFEROUT
+ 
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#ifndef ADM_FLY_DIALOG_GTKH
+#define ADM_FLY_DIALOG_GTKH
+#include &quot;DIA_flyDialog.h&quot;
+class ADM_flyDialogGtk : public ADM_flyDialog
+{
+public:
+  virtual uint8_t  cleanup2(void);
+  virtual uint8_t  isRgbInverted(void);
+  virtual uint8_t  display(void);
+  virtual float   calcZoomFactor(void);
+  virtual uint32_t sliderGet(void);
+  virtual uint8_t  sliderSet(uint32_t value);
+  virtual void    postInit(uint8_t reInit);
+  virtual void    setupMenus (const void * params,
+                         const MenuMapping * menu_mapping,
+                        uint32_t menu_mapping_count) ;
+  virtual void  getMenuValues ( void * mm,
+                    const MenuMapping * menu_mapping,
+                    uint32_t menu_mapping_count) ;
+  virtual  const MenuMapping *lookupMenu (const char * widgetName,
+                                               const MenuMapping * menu_mapping,
+                                               uint32_t menu_mapping_count) ;
+  virtual uint32_t  getMenuValue (const MenuMapping * mm) ;          
+};
+
+#endif

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/CMakeLists.txt	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/CMakeLists.txt	2008-05-24 19:16:19 UTC (rev 4062)
@@ -22,9 +22,10 @@
         choice.cpp       
         toolkit_dialog.cpp
         toolkit.cpp
+        DIA_flyDialogGtk.cpp
 )
 INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR}/../include)
 ADD_LIBRARY(${ADM_LIB} SHARED ${${ADM_LIB}_SRCS})
 TARGET_LINK_LIBRARIES(${ADM_LIB} ${GTK_LDFLAGS} ADM_core ADM_coreUI)
 ADD_TARGET_CFLAGS(${ADM_LIB} ${GTK_CFLAGS})
-INSTALL(TARGETS ${ADM_LIB} RUNTIME DESTINATION ${BIN_DIR} LIBRARY DESTINATION lib)
\ No newline at end of file
+INSTALL(TARGETS ${ADM_LIB} RUNTIME DESTINATION ${BIN_DIR} LIBRARY DESTINATION lib)

Copied: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/DIA_flyDialogGtk.cpp (from rev 4061, branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_flyDialog.cpp)
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_flyDialog.cpp	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_GTK/src/DIA_flyDialogGtk.cpp	2008-05-24 19:16:19 UTC (rev 4062)
@@ -0,0 +1,213 @@
+/***************************************************************************
+    copyright            : (C) 2006 by mean
+    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
+***************************************************************************/
+
+/***************************************************************************
+*                                                                         *
+*   This program is free software; you can redistribute it and/or modify  *
+*   it under the terms of the GNU General Public License as published by  *
+*   the Free Software Foundation; either version 2 of the License, or     *
+*   (at your option) any later version.                                   *
+*                                                                         *
+***************************************************************************///
+
+#include &quot;ADM_toolkitGtk.h&quot;
+#include &quot;ADM_videoFilter.h&quot;
+#include &quot;DIA_flyDialogGtk.h&quot;
+#include &quot;DIA_factory.h&quot;
+
+
+#ifdef USE_JOG
+#include &quot;gui_action.hxx&quot;
+#include &quot;../ADM_toolkit_gtk/ADM_jogshuttle.h&quot;
+
+extern PhysicalJogShuttle *physical_jog_shuttle;
+#endif
+
+extern void GUI_RGBDisplay(uint8_t * dis, uint32_t w, uint32_t h, void *widg);
+extern float UI_calcZoomToFitScreen(GtkWindow* window, GtkWidget* drawingArea, uint32_t imageWidth, uint32_t imageHeight);
+extern void UI_centreCanvasWindow(GtkWindow *window, GtkWidget *canvas, int newCanvasWidth, int newCanvasHeight);
+
+void ADM_flyDialogGtk::postInit(uint8_t reInit)
+{
+	if (_slider)
+	{
+		GtkAdjustment *adj = (GtkAdjustment*)gtk_adjustment_new(0, 0, _in-&gt;getInfo()-&gt;nb_frames - 1, 0, 1, 0);
+
+		gtk_range_set_adjustment(GTK_RANGE(_slider), adj);
+		gtk_scale_set_digits(GTK_SCALE(_slider), 0);
+	}
+
+	GtkWindow *window = (GtkWindow*)gtk_widget_get_ancestor((GtkWidget*)_canvas, GTK_TYPE_WINDOW);
+	UI_centreCanvasWindow(window, (GtkWidget*)_canvas, _zoomW, _zoomH);
+	gtk_widget_set_size_request((GtkWidget*)_canvas, _zoomW, _zoomH);
+#ifdef USE_JOG
+        if (!reInit)
+            physical_jog_shuttle-&gt;registerCBs (this, PhysicalJogShuttle::NoButtonCB,
+                                               jogDial, jogRing);
+#endif
+}
+
+uint8_t  ADM_flyDialogGtk::cleanup2(void)
+{
+#ifdef USE_JOG
+	physical_jog_shuttle-&gt;deregisterCBs (this);
+#endif
+}
+
+#ifdef USE_JOG
+void ADM_flyDialogGtk::jogDial (void * my_data, signed short offset)
+{
+    ADM_flyDialog * myFly = static_cast &lt;ADM_flyDialog *&gt; (my_data);
+    myFly-&gt;sliderSet (myFly-&gt;sliderGet() + offset);
+}
+
+static guint jogRingTimerID = 0;
+static signed short jogRingIncr = 0;
+
+static gboolean on_jogRingTimer (gpointer data)
+{
+    gdk_threads_enter();
+
+    ADM_flyDialog * myFly = static_cast &lt;ADM_flyDialog *&gt; (data);
+    myFly-&gt;sliderSet (myFly-&gt;sliderGet() + jogRingIncr);
+
+    gdk_threads_leave();
+    return TRUE;
+}
+
+void ADM_flyDialogGtk::jogRing (void * my_data, gfloat angle)
+{
+    if (jogRingTimerID)
+    {
+        g_source_remove (jogRingTimerID);
+        jogRingTimerID = 0;
+    }
+
+    if (angle &gt; -0.0001 &amp;&amp; angle &lt; 0.0001)
+        return;
+
+    jogRingIncr = (angle &lt; 0) ? -1 : +1;
+    angle *= jogRingIncr; // absolute value
+    jogRingTimerID = g_timeout_add (guint ((1 - angle) * 500 + 10),
+                                    on_jogRingTimer, my_data);
+}
+#endif
+
+float ADM_flyDialogGtk::calcZoomFactor(void)
+{
+	GtkWindow *window = (GtkWindow*)gtk_widget_get_ancestor((GtkWidget*)_canvas, GTK_TYPE_WINDOW);
+
+	return UI_calcZoomToFitScreen(window, (GtkWidget*)_canvas, _w, _h);
+}
+
+uint8_t  ADM_flyDialogGtk::display(void)
+{
+	ADM_assert(_canvas);
+	ADM_assert(_rgbBufferOut);
+
+	GUI_RGBDisplay(_rgbBufferOut, _zoomW, _zoomH, _canvas);
+
+	return 1; 
+}
+
+uint32_t ADM_flyDialogGtk::sliderGet(void)
+{
+	ADM_assert(_slider);
+	return (uint32_t)gtk_range_get_value (GTK_RANGE(_slider));
+}
+
+uint8_t ADM_flyDialogGtk::sliderSet(uint32_t value)
+{
+	ADM_assert(_slider);
+
+        gtk_range_set_value (GTK_RANGE(_slider), value);
+
+	return 1; 
+}
+
+uint8_t ADM_flyDialogGtk::isRgbInverted(void)
+{
+	return 0; 
+}
+
+void ADM_flyDialogGtk::setupMenus (const void * params, 
+                                const MenuMapping * menu_mapping,
+                                uint32_t menu_mapping_count)
+{
+    // Fill in menus
+
+    ADM_assert (_cookie); // should be the dialog pointer
+    GtkDialog * dialog = static_cast &lt;GtkDialog *&gt; (_cookie);
+
+    for (int menu_index = 0; menu_index &lt; menu_mapping_count; menu_index++)
+    {
+        const MenuMapping &amp; mm = menu_mapping [menu_index];
+        const uint32_t * theParam
+            = (reinterpret_cast &lt;const uint32_t *&gt;
+               (mm.paramOffset + reinterpret_cast &lt;const char *&gt; (params)));
+        // printf (&quot;setupMenus: %s: params %p + offset 0x%x = %p\n&quot;,
+        //         mm.widgetName, params, mm.paramOffset, theParam);
+
+        GtkComboBox * combo
+            = GTK_COMBO_BOX (lookup_widget (GTK_WIDGET(dialog),
+                                            mm.widgetName));
+        int found = -1;
+        for (int item_index = 0; item_index &lt; mm.count; item_index++)
+        {
+            gtk_combo_box_append_text (combo, mm.menu [item_index].text);
+            if (mm.menu [item_index].val == *theParam)
+            {
+                gtk_combo_box_set_active (combo, item_index);
+                found = item_index;
+            }
+        }
+
+        // printf (&quot;setupMenus: %s: current is %d (%d)\n&quot;,
+        //         mm.widgetName, found, *theParam);
+    }
+}
+
+uint32_t ADM_flyDialogGtk::getMenuValue (const MenuMapping * mm)
+{
+    ADM_assert (_cookie); // should be the dialog pointer
+    GtkDialog * dialog = static_cast &lt;GtkDialog *&gt; (_cookie);
+    GtkComboBox * combo
+        = GTK_COMBO_BOX (lookup_widget (GTK_WIDGET(dialog), mm-&gt;widgetName));
+    uint32_t currValue = gtk_combo_box_get_active (combo);
+    ADM_assert (currValue &lt; mm-&gt;count);
+
+    return (mm-&gt;menu [currValue].val);
+}
+
+void ADM_flyDialogGtk::getMenuValues ( void * params,
+                                   const MenuMapping * menu_mapping,
+                                   uint32_t menu_mapping_count)
+{
+    for (int menu_index = 0; menu_index &lt; menu_mapping_count; menu_index++)
+    {
+        const MenuMapping &amp; mm = menu_mapping [menu_index];
+        uint32_t * theParam = reinterpret_cast &lt;uint32_t *&gt;
+                              (mm.paramOffset
+                               + reinterpret_cast &lt;char *&gt; (params));
+        *theParam = getMenuValue (&amp;mm);
+    }
+}
+
+const MenuMapping *
+ADM_flyDialogGtk::lookupMenu (const char * widgetName,
+                           const MenuMapping * menu_mapping,
+                           uint32_t menu_mapping_count)
+{
+    for (int menu_index = 0; menu_index &lt; menu_mapping_count; menu_index++)
+    {
+        const MenuMapping * mm = menu_mapping + menu_index;
+        if (strcmp (mm-&gt;widgetName, widgetName) == 0)
+            return mm;
+    }
+
+    return 0;
+}
+
+//EOF

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/CMakeLists.txt	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/CMakeLists.txt	2008-05-24 19:16:19 UTC (rev 4062)
@@ -1,19 +1,2 @@
-SET(ADM_LIB ADM_UIQT4)
+ADD_SUBDIRECTORY(src)
 
-QT4_WRAP_CPP(${ADM_LIB}_source
-	T_bitrate.h  T_button.h  T_dialogFactory.h  T_filesel.h  T_menu.h  T_slider.h
-	T_threadCount.h  T_toggle.h)
-
-SET(${ADM_LIB}_T
-	T_bitrate.cpp  T_button.cpp  T_dialogFactory.cpp  T_filesel.cpp  T_menu.cpp
-	T_slider.cpp  T_threadCount.cpp  T_toggle.cpp)
-
-SET(${ADM_LIB}_SRCS
-	FAC_bar.cpp    FAC_frame.cpp  FAC_integer.cpp  FAC_notch.cpp
-	FAC_float.cpp  FAC_hex.cpp    FAC_readOnlyText.cpp
-	FAC_matrix.cpp  ${${ADM_LIB}_source}  ${${ADM_LIB}_T})
-
-INCLUDE_DIRECTORIES(${CMAKE_CURRENT_BINARY_DIR} ${QT_INCLUDE_DIR})
-ADD_LIBRARY(${ADM_LIB} SHARED ${${ADM_LIB}_SRCS})
-TARGET_LINK_LIBRARIES(${ADM_LIB} ADM_core ADM_coreUI ${QT_QTGUI_LIBRARY} ${QT_QTCORE_LIBRARY})
-INSTALL(TARGETS ${ADM_LIB} RUNTIME DESTINATION ${BIN_DIR} LIBRARY DESTINATION lib)
\ No newline at end of file

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/FAC_bar.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/FAC_bar.cpp	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/FAC_bar.cpp	2008-05-24 19:16:19 UTC (rev 4062)
@@ -1,84 +0,0 @@
-/***************************************************************************
-  FAC_toggle.cpp
-  Handle dialog factory element : Toggle
-  (C) 2006 Mean <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">Fixounet at free.fr</A> 
-***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-
-#include &lt;QtGui/QGridLayout&gt;
-#include &lt;QtGui/QLabel&gt;
-#include &lt;QtGui/QProgressBar&gt;
-
-#include &quot;ADM_default.h&quot;
-#include &quot;DIA_factory.h&quot;
-
-extern const char *shortkey(const char *);
-
-namespace ADM_Qt4Factory
-{
-class diaElemBar : public diaElem
-{
-  protected :
-        uint32_t per;
-public:
-  
-  diaElemBar(uint32_t percent,const char *toggleTitle);
-  virtual ~diaElemBar() ;
-  void setMe(void *dialog, void *opaque,uint32_t line);
-  void getMe(void);
-};
-
-//********************************************************************
-diaElemBar::diaElemBar(uint32_t percent,const char *toggleTitle)
-  : diaElem(ELEM_BAR)
-{
-  per=percent;
-  paramTitle=shortkey(toggleTitle);
- }
-
-diaElemBar::~diaElemBar()
-{
-  if(paramTitle)
-    delete paramTitle;
-}
-void diaElemBar::setMe(void *dialog, void *opaque,uint32_t line)
-{
-  QProgressBar *box=new QProgressBar((QWidget *)dialog);
-  QGridLayout *layout=(QGridLayout*) opaque;
- 
-  box-&gt;setMinimum(0);
-  box-&gt;setMaximum(100);
-  box-&gt;setValue(per);
-  box-&gt;show();
- 
- QLabel *text=new QLabel(QString::fromUtf8(this-&gt;paramTitle),(QWidget *)dialog);
- text-&gt;setBuddy(box);
- layout-&gt;addWidget(text,line,0);
- layout-&gt;addWidget(box,line,1);
- 
-}
-void diaElemBar::getMe(void)
-{
-}
-} // nameapsce
-
-diaElem  *qt4CreateBar(uint32_t percent,const char *toggleTitle)
-{
-	return new  ADM_Qt4Factory::diaElemBar(percent,toggleTitle);
-}
-void qt4DestroyBar(diaElem *e)
-{
-	ADM_Qt4Factory::diaElemBar *a=(ADM_Qt4Factory::diaElemBar *)e;
-	delete a;
-}
-//
-//EOF

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/FAC_float.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/FAC_float.cpp	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/FAC_float.cpp	2008-05-24 19:16:19 UTC (rev 4062)
@@ -1,109 +0,0 @@
-/***************************************************************************
-  FAC_toggle.cpp
-  Handle dialog factory element : Toggle
-  (C) 2006 Mean <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">Fixounet at free.fr</A> 
-***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-
-#include &lt;QtGui/QGridLayout&gt;
-#include &lt;QtGui/QLabel&gt;
-#include &lt;QtGui/QSpinBox&gt;
-
-#include &quot;ADM_default.h&quot;
-#include &quot;DIA_factory.h&quot;
-
-extern const char *shortkey(const char *);
-
-namespace ADM_qt4Factory
-{
-
-
-class diaElemFloat : public diaElem
-{
-
-public:
-  ELEM_TYPE_FLOAT min,max;
-  diaElemFloat(ELEM_TYPE_FLOAT *intValue,const char *toggleTitle, ELEM_TYPE_FLOAT min, 
-               ELEM_TYPE_FLOAT max,const char *tip=NULL);
-  virtual ~diaElemFloat() ;
-  void setMe(void *dialog, void *opaque,uint32_t line);
-  void getMe(void);
-  void      enable(uint32_t onoff) ;
-};
-
-
-//********************************************************************
-diaElemFloat::diaElemFloat(ELEM_TYPE_FLOAT *intValue,const char *toggleTitle, ELEM_TYPE_FLOAT min, ELEM_TYPE_FLOAT max,const char *tip)
-  : diaElem(ELEM_TOGGLE)
-{
-  param=(void *)intValue;
-  paramTitle=shortkey(toggleTitle);
-  this-&gt;min=min;
-  this-&gt;max=max;
-  this-&gt;tip=tip;
- }
-
-diaElemFloat::~diaElemFloat()
-{
-  if(paramTitle)
-    delete paramTitle;
-}
-void diaElemFloat::setMe(void *dialog, void *opaque,uint32_t line)
-{
-  QDoubleSpinBox *box=new QDoubleSpinBox((QWidget *)dialog);
-  QGridLayout *layout=(QGridLayout*) opaque;
- myWidget=(void *)box; 
-   
- box-&gt;setMinimum(min);
- box-&gt;setMaximum(max);
- box-&gt;setValue(*(ELEM_TYPE_FLOAT *)param);
- 
- box-&gt;show();
- 
- QLabel *text=new QLabel( QString::fromUtf8(this-&gt;paramTitle),(QWidget *)dialog);
- text-&gt;setBuddy(box);
- layout-&gt;addWidget(text,line,0);
- layout-&gt;addWidget(box,line,1);
- 
-}
-void diaElemFloat::getMe(void)
-{
-  double val;
- QDoubleSpinBox *box=(QDoubleSpinBox *)myWidget;
- val=box-&gt;value();
- if(val&lt;min) val=min;
- if(val&gt;max) val=max;
- *(ELEM_TYPE_FLOAT *)param=val;
- 
-}
-void diaElemFloat::enable(uint32_t onoff) 
-{
-   QDoubleSpinBox *box=(QDoubleSpinBox *)myWidget;
-  ADM_assert(box);
-  if(onoff)
-    box-&gt;setEnabled(1);
-  else
-    box-&gt;setDisabled(1);
-}
-} // End of namespace
-//****************************Hoook*****************
-
-diaElem  *qt4CreateFloat(ELEM_TYPE_FLOAT *intValue,const char *toggleTitle, ELEM_TYPE_FLOAT min,
-        ELEM_TYPE_FLOAT max,const char *tip)
-{
-	return new  ADM_qt4Factory::diaElemFloat(intValue,toggleTitle,min,max,tip);
-}
-void qt4DestroyFloat(diaElem *e)
-{
-	ADM_qt4Factory::diaElemFloat *a=(ADM_qt4Factory::diaElemFloat *)e;
-	delete a;
-}

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/FAC_frame.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/FAC_frame.cpp	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/FAC_frame.cpp	2008-05-24 19:16:19 UTC (rev 4062)
@@ -1,120 +0,0 @@
-/***************************************************************************
-  FAC_toggle.cpp
-  Handle dialog factory element : Toggle
-  (C) 2006 Mean <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">Fixounet at free.fr</A> 
-***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-
-#include &lt;QtGui/QGridLayout&gt;
-#include &lt;QtGui/QLabel&gt;
-
-#include &quot;ADM_default.h&quot;
-#include &quot;DIA_factory.h&quot;
-
-extern const char *shortkey(const char *);
-
-
-namespace ADM_qt4Factory
-{
-class diaElemFrame : public diaElemFrameBase
-{
-  
-public:
-  
-  diaElemFrame(const char *toggleTitle, const char *tip=NULL);
-  virtual ~diaElemFrame() ;
-  void setMe(void *dialog, void *opaque,uint32_t line);
-  void getMe(void) ;
-  void swallow(diaElem *widget);
-  void enable(uint32_t onoff);
-  void finalize(void);
-};
-
-diaElemFrame::diaElemFrame(const char *toggleTitle, const char *tip)
-  : diaElemFrameBase()
-{
-  param=NULL;
-  paramTitle=shortkey(toggleTitle);
-  this-&gt;tip=tip;
-   nbElems=0;
-  frameSize=0;
-  setSize(2);
-}
-void diaElemFrame::swallow(diaElem *widget)
-{
-   elems[nbElems]=widget;
-  frameSize+=widget-&gt;getSize();
- // setSize(frameSize);
-  nbElems++;
-  ADM_assert(nbElems&lt;DIA_MAX_FRAME); 
-}
-diaElemFrame::~diaElemFrame()
-{
-  if(paramTitle)
-    delete paramTitle;
-}
-void diaElemFrame::setMe(void *dialog, void *opaque,uint32_t line)
-{
-  
-   QGridLayout *layout=(QGridLayout*) opaque;  
-   QGridLayout *layout2;
-   
-   layout2=new QGridLayout((QWidget *)dialog);
-   myWidget=(void *)layout2; 
-
-    QLabel *text=new QLabel( (QWidget *)dialog);
-    QString string = QString::fromUtf8(paramTitle);
-    
-    string=&quot;&lt;b&gt;&quot;+string+&quot;&lt;/b&gt;&quot;;
-    text-&gt;setText(string);
- layout-&gt;addWidget(text,line,0);
- layout-&gt;addLayout(layout2,line+1,0);
- int  v=0;
-  for(int i=0;i&lt;nbElems;i++)
-  {
-    elems[i]-&gt;setMe(dialog,layout2,v); 
-    v+=elems[i]-&gt;getSize();
-  }
-  myWidget=(void *)layout2;
-}
-//*****************************
-void diaElemFrame::getMe(void)
-{
-   for(int i=0;i&lt;nbElems;i++)
-  {
-    elems[i]-&gt;getMe(); 
-  }
-}
-void diaElemFrame::finalize(void)
-{
-   for(int i=0;i&lt;nbElems;i++)
-  {
-    elems[i]-&gt;finalize(); 
-  }
-}
-void diaElemFrame::enable(uint32_t onoff)
-{
-  
-}
-} // End of namespace
-//****************************Hoook*****************
-
-diaElem  *qt4CreateFrame(const char *toggleTitle, const char *tip)
-{
-	return new  ADM_qt4Factory::diaElemFrame(toggleTitle,tip);
-}
-void qt4DestroyFrame(diaElem *e)
-{
-	ADM_qt4Factory::diaElemFrame *a=(ADM_qt4Factory::diaElemFrame *)e;
-	delete a;
-}
-//EOF

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/FAC_hex.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/FAC_hex.cpp	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/FAC_hex.cpp	2008-05-24 19:16:19 UTC (rev 4062)
@@ -1,57 +0,0 @@
-/***************************************************************************
-  FAC_toggle.cpp
-  Handle dialog factory element : Toggle
-  (C) 2006 Mean <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">Fixounet at free.fr</A> 
-***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-
-#include &quot;ADM_default.h&quot;
-#include &quot;DIA_factory.h&quot;
-
-namespace ADM_qt4Factory
-{
-class diaElemHex : public diaElem
-{
-  uint32_t dataSize;
-  uint8_t  *data;
-  
-public:
-  
-  diaElemHex(const char *toggleTitle, uint32_t dataSize,uint8_t *data);
-  virtual ~diaElemHex() ;
-  void setMe(void *dialog, void *opaque,uint32_t line);
-  void getMe(void) ;
-  void finalize(void);
-};
-extern const char *shortkey(const char *);
-  diaElemHex::diaElemHex(const char *toggleTitle, uint32_t dataSize,uint8_t *data) :diaElem(ELEM_HEXDUMP){};
-  diaElemHex::~diaElemHex() {};
-  void diaElemHex::setMe(void *dialog, void *opaque,uint32_t line) {};
-  void diaElemHex::getMe(void) {} ;
-  void diaElemHex::finalize(void) {};
-//******************************************************
-} // End of namespace
-//****************************Hoook*****************
-
-diaElem  *qt4CreateHex(const char *toggleTitle, uint32_t dataSize,uint8_t *data)
-{
-	return new  ADM_qt4Factory::diaElemHex(toggleTitle,dataSize,data);
-}
-void qt4DestroyHex(diaElem *e)
-{
-	ADM_qt4Factory::diaElemHex *a=(ADM_qt4Factory::diaElemHex *)e;
-	delete a;
-}
-//EOF
-
-
-//EOF

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/FAC_integer.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/FAC_integer.cpp	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/FAC_integer.cpp	2008-05-24 19:16:19 UTC (rev 4062)
@@ -1,185 +0,0 @@
-/***************************************************************************
-  FAC_integer.cpp
-  Handle dialog factory element : Integer
-  (C) 2006 Mean <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">Fixounet at free.fr</A> 
-***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-
-#include &lt;QtGui/QSpinBox&gt;
-#include &lt;QtGui/QGridLayout&gt;
-#include &lt;QtGui/QLabel&gt;
-
-#include &quot;ADM_default.h&quot;
-#include &quot;DIA_factory.h&quot;
-
-extern const char *shortkey(const char *);
-
-
-namespace ADM_qt4Factory
-{
-class diaElemInteger : public diaElem
-{
-
-public:
-  int32_t min,max;
-  diaElemInteger(int32_t *intValue,const char *toggleTitle, int32_t min, int32_t max,const char *tip=NULL);
-  virtual ~diaElemInteger() ;
-  void setMe(void *dialog, void *opaque,uint32_t line);
-  void getMe(void);
-  void      enable(uint32_t onoff) ;
-};
-/* Same but unsigned */
-class diaElemUInteger : public diaElem
-{
-
-public:
-  uint32_t min,max;
-  diaElemUInteger(uint32_t *intValue,const char *toggleTitle, uint32_t min, uint32_t max,const char *tip=NULL);
-  virtual ~diaElemUInteger() ;
-  void setMe(void *dialog, void *opaque,uint32_t line);
-  void getMe(void);
-  void      enable(uint32_t onoff) ;
-  
-};
-
-//********************************************************************
-diaElemInteger::diaElemInteger(int32_t *intValue,const char *toggleTitle, int32_t min, int32_t max,const char *tip)
-  : diaElem(ELEM_TOGGLE)
-{
-  param=(void *)intValue;
-  paramTitle=shortkey(toggleTitle);
-  this-&gt;min=min;
-  this-&gt;max=max;
-  this-&gt;tip=tip;
- }
-
-diaElemInteger::~diaElemInteger()
-{
-  if(paramTitle)
-    delete paramTitle;
-}
-void diaElemInteger::setMe(void *dialog, void *opaque,uint32_t line)
-{
-  QSpinBox *box=new QSpinBox((QWidget *)dialog);
-  QGridLayout *layout=(QGridLayout*) opaque;
- myWidget=(void *)box; 
-   
- box-&gt;setMinimum(min);
- box-&gt;setMaximum(max);
- box-&gt;setValue(*(int32_t *)param);
- 
- box-&gt;show();
- 
- QLabel *text=new QLabel( QString::fromUtf8(this-&gt;paramTitle),(QWidget *)dialog);
- text-&gt;setBuddy(box);
- layout-&gt;addWidget(text,line,0);
- layout-&gt;addWidget(box,line,1);
- 
-}
-void diaElemInteger::getMe(void)
-{
-  int32_t val;
- QSpinBox *box=(QSpinBox *)myWidget;
- val=box-&gt;value();
- if(val&lt;min) val=min;
- if(val&gt;max) val=max;
- *(int32_t *)param=val;
- 
-}
-void diaElemInteger::enable(uint32_t onoff) 
-{
- QSpinBox *box=(QSpinBox *)myWidget;
-  ADM_assert(box);
-  if(onoff)
-    box-&gt;setEnabled(1);
-  else
-    box-&gt;setDisabled(1);
-}
-//******************************************************
-diaElemUInteger::diaElemUInteger(uint32_t *intValue,const char *toggleTitle, uint32_t min, uint32_t max,const char *tip)
-  : diaElem(ELEM_TOGGLE)
-{
-  param=(void *)intValue;
-  paramTitle=shortkey(toggleTitle);
-  this-&gt;min=min;
-  this-&gt;max=max;
-  this-&gt;tip=tip;
- }
- 
-
-diaElemUInteger::~diaElemUInteger()
-{
-  if(paramTitle)
-    delete paramTitle;
-}
-void diaElemUInteger::setMe(void *dialog, void *opaque,uint32_t line)
-{
-  QSpinBox *box=new QSpinBox((QWidget *)dialog);
-  QGridLayout *layout=(QGridLayout*) opaque;
- myWidget=(void *)box; 
-   
- box-&gt;setMinimum(min);
- box-&gt;setMaximum(max);
- box-&gt;setValue(*(uint32_t *)param);
- 
- box-&gt;show();
- 
- QLabel *text=new QLabel( QString::fromUtf8(this-&gt;paramTitle),(QWidget *)dialog);
- text-&gt;setBuddy(box);
- layout-&gt;addWidget(text,line,0);
- layout-&gt;addWidget(box,line,1);
-}
-void diaElemUInteger::getMe(void)
-{
-   uint32_t val;
- QSpinBox *box=(QSpinBox *)myWidget;
- val=box-&gt;value();
- if(val&lt;min) val=min;
- if(val&gt;max) val=max;
- *(uint32_t *)param=val;
-
-}
-
-void diaElemUInteger::enable(uint32_t onoff) 
-{
- QSpinBox *box=(QSpinBox *)myWidget;
-  ADM_assert(box);
-  if(onoff)
-    box-&gt;setEnabled(1);
-  else
-    box-&gt;setDisabled(1);
-}
-//********************************************
-//****************************************************
-} // End of namespace
-//****************************Hoook*****************
-
-diaElem  *qt4CreateInteger(int32_t *intValue,const char *toggleTitle,int32_t min, int32_t max,const char *tip)
-{
-	return new  ADM_qt4Factory::diaElemInteger(intValue,toggleTitle,min,max,tip);
-}
-void qt4DestroyInteger(diaElem *e)
-{
-	ADM_qt4Factory::diaElemInteger *a=(ADM_qt4Factory::diaElemInteger *)e;
-	delete a;
-}
-diaElem  *qt4CreateUInteger(uint32_t *intValue,const char *toggleTitle,uint32_t min, uint32_t max,const char *tip)
-{
-	return new  ADM_qt4Factory::diaElemUInteger(intValue,toggleTitle,min,max,tip);
-}
-void qt4DestroyUInteger(diaElem *e)
-{
-	ADM_qt4Factory::diaElemUInteger *a=(ADM_qt4Factory::diaElemUInteger *)e;
-	delete a;
-}
-//EOF
-

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/FAC_matrix.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/FAC_matrix.cpp	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/FAC_matrix.cpp	2008-05-24 19:16:19 UTC (rev 4062)
@@ -1,132 +0,0 @@
-/***************************************************************************
-  FAC_toggle.cpp
-  Handle dialog factory element : Toggle
-  (C) 2006 Mean <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">Fixounet at free.fr</A> 
-***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-
-#include &lt;QtGui/QSpinBox&gt;
-#include &lt;QtGui/QGridLayout&gt;
-#include &lt;QtGui/QLabel&gt;
-
-#include &quot;ADM_default.h&quot;
-#include &quot;DIA_factory.h&quot;
-
-extern const char *shortkey(const char *);
-
-namespace ADM_qt4Factory
-{
-class diaElemMatrix : public diaElem
-{
-  protected:
-  public:
-    uint8_t *_matrix;
-    uint32_t _matrixSize;
-    		diaElemMatrix(uint8_t *trix,const char *toggleTitle, uint32_t trixSize,const char *tip=NULL);
-  virtual   ~diaElemMatrix() ;
-  void      setMe(void *dialog, void *opaque,uint32_t line);
-  void      getMe(void);
-  void      enable(uint32_t onoff) ;
-};
-
-
-diaElemMatrix::diaElemMatrix(uint8_t *trix,const char *toggleTitle, uint32_t trixSize,const char *tip)
-  : diaElem(ELEM_MATRIX)
-{
-	
-	  param=(void *)trix;
-	  paramTitle=shortkey(toggleTitle);
-	  _matrix=new uint8_t[trixSize*trixSize];
-	   _matrixSize=trixSize;
-	   memcpy(_matrix,trix,trixSize*trixSize);
-	  this-&gt;tip=tip;
-	
-}
-
-diaElemMatrix::~diaElemMatrix()
-{
-	 if(_matrix) delete [] _matrix;
-	  _matrix=NULL;
-	  if(myWidget)
-	  {
-		  QSpinBox **arrayWidget=( QSpinBox **)myWidget;
-		  delete [] arrayWidget;
-		  myWidget=NULL;
-	  }
-	  if(paramTitle)
-	      delete paramTitle;
-	  paramTitle=NULL;
-}
-void diaElemMatrix::setMe(void *dialog, void *opaque,uint32_t line)
-{
-	 QSpinBox **box=new QSpinBox*[_matrixSize*_matrixSize];
-	  QGridLayout *layout=(QGridLayout*) opaque;
-	 myWidget=(void *)box; 
-
-
-	  
-	  
-	 
-	 QLabel *text=new QLabel( QString::fromUtf8(this-&gt;paramTitle),(QWidget *)dialog);
-	 layout-&gt;addWidget(text,line,0);
-	 
-	 QGridLayout *layout2=new QGridLayout((QWidget *)dialog);
-	  layout-&gt;addLayout(layout2,line,1);
-	  /*layout-&gt;setMargin(0);
-	  layout-&gt;setSpacing(0);*/
-	 
-
-	 for(int y=0;y&lt;_matrixSize*_matrixSize;y++)
-	 			  {
-	 				  box[y]=new QSpinBox((QWidget *)dialog);
-	 				  box[y]-&gt;setMinimum(0);
-	 				  box[y]-&gt;setMaximum(255);
-	 				  box[y]-&gt;setValue(_matrix[y]);
-	 				 layout2-&gt;addWidget(box[y],y/_matrixSize,y%_matrixSize);
-	 			  }
-	 myWidget =(void *)box;
-}
-void diaElemMatrix::getMe(void)
-{
-	 QSpinBox **box=( QSpinBox **)myWidget;
-	 ADM_assert(box);
-	for(int y=0;y&lt;_matrixSize*_matrixSize;y++)
-		 			  {
-		 				  _matrix[y]=box[y]-&gt;value();
-		 			  }
-	memcpy(param,_matrix,_matrixSize*_matrixSize);
-}
-void diaElemMatrix::enable(uint32_t onoff)
-{
-	QSpinBox **arrayWidget=( QSpinBox **)myWidget;
-			 
-			 ADM_assert(arrayWidget);
-			 int index=0;
-			  for(int y=0;y&lt;_matrixSize*_matrixSize;y++)
-			  {
-				  if(onoff) arrayWidget[y]-&gt;setEnabled(1);
-				  else arrayWidget[y]-&gt;setEnabled(0);
-				  
-			  }
-}
-}
-//****************************Hoook*****************
-
-diaElem  *qt4CreateMatrix(uint8_t *trix,const char *toggleTitle, uint32_t trixSize,const char *tip)
-{
-	return new  ADM_qt4Factory::diaElemMatrix(trix,toggleTitle,trixSize,tip);
-}
-void qt4DestroyMatrix(diaElem *e)
-{
-	ADM_qt4Factory::diaElemMatrix *a=(ADM_qt4Factory::diaElemMatrix *)e;
-	delete a;
-}

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/FAC_notch.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/FAC_notch.cpp	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/FAC_notch.cpp	2008-05-24 19:16:19 UTC (rev 4062)
@@ -1,79 +0,0 @@
-/***************************************************************************
-  FAC_toggle.cpp
-  Handle dialog factory element : Toggle
-  (C) 2006 Mean <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">Fixounet at free.fr</A> 
-***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-
-#include &lt;QtGui/QGridLayout&gt;
-#include &lt;QtGui/QCheckBox&gt;
-
-#include &quot;ADM_default.h&quot;
-#include &quot;DIA_factory.h&quot;
-
-extern const char *shortkey(const char *);
-
-namespace ADM_qt4Factory
-{
-
-
-class diaElemNotch : public diaElem
-{
-  uint32_t yesno;
-public:
-  
-  diaElemNotch(uint32_t yes,const char *toggleTitle, const char *tip=NULL);
-  virtual ~diaElemNotch() ;
-  void setMe(void *dialog, void *opaque,uint32_t line);
-  void getMe(void) {};
-};
-diaElemNotch::diaElemNotch(uint32_t yes,const char *toggleTitle, const char *tip)
-  : diaElem(ELEM_NOTCH)
-{
-  yesno=yes;
-  paramTitle=toggleTitle;
-  this-&gt;tip=tip;
-}
-
-diaElemNotch::~diaElemNotch()
-{
-  
-}
-void diaElemNotch::setMe(void *dialog, void *opaque,uint32_t line)
-{
-  QCheckBox *box=new QCheckBox(QString::fromUtf8(paramTitle),(QWidget *)dialog);
- QGridLayout *layout=(QGridLayout*) opaque;
- myWidget=(void *)box; 
- if( yesno)
- {
-    box-&gt;setCheckState(Qt::Checked); 
- }
- box-&gt;show();
- layout-&gt;addWidget(box,line,0);
-}
-//******************************************************
-//****************************************************
-} // End of namespace
-//****************************Hoook*****************
-
-diaElem  *qt4CreateNotch(uint32_t yes,const char *toggleTitle, const char *tip)
-{
-	return new  ADM_qt4Factory::diaElemNotch(yes,toggleTitle, tip);
-}
-void qt4DestroyNotch(diaElem *e)
-{
-	ADM_qt4Factory::diaElemNotch *a=(ADM_qt4Factory::diaElemNotch *)e;
-	delete a;
-}
-//EOF
-
-//EOF

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/FAC_readOnlyText.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/FAC_readOnlyText.cpp	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/FAC_readOnlyText.cpp	2008-05-24 19:16:19 UTC (rev 4062)
@@ -1,160 +0,0 @@
-/***************************************************************************
-  FAC_toggle.cpp
-  Handle dialog factory element : Toggle
-  (C) 2006 Mean <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">Fixounet at free.fr</A> 
-***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-
-#include &lt;QtGui/QGridLayout&gt;
-#include &lt;QtGui/QLabel&gt;
-#include &lt;QtGui/QLineEdit&gt;
-
-#include &quot;ADM_default.h&quot;
-#include &quot;DIA_factory.h&quot;
-
-extern const char *shortkey(const char *);
-
-namespace ADM_qt4Factory
-{
-
-class diaElemReadOnlyText : public diaElem
-{
-
-public:
-  
-  diaElemReadOnlyText(const char *readyOnly,const char *toggleTitle,const char *tip=NULL);
-  virtual ~diaElemReadOnlyText() ;
-  void setMe(void *dialog, void *opaque,uint32_t line);
-  void getMe(void);
-  
-};
-
-class diaElemText : public diaElem
-{
-
-public:
-  
-  diaElemText(char **text,const char *toggleTitle,const char *tip=NULL);
-  virtual ~diaElemText() ;
-  void setMe(void *dialog, void *opaque,uint32_t line);
-  void getMe(void);
-  void enable(uint32_t onoff);
-};
-
-//********************************************************************
-diaElemReadOnlyText::diaElemReadOnlyText(const char *readyOnly,const char *toggleTitle,const char *tip)
-  : diaElem(ELEM_TOGGLE)
-{
-  param=(void *)ADM_strdup(readyOnly);
-  paramTitle=shortkey(toggleTitle);
-  this-&gt;tip=tip;
- }
-
-diaElemReadOnlyText::~diaElemReadOnlyText()
-{
-  if(paramTitle)
-    delete paramTitle;
-  ADM_dealloc(readOnly);
-}
-void diaElemReadOnlyText::setMe(void *dialog, void *opaque,uint32_t line)
-{
-
-  QGridLayout *layout=(QGridLayout*) opaque;
-
-   
- 
- QLabel *text=new QLabel( QString::fromUtf8(this-&gt;paramTitle),(QWidget *)dialog);
-  QLabel *text2=new QLabel( QString::fromUtf8((char *)param),(QWidget *)dialog);
- text-&gt;setBuddy(text2);
- layout-&gt;addWidget(text,line,0);
- layout-&gt;addWidget(text2,line,1);
- myWidget=(void *)text2;  
-}
-void diaElemReadOnlyText::getMe(void)
-{
-
- 
-}
-//*********************************
-
-diaElemText::diaElemText(char **text,const char *toggleTitle,const char *tip)
-    : diaElem(ELEM_TEXT)
-{
-  
-  if(!*text) *text=ADM_strdup(&quot;&quot;);
-  param=(void *)text;
-  paramTitle=shortkey(toggleTitle);
-  this-&gt;tip=tip;
- }
-
-diaElemText::~diaElemText()
-{
-  if(paramTitle)
-    delete paramTitle;
-}
-void diaElemText::setMe(void *dialog, void *opaque,uint32_t line)
-{
-
- QGridLayout *layout=(QGridLayout*) opaque;
- 
- QLabel *text=new QLabel( QString::fromUtf8(this-&gt;paramTitle),(QWidget *)dialog);
- QLineEdit *lineEdit = new QLineEdit( QString::fromUtf8(*(char **)param));
- 
- text-&gt;setBuddy(lineEdit);
- layout-&gt;addWidget(text,line,0);
- layout-&gt;addWidget(lineEdit,line,1);
- myWidget=(void *)lineEdit;  
-}
-void diaElemText::getMe(void)
-{
-  char **c=(char **)param;
-  QLineEdit *lineEdit=(QLineEdit *)myWidget;
-  ADM_assert(lineEdit);
-  if(*c) ADM_dealloc(*c);
-  *c=ADM_strdup(lineEdit-&gt;text().toAscii().data());
- 
-}
-void diaElemText::enable(uint32_t onoff)
-{
-  ADM_assert(myWidget);
- QLineEdit *lineEdit=(QLineEdit *)myWidget;
-  ADM_assert(lineEdit);
-  if(onoff)
-    lineEdit-&gt;setEnabled(TRUE);
-  else
-    lineEdit-&gt;setDisabled(TRUE);
-}
-} // End of namespace
-//****************************Hoook*****************
-
-diaElem  *qt4CreateRoText(const char *text,const char *toggleTitle, const char *tip)
-{
-	return new  ADM_qt4Factory::diaElemReadOnlyText(text,toggleTitle,tip);
-}
-void qt4DestroyRoText(diaElem *e)
-{
-	ADM_qt4Factory::diaElemReadOnlyText *a=(ADM_qt4Factory::diaElemReadOnlyText *)e;
-	delete a;
-}
-
-diaElem  *qt4CreateText(char **text,const char *toggleTitle, const char *tip)
-{
-	return new  ADM_qt4Factory::diaElemText(text,toggleTitle,tip);
-}
-void qt4DestroyText(diaElem *e)
-{
-	ADM_qt4Factory::diaElemText *a=(ADM_qt4Factory::diaElemText *)e;
-	delete a;
-}
-//EOF
-
-//EOF

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_bitrate.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_bitrate.cpp	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_bitrate.cpp	2008-05-24 19:16:19 UTC (rev 4062)
@@ -1,233 +0,0 @@
-/***************************************************************************
-  FAC_toggle.cpp
-  Handle dialog factory element : Toggle
-  (C) 2006 Mean <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">Fixounet at free.fr</A> 
-***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-#include &quot;T_bitrate.h&quot;
-#include &quot;ADM_default.h&quot;
-#include &quot;DIA_factory.h&quot;
-
-extern const char *shortkey(const char *);
-
-namespace ADM_Qt4Factory
-{
-class diaElemBitrate : public diaElemBitrateBase
-{
-public:
-  diaElemBitrate(COMPRES_PARAMS *p,const char *toggleTitle,const char *tip=NULL);
-  virtual ~diaElemBitrate() ;
-  void setMe(void *dialog, void *opaque,uint32_t line);
-  void getMe(void);
-  void setMaxQz(uint32_t qz);
-  
-  void updateMe(void);
-};
-
-ADM_Qbitrate::ADM_Qbitrate(QWidget *z,COMPRES_PARAMS *p,uint32_t mq,QGridLayout *layout,int line) : QWidget(z) 
-{
-	compress=p;
-	combo=new QComboBox(z);
-
-	maxQ=mq;
-	int index=0,set=-1;
-#define add(x,z,y) if(compress-&gt;capabilities &amp; ADM_ENC_CAP_##x) {combo-&gt;addItem(QString::fromUtf8(y));\
-	if(p-&gt;mode==COMPRESS_##z) set=index;\
-	index++;}
-
-	add(CBR,CBR,QT_TR_NOOP(&quot;Constant Bitrate&quot;));
-	add(CQ,CQ,QT_TR_NOOP(&quot;Constant Quality&quot;));
-	add(SAME,SAME,QT_TR_NOOP(&quot;Same Quantizer as Input&quot;));
-	add(AQ,AQ,QT_TR_NOOP(&quot;Average Quantizer&quot;));
-	add(2PASS,2PASS,QT_TR_NOOP(&quot;Two Pass - Video Size&quot;));
-	add(2PASS_BR,2PASS_BITRATE,QT_TR_NOOP(&quot;Two Pass - Average Bitrate&quot;));
-
-	combo-&gt;show();
-
-	text1=new QLabel( QString::fromUtf8(QT_TR_NOOP(&quot;Encoding mode&quot;)),z);
-	text1-&gt;setBuddy(combo);
-	text1-&gt;show();
-
-	box=new QSpinBox(z);
-	box-&gt;show();
-
-	text2=new QLabel( QString::fromUtf8(QT_TR_NOOP(&quot;Bitrate&quot;)),z);
-	text2-&gt;setBuddy(combo);
-
-	layout-&gt;addWidget(text1,line,0);
-	layout-&gt;addWidget(combo,line,1);
-
-	layout-&gt;addWidget(text2,line+1,0);
-	layout-&gt;addWidget(box,line+1,1);
-
-	if(set!=-1) 
-	{
-		combo-&gt;setCurrentIndex(set);
-		comboChanged(set);
-	}
-
-	QObject::connect(combo, SIGNAL(currentIndexChanged(int )), this, SLOT(comboChanged(int )));
-}
-
-/**
- * 	\fn 	readPullDown
- * \brief 	Convert the raw read of the combox into the actual compression mode
- */
-static COMPRESSION_MODE readPulldown(COMPRES_PARAMS *copy,int rank)
-{
-	int index=0;
-	COMPRESSION_MODE mode=COMPRESS_MAX;
-	
-#undef LOOKUP
-#define LOOKUP(A,B) \
-  if(copy-&gt;capabilities &amp; ADM_ENC_CAP_##A) \
-  { \
-	  if(rank==index) mode=COMPRESS_##B; \
-	  index++; \
-  } 
-  
-  LOOKUP(CBR,CBR);
-  LOOKUP(CQ,CQ);
-  LOOKUP(SAME,SAME);
-  LOOKUP(AQ,AQ);
-  LOOKUP(2PASS,2PASS);
-  LOOKUP(2PASS_BR,2PASS_BITRATE);
-  
-	ADM_assert(mode!=COMPRESS_MAX);
-	return mode;
-}
-
-void ADM_Qbitrate::readBack(void)
-{
-#define Mx(x) compress-&gt;mode=x
-#define Vx(x) compress-&gt;x=box-&gt;value();
-	COMPRESSION_MODE mode=readPulldown(compress,combo-&gt;currentIndex());
-  switch(mode)
-  {
-    case COMPRESS_CBR: Mx(COMPRESS_CBR);Vx(bitrate);break;
-    case COMPRESS_CQ: Mx(COMPRESS_CQ);Vx(qz);break;
-    case COMPRESS_2PASS: Mx(COMPRESS_2PASS);Vx(finalsize);break;
-    case COMPRESS_2PASS_BITRATE: Mx(COMPRESS_2PASS_BITRATE);Vx(avg_bitrate);break;
-    case COMPRESS_SAME: Mx(COMPRESS_SAME);break;
-    case COMPRESS_AQ: Mx(COMPRESS_AQ);break;
-    default :
-          ADM_assert(0);
-  }
-}
-void ADM_Qbitrate::comboChanged(int i)
-{
-  printf(&quot;Changed\n&quot;); 
-#define P(x) text2-&gt;setText(QString::fromUtf8(x))
-#define M(x,y) box-&gt;setMinimum  (x);box-&gt;setMaximum  (y);
-#define S(x)   box-&gt;setValue(x);
-  COMPRESSION_MODE mode=readPulldown(compress,i);
-    switch(mode)
-  {
-    case COMPRESS_CBR: //CBR
-          P(QT_TR_NOOP(&quot;Target bitrate (kb/s)&quot;));
-          M(0,20000);
-          S(compress-&gt;bitrate);
-          break; 
-    case COMPRESS_<A HREF="CQ://">CQ://</A> CQ
-          P(QT_TR_NOOP(&quot;Quantizer&quot;));
-          M(2,maxQ);
-          S(compress-&gt;qz);
-          break;
-    case COMPRESS_2PASS : // 2pass Filesize
-          P(QT_TR_NOOP(&quot;Target video size (MB)&quot;));
-          M(1,8000);
-          S(compress-&gt;finalsize);
-          break;
-    case COMPRESS_2PASS_BITRATE : // 2pass Avg
-          P(QT_TR_NOOP(&quot;Average bitrate (kb/s)&quot;));
-          M(0,20000);
-          S(compress-&gt;avg_bitrate);
-          break;
-    case COMPRESS_SAME : // Same Qz as input
-          P(QT_TR_NOOP(&quot;-&quot;));
-          M(0,0);
-          break;
-    case COMPRESS_AQ : // AQ
-          P(QT_TR_NOOP(&quot;Quantizer&quot;));
-          M(2,maxQ);
-          S(compress-&gt;qz);
-          break;
-    default:ADM_assert(0);
-  }
-}
-ADM_Qbitrate::~ADM_Qbitrate()
-{
-#define DEL(x) if(x) {delete x;x=NULL;}
-#if 0 // Automatically deleted
-                 DEL(text1)
-                 DEL(text2)
-                 DEL(box) 
-                 DEL(combo) 
-#endif
-};
-
-//**********************************
-diaElemBitrate::diaElemBitrate(COMPRES_PARAMS *p,const char *toggleTitle,const char *tip)
-  : diaElemBitrateBase()
-{
- 
-  param=(void *)p;
-  memcpy(&amp;copy,p,sizeof(copy));
-  paramTitle=NULL;
-  this-&gt;tip=tip;
-  setSize(2);
-  maxQ=31;
-}
-void diaElemBitrate::setMaxQz(uint32_t qz)
-{
-  maxQ=qz; 
-}
-
-diaElemBitrate::~diaElemBitrate()
-{
-  ADM_assert(myWidget);
-#if 0 // Automatically deleted as it is a child of main dialog
-  ADM_Qbitrate *z=(ADM_Qbitrate *)myWidget;
-  
-  if(z) delete z;
-
-  myWidget=NULL;
-#endif
-}
-void diaElemBitrate::setMe(void *dialog, void *opaque,uint32_t line)
-{
-  QGridLayout *layout=(QGridLayout*) opaque;
-  
-  ADM_Qbitrate *b=new ADM_Qbitrate( (QWidget *)dialog,(COMPRES_PARAMS *)&amp;copy,maxQ,layout,line);
-  myWidget=(void *)b;
-  
-}
-void diaElemBitrate::getMe(void)
-{
-  ((ADM_Qbitrate *)myWidget)-&gt;readBack();
-  memcpy(param,&amp;copy,sizeof(copy));
-}
-
-} // End of namespace
-//****************************Hoook*****************
-
-diaElem  *qt4CreateBitrate(COMPRES_PARAMS *p,const char *toggleTitle,const char *tip)
-{
-	return new  ADM_Qt4Factory::diaElemBitrate(p,toggleTitle,tip);
-}
-void qt4DestroyBitrate(diaElem *e)
-{
-	ADM_Qt4Factory::diaElemBitrate *a=(ADM_Qt4Factory::diaElemBitrate *)e;
-	delete a;
-}
-//EOF
-

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_bitrate.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_bitrate.h	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_bitrate.h	2008-05-24 19:16:19 UTC (rev 4062)
@@ -1,34 +0,0 @@
-#ifndef T_bitrate_h
-#define T_bitrate_h
-
-#include &lt;QtGui/QComboBox&gt;
-#include &lt;QtGui/QGridLayout&gt;
-#include &lt;QtGui/QLabel&gt;
-#include &lt;QtGui/QSpinBox&gt;
-
-#include &quot;ADM_inttype.h&quot;
-#include &quot;ADM_encoder/ADM_vidEncode.hxx&quot;
-
-namespace ADM_Qt4Factory
-{
-	class  ADM_Qbitrate : public QWidget
-	{
-		Q_OBJECT
-
-	public slots:
-		void comboChanged(int i);
-
-	public:
-		QSpinBox        *box;
-		QComboBox       *combo;
-		QLabel          *text1;
-		QLabel          *text2;
-		COMPRES_PARAMS  *compress;
-		uint32_t        maxQ;
-
-		ADM_Qbitrate(QWidget *z, COMPRES_PARAMS *p, uint32_t mq, QGridLayout *layout, int line);
-		virtual ~ADM_Qbitrate();
-		void readBack(void);
-	};
-}
-#endif	// T_bitrate_h

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_button.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_button.cpp	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_button.cpp	2008-05-24 19:16:19 UTC (rev 4062)
@@ -1,103 +0,0 @@
-/***************************************************************************
-  FAC_toggle.cpp
-  Handle dialog factory element : Toggle
-  (C) 2006 Mean <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">Fixounet at free.fr</A> 
-***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-#include &quot;T_button.h&quot;
-#include &quot;ADM_default.h&quot;
-
-extern const char *shortkey(const char *);
-namespace ADM_Qt4Factory
-{
-class diaElemButton : public diaElem
-{
-  protected:
-  public:
-    void            *_cookie;
-    ADM_FAC_CALLBACK *_callBack;
-            diaElemButton(const char *toggleTitle, ADM_FAC_CALLBACK *cb,void *cookie,const char *tip=NULL);
-  virtual   ~diaElemButton() ;
-  void      setMe(void *dialog, void *opaque,uint32_t line);
-  void      getMe(void);
-  void      enable(uint32_t onoff) ;
-};
-
-ADM_Qbutton::ADM_Qbutton(QWidget *z,QGridLayout *layout,const char *blah,int line,ADM_FAC_CALLBACK *cb, void *cookie) : QWidget(z) 
-{
-	_cb=cb;
-	_cookie=cookie;
-	button=new QPushButton(QString::fromUtf8(blah),z);
-	button-&gt;show();
-	layout-&gt;addWidget(button,line,0);
-	QObject::connect(button, SIGNAL(clicked(bool)), this, SLOT(clicked(bool )));
-}
-
-void ADM_Qbutton::clicked(bool i)
-{
-    _cb(_cookie);
-}
-ADM_Qbutton::~ADM_Qbutton()
-{
-}
-//*****************************
-diaElemButton:: diaElemButton(const char *toggleTitle, ADM_FAC_CALLBACK *cb,void *cookie,const char *tip)
-  : diaElem(ELEM_BUTTON)
-{
-  param=(void *)NULL;
-  paramTitle=shortkey(toggleTitle);
-  this-&gt;tip=tip;
-  _cookie=cookie;
-  _callBack=cb;
-  
-}
-
-diaElemButton::~diaElemButton()
-{
-	delete paramTitle;
-}
-
-void diaElemButton::setMe(void *dialog, void *opaque,uint32_t line)
-{
-  QGridLayout *layout=(QGridLayout*) opaque;
-  
-  ADM_Qbutton *b=new ADM_Qbutton( (QWidget *)dialog,layout,paramTitle,line,_callBack,_cookie);
-  myWidget=(void *)b;
-}
-void diaElemButton::getMe(void)
-{
-  if(paramTitle)
-  {
-    ADM_dealloc(paramTitle);
-    paramTitle=NULL; 
-  }
-}
-void   diaElemButton::enable(uint32_t onoff)
-{
-
-}
-
-}; // End of namespace
-//****************************Hoook*****************
-
-diaElem  *qt4CreateButton(const char *toggleTitle, ADM_FAC_CALLBACK *cb,void *cookie,const char *tip)
-{
-	return new  ADM_Qt4Factory::diaElemButton(toggleTitle,cb,cookie,tip);
-}
-void qt4DestroyButton(diaElem *e)
-{
-	ADM_Qt4Factory::diaElemButton *a=(ADM_Qt4Factory::diaElemButton *)e;
-	delete a;
-}
-//
-//EOF
-

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_button.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_button.h	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_button.h	2008-05-24 19:16:19 UTC (rev 4062)
@@ -1,31 +0,0 @@
-#ifndef T_button_h
-#define T_button_h
-
-#include &lt;QtGui/QGridLayout&gt;
-#include &lt;QtGui/QPushButton&gt;
-#include &lt;QtGui/QWidget&gt;
-
-#include &quot;ADM_inttype.h&quot;
-#include &quot;DIA_factory.h&quot;
-
-namespace ADM_Qt4Factory
-{
-	class ADM_Qbutton : public QWidget
-	{
-		Q_OBJECT
-
-	public slots:
-		void clicked(bool i);
-
-	protected :
-		ADM_FAC_CALLBACK *_cb;
-		void *_cookie;
-
-	public:
-		QPushButton *button;
-
-		ADM_Qbutton(QWidget *z, QGridLayout *layout, const char *blah, int line, ADM_FAC_CALLBACK *cb, void *cookie);
-		virtual ~ADM_Qbutton();
-	};
-}
-#endif	// T_button_h

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_dialogFactory.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_dialogFactory.cpp	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_dialogFactory.cpp	2008-05-24 19:16:19 UTC (rev 4062)
@@ -1,336 +0,0 @@
-/***************************************************************************
-  DIA_dialogFactory.cpp
-  (C) 2007 Mean <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">Fixounet at free.fr</A> 
-***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-#include &lt;QtGui/QDialogButtonBox&gt;
-#include &lt;QtGui/QGridLayout&gt;
-#include &lt;QtGui/QSpacerItem&gt;
-#include &lt;QtGui/QTabWidget&gt;
-
-#include &quot;T_dialogFactory.h&quot;
-#include &quot;ADM_default.h&quot;
-#include &quot;DIA_factory.h&quot;
-#include &quot;DIA_coreToolkit.h&quot;
-#include &quot;DIA_coreUI_internal.h&quot;
-
-static void insertTab(uint32_t index, diaElemTabs *tab, QTabWidget *wtab);
-factoryWindow::factoryWindow()     : QDialog()
- {
-//     ui.setupUi(this);
-     //connect( (ui.pushButton),SIGNAL(pressed()),this,SLOT(buttonPressed()));
- }
-
-
-/**
-    \fn qt4DiaFactoryRun(const char *title,uint32_t nb,diaElem **elems)
-    \brief  Run a dialog made of nb elems, each elem being described in the **elems
-    @return 0 on failure, 1 on success
-*/
-
-uint8_t qt4DiaFactoryRun(const char *title,uint32_t nb,diaElem **elems)
-{
-  factoryWindow dialog;
-  
-  ADM_assert(title);
-  ADM_assert(nb);
-  ADM_assert(elems);
-  
-  dialog.setWindowTitle(QString::fromUtf8(title));
-  
-  QGridLayout layout(&amp;dialog);
-  
-  /* First compute the size of our window */
-  int vsize=0;
-  for(int i=0;i&lt;nb;i++)
-  {
-    ADM_assert(elems[i]);
-     vsize+=elems[i]-&gt;getSize(); 
-  }
-
- int  v=0;
-  for(int i=0;i&lt;nb;i++)
-  {
-    ADM_assert(elems[i]);
-     elems[i]-&gt;setMe( (void *)&amp;dialog,&amp;layout,v); 
-     v+=elems[i]-&gt;getSize();
-    
-  }
-   for(int i=0;i&lt;nb;i++)
-  {
-    ADM_assert(elems[i]);
-     elems[i]-&gt;finalize(); 
-  }
-  // Add buttons
-   QDialogButtonBox buttonBox((QWidget *)&amp;dialog);
-    buttonBox.setStandardButtons(QDialogButtonBox::Ok
-                            | QDialogButtonBox::Cancel);
-     QObject::connect(&amp;buttonBox, SIGNAL(accepted()), &amp;dialog, SLOT(accept()));
-     QObject::connect(&amp;buttonBox, SIGNAL(rejected()), &amp;dialog, SLOT(reject()));
-     layout.addWidget(&amp;buttonBox,vsize,0);
-  // run
-  dialog.setLayout(&amp;layout);
-  if(dialog.exec()==QDialog::Accepted)
-  {
-     for(int i=0;i&lt;nb;i++)
-     {
-        ADM_assert(elems[i]);
-        elems[i]-&gt;getMe(); 
-    
-      }
-    return 1;
-  }
-  return 0;
-  
-}
-/**
-    \fn shortkey(const char *in)
-    \brief translate gtk like accelerator (_) to QT4 like accelerator (&amp;)
-*/
-const char *shortkey(const char *in)
-{
- char *t=ADM_strdup(in);
- for(int i=0;i&lt;strlen(t);i++)
- {
-    if(t[i]=='_') t[i]='&amp;'; 
- }
-  return t;
-}
-/**
- * 	\fn qt4DiaFactoryRunTabs
- */
-uint8_t qt4DiaFactoryRunTabs(const char *title,uint32_t nb,diaElemTabs **tabs)
-{
-    factoryWindow dialog;
-  
-  ADM_assert(title);
-  ADM_assert(nb);
-  ADM_assert(tabs);
-  
-  dialog.setWindowTitle(QString::fromUtf8(title));
-  
-  QGridLayout layout(&amp;dialog);
-
-  // Add tabs
-  QTabWidget wtabs((QWidget *)&amp;dialog);
-  // Add buttons
-   QDialogButtonBox buttonBox((QWidget *)&amp;dialog);
-    buttonBox.setStandardButtons(QDialogButtonBox::Ok
-                            | QDialogButtonBox::Cancel);
-     QObject::connect(&amp;buttonBox, SIGNAL(accepted()), &amp;dialog, SLOT(accept()));
-     QObject::connect(&amp;buttonBox, SIGNAL(rejected()), &amp;dialog, SLOT(reject()));
-     
-     for(int i=0;i&lt;nb;i++)
-     {
-        ADM_assert(tabs[i]);
-        insertTab(i,tabs[i],&amp;wtabs); 
-    
-      }
-     
-     layout.addWidget(&amp;wtabs,0,0);
-     layout.addWidget(&amp;buttonBox,1,0);
-  // run
-  dialog.setLayout(&amp;layout);
-  if(dialog.exec()==QDialog::Accepted)
-  {
-      // Read tabs
-       for(int tab=0;tab&lt;nb;tab++)
-     {
-        ADM_assert(tabs[tab]);
-        diaElemTabs *myTab=tabs[tab];
-        for(int i=0;i&lt;myTab-&gt;nbElems;i++)
-        {
-          myTab-&gt;dias[i]-&gt;getMe();
-        }
-    
-      }
-      return 1;
-  }
-  return 0;
-  
-}
-
-void insertTab(uint32_t index, diaElemTabs *tab, QTabWidget *wtab)
-{
-
-  QWidget *wid=new QWidget;
-  QGridLayout *layout=new QGridLayout(wid);
-  QSpacerItem *spacerItem = new QSpacerItem(20, 40, QSizePolicy::Minimum, QSizePolicy::Expanding);
-  
-  /* First compute the size of our window */
-  int vsize=0;
-  for(int i=0;i&lt;tab-&gt;nbElems;i++)
-  {
-    ADM_assert(tab-&gt;dias[i]);
-     vsize+=tab-&gt;dias[i]-&gt;getSize(); 
-  }
-
- int  v=0;
-  for(int i=0;i&lt;tab-&gt;nbElems;i++)
-  {
-     ADM_assert(tab-&gt;dias[i]);
-     tab-&gt;dias[i]-&gt;setMe( wid,layout,v); 
-     v+=tab-&gt;dias[i]-&gt;getSize();
-    
-  }
-  
-  wtab-&gt;addTab(wid,QString::fromUtf8(tab-&gt;title));
-  for(int i=0;i&lt;tab-&gt;nbElems;i++)
-  {
-    tab-&gt;dias[i]-&gt;finalize(); 
-  }
-
-  layout-&gt;addItem(spacerItem, v, 0);
-}
-
-/**
- * 
- */
-/**
- *  \fn gtkFactoryGetVersion
- * 	\brief returns the version this has been compiled with
- */
-void      qt4FactoryGetVersion(uint32_t *maj,uint32_t *minor,uint32_t *patch)
-{
-	*maj=ADM_COREUI_MAJOR;
-	*minor=ADM_COREUI_MINOR;
-	*patch=ADM_COREUI_PATCH;
-	
-}
-extern CREATE_BITRATE_T     qt4CreateBitrate;
-extern DELETE_DIA_ELEM_T    qt4DestroyBitrate;
-extern CREATE_BAR_T         qt4CreateBar;
-extern DELETE_DIA_ELEM_T    qt4DestroyBar;
-extern CREATE_FLOAT_T       qt4CreateFloat;
-extern DELETE_DIA_ELEM_T    qt4DestroyFloat;
-extern CREATE_FRAME_T		qt4CreateFrame;
-extern DELETE_DIA_ELEM_T    qt4DestroyFrame;
-extern CREATE_HEX_T         qt4CreateHex;
-extern DELETE_DIA_ELEM_T    qt4DestroyHex;
-extern CREATE_INTEGER_T     qt4CreateInteger;
-extern CREATE_UINTEGER_T    qt4CreateUInteger;
-extern DELETE_DIA_ELEM_T    qt4DestroyInteger;
-extern DELETE_DIA_ELEM_T    qt4DestroyUInteger;
-extern CREATE_MATRIX_T      qt4CreateMatrix;
-extern DELETE_DIA_ELEM_T    qt4DestroyMatrix;
-extern CREATE_NOTCH_T       qt4CreateNotch;
-extern DELETE_DIA_ELEM_T    qt4DestroyNotch;
-extern CREATE_READONLYTEXT_T qt4CreateRoText;
-extern CREATE_TEXT_T 	   qt4CreateText;
-extern DELETE_DIA_ELEM_T   qt4DestroyRoText;
-extern DELETE_DIA_ELEM_T   qt4DestroyText;
-extern CREATE_BUTTON_T     qt4CreateButton;
-extern DELETE_DIA_ELEM_T   qt4DestroyButton;
-extern CREATE_FILE_T       qt4CreateFile;
-extern DELETE_DIA_ELEM_T   qt4DestroyFile;
-extern CREATE_DIR_T        qt4CreateDir;
-extern DELETE_DIA_ELEM_T   qt4DestroyDir;
-extern CREATE_MENUDYNAMIC_T     qt4CreateMenuDynamic;
-extern CREATE_MENU_T       qt4CreateMenu;
-extern DELETE_DIA_ELEM_T   qt4DestroyMenu;
-extern DELETE_DIA_ELEM_T   qt4DestroyMenuDynamic;
-extern CREATE_USLIDER_T     qt4CreateUSlider;
-extern DELETE_DIA_ELEM_T    qt4DestroyUSlider;
-extern 	CREATE_SLIDER_T     qt4CreateSlider;
-extern 	DELETE_DIA_ELEM_T   qt4DestroySlider;
-extern CREATE_THREADCOUNT_T qt4CreateThreadCount;
-extern DELETE_DIA_ELEM_T    qt4DestroyThreadCount;
-extern CREATE_TOGGLE_UINT   qt4CreateToggleUint;
-extern DELETE_DIA_ELEM_T    qt4DestroyToggleUint;
-extern CREATE_TOGGLE_INT    qt4CreateToggleInt;
-extern DELETE_DIA_ELEM_T    qt4DestroyToggleInt;
-extern CREATE_TOGGLE_T      qt4CreateToggle;
-extern DELETE_DIA_ELEM_T    qt4DestroyToggle;
-
-//************
-static FactoryDescriptor Qt4FactoryDescriptor=
-{
-	&amp;qt4FactoryGetVersion,
-	&amp;qt4DiaFactoryRun,
-	&amp;qt4DiaFactoryRunTabs,
-	// Buttons
-	&amp;qt4CreateButton,
-	&amp;qt4DestroyButton,
-	// Bar
-	&amp;qt4CreateBar,
-	&amp;qt4DestroyBar,
-	// Float
-	&amp;qt4CreateFloat,
-	&amp;qt4DestroyFloat,
-	// Integer
-	&amp;qt4CreateInteger,
-	&amp;qt4DestroyInteger,
-	// UInteger
-	&amp;qt4CreateUInteger,
-	&amp;qt4DestroyUInteger,
-	// Notch
-	&amp;qt4CreateNotch,
-	&amp;qt4DestroyNotch,
-	// RoText
-	&amp;qt4CreateRoText,
-	&amp;qt4DestroyRoText,
-	// Text
-	&amp;qt4CreateText,
-	&amp;qt4DestroyText,
-	// Hex
-	&amp;qt4CreateHex,
-	&amp;qt4DestroyHex,
-	// Matrix
-	&amp;qt4CreateMatrix,
-	&amp;qt4DestroyMatrix,
-	// Menu
-	&amp;qt4CreateMenu,
-	&amp;qt4DestroyMenu,
-	&amp;qt4CreateMenuDynamic,
-	&amp;qt4DestroyMenuDynamic,
-	// ThreadCount
-	&amp;qt4CreateThreadCount,
-	&amp;qt4DestroyThreadCount,
-	// Bitrate
-	&amp;qt4CreateBitrate,
-	&amp;qt4DestroyBitrate,
-	// File
-	&amp;qt4CreateFile,
-	&amp;qt4DestroyFile,
-	// Dir
-	&amp;qt4CreateDir,
-	&amp;qt4DestroyDir,
-	// Frame
-	&amp;qt4CreateFrame,
-	&amp;qt4DestroyFrame,
-    // Toggle uint/int
-	&amp;qt4CreateToggleUint,
-	&amp;qt4DestroyToggleUint,
-	&amp;qt4CreateToggleInt,
-	&amp;qt4DestroyToggleInt,
-	// Regular toggle
-	&amp;qt4CreateToggle,
-	&amp;qt4DestroyToggle,
-	// Slider
-	&amp;qt4CreateUSlider,
-	&amp;qt4DestroyUSlider,
-	&amp;qt4CreateSlider,
-	&amp;qt4DestroySlider
-};
-
-/**
- * 	\fn InitFactory
- *  \brief Install our factory hooks
- */
-void InitFactory(void)
-{
-	DIA_factoryInit(&amp;Qt4FactoryDescriptor);
-	
-	
-}
-
-//EOF

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_dialogFactory.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_dialogFactory.h	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_dialogFactory.h	2008-05-24 19:16:19 UTC (rev 4062)
@@ -1,13 +0,0 @@
-#ifndef T_dialogFactory_h
-#define T_dialogFactory_h
-
-#include &lt;QtGui/QDialog&gt;
-
-class factoryWindow : public QDialog
-{
-	Q_OBJECT
-
-public:
-	factoryWindow();
-};
-#endif	// T_dialogFactory_h

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_filesel.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_filesel.cpp	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_filesel.cpp	2008-05-24 19:16:19 UTC (rev 4062)
@@ -1,253 +0,0 @@
-/***************************************************************************
-  FAC_filesel.cpp
-  Handle dialog factory element : Filesel
-  (C) 2006 Mean <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">Fixounet at free.fr</A> 
-***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-#include &quot;T_filesel.h&quot;
-#include &quot;ADM_default.h&quot;
-//#include &quot;prefs.h&quot;
-#include &quot;DIA_factory.h&quot;
-#include &quot;DIA_fileSel.h&quot;
-
-extern const char *shortkey(const char *);
-void GUI_FileSelRead(const char *label, char * * name);
-#define MAX_SEL 2040
-
-namespace ADM_Qt4Factory
-{
-class diaElemFile : public diaElemFileBase
-{
-
-protected:
-    
-public:
-  
-  diaElemFile(uint32_t writeMode,char **filename,const char *toggleTitle,
-              const char *defaultSuffix = 0,const char *tip=NULL);
-  virtual ~diaElemFile() ;
-  void setMe(void *dialog, void *opaque,uint32_t line);
-  void getMe(void);
-  
-  void   changeFile(void);
-  void   enable(uint32_t onoff);
-};
-class diaElemDirSelect : public diaElemDirSelectBase
-{
-
-public:
-  
-  diaElemDirSelect(char **filename,const char *toggleTitle,const char *tip=NULL);
-  virtual ~diaElemDirSelect() ;
-  void setMe(void *dialog, void *opaque,uint32_t line);
-  void getMe(void);
-  
-  void changeFile(void);
-  void   enable(uint32_t onoff);
-};
-
-void ADM_Qfilesel::buttonPressed(QAbstractButton *s)
-{ 
-	uint8_t r=0;
-	char buffer[MAX_SEL+1],*txt;
-	txt=&quot;&quot;;
-	switch(fileMode)
-	{
-		case ADM_FILEMODE_READ:
-			r=FileSel_SelectRead(selectDesc,buffer,MAX_SEL,txt);
-			break;
-		case ADM_FILEMODE_WRITE:
-#warning FIXME
-#if 0
-			if (defaultSuffix)
-			{
-				const char * lastfilename;
-				if (prefs-&gt;get(LASTFILES_FILE1,(ADM_filename **)&amp;lastfilename))
-				{
-					strcpy (buffer, lastfilename);
-					char * cptr = buffer + strlen (buffer);
-					while (cptr &gt; buffer)
-					{
-						if (*cptr == '.')
-						{
-							strcpy (cptr + 1, defaultSuffix);
-							txt = buffer;
-							printf (&quot;Default output filename is %s based on &quot;
-								&quot;%s + %s\n&quot;,
-								txt, lastfilename, defaultSuffix);
-							break;
-						}
-						--cptr;
-					}
-				}
-			}
-#endif
-			r=FileSel_SelectWrite(selectDesc,buffer,MAX_SEL,txt);
-			break;
-
-		case ADM_FILEMODE_DIR:
-			r=FileSel_SelectDir(selectDesc,buffer,MAX_SEL,txt);
-			break;
-		default:
-			ADM_assert(0);
-	}
-	if(r)
-	{
-		edit-&gt;setText(QString::fromUtf8(buffer));
-	}
-}
-
-ADM_Qfilesel::ADM_Qfilesel(QWidget *z,const char *title,const char *entry,QGridLayout *layout,int line, ADM_fileMode mode, const char * defaultSuffix, const char* selectDesc) : 
-	QWidget(z), defaultSuffix (defaultSuffix), selectDesc (selectDesc)
-{          
-	fileMode=mode;
-	edit=new QLineEdit(QString::fromUtf8(entry),z);
-
-	edit-&gt;show();
-
-	button=new QDialogButtonBox(QDialogButtonBox::Open,Qt::Horizontal,z);
-	button-&gt;show();
-
-	text=new QLabel(QString::fromUtf8(title),z);
-	text-&gt;setBuddy(edit);
-	layout-&gt;addWidget(text,line,0);
-	layout-&gt;addWidget(edit,line,1);
-	layout-&gt;addWidget(button,line,2);
-	//QObject::connect(&amp;button, SIGNAL(accepted()), NULL, SLOT(accept())); 
-	connect( button,SIGNAL(clicked(QAbstractButton  *)),this,SLOT(buttonPressed(QAbstractButton  *)));
-}
-
-ADM_Qfilesel::~ADM_Qfilesel() 
-{
-#if 1 //Memleak or autoclean ?
-	if(edit) delete edit;
-	if(button) delete button;
-	if(text) delete text;
-#endif
-};
-
-diaElemFile::diaElemFile(uint32_t writemode,char **filename,const char *toggleTitle,
-                         const char *defaultSuffix,const char *selectFileDesc)
-  : diaElemFileBase()
-    
-{
-  this-&gt;defaultSuffix=defaultSuffix;
-  param=(void *)filename;
-  paramTitle=shortkey(toggleTitle);
-
-  if (!selectFileDesc || strlen(selectFileDesc) == 0)
-	  tip = toggleTitle;
-  else
-      tip = selectFileDesc;
-
-  _write=writemode;
-}
-
-diaElemFile::~diaElemFile()
-{
-  if(paramTitle)
-    delete paramTitle;
-}
-
-void diaElemFile::setMe(void *dialog, void *opaque,uint32_t line)
-{
- QGridLayout *layout=(QGridLayout*) opaque;
- ADM_Qfilesel *fs;
-  if(_write)
-      fs=new ADM_Qfilesel((QWidget *)dialog,paramTitle, *(const char**)param, layout, line,ADM_FILEMODE_WRITE, defaultSuffix, tip);
-  else
-      fs=new ADM_Qfilesel((QWidget *)dialog,paramTitle, *(const char**)param, layout, line,ADM_FILEMODE_READ, 0, tip);
-  myWidget=(void *)fs; 
-}
-
-void diaElemFile::getMe(void)
-{
-  char **n=(char **)param;
-  if(*n) ADM_dealloc(*n);
-  
-  ADM_Qfilesel *fs=(ADM_Qfilesel *)myWidget;
-  QString s=(fs-&gt;edit)-&gt;text();
-  *n=ADM_strdup(s.toUtf8().constData());
-}
-
-void diaElemFile::enable(uint32_t onoff)
-{
-  ADM_Qfilesel *fs=(ADM_Qfilesel *)myWidget;
-  fs-&gt;setEnabled(onoff);
-}
-void diaElemFile::changeFile(void) {}
-//****************************
-diaElemDirSelect::diaElemDirSelect(char **filename,const char *toggleTitle,const char *selectDirDesc) :
-	diaElemDirSelectBase()
-{
-  param=(void *)filename;
-  paramTitle=shortkey(toggleTitle);
-
-  if (!selectDirDesc || strlen(selectDirDesc) == 0)
-	  tip = toggleTitle;
-  else
-      tip = selectDirDesc;
-}
-
-diaElemDirSelect::~diaElemDirSelect() 
-{
-if(paramTitle)
-    delete paramTitle;
-}
-
-void diaElemDirSelect::setMe(void *dialog, void *opaque,uint32_t line)
-{
- QGridLayout *layout=(QGridLayout*) opaque;
-  
-  ADM_Qfilesel *fs=new ADM_Qfilesel((QWidget *)dialog, paramTitle, *(char **)param, layout, line, ADM_FILEMODE_DIR, 0, tip);
-  myWidget=(void *)fs; 
-}
-
-void diaElemDirSelect::getMe(void) 
-{
- char **n=(char **)param;
-  if(*n) ADM_dealloc(*n);
-  *n=NULL;
-  ADM_Qfilesel *fs=(ADM_Qfilesel *)myWidget;
-  QString s=(fs-&gt;edit)-&gt;text();
-  *n=ADM_strdup(s.toUtf8().constData());
-}
-
-void diaElemDirSelect::enable(uint32_t onoff) {}
-  
-void diaElemDirSelect::changeFile(void) {}
-} // End of namespace
-//****************************Hoook*****************
-
-diaElem  *qt4CreateFile(uint32_t writeMode,char **filename,const char *toggleTitle,
-        const char *defaultSuffix ,const char *tip)
-{
-	return new  ADM_Qt4Factory::diaElemFile(writeMode,filename,toggleTitle,defaultSuffix ,tip);
-}
-void qt4DestroyFile(diaElem *e)
-{
-	ADM_Qt4Factory::diaElemFile *a=(ADM_Qt4Factory::diaElemFile *)e;
-	delete a;
-}
-
-diaElem  *qt4CreateDir(char **filename,const char *toggleTitle,const char *tip)
-{
-	return new  ADM_Qt4Factory::diaElemDirSelect(filename,toggleTitle,tip);
-}
-void qt4DestroyDir(diaElem *e)
-{
-	ADM_Qt4Factory::diaElemDirSelect *a=(ADM_Qt4Factory::diaElemDirSelect *)e;
-	delete a;
-}
-//EOF
-
-//EOF

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_filesel.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_filesel.h	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_filesel.h	2008-05-24 19:16:19 UTC (rev 4062)
@@ -1,39 +0,0 @@
-#ifndef T_filesel_h
-#define T_filesel_h
-
-#include &lt;QtGui/QAbstractButton&gt;
-#include &lt;QtGui/QDialogButtonBox&gt;
-#include &lt;QtGui/QGridLayout&gt;
-#include &lt;QtGui/QLabel&gt;
-#include &lt;QtGui/QLineEdit&gt;
-#include &lt;QtGui/QWidget&gt;
-
-namespace ADM_Qt4Factory
-{
-	typedef enum 
-	{
-		ADM_FILEMODE_DIR,
-		ADM_FILEMODE_READ,
-		ADM_FILEMODE_WRITE
-	} ADM_fileMode;
-
-	class ADM_Qfilesel : public QWidget
-	{
-		Q_OBJECT
-
-	public slots:
-		void buttonPressed(QAbstractButton *s);
-
-	public:
-		QLineEdit *edit;
-		QDialogButtonBox *button;
-		QLabel *text;
-		ADM_fileMode fileMode;
-		const char *defaultSuffix;
-		const char *selectDesc;
-
-		ADM_Qfilesel(QWidget *z, const char *title, const char *entry, QGridLayout *layout, int line, ADM_fileMode mode, const char * defaultSuffix, const char* selectDesc);
-		~ADM_Qfilesel();
-	};
-}
-#endif	// T_filesel_h

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_menu.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_menu.cpp	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_menu.cpp	2008-05-24 19:16:19 UTC (rev 4062)
@@ -1,264 +0,0 @@
-/***************************************************************************
-  FAC_toggle.cpp
-  Handle dialog factory element : Toggle
-  (C) 2006 Mean <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">Fixounet at free.fr</A> 
-***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-#include &quot;T_menu.h&quot;
-#include &quot;ADM_default.h&quot;
-
-#include &lt;QtGui/QGridLayout&gt;
-#include &lt;QtGui/QLabel&gt;
-
-extern const char *shortkey(const char *);
-
-namespace ADM_qt4Factory
-{
-class diaElemMenu : public diaElemMenuBase
-{
-protected:
-	diaElemMenuDynamic  *dyna;
-	diaMenuEntryDynamic  **menus;	
-
-public:
-  diaElemMenu(uint32_t *intValue,const char *itle, uint32_t nb, 
-               const diaMenuEntry *menu,const char *tip=NULL);
-  
-  virtual ~diaElemMenu() ;
-  void setMe(void *dialog, void *opaque,uint32_t line);
-  void getMe(void);
-  virtual uint8_t   link(diaMenuEntry *entry,uint32_t onoff,diaElem *w);
-  virtual void      updateMe(void);
-  void      enable(uint32_t onoff) ;
-  void      finalize(void);;
-};
-
-/**/
-
-ADM_QComboBox::ADM_QComboBox(QWidget *root,diaElemMenuDynamic *menu) : QComboBox(root)
-{
-	_menu=menu;
-}
-
-void ADM_QComboBox::changed(int i)
-{
-	_menu-&gt;updateMe();
-}
-
-void ADM_QComboBox::connectMe(void)
-{
-	QObject::connect(this, SIGNAL(currentIndexChanged(int)), this, SLOT(changed(int )));
-}
-
-diaElemMenu::diaElemMenu(uint32_t *intValue,const char *itle, uint32_t nb, 
-               const diaMenuEntry *menu,const char *tip)
-  : diaElemMenuBase()
-{
-  param=(void *)intValue;
-  paramTitle=itle;
-  this-&gt;tip=tip;
-  this-&gt;menu=menu;
-  this-&gt;nbMenu=nb;
-  nbLink=0;
-  
-  menus=new diaMenuEntryDynamic * [nb];
-  for(int i=0;i&lt;nb;i++)
-  {
-    menus[i]=new  diaMenuEntryDynamic(menu[i].val,menu[i].text,menu[i].desc);
-  }
-  dyna=new diaElemMenuDynamic(intValue,itle,nb,menus,tip);
-}
-
-diaElemMenu::~diaElemMenu()
-{
-  for(int i=0;i&lt;nbMenu;i++)
-      delete menus[i];
-  delete [] menus;
-  delete dyna;
-  
-}
-void diaElemMenu::setMe(void *dialog, void *opaque,uint32_t line)
-{
-  dyna-&gt;setMe(dialog,opaque,line);
-}
-
-void diaElemMenu::getMe(void)
-{
- dyna-&gt;getMe();
-}
-void   diaElemMenu::updateMe(void)
-{
-  dyna-&gt;updateMe();
-}
-uint8_t   diaElemMenu::link(diaMenuEntry *entry,uint32_t onoff,diaElem *w)
-{
-    for(int i=0;i&lt;nbMenu;i++)
-    {
-        if(entry-&gt;val==menus[i]-&gt;val)
-            return dyna-&gt;link(menus[i],onoff,w);
-    }
-    ADM_assert(0);
-}
-void   diaElemMenu::enable(uint32_t onoff)
-{
-  
-    dyna-&gt;enable(onoff);
-}
-void   diaElemMenu::finalize(void)
-{
-  dyna-&gt;finalize();
-}
-//*********************************
-//* DYNAMIC                       *
-//*********************************
-
-diaElemMenuDynamic::diaElemMenuDynamic(uint32_t *intValue,const char *itle, uint32_t nb, 
-                diaMenuEntryDynamic **menu,const char *tip)
-  : diaElemMenuDynamicBase()
-{
-  param=(void *)intValue;
-  paramTitle=shortkey(itle);
-  this-&gt;tip=tip;
-  this-&gt;menu=menu;
-  this-&gt;nbMenu=nb;
-  nbLink=0;
-}
-
-diaElemMenuDynamic::~diaElemMenuDynamic()
-{
-  if(paramTitle)
-    delete paramTitle;
-}
-void diaElemMenuDynamic::setMe(void *dialog, void *opaque,uint32_t line)
-{
-  ADM_QComboBox *combo=new ADM_QComboBox( (QWidget *)dialog,this);
-  QGridLayout *layout=(QGridLayout*) opaque;
-     myWidget=(void *)combo; 
-
-	 QLabel *text=new QLabel( QString::fromUtf8(this-&gt;paramTitle),(QWidget *)dialog);
-  
-  // Fill in combobox
-  int mem=0;
-  diaMenuEntryDynamic **entries=menu;
-  for(int i=0;i&lt;nbMenu;i++)
-  {
-    combo-&gt;addItem(QString::fromUtf8(entries[i]-&gt;text));
-    if( *(uint32_t *)param==entries[i]-&gt;val) mem=i;
-  }
-   combo-&gt;setCurrentIndex(mem);
-   text-&gt;setBuddy(combo);
-   layout-&gt;addWidget(text,line,0);
-   layout-&gt;addWidget(combo,line,1);
-   
-   combo-&gt;connectMe();
-}
-
-void diaElemMenuDynamic::getMe(void)
-{
-  ADM_QComboBox *combo=(ADM_QComboBox *)myWidget;
-  int r;
-  r=combo-&gt;currentIndex();
-  if(!nbMenu) return;
-  ADM_assert(r&lt;nbMenu);
-  *(uint32_t *)param=menu[r]-&gt;val;
-      
-}
-void diaElemMenuDynamic::finalize(void)
-{ 
-   ADM_QComboBox *combo=(ADM_QComboBox *)myWidget;
-  uint32_t val;
-  uint32_t rank;
-  if(!nbMenu) return;
-  ADM_assert(combo);
-  
-  
-  rank=combo-&gt;currentIndex();
-  ADM_assert(rank&lt;this-&gt;nbMenu);
-  val=this-&gt;menu[rank]-&gt;val;
-  /* Now search through the linked list to see if something happens ...*/
- 
-   /* 1 disable everything */
-  for(int i=0;i&lt;nbLink;i++)
-  {
-    dialElemLink *l=&amp;(links[i]);
-    if(l-&gt;value==val)
-    {
-      if(!l-&gt;onoff)  l-&gt;widget-&gt;enable(FALSE);
-    }else
-    {
-       if(l-&gt;onoff)  l-&gt;widget-&gt;enable(FALSE);
-    }
-    
-  }
-  /* Then enable */
-  for(int i=0;i&lt;nbLink;i++)
-  {
-    dialElemLink *l=&amp;(links[i]);
-    if(l-&gt;value==val)
-    {
-      if(l-&gt;onoff)  l-&gt;widget-&gt;enable(TRUE);
-    }else
-    {
-       if(!l-&gt;onoff)  l-&gt;widget-&gt;enable(TRUE);
-    }
-    
-  }
-}
-void diaElemMenuDynamic::enable(uint32_t onoff)
-{ 
-   ADM_QComboBox *combo=(ADM_QComboBox *)myWidget;
-  ADM_assert(combo);
-  if(onoff)
-    combo-&gt;setEnabled(true);
-  else
-    combo-&gt;setDisabled(true);
-}
-
-uint8_t   diaElemMenuDynamic::link(diaMenuEntryDynamic *entry,uint32_t onoff,diaElem *w)
-{
-    ADM_assert(nbLink&lt;MENU_MAX_lINK);
-    links[nbLink].value=entry-&gt;val;
-    links[nbLink].onoff=onoff;
-    links[nbLink].widget=w;
-    nbLink++;
-    return 1;
-}
-void   diaElemMenuDynamic::updateMe(void)
-{
-  finalize();
-}
-//********************
-}; // End of namespace
-
-diaElem  *qt4CreateMenu(uint32_t *intValue,const char *itle, uint32_t nb,         const diaMenuEntry *menu,const char *tip)
-{
-	return new  ADM_qt4Factory::diaElemMenu(intValue,itle,nb,menu,tip);
-}
-void qt4DestroyMenu(diaElem *e)
-{
-	ADM_qt4Factory::diaElemMenu *a=(ADM_qt4Factory::diaElemMenu *)e;
-	delete a;
-}
-diaElem  *qt4CreateMenuDynamic(uint32_t *intValue,const char *itle, uint32_t nb, 
-        diaMenuEntryDynamic **menu,const char *tipp)
-{
-	return new  ADM_qt4Factory::diaElemMenuDynamic(intValue,itle,nb,menu,tipp);
-}
-void qt4DestroyMenuDynamic(diaElem *e)
-{
-	ADM_qt4Factory::diaElemMenuDynamic *a=(ADM_qt4Factory::diaElemMenuDynamic *)e;
-	delete a;
-}
-
-//EOF
-
-//EOF

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_menu.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_menu.h	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_menu.h	2008-05-24 19:16:19 UTC (rev 4062)
@@ -1,40 +0,0 @@
-#ifndef T_menu_h
-#define T_menu_h
-
-#include &lt;QtGui/QComboBox&gt;
-
-#include &quot;ADM_inttype.h&quot;
-#include &quot;DIA_factory.h&quot;
-
-namespace ADM_qt4Factory
-{
-	class diaElemMenuDynamic : public diaElemMenuDynamicBase
-	{
-	public:
-		diaElemMenuDynamic(uint32_t *intValue, const char *itle, uint32_t nb, diaMenuEntryDynamic **menu, const char *tip = NULL);
-
-		virtual   ~diaElemMenuDynamic() ;
-		void      setMe(void *dialog, void *opaque,uint32_t line);
-		void      getMe(void);
-		virtual uint8_t   link(diaMenuEntryDynamic *entry,uint32_t onoff,diaElem *w);
-		virtual void      updateMe(void);
-		virtual void      enable(uint32_t onoff) ;
-		virtual void      finalize(void);
-	};
-
-	class ADM_QComboBox : public QComboBox
-	{
-		Q_OBJECT
-
-	public slots:
-		void changed(int i);
-
-	protected:
-		diaElemMenuDynamic *_menu;
-
-	public:
-		ADM_QComboBox(QWidget *root,diaElemMenuDynamic *menu);
-		void connectMe(void);
-	};
-}
-#endif	// T_menu_h

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_slider.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_slider.cpp	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_slider.cpp	2008-05-24 19:16:19 UTC (rev 4062)
@@ -1,232 +0,0 @@
-/***************************************************************************
-  FAC_integer.cpp
-  Handle dialog factory element : Integer
-  (C) 2006 Mean <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">Fixounet at free.fr</A> 
-***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-#include &quot;T_slider.h&quot;
-#include &quot;ADM_default.h&quot;
-#include &quot;DIA_factory.h&quot;
-
-#include &lt;QtGui/QGridLayout&gt;
-#include &lt;QtGui/QHBoxLayout&gt;
-#include &lt;QtGui/QLabel&gt;
-
-extern const char *shortkey(const char *);
-
-namespace ADM_qt4Factory
-{
-class diaElemUSlider : public diaElemSliderBase
-{
-  protected:
-	  uint32_t min,max,incr;
-public:
-	diaElemUSlider(uint32_t *value,const char *toggleTitle, uint32_t min,uint32_t max,uint32_t incr = 1, const char *tip=NULL);
-  virtual   ~diaElemUSlider() ;
-  void      setMe(void *dialog, void *opaque,uint32_t line);
-  void      getMe(void);
-  void      enable(uint32_t onoff) ;
-  
-};
-class diaElemSlider : public diaElemSliderBase
-{
-  protected:
-    
-	  int32_t min,max,incr;
-    
-public:
-	diaElemSlider(int32_t *value,const char *toggleTitle, int32_t min,int32_t max,int32_t incr = 1, const char *tip=NULL);
-  virtual   ~diaElemSlider() ;
-  void      setMe(void *dialog, void *opaque,uint32_t line);
-  void      getMe(void);
-  void      enable(uint32_t onoff) ;
-  
-  
-};
-
-int SpinSlider::value()
-{
-	return spinner-&gt;value();
-}
-
-SpinSlider::SpinSlider (QWidget * parent)
-    : QWidget (parent)
-{
-    slider = new QSlider (Qt::Horizontal);
-    spinner = new QSpinBox;
-
-    QWidget::connect (slider, SIGNAL(valueChanged(int)), spinner, SLOT(setValue(int)));
-    QWidget::connect (spinner, SIGNAL(valueChanged(int)), slider, SLOT(setValue(int)));
-    QWidget::connect (spinner, SIGNAL(valueChanged(int)), this, SIGNAL(valueChanged(int)));
-
-    QHBoxLayout * hbox = new QHBoxLayout;
-    hbox-&gt;addWidget (slider);
-    hbox-&gt;addWidget (spinner);
-
-    setLayout (hbox);
-}
-
-void SpinSlider::setValue (int value)
-{
-    spinner-&gt;setValue (value);
-}
-
-void SpinSlider::setMinimum (int value)
-{
-    spinner-&gt;setMinimum (value);
-    slider-&gt;setMinimum (value);
-}
-
-void SpinSlider::setMaximum (int value)
-{
-    spinner-&gt;setMaximum (value);
-    slider-&gt;setMaximum (value);
-}
-
-//----------------------------------------------------------------------
-
-diaElemUSlider::diaElemUSlider(uint32_t *value,const char *toggleTitle, uint32_t min,uint32_t max,uint32_t incr,const char *tip)
-  : diaElemSliderBase()
-{
-  param=(void *)value;
-  paramTitle=shortkey(toggleTitle);
-  this-&gt;min=min;
-  this-&gt;max=max;
-  this-&gt;incr=incr;
-  this-&gt;tip=tip;
-  size = 2;
-}
-
-diaElemUSlider::~diaElemUSlider()
-{ 
-  if(paramTitle)
-    delete paramTitle;
-}
-
-void diaElemUSlider::setMe(void *dialog, void *opaque,uint32_t line)
-{
-  SpinSlider *slider = new SpinSlider ((QWidget *)dialog);
-  slider-&gt;setMinimum(min);
-  slider-&gt;setMaximum(max);
-  slider-&gt;setValue(*(uint32_t *)param);
-  slider-&gt;show();
- 
-  myWidget = (void *)slider;
-
-  QLabel *text = new QLabel (QString::fromUtf8(paramTitle), (QWidget *)dialog);
-  text-&gt;setBuddy (slider);
-
-  QGridLayout *layout = (QGridLayout*) opaque;
-  layout-&gt;addWidget(text,line,0,1,2);
-  layout-&gt;addWidget(slider,line + 1,0,1,2);
-}
-
-void diaElemUSlider::getMe(void)
-{
-  SpinSlider *box=(SpinSlider *)myWidget;
-  uint32_t val=box-&gt;value();
-  if(val&lt;min) val=min;
-  if(val&gt;max) val=max;
-  *(uint32_t *)param=val;
-}
-
-void diaElemUSlider::enable(uint32_t onoff) 
-{
-  SpinSlider *box=(SpinSlider *)myWidget;
-  ADM_assert(box);
-  if(onoff)
-    box-&gt;setEnabled(1);
-  else
-    box-&gt;setDisabled(1);
-}
-
-diaElemSlider::diaElemSlider(int32_t *value,const char *toggleTitle, int32_t min,int32_t max,int32_t incr,const char *tip)
-  : diaElemSliderBase()
-{
-  param=(void *)value;
-  paramTitle=shortkey(toggleTitle);
-  this-&gt;min=min;
-  this-&gt;max=max;
-  this-&gt;incr=incr;
-  this-&gt;tip=tip;
-  size = 2;
-}
-
-diaElemSlider::~diaElemSlider()
-{ 
-  if(paramTitle)
-    delete paramTitle;
-}
-
-void diaElemSlider::setMe(void *dialog, void *opaque,uint32_t line)
-{
-  SpinSlider *slider = new SpinSlider ((QWidget *)dialog);
-  slider-&gt;setMinimum(min);
-  slider-&gt;setMaximum(max);
-  slider-&gt;setValue(*(int32_t *)param);
-  slider-&gt;show();
- 
-  myWidget = (void *)slider;
-
-  QLabel *text = new QLabel (QString::fromUtf8(paramTitle), (QWidget *)dialog);
-  text-&gt;setBuddy (slider);
-
-  QGridLayout *layout = (QGridLayout*) opaque;
-  layout-&gt;addWidget(text,line,0,1,2);
-  layout-&gt;addWidget(slider,line + 1,0,1,2);
-}
-
-void diaElemSlider::getMe(void)
-{
-  SpinSlider *box=(SpinSlider *)myWidget;
-  int32_t val=box-&gt;value();
-  if(val&lt;min) val=min;
-  if(val&gt;max) val=max;
-  *(int32_t *)param=val;
-}
-
-void diaElemSlider::enable(uint32_t onoff) 
-{
-  SpinSlider *box=(SpinSlider *)myWidget;
-  ADM_assert(box);
-  if(onoff)
-    box-&gt;setEnabled(1);
-  else
-    box-&gt;setDisabled(1);
-}
-
-//****************************************************
-} // End of namespace
-//****************************Hoook*****************
-
-diaElem  *qt4CreateSlider(int32_t *value,const char *toggleTitle, int32_t min,int32_t max,int32_t incr , const char *tip)
-{
-	return new  ADM_qt4Factory::diaElemSlider(value,toggleTitle,min,max,incr,tip);
-}
-void qt4DestroySlider(diaElem *e)
-{
-	ADM_qt4Factory::diaElemSlider *a=(ADM_qt4Factory::diaElemSlider *)e;
-	delete a;
-}
-diaElem  *qt4CreateUSlider(uint32_t *value,const char *toggleTitle, uint32_t min,uint32_t max,uint32_t incr , const char *tip)
-{
-	return new  ADM_qt4Factory::diaElemUSlider(value,toggleTitle,min,max,incr,tip);
-}
-void qt4DestroyUSlider(diaElem *e)
-{
-	ADM_qt4Factory::diaElemUSlider *a=(ADM_qt4Factory::diaElemUSlider *)e;
-	delete a;
-}
-//****************************************************
-//EOF
-
-

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_slider.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_slider.h	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_slider.h	2008-05-24 19:16:19 UTC (rev 4062)
@@ -1,31 +0,0 @@
-#ifndef T_slider_h
-#define T_slider_h
-
-#include &lt;QtGui/QSlider&gt;
-#include &lt;QtGui/QSpinBox&gt;
-#include &lt;QtGui/QWidget&gt;
-
-namespace ADM_qt4Factory
-{
-	class SpinSlider : public QWidget
-	{
-		Q_OBJECT
-
-	public:
-		SpinSlider (QWidget *parent = 0);
-		int value();
-
-	signals:
-		void valueChanged (int value);
-
-	public slots:
-		void setValue (int value);
-		void setMinimum (int value);
-		void setMaximum (int value);
-
-	private:
-		QSlider * slider;
-		QSpinBox * spinner;
-	};
-}
-#endif	// T_slider_h

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_threadCount.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_threadCount.cpp	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_threadCount.cpp	2008-05-24 19:16:19 UTC (rev 4062)
@@ -1,145 +0,0 @@
-/***************************************************************************
-FAC_toggle.cpp
-Handle dialog factory element : Thread Count
-(C) 2007 Gruntster 
-***************************************************************************/
-
-/***************************************************************************
-*                                                                         *
-*   This program is free software; you can redistribute it and/or modify  *
-*   it under the terms of the GNU General Public License as published by  *
-*   the Free Software Foundation; either version 2 of the License, or     *
-*   (at your option) any later version.                                   *
-*                                                                         *
-***************************************************************************/
-
-#include &quot;T_threadCount.h&quot;
-#include &quot;ADM_default.h&quot;
-#include &quot;DIA_factory.h&quot;
-
-extern const char* shortkey(const char*);
-
-namespace ADM_qt4Factory
-{
-
-class diaElemThreadCount : public diaElem
-{
-
-public:
-  
-  diaElemThreadCount(uint32_t *value, const char *title, const char *tip = NULL);
-  virtual ~diaElemThreadCount() ;
-  void setMe(void *dialog, void *opaque, uint32_t line);
-  void getMe(void);
-};
-
-void ADM_QthreadCount::radioGroupChanged(QAbstractButton *s)
-{
-	spinBox-&gt;setEnabled(radiobutton3-&gt;isChecked());
-}
-
-ADM_QthreadCount::ADM_QthreadCount(QWidget *widget, const char *title, uint32_t value, QGridLayout *layout, int line) : QWidget(widget) 
-{
-	radiobutton1 = new QRadioButton(QString::fromUtf8(QT_TR_NOOP(&quot;Disabled&quot;)), widget);
-	radiobutton2 = new QRadioButton(QString::fromUtf8(QT_TR_NOOP(&quot;Auto-detect&quot;)), widget);
-	radiobutton3 = new QRadioButton(QString::fromUtf8(QT_TR_NOOP(&quot;Custom&quot;)), widget);
-
-	buttonGroup = new QButtonGroup;
-	buttonGroup-&gt;addButton(radiobutton1);
-	buttonGroup-&gt;addButton(radiobutton2);
-	buttonGroup-&gt;addButton(radiobutton3);
-
-	spinBox = new QSpinBox();
-	spinBox-&gt;setRange(2, 32);
-
-	text = new QLabel(QString::fromUtf8(title), widget);
-	text-&gt;setBuddy(radiobutton1);
-
-	layout-&gt;addWidget(text, line, 0);
-	layout-&gt;addWidget(radiobutton1, line, 1);
-	layout-&gt;addWidget(radiobutton2, line, 2);
-	layout-&gt;addWidget(radiobutton3, line, 3);
-	layout-&gt;addWidget(spinBox, line, 4);
-
-	QObject::connect(buttonGroup, SIGNAL(buttonClicked(QAbstractButton*)), this, SLOT(radioGroupChanged(QAbstractButton*)));
-
-	spinBox-&gt;setEnabled(value &gt; 1);
-
-	if (value == 0)
-		radiobutton2-&gt;setChecked(true);
-	else if (value == 1)
-		radiobutton1-&gt;setChecked(true);
-	else
-	{
-		radiobutton3-&gt;setChecked(true);
-		spinBox-&gt;setValue(value);
-	}
-}
-
-ADM_QthreadCount::~ADM_QthreadCount() 
-{
-	if (buttonGroup)
-		delete buttonGroup;
-
-	if (radiobutton1)
-		delete radiobutton1;
-
-	if (radiobutton2)
-		delete radiobutton2;
-
-	if (radiobutton3)
-		delete radiobutton3;
-
-	if (spinBox)
-		delete spinBox;
-
-	if (text)
-		delete text;
-}
-
-diaElemThreadCount::diaElemThreadCount(uint32_t *value, const char *title, const char *tip) : diaElem(ELEM_THREAD_COUNT)
-{
-	param = (void*)value;
-	paramTitle = shortkey(title);
-	this-&gt;tip = tip;
-}
-
-diaElemThreadCount::~diaElemThreadCount()
-{
-	delete paramTitle;
-}
-
-void diaElemThreadCount::setMe(void *dialog, void *opaque, uint32_t line)
-{
-	QGridLayout *layout = (QGridLayout*)opaque;
-
-	ADM_QthreadCount *threadCount = new ADM_QthreadCount((QWidget*)dialog, paramTitle, *(uint32_t *)param, layout, line);
-
-	myWidget = (void*)threadCount;
-}
-
-void diaElemThreadCount::getMe(void)
-{
-	ADM_QthreadCount *threadCount = (ADM_QthreadCount*)myWidget;
-	uint32_t *val = (uint32_t*)param;
-
-	if ((threadCount-&gt;radiobutton1)-&gt;isChecked())
-		*val = 1;
-	else if ((threadCount-&gt;radiobutton2)-&gt;isChecked())
-		*val = 0;
-	else
-		*val = (threadCount-&gt;spinBox)-&gt;value();
-}
-//**********************
-} // End of namesapce
-//**********************
-diaElem  *qt4CreateThreadCount(uint32_t *value, const char *title, const char *tip)
-{
-	return new  ADM_qt4Factory::diaElemThreadCount(value,title,tip);
-}
-void qt4DestroyThreadCount(diaElem *e)
-{
-	ADM_qt4Factory::diaElemThreadCount *a=(ADM_qt4Factory::diaElemThreadCount *)e;
-	delete a;
-}
-//EOF

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_threadCount.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_threadCount.h	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_threadCount.h	2008-05-24 19:16:19 UTC (rev 4062)
@@ -1,32 +0,0 @@
-#ifndef T_threadCount_h
-#define T_threadCount_h
-
-#include &lt;QtGui/QButtonGroup&gt;
-#include &lt;QtGui/QGridLayout&gt;
-#include &lt;QtGui/QLabel&gt;
-#include &lt;QtGui/QRadioButton&gt;
-#include &lt;QtGui/QSpinBox&gt;
-#include &lt;QtGui/QWidget&gt;
-
-namespace ADM_qt4Factory
-{
-	class ADM_QthreadCount : public QWidget
-	{
-		Q_OBJECT
-
-	public slots:
-		void radioGroupChanged(QAbstractButton *s);
-
-	public:
-		QLabel *text;
-		QRadioButton *radiobutton1;
-		QRadioButton *radiobutton2;
-		QRadioButton *radiobutton3;
-		QButtonGroup *buttonGroup;
-		QSpinBox *spinBox;
-
-		ADM_QthreadCount(QWidget *widget, const char *title, uint32_t value, QGridLayout *layout, int line);
-		~ADM_QthreadCount();
-	};
-}
-#endif	// T_threadCount_h

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_toggle.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_toggle.cpp	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_toggle.cpp	2008-05-24 19:16:19 UTC (rev 4062)
@@ -1,429 +0,0 @@
-/***************************************************************************
-  FAC_toggle.cpp
-  Handle dialog factory element : Toggle
-  (C) 2006 Mean <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">Fixounet at free.fr</A> 
-***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-#include &lt;QtGui/QGridLayout&gt;
-#include &lt;QtGui/QSpinBox&gt;
-
-#include &quot;T_toggle.h&quot;
-#include &quot;ADM_default.h&quot;
-#include &quot;DIA_factory.h&quot;
-
-extern const char *shortkey(const char *);
-
-namespace ADM_qt4Factory
-{
-class diaElemToggle : public diaElemToggleBase
-{
-  protected:
-public:
-            diaElemToggle(uint32_t *toggleValue,const char *toggleTitle, const char *tip=NULL);
-  virtual   ~diaElemToggle() ;
-  void      setMe(void *dialog, void *opaque,uint32_t line);
-  void      getMe(void);
-  void      enable(uint32_t onoff) ;
-  void      finalize(void);
-  void      updateMe();
-  uint8_t   link(uint32_t onoff,diaElem *w);
-};
-
-class diaElemToggleUint : public diaElem
-{
-  protected:
-        uint32_t *emb;
-        const char *embName;
-        void *widgetUint;
-        uint32_t _min,_max;
-public:
-            diaElemToggleUint(uint32_t *toggleValue,const char *toggleTitle, uint32_t *uintval,
-            					const char *name,uint32_t min,uint32_t max,const char *tip=NULL);
-  virtual   ~diaElemToggleUint() ;
-  void      setMe(void *dialog, void *opaque,uint32_t line);
-  void      getMe(void);
-  void      enable(uint32_t onoff) ;
-  void      finalize(void);
-  void      updateMe();
-};
-class diaElemToggleInt : public diaElem
-{
-  protected:
-	  		 int32_t *emb;
-	         const char *embName;
-	         void *widgetUint;
-	         int32_t _min,_max;
-public:
-            diaElemToggleInt(uint32_t *toggleValue,const char *toggleTitle, int32_t *uintval,
-            				const char *name,int32_t min,int32_t max,const char *tip=NULL);
-  virtual   ~diaElemToggleInt() ;
-  void      setMe(void *dialog, void *opaque,uint32_t line);
-  void      getMe(void);
-  void      finalize(void);
-  void      updateMe();
-  void      enable(uint32_t onoff) ;
-};
-
-void ADM_QCheckBox::changed(int i)
-{
-	switch(_type)
-	{
-		case TT_TOGGLE:
-			((diaElemToggle *)_toggle)-&gt;updateMe();break;
-		case TT_TOGGLE_UINT:
-			((diaElemToggleUint *)_toggle)-&gt;updateMe();break;
-		case TT_TOGGLE_INT:
-			((diaElemToggleInt *)_toggle)-&gt;updateMe();break;
-		default:
-			ADM_assert(0);
-	}
-}
-
-ADM_QCheckBox::ADM_QCheckBox(const QString &amp; str,QWidget *root,void *toggle,TOG_TYPE type) : QCheckBox(str,root)
-{
-	_toggle=toggle;
-	_type=type;
-}
-
-void ADM_QCheckBox::connectMe(void)
-{
-	QObject::connect(this, SIGNAL(stateChanged(int)), this, SLOT(changed(int )));
-}
-
-diaElemToggle::diaElemToggle(uint32_t *toggleValue,const char *toggleTitle, const char *tip)
-  : diaElemToggleBase()
-{
-  param=(void *)toggleValue;
-  paramTitle=shortkey(toggleTitle);
-  this-&gt;tip=tip;
-  myWidget=NULL;
-  nbLink=0;
-}
-
-diaElemToggle::~diaElemToggle()
-{
-  ADM_QCheckBox *box=(ADM_QCheckBox *)myWidget;
- // if(box) delete box;
-  myWidget=NULL;
-  if(paramTitle)
-    delete paramTitle;
-}
-void diaElemToggle::setMe(void *dialog, void *opaque,uint32_t l)
-{
- ADM_QCheckBox *box=new ADM_QCheckBox(QString::fromUtf8(paramTitle),(QWidget *)dialog,this,TT_TOGGLE);
- QGridLayout *layout=(QGridLayout*) opaque;
- myWidget=(void *)box; 
- if( *(uint32_t *)param)
- {
-    box-&gt;setCheckState(Qt::Checked); 
- }
- box-&gt;show();
- layout-&gt;addWidget(box,l,0);
- box-&gt;connectMe();
-}
-void diaElemToggle::getMe(void)
-{
-  ADM_QCheckBox *box=(ADM_QCheckBox *)myWidget;
-  uint32_t *val=(uint32_t *)param;
-  if(Qt::Checked==box-&gt;checkState())
-  {
-    *val=1; 
-  }else
-    *val=0;
-}
-void diaElemToggle::enable(uint32_t onoff) 
-{
-  ADM_QCheckBox *box=(ADM_QCheckBox *)myWidget;
-  ADM_assert(box);
-  if(onoff)
-    box-&gt;setEnabled(TRUE);
-  else
-    box-&gt;setDisabled(TRUE);
-}
-
-void   diaElemToggle::finalize(void)
-{
-  updateMe(); 
-}
-void   diaElemToggle::updateMe(void)
-{
- 
-  uint32_t val;
-  uint32_t rank=0;
-  if(!nbLink) return;
-  ADM_assert(myWidget);
-  
-  ADM_QCheckBox *box=(ADM_QCheckBox *)myWidget;
-  
-  if(Qt::Checked==box-&gt;checkState())
-  {
-    rank=1;
-  }
-  /* Now search through the linked list to see if something happens ...*/
-  
-   /* 1 disable everything */
-  for(int i=0;i&lt;nbLink;i++)
-  {
-    dialElemLink *l=&amp;(links[i]);
-    l-&gt;widget-&gt;enable(0);
-  }
-  /* Then enable */
-  for(int i=0;i&lt;nbLink;i++)
-  {
-      dialElemLink *l=&amp;(links[i]);
-      if(l-&gt;onoff==rank)  l-&gt;widget-&gt;enable(1);
-  }
-}
-
-uint8_t   diaElemToggle::link(uint32_t onoff,diaElem *w)
-{
-    ADM_assert(nbLink&lt;MENU_MAX_lINK);
-    links[nbLink].onoff=onoff;
-    links[nbLink].widget=w;
-    nbLink++;
-    return 1;
-}
-//******************************************************
-// An UInt and a toggle linked...
-//******************************************************
-diaElemToggleUint::diaElemToggleUint(uint32_t *toggleValue,const char *toggleTitle, uint32_t *uintval, const char *name,uint32_t min,uint32_t max,const char *tip)
-  : diaElem(ELEM_TOGGLE_UINT)
-{
-  param=(void *)toggleValue;
-  paramTitle=shortkey(toggleTitle);
-  this-&gt;tip=tip;
-  embName=name;
-  emb=uintval;
-  widgetUint=NULL;
-  _min=min;
-  _max=max;
-}
-
-diaElemToggleUint::~diaElemToggleUint()
-{
-   if(paramTitle)
-    delete paramTitle;
-}
-void diaElemToggleUint::setMe(void *dialog, void *opaque,uint32_t line)
-{
- ADM_QCheckBox *box=new ADM_QCheckBox(QString::fromUtf8(paramTitle),(QWidget *)dialog,this,TT_TOGGLE_UINT);
- QGridLayout *layout=(QGridLayout*) opaque;
- myWidget=(void *)box; 
- if( *(uint32_t *)param)
- {
-    box-&gt;setCheckState(Qt::Checked); 
- }
- box-&gt;show();
- layout-&gt;addWidget(box,line,0);
- // Now add spin
- QSpinBox *spin=new QSpinBox((QWidget *)dialog);
- widgetUint=(void *)spin; 
-   
- spin-&gt;setMinimum(_min);
- spin-&gt;setMaximum(_max);
- spin-&gt;setValue(*(uint32_t *)emb);
- spin-&gt;show();
- layout-&gt;addWidget(spin,line,1);
- box-&gt;connectMe();
-}
-
-void diaElemToggleUint::getMe(void)
-{
-  ADM_QCheckBox *box=(ADM_QCheckBox *)myWidget;
-  uint32_t *val=(uint32_t *)param;
-  if(Qt::Checked==box-&gt;checkState())
-  {
-    *val=1; 
-  }else
-    *val=0;
-  //
-    uint32_t u;
-  QSpinBox *spin=(QSpinBox *)widgetUint;
-  u=spin-&gt;value();
- if(u&lt;_min) u=_min;
- if(u&gt;_max) u=_max;
- *emb=u;
-  
-}
-void   diaElemToggleUint::finalize(void)
-{
-  updateMe();
-}
-void   diaElemToggleUint::updateMe(void)
-{
-  uint32_t val;
-  uint32_t rank=FALSE;
-  ADM_assert(myWidget);
-  
-  ADM_QCheckBox *box=(ADM_QCheckBox *)myWidget;
-  QSpinBox *spin=(QSpinBox *)widgetUint;
-  
-  if(Qt::Checked==box-&gt;checkState())
-  {
-    rank=TRUE;
-  }
-  spin-&gt;setEnabled(rank);
-}
-void   diaElemToggleUint::enable(uint32_t onoff)
-{
-    ADM_QCheckBox *box=(ADM_QCheckBox *)myWidget;
-      QSpinBox *spin=(QSpinBox *)widgetUint;
-  ADM_assert(box);
-  if(onoff)
-  {
-    box-&gt;setEnabled(TRUE);
-    spin-&gt;setEnabled(TRUE);
-  }
-  else
-  {
-    box-&gt;setEnabled(FALSE);
-    spin-&gt;setEnabled(FALSE);
-  }
-}
-
-//******************************************************
-// An Int and a toggle linked...
-//******************************************************
-
-diaElemToggleInt::diaElemToggleInt(uint32_t *toggleValue,const char *toggleTitle, int32_t *uintval, const char *name,int32_t min,int32_t max,const char *tip)
-  : diaElem(ELEM_TOGGLE_INT)
-{
-   param=(void *)toggleValue;
-  paramTitle=shortkey(toggleTitle);
-  this-&gt;tip=tip;
-  embName=name;
-  emb=uintval;
-  widgetUint=NULL;
-  _min=min;
-  _max=max;
-}
-
-diaElemToggleInt::~diaElemToggleInt()
-{
-  
-}
-void diaElemToggleInt::setMe(void *dialog, void *opaque,uint32_t line)
-{
- ADM_QCheckBox *box=new ADM_QCheckBox(QString::fromUtf8(paramTitle),(QWidget *)dialog,this,TT_TOGGLE_INT);
- QGridLayout *layout=(QGridLayout*) opaque;
- myWidget=(void *)box; 
- if( *(uint32_t *)param)
- {
-    box-&gt;setCheckState(Qt::Checked); 
- }
- box-&gt;show();
- layout-&gt;addWidget(box,line,0);
- // Now add spin
- QSpinBox *spin=new QSpinBox((QWidget *)dialog);
- widgetUint=(void *)spin; 
-   
- spin-&gt;setMinimum(_min);
- spin-&gt;setMaximum(_max);
- spin-&gt;setValue(*emb);
- spin-&gt;show();
- layout-&gt;addWidget(spin,line,1);
- box-&gt;connectMe();
-}
-
-void diaElemToggleInt::getMe(void)
-{
-  ADM_QCheckBox *box=(ADM_QCheckBox *)myWidget;
-  uint32_t *val=(uint32_t *)param;
-  if(Qt::Checked==box-&gt;checkState())
-  {
-    *val=1; 
-  }else
-    *val=0;
-  //
-    int32_t u;
-  QSpinBox *spin=(QSpinBox *)widgetUint;
-  u=spin-&gt;value();
- if(u&lt;_min) u=_min;
- if(u&gt;_max) u=_max;
- *emb=u;
-}
-
-void   diaElemToggleInt::finalize(void)
-{
-  updateMe();
-}
-void   diaElemToggleInt::updateMe(void)
-{
-  uint32_t val;
-  uint32_t rank=FALSE;
-  ADM_assert(myWidget);
-  
-  ADM_QCheckBox *box=(ADM_QCheckBox *)myWidget;
-  QSpinBox *spin=(QSpinBox *)widgetUint;
-  
-  if(Qt::Checked==box-&gt;checkState())
-  {
-    rank=TRUE;
-  }
-  spin-&gt;setEnabled(rank);
-}
-void   diaElemToggleInt::enable(uint32_t onoff)
-{
-    ADM_QCheckBox *box=(ADM_QCheckBox *)myWidget;
-      QSpinBox *spin=(QSpinBox *)widgetUint;
-  ADM_assert(box);
-  if(onoff)
-  {
-    box-&gt;setEnabled(TRUE);
-    spin-&gt;setEnabled(TRUE);
-  }
-  else
-  {
-    box-&gt;setEnabled(FALSE);
-    spin-&gt;setEnabled(FALSE);
-  }
-}
-
-} // End of namespace
-//****************************Hoook*****************
-
-diaElem  *qt4CreateToggleUint(uint32_t *toggleValue,const char *toggleTitle, uint32_t *uintval,
-		const char *name,uint32_t min,uint32_t max,const char *tip)
-{
-	return new  ADM_qt4Factory::diaElemToggleUint(toggleValue,toggleTitle, uintval,
-			name,min,max,tip);
-}
-void qt4DestroyToggleUint(diaElem *e)
-{
-	ADM_qt4Factory::diaElemToggleUint *a=(ADM_qt4Factory::diaElemToggleUint *)e;
-	delete a;
-}
-
-diaElem  *qt4CreateToggleInt(uint32_t *toggleValue,const char *toggleTitle, int32_t *uintval,
-		const char *name,int32_t min,int32_t max,const char *tip)
-{
-	return new  ADM_qt4Factory::diaElemToggleInt(toggleValue,toggleTitle, uintval,
-			name,min,max,tip);
-}
-void qt4DestroyToggleInt(diaElem *e)
-{
-	ADM_qt4Factory::diaElemToggleInt *a=(ADM_qt4Factory::diaElemToggleInt *)e;
-	delete a;
-}
-diaElem  *qt4CreateToggle(uint32_t *toggleValue,const char *toggleTitle, const char *tip)
-{
-	return new  ADM_qt4Factory::diaElemToggle(toggleValue,toggleTitle, tip);
-}
-void qt4DestroyToggle(diaElem *e)
-{
-	ADM_qt4Factory::diaElemToggle *a=(ADM_qt4Factory::diaElemToggle *)e;
-	delete a;
-}
-
-
-
-//EOF

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_toggle.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_toggle.h	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_toggle.h	2008-05-24 19:16:19 UTC (rev 4062)
@@ -1,32 +0,0 @@
-#ifndef T_toggle_h
-#define T_toggle_h
-
-#include &lt;QtGui/QCheckBox&gt;
-#include &lt;QtGui/QWidget&gt;
-
-namespace ADM_qt4Factory
-{
-	typedef enum
-	{
-		TT_TOGGLE,
-		TT_TOGGLE_UINT,
-		TT_TOGGLE_INT
-	} TOG_TYPE;
-
-	class ADM_QCheckBox : public QCheckBox
-	{
-		Q_OBJECT
-
-	protected:
-		void     *_toggle;
-		TOG_TYPE _type;
-
-	public slots:
-		void changed(int i);
-
-	public:
-		ADM_QCheckBox(const QString &amp; str, QWidget *root, void *toggle, TOG_TYPE type);
-		void connectMe(void);
-	};
-}
-#endif	// T_toggle_h

Added: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/include/DIA_flyDialogQt4.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/include/DIA_flyDialogQt4.h	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/include/DIA_flyDialogQt4.h	2008-05-24 19:16:19 UTC (rev 4062)
@@ -0,0 +1,57 @@
+/** **************************************************************************
+        \fn DIA_flyDialogQt4.h
+ copyright            : (C) 2007 by mean
+ email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
+ 
+ 
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#ifndef ADM_FLY_DIALOG_QT4H
+#define ADM_FLY_DIALOG_QT4H
+#include &quot;DIA_flyDialog.h&quot;
+class ADM_flyDialogQt4 : public ADM_flyDialog
+{
+public:
+  virtual uint8_t  cleanup2(void);
+  virtual uint8_t  isRgbInverted(void);
+  virtual uint8_t  display(void);
+  virtual float   calcZoomFactor(void);
+  virtual uint32_t sliderGet(void);
+  virtual uint8_t  sliderSet(uint32_t value);
+  virtual void    postInit(uint8_t reInit);
+  virtual void    setupMenus (const void * params,
+                         const MenuMapping * menu_mapping,
+                        uint32_t menu_mapping_count) ;
+  virtual void  getMenuValues ( void * mm,
+                    const MenuMapping * menu_mapping,
+                    uint32_t menu_mapping_count) ;
+  virtual  const MenuMapping *lookupMenu (const char * widgetName,
+                                               const MenuMapping * menu_mapping,
+                                               uint32_t menu_mapping_count) ;
+  virtual uint32_t  getMenuValue (const MenuMapping * mm) ;          
+};
+
+#include &lt;QtGui/QWidget&gt;
+
+class ADM_QCanvas : public QWidget
+{
+protected:
+	uint32_t _w,_h;
+public:
+	uint8_t *dataBuffer;
+
+	ADM_QCanvas(QWidget *z, uint32_t w, uint32_t h);
+	~ADM_QCanvas();
+	void paintEvent(QPaintEvent *ev);
+	void changeSize(uint32_t w, uint32_t h);
+};
+
+#endif

Copied: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/include/DIA_flyDialogQt4_template.h (from rev 4061, branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/ADM_flyTemplate.h)
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/ADM_flyTemplate.h	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/include/DIA_flyDialogQt4_template.h	2008-05-24 19:16:19 UTC (rev 4062)
@@ -0,0 +1,102 @@
+
+/***************************************************************************
+                          Template for QT4 flyDialog
+    copyright            : (C) 2007 by mean
+    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+
+#ifndef WINDOW_NAME
+#error WINDOW_NAME undefined
+#endif
+
+#ifndef PARAM_NAME
+#error PARAM_NAME undefined
+#endif
+
+#ifndef DIALOG_NAME
+#error DIALOG_NAME undefined
+#endif
+
+#ifndef FUNC_NAME
+#error FUNC_NAME undefined
+#endif
+
+#ifndef FLY_NAME
+#error FLY_NAME undefined
+#endif
+
+
+static int lock=0;
+
+class WINDOW_NAME : public QDialog
+ {
+     Q_OBJECT
+ protected : 
+    int lock;
+ public:
+     FLY_NAME *myCrop;
+     ADM_QCanvas *canvas;
+     WINDOW_NAME(PARAM_NAME *param,AVDMGenericVideoStream *in);
+     ~WINDOW_NAME();
+     DIALOG_NAME ui;
+ public slots:
+      void gather(PARAM_NAME *param);
+      //void update(int i);
+ private slots:
+   void sliderUpdate(int foo);
+   void valueChanged(int foo);
+
+ private:
+     
+ };
+ 
+  void WINDOW_NAME::sliderUpdate(int foo)
+  {
+    myCrop-&gt;sliderChanged();
+  }
+  void WINDOW_NAME::gather(PARAM_NAME *param)
+  {
+    
+        myCrop-&gt;download();
+        memcpy(param,&amp;(myCrop-&gt;param),sizeof(PARAM_NAME));
+  }
+
+void WINDOW_NAME::valueChanged( int f )
+{
+  if(lock) return;
+  lock++;
+  myCrop-&gt;update();
+  lock--;
+}
+
+
+/**
+      \fn     DIA_getCropParams
+      \brief  Handle crop dialog
+*/
+uint8_t FUNC_NAME(PARAM_NAME *param, AVDMGenericVideoStream *in)
+{
+        uint8_t ret=0;
+        
+        WINDOW_NAME dialog(param,in);        
+        if(dialog.exec()==QDialog::Accepted)
+        {
+            dialog.gather(param); 
+            ret=1;
+        }
+        return ret;
+}
+//____________________________________
+// EOF
+
+

Copied: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/CMakeLists.txt (from rev 4061, branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/CMakeLists.txt)
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/CMakeLists.txt	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/CMakeLists.txt	2008-05-24 19:16:19 UTC (rev 4062)
@@ -0,0 +1,22 @@
+SET(ADM_LIB ADM_UIQT4)
+
+QT4_WRAP_CPP(${ADM_LIB}_source
+	T_bitrate.h  T_button.h  T_dialogFactory.h  T_filesel.h  T_menu.h  T_slider.h
+	T_threadCount.h  T_toggle.h)
+
+SET(${ADM_LIB}_T
+	T_bitrate.cpp  T_button.cpp  T_dialogFactory.cpp  T_filesel.cpp  T_menu.cpp
+	T_slider.cpp  T_threadCount.cpp  T_toggle.cpp
+        T_flyDialogQt4.cpp
+)
+
+SET(${ADM_LIB}_SRCS
+	FAC_bar.cpp    FAC_frame.cpp  FAC_integer.cpp  FAC_notch.cpp
+	FAC_float.cpp  FAC_hex.cpp    FAC_readOnlyText.cpp
+	FAC_matrix.cpp  ${${ADM_LIB}_source}  ${${ADM_LIB}_T})
+
+INCLUDE_DIRECTORIES(${CMAKE_CURRENT_BINARY_DIR} ${QT_INCLUDE_DIR})
+INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR}/../include)
+ADD_LIBRARY(${ADM_LIB} SHARED ${${ADM_LIB}_SRCS})
+TARGET_LINK_LIBRARIES(${ADM_LIB} ADM_core ADM_coreUI ${QT_QTGUI_LIBRARY} ${QT_QTCORE_LIBRARY})
+INSTALL(TARGETS ${ADM_LIB} RUNTIME DESTINATION ${BIN_DIR} LIBRARY DESTINATION lib)

Copied: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/FAC_bar.cpp (from rev 4061, branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/FAC_bar.cpp)
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/FAC_bar.cpp	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/FAC_bar.cpp	2008-05-24 19:16:19 UTC (rev 4062)
@@ -0,0 +1,84 @@
+/***************************************************************************
+  FAC_toggle.cpp
+  Handle dialog factory element : Toggle
+  (C) 2006 Mean <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">Fixounet at free.fr</A> 
+***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+
+#include &lt;QtGui/QGridLayout&gt;
+#include &lt;QtGui/QLabel&gt;
+#include &lt;QtGui/QProgressBar&gt;
+
+#include &quot;ADM_default.h&quot;
+#include &quot;DIA_factory.h&quot;
+
+extern const char *shortkey(const char *);
+
+namespace ADM_Qt4Factory
+{
+class diaElemBar : public diaElem
+{
+  protected :
+        uint32_t per;
+public:
+  
+  diaElemBar(uint32_t percent,const char *toggleTitle);
+  virtual ~diaElemBar() ;
+  void setMe(void *dialog, void *opaque,uint32_t line);
+  void getMe(void);
+};
+
+//********************************************************************
+diaElemBar::diaElemBar(uint32_t percent,const char *toggleTitle)
+  : diaElem(ELEM_BAR)
+{
+  per=percent;
+  paramTitle=shortkey(toggleTitle);
+ }
+
+diaElemBar::~diaElemBar()
+{
+  if(paramTitle)
+    delete paramTitle;
+}
+void diaElemBar::setMe(void *dialog, void *opaque,uint32_t line)
+{
+  QProgressBar *box=new QProgressBar((QWidget *)dialog);
+  QGridLayout *layout=(QGridLayout*) opaque;
+ 
+  box-&gt;setMinimum(0);
+  box-&gt;setMaximum(100);
+  box-&gt;setValue(per);
+  box-&gt;show();
+ 
+ QLabel *text=new QLabel(QString::fromUtf8(this-&gt;paramTitle),(QWidget *)dialog);
+ text-&gt;setBuddy(box);
+ layout-&gt;addWidget(text,line,0);
+ layout-&gt;addWidget(box,line,1);
+ 
+}
+void diaElemBar::getMe(void)
+{
+}
+} // nameapsce
+
+diaElem  *qt4CreateBar(uint32_t percent,const char *toggleTitle)
+{
+	return new  ADM_Qt4Factory::diaElemBar(percent,toggleTitle);
+}
+void qt4DestroyBar(diaElem *e)
+{
+	ADM_Qt4Factory::diaElemBar *a=(ADM_Qt4Factory::diaElemBar *)e;
+	delete a;
+}
+//
+//EOF

Copied: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/FAC_float.cpp (from rev 4061, branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/FAC_float.cpp)
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/FAC_float.cpp	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/FAC_float.cpp	2008-05-24 19:16:19 UTC (rev 4062)
@@ -0,0 +1,109 @@
+/***************************************************************************
+  FAC_toggle.cpp
+  Handle dialog factory element : Toggle
+  (C) 2006 Mean <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">Fixounet at free.fr</A> 
+***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+
+#include &lt;QtGui/QGridLayout&gt;
+#include &lt;QtGui/QLabel&gt;
+#include &lt;QtGui/QSpinBox&gt;
+
+#include &quot;ADM_default.h&quot;
+#include &quot;DIA_factory.h&quot;
+
+extern const char *shortkey(const char *);
+
+namespace ADM_qt4Factory
+{
+
+
+class diaElemFloat : public diaElem
+{
+
+public:
+  ELEM_TYPE_FLOAT min,max;
+  diaElemFloat(ELEM_TYPE_FLOAT *intValue,const char *toggleTitle, ELEM_TYPE_FLOAT min, 
+               ELEM_TYPE_FLOAT max,const char *tip=NULL);
+  virtual ~diaElemFloat() ;
+  void setMe(void *dialog, void *opaque,uint32_t line);
+  void getMe(void);
+  void      enable(uint32_t onoff) ;
+};
+
+
+//********************************************************************
+diaElemFloat::diaElemFloat(ELEM_TYPE_FLOAT *intValue,const char *toggleTitle, ELEM_TYPE_FLOAT min, ELEM_TYPE_FLOAT max,const char *tip)
+  : diaElem(ELEM_TOGGLE)
+{
+  param=(void *)intValue;
+  paramTitle=shortkey(toggleTitle);
+  this-&gt;min=min;
+  this-&gt;max=max;
+  this-&gt;tip=tip;
+ }
+
+diaElemFloat::~diaElemFloat()
+{
+  if(paramTitle)
+    delete paramTitle;
+}
+void diaElemFloat::setMe(void *dialog, void *opaque,uint32_t line)
+{
+  QDoubleSpinBox *box=new QDoubleSpinBox((QWidget *)dialog);
+  QGridLayout *layout=(QGridLayout*) opaque;
+ myWidget=(void *)box; 
+   
+ box-&gt;setMinimum(min);
+ box-&gt;setMaximum(max);
+ box-&gt;setValue(*(ELEM_TYPE_FLOAT *)param);
+ 
+ box-&gt;show();
+ 
+ QLabel *text=new QLabel( QString::fromUtf8(this-&gt;paramTitle),(QWidget *)dialog);
+ text-&gt;setBuddy(box);
+ layout-&gt;addWidget(text,line,0);
+ layout-&gt;addWidget(box,line,1);
+ 
+}
+void diaElemFloat::getMe(void)
+{
+  double val;
+ QDoubleSpinBox *box=(QDoubleSpinBox *)myWidget;
+ val=box-&gt;value();
+ if(val&lt;min) val=min;
+ if(val&gt;max) val=max;
+ *(ELEM_TYPE_FLOAT *)param=val;
+ 
+}
+void diaElemFloat::enable(uint32_t onoff) 
+{
+   QDoubleSpinBox *box=(QDoubleSpinBox *)myWidget;
+  ADM_assert(box);
+  if(onoff)
+    box-&gt;setEnabled(1);
+  else
+    box-&gt;setDisabled(1);
+}
+} // End of namespace
+//****************************Hoook*****************
+
+diaElem  *qt4CreateFloat(ELEM_TYPE_FLOAT *intValue,const char *toggleTitle, ELEM_TYPE_FLOAT min,
+        ELEM_TYPE_FLOAT max,const char *tip)
+{
+	return new  ADM_qt4Factory::diaElemFloat(intValue,toggleTitle,min,max,tip);
+}
+void qt4DestroyFloat(diaElem *e)
+{
+	ADM_qt4Factory::diaElemFloat *a=(ADM_qt4Factory::diaElemFloat *)e;
+	delete a;
+}

Copied: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/FAC_frame.cpp (from rev 4061, branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/FAC_frame.cpp)
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/FAC_frame.cpp	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/FAC_frame.cpp	2008-05-24 19:16:19 UTC (rev 4062)
@@ -0,0 +1,120 @@
+/***************************************************************************
+  FAC_toggle.cpp
+  Handle dialog factory element : Toggle
+  (C) 2006 Mean <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">Fixounet at free.fr</A> 
+***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+
+#include &lt;QtGui/QGridLayout&gt;
+#include &lt;QtGui/QLabel&gt;
+
+#include &quot;ADM_default.h&quot;
+#include &quot;DIA_factory.h&quot;
+
+extern const char *shortkey(const char *);
+
+
+namespace ADM_qt4Factory
+{
+class diaElemFrame : public diaElemFrameBase
+{
+  
+public:
+  
+  diaElemFrame(const char *toggleTitle, const char *tip=NULL);
+  virtual ~diaElemFrame() ;
+  void setMe(void *dialog, void *opaque,uint32_t line);
+  void getMe(void) ;
+  void swallow(diaElem *widget);
+  void enable(uint32_t onoff);
+  void finalize(void);
+};
+
+diaElemFrame::diaElemFrame(const char *toggleTitle, const char *tip)
+  : diaElemFrameBase()
+{
+  param=NULL;
+  paramTitle=shortkey(toggleTitle);
+  this-&gt;tip=tip;
+   nbElems=0;
+  frameSize=0;
+  setSize(2);
+}
+void diaElemFrame::swallow(diaElem *widget)
+{
+   elems[nbElems]=widget;
+  frameSize+=widget-&gt;getSize();
+ // setSize(frameSize);
+  nbElems++;
+  ADM_assert(nbElems&lt;DIA_MAX_FRAME); 
+}
+diaElemFrame::~diaElemFrame()
+{
+  if(paramTitle)
+    delete paramTitle;
+}
+void diaElemFrame::setMe(void *dialog, void *opaque,uint32_t line)
+{
+  
+   QGridLayout *layout=(QGridLayout*) opaque;  
+   QGridLayout *layout2;
+   
+   layout2=new QGridLayout((QWidget *)dialog);
+   myWidget=(void *)layout2; 
+
+    QLabel *text=new QLabel( (QWidget *)dialog);
+    QString string = QString::fromUtf8(paramTitle);
+    
+    string=&quot;&lt;b&gt;&quot;+string+&quot;&lt;/b&gt;&quot;;
+    text-&gt;setText(string);
+ layout-&gt;addWidget(text,line,0);
+ layout-&gt;addLayout(layout2,line+1,0);
+ int  v=0;
+  for(int i=0;i&lt;nbElems;i++)
+  {
+    elems[i]-&gt;setMe(dialog,layout2,v); 
+    v+=elems[i]-&gt;getSize();
+  }
+  myWidget=(void *)layout2;
+}
+//*****************************
+void diaElemFrame::getMe(void)
+{
+   for(int i=0;i&lt;nbElems;i++)
+  {
+    elems[i]-&gt;getMe(); 
+  }
+}
+void diaElemFrame::finalize(void)
+{
+   for(int i=0;i&lt;nbElems;i++)
+  {
+    elems[i]-&gt;finalize(); 
+  }
+}
+void diaElemFrame::enable(uint32_t onoff)
+{
+  
+}
+} // End of namespace
+//****************************Hoook*****************
+
+diaElem  *qt4CreateFrame(const char *toggleTitle, const char *tip)
+{
+	return new  ADM_qt4Factory::diaElemFrame(toggleTitle,tip);
+}
+void qt4DestroyFrame(diaElem *e)
+{
+	ADM_qt4Factory::diaElemFrame *a=(ADM_qt4Factory::diaElemFrame *)e;
+	delete a;
+}
+//EOF

Copied: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/FAC_hex.cpp (from rev 4061, branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/FAC_hex.cpp)
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/FAC_hex.cpp	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/FAC_hex.cpp	2008-05-24 19:16:19 UTC (rev 4062)
@@ -0,0 +1,57 @@
+/***************************************************************************
+  FAC_toggle.cpp
+  Handle dialog factory element : Toggle
+  (C) 2006 Mean <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">Fixounet at free.fr</A> 
+***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+
+#include &quot;ADM_default.h&quot;
+#include &quot;DIA_factory.h&quot;
+
+namespace ADM_qt4Factory
+{
+class diaElemHex : public diaElem
+{
+  uint32_t dataSize;
+  uint8_t  *data;
+  
+public:
+  
+  diaElemHex(const char *toggleTitle, uint32_t dataSize,uint8_t *data);
+  virtual ~diaElemHex() ;
+  void setMe(void *dialog, void *opaque,uint32_t line);
+  void getMe(void) ;
+  void finalize(void);
+};
+extern const char *shortkey(const char *);
+  diaElemHex::diaElemHex(const char *toggleTitle, uint32_t dataSize,uint8_t *data) :diaElem(ELEM_HEXDUMP){};
+  diaElemHex::~diaElemHex() {};
+  void diaElemHex::setMe(void *dialog, void *opaque,uint32_t line) {};
+  void diaElemHex::getMe(void) {} ;
+  void diaElemHex::finalize(void) {};
+//******************************************************
+} // End of namespace
+//****************************Hoook*****************
+
+diaElem  *qt4CreateHex(const char *toggleTitle, uint32_t dataSize,uint8_t *data)
+{
+	return new  ADM_qt4Factory::diaElemHex(toggleTitle,dataSize,data);
+}
+void qt4DestroyHex(diaElem *e)
+{
+	ADM_qt4Factory::diaElemHex *a=(ADM_qt4Factory::diaElemHex *)e;
+	delete a;
+}
+//EOF
+
+
+//EOF

Copied: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/FAC_integer.cpp (from rev 4061, branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/FAC_integer.cpp)
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/FAC_integer.cpp	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/FAC_integer.cpp	2008-05-24 19:16:19 UTC (rev 4062)
@@ -0,0 +1,185 @@
+/***************************************************************************
+  FAC_integer.cpp
+  Handle dialog factory element : Integer
+  (C) 2006 Mean <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">Fixounet at free.fr</A> 
+***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+
+#include &lt;QtGui/QSpinBox&gt;
+#include &lt;QtGui/QGridLayout&gt;
+#include &lt;QtGui/QLabel&gt;
+
+#include &quot;ADM_default.h&quot;
+#include &quot;DIA_factory.h&quot;
+
+extern const char *shortkey(const char *);
+
+
+namespace ADM_qt4Factory
+{
+class diaElemInteger : public diaElem
+{
+
+public:
+  int32_t min,max;
+  diaElemInteger(int32_t *intValue,const char *toggleTitle, int32_t min, int32_t max,const char *tip=NULL);
+  virtual ~diaElemInteger() ;
+  void setMe(void *dialog, void *opaque,uint32_t line);
+  void getMe(void);
+  void      enable(uint32_t onoff) ;
+};
+/* Same but unsigned */
+class diaElemUInteger : public diaElem
+{
+
+public:
+  uint32_t min,max;
+  diaElemUInteger(uint32_t *intValue,const char *toggleTitle, uint32_t min, uint32_t max,const char *tip=NULL);
+  virtual ~diaElemUInteger() ;
+  void setMe(void *dialog, void *opaque,uint32_t line);
+  void getMe(void);
+  void      enable(uint32_t onoff) ;
+  
+};
+
+//********************************************************************
+diaElemInteger::diaElemInteger(int32_t *intValue,const char *toggleTitle, int32_t min, int32_t max,const char *tip)
+  : diaElem(ELEM_TOGGLE)
+{
+  param=(void *)intValue;
+  paramTitle=shortkey(toggleTitle);
+  this-&gt;min=min;
+  this-&gt;max=max;
+  this-&gt;tip=tip;
+ }
+
+diaElemInteger::~diaElemInteger()
+{
+  if(paramTitle)
+    delete paramTitle;
+}
+void diaElemInteger::setMe(void *dialog, void *opaque,uint32_t line)
+{
+  QSpinBox *box=new QSpinBox((QWidget *)dialog);
+  QGridLayout *layout=(QGridLayout*) opaque;
+ myWidget=(void *)box; 
+   
+ box-&gt;setMinimum(min);
+ box-&gt;setMaximum(max);
+ box-&gt;setValue(*(int32_t *)param);
+ 
+ box-&gt;show();
+ 
+ QLabel *text=new QLabel( QString::fromUtf8(this-&gt;paramTitle),(QWidget *)dialog);
+ text-&gt;setBuddy(box);
+ layout-&gt;addWidget(text,line,0);
+ layout-&gt;addWidget(box,line,1);
+ 
+}
+void diaElemInteger::getMe(void)
+{
+  int32_t val;
+ QSpinBox *box=(QSpinBox *)myWidget;
+ val=box-&gt;value();
+ if(val&lt;min) val=min;
+ if(val&gt;max) val=max;
+ *(int32_t *)param=val;
+ 
+}
+void diaElemInteger::enable(uint32_t onoff) 
+{
+ QSpinBox *box=(QSpinBox *)myWidget;
+  ADM_assert(box);
+  if(onoff)
+    box-&gt;setEnabled(1);
+  else
+    box-&gt;setDisabled(1);
+}
+//******************************************************
+diaElemUInteger::diaElemUInteger(uint32_t *intValue,const char *toggleTitle, uint32_t min, uint32_t max,const char *tip)
+  : diaElem(ELEM_TOGGLE)
+{
+  param=(void *)intValue;
+  paramTitle=shortkey(toggleTitle);
+  this-&gt;min=min;
+  this-&gt;max=max;
+  this-&gt;tip=tip;
+ }
+ 
+
+diaElemUInteger::~diaElemUInteger()
+{
+  if(paramTitle)
+    delete paramTitle;
+}
+void diaElemUInteger::setMe(void *dialog, void *opaque,uint32_t line)
+{
+  QSpinBox *box=new QSpinBox((QWidget *)dialog);
+  QGridLayout *layout=(QGridLayout*) opaque;
+ myWidget=(void *)box; 
+   
+ box-&gt;setMinimum(min);
+ box-&gt;setMaximum(max);
+ box-&gt;setValue(*(uint32_t *)param);
+ 
+ box-&gt;show();
+ 
+ QLabel *text=new QLabel( QString::fromUtf8(this-&gt;paramTitle),(QWidget *)dialog);
+ text-&gt;setBuddy(box);
+ layout-&gt;addWidget(text,line,0);
+ layout-&gt;addWidget(box,line,1);
+}
+void diaElemUInteger::getMe(void)
+{
+   uint32_t val;
+ QSpinBox *box=(QSpinBox *)myWidget;
+ val=box-&gt;value();
+ if(val&lt;min) val=min;
+ if(val&gt;max) val=max;
+ *(uint32_t *)param=val;
+
+}
+
+void diaElemUInteger::enable(uint32_t onoff) 
+{
+ QSpinBox *box=(QSpinBox *)myWidget;
+  ADM_assert(box);
+  if(onoff)
+    box-&gt;setEnabled(1);
+  else
+    box-&gt;setDisabled(1);
+}
+//********************************************
+//****************************************************
+} // End of namespace
+//****************************Hoook*****************
+
+diaElem  *qt4CreateInteger(int32_t *intValue,const char *toggleTitle,int32_t min, int32_t max,const char *tip)
+{
+	return new  ADM_qt4Factory::diaElemInteger(intValue,toggleTitle,min,max,tip);
+}
+void qt4DestroyInteger(diaElem *e)
+{
+	ADM_qt4Factory::diaElemInteger *a=(ADM_qt4Factory::diaElemInteger *)e;
+	delete a;
+}
+diaElem  *qt4CreateUInteger(uint32_t *intValue,const char *toggleTitle,uint32_t min, uint32_t max,const char *tip)
+{
+	return new  ADM_qt4Factory::diaElemUInteger(intValue,toggleTitle,min,max,tip);
+}
+void qt4DestroyUInteger(diaElem *e)
+{
+	ADM_qt4Factory::diaElemUInteger *a=(ADM_qt4Factory::diaElemUInteger *)e;
+	delete a;
+}
+//EOF
+

Copied: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/FAC_matrix.cpp (from rev 4061, branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/FAC_matrix.cpp)
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/FAC_matrix.cpp	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/FAC_matrix.cpp	2008-05-24 19:16:19 UTC (rev 4062)
@@ -0,0 +1,132 @@
+/***************************************************************************
+  FAC_toggle.cpp
+  Handle dialog factory element : Toggle
+  (C) 2006 Mean <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">Fixounet at free.fr</A> 
+***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+
+#include &lt;QtGui/QSpinBox&gt;
+#include &lt;QtGui/QGridLayout&gt;
+#include &lt;QtGui/QLabel&gt;
+
+#include &quot;ADM_default.h&quot;
+#include &quot;DIA_factory.h&quot;
+
+extern const char *shortkey(const char *);
+
+namespace ADM_qt4Factory
+{
+class diaElemMatrix : public diaElem
+{
+  protected:
+  public:
+    uint8_t *_matrix;
+    uint32_t _matrixSize;
+    		diaElemMatrix(uint8_t *trix,const char *toggleTitle, uint32_t trixSize,const char *tip=NULL);
+  virtual   ~diaElemMatrix() ;
+  void      setMe(void *dialog, void *opaque,uint32_t line);
+  void      getMe(void);
+  void      enable(uint32_t onoff) ;
+};
+
+
+diaElemMatrix::diaElemMatrix(uint8_t *trix,const char *toggleTitle, uint32_t trixSize,const char *tip)
+  : diaElem(ELEM_MATRIX)
+{
+	
+	  param=(void *)trix;
+	  paramTitle=shortkey(toggleTitle);
+	  _matrix=new uint8_t[trixSize*trixSize];
+	   _matrixSize=trixSize;
+	   memcpy(_matrix,trix,trixSize*trixSize);
+	  this-&gt;tip=tip;
+	
+}
+
+diaElemMatrix::~diaElemMatrix()
+{
+	 if(_matrix) delete [] _matrix;
+	  _matrix=NULL;
+	  if(myWidget)
+	  {
+		  QSpinBox **arrayWidget=( QSpinBox **)myWidget;
+		  delete [] arrayWidget;
+		  myWidget=NULL;
+	  }
+	  if(paramTitle)
+	      delete paramTitle;
+	  paramTitle=NULL;
+}
+void diaElemMatrix::setMe(void *dialog, void *opaque,uint32_t line)
+{
+	 QSpinBox **box=new QSpinBox*[_matrixSize*_matrixSize];
+	  QGridLayout *layout=(QGridLayout*) opaque;
+	 myWidget=(void *)box; 
+
+
+	  
+	  
+	 
+	 QLabel *text=new QLabel( QString::fromUtf8(this-&gt;paramTitle),(QWidget *)dialog);
+	 layout-&gt;addWidget(text,line,0);
+	 
+	 QGridLayout *layout2=new QGridLayout((QWidget *)dialog);
+	  layout-&gt;addLayout(layout2,line,1);
+	  /*layout-&gt;setMargin(0);
+	  layout-&gt;setSpacing(0);*/
+	 
+
+	 for(int y=0;y&lt;_matrixSize*_matrixSize;y++)
+	 			  {
+	 				  box[y]=new QSpinBox((QWidget *)dialog);
+	 				  box[y]-&gt;setMinimum(0);
+	 				  box[y]-&gt;setMaximum(255);
+	 				  box[y]-&gt;setValue(_matrix[y]);
+	 				 layout2-&gt;addWidget(box[y],y/_matrixSize,y%_matrixSize);
+	 			  }
+	 myWidget =(void *)box;
+}
+void diaElemMatrix::getMe(void)
+{
+	 QSpinBox **box=( QSpinBox **)myWidget;
+	 ADM_assert(box);
+	for(int y=0;y&lt;_matrixSize*_matrixSize;y++)
+		 			  {
+		 				  _matrix[y]=box[y]-&gt;value();
+		 			  }
+	memcpy(param,_matrix,_matrixSize*_matrixSize);
+}
+void diaElemMatrix::enable(uint32_t onoff)
+{
+	QSpinBox **arrayWidget=( QSpinBox **)myWidget;
+			 
+			 ADM_assert(arrayWidget);
+			 int index=0;
+			  for(int y=0;y&lt;_matrixSize*_matrixSize;y++)
+			  {
+				  if(onoff) arrayWidget[y]-&gt;setEnabled(1);
+				  else arrayWidget[y]-&gt;setEnabled(0);
+				  
+			  }
+}
+}
+//****************************Hoook*****************
+
+diaElem  *qt4CreateMatrix(uint8_t *trix,const char *toggleTitle, uint32_t trixSize,const char *tip)
+{
+	return new  ADM_qt4Factory::diaElemMatrix(trix,toggleTitle,trixSize,tip);
+}
+void qt4DestroyMatrix(diaElem *e)
+{
+	ADM_qt4Factory::diaElemMatrix *a=(ADM_qt4Factory::diaElemMatrix *)e;
+	delete a;
+}

Copied: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/FAC_notch.cpp (from rev 4061, branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/FAC_notch.cpp)
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/FAC_notch.cpp	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/FAC_notch.cpp	2008-05-24 19:16:19 UTC (rev 4062)
@@ -0,0 +1,79 @@
+/***************************************************************************
+  FAC_toggle.cpp
+  Handle dialog factory element : Toggle
+  (C) 2006 Mean <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">Fixounet at free.fr</A> 
+***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+
+#include &lt;QtGui/QGridLayout&gt;
+#include &lt;QtGui/QCheckBox&gt;
+
+#include &quot;ADM_default.h&quot;
+#include &quot;DIA_factory.h&quot;
+
+extern const char *shortkey(const char *);
+
+namespace ADM_qt4Factory
+{
+
+
+class diaElemNotch : public diaElem
+{
+  uint32_t yesno;
+public:
+  
+  diaElemNotch(uint32_t yes,const char *toggleTitle, const char *tip=NULL);
+  virtual ~diaElemNotch() ;
+  void setMe(void *dialog, void *opaque,uint32_t line);
+  void getMe(void) {};
+};
+diaElemNotch::diaElemNotch(uint32_t yes,const char *toggleTitle, const char *tip)
+  : diaElem(ELEM_NOTCH)
+{
+  yesno=yes;
+  paramTitle=toggleTitle;
+  this-&gt;tip=tip;
+}
+
+diaElemNotch::~diaElemNotch()
+{
+  
+}
+void diaElemNotch::setMe(void *dialog, void *opaque,uint32_t line)
+{
+  QCheckBox *box=new QCheckBox(QString::fromUtf8(paramTitle),(QWidget *)dialog);
+ QGridLayout *layout=(QGridLayout*) opaque;
+ myWidget=(void *)box; 
+ if( yesno)
+ {
+    box-&gt;setCheckState(Qt::Checked); 
+ }
+ box-&gt;show();
+ layout-&gt;addWidget(box,line,0);
+}
+//******************************************************
+//****************************************************
+} // End of namespace
+//****************************Hoook*****************
+
+diaElem  *qt4CreateNotch(uint32_t yes,const char *toggleTitle, const char *tip)
+{
+	return new  ADM_qt4Factory::diaElemNotch(yes,toggleTitle, tip);
+}
+void qt4DestroyNotch(diaElem *e)
+{
+	ADM_qt4Factory::diaElemNotch *a=(ADM_qt4Factory::diaElemNotch *)e;
+	delete a;
+}
+//EOF
+
+//EOF

Copied: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/FAC_readOnlyText.cpp (from rev 4061, branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/FAC_readOnlyText.cpp)
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/FAC_readOnlyText.cpp	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/FAC_readOnlyText.cpp	2008-05-24 19:16:19 UTC (rev 4062)
@@ -0,0 +1,160 @@
+/***************************************************************************
+  FAC_toggle.cpp
+  Handle dialog factory element : Toggle
+  (C) 2006 Mean <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">Fixounet at free.fr</A> 
+***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+
+#include &lt;QtGui/QGridLayout&gt;
+#include &lt;QtGui/QLabel&gt;
+#include &lt;QtGui/QLineEdit&gt;
+
+#include &quot;ADM_default.h&quot;
+#include &quot;DIA_factory.h&quot;
+
+extern const char *shortkey(const char *);
+
+namespace ADM_qt4Factory
+{
+
+class diaElemReadOnlyText : public diaElem
+{
+
+public:
+  
+  diaElemReadOnlyText(const char *readyOnly,const char *toggleTitle,const char *tip=NULL);
+  virtual ~diaElemReadOnlyText() ;
+  void setMe(void *dialog, void *opaque,uint32_t line);
+  void getMe(void);
+  
+};
+
+class diaElemText : public diaElem
+{
+
+public:
+  
+  diaElemText(char **text,const char *toggleTitle,const char *tip=NULL);
+  virtual ~diaElemText() ;
+  void setMe(void *dialog, void *opaque,uint32_t line);
+  void getMe(void);
+  void enable(uint32_t onoff);
+};
+
+//********************************************************************
+diaElemReadOnlyText::diaElemReadOnlyText(const char *readyOnly,const char *toggleTitle,const char *tip)
+  : diaElem(ELEM_TOGGLE)
+{
+  param=(void *)ADM_strdup(readyOnly);
+  paramTitle=shortkey(toggleTitle);
+  this-&gt;tip=tip;
+ }
+
+diaElemReadOnlyText::~diaElemReadOnlyText()
+{
+  if(paramTitle)
+    delete paramTitle;
+  ADM_dealloc(readOnly);
+}
+void diaElemReadOnlyText::setMe(void *dialog, void *opaque,uint32_t line)
+{
+
+  QGridLayout *layout=(QGridLayout*) opaque;
+
+   
+ 
+ QLabel *text=new QLabel( QString::fromUtf8(this-&gt;paramTitle),(QWidget *)dialog);
+  QLabel *text2=new QLabel( QString::fromUtf8((char *)param),(QWidget *)dialog);
+ text-&gt;setBuddy(text2);
+ layout-&gt;addWidget(text,line,0);
+ layout-&gt;addWidget(text2,line,1);
+ myWidget=(void *)text2;  
+}
+void diaElemReadOnlyText::getMe(void)
+{
+
+ 
+}
+//*********************************
+
+diaElemText::diaElemText(char **text,const char *toggleTitle,const char *tip)
+    : diaElem(ELEM_TEXT)
+{
+  
+  if(!*text) *text=ADM_strdup(&quot;&quot;);
+  param=(void *)text;
+  paramTitle=shortkey(toggleTitle);
+  this-&gt;tip=tip;
+ }
+
+diaElemText::~diaElemText()
+{
+  if(paramTitle)
+    delete paramTitle;
+}
+void diaElemText::setMe(void *dialog, void *opaque,uint32_t line)
+{
+
+ QGridLayout *layout=(QGridLayout*) opaque;
+ 
+ QLabel *text=new QLabel( QString::fromUtf8(this-&gt;paramTitle),(QWidget *)dialog);
+ QLineEdit *lineEdit = new QLineEdit( QString::fromUtf8(*(char **)param));
+ 
+ text-&gt;setBuddy(lineEdit);
+ layout-&gt;addWidget(text,line,0);
+ layout-&gt;addWidget(lineEdit,line,1);
+ myWidget=(void *)lineEdit;  
+}
+void diaElemText::getMe(void)
+{
+  char **c=(char **)param;
+  QLineEdit *lineEdit=(QLineEdit *)myWidget;
+  ADM_assert(lineEdit);
+  if(*c) ADM_dealloc(*c);
+  *c=ADM_strdup(lineEdit-&gt;text().toAscii().data());
+ 
+}
+void diaElemText::enable(uint32_t onoff)
+{
+  ADM_assert(myWidget);
+ QLineEdit *lineEdit=(QLineEdit *)myWidget;
+  ADM_assert(lineEdit);
+  if(onoff)
+    lineEdit-&gt;setEnabled(TRUE);
+  else
+    lineEdit-&gt;setDisabled(TRUE);
+}
+} // End of namespace
+//****************************Hoook*****************
+
+diaElem  *qt4CreateRoText(const char *text,const char *toggleTitle, const char *tip)
+{
+	return new  ADM_qt4Factory::diaElemReadOnlyText(text,toggleTitle,tip);
+}
+void qt4DestroyRoText(diaElem *e)
+{
+	ADM_qt4Factory::diaElemReadOnlyText *a=(ADM_qt4Factory::diaElemReadOnlyText *)e;
+	delete a;
+}
+
+diaElem  *qt4CreateText(char **text,const char *toggleTitle, const char *tip)
+{
+	return new  ADM_qt4Factory::diaElemText(text,toggleTitle,tip);
+}
+void qt4DestroyText(diaElem *e)
+{
+	ADM_qt4Factory::diaElemText *a=(ADM_qt4Factory::diaElemText *)e;
+	delete a;
+}
+//EOF
+
+//EOF

Copied: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_bitrate.cpp (from rev 4061, branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_bitrate.cpp)
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_bitrate.cpp	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_bitrate.cpp	2008-05-24 19:16:19 UTC (rev 4062)
@@ -0,0 +1,233 @@
+/***************************************************************************
+  FAC_toggle.cpp
+  Handle dialog factory element : Toggle
+  (C) 2006 Mean <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">Fixounet at free.fr</A> 
+***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#include &quot;T_bitrate.h&quot;
+#include &quot;ADM_default.h&quot;
+#include &quot;DIA_factory.h&quot;
+
+extern const char *shortkey(const char *);
+
+namespace ADM_Qt4Factory
+{
+class diaElemBitrate : public diaElemBitrateBase
+{
+public:
+  diaElemBitrate(COMPRES_PARAMS *p,const char *toggleTitle,const char *tip=NULL);
+  virtual ~diaElemBitrate() ;
+  void setMe(void *dialog, void *opaque,uint32_t line);
+  void getMe(void);
+  void setMaxQz(uint32_t qz);
+  
+  void updateMe(void);
+};
+
+ADM_Qbitrate::ADM_Qbitrate(QWidget *z,COMPRES_PARAMS *p,uint32_t mq,QGridLayout *layout,int line) : QWidget(z) 
+{
+	compress=p;
+	combo=new QComboBox(z);
+
+	maxQ=mq;
+	int index=0,set=-1;
+#define add(x,z,y) if(compress-&gt;capabilities &amp; ADM_ENC_CAP_##x) {combo-&gt;addItem(QString::fromUtf8(y));\
+	if(p-&gt;mode==COMPRESS_##z) set=index;\
+	index++;}
+
+	add(CBR,CBR,QT_TR_NOOP(&quot;Constant Bitrate&quot;));
+	add(CQ,CQ,QT_TR_NOOP(&quot;Constant Quality&quot;));
+	add(SAME,SAME,QT_TR_NOOP(&quot;Same Quantizer as Input&quot;));
+	add(AQ,AQ,QT_TR_NOOP(&quot;Average Quantizer&quot;));
+	add(2PASS,2PASS,QT_TR_NOOP(&quot;Two Pass - Video Size&quot;));
+	add(2PASS_BR,2PASS_BITRATE,QT_TR_NOOP(&quot;Two Pass - Average Bitrate&quot;));
+
+	combo-&gt;show();
+
+	text1=new QLabel( QString::fromUtf8(QT_TR_NOOP(&quot;Encoding mode&quot;)),z);
+	text1-&gt;setBuddy(combo);
+	text1-&gt;show();
+
+	box=new QSpinBox(z);
+	box-&gt;show();
+
+	text2=new QLabel( QString::fromUtf8(QT_TR_NOOP(&quot;Bitrate&quot;)),z);
+	text2-&gt;setBuddy(combo);
+
+	layout-&gt;addWidget(text1,line,0);
+	layout-&gt;addWidget(combo,line,1);
+
+	layout-&gt;addWidget(text2,line+1,0);
+	layout-&gt;addWidget(box,line+1,1);
+
+	if(set!=-1) 
+	{
+		combo-&gt;setCurrentIndex(set);
+		comboChanged(set);
+	}
+
+	QObject::connect(combo, SIGNAL(currentIndexChanged(int )), this, SLOT(comboChanged(int )));
+}
+
+/**
+ * 	\fn 	readPullDown
+ * \brief 	Convert the raw read of the combox into the actual compression mode
+ */
+static COMPRESSION_MODE readPulldown(COMPRES_PARAMS *copy,int rank)
+{
+	int index=0;
+	COMPRESSION_MODE mode=COMPRESS_MAX;
+	
+#undef LOOKUP
+#define LOOKUP(A,B) \
+  if(copy-&gt;capabilities &amp; ADM_ENC_CAP_##A) \
+  { \
+	  if(rank==index) mode=COMPRESS_##B; \
+	  index++; \
+  } 
+  
+  LOOKUP(CBR,CBR);
+  LOOKUP(CQ,CQ);
+  LOOKUP(SAME,SAME);
+  LOOKUP(AQ,AQ);
+  LOOKUP(2PASS,2PASS);
+  LOOKUP(2PASS_BR,2PASS_BITRATE);
+  
+	ADM_assert(mode!=COMPRESS_MAX);
+	return mode;
+}
+
+void ADM_Qbitrate::readBack(void)
+{
+#define Mx(x) compress-&gt;mode=x
+#define Vx(x) compress-&gt;x=box-&gt;value();
+	COMPRESSION_MODE mode=readPulldown(compress,combo-&gt;currentIndex());
+  switch(mode)
+  {
+    case COMPRESS_CBR: Mx(COMPRESS_CBR);Vx(bitrate);break;
+    case COMPRESS_CQ: Mx(COMPRESS_CQ);Vx(qz);break;
+    case COMPRESS_2PASS: Mx(COMPRESS_2PASS);Vx(finalsize);break;
+    case COMPRESS_2PASS_BITRATE: Mx(COMPRESS_2PASS_BITRATE);Vx(avg_bitrate);break;
+    case COMPRESS_SAME: Mx(COMPRESS_SAME);break;
+    case COMPRESS_AQ: Mx(COMPRESS_AQ);break;
+    default :
+          ADM_assert(0);
+  }
+}
+void ADM_Qbitrate::comboChanged(int i)
+{
+  printf(&quot;Changed\n&quot;); 
+#define P(x) text2-&gt;setText(QString::fromUtf8(x))
+#define M(x,y) box-&gt;setMinimum  (x);box-&gt;setMaximum  (y);
+#define S(x)   box-&gt;setValue(x);
+  COMPRESSION_MODE mode=readPulldown(compress,i);
+    switch(mode)
+  {
+    case COMPRESS_CBR: //CBR
+          P(QT_TR_NOOP(&quot;Target bitrate (kb/s)&quot;));
+          M(0,20000);
+          S(compress-&gt;bitrate);
+          break; 
+    case COMPRESS_<A HREF="CQ://">CQ://</A> CQ
+          P(QT_TR_NOOP(&quot;Quantizer&quot;));
+          M(2,maxQ);
+          S(compress-&gt;qz);
+          break;
+    case COMPRESS_2PASS : // 2pass Filesize
+          P(QT_TR_NOOP(&quot;Target video size (MB)&quot;));
+          M(1,8000);
+          S(compress-&gt;finalsize);
+          break;
+    case COMPRESS_2PASS_BITRATE : // 2pass Avg
+          P(QT_TR_NOOP(&quot;Average bitrate (kb/s)&quot;));
+          M(0,20000);
+          S(compress-&gt;avg_bitrate);
+          break;
+    case COMPRESS_SAME : // Same Qz as input
+          P(QT_TR_NOOP(&quot;-&quot;));
+          M(0,0);
+          break;
+    case COMPRESS_AQ : // AQ
+          P(QT_TR_NOOP(&quot;Quantizer&quot;));
+          M(2,maxQ);
+          S(compress-&gt;qz);
+          break;
+    default:ADM_assert(0);
+  }
+}
+ADM_Qbitrate::~ADM_Qbitrate()
+{
+#define DEL(x) if(x) {delete x;x=NULL;}
+#if 0 // Automatically deleted
+                 DEL(text1)
+                 DEL(text2)
+                 DEL(box) 
+                 DEL(combo) 
+#endif
+};
+
+//**********************************
+diaElemBitrate::diaElemBitrate(COMPRES_PARAMS *p,const char *toggleTitle,const char *tip)
+  : diaElemBitrateBase()
+{
+ 
+  param=(void *)p;
+  memcpy(&amp;copy,p,sizeof(copy));
+  paramTitle=NULL;
+  this-&gt;tip=tip;
+  setSize(2);
+  maxQ=31;
+}
+void diaElemBitrate::setMaxQz(uint32_t qz)
+{
+  maxQ=qz; 
+}
+
+diaElemBitrate::~diaElemBitrate()
+{
+  ADM_assert(myWidget);
+#if 0 // Automatically deleted as it is a child of main dialog
+  ADM_Qbitrate *z=(ADM_Qbitrate *)myWidget;
+  
+  if(z) delete z;
+
+  myWidget=NULL;
+#endif
+}
+void diaElemBitrate::setMe(void *dialog, void *opaque,uint32_t line)
+{
+  QGridLayout *layout=(QGridLayout*) opaque;
+  
+  ADM_Qbitrate *b=new ADM_Qbitrate( (QWidget *)dialog,(COMPRES_PARAMS *)&amp;copy,maxQ,layout,line);
+  myWidget=(void *)b;
+  
+}
+void diaElemBitrate::getMe(void)
+{
+  ((ADM_Qbitrate *)myWidget)-&gt;readBack();
+  memcpy(param,&amp;copy,sizeof(copy));
+}
+
+} // End of namespace
+//****************************Hoook*****************
+
+diaElem  *qt4CreateBitrate(COMPRES_PARAMS *p,const char *toggleTitle,const char *tip)
+{
+	return new  ADM_Qt4Factory::diaElemBitrate(p,toggleTitle,tip);
+}
+void qt4DestroyBitrate(diaElem *e)
+{
+	ADM_Qt4Factory::diaElemBitrate *a=(ADM_Qt4Factory::diaElemBitrate *)e;
+	delete a;
+}
+//EOF
+

Copied: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_bitrate.h (from rev 4061, branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_bitrate.h)
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_bitrate.h	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_bitrate.h	2008-05-24 19:16:19 UTC (rev 4062)
@@ -0,0 +1,34 @@
+#ifndef T_bitrate_h
+#define T_bitrate_h
+
+#include &lt;QtGui/QComboBox&gt;
+#include &lt;QtGui/QGridLayout&gt;
+#include &lt;QtGui/QLabel&gt;
+#include &lt;QtGui/QSpinBox&gt;
+
+#include &quot;ADM_inttype.h&quot;
+#include &quot;ADM_encoder/ADM_vidEncode.hxx&quot;
+
+namespace ADM_Qt4Factory
+{
+	class  ADM_Qbitrate : public QWidget
+	{
+		Q_OBJECT
+
+	public slots:
+		void comboChanged(int i);
+
+	public:
+		QSpinBox        *box;
+		QComboBox       *combo;
+		QLabel          *text1;
+		QLabel          *text2;
+		COMPRES_PARAMS  *compress;
+		uint32_t        maxQ;
+
+		ADM_Qbitrate(QWidget *z, COMPRES_PARAMS *p, uint32_t mq, QGridLayout *layout, int line);
+		virtual ~ADM_Qbitrate();
+		void readBack(void);
+	};
+}
+#endif	// T_bitrate_h

Copied: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_button.cpp (from rev 4061, branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_button.cpp)
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_button.cpp	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_button.cpp	2008-05-24 19:16:19 UTC (rev 4062)
@@ -0,0 +1,103 @@
+/***************************************************************************
+  FAC_toggle.cpp
+  Handle dialog factory element : Toggle
+  (C) 2006 Mean <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">Fixounet at free.fr</A> 
+***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#include &quot;T_button.h&quot;
+#include &quot;ADM_default.h&quot;
+
+extern const char *shortkey(const char *);
+namespace ADM_Qt4Factory
+{
+class diaElemButton : public diaElem
+{
+  protected:
+  public:
+    void            *_cookie;
+    ADM_FAC_CALLBACK *_callBack;
+            diaElemButton(const char *toggleTitle, ADM_FAC_CALLBACK *cb,void *cookie,const char *tip=NULL);
+  virtual   ~diaElemButton() ;
+  void      setMe(void *dialog, void *opaque,uint32_t line);
+  void      getMe(void);
+  void      enable(uint32_t onoff) ;
+};
+
+ADM_Qbutton::ADM_Qbutton(QWidget *z,QGridLayout *layout,const char *blah,int line,ADM_FAC_CALLBACK *cb, void *cookie) : QWidget(z) 
+{
+	_cb=cb;
+	_cookie=cookie;
+	button=new QPushButton(QString::fromUtf8(blah),z);
+	button-&gt;show();
+	layout-&gt;addWidget(button,line,0);
+	QObject::connect(button, SIGNAL(clicked(bool)), this, SLOT(clicked(bool )));
+}
+
+void ADM_Qbutton::clicked(bool i)
+{
+    _cb(_cookie);
+}
+ADM_Qbutton::~ADM_Qbutton()
+{
+}
+//*****************************
+diaElemButton:: diaElemButton(const char *toggleTitle, ADM_FAC_CALLBACK *cb,void *cookie,const char *tip)
+  : diaElem(ELEM_BUTTON)
+{
+  param=(void *)NULL;
+  paramTitle=shortkey(toggleTitle);
+  this-&gt;tip=tip;
+  _cookie=cookie;
+  _callBack=cb;
+  
+}
+
+diaElemButton::~diaElemButton()
+{
+	delete paramTitle;
+}
+
+void diaElemButton::setMe(void *dialog, void *opaque,uint32_t line)
+{
+  QGridLayout *layout=(QGridLayout*) opaque;
+  
+  ADM_Qbutton *b=new ADM_Qbutton( (QWidget *)dialog,layout,paramTitle,line,_callBack,_cookie);
+  myWidget=(void *)b;
+}
+void diaElemButton::getMe(void)
+{
+  if(paramTitle)
+  {
+    ADM_dealloc(paramTitle);
+    paramTitle=NULL; 
+  }
+}
+void   diaElemButton::enable(uint32_t onoff)
+{
+
+}
+
+}; // End of namespace
+//****************************Hoook*****************
+
+diaElem  *qt4CreateButton(const char *toggleTitle, ADM_FAC_CALLBACK *cb,void *cookie,const char *tip)
+{
+	return new  ADM_Qt4Factory::diaElemButton(toggleTitle,cb,cookie,tip);
+}
+void qt4DestroyButton(diaElem *e)
+{
+	ADM_Qt4Factory::diaElemButton *a=(ADM_Qt4Factory::diaElemButton *)e;
+	delete a;
+}
+//
+//EOF
+

Copied: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_button.h (from rev 4061, branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_button.h)
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_button.h	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_button.h	2008-05-24 19:16:19 UTC (rev 4062)
@@ -0,0 +1,31 @@
+#ifndef T_button_h
+#define T_button_h
+
+#include &lt;QtGui/QGridLayout&gt;
+#include &lt;QtGui/QPushButton&gt;
+#include &lt;QtGui/QWidget&gt;
+
+#include &quot;ADM_inttype.h&quot;
+#include &quot;DIA_factory.h&quot;
+
+namespace ADM_Qt4Factory
+{
+	class ADM_Qbutton : public QWidget
+	{
+		Q_OBJECT
+
+	public slots:
+		void clicked(bool i);
+
+	protected :
+		ADM_FAC_CALLBACK *_cb;
+		void *_cookie;
+
+	public:
+		QPushButton *button;
+
+		ADM_Qbutton(QWidget *z, QGridLayout *layout, const char *blah, int line, ADM_FAC_CALLBACK *cb, void *cookie);
+		virtual ~ADM_Qbutton();
+	};
+}
+#endif	// T_button_h

Copied: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_dialogFactory.cpp (from rev 4061, branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_dialogFactory.cpp)
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_dialogFactory.cpp	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_dialogFactory.cpp	2008-05-24 19:16:19 UTC (rev 4062)
@@ -0,0 +1,336 @@
+/***************************************************************************
+  DIA_dialogFactory.cpp
+  (C) 2007 Mean <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">Fixounet at free.fr</A> 
+***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#include &lt;QtGui/QDialogButtonBox&gt;
+#include &lt;QtGui/QGridLayout&gt;
+#include &lt;QtGui/QSpacerItem&gt;
+#include &lt;QtGui/QTabWidget&gt;
+
+#include &quot;T_dialogFactory.h&quot;
+#include &quot;ADM_default.h&quot;
+#include &quot;DIA_factory.h&quot;
+#include &quot;DIA_coreToolkit.h&quot;
+#include &quot;DIA_coreUI_internal.h&quot;
+
+static void insertTab(uint32_t index, diaElemTabs *tab, QTabWidget *wtab);
+factoryWindow::factoryWindow()     : QDialog()
+ {
+//     ui.setupUi(this);
+     //connect( (ui.pushButton),SIGNAL(pressed()),this,SLOT(buttonPressed()));
+ }
+
+
+/**
+    \fn qt4DiaFactoryRun(const char *title,uint32_t nb,diaElem **elems)
+    \brief  Run a dialog made of nb elems, each elem being described in the **elems
+    @return 0 on failure, 1 on success
+*/
+
+uint8_t qt4DiaFactoryRun(const char *title,uint32_t nb,diaElem **elems)
+{
+  factoryWindow dialog;
+  
+  ADM_assert(title);
+  ADM_assert(nb);
+  ADM_assert(elems);
+  
+  dialog.setWindowTitle(QString::fromUtf8(title));
+  
+  QGridLayout layout(&amp;dialog);
+  
+  /* First compute the size of our window */
+  int vsize=0;
+  for(int i=0;i&lt;nb;i++)
+  {
+    ADM_assert(elems[i]);
+     vsize+=elems[i]-&gt;getSize(); 
+  }
+
+ int  v=0;
+  for(int i=0;i&lt;nb;i++)
+  {
+    ADM_assert(elems[i]);
+     elems[i]-&gt;setMe( (void *)&amp;dialog,&amp;layout,v); 
+     v+=elems[i]-&gt;getSize();
+    
+  }
+   for(int i=0;i&lt;nb;i++)
+  {
+    ADM_assert(elems[i]);
+     elems[i]-&gt;finalize(); 
+  }
+  // Add buttons
+   QDialogButtonBox buttonBox((QWidget *)&amp;dialog);
+    buttonBox.setStandardButtons(QDialogButtonBox::Ok
+                            | QDialogButtonBox::Cancel);
+     QObject::connect(&amp;buttonBox, SIGNAL(accepted()), &amp;dialog, SLOT(accept()));
+     QObject::connect(&amp;buttonBox, SIGNAL(rejected()), &amp;dialog, SLOT(reject()));
+     layout.addWidget(&amp;buttonBox,vsize,0);
+  // run
+  dialog.setLayout(&amp;layout);
+  if(dialog.exec()==QDialog::Accepted)
+  {
+     for(int i=0;i&lt;nb;i++)
+     {
+        ADM_assert(elems[i]);
+        elems[i]-&gt;getMe(); 
+    
+      }
+    return 1;
+  }
+  return 0;
+  
+}
+/**
+    \fn shortkey(const char *in)
+    \brief translate gtk like accelerator (_) to QT4 like accelerator (&amp;)
+*/
+const char *shortkey(const char *in)
+{
+ char *t=ADM_strdup(in);
+ for(int i=0;i&lt;strlen(t);i++)
+ {
+    if(t[i]=='_') t[i]='&amp;'; 
+ }
+  return t;
+}
+/**
+ * 	\fn qt4DiaFactoryRunTabs
+ */
+uint8_t qt4DiaFactoryRunTabs(const char *title,uint32_t nb,diaElemTabs **tabs)
+{
+    factoryWindow dialog;
+  
+  ADM_assert(title);
+  ADM_assert(nb);
+  ADM_assert(tabs);
+  
+  dialog.setWindowTitle(QString::fromUtf8(title));
+  
+  QGridLayout layout(&amp;dialog);
+
+  // Add tabs
+  QTabWidget wtabs((QWidget *)&amp;dialog);
+  // Add buttons
+   QDialogButtonBox buttonBox((QWidget *)&amp;dialog);
+    buttonBox.setStandardButtons(QDialogButtonBox::Ok
+                            | QDialogButtonBox::Cancel);
+     QObject::connect(&amp;buttonBox, SIGNAL(accepted()), &amp;dialog, SLOT(accept()));
+     QObject::connect(&amp;buttonBox, SIGNAL(rejected()), &amp;dialog, SLOT(reject()));
+     
+     for(int i=0;i&lt;nb;i++)
+     {
+        ADM_assert(tabs[i]);
+        insertTab(i,tabs[i],&amp;wtabs); 
+    
+      }
+     
+     layout.addWidget(&amp;wtabs,0,0);
+     layout.addWidget(&amp;buttonBox,1,0);
+  // run
+  dialog.setLayout(&amp;layout);
+  if(dialog.exec()==QDialog::Accepted)
+  {
+      // Read tabs
+       for(int tab=0;tab&lt;nb;tab++)
+     {
+        ADM_assert(tabs[tab]);
+        diaElemTabs *myTab=tabs[tab];
+        for(int i=0;i&lt;myTab-&gt;nbElems;i++)
+        {
+          myTab-&gt;dias[i]-&gt;getMe();
+        }
+    
+      }
+      return 1;
+  }
+  return 0;
+  
+}
+
+void insertTab(uint32_t index, diaElemTabs *tab, QTabWidget *wtab)
+{
+
+  QWidget *wid=new QWidget;
+  QGridLayout *layout=new QGridLayout(wid);
+  QSpacerItem *spacerItem = new QSpacerItem(20, 40, QSizePolicy::Minimum, QSizePolicy::Expanding);
+  
+  /* First compute the size of our window */
+  int vsize=0;
+  for(int i=0;i&lt;tab-&gt;nbElems;i++)
+  {
+    ADM_assert(tab-&gt;dias[i]);
+     vsize+=tab-&gt;dias[i]-&gt;getSize(); 
+  }
+
+ int  v=0;
+  for(int i=0;i&lt;tab-&gt;nbElems;i++)
+  {
+     ADM_assert(tab-&gt;dias[i]);
+     tab-&gt;dias[i]-&gt;setMe( wid,layout,v); 
+     v+=tab-&gt;dias[i]-&gt;getSize();
+    
+  }
+  
+  wtab-&gt;addTab(wid,QString::fromUtf8(tab-&gt;title));
+  for(int i=0;i&lt;tab-&gt;nbElems;i++)
+  {
+    tab-&gt;dias[i]-&gt;finalize(); 
+  }
+
+  layout-&gt;addItem(spacerItem, v, 0);
+}
+
+/**
+ * 
+ */
+/**
+ *  \fn gtkFactoryGetVersion
+ * 	\brief returns the version this has been compiled with
+ */
+void      qt4FactoryGetVersion(uint32_t *maj,uint32_t *minor,uint32_t *patch)
+{
+	*maj=ADM_COREUI_MAJOR;
+	*minor=ADM_COREUI_MINOR;
+	*patch=ADM_COREUI_PATCH;
+	
+}
+extern CREATE_BITRATE_T     qt4CreateBitrate;
+extern DELETE_DIA_ELEM_T    qt4DestroyBitrate;
+extern CREATE_BAR_T         qt4CreateBar;
+extern DELETE_DIA_ELEM_T    qt4DestroyBar;
+extern CREATE_FLOAT_T       qt4CreateFloat;
+extern DELETE_DIA_ELEM_T    qt4DestroyFloat;
+extern CREATE_FRAME_T		qt4CreateFrame;
+extern DELETE_DIA_ELEM_T    qt4DestroyFrame;
+extern CREATE_HEX_T         qt4CreateHex;
+extern DELETE_DIA_ELEM_T    qt4DestroyHex;
+extern CREATE_INTEGER_T     qt4CreateInteger;
+extern CREATE_UINTEGER_T    qt4CreateUInteger;
+extern DELETE_DIA_ELEM_T    qt4DestroyInteger;
+extern DELETE_DIA_ELEM_T    qt4DestroyUInteger;
+extern CREATE_MATRIX_T      qt4CreateMatrix;
+extern DELETE_DIA_ELEM_T    qt4DestroyMatrix;
+extern CREATE_NOTCH_T       qt4CreateNotch;
+extern DELETE_DIA_ELEM_T    qt4DestroyNotch;
+extern CREATE_READONLYTEXT_T qt4CreateRoText;
+extern CREATE_TEXT_T 	   qt4CreateText;
+extern DELETE_DIA_ELEM_T   qt4DestroyRoText;
+extern DELETE_DIA_ELEM_T   qt4DestroyText;
+extern CREATE_BUTTON_T     qt4CreateButton;
+extern DELETE_DIA_ELEM_T   qt4DestroyButton;
+extern CREATE_FILE_T       qt4CreateFile;
+extern DELETE_DIA_ELEM_T   qt4DestroyFile;
+extern CREATE_DIR_T        qt4CreateDir;
+extern DELETE_DIA_ELEM_T   qt4DestroyDir;
+extern CREATE_MENUDYNAMIC_T     qt4CreateMenuDynamic;
+extern CREATE_MENU_T       qt4CreateMenu;
+extern DELETE_DIA_ELEM_T   qt4DestroyMenu;
+extern DELETE_DIA_ELEM_T   qt4DestroyMenuDynamic;
+extern CREATE_USLIDER_T     qt4CreateUSlider;
+extern DELETE_DIA_ELEM_T    qt4DestroyUSlider;
+extern 	CREATE_SLIDER_T     qt4CreateSlider;
+extern 	DELETE_DIA_ELEM_T   qt4DestroySlider;
+extern CREATE_THREADCOUNT_T qt4CreateThreadCount;
+extern DELETE_DIA_ELEM_T    qt4DestroyThreadCount;
+extern CREATE_TOGGLE_UINT   qt4CreateToggleUint;
+extern DELETE_DIA_ELEM_T    qt4DestroyToggleUint;
+extern CREATE_TOGGLE_INT    qt4CreateToggleInt;
+extern DELETE_DIA_ELEM_T    qt4DestroyToggleInt;
+extern CREATE_TOGGLE_T      qt4CreateToggle;
+extern DELETE_DIA_ELEM_T    qt4DestroyToggle;
+
+//************
+static FactoryDescriptor Qt4FactoryDescriptor=
+{
+	&amp;qt4FactoryGetVersion,
+	&amp;qt4DiaFactoryRun,
+	&amp;qt4DiaFactoryRunTabs,
+	// Buttons
+	&amp;qt4CreateButton,
+	&amp;qt4DestroyButton,
+	// Bar
+	&amp;qt4CreateBar,
+	&amp;qt4DestroyBar,
+	// Float
+	&amp;qt4CreateFloat,
+	&amp;qt4DestroyFloat,
+	// Integer
+	&amp;qt4CreateInteger,
+	&amp;qt4DestroyInteger,
+	// UInteger
+	&amp;qt4CreateUInteger,
+	&amp;qt4DestroyUInteger,
+	// Notch
+	&amp;qt4CreateNotch,
+	&amp;qt4DestroyNotch,
+	// RoText
+	&amp;qt4CreateRoText,
+	&amp;qt4DestroyRoText,
+	// Text
+	&amp;qt4CreateText,
+	&amp;qt4DestroyText,
+	// Hex
+	&amp;qt4CreateHex,
+	&amp;qt4DestroyHex,
+	// Matrix
+	&amp;qt4CreateMatrix,
+	&amp;qt4DestroyMatrix,
+	// Menu
+	&amp;qt4CreateMenu,
+	&amp;qt4DestroyMenu,
+	&amp;qt4CreateMenuDynamic,
+	&amp;qt4DestroyMenuDynamic,
+	// ThreadCount
+	&amp;qt4CreateThreadCount,
+	&amp;qt4DestroyThreadCount,
+	// Bitrate
+	&amp;qt4CreateBitrate,
+	&amp;qt4DestroyBitrate,
+	// File
+	&amp;qt4CreateFile,
+	&amp;qt4DestroyFile,
+	// Dir
+	&amp;qt4CreateDir,
+	&amp;qt4DestroyDir,
+	// Frame
+	&amp;qt4CreateFrame,
+	&amp;qt4DestroyFrame,
+    // Toggle uint/int
+	&amp;qt4CreateToggleUint,
+	&amp;qt4DestroyToggleUint,
+	&amp;qt4CreateToggleInt,
+	&amp;qt4DestroyToggleInt,
+	// Regular toggle
+	&amp;qt4CreateToggle,
+	&amp;qt4DestroyToggle,
+	// Slider
+	&amp;qt4CreateUSlider,
+	&amp;qt4DestroyUSlider,
+	&amp;qt4CreateSlider,
+	&amp;qt4DestroySlider
+};
+
+/**
+ * 	\fn InitFactory
+ *  \brief Install our factory hooks
+ */
+void InitFactory(void)
+{
+	DIA_factoryInit(&amp;Qt4FactoryDescriptor);
+	
+	
+}
+
+//EOF

Copied: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_dialogFactory.h (from rev 4061, branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_dialogFactory.h)
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_dialogFactory.h	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_dialogFactory.h	2008-05-24 19:16:19 UTC (rev 4062)
@@ -0,0 +1,13 @@
+#ifndef T_dialogFactory_h
+#define T_dialogFactory_h
+
+#include &lt;QtGui/QDialog&gt;
+
+class factoryWindow : public QDialog
+{
+	Q_OBJECT
+
+public:
+	factoryWindow();
+};
+#endif	// T_dialogFactory_h

Copied: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_filesel.cpp (from rev 4061, branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_filesel.cpp)
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_filesel.cpp	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_filesel.cpp	2008-05-24 19:16:19 UTC (rev 4062)
@@ -0,0 +1,253 @@
+/***************************************************************************
+  FAC_filesel.cpp
+  Handle dialog factory element : Filesel
+  (C) 2006 Mean <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">Fixounet at free.fr</A> 
+***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#include &quot;T_filesel.h&quot;
+#include &quot;ADM_default.h&quot;
+//#include &quot;prefs.h&quot;
+#include &quot;DIA_factory.h&quot;
+#include &quot;DIA_fileSel.h&quot;
+
+extern const char *shortkey(const char *);
+void GUI_FileSelRead(const char *label, char * * name);
+#define MAX_SEL 2040
+
+namespace ADM_Qt4Factory
+{
+class diaElemFile : public diaElemFileBase
+{
+
+protected:
+    
+public:
+  
+  diaElemFile(uint32_t writeMode,char **filename,const char *toggleTitle,
+              const char *defaultSuffix = 0,const char *tip=NULL);
+  virtual ~diaElemFile() ;
+  void setMe(void *dialog, void *opaque,uint32_t line);
+  void getMe(void);
+  
+  void   changeFile(void);
+  void   enable(uint32_t onoff);
+};
+class diaElemDirSelect : public diaElemDirSelectBase
+{
+
+public:
+  
+  diaElemDirSelect(char **filename,const char *toggleTitle,const char *tip=NULL);
+  virtual ~diaElemDirSelect() ;
+  void setMe(void *dialog, void *opaque,uint32_t line);
+  void getMe(void);
+  
+  void changeFile(void);
+  void   enable(uint32_t onoff);
+};
+
+void ADM_Qfilesel::buttonPressed(QAbstractButton *s)
+{ 
+	uint8_t r=0;
+	char buffer[MAX_SEL+1],*txt;
+	txt=&quot;&quot;;
+	switch(fileMode)
+	{
+		case ADM_FILEMODE_READ:
+			r=FileSel_SelectRead(selectDesc,buffer,MAX_SEL,txt);
+			break;
+		case ADM_FILEMODE_WRITE:
+#warning FIXME
+#if 0
+			if (defaultSuffix)
+			{
+				const char * lastfilename;
+				if (prefs-&gt;get(LASTFILES_FILE1,(ADM_filename **)&amp;lastfilename))
+				{
+					strcpy (buffer, lastfilename);
+					char * cptr = buffer + strlen (buffer);
+					while (cptr &gt; buffer)
+					{
+						if (*cptr == '.')
+						{
+							strcpy (cptr + 1, defaultSuffix);
+							txt = buffer;
+							printf (&quot;Default output filename is %s based on &quot;
+								&quot;%s + %s\n&quot;,
+								txt, lastfilename, defaultSuffix);
+							break;
+						}
+						--cptr;
+					}
+				}
+			}
+#endif
+			r=FileSel_SelectWrite(selectDesc,buffer,MAX_SEL,txt);
+			break;
+
+		case ADM_FILEMODE_DIR:
+			r=FileSel_SelectDir(selectDesc,buffer,MAX_SEL,txt);
+			break;
+		default:
+			ADM_assert(0);
+	}
+	if(r)
+	{
+		edit-&gt;setText(QString::fromUtf8(buffer));
+	}
+}
+
+ADM_Qfilesel::ADM_Qfilesel(QWidget *z,const char *title,const char *entry,QGridLayout *layout,int line, ADM_fileMode mode, const char * defaultSuffix, const char* selectDesc) : 
+	QWidget(z), defaultSuffix (defaultSuffix), selectDesc (selectDesc)
+{          
+	fileMode=mode;
+	edit=new QLineEdit(QString::fromUtf8(entry),z);
+
+	edit-&gt;show();
+
+	button=new QDialogButtonBox(QDialogButtonBox::Open,Qt::Horizontal,z);
+	button-&gt;show();
+
+	text=new QLabel(QString::fromUtf8(title),z);
+	text-&gt;setBuddy(edit);
+	layout-&gt;addWidget(text,line,0);
+	layout-&gt;addWidget(edit,line,1);
+	layout-&gt;addWidget(button,line,2);
+	//QObject::connect(&amp;button, SIGNAL(accepted()), NULL, SLOT(accept())); 
+	connect( button,SIGNAL(clicked(QAbstractButton  *)),this,SLOT(buttonPressed(QAbstractButton  *)));
+}
+
+ADM_Qfilesel::~ADM_Qfilesel() 
+{
+#if 1 //Memleak or autoclean ?
+	if(edit) delete edit;
+	if(button) delete button;
+	if(text) delete text;
+#endif
+};
+
+diaElemFile::diaElemFile(uint32_t writemode,char **filename,const char *toggleTitle,
+                         const char *defaultSuffix,const char *selectFileDesc)
+  : diaElemFileBase()
+    
+{
+  this-&gt;defaultSuffix=defaultSuffix;
+  param=(void *)filename;
+  paramTitle=shortkey(toggleTitle);
+
+  if (!selectFileDesc || strlen(selectFileDesc) == 0)
+	  tip = toggleTitle;
+  else
+      tip = selectFileDesc;
+
+  _write=writemode;
+}
+
+diaElemFile::~diaElemFile()
+{
+  if(paramTitle)
+    delete paramTitle;
+}
+
+void diaElemFile::setMe(void *dialog, void *opaque,uint32_t line)
+{
+ QGridLayout *layout=(QGridLayout*) opaque;
+ ADM_Qfilesel *fs;
+  if(_write)
+      fs=new ADM_Qfilesel((QWidget *)dialog,paramTitle, *(const char**)param, layout, line,ADM_FILEMODE_WRITE, defaultSuffix, tip);
+  else
+      fs=new ADM_Qfilesel((QWidget *)dialog,paramTitle, *(const char**)param, layout, line,ADM_FILEMODE_READ, 0, tip);
+  myWidget=(void *)fs; 
+}
+
+void diaElemFile::getMe(void)
+{
+  char **n=(char **)param;
+  if(*n) ADM_dealloc(*n);
+  
+  ADM_Qfilesel *fs=(ADM_Qfilesel *)myWidget;
+  QString s=(fs-&gt;edit)-&gt;text();
+  *n=ADM_strdup(s.toUtf8().constData());
+}
+
+void diaElemFile::enable(uint32_t onoff)
+{
+  ADM_Qfilesel *fs=(ADM_Qfilesel *)myWidget;
+  fs-&gt;setEnabled(onoff);
+}
+void diaElemFile::changeFile(void) {}
+//****************************
+diaElemDirSelect::diaElemDirSelect(char **filename,const char *toggleTitle,const char *selectDirDesc) :
+	diaElemDirSelectBase()
+{
+  param=(void *)filename;
+  paramTitle=shortkey(toggleTitle);
+
+  if (!selectDirDesc || strlen(selectDirDesc) == 0)
+	  tip = toggleTitle;
+  else
+      tip = selectDirDesc;
+}
+
+diaElemDirSelect::~diaElemDirSelect() 
+{
+if(paramTitle)
+    delete paramTitle;
+}
+
+void diaElemDirSelect::setMe(void *dialog, void *opaque,uint32_t line)
+{
+ QGridLayout *layout=(QGridLayout*) opaque;
+  
+  ADM_Qfilesel *fs=new ADM_Qfilesel((QWidget *)dialog, paramTitle, *(char **)param, layout, line, ADM_FILEMODE_DIR, 0, tip);
+  myWidget=(void *)fs; 
+}
+
+void diaElemDirSelect::getMe(void) 
+{
+ char **n=(char **)param;
+  if(*n) ADM_dealloc(*n);
+  *n=NULL;
+  ADM_Qfilesel *fs=(ADM_Qfilesel *)myWidget;
+  QString s=(fs-&gt;edit)-&gt;text();
+  *n=ADM_strdup(s.toUtf8().constData());
+}
+
+void diaElemDirSelect::enable(uint32_t onoff) {}
+  
+void diaElemDirSelect::changeFile(void) {}
+} // End of namespace
+//****************************Hoook*****************
+
+diaElem  *qt4CreateFile(uint32_t writeMode,char **filename,const char *toggleTitle,
+        const char *defaultSuffix ,const char *tip)
+{
+	return new  ADM_Qt4Factory::diaElemFile(writeMode,filename,toggleTitle,defaultSuffix ,tip);
+}
+void qt4DestroyFile(diaElem *e)
+{
+	ADM_Qt4Factory::diaElemFile *a=(ADM_Qt4Factory::diaElemFile *)e;
+	delete a;
+}
+
+diaElem  *qt4CreateDir(char **filename,const char *toggleTitle,const char *tip)
+{
+	return new  ADM_Qt4Factory::diaElemDirSelect(filename,toggleTitle,tip);
+}
+void qt4DestroyDir(diaElem *e)
+{
+	ADM_Qt4Factory::diaElemDirSelect *a=(ADM_Qt4Factory::diaElemDirSelect *)e;
+	delete a;
+}
+//EOF
+
+//EOF

Copied: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_filesel.h (from rev 4061, branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_filesel.h)
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_filesel.h	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_filesel.h	2008-05-24 19:16:19 UTC (rev 4062)
@@ -0,0 +1,39 @@
+#ifndef T_filesel_h
+#define T_filesel_h
+
+#include &lt;QtGui/QAbstractButton&gt;
+#include &lt;QtGui/QDialogButtonBox&gt;
+#include &lt;QtGui/QGridLayout&gt;
+#include &lt;QtGui/QLabel&gt;
+#include &lt;QtGui/QLineEdit&gt;
+#include &lt;QtGui/QWidget&gt;
+
+namespace ADM_Qt4Factory
+{
+	typedef enum 
+	{
+		ADM_FILEMODE_DIR,
+		ADM_FILEMODE_READ,
+		ADM_FILEMODE_WRITE
+	} ADM_fileMode;
+
+	class ADM_Qfilesel : public QWidget
+	{
+		Q_OBJECT
+
+	public slots:
+		void buttonPressed(QAbstractButton *s);
+
+	public:
+		QLineEdit *edit;
+		QDialogButtonBox *button;
+		QLabel *text;
+		ADM_fileMode fileMode;
+		const char *defaultSuffix;
+		const char *selectDesc;
+
+		ADM_Qfilesel(QWidget *z, const char *title, const char *entry, QGridLayout *layout, int line, ADM_fileMode mode, const char * defaultSuffix, const char* selectDesc);
+		~ADM_Qfilesel();
+	};
+}
+#endif	// T_filesel_h

Copied: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_flyDialogQt4.cpp (from rev 4061, branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_flyDialog.cpp)
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_flyDialog.cpp	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_flyDialogQt4.cpp	2008-05-24 19:16:19 UTC (rev 4062)
@@ -0,0 +1,88 @@
+/***************************************************************************
+    copyright            : (C) 2006 by mean
+    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
+***************************************************************************/
+
+/***************************************************************************
+*                                                                         *
+*   This program is free software; you can redistribute it and/or modify  *
+*   it under the terms of the GNU General Public License as published by  *
+*   the Free Software Foundation; either version 2 of the License, or     *
+*   (at your option) any later version.                                   *
+*                                                                         *
+***************************************************************************///
+
+
+#include &lt;QtGui/QGraphicsView&gt;
+#include &lt;QtGui/QSlider&gt;
+
+#include &quot;ADM_default.h&quot;
+
+#include &quot;ADM_videoFilter.h&quot;
+#include &quot;DIA_flyDialog.h&quot;
+#include &quot;DIA_flyDialogQt4.h&quot;
+
+void ADM_flyDialogQt4::postInit(uint8_t reInit)
+{
+	QWidget *graphicsView = ((ADM_QCanvas*)_canvas)-&gt;parentWidget();
+	QSlider  *slider=(QSlider *)_slider;
+	
+	graphicsView-&gt;setMinimumSize(_w, _h);
+	graphicsView-&gt;resize(_w, _h);
+	uint32_t nbFrames=_in-&gt;getInfo()-&gt;nb_frames; 
+	slider-&gt;setMaximum(nbFrames);
+}
+
+float ADM_flyDialogQt4::calcZoomFactor(void) {return 1;}
+
+uint8_t  ADM_flyDialogQt4::display(void)
+{
+   ADM_QCanvas *view=(ADM_QCanvas *)_canvas;
+   ADM_assert(view);
+   view-&gt;dataBuffer=_rgbBufferOut;
+   if(!_rgbBufferOut)
+   {
+      printf(&quot;flyDialog: No rgbuffer ??\n&quot;); 
+   } 
+   view-&gt;repaint();
+  return 1; 
+}
+uint32_t ADM_flyDialogQt4::sliderGet(void)
+{
+  QSlider  *slide=(QSlider *)_slider;
+  ADM_assert(slide);
+  return slide-&gt;value();
+  
+}
+uint8_t     ADM_flyDialogQt4::sliderSet(uint32_t value)
+{
+  QSlider  *slide=(QSlider *)_slider;
+  ADM_assert(slide);
+  slide-&gt;setValue(value);
+  return 1; 
+}
+uint8_t  ADM_flyDialogQt4::isRgbInverted(void)
+{
+  return 1; 
+}
+uint8_t ADM_flyDialogQt4::cleanup2(void)
+{
+  return 1; 
+}
+/** WTF are these ???? */
+  void    ADM_flyDialogQt4::setupMenus (const void * params,
+                       const MenuMapping * menu_mapping,
+                      uint32_t menu_mapping_count) 
+  {ADM_assert(0);return ;};
+  void  ADM_flyDialogQt4::getMenuValues ( void * mm,
+                  const MenuMapping * menu_mapping,
+                  uint32_t menu_mapping_count)
+  {ADM_assert(0);return;};
+  uint32_t  ADM_flyDialogQt4::getMenuValue (const MenuMapping * mm)  
+  {ADM_assert(0);return 0;};                    
+   const MenuMapping *ADM_flyDialogQt4::lookupMenu (const char * widgetName,
+                                             const MenuMapping * menu_mapping,
+                                             uint32_t menu_mapping_count)  
+  {ADM_assert(0);return NULL;};
+
+//EOF

Copied: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_menu.cpp (from rev 4061, branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_menu.cpp)
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_menu.cpp	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_menu.cpp	2008-05-24 19:16:19 UTC (rev 4062)
@@ -0,0 +1,264 @@
+/***************************************************************************
+  FAC_toggle.cpp
+  Handle dialog factory element : Toggle
+  (C) 2006 Mean <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">Fixounet at free.fr</A> 
+***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#include &quot;T_menu.h&quot;
+#include &quot;ADM_default.h&quot;
+
+#include &lt;QtGui/QGridLayout&gt;
+#include &lt;QtGui/QLabel&gt;
+
+extern const char *shortkey(const char *);
+
+namespace ADM_qt4Factory
+{
+class diaElemMenu : public diaElemMenuBase
+{
+protected:
+	diaElemMenuDynamic  *dyna;
+	diaMenuEntryDynamic  **menus;	
+
+public:
+  diaElemMenu(uint32_t *intValue,const char *itle, uint32_t nb, 
+               const diaMenuEntry *menu,const char *tip=NULL);
+  
+  virtual ~diaElemMenu() ;
+  void setMe(void *dialog, void *opaque,uint32_t line);
+  void getMe(void);
+  virtual uint8_t   link(diaMenuEntry *entry,uint32_t onoff,diaElem *w);
+  virtual void      updateMe(void);
+  void      enable(uint32_t onoff) ;
+  void      finalize(void);;
+};
+
+/**/
+
+ADM_QComboBox::ADM_QComboBox(QWidget *root,diaElemMenuDynamic *menu) : QComboBox(root)
+{
+	_menu=menu;
+}
+
+void ADM_QComboBox::changed(int i)
+{
+	_menu-&gt;updateMe();
+}
+
+void ADM_QComboBox::connectMe(void)
+{
+	QObject::connect(this, SIGNAL(currentIndexChanged(int)), this, SLOT(changed(int )));
+}
+
+diaElemMenu::diaElemMenu(uint32_t *intValue,const char *itle, uint32_t nb, 
+               const diaMenuEntry *menu,const char *tip)
+  : diaElemMenuBase()
+{
+  param=(void *)intValue;
+  paramTitle=itle;
+  this-&gt;tip=tip;
+  this-&gt;menu=menu;
+  this-&gt;nbMenu=nb;
+  nbLink=0;
+  
+  menus=new diaMenuEntryDynamic * [nb];
+  for(int i=0;i&lt;nb;i++)
+  {
+    menus[i]=new  diaMenuEntryDynamic(menu[i].val,menu[i].text,menu[i].desc);
+  }
+  dyna=new diaElemMenuDynamic(intValue,itle,nb,menus,tip);
+}
+
+diaElemMenu::~diaElemMenu()
+{
+  for(int i=0;i&lt;nbMenu;i++)
+      delete menus[i];
+  delete [] menus;
+  delete dyna;
+  
+}
+void diaElemMenu::setMe(void *dialog, void *opaque,uint32_t line)
+{
+  dyna-&gt;setMe(dialog,opaque,line);
+}
+
+void diaElemMenu::getMe(void)
+{
+ dyna-&gt;getMe();
+}
+void   diaElemMenu::updateMe(void)
+{
+  dyna-&gt;updateMe();
+}
+uint8_t   diaElemMenu::link(diaMenuEntry *entry,uint32_t onoff,diaElem *w)
+{
+    for(int i=0;i&lt;nbMenu;i++)
+    {
+        if(entry-&gt;val==menus[i]-&gt;val)
+            return dyna-&gt;link(menus[i],onoff,w);
+    }
+    ADM_assert(0);
+}
+void   diaElemMenu::enable(uint32_t onoff)
+{
+  
+    dyna-&gt;enable(onoff);
+}
+void   diaElemMenu::finalize(void)
+{
+  dyna-&gt;finalize();
+}
+//*********************************
+//* DYNAMIC                       *
+//*********************************
+
+diaElemMenuDynamic::diaElemMenuDynamic(uint32_t *intValue,const char *itle, uint32_t nb, 
+                diaMenuEntryDynamic **menu,const char *tip)
+  : diaElemMenuDynamicBase()
+{
+  param=(void *)intValue;
+  paramTitle=shortkey(itle);
+  this-&gt;tip=tip;
+  this-&gt;menu=menu;
+  this-&gt;nbMenu=nb;
+  nbLink=0;
+}
+
+diaElemMenuDynamic::~diaElemMenuDynamic()
+{
+  if(paramTitle)
+    delete paramTitle;
+}
+void diaElemMenuDynamic::setMe(void *dialog, void *opaque,uint32_t line)
+{
+  ADM_QComboBox *combo=new ADM_QComboBox( (QWidget *)dialog,this);
+  QGridLayout *layout=(QGridLayout*) opaque;
+     myWidget=(void *)combo; 
+
+	 QLabel *text=new QLabel( QString::fromUtf8(this-&gt;paramTitle),(QWidget *)dialog);
+  
+  // Fill in combobox
+  int mem=0;
+  diaMenuEntryDynamic **entries=menu;
+  for(int i=0;i&lt;nbMenu;i++)
+  {
+    combo-&gt;addItem(QString::fromUtf8(entries[i]-&gt;text));
+    if( *(uint32_t *)param==entries[i]-&gt;val) mem=i;
+  }
+   combo-&gt;setCurrentIndex(mem);
+   text-&gt;setBuddy(combo);
+   layout-&gt;addWidget(text,line,0);
+   layout-&gt;addWidget(combo,line,1);
+   
+   combo-&gt;connectMe();
+}
+
+void diaElemMenuDynamic::getMe(void)
+{
+  ADM_QComboBox *combo=(ADM_QComboBox *)myWidget;
+  int r;
+  r=combo-&gt;currentIndex();
+  if(!nbMenu) return;
+  ADM_assert(r&lt;nbMenu);
+  *(uint32_t *)param=menu[r]-&gt;val;
+      
+}
+void diaElemMenuDynamic::finalize(void)
+{ 
+   ADM_QComboBox *combo=(ADM_QComboBox *)myWidget;
+  uint32_t val;
+  uint32_t rank;
+  if(!nbMenu) return;
+  ADM_assert(combo);
+  
+  
+  rank=combo-&gt;currentIndex();
+  ADM_assert(rank&lt;this-&gt;nbMenu);
+  val=this-&gt;menu[rank]-&gt;val;
+  /* Now search through the linked list to see if something happens ...*/
+ 
+   /* 1 disable everything */
+  for(int i=0;i&lt;nbLink;i++)
+  {
+    dialElemLink *l=&amp;(links[i]);
+    if(l-&gt;value==val)
+    {
+      if(!l-&gt;onoff)  l-&gt;widget-&gt;enable(FALSE);
+    }else
+    {
+       if(l-&gt;onoff)  l-&gt;widget-&gt;enable(FALSE);
+    }
+    
+  }
+  /* Then enable */
+  for(int i=0;i&lt;nbLink;i++)
+  {
+    dialElemLink *l=&amp;(links[i]);
+    if(l-&gt;value==val)
+    {
+      if(l-&gt;onoff)  l-&gt;widget-&gt;enable(TRUE);
+    }else
+    {
+       if(!l-&gt;onoff)  l-&gt;widget-&gt;enable(TRUE);
+    }
+    
+  }
+}
+void diaElemMenuDynamic::enable(uint32_t onoff)
+{ 
+   ADM_QComboBox *combo=(ADM_QComboBox *)myWidget;
+  ADM_assert(combo);
+  if(onoff)
+    combo-&gt;setEnabled(true);
+  else
+    combo-&gt;setDisabled(true);
+}
+
+uint8_t   diaElemMenuDynamic::link(diaMenuEntryDynamic *entry,uint32_t onoff,diaElem *w)
+{
+    ADM_assert(nbLink&lt;MENU_MAX_lINK);
+    links[nbLink].value=entry-&gt;val;
+    links[nbLink].onoff=onoff;
+    links[nbLink].widget=w;
+    nbLink++;
+    return 1;
+}
+void   diaElemMenuDynamic::updateMe(void)
+{
+  finalize();
+}
+//********************
+}; // End of namespace
+
+diaElem  *qt4CreateMenu(uint32_t *intValue,const char *itle, uint32_t nb,         const diaMenuEntry *menu,const char *tip)
+{
+	return new  ADM_qt4Factory::diaElemMenu(intValue,itle,nb,menu,tip);
+}
+void qt4DestroyMenu(diaElem *e)
+{
+	ADM_qt4Factory::diaElemMenu *a=(ADM_qt4Factory::diaElemMenu *)e;
+	delete a;
+}
+diaElem  *qt4CreateMenuDynamic(uint32_t *intValue,const char *itle, uint32_t nb, 
+        diaMenuEntryDynamic **menu,const char *tipp)
+{
+	return new  ADM_qt4Factory::diaElemMenuDynamic(intValue,itle,nb,menu,tipp);
+}
+void qt4DestroyMenuDynamic(diaElem *e)
+{
+	ADM_qt4Factory::diaElemMenuDynamic *a=(ADM_qt4Factory::diaElemMenuDynamic *)e;
+	delete a;
+}
+
+//EOF
+
+//EOF

Copied: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_menu.h (from rev 4061, branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_menu.h)
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_menu.h	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_menu.h	2008-05-24 19:16:19 UTC (rev 4062)
@@ -0,0 +1,40 @@
+#ifndef T_menu_h
+#define T_menu_h
+
+#include &lt;QtGui/QComboBox&gt;
+
+#include &quot;ADM_inttype.h&quot;
+#include &quot;DIA_factory.h&quot;
+
+namespace ADM_qt4Factory
+{
+	class diaElemMenuDynamic : public diaElemMenuDynamicBase
+	{
+	public:
+		diaElemMenuDynamic(uint32_t *intValue, const char *itle, uint32_t nb, diaMenuEntryDynamic **menu, const char *tip = NULL);
+
+		virtual   ~diaElemMenuDynamic() ;
+		void      setMe(void *dialog, void *opaque,uint32_t line);
+		void      getMe(void);
+		virtual uint8_t   link(diaMenuEntryDynamic *entry,uint32_t onoff,diaElem *w);
+		virtual void      updateMe(void);
+		virtual void      enable(uint32_t onoff) ;
+		virtual void      finalize(void);
+	};
+
+	class ADM_QComboBox : public QComboBox
+	{
+		Q_OBJECT
+
+	public slots:
+		void changed(int i);
+
+	protected:
+		diaElemMenuDynamic *_menu;
+
+	public:
+		ADM_QComboBox(QWidget *root,diaElemMenuDynamic *menu);
+		void connectMe(void);
+	};
+}
+#endif	// T_menu_h

Copied: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_slider.cpp (from rev 4061, branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_slider.cpp)
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_slider.cpp	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_slider.cpp	2008-05-24 19:16:19 UTC (rev 4062)
@@ -0,0 +1,232 @@
+/***************************************************************************
+  FAC_integer.cpp
+  Handle dialog factory element : Integer
+  (C) 2006 Mean <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">Fixounet at free.fr</A> 
+***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#include &quot;T_slider.h&quot;
+#include &quot;ADM_default.h&quot;
+#include &quot;DIA_factory.h&quot;
+
+#include &lt;QtGui/QGridLayout&gt;
+#include &lt;QtGui/QHBoxLayout&gt;
+#include &lt;QtGui/QLabel&gt;
+
+extern const char *shortkey(const char *);
+
+namespace ADM_qt4Factory
+{
+class diaElemUSlider : public diaElemSliderBase
+{
+  protected:
+	  uint32_t min,max,incr;
+public:
+	diaElemUSlider(uint32_t *value,const char *toggleTitle, uint32_t min,uint32_t max,uint32_t incr = 1, const char *tip=NULL);
+  virtual   ~diaElemUSlider() ;
+  void      setMe(void *dialog, void *opaque,uint32_t line);
+  void      getMe(void);
+  void      enable(uint32_t onoff) ;
+  
+};
+class diaElemSlider : public diaElemSliderBase
+{
+  protected:
+    
+	  int32_t min,max,incr;
+    
+public:
+	diaElemSlider(int32_t *value,const char *toggleTitle, int32_t min,int32_t max,int32_t incr = 1, const char *tip=NULL);
+  virtual   ~diaElemSlider() ;
+  void      setMe(void *dialog, void *opaque,uint32_t line);
+  void      getMe(void);
+  void      enable(uint32_t onoff) ;
+  
+  
+};
+
+int SpinSlider::value()
+{
+	return spinner-&gt;value();
+}
+
+SpinSlider::SpinSlider (QWidget * parent)
+    : QWidget (parent)
+{
+    slider = new QSlider (Qt::Horizontal);
+    spinner = new QSpinBox;
+
+    QWidget::connect (slider, SIGNAL(valueChanged(int)), spinner, SLOT(setValue(int)));
+    QWidget::connect (spinner, SIGNAL(valueChanged(int)), slider, SLOT(setValue(int)));
+    QWidget::connect (spinner, SIGNAL(valueChanged(int)), this, SIGNAL(valueChanged(int)));
+
+    QHBoxLayout * hbox = new QHBoxLayout;
+    hbox-&gt;addWidget (slider);
+    hbox-&gt;addWidget (spinner);
+
+    setLayout (hbox);
+}
+
+void SpinSlider::setValue (int value)
+{
+    spinner-&gt;setValue (value);
+}
+
+void SpinSlider::setMinimum (int value)
+{
+    spinner-&gt;setMinimum (value);
+    slider-&gt;setMinimum (value);
+}
+
+void SpinSlider::setMaximum (int value)
+{
+    spinner-&gt;setMaximum (value);
+    slider-&gt;setMaximum (value);
+}
+
+//----------------------------------------------------------------------
+
+diaElemUSlider::diaElemUSlider(uint32_t *value,const char *toggleTitle, uint32_t min,uint32_t max,uint32_t incr,const char *tip)
+  : diaElemSliderBase()
+{
+  param=(void *)value;
+  paramTitle=shortkey(toggleTitle);
+  this-&gt;min=min;
+  this-&gt;max=max;
+  this-&gt;incr=incr;
+  this-&gt;tip=tip;
+  size = 2;
+}
+
+diaElemUSlider::~diaElemUSlider()
+{ 
+  if(paramTitle)
+    delete paramTitle;
+}
+
+void diaElemUSlider::setMe(void *dialog, void *opaque,uint32_t line)
+{
+  SpinSlider *slider = new SpinSlider ((QWidget *)dialog);
+  slider-&gt;setMinimum(min);
+  slider-&gt;setMaximum(max);
+  slider-&gt;setValue(*(uint32_t *)param);
+  slider-&gt;show();
+ 
+  myWidget = (void *)slider;
+
+  QLabel *text = new QLabel (QString::fromUtf8(paramTitle), (QWidget *)dialog);
+  text-&gt;setBuddy (slider);
+
+  QGridLayout *layout = (QGridLayout*) opaque;
+  layout-&gt;addWidget(text,line,0,1,2);
+  layout-&gt;addWidget(slider,line + 1,0,1,2);
+}
+
+void diaElemUSlider::getMe(void)
+{
+  SpinSlider *box=(SpinSlider *)myWidget;
+  uint32_t val=box-&gt;value();
+  if(val&lt;min) val=min;
+  if(val&gt;max) val=max;
+  *(uint32_t *)param=val;
+}
+
+void diaElemUSlider::enable(uint32_t onoff) 
+{
+  SpinSlider *box=(SpinSlider *)myWidget;
+  ADM_assert(box);
+  if(onoff)
+    box-&gt;setEnabled(1);
+  else
+    box-&gt;setDisabled(1);
+}
+
+diaElemSlider::diaElemSlider(int32_t *value,const char *toggleTitle, int32_t min,int32_t max,int32_t incr,const char *tip)
+  : diaElemSliderBase()
+{
+  param=(void *)value;
+  paramTitle=shortkey(toggleTitle);
+  this-&gt;min=min;
+  this-&gt;max=max;
+  this-&gt;incr=incr;
+  this-&gt;tip=tip;
+  size = 2;
+}
+
+diaElemSlider::~diaElemSlider()
+{ 
+  if(paramTitle)
+    delete paramTitle;
+}
+
+void diaElemSlider::setMe(void *dialog, void *opaque,uint32_t line)
+{
+  SpinSlider *slider = new SpinSlider ((QWidget *)dialog);
+  slider-&gt;setMinimum(min);
+  slider-&gt;setMaximum(max);
+  slider-&gt;setValue(*(int32_t *)param);
+  slider-&gt;show();
+ 
+  myWidget = (void *)slider;
+
+  QLabel *text = new QLabel (QString::fromUtf8(paramTitle), (QWidget *)dialog);
+  text-&gt;setBuddy (slider);
+
+  QGridLayout *layout = (QGridLayout*) opaque;
+  layout-&gt;addWidget(text,line,0,1,2);
+  layout-&gt;addWidget(slider,line + 1,0,1,2);
+}
+
+void diaElemSlider::getMe(void)
+{
+  SpinSlider *box=(SpinSlider *)myWidget;
+  int32_t val=box-&gt;value();
+  if(val&lt;min) val=min;
+  if(val&gt;max) val=max;
+  *(int32_t *)param=val;
+}
+
+void diaElemSlider::enable(uint32_t onoff) 
+{
+  SpinSlider *box=(SpinSlider *)myWidget;
+  ADM_assert(box);
+  if(onoff)
+    box-&gt;setEnabled(1);
+  else
+    box-&gt;setDisabled(1);
+}
+
+//****************************************************
+} // End of namespace
+//****************************Hoook*****************
+
+diaElem  *qt4CreateSlider(int32_t *value,const char *toggleTitle, int32_t min,int32_t max,int32_t incr , const char *tip)
+{
+	return new  ADM_qt4Factory::diaElemSlider(value,toggleTitle,min,max,incr,tip);
+}
+void qt4DestroySlider(diaElem *e)
+{
+	ADM_qt4Factory::diaElemSlider *a=(ADM_qt4Factory::diaElemSlider *)e;
+	delete a;
+}
+diaElem  *qt4CreateUSlider(uint32_t *value,const char *toggleTitle, uint32_t min,uint32_t max,uint32_t incr , const char *tip)
+{
+	return new  ADM_qt4Factory::diaElemUSlider(value,toggleTitle,min,max,incr,tip);
+}
+void qt4DestroyUSlider(diaElem *e)
+{
+	ADM_qt4Factory::diaElemUSlider *a=(ADM_qt4Factory::diaElemUSlider *)e;
+	delete a;
+}
+//****************************************************
+//EOF
+
+

Copied: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_slider.h (from rev 4061, branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_slider.h)
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_slider.h	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_slider.h	2008-05-24 19:16:19 UTC (rev 4062)
@@ -0,0 +1,31 @@
+#ifndef T_slider_h
+#define T_slider_h
+
+#include &lt;QtGui/QSlider&gt;
+#include &lt;QtGui/QSpinBox&gt;
+#include &lt;QtGui/QWidget&gt;
+
+namespace ADM_qt4Factory
+{
+	class SpinSlider : public QWidget
+	{
+		Q_OBJECT
+
+	public:
+		SpinSlider (QWidget *parent = 0);
+		int value();
+
+	signals:
+		void valueChanged (int value);
+
+	public slots:
+		void setValue (int value);
+		void setMinimum (int value);
+		void setMaximum (int value);
+
+	private:
+		QSlider * slider;
+		QSpinBox * spinner;
+	};
+}
+#endif	// T_slider_h

Copied: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_threadCount.cpp (from rev 4061, branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_threadCount.cpp)
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_threadCount.cpp	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_threadCount.cpp	2008-05-24 19:16:19 UTC (rev 4062)
@@ -0,0 +1,145 @@
+/***************************************************************************
+FAC_toggle.cpp
+Handle dialog factory element : Thread Count
+(C) 2007 Gruntster 
+***************************************************************************/
+
+/***************************************************************************
+*                                                                         *
+*   This program is free software; you can redistribute it and/or modify  *
+*   it under the terms of the GNU General Public License as published by  *
+*   the Free Software Foundation; either version 2 of the License, or     *
+*   (at your option) any later version.                                   *
+*                                                                         *
+***************************************************************************/
+
+#include &quot;T_threadCount.h&quot;
+#include &quot;ADM_default.h&quot;
+#include &quot;DIA_factory.h&quot;
+
+extern const char* shortkey(const char*);
+
+namespace ADM_qt4Factory
+{
+
+class diaElemThreadCount : public diaElem
+{
+
+public:
+  
+  diaElemThreadCount(uint32_t *value, const char *title, const char *tip = NULL);
+  virtual ~diaElemThreadCount() ;
+  void setMe(void *dialog, void *opaque, uint32_t line);
+  void getMe(void);
+};
+
+void ADM_QthreadCount::radioGroupChanged(QAbstractButton *s)
+{
+	spinBox-&gt;setEnabled(radiobutton3-&gt;isChecked());
+}
+
+ADM_QthreadCount::ADM_QthreadCount(QWidget *widget, const char *title, uint32_t value, QGridLayout *layout, int line) : QWidget(widget) 
+{
+	radiobutton1 = new QRadioButton(QString::fromUtf8(QT_TR_NOOP(&quot;Disabled&quot;)), widget);
+	radiobutton2 = new QRadioButton(QString::fromUtf8(QT_TR_NOOP(&quot;Auto-detect&quot;)), widget);
+	radiobutton3 = new QRadioButton(QString::fromUtf8(QT_TR_NOOP(&quot;Custom&quot;)), widget);
+
+	buttonGroup = new QButtonGroup;
+	buttonGroup-&gt;addButton(radiobutton1);
+	buttonGroup-&gt;addButton(radiobutton2);
+	buttonGroup-&gt;addButton(radiobutton3);
+
+	spinBox = new QSpinBox();
+	spinBox-&gt;setRange(2, 32);
+
+	text = new QLabel(QString::fromUtf8(title), widget);
+	text-&gt;setBuddy(radiobutton1);
+
+	layout-&gt;addWidget(text, line, 0);
+	layout-&gt;addWidget(radiobutton1, line, 1);
+	layout-&gt;addWidget(radiobutton2, line, 2);
+	layout-&gt;addWidget(radiobutton3, line, 3);
+	layout-&gt;addWidget(spinBox, line, 4);
+
+	QObject::connect(buttonGroup, SIGNAL(buttonClicked(QAbstractButton*)), this, SLOT(radioGroupChanged(QAbstractButton*)));
+
+	spinBox-&gt;setEnabled(value &gt; 1);
+
+	if (value == 0)
+		radiobutton2-&gt;setChecked(true);
+	else if (value == 1)
+		radiobutton1-&gt;setChecked(true);
+	else
+	{
+		radiobutton3-&gt;setChecked(true);
+		spinBox-&gt;setValue(value);
+	}
+}
+
+ADM_QthreadCount::~ADM_QthreadCount() 
+{
+	if (buttonGroup)
+		delete buttonGroup;
+
+	if (radiobutton1)
+		delete radiobutton1;
+
+	if (radiobutton2)
+		delete radiobutton2;
+
+	if (radiobutton3)
+		delete radiobutton3;
+
+	if (spinBox)
+		delete spinBox;
+
+	if (text)
+		delete text;
+}
+
+diaElemThreadCount::diaElemThreadCount(uint32_t *value, const char *title, const char *tip) : diaElem(ELEM_THREAD_COUNT)
+{
+	param = (void*)value;
+	paramTitle = shortkey(title);
+	this-&gt;tip = tip;
+}
+
+diaElemThreadCount::~diaElemThreadCount()
+{
+	delete paramTitle;
+}
+
+void diaElemThreadCount::setMe(void *dialog, void *opaque, uint32_t line)
+{
+	QGridLayout *layout = (QGridLayout*)opaque;
+
+	ADM_QthreadCount *threadCount = new ADM_QthreadCount((QWidget*)dialog, paramTitle, *(uint32_t *)param, layout, line);
+
+	myWidget = (void*)threadCount;
+}
+
+void diaElemThreadCount::getMe(void)
+{
+	ADM_QthreadCount *threadCount = (ADM_QthreadCount*)myWidget;
+	uint32_t *val = (uint32_t*)param;
+
+	if ((threadCount-&gt;radiobutton1)-&gt;isChecked())
+		*val = 1;
+	else if ((threadCount-&gt;radiobutton2)-&gt;isChecked())
+		*val = 0;
+	else
+		*val = (threadCount-&gt;spinBox)-&gt;value();
+}
+//**********************
+} // End of namesapce
+//**********************
+diaElem  *qt4CreateThreadCount(uint32_t *value, const char *title, const char *tip)
+{
+	return new  ADM_qt4Factory::diaElemThreadCount(value,title,tip);
+}
+void qt4DestroyThreadCount(diaElem *e)
+{
+	ADM_qt4Factory::diaElemThreadCount *a=(ADM_qt4Factory::diaElemThreadCount *)e;
+	delete a;
+}
+//EOF

Copied: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_threadCount.h (from rev 4061, branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_threadCount.h)
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_threadCount.h	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_threadCount.h	2008-05-24 19:16:19 UTC (rev 4062)
@@ -0,0 +1,32 @@
+#ifndef T_threadCount_h
+#define T_threadCount_h
+
+#include &lt;QtGui/QButtonGroup&gt;
+#include &lt;QtGui/QGridLayout&gt;
+#include &lt;QtGui/QLabel&gt;
+#include &lt;QtGui/QRadioButton&gt;
+#include &lt;QtGui/QSpinBox&gt;
+#include &lt;QtGui/QWidget&gt;
+
+namespace ADM_qt4Factory
+{
+	class ADM_QthreadCount : public QWidget
+	{
+		Q_OBJECT
+
+	public slots:
+		void radioGroupChanged(QAbstractButton *s);
+
+	public:
+		QLabel *text;
+		QRadioButton *radiobutton1;
+		QRadioButton *radiobutton2;
+		QRadioButton *radiobutton3;
+		QButtonGroup *buttonGroup;
+		QSpinBox *spinBox;
+
+		ADM_QthreadCount(QWidget *widget, const char *title, uint32_t value, QGridLayout *layout, int line);
+		~ADM_QthreadCount();
+	};
+}
+#endif	// T_threadCount_h

Copied: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_toggle.cpp (from rev 4061, branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_toggle.cpp)
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_toggle.cpp	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_toggle.cpp	2008-05-24 19:16:19 UTC (rev 4062)
@@ -0,0 +1,429 @@
+/***************************************************************************
+  FAC_toggle.cpp
+  Handle dialog factory element : Toggle
+  (C) 2006 Mean <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">Fixounet at free.fr</A> 
+***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#include &lt;QtGui/QGridLayout&gt;
+#include &lt;QtGui/QSpinBox&gt;
+
+#include &quot;T_toggle.h&quot;
+#include &quot;ADM_default.h&quot;
+#include &quot;DIA_factory.h&quot;
+
+extern const char *shortkey(const char *);
+
+namespace ADM_qt4Factory
+{
+class diaElemToggle : public diaElemToggleBase
+{
+  protected:
+public:
+            diaElemToggle(uint32_t *toggleValue,const char *toggleTitle, const char *tip=NULL);
+  virtual   ~diaElemToggle() ;
+  void      setMe(void *dialog, void *opaque,uint32_t line);
+  void      getMe(void);
+  void      enable(uint32_t onoff) ;
+  void      finalize(void);
+  void      updateMe();
+  uint8_t   link(uint32_t onoff,diaElem *w);
+};
+
+class diaElemToggleUint : public diaElem
+{
+  protected:
+        uint32_t *emb;
+        const char *embName;
+        void *widgetUint;
+        uint32_t _min,_max;
+public:
+            diaElemToggleUint(uint32_t *toggleValue,const char *toggleTitle, uint32_t *uintval,
+            					const char *name,uint32_t min,uint32_t max,const char *tip=NULL);
+  virtual   ~diaElemToggleUint() ;
+  void      setMe(void *dialog, void *opaque,uint32_t line);
+  void      getMe(void);
+  void      enable(uint32_t onoff) ;
+  void      finalize(void);
+  void      updateMe();
+};
+class diaElemToggleInt : public diaElem
+{
+  protected:
+	  		 int32_t *emb;
+	         const char *embName;
+	         void *widgetUint;
+	         int32_t _min,_max;
+public:
+            diaElemToggleInt(uint32_t *toggleValue,const char *toggleTitle, int32_t *uintval,
+            				const char *name,int32_t min,int32_t max,const char *tip=NULL);
+  virtual   ~diaElemToggleInt() ;
+  void      setMe(void *dialog, void *opaque,uint32_t line);
+  void      getMe(void);
+  void      finalize(void);
+  void      updateMe();
+  void      enable(uint32_t onoff) ;
+};
+
+void ADM_QCheckBox::changed(int i)
+{
+	switch(_type)
+	{
+		case TT_TOGGLE:
+			((diaElemToggle *)_toggle)-&gt;updateMe();break;
+		case TT_TOGGLE_UINT:
+			((diaElemToggleUint *)_toggle)-&gt;updateMe();break;
+		case TT_TOGGLE_INT:
+			((diaElemToggleInt *)_toggle)-&gt;updateMe();break;
+		default:
+			ADM_assert(0);
+	}
+}
+
+ADM_QCheckBox::ADM_QCheckBox(const QString &amp; str,QWidget *root,void *toggle,TOG_TYPE type) : QCheckBox(str,root)
+{
+	_toggle=toggle;
+	_type=type;
+}
+
+void ADM_QCheckBox::connectMe(void)
+{
+	QObject::connect(this, SIGNAL(stateChanged(int)), this, SLOT(changed(int )));
+}
+
+diaElemToggle::diaElemToggle(uint32_t *toggleValue,const char *toggleTitle, const char *tip)
+  : diaElemToggleBase()
+{
+  param=(void *)toggleValue;
+  paramTitle=shortkey(toggleTitle);
+  this-&gt;tip=tip;
+  myWidget=NULL;
+  nbLink=0;
+}
+
+diaElemToggle::~diaElemToggle()
+{
+  ADM_QCheckBox *box=(ADM_QCheckBox *)myWidget;
+ // if(box) delete box;
+  myWidget=NULL;
+  if(paramTitle)
+    delete paramTitle;
+}
+void diaElemToggle::setMe(void *dialog, void *opaque,uint32_t l)
+{
+ ADM_QCheckBox *box=new ADM_QCheckBox(QString::fromUtf8(paramTitle),(QWidget *)dialog,this,TT_TOGGLE);
+ QGridLayout *layout=(QGridLayout*) opaque;
+ myWidget=(void *)box; 
+ if( *(uint32_t *)param)
+ {
+    box-&gt;setCheckState(Qt::Checked); 
+ }
+ box-&gt;show();
+ layout-&gt;addWidget(box,l,0);
+ box-&gt;connectMe();
+}
+void diaElemToggle::getMe(void)
+{
+  ADM_QCheckBox *box=(ADM_QCheckBox *)myWidget;
+  uint32_t *val=(uint32_t *)param;
+  if(Qt::Checked==box-&gt;checkState())
+  {
+    *val=1; 
+  }else
+    *val=0;
+}
+void diaElemToggle::enable(uint32_t onoff) 
+{
+  ADM_QCheckBox *box=(ADM_QCheckBox *)myWidget;
+  ADM_assert(box);
+  if(onoff)
+    box-&gt;setEnabled(TRUE);
+  else
+    box-&gt;setDisabled(TRUE);
+}
+
+void   diaElemToggle::finalize(void)
+{
+  updateMe(); 
+}
+void   diaElemToggle::updateMe(void)
+{
+ 
+  uint32_t val;
+  uint32_t rank=0;
+  if(!nbLink) return;
+  ADM_assert(myWidget);
+  
+  ADM_QCheckBox *box=(ADM_QCheckBox *)myWidget;
+  
+  if(Qt::Checked==box-&gt;checkState())
+  {
+    rank=1;
+  }
+  /* Now search through the linked list to see if something happens ...*/
+  
+   /* 1 disable everything */
+  for(int i=0;i&lt;nbLink;i++)
+  {
+    dialElemLink *l=&amp;(links[i]);
+    l-&gt;widget-&gt;enable(0);
+  }
+  /* Then enable */
+  for(int i=0;i&lt;nbLink;i++)
+  {
+      dialElemLink *l=&amp;(links[i]);
+      if(l-&gt;onoff==rank)  l-&gt;widget-&gt;enable(1);
+  }
+}
+
+uint8_t   diaElemToggle::link(uint32_t onoff,diaElem *w)
+{
+    ADM_assert(nbLink&lt;MENU_MAX_lINK);
+    links[nbLink].onoff=onoff;
+    links[nbLink].widget=w;
+    nbLink++;
+    return 1;
+}
+//******************************************************
+// An UInt and a toggle linked...
+//******************************************************
+diaElemToggleUint::diaElemToggleUint(uint32_t *toggleValue,const char *toggleTitle, uint32_t *uintval, const char *name,uint32_t min,uint32_t max,const char *tip)
+  : diaElem(ELEM_TOGGLE_UINT)
+{
+  param=(void *)toggleValue;
+  paramTitle=shortkey(toggleTitle);
+  this-&gt;tip=tip;
+  embName=name;
+  emb=uintval;
+  widgetUint=NULL;
+  _min=min;
+  _max=max;
+}
+
+diaElemToggleUint::~diaElemToggleUint()
+{
+   if(paramTitle)
+    delete paramTitle;
+}
+void diaElemToggleUint::setMe(void *dialog, void *opaque,uint32_t line)
+{
+ ADM_QCheckBox *box=new ADM_QCheckBox(QString::fromUtf8(paramTitle),(QWidget *)dialog,this,TT_TOGGLE_UINT);
+ QGridLayout *layout=(QGridLayout*) opaque;
+ myWidget=(void *)box; 
+ if( *(uint32_t *)param)
+ {
+    box-&gt;setCheckState(Qt::Checked); 
+ }
+ box-&gt;show();
+ layout-&gt;addWidget(box,line,0);
+ // Now add spin
+ QSpinBox *spin=new QSpinBox((QWidget *)dialog);
+ widgetUint=(void *)spin; 
+   
+ spin-&gt;setMinimum(_min);
+ spin-&gt;setMaximum(_max);
+ spin-&gt;setValue(*(uint32_t *)emb);
+ spin-&gt;show();
+ layout-&gt;addWidget(spin,line,1);
+ box-&gt;connectMe();
+}
+
+void diaElemToggleUint::getMe(void)
+{
+  ADM_QCheckBox *box=(ADM_QCheckBox *)myWidget;
+  uint32_t *val=(uint32_t *)param;
+  if(Qt::Checked==box-&gt;checkState())
+  {
+    *val=1; 
+  }else
+    *val=0;
+  //
+    uint32_t u;
+  QSpinBox *spin=(QSpinBox *)widgetUint;
+  u=spin-&gt;value();
+ if(u&lt;_min) u=_min;
+ if(u&gt;_max) u=_max;
+ *emb=u;
+  
+}
+void   diaElemToggleUint::finalize(void)
+{
+  updateMe();
+}
+void   diaElemToggleUint::updateMe(void)
+{
+  uint32_t val;
+  uint32_t rank=FALSE;
+  ADM_assert(myWidget);
+  
+  ADM_QCheckBox *box=(ADM_QCheckBox *)myWidget;
+  QSpinBox *spin=(QSpinBox *)widgetUint;
+  
+  if(Qt::Checked==box-&gt;checkState())
+  {
+    rank=TRUE;
+  }
+  spin-&gt;setEnabled(rank);
+}
+void   diaElemToggleUint::enable(uint32_t onoff)
+{
+    ADM_QCheckBox *box=(ADM_QCheckBox *)myWidget;
+      QSpinBox *spin=(QSpinBox *)widgetUint;
+  ADM_assert(box);
+  if(onoff)
+  {
+    box-&gt;setEnabled(TRUE);
+    spin-&gt;setEnabled(TRUE);
+  }
+  else
+  {
+    box-&gt;setEnabled(FALSE);
+    spin-&gt;setEnabled(FALSE);
+  }
+}
+
+//******************************************************
+// An Int and a toggle linked...
+//******************************************************
+
+diaElemToggleInt::diaElemToggleInt(uint32_t *toggleValue,const char *toggleTitle, int32_t *uintval, const char *name,int32_t min,int32_t max,const char *tip)
+  : diaElem(ELEM_TOGGLE_INT)
+{
+   param=(void *)toggleValue;
+  paramTitle=shortkey(toggleTitle);
+  this-&gt;tip=tip;
+  embName=name;
+  emb=uintval;
+  widgetUint=NULL;
+  _min=min;
+  _max=max;
+}
+
+diaElemToggleInt::~diaElemToggleInt()
+{
+  
+}
+void diaElemToggleInt::setMe(void *dialog, void *opaque,uint32_t line)
+{
+ ADM_QCheckBox *box=new ADM_QCheckBox(QString::fromUtf8(paramTitle),(QWidget *)dialog,this,TT_TOGGLE_INT);
+ QGridLayout *layout=(QGridLayout*) opaque;
+ myWidget=(void *)box; 
+ if( *(uint32_t *)param)
+ {
+    box-&gt;setCheckState(Qt::Checked); 
+ }
+ box-&gt;show();
+ layout-&gt;addWidget(box,line,0);
+ // Now add spin
+ QSpinBox *spin=new QSpinBox((QWidget *)dialog);
+ widgetUint=(void *)spin; 
+   
+ spin-&gt;setMinimum(_min);
+ spin-&gt;setMaximum(_max);
+ spin-&gt;setValue(*emb);
+ spin-&gt;show();
+ layout-&gt;addWidget(spin,line,1);
+ box-&gt;connectMe();
+}
+
+void diaElemToggleInt::getMe(void)
+{
+  ADM_QCheckBox *box=(ADM_QCheckBox *)myWidget;
+  uint32_t *val=(uint32_t *)param;
+  if(Qt::Checked==box-&gt;checkState())
+  {
+    *val=1; 
+  }else
+    *val=0;
+  //
+    int32_t u;
+  QSpinBox *spin=(QSpinBox *)widgetUint;
+  u=spin-&gt;value();
+ if(u&lt;_min) u=_min;
+ if(u&gt;_max) u=_max;
+ *emb=u;
+}
+
+void   diaElemToggleInt::finalize(void)
+{
+  updateMe();
+}
+void   diaElemToggleInt::updateMe(void)
+{
+  uint32_t val;
+  uint32_t rank=FALSE;
+  ADM_assert(myWidget);
+  
+  ADM_QCheckBox *box=(ADM_QCheckBox *)myWidget;
+  QSpinBox *spin=(QSpinBox *)widgetUint;
+  
+  if(Qt::Checked==box-&gt;checkState())
+  {
+    rank=TRUE;
+  }
+  spin-&gt;setEnabled(rank);
+}
+void   diaElemToggleInt::enable(uint32_t onoff)
+{
+    ADM_QCheckBox *box=(ADM_QCheckBox *)myWidget;
+      QSpinBox *spin=(QSpinBox *)widgetUint;
+  ADM_assert(box);
+  if(onoff)
+  {
+    box-&gt;setEnabled(TRUE);
+    spin-&gt;setEnabled(TRUE);
+  }
+  else
+  {
+    box-&gt;setEnabled(FALSE);
+    spin-&gt;setEnabled(FALSE);
+  }
+}
+
+} // End of namespace
+//****************************Hoook*****************
+
+diaElem  *qt4CreateToggleUint(uint32_t *toggleValue,const char *toggleTitle, uint32_t *uintval,
+		const char *name,uint32_t min,uint32_t max,const char *tip)
+{
+	return new  ADM_qt4Factory::diaElemToggleUint(toggleValue,toggleTitle, uintval,
+			name,min,max,tip);
+}
+void qt4DestroyToggleUint(diaElem *e)
+{
+	ADM_qt4Factory::diaElemToggleUint *a=(ADM_qt4Factory::diaElemToggleUint *)e;
+	delete a;
+}
+
+diaElem  *qt4CreateToggleInt(uint32_t *toggleValue,const char *toggleTitle, int32_t *uintval,
+		const char *name,int32_t min,int32_t max,const char *tip)
+{
+	return new  ADM_qt4Factory::diaElemToggleInt(toggleValue,toggleTitle, uintval,
+			name,min,max,tip);
+}
+void qt4DestroyToggleInt(diaElem *e)
+{
+	ADM_qt4Factory::diaElemToggleInt *a=(ADM_qt4Factory::diaElemToggleInt *)e;
+	delete a;
+}
+diaElem  *qt4CreateToggle(uint32_t *toggleValue,const char *toggleTitle, const char *tip)
+{
+	return new  ADM_qt4Factory::diaElemToggle(toggleValue,toggleTitle, tip);
+}
+void qt4DestroyToggle(diaElem *e)
+{
+	ADM_qt4Factory::diaElemToggle *a=(ADM_qt4Factory::diaElemToggle *)e;
+	delete a;
+}
+
+
+
+//EOF

Copied: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_toggle.h (from rev 4061, branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_toggle.h)
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/T_toggle.h	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_toggle.h	2008-05-24 19:16:19 UTC (rev 4062)
@@ -0,0 +1,32 @@
+#ifndef T_toggle_h
+#define T_toggle_h
+
+#include &lt;QtGui/QCheckBox&gt;
+#include &lt;QtGui/QWidget&gt;
+
+namespace ADM_qt4Factory
+{
+	typedef enum
+	{
+		TT_TOGGLE,
+		TT_TOGGLE_UINT,
+		TT_TOGGLE_INT
+	} TOG_TYPE;
+
+	class ADM_QCheckBox : public QCheckBox
+	{
+		Q_OBJECT
+
+	protected:
+		void     *_toggle;
+		TOG_TYPE _type;
+
+	public slots:
+		void changed(int i);
+
+	public:
+		ADM_QCheckBox(const QString &amp; str, QWidget *root, void *toggle, TOG_TYPE type);
+		void connectMe(void);
+	};
+}
+#endif	// T_toggle_h

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/include/ADM_videoFilterDynamic.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/include/ADM_videoFilterDynamic.h	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/include/ADM_videoFilterDynamic.h	2008-05-24 19:16:19 UTC (rev 4062)
@@ -42,8 +42,10 @@
 /*
  *      Same as above, but this filter is using a specific UI and cannot be used for another UI 
  */
-    
-#define VF_DEFINE_FILTER_UI(ui,myClass,myParam,name,displayname,version,category,description) \
+#ifndef  ADM_UI_TYPE_BUILD 
+#define VF_DEFINE_FILTER_UI ADM_UI_TYPE_BUILD_IS_NOT_DEFINED
+#else
+#define VF_DEFINE_FILTER_UI(myClass,myParam,name,displayname,version,category,description) \
     SCRIPT_CREATE(name##_script,myClass,myParam); \
     BUILD_CREATE(name##_create,myClass); \
         static FilterDescriptor descriptor_vf_id_##myClass (\
@@ -55,9 +57,9 @@
                                                                 name##_create, \
                                                                 name##_script, \
                                                                 ADM_FILTER_API_VERSION, \
-                                                                ui); \
+                                                                ADM_UI_TYPE_BUILD); \
     extern &quot;C&quot; {        FilterDescriptor *ADM_VF_getDescriptor(void) {return &amp;descriptor_vf_id_##myClass ;}};                                                   
-
+#endif
 /* Hook, filters cannot include config.h as they are framework independant */
 #ifdef QT_TR_NOOP
 #undef QT_TR_NOOP

Copied: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/include/DIA_flyDialog.h (from rev 4061, branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyDialog.h)
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyDialog.h	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/include/DIA_flyDialog.h	2008-05-24 19:16:19 UTC (rev 4062)
@@ -0,0 +1,128 @@
+/****************************************************************************
+ copyright            : (C) 2007 by mean
+ email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
+ 
+ Simple class to do filter that have a configuration that have real time effect
+ 
+ Case 1: The filter process YUV
+ 
+ YUV-&gt; Process-&gt;YUVOUT-&gt;YUV2RGB-&gt;RGBUFFEROUT
+ 
+ Case 2: The filter process RGV
+ 
+ YUV-&gt; YUV2RGB-&gt;RGB-&gt;Process-&gt;RGBUFFEROUT
+ 
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#ifndef ADM_FLY_DIALOG_H
+#define ADM_FLY_DIALOG_H
+#include &quot;ADM_colorspace.h&quot;
+enum ResizeMethod {
+        RESIZE_NONE = 0,	// No automatic resize
+	RESIZE_AUTO = 1,	// Resize image when convenient (YUV: after filter, RGB: before applying filter)
+	RESIZE_LAST = 2		// Resize image after filter has been applied (slower for RGB)
+};
+
+class diaMenuEntry;  // defined in DIA_factory.h; only need pointer here
+
+struct MenuMapping
+{
+    const char * widgetName; // name of the combo box widget or equivalent
+    uint32_t paramOffset;   // offsetof(FOO_PARAM, menu_option_member)
+    uint32_t count;
+    const diaMenuEntry * menu;
+};
+
+typedef float gfloat;
+
+class ADM_flyDialog
+{
+  protected:
+          uint32_t      _w, _h, _zoomW, _zoomH;
+          float         _zoom;
+          uint32_t      _zoomChangeCount;
+          AVDMGenericVideoStream *_in;
+      
+          ADMImage      *_yuvBuffer;
+          ADMImage      *_yuvBufferOut;
+          uint8_t       *_rgbBuffer;
+          uint8_t       *_rgbBufferOut;
+          uint8_t       *_rgbBufferDisplay;
+          uint8_t       _isYuvProcessing;
+          ResizeMethod  _resizeMethod;
+          ADMImageResizer *_resizer;
+
+  
+  
+          void copyYuvFinalToRgb(void);
+          void copyYuvScratchToRgb(void);
+          void copyRgbFinalToDisplay(void);
+          
+  public:
+          void recomputeSize(void);
+         
+  public:
+          void    *_cookie; // whatever
+          void    *_slider; // widget
+          void    *_canvas; // Drawing zone
+          ColYuvRgb *_rgb;
+
+          /* Filter dependant */
+  virtual uint8_t    process(void)=0;
+  virtual uint8_t    download(void)=0;
+  virtual uint8_t    upload(void)=0;
+          /* /filter dependant */
+  
+  virtual uint8_t    sliderChanged(void);
+        /* This is GTK/QT/whatever dependant */
+          
+  
+          
+          
+  
+  virtual uint8_t  update(void) {};
+            uint8_t  cleanup(void);
+  
+
+#ifdef USE_JOG
+  static void jogDial (void * my_data, signed short offset);
+  static void jogRing (void * my_data, gfloat angle);
+#endif
+
+          ADM_flyDialog(uint32_t width, uint32_t height, AVDMGenericVideoStream *in,
+                             void *canvas, void *slider, int yuv, ResizeMethod resizeMethod);
+  virtual ~ADM_flyDialog(void);
+// UI dependant part
+// They are not defined as pure to avoid unresolved problem, especially on win32.
+// You should never use flyDialog as is, but using the macro to pull flyDialogGtk/flyDialogQt4/... 
+  virtual uint8_t  cleanup2(void) {ADM_assert(0);return 0;};
+  virtual uint8_t  isRgbInverted(void){ADM_assert(0);return 0;};;
+  virtual uint8_t  display(void){ADM_assert(0);return 0;};;
+  virtual float   calcZoomFactor(void){ADM_assert(0);return 0;};;
+  virtual uint32_t sliderGet(void){ADM_assert(0);return 0;};;
+  virtual uint8_t  sliderSet(uint32_t value)  {ADM_assert(0);return 0;};
+  virtual void    postInit(uint8_t reInit){ADM_assert(0);return ;};;
+  virtual void    setupMenus (const void * params,
+                         const MenuMapping * menu_mapping,
+                        uint32_t menu_mapping_count) {ADM_assert(0);return ;};
+  virtual void  getMenuValues ( void * mm,
+                    const MenuMapping * menu_mapping,
+                    uint32_t menu_mapping_count) {ADM_assert(0);return;};
+  virtual uint32_t  getMenuValue (const MenuMapping * mm)  {ADM_assert(0);return 0;};                    
+  virtual  const MenuMapping *lookupMenu (const char * widgetName,
+                                               const MenuMapping * menu_mapping,
+                                               uint32_t menu_mapping_count)  {ADM_assert(0);return NULL;};
+             
+                    
+ 
+ };
+
+#endif

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/CMakeLists.txt	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/CMakeLists.txt	2008-05-24 19:16:19 UTC (rev 4062)
@@ -16,6 +16,7 @@
         ADM_vidFieldASM.cpp
         ADM_vidFieldBlend.cpp
         ADM_interlaceUtil.cpp
+        DIA_flyDialog.cpp
 )
 
 ADD_LIBRARY(ADM_coreImage SHARED ${ADM_coreImage_SRCS})

Copied: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/DIA_flyDialog.cpp (from rev 4061, branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyDialog.cpp)
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyDialog.cpp	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/DIA_flyDialog.cpp	2008-05-24 19:16:19 UTC (rev 4062)
@@ -0,0 +1,261 @@
+/***************************************************************************
+    copyright            : (C) 2006 by mean
+    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
+***************************************************************************/
+
+/***************************************************************************
+*                                                                         *
+*   This program is free software; you can redistribute it and/or modify  *
+*   it under the terms of the GNU General Public License as published by  *
+*   the Free Software Foundation; either version 2 of the License, or     *
+*   (at your option) any later version.                                   *
+*                                                                         *
+***************************************************************************///
+
+#include &quot;ADM_default.h&quot;
+
+#include &quot;ADM_videoFilter.h&quot;
+#include &quot;DIA_flyDialog.h&quot;
+#include &quot;ADM_assert.h&quot;
+
+extern &quot;C&quot; {
+#include &quot;ADM_libraries/ADM_ffmpeg/ADM_lavcodec/avcodec.h&quot;
+}
+
+ADM_flyDialog::ADM_flyDialog(uint32_t width,uint32_t height,AVDMGenericVideoStream *in,
+                                void *canvas, void *slider,int yuv, ResizeMethod resizeMethod)
+{
+	ADM_assert(canvas);
+
+	if (slider)
+		ADM_assert(in);
+
+	_w = width;
+	_h = height;
+	_isYuvProcessing = yuv;
+	_in = in;
+	_slider = slider;
+	_canvas = canvas;
+	_cookie = NULL;
+	_resizeMethod = resizeMethod;
+        _zoomChangeCount = 0;
+
+	if (isRgbInverted())
+		_rgb=new ColYuvRgb(_w,_h,1);
+	else
+		_rgb=new ColYuvRgb(_w,_h);
+
+	_rgb-&gt;reset(_w,_h);
+
+	_yuvBuffer=new ADMImage(_w,_h);
+
+	if(_isYuvProcessing)
+	{
+		_yuvBufferOut=new ADMImage(_w,_h);
+		_rgbBuffer=NULL;
+	}
+	else
+	{
+		_rgbBuffer =new uint8_t [_w*_h*4];
+		_yuvBufferOut=NULL;
+	}
+
+	_rgbBufferOut =new uint8_t [_w*_h*4];
+
+	if (_resizeMethod == RESIZE_AUTO || _resizeMethod == RESIZE_LAST)
+	{
+		_zoom = calcZoomFactor();
+
+		if (_zoom == 1)
+			_resizeMethod = RESIZE_NONE;
+		else
+		{
+			_zoomW = uint32_t (_w * _zoom);
+			_zoomH = uint32_t (_h * _zoom);
+		}
+	}
+        else
+		_zoom = 1;
+
+	if (_resizeMethod == RESIZE_AUTO || _resizeMethod == RESIZE_LAST)
+	{
+		PixelFormat sourceColour;
+
+		if (_resizeMethod == RESIZE_AUTO || _isYuvProcessing)
+			sourceColour = PIX_FMT_YUV420P;
+		else
+			sourceColour = PIX_FMT_RGB32;
+
+		_resizer = new ADMImageResizer(_w, _h, _zoomW, _zoomH, sourceColour, PIX_FMT_RGB32);
+		_rgbBufferDisplay = new uint8_t[_w * _h * 4];
+	}
+	else
+	{
+		_zoomW = _w;
+		_zoomH = _h;
+
+		_resizer = NULL;
+		_rgbBufferDisplay = NULL;
+	}
+
+	postInit (false);
+}
+
+void ADM_flyDialog::recomputeSize(void)
+{
+    float new_zoom = calcZoomFactor();
+
+    ResizeMethod new_resizeMethod;
+    uint32_t new_zoomW;
+    uint32_t new_zoomH;
+
+    if (new_zoom == 1)
+    {
+        new_resizeMethod = RESIZE_NONE;
+        new_zoomW = _w;
+        new_zoomH = _h;
+    }
+    else
+    {
+        new_resizeMethod = RESIZE_AUTO;
+        new_zoomW = uint32_t (_w * new_zoom);
+        new_zoomH = uint32_t (_h * new_zoom);
+    }
+
+    if (new_resizeMethod == _resizeMethod &amp;&amp; new_zoom == _zoom
+        &amp;&amp; new_zoomW == _zoomW &amp;&amp; new_zoomH == _zoomH)
+        return;
+
+    if (++_zoomChangeCount &gt; 3 || new_zoomH &lt; 30 || new_zoomW &lt; 30)
+    {
+        printf (&quot;Resisting zoom size change from %dx%d (zoom %.5f) to %dx%d (zoom %.5f)\n&quot;,
+                _zoomW, _zoomH, _zoom, new_zoomW, new_zoomH, new_zoom);
+        return;
+    }
+
+    printf (&quot;Fixing zoom size from %dx%d (zoom %.5f) to correct %dx%d (zoom %.5f)\n&quot;,
+            _zoomW, _zoomH, _zoom, new_zoomW, new_zoomH, new_zoom);
+
+    _resizeMethod = new_resizeMethod;
+    _zoom = new_zoom;
+    _zoomW = new_zoomW;
+    _zoomH = new_zoomH;
+
+    delete _resizer;
+    if (_resizeMethod == RESIZE_AUTO || _resizeMethod == RESIZE_LAST)
+    {
+        PixelFormat sourceColour;
+
+        if (_resizeMethod == RESIZE_AUTO || _isYuvProcessing)
+            sourceColour = PIX_FMT_YUV420P;
+        else
+            sourceColour = PIX_FMT_RGB32;
+
+        _resizer = new ADMImageResizer(_w, _h, _zoomW, _zoomH, sourceColour, PIX_FMT_RGB32);
+        if (!_rgbBufferDisplay)
+            _rgbBufferDisplay = new uint8_t[_w * _h * 4];
+    }
+    else
+    {
+        _resizer = NULL;
+        delete _rgbBufferDisplay;
+        _rgbBufferDisplay = NULL;
+    }
+
+    postInit (true);
+    sliderChanged();
+}
+
+/**
+    \fn cleanup
+    \brief deallocate
+*/
+uint8_t ADM_flyDialog::cleanup(void)
+{
+#define DEL1(x)    if(x) {delete [] x;x=NULL;}
+#define DEL2(x)    if(x) {delete  x;x=NULL;}
+  
+	DEL2(_yuvBufferOut);
+	DEL2(_yuvBuffer);
+	DEL1(_rgbBuffer);
+	DEL1(_rgbBufferOut);
+	DEL1(_rgbBufferDisplay);
+	DEL2(_rgb);
+	DEL2(_resizer);
+}
+/**
+    \fn ~ADM_flyDialog
+    \brief destructor
+*/
+ADM_flyDialog::~ADM_flyDialog(void)
+{
+  cleanup2();
+  cleanup(); 
+}
+
+/**
+      \fn sliderChanged
+      \brief callback to handle image changes
+*/
+uint8_t    ADM_flyDialog::sliderChanged(void)
+{
+  uint32_t fn= sliderGet();
+  uint32_t len,flags;
+  
+    ADM_assert(_yuvBuffer);
+    ADM_assert(_rgbBufferOut);
+    ADM_assert(_in);
+    
+    if(!_in-&gt;getFrameNumberNoAlloc(fn,&amp;len,_yuvBuffer,&amp;flags))
+    {
+      printf(&quot;[FlyDialog] Cannot get frame %u\n&quot;,fn); 
+      return 0;
+    }
+
+    // Process...    
+    if(_isYuvProcessing)
+    {
+        process();
+		copyYuvFinalToRgb();
+    }
+	else // RGB Processing      
+    {
+        ADM_assert(_rgbBuffer);
+		copyYuvScratchToRgb();
+        process();
+    }
+
+    return display();
+}
+
+void ADM_flyDialog::copyYuvFinalToRgb(void)
+{
+	if (_resizeMethod == RESIZE_AUTO || _resizeMethod == RESIZE_LAST)
+		_resizer-&gt;resize(_yuvBufferOut-&gt;data, _rgbBufferOut);
+	else
+		_rgb-&gt;scale(_yuvBufferOut-&gt;data, _rgbBufferOut);
+}
+
+void ADM_flyDialog::copyYuvScratchToRgb(void)
+{
+	if (_resizeMethod == RESIZE_AUTO)
+		_resizer-&gt;resize(_yuvBuffer-&gt;data,_rgbBuffer);
+	else
+		_rgb-&gt;scale(_yuvBuffer-&gt;data,_rgbBuffer);
+}
+
+void ADM_flyDialog::copyRgbFinalToDisplay(void)
+{
+	if (_resizeMethod == RESIZE_LAST)
+	{
+		_resizer-&gt;resize(_rgbBufferOut, _rgbBufferDisplay);
+
+		uint8_t* tempRgb = _rgbBufferDisplay;
+
+		_rgbBufferDisplay = _rgbBufferOut;
+		_rgbBufferOut = tempRgb;
+	}
+}
+
+//EOF
+

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_uiTypes.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_uiTypes.h	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_uiTypes.h	2008-05-24 19:16:19 UTC (rev 4062)
@@ -15,13 +15,12 @@
  ***************************************************************************/
 #ifndef DIA_UITYPES_H
 #define DIA_UITYPES_H
-typedef enum
-{
-        ADM_UI_CLI=1,
-        ADM_UI_GTK=2,
-        ADM_UI_QT4=4,
-        ADM_UI_ALL=ADM_UI_CLI+ADM_UI_GTK+ADM_UI_QT4
-}ADM_UI_TYPE;
 
+#define ADM_UI_CLI 1
+#define ADM_UI_GTK 2
+#define ADM_UI_QT4 4
+#define ADM_UI_ALL (ADM_UI_CLI+ADM_UI_GTK+ADM_UI_QT4)
+typedef  int  ADM_UI_TYPE;
+
 #endif
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter.cpp	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter.cpp	2008-05-24 19:16:19 UTC (rev 4062)
@@ -38,6 +38,7 @@
 #define MODULE_NAME MODULE_PREVIEW
 #include &quot;ADM_osSupport/ADM_debug.h&quot;
 #include &quot;ADM_osSupport/ADM_quota.h&quot;
+#include &quot;ADM_preview.h&quot;
 //
 
 extern ADM_UI_TYPE UI_GetCurrentUI(void);
@@ -145,7 +146,7 @@
  *  \brief try to load the plugin given as argument..
  */
 
-#define Fail(x) {printf(#x&quot;\n&quot;);goto er;}
+#define Fail(x) {printf(&quot;%s:&quot;#x&quot;\n&quot;,file);goto er;}
 static bool tryLoadingFilterPlugin(const char *file)
 {
 	ADM_vf_pluginLoader *dll=new ADM_vf_pluginLoader(file);
@@ -169,7 +170,7 @@
     allfilters.push_back (myDesc);
     filterCategories[myDesc-&gt;category].push_back(myDesc);
     pluginLoaderQueue.push_back(dll); // Needed for cleanup. FIXME TODO Delete it.
-    aprintf(&quot;[Filters] Registered filter %s as  %s\n&quot;,file,desc-&gt;name);
+    printf(&quot;[Filters] Registered filter %s as  %s\n&quot;,file,desc-&gt;name);
     return true;
 	// Tag it
 	// Fail!

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_preview.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_preview.cpp	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_preview.cpp	2008-05-24 19:16:19 UTC (rev 4062)
@@ -46,7 +46,7 @@
 #include &quot;ADM_osSupport/ADM_debug.h&quot;
 #include &quot;ADM_libraries/ADM_ffmpeg/ADM_libswscale/ADM_mp.h&quot;
 #include &quot;ADM_userInterfaces/ADM_commonUI/GUI_ui.h&quot;
-
+#include &quot;ADM_preview.h&quot;
 #define MAX(a,b) ( (a)&gt;(b) ? (a) : (b) )
 
 extern FILTER  videofilters[VF_MAX_FILTER];

Added: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_preview.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_preview.h	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_preview.h	2008-05-24 19:16:19 UTC (rev 4062)
@@ -0,0 +1,34 @@
+/**
+        \file ADM_preview.h
+        \brief Handles preview in main program
+
+*/
+#ifndef ADM_PREVIEW_H
+#define ADM_PREVIEW_H
+typedef enum 
+{
+    ADM_PREVIEW_NONE, 
+    ADM_PREVIEW_OUTPUT,
+    ADM_PREVIEW_SIDE,
+    ADM_PREVIEW_TOP,
+    ADM_PREVIEW_SEPARATE
+}ADM_PREVIEW_MODE;
+
+ADM_PREVIEW_MODE  getPreviewMode(void);
+void             setPreviewMode(ADM_PREVIEW_MODE preview);
+void             changePreviewZoom(renderZoom nzoom);
+
+class admPreview
+{
+  public:
+      static uint8_t update(uint32_t framenum);
+      static void start(void);
+      static void stop(void);
+      static void setMainDimension(uint32_t, uint32_t );
+      static void updateFilters(AVDMGenericVideoStream *first,AVDMGenericVideoStream *last);
+      static void deferDisplay(uint32_t onoff,uint32_t startat);
+      static void displayNow(uint32_t framenum);
+      static void cleanUp(void);  
+      static ADMImage *getBuffer(void);
+};
+#endif

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/CMakeLists.txt	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/CMakeLists.txt	2008-05-24 19:16:19 UTC (rev 4062)
@@ -1,7 +1,7 @@
 SET(ADM_LIB ADM_dialogGtk)
 
 SET(${ADM_LIB}_SRCS
-	DIA_about.cpp     DIA_calculator.cpp   DIA_crop.cpp       DIA_flyDialog.cpp  DIA_preview.cpp     DIA_srt.cpp      DIA_xvid4.cpp
+	DIA_about.cpp     DIA_calculator.cpp   DIA_crop.cpp       DIA_preview.cpp     DIA_srt.cpp      DIA_xvid4.cpp
 	DIA_acodec.cpp    DIA_encoding.cpp   DIA_hue.cpp        DIA_ocr.cpp       DIA_properties.cpp  DIA_vcodec.cpp   DIA_xvid.cpp
 	DIA_eq2.cpp        DIA_idx_pg.cpp     DIA_partial.cpp   DIA_quota.cpp       DIA_vobsub.cpp
 	DIA_asharp.cpp    DIA_jobs.cpp       DIA_pause.cpp     DIA_recent.cpp      DIA_working.cpp

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_flyDialog.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_flyDialog.cpp	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_flyDialog.cpp	2008-05-24 19:16:19 UTC (rev 4062)
@@ -1,213 +0,0 @@
-/***************************************************************************
-    copyright            : (C) 2006 by mean
-    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
-***************************************************************************/
-
-/***************************************************************************
-*                                                                         *
-*   This program is free software; you can redistribute it and/or modify  *
-*   it under the terms of the GNU General Public License as published by  *
-*   the Free Software Foundation; either version 2 of the License, or     *
-*   (at your option) any later version.                                   *
-*                                                                         *
-***************************************************************************///
-
-#include &quot;ADM_toolkitGtk.h&quot;
-#include &quot;ADM_videoFilter.h&quot;
-#include &quot;DIA_flyDialog.h&quot;
-#include &quot;DIA_factory.h&quot;
-
-
-#ifdef USE_JOG
-#include &quot;gui_action.hxx&quot;
-#include &quot;../ADM_toolkit_gtk/ADM_jogshuttle.h&quot;
-
-extern PhysicalJogShuttle *physical_jog_shuttle;
-#endif
-
-extern void GUI_RGBDisplay(uint8_t * dis, uint32_t w, uint32_t h, void *widg);
-extern float UI_calcZoomToFitScreen(GtkWindow* window, GtkWidget* drawingArea, uint32_t imageWidth, uint32_t imageHeight);
-extern void UI_centreCanvasWindow(GtkWindow *window, GtkWidget *canvas, int newCanvasWidth, int newCanvasHeight);
-
-void ADM_flyDialog::postInit(uint8_t reInit)
-{
-	if (_slider)
-	{
-		GtkAdjustment *adj = (GtkAdjustment*)gtk_adjustment_new(0, 0, _in-&gt;getInfo()-&gt;nb_frames - 1, 0, 1, 0);
-
-		gtk_range_set_adjustment(GTK_RANGE(_slider), adj);
-		gtk_scale_set_digits(GTK_SCALE(_slider), 0);
-	}
-
-	GtkWindow *window = (GtkWindow*)gtk_widget_get_ancestor((GtkWidget*)_canvas, GTK_TYPE_WINDOW);
-	UI_centreCanvasWindow(window, (GtkWidget*)_canvas, _zoomW, _zoomH);
-	gtk_widget_set_size_request((GtkWidget*)_canvas, _zoomW, _zoomH);
-#ifdef USE_JOG
-        if (!reInit)
-            physical_jog_shuttle-&gt;registerCBs (this, PhysicalJogShuttle::NoButtonCB,
-                                               jogDial, jogRing);
-#endif
-}
-
-uint8_t  ADM_flyDialog::cleanup2(void)
-{
-#ifdef USE_JOG
-	physical_jog_shuttle-&gt;deregisterCBs (this);
-#endif
-}
-
-#ifdef USE_JOG
-void ADM_flyDialog::jogDial (void * my_data, signed short offset)
-{
-    ADM_flyDialog * myFly = static_cast &lt;ADM_flyDialog *&gt; (my_data);
-    myFly-&gt;sliderSet (myFly-&gt;sliderGet() + offset);
-}
-
-static guint jogRingTimerID = 0;
-static signed short jogRingIncr = 0;
-
-static gboolean on_jogRingTimer (gpointer data)
-{
-    gdk_threads_enter();
-
-    ADM_flyDialog * myFly = static_cast &lt;ADM_flyDialog *&gt; (data);
-    myFly-&gt;sliderSet (myFly-&gt;sliderGet() + jogRingIncr);
-
-    gdk_threads_leave();
-    return TRUE;
-}
-
-void ADM_flyDialog::jogRing (void * my_data, gfloat angle)
-{
-    if (jogRingTimerID)
-    {
-        g_source_remove (jogRingTimerID);
-        jogRingTimerID = 0;
-    }
-
-    if (angle &gt; -0.0001 &amp;&amp; angle &lt; 0.0001)
-        return;
-
-    jogRingIncr = (angle &lt; 0) ? -1 : +1;
-    angle *= jogRingIncr; // absolute value
-    jogRingTimerID = g_timeout_add (guint ((1 - angle) * 500 + 10),
-                                    on_jogRingTimer, my_data);
-}
-#endif
-
-float ADM_flyDialog::calcZoomFactor(void)
-{
-	GtkWindow *window = (GtkWindow*)gtk_widget_get_ancestor((GtkWidget*)_canvas, GTK_TYPE_WINDOW);
-
-	return UI_calcZoomToFitScreen(window, (GtkWidget*)_canvas, _w, _h);
-}
-
-uint8_t  ADM_flyDialog::display(void)
-{
-	ADM_assert(_canvas);
-	ADM_assert(_rgbBufferOut);
-
-	GUI_RGBDisplay(_rgbBufferOut, _zoomW, _zoomH, _canvas);
-
-	return 1; 
-}
-
-uint32_t ADM_flyDialog::sliderGet(void)
-{
-	ADM_assert(_slider);
-	return (uint32_t)gtk_range_get_value (GTK_RANGE(_slider));
-}
-
-uint8_t ADM_flyDialog::sliderSet(uint32_t value)
-{
-	ADM_assert(_slider);
-
-        gtk_range_set_value (GTK_RANGE(_slider), value);
-
-	return 1; 
-}
-
-uint8_t ADM_flyDialog::isRgbInverted(void)
-{
-	return 0; 
-}
-
-void ADM_flyDialog::setupMenus (const void * params, 
-                                const MenuMapping * menu_mapping,
-                                uint32_t menu_mapping_count)
-{
-    // Fill in menus
-
-    ADM_assert (_cookie); // should be the dialog pointer
-    GtkDialog * dialog = static_cast &lt;GtkDialog *&gt; (_cookie);
-
-    for (int menu_index = 0; menu_index &lt; menu_mapping_count; menu_index++)
-    {
-        const MenuMapping &amp; mm = menu_mapping [menu_index];
-        const uint32_t * theParam
-            = (reinterpret_cast &lt;const uint32_t *&gt;
-               (mm.paramOffset + reinterpret_cast &lt;const char *&gt; (params)));
-        // printf (&quot;setupMenus: %s: params %p + offset 0x%x = %p\n&quot;,
-        //         mm.widgetName, params, mm.paramOffset, theParam);
-
-        GtkComboBox * combo
-            = GTK_COMBO_BOX (lookup_widget (GTK_WIDGET(dialog),
-                                            mm.widgetName));
-        int found = -1;
-        for (int item_index = 0; item_index &lt; mm.count; item_index++)
-        {
-            gtk_combo_box_append_text (combo, mm.menu [item_index].text);
-            if (mm.menu [item_index].val == *theParam)
-            {
-                gtk_combo_box_set_active (combo, item_index);
-                found = item_index;
-            }
-        }
-
-        // printf (&quot;setupMenus: %s: current is %d (%d)\n&quot;,
-        //         mm.widgetName, found, *theParam);
-    }
-}
-
-uint32_t ADM_flyDialog::getMenuValue (const MenuMapping * mm)
-{
-    ADM_assert (_cookie); // should be the dialog pointer
-    GtkDialog * dialog = static_cast &lt;GtkDialog *&gt; (_cookie);
-    GtkComboBox * combo
-        = GTK_COMBO_BOX (lookup_widget (GTK_WIDGET(dialog), mm-&gt;widgetName));
-    uint32_t currValue = gtk_combo_box_get_active (combo);
-    ADM_assert (currValue &lt; mm-&gt;count);
-
-    return (mm-&gt;menu [currValue].val);
-}
-
-void ADM_flyDialog::getMenuValues (void * params,
-                                   const MenuMapping * menu_mapping,
-                                   uint32_t menu_mapping_count)
-{
-    for (int menu_index = 0; menu_index &lt; menu_mapping_count; menu_index++)
-    {
-        const MenuMapping &amp; mm = menu_mapping [menu_index];
-        uint32_t * theParam = reinterpret_cast &lt;uint32_t *&gt;
-                              (mm.paramOffset
-                               + reinterpret_cast &lt;char *&gt; (params));
-        *theParam = getMenuValue (&amp;mm);
-    }
-}
-
-const MenuMapping *
-ADM_flyDialog::lookupMenu (const char * widgetName,
-                           const MenuMapping * menu_mapping,
-                           uint32_t menu_mapping_count)
-{
-    for (int menu_index = 0; menu_index &lt; menu_mapping_count; menu_index++)
-    {
-        const MenuMapping * mm = menu_mapping + menu_index;
-        if (strcmp (mm-&gt;widgetName, widgetName) == 0)
-            return mm;
-    }
-
-    return 0;
-}
-
-//EOF

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/CMakeLists.txt	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/CMakeLists.txt	2008-05-24 19:16:19 UTC (rev 4062)
@@ -1,6 +1,6 @@
 SET(ADM_LIB ADM_dialogNone)
 
 SET(${ADM_LIB}_SRCS 
-	alert_none.cpp  DIA_busy.cpp  DIA_encoding.cpp  DIA_flyDialog.cpp  DIA_indexing.cpp  DIA_none.cpp  DIA_working.cpp  OCR_none.cpp)
+	alert_none.cpp  DIA_busy.cpp  DIA_encoding.cpp   DIA_indexing.cpp  DIA_none.cpp  DIA_working.cpp  OCR_none.cpp)
 
-ADD_ADM_LIB_CLI_TARGET(${ADM_LIB} ${${ADM_LIB}_SRCS})
\ No newline at end of file
+ADD_ADM_LIB_CLI_TARGET(${ADM_LIB} ${${ADM_LIB}_SRCS})

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_flyDialog.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_flyDialog.cpp	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_flyDialog.cpp	2008-05-24 19:16:19 UTC (rev 4062)
@@ -1,49 +0,0 @@
-/***************************************************************************
-    copyright            : (C) 2006 by mean
-    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
-***************************************************************************/
-
-/***************************************************************************
-*                                                                         *
-*   This program is free software; you can redistribute it and/or modify  *
-*   it under the terms of the GNU General Public License as published by  *
-*   the Free Software Foundation; either version 2 of the License, or     *
-*   (at your option) any later version.                                   *
-*                                                                         *
-***************************************************************************///
-
-#include &quot;config.h&quot;
-
-#include &lt;math.h&gt;
-
-#include &quot;ADM_default.h&quot;
-
-
-
-
-//#include &quot;ADM_colorspace/ADM_rgb.h&quot;
-
-#include &quot;ADM_image.h&quot;
-#include &quot;ADM_videoFilter.h&quot;
-#include &quot;DIA_flyDialog.h&quot;
-#include &quot;ADM_assert.h&quot;
-
-uint8_t  ADM_flyDialog::display(void)
-{
-  return 1; 
-}
-uint32_t ADM_flyDialog::sliderGet(void)
-{
-  return 1; 
-}
-uint8_t     ADM_flyDialog::sliderSet(uint32_t value)
-{
-  return 1; 
-}
-uint8_t ADM_flyDialog::cleanup2(void)
-{
-  return 1; 
-}
-
-
-//EOF

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/ADM_flyTemplate.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/ADM_flyTemplate.h	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/ADM_flyTemplate.h	2008-05-24 19:16:19 UTC (rev 4062)
@@ -1,102 +0,0 @@
-
-/***************************************************************************
-                          Template for QT4 flyDialog
-    copyright            : (C) 2007 by mean
-    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-
-#ifndef WINDOW_NAME
-#error WINDOW_NAME undefined
-#endif
-
-#ifndef PARAM_NAME
-#error PARAM_NAME undefined
-#endif
-
-#ifndef DIALOG_NAME
-#error DIALOG_NAME undefined
-#endif
-
-#ifndef FUNC_NAME
-#error FUNC_NAME undefined
-#endif
-
-#ifndef FLY_NAME
-#error FLY_NAME undefined
-#endif
-
-
-static int lock=0;
-
-class WINDOW_NAME : public QDialog
- {
-     Q_OBJECT
- protected : 
-    int lock;
- public:
-     FLY_NAME *myCrop;
-     ADM_QCanvas *canvas;
-     WINDOW_NAME(PARAM_NAME *param,AVDMGenericVideoStream *in);
-     ~WINDOW_NAME();
-     DIALOG_NAME ui;
- public slots:
-      void gather(PARAM_NAME *param);
-      //void update(int i);
- private slots:
-   void sliderUpdate(int foo);
-   void valueChanged(int foo);
-
- private:
-     
- };
- 
-  void WINDOW_NAME::sliderUpdate(int foo)
-  {
-    myCrop-&gt;sliderChanged();
-  }
-  void WINDOW_NAME::gather(PARAM_NAME *param)
-  {
-    
-        myCrop-&gt;download();
-        memcpy(param,&amp;(myCrop-&gt;param),sizeof(PARAM_NAME));
-  }
-
-void WINDOW_NAME::valueChanged( int f )
-{
-  if(lock) return;
-  lock++;
-  myCrop-&gt;update();
-  lock--;
-}
-
-
-/**
-      \fn     DIA_getCropParams
-      \brief  Handle crop dialog
-*/
-uint8_t FUNC_NAME(PARAM_NAME *param, AVDMGenericVideoStream *in)
-{
-        uint8_t ret=0;
-        
-        WINDOW_NAME dialog(param,in);        
-        if(dialog.exec()==QDialog::Accepted)
-        {
-            dialog.gather(param); 
-            ret=1;
-        }
-        return ret;
-}
-//____________________________________
-// EOF
-
-

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/CMakeLists.txt	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/CMakeLists.txt	2008-05-24 19:16:19 UTC (rev 4062)
@@ -21,7 +21,7 @@
 SET(${ADM_LIB}_SRCS ${${ADM_LIB}_SRCS}
 	${${ADM_LIB}_headers}  ${${ADM_LIB}_source}  ${${ADM_LIB}_resource}  Q_about.cpp  Q_asharp.cpp
 	Q_contrast.cpp  Q_crop.cpp  Q_encoding.cpp  Q_eq2.cpp  Q_hue.cpp  Q_license.cpp
-	Q_jobs.cpp  Q_props.cpp   Q_vobsub.cpp  Q_working.cpp  T_flyDialog.cpp  T_index_pg.cpp
+	Q_jobs.cpp  Q_props.cpp   Q_vobsub.cpp  Q_working.cpp   T_index_pg.cpp
 	T_QCanvas.cpp  alert_qt4.cpp  DIA_busy.cpp  DIA_none.cpp  DIA_xvid4.cpp  OCR_none.cpp)
 
 ADD_DEFINITIONS(-DADM_SUBVERSION=${ADM_SUBVERSION})

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_flyDialogQt4.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_flyDialogQt4.h	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_flyDialogQt4.h	2008-05-24 19:16:19 UTC (rev 4062)
@@ -1,19 +0,0 @@
-#ifndef DIA_flyDialogQt4_h
-#define DIA_flyDialogQt4_h
-
-#include &lt;QtGui/QWidget&gt;
-
-class ADM_QCanvas : public QWidget
-{
-protected:
-	uint32_t _w,_h;
-public:
-	uint8_t *dataBuffer;
-
-	ADM_QCanvas(QWidget *z, uint32_t w, uint32_t h);
-	~ADM_QCanvas();
-	void paintEvent(QPaintEvent *ev);
-	void changeSize(uint32_t w, uint32_t h);
-};
-
-#endif	// DIA_flyDialogQt4_h

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_asharp.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_asharp.h	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_asharp.h	2008-05-24 19:16:19 UTC (rev 4062)
@@ -6,7 +6,7 @@
 #include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_videoFilter/ADM_vidASharp_param.h&quot;
 #include &quot;DIA_flyDialog.h&quot;
-#include &quot;DIA_flyDialogQt4.h&quot;
+#include &quot;ADM_UIs/ADM_QT4/include/DIA_flyDialogQt4.h&quot;
 #include &quot;DIA_flyAsharp.h&quot;
 
 class Ui_asharpWindow : public QDialog

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_contrast.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_contrast.h	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_contrast.h	2008-05-24 19:16:19 UTC (rev 4062)
@@ -6,7 +6,7 @@
 #include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_videoFilter/ADM_vidContrast.h&quot;
 #include &quot;DIA_flyDialog.h&quot;
-#include &quot;DIA_flyDialogQt4.h&quot;
+#include &quot;ADM_UIs/ADM_QT4/include/DIA_flyDialogQt4.h&quot;
 #include &quot;DIA_flyContrast.h&quot;
 
 class Ui_contrastWindow : public QDialog

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_eq2.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_eq2.h	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_eq2.h	2008-05-24 19:16:19 UTC (rev 4062)
@@ -6,7 +6,7 @@
 #include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_videoFilter/ADM_vidEq2.h&quot;
 #include &quot;DIA_flyDialog.h&quot;
-#include &quot;DIA_flyDialogQt4.h&quot;
+#include &quot;ADM_UIs/ADM_QT4/include/DIA_flyDialogQt4.h&quot;
 #include &quot;DIA_flyEq2.h&quot;
 
 class Ui_eq2Window : public QDialog

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_hue.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_hue.h	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_hue.h	2008-05-24 19:16:19 UTC (rev 4062)
@@ -6,7 +6,7 @@
 #include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_videoFilter/ADM_vidHue.h&quot;
 #include &quot;DIA_flyDialog.h&quot;
-#include &quot;DIA_flyDialogQt4.h&quot;
+#include &quot;ADM_UIs/ADM_QT4/include/DIA_flyDialogQt4.h&quot;
 #include &quot;DIA_flyHue.h&quot;
 
 class Ui_hueWindow : public QDialog

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_srt.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_srt.h	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_srt.h	2008-05-24 19:16:19 UTC (rev 4062)
@@ -9,7 +9,7 @@
 #include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_videoFilter/ADM_vidSRT.h&quot;
 #include &quot;DIA_flyDialog.h&quot;
-#include &quot;DIA_flyDialogQt4.h&quot;
+#include &quot;ADM_UIs/ADM_QT4/include/DIA_flyDialogQt4.h&quot;
 #include &quot;DIA_flySrtPos.h&quot;
 
 class Ui_srtWindow : public QDialog

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_flyDialog.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_flyDialog.cpp	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_flyDialog.cpp	2008-05-24 19:16:19 UTC (rev 4062)
@@ -1,73 +0,0 @@
-/***************************************************************************
-    copyright            : (C) 2006 by mean
-    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
-***************************************************************************/
-
-/***************************************************************************
-*                                                                         *
-*   This program is free software; you can redistribute it and/or modify  *
-*   it under the terms of the GNU General Public License as published by  *
-*   the Free Software Foundation; either version 2 of the License, or     *
-*   (at your option) any later version.                                   *
-*                                                                         *
-***************************************************************************///
-
-
-#include &lt;QtGui/QGraphicsView&gt;
-#include &lt;QtGui/QSlider&gt;
-
-#include &quot;ADM_default.h&quot;
-
-#include &quot;ADM_videoFilter.h&quot;
-#include &quot;DIA_flyDialog.h&quot;
-#include &quot;DIA_flyDialogQt4.h&quot;
-
-void ADM_flyDialog::postInit(uint8_t reInit)
-{
-	QWidget *graphicsView = ((ADM_QCanvas*)_canvas)-&gt;parentWidget();
-	QSlider  *slider=(QSlider *)_slider;
-	
-	graphicsView-&gt;setMinimumSize(_w, _h);
-	graphicsView-&gt;resize(_w, _h);
-	uint32_t nbFrames=_in-&gt;getInfo()-&gt;nb_frames; 
-	slider-&gt;setMaximum(nbFrames);
-}
-
-float ADM_flyDialog::calcZoomFactor(void) {return 1;}
-
-uint8_t  ADM_flyDialog::display(void)
-{
-   ADM_QCanvas *view=(ADM_QCanvas *)_canvas;
-   ADM_assert(view);
-   view-&gt;dataBuffer=_rgbBufferOut;
-   if(!_rgbBufferOut)
-   {
-      printf(&quot;flyDialog: No rgbuffer ??\n&quot;); 
-   } 
-   view-&gt;repaint();
-  return 1; 
-}
-uint32_t ADM_flyDialog::sliderGet(void)
-{
-  QSlider  *slide=(QSlider *)_slider;
-  ADM_assert(slide);
-  return slide-&gt;value();
-  
-}
-uint8_t     ADM_flyDialog::sliderSet(uint32_t value)
-{
-  QSlider  *slide=(QSlider *)_slider;
-  ADM_assert(slide);
-  slide-&gt;setValue(value);
-  return 1; 
-}
-uint8_t  ADM_flyDialog::isRgbInverted(void)
-{
-  return 1; 
-}
-uint8_t ADM_flyDialog::cleanup2(void)
-{
-  return 1; 
-}
-
-//EOF

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_ocr/Q_ocr.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_ocr/Q_ocr.h	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_ocr/Q_ocr.h	2008-05-24 19:16:19 UTC (rev 4062)
@@ -6,7 +6,7 @@
 #include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_ocr/ADM_ocr.h&quot;
 #include &quot;ADM_ocr/ADM_ocrInternal.h&quot;
-#include &quot;../ADM_dialog/DIA_flyDialogQt4.h&quot;
+#include &quot;ADM_UIs/ADM_QT4/include/DIA_flyDialogQt4.h&quot;
 
 class Ui_ocrWindow : public QDialog
 {

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/CMakeLists.txt	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/CMakeLists.txt	2008-05-24 19:16:19 UTC (rev 4062)
@@ -3,7 +3,7 @@
 SET(${ADM_LIB}_SRCS
 DIA_audioconfig.cpp   DIA_DVDff.cpp           DIA_flyContrast.cpp  DIA_flySrtPos.cpp   DIA_mjpeg.cpp     DIA_resizeWiz.cpp  DIA_v2v.cpp
 DIA_audioFilter.cpp   DIA_flyCrop.cpp      DIA_gototime.cpp    DIA_postproc.cpp  DIA_srt.cpp        
-DIA_bitrateHisto.cpp  DIA_flyAsharp.cpp       DIA_flyDialog.cpp    DIA_lavcodec.cpp    DIA_prefs.cpp     DIA_SVCD.cpp       
+DIA_bitrateHisto.cpp  DIA_flyAsharp.cpp    DIA_lavcodec.cpp    DIA_prefs.cpp     DIA_SVCD.cpp       
 DIA_builtin.cpp       DIA_flyHue.cpp       DIA_lavDecoder.cpp  DIA_requant.cpp   DIA_tdeint.cpp     
 DIA_animated.cpp      DIA_ocr.cpp             DIA_tsSub.cpp        DIA_jobs_save.cpp
 DIA_flyEq2.cpp        DIA_flv1.cpp            DIA_flyThreshold.cpp DIA_flyParticle.cpp DIA_flyEraser.cpp DIA_flySwissArmyKnife.cpp

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyDialog.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyDialog.cpp	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyDialog.cpp	2008-05-24 19:16:19 UTC (rev 4062)
@@ -1,263 +0,0 @@
-/***************************************************************************
-    copyright            : (C) 2006 by mean
-    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
-***************************************************************************/
-
-/***************************************************************************
-*                                                                         *
-*   This program is free software; you can redistribute it and/or modify  *
-*   it under the terms of the GNU General Public License as published by  *
-*   the Free Software Foundation; either version 2 of the License, or     *
-*   (at your option) any later version.                                   *
-*                                                                         *
-***************************************************************************///
-
-#include &quot;ADM_default.h&quot;
-
-
-#include &quot;ADM_userInterfaces/ADM_render/GUI_render.h&quot;
-#include &quot;ADM_videoFilter.h&quot;
-#include &quot;DIA_flyDialog.h&quot;
-#include &quot;ADM_assert.h&quot;
-
-extern &quot;C&quot; {
-#include &quot;ADM_libraries/ADM_ffmpeg/ADM_lavcodec/avcodec.h&quot;
-}
-
-ADM_flyDialog::ADM_flyDialog(uint32_t width,uint32_t height,AVDMGenericVideoStream *in,
-                                void *canvas, void *slider,int yuv, ResizeMethod resizeMethod)
-{
-	ADM_assert(canvas);
-
-	if (slider)
-		ADM_assert(in);
-
-	_w = width;
-	_h = height;
-	_isYuvProcessing = yuv;
-	_in = in;
-	_slider = slider;
-	_canvas = canvas;
-	_cookie = NULL;
-	_resizeMethod = resizeMethod;
-        _zoomChangeCount = 0;
-
-	if (isRgbInverted())
-		_rgb=new ColYuvRgb(_w,_h,1);
-	else
-		_rgb=new ColYuvRgb(_w,_h);
-
-	_rgb-&gt;reset(_w,_h);
-
-	_yuvBuffer=new ADMImage(_w,_h);
-
-	if(_isYuvProcessing)
-	{
-		_yuvBufferOut=new ADMImage(_w,_h);
-		_rgbBuffer=NULL;
-	}
-	else
-	{
-		_rgbBuffer =new uint8_t [_w*_h*4];
-		_yuvBufferOut=NULL;
-	}
-
-	_rgbBufferOut =new uint8_t [_w*_h*4];
-
-	if (_resizeMethod == RESIZE_AUTO || _resizeMethod == RESIZE_LAST)
-	{
-		_zoom = calcZoomFactor();
-
-		if (_zoom == 1)
-			_resizeMethod = RESIZE_NONE;
-		else
-		{
-			_zoomW = uint32_t (_w * _zoom);
-			_zoomH = uint32_t (_h * _zoom);
-		}
-	}
-        else
-		_zoom = 1;
-
-	if (_resizeMethod == RESIZE_AUTO || _resizeMethod == RESIZE_LAST)
-	{
-		PixelFormat sourceColour;
-
-		if (_resizeMethod == RESIZE_AUTO || _isYuvProcessing)
-			sourceColour = PIX_FMT_YUV420P;
-		else
-			sourceColour = PIX_FMT_RGB32;
-
-		_resizer = new ADMImageResizer(_w, _h, _zoomW, _zoomH, sourceColour, PIX_FMT_RGB32);
-		_rgbBufferDisplay = new uint8_t[_w * _h * 4];
-	}
-	else
-	{
-		_zoomW = _w;
-		_zoomH = _h;
-
-		_resizer = NULL;
-		_rgbBufferDisplay = NULL;
-	}
-
-	postInit (false);
-}
-
-void ADM_flyDialog::recomputeSize(void)
-{
-    float new_zoom = calcZoomFactor();
-
-    ResizeMethod new_resizeMethod;
-    uint32_t new_zoomW;
-    uint32_t new_zoomH;
-
-    if (new_zoom == 1)
-    {
-        new_resizeMethod = RESIZE_NONE;
-        new_zoomW = _w;
-        new_zoomH = _h;
-    }
-    else
-    {
-        new_resizeMethod = RESIZE_AUTO;
-        new_zoomW = uint32_t (_w * new_zoom);
-        new_zoomH = uint32_t (_h * new_zoom);
-    }
-
-    if (new_resizeMethod == _resizeMethod &amp;&amp; new_zoom == _zoom
-        &amp;&amp; new_zoomW == _zoomW &amp;&amp; new_zoomH == _zoomH)
-        return;
-
-    if (++_zoomChangeCount &gt; 3 || new_zoomH &lt; 30 || new_zoomW &lt; 30)
-    {
-        printf (&quot;Resisting zoom size change from %dx%d (zoom %.5f) to %dx%d (zoom %.5f)\n&quot;,
-                _zoomW, _zoomH, _zoom, new_zoomW, new_zoomH, new_zoom);
-        return;
-    }
-
-    printf (&quot;Fixing zoom size from %dx%d (zoom %.5f) to correct %dx%d (zoom %.5f)\n&quot;,
-            _zoomW, _zoomH, _zoom, new_zoomW, new_zoomH, new_zoom);
-
-    _resizeMethod = new_resizeMethod;
-    _zoom = new_zoom;
-    _zoomW = new_zoomW;
-    _zoomH = new_zoomH;
-
-    delete _resizer;
-    if (_resizeMethod == RESIZE_AUTO || _resizeMethod == RESIZE_LAST)
-    {
-        PixelFormat sourceColour;
-
-        if (_resizeMethod == RESIZE_AUTO || _isYuvProcessing)
-            sourceColour = PIX_FMT_YUV420P;
-        else
-            sourceColour = PIX_FMT_RGB32;
-
-        _resizer = new ADMImageResizer(_w, _h, _zoomW, _zoomH, sourceColour, PIX_FMT_RGB32);
-        if (!_rgbBufferDisplay)
-            _rgbBufferDisplay = new uint8_t[_w * _h * 4];
-    }
-    else
-    {
-        _resizer = NULL;
-        delete _rgbBufferDisplay;
-        _rgbBufferDisplay = NULL;
-    }
-
-    postInit (true);
-    sliderChanged();
-}
-
-/**
-    \fn cleanup
-    \brief deallocate
-*/
-uint8_t ADM_flyDialog::cleanup(void)
-{
-#define DEL1(x)    if(x) {delete [] x;x=NULL;}
-#define DEL2(x)    if(x) {delete  x;x=NULL;}
-  
-	DEL2(_yuvBufferOut);
-	DEL2(_yuvBuffer);
-	DEL1(_rgbBuffer);
-	DEL1(_rgbBufferOut);
-	DEL1(_rgbBufferDisplay);
-	DEL2(_rgb);
-	DEL2(_resizer);
-}
-/**
-    \fn ~ADM_flyDialog
-    \brief destructor
-*/
-ADM_flyDialog::~ADM_flyDialog(void)
-{
-  cleanup2();
-  cleanup(); 
-}
-
-/**
-      \fn sliderChanged
-      \brief callback to handle image changes
-*/
-uint8_t    ADM_flyDialog::sliderChanged(void)
-{
-  uint32_t fn= sliderGet();
-  uint32_t len,flags;
-  
-    ADM_assert(_yuvBuffer);
-    ADM_assert(_rgbBufferOut);
-    ADM_assert(_in);
-    
-    if(!_in-&gt;getFrameNumberNoAlloc(fn,&amp;len,_yuvBuffer,&amp;flags))
-    {
-      printf(&quot;[FlyDialog] Cannot get frame %u\n&quot;,fn); 
-      return 0;
-    }
-
-    // Process...    
-    if(_isYuvProcessing)
-    {
-        process();
-		copyYuvFinalToRgb();
-    }
-	else // RGB Processing      
-    {
-        ADM_assert(_rgbBuffer);
-		copyYuvScratchToRgb();
-        process();
-    }
-
-    return display();
-}
-
-void ADM_flyDialog::copyYuvFinalToRgb(void)
-{
-	if (_resizeMethod == RESIZE_AUTO || _resizeMethod == RESIZE_LAST)
-		_resizer-&gt;resize(_yuvBufferOut-&gt;data, _rgbBufferOut);
-	else
-		_rgb-&gt;scale(_yuvBufferOut-&gt;data, _rgbBufferOut);
-}
-
-void ADM_flyDialog::copyYuvScratchToRgb(void)
-{
-	if (_resizeMethod == RESIZE_AUTO)
-		_resizer-&gt;resize(_yuvBuffer-&gt;data,_rgbBuffer);
-	else
-		_rgb-&gt;scale(_yuvBuffer-&gt;data,_rgbBuffer);
-}
-
-void ADM_flyDialog::copyRgbFinalToDisplay(void)
-{
-	if (_resizeMethod == RESIZE_LAST)
-	{
-		_resizer-&gt;resize(_rgbBufferOut, _rgbBufferDisplay);
-
-		uint8_t* tempRgb = _rgbBufferDisplay;
-
-		_rgbBufferDisplay = _rgbBufferOut;
-		_rgbBufferOut = tempRgb;
-	}
-}
-
-//EOF
-

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyDialog.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyDialog.h	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyDialog.h	2008-05-24 19:16:19 UTC (rev 4062)
@@ -1,113 +0,0 @@
-/****************************************************************************
- copyright            : (C) 2007 by mean
- email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
- 
- Simple class to do filter that have a configuration that have real time effect
- 
- Case 1: The filter process YUV
- 
- YUV-&gt; Process-&gt;YUVOUT-&gt;YUV2RGB-&gt;RGBUFFEROUT
- 
- Case 2: The filter process RGV
- 
- YUV-&gt; YUV2RGB-&gt;RGB-&gt;Process-&gt;RGBUFFEROUT
- 
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#ifndef ADM_FLY_DIALOG_H
-#define ADM_FLY_DIALOG_H
-#include &quot;ADM_colorspace.h&quot;
-enum ResizeMethod {
-    RESIZE_NONE = 0,	// No automatic resize
-	RESIZE_AUTO = 1,	// Resize image when convenient (YUV: after filter, RGB: before applying filter)
-	RESIZE_LAST = 2		// Resize image after filter has been applied (slower for RGB)
-};
-
-class diaMenuEntry;  // defined in DIA_factory.h; only need pointer here
-
-struct MenuMapping
-{
-    const char * widgetName; // name of the combo box widget or equivalent
-    uint32_t paramOffset;   // offsetof(FOO_PARAM, menu_option_member)
-    uint32_t count;
-    const diaMenuEntry * menu;
-};
-
-typedef float gfloat;
-
-class ADM_flyDialog
-{
-  protected:
-          uint32_t _w,_h, _zoomW, _zoomH;
-          float _zoom;
-          uint32_t _zoomChangeCount;
-          AVDMGenericVideoStream *_in;
-  
-          ADMImage *_yuvBuffer;
-          ADMImage *_yuvBufferOut;
-          uint8_t  *_rgbBuffer;
-          uint8_t  *_rgbBufferOut;
-		  uint8_t  *_rgbBufferDisplay;
-          uint8_t  _isYuvProcessing;
-		  ResizeMethod _resizeMethod;
-		  ADMImageResizer *_resizer;
-
-  virtual void postInit(uint8_t reInit);
-		  float calcZoomFactor(void);
-          void copyYuvFinalToRgb(void);
-          void copyYuvScratchToRgb(void);
-		  void copyRgbFinalToDisplay(void);
-          void setupMenus (const void * params,
-                           const MenuMapping * menu_mapping,
-                           uint32_t menu_mapping_count);
-          void getMenuValues (void * params,
-                              const MenuMapping * menu_mapping,
-                              uint32_t menu_mapping_count);
-  public:
-          void recomputeSize(void);
-          uint32_t getMenuValue (const MenuMapping * mm);
-          const MenuMapping * lookupMenu (const char * widgetName,
-                                          const MenuMapping * menu_mapping,
-                                          uint32_t menu_mapping_count);
-  public:
-          void    *_cookie; // whatever
-          void    *_slider; // widget
-          void    *_canvas; // Drawing zone
-          ColYuvRgb *_rgb;
-
-          /* Filter dependant */
-  virtual uint8_t    process(void)=0;
-  virtual uint8_t    download(void)=0;
-  virtual uint8_t    upload(void)=0;
-          /* /filter dependant */
-  
-  virtual uint8_t    sliderChanged(void);
-        /* This is GTK/QT/whatever dependant */
-          
-          uint8_t  display(void);
-          uint32_t sliderGet(void);
-          uint8_t  sliderSet(uint32_t value);
-          uint8_t  isRgbInverted(void);
-  virtual uint8_t  update(void) {};
-          uint8_t  cleanup(void);
-  virtual uint8_t  cleanup2(void);
-
-#ifdef USE_JOG
-  static void jogDial (void * my_data, signed short offset);
-  static void jogRing (void * my_data, gfloat angle);
-#endif
-
-          ADM_flyDialog(uint32_t width, uint32_t height, AVDMGenericVideoStream *in,
-                             void *canvas, void *slider, int yuv, ResizeMethod resizeMethod);
-  virtual ~ADM_flyDialog(void);
-};
-
-#endif

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_render/GUI_render.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_render/GUI_render.cpp	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_render/GUI_render.cpp	2008-05-24 19:16:19 UTC (rev 4062)
@@ -39,7 +39,7 @@
 
 
 static ColYuvRgb rgbConverter(640,480
-#if ADM_UI_TYPE_BUILD == 4 // QT4 FIXME
+#if ADM_UI_TYPE_BUILD == ADM_UI_QT4 
     ,1
 #endif    
 );

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_render/GUI_render.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_render/GUI_render.h	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_render/GUI_render.h	2008-05-24 19:16:19 UTC (rev 4062)
@@ -1,5 +1,7 @@
-/****************************************************************************
- copyright            : (C) 2001 by mean
+/** **************************************************************************
+     \file GUI_render.h
+     \brief Lib to draw stuff on screen.
+    copyright            : (C) 2001--2008 by mean
     email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
  ***************************************************************************/
 
@@ -20,6 +22,7 @@
 #include &quot;ADM_image.h&quot;
 
 class AVDMGenericVideoStream;
+
 typedef struct
 {
     void *display;
@@ -30,14 +33,6 @@
 	int height;
 } GUI_WindowInfo;
 
-typedef enum 
-{
-    ADM_PREVIEW_NONE, 
-    ADM_PREVIEW_OUTPUT,
-    ADM_PREVIEW_SIDE,
-    ADM_PREVIEW_TOP,
-    ADM_PREVIEW_SEPARATE
-}ADM_PREVIEW_MODE;
 
 typedef enum 
 {
@@ -49,27 +44,8 @@
         ZOOM_INVALID
 }renderZoom;
 
-
-ADM_PREVIEW_MODE getPreviewMode(void);
-void             setPreviewMode(ADM_PREVIEW_MODE preview);
-void             changePreviewZoom(renderZoom nzoom);
-
-class admPreview
-{
-  public:
-      static uint8_t update(uint32_t framenum);
-      static void start(void);
-      static void stop(void);
-      static void setMainDimension(uint32_t, uint32_t );
-      static void updateFilters(AVDMGenericVideoStream *first,AVDMGenericVideoStream *last);
-      static void deferDisplay(uint32_t onoff,uint32_t startat);
-      static void displayNow(uint32_t framenum);
-      static void cleanUp(void);  
-      static ADMImage *getBuffer(void);
-};
-
 uint8_t renderInit( void );
-void renderDestroy(void);
+void   renderDestroy(void);
 uint8_t renderResize(uint32_t w, uint32_t h,uint32_t phyW,uint32_t phyH);
 uint8_t renderRefresh(void);
 uint8_t renderExpose(void);
@@ -83,11 +59,14 @@
 uint8_t renderLock(void);
 uint8_t renderUnlock(void);
 
+/* These functions are trampolined through render as they are UI dependant */
+
 void *UI_getDrawWidget(void);
 void UI_rgbDraw(void *widg,uint32_t w, uint32_t h,uint8_t *ptr);
 void UI_updateDrawWindowSize(void *win,uint32_t w,uint32_t h);
 void UI_getWindowInfo(void *draw, GUI_WindowInfo *xinfo);
 
+/* The list of render engine we support. Warning the list is UI dependant, i.e. for example on macOsX, the GTK version can do Xv, but the QT4 one cannot */
 typedef enum 
 {
         RENDER_GTK=0,

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/gtk_gui.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/gtk_gui.cpp	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/gtk_gui.cpp	2008-05-24 19:16:19 UTC (rev 4062)
@@ -61,7 +61,7 @@
 #include &quot;ADM_codecs/ADM_ffmpeg.h&quot;
 #include &quot;ADM_libraries/ADM_libmpeg2enc/ADM_mpeg2enc.h&quot;
 #include &quot;ADM_video/ADM_vidMisc.h&quot;
-
+#include &quot;ADM_preview.h&quot;
 void A_handleSecondTrack (int tracktype);
 int A_delete(uint32_t start, uint32_t end);
 void A_saveImg (char *name);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/gui_navigate.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/gui_navigate.cpp	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/gui_navigate.cpp	2008-05-24 19:16:19 UTC (rev 4062)
@@ -40,6 +40,8 @@
 #include &quot;ADM_userInterfaces/ADM_commonUI/GUI_ui.h&quot;
 
 #include &quot;ADM_video/ADM_vidMisc.h&quot;
+#include &quot;ADM_preview.h&quot;
+
 extern void    UI_purge(void );
 //____________________________________
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/guiplay.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/guiplay.cpp	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/guiplay.cpp	2008-05-24 19:16:19 UTC (rev 4062)
@@ -39,7 +39,7 @@
 #include &quot;ADM_userInterfaces/ADM_render/GUI_render.h&quot;
 #include &quot;ADM_audiofilter/audioeng_buildfilters.h&quot;
 #include &quot;ADM_libraries/ADM_utilities/avidemutils.h&quot;
-
+#include &quot;ADM_preview.h&quot;
 //___________________________________
 #define AUDIO_PRELOAD 150
 //___________________________________

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoFilters/AvisynthResize/ADM_vidResize.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoFilters/AvisynthResize/ADM_vidResize.cpp	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoFilters/AvisynthResize/ADM_vidResize.cpp	2008-05-24 19:16:19 UTC (rev 4062)
@@ -34,7 +34,7 @@
 static FILTER_PARAM mpresizeParam={3,{&quot;w&quot;,&quot;h&quot;,&quot;algo&quot;}};
 
 //********** Register chunk ************
-VF_DEFINE_FILTER(AVDMVideoStreamResize,mpresizeParam,
+VF_DEFINE_FILTER_UI(AVDMVideoStreamResize,mpresizeParam,
                 resize,
                 QT_TR_NOOP(&quot;Resize&quot;),
                 1,

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoFilters/CNR2/ADM_vidCNR2.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoFilters/CNR2/ADM_vidCNR2.cpp	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoFilters/CNR2/ADM_vidCNR2.cpp	2008-05-24 19:16:19 UTC (rev 4062)
@@ -77,7 +77,7 @@
 
 //REGISTERX(VF_NOISE, &quot;cnr2&quot;,QT_TR_NOOP(&quot;Cnr2&quot;),
 //QT_TR_NOOP(&quot;Chroma noise reduction filter by MarcFD/Tritical.&quot;),VF_CNR2,1,cnr2_create,cnr2_script);
-VF_DEFINE_FILTER(vidCNR2,cnr2_template,
+VF_DEFINE_FILTER_UI(vidCNR2,cnr2_template,
                 cnr2,
                 QT_TR_NOOP(&quot;Cnr2&quot;),
                 1,

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoFilters/ChromaShift/ADM_vidChromaShift.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoFilters/ChromaShift/ADM_vidChromaShift.cpp	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoFilters/ChromaShift/ADM_vidChromaShift.cpp	2008-05-24 19:16:19 UTC (rev 4062)
@@ -32,7 +32,7 @@
 SCRIPT_CREATE(chromashift_script,ADMVideoChromaShift,cshiftParam);
 BUILD_CREATE(create_chromashift,ADMVideoChromaShift);
 */
-VF_DEFINE_FILTER(ADMVideoChromaShift,cshiftParam,
+VF_DEFINE_FILTER_UI(ADMVideoChromaShift,cshiftParam,
     chromashift,
                 QT_TR_NOOP(&quot;Chroma shift&quot;),
                 1,

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoFilters/Equalizer/ADM_vidEqualizer.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoFilters/Equalizer/ADM_vidEqualizer.cpp	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoFilters/Equalizer/ADM_vidEqualizer.cpp	2008-05-24 19:16:19 UTC (rev 4062)
@@ -18,7 +18,7 @@
 					,&quot;4&quot;,&quot;5&quot;,&quot;6&quot;,&quot;7&quot;}};
 //REGISTERX(VF_COLORS, &quot;equalizer&quot;,QT_TR_NOOP(&quot;Luma equalizer&quot;),
 //QT_TR_NOOP(&quot;Luma correction filter with histogram.&quot;),VF_EQUALIZER,1,equalizer_create,equalizer_script);
-VF_DEFINE_FILTER(vidEqualizer,equalizer_template,
+VF_DEFINE_FILTER_UI(vidEqualizer,equalizer_template,
                 equalizer,
                 QT_TR_NOOP(&quot;Luma equalizer&quot;),
                 1,

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoFilters/MPDelogo/ADM_vidMPdelogo.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoFilters/MPDelogo/ADM_vidMPdelogo.cpp	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoFilters/MPDelogo/ADM_vidMPdelogo.cpp	2008-05-24 19:16:19 UTC (rev 4062)
@@ -48,8 +48,8 @@
 //REGISTERX(VF_MISC, &quot;mpdelogo&quot;,QT_TR_NOOP(&quot;MPlayer delogo&quot;),
 //QT_TR_NOOP(&quot;Blend a logo by interpolating its surrounding box.&quot;),VF_MPDELOGO,1,mpdelogo_create,mpdelogo_script);
 //******************************************
-VF_DEFINE_FILTER(ADMVideoMPdelogo,mpdelogoParam,
-    mpdelogo,
+VF_DEFINE_FILTER_UI(ADMVideoMPdelogo,mpdelogoParam,
+                mpdelogo,
                 QT_TR_NOOP(&quot;MPlayer delogo&quot;),
                 1,
                 VF_MISC,

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoFilters/MplayerResize/ADM_vidMPLResize.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoFilters/MplayerResize/ADM_vidMPLResize.cpp	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoFilters/MplayerResize/ADM_vidMPLResize.cpp	2008-05-24 19:16:19 UTC (rev 4062)
@@ -79,7 +79,7 @@
     
 
 //********** Register chunk ************
-VF_DEFINE_FILTER(AVDMVideoStreamMPResize,mpresizeParam,
+VF_DEFINE_FILTER_UI(AVDMVideoStreamMPResize,mpresizeParam,
                 mpresize,
                 QT_TR_NOOP(&quot;MPlayer resize&quot;),
                 1,

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoFilters/colorYUV/ADM_vidColorYuv.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoFilters/colorYUV/ADM_vidColorYuv.cpp	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoFilters/colorYUV/ADM_vidColorYuv.cpp	2008-05-24 19:16:19 UTC (rev 4062)
@@ -64,7 +64,7 @@
 //    (&quot;Alter colors (auto white balance etc...). Ported from Avisynth.&quot;),VF_COLOR_YUV,1,coloryuv_create,coloryuv_script);
 
 //******************************************
-VF_DEFINE_FILTER(ADMVideoColorYuv,coloryuv_template,
+VF_DEFINE_FILTER_UI(ADMVideoColorYuv,coloryuv_template,
                 coloryuv,
                 QT_TR_NOOP(&quot;Avisynth ColorYUV&quot;),
                 1,

Modified: branches/avidemux_2.5_branch_gruntster/cmake/vf_plugin_gtk.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/vf_plugin_gtk.cmake	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/cmake/vf_plugin_gtk.cmake	2008-05-24 19:16:19 UTC (rev 4062)
@@ -1,4 +1,4 @@
-MACRO(INIT_VIDEOFILTER_PLUGIN_GTK  lib  _srcsGtk _srcsCommon)
+MACRO(INIT_VIDEOFILTER_PLUGIN_GTK  lib  _srcsGtk )
 INCLUDE(admCheckGtk)
 INCLUDE(admCheckGettext)
 
@@ -15,7 +15,7 @@
         
         ADD_DEFINITIONS(${GTK_CFLAGS})
 
-        ADD_LIBRARY(${lib} SHARED ${_srcsCommon} ${_srcsGtk})
+        ADD_LIBRARY(${lib} SHARED ${ARGN} ${_srcsGtk})
         INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR}/ ../../../ADM_UIs/ADM_GTK/include/)
         TARGET_LINK_LIBRARIES( ${lib} ADM_UIGtk ADM_render_gtk)
         TARGET_LINK_LIBRARIES(${lib} ${GTK_LDFLAGS} ${GTHREAD_LDFLAGS})

Modified: branches/avidemux_2.5_branch_gruntster/cmake/vf_plugin_qt4.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/vf_plugin_qt4.cmake	2008-05-23 17:03:09 UTC (rev 4061)
+++ branches/avidemux_2.5_branch_gruntster/cmake/vf_plugin_qt4.cmake	2008-05-24 19:16:19 UTC (rev 4062)
@@ -1,4 +1,4 @@
-MACRO(INIT_VIDEOFILTER_PLUGIN_QT4  lib  _srcsQt _srcQt_ui _srcsCommon)
+MACRO(INIT_VIDEOFILTER_PLUGIN_QT4  lib  _srcsQt _srcQt_ui )
 	INCLUDE(admCheckQt4)
 
 	checkQt4()
@@ -11,7 +11,7 @@
 		QT4_WRAP_UI(qt4_ui qt4/${_srcQt_ui}.ui)
 		QT4_WRAP_CPP(qt4_cpp qt4/${_srcQt_ui}.h)
 
-		ADD_LIBRARY(${lib} SHARED ${_srcsCommon} ${_srcsQt} ${qt4_cpp} ${qt4_ui})
+		ADD_LIBRARY(${lib} SHARED ${ARGN} ${_srcsQt} ${qt4_cpp} ${qt4_ui})
 		ADD_TARGET_CFLAGS(${lib} &quot;-DADM_UI_TYPE_BUILD=4&quot;)
 
 		TARGET_LINK_LIBRARIES( ${lib} ADM_UIQT4  ADM_render_qt4)


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001318.html">[Avidemux-svn-commit] r4061 - in	branches/avidemux_2.5_branch_gruntster: .	avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264
</A></li>
	<LI>Next message: <A HREF="001320.html">[Avidemux-svn-commit] r4063 - in	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_CLI:	. include
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1319">[ date ]</a>
              <a href="thread.html#1319">[ thread ]</a>
              <a href="subject.html#1319">[ subject ]</a>
              <a href="author.html#1319">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">More information about the Avidemux-svn-commit
mailing list</a><br>
</body></html>
