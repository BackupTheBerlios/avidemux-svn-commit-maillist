<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Avidemux-svn-commit] r7005 - in branches/avidemux_2.6_branch_mean:	avidemux_plugins/ADM_audioEncoders/aften	avidemux_plugins/ADM_audioEncoders/faac	avidemux_plugins/ADM_audioEncoders/lame	avidemux_plugins/ADM_audioEncoders/lavcodec	avidemux_plugins/ADM_audioEncoders/pcm	avidemux_plugins/ADM_audioEncoders/twolame	avidemux_plugins/ADM_audioEncoders/vorbis cmake
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/avidemux-svn-commit/2011-February/index.html" >
   <LINK REL="made" HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r7005%20-%20in%20branches/avidemux_2.6_branch_mean%3A%0A%09avidemux_plugins/ADM_audioEncoders/aften%0A%09avidemux_plugins/ADM_audioEncoders/faac%0A%09avidemux_plugins/ADM_audioEncoders/lame%0A%09avidemux_plugins/ADM_audioEncoders/lavcodec%0A%09avidemux_plugins/ADM_audioEncoders/pcm%0A%09avidemux_plugins/ADM_audioEncoders/twolame%0A%09avidemux_plugins/ADM_audioEncoders/vorbis%20cmake&In-Reply-To=%3C20110217190500.37A4E4813EB%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004176.html">
   <LINK REL="Next"  HREF="004178.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Avidemux-svn-commit] r7005 - in branches/avidemux_2.6_branch_mean:	avidemux_plugins/ADM_audioEncoders/aften	avidemux_plugins/ADM_audioEncoders/faac	avidemux_plugins/ADM_audioEncoders/lame	avidemux_plugins/ADM_audioEncoders/lavcodec	avidemux_plugins/ADM_audioEncoders/pcm	avidemux_plugins/ADM_audioEncoders/twolame	avidemux_plugins/ADM_audioEncoders/vorbis cmake</H1>
    <B>mean at mail.berlios.de</B> 
    <A HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r7005%20-%20in%20branches/avidemux_2.6_branch_mean%3A%0A%09avidemux_plugins/ADM_audioEncoders/aften%0A%09avidemux_plugins/ADM_audioEncoders/faac%0A%09avidemux_plugins/ADM_audioEncoders/lame%0A%09avidemux_plugins/ADM_audioEncoders/lavcodec%0A%09avidemux_plugins/ADM_audioEncoders/pcm%0A%09avidemux_plugins/ADM_audioEncoders/twolame%0A%09avidemux_plugins/ADM_audioEncoders/vorbis%20cmake&In-Reply-To=%3C20110217190500.37A4E4813EB%40sheep.berlios.de%3E"
       TITLE="[Avidemux-svn-commit] r7005 - in branches/avidemux_2.6_branch_mean:	avidemux_plugins/ADM_audioEncoders/aften	avidemux_plugins/ADM_audioEncoders/faac	avidemux_plugins/ADM_audioEncoders/lame	avidemux_plugins/ADM_audioEncoders/lavcodec	avidemux_plugins/ADM_audioEncoders/pcm	avidemux_plugins/ADM_audioEncoders/twolame	avidemux_plugins/ADM_audioEncoders/vorbis cmake">mean at mail.berlios.de
       </A><BR>
    <I>Thu Feb 17 20:05:00 CET 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="004176.html">[Avidemux-svn-commit] r7004 -	branches/avidemux_2.6_branch_mean/cmake
</A></li>
        <LI>Next message: <A HREF="004178.html">[Avidemux-svn-commit] r7006 - in branches/avidemux_2.6_branch_mean: avidemux_plugins/ADM_audioDevices/Alsa avidemux_plugins/ADM_audioDevices/Arts avidemux_plugins/ADM_audioDevices/Esd avidemux_plugins/ADM_audioDevices/Jack avidemux_plugins/ADM_audioDevices/Oss avidemux_plugins/ADM_audioDevices/PulseAudioSimple avidemux_plugins/ADM_audioDevices/Sdl avidemux_plugins/ADM_audioDevices/Win32 avidemux_plugins/ADM_demuxers/Asf avidemux_plugins/ADM_demuxers/AvsProxy avidemux_plugins/ADM_demuxers/Flv avidemux_plugins/ADM_demuxers/Matroska avidemux_plugins/ADM_demuxers/Mp4 avidemux_plugins/ADM_demuxers/MpegPS avidemux_plugins/ADM_demuxers/MpegTS avidemux_plugins/ADM_demuxers/Mxf avidemux_plugins/ADM_demuxers/OpenDml avidemux_plugins/ADM_demuxers/Pictures avidemux_plugins/ADM_muxers/muxerAvi avidemux_plugins/ADM_muxers/muxerDummy avidemux_plugins/ADM_muxers/muxerFlv avidemux_plugins/ADM_muxers/muxerMkv avidemux_plugins/ADM_muxers/muxerMp4 avidemux_plugins/ADM_muxers/muxerMp4v2 avidemux_plugins/ADM_m uxers/muxerMplex avidemux_plugins/ADM_muxers/muxerRaw avidemux_plugins/ADM_muxers/muxerffPS avidemux_plugins/ADM_muxers/muxerffTS cmake
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4177">[ date ]</a>
              <a href="thread.html#4177">[ thread ]</a>
              <a href="subject.html#4177">[ subject ]</a>
              <a href="author.html#4177">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: mean
Date: 2011-02-17 20:04:59 +0100 (Thu, 17 Feb 2011)
New Revision: 7005

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/aften/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/faac/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lame/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lavcodec/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/pcm/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/twolame/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/vorbis/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/cmake/ae_plugin.cmake
Log:
[build] as-needed-ify audio encoder

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/aften/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/aften/CMakeLists.txt	2011-02-17 19:04:57 UTC (rev 7004)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/aften/CMakeLists.txt	2011-02-17 19:04:59 UTC (rev 7005)
@@ -2,7 +2,7 @@
 
 	SET(ADM_ae_aften_SRCS audioencoder_aften.cpp)
 
-	ADD_LIBRARY(ADM_ae_aften SHARED ${ADM_ae_aften_SRCS})
+	ADD_AUDIO_ENCODER(ADM_ae_aften ${ADM_ae_aften_SRCS})
 
 	TARGET_LINK_LIBRARIES(ADM_ae_aften ${AFTEN_LIBRARY_DIR})
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/faac/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/faac/CMakeLists.txt	2011-02-17 19:04:57 UTC (rev 7004)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/faac/CMakeLists.txt	2011-02-17 19:04:59 UTC (rev 7005)
@@ -2,7 +2,7 @@
 
 	SET(ADM_ae_faac_SRCS audioencoder_faac.cpp)
 
-	ADD_LIBRARY(ADM_ae_faac SHARED ${ADM_ae_faac_SRCS})
+	ADD_AUDIO_ENCODER(ADM_ae_faac ${ADM_ae_faac_SRCS})
 
         TARGET_LINK_LIBRARIES(ADM_ae_faac ${FAAC_LIBRARY_DIR})
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lame/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lame/CMakeLists.txt	2011-02-17 19:04:57 UTC (rev 7004)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lame/CMakeLists.txt	2011-02-17 19:04:59 UTC (rev 7005)
@@ -2,7 +2,7 @@
 
 	SET(ADM_ae_lame_SRCS audioencoder_lame.cpp )
 
-	ADD_LIBRARY(ADM_ae_lame SHARED ${ADM_ae_lame_SRCS})
+	ADD_AUDIO_ENCODER(ADM_ae_lame ${ADM_ae_lame_SRCS})
 
 	TARGET_LINK_LIBRARIES(ADM_ae_lame ${LAME_LIBRARY_DIR})
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lavcodec/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lavcodec/CMakeLists.txt	2011-02-17 19:04:57 UTC (rev 7004)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lavcodec/CMakeLists.txt	2011-02-17 19:04:59 UTC (rev 7005)
@@ -1,30 +1,19 @@
 	INCLUDE(ae_plugin)
 	include_directories(.)
 #====
-	SET(ADM_ae_lav_mp2_SRCS audioencoder_lavcodec.cpp)
+MACRO(DEFINE_LAV _ext)
+	SET(ADM_ae_lav_${_ext}_SRCS audioencoder_lavcodec.cpp)
 
-	ADD_LIBRARY(ADM_ae_lav_mp2 SHARED ${ADM_ae_lav_mp2_SRCS})
-	ADD_TARGET_CFLAGS(ADM_ae_lav_mp2 &quot;-DADM_AE_SET='\&quot;ADM_lav_mp2.h\&quot;'&quot;)
-	TARGET_LINK_LIBRARIES(ADM_ae_lav_mp2  ADM_libavcodec ADM_libavutil)
+	ADD_AUDIO_ENCODER(ADM_ae_lav_${_ext} ${ADM_ae_lav_${_ext}_SRCS})
+	ADD_TARGET_CFLAGS(ADM_ae_lav_${_ext} &quot;-DADM_AE_SET='\&quot;ADM_lav_${_ext}.h\&quot;'&quot;)
+	TARGET_LINK_LIBRARIES(ADM_ae_lav_${_ext}  ADM_libavcodec ADM_libavutil)
 
-	INIT_AUDIO_ENCODER(ADM_ae_lav_mp2)
-	INSTALL_AUDIOENCODER(ADM_ae_lav_mp2)
-#====
-	SET(ADM_ae_lav_ac3_SRCS audioencoder_lavcodec.cpp)
+	INIT_AUDIO_ENCODER(ADM_ae_lav_${_ext})
+	INSTALL_AUDIOENCODER(ADM_ae_lav_${_ext})
 
-	ADD_LIBRARY(ADM_ae_lav_ac3 SHARED ${ADM_ae_lav_ac3_SRCS})
-	ADD_TARGET_CFLAGS(ADM_ae_lav_ac3 &quot;-DADM_AE_SET='\&quot;ADM_lav_ac3.h\&quot;'&quot;)
-	TARGET_LINK_LIBRARIES(ADM_ae_lav_ac3  ADM_libavcodec ADM_libavutil)
+ENDMACRO(DEFINE_LAV _ext)
 
-	INIT_AUDIO_ENCODER(ADM_ae_lav_ac3)
-	INSTALL_AUDIOENCODER(ADM_ae_lav_ac3)
+	DEFINE_LAV(mp2)
+	DEFINE_LAV(ac3)
+	DEFINE_LAV(aac)
 #====
-	SET(ADM_ae_lav_aac_SRCS audioencoder_lavcodec.cpp)
-
-	ADD_LIBRARY(ADM_ae_lav_aac SHARED ${ADM_ae_lav_aac_SRCS})
-	ADD_TARGET_CFLAGS(ADM_ae_lav_aac &quot;-DADM_AE_SET='\&quot;ADM_lav_aac.h\&quot;'&quot;)
-	TARGET_LINK_LIBRARIES(ADM_ae_lav_aac  ADM_libavcodec ADM_libavutil)
-
-	INIT_AUDIO_ENCODER(ADM_ae_lav_aac)
-	INSTALL_AUDIOENCODER(ADM_ae_lav_aac)
-#====

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/pcm/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/pcm/CMakeLists.txt	2011-02-17 19:04:57 UTC (rev 7004)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/pcm/CMakeLists.txt	2011-02-17 19:04:59 UTC (rev 7005)
@@ -2,7 +2,7 @@
 
 	SET(ADM_ae_pcm_SRCS audioencoder_pcm.cpp)
 
-	ADD_LIBRARY(ADM_ae_pcm SHARED ${ADM_ae_pcm_SRCS})
+	ADD_AUDIO_ENCODER(ADM_ae_pcm ${ADM_ae_pcm_SRCS})
 
 	INIT_AUDIO_ENCODER(ADM_ae_pcm)
 	INSTALL_AUDIOENCODER(ADM_ae_pcm)

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/twolame/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/twolame/CMakeLists.txt	2011-02-17 19:04:57 UTC (rev 7004)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/twolame/CMakeLists.txt	2011-02-17 19:04:59 UTC (rev 7005)
@@ -3,7 +3,7 @@
 
 	SET(ADM_ae_twolame_SRCS audioencoder_twolame.cpp)
 
-	ADD_LIBRARY(ADM_ae_twolame SHARED ${ADM_ae_twolame_SRCS})
+	ADD_AUDIO_ENCODER(ADM_ae_twolame ${ADM_ae_twolame_SRCS})
 
 	TARGET_LINK_LIBRARIES(ADM_ae_twolame ADM_libtwolame )
         include_directories(ADM_libtwolame)

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/vorbis/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/vorbis/CMakeLists.txt	2011-02-17 19:04:57 UTC (rev 7004)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/vorbis/CMakeLists.txt	2011-02-17 19:04:59 UTC (rev 7005)
@@ -2,7 +2,7 @@
 
 	SET(ADM_ae_vorbis_SRCS audioencoder_vorbis.cpp)
 
-	ADD_LIBRARY(ADM_ae_vorbis SHARED ${ADM_ae_vorbis_SRCS})
+	ADD_AUDIO_ENCODER(ADM_ae_vorbis ${ADM_ae_vorbis_SRCS})
 
 	TARGET_LINK_LIBRARIES(ADM_ae_vorbis ${VORBIS_LIBRARY_DIR} ${VORBISENC_LIBRARY_DIR} )
 

Modified: branches/avidemux_2.6_branch_mean/cmake/ae_plugin.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/ae_plugin.cmake	2011-02-17 19:04:57 UTC (rev 7004)
+++ branches/avidemux_2.6_branch_mean/cmake/ae_plugin.cmake	2011-02-17 19:04:59 UTC (rev 7005)
@@ -8,6 +8,10 @@
     ADD_DEFINITIONS(&quot;-DADM_MINIMAL_UI_INTERFACE&quot;)
 
 ENDMACRO(INIT_AUDIO_ENCODER)
+MACRO(ADD_AUDIO_ENCODER name)
+        ADD_LIBRARY(${name} SHARED ${ARGN})
+	AS_NEEDED(${name})
+ENDMACRO(ADD_AUDIO_ENCODER name)
 
 MACRO(INSTALL_AUDIOENCODER _lib)
 	INSTALL(TARGETS ${_lib} DESTINATION &quot;${AVIDEMUX_LIB_DIR}/ADM_plugins6/audioEncoders/&quot;)


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004176.html">[Avidemux-svn-commit] r7004 -	branches/avidemux_2.6_branch_mean/cmake
</A></li>
	<LI>Next message: <A HREF="004178.html">[Avidemux-svn-commit] r7006 - in branches/avidemux_2.6_branch_mean: avidemux_plugins/ADM_audioDevices/Alsa avidemux_plugins/ADM_audioDevices/Arts avidemux_plugins/ADM_audioDevices/Esd avidemux_plugins/ADM_audioDevices/Jack avidemux_plugins/ADM_audioDevices/Oss avidemux_plugins/ADM_audioDevices/PulseAudioSimple avidemux_plugins/ADM_audioDevices/Sdl avidemux_plugins/ADM_audioDevices/Win32 avidemux_plugins/ADM_demuxers/Asf avidemux_plugins/ADM_demuxers/AvsProxy avidemux_plugins/ADM_demuxers/Flv avidemux_plugins/ADM_demuxers/Matroska avidemux_plugins/ADM_demuxers/Mp4 avidemux_plugins/ADM_demuxers/MpegPS avidemux_plugins/ADM_demuxers/MpegTS avidemux_plugins/ADM_demuxers/Mxf avidemux_plugins/ADM_demuxers/OpenDml avidemux_plugins/ADM_demuxers/Pictures avidemux_plugins/ADM_muxers/muxerAvi avidemux_plugins/ADM_muxers/muxerDummy avidemux_plugins/ADM_muxers/muxerFlv avidemux_plugins/ADM_muxers/muxerMkv avidemux_plugins/ADM_muxers/muxerMp4 avidemux_plugins/ADM_muxers/muxerMp4v2 avidemux_plugins/ADM_m uxers/muxerMplex avidemux_plugins/ADM_muxers/muxerRaw avidemux_plugins/ADM_muxers/muxerffPS avidemux_plugins/ADM_muxers/muxerffTS cmake
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4177">[ date ]</a>
              <a href="thread.html#4177">[ thread ]</a>
              <a href="subject.html#4177">[ subject ]</a>
              <a href="author.html#4177">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">More information about the Avidemux-svn-commit
mailing list</a><br>
</body></html>
