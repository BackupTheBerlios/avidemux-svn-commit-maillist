<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Avidemux-svn-commit] r6768 - in	branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreJobs:	include src
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/avidemux-svn-commit/2010-November/index.html" >
   <LINK REL="made" HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r6768%20-%20in%0A%09branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreJobs%3A%0A%09include%20src&In-Reply-To=%3C20101120082821.840AE480B59%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003946.html">
   <LINK REL="Next"  HREF="003948.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Avidemux-svn-commit] r6768 - in	branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreJobs:	include src</H1>
    <B>mean at mail.berlios.de</B> 
    <A HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r6768%20-%20in%0A%09branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreJobs%3A%0A%09include%20src&In-Reply-To=%3C20101120082821.840AE480B59%40sheep.berlios.de%3E"
       TITLE="[Avidemux-svn-commit] r6768 - in	branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreJobs:	include src">mean at mail.berlios.de
       </A><BR>
    <I>Sat Nov 20 09:28:21 CET 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="003946.html">[Avidemux-svn-commit] r6767 -	branches/avidemux_2.6_branch_mean/cmake/sql
</A></li>
        <LI>Next message: <A HREF="003948.html">[Avidemux-svn-commit] r6769 - in branches/avidemux_2.6_branch_mean:	avidemux/qt4/ADM_jobs/src avidemux_core/ADM_coreJobs/include	avidemux_core/ADM_coreJobs/src
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3947">[ date ]</a>
              <a href="thread.html#3947">[ thread ]</a>
              <a href="subject.html#3947">[ subject ]</a>
              <a href="author.html#3947">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: mean
Date: 2010-11-20 09:28:21 +0100 (Sat, 20 Nov 2010)
New Revision: 6768

Added:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreJobs/include/sqlJobs.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreJobs/src/sqlJobs.cpp
Removed:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreJobs/include/libjobdb.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreJobs/src/libjobdb.cpp
Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreJobs/src/CMakeLists.txt
Log:
[sql] Update generated code

Deleted: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreJobs/include/libjobdb.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreJobs/include/libjobdb.h	2010-11-20 08:28:20 UTC (rev 6767)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreJobs/include/libjobdb.h	2010-11-20 08:28:21 UTC (rev 6768)
@@ -1,104 +0,0 @@
-/*
- *	 /home/fx/workspace/gitted/cmake/sql/include/libjobdb.h
- *	 Generated by sql2class v1.9.3 by (C) AH 2000-2006
- *	  using command line
- *	  $ sql2class -build -sqlite -lib libjobdb str-jobs -namespace db -overwrite -prefix /home/fx/workspace/gitted/cmake/sql/
- *	 Date: Sat Nov  6 16:51:41 2010
- */
-
-/*
-Copyright (C) 2001-2006  Anders Hedstrom (<A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">grymse at alhem.net</A>)
-
-This program is free software; you can redistribute it and/or
-modify it under the terms of the GNU General Public License
-as published by the Free Software Foundation; either version 2
-of the License, or (at your option) any later version.
-
-This program is distributed in the hope that it will be useful,
-but WITHOUT ANY WARRANTY; without even the implied warranty of
-MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-GNU General Public License for more details.
-
-You should have received a copy of the GNU General Public License
-along with this program; if not, write to the Free Software
-Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
-*/
-
-#include &lt;stdio.h&gt;
-#include &lt;stdlib.h&gt;
-#include &lt;string.h&gt;
-#include &lt;ADM_sqlite3.h&gt;
-#include &lt;libsqlitewrapped.h&gt;
-#include &lt;map&gt;
-
-#include &lt;vector&gt;
-#include &lt;string&gt;
-
-#ifndef _LIBJOBDB_H
-#define _LIBJOBDB_H
-
-#ifdef _WIN32
-#define strncasecmp strnicmp
-#define strcasecmp stricmp
-#endif // _WIN32
-
-/**
- **  Class 'Jobs' and 'cJobs'
- **/
-
-namespace db
-{
-class Jobs {
-public:
-	Jobs(Database *);
-	Jobs(Database *,const std::string&amp; );
-	Jobs(Database *,Query *,int = 0 /* offset */);
-	Jobs(Database&amp;,long id);
-	~Jobs();
-	Database&amp; GetDatabase() { return *database; }
-
-	unsigned long long int insert();
-	void update();
-	void save();
-	void erase();
-	std::string xml();
-	std::string xml(const std::string&amp; ,const std::string&amp; );
-	size_t num_cols();
-
-	long GetId() { return this -&gt; id; }
-	void SetId(long x) { this -&gt; id = x; }
-	const char *GetJscript() { return this -&gt; jscript.c_str(); }
-	void SetJscript(const std::string&amp;  x) { this -&gt; jscript = x; }
-	const char *GetJobname() { return this -&gt; jobname.c_str(); }
-	void SetJobname(const std::string&amp;  x) { this -&gt; jobname = x; }
-	const char *GetOutputfile() { return this -&gt; outputfile.c_str(); }
-	void SetOutputfile(const std::string&amp;  x) { this -&gt; outputfile = x; }
-	long GetStatus() { return this -&gt; status; }
-	void SetStatus(long x) { this -&gt; status = x; }
-	const char *GetStarttime() { return this -&gt; starttime.c_str(); }
-	void SetStarttime(const std::string&amp;  x) { this -&gt; starttime = x; }
-	const char *GetEndtime() { return this -&gt; endtime.c_str(); }
-	void SetEndtime(const std::string&amp;  x) { this -&gt; endtime = x; }
-
-	// table columns
-private:
-	long                     id; // integer
-	std::string              jscript; // varchar(100)
-	std::string              jobname; // varchar(100)
-	std::string              outputfile; // varchar(256)
-	long                     status; // integer
-	std::string              starttime; // date
-	std::string              endtime; // date
-	//
-	void clear();
-	void spawn(const std::string&amp; );
-	void spawn(Query *,int = 0 /* offset */);
-	void select(const std::string&amp; );
-	void update(long id);
-	//
-	Database *database;
-	short new_object;
-}; // End of class 'Jobs'
-
-} // end of namespace
-#endif // _LIBJOBDB_H

Copied: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreJobs/include/sqlJobs.h (from rev 6767, branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreJobs/include/libjobdb.h)
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreJobs/include/sqlJobs.h	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreJobs/include/sqlJobs.h	2010-11-20 08:28:21 UTC (rev 6768)
@@ -0,0 +1,142 @@
+/*
+ *	 /home/fx/workspace/gitted/cmake/sql/include/sqlJobs.h
+ *	 Generated by sql2class v1.9.3 by (C) AH 2000-2006
+ *	  using command line
+ *	  $ sql2class -sqlite -build -global -prefix /home/fx/workspace/gitted/cmake/sql -lib sqlJobs -namespace db -overwrite dump
+ *	 Date: Fri Nov 19 08:03:54 2010
+ */
+
+/*
+Copyright (C) 2001-2006  Anders Hedstrom (<A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">grymse at alhem.net</A>)
+
+This program is free software; you can redistribute it and/or
+modify it under the terms of the GNU General Public License
+as published by the Free Software Foundation; either version 2
+of the License, or (at your option) any later version.
+
+This program is distributed in the hope that it will be useful,
+but WITHOUT ANY WARRANTY; without even the implied warranty of
+MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+GNU General Public License for more details.
+
+You should have received a copy of the GNU General Public License
+along with this program; if not, write to the Free Software
+Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
+*/
+
+#include &lt;stdio.h&gt;
+#include &lt;stdlib.h&gt;
+#include &lt;string.h&gt;
+#include &lt;ADM_sqlite3.h&gt;
+#include &lt;libsqlitewrapped.h&gt;
+#include &lt;map&gt;
+
+#include &lt;vector&gt;
+#include &lt;string&gt;
+
+#ifndef _SQLJOBS_H
+#define _SQLJOBS_H
+
+#ifdef _WIN32
+#define strncasecmp strnicmp
+#define strcasecmp stricmp
+#endif // _WIN32
+
+/**
+ **  Class 'Version' and 'cVersion'
+ **/
+
+namespace db
+{
+class Version {
+public:
+	Version(Database *);
+	Version(Database *,const std::string&amp; );
+	Version(Database *,Query *,int = 0 /* offset */);
+	~Version();
+	Database&amp; GetDatabase() { return *database; }
+
+	unsigned long long int insert();
+	void save();
+	std::string xml();
+	std::string xml(const std::string&amp; ,const std::string&amp; );
+	size_t num_cols();
+
+	long GetValue() { return this -&gt; value; }
+	void SetValue(long x) { this -&gt; value = x; }
+
+	// table columns
+private:
+	long                     value; // integer
+	//
+	void clear();
+	void spawn(const std::string&amp; );
+	void spawn(Query *,int = 0 /* offset */);
+	void select(const std::string&amp; );
+	//
+	Database *database;
+	short new_object;
+}; // End of class 'Version'
+
+} // end of namespace
+
+/**
+ **  Class 'Jobs' and 'cJobs'
+ **/
+
+namespace db
+{
+class Jobs {
+public:
+	Jobs(Database *);
+	Jobs(Database *,const std::string&amp; );
+	Jobs(Database *,Query *,int = 0 /* offset */);
+	Jobs(Database&amp;,long id);
+	~Jobs();
+	Database&amp; GetDatabase() { return *database; }
+
+	unsigned long long int insert();
+	void update();
+	void save();
+	void erase();
+	std::string xml();
+	std::string xml(const std::string&amp; ,const std::string&amp; );
+	size_t num_cols();
+
+	long GetId() { return this -&gt; id; }
+	void SetId(long x) { this -&gt; id = x; }
+	const char *GetJscript() { return this -&gt; jscript.c_str(); }
+	void SetJscript(const std::string&amp;  x) { this -&gt; jscript = x; }
+	const char *GetJobname() { return this -&gt; jobname.c_str(); }
+	void SetJobname(const std::string&amp;  x) { this -&gt; jobname = x; }
+	const char *GetOutputfile() { return this -&gt; outputfile.c_str(); }
+	void SetOutputfile(const std::string&amp;  x) { this -&gt; outputfile = x; }
+	long GetStatus() { return this -&gt; status; }
+	void SetStatus(long x) { this -&gt; status = x; }
+	long GetStarttime() { return this -&gt; starttime; }
+	void SetStarttime(long x) { this -&gt; starttime = x; }
+	long GetEndtime() { return this -&gt; endtime; }
+	void SetEndtime(long x) { this -&gt; endtime = x; }
+
+	// table columns
+private:
+	long                     id; // integer
+	std::string              jscript; // varchar(100)
+	std::string              jobname; // varchar(100)
+	std::string              outputfile; // varchar(256)
+	long                     status; // integer
+	long                     starttime; // integer
+	long                     endtime; // integer
+	//
+	void clear();
+	void spawn(const std::string&amp; );
+	void spawn(Query *,int = 0 /* offset */);
+	void select(const std::string&amp; );
+	void update(long id);
+	//
+	Database *database;
+	short new_object;
+}; // End of class 'Jobs'
+
+} // end of namespace
+#endif // _SQLJOBS_H

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreJobs/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreJobs/src/CMakeLists.txt	2010-11-20 08:28:20 UTC (rev 6767)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreJobs/src/CMakeLists.txt	2010-11-20 08:28:21 UTC (rev 6768)
@@ -1,7 +1,7 @@
 SET(ADM_coreJobs_SRCS 
         ADM_coreJobs.cpp
         sqlite3.c
-        libjobdb.cpp
+        sqlJobs.cpp
         Database.cpp
         Query.cpp
         StderrLog.cpp

Deleted: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreJobs/src/libjobdb.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreJobs/src/libjobdb.cpp	2010-11-20 08:28:20 UTC (rev 6767)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreJobs/src/libjobdb.cpp	2010-11-20 08:28:21 UTC (rev 6768)
@@ -1,264 +0,0 @@
-/*
- *	 /home/fx/workspace/gitted/cmake/sql/src/libjobdb/libjobdb.cpp
- *	 Generated by sql2class v1.9.3 by (C) AH 2000-2006
- *	  using command line
- *	  $ sql2class -build -sqlite -lib libjobdb str-jobs -namespace db -overwrite -prefix /home/fx/workspace/gitted/cmake/sql/
- *	 Date: Sat Nov  6 16:51:41 2010
- */
-
-/*
-Copyright (C) 2001-2006  Anders Hedstrom (<A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">grymse at alhem.net</A>)
-
-This program is free software; you can redistribute it and/or
-modify it under the terms of the GNU General Public License
-as published by the Free Software Foundation; either version 2
-of the License, or (at your option) any later version.
-
-This program is distributed in the hope that it will be useful,
-but WITHOUT ANY WARRANTY; without even the implied warranty of
-MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-GNU General Public License for more details.
-
-You should have received a copy of the GNU General Public License
-along with this program; if not, write to the Free Software
-Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
-*/
-#include &lt;libjobdb.h&gt;
-
-namespace db {
-
-/**
- **  Begin class 'Jobs'
- **/
-
-Jobs::Jobs(Database *db)
-{
-	database = db;
-	new_object = 1;
-	clear();
-}
-
-
-Jobs::Jobs(Database *db,const std::string&amp; sql)
-{
-	database = db;
-	new_object = 1;
-	spawn(sql);
-}
-
-
-Jobs::Jobs(Database *db,Query *qd,int offset)
-{
-	database = db;
-	new_object = 0;
-	spawn(qd, offset);
-}
-
-
-Jobs::Jobs(Database&amp; db,long i_id):database(&amp;db),new_object(1)
-{
-	Query q(*database);
-	std::string sql = &quot;select * from jobs where &quot;;
-	{
-		char slask[100];
-		sprintf(slask,&quot;id='%ld'&quot;,i_id);
-		sql += slask;
-	}
-	spawn(sql);
-}
-
-
-Jobs::~Jobs()
-{
-}
-
-
-void Jobs::select(const std::string&amp; sql)
-{
-	spawn(sql);
-}
-
-
-unsigned long long int Jobs::insert()
-{
-	Query q(*database);
-	std::string sql;
-
-	sql = &quot;insert into jobs(jscript,jobname,outputFile,status,startTime,endTime)&quot;;
-	sql += &quot; values('&quot; + q.GetDatabase().safestr(this -&gt; jscript) + &quot;'&quot;;
-	sql += &quot;, '&quot; + q.GetDatabase().safestr(this -&gt; jobname) + &quot;'&quot;;
-	sql += &quot;, '&quot; + q.GetDatabase().safestr(this -&gt; outputfile) + &quot;'&quot;;
-	{
-		char slask[100];
-		sprintf(slask,&quot;, %ld&quot;,this -&gt; status);
-		sql += slask;
-	}
-	sql += &quot;, '&quot; + q.GetDatabase().safestr(this -&gt; starttime) + &quot;'&quot;;
-	sql += &quot;, '&quot; + q.GetDatabase().safestr(this -&gt; endtime) + &quot;'&quot;;
-	sql += &quot;)&quot;;
-	q.execute(sql);
-	new_object = 0;
-	unsigned long long int inserted_id = q.insert_id();
-	id = inserted_id;
-	return inserted_id;
-}
-
-
-void Jobs::update()
-{
-	update(this -&gt; id);
-}
-
-
-void Jobs::update(long i_id)
-{
-	Query q(*database);
-	std::string sql;
-	sql += &quot;update jobs set jscript='&quot; + q.GetDatabase().safestr(this -&gt; jscript) + &quot;'&quot;;
-	sql += &quot;, jobname='&quot; + q.GetDatabase().safestr(this -&gt; jobname) + &quot;'&quot;;
-	sql += &quot;, outputFile='&quot; + q.GetDatabase().safestr(this -&gt; outputfile) + &quot;'&quot;;
-	{
-		char slask[200];
-		sprintf(slask,&quot;, status=%ld&quot;,this -&gt; status);
-		sql += slask;
-	}
-	sql += &quot;, startTime='&quot; + q.GetDatabase().safestr(this -&gt; starttime) + &quot;'&quot;;
-	sql += &quot;, endTime='&quot; + q.GetDatabase().safestr(this -&gt; endtime) + &quot;'&quot;;
-	{
-		char slask[200];
-		sprintf(slask,&quot; where id='%ld'&quot;,i_id);
-		sql += slask;
-	}
-	q.execute(sql);
-}
-
-
-void Jobs::save()
-{
-	if (new_object)
-		insert();
-	else
-		update();
-}
-
-
-void Jobs::erase()
-{
-	if (!new_object)
-	{
-		std::string sql = &quot;delete from jobs where&quot;;
-		Query q(*database);
-		{
-			char slask[200];
-			sprintf(slask,&quot; id='%ld'&quot;,this -&gt; id);
-			sql += slask;
-		}
-		q.execute(sql);
-	}
-}
-
-
-std::string Jobs::xml()
-{
-	Query q(*database);
-	std::string dest;
-	char slask[200];
-	dest = &quot;&lt;JOBS&gt;&quot;;
-	sprintf(slask,&quot;&lt;ID&gt;%ld&lt;/ID&gt;&quot;,this -&gt; id);
-	dest += slask;
-	dest += &quot;&lt;JSCRIPT&gt;&quot; + q.GetDatabase().xmlsafestr(this -&gt; jscript) + &quot;&lt;/JSCRIPT&gt;&quot;;
-	dest += &quot;&lt;JOBNAME&gt;&quot; + q.GetDatabase().xmlsafestr(this -&gt; jobname) + &quot;&lt;/JOBNAME&gt;&quot;;
-	dest += &quot;&lt;OUTPUTFILE&gt;&quot; + q.GetDatabase().xmlsafestr(this -&gt; outputfile) + &quot;&lt;/OUTPUTFILE&gt;&quot;;
-	sprintf(slask,&quot;&lt;STATUS&gt;%ld&lt;/STATUS&gt;&quot;,this -&gt; status);
-	dest += slask;
-	dest += &quot;&lt;STARTTIME&gt;&quot; + q.GetDatabase().xmlsafestr(this -&gt; starttime) + &quot;&lt;/STARTTIME&gt;&quot;;
-	dest += &quot;&lt;ENDTIME&gt;&quot; + q.GetDatabase().xmlsafestr(this -&gt; endtime) + &quot;&lt;/ENDTIME&gt;&quot;;
-	dest += &quot;&lt;/JOBS&gt;&quot;;
-	return dest;
-}
-
-
-std::string Jobs::xml(const std::string&amp; tag,const std::string&amp; xvalx)
-{
-	Query q(*database);
-	std::string dest;
-	char slask[200];
-	dest = &quot;&lt;JOBS &quot; + tag + &quot;=\&quot;&quot; + xvalx + &quot;\&quot;&gt;&quot;;
-	sprintf(slask,&quot;&lt;ID&gt;%ld&lt;/ID&gt;&quot;,this -&gt; id);
-	dest += slask;
-	dest += &quot;&lt;JSCRIPT&gt;&quot; + q.GetDatabase().xmlsafestr(this -&gt; jscript) + &quot;&lt;/JSCRIPT&gt;&quot;;
-	dest += &quot;&lt;JOBNAME&gt;&quot; + q.GetDatabase().xmlsafestr(this -&gt; jobname) + &quot;&lt;/JOBNAME&gt;&quot;;
-	dest += &quot;&lt;OUTPUTFILE&gt;&quot; + q.GetDatabase().xmlsafestr(this -&gt; outputfile) + &quot;&lt;/OUTPUTFILE&gt;&quot;;
-	sprintf(slask,&quot;&lt;STATUS&gt;%ld&lt;/STATUS&gt;&quot;,this -&gt; status);
-	dest += slask;
-	dest += &quot;&lt;STARTTIME&gt;&quot; + q.GetDatabase().xmlsafestr(this -&gt; starttime) + &quot;&lt;/STARTTIME&gt;&quot;;
-	dest += &quot;&lt;ENDTIME&gt;&quot; + q.GetDatabase().xmlsafestr(this -&gt; endtime) + &quot;&lt;/ENDTIME&gt;&quot;;
-	dest += &quot;&lt;/JOBS&gt;&quot;;
-	return dest;
-}
-
-
-size_t Jobs::num_cols()
-{
-	return 7;
-}
-
-
-void Jobs::clear()
-{
-	this -&gt; id = 0;
-	this -&gt; jscript = &quot;&quot;;
-	this -&gt; jobname = &quot;&quot;;
-	this -&gt; outputfile = &quot;&quot;;
-	this -&gt; status = 0;
-	this -&gt; starttime = &quot;&quot;;
-	this -&gt; endtime = &quot;&quot;;
-}
-
-
-void Jobs::spawn(const std::string&amp; sql)
-{
-	Query q(*database);
-	std::string temp;
-
-	clear();
-
-	if (!strncasecmp(sql.c_str(),&quot;select * &quot;,9))
-	{
-		temp = &quot;select id,jscript,jobname,outputFile,status,startTime,endTime &quot; + sql.substr(9);
-	} else
-		temp = sql;
-	q.get_result(temp);
-	if (q.fetch_row())
-	{
-		this -&gt; id = q.getval(0);																				// 0 - id integer
-		this -&gt; jscript = q.getstr(1);																				// 1 - jscript varchar(100)
-		this -&gt; jobname = q.getstr(2);																				// 2 - jobname varchar(100)
-		this -&gt; outputfile = q.getstr(3);																				// 3 - outputfile varchar(256)
-		this -&gt; status = q.getval(4);																				// 4 - status integer
-		this -&gt; starttime = q.getstr(5);																				// 5 - starttime date
-		this -&gt; endtime = q.getstr(6);																				// 6 - endtime date
-		new_object = 0;
-	} else
-		clear();
-	q.free_result();
-}
-
-
-void Jobs::spawn(Query *qd,int offset)
-{
-	clear();
-
-	this -&gt; id = qd -&gt; getval(0 + offset);																				// 0 - id integer
-	this -&gt; jscript = qd -&gt; getstr(1 + offset);																				// 1 - jscript varchar(100)
-	this -&gt; jobname = qd -&gt; getstr(2 + offset);																				// 2 - jobname varchar(100)
-	this -&gt; outputfile = qd -&gt; getstr(3 + offset);																				// 3 - outputfile varchar(256)
-	this -&gt; status = qd -&gt; getval(4 + offset);																				// 4 - status integer
-	this -&gt; starttime = qd -&gt; getstr(5 + offset);																				// 5 - starttime date
-	this -&gt; endtime = qd -&gt; getstr(6 + offset);																				// 6 - endtime date
-}
-
-
-// End of implementation of class 'Jobs'
-
-} // End of namespace

Copied: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreJobs/src/sqlJobs.cpp (from rev 6767, branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreJobs/src/libjobdb.cpp)
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreJobs/src/sqlJobs.cpp	                        (rev 0)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreJobs/src/sqlJobs.cpp	2010-11-20 08:28:21 UTC (rev 6768)
@@ -0,0 +1,424 @@
+/*
+ *	 /home/fx/workspace/gitted/cmake/sql/src/sqlJobs/sqlJobs.cpp
+ *	 Generated by sql2class v1.9.3 by (C) AH 2000-2006
+ *	  using command line
+ *	  $ sql2class -sqlite -build -global -prefix /home/fx/workspace/gitted/cmake/sql -lib sqlJobs -namespace db -overwrite dump
+ *	 Date: Fri Nov 19 08:03:54 2010
+ */
+
+/*
+Copyright (C) 2001-2006  Anders Hedstrom (<A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">grymse at alhem.net</A>)
+
+This program is free software; you can redistribute it and/or
+modify it under the terms of the GNU General Public License
+as published by the Free Software Foundation; either version 2
+of the License, or (at your option) any later version.
+
+This program is distributed in the hope that it will be useful,
+but WITHOUT ANY WARRANTY; without even the implied warranty of
+MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+GNU General Public License for more details.
+
+You should have received a copy of the GNU General Public License
+along with this program; if not, write to the Free Software
+Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
+*/
+#include &lt;sqlJobs.h&gt;
+
+namespace db {
+
+/**
+ **  Begin class 'Version'
+ **/
+
+Version::Version(Database *db)
+{
+	database = db;
+	new_object = 1;
+	clear();
+}
+
+
+Version::Version(Database *db,const std::string&amp; sql)
+{
+	database = db;
+	new_object = 1;
+	spawn(sql);
+}
+
+
+Version::Version(Database *db,Query *qd,int offset)
+{
+	database = db;
+	new_object = 0;
+	spawn(qd, offset);
+}
+
+
+Version::~Version()
+{
+}
+
+
+void Version::select(const std::string&amp; sql)
+{
+	spawn(sql);
+}
+
+
+unsigned long long int Version::insert()
+{
+	Query q(*database);
+	std::string sql;
+
+	sql = &quot;insert into version(value)&quot;;
+	{
+		char slask[100];
+		sprintf(slask,&quot; values(%ld&quot;,this -&gt; value);
+		sql += slask;
+	}
+	sql += &quot;)&quot;;
+	q.execute(sql);
+	new_object = 0;
+	unsigned long long int inserted_id = q.insert_id();
+	value = inserted_id;
+	return inserted_id;
+}
+
+
+void Version::save()
+{
+	if (new_object)
+		insert();
+}
+
+
+std::string Version::xml()
+{
+	Query q(*database);
+	std::string dest;
+	char slask[200];
+	dest = &quot;&lt;VERSION&gt;&quot;;
+	sprintf(slask,&quot;&lt;VALUE&gt;%ld&lt;/VALUE&gt;&quot;,this -&gt; value);
+	dest += slask;
+	dest += &quot;&lt;/VERSION&gt;&quot;;
+	return dest;
+}
+
+
+std::string Version::xml(const std::string&amp; tag,const std::string&amp; xvalx)
+{
+	Query q(*database);
+	std::string dest;
+	char slask[200];
+	dest = &quot;&lt;VERSION &quot; + tag + &quot;=\&quot;&quot; + xvalx + &quot;\&quot;&gt;&quot;;
+	sprintf(slask,&quot;&lt;VALUE&gt;%ld&lt;/VALUE&gt;&quot;,this -&gt; value);
+	dest += slask;
+	dest += &quot;&lt;/VERSION&gt;&quot;;
+	return dest;
+}
+
+
+size_t Version::num_cols()
+{
+	return 1;
+}
+
+
+void Version::clear()
+{
+	this -&gt; value = 0;
+}
+
+
+void Version::spawn(const std::string&amp; sql)
+{
+	Query q(*database);
+	std::string temp;
+
+	clear();
+
+	if (!strncasecmp(sql.c_str(),&quot;select * &quot;,9))
+	{
+		temp = &quot;select value &quot; + sql.substr(9);
+	} else
+		temp = sql;
+	q.get_result(temp);
+	if (q.fetch_row())
+	{
+		this -&gt; value = q.getval(0);																				// 0 - value integer
+		new_object = 0;
+	} else
+		clear();
+	q.free_result();
+}
+
+
+void Version::spawn(Query *qd,int offset)
+{
+	clear();
+
+	this -&gt; value = qd -&gt; getval(0 + offset);																				// 0 - value integer
+}
+
+
+// End of implementation of class 'Version'
+
+} // End of namespace
+namespace db {
+
+/**
+ **  Begin class 'Jobs'
+ **/
+
+Jobs::Jobs(Database *db)
+{
+	database = db;
+	new_object = 1;
+	clear();
+}
+
+
+Jobs::Jobs(Database *db,const std::string&amp; sql)
+{
+	database = db;
+	new_object = 1;
+	spawn(sql);
+}
+
+
+Jobs::Jobs(Database *db,Query *qd,int offset)
+{
+	database = db;
+	new_object = 0;
+	spawn(qd, offset);
+}
+
+
+Jobs::Jobs(Database&amp; db,long i_id):database(&amp;db),new_object(1)
+{
+	Query q(*database);
+	std::string sql = &quot;select * from jobs where &quot;;
+	{
+		char slask[100];
+		sprintf(slask,&quot;id='%ld'&quot;,i_id);
+		sql += slask;
+	}
+	spawn(sql);
+}
+
+
+Jobs::~Jobs()
+{
+}
+
+
+void Jobs::select(const std::string&amp; sql)
+{
+	spawn(sql);
+}
+
+
+unsigned long long int Jobs::insert()
+{
+	Query q(*database);
+	std::string sql;
+
+	sql = &quot;insert into jobs(jscript,jobname,outputFile,status,startTime,endTime)&quot;;
+	sql += &quot; values('&quot; + q.GetDatabase().safestr(this -&gt; jscript) + &quot;'&quot;;
+	sql += &quot;, '&quot; + q.GetDatabase().safestr(this -&gt; jobname) + &quot;'&quot;;
+	sql += &quot;, '&quot; + q.GetDatabase().safestr(this -&gt; outputfile) + &quot;'&quot;;
+	{
+		char slask[100];
+		sprintf(slask,&quot;, %ld&quot;,this -&gt; status);
+		sql += slask;
+	}
+	{
+		char slask[100];
+		sprintf(slask,&quot;, %ld&quot;,this -&gt; starttime);
+		sql += slask;
+	}
+	{
+		char slask[100];
+		sprintf(slask,&quot;, %ld&quot;,this -&gt; endtime);
+		sql += slask;
+	}
+	sql += &quot;)&quot;;
+	q.execute(sql);
+	new_object = 0;
+	unsigned long long int inserted_id = q.insert_id();
+	id = inserted_id;
+	return inserted_id;
+}
+
+
+void Jobs::update()
+{
+	update(this -&gt; id);
+}
+
+
+void Jobs::update(long i_id)
+{
+	Query q(*database);
+	std::string sql;
+	sql += &quot;update jobs set jscript='&quot; + q.GetDatabase().safestr(this -&gt; jscript) + &quot;'&quot;;
+	sql += &quot;, jobname='&quot; + q.GetDatabase().safestr(this -&gt; jobname) + &quot;'&quot;;
+	sql += &quot;, outputFile='&quot; + q.GetDatabase().safestr(this -&gt; outputfile) + &quot;'&quot;;
+	{
+		char slask[200];
+		sprintf(slask,&quot;, status=%ld&quot;,this -&gt; status);
+		sql += slask;
+	}
+	{
+		char slask[200];
+		sprintf(slask,&quot;, startTime=%ld&quot;,this -&gt; starttime);
+		sql += slask;
+	}
+	{
+		char slask[200];
+		sprintf(slask,&quot;, endTime=%ld&quot;,this -&gt; endtime);
+		sql += slask;
+	}
+	{
+		char slask[200];
+		sprintf(slask,&quot; where id='%ld'&quot;,i_id);
+		sql += slask;
+	}
+	q.execute(sql);
+}
+
+
+void Jobs::save()
+{
+	if (new_object)
+		insert();
+	else
+		update();
+}
+
+
+void Jobs::erase()
+{
+	if (!new_object)
+	{
+		std::string sql = &quot;delete from jobs where&quot;;
+		Query q(*database);
+		{
+			char slask[200];
+			sprintf(slask,&quot; id='%ld'&quot;,this -&gt; id);
+			sql += slask;
+		}
+		q.execute(sql);
+	}
+}
+
+
+std::string Jobs::xml()
+{
+	Query q(*database);
+	std::string dest;
+	char slask[200];
+	dest = &quot;&lt;JOBS&gt;&quot;;
+	sprintf(slask,&quot;&lt;ID&gt;%ld&lt;/ID&gt;&quot;,this -&gt; id);
+	dest += slask;
+	dest += &quot;&lt;JSCRIPT&gt;&quot; + q.GetDatabase().xmlsafestr(this -&gt; jscript) + &quot;&lt;/JSCRIPT&gt;&quot;;
+	dest += &quot;&lt;JOBNAME&gt;&quot; + q.GetDatabase().xmlsafestr(this -&gt; jobname) + &quot;&lt;/JOBNAME&gt;&quot;;
+	dest += &quot;&lt;OUTPUTFILE&gt;&quot; + q.GetDatabase().xmlsafestr(this -&gt; outputfile) + &quot;&lt;/OUTPUTFILE&gt;&quot;;
+	sprintf(slask,&quot;&lt;STATUS&gt;%ld&lt;/STATUS&gt;&quot;,this -&gt; status);
+	dest += slask;
+	sprintf(slask,&quot;&lt;STARTTIME&gt;%ld&lt;/STARTTIME&gt;&quot;,this -&gt; starttime);
+	dest += slask;
+	sprintf(slask,&quot;&lt;ENDTIME&gt;%ld&lt;/ENDTIME&gt;&quot;,this -&gt; endtime);
+	dest += slask;
+	dest += &quot;&lt;/JOBS&gt;&quot;;
+	return dest;
+}
+
+
+std::string Jobs::xml(const std::string&amp; tag,const std::string&amp; xvalx)
+{
+	Query q(*database);
+	std::string dest;
+	char slask[200];
+	dest = &quot;&lt;JOBS &quot; + tag + &quot;=\&quot;&quot; + xvalx + &quot;\&quot;&gt;&quot;;
+	sprintf(slask,&quot;&lt;ID&gt;%ld&lt;/ID&gt;&quot;,this -&gt; id);
+	dest += slask;
+	dest += &quot;&lt;JSCRIPT&gt;&quot; + q.GetDatabase().xmlsafestr(this -&gt; jscript) + &quot;&lt;/JSCRIPT&gt;&quot;;
+	dest += &quot;&lt;JOBNAME&gt;&quot; + q.GetDatabase().xmlsafestr(this -&gt; jobname) + &quot;&lt;/JOBNAME&gt;&quot;;
+	dest += &quot;&lt;OUTPUTFILE&gt;&quot; + q.GetDatabase().xmlsafestr(this -&gt; outputfile) + &quot;&lt;/OUTPUTFILE&gt;&quot;;
+	sprintf(slask,&quot;&lt;STATUS&gt;%ld&lt;/STATUS&gt;&quot;,this -&gt; status);
+	dest += slask;
+	sprintf(slask,&quot;&lt;STARTTIME&gt;%ld&lt;/STARTTIME&gt;&quot;,this -&gt; starttime);
+	dest += slask;
+	sprintf(slask,&quot;&lt;ENDTIME&gt;%ld&lt;/ENDTIME&gt;&quot;,this -&gt; endtime);
+	dest += slask;
+	dest += &quot;&lt;/JOBS&gt;&quot;;
+	return dest;
+}
+
+
+size_t Jobs::num_cols()
+{
+	return 7;
+}
+
+
+void Jobs::clear()
+{
+	this -&gt; id = 0;
+	this -&gt; jscript = &quot;&quot;;
+	this -&gt; jobname = &quot;&quot;;
+	this -&gt; outputfile = &quot;&quot;;
+	this -&gt; status = 0;
+	this -&gt; starttime = 0;
+	this -&gt; endtime = 0;
+}
+
+
+void Jobs::spawn(const std::string&amp; sql)
+{
+	Query q(*database);
+	std::string temp;
+
+	clear();
+
+	if (!strncasecmp(sql.c_str(),&quot;select * &quot;,9))
+	{
+		temp = &quot;select id,jscript,jobname,outputFile,status,startTime,endTime &quot; + sql.substr(9);
+	} else
+		temp = sql;
+	q.get_result(temp);
+	if (q.fetch_row())
+	{
+		this -&gt; id = q.getval(0);																				// 0 - id integer
+		this -&gt; jscript = q.getstr(1);																				// 1 - jscript varchar(100)
+		this -&gt; jobname = q.getstr(2);																				// 2 - jobname varchar(100)
+		this -&gt; outputfile = q.getstr(3);																				// 3 - outputfile varchar(256)
+		this -&gt; status = q.getval(4);																				// 4 - status integer
+		this -&gt; starttime = q.getval(5);																				// 5 - starttime integer
+		this -&gt; endtime = q.getval(6);																				// 6 - endtime integer
+		new_object = 0;
+	} else
+		clear();
+	q.free_result();
+}
+
+
+void Jobs::spawn(Query *qd,int offset)
+{
+	clear();
+
+	this -&gt; id = qd -&gt; getval(0 + offset);																				// 0 - id integer
+	this -&gt; jscript = qd -&gt; getstr(1 + offset);																				// 1 - jscript varchar(100)
+	this -&gt; jobname = qd -&gt; getstr(2 + offset);																				// 2 - jobname varchar(100)
+	this -&gt; outputfile = qd -&gt; getstr(3 + offset);																				// 3 - outputfile varchar(256)
+	this -&gt; status = qd -&gt; getval(4 + offset);																				// 4 - status integer
+	this -&gt; starttime = qd -&gt; getval(5 + offset);																				// 5 - starttime integer
+	this -&gt; endtime = qd -&gt; getval(6 + offset);																				// 6 - endtime integer
+}
+
+
+// End of implementation of class 'Jobs'
+
+} // End of namespace


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003946.html">[Avidemux-svn-commit] r6767 -	branches/avidemux_2.6_branch_mean/cmake/sql
</A></li>
	<LI>Next message: <A HREF="003948.html">[Avidemux-svn-commit] r6769 - in branches/avidemux_2.6_branch_mean:	avidemux/qt4/ADM_jobs/src avidemux_core/ADM_coreJobs/include	avidemux_core/ADM_coreJobs/src
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3947">[ date ]</a>
              <a href="thread.html#3947">[ thread ]</a>
              <a href="subject.html#3947">[ subject ]</a>
              <a href="author.html#3947">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">More information about the Avidemux-svn-commit
mailing list</a><br>
</body></html>
