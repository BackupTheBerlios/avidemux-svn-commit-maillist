<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Avidemux-svn-commit] r5633 - in	branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2:	include src
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/avidemux-svn-commit/2009-December/index.html" >
   <LINK REL="made" HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r5633%20-%20in%0A%09branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2%3A%0A%09include%20src&In-Reply-To=%3C200912091912.nB9JCoi9006233%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002840.html">
   <LINK REL="Next"  HREF="002842.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Avidemux-svn-commit] r5633 - in	branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2:	include src</H1>
    <B>mean at BerliOS</B> 
    <A HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r5633%20-%20in%0A%09branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2%3A%0A%09include%20src&In-Reply-To=%3C200912091912.nB9JCoi9006233%40sheep.berlios.de%3E"
       TITLE="[Avidemux-svn-commit] r5633 - in	branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2:	include src">mean at mail.berlios.de
       </A><BR>
    <I>Wed Dec  9 20:12:50 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="002840.html">[Avidemux-svn-commit] r5631 - in	branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2:	include src
</A></li>
        <LI>Next message: <A HREF="002842.html">[Avidemux-svn-commit] r5634 - in	branches/avidemux_2.6_branch_mean/avidemux: cli	cli/ADM_userInterfaces gtk
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2841">[ date ]</a>
              <a href="thread.html#2841">[ thread ]</a>
              <a href="subject.html#2841">[ subject ]</a>
              <a href="author.html#2841">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: mean
Date: 2009-12-09 20:12:50 +0100 (Wed, 09 Dec 2009)
New Revision: 5633

Added:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_jsTestFactory.h
Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_jsDebug.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_jsDebug.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_jsIf.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_jsIf_js.c
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_jsIf_js.idl
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_jsTestFactory.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_jsTestFactory_js.c
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_jsTestFactory_js.idl
Log:
[js] Hook more functions through jsapigen, it crashes if the function returns something at the moment

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_jsDebug.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_jsDebug.h	2009-12-09 19:12:33 UTC (rev 5632)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_jsDebug.h	2009-12-09 19:12:50 UTC (rev 5633)
@@ -21,6 +21,8 @@
 void jsPopupError(const char *s);
 void jsPopupInfo(const char *s);
 void jsPrint(const char *s);
+void jsPrint2(const char *s);
+void jsHelp(const char *s);
 };
 
 

Added: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_jsTestFactory.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_jsTestFactory.h	2009-12-09 19:12:33 UTC (rev 5632)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_jsTestFactory.h	2009-12-09 19:12:50 UTC (rev 5633)
@@ -0,0 +1,45 @@
+/**
+    \file ADM_jsTestFactory.h
+    \brief  Simple js hook to test factory
+    \author mean (c) 2009 <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
+
+
+*/
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#ifndef ADMJS_FACTORY_H
+#define ADMJS_FACTORY_H
+extern &quot;C&quot;
+{
+bool jsTestCrash(void);
+bool jsTestAssert(void);
+bool jsTestFacNotch(void);
+bool jsTestFacThreadCount(void);
+bool jsTestFacMatrix(void);
+bool jsTestFacMatrix(void);
+bool jsTestFacHex(void);
+bool jsTestFacFrame(void);
+bool jsTestFacTab(void);
+bool jsTestFacText(void);
+bool jsTestFacRoText(void);
+bool jsTestFacSlider(void);
+bool jsTestFacButton(void);
+bool jsTestFacBar(void);
+bool jsTestFacBitrate(void);
+bool jsTestFacDirSel(void);
+bool jsTestFacFile(void);
+bool jsTestFacMenu(void);
+bool jsTestFacToggle(void);
+bool jsTestFacFloat(void);
+bool jsTestFacInt(void);
+};
+
+
+#endif

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_jsDebug.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_jsDebug.cpp	2009-12-09 19:12:33 UTC (rev 5632)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_jsDebug.cpp	2009-12-09 19:12:50 UTC (rev 5633)
@@ -76,6 +76,10 @@
 {// begin print
         jsLog(JS_LOG_NORMAL,&quot;%s&quot;,s);
 }// end print
+void jsPrint2(const char *s)
+{// begin print
+        jsLog(JS_LOG_NORMAL,&quot;%s&quot;,s);
+}// end print
 
 
 static void dumpFunc(JSFunctionSpec *f)

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_jsIf.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_jsIf.cpp	2009-12-09 19:12:33 UTC (rev 5632)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_jsIf.cpp	2009-12-09 19:12:50 UTC (rev 5633)
@@ -32,6 +32,7 @@
 static JSObject   *g_pObject=NULL;
 static JSContext  *g_pCx=NULL;
 static JSRuntime  *g_pRt=NULL;
+/*
 static JSClass global_class = {
    
 &quot;Avidemux&quot;, JSCLASS_HAS_PRIVATE,
@@ -40,8 +41,14 @@
         JS_EnumerateStub, JS_ResolveStub,
         JS_ConvertStub, JS_FinalizeStub
 };
+*/
+   static JSClass global_class = {
+            &quot;global&quot;, JSCLASS_GLOBAL_FLAGS,
+            JS_PropertyStub, JS_PropertyStub, JS_PropertyStub, JS_PropertyStub,
+            JS_EnumerateStub, JS_ResolveStub, JS_ConvertStub, JS_FinalizeStub,
+            JSCLASS_NO_OPTIONAL_MEMBERS
+            };
 
-
 extern void  printJSError(JSContext *cx, const char *message, JSErrorReport *report);
 /**
     \fn parseECMAScript
@@ -141,18 +148,42 @@
     \fn jsRegisterAvidemux
 */
 extern &quot;C&quot; JSFunctionSpec  *jsGetIfFunctions(void);
-static bool jsRegisterAvidemux(JSContext *cx,JSObject *obj)
+extern &quot;C&quot; JSFunctionSpec  *jsGetTestFunctions(void);
+static bool registerOne(const char *name,JSFunctionSpec *s,JSContext *cx,JSObject *obj)
 {
-    
-
-    JSFunctionSpec *ifFunc=jsGetIfFunctions();
-    if (JS_DefineFunctions(cx, obj, ifFunc) != JS_TRUE) 
+    if (JS_DefineFunctions(cx, obj, s) != JS_TRUE) 
     {
-                    ADM_error(&quot;Cannot register jsIf functions\n&quot;);
+            ADM_error(&quot;Cannot register %s functions\n&quot;,name);
+            return false;
     }
-	ADM_warning(&quot;JS_DefineFunctions: Unable to define functions\n&quot;);
-	return true;
+    ADM_info(&quot;Registered %s functions\n&quot;,name);
+    return true;
 }
+static void  dump(JSFunctionSpec *f)
+{
+    while(f-&gt;name)
+    {
+        jsLog(JS_LOG_NORMAL,&quot;    %s&quot;,f-&gt;name);
+        f++;
+    }
+}
+extern &quot;C&quot; 
+{
+void jsHelp(const char *s)
+{
+    if(!s) goto none;
+    if(!strcasecmp(s,&quot;debug&quot;)) return dump(jsGetIfFunctions());
+    if(!strcasecmp(s,&quot;test&quot;)) return dump(jsGetTestFunctions());
+none:
+        jsLog(JS_LOG_NORMAL,&quot;please use help(\&quot;debug\&quot;) or help(\&quot;test\&quot;&quot;);
+}
+}
+static bool jsRegisterAvidemux(JSContext *cx,JSObject *obj)
+{
+        registerOne(&quot;If&quot;,   jsGetIfFunctions(),    cx,obj);
+        registerOne(&quot;Test&quot;, jsGetTestFunctions(),  cx,obj);
+        return true;
+}
 /**
     \fn SpidermonkeyInit
 */
@@ -164,35 +195,38 @@
 	g_pRt = NULL;
 	JSRuntime *rt = JS_NewRuntime(1000000L);
 	g_pRt = rt;
-	if ( rt == NULL )
+	if ( !rt  )
 	{
 		// Do some error reporting
-		printf(&quot;Spidermonkey failed to initialize runtime!\n&quot;);
+		ADM_error(&quot;Spidermonkey failed to initialize runtime!\n&quot;);
+        return false;
 	}
-	else
-	{// begin runtime created
-		g_pCx = JS_NewContext(rt, 8192);
-		if ( g_pCx == NULL )
-		{
-			// Do some error reporting
-			printf(&quot;Spidermonkey failed to initialize context!\n&quot;);
-		}
-		else
-		{// begin context created
-            g_pObject = JS_NewObject(g_pCx, &amp;global_class, 0, 0);
-            
-            if(JS_TRUE!=JS_InitStandardClasses(g_pCx, g_pObject))
-                ADM_error(&quot;Cannot inizialize standard classes\n&quot;);
-			// register error handler
-			JS_SetErrorReporter(g_pCx, printJSError);
-                
-            //register our functions
-            jsRegisterAvidemux(g_pCx,g_pObject);
-            
-			return true;
-		}// end context created
-	}// end runtime created
-	return false;
+	
+// begin runtime created
+    g_pCx = JS_NewContext(rt, 8192);
+    if ( !g_pCx  )
+    {
+        // Do some error reporting
+        ADM_error(&quot;Spidermonkey failed to initialize context!\n&quot;);
+        return false;
+    }
+   
+   // begin context created
+    g_pObject = JS_NewObject(g_pCx, &amp;global_class, 0, 0);
+    
+    if(JS_TRUE!=JS_InitStandardClasses(g_pCx, g_pObject))
+    {
+        ADM_error(&quot;Cannot initialize standard classes\n&quot;);
+        return false;
+    }
+    // register error handler
+    JS_SetErrorReporter(g_pCx, printJSError);
+        
+    //register our functions
+    jsRegisterAvidemux(g_pCx,g_pObject);
+    ADM_info(&quot;Spidermonkey initialized\n&quot;);
+    return true;
+
 }// end SpidermonkeyInit
 /**
     \fn SpidermonkeyDestroy

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_jsIf_js.c
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_jsIf_js.c	2009-12-09 19:12:33 UTC (rev 5632)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_jsIf_js.c	2009-12-09 19:12:50 UTC (rev 5633)
@@ -39,12 +39,12 @@
     int var8;
     jsval var9;
     JSString *var10;
-    jsval var43;
+    jsval var71;
     size_t var11;
     size_t var12;
     int var14;
     jschar *var13;
-    jsval var44;
+    jsval var72;
     JSBool var1;
     var2 = NULL;
     var7 = NULL;
@@ -52,12 +52,12 @@
     var8 = 0;
     var9 = JSVAL_NULL;
     var10 = NULL;
-    var43 = JSVAL_NULL;
+    var71 = JSVAL_NULL;
     var11 = 0;
     var12 = 0;
     var14 = 0;
     var13 = NULL;
-    var44 = JSVAL_NULL;
+    var72 = JSVAL_NULL;
     var1 = JS_FALSE;
     var2 = obj;
     var6 = argc;
@@ -69,8 +69,8 @@
     if (!var10) {
         goto do_return;
     }
-    var43 = STRING_TO_JSVAL(var10);
-    argv[argc+0] = var43;
+    var71 = STRING_TO_JSVAL(var10);
+    argv[argc+0] = var71;
     var11 = JS_GetStringLength(var10);
     var12 = 1;
     var12 += var11;
@@ -80,8 +80,8 @@
     }
     var14 = 1;
     var13 = JS_GetStringChars(var10);
-    var44 = STRING_TO_JSVAL(var10);
-    argv[argc+1] = var44;
+    var72 = STRING_TO_JSVAL(var10);
+    argv[argc+1] = var72;
     {
         size_t i;
         for (i = 0; i &lt; var11; ++i) {
@@ -109,12 +109,12 @@
     int var22;
     jsval var23;
     JSString *var24;
-    jsval var45;
+    jsval var73;
     size_t var25;
     size_t var26;
     int var28;
     jschar *var27;
-    jsval var46;
+    jsval var74;
     JSBool var15;
     var16 = NULL;
     var21 = NULL;
@@ -122,12 +122,12 @@
     var22 = 0;
     var23 = JSVAL_NULL;
     var24 = NULL;
-    var45 = JSVAL_NULL;
+    var73 = JSVAL_NULL;
     var25 = 0;
     var26 = 0;
     var28 = 0;
     var27 = NULL;
-    var46 = JSVAL_NULL;
+    var74 = JSVAL_NULL;
     var15 = JS_FALSE;
     var16 = obj;
     var20 = argc;
@@ -139,8 +139,8 @@
     if (!var24) {
         goto do_return;
     }
-    var45 = STRING_TO_JSVAL(var24);
-    argv[argc+0] = var45;
+    var73 = STRING_TO_JSVAL(var24);
+    argv[argc+0] = var73;
     var25 = JS_GetStringLength(var24);
     var26 = 1;
     var26 += var25;
@@ -150,8 +150,8 @@
     }
     var28 = 1;
     var27 = JS_GetStringChars(var24);
-    var46 = STRING_TO_JSVAL(var24);
-    argv[argc+1] = var46;
+    var74 = STRING_TO_JSVAL(var24);
+    argv[argc+1] = var74;
     {
         size_t i;
         for (i = 0; i &lt; var25; ++i) {
@@ -179,12 +179,12 @@
     int var36;
     jsval var37;
     JSString *var38;
-    jsval var47;
+    jsval var75;
     size_t var39;
     size_t var40;
     int var42;
     jschar *var41;
-    jsval var48;
+    jsval var76;
     JSBool var29;
     var30 = NULL;
     var35 = NULL;
@@ -192,12 +192,12 @@
     var36 = 0;
     var37 = JSVAL_NULL;
     var38 = NULL;
-    var47 = JSVAL_NULL;
+    var75 = JSVAL_NULL;
     var39 = 0;
     var40 = 0;
     var42 = 0;
     var41 = NULL;
-    var48 = JSVAL_NULL;
+    var76 = JSVAL_NULL;
     var29 = JS_FALSE;
     var30 = obj;
     var34 = argc;
@@ -209,8 +209,8 @@
     if (!var38) {
         goto do_return;
     }
-    var47 = STRING_TO_JSVAL(var38);
-    argv[argc+0] = var47;
+    var75 = STRING_TO_JSVAL(var38);
+    argv[argc+0] = var75;
     var39 = JS_GetStringLength(var38);
     var40 = 1;
     var40 += var39;
@@ -220,8 +220,8 @@
     }
     var42 = 1;
     var41 = JS_GetStringChars(var38);
-    var48 = STRING_TO_JSVAL(var38);
-    argv[argc+1] = var48;
+    var76 = STRING_TO_JSVAL(var38);
+    argv[argc+1] = var76;
     {
         size_t i;
         for (i = 0; i &lt; var39; ++i) {
@@ -240,6 +240,146 @@
     }
     return var29;
 }
+static JSBool
+jjprint(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
+{
+    JSObject *var44;
+    char *var49;
+    int var48;
+    int var50;
+    jsval var51;
+    JSString *var52;
+    jsval var77;
+    size_t var53;
+    size_t var54;
+    int var56;
+    jschar *var55;
+    jsval var78;
+    JSBool var43;
+    var44 = NULL;
+    var49 = NULL;
+    var48 = 0;
+    var50 = 0;
+    var51 = JSVAL_NULL;
+    var52 = NULL;
+    var77 = JSVAL_NULL;
+    var53 = 0;
+    var54 = 0;
+    var56 = 0;
+    var55 = NULL;
+    var78 = JSVAL_NULL;
+    var43 = JS_FALSE;
+    var44 = obj;
+    var48 = argc;
+    var50 = 0;
+    var50 = var50 &lt; var48;
+    if (var50) {
+    var51 = argv[0];
+    var52 = JS_ValueToString(cx, var51);
+    if (!var52) {
+        goto do_return;
+    }
+    var77 = STRING_TO_JSVAL(var52);
+    argv[argc+0] = var77;
+    var53 = JS_GetStringLength(var52);
+    var54 = 1;
+    var54 += var53;
+    var49 = JS_malloc(cx, var54);
+    if (!var49) {
+        goto do_return;
+    }
+    var56 = 1;
+    var55 = JS_GetStringChars(var52);
+    var78 = STRING_TO_JSVAL(var52);
+    argv[argc+1] = var78;
+    {
+        size_t i;
+        for (i = 0; i &lt; var53; ++i) {
+            var49[i] = wctob(var55[i]);
+        }
+        var49[var53] = '\0';
+    }
+    }
+    jsPrint2(var49);
+    var43 = JS_TRUE;
+    do_return:
+    if (var56) {
+        JS_free(cx, var49);
+        var49 = NULL;
+        var56 = 0;
+    }
+    return var43;
+}
+static JSBool
+jjhelp(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
+{
+    JSObject *var58;
+    char *var63;
+    int var62;
+    int var64;
+    jsval var65;
+    JSString *var66;
+    jsval var79;
+    size_t var67;
+    size_t var68;
+    int var70;
+    jschar *var69;
+    jsval var80;
+    JSBool var57;
+    var58 = NULL;
+    var63 = NULL;
+    var62 = 0;
+    var64 = 0;
+    var65 = JSVAL_NULL;
+    var66 = NULL;
+    var79 = JSVAL_NULL;
+    var67 = 0;
+    var68 = 0;
+    var70 = 0;
+    var69 = NULL;
+    var80 = JSVAL_NULL;
+    var57 = JS_FALSE;
+    var58 = obj;
+    var62 = argc;
+    var64 = 0;
+    var64 = var64 &lt; var62;
+    if (var64) {
+    var65 = argv[0];
+    var66 = JS_ValueToString(cx, var65);
+    if (!var66) {
+        goto do_return;
+    }
+    var79 = STRING_TO_JSVAL(var66);
+    argv[argc+0] = var79;
+    var67 = JS_GetStringLength(var66);
+    var68 = 1;
+    var68 += var67;
+    var63 = JS_malloc(cx, var68);
+    if (!var63) {
+        goto do_return;
+    }
+    var70 = 1;
+    var69 = JS_GetStringChars(var66);
+    var80 = STRING_TO_JSVAL(var66);
+    argv[argc+1] = var80;
+    {
+        size_t i;
+        for (i = 0; i &lt; var67; ++i) {
+            var63[i] = wctob(var69[i]);
+        }
+        var63[var67] = '\0';
+    }
+    }
+    jsHelp(var63);
+    var57 = JS_TRUE;
+    do_return:
+    if (var70) {
+        JS_free(cx, var63);
+        var63 = NULL;
+        var70 = 0;
+    }
+    return var57;
+}
 static JSPropertySpec jj_static_ps[] = {
     {NULL, 0, 0, NULL, NULL}
 };
@@ -250,12 +390,16 @@
     JS_FS(&quot;admPopupError&quot;, jjadmPopupError, 1, 0, 2),
     JS_FS(&quot;admpPopupInfo&quot;, jjadmpPopupInfo, 1, 0, 2),
     JS_FS(&quot;admPrint&quot;, jjadmPrint, 1, 0, 2),
+    JS_FS(&quot;print&quot;, jjprint, 1, 0, 2),
+    JS_FS(&quot;help&quot;, jjhelp, 1, 0, 2),
     JS_FS_END
 };
 static JSFunctionSpec jj_fs[] = {
     JS_FS(&quot;admPopupError&quot;, jjadmPopupError, 1, 0, 2),
     JS_FS(&quot;admpPopupInfo&quot;, jjadmpPopupInfo, 1, 0, 2),
     JS_FS(&quot;admPrint&quot;, jjadmPrint, 1, 0, 2),
+    JS_FS(&quot;print&quot;, jjprint, 1, 0, 2),
+    JS_FS(&quot;help&quot;, jjhelp, 1, 0, 2),
     JS_FS_END
 };
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_jsIf_js.idl
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_jsIf_js.idl	2009-12-09 19:12:33 UTC (rev 5632)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_jsIf_js.idl	2009-12-09 19:12:50 UTC (rev 5633)
@@ -6,7 +6,8 @@
 function void admPopupError : jsPopupError   (cstring  ) &lt;static&gt;;
 function void admpPopupInfo : jsPopupInfo    (cstring  ) &lt;static&gt;;
 function void admPrint      : jsPrint        (cstring  ) &lt;static&gt;;
-/*function void print         : jsPrint        (cstring  ) &lt;static&gt;;*/
+function void print         : jsPrint2       (cstring  ) &lt;static&gt;;
+function void help          : jsHelp         (cstring  ) &lt;static&gt;;
 
 %&lt;
 JSFunctionSpec  *jsGetIfFunctions(void)

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_jsTestFactory.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_jsTestFactory.cpp	2009-12-09 19:12:33 UTC (rev 5632)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_jsTestFactory.cpp	2009-12-09 19:12:50 UTC (rev 5633)
@@ -17,41 +17,36 @@
 #include &quot;ADM_editor/ADM_edit.hxx&quot;
 #include &quot;DIA_fileSel.h&quot;
 #include &quot;DIA_factory.h&quot;
+#include &quot;ADM_jsTestFactory.h&quot;
 
 
-extern &quot;C&quot;
-{
-    void jsCrashTest(void);
-    void jsAssertTest(void);
-}
-
 /**
     \fn crashTest
     \brief Force a crash
 */
-void jsCrashTest(void)
+bool jsTestCrash(void)
 {
   
   int *foobar=NULL;
   *foobar=0; // CRASH!
-
+  return true;
 }
 /**
     \fn assertTest
     \brief Force a crash
 */
-void jsAssertTest(void)
+bool jsTestAssert(void)
 {
   
   ADM_assert(0);
-
+  return true;
 }
 
 
 /**
-    \fn jsFacInt
+    \fn jsTestFacInt
 */
-bool jsFacInt(void)
+bool jsTestFacInt(void)
 {
   uint32_t tog=0;
    diaElemUInteger blend(&amp;tog,QT_TR_NOOP(&quot;Uinteger&quot;),0,255);
@@ -66,9 +61,9 @@
 }
 
 /**
-    \fn jsFacFloat
+    \fn jsTestFacFloat
 */
-bool jsFacFloat(void)
+bool jsTestFacFloat(void)
 {
   ELEM_TYPE_FLOAT tog=0;
    diaElemFloat blend(&amp;tog,QT_TR_NOOP(&quot;Float&quot;),0,255);
@@ -83,9 +78,9 @@
 }
 
 /**
-    \fn jsFacToggle
+    \fn jsTestFacToggle
 */
-bool jsFacToggle(void)
+bool jsTestFacToggle(void)
 {
   uint32_t tog=0;
   uint32_t test=0;
@@ -105,9 +100,9 @@
 }
 
 /**
-    \fn jsFacMenu
+    \fn jsTestFacMenu
 */
-bool jsFacMenu(void)
+bool jsTestFacMenu(void)
 {
    uint32_t tog=4;
    ELEM_TYPE_FLOAT f=1; 
@@ -134,9 +129,9 @@
 }
 
 /**
-    \fn jsFacFile
+    \fn jsTestFacFile
 */
-bool jsFacFile(void)
+bool jsTestFacFile(void)
 {
    uint32_t tog=0;
    char *test=ADM_strdup(&quot;Entry test1&quot;);
@@ -154,9 +149,9 @@
 }
 
 /**
-    \fn jsFacDirSel
+    \fn jsTestFacDirSel
 */
-bool jsFacDirSel(void)
+bool jsTestFacDirSel(void)
 {
    uint32_t tog=0;
    char *test=ADM_strdup(&quot;Entry test1&quot;);
@@ -174,9 +169,9 @@
 }
 
 /**
-    \fn jsFacBitrate
+    \fn jsTestFacBitrate
 */
-bool jsFacBitrate(void)
+bool jsTestFacBitrate(void)
 {
 
    COMPRES_PARAMS test={
@@ -199,9 +194,9 @@
 }
 
 /**
-    \fn jsFacInt
+    \fn jsTestFacInt
 */
-bool jsFacBar(void)
+bool jsTestFacBar(void)
 {
     
       diaElemBar bar1(25,&quot;25&quot;);
@@ -220,9 +215,9 @@
 }
 
 /**
-    \fn jsFacButton
+    \fn jsTestFacButton
 */
-bool jsFacButton(void)
+bool jsTestFacButton(void)
 {
     
       diaElemButton bar1(&quot;Button&quot;,clickMe,NULL);
@@ -235,9 +230,9 @@
 }
 
 /**
-    \fn jsFacSlider
+    \fn jsTestFacSlider
 */
-bool jsFacSlider(void)
+bool jsTestFacSlider(void)
 {
   int32_t val=4;
       diaElemSlider slide(&amp;val,&quot;foo&quot;, 0,10);
@@ -252,9 +247,9 @@
 }
 
 /**
-    \fn jsFacInt
+    \fn jsTestFacInt
 */
-bool jsFacRoText(void)
+bool jsTestFacRoText(void)
 
 {
     
@@ -269,9 +264,9 @@
 }
 
 /**
-    \fn jsFacText
+    \fn jsTestFacText
 */
-bool jsFacText(void)
+bool jsTestFacText(void)
 {
     
       char *foo=ADM_strdup(&quot;blah&quot;);
@@ -289,9 +284,9 @@
 }
 
 /**
-    \fn jsFacInt
+    \fn jsTestFacInt
 */
-bool jsFacTab(void)
+bool jsTestFacTab(void)
 {
     
       uint32_t test,test2;
@@ -318,9 +313,9 @@
 }
 
 /**
-    \fn jsFacInt
+    \fn jsTestFacInt
 */
-bool jsFacFrame(void)
+bool jsTestFacFrame(void)
 {
     
       uint32_t test,test2;
@@ -345,9 +340,9 @@
 
 
 /**
-    \fn jsFacHex
+    \fn jsTestFacHex
 */
-bool jsFacHex(void)
+bool jsTestFacHex(void)
 {
     
       uint8_t data[100];
@@ -366,9 +361,9 @@
 }
 
 /**
-    \fn jsFacMatrix
+    \fn jsTestFacMatrix
 */
-bool jsFacMatrix(void)
+bool jsTestFacMatrix(void)
 {
     
       uint8_t data[16];
@@ -392,9 +387,9 @@
 }
 
 /**
-    \fn jsFacThreadcount
+    \fn jsTestFacThreadcount
 */
-bool jsFacThreadcount(void)
+bool jsTestFacThreadCount(void)
 {
 	uint32_t val=1;
 	diaElemThreadCount threadcount(&amp;val,&quot;ThreadCount&quot;);
@@ -410,9 +405,9 @@
 }
 
 /**
-    \fn jsFacNotch
+    \fn jsTestFacNotch
 */
-bool jsFacNotch(void)
+bool jsTestFacNotch(void)
 {
     
 	diaElemNotch notch(1,&quot;Notch&quot;);

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_jsTestFactory_js.c
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_jsTestFactory_js.c	2009-12-09 19:12:33 UTC (rev 5632)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_jsTestFactory_js.c	2009-12-09 19:12:50 UTC (rev 5633)
@@ -12,6 +12,10 @@
 please refer to the software package which it is part of.
 
 */
+#ifdef HAVE_ALLOCA_H
+#include &lt;alloca.h&gt;
+#endif
+#include &lt;stdlib.h&gt;
 #include &lt;string.h&gt;
 #include &lt;wchar.h&gt;
 #include &lt;jsapi.h&gt;
@@ -30,8 +34,11 @@
 #ifndef JS_FS_END
 #define JS_FS_END {NULL, NULL, 0, 0, 0}
 #endif
+#ifdef HAVE_ALLOCA_H
+static size_t jj_alloca_limit = 0;
+#endif
 static JSBool
-jjjsTestFacInt(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
+jjadmTestFacInt(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
 {
     JSObject *var2;
     void *var3;
@@ -75,7 +82,7 @@
     var1 = JS_FALSE;
     var2 = obj;
     var6 = argc;
-    var3 = admFacInt();
+    var3 = jsTestFacInt();
     var9 = JS_GetGlobalObject(cx);
     var12 = &quot;bool&quot;;
     var14 = JS_GetProperty(cx, var9, var12, &amp;var15);
@@ -108,7 +115,7 @@
     return var1;
 }
 static JSBool
-jjjsTestFacFloat(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
+jjadmTestFacFloat(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
 {
     JSObject *var22;
     void *var23;
@@ -152,7 +159,7 @@
     var21 = JS_FALSE;
     var22 = obj;
     var26 = argc;
-    var23 = admFacFloat();
+    var23 = jsTestFacFloat();
     var29 = JS_GetGlobalObject(cx);
     var32 = &quot;bool&quot;;
     var34 = JS_GetProperty(cx, var29, var32, &amp;var35);
@@ -185,7 +192,7 @@
     return var21;
 }
 static JSBool
-jjjsTestFacToggle(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
+jjadmTestFacToggle(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
 {
     JSObject *var42;
     void *var43;
@@ -229,7 +236,7 @@
     var41 = JS_FALSE;
     var42 = obj;
     var46 = argc;
-    var43 = admFacToggle();
+    var43 = jsTestFacToggle();
     var49 = JS_GetGlobalObject(cx);
     var52 = &quot;bool&quot;;
     var54 = JS_GetProperty(cx, var49, var52, &amp;var55);
@@ -262,7 +269,7 @@
     return var41;
 }
 static JSBool
-jjjsTestFacMenu(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
+jjadmTestFacMenu(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
 {
     JSObject *var62;
     void *var63;
@@ -306,7 +313,7 @@
     var61 = JS_FALSE;
     var62 = obj;
     var66 = argc;
-    var63 = admFacMenu();
+    var63 = jsTestFacMenu();
     var69 = JS_GetGlobalObject(cx);
     var72 = &quot;bool&quot;;
     var74 = JS_GetProperty(cx, var69, var72, &amp;var75);
@@ -339,7 +346,7 @@
     return var61;
 }
 static JSBool
-jjjsTestFacFile(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
+jjadmTestFacFile(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
 {
     JSObject *var82;
     void *var83;
@@ -383,7 +390,7 @@
     var81 = JS_FALSE;
     var82 = obj;
     var86 = argc;
-    var83 = admFacFile();
+    var83 = jsTestFacFile();
     var89 = JS_GetGlobalObject(cx);
     var92 = &quot;bool&quot;;
     var94 = JS_GetProperty(cx, var89, var92, &amp;var95);
@@ -416,7 +423,7 @@
     return var81;
 }
 static JSBool
-jjjsTestFacBitrate(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
+jjadmTestFacBitrate(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
 {
     JSObject *var102;
     void *var103;
@@ -460,7 +467,7 @@
     var101 = JS_FALSE;
     var102 = obj;
     var106 = argc;
-    var103 = admFacBitrate();
+    var103 = jsTestFacBitrate();
     var109 = JS_GetGlobalObject(cx);
     var112 = &quot;bool&quot;;
     var114 = JS_GetProperty(cx, var109, var112, &amp;var115);
@@ -493,7 +500,7 @@
     return var101;
 }
 static JSBool
-jjjsTestFacBar(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
+jjadmTestFacBar(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
 {
     JSObject *var122;
     void *var123;
@@ -537,7 +544,7 @@
     var121 = JS_FALSE;
     var122 = obj;
     var126 = argc;
-    var123 = admFacBar();
+    var123 = jsTestFacBar();
     var129 = JS_GetGlobalObject(cx);
     var132 = &quot;bool&quot;;
     var134 = JS_GetProperty(cx, var129, var132, &amp;var135);
@@ -570,7 +577,7 @@
     return var121;
 }
 static JSBool
-jjjsTestFacRoText(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
+jjadmTestFacRoText(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
 {
     JSObject *var142;
     void *var143;
@@ -614,7 +621,7 @@
     var141 = JS_FALSE;
     var142 = obj;
     var146 = argc;
-    var143 = admFacRoText();
+    var143 = jsTestFacRoText();
     var149 = JS_GetGlobalObject(cx);
     var152 = &quot;bool&quot;;
     var154 = JS_GetProperty(cx, var149, var152, &amp;var155);
@@ -647,7 +654,7 @@
     return var141;
 }
 static JSBool
-jjjsTestFacText(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
+jjadmTestFacText(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
 {
     JSObject *var162;
     void *var163;
@@ -691,7 +698,7 @@
     var161 = JS_FALSE;
     var162 = obj;
     var166 = argc;
-    var163 = admFacText();
+    var163 = jsTestFacText();
     var169 = JS_GetGlobalObject(cx);
     var172 = &quot;bool&quot;;
     var174 = JS_GetProperty(cx, var169, var172, &amp;var175);
@@ -724,7 +731,7 @@
     return var161;
 }
 static JSBool
-jjjsTestFacTab(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
+jjadmTestFacTab(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
 {
     JSObject *var182;
     void *var183;
@@ -768,7 +775,7 @@
     var181 = JS_FALSE;
     var182 = obj;
     var186 = argc;
-    var183 = admFacTab();
+    var183 = jsTestFacTab();
     var189 = JS_GetGlobalObject(cx);
     var192 = &quot;bool&quot;;
     var194 = JS_GetProperty(cx, var189, var192, &amp;var195);
@@ -801,7 +808,7 @@
     return var181;
 }
 static JSBool
-jjjsTestFrame(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
+jjadmTestFrame(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
 {
     JSObject *var202;
     void *var203;
@@ -845,7 +852,7 @@
     var201 = JS_FALSE;
     var202 = obj;
     var206 = argc;
-    var203 = admFacFrame();
+    var203 = jsTestFacFrame();
     var209 = JS_GetGlobalObject(cx);
     var212 = &quot;bool&quot;;
     var214 = JS_GetProperty(cx, var209, var212, &amp;var215);
@@ -878,7 +885,7 @@
     return var201;
 }
 static JSBool
-jjjsTestHex(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
+jjadmTestHex(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
 {
     JSObject *var222;
     void *var223;
@@ -922,7 +929,7 @@
     var221 = JS_FALSE;
     var222 = obj;
     var226 = argc;
-    var223 = admFacHex();
+    var223 = jsTestFacHex();
     var229 = JS_GetGlobalObject(cx);
     var232 = &quot;bool&quot;;
     var234 = JS_GetProperty(cx, var229, var232, &amp;var235);
@@ -955,7 +962,7 @@
     return var221;
 }
 static JSBool
-jjjsTestDirSel(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
+jjadmTestDirSel(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
 {
     JSObject *var242;
     void *var243;
@@ -999,7 +1006,7 @@
     var241 = JS_FALSE;
     var242 = obj;
     var246 = argc;
-    var243 = admFacDirSel();
+    var243 = jsTestFacDirSel();
     var249 = JS_GetGlobalObject(cx);
     var252 = &quot;bool&quot;;
     var254 = JS_GetProperty(cx, var249, var252, &amp;var255);
@@ -1032,7 +1039,7 @@
     return var241;
 }
 static JSBool
-jjjsTestButton(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
+jjadmTestButton(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
 {
     JSObject *var262;
     void *var263;
@@ -1076,7 +1083,7 @@
     var261 = JS_FALSE;
     var262 = obj;
     var266 = argc;
-    var263 = admFacButton();
+    var263 = jsTestFacButton();
     var269 = JS_GetGlobalObject(cx);
     var272 = &quot;bool&quot;;
     var274 = JS_GetProperty(cx, var269, var272, &amp;var275);
@@ -1109,7 +1116,7 @@
     return var261;
 }
 static JSBool
-jjjsTestMatrix(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
+jjadmTestMatrix(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
 {
     JSObject *var282;
     void *var283;
@@ -1153,7 +1160,7 @@
     var281 = JS_FALSE;
     var282 = obj;
     var286 = argc;
-    var283 = admFacMatrix();
+    var283 = jsTestFacMatrix();
     var289 = JS_GetGlobalObject(cx);
     var292 = &quot;bool&quot;;
     var294 = JS_GetProperty(cx, var289, var292, &amp;var295);
@@ -1186,7 +1193,7 @@
     return var281;
 }
 static JSBool
-jjjsTestNotch(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
+jjadmTestNotch(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
 {
     JSObject *var302;
     void *var303;
@@ -1230,7 +1237,7 @@
     var301 = JS_FALSE;
     var302 = obj;
     var306 = argc;
-    var303 = admFacNotch();
+    var303 = jsTestFacNotch();
     var309 = JS_GetGlobalObject(cx);
     var312 = &quot;bool&quot;;
     var314 = JS_GetProperty(cx, var309, var312, &amp;var315);
@@ -1263,7 +1270,7 @@
     return var301;
 }
 static JSBool
-jjjsTestThreadCount(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
+jjadmTestThreadCount(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
 {
     JSObject *var322;
     void *var323;
@@ -1307,7 +1314,7 @@
     var321 = JS_FALSE;
     var322 = obj;
     var326 = argc;
-    var323 = admFacThreadCount();
+    var323 = jsTestFacThreadCount();
     var329 = JS_GetGlobalObject(cx);
     var332 = &quot;bool&quot;;
     var334 = JS_GetProperty(cx, var329, var332, &amp;var335);
@@ -1340,7 +1347,7 @@
     return var321;
 }
 static JSBool
-jjjsTestSlider(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
+jjadmTestSlider(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
 {
     JSObject *var342;
     void *var343;
@@ -1384,7 +1391,7 @@
     var341 = JS_FALSE;
     var342 = obj;
     var346 = argc;
-    var343 = admFacSlider();
+    var343 = jsTestFacSlider();
     var349 = JS_GetGlobalObject(cx);
     var352 = &quot;bool&quot;;
     var354 = JS_GetProperty(cx, var349, var352, &amp;var355);
@@ -1417,7 +1424,7 @@
     return var341;
 }
 static JSBool
-jjjsCrashTest(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
+jjadmTestCrash(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
 {
     JSObject *var362;
     int var366;
@@ -1427,12 +1434,12 @@
     var361 = JS_FALSE;
     var362 = obj;
     var366 = argc;
-    crashTest();
+    jsTestCrash();
     var361 = JS_TRUE;
     return var361;
 }
 static JSBool
-jjjsAssertTest(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
+jjadmTestAssert(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
 {
     JSObject *var368;
     int var372;
@@ -1442,7 +1449,7 @@
     var367 = JS_FALSE;
     var368 = obj;
     var372 = argc;
-    assertTest();
+    jsTestAssert();
     var367 = JS_TRUE;
     return var367;
 }
@@ -1453,48 +1460,55 @@
     {NULL, 0, 0, NULL, NULL}
 };
 static JSFunctionSpec jj_static_fs[] = {
-    JS_FS(&quot;jsTestFacInt&quot;, jjjsTestFacInt, 0, 0, 3),
-    JS_FS(&quot;jsTestFacFloat&quot;, jjjsTestFacFloat, 0, 0, 3),
-    JS_FS(&quot;jsTestFacToggle&quot;, jjjsTestFacToggle, 0, 0, 3),
-    JS_FS(&quot;jsTestFacMenu&quot;, jjjsTestFacMenu, 0, 0, 3),
-    JS_FS(&quot;jsTestFacFile&quot;, jjjsTestFacFile, 0, 0, 3),
-    JS_FS(&quot;jsTestFacBitrate&quot;, jjjsTestFacBitrate, 0, 0, 3),
-    JS_FS(&quot;jsTestFacBar&quot;, jjjsTestFacBar, 0, 0, 3),
-    JS_FS(&quot;jsTestFacRoText&quot;, jjjsTestFacRoText, 0, 0, 3),
-    JS_FS(&quot;jsTestFacText&quot;, jjjsTestFacText, 0, 0, 3),
-    JS_FS(&quot;jsTestFacTab&quot;, jjjsTestFacTab, 0, 0, 3),
-    JS_FS(&quot;jsTestFrame&quot;, jjjsTestFrame, 0, 0, 3),
-    JS_FS(&quot;jsTestHex&quot;, jjjsTestHex, 0, 0, 3),
-    JS_FS(&quot;jsTestDirSel&quot;, jjjsTestDirSel, 0, 0, 3),
-    JS_FS(&quot;jsTestButton&quot;, jjjsTestButton, 0, 0, 3),
-    JS_FS(&quot;jsTestMatrix&quot;, jjjsTestMatrix, 0, 0, 3),
-    JS_FS(&quot;jsTestNotch&quot;, jjjsTestNotch, 0, 0, 3),
-    JS_FS(&quot;jsTestThreadCount&quot;, jjjsTestThreadCount, 0, 0, 3),
-    JS_FS(&quot;jsTestSlider&quot;, jjjsTestSlider, 0, 0, 3),
-    JS_FS(&quot;jsCrashTest&quot;, jjjsCrashTest, 0, 0, 0),
-    JS_FS(&quot;jsAssertTest&quot;, jjjsAssertTest, 0, 0, 0),
+    JS_FS(&quot;admTestFacInt&quot;, jjadmTestFacInt, 0, 0, 3),
+    JS_FS(&quot;admTestFacFloat&quot;, jjadmTestFacFloat, 0, 0, 3),
+    JS_FS(&quot;admTestFacToggle&quot;, jjadmTestFacToggle, 0, 0, 3),
+    JS_FS(&quot;admTestFacMenu&quot;, jjadmTestFacMenu, 0, 0, 3),
+    JS_FS(&quot;admTestFacFile&quot;, jjadmTestFacFile, 0, 0, 3),
+    JS_FS(&quot;admTestFacBitrate&quot;, jjadmTestFacBitrate, 0, 0, 3),
+    JS_FS(&quot;admTestFacBar&quot;, jjadmTestFacBar, 0, 0, 3),
+    JS_FS(&quot;admTestFacRoText&quot;, jjadmTestFacRoText, 0, 0, 3),
+    JS_FS(&quot;admTestFacText&quot;, jjadmTestFacText, 0, 0, 3),
+    JS_FS(&quot;admTestFacTab&quot;, jjadmTestFacTab, 0, 0, 3),
+    JS_FS(&quot;admTestFrame&quot;, jjadmTestFrame, 0, 0, 3),
+    JS_FS(&quot;admTestHex&quot;, jjadmTestHex, 0, 0, 3),
+    JS_FS(&quot;admTestDirSel&quot;, jjadmTestDirSel, 0, 0, 3),
+    JS_FS(&quot;admTestButton&quot;, jjadmTestButton, 0, 0, 3),
+    JS_FS(&quot;admTestMatrix&quot;, jjadmTestMatrix, 0, 0, 3),
+    JS_FS(&quot;admTestNotch&quot;, jjadmTestNotch, 0, 0, 3),
+    JS_FS(&quot;admTestThreadCount&quot;, jjadmTestThreadCount, 0, 0, 3),
+    JS_FS(&quot;admTestSlider&quot;, jjadmTestSlider, 0, 0, 3),
+    JS_FS(&quot;admTestCrash&quot;, jjadmTestCrash, 0, 0, 0),
+    JS_FS(&quot;admTestAssert&quot;, jjadmTestAssert, 0, 0, 0),
     JS_FS_END
 };
 static JSFunctionSpec jj_fs[] = {
-    JS_FS(&quot;jsTestFacInt&quot;, jjjsTestFacInt, 0, 0, 3),
-    JS_FS(&quot;jsTestFacFloat&quot;, jjjsTestFacFloat, 0, 0, 3),
-    JS_FS(&quot;jsTestFacToggle&quot;, jjjsTestFacToggle, 0, 0, 3),
-    JS_FS(&quot;jsTestFacMenu&quot;, jjjsTestFacMenu, 0, 0, 3),
-    JS_FS(&quot;jsTestFacFile&quot;, jjjsTestFacFile, 0, 0, 3),
-    JS_FS(&quot;jsTestFacBitrate&quot;, jjjsTestFacBitrate, 0, 0, 3),
-    JS_FS(&quot;jsTestFacBar&quot;, jjjsTestFacBar, 0, 0, 3),
-    JS_FS(&quot;jsTestFacRoText&quot;, jjjsTestFacRoText, 0, 0, 3),
-    JS_FS(&quot;jsTestFacText&quot;, jjjsTestFacText, 0, 0, 3),
-    JS_FS(&quot;jsTestFacTab&quot;, jjjsTestFacTab, 0, 0, 3),
-    JS_FS(&quot;jsTestFrame&quot;, jjjsTestFrame, 0, 0, 3),
-    JS_FS(&quot;jsTestHex&quot;, jjjsTestHex, 0, 0, 3),
-    JS_FS(&quot;jsTestDirSel&quot;, jjjsTestDirSel, 0, 0, 3),
-    JS_FS(&quot;jsTestButton&quot;, jjjsTestButton, 0, 0, 3),
-    JS_FS(&quot;jsTestMatrix&quot;, jjjsTestMatrix, 0, 0, 3),
-    JS_FS(&quot;jsTestNotch&quot;, jjjsTestNotch, 0, 0, 3),
-    JS_FS(&quot;jsTestThreadCount&quot;, jjjsTestThreadCount, 0, 0, 3),
-    JS_FS(&quot;jsTestSlider&quot;, jjjsTestSlider, 0, 0, 3),
-    JS_FS(&quot;jsCrashTest&quot;, jjjsCrashTest, 0, 0, 0),
-    JS_FS(&quot;jsAssertTest&quot;, jjjsAssertTest, 0, 0, 0),
+    JS_FS(&quot;admTestFacInt&quot;, jjadmTestFacInt, 0, 0, 3),
+    JS_FS(&quot;admTestFacFloat&quot;, jjadmTestFacFloat, 0, 0, 3),
+    JS_FS(&quot;admTestFacToggle&quot;, jjadmTestFacToggle, 0, 0, 3),
+    JS_FS(&quot;admTestFacMenu&quot;, jjadmTestFacMenu, 0, 0, 3),
+    JS_FS(&quot;admTestFacFile&quot;, jjadmTestFacFile, 0, 0, 3),
+    JS_FS(&quot;admTestFacBitrate&quot;, jjadmTestFacBitrate, 0, 0, 3),
+    JS_FS(&quot;admTestFacBar&quot;, jjadmTestFacBar, 0, 0, 3),
+    JS_FS(&quot;admTestFacRoText&quot;, jjadmTestFacRoText, 0, 0, 3),
+    JS_FS(&quot;admTestFacText&quot;, jjadmTestFacText, 0, 0, 3),
+    JS_FS(&quot;admTestFacTab&quot;, jjadmTestFacTab, 0, 0, 3),
+    JS_FS(&quot;admTestFrame&quot;, jjadmTestFrame, 0, 0, 3),
+    JS_FS(&quot;admTestHex&quot;, jjadmTestHex, 0, 0, 3),
+    JS_FS(&quot;admTestDirSel&quot;, jjadmTestDirSel, 0, 0, 3),
+    JS_FS(&quot;admTestButton&quot;, jjadmTestButton, 0, 0, 3),
+    JS_FS(&quot;admTestMatrix&quot;, jjadmTestMatrix, 0, 0, 3),
+    JS_FS(&quot;admTestNotch&quot;, jjadmTestNotch, 0, 0, 3),
+    JS_FS(&quot;admTestThreadCount&quot;, jjadmTestThreadCount, 0, 0, 3),
+    JS_FS(&quot;admTestSlider&quot;, jjadmTestSlider, 0, 0, 3),
+    JS_FS(&quot;admTestCrash&quot;, jjadmTestCrash, 0, 0, 0),
+    JS_FS(&quot;admTestAssert&quot;, jjadmTestAssert, 0, 0, 0),
     JS_FS_END
 };
+
+JSFunctionSpec  *jsGetTestFunctions(void)
+{
+        return jj_static_fs;
+}
+
+

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_jsTestFactory_js.idl
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_jsTestFactory_js.idl	2009-12-09 19:12:33 UTC (rev 5632)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_jsTestFactory_js.idl	2009-12-09 19:12:50 UTC (rev 5633)
@@ -1,27 +1,34 @@
 /*
 ###############################################################
-       return C function     JS Function  params
+       return JS function     C Function  params
 ###############################################################
 */
-function bool jsTestFacInt : admFacInt   (void  ) &lt;static&gt;;
-function bool jsTestFacFloat : admFacFloat   (void  ) &lt;static&gt;;
-function bool jsTestFacToggle : admFacToggle   (void  ) &lt;static&gt;;
-function bool jsTestFacMenu : admFacMenu   (void  ) &lt;static&gt;;
-function bool jsTestFacFile : admFacFile   (void  ) &lt;static&gt;;
-function bool jsTestFacBitrate : admFacBitrate   (void  ) &lt;static&gt;;
-function bool jsTestFacBar : admFacBar   (void  ) &lt;static&gt;;
-function bool jsTestFacRoText : admFacRoText   (void  ) &lt;static&gt;;
-function bool jsTestFacText : admFacText   (void  ) &lt;static&gt;;
-function bool jsTestFacTab :  admFacTab   (void  ) &lt;static&gt;;
-function bool jsTestFrame :   admFacFrame   (void  ) &lt;static&gt;;
-function bool jsTestHex :     admFacHex   (void  ) &lt;static&gt;;
-function bool jsTestDirSel :  admFacDirSel   (void  ) &lt;static&gt;;
-function bool jsTestButton :  admFacButton   (void  ) &lt;static&gt;;
-function bool jsTestMatrix :  admFacMatrix   (void  ) &lt;static&gt;;
-function bool jsTestNotch :   admFacNotch   (void  ) &lt;static&gt;;
-function bool jsTestThreadCount : admFacThreadCount   (void  ) &lt;static&gt;;
-function bool jsTestSlider :  admFacSlider   (void  ) &lt;static&gt;;
-function void jsCrashTest :   crashTest   (void  ) &lt;static&gt;;
-function void jsAssertTest :  assertTest   (void  ) &lt;static&gt;;
+function bool admTestFacInt     :  jsTestFacInt     (void  ) &lt;static&gt;;
+function bool admTestFacFloat   :  jsTestFacFloat   (void  ) &lt;static&gt;;
+function bool admTestFacToggle  :  jsTestFacToggle  (void  ) &lt;static&gt;;
+function bool admTestFacMenu    :  jsTestFacMenu    (void  ) &lt;static&gt;;
+function bool admTestFacFile    :  jsTestFacFile    (void  ) &lt;static&gt;;
+function bool admTestFacBitrate :  jsTestFacBitrate (void  ) &lt;static&gt;;
+function bool admTestFacBar     :  jsTestFacBar     (void  ) &lt;static&gt;;
+function bool admTestFacRoText  :  jsTestFacRoText  (void  ) &lt;static&gt;;
+function bool admTestFacText    :  jsTestFacText    (void  ) &lt;static&gt;;
+function bool admTestFacTab     :  jsTestFacTab     (void  ) &lt;static&gt;;
+function bool admTestFrame      :  jsTestFacFrame   (void  ) &lt;static&gt;;
+function bool admTestHex        :  jsTestFacHex     (void  ) &lt;static&gt;;
+function bool admTestDirSel     :  jsTestFacDirSel  (void  ) &lt;static&gt;;
+function bool admTestButton     :  jsTestFacButton  (void  ) &lt;static&gt;;
+function bool admTestMatrix     :  jsTestFacMatrix  (void  ) &lt;static&gt;;
+function bool admTestNotch      :  jsTestFacNotch   (void  ) &lt;static&gt;;
+function bool admTestThreadCount:  jsTestFacThreadCount   (void  ) &lt;static&gt;;
+function bool admTestSlider     :  jsTestFacSlider  (void  ) &lt;static&gt;;
+function void admTestCrash      :  jsTestCrash      (void  ) &lt;static&gt;;
+function void admTestAssert     :  jsTestAssert     (void  ) &lt;static&gt;;
 
+%&lt;
+JSFunctionSpec  *jsGetTestFunctions(void)
+{
+        return jj_static_fs;
+}
 
+%&gt;
+


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002840.html">[Avidemux-svn-commit] r5631 - in	branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2:	include src
</A></li>
	<LI>Next message: <A HREF="002842.html">[Avidemux-svn-commit] r5634 - in	branches/avidemux_2.6_branch_mean/avidemux: cli	cli/ADM_userInterfaces gtk
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2841">[ date ]</a>
              <a href="thread.html#2841">[ thread ]</a>
              <a href="subject.html#2841">[ subject ]</a>
              <a href="author.html#2841">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">More information about the Avidemux-svn-commit
mailing list</a><br>
</body></html>
