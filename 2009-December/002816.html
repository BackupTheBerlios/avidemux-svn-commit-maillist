<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Avidemux-svn-commit] r5607 - in branches/avidemux_2.6_branch_mean:	avidemux/cli avidemux/cli/ADM_userInterfaces	avidemux/cli/ADM_userInterfaces/ADM_shell	avidemux/common/ADM_script avidemux/gtk	avidemux/gtk/ADM_userInterfaces	avidemux/gtk/ADM_userInterfaces/ADM_shell	avidemux/qt4/ADM_userInterfaces/ADM_shell	avidemux_plugins/ADM_muxers/muxerffTS
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/avidemux-svn-commit/2009-December/index.html" >
   <LINK REL="made" HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r5607%20-%20in%20branches/avidemux_2.6_branch_mean%3A%0A%09avidemux/cli%20avidemux/cli/ADM_userInterfaces%0A%09avidemux/cli/ADM_userInterfaces/ADM_shell%0A%09avidemux/common/ADM_script%20avidemux/gtk%0A%09avidemux/gtk/ADM_userInterfaces%0A%09avidemux/gtk/ADM_userInterfaces/ADM_shell%0A%09avidemux/qt4/ADM_userInterfaces/ADM_shell%0A%09avidemux_plugins/ADM_muxers/muxerffTS&In-Reply-To=%3C200912021902.nB2J2QGI010802%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002815.html">
   <LINK REL="Next"  HREF="002817.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Avidemux-svn-commit] r5607 - in branches/avidemux_2.6_branch_mean:	avidemux/cli avidemux/cli/ADM_userInterfaces	avidemux/cli/ADM_userInterfaces/ADM_shell	avidemux/common/ADM_script avidemux/gtk	avidemux/gtk/ADM_userInterfaces	avidemux/gtk/ADM_userInterfaces/ADM_shell	avidemux/qt4/ADM_userInterfaces/ADM_shell	avidemux_plugins/ADM_muxers/muxerffTS</H1>
    <B>mean at BerliOS</B> 
    <A HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r5607%20-%20in%20branches/avidemux_2.6_branch_mean%3A%0A%09avidemux/cli%20avidemux/cli/ADM_userInterfaces%0A%09avidemux/cli/ADM_userInterfaces/ADM_shell%0A%09avidemux/common/ADM_script%20avidemux/gtk%0A%09avidemux/gtk/ADM_userInterfaces%0A%09avidemux/gtk/ADM_userInterfaces/ADM_shell%0A%09avidemux/qt4/ADM_userInterfaces/ADM_shell%0A%09avidemux_plugins/ADM_muxers/muxerffTS&In-Reply-To=%3C200912021902.nB2J2QGI010802%40sheep.berlios.de%3E"
       TITLE="[Avidemux-svn-commit] r5607 - in branches/avidemux_2.6_branch_mean:	avidemux/cli avidemux/cli/ADM_userInterfaces	avidemux/cli/ADM_userInterfaces/ADM_shell	avidemux/common/ADM_script avidemux/gtk	avidemux/gtk/ADM_userInterfaces	avidemux/gtk/ADM_userInterfaces/ADM_shell	avidemux/qt4/ADM_userInterfaces/ADM_shell	avidemux_plugins/ADM_muxers/muxerffTS">mean at mail.berlios.de
       </A><BR>
    <I>Wed Dec  2 20:02:26 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="002815.html">[Avidemux-svn-commit] r5606 - in branches/avidemux_2.6_branch_mean:	avidemux/common avidemux/common/ADM_script avidemux/qt4	avidemux/qt4/ADM_userInterfaces	avidemux/qt4/ADM_userInterfaces/ADM_gui	avidemux/qt4/ADM_userInterfaces/ADM_shell	avidemux_plugins/ADM_demuxers/Asf	avidemux_plugins/ADM_muxers/muxerffTS
</A></li>
        <LI>Next message: <A HREF="002817.html">[Avidemux-svn-commit] r5608 -	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2816">[ date ]</a>
              <a href="thread.html#2816">[ thread ]</a>
              <a href="subject.html#2816">[ subject ]</a>
              <a href="author.html#2816">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: mean
Date: 2009-12-02 20:02:25 +0100 (Wed, 02 Dec 2009)
New Revision: 5607

Added:
   branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_shell/
   branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_shell/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_shell/cliShell.cpp
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_shell/
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_shell/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_shell/gtkShell.cpp
Modified:
   branches/avidemux_2.6_branch_mean/avidemux/cli/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSFunctions.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSif.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_jsShell.h
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/gtk/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_shell/Q_shell.cpp
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_shell/Q_shell.h
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_shell/qt4Shell.cpp
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_shell/shell.ui
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffTS/muxerffTS.cpp
Log:
[Script/UI] Add a small interactive shell for javascript

Added: branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_shell/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_shell/CMakeLists.txt	2009-12-02 19:02:21 UTC (rev 5606)
+++ branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_shell/CMakeLists.txt	2009-12-02 19:02:25 UTC (rev 5607)
@@ -0,0 +1,8 @@
+SET(ADM_LIB ADM_shellCli)
+
+SET(${ADM_LIB}_SRCS 
+        cliShell.cpp
+)
+
+INCLUDE_DIRECTORIES(&quot;${AVIDEMUX_TOP_SOURCE_DIR}/avidemux/common/ADM_script/&quot;)
+ADD_LIBRARY(${ADM_LIB} STATIC ${${ADM_LIB}_SRCS})

Added: branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_shell/cliShell.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_shell/cliShell.cpp	2009-12-02 19:02:21 UTC (rev 5606)
+++ branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_shell/cliShell.cpp	2009-12-02 19:02:25 UTC (rev 5607)
@@ -0,0 +1,37 @@
+/**
+        \file cliShell.cpp
+        \brief cli Specific js interactive shell
+*/
+
+
+#include &quot;ADM_default.h&quot;
+#include &quot;ADM_jsShell.h&quot;
+/**
+    \fn cliShellLogger
+    \brief Redirect output to the shell
+*/
+/*
+static bool cliShellLogger(void *cookie,const char *v)
+{
+    qShell *s=(qShell *)cookie;
+    s-&gt;print(v);
+    return true;
+}
+*/
+/**
+        \fn ADM_createJsShell
+        \brief create the input for a js shell
+*/
+bool ADM_startShell(jsShellEvaluate eval)
+{
+      /*  qShell *s= new qShell(eval);
+        ADM_jsRegisterLogger((void *)s,cliShellLogger);
+        s-&gt;run();
+        ADM_jsUnregisterLogger();
+        delete s;
+        return true;
+        */
+        return false;
+}
+//EOF
+

Modified: branches/avidemux_2.6_branch_mean/avidemux/cli/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/cli/CMakeLists.txt	2009-12-02 19:02:21 UTC (rev 5606)
+++ branches/avidemux_2.6_branch_mean/avidemux/cli/CMakeLists.txt	2009-12-02 19:02:25 UTC (rev 5607)
@@ -67,6 +67,8 @@
 TARGET_LINK_LIBRARIES(avidemux3_cli ADM_gui2Cli6)
 TARGET_LINK_LIBRARIES(avidemux3_cli ADM_toolkitCli6)
 TARGET_LINK_LIBRARIES(avidemux3_cli ADM_UI_Cli6)
+TARGET_LINK_LIBRARIES(avidemux3_cli ADM_UI_Cli6)
+TARGET_LINK_LIBRARIES(avidemux3_cli ADM_shellCli)
 ###########################################
 # External libs
 ###########################################

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSFunctions.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSFunctions.cpp	2009-12-02 19:02:21 UTC (rev 5606)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSFunctions.cpp	2009-12-02 19:02:25 UTC (rev 5607)
@@ -47,6 +47,7 @@
 std::vector &lt;std::string&gt; g_vIncludes;
 extern char **environ;
 extern char *script_getVar(char *in, int *r);
+extern bool jsLog(const char *v);
 
 JSBool displayError(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
 JSBool displayInfo(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
@@ -242,12 +243,16 @@
         *rval=STRING_TO_JSVAL(JS_NewStringCopyZ(cx,name));
         return JS_TRUE;
 }
+/**
+
+*/
 JSBool print(JSContext *cx, JSObject *obj, uintN argc, 
                                        jsval *argv, jsval *rval)
 {// begin print
         if(argc != 1)
                 return JS_FALSE;
-	fprintf(stderr,&quot;JSConsole: %s\n&quot;, JS_GetStringBytes(JS_ValueToString(cx, argv[0])));
+        char *out=JS_GetStringBytes(JS_ValueToString(cx, argv[0]));
+        jsLog(out);
         return JS_TRUE;
 }// end print
 /*****************************************************

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSif.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSif.cpp	2009-12-02 19:02:21 UTC (rev 5606)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSif.cpp	2009-12-02 19:02:25 UTC (rev 5607)
@@ -20,6 +20,10 @@
 #include &quot;ADM_jsShell.h&quot;
 void    A_Resync(void);
 
+
+static jsLoggerFunc *jsLogger=NULL;
+static void *jsLoggerCookie=NULL;
+
 /**
     \fn parseECMAScript
     \brief Compile &amp; execute ecma script
@@ -64,4 +68,32 @@
 	A_Resync();
     ADM_info(&quot;Ending JS shell...\n&quot;);
 	return true;
-}
\ No newline at end of file
+}
+/**
+    \fn jsLog
+*/
+bool jsLog(const char *v)
+{
+    if(!jsLogger)
+        fprintf(stderr,&quot;&lt;i&gt;%s&lt;/i&gt;\n&quot;,v);
+    else    
+        jsLogger(jsLoggerCookie,v);
+    return true;
+}
+/**
+    \fn ADM_jsRegisterLogger
+*/
+bool ADM_jsRegisterLogger(void *cookie,jsLoggerFunc *fun)
+{
+    jsLoggerCookie=cookie;
+    jsLogger=fun;
+    return true;
+}
+/**
+    \fn ADM_jsUnregisterLogger
+*/
+bool ADM_jsUnregisterLogger(void)
+{
+    jsLogger=NULL;
+    return true;
+}

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_jsShell.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_jsShell.h	2009-12-02 19:02:21 UTC (rev 5606)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_jsShell.h	2009-12-02 19:02:25 UTC (rev 5607)
@@ -19,4 +19,8 @@
 typedef bool (jsShellEvaluate)(const char *str);
 bool ADM_startShell(jsShellEvaluate *eval);
 
+typedef bool (jsLoggerFunc)(void *cookie,const char *);
+bool ADM_jsRegisterLogger(void *cookie,jsLoggerFunc *fun);
+bool ADM_jsUnregisterLogger(void);
+
 #endif // ADM_JS_SHELL_H
\ No newline at end of file

Added: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_shell/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_shell/CMakeLists.txt	2009-12-02 19:02:21 UTC (rev 5606)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_shell/CMakeLists.txt	2009-12-02 19:02:25 UTC (rev 5607)
@@ -0,0 +1,8 @@
+SET(ADM_LIB ADM_shellGtk)
+
+SET(${ADM_LIB}_SRCS 
+        gtkShell.cpp
+)
+
+INCLUDE_DIRECTORIES(&quot;${AVIDEMUX_TOP_SOURCE_DIR}/avidemux/common/ADM_script/&quot;)
+ADD_LIBRARY(${ADM_LIB} STATIC ${${ADM_LIB}_SRCS})

Added: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_shell/gtkShell.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_shell/gtkShell.cpp	2009-12-02 19:02:21 UTC (rev 5606)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_shell/gtkShell.cpp	2009-12-02 19:02:25 UTC (rev 5607)
@@ -0,0 +1,37 @@
+/**
+        \file gtkShell.cpp
+        \brief gtk Specific js interactive shell
+*/
+
+
+#include &quot;ADM_default.h&quot;
+#include &quot;ADM_jsShell.h&quot;
+/**
+    \fn gtkShellLogger
+    \brief Redirect output to the shell
+*/
+/*
+static bool gtkShellLogger(void *cookie,const char *v)
+{
+    qShell *s=(qShell *)cookie;
+    s-&gt;print(v);
+    return true;
+}
+*/
+/**
+        \fn ADM_createJsShell
+        \brief create the input for a js shell
+*/
+bool ADM_startShell(jsShellEvaluate eval)
+{
+      /*  qShell *s= new qShell(eval);
+        ADM_jsRegisterLogger((void *)s,gtkShellLogger);
+        s-&gt;run();
+        ADM_jsUnregisterLogger();
+        delete s;
+        return true;
+        */
+        return false;
+}
+//EOF
+

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/CMakeLists.txt	2009-12-02 19:02:21 UTC (rev 5606)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/CMakeLists.txt	2009-12-02 19:02:25 UTC (rev 5607)
@@ -11,4 +11,5 @@
 ADD_SUBDIRECTORY(ADM_gui2)
 ADD_SUBDIRECTORY(ADM_ocr)
 ADD_SUBDIRECTORY(ADM_toolkit_gtk)
+ADD_SUBDIRECTORY(ADM_shell)
 ADD_SUBDIRECTORY(glade)

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/CMakeLists.txt	2009-12-02 19:02:21 UTC (rev 5606)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/CMakeLists.txt	2009-12-02 19:02:25 UTC (rev 5607)
@@ -74,6 +74,7 @@
 #TARGET_LINK_LIBRARIES(avidemux3_gtk ADM_ocrGtk)
 TARGET_LINK_LIBRARIES(avidemux3_gtk ADM_toolkitGtk)
 TARGET_LINK_LIBRARIES(avidemux3_gtk ADM_UI_GTK)
+TARGET_LINK_LIBRARIES(avidemux3_gtk ADM_shellGtk)
 ###########################################
 # External libs
 ###########################################

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_shell/Q_shell.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_shell/Q_shell.cpp	2009-12-02 19:02:21 UTC (rev 5606)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_shell/Q_shell.cpp	2009-12-02 19:02:25 UTC (rev 5607)
@@ -52,6 +52,17 @@
     evaluator(text.toAscii());
     return true;
 }
+bool qShell::print(const char *s)
+{
+    ui.textBrowser-&gt;append(s);
+    return true;
+}
+bool qShell::clear(bool x)
+{
+    ui.textBrowser-&gt;clear();
+    return true;
+}
+
 //EOF
 
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_shell/Q_shell.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_shell/Q_shell.h	2009-12-02 19:02:21 UTC (rev 5606)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_shell/Q_shell.h	2009-12-02 19:02:25 UTC (rev 5607)
@@ -21,8 +21,10 @@
                     qShell(jsShellEvaluate *s) ;
     virtual         ~qShell() ;
     bool            run(void);
+    bool            print(const char *s);
 public slots:
     bool            evaluate(bool x);
+    bool            clear(bool x);
 };
 
 #endif

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_shell/qt4Shell.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_shell/qt4Shell.cpp	2009-12-02 19:02:21 UTC (rev 5606)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_shell/qt4Shell.cpp	2009-12-02 19:02:25 UTC (rev 5607)
@@ -5,6 +5,16 @@
 
 #include &quot;Q_shell.h&quot;
 #include &quot;ADM_default.h&quot;
+/**
+    \fn qt4ShellLogger
+    \brief Redirect output to the shell
+*/
+static bool qt4ShellLogger(void *cookie,const char *v)
+{
+    qShell *s=(qShell *)cookie;
+    s-&gt;print(v);
+    return true;
+}
 
 /**
         \fn ADM_createJsShell
@@ -13,7 +23,9 @@
 bool ADM_startShell(jsShellEvaluate eval)
 {
         qShell *s= new qShell(eval);
+        ADM_jsRegisterLogger((void *)s,qt4ShellLogger);
         s-&gt;run();
+        ADM_jsUnregisterLogger();
         delete s;
         return true;
 }

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_shell/shell.ui
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_shell/shell.ui	2009-12-02 19:02:21 UTC (rev 5606)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_shell/shell.ui	2009-12-02 19:02:25 UTC (rev 5607)
@@ -25,9 +25,15 @@
      &lt;x&gt;20&lt;/x&gt;
      &lt;y&gt;0&lt;/y&gt;
      &lt;width&gt;511&lt;/width&gt;
-     &lt;height&gt;191&lt;/height&gt;
+     &lt;height&gt;161&lt;/height&gt;
     &lt;/rect&gt;
    &lt;/property&gt;
+   &lt;property name=&quot;focusPolicy&quot;&gt;
+    &lt;enum&gt;Qt::NoFocus&lt;/enum&gt;
+   &lt;/property&gt;
+   &lt;property name=&quot;contextMenuPolicy&quot;&gt;
+    &lt;enum&gt;Qt::NoContextMenu&lt;/enum&gt;
+   &lt;/property&gt;
   &lt;/widget&gt;
   &lt;widget class=&quot;QTextBrowser&quot; name=&quot;textBrowser_2&quot;&gt;
    &lt;property name=&quot;geometry&quot;&gt;
@@ -54,7 +60,23 @@
    &lt;property name=&quot;text&quot;&gt;
     &lt;string&gt;Evaluate&lt;/string&gt;
    &lt;/property&gt;
+   &lt;property name=&quot;shortcut&quot;&gt;
+    &lt;string&gt;Ctrl+Return&lt;/string&gt;
+   &lt;/property&gt;
   &lt;/widget&gt;
+  &lt;widget class=&quot;QPushButton&quot; name=&quot;clear&quot;&gt;
+   &lt;property name=&quot;geometry&quot;&gt;
+    &lt;rect&gt;
+     &lt;x&gt;430&lt;/x&gt;
+     &lt;y&gt;160&lt;/y&gt;
+     &lt;width&gt;97&lt;/width&gt;
+     &lt;height&gt;24&lt;/height&gt;
+    &lt;/rect&gt;
+   &lt;/property&gt;
+   &lt;property name=&quot;text&quot;&gt;
+    &lt;string&gt;Clear&lt;/string&gt;
+   &lt;/property&gt;
+  &lt;/widget&gt;
  &lt;/widget&gt;
  &lt;resources/&gt;
  &lt;connections/&gt;

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffTS/muxerffTS.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffTS/muxerffTS.cpp	2009-12-02 19:02:21 UTC (rev 5606)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerffTS/muxerffTS.cpp	2009-12-02 19:02:25 UTC (rev 5607)
@@ -104,7 +104,7 @@
         
         // /audio
         oc-&gt;mux_rate=30080*1000;
-        
+        audio_st-&gt;codec-&gt;bit_rate=a[0]-&gt;getInfo()-&gt;byterate*8;        
        
         oc-&gt;preload=3000; // 30 ms preloading
         oc-&gt;max_delay=2000; // 500 ms


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002815.html">[Avidemux-svn-commit] r5606 - in branches/avidemux_2.6_branch_mean:	avidemux/common avidemux/common/ADM_script avidemux/qt4	avidemux/qt4/ADM_userInterfaces	avidemux/qt4/ADM_userInterfaces/ADM_gui	avidemux/qt4/ADM_userInterfaces/ADM_shell	avidemux_plugins/ADM_demuxers/Asf	avidemux_plugins/ADM_muxers/muxerffTS
</A></li>
	<LI>Next message: <A HREF="002817.html">[Avidemux-svn-commit] r5608 -	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2816">[ date ]</a>
              <a href="thread.html#2816">[ thread ]</a>
              <a href="subject.html#2816">[ subject ]</a>
              <a href="author.html#2816">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">More information about the Avidemux-svn-commit
mailing list</a><br>
</body></html>
