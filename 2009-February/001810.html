<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Avidemux-svn-commit] r4580 - in	branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts:	. avidemux
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/avidemux-svn-commit/2009-February/index.html" >
   <LINK REL="made" HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r4580%20-%20in%0A%09branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts%3A%0A%09.%20avidemux&In-Reply-To=%3C200902081729.n18HT1e2029001%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001809.html">
   <LINK REL="Next"  HREF="001811.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Avidemux-svn-commit] r4580 - in	branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts:	. avidemux</H1>
    <B>gruntster at mail.berlios.de</B> 
    <A HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r4580%20-%20in%0A%09branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts%3A%0A%09.%20avidemux&In-Reply-To=%3C200902081729.n18HT1e2029001%40sheep.berlios.de%3E"
       TITLE="[Avidemux-svn-commit] r4580 - in	branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts:	. avidemux">gruntster at mail.berlios.de
       </A><BR>
    <I>Sun Feb  8 18:29:01 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="001809.html">[Avidemux-svn-commit] r4579 - in	branches/avidemux_2.5_branch_gruntster: . platforms	platforms/mac platforms/mac/External_libs	platforms/mac/External_libs/scripts	platforms/mac/External_libs/scripts/patches platforms/windows	platforms/windows/build_scripts	platforms/windows/build_scripts/avidemux_2.4	platforms/windows/build_scripts/avidemux_2.4/Tools	platforms/windows/installer
</A></li>
        <LI>Next message: <A HREF="001811.html">[Avidemux-svn-commit] r4581 - in	branches/avidemux_2.5_branch_gruntster/platforms/windows:	build_scripts/avidemux build_scripts/avidemux/Tools installer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1810">[ date ]</a>
              <a href="thread.html#1810">[ thread ]</a>
              <a href="subject.html#1810">[ subject ]</a>
              <a href="author.html#1810">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: gruntster
Date: 2009-02-08 18:28:54 +0100 (Sun, 08 Feb 2009)
New Revision: 4580

Added:
   branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/
   branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/Set Avidemux Environment Variables.bat
Removed:
   branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/Set Avidemux 2.4 Environment Variables.bat
   branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux_2.4/
Modified:
   branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/Set Common Environment Variables.bat
   branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/1. Perform Build.bat
   branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/1b. Continue Build.bat
   branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/2a. Update Notes.bat
   branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/2b. Package Build.bat
Log:
[Win32] update build scripts for 2.5

Modified: branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/Set Common Environment Variables.bat
===================================================================
--- branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/Set Common Environment Variables.bat	2009-02-08 17:04:43 UTC (rev 4579)
+++ branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/Set Common Environment Variables.bat	2009-02-08 17:28:54 UTC (rev 4580)
@@ -4,9 +4,9 @@
 if &quot;%PROCESSOR_ARCHITECTURE%&quot; == &quot;AMD64&quot; for /D %%d in (&quot;%ProgramFiles(x86)%&quot;) do set ProgramFiles32=%%~fsd
 set nsisDir=%ProgramFiles32%\NSIS
 
-set devDir=C:\Dev
+set devDir=E:\Dev
 set mingwDir=%devDir%\MinGW
-set msysDir=C:/Dev/MSYS
+set msysDir=E:/Dev/MSYS
 set usrLocalDir=%msysDir%/local
 set CMAKE_INCLUDE_PATH=%usrLocalDir%/include
 set CMAKE_LIBRARY_PATH=%usrLocalDir%/lib
@@ -68,7 +68,7 @@
 	goto error
 )
 
-set PATH=%cmakeDir%;%mingwDir%\bin;%usrLocalDir%\bin;%qtDir%\bin;%PATH%
+set PATH=%cmakeDir%;%mingwDir%\bin;%usrLocalDir%\bin;%msysDir%\bin;%qtDir%\bin;%PATH%
 
 goto end
 

Copied: branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux (from rev 4579, branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux_2.4)

Modified: branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/1. Perform Build.bat
===================================================================
--- branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux_2.4/1. Perform Build.bat	2009-02-08 17:04:43 UTC (rev 4579)
+++ branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/1. Perform Build.bat	2009-02-08 17:28:54 UTC (rev 4580)
@@ -1,20 +1,23 @@
 @echo off
 
 set curDir=%CD%
-call &quot;Set Avidemux 2.4 Environment Variables&quot;
+call &quot;Set Avidemux Environment Variables&quot;
 
 if errorlevel 1 goto error
 
 cd &quot;%sourceDir%&quot;
 echo Cleaning build directories
 rmdir /s /q build 2&gt; NULL
-rmdir /s /q buildcli 2&gt; NULL
 
+cd &quot;%sourceDir%\plugins&quot;
+rmdir /s /q build 2&gt; NULL
+
 if exist build goto removalFailure
-if exist buildcli goto removalFailure
+cd &quot;%sourceDir%&quot;
+if exist build goto removalFailure
 
-mkdir buildcli
 mkdir build
+mkdir plugins\build
 
 echo Performing Subversion update
 svn up .
@@ -25,7 +28,7 @@
 goto end
 
 :removalFailure
-echo ERROR - build or buildcli could not be fully deleted.
+echo ERROR - build directories could not be fully deleted.
 echo Aborting.
 pause
 

Modified: branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/1b. Continue Build.bat
===================================================================
--- branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux_2.4/1b. Continue Build.bat	2009-02-08 17:04:43 UTC (rev 4579)
+++ branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/1b. Continue Build.bat	2009-02-08 17:28:54 UTC (rev 4580)
@@ -1,29 +1,30 @@
 @echo off
 
-call &quot;Set Avidemux 2.4 Environment Variables&quot;
+call &quot;Set Avidemux Environment Variables&quot;
+if errorlevel 1 goto error
 
 cd &quot;%sourceDir%\build&quot;
+cmake -G&quot;MSYS Makefiles&quot; -DCMAKE_INSTALL_PREFIX=&quot;%buildDir%&quot; ..
 
-cmake -DUSE_LATE_BINDING=1 -G&quot;MinGW Makefiles&quot; ..
+if errorlevel 1 goto error
+pause
 
+set msysSourceDir=%sourceDir:\=/%
+echo %msysSourceDir%
+cd &quot;%sourceDir%\plugins\build&quot;
+cmake -G&quot;MSYS Makefiles&quot; -DCMAKE_INSTALL_PREFIX=&quot;%buildDir%&quot; -DAVIDEMUX_CORECONFIG_DIR=&quot;%msysSourceDir%/build/config&quot; -DAVIDEMUX_INSTALL_PREFIX=&quot;%buildDir%&quot; -DAVIDEMUX_SOURCE_DIR=&quot;%msysSourceDir%&quot; ..
+
 if errorlevel 1 goto error
-
 pause
-mingw32-make avidemux2_gtk
-mingw32-make avidemux2_qt4
-mingw32-make mofiles
-mingw32-make qmfiles
 
-copy /y .\avidemux\avidemux2_gtk.exe &quot;%buildDir%&quot;
-copy /y .\avidemux\avidemux2_qt4.exe &quot;%buildDir%&quot;
+cd &quot;%sourceDir%\build&quot;
+make install
 
-cd ..\buildcli
+cd &quot;%sourceDir%\plugins\build&quot;
+make install
 
-cmake -DUSE_LATE_BINDING=1 -G&quot;MinGW Makefiles&quot; -DNO_SDL=1 ..
-mingw32-make avidemux2_cli
+del /s &quot;%buildDir%\*.a&quot;
 
-copy /y .\avidemux\avidemux2_cli.exe &quot;%buildDir%&quot;
-
 echo Finished!
 goto end
 

Modified: branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/2a. Update Notes.bat
===================================================================
--- branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux_2.4/2a. Update Notes.bat	2009-02-08 17:04:43 UTC (rev 4579)
+++ branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/2a. Update Notes.bat	2009-02-08 17:28:54 UTC (rev 4580)
@@ -1,6 +1,6 @@
 @echo off
 
-call &quot;Set Avidemux 2.4 Environment Variables&quot;
+call &quot;Set Avidemux Environment Variables&quot;
 if errorlevel 1 goto error
 
 set PATH=%msysDir%\bin;%PATH%

Modified: branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/2b. Package Build.bat
===================================================================
--- branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux_2.4/2b. Package Build.bat	2009-02-08 17:04:43 UTC (rev 4579)
+++ branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/2b. Package Build.bat	2009-02-08 17:28:54 UTC (rev 4580)
@@ -1,6 +1,6 @@
 @echo off
 
-call &quot;Set Avidemux 2.4 Environment Variables&quot;
+call &quot;Set Avidemux Environment Variables&quot;
 
 cd Tools
 call &quot;Get Revision Number&quot;

Deleted: branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/Set Avidemux 2.4 Environment Variables.bat
===================================================================
--- branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux_2.4/Set Avidemux 2.4 Environment Variables.bat	2009-02-08 17:04:43 UTC (rev 4579)
+++ branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/Set Avidemux 2.4 Environment Variables.bat	2009-02-08 17:28:54 UTC (rev 4580)
@@ -1,50 +0,0 @@
-call &quot;..\Set Common Environment Variables&quot;
-
-if errorlevel 1 goto error
-
-zip &gt; NUL 2&gt; NUL
-if errorlevel 1 (
-	echo Info-ZIP could not be found in the PATH.  Please download from <A HREF="http://www.info-zip.org">http://www.info-zip.org</A>
-	goto error
-)
-
-advzip &gt; NUL 2&gt; NUL
-if errorlevel 1 (
-	echo AdvanceCOMP could not be found in the PATH.  Please download from <A HREF="http://advancemame.sourceforge.net">http://advancemame.sourceforge.net</A>
-	goto error
-)
-
-svn help &gt; NUL 2&gt; NUL
-if errorlevel 1 (
-	echo Subversion could not be found in the PATH.  Please download from <A HREF="http://subversion.tigris.org/">http://subversion.tigris.org/</A>
-	goto error
-)
-
-xsltproc --version &gt; NUL 2&gt; NUL
-if errorlevel 1 (
-	echo xsltproc could not be found in the PATH.  Please download from <A HREF="http://www.zlatkovic.com">http://www.zlatkovic.com</A>
-	goto error
-)
-
-set buildDir=%devDir%\avidemux_2.4_build
-set curDir=%CD%
-cd ..\..\..\..
-set sourceDir=%CD%
-cd &quot;%curDir%&quot;
-
-if not exist &quot;%buildDir%&quot; (
-	echo Build directory could not be found at &quot;%buildDir%&quot;.
-	goto error
-)
-
-if not exist &quot;%sourceDir%&quot; (
-	echo Source directory could not be found at &quot;%sourceDir%&quot;.
-	goto error
-)
-
-goto end
-
-:error
-set ERRORLEVEL=1
-
-:end
\ No newline at end of file

Copied: branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/Set Avidemux Environment Variables.bat (from rev 4579, branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux_2.4/Set Avidemux 2.4 Environment Variables.bat)
===================================================================
--- branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux_2.4/Set Avidemux 2.4 Environment Variables.bat	2009-02-08 17:04:43 UTC (rev 4579)
+++ branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/Set Avidemux Environment Variables.bat	2009-02-08 17:28:54 UTC (rev 4580)
@@ -0,0 +1,45 @@
+call &quot;..\Set Common Environment Variables&quot;
+
+if errorlevel 1 goto error
+
+zip &gt; NUL 2&gt; NUL
+if errorlevel 1 (
+	echo Info-ZIP could not be found in the PATH.  Please download from <A HREF="http://www.info-zip.org">http://www.info-zip.org</A>
+	goto error
+)
+
+advzip &gt; NUL 2&gt; NUL
+if errorlevel 1 (
+	echo AdvanceCOMP could not be found in the PATH.  Please download from <A HREF="http://advancemame.sourceforge.net">http://advancemame.sourceforge.net</A>
+	goto error
+)
+
+svn help &gt; NUL 2&gt; NUL
+if errorlevel 1 (
+	echo Subversion could not be found in the PATH.  Please download from <A HREF="http://subversion.tigris.org/">http://subversion.tigris.org/</A>
+	goto error
+)
+
+xsltproc --version &gt; NUL 2&gt; NUL
+if errorlevel 1 (
+	echo xsltproc could not be found in the PATH.  Please download from <A HREF="http://www.zlatkovic.com">http://www.zlatkovic.com</A>
+	goto error
+)
+
+set buildDir=%devDir%\avidemux_2.5_build
+set curDir=%CD%
+cd ..\..\..\..
+set sourceDir=%CD%
+cd &quot;%curDir%&quot;
+
+if not exist &quot;%sourceDir%&quot; (
+	echo Source directory could not be found at &quot;%sourceDir%&quot;.
+	goto error
+)
+
+goto end
+
+:error
+set ERRORLEVEL=1
+
+:end
\ No newline at end of file


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001809.html">[Avidemux-svn-commit] r4579 - in	branches/avidemux_2.5_branch_gruntster: . platforms	platforms/mac platforms/mac/External_libs	platforms/mac/External_libs/scripts	platforms/mac/External_libs/scripts/patches platforms/windows	platforms/windows/build_scripts	platforms/windows/build_scripts/avidemux_2.4	platforms/windows/build_scripts/avidemux_2.4/Tools	platforms/windows/installer
</A></li>
	<LI>Next message: <A HREF="001811.html">[Avidemux-svn-commit] r4581 - in	branches/avidemux_2.5_branch_gruntster/platforms/windows:	build_scripts/avidemux build_scripts/avidemux/Tools installer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1810">[ date ]</a>
              <a href="thread.html#1810">[ thread ]</a>
              <a href="subject.html#1810">[ subject ]</a>
              <a href="author.html#1810">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">More information about the Avidemux-svn-commit
mailing list</a><br>
</body></html>
