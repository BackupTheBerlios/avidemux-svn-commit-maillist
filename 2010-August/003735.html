<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Avidemux-svn-commit] r6549 - in	branches/avidemux_2.6_branch_mean/avidemux:	cli/ADM_userInterfaces/ADM_gui2 common/ADM_commonUI	common/ADM_editor gtk/ADM_userInterfaces/ADM_gui2	qt4/ADM_userInterfaces/ADM_gui
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/avidemux-svn-commit/2010-August/index.html" >
   <LINK REL="made" HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r6549%20-%20in%0A%09branches/avidemux_2.6_branch_mean/avidemux%3A%0A%09cli/ADM_userInterfaces/ADM_gui2%20common/ADM_commonUI%0A%09common/ADM_editor%20gtk/ADM_userInterfaces/ADM_gui2%0A%09qt4/ADM_userInterfaces/ADM_gui&In-Reply-To=%3C20100824060402.F3988480D1F%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003734.html">
   <LINK REL="Next"  HREF="003736.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Avidemux-svn-commit] r6549 - in	branches/avidemux_2.6_branch_mean/avidemux:	cli/ADM_userInterfaces/ADM_gui2 common/ADM_commonUI	common/ADM_editor gtk/ADM_userInterfaces/ADM_gui2	qt4/ADM_userInterfaces/ADM_gui</H1>
    <B>mean at mail.berlios.de</B> 
    <A HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r6549%20-%20in%0A%09branches/avidemux_2.6_branch_mean/avidemux%3A%0A%09cli/ADM_userInterfaces/ADM_gui2%20common/ADM_commonUI%0A%09common/ADM_editor%20gtk/ADM_userInterfaces/ADM_gui2%0A%09qt4/ADM_userInterfaces/ADM_gui&In-Reply-To=%3C20100824060402.F3988480D1F%40sheep.berlios.de%3E"
       TITLE="[Avidemux-svn-commit] r6549 - in	branches/avidemux_2.6_branch_mean/avidemux:	cli/ADM_userInterfaces/ADM_gui2 common/ADM_commonUI	common/ADM_editor gtk/ADM_userInterfaces/ADM_gui2	qt4/ADM_userInterfaces/ADM_gui">mean at mail.berlios.de
       </A><BR>
    <I>Tue Aug 24 08:04:02 CEST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="003734.html">[Avidemux-svn-commit] r6548 -	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_vorbis
</A></li>
        <LI>Next message: <A HREF="003736.html">[Avidemux-svn-commit] r6550 - in	branches/avidemux_2.6_branch_mean/avidemux: common	common/ADM_audioFilter/src common/ADM_audiocodec	common/ADM_commonUI common/ADM_editor common/ADM_render	common/ADM_toolkit common/ADM_videoFilter2/src	qt4/ADM_UIs/src qt4/ADM_userInterfaces/ADM_dialog	qt4/ADM_userInterfaces/ADM_gui
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3735">[ date ]</a>
              <a href="thread.html#3735">[ thread ]</a>
              <a href="subject.html#3735">[ subject ]</a>
              <a href="author.html#3735">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: mean
Date: 2010-08-24 08:04:02 +0200 (Tue, 24 Aug 2010)
New Revision: 6549

Removed:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_outputfmt.h
Modified:
   branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_gui2/gui_none.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/GUI_ui.h
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_gui2/GUI_bindings.cpp
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/Q_gui2.cpp
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/gui2.ui
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/translation_table.h
Log:
[UI] Remove obsolete reference to ADM_outputfmt.h, make the time entry non editable, add a time pushbutton

Modified: branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_gui2/gui_none.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_gui2/gui_none.cpp	2010-08-24 06:04:00 UTC (rev 6548)
+++ branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_gui2/gui_none.cpp	2010-08-24 06:04:02 UTC (rev 6549)
@@ -140,7 +140,7 @@
 }
 void UI_purge( void )
 {}
-uint32_t UI_GetCurrentFormat( void )
+int UI_GetCurrentFormat( void )
 {
 	return cliFormat;
 }

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/GUI_ui.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/GUI_ui.h	2010-08-24 06:04:00 UTC (rev 6548)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/GUI_ui.h	2010-08-24 06:04:02 UTC (rev 6549)
@@ -1,7 +1,7 @@
 #ifndef ADM_GUI_UI_H
 #define ADM_GUI_UI_H
 
-#include &quot;ADM_editor/ADM_outputfmt.h&quot;
+//#include &quot;ADM_editor/ADM_outputfmt.h&quot;
 
 void UI_updateFrameCount(uint32_t curFrame);
 void UI_setFrameCount(uint32_t curFrame,uint32_t total);
@@ -36,7 +36,7 @@
 void UI_setVideoCodec( int i);
 
 /* We deal index wise here...*/
-uint32_t UI_GetCurrentFormat( void );
+int      UI_GetCurrentFormat( void );
 bool 	 UI_SetCurrentFormat( uint32_t fmt );
 
 void UI_toogleSide(void);

Deleted: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_outputfmt.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_outputfmt.h	2010-08-24 06:04:00 UTC (rev 6548)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_outputfmt.h	2010-08-24 06:04:02 UTC (rev 6549)
@@ -1,59 +0,0 @@
-//
-// C++ Interface: %{MODULE}
-//
-// Description: 
-//
-//
-// (c) Mean, <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
-//
-// Copyright: See COPYING file that comes with this distribution
-// 2002-2004
-//
-#ifndef ADM_OUT_FMT
-#define ADM_OUT_FMT
-
-typedef enum 
-{
-	ADM_AVI=0,
-	ADM_AVI_DUAL,
-	ADM_AVI_PAK,
-	ADM_AVI_UNP,
-	ADM_PS,
-	ADM_TS,
-	ADM_ES,
-	ADM_MP4,
-	ADM_OGM,
-	ADM_PSP,
-	ADM_FLV,
-        ADM_MATROSKA,
-	ADM_DUMMY,
-	ADM_FORMAT_MAX,
-}ADM_OUT_FORMAT;
-
-typedef struct 
-{
-  ADM_OUT_FORMAT format;
-  const char *text;
-}ADM_FORMAT_DESC;
-/**
- * 	This is used to fill-in the menus in GUIs
- */
-const ADM_FORMAT_DESC ADM_allOutputFormat[]=
-{
-  {ADM_AVI,QT_TR_NOOP(&quot;AVI&quot;)},
-  {ADM_AVI_DUAL,QT_TR_NOOP(&quot;AVI, dual audio&quot;)},
-  {ADM_AVI_PAK,QT_TR_NOOP(&quot;AVI, pack VOP&quot;)},
-  {ADM_AVI_UNP,QT_TR_NOOP(&quot;AVI, unpack VOP&quot;)},  
-  {ADM_PS,QT_TR_NOOP(&quot;MPEG-PS (A+V)&quot;)},
-  {ADM_TS,QT_TR_NOOP(&quot;MPEG-TS (A+V)&quot;)},
-  {ADM_ES,QT_TR_NOOP(&quot;MPEG video&quot;)},
-  {ADM_MP4,QT_TR_NOOP(&quot;MP4&quot;)},
-  {ADM_OGM,QT_TR_NOOP(&quot;OGM&quot;)},
-  {ADM_PSP,QT_TR_NOOP(&quot;PSP&quot;)},
-  {ADM_FLV,QT_TR_NOOP(&quot;FLV&quot;)},
-  {ADM_MATROSKA,QT_TR_NOOP(&quot;MKV&quot;)},
-  {ADM_DUMMY,QT_TR_NOOP(&quot;DUMMY&quot;)}
-};
-
-#endif
-//EOF

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_gui2/GUI_bindings.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_gui2/GUI_bindings.cpp	2010-08-24 06:04:00 UTC (rev 6548)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_gui2/GUI_bindings.cpp	2010-08-24 06:04:02 UTC (rev 6549)
@@ -1191,7 +1191,7 @@
     \brief Returns index of the currently selected container
 
 */
-uint32_t UI_GetCurrentFormat( void )
+int UI_GetCurrentFormat( void )
 {
 
 	return (uint32_t)gtk_combo_box_get_active(GTK_COMBO_BOX(glade.getWidget(FORMAT_WIDGET)));

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/Q_gui2.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/Q_gui2.cpp	2010-08-24 06:04:00 UTC (rev 6548)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/Q_gui2.cpp	2010-08-24 06:04:02 UTC (rev 6549)
@@ -23,7 +23,7 @@
 
 //#include &quot;ADM_codecs/ADM_codec.h&quot;
 #include &quot;gui_action.hxx&quot;
-#include &quot;ADM_editor/ADM_outputfmt.h&quot;
+//#include &quot;ADM_editor/ADM_outputfmt.h&quot;
 #include &quot;DIA_fileSel.h&quot;
 #include &quot;ADM_vidMisc.h&quot;
 #include &quot;prefs.h&quot;
@@ -277,7 +277,7 @@
 	ui.currentTime-&gt;setValidator(timeValidator);
 	ui.currentTime-&gt;setInputMask(&quot;99:99:99.999&quot;);
 
-	connect(ui.currentTime, SIGNAL(editingFinished()), this, SLOT(currentTimeChanged()));
+	//connect(ui.currentTime, SIGNAL(editingFinished()), this, SLOT(currentTimeChanged()));
 
 	/* Build the custom menu */
     jsMenu=new QMenu(&quot;javaScript&quot;);
@@ -289,7 +289,7 @@
 	this-&gt;installEventFilter(this);
 	slider-&gt;installEventFilter(this);
 	
-	ui.currentTime-&gt;installEventFilter(this);
+	//ui.currentTime-&gt;installEventFilter(this);
 
 	this-&gt;setFocus(Qt::OtherFocusReason);
 
@@ -947,11 +947,11 @@
     \brief  Returns the current selected output format
 */
 
-ADM_OUT_FORMAT 	UI_GetCurrentFormat( void )
+int 	UI_GetCurrentFormat( void )
 {
 	int i=WIDGET(comboBoxFormat)-&gt;currentIndex();
 	if(i&lt;0) i=0;
-	return (ADM_OUT_FORMAT)i; 
+	return (int)i; 
 }
 /**
     \fn     UI_SetCurrentFormat( ADM_OUT_FORMAT fmt )

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/gui2.ui
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/gui2.ui	2010-08-24 06:04:00 UTC (rev 6548)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/gui2.ui	2010-08-24 06:04:02 UTC (rev 6549)
@@ -990,15 +990,9 @@
              &lt;number&gt;0&lt;/number&gt;
             &lt;/property&gt;
             &lt;item&gt;
-             &lt;widget class=&quot;QLabel&quot; name=&quot;label_6&quot;&gt;
-              &lt;property name=&quot;sizePolicy&quot;&gt;
-               &lt;sizepolicy hsizetype=&quot;Preferred&quot; vsizetype=&quot;Fixed&quot;&gt;
-                &lt;horstretch&gt;0&lt;/horstretch&gt;
-                &lt;verstretch&gt;0&lt;/verstretch&gt;
-               &lt;/sizepolicy&gt;
-              &lt;/property&gt;
+             &lt;widget class=&quot;QPushButton&quot; name=&quot;pushButtonTime&quot;&gt;
               &lt;property name=&quot;text&quot;&gt;
-               &lt;string&gt;Time:&lt;/string&gt;
+               &lt;string&gt;Time&lt;/string&gt;
               &lt;/property&gt;
              &lt;/widget&gt;
             &lt;/item&gt;
@@ -1022,6 +1016,9 @@
               &lt;property name=&quot;maxLength&quot;&gt;
                &lt;number&gt;12&lt;/number&gt;
               &lt;/property&gt;
+              &lt;property name=&quot;readOnly&quot;&gt;
+               &lt;bool&gt;true&lt;/bool&gt;
+              &lt;/property&gt;
              &lt;/widget&gt;
             &lt;/item&gt;
             &lt;item&gt;
@@ -1366,7 +1363,6 @@
     &lt;addaction name=&quot;actionGo_to_Marker_A&quot;/&gt;
     &lt;addaction name=&quot;actionGo_to_Marker_B&quot;/&gt;
     &lt;addaction name=&quot;separator&quot;/&gt;
-    &lt;addaction name=&quot;actionJump_to_Frame&quot;/&gt;
     &lt;addaction name=&quot;actionJump_to_Time&quot;/&gt;
    &lt;/widget&gt;
    &lt;widget class=&quot;QMenu&quot; name=&quot;menuTools&quot;&gt;
@@ -1382,6 +1378,17 @@
     &lt;addaction name=&quot;actionJavaScript_shell&quot;/&gt;
     &lt;addaction name=&quot;actionPython_Shell&quot;/&gt;
    &lt;/widget&gt;
+   &lt;widget class=&quot;QMenu&quot; name=&quot;menuAudio&quot;&gt;
+    &lt;property name=&quot;title&quot;&gt;
+     &lt;string&gt;&amp;Audio&lt;/string&gt;
+    &lt;/property&gt;
+    &lt;addaction name=&quot;actionMain_Track&quot;/&gt;
+    &lt;addaction name=&quot;actionSecondary_Track&quot;/&gt;
+    &lt;addaction name=&quot;actionBuild_VBR_time_map&quot;/&gt;
+    &lt;addaction name=&quot;separator&quot;/&gt;
+    &lt;addaction name=&quot;actionSave_2&quot;/&gt;
+    &lt;addaction name=&quot;actionFilters_2&quot;/&gt;
+   &lt;/widget&gt;
    &lt;widget class=&quot;QMenu&quot; name=&quot;menuFile&quot;&gt;
     &lt;property name=&quot;title&quot;&gt;
      &lt;string&gt;&amp;File&lt;/string&gt;
@@ -1425,17 +1432,6 @@
     &lt;addaction name=&quot;separator&quot;/&gt;
     &lt;addaction name=&quot;actionQuit&quot;/&gt;
    &lt;/widget&gt;
-   &lt;widget class=&quot;QMenu&quot; name=&quot;menuAudio&quot;&gt;
-    &lt;property name=&quot;title&quot;&gt;
-     &lt;string&gt;&amp;Audio&lt;/string&gt;
-    &lt;/property&gt;
-    &lt;addaction name=&quot;actionMain_Track&quot;/&gt;
-    &lt;addaction name=&quot;actionSecondary_Track&quot;/&gt;
-    &lt;addaction name=&quot;actionBuild_VBR_time_map&quot;/&gt;
-    &lt;addaction name=&quot;separator&quot;/&gt;
-    &lt;addaction name=&quot;actionSave_2&quot;/&gt;
-    &lt;addaction name=&quot;actionFilters_2&quot;/&gt;
-   &lt;/widget&gt;
    &lt;addaction name=&quot;menuFile&quot;/&gt;
    &lt;addaction name=&quot;menuEdit&quot;/&gt;
    &lt;addaction name=&quot;menuView&quot;/&gt;

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/translation_table.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/translation_table.h	2010-08-24 06:04:00 UTC (rev 6548)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/translation_table.h	2010-08-24 06:04:02 UTC (rev 6549)
@@ -47,7 +47,6 @@
 PROCESS(actionLast_Frame,ACT_End) \
 PROCESS(actionGo_to_Marker_A,ACT_GotoMarkA) \
 PROCESS(actionGo_to_Marker_B,ACT_GotoMarkB) \
-PROCESS(actionJump_to_Frame,ACT_Goto) \
 PROCESS(actionJump_to_Time,ACT_GotoTime) \
 PROCESS(actionShow_built_in_support,ACT_BUILT_IN) \
 PROCESS(actionAbout_avidemux,ACT_About) \
@@ -97,7 +96,8 @@
 PROCESS(toolButtonFirstFrame, ACT_Begin) \
 PROCESS(toolButtonLastFrame, ACT_End) \
 PROCESS(pushButtonJumpToMarkerA, ACT_GotoMarkA) \
-PROCESS(pushButtonJumpToMarkerB, ACT_GotoMarkB)
+PROCESS(pushButtonJumpToMarkerB, ACT_GotoMarkB) \
+PROCESS(pushButtonTime, ACT_GotoTime)
 
 
 /*


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003734.html">[Avidemux-svn-commit] r6548 -	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_vorbis
</A></li>
	<LI>Next message: <A HREF="003736.html">[Avidemux-svn-commit] r6550 - in	branches/avidemux_2.6_branch_mean/avidemux: common	common/ADM_audioFilter/src common/ADM_audiocodec	common/ADM_commonUI common/ADM_editor common/ADM_render	common/ADM_toolkit common/ADM_videoFilter2/src	qt4/ADM_UIs/src qt4/ADM_userInterfaces/ADM_dialog	qt4/ADM_userInterfaces/ADM_gui
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3735">[ date ]</a>
              <a href="thread.html#3735">[ thread ]</a>
              <a href="subject.html#3735">[ subject ]</a>
              <a href="author.html#3735">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">More information about the Avidemux-svn-commit
mailing list</a><br>
</body></html>
