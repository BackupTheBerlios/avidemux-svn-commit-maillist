<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Avidemux-svn-commit] r6532 - in branches/avidemux_2.6_branch_mean:	avidemux/cli/ADM_UIs/include avidemux/cli/ADM_UIs/src	avidemux/gtk/ADM_UIs/include avidemux/gtk/ADM_UIs/src	avidemux/gtk/ADM_userInterfaces/ADM_dialog	avidemux/qt4/ADM_UIs/include avidemux/qt4/ADM_UIs/src	avidemux/qt4/ADM_userInterfaces/ADM_dialog	avidemux/qt4/ADM_userInterfaces/ADM_filters	avidemux_core/ADM_coreVideoFilter/include	avidemux_core/ADM_coreVideoFilter/src	avidemux_plugins/ADM_videoFilters6/crop	avidemux_plugins/ADM_videoFilters6/crop/gtk	avidemux_plugins/ADM_videoFilters6/crop/qt4
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/avidemux-svn-commit/2010-August/index.html" >
   <LINK REL="made" HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r6532%20-%20in%20branches/avidemux_2.6_branch_mean%3A%0A%09avidemux/cli/ADM_UIs/include%20avidemux/cli/ADM_UIs/src%0A%09avidemux/gtk/ADM_UIs/include%20avidemux/gtk/ADM_UIs/src%0A%09avidemux/gtk/ADM_userInterfaces/ADM_dialog%0A%09avidemux/qt4/ADM_UIs/include%20avidemux/qt4/ADM_UIs/src%0A%09avidemux/qt4/ADM_userInterfaces/ADM_dialog%0A%09avidemux/qt4/ADM_userInterfaces/ADM_filters%0A%09avidemux_core/ADM_coreVideoFilter/include%0A%09avidemux_core/ADM_coreVideoFilter/src%0A%09avidemux_plugins/ADM_videoFilters6/crop%0A%09avidemux_plugins/ADM_videoFilters6/crop/gtk%0A%09avidemux_plugins/ADM_videoFilters6/crop/qt4&In-Reply-To=%3C20100815144549.64F7A480F44%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003718.html">
   <LINK REL="Next"  HREF="003720.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Avidemux-svn-commit] r6532 - in branches/avidemux_2.6_branch_mean:	avidemux/cli/ADM_UIs/include avidemux/cli/ADM_UIs/src	avidemux/gtk/ADM_UIs/include avidemux/gtk/ADM_UIs/src	avidemux/gtk/ADM_userInterfaces/ADM_dialog	avidemux/qt4/ADM_UIs/include avidemux/qt4/ADM_UIs/src	avidemux/qt4/ADM_userInterfaces/ADM_dialog	avidemux/qt4/ADM_userInterfaces/ADM_filters	avidemux_core/ADM_coreVideoFilter/include	avidemux_core/ADM_coreVideoFilter/src	avidemux_plugins/ADM_videoFilters6/crop	avidemux_plugins/ADM_videoFilters6/crop/gtk	avidemux_plugins/ADM_videoFilters6/crop/qt4</H1>
    <B>mean at mail.berlios.de</B> 
    <A HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r6532%20-%20in%20branches/avidemux_2.6_branch_mean%3A%0A%09avidemux/cli/ADM_UIs/include%20avidemux/cli/ADM_UIs/src%0A%09avidemux/gtk/ADM_UIs/include%20avidemux/gtk/ADM_UIs/src%0A%09avidemux/gtk/ADM_userInterfaces/ADM_dialog%0A%09avidemux/qt4/ADM_UIs/include%20avidemux/qt4/ADM_UIs/src%0A%09avidemux/qt4/ADM_userInterfaces/ADM_dialog%0A%09avidemux/qt4/ADM_userInterfaces/ADM_filters%0A%09avidemux_core/ADM_coreVideoFilter/include%0A%09avidemux_core/ADM_coreVideoFilter/src%0A%09avidemux_plugins/ADM_videoFilters6/crop%0A%09avidemux_plugins/ADM_videoFilters6/crop/gtk%0A%09avidemux_plugins/ADM_videoFilters6/crop/qt4&In-Reply-To=%3C20100815144549.64F7A480F44%40sheep.berlios.de%3E"
       TITLE="[Avidemux-svn-commit] r6532 - in branches/avidemux_2.6_branch_mean:	avidemux/cli/ADM_UIs/include avidemux/cli/ADM_UIs/src	avidemux/gtk/ADM_UIs/include avidemux/gtk/ADM_UIs/src	avidemux/gtk/ADM_userInterfaces/ADM_dialog	avidemux/qt4/ADM_UIs/include avidemux/qt4/ADM_UIs/src	avidemux/qt4/ADM_userInterfaces/ADM_dialog	avidemux/qt4/ADM_userInterfaces/ADM_filters	avidemux_core/ADM_coreVideoFilter/include	avidemux_core/ADM_coreVideoFilter/src	avidemux_plugins/ADM_videoFilters6/crop	avidemux_plugins/ADM_videoFilters6/crop/gtk	avidemux_plugins/ADM_videoFilters6/crop/qt4">mean at mail.berlios.de
       </A><BR>
    <I>Sun Aug 15 16:45:49 CEST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="003718.html">[Avidemux-svn-commit] r6531 -	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/crop
</A></li>
        <LI>Next message: <A HREF="003720.html">[Avidemux-svn-commit] r6533 - in branches/avidemux_2.6_branch_mean:	avidemux/qt4/ADM_userInterfaces/ADM_dialog	avidemux_core/ADM_coreVideoFilter/include	avidemux_plugins/ADM_videoFilters6	avidemux_plugins/ADM_videoFilters6/stackField
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3719">[ date ]</a>
              <a href="thread.html#3719">[ thread ]</a>
              <a href="subject.html#3719">[ subject ]</a>
              <a href="author.html#3719">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: mean
Date: 2010-08-15 16:45:49 +0200 (Sun, 15 Aug 2010)
New Revision: 6532

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_UIs/include/DIA_flyDialogCli.h
   branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_UIs/src/DIA_flyDialogCli.cpp
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/include/DIA_flyDialogGtk.h
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/DIA_flyDialogGtk.cpp
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_flyPreview.h
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_preview.cpp
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/include/DIA_flyDialogQt4.h
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_flyDialogQt4.cpp
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/DIA_flyPreview.h
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters/Q_seekablePreview.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/include/DIA_flyDialog.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/src/DIA_flyDialog.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/crop/DIA_flyCrop.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/crop/DIA_flyCrop.h
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/crop/gtk/DIA_crop.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/crop/qt4/Q_crop.cpp
Log:
[fly] split yuv &amp; rgb handling in flyDialog

Modified: branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_UIs/include/DIA_flyDialogCli.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_UIs/include/DIA_flyDialogCli.h	2010-08-15 14:45:46 UTC (rev 6531)
+++ branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_UIs/include/DIA_flyDialogCli.h	2010-08-15 14:45:49 UTC (rev 6532)
@@ -25,7 +25,7 @@
                                 ADM_flyDialog(width,height,in,canvas,slider,yuv,resizeMethod) {};
 
   virtual uint8_t  cleanup2(void);
-  virtual uint8_t  isRgbInverted(void);
+  virtual bool     isRgbInverted(void);
   virtual uint8_t  display(void);
   virtual float   calcZoomFactor(void);
   virtual uint32_t sliderGet(void);

Modified: branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_UIs/src/DIA_flyDialogCli.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_UIs/src/DIA_flyDialogCli.cpp	2010-08-15 14:45:46 UTC (rev 6531)
+++ branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_UIs/src/DIA_flyDialogCli.cpp	2010-08-15 14:45:49 UTC (rev 6532)
@@ -46,7 +46,7 @@
         return 0;      
 }
 
-uint8_t ADM_flyDialogCli::isRgbInverted(void)
+bool ADM_flyDialogCli::isRgbInverted(void)
 {
         return 0; 
 }

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/include/DIA_flyDialogGtk.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/include/DIA_flyDialogGtk.h	2010-08-15 14:45:46 UTC (rev 6531)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/include/DIA_flyDialogGtk.h	2010-08-15 14:45:49 UTC (rev 6532)
@@ -31,13 +31,13 @@
   ADM_flyDialogGtk(uint32_t width, uint32_t height, ADM_coreVideoFilter *in,
                               void *canvas, void *slider, int yuv, ResizeMethod resizeMethod);
   virtual           ~ADM_flyDialogGtk(void);
-  virtual uint8_t  isRgbInverted(void);
-  virtual uint8_t  display(void);
-  virtual float   calcZoomFactor(void);
+  virtual bool     isRgbInverted(void);
+  virtual uint8_t  display(uint8_t *rgbdata);
+  virtual float    calcZoomFactor(void);
   virtual uint32_t sliderGet(void);
   virtual uint8_t  sliderSet(uint32_t value);
-  virtual void    postInit(uint8_t reInit);
-  virtual bool    setCurrentPts(uint64_t  pts){return true;};
+  virtual void     postInit(uint8_t reInit);
+  virtual bool     setCurrentPts(uint64_t  pts){return true;};
 };
 
 #endif

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/DIA_flyDialogGtk.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/DIA_flyDialogGtk.cpp	2010-08-15 14:45:46 UTC (rev 6531)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/src/DIA_flyDialogGtk.cpp	2010-08-15 14:45:49 UTC (rev 6532)
@@ -111,10 +111,10 @@
 	return UI_calcZoomToFitScreen(window, (GtkWidget*)_canvas, _w, _h);
 }
 
-uint8_t  ADM_flyDialogGtk::display(void)
+uint8_t  ADM_flyDialogGtk::display(uint8_t *rgbData)
 {
 	ADM_assert(_canvas);
-	ADM_assert(_rgbBufferOut);
+	ADM_assert(rgbData);
     GtkWidget *widget=(GtkWidget*)_canvas;
     gdk_draw_rgb_32_image(widget-&gt;window, widget-&gt;style-&gt;fg_gc[GTK_STATE_NORMAL], 0,    // X
                        0,       // y
@@ -122,7 +122,7 @@
                        _zoomH,       //h*2, // heigth
                        GDK_RGB_DITHER_NONE,
                        //GDK_RGB_DITHER_MAX,  // dithering
-                       (guchar *) _rgbBufferOut,  // buffer
+                       (guchar *) rgbData,  // buffer
                        _zoomW * 4);
 
 	//GUI_RGBDisplay(_rgbBufferOut, _zoomW, _zoomH, _canvas);
@@ -145,9 +145,9 @@
 	return 1; 
 }
 
-uint8_t ADM_flyDialogGtk::isRgbInverted(void)
+bool ADM_flyDialogGtk::isRgbInverted(void)
 {
-	return 0; 
+	return false; 
 }
 
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_flyPreview.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_flyPreview.h	2010-08-15 14:45:46 UTC (rev 6531)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_flyPreview.h	2010-08-15 14:45:49 UTC (rev 6532)
@@ -7,24 +7,40 @@
 	uint8_t download(void) {return 1;}
 	uint8_t upload(void) {return 1;}
 	uint8_t cleanup(void) {return 1;}
-	uint8_t setData(uint8_t *buffer) {_rgb-&gt;convert(buffer, _rgbBufferOut); return 1;}
+	uint8_t setData(uint8_t *buffer) 
+            {
+              #warning FIXME  NO DISPLAY   
+            action-&gt;process();
+            //_rgb-&gt;convert(buffer, _rgbBufferOut); 
+            return 1;
 
+            }
+
 	flyPreview(uint32_t width, uint32_t height, void *canvas) : 
-	  ADM_flyDialogGtk(width, height, NULL, canvas, NULL, 0, RESIZE_NONE) {delete[] _rgbBuffer; _rgbBuffer = NULL;};
-	virtual ~flyPreview(void) {_rgbBuffer = NULL;};
+	  ADM_flyDialogGtk(width, height, NULL, canvas, NULL, true, RESIZE_AUTO) 
+        {
+            
+        };
+	virtual ~flyPreview(void) {};
     bool setCurrentPts(uint64_t pts) {return 1;}
 };
 
 class flySeekablePreview : public ADM_flyDialogGtk
 {
 public:
-	uint8_t process(void) {_rgbBufferOut = _rgbBuffer; return 1;}
+    uint8_t processYuv(ADMImage *in,ADMImage *out) 
+            {
+                out-&gt;duplicate(in);
+                return 1;
+            }
+
 	uint8_t download(void) {return 1;}
 	uint8_t upload(void) {return 1;}
 	uint8_t cleanup(void) {return 1;}
     bool setCurrentPts(uint64_t pts) {return 1;}
 	flySeekablePreview(uint32_t width, uint32_t height, ADM_coreVideoFilter *videoStream, void *canvas, void *slider) : 
-	  ADM_flyDialogGtk(width, height, videoStream, canvas, slider, 0, RESIZE_AUTO) {delete[] _rgbBufferOut; _rgbBufferOut = NULL;};
-	virtual ~flySeekablePreview(void) {_rgbBufferOut = NULL;};
+	  ADM_flyDialogGtk(width, height, videoStream, canvas, slider, 0, RESIZE_AUTO) 
+            {};
+	virtual ~flySeekablePreview(void) {};
 };
 #endif

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_preview.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_preview.cpp	2010-08-15 14:45:46 UTC (rev 6531)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_preview.cpp	2010-08-15 14:45:49 UTC (rev 6532)
@@ -77,7 +77,7 @@
 	gtk_widget_show(dialog);
 
 	seekablePreview = new flySeekablePreview(width, height, videoStream, WID(drawingarea1), WID(scale));
-	seekablePreview-&gt;process();
+//	seekablePreview-&gt;process();
 	seekablePreview-&gt;sliderSet(frame);
 	seekablePreview-&gt;sliderChanged();
 
@@ -97,7 +97,7 @@
 
 void seekablePreview_draw(void)
 {
-	seekablePreview-&gt;display();
+	seekablePreview-&gt;sameImage();
 }
 
 void seekablePreview_frame_changed(void)
@@ -131,9 +131,7 @@
 {
 	if (dialog)
 	{
-		preview-&gt;setData(buffer);
-		preview-&gt;display();
-
+		preview-&gt;display(buffer);
 		return 1;
 	}
 
@@ -153,7 +151,7 @@
 
 void preview_draw(void)
 {
-	preview-&gt;display();
+	preview-&gt;sameImage();
 }
 
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/include/DIA_flyDialogQt4.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/include/DIA_flyDialogQt4.h	2010-08-15 14:45:46 UTC (rev 6531)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/include/DIA_flyDialogQt4.h	2010-08-15 14:45:49 UTC (rev 6532)
@@ -38,13 +38,13 @@
                               void *canvas, void *slider, int yuv, ResizeMethod resizeMethod);
 
   
-  virtual uint8_t  isRgbInverted(void);
-  virtual uint8_t  display(void);
-  virtual float   calcZoomFactor(void);
+  virtual bool     isRgbInverted(void);
+  virtual uint8_t  display(uint8_t *rgbData);
+  virtual float    calcZoomFactor(void);
   virtual uint32_t sliderGet(void);
   virtual uint8_t  sliderSet(uint32_t value);
-  virtual void    postInit(uint8_t reInit);
-    bool          setCurrentPts(uint64_t pts) {return 1;}
+  virtual void     postInit(uint8_t reInit);
+    bool           setCurrentPts(uint64_t pts) {return 1;}
 };
 
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_flyDialogQt4.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_flyDialogQt4.cpp	2010-08-15 14:45:46 UTC (rev 6531)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/T_flyDialogQt4.cpp	2010-08-15 14:45:49 UTC (rev 6532)
@@ -105,12 +105,12 @@
     \brief
 */
 
-uint8_t  ADM_flyDialogQt4::display(void)
+uint8_t  ADM_flyDialogQt4::display(uint8_t *rgbData)
 {
    ADM_QCanvas *view=(ADM_QCanvas *)_canvas;
    ADM_assert(view);
-   view-&gt;dataBuffer=_rgbBufferOut;
-   if(!_rgbBufferOut)
+   view-&gt;dataBuffer=rgbData;
+   if(!rgbData)
    {
       ADM_info(&quot;flyDialog: No rgbuffer ??\n&quot;); 
    } 
@@ -146,7 +146,7 @@
     \fn    isRgbInverted
     \brief
 */
-uint8_t  ADM_flyDialogQt4::isRgbInverted(void)
+bool  ADM_flyDialogQt4::isRgbInverted(void)
 {
   return 1; 
 }

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/DIA_flyPreview.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/DIA_flyPreview.h	2010-08-15 14:45:46 UTC (rev 6531)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/DIA_flyPreview.h	2010-08-15 14:45:49 UTC (rev 6532)
@@ -7,21 +7,40 @@
 	uint8_t download(void) {return 1;}
 	uint8_t upload(void) {return 1;}
 	uint8_t cleanup(void) {return 1;}
-	uint8_t setData(uint8_t *buffer) {_rgb-&gt;convert(buffer, _rgbBufferOut); return 1;}
+	uint8_t setData(uint8_t *buffer) 
+        {
+#warning FIXME  NO DISPLAY   
+            action-&gt;process();
+            //_rgb-&gt;convert(buffer, _rgbBufferOut); 
+            return 1;
+        }
 
 	flyPreview(uint32_t width, uint32_t height, void *canvas) : 
-	  ADM_flyDialogQt4(width, height, NULL, canvas, NULL, 0, RESIZE_NONE) {delete[] _rgbBuffer; _rgbBuffer = NULL;};
-	virtual ~flyPreview(void) {_rgbBuffer = NULL;};
+	  ADM_flyDialogQt4(width, height, NULL, canvas, NULL, true, RESIZE_NONE) 
+            {
+                
+            };
+	virtual ~flyPreview(void) 
+            {
+
+            };
 };
 
 typedef bool (*CookieFunc)(void *c,uint64_t pts);
+/**
+    \class flySeekablePreview
+*/
 class flySeekablePreview : public ADM_flyDialogQt4
 {
 protected:
     void *cookie;
     CookieFunc cookieFunc;
 public:
-	uint8_t process(void) {_rgbBufferOut = _rgbBuffer; return 1;}
+	uint8_t processYuv(ADMImage *in,ADMImage *out) 
+            {
+                out-&gt;duplicate(in);
+                return 1;
+            }
 	uint8_t download(void) {return 1;}
 	uint8_t upload(void) {return 1;}
 	uint8_t cleanup(void) {return 1;}
@@ -32,8 +51,11 @@
                 return true;
             }
 	flySeekablePreview(uint32_t width, uint32_t height, ADM_coreVideoFilter *videoStream, void *canvas, void *slider) : 
-	  ADM_flyDialogQt4(width, height, videoStream, canvas, slider, 0, RESIZE_AUTO) {delete[] _rgbBufferOut; _rgbBufferOut = NULL;cookie=NULL;cookieFunc=NULL;};
-	virtual ~flySeekablePreview(void) {_rgbBufferOut = NULL;};
+	  ADM_flyDialogQt4(width, height, videoStream, canvas, slider, true, RESIZE_LAST) 
+        {
+                cookie=NULL;cookieFunc=NULL;
+        };
+	virtual ~flySeekablePreview(void) {};
     bool setCookieFunc(CookieFunc cookieFunc, void *cookie)
         {
                 this-&gt;cookieFunc=cookieFunc;

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters/Q_seekablePreview.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters/Q_seekablePreview.cpp	2010-08-15 14:45:46 UTC (rev 6531)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters/Q_seekablePreview.cpp	2010-08-15 14:45:49 UTC (rev 6532)
@@ -55,8 +55,9 @@
 	canvas = new ADM_QCanvas(ui.frame, canvasWidth, canvasHeight);
 	canvas-&gt;show();
 	seekablePreview = new flySeekablePreview(canvasWidth, canvasHeight, videoStream, canvas, ui.horizontalSlider);	
-    seekablePreview-&gt;setCookieFunc(setCurrentPtsCallback,this);
-	seekablePreview-&gt;process();
+    seekablePreview-&gt;setCookieFunc(setCurrentPtsCallback,this);
+#warning FIXME NO UPDATE
+//	seekablePreview-&gt;process();
 	seekablePreview-&gt;sliderChanged();
 }
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/include/DIA_flyDialog.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/include/DIA_flyDialog.h	2010-08-15 14:45:46 UTC (rev 6531)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/include/DIA_flyDialog.h	2010-08-15 14:45:49 UTC (rev 6532)
@@ -11,6 +11,10 @@
  Case 2: The filter process RGV
  
  YUV-&gt; YUV2RGB-&gt;RGB-&gt;Process-&gt;RGBUFFEROUT
+
+The ADM_flyDialog implments the common part
+The yuv/rgb specific part is implement through ADM_flyDialogAction (yuv/rgb)
+
  
  ***************************************************************************/
 
@@ -51,7 +55,7 @@
 };
 
 class diaMenuEntry;  // defined in DIA_factory.h; only need pointer here
-
+class ADM_flyDialog;
 struct MenuMapping
 {
     const char * widgetName; // name of the combo box widget or equivalent
@@ -59,7 +63,46 @@
     uint32_t count;
     const diaMenuEntry * menu;
 };
+/**
+    \class ADM_flyDialogAction
+*/
+class ADM_flyDialogAction
+{
+protected:
+            ADM_flyDialog *parent;
+            ADM_flyDialogAction(ADM_flyDialog *parent) {this-&gt;parent=parent;}
+public:
+  virtual   ~ADM_flyDialogAction() {}
+  virtual    bool process(void)=0;
+  virtual    void resetScaler(void)=0;
+};
 
+class ADM_flyDialogActionYuv: public ADM_flyDialogAction
+{
+protected:
+          ADMImage      *_yuvBufferOut;
+          ADMColorScalerFull *yuvToRgb;
+public:
+            ADM_flyDialogActionYuv(ADM_flyDialog *parent);
+            ~ADM_flyDialogActionYuv();
+        void resetScaler(void);
+        bool process(void);
+};
+
+class ADM_flyDialogActionRgb: public ADM_flyDialogAction
+{
+protected:
+          uint8_t       *_rgbBuffer;
+          uint8_t       *_rgbBufferOut;
+          ADMColorScalerFull *yuv2rgb;
+          ADMColorScalerFull *rgb2rgb;
+public:
+            ADM_flyDialogActionRgb(ADM_flyDialog *parent);
+            ~ADM_flyDialogActionRgb();
+        bool process(void);
+        void resetScaler(void);
+};
+//***************************************
 typedef float gfloat;
 /**
     \class ADM_flyDialog
@@ -67,7 +110,13 @@
 */
 class ADM_flyDialog
 {
+    friend class ADM_flyDialogAction;
+    friend class ADM_flyDialogActionYuv;
+    friend class ADM_flyDialogActionRgb;
   protected:
+   virtual ADM_colorspace toRgbColor(void);
+          void          updateZoom(void);
+          ADM_flyDialogAction *action;
           uint64_t      _currentPts;
           uint32_t      _w, _h, _zoomW, _zoomH;
           float         _zoom;
@@ -75,43 +124,35 @@
           ADM_coreVideoFilter *_in;
       
           ADMImage      *_yuvBuffer;
-          ADMImage      *_yuvBufferOut;
-          uint8_t       *_rgbBuffer;
-          uint8_t       *_rgbBufferOut;
           uint8_t       *_rgbBufferDisplay;
+
+
+          
           uint8_t       _isYuvProcessing;
           ResizeMethod  _resizeMethod;
-          ADMImageResizer *_resizer;
-
   
           void EndConstructor(void);
-          void copyYuvFinalToRgb(void);
-          void copyYuvScratchToRgb(void);
-          void copyRgbFinalToDisplay(void);
-
           
   public:
-          void recomputeSize(void);
-          virtual bool nextImage(void);
+          void               recomputeSize(void);
+          virtual bool       nextImage(void);
+          virtual bool       sameImage(void);
   public:
           void    *_cookie; // whatever
           void    *_slider; // widget
           void    *_canvas; // Drawing zone
-          ADMColorScalerSimple *_rgb;
-
+          
+  
+  //virtual bool       refresh();
           /* Filter dependant */
-  virtual uint8_t    process(void)=0;
+  virtual uint8_t    processYuv(ADMImage* in, ADMImage *out) {ADM_assert(0);}
+  virtual uint8_t    processRgb(uint8_t *in, uint8_t *out) {ADM_assert(0);}
   virtual uint8_t    download(void)=0;
   virtual uint8_t    upload(void)=0;
   virtual bool       setCurrentPts(uint64_t pts)=0;
           /* /filter dependant */
   
-        /* This is GTK/QT/whatever dependant */
-          
   
-          
-          
-  
   virtual uint8_t  update(void) {return 1;};
             uint8_t  cleanup(void);
   
@@ -122,14 +163,15 @@
 #endif
 
           ADM_flyDialog(uint32_t width, uint32_t height, ADM_coreVideoFilter *in,
-                             void *canvas, void *slider, int yuv, ResizeMethod resizeMethod);
+                             void *canvas, void *slider, int yuv, 
+                             ResizeMethod resizeMethod);
   virtual ~ADM_flyDialog(void);
 // UI dependant part
 // They are not defined as pure to avoid unresolved problem, especially on win32.
 // You should never use flyDialog as is, but using the macro to pull flyDialogGtk/flyDialogQt4/... 
-  
-  virtual uint8_t  isRgbInverted(void)=0;
-  virtual uint8_t  display(void)=0;
+public:  
+  virtual bool     isRgbInverted(void)=0;
+  virtual uint8_t  display(uint8_t *rgbData)=0;
   virtual float    calcZoomFactor(void)=0;
   virtual uint32_t sliderGet(void)=0;             // Return the slider value between 0 and ADM_FLY_SLIDER_MAX
   virtual uint8_t  sliderSet(uint32_t value) =0;  // Set slider value between 0 and ADM_FLY_SLIDE_MAX
@@ -164,3 +206,4 @@
 #endif //  ADM_FLY_INTERNAL
 
 #endif
+

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/src/DIA_flyDialog.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/src/DIA_flyDialog.cpp	2010-08-15 14:45:46 UTC (rev 6531)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/src/DIA_flyDialog.cpp	2010-08-15 14:45:49 UTC (rev 6532)
@@ -44,76 +44,59 @@
 	_cookie = NULL;
 	_resizeMethod = resizeMethod;
     _zoomChangeCount = 0;
-    _resizer=NULL;
     _rgbBufferDisplay=NULL;
 
-	_rgb=NULL;
-
 	_yuvBuffer=new ADMImageDefault(_w,_h);
 
+	_currentPts=0;	
+}
+/**
+    \fn updateZoom
+*/
+void ADM_flyDialog::updateZoom(void)
+{   
+        if(_rgbBufferDisplay) delete _rgbBufferDisplay;
+        _rgbBufferDisplay = new uint8_t[_zoomW * _zoomH * 4];
+        action-&gt;resetScaler();
+}
+
+/**
+ *      \fn Endconstructor
+ *      \brief We need to call some virtual functions in the constructor; 
+        it does not work, so we do the 2nd part of the constructor here
+ */
+void ADM_flyDialog::EndConstructor(void)
+ {
 	if(_isYuvProcessing)
 	{
-		_yuvBufferOut=new ADMImageDefault(_w,_h);
-		_rgbBuffer=NULL;
+        action=new ADM_flyDialogActionYuv(this);
 	}
 	else
 	{
-		_rgbBuffer =new uint8_t [_w*_h*4];
-		_yuvBufferOut=NULL;
+		action=new ADM_flyDialogActionRgb(this);
 	}
 
-	_rgbBufferOut =new uint8_t [_w*_h*4];
-
-	_currentPts=0;
-
-	
-}
-/**
- *      \fn Endconstructor
- *      \brief We call some virtual functions in the constructor; it does not work, so we do the 2nd part of the constructor here
- */
-void ADM_flyDialog::EndConstructor(void)
-  {
-        if (isRgbInverted())
-            _rgb =new ADMColorScalerSimple(_w,_h,ADM_COLOR_YV12,ADM_COLOR_BGR32A);
-        else
-            _rgb =new ADMColorScalerSimple(_w,_h,ADM_COLOR_YV12,ADM_COLOR_RGB32A);
-        if (_resizeMethod == RESIZE_AUTO || _resizeMethod == RESIZE_LAST)
+        if (_resizeMethod != RESIZE_NONE)
+        {
+                _zoom = calcZoomFactor();
+                if (_zoom == 1)
                 {
-                        _zoom = calcZoomFactor();
-
-                        if (_zoom == 1)
-                                _resizeMethod = RESIZE_NONE;
-                        else
-                        {
-                                _zoomW = uint32_t (_w * _zoom);
-                                _zoomH = uint32_t (_h * _zoom);
-                        }
+                        _resizeMethod = RESIZE_NONE;
                 }
-                else
-                        _zoom = 1;
-
-                if (_resizeMethod == RESIZE_AUTO || _resizeMethod == RESIZE_LAST)
-                {
-                        ADM_colorspace sourceColour;
-
-                        if (_resizeMethod == RESIZE_AUTO || _isYuvProcessing)
-                                sourceColour = ADM_COLOR_YV12;
-                        else
-                                sourceColour = ADM_COLOR_RGB32A;
-
-                        _resizer = new ADMImageResizer(_w, _h, _zoomW, _zoomH, sourceColour, ADM_COLOR_RGB32A);
-                        _rgbBufferDisplay = new uint8_t[_w * _h * 4];
-                }
-                else
-                {
-                        _zoomW = _w;
-                        _zoomH = _h;
-
-                        _resizer = NULL;
-                        _rgbBufferDisplay = NULL;
-                }
-                postInit (false);
+        }
+        if(_resizeMethod==RESIZE_NONE)
+        {
+            _zoom=1;
+            _zoomW=_w;
+            _zoomH=_h;
+        }
+        else
+        {
+                _zoomW = uint32_t (_w * _zoom);
+                _zoomH = uint32_t (_h * _zoom);
+        }
+        updateZoom();
+        postInit (false);
   }
 /**
     \fn    recomputeSize
@@ -159,28 +142,7 @@
     _zoom = new_zoom;
     _zoomW = new_zoomW;
     _zoomH = new_zoomH;
-
-    delete _resizer;
-    if (_resizeMethod == RESIZE_AUTO || _resizeMethod == RESIZE_LAST)
-    {
-        ADM_colorspace sourceColour;
-
-        if (_resizeMethod == RESIZE_AUTO || _isYuvProcessing)
-            sourceColour = ADM_COLOR_YV12;
-        else
-            sourceColour = ADM_COLOR_RGB32A;
-
-        _resizer = new ADMImageResizer(_w, _h, _zoomW, _zoomH, sourceColour, ADM_COLOR_RGB32A);
-        if (!_rgbBufferDisplay)
-            _rgbBufferDisplay = new uint8_t[_w * _h * 4];
-    }
-    else
-    {
-        _resizer = NULL;
-        delete _rgbBufferDisplay;
-        _rgbBufferDisplay = NULL;
-    }
-
+    updateZoom();
     postInit (true);
     sliderChanged();
 }
@@ -193,14 +155,9 @@
 {
 #define DEL1(x)    if(x) {delete [] x;x=NULL;}
 #define DEL2(x)    if(x) {delete  x;x=NULL;}
-  
-	DEL2(_yuvBufferOut);
 	DEL2(_yuvBuffer);
-	DEL1(_rgbBuffer);
-	DEL1(_rgbBufferOut);
 	DEL1(_rgbBufferDisplay);
-	DEL2(_rgb);
-	DEL2(_resizer);
+    DEL2(action);
 }
 /**
     \fn ~ADM_flyDialog
@@ -208,8 +165,6 @@
 */
 ADM_flyDialog::~ADM_flyDialog(void)
 {
-  
-  // FIXME cleanup2();
   cleanup(); 
 }
 
@@ -224,7 +179,6 @@
   uint32_t len,flags;
   
     ADM_assert(_yuvBuffer);
-    ADM_assert(_rgbBufferOut);
     ADM_assert(_in);
 
 
@@ -238,6 +192,22 @@
    return nextImage();
 }
 /**
+    \fn toRgbColor
+*/
+ADM_colorspace ADM_flyDialog::toRgbColor(void)
+{
+    if(isRgbInverted()) return ADM_COLOR_BGR32A;
+    return ADM_COLOR_RGB32A;
+}
+/**
+    \fn sameImage
+*/
+bool ADM_flyDialog::sameImage(void)
+{
+    action-&gt;process();
+    return display(_rgbBufferDisplay);
+}
+/**
     \fn nextImage
 */
 bool ADM_flyDialog::nextImage(void)
@@ -249,61 +219,87 @@
       return 0;
     }
     setCurrentPts(_yuvBuffer-&gt;Pts);
-    // Process...    
-    if(_isYuvProcessing)
-    {
-        process();
-		copyYuvFinalToRgb();
-    }
-	else // RGB Processing      
-    {
-        ADM_assert(_rgbBuffer);
-		copyYuvScratchToRgb();
-        process();
-    }
-    return display();
+    // Process...   
+    action-&gt;process();
+    return display(_rgbBufferDisplay);
 }
-/**
-    \fn    copyYuvFinalToRgb
-    \brief
-*/
-
-void ADM_flyDialog::copyYuvFinalToRgb(void)
+//************************************
+// Implement the specific part
+// i.e. yuv processing or RGB processing
+//************************************
+ADM_flyDialogActionYuv::ADM_flyDialogActionYuv(ADM_flyDialog *p) : 
+                     ADM_flyDialogAction(p)
 {
-	if (_resizeMethod == RESIZE_AUTO || _resizeMethod == RESIZE_LAST)
-		_resizer-&gt;resize(_yuvBufferOut, _rgbBufferOut);
-	else
-		_rgb-&gt;convertImage(_yuvBufferOut, _rgbBufferOut);
+        _yuvBufferOut=new ADMImageDefault(parent-&gt;_w,parent-&gt;_h);
+        yuvToRgb=NULL;
+        
 }
-/**
-    \fn    copyYuvScratchToRgb
-    \brief
-*/
-
-void ADM_flyDialog::copyYuvScratchToRgb(void)
+void ADM_flyDialogActionYuv::resetScaler(void)
 {
-	if (_resizeMethod == RESIZE_AUTO)
-		_resizer-&gt;resize(_yuvBuffer,_rgbBuffer);
-	else
-		_rgb-&gt;convertImage(_yuvBuffer,_rgbBuffer);
+    if(yuvToRgb) delete yuvToRgb;
+    yuvToRgb=new ADMColorScalerFull(ADM_CS_BICUBIC, 
+                            parent-&gt;_w,
+                            parent-&gt;_h,
+                            parent-&gt;_zoomW,
+                            parent-&gt;_zoomH,
+                            ADM_COLOR_YV12,parent-&gt;toRgbColor());
 }
-/**
-    \fn    copyRgbFinalToDisplay
-    \brief
-*/
-
-void ADM_flyDialog::copyRgbFinalToDisplay(void)
+ADM_flyDialogActionYuv::~ADM_flyDialogActionYuv()
 {
-	if (_resizeMethod == RESIZE_LAST)
-	{
-		_resizer-&gt;resize(_rgbBufferOut, _rgbBufferDisplay);
-
-		uint8_t* tempRgb = _rgbBufferDisplay;
-
-		_rgbBufferDisplay = _rgbBufferOut;
-		_rgbBufferOut = tempRgb;
-	}
+    if(_yuvBufferOut) delete _yuvBufferOut;
+    _yuvBufferOut=NULL;
 }
-
+bool ADM_flyDialogActionYuv::process(void)
+{
+        parent-&gt; processYuv(parent-&gt;_yuvBuffer,_yuvBufferOut);
+        yuvToRgb-&gt;convertImage(_yuvBufferOut,parent-&gt;_rgbBufferDisplay);
+        return true;
+}
+//*****************************************
+ADM_flyDialogActionRgb::ADM_flyDialogActionRgb(ADM_flyDialog *p) :  ADM_flyDialogAction(p)
+{
+    uint32_t size=parent-&gt;_w*parent-&gt;_h*4;
+    _rgbBuffer=new uint8_t [size];
+    _rgbBufferOut=new uint8_t [size];
+     yuv2rgb =new ADMColorScalerSimple(parent-&gt;_w,parent-&gt;_h,ADM_COLOR_YV12,
+                parent-&gt;toRgbColor());
+    rgb2rgb=NULL;
+}
+void ADM_flyDialogActionRgb::resetScaler(void)
+{
+    if(rgb2rgb) delete rgb2rgb;
+    rgb2rgb=new ADMColorScalerFull(ADM_CS_BICUBIC, 
+                            parent-&gt;_w,
+                            parent-&gt;_h,
+                            parent-&gt;_zoomW,
+                            parent-&gt;_zoomH,
+                            ADM_COLOR_RGB32A,ADM_COLOR_RGB32A);
+}
+ADM_flyDialogActionRgb::~ADM_flyDialogActionRgb()
+{
+    if(_rgbBuffer) delete [] _rgbBuffer;
+    if(_rgbBufferOut) delete [] _rgbBufferOut;
+    if(rgb2rgb) delete rgb2rgb;
+    if(yuv2rgb) delete yuv2rgb;
+    rgb2rgb=NULL;
+    yuv2rgb=NULL;
+    _rgbBuffer=NULL;
+    _rgbBufferOut=NULL;
+    
+}
+bool ADM_flyDialogActionRgb::process(void)
+{
+    yuv2rgb-&gt;convertImage(parent-&gt;_yuvBuffer,_rgbBuffer);
+    if (parent-&gt;_resizeMethod != RESIZE_NONE)
+    {
+        parent-&gt;processRgb(_rgbBuffer,_rgbBufferOut);
+        rgb2rgb-&gt;convert(_rgbBufferOut, parent-&gt;_rgbBufferDisplay);
+    }else
+    {
+        parent-&gt;processRgb(_rgbBuffer,parent-&gt;_rgbBufferDisplay);
+    }
+    return true;
+}
+//******************************
 //EOF
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/crop/DIA_flyCrop.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/crop/DIA_flyCrop.cpp	2010-08-15 14:45:46 UTC (rev 6531)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/crop/DIA_flyCrop.cpp	2010-08-15 14:45:49 UTC (rev 6532)
@@ -28,16 +28,15 @@
     \fn process
 	\brief 
 */
-
-uint8_t    flyCrop::process(void)
+uint8_t    flyCrop::processRgb(uint8_t *imageIn, uint8_t *imageOut)
 {
         uint32_t x,y;
         uint8_t  *in;
         uint32_t w=_w,h=_h;
   
         
-        memcpy(_rgbBufferOut,_rgbBuffer,_w*_h*4);
-        in=_rgbBufferOut;
+        memcpy(imageOut,imageIn,_w*_h*4);
+        in=imageOut;
         for(y=0;y&lt;top;y++)
         {
                 for(x=0;x&lt;w;x++)
@@ -52,7 +51,7 @@
                 }
         }
         // bottom
-        in=_rgbBufferOut+(w*4)*(h-bottom);
+        in=imageOut+(w*4)*(h-bottom);
         for(y=0;y&lt;bottom;y++)
         {
                 for(x=0;x&lt;w;x++)
@@ -66,7 +65,7 @@
                 }
         }
         // left
-        in=_rgbBufferOut;
+        in=imageOut;
         uint32_t stride=4*w-4;
         for(y=0;y&lt;h;y++)
         {
@@ -93,7 +92,6 @@
   
         }
 
-		copyRgbFinalToDisplay();
 }
 
 /**
@@ -177,8 +175,7 @@
         top=top &amp; 0xfffe;
         bottom=bottom &amp; 0xfffe;
         upload();
-        process();
-        display();
+        sameImage();
         return 1;
 }
 /**

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/crop/DIA_flyCrop.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/crop/DIA_flyCrop.h	2010-08-15 14:45:46 UTC (rev 6531)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/crop/DIA_flyCrop.h	2010-08-15 14:45:49 UTC (rev 6532)
@@ -6,11 +6,11 @@
   public:
    uint32_t left,right,top,bottom;
   public:
-   uint8_t    process(void);
+   uint8_t    processRgb(uint8_t *imageIn, uint8_t *imageOut);
    uint8_t    download(void);
    uint8_t    upload(void);
    uint8_t    autocrop(void);
-   flyCrop (uint32_t width,uint32_t height,ADM_coreVideoFilter *in,
+              flyCrop (uint32_t width,uint32_t height,ADM_coreVideoFilter *in,
                                     void *canvas, void *slider) : FLY_DIALOG_TYPE(width, height,in,canvas, slider,0,RESIZE_LAST) {};
 };
 #endif

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/crop/gtk/DIA_crop.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/crop/gtk/DIA_crop.cpp	2010-08-15 14:45:46 UTC (rev 6531)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/crop/gtk/DIA_crop.cpp	2010-08-15 14:45:49 UTC (rev 6532)
@@ -124,15 +124,15 @@
 {
   if(lock) return;
   myCrop-&gt;download();
-  myCrop-&gt;process();
-  myCrop-&gt;display();
+  myCrop-&gt;sameImage();
+  //myCrop-&gt;display();
 }
 /*---------------------------------------------------------------------------
 	Actually draw the working frame on screen
 */
 gboolean ui_draw( void )
 {
-        myCrop-&gt;display();
+        myCrop-&gt;sameImage();
 }
 void ui_read (void )
 {
@@ -154,9 +154,9 @@
         myCrop-&gt;bottom=0;
         myCrop-&gt;top=0;
         
-	myCrop-&gt;upload();
-        myCrop-&gt;process();
-        myCrop-&gt;display();
+        myCrop-&gt;upload();
+        myCrop-&gt;sameImage();
+        //myCrop-&gt;display();
 }
 
 /*---------------------------------------------------------------------------

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/crop/qt4/Q_crop.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/crop/qt4/Q_crop.cpp	2010-08-15 14:45:46 UTC (rev 6531)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/crop/qt4/Q_crop.cpp	2010-08-15 14:45:49 UTC (rev 6532)
@@ -82,8 +82,7 @@
   if(lock) return;
   lock++;
   myCrop-&gt;download();
-  myCrop-&gt;process();
-  myCrop-&gt;display();
+  myCrop-&gt;sameImage();
   lock--;
 }
 
@@ -101,8 +100,7 @@
          myCrop-&gt;top=0;
          lock++;
          myCrop-&gt;upload();
-         myCrop-&gt;process();
-         myCrop-&gt;display();
+         myCrop-&gt;sameImage();
          lock--;
 }
 


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003718.html">[Avidemux-svn-commit] r6531 -	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6/crop
</A></li>
	<LI>Next message: <A HREF="003720.html">[Avidemux-svn-commit] r6533 - in branches/avidemux_2.6_branch_mean:	avidemux/qt4/ADM_userInterfaces/ADM_dialog	avidemux_core/ADM_coreVideoFilter/include	avidemux_plugins/ADM_videoFilters6	avidemux_plugins/ADM_videoFilters6/stackField
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3719">[ date ]</a>
              <a href="thread.html#3719">[ thread ]</a>
              <a href="subject.html#3719">[ subject ]</a>
              <a href="author.html#3719">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">More information about the Avidemux-svn-commit
mailing list</a><br>
</body></html>
