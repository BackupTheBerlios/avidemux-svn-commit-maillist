<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Avidemux-svn-commit] r4355 - in	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg:	. ADM_lavcodec ADM_lavcodec/i386 ADM_lavformat	ADM_libpostproc ADM_libswscale
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/avidemux-svn-commit/2008-September/index.html" >
   <LINK REL="made" HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r4355%20-%20in%0A%09branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg%3A%0A%09.%20ADM_lavcodec%20ADM_lavcodec/i386%20ADM_lavformat%0A%09ADM_libpostproc%20ADM_libswscale&In-Reply-To=%3C200809151739.m8FHdE12010026%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001594.html">
   <LINK REL="Next"  HREF="001596.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Avidemux-svn-commit] r4355 - in	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg:	. ADM_lavcodec ADM_lavcodec/i386 ADM_lavformat	ADM_libpostproc ADM_libswscale</H1>
    <B>gruntster at mail.berlios.de</B> 
    <A HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r4355%20-%20in%0A%09branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg%3A%0A%09.%20ADM_lavcodec%20ADM_lavcodec/i386%20ADM_lavformat%0A%09ADM_libpostproc%20ADM_libswscale&In-Reply-To=%3C200809151739.m8FHdE12010026%40sheep.berlios.de%3E"
       TITLE="[Avidemux-svn-commit] r4355 - in	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg:	. ADM_lavcodec ADM_lavcodec/i386 ADM_lavformat	ADM_libpostproc ADM_libswscale">gruntster at mail.berlios.de
       </A><BR>
    <I>Mon Sep 15 19:39:14 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001594.html">[Avidemux-svn-commit] r4354 -	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src
</A></li>
        <LI>Next message: <A HREF="001596.html">[Avidemux-svn-commit] r4356 - in	branches/avidemux_2.5_branch_gruntster/avidemux: ADM_encoder	ADM_plugin ADM_userInterfaces/ADM_GTK	ADM_userInterfaces/ADM_GTK/ADM_gui2	ADM_userInterfaces/ADM_NONE ADM_userInterfaces/ADM_QT4
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1595">[ date ]</a>
              <a href="thread.html#1595">[ thread ]</a>
              <a href="subject.html#1595">[ subject ]</a>
              <a href="author.html#1595">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: gruntster
Date: 2008-09-15 19:38:48 +0200 (Mon, 15 Sep 2008)
New Revision: 4355

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/cabac.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/h263.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/cavsdsp_mmx.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/dsputil_h264_template_mmx.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/dsputil_mmx.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/dsputil_mmx_avg.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/dsputil_mmx_qns.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/dsputil_mmx_rnd.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/dsputilenc_mmx.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/fft_3dn.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/fft_3dn2.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/fft_sse.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/flacdsp_mmx.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/h264dsp_mmx.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/motion_est_mmx.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/mpegvideo_mmx.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/mpegvideo_mmx_template.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/snowdsp_mmx.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/vc1dsp_mmx.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/avc.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libpostproc/postprocess_template.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/rgb2rgb.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/rgb2rgb.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/rgb2rgb_template.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale_template.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/yuv2rgb_template.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/CMakeLists.txt
Log:
[Win64] ffmpeg compilation fixes

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/cabac.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/cabac.h	2008-09-15 17:03:51 UTC (rev 4354)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/cabac.h	2008-09-15 17:38:48 UTC (rev 4355)
@@ -741,7 +741,7 @@
 static int decode_significance_8x8_x86(CABACContext *c, uint8_t *significant_coeff_ctx_base, int *index, const uint8_t *sig_off){
     int minusindex= 4-(int)index;
     int coeff_count;
-    long last=0;
+    intptr_t last=0;
     asm volatile(
         &quot;movl &quot;RANGE    &quot;(%3), %%esi            \n\t&quot;
         &quot;movl &quot;LOW      &quot;(%3), %%ebx            \n\t&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/h263.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/h263.c	2008-09-15 17:03:51 UTC (rev 4354)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/h263.c	2008-09-15 17:38:48 UTC (rev 4355)
@@ -3056,7 +3056,7 @@
     uint8_t *start= pbBufPtr(&amp;s-&gt;pb);
     uint8_t *end= s-&gt;pb.buf_end;
     int size= end - start;
-    int pb_size = (((long)start + size/3)&amp;(~3)) - (long)start;
+    int pb_size = (((intptr_t)start + size/3)&amp;(~3)) - (intptr_t)start;
     int tex_size= (size - 2*pb_size)&amp;(~3);
 
     set_put_bits_buffer_size(&amp;s-&gt;pb, pb_size);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/cavsdsp_mmx.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/cavsdsp_mmx.c	2008-09-15 17:03:51 UTC (rev 4354)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/cavsdsp_mmx.c	2008-09-15 17:38:48 UTC (rev 4355)
@@ -301,7 +301,7 @@
         VOP(%%mm1, %%mm2, %%mm3, %%mm4, %%mm5, %%mm0, OP)\
         \
         : &quot;+a&quot;(src), &quot;+c&quot;(dst)\
-        : &quot;S&quot;((long)srcStride), &quot;D&quot;((long)dstStride), &quot;m&quot;(ADD), &quot;m&quot;(MUL1), &quot;m&quot;(MUL2)\
+        : &quot;S&quot;((intptr_t)srcStride), &quot;D&quot;((intptr_t)dstStride), &quot;m&quot;(ADD), &quot;m&quot;(MUL1), &quot;m&quot;(MUL2)\
         : &quot;memory&quot;\
      );\
      if(h==16){\
@@ -316,7 +316,7 @@
             VOP(%%mm3, %%mm4, %%mm5, %%mm0, %%mm1, %%mm2, OP)\
             \
            : &quot;+a&quot;(src), &quot;+c&quot;(dst)\
-           : &quot;S&quot;((long)srcStride), &quot;D&quot;((long)dstStride), &quot;m&quot;(ADD),  &quot;m&quot;(MUL1), &quot;m&quot;(MUL2)\
+           : &quot;S&quot;((intptr_t)srcStride), &quot;D&quot;((intptr_t)dstStride), &quot;m&quot;(ADD),  &quot;m&quot;(MUL1), &quot;m&quot;(MUL2)\
            : &quot;memory&quot;\
         );\
      }\
@@ -367,7 +367,7 @@
         &quot;decl %2                    \n\t&quot;\
         &quot; jnz 1b                    \n\t&quot;\
         : &quot;+a&quot;(src), &quot;+c&quot;(dst), &quot;+m&quot;(h)\
-        : &quot;d&quot;((long)srcStride), &quot;S&quot;((long)dstStride), &quot;m&quot;(ff_pw_5), &quot;m&quot;(ff_pw_4)\
+        : &quot;d&quot;((intptr_t)srcStride), &quot;S&quot;((intptr_t)dstStride), &quot;m&quot;(ff_pw_5), &quot;m&quot;(ff_pw_4)\
         : &quot;memory&quot;\
     );\
 }\

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/dsputil_h264_template_mmx.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/dsputil_h264_template_mmx.c	2008-09-15 17:03:51 UTC (rev 4354)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/dsputil_h264_template_mmx.c	2008-09-15 17:38:48 UTC (rev 4355)
@@ -250,7 +250,7 @@
         &quot;sub $2, %2                 \n\t&quot;
         &quot;jnz 1b                     \n\t&quot;
         : &quot;+r&quot;(dst), &quot;+r&quot;(src), &quot;+r&quot;(h)
-        : &quot;r&quot;((long)stride), &quot;m&quot;(ff_pw_32), &quot;m&quot;(x), &quot;m&quot;(y)
+        : &quot;r&quot;((intptr_t)stride), &quot;m&quot;(ff_pw_32), &quot;m&quot;(x), &quot;m&quot;(y)
     );
 }
 
@@ -301,7 +301,7 @@
         &quot;sub $1, %2\n\t&quot;
         &quot;jnz 1b\n\t&quot;
         : &quot;+r&quot; (dst), &quot;+r&quot;(src), &quot;+r&quot;(h)
-        : &quot;m&quot; (ff_pw_32), &quot;r&quot;((long)stride)
+        : &quot;m&quot; (ff_pw_32), &quot;r&quot;((intptr_t)stride)
         : &quot;%esi&quot;);
 
 }

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/dsputil_mmx.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/dsputil_mmx.c	2008-09-15 17:03:51 UTC (rev 4354)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/dsputil_mmx.c	2008-09-15 17:38:48 UTC (rev 4355)
@@ -241,7 +241,7 @@
                 &quot;movq   %%mm2, (%0, %1)         \n\t&quot;
                 &quot;movq   %%mm4, (%0, %1, 2)      \n\t&quot;
                 &quot;movq   %%mm6, (%0, %2)         \n\t&quot;
-                ::&quot;r&quot; (pix), &quot;r&quot; ((long)line_size), &quot;r&quot; ((long)line_size*3), &quot;m&quot;(*p)
+                ::&quot;r&quot; (pix), &quot;r&quot; ((intptr_t)line_size), &quot;r&quot; ((intptr_t)line_size*3), &quot;m&quot;(*p)
                 :&quot;memory&quot;);
         pix += line_size*4;
         p += 32;
@@ -266,7 +266,7 @@
             &quot;movq       %%mm2, (%0, %1)         \n\t&quot;
             &quot;movq       %%mm4, (%0, %1, 2)      \n\t&quot;
             &quot;movq       %%mm6, (%0, %2)         \n\t&quot;
-            ::&quot;r&quot; (pix), &quot;r&quot; ((long)line_size), &quot;r&quot; ((long)line_size*3), &quot;r&quot;(p)
+            ::&quot;r&quot; (pix), &quot;r&quot; ((intptr_t)line_size), &quot;r&quot; ((intptr_t)line_size*3), &quot;r&quot;(p)
             :&quot;memory&quot;);
 }
 
@@ -350,7 +350,7 @@
          &quot;subl $4, %0                   \n\t&quot;
          &quot;jnz 1b                        \n\t&quot;
          : &quot;+g&quot;(h), &quot;+r&quot; (pixels),  &quot;+r&quot; (block)
-         : &quot;r&quot;((long)line_size)
+         : &quot;r&quot;((intptr_t)line_size)
          : &quot;%&quot;REG_a, &quot;memory&quot;
         );
 }
@@ -376,7 +376,7 @@
          &quot;subl $4, %0                   \n\t&quot;
          &quot;jnz 1b                        \n\t&quot;
          : &quot;+g&quot;(h), &quot;+r&quot; (pixels),  &quot;+r&quot; (block)
-         : &quot;r&quot;((long)line_size)
+         : &quot;r&quot;((intptr_t)line_size)
          : &quot;%&quot;REG_a, &quot;memory&quot;
         );
 }
@@ -410,7 +410,7 @@
          &quot;subl $4, %0                   \n\t&quot;
          &quot;jnz 1b                        \n\t&quot;
          : &quot;+g&quot;(h), &quot;+r&quot; (pixels),  &quot;+r&quot; (block)
-         : &quot;r&quot;((long)line_size)
+         : &quot;r&quot;((intptr_t)line_size)
          : &quot;%&quot;REG_a, &quot;memory&quot;
         );
 }
@@ -432,7 +432,7 @@
          &quot;lea (%2,%3,4), %2             \n\t&quot;
          &quot;jnz 1b                        \n\t&quot;
          : &quot;+g&quot;(h), &quot;+r&quot; (pixels),  &quot;+r&quot; (block)
-         : &quot;r&quot;((long)line_size), &quot;r&quot;(3L*line_size)
+         : &quot;r&quot;((intptr_t)line_size), &quot;r&quot;(3*(intptr_t)line_size)
          : &quot;memory&quot;
         );
 }
@@ -458,7 +458,7 @@
          &quot;lea (%2,%3,4), %2             \n\t&quot;
          &quot;jnz 1b                        \n\t&quot;
          : &quot;+g&quot;(h), &quot;+r&quot; (pixels),  &quot;+r&quot; (block)
-         : &quot;r&quot;((long)line_size), &quot;r&quot;(3L*line_size)
+         : &quot;r&quot;((intptr_t)line_size), &quot;r&quot;(3*(intptr_t)line_size)
          : &quot;memory&quot;
         );
 }
@@ -481,7 +481,7 @@
 }
 
 static void add_bytes_mmx(uint8_t *dst, uint8_t *src, int w){
-    long i=0;
+    intptr_t i=0;
     asm volatile(
         &quot;1:                             \n\t&quot;
         &quot;movq  (%1, %0), %%mm0          \n\t&quot;
@@ -496,14 +496,14 @@
         &quot;cmp %3, %0                     \n\t&quot;
         &quot; jb 1b                         \n\t&quot;
         : &quot;+r&quot; (i)
-        : &quot;r&quot;(src), &quot;r&quot;(dst), &quot;r&quot;((long)w-15)
+        : &quot;r&quot;(src), &quot;r&quot;(dst), &quot;r&quot;((intptr_t)w-15)
     );
     for(; i&lt;w; i++)
         dst[i+0] += src[i+0];
 }
 
 static void add_bytes_l2_mmx(uint8_t *dst, uint8_t *src1, uint8_t *src2, int w){
-    long i=0;
+    intptr_t i=0;
     asm volatile(
         &quot;1:                             \n\t&quot;
         &quot;movq   (%2, %0), %%mm0         \n\t&quot;
@@ -516,7 +516,7 @@
         &quot;cmp %4, %0                     \n\t&quot;
         &quot; jb 1b                         \n\t&quot;
         : &quot;+r&quot; (i)
-        : &quot;r&quot;(dst), &quot;r&quot;(src1), &quot;r&quot;(src2), &quot;r&quot;((long)w-15)
+        : &quot;r&quot;(dst), &quot;r&quot;(src1), &quot;r&quot;(src2), &quot;r&quot;((intptr_t)w-15)
     );
     for(; i&lt;w; i++)
         dst[i] = src1[i] + src2[i];
@@ -690,8 +690,8 @@
         &quot;movd %%mm6, (%1,%3)            \n\t&quot;
         :: &quot;r&quot; (src),
            &quot;r&quot; (src + 4*stride),
-           &quot;r&quot; ((long)   stride ),
-           &quot;r&quot; ((long)(3*stride))
+           &quot;r&quot; ((intptr_t)   stride ),
+           &quot;r&quot; ((intptr_t)(3*stride))
     );
     }
 }
@@ -724,7 +724,7 @@
                 &quot;cmp %3, %0                     \n\t&quot;
                 &quot; jb 1b                         \n\t&quot;
                 : &quot;+r&quot; (ptr)
-                : &quot;r&quot; ((long)wrap), &quot;r&quot; ((long)width), &quot;r&quot; (ptr + wrap*height)
+                : &quot;r&quot; ((intptr_t)wrap), &quot;r&quot; ((intptr_t)width), &quot;r&quot; (ptr + wrap*height)
         );
     }
     else
@@ -747,7 +747,7 @@
                 &quot;cmp %3, %0                     \n\t&quot;
                 &quot; jb 1b                         \n\t&quot;
                 : &quot;+r&quot; (ptr)
-                : &quot;r&quot; ((long)wrap), &quot;r&quot; ((long)width), &quot;r&quot; (ptr + wrap*height)
+                : &quot;r&quot; ((intptr_t)wrap), &quot;r&quot; ((intptr_t)width), &quot;r&quot; (ptr + wrap*height)
         );
     }
 
@@ -765,7 +765,7 @@
                 &quot;cmp %4, %0                     \n\t&quot;
                 &quot; jb 1b                         \n\t&quot;
                 : &quot;+r&quot; (ptr)
-                : &quot;r&quot; ((long)buf - (long)ptr - w), &quot;r&quot; ((long)-wrap), &quot;r&quot; ((long)-wrap*3), &quot;r&quot; (ptr+width+2*w)
+                : &quot;r&quot; ((intptr_t)buf - (intptr_t)ptr - w), &quot;r&quot; ((intptr_t)-wrap), &quot;r&quot; ((intptr_t)-wrap*3), &quot;r&quot; (ptr+width+2*w)
         );
         ptr= last_line + (i + 1) * wrap - w;
         asm volatile(
@@ -779,7 +779,7 @@
                 &quot;cmp %4, %0                     \n\t&quot;
                 &quot; jb 1b                         \n\t&quot;
                 : &quot;+r&quot; (ptr)
-                : &quot;r&quot; ((long)last_line - (long)ptr - w), &quot;r&quot; ((long)wrap), &quot;r&quot; ((long)wrap*3), &quot;r&quot; (ptr+width+2*w)
+                : &quot;r&quot; ((intptr_t)last_line - (intptr_t)ptr - w), &quot;r&quot; ((intptr_t)wrap), &quot;r&quot; ((intptr_t)wrap*3), &quot;r&quot; (ptr+width+2*w)
         );
     }
 }
@@ -787,8 +787,8 @@
 #define PAETH(cpu, abs3)\
 void add_png_paeth_prediction_##cpu(uint8_t *dst, uint8_t *src, uint8_t *top, int w, int bpp)\
 {\
-    long i = -bpp;\
-    long end = w-3;\
+    intptr_t i = -bpp;\
+    intptr_t end = w-3;\
     asm volatile(\
         &quot;pxor      %%mm7, %%mm7 \n&quot;\
         &quot;movd    (%1,%0), %%mm0 \n&quot;\
@@ -831,7 +831,7 @@
         &quot;cmp       %5, %0 \n&quot;\
         &quot;jle 1b \n&quot;\
         :&quot;+r&quot;(i)\
-        :&quot;r&quot;(dst), &quot;r&quot;(top), &quot;r&quot;(src), &quot;r&quot;((long)bpp), &quot;g&quot;(end),\
+        :&quot;r&quot;(dst), &quot;r&quot;(top), &quot;r&quot;(src), &quot;r&quot;((intptr_t)bpp), &quot;g&quot;(end),\
          &quot;m&quot;(ff_pw_255)\
         :&quot;memory&quot;\
     );\
@@ -995,7 +995,7 @@
         &quot;decl %2                          \n\t&quot;\
         &quot; jnz 1b                          \n\t&quot;\
         : &quot;+a&quot;(src), &quot;+c&quot;(dst), &quot;+g&quot;(h)\
-        : &quot;d&quot;((long)srcStride), &quot;S&quot;((long)dstStride), /*&quot;m&quot;(ff_pw_20), &quot;m&quot;(ff_pw_3),*/ &quot;m&quot;(temp), &quot;m&quot;(ROUNDER)\
+        : &quot;d&quot;((intptr_t)srcStride), &quot;S&quot;((intptr_t)dstStride), /*&quot;m&quot;(ff_pw_20), &quot;m&quot;(ff_pw_3),*/ &quot;m&quot;(temp), &quot;m&quot;(ROUNDER)\
         : &quot;memory&quot;\
     );\
 }\
@@ -1108,7 +1108,7 @@
         &quot;decl %2                          \n\t&quot;\
         &quot; jnz 1b                          \n\t&quot;\
         : &quot;+a&quot;(src), &quot;+c&quot;(dst), &quot;+g&quot;(h)\
-        : &quot;S&quot;((long)srcStride), &quot;D&quot;((long)dstStride), /*&quot;m&quot;(ff_pw_20), &quot;m&quot;(ff_pw_3),*/ &quot;m&quot;(temp), &quot;m&quot;(ROUNDER)\
+        : &quot;S&quot;((intptr_t)srcStride), &quot;D&quot;((intptr_t)dstStride), /*&quot;m&quot;(ff_pw_20), &quot;m&quot;(ff_pw_3),*/ &quot;m&quot;(temp), &quot;m&quot;(ROUNDER)\
         : &quot;memory&quot;\
     );\
 }\
@@ -1172,7 +1172,7 @@
         &quot;decl %2                        \n\t&quot;\
         &quot; jnz 1b                        \n\t&quot;\
         : &quot;+r&quot; (src), &quot;+r&quot; (temp_ptr), &quot;+r&quot;(count)\
-        : &quot;r&quot; ((long)srcStride)\
+        : &quot;r&quot; ((intptr_t)srcStride)\
         : &quot;memory&quot;\
     );\
     \
@@ -1219,7 +1219,7 @@
         &quot; jnz 1b                        \n\t&quot;\
         \
         : &quot;+r&quot;(temp_ptr), &quot;+r&quot;(dst), &quot;+g&quot;(count)\
-        : &quot;r&quot;((long)dstStride), &quot;r&quot;(2*(long)dstStride), /*&quot;m&quot;(ff_pw_20), &quot;m&quot;(ff_pw_3),*/ &quot;m&quot;(ROUNDER), &quot;g&quot;(4-14*(long)dstStride)\
+        : &quot;r&quot;((intptr_t)dstStride), &quot;r&quot;(2*(intptr_t)dstStride), /*&quot;m&quot;(ff_pw_20), &quot;m&quot;(ff_pw_3),*/ &quot;m&quot;(ROUNDER), &quot;g&quot;(4-14*(intptr_t)dstStride)\
         :&quot;memory&quot;\
     );\
 }\
@@ -1244,7 +1244,7 @@
         &quot;decl %2                        \n\t&quot;\
         &quot; jnz 1b                        \n\t&quot;\
         : &quot;+r&quot; (src), &quot;+r&quot; (temp_ptr), &quot;+r&quot;(count)\
-        : &quot;r&quot; ((long)srcStride)\
+        : &quot;r&quot; ((intptr_t)srcStride)\
         : &quot;memory&quot;\
     );\
     \
@@ -1279,7 +1279,7 @@
         &quot; jnz 1b                        \n\t&quot;\
          \
         : &quot;+r&quot;(temp_ptr), &quot;+r&quot;(dst), &quot;+g&quot;(count)\
-        : &quot;r&quot;((long)dstStride), &quot;r&quot;(2*(long)dstStride), /*&quot;m&quot;(ff_pw_20), &quot;m&quot;(ff_pw_3),*/ &quot;m&quot;(ROUNDER), &quot;g&quot;(4-6*(long)dstStride)\
+        : &quot;r&quot;((intptr_t)dstStride), &quot;r&quot;(2*(intptr_t)dstStride), /*&quot;m&quot;(ff_pw_20), &quot;m&quot;(ff_pw_3),*/ &quot;m&quot;(ROUNDER), &quot;g&quot;(4-6*(intptr_t)dstStride)\
         : &quot;memory&quot;\
    );\
 }\
@@ -1841,7 +1841,7 @@
 }
 
 static void vector_fmul_3dnow(float *dst, const float *src, int len){
-    long i = (len-4)*4;
+    intptr_t i = (len-4)*4;
     asm volatile(
         &quot;1: \n\t&quot;
         &quot;movq    (%1,%0), %%mm0 \n\t&quot;
@@ -1859,7 +1859,7 @@
     );
 }
 static void vector_fmul_sse(float *dst, const float *src, int len){
-    long i = (len-8)*4;
+    intptr_t i = (len-8)*4;
     asm volatile(
         &quot;1: \n\t&quot;
         &quot;movaps    (%1,%0), %%xmm0 \n\t&quot;
@@ -1877,7 +1877,7 @@
 }
 
 static void vector_fmul_reverse_3dnow2(float *dst, const float *src0, const float *src1, int len){
-    long i = len*4-16;
+    intptr_t i = len*4-16;
     asm volatile(
         &quot;1: \n\t&quot;
         &quot;pswapd   8(%1), %%mm0 \n\t&quot;
@@ -1895,7 +1895,7 @@
     asm volatile(&quot;femms&quot;);
 }
 static void vector_fmul_reverse_sse(float *dst, const float *src0, const float *src1, int len){
-    long i = len*4-32;
+    intptr_t i = len*4-32;
     asm volatile(
         &quot;1: \n\t&quot;
         &quot;movaps        16(%1), %%xmm0 \n\t&quot;
@@ -1916,7 +1916,7 @@
 
 static void vector_fmul_add_add_3dnow(float *dst, const float *src0, const float *src1,
                                       const float *src2, int src3, int len, int step){
-    long i = (len-4)*4;
+    intptr_t i = (len-4)*4;
     if(step == 2 &amp;&amp; src3 == 0){
         dst += (len-4)*2;
         asm volatile(
@@ -1965,7 +1965,7 @@
 }
 static void vector_fmul_add_add_sse(float *dst, const float *src0, const float *src1,
                                     const float *src2, int src3, int len, int step){
-    long i = (len-8)*4;
+    intptr_t i = (len-8)*4;
     if(step == 2 &amp;&amp; src3 == 0){
         dst += (len-8)*2;
         asm volatile(

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/dsputil_mmx_avg.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/dsputil_mmx_avg.h	2008-09-15 17:03:51 UTC (rev 4354)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/dsputil_mmx_avg.h	2008-09-15 17:38:48 UTC (rev 4355)
@@ -55,7 +55,7 @@
         &quot;subl $4, %0                    \n\t&quot;
         &quot;jnz 1b                         \n\t&quot;
         :&quot;+g&quot;(h), &quot;+S&quot;(pixels), &quot;+D&quot;(block)
-        :&quot;r&quot; ((long)line_size)
+        :&quot;r&quot; ((intptr_t)line_size)
         :&quot;%&quot;REG_a, &quot;memory&quot;);
 }
 
@@ -105,7 +105,7 @@
 #else
         :&quot;+b&quot;(h), &quot;+a&quot;(src1), &quot;+c&quot;(src2), &quot;+d&quot;(dst)
 #endif
-        :&quot;S&quot;((long)src1Stride), &quot;D&quot;((long)dstStride)
+        :&quot;S&quot;((intptr_t)src1Stride), &quot;D&quot;((intptr_t)dstStride)
         :&quot;memory&quot;);
 }
 
@@ -152,7 +152,7 @@
 #else
         :&quot;+b&quot;(h), &quot;+a&quot;(src1), &quot;+c&quot;(src2), &quot;+d&quot;(dst)
 #endif
-        :&quot;S&quot;((long)src1Stride), &quot;D&quot;((long)dstStride)
+        :&quot;S&quot;((intptr_t)src1Stride), &quot;D&quot;((intptr_t)dstStride)
         :&quot;memory&quot;);
 //the following should be used, though better not with gcc ...
 /*        :&quot;+g&quot;(h), &quot;+r&quot;(src1), &quot;+r&quot;(src2), &quot;+r&quot;(dst)
@@ -222,7 +222,7 @@
 #else
         :&quot;+b&quot;(h), &quot;+a&quot;(src1), &quot;+c&quot;(src2), &quot;+d&quot;(dst)
 #endif
-        :&quot;S&quot;((long)src1Stride), &quot;D&quot;((long)dstStride)
+        :&quot;S&quot;((intptr_t)src1Stride), &quot;D&quot;((intptr_t)dstStride)
         :&quot;memory&quot;);
 //the following should be used, though better not with gcc ...
 /*        :&quot;+g&quot;(h), &quot;+r&quot;(src1), &quot;+r&quot;(src2), &quot;+r&quot;(dst)
@@ -277,7 +277,7 @@
 #else
         :&quot;+b&quot;(h), &quot;+a&quot;(src1), &quot;+c&quot;(src2), &quot;+d&quot;(dst)
 #endif
-        :&quot;S&quot;((long)src1Stride), &quot;D&quot;((long)dstStride)
+        :&quot;S&quot;((intptr_t)src1Stride), &quot;D&quot;((intptr_t)dstStride)
         :&quot;memory&quot;);
 }
 
@@ -329,7 +329,7 @@
 #else
         :&quot;+b&quot;(h), &quot;+a&quot;(src1), &quot;+c&quot;(src2), &quot;+d&quot;(dst)
 #endif
-        :&quot;S&quot;((long)src1Stride), &quot;D&quot;((long)dstStride)
+        :&quot;S&quot;((intptr_t)src1Stride), &quot;D&quot;((intptr_t)dstStride)
         :&quot;memory&quot;);
 //the following should be used, though better not with gcc ...
 /*        :&quot;+g&quot;(h), &quot;+r&quot;(src1), &quot;+r&quot;(src2), &quot;+r&quot;(dst)
@@ -373,7 +373,7 @@
         &quot;subl $4, %0                    \n\t&quot;
         &quot;jnz 1b                         \n\t&quot;
         :&quot;+g&quot;(h), &quot;+S&quot;(pixels), &quot;+D&quot;(block)
-        :&quot;r&quot; ((long)line_size)
+        :&quot;r&quot; ((intptr_t)line_size)
         :&quot;%&quot;REG_a, &quot;memory&quot;);
 }
 
@@ -417,7 +417,7 @@
 #else
         :&quot;+b&quot;(h), &quot;+a&quot;(src1), &quot;+c&quot;(src2), &quot;+d&quot;(dst)
 #endif
-        :&quot;S&quot;((long)src1Stride), &quot;D&quot;((long)dstStride)
+        :&quot;S&quot;((intptr_t)src1Stride), &quot;D&quot;((intptr_t)dstStride)
         :&quot;memory&quot;);
 //the following should be used, though better not with gcc ...
 /*        :&quot;+g&quot;(h), &quot;+r&quot;(src1), &quot;+r&quot;(src2), &quot;+r&quot;(dst)
@@ -471,7 +471,7 @@
 #else
         :&quot;+b&quot;(h), &quot;+a&quot;(src1), &quot;+c&quot;(src2), &quot;+d&quot;(dst)
 #endif
-        :&quot;S&quot;((long)src1Stride), &quot;D&quot;((long)dstStride)
+        :&quot;S&quot;((intptr_t)src1Stride), &quot;D&quot;((intptr_t)dstStride)
         :&quot;memory&quot;);
 //the following should be used, though better not with gcc ...
 /*        :&quot;+g&quot;(h), &quot;+r&quot;(src1), &quot;+r&quot;(src2), &quot;+r&quot;(dst)
@@ -544,7 +544,7 @@
 #else
         :&quot;+b&quot;(h), &quot;+a&quot;(src1), &quot;+c&quot;(src2), &quot;+d&quot;(dst)
 #endif
-        :&quot;S&quot;((long)src1Stride), &quot;D&quot;((long)dstStride)
+        :&quot;S&quot;((intptr_t)src1Stride), &quot;D&quot;((intptr_t)dstStride)
         :&quot;memory&quot;);
 //the following should be used, though better not with gcc ...
 /*        :&quot;+g&quot;(h), &quot;+r&quot;(src1), &quot;+r&quot;(src2), &quot;+r&quot;(dst)
@@ -586,7 +586,7 @@
         &quot;subl $4, %0                    \n\t&quot;
         &quot;jnz 1b                         \n\t&quot;
         :&quot;+g&quot;(h), &quot;+S&quot;(pixels), &quot;+D&quot;(block)
-        :&quot;r&quot; ((long)line_size)
+        :&quot;r&quot; ((intptr_t)line_size)
         :&quot;%&quot;REG_a, &quot;memory&quot;);
 }
 
@@ -616,7 +616,7 @@
         &quot;subl $4, %0                    \n\t&quot;
         &quot;jnz 1b                         \n\t&quot;
         :&quot;+g&quot;(h), &quot;+S&quot;(pixels), &quot;+D&quot; (block)
-        :&quot;r&quot; ((long)line_size)
+        :&quot;r&quot; ((intptr_t)line_size)
         :&quot;%&quot;REG_a, &quot;memory&quot;);
 }
 
@@ -650,7 +650,7 @@
         &quot;subl $4, %0                    \n\t&quot;
         &quot;jnz 1b                         \n\t&quot;
         :&quot;+g&quot;(h), &quot;+S&quot;(pixels), &quot;+D&quot; (block)
-        :&quot;r&quot; ((long)line_size)
+        :&quot;r&quot; ((intptr_t)line_size)
         :&quot;%&quot;REG_a, &quot;memory&quot;);
 }
 
@@ -678,7 +678,7 @@
         &quot;subl $4, %0                    \n\t&quot;
         &quot;jnz 1b                         \n\t&quot;
         :&quot;+g&quot;(h), &quot;+S&quot;(pixels), &quot;+D&quot;(block)
-        :&quot;r&quot; ((long)line_size)
+        :&quot;r&quot; ((intptr_t)line_size)
         :&quot;%&quot;REG_a, &quot;memory&quot;);
 }
 
@@ -710,7 +710,7 @@
         &quot;subl $4, %0                    \n\t&quot;
         &quot;jnz 1b                         \n\t&quot;
         :&quot;+g&quot;(h), &quot;+S&quot;(pixels), &quot;+D&quot;(block)
-        :&quot;r&quot; ((long)line_size)
+        :&quot;r&quot; ((intptr_t)line_size)
         :&quot;%&quot;REG_a, &quot;memory&quot;);
 }
 
@@ -748,7 +748,7 @@
         &quot;subl $4, %0                    \n\t&quot;
         &quot;jnz 1b                         \n\t&quot;
         :&quot;+g&quot;(h), &quot;+S&quot;(pixels), &quot;+D&quot;(block)
-        :&quot;r&quot; ((long)line_size)
+        :&quot;r&quot; ((intptr_t)line_size)
         :&quot;%&quot;REG_a, &quot;memory&quot;);
 }
 
@@ -791,7 +791,7 @@
         &quot;subl $4, %0                    \n\t&quot;
         &quot;jnz 1b                         \n\t&quot;
         :&quot;+g&quot;(h), &quot;+S&quot;(pixels), &quot;+D&quot;(block)
-        :&quot;r&quot; ((long)line_size)
+        :&quot;r&quot; ((intptr_t)line_size)
         :&quot;%&quot;REG_a,  &quot;memory&quot;);
 }
 
@@ -812,7 +812,7 @@
             &quot;movd %%mm2, (%1, %2, 2)        \n\t&quot;
             &quot;movd %%mm3, (%1, %3)           \n\t&quot;
             ::&quot;S&quot;(pixels), &quot;D&quot;(block),
-             &quot;r&quot; ((long)line_size), &quot;r&quot;(3L*line_size)
+             &quot;r&quot; ((intptr_t)line_size), &quot;r&quot;(3*(intptr_t)line_size)
             :&quot;memory&quot;);
         block += 4*line_size;
         pixels += 4*line_size;
@@ -868,8 +868,8 @@
         &quot;decl  %0              \n\t&quot;\
         &quot;jnz   1b              \n\t&quot;\
         :&quot;+g&quot;(h), &quot;+r&quot;(src)\
-        :&quot;r&quot;((long)off1), &quot;r&quot;((long)off2),\
-         &quot;r&quot;((long)(dst-src)), &quot;r&quot;((long)stride)\
+        :&quot;r&quot;((intptr_t)off1), &quot;r&quot;((intptr_t)off2),\
+         &quot;r&quot;((intptr_t)(dst-src)), &quot;r&quot;((intptr_t)stride)\
         :&quot;memory&quot;\
     );\
 }\
@@ -885,8 +885,8 @@
         &quot;decl  %0              \n\t&quot;\
         &quot;jnz   1b              \n\t&quot;\
         :&quot;+g&quot;(h), &quot;+r&quot;(src)\
-        :&quot;r&quot;((long)off1), &quot;r&quot;((long)off2),\
-         &quot;r&quot;((long)(dst-src)), &quot;r&quot;((long)stride)\
+        :&quot;r&quot;((intptr_t)off1), &quot;r&quot;((intptr_t)off2),\
+         &quot;r&quot;((intptr_t)(dst-src)), &quot;r&quot;((intptr_t)stride)\
         :&quot;memory&quot;\
     );\
 }

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/dsputil_mmx_qns.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/dsputil_mmx_qns.h	2008-09-15 17:03:51 UTC (rev 4354)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/dsputil_mmx_qns.h	2008-09-15 17:38:48 UTC (rev 4355)
@@ -30,7 +30,7 @@
 
 static int DEF(try_8x8basis)(int16_t rem[64], int16_t weight[64], int16_t basis[64], int scale)
 {
-    long i=0;
+    intptr_t i=0;
 
     assert(FFABS(scale) &lt; MAX_ABS);
     scale&lt;&lt;= 16 + SCALE_OFFSET - BASIS_SHIFT + RECON_SHIFT;
@@ -72,7 +72,7 @@
 
 static void DEF(add_8x8basis)(int16_t rem[64], int16_t basis[64], int scale)
 {
-    long i=0;
+    intptr_t i=0;
 
     if(FFABS(scale) &lt; MAX_ABS){
         scale&lt;&lt;= 16 + SCALE_OFFSET - BASIS_SHIFT + RECON_SHIFT;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/dsputil_mmx_rnd.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/dsputil_mmx_rnd.h	2008-09-15 17:03:51 UTC (rev 4354)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/dsputil_mmx_rnd.h	2008-09-15 17:38:48 UTC (rev 4355)
@@ -57,7 +57,7 @@
         &quot;subl   $4, %0                  \n\t&quot;
         &quot;jnz    1b                      \n\t&quot;
         :&quot;+g&quot;(h), &quot;+S&quot;(pixels), &quot;+D&quot;(block)
-        :&quot;r&quot;((long)line_size)
+        :&quot;r&quot;((intptr_t)line_size)
         :REG_a, &quot;memory&quot;);
 }
 
@@ -107,7 +107,7 @@
 #else
         :&quot;+b&quot;(h), &quot;+a&quot;(src1), &quot;+c&quot;(src2), &quot;+d&quot;(dst)
 #endif
-        :&quot;S&quot;((long)src1Stride), &quot;D&quot;((long)dstStride)
+        :&quot;S&quot;((intptr_t)src1Stride), &quot;D&quot;((intptr_t)dstStride)
         :&quot;memory&quot;);
 }
 
@@ -153,7 +153,7 @@
         &quot;subl   $4, %0                  \n\t&quot;
         &quot;jnz    1b                      \n\t&quot;
         :&quot;+g&quot;(h), &quot;+S&quot;(pixels), &quot;+D&quot;(block)
-        :&quot;r&quot;((long)line_size)
+        :&quot;r&quot;((intptr_t)line_size)
         :REG_a, &quot;memory&quot;);
 }
 
@@ -202,7 +202,7 @@
 #else
         :&quot;+b&quot;(h), &quot;+a&quot;(src1), &quot;+c&quot;(src2), &quot;+d&quot;(dst)
 #endif
-        :&quot;S&quot;((long)src1Stride), &quot;D&quot;((long)dstStride)
+        :&quot;S&quot;((intptr_t)src1Stride), &quot;D&quot;((intptr_t)dstStride)
         :&quot;memory&quot;);
 }
 
@@ -231,7 +231,7 @@
         &quot;subl   $4, %0                  \n\t&quot;
         &quot;jnz    1b                      \n\t&quot;
         :&quot;+g&quot;(h), &quot;+S&quot;(pixels), &quot;+D&quot;(block)
-        :&quot;r&quot;((long)line_size)
+        :&quot;r&quot;((intptr_t)line_size)
         :REG_a, &quot;memory&quot;);
 }
 
@@ -297,7 +297,7 @@
         &quot;subl   $2, %0                  \n\t&quot;
         &quot;jnz    1b                      \n\t&quot;
         :&quot;+g&quot;(h), &quot;+S&quot;(pixels)
-        :&quot;D&quot;(block), &quot;r&quot;((long)line_size)
+        :&quot;D&quot;(block), &quot;r&quot;((intptr_t)line_size)
         :REG_a, &quot;memory&quot;);
 }
 
@@ -493,7 +493,7 @@
         &quot;subl   $4, %0                  \n\t&quot;
         &quot;jnz    1b                      \n\t&quot;
         :&quot;+g&quot;(h), &quot;+S&quot;(pixels), &quot;+D&quot;(block)
-        :&quot;r&quot;((long)line_size)
+        :&quot;r&quot;((intptr_t)line_size)
         :REG_a, &quot;memory&quot;);
 }
 
@@ -568,7 +568,7 @@
         &quot;subl   $2, %0                  \n\t&quot;
         &quot;jnz    1b                      \n\t&quot;
         :&quot;+g&quot;(h), &quot;+S&quot;(pixels)
-        :&quot;D&quot;(block), &quot;r&quot;((long)line_size)
+        :&quot;D&quot;(block), &quot;r&quot;((intptr_t)line_size)
         :REG_a, &quot;memory&quot;);
 }
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/dsputilenc_mmx.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/dsputilenc_mmx.c	2008-09-15 17:03:51 UTC (rev 4354)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/dsputilenc_mmx.c	2008-09-15 17:38:48 UTC (rev 4355)
@@ -51,7 +51,7 @@
         &quot;add $32, %%&quot;REG_a&quot;             \n\t&quot;
         &quot;js 1b                          \n\t&quot;
         : &quot;+r&quot; (pixels)
-        : &quot;r&quot; (block+64), &quot;r&quot; ((long)line_size), &quot;r&quot; ((long)line_size*2)
+        : &quot;r&quot; (block+64), &quot;r&quot; ((intptr_t)line_size), &quot;r&quot; ((intptr_t)line_size*2)
         : &quot;%&quot;REG_a
     );
 }
@@ -80,7 +80,7 @@
         &quot;add $16, %%&quot;REG_a&quot;             \n\t&quot;
         &quot;jnz 1b                         \n\t&quot;
         : &quot;+r&quot; (s1), &quot;+r&quot; (s2)
-        : &quot;r&quot; (block+64), &quot;r&quot; ((long)stride)
+        : &quot;r&quot; (block+64), &quot;r&quot; ((intptr_t)stride)
         : &quot;%&quot;REG_a
     );
 }
@@ -88,7 +88,7 @@
 static int pix_sum16_mmx(uint8_t * pix, int line_size){
     const int h=16;
     int sum;
-    long index= -line_size*h;
+    intptr_t index= -line_size*h;
 
     asm volatile(
                 &quot;pxor %%mm7, %%mm7              \n\t&quot;
@@ -117,7 +117,7 @@
                 &quot;movd %%mm6, %0                 \n\t&quot;
                 &quot;andl $0xFFFF, %0               \n\t&quot;
                 : &quot;=&amp;r&quot; (sum), &quot;+r&quot; (index)
-                : &quot;r&quot; (pix - index), &quot;r&quot; ((long)line_size)
+                : &quot;r&quot; (pix - index), &quot;r&quot; ((intptr_t)line_size)
         );
 
         return sum;
@@ -162,7 +162,7 @@
       &quot;psrlq $32, %%mm7\n&quot;      /* shift hi dword to lo */
       &quot;paddd %%mm7,%%mm1\n&quot;
       &quot;movd %%mm1,%1\n&quot;
-      : &quot;+r&quot; (pix), &quot;=r&quot;(tmp) : &quot;r&quot; ((long)line_size) : &quot;%ecx&quot; );
+      : &quot;+r&quot; (pix), &quot;=r&quot;(tmp) : &quot;r&quot; ((intptr_t)line_size) : &quot;%ecx&quot; );
     return tmp;
 }
 
@@ -222,7 +222,7 @@
       &quot;paddd %%mm7,%%mm1\n&quot;
       &quot;movd %%mm1,%2\n&quot;
       : &quot;+r&quot; (pix1), &quot;+r&quot; (pix2), &quot;=r&quot;(tmp)
-      : &quot;r&quot; ((long)line_size) , &quot;m&quot; (h)
+      : &quot;r&quot; ((intptr_t)line_size) , &quot;m&quot; (h)
       : &quot;%ecx&quot;);
     return tmp;
 }
@@ -282,7 +282,7 @@
       &quot;paddd %%mm7,%%mm1\n&quot;
       &quot;movd %%mm1,%2\n&quot;
       : &quot;+r&quot; (pix1), &quot;+r&quot; (pix2), &quot;=r&quot;(tmp)
-      : &quot;r&quot; ((long)line_size) , &quot;m&quot; (h)
+      : &quot;r&quot; ((intptr_t)line_size) , &quot;m&quot; (h)
       : &quot;%ecx&quot;);
     return tmp;
 }
@@ -345,7 +345,7 @@
       &quot;paddd %%xmm1,%%xmm7\n&quot;
       &quot;movd %%xmm7,%3\n&quot;
       : &quot;+r&quot; (pix1), &quot;+r&quot; (pix2), &quot;+r&quot;(h), &quot;=r&quot;(tmp)
-      : &quot;r&quot; ((long)line_size));
+      : &quot;r&quot; ((intptr_t)line_size));
     return tmp;
 }
 
@@ -469,7 +469,7 @@
       &quot;paddd %%mm6,%%mm0\n&quot;
       &quot;movd %%mm0,%1\n&quot;
       : &quot;+r&quot; (pix1), &quot;=r&quot;(tmp)
-      : &quot;r&quot; ((long)line_size) , &quot;g&quot; (h-2)
+      : &quot;r&quot; ((intptr_t)line_size) , &quot;g&quot; (h-2)
       : &quot;%ecx&quot;);
       return tmp;
 }
@@ -583,7 +583,7 @@
       &quot;paddd %%mm6,%%mm0\n&quot;
       &quot;movd %%mm0,%1\n&quot;
       : &quot;+r&quot; (pix1), &quot;=r&quot;(tmp)
-      : &quot;r&quot; ((long)line_size) , &quot;g&quot; (h-2)
+      : &quot;r&quot; ((intptr_t)line_size) , &quot;g&quot; (h-2)
       : &quot;%ecx&quot;);
       return tmp + hf_noise8_mmx(pix+8, line_size, h);
 }
@@ -665,7 +665,7 @@
       &quot;paddw %%mm6,%%mm0\n&quot;
       &quot;movd %%mm0,%1\n&quot;
       : &quot;+r&quot; (pix), &quot;=r&quot;(tmp)
-      : &quot;r&quot; ((long)line_size) , &quot;m&quot; (h)
+      : &quot;r&quot; ((intptr_t)line_size) , &quot;m&quot; (h)
       : &quot;%ecx&quot;);
     return tmp &amp; 0xFFFF;
 }
@@ -706,7 +706,7 @@
 
       &quot;movd %%mm6,%1\n&quot;
       : &quot;+r&quot; (pix), &quot;=r&quot;(tmp)
-      : &quot;r&quot; ((long)line_size) , &quot;m&quot; (h)
+      : &quot;r&quot; ((intptr_t)line_size) , &quot;m&quot; (h)
       : &quot;%ecx&quot;);
     return tmp;
 }
@@ -785,7 +785,7 @@
       &quot;paddw %%mm6,%%mm0\n&quot;
       &quot;movd %%mm0,%2\n&quot;
       : &quot;+r&quot; (pix1), &quot;+r&quot; (pix2), &quot;=r&quot;(tmp)
-      : &quot;r&quot; ((long)line_size) , &quot;m&quot; (h)
+      : &quot;r&quot; ((intptr_t)line_size) , &quot;m&quot; (h)
       : &quot;%ecx&quot;);
     return tmp &amp; 0x7FFF;
 }
@@ -843,14 +843,14 @@
 
       &quot;movd %%mm6,%2\n&quot;
       : &quot;+r&quot; (pix1), &quot;+r&quot; (pix2), &quot;=r&quot;(tmp)
-      : &quot;r&quot; ((long)line_size) , &quot;m&quot; (h)
+      : &quot;r&quot; ((intptr_t)line_size) , &quot;m&quot; (h)
       : &quot;%ecx&quot;);
     return tmp;
 }
 #undef SUM
 
 static void diff_bytes_mmx(uint8_t *dst, uint8_t *src1, uint8_t *src2, int w){
-    long i=0;
+    intptr_t i=0;
     asm volatile(
         &quot;1:                             \n\t&quot;
         &quot;movq  (%2, %0), %%mm0          \n\t&quot;
@@ -865,14 +865,14 @@
         &quot;cmp %4, %0                     \n\t&quot;
         &quot; jb 1b                         \n\t&quot;
         : &quot;+r&quot; (i)
-        : &quot;r&quot;(src1), &quot;r&quot;(src2), &quot;r&quot;(dst), &quot;r&quot;((long)w-15)
+        : &quot;r&quot;(src1), &quot;r&quot;(src2), &quot;r&quot;(dst), &quot;r&quot;((intptr_t)w-15)
     );
     for(; i&lt;w; i++)
         dst[i+0] = src1[i+0]-src2[i+0];
 }
 
 static void sub_hfyu_median_prediction_mmx2(uint8_t *dst, uint8_t *src1, uint8_t *src2, int w, int *left, int *left_top){
-    long i=0;
+    intptr_t i=0;
     uint8_t l, lt;
 
     asm volatile(
@@ -895,7 +895,7 @@
         &quot;cmp %4, %0                     \n\t&quot;
         &quot; jb 1b                         \n\t&quot;
         : &quot;+r&quot; (i)
-        : &quot;r&quot;(src1), &quot;r&quot;(src2), &quot;r&quot;(dst), &quot;r&quot;((long)w)
+        : &quot;r&quot;(src1), &quot;r&quot;(src2), &quot;r&quot;(dst), &quot;r&quot;((intptr_t)w)
     );
 
     l= *left;
@@ -930,7 +930,7 @@
         DIFF_PIXELS_1(m0, mm##7, mm##0, (%1,%3,4), (%2,%3,4))\
         &quot;mov&quot;#m1&quot; %0, &quot;#mm&quot;0          \n\t&quot;\
         : &quot;+m&quot;(temp), &quot;+r&quot;(p1b), &quot;+r&quot;(p2b)\
-        : &quot;r&quot;((long)stride), &quot;r&quot;((long)stride*3)\
+        : &quot;r&quot;((intptr_t)stride), &quot;r&quot;((intptr_t)stride*3)\
     );\
 }
     //the &quot;+m&quot;(temp) is needed as gcc 2.95 sometimes fails to compile &quot;=m&quot;(temp)
@@ -1237,7 +1237,7 @@
 
 static int ssd_int8_vs_int16_mmx(const int8_t *pix1, const int16_t *pix2, int size){
     int sum;
-    long i=size;
+    intptr_t i=size;
     asm volatile(
         &quot;pxor %%mm4, %%mm4 \n&quot;
         &quot;1: \n&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/fft_3dn.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/fft_3dn.c	2008-09-15 17:03:51 UTC (rev 4354)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/fft_3dn.c	2008-09-15 17:38:48 UTC (rev 4355)
@@ -30,8 +30,8 @@
 void ff_fft_calc_3dn(FFTContext *s, FFTComplex *z)
 {
     int ln = s-&gt;nbits;
-    long i, j;
-    long nblocks, nloops;
+    intptr_t i, j;
+    intptr_t nblocks, nloops;
     FFTComplex *p, *cptr;
 
     asm volatile(

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/fft_3dn2.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/fft_3dn2.c	2008-09-15 17:03:51 UTC (rev 4354)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/fft_3dn2.c	2008-09-15 17:38:48 UTC (rev 4355)
@@ -30,8 +30,8 @@
 void ff_fft_calc_3dn2(FFTContext *s, FFTComplex *z)
 {
     int ln = s-&gt;nbits;
-    long i, j;
-    long nblocks, nloops;
+    intptr_t i, j;
+    intptr_t nblocks, nloops;
     FFTComplex *p, *cptr;
 
     asm volatile(
@@ -124,7 +124,7 @@
 void ff_imdct_calc_3dn2(MDCTContext *s, FFTSample *output,
                         const FFTSample *input, FFTSample *tmp)
 {
-    long k, n8, n4, n2, n;
+    intptr_t k, n8, n4, n2, n;
     const uint16_t *revtab = s-&gt;fft.revtab;
     const FFTSample *tcos = s-&gt;tcos;
     const FFTSample *tsin = s-&gt;tsin;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/fft_sse.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/fft_sse.c	2008-09-15 17:03:51 UTC (rev 4354)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/fft_sse.c	2008-09-15 17:38:48 UTC (rev 4355)
@@ -48,8 +48,8 @@
 void ff_fft_calc_sse(FFTContext *s, FFTComplex *z)
 {
     int ln = s-&gt;nbits;
-    long i, j;
-    long nblocks, nloops;
+    intptr_t i, j;
+    intptr_t nblocks, nloops;
     FFTComplex *p, *cptr;
 
     asm volatile(
@@ -142,7 +142,7 @@
 void ff_imdct_calc_sse(MDCTContext *s, FFTSample *output,
                        const FFTSample *input, FFTSample *tmp)
 {
-    long k, n8, n4, n2, n;
+    intptr_t k, n8, n4, n2, n;
     const uint16_t *revtab = s-&gt;fft.revtab;
     const FFTSample *tcos = s-&gt;tcos;
     const FFTSample *tsin = s-&gt;tsin;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/flacdsp_mmx.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/flacdsp_mmx.c	2008-09-15 17:03:51 UTC (rev 4354)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/flacdsp_mmx.c	2008-09-15 17:38:48 UTC (rev 4355)
@@ -25,8 +25,8 @@
 {
     double c = 2.0 / (len-1.0);
     int n2 = len&gt;&gt;1;
-    long i = -n2*sizeof(int32_t);
-    long j =  n2*sizeof(int32_t);
+    intptr_t i = -n2*sizeof(int32_t);
+    intptr_t j =  n2*sizeof(int32_t);
     asm volatile(
         &quot;movsd   %0,     %%xmm7 \n\t&quot;
         &quot;movapd  %1,     %%xmm6 \n\t&quot;
@@ -71,7 +71,7 @@
     double *data1 = tmp + lag;
     int j;
 
-    if((long)data1 &amp; 15)
+    if((intptr_t)data1 &amp; 15)
         data1++;
 
     apply_welch_window_sse2(data, len, data1);
@@ -81,7 +81,7 @@
     data1[len] = 0.0;
 
     for(j=0; j&lt;lag; j+=2){
-        long i = -len*sizeof(double);
+        intptr_t i = -len*sizeof(double);
         if(j == lag-2) {
             asm volatile(
                 &quot;movsd     %6,     %%xmm0 \n\t&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/h264dsp_mmx.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/h264dsp_mmx.c	2008-09-15 17:03:51 UTC (rev 4354)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/h264dsp_mmx.c	2008-09-15 17:38:48 UTC (rev 4355)
@@ -86,7 +86,7 @@
         &quot;add %1, %0             \n\t&quot;
     STORE_DIFF_4P( %%mm4, %%mm1, %%mm7)
         : &quot;+r&quot;(dst)
-        : &quot;r&quot; ((long)stride)
+        : &quot;r&quot; ((intptr_t)stride)
     );
 }
 
@@ -294,7 +294,7 @@
         STORE_DIFF_8P(%%xmm0, (%0,%2,2), %%xmm6, %%xmm7)
         STORE_DIFF_8P(%%xmm1, (%0,%3),   %%xmm6, %%xmm7)
         :&quot;+r&quot;(dst)
-        :&quot;r&quot;(block), &quot;r&quot;((long)stride), &quot;r&quot;(3L*stride), &quot;m&quot;(ff_pw_32)
+        :&quot;r&quot;(block), &quot;r&quot;((intptr_t)stride), &quot;r&quot;(3*(intptr_t)stride), &quot;m&quot;(ff_pw_32)
     );
 }
 
@@ -503,7 +503,7 @@
         &quot;movq      %%mm2, (%2)      \n\t&quot;
 
         : &quot;=m&quot;(*tmp0)
-        : &quot;r&quot;(pix-3*stride), &quot;r&quot;(pix), &quot;r&quot;((long)stride),
+        : &quot;r&quot;(pix-3*stride), &quot;r&quot;(pix), &quot;r&quot;((intptr_t)stride),
           &quot;m&quot;(*tmp0/*unused*/), &quot;m&quot;(*(uint32_t*)tc0), &quot;m&quot;(alpha1), &quot;m&quot;(beta1),
           &quot;m&quot;(ff_bone)
     );
@@ -550,7 +550,7 @@
         &quot;movq      %%mm1, (%0,%2)   \n\t&quot;
         &quot;movq      %%mm2, (%1)      \n\t&quot;
 
-        :: &quot;r&quot;(pix-2*stride), &quot;r&quot;(pix), &quot;r&quot;((long)stride),
+        :: &quot;r&quot;(pix-2*stride), &quot;r&quot;(pix), &quot;r&quot;((intptr_t)stride),
            &quot;r&quot;(*(uint32_t*)tc0),
            &quot;m&quot;(alpha1), &quot;m&quot;(beta1), &quot;m&quot;(ff_bone), &quot;m&quot;(ff_pb_3F)
     );
@@ -601,7 +601,7 @@
         &quot;paddb   %%mm6,   %%mm2     \n\t&quot;
         &quot;movq    %%mm1,   (%0,%2)   \n\t&quot;
         &quot;movq    %%mm2,   (%1)      \n\t&quot;
-        :: &quot;r&quot;(pix-2*stride), &quot;r&quot;(pix), &quot;r&quot;((long)stride),
+        :: &quot;r&quot;(pix-2*stride), &quot;r&quot;(pix), &quot;r&quot;((intptr_t)stride),
            &quot;m&quot;(alpha1), &quot;m&quot;(beta1), &quot;m&quot;(ff_bone)
     );
 }
@@ -797,7 +797,7 @@
         &quot;decl %2                    \n\t&quot;\
         &quot; jnz 1b                    \n\t&quot;\
         : &quot;+a&quot;(src), &quot;+c&quot;(dst), &quot;+g&quot;(h)\
-        : &quot;d&quot;((long)srcStride), &quot;S&quot;((long)dstStride), &quot;m&quot;(ff_pw_5), &quot;m&quot;(ff_pw_16)\
+        : &quot;d&quot;((intptr_t)srcStride), &quot;S&quot;((intptr_t)dstStride), &quot;m&quot;(ff_pw_5), &quot;m&quot;(ff_pw_16)\
         : &quot;memory&quot;\
     );\
 }\
@@ -840,7 +840,7 @@
         &quot;add %4, %1                 \n\t&quot;\
         &quot;add %3, %2                 \n\t&quot;\
         : &quot;+a&quot;(src), &quot;+c&quot;(dst), &quot;+d&quot;(src2)\
-        : &quot;D&quot;((long)src2Stride), &quot;S&quot;((long)dstStride)\
+        : &quot;D&quot;((intptr_t)src2Stride), &quot;S&quot;((intptr_t)dstStride)\
         : &quot;memory&quot;\
     );\
     }while(--h);\
@@ -870,7 +870,7 @@
         QPEL_H264V(%%mm3, %%mm4, %%mm5, %%mm0, %%mm1, %%mm2, OP)\
          \
         : &quot;+a&quot;(src), &quot;+c&quot;(dst)\
-        : &quot;S&quot;((long)srcStride), &quot;D&quot;((long)dstStride), &quot;m&quot;(ff_pw_5), &quot;m&quot;(ff_pw_16)\
+        : &quot;S&quot;((intptr_t)srcStride), &quot;D&quot;((intptr_t)dstStride), &quot;m&quot;(ff_pw_5), &quot;m&quot;(ff_pw_16)\
         : &quot;memory&quot;\
     );\
 }\
@@ -902,7 +902,7 @@
             QPEL_H264HV(%%mm3, %%mm4, %%mm5, %%mm0, %%mm1, %%mm2, 3*8*3)\
              \
             : &quot;+a&quot;(src)\
-            : &quot;c&quot;(tmp), &quot;S&quot;((long)srcStride), &quot;m&quot;(ff_pw_5), &quot;m&quot;(ff_pw_16)\
+            : &quot;c&quot;(tmp), &quot;S&quot;((intptr_t)srcStride), &quot;m&quot;(ff_pw_5), &quot;m&quot;(ff_pw_16)\
             : &quot;memory&quot;\
         );\
         tmp += 4;\
@@ -931,7 +931,7 @@
         &quot;decl %2                    \n\t&quot;\
         &quot; jnz 1b                    \n\t&quot;\
         : &quot;+a&quot;(tmp), &quot;+c&quot;(dst), &quot;+g&quot;(h)\
-        : &quot;S&quot;((long)dstStride)\
+        : &quot;S&quot;((intptr_t)dstStride)\
         : &quot;memory&quot;\
     );\
 }\
@@ -988,7 +988,7 @@
         &quot;decl %2                    \n\t&quot;\
         &quot; jnz 1b                    \n\t&quot;\
         : &quot;+a&quot;(src), &quot;+c&quot;(dst), &quot;+g&quot;(h)\
-        : &quot;d&quot;((long)srcStride), &quot;S&quot;((long)dstStride), &quot;m&quot;(ff_pw_5), &quot;m&quot;(ff_pw_16)\
+        : &quot;d&quot;((intptr_t)srcStride), &quot;S&quot;((intptr_t)dstStride), &quot;m&quot;(ff_pw_5), &quot;m&quot;(ff_pw_16)\
         : &quot;memory&quot;\
     );\
 }\
@@ -1049,7 +1049,7 @@
         &quot;add %4, %1                 \n\t&quot;\
         &quot;add %3, %2                 \n\t&quot;\
         : &quot;+a&quot;(src), &quot;+c&quot;(dst), &quot;+d&quot;(src2)\
-        : &quot;D&quot;((long)src2Stride), &quot;S&quot;((long)dstStride),\
+        : &quot;D&quot;((intptr_t)src2Stride), &quot;S&quot;((intptr_t)dstStride),\
           &quot;m&quot;(ff_pw_16)\
         : &quot;memory&quot;\
     );\
@@ -1088,7 +1088,7 @@
         QPEL_H264V(%%mm1, %%mm2, %%mm3, %%mm4, %%mm5, %%mm0, OP)\
          \
         : &quot;+a&quot;(src), &quot;+c&quot;(dst)\
-        : &quot;S&quot;((long)srcStride), &quot;D&quot;((long)dstStride), &quot;m&quot;(ff_pw_5), &quot;m&quot;(ff_pw_16)\
+        : &quot;S&quot;((intptr_t)srcStride), &quot;D&quot;((intptr_t)dstStride), &quot;m&quot;(ff_pw_5), &quot;m&quot;(ff_pw_16)\
         : &quot;memory&quot;\
      );\
      if(h==16){\
@@ -1103,7 +1103,7 @@
             QPEL_H264V(%%mm3, %%mm4, %%mm5, %%mm0, %%mm1, %%mm2, OP)\
             \
            : &quot;+a&quot;(src), &quot;+c&quot;(dst)\
-           : &quot;S&quot;((long)srcStride), &quot;D&quot;((long)dstStride), &quot;m&quot;(ff_pw_5), &quot;m&quot;(ff_pw_16)\
+           : &quot;S&quot;((intptr_t)srcStride), &quot;D&quot;((intptr_t)dstStride), &quot;m&quot;(ff_pw_5), &quot;m&quot;(ff_pw_16)\
            : &quot;memory&quot;\
         );\
      }\
@@ -1141,7 +1141,7 @@
             QPEL_H264HV(%%mm0, %%mm1, %%mm2, %%mm3, %%mm4, %%mm5, 6*48)\
             QPEL_H264HV(%%mm1, %%mm2, %%mm3, %%mm4, %%mm5, %%mm0, 7*48)\
             : &quot;+a&quot;(src)\
-            : &quot;c&quot;(tmp), &quot;S&quot;((long)srcStride), &quot;m&quot;(ff_pw_5), &quot;m&quot;(ff_pw_16)\
+            : &quot;c&quot;(tmp), &quot;S&quot;((intptr_t)srcStride), &quot;m&quot;(ff_pw_5), &quot;m&quot;(ff_pw_16)\
             : &quot;memory&quot;\
         );\
         if(size==16){\
@@ -1155,7 +1155,7 @@
                 QPEL_H264HV(%%mm2, %%mm3, %%mm4, %%mm5, %%mm0, %%mm1, 14*48)\
                 QPEL_H264HV(%%mm3, %%mm4, %%mm5, %%mm0, %%mm1, %%mm2, 15*48)\
                 : &quot;+a&quot;(src)\
-                : &quot;c&quot;(tmp), &quot;S&quot;((long)srcStride), &quot;m&quot;(ff_pw_5), &quot;m&quot;(ff_pw_16)\
+                : &quot;c&quot;(tmp), &quot;S&quot;((intptr_t)srcStride), &quot;m&quot;(ff_pw_5), &quot;m&quot;(ff_pw_16)\
                 : &quot;memory&quot;\
             );\
         }\
@@ -1202,7 +1202,7 @@
         &quot;decl %2                    \n\t&quot;\
         &quot; jnz 1b                    \n\t&quot;\
         : &quot;+a&quot;(tmp), &quot;+c&quot;(dst), &quot;+g&quot;(h)\
-        : &quot;S&quot;((long)dstStride)\
+        : &quot;S&quot;((intptr_t)dstStride)\
         : &quot;memory&quot;\
     );\
     tmp += 8 - size*24;\
@@ -1275,7 +1275,7 @@
         OP(%%mm0, (%2),    %%mm4, d)\
         OP(%%mm1, (%2,%4), %%mm5, d)\
         :&quot;+a&quot;(src8), &quot;+c&quot;(src16), &quot;+d&quot;(dst)\
-        :&quot;S&quot;((long)src8Stride), &quot;D&quot;((long)dstStride)\
+        :&quot;S&quot;((intptr_t)src8Stride), &quot;D&quot;((intptr_t)dstStride)\
         :&quot;memory&quot;);\
 }\
 static av_noinline void OPNAME ## pixels8_l2_shift5_ ## MMX(uint8_t *dst, int16_t *src16, uint8_t *src8, int dstStride, int src8Stride, int h)\
@@ -1297,7 +1297,7 @@
         OP(%%mm0, (%2), %%mm5, q)\
         OP(%%mm2, (%2,%4), %%mm5, q)\
         ::&quot;a&quot;(src8), &quot;c&quot;(src16), &quot;d&quot;(dst),\
-          &quot;r&quot;((long)src8Stride), &quot;r&quot;((long)dstStride)\
+          &quot;r&quot;((intptr_t)src8Stride), &quot;r&quot;((intptr_t)dstStride)\
         :&quot;memory&quot;);\
         src8 += 2L*src8Stride;\
         src16 += 48;\
@@ -1372,7 +1372,7 @@
         &quot;decl %3                    \n\t&quot;\
         &quot;jg 1b                      \n\t&quot;\
         : &quot;+a&quot;(src), &quot;+c&quot;(dst), &quot;+d&quot;(src2), &quot;+g&quot;(h)\
-        : &quot;D&quot;((long)src2Stride), &quot;S&quot;((long)dstStride),\
+        : &quot;D&quot;((intptr_t)src2Stride), &quot;S&quot;((intptr_t)dstStride),\
           &quot;m&quot;(ff_pw_5), &quot;m&quot;(ff_pw_16)\
         : &quot;memory&quot;\
     );\
@@ -1430,7 +1430,7 @@
         &quot;add %4, %1                 \n\t&quot;\
         &quot;add %3, %2                 \n\t&quot;\
         : &quot;+a&quot;(src), &quot;+c&quot;(dst), &quot;+d&quot;(src2)\
-        : &quot;D&quot;((long)src2Stride), &quot;S&quot;((long)dstStride),\
+        : &quot;D&quot;((intptr_t)src2Stride), &quot;S&quot;((intptr_t)dstStride),\
           &quot;m&quot;(ff_pw_16)\
         : &quot;memory&quot;\
     );\
@@ -1473,7 +1473,7 @@
         &quot;decl %2                    \n\t&quot;\
         &quot; jnz 1b                    \n\t&quot;\
         : &quot;+a&quot;(src), &quot;+c&quot;(dst), &quot;+g&quot;(h)\
-        : &quot;D&quot;((long)srcStride), &quot;S&quot;((long)dstStride),\
+        : &quot;D&quot;((intptr_t)srcStride), &quot;S&quot;((intptr_t)dstStride),\
           &quot;m&quot;(ff_pw_5), &quot;m&quot;(ff_pw_16)\
         : &quot;memory&quot;\
     );\
@@ -1518,7 +1518,7 @@
         QPEL_H264V_XMM(%%xmm1, %%xmm2, %%xmm3, %%xmm4, %%xmm5, %%xmm0, OP)\
          \
         : &quot;+a&quot;(src), &quot;+c&quot;(dst)\
-        : &quot;S&quot;((long)srcStride), &quot;D&quot;((long)dstStride), &quot;m&quot;(ff_pw_5), &quot;m&quot;(ff_pw_16)\
+        : &quot;S&quot;((intptr_t)srcStride), &quot;D&quot;((intptr_t)dstStride), &quot;m&quot;(ff_pw_5), &quot;m&quot;(ff_pw_16)\
         : &quot;memory&quot;\
     );\
     if(h==16){\
@@ -1533,7 +1533,7 @@
             QPEL_H264V_XMM(%%xmm3, %%xmm4, %%xmm5, %%xmm0, %%xmm1, %%xmm2, OP)\
             \
             : &quot;+a&quot;(src), &quot;+c&quot;(dst)\
-            : &quot;S&quot;((long)srcStride), &quot;D&quot;((long)dstStride), &quot;m&quot;(ff_pw_5), &quot;m&quot;(ff_pw_16)\
+            : &quot;S&quot;((intptr_t)srcStride), &quot;D&quot;((intptr_t)dstStride), &quot;m&quot;(ff_pw_5), &quot;m&quot;(ff_pw_16)\
             : &quot;memory&quot;\
         );\
     }\
@@ -1576,7 +1576,7 @@
             QPEL_H264HV_XMM(%%xmm0, %%xmm1, %%xmm2, %%xmm3, %%xmm4, %%xmm5, 6*48)
             QPEL_H264HV_XMM(%%xmm1, %%xmm2, %%xmm3, %%xmm4, %%xmm5, %%xmm0, 7*48)
             : &quot;+a&quot;(src)
-            : &quot;c&quot;(tmp), &quot;S&quot;((long)srcStride), &quot;m&quot;(ff_pw_5), &quot;m&quot;(ff_pw_16)
+            : &quot;c&quot;(tmp), &quot;S&quot;((intptr_t)srcStride), &quot;m&quot;(ff_pw_5), &quot;m&quot;(ff_pw_16)
             : &quot;memory&quot;
         );
         if(size==16){
@@ -1590,7 +1590,7 @@
                 QPEL_H264HV_XMM(%%xmm2, %%xmm3, %%xmm4, %%xmm5, %%xmm0, %%xmm1, 14*48)
                 QPEL_H264HV_XMM(%%xmm3, %%xmm4, %%xmm5, %%xmm0, %%xmm1, %%xmm2, 15*48)
                 : &quot;+a&quot;(src)
-                : &quot;c&quot;(tmp), &quot;S&quot;((long)srcStride), &quot;m&quot;(ff_pw_5), &quot;m&quot;(ff_pw_16)
+                : &quot;c&quot;(tmp), &quot;S&quot;((intptr_t)srcStride), &quot;m&quot;(ff_pw_5), &quot;m&quot;(ff_pw_16)
                 : &quot;memory&quot;
             );
         }
@@ -1654,7 +1654,7 @@
             &quot;decl %2                    \n\t&quot;\
             &quot; jnz 1b                    \n\t&quot;\
             : &quot;+a&quot;(tmp), &quot;+c&quot;(dst), &quot;+g&quot;(h)\
-            : &quot;S&quot;((long)dstStride)\
+            : &quot;S&quot;((intptr_t)dstStride)\
             : &quot;memory&quot;\
         );\
     }else{\
@@ -1688,7 +1688,7 @@
             &quot;decl %2                    \n\t&quot;\
             &quot; jnz 1b                    \n\t&quot;\
             : &quot;+a&quot;(tmp), &quot;+c&quot;(dst), &quot;+g&quot;(h)\
-            : &quot;S&quot;((long)dstStride)\
+            : &quot;S&quot;((intptr_t)dstStride)\
             : &quot;memory&quot;\
         );\
     }\

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/motion_est_mmx.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/motion_est_mmx.c	2008-09-15 17:03:51 UTC (rev 4354)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/motion_est_mmx.c	2008-09-15 17:38:48 UTC (rev 4355)
@@ -34,7 +34,7 @@
 
 static inline void sad8_1_mmx(uint8_t *blk1, uint8_t *blk2, int stride, int h)
 {
-    long len= -(stride*h);
+    intptr_t len= -(stride*h);
     asm volatile(
         ASMALIGN(4)
         &quot;1:                             \n\t&quot;
@@ -64,7 +64,7 @@
         &quot;add %3, %%&quot;REG_a&quot;              \n\t&quot;
         &quot; js 1b                         \n\t&quot;
         : &quot;+a&quot; (len)
-        : &quot;r&quot; (blk1 - len), &quot;r&quot; (blk2 - len), &quot;r&quot; ((long)stride)
+        : &quot;r&quot; (blk1 - len), &quot;r&quot; (blk2 - len), &quot;r&quot; ((intptr_t)stride)
     );
 }
 
@@ -84,7 +84,7 @@
         &quot;sub $2, %0                     \n\t&quot;
         &quot; jg 1b                         \n\t&quot;
         : &quot;+r&quot; (h), &quot;+r&quot; (blk1), &quot;+r&quot; (blk2)
-        : &quot;r&quot; ((long)stride)
+        : &quot;r&quot; ((intptr_t)stride)
     );
 }
 
@@ -106,7 +106,7 @@
         &quot;sub $2, %0                     \n\t&quot;
         &quot; jg 1b                         \n\t&quot;
         : &quot;+r&quot; (h), &quot;+r&quot; (blk1), &quot;+r&quot; (blk2)
-        : &quot;r&quot; ((long)stride)
+        : &quot;r&quot; ((intptr_t)stride)
     );
     asm volatile(
         &quot;movhlps %%xmm6, %%xmm0         \n\t&quot;
@@ -135,7 +135,7 @@
         &quot;sub $2, %0                     \n\t&quot;
         &quot; jg 1b                         \n\t&quot;
         : &quot;+r&quot; (h), &quot;+r&quot; (blk1), &quot;+r&quot; (blk2)
-        : &quot;r&quot; ((long)stride)
+        : &quot;r&quot; ((intptr_t)stride)
     );
 }
 
@@ -160,7 +160,7 @@
         &quot;sub $2, %0                     \n\t&quot;
         &quot; jg 1b                         \n\t&quot;
         : &quot;+r&quot; (h), &quot;+r&quot; (blk1), &quot;+r&quot; (blk2)
-        : &quot;r&quot; ((long)stride)
+        : &quot;r&quot; ((intptr_t)stride)
     );
 }
 
@@ -190,13 +190,13 @@
         &quot;sub $2, %0                     \n\t&quot;
         &quot; jg 1b                         \n\t&quot;
         : &quot;+r&quot; (h), &quot;+r&quot; (blk1), &quot;+r&quot; (blk2)
-        : &quot;r&quot; ((long)stride)
+        : &quot;r&quot; ((intptr_t)stride)
     );
 }
 
 static inline void sad8_2_mmx(uint8_t *blk1a, uint8_t *blk1b, uint8_t *blk2, int stride, int h)
 {
-    long len= -(stride*h);
+    intptr_t len= -(stride*h);
     asm volatile(
         ASMALIGN(4)
         &quot;1:                             \n\t&quot;
@@ -228,13 +228,13 @@
         &quot;add %4, %%&quot;REG_a&quot;              \n\t&quot;
         &quot; js 1b                         \n\t&quot;
         : &quot;+a&quot; (len)
-        : &quot;r&quot; (blk1a - len), &quot;r&quot; (blk1b -len), &quot;r&quot; (blk2 - len), &quot;r&quot; ((long)stride)
+        : &quot;r&quot; (blk1a - len), &quot;r&quot; (blk1b -len), &quot;r&quot; (blk2 - len), &quot;r&quot; ((intptr_t)stride)
     );
 }
 
 static inline void sad8_4_mmx(uint8_t *blk1, uint8_t *blk2, int stride, int h)
 {
-    long len= -(stride*h);
+    intptr_t len= -(stride*h);
     asm volatile(
         &quot;movq (%1, %%&quot;REG_a&quot;), %%mm0    \n\t&quot;
         &quot;movq 1(%1, %%&quot;REG_a&quot;), %%mm2   \n\t&quot;
@@ -281,7 +281,7 @@
         &quot;add %4, %%&quot;REG_a&quot;              \n\t&quot;
         &quot; js 1b                         \n\t&quot;
         : &quot;+a&quot; (len)
-        : &quot;r&quot; (blk1 - len), &quot;r&quot; (blk1 -len + stride), &quot;r&quot; (blk2 - len), &quot;r&quot; ((long)stride)
+        : &quot;r&quot; (blk1 - len), &quot;r&quot; (blk1 -len + stride), &quot;r&quot; (blk2 - len), &quot;r&quot; ((intptr_t)stride)
     );
 }
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/mpegvideo_mmx.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/mpegvideo_mmx.c	2008-09-15 17:03:51 UTC (rev 4354)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/mpegvideo_mmx.c	2008-09-15 17:38:48 UTC (rev 4355)
@@ -34,7 +34,7 @@
 static void dct_unquantize_h263_intra_mmx(MpegEncContext *s,
                                   DCTELEM *block, int n, int qscale)
 {
-    long level, qmul, qadd, nCoeffs;
+    intptr_t level, qmul, qadd, nCoeffs;
 
     qmul = qscale &lt;&lt; 1;
 
@@ -109,7 +109,7 @@
 static void dct_unquantize_h263_inter_mmx(MpegEncContext *s,
                                   DCTELEM *block, int n, int qscale)
 {
-    long qmul, qadd, nCoeffs;
+    intptr_t qmul, qadd, nCoeffs;
 
     qmul = qscale &lt;&lt; 1;
     qadd = (qscale - 1) | 1;
@@ -200,7 +200,7 @@
 static void dct_unquantize_mpeg1_intra_mmx(MpegEncContext *s,
                                      DCTELEM *block, int n, int qscale)
 {
-    long nCoeffs;
+    intptr_t nCoeffs;
     const uint16_t *quant_matrix;
     int block0;
 
@@ -269,7 +269,7 @@
 static void dct_unquantize_mpeg1_inter_mmx(MpegEncContext *s,
                                      DCTELEM *block, int n, int qscale)
 {
-    long nCoeffs;
+    intptr_t nCoeffs;
     const uint16_t *quant_matrix;
 
     assert(s-&gt;block_last_index[n]&gt;=0);
@@ -335,7 +335,7 @@
 static void dct_unquantize_mpeg2_intra_mmx(MpegEncContext *s,
                                      DCTELEM *block, int n, int qscale)
 {
-    long nCoeffs;
+    intptr_t nCoeffs;
     const uint16_t *quant_matrix;
     int block0;
 
@@ -401,7 +401,7 @@
 static void dct_unquantize_mpeg2_inter_mmx(MpegEncContext *s,
                                      DCTELEM *block, int n, int qscale)
 {
-    long nCoeffs;
+    intptr_t nCoeffs;
     const uint16_t *quant_matrix;
 
     assert(s-&gt;block_last_index[n]&gt;=0);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/mpegvideo_mmx_template.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/mpegvideo_mmx_template.c	2008-09-15 17:03:51 UTC (rev 4354)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/mpegvideo_mmx_template.c	2008-09-15 17:38:48 UTC (rev 4355)
@@ -95,7 +95,7 @@
                             DCTELEM *block, int n,
                             int qscale, int *overflow)
 {
-    long last_non_zero_p1;
+    intptr_t last_non_zero_p1;
     int level=0, q; //=0 is cuz gcc says uninitialized ...
     const uint16_t *qmat, *bias;
     DECLARE_ALIGNED_16(int16_t, temp_block[64]);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/snowdsp_mmx.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/snowdsp_mmx.c	2008-09-15 17:03:51 UTC (rev 4354)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/snowdsp_mmx.c	2008-09-15 17:38:48 UTC (rev 4355)
@@ -73,7 +73,7 @@
         IDWTELEM * const dst = b+w2;
 
         i = 0;
-        for(; (((long)&amp;dst[i]) &amp; 0x1F) &amp;&amp; i&lt;w_r; i++){
+        for(; (((intptr_t)&amp;dst[i]) &amp; 0x1F) &amp;&amp; i&lt;w_r; i++){
             dst[i] = dst[i] - (b[i] + b[i + 1]);
         }
         for(; i&lt;w_r-15; i+=16){
@@ -146,7 +146,7 @@
         IDWTELEM * const src = b+w2;
 
         i = 0;
-        for(; (((long)&amp;temp[i]) &amp; 0x1F) &amp;&amp; i&lt;w_r; i++){
+        for(; (((intptr_t)&amp;temp[i]) &amp; 0x1F) &amp;&amp; i&lt;w_r; i++){
             temp[i] = src[i] - ((-W_AM*(b[i] + b[i+1]))&gt;&gt;W_AS);
         }
         for(; i&lt;w_r-7; i+=8){
@@ -436,7 +436,7 @@
         &quot;movdqa %%&quot;s3&quot;, %%&quot;t3&quot; \n\t&quot;
 
 void ff_snow_vertical_compose97i_sse2(IDWTELEM *b0, IDWTELEM *b1, IDWTELEM *b2, IDWTELEM *b3, IDWTELEM *b4, IDWTELEM *b5, int width){
-    long i = width;
+    intptr_t i = width;
 
     while(i &amp; 0x1F)
     {
@@ -534,7 +534,7 @@
 
 
 void ff_snow_vertical_compose97i_mmx(IDWTELEM *b0, IDWTELEM *b1, IDWTELEM *b2, IDWTELEM *b3, IDWTELEM *b4, IDWTELEM *b5, int width){
-    long i = width;
+    intptr_t i = width;
     while(i &amp; 15)
     {
         i--;
@@ -605,7 +605,7 @@
 
 #define snow_inner_add_yblock_sse2_header \
     IDWTELEM * * dst_array = sb-&gt;line + src_y;\
-    long tmp;\
+    intptr_t tmp;\
     asm volatile(\
              &quot;mov  %7, %%&quot;REG_c&quot;             \n\t&quot;\
              &quot;mov  %6, %2                    \n\t&quot;\
@@ -667,7 +667,7 @@
              &quot;jnz 1b                         \n\t&quot;\
              :&quot;+m&quot;(dst8),&quot;+m&quot;(dst_array),&quot;=&amp;r&quot;(tmp)\
              :\
-             &quot;rm&quot;((long)(src_x&lt;&lt;1)),&quot;m&quot;(obmc),&quot;a&quot;(block),&quot;m&quot;((long)b_h),&quot;m&quot;((long)src_stride):\
+             &quot;rm&quot;((intptr_t)(src_x&lt;&lt;1)),&quot;m&quot;(obmc),&quot;a&quot;(block),&quot;m&quot;((intptr_t)b_h),&quot;m&quot;((intptr_t)src_stride):\
              &quot;%&quot;REG_c&quot;&quot;,&quot;%&quot;REG_S&quot;&quot;,&quot;%&quot;REG_D&quot;&quot;,&quot;%&quot;REG_d&quot;&quot;);
 
 #define snow_inner_add_yblock_sse2_end_8\
@@ -684,8 +684,8 @@
              &quot;dec %2                         \n\t&quot;\
              snow_inner_add_yblock_sse2_end_common2
 
-static void inner_add_yblock_bw_8_obmc_16_bh_even_sse2(const uint8_t *obmc, const long obmc_stride, uint8_t * * block, int b_w, long b_h,
-                      int src_x, int src_y, long src_stride, slice_buffer * sb, int add, uint8_t * dst8){
+static void inner_add_yblock_bw_8_obmc_16_bh_even_sse2(const uint8_t *obmc, const intptr_t obmc_stride, uint8_t * * block, int b_w, intptr_t b_h,
+                      int src_x, int src_y, intptr_t src_stride, slice_buffer * sb, int add, uint8_t * dst8){
 snow_inner_add_yblock_sse2_header
 snow_inner_add_yblock_sse2_start_8(&quot;xmm1&quot;, &quot;xmm5&quot;, &quot;3&quot;, &quot;0&quot;)
 snow_inner_add_yblock_sse2_accum_8(&quot;2&quot;, &quot;8&quot;)
@@ -732,8 +732,8 @@
 snow_inner_add_yblock_sse2_end_8
 }
 
-static void inner_add_yblock_bw_16_obmc_32_sse2(const uint8_t *obmc, const long obmc_stride, uint8_t * * block, int b_w, long b_h,
-                      int src_x, int src_y, long src_stride, slice_buffer * sb, int add, uint8_t * dst8){
+static void inner_add_yblock_bw_16_obmc_32_sse2(const uint8_t *obmc, const intptr_t obmc_stride, uint8_t * * block, int b_w, intptr_t b_h,
+                      int src_x, int src_y, intptr_t src_stride, slice_buffer * sb, int add, uint8_t * dst8){
 snow_inner_add_yblock_sse2_header
 snow_inner_add_yblock_sse2_start_16(&quot;xmm1&quot;, &quot;xmm5&quot;, &quot;3&quot;, &quot;0&quot;)
 snow_inner_add_yblock_sse2_accum_16(&quot;2&quot;, &quot;16&quot;)
@@ -758,7 +758,7 @@
 
 #define snow_inner_add_yblock_mmx_header \
     IDWTELEM * * dst_array = sb-&gt;line + src_y;\
-    long tmp;\
+    intptr_t tmp;\
     asm volatile(\
              &quot;mov  %7, %%&quot;REG_c&quot;             \n\t&quot;\
              &quot;mov  %6, %2                    \n\t&quot;\
@@ -815,11 +815,11 @@
              &quot;jnz 1b                         \n\t&quot;\
              :&quot;+m&quot;(dst8),&quot;+m&quot;(dst_array),&quot;=&amp;r&quot;(tmp)\
              :\
-             &quot;rm&quot;((long)(src_x&lt;&lt;1)),&quot;m&quot;(obmc),&quot;a&quot;(block),&quot;m&quot;((long)b_h),&quot;m&quot;((long)src_stride):\
+             &quot;rm&quot;((intptr_t)(src_x&lt;&lt;1)),&quot;m&quot;(obmc),&quot;a&quot;(block),&quot;m&quot;((intptr_t)b_h),&quot;m&quot;((intptr_t)src_stride):\
              &quot;%&quot;REG_c&quot;&quot;,&quot;%&quot;REG_S&quot;&quot;,&quot;%&quot;REG_D&quot;&quot;,&quot;%&quot;REG_d&quot;&quot;);
 
-static void inner_add_yblock_bw_8_obmc_16_mmx(const uint8_t *obmc, const long obmc_stride, uint8_t * * block, int b_w, long b_h,
-                      int src_x, int src_y, long src_stride, slice_buffer * sb, int add, uint8_t * dst8){
+static void inner_add_yblock_bw_8_obmc_16_mmx(const uint8_t *obmc, const intptr_t obmc_stride, uint8_t * * block, int b_w, intptr_t b_h,
+                      int src_x, int src_y, intptr_t src_stride, slice_buffer * sb, int add, uint8_t * dst8){
 snow_inner_add_yblock_mmx_header
 snow_inner_add_yblock_mmx_start(&quot;mm1&quot;, &quot;mm5&quot;, &quot;3&quot;, &quot;0&quot;, &quot;0&quot;)
 snow_inner_add_yblock_mmx_accum(&quot;2&quot;, &quot;8&quot;, &quot;0&quot;)
@@ -829,8 +829,8 @@
 snow_inner_add_yblock_mmx_end(&quot;16&quot;)
 }
 
-static void inner_add_yblock_bw_16_obmc_32_mmx(const uint8_t *obmc, const long obmc_stride, uint8_t * * block, int b_w, long b_h,
-                      int src_x, int src_y, long src_stride, slice_buffer * sb, int add, uint8_t * dst8){
+static void inner_add_yblock_bw_16_obmc_32_mmx(const uint8_t *obmc, const intptr_t obmc_stride, uint8_t * * block, int b_w, intptr_t b_h,
+                      int src_x, int src_y, intptr_t src_stride, slice_buffer * sb, int add, uint8_t * dst8){
 snow_inner_add_yblock_mmx_header
 snow_inner_add_yblock_mmx_start(&quot;mm1&quot;, &quot;mm5&quot;, &quot;3&quot;, &quot;0&quot;, &quot;0&quot;)
 snow_inner_add_yblock_mmx_accum(&quot;2&quot;, &quot;16&quot;, &quot;0&quot;)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/vc1dsp_mmx.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/vc1dsp_mmx.c	2008-09-15 17:03:51 UTC (rev 4354)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/vc1dsp_mmx.c	2008-09-15 17:38:48 UTC (rev 4355)
@@ -71,7 +71,7 @@
 
 /** Sacrifying mm6 allows to pipeline loads from src */
 static void vc1_put_ver_16b_shift2_mmx(int16_t *dst,
-                                       const uint8_t *src, long int stride,
+                                       const uint8_t *src, intptr_t stride,
                                        int rnd, int64_t shift)
 {
     asm volatile(
@@ -107,7 +107,7 @@
  * Data is already unpacked, so some operations can directly be made from
  * memory.
  */
-static void vc1_put_hor_16b_shift2_mmx(uint8_t *dst, long int stride,
+static void vc1_put_hor_16b_shift2_mmx(uint8_t *dst, intptr_t stride,
                                        const int16_t *src, int rnd)
 {
     int h = 8;
@@ -152,7 +152,7 @@
  * Sacrify mm6 for *9 factor.
  */
 static void vc1_put_shift2_mmx(uint8_t *dst, const uint8_t *src,
-                               long int stride, int rnd, long int offset)
+                               intptr_t stride, int rnd, intptr_t offset)
 {
     rnd = 8-rnd;
     asm volatile(
@@ -259,7 +259,7 @@
 #define MSPEL_FILTER13_VER_16B(NAME, A1, A2, A3, A4)                    \
 static void                                                             \
 vc1_put_ver_16b_ ## NAME ## _mmx(int16_t *dst, const uint8_t *src,      \
-                                 long int src_stride,                   \
+                                 intptr_t src_stride,                   \
                                  int rnd, int64_t shift)                \
 {                                                                       \
     int h = 8;                                                          \
@@ -314,7 +314,7 @@
  */
 #define MSPEL_FILTER13_HOR_16B(NAME, A1, A2, A3, A4)                    \
 static void                                                             \
-vc1_put_hor_16b_ ## NAME ## _mmx(uint8_t *dst, long int stride,         \
+vc1_put_hor_16b_ ## NAME ## _mmx(uint8_t *dst, intptr_t stride,         \
                                  const int16_t *src, int rnd)           \
 {                                                                       \
     int h = 8;                                                          \
@@ -353,7 +353,7 @@
 #define MSPEL_FILTER13_8B(NAME, A1, A2, A3, A4)                         \
 static void                                                             \
 vc1_put_## NAME ## _mmx(uint8_t *dst, const uint8_t *src,               \
-                        long int stride, int rnd, long int offset)      \
+                        intptr_t stride, int rnd, intptr_t offset)      \
 {                                                                       \
     int h = 8;                                                          \
     src -= offset;                                                      \
@@ -387,9 +387,9 @@
 MSPEL_FILTER13_VER_16B(shift3, &quot;0(%1     )&quot;, &quot;0(%1,%3  )&quot;, &quot;0(%1,%3,2)&quot;, &quot;0(%1,%4  )&quot;)
 MSPEL_FILTER13_HOR_16B(shift3, &quot;2*0(%1)&quot;, &quot;2*1(%1)&quot;, &quot;2*2(%1)&quot;, &quot;2*3(%1)&quot;)
 
-typedef void (*vc1_mspel_mc_filter_ver_16bits)(int16_t *dst, const uint8_t *src, long int src_stride, int rnd, int64_t shift);
-typedef void (*vc1_mspel_mc_filter_hor_16bits)(uint8_t *dst, long int dst_stride, const int16_t *src, int rnd);
-typedef void (*vc1_mspel_mc_filter_8bits)(uint8_t *dst, const uint8_t *src, long int stride, int rnd, long int offset);
+typedef void (*vc1_mspel_mc_filter_ver_16bits)(int16_t *dst, const uint8_t *src, intptr_t src_stride, int rnd, int64_t shift);
+typedef void (*vc1_mspel_mc_filter_hor_16bits)(uint8_t *dst, intptr_t dst_stride, const int16_t *src, int rnd);
+typedef void (*vc1_mspel_mc_filter_8bits)(uint8_t *dst, const uint8_t *src, intptr_t stride, int rnd, intptr_t offset);
 
 /**
  * Interpolates fractional pel values by applying proper vertical then

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/avc.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/avc.c	2008-09-15 17:03:51 UTC (rev 4354)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/avc.c	2008-09-15 17:38:48 UTC (rev 4355)
@@ -23,7 +23,7 @@
 
 const uint8_t *ff_avc_find_startcode(const uint8_t *p, const uint8_t *end)
 {
-    const uint8_t *a = p + 4 - ((long)p &amp; 3);
+    const uint8_t *a = p + 4 - ((intptr_t)p &amp; 3);
 
     for( end -= 3; p &lt; a &amp;&amp; p &lt; end; p++ ) {
         if( p[0] == 0 &amp;&amp; p[1] == 0 &amp;&amp; p[2] == 1 )

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libpostproc/postprocess_template.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libpostproc/postprocess_template.c	2008-09-15 17:03:51 UTC (rev 4354)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libpostproc/postprocess_template.c	2008-09-15 17:38:48 UTC (rev 4355)
@@ -182,7 +182,7 @@
                 &quot;movd %%mm4, %1                         \n\t&quot;
 
                 : &quot;=r&quot; (numEq), &quot;=r&quot; (dcOk)
-                : &quot;r&quot; (src), &quot;r&quot; ((long)stride), &quot;m&quot; (c-&gt;pQPb)
+                : &quot;r&quot; (src), &quot;r&quot; ((intptr_t)stride), &quot;m&quot; (c-&gt;pQPb)
                 : &quot;%&quot;REG_a
                 );
 
@@ -327,7 +327,7 @@
                 &quot;sub %1, %0                             \n\t&quot;
 
                 :
-                : &quot;r&quot; (src), &quot;r&quot; ((long)stride), &quot;m&quot; (c-&gt;pQPb)
+                : &quot;r&quot; (src), &quot;r&quot; ((intptr_t)stride), &quot;m&quot; (c-&gt;pQPb)
                 : &quot;%&quot;REG_a, &quot;%&quot;REG_c
         );
 #else //defined (HAVE_MMX2) || defined (HAVE_3DNOW)
@@ -448,7 +448,7 @@
                 &quot;movq %%mm2, (%%&quot;REG_c&quot;, %1)            \n\t&quot;
 
                 :
-                : &quot;r&quot; (src), &quot;r&quot; ((long)stride)
+                : &quot;r&quot; (src), &quot;r&quot; ((intptr_t)stride)
                 : &quot;%&quot;REG_a, &quot;%&quot;REG_c
         );
 #else //defined (HAVE_MMX2) || defined (HAVE_3DNOW)
@@ -573,7 +573,7 @@
                 &quot;movq %%mm0, (%%&quot;REG_c&quot;, %1, 2)         \n\t&quot; // line 7
 
                 :
-                : &quot;r&quot; (src), &quot;r&quot; ((long)stride), &quot;m&quot; (co-&gt;pQPb)
+                : &quot;r&quot; (src), &quot;r&quot; ((intptr_t)stride), &quot;m&quot; (co-&gt;pQPb)
                 : &quot;%&quot;REG_a, &quot;%&quot;REG_c
         );
 #else //defined (HAVE_MMX2) || defined (HAVE_3DNOW)
@@ -841,7 +841,7 @@
                 &quot;movq %%mm2, (%0, %1, 4)                \n\t&quot;
 
                 :
-                : &quot;r&quot; (src), &quot;r&quot; ((long)stride), &quot;m&quot; (c-&gt;pQPb)
+                : &quot;r&quot; (src), &quot;r&quot; ((intptr_t)stride), &quot;m&quot; (c-&gt;pQPb)
                 : &quot;%&quot;REG_a, &quot;%&quot;REG_c
         );
 
@@ -1138,7 +1138,7 @@
                 &quot;movq %%mm0, (%0, %1)                   \n\t&quot;
 
                 : &quot;+r&quot; (src)
-                : &quot;r&quot; ((long)stride), &quot;m&quot; (c-&gt;pQPb)
+                : &quot;r&quot; ((intptr_t)stride), &quot;m&quot; (c-&gt;pQPb)
                 : &quot;%&quot;REG_a, &quot;%&quot;REG_c
         );
 #else //defined (HAVE_MMX2) || defined (HAVE_3DNOW)
@@ -1419,7 +1419,7 @@
 DERING_CORE((%0, %1, 8)    ,(%%REGd, %1, 4),%%mm2,%%mm4,%%mm0,%%mm3,%%mm5,%%mm1,%%mm6,%%mm7)
 
                 &quot;1:                        \n\t&quot;
-                : : &quot;r&quot; (src), &quot;r&quot; ((long)stride), &quot;m&quot; (c-&gt;pQPb), &quot;m&quot;(c-&gt;pQPb2)
+                : : &quot;r&quot; (src), &quot;r&quot; ((intptr_t)stride), &quot;m&quot; (c-&gt;pQPb), &quot;m&quot;(c-&gt;pQPb2)
                 : &quot;%&quot;REG_a, &quot;%&quot;REG_d, &quot;%&quot;REG_c
         );
 #else //defined (HAVE_MMX2) || defined (HAVE_3DNOW)
@@ -1586,7 +1586,7 @@
                 PAVGB(%%mm0, %%mm1)
                 &quot;movq %%mm1, (%%&quot;REG_c&quot;, %1, 2)         \n\t&quot;
 
-                : : &quot;r&quot; (src), &quot;r&quot; ((long)stride)
+                : : &quot;r&quot; (src), &quot;r&quot; ((intptr_t)stride)
                 : &quot;%&quot;REG_a, &quot;%&quot;REG_c
         );
 #else
@@ -1656,7 +1656,7 @@
 DEINT_CUBIC((%0, %1, 4) , (%%REGd, %1), (%%REGd, %1, 2), (%0, %1, 8) , (%%REGc))
 DEINT_CUBIC((%%REGd, %1), (%0, %1, 8) , (%%REGd, %1, 4), (%%REGc)    , (%%REGc, %1, 2))
 
-                : : &quot;r&quot; (src), &quot;r&quot; ((long)stride)
+                : : &quot;r&quot; (src), &quot;r&quot; ((intptr_t)stride)
                 : &quot;%&quot;REG_a, &quot;%&quot;REG_d, &quot;%&quot;REG_c
         );
 #else //defined (HAVE_MMX2) || defined (HAVE_3DNOW)
@@ -1728,7 +1728,7 @@
 DEINT_FF((%%REGd, %1), (%%REGd, %1, 2), (%0, %1, 8) , (%%REGd, %1, 4))
 
                 &quot;movq %%mm0, (%2)                       \n\t&quot;
-                : : &quot;r&quot; (src), &quot;r&quot; ((long)stride), &quot;r&quot;(tmp)
+                : : &quot;r&quot; (src), &quot;r&quot; ((intptr_t)stride), &quot;r&quot;(tmp)
                 : &quot;%&quot;REG_a, &quot;%&quot;REG_d
         );
 #else //defined (HAVE_MMX2) || defined (HAVE_3DNOW)
@@ -1819,7 +1819,7 @@
 
                 &quot;movq %%mm0, (%2)                       \n\t&quot;
                 &quot;movq %%mm1, (%3)                       \n\t&quot;
-                : : &quot;r&quot; (src), &quot;r&quot; ((long)stride), &quot;r&quot;(tmp), &quot;r&quot;(tmp2)
+                : : &quot;r&quot; (src), &quot;r&quot; ((intptr_t)stride), &quot;r&quot;(tmp), &quot;r&quot;(tmp2)
                 : &quot;%&quot;REG_a, &quot;%&quot;REG_d
         );
 #else //defined (HAVE_MMX2) || defined (HAVE_3DNOW)
@@ -1908,7 +1908,7 @@
                 &quot;movq %%mm2, (%%&quot;REG_d&quot;, %1, 2)         \n\t&quot;
                 &quot;movq %%mm1, (%2)                       \n\t&quot;
 
-                : : &quot;r&quot; (src), &quot;r&quot; ((long)stride), &quot;r&quot; (tmp)
+                : : &quot;r&quot; (src), &quot;r&quot; ((intptr_t)stride), &quot;r&quot; (tmp)
                 : &quot;%&quot;REG_a, &quot;%&quot;REG_d
         );
 #else //defined (HAVE_MMX2) || defined (HAVE_3DNOW)
@@ -2012,7 +2012,7 @@
                 &quot;movq %%mm2, (%%&quot;REG_d&quot;, %1, 2)         \n\t&quot;
 
 
-                : : &quot;r&quot; (src), &quot;r&quot; ((long)stride)
+                : : &quot;r&quot; (src), &quot;r&quot; ((intptr_t)stride)
                 : &quot;%&quot;REG_a, &quot;%&quot;REG_d
         );
 
@@ -2054,7 +2054,7 @@
 MEDIAN((%0, %1, 4) , (%%REGd)       , (%%REGd, %1))
 MEDIAN((%%REGd, %1), (%%REGd, %1, 2), (%0, %1, 8))
 
-                : : &quot;r&quot; (src), &quot;r&quot; ((long)stride)
+                : : &quot;r&quot; (src), &quot;r&quot; ((intptr_t)stride)
                 : &quot;%&quot;REG_a, &quot;%&quot;REG_d
         );
 #endif //HAVE_MMX2
@@ -2163,7 +2163,7 @@
                 &quot;movd %%mm1, 116(%3)                    \n\t&quot;
 
 
-        :: &quot;r&quot; (src), &quot;r&quot; ((long)srcStride), &quot;r&quot; (dst1), &quot;r&quot; (dst2)
+        :: &quot;r&quot; (src), &quot;r&quot; ((intptr_t)srcStride), &quot;r&quot; (dst1), &quot;r&quot; (dst2)
         : &quot;%&quot;REG_a
         );
 }
@@ -2243,7 +2243,7 @@
                 &quot;psrlq $32, %%mm1                       \n\t&quot;
                 &quot;movd %%mm1, 4(%%&quot;REG_d&quot;, %1, 2)        \n\t&quot;
 
-        :: &quot;r&quot; (dst), &quot;r&quot; ((long)dstStride), &quot;r&quot; (src)
+        :: &quot;r&quot; (dst), &quot;r&quot; ((intptr_t)dstStride), &quot;r&quot; (src)
         : &quot;%&quot;REG_a, &quot;%&quot;REG_d
         );
 }
@@ -2546,7 +2546,7 @@
 
                 &quot;4:                                     \n\t&quot;
 
-                :: &quot;r&quot; (src), &quot;r&quot; (tempBlured), &quot;r&quot;((long)stride), &quot;m&quot; (tempBluredPast)
+                :: &quot;r&quot; (src), &quot;r&quot; (tempBlured), &quot;r&quot;((intptr_t)stride), &quot;m&quot; (tempBluredPast)
                 : &quot;%&quot;REG_a, &quot;%&quot;REG_d, &quot;%&quot;REG_c, &quot;memory&quot;
                 );
 #else //defined (HAVE_MMX2) || defined (HAVE_3DNOW)
@@ -2765,14 +2765,14 @@
                 &quot;movq %%mm6, %0                         \n\t&quot;
 
                 : &quot;=m&quot; (eq_mask), &quot;=m&quot; (dc_mask)
-                : &quot;r&quot; (src), &quot;r&quot; ((long)step), &quot;m&quot; (c-&gt;pQPb), &quot;m&quot;(c-&gt;ppMode.flatnessThreshold)
+                : &quot;r&quot; (src), &quot;r&quot; ((intptr_t)step), &quot;m&quot; (c-&gt;pQPb), &quot;m&quot;(c-&gt;ppMode.flatnessThreshold)
                 : &quot;%&quot;REG_a
                 );
 
         both_masks = dc_mask &amp; eq_mask;
 
         if(both_masks){
-                long offset= -8*step;
+                intptr_t offset= -8*step;
                 int64_t *temp_sums= sums;
 
                 asm volatile(
@@ -2909,7 +2909,7 @@
                 &quot;mov %4, %0                             \n\t&quot; //FIXME
 
                 : &quot;+&amp;r&quot;(src)
-                : &quot;r&quot; ((long)step), &quot;m&quot; (c-&gt;pQPb), &quot;r&quot;(sums), &quot;g&quot;(src)
+                : &quot;r&quot; ((intptr_t)step), &quot;m&quot; (c-&gt;pQPb), &quot;r&quot;(sums), &quot;g&quot;(src)
                 );
 
                 src+= step; // src points to begin of the 8x8 Block
@@ -2946,7 +2946,7 @@
                 &quot; js 1b                                 \n\t&quot;
 
                 : &quot;+r&quot;(offset), &quot;+r&quot;(temp_sums)
-                : &quot;r&quot; ((long)step), &quot;r&quot;(src - offset), &quot;m&quot;(both_masks)
+                : &quot;r&quot; ((intptr_t)step), &quot;r&quot;(src - offset), &quot;m&quot;(both_masks)
                 );
         }else
                 src+= step; // src points to begin of the 8x8 Block
@@ -3181,7 +3181,7 @@
                 &quot;movq %%mm0, (%0, %1)                   \n\t&quot;
 
                 : &quot;+r&quot; (temp_src)
-                : &quot;r&quot; ((long)step), &quot;m&quot; (c-&gt;pQPb), &quot;m&quot;(eq_mask)
+                : &quot;r&quot; ((intptr_t)step), &quot;m&quot; (c-&gt;pQPb), &quot;m&quot;(eq_mask)
                 : &quot;%&quot;REG_a, &quot;%&quot;REG_c
                 );
         }
@@ -3287,8 +3287,8 @@
                         : &quot;0&quot; (packedOffsetAndScale),
                         &quot;r&quot;(src),
                         &quot;r&quot;(dst),
-                        &quot;r&quot; ((long)srcStride),
-                        &quot;r&quot; ((long)dstStride)
+                        &quot;r&quot; ((intptr_t)srcStride),
+                        &quot;r&quot; ((intptr_t)dstStride)
                         : &quot;%&quot;REG_d
                                         );
 #else //HAVE_MMX
@@ -3322,8 +3322,8 @@
 
                 : : &quot;r&quot; (src),
                 &quot;r&quot; (dst),
-                &quot;r&quot; ((long)srcStride),
-                &quot;r&quot; ((long)dstStride)
+                &quot;r&quot; ((intptr_t)srcStride),
+                &quot;r&quot; ((intptr_t)dstStride)
                 : &quot;%&quot;REG_a, &quot;%&quot;REG_d
         );
 #else //HAVE_MMX
@@ -3347,7 +3347,7 @@
                 &quot;movq %%mm0, (%0, %1)           \n\t&quot;
                 &quot;movq %%mm0, (%0, %1, 2)        \n\t&quot;
                 : &quot;+r&quot; (src)
-                : &quot;r&quot; ((long)-stride)
+                : &quot;r&quot; ((intptr_t)-stride)
         );
 #else
         int i;
@@ -3510,8 +3510,8 @@
                                 &quot;add %3, %%&quot;REG_d&quot;              \n\t&quot;
                                 &quot;prefetchnta 32(%%&quot;REG_a&quot;, %0)  \n\t&quot;
                                 &quot;prefetcht0 32(%%&quot;REG_d&quot;, %2)   \n\t&quot;
-                        :: &quot;r&quot; (srcBlock), &quot;r&quot; ((long)srcStride), &quot;r&quot; (dstBlock), &quot;r&quot; ((long)dstStride),
-                        &quot;g&quot; ((long)x), &quot;g&quot; ((long)copyAhead)
+                        :: &quot;r&quot; (srcBlock), &quot;r&quot; ((intptr_t)srcStride), &quot;r&quot; (dstBlock), &quot;r&quot; ((intptr_t)dstStride),
+                        &quot;g&quot; ((intptr_t)x), &quot;g&quot; ((intptr_t)copyAhead)
                         : &quot;%&quot;REG_a, &quot;%&quot;REG_d
                         );
 
@@ -3654,8 +3654,8 @@
                                 &quot;add %3, %%&quot;REG_d&quot;              \n\t&quot;
                                 &quot;prefetchnta 32(%%&quot;REG_a&quot;, %0)  \n\t&quot;
                                 &quot;prefetcht0 32(%%&quot;REG_d&quot;, %2)   \n\t&quot;
-                        :: &quot;r&quot; (srcBlock), &quot;r&quot; ((long)srcStride), &quot;r&quot; (dstBlock), &quot;r&quot; ((long)dstStride),
-                         &quot;g&quot; ((long)x), &quot;g&quot; ((long)copyAhead)
+                        :: &quot;r&quot; (srcBlock), &quot;r&quot; ((intptr_t)srcStride), &quot;r&quot; (dstBlock), &quot;r&quot; ((intptr_t)dstStride),
+                         &quot;g&quot; ((intptr_t)x), &quot;g&quot; ((intptr_t)copyAhead)
                         : &quot;%&quot;REG_a, &quot;%&quot;REG_d
                         );
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/rgb2rgb.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/rgb2rgb.c	2008-09-15 17:03:51 UTC (rev 4354)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/rgb2rgb.c	2008-09-15 17:38:48 UTC (rev 4355)
@@ -40,57 +40,57 @@
 
 #define FAST_BGR2YV12 // use 7 bit coeffs instead of 15bit
 
-void (*rgb24to32)(const uint8_t *src, uint8_t *dst, long src_size);
-void (*rgb24to16)(const uint8_t *src, uint8_t *dst, long src_size);
-void (*rgb24to15)(const uint8_t *src, uint8_t *dst, long src_size);
-void (*rgb32to24)(const uint8_t *src, uint8_t *dst, long src_size);
-void (*rgb32to16)(const uint8_t *src, uint8_t *dst, long src_size);
-void (*rgb32to15)(const uint8_t *src, uint8_t *dst, long src_size);
-void (*rgb15to16)(const uint8_t *src, uint8_t *dst, long src_size);
-void (*rgb15to24)(const uint8_t *src, uint8_t *dst, long src_size);
-void (*rgb15to32)(const uint8_t *src, uint8_t *dst, long src_size);
-void (*rgb16to15)(const uint8_t *src, uint8_t *dst, long src_size);
-void (*rgb16to24)(const uint8_t *src, uint8_t *dst, long src_size);
-void (*rgb16to32)(const uint8_t *src, uint8_t *dst, long src_size);
-//void (*rgb24tobgr32)(const uint8_t *src, uint8_t *dst, long src_size);
-void (*rgb24tobgr24)(const uint8_t *src, uint8_t *dst, long src_size);
-void (*rgb24tobgr16)(const uint8_t *src, uint8_t *dst, long src_size);
-void (*rgb24tobgr15)(const uint8_t *src, uint8_t *dst, long src_size);
-void (*rgb32tobgr32)(const uint8_t *src, uint8_t *dst, long src_size);
-//void (*rgb32tobgr24)(const uint8_t *src, uint8_t *dst, long src_size);
-void (*rgb32tobgr16)(const uint8_t *src, uint8_t *dst, long src_size);
-void (*rgb32tobgr15)(const uint8_t *src, uint8_t *dst, long src_size);
+void (*rgb24to32)(const uint8_t *src, uint8_t *dst, intptr_t src_size);
+void (*rgb24to16)(const uint8_t *src, uint8_t *dst, intptr_t src_size);
+void (*rgb24to15)(const uint8_t *src, uint8_t *dst, intptr_t src_size);
+void (*rgb32to24)(const uint8_t *src, uint8_t *dst, intptr_t src_size);
+void (*rgb32to16)(const uint8_t *src, uint8_t *dst, intptr_t src_size);
+void (*rgb32to15)(const uint8_t *src, uint8_t *dst, intptr_t src_size);
+void (*rgb15to16)(const uint8_t *src, uint8_t *dst, intptr_t src_size);
+void (*rgb15to24)(const uint8_t *src, uint8_t *dst, intptr_t src_size);
+void (*rgb15to32)(const uint8_t *src, uint8_t *dst, intptr_t src_size);
+void (*rgb16to15)(const uint8_t *src, uint8_t *dst, intptr_t src_size);
+void (*rgb16to24)(const uint8_t *src, uint8_t *dst, intptr_t src_size);
+void (*rgb16to32)(const uint8_t *src, uint8_t *dst, intptr_t src_size);
+//void (*rgb24tobgr32)(const uint8_t *src, uint8_t *dst, intptr_t src_size);
+void (*rgb24tobgr24)(const uint8_t *src, uint8_t *dst, intptr_t src_size);
+void (*rgb24tobgr16)(const uint8_t *src, uint8_t *dst, intptr_t src_size);
+void (*rgb24tobgr15)(const uint8_t *src, uint8_t *dst, intptr_t src_size);
+void (*rgb32tobgr32)(const uint8_t *src, uint8_t *dst, intptr_t src_size);
+//void (*rgb32tobgr24)(const uint8_t *src, uint8_t *dst, intptr_t src_size);
+void (*rgb32tobgr16)(const uint8_t *src, uint8_t *dst, intptr_t src_size);
+void (*rgb32tobgr15)(const uint8_t *src, uint8_t *dst, intptr_t src_size);
 
 void (*yv12toyuy2)(const uint8_t *ysrc, const uint8_t *usrc, const uint8_t *vsrc, uint8_t *dst,
-                   long width, long height,
-                   long lumStride, long chromStride, long dstStride);
+                   intptr_t width, intptr_t height,
+                   intptr_t lumStride, intptr_t chromStride, intptr_t dstStride);
 void (*yv12touyvy)(const uint8_t *ysrc, const uint8_t *usrc, const uint8_t *vsrc, uint8_t *dst,
-                   long width, long height,
-                   long lumStride, long chromStride, long dstStride);
+                   intptr_t width, intptr_t height,
+                   intptr_t lumStride, intptr_t chromStride, intptr_t dstStride);
 void (*yuv422ptoyuy2)(const uint8_t *ysrc, const uint8_t *usrc, const uint8_t *vsrc, uint8_t *dst,
-                      long width, long height,
-                      long lumStride, long chromStride, long dstStride);
+                      intptr_t width, intptr_t height,
+                      intptr_t lumStride, intptr_t chromStride, intptr_t dstStride);
 void (*yuy2toyv12)(const uint8_t *src, uint8_t *ydst, uint8_t *udst, uint8_t *vdst,
-                   long width, long height,
-                   long lumStride, long chromStride, long srcStride);
+                   intptr_t width, intptr_t height,
+                   intptr_t lumStride, intptr_t chromStride, intptr_t srcStride);
 void (*rgb24toyv12)(const uint8_t *src, uint8_t *ydst, uint8_t *udst, uint8_t *vdst,
-                    long width, long height,
-                    long lumStride, long chromStride, long srcStride);
-void (*planar2x)(const uint8_t *src, uint8_t *dst, long width, long height,
-                 long srcStride, long dstStride);
+                    intptr_t width, intptr_t height,
+                    intptr_t lumStride, intptr_t chromStride, intptr_t srcStride);
+void (*planar2x)(const uint8_t *src, uint8_t *dst, intptr_t width, intptr_t height,
+                 intptr_t srcStride, intptr_t dstStride);
 void (*interleaveBytes)(uint8_t *src1, uint8_t *src2, uint8_t *dst,
-                        long width, long height, long src1Stride,
-                        long src2Stride, long dstStride);
+                        intptr_t width, intptr_t height, intptr_t src1Stride,
+                        intptr_t src2Stride, intptr_t dstStride);
 void (*vu9_to_vu12)(const uint8_t *src1, const uint8_t *src2,
                     uint8_t *dst1, uint8_t *dst2,
-                    long width, long height,
-                    long srcStride1, long srcStride2,
-                    long dstStride1, long dstStride2);
+                    intptr_t width, intptr_t height,
+                    intptr_t srcStride1, intptr_t srcStride2,
+                    intptr_t dstStride1, intptr_t dstStride2);
 void (*yvu9_to_yuy2)(const uint8_t *src1, const uint8_t *src2, const uint8_t *src3,
                      uint8_t *dst,
-                     long width, long height,
-                     long srcStride1, long srcStride2,
-                     long srcStride3, long dstStride);
+                     intptr_t width, intptr_t height,
+                     intptr_t srcStride1, intptr_t srcStride2,
+                     intptr_t srcStride3, intptr_t dstStride);
 
 #if defined(ARCH_X86) &amp;&amp; defined(CONFIG_GPL)
 DECLARE_ASM_CONST(8, uint64_t, mmx_null)     = 0x0000000000000000ULL;
@@ -217,9 +217,9 @@
 /**
  * Palette is assumed to contain BGR32.
  */
-void palette8torgb32(const uint8_t *src, uint8_t *dst, long num_pixels, const uint8_t *palette)
+void palette8torgb32(const uint8_t *src, uint8_t *dst, intptr_t num_pixels, const uint8_t *palette)
 {
-    long i;
+    intptr_t i;
 
 /*
     for (i=0; i&lt;num_pixels; i++)
@@ -243,9 +243,9 @@
     }
 }
 
-void palette8tobgr32(const uint8_t *src, uint8_t *dst, long num_pixels, const uint8_t *palette)
+void palette8tobgr32(const uint8_t *src, uint8_t *dst, intptr_t num_pixels, const uint8_t *palette)
 {
-    long i;
+    intptr_t i;
     for (i=0; i&lt;num_pixels; i++)
     {
         #ifdef WORDS_BIGENDIAN
@@ -267,9 +267,9 @@
 /**
  * Palette is assumed to contain BGR32.
  */
-void palette8torgb24(const uint8_t *src, uint8_t *dst, long num_pixels, const uint8_t *palette)
+void palette8torgb24(const uint8_t *src, uint8_t *dst, intptr_t num_pixels, const uint8_t *palette)
 {
-    long i;
+    intptr_t i;
 /*
     writes 1 byte o much and might cause alignment issues on some architectures?
     for (i=0; i&lt;num_pixels; i++)
@@ -285,9 +285,9 @@
     }
 }
 
-void palette8tobgr24(const uint8_t *src, uint8_t *dst, long num_pixels, const uint8_t *palette)
+void palette8tobgr24(const uint8_t *src, uint8_t *dst, intptr_t num_pixels, const uint8_t *palette)
 {
-    long i;
+    intptr_t i;
 /*
     writes 1 byte o much and might cause alignment issues on some architectures?
     for (i=0; i&lt;num_pixels; i++)
@@ -306,15 +306,15 @@
 /**
  * Palette is assumed to contain bgr16, see rgb32to16 to convert the palette
  */
-void palette8torgb16(const uint8_t *src, uint8_t *dst, long num_pixels, const uint8_t *palette)
+void palette8torgb16(const uint8_t *src, uint8_t *dst, intptr_t num_pixels, const uint8_t *palette)
 {
-    long i;
+    intptr_t i;
     for (i=0; i&lt;num_pixels; i++)
         ((uint16_t *)dst)[i] = ((uint16_t *)palette)[src[i]];
 }
-void palette8tobgr16(const uint8_t *src, uint8_t *dst, long num_pixels, const uint8_t *palette)
+void palette8tobgr16(const uint8_t *src, uint8_t *dst, intptr_t num_pixels, const uint8_t *palette)
 {
-    long i;
+    intptr_t i;
     for (i=0; i&lt;num_pixels; i++)
         ((uint16_t *)dst)[i] = bswap_16(((uint16_t *)palette)[src[i]]);
 }
@@ -322,23 +322,23 @@
 /**
  * Palette is assumed to contain BGR15, see rgb32to15 to convert the palette.
  */
-void palette8torgb15(const uint8_t *src, uint8_t *dst, long num_pixels, const uint8_t *palette)
+void palette8torgb15(const uint8_t *src, uint8_t *dst, intptr_t num_pixels, const uint8_t *palette)
 {
-    long i;
+    intptr_t i;
     for (i=0; i&lt;num_pixels; i++)
         ((uint16_t *)dst)[i] = ((uint16_t *)palette)[src[i]];
 }
-void palette8tobgr15(const uint8_t *src, uint8_t *dst, long num_pixels, const uint8_t *palette)
+void palette8tobgr15(const uint8_t *src, uint8_t *dst, intptr_t num_pixels, const uint8_t *palette)
 {
-    long i;
+    intptr_t i;
     for (i=0; i&lt;num_pixels; i++)
         ((uint16_t *)dst)[i] = bswap_16(((uint16_t *)palette)[src[i]]);
 }
 
-void rgb32tobgr24(const uint8_t *src, uint8_t *dst, long src_size)
+void rgb32tobgr24(const uint8_t *src, uint8_t *dst, intptr_t src_size)
 {
-    long i;
-    long num_pixels = src_size &gt;&gt; 2;
+    intptr_t i;
+    intptr_t num_pixels = src_size &gt;&gt; 2;
     for (i=0; i&lt;num_pixels; i++)
     {
         #ifdef WORDS_BIGENDIAN
@@ -354,9 +354,9 @@
     }
 }
 
-void rgb24tobgr32(const uint8_t *src, uint8_t *dst, long src_size)
+void rgb24tobgr32(const uint8_t *src, uint8_t *dst, intptr_t src_size)
 {
-    long i;
+    intptr_t i;
     for (i=0; 3*i&lt;src_size; i++)
     {
         #ifdef WORDS_BIGENDIAN
@@ -374,7 +374,7 @@
     }
 }
 
-void rgb16tobgr32(const uint8_t *src, uint8_t *dst, long src_size)
+void rgb16tobgr32(const uint8_t *src, uint8_t *dst, intptr_t src_size)
 {
     const uint16_t *end;
     uint8_t *d = (uint8_t *)dst;
@@ -398,7 +398,7 @@
     }
 }
 
-void rgb16tobgr24(const uint8_t *src, uint8_t *dst, long src_size)
+void rgb16tobgr24(const uint8_t *src, uint8_t *dst, intptr_t src_size)
 {
     const uint16_t *end;
     uint8_t *d = (uint8_t *)dst;
@@ -414,10 +414,10 @@
     }
 }
 
-void rgb16tobgr16(const uint8_t *src, uint8_t *dst, long src_size)
+void rgb16tobgr16(const uint8_t *src, uint8_t *dst, intptr_t src_size)
 {
-    long i;
-    long num_pixels = src_size &gt;&gt; 1;
+    intptr_t i;
+    intptr_t num_pixels = src_size &gt;&gt; 1;
 
     for (i=0; i&lt;num_pixels; i++)
     {
@@ -431,10 +431,10 @@
     }
 }
 
-void rgb16tobgr15(const uint8_t *src, uint8_t *dst, long src_size)
+void rgb16tobgr15(const uint8_t *src, uint8_t *dst, intptr_t src_size)
 {
-    long i;
-    long num_pixels = src_size &gt;&gt; 1;
+    intptr_t i;
+    intptr_t num_pixels = src_size &gt;&gt; 1;
 
     for (i=0; i&lt;num_pixels; i++)
     {
@@ -448,7 +448,7 @@
     }
 }
 
-void rgb15tobgr32(const uint8_t *src, uint8_t *dst, long src_size)
+void rgb15tobgr32(const uint8_t *src, uint8_t *dst, intptr_t src_size)
 {
     const uint16_t *end;
     uint8_t *d = (uint8_t *)dst;
@@ -472,7 +472,7 @@
     }
 }
 
-void rgb15tobgr24(const uint8_t *src, uint8_t *dst, long src_size)
+void rgb15tobgr24(const uint8_t *src, uint8_t *dst, intptr_t src_size)
 {
     const uint16_t *end;
     uint8_t *d = (uint8_t *)dst;
@@ -488,10 +488,10 @@
     }
 }
 
-void rgb15tobgr16(const uint8_t *src, uint8_t *dst, long src_size)
+void rgb15tobgr16(const uint8_t *src, uint8_t *dst, intptr_t src_size)
 {
-    long i;
-    long num_pixels = src_size &gt;&gt; 1;
+    intptr_t i;
+    intptr_t num_pixels = src_size &gt;&gt; 1;
 
     for (i=0; i&lt;num_pixels; i++)
     {
@@ -505,10 +505,10 @@
     }
 }
 
-void rgb15tobgr15(const uint8_t *src, uint8_t *dst, long src_size)
+void rgb15tobgr15(const uint8_t *src, uint8_t *dst, intptr_t src_size)
 {
-    long i;
-    long num_pixels = src_size &gt;&gt; 1;
+    intptr_t i;
+    intptr_t num_pixels = src_size &gt;&gt; 1;
 
     for (i=0; i&lt;num_pixels; i++)
     {
@@ -522,10 +522,10 @@
     }
 }
 
-void rgb8tobgr8(const uint8_t *src, uint8_t *dst, long src_size)
+void rgb8tobgr8(const uint8_t *src, uint8_t *dst, intptr_t src_size)
 {
-    long i;
-    long num_pixels = src_size;
+    intptr_t i;
+    intptr_t num_pixels = src_size;
     for (i=0; i&lt;num_pixels; i++)
     {
         unsigned b,g,r;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/rgb2rgb.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/rgb2rgb.h	2008-09-15 17:03:51 UTC (rev 4354)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/rgb2rgb.h	2008-09-15 17:38:48 UTC (rev 4355)
@@ -29,46 +29,46 @@
 #include &lt;inttypes.h&gt;
 
 /* A full collection of rgb to rgb(bgr) convertors */
-extern void (*rgb24to32)   (const uint8_t *src, uint8_t *dst, long src_size);
-extern void (*rgb24to16)   (const uint8_t *src, uint8_t *dst, long src_size);
-extern void (*rgb24to15)   (const uint8_t *src, uint8_t *dst, long src_size);
-extern void (*rgb32to24)   (const uint8_t *src, uint8_t *dst, long src_size);
-extern void (*rgb32to16)   (const uint8_t *src, uint8_t *dst, long src_size);
-extern void (*rgb32to15)   (const uint8_t *src, uint8_t *dst, long src_size);
-extern void (*rgb15to16)   (const uint8_t *src, uint8_t *dst, long src_size);
-extern void (*rgb15to24)   (const uint8_t *src, uint8_t *dst, long src_size);
-extern void (*rgb15to32)   (const uint8_t *src, uint8_t *dst, long src_size);
-extern void (*rgb16to15)   (const uint8_t *src, uint8_t *dst, long src_size);
-extern void (*rgb16to24)   (const uint8_t *src, uint8_t *dst, long src_size);
-extern void (*rgb16to32)   (const uint8_t *src, uint8_t *dst, long src_size);
-extern void (*rgb24tobgr24)(const uint8_t *src, uint8_t *dst, long src_size);
-extern void (*rgb24tobgr16)(const uint8_t *src, uint8_t *dst, long src_size);
-extern void (*rgb24tobgr15)(const uint8_t *src, uint8_t *dst, long src_size);
-extern void (*rgb32tobgr32)(const uint8_t *src, uint8_t *dst, long src_size);
-extern void (*rgb32tobgr16)(const uint8_t *src, uint8_t *dst, long src_size);
-extern void (*rgb32tobgr15)(const uint8_t *src, uint8_t *dst, long src_size);
+extern void (*rgb24to32)   (const uint8_t *src, uint8_t *dst, intptr_t src_size);
+extern void (*rgb24to16)   (const uint8_t *src, uint8_t *dst, intptr_t src_size);
+extern void (*rgb24to15)   (const uint8_t *src, uint8_t *dst, intptr_t src_size);
+extern void (*rgb32to24)   (const uint8_t *src, uint8_t *dst, intptr_t src_size);
+extern void (*rgb32to16)   (const uint8_t *src, uint8_t *dst, intptr_t src_size);
+extern void (*rgb32to15)   (const uint8_t *src, uint8_t *dst, intptr_t src_size);
+extern void (*rgb15to16)   (const uint8_t *src, uint8_t *dst, intptr_t src_size);
+extern void (*rgb15to24)   (const uint8_t *src, uint8_t *dst, intptr_t src_size);
+extern void (*rgb15to32)   (const uint8_t *src, uint8_t *dst, intptr_t src_size);
+extern void (*rgb16to15)   (const uint8_t *src, uint8_t *dst, intptr_t src_size);
+extern void (*rgb16to24)   (const uint8_t *src, uint8_t *dst, intptr_t src_size);
+extern void (*rgb16to32)   (const uint8_t *src, uint8_t *dst, intptr_t src_size);
+extern void (*rgb24tobgr24)(const uint8_t *src, uint8_t *dst, intptr_t src_size);
+extern void (*rgb24tobgr16)(const uint8_t *src, uint8_t *dst, intptr_t src_size);
+extern void (*rgb24tobgr15)(const uint8_t *src, uint8_t *dst, intptr_t src_size);
+extern void (*rgb32tobgr32)(const uint8_t *src, uint8_t *dst, intptr_t src_size);
+extern void (*rgb32tobgr16)(const uint8_t *src, uint8_t *dst, intptr_t src_size);
+extern void (*rgb32tobgr15)(const uint8_t *src, uint8_t *dst, intptr_t src_size);
 
-extern void rgb24tobgr32(const uint8_t *src, uint8_t *dst, long src_size);
-extern void rgb32tobgr24(const uint8_t *src, uint8_t *dst, long src_size);
-extern void rgb16tobgr32(const uint8_t *src, uint8_t *dst, long src_size);
-extern void rgb16tobgr24(const uint8_t *src, uint8_t *dst, long src_size);
-extern void rgb16tobgr16(const uint8_t *src, uint8_t *dst, long src_size);
-extern void rgb16tobgr15(const uint8_t *src, uint8_t *dst, long src_size);
-extern void rgb15tobgr32(const uint8_t *src, uint8_t *dst, long src_size);
-extern void rgb15tobgr24(const uint8_t *src, uint8_t *dst, long src_size);
-extern void rgb15tobgr16(const uint8_t *src, uint8_t *dst, long src_size);
-extern void rgb15tobgr15(const uint8_t *src, uint8_t *dst, long src_size);
-extern void rgb8tobgr8  (const uint8_t *src, uint8_t *dst, long src_size);
+extern void rgb24tobgr32(const uint8_t *src, uint8_t *dst, intptr_t src_size);
+extern void rgb32tobgr24(const uint8_t *src, uint8_t *dst, intptr_t src_size);
+extern void rgb16tobgr32(const uint8_t *src, uint8_t *dst, intptr_t src_size);
+extern void rgb16tobgr24(const uint8_t *src, uint8_t *dst, intptr_t src_size);
+extern void rgb16tobgr16(const uint8_t *src, uint8_t *dst, intptr_t src_size);
+extern void rgb16tobgr15(const uint8_t *src, uint8_t *dst, intptr_t src_size);
+extern void rgb15tobgr32(const uint8_t *src, uint8_t *dst, intptr_t src_size);
+extern void rgb15tobgr24(const uint8_t *src, uint8_t *dst, intptr_t src_size);
+extern void rgb15tobgr16(const uint8_t *src, uint8_t *dst, intptr_t src_size);
+extern void rgb15tobgr15(const uint8_t *src, uint8_t *dst, intptr_t src_size);
+extern void rgb8tobgr8  (const uint8_t *src, uint8_t *dst, intptr_t src_size);
 
 
-extern void palette8torgb32(const uint8_t *src, uint8_t *dst, long num_pixels, const uint8_t *palette);
-extern void palette8tobgr32(const uint8_t *src, uint8_t *dst, long num_pixels, const uint8_t *palette);
-extern void palette8torgb24(const uint8_t *src, uint8_t *dst, long num_pixels, const uint8_t *palette);
-extern void palette8tobgr24(const uint8_t *src, uint8_t *dst, long num_pixels, const uint8_t *palette);
-extern void palette8torgb16(const uint8_t *src, uint8_t *dst, long num_pixels, const uint8_t *palette);
-extern void palette8tobgr16(const uint8_t *src, uint8_t *dst, long num_pixels, const uint8_t *palette);
-extern void palette8torgb15(const uint8_t *src, uint8_t *dst, long num_pixels, const uint8_t *palette);
-extern void palette8tobgr15(const uint8_t *src, uint8_t *dst, long num_pixels, const uint8_t *palette);
+extern void palette8torgb32(const uint8_t *src, uint8_t *dst, intptr_t num_pixels, const uint8_t *palette);
+extern void palette8tobgr32(const uint8_t *src, uint8_t *dst, intptr_t num_pixels, const uint8_t *palette);
+extern void palette8torgb24(const uint8_t *src, uint8_t *dst, intptr_t num_pixels, const uint8_t *palette);
+extern void palette8tobgr24(const uint8_t *src, uint8_t *dst, intptr_t num_pixels, const uint8_t *palette);
+extern void palette8torgb16(const uint8_t *src, uint8_t *dst, intptr_t num_pixels, const uint8_t *palette);
+extern void palette8tobgr16(const uint8_t *src, uint8_t *dst, intptr_t num_pixels, const uint8_t *palette);
+extern void palette8torgb15(const uint8_t *src, uint8_t *dst, intptr_t num_pixels, const uint8_t *palette);
+extern void palette8tobgr15(const uint8_t *src, uint8_t *dst, intptr_t num_pixels, const uint8_t *palette);
 
 /**
  *
@@ -84,16 +84,16 @@
  * problem for anyone then tell me, and ill fix it)
  */
 extern void (*yv12toyuy2)(const uint8_t *ysrc, const uint8_t *usrc, const uint8_t *vsrc, uint8_t *dst,
-                          long width, long height,
-                          long lumStride, long chromStride, long dstStride);
+                          intptr_t width, intptr_t height,
+                          intptr_t lumStride, intptr_t chromStride, intptr_t dstStride);
 
 /**
  *
  * width should be a multiple of 16
  */
 extern void (*yuv422ptoyuy2)(const uint8_t *ysrc, const uint8_t *usrc, const uint8_t *vsrc, uint8_t *dst,
-                             long width, long height,
-                             long lumStride, long chromStride, long dstStride);
+                             intptr_t width, intptr_t height,
+                             intptr_t lumStride, intptr_t chromStride, intptr_t dstStride);
 
 /**
  *
@@ -101,8 +101,8 @@
  * problem for anyone then tell me, and ill fix it)
  */
 extern void (*yuy2toyv12)(const uint8_t *src, uint8_t *ydst, uint8_t *udst, uint8_t *vdst,
-                          long width, long height,
-                          long lumStride, long chromStride, long srcStride);
+                          intptr_t width, intptr_t height,
+                          intptr_t lumStride, intptr_t chromStride, intptr_t srcStride);
 
 /**
  *
@@ -110,8 +110,8 @@
  * problem for anyone then tell me, and ill fix it)
  */
 extern void (*yv12touyvy)(const uint8_t *ysrc, const uint8_t *usrc, const uint8_t *vsrc, uint8_t *dst,
-                          long width, long height,
-                          long lumStride, long chromStride, long dstStride);
+                          intptr_t width, intptr_t height,
+                          intptr_t lumStride, intptr_t chromStride, intptr_t dstStride);
 
 /**
  *
@@ -120,26 +120,26 @@
  * chrominance data is only taken from every secound line others are ignored FIXME write HQ version
  */
 extern void (*rgb24toyv12)(const uint8_t *src, uint8_t *ydst, uint8_t *udst, uint8_t *vdst,
-                           long width, long height,
-                           long lumStride, long chromStride, long srcStride);
-extern void (*planar2x)(const uint8_t *src, uint8_t *dst, long width, long height,
-                        long srcStride, long dstStride);
+                           intptr_t width, intptr_t height,
+                           intptr_t lumStride, intptr_t chromStride, intptr_t srcStride);
+extern void (*planar2x)(const uint8_t *src, uint8_t *dst, intptr_t width, intptr_t height,
+                        intptr_t srcStride, intptr_t dstStride);
 
 extern void (*interleaveBytes)(uint8_t *src1, uint8_t *src2, uint8_t *dst,
-                               long width, long height, long src1Stride,
-                               long src2Stride, long dstStride);
+                               intptr_t width, intptr_t height, intptr_t src1Stride,
+                               intptr_t src2Stride, intptr_t dstStride);
 
 extern void (*vu9_to_vu12)(const uint8_t *src1, const uint8_t *src2,
                            uint8_t *dst1, uint8_t *dst2,
-                           long width, long height,
-                           long srcStride1, long srcStride2,
-                           long dstStride1, long dstStride2);
+                           intptr_t width, intptr_t height,
+                           intptr_t srcStride1, intptr_t srcStride2,
+                           intptr_t dstStride1, intptr_t dstStride2);
 
 extern void (*yvu9_to_yuy2)(const uint8_t *src1, const uint8_t *src2, const uint8_t *src3,
                             uint8_t *dst,
-                            long width, long height,
-                            long srcStride1, long srcStride2,
-                            long srcStride3, long dstStride);
+                            intptr_t width, intptr_t height,
+                            intptr_t srcStride1, intptr_t srcStride2,
+                            intptr_t srcStride3, intptr_t dstStride);
 
 void sws_rgb2rgb_init(int flags);
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/rgb2rgb_template.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/rgb2rgb_template.c	2008-09-15 17:03:51 UTC (rev 4354)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/rgb2rgb_template.c	2008-09-15 17:38:48 UTC (rev 4355)
@@ -82,7 +82,7 @@
 #define SFENCE &quot; # nop&quot;
 #endif
 
-static inline void RENAME(rgb24to32)(const uint8_t *src, uint8_t *dst, long src_size)
+static inline void RENAME(rgb24to32)(const uint8_t *src, uint8_t *dst, intptr_t src_size)
 {
     uint8_t *dest = dst;
     const uint8_t *s = src;
@@ -142,7 +142,7 @@
     }
 }
 
-static inline void RENAME(rgb32to24)(const uint8_t *src, uint8_t *dst, long src_size)
+static inline void RENAME(rgb32to24)(const uint8_t *src, uint8_t *dst, intptr_t src_size)
 {
     uint8_t *dest = dst;
     const uint8_t *s = src;
@@ -234,7 +234,7 @@
  MMX2, 3DNOW optimization by Nick Kurshev
  32 bit C version, and and&amp;add trick by Michael Niedermayer
 */
-static inline void RENAME(rgb15to16)(const uint8_t *src, uint8_t *dst, long src_size)
+static inline void RENAME(rgb15to16)(const uint8_t *src, uint8_t *dst, intptr_t src_size)
 {
     register const uint8_t* s=src;
     register uint8_t* d=dst;
@@ -283,7 +283,7 @@
     }
 }
 
-static inline void RENAME(rgb16to15)(const uint8_t *src, uint8_t *dst, long src_size)
+static inline void RENAME(rgb16to15)(const uint8_t *src, uint8_t *dst, intptr_t src_size)
 {
     register const uint8_t* s=src;
     register uint8_t* d=dst;
@@ -339,7 +339,7 @@
     }
 }
 
-static inline void RENAME(rgb32to16)(const uint8_t *src, uint8_t *dst, long src_size)
+static inline void RENAME(rgb32to16)(const uint8_t *src, uint8_t *dst, intptr_t src_size)
 {
     const uint8_t *s = src;
     const uint8_t *end;
@@ -437,7 +437,7 @@
     }
 }
 
-static inline void RENAME(rgb32tobgr16)(const uint8_t *src, uint8_t *dst, long src_size)
+static inline void RENAME(rgb32tobgr16)(const uint8_t *src, uint8_t *dst, intptr_t src_size)
 {
     const uint8_t *s = src;
     const uint8_t *end;
@@ -498,7 +498,7 @@
     }
 }
 
-static inline void RENAME(rgb32to15)(const uint8_t *src, uint8_t *dst, long src_size)
+static inline void RENAME(rgb32to15)(const uint8_t *src, uint8_t *dst, intptr_t src_size)
 {
     const uint8_t *s = src;
     const uint8_t *end;
@@ -596,7 +596,7 @@
     }
 }
 
-static inline void RENAME(rgb32tobgr15)(const uint8_t *src, uint8_t *dst, long src_size)
+static inline void RENAME(rgb32tobgr15)(const uint8_t *src, uint8_t *dst, intptr_t src_size)
 {
     const uint8_t *s = src;
     const uint8_t *end;
@@ -657,7 +657,7 @@
     }
 }
 
-static inline void RENAME(rgb24to16)(const uint8_t *src, uint8_t *dst, long src_size)
+static inline void RENAME(rgb24to16)(const uint8_t *src, uint8_t *dst, intptr_t src_size)
 {
     const uint8_t *s = src;
     const uint8_t *end;
@@ -720,7 +720,7 @@
     }
 }
 
-static inline void RENAME(rgb24tobgr16)(const uint8_t *src, uint8_t *dst, long src_size)
+static inline void RENAME(rgb24tobgr16)(const uint8_t *src, uint8_t *dst, intptr_t src_size)
 {
     const uint8_t *s = src;
     const uint8_t *end;
@@ -783,7 +783,7 @@
     }
 }
 
-static inline void RENAME(rgb24to15)(const uint8_t *src, uint8_t *dst, long src_size)
+static inline void RENAME(rgb24to15)(const uint8_t *src, uint8_t *dst, intptr_t src_size)
 {
     const uint8_t *s = src;
     const uint8_t *end;
@@ -846,7 +846,7 @@
     }
 }
 
-static inline void RENAME(rgb24tobgr15)(const uint8_t *src, uint8_t *dst, long src_size)
+static inline void RENAME(rgb24tobgr15)(const uint8_t *src, uint8_t *dst, intptr_t src_size)
 {
     const uint8_t *s = src;
     const uint8_t *end;
@@ -930,7 +930,7 @@
        |
    Original Bits
 */
-static inline void RENAME(rgb15to24)(const uint8_t *src, uint8_t *dst, long src_size)
+static inline void RENAME(rgb15to24)(const uint8_t *src, uint8_t *dst, intptr_t src_size)
 {
     const uint16_t *end;
 #ifdef HAVE_MMX
@@ -1072,7 +1072,7 @@
     }
 }
 
-static inline void RENAME(rgb16to24)(const uint8_t *src, uint8_t *dst, long src_size)
+static inline void RENAME(rgb16to24)(const uint8_t *src, uint8_t *dst, intptr_t src_size)
 {
     const uint16_t *end;
 #ifdef HAVE_MMX
@@ -1213,7 +1213,7 @@
     }
 }
 
-static inline void RENAME(rgb15to32)(const uint8_t *src, uint8_t *dst, long src_size)
+static inline void RENAME(rgb15to32)(const uint8_t *src, uint8_t *dst, intptr_t src_size)
 {
     const uint16_t *end;
 #ifdef HAVE_MMX
@@ -1291,7 +1291,7 @@
     }
 }
 
-static inline void RENAME(rgb16to32)(const uint8_t *src, uint8_t *dst, long src_size)
+static inline void RENAME(rgb16to32)(const uint8_t *src, uint8_t *dst, intptr_t src_size)
 {
     const uint16_t *end;
 #ifdef HAVE_MMX
@@ -1363,9 +1363,9 @@
     }
 }
 
-static inline void RENAME(rgb32tobgr32)(const uint8_t *src, uint8_t *dst, long src_size)
+static inline void RENAME(rgb32tobgr32)(const uint8_t *src, uint8_t *dst, intptr_t src_size)
 {
-    long idx = 15 - src_size;
+    intptr_t idx = 15 - src_size;
     uint8_t *s = (uint8_t *) src-idx, *d = dst-idx;
 #ifdef HAVE_MMX
     asm volatile(
@@ -1426,11 +1426,11 @@
     }
 }
 
-static inline void RENAME(rgb24tobgr24)(const uint8_t *src, uint8_t *dst, long src_size)
+static inline void RENAME(rgb24tobgr24)(const uint8_t *src, uint8_t *dst, intptr_t src_size)
 {
     unsigned i;
 #ifdef HAVE_MMX
-    long mmx_size= 23 - src_size;
+    intptr_t mmx_size= 23 - src_size;
     asm volatile (
     &quot;test             %%&quot;REG_a&quot;, %%&quot;REG_a&quot;          \n\t&quot;
     &quot;jns                     2f                     \n\t&quot;
@@ -1497,11 +1497,11 @@
 }
 
 static inline void RENAME(yuvPlanartoyuy2)(const uint8_t *ysrc, const uint8_t *usrc, const uint8_t *vsrc, uint8_t *dst,
-                                           long width, long height,
-                                           long lumStride, long chromStride, long dstStride, long vertLumPerChroma)
+                                           intptr_t width, intptr_t height,
+                                           intptr_t lumStride, intptr_t chromStride, intptr_t dstStride, intptr_t vertLumPerChroma)
 {
-    long y;
-    const long chromWidth= width&gt;&gt;1;
+    intptr_t y;
+    const intptr_t chromWidth= width&gt;&gt;1;
     for (y=0; y&lt;height; y++)
     {
 #ifdef HAVE_MMX
@@ -1641,19 +1641,19 @@
  * this is a problem for anyone then tell me, and I will fix it).
  */
 static inline void RENAME(yv12toyuy2)(const uint8_t *ysrc, const uint8_t *usrc, const uint8_t *vsrc, uint8_t *dst,
-                                      long width, long height,
-                                      long lumStride, long chromStride, long dstStride)
+                                      intptr_t width, intptr_t height,
+                                      intptr_t lumStride, intptr_t chromStride, intptr_t dstStride)
 {
     //FIXME interpolate chroma
     RENAME(yuvPlanartoyuy2)(ysrc, usrc, vsrc, dst, width, height, lumStride, chromStride, dstStride, 2);
 }
 
 static inline void RENAME(yuvPlanartouyvy)(const uint8_t *ysrc, const uint8_t *usrc, const uint8_t *vsrc, uint8_t *dst,
-                                           long width, long height,
-                                           long lumStride, long chromStride, long dstStride, long vertLumPerChroma)
+                                           intptr_t width, intptr_t height,
+                                           intptr_t lumStride, intptr_t chromStride, intptr_t dstStride, intptr_t vertLumPerChroma)
 {
-    long y;
-    const long chromWidth= width&gt;&gt;1;
+    intptr_t y;
+    const intptr_t chromWidth= width&gt;&gt;1;
     for (y=0; y&lt;height; y++)
     {
 #ifdef HAVE_MMX
@@ -1747,8 +1747,8 @@
  * this is a problem for anyone then tell me, and I will fix it).
  */
 static inline void RENAME(yv12touyvy)(const uint8_t *ysrc, const uint8_t *usrc, const uint8_t *vsrc, uint8_t *dst,
-                                      long width, long height,
-                                      long lumStride, long chromStride, long dstStride)
+                                      intptr_t width, intptr_t height,
+                                      intptr_t lumStride, intptr_t chromStride, intptr_t dstStride)
 {
     //FIXME interpolate chroma
     RENAME(yuvPlanartouyvy)(ysrc, usrc, vsrc, dst, width, height, lumStride, chromStride, dstStride, 2);
@@ -1758,8 +1758,8 @@
  * Width should be a multiple of 16.
  */
 static inline void RENAME(yuv422ptoyuy2)(const uint8_t *ysrc, const uint8_t *usrc, const uint8_t *vsrc, uint8_t *dst,
-                                         long width, long height,
-                                         long lumStride, long chromStride, long dstStride)
+                                         intptr_t width, intptr_t height,
+                                         intptr_t lumStride, intptr_t chromStride, intptr_t dstStride)
 {
     RENAME(yuvPlanartoyuy2)(ysrc, usrc, vsrc, dst, width, height, lumStride, chromStride, dstStride, 1);
 }
@@ -1769,11 +1769,11 @@
  * this is a problem for anyone then tell me, and I will fix it).
  */
 static inline void RENAME(yuy2toyv12)(const uint8_t *src, uint8_t *ydst, uint8_t *udst, uint8_t *vdst,
-                                      long width, long height,
-                                      long lumStride, long chromStride, long srcStride)
+                                      intptr_t width, intptr_t height,
+                                      intptr_t lumStride, intptr_t chromStride, intptr_t srcStride)
 {
-    long y;
-    const long chromWidth= width&gt;&gt;1;
+    intptr_t y;
+    const intptr_t chromWidth= width&gt;&gt;1;
     for (y=0; y&lt;height; y+=2)
     {
 #ifdef HAVE_MMX
@@ -1859,7 +1859,7 @@
         : &quot;memory&quot;, &quot;%&quot;REG_a
         );
 #else
-        long i;
+        intptr_t i;
         for (i=0; i&lt;chromWidth; i++)
         {
             ydst[2*i+0]     = src[4*i+0];
@@ -1890,7 +1890,7 @@
 
 static inline void RENAME(yvu9toyv12)(const uint8_t *ysrc, const uint8_t *usrc, const uint8_t *vsrc,
                                       uint8_t *ydst, uint8_t *udst, uint8_t *vdst,
-                                      long width, long height, long lumStride, long chromStride)
+                                      intptr_t width, intptr_t height, intptr_t lumStride, intptr_t chromStride)
 {
     /* Y Plane */
     memcpy(ydst, ysrc, width*height);
@@ -1898,9 +1898,9 @@
     /* XXX: implement upscaling for U,V */
 }
 
-static inline void RENAME(planar2x)(const uint8_t *src, uint8_t *dst, long srcWidth, long srcHeight, long srcStride, long dstStride)
+static inline void RENAME(planar2x)(const uint8_t *src, uint8_t *dst, intptr_t srcWidth, intptr_t srcHeight, intptr_t srcStride, intptr_t dstStride)
 {
-    long x,y;
+    intptr_t x,y;
 
     dst[0]= src[0];
 
@@ -1915,7 +1915,7 @@
 
     for (y=1; y&lt;srcHeight; y++){
 #if defined (HAVE_MMX2) || defined (HAVE_3DNOW)
-        const long mmxSize= srcWidth&amp;~15;
+        const intptr_t mmxSize= srcWidth&amp;~15;
         asm volatile(
         &quot;mov           %4, %%&quot;REG_a&quot;            \n\t&quot;
         &quot;1:                                     \n\t&quot;
@@ -1959,7 +1959,7 @@
 
         );
 #else
-        const long mmxSize=1;
+        const intptr_t mmxSize=1;
 #endif
         dst[0        ]= (3*src[0] +   src[srcStride])&gt;&gt;2;
         dst[dstStride]= (  src[0] + 3*src[srcStride])&gt;&gt;2;
@@ -2007,11 +2007,11 @@
  * FIXME: Write HQ version.
  */
 static inline void RENAME(uyvytoyv12)(const uint8_t *src, uint8_t *ydst, uint8_t *udst, uint8_t *vdst,
-                                      long width, long height,
-                                      long lumStride, long chromStride, long srcStride)
+                                      intptr_t width, intptr_t height,
+                                      intptr_t lumStride, intptr_t chromStride, intptr_t srcStride)
 {
-    long y;
-    const long chromWidth= width&gt;&gt;1;
+    intptr_t y;
+    const intptr_t chromWidth= width&gt;&gt;1;
     for (y=0; y&lt;height; y+=2)
     {
 #ifdef HAVE_MMX
@@ -2097,7 +2097,7 @@
         : &quot;memory&quot;, &quot;%eax&quot;
         );
 #else
-        long i;
+        intptr_t i;
         for (i=0; i&lt;chromWidth; i++)
         {
             udst[i]     = src[4*i+0];
@@ -2134,15 +2134,15 @@
  * FIXME: Write HQ version.
  */
 static inline void RENAME(rgb24toyv12)(const uint8_t *src, uint8_t *ydst, uint8_t *udst, uint8_t *vdst,
-                                       long width, long height,
-                                       long lumStride, long chromStride, long srcStride)
+                                       intptr_t width, intptr_t height,
+                                       intptr_t lumStride, intptr_t chromStride, intptr_t srcStride)
 {
-    long y;
-    const long chromWidth= width&gt;&gt;1;
+    intptr_t y;
+    const intptr_t chromWidth= width&gt;&gt;1;
 #ifdef HAVE_MMX
     for (y=0; y&lt;height-2; y+=2)
     {
-        long i;
+        intptr_t i;
         for (i=0; i&lt;2; i++)
         {
             asm volatile(
@@ -2380,7 +2380,7 @@
 #endif
     for (; y&lt;height; y+=2)
     {
-        long i;
+        intptr_t i;
         for (i=0; i&lt;chromWidth; i++)
         {
             unsigned int b = src[6*i+0];
@@ -2430,13 +2430,13 @@
 }
 
 void RENAME(interleaveBytes)(uint8_t *src1, uint8_t *src2, uint8_t *dest,
-                             long width, long height, long src1Stride,
-                             long src2Stride, long dstStride){
-    long h;
+                             intptr_t width, intptr_t height, intptr_t src1Stride,
+                             intptr_t src2Stride, intptr_t dstStride){
+    intptr_t h;
 
     for (h=0; h &lt; height; h++)
     {
-        long w;
+        intptr_t w;
 
 #ifdef HAVE_MMX
 #ifdef HAVE_SSE2
@@ -2512,11 +2512,11 @@
 
 static inline void RENAME(vu9_to_vu12)(const uint8_t *src1, const uint8_t *src2,
                                        uint8_t *dst1, uint8_t *dst2,
-                                       long width, long height,
-                                       long srcStride1, long srcStride2,
-                                       long dstStride1, long dstStride2)
+                                       intptr_t width, intptr_t height,
+                                       intptr_t srcStride1, intptr_t srcStride2,
+                                       intptr_t dstStride1, intptr_t dstStride2)
 {
-    long y,x,w,h;
+    intptr_t y,x,w,h;
     w=width/2; h=height/2;
 #ifdef HAVE_MMX
     asm volatile(
@@ -2615,11 +2615,11 @@
 
 static inline void RENAME(yvu9_to_yuy2)(const uint8_t *src1, const uint8_t *src2, const uint8_t *src3,
                                         uint8_t *dst,
-                                        long width, long height,
-                                        long srcStride1, long srcStride2,
-                                        long srcStride3, long dstStride)
+                                        intptr_t width, intptr_t height,
+                                        intptr_t srcStride1, intptr_t srcStride2,
+                                        intptr_t srcStride3, intptr_t dstStride)
 {
-    long y,x,w,h;
+    intptr_t y,x,w,h;
     w=width/2; h=height;
     for (y=0;y&lt;h;y++){
     const uint8_t* yp=src1+srcStride1*y;
@@ -2684,7 +2684,7 @@
 #endif
     for (; x&lt;w; x++)
     {
-        const long x2 = x&lt;&lt;2;
+        const intptr_t x2 = x&lt;&lt;2;
         d[8*x+0] = yp[x2];
         d[8*x+1] = up[x];
         d[8*x+2] = yp[x2+1];

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale_template.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale_template.c	2008-09-15 17:03:51 UTC (rev 4354)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale_template.c	2008-09-15 17:38:48 UTC (rev 4355)
@@ -929,7 +929,7 @@
 
 static inline void RENAME(yuv2yuvX)(SwsContext *c, int16_t *lumFilter, int16_t **lumSrc, int lumFilterSize,
                                     int16_t *chrFilter, int16_t **chrSrc, int chrFilterSize,
-                                    uint8_t *dest, uint8_t *uDest, uint8_t *vDest, long dstW, long chrDstW)
+                                    uint8_t *dest, uint8_t *uDest, uint8_t *vDest, intptr_t dstW, intptr_t chrDstW)
 {
 #ifdef HAVE_MMX
     if (c-&gt;flags &amp; SWS_ACCURATE_RND){
@@ -970,7 +970,7 @@
 }
 
 static inline void RENAME(yuv2yuv1)(int16_t *lumSrc, int16_t *chrSrc,
-                                    uint8_t *dest, uint8_t *uDest, uint8_t *vDest, long dstW, long chrDstW)
+                                    uint8_t *dest, uint8_t *uDest, uint8_t *vDest, intptr_t dstW, intptr_t chrDstW)
 {
 #ifdef HAVE_MMX
     if (uDest)
@@ -1035,10 +1035,10 @@
  */
 static inline void RENAME(yuv2packedX)(SwsContext *c, int16_t *lumFilter, int16_t **lumSrc, int lumFilterSize,
                                        int16_t *chrFilter, int16_t **chrSrc, int chrFilterSize,
-                                       uint8_t *dest, long dstW, long dstY)
+                                       uint8_t *dest, intptr_t dstW, intptr_t dstY)
 {
 #ifdef HAVE_MMX
-    long dummy=0;
+    intptr_t dummy=0;
     if (c-&gt;flags &amp; SWS_ACCURATE_RND){
         switch(c-&gt;dstFormat){
         case PIX_FMT_RGB32:
@@ -1213,7 +1213,7 @@
             &quot;cmp %5, %%&quot;REG_a&quot;  \n\t&quot;
             &quot; jb 1b             \n\t&quot;
 
-            :: &quot;r&quot; (buf0), &quot;r&quot; (buf1), &quot;r&quot; (uvbuf0), &quot;r&quot; (uvbuf1), &quot;r&quot; (dest), &quot;m&quot; ((long)dstW),
+            :: &quot;r&quot; (buf0), &quot;r&quot; (buf1), &quot;r&quot; (uvbuf0), &quot;r&quot; (uvbuf1), &quot;r&quot; (dest), &quot;m&quot; ((intptr_t)dstW),
             &quot;m&quot; (yalpha1), &quot;m&quot; (uvalpha1)
             : &quot;%&quot;REG_a
             );
@@ -1702,7 +1702,7 @@
 
 //FIXME yuy2* can read upto 7 samples to much
 
-static inline void RENAME(yuy2ToY)(uint8_t *dst, uint8_t *src, long width)
+static inline void RENAME(yuy2ToY)(uint8_t *dst, uint8_t *src, intptr_t width)
 {
 #ifdef HAVE_MMX
     asm volatile(
@@ -1727,7 +1727,7 @@
 #endif
 }
 
-static inline void RENAME(yuy2ToUV)(uint8_t *dstU, uint8_t *dstV, uint8_t *src1, uint8_t *src2, long width)
+static inline void RENAME(yuy2ToUV)(uint8_t *dstU, uint8_t *dstV, uint8_t *src1, uint8_t *src2, intptr_t width)
 {
 #ifdef HAVE_MMX
     asm volatile(
@@ -1763,7 +1763,7 @@
 }
 
 //this is allmost identical to the previous, end exists only cuz yuy2ToY/UV)(dst, src+1, ...) would have 100% unaligned accesses
-static inline void RENAME(uyvyToY)(uint8_t *dst, uint8_t *src, long width)
+static inline void RENAME(uyvyToY)(uint8_t *dst, uint8_t *src, intptr_t width)
 {
 #ifdef HAVE_MMX
     asm volatile(
@@ -1787,7 +1787,7 @@
 #endif
 }
 
-static inline void RENAME(uyvyToUV)(uint8_t *dstU, uint8_t *dstV, uint8_t *src1, uint8_t *src2, long width)
+static inline void RENAME(uyvyToUV)(uint8_t *dstU, uint8_t *dstV, uint8_t *src1, uint8_t *src2, intptr_t width)
 {
 #ifdef HAVE_MMX
     asm volatile(
@@ -1854,7 +1854,7 @@
     }
 }
 
-static inline void RENAME(bgr24ToY)(uint8_t *dst, uint8_t *src, long width)
+static inline void RENAME(bgr24ToY)(uint8_t *dst, uint8_t *src, intptr_t width)
 {
 #ifdef HAVE_MMX
     asm volatile(
@@ -1939,7 +1939,7 @@
 #endif /* HAVE_MMX */
 }
 
-static inline void RENAME(bgr24ToUV)(uint8_t *dstU, uint8_t *dstV, uint8_t *src1, uint8_t *src2, long width)
+static inline void RENAME(bgr24ToUV)(uint8_t *dstU, uint8_t *dstV, uint8_t *src1, uint8_t *src2, intptr_t width)
 {
 #ifdef HAVE_MMX
     asm volatile(
@@ -2298,13 +2298,13 @@
 
 // Bilinear / Bicubic scaling
 static inline void RENAME(hScale)(int16_t *dst, int dstW, uint8_t *src, int srcW, int xInc,
-                                  int16_t *filter, int16_t *filterPos, long filterSize)
+                                  int16_t *filter, int16_t *filterPos, intptr_t filterSize)
 {
 #ifdef HAVE_MMX
     assert(filterSize % 4 == 0 &amp;&amp; filterSize&gt;0);
     if (filterSize==4) // Always true for upscaling, sometimes for down, too.
     {
-        long counter= -2*dstW;
+        intptr_t counter= -2*dstW;
         filter-= counter*2;
         filterPos-= counter/2;
         dst-= counter/2;
@@ -2350,7 +2350,7 @@
     }
     else if (filterSize==8)
     {
-        long counter= -2*dstW;
+        intptr_t counter= -2*dstW;
         filter-= counter*4;
         filterPos-= counter/2;
         dst-= counter/2;
@@ -2409,7 +2409,7 @@
     else
     {
         uint8_t *offset = src+filterSize;
-        long counter= -2*dstW;
+        intptr_t counter= -2*dstW;
         //filter-= counter*filterSize/2;
         filterPos-= counter/2;
         dst-= counter/2;
@@ -2480,7 +2480,7 @@
 #endif /* HAVE_MMX */
 }
       // *** horizontal scale Y line to temp buffer
-static inline void RENAME(hyscale)(uint16_t *dst, long dstWidth, uint8_t *src, int srcW, int xInc,
+static inline void RENAME(hyscale)(uint16_t *dst, intptr_t dstWidth, uint8_t *src, int srcW, int xInc,
                                    int flags, int canMMX2BeUsed, int16_t *hLumFilter,
                                    int16_t *hLumFilterPos, int hLumFilterSize, void *funnyYCode,
                                    int srcFormat, uint8_t *formatConvBuffer, int16_t *mmx2Filter,
@@ -2623,7 +2623,7 @@
         else
         {
 #endif /* HAVE_MMX2 */
-        long xInc_shr16 = xInc &gt;&gt; 16;
+        intptr_t xInc_shr16 = xInc &gt;&gt; 16;
         uint16_t xInc_mask = xInc &amp; 0xffff;
         //NO MMX just normal asm ...
         asm volatile(
@@ -2682,7 +2682,7 @@
     }
 }
 
-inline static void RENAME(hcscale)(uint16_t *dst, long dstWidth, uint8_t *src1, uint8_t *src2,
+inline static void RENAME(hcscale)(uint16_t *dst, intptr_t dstWidth, uint8_t *src1, uint8_t *src2,
                                    int srcW, int xInc, int flags, int canMMX2BeUsed, int16_t *hChrFilter,
                                    int16_t *hChrFilterPos, int hChrFilterSize, void *funnyUVCode,
                                    int srcFormat, uint8_t *formatConvBuffer, int16_t *mmx2Filter,
@@ -2854,7 +2854,7 @@
         else
         {
 #endif /* HAVE_MMX2 */
-            long xInc_shr16 = (long) (xInc &gt;&gt; 16);
+            intptr_t xInc_shr16 = (intptr_t) (xInc &gt;&gt; 16);
             uint16_t xInc_mask = xInc &amp; 0xffff;
             asm volatile(
             &quot;xor %%&quot;REG_a&quot;, %%&quot;REG_a&quot;               \n\t&quot; // i
@@ -2892,9 +2892,9 @@
 /* GCC-3.3 makes MPlayer crash on IA-32 machines when using &quot;g&quot; operand here,
    which is needed to support GCC-4.0 */
 #if defined(ARCH_X86_64) &amp;&amp; ((__GNUC__ &gt; 3) || (__GNUC__ == 3 &amp;&amp; __GNUC_MINOR__ &gt;= 4))
-            :: &quot;m&quot; (src1), &quot;m&quot; (dst), &quot;g&quot; ((long)dstWidth), &quot;m&quot; (xInc_shr16), &quot;m&quot; (xInc_mask),
+            :: &quot;m&quot; (src1), &quot;m&quot; (dst), &quot;g&quot; ((intptr_t)dstWidth), &quot;m&quot; (xInc_shr16), &quot;m&quot; (xInc_mask),
 #else
-            :: &quot;m&quot; (src1), &quot;m&quot; (dst), &quot;m&quot; ((long)dstWidth), &quot;m&quot; (xInc_shr16), &quot;m&quot; (xInc_mask),
+            :: &quot;m&quot; (src1), &quot;m&quot; (dst), &quot;m&quot; ((intptr_t)dstWidth), &quot;m&quot; (xInc_shr16), &quot;m&quot; (xInc_mask),
 #endif
             &quot;r&quot; (src2)
             : &quot;%&quot;REG_a, &quot;%&quot;REG_d, &quot;%ecx&quot;, &quot;%&quot;REG_D, &quot;%esi&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/yuv2rgb_template.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/yuv2rgb_template.c	2008-09-15 17:03:51 UTC (rev 4354)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/yuv2rgb_template.c	2008-09-15 17:38:48 UTC (rev 4355)
@@ -141,7 +141,7 @@
         uint8_t *py = src[0] + y*srcStride[0];
         uint8_t *pu = src[1] + (y&gt;&gt;1)*srcStride[1];
         uint8_t *pv = src[2] + (y&gt;&gt;1)*srcStride[2];
-        long index= -h_size/2;
+        intptr_t index= -h_size/2;
 
         b5Dither= ff_dither8[y&amp;1];
         g6Dither= ff_dither4[y&amp;1];
@@ -236,7 +236,7 @@
         uint8_t *py = src[0] + y*srcStride[0];
         uint8_t *pu = src[1] + (y&gt;&gt;1)*srcStride[1];
         uint8_t *pv = src[2] + (y&gt;&gt;1)*srcStride[2];
-        long index= -h_size/2;
+        intptr_t index= -h_size/2;
 
         b5Dither= ff_dither8[y&amp;1];
         g6Dither= ff_dither4[y&amp;1];
@@ -324,7 +324,7 @@
         uint8_t *py = src[0] + y*srcStride[0];
         uint8_t *pu = src[1] + (y&gt;&gt;1)*srcStride[1];
         uint8_t *pv = src[2] + (y&gt;&gt;1)*srcStride[2];
-        long index= -h_size/2;
+        intptr_t index= -h_size/2;
 
         /* this mmx assembly code deals with SINGLE scan line at a time, it convert 8
            pixels in each iteration */
@@ -470,7 +470,7 @@
         uint8_t *py = src[0] + y*srcStride[0];
         uint8_t *pu = src[1] + (y&gt;&gt;1)*srcStride[1];
         uint8_t *pv = src[2] + (y&gt;&gt;1)*srcStride[2];
-        long index= -h_size/2;
+        intptr_t index= -h_size/2;
 
         /* this mmx assembly code deals with SINGLE scan line at a time, it convert 8
            pixels in each iteration */

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/CMakeLists.txt	2008-09-15 17:03:51 UTC (rev 4354)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/CMakeLists.txt	2008-09-15 17:38:48 UTC (rev 4355)
@@ -10,7 +10,9 @@
 ENDIF (UNIX)
 
 IF (ADM_CPU_X86_64 OR ADM_CPU_PPC)
-	ADD_DEFINITIONS(-fPIC -DPIC)
+	IF (NOT WIN32)
+		ADD_DEFINITIONS(-fPIC -DPIC)
+	ENDIF (NOT WIN32)
 ELSEIF (APPLE)
 	ADD_DEFINITIONS(-mdynamic-no-pic)
 ENDIF (ADM_CPU_X86_64 OR ADM_CPU_PPC)


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001594.html">[Avidemux-svn-commit] r4354 -	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src
</A></li>
	<LI>Next message: <A HREF="001596.html">[Avidemux-svn-commit] r4356 - in	branches/avidemux_2.5_branch_gruntster/avidemux: ADM_encoder	ADM_plugin ADM_userInterfaces/ADM_GTK	ADM_userInterfaces/ADM_GTK/ADM_gui2	ADM_userInterfaces/ADM_NONE ADM_userInterfaces/ADM_QT4
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1595">[ date ]</a>
              <a href="thread.html#1595">[ thread ]</a>
              <a href="subject.html#1595">[ subject ]</a>
              <a href="author.html#1595">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">More information about the Avidemux-svn-commit
mailing list</a><br>
</body></html>
