<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Avidemux-svn-commit] r4383 - in	branches/avidemux_2.5_branch_gruntster: avidemux/ADM_UIs/ADM_QT4/src	avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2	avidemux/ADM_userInterfaces/ADM_GTK/glade	avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui	avidemux/ADM_userInterfaces/ADM_commonUI	plugins/ADM_videoEncoder/ADM_vidEnc_x264	plugins/ADM_videoEncoder/ADM_vidEnc_x264/xml	plugins/ADM_videoFilters/ASharp/qt4
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/avidemux-svn-commit/2008-September/index.html" >
   <LINK REL="made" HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r4383%20-%20in%0A%09branches/avidemux_2.5_branch_gruntster%3A%20avidemux/ADM_UIs/ADM_QT4/src%0A%09avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2%0A%09avidemux/ADM_userInterfaces/ADM_GTK/glade%0A%09avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui%0A%09avidemux/ADM_userInterfaces/ADM_commonUI%0A%09plugins/ADM_videoEncoder/ADM_vidEnc_x264%0A%09plugins/ADM_videoEncoder/ADM_vidEnc_x264/xml%0A%09plugins/ADM_videoFilters/ASharp/qt4&In-Reply-To=%3C200809201522.m8KFM8iB018225%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001622.html">
   <LINK REL="Next"  HREF="001624.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Avidemux-svn-commit] r4383 - in	branches/avidemux_2.5_branch_gruntster: avidemux/ADM_UIs/ADM_QT4/src	avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2	avidemux/ADM_userInterfaces/ADM_GTK/glade	avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui	avidemux/ADM_userInterfaces/ADM_commonUI	plugins/ADM_videoEncoder/ADM_vidEnc_x264	plugins/ADM_videoEncoder/ADM_vidEnc_x264/xml	plugins/ADM_videoFilters/ASharp/qt4</H1>
    <B>gruntster at mail.berlios.de</B> 
    <A HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r4383%20-%20in%0A%09branches/avidemux_2.5_branch_gruntster%3A%20avidemux/ADM_UIs/ADM_QT4/src%0A%09avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2%0A%09avidemux/ADM_userInterfaces/ADM_GTK/glade%0A%09avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui%0A%09avidemux/ADM_userInterfaces/ADM_commonUI%0A%09plugins/ADM_videoEncoder/ADM_vidEnc_x264%0A%09plugins/ADM_videoEncoder/ADM_vidEnc_x264/xml%0A%09plugins/ADM_videoFilters/ASharp/qt4&In-Reply-To=%3C200809201522.m8KFM8iB018225%40sheep.berlios.de%3E"
       TITLE="[Avidemux-svn-commit] r4383 - in	branches/avidemux_2.5_branch_gruntster: avidemux/ADM_UIs/ADM_QT4/src	avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2	avidemux/ADM_userInterfaces/ADM_GTK/glade	avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui	avidemux/ADM_userInterfaces/ADM_commonUI	plugins/ADM_videoEncoder/ADM_vidEnc_x264	plugins/ADM_videoEncoder/ADM_vidEnc_x264/xml	plugins/ADM_videoFilters/ASharp/qt4">gruntster at mail.berlios.de
       </A><BR>
    <I>Sat Sep 20 17:22:08 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001622.html">[Avidemux-svn-commit] r4382 -	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec
</A></li>
        <LI>Next message: <A HREF="001624.html">[Avidemux-svn-commit] r4384 - in	branches/avidemux_2.5_branch_gruntster/avidemux:	ADM_libraries/ADM_ffmpeg ADM_libraries/ADM_ffmpeg/ADM_lavcodec	ADM_libraries/ADM_ffmpeg/ADM_lavformat	ADM_libraries/ADM_utilities ADM_outputs ADM_outputs/oplug_avi	ADM_outputs/oplug_mp4
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1623">[ date ]</a>
              <a href="thread.html#1623">[ thread ]</a>
              <a href="subject.html#1623">[ subject ]</a>
              <a href="author.html#1623">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: gruntster
Date: 2008-09-20 17:21:58 +0200 (Sat, 20 Sep 2008)
New Revision: 4383

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/FAC_frame.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_dialogFactory.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/glade/gtk2_build.glade
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/options.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/options.h
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Param.xsd
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/xml/PlayStation Portable.xml
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/ASharp/qt4/Q_asharp.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/ASharp/qt4/Q_asharp.h
Log:
[Merge] integrate changes from 2.4 branch (r4357)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/FAC_frame.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/FAC_frame.cpp	2008-09-20 14:54:05 UTC (rev 4382)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/FAC_frame.cpp	2008-09-20 15:21:58 UTC (rev 4383)
@@ -1,6 +1,6 @@
 /***************************************************************************
-  FAC_toggle.cpp
-  Handle dialog factory element : Toggle
+  FAC_frame.cpp
+  Handle dialog factory element : Frame
   (C) 2006 Mean <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">Fixounet at free.fr</A> 
 ***************************************************************************/
 
@@ -16,6 +16,7 @@
 
 #include &lt;QtGui/QGridLayout&gt;
 #include &lt;QtGui/QLabel&gt;
+#include &lt;QtGui/QGroupBox&gt;
 
 #include &quot;ADM_default.h&quot;
 #include &quot;DIA_factory.h&quot;
@@ -62,30 +63,23 @@
   if(paramTitle)
     delete paramTitle;
 }
+
 void diaElemFrame::setMe(void *dialog, void *opaque,uint32_t line)
 {
-  
-   QGridLayout *layout=(QGridLayout*) opaque;  
-   QGridLayout *layout2;
-   
-   layout2=new QGridLayout((QWidget *)dialog);
-   myWidget=(void *)layout2; 
+	QGridLayout *layout = (QGridLayout*)opaque;
+	QGroupBox *groupBox = new QGroupBox(QString::fromUtf8(paramTitle));
+	QGridLayout *layout2 = new QGridLayout(groupBox);
+	int v = 0;
 
-    QLabel *text=new QLabel( (QWidget *)dialog);
-    QString string = QString::fromUtf8(paramTitle);
-    
-    string=&quot;&lt;b&gt;&quot;+string+&quot;&lt;/b&gt;&quot;;
-    text-&gt;setText(string);
- layout-&gt;addWidget(text,line,0);
- layout-&gt;addLayout(layout2,line+1,0);
- int  v=0;
-  for(int i=0;i&lt;nbElems;i++)
-  {
-    elems[i]-&gt;setMe(dialog,layout2,v); 
-    v+=elems[i]-&gt;getSize();
-  }
-  myWidget=(void *)layout2;
+	for (int i = 0; i &lt; nbElems; i++)
+	{
+		elems[i]-&gt;setMe(groupBox, layout2, v); 
+		v += elems[i]-&gt;getSize();
+	}
+
+	layout-&gt;addWidget(groupBox, line, 0);
 }
+
 //*****************************
 void diaElemFrame::getMe(void)
 {

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_dialogFactory.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_dialogFactory.cpp	2008-09-20 14:54:05 UTC (rev 4382)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_dialogFactory.cpp	2008-09-20 15:21:58 UTC (rev 4383)
@@ -41,16 +41,16 @@
   
   dialog.setWindowTitle(QString::fromUtf8(title));
   
-  QVBoxLayout vboxLayout;
-  QGridLayout layout;
-  
-  vboxLayout.addLayout(&amp;layout);
-  
+  QSpacerItem *spacer = new QSpacerItem(20, 16, QSizePolicy::Minimum, QSizePolicy::Fixed);
+  QDialogButtonBox *buttonBox = new QDialogButtonBox();
+  QVBoxLayout *vboxLayout = new QVBoxLayout();
+  QGridLayout *layout = new QGridLayout();
+
  int  v=0;
   for(int i=0;i&lt;nb;i++)
   {
     ADM_assert(elems[i]);
-     elems[i]-&gt;setMe( (void *)&amp;dialog,&amp;layout,v); 
+     elems[i]-&gt;setMe( (void *)&amp;dialog,layout,v); 
      v+=elems[i]-&gt;getSize();
     
   }
@@ -61,13 +61,17 @@
   }
 
   // Add buttons
-   QDialogButtonBox buttonBox(&amp;dialog);
-    buttonBox.setStandardButtons(QDialogButtonBox::Ok | QDialogButtonBox::Cancel);
-     QObject::connect(&amp;buttonBox, SIGNAL(accepted()), &amp;dialog, SLOT(accept()));
-     QObject::connect(&amp;buttonBox, SIGNAL(rejected()), &amp;dialog, SLOT(reject()));
-     vboxLayout.addWidget(&amp;buttonBox);
-	 dialog.setLayout(&amp;vboxLayout);
+   buttonBox-&gt;setStandardButtons(QDialogButtonBox::Ok | QDialogButtonBox::Cancel);
 
+   QObject::connect(buttonBox, SIGNAL(accepted()), &amp;dialog, SLOT(accept()));
+   QObject::connect(buttonBox, SIGNAL(rejected()), &amp;dialog, SLOT(reject()));
+
+   vboxLayout-&gt;addLayout(layout);
+   vboxLayout-&gt;addItem(spacer);
+   vboxLayout-&gt;addWidget(buttonBox);
+
+   dialog.setLayout(vboxLayout);
+
   if(dialog.exec()==QDialog::Accepted)
   {
      for(int i=0;i&lt;nb;i++)
@@ -106,29 +110,31 @@
   ADM_assert(tabs);
   
   dialog.setWindowTitle(QString::fromUtf8(title));
-  
-  QGridLayout layout(&amp;dialog);
 
-  // Add tabs
-  QTabWidget wtabs((QWidget *)&amp;dialog);
-  // Add buttons
-   QDialogButtonBox buttonBox((QWidget *)&amp;dialog);
-    buttonBox.setStandardButtons(QDialogButtonBox::Ok
-                            | QDialogButtonBox::Cancel);
-     QObject::connect(&amp;buttonBox, SIGNAL(accepted()), &amp;dialog, SLOT(accept()));
-     QObject::connect(&amp;buttonBox, SIGNAL(rejected()), &amp;dialog, SLOT(reject()));
-     
+  QVBoxLayout *vboxLayout = new QVBoxLayout();
+  QGridLayout *layout = new QGridLayout();
+  QSpacerItem *spacer = new QSpacerItem(20, 16, QSizePolicy::Minimum, QSizePolicy::Fixed);
+  QTabWidget *wtabs = new QTabWidget();
+  QDialogButtonBox *buttonBox = new QDialogButtonBox();
+
+    buttonBox-&gt;setStandardButtons(QDialogButtonBox::Ok | QDialogButtonBox::Cancel);
+
+     QObject::connect(buttonBox, SIGNAL(accepted()), &amp;dialog, SLOT(accept()));
+     QObject::connect(buttonBox, SIGNAL(rejected()), &amp;dialog, SLOT(reject()));
+
      for(int i=0;i&lt;nb;i++)
      {
         ADM_assert(tabs[i]);
-        insertTab(i,tabs[i],&amp;wtabs); 
-    
+        insertTab(i,tabs[i],wtabs);
       }
-     
-     layout.addWidget(&amp;wtabs,0,0);
-     layout.addWidget(&amp;buttonBox,1,0);
-  // run
-  dialog.setLayout(&amp;layout);
+
+	 vboxLayout-&gt;addLayout(layout);
+     vboxLayout-&gt;addWidget(wtabs,0,0);
+	 vboxLayout-&gt;addItem(spacer);
+     vboxLayout-&gt;addWidget(buttonBox,1,0);
+
+	 dialog.setLayout(vboxLayout);
+
   if(dialog.exec()==QDialog::Accepted)
   {
       // Read tabs

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp	2008-09-20 14:54:05 UTC (rev 4382)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp	2008-09-20 15:21:58 UTC (rev 4383)
@@ -212,6 +212,7 @@
   GtkWidget *CheckButtonTimeshift;
   GtkObject *spinbuttonTimeShift_adj;
   GtkWidget *spinbuttonTimeShift;
+  GtkWidget *label23;
   GtkWidget *vbox13;
   GtkWidget *label20;
   GtkWidget *alignment14;
@@ -1166,6 +1167,10 @@
   gtk_tooltips_set_tip (tooltips, spinbuttonTimeShift, QT_TR_NOOP(&quot;Audio/video time shift (ms)&quot;), NULL);
   gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonTimeShift), TRUE);
 
+  label23 = gtk_label_new (QT_TR_NOOP(&quot;ms&quot;));
+  gtk_widget_show (label23);
+  gtk_box_pack_start (GTK_BOX (hbox19), label23, FALSE, FALSE, 0);
+
   vbox13 = gtk_vbox_new (FALSE, 0);
   gtk_widget_show (vbox13);
   gtk_box_pack_start (GTK_BOX (vbox9), vbox13, FALSE, FALSE, 0);
@@ -1661,6 +1666,7 @@
   GLADE_HOOKUP_OBJECT (mainWindow, hbox19, &quot;hbox19&quot;);
   GLADE_HOOKUP_OBJECT (mainWindow, CheckButtonTimeshift, &quot;CheckButtonTimeshift&quot;);
   GLADE_HOOKUP_OBJECT (mainWindow, spinbuttonTimeShift, &quot;spinbuttonTimeShift&quot;);
+  GLADE_HOOKUP_OBJECT (mainWindow, label23, &quot;label23&quot;);
   GLADE_HOOKUP_OBJECT (mainWindow, vbox13, &quot;vbox13&quot;);
   GLADE_HOOKUP_OBJECT (mainWindow, label20, &quot;label20&quot;);
   GLADE_HOOKUP_OBJECT (mainWindow, alignment14, &quot;alignment14&quot;);
@@ -1716,4 +1722,3 @@
 
   return mainWindow;
 }
-

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/glade/gtk2_build.glade
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/glade/gtk2_build.glade	2008-09-20 14:54:05 UTC (rev 4382)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/glade/gtk2_build.glade	2008-09-20 15:21:58 UTC (rev 4383)
@@ -18,7 +18,6 @@
   &lt;property name=&quot;type_hint&quot;&gt;GDK_WINDOW_TYPE_HINT_NORMAL&lt;/property&gt;
   &lt;property name=&quot;gravity&quot;&gt;GDK_GRAVITY_NORTH_WEST&lt;/property&gt;
   &lt;property name=&quot;focus_on_map&quot;&gt;True&lt;/property&gt;
-  &lt;property name=&quot;urgency_hint&quot;&gt;False&lt;/property&gt;
 
   &lt;child&gt;
     &lt;widget class=&quot;GtkVBox&quot; id=&quot;vbox1&quot;&gt;
@@ -30,8 +29,6 @@
 	&lt;widget class=&quot;GtkMenuBar&quot; id=&quot;menuBar&quot;&gt;
 	  &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
 	  &lt;property name=&quot;can_focus&quot;&gt;True&lt;/property&gt;
-	  &lt;property name=&quot;pack_direction&quot;&gt;GTK_PACK_DIRECTION_LTR&lt;/property&gt;
-	  &lt;property name=&quot;child_pack_direction&quot;&gt;GTK_PACK_DIRECTION_LTR&lt;/property&gt;
 
 	  &lt;child&gt;
 	    &lt;widget class=&quot;GtkMenuItem&quot; id=&quot;menuitem1&quot;&gt;
@@ -1777,6 +1774,31 @@
 					  &lt;property name=&quot;fill&quot;&gt;True&lt;/property&gt;
 					&lt;/packing&gt;
 				      &lt;/child&gt;
+
+				      &lt;child&gt;
+					&lt;widget class=&quot;GtkLabel&quot; id=&quot;label23&quot;&gt;
+					  &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+					  &lt;property name=&quot;label&quot; translatable=&quot;yes&quot;&gt;ms&lt;/property&gt;
+					  &lt;property name=&quot;use_underline&quot;&gt;False&lt;/property&gt;
+					  &lt;property name=&quot;use_markup&quot;&gt;False&lt;/property&gt;
+					  &lt;property name=&quot;justify&quot;&gt;GTK_JUSTIFY_LEFT&lt;/property&gt;
+					  &lt;property name=&quot;wrap&quot;&gt;False&lt;/property&gt;
+					  &lt;property name=&quot;selectable&quot;&gt;False&lt;/property&gt;
+					  &lt;property name=&quot;xalign&quot;&gt;0.5&lt;/property&gt;
+					  &lt;property name=&quot;yalign&quot;&gt;0.5&lt;/property&gt;
+					  &lt;property name=&quot;xpad&quot;&gt;0&lt;/property&gt;
+					  &lt;property name=&quot;ypad&quot;&gt;0&lt;/property&gt;
+					  &lt;property name=&quot;ellipsize&quot;&gt;PANGO_ELLIPSIZE_NONE&lt;/property&gt;
+					  &lt;property name=&quot;width_chars&quot;&gt;-1&lt;/property&gt;
+					  &lt;property name=&quot;single_line_mode&quot;&gt;False&lt;/property&gt;
+					  &lt;property name=&quot;angle&quot;&gt;0&lt;/property&gt;
+					&lt;/widget&gt;
+					&lt;packing&gt;
+					  &lt;property name=&quot;padding&quot;&gt;0&lt;/property&gt;
+					  &lt;property name=&quot;expand&quot;&gt;False&lt;/property&gt;
+					  &lt;property name=&quot;fill&quot;&gt;False&lt;/property&gt;
+					&lt;/packing&gt;
+				      &lt;/child&gt;
 				    &lt;/widget&gt;
 				    &lt;packing&gt;
 				      &lt;property name=&quot;padding&quot;&gt;0&lt;/property&gt;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui	2008-09-20 14:54:05 UTC (rev 4382)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui	2008-09-20 15:21:58 UTC (rev 4383)
@@ -406,18 +406,31 @@
                 &lt;/item&gt;
                 &lt;item&gt;
                  &lt;widget class=&quot;QSpinBox&quot; name=&quot;spinBox_TimeValue&quot; &gt;
+                  &lt;property name=&quot;enabled&quot; &gt;
+                   &lt;bool&gt;false&lt;/bool&gt;
+                  &lt;/property&gt;
                   &lt;property name=&quot;sizePolicy&quot; &gt;
                    &lt;sizepolicy vsizetype=&quot;Fixed&quot; hsizetype=&quot;Minimum&quot; &gt;
                     &lt;horstretch&gt;0&lt;/horstretch&gt;
                     &lt;verstretch&gt;0&lt;/verstretch&gt;
                    &lt;/sizepolicy&gt;
                   &lt;/property&gt;
+                  &lt;property name=&quot;maximum&quot; &gt;
+                   &lt;number&gt;99999&lt;/number&gt;
+                  &lt;/property&gt;
                   &lt;property name=&quot;minimum&quot; &gt;
                    &lt;number&gt;-99999&lt;/number&gt;
                   &lt;/property&gt;
-                  &lt;property name=&quot;maximum&quot; &gt;
-                   &lt;number&gt;99999&lt;/number&gt;
+                 &lt;/widget&gt;
+                &lt;/item&gt;
+                &lt;item&gt;
+                 &lt;widget class=&quot;QLabel&quot; name=&quot;label_9&quot; &gt;
+                  &lt;property name=&quot;enabled&quot; &gt;
+                   &lt;bool&gt;false&lt;/bool&gt;
                   &lt;/property&gt;
+                  &lt;property name=&quot;text&quot; &gt;
+                   &lt;string&gt;ms&lt;/string&gt;
+                  &lt;/property&gt;
                  &lt;/widget&gt;
                 &lt;/item&gt;
                &lt;/layout&gt;
@@ -2515,5 +2528,38 @@
  &lt;resources&gt;
   &lt;include location=&quot;avidemux.qrc&quot; /&gt;
  &lt;/resources&gt;
- &lt;connections/&gt;
+ &lt;connections&gt;
+  &lt;connection&gt;
+   &lt;sender&gt;checkBox_TimeShift&lt;/sender&gt;
+   &lt;signal&gt;toggled(bool)&lt;/signal&gt;
+   &lt;receiver&gt;spinBox_TimeValue&lt;/receiver&gt;
+   &lt;slot&gt;setEnabled(bool)&lt;/slot&gt;
+   &lt;hints&gt;
+    &lt;hint type=&quot;sourcelabel&quot; &gt;
+     &lt;x&gt;59&lt;/x&gt;
+     &lt;y&gt;321&lt;/y&gt;
+    &lt;/hint&gt;
+    &lt;hint type=&quot;destinationlabel&quot; &gt;
+     &lt;x&gt;119&lt;/x&gt;
+     &lt;y&gt;321&lt;/y&gt;
+    &lt;/hint&gt;
+   &lt;/hints&gt;
+  &lt;/connection&gt;
+  &lt;connection&gt;
+   &lt;sender&gt;checkBox_TimeShift&lt;/sender&gt;
+   &lt;signal&gt;toggled(bool)&lt;/signal&gt;
+   &lt;receiver&gt;label_9&lt;/receiver&gt;
+   &lt;slot&gt;setEnabled(bool)&lt;/slot&gt;
+   &lt;hints&gt;
+    &lt;hint type=&quot;sourcelabel&quot; &gt;
+     &lt;x&gt;59&lt;/x&gt;
+     &lt;y&gt;321&lt;/y&gt;
+    &lt;/hint&gt;
+    &lt;hint type=&quot;destinationlabel&quot; &gt;
+     &lt;x&gt;160&lt;/x&gt;
+     &lt;y&gt;321&lt;/y&gt;
+    &lt;/hint&gt;
+   &lt;/hints&gt;
+  &lt;/connection&gt;
+ &lt;/connections&gt;
 &lt;/ui&gt;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp	2008-09-20 14:54:05 UTC (rev 4382)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp	2008-09-20 15:21:58 UTC (rev 4383)
@@ -14,45 +14,38 @@
 
 #include &quot;config.h&quot;
 #include &quot;ADM_default.h&quot;
-
-
 #include &quot;DIA_factory.h&quot;
 
 int DIA_getMPParams( uint32_t *pplevel, uint32_t *ppstrength,uint32_t *swap)
 {
-        
+	diaElemUInteger   postProcStrength(ppstrength,QT_TR_NOOP(&quot;_Filter strength:&quot;),0,5);
+	diaElemToggle     swapuv(swap, QT_TR_NOOP(&quot;_Swap U and V&quot;));
 
-#define PX(x) x
-        
-    diaElemUInteger   postProcStrength(PX(ppstrength),QT_TR_NOOP(&quot;_Filter strength:&quot;),0,5);
-    diaElemToggle     swapuv(PX(swap),QT_TR_NOOP(&quot;_Swap U and V&quot;));
-    
-    uint32_t hzd,vzd,dring;
-    
+	uint32_t hzd,vzd,dring;
+
 #define DOME(x,y) if(*pplevel &amp; x) y=1;else y=0;
-    
-    DOME(1,hzd);
-    DOME(2,vzd);
-    DOME(4,dring);
-    
-     diaElemToggle     fhzd(&amp;hzd,QT_TR_NOOP(&quot;_Horizontal deblocking&quot;));
-     diaElemToggle     fvzd(&amp;vzd,QT_TR_NOOP(&quot;_Vertical deblocking&quot;));
-     diaElemToggle     fdring(&amp;dring,QT_TR_NOOP(&quot;_Deringing&quot;));
-    
-    
-    
-      diaElem *elems[5]={&amp;postProcStrength,&amp;swapuv,&amp;fhzd
-                        ,&amp;fvzd,&amp;fdring};
 
-   if(diaFactoryRun(&quot;Postprocessing&quot;,5,elems))
-  {
+	DOME(1,hzd);
+	DOME(2,vzd);
+	DOME(4,dring);
+
+	diaElemToggle     fhzd(&amp;hzd,QT_TR_NOOP(&quot;_Horizontal deblocking&quot;));
+	diaElemToggle     fvzd(&amp;vzd,QT_TR_NOOP(&quot;_Vertical deblocking&quot;));
+	diaElemToggle     fdring(&amp;dring,QT_TR_NOOP(&quot;_Deringing&quot;));
+
+	diaElem *elems[5]={&amp;postProcStrength,&amp;swapuv,&amp;fhzd,&amp;fvzd,&amp;fdring};
+
+	if(diaFactoryRun(QT_TR_NOOP(&quot;Postprocessing&quot;),5,elems))
+	{
 #undef DOME
 #define DOME(x,y) if(y) *pplevel |=x;
-    *pplevel=0;
-    DOME(1,hzd);
-    DOME(2,vzd);
-    DOME(4,dring);
-    return 1;
-  }
-  return 0;	
+
+		*pplevel=0;
+		DOME(1,hzd);
+		DOME(2,vzd);
+		DOME(4,dring);
+
+		return 1;
+	}
+	return 0;	
 }

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.cpp	2008-09-20 14:54:05 UTC (rev 4382)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.cpp	2008-09-20 15:21:58 UTC (rev 4383)
@@ -580,7 +580,11 @@
 	printf(&quot;[x264] i_bframe_bias = %d\n&quot;, x264Param-&gt;i_bframe_bias);
 	printf(&quot;[x264] i_frame_reference = %d\n&quot;, x264Param-&gt;i_frame_reference);
 	printf(&quot;[x264] b_bframe_pyramid = %d\n&quot;, x264Param-&gt;b_bframe_pyramid);
+#if X264_BUILD &gt;= 63
+	printf(&quot;[x264] i_bframe_adaptive = %d\n&quot;, x264Param-&gt;i_bframe_adaptive);
+#else
 	printf(&quot;[x264] b_bframe_adaptive = %d\n&quot;, x264Param-&gt;b_bframe_adaptive);
+#endif
 	printf(&quot;[x264] i_keyint_max = %d\n&quot;, x264Param-&gt;i_keyint_max);
 	printf(&quot;[x264] i_keyint_min = %d\n&quot;, x264Param-&gt;i_keyint_min);
 	printf(&quot;[x264] i_scenecut_threshold = %d\n&quot;, x264Param-&gt;i_scenecut_threshold);

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/options.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/options.cpp	2008-09-20 14:54:05 UTC (rev 4382)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/options.cpp	2008-09-20 15:21:58 UTC (rev 4383)
@@ -333,14 +333,23 @@
 		_param.i_bframe = bFrames;
 }
 
-bool x264Options::getAdaptiveBFrameDecision(void)
+unsigned int x264Options::getAdaptiveBFrameDecision(void)
 {
+#if X264_BUILD &gt;= 63
+	return _param.i_bframe_adaptive;
+#else
 	return _param.b_bframe_adaptive;
+#endif
 }
 
-void x264Options::setAdaptiveBFrameDecision(bool adaptiveBframeDecision)
+void x264Options::setAdaptiveBFrameDecision(unsigned int adaptiveBframeDecision)
 {
-	_param.b_bframe_adaptive = adaptiveBframeDecision;
+	if (adaptiveBframeDecision &lt;= 2)
+#if X264_BUILD &gt;= 63
+		_param.i_bframe_adaptive = adaptiveBframeDecision;
+#else
+		_param.b_bframe_adaptive = adaptiveBframeDecision;
+#endif
 }
 
 int x264Options::getBFrameBias(void)
@@ -1207,7 +1216,7 @@
 	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)&quot;scenecutThreshold&quot;, number2String(xmlBuffer, bufferSize, getScenecutThreshold()));
 	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)&quot;preScenecutDetection&quot;, boolean2String(xmlBuffer, bufferSize, getPreScenecutDetection()));
 	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)&quot;bFrames&quot;, number2String(xmlBuffer, bufferSize, getBFrames()));
-	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)&quot;adaptiveBframeDecision&quot;, boolean2String(xmlBuffer, bufferSize, getAdaptiveBFrameDecision()));
+	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)&quot;adaptiveBframeDecision&quot;, number2String(xmlBuffer, bufferSize, getAdaptiveBFrameDecision()));
 	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)&quot;bFrameBias&quot;, number2String(xmlBuffer, bufferSize, getBFrameBias()));
 	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)&quot;bFrameReferences&quot;, number2String(xmlBuffer, bufferSize, getBFrameReferences()));
 	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)&quot;loopFilter&quot;, boolean2String(xmlBuffer, bufferSize, getLoopFilter()));
@@ -1547,7 +1556,7 @@
 			else if (strcmp((char*)xmlChild-&gt;name, &quot;bFrames&quot;) == 0)
 				setBFrames(atoi(content));
 			else if (strcmp((char*)xmlChild-&gt;name, &quot;adaptiveBframeDecision&quot;) == 0)
-				setAdaptiveBFrameDecision(string2Boolean(content));
+				setAdaptiveBFrameDecision(atoi(content));
 			else if (strcmp((char*)xmlChild-&gt;name, &quot;bFrameBias&quot;) == 0)
 				setBFrameBias(atoi(content));
 			else if (strcmp((char*)xmlChild-&gt;name, &quot;bFrameReferences&quot;) == 0)

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/options.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/options.h	2008-09-20 14:54:05 UTC (rev 4382)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/options.h	2008-09-20 15:21:58 UTC (rev 4383)
@@ -138,8 +138,8 @@
 	unsigned int getBFrames(void);
 	void setBFrames(unsigned int bFrames);
 
-	bool getAdaptiveBFrameDecision(void);
-	void setAdaptiveBFrameDecision(bool adaptiveBframeDecision);
+	unsigned int getAdaptiveBFrameDecision(void);
+	void setAdaptiveBFrameDecision(unsigned int adaptiveBframeDecision);
 
 	int getBFrameBias(void);
 	void setBFrameBias(int bFrameBias);

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Param.xsd
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Param.xsd	2008-09-20 14:54:05 UTC (rev 4382)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Param.xsd	2008-09-20 15:21:58 UTC (rev 4383)
@@ -185,7 +185,14 @@
                   &lt;/xs:restriction&gt;
                 &lt;/xs:simpleType&gt;
               &lt;/xs:element&gt;
-              &lt;xs:element name=&quot;adaptiveBframeDecision&quot; type=&quot;xs:boolean&quot;/&gt;
+              &lt;xs:element name=&quot;adaptiveBframeDecision&quot;&gt;
+                &lt;xs:simpleType&gt;
+                  &lt;xs:restriction base=&quot;xs:integer&quot;&gt;
+                    &lt;xs:minInclusive value=&quot;0&quot;/&gt;
+                    &lt;xs:maxInclusive value=&quot;2&quot;/&gt;
+                  &lt;/xs:restriction&gt;
+                &lt;/xs:simpleType&gt;
+              &lt;/xs:element&gt;
               &lt;xs:element name=&quot;bFrameBias&quot;&gt;
                 &lt;xs:simpleType&gt;
                   &lt;xs:restriction base=&quot;xs:integer&quot;&gt;

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/xml/PlayStation Portable.xml
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/xml/PlayStation Portable.xml	2008-09-20 14:54:05 UTC (rev 4382)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/xml/PlayStation Portable.xml	2008-09-20 15:21:58 UTC (rev 4383)
@@ -26,7 +26,7 @@
     &lt;scenecutThreshold&gt;0&lt;/scenecutThreshold&gt;
     &lt;preScenecutDetection&gt;false&lt;/preScenecutDetection&gt;
     &lt;bFrames&gt;3&lt;/bFrames&gt;
-    &lt;adaptiveBframeDecision&gt;true&lt;/adaptiveBframeDecision&gt;
+    &lt;adaptiveBframeDecision&gt;1&lt;/adaptiveBframeDecision&gt;
     &lt;bFrameBias&gt;0&lt;/bFrameBias&gt;
     &lt;bFrameReferences&gt;0&lt;/bFrameReferences&gt;
     &lt;loopFilter&gt;false&lt;/loopFilter&gt;

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/ASharp/qt4/Q_asharp.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/ASharp/qt4/Q_asharp.cpp	2008-09-20 14:54:05 UTC (rev 4382)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/ASharp/qt4/Q_asharp.cpp	2008-09-20 15:21:58 UTC (rev 4383)
@@ -45,7 +45,7 @@
 
 
         connect( ui.horizontalSlider,SIGNAL(valueChanged(int)),this,SLOT(sliderUpdate(int)));
-#define SPINNER(x) connect( ui.doubleSpinBox##x,SIGNAL(valueChanged(int)),this,SLOT(valueChanged(int))); 
+#define SPINNER(x) connect( ui.doubleSpinBox##x,SIGNAL(valueChanged(double)),this,SLOT(valueChanged(double))); 
           SPINNER(Treshold);
           SPINNER(Strength);
           SPINNER(Block);
@@ -77,6 +77,14 @@
   lock--;
 }
 
+void Ui_asharpWindow::valueChanged( double f )
+{
+  if(lock) return;
+  lock++;
+  myCrop-&gt;update();
+  lock--;
+}
+
 #define MYSPIN(x) w-&gt;doubleSpinBox##x
 //************************
 uint8_t flyASharp::upload(void)

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/ASharp/qt4/Q_asharp.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/ASharp/qt4/Q_asharp.h	2008-09-20 14:54:05 UTC (rev 4382)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/ASharp/qt4/Q_asharp.h	2008-09-20 15:21:58 UTC (rev 4383)
@@ -29,5 +29,6 @@
 private slots:
 	void sliderUpdate(int foo);
 	void valueChanged(int foo);
+	void valueChanged(double foo);
 };
 #endif	// Q_asharp_h


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001622.html">[Avidemux-svn-commit] r4382 -	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec
</A></li>
	<LI>Next message: <A HREF="001624.html">[Avidemux-svn-commit] r4384 - in	branches/avidemux_2.5_branch_gruntster/avidemux:	ADM_libraries/ADM_ffmpeg ADM_libraries/ADM_ffmpeg/ADM_lavcodec	ADM_libraries/ADM_ffmpeg/ADM_lavformat	ADM_libraries/ADM_utilities ADM_outputs ADM_outputs/oplug_avi	ADM_outputs/oplug_mp4
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1623">[ date ]</a>
              <a href="thread.html#1623">[ thread ]</a>
              <a href="subject.html#1623">[ subject ]</a>
              <a href="author.html#1623">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">More information about the Avidemux-svn-commit
mailing list</a><br>
</body></html>
