<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Avidemux-svn-commit] r4399 -	branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/avidemux-svn-commit/2008-September/index.html" >
   <LINK REL="made" HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r4399%20-%0A%09branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog&In-Reply-To=%3C200809222033.m8MKXkFt004332%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001638.html">
   <LINK REL="Next"  HREF="001640.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Avidemux-svn-commit] r4399 -	branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog</H1>
    <B>gruntster at mail.berlios.de</B> 
    <A HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r4399%20-%0A%09branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog&In-Reply-To=%3C200809222033.m8MKXkFt004332%40sheep.berlios.de%3E"
       TITLE="[Avidemux-svn-commit] r4399 -	branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog">gruntster at mail.berlios.de
       </A><BR>
    <I>Mon Sep 22 22:33:46 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001638.html">[Avidemux-svn-commit] r4398 -	branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory
</A></li>
        <LI>Next message: <A HREF="001640.html">[Avidemux-svn-commit] r4400 - in	branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces:	ADM_QT4/ADM_dialog ADM_QT4/ADM_dialogFactory ADM_commonUI
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1639">[ date ]</a>
              <a href="thread.html#1639">[ thread ]</a>
              <a href="subject.html#1639">[ subject ]</a>
              <a href="author.html#1639">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: gruntster
Date: 2008-09-22 22:33:41 +0200 (Mon, 22 Sep 2008)
New Revision: 4399

Modified:
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp
Log:
[Qt] add extra settings to x264 config dialog

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp	2008-09-22 19:59:30 UTC (rev 4398)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp	2008-09-22 20:33:41 UTC (rev 4399)
@@ -48,7 +48,7 @@
            diaElemBitrate bitrate(config,NULL);
            bitrate.setMaxQz(51);
            diaElem *main[]={&amp;bitrate};
-           diaElemTabs tabMain(QT_TR_NOOP(&quot;Main&quot;),1,main);
+           diaElemTabs tabMain(QT_TR_NOOP(&quot;Bitrate&quot;),1,main);
 
            
         /* Tab 2 Motion */
@@ -138,12 +138,12 @@
         /* Tab 4 Partition &amp; frame*/
          
              diaElemToggle    _8x8(PX(_8x8),QT_TR_NOOP(&quot;8x8 Transform&quot;));
-             diaElemToggle    _8x8P(PX(_8x8P),QT_TR_NOOP(&quot;8x8P Transform&quot;));
-             diaElemToggle    _8x8B(PX(_8x8B),QT_TR_NOOP(&quot;8x8B Transform&quot;));
-             diaElemToggle    _4x4(PX(_4x4),QT_TR_NOOP(&quot;_4x4 Transform&quot;));
-             diaElemToggle    _8x8I(PX(_8x8I),QT_TR_NOOP(&quot;_8x8I Transform&quot;));
-             diaElemToggle    _4x4I(PX(_4x4I),QT_TR_NOOP(&quot;_4x4I Transform&quot;));
-          diaElemFrame  frameTransform(QT_TR_NOOP(&quot;Transform&quot;));
+             diaElemToggle    _8x8P(PX(_8x8P),QT_TR_NOOP(&quot;8x8, 8x16 and 16x8 P-frame search&quot;));
+             diaElemToggle    _8x8B(PX(_8x8B),QT_TR_NOOP(&quot;8x8, 8x16 and 16x8 B-frame search&quot;));
+             diaElemToggle    _4x4(PX(_4x4),QT_TR_NOOP(&quot;4x4, 4x8 and 8x4 P-frame search&quot;));
+             diaElemToggle    _8x8I(PX(_8x8I),QT_TR_NOOP(&quot;8x8 Intra search&quot;));
+             diaElemToggle    _4x4I(PX(_4x4I),QT_TR_NOOP(&quot;4x4 Intra search&quot;));
+          diaElemFrame  frameTransform(QT_TR_NOOP(&quot;Partition Macroblocks&quot;));
            frameTransform.swallow(&amp;_8x8);
            frameTransform.swallow(&amp;_8x8P);
            frameTransform.swallow(&amp;_8x8B);
@@ -152,15 +152,76 @@
            frameTransform.swallow(&amp;_4x4I);
           
            diaElemUInteger  bframe(PX(MaxBFrame),QT_TR_NOOP(&quot;Max. Consecutive&quot;),0, 16);
-           diaElemFrame frameB(QT_TR_NOOP(&quot;B Frames&quot;));
+		   diaElemInteger  bias(PX(Bias),QT_TR_NOOP(&quot;Bias&quot;), -100, 100);
+		   diaElemToggle    reference(PX(BasReference),QT_TR_NOOP(&quot;Use as Reference&quot;));
+		   diaElemToggle    bidirMe(PX(BidirME),QT_TR_NOOP(&quot;Bidirectional ME&quot;));
+		   diaElemToggle    adaptativeDct(PX(Adaptative),QT_TR_NOOP(&quot;Adaptative DCT&quot;));
+		   diaElemToggle    weighted(PX(Weighted),QT_TR_NOOP(&quot;Weighted Biprediction&quot;));
+           diaMenuEntry directModeOptions[] = {
+                  {0,   QT_TR_NOOP(&quot;None&quot;)}
+                ,{1,    QT_TR_NOOP(&quot;Spatial&quot;)}
+                ,{2,    QT_TR_NOOP(&quot;Temporal&quot;)}
+				,{3,    QT_TR_NOOP(&quot;Auto&quot;)}};
+           
+		   diaElemMenu directMode(PX(DirectMode),QT_TR_NOOP(&quot;Direct Mode&quot;),4,directModeOptions);
+           diaElemFrame frameB(QT_TR_NOOP(&quot;B-Frames&quot;));
            frameB.swallow(&amp;bframe);
+		   frameB.swallow(&amp;bias);
+		   frameB.swallow(&amp;reference);
+		   frameB.swallow(&amp;bidirMe);
+		   frameB.swallow(&amp;adaptativeDct);
+		   frameB.swallow(&amp;weighted);
+		   frameB.swallow(&amp;directMode);
            
-            diaElem *bfr[]={&amp;frameTransform,&amp;frameB};
-          diaElemTabs tabTransform(QT_TR_NOOP(&quot;Transform&quot;),2,bfr);
+		   diaElem *bfr[]={&amp;frameTransform,&amp;frameB};
+		   diaElemTabs tabTransform(QT_TR_NOOP(&quot;Partitions &amp;&amp; Frames&quot;),2,bfr);
+
+		  // Rate control tab
+		  diaElemUInteger  keyframeBoost(PX(KeyframeBoost),QT_TR_NOOP(&quot;Keyframe Boost (%)&quot;), 0, 100);
+		  diaElemUInteger  bframeReduction(PX(BframeReduction),QT_TR_NOOP(&quot;B-frame Reduction (%)&quot;), 0, 100);
+		  diaElemUInteger  bitrateVar(PX(BitrateVariability),QT_TR_NOOP(&quot;Bitrate Variability (%)&quot;), 0, 100);
+		  diaElemFrame frameBitrate(QT_TR_NOOP(&quot;Bitrate&quot;));
+
+		  frameBitrate.swallow(&amp;keyframeBoost);
+		  frameBitrate.swallow(&amp;bframeReduction);
+		  frameBitrate.swallow(&amp;bitrateVar);
+
+		  diaElemUInteger  minQp(PX(MinQp),QT_TR_NOOP(&quot;Min QP&quot;), 10, 51);
+		  diaElemUInteger  maxQp(PX(MaxQp),QT_TR_NOOP(&quot;Max QP&quot;), 10, 51);
+		  diaElemUInteger  maxQpStep(PX(QpStep),QT_TR_NOOP(&quot;Max QP Step&quot;), 0, 10);
+		  diaElemFrame frameQuantLimits(QT_TR_NOOP(&quot;Quantisation Limits&quot;));
+
+		  frameQuantLimits.swallow(&amp;minQp);
+		  frameQuantLimits.swallow(&amp;maxQp);
+		  frameQuantLimits.swallow(&amp;maxQpStep);
+
+		  diaElemUInteger  sceneCut(PX(SceneCut),QT_TR_NOOP(&quot;Scene Cut Threshold&quot;), 0, 100);
+		  diaElemUInteger  minIdr(PX(MinIdr),QT_TR_NOOP(&quot;Min IDR Frame Interval&quot;), 0, 100);
+		  diaElemUInteger  maxIdr(PX(MaxIdr),QT_TR_NOOP(&quot;Max IDR Frame Interval&quot;), 1, 1000);
+		  diaElemFrame frameMoreRate(QT_TR_NOOP(&quot;More Rate Settings&quot;));
+
+		  frameMoreRate.swallow(&amp;sceneCut);
+		  frameMoreRate.swallow(&amp;minIdr);
+		  frameMoreRate.swallow(&amp;maxIdr);
+
+		  diaElem *rateControl[]={&amp;frameBitrate,&amp;frameQuantLimits,&amp;frameMoreRate};
+		  diaElemTabs tabRateControl(QT_TR_NOOP(&quot;Rate Control&quot;),3,rateControl);
+
+		  diaElemUInteger  maxLocalBitrate(PX(vbv_max_bitrate),QT_TR_NOOP(&quot;Maximum Local Bitrate&quot;), 0, 99999);
+		  diaElemUInteger  vbvBuffer(PX(vbv_buffer_size),QT_TR_NOOP(&quot;VBV Buffer Size&quot;), 0, 99999);
+		  diaElemUInteger  initVbvBuffer(PX(vbv_buffer_init),QT_TR_NOOP(&quot;Initial VBV Buffer (%)&quot;), 0, 100);
+		  diaElemFrame frameVbv(QT_TR_NOOP(&quot;Video Buffer Verifier&quot;));
+
+		  frameVbv.swallow(&amp;maxLocalBitrate);
+		  frameVbv.swallow(&amp;vbvBuffer);
+		  frameVbv.swallow(&amp;initVbvBuffer);
+
+		  diaElem *vbv[]={&amp;frameVbv};
+		  diaElemTabs tabVbv(QT_TR_NOOP(&quot;VBV&quot;),1,vbv);
            
           /* End of tabs */
-        diaElemTabs *tabs[4]={&amp;tabMain,&amp;tabMotion,&amp;tabMisc,&amp;tabTransform};
-        if( diaFactoryRunTabs(QT_TR_NOOP(&quot;x264 Configuration&quot;),4,tabs))
+        diaElemTabs *tabs[6]={&amp;tabMain,&amp;tabMotion,&amp;tabMisc,&amp;tabTransform,&amp;tabRateControl,&amp;tabVbv};
+        if( diaFactoryRunTabs(QT_TR_NOOP(&quot;x264 Configuration&quot;),6,tabs))
 	{
            memcpy(config-&gt;extraSettings,&amp;localParam,sizeof(localParam));
            return 1;


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001638.html">[Avidemux-svn-commit] r4398 -	branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory
</A></li>
	<LI>Next message: <A HREF="001640.html">[Avidemux-svn-commit] r4400 - in	branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces:	ADM_QT4/ADM_dialog ADM_QT4/ADM_dialogFactory ADM_commonUI
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1639">[ date ]</a>
              <a href="thread.html#1639">[ thread ]</a>
              <a href="subject.html#1639">[ subject ]</a>
              <a href="author.html#1639">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">More information about the Avidemux-svn-commit
mailing list</a><br>
</body></html>
