<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Avidemux-svn-commit] r6157 - in branches/avidemux_2.6_branch_mean:	avidemux/common/ADM_audioFilter/src	avidemux/common/ADM_audiocodec avidemux/common/ADM_editor	avidemux/common/ADM_script2/include	avidemux/common/ADM_script2/src avidemux/qt4/ADM_UIs/src	avidemux_plugins/ADM_demuxers/Matroska	avidemux_plugins/ADM_demuxers/Mp4	avidemux_plugins/ADM_demuxers/MpegPS	avidemux_plugins/ADM_demuxers/MpegTS	avidemux_plugins/ADM_demuxers/OpenDml
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/avidemux-svn-commit/2010-May/index.html" >
   <LINK REL="made" HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r6157%20-%20in%20branches/avidemux_2.6_branch_mean%3A%0A%09avidemux/common/ADM_audioFilter/src%0A%09avidemux/common/ADM_audiocodec%20avidemux/common/ADM_editor%0A%09avidemux/common/ADM_script2/include%0A%09avidemux/common/ADM_script2/src%20avidemux/qt4/ADM_UIs/src%0A%09avidemux_plugins/ADM_demuxers/Matroska%0A%09avidemux_plugins/ADM_demuxers/Mp4%0A%09avidemux_plugins/ADM_demuxers/MpegPS%0A%09avidemux_plugins/ADM_demuxers/MpegTS%0A%09avidemux_plugins/ADM_demuxers/OpenDml&In-Reply-To=%3C201005040536.o445aYP7022034%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003359.html">
   <LINK REL="Next"  HREF="003361.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Avidemux-svn-commit] r6157 - in branches/avidemux_2.6_branch_mean:	avidemux/common/ADM_audioFilter/src	avidemux/common/ADM_audiocodec avidemux/common/ADM_editor	avidemux/common/ADM_script2/include	avidemux/common/ADM_script2/src avidemux/qt4/ADM_UIs/src	avidemux_plugins/ADM_demuxers/Matroska	avidemux_plugins/ADM_demuxers/Mp4	avidemux_plugins/ADM_demuxers/MpegPS	avidemux_plugins/ADM_demuxers/MpegTS	avidemux_plugins/ADM_demuxers/OpenDml</H1>
    <B>mean at BerliOS</B> 
    <A HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r6157%20-%20in%20branches/avidemux_2.6_branch_mean%3A%0A%09avidemux/common/ADM_audioFilter/src%0A%09avidemux/common/ADM_audiocodec%20avidemux/common/ADM_editor%0A%09avidemux/common/ADM_script2/include%0A%09avidemux/common/ADM_script2/src%20avidemux/qt4/ADM_UIs/src%0A%09avidemux_plugins/ADM_demuxers/Matroska%0A%09avidemux_plugins/ADM_demuxers/Mp4%0A%09avidemux_plugins/ADM_demuxers/MpegPS%0A%09avidemux_plugins/ADM_demuxers/MpegTS%0A%09avidemux_plugins/ADM_demuxers/OpenDml&In-Reply-To=%3C201005040536.o445aYP7022034%40sheep.berlios.de%3E"
       TITLE="[Avidemux-svn-commit] r6157 - in branches/avidemux_2.6_branch_mean:	avidemux/common/ADM_audioFilter/src	avidemux/common/ADM_audiocodec avidemux/common/ADM_editor	avidemux/common/ADM_script2/include	avidemux/common/ADM_script2/src avidemux/qt4/ADM_UIs/src	avidemux_plugins/ADM_demuxers/Matroska	avidemux_plugins/ADM_demuxers/Mp4	avidemux_plugins/ADM_demuxers/MpegPS	avidemux_plugins/ADM_demuxers/MpegTS	avidemux_plugins/ADM_demuxers/OpenDml">mean at mail.berlios.de
       </A><BR>
    <I>Tue May  4 07:36:34 CEST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="003359.html">[Avidemux-svn-commit] r6156 - in branches/avidemux_2.6_branch_mean:	avidemux/common/ADM_audiocodec avidemux_core/ADM_coreDemuxer/include	avidemux_plugins/ADM_audioDecoders/ADM_ad_faad	avidemux_plugins/ADM_audioDecoders/ADM_ad_mad/ADM_libMad	avidemux_plugins/ADM_demuxers/Flv avidemux_plugins/ADM_demuxers/Mp4	avidemux_plugins/ADM_videoEncoder/x264
</A></li>
        <LI>Next message: <A HREF="003361.html">[Avidemux-svn-commit] r6158 - in branches/avidemux_2.6_branch_mean:	avidemux_core/ADM_coreMuxer/include	avidemux_core/ADM_coreVideoFilter/include	avidemux_plugins/ADM_demuxers/Asf avidemux_plugins/ADM_demuxers/Flv	avidemux_plugins/ADM_demuxers/Matroska	avidemux_plugins/ADM_demuxers/MpegPS	avidemux_plugins/ADM_demuxers/MpegTS	avidemux_plugins/ADM_demuxers/OpenDml	avidemux_plugins/ADM_videoFilters6/verticalFlip
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3360">[ date ]</a>
              <a href="thread.html#3360">[ thread ]</a>
              <a href="subject.html#3360">[ subject ]</a>
              <a href="author.html#3360">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: mean
Date: 2010-05-04 07:36:32 +0200 (Tue, 04 May 2010)
New Revision: 6157

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audiofilter_mixer.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_pluginLoad.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_jsDebug.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_jsTestFactory.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_jsIf_js.c
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_jsIf_js.idl
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_jsTestFactory_js.c
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_jsTestFactory_js.idl
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/toolkit.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Matroska/ADM_mkv.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Matroska/ADM_mkvEntries.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Matroska/ADM_mkvIndexer.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Mp4/ADM_mp4Indexer.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_ps.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psIndex.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psPlugin.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psReadIndex.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_ts.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsPlugin.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/OpenDml/ADM_odml_odml.cpp
Log:
[clang] Remove more warnings

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audiofilter_mixer.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audiofilter_mixer.cpp	2010-05-04 05:36:29 UTC (rev 6156)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audiofilter_mixer.cpp	2010-05-04 05:36:32 UTC (rev 6157)
@@ -93,6 +93,8 @@
 			outputChannelMapping[1] = ADM_CH_FRONT_RIGHT;
 //			DolbyInit();
 		break;
+        default:
+                break;
 	}
 
     d*=_wavHeader.channels;
@@ -163,6 +165,8 @@
 				case ADM_CH_SIDE_RIGHT:
 					out[1]  += *in;
 				break;
+                default:
+                    break;
 			}
 			in++;
 		}
@@ -208,6 +212,8 @@
 					out[1]  += *in * 0.707;
 					out[2]  += *in * 0.707;
 				break;
+                default:
+                    break;
 			}
 			in++;
 		}
@@ -244,6 +250,8 @@
 					out[1]  += *in * 0.595;
 					out[2]  += *in * 0.595;
 				break;
+                default:
+                    break;
 			}
 			in++;
 		}
@@ -289,6 +297,8 @@
 					out[1]  += *in * 0.707;
 					out[2]  += *in * 0.707;
 				break;
+                default:
+                    break;
 			}
 			in++;
 		}
@@ -340,6 +350,8 @@
 					out[1]  += *in * 0.707;
 					out[3]  += *in * 0.707;
 				break;
+                default:
+                    break;
 			}
 			in++;
 		}
@@ -391,6 +403,8 @@
 					out[1]  += *in * 0.707;
 					out[3]  += *in * 0.707;
 				break;
+                default:
+                    break;
 			}
 			in++;
 		}
@@ -438,6 +452,8 @@
 					out[1]  += *in * 0.707;
 					out[3]  += *in * 0.707;
 				break;
+                default:
+                    break;
 			}
 			in++;
 		}
@@ -482,6 +498,8 @@
 					out[0]  += DolbyShiftLeft(*in) * 0.707 * 0.707;
 					out[1]  += DolbyShiftRight(*in) * 0.707 * 0.707;
 				break;
+                default:
+                    break;
 			}
 			in++;
 		}
@@ -532,6 +550,8 @@
 					out[0]  += DolbyShiftLeft(*in) * 0.5774 * 0.707;
 					out[1]  += DolbyShiftRight(*in) * 0.8165 * 0.707;
 				break;
+                default:
+                    break;
 			}
 			in++;
 		}

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_pluginLoad.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_pluginLoad.cpp	2010-05-04 05:36:29 UTC (rev 6156)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_pluginLoad.cpp	2010-05-04 05:36:32 UTC (rev 6157)
@@ -196,5 +196,6 @@
         ADM_audioPlugins[i]=NULL;
     }
     ADM_audioPlugins.clear();
+    return true;
 }   
 //EOF

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.cpp	2010-05-04 05:36:29 UTC (rev 6156)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.cpp	2010-05-04 05:36:32 UTC (rev 6157)
@@ -183,7 +183,6 @@
      snprintf(str,512,QT_TR_NOOP(&quot;Attempt to open %s failed!&quot;), name);
       str[512] = '\0';
       GUI_Error_HIG(str,NULL);
-      video._aviheader;
       video._aviheader=NULL;
       return false;
    }

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_jsDebug.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_jsDebug.h	2010-05-04 05:36:29 UTC (rev 6156)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_jsDebug.h	2010-05-04 05:36:32 UTC (rev 6157)
@@ -16,14 +16,17 @@
 
 #ifndef ADMJS_DEBUG_H
 #define ADMJS_DEBUG_H
+#ifdef __cplusplus
 extern &quot;C&quot;
 {
+#endif
 void jsPopupError(const char *s);
 void jsPopupInfo(const char *s);
 void jsPrint(const char *s);
 void jsPrint2(const char *s);
 void jsHelp(const char *s);
+#ifdef __cplusplus
 };
+#endif
 
-
 #endif
\ No newline at end of file

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_jsTestFactory.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_jsTestFactory.h	2010-05-04 05:36:29 UTC (rev 6156)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_jsTestFactory.h	2010-05-04 05:36:32 UTC (rev 6157)
@@ -16,8 +16,10 @@
 
 #ifndef ADMJS_FACTORY_H
 #define ADMJS_FACTORY_H
+#ifdef __cplusplus
 extern &quot;C&quot;
 {
+#endif
 int jsTestCrash(void);
 int jsTestAssert(void);
 int jsTestFacNotch(void);
@@ -40,7 +42,9 @@
 int jsTestFacFloat(void);
 int jsTestFacInt(void);
 int jsTestFacEncoding(void);
+#ifdef __cplusplus
 };
+#endif
 
 
 #endif

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_jsIf_js.c
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_jsIf_js.c	2010-05-04 05:36:29 UTC (rev 6156)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_jsIf_js.c	2010-05-04 05:36:32 UTC (rev 6157)
@@ -12,8 +12,20 @@
 please refer to the software package which it is part of.
 
 */
+
+#include &quot;stdio.h&quot;
+#include &quot;ADM_jsAvidemux.h&quot;
+#include &quot;ADM_jsDebug.h&quot;
+
+#ifdef HAVE_ALLOCA_H
+#include &lt;alloca.h&gt;
+static size_t jj_alloca_limit = 0;
+#endif
+#include &lt;stdlib.h&gt;
 #include &lt;string.h&gt;
 #include &lt;wchar.h&gt;
+#ifdef HAVE_ALLOCA_H
+#endif
 #include &lt;jsapi.h&gt;
 #ifndef JS_THREADSAFE
 #if JS_VERSION &lt;= 170
@@ -30,34 +42,35 @@
 #ifndef JS_FS_END
 #define JS_FS_END {NULL, NULL, 0, 0, 0}
 #endif
+
 static JSBool
 jjadmPopupError(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
 {
-    JSObject *var2;
-    char *var7;
+    JSObject * var2;
     int var6;
+    char * var7;
     int var8;
     jsval var9;
-    JSString *var10;
-    jsval var81;
+    JSString * var10;
+    jsval var86;
     size_t var11;
     size_t var12;
     int var14;
-    jschar *var13;
-    jsval var82;
+    jschar * var15;
+    jsval var87;
     JSBool var1;
     var2 = NULL;
+    var6 = 0;
     var7 = NULL;
-    var6 = 0;
     var8 = 0;
     var9 = JSVAL_NULL;
     var10 = NULL;
-    var81 = JSVAL_NULL;
+    var86 = JSVAL_NULL;
     var11 = 0;
     var12 = 0;
     var14 = 0;
-    var13 = NULL;
-    var82 = JSVAL_NULL;
+    var15 = NULL;
+    var87 = JSVAL_NULL;
     var1 = JS_FALSE;
     var2 = obj;
     var6 = argc;
@@ -69,23 +82,32 @@
     if (!var10) {
         goto do_return;
     }
-    var81 = STRING_TO_JSVAL(var10);
-    argv[argc+0] = var81;
+    var86 = STRING_TO_JSVAL(var10);
+    argv[argc+0] = var86;
     var11 = JS_GetStringLength(var10);
     var12 = 1;
     var12 += var11;
-    var7 = JS_malloc(cx, var12);
-    if (!var7) {
-        goto do_return;
+#ifdef HAVE_ALLOCA
+    if (var12 &lt; jj_alloca_limit) {
+        var7 = alloca(var12);
+    } else {
+#endif
+        var7 = malloc(var12);
+        if (!var7) {
+            goto do_return;
+        } else {
+            var14 = 1;
+        }
+#ifdef HAVE_ALLOCA
     }
-    var14 = 1;
-    var13 = JS_GetStringChars(var10);
-    var82 = STRING_TO_JSVAL(var10);
-    argv[argc+1] = var82;
+#endif
+    var15 = JS_GetStringChars(var10);
+    var87 = STRING_TO_JSVAL(var10);
+    argv[argc+1] = var87;
     {
         size_t i;
         for (i = 0; i &lt; var11; ++i) {
-            var7[i] = wctob(var13[i]);
+            var7[i] = wctob(var15[i]);
         }
         var7[var11] = '\0';
     }
@@ -94,7 +116,7 @@
     var1 = JS_TRUE;
     do_return:
     if (var14) {
-        JS_free(cx, var7);
+        free(var7);
         var7 = NULL;
         var14 = 0;
     }
@@ -103,315 +125,351 @@
 static JSBool
 jjadmpPopupInfo(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
 {
-    JSObject *var16;
-    char *var21;
-    int var20;
-    int var22;
-    jsval var23;
-    JSString *var24;
-    jsval var83;
-    size_t var25;
+    JSObject * var17;
+    int var21;
+    char * var22;
+    int var23;
+    jsval var24;
+    JSString * var25;
+    jsval var88;
     size_t var26;
-    int var28;
-    jschar *var27;
-    jsval var84;
-    JSBool var15;
-    var16 = NULL;
-    var21 = NULL;
-    var20 = 0;
-    var22 = 0;
-    var23 = JSVAL_NULL;
-    var24 = NULL;
-    var83 = JSVAL_NULL;
-    var25 = 0;
+    size_t var27;
+    int var29;
+    jschar * var30;
+    jsval var89;
+    JSBool var16;
+    var17 = NULL;
+    var21 = 0;
+    var22 = NULL;
+    var23 = 0;
+    var24 = JSVAL_NULL;
+    var25 = NULL;
+    var88 = JSVAL_NULL;
     var26 = 0;
-    var28 = 0;
-    var27 = NULL;
-    var84 = JSVAL_NULL;
-    var15 = JS_FALSE;
-    var16 = obj;
-    var20 = argc;
-    var22 = 0;
-    var22 = var22 &lt; var20;
-    if (var22) {
-    var23 = argv[0];
-    var24 = JS_ValueToString(cx, var23);
-    if (!var24) {
+    var27 = 0;
+    var29 = 0;
+    var30 = NULL;
+    var89 = JSVAL_NULL;
+    var16 = JS_FALSE;
+    var17 = obj;
+    var21 = argc;
+    var23 = 0;
+    var23 = var23 &lt; var21;
+    if (var23) {
+    var24 = argv[0];
+    var25 = JS_ValueToString(cx, var24);
+    if (!var25) {
         goto do_return;
     }
-    var83 = STRING_TO_JSVAL(var24);
-    argv[argc+0] = var83;
-    var25 = JS_GetStringLength(var24);
-    var26 = 1;
-    var26 += var25;
-    var21 = JS_malloc(cx, var26);
-    if (!var21) {
-        goto do_return;
+    var88 = STRING_TO_JSVAL(var25);
+    argv[argc+0] = var88;
+    var26 = JS_GetStringLength(var25);
+    var27 = 1;
+    var27 += var26;
+#ifdef HAVE_ALLOCA
+    if (var27 &lt; jj_alloca_limit) {
+        var22 = alloca(var27);
+    } else {
+#endif
+        var22 = malloc(var27);
+        if (!var22) {
+            goto do_return;
+        } else {
+            var29 = 1;
+        }
+#ifdef HAVE_ALLOCA
     }
-    var28 = 1;
-    var27 = JS_GetStringChars(var24);
-    var84 = STRING_TO_JSVAL(var24);
-    argv[argc+1] = var84;
+#endif
+    var30 = JS_GetStringChars(var25);
+    var89 = STRING_TO_JSVAL(var25);
+    argv[argc+1] = var89;
     {
         size_t i;
-        for (i = 0; i &lt; var25; ++i) {
-            var21[i] = wctob(var27[i]);
+        for (i = 0; i &lt; var26; ++i) {
+            var22[i] = wctob(var30[i]);
         }
-        var21[var25] = '\0';
+        var22[var26] = '\0';
     }
     }
-    jsPopupInfo(var21);
-    var15 = JS_TRUE;
+    jsPopupInfo(var22);
+    var16 = JS_TRUE;
     do_return:
-    if (var28) {
-        JS_free(cx, var21);
-        var21 = NULL;
-        var28 = 0;
+    if (var29) {
+        free(var22);
+        var22 = NULL;
+        var29 = 0;
     }
-    return var15;
+    return var16;
 }
 static JSBool
 jjadmPrint(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
 {
-    JSObject *var30;
-    char *var35;
-    int var34;
+    JSObject * var32;
     int var36;
-    jsval var37;
-    JSString *var38;
-    jsval var85;
-    size_t var39;
-    size_t var40;
-    int var42;
-    jschar *var41;
-    jsval var86;
-    JSBool var29;
-    var30 = NULL;
-    var35 = NULL;
-    var34 = 0;
+    char * var37;
+    int var38;
+    jsval var39;
+    JSString * var40;
+    jsval var90;
+    size_t var41;
+    size_t var42;
+    int var44;
+    jschar * var45;
+    jsval var91;
+    JSBool var31;
+    var32 = NULL;
     var36 = 0;
-    var37 = JSVAL_NULL;
-    var38 = NULL;
-    var85 = JSVAL_NULL;
-    var39 = 0;
-    var40 = 0;
+    var37 = NULL;
+    var38 = 0;
+    var39 = JSVAL_NULL;
+    var40 = NULL;
+    var90 = JSVAL_NULL;
+    var41 = 0;
     var42 = 0;
-    var41 = NULL;
-    var86 = JSVAL_NULL;
-    var29 = JS_FALSE;
-    var30 = obj;
-    var34 = argc;
-    var36 = 0;
-    var36 = var36 &lt; var34;
-    if (var36) {
-    var37 = argv[0];
-    var38 = JS_ValueToString(cx, var37);
-    if (!var38) {
+    var44 = 0;
+    var45 = NULL;
+    var91 = JSVAL_NULL;
+    var31 = JS_FALSE;
+    var32 = obj;
+    var36 = argc;
+    var38 = 0;
+    var38 = var38 &lt; var36;
+    if (var38) {
+    var39 = argv[0];
+    var40 = JS_ValueToString(cx, var39);
+    if (!var40) {
         goto do_return;
     }
-    var85 = STRING_TO_JSVAL(var38);
-    argv[argc+0] = var85;
-    var39 = JS_GetStringLength(var38);
-    var40 = 1;
-    var40 += var39;
-    var35 = JS_malloc(cx, var40);
-    if (!var35) {
-        goto do_return;
+    var90 = STRING_TO_JSVAL(var40);
+    argv[argc+0] = var90;
+    var41 = JS_GetStringLength(var40);
+    var42 = 1;
+    var42 += var41;
+#ifdef HAVE_ALLOCA
+    if (var42 &lt; jj_alloca_limit) {
+        var37 = alloca(var42);
+    } else {
+#endif
+        var37 = malloc(var42);
+        if (!var37) {
+            goto do_return;
+        } else {
+            var44 = 1;
+        }
+#ifdef HAVE_ALLOCA
     }
-    var42 = 1;
-    var41 = JS_GetStringChars(var38);
-    var86 = STRING_TO_JSVAL(var38);
-    argv[argc+1] = var86;
+#endif
+    var45 = JS_GetStringChars(var40);
+    var91 = STRING_TO_JSVAL(var40);
+    argv[argc+1] = var91;
     {
         size_t i;
-        for (i = 0; i &lt; var39; ++i) {
-            var35[i] = wctob(var41[i]);
+        for (i = 0; i &lt; var41; ++i) {
+            var37[i] = wctob(var45[i]);
         }
-        var35[var39] = '\0';
+        var37[var41] = '\0';
     }
     }
-    jsPrint(var35);
-    var29 = JS_TRUE;
+    jsPrint(var37);
+    var31 = JS_TRUE;
     do_return:
-    if (var42) {
-        JS_free(cx, var35);
-        var35 = NULL;
-        var42 = 0;
+    if (var44) {
+        free(var37);
+        var37 = NULL;
+        var44 = 0;
     }
-    return var29;
+    return var31;
 }
 static JSBool
 jjprint(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
 {
-    JSObject *var44;
-    char *var49;
-    int var48;
-    int var50;
-    jsval var51;
-    JSString *var52;
-    jsval var87;
-    size_t var53;
-    size_t var54;
-    int var56;
-    jschar *var55;
-    jsval var88;
-    JSBool var43;
-    var44 = NULL;
-    var49 = NULL;
-    var48 = 0;
-    var50 = 0;
-    var51 = JSVAL_NULL;
+    JSObject * var47;
+    int var51;
+    char * var52;
+    int var53;
+    jsval var54;
+    JSString * var55;
+    jsval var92;
+    size_t var56;
+    size_t var57;
+    int var59;
+    jschar * var60;
+    jsval var93;
+    JSBool var46;
+    var47 = NULL;
+    var51 = 0;
     var52 = NULL;
-    var87 = JSVAL_NULL;
     var53 = 0;
-    var54 = 0;
+    var54 = JSVAL_NULL;
+    var55 = NULL;
+    var92 = JSVAL_NULL;
     var56 = 0;
-    var55 = NULL;
-    var88 = JSVAL_NULL;
-    var43 = JS_FALSE;
-    var44 = obj;
-    var48 = argc;
-    var50 = 0;
-    var50 = var50 &lt; var48;
-    if (var50) {
-    var51 = argv[0];
-    var52 = JS_ValueToString(cx, var51);
-    if (!var52) {
+    var57 = 0;
+    var59 = 0;
+    var60 = NULL;
+    var93 = JSVAL_NULL;
+    var46 = JS_FALSE;
+    var47 = obj;
+    var51 = argc;
+    var53 = 0;
+    var53 = var53 &lt; var51;
+    if (var53) {
+    var54 = argv[0];
+    var55 = JS_ValueToString(cx, var54);
+    if (!var55) {
         goto do_return;
     }
-    var87 = STRING_TO_JSVAL(var52);
-    argv[argc+0] = var87;
-    var53 = JS_GetStringLength(var52);
-    var54 = 1;
-    var54 += var53;
-    var49 = JS_malloc(cx, var54);
-    if (!var49) {
-        goto do_return;
+    var92 = STRING_TO_JSVAL(var55);
+    argv[argc+0] = var92;
+    var56 = JS_GetStringLength(var55);
+    var57 = 1;
+    var57 += var56;
+#ifdef HAVE_ALLOCA
+    if (var57 &lt; jj_alloca_limit) {
+        var52 = alloca(var57);
+    } else {
+#endif
+        var52 = malloc(var57);
+        if (!var52) {
+            goto do_return;
+        } else {
+            var59 = 1;
+        }
+#ifdef HAVE_ALLOCA
     }
-    var56 = 1;
-    var55 = JS_GetStringChars(var52);
-    var88 = STRING_TO_JSVAL(var52);
-    argv[argc+1] = var88;
+#endif
+    var60 = JS_GetStringChars(var55);
+    var93 = STRING_TO_JSVAL(var55);
+    argv[argc+1] = var93;
     {
         size_t i;
-        for (i = 0; i &lt; var53; ++i) {
-            var49[i] = wctob(var55[i]);
+        for (i = 0; i &lt; var56; ++i) {
+            var52[i] = wctob(var60[i]);
         }
-        var49[var53] = '\0';
+        var52[var56] = '\0';
     }
     }
-    jsPrint2(var49);
-    var43 = JS_TRUE;
+    jsPrint2(var52);
+    var46 = JS_TRUE;
     do_return:
-    if (var56) {
-        JS_free(cx, var49);
-        var49 = NULL;
-        var56 = 0;
+    if (var59) {
+        free(var52);
+        var52 = NULL;
+        var59 = 0;
     }
-    return var43;
+    return var46;
 }
 static JSBool
 jjhelp(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
 {
-    JSObject *var58;
-    char *var63;
-    int var62;
-    int var64;
-    jsval var65;
-    JSString *var66;
-    jsval var89;
-    size_t var67;
-    size_t var68;
-    int var70;
-    jschar *var69;
-    jsval var90;
-    JSBool var57;
-    var58 = NULL;
-    var63 = NULL;
-    var62 = 0;
-    var64 = 0;
-    var65 = JSVAL_NULL;
-    var66 = NULL;
-    var89 = JSVAL_NULL;
-    var67 = 0;
+    JSObject * var62;
+    int var66;
+    char * var67;
+    int var68;
+    jsval var69;
+    JSString * var70;
+    jsval var94;
+    size_t var71;
+    size_t var72;
+    int var74;
+    jschar * var75;
+    jsval var95;
+    JSBool var61;
+    var62 = NULL;
+    var66 = 0;
+    var67 = NULL;
     var68 = 0;
-    var70 = 0;
-    var69 = NULL;
-    var90 = JSVAL_NULL;
-    var57 = JS_FALSE;
-    var58 = obj;
-    var62 = argc;
-    var64 = 0;
-    var64 = var64 &lt; var62;
-    if (var64) {
-    var65 = argv[0];
-    var66 = JS_ValueToString(cx, var65);
-    if (!var66) {
+    var69 = JSVAL_NULL;
+    var70 = NULL;
+    var94 = JSVAL_NULL;
+    var71 = 0;
+    var72 = 0;
+    var74 = 0;
+    var75 = NULL;
+    var95 = JSVAL_NULL;
+    var61 = JS_FALSE;
+    var62 = obj;
+    var66 = argc;
+    var68 = 0;
+    var68 = var68 &lt; var66;
+    if (var68) {
+    var69 = argv[0];
+    var70 = JS_ValueToString(cx, var69);
+    if (!var70) {
         goto do_return;
     }
-    var89 = STRING_TO_JSVAL(var66);
-    argv[argc+0] = var89;
-    var67 = JS_GetStringLength(var66);
-    var68 = 1;
-    var68 += var67;
-    var63 = JS_malloc(cx, var68);
-    if (!var63) {
-        goto do_return;
+    var94 = STRING_TO_JSVAL(var70);
+    argv[argc+0] = var94;
+    var71 = JS_GetStringLength(var70);
+    var72 = 1;
+    var72 += var71;
+#ifdef HAVE_ALLOCA
+    if (var72 &lt; jj_alloca_limit) {
+        var67 = alloca(var72);
+    } else {
+#endif
+        var67 = malloc(var72);
+        if (!var67) {
+            goto do_return;
+        } else {
+            var74 = 1;
+        }
+#ifdef HAVE_ALLOCA
     }
-    var70 = 1;
-    var69 = JS_GetStringChars(var66);
-    var90 = STRING_TO_JSVAL(var66);
-    argv[argc+1] = var90;
+#endif
+    var75 = JS_GetStringChars(var70);
+    var95 = STRING_TO_JSVAL(var70);
+    argv[argc+1] = var95;
     {
         size_t i;
-        for (i = 0; i &lt; var67; ++i) {
-            var63[i] = wctob(var69[i]);
+        for (i = 0; i &lt; var71; ++i) {
+            var67[i] = wctob(var75[i]);
         }
-        var63[var67] = '\0';
+        var67[var71] = '\0';
     }
     }
-    jsHelp(var63);
-    var57 = JS_TRUE;
+    jsHelp(var67);
+    var61 = JS_TRUE;
     do_return:
-    if (var70) {
-        JS_free(cx, var63);
-        var63 = NULL;
-        var70 = 0;
+    if (var74) {
+        free(var67);
+        var67 = NULL;
+        var74 = 0;
     }
-    return var57;
+    return var61;
 }
 static JSBool
 jjsetSuccess(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
 {
-    JSObject *var72;
-    int var77;
-    int var76;
-    int var78;
-    jsval var79;
-    int32 var80;
-    JSBool var71;
-    var72 = NULL;
-    var77 = 0;
-    var76 = 0;
-    var78 = 0;
-    var79 = JSVAL_NULL;
-    var80 = 0;
-    var71 = JS_FALSE;
-    var72 = obj;
-    var76 = argc;
-    var78 = 0;
-    var78 = var78 &lt; var76;
-    if (var78) {
-    var79 = argv[0];
-    if (JS_ValueToInt32(cx, var79, &amp;var80) != JS_TRUE) {
+    JSObject * var77;
+    int var81;
+    int var82;
+    int var83;
+    jsval var84;
+    int32 var85;
+    JSBool var76;
+    var77 = NULL;
+    var81 = 0;
+    var82 = 0;
+    var83 = 0;
+    var84 = JSVAL_NULL;
+    var85 = 0;
+    var76 = JS_FALSE;
+    var77 = obj;
+    var81 = argc;
+    var83 = 0;
+    var83 = var83 &lt; var81;
+    if (var83) {
+    var84 = argv[0];
+    if (JS_ValueToInt32(cx, var84, &amp;var85) != JS_TRUE) {
         goto do_return;
     }
-    var77 = (int)var80;
+    var82 = (int)var85;
     }
-    jsSetSuccess(var77);
-    var71 = JS_TRUE;
+    jsSetSuccess(var82);
+    var76 = JS_TRUE;
     do_return:
-    return var71;
+    return var76;
 }
 static JSPropertySpec jj_static_ps[] = {
     {NULL, 0, 0, NULL, NULL}

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_jsIf_js.idl
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_jsIf_js.idl	2010-05-04 05:36:29 UTC (rev 6156)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_jsIf_js.idl	2010-05-04 05:36:32 UTC (rev 6157)
@@ -1,3 +1,9 @@
+%{
+#include &quot;stdio.h&quot;
+#include &quot;ADM_jsAvidemux.h&quot;
+#include &quot;ADM_jsDebug.h&quot;
+%}
+
 /*
 ###############################################################
        return JS function     CM Function  params

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_jsTestFactory_js.c
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_jsTestFactory_js.c	2010-05-04 05:36:29 UTC (rev 6156)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_jsTestFactory_js.c	2010-05-04 05:36:32 UTC (rev 6157)
@@ -12,8 +12,20 @@
 please refer to the software package which it is part of.
 
 */
+
+#include &quot;stdio.h&quot;
+#include &quot;ADM_jsAvidemux.h&quot;
+#include &quot;ADM_jsTestFactory.h&quot;
+
+#ifdef HAVE_ALLOCA_H
+#include &lt;alloca.h&gt;
+static size_t jj_alloca_limit = 0;
+#endif
+#include &lt;stdlib.h&gt;
 #include &lt;string.h&gt;
 #include &lt;wchar.h&gt;
+#ifdef HAVE_ALLOCA_H
+#endif
 #include &lt;jsapi.h&gt;
 #ifndef JS_THREADSAFE
 #if JS_VERSION &lt;= 170
@@ -30,10 +42,11 @@
 #ifndef JS_FS_END
 #define JS_FS_END {NULL, NULL, 0, 0, 0}
 #endif
+
 static JSBool
 jjadmTestFacInt(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
 {
-    JSObject *var2;
+    JSObject * var2;
     int var3;
     int var6;
     jsval var7;
@@ -60,7 +73,7 @@
 static JSBool
 jjadmTestFacFloat(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
 {
-    JSObject *var9;
+    JSObject * var9;
     int var10;
     int var13;
     jsval var14;
@@ -87,7 +100,7 @@
 static JSBool
 jjadmTestFacToggle(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
 {
-    JSObject *var16;
+    JSObject * var16;
     int var17;
     int var20;
     jsval var21;
@@ -114,7 +127,7 @@
 static JSBool
 jjadmTestFacMenu(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
 {
-    JSObject *var23;
+    JSObject * var23;
     int var24;
     int var27;
     jsval var28;
@@ -141,7 +154,7 @@
 static JSBool
 jjadmTestFacFile(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
 {
-    JSObject *var30;
+    JSObject * var30;
     int var31;
     int var34;
     jsval var35;
@@ -168,7 +181,7 @@
 static JSBool
 jjadmTestFacBitrate(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
 {
-    JSObject *var37;
+    JSObject * var37;
     int var38;
     int var41;
     jsval var42;
@@ -195,7 +208,7 @@
 static JSBool
 jjadmTestFacBar(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
 {
-    JSObject *var44;
+    JSObject * var44;
     int var45;
     int var48;
     jsval var49;
@@ -222,7 +235,7 @@
 static JSBool
 jjadmTestFacRoText(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
 {
-    JSObject *var51;
+    JSObject * var51;
     int var52;
     int var55;
     jsval var56;
@@ -249,7 +262,7 @@
 static JSBool
 jjadmTestFacText(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
 {
-    JSObject *var58;
+    JSObject * var58;
     int var59;
     int var62;
     jsval var63;
@@ -276,7 +289,7 @@
 static JSBool
 jjadmTestFacTab(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
 {
-    JSObject *var65;
+    JSObject * var65;
     int var66;
     int var69;
     jsval var70;
@@ -303,7 +316,7 @@
 static JSBool
 jjadmTestFacFrame(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
 {
-    JSObject *var72;
+    JSObject * var72;
     int var73;
     int var76;
     jsval var77;
@@ -330,7 +343,7 @@
 static JSBool
 jjadmTestFacHex(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
 {
-    JSObject *var79;
+    JSObject * var79;
     int var80;
     int var83;
     jsval var84;
@@ -357,7 +370,7 @@
 static JSBool
 jjadmTestFacDirSel(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
 {
-    JSObject *var86;
+    JSObject * var86;
     int var87;
     int var90;
     jsval var91;
@@ -384,7 +397,7 @@
 static JSBool
 jjadmTestFacButton(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
 {
-    JSObject *var93;
+    JSObject * var93;
     int var94;
     int var97;
     jsval var98;
@@ -411,7 +424,7 @@
 static JSBool
 jjadmTestFacMatrix(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
 {
-    JSObject *var100;
+    JSObject * var100;
     int var101;
     int var104;
     jsval var105;
@@ -438,7 +451,7 @@
 static JSBool
 jjadmTestFacNotch(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
 {
-    JSObject *var107;
+    JSObject * var107;
     int var108;
     int var111;
     jsval var112;
@@ -465,7 +478,7 @@
 static JSBool
 jjadmTestFacThreadCount(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
 {
-    JSObject *var114;
+    JSObject * var114;
     int var115;
     int var118;
     jsval var119;
@@ -492,7 +505,7 @@
 static JSBool
 jjadmTestFacSlider(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
 {
-    JSObject *var121;
+    JSObject * var121;
     int var122;
     int var125;
     jsval var126;
@@ -519,7 +532,7 @@
 static JSBool
 jjadmTestEncoding(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
 {
-    JSObject *var128;
+    JSObject * var128;
     int var129;
     int var132;
     jsval var133;
@@ -546,7 +559,7 @@
 static JSBool
 jjadmTestCrash(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
 {
-    JSObject *var135;
+    JSObject * var135;
     int var139;
     JSBool var134;
     var135 = NULL;
@@ -561,7 +574,7 @@
 static JSBool
 jjadmTestAssert(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
 {
-    JSObject *var141;
+    JSObject * var141;
     int var145;
     JSBool var140;
     var141 = NULL;

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_jsTestFactory_js.idl
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_jsTestFactory_js.idl	2010-05-04 05:36:29 UTC (rev 6156)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_jsTestFactory_js.idl	2010-05-04 05:36:32 UTC (rev 6157)
@@ -1,3 +1,8 @@
+%{
+#include &quot;stdio.h&quot;
+#include &quot;ADM_jsAvidemux.h&quot;
+#include &quot;ADM_jsTestFactory.h&quot;
+%}
 /*
 ###############################################################
        return JS function     C Function  params

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/toolkit.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/toolkit.cpp	2010-05-04 05:36:29 UTC (rev 6156)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/src/toolkit.cpp	2010-05-04 05:36:32 UTC (rev 6157)
@@ -35,6 +35,7 @@
 
 	*w = (uint32_t)qrect.width();
 	*h = (uint32_t)qrect.height();
+    return 1;
 }
 
 // Calculate the zoom ratio required to fit the whole image on the screen.

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Matroska/ADM_mkv.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Matroska/ADM_mkv.cpp	2010-05-04 05:36:29 UTC (rev 6156)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Matroska/ADM_mkv.cpp	2010-05-04 05:36:32 UTC (rev 6157)
@@ -358,10 +358,11 @@
                   break;
         case ADM_MKV_TYPE_STRING:
         {
-                  char string[len+1];
+                  char *string=new char[len+1];
                   string[0]=0;
                   father-&gt;readString(string,len);
                   printf(&quot;%s:&lt;%s&gt;\n&quot;,ss,string);
+                  delete [] string;
                   break;
         }
         default:

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Matroska/ADM_mkvEntries.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Matroska/ADM_mkvEntries.cpp	2010-05-04 05:36:29 UTC (rev 6156)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Matroska/ADM_mkvEntries.cpp	2010-05-04 05:36:32 UTC (rev 6157)
@@ -230,10 +230,11 @@
                   break;
         case MKV_CODEC_ID:
             {
-            uint8_t codec[len+1];
+            uint8_t *codec=new uint8_t[len+1];
                   father.readBin(codec,len);
                   codec[len]=0;
                   entry-&gt;fcc=ADM_mkvCodecToFourcc((char *)codec);
+                  delete [] codec;
 
             }
                   break;

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Matroska/ADM_mkvIndexer.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Matroska/ADM_mkvIndexer.cpp	2010-05-04 05:36:29 UTC (rev 6156)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Matroska/ADM_mkvIndexer.cpp	2010-05-04 05:36:32 UTC (rev 6157)
@@ -171,7 +171,7 @@
   {
     if( isMpeg4Compatible(_videostream.fccHandler))
     {
-        uint8_t buffer[size];
+        uint8_t *buffer=(uint8_t *)alloca(size*sizeof(uint8_t));
         
             parser-&gt;readBin(buffer,size-3);
             // Search the frame type...
@@ -185,7 +185,7 @@
     }else
     if(isH264Compatible(_videostream.fccHandler))
     {
-            uint8_t buffer[size];
+                uint8_t *buffer=(uint8_t *)alloca(size);
                 uint32_t flags=AVI_KEY_FRAME;
                 parser-&gt;readBin(buffer,size-3);
                 extractH264FrameType(2,buffer,size-3,&amp;flags); // Nal size is not used in that case

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Mp4/ADM_mp4Indexer.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Mp4/ADM_mp4Indexer.cpp	2010-05-04 05:36:29 UTC (rev 6156)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Mp4/ADM_mp4Indexer.cpp	2010-05-04 05:36:32 UTC (rev 6157)
@@ -71,7 +71,7 @@
           printf(&quot;All the same size: %u (total size %u bytes)\n&quot;,info-&gt;SzIndentical,totalBytes);
               //
               // Each chunk contains N samples=N bytes
-              int samplePerChunk[info-&gt;nbCo];
+              int *samplePerChunk=(int *)alloca(info-&gt;nbCo*sizeof(int));
               memset(samplePerChunk,0,info-&gt;nbCo*sizeof(int));
               int total=0;
               for( i=0;i&lt;info-&gt;nbSc;i++)

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_ps.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_ps.cpp	2010-05-04 05:36:29 UTC (rev 6156)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_ps.cpp	2010-05-04 05:36:32 UTC (rev 6157)
@@ -31,7 +31,7 @@
 
 uint8_t psHeader::open(const char *name)
 {
-    char idxName[strlen(name)+4];
+    char *idxName=(char *)alloca(strlen(name)+4);
     bool r=false;
     FP_TYPE appendType=FP_DONT_APPEND;
     uint32_t append;

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psIndex.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psIndex.cpp	2010-05-04 05:36:29 UTC (rev 6156)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psIndex.cpp	2010-05-04 05:36:32 UTC (rev 6157)
@@ -155,7 +155,7 @@
 dmxPacketInfo info;
     memset(&amp;video,0,sizeof(video));
     memset(&amp;data,0,sizeof(data));
-    char indexName[strlen(file)+5];
+    char *indexName=(char *)alloca(strlen(file)+5);
     sprintf(indexName,&quot;%s.idx2&quot;,file);
     index=qfopen(indexName,&quot;wt&quot;);
     if(!index)

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psPlugin.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psPlugin.cpp	2010-05-04 05:36:29 UTC (rev 6156)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psPlugin.cpp	2010-05-04 05:36:32 UTC (rev 6157)
@@ -33,7 +33,7 @@
 
 extern &quot;C&quot;  uint32_t         probe(uint32_t magic, const char *fileName)
 {
-char index[strlen(fileName)+4];
+char *index=(char *)alloca(strlen(fileName)+4);
 int count=0;
     if(!detectPs(fileName))
     {

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psReadIndex.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psReadIndex.cpp	2010-05-04 05:36:29 UTC (rev 6156)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psReadIndex.cpp	2010-05-04 05:36:32 UTC (rev 6157)
@@ -120,7 +120,7 @@
                     printf(&quot;[psDemux]  instead of : (%c %x %x):\n&quot;,*cur,*(cur-1),*cur);
                     break;
                 }
-                *cur++;
+                cur++;
                 next=strstr(start,&quot; &quot;);
                 ADM_assert(1==sscanf(cur,&quot;%&quot;LX,&amp;len));
                 

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_ts.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_ts.cpp	2010-05-04 05:36:29 UTC (rev 6156)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_ts.cpp	2010-05-04 05:36:32 UTC (rev 6157)
@@ -31,7 +31,7 @@
 
 uint8_t tsHeader::open(const char *name)
 {
-    char idxName[strlen(name)+4];
+    char *idxName=(char *)alloca(strlen(name)+4);
     bool r=false;
     FP_TYPE appendType=FP_DONT_APPEND;
     uint32_t append;
@@ -62,7 +62,7 @@
     if(append) appendType=FP_APPEND;
     if(!parser.open(name,&amp;appendType))
     {
-        printf(&quot;[tsDemux] Cannot open root file\n&quot;,name);
+        printf(&quot;[tsDemux] Cannot open root file (%s)\n&quot;,name);
         goto abt;
     }
     if(!readVideo(&amp;index)) 
@@ -166,6 +166,7 @@
             }
         }
     }
+    return true;
 }
 /**
     \fn getAudioInfo
@@ -239,6 +240,7 @@
         delete tsPacket;
         tsPacket=NULL;
     }
+    return 1;
 }
 /**
     \fn tsHeader

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsPlugin.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsPlugin.cpp	2010-05-04 05:36:29 UTC (rev 6156)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsPlugin.cpp	2010-05-04 05:36:32 UTC (rev 6157)
@@ -34,7 +34,7 @@
 
 extern &quot;C&quot;  uint32_t         probe(uint32_t magic, const char *fileName)
 {
-char index[strlen(fileName)+4];
+char *index=(char *)alloca(strlen(fileName)+4);
 int count=0;
     printf(&quot;[TS Demuxer] Probing...\n&quot;);
     if( !detectTs(fileName))

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/OpenDml/ADM_odml_odml.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/OpenDml/ADM_odml_odml.cpp	2010-05-04 05:36:29 UTC (rev 6156)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/OpenDml/ADM_odml_odml.cpp	2010-05-04 05:36:32 UTC (rev 6157)
@@ -195,7 +195,7 @@
 
 
 
-	OPENDML_ENTRY superEntries[masterIndex.nbEntryInUse];
+	OPENDML_ENTRY *superEntries=(OPENDML_ENTRY *)alloca(masterIndex.nbEntryInUse*sizeof(OPENDML_ENTRY));
 	printf(&quot;[AVI]We have %&quot;LU&quot; indeces\n&quot;,masterIndex.nbEntryInUse);
         if(!readSuperEntries(superEntries,masterIndex.nbEntryInUse,_fd)) //if(1!=fread(superEntries,sizeof(OPENDML_ENTRY)*masterIndex.nbEntryInUse,1,_fd))
 	{


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003359.html">[Avidemux-svn-commit] r6156 - in branches/avidemux_2.6_branch_mean:	avidemux/common/ADM_audiocodec avidemux_core/ADM_coreDemuxer/include	avidemux_plugins/ADM_audioDecoders/ADM_ad_faad	avidemux_plugins/ADM_audioDecoders/ADM_ad_mad/ADM_libMad	avidemux_plugins/ADM_demuxers/Flv avidemux_plugins/ADM_demuxers/Mp4	avidemux_plugins/ADM_videoEncoder/x264
</A></li>
	<LI>Next message: <A HREF="003361.html">[Avidemux-svn-commit] r6158 - in branches/avidemux_2.6_branch_mean:	avidemux_core/ADM_coreMuxer/include	avidemux_core/ADM_coreVideoFilter/include	avidemux_plugins/ADM_demuxers/Asf avidemux_plugins/ADM_demuxers/Flv	avidemux_plugins/ADM_demuxers/Matroska	avidemux_plugins/ADM_demuxers/MpegPS	avidemux_plugins/ADM_demuxers/MpegTS	avidemux_plugins/ADM_demuxers/OpenDml	avidemux_plugins/ADM_videoFilters6/verticalFlip
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3360">[ date ]</a>
              <a href="thread.html#3360">[ thread ]</a>
              <a href="subject.html#3360">[ subject ]</a>
              <a href="author.html#3360">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">More information about the Avidemux-svn-commit
mailing list</a><br>
</body></html>
