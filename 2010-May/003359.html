<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Avidemux-svn-commit] r6156 - in branches/avidemux_2.6_branch_mean:	avidemux/common/ADM_audiocodec avidemux_core/ADM_coreDemuxer/include	avidemux_plugins/ADM_audioDecoders/ADM_ad_faad	avidemux_plugins/ADM_audioDecoders/ADM_ad_mad/ADM_libMad	avidemux_plugins/ADM_demuxers/Flv avidemux_plugins/ADM_demuxers/Mp4	avidemux_plugins/ADM_videoEncoder/x264
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/avidemux-svn-commit/2010-May/index.html" >
   <LINK REL="made" HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r6156%20-%20in%20branches/avidemux_2.6_branch_mean%3A%0A%09avidemux/common/ADM_audiocodec%20avidemux_core/ADM_coreDemuxer/include%0A%09avidemux_plugins/ADM_audioDecoders/ADM_ad_faad%0A%09avidemux_plugins/ADM_audioDecoders/ADM_ad_mad/ADM_libMad%0A%09avidemux_plugins/ADM_demuxers/Flv%20avidemux_plugins/ADM_demuxers/Mp4%0A%09avidemux_plugins/ADM_videoEncoder/x264&In-Reply-To=%3C201005040536.o445aTeH022024%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003358.html">
   <LINK REL="Next"  HREF="003360.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Avidemux-svn-commit] r6156 - in branches/avidemux_2.6_branch_mean:	avidemux/common/ADM_audiocodec avidemux_core/ADM_coreDemuxer/include	avidemux_plugins/ADM_audioDecoders/ADM_ad_faad	avidemux_plugins/ADM_audioDecoders/ADM_ad_mad/ADM_libMad	avidemux_plugins/ADM_demuxers/Flv avidemux_plugins/ADM_demuxers/Mp4	avidemux_plugins/ADM_videoEncoder/x264</H1>
    <B>mean at BerliOS</B> 
    <A HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r6156%20-%20in%20branches/avidemux_2.6_branch_mean%3A%0A%09avidemux/common/ADM_audiocodec%20avidemux_core/ADM_coreDemuxer/include%0A%09avidemux_plugins/ADM_audioDecoders/ADM_ad_faad%0A%09avidemux_plugins/ADM_audioDecoders/ADM_ad_mad/ADM_libMad%0A%09avidemux_plugins/ADM_demuxers/Flv%20avidemux_plugins/ADM_demuxers/Mp4%0A%09avidemux_plugins/ADM_videoEncoder/x264&In-Reply-To=%3C201005040536.o445aTeH022024%40sheep.berlios.de%3E"
       TITLE="[Avidemux-svn-commit] r6156 - in branches/avidemux_2.6_branch_mean:	avidemux/common/ADM_audiocodec avidemux_core/ADM_coreDemuxer/include	avidemux_plugins/ADM_audioDecoders/ADM_ad_faad	avidemux_plugins/ADM_audioDecoders/ADM_ad_mad/ADM_libMad	avidemux_plugins/ADM_demuxers/Flv avidemux_plugins/ADM_demuxers/Mp4	avidemux_plugins/ADM_videoEncoder/x264">mean at mail.berlios.de
       </A><BR>
    <I>Tue May  4 07:36:29 CEST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="003358.html">[Avidemux-svn-commit] r6155 - in branches/avidemux_2.6_branch_mean:	avidemux/common avidemux/common/ADM_audioFilter/src	avidemux/common/ADM_commonUI avidemux/common/ADM_editor	avidemux/common/ADM_render avidemux/common/ADM_script2/src	avidemux/common/ADM_videoFilter2/src avidemux/qt4/ADM_UIs/src	avidemux/qt4/ADM_userInterfaces/ADM_dialog	avidemux/qt4/ADM_userInterfaces/ADM_gui	avidemux_core/ADM_coreAudioFilter/include	avidemux_core/ADM_coreVideoFilter/include
</A></li>
        <LI>Next message: <A HREF="003360.html">[Avidemux-svn-commit] r6157 - in branches/avidemux_2.6_branch_mean:	avidemux/common/ADM_audioFilter/src	avidemux/common/ADM_audiocodec avidemux/common/ADM_editor	avidemux/common/ADM_script2/include	avidemux/common/ADM_script2/src avidemux/qt4/ADM_UIs/src	avidemux_plugins/ADM_demuxers/Matroska	avidemux_plugins/ADM_demuxers/Mp4	avidemux_plugins/ADM_demuxers/MpegPS	avidemux_plugins/ADM_demuxers/MpegTS	avidemux_plugins/ADM_demuxers/OpenDml
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3359">[ date ]</a>
              <a href="thread.html#3359">[ thread ]</a>
              <a href="subject.html#3359">[ subject ]</a>
              <a href="author.html#3359">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: mean
Date: 2010-05-04 07:36:29 +0200 (Tue, 04 May 2010)
New Revision: 6156

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_ad_plugin.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxer/include/ADM_demuxerInternal.h
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_faad/ADM_ad_faad.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_mad/ADM_libMad/timer.c
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Flv/ADM_flv.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Mp4/ADM_mp4Analyzer.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Mp4/ADM_mp4Indexer.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/x264/ADM_x264.cpp
Log:
[clang] Warning fix (plugins)

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_ad_plugin.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_ad_plugin.h	2010-05-04 05:36:24 UTC (rev 6155)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audiocodec/ADM_ad_plugin.h	2010-05-04 05:36:29 UTC (rev 6156)
@@ -44,6 +44,7 @@
 	{ \
 		Class *a=(Class *)codec;\
 		delete a;\
+        return NULL;\
 	}\
 	int supportedFormat(uint32_t audioFourcc) \
 	{ \

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxer/include/ADM_demuxerInternal.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxer/include/ADM_demuxerInternal.h	2010-05-04 05:36:24 UTC (rev 6155)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxer/include/ADM_demuxerInternal.h	2010-05-04 05:36:29 UTC (rev 6156)
@@ -66,7 +66,7 @@
 extern &quot;C&quot; {\
 vidHeader   *create(void){ return new Class; } \
 void         destroy(vidHeader *h){ Class *z=(Class *)h;delete z;} \
-uint8_t      getVersion(uint32_t *major,uint32_t *minor,uint32_t *patch) {*major=maj;*minor=mn;*patch=pat;} \
+uint8_t      getVersion(uint32_t *major,uint32_t *minor,uint32_t *patch) {*major=maj;*minor=mn;*patch=pat;return 1;} \
 uint32_t     getApiVersion(void) {return ADM_DEMUXER_API_VERSION;} \
 const char  *getName(void) {return name;} \
 const char  *getDescriptor(void) {return desc;} \

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_faad/ADM_ad_faad.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_faad/ADM_ad_faad.cpp	2010-05-04 05:36:24 UTC (rev 6155)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_faad/ADM_ad_faad.cpp	2010-05-04 05:36:29 UTC (rev 6156)
@@ -79,10 +79,10 @@
 		{
 			_inited = 1;
 			faacDecInit2(_instance, d,l, &amp;srate,&amp;chan);
-			printf(&quot;[FAAD]Found :%&quot;LU&quot; rate %&quot;LU&quot; channels\n&quot;,srate,chan);
+			printf(&quot;[FAAD]Found :%&quot;LU&quot; rate %&quot;LU&quot; channels\n&quot;,(uint32_t)srate,(uint32_t)chan);
                         if(srate!=info-&gt;frequency)
                         {
-                            printf(&quot;[FAAD]Frequency mismatch!!! %d to %&quot;LU&quot; (SBR ?)\n&quot;,info-&gt;frequency,srate);
+                            printf(&quot;[FAAD]Frequency mismatch!!! %d to %&quot;LU&quot; (SBR ?)\n&quot;,info-&gt;frequency,(uint32_t)srate);
                             info-&gt;frequency=srate;
                         }
                         if(chan!=info-&gt;channels) // Ask for stereo !
@@ -137,11 +137,13 @@
 uint8_t ADM_faad:: beginDecompress( void )
 {
 	_inbuffer=0;
+    return 1;
 }
 uint8_t ADM_faad::endDecompress( void )
 {
 	_inbuffer=0;
 	 faacDecPostSeekReset(_instance, 0);
+     return 1;
 }
 uint8_t ADM_faad::run(uint8_t *inptr, uint32_t nbIn, float *outptr, uint32_t *nbOut)
 {
@@ -165,7 +167,7 @@
 		{
 			// Try
 			printf(&quot;Trying with %d bytes\n&quot;,nbIn);
-			res=faacDecInit(_instance,inptr,nbIn,&amp;srate,&amp;chan);
+			res=(long int)faacDecInit(_instance,inptr,nbIn,&amp;srate,&amp;chan);
 			if(res&gt;=0)
 			{
 				printf(&quot;Faad Inited : rate:%&quot;LU&quot; chan:%&quot;LU&quot; off:%ld\n&quot;,srate,chan,res);

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_mad/ADM_libMad/timer.c
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_mad/ADM_libMad/timer.c	2010-05-04 05:36:24 UTC (rev 6155)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_mad/ADM_libMad/timer.c	2010-05-04 05:36:29 UTC (rev 6156)
@@ -32,7 +32,7 @@
 # endif
 
 # include &quot;timer.h&quot;
-
+#include &lt;stdlib.h&gt; // MEANX
 mad_timer_t const mad_timer_zero = { 0, 0 };
 
 /*

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Flv/ADM_flv.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Flv/ADM_flv.cpp	2010-05-04 05:36:24 UTC (rev 6155)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Flv/ADM_flv.cpp	2010-05-04 05:36:29 UTC (rev 6156)
@@ -515,7 +515,7 @@
   
       uint32_t pos=ftello(_fd);
       uint32_t len=*remaining,width,height;
-      uint8_t buffer[len];
+      uint8_t *buffer=new uint8_t[len];
       read(len,buffer);
       fseeko(_fd,pos,SEEK_SET);
        /* Decode header, from h263dec.c / lavcodec*/
@@ -524,6 +524,7 @@
          _video_bih.biHeight=_mainaviheader.dwHeight=height;
          _video_bih.biWidth=_mainaviheader.dwWidth=width;
       }
+      delete [] buffer;
     }
    return 1;
 }

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Mp4/ADM_mp4Analyzer.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Mp4/ADM_mp4Analyzer.cpp	2010-05-04 05:36:24 UTC (rev 6155)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Mp4/ADM_mp4Analyzer.cpp	2010-05-04 05:36:29 UTC (rev 6156)
@@ -1,5 +1,4 @@
 /***************************************************************************
-/*
 
     copyright            : (C) 2007 by mean
     email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
@@ -276,10 +275,11 @@
                         son.read32();
                         son.read32();
                         s=son.read();
-                        char str[s+1];
+                        char *str=new char[s+1];
                         son.readPayload((uint8_t *)str,s);
                         str[s]=0;
                         printf(&quot;Url : &lt;%s&gt;\n&quot;,str);
+                        delete [] str;
                       }
                       break;
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Mp4/ADM_mp4Indexer.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Mp4/ADM_mp4Indexer.cpp	2010-05-04 05:36:24 UTC (rev 6155)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Mp4/ADM_mp4Indexer.cpp	2010-05-04 05:36:29 UTC (rev 6156)
@@ -1,5 +1,4 @@
 /***************************************************************************
-/*
     
     copyright            : (C) 2007 by mean
     email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/x264/ADM_x264.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/x264/ADM_x264.cpp	2010-05-04 05:36:24 UTC (rev 6155)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoEncoder/x264/ADM_x264.cpp	2010-05-04 05:36:29 UTC (rev 6156)
@@ -275,7 +275,7 @@
               // Put our SEI front...
               // first a temp location...
               firstIdr=false;
-              uint8_t tmpBuffer[size];
+              uint8_t *tmpBuffer=new uint8_t[size];
               memcpy(tmpBuffer,out-&gt;data,size);
               uint8_t *dout=out-&gt;data;
               // Put back out SEI and add Size
@@ -287,6 +287,7 @@
               memcpy(dout+4+seiUserDataLen,tmpBuffer,size);
               size+=4+seiUserDataLen;
               out-&gt;len = size; // update total size
+              delete [] tmpBuffer;
           }
           break;
         case X264_TYPE_I:


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003358.html">[Avidemux-svn-commit] r6155 - in branches/avidemux_2.6_branch_mean:	avidemux/common avidemux/common/ADM_audioFilter/src	avidemux/common/ADM_commonUI avidemux/common/ADM_editor	avidemux/common/ADM_render avidemux/common/ADM_script2/src	avidemux/common/ADM_videoFilter2/src avidemux/qt4/ADM_UIs/src	avidemux/qt4/ADM_userInterfaces/ADM_dialog	avidemux/qt4/ADM_userInterfaces/ADM_gui	avidemux_core/ADM_coreAudioFilter/include	avidemux_core/ADM_coreVideoFilter/include
</A></li>
	<LI>Next message: <A HREF="003360.html">[Avidemux-svn-commit] r6157 - in branches/avidemux_2.6_branch_mean:	avidemux/common/ADM_audioFilter/src	avidemux/common/ADM_audiocodec avidemux/common/ADM_editor	avidemux/common/ADM_script2/include	avidemux/common/ADM_script2/src avidemux/qt4/ADM_UIs/src	avidemux_plugins/ADM_demuxers/Matroska	avidemux_plugins/ADM_demuxers/Mp4	avidemux_plugins/ADM_demuxers/MpegPS	avidemux_plugins/ADM_demuxers/MpegTS	avidemux_plugins/ADM_demuxers/OpenDml
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3359">[ date ]</a>
              <a href="thread.html#3359">[ thread ]</a>
              <a href="subject.html#3359">[ subject ]</a>
              <a href="author.html#3359">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">More information about the Avidemux-svn-commit
mailing list</a><br>
</body></html>
