<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Avidemux-svn-commit] r6208 - in	branches/avidemux_2.6_branch_mean/avidemux: . common	common/ADM_editor common/ADM_script2	common/ADM_script2/include common/ADM_script2/js	common/ADM_script2/js/src_dialogFactory common/ADM_script2/py	common/ADM_script2/py/include common/ADM_script2/src	common/ADM_script2/src_dialogFactory	qt4/ADM_userInterfaces/ADM_shell
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/avidemux-svn-commit/2010-May/index.html" >
   <LINK REL="made" HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r6208%20-%20in%0A%09branches/avidemux_2.6_branch_mean/avidemux%3A%20.%20common%0A%09common/ADM_editor%20common/ADM_script2%0A%09common/ADM_script2/include%20common/ADM_script2/js%0A%09common/ADM_script2/js/src_dialogFactory%20common/ADM_script2/py%0A%09common/ADM_script2/py/include%20common/ADM_script2/src%0A%09common/ADM_script2/src_dialogFactory%0A%09qt4/ADM_userInterfaces/ADM_shell&In-Reply-To=%3C201005201522.o4KFMwGa014359%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003407.html">
   <LINK REL="Next"  HREF="003409.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Avidemux-svn-commit] r6208 - in	branches/avidemux_2.6_branch_mean/avidemux: . common	common/ADM_editor common/ADM_script2	common/ADM_script2/include common/ADM_script2/js	common/ADM_script2/js/src_dialogFactory common/ADM_script2/py	common/ADM_script2/py/include common/ADM_script2/src	common/ADM_script2/src_dialogFactory	qt4/ADM_userInterfaces/ADM_shell</H1>
    <B>mean at BerliOS</B> 
    <A HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r6208%20-%20in%0A%09branches/avidemux_2.6_branch_mean/avidemux%3A%20.%20common%0A%09common/ADM_editor%20common/ADM_script2%0A%09common/ADM_script2/include%20common/ADM_script2/js%0A%09common/ADM_script2/js/src_dialogFactory%20common/ADM_script2/py%0A%09common/ADM_script2/py/include%20common/ADM_script2/src%0A%09common/ADM_script2/src_dialogFactory%0A%09qt4/ADM_userInterfaces/ADM_shell&In-Reply-To=%3C201005201522.o4KFMwGa014359%40sheep.berlios.de%3E"
       TITLE="[Avidemux-svn-commit] r6208 - in	branches/avidemux_2.6_branch_mean/avidemux: . common	common/ADM_editor common/ADM_script2	common/ADM_script2/include common/ADM_script2/js	common/ADM_script2/js/src_dialogFactory common/ADM_script2/py	common/ADM_script2/py/include common/ADM_script2/src	common/ADM_script2/src_dialogFactory	qt4/ADM_userInterfaces/ADM_shell">mean at mail.berlios.de
       </A><BR>
    <I>Thu May 20 17:22:58 CEST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="003407.html">[Avidemux-svn-commit] r6207 - in	branches/avidemux_2.6_branch_mean/avidemux: . common	common/ADM_pyScript common/ADM_pyScript/include	common/ADM_pyScript/src common/ADM_script2	common/ADM_script2/js common/ADM_script2/py	common/ADM_script2/py/include common/ADM_script2/src
</A></li>
        <LI>Next message: <A HREF="003409.html">[Avidemux-svn-commit] r6209 - in branches/avidemux_2.6_branch_mean:	avidemux avidemux/common/ADM_script2/include	avidemux/common/ADM_script2/js avidemux/common/ADM_script2/py	avidemux/common/ADM_script2/src cmake
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3408">[ date ]</a>
              <a href="thread.html#3408">[ thread ]</a>
              <a href="subject.html#3408">[ subject ]</a>
              <a href="author.html#3408">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: mean
Date: 2010-05-20 17:22:57 +0200 (Thu, 20 May 2010)
New Revision: 6208

Added:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_scriptAvidemux.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_scriptDebug.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_scriptEditor.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_scriptIf.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_scriptShell.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_scriptTestFactory.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_scriptVideo.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_js.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsAvidemux.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsDFactory.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsUtils.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/src_dialogFactory/
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/src_dialogFactory/ADM_JSDF.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/src_dialogFactory/ADM_JSDFInteger.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/src_dialogFactory/ADM_JSDFInteger.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/src_dialogFactory/ADM_JSDFMenu.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/src_dialogFactory/ADM_JSDFMenu.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/src_dialogFactory/ADM_JSDFToggle.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/src_dialogFactory/ADM_JSDFToggle.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/src_dialogFactory/ADM_JSDialogFactory.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/src_dialogFactory/ADM_JSDialogFactory.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/src_dialogFactory/ADM_JSDialogFactory_if.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/src_dialogFactory/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_scriptIf.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_scriptVideo.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/CMakeLists.txt
Removed:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_js.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_jsAvidemux.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_jsDFactory.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_jsDebug.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_jsEditor.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_jsIf.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_jsShell.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_jsTestFactory.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_jsUtils.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_jsVideo.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/adm_scanner.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/include/ADM_pyIf.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src_dialogFactory/ADM_JSDF.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src_dialogFactory/ADM_JSDFInteger.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src_dialogFactory/ADM_JSDFInteger.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src_dialogFactory/ADM_JSDFMenu.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src_dialogFactory/ADM_JSDFMenu.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src_dialogFactory/ADM_JSDFToggle.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src_dialogFactory/ADM_JSDFToggle.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src_dialogFactory/ADM_JSDialogFactory.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src_dialogFactory/ADM_JSDialogFactory.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src_dialogFactory/ADM_JSDialogFactory_if.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src_dialogFactory/CMakeLists.txt
Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_segment.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsDebug.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsEditor.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsEditor_js.c
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsIf.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsIf_js.c
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsTestFactory.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsTestFactory_js.c
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsVideo.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/ADM_pyAdm.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/main.cpp
   branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_shell/Q_shell.h
Log:
[py/js] Factorize

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_segment.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_segment.cpp	2010-05-20 15:22:52 UTC (rev 6207)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_segment.cpp	2010-05-20 15:22:57 UTC (rev 6208)
@@ -23,7 +23,7 @@
 #include &quot;ADM_colorspace.h&quot;
 #include &quot;ADM_vidMisc.h&quot;
 #include &quot;ADM_audiocodec/ADM_audiocodec.h&quot;
-#include &quot;ADM_script2/include/ADM_jsIf.h&quot;
+#include &quot;ADM_script2/include/ADM_scriptIf.h&quot;
 #include &quot;ADM_codec.h&quot;
 
 ADM_EditorSegment::ADM_EditorSegment(void)

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/CMakeLists.txt	2010-05-20 15:22:52 UTC (rev 6207)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/CMakeLists.txt	2010-05-20 15:22:57 UTC (rev 6208)
@@ -1,2 +1,3 @@
+subdirs (js)
+subdirs (py)
 subdirs (src)
-subdirs (src_dialogFactory)

Deleted: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_js.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_js.h	2010-05-20 15:22:52 UTC (rev 6207)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_js.h	2010-05-20 15:22:57 UTC (rev 6208)
@@ -1,51 +0,0 @@
-/**
-    \file ADM_js
-    \brief Standard includes and defines
-*/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#ifndef ADM_JS_H
-#define ADM_JS_H
-
-
-#include &quot;ADM_default.h&quot;
-#include &lt;string.h&gt;
-#include &lt;pthread.h&gt;
-#include &lt;vector&gt;
-using std::vector;
-#include &quot;DIA_coreToolkit.h&quot;
-#include &quot;jsapi.h&quot;
-#include &quot;ADM_jsUtils.h&quot;
-#include &quot;ADM_jsShell.h&quot;
-#include &quot;ADM_jsDebug.h&quot;
-#include &quot;ADM_jsDFactory.h&quot;
-
-typedef JSBool JS_PROTOTYPE(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
-
-
-/**
-    \struct ADM_JS_HOOK
-*/
-typedef struct
-{
-    const char      *name;
-    const char      *text;
-    JSFunctionSpec  *jsFunctions;
-}ADM_JS_HOOK;
-extern vector &lt;ADM_JS_HOOK &gt;jsHooks;
-#if !defined(ADM_JS_THREADSAFE)
-    #define enterLock() {}
-    #define leaveLock() {}
-#else
-    #define enterLock() jsrefcount nRefCount = JS_SuspendRequest(cx)
-    #define leaveLock() {JS_ResumeRequest(cx,nRefCount); }
-#endif
-
-#endif

Deleted: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_jsAvidemux.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_jsAvidemux.h	2010-05-20 15:22:52 UTC (rev 6207)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_jsAvidemux.h	2010-05-20 15:22:57 UTC (rev 6208)
@@ -1,53 +0,0 @@
-/**
-    \file ADM_jsAvidemux
-    \brief Standard includes and defines
-*/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#ifndef ADM_JS_AVIDEMUX_H
-#define ADM_JS_AVIDEMUX_H
-#include &quot;ADM_inttype.h&quot;
-#include &quot;jsapi.h&quot;
-#ifdef __cplusplus
-extern &quot;C&quot; {
-#endif
-
-int jsLoadVideo(const char *c);
-int jsAppendVideo(const char *c);
-int jsClearSegments(void);
-int jsAddSegment(int ref, double start, double duration);
-int jsAudioReset(void);
-int jsAudioMixer(const char *s);
-// Fq
-int32_t jsGetResample(void);
-void    jsSetResample(int32_t fq);
-// Markers
-double jsGetMarkerA(void);
-double jsGetMarkerB(void);
-void   jsSetMarkerA(double a);
-void   jsSetMarkerB(double b);
-//
-int    jsClearVideoFilters();
-// Info
-int jsGetWidth ( void) ;
-int jsGetHeight ( void) ;
-int jsGetFps1000 ( void) ;
-char *jsGetVideoCodec ( void) ;
-
-// non jsapigen function, variables number of args
-JSBool jsAdmaddVideoFilter(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
-JSBool jsAdmaudioCodec(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
-JSBool jsAdmsetContainer(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
-JSBool jsAdmvideoCodec(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
-#ifdef __cplusplus
-};
-#endif
-
-#endif

Deleted: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_jsDFactory.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_jsDFactory.h	2010-05-20 15:22:52 UTC (rev 6207)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_jsDFactory.h	2010-05-20 15:22:57 UTC (rev 6208)
@@ -1,21 +0,0 @@
-/**
-    \file ADM_jsDialogFactory.h
-    \brief Base class for dialog factory mapping
-    \author mean, <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
-*/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-#ifndef ADM_JS_DIALOG_H
-#define ADM_JS_DIALOG_H
-#include &quot;ADM_jsIf.h&quot;
-extern &quot;C&quot;  JSObject *jsDialogFactoryInit(JSContext *cx,JSObject *obj);
-
-#endif // ADM_JS_SHELL_H

Deleted: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_jsDebug.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_jsDebug.h	2010-05-20 15:22:52 UTC (rev 6207)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_jsDebug.h	2010-05-20 15:22:57 UTC (rev 6208)
@@ -1,32 +0,0 @@
-/**
-    \file ADM_JSDebug.h
-    \brief Debug oriented functions for avidemux JS/JS shell
-    \author mean (c) 2009 <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
-
-
-*/
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-#ifndef ADMJS_DEBUG_H
-#define ADMJS_DEBUG_H
-#ifdef __cplusplus
-extern &quot;C&quot;
-{
-#endif
-void jsPopupError(const char *s);
-void jsPopupInfo(const char *s);
-void jsPrint(const char *s);
-void jsPrint2(const char *s);
-void jsHelp(const char *s);
-#ifdef __cplusplus
-};
-#endif
-
-#endif
\ No newline at end of file

Deleted: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_jsEditor.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_jsEditor.h	2010-05-20 15:22:52 UTC (rev 6207)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_jsEditor.h	2010-05-20 15:22:57 UTC (rev 6208)
@@ -1,29 +0,0 @@
-/**
-    \file ADM_jsAvidemux
-    \brief Standard includes and defines
-*/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#ifndef ADM_JS_EDITOR_H
-#define ADM_JS_EDITOR_H
-#include &quot;ADM_inttype.h&quot;
-#include &quot;jsapi.h&quot;
-#ifdef __cplusplus
-extern &quot;C&quot; {
-#endif
-
-int jsPrintTiming(int framenumber );
-int jsDumpSegments (void);
-int jsDumpRefVideos (void);
-#ifdef __cplusplus
-};
-#endif
-
-#endif

Deleted: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_jsIf.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_jsIf.h	2010-05-20 15:22:52 UTC (rev 6207)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_jsIf.h	2010-05-20 15:22:57 UTC (rev 6208)
@@ -1,64 +0,0 @@
-/**
-    \file ADM_JSif.cpp
-    \brief interface to js
-*/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#ifndef ADM_JS_IF_H
-#define ADM_JS_IF_H
-
-/**
-    \enum JS_LOG_TYPE
-*/
-typedef enum
-{
-    JS_LOG_NORMAL,
-    JS_LOG_ERROR
-}JS_LOG_TYPE;
-/**
-    \typedef jsLoggerFunc
-*/
-typedef bool (jsLoggerFunc)(void *cookie,JS_LOG_TYPE type,const char *);
-/*
-
-*/
-bool ADM_jsRegisterLogger(void *cookie,jsLoggerFunc *fun);
-bool ADM_jsUnregisterLogger(void);
-
-/**
-    \fn parseECMAScript
-    \brief Compile &amp; execute ecma script
-*/
-bool parseECMAScript(const char *name);
-
-/**
-    \fn    interactiveECMAScript
-    \brief interprete &amp; execute ecma script (interactive)
-*/
-bool interactiveECMAScript(const char *name);
-/**
-    \fn jsLog
-
-*/
-bool jsLog(JS_LOG_TYPE type, const char *fmt,...);
-
-/**
-    \fn SpidermonkeyInit
-*/
-bool SpidermonkeyInit(void);
-/**
-    \fn SpidermonkeyDestroy
-*/
-void SpidermonkeyDestroy(void);
-/**
-    \fn SpidermonkeyExit
-*/
-bool SpidermonkeyExit(void);
-#endif

Deleted: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_jsShell.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_jsShell.h	2010-05-20 15:22:52 UTC (rev 6207)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_jsShell.h	2010-05-20 15:22:57 UTC (rev 6208)
@@ -1,23 +0,0 @@
-/**
-    \file ADM_jsShell.h
-    \brief Base class for js interactive shell
-    \author mean, <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
-*/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-#ifndef ADM_JS_SHELL_H
-#define ADM_JS_SHELL_H
-#include &quot;ADM_jsIf.h&quot;
-typedef bool (jsShellEvaluate)(const char *str);
-bool ADM_startShell(jsShellEvaluate *eval);
-
-
-#endif // ADM_JS_SHELL_H
\ No newline at end of file

Deleted: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_jsTestFactory.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_jsTestFactory.h	2010-05-20 15:22:52 UTC (rev 6207)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_jsTestFactory.h	2010-05-20 15:22:57 UTC (rev 6208)
@@ -1,50 +0,0 @@
-/**
-    \file ADM_jsTestFactory.h
-    \brief  Simple js hook to test factory
-    \author mean (c) 2009 <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
-
-
-*/
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-#ifndef ADMJS_FACTORY_H
-#define ADMJS_FACTORY_H
-#ifdef __cplusplus
-extern &quot;C&quot;
-{
-#endif
-int jsTestCrash(void);
-int jsTestAssert(void);
-int jsTestFacNotch(void);
-int jsTestFacThreadCount(void);
-int jsTestFacMatrix(void);
-int jsTestFacMatrix(void);
-int jsTestFacHex(void);
-int jsTestFacFrame(void);
-int jsTestFacTab(void);
-int jsTestFacText(void);
-int jsTestFacRoText(void);
-int jsTestFacSlider(void);
-int jsTestFacButton(void);
-int jsTestFacBar(void);
-int jsTestFacBitrate(void);
-int jsTestFacDirSel(void);
-int jsTestFacFile(void);
-int jsTestFacMenu(void);
-int jsTestFacToggle(void);
-int jsTestFacFloat(void);
-int jsTestFacInt(void);
-int jsTestFacEncoding(void);
-#ifdef __cplusplus
-};
-#endif
-
-
-#endif

Deleted: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_jsUtils.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_jsUtils.h	2010-05-20 15:22:52 UTC (rev 6207)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_jsUtils.h	2010-05-20 15:22:57 UTC (rev 6208)
@@ -1,40 +0,0 @@
-/**
-    \file ADM_jsUtils
-    \brief Simple param -&gt; type utilities
-    \author mean <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A> 2009
-*/
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#ifndef ADM_JS_UTILS_H
-#define ADM_JS_UTILS_H
-#include &quot;ADM_confCouple.h&quot;
-typedef enum
-{
-    ADM_JS_INVALID=0,
-    ADM_JS_UINT32_T=1,
-    ADM_JS_INT32_T,
-    ADM_JS_UINT64_T,
-    ADM_JS_INT64_T,
-    ADM_JS_STRING,
-    ADM_JS_BOOL,
-    ADM_JS_MAX
-}ADM_PARAM_TYPE;
-
-typedef struct
-{
-    ADM_PARAM_TYPE type;
-    void           *value;
-
-}ADM_PARAM_LIST;
-
-// since long int will be coded by js as double, we need a centralized version to convert
-bool ADM_jsArg2Vars(const char *caller, int argc, jsval *argv, int paramNumber, ADM_PARAM_LIST *param);
-bool stringsToConfCouple(int nb,CONFcouple **conf,  const char **argv);
-bool jsArgToConfCouple(int nb,CONFcouple **conf,  jsval *argv);
-#endif

Deleted: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_jsVideo.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_jsVideo.h	2010-05-20 15:22:52 UTC (rev 6207)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_jsVideo.h	2010-05-20 15:22:57 UTC (rev 6208)
@@ -1,28 +0,0 @@
-/**
-    \file ADM_jsVideo
-    \brief Video codec etc..
-*/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#ifndef ADM_JS_VIDEO_H
-#define ADM_JS_VIDEO_H
-
-#ifdef __cplusplus
-extern &quot;C&quot; {
-#endif
-
-int jsVideoCodec(const char *codec,const char **p);
-int jsSetPostProc (int a,int b, int c);
-
-#ifdef __cplusplus
-};
-#endif
-
-#endif

Copied: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_scriptAvidemux.h (from rev 6207, branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_jsAvidemux.h)
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_jsAvidemux.h	2010-05-20 15:22:52 UTC (rev 6207)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_scriptAvidemux.h	2010-05-20 15:22:57 UTC (rev 6208)
@@ -0,0 +1,47 @@
+/**
+    \file ADM_jsAvidemux
+    \brief Standard includes and defines
+*/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#ifndef ADM_JS_AVIDEMUX_H
+#define ADM_JS_AVIDEMUX_H
+#include &quot;ADM_inttype.h&quot;
+#ifdef __cplusplus
+extern &quot;C&quot; {
+#endif
+
+int jsLoadVideo(const char *c);
+int jsAppendVideo(const char *c);
+int jsClearSegments(void);
+int jsAddSegment(int ref, double start, double duration);
+int jsAudioReset(void);
+int jsAudioMixer(const char *s);
+// Fq
+int32_t jsGetResample(void);
+void    jsSetResample(int32_t fq);
+// Markers
+double jsGetMarkerA(void);
+double jsGetMarkerB(void);
+void   jsSetMarkerA(double a);
+void   jsSetMarkerB(double b);
+//
+int    jsClearVideoFilters();
+// Info
+int jsGetWidth ( void) ;
+int jsGetHeight ( void) ;
+int jsGetFps1000 ( void) ;
+char *jsGetVideoCodec ( void) ;
+
+#ifdef __cplusplus
+};
+#endif
+
+#endif

Copied: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_scriptDebug.h (from rev 6207, branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_jsDebug.h)
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_jsDebug.h	2010-05-20 15:22:52 UTC (rev 6207)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_scriptDebug.h	2010-05-20 15:22:57 UTC (rev 6208)
@@ -0,0 +1,32 @@
+/**
+    \file ADM_JSDebug.h
+    \brief Debug oriented functions for avidemux JS/JS shell
+    \author mean (c) 2009 <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
+
+
+*/
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#ifndef ADMJS_DEBUG_H
+#define ADMJS_DEBUG_H
+#ifdef __cplusplus
+extern &quot;C&quot;
+{
+#endif
+void jsPopupError(const char *s);
+void jsPopupInfo(const char *s);
+void jsPrint(const char *s);
+void jsPrint2(const char *s);
+void jsHelp(const char *s);
+#ifdef __cplusplus
+};
+#endif
+
+#endif
\ No newline at end of file

Copied: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_scriptEditor.h (from rev 6207, branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_jsEditor.h)
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_jsEditor.h	2010-05-20 15:22:52 UTC (rev 6207)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_scriptEditor.h	2010-05-20 15:22:57 UTC (rev 6208)
@@ -0,0 +1,29 @@
+/**
+    \file ADM_jsAvidemux
+    \brief Standard includes and defines
+*/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#ifndef ADM_JS_EDITOR_H
+#define ADM_JS_EDITOR_H
+#include &quot;ADM_inttype.h&quot;
+//#include &quot;jsapi.h&quot;
+#ifdef __cplusplus
+extern &quot;C&quot; {
+#endif
+
+int jsPrintTiming(int framenumber );
+int jsDumpSegments (void);
+int jsDumpRefVideos (void);
+#ifdef __cplusplus
+};
+#endif
+
+#endif

Copied: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_scriptIf.h (from rev 6207, branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_jsIf.h)
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_jsIf.h	2010-05-20 15:22:52 UTC (rev 6207)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_scriptIf.h	2010-05-20 15:22:57 UTC (rev 6208)
@@ -0,0 +1,75 @@
+/**
+    \file ADM_JSif.cpp
+    \brief interface to js
+*/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#ifndef ADM_JS_IF_H
+#define ADM_JS_IF_H
+
+/**
+    \enum JS_LOG_TYPE
+*/
+typedef enum
+{
+    JS_LOG_NORMAL,
+    JS_LOG_ERROR
+}JS_LOG_TYPE;
+/**
+    \typedef jsLoggerFunc
+*/
+typedef bool (jsLoggerFunc)(void *cookie,JS_LOG_TYPE type,const char *);
+/*
+
+*/
+bool ADM_jsRegisterLogger(void *cookie,jsLoggerFunc *fun);
+bool ADM_jsUnregisterLogger(void);
+
+/**
+    \fn parseECMAScript
+    \brief Compile &amp; execute ecma script
+*/
+bool parseECMAScript(const char *name);
+
+/**
+    \fn    interactiveECMAScript
+    \brief interprete &amp; execute ecma script (interactive)
+*/
+bool interactiveECMAScript(const char *name);
+/**
+    \fn jsLog
+
+*/
+bool jsLog(JS_LOG_TYPE type, const char *fmt,...);
+
+/**
+    \fn SpidermonkeyInit
+*/
+bool SpidermonkeyInit(void);
+/**
+    \fn SpidermonkeyDestroy
+*/
+void SpidermonkeyDestroy(void);
+/**
+    \fn SpidermonkeyExit
+*/
+bool SpidermonkeyExit(void);
+
+/**
+    \fn parseTinyPyScript
+*/
+bool parseTinyPyScript(const char *name);
+/**
+    \fn interactiveTinyPy
+*/
+bool interactiveTinyPy(void);
+
+
+#endif

Copied: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_scriptShell.h (from rev 6207, branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_jsShell.h)
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_jsShell.h	2010-05-20 15:22:52 UTC (rev 6207)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_scriptShell.h	2010-05-20 15:22:57 UTC (rev 6208)
@@ -0,0 +1,23 @@
+/**
+    \file ADM_jsShell.h
+    \brief Base class for js interactive shell
+    \author mean, <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
+*/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#ifndef ADM_JS_SHELL_H
+#define ADM_JS_SHELL_H
+#include &quot;ADM_scriptIf.h&quot;
+typedef bool (jsShellEvaluate)(const char *str);
+bool ADM_startShell(jsShellEvaluate *eval);
+
+
+#endif // ADM_JS_SHELL_H
\ No newline at end of file

Copied: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_scriptTestFactory.h (from rev 6207, branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_jsTestFactory.h)
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_jsTestFactory.h	2010-05-20 15:22:52 UTC (rev 6207)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_scriptTestFactory.h	2010-05-20 15:22:57 UTC (rev 6208)
@@ -0,0 +1,50 @@
+/**
+    \file ADM_jsTestFactory.h
+    \brief  Simple js hook to test factory
+    \author mean (c) 2009 <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
+
+
+*/
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#ifndef ADMJS_FACTORY_H
+#define ADMJS_FACTORY_H
+#ifdef __cplusplus
+extern &quot;C&quot;
+{
+#endif
+int jsTestCrash(void);
+int jsTestAssert(void);
+int jsTestFacNotch(void);
+int jsTestFacThreadCount(void);
+int jsTestFacMatrix(void);
+int jsTestFacMatrix(void);
+int jsTestFacHex(void);
+int jsTestFacFrame(void);
+int jsTestFacTab(void);
+int jsTestFacText(void);
+int jsTestFacRoText(void);
+int jsTestFacSlider(void);
+int jsTestFacButton(void);
+int jsTestFacBar(void);
+int jsTestFacBitrate(void);
+int jsTestFacDirSel(void);
+int jsTestFacFile(void);
+int jsTestFacMenu(void);
+int jsTestFacToggle(void);
+int jsTestFacFloat(void);
+int jsTestFacInt(void);
+int jsTestFacEncoding(void);
+#ifdef __cplusplus
+};
+#endif
+
+
+#endif

Copied: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_scriptVideo.h (from rev 6207, branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_jsVideo.h)
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_jsVideo.h	2010-05-20 15:22:52 UTC (rev 6207)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_scriptVideo.h	2010-05-20 15:22:57 UTC (rev 6208)
@@ -0,0 +1,28 @@
+/**
+    \file ADM_jsVideo
+    \brief Video codec etc..
+*/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#ifndef ADM_JS_VIDEO_H
+#define ADM_JS_VIDEO_H
+
+#ifdef __cplusplus
+extern &quot;C&quot; {
+#endif
+
+int jsVideoCodec(const char *codec,const char **p);
+int jsSetPostProc (int a,int b, int c);
+
+#ifdef __cplusplus
+};
+#endif
+
+#endif

Deleted: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/adm_scanner.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/adm_scanner.h	2010-05-20 15:22:52 UTC (rev 6207)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/adm_scanner.h	2010-05-20 15:22:57 UTC (rev 6208)
@@ -1,26 +0,0 @@
-/*
-	Type used by scanner
-
-*/
-#ifndef ADMSCANNER
-#define ADMSCANNER
-
-#define ADM_MAX_VAR 50
-//#include &quot;ADM_videoFilter_iface.h&quot;
-
-typedef enum
-{
-	ASC_OK,
-	ASC_UNKNOWN_FUNC,
-	ASC_BAD_NUM_PARAM,
-	ASC_BAD_PARAM,
-	ASC_EXEC_FAILED
-}ASC_ERROR;
-
-//int PushParam(APM_TYPE, char *value);
-int Call(char *string);
-
-
-#endif
-//END
-

Copied: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_js.h (from rev 6207, branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_js.h)
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_js.h	2010-05-20 15:22:52 UTC (rev 6207)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_js.h	2010-05-20 15:22:57 UTC (rev 6208)
@@ -0,0 +1,51 @@
+/**
+    \file ADM_js
+    \brief Standard includes and defines
+*/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#ifndef ADM_JS_H
+#define ADM_JS_H
+
+
+#include &quot;ADM_default.h&quot;
+#include &lt;string.h&gt;
+#include &lt;pthread.h&gt;
+#include &lt;vector&gt;
+using std::vector;
+#include &quot;DIA_coreToolkit.h&quot;
+#include &quot;jsapi.h&quot;
+#include &quot;ADM_jsUtils.h&quot;
+#include &quot;ADM_scriptShell.h&quot;
+#include &quot;ADM_scriptDebug.h&quot;
+#include &quot;ADM_jsDFactory.h&quot;
+
+typedef JSBool JS_PROTOTYPE(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
+
+
+/**
+    \struct ADM_JS_HOOK
+*/
+typedef struct
+{
+    const char      *name;
+    const char      *text;
+    JSFunctionSpec  *jsFunctions;
+}ADM_JS_HOOK;
+extern vector &lt;ADM_JS_HOOK &gt;jsHooks;
+#if !defined(ADM_JS_THREADSAFE)
+    #define enterLock() {}
+    #define leaveLock() {}
+#else
+    #define enterLock() jsrefcount nRefCount = JS_SuspendRequest(cx)
+    #define leaveLock() {JS_ResumeRequest(cx,nRefCount); }
+#endif
+
+#endif

Copied: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsAvidemux.h (from rev 6207, branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_jsAvidemux.h)
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_jsAvidemux.h	2010-05-20 15:22:52 UTC (rev 6207)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsAvidemux.h	2010-05-20 15:22:57 UTC (rev 6208)
@@ -0,0 +1,53 @@
+/**
+    \file ADM_jsAvidemux
+    \brief Standard includes and defines
+*/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#ifndef ADM_JS_AVIDEMUX_H
+#define ADM_JS_AVIDEMUX_H
+#include &quot;ADM_inttype.h&quot;
+#include &quot;jsapi.h&quot;
+#ifdef __cplusplus
+extern &quot;C&quot; {
+#endif
+
+int jsLoadVideo(const char *c);
+int jsAppendVideo(const char *c);
+int jsClearSegments(void);
+int jsAddSegment(int ref, double start, double duration);
+int jsAudioReset(void);
+int jsAudioMixer(const char *s);
+// Fq
+int32_t jsGetResample(void);
+void    jsSetResample(int32_t fq);
+// Markers
+double jsGetMarkerA(void);
+double jsGetMarkerB(void);
+void   jsSetMarkerA(double a);
+void   jsSetMarkerB(double b);
+//
+int    jsClearVideoFilters();
+// Info
+int jsGetWidth ( void) ;
+int jsGetHeight ( void) ;
+int jsGetFps1000 ( void) ;
+char *jsGetVideoCodec ( void) ;
+
+// non jsapigen function, variables number of args
+JSBool jsAdmaddVideoFilter(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
+JSBool jsAdmaudioCodec(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
+JSBool jsAdmsetContainer(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
+JSBool jsAdmvideoCodec(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
+#ifdef __cplusplus
+};
+#endif
+
+#endif

Copied: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsDFactory.h (from rev 6207, branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_jsDFactory.h)
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_jsDFactory.h	2010-05-20 15:22:52 UTC (rev 6207)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsDFactory.h	2010-05-20 15:22:57 UTC (rev 6208)
@@ -0,0 +1,21 @@
+/**
+    \file ADM_jsDialogFactory.h
+    \brief Base class for dialog factory mapping
+    \author mean, <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
+*/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#ifndef ADM_JS_DIALOG_H
+#define ADM_JS_DIALOG_H
+#include &quot;ADM_scriptIf.h&quot;
+extern &quot;C&quot;  JSObject *jsDialogFactoryInit(JSContext *cx,JSObject *obj);
+
+#endif // ADM_JS_SHELL_H

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsDebug.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsDebug.cpp	2010-05-20 15:22:52 UTC (rev 6207)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsDebug.cpp	2010-05-20 15:22:57 UTC (rev 6208)
@@ -15,7 +15,7 @@
  ***************************************************************************/
 #include &quot;ADM_js.h&quot;
 #include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_jsDebug.h&quot;
+#include &quot;ADM_scriptDebug.h&quot;
 #include &lt;vector&gt;
 /**/
 /**/

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsEditor.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsEditor.cpp	2010-05-20 15:22:52 UTC (rev 6207)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsEditor.cpp	2010-05-20 15:22:57 UTC (rev 6208)
@@ -15,7 +15,7 @@
 #include &quot;ADM_js.h&quot;
 #include &lt;stdarg.h&gt;
 #include &lt;vector&gt;
-#include &quot;ADM_jsEditor.h&quot;
+#include &quot;ADM_scriptEditor.h&quot;
 #include &quot;ADM_editor/ADM_edit.hxx&quot;
 extern ADM_Composer *video_body;
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsEditor_js.c
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsEditor_js.c	2010-05-20 15:22:52 UTC (rev 6207)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsEditor_js.c	2010-05-20 15:22:57 UTC (rev 6208)
@@ -14,7 +14,7 @@
 */
 
 #include &quot;stdio.h&quot;
-#include &quot;ADM_jsEditor.h&quot;
+#include &quot;ADM_scriptEditor.h&quot;
 void jsEditor(void)
 {
         printf(&quot;Constructor invoked\n&quot;);

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsIf.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsIf.cpp	2010-05-20 15:22:52 UTC (rev 6207)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsIf.cpp	2010-05-20 15:22:57 UTC (rev 6208)
@@ -16,11 +16,10 @@
 #include &lt;stdarg.h&gt;
 #include &lt;vector&gt;
 #include &quot;ADM_editor/ADM_edit.hxx&quot;
+#include &quot;DIA_coreToolkit.h&quot;
 void    A_Resync(void);
 
 /* our variables */
-static jsLoggerFunc *jsLogger=NULL;
-static void *jsLoggerCookie=NULL;
 vector &lt;ADM_JS_HOOK &gt;jsHooks;
 extern ADM_Composer *video_body;
 extern bool ADM_JSDialogFactoryInit(JSContext *cx, JSObject *obj);
@@ -70,15 +69,8 @@
 	A_Resync();
 	return g_bJSSuccess;
 }// end parseECMAScript
+
 /**
-    \fn jsLogger
-*/
-bool isJsLogRedirected(void)
-{
-    if(jsLogger) return true;
-    return false;
-}
-/**
     \fn jsEvaluate
 */
 static bool jsEvaluate(const char *str)
@@ -100,48 +92,6 @@
 	return true;
 }
 /**
-    \fn jsLog
-*/
-bool jsLog(JS_LOG_TYPE type, const char *prf,...)
-{
- static char print_buffer[1024];
-  	
-		va_list 	list;
-		va_start(list,	prf);
-		vsnprintf(print_buffer,1023,prf,list);
-		va_end(list);
-		print_buffer[1023]=0; // ensure the string is terminated
-        if(true==isJsLogRedirected())
-            jsLogger(jsLoggerCookie,type,print_buffer);
-        else
-        {
-            if(type==JS_LOG_ERROR)
-                GUI_Error_HIG(&quot;Spidermonkey ECMAScript Error&quot;,&quot;%s&quot;,print_buffer);
-            else
-                ADM_warning(&quot;[JS]%s\n&quot;,print_buffer);
-        }
-
-        return true;
-}
-
-/**
-    \fn ADM_jsRegisterLogger
-*/
-bool ADM_jsRegisterLogger(void *cookie,jsLoggerFunc *fun)
-{
-    jsLoggerCookie=cookie;
-    jsLogger=fun;
-    return true;
-}
-/**
-    \fn ADM_jsUnregisterLogger
-*/
-bool ADM_jsUnregisterLogger(void)
-{
-    jsLogger=NULL;
-    return true;
-}
-/**
     \fn jsRegisterAvidemux
 */
 extern &quot;C&quot; JSFunctionSpec  *jsGetIfFunctions(void);

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsIf_js.c
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsIf_js.c	2010-05-20 15:22:52 UTC (rev 6207)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsIf_js.c	2010-05-20 15:22:57 UTC (rev 6208)
@@ -15,7 +15,7 @@
 
 #include &quot;stdio.h&quot;
 #include &quot;ADM_jsAvidemux.h&quot;
-#include &quot;ADM_jsDebug.h&quot;
+#include &quot;ADM_scriptDebug.h&quot;
 
 #ifdef HAVE_ALLOCA_H
 #include &lt;alloca.h&gt;

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsTestFactory.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsTestFactory.cpp	2010-05-20 15:22:52 UTC (rev 6207)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsTestFactory.cpp	2010-05-20 15:22:57 UTC (rev 6208)
@@ -17,7 +17,7 @@
 #include &quot;ADM_editor/ADM_edit.hxx&quot;
 #include &quot;DIA_fileSel.h&quot;
 #include &quot;DIA_factory.h&quot;
-#include &quot;ADM_jsTestFactory.h&quot;
+#include &quot;ADM_scriptTestFactory.h&quot;
 #include &quot;DIA_encoding.h&quot;
 
 /**

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsTestFactory_js.c
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsTestFactory_js.c	2010-05-20 15:22:52 UTC (rev 6207)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsTestFactory_js.c	2010-05-20 15:22:57 UTC (rev 6208)
@@ -15,7 +15,7 @@
 
 #include &quot;stdio.h&quot;
 #include &quot;ADM_jsAvidemux.h&quot;
-#include &quot;ADM_jsTestFactory.h&quot;
+#include &quot;ADM_scriptTestFactory.h&quot;
 
 #ifdef HAVE_ALLOCA_H
 #include &lt;alloca.h&gt;

Copied: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsUtils.h (from rev 6207, branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_jsUtils.h)
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_jsUtils.h	2010-05-20 15:22:52 UTC (rev 6207)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsUtils.h	2010-05-20 15:22:57 UTC (rev 6208)
@@ -0,0 +1,40 @@
+/**
+    \file ADM_jsUtils
+    \brief Simple param -&gt; type utilities
+    \author mean <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A> 2009
+*/
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#ifndef ADM_JS_UTILS_H
+#define ADM_JS_UTILS_H
+#include &quot;ADM_confCouple.h&quot;
+typedef enum
+{
+    ADM_JS_INVALID=0,
+    ADM_JS_UINT32_T=1,
+    ADM_JS_INT32_T,
+    ADM_JS_UINT64_T,
+    ADM_JS_INT64_T,
+    ADM_JS_STRING,
+    ADM_JS_BOOL,
+    ADM_JS_MAX
+}ADM_PARAM_TYPE;
+
+typedef struct
+{
+    ADM_PARAM_TYPE type;
+    void           *value;
+
+}ADM_PARAM_LIST;
+
+// since long int will be coded by js as double, we need a centralized version to convert
+bool ADM_jsArg2Vars(const char *caller, int argc, jsval *argv, int paramNumber, ADM_PARAM_LIST *param);
+bool stringsToConfCouple(int nb,CONFcouple **conf,  const char **argv);
+bool jsArgToConfCouple(int nb,CONFcouple **conf,  jsval *argv);
+#endif

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsVideo.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsVideo.cpp	2010-05-20 15:22:52 UTC (rev 6207)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsVideo.cpp	2010-05-20 15:22:57 UTC (rev 6208)
@@ -20,7 +20,7 @@
 #include &quot;ADM_js.h&quot;
 #include &quot;ADM_editor/ADM_edit.hxx&quot;
 #include &quot;ADM_jsAvidemux.h&quot;
-#include &quot;ADM_jsVideo.h&quot;
+#include &quot;ADM_scriptVideo.h&quot;
 #include &quot;A_functions.h&quot;
 #include &quot;ADM_videoEncoderApi.h&quot;
 #include &quot;ADM_videoFilterApi.h&quot;
@@ -28,15 +28,7 @@
 #include &quot;GUI_ui.h&quot;
 extern ADM_Composer *video_body;
 bool A_setVideoCodec(const char *nm);
-/**
-    \fn jsSetPostProc
-*/
-int jsSetPostProc (int a,int b, int c)
-{
-    return video_body-&gt;setPostProc(a,b,c);
-}
 
-
 /**
     \fn Codec
     
@@ -94,56 +86,4 @@
         
         return JS_TRUE;
 }// end Codec
-/**
-    \fn A_setVideoCodec
-*/
-bool A_setVideoCodec(const char *nm)
-{
-    int idx=videoEncoder6_GetIndexFromName(nm);
-    if(idx==-1)
-    {
-        ADM_error(&quot;No such encoder :%s\n&quot;,nm);
-    }
-    // Select by index
-    videoEncoder6_SetCurrentEncoder(idx);
-    UI_setVideoCodec(idx);
-    return true;
-}
-/**
-     \fn jsClearFilters
-*/
-int jsClearVideoFilters()
-{
-    return ADM_vf_clearFilters();
-}
-/**
-    \fn jsGetMarkerA
-*/
-double jsGetMarkerA(void)
-{
-    return (double)video_body-&gt;getMarkerAPts();
-
-}
-/**
-    \fn jsGetMarkerB
-*/
-double jsGetMarkerB(void)
-{
-    return (double)video_body-&gt;getMarkerBPts();
-}
-/**
-    \fn jsSetMarkerA
-*/
-void   jsSetMarkerA(double a)
-{
-    video_body-&gt;setMarkerAPts( (uint64_t)a);
-}
-/**
-    \fn jsGetMarkerB
-*/
-void   jsSetMarkerB(double b)
-{
-    video_body-&gt;setMarkerBPts( (uint64_t)b);
-}
-
-//EOF
\ No newline at end of file
+//EOF

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/CMakeLists.txt	2010-05-20 15:22:52 UTC (rev 6207)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/CMakeLists.txt	2010-05-20 15:22:57 UTC (rev 6208)
@@ -21,7 +21,9 @@
         ADM_jsAudio.cpp
 )
 
-ADD_LIBRARY(ADM_script26 STATIC ${ADM_script_SRCS})
+ADD_LIBRARY(ADM_jsScript6 STATIC ${ADM_script_SRCS})
 ADD_DEFINITIONS(&quot;-DJS_THREADSAFE -DXP_UNIX&quot;)
-include_directories(${AVIDEMUX_TOP_SOURCE_DIR}/avidemux/common/ADM_script2/include)
+include_directories(../include)
+include_directories(.)
 include_directories(${AVIDEMUX_TOP_SOURCE_DIR}/avidemux_core/ADM_smjs)
+SUBDIRS(src_dialogFactory)

Copied: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/src_dialogFactory/ADM_JSDF.h (from rev 6207, branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src_dialogFactory/ADM_JSDF.h)
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src_dialogFactory/ADM_JSDF.h	2010-05-20 15:22:52 UTC (rev 6207)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/src_dialogFactory/ADM_JSDF.h	2010-05-20 15:22:57 UTC (rev 6208)
@@ -0,0 +1,31 @@
+/**
+    \file   ADM_JSDF.h
+    \brief  JS / DF binding
+    \author gruntster/Mean 2010
+
+
+*/
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#ifndef _ADM_JSDF_H
+#define _ADM_JSDF_H
+
+/**
+    \class ADM_JSBaseHelper
+*/
+class ADM_JSDFBaseHelper
+{
+public:
+                        ADM_JSDFBaseHelper() {};
+    virtual             ~ADM_JSDFBaseHelper() {};
+    virtual diaElem*    getControl(void)=0;
+};
+
+#endif

Copied: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/src_dialogFactory/ADM_JSDFInteger.cpp (from rev 6207, branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src_dialogFactory/ADM_JSDFInteger.cpp)
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src_dialogFactory/ADM_JSDFInteger.cpp	2010-05-20 15:22:52 UTC (rev 6207)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/src_dialogFactory/ADM_JSDFInteger.cpp	2010-05-20 15:22:57 UTC (rev 6208)
@@ -0,0 +1,160 @@
+/**
+    \file   ADM_JSDFInteger.cpp
+    \brief  JS / DF binding
+    \author gruntster/mean 2010
+
+
+
+*/
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include &quot;ADM_JSDFInteger.h&quot;
+
+ADM_JSDFIntegerHelper::ADM_JSDFIntegerHelper(const char *title,int32_t mn,int32_t mx)
+{
+	_title = ADM_strdup(title); 
+    _min=mn;
+    _max=mx;
+	_value = 0;
+}
+
+ADM_JSDFIntegerHelper::~ADM_JSDFIntegerHelper(void)
+{
+	if (_title)
+		delete _title;
+
+	_title = NULL;
+
+
+}
+
+
+diaElem* ADM_JSDFIntegerHelper::getControl(void)
+{
+    return new diaElemInteger(&amp;_value,_title, _min,_max);
+}
+
+int32_t ADM_JSDFIntegerHelper::value(void)
+{
+	return _value;
+}
+
+void ADM_JSDFIntegerHelper::setValue(int32_t index)
+{
+	_value = index;
+}
+/*************************************************/
+JSPropertySpec ADM_JSDFInteger::properties[] = 
+{ 
+	{ &quot;value&quot;, valueProperty, JSPROP_ENUMERATE },
+	{ 0 }
+};
+
+JSFunctionSpec ADM_JSDFInteger::methods[] =
+{
+	{ 0 }
+};
+
+JSClass ADM_JSDFInteger::m_dfIntegerHelper =
+{
+	&quot;DFInteger&quot;, JSCLASS_HAS_PRIVATE,
+	JS_PropertyStub, JS_PropertyStub,
+	ADM_JSDFInteger::JSGetProperty, ADM_JSDFInteger::JSSetProperty,
+	JS_EnumerateStub, JS_ResolveStub,
+	JS_ConvertStub, ADM_JSDFInteger::JSDestructor
+};
+
+JSObject *ADM_JSDFInteger::JSInit(JSContext *cx, JSObject *obj, JSObject *proto)
+{
+	return JS_InitClass(cx, obj, proto, &amp;m_dfIntegerHelper, 
+		ADM_JSDFInteger::JSConstructor, 1,
+		ADM_JSDFInteger::properties, ADM_JSDFInteger::methods,
+		NULL, NULL);
+}
+/**
+    \fn ctor
+*/
+JSBool ADM_JSDFInteger::JSConstructor(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
+{
+	if (argc != 3)
+		return JS_FALSE;
+
+	if (!JSVAL_IS_STRING(argv[0]))
+		return JS_FALSE;
+
+	if (!JSVAL_IS_INT(argv[1]))
+		return JS_FALSE;
+
+	if (!JSVAL_IS_INT(argv[2]))
+		return JS_FALSE;
+
+
+	ADM_JSDFIntegerHelper *pObject = new ADM_JSDFIntegerHelper(
+                                                    JS_GetStringBytes(JSVAL_TO_STRING(argv[0])),
+                                                    JSVAL_TO_INT(argv[1]),
+                                                    JSVAL_TO_INT(argv[2])
+                                                );
+
+	if (!JS_SetPrivate(cx, obj, pObject))
+		return JS_FALSE;
+
+	*rval = OBJECT_TO_JSVAL(obj);
+
+	return JS_TRUE;
+}
+
+void ADM_JSDFInteger::JSDestructor(JSContext *cx, JSObject *obj)
+{
+	ADM_JSDFIntegerHelper *pObject = (ADM_JSDFIntegerHelper*)JS_GetInstancePrivate(cx, obj, &amp;m_dfIntegerHelper, NULL);
+
+	if (pObject)
+		delete pObject;
+}
+
+JSBool ADM_JSDFInteger::JSGetProperty(JSContext *cx, JSObject *obj, jsval id, jsval *vp)
+{
+	if (JSVAL_IS_INT(id)) 
+	{
+		ADM_JSDFIntegerHelper *pObject = (ADM_JSDFIntegerHelper*)JS_GetInstancePrivate(cx, obj, &amp;m_dfIntegerHelper, NULL);
+
+		switch(JSVAL_TO_INT(id))
+		{
+			case valueProperty:
+			{
+				*vp = INT_TO_JSVAL(pObject-&gt;value());
+				break;
+			}
+		}
+	}
+
+	return JS_TRUE;
+}
+
+JSBool ADM_JSDFInteger::JSSetProperty(JSContext *cx, JSObject *obj, jsval id, jsval *vp)
+{
+	if (JSVAL_IS_INT(id)) 
+	{
+		ADM_JSDFIntegerHelper *pObject = (ADM_JSDFIntegerHelper*)JS_GetInstancePrivate(cx, obj, &amp;m_dfIntegerHelper, NULL);
+
+		switch(JSVAL_TO_INT(id))
+		{
+			case valueProperty:
+			{
+				if (JSVAL_IS_INT(*vp))
+					pObject-&gt;setValue(JSVAL_TO_INT(*vp));
+
+				break;
+			}
+			default:
+				return JS_FALSE;
+		}
+	}
+
+	return JS_TRUE;
+}

Copied: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/src_dialogFactory/ADM_JSDFInteger.h (from rev 6207, branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src_dialogFactory/ADM_JSDFInteger.h)
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src_dialogFactory/ADM_JSDFInteger.h	2010-05-20 15:22:52 UTC (rev 6207)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/src_dialogFactory/ADM_JSDFInteger.h	2010-05-20 15:22:57 UTC (rev 6208)
@@ -0,0 +1,66 @@
+/**
+    \file   ADM_JSDFInteger.h
+    \brief  JS / DF binding
+    \author gruntster/mean 2010
+
+
+*/
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#ifndef _ADM_JSDFInteger_H
+#define _ADM_JSDFInteger_H
+
+#include &quot;jsapi.h&quot;
+#include &quot;DIA_factory.h&quot;
+#include &quot;ADM_JSDF.h&quot;
+/**
+    \class ADM_JSDFIntegerHelper
+*/
+class ADM_JSDFIntegerHelper : public ADM_JSDFBaseHelper
+{
+private:
+	char                *_title;
+	int32_t             _value;
+    int32_t             _min,_max;
+
+public:
+                     ADM_JSDFIntegerHelper(const char *title,int32_t mn, int32_t mx);
+                     ~ADM_JSDFIntegerHelper(void);
+	virtual diaElem* getControl(void);
+            int32_t value(void);
+            void     setValue(int32_t value);
+};
+/**
+    \class ADM_JSDFInteger
+*/
+class ADM_JSDFInteger
+{
+protected:
+    int32_t   minimum,maximum;
+public:
+	ADM_JSDFInteger(int32_t mn,int32_t mx) {minimum=mn;maximum=mx;}
+
+	static JSBool         JSConstructor(JSContext *cx, JSObject *obj, uintN argc, 
+								jsval *argv, jsval *rval);
+	static void           JSDestructor(JSContext *cx, JSObject *obj);
+	static JSObject       *JSInit(JSContext *cx, JSObject *obj, JSObject *proto = NULL);
+	static JSBool         JSGetProperty(JSContext *cx, JSObject *obj, jsval id, jsval *vp);
+	static JSBool         JSSetProperty(JSContext *cx, JSObject *obj, jsval id, jsval *vp);
+	static JSPropertySpec properties[];
+	static JSFunctionSpec methods[];
+	static JSClass        m_dfIntegerHelper;
+
+	enum
+	{
+		valueProperty
+	};
+};
+
+#endif

Copied: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/src_dialogFactory/ADM_JSDFMenu.cpp (from rev 6207, branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src_dialogFactory/ADM_JSDFMenu.cpp)
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src_dialogFactory/ADM_JSDFMenu.cpp	2010-05-20 15:22:52 UTC (rev 6207)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/src_dialogFactory/ADM_JSDFMenu.cpp	2010-05-20 15:22:57 UTC (rev 6208)
@@ -0,0 +1,193 @@
+/**
+    \file   ADM_JSDFMenu.cpp
+    \brief  JS / DF binding
+    \author gruntster 2010
+
+
+
+*/
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include &quot;ADM_JSDFMenu.h&quot;
+
+ADM_JSDFMenuHelper::ADM_JSDFMenuHelper(const char *title)
+{
+	_title = ADM_strdup(title);
+	_menuEntries = NULL;
+	_index = 0;
+}
+
+ADM_JSDFMenuHelper::~ADM_JSDFMenuHelper(void)
+{
+	if (_title)
+		delete _title;
+
+	_title = NULL;
+
+	std::vector&lt;char*&gt;::iterator it;
+
+	for (it = _items.begin(); it != _items.end(); it++)
+		delete *it;
+
+	_items.clear();
+
+	if (_menuEntries)
+		delete _menuEntries;
+
+	_menuEntries = NULL;
+}
+
+void ADM_JSDFMenuHelper::addItem(const char* item)
+{
+	_items.push_back(ADM_strdup(item));
+}
+
+diaElem* ADM_JSDFMenuHelper::getControl(void)
+{
+	if (_menuEntries)
+		delete _menuEntries;
+
+	std::vector&lt;char*&gt;::iterator it;
+	int i = 0;
+
+	_menuEntries = new diaMenuEntry[_items.size()];	
+
+	for (it = _items.begin(); it != _items.end(); it++)
+	{
+		_menuEntries[i].val = i;
+		_menuEntries[i].text = *it;
+		_menuEntries[i].desc = NULL;
+
+		i++;
+	}
+
+	return new diaElemMenu(&amp;_index, _title, _items.size(), _menuEntries);
+}
+
+int ADM_JSDFMenuHelper::index(void)
+{
+	return _index;
+}
+
+void ADM_JSDFMenuHelper::setIndex(int index)
+{
+	_index = index;
+}
+
+JSPropertySpec ADM_JSDFMenu::properties[] = 
+{ 
+	{ &quot;index&quot;, indexProperty, JSPROP_ENUMERATE },
+	{ 0 }
+};
+
+JSFunctionSpec ADM_JSDFMenu::methods[] =
+{
+	{ &quot;addItem&quot;, addItem, 1, 0, 0 },
+	{ 0 }
+};
+
+JSClass ADM_JSDFMenu::m_dfMenuHelper =
+{
+	&quot;DFMenu&quot;, JSCLASS_HAS_PRIVATE,
+	JS_PropertyStub, JS_PropertyStub,
+	ADM_JSDFMenu::JSGetProperty, ADM_JSDFMenu::JSSetProperty,
+	JS_EnumerateStub, JS_ResolveStub,
+	JS_ConvertStub, ADM_JSDFMenu::JSDestructor
+};
+
+JSObject *ADM_JSDFMenu::JSInit(JSContext *cx, JSObject *obj, JSObject *proto)
+{
+	return JS_InitClass(cx, obj, proto, &amp;m_dfMenuHelper, 
+		ADM_JSDFMenu::JSConstructor, 1,
+		ADM_JSDFMenu::properties, ADM_JSDFMenu::methods,
+		NULL, NULL);
+}
+
+JSBool ADM_JSDFMenu::JSConstructor(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
+{
+	if (argc != 1)
+		return JS_FALSE;
+
+	if (!JSVAL_IS_STRING(argv[0]))
+		return JS_FALSE;
+
+	ADM_JSDFMenuHelper *pObject = new ADM_JSDFMenuHelper(JS_GetStringBytes(JSVAL_TO_STRING(argv[0])));
+
+	if (!JS_SetPrivate(cx, obj, pObject))
+		return JS_FALSE;
+
+	*rval = OBJECT_TO_JSVAL(obj);
+
+	return JS_TRUE;
+}
+
+void ADM_JSDFMenu::JSDestructor(JSContext *cx, JSObject *obj)
+{
+	ADM_JSDFMenuHelper *pObject = (ADM_JSDFMenuHelper*)JS_GetInstancePrivate(cx, obj, &amp;m_dfMenuHelper, NULL);
+
+	if (pObject)
+		delete pObject;
+}
+
+JSBool ADM_JSDFMenu::addItem(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
+{
+	ADM_JSDFMenuHelper *pObject = (ADM_JSDFMenuHelper*)JS_GetInstancePrivate(cx, obj, &amp;m_dfMenuHelper, NULL);
+
+	if (argc != 1)
+		return JS_FALSE;
+
+	if (!JSVAL_IS_STRING(argv[0]))
+		return JS_FALSE;
+
+	pObject-&gt;addItem(JS_GetStringBytes(JSVAL_TO_STRING(argv[0])));
+
+	return JS_TRUE;
+}
+
+JSBool ADM_JSDFMenu::JSGetProperty(JSContext *cx, JSObject *obj, jsval id, jsval *vp)
+{
+	if (JSVAL_IS_INT(id)) 
+	{
+		ADM_JSDFMenuHelper *pObject = (ADM_JSDFMenuHelper*)JS_GetInstancePrivate(cx, obj, &amp;m_dfMenuHelper, NULL);
+
+		switch(JSVAL_TO_INT(id))
+		{
+			case indexProperty:
+			{
+				*vp = INT_TO_JSVAL(pObject-&gt;index());
+				break;
+			}
+		}
+	}
+
+	return JS_TRUE;
+}
+
+JSBool ADM_JSDFMenu::JSSetProperty(JSContext *cx, JSObject *obj, jsval id, jsval *vp)
+{
+	if (JSVAL_IS_INT(id)) 
+	{
+		ADM_JSDFMenuHelper *pObject = (ADM_JSDFMenuHelper*)JS_GetInstancePrivate(cx, obj, &amp;m_dfMenuHelper, NULL);
+
+		switch(JSVAL_TO_INT(id))
+		{
+			case indexProperty:
+			{
+				if (JSVAL_IS_INT(*vp))
+					pObject-&gt;setIndex(JSVAL_TO_INT(*vp));
+
+				break;
+			}
+			default:
+				return JS_FALSE;
+		}
+	}
+
+	return JS_TRUE;
+}

Copied: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/src_dialogFactory/ADM_JSDFMenu.h (from rev 6207, branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src_dialogFactory/ADM_JSDFMenu.h)
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src_dialogFactory/ADM_JSDFMenu.h	2010-05-20 15:22:52 UTC (rev 6207)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/src_dialogFactory/ADM_JSDFMenu.h	2010-05-20 15:22:57 UTC (rev 6208)
@@ -0,0 +1,70 @@
+/**
+    \file   ADM_JSDFMenu.h
+    \brief  JS / DF binding
+    \author gruntster 2010
+
+
+*/
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#ifndef _ADM_JSDFMenu_H
+#define _ADM_JSDFMenu_H
+
+#include &quot;jsapi.h&quot;
+#include &quot;DIA_factory.h&quot;
+#include &quot;ADM_JSDF.h&quot;
+#include &lt;vector&gt;
+/**
+    \class ADM_JSDFMenuHelper
+*/
+class ADM_JSDFMenuHelper : public ADM_JSDFBaseHelper
+{
+private:
+	char                *_title;
+	uint32_t            _index;
+	diaMenuEntry        *_menuEntries;
+	std::vector &lt;char*&gt; _items;
+
+public:
+                     ADM_JSDFMenuHelper(const char *title);
+                     ~ADM_JSDFMenuHelper(void);
+            void     addItem(const char* item);
+	virtual diaElem* getControl(void);
+            int      index(void);
+            void     setIndex(int index);
+};
+/**
+    \class ADM_JSDFMenu
+*/
+class ADM_JSDFMenu
+{
+public:
+	ADM_JSDFMenu(void) {}
+
+	static JSBool   JSConstructor(JSContext *cx, JSObject *obj, uintN argc, 
+								jsval *argv, jsval *rval);
+	static void     JSDestructor(JSContext *cx, JSObject *obj);
+	static JSObject *JSInit(JSContext *cx, JSObject *obj, JSObject *proto = NULL);
+	static JSBool   JSGetProperty(JSContext *cx, JSObject *obj, jsval id, jsval *vp);
+	static JSBool   JSSetProperty(JSContext *cx, JSObject *obj, jsval id, jsval *vp);
+
+	static JSBool   addItem(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);	
+
+	static JSPropertySpec properties[];
+	static JSFunctionSpec methods[];
+	static JSClass m_dfMenuHelper;
+
+	enum
+	{
+		indexProperty
+	};
+};
+
+#endif

Copied: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/src_dialogFactory/ADM_JSDFToggle.cpp (from rev 6207, branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src_dialogFactory/ADM_JSDFToggle.cpp)
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src_dialogFactory/ADM_JSDFToggle.cpp	2010-05-20 15:22:52 UTC (rev 6207)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/src_dialogFactory/ADM_JSDFToggle.cpp	2010-05-20 15:22:57 UTC (rev 6208)
@@ -0,0 +1,147 @@
+/**
+    \file   ADM_JSDFToggle.cpp
+    \brief  JS / DF binding
+    \author gruntster/mean 2010
+
+
+
+*/
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include &quot;ADM_JSDFToggle.h&quot;
+
+ADM_JSDFToggleHelper::ADM_JSDFToggleHelper(const char *title)
+{
+	_title = ADM_strdup(title);
+	_value = 0;
+}
+
+ADM_JSDFToggleHelper::~ADM_JSDFToggleHelper(void)
+{
+	if (_title)
+		delete _title;
+
+	_title = NULL;
+
+
+}
+
+
+diaElem* ADM_JSDFToggleHelper::getControl(void)
+{
+    return new   diaElemToggle(&amp;_value,_title,NULL);
+}
+
+uint32_t ADM_JSDFToggleHelper::value(void)
+{
+	return _value;
+}
+
+void ADM_JSDFToggleHelper::setValue(uint32_t index)
+{
+	_value = index;
+}
+/*************************************************/
+JSPropertySpec ADM_JSDFToggle::properties[] = 
+{ 
+	{ &quot;value&quot;, valueProperty, JSPROP_ENUMERATE },
+	{ 0 }
+};
+
+JSFunctionSpec ADM_JSDFToggle::methods[] =
+{
+	{ 0 }
+};
+
+JSClass ADM_JSDFToggle::m_dfToggleHelper =
+{
+	&quot;DFToggle&quot;, JSCLASS_HAS_PRIVATE,
+	JS_PropertyStub, JS_PropertyStub,
+	ADM_JSDFToggle::JSGetProperty, ADM_JSDFToggle::JSSetProperty,
+	JS_EnumerateStub, JS_ResolveStub,
+	JS_ConvertStub, ADM_JSDFToggle::JSDestructor
+};
+
+JSObject *ADM_JSDFToggle::JSInit(JSContext *cx, JSObject *obj, JSObject *proto)
+{
+	return JS_InitClass(cx, obj, proto, &amp;m_dfToggleHelper, 
+		ADM_JSDFToggle::JSConstructor, 1,
+		ADM_JSDFToggle::properties, ADM_JSDFToggle::methods,
+		NULL, NULL);
+}
+/**
+    \fn ctor
+*/
+JSBool ADM_JSDFToggle::JSConstructor(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
+{
+	if (argc != 1)
+		return JS_FALSE;
+
+	if (!JSVAL_IS_STRING(argv[0]))
+		return JS_FALSE;
+
+	ADM_JSDFToggleHelper *pObject = new ADM_JSDFToggleHelper(JS_GetStringBytes(JSVAL_TO_STRING(argv[0])));
+
+	if (!JS_SetPrivate(cx, obj, pObject))
+		return JS_FALSE;
+
+	*rval = OBJECT_TO_JSVAL(obj);
+
+	return JS_TRUE;
+}
+
+void ADM_JSDFToggle::JSDestructor(JSContext *cx, JSObject *obj)
+{
+	ADM_JSDFToggleHelper *pObject = (ADM_JSDFToggleHelper*)JS_GetInstancePrivate(cx, obj, &amp;m_dfToggleHelper, NULL);
+
+	if (pObject)
+		delete pObject;
+}
+
+JSBool ADM_JSDFToggle::JSGetProperty(JSContext *cx, JSObject *obj, jsval id, jsval *vp)
+{
+	if (JSVAL_IS_INT(id)) 
+	{
+		ADM_JSDFToggleHelper *pObject = (ADM_JSDFToggleHelper*)JS_GetInstancePrivate(cx, obj, &amp;m_dfToggleHelper, NULL);
+
+		switch(JSVAL_TO_INT(id))
+		{
+			case valueProperty:
+			{
+				*vp = INT_TO_JSVAL(pObject-&gt;value());
+				break;
+			}
+		}
+	}
+
+	return JS_TRUE;
+}
+
+JSBool ADM_JSDFToggle::JSSetProperty(JSContext *cx, JSObject *obj, jsval id, jsval *vp)
+{
+	if (JSVAL_IS_INT(id)) 
+	{
+		ADM_JSDFToggleHelper *pObject = (ADM_JSDFToggleHelper*)JS_GetInstancePrivate(cx, obj, &amp;m_dfToggleHelper, NULL);
+
+		switch(JSVAL_TO_INT(id))
+		{
+			case valueProperty:
+			{
+				if (JSVAL_IS_INT(*vp))
+					pObject-&gt;setValue(JSVAL_TO_INT(*vp));
+
+				break;
+			}
+			default:
+				return JS_FALSE;
+		}
+	}
+
+	return JS_TRUE;
+}

Copied: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/src_dialogFactory/ADM_JSDFToggle.h (from rev 6207, branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src_dialogFactory/ADM_JSDFToggle.h)
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src_dialogFactory/ADM_JSDFToggle.h	2010-05-20 15:22:52 UTC (rev 6207)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/src_dialogFactory/ADM_JSDFToggle.h	2010-05-20 15:22:57 UTC (rev 6208)
@@ -0,0 +1,63 @@
+/**
+    \file   ADM_JSDFToggle.h
+    \brief  JS / DF binding
+    \author gruntster/mean 2010
+
+
+*/
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#ifndef _ADM_JSDFToggle_H
+#define _ADM_JSDFToggle_H
+
+#include &quot;jsapi.h&quot;
+#include &quot;DIA_factory.h&quot;
+#include &quot;ADM_JSDF.h&quot;
+/**
+    \class ADM_JSDFToggleHelper
+*/
+class ADM_JSDFToggleHelper : public ADM_JSDFBaseHelper
+{
+private:
+	char                *_title;
+	uint32_t            _value;
+
+public:
+                     ADM_JSDFToggleHelper(const char *title);
+                     ~ADM_JSDFToggleHelper(void);
+	virtual diaElem* getControl(void);
+            uint32_t value(void);
+            void     setValue(uint32_t value);
+};
+/**
+    \class ADM_JSDFToggle
+*/
+class ADM_JSDFToggle
+{
+public:
+	ADM_JSDFToggle(void) {}
+
+	static JSBool         JSConstructor(JSContext *cx, JSObject *obj, uintN argc, 
+								jsval *argv, jsval *rval);
+	static void           JSDestructor(JSContext *cx, JSObject *obj);
+	static JSObject       *JSInit(JSContext *cx, JSObject *obj, JSObject *proto = NULL);
+	static JSBool         JSGetProperty(JSContext *cx, JSObject *obj, jsval id, jsval *vp);
+	static JSBool         JSSetProperty(JSContext *cx, JSObject *obj, jsval id, jsval *vp);
+	static JSPropertySpec properties[];
+	static JSFunctionSpec methods[];
+	static JSClass        m_dfToggleHelper;
+
+	enum
+	{
+		valueProperty
+	};
+};
+
+#endif

Copied: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/src_dialogFactory/ADM_JSDialogFactory.cpp (from rev 6207, branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src_dialogFactory/ADM_JSDialogFactory.cpp)
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src_dialogFactory/ADM_JSDialogFactory.cpp	2010-05-20 15:22:52 UTC (rev 6207)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/src_dialogFactory/ADM_JSDialogFactory.cpp	2010-05-20 15:22:57 UTC (rev 6208)
@@ -0,0 +1,138 @@
+/**
+    \file   ADM_JSDialogFactory.cpp
+    \brief  JS / DF binding
+    \author gruntster 2010
+
+
+*/
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include &quot;ADM_JSDialogFactory.h&quot;
+
+ADM_JSDialogFactoryHelper::ADM_JSDialogFactoryHelper(const char *title)
+{
+	_title = ADM_strdup(title);
+}
+
+ADM_JSDialogFactoryHelper::~ADM_JSDialogFactoryHelper(void)
+{
+	if (_title)
+		delete _title;
+
+	_title = NULL;
+}
+
+void ADM_JSDialogFactoryHelper::addControl(ADM_JSDFBaseHelper* control)
+{
+	_controls.push_back(control);
+}
+
+diaElem** ADM_JSDialogFactoryHelper::getControls(int *controlCount)
+{
+	*controlCount = (int)_controls.size();
+
+	std::vector&lt;ADM_JSDFBaseHelper*&gt;::iterator it;
+	int i = 0;
+	diaElem **elems = new diaElem*[*controlCount];
+
+	for (it = _controls.begin(); it != _controls.end(); it++)
+	{
+		elems[i] = (*it)-&gt;getControl();
+		i++;
+	}
+
+	return elems;
+}
+
+const char* ADM_JSDialogFactoryHelper::title(void)
+{
+	return _title;
+}
+
+JSFunctionSpec ADM_JSDialogFactory::methods[] =
+{
+	{ &quot;addControl&quot;, addControl, 1, 0, 0 },
+	{ &quot;show&quot;, show, 0, 0, 0 },
+	{ 0 }
+};
+
+JSClass ADM_JSDialogFactory::m_dialogFactoryHelper =
+{
+	&quot;DialogFactory&quot;, JSCLASS_HAS_PRIVATE,
+	JS_PropertyStub, JS_PropertyStub,
+	JS_PropertyStub, JS_PropertyStub,
+	JS_EnumerateStub, JS_ResolveStub,
+	JS_ConvertStub, ADM_JSDialogFactory::JSDestructor
+};
+
+JSObject *ADM_JSDialogFactory::JSInit(JSContext *cx, JSObject *obj, JSObject *proto)
+{
+	return JS_InitClass(cx, obj, proto, &amp;m_dialogFactoryHelper, 
+		ADM_JSDialogFactory::JSConstructor, 1,
+		NULL, ADM_JSDialogFactory::methods,
+		NULL, NULL);
+}
+
+JSBool ADM_JSDialogFactory::JSConstructor(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
+{
+	if (argc != 1)
+		return JS_FALSE;
+
+	if (JSVAL_IS_STRING(argv[0]) == false)
+		return JS_FALSE;
+
+	ADM_JSDialogFactoryHelper *pObject = new ADM_JSDialogFactoryHelper(JS_GetStringBytes(JSVAL_TO_STRING(argv[0])));
+
+	if (!JS_SetPrivate(cx, obj, pObject))
+		return JS_FALSE;
+
+	*rval = OBJECT_TO_JSVAL(obj);
+
+	return JS_TRUE;
+}
+
+void ADM_JSDialogFactory::JSDestructor(JSContext *cx, JSObject *obj)
+{
+	ADM_JSDialogFactoryHelper *pObject = (ADM_JSDialogFactoryHelper*)JS_GetInstancePrivate(cx, obj, &amp;m_dialogFactoryHelper, NULL);
+
+	if (pObject != NULL)
+		delete pObject;
+}
+
+JSBool ADM_JSDialogFactory::addControl(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
+{
+	ADM_JSDialogFactoryHelper *p = (ADM_JSDialogFactoryHelper*)JS_GetInstancePrivate(cx, obj, &amp;m_dialogFactoryHelper, NULL);
+
+	if (argc != 1)
+		return JS_FALSE;
+
+	p-&gt;addControl((ADM_JSDFMenuHelper*)JS_GetPrivate(cx, JSVAL_TO_OBJECT(argv[0])));
+
+	return JS_TRUE;
+}
+
+JSBool ADM_JSDialogFactory::show(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
+{
+	ADM_JSDialogFactoryHelper *p = (ADM_JSDialogFactoryHelper*)JS_GetInstancePrivate(cx, obj, &amp;m_dialogFactoryHelper, NULL);
+
+	if (argc != 0)
+		return JS_FALSE;
+
+	int controlCount;
+	diaElem **elems = p-&gt;getControls(&amp;controlCount);
+
+	*rval = BOOLEAN_TO_JSVAL(diaFactoryRun(p-&gt;title(), controlCount, elems));
+
+	for (int i = 0; i &lt; controlCount; i++)
+		delete elems[i];
+
+	delete elems;
+
+	return JS_TRUE;
+}

Copied: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/src_dialogFactory/ADM_JSDialogFactory.h (from rev 6207, branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src_dialogFactory/ADM_JSDialogFactory.h)
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src_dialogFactory/ADM_JSDialogFactory.h	2010-05-20 15:22:52 UTC (rev 6207)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/src_dialogFactory/ADM_JSDialogFactory.h	2010-05-20 15:22:57 UTC (rev 6208)
@@ -0,0 +1,61 @@
+/**
+    \file   ADM_JSDialogFactory.h
+    \brief  JS / DF binding
+    \author gruntster 2010
+
+
+*/
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#ifndef _ADM_JSDialogFactory_H
+#define _ADM_JSDialogFactory_H
+
+#include &quot;jsapi.h&quot;
+#include &quot;DIA_factory.h&quot;
+#include &quot;ADM_JSDFMenu.h&quot;
+#include &lt;vector&gt;
+/**
+    \class ADM_JSDialogFactoryHelper
+*/
+class ADM_JSDialogFactoryHelper
+{
+private:
+	char* _title;
+	std::vector &lt;ADM_JSDFBaseHelper*&gt; _controls;
+
+public:
+	ADM_JSDialogFactoryHelper(const char *title);
+	~ADM_JSDialogFactoryHelper(void);
+	void addControl(ADM_JSDFBaseHelper* control);
+	diaElem** getControls(int *controlCount);
+	const char* title(void);
+};
+/**
+    \class ADM_JSDialogFactory
+*/
+
+class ADM_JSDialogFactory
+{
+public:
+	ADM_JSDialogFactory(void) {}
+	virtual ~ADM_JSDialogFactory(void);
+
+	static JSBool JSConstructor(JSContext *cx, JSObject *obj, uintN argc, 
+								jsval *argv, jsval *rval);
+	static void JSDestructor(JSContext *cx, JSObject *obj);
+	static JSObject *JSInit(JSContext *cx, JSObject *obj, JSObject *proto = NULL);
+	static JSBool addControl(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
+	static JSBool show(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
+
+	static JSFunctionSpec methods[];
+	static JSClass m_dialogFactoryHelper;
+};
+
+#endif

Copied: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/src_dialogFactory/ADM_JSDialogFactory_if.cpp (from rev 6207, branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src_dialogFactory/ADM_JSDialogFactory_if.cpp)
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src_dialogFactory/ADM_JSDialogFactory_if.cpp	2010-05-20 15:22:52 UTC (rev 6207)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/src_dialogFactory/ADM_JSDialogFactory_if.cpp	2010-05-20 15:22:57 UTC (rev 6208)
@@ -0,0 +1,56 @@
+/**
+    \file   ADM_JSDialogFactory_if.cpp
+    \brief  JS / DF binding
+    \author gruntster, mean (c) 2010
+
+
+    jsapigen does not like much variable number of arguments
+    In that case, we patch the generated file to go back to native spidermonkey api
+
+
+*/
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include &quot;ADM_default.h&quot;
+#include &quot;jsapi.h&quot;
+#include &quot;DIA_factory.h&quot;
+#include &quot;ADM_JSDFMenu.h&quot;
+#include &quot;ADM_JSDFToggle.h&quot;
+#include &quot;ADM_JSDFInteger.h&quot;
+#include &quot;ADM_JSDialogFactory.h&quot;
+
+/**
+    \fn ADM_JSDialogFactoryInit()
+    \brief Hook classes to spidermonkey
+*/
+bool ADM_JSDialogFactoryInit(JSContext *cx, JSObject *obj)
+{
+    if(NULL==ADM_JSDialogFactory::JSInit(cx,obj))
+    {
+        ADM_error(&quot;Cannot register dialogFactory js class\n&quot;);
+        return false;
+    }
+    if(NULL==ADM_JSDFMenu::JSInit(cx,obj))
+    {
+        ADM_error(&quot;Cannot register  menu js class\n&quot;);
+        return false;
+    }
+    if(NULL==ADM_JSDFToggle::JSInit(cx,obj))
+    {
+        ADM_error(&quot;Cannot register toggle js class\n&quot;);
+        return false;
+    }
+    if(NULL==ADM_JSDFInteger::JSInit(cx,obj))
+    {
+        ADM_error(&quot;Cannot register integer js class\n&quot;);
+        return false;
+    }
+    ADM_info(&quot;Registered DialogFactory classes\n&quot;);
+    return true;
+}
\ No newline at end of file

Copied: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/src_dialogFactory/CMakeLists.txt (from rev 6207, branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src_dialogFactory/CMakeLists.txt)
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src_dialogFactory/CMakeLists.txt	2010-05-20 15:22:52 UTC (rev 6207)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/src_dialogFactory/CMakeLists.txt	2010-05-20 15:22:57 UTC (rev 6208)
@@ -0,0 +1,14 @@
+SET(ADM_scriptDF_SRCS
+        ADM_JSDFMenu.cpp
+        ADM_JSDFToggle.cpp
+        ADM_JSDFInteger.cpp
+        ADM_JSDialogFactory.cpp
+        ADM_JSDialogFactory_if.cpp 
+        
+)
+
+ADD_DEFINITIONS(&quot;-DJS_THREADSAFE -DXP_UNIX&quot;)
+ADD_LIBRARY(ADM_scriptDF STATIC ${ADM_scriptDF_SRCS})
+include_directories(../include)
+include_directories(.)
+include_directories(${AVIDEMUX_TOP_SOURCE_DIR}/avidemux_core/ADM_smjs)

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/ADM_pyAdm.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/ADM_pyAdm.cpp	2010-05-20 15:22:52 UTC (rev 6207)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/ADM_pyAdm.cpp	2010-05-20 15:22:57 UTC (rev 6208)
@@ -18,7 +18,7 @@
 #include &quot;ADM_editor/ADM_edit.hxx&quot;
 #include &quot;ADM_coreTinyPy/include/tinypy.h&quot;
 #include &quot;ADM_coreTinyPy/include/ADM_tinypy.h&quot;
-#include &quot;ADM_script2/include/ADM_jsShell.h&quot;
+#include &quot;ADM_script2/include/ADM_scriptShell.h&quot;
 #include &quot;A_functions.h&quot;
 
 #include &quot;adm_gen.h&quot;

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/CMakeLists.txt	2010-05-20 15:22:52 UTC (rev 6207)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/CMakeLists.txt	2010-05-20 15:22:57 UTC (rev 6208)
@@ -3,5 +3,7 @@
 )
 
 ADD_LIBRARY(ADM_pyScript6 STATIC ${ADM_script_SRCS})
+ADD_DEFINITIONS(-DCPYTHON_MOD)
 include_directories(../include)
+include_directories(.)
 include_directories(${AVIDEMUX_TOP_SOURCE_DIR}/avidemux_core/ADM_coreTinyPy/include)

Deleted: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/include/ADM_pyIf.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/include/ADM_pyIf.h	2010-05-20 15:22:52 UTC (rev 6207)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/include/ADM_pyIf.h	2010-05-20 15:22:57 UTC (rev 6208)
@@ -1,21 +0,0 @@
-/**
-    \file ADM_pyIf.h
-    \brief Interface for python script 
-    \author mean <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A> 2010
-
-*/
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#ifndef ADM_PY_IF_H
-#define ADM_PY_IF_H
-
-bool parseTinyPyScript(const char *name);
-bool interactiveTinyPy(void);
-
-#endif
\ No newline at end of file

Added: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_scriptIf.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_scriptIf.cpp	2010-05-20 15:22:52 UTC (rev 6207)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_scriptIf.cpp	2010-05-20 15:22:57 UTC (rev 6208)
@@ -0,0 +1,76 @@
+/**
+    \file ADM_JSif.cpp
+    \brief interface to js
+*/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include &quot;ADM_default.h&quot;
+#include &quot;ADM_scriptIf.h&quot;
+#include &lt;stdarg.h&gt;
+#include &lt;vector&gt;
+#include &quot;ADM_editor/ADM_edit.hxx&quot;
+#include &quot;DIA_coreToolkit.h&quot;
+void    A_Resync(void);
+
+/* our variables */
+static jsLoggerFunc *jsLogger=NULL;
+static void *jsLoggerCookie=NULL;
+/**
+    \fn jsLogger
+*/
+bool isJsLogRedirected(void)
+{
+    if(jsLogger) return true;
+    return false;
+}
+/**
+    \fn jsLog
+*/
+bool jsLog(JS_LOG_TYPE type, const char *prf,...)
+{
+ static char print_buffer[1024];
+  	
+		va_list 	list;
+		va_start(list,	prf);
+		vsnprintf(print_buffer,1023,prf,list);
+		va_end(list);
+		print_buffer[1023]=0; // ensure the string is terminated
+        if(true==isJsLogRedirected())
+            jsLogger(jsLoggerCookie,type,print_buffer);
+        else
+        {
+            if(type==JS_LOG_ERROR)
+                GUI_Error_HIG(&quot;Script Error&quot;,&quot;%s&quot;,print_buffer);
+            else
+                ADM_warning(&quot;[JS]%s\n&quot;,print_buffer);
+        }
+
+        return true;
+}
+
+/**
+    \fn ADM_jsRegisterLogger
+*/
+bool ADM_jsRegisterLogger(void *cookie,jsLoggerFunc *fun)
+{
+    jsLoggerCookie=cookie;
+    jsLogger=fun;
+    return true;
+}
+/**
+    \fn ADM_jsUnregisterLogger
+*/
+bool ADM_jsUnregisterLogger(void)
+{
+    jsLogger=NULL;
+    return true;
+}
+// EOF
+

Added: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_scriptVideo.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_scriptVideo.cpp	2010-05-20 15:22:52 UTC (rev 6207)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_scriptVideo.cpp	2010-05-20 15:22:57 UTC (rev 6208)
@@ -0,0 +1,92 @@
+/**
+    \file ADM_jsVideo.cpp
+    \brief Video oriented functions
+    \author mean (c) 2009 <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
+
+
+    jsapigen does not like much variable number of arguments
+    In that case, we patch the generated file to go back to native spidermonkey api
+
+
+*/
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+//#include &quot;ADM_js.h&quot;
+#include &quot;ADM_editor/ADM_edit.hxx&quot;
+#include &quot;ADM_scriptAvidemux.h&quot;
+#include &quot;ADM_scriptVideo.h&quot;
+#include &quot;A_functions.h&quot;
+#include &quot;ADM_videoEncoderApi.h&quot;
+#include &quot;ADM_videoFilterApi.h&quot;
+#include &quot;ADM_videoFilters.h&quot;
+#include &quot;GUI_ui.h&quot;
+extern ADM_Composer *video_body;
+bool A_setVideoCodec(const char *nm);
+/**
+    \fn jsSetPostProc
+*/
+int jsSetPostProc (int a,int b, int c)
+{
+    return video_body-&gt;setPostProc(a,b,c);
+}
+
+
+/**
+    \fn A_setVideoCodec
+*/
+bool A_setVideoCodec(const char *nm)
+{
+    int idx=videoEncoder6_GetIndexFromName(nm);
+    if(idx==-1)
+    {
+        ADM_error(&quot;No such encoder :%s\n&quot;,nm);
+    }
+    // Select by index
+    videoEncoder6_SetCurrentEncoder(idx);
+    UI_setVideoCodec(idx);
+    return true;
+}
+/**
+     \fn jsClearFilters
+*/
+int jsClearVideoFilters()
+{
+    return ADM_vf_clearFilters();
+}
+/**
+    \fn jsGetMarkerA
+*/
+double jsGetMarkerA(void)
+{
+    return (double)video_body-&gt;getMarkerAPts();
+
+}
+/**
+    \fn jsGetMarkerB
+*/
+double jsGetMarkerB(void)
+{
+    return (double)video_body-&gt;getMarkerBPts();
+}
+/**
+    \fn jsSetMarkerA
+*/
+void   jsSetMarkerA(double a)
+{
+    video_body-&gt;setMarkerAPts( (uint64_t)a);
+}
+/**
+    \fn jsGetMarkerB
+*/
+void   jsSetMarkerB(double b)
+{
+    video_body-&gt;setMarkerBPts( (uint64_t)b);
+}
+
+//EOF

Added: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/CMakeLists.txt	2010-05-20 15:22:52 UTC (rev 6207)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/CMakeLists.txt	2010-05-20 15:22:57 UTC (rev 6208)
@@ -0,0 +1,9 @@
+SET(ADM_script_SRCS
+        ADM_scriptIf.cpp
+        ADM_scriptVideo.cpp
+)
+
+ADD_LIBRARY(ADM_script6 STATIC ${ADM_script_SRCS})
+include_directories(../include)
+include_directories(.)
+include_directories(${AVIDEMUX_TOP_SOURCE_DIR}/avidemux_core/ADM_smjs)

Deleted: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src_dialogFactory/ADM_JSDF.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src_dialogFactory/ADM_JSDF.h	2010-05-20 15:22:52 UTC (rev 6207)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src_dialogFactory/ADM_JSDF.h	2010-05-20 15:22:57 UTC (rev 6208)
@@ -1,31 +0,0 @@
-/**
-    \file   ADM_JSDF.h
-    \brief  JS / DF binding
-    \author gruntster/Mean 2010
-
-
-*/
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-#ifndef _ADM_JSDF_H
-#define _ADM_JSDF_H
-
-/**
-    \class ADM_JSBaseHelper
-*/
-class ADM_JSDFBaseHelper
-{
-public:
-                        ADM_JSDFBaseHelper() {};
-    virtual             ~ADM_JSDFBaseHelper() {};
-    virtual diaElem*    getControl(void)=0;
-};
-
-#endif

Deleted: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src_dialogFactory/ADM_JSDFInteger.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src_dialogFactory/ADM_JSDFInteger.cpp	2010-05-20 15:22:52 UTC (rev 6207)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src_dialogFactory/ADM_JSDFInteger.cpp	2010-05-20 15:22:57 UTC (rev 6208)
@@ -1,160 +0,0 @@
-/**
-    \file   ADM_JSDFInteger.cpp
-    \brief  JS / DF binding
-    \author gruntster/mean 2010
-
-
-
-*/
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#include &quot;ADM_JSDFInteger.h&quot;
-
-ADM_JSDFIntegerHelper::ADM_JSDFIntegerHelper(const char *title,int32_t mn,int32_t mx)
-{
-	_title = ADM_strdup(title); 
-    _min=mn;
-    _max=mx;
-	_value = 0;
-}
-
-ADM_JSDFIntegerHelper::~ADM_JSDFIntegerHelper(void)
-{
-	if (_title)
-		delete _title;
-
-	_title = NULL;
-
-
-}
-
-
-diaElem* ADM_JSDFIntegerHelper::getControl(void)
-{
-    return new diaElemInteger(&amp;_value,_title, _min,_max);
-}
-
-int32_t ADM_JSDFIntegerHelper::value(void)
-{
-	return _value;
-}
-
-void ADM_JSDFIntegerHelper::setValue(int32_t index)
-{
-	_value = index;
-}
-/*************************************************/
-JSPropertySpec ADM_JSDFInteger::properties[] = 
-{ 
-	{ &quot;value&quot;, valueProperty, JSPROP_ENUMERATE },
-	{ 0 }
-};
-
-JSFunctionSpec ADM_JSDFInteger::methods[] =
-{
-	{ 0 }
-};
-
-JSClass ADM_JSDFInteger::m_dfIntegerHelper =
-{
-	&quot;DFInteger&quot;, JSCLASS_HAS_PRIVATE,
-	JS_PropertyStub, JS_PropertyStub,
-	ADM_JSDFInteger::JSGetProperty, ADM_JSDFInteger::JSSetProperty,
-	JS_EnumerateStub, JS_ResolveStub,
-	JS_ConvertStub, ADM_JSDFInteger::JSDestructor
-};
-
-JSObject *ADM_JSDFInteger::JSInit(JSContext *cx, JSObject *obj, JSObject *proto)
-{
-	return JS_InitClass(cx, obj, proto, &amp;m_dfIntegerHelper, 
-		ADM_JSDFInteger::JSConstructor, 1,
-		ADM_JSDFInteger::properties, ADM_JSDFInteger::methods,
-		NULL, NULL);
-}
-/**
-    \fn ctor
-*/
-JSBool ADM_JSDFInteger::JSConstructor(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
-{
-	if (argc != 3)
-		return JS_FALSE;
-
-	if (!JSVAL_IS_STRING(argv[0]))
-		return JS_FALSE;
-
-	if (!JSVAL_IS_INT(argv[1]))
-		return JS_FALSE;
-
-	if (!JSVAL_IS_INT(argv[2]))
-		return JS_FALSE;
-
-
-	ADM_JSDFIntegerHelper *pObject = new ADM_JSDFIntegerHelper(
-                                                    JS_GetStringBytes(JSVAL_TO_STRING(argv[0])),
-                                                    JSVAL_TO_INT(argv[1]),
-                                                    JSVAL_TO_INT(argv[2])
-                                                );
-
-	if (!JS_SetPrivate(cx, obj, pObject))
-		return JS_FALSE;
-
-	*rval = OBJECT_TO_JSVAL(obj);
-
-	return JS_TRUE;
-}
-
-void ADM_JSDFInteger::JSDestructor(JSContext *cx, JSObject *obj)
-{
-	ADM_JSDFIntegerHelper *pObject = (ADM_JSDFIntegerHelper*)JS_GetInstancePrivate(cx, obj, &amp;m_dfIntegerHelper, NULL);
-
-	if (pObject)
-		delete pObject;
-}
-
-JSBool ADM_JSDFInteger::JSGetProperty(JSContext *cx, JSObject *obj, jsval id, jsval *vp)
-{
-	if (JSVAL_IS_INT(id)) 
-	{
-		ADM_JSDFIntegerHelper *pObject = (ADM_JSDFIntegerHelper*)JS_GetInstancePrivate(cx, obj, &amp;m_dfIntegerHelper, NULL);
-
-		switch(JSVAL_TO_INT(id))
-		{
-			case valueProperty:
-			{
-				*vp = INT_TO_JSVAL(pObject-&gt;value());
-				break;
-			}
-		}
-	}
-
-	return JS_TRUE;
-}
-
-JSBool ADM_JSDFInteger::JSSetProperty(JSContext *cx, JSObject *obj, jsval id, jsval *vp)
-{
-	if (JSVAL_IS_INT(id)) 
-	{
-		ADM_JSDFIntegerHelper *pObject = (ADM_JSDFIntegerHelper*)JS_GetInstancePrivate(cx, obj, &amp;m_dfIntegerHelper, NULL);
-
-		switch(JSVAL_TO_INT(id))
-		{
-			case valueProperty:
-			{
-				if (JSVAL_IS_INT(*vp))
-					pObject-&gt;setValue(JSVAL_TO_INT(*vp));
-
-				break;
-			}
-			default:
-				return JS_FALSE;
-		}
-	}
-
-	return JS_TRUE;
-}

Deleted: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src_dialogFactory/ADM_JSDFInteger.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src_dialogFactory/ADM_JSDFInteger.h	2010-05-20 15:22:52 UTC (rev 6207)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src_dialogFactory/ADM_JSDFInteger.h	2010-05-20 15:22:57 UTC (rev 6208)
@@ -1,66 +0,0 @@
-/**
-    \file   ADM_JSDFInteger.h
-    \brief  JS / DF binding
-    \author gruntster/mean 2010
-
-
-*/
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-#ifndef _ADM_JSDFInteger_H
-#define _ADM_JSDFInteger_H
-
-#include &quot;jsapi.h&quot;
-#include &quot;DIA_factory.h&quot;
-#include &quot;ADM_JSDF.h&quot;
-/**
-    \class ADM_JSDFIntegerHelper
-*/
-class ADM_JSDFIntegerHelper : public ADM_JSDFBaseHelper
-{
-private:
-	char                *_title;
-	int32_t             _value;
-    int32_t             _min,_max;
-
-public:
-                     ADM_JSDFIntegerHelper(const char *title,int32_t mn, int32_t mx);
-                     ~ADM_JSDFIntegerHelper(void);
-	virtual diaElem* getControl(void);
-            int32_t value(void);
-            void     setValue(int32_t value);
-};
-/**
-    \class ADM_JSDFInteger
-*/
-class ADM_JSDFInteger
-{
-protected:
-    int32_t   minimum,maximum;
-public:
-	ADM_JSDFInteger(int32_t mn,int32_t mx) {minimum=mn;maximum=mx;}
-
-	static JSBool         JSConstructor(JSContext *cx, JSObject *obj, uintN argc, 
-								jsval *argv, jsval *rval);
-	static void           JSDestructor(JSContext *cx, JSObject *obj);
-	static JSObject       *JSInit(JSContext *cx, JSObject *obj, JSObject *proto = NULL);
-	static JSBool         JSGetProperty(JSContext *cx, JSObject *obj, jsval id, jsval *vp);
-	static JSBool         JSSetProperty(JSContext *cx, JSObject *obj, jsval id, jsval *vp);
-	static JSPropertySpec properties[];
-	static JSFunctionSpec methods[];
-	static JSClass        m_dfIntegerHelper;
-
-	enum
-	{
-		valueProperty
-	};
-};
-
-#endif

Deleted: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src_dialogFactory/ADM_JSDFMenu.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src_dialogFactory/ADM_JSDFMenu.cpp	2010-05-20 15:22:52 UTC (rev 6207)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src_dialogFactory/ADM_JSDFMenu.cpp	2010-05-20 15:22:57 UTC (rev 6208)
@@ -1,193 +0,0 @@
-/**
-    \file   ADM_JSDFMenu.cpp
-    \brief  JS / DF binding
-    \author gruntster 2010
-
-
-
-*/
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#include &quot;ADM_JSDFMenu.h&quot;
-
-ADM_JSDFMenuHelper::ADM_JSDFMenuHelper(const char *title)
-{
-	_title = ADM_strdup(title);
-	_menuEntries = NULL;
-	_index = 0;
-}
-
-ADM_JSDFMenuHelper::~ADM_JSDFMenuHelper(void)
-{
-	if (_title)
-		delete _title;
-
-	_title = NULL;
-
-	std::vector&lt;char*&gt;::iterator it;
-
-	for (it = _items.begin(); it != _items.end(); it++)
-		delete *it;
-
-	_items.clear();
-
-	if (_menuEntries)
-		delete _menuEntries;
-
-	_menuEntries = NULL;
-}
-
-void ADM_JSDFMenuHelper::addItem(const char* item)
-{
-	_items.push_back(ADM_strdup(item));
-}
-
-diaElem* ADM_JSDFMenuHelper::getControl(void)
-{
-	if (_menuEntries)
-		delete _menuEntries;
-
-	std::vector&lt;char*&gt;::iterator it;
-	int i = 0;
-
-	_menuEntries = new diaMenuEntry[_items.size()];	
-
-	for (it = _items.begin(); it != _items.end(); it++)
-	{
-		_menuEntries[i].val = i;
-		_menuEntries[i].text = *it;
-		_menuEntries[i].desc = NULL;
-
-		i++;
-	}
-
-	return new diaElemMenu(&amp;_index, _title, _items.size(), _menuEntries);
-}
-
-int ADM_JSDFMenuHelper::index(void)
-{
-	return _index;
-}
-
-void ADM_JSDFMenuHelper::setIndex(int index)
-{
-	_index = index;
-}
-
-JSPropertySpec ADM_JSDFMenu::properties[] = 
-{ 
-	{ &quot;index&quot;, indexProperty, JSPROP_ENUMERATE },
-	{ 0 }
-};
-
-JSFunctionSpec ADM_JSDFMenu::methods[] =
-{
-	{ &quot;addItem&quot;, addItem, 1, 0, 0 },
-	{ 0 }
-};
-
-JSClass ADM_JSDFMenu::m_dfMenuHelper =
-{
-	&quot;DFMenu&quot;, JSCLASS_HAS_PRIVATE,
-	JS_PropertyStub, JS_PropertyStub,
-	ADM_JSDFMenu::JSGetProperty, ADM_JSDFMenu::JSSetProperty,
-	JS_EnumerateStub, JS_ResolveStub,
-	JS_ConvertStub, ADM_JSDFMenu::JSDestructor
-};
-
-JSObject *ADM_JSDFMenu::JSInit(JSContext *cx, JSObject *obj, JSObject *proto)
-{
-	return JS_InitClass(cx, obj, proto, &amp;m_dfMenuHelper, 
-		ADM_JSDFMenu::JSConstructor, 1,
-		ADM_JSDFMenu::properties, ADM_JSDFMenu::methods,
-		NULL, NULL);
-}
-
-JSBool ADM_JSDFMenu::JSConstructor(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
-{
-	if (argc != 1)
-		return JS_FALSE;
-
-	if (!JSVAL_IS_STRING(argv[0]))
-		return JS_FALSE;
-
-	ADM_JSDFMenuHelper *pObject = new ADM_JSDFMenuHelper(JS_GetStringBytes(JSVAL_TO_STRING(argv[0])));
-
-	if (!JS_SetPrivate(cx, obj, pObject))
-		return JS_FALSE;
-
-	*rval = OBJECT_TO_JSVAL(obj);
-
-	return JS_TRUE;
-}
-
-void ADM_JSDFMenu::JSDestructor(JSContext *cx, JSObject *obj)
-{
-	ADM_JSDFMenuHelper *pObject = (ADM_JSDFMenuHelper*)JS_GetInstancePrivate(cx, obj, &amp;m_dfMenuHelper, NULL);
-
-	if (pObject)
-		delete pObject;
-}
-
-JSBool ADM_JSDFMenu::addItem(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
-{
-	ADM_JSDFMenuHelper *pObject = (ADM_JSDFMenuHelper*)JS_GetInstancePrivate(cx, obj, &amp;m_dfMenuHelper, NULL);
-
-	if (argc != 1)
-		return JS_FALSE;
-
-	if (!JSVAL_IS_STRING(argv[0]))
-		return JS_FALSE;
-
-	pObject-&gt;addItem(JS_GetStringBytes(JSVAL_TO_STRING(argv[0])));
-
-	return JS_TRUE;
-}
-
-JSBool ADM_JSDFMenu::JSGetProperty(JSContext *cx, JSObject *obj, jsval id, jsval *vp)
-{
-	if (JSVAL_IS_INT(id)) 
-	{
-		ADM_JSDFMenuHelper *pObject = (ADM_JSDFMenuHelper*)JS_GetInstancePrivate(cx, obj, &amp;m_dfMenuHelper, NULL);
-
-		switch(JSVAL_TO_INT(id))
-		{
-			case indexProperty:
-			{
-				*vp = INT_TO_JSVAL(pObject-&gt;index());
-				break;
-			}
-		}
-	}
-
-	return JS_TRUE;
-}
-
-JSBool ADM_JSDFMenu::JSSetProperty(JSContext *cx, JSObject *obj, jsval id, jsval *vp)
-{
-	if (JSVAL_IS_INT(id)) 
-	{
-		ADM_JSDFMenuHelper *pObject = (ADM_JSDFMenuHelper*)JS_GetInstancePrivate(cx, obj, &amp;m_dfMenuHelper, NULL);
-
-		switch(JSVAL_TO_INT(id))
-		{
-			case indexProperty:
-			{
-				if (JSVAL_IS_INT(*vp))
-					pObject-&gt;setIndex(JSVAL_TO_INT(*vp));
-
-				break;
-			}
-			default:
-				return JS_FALSE;
-		}
-	}
-
-	return JS_TRUE;
-}

Deleted: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src_dialogFactory/ADM_JSDFMenu.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src_dialogFactory/ADM_JSDFMenu.h	2010-05-20 15:22:52 UTC (rev 6207)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src_dialogFactory/ADM_JSDFMenu.h	2010-05-20 15:22:57 UTC (rev 6208)
@@ -1,70 +0,0 @@
-/**
-    \file   ADM_JSDFMenu.h
-    \brief  JS / DF binding
-    \author gruntster 2010
-
-
-*/
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-#ifndef _ADM_JSDFMenu_H
-#define _ADM_JSDFMenu_H
-
-#include &quot;jsapi.h&quot;
-#include &quot;DIA_factory.h&quot;
-#include &quot;ADM_JSDF.h&quot;
-#include &lt;vector&gt;
-/**
-    \class ADM_JSDFMenuHelper
-*/
-class ADM_JSDFMenuHelper : public ADM_JSDFBaseHelper
-{
-private:
-	char                *_title;
-	uint32_t            _index;
-	diaMenuEntry        *_menuEntries;
-	std::vector &lt;char*&gt; _items;
-
-public:
-                     ADM_JSDFMenuHelper(const char *title);
-                     ~ADM_JSDFMenuHelper(void);
-            void     addItem(const char* item);
-	virtual diaElem* getControl(void);
-            int      index(void);
-            void     setIndex(int index);
-};
-/**
-    \class ADM_JSDFMenu
-*/
-class ADM_JSDFMenu
-{
-public:
-	ADM_JSDFMenu(void) {}
-
-	static JSBool   JSConstructor(JSContext *cx, JSObject *obj, uintN argc, 
-								jsval *argv, jsval *rval);
-	static void     JSDestructor(JSContext *cx, JSObject *obj);
-	static JSObject *JSInit(JSContext *cx, JSObject *obj, JSObject *proto = NULL);
-	static JSBool   JSGetProperty(JSContext *cx, JSObject *obj, jsval id, jsval *vp);
-	static JSBool   JSSetProperty(JSContext *cx, JSObject *obj, jsval id, jsval *vp);
-
-	static JSBool   addItem(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);	
-
-	static JSPropertySpec properties[];
-	static JSFunctionSpec methods[];
-	static JSClass m_dfMenuHelper;
-
-	enum
-	{
-		indexProperty
-	};
-};
-
-#endif

Deleted: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src_dialogFactory/ADM_JSDFToggle.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src_dialogFactory/ADM_JSDFToggle.cpp	2010-05-20 15:22:52 UTC (rev 6207)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src_dialogFactory/ADM_JSDFToggle.cpp	2010-05-20 15:22:57 UTC (rev 6208)
@@ -1,147 +0,0 @@
-/**
-    \file   ADM_JSDFToggle.cpp
-    \brief  JS / DF binding
-    \author gruntster/mean 2010
-
-
-
-*/
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#include &quot;ADM_JSDFToggle.h&quot;
-
-ADM_JSDFToggleHelper::ADM_JSDFToggleHelper(const char *title)
-{
-	_title = ADM_strdup(title);
-	_value = 0;
-}
-
-ADM_JSDFToggleHelper::~ADM_JSDFToggleHelper(void)
-{
-	if (_title)
-		delete _title;
-
-	_title = NULL;
-
-
-}
-
-
-diaElem* ADM_JSDFToggleHelper::getControl(void)
-{
-    return new   diaElemToggle(&amp;_value,_title,NULL);
-}
-
-uint32_t ADM_JSDFToggleHelper::value(void)
-{
-	return _value;
-}
-
-void ADM_JSDFToggleHelper::setValue(uint32_t index)
-{
-	_value = index;
-}
-/*************************************************/
-JSPropertySpec ADM_JSDFToggle::properties[] = 
-{ 
-	{ &quot;value&quot;, valueProperty, JSPROP_ENUMERATE },
-	{ 0 }
-};
-
-JSFunctionSpec ADM_JSDFToggle::methods[] =
-{
-	{ 0 }
-};
-
-JSClass ADM_JSDFToggle::m_dfToggleHelper =
-{
-	&quot;DFToggle&quot;, JSCLASS_HAS_PRIVATE,
-	JS_PropertyStub, JS_PropertyStub,
-	ADM_JSDFToggle::JSGetProperty, ADM_JSDFToggle::JSSetProperty,
-	JS_EnumerateStub, JS_ResolveStub,
-	JS_ConvertStub, ADM_JSDFToggle::JSDestructor
-};
-
-JSObject *ADM_JSDFToggle::JSInit(JSContext *cx, JSObject *obj, JSObject *proto)
-{
-	return JS_InitClass(cx, obj, proto, &amp;m_dfToggleHelper, 
-		ADM_JSDFToggle::JSConstructor, 1,
-		ADM_JSDFToggle::properties, ADM_JSDFToggle::methods,
-		NULL, NULL);
-}
-/**
-    \fn ctor
-*/
-JSBool ADM_JSDFToggle::JSConstructor(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
-{
-	if (argc != 1)
-		return JS_FALSE;
-
-	if (!JSVAL_IS_STRING(argv[0]))
-		return JS_FALSE;
-
-	ADM_JSDFToggleHelper *pObject = new ADM_JSDFToggleHelper(JS_GetStringBytes(JSVAL_TO_STRING(argv[0])));
-
-	if (!JS_SetPrivate(cx, obj, pObject))
-		return JS_FALSE;
-
-	*rval = OBJECT_TO_JSVAL(obj);
-
-	return JS_TRUE;
-}
-
-void ADM_JSDFToggle::JSDestructor(JSContext *cx, JSObject *obj)
-{
-	ADM_JSDFToggleHelper *pObject = (ADM_JSDFToggleHelper*)JS_GetInstancePrivate(cx, obj, &amp;m_dfToggleHelper, NULL);
-
-	if (pObject)
-		delete pObject;
-}
-
-JSBool ADM_JSDFToggle::JSGetProperty(JSContext *cx, JSObject *obj, jsval id, jsval *vp)
-{
-	if (JSVAL_IS_INT(id)) 
-	{
-		ADM_JSDFToggleHelper *pObject = (ADM_JSDFToggleHelper*)JS_GetInstancePrivate(cx, obj, &amp;m_dfToggleHelper, NULL);
-
-		switch(JSVAL_TO_INT(id))
-		{
-			case valueProperty:
-			{
-				*vp = INT_TO_JSVAL(pObject-&gt;value());
-				break;
-			}
-		}
-	}
-
-	return JS_TRUE;
-}
-
-JSBool ADM_JSDFToggle::JSSetProperty(JSContext *cx, JSObject *obj, jsval id, jsval *vp)
-{
-	if (JSVAL_IS_INT(id)) 
-	{
-		ADM_JSDFToggleHelper *pObject = (ADM_JSDFToggleHelper*)JS_GetInstancePrivate(cx, obj, &amp;m_dfToggleHelper, NULL);
-
-		switch(JSVAL_TO_INT(id))
-		{
-			case valueProperty:
-			{
-				if (JSVAL_IS_INT(*vp))
-					pObject-&gt;setValue(JSVAL_TO_INT(*vp));
-
-				break;
-			}
-			default:
-				return JS_FALSE;
-		}
-	}
-
-	return JS_TRUE;
-}

Deleted: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src_dialogFactory/ADM_JSDFToggle.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src_dialogFactory/ADM_JSDFToggle.h	2010-05-20 15:22:52 UTC (rev 6207)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src_dialogFactory/ADM_JSDFToggle.h	2010-05-20 15:22:57 UTC (rev 6208)
@@ -1,63 +0,0 @@
-/**
-    \file   ADM_JSDFToggle.h
-    \brief  JS / DF binding
-    \author gruntster/mean 2010
-
-
-*/
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-#ifndef _ADM_JSDFToggle_H
-#define _ADM_JSDFToggle_H
-
-#include &quot;jsapi.h&quot;
-#include &quot;DIA_factory.h&quot;
-#include &quot;ADM_JSDF.h&quot;
-/**
-    \class ADM_JSDFToggleHelper
-*/
-class ADM_JSDFToggleHelper : public ADM_JSDFBaseHelper
-{
-private:
-	char                *_title;
-	uint32_t            _value;
-
-public:
-                     ADM_JSDFToggleHelper(const char *title);
-                     ~ADM_JSDFToggleHelper(void);
-	virtual diaElem* getControl(void);
-            uint32_t value(void);
-            void     setValue(uint32_t value);
-};
-/**
-    \class ADM_JSDFToggle
-*/
-class ADM_JSDFToggle
-{
-public:
-	ADM_JSDFToggle(void) {}
-
-	static JSBool         JSConstructor(JSContext *cx, JSObject *obj, uintN argc, 
-								jsval *argv, jsval *rval);
-	static void           JSDestructor(JSContext *cx, JSObject *obj);
-	static JSObject       *JSInit(JSContext *cx, JSObject *obj, JSObject *proto = NULL);
-	static JSBool         JSGetProperty(JSContext *cx, JSObject *obj, jsval id, jsval *vp);
-	static JSBool         JSSetProperty(JSContext *cx, JSObject *obj, jsval id, jsval *vp);
-	static JSPropertySpec properties[];
-	static JSFunctionSpec methods[];
-	static JSClass        m_dfToggleHelper;
-
-	enum
-	{
-		valueProperty
-	};
-};
-
-#endif

Deleted: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src_dialogFactory/ADM_JSDialogFactory.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src_dialogFactory/ADM_JSDialogFactory.cpp	2010-05-20 15:22:52 UTC (rev 6207)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src_dialogFactory/ADM_JSDialogFactory.cpp	2010-05-20 15:22:57 UTC (rev 6208)
@@ -1,138 +0,0 @@
-/**
-    \file   ADM_JSDialogFactory.cpp
-    \brief  JS / DF binding
-    \author gruntster 2010
-
-
-*/
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#include &quot;ADM_JSDialogFactory.h&quot;
-
-ADM_JSDialogFactoryHelper::ADM_JSDialogFactoryHelper(const char *title)
-{
-	_title = ADM_strdup(title);
-}
-
-ADM_JSDialogFactoryHelper::~ADM_JSDialogFactoryHelper(void)
-{
-	if (_title)
-		delete _title;
-
-	_title = NULL;
-}
-
-void ADM_JSDialogFactoryHelper::addControl(ADM_JSDFBaseHelper* control)
-{
-	_controls.push_back(control);
-}
-
-diaElem** ADM_JSDialogFactoryHelper::getControls(int *controlCount)
-{
-	*controlCount = (int)_controls.size();
-
-	std::vector&lt;ADM_JSDFBaseHelper*&gt;::iterator it;
-	int i = 0;
-	diaElem **elems = new diaElem*[*controlCount];
-
-	for (it = _controls.begin(); it != _controls.end(); it++)
-	{
-		elems[i] = (*it)-&gt;getControl();
-		i++;
-	}
-
-	return elems;
-}
-
-const char* ADM_JSDialogFactoryHelper::title(void)
-{
-	return _title;
-}
-
-JSFunctionSpec ADM_JSDialogFactory::methods[] =
-{
-	{ &quot;addControl&quot;, addControl, 1, 0, 0 },
-	{ &quot;show&quot;, show, 0, 0, 0 },
-	{ 0 }
-};
-
-JSClass ADM_JSDialogFactory::m_dialogFactoryHelper =
-{
-	&quot;DialogFactory&quot;, JSCLASS_HAS_PRIVATE,
-	JS_PropertyStub, JS_PropertyStub,
-	JS_PropertyStub, JS_PropertyStub,
-	JS_EnumerateStub, JS_ResolveStub,
-	JS_ConvertStub, ADM_JSDialogFactory::JSDestructor
-};
-
-JSObject *ADM_JSDialogFactory::JSInit(JSContext *cx, JSObject *obj, JSObject *proto)
-{
-	return JS_InitClass(cx, obj, proto, &amp;m_dialogFactoryHelper, 
-		ADM_JSDialogFactory::JSConstructor, 1,
-		NULL, ADM_JSDialogFactory::methods,
-		NULL, NULL);
-}
-
-JSBool ADM_JSDialogFactory::JSConstructor(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
-{
-	if (argc != 1)
-		return JS_FALSE;
-
-	if (JSVAL_IS_STRING(argv[0]) == false)
-		return JS_FALSE;
-
-	ADM_JSDialogFactoryHelper *pObject = new ADM_JSDialogFactoryHelper(JS_GetStringBytes(JSVAL_TO_STRING(argv[0])));
-
-	if (!JS_SetPrivate(cx, obj, pObject))
-		return JS_FALSE;
-
-	*rval = OBJECT_TO_JSVAL(obj);
-
-	return JS_TRUE;
-}
-
-void ADM_JSDialogFactory::JSDestructor(JSContext *cx, JSObject *obj)
-{
-	ADM_JSDialogFactoryHelper *pObject = (ADM_JSDialogFactoryHelper*)JS_GetInstancePrivate(cx, obj, &amp;m_dialogFactoryHelper, NULL);
-
-	if (pObject != NULL)
-		delete pObject;
-}
-
-JSBool ADM_JSDialogFactory::addControl(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
-{
-	ADM_JSDialogFactoryHelper *p = (ADM_JSDialogFactoryHelper*)JS_GetInstancePrivate(cx, obj, &amp;m_dialogFactoryHelper, NULL);
-
-	if (argc != 1)
-		return JS_FALSE;
-
-	p-&gt;addControl((ADM_JSDFMenuHelper*)JS_GetPrivate(cx, JSVAL_TO_OBJECT(argv[0])));
-
-	return JS_TRUE;
-}
-
-JSBool ADM_JSDialogFactory::show(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
-{
-	ADM_JSDialogFactoryHelper *p = (ADM_JSDialogFactoryHelper*)JS_GetInstancePrivate(cx, obj, &amp;m_dialogFactoryHelper, NULL);
-
-	if (argc != 0)
-		return JS_FALSE;
-
-	int controlCount;
-	diaElem **elems = p-&gt;getControls(&amp;controlCount);
-
-	*rval = BOOLEAN_TO_JSVAL(diaFactoryRun(p-&gt;title(), controlCount, elems));
-
-	for (int i = 0; i &lt; controlCount; i++)
-		delete elems[i];
-
-	delete elems;
-
-	return JS_TRUE;
-}

Deleted: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src_dialogFactory/ADM_JSDialogFactory.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src_dialogFactory/ADM_JSDialogFactory.h	2010-05-20 15:22:52 UTC (rev 6207)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src_dialogFactory/ADM_JSDialogFactory.h	2010-05-20 15:22:57 UTC (rev 6208)
@@ -1,61 +0,0 @@
-/**
-    \file   ADM_JSDialogFactory.h
-    \brief  JS / DF binding
-    \author gruntster 2010
-
-
-*/
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-#ifndef _ADM_JSDialogFactory_H
-#define _ADM_JSDialogFactory_H
-
-#include &quot;jsapi.h&quot;
-#include &quot;DIA_factory.h&quot;
-#include &quot;ADM_JSDFMenu.h&quot;
-#include &lt;vector&gt;
-/**
-    \class ADM_JSDialogFactoryHelper
-*/
-class ADM_JSDialogFactoryHelper
-{
-private:
-	char* _title;
-	std::vector &lt;ADM_JSDFBaseHelper*&gt; _controls;
-
-public:
-	ADM_JSDialogFactoryHelper(const char *title);
-	~ADM_JSDialogFactoryHelper(void);
-	void addControl(ADM_JSDFBaseHelper* control);
-	diaElem** getControls(int *controlCount);
-	const char* title(void);
-};
-/**
-    \class ADM_JSDialogFactory
-*/
-
-class ADM_JSDialogFactory
-{
-public:
-	ADM_JSDialogFactory(void) {}
-	virtual ~ADM_JSDialogFactory(void);
-
-	static JSBool JSConstructor(JSContext *cx, JSObject *obj, uintN argc, 
-								jsval *argv, jsval *rval);
-	static void JSDestructor(JSContext *cx, JSObject *obj);
-	static JSObject *JSInit(JSContext *cx, JSObject *obj, JSObject *proto = NULL);
-	static JSBool addControl(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
-	static JSBool show(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
-
-	static JSFunctionSpec methods[];
-	static JSClass m_dialogFactoryHelper;
-};
-
-#endif

Deleted: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src_dialogFactory/ADM_JSDialogFactory_if.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src_dialogFactory/ADM_JSDialogFactory_if.cpp	2010-05-20 15:22:52 UTC (rev 6207)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src_dialogFactory/ADM_JSDialogFactory_if.cpp	2010-05-20 15:22:57 UTC (rev 6208)
@@ -1,56 +0,0 @@
-/**
-    \file   ADM_JSDialogFactory_if.cpp
-    \brief  JS / DF binding
-    \author gruntster, mean (c) 2010
-
-
-    jsapigen does not like much variable number of arguments
-    In that case, we patch the generated file to go back to native spidermonkey api
-
-
-*/
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#include &quot;ADM_default.h&quot;
-#include &quot;jsapi.h&quot;
-#include &quot;DIA_factory.h&quot;
-#include &quot;ADM_JSDFMenu.h&quot;
-#include &quot;ADM_JSDFToggle.h&quot;
-#include &quot;ADM_JSDFInteger.h&quot;
-#include &quot;ADM_JSDialogFactory.h&quot;
-
-/**
-    \fn ADM_JSDialogFactoryInit()
-    \brief Hook classes to spidermonkey
-*/
-bool ADM_JSDialogFactoryInit(JSContext *cx, JSObject *obj)
-{
-    if(NULL==ADM_JSDialogFactory::JSInit(cx,obj))
-    {
-        ADM_error(&quot;Cannot register dialogFactory js class\n&quot;);
-        return false;
-    }
-    if(NULL==ADM_JSDFMenu::JSInit(cx,obj))
-    {
-        ADM_error(&quot;Cannot register  menu js class\n&quot;);
-        return false;
-    }
-    if(NULL==ADM_JSDFToggle::JSInit(cx,obj))
-    {
-        ADM_error(&quot;Cannot register toggle js class\n&quot;);
-        return false;
-    }
-    if(NULL==ADM_JSDFInteger::JSInit(cx,obj))
-    {
-        ADM_error(&quot;Cannot register integer js class\n&quot;);
-        return false;
-    }
-    ADM_info(&quot;Registered DialogFactory classes\n&quot;);
-    return true;
-}
\ No newline at end of file

Deleted: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src_dialogFactory/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src_dialogFactory/CMakeLists.txt	2010-05-20 15:22:52 UTC (rev 6207)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src_dialogFactory/CMakeLists.txt	2010-05-20 15:22:57 UTC (rev 6208)
@@ -1,14 +0,0 @@
-SET(ADM_scriptDF_SRCS
-        ADM_JSDFMenu.cpp
-        ADM_JSDFToggle.cpp
-        ADM_JSDFInteger.cpp
-        ADM_JSDialogFactory.cpp
-        ADM_JSDialogFactory_if.cpp 
-        
-)
-
-ADD_DEFINITIONS(&quot;-DJS_THREADSAFE -DXP_UNIX&quot;)
-ADD_LIBRARY(ADM_scriptDF STATIC ${ADM_scriptDF_SRCS})
-include_directories(../include)
-include_directories(.)
-include_directories(${AVIDEMUX_TOP_SOURCE_DIR}/avidemux_core/ADM_smjs)

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp	2010-05-20 15:22:52 UTC (rev 6207)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp	2010-05-20 15:22:57 UTC (rev 6208)
@@ -40,8 +40,7 @@
 
 #include &quot;avi_vars.h&quot;
 #include &quot;prototype.h&quot; // FIXME
-#include &quot;ADM_script2/include/ADM_jsIf.h&quot;
-#include &quot;ADM_pyScript/include/ADM_pyIf.h&quot;
+#include &quot;ADM_script2/include/ADM_scriptIf.h&quot;
 renderZoom currentZoom=ZOOM_1_1;
 //***********************************
 //******** A Function ***************

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/main.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/main.cpp	2010-05-20 15:22:52 UTC (rev 6207)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/main.cpp	2010-05-20 15:22:57 UTC (rev 6208)
@@ -49,7 +49,7 @@
 #include &quot;ADM_render/GUI_sdlRender.h&quot;
 #endif
 
-#include &quot;ADM_script2/include/ADM_jsIf.h&quot;
+#include &quot;ADM_script2/include/ADM_scriptIf.h&quot;
 void onexit( void );
 //extern void automation(int argc, char **argv);
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake	2010-05-20 15:22:52 UTC (rev 6207)
+++ branches/avidemux_2.6_branch_mean/avidemux/commonCmakeApplication.cmake	2010-05-20 15:22:57 UTC (rev 6208)
@@ -97,9 +97,10 @@
 #ADM_filter6 
 ADM_osSupport6 
 ADM_requant6 
-#ADM_script6 
-ADM_script26 
-ADM_scriptDF
+ADM_script6 
+ADM_pyScript6 
+ADM_jsScript6 
+#ADM_scriptDF
 ADM_videoEncoder6 
 ADM_internalVideoFilter6
 ADM_toolkit6

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_shell/Q_shell.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_shell/Q_shell.h	2010-05-20 15:22:52 UTC (rev 6207)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_shell/Q_shell.h	2010-05-20 15:22:57 UTC (rev 6208)
@@ -6,7 +6,7 @@
 #include &quot;ADM_inttype.h&quot;
 #include &lt;QtGui/QItemDelegate&gt;
 #include &quot;ui_shell.h&quot;
-#include &quot;ADM_jsShell.h&quot;
+#include &quot;ADM_scriptShell.h&quot;
 /**
     \class ADM_jsQt4Shell
 */


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003407.html">[Avidemux-svn-commit] r6207 - in	branches/avidemux_2.6_branch_mean/avidemux: . common	common/ADM_pyScript common/ADM_pyScript/include	common/ADM_pyScript/src common/ADM_script2	common/ADM_script2/js common/ADM_script2/py	common/ADM_script2/py/include common/ADM_script2/src
</A></li>
	<LI>Next message: <A HREF="003409.html">[Avidemux-svn-commit] r6209 - in branches/avidemux_2.6_branch_mean:	avidemux avidemux/common/ADM_script2/include	avidemux/common/ADM_script2/js avidemux/common/ADM_script2/py	avidemux/common/ADM_script2/src cmake
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3408">[ date ]</a>
              <a href="thread.html#3408">[ thread ]</a>
              <a href="subject.html#3408">[ subject ]</a>
              <a href="author.html#3408">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">More information about the Avidemux-svn-commit
mailing list</a><br>
</body></html>
