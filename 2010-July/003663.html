<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Avidemux-svn-commit] r6475 - in branches/avidemux_2.6_branch_mean:	avidemux/gtk/ADM_UIs/include	avidemux/gtk/ADM_userInterfaces/ADM_dialog	avidemux/qt4/ADM_UIs/include	avidemux/qt4/ADM_userInterfaces/ADM_dialog	avidemux/qt4/ADM_userInterfaces/ADM_filters	avidemux_core/ADM_coreVideoFilter/include	avidemux_core/ADM_coreVideoFilter/src
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/avidemux-svn-commit/2010-July/index.html" >
   <LINK REL="made" HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r6475%20-%20in%20branches/avidemux_2.6_branch_mean%3A%0A%09avidemux/gtk/ADM_UIs/include%0A%09avidemux/gtk/ADM_userInterfaces/ADM_dialog%0A%09avidemux/qt4/ADM_UIs/include%0A%09avidemux/qt4/ADM_userInterfaces/ADM_dialog%0A%09avidemux/qt4/ADM_userInterfaces/ADM_filters%0A%09avidemux_core/ADM_coreVideoFilter/include%0A%09avidemux_core/ADM_coreVideoFilter/src&In-Reply-To=%3C20100723060041.16F02480E63%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003662.html">
   <LINK REL="Next"  HREF="003664.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Avidemux-svn-commit] r6475 - in branches/avidemux_2.6_branch_mean:	avidemux/gtk/ADM_UIs/include	avidemux/gtk/ADM_userInterfaces/ADM_dialog	avidemux/qt4/ADM_UIs/include	avidemux/qt4/ADM_userInterfaces/ADM_dialog	avidemux/qt4/ADM_userInterfaces/ADM_filters	avidemux_core/ADM_coreVideoFilter/include	avidemux_core/ADM_coreVideoFilter/src</H1>
    <B>mean at mail.berlios.de</B> 
    <A HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r6475%20-%20in%20branches/avidemux_2.6_branch_mean%3A%0A%09avidemux/gtk/ADM_UIs/include%0A%09avidemux/gtk/ADM_userInterfaces/ADM_dialog%0A%09avidemux/qt4/ADM_UIs/include%0A%09avidemux/qt4/ADM_userInterfaces/ADM_dialog%0A%09avidemux/qt4/ADM_userInterfaces/ADM_filters%0A%09avidemux_core/ADM_coreVideoFilter/include%0A%09avidemux_core/ADM_coreVideoFilter/src&In-Reply-To=%3C20100723060041.16F02480E63%40sheep.berlios.de%3E"
       TITLE="[Avidemux-svn-commit] r6475 - in branches/avidemux_2.6_branch_mean:	avidemux/gtk/ADM_UIs/include	avidemux/gtk/ADM_userInterfaces/ADM_dialog	avidemux/qt4/ADM_UIs/include	avidemux/qt4/ADM_userInterfaces/ADM_dialog	avidemux/qt4/ADM_userInterfaces/ADM_filters	avidemux_core/ADM_coreVideoFilter/include	avidemux_core/ADM_coreVideoFilter/src">mean at mail.berlios.de
       </A><BR>
    <I>Fri Jul 23 08:00:41 CEST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="003662.html">[Avidemux-svn-commit] r6474 - in branches/avidemux_2.6_branch_mean:	avidemux/common/ADM_videoFilter2/include	avidemux_core/ADM_coreVideoFilter/include
</A></li>
        <LI>Next message: <A HREF="003664.html">[Avidemux-svn-commit] r6476 - in	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6:	. resampleFps
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3663">[ date ]</a>
              <a href="thread.html#3663">[ thread ]</a>
              <a href="subject.html#3663">[ subject ]</a>
              <a href="author.html#3663">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: mean
Date: 2010-07-23 08:00:40 +0200 (Fri, 23 Jul 2010)
New Revision: 6475

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/include/DIA_flyDialogGtk.h
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_flyPreview.h
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/include/DIA_flyDialogQt4.h
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/DIA_flyPreview.h
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters/Q_seekablePreview.cpp
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters/Q_seekablePreview.h
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters/seekablePreview.ui
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/include/DIA_flyDialog.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/src/DIA_flyDialog.cpp
Log:
[flyDialog] Add a setCurrentPts function, unused most of the time by handy for preview

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/include/DIA_flyDialogGtk.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/include/DIA_flyDialogGtk.h	2010-07-23 06:00:37 UTC (rev 6474)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_UIs/include/DIA_flyDialogGtk.h	2010-07-23 06:00:40 UTC (rev 6475)
@@ -37,6 +37,7 @@
   virtual uint32_t sliderGet(void);
   virtual uint8_t  sliderSet(uint32_t value);
   virtual void    postInit(uint8_t reInit);
+  virtual bool    setCurrentPts(uint64_t  pts){return true;};
 };
 
 #endif

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_flyPreview.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_flyPreview.h	2010-07-23 06:00:37 UTC (rev 6474)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_dialog/DIA_flyPreview.h	2010-07-23 06:00:40 UTC (rev 6475)
@@ -12,6 +12,7 @@
 	flyPreview(uint32_t width, uint32_t height, void *canvas) : 
 	  ADM_flyDialogGtk(width, height, NULL, canvas, NULL, 0, RESIZE_NONE) {delete[] _rgbBuffer; _rgbBuffer = NULL;};
 	virtual ~flyPreview(void) {_rgbBuffer = NULL;};
+    bool setCurrentPts(uint64_t pts) {return 1;}
 };
 
 class flySeekablePreview : public ADM_flyDialogGtk
@@ -21,7 +22,7 @@
 	uint8_t download(void) {return 1;}
 	uint8_t upload(void) {return 1;}
 	uint8_t cleanup(void) {return 1;}
-
+    bool setCurrentPts(uint64_t pts) {return 1;}
 	flySeekablePreview(uint32_t width, uint32_t height, ADM_coreVideoFilter *videoStream, void *canvas, void *slider) : 
 	  ADM_flyDialogGtk(width, height, videoStream, canvas, slider, 0, RESIZE_AUTO) {delete[] _rgbBufferOut; _rgbBufferOut = NULL;};
 	virtual ~flySeekablePreview(void) {_rgbBufferOut = NULL;};

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/include/DIA_flyDialogQt4.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/include/DIA_flyDialogQt4.h	2010-07-23 06:00:37 UTC (rev 6474)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_UIs/include/DIA_flyDialogQt4.h	2010-07-23 06:00:40 UTC (rev 6475)
@@ -44,6 +44,7 @@
   virtual uint32_t sliderGet(void);
   virtual uint8_t  sliderSet(uint32_t value);
   virtual void    postInit(uint8_t reInit);
+    bool          setCurrentPts(uint64_t pts) {return 1;}
 };
 
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/DIA_flyPreview.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/DIA_flyPreview.h	2010-07-23 06:00:37 UTC (rev 6474)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/DIA_flyPreview.h	2010-07-23 06:00:40 UTC (rev 6475)
@@ -14,16 +14,31 @@
 	virtual ~flyPreview(void) {_rgbBuffer = NULL;};
 };
 
+typedef bool (*CookieFunc)(void *c,uint64_t pts);
 class flySeekablePreview : public ADM_flyDialogQt4
 {
+protected:
+    void *cookie;
+    CookieFunc cookieFunc;
 public:
 	uint8_t process(void) {_rgbBufferOut = _rgbBuffer; return 1;}
 	uint8_t download(void) {return 1;}
 	uint8_t upload(void) {return 1;}
 	uint8_t cleanup(void) {return 1;}
-
+    bool    setCurrentPts(uint64_t pts)
+            {
+                if(cookieFunc)
+                    cookieFunc(cookie,pts);
+                return true;
+            }
 	flySeekablePreview(uint32_t width, uint32_t height, ADM_coreVideoFilter *videoStream, void *canvas, void *slider) : 
-	  ADM_flyDialogQt4(width, height, videoStream, canvas, slider, 0, RESIZE_AUTO) {delete[] _rgbBufferOut; _rgbBufferOut = NULL;};
+	  ADM_flyDialogQt4(width, height, videoStream, canvas, slider, 0, RESIZE_AUTO) {delete[] _rgbBufferOut; _rgbBufferOut = NULL;cookie=NULL;cookieFunc=NULL;};
 	virtual ~flySeekablePreview(void) {_rgbBufferOut = NULL;};
+    bool setCookieFunc(CookieFunc cookieFunc, void *cookie)
+        {
+                this-&gt;cookieFunc=cookieFunc;
+                this-&gt;cookie=cookie;
+                return true;
+        }
 };
 #endif

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters/Q_seekablePreview.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters/Q_seekablePreview.cpp	2010-07-23 06:00:37 UTC (rev 6474)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters/Q_seekablePreview.cpp	2010-07-23 06:00:40 UTC (rev 6475)
@@ -16,7 +16,7 @@
  ***************************************************************************/
 
 #include &quot;Q_seekablePreview.h&quot;
-
+#include &quot;ADM_vidMisc.h&quot;
 Ui_seekablePreviewWindow::Ui_seekablePreviewWindow(QWidget *parent, ADM_coreVideoFilter *videoStream, uint32_t defaultFrame) : QDialog(parent)
 {
 	ui.setupUi(this);
@@ -55,7 +55,7 @@
 	canvas = new ADM_QCanvas(ui.frame, canvasWidth, canvasHeight);
 	canvas-&gt;show();
 	seekablePreview = new flySeekablePreview(canvasWidth, canvasHeight, videoStream, canvas, ui.horizontalSlider);	
-
+    seekablePreview-&gt;setCookieFunc(setCurrentPtsCallback,this);
 	seekablePreview-&gt;process();
 	seekablePreview-&gt;sliderChanged();
 }
@@ -68,4 +68,28 @@
 uint32_t Ui_seekablePreviewWindow::frameIndex()
 {
 	return seekablePreview-&gt;sliderGet();
-}
\ No newline at end of file
+}
+/**
+    \fn setCurrentPtsCallback
+    \brief callback so that the flyDialog can update its father widget
+*/
+bool Ui_seekablePreviewWindow::setCurrentPtsCallback(void *cookie,uint64_t pts)
+{
+    if(cookie)
+    {
+        return ((Ui_seekablePreviewWindow *)cookie)-&gt;setTime(pts);
+    }
+    printf(&quot;No cookie, New PTS :%&quot;LLD&quot; us\n&quot;,pts);
+    return true;
+}
+/**
+    \fn setTime
+    \brief Set timecode
+*/
+bool      Ui_seekablePreviewWindow::setTime(uint64_t timestamp)
+{
+    const char *s=ADM_us2plain(timestamp);
+    ui.label-&gt;setText(s);
+    return true;
+}
+// EOF
\ No newline at end of file

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters/Q_seekablePreview.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters/Q_seekablePreview.h	2010-07-23 06:00:37 UTC (rev 6474)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters/Q_seekablePreview.h	2010-07-23 06:00:40 UTC (rev 6475)
@@ -25,7 +25,8 @@
 class Ui_seekablePreviewWindow : public QDialog
 {
 	Q_OBJECT
-
+protected:
+    static bool setCurrentPtsCallback(void *cookie,uint64_t pts);
 public:
 	ADM_QCanvas *canvas;
 	flySeekablePreview *seekablePreview;
@@ -33,7 +34,8 @@
 	Ui_seekablePreviewWindow(QWidget *parent, ADM_coreVideoFilter *videoStream, uint32_t defaultFrame = 0);
 	~Ui_seekablePreviewWindow();
 	void resetVideoStream(ADM_coreVideoFilter *videoStream);
-	uint32_t frameIndex();
+	uint32_t frameIndex();
+    bool      setTime(uint64_t timestamp);
 
 public slots:
 	void sliderChanged(int value);

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters/seekablePreview.ui
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters/seekablePreview.ui	2010-07-23 06:00:37 UTC (rev 6474)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters/seekablePreview.ui	2010-07-23 06:00:40 UTC (rev 6475)
@@ -6,8 +6,8 @@
    &lt;rect&gt;
     &lt;x&gt;0&lt;/x&gt;
     &lt;y&gt;0&lt;/y&gt;
-    &lt;width&gt;400&lt;/width&gt;
-    &lt;height&gt;300&lt;/height&gt;
+    &lt;width&gt;441&lt;/width&gt;
+    &lt;height&gt;378&lt;/height&gt;
    &lt;/rect&gt;
   &lt;/property&gt;
   &lt;property name=&quot;sizePolicy&quot;&gt;
@@ -19,44 +19,109 @@
   &lt;property name=&quot;windowTitle&quot;&gt;
    &lt;string&gt;Preview&lt;/string&gt;
   &lt;/property&gt;
-  &lt;layout class=&quot;QVBoxLayout&quot;&gt;
-   &lt;property name=&quot;spacing&quot;&gt;
-    &lt;number&gt;6&lt;/number&gt;
-   &lt;/property&gt;
-   &lt;property name=&quot;margin&quot;&gt;
-    &lt;number&gt;9&lt;/number&gt;
-   &lt;/property&gt;
-   &lt;item&gt;
-    &lt;widget class=&quot;QFrame&quot; name=&quot;frame&quot;&gt;
-     &lt;property name=&quot;frameShape&quot;&gt;
-      &lt;enum&gt;QFrame::StyledPanel&lt;/enum&gt;
-     &lt;/property&gt;
-     &lt;property name=&quot;frameShadow&quot;&gt;
-      &lt;enum&gt;QFrame::Raised&lt;/enum&gt;
-     &lt;/property&gt;
-    &lt;/widget&gt;
+  &lt;layout class=&quot;QFormLayout&quot; name=&quot;formLayout&quot;&gt;
+   &lt;item row=&quot;0&quot; column=&quot;0&quot;&gt;
+    &lt;layout class=&quot;QVBoxLayout&quot; name=&quot;verticalLayout&quot;&gt;
+     &lt;item&gt;
+      &lt;layout class=&quot;QHBoxLayout&quot; name=&quot;horizontalLayout_3&quot;&gt;
+       &lt;item&gt;
+        &lt;widget class=&quot;QFrame&quot; name=&quot;frame&quot;&gt;
+         &lt;property name=&quot;minimumSize&quot;&gt;
+          &lt;size&gt;
+           &lt;width&gt;320&lt;/width&gt;
+           &lt;height&gt;240&lt;/height&gt;
+          &lt;/size&gt;
+         &lt;/property&gt;
+         &lt;property name=&quot;frameShape&quot;&gt;
+          &lt;enum&gt;QFrame::StyledPanel&lt;/enum&gt;
+         &lt;/property&gt;
+         &lt;property name=&quot;frameShadow&quot;&gt;
+          &lt;enum&gt;QFrame::Raised&lt;/enum&gt;
+         &lt;/property&gt;
+        &lt;/widget&gt;
+       &lt;/item&gt;
+       &lt;item&gt;
+        &lt;spacer name=&quot;horizontalSpacer_3&quot;&gt;
+         &lt;property name=&quot;orientation&quot;&gt;
+          &lt;enum&gt;Qt::Horizontal&lt;/enum&gt;
+         &lt;/property&gt;
+         &lt;property name=&quot;sizeHint&quot; stdset=&quot;0&quot;&gt;
+          &lt;size&gt;
+           &lt;width&gt;40&lt;/width&gt;
+           &lt;height&gt;20&lt;/height&gt;
+          &lt;/size&gt;
+         &lt;/property&gt;
+        &lt;/spacer&gt;
+       &lt;/item&gt;
+      &lt;/layout&gt;
+     &lt;/item&gt;
+     &lt;item&gt;
+      &lt;layout class=&quot;QHBoxLayout&quot; name=&quot;horizontalLayout_2&quot;&gt;
+       &lt;item&gt;
+        &lt;widget class=&quot;QSlider&quot; name=&quot;horizontalSlider&quot;&gt;
+         &lt;property name=&quot;orientation&quot;&gt;
+          &lt;enum&gt;Qt::Horizontal&lt;/enum&gt;
+         &lt;/property&gt;
+        &lt;/widget&gt;
+       &lt;/item&gt;
+       &lt;item&gt;
+        &lt;spacer name=&quot;horizontalSpacer_2&quot;&gt;
+         &lt;property name=&quot;orientation&quot;&gt;
+          &lt;enum&gt;Qt::Horizontal&lt;/enum&gt;
+         &lt;/property&gt;
+         &lt;property name=&quot;sizeHint&quot; stdset=&quot;0&quot;&gt;
+          &lt;size&gt;
+           &lt;width&gt;40&lt;/width&gt;
+           &lt;height&gt;20&lt;/height&gt;
+          &lt;/size&gt;
+         &lt;/property&gt;
+        &lt;/spacer&gt;
+       &lt;/item&gt;
+      &lt;/layout&gt;
+     &lt;/item&gt;
+     &lt;item&gt;
+      &lt;layout class=&quot;QHBoxLayout&quot; name=&quot;horizontalLayout&quot;&gt;
+       &lt;property name=&quot;sizeConstraint&quot;&gt;
+        &lt;enum&gt;QLayout::SetFixedSize&lt;/enum&gt;
+       &lt;/property&gt;
+       &lt;item&gt;
+        &lt;widget class=&quot;QPushButton&quot; name=&quot;next&quot;&gt;
+         &lt;property name=&quot;sizePolicy&quot;&gt;
+          &lt;sizepolicy hsizetype=&quot;Fixed&quot; vsizetype=&quot;Fixed&quot;&gt;
+           &lt;horstretch&gt;0&lt;/horstretch&gt;
+           &lt;verstretch&gt;0&lt;/verstretch&gt;
+          &lt;/sizepolicy&gt;
+         &lt;/property&gt;
+         &lt;property name=&quot;text&quot;&gt;
+          &lt;string&gt;next&lt;/string&gt;
+         &lt;/property&gt;
+        &lt;/widget&gt;
+       &lt;/item&gt;
+       &lt;item&gt;
+        &lt;widget class=&quot;QLabel&quot; name=&quot;label&quot;&gt;
+         &lt;property name=&quot;text&quot;&gt;
+          &lt;string&gt;00:00:00.000&lt;/string&gt;
+         &lt;/property&gt;
+        &lt;/widget&gt;
+       &lt;/item&gt;
+       &lt;item&gt;
+        &lt;spacer name=&quot;horizontalSpacer&quot;&gt;
+         &lt;property name=&quot;orientation&quot;&gt;
+          &lt;enum&gt;Qt::Horizontal&lt;/enum&gt;
+         &lt;/property&gt;
+         &lt;property name=&quot;sizeHint&quot; stdset=&quot;0&quot;&gt;
+          &lt;size&gt;
+           &lt;width&gt;40&lt;/width&gt;
+           &lt;height&gt;20&lt;/height&gt;
+          &lt;/size&gt;
+         &lt;/property&gt;
+        &lt;/spacer&gt;
+       &lt;/item&gt;
+      &lt;/layout&gt;
+     &lt;/item&gt;
+    &lt;/layout&gt;
    &lt;/item&gt;
-   &lt;item&gt;
-    &lt;widget class=&quot;QSlider&quot; name=&quot;horizontalSlider&quot;&gt;
-     &lt;property name=&quot;orientation&quot;&gt;
-      &lt;enum&gt;Qt::Horizontal&lt;/enum&gt;
-     &lt;/property&gt;
-    &lt;/widget&gt;
-   &lt;/item&gt;
-   &lt;item&gt;
-    &lt;widget class=&quot;QPushButton&quot; name=&quot;next&quot;&gt;
-     &lt;property name=&quot;sizePolicy&quot;&gt;
-      &lt;sizepolicy hsizetype=&quot;Fixed&quot; vsizetype=&quot;Fixed&quot;&gt;
-       &lt;horstretch&gt;0&lt;/horstretch&gt;
-       &lt;verstretch&gt;0&lt;/verstretch&gt;
-      &lt;/sizepolicy&gt;
-     &lt;/property&gt;
-     &lt;property name=&quot;text&quot;&gt;
-      &lt;string&gt;next&lt;/string&gt;
-     &lt;/property&gt;
-    &lt;/widget&gt;
-   &lt;/item&gt;
-   &lt;item&gt;
+   &lt;item row=&quot;1&quot; column=&quot;0&quot;&gt;
     &lt;widget class=&quot;QDialogButtonBox&quot; name=&quot;buttonBox&quot;&gt;
      &lt;property name=&quot;orientation&quot;&gt;
       &lt;enum&gt;Qt::Horizontal&lt;/enum&gt;

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/include/DIA_flyDialog.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/include/DIA_flyDialog.h	2010-07-23 06:00:37 UTC (rev 6474)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/include/DIA_flyDialog.h	2010-07-23 06:00:40 UTC (rev 6475)
@@ -68,6 +68,7 @@
 class ADM_flyDialog
 {
   protected:
+          uint64_t      _currentPts;
           uint32_t      _w, _h, _zoomW, _zoomH;
           float         _zoom;
           uint32_t      _zoomChangeCount;
@@ -102,6 +103,7 @@
   virtual uint8_t    process(void)=0;
   virtual uint8_t    download(void)=0;
   virtual uint8_t    upload(void)=0;
+  virtual bool       setCurrentPts(uint64_t pts)=0;
           /* /filter dependant */
   
         /* This is GTK/QT/whatever dependant */

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/src/DIA_flyDialog.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/src/DIA_flyDialog.cpp	2010-07-23 06:00:37 UTC (rev 6474)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoFilter/src/DIA_flyDialog.cpp	2010-07-23 06:00:40 UTC (rev 6475)
@@ -64,7 +64,7 @@
 
 	_rgbBufferOut =new uint8_t [_w*_h*4];
 
-	
+	_currentPts=0;
 
 	
 }
@@ -248,7 +248,7 @@
       ADM_warning(&quot;[FlyDialog] Cannot get frame %u\n&quot;,frameNumber); 
       return 0;
     }
-
+    setCurrentPts(_yuvBuffer-&gt;Pts);
     // Process...    
     if(_isYuvProcessing)
     {


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003662.html">[Avidemux-svn-commit] r6474 - in branches/avidemux_2.6_branch_mean:	avidemux/common/ADM_videoFilter2/include	avidemux_core/ADM_coreVideoFilter/include
</A></li>
	<LI>Next message: <A HREF="003664.html">[Avidemux-svn-commit] r6476 - in	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoFilters6:	. resampleFps
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3663">[ date ]</a>
              <a href="thread.html#3663">[ thread ]</a>
              <a href="subject.html#3663">[ subject ]</a>
              <a href="author.html#3663">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">More information about the Avidemux-svn-commit
mailing list</a><br>
</body></html>
