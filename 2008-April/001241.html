<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Avidemux-svn-commit] r3980 - in	branches/avidemux_2.5_branch_gruntster/avidemux: . ADM_codecs	ADM_coreImage ADM_coreImage/include ADM_coreImage/src	ADM_coreUI/include ADM_editor ADM_encoder ADM_filter	ADM_libraries/ADM_ffmpeg/ADM_lavcodec ADM_libraries/ADM_mplex	ADM_libraries/ADM_utilities ADM_ocr ADM_outputs/oplug_avi	ADM_outputs/oplug_dummy ADM_outputs/oplug_flv	ADM_outputs/oplug_mp4 ADM_outputs/oplug_mpeg	ADM_outputs/oplug_mpegFF ADM_outputs/oplug_ogm ADM_script	ADM_userInterfaces/ADM_GTK/ADM_dialog	ADM_userInterfaces/ADM_GTK/ADM_filters	ADM_userInterfaces/ADM_GTK/ADM_ocr	ADM_userInterfaces/ADM_NONE/ADM_dialog	ADM_userInterfaces/ADM_NONE/ADM_gui2	ADM_userInterfaces/ADM_QT4/ADM_dialog	ADM_userInterfaces/ADM_QT4/ADM_filters	ADM_userInterfaces/ADM_QT4/ADM_ocr	ADM_userInterfaces/ADM_commonUI ADM_video ADM_videoFilter
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/avidemux-svn-commit/2008-April/index.html" >
   <LINK REL="made" HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r3980%20-%20in%0A%09branches/avidemux_2.5_branch_gruntster/avidemux%3A%20.%20ADM_codecs%0A%09ADM_coreImage%20ADM_coreImage/include%20ADM_coreImage/src%0A%09ADM_coreUI/include%20ADM_editor%20ADM_encoder%20ADM_filter%0A%09ADM_libraries/ADM_ffmpeg/ADM_lavcodec%20ADM_libraries/ADM_mplex%0A%09ADM_libraries/ADM_utilities%20ADM_ocr%20ADM_outputs/oplug_avi%0A%09ADM_outputs/oplug_dummy%20ADM_outputs/oplug_flv%0A%09ADM_outputs/oplug_mp4%20ADM_outputs/oplug_mpeg%0A%09ADM_outputs/oplug_mpegFF%20ADM_outputs/oplug_ogm%20ADM_script%0A%09ADM_userInterfaces/ADM_GTK/ADM_dialog%0A%09ADM_userInterfaces/ADM_GTK/ADM_filters%0A%09ADM_userInterfaces/ADM_GTK/ADM_ocr%0A%09ADM_userInterfaces/ADM_NONE/ADM_dialog%0A%09ADM_userInterfaces/ADM_NONE/ADM_gui2%0A%09ADM_userInterfaces/ADM_QT4/ADM_dialog%0A%09ADM_userInterfaces/ADM_QT4/ADM_filters%0A%09ADM_userInterfaces/ADM_QT4/ADM_ocr%0A%09ADM_userInterfaces/ADM_commonUI%20ADM_video%20ADM_videoFilter&In-Reply-To=%3C200804241736.m3OHaeWU029507%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001240.html">
   <LINK REL="Next"  HREF="001242.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Avidemux-svn-commit] r3980 - in	branches/avidemux_2.5_branch_gruntster/avidemux: . ADM_codecs	ADM_coreImage ADM_coreImage/include ADM_coreImage/src	ADM_coreUI/include ADM_editor ADM_encoder ADM_filter	ADM_libraries/ADM_ffmpeg/ADM_lavcodec ADM_libraries/ADM_mplex	ADM_libraries/ADM_utilities ADM_ocr ADM_outputs/oplug_avi	ADM_outputs/oplug_dummy ADM_outputs/oplug_flv	ADM_outputs/oplug_mp4 ADM_outputs/oplug_mpeg	ADM_outputs/oplug_mpegFF ADM_outputs/oplug_ogm ADM_script	ADM_userInterfaces/ADM_GTK/ADM_dialog	ADM_userInterfaces/ADM_GTK/ADM_filters	ADM_userInterfaces/ADM_GTK/ADM_ocr	ADM_userInterfaces/ADM_NONE/ADM_dialog	ADM_userInterfaces/ADM_NONE/ADM_gui2	ADM_userInterfaces/ADM_QT4/ADM_dialog	ADM_userInterfaces/ADM_QT4/ADM_filters	ADM_userInterfaces/ADM_QT4/ADM_ocr	ADM_userInterfaces/ADM_commonUI ADM_video ADM_videoFilter</H1>
    <B>mean at BerliOS</B> 
    <A HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r3980%20-%20in%0A%09branches/avidemux_2.5_branch_gruntster/avidemux%3A%20.%20ADM_codecs%0A%09ADM_coreImage%20ADM_coreImage/include%20ADM_coreImage/src%0A%09ADM_coreUI/include%20ADM_editor%20ADM_encoder%20ADM_filter%0A%09ADM_libraries/ADM_ffmpeg/ADM_lavcodec%20ADM_libraries/ADM_mplex%0A%09ADM_libraries/ADM_utilities%20ADM_ocr%20ADM_outputs/oplug_avi%0A%09ADM_outputs/oplug_dummy%20ADM_outputs/oplug_flv%0A%09ADM_outputs/oplug_mp4%20ADM_outputs/oplug_mpeg%0A%09ADM_outputs/oplug_mpegFF%20ADM_outputs/oplug_ogm%20ADM_script%0A%09ADM_userInterfaces/ADM_GTK/ADM_dialog%0A%09ADM_userInterfaces/ADM_GTK/ADM_filters%0A%09ADM_userInterfaces/ADM_GTK/ADM_ocr%0A%09ADM_userInterfaces/ADM_NONE/ADM_dialog%0A%09ADM_userInterfaces/ADM_NONE/ADM_gui2%0A%09ADM_userInterfaces/ADM_QT4/ADM_dialog%0A%09ADM_userInterfaces/ADM_QT4/ADM_filters%0A%09ADM_userInterfaces/ADM_QT4/ADM_ocr%0A%09ADM_userInterfaces/ADM_commonUI%20ADM_video%20ADM_videoFilter&In-Reply-To=%3C200804241736.m3OHaeWU029507%40sheep.berlios.de%3E"
       TITLE="[Avidemux-svn-commit] r3980 - in	branches/avidemux_2.5_branch_gruntster/avidemux: . ADM_codecs	ADM_coreImage ADM_coreImage/include ADM_coreImage/src	ADM_coreUI/include ADM_editor ADM_encoder ADM_filter	ADM_libraries/ADM_ffmpeg/ADM_lavcodec ADM_libraries/ADM_mplex	ADM_libraries/ADM_utilities ADM_ocr ADM_outputs/oplug_avi	ADM_outputs/oplug_dummy ADM_outputs/oplug_flv	ADM_outputs/oplug_mp4 ADM_outputs/oplug_mpeg	ADM_outputs/oplug_mpegFF ADM_outputs/oplug_ogm ADM_script	ADM_userInterfaces/ADM_GTK/ADM_dialog	ADM_userInterfaces/ADM_GTK/ADM_filters	ADM_userInterfaces/ADM_GTK/ADM_ocr	ADM_userInterfaces/ADM_NONE/ADM_dialog	ADM_userInterfaces/ADM_NONE/ADM_gui2	ADM_userInterfaces/ADM_QT4/ADM_dialog	ADM_userInterfaces/ADM_QT4/ADM_filters	ADM_userInterfaces/ADM_QT4/ADM_ocr	ADM_userInterfaces/ADM_commonUI ADM_video ADM_videoFilter">mean at mail.berlios.de
       </A><BR>
    <I>Thu Apr 24 19:36:40 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001240.html">[Avidemux-svn-commit] r3979 - in	branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264:	. qt4
</A></li>
        <LI>Next message: <A HREF="001242.html">[Avidemux-svn-commit] r3981 - in	branches/avidemux_2.4_branch/avidemux: ADM_outputs/oplug_avi	ADM_userInterfaces/ADM_GTK/ADM_dialog	ADM_userInterfaces/ADM_commonUI
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1241">[ date ]</a>
              <a href="thread.html#1241">[ thread ]</a>
              <a href="subject.html#1241">[ subject ]</a>
              <a href="author.html#1241">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: mean
Date: 2008-04-24 19:36:16 +0200 (Thu, 24 Apr 2008)
New Revision: 3980

Added:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/include/
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/include/ADM_confCouple.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/include/ADM_image.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/include/ADM_videoFilter.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/include/ADM_videoFilterCache.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/include/ADM_videoFilter_iface.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/include/ADM_videoFilter_internal.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/ADM_confCouple.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/ADM_image.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/ADM_imageResizer.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/ADM_imageUtils.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/ADM_videoFilter.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/ADM_videoFilterCache.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/CMakeLists.txt
Removed:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/video_filters.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_image.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_image.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_imageResizer.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_imageUtils.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_cache.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_cache.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_confCouple.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_confCouples.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_genvideo.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_genvideo.hxx
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidCached.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidCached.h
Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_ffmpeg.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_coreToolkit.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edFrameType.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edIdentify.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edLoadSave.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edRender.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edit.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_externalEncoder.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encCopy.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encRequant.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encXvid4.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encffmpeg.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encffmpeg1.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encmjpeg.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encmpeg2enc.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encoder.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encoder.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encx264.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encyv12.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/ADM_vidDummyFilter.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter_declaration.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter_dylib.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter_saveload.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/vidVCD.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/avcodec.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mthread.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_ocr/ADM_bitmapSource.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_ocr/ADM_ocr.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_ocr/ADM_ocrEngine.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisave.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_pack.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_unpack.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavedual.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_savesmart.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_ogm/op_ogaudio.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_ogm/op_ogsave.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_ogm/op_ogsavecopy.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_preview.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSAvidemuxAudio.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSAvidemuxVideo.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSFunctions.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/adm_scanner.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_asharp.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_chromaShift.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_contrast.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_crop.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eq2.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_equalizer.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eraser.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_flyDialog.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_hue.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_mpdelogo.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_partial.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_preview.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_srt.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vcodec.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_ocr.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_flyDialog.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_none.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_gui2/preview_none.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_none.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_asharp.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_chromashift.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_contrast.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_crop.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_eq2.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_hue.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_srt.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_vobsub.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_flyDialog.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_index_pg.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/Q_mainfilter.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_ocr/Q_ocr.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyAsharp.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyChromaShift.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyContrast.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyCrop.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyDialog.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyEq2.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyEraser.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyHue.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyParticle.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flySrtPos.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flySwissArmyKnife.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyThreshold.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_interlaced.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidCNR2.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidClean.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidColorYuv.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidColorYuv.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidEqualizer.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidFieldUnblend.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidFieldUtil.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidMPdelogo.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidNull.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidPartial.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidRaw.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_guiResize.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_resizebis.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_resizeter.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidASS.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidAddBorder.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidAnimated.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidAnimated.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidAsharp.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidBSmear.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidBlend.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidBlendRemoval.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidChroma.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidChromaShift.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidComputeAverage.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidContrast.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidCrop.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDGbob.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDecDec.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDecTelecide.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDeintASM.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDeinterlace.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDelta.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDenoise.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDropOut.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDropOut.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDvbSub.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidEq2.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidEraser.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidEraser.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFade.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFastConvolution.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFields.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFlipV.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFlux.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFlux.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidForcedPP.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidHardIvtcRemoval.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidHue.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidKernelDeint.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidLargeMedian.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidLogo.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidLuma.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLD3D.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLD3D.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLD3Dlow.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLD3Dlow.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLResize.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMSharpen.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMosaic.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMsmooth.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidPalShift.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidPalShift.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidPalSmart.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidPalSmart.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidParticle.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidParticle.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidPulldown.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidResampleFPS.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidResize.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidReverse.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidRotate.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSRT.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSRTRender.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSRTload.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSeparateField.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSeparateField.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSoften.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidStabilize.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidStabilize.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSwapFields.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSwapSmart.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidTdeint.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidThreshold.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidThreshold.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidUVSwap.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidUnblend.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVlad.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVlad.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVobSubRender.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVobsub.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidWhirl.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidYadif.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vobsubinfo.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADMmpdetc.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/gtk_gui.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/gui_navigate.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/gui_savenew.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/guiplay.cpp
Log:
[Merge] From mean


Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_ffmpeg.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_ffmpeg.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_ffmpeg.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -37,7 +37,7 @@
 #include &quot;ADM_codecs/ADM_ffmpeg.h&quot;
 
 #include &quot;prefs.h&quot;
-#include &quot;ADM_video/ADM_cache.h&quot;
+
 #include &quot;ADM_video/ADM_vidMisc.h&quot;
 //#define TEST_NOB 1
 

Added: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/CMakeLists.txt	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/CMakeLists.txt	2008-04-24 17:36:16 UTC (rev 3980)
@@ -0,0 +1 @@
+ADD_SUBDIRECTORY(src)

Copied: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/include/ADM_confCouple.h (from rev 3979, branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_confCouple.h)
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_confCouple.h	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/include/ADM_confCouple.h	2008-04-24 17:36:16 UTC (rev 3980)
@@ -0,0 +1,54 @@
+/***************************************************************************
+                          CONFcouple.cpp  -  description
+                             -------------------
+	Used to set a pair name/value
+	--&gt; filters
+
+    begin                : Sun Apr 14 2002
+    copyright            : (C) 2002 by mean
+    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+ #ifndef __CONFCOUPLE__
+ #define __CONFCOUPLE__
+
+class CONFcouple
+{
+	private:
+			uint32_t    nb;
+			char 		**name;
+			char 		**value;
+			uint8_t	cur;
+
+			int32_t lookupName(const char *myname);
+	public:
+			CONFcouple(uint32_t nb);
+			~CONFcouple();
+			uint8_t setCouple(const char *name,uint32_t value);
+			uint8_t setCouple(const char *name,int32_t value);
+			uint8_t setCouple(const char *name,const char *value);
+			uint8_t setCouple(const char *name,const ADM_filename *value);
+			uint8_t setCouple(const char *name,double value);
+			uint8_t setCouple(const char *name,float value);
+
+			uint8_t getCouple(const char *name,int32_t *value);
+			uint8_t getCouple(const char *name,uint32_t *value);
+			uint8_t getCouple(const char *name,char **value);
+			uint8_t getCouple(const char *name,ADM_filename **value);
+			uint8_t getCouple(const char *name,double *value);
+			uint8_t getCouple(const char *name,float *value);
+			uint32_t getNumber(void) { return nb;};
+			uint8_t getEntry(uint32_t n, char **nm, char **val)
+				 { assert(n&lt;nb); *nm=name[n];*val=value[n];return 1;};
+			void dump(void );
+
+};
+#endif

Copied: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/include/ADM_image.h (from rev 3979, branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_image.h)
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_image.h	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/include/ADM_image.h	2008-04-24 17:36:16 UTC (rev 3980)
@@ -0,0 +1,189 @@
+//
+// C++ Interface: %{MODULE}
+//
+// Description: 
+//
+//
+// Author: %{AUTHOR} &lt;%{EMAIL}&gt;, (C) %{YEAR}
+//
+// Copyright: See COPYING file that comes with this distribution
+//
+//
+//	This is the base time for image exchanged between codec/filters/...
+//
+//	We (optionnally) can carry extra informations
+//		- aspect ratio
+//		- frame type
+//		- quantizer for each macroblock (16x16 pixels)
+//	For the latter 3 infos are used
+//		quant which leads to the int8 quant array
+//		qstride = stride of array. Usually width+15)/16. 0 MEANS NOT USABLE
+//		qsize = size of the array (needed to be able to copy it)
+//
+#ifndef ADM_IMAGE
+#define ADM_IMAGE
+#include &quot;ADM_assert.h&quot;
+#include &quot;ADM_colorspace/ADM_rgb.h&quot;
+
+typedef enum 
+{
+	ADM_ASPECT_4_3=1,
+	ADM_ASPECT_16_9,
+	ADM_ASPECT_1_1
+} ADM_ASPECT;
+// Avisynth compatibility layer
+
+//#define vi.num_frames _info.nb_frames
+//#define vi.IsYV12()   1
+#define GetReadPtr GetWritePtr
+#define GetRowSize GetPitch
+
+typedef enum 
+{
+        PLANAR_Y=1,
+        PLANAR_U=2,
+        PLANAR_V=3
+        
+} ADM_PLANE;
+typedef enum 
+{
+		ADM_IMAGE_UNKNOWN=0,
+        ADM_IMAGE_JPG=1,
+        ADM_IMAGE_PNG=2,
+        ADM_IMAGE_BMP=3,
+        ADM_IMAGE_BMP2=4
+        
+} ADM_IMAGE_TYPE;
+class ADMImage
+{
+public:
+        uint32_t        demuxerFrameno;
+  
+        //*****************
+        uint8_t		*data;		/// Pointer to actual image data
+        uint32_t	_width;		/// Width of image
+        uint32_t	_height;	/// Height of image
+        uint32_t	_qStride;	/// Stride of Q infos, usually about width/8 &lt;- ***if 0 means no quant usable***
+        uint8_t		*quant;		/// Byte representing quantize used for this block
+        uint32_t	_Qp;		/// Average quantizer for this image, Default=2
+        uint32_t	_qSize;		/// Size of the *quant field
+        ADM_ASPECT	_aspect;	/// Aspect ratio
+        uint32_t	flags;		/// Flags for this image (AVI_KEY_FRAME/AVI_B_FRAME)
+
+// This 3 fields are only used to convery container (reference to other datas)
+// Between codec &amp; editor
+	uint8_t         _isRef;         /// If True means the datas are just a link to data we don't own!
+        ADM_colorspace  _colorspace;    /// Colorspace we are moving, default is YV12
+        uint8_t         _noPicture;     /// No picture to display
+
+// End of section dedicated to codec/editor transfer
+
+        void            commonInit(uint32_t w,uint32_t h); /// sub constructor
+        
+        uint32_t        GetPitch(ADM_PLANE plane)
+                                {
+                                        switch(plane)
+                                        {
+                                                case PLANAR_Y:return _width;break;
+                                                case PLANAR_U:
+                                                case PLANAR_V:return _width&gt;&gt;1;break;
+                                                default: ADM_assert(0);
+                                        }
+                                };
+        uint8_t         *GetWritePtr(ADM_PLANE plane)
+                        {       
+                                uint32_t plan=_width*_height;
+                                switch(plane)
+                                        {
+                                                case PLANAR_Y:return data;break;
+                                                case PLANAR_U:return data+plan;break;
+                                                case PLANAR_V:return data+((plan*5)&gt;&gt;2);break;
+                                                default: ADM_assert(0);
+                                        }
+                        };
+   
+        uint32_t GetHeight(ADM_PLANE plane)
+                                {
+                                        switch(plane)
+                                        {
+                                                case PLANAR_Y:return _height;break;
+                                                case PLANAR_U:
+                                                case PLANAR_V:return _height&gt;&gt;1;break;
+                                                default: ADM_assert(0);
+                                        }
+                                };
+        uint8_t duplicateMacro(ADMImage *src,uint32_t swap);       /// copy an image to ourself, including info
+public:
+
+        uint8_t         *_planes[3];     /// In case of linked data store y/u/v pointers
+        uint32_t        _planeStride[3]; /// Same story
+
+		ADMImage(uint32_t width, uint32_t height);
+                ADMImage(uint32_t width, uint32_t height,uint32_t dummy); /// To create linked datas image        
+
+                uint8_t   LumaReduceBy2(void);
+		~ADMImage();
+        uint8_t getWidthHeight(uint32_t *w,uint32_t *h)
+                    {
+                          *w=_width;
+                          *h=_height;
+                          return 1;
+                    }
+	uint8_t duplicate(ADMImage *src);	/// copy an image to ourself, including info
+        uint8_t duplicateSwapUV(ADMImage *src); /// copy an image to ourself, including info
+	uint8_t duplicateFull(ADMImage *src);	/// copy an image to ourself, including info
+	uint8_t copyInfo(ADMImage *src);	/// copy all the flags, not the data themselves
+	uint8_t copyQuantInfo(ADMImage *src);	/// copy quant table if any
+        uint8_t isRef(void) { return _isRef;};
+        uint8_t setLinkInfos(uint8_t *y,        /// To fill in infos for linked image
+                        uint8_t *u,uint8_t *v,uint32_t stridey,
+                        uint32_t strideu, uint32_t stridev);
+        uint8_t merge(ADMImage *src1,ADMImage *src2);
+        uint8_t substract(ADMImage *src1,ADMImage *src2);
+        uint8_t blacken(void);
+        uint8_t copyTo(ADMImage *target, uint32_t x, uint32_t y);
+        uint8_t copyToAlpha(ADMImage *target, uint32_t x, uint32_t y,uint32_t alpha);
+        uint8_t pack(uint8_t invertChroma);     /// Transfer data from planes to regular packed space
+        uint8_t copyLeftSideTo(ADMImage *dest);
+        /* Some utilitarian functions */
+        uint8_t  saveAsBmp(const char *filename);
+        uint8_t  saveAsJpg(const char *filename);
+        
+static uint32_t lumaDiff(ADMImage *src1,ADMImage *src2,uint32_t noise);
+};
+void drawString(ADMImage *dst, int x, int y, const char *s) ;
+#define YPLANE(x) ((x)-&gt;data)
+#define UPLANE(x) ((x)-&gt;data+((x)-&gt;_width*(x)-&gt;_height))
+#define VPLANE(x) ((x)-&gt;data+(5*((x)-&gt;_width*(x)-&gt;_height)&gt;&gt;2))
+
+//
+//  Simple image resizer
+//
+class ADMImageResizer
+{
+	private:
+		void    *_context;
+		uint32_t orgFormat, destFormat;
+		uint32_t orgWidth, orgHeight;
+		uint32_t destWidth, destHeight;
+
+		void init(uint32_t ow, uint32_t oh, uint32_t dw, uint32_t dh, int srcFormat, int dstFormat);
+		void getYuvPlanes(uint8_t *source, uint32_t width, uint32_t height, uint8_t*&amp; yPlane, uint8_t*&amp; uPlane, uint8_t*&amp; vPlane);
+	public:
+		ADMImageResizer(uint32_t ow,uint32_t oh, uint32_t dw, uint32_t dh);
+		ADMImageResizer(uint32_t ow, uint32_t oh, uint32_t dw, uint32_t dh, int srcFormat, int dstFormat);
+		~ADMImageResizer();
+		
+		uint8_t resize(ADMImage *src, ADMImage *dest);
+		uint8_t resize(uint8_t *src, ADMImage *dest);
+		uint8_t resize(ADMImage *src, uint8_t *dest);
+		uint8_t resize(uint8_t *src, uint8_t *dest);
+};
+
+// Misc utilities
+uint8_t BitBlit(uint8_t *dst, uint32_t pitchDest,uint8_t *src,uint32_t pitchSrc,uint32_t width, uint32_t height);
+uint8_t BitBlitAlpha(uint8_t *dst, uint32_t pitchDst,uint8_t *src,uint32_t pitchSrc,uint32_t width, uint32_t height,uint32_t alpha);
+
+ADMImage *createImageFromFile(const char *filename);
+ADM_IMAGE_TYPE ADM_identidyImageFile(const char *filename,uint32_t *w,uint32_t *h);
+#endif

Copied: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/include/ADM_videoFilter.h (from rev 3979, branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_genvideo.hxx)
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_genvideo.hxx	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/include/ADM_videoFilter.h	2008-04-24 17:36:16 UTC (rev 3980)
@@ -0,0 +1,193 @@
+/***************************************************************************
+                          ADM_genvideo.hxx  -  description
+                             -------------------
+    begin                : Tue Mar 19 2002
+    copyright            : (C) 2002 by mean
+    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+ 
+#define ADM_FILTER_API_VERSION 1
+/**
+	Note for filter writers :
+
+		The constructor accept 2 parameters
+
+				_in : previous filter in the chain, the source of incoming image
+				couple : A configuration seen as couples of string
+						&quot;size&quot; &quot;13&quot; for example. Passing null means either
+						it has no parameters or set the default value for them.
+
+				_uncompressed : optional internal buffer
+
+				configure return 1 if the conf has changed, 0 else.
+
+
+
+*/
+#ifndef __ADM_VIDEO__
+#define __ADM_VIDEO__
+
+#define INT int32_t
+#include &quot;ADM_confCouple.h&quot;
+#include &quot;ADM_image.h&quot;
+
+#define Pixel uint8_t
+typedef struct
+ {
+ 		uint32_t width;
+ 		uint32_t height;
+ 		uint32_t nb_frames;
+ 		uint32_t encoding;
+ 		uint32_t codec;
+ 		uint32_t fps1000;
+		uint32_t orgFrame;
+ }ADV_Info;
+
+
+typedef struct
+{
+    uint32_t					w,h;
+    uint32_t				algo;
+}RESIZE_PARAMS;
+
+typedef struct
+{
+ 	uint32_t left,right;
+ 	uint32_t top,bottom;
+}CROP_PARAMS;
+
+typedef struct
+{
+ 	uint32_t newfps, precision;
+}CHFPS_PARAMS;
+
+typedef struct {
+    int pixel;
+    double weight;
+} CONTRIB;
+
+
+typedef struct {
+    uint32_t  n;			/* number of contributors */
+    CONTRIB *p;			/* pointer to list of contributions */
+} CLIST;
+
+typedef struct
+{
+	uint32_t 	width;		/* horizontal size of the image in Pixels */
+	uint32_t	height;		/* vertical size of the image in Pixels */
+	Pixel *	data;		/* pointer to first scanline of image */
+
+} Image;
+
+
+
+ class AVDMGenericVideoStream
+ {
+   protected:
+      	ADV_Info 					_info;
+   	  ADMImage   					*_uncompressed;
+	  AVDMGenericVideoStream 	*_in;
+/* not really used */
+          uint8_t		getPixel(int32_t x,int32_t y,uint8_t *data);
+          uint8_t		getPixelU(int32_t x,int32_t y,uint8_t *data);
+          uint8_t		setPixelU(uint8_t val,int32_t x,int32_t y,uint8_t *data);
+          uint8_t 	unPackChroma(uint8_t *ssrc,uint8_t *ddst);
+/* /not really used */
+   public:
+          virtual uint32_t   getPARWidth(void);
+          virtual uint32_t   getPARHeight(void);
+
+   	// return 1 -&gt; conf changed need rebuild, 0 means conf not changed
+        virtual 	uint8_t 	configure( AVDMGenericVideoStream *instream)=0;
+          			AVDMGenericVideoStream( void)  {_uncompressed=NULL;_in=NULL;};
+  	virtual 		~AVDMGenericVideoStream( ) {};
+        virtual char 	*printConf(void) { static char *str=(char *)&quot;.&quot;; return str;};
+
+        virtual uint8_t 	getFrameNumberNoAlloc(uint32_t frame, uint32_t *len,
+          							ADMImage *data,uint32_t *flags)=0;
+          	ADV_Info 	*getInfo( void ) { return &amp;_info;};
+         virtual uint8_t	getCoupledConf( CONFcouple **couples)
+	  				{*couples=NULL;return 0;};
+ };
+
+void     DIA_previewInit(uint32_t width, uint32_t height);
+uint8_t  DIA_previewUpdate(uint8_t *data);
+void 	 DIA_previewEnd(void);
+uint8_t  DIA_previewStillAlive(void);
+uint8_t	 DIA_filterPreview(const char *captionText, AVDMGenericVideoStream *videoStream, uint32_t frame);
+
+ // Pseudo class used to register filters automagically
+ // Does not work atm
+class AVDMVideo_FilterDec
+{
+private:
+	int dum;
+public:
+  	AVDMVideo_FilterDec(char *name, AVDMGenericVideoStream *(*create) (AVDMGenericVideoStream *in, void *));
+};
+
+
+
+
+/**
+	These macros are used to build the create_ function automatically
+	That way external sw has no need to know the underlying class
+*/
+#undef NEW
+#define NEW(x) (x *)ADM_alloc(sizeof(x))
+#undef DELETE
+#define DELETE(x) {if(x){ADM_dealloc(x);x=NULL;}}
+#define CREATOR(x,clss)  return new clss(in,x);
+#define BUILD_CREATE(name,clss) AVDMGenericVideoStream *name(AVDMGenericVideoStream *in, CONFcouple *conf) \
+{		CREATOR(conf,clss); }
+#define VARIABLE_PARAMS 0xff
+#define SCRIPT_CREATE(name,clss,tmplate) \
+AVDMGenericVideoStream *name (AVDMGenericVideoStream *in, int n,Arg *args); \
+AVDMGenericVideoStream *name (AVDMGenericVideoStream *in, int n,Arg *args) \
+{ 							\
+CONFcouple		*couple; 			\
+AVDMGenericVideoStream *filter; 			\
+	couple=filterBuildCouple(&amp;tmplate,n,args);	\
+	if(!couple) { printf(&quot;Filter built failed\n&quot;);return NULL;}\
+	filter= new clss(in,couple);			\
+	delete couple;					\
+	return filter;					\
+}
+
+
+
+#define GET(x) ADM_assert(couples-&gt;getCouple((char *)#x,&amp;(_param-&gt;x)))
+#define GET2(x,t) (assert(couples-&gt;getCouple((char *)#x,&amp;(t))),(_param-&gt;x)=(t))
+#define CSET(x)  (*couples)-&gt;setCouple((char *)#x,(_param-&gt;x))
+
+typedef struct
+ {
+          uint32_t    nb;
+          const char  *param[25];
+ }FILTER_PARAM;
+ 
+#include &quot;ADM_videoFilter_iface.h&quot;
+ CONFcouple *filterBuildCouple(FILTER_PARAM *param,uint32_t n,Arg *args); 
+ 
+#define MPLAYER_RESIZE_PREFFERED
+ // You should not use this functions.
+ // Needed for some legacy filters...
+ AVDMGenericVideoStream *getLastVideoFilter( uint32_t frameStart, uint32_t nbFrame);
+ AVDMGenericVideoStream *getLastVideoFilter( void );
+ AVDMGenericVideoStream *getFirstVideoFilter( uint32_t frameStart, uint32_t nbFrame);
+ AVDMGenericVideoStream *getFirstVideoFilter( void);
+ AVDMGenericVideoStream *getFirstCurrentVideoFilter( void);
+// 
+#include &quot;ADM_videoFilterCache.h&quot;
+#endif
+

Copied: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/include/ADM_videoFilterCache.h (from rev 3979, branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_cache.h)
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_cache.h	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/include/ADM_videoFilterCache.h	2008-04-24 17:36:16 UTC (rev 3980)
@@ -0,0 +1,48 @@
+//
+// C++ Interface: ADM_cache
+//
+// Description: 
+//
+//
+// Author: mean &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>&gt;, (C) 2004
+//
+// Copyright: See COPYING file that comes with this distribution
+//
+//
+
+#ifndef __ADM_CACHE__
+#define __ADM_CACHE__
+#include &quot;ADM_videoFilter.h&quot;
+typedef struct vidCacheEntry
+{
+		uint32_t 	frameNum;
+		ADMImage 	*frameBuffer;
+		uint8_t		frameLock;		
+		uint32_t	lastUse;
+
+}vidCacheEntry;
+
+class VideoCache
+{
+	private:
+		vidCacheEntry	*entry;
+		ADV_Info 	info;
+		uint32_t	counter;
+		uint32_t 	nbEntry;
+		
+		AVDMGenericVideoStream *incoming;
+		
+		
+		int32_t 	searchFrame( uint32_t frame);
+		int32_t 	searchPtr( ADMImage *ptr);
+		
+	public:
+		VideoCache(uint32_t nb,AVDMGenericVideoStream *in);
+		~VideoCache(void);
+		
+		ADMImage *getImage(uint32_t frame);
+		uint8_t unlockAll(void);
+		uint8_t unlock(ADMImage  *frame);
+		uint8_t purge(void);
+};
+#endif

Copied: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/include/ADM_videoFilter_iface.h (from rev 3979, branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidPalShift.h)
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidPalShift.h	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/include/ADM_videoFilter_iface.h	2008-04-24 17:36:16 UTC (rev 3980)
@@ -0,0 +1,50 @@
+/** *************************************************************************
+                          \file ADM_videoFilter_iface.h
+                             -------------------
+    begin                : Tue Mar 19 2002
+    copyright            : (C) 2002 by mean
+    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+ 
+#ifndef ADM_VIDEOFILTER_IFACE
+#define ADM_VIDEOFILTER_IFACE
+ typedef enum 
+ {
+ 	APM_NUM,
+ 	APM_HEXNUM,
+ 	APM_STRING,
+ 	APM_QUOTED,
+ 	APM_FLOAT,
+ 	APM_BOOL,
+ 	APM_LAST
+
+ }APM_TYPE;
+ 
+ typedef union
+ {
+ 	int 	integer;
+ 	float	real;
+ 	char	*string;
+
+ }ArgI;
+ 
+ typedef struct 
+ {
+ 	APM_TYPE type;
+ 	ArgI	 arg;
+
+ }Arg;
+ 
+ 
+ 
+#endif
+

Copied: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/include/ADM_videoFilter_internal.h (from rev 3979, branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/video_filters.h)
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/video_filters.h	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/include/ADM_videoFilter_internal.h	2008-04-24 17:36:16 UTC (rev 3980)
@@ -0,0 +1,216 @@
+/***************************************************************************
+                          video_filters.h  -  description
+                             -------------------
+    begin                : Wed Mar 27 2002
+    copyright            : (C) 2002 by mean
+    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+ #ifndef __VIDEO_FILTERS__
+ #define  __VIDEO_FILTERS__
+
+#include &quot;ADM_script/adm_scanner.h&quot;
+
+typedef enum
+{
+	VF_TRANSFORM,
+	VF_INTERLACING,
+	VF_COLORS,
+	VF_NOISE,
+	VF_SHARPNESS,
+	VF_SUBTITLE,
+	VF_MISC
+}VF_CATEGORY;
+
+typedef enum
+{
+                VF_INVALID=0,
+                VF_RESIZE=1,
+                VF_CROP,
+                VF_TELECIDE,
+                VF_BLACKEN,
+                VF_SHARPEN,
+                VF_MEAN,
+                VF_MEDIAN,
+                VF_GAUSSIAN,
+                VF_SMOOTHCLEAN,
+                VF_DEINTERLACE,
+                VF_ADDBORDER,
+                VF_PALSHIFT,
+                VF_SWAPUV,
+                VF_CONTRAST,
+                VF_LUMA,
+                VF_CHROMAU,
+                VF_CHROMAV,
+                VF_STABILIZE,
+                VF_FLIP,
+                VF_DENOISE,
+                VF_SUBTILE,
+                VF_LARGEMEDIAN,
+                VF_FLUXSMOOTH,
+                VF_SALT,
+                VF_PARTIAL          ,
+                VF_VLADSMOOTH,
+                VF_ROTATE,
+                VF_DROPOUT,
+                VF_SWAPFIELDS,
+                VF_KEEPODD,
+                VF_KEEPEVEN,
+                VF_SEPARATEFIELDS,
+                VF_MERGEFIELDS,
+                VF_CHROMASHIFT,
+                VF_SMARTSWAPFIELDS,
+                VF_MPLAYERRESIZE,
+                VF_IVTC,
+                VF_PULLDOWN,
+                VF_MPLHQD3D,
+                VF_MPLLQD3D,
+                VF_LAVDEINT,
+                VF_MPDETC,
+                VF_KRNDEINT,
+                VF_FORCEDPP,
+                VF_SOFTEN,
+                VF_DECOMB,
+                VF_DECIMATE,
+                VF_MSMOOTH,
+                VF_STACKFIELD,
+                VF_HZSTACKFIELD,
+                VF_WHIRL,
+                VF_EQUALIZER,
+                VF_VOBSUB,
+                VF_CHFPS,
+                VF_RESAMPLE_FPS,
+                VF_LAVPP_DEINT,
+                VF_UNSTACK_FIELD,
+                VF_HUE,
+                VF_EQ2,
+                VF_DGBOB,
+                VF_MSHARPEN,
+                VF_ASHARP,
+                VF_CNR2,
+                VF_DELTA,
+                VF_UNBLEND,
+                VF_HARDIVTC,
+                VF_MOSAIC,
+                VF_BLENDREMOVAL,
+                VF_TDEINT,
+                VF_MPDELOGO,
+                VF_COLOR_YUV,
+                VF_ANIMATED,
+                VF_MCDEINT,
+                VF_REVERSE,
+                VF_FADE,
+                VF_ASS,
+                VF_YADIF,
+                VF_DVBSUB,
+                VF_LOGO,
+                VF_COMPUTEAVERAGE,
+                VF_ERASER,
+                VF_SWISSARMYKNIFE,
+                VF_THRESHOLD,
+                VF_PARTICLELIST,
+                VF_DUMMY,
+                VF_COUNT,
+                MAX_FILTER = VF_COUNT - 1,
+                VF_EXTERNAL_START=0xF0000000
+          }VF_FILTERS;
+
+typedef AVDMGenericVideoStream *(ADM_createT) (AVDMGenericVideoStream *in, CONFcouple *);
+typedef AVDMGenericVideoStream *(ADM_create_from_scriptT) (AVDMGenericVideoStream *in, int n,Arg *args);
+
+         
+   struct FILTER_ENTRY
+   {
+        const char        *name;
+        ADM_createT       *create;
+        void              (*destroy)( AVDMGenericVideoStream *old); /* Maybe needed ...*/
+        VF_FILTERS        tag;
+        uint8_t           viewable;
+        const char        *filtername;
+        const char        *description;
+        ADM_create_from_scriptT *create_from_script;
+        VF_CATEGORY		  category;
+       FILTER_ENTRY (const char * name, ADM_createT * create, VF_FILTERS tag,
+                     uint8_t viewable, const char * filtername,
+                     VF_CATEGORY category=VF_MISC,
+                     const char * description = 0,
+                     ADM_create_from_scriptT * create_from_script = 0)
+           : name (name),
+             create (create),
+             destroy (0),
+             tag (tag),
+             viewable (viewable),
+             filtername (filtername),
+             description (description),
+             category(category),
+             create_from_script (create_from_script)
+       {
+       }
+
+       FILTER_ENTRY ()
+           : name (0),
+             create (0),
+             destroy (0),
+             tag (VF_INVALID),
+             viewable (0),
+             filtername (0),
+             description (0),
+             category(VF_MISC),
+             create_from_script (0)
+       {
+       }
+   };
+ 	
+   typedef struct
+   {
+          VF_FILTERS              tag;
+          AVDMGenericVideoStream *filter;
+          CONFcouple             *conf;
+   }FILTER;
+
+ 
+   
+
+FILTER * getCurrentVideoFilterList (uint32_t * count);
+const FILTER_ENTRY * filterGetEntryFromTag (VF_FILTERS tag);
+const char * filterGetNameFromTag(VF_FILTERS tag);
+
+  void	filterSetPostProc( void );
+  
+#ifdef USE_LIBXML2
+void filterSaveXml(char *name);
+void filterSaveXml(char *name,uint8_t silent);
+void filterLoadXml(char *name);
+int  filterLoadXml(char *name,uint8_t silent);
+#endif
+ void filterSave(char *name);
+ void filterLoad(char *name);
+ int filterLoad(char *name,uint8_t silent);
+ void filterSave(char *name,uint8_t silent);
+
+void filterSaveScriptJS(FILE *f);
+
+void registerFilter(const char *name,VF_FILTERS tag,uint8_t viewable,
+                    ADM_createT  *create,
+                    const char *fname);
+                    
+void registerFilterEx(const char *name,VF_FILTERS tag,uint8_t viewable,
+                ADM_createT  *create,
+                const char *filtername,
+                ADM_create_from_scriptT *create_from_script,
+                const char *description);
+                
+void 		filterListAll( void );
+VF_FILTERS 	filterGetTagFromName(char *inname);
+uint8_t 	filterAddScript(VF_FILTERS tags,uint32_t n,Arg *args);
+//AVDMGenericVideoStream *filterCreateFromTag(VF_FILTERS tag,uint8_t *conf, AVDMGenericVideoStream *in) ;
+
+ #endif

Copied: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/ADM_confCouple.cpp (from rev 3979, branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_confCouples.cpp)
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_confCouples.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/ADM_confCouple.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -0,0 +1,186 @@
+/***************************************************************************
+                          ADM_genvideo.cpp  -  description
+                             -------------------
+    begin                : Sun Apr 14 2002
+    copyright            : (C) 2002 by mean
+    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#include &quot;ADM_default.h&quot;
+
+#include &quot;fourcc.h&quot;
+#include &quot;ADM_assert.h&quot;
+
+#include &quot;ADM_videoFilter.h&quot;
+static char tmpstring[1024]; // should be enougth
+CONFcouple::CONFcouple(uint32_t nub)
+{
+	nb=nub;
+	name=new char *[nb];
+	value=new char *[nb];
+
+	for(uint32_t i=0;i&lt;nb;i++)
+		{
+			name[i]=NULL;
+			value[i]=NULL;
+		}
+
+	cur=0;
+};
+
+CONFcouple::~CONFcouple()
+{
+	for(uint32_t i=0;i&lt;nb;i++)
+		{
+			if(name[i]) delete name[i];
+			if(value[i]) delete value[i];
+		}
+		delete [] name;
+		delete [] value;
+
+
+};
+
+uint8_t CONFcouple::setCouple(const char *myname,uint32_t val)
+{
+	ADM_assert(cur&lt;nb);
+
+	name[cur]=ADM_strdup(myname);
+	sprintf(tmpstring,&quot;%lu&quot;,val);
+	value[cur]=ADM_strdup(tmpstring);
+	cur++;
+	return 1;
+}
+uint8_t CONFcouple::setCouple(const char *myname,float val)
+{
+	ADM_assert(cur&lt;nb);
+
+	name[cur]=ADM_strdup(myname);
+	sprintf(tmpstring,&quot;%f&quot;,val);
+	value[cur]=ADM_strdup(tmpstring);
+	cur++;
+	return 1;
+}
+uint8_t CONFcouple::setCouple(const char *myname,double val)
+{
+	ADM_assert(cur&lt;nb);
+
+	name[cur]=ADM_strdup(myname);
+	sprintf(tmpstring,&quot;%f&quot;,val);
+	value[cur]=ADM_strdup(tmpstring);
+	cur++;
+	return 1;
+}
+uint8_t CONFcouple::setCouple(const char *myname,int32_t val)
+{
+	ADM_assert(cur&lt;nb);
+
+	name[cur]=ADM_strdup(myname);
+	sprintf(tmpstring,&quot;%ld&quot;,val);
+	value[cur]=ADM_strdup(tmpstring);
+	cur++;
+	return 1;
+}
+uint8_t CONFcouple::setCouple(const char *myname,const char *val)
+{
+	ADM_assert(cur&lt;nb);
+
+	name[cur]=ADM_strdup(myname);
+	value[cur]=ADM_strdup(val);
+	cur++;
+	return 1;
+}
+uint8_t CONFcouple::setCouple(const char *myname,const ADM_filename *val)
+{
+	ADM_assert(cur&lt;nb);
+
+	name[cur]=ADM_strdup(myname);
+	value[cur]=ADM_strdup((char *)val);
+	cur++;
+	return 1;
+}
+
+uint8_t CONFcouple::getCouple(const char *myname,uint32_t *val)
+{
+	int32_t index=lookupName(myname);
+
+	ADM_assert(index!=-1);
+	ADM_assert(index&lt;(int)nb);
+	*val=(int)atoi(value[index]);
+	return 1;
+}
+uint8_t CONFcouple::getCouple(const char *myname,int32_t *val)
+{
+	int32_t index=lookupName(myname);
+
+	ADM_assert(index!=-1);
+	ADM_assert(index&lt;(int)nb);
+	*val=(int)atoi(value[index]);
+	return 1;
+}
+uint8_t CONFcouple::getCouple(const char *myname,char **val)
+{
+	int32_t index=lookupName(myname);
+
+	ADM_assert(index!=-1);
+	ADM_assert(index&lt;(int)nb);
+	*val=ADM_strdup(value[index]);
+	return 1;
+}
+uint8_t CONFcouple::getCouple(const char *myname,ADM_filename **val)
+{
+	int32_t index=lookupName(myname);
+
+	ADM_assert(index!=-1);
+	ADM_assert(index&lt;(int)nb);
+	*val=(ADM_filename *)ADM_strdup(value[index]);
+	return 1;
+}
+
+uint8_t CONFcouple::getCouple(const char *myname,float *val)
+{
+	int32_t index=lookupName(myname);
+
+	ADM_assert(index!=-1);
+	ADM_assert(index&lt;(int)nb);
+	sscanf(value[index],&quot;%f&quot;,val);;
+	return 1;
+}
+uint8_t CONFcouple::getCouple(const char *myname,double *val)
+{
+	int32_t index=lookupName(myname);
+
+	ADM_assert(index!=-1);
+	ADM_assert(index&lt;(int)nb);
+	sscanf(value[index],&quot;%lf&quot;,val);;
+	return 1;
+}
+
+int32_t CONFcouple::lookupName(const char *myname)
+{
+	for(uint32_t i=0;i&lt;nb;i++)
+	{
+		if(!strcmp(name[i],myname)) return i;
+
+	}
+	return -1;
+
+}
+void CONFcouple::dump(void )
+{
+	for(uint32_t i=0;i&lt;nb;i++)
+	{
+		if(name[i]) printf (&quot;nm:%s &quot;,name[i]); else printf(&quot;!! no name !! &quot;);
+		if(value[i]) printf (&quot;val:%s &quot;,value[i]); else printf(&quot;!! no value !! &quot;);
+	}
+}
+

Copied: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/ADM_image.cpp (from rev 3979, branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_image.cpp)
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_image.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/ADM_image.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -0,0 +1,388 @@
+/***************************************************************************
+    copyright            : (C) 2003-2005 by mean
+    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+
+#include &quot;ADM_default.h&quot;
+#include &quot;ADM_image.h&quot;
+
+//#include &quot;ADM_assert.h&quot;
+void ADMImage_stat( void );
+
+static uint32_t imgMaxMem=0;
+static uint32_t imgCurMem=0;
+static uint32_t imgMaxNb=0;
+static uint32_t imgCurNb=0;
+
+void ADMImage_stat( void )
+{
+	printf(&quot;\nImages stat:\n&quot;);
+	printf(&quot;___________\n&quot;);
+	printf(&quot;Max memory consumed (MB)     : %lu\n&quot;,imgMaxMem&gt;&gt;10);
+	printf(&quot;Current memory consumed (MB) : %lu\n&quot;,imgCurMem&gt;&gt;10);
+	printf(&quot;Max image used               : %lu\n&quot;,imgMaxNb);
+	printf(&quot;Cur image used               : %lu\n&quot;,imgCurNb);
+
+}
+//
+//	Allocate and initialize everything to default values
+//
+void    ADMImage::commonInit(uint32_t w,uint32_t h)
+{
+        _width=w;        
+        _height=h;
+        quant=NULL;
+        _qStride=0;
+        _Qp=2;
+        flags=0;
+        _qSize=0;
+        _aspect=ADM_ASPECT_1_1;
+        
+        imgCurNb++;
+        _planes[0]=_planes[1]=_planes[2]=NULL;
+        _noPicture=0;
+        _colorspace=ADM_COLOR_YV12;
+
+}
+ADMImage::ADMImage(uint32_t width, uint32_t height)
+{
+        commonInit(width,height);
+        _isRef=0;
+        data=new uint8_t [ ((width+15)&amp;0xffffff0)*((height+15)&amp;0xfffffff0)*2];
+        ADM_assert(data);
+        imgCurMem+=(width*height*3)&gt;&gt;1;
+        if(imgCurMem&gt;imgMaxMem) imgMaxMem=imgCurMem;
+        if(imgCurNb&gt;imgMaxNb) imgMaxNb=imgCurNb;
+
+};
+// Create a fake image with external datas
+ADMImage::ADMImage(uint32_t width, uint32_t height,uint32_t dummy)
+{       
+        commonInit(width,height); 
+        _isRef=1;
+        data=NULL;                
+                
+};
+//
+//	Deallocate
+//
+ADMImage::~ADMImage()
+{
+        if(!_isRef)
+        {
+	       if(quant) delete [] quant;
+	       quant=NULL;
+	       if(data) delete [] data;
+	       data=NULL;
+               imgCurMem-=(_width*_height*3)&gt;&gt;1;
+	}
+	imgCurNb--;
+	
+}
+
+//
+//	Duplicate
+//
+uint8_t ADMImage::duplicateMacro(ADMImage *src,uint32_t swap)
+{
+        // Sanity check
+        ADM_assert(src-&gt;_width==_width);
+        ADM_assert(src-&gt;_height==_height);
+
+        ADM_assert(!_isRef); // could not duplicate to a linked data image
+
+        // cleanup if needed
+        if(quant) delete [] quant;
+        quant=NULL;
+ 
+       _qStride=0;      
+        _qSize=0;
+        
+        copyInfo(src);
+        if(!src-&gt;_isRef)
+        {
+               memcpy(YPLANE(this),YPLANE(src),_width*_height);
+                if(swap)
+                {
+                        memcpy(UPLANE(this),VPLANE(src),(_width*_height)&gt;&gt;2);
+                        memcpy(VPLANE(this),UPLANE(src),(_width*_height)&gt;&gt;2);
+                }
+                else
+                {
+                        memcpy(UPLANE(this),UPLANE(src),(_width*_height)&gt;&gt;2);
+                        memcpy(VPLANE(this),VPLANE(src),(_width*_height)&gt;&gt;2);
+                }
+        }
+        else
+        {
+                if(src-&gt;_noPicture)
+                {
+                        // no pic available, blacken it                        
+                        memset(YPLANE(this),0,_width*_height);
+                        memset(UPLANE(this),128,(_width*_height)&gt;&gt;2);
+                        memset(VPLANE(this),128,(_width*_height)&gt;&gt;2);
+                        return 1;
+                        
+                }
+               // The source is a reference
+                // We have to use the alternate informations
+                // to copy &amp; compact at the same time
+                //
+
+                ADM_assert(src-&gt;_planeStride[0]);
+                ADM_assert(src-&gt;_planeStride[1]);
+                ADM_assert(src-&gt;_planeStride[2]);
+
+                ADM_assert(src-&gt;_planes[0]);
+                ADM_assert(src-&gt;_planes[1]);
+                ADM_assert(src-&gt;_planes[2]);
+
+                uint8_t *in,*out;
+                uint32_t w,h,stride;
+
+                w=src-&gt;_width;
+                h=src-&gt;_height;
+                stride=src-&gt;_planeStride[0];
+                out=YPLANE(this);
+                in=src-&gt;_planes[0];
+#define PLANE_CPY(h) \
+                for(uint32_t y=0;y&lt;h;y++)  \
+                { \
+                        memcpy(out,in,w); \
+                        in+=stride;       \
+                        out+=w;           \
+                } 
+                PLANE_CPY(h);
+
+                w&gt;&gt;=1;
+                h&gt;&gt;=1;
+                in=src-&gt;_planes[1];
+                if(swap)
+                        out=VPLANE(this);
+                else
+                        out=UPLANE(this);
+                stride=src-&gt;_planeStride[1];
+                PLANE_CPY(h);
+        
+                in=src-&gt;_planes[2];
+                if(swap)
+                        out=UPLANE(this);
+                else
+                        out=VPLANE(this);
+                stride=src-&gt;_planeStride[2];
+                PLANE_CPY(h);
+
+
+        }
+        return 1;
+}
+uint8_t ADMImage::duplicate(ADMImage *src)
+{
+	return duplicateMacro(src,0);
+}
+uint8_t ADMImage::duplicateSwapUV(ADMImage *src)
+{
+        return duplicateMacro(src,0);
+}
+uint8_t ADMImage::pack(uint8_t invertChroma)
+{
+int u=1,v=2;
+    if(invertChroma) {u=2;v=1;}
+    ADM_assert(_planeStride[0]&gt;=_width);
+    // Pack luma
+    uint8_t *src,*dest;
+
+    src=_planes[0];
+    dest=YPLANE(this);
+    BitBlit(dest,_width,src,_planeStride[0],_width,_height);
+
+    src=_planes[u];
+    dest=UPLANE(this);
+    BitBlit(dest,_width&gt;&gt;1,src,_planeStride[u],_width&gt;&gt;1,_height&gt;&gt;1);
+
+    src=_planes[v];
+    dest=VPLANE(this);
+    BitBlit(dest,_width&gt;&gt;1,src,_planeStride[v],_width&gt;&gt;1,_height&gt;&gt;1);
+
+    return 1;
+}
+uint8_t ADMImage::duplicateFull(ADMImage *src)
+{
+	// Sanity check
+	ADM_assert(src-&gt;_width==_width);
+	ADM_assert(src-&gt;_height==_height);
+	
+	
+	copyInfo(src);
+        ADM_assert(!_isRef);
+
+	memcpy(YPLANE(this),YPLANE(src),_width*_height);
+	memcpy(UPLANE(this),UPLANE(src),(_width*_height)&gt;&gt;2);
+	memcpy(VPLANE(this),VPLANE(src),(_width*_height)&gt;&gt;2);
+	copyQuantInfo(src);
+	
+	return 1;
+}
+uint8_t ADMImage::copyInfo(ADMImage *src)
+{
+	_Qp=src-&gt;_Qp;
+	flags=src-&gt;flags;
+	_aspect=src-&gt;_aspect;
+}
+//
+//	By design the reallocation of quant should happen at startup
+//	but not in processing itself (reuse already allocated quant)
+//	It may seem shoddy, but it adds flexibility
+//
+uint8_t ADMImage::copyQuantInfo(ADMImage *src)
+{
+	if(!src-&gt;_qStride || !src-&gt;_qSize)  // No (usable) quant
+	{
+		_qStride=0;
+		return 1;
+	}
+	// Reuse Quant memory ?
+	if(!quant)
+	{	// need a new quant
+		quant=new uint8_t[src-&gt;_qSize];
+		_qSize=src-&gt;_qSize;
+	
+	}
+	
+	// Same size ?
+	ADM_assert(_qSize==src-&gt;_qSize);		
+	_qStride=src-&gt;_qStride;		
+	memcpy(quant,src-&gt;quant,_qSize);	
+	
+	return 1;
+}
+uint8_t ADMImage::blacken(void)
+{
+        memset(YPLANE(this),0,_width*_height);
+        memset(UPLANE(this),128,(_width*_height)&gt;&gt;2);
+        memset(VPLANE(this),128,(_width*_height)&gt;&gt;2);
+        return 1;
+
+}
+/*
+    Copy &quot;this&quot; image into dest image at x,y position
+
+*/
+uint8_t ADMImage::copyTo(ADMImage *dest, uint32_t x,uint32_t y)
+{
+      
+    uint32_t box_w=_width, box_h=_height;
+    // Clip if needed
+    if(y&gt;dest-&gt;_height)
+    {
+        printf(&quot;Y out : %u %u\n&quot;,y,dest-&gt;_height);
+         return 1;
+    }
+    if(x&gt;dest-&gt;_width) 
+    {
+        printf(&quot;X out : %u %u\n&quot;,x,dest-&gt;_width);
+         return 1;
+    }
+    
+    if(x+box_w&gt;dest-&gt;_width) box_w=dest-&gt;_width-x;
+    if(y+box_h&gt;dest-&gt;_height) box_h=dest-&gt;_height-y;
+
+    // do y
+    BitBlit(YPLANE(dest)+x+dest-&gt;_width*y,dest-&gt;_width,
+            data,_width,
+            box_w,box_h);
+    // Do u
+    BitBlit(UPLANE(dest)+x/2+(dest-&gt;_width*y)/4,dest-&gt;_width/2,
+            UPLANE(this),_width&gt;&gt;1,
+            box_w&gt;&gt;1,box_h&gt;&gt;1);
+
+    BitBlit(VPLANE(dest)+x/2+(dest-&gt;_width*y)/4,dest-&gt;_width/2,
+            VPLANE(this),_width&gt;&gt;1,
+            box_w&gt;&gt;1,box_h&gt;&gt;1);
+
+
+    return 1;
+
+}
+/*
+    \fn    copyToAlpha
+    \brief Copy &quot;this&quot; image into dest image at x,y position using alpha alpha
+    @param alpha alpha value (0--255)
+
+*/
+uint8_t ADMImage::copyToAlpha(ADMImage *dest, uint32_t x,uint32_t y,uint32_t alpha)
+{
+      
+    uint32_t box_w=_width, box_h=_height;
+    // Clip if needed
+    if(y&gt;dest-&gt;_height)
+    {
+        printf(&quot;Y out : %u %u\n&quot;,y,dest-&gt;_height);
+         return 1;
+    }
+    if(x&gt;dest-&gt;_width) 
+    {
+        printf(&quot;X out : %u %u\n&quot;,x,dest-&gt;_width);
+         return 1;
+    }
+    
+    if(x+box_w&gt;dest-&gt;_width) box_w=dest-&gt;_width-x;
+    if(y+box_h&gt;dest-&gt;_height) box_h=dest-&gt;_height-y;
+
+    // do y
+    BitBlitAlpha(YPLANE(dest)+x+dest-&gt;_width*y,dest-&gt;_width,         data,_width,            box_w,box_h,alpha);
+    // Do u
+    BitBlitAlpha(UPLANE(dest)+x/2+(dest-&gt;_width*y)/4,dest-&gt;_width/2,   UPLANE(this),_width&gt;&gt;1,  box_w&gt;&gt;1,box_h&gt;&gt;1,alpha);
+    // and V
+    BitBlitAlpha(VPLANE(dest)+x/2+(dest-&gt;_width*y)/4,dest-&gt;_width/2, VPLANE(this),_width&gt;&gt;1, box_w&gt;&gt;1,box_h&gt;&gt;1,alpha);
+
+
+    return 1;
+
+}
+/**
+ * 		\fn BitBlitAlpha
+ * 		\brief Alpha blit from dst to src
+ */
+uint8_t BitBlitAlpha(uint8_t *dst, uint32_t pitchDst,uint8_t *src,uint32_t pitchSrc,
+		uint32_t width, uint32_t height,uint32_t alpha)
+{
+    
+    for(int y=0;y&lt;height;y++)
+    {
+    	for(int x=0;x&lt;width;x++)
+    	{
+    		uint32_t s=src[x],d=dst[x];
+    		
+    		d=s*alpha+(255-alpha)*d;
+    		d&gt;&gt;=8;
+    		dst[x]=d;
+    	}
+        src+=pitchSrc;
+        dst+=pitchDst;   
+    }
+    return 1;
+}
+
+uint8_t BitBlit(uint8_t *dst, uint32_t pitchDst,uint8_t *src,uint32_t pitchSrc,uint32_t width, uint32_t height)
+{
+    
+    for(int y=0;y&lt;height;y++)
+    {
+        memcpy(dst,src,width);
+        src+=pitchSrc;
+        dst+=pitchDst;   
+    }
+    return 1;
+}
+//EOF

Copied: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/ADM_imageResizer.cpp (from rev 3979, branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_imageResizer.cpp)
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_imageResizer.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/ADM_imageResizer.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -0,0 +1,154 @@
+/***************************************************************************
+    copyright            : (C) 2003-2005 by mean
+    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include &quot;ADM_default.h&quot;
+
+#include &quot;ADM_image.h&quot;
+
+extern &quot;C&quot; {
+#include &quot;ADM_libraries/ADM_ffmpeg/ADM_lavcodec/avcodec.h&quot;
+#include &quot;ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale.h&quot;
+}
+
+
+ADMImageResizer::ADMImageResizer(uint32_t ow, uint32_t oh, uint32_t dw, uint32_t dh)
+{
+	init(ow, oh, dw, dh, PIX_FMT_YUV420P, PIX_FMT_YUV420P);
+}
+
+ADMImageResizer::ADMImageResizer(uint32_t ow, uint32_t oh, uint32_t dw, uint32_t dh, int srcFormat, int destFormat)
+{
+	init(ow, oh, dw, dh, srcFormat, destFormat);
+}
+
+ADMImageResizer::~ADMImageResizer()
+{
+   if (_context)
+   {
+		sws_freeContext((SwsContext*)_context);
+		_context = NULL;
+   }
+}
+
+void ADMImageResizer::init(uint32_t ow, uint32_t oh, uint32_t dw, uint32_t dh, int srcFormat, int dstFormat)
+{
+    orgWidth = ow;
+    orgHeight = oh;
+    destWidth = dw;
+    destHeight = dh;
+
+	orgFormat = srcFormat;
+	destFormat = dstFormat;
+
+	int flags = SWS_SPLINE;
+
+#ifdef ADM_CPU_X86
+	#define ADD(x, y) if (CpuCaps::has##x()) flags |= SWS_CPU_CAPS_##y;
+
+	ADD(MMX,MMX);
+	ADD(3DNOW,3DNOW);
+	ADD(MMXEXT,MMX2);
+#endif
+
+#ifdef ADM_CPU_ALTIVEC
+    flags |= SWS_CPU_CAPS_ALTIVEC;
+#endif
+
+	_context = (void *)sws_getContext(orgWidth, orgHeight,
+									  srcFormat,
+									  destWidth, destHeight,
+									  destFormat,
+									  flags, NULL, NULL,NULL);
+}
+
+uint8_t ADMImageResizer::resize(ADMImage *source, ADMImage *dest)
+{
+    ADM_assert(source-&gt;_width == orgWidth);
+    ADM_assert(source-&gt;_height == orgHeight);
+    ADM_assert(dest-&gt;_width == destWidth);
+    ADM_assert(dest-&gt;_height == destHeight);
+
+	return resize(source-&gt;data, dest-&gt;data);
+}
+
+uint8_t ADMImageResizer::resize(ADMImage *source, uint8_t *dest)
+{
+    ADM_assert(source-&gt;_width == orgWidth);
+    ADM_assert(source-&gt;_height == orgHeight);
+
+	return resize(source-&gt;data, dest);
+}
+
+uint8_t ADMImageResizer::resize(uint8_t *source, ADMImage *dest)
+{
+    ADM_assert(dest-&gt;_width == destWidth);
+    ADM_assert(dest-&gt;_height == destHeight);
+
+	return resize(source, dest-&gt;data);
+}
+
+uint8_t ADMImageResizer::resize(uint8_t *source, uint8_t *dest)
+{
+	uint8_t *src[3];
+	uint8_t *dst[3];
+	int ssrc[3];
+	int ddst[3];
+
+	if (orgFormat == PIX_FMT_YUV420P)
+	{
+		getYuvPlanes(source, orgWidth, orgHeight, *&amp;src[0], *&amp;src[1], *&amp;src[2]);
+
+		ssrc[0] = orgWidth;
+		ssrc[1] = ssrc[2] = orgWidth &gt;&gt; 1;
+	}
+	else	// RGB
+	{
+		src[0] = source;
+		src[1] = NULL;
+		src[2] = NULL;
+
+		ssrc[0]=orgWidth * 4;
+		ssrc[1] = 0;
+		ssrc[2] = 0;
+	}
+
+	if (destFormat == PIX_FMT_YUV420P)
+	{
+		getYuvPlanes(dest, destWidth, destHeight, *&amp;dst[0], *&amp;dst[1], *&amp;dst[2]);
+
+		ddst[0] = destWidth;
+		ddst[1] = ddst[2] = destWidth &gt;&gt; 1;
+	}
+	else	// RGB
+	{
+		dst[0] = dest;
+		dst[1] = NULL;
+		dst[2] = NULL;
+
+		ddst[0] = destWidth * 4;
+		ddst[1] = 0;
+		ddst[2] = 0;
+	}
+
+    sws_scale((SwsContext*)_context, src, ssrc, 0, orgHeight, dst, ddst);
+
+    return 1;
+}
+
+void ADMImageResizer::getYuvPlanes(uint8_t *source, uint32_t width, uint32_t height, uint8_t*&amp; yPlane, uint8_t*&amp; uPlane, uint8_t*&amp; vPlane)
+{
+	// Unfortunately xPLANE macros expect an ADMImage object so doubling up on logic.
+	yPlane = source;
+	uPlane = source + (width * height);
+	vPlane = source + (5 * (width * height) &gt;&gt; 2);
+}

Copied: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/ADM_imageUtils.cpp (from rev 3979, branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_imageUtils.cpp)
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_imageUtils.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/ADM_imageUtils.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -0,0 +1,556 @@
+/***************************************************************************
+    copyright            : (C) 2003-2005 by mean
+    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+
+
+#include &quot;ADM_default.h&quot;
+#include &quot;ADM_image.h&quot;
+#include &quot;ADM_toolkit/bitmap.h&quot;
+#include &quot;avifmt.h&quot;
+#include &quot;avifmt2.h&quot;
+#include &quot;ADM_bitstream.h&quot;
+
+#include &quot;DIA_coreToolkit.h&quot;
+#include &quot;ADM_colorspace/colorspace.h&quot;
+#include &quot;ADM_encoder/ADM_vidEncode.hxx&quot;
+
+#include &quot;ADM_codecs/ADM_codec.h&quot;
+#include &quot;ADM_lavcodec.h&quot;
+#include &quot;ADM_codecs/ADM_ffmpeg.h&quot;
+#define QT_TR_NOOP(x) x // No translation in core*
+static uint8_t tinyAverage(uint8_t *dst, uint8_t *src1, uint8_t *src2,uint32_t l)
+{
+
+uint8_t *s1,*s2,*d1;
+int a1,a2;
+        s1=src1;
+        s2=src2;
+        
+        d1=dst;
+          for(int y=0;y&lt;l;y++)
+                {
+                        a1=*s1;
+                        a2=*s2;
+                        a1=a1+a2;
+                        a1&gt;&gt;=1;
+                        if(a1&lt;0) a1=0;
+                        if(a1&gt;255) a1=255;
+                        *d1=a1;                         
+
+                        s1++;
+                        s2++;
+                        d1++;
+                }
+        
+        return 1;
+}
+#ifdef ADM_CPU_X86
+static uint8_t tinyAverageMMX(uint8_t *dst, uint8_t *src1, uint8_t *src2,uint32_t l)
+{
+int delta;
+uint32_t ww,rr;
+uint8_t *s1,*s2,*d1;
+int a1,a2;
+        s1=src1;
+        s2=src2;
+        
+        d1=dst;
+        ww=l&gt;&gt;2;
+        rr=l&amp;3;
+
+
+#ifdef GCC_2_95_X
+         __asm__(
+                         &quot;pxor %mm7,%mm7&quot;
+                ::
+                 );
+#else
+         __asm__(
+                         &quot;pxor %%mm7,%%mm7&quot;
+                ::
+                 );
+#endif
+
+          for(int y=0;y&lt;ww;y++)
+          {
+                __asm__(
+                        &quot;movd           (%0),%%mm0 \n&quot;
+                        &quot;movd           (%1),%%mm1 \n&quot;
+                        &quot;punpcklbw      %%mm7,%%mm0 \n&quot;
+                        &quot;punpcklbw      %%mm7,%%mm1 \n&quot;
+                        &quot;paddw           %%mm1,%%mm0 \n&quot;
+                        &quot;psrlw          $1,%%mm0 \n&quot;
+                        &quot;packuswb       %%mm0,  %%mm0\n&quot;
+                        &quot;movd           %%mm0,(%2) \n&quot;
+
+                : : &quot;r&quot; (s1),&quot;r&quot; (s2),&quot;r&quot;(d1)
+                );
+                        s1+=4;
+                        s2+=4;
+                        d1+=4;
+                }
+        __asm__(
+                        &quot;emms\n&quot;
+                ::
+                );
+        if(rr) tinyAverage(d1, s1, s2,rr);
+        return 1;
+}
+
+
+#endif
+
+uint8_t ADMImage::merge(ADMImage *src1,ADMImage *src2)
+{
+#ifdef ADM_CPU_X86
+        if(CpuCaps::hasMMX())
+        {
+                tinyAverageMMX(YPLANE(this),YPLANE(src1),YPLANE(src2),(_width*_height*3)&gt;&gt;1);
+                return 1;
+        }
+#endif
+        tinyAverage(YPLANE(this),YPLANE(src1),YPLANE(src2),(_width*_height*3)&gt;&gt;1);
+        return 1;
+
+
+}
+/* 3000 * 3000 max size, using uint32_t is safe... */
+static uint32_t computeDiff(uint8_t  *s1,uint8_t *s2,uint32_t noise,uint32_t l)
+{
+uint32_t df=0;
+uint32_t delta;
+uint32_t ww,hh;
+
+
+        for(int x=0;x&lt;l;x++)
+        {
+                delta=abs(*s1-*s2);
+                if(delta&gt;noise)
+                        df+=delta;
+                s1++;
+                s2++;
+
+        }
+        return df;
+}
+#ifdef ADM_CPU_X86
+static uint64_t noise64;
+static uint32_t computeDiffMMX(uint8_t  *s1,uint8_t *s2,uint32_t noise,uint32_t l)
+{
+uint32_t df=0;
+uint32_t delta;
+uint32_t ll,rr;
+uint64_t noise2=(uint64_t )noise;
+
+uint32_t result=0;
+        noise64=noise2+(noise2&lt;&lt;16)+(noise2&lt;&lt;32)+(noise2&lt;&lt;48);
+        ll=l&gt;&gt;2;
+        rr=l&amp;3;
+
+#ifdef GCC_2_95_X
+         __asm__(
+                         &quot;pxor %mm7,%mm7\n&quot;
+                         &quot;pxor %mm3,%mm3\n&quot;
+                         &quot;movq &quot;Mangle(noise64)&quot;, %mm6\n&quot;
+                :: 
+                 );
+#else
+         __asm__(
+                         &quot;pxor %%mm7,%%mm7\n&quot;
+                         &quot;pxor %%mm3,%%mm3\n&quot;
+                         &quot;movq &quot;Mangle(noise64)&quot;, %%mm6\n&quot;
+                :: 
+                 );
+#endif
+
+          for(int y=0;y&lt;ll;y++)
+          {
+                __asm__(
+                        &quot;movd           (%0),  %%mm0 \n&quot;
+                        &quot;movd           (%1),  %%mm1 \n&quot;
+                        &quot;punpcklbw      %%mm7, %%mm0 \n&quot;
+                        &quot;punpcklbw      %%mm7, %%mm1 \n&quot;
+                        
+                        &quot;movq           %%mm0, %%mm2 \n&quot;
+                        &quot;psubusw        %%mm1, %%mm2 \n&quot;
+                        &quot;psubusw        %%mm0, %%mm1 \n&quot;
+                        &quot;por            %%mm1, %%mm2 \n&quot; // SAD  
+                                           
+                        &quot;movq           %%mm2, %%mm0 \n&quot;
+                        &quot;pcmpgtw        %%mm6, %%mm2 \n&quot; // Threshold against noise
+                        &quot;pand           %%mm2, %%mm0 \n&quot; // MM0 is the 4 diff, time to pack
+
+                        &quot;movq           %%mm0, %%mm1 \n&quot; // MM0 is a b c d and we want
+                        &quot;psrlq          $16,  %%mm1 \n&quot;  // mm3+=a+b+c+d
+
+                        &quot;movq           %%mm0, %%mm2 \n&quot;
+                        &quot;psrlq          $32,  %%mm2 \n&quot;
+
+                        &quot;movq           %%mm0, %%mm4 \n&quot;
+                        &quot;psrlq          $48,  %%mm4 \n&quot;
+
+                        &quot;paddw          %%mm1, %%mm0 \n&quot;
+                        &quot;paddw          %%mm2, %%mm4 \n&quot;
+                        &quot;paddw          %%mm4, %%mm0 \n&quot;
+
+                        &quot;psllq          $48,  %%mm0 \n&quot;
+                        &quot;psrlq          $48,  %%mm0 \n&quot;
+
+                        &quot;paddw          %%mm0, %%mm3 \n&quot; /* PADDQ is SSE2 */
+
+                : : &quot;r&quot; (s1),&quot;r&quot; (s2)
+                );
+                        s1+=4;
+                        s2+=4;
+                        
+         }
+        // Pack result
+#if 1        
+                __asm__(
+                       
+                        &quot;movd           %%mm3,(%0)\n&quot;
+                        &quot;emms\n&quot;
+                :: &quot;r&quot;(&amp;result)
+                );
+#endif                
+        if(rr) result+=computeDiff(s1, s2, noise,rr);
+        return result;
+}
+
+
+#endif
+
+uint32_t ADMImage::lumaDiff(ADMImage *src1,ADMImage *src2,uint32_t noise)
+{
+
+#ifdef ADM_CPU_X86
+uint32_t r1,r2;
+        if(CpuCaps::hasMMX())
+        {
+                return computeDiffMMX(YPLANE(src1),YPLANE(src2),noise,src1-&gt;_width*src1-&gt;_height);                
+        }
+#endif
+        return computeDiff(YPLANE(src1),YPLANE(src2),noise,src1-&gt;_width*src1-&gt;_height);
+}
+
+//******************************************************************************
+// so srcR=2*src-srcP
+static uint8_t tinySubstract(uint8_t *dst, uint8_t *src1, uint8_t *src2,uint32_t l)
+{
+int delta;
+uint32_t ww,hh;
+uint8_t *s1,*s2,*d1;
+int a1,a2;
+        s1=src1;
+        s2=src2;
+        
+        d1=dst;
+       
+
+          for(int y=0;y&lt;l;y++)
+               
+                {
+                        a1=*s1;
+                        a2=*s2;
+                        a1=2*a1-a2;
+                        if(a1&lt;0) a1=0;
+                        if(a1&gt;255) a1=255;
+                        *d1=a1;                         
+
+                        s1++;
+                        s2++;
+                        d1++;
+                }
+        return 1;
+}
+#ifdef ADM_CPU_X86
+static uint8_t tinySubstractMMX(uint8_t *dst, uint8_t *src1, uint8_t *src2,uint32_t l)
+{
+int delta;
+uint32_t ww,hh;
+uint8_t *s1,*s2,*d1;
+int ll,rr;
+        ll=l&gt;&gt;2;
+        rr=l&amp;3;
+        s1=src1;
+        s2=src2;
+        
+        d1=dst;
+      
+#ifdef GCC_2_95_X
+        __asm__(
+                         &quot;pxor %mm7,%mm7&quot;
+                ::
+                 );
+#else
+        __asm__(
+                         &quot;pxor %%mm7,%%mm7&quot;
+                ::
+                 );
+#endif
+        for(int x=0;x&lt;ll;x++)
+                {
+                        __asm__(
+                        &quot;movd           (%0),%%mm0 \n&quot;
+                        &quot;movd           (%1),%%mm1 \n&quot;
+                       
+                        &quot;punpcklbw      %%mm7,%%mm0 \n&quot;
+                        &quot;punpcklbw      %%mm7,%%mm1 \n&quot;
+                      
+                        
+                        &quot;paddw          %%mm0,%%mm0 \n&quot;
+                       
+                        
+                        &quot;psubusw        %%mm1,%%mm0 \n&quot; // mm1=sum                       
+                        &quot;packuswb       %%mm0,  %%mm0\n&quot;
+                        &quot;movd           %%mm0,(%2) \n&quot;                       
+                        :: &quot;r&quot;(s1),&quot;r&quot;(s2),&quot;r&quot;(d1)
+                        );
+                        s1+=4;
+                        s2+=4;
+                        d1+=4;
+                }
+                 __asm__(                       
+                        &quot;emms\n&quot;
+                :: 
+                );
+        if(rr) tinySubstractMMX(d1, s1, s2,rr);
+        return 1;
+}
+#endif
+
+uint8_t ADMImage::substract(ADMImage *src1,ADMImage *src2)
+{
+
+#ifdef ADM_CPU_X86
+uint32_t r1,r2;
+        if(CpuCaps::hasMMX())
+        {
+                 return tinySubstractMMX(YPLANE(this),YPLANE(src1),YPLANE(src2),src1-&gt;_width*src1-&gt;_height);                
+        }
+#endif
+        return tinySubstract(YPLANE(this),YPLANE(src1),YPLANE(src2),src1-&gt;_width*src1-&gt;_height);
+}
+ ADM_BITMAPFILEHEADER bmfh;
+ ADM_BITMAPINFOHEADER bmph;
+  FILE *fd;
+  uint32_t sz;
+  uint16_t s16;
+  uint32_t s32;
+  
+
+/**
+    \fn saveAsBmp
+    \brief save current image into filename, into bmp format
+*/
+uint8_t  ADMImage::saveAsBmp(const char *filename)
+{
+  ADM_BITMAPFILEHEADER bmfh;
+  ADM_BITMAPINFOHEADER bmph;
+  FILE *fd;
+  uint32_t sz;
+  uint16_t s16;
+  uint32_t s32;
+  
+  sz = _width* _height * 3;
+
+  bmfh.bfReserved1 = bmfh.bfReserved2 = 0;
+  bmfh.bfOffBits = sizeof (bmfh) + sizeof (bmph);
+//_________________________________________
+  bmph.biSize = sizeof (bmph);
+  bmph.biWidth = _width;
+  bmph.biHeight = _height;
+  bmph.biPlanes = 1;
+  bmph.biBitCount = 24;
+  bmph.biCompression = 0;	// COMPRESSION NONE
+  bmph.biSizeImage = sz;
+  bmph.biXPelsPerMeter = 0;
+  bmph.biYPelsPerMeter = 0;
+  bmph.biClrUsed = 0;
+  bmph.biClrImportant = 0;
+/*
+	bmph.resolutionUnits=0;
+	bmph.origin=0;
+	bmph.colorEncoding=0;
+*/
+
+  ADMImage image(_width,_height);
+  
+
+  printf (&quot;\n %u x %u=%u\n&quot;, bmph.biWidth, bmph.biHeight, sz);
+
+  uint8_t *out;
+
+        out=(uint8_t *)ADM_alloc(sz);
+        if(!out)
+        {
+            GUI_Error_HIG(QT_TR_NOOP(&quot;Memory error&quot;), NULL);
+//            ADM_dealloc(out);
+            return 0;
+        }
+
+        if(!COL_yv12rgbBMP(bmph.biWidth, bmph.biHeight,data, out))
+        {
+              GUI_Error_HIG(QT_TR_NOOP(&quot;Error converting to BMP&quot;), NULL);
+              ADM_dealloc(out);
+              return 0;
+        }
+        fd = fopen (filename, &quot;wb&quot;);
+        if (!fd)
+        {
+                GUI_Error_HIG (QT_TR_NOOP(&quot;Something bad happened&quot;), NULL);
+                ADM_dealloc(out);
+                return 0;
+        }
+
+	// Bitmpap file header, not using tructure due to gcc padding it
+#ifdef ADM_BIG_ENDIAN
+	s16 = 0x424D;
+#else	
+  	s16 = 0x4D42;
+#endif	
+  	s32 = 14 + sizeof (bmph) + sz;
+#ifdef ADM_BIG_ENDIAN	
+	#define SWAP32(x) x=R32(x)	
+#else
+	#define SWAP32(x) ; 
+#endif
+        SWAP32(s32);	
+        fwrite (&amp;s16, 2, 1, fd);
+        fwrite (&amp;s32, 4, 1, fd);
+        s32 = 0;
+        fwrite (&amp;s32, 4, 1, fd);
+        s32 = 14 + sizeof (bmph);
+        SWAP32(s32);
+        fwrite (&amp;s32, 4, 1, fd);
+#ifdef ADM_BIG_ENDIAN
+	Endian_BitMapInfo(&amp;bmph);
+#endif
+        fwrite (&amp;bmph, sizeof (bmph), 1, fd);
+        fwrite (out, sz, 1, fd);
+  
+        fclose(fd);
+        ADM_dealloc(out);
+        return 1;
+}
+/**
+    \fn saveAsJpg
+    \brief save current image into filename, into jpg format
+*/
+uint8_t  ADMImage::saveAsJpg(const char *filename)
+{
+ ffmpegEncoderFFMjpeg *codec=NULL;
+  FILE *fd;
+  uint8_t *buffer=NULL;
+  uint32_t sz;
+  
+
+        sz = _width*_height*3;
+        ADMBitstream bitstream(sz);
+        buffer=new uint8_t[sz];
+        bitstream.data=buffer;
+        codec=new  ffmpegEncoderFFMjpeg(_width,_height,FF_MJPEG)  ;
+        codec-&gt;init( 95,25000);
+        if(!codec-&gt;encode(this,&amp;bitstream))
+        {
+                GUI_Error_HIG(QT_TR_NOOP(&quot;Cannot encode the frame&quot;), NULL);
+                delete [] buffer;
+                delete codec;
+                return 0;
+        }
+        delete codec;
+        fd=fopen(filename,&quot;wb&quot;);
+        if(!fd)
+        {
+                GUI_Error_HIG(QT_TR_NOOP(&quot;File error&quot;),QT_TR_NOOP( &quot;Cannot open \&quot;%s\&quot; for writing.&quot;), filename);
+                delete [] buffer;
+                return 0;
+        }
+        fwrite (buffer, bitstream.len, 1, fd);
+        fclose(fd);
+        delete [] buffer;
+        return 1;
+}
+/**
+      \fn LumaReduceBy2
+      \brief Very simple reduce by 2 both hz &amp; vz for luma plane only.
+*/
+ uint8_t   ADMImage::LumaReduceBy2(void)
+{
+  uint8_t *ptr1,*ptr2,*outptr;
+  for(int y=0;y&lt;_height&gt;&gt;1;y++)
+  {
+    
+    ptr1=data+y*_width*2;
+    ptr2=ptr1+_width;
+    outptr=data+(_width&gt;&gt;1)*y;
+    for(int x=0;x&lt;_width&gt;&gt;1;x++)
+    {
+      uint32_t a,b,c,d;  
+          a=ptr1[0]+ptr1[1];
+          b=ptr2[0]+ptr2[1];
+          ptr1+=2;
+          ptr2+=2;
+          a=(a+b)&gt;&gt;2;
+          *outptr++=a;
+    }
+  }
+  return 1;
+  
+}
+ /**
+  *		\fn  copyLeftSideTo
+  * 	\brief Copy half the image (left part) to dest
+  * 	@param dest : Image to copy to 
+  */
+ uint8_t ADMImage::copyLeftSideTo(ADMImage *dest)
+ {
+		uint8_t *src,*dst;
+		uint32_t stride;
+ 
+			ADM_assert(_width==dest-&gt;_width);
+			ADM_assert(_height==dest-&gt;_height);
+		
+	 		dst=YPLANE(dest);
+		    src=YPLANE(this);
+		    stride=_width;
+		    for(uint32_t y=0;y&lt;_height;y++)   // We do both u &amp; v!
+		    {
+		        memcpy(dst,src,stride&gt;&gt;1);
+		        dst+=stride;
+		        src+=stride;
+		    }
+		        // U
+		    dst=UPLANE(dest);
+		    src=UPLANE(this);
+		    stride=_width&gt;&gt;1;
+		    uint32_t h2=_height&gt;&gt;1;
+		    for(uint32_t y=0;y&lt;h2;y++)   // We do both u &amp; v!
+		    {
+		        memcpy(dst,src,stride&gt;&gt;1);
+		        dst+=stride;
+		        src+=stride;
+		    }
+		        // V
+		    dst=VPLANE(dest);
+		    src=VPLANE(this);
+		    for(uint32_t y=0;y&lt;h2;y++)   // We do both u &amp; v!
+		    {
+		        memcpy(dst,src,stride&gt;&gt;1);
+		        dst+=stride;
+		        src+=stride;
+		    }
+		    return 1;
+ }
+//EOF

Copied: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/ADM_videoFilter.cpp (from rev 3979, branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_genvideo.cpp)
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_genvideo.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/ADM_videoFilter.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -0,0 +1,166 @@
+/***************************************************************************
+                          ADM_genvideo.cpp  -  description
+                             -------------------
+    begin                : Sun Apr 14 2002
+    copyright            : (C) 2002 by mean
+    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+
+
+#include &quot;ADM_default.h&quot;
+
+
+#include &quot;ADM_editor/ADM_edit.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
+
+#include&quot;ADM_video/ADM_vidCommonFilter.h&quot;
+uint8_t AVDMGenericVideoStream::getPixel(int32_t x,int32_t y,uint8_t *data)
+{
+		if(x&gt;(int32_t)_info.width)
+  			{
+            	x=2*_info.width-x;
+       	}
+       if(y&gt;(int32_t)_info.height)
+  			{
+            	y=2*_info.height-y;
+       	}
+        if(   x&lt;0)
+          x=-x;
+        if(   y&lt;0)
+          y=-y;
+
+          return *(data+x+(y*_info.width));
+}
+
+uint32_t   AVDMGenericVideoStream::getPARWidth(void)
+{
+  if(_in)
+  {
+    return _in-&gt; getPARWidth();
+  }
+  return 1;
+}
+/* If there is a father, retrieve PAR from him else assume it is 1:1 */
+uint32_t   AVDMGenericVideoStream::getPARHeight(void)
+{
+  if(_in)
+  {
+    return _in-&gt; getPARHeight();
+  }
+  return 1;
+}
+
+
+uint8_t AVDMGenericVideoStream::getPixelU(int32_t x,int32_t y,uint8_t *data)
+{
+int32_t w=_info.width&gt;&gt;1;
+int32_t h=_info.height&gt;&gt;1;
+	       	
+			x=x&gt;&gt;1;
+			y=y&gt;&gt;1;
+    		
+		if(x&gt;w)
+  			{
+            	x=2*w-x;
+       	}
+       if(y&gt;h)
+  			{
+            	y=2*h-y;
+       	}
+        if(   x&lt;0)
+          x=-x;
+        if(   y&lt;0)
+          y=-y;
+
+          return *(data+x+(y*w));
+
+
+}
+uint8_t AVDMGenericVideoStream::setPixelU(uint8_t val,int32_t x,int32_t y,uint8_t *data)
+{
+int32_t w=_info.width&gt;&gt;1;
+int32_t h=_info.height&gt;&gt;1;
+	       	
+			x=x&gt;&gt;1;
+			y=y&gt;&gt;1;
+
+		if(x&gt;w)
+  			{
+            	x=2*w-x;
+       	}
+       if(y&gt;h)
+  			{
+            	y=2*h-y;
+       	}
+        if(   x&lt;0)
+          x=-x;
+        if(   y&lt;0)
+          y=-y;
+
+           *(data+x+(y*w))=val;
+           return 1;
+
+
+}
+uint8_t AVDMGenericVideoStream::unPackChroma(uint8_t *ssrc,uint8_t *ddst)
+{
+uint8_t *src,*dst,*srcu,*srcv; //,*dstu,*dstv;
+	src=ssrc;
+ 	dst=ddst;
+   	// unpack   luma
+				for(uint32_t l=_info.width*_info.height;l&gt;0;l--)
+    				{
+                   	*dst++=*src++;
+                    	dst+=2;
+          			}
+         	// unpack   chroma
+         	
+	          srcu=ssrc+_info.width*_info.height;
+       		srcv=srcu+((_info.width*_info.height)&gt;&gt;2);
+         		dst=ddst+1;
+
+             for(int32_t y=0;y&lt;(int32_t)(_info.height &gt;&gt;1);y++)
+           	{
+		         		for(int32_t x=0;x&lt;(int32_t)(_info.width );x++)
+             			{
+                  		
+                 			*dst=*(dst+3*_info.width)=*srcu;
+                    		dst++;
+                 			*dst=*(dst+3*_info.width)=*srcv;
+                    		dst+=2;
+                    		if(x&amp;1) srcu++;
+                    		if(x&amp;1) srcv++;
+
+                  	}
+                   dst+=_info.width*3;
+               }
+          return 1;
+}
+
+BUILD_CREATE(res_create,AVDMVideoStreamResize);
+BUILD_CREATE(crop_create,AVDMVideoStreamCrop);
+BUILD_CREATE(bsmear_create,AVDMVideoStreamBSMear);
+/*AVDMGenericVideoStream *res_create(AVDMGenericVideoStream *in, CONFcouple *param)
+{
+ 	return new   AVDMVideoStreamResize(in,param);
+}
+
+AVDMGenericVideoStream *crop_create(AVDMGenericVideoStream *in, CONFcouple *param)
+{
+ 	return new   AVDMVideoStreamCrop(in,param);
+}; ;
+AVDMGenericVideoStream *bsmear_create(AVDMGenericVideoStream *in, CONFcouple *param)
+{
+ 	return new   AVDMVideoStreamBSMear(in,param);
+}; ;
+*/

Copied: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/ADM_videoFilterCache.cpp (from rev 3979, branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_cache.cpp)
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_cache.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/ADM_videoFilterCache.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -0,0 +1,150 @@
+//
+// C++ Implementation: ADM_cache
+//
+// Description: 
+//
+//
+// Author: mean &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>&gt;, (C) 2004
+//
+// Copyright: See COPYING file that comes with this distribution
+//
+//
+#include &quot;ADM_default.h&quot;
+
+#include &quot;ADM_editor/ADM_edit.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
+
+
+#include &quot;ADM_osSupport/ADM_debugID.h&quot;
+#define MODULE_NAME MODULE_FILTER
+#include &quot;ADM_osSupport/ADM_debug.h&quot;
+
+
+VideoCache::VideoCache(uint32_t nb,AVDMGenericVideoStream *in)
+{
+uint32_t sz;
+	nbEntry=nb;
+	incoming=in;
+	memcpy(&amp;info,in-&gt;getInfo(),sizeof(info));
+	// Ready buffers
+	entry=new vidCacheEntry[nbEntry];
+	sz=(info.width*info.height*3)&gt;&gt;1;
+	for(uint32_t i=0;i&lt;nbEntry;i++)
+	{
+		entry[i].frameBuffer	=new ADMImage(info.width,info.height);	
+		entry[i].frameNum	=0xffff0000;
+		entry[i].frameLock	=0;
+		entry[i].lastUse	=0xffff0000;
+	}	
+	counter=0;
+}
+//_____________________________________________
+VideoCache::~ VideoCache()
+{
+	for(uint32_t i=0;i&lt;nbEntry;i++)
+	{
+		delete  entry[i].frameBuffer;
+	}
+	delete [] entry;
+	
+}
+//_____________________________________________
+int32_t VideoCache::searchFrame( uint32_t frame)
+{
+	for(uint32_t i=0;i&lt;nbEntry;i++)
+	{
+		if(entry[i].frameNum==frame) return i;
+	}
+	return -1;
+}
+//_____________________________________________
+int32_t 	 VideoCache::searchPtr( ADMImage *ptr)
+{
+	for(uint32_t i=0;i&lt;nbEntry;i++)
+	{
+		if(entry[i].frameBuffer==ptr) return i;
+	}
+	return -1;
+}
+//_____________________________________________
+uint8_t  VideoCache::unlockAll(void)
+{
+	for(uint32_t i=0;i&lt;nbEntry;i++)
+	{		
+		entry[i].frameLock=0;		
+	}
+	return 1;
+}
+//_____________________________________________
+uint8_t  VideoCache::unlock(ADMImage *frame)
+{
+int32_t k;
+	k=searchPtr(frame) ;
+	ADM_assert(k&gt;=0);
+	entry[k].frameLock--;	
+	return 1;	
+}
+//_____________________________________________
+uint8_t  VideoCache::purge(void)
+{
+	for(uint32_t i=0;i&lt;nbEntry;i++)
+	{		
+		entry[i].frameLock=0;
+		entry[i].frameNum=0xffff0000;	
+		entry[i].lastUse=0xffff0000;	
+	}
+	return 1;
+
+}
+//_____________________________________________
+ADMImage *VideoCache::getImage(uint32_t frame)
+{
+int32_t i;
+uint32_t tryz=nbEntry;
+uint32_t len,flags;
+ADMImage *ptr=NULL;
+
+	// Already there ?
+	if((i=searchFrame(frame))&gt;=0)
+	{
+		aprintf(&quot;Cache : Cache hit %d buffer %d\n&quot;,frame,i);
+		entry[i].frameLock++;
+		entry[i].lastUse=counter;
+		counter++;
+		return entry[i].frameBuffer;	
+	}
+	// Else get it!
+	
+	// First elect a new buffer, we do it by 
+	// using a RLU scheme
+	
+	uint32_t deltamax=0,delta;
+	uint32_t target=0xfff;
+	aprintf(&quot;Cache : Cache miss %d\n&quot;,frame);
+	//for(uint32_t i=0;i&lt;nbEntry;i++) printf(&quot;%d(%d) &quot;,frameNum[i],frameLock[i]);printf(&quot;\n&quot;);
+	for(uint32_t i=0;i&lt;nbEntry;i++)
+	{
+		if(entry[i].frameLock) continue; 	// don&quot;t consider locked frames
+		
+		
+		delta=abs((int)counter-(int)entry[i].lastUse);
+		if(delta&gt;deltamax)
+		{
+			deltamax=delta;
+			target=i;
+		}
+	}
+	ADM_assert(target!=0xfff);
+	// Target is the new cache we will use
+
+	ptr=entry[target].frameBuffer;
+	if(!incoming-&gt;getFrameNumberNoAlloc(frame,&amp;len,ptr,&amp;flags)) return NULL;
+	// Update LRU info
+	entry[target].frameLock++;
+	entry[target].frameNum=frame;
+	entry[target].lastUse=counter;
+	counter++;	
+	return ptr;
+	
+}
+

Added: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/CMakeLists.txt	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/CMakeLists.txt	2008-04-24 17:36:16 UTC (rev 3980)
@@ -0,0 +1,14 @@
+SET(ADM_coreImage_SRCS 
+	ADM_confCouple.cpp  
+        ADM_videoFilter.cpp  
+        ADM_videoFilterCache.cpp
+        ADM_image.cpp  
+        ADM_imageUtils.cpp
+        ADM_imageResizer.cpp
+        
+)
+
+ADD_LIBRARY(ADM_coreImage SHARED ${ADM_coreImage_SRCS})
+TARGET_LINK_LIBRARIES(ADM_coreImage ADM_core)
+
+INSTALL(TARGETS ADM_coreImage RUNTIME DESTINATION ${BIN_DIR} LIBRARY DESTINATION lib)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_coreToolkit.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_coreToolkit.h	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_coreToolkit.h	2008-04-24 17:36:16 UTC (rev 3980)
@@ -20,7 +20,6 @@
 #define ADM_COREUI_TOOLKIT__
 
 
-
 typedef enum 
 {
         ADM_LOG_NONE=0,

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edFrameType.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edFrameType.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edFrameType.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -26,8 +26,7 @@
 #include &quot;prefs.h&quot;
 #include &quot;ADM_editor/ADM_edit.hxx&quot;
 #include &quot;ADM_codecs/ADM_codec.h&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;avi_vars.h&quot;
 #include &quot;../ADM_userInterfaces/ADM_commonUI/DIA_working.h&quot;
 #include &quot;DIA_coreToolkit.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edIdentify.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edIdentify.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edIdentify.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -33,8 +33,8 @@
 #include &quot;ADM_inputs/ADM_avsproxy/ADM_avsproxy.h&quot;
 
 #include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
+#include &quot;ADM_videoFilter.h&quot;
+
 #include &quot;ADM_inputs/ADM_mpegdemuxer/dmx_identify.h&quot;
 #include &quot;ADM_assert.h&quot;
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edLoadSave.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edLoadSave.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edLoadSave.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -34,8 +34,9 @@
 
 #include &quot;DIA_coreToolkit.h&quot;
 #include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
+#include &quot;ADM_videoFilter.h&quot;
+#include &quot;ADM_videoFilter_internal.h&quot;
+
 #include &quot;ADM_audiofilter/audioeng_buildfilters.h&quot;
 #include &quot;ADM_encoder/adm_encConfig.h&quot;
 #include &quot;prefs.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edRender.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edRender.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edRender.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -28,8 +28,7 @@
 #include &quot;fourcc.h&quot;
 #include &quot;ADM_editor/ADM_edit.hxx&quot;
 #include &quot;ADM_codecs/ADM_codec.h&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;avi_vars.h&quot;
 
 #include &quot;ADM_osSupport/ADM_debugID.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edit.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edit.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edit.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -39,8 +39,7 @@
 #include &quot;ADM_inputs/ADM_avsproxy/ADM_avsproxy.h&quot;
 #include &quot;DIA_coreToolkit.h&quot;
 #include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
+#include &quot;ADM_videoFilter.h&quot;
 //#include &quot;ADM_dialog/DIA_working.h&quot;
 #include &quot;ADM_inputs/ADM_ogm/ADM_ogm.h&quot;
 #include &quot;ADM_inputs/ADM_mpegdemuxer/dmx_video.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_externalEncoder.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_externalEncoder.h	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_externalEncoder.h	2008-04-24 17:36:16 UTC (rev 3980)
@@ -18,7 +18,7 @@
 #define ADM_externalEncoder_H
 
 #include &quot;ADM_codecs/ADM_codec.h&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_vidEncode.hxx&quot;
 #include &quot;adm_encoder.h&quot;
 #include &quot;ADM_pluginLoad.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -26,8 +26,10 @@
 
 #include &quot;prefs.h&quot;
 #include &quot;ADM_vidEncode.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 
+
+
 #include &quot;ADM_osSupport/ADM_debugID.h&quot;
 #define MODULE_NAME MODULE_ENCODER
 #include &quot;ADM_osSupport/ADM_debug.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encCopy.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encCopy.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encCopy.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -30,7 +30,7 @@
 
 #include &quot;ADM_encoder/ADM_vidEncode.hxx&quot;
 
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_encoder/adm_encoder.h&quot;
 #include &quot;ADM_encoder/adm_encCopy.h&quot;
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encRequant.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encRequant.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encRequant.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -22,7 +22,7 @@
 
 #include &quot;ADM_encoder/ADM_vidEncode.hxx&quot;
 
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_encoder/adm_encoder.h&quot;
 #include &quot;ADM_encoder/adm_encRequant.h&quot;
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encXvid4.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encXvid4.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encXvid4.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -28,7 +28,7 @@
 
 #include &quot;ADM_encoder/ADM_vidEncode.hxx&quot;
 
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_codecs/ADM_xvid4.h&quot;
 #include &quot;ADM_encoder/adm_encoder.h&quot;
 #include &quot;ADM_encoder/adm_encXvid4.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encffmpeg.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encffmpeg.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encffmpeg.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -25,7 +25,7 @@
 #include &quot;ADM_default.h&quot;
 #include &quot;ADM_encoder/ADM_vidEncode.hxx&quot;
 
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_codecs/ADM_ffmpeg.h&quot;
 #include &quot;ADM_encoder/adm_encoder.h&quot;
 #include &quot;ADM_encoder/adm_encffmpeg.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encffmpeg1.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encffmpeg1.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encffmpeg1.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -32,7 +32,9 @@
 
 #include &quot;ADM_encoder/ADM_vidEncode.hxx&quot;
 
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
+
+
 //#include &quot;ADM_codecs/ADM_divxEncode.h&quot;
 #include &quot;ADM_codecs/ADM_ffmpeg.h&quot;
 #include &quot;ADM_encoder/adm_encoder.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encmjpeg.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encmjpeg.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encmjpeg.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -34,7 +34,7 @@
 #include &quot;ADM_encoder/ADM_vidEncode.hxx&quot;
 
 
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_codecs/ADM_ffmpeg.h&quot;
 
 #include &quot;ADM_encoder/adm_encoder.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encmpeg2enc.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encmpeg2enc.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encmpeg2enc.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -32,12 +32,12 @@
 
 
 #include &quot;ADM_encoder/ADM_vidEncode.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_encoder/adm_encoder.h&quot;
 #include &quot;ADM_encoder/adm_encConfig.h&quot;
 
 #include &quot;ADM_audiofilter/audioprocess.hxx&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
+
 #include &quot;ADM_libraries/ADM_libmpeg2enc/ADM_mpeg2enc.h&quot;
 #include &quot;ADM_audiofilter/audioeng_buildfilters.h&quot;
 #include &quot;prefs.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encoder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encoder.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encoder.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -32,7 +32,7 @@
 
 #include &quot;ADM_encoder/ADM_vidEncode.hxx&quot;
 
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_encoder/adm_encoder.h&quot;
 
 #ifdef USE_DIVX

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encoder.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encoder.h	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encoder.h	2008-04-24 17:36:16 UTC (rev 3980)
@@ -26,6 +26,7 @@
 #define __ADM_encoder__
 #include &quot;ADM_image.h&quot;
 #include &quot;ADM_bitstream.h&quot;
+#include &quot;ADM_videoFilter.h&quot;
 typedef enum
 {
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encx264.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encx264.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encx264.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -30,7 +30,7 @@
 
 #include &quot;ADM_encoder/ADM_vidEncode.hxx&quot;
 
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 
 #include &quot;ADM_encoder/adm_encoder.h&quot;
 #include &quot;ADM_encoder/adm_encx264.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encyv12.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encyv12.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encyv12.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -25,7 +25,7 @@
 
 #include &quot;ADM_encoder/ADM_vidEncode.hxx&quot;
 
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_encoder/adm_encoder.h&quot;
 #include &quot;ADM_encoder/adm_encyv12.h&quot;
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/ADM_vidDummyFilter.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/ADM_vidDummyFilter.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/ADM_vidDummyFilter.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -15,20 +15,14 @@
  *                                                                         *
  ***************************************************************************/
 
-#include &lt;stdio.h&gt;
-#include &lt;stdlib.h&gt;
-#include &lt;string.h&gt;
+#include &quot;config.h&quot;
 
 #include &quot;ADM_default.h&quot;
-#include &quot;fourcc.h&quot;
-#include &quot;avi_vars.h&quot;
 
-
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_videoFilter/ADM_vidFlipV.h&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
 
+
 //#define REDUCED
 //adm_fast_memcpy myAdmMemcpy=memcpy;
 #undef memcpy

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -26,9 +26,9 @@
 
 
 #include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_video/ADM_videoNull.h&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
+#include &quot;ADM_videoFilter_internal.h&quot;
 #include &quot;ADM_video/ADM_vidPartial.h&quot;
 #include &quot;ADM_userInterfaces/ADM_commonUI/GUI_render.h&quot;
 
@@ -131,7 +131,7 @@
 {
 //    printf (&quot;nb_video_filter = %d, max %d, name = %s\n&quot;, nb_video_filter, (MAX_FILTER-1), name);
         allfilters.push_back (FILTER_ENTRY (name, create, tag, viewable,
-                                            filtername, desc, create_from_script));
+                                            filtername, VF_MISC,desc, create_from_script));
 
         if(viewable==1)
 	{

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter_declaration.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter_declaration.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter_declaration.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -18,23 +18,14 @@
  *                                                                         *
  ***************************************************************************/
 
-#include &lt;stdio.h&gt;
-#include &lt;stdlib.h&gt;
-#include &lt;string.h&gt;
-
-#include &quot;ADM_assert.h&quot;
-
 #include &quot;config.h&quot;
-#include &quot;fourcc.h&quot;
+#include &quot;ADM_default.h&quot;
 
-#include &quot;avi_vars.h&quot;
 #ifdef HAVE_ENCODER
 
 
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
-
+#include &quot;ADM_videoFilter.h&quot;
+#include &quot;ADM_videoFilter_internal.h&quot;
 #define FILTERDEC(x) extern   AVDMGenericVideoStream *x(AVDMGenericVideoStream *in, CONFcouple *param)
 #define FILTERDECX(x) extern   AVDMGenericVideoStream *x(AVDMGenericVideoStream *in, int n,Arg *args)
 #define REGISTER(e,a,g,b,c,d) {FILTERDEC(d);registerFilterEx(a,b,c,d,e,NULL,NULL);}

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter_dylib.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter_dylib.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter_dylib.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -34,9 +34,10 @@
 
 #include &quot;DIA_coreToolkit.h&quot;
 #include &quot;DIA_fileSel.h&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
+#include &quot;ADM_videoFilter.h&quot;
 
+#include &quot;ADM_videoFilter_internal.h&quot;
+
 #include &quot;ADM_osSupport/ADM_debugID.h&quot;
 #define MODULE_NAME MODULE_PREVIEW
 #include &quot;ADM_osSupport/ADM_debug.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter_saveload.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter_saveload.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter_saveload.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -30,11 +30,10 @@
 #include &quot;ADM_assert.h&quot;
 
 #include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_video/ADM_videoNull.h&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
+#include &quot;ADM_videoFilter_internal.h&quot;
 #include &quot;ADM_video/ADM_vidPartial.h&quot;
-#include &quot;ADM_video/ADM_confCouple.h&quot;
 #include &quot;avi_vars.h&quot;
 // exported vars
 extern uint32_t nb_active_filter;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/vidVCD.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/vidVCD.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/vidVCD.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -39,8 +39,8 @@
 
 #include &quot;prototype.h&quot;
 #include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
+#include &quot;ADM_videoFilter.h&quot;
+#include &quot;ADM_videoFilter_internal.h&quot;
 #include &quot;ADM_filter/vidVCD.h&quot;
 #include &quot;prefs.h&quot;
 #include &quot;ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.h&quot;

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/video_filters.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/video_filters.h	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/video_filters.h	2008-04-24 17:36:16 UTC (rev 3980)
@@ -1,209 +0,0 @@
-/***************************************************************************
-                          video_filters.h  -  description
-                             -------------------
-    begin                : Wed Mar 27 2002
-    copyright            : (C) 2002 by mean
-    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
- #ifndef __VIDEO_FILTERS__
- #define  __VIDEO_FILTERS__
-
-#include &quot;ADM_script/adm_scanner.h&quot;
-typedef enum
-{
-                VF_INVALID=0,
-                VF_RESIZE=1,
-                VF_CROP,
-                VF_TELECIDE,
-                VF_BLACKEN,
-                VF_SHARPEN,
-                VF_MEAN,
-                VF_MEDIAN,
-                VF_GAUSSIAN,
-                VF_SMOOTHCLEAN,
-                VF_DEINTERLACE,
-                VF_ADDBORDER,
-                VF_PALSHIFT,
-                VF_SWAPUV,
-                VF_CONTRAST,
-                VF_LUMA,
-                VF_CHROMAU,
-                VF_CHROMAV,
-                VF_STABILIZE,
-                VF_FLIP,
-                VF_DENOISE,
-                VF_SUBTILE,
-                VF_LARGEMEDIAN,
-                VF_FLUXSMOOTH,
-                VF_SALT,
-                VF_PARTIAL          ,
-                VF_VLADSMOOTH,
-                VF_ROTATE,
-                VF_DROPOUT,
-                VF_SWAPFIELDS,
-                VF_KEEPODD,
-                VF_KEEPEVEN,
-                VF_SEPARATEFIELDS,
-                VF_MERGEFIELDS,
-                VF_CHROMASHIFT,
-                VF_SMARTSWAPFIELDS,
-                VF_MPLAYERRESIZE,
-                VF_IVTC,
-                VF_PULLDOWN,
-                VF_MPLHQD3D,
-                VF_MPLLQD3D,
-                VF_LAVDEINT,
-                VF_MPDETC,
-                VF_KRNDEINT,
-                VF_FORCEDPP,
-                VF_SOFTEN,
-                VF_DECOMB,
-                VF_DECIMATE,
-                VF_MSMOOTH,
-                VF_STACKFIELD,
-                VF_HZSTACKFIELD,
-                VF_WHIRL,
-                VF_EQUALIZER,
-                VF_VOBSUB,
-                VF_CHFPS,
-                VF_RESAMPLE_FPS,
-                VF_LAVPP_DEINT,
-                VF_UNSTACK_FIELD,
-                VF_HUE,
-                VF_EQ2,
-                VF_DGBOB,
-                VF_MSHARPEN,
-                VF_ASHARP,
-                VF_CNR2,
-                VF_DELTA,
-                VF_UNBLEND,
-                VF_HARDIVTC,
-                VF_MOSAIC,
-                VF_BLENDREMOVAL,
-                VF_TDEINT,
-                VF_MPDELOGO,
-                VF_COLOR_YUV,
-                VF_ANIMATED,
-                VF_MCDEINT,
-                VF_REVERSE,
-                VF_FADE,
-                VF_ASS,
-                VF_YADIF,
-                VF_DVBSUB,
-                VF_LOGO,
-                VF_COMPUTEAVERAGE,
-                VF_ERASER,
-                VF_SWISSARMYKNIFE,
-                VF_THRESHOLD,
-                VF_PARTICLELIST,
-                VF_DUMMY,
-                VF_COUNT,
-                MAX_FILTER = VF_COUNT - 1,
-                VF_EXTERNAL_START=0xF0000000
-          }VF_FILTERS;
-
-typedef AVDMGenericVideoStream *(ADM_createT) (AVDMGenericVideoStream *in, CONFcouple *);
-typedef AVDMGenericVideoStream *(ADM_create_from_scriptT) (AVDMGenericVideoStream *in, int n,Arg *args);
-
-         
-   struct FILTER_ENTRY
-   {
-        const char        *name;
-        ADM_createT       *create;
-        void              (*destroy)( AVDMGenericVideoStream *old); /* Maybe needed ...*/
-        VF_FILTERS        tag;
-        uint8_t           viewable;
-        const char        *filtername;
-        const char        *description;
-        ADM_create_from_scriptT *create_from_script;
-
-       FILTER_ENTRY (const char * name, ADM_createT * create, VF_FILTERS tag,
-                     uint8_t viewable, const char * filtername,
-                     const char * description = 0,
-                     ADM_create_from_scriptT * create_from_script = 0)
-           : name (name),
-             create (create),
-             destroy (0),
-             tag (tag),
-             viewable (viewable),
-             filtername (filtername),
-             description (description),
-             create_from_script (create_from_script)
-       {
-       }
-
-       FILTER_ENTRY ()
-           : name (0),
-             create (0),
-             destroy (0),
-             tag (VF_INVALID),
-             viewable (0),
-             filtername (0),
-             description (0),
-             create_from_script (0)
-       {
-       }
-   };
- 	
-   typedef struct
-   {
-          VF_FILTERS              tag;
-          AVDMGenericVideoStream *filter;
-          CONFcouple             *conf;
-   }FILTER;
-
-   typedef struct
-   {
-            uint32_t    nb;
-            const char  *param[25];
-   }FILTER_PARAM;
-   
-AVDMGenericVideoStream *getLastVideoFilter( uint32_t frameStart, uint32_t nbFrame);
-AVDMGenericVideoStream *getLastVideoFilter( void );
-AVDMGenericVideoStream *getFirstVideoFilter( uint32_t frameStart, uint32_t nbFrame);
-AVDMGenericVideoStream *getFirstVideoFilter( void);
-AVDMGenericVideoStream *getFirstCurrentVideoFilter( void);
-FILTER * getCurrentVideoFilterList (uint32_t * count);
-const FILTER_ENTRY * filterGetEntryFromTag (VF_FILTERS tag);
-const char * filterGetNameFromTag(VF_FILTERS tag);
-
-  void	filterSetPostProc( void );
-  
-#ifdef USE_LIBXML2
-void filterSaveXml(char *name);
-void filterSaveXml(char *name,uint8_t silent);
-void filterLoadXml(char *name);
-int  filterLoadXml(char *name,uint8_t silent);
-#endif
- void filterSave(char *name);
- void filterLoad(char *name);
- int filterLoad(char *name,uint8_t silent);
- void filterSave(char *name,uint8_t silent);
-CONFcouple *filterBuildCouple(FILTER_PARAM *param,uint32_t n,Arg *args);
-void filterSaveScriptJS(FILE *f);
-
-void registerFilter(const char *name,VF_FILTERS tag,uint8_t viewable,
-                    ADM_createT  *create,
-                    const char *fname);
-                    
-void registerFilterEx(const char *name,VF_FILTERS tag,uint8_t viewable,
-                ADM_createT  *create,
-                const char *filtername,
-                ADM_create_from_scriptT *create_from_script,
-                const char *description);
-                
-void 		filterListAll( void );
-VF_FILTERS 	filterGetTagFromName(char *inname);
-uint8_t 	filterAddScript(VF_FILTERS tags,uint32_t n,Arg *args);
-//AVDMGenericVideoStream *filterCreateFromTag(VF_FILTERS tag,uint8_t *conf, AVDMGenericVideoStream *in) ;
-
- #endif

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/avcodec.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/avcodec.h	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/avcodec.h	2008-04-24 17:36:16 UTC (rev 3980)
@@ -26,7 +26,7 @@
  * external API header
  */
 
-#include &quot;config.h&quot; // MEANX
+#include &quot;ADM_coreConfig.h&quot; // MEANX
 #include &quot;../ADM_lavutil/avutil.h&quot; // MEANX
 
 #define LIBAVCODEC_VERSION_MAJOR 51

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mthread.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mthread.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mthread.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -19,7 +19,7 @@
 
 
 #include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_encoder/ADM_vidEncode.hxx&quot;
 #include &quot;ADM_encoder/adm_encoder.h&quot;
 #include &quot;ADM_userInterfaces/ADM_commonUI/DIA_encoding.h&quot;

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_image.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_image.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_image.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -1,393 +0,0 @@
-/***************************************************************************
-    copyright            : (C) 2003-2005 by mean
-    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#include &quot;config.h&quot;
-
-#include &lt;stdlib.h&gt;
-#include &lt;stdio.h&gt;
-#include &lt;string.h&gt;
-#include &quot;ADM_assert.h&quot;
-#include &quot;ADM_default.h&quot;
-
-#include &quot;ADM_image.h&quot;
-
-//#include &quot;ADM_assert.h&quot;
-void ADMImage_stat( void );
-
-static uint32_t imgMaxMem=0;
-static uint32_t imgCurMem=0;
-static uint32_t imgMaxNb=0;
-static uint32_t imgCurNb=0;
-
-void ADMImage_stat( void )
-{
-	printf(&quot;\nImages stat:\n&quot;);
-	printf(&quot;___________\n&quot;);
-	printf(&quot;Max memory consumed (MB)     : %lu\n&quot;,imgMaxMem&gt;&gt;10);
-	printf(&quot;Current memory consumed (MB) : %lu\n&quot;,imgCurMem&gt;&gt;10);
-	printf(&quot;Max image used               : %lu\n&quot;,imgMaxNb);
-	printf(&quot;Cur image used               : %lu\n&quot;,imgCurNb);
-
-}
-//
-//	Allocate and initialize everything to default values
-//
-void    ADMImage::commonInit(uint32_t w,uint32_t h)
-{
-        _width=w;        
-        _height=h;
-        quant=NULL;
-        _qStride=0;
-        _Qp=2;
-        flags=0;
-        _qSize=0;
-        _aspect=ADM_ASPECT_1_1;
-        
-        imgCurNb++;
-        _planes[0]=_planes[1]=_planes[2]=NULL;
-        _noPicture=0;
-        _colorspace=ADM_COLOR_YV12;
-
-}
-ADMImage::ADMImage(uint32_t width, uint32_t height)
-{
-        commonInit(width,height);
-        _isRef=0;
-        data=new uint8_t [ ((width+15)&amp;0xffffff0)*((height+15)&amp;0xfffffff0)*2];
-        ADM_assert(data);
-        imgCurMem+=(width*height*3)&gt;&gt;1;
-        if(imgCurMem&gt;imgMaxMem) imgMaxMem=imgCurMem;
-        if(imgCurNb&gt;imgMaxNb) imgMaxNb=imgCurNb;
-
-};
-// Create a fake image with external datas
-ADMImage::ADMImage(uint32_t width, uint32_t height,uint32_t dummy)
-{       
-        commonInit(width,height); 
-        _isRef=1;
-        data=NULL;                
-                
-};
-//
-//	Deallocate
-//
-ADMImage::~ADMImage()
-{
-        if(!_isRef)
-        {
-	       if(quant) delete [] quant;
-	       quant=NULL;
-	       if(data) delete [] data;
-	       data=NULL;
-               imgCurMem-=(_width*_height*3)&gt;&gt;1;
-	}
-	imgCurNb--;
-	
-}
-
-//
-//	Duplicate
-//
-uint8_t ADMImage::duplicateMacro(ADMImage *src,uint32_t swap)
-{
-        // Sanity check
-        ADM_assert(src-&gt;_width==_width);
-        ADM_assert(src-&gt;_height==_height);
-
-        ADM_assert(!_isRef); // could not duplicate to a linked data image
-
-        // cleanup if needed
-        if(quant) delete [] quant;
-        quant=NULL;
- 
-       _qStride=0;      
-        _qSize=0;
-        
-        copyInfo(src);
-        if(!src-&gt;_isRef)
-        {
-               memcpy(YPLANE(this),YPLANE(src),_width*_height);
-                if(swap)
-                {
-                        memcpy(UPLANE(this),VPLANE(src),(_width*_height)&gt;&gt;2);
-                        memcpy(VPLANE(this),UPLANE(src),(_width*_height)&gt;&gt;2);
-                }
-                else
-                {
-                        memcpy(UPLANE(this),UPLANE(src),(_width*_height)&gt;&gt;2);
-                        memcpy(VPLANE(this),VPLANE(src),(_width*_height)&gt;&gt;2);
-                }
-        }
-        else
-        {
-                if(src-&gt;_noPicture)
-                {
-                        // no pic available, blacken it                        
-                        memset(YPLANE(this),0,_width*_height);
-                        memset(UPLANE(this),128,(_width*_height)&gt;&gt;2);
-                        memset(VPLANE(this),128,(_width*_height)&gt;&gt;2);
-                        return 1;
-                        
-                }
-               // The source is a reference
-                // We have to use the alternate informations
-                // to copy &amp; compact at the same time
-                //
-
-                ADM_assert(src-&gt;_planeStride[0]);
-                ADM_assert(src-&gt;_planeStride[1]);
-                ADM_assert(src-&gt;_planeStride[2]);
-
-                ADM_assert(src-&gt;_planes[0]);
-                ADM_assert(src-&gt;_planes[1]);
-                ADM_assert(src-&gt;_planes[2]);
-
-                uint8_t *in,*out;
-                uint32_t w,h,stride;
-
-                w=src-&gt;_width;
-                h=src-&gt;_height;
-                stride=src-&gt;_planeStride[0];
-                out=YPLANE(this);
-                in=src-&gt;_planes[0];
-#define PLANE_CPY(h) \
-                for(uint32_t y=0;y&lt;h;y++)  \
-                { \
-                        memcpy(out,in,w); \
-                        in+=stride;       \
-                        out+=w;           \
-                } 
-                PLANE_CPY(h);
-
-                w&gt;&gt;=1;
-                h&gt;&gt;=1;
-                in=src-&gt;_planes[1];
-                if(swap)
-                        out=VPLANE(this);
-                else
-                        out=UPLANE(this);
-                stride=src-&gt;_planeStride[1];
-                PLANE_CPY(h);
-        
-                in=src-&gt;_planes[2];
-                if(swap)
-                        out=UPLANE(this);
-                else
-                        out=VPLANE(this);
-                stride=src-&gt;_planeStride[2];
-                PLANE_CPY(h);
-
-
-        }
-        return 1;
-}
-uint8_t ADMImage::duplicate(ADMImage *src)
-{
-	return duplicateMacro(src,0);
-}
-uint8_t ADMImage::duplicateSwapUV(ADMImage *src)
-{
-        return duplicateMacro(src,0);
-}
-uint8_t ADMImage::pack(uint8_t invertChroma)
-{
-int u=1,v=2;
-    if(invertChroma) {u=2;v=1;}
-    ADM_assert(_planeStride[0]&gt;=_width);
-    // Pack luma
-    uint8_t *src,*dest;
-
-    src=_planes[0];
-    dest=YPLANE(this);
-    BitBlit(dest,_width,src,_planeStride[0],_width,_height);
-
-    src=_planes[u];
-    dest=UPLANE(this);
-    BitBlit(dest,_width&gt;&gt;1,src,_planeStride[u],_width&gt;&gt;1,_height&gt;&gt;1);
-
-    src=_planes[v];
-    dest=VPLANE(this);
-    BitBlit(dest,_width&gt;&gt;1,src,_planeStride[v],_width&gt;&gt;1,_height&gt;&gt;1);
-
-    return 1;
-}
-uint8_t ADMImage::duplicateFull(ADMImage *src)
-{
-	// Sanity check
-	ADM_assert(src-&gt;_width==_width);
-	ADM_assert(src-&gt;_height==_height);
-	
-	
-	copyInfo(src);
-        ADM_assert(!_isRef);
-
-	memcpy(YPLANE(this),YPLANE(src),_width*_height);
-	memcpy(UPLANE(this),UPLANE(src),(_width*_height)&gt;&gt;2);
-	memcpy(VPLANE(this),VPLANE(src),(_width*_height)&gt;&gt;2);
-	copyQuantInfo(src);
-	
-	return 1;
-}
-uint8_t ADMImage::copyInfo(ADMImage *src)
-{
-	_Qp=src-&gt;_Qp;
-	flags=src-&gt;flags;
-	_aspect=src-&gt;_aspect;
-}
-//
-//	By design the reallocation of quant should happen at startup
-//	but not in processing itself (reuse already allocated quant)
-//	It may seem shoddy, but it adds flexibility
-//
-uint8_t ADMImage::copyQuantInfo(ADMImage *src)
-{
-	if(!src-&gt;_qStride || !src-&gt;_qSize)  // No (usable) quant
-	{
-		_qStride=0;
-		return 1;
-	}
-	// Reuse Quant memory ?
-	if(!quant)
-	{	// need a new quant
-		quant=new uint8_t[src-&gt;_qSize];
-		_qSize=src-&gt;_qSize;
-	
-	}
-	
-	// Same size ?
-	ADM_assert(_qSize==src-&gt;_qSize);		
-	_qStride=src-&gt;_qStride;		
-	memcpy(quant,src-&gt;quant,_qSize);	
-	
-	return 1;
-}
-uint8_t ADMImage::blacken(void)
-{
-        memset(YPLANE(this),0,_width*_height);
-        memset(UPLANE(this),128,(_width*_height)&gt;&gt;2);
-        memset(VPLANE(this),128,(_width*_height)&gt;&gt;2);
-        return 1;
-
-}
-/*
-    Copy &quot;this&quot; image into dest image at x,y position
-
-*/
-uint8_t ADMImage::copyTo(ADMImage *dest, uint32_t x,uint32_t y)
-{
-      
-    uint32_t box_w=_width, box_h=_height;
-    // Clip if needed
-    if(y&gt;dest-&gt;_height)
-    {
-        printf(&quot;Y out : %u %u\n&quot;,y,dest-&gt;_height);
-         return 1;
-    }
-    if(x&gt;dest-&gt;_width) 
-    {
-        printf(&quot;X out : %u %u\n&quot;,x,dest-&gt;_width);
-         return 1;
-    }
-    
-    if(x+box_w&gt;dest-&gt;_width) box_w=dest-&gt;_width-x;
-    if(y+box_h&gt;dest-&gt;_height) box_h=dest-&gt;_height-y;
-
-    // do y
-    BitBlit(YPLANE(dest)+x+dest-&gt;_width*y,dest-&gt;_width,
-            data,_width,
-            box_w,box_h);
-    // Do u
-    BitBlit(UPLANE(dest)+x/2+(dest-&gt;_width*y)/4,dest-&gt;_width/2,
-            UPLANE(this),_width&gt;&gt;1,
-            box_w&gt;&gt;1,box_h&gt;&gt;1);
-
-    BitBlit(VPLANE(dest)+x/2+(dest-&gt;_width*y)/4,dest-&gt;_width/2,
-            VPLANE(this),_width&gt;&gt;1,
-            box_w&gt;&gt;1,box_h&gt;&gt;1);
-
-
-    return 1;
-
-}
-/*
-    \fn    copyToAlpha
-    \brief Copy &quot;this&quot; image into dest image at x,y position using alpha alpha
-    @param alpha alpha value (0--255)
-
-*/
-uint8_t ADMImage::copyToAlpha(ADMImage *dest, uint32_t x,uint32_t y,uint32_t alpha)
-{
-      
-    uint32_t box_w=_width, box_h=_height;
-    // Clip if needed
-    if(y&gt;dest-&gt;_height)
-    {
-        printf(&quot;Y out : %u %u\n&quot;,y,dest-&gt;_height);
-         return 1;
-    }
-    if(x&gt;dest-&gt;_width) 
-    {
-        printf(&quot;X out : %u %u\n&quot;,x,dest-&gt;_width);
-         return 1;
-    }
-    
-    if(x+box_w&gt;dest-&gt;_width) box_w=dest-&gt;_width-x;
-    if(y+box_h&gt;dest-&gt;_height) box_h=dest-&gt;_height-y;
-
-    // do y
-    BitBlitAlpha(YPLANE(dest)+x+dest-&gt;_width*y,dest-&gt;_width,         data,_width,            box_w,box_h,alpha);
-    // Do u
-    BitBlitAlpha(UPLANE(dest)+x/2+(dest-&gt;_width*y)/4,dest-&gt;_width/2,   UPLANE(this),_width&gt;&gt;1,  box_w&gt;&gt;1,box_h&gt;&gt;1,alpha);
-    // and V
-    BitBlitAlpha(VPLANE(dest)+x/2+(dest-&gt;_width*y)/4,dest-&gt;_width/2, VPLANE(this),_width&gt;&gt;1, box_w&gt;&gt;1,box_h&gt;&gt;1,alpha);
-
-
-    return 1;
-
-}
-/**
- * 		\fn BitBlitAlpha
- * 		\brief Alpha blit from dst to src
- */
-uint8_t BitBlitAlpha(uint8_t *dst, uint32_t pitchDst,uint8_t *src,uint32_t pitchSrc,
-		uint32_t width, uint32_t height,uint32_t alpha)
-{
-    
-    for(int y=0;y&lt;height;y++)
-    {
-    	for(int x=0;x&lt;width;x++)
-    	{
-    		uint32_t s=src[x],d=dst[x];
-    		
-    		d=s*alpha+(255-alpha)*d;
-    		d&gt;&gt;=8;
-    		dst[x]=d;
-    	}
-        src+=pitchSrc;
-        dst+=pitchDst;   
-    }
-    return 1;
-}
-
-uint8_t BitBlit(uint8_t *dst, uint32_t pitchDst,uint8_t *src,uint32_t pitchSrc,uint32_t width, uint32_t height)
-{
-    
-    for(int y=0;y&lt;height;y++)
-    {
-        memcpy(dst,src,width);
-        src+=pitchSrc;
-        dst+=pitchDst;   
-    }
-    return 1;
-}
-//EOF

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_image.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_image.h	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_image.h	2008-04-24 17:36:16 UTC (rev 3980)
@@ -1,189 +0,0 @@
-//
-// C++ Interface: %{MODULE}
-//
-// Description: 
-//
-//
-// Author: %{AUTHOR} &lt;%{EMAIL}&gt;, (C) %{YEAR}
-//
-// Copyright: See COPYING file that comes with this distribution
-//
-//
-//	This is the base time for image exchanged between codec/filters/...
-//
-//	We (optionnally) can carry extra informations
-//		- aspect ratio
-//		- frame type
-//		- quantizer for each macroblock (16x16 pixels)
-//	For the latter 3 infos are used
-//		quant which leads to the int8 quant array
-//		qstride = stride of array. Usually width+15)/16. 0 MEANS NOT USABLE
-//		qsize = size of the array (needed to be able to copy it)
-//
-#ifndef ADM_IMAGE
-#define ADM_IMAGE
-#include &quot;ADM_assert.h&quot;
-#include &quot;ADM_colorspace/ADM_rgb.h&quot;
-
-typedef enum 
-{
-	ADM_ASPECT_4_3=1,
-	ADM_ASPECT_16_9,
-	ADM_ASPECT_1_1
-} ADM_ASPECT;
-// Avisynth compatibility layer
-
-//#define vi.num_frames _info.nb_frames
-//#define vi.IsYV12()   1
-#define GetReadPtr GetWritePtr
-#define GetRowSize GetPitch
-
-typedef enum 
-{
-        PLANAR_Y=1,
-        PLANAR_U=2,
-        PLANAR_V=3
-        
-} ADM_PLANE;
-typedef enum 
-{
-		ADM_IMAGE_UNKNOWN=0,
-        ADM_IMAGE_JPG=1,
-        ADM_IMAGE_PNG=2,
-        ADM_IMAGE_BMP=3,
-        ADM_IMAGE_BMP2=4
-        
-} ADM_IMAGE_TYPE;
-class ADMImage
-{
-public:
-        uint32_t        demuxerFrameno;
-  
-        //*****************
-        uint8_t		*data;		/// Pointer to actual image data
-        uint32_t	_width;		/// Width of image
-        uint32_t	_height;	/// Height of image
-        uint32_t	_qStride;	/// Stride of Q infos, usually about width/8 &lt;- ***if 0 means no quant usable***
-        uint8_t		*quant;		/// Byte representing quantize used for this block
-        uint32_t	_Qp;		/// Average quantizer for this image, Default=2
-        uint32_t	_qSize;		/// Size of the *quant field
-        ADM_ASPECT	_aspect;	/// Aspect ratio
-        uint32_t	flags;		/// Flags for this image (AVI_KEY_FRAME/AVI_B_FRAME)
-
-// This 3 fields are only used to convery container (reference to other datas)
-// Between codec &amp; editor
-	uint8_t         _isRef;         /// If True means the datas are just a link to data we don't own!
-        ADM_colorspace  _colorspace;    /// Colorspace we are moving, default is YV12
-        uint8_t         _noPicture;     /// No picture to display
-
-// End of section dedicated to codec/editor transfer
-
-        void            commonInit(uint32_t w,uint32_t h); /// sub constructor
-        
-        uint32_t        GetPitch(ADM_PLANE plane)
-                                {
-                                        switch(plane)
-                                        {
-                                                case PLANAR_Y:return _width;break;
-                                                case PLANAR_U:
-                                                case PLANAR_V:return _width&gt;&gt;1;break;
-                                                default: ADM_assert(0);
-                                        }
-                                };
-        uint8_t         *GetWritePtr(ADM_PLANE plane)
-                        {       
-                                uint32_t plan=_width*_height;
-                                switch(plane)
-                                        {
-                                                case PLANAR_Y:return data;break;
-                                                case PLANAR_U:return data+plan;break;
-                                                case PLANAR_V:return data+((plan*5)&gt;&gt;2);break;
-                                                default: ADM_assert(0);
-                                        }
-                        };
-   
-        uint32_t GetHeight(ADM_PLANE plane)
-                                {
-                                        switch(plane)
-                                        {
-                                                case PLANAR_Y:return _height;break;
-                                                case PLANAR_U:
-                                                case PLANAR_V:return _height&gt;&gt;1;break;
-                                                default: ADM_assert(0);
-                                        }
-                                };
-        uint8_t duplicateMacro(ADMImage *src,uint32_t swap);       /// copy an image to ourself, including info
-public:
-
-        uint8_t         *_planes[3];     /// In case of linked data store y/u/v pointers
-        uint32_t        _planeStride[3]; /// Same story
-
-		ADMImage(uint32_t width, uint32_t height);
-                ADMImage(uint32_t width, uint32_t height,uint32_t dummy); /// To create linked datas image        
-
-                uint8_t   LumaReduceBy2(void);
-		~ADMImage();
-        uint8_t getWidthHeight(uint32_t *w,uint32_t *h)
-                    {
-                          *w=_width;
-                          *h=_height;
-                          return 1;
-                    }
-	uint8_t duplicate(ADMImage *src);	/// copy an image to ourself, including info
-        uint8_t duplicateSwapUV(ADMImage *src); /// copy an image to ourself, including info
-	uint8_t duplicateFull(ADMImage *src);	/// copy an image to ourself, including info
-	uint8_t copyInfo(ADMImage *src);	/// copy all the flags, not the data themselves
-	uint8_t copyQuantInfo(ADMImage *src);	/// copy quant table if any
-        uint8_t isRef(void) { return _isRef;};
-        uint8_t setLinkInfos(uint8_t *y,        /// To fill in infos for linked image
-                        uint8_t *u,uint8_t *v,uint32_t stridey,
-                        uint32_t strideu, uint32_t stridev);
-        uint8_t merge(ADMImage *src1,ADMImage *src2);
-        uint8_t substract(ADMImage *src1,ADMImage *src2);
-        uint8_t blacken(void);
-        uint8_t copyTo(ADMImage *target, uint32_t x, uint32_t y);
-        uint8_t copyToAlpha(ADMImage *target, uint32_t x, uint32_t y,uint32_t alpha);
-        uint8_t pack(uint8_t invertChroma);     /// Transfer data from planes to regular packed space
-        uint8_t copyLeftSideTo(ADMImage *dest);
-        /* Some utilitarian functions */
-        uint8_t  saveAsBmp(const char *filename);
-        uint8_t  saveAsJpg(const char *filename);
-        
-static uint32_t lumaDiff(ADMImage *src1,ADMImage *src2,uint32_t noise);
-};
-void drawString(ADMImage *dst, int x, int y, const char *s) ;
-#define YPLANE(x) ((x)-&gt;data)
-#define UPLANE(x) ((x)-&gt;data+((x)-&gt;_width*(x)-&gt;_height))
-#define VPLANE(x) ((x)-&gt;data+(5*((x)-&gt;_width*(x)-&gt;_height)&gt;&gt;2))
-
-//
-//  Simple image resizer
-//
-class ADMImageResizer
-{
-	private:
-		void    *_context;
-		uint32_t orgFormat, destFormat;
-		uint32_t orgWidth, orgHeight;
-		uint32_t destWidth, destHeight;
-
-		void init(uint32_t ow, uint32_t oh, uint32_t dw, uint32_t dh, int srcFormat, int dstFormat);
-		void getYuvPlanes(uint8_t *source, uint32_t width, uint32_t height, uint8_t*&amp; yPlane, uint8_t*&amp; uPlane, uint8_t*&amp; vPlane);
-	public:
-		ADMImageResizer(uint32_t ow,uint32_t oh, uint32_t dw, uint32_t dh);
-		ADMImageResizer(uint32_t ow, uint32_t oh, uint32_t dw, uint32_t dh, int srcFormat, int dstFormat);
-		~ADMImageResizer();
-		
-		uint8_t resize(ADMImage *src, ADMImage *dest);
-		uint8_t resize(uint8_t *src, ADMImage *dest);
-		uint8_t resize(ADMImage *src, uint8_t *dest);
-		uint8_t resize(uint8_t *src, uint8_t *dest);
-};
-
-// Misc utilities
-uint8_t BitBlit(uint8_t *dst, uint32_t pitchDest,uint8_t *src,uint32_t pitchSrc,uint32_t width, uint32_t height);
-uint8_t BitBlitAlpha(uint8_t *dst, uint32_t pitchDst,uint8_t *src,uint32_t pitchSrc,uint32_t width, uint32_t height,uint32_t alpha);
-
-ADMImage *createImageFromFile(const char *filename);
-ADM_IMAGE_TYPE ADM_identidyImageFile(const char *filename,uint32_t *w,uint32_t *h);
-#endif

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_imageResizer.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_imageResizer.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_imageResizer.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -1,154 +0,0 @@
-/***************************************************************************
-    copyright            : (C) 2003-2005 by mean
-    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#include &quot;ADM_default.h&quot;
-
-#include &quot;ADM_image.h&quot;
-
-extern &quot;C&quot; {
-#include &quot;ADM_libraries/ADM_ffmpeg/ADM_lavcodec/avcodec.h&quot;
-#include &quot;ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale.h&quot;
-}
-
-
-ADMImageResizer::ADMImageResizer(uint32_t ow, uint32_t oh, uint32_t dw, uint32_t dh)
-{
-	init(ow, oh, dw, dh, PIX_FMT_YUV420P, PIX_FMT_YUV420P);
-}
-
-ADMImageResizer::ADMImageResizer(uint32_t ow, uint32_t oh, uint32_t dw, uint32_t dh, int srcFormat, int destFormat)
-{
-	init(ow, oh, dw, dh, srcFormat, destFormat);
-}
-
-ADMImageResizer::~ADMImageResizer()
-{
-   if (_context)
-   {
-		sws_freeContext((SwsContext*)_context);
-		_context = NULL;
-   }
-}
-
-void ADMImageResizer::init(uint32_t ow, uint32_t oh, uint32_t dw, uint32_t dh, int srcFormat, int dstFormat)
-{
-    orgWidth = ow;
-    orgHeight = oh;
-    destWidth = dw;
-    destHeight = dh;
-
-	orgFormat = srcFormat;
-	destFormat = dstFormat;
-
-	int flags = SWS_SPLINE;
-
-#ifdef ADM_CPU_X86
-	#define ADD(x, y) if (CpuCaps::has##x()) flags |= SWS_CPU_CAPS_##y;
-
-	ADD(MMX,MMX);
-	ADD(3DNOW,3DNOW);
-	ADD(MMXEXT,MMX2);
-#endif
-
-#ifdef ADM_CPU_ALTIVEC
-    flags |= SWS_CPU_CAPS_ALTIVEC;
-#endif
-
-	_context = (void *)sws_getContext(orgWidth, orgHeight,
-									  srcFormat,
-									  destWidth, destHeight,
-									  destFormat,
-									  flags, NULL, NULL,NULL);
-}
-
-uint8_t ADMImageResizer::resize(ADMImage *source, ADMImage *dest)
-{
-    ADM_assert(source-&gt;_width == orgWidth);
-    ADM_assert(source-&gt;_height == orgHeight);
-    ADM_assert(dest-&gt;_width == destWidth);
-    ADM_assert(dest-&gt;_height == destHeight);
-
-	return resize(source-&gt;data, dest-&gt;data);
-}
-
-uint8_t ADMImageResizer::resize(ADMImage *source, uint8_t *dest)
-{
-    ADM_assert(source-&gt;_width == orgWidth);
-    ADM_assert(source-&gt;_height == orgHeight);
-
-	return resize(source-&gt;data, dest);
-}
-
-uint8_t ADMImageResizer::resize(uint8_t *source, ADMImage *dest)
-{
-    ADM_assert(dest-&gt;_width == destWidth);
-    ADM_assert(dest-&gt;_height == destHeight);
-
-	return resize(source, dest-&gt;data);
-}
-
-uint8_t ADMImageResizer::resize(uint8_t *source, uint8_t *dest)
-{
-	uint8_t *src[3];
-	uint8_t *dst[3];
-	int ssrc[3];
-	int ddst[3];
-
-	if (orgFormat == PIX_FMT_YUV420P)
-	{
-		getYuvPlanes(source, orgWidth, orgHeight, *&amp;src[0], *&amp;src[1], *&amp;src[2]);
-
-		ssrc[0] = orgWidth;
-		ssrc[1] = ssrc[2] = orgWidth &gt;&gt; 1;
-	}
-	else	// RGB
-	{
-		src[0] = source;
-		src[1] = NULL;
-		src[2] = NULL;
-
-		ssrc[0]=orgWidth * 4;
-		ssrc[1] = 0;
-		ssrc[2] = 0;
-	}
-
-	if (destFormat == PIX_FMT_YUV420P)
-	{
-		getYuvPlanes(dest, destWidth, destHeight, *&amp;dst[0], *&amp;dst[1], *&amp;dst[2]);
-
-		ddst[0] = destWidth;
-		ddst[1] = ddst[2] = destWidth &gt;&gt; 1;
-	}
-	else	// RGB
-	{
-		dst[0] = dest;
-		dst[1] = NULL;
-		dst[2] = NULL;
-
-		ddst[0] = destWidth * 4;
-		ddst[1] = 0;
-		ddst[2] = 0;
-	}
-
-    sws_scale((SwsContext*)_context, src, ssrc, 0, orgHeight, dst, ddst);
-
-    return 1;
-}
-
-void ADMImageResizer::getYuvPlanes(uint8_t *source, uint32_t width, uint32_t height, uint8_t*&amp; yPlane, uint8_t*&amp; uPlane, uint8_t*&amp; vPlane)
-{
-	// Unfortunately xPLANE macros expect an ADMImage object so doubling up on logic.
-	yPlane = source;
-	uPlane = source + (width * height);
-	vPlane = source + (5 * (width * height) &gt;&gt; 2);
-}

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_imageUtils.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_imageUtils.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_imageUtils.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -1,559 +0,0 @@
-/***************************************************************************
-    copyright            : (C) 2003-2005 by mean
-    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-#include &quot;config.h&quot;
-
-#include &lt;stdlib.h&gt;
-#include &lt;stdio.h&gt;
-#include &lt;string.h&gt;
-
-#include &quot;ADM_image.h&quot;
-#include &quot;ADM_toolkit/bitmap.h&quot;
-#include &quot;avifmt.h&quot;
-#include &quot;avifmt2.h&quot;
-#include &quot;ADM_bitstream.h&quot;
-
-#include &quot;DIA_coreToolkit.h&quot;
-#include &quot;ADM_colorspace/colorspace.h&quot;
-#include &quot;ADM_encoder/ADM_vidEncode.hxx&quot;
-
-#include &quot;ADM_codecs/ADM_codec.h&quot;
-#include &quot;ADM_lavcodec.h&quot;
-#include &quot;ADM_codecs/ADM_ffmpeg.h&quot;
-
-static uint8_t tinyAverage(uint8_t *dst, uint8_t *src1, uint8_t *src2,uint32_t l)
-{
-
-uint8_t *s1,*s2,*d1;
-int a1,a2;
-        s1=src1;
-        s2=src2;
-        
-        d1=dst;
-          for(int y=0;y&lt;l;y++)
-                {
-                        a1=*s1;
-                        a2=*s2;
-                        a1=a1+a2;
-                        a1&gt;&gt;=1;
-                        if(a1&lt;0) a1=0;
-                        if(a1&gt;255) a1=255;
-                        *d1=a1;                         
-
-                        s1++;
-                        s2++;
-                        d1++;
-                }
-        
-        return 1;
-}
-#ifdef ADM_CPU_X86
-static uint8_t tinyAverageMMX(uint8_t *dst, uint8_t *src1, uint8_t *src2,uint32_t l)
-{
-int delta;
-uint32_t ww,rr;
-uint8_t *s1,*s2,*d1;
-int a1,a2;
-        s1=src1;
-        s2=src2;
-        
-        d1=dst;
-        ww=l&gt;&gt;2;
-        rr=l&amp;3;
-
-
-#ifdef GCC_2_95_X
-         __asm__(
-                         &quot;pxor %mm7,%mm7&quot;
-                ::
-                 );
-#else
-         __asm__(
-                         &quot;pxor %%mm7,%%mm7&quot;
-                ::
-                 );
-#endif
-
-          for(int y=0;y&lt;ww;y++)
-          {
-                __asm__(
-                        &quot;movd           (%0),%%mm0 \n&quot;
-                        &quot;movd           (%1),%%mm1 \n&quot;
-                        &quot;punpcklbw      %%mm7,%%mm0 \n&quot;
-                        &quot;punpcklbw      %%mm7,%%mm1 \n&quot;
-                        &quot;paddw           %%mm1,%%mm0 \n&quot;
-                        &quot;psrlw          $1,%%mm0 \n&quot;
-                        &quot;packuswb       %%mm0,  %%mm0\n&quot;
-                        &quot;movd           %%mm0,(%2) \n&quot;
-
-                : : &quot;r&quot; (s1),&quot;r&quot; (s2),&quot;r&quot;(d1)
-                );
-                        s1+=4;
-                        s2+=4;
-                        d1+=4;
-                }
-        __asm__(
-                        &quot;emms\n&quot;
-                ::
-                );
-        if(rr) tinyAverage(d1, s1, s2,rr);
-        return 1;
-}
-
-
-#endif
-
-uint8_t ADMImage::merge(ADMImage *src1,ADMImage *src2)
-{
-#ifdef ADM_CPU_X86
-        if(CpuCaps::hasMMX())
-        {
-                tinyAverageMMX(YPLANE(this),YPLANE(src1),YPLANE(src2),(_width*_height*3)&gt;&gt;1);
-                return 1;
-        }
-#endif
-        tinyAverage(YPLANE(this),YPLANE(src1),YPLANE(src2),(_width*_height*3)&gt;&gt;1);
-        return 1;
-
-
-}
-/* 3000 * 3000 max size, using uint32_t is safe... */
-static uint32_t computeDiff(uint8_t  *s1,uint8_t *s2,uint32_t noise,uint32_t l)
-{
-uint32_t df=0;
-uint32_t delta;
-uint32_t ww,hh;
-
-
-        for(int x=0;x&lt;l;x++)
-        {
-                delta=abs(*s1-*s2);
-                if(delta&gt;noise)
-                        df+=delta;
-                s1++;
-                s2++;
-
-        }
-        return df;
-}
-#ifdef ADM_CPU_X86
-static uint64_t noise64;
-static uint32_t computeDiffMMX(uint8_t  *s1,uint8_t *s2,uint32_t noise,uint32_t l)
-{
-uint32_t df=0;
-uint32_t delta;
-uint32_t ll,rr;
-uint64_t noise2=(uint64_t )noise;
-
-uint32_t result=0;
-        noise64=noise2+(noise2&lt;&lt;16)+(noise2&lt;&lt;32)+(noise2&lt;&lt;48);
-        ll=l&gt;&gt;2;
-        rr=l&amp;3;
-
-#ifdef GCC_2_95_X
-         __asm__(
-                         &quot;pxor %mm7,%mm7\n&quot;
-                         &quot;pxor %mm3,%mm3\n&quot;
-                         &quot;movq &quot;Mangle(noise64)&quot;, %mm6\n&quot;
-                :: 
-                 );
-#else
-         __asm__(
-                         &quot;pxor %%mm7,%%mm7\n&quot;
-                         &quot;pxor %%mm3,%%mm3\n&quot;
-                         &quot;movq &quot;Mangle(noise64)&quot;, %%mm6\n&quot;
-                :: 
-                 );
-#endif
-
-          for(int y=0;y&lt;ll;y++)
-          {
-                __asm__(
-                        &quot;movd           (%0),  %%mm0 \n&quot;
-                        &quot;movd           (%1),  %%mm1 \n&quot;
-                        &quot;punpcklbw      %%mm7, %%mm0 \n&quot;
-                        &quot;punpcklbw      %%mm7, %%mm1 \n&quot;
-                        
-                        &quot;movq           %%mm0, %%mm2 \n&quot;
-                        &quot;psubusw        %%mm1, %%mm2 \n&quot;
-                        &quot;psubusw        %%mm0, %%mm1 \n&quot;
-                        &quot;por            %%mm1, %%mm2 \n&quot; // SAD  
-                                           
-                        &quot;movq           %%mm2, %%mm0 \n&quot;
-                        &quot;pcmpgtw        %%mm6, %%mm2 \n&quot; // Threshold against noise
-                        &quot;pand           %%mm2, %%mm0 \n&quot; // MM0 is the 4 diff, time to pack
-
-                        &quot;movq           %%mm0, %%mm1 \n&quot; // MM0 is a b c d and we want
-                        &quot;psrlq          $16,  %%mm1 \n&quot;  // mm3+=a+b+c+d
-
-                        &quot;movq           %%mm0, %%mm2 \n&quot;
-                        &quot;psrlq          $32,  %%mm2 \n&quot;
-
-                        &quot;movq           %%mm0, %%mm4 \n&quot;
-                        &quot;psrlq          $48,  %%mm4 \n&quot;
-
-                        &quot;paddw          %%mm1, %%mm0 \n&quot;
-                        &quot;paddw          %%mm2, %%mm4 \n&quot;
-                        &quot;paddw          %%mm4, %%mm0 \n&quot;
-
-                        &quot;psllq          $48,  %%mm0 \n&quot;
-                        &quot;psrlq          $48,  %%mm0 \n&quot;
-
-                        &quot;paddw          %%mm0, %%mm3 \n&quot; /* PADDQ is SSE2 */
-
-                : : &quot;r&quot; (s1),&quot;r&quot; (s2)
-                );
-                        s1+=4;
-                        s2+=4;
-                        
-         }
-        // Pack result
-#if 1        
-                __asm__(
-                       
-                        &quot;movd           %%mm3,(%0)\n&quot;
-                        &quot;emms\n&quot;
-                :: &quot;r&quot;(&amp;result)
-                );
-#endif                
-        if(rr) result+=computeDiff(s1, s2, noise,rr);
-        return result;
-}
-
-
-#endif
-
-uint32_t ADMImage::lumaDiff(ADMImage *src1,ADMImage *src2,uint32_t noise)
-{
-
-#ifdef ADM_CPU_X86
-uint32_t r1,r2;
-        if(CpuCaps::hasMMX())
-        {
-                return computeDiffMMX(YPLANE(src1),YPLANE(src2),noise,src1-&gt;_width*src1-&gt;_height);                
-        }
-#endif
-        return computeDiff(YPLANE(src1),YPLANE(src2),noise,src1-&gt;_width*src1-&gt;_height);
-}
-
-//******************************************************************************
-// so srcR=2*src-srcP
-static uint8_t tinySubstract(uint8_t *dst, uint8_t *src1, uint8_t *src2,uint32_t l)
-{
-int delta;
-uint32_t ww,hh;
-uint8_t *s1,*s2,*d1;
-int a1,a2;
-        s1=src1;
-        s2=src2;
-        
-        d1=dst;
-       
-
-          for(int y=0;y&lt;l;y++)
-               
-                {
-                        a1=*s1;
-                        a2=*s2;
-                        a1=2*a1-a2;
-                        if(a1&lt;0) a1=0;
-                        if(a1&gt;255) a1=255;
-                        *d1=a1;                         
-
-                        s1++;
-                        s2++;
-                        d1++;
-                }
-        return 1;
-}
-#ifdef ADM_CPU_X86
-static uint8_t tinySubstractMMX(uint8_t *dst, uint8_t *src1, uint8_t *src2,uint32_t l)
-{
-int delta;
-uint32_t ww,hh;
-uint8_t *s1,*s2,*d1;
-int ll,rr;
-        ll=l&gt;&gt;2;
-        rr=l&amp;3;
-        s1=src1;
-        s2=src2;
-        
-        d1=dst;
-      
-#ifdef GCC_2_95_X
-        __asm__(
-                         &quot;pxor %mm7,%mm7&quot;
-                ::
-                 );
-#else
-        __asm__(
-                         &quot;pxor %%mm7,%%mm7&quot;
-                ::
-                 );
-#endif
-        for(int x=0;x&lt;ll;x++)
-                {
-                        __asm__(
-                        &quot;movd           (%0),%%mm0 \n&quot;
-                        &quot;movd           (%1),%%mm1 \n&quot;
-                       
-                        &quot;punpcklbw      %%mm7,%%mm0 \n&quot;
-                        &quot;punpcklbw      %%mm7,%%mm1 \n&quot;
-                      
-                        
-                        &quot;paddw          %%mm0,%%mm0 \n&quot;
-                       
-                        
-                        &quot;psubusw        %%mm1,%%mm0 \n&quot; // mm1=sum                       
-                        &quot;packuswb       %%mm0,  %%mm0\n&quot;
-                        &quot;movd           %%mm0,(%2) \n&quot;                       
-                        :: &quot;r&quot;(s1),&quot;r&quot;(s2),&quot;r&quot;(d1)
-                        );
-                        s1+=4;
-                        s2+=4;
-                        d1+=4;
-                }
-                 __asm__(                       
-                        &quot;emms\n&quot;
-                :: 
-                );
-        if(rr) tinySubstractMMX(d1, s1, s2,rr);
-        return 1;
-}
-#endif
-
-uint8_t ADMImage::substract(ADMImage *src1,ADMImage *src2)
-{
-
-#ifdef ADM_CPU_X86
-uint32_t r1,r2;
-        if(CpuCaps::hasMMX())
-        {
-                 return tinySubstractMMX(YPLANE(this),YPLANE(src1),YPLANE(src2),src1-&gt;_width*src1-&gt;_height);                
-        }
-#endif
-        return tinySubstract(YPLANE(this),YPLANE(src1),YPLANE(src2),src1-&gt;_width*src1-&gt;_height);
-}
- ADM_BITMAPFILEHEADER bmfh;
- ADM_BITMAPINFOHEADER bmph;
-  FILE *fd;
-  uint32_t sz;
-  uint16_t s16;
-  uint32_t s32;
-  
-
-/**
-    \fn saveAsBmp
-    \brief save current image into filename, into bmp format
-*/
-uint8_t  ADMImage::saveAsBmp(const char *filename)
-{
-  ADM_BITMAPFILEHEADER bmfh;
-  ADM_BITMAPINFOHEADER bmph;
-  FILE *fd;
-  uint32_t sz;
-  uint16_t s16;
-  uint32_t s32;
-  
-  sz = _width* _height * 3;
-
-  bmfh.bfReserved1 = bmfh.bfReserved2 = 0;
-  bmfh.bfOffBits = sizeof (bmfh) + sizeof (bmph);
-//_________________________________________
-  bmph.biSize = sizeof (bmph);
-  bmph.biWidth = _width;
-  bmph.biHeight = _height;
-  bmph.biPlanes = 1;
-  bmph.biBitCount = 24;
-  bmph.biCompression = 0;	// COMPRESSION NONE
-  bmph.biSizeImage = sz;
-  bmph.biXPelsPerMeter = 0;
-  bmph.biYPelsPerMeter = 0;
-  bmph.biClrUsed = 0;
-  bmph.biClrImportant = 0;
-/*
-	bmph.resolutionUnits=0;
-	bmph.origin=0;
-	bmph.colorEncoding=0;
-*/
-
-  ADMImage image(_width,_height);
-  
-
-  printf (&quot;\n %u x %u=%u\n&quot;, bmph.biWidth, bmph.biHeight, sz);
-
-  uint8_t *out;
-
-        out=(uint8_t *)ADM_alloc(sz);
-        if(!out)
-        {
-            GUI_Error_HIG(QT_TR_NOOP(&quot;Memory error&quot;), NULL);
-//            ADM_dealloc(out);
-            return 0;
-        }
-
-        if(!COL_yv12rgbBMP(bmph.biWidth, bmph.biHeight,data, out))
-        {
-              GUI_Error_HIG(QT_TR_NOOP(&quot;Error converting to BMP&quot;), NULL);
-              ADM_dealloc(out);
-              return 0;
-        }
-        fd = fopen (filename, &quot;wb&quot;);
-        if (!fd)
-        {
-                GUI_Error_HIG (QT_TR_NOOP(&quot;Something bad happened&quot;), NULL);
-                ADM_dealloc(out);
-                return 0;
-        }
-
-	// Bitmpap file header, not using tructure due to gcc padding it
-#ifdef ADM_BIG_ENDIAN
-	s16 = 0x424D;
-#else	
-  	s16 = 0x4D42;
-#endif	
-  	s32 = 14 + sizeof (bmph) + sz;
-#ifdef ADM_BIG_ENDIAN	
-	#define SWAP32(x) x=R32(x)	
-#else
-	#define SWAP32(x) ; 
-#endif
-        SWAP32(s32);	
-        fwrite (&amp;s16, 2, 1, fd);
-        fwrite (&amp;s32, 4, 1, fd);
-        s32 = 0;
-        fwrite (&amp;s32, 4, 1, fd);
-        s32 = 14 + sizeof (bmph);
-        SWAP32(s32);
-        fwrite (&amp;s32, 4, 1, fd);
-#ifdef ADM_BIG_ENDIAN
-	Endian_BitMapInfo(&amp;bmph);
-#endif
-        fwrite (&amp;bmph, sizeof (bmph), 1, fd);
-        fwrite (out, sz, 1, fd);
-  
-        fclose(fd);
-        ADM_dealloc(out);
-        return 1;
-}
-/**
-    \fn saveAsJpg
-    \brief save current image into filename, into jpg format
-*/
-uint8_t  ADMImage::saveAsJpg(const char *filename)
-{
- ffmpegEncoderFFMjpeg *codec=NULL;
-  FILE *fd;
-  uint8_t *buffer=NULL;
-  uint32_t sz;
-  
-
-        sz = _width*_height*3;
-        ADMBitstream bitstream(sz);
-        buffer=new uint8_t[sz];
-        bitstream.data=buffer;
-        codec=new  ffmpegEncoderFFMjpeg(_width,_height,FF_MJPEG)  ;
-        codec-&gt;init( 95,25000);
-        if(!codec-&gt;encode(this,&amp;bitstream))
-        {
-                GUI_Error_HIG(QT_TR_NOOP(&quot;Cannot encode the frame&quot;), NULL);
-                delete [] buffer;
-                delete codec;
-                return 0;
-        }
-        delete codec;
-        fd=fopen(filename,&quot;wb&quot;);
-        if(!fd)
-        {
-                GUI_Error_HIG(QT_TR_NOOP(&quot;File error&quot;),QT_TR_NOOP( &quot;Cannot open \&quot;%s\&quot; for writing.&quot;), filename);
-                delete [] buffer;
-                return 0;
-        }
-        fwrite (buffer, bitstream.len, 1, fd);
-        fclose(fd);
-        delete [] buffer;
-        return 1;
-}
-/**
-      \fn LumaReduceBy2
-      \brief Very simple reduce by 2 both hz &amp; vz for luma plane only.
-*/
- uint8_t   ADMImage::LumaReduceBy2(void)
-{
-  uint8_t *ptr1,*ptr2,*outptr;
-  for(int y=0;y&lt;_height&gt;&gt;1;y++)
-  {
-    
-    ptr1=data+y*_width*2;
-    ptr2=ptr1+_width;
-    outptr=data+(_width&gt;&gt;1)*y;
-    for(int x=0;x&lt;_width&gt;&gt;1;x++)
-    {
-      uint32_t a,b,c,d;  
-          a=ptr1[0]+ptr1[1];
-          b=ptr2[0]+ptr2[1];
-          ptr1+=2;
-          ptr2+=2;
-          a=(a+b)&gt;&gt;2;
-          *outptr++=a;
-    }
-  }
-  return 1;
-  
-}
- /**
-  *		\fn  copyLeftSideTo
-  * 	\brief Copy half the image (left part) to dest
-  * 	@param dest : Image to copy to 
-  */
- uint8_t ADMImage::copyLeftSideTo(ADMImage *dest)
- {
-		uint8_t *src,*dst;
-		uint32_t stride;
- 
-			ADM_assert(_width==dest-&gt;_width);
-			ADM_assert(_height==dest-&gt;_height);
-		
-	 		dst=YPLANE(dest);
-		    src=YPLANE(this);
-		    stride=_width;
-		    for(uint32_t y=0;y&lt;_height;y++)   // We do both u &amp; v!
-		    {
-		        memcpy(dst,src,stride&gt;&gt;1);
-		        dst+=stride;
-		        src+=stride;
-		    }
-		        // U
-		    dst=UPLANE(dest);
-		    src=UPLANE(this);
-		    stride=_width&gt;&gt;1;
-		    uint32_t h2=_height&gt;&gt;1;
-		    for(uint32_t y=0;y&lt;h2;y++)   // We do both u &amp; v!
-		    {
-		        memcpy(dst,src,stride&gt;&gt;1);
-		        dst+=stride;
-		        src+=stride;
-		    }
-		        // V
-		    dst=VPLANE(dest);
-		    src=VPLANE(this);
-		    for(uint32_t y=0;y&lt;h2;y++)   // We do both u &amp; v!
-		    {
-		        memcpy(dst,src,stride&gt;&gt;1);
-		        dst+=stride;
-		        src+=stride;
-		    }
-		    return 1;
- }
-//EOF

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/CMakeLists.txt	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/CMakeLists.txt	2008-04-24 17:36:16 UTC (rev 3980)
@@ -1,8 +1,8 @@
 SET(ADM_LIB ADM_utilities)
 
 SET(${ADM_LIB}_SRCS 
-	ADM_bitstream.cpp  ADM_fileio.cpp  ADM_gettext.cpp  ADM_image.cpp  ADM_imageLoader.cpp  ADM_imageResizer.cpp
-	ADM_imageUtils.cpp  ADM_pp.cpp  ADM_print.cpp  avidemutils.cpp  aviindexer.cpp  fourcc.cpp  prefs.cpp)
+	ADM_bitstream.cpp  ADM_fileio.cpp  ADM_gettext.cpp   ADM_imageLoader.cpp  
+	ADM_pp.cpp  ADM_print.cpp  avidemutils.cpp  aviindexer.cpp  fourcc.cpp  prefs.cpp)
 
 ADD_ADM_LIB_ALL_TARGETS(${ADM_LIB} ${${ADM_LIB}_SRCS})
-ADD_SOURCE_CFLAGS(prefs.cpp -I${LIBXML2_INCLUDE_DIR} ${LIBXML2_DEFINITIONS})
\ No newline at end of file
+ADD_SOURCE_CFLAGS(prefs.cpp -I${LIBXML2_INCLUDE_DIR} ${LIBXML2_DEFINITIONS})

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_ocr/ADM_bitmapSource.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_ocr/ADM_bitmapSource.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_ocr/ADM_bitmapSource.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -11,15 +11,10 @@
  *                                                                         *
  ***************************************************************************/
  #include &quot;config.h&quot;
- #include &lt;stdio.h&gt;
- #include &lt;stdlib.h&gt;
- #include &lt;string.h&gt;
- #include &quot;ADM_assert.h&quot;
-#include &quot;ADM_default.h&quot;
+ #include &quot;ADM_default.h&quot;
 
  #include &quot;ADM_editor/ADM_edit.hxx&quot;
- #include &quot;ADM_video/ADM_genvideo.hxx&quot;
-
+ #include &quot;ADM_videoFilter.h&quot;
  #include &quot;ADM_ocr.h&quot;
  #include &quot;ADM_ocrInternal.h&quot;
   #include &quot;DIA_enter.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_ocr/ADM_ocr.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_ocr/ADM_ocr.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_ocr/ADM_ocr.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -14,8 +14,7 @@
 #include &quot;ADM_default.h&quot;
 
  #include &quot;ADM_editor/ADM_edit.hxx&quot;
- #include &quot;ADM_video/ADM_genvideo.hxx&quot;
-
+ #include &quot;ADM_videoFilter.h&quot;
  #include &quot;ADM_ocr.h&quot;
 #include &quot;ADM_ocrInternal.h&quot;
   #include &quot;DIA_enter.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_ocr/ADM_ocrEngine.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_ocr/ADM_ocrEngine.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_ocr/ADM_ocrEngine.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -11,15 +11,10 @@
  *                                                                         *
  ***************************************************************************/
  #include &quot;config.h&quot;
- #include &lt;stdio.h&gt;
- #include &lt;stdlib.h&gt;
- #include &lt;string.h&gt;
- #include &quot;ADM_assert.h&quot;
 #include &quot;ADM_default.h&quot;
 
  #include &quot;ADM_editor/ADM_edit.hxx&quot;
- #include &quot;ADM_video/ADM_genvideo.hxx&quot;
-
+ #include &quot;ADM_videoFilter.h&quot;
  #include &quot;ADM_ocr.h&quot;
  #include &quot;ADM_ocrInternal.h&quot;
  #include &quot;DIA_coreToolkit.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisave.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisave.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisave.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -19,12 +19,6 @@
 * MODIFIED BY GMV 30.1.05: prepared for ODML
 */
  
-#include &lt;stdio.h&gt;
-#include &lt;stdlib.h&gt;
-#include &lt;math.h&gt;
-#include &lt;unistd.h&gt;
-#include &lt;time.h&gt;
-#include &lt;sys/time.h&gt;
 
 #include &quot;config.h&quot;
 #include &quot;ADM_default.h&quot;
@@ -36,9 +30,9 @@
 
 //#include &quot;avilist.h&quot;
 
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 
-#include &quot;ADM_filter/video_filters.h&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_encoder/ADM_vidEncode.hxx&quot;
 
 #include &quot;ADM_audio/aviaudio.hxx&quot;
@@ -46,7 +40,7 @@
 #include &quot;op_aviwrite.hxx&quot;
 #include &quot;op_avisave.h&quot;
 #include &quot;GUI_mux.h&quot;
-
+#include &lt;math.h&gt;
 uint32_t muxSize=4090;
 extern PARAM_MUX muxMode;
 extern int muxParam;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -20,13 +20,6 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include &lt;stdio.h&gt;
-#include &lt;stdlib.h&gt;
-#include &lt;math.h&gt;
-#include &lt;unistd.h&gt;
-#include &lt;time.h&gt;
-#include &lt;sys/time.h&gt;
-
 #include &quot;config.h&quot;
 #include &quot;ADM_default.h&quot;
 #include &quot;ADM_threads.h&quot;
@@ -37,8 +30,9 @@
 
 //#include &quot;avilist.h&quot;
 
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
+#include &quot;ADM_videoFilter.h&quot;
+#include &quot;ADM_videoFilter_internal.h&quot;
+
 #include &quot;ADM_encoder/ADM_vidEncode.hxx&quot;
 
 #include &quot;ADM_audio/aviaudio.hxx&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_pack.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_pack.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_pack.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -16,12 +16,6 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include &lt;stdio.h&gt;
-#include &lt;stdlib.h&gt;
-#include &lt;math.h&gt;
-#include &lt;unistd.h&gt;
-#include &lt;time.h&gt;
-#include &lt;sys/time.h&gt;
 
 #include &quot;config.h&quot;
 #include &quot;ADM_default.h&quot;
@@ -34,8 +28,9 @@
 
 //#include &quot;avilist.h&quot;
 
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
+#include &quot;ADM_videoFilter.h&quot;
+#include &quot;ADM_videoFilter_internal.h&quot;
+
 #include &quot;ADM_encoder/ADM_vidEncode.hxx&quot;
 
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_unpack.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_unpack.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_unpack.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -30,8 +30,9 @@
 
 //#include &quot;avilist.h&quot;
 
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
+#include &quot;ADM_videoFilter.h&quot;
+#include &quot;ADM_videoFilter_internal.h&quot;
+
 #include &quot;ADM_encoder/ADM_vidEncode.hxx&quot;
 
 #include &quot;ADM_audio/aviaudio.hxx&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavedual.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavedual.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavedual.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -17,14 +17,8 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-
-#include &lt;stdio.h&gt;
-#include &lt;stdlib.h&gt;
 #include &lt;math.h&gt;
-#include &lt;unistd.h&gt;
-#include &lt;time.h&gt;
-#include &lt;sys/time.h&gt;
-
+#include &quot;config.h&quot;
 #include &quot;ADM_default.h&quot;
 #include &quot;ADM_threads.h&quot;
 
@@ -34,8 +28,8 @@
 
 //#include &quot;avilist.h&quot;
 
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
+#include &quot;ADM_videoFilter.h&quot;
+#include &quot;ADM_videoFilter_internal.h&quot;
 #include &quot;ADM_encoder/ADM_vidEncode.hxx&quot;
 
 #include &quot;ADM_audio/aviaudio.hxx&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -32,9 +32,9 @@
 #include &quot;ADM_audio/aviaudio.hxx&quot;
 #include &quot;ADM_audiofilter/audioprocess.hxx&quot;
 
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 //#include &quot;ADM_gui/GUI_encoder.h&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
+#include &quot;ADM_videoFilter_internal.h&quot;
 #include &quot;ADM_encoder/ADM_vidEncode.hxx&quot;
 
 #include &quot;op_aviwrite.hxx&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_savesmart.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_savesmart.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_savesmart.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -33,8 +33,9 @@
 #include &quot;ADM_audio/aviaudio.hxx&quot;
 #include &quot;ADM_audiofilter/audioprocess.hxx&quot;
 
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
+#include &quot;ADM_videoFilter.h&quot;
+#include &quot;ADM_videoFilter_internal.h&quot;
+
 #include &quot;ADM_encoder/ADM_vidEncode.hxx&quot;
 
 #include &quot;op_aviwrite.hxx&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -30,8 +30,8 @@
 #include &quot;ADM_editor/ADM_Video.h&quot;
 #include &quot;ADM_colorspace/colorspace.h&quot;
 #include &quot;DIA_coreToolkit.h&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
+#include &quot;ADM_videoFilter.h&quot;
+#include &quot;ADM_videoFilter_internal.h&quot;
 
 #include &quot;ADM_encoder/ADM_vidEncode.hxx&quot;
 #include &quot;ADM_codecs/ADM_codec.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -29,10 +29,9 @@
 #include &quot;ADM_editor/ADM_Video.h&quot;
 #include &quot;ADM_colorspace/colorspace.h&quot;
 #include &quot;DIA_coreToolkit.h&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
+#include &quot;ADM_videoFilter.h&quot;
+#include &quot;ADM_videoFilter_internal.h&quot;
 
-
 #include &quot;ADM_encoder/ADM_vidEncode.hxx&quot;
 #include &quot;ADM_codecs/ADM_codec.h&quot;
 #include &quot;ADM_encoder/adm_encoder.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -31,9 +31,10 @@
 
 #include &quot;ADM_colorspace/colorspace.h&quot;
 #include &quot;DIA_coreToolkit.h&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
+#include &quot;ADM_videoFilter.h&quot;
+#include &quot;ADM_videoFilter_internal.h&quot;
 
+
 #include &quot;ADM_encoder/ADM_vidEncode.hxx&quot;
 #include &quot;ADM_encoder/adm_encoder.h&quot;
 //#include &quot;ADM_codecs/ADM_divxEncode.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -36,7 +36,8 @@
 #include &quot;ADM_inputs/ADM_mpegdemuxer/dmx_mpegstartcode.h&quot;
 
 #include &quot;ADM_encoder/ADM_vidEncode.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
+#include &quot;ADM_videoFilter_internal.h&quot;
 #include &quot;ADM_encoder/adm_encoder.h&quot;
 #include &quot;ADM_encoder/adm_encCopy.h&quot;
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -36,8 +36,8 @@
 
 #include &quot;ADM_colorspace/colorspace.h&quot;
 #include &quot;DIA_coreToolkit.h&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
+#include &quot;ADM_videoFilter.h&quot;
+#include &quot;ADM_videoFilter_internal.h&quot;
 
 #include &quot;ADM_encoder/ADM_vidEncode.hxx&quot;
 #include &quot;ADM_encoder/adm_encoder.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_ogm/op_ogaudio.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_ogm/op_ogaudio.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_ogm/op_ogaudio.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -33,8 +33,8 @@
 
 //#include &quot;avilist.h&quot;
 
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
+#include &quot;ADM_videoFilter.h&quot;
+
 #include &quot;ADM_encoder/ADM_vidEncode.hxx&quot;
 
 #include &quot;ADM_audio/aviaudio.hxx&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_ogm/op_ogsave.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_ogm/op_ogsave.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_ogm/op_ogsave.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -26,9 +26,8 @@
 
 //#include &quot;avilist.h&quot;
 
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 
-#include &quot;ADM_filter/video_filters.h&quot;
 #include &quot;ADM_encoder/ADM_vidEncode.hxx&quot;
 
 #include &quot;ADM_audio/aviaudio.hxx&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_ogm/op_ogsavecopy.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_ogm/op_ogsavecopy.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_ogm/op_ogsavecopy.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -19,8 +19,8 @@
 
 //#include &quot;avilist.h&quot;
 
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
+#include &quot;ADM_videoFilter.h&quot;
+
 #include &quot;ADM_encoder/ADM_vidEncode.hxx&quot;
 #include &quot;ADM_audio/aviaudio.hxx&quot;
 #include &quot;ADM_audiofilter/audioprocess.hxx&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -34,8 +34,8 @@
 
 //#include &quot;avilist.h&quot;
 
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
+#include &quot;ADM_videoFilter.h&quot;
+#include &quot;ADM_videoFilter_internal.h&quot;
 #include &quot;ADM_encoder/ADM_vidEncode.hxx&quot;
 #include &quot;ADM_audio/aviaudio.hxx&quot;
 #include &quot;ADM_audiofilter/audioprocess.hxx&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_preview.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_preview.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_preview.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -37,9 +37,8 @@
 
 
 #include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
-
+#include &quot;ADM_videoFilter.h&quot;
+#include &quot;ADM_videoFilter_internal.h&quot;
 #include &quot;ADM_userInterfaces/ADM_commonUI/GUI_render.h&quot;
 
 #include &quot;ADM_osSupport/ADM_debugID.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSAvidemuxAudio.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSAvidemuxAudio.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSAvidemuxAudio.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -20,13 +20,13 @@
 #include &quot;avi_vars.h&quot;
 #include &quot;gui_action.hxx&quot;
 #include &quot;ADM_encoder/ADM_vidEncode.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_encoder/adm_encoder.h&quot;
 #include &quot;ADM_encoder/adm_encConfig.h&quot;
 #include &quot;ADM_editor/ADM_outputfmt.h&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
 
 
+
 #include &quot;ADM_script/ADM_container.h&quot;
 
 extern int A_audioSave(char *name);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSAvidemuxVideo.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSAvidemuxVideo.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSAvidemuxVideo.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -21,13 +21,14 @@
 #include &quot;avi_vars.h&quot;
 #include &quot;gui_action.hxx&quot;
 #include &quot;ADM_encoder/ADM_vidEncode.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
+#include &quot;ADM_videoFilter_internal.h&quot;
 #include &quot;ADM_encoder/adm_encoder.h&quot;
 #include &quot;ADM_encoder/adm_encConfig.h&quot;
 #include &quot;ADM_editor/ADM_outputfmt.h&quot;
 #include &quot;../ADM_userInterfaces/ADM_commonUI/GUI_ui.h&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
 
+
 #include &quot;ADM_script/ADM_container.h&quot;
 
 extern VF_FILTERS filterGetTagFromName(char *inname);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSFunctions.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSFunctions.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSFunctions.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -34,11 +34,11 @@
 #include &quot;avi_vars.h&quot;
 #include &quot;gui_action.hxx&quot;
 #include &quot;ADM_encoder/ADM_vidEncode.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_encoder/adm_encoder.h&quot;
 #include &quot;ADM_encoder/adm_encConfig.h&quot;
 #include &quot;ADM_editor/ADM_outputfmt.h&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
+
 #include &quot;ADM_script/ADM_container.h&quot;
 
 #include &quot;ADM_JSGlobal.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/adm_scanner.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/adm_scanner.h	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/adm_scanner.h	2008-04-24 17:36:16 UTC (rev 3980)
@@ -6,19 +6,8 @@
 #define ADMSCANNER
 
 #define ADM_MAX_VAR 50
+#include &quot;ADM_videoFilter_iface.h&quot;
 
-typedef enum 
-{
-	APM_NUM,
-	APM_HEXNUM,
-	APM_STRING,
-	APM_QUOTED,
-	APM_FLOAT,
-	APM_BOOL,
-	APM_LAST
-
-}APM_TYPE;
-
 typedef enum
 {
 	ASC_OK,
@@ -30,20 +19,8 @@
 
 int PushParam(APM_TYPE, char *value);
 int Call(char *string);
-typedef union
-{
-	int 	integer;
-	float	real;
-	char	*string;
 
-}ArgI;
 
-typedef struct 
-{
-	APM_TYPE type;
-	ArgI	 arg;
-
-}Arg;
 #define MAXPARAM 40
 #endif
 //END

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -26,13 +26,13 @@
 #ifdef HAVE_ENCODER
 
 #include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_videoFilter/ADM_vidSwissArmyKnife.h&quot;
 
 #include &quot;DIA_flyDialog.h&quot;
 #include &quot;DIA_flySwissArmyKnife.h&quot;
 #include &quot;DIA_factory.h&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
+#include &quot;ADM_videoFilter_internal.h&quot;
 
 #undef _
 #define _(_s) QT_TR_NOOP(_s)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_asharp.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_asharp.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_asharp.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -25,7 +25,7 @@
 #include &quot;ADM_colorspace/ADM_rgb.h&quot;
 
 #include &quot;ADM_image.h&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_videoFilter/ADM_vidASharp_param.h&quot;
 #include &quot;DIA_flyDialog.h&quot;
 #include &quot;DIA_flyAsharp.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -22,12 +22,13 @@
 #include &quot;DIA_fileSel.h&quot;
 
 #include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
+#include &quot;ADM_videoFilter_internal.h&quot;
 
 #include &quot;ADM_audiofilter/audioprocess.hxx&quot;
 #include &quot;ADM_audiofilter/audioeng_buildfilters.h&quot;
 
-#include &quot;ADM_filter/video_filters.h&quot;
+
 #include &quot;ADM_video/ADM_vidMisc.h&quot;
 #include &quot;avi_vars.h&quot;
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_chromaShift.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_chromaShift.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_chromaShift.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -18,7 +18,7 @@
 
 
 #include &quot;ADM_image.h&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_colorspace/ADM_rgb.h&quot;
 #include &quot;ADM_assert.h&quot;
 #include &quot;DIA_flyDialog.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_contrast.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_contrast.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_contrast.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -19,8 +19,7 @@
 
 
 
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_videoFilter/ADM_vidContrast.h&quot;
 
 #include &quot;ADM_colorspace/ADM_rgb.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_crop.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_crop.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_crop.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -24,7 +24,7 @@
 
 
 #include &quot;ADM_image.h&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_colorspace/ADM_rgb.h&quot;
 
 #include &quot;DIA_flyDialog.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eq2.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eq2.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eq2.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -18,7 +18,7 @@
 #include &quot;../ADM_toolkit_gtk/toolkit_gtk.h&quot;
 
 #include &quot;ADM_image.h&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 
 #include &quot;ADM_videoFilter/ADM_vidEq2.h&quot;
 #include &quot;DIA_flyDialog.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_equalizer.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_equalizer.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_equalizer.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -28,7 +28,7 @@
 #include &quot;ADM_colorspace/ADM_rgb.h&quot;
 
 #include &quot;ADM_image.h&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_video/ADM_vidEqualizer.h&quot;
 
 extern &quot;C&quot; {

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eraser.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eraser.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eraser.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -25,7 +25,8 @@
 #include &lt;algorithm&gt;
 
 #include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
+#include &quot;ADM_videoFilter_internal.h&quot;
 #include &quot;ADM_videoFilter/ADM_vidEraser.h&quot;
 
 #include &quot;DIA_fileSel.h&quot;
@@ -33,8 +34,8 @@
 #include &quot;DIA_flyDialog.h&quot;
 #include &quot;DIA_flyEraser.h&quot;
 #include &quot;DIA_factory.h&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
 
+
 using namespace std;
 
 #undef _

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_flyDialog.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_flyDialog.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_flyDialog.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -13,7 +13,7 @@
 ***************************************************************************///
 
 #include &quot;../ADM_toolkit_gtk/toolkit_gtk.h&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;DIA_flyDialog.h&quot;
 #include &quot;DIA_factory.h&quot;
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_hue.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_hue.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_hue.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -26,7 +26,7 @@
 #include &quot;ADM_colorspace/ADM_rgb.h&quot;
 
 #include &quot;ADM_image.h&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_videoFilter/ADM_vidHue.h&quot;
 #include &quot;DIA_flyDialog.h&quot;
 #include &quot;DIA_flyHue.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -20,7 +20,7 @@
 #include &quot;../ADM_toolkit_gtk/toolkit_gtk.h&quot;
 #include &quot;DIA_coreToolkit.h&quot;
 
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_encoder/ADM_vidEncode.hxx&quot;
 #include &quot;ADM_encoder/adm_encoder.h&quot;
 #include &quot;DIA_idx_pg.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_mpdelogo.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_mpdelogo.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_mpdelogo.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -26,7 +26,7 @@
 
 
 #include &quot;ADM_image.h&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_colorspace/ADM_rgb.h&quot;
 #include &quot;ADM_video/ADM_vidMPdelogo.h&quot;
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_partial.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_partial.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_partial.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -26,7 +26,7 @@
 
 
 #include &quot;ADM_video/ADM_vidPartial_param.h&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;DIA_coreToolkit.h&quot;
 #define SPIN_GET(x,y) {param-&gt;y= gtk_spin_button_get_value_as_int(GTK_SPIN_BUTTON(WID(x))) ;}
 #define SPIN_SET(x,y)  {gtk_spin_button_set_value(GTK_SPIN_BUTTON(WID(x)),(gfloat)param-&gt;y) ;}

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -25,7 +25,8 @@
 #ifdef HAVE_ENCODER
 
 #include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
+#include &quot;ADM_videoFilter_internal.h&quot;
 #include &quot;ADM_videoFilter/ADM_vidParticle.h&quot;
 
 #include &quot;DIA_fileSel.h&quot;
@@ -33,8 +34,8 @@
 #include &quot;DIA_flyDialog.h&quot;
 #include &quot;DIA_flyParticle.h&quot;
 #include &quot;DIA_factory.h&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
 
+
 #undef _
 #define _(_s) QT_TR_NOOP(_s)
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_preview.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_preview.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_preview.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -20,7 +20,7 @@
  ***************************************************************************/
 
 #include &quot;../ADM_toolkit_gtk/toolkit_gtk.h&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 
 
 #include &quot;DIA_flyDialog.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_srt.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_srt.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_srt.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -23,7 +23,7 @@
 #include &quot;DIA_fileSel.h&quot;
 
 #include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 
 //#include &quot;ADM_video/ADM_vidFont.h&quot;
 class ADMfont;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -18,13 +18,14 @@
 #include &quot;../ADM_toolkit_gtk/toolkit_gtk.h&quot;
 
 #include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
+#include &quot;ADM_videoFilter_internal.h&quot;
 #include &quot;ADM_videoFilter/ADM_vidThreshold.h&quot;
 
 #include &quot;DIA_flyDialog.h&quot;
 #include &quot;DIA_flyThreshold.h&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
 
+
 #undef _
 #define _(_s) QT_TR_NOOP(_s)
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vcodec.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vcodec.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vcodec.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -6,7 +6,7 @@
 
 //___________________________________
 #include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 
 #include &quot;ADM_encoder/ADM_vidEncode.hxx&quot;
 #include &quot;ADM_encoder/adm_encoder.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -19,12 +19,10 @@
 
 #define CHECK_GET(x,y) {*y=gtk_toggle_button_get_active( GTK_TOGGLE_BUTTON(WID(x)));}
 #define CHECK_SET(x,y) {gtk_toggle_button_set_active( GTK_TOGGLE_BUTTON(WID(x)),*y);}   
+#include &quot;ADM_videoFilter.h&quot;
 
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
 
 
-
 #include &quot;ADM_videoFilter/ADM_vobsubinfo.h&quot;
 #include &quot;ADM_videoFilter/ADM_vidVobSub.h&quot;
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -9,7 +9,7 @@
 #include &quot;x264.h&quot;
 }
 
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_encoder/ADM_vidEncode.hxx&quot;
 #include &quot;ADM_encoder/adm_encoder.h&quot;
 #include &quot;ADM_encoder/adm_encx264.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -12,10 +12,11 @@
 
 #include &quot;DIA_coreToolkit.h&quot;
 #include &quot;DIA_fileSel.h&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
+#include &quot;ADM_videoFilter_internal.h&quot;
 #include &quot;ADM_editor/ADM_edit.hxx&quot;
 #include &quot;ADM_video/ADM_videoNull.h&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
+
 #include &quot;ADM_video/ADM_vidPartial.h&quot;
 #include &quot;avi_vars.h&quot;
 #include &quot;ADM_filter/vidVCD.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_ocr.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_ocr.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_ocr.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -34,9 +34,7 @@
 
 #include &quot;DIA_coreToolkit.h&quot;
 #include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
-
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;DIA_fileSel.h&quot;
 #include &quot;ADM_colorspace/colorspace.h&quot;
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_flyDialog.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_flyDialog.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_flyDialog.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -24,7 +24,7 @@
 #include &quot;ADM_colorspace/ADM_rgb.h&quot;
 
 #include &quot;ADM_image.h&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;DIA_flyDialog.h&quot;
 #include &quot;ADM_assert.h&quot;
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_none.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_none.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_none.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -24,7 +24,7 @@
 
 #include &quot;ADM_assert.h&quot;
 
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_video/ADM_vidCNR2_param.h&quot;
 #include &quot;ADM_video/ADM_vidColorYuv_param.h&quot;
 #include &quot;ADM_video/ADM_vidPartial_param.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_gui2/preview_none.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_gui2/preview_none.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_gui2/preview_none.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -10,7 +10,7 @@
 #include &quot;ADM_assert.h&quot;
 #include &quot;fourcc.h&quot;
 #include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 
 #include &quot;GUI_render.h&quot;
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_none.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_none.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_none.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -15,7 +15,7 @@
  ***************************************************************************/
 #include &quot;config.h&quot;
 #include &quot;ADM_default.h&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_video/ADM_vidCNR2_param.h&quot;
 #include &quot;ADM_video/ADM_vidColorYuv_param.h&quot;
 #include &quot;ADM_video/ADM_vidEqualizer.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -12,7 +12,7 @@
 #include &quot;DIA_fileSel.h&quot;
 
 #include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 
 #include &quot;ADM_encoder/ADM_vidEncode.hxx&quot;
 //#include &quot;ADM_video/ADM_vidFont.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_asharp.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_asharp.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_asharp.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -29,7 +29,7 @@
 #include &quot;ADM_default.h&quot;
 
 #include &quot;ADM_image.h&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_colorspace/ADM_rgb.h&quot;
 #include &quot;DIA_flyDialog.h&quot;
 #include &quot;DIA_flyDialogQt4.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_chromashift.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_chromashift.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_chromashift.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -28,7 +28,7 @@
 
 
 #include &quot;ADM_image.h&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_colorspace/ADM_rgb.h&quot;
 #include &quot;DIA_flyDialog.h&quot;
 #include &quot;DIA_flyDialogQt4.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_contrast.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_contrast.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_contrast.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -28,7 +28,7 @@
 
 
 #include &quot;ADM_image.h&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_colorspace/ADM_rgb.h&quot;
 
 #include &quot;DIA_flyDialog.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_crop.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_crop.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_crop.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -28,7 +28,7 @@
 
 
 #include &quot;ADM_image.h&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_colorspace/ADM_rgb.h&quot;
 #include &quot;DIA_flyDialog.h&quot;
 #include &quot;DIA_flyDialogQt4.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_eq2.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_eq2.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_eq2.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -20,7 +20,7 @@
 
 
 #include &quot;ADM_image.h&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_colorspace/ADM_rgb.h&quot;
 #include &quot;ADM_videoFilter/ADM_vidEq2.h&quot;
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_hue.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_hue.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_hue.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -27,7 +27,7 @@
 #include &quot;ADM_default.h&quot;
 
 #include &quot;ADM_image.h&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_colorspace/ADM_rgb.h&quot;
 #include &quot;DIA_flyDialog.h&quot;
 #include &quot;DIA_flyDialogQt4.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_srt.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_srt.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_srt.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -25,7 +25,7 @@
 
 
 #include &quot;ADM_image.h&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_colorspace/ADM_rgb.h&quot;
 #include &quot;DIA_flyDialog.h&quot;
 #include &quot;DIA_flyDialogQt4.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_vobsub.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_vobsub.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_vobsub.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -23,7 +23,7 @@
 
 #include &quot;DIA_fileSel.h&quot;
 #include &quot;ADM_image.h&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_colorspace/ADM_rgb.h&quot;
 
 #include &quot;ADM_videoFilter/ADM_vobsubinfo.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_flyDialog.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_flyDialog.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_flyDialog.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -18,7 +18,7 @@
 
 #include &quot;ADM_default.h&quot;
 
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;DIA_flyDialog.h&quot;
 #include &quot;DIA_flyDialogQt4.h&quot;
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_index_pg.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_index_pg.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_index_pg.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -30,7 +30,7 @@
 #include &quot;ADM_default.h&quot;
 
 
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_encoder/ADM_vidEncode.hxx&quot;
 #include &quot;ADM_encoder/adm_encoder.h&quot;
 #include &quot;DIA_idx_pg.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/Q_mainfilter.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/Q_mainfilter.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/Q_mainfilter.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -40,8 +40,8 @@
 
 #include &quot;DIA_coreToolkit.h&quot;
 #include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
+#include &quot;ADM_videoFilter.h&quot;
+#include &quot;ADM_videoFilter_internal.h&quot;
 #include &quot;ADM_video/ADM_vidPartial.h&quot;
 #include &quot;ADM_filter/vidVCD.h&quot;
 #include &quot;DIA_factory.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_ocr/Q_ocr.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_ocr/Q_ocr.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_ocr/Q_ocr.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -17,8 +17,6 @@
  ***************************************************************************/
 
 #include &quot;config.h&quot;
-#include &lt;string.h&gt;
-#include &lt;stdio.h&gt;
 #include &lt;math.h&gt;
 
 #include &quot;ui_ocr.h&quot;
@@ -27,13 +25,12 @@
 
 #include &quot;DIA_fileSel.h&quot;
 #include &quot;ADM_image.h&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_colorspace/ADM_rgb.h&quot;
 
 #include &quot;ADM_videoFilter/ADM_vobsubinfo.h&quot;
 #include &quot;ADM_videoFilter/ADM_vidVobSub.h&quot;
 
-#include &quot;ADM_assert.h&quot;
 #include &quot;ADM_ocr/ADM_ocr.h&quot;
 #include &quot;ADM_ocr/ADM_ocrInternal.h&quot;
 #include &quot;ui_ocr.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyAsharp.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyAsharp.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyAsharp.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -24,7 +24,7 @@
 #include &quot;ADM_colorspace/ADM_rgb.h&quot;
 
 #include &quot;ADM_image.h&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_videoFilter/ADM_vidASharp_param.h&quot;
 #include &quot;DIA_flyDialog.h&quot;
 #include &quot;DIA_flyAsharp.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyChromaShift.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyChromaShift.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyChromaShift.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -22,7 +22,7 @@
 #include &quot;ADM_colorspace/ADM_rgb.h&quot;
 
 #include &quot;ADM_image.h&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_videoFilter/ADM_vidChromaShift.h&quot;
 #include &quot;ADM_videoFilter/ADM_vidChromaShift_param.h&quot;
 #include &quot;DIA_flyDialog.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyContrast.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyContrast.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyContrast.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -20,7 +20,7 @@
 #include &quot;ADM_colorspace/ADM_rgb.h&quot;
 
 #include &quot;ADM_image.h&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_videoFilter/ADM_vidContrast.h&quot;
 #include &quot;DIA_flyDialog.h&quot;
 #include &quot;DIA_flyContrast.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyCrop.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyCrop.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyCrop.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -20,7 +20,7 @@
 #include &quot;ADM_default.h&quot;
 
 #include &quot;ADM_image.h&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_colorspace/ADM_rgb.h&quot;
 #include &quot;ADM_assert.h&quot;
 #include &quot;DIA_flyDialog.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyDialog.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyDialog.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyDialog.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -16,7 +16,7 @@
 
 #include &quot;ADM_colorspace/ADM_rgb.h&quot;
 #include &quot;GUI_render.h&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;DIA_flyDialog.h&quot;
 #include &quot;ADM_assert.h&quot;
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyEq2.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyEq2.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyEq2.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -22,7 +22,7 @@
 #include &quot;ADM_colorspace/ADM_rgb.h&quot;
 
 #include &quot;ADM_image.h&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_videoFilter/ADM_vidContrast.h&quot;
 #include &quot;DIA_flyDialog.h&quot;
 #include &quot;DIA_flyEq2.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyEraser.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyEraser.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyEraser.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -20,7 +20,7 @@
 #include &quot;ADM_colorspace/ADM_rgb.h&quot;
 
 #include &quot;ADM_image.h&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_videoFilter/ADM_vidEraser.h&quot;
 #include &quot;DIA_flyDialog.h&quot;
 #include &quot;DIA_flyEraser.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyHue.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyHue.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyHue.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -30,7 +30,7 @@
 #include &quot;ADM_default.h&quot;
 #include &quot;ADM_colorspace/ADM_rgb.h&quot;
 #include &quot;ADM_image.h&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_videoFilter/ADM_vidHue.h&quot;
 #include &quot;DIA_flyDialog.h&quot;
 #include &quot;DIA_flyHue.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyParticle.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyParticle.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyParticle.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -20,7 +20,7 @@
 #include &quot;ADM_colorspace/ADM_rgb.h&quot;
 
 #include &quot;ADM_image.h&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_videoFilter/ADM_vidParticle.h&quot;
 #include &quot;DIA_flyDialog.h&quot;
 #include &quot;DIA_flyParticle.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flySrtPos.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flySrtPos.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flySrtPos.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -23,7 +23,7 @@
 #include &quot;ADM_colorspace/ADM_rgb.h&quot;
 #include &quot;ADM_image.h&quot;
 
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 class ADMfont;
 //#include &quot;ADM_video/ADM_vidFont.h&quot;
 #include &quot;ADM_videoFilter/ADM_vidSRT.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flySwissArmyKnife.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flySwissArmyKnife.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flySwissArmyKnife.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -20,7 +20,7 @@
 #include &quot;ADM_colorspace/ADM_rgb.h&quot;
 
 #include &quot;ADM_image.h&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_videoFilter/ADM_vidSwissArmyKnife.h&quot;
 #include &quot;DIA_flyDialog.h&quot;
 #include &quot;DIA_flySwissArmyKnife.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyThreshold.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyThreshold.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyThreshold.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -23,7 +23,7 @@
 #include &quot;ADM_colorspace/ADM_rgb.h&quot;
 
 #include &quot;ADM_image.h&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_videoFilter/ADM_vidThreshold.h&quot;
 #include &quot;DIA_flyDialog.h&quot;
 #include &quot;DIA_flyThreshold.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -30,9 +30,9 @@
 
 #include &quot;DIA_factory.h&quot;
 #include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
+#include &quot;ADM_videoFilter.h&quot;
 
+
 #include &quot;ADM_videoFilter/ADM_vobsubinfo.h&quot;
 #include &quot;ADM_videoFilter/ADM_vidVobSub.h&quot;
 #include &quot;ADM_ocr/ADM_ocr.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -16,7 +16,7 @@
 #ifdef USE_FREETYPE
 #include &quot;ADM_default.h&quot;
 #include &quot;GUI_render.h&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;DIA_flyDialog.h&quot;
 
 

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_cache.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_cache.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_cache.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -1,150 +0,0 @@
-//
-// C++ Implementation: ADM_cache
-//
-// Description: 
-//
-//
-// Author: mean &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>&gt;, (C) 2004
-//
-// Copyright: See COPYING file that comes with this distribution
-//
-//
-#include &quot;ADM_default.h&quot;
-
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
-#include &quot;ADM_video/ADM_cache.h&quot;
-
-#include &quot;ADM_osSupport/ADM_debugID.h&quot;
-#define MODULE_NAME MODULE_FILTER
-#include &quot;ADM_osSupport/ADM_debug.h&quot;
-
-
-VideoCache::VideoCache(uint32_t nb,AVDMGenericVideoStream *in)
-{
-uint32_t sz;
-	nbEntry=nb;
-	incoming=in;
-	memcpy(&amp;info,in-&gt;getInfo(),sizeof(info));
-	// Ready buffers
-	entry=new vidCacheEntry[nbEntry];
-	sz=(info.width*info.height*3)&gt;&gt;1;
-	for(uint32_t i=0;i&lt;nbEntry;i++)
-	{
-		entry[i].frameBuffer	=new ADMImage(info.width,info.height);	
-		entry[i].frameNum	=0xffff0000;
-		entry[i].frameLock	=0;
-		entry[i].lastUse	=0xffff0000;
-	}	
-	counter=0;
-}
-//_____________________________________________
-VideoCache::~ VideoCache()
-{
-	for(uint32_t i=0;i&lt;nbEntry;i++)
-	{
-		delete  entry[i].frameBuffer;
-	}
-	delete [] entry;
-	
-}
-//_____________________________________________
-int32_t VideoCache::searchFrame( uint32_t frame)
-{
-	for(uint32_t i=0;i&lt;nbEntry;i++)
-	{
-		if(entry[i].frameNum==frame) return i;
-	}
-	return -1;
-}
-//_____________________________________________
-int32_t 	 VideoCache::searchPtr( ADMImage *ptr)
-{
-	for(uint32_t i=0;i&lt;nbEntry;i++)
-	{
-		if(entry[i].frameBuffer==ptr) return i;
-	}
-	return -1;
-}
-//_____________________________________________
-uint8_t  VideoCache::unlockAll(void)
-{
-	for(uint32_t i=0;i&lt;nbEntry;i++)
-	{		
-		entry[i].frameLock=0;		
-	}
-	return 1;
-}
-//_____________________________________________
-uint8_t  VideoCache::unlock(ADMImage *frame)
-{
-int32_t k;
-	k=searchPtr(frame) ;
-	ADM_assert(k&gt;=0);
-	entry[k].frameLock--;	
-	return 1;	
-}
-//_____________________________________________
-uint8_t  VideoCache::purge(void)
-{
-	for(uint32_t i=0;i&lt;nbEntry;i++)
-	{		
-		entry[i].frameLock=0;
-		entry[i].frameNum=0xffff0000;	
-		entry[i].lastUse=0xffff0000;	
-	}
-	return 1;
-
-}
-//_____________________________________________
-ADMImage *VideoCache::getImage(uint32_t frame)
-{
-int32_t i;
-uint32_t tryz=nbEntry;
-uint32_t len,flags;
-ADMImage *ptr=NULL;
-
-	// Already there ?
-	if((i=searchFrame(frame))&gt;=0)
-	{
-		aprintf(&quot;Cache : Cache hit %d buffer %d\n&quot;,frame,i);
-		entry[i].frameLock++;
-		entry[i].lastUse=counter;
-		counter++;
-		return entry[i].frameBuffer;	
-	}
-	// Else get it!
-	
-	// First elect a new buffer, we do it by 
-	// using a RLU scheme
-	
-	uint32_t deltamax=0,delta;
-	uint32_t target=0xfff;
-	aprintf(&quot;Cache : Cache miss %d\n&quot;,frame);
-	//for(uint32_t i=0;i&lt;nbEntry;i++) printf(&quot;%d(%d) &quot;,frameNum[i],frameLock[i]);printf(&quot;\n&quot;);
-	for(uint32_t i=0;i&lt;nbEntry;i++)
-	{
-		if(entry[i].frameLock) continue; 	// don&quot;t consider locked frames
-		
-		
-		delta=abs((int)counter-(int)entry[i].lastUse);
-		if(delta&gt;deltamax)
-		{
-			deltamax=delta;
-			target=i;
-		}
-	}
-	ADM_assert(target!=0xfff);
-	// Target is the new cache we will use
-
-	ptr=entry[target].frameBuffer;
-	if(!incoming-&gt;getFrameNumberNoAlloc(frame,&amp;len,ptr,&amp;flags)) return NULL;
-	// Update LRU info
-	entry[target].frameLock++;
-	entry[target].frameNum=frame;
-	entry[target].lastUse=counter;
-	counter++;	
-	return ptr;
-	
-}
-

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_cache.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_cache.h	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_cache.h	2008-04-24 17:36:16 UTC (rev 3980)
@@ -1,48 +0,0 @@
-//
-// C++ Interface: ADM_cache
-//
-// Description: 
-//
-//
-// Author: mean &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>&gt;, (C) 2004
-//
-// Copyright: See COPYING file that comes with this distribution
-//
-//
-
-#ifndef __ADM_CACHE__
-#define __ADM_CACHE__
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
-typedef struct vidCacheEntry
-{
-		uint32_t 	frameNum;
-		ADMImage 	*frameBuffer;
-		uint8_t		frameLock;		
-		uint32_t	lastUse;
-
-}vidCacheEntry;
-
-class VideoCache
-{
-	private:
-		vidCacheEntry	*entry;
-		ADV_Info 	info;
-		uint32_t	counter;
-		uint32_t 	nbEntry;
-		
-		AVDMGenericVideoStream *incoming;
-		
-		
-		int32_t 	searchFrame( uint32_t frame);
-		int32_t 	searchPtr( ADMImage *ptr);
-		
-	public:
-		VideoCache(uint32_t nb,AVDMGenericVideoStream *in);
-		~VideoCache(void);
-		
-		ADMImage *getImage(uint32_t frame);
-		uint8_t unlockAll(void);
-		uint8_t unlock(ADMImage  *frame);
-		uint8_t purge(void);
-};
-#endif

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_confCouple.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_confCouple.h	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_confCouple.h	2008-04-24 17:36:16 UTC (rev 3980)
@@ -1,54 +0,0 @@
-/***************************************************************************
-                          CONFcouple.cpp  -  description
-                             -------------------
-	Used to set a pair name/value
-	--&gt; filters
-
-    begin                : Sun Apr 14 2002
-    copyright            : (C) 2002 by mean
-    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
- #ifndef __CONFCOUPLE__
- #define __CONFCOUPLE__
-
-class CONFcouple
-{
-	private:
-			uint32_t    nb;
-			char 		**name;
-			char 		**value;
-			uint8_t	cur;
-
-			int32_t lookupName(const char *myname);
-	public:
-			CONFcouple(uint32_t nb);
-			~CONFcouple();
-			uint8_t setCouple(const char *name,uint32_t value);
-			uint8_t setCouple(const char *name,int32_t value);
-			uint8_t setCouple(const char *name,const char *value);
-			uint8_t setCouple(const char *name,const ADM_filename *value);
-			uint8_t setCouple(const char *name,double value);
-			uint8_t setCouple(const char *name,float value);
-
-			uint8_t getCouple(const char *name,int32_t *value);
-			uint8_t getCouple(const char *name,uint32_t *value);
-			uint8_t getCouple(const char *name,char **value);
-			uint8_t getCouple(const char *name,ADM_filename **value);
-			uint8_t getCouple(const char *name,double *value);
-			uint8_t getCouple(const char *name,float *value);
-			uint32_t getNumber(void) { return nb;};
-			uint8_t getEntry(uint32_t n, char **nm, char **val)
-				 { assert(n&lt;nb); *nm=name[n];*val=value[n];return 1;};
-			void dump(void );
-
-};
-#endif

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_confCouples.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_confCouples.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_confCouples.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -1,186 +0,0 @@
-/***************************************************************************
-                          ADM_genvideo.cpp  -  description
-                             -------------------
-    begin                : Sun Apr 14 2002
-    copyright            : (C) 2002 by mean
-    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-#include &quot;ADM_default.h&quot;
-
-#include &quot;fourcc.h&quot;
-#include &quot;ADM_assert.h&quot;
-
-#include &quot;ADM_video/ADM_confCouple.h&quot;
-static char tmpstring[1024]; // should be enougth
-CONFcouple::CONFcouple(uint32_t nub)
-{
-	nb=nub;
-	name=new char *[nb];
-	value=new char *[nb];
-
-	for(uint32_t i=0;i&lt;nb;i++)
-		{
-			name[i]=NULL;
-			value[i]=NULL;
-		}
-
-	cur=0;
-};
-
-CONFcouple::~CONFcouple()
-{
-	for(uint32_t i=0;i&lt;nb;i++)
-		{
-			if(name[i]) delete name[i];
-			if(value[i]) delete value[i];
-		}
-		delete [] name;
-		delete [] value;
-
-
-};
-
-uint8_t CONFcouple::setCouple(const char *myname,uint32_t val)
-{
-	ADM_assert(cur&lt;nb);
-
-	name[cur]=ADM_strdup(myname);
-	sprintf(tmpstring,&quot;%lu&quot;,val);
-	value[cur]=ADM_strdup(tmpstring);
-	cur++;
-	return 1;
-}
-uint8_t CONFcouple::setCouple(const char *myname,float val)
-{
-	ADM_assert(cur&lt;nb);
-
-	name[cur]=ADM_strdup(myname);
-	sprintf(tmpstring,&quot;%f&quot;,val);
-	value[cur]=ADM_strdup(tmpstring);
-	cur++;
-	return 1;
-}
-uint8_t CONFcouple::setCouple(const char *myname,double val)
-{
-	ADM_assert(cur&lt;nb);
-
-	name[cur]=ADM_strdup(myname);
-	sprintf(tmpstring,&quot;%f&quot;,val);
-	value[cur]=ADM_strdup(tmpstring);
-	cur++;
-	return 1;
-}
-uint8_t CONFcouple::setCouple(const char *myname,int32_t val)
-{
-	ADM_assert(cur&lt;nb);
-
-	name[cur]=ADM_strdup(myname);
-	sprintf(tmpstring,&quot;%ld&quot;,val);
-	value[cur]=ADM_strdup(tmpstring);
-	cur++;
-	return 1;
-}
-uint8_t CONFcouple::setCouple(const char *myname,const char *val)
-{
-	ADM_assert(cur&lt;nb);
-
-	name[cur]=ADM_strdup(myname);
-	value[cur]=ADM_strdup(val);
-	cur++;
-	return 1;
-}
-uint8_t CONFcouple::setCouple(const char *myname,const ADM_filename *val)
-{
-	ADM_assert(cur&lt;nb);
-
-	name[cur]=ADM_strdup(myname);
-	value[cur]=ADM_strdup((char *)val);
-	cur++;
-	return 1;
-}
-
-uint8_t CONFcouple::getCouple(const char *myname,uint32_t *val)
-{
-	int32_t index=lookupName(myname);
-
-	ADM_assert(index!=-1);
-	ADM_assert(index&lt;(int)nb);
-	*val=(int)atoi(value[index]);
-	return 1;
-}
-uint8_t CONFcouple::getCouple(const char *myname,int32_t *val)
-{
-	int32_t index=lookupName(myname);
-
-	ADM_assert(index!=-1);
-	ADM_assert(index&lt;(int)nb);
-	*val=(int)atoi(value[index]);
-	return 1;
-}
-uint8_t CONFcouple::getCouple(const char *myname,char **val)
-{
-	int32_t index=lookupName(myname);
-
-	ADM_assert(index!=-1);
-	ADM_assert(index&lt;(int)nb);
-	*val=ADM_strdup(value[index]);
-	return 1;
-}
-uint8_t CONFcouple::getCouple(const char *myname,ADM_filename **val)
-{
-	int32_t index=lookupName(myname);
-
-	ADM_assert(index!=-1);
-	ADM_assert(index&lt;(int)nb);
-	*val=(ADM_filename *)ADM_strdup(value[index]);
-	return 1;
-}
-
-uint8_t CONFcouple::getCouple(const char *myname,float *val)
-{
-	int32_t index=lookupName(myname);
-
-	ADM_assert(index!=-1);
-	ADM_assert(index&lt;(int)nb);
-	sscanf(value[index],&quot;%f&quot;,val);;
-	return 1;
-}
-uint8_t CONFcouple::getCouple(const char *myname,double *val)
-{
-	int32_t index=lookupName(myname);
-
-	ADM_assert(index!=-1);
-	ADM_assert(index&lt;(int)nb);
-	sscanf(value[index],&quot;%lf&quot;,val);;
-	return 1;
-}
-
-int32_t CONFcouple::lookupName(const char *myname)
-{
-	for(uint32_t i=0;i&lt;nb;i++)
-	{
-		if(!strcmp(name[i],myname)) return i;
-
-	}
-	return -1;
-
-}
-void CONFcouple::dump(void )
-{
-	for(uint32_t i=0;i&lt;nb;i++)
-	{
-		if(name[i]) printf (&quot;nm:%s &quot;,name[i]); else printf(&quot;!! no name !! &quot;);
-		if(value[i]) printf (&quot;val:%s &quot;,value[i]); else printf(&quot;!! no value !! &quot;);
-	}
-}
-

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_genvideo.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_genvideo.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_genvideo.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -1,178 +0,0 @@
-/***************************************************************************
-                          ADM_genvideo.cpp  -  description
-                             -------------------
-    begin                : Sun Apr 14 2002
-    copyright            : (C) 2002 by mean
-    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#include &quot;config.h&quot;
-
-#include &lt;stdio.h&gt;
-#include &lt;stdlib.h&gt;
-#include &lt;string.h&gt;
-
-#include &lt;time.h&gt;
-#include &lt;sys/time.h&gt;
-
-
-
-#include &quot;fourcc.h&quot;
-
-#include &quot;config.h&quot;
-
-#include &quot;ADM_assert.h&quot;
-
-
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
-
-#include&quot;ADM_video/ADM_vidCommonFilter.h&quot;
-uint8_t AVDMGenericVideoStream::getPixel(int32_t x,int32_t y,uint8_t *data)
-{
-		if(x&gt;(int32_t)_info.width)
-  			{
-            	x=2*_info.width-x;
-       	}
-       if(y&gt;(int32_t)_info.height)
-  			{
-            	y=2*_info.height-y;
-       	}
-        if(   x&lt;0)
-          x=-x;
-        if(   y&lt;0)
-          y=-y;
-
-          return *(data+x+(y*_info.width));
-}
-
-uint32_t   AVDMGenericVideoStream::getPARWidth(void)
-{
-  if(_in)
-  {
-    return _in-&gt; getPARWidth();
-  }
-  return 1;
-}
-/* If there is a father, retrieve PAR from him else assume it is 1:1 */
-uint32_t   AVDMGenericVideoStream::getPARHeight(void)
-{
-  if(_in)
-  {
-    return _in-&gt; getPARHeight();
-  }
-  return 1;
-}
-
-
-uint8_t AVDMGenericVideoStream::getPixelU(int32_t x,int32_t y,uint8_t *data)
-{
-int32_t w=_info.width&gt;&gt;1;
-int32_t h=_info.height&gt;&gt;1;
-	       	
-			x=x&gt;&gt;1;
-			y=y&gt;&gt;1;
-    		
-		if(x&gt;w)
-  			{
-            	x=2*w-x;
-       	}
-       if(y&gt;h)
-  			{
-            	y=2*h-y;
-       	}
-        if(   x&lt;0)
-          x=-x;
-        if(   y&lt;0)
-          y=-y;
-
-          return *(data+x+(y*w));
-
-
-}
-uint8_t AVDMGenericVideoStream::setPixelU(uint8_t val,int32_t x,int32_t y,uint8_t *data)
-{
-int32_t w=_info.width&gt;&gt;1;
-int32_t h=_info.height&gt;&gt;1;
-	       	
-			x=x&gt;&gt;1;
-			y=y&gt;&gt;1;
-
-		if(x&gt;w)
-  			{
-            	x=2*w-x;
-       	}
-       if(y&gt;h)
-  			{
-            	y=2*h-y;
-       	}
-        if(   x&lt;0)
-          x=-x;
-        if(   y&lt;0)
-          y=-y;
-
-           *(data+x+(y*w))=val;
-           return 1;
-
-
-}
-uint8_t AVDMGenericVideoStream::unPackChroma(uint8_t *ssrc,uint8_t *ddst)
-{
-uint8_t *src,*dst,*srcu,*srcv; //,*dstu,*dstv;
-	src=ssrc;
- 	dst=ddst;
-   	// unpack   luma
-				for(uint32_t l=_info.width*_info.height;l&gt;0;l--)
-    				{
-                   	*dst++=*src++;
-                    	dst+=2;
-          			}
-         	// unpack   chroma
-         	
-	          srcu=ssrc+_info.width*_info.height;
-       		srcv=srcu+((_info.width*_info.height)&gt;&gt;2);
-         		dst=ddst+1;
-
-             for(int32_t y=0;y&lt;(int32_t)(_info.height &gt;&gt;1);y++)
-           	{
-		         		for(int32_t x=0;x&lt;(int32_t)(_info.width );x++)
-             			{
-                  		
-                 			*dst=*(dst+3*_info.width)=*srcu;
-                    		dst++;
-                 			*dst=*(dst+3*_info.width)=*srcv;
-                    		dst+=2;
-                    		if(x&amp;1) srcu++;
-                    		if(x&amp;1) srcv++;
-
-                  	}
-                   dst+=_info.width*3;
-               }
-          return 1;
-}
-
-BUILD_CREATE(res_create,AVDMVideoStreamResize);
-BUILD_CREATE(crop_create,AVDMVideoStreamCrop);
-BUILD_CREATE(bsmear_create,AVDMVideoStreamBSMear);
-/*AVDMGenericVideoStream *res_create(AVDMGenericVideoStream *in, CONFcouple *param)
-{
- 	return new   AVDMVideoStreamResize(in,param);
-}
-
-AVDMGenericVideoStream *crop_create(AVDMGenericVideoStream *in, CONFcouple *param)
-{
- 	return new   AVDMVideoStreamCrop(in,param);
-}; ;
-AVDMGenericVideoStream *bsmear_create(AVDMGenericVideoStream *in, CONFcouple *param)
-{
- 	return new   AVDMVideoStreamBSMear(in,param);
-}; ;
-*/

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_genvideo.hxx
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_genvideo.hxx	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_genvideo.hxx	2008-04-24 17:36:16 UTC (rev 3980)
@@ -1,175 +0,0 @@
-/***************************************************************************
-                          ADM_genvideo.hxx  -  description
-                             -------------------
-    begin                : Tue Mar 19 2002
-    copyright            : (C) 2002 by mean
-    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
- 
-#define ADM_FILTER_API_VERSION 1
-/**
-	Note for filter writers :
-
-		The constructor accept 2 parameters
-
-				_in : previous filter in the chain, the source of incoming image
-				couple : A configuration seen as couples of string
-						&quot;size&quot; &quot;13&quot; for example. Passing null means either
-						it has no parameters or set the default value for them.
-
-				_uncompressed : optional internal buffer
-
-				configure return 1 if the conf has changed, 0 else.
-
-
-
-*/
-#ifndef __ADM_VIDEO__
-#define __ADM_VIDEO__
-
-#define INT int32_t
-#include &quot;ADM_confCouple.h&quot;
-#include &quot;ADM_image.h&quot;
-
-#define Pixel uint8_t
-typedef struct
- {
- 		uint32_t width;
- 		uint32_t height;
- 		uint32_t nb_frames;
- 		uint32_t encoding;
- 		uint32_t codec;
- 		uint32_t fps1000;
-		uint32_t orgFrame;
- }ADV_Info;
-
-
-typedef struct
-{
-    uint32_t					w,h;
-    uint32_t				algo;
-}RESIZE_PARAMS;
-
-typedef struct
-{
- 	uint32_t left,right;
- 	uint32_t top,bottom;
-}CROP_PARAMS;
-
-typedef struct
-{
- 	uint32_t newfps, precision;
-}CHFPS_PARAMS;
-
-typedef struct {
-    int pixel;
-    double weight;
-} CONTRIB;
-
-
-typedef struct {
-    uint32_t  n;			/* number of contributors */
-    CONTRIB *p;			/* pointer to list of contributions */
-} CLIST;
-
-typedef struct
-{
-	uint32_t 	width;		/* horizontal size of the image in Pixels */
-	uint32_t	height;		/* vertical size of the image in Pixels */
-	Pixel *	data;		/* pointer to first scanline of image */
-
-} Image;
-
-
-
- class AVDMGenericVideoStream
- {
-   protected:
-      	ADV_Info 					_info;
-   	  ADMImage   					*_uncompressed;
-	  AVDMGenericVideoStream 	*_in;
-/* not really used */
-          uint8_t		getPixel(int32_t x,int32_t y,uint8_t *data);
-          uint8_t		getPixelU(int32_t x,int32_t y,uint8_t *data);
-          uint8_t		setPixelU(uint8_t val,int32_t x,int32_t y,uint8_t *data);
-          uint8_t 	unPackChroma(uint8_t *ssrc,uint8_t *ddst);
-/* /not really used */
-   public:
-          virtual uint32_t   getPARWidth(void);
-          virtual uint32_t   getPARHeight(void);
-
-   	// return 1 -&gt; conf changed need rebuild, 0 means conf not changed
-        virtual 	uint8_t 	configure( AVDMGenericVideoStream *instream)=0;
-          			AVDMGenericVideoStream( void)  {_uncompressed=NULL;_in=NULL;};
-  	virtual 		~AVDMGenericVideoStream( ) {};
-        virtual char 	*printConf(void) { static char *str=(char *)&quot;.&quot;; return str;};
-
-        virtual uint8_t 	getFrameNumberNoAlloc(uint32_t frame, uint32_t *len,
-          							ADMImage *data,uint32_t *flags)=0;
-          	ADV_Info 	*getInfo( void ) { return &amp;_info;};
-         virtual uint8_t	getCoupledConf( CONFcouple **couples)
-	  				{*couples=NULL;return 0;};
- };
-
-void     DIA_previewInit(uint32_t width, uint32_t height);
-uint8_t  DIA_previewUpdate(uint8_t *data);
-void 	 DIA_previewEnd(void);
-uint8_t  DIA_previewStillAlive(void);
-uint8_t	 DIA_filterPreview(const char *captionText, AVDMGenericVideoStream *videoStream, uint32_t frame);
-
- // Pseudo class used to register filters automagically
- // Does not work atm
-class AVDMVideo_FilterDec
-{
-private:
-	int dum;
-public:
-  	AVDMVideo_FilterDec(char *name, AVDMGenericVideoStream *(*create) (AVDMGenericVideoStream *in, void *));
-};
-
-
-
-
-/**
-	These macros are used to build the create_ function automatically
-	That way external sw has no need to know the underlying class
-*/
-#undef NEW
-#define NEW(x) (x *)ADM_alloc(sizeof(x))
-#undef DELETE
-#define DELETE(x) {if(x){ADM_dealloc(x);x=NULL;}}
-#define CREATOR(x,clss)  return new clss(in,x);
-#define BUILD_CREATE(name,clss) AVDMGenericVideoStream *name(AVDMGenericVideoStream *in, CONFcouple *conf) \
-{		CREATOR(conf,clss); }
-#define VARIABLE_PARAMS 0xff
-#define SCRIPT_CREATE(name,clss,tmplate) \
-AVDMGenericVideoStream *name (AVDMGenericVideoStream *in, int n,Arg *args); \
-AVDMGenericVideoStream *name (AVDMGenericVideoStream *in, int n,Arg *args) \
-{ 							\
-CONFcouple		*couple; 			\
-AVDMGenericVideoStream *filter; 			\
-	couple=filterBuildCouple(&amp;tmplate,n,args);	\
-	if(!couple) { printf(&quot;Filter built failed\n&quot;);return NULL;}\
-	filter= new clss(in,couple);			\
-	delete couple;					\
-	return filter;					\
-}
-
-
-
-#define GET(x) ADM_assert(couples-&gt;getCouple((char *)#x,&amp;(_param-&gt;x)))
-#define GET2(x,t) (assert(couples-&gt;getCouple((char *)#x,&amp;(t))),(_param-&gt;x)=(t))
-#define CSET(x)  (*couples)-&gt;setCouple((char *)#x,(_param-&gt;x))
-
-#define MPLAYER_RESIZE_PREFFERED
-#endif
-

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_interlaced.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_interlaced.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_interlaced.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -32,7 +32,7 @@
 #include &quot;ADM_default.h&quot;
 
 #include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_video/ADM_vidCommonFilter.h&quot;
 
 //#define MMX_TRACE

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidCNR2.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidCNR2.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidCNR2.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -41,13 +41,12 @@
 #include &quot;ADM_default.h&quot;
 
 #include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 
 #include &quot;ADM_osSupport/ADM_debugID.h&quot;
 #define MODULE_NAME MODULE_FILTER
 #include &quot;ADM_osSupport/ADM_debug.h&quot;
-#include &quot;ADM_video/ADM_cache.h&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
+#include &quot;ADM_videoFilter.h&quot;
 
 #include &quot;ADM_vidCNR2_param.h&quot;
 

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidCached.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidCached.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidCached.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -1 +0,0 @@
-// RMED

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidCached.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidCached.h	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidCached.h	2008-04-24 17:36:16 UTC (rev 3980)
@@ -1 +0,0 @@
-// RMED

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidClean.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidClean.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidClean.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -18,11 +18,11 @@
 
 
 #include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_video/ADM_vidClean.h&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
 
 
+
 static FILTER_PARAM smoothParam={2,{&quot;radius&quot;,&quot;blend&quot;}};
 
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidColorYuv.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidColorYuv.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidColorYuv.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -49,15 +49,15 @@
 #include &quot;ADM_default.h&quot;
 
 #include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 
 #include &quot;ADM_osSupport/ADM_debugID.h&quot;
 #define MODULE_NAME MODULE_FILTER
 #include &quot;ADM_osSupport/ADM_debug.h&quot;
 
 #include &quot;ADM_vidColorYuv.h&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
 
+
 extern int DIA_coloryuv(COLOR_YUV_PARAM *param);
 
 static FILTER_PARAM coloryuv_template={19,

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidColorYuv.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidColorYuv.h	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidColorYuv.h	2008-04-24 17:36:16 UTC (rev 3980)
@@ -14,7 +14,6 @@
 #ifndef ADM_VID_COLOR_YUV_H
 #define ADM_VID_COLOR_YUV_H
 #include &quot;ADM_vidColorYuv_param.h&quot;
-#include &quot;ADM_video/ADM_cache.h&quot;
 class  ADMVideoColorYuv:public AVDMGenericVideoStream
 {
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidEqualizer.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidEqualizer.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidEqualizer.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -12,17 +12,15 @@
 
 
 #include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 
 #include &quot;ADM_osSupport/ADM_debugID.h&quot;
 #define MODULE_NAME MODULE_FILTER
 #include &quot;ADM_osSupport/ADM_debug.h&quot;
 
-
-
 #include &quot;ADM_vidEqualizer.h&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
 
+
 static FILTER_PARAM equalizer_template={8,{&quot;0&quot;,&quot;1&quot;,&quot;2&quot;,&quot;3&quot;
 					,&quot;4&quot;,&quot;5&quot;,&quot;6&quot;,&quot;7&quot;}};
 BUILD_CREATE(equalizer_create,vidEqualizer);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidFieldUnblend.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidFieldUnblend.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidFieldUnblend.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -23,13 +23,12 @@
 
 #include &quot;DIA_coreToolkit.h&quot;
 #include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 
 #include &quot;ADM_osSupport/ADM_debugID.h&quot;
 #define MODULE_NAME MODULE_FILTER
 #include &quot;ADM_osSupport/ADM_debug.h&quot;
-#include &quot;ADM_video/ADM_cache.h&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
+
 #include &quot;DIA_enter.h&quot;
 
 #define MUL 1

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidFieldUtil.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidFieldUtil.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidFieldUtil.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -22,7 +22,7 @@
 
 
 #include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_video/ADM_vidFieldUtil.h&quot;
 
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidMPdelogo.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidMPdelogo.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidMPdelogo.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -10,7 +10,7 @@
 #include &quot;ADM_default.h&quot;
 
 #include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_video/ADM_vidCommonFilter.h&quot;
 
 
@@ -20,9 +20,8 @@
 #include &quot;ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale.h&quot;
 }
 
-#include &quot;ADM_filter/video_filters.h&quot;
 
-#include &quot;ADM_video/ADM_cache.h&quot;
+
 #include &quot;ADM_vidMPdelogo.h&quot;
 
 class  ADMVideoMPdelogo:public AVDMGenericVideoStream

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidNull.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidNull.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidNull.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -21,26 +21,19 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include &lt;stdio.h&gt;
-#include &lt;stdlib.h&gt;
-#include &lt;string.h&gt;
-#include &quot;ADM_assert.h&quot;
-
 #include &quot;config.h&quot;
-#include &quot;fourcc.h&quot;
-
-#include &quot;config.h&quot;
+#include &quot;ADM_default.h&quot;
 #include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_video/ADM_videoNull.h&quot;
 
 #include &quot;ADM_osSupport/ADM_debugID.h&quot;
 #define MODULE_NAME MODULE_FILTER
 #include &quot;ADM_osSupport/ADM_debug.h&quot;
 
-#include &quot;ADM_filter/video_filters.h&quot;
 
 
+
 //_______________________________________________________________
 
 AVDMVideoStreamNull::AVDMVideoStreamNull(ADM_Composer *in,uint32_t start, uint32_t nb)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidPartial.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidPartial.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidPartial.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -23,8 +23,8 @@
 #include &quot;ADM_default.h&quot;
 
 #include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
+#include &quot;ADM_videoFilter.h&quot;
+#include &quot;ADM_videoFilter_internal.h&quot;
 #include &quot;ADM_video/ADM_vidPartial.h&quot;
 
 extern AVDMGenericVideoStream *filterCreateFromTag(VF_FILTERS tag,CONFcouple *couple, AVDMGenericVideoStream *in);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidRaw.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidRaw.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidRaw.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -17,17 +17,10 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include &lt;stdio.h&gt;
-#include &lt;stdlib.h&gt;
-#include &lt;string.h&gt;
-#include &quot;ADM_assert.h&quot;
-
 #include &quot;config.h&quot;
-#include &quot;fourcc.h&quot;
-
-#include &quot;config.h&quot;
+#include &quot;ADM_default.h&quot;
 #include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_video/ADM_videoNull.h&quot;
 
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/CMakeLists.txt	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/CMakeLists.txt	2008-04-24 17:36:16 UTC (rev 3980)
@@ -1,16 +1,12 @@
 SET(ADM_video_SRCS 
-ADM_cache.cpp                  
 ADM_vidCNR2.cpp       
 ADM_vidFieldUnblend.cpp  
 ADM_vidPartial.cpp    
-ADM_confCouples.cpp            
 ADM_vidColorYuv.cpp   
 ADM_vidFieldUtil.cpp     
 ADM_vidRaw.cpp        
-ADM_genvideo.cpp         
 ADM_vidFont.cpp
 ADM_interlaced.cpp       
-ADM_vidCached.cpp       
 ADM_vidMPdelogo.cpp      
 ADM_vidClean.cpp        
 ADM_vidEqualizer.cpp  

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_guiResize.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_guiResize.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_guiResize.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -20,8 +20,7 @@
 #include &quot;config.h&quot;
 #include &quot;ADM_default.h&quot;
 
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_resizebis.hxx&quot;
 #include &quot;ADM_video/ADM_vidCommonFilter.h&quot;
 #include &quot;DIA_coreToolkit.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -22,9 +22,7 @@
 #include &quot;ADM_default.h&quot;
 #include &lt;math.h&gt;
 #include &quot;config.h&quot;
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
+#include &quot;ADM_videoFilter.h&quot;
 
 #include &quot;DIA_fileSel.h&quot;
 
@@ -37,7 +35,10 @@
 #include &quot;ADM_osSupport/ADM_debug.h&quot;
 
 #include &quot;ADM_lavpp_deintparam.h&quot;
-
+extern &quot;C&quot;
+{
+#include &quot;ADM_libraries/ADM_ffmpeg/ADM_libpostproc/postprocess.h&quot;
+};
 #include &quot;DIA_factory.h&quot;
 /*
 {&quot;al&quot;, &quot;autolevels&quot;,            0, 1, 2, LEVEL_FIX},
@@ -52,6 +53,8 @@
 {&quot;l5&quot;, &quot;lowpass5&quot;,              1, 1, 4, LOWPASS5_DEINT_FILTER}, *********
 */
 
+#define AVI_KEY_FRAME 0x10  // FIXME
+#define AVI_B_FRAME 0x4000
 
 
 class  ADMVideoLavPPDeint:public AVDMGenericVideoStream

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_resizebis.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_resizebis.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_resizebis.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -25,8 +25,7 @@
 
 #include &quot;ADM_default.h&quot;
 
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_video/ADM_vidCommonFilter.h&quot;
 #include &quot;ADM_resizebis.hxx&quot;
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_resizeter.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_resizeter.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_resizeter.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -25,8 +25,7 @@
 #include &quot;ADM_default.h&quot;
 
 
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_video/ADM_vidCommonFilter.h&quot;
 #include &quot;ADM_resizebis.hxx&quot;
  

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidASS.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidASS.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidASS.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -13,11 +13,9 @@
 #include &quot;config.h&quot;
 #include &quot;ADM_default.h&quot;
 #include &quot;DIA_coreToolkit.h&quot;
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_video/ADM_vidCommonFilter.h&quot;
 #include &quot;ADM_vidASS.h&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
 #include &quot;ADM_colorspace/ADM_rgb.h&quot;
 #include &quot;DIA_factory.h&quot;
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidAddBorder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidAddBorder.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidAddBorder.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -18,11 +18,10 @@
 #include &quot;ADM_default.h&quot;
 
 #include &quot;DIA_coreToolkit.h&quot;
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_vidAddBorder.h&quot;
 #include &quot;ADM_video/ADM_vidCommonFilter.h&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
+#include &quot;ADM_videoFilter.h&quot;
 
 #include &quot;DIA_factory.h&quot;
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidAnimated.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidAnimated.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidAnimated.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -13,17 +13,16 @@
  ***************************************************************************/
 #include &quot;ADM_default.h&quot;
 
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 
 #include &quot;ADM_osSupport/ADM_debugID.h&quot;
 #define MODULE_NAME MODULE_FILTER
 #include &quot;ADM_osSupport/ADM_debug.h&quot;
 
-#include &quot;ADM_filter/video_filters.h&quot;
+
 #include &quot;ADM_vidAnimated.h&quot;
 #include &quot;ADM_inputs/ADM_inpics/ADM_pics.h&quot;
-
+#include &quot;ADM_codecs/ADM_codec.h&quot; //For decoders
 static FILTER_PARAM animated_template={10,
     {&quot;tc0&quot;,&quot;tc1&quot;,&quot;tc2&quot;,
     &quot;tc3&quot;,&quot;tc4&quot;,&quot;tc5&quot;,

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidAnimated.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidAnimated.h	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidAnimated.h	2008-04-24 17:36:16 UTC (rev 3980)
@@ -20,7 +20,6 @@
 #define TOP_MARGIN 50
 
 #include &quot;ADM_vidAnimated_param.h&quot;
-#include &quot;ADM_video/ADM_cache.h&quot;
 
 class  ADMVideoAnimated:public AVDMGenericVideoStream
 {

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidAsharp.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidAsharp.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidAsharp.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -25,17 +25,12 @@
 
 #include &quot;ADM_default.h&quot;
 
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
-#include&quot;ADM_video/ADM_cache.h&quot;
+#include &quot;ADM_videoFilter.h&quot;
 
 #include &quot;ADM_osSupport/ADM_debugID.h&quot;
 #define MODULE_NAME MODULE_FILTER
 #include &quot;ADM_osSupport/ADM_debug.h&quot;
 
-
-#include &quot;ADM_filter/video_filters.h&quot;
-
 #include &quot;ADM_vidASharp_param.h&quot;
 class ASharp : public AVDMGenericVideoStream
 {

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidBSmear.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidBSmear.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidBSmear.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -25,10 +25,8 @@
 #include &quot;config.h&quot;
 #include &quot;ADM_default.h&quot;
 #include &quot;DIA_coreToolkit.h&quot;
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_video/ADM_vidCommonFilter.h&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
 
 #include &quot;DIA_factory.h&quot;
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidBlend.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidBlend.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidBlend.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -21,8 +21,7 @@
 #include &quot;config.h&quot;
 #include &quot;ADM_default.h&quot;
 
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_vidField.h&quot;
 
 #ifdef ADM_CPU_X86_64

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidBlendRemoval.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidBlendRemoval.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidBlendRemoval.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -17,25 +17,15 @@
  *                                                                         *
  ***************************************************************************/
 #include &quot;config.h&quot;
-#include &lt;stdio.h&gt;
-#include &lt;stdlib.h&gt;
-#include &lt;string.h&gt;
-#include &quot;ADM_assert.h&quot;
-
-#include &quot;config.h&quot;
-#include &quot;fourcc.h&quot;
 #include &quot;ADM_default.h&quot;
 #include &lt;math.h&gt;
 
 
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 
 #include &quot;ADM_osSupport/ADM_debugID.h&quot;
 #define MODULE_NAME MODULE_FILTER
 #include &quot;ADM_osSupport/ADM_debug.h&quot;
-#include &quot;ADM_video/ADM_cache.h&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
 #include &quot;DIA_enter.h&quot;
 
 #include &quot;DIA_factory.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidChroma.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidChroma.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidChroma.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -18,10 +18,8 @@
 #include &quot;ADM_default.h&quot;
 
 
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_vidChroma.h&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
 
 
 static FILTER_PARAM nullParam={0,{&quot;&quot;}};

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidChromaShift.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidChromaShift.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidChromaShift.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -19,11 +19,9 @@
 #include &quot;ADM_default.h&quot;
 
 
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_vidChromaShift.h&quot;
 
-#include &quot;ADM_filter/video_filters.h&quot;
 
 
 static FILTER_PARAM cshiftParam={2,{&quot;u&quot;,&quot;v&quot;}};

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -20,13 +20,9 @@
  
 #include &quot;config.h&quot;
 #include &quot;ADM_default.h&quot;
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 
-#include &quot;ADM_filter/video_filters.h&quot;
-
 #include &quot;DIA_factory.h&quot;
-
 #include &quot;ADM_vidComputeAverage.h&quot;
 
 static FILTER_PARAM computeAverageParam={5,{&quot;start_frame&quot;,

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidComputeAverage.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidComputeAverage.h	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidComputeAverage.h	2008-04-24 17:36:16 UTC (rev 3980)
@@ -23,7 +23,6 @@
 
 #include &lt;map&gt;
 
-#include &quot;ADM_video/ADM_cache.h&quot;
 
 typedef struct COMPUTEAVERAGE_PARAM
 {

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidContrast.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidContrast.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidContrast.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -14,14 +14,13 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include &quot;config.h&quot;
 #include &quot;ADM_default.h&quot;
 #include &lt;math.h&gt;
 
 
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_videoFilter/ADM_vidContrast.h&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
 
 static FILTER_PARAM contrastParam =
   { 5, {&quot;offset&quot;, &quot;coef&quot;, &quot;doLuma&quot;, &quot;doChromaU&quot;, &quot;doChromaV&quot;} };

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidCrop.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidCrop.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidCrop.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -22,10 +22,8 @@
 
 #include &quot;ADM_default.h&quot;
 
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_video/ADM_vidCommonFilter.h&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
 
 
 static FILTER_PARAM cropParam={4,{&quot;left&quot;,&quot;right&quot;,&quot;top&quot;,&quot;bottom&quot;}};

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDGbob.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDGbob.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDGbob.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -23,17 +23,12 @@
 
 #include &quot;config.h&quot;
 #include &quot;ADM_default.h&quot;
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
-#include&quot;ADM_video/ADM_cache.h&quot;
+#include &quot;ADM_videoFilter.h&quot;
 
 #include &quot;ADM_osSupport/ADM_debugID.h&quot;
 #define MODULE_NAME MODULE_FILTER
 #include &quot;ADM_osSupport/ADM_debug.h&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
-
 #include &quot;ADM_vidDGbob_param.h&quot;
-
 #include &quot;DIA_factory.h&quot;
 
 class DGbob : public AVDMGenericVideoStream

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDecDec.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDecDec.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDecDec.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -43,10 +43,8 @@
 #include &quot;config.h&quot;
 #include &quot;ADM_default.h&quot;
 
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_vidField.h&quot;
-#include &quot;ADM_video/ADM_cache.h&quot;
 
 #include &quot;ADM_osSupport/ADM_debugID.h&quot;
 #define MODULE_NAME MODULE_FILTER
@@ -95,9 +93,9 @@
 }
 //________________________________
 #include &quot;ADM_vidDecDec_param.h&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
 
 
+
 static FILTER_PARAM decdecParam={5,{&quot;cycle&quot;,&quot;mode&quot;,&quot;quality&quot;,&quot;threshold&quot;,&quot;threshold2&quot;}};
 
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -33,15 +33,13 @@
 #include &quot;config.h&quot;
 #include &quot;ADM_default.h&quot;
 
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
 
 #include &quot;ADM_osSupport/ADM_debugID.h&quot;
 #define MODULE_NAME MODULE_FILTER
 #include &quot;ADM_osSupport/ADM_debug.h&quot;
+#include &quot;ADM_videoFilter.h&quot;
 
 #include &quot;ADM_vidDecTelecide.h&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
 #include &quot;DIA_factory.h&quot;
 
 static FILTER_PARAM decomb_template={16,{&quot;order&quot;,&quot;back&quot;,&quot;guide&quot;,

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDecTelecide.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDecTelecide.h	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDecTelecide.h	2008-04-24 17:36:16 UTC (rev 3980)
@@ -18,7 +18,6 @@
 	along with this program; if not, write to the Free Software
 	Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
 */
-#include &quot;ADM_video/ADM_cache.h&quot;
 #undef DEBUG_PATTERN_GUIDANCE
 
 #undef WINDOWED_MATCH

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDeintASM.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDeintASM.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDeintASM.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -21,8 +21,7 @@
 #include &quot;config.h&quot;
 #include &quot;ADM_default.h&quot;
 
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 
 #include&quot;ADM_vidField.h&quot;
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDeinterlace.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDeinterlace.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDeinterlace.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -22,11 +22,9 @@
  ***************************************************************************/
 #include &quot;ADM_default.h&quot;
 
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 
 #include&quot;ADM_vidDeinterlace.h&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
 
 #include &quot;DIA_factory.h&quot;
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDelta.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDelta.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDelta.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -7,14 +7,11 @@
 
 #include &quot;ADM_default.h&quot;
 
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 
 #include &quot;ADM_osSupport/ADM_debugID.h&quot;
 #define MODULE_NAME MODULE_FILTER
 #include &quot;ADM_osSupport/ADM_debug.h&quot;
-#include &quot;ADM_video/ADM_cache.h&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
 
 //#include &quot;ADM_vidCNR2_param.h&quot;
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDenoise.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDenoise.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDenoise.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -24,10 +24,8 @@
 #include &quot;config.h&quot;
 #include &quot;ADM_default.h&quot;
 
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_vidDenoise.h&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
 
 
 #include &quot;DIA_factory.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDropOut.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDropOut.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDropOut.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -17,10 +17,8 @@
 #include &quot;config.h&quot;
 #include &quot;ADM_default.h&quot;
 
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_vidDropOut.h&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
 #include &quot;DIA_factory.h&quot;
 
 static FILTER_PARAM dropParam={1,{&quot;threshold&quot;}};

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDropOut.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDropOut.h	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDropOut.h	2008-04-24 17:36:16 UTC (rev 3980)
@@ -16,7 +16,6 @@
  ***************************************************************************/
 #ifndef __DROPOUT__
 #define __DROPOUT__   
-#include &quot;ADM_video/ADM_cache.h&quot;
  
 class  ADMVideoDropOut:public AVDMGenericVideoStream
  {

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDvbSub.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDvbSub.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDvbSub.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -32,10 +32,8 @@
 #include &quot;fourcc.h&quot;
 
 
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_video/ADM_vidCommonFilter.h&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
 #include &quot;ADM_colorspace/ADM_rgb.h&quot;
 #include &quot;ADM_colorspace/colorspace.h&quot;
 #include &quot;ADM_codecs/ADM_codec.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidEq2.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidEq2.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidEq2.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -21,11 +21,8 @@
 #include &lt;math.h&gt;
 
 
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;DIA_factory.h&quot;
-#include &quot;ADM_video/ADM_cache.h&quot;
 
 
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidEraser.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidEraser.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidEraser.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -32,13 +32,10 @@
 #include &quot;avi_vars.h&quot;
 
 #include &quot;ADM_toolkit/toolkit.hxx&quot;
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
-
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_encoder/ADM_vidEncode.hxx&quot;
 #include &quot;ADM_encoder/adm_encoder.h&quot;
 
-#include &quot;ADM_filter/video_filters.h&quot;
 
 #include &quot;DIA_factory.h&quot;
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidEraser.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidEraser.h	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidEraser.h	2008-04-24 17:36:16 UTC (rev 3980)
@@ -20,7 +20,6 @@
 
 #include &lt;map&gt;
 
-#include &quot;ADM_video/ADM_cache.h&quot;
 
 #include &lt;vector&gt;
 #include &lt;string&gt;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFade.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFade.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFade.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -13,14 +13,11 @@
 #include &quot;ADM_default.h&quot;
 
 #include &quot;DIA_coreToolkit.h&quot;
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
-#include&quot;ADM_video/ADM_cache.h&quot;
+#include &quot;ADM_videoFilter.h&quot;
 
 #include &quot;ADM_osSupport/ADM_debugID.h&quot;
 #define MODULE_NAME MODULE_FILTER
 #include &quot;ADM_osSupport/ADM_debug.h&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
 #include &quot;ADM_vidFade_param.h&quot;
 
 #include &quot;DIA_factory.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFastConvolution.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFastConvolution.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFastConvolution.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -18,11 +18,7 @@
 #include &quot;ADM_default.h&quot;
 
 
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
-
-#include&quot;ADM_filter/video_filters.h&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;DIA_factory.h&quot;
 #include &quot;ADM_vidConvolution.hxx&quot;
 #include &quot;ADM_assert.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFields.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFields.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFields.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -16,8 +16,7 @@
  ***************************************************************************/
 #include &quot;config.h&quot;
 #include &quot;ADM_default.h&quot;
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_vidField.h&quot;
 #include &quot;DIA_enter.h&quot;
 //_______________________________________________________________

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFlipV.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFlipV.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFlipV.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -17,10 +17,8 @@
 
 #include &quot;ADM_default.h&quot;
 
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_vidFlipV.h&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
 
 
 static FILTER_PARAM flipParam={0,{&quot;&quot;}};

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFlux.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFlux.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFlux.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -18,31 +18,13 @@
  *                                                                         *
  ***************************************************************************/
 #include &quot;config.h&quot; 
- 
-#include &lt;stdio.h&gt;
-#include &lt;stdlib.h&gt;
-#include &lt;string.h&gt;
-#include &quot;ADM_assert.h&quot;
 #include &lt;math.h&gt;
-
 #include &quot;ADM_default.h&quot;
 #include &quot;fourcc.h&quot;
-#include &quot;config.h&quot;
-
-
-
-//#include &quot;ADM_toolkit/toolkit.hxx&quot;
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
-
-
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;DIA_factory.h&quot;
 #include &quot;ADM_vidFlux.h&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
 
-
-#include &quot;ADM_assert.h&quot;
-
 static int16_t scaletab[16];
 static uint64_t scaletab_MMX[65536];
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFlux.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFlux.h	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFlux.h	2008-04-24 17:36:16 UTC (rev 3980)
@@ -17,7 +17,6 @@
  
 #ifndef __FLUX__
 #define __FLUX__   
-#include &quot;ADM_video/ADM_cache.h&quot;
 typedef struct FLUX_PARAM
 {
 	uint32_t temporal_threshold;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidForcedPP.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidForcedPP.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidForcedPP.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -15,8 +15,7 @@
 #include &quot;config.h&quot;
 #include &quot;ADM_default.h&quot;
 
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 
 #include &quot;ADM_osSupport/ADM_debugID.h&quot;
 #define MODULE_NAME MODULE_FILTER
@@ -24,10 +23,14 @@
 
 #include &quot;ADM_vidForcedPP.h&quot;
 #include &quot;DIA_enter.h&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
 
 #include &quot;DIA_factory.h&quot;
 
+// FIXME
+#define AVI_KEY_FRAME   0x10
+#define AVI_B_FRAME	0x4000	 // hopefully it is not used..
+
+
 static FILTER_PARAM ppParam={3,{&quot;postProcType&quot;,&quot;postProcStrength&quot;,&quot;forcedQuant&quot;}};
 
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidHardIvtcRemoval.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidHardIvtcRemoval.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidHardIvtcRemoval.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -19,17 +19,13 @@
 #include &quot;config.h&quot;
 #include &quot;ADM_default.h&quot;
 
-#include &quot;fourcc.h&quot;
 #include &lt;math.h&gt;
 
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 
 #include &quot;ADM_osSupport/ADM_debugID.h&quot;
 #define MODULE_NAME MODULE_FILTER
 #include &quot;ADM_osSupport/ADM_debug.h&quot;
-#include &quot;ADM_video/ADM_cache.h&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
 #include &quot;DIA_enter.h&quot;
 
 #include &quot;DIA_factory.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidHue.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidHue.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidHue.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -15,11 +15,10 @@
 #include &lt;math.h&gt;
 
 
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
+#include &quot;ADM_videoFilter.h&quot;
+
+
 #include &quot;DIA_enter.h&quot;
-#include &quot;ADM_video/ADM_cache.h&quot;
 
 
 #include &quot;ADM_vidHue.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -38,13 +38,10 @@
 #include &quot;ADM_default.h&quot;
 
 
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
-
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_osSupport/ADM_debugID.h&quot;
 #define MODULE_NAME MODULE_FILTER
 #include &quot;ADM_osSupport/ADM_debug.h&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
 #include &quot;ADM_vidKernelDeint.h&quot;
 
 #include &quot;DIA_factory.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidKernelDeint.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidKernelDeint.h	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidKernelDeint.h	2008-04-24 17:36:16 UTC (rev 3980)
@@ -2,7 +2,6 @@
 #ifndef ADM_KERNELDEINT
 #define ADM_KERNELDEINT
 
-#include &quot;ADM_video/ADM_cache.h&quot;
 typedef struct  KERNEL_CONF
 {
 	uint32_t		order, threshold;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidLargeMedian.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidLargeMedian.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidLargeMedian.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -23,11 +23,9 @@
 #include &quot;ADM_default.h&quot;
 
 
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 
 #include&quot;ADM_vidLargeMedian.h&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
 #include &quot;DIA_factory.h&quot;
 
 static FILTER_PARAM nullParam={2,{&quot;chroma&quot;,&quot;luma&quot;}};

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidLogo.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidLogo.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidLogo.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -21,10 +21,8 @@
 
 #include &quot;ADM_default.h&quot;
 
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_video/ADM_vidCommonFilter.h&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
 #include &quot;ADM_colorspace/ADM_rgb.h&quot;
 #include &quot;DIA_factory.h&quot;
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidLuma.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidLuma.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidLuma.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -17,10 +17,8 @@
 
 #include &quot;ADM_default.h&quot;
 
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_vidLuma.h&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
 
 
 static FILTER_PARAM nullParam={0,{&quot;&quot;}};

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLD3D.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLD3D.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLD3D.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -21,14 +21,12 @@
 #include &quot;config.h&quot;
 #include &quot;ADM_default.h&quot;
 
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_vidMPLD3D.h&quot;
 
 #include &quot;ADM_osSupport/ADM_debugID.h&quot;
 #define MODULE_NAME MODULE_FILTER
 #include &quot;ADM_osSupport/ADM_debug.h&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
 
 #include &quot;DIA_factory.h&quot;
 static FILTER_PARAM mp3Param={3,{&quot;param1&quot;,&quot;param2&quot;,&quot;param3&quot;}};

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLD3D.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLD3D.h	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLD3D.h	2008-04-24 17:36:16 UTC (rev 3980)
@@ -20,7 +20,7 @@
  
 #ifndef _D3D__
 #define _D3D__   
-#include &quot;ADM_video/ADM_vidCached.h&quot;
+
 typedef struct MPD3D_PARAM
 {
 	double  param1;  // Luma 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLD3Dlow.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLD3Dlow.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLD3Dlow.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -22,14 +22,12 @@
 #include &quot;ADM_default.h&quot;
 
 
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_vidMPLD3Dlow.h&quot;
 
 #include &quot;ADM_osSupport/ADM_debugID.h&quot;
 #define MODULE_NAME MODULE_FILTER
 #include &quot;ADM_osSupport/ADM_debug.h&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
 
 #include &quot;DIA_factory.h&quot;
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLD3Dlow.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLD3Dlow.h	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLD3Dlow.h	2008-04-24 17:36:16 UTC (rev 3980)
@@ -20,7 +20,7 @@
 
 #ifndef __D3DLOW__
 #define __D3DLOW__
-#include &quot;ADM_video/ADM_vidCached.h&quot;
+
 #include &quot;ADM_vidMPLD3D.h&quot;
 
 class  ADMVideoMPD3Dlow:public AVDMGenericVideoStream

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLResize.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLResize.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLResize.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -22,8 +22,7 @@
 #include &quot;config.h&quot;
 #include &quot;ADM_default.h&quot;
 #include &quot;DIA_coreToolkit.h&quot;
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_video/ADM_vidCommonFilter.h&quot;
 
 
@@ -32,7 +31,6 @@
 #include &quot;ADM_libraries/ADM_ffmpeg/ADM_lavutil/avutil.h&quot;
 #include &quot;ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale.h&quot;
 }
-#include &quot;ADM_filter/video_filters.h&quot;
 
 typedef struct alg
 {

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMSharpen.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMSharpen.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMSharpen.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -36,15 +36,12 @@
 #include &quot;config.h&quot;
 #include &quot;ADM_default.h&quot;
 
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
-#include &quot;ADM_video/ADM_cache.h&quot;
+#include &quot;ADM_videoFilter.h&quot;
 
 #include &quot;ADM_osSupport/ADM_debugID.h&quot;
 #define MODULE_NAME MODULE_FILTER
 #include &quot;ADM_osSupport/ADM_debug.h&quot;
 
-#include &quot;ADM_filter/video_filters.h&quot;
 #include &quot;ADM_vidMSharpen_param.h&quot;
 #include &quot;DIA_factory.h&quot;
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -26,11 +26,9 @@
 #include &quot;ADM_lavcodec.h&quot;
 
 
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 
-#include &quot;ADM_filter/video_filters.h&quot;
-#include &quot;ADM_video/ADM_cache.h&quot;
+#include &quot;ADM_videoFilter.h&quot;
 
 #include &quot;ADM_vidMcDeint_param.h&quot;
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMosaic.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMosaic.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMosaic.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -17,8 +17,7 @@
 #include &quot;config.h&quot;
 #include &quot;ADM_default.h&quot;
 
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_video/ADM_vidCommonFilter.h&quot;
 
 #include &quot;DIA_factory.h&quot;
@@ -32,9 +31,6 @@
 }
 
 
-
-#include &quot;ADM_filter/video_filters.h&quot;
-#include &quot;ADM_video/ADM_cache.h&quot;
 #include &quot;ADM_vidMosaic_param.h&quot;
 
 class  ADMVideoMosaic:public AVDMGenericVideoStream

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMsmooth.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMsmooth.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMsmooth.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -31,15 +31,12 @@
 #include &quot;config.h&quot;
 #include &quot;ADM_default.h&quot;
 
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
-#include &quot;ADM_video/ADM_cache.h&quot;
+#include &quot;ADM_videoFilter.h&quot;
 
 #include &quot;ADM_osSupport/ADM_debugID.h&quot;
 #define MODULE_NAME MODULE_FILTER
 #include &quot;ADM_osSupport/ADM_debug.h&quot;
 
-#include &quot;ADM_filter/video_filters.h&quot;
 #include &quot;DIA_factory.h&quot;
 
 #if 0

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidPalShift.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidPalShift.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidPalShift.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -16,13 +16,8 @@
  ***************************************************************************/
 #include &quot;config.h&quot;
 #include &quot;ADM_default.h&quot;
-
-
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_vidPalShift.h&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
-
 #include &quot;DIA_factory.h&quot;
 
 static FILTER_PARAM nullParam={0,{&quot;&quot;}};

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidPalShift.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidPalShift.h	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidPalShift.h	2008-04-24 17:36:16 UTC (rev 3980)
@@ -16,7 +16,6 @@
  ***************************************************************************/
 #ifndef PALSHIFT__
 #define PALSHIFT__
-#include &quot;ADM_video/ADM_cache.h&quot; 
  class  ADMVideoPalShift:public AVDMGenericVideoStream
  {
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidPalSmart.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidPalSmart.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidPalSmart.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -16,12 +16,9 @@
 
 #include &quot;ADM_default.h&quot;
 
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
-
+#include &quot;ADM_videoFilter.h&quot;
 #include&quot;ADM_vidDeinterlace.h&quot;
 #include&quot;ADM_vidPalSmart.h&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
 
 #define MATCH_THRESH 100
 #define ASM_DEINT

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidPalSmart.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidPalSmart.h	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidPalSmart.h	2008-04-24 17:36:16 UTC (rev 3980)
@@ -14,7 +14,6 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include &quot;ADM_video/ADM_cache.h&quot;
 class  ADMVideoTelecide:public ADMVideoFields
  {
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidParticle.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidParticle.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidParticle.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -28,8 +28,7 @@
 #include &quot;fourcc.h&quot;
 
 #include &quot;ADM_toolkit/toolkit.hxx&quot;
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 
 #include &quot;ADM_encoder/ADM_vidEncode.hxx&quot;
 #include &quot;ADM_encoder/adm_encoder.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidParticle.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidParticle.h	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidParticle.h	2008-04-24 17:36:16 UTC (rev 3980)
@@ -21,7 +21,6 @@
 #include &lt;algorithm&gt;
 #include &lt;math.h&gt;
 
-#include &quot;ADM_video/ADM_cache.h&quot;
 
 struct PARTICLE_PARAM
 {

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidPulldown.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidPulldown.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidPulldown.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -22,8 +22,7 @@
 
 #include &quot;ADM_default.h&quot;
 
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_video/ADM_vidFieldUtil.h&quot;
 #include &quot;ADM_vidPulldown.h&quot;
 #include &quot;ADM_video/ADM_interlaced.h&quot;
@@ -31,7 +30,6 @@
 #include &quot;ADM_osSupport/ADM_debugID.h&quot;
 #define MODULE_NAME MODULE_FILTER
 #include &quot;ADM_osSupport/ADM_debug.h&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
 
 
 static FILTER_PARAM swapParam={0,{&quot;&quot;}};

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidResampleFPS.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidResampleFPS.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidResampleFPS.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -20,11 +20,8 @@
 #include &quot;config.h&quot;
 #include &quot;ADM_default.h&quot;
 
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;DIA_enter.h&quot;
-#include &quot;ADM_video/ADM_cache.h&quot;
 #include &quot;DIA_factory.h&quot;
 
 static FILTER_PARAM ResampParam={2,{&quot;newfps&quot;,&quot;use_linear&quot;}};

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidResize.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidResize.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidResize.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -21,24 +21,15 @@
  *                                                                         *
  ***************************************************************************/
 
-#include &lt;stdio.h&gt;
-#include &lt;stdlib.h&gt;
-#include &lt;string.h&gt;
-#include &quot;ADM_assert.h&quot;
-
 #include &quot;config.h&quot;
-#include &quot;fourcc.h&quot;
-#include &quot;config.h&quot;
-#include &quot;avi_vars.h&quot;
+#include &quot;ADM_default.h&quot;
 #ifdef HAVE_ENCODER
 
 
 
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_resizebis.hxx&quot;
 #include &quot;ADM_video/ADM_vidCommonFilter.h&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
 
 
 static FILTER_PARAM mpresizeParam={3,{&quot;w&quot;,&quot;h&quot;,&quot;algo&quot;}};

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidReverse.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidReverse.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidReverse.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -9,14 +9,11 @@
 
 #include &quot;ADM_default.h&quot;
 
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
-#include&quot;ADM_video/ADM_cache.h&quot;
+#include &quot;ADM_videoFilter.h&quot;
 
 #include &quot;ADM_osSupport/ADM_debugID.h&quot;
 #define MODULE_NAME MODULE_FILTER
 #include &quot;ADM_osSupport/ADM_debug.h&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
 
 
 class AVDM_Reverse : public AVDMGenericVideoStream

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidRotate.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidRotate.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidRotate.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -15,18 +15,8 @@
  *                                                                         *
  ***************************************************************************/
 #include &quot;config.h&quot;
-#include &lt;stdio.h&gt;
-#include &lt;stdlib.h&gt;
-#include &lt;string.h&gt;
-
 #include &quot;ADM_default.h&quot;
-
-
-
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
-//#include &quot;ADM_video/ADM_vidRotate.h&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_assert.h&quot;
         
 #include &quot;DIA_factory.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSRT.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSRT.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSRT.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -20,8 +20,7 @@
 #ifdef USE_FREETYPE
 #include &quot;ADM_default.h&quot;
 #include &quot;DIA_coreToolkit.h&quot;
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 
 #include &quot;ADM_video/ADM_vidFont.h&quot;
 #include &quot;ADM_videoFilter/ADM_vidSRT.h&quot;
@@ -30,7 +29,6 @@
 #define MODULE_NAME MODULE_FILTER
 #include &quot;ADM_osSupport/ADM_debug.h&quot;
 
-#include &quot;ADM_filter/video_filters.h&quot;
 #include &quot;prefs.h&quot;
 
 static FILTER_PARAM subParam={15,{&quot;_fontsize&quot;,&quot;_subname&quot;,&quot;_fontname&quot;,&quot;_charset&quot;,

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSRTRender.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSRTRender.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSRTRender.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -23,8 +23,7 @@
 #include &quot;ADM_default.h&quot;
 
 
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 
 #include &quot;ADM_video/ADM_vidFont.h&quot;
 #include &quot;ADM_videoFilter/ADM_vidSRT.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSRTload.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSRTload.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSRTload.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -36,8 +36,7 @@
 
 #include &quot;ADM_default.h&quot;
 
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 
 #include &quot;ADM_video/ADM_vidFont.h&quot;
 #include &quot;ADM_videoFilter/ADM_vidSRT.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSeparateField.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSeparateField.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSeparateField.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -23,11 +23,9 @@
 #include &quot;ADM_default.h&quot;
 
 
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_video/ADM_vidFieldUtil.h&quot;
 #include &quot;ADM_vidSeparateField.h&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
 
 
 static FILTER_PARAM swapParam={0,{&quot;&quot;}};

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSeparateField.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSeparateField.h	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSeparateField.h	2008-04-24 17:36:16 UTC (rev 3980)
@@ -1,7 +1,6 @@
 /*
 
 */
-#include &quot;ADM_video/ADM_cache.h&quot;
   class  AVDMVideoSeparateField:public AVDMGenericVideoStream
  {
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSoften.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSoften.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSoften.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -19,8 +19,7 @@
 #include &quot;config.h&quot;
 #include &quot;ADM_default.h&quot;
 
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 
 #include &quot;ADM_osSupport/ADM_debugID.h&quot;
 #define MODULE_NAME MODULE_FILTER
@@ -28,8 +27,6 @@
 
 #include &quot;ADM_vidSoften.h&quot;
 #include &quot;DIA_enter.h&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
-
 #include &quot;DIA_factory.h&quot;
 
 static FILTER_PARAM softParam={3,{&quot;radius&quot;,&quot;luma&quot;,&quot;chroma&quot;}};

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidStabilize.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidStabilize.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidStabilize.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -20,10 +20,8 @@
 #include &quot;ADM_default.h&quot;
 
 
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_vidStabilize.h&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
 
 #include &quot;DIA_factory.h&quot;
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidStabilize.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidStabilize.h	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidStabilize.h	2008-04-24 17:36:16 UTC (rev 3980)
@@ -16,7 +16,6 @@
  ***************************************************************************/
 #ifndef __STABL__
 #define __STABL__   
-#include &quot;ADM_video/ADM_cache.h&quot; 
  class  ADMVideoStabilize:public AVDMGenericVideoStream
  {
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSwapFields.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSwapFields.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSwapFields.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -21,11 +21,9 @@
 #include &quot;ADM_default.h&quot;
 
 
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_video/ADM_vidFieldUtil.h&quot;
 #include &quot;ADM_vidSwapFields.h&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
 
 
 static FILTER_PARAM swapParam={0,{&quot;&quot;}};

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSwapSmart.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSwapSmart.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSwapSmart.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -21,15 +21,13 @@
 #include &quot;ADM_default.h&quot;
 
 
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_vidSwapSmart.h&quot;
 #include &quot;ADM_video/ADM_interlaced.h&quot;
 
 #include &quot;ADM_osSupport/ADM_debugID.h&quot;
 #define MODULE_NAME MODULE_FILTER
 #include &quot;ADM_osSupport/ADM_debug.h&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
 
 
 static FILTER_PARAM nullParam={0,{&quot;&quot;}};

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -31,8 +31,7 @@
 #include &quot;avi_vars.h&quot;
 
 #include &quot;ADM_toolkit/toolkit.hxx&quot;
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 
 #include &quot;ADM_encoder/ADM_vidEncode.hxx&quot;
 #include &quot;ADM_encoder/adm_encoder.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.h	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.h	2008-04-24 17:36:16 UTC (rev 3980)
@@ -20,7 +20,6 @@
 
 #include &lt;map&gt;
 
-#include &quot;ADM_video/ADM_cache.h&quot;
 
 //#include &lt;vector&gt;
 #include &lt;string&gt;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidTdeint.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidTdeint.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidTdeint.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -32,25 +32,15 @@
 */
 
 #include &quot;config.h&quot;
-#include &lt;stdio.h&gt;
-#include &lt;stdlib.h&gt;
-#include &lt;string.h&gt;
-#include &quot;ADM_assert.h&quot;
-
-#include &quot;config.h&quot;
-#include &quot;fourcc.h&quot;
 #include &quot;ADM_default.h&quot;
 #include &lt;math.h&gt;
 
 
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 
 #include &quot;ADM_osSupport/ADM_debugID.h&quot;
 #define MODULE_NAME MODULE_FILTER
 #include &quot;ADM_osSupport/ADM_debug.h&quot;
-#include &quot;ADM_video/ADM_cache.h&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
 #include &quot;DIA_factory.h&quot;
 
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidThreshold.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidThreshold.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidThreshold.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -16,13 +16,8 @@
  
 #include &quot;config.h&quot;
 #include &quot;ADM_default.h&quot;
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
-
-#include &quot;ADM_filter/video_filters.h&quot;
-
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;DIA_factory.h&quot;
-
 #include &quot;ADM_vidThreshold.h&quot;
 
 // #define THRESHOLD_HISTO 1

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidThreshold.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidThreshold.h	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidThreshold.h	2008-04-24 17:36:16 UTC (rev 3980)
@@ -17,7 +17,6 @@
 #ifndef __THRESHOLD__
 #define __THRESHOLD__   
 
-#include &quot;ADM_video/ADM_cache.h&quot;
 
 typedef struct THRESHOLD_PARAM
 {

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidUVSwap.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidUVSwap.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidUVSwap.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -14,13 +14,11 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-
+#include &quot;config.h&quot;
 #include &quot;ADM_default.h&quot;
 
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_vidUVSwap.h&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
 
 
 static FILTER_PARAM nullParam={0,{&quot;&quot;}};

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidUnblend.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidUnblend.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidUnblend.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -8,14 +8,11 @@
 #include &lt;math.h&gt;
 
 
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 
 #include &quot;ADM_osSupport/ADM_debugID.h&quot;
 #define MODULE_NAME MODULE_FILTER
 #include &quot;ADM_osSupport/ADM_debug.h&quot;
-#include &quot;ADM_video/ADM_cache.h&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
 #include &quot;ADM_vidUnblend_param.h&quot;
 
 class vidUnblend:public AVDMGenericVideoStream

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVlad.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVlad.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVlad.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -22,10 +22,8 @@
  ***************************************************************************/
 #include &quot;config.h&quot;
 #include &quot;ADM_default.h&quot;
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_vidVlad.h&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
 
 #include &quot;DIA_factory.h&quot;
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVlad.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVlad.h	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVlad.h	2008-04-24 17:36:16 UTC (rev 3980)
@@ -16,7 +16,6 @@
  ***************************************************************************/
 #ifndef __VLAD__
 #define __VLAD__   
-#include &quot;ADM_video/ADM_cache.h&quot; 
 typedef struct VLAD_PARAM
 {
 	uint32_t ythresholdMask;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVobSubRender.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVobSubRender.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVobSubRender.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -53,9 +53,7 @@
 #include &quot;avi_vars.h&quot;
 
 
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;DIA_fileSel.h&quot;
 #include &quot;ADM_colorspace/colorspace.h&quot;
 #include &quot;ADM_vobsubinfo.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVobsub.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVobsub.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVobsub.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -20,32 +20,12 @@
  *                                                                         *
  ***************************************************************************/
 
-#include &lt;stdio.h&gt;
-#include &lt;stdlib.h&gt;
-#include &lt;string.h&gt;
-#include &lt;math.h&gt;
-#include &quot;ADM_assert.h&quot;
-
 #include &quot;config.h&quot;
-#include &quot;fourcc.h&quot;
-
-#include &quot;config.h&quot;
-#include &quot;avi_vars.h&quot;
-
-
-
-
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
-
-
+#include &quot;ADM_default.h&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;DIA_fileSel.h&quot;
-
 #include &quot;ADM_colorspace/colorspace.h&quot;
-
 #include &quot;ADM_vobsubinfo.h&quot;
-
 #define VOBSUB &quot;/capture/sub/phone.sub&quot;
 
 #include &quot;ADM_vidVobSub.h&quot;
@@ -53,8 +33,8 @@
 #include &quot;ADM_osSupport/ADM_debugID.h&quot;
 #define MODULE_NAME MODULE_FILTER
 #include &quot;ADM_osSupport/ADM_debug.h&quot;
+#include &lt;math.h&gt;
 
-
 extern uint8_t DIA_vobsub(vobSubParam *param);
 
 static FILTER_PARAM vobsubParam={3,{&quot;subname&quot;,&quot;index&quot;,&quot;subShift&quot;}};

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidWhirl.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidWhirl.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidWhirl.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -20,15 +20,13 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include &quot;config.h&quot;
 #include &quot;ADM_default.h&quot;
 #include &lt;math.h&gt;
 //#define LOOP
 
+#include &quot;ADM_videoFilter.h&quot;
 
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
-
 static void Process(uint8_t *src,uint8_t *data, uint32_t width, uint32_t height,double frac);
 
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidYadif.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidYadif.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidYadif.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -28,11 +28,9 @@
 #include &quot;config.h&quot;
 #include &quot;ADM_default.h&quot;
 
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
-#include &quot;ADM_video/ADM_cache.h&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
 
+#include &quot;ADM_videoFilter.h&quot;
+
 #include &quot;DIA_factory.h&quot;
 //************************************************
 #define MIN(a,b) ((a) &gt; (b) ? (b) : (a))

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vobsubinfo.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vobsubinfo.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vobsubinfo.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -18,9 +18,7 @@
  *                                                                         *
  ***************************************************************************/
 
-#include &lt;stdio.h&gt;
-#include &lt;stdlib.h&gt;
-#include &lt;string.h&gt;
+#include &quot;config.h&quot;
 
 #include &quot;ADM_default.h&quot;
 #include &quot;ADM_vobsubinfo.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADMmpdetc.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADMmpdetc.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADMmpdetc.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -21,8 +21,7 @@
 #include &quot;fourcc.h&quot;
 
 #include &quot;ADM_toolkit/toolkit.hxx&quot;
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_video/ADM_mpdetc.h&quot;
 
 #include &quot;ADM_osSupport/ADM_debugID.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt	2008-04-24 17:36:16 UTC (rev 3980)
@@ -55,6 +55,7 @@
 INCLUDE_DIRECTORIES(&quot;${CMAKE_BINARY_DIR}/config&quot;)
 INCLUDE_DIRECTORIES(&quot;${CMAKE_CURRENT_SOURCE_DIR}/ADM_core/include&quot;)
 INCLUDE_DIRECTORIES(&quot;${CMAKE_CURRENT_SOURCE_DIR}/ADM_coreUI/include&quot;)
+INCLUDE_DIRECTORIES(&quot;${CMAKE_CURRENT_SOURCE_DIR}/ADM_coreImage/include&quot;)
 INCLUDE_DIRECTORIES(&quot;${CMAKE_CURRENT_SOURCE_DIR}/ADM_libraries/ADM_utilities&quot;)
 INCLUDE_DIRECTORIES(&quot;${CMAKE_CURRENT_SOURCE_DIR}/ADM_libraries/ADM_ffmpeg/ADM_lavutil&quot;)
 INCLUDE_DIRECTORIES(&quot;${CMAKE_CURRENT_SOURCE_DIR}/ADM_libraries/ADM_ffmpeg/ADM_lavcodec&quot;)
@@ -306,6 +307,8 @@
 ADD_LIB_ALL_TARGETS(ADM_core)
 ADD_SUBDIRECTORY(ADM_coreUI)
 ADD_LIB_ALL_TARGETS(ADM_coreUI)
+ADD_SUBDIRECTORY(ADM_coreImage)
+ADD_LIB_ALL_TARGETS(ADM_coreImage)
 
 ###########################################
 # External libs

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/gtk_gui.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/gtk_gui.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/gtk_gui.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -55,8 +55,8 @@
 #include &quot;DIA_factory.h&quot;
 #include &quot;DIA_enter.h&quot;
 
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
+#include &quot;ADM_videoFilter.h&quot;
+#include &quot;ADM_videoFilter_internal.h&quot;
 #include &quot;ADM_encoder/ADM_vidEncode.hxx&quot;
 #include &quot;ADM_codecs/ADM_ffmpeg.h&quot;
 #include &quot;ADM_libraries/ADM_libmpeg2enc/ADM_mpeg2enc.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/gui_navigate.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/gui_navigate.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/gui_navigate.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -34,8 +34,8 @@
 #include &quot;DIA_coreToolkit.h&quot;
 #include &quot;ADM_userInterfaces/ADM_commonUI/GUI_render.h&quot;
 #include &quot;ADM_userInterfaces/ADM_commonUI/DIA_working.h&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
+#include &quot;ADM_videoFilter.h&quot;
+#include &quot;ADM_videoFilter_internal.h&quot;
 #include &quot;ADM_userInterfaces/ADM_commonUI/DIA_busy.h&quot;
 #include &quot;ADM_userInterfaces/ADM_commonUI/GUI_ui.h&quot;
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/gui_savenew.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/gui_savenew.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/gui_savenew.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -25,7 +25,8 @@
 #include &quot;ADM_audio/aviaudio.hxx&quot;
 #include &quot;ADM_audiofilter/audioprocess.hxx&quot;
 
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter.h&quot;
+#include &quot;ADM_videoFilter_internal.h&quot;
 //#include &quot;ADM_codecs/ADM_divxEncode.h&quot;
 #include &quot;ADM_encoder/ADM_vidEncode.hxx&quot;
 
@@ -38,8 +39,8 @@
 
 #include &quot;ADM_outputs/oplug_avi/op_saveprocess.h&quot;
 #include &quot;ADM_outputs/oplug_avi/op_savesmart.hxx&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
 
+
 #include &quot;DIA_fileSel.h&quot;
 #include &quot;ADM_userInterfaces/ADM_commonUI/GUI_ui.h&quot;
 #include &quot;ADM_outputs/oplug_mpegFF/oplug_vcdff.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/guiplay.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/guiplay.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/guiplay.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -33,9 +33,8 @@
 #include &quot;DIA_coreToolkit.h&quot;
 #include &quot;ADM_audio/aviaudio.hxx&quot;
 #include &quot;ADM_audiofilter/audioprocess.hxx&quot;
-
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
+#include &quot;ADM_videoFilter.h&quot;
+#include &quot;ADM_videoFilter_internal.h&quot;
 #include &quot;gtkgui.h&quot;
 #include &quot;ADM_userInterfaces/ADM_commonUI/GUI_render.h&quot;
 #include &quot;ADM_audiofilter/audioeng_buildfilters.h&quot;


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001240.html">[Avidemux-svn-commit] r3979 - in	branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264:	. qt4
</A></li>
	<LI>Next message: <A HREF="001242.html">[Avidemux-svn-commit] r3981 - in	branches/avidemux_2.4_branch/avidemux: ADM_outputs/oplug_avi	ADM_userInterfaces/ADM_GTK/ADM_dialog	ADM_userInterfaces/ADM_commonUI
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1241">[ date ]</a>
              <a href="thread.html#1241">[ thread ]</a>
              <a href="subject.html#1241">[ subject ]</a>
              <a href="author.html#1241">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">More information about the Avidemux-svn-commit
mailing list</a><br>
</body></html>
