From mean at mail.berlios.de  Sun Mar  2 16:29:56 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 2 Mar 2008 16:29:56 +0100
Subject: [Avidemux-svn-commit] r3812 - in
	branches/avidemux_2.5_branch_mean/avidemux: .
	ADM_core/include ADM_core/src ADM_editor
	ADM_inputs/ADM_inpics ADM_inputs/ADM_mpegdemuxer
	ADM_libraries/ADM_lavformat ADM_libraries/ADM_utilities
	ADM_script ADM_toolkit ADM_userInterfaces/ADM_GTK/ADM_dialog
	ADM_userInterfaces/ADM_GTK/ADM_gui2
	ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk
	ADM_userInterfaces/ADM_QT4/ADM_dialog
	ADM_userInterfaces/ADM_QT4/ADM_gui
Message-ID: <200803021529.m22FTuho002213@sheep.berlios.de>

Author: mean
Date: 2008-03-02 16:29:54 +0100 (Sun, 02 Mar 2008)
New Revision: 3812

Modified:
   branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_assert.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_misc.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_fileio.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_misc.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_editor/ADM_edLoadSave.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_inpics/ADM_pics.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_indexer.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_lavformat/ADM_lavformat.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/prefs.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_script/ADM_JSAvidemuxAudio.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_script/ADM_JSFunctions.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_toolkit/filesel.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_jobs.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/Q_gui2.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/file_qt4.cpp
   branches/avidemux_2.5_branch_mean/avidemux/gtk_gui.cpp
Log:
[Core] Commented & prefixed core functions


Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_assert.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_assert.h	2008-02-29 18:35:39 UTC (rev 3811)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_assert.h	2008-03-02 15:29:54 UTC (rev 3812)
@@ -96,15 +96,16 @@
 }
 #endif
 // Compatibility with fprintf etc.. with long long & win32
+// ADM_cleanupPath returns a cleaned up copy of the parameter
 #ifdef ADM_WIN32
         #define LLX "I64x"
         #define LLU "I64u"
         
-        #define cleanupPath(x) slashToBackSlash(x)
+        #define ADM_cleanupPath(x) ADM_slashToBackSlash(x)
 #else
         #define LLX "llx"
         #define LLU "llu"
-        #define cleanupPath(x) ADM_strdup(x)
+        #define ADM_cleanupPath(x) ADM_strdup(x)
 #endif
 
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_misc.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_misc.h	2008-02-29 18:35:39 UTC (rev 3811)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_misc.h	2008-03-02 15:29:54 UTC (rev 3812)
@@ -26,14 +26,20 @@
 } ADM_date;
 
 void            TLK_getDate(ADM_date *date);
-void            PathSplit(char *str, char **root, char **ext);
-void	        PathStripName(char *str);
-const char      *GetFileName(const char *str);
-char            *PathCanonize(const char *tmpname);
-void            LowerCase(char *string);
+// /dir/file.ext -> /dir/file and ext returned values are copies
+void            ADM_PathSplit(char *str, char **root, char **ext);
+// Returns path only /foo/bar.avi -> /foo INPLACE, no copy done
+void	        ADM_PathStripName(char *str);
+// Get the filename without path. /foo/bar.avi -> bar.avi INPLACE, NO COPY
+const char      *ADM_GetFileName(const char *str);
+//  Canonize the path, returns a copy of the absolute path given as parameter
+char            *ADM_PathCanonize(const char *tmpname);
+// change to lower case in place the string
+void            ADM_LowerCase(char *string);
+
 uint32_t        getTime( int called );;
 uint32_t 	getTimeOfTheDay(void);
-extern char *slashToBackSlash(char *in);
+//extern char *slashToBackSlash(char *in);
 #ifdef HAVE_GETTIMEOFDAY
 	#define TIMZ struct timezone
 #else

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_fileio.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_fileio.cpp	2008-02-29 18:35:39 UTC (rev 3811)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_fileio.cpp	2008-03-02 15:29:54 UTC (rev 3812)
@@ -172,10 +172,11 @@
 	}
 }
 
-//
-//	Make it absolute
-//
-char *PathCanonize(const char *tmpname)
+/**
+        \fn ADM_PathCanonize
+        \brief Canonize the path, returns a copy of the absolute path given as parameter
+*/
+char *ADM_PathCanonize(const char *tmpname)
 {
 	char path[300];
 	char *out ;
@@ -218,11 +219,12 @@
 	simplify_path(&out);
 	return out;
 }
-/*
-	Strip the path and only keep the name
+/**
+        \fn ADM_PathStripName
+	\brief Returns path only /foo/bar.avi -> /foo INPLACE, no copy done
 
 */
-void		PathStripName(char *str)
+void		ADM_PathStripName(char *str)
 {
 		int len=strlen(str);
 		if(len<=1) return;
@@ -238,11 +240,12 @@
 		}
 }
 
-/*
-	Get the filename without path
+/**
+    \fn ADM_GetFileName
+    \brief Get the filename without path. /foo/bar.avi -> bar.avi INPLACE, NO COPY
 
 */
-const char *GetFileName(const char *str)
+const char *ADM_GetFileName(const char *str)
 {
 	char *filename;
         char *filename2;
@@ -263,16 +266,17 @@
 		return str;
 }
 
-/*
-	Split patch into absolute path+name and extention
+/**
+    \fn ADM_PathSplit
+    \brief Split path into absolute path+name and extention i.e. /foo/bar/zee.avi -> /foo/bar/zee,avi.             Copy are returned
 
 */
-void PathSplit(char *str, char **root, char **ext)
+void ADM_PathSplit(char *str, char **root, char **ext)
 {
 	char *full;
 	uint32_t l;
 
-		full=PathCanonize(str);
+		full=ADM_PathCanonize(str);
 		// Search the last .
 		l=strlen(full);
 		l--;

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_misc.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_misc.cpp	2008-02-29 18:35:39 UTC (rev 3811)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_misc.cpp	2008-03-02 15:29:54 UTC (rev 3812)
@@ -205,8 +205,11 @@
 }
 
 
-// Convert everything to lowercase
-void  LowerCase(char *string)
+/**
+        \fn ADM_LowerCase
+        \brief change to lower case in place the string
+*/
+void  ADM_LowerCase(char *string)
 {
   int l=strlen(string)-1;
         for(int i=l;i>=0;i--)
@@ -233,7 +236,7 @@
     This function convert the later to the former
 
 */
-extern char *slashToBackSlash(char *in)
+extern char *ADM_slashToBackSlash(char *in)
 {
     char *out,*cout;
     int n;

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_editor/ADM_edLoadSave.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_editor/ADM_edLoadSave.cpp	2008-02-29 18:35:39 UTC (rev 3811)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_editor/ADM_edLoadSave.cpp	2008-03-02 15:29:54 UTC (rev 3812)
@@ -109,7 +109,7 @@
 
   for (uint32_t i = 0; i < _nb_video; i++)
     {
-        nm=cleanupPath(_videos[i]._aviheader->getMyName() );
+        nm=ADM_cleanupPath(_videos[i]._aviheader->getMyName() );
         if(vop)
         {
           qfprintf(fd,"app.forceUnpack();\n");
@@ -175,7 +175,7 @@
         qfprintf(fd,"\n//** Video Codec conf **\n");
         videoCodecGetConf(&extraDataSize,&extraData);
         
-        pth= cleanupPath(name );
+        pth= ADM_cleanupPath(name );
         qfprintf(fd,"app.video.codec(\"%s\",\"%s\",\"",videoCodecGetName(),videoCodecGetMode());
         ADM_dealloc(pth);
         // Now deal with extra data
@@ -210,7 +210,7 @@
 
         if(source!=AudioAvi)
         {
-                char *nm=cleanupPath(audioName);
+                char *nm=ADM_cleanupPath(audioName);
                 qfprintf(fd,"app.audio.load(\"%s\",\"%s\");\n", audioSourceFromEnum(source),nm); 
                 ADM_dealloc(nm);
         }
@@ -273,7 +273,7 @@
   qfprintf(fd,"app.setContainer(\"%s\");\n",getCurrentContainerAsString());
   if(outputname)
   {
-        char *o=cleanupPath(outputname);
+        char *o=ADM_cleanupPath(outputname);
         qfprintf(fd,"setSuccess(app.save(\"%s\"));\n",o);
         ADM_dealloc(o);
   }

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_inpics/ADM_pics.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_inpics/ADM_pics.cpp	2008-02-29 18:35:39 UTC (rev 3811)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_inpics/ADM_pics.cpp	2008-03-02 15:29:54 UTC (rev 3812)
@@ -161,7 +161,7 @@
     // Then spit the name in name and extension
     char *name;
     char *extension;
-    PathSplit(inname, &name, &extension);
+    ADM_PathSplit(inname, &name, &extension);
 
 
     nnum = 1;

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_indexer.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_indexer.cpp	2008-02-29 18:35:39 UTC (rev 3811)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_indexer.cpp	2008-03-02 15:29:54 UTC (rev 3812)
@@ -75,7 +75,7 @@
         DIA_progressIndexing *work;
         dmx_demuxer *demuxer;
 
-        char *realname=PathCanonize(mpeg);
+        char *realname=ADM_PathCanonize(mpeg);
         FILE *out;        
         DMX_TYPE mpegType;
         uint8_t  mpegTypeChar;

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_lavformat/ADM_lavformat.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_lavformat/ADM_lavformat.cpp	2008-02-29 18:35:39 UTC (rev 3811)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_lavformat/ADM_lavformat.cpp	2008-03-02 15:29:54 UTC (rev 3812)
@@ -227,7 +227,7 @@
                         // probably a memeleak here
                         char *foo=ADM_strdup(filename);
                         
-                        strcpy(oc->title,GetFileName(foo));
+                        strcpy(oc->title,ADM_GetFileName(foo));
                         strcpy(oc->author,"Avidemux");
                         c->sample_aspect_ratio.num=1;
                         c->sample_aspect_ratio.den=1;

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/prefs.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/prefs.cpp	2008-02-29 18:35:39 UTC (rev 3811)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/prefs.cpp	2008-03-02 15:29:54 UTC (rev 3812)
@@ -33,7 +33,6 @@
 #undef free
 extern char *ADM_getBaseDir(void);
 #define CONFIG "config"
-extern char *PathCanonize(const char *tmpname);
 extern int  qxmlSaveFormatFile(const char *filename, xmlDocPtr cur, int format);
 static char *checkDirAccess(char *home);
 extern char *ADM_escape(const ADM_filename *incoming);
@@ -839,7 +838,7 @@
 		fprintf(stderr,"Prefs: set_lastfile(NULL) called\n");
 		return RC_FAILED;
 	}
-	internal_file = PathCanonize(file);
+	internal_file = ADM_PathCanonize(file);
 	if( !internal_file ){
 		fprintf(stderr,"Prefs: set_lastfile(): PathCanonize() returns NULL\n");
 		return RC_FAILED;

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_script/ADM_JSAvidemuxAudio.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_script/ADM_JSAvidemuxAudio.cpp	2008-02-29 18:35:39 UTC (rev 3811)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_script/ADM_JSAvidemuxAudio.cpp	2008-03-02 15:29:54 UTC (rev 3812)
@@ -373,7 +373,7 @@
         if(JSVAL_IS_STRING(argv[0]) == false || JSVAL_IS_INT(argv[1]) == false || JSVAL_IS_INT(argv[2]) == false  ||  JSVAL_IS_STRING(argv[3]) == false  )
                 return JS_FALSE;
         char *name = JS_GetStringBytes(JSVAL_TO_STRING(argv[0]));
-        LowerCase(name);
+        ADM_LowerCase(name);
         enterLock();
         // First search the codec by its name
         if(!audioCodecSetByName(name))
@@ -454,7 +454,7 @@
                 return JS_FALSE;
         // First arg is MP3 etc...
         char *name = JS_GetStringBytes(JSVAL_TO_STRING(argv[0]));
-        LowerCase(name);
+        ADM_LowerCase(name);
         // First search the codec by its name
         AudioSource source;
         if(AudioInvalid==(source=audioCodecGetFromName(name)))

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_script/ADM_JSFunctions.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_script/ADM_JSFunctions.cpp	2008-02-29 18:35:39 UTC (rev 3811)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_script/ADM_JSFunctions.cpp	2008-03-02 15:29:54 UTC (rev 3812)
@@ -490,7 +490,7 @@
     return JS_FALSE;
   char *name=NULL;
   char *orgName = JS_GetStringBytes(JSVAL_TO_STRING(argv[0]));
-  PathStripName(orgName);
+  ADM_PathStripName(orgName);
   /* Remove last / or last \ */
   int l=strlen(orgName);
   if(l) orgName[l-1]=0;

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_toolkit/filesel.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_toolkit/filesel.h	2008-02-29 18:35:39 UTC (rev 3811)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_toolkit/filesel.h	2008-03-02 15:29:54 UTC (rev 3812)
@@ -30,7 +30,7 @@
 char *ADM_getCustomDir(void);
 
 uint8_t buildDirectoryContent(uint32_t *outnb,const char *base, char *jobName[],int maxElems,const char *ext);
-const char *GetFileName(const char *str);
+//const char *GetFileName(const char *str);
 
 #endif
 //EOF

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp	2008-02-29 18:35:39 UTC (rev 3811)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp	2008-03-02 15:29:54 UTC (rev 3812)
@@ -152,7 +152,7 @@
                         case COMMAND_DELETE: 
                                         sel=getSelection(jobs.dialog);
                                         if(sel>=jobs.nb) break;
-                                        if(GUI_Confirmation_HIG(QT_TR_NOOP("Sure!"),QT_TR_NOOP("Delete job"),QT_TR_NOOP("Are you sure you want to delete %s job ?"),GetFileName(jobs.name[sel])))
+                                        if(GUI_Confirmation_HIG(QT_TR_NOOP("Sure!"),QT_TR_NOOP("Delete job"),QT_TR_NOOP("Are you sure you want to delete %s job ?"),ADM_GetFileName(jobs.name[sel])))
                                         {
                                                 jobs.status[sel].status=STATUS_DELETED;
                                         }
@@ -202,7 +202,7 @@
         {
                 sprintf(str1,"<span weight=\"heavy\"> %s </span>\n" 
                "<span size=\"smaller\" style=\"oblique\" > %s </span> "
-                ,GetFileName(jobs.name[i]),QT_TR_NOOP(StringStatus[jobs.status[i].status]));
+                ,ADM_GetFileName(jobs.name[i]),QT_TR_NOOP(StringStatus[jobs.status[i].status]));
 
                 date=&(jobs.status[i].startDate);
                 sprintf(str2,"%02d:%02d:%02d",date->hours,

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp	2008-02-29 18:35:39 UTC (rev 3811)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp	2008-03-02 15:29:54 UTC (rev 3812)
@@ -625,7 +625,7 @@
 
   for(int i=0;i<ADM_nbCustom;i++)
   {
-    go = gtk_menu_item_new_with_mnemonic (GetFileName(customNames[i]));
+    go = gtk_menu_item_new_with_mnemonic (ADM_GetFileName(customNames[i]));
     gtk_widget_show (go);
     gtk_container_add (GTK_CONTAINER (menu), go);
     rank=ACT_CUSTOM_BASE+i;

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp	2008-02-29 18:35:39 UTC (rev 3811)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp	2008-03-02 15:29:54 UTC (rev 3812)
@@ -35,8 +35,8 @@
 extern char * actual_workbench_file;
 
 static void GUI_FileSel(const char *label, SELFILE_CB * cb, int rw, char **name=NULL);
-char            *PathCanonize(const char *tmpname);
-void            PathStripName(char *str);
+char            *ADM_PathCanonize(const char *tmpname);
+void            ADM_PathStripName(char *str);
 uint8_t         initFileSelector(void);
 
 static GtkFileFilter   *filter_avi=NULL,*filter_mpeg=NULL,*filter_image=NULL,*filter_all=NULL;
@@ -159,8 +159,8 @@
                 else // new file
 #endif
                 {
-                    dupe=PathCanonize(source);
-                    PathStripName(dupe);
+                    dupe=ADM_PathCanonize(source);
+                    ADM_PathStripName(dupe);
                     gtk_file_chooser_set_current_folder(GTK_FILE_CHOOSER(dialog),(gchar *)dupe);
                     gtk_file_chooser_set_current_name(GTK_FILE_CHOOSER(dialog),
                                                       (gchar *)(source + strlen(dupe)));
@@ -174,7 +174,7 @@
 		if( prefs->get(LASTDIR_WRITE,(ADM_filename **)&tmpname))
 		{
 			
-			dupe=PathCanonize(tmpname);
+			dupe=ADM_PathCanonize(tmpname);
 
 			if( (dir=opendir(dupe)) )
 			{
@@ -238,8 +238,8 @@
         /* Set default dir if provided ..*/
         if(source)
         {
-                dupe=PathCanonize(source);
-                PathStripName(dupe);
+                dupe=ADM_PathCanonize(source);
+                ADM_PathStripName(dupe);
                 if( (dir=opendir(dupe)) )
                         {
                                 closedir(dir);
@@ -254,8 +254,8 @@
                 {
                         
         
-                        dupe=PathCanonize(tmpname);
-                        PathStripName(dupe);
+                        dupe=ADM_PathCanonize(tmpname);
+                        ADM_PathStripName(dupe);
   
                         if( (dir=opendir(dupe)) )
                         {
@@ -329,7 +329,7 @@
 
 					char msg[300];
 
-					snprintf(msg, 300, QT_TR_NOOP("%s already exists.\n\nDo you want to replace it?"), GetFileName(name));
+					snprintf(msg, 300, QT_TR_NOOP("%s already exists.\n\nDo you want to replace it?"), ADM_GetFileName(name));
 
                                         if(!GUI_Question(msg))
 						return;
@@ -439,8 +439,8 @@
         if(res)
 	{
                 DIR *dir;
-                char *str=PathCanonize(tmpname);
-                PathStripName(str);
+                char *str=ADM_PathCanonize(tmpname);
+                ADM_PathStripName(str);
 
                 /* LASTDIR may have gone; then do nothing and use current dir instead (implied) */
                 if( (dir=opendir(str)) )
@@ -466,8 +466,8 @@
                 {
                         name=ADM_strdup(selected_filename);
 
-                        char *str=PathCanonize(name);
-                        PathStripName(str);
+                        char *str=ADM_PathCanonize(name);
+                        ADM_PathStripName(str);
                         if(rw)
                                 prefs->set(LASTDIR_WRITE,(ADM_filename *)str);			
                         else

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_jobs.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_jobs.cpp	2008-02-29 18:35:39 UTC (rev 3811)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_jobs.cpp	2008-03-02 15:29:54 UTC (rev 3812)
@@ -144,7 +144,7 @@
    for(int i=0;i<_nbJobs;i++)
    {
       j=&(desc[i]);
-      ADM_setText(GetFileName(_jobsName[i]),0,i,WIDGET(tableWidget));
+      ADM_setText(ADM_GetFileName(_jobsName[i]),0,i,WIDGET(tableWidget));
       ADM_setText(StringStatus[j->status],1,i,WIDGET(tableWidget));
       
       sprintf(str,"%02u:%02u:%02u",j->startDate.hours,j->startDate.minutes,j->startDate.seconds);
@@ -168,7 +168,7 @@
 {
   int sel=WIDGET(tableWidget)->currentRow();
         if(sel<=0 || sel>=_nbJobs) return 0;
-        if(GUI_Confirmation_HIG(QT_TR_NOOP("Sure!"),QT_TR_NOOP("Delete job"),QT_TR_NOOP("Are you sure you want to delete %s job ?"),GetFileName(_jobsName[sel])))
+        if(GUI_Confirmation_HIG(QT_TR_NOOP("Sure!"),QT_TR_NOOP("Delete job"),QT_TR_NOOP("Are you sure you want to delete %s job ?"),ADM_GetFileName(_jobsName[sel])))
         {
                 desc[sel].status=STATUS_DELETED;
         }

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/Q_gui2.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/Q_gui2.cpp	2008-02-29 18:35:39 UTC (rev 3811)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/Q_gui2.cpp	2008-03-02 15:29:54 UTC (rev 3812)
@@ -528,7 +528,7 @@
 
 		for(int i=0; i < ADM_nbCustom; i++)
 		{
-			customActions[i] = new QAction(GetFileName(customNames[i]), NULL);
+			customActions[i] = new QAction(ADM_GetFileName(customNames[i]), NULL);
 			ui.menuCustom->addAction(customActions[i]);
 			connect(customActions[i], SIGNAL(triggered()), this, SLOT(custom()));
 		}

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/file_qt4.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/file_qt4.cpp	2008-02-29 18:35:39 UTC (rev 3811)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/file_qt4.cpp	2008-03-02 15:29:54 UTC (rev 3812)
@@ -72,8 +72,8 @@
   if(prefs->get(pref_entry,(ADM_filename **)&tmpname))
   {
      DIR *dir;
-        str=PathCanonize(tmpname);
-        PathStripName(str);
+        str=ADM_PathCanonize(tmpname);
+        ADM_PathStripName(str);
         /* LASTDIR may have gone; then do nothing and use current dir instead (implied) */
         if( (dir=opendir(str)) )
         {

Modified: branches/avidemux_2.5_branch_mean/avidemux/gtk_gui.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/gtk_gui.cpp	2008-02-29 18:35:39 UTC (rev 3811)
+++ branches/avidemux_2.5_branch_mean/avidemux/gtk_gui.cpp	2008-03-02 15:29:54 UTC (rev 3812)
@@ -915,7 +915,7 @@
   /*
   ** we may get a relative path by cmdline
   */
-  longname = PathCanonize(name);
+  longname = ADM_PathCanonize(name);
   if (mode)
     res = video_body->addFile (longname, 1);
   else
@@ -1302,7 +1302,7 @@
                         return;
                 }
         // Split name into base + extension
-        PathSplit(name,&name,&ext);
+        ADM_PathSplit(name,&name,&ext);
         
         src=new ADMImage(avifileinfo->width,avifileinfo->height);
         ADM_assert(src);
@@ -1343,9 +1343,9 @@
   ADMImage image(avifileinfo->width,avifileinfo->height);
   GUI_getFrameContent(&image, curframe);
   if(image.saveAsBmp(name))
-        GUI_Info_HIG (ADM_LOG_INFO,QT_TR_NOOP("Done"),QT_TR_NOOP( "Saved \"%s\"."), GetFileName(name));
+        GUI_Info_HIG (ADM_LOG_INFO,QT_TR_NOOP("Done"),QT_TR_NOOP( "Saved \"%s\"."), ADM_GetFileName(name));
   else
-        GUI_Error_HIG (QT_TR_NOOP("BMP op failed"),QT_TR_NOOP( "Saving %s as a BMP file failed."), GetFileName(name));
+        GUI_Error_HIG (QT_TR_NOOP("BMP op failed"),QT_TR_NOOP( "Saving %s as a BMP file failed."), ADM_GetFileName(name));
 }
 
 //_____________________________________________________________
@@ -1792,7 +1792,7 @@
 
 void A_parseECMAScript(const char *name){
   bool ret;
-  char *longname = PathCanonize(name);
+  char *longname = ADM_PathCanonize(name);
    if (playing){
       GUI_PlayAvi();
       curframe = 0;
@@ -2275,11 +2275,11 @@
 
         if(A_Save(name))
         {
-          GUI_Info_HIG (ADM_LOG_INFO,QT_TR_NOOP("Done"),QT_TR_NOOP( "File %s has been successfully saved."),GetFileName(name));
+          GUI_Info_HIG (ADM_LOG_INFO,QT_TR_NOOP("Done"),QT_TR_NOOP( "File %s has been successfully saved."),ADM_GetFileName(name));
         }
         else
         {
-          GUI_Error_HIG (QT_TR_NOOP("Failed"), QT_TR_NOOP("File %s was NOT saved correctly."),GetFileName(name));
+          GUI_Error_HIG (QT_TR_NOOP("Failed"), QT_TR_NOOP("File %s was NOT saved correctly."),ADM_GetFileName(name));
         }
         return 1;
 }



From gruntster at mail.berlios.de  Sun Mar  2 17:01:33 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Sun, 2 Mar 2008 17:01:33 +0100
Subject: [Avidemux-svn-commit] r3813 - in
 branches/avidemux_2.5_branch_gruntster: . avidemux avidemux/ADM_audio
 avidemux/ADM_audiodevice avidemux/ADM_audiofilter avidemux/ADM_editor
 avidemux/ADM_filter avidemux/ADM_inputs/ADM_avsproxy
 avidemux/ADM_inputs/ADM_inpics avidemux/ADM_inputs/ADM_mpegdemuxer
 avidemux/ADM_inputs/ADM_openDML avidemux/ADM_libraries/ADM_lavcodec
 avidemux/ADM_libraries/ADM_lavcodec/i386
 avidemux/ADM_libraries/ADM_lavformat avidemux/ADM_libraries/ADM_libwrapper
 avidemux/ADM_libraries/ADM_mplex avidemux/ADM_libraries/ADM_smjs
 avidemux/ADM_libraries/ADM_utilities avidemux/ADM_osSupport
 avidemux/ADM_outputs/oplug_avi avidemux/ADM_outputs/oplug_dummy
 avidemux/ADM_outputs/oplug_flv avidemux/ADM_outputs/oplug_mp4
 avidemux/ADM_outputs/oplug_mpeg avidemux/ADM_outputs/oplug_mpegFF
 avidemux/ADM_requant avidemux/ADM_script avidemux/ADM_toolkit
 avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog
 avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory
 avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2 !
 avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk
 avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog
 avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui
 avidemux/ADM_userInterfaces/ADM_commonUI avidemux/ADM_videoFilter cmake
Message-ID: <200803021601.m22G1XN1005014@sheep.berlios.de>

Author: gruntster
Date: 2008-03-02 17:00:49 +0100 (Sun, 02 Mar 2008)
New Revision: 3813

Modified:
   branches/avidemux_2.5_branch_gruntster/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_assert.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audio/audio_packetizer.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/ADM_audiodevice.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/ADM_deviceArts.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/ADM_deviceEsd.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/ADM_deviceJack.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/ADM_deviceWin32.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/ADM_deviceWin32.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/ADM_deviceoss.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/audio_out.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiofilter_normalize.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edit.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter_declaration.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter_dylib.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_avsproxy/ADM_avsproxy_net.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_inpics/bitmap.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_video.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_odml_audio.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_odml_odml.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_openDML.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_riff.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavcodec/fft.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavcodec/i386/dsputil_mmx.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavformat/ADM_lavformat.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libwrapper/libwrapper.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libwrapper/libwrapper.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libwrapper/libwrapper_amrnb.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libwrapper/libwrapper_dca.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mplexin.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mplexmuxer.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mthread.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/cpu_accel.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_smjs/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_gettext.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_imageUtils.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/avifmt.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/avifmt2.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/default.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/prefs.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_cpuCap.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_crashdump.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_fileio.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_misc.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_misc.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_quota.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/TLK_clock.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/win32.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisave.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_pack.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_unpack.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavedual.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_aviwrite.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_savesmart.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_requant/tcrequant.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSAvidemux.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSFunctions.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSGlobal.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/DirectorySearch.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/DirectorySearch.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/StdFile.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_toolkit/automation.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_toolkit/bitmap.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_integer.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_gtkRender.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/eggtray_win32.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/eggtrayicon.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/toolkit.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/toolkit_dialog.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_encoding.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/T_preview.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/GUI_render.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/GUI_render.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/GUI_sdlRender.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidAnimated.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidParticle.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidParticle.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSRTload.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/avi_vars.h
   branches/avidemux_2.5_branch_gruntster/avidemux/gtk_gui.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/gui_savenew.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/guiplay.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/main.cpp
   branches/avidemux_2.5_branch_gruntster/cmake/config.h.cmake
Log:
[CMake] Cygwin support and removal of ADM_WIN32 and WIN32_CLASH

Modified: branches/avidemux_2.5_branch_gruntster/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/CMakeLists.txt	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/CMakeLists.txt	2008-03-02 16:00:49 UTC (rev 3813)
@@ -41,13 +41,17 @@
 
 IF (ADM_OS_WINDOWS)
 	SET(CYG_MANGLING 1)
-	SET(ADM_WIN32 1)	# needs to be removed one day...
 ENDIF (ADM_OS_WINDOWS)
 
 IF (ADM_OS_DARWIN)
 	SET(CYG_MANGLING 1)
 ENDIF (ADM_OS_DARWIN)
 
+IF (CYGWIN)
+	SET(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -mwin32")
+	SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -mwin32")
+ENDIF (CYGWIN)
+
 IF (ADM_OS_LINUX)
 	SET(USE_JOG 1)		# jog shuttle is only available on Linux due to its interface
 ENDIF (ADM_OS_LINUX)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_assert.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_assert.h	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_assert.h	2008-03-02 16:00:49 UTC (rev 3813)
@@ -62,7 +62,7 @@
 }
 #endif
 // Compatibility with fprintf etc.. with long long & win32
-#ifdef ADM_WIN32
+#ifdef __WIN32
         #define LLX "I64x"
         #define LLU "I64u"
         

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audio/audio_packetizer.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audio/audio_packetizer.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audio/audio_packetizer.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -22,12 +22,9 @@
 #include <stdio.h>
 #include <stdlib.h>
 #include <string.h>
-#include "ADM_assert.h"
 #include <math.h>
-#ifdef ADM_WIN32
-#include <io.h>
-#endif
 
+#include "ADM_assert.h"
 #include "default.h"
 #include "ADM_editor/ADM_Video.h"
 #include "fourcc.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/ADM_audiodevice.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/ADM_audiodevice.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/ADM_audiodevice.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -44,7 +44,7 @@
 #include "ADM_audiodevice/ADM_deviceSDL.h"
 #endif
 
-#ifdef ADM_WIN32
+#ifdef __WIN32
 #include "ADM_audiodevice/ADM_deviceWin32.h"
 #endif
 
@@ -165,7 +165,7 @@
 			AVDM_switch(DEVICE_OSS);			
 			printf("\n Using OSS\n");
 		#else
-			#ifdef ADM_WIN32
+			#ifdef __WIN32
 			AVDM_switch(DEVICE_WIN32);
 			#else
                 #ifdef USE_ESD
@@ -208,19 +208,19 @@
 								break;
 
 #endif
-#if defined(OSS_SUPPORT) && !defined(ADM_WIN32)
+#if defined(OSS_SUPPORT)
 		  case  DEVICE_OSS :
 								device=new 	 ossAudioDevice;
 								currentDevice=DEVICE_OSS;;
 								break;
 #endif
-#if defined(USE_ESD) && !defined(ADM_WIN32)
+#if defined(USE_ESD)
 		  case  DEVICE_ESD :
 								device=new 	 esdAudioDevice;
 								currentDevice=DEVICE_ESD;;
 								break;
 #endif
-#if defined(USE_JACK) && !defined(ADM_WIN32)
+#if defined(USE_JACK)
 		  case  DEVICE_JACK:
 								device=new 	 jackAudioDevice;
 								currentDevice=DEVICE_JACK;
@@ -247,7 +247,7 @@
 								break;
 #endif
 
-#ifdef ADM_WIN32
+#ifdef __WIN32
 		case DEVICE_WIN32:
 								device=new win32AudioDevice;
 								currentDevice=DEVICE_WIN32;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/ADM_deviceArts.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/ADM_deviceArts.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/ADM_deviceArts.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -17,7 +17,6 @@
 
 #include "default.h"
 
-#ifndef ADM_WIN32 
 #ifdef USE_ARTS
 #include <artsc.h>
 
@@ -119,5 +118,4 @@
 void dummy_art_func( void)
  {
 }
-#endif
-#endif
+#endif
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/ADM_deviceEsd.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/ADM_deviceEsd.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/ADM_deviceEsd.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -17,8 +17,7 @@
  ***************************************************************************/
 #include "config.h"
 
-#if defined( USE_ESD ) && !defined(ADM_WIN32)
-
+#if defined(USE_ESD)
 #include <stdio.h>
 #include <stdlib.h>
 #include <unistd.h>
@@ -27,7 +26,6 @@
 #include <fcntl.h>
 #include <sys/ioctl.h>
 #include <esd.h>
- 
 
 #include "default.h"
 #include "ADM_audiodevice.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/ADM_deviceJack.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/ADM_deviceJack.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/ADM_deviceJack.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -7,13 +7,11 @@
 
 #include "config.h"
 
-#if defined(USE_JACK) && !defined(ADM_WIN32)
-
+#if defined(USE_JACK)
 #include <unistd.h>
 #include <stdio.h>
 #include <stdint.h>
 
-
 #include "default.h"
 #include "ADM_audiodevice.h"
 #include "ADM_assert.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/ADM_deviceWin32.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/ADM_deviceWin32.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/ADM_deviceWin32.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -12,7 +12,7 @@
 
 #include "config.h"
 
-#ifdef ADM_WIN32
+#ifdef __WIN32
 #include <stdio.h>
 #include <stdlib.h>
 #include <errno.h>

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/ADM_deviceWin32.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/ADM_deviceWin32.h	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/ADM_deviceWin32.h	2008-03-02 16:00:49 UTC (rev 3813)
@@ -9,7 +9,7 @@
 // Copyright: See COPYING file that comes with this distribution
 //
 //
-#ifdef ADM_WIN32
+#ifdef __WIN32
 
 class win32AudioDevice : public audioDevice
 {

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/ADM_deviceoss.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/ADM_deviceoss.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/ADM_deviceoss.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -16,8 +16,7 @@
  ***************************************************************************/
 #include "config.h"
 
-#if defined( OSS_SUPPORT ) && !defined(ADM_WIN32)
-
+#ifdef OSS_SUPPORT
 #include <stdio.h>
 #include <stdlib.h>
 #include <unistd.h>

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/audio_out.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/audio_out.h	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/audio_out.h	2008-03-02 16:00:49 UTC (rev 3813)
@@ -53,10 +53,10 @@
 #ifdef __APPLE__
 	MKADID(COREAUDIO),
 #endif
-#if	defined(USE_SDL) && !defined(ADM_WIN32)	
+#if	defined(USE_SDL) && !defined(__WIN32)	
 	MKADID(SDL),
 #endif	
-#ifdef ADM_WIN32	
+#ifdef __WIN32	
 	MKADID(WIN32),
 #endif	
 #ifdef USE_ESD	

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiofilter_normalize.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiofilter_normalize.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiofilter_normalize.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -40,16 +40,13 @@
 
 extern AVDMGenericAudioStream *currentaudiostream;
 
-
-#ifndef ADM_WIN32
-#ifdef ADM_BSD_FAMILY
-                #define POW10(x) powf(10.0,x)
+#ifdef __WIN32
+#define POW10(x)   pow(10,x)
+#elif defined(ADM_BSD_FAMILY)
+#define POW10(x) powf(10.0,x)
 #else
-                #define POW10(x)  pow10f(x)
+#define POW10(x)  pow10f(x)
 #endif
-#else
-                #define POW10(x)   pow(10,x)
-#endif
 
 #define LINEAR_TO_DB(x) (20.*log10(x))
 #define DB_TO_LINEAR(x) (POW10((x/20.)))

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edit.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edit.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edit.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -22,19 +22,12 @@
 #include <string.h>
 #include <fcntl.h>
 #include <errno.h>
-#include <unistd.h>
-#include <pthread.h>
-#define WIN32_CLASH
-//#include <unistd.h>
-#ifdef ADM_WIN32
-#include "sys/stat.h"
+
+#if defined(__MINGW32__) || defined(ADM_BSD_FAMILY)
+#include <sys/stat.h>
 #endif
-#ifdef ADM_BSD_FAMILY
-#include "sys/stat.h"
-#endif
-#include "ADM_assert.h"
 
-#include "config.h"
+#include "ADM_assert.h"
 #include "fourcc.h"
 #include "avio.hxx"
 #include "ADM_editor/ADM_edit.hxx"
@@ -358,7 +351,7 @@
                     printf("Filesystem is writable\n");
 		}else if( errno == EROFS ){
 		  char *tmpdir = getenv("TMPDIR");
-#ifdef ADM_WIN32
+#ifdef __WIN32
                         printf("Filesystem is not writable, looking for somewhere else\n");
 			if( !tmpdir )
 				tmpdir = "c:";

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter_declaration.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter_declaration.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter_declaration.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -184,10 +184,10 @@
             QT_TR_NOOP("Create a video made of 6 mini windows, very useful to do DVD menus."),
             VF_ANIMATED,1,animated_create,animated_script);
 	REGISTERX("computeaverage",QT_TR_NOOP("Compute Average"),QT_TR_NOOP("Compute average luma value for each pixel throughout all frames, and save to file"),VF_COMPUTEAVERAGE,1,computeaverage_create,computeaverage_script);
-	REGISTERX("eraser",QT_TR_NOOP("Eraser"),QT_TR_NOOP("\"Erase\" arbitrary areas of each frame"),VF_ERASER,1,eraser_create,eraser_script);
-	REGISTERX("swissarmyknife",QT_TR_NOOP("Swiss Army Knife"),QT_TR_NOOP("Apply operation like P'=P*A, P-A, P+A, etc. using a convolution, rolling average, image from file, or constant"),VF_SWISSARMYKNIFE,1,swissarmyknife_create,swissarmyknife_script);
+	//REGISTERX("eraser",QT_TR_NOOP("Eraser"),QT_TR_NOOP("\"Erase\" arbitrary areas of each frame"),VF_ERASER,1,eraser_create,eraser_script);
+	//REGISTERX("swissarmyknife",QT_TR_NOOP("Swiss Army Knife"),QT_TR_NOOP("Apply operation like P'=P*A, P-A, P+A, etc. using a convolution, rolling average, image from file, or constant"),VF_SWISSARMYKNIFE,1,swissarmyknife_create,swissarmyknife_script);
 	REGISTERX("threshold",QT_TR_NOOP("Threshold"),QT_TR_NOOP("Force too-bright/too-dim pixels to 0 and the rest to 255 or vice-versa"),VF_THRESHOLD,1,threshold_create,threshold_script);
-	REGISTERX("particlelist",QT_TR_NOOP("Particle List"),QT_TR_NOOP("Identify 'particles' (groups of pixels)"),VF_PARTICLELIST,1,particle_create,particle_script);
+	//REGISTERX("particlelist",QT_TR_NOOP("Particle List"),QT_TR_NOOP("Identify 'particles' (groups of pixels)"),VF_PARTICLELIST,1,particle_create,particle_script);
 
 // Does not work
 //        REGISTERX("unblend","Unblend by Bach",VF_UNBLEND,1,unblend_create,unblend_script);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter_dylib.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter_dylib.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter_dylib.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -17,12 +17,9 @@
 
 //#define USE_EDLL
 
-
 #include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#define WIN32_CLASH
-#ifdef ADM_WIN32
+
+#ifdef __MINGW32__
 #include <windows.h> 
 #ifdef USE_EDLL
 #include "edll/edll.h"
@@ -32,25 +29,19 @@
 #include <dlfcn.h>
 #endif
 
+#include "default.h"
 #include "ADM_assert.h"
 
-#include "fourcc.h"
-#include "avio.hxx"
-
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_toolkit/filesel.h"
-#include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_filter/video_filters.h"
-#include "ADM_video/ADM_vidPartial.h"
-#include "avi_vars.h"
 
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME MODULE_PREVIEW
 #include "ADM_osSupport/ADM_debug.h"
-#include "ADM_osSupport/ADM_quota.h"
 
-#ifdef ADM_WIN32
+#ifdef __MINGW32__
 #ifdef USE_EDLL
 #define TYPEOFHANDLE     edll_module *
 #define OPENLIB(x)       edll_open(x)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_avsproxy/ADM_avsproxy_net.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_avsproxy/ADM_avsproxy_net.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_avsproxy/ADM_avsproxy_net.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -1,10 +1,10 @@
 #include "config.h"
-#ifdef ADM_WIN32
-#include "windows.h"
-#include "winbase.h"
-#include "io.h"
-#include "winsock2.h"
-#define WIN32_CLASH
+
+#ifdef __MINGW32__
+#include <windows.h>
+#include <winbase.h>
+#include <io.h>
+#include <winsock2.h>
 #else
 #include <sys/types.h>
 #include <sys/socket.h>
@@ -12,8 +12,6 @@
 #include <arpa/inet.h>
 #endif
 
-
-
 #include <stdio.h>
 #include <stdlib.h>
 #include <string.h>
@@ -32,10 +30,10 @@
 
 uint8_t avsHeader::bindMe(uint32_t port)
 {
- #ifndef ADM_WIN32
- mySocket = socket(PF_INET, SOCK_STREAM, 0);
- #else
+ #ifdef __MINGW32__
  mySocket = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);
+ #else
+ mySocket = socket(PF_INET, SOCK_STREAM, 0);
  #endif
     if(mySocket==-1)
     {
@@ -64,10 +62,10 @@
     if(mySocket)
     {
         int er;
-#ifndef ADM_WIN32        
-        er=shutdown(mySocket,SHUT_RDWR);
+#ifdef __MINGW32__
+		er=shutdown(mySocket,SD_BOTH);
 #else
-        er=shutdown(mySocket,SD_BOTH);
+        er=shutdown(mySocket,SHUT_RDWR);
 #endif
         if(er) printf("[avsProxy]Error when socket shutdown  %d (socket %d)\n",er,mySocket);
         mySocket=0;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_inpics/bitmap.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_inpics/bitmap.h	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_inpics/bitmap.h	2008-03-02 16:00:49 UTC (rev 3813)
@@ -15,8 +15,6 @@
  *                                                                         *
  ***************************************************************************/
 
-
-
 typedef struct BITMAPHEADER
 {
     uint32_t size;
@@ -42,11 +40,13 @@
 */
 } BITMAPHEADER;
 
+#ifndef _WINGDI_
 typedef struct BITMAPFILEHEADER
 {
-   uint16_t    type;
-	 uint32_t    size;
-   int16_t     xHotspot;
-   int16_t     yHotspot;
-   uint32_t    offsetToBits;
+   uint16_t    bfType;
+   uint32_t    bfSize;
+   int16_t     bfReserved1;
+   int16_t     bfReserved2;
+   uint32_t    bfOffBits;
 }  BITMAPFILEHEADER;
+#endif

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_video.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_video.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_video.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -403,7 +403,7 @@
                                                 ADM_assert(0);
                                         }
                                         str--;
-#ifdef ADM_WIN32                                        
+#ifdef __WIN32                                        
                                         sscanf(str,"%c:%I64x,%I64x,%x",&imgtype,&imgabs,&imgrel,&imgsize);
 #else                                      
                                         sscanf(str,"%c:%llx,%llx,%x",&imgtype,&imgabs,&imgrel,&imgsize);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_odml_audio.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_odml_audio.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_odml_audio.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -26,12 +26,9 @@
 #include <stdio.h>
 #include <stdlib.h>
 #include <string.h>
-#include "ADM_assert.h"
 #include <math.h>
-#ifdef ADM_WIN32
-#include <io.h>
-#endif
 
+#include "ADM_assert.h"
 #include "default.h"
 #include "ADM_editor/ADM_Video.h"
 #include "fourcc.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_odml_odml.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_odml_odml.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_odml_odml.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -38,7 +38,7 @@
 
 //#define OPENDML_VERBOSE
 
-#if defined( ADM_WIN32) || defined(ARCH_X86_64)
+#if defined( __WIN32) || defined(ARCH_X86_64)
 	#define PPACKED __attribute__ ((packed, gcc_struct))
 #else
 	#define PPACKED 
@@ -242,7 +242,7 @@
 		fcc=read32();
 		len=read32();
                 aprintf("subindex : %lu size %lu (%lx)",i,len,len); 
-#ifdef ADM_WIN32
+#ifdef __WIN32
                 aprintf("Seeking to %I64x\n",superEntries[i].offset);
 #else                             
                 aprintf("Seeking to %llx\n",superEntries[i].offset);
@@ -254,7 +254,7 @@
 			printf("Problem reading secondary index (%u/%u) trying to continue \n",i,masterIndex.nbEntryInUse);
 			return 1;
 		}	
-#ifdef ADM_WIN32                
+#ifdef __WIN32                
                 aprintf("Base : %I64x\n",second.base);
 #else                                
 		aprintf("Base : %llx\n",second.base);
@@ -277,7 +277,7 @@
 					(*index)[count].intra=0;
 				else 
 					(*index)[count].intra=AVI_KEY_FRAME;
-#ifdef ADM_WIN32
+#ifdef __WIN32
                                 aprintf("Frame.off : %I64x, size %I64x\n",
                                         _idx[count].offset,
                                         _idx[count].size);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_openDML.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_openDML.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_openDML.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -240,7 +240,7 @@
 		// now read up each parts...
 		//____________________________
 		
-#ifdef ADM_WIN32
+#ifdef __WIN32
                 
 #define DUMP_TRACK(i) aprintf(" at %I64u (%I64x) size : %I64u (%I64x)\n", \
                                 _Tracks[i].strh.offset,\

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_riff.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_riff.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_riff.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -30,7 +30,7 @@
 
 uint64_t riffParser::getPos( void ) 
 { 
-#ifdef ADM_WIN32
+#ifdef __WIN32
         aprintf("pos : %I64u / %I64u \n",curPos,ftello(fd));
 #else
 	aprintf("pos : %llu / %llu \n",curPos,ftello(fd));
@@ -59,7 +59,7 @@
 }
 uint8_t riffParser::endReached(void)
 {
-#ifdef ADM_WIN32
+#ifdef __WIN32
         aprintf("Cur : %I64u end : %I64u left: %I64u\n",curPos,endPos,endPos-curPos);
 #else
 	aprintf("Cur : %llu end : %llu left: %llu\n",curPos,endPos,endPos-curPos);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavcodec/fft.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavcodec/fft.c	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavcodec/fft.c	2008-03-02 16:00:49 UTC (rev 3813)
@@ -75,7 +75,7 @@
                 /* 3DNow! for K6-2/3 */
                 s->fft_calc = ff_fft_calc_3dn;
             }
-#ifndef ADM_WIN32	// GRUNTSTER
+#ifndef __WIN32	// GRUNTSTER
 			else if (has_vectors & MM_SSE) {
                 /* SSE for P3/P4 */
                 s->imdct_calc = ff_imdct_calc_sse;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavcodec/i386/dsputil_mmx.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavcodec/i386/dsputil_mmx.c	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavcodec/i386/dsputil_mmx.c	2008-03-02 16:00:49 UTC (rev 3813)
@@ -3644,7 +3644,7 @@
         }
         if(mm_flags & MM_3DNOWEXT)
             c->vector_fmul_reverse = vector_fmul_reverse_3dnow2;
-#ifndef ADM_WIN32	// GRUNTSTER
+#ifndef __WIN32	// GRUNTSTER
         if(mm_flags & MM_SSE){
             c->vorbis_inverse_coupling = vorbis_inverse_coupling_sse;
             c->vector_fmul = vector_fmul_sse;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavformat/ADM_lavformat.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavformat/ADM_lavformat.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavformat/ADM_lavformat.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -19,7 +19,7 @@
  ***************************************************************************/
 
 #include "config.h"
-#define WIN32_CLASH
+
 #include <stdio.h>
 #include <stdlib.h>
 #include <math.h>

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libwrapper/libwrapper.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libwrapper/libwrapper.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libwrapper/libwrapper.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -3,7 +3,7 @@
 #include <stdlib.h>
 #include <stdio.h>
 #include "default.h"
-#ifdef ADM_WIN32
+#ifdef __MINGW32__
 #include <windows.h>
 #else
 #include <dlfcn.h>
@@ -23,7 +23,7 @@
 	{
 		printf("Unloading library 0x%08x\n", hinstLib);
 
-	#ifdef ADM_WIN32
+	#ifdef __MINGW32__
 		FreeLibrary((HINSTANCE) hinstLib);
 	#else
 		dlclose(hinstLib);
@@ -36,7 +36,7 @@
 	return initialised;
 }
 
-#ifdef ADM_WIN32
+#ifdef __MINGW32__
 char* ADM_LibWrapper::formatMessage(uint32_t msgCode)
 {
 	char* lpMsgBuf;
@@ -49,7 +49,7 @@
 
 bool ADM_LibWrapper::loadLibrary(const char* path)
 {
-#ifdef ADM_WIN32
+#ifdef __MINGW32__
 	hinstLib = LoadLibrary(path);
 
 	if (hinstLib == NULL)
@@ -87,7 +87,7 @@
 
 void* ADM_LibWrapper::getSymbol(const char* name)
 {
-#ifdef ADM_WIN32
+#ifdef __MINGW32__
 	void* procAddr = (void*)GetProcAddress((HINSTANCE) hinstLib, name);
 
 	if (procAddr == NULL)
@@ -113,7 +113,7 @@
 
 bool ADM_LibWrapper::getSymbols(int symCount, ...)
 {
-#ifdef ADM_WIN32
+#ifdef __MINGW32__
     va_list va;
     va_start(va, symCount);
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libwrapper/libwrapper.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libwrapper/libwrapper.h	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libwrapper/libwrapper.h	2008-03-02 16:00:49 UTC (rev 3813)
@@ -7,7 +7,7 @@
 		void* hinstLib;
 		bool initialised;
 
-	#ifdef ADM_WIN32
+	#ifdef __WIN32
 		virtual char* formatMessage(uint32_t msgCode);
 	#endif
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libwrapper/libwrapper_amrnb.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libwrapper/libwrapper_amrnb.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libwrapper/libwrapper_amrnb.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -8,7 +8,7 @@
 ADM_LibWrapperAmrnb::ADM_LibWrapperAmrnb() : ADM_LibWrapper()
 {
 #ifdef USE_LATE_BINDING
-#ifdef ADM_WIN32
+#ifdef __WIN32
 	char* libname = "libamrnb-2.dll";
 #else
 	char* libname = "libamrnb-2.so";	// ???

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libwrapper/libwrapper_dca.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libwrapper/libwrapper_dca.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libwrapper/libwrapper_dca.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -8,7 +8,7 @@
 ADM_LibWrapperDca::ADM_LibWrapperDca() : ADM_LibWrapper()
 {
 #ifdef USE_LATE_BINDING
-#ifdef ADM_WIN32
+#ifdef __WIN32
 #ifdef USE_LIBDCA_002
 	const char* libname = "libdts.dll";
 #else
@@ -20,7 +20,7 @@
 #else
 	const char* libname = "libdca-0.so";	// ???
 #endif	// USE_LIBDCA_002
-#endif	// ADM_WIN32
+#endif	// __WIN32
 
 #ifdef USE_LIBDCA_002
 	initialised = (loadLibrary(libname) && getSymbols(7, 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mplexin.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mplexin.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mplexin.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -17,9 +17,7 @@
 #include <string.h>
 #include <sys/stat.h>
 #include <errno.h>
-#ifdef ADM_WIN32
-#include <io.h>
-#endif
+
 #include "interact.hpp"
 
 #undef malloc
@@ -63,7 +61,7 @@
   char msg[512];
    while( !(strm = fopen( cur_filename, "wb" )) ){
       if( errno == ENOSPC
-#ifndef ADM_WIN32
+#ifndef __MINGW32__
                           || errno == EDQUOT
 #endif
                                              ){
@@ -129,7 +127,7 @@
          continue;
       }
       if( rc == -1 && (errno == ENOSPC
-#ifndef ADM_WIN32
+#ifndef __MINGW32__
                                        || errno == EDQUOT
 #endif
                                                           ) ){

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mplexmuxer.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mplexmuxer.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mplexmuxer.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -29,7 +29,6 @@
 #include <string.h>
 #include <sys/stat.h>
 #include <pthread.h>
-#define WIN32_CLASH
 
 #include "interact.hpp"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mthread.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mthread.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mthread.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -20,8 +20,6 @@
 #include <math.h>
 #include <pthread.h>
 
-#define WIN32_CLASH
-
 #include "default.h"
 
 #include "ADM_toolkit/toolkit.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/cpu_accel.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/cpu_accel.c	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/cpu_accel.c	2008-03-02 16:00:49 UTC (rev 3813)
@@ -348,7 +348,7 @@
 #endif		
 	}
 		
-#ifdef ADM_WIN32	// GRUNTSTER
+#ifdef __MINGW32__	// GRUNTSTER
 	pgsize = 4096;
 #else
 	pgsize = sysconf(_SC_PAGESIZE);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_smjs/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_smjs/CMakeLists.txt	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_smjs/CMakeLists.txt	2008-03-02 16:00:49 UTC (rev 3813)
@@ -7,11 +7,11 @@
 	
 ADD_ADM_LIB_ALL_TARGETS(${ADM_LIB} ${${ADM_LIB}_SRCS})
 
-IF(WIN32)
+IF (MINGW)
 	ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "-DXP_WIN")
-ELSE(WIN32)
+ELSE (MINGW)
 	ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "-DXP_UNIX -DSVR4 -DSYSV -D_BSD_SOURCE -DPOSIX_SOURCE -DHAVE_VA_COPY -DVA_COPY=va_copy")
-ENDIF(WIN32)
+ENDIF (MINGW)
 
 ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "-DNDEBUG -DTRIMMED -DEXPORT_JS_API -DJS_USE_SAFE_ARENA -D_IEEE_LIBM")
 ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "-Dmalloc=ADM_alloc")

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_gettext.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_gettext.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_gettext.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -9,7 +9,7 @@
 {
 	char *local = setlocale(LC_ALL, "");
 
-#ifdef ADM_WIN32
+#ifdef __WIN32
 	bindtextdomain("avidemux", "./share/locale");
 #else
 	bindtextdomain("avidemux", ADMLOCALE);
@@ -31,7 +31,7 @@
 	if(local)
 		printf("[Locale] Textdomain is now %s\n", local);
 
-#ifndef ADM_WIN32
+#ifndef __WIN32
 	printf("[Locale] Files for %s appear to be in %s\n","avidemux", ADMLOCALE);
 #endif
 	printf("[Locale] Test: %s\n\n", dgettext("avidemux", "_File"));

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_imageUtils.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_imageUtils.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_imageUtils.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -370,8 +370,8 @@
   
   sz = _width* _height * 3;
 
-  bmfh.xHotspot = bmfh.yHotspot = 0;
-  bmfh.offsetToBits = sizeof (bmfh) + sizeof (bmph);
+  bmfh.bfReserved1 = bmfh.bfReserved2 = 0;
+  bmfh.bfOffBits = sizeof (bmfh) + sizeof (bmph);
 //_________________________________________
   bmph.biSize = sizeof (bmph);
   bmph.biWidth = _width;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/avifmt.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/avifmt.h	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/avifmt.h	2008-03-02 16:00:49 UTC (rev 3813)
@@ -12,8 +12,7 @@
 
 #ifndef NOAVIFMT
 
-#ifndef __WINE_WINDEF_H
-#if !defined( WIN32_CLASH) || !defined(ADM_WIN32)
+#if !defined(__WINE_WINDEF_H) && !defined(_WINDEF_H)
 #define LOBYTE(w)              ((uint8_t)(uint16_t)(w))
 #define HIBYTE(w)              ((uint8_t)((uint16_t)(w) >> 8))
 
@@ -22,8 +21,6 @@
 
 #define MAKELONG(low,high)     ((int32_t)(((uint16_t)(low)) | (((uint32_t)((uint16_t)(high))) << 16)))
 
-
-
 typedef struct __attribute__((__packed__))
 {
     int16_t	left;
@@ -31,9 +28,6 @@
     int16_t	right;
     int16_t	bottom;
 } RECT, *PRECT, *LPRECT;
-
-#endif
-
 #endif // __WINE_WINDEF_H
 
 #ifdef _MSC_VER

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/avifmt2.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/avifmt2.h	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/avifmt2.h	2008-03-02 16:00:49 UTC (rev 3813)
@@ -21,7 +21,7 @@
 #ifndef __AVIFMT2__
 #define __AVIFMT2__
 
-#if !defined( WIN32_CLASH) || !defined(ADM_WIN32)
+#ifndef _WINGDI_
 typedef struct
 {
     uint32_t 		biSize;
@@ -36,11 +36,12 @@
     uint32_t 		biClrUsed;
     uint32_t 		biClrImportant;
 } BITMAPINFOHEADER, *PBITMAPINFOHEADER, *LPBITMAPINFOHEADER;
+
 typedef struct {
 	BITMAPINFOHEADER bmiHeader;
 	int	bmiColors[1];
 } BITMAPINFO, *LPBITMAPINFO;
-#endif //win32clash
+#endif // _WINGDI_
 
 void printBih(BITMAPINFOHEADER *bi);
 /* Borrowed from vdub

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/default.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/default.h	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/default.h	2008-03-02 16:00:49 UTC (rev 3813)
@@ -97,7 +97,7 @@
 #if (defined( HAVE_LIBESD) && defined(HAVE_ESD_H)) || \
  defined(OSS_SUPPORT) || defined (USE_ARTS) || \
   defined(USE_SDL) || defined(CONFIG_DARWIN) || \
-  defined(ADM_WIN32) || defined(ALSA_SUPPORT)
+  defined(__WIN32) || defined(ALSA_SUPPORT)
   
 #define HAVE_AUDIO
 #endif

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/prefs.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/prefs.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/prefs.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -425,7 +425,7 @@
         strcat(rcfile,CONFIG);
 
 
-#if defined(ADM_WIN32)
+#if defined(__MINGW32__)
 	xmlSetDocCompressMode(xdoc,9);
 	if( xmlSaveFormatFile(rcfile,xdoc,1) == -1 ){
            fprintf(stderr,"\ncan't save xml tree to file. Filesystem full?\n\n");

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_cpuCap.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_cpuCap.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_cpuCap.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -12,7 +12,7 @@
 #include "config.h"
 #include <stdio.h>
 
-#if defined(ADM_WIN32)
+#if defined(__MINGW32__)
 #include <pthread.h>
 #elif defined(__APPLE__) || defined(ADM_BSD_FAMILY)
 #include <sys/types.h>
@@ -196,7 +196,7 @@
 // Stolen from x264
 int ADM_cpu_num_processors(void)
 {
-#if defined(ADM_WIN32)
+#if defined(__MINGW32__)
     return pthread_num_processors_np();
 #elif defined(__APPLE__) || defined(ADM_BSD_FAMILY)
     int np;
@@ -207,7 +207,7 @@
         np = 1;
 
     return np;
-#else
+#elif defined(__unix__) && !defined(__CYGWIN__)
     unsigned int bit;
     int np;
 
@@ -219,5 +219,7 @@
         np += (((uint8_t *)&p_aff)[bit / 8] >> (bit % 8)) & 1;
 
     return np;
+#else
+	return 1;
 #endif
 }

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_crashdump.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_crashdump.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_crashdump.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -20,20 +20,17 @@
 #include <stdlib.h>
 #include <stdarg.h>
 #include <string.h>
-#include <default.h>
 #include <unistd.h>
-
 #include <math.h>
-#include "ADM_assert.h"
 
-#if defined(ADM_WIN32)
-#define WIN32_CLASH
+#ifdef __MINGW32__
 #include <windows.h>
 #include <excpt.h>
 #include <imagehlp.h>
 #endif
 
 #include "default.h"
+#include "ADM_assert.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
 #include "ADM_editor/ADM_edit.hxx"
@@ -56,7 +53,7 @@
 	GUI_Error_HIG("Fatal Error",bfr);
 	assert(0);
 }
-#elif defined(WIN32)
+#elif defined(__MINGW32__)
 typedef struct STACK_FRAME
 {
     STACK_FRAME* ebp;	// address of the calling function frame
@@ -249,7 +246,11 @@
 }
 #else
 #include <signal.h>
+
+#ifndef __CYGWIN__
 #include <execinfo.h>
+#endif
+
 void sig_segfault_handler(int signo);
 void installSigHandler()
 {
@@ -369,6 +370,8 @@
      int count, i;
       
      saveCrashProject();
+
+#ifndef __CYGWIN__
       printf("\n*********** BACKTRACK **************\n");
       count = backtrace(stack, 20);
       functions = backtrace_symbols(stack, count);
@@ -391,7 +394,8 @@
       const char *title="Crash BackTrace";
       if(lineno) title="Assert failed";
       diaFactoryRun(title,count+1,(diaElem **)txt);
-      
+#endif __CYGWIN__
+
       //
      printf("Memory stat:\n");
      ADMImage_stat();

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_fileio.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_fileio.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_fileio.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -23,14 +23,13 @@
 
 #include <unistd.h>
 
-#ifdef WIN32
+#ifdef __MINGW32__
 #include <glib.h>
 #endif
 
 #include "default.h"
 #include "ADM_misc.h"
 
-
 #include "ADM_toolkit/filesel.h"
 #include "ADM_toolkit/toolkit.hxx"
 
@@ -42,26 +41,24 @@
 
 size_t ADM_fread (void *ptr, size_t size, size_t n, FILE *sstream)
 {
-  return fread(ptr,size,n,sstream); 
-  
+  return fread(ptr,size,n,sstream);
 }
 
 size_t ADM_fwrite (void *ptr, size_t size, size_t n, FILE *sstream)
 {
-  return fwrite(ptr,size,n,sstream); 
-  
+  return fwrite(ptr,size,n,sstream);
 }
 FILE  *ADM_fopen (const char *file, const char *mode)
 {
   FILE *f;
 
-#ifndef ADM_WIN32
-  return fopen(file,mode); 
-#else
+#ifdef __MINGW32__
   gchar *retval = g_locale_from_utf8 (file, -1, NULL, NULL, NULL);
   f=fopen(retval,mode);
   g_free (retval);
-  return f;  
+  return f;
+#else
+  return fopen(file,mode); 
 #endif
 }
 
@@ -76,7 +73,7 @@
 int baseDirDone=0;
 int jobDirDone=0;
 int customDirDone=0;
-#ifdef ADM_WIN32
+#ifdef __WIN32
 const char *ADM_DIR_NAME="\\avidemux";
 #else
 const char *ADM_DIR_NAME="/.avidemux";
@@ -95,7 +92,7 @@
   char *rootDir;
   rootDir=ADM_getBaseDir();
   strncpy(customdir,rootDir,1023);
-#if defined(ADM_WIN32)
+#if defined(__WIN32)
   strcat(customdir,"\\custom"); 
 #else
   strcat(customdir,"/custom");
@@ -119,7 +116,7 @@
   char *rootDir;
   rootDir=ADM_getBaseDir();
   strncpy(jobdir,rootDir,1023);
-#if defined(ADM_WIN32)
+#if defined(__WIN32)
   strcat(jobdir,"\\jobs"); 
 #else
   strcat(jobdir,"/jobs");
@@ -143,7 +140,7 @@
 //
         if(baseDirDone) return basedir;
 // Get the base directory
-#if defined(ADM_WIN32)
+#if defined(__WIN32)
         if( ! (home=getenv("USERPROFILE")) )
         {
           GUI_Error_HIG(QT_TR_NOOP("Oops"),QT_TR_NOOP("can't determine $USERPROFILE."));
@@ -192,7 +189,7 @@
                   closedir(dir);
                   return 1;
               }
-#if defined(ADM_WIN32)
+#ifdef __MINGW32__
                 if(mkdir(dirname))
                 {
                     printf("Oops: mkdir failed on %s\n",dirname);   
@@ -297,14 +294,14 @@
 	{
 		out=new char [strlen(path)+2];
 		strcpy(out,path);
-#ifndef ADM_WIN32		
+#ifndef __WIN32		
 		strcat(out,"/");
 #else
 		strcat(out,"\\");
 #endif	
 		printf("\n Canonizing null string ??? (%s)\n",out);
 	}else if(tmpname[0]=='/'
-#if defined(ADM_WIN32)
+#if defined(__WIN32)
 		|| tmpname[1]==':'
 #endif	
 	
@@ -316,7 +313,7 @@
 	}else{
 		out=new char[strlen(path)+strlen(tmpname)+6];
 		strcpy(out,path);
-#ifndef ADM_WIN32		
+#ifndef __WIN32		
 		strcat(out,"/");
 #else
 		strcat(out,"\\");
@@ -335,7 +332,7 @@
 		int len=strlen(str);
 		if(len<=1) return;
 		len--;
-#ifndef ADM_WIN32		
+#ifndef __WIN32		
 		while( *(str+len)!='/' && len)
 #else
 	while( *(str+len)!='\\' && len)
@@ -354,7 +351,7 @@
 {
 	char *filename;
         char *filename2;
-#ifndef ADM_WIN32		
+#ifndef __WIN32		
 	filename = strrchr(str, '/');
         
 #else

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_misc.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_misc.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_misc.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -23,7 +23,7 @@
 #include <time.h>
 #include <math.h>
 #include <string.h>
-#ifndef ADM_WIN32
+#ifndef __WIN32
 #include <unistd.h>
 #endif
 //#include <gtk/gtk.h>
@@ -298,7 +298,7 @@
 
 bool shutdown(void)
 {
-#ifdef ADM_WIN32
+#ifdef __WIN32
 	return (shutdown_win32() == 0);
 #else
 	return (system("shutdown -P 0") == 0);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_misc.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_misc.h	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_misc.h	2008-03-02 16:00:49 UTC (rev 3813)
@@ -73,7 +73,7 @@
 	#endif
 #endif
 
-#ifdef ADM_WIN32
+#ifdef __WIN32
 	#define PRIO_MIN -20
 	#define PRIO_MAX 20
 	#define PRIO_PROCESS 0

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_quota.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_quota.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_quota.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -74,7 +74,7 @@
 	while( !FD ){
 		FD = fopen (path,mode);
 		if( !FD && (errno == ENOSPC 
-#ifndef ADM_WIN32
+#ifndef __MINGW32__
 || errno == EDQUOT
 #endif
 ) ){
@@ -157,7 +157,7 @@
 			continue;
 		}
 		if( rc == -1 && (errno == ENOSPC 
-#ifndef ADM_WIN32
+#ifndef __MINGW32__
 || errno == EDQUOT
 #endif
 ) ){

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/TLK_clock.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/TLK_clock.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/TLK_clock.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -47,8 +47,8 @@
 static struct timeval _itimev;
 static uint32_t getAbsTime( void );
 
-#ifndef ADM_WIN32
-#include "unistd.h"
+#ifndef __WIN32
+#include <unistd.h>
 void ADM_usleep(unsigned long us)
 {
   usleep(us);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/win32.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/win32.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/win32.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -1,18 +1,19 @@
 #include "config.h"
 
-#ifdef ADM_WIN32
-#define WIN32_CLASH
+#ifdef __WIN32
+
 #include <stdio.h>
 #include <stdlib.h>
+#include <windows.h>
 
+#ifdef __MINGW32__
+#include <winsock2.h>
+#endif
+
 #include "default.h" 
 #include "ADM_misc.h"
-#include "windows.h"
-#include "io.h"
-#include "winsock2.h"
 #include "ADM_assert.h" 
 
-uint8_t win32_netInit(void);
 extern char *ADM_getBaseDir(void);
 
 void ADM_usleep(unsigned long us)
@@ -20,20 +21,25 @@
 	Sleep(us/1000);
 }
 
+#ifdef __MINGW32__
 uint8_t win32_netInit(void)
 {
-WSADATA wsaData;
+	WSADATA wsaData;
 	int iResult;
-		printf("Initializing WinSock\n");
-		iResult = WSAStartup(MAKEWORD(2,2), &wsaData);
-		if (iResult != NO_ERROR)
-		{
-			printf("Error at WSAStartup()\n");
-			return 0;
-		}	
-		printf("WinSock ok\n");
-		return 1;
+
+	printf("Initializing WinSock\n");
+	iResult = WSAStartup(MAKEWORD(2,2), &wsaData);
+
+	if (iResult != NO_ERROR)
+	{
+		printf("Error at WSAStartup()\n");
+		return 0;
+	}	
+
+	printf("WinSock ok\n");
+	return 1;
 }
+#endif
 
 #ifndef HAVE_GETTIMEOFDAY
 extern "C"
@@ -57,7 +63,7 @@
 
 	return;
 }
-#endif
+#endif	// HAVE_GETTIMEOFDAY
 
 int getpriority(int which, int who)
 {
@@ -480,6 +486,6 @@
 	setvbuf(stderr, NULL, _IOLBF, BUFSIZ);
 
 	delete[] logPath;
-#endif
+#endif	// USE_SDL
 }
-#endif
+#endif	// __WIN32

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisave.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisave.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisave.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -29,7 +29,6 @@
 #include <time.h>
 #include <sys/time.h>
 #include <pthread.h>
-#define WIN32_CLASH
 
 #include "fourcc.h"
 #include "avi_vars.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -29,7 +29,7 @@
 #include <sys/time.h>
 #include "config.h"
 #include <pthread.h>
-#define WIN32_CLASH
+
 #include "fourcc.h"
 #include "avi_vars.h"
 #include "ADM_toolkit/toolkit.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_pack.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_pack.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_pack.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -25,7 +25,7 @@
 #include <sys/time.h>
 #include "config.h"
 #include <pthread.h>
-#define WIN32_CLASH
+
 #include "fourcc.h"
 #include "avi_vars.h"
 #include "ADM_toolkit/toolkit.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_unpack.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_unpack.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_unpack.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -29,7 +29,7 @@
 #include <sys/time.h>
 #include "config.h"
 #include <pthread.h>
-#define WIN32_CLASH
+
 #include "fourcc.h"
 #include "avi_vars.h"
 #include "ADM_toolkit/toolkit.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavedual.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavedual.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavedual.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -27,7 +27,7 @@
 #include <time.h>
 #include <sys/time.h>
 #include <pthread.h>
-#define WIN32_CLASH
+
 #include "fourcc.h"
 #include "avi_vars.h"
 #include "ADM_toolkit/toolkit.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_aviwrite.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_aviwrite.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_aviwrite.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -34,7 +34,7 @@
 
 #include "config.h"
 #include <pthread.h>
-#define WIN32_CLASH
+
 #include "avifmt.h"
 #include "avifmt2.h"
 #include "ADM_audio/aviaudio.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -27,7 +27,7 @@
 #include <sys/time.h>
 #include "config.h"
 #include <pthread.h>
-#define WIN32_CLASH
+
 #include "fourcc.h"
 #include "avi_vars.h"
 #include "ADM_toolkit/toolkit.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_savesmart.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_savesmart.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_savesmart.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -24,7 +24,7 @@
 #include <time.h>
 #include <sys/time.h>
 #include <pthread.h>
-#define WIN32_CLASH
+
 #ifdef USE_FFMPEG
 extern "C" {
 	#include "ADM_lavcodec.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -23,9 +23,7 @@
 #include <string.h>
 #include <math.h>
 #include <pthread.h>
-#define WIN32_CLASH
 
-
 extern "C" {
 #include "ADM_lavcodec.h"
 };

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -22,9 +22,7 @@
 #include <string.h>
 #include <math.h>
 #include <pthread.h>
-#define WIN32_CLASH
 
-
 extern "C" {
 #include "ADM_lavcodec.h"
 };

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -25,7 +25,6 @@
 #include <string.h>
 #include <math.h>
 #include <pthread.h>
-#define WIN32_CLASH
 
 #ifdef USE_FFMPEG
 extern "C" {

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -20,12 +20,9 @@
 #include <sys/time.h>
 #include <errno.h>
 
-
 #include "default.h"
 
-
 #include "ADM_osSupport/ADM_threads.h"
-#define WIN32_CLASH
 #include "avi_vars.h"
 #include "ADM_assert.h"
 #include "ADM_audiofilter/audioprocess.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -26,8 +26,6 @@
 #include <math.h>
 #include <pthread.h>
 
-#define WIN32_CLASH
-
 #ifdef USE_FFMPEG
 extern "C" {
 #include "ADM_lavcodec.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_requant/tcrequant.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_requant/tcrequant.c	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_requant/tcrequant.c	2008-03-02 16:00:49 UTC (rev 3813)
@@ -85,7 +85,7 @@
 
 // user defined types
 //typedef unsigned int		uint;
-#ifdef ADM_WIN32
+#ifdef __WIN32
 	#define uint unsigned int
 #endif
 #ifdef ADM_BSD_FAMILY

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSAvidemux.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSAvidemux.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSAvidemux.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -10,33 +10,20 @@
 //
 //
 #include "config.h"
-#include <stdlib.h>
+
 #include <math.h>
-#include <pthread.h>
-#define WIN32_CLASH
-#include "ADM_JSAvidemux.h"
+
 #include "default.h"
+#include "ADM_JSAvidemux.h"
+#include "avi_vars.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "../ADM_userInterfaces/ADM_commonUI/GUI_ui.h"
-#include "ADM_editor/ADM_outputfmt.h"
-#include "ADM_audiofilter/audioeng_buildfilters.h"
-#include "adm_scanner.h" 
-#include "avi_vars.h"
-#include "gui_action.hxx"
-#include "ADM_encoder/ADM_vidEncode.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
-#include "ADM_encoder/adm_encoder.h"
-#include "ADM_encoder/adm_encConfig.h"
-#include "ADM_editor/ADM_outputfmt.h"
-#include "../ADM_userInterfaces/ADM_commonUI/GUI_ui.h"
-#include "ADM_filter/video_filters.h"
 #include "ADM_script/ADM_container.h"
 
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME MODULE_SCRIPT
 #include "ADM_osSupport/ADM_debug.h"
 
-
 extern int A_openAvi (char *name);
 extern int A_Save (const char *name);
 extern int A_appendAvi (char *name);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSFunctions.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSFunctions.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSFunctions.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -14,7 +14,7 @@
 #include <unistd.h>
 #include <sys/types.h>
 #include <sys/stat.h>
-#ifndef ADM_WIN32
+#ifndef __MINGW32__
 #include <sys/wait.h>
 #include <sys/param.h>
 #endif
@@ -313,7 +313,7 @@
         *rval=STRING_TO_JSVAL(JS_NewStringCopyZ(cx,n));
         return JS_TRUE;
 }
-#ifdef ADM_WIN32
+#ifdef __MINGW32__
 
 JSBool systemExecute(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
 {
@@ -373,14 +373,14 @@
 
         enterLock();
 	// clear file descriptor table of forked process and fork
-#if defined( __linux__) || defined(__macosx__) || defined(__APPLE__)
+#if defined( __linux__) || defined(__macosx__) || defined(__APPLE__) || defined(__CYGWIN__)
 	pid_t pidRtn = fork();
 #elif defined(__FreeBSD__) || defined(__OpenBSD__)
 	pid_t pidRtn = rfork(RFPROC|RFCFDG);
 #endif
 	if(pidRtn == 0)
 	{// begin child process
-#if defined( __linux__) || defined(__macosx__) || defined(__APPLE__)
+#if defined( __linux__) || defined(__macosx__) || defined(__APPLE__) || defined(__CYGWIN__)
 		close(STDIN_FILENO);
 		close(STDOUT_FILENO);
 		close(STDERR_FILENO);
@@ -416,7 +416,7 @@
 	return JS_TRUE;
 }// end systemExecute
 #endif
-#ifdef ADM_WIN32
+#ifdef __MINGW32__
 
 JSBool systemInclude(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
 {

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSGlobal.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSGlobal.h	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSGlobal.h	2008-03-02 16:00:49 UTC (rev 3813)
@@ -5,7 +5,7 @@
 
 #include "ADM_libraries/ADM_smjs/jsapi.h"
 #include <pthread.h>
-#define WIN32_CLASH
+
 // javscript debugging helper
 void printJSError(JSContext *cx, const char *message, JSErrorReport *report);
 bool SpidermonkeyInit();
@@ -19,7 +19,7 @@
 #else
 #define JSVAR(a,b,c) extern a b
 #endif
-#if defined( ADM_WIN32) && defined(JSDECLARE)
+#if defined( __MINGW32__) && defined(JSDECLARE)
  pthread_t g_pThreadSpidermonkey ;
 #else
 JSVAR( pthread_t, g_pThreadSpidermonkey , 0);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/DirectorySearch.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/DirectorySearch.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/DirectorySearch.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -14,7 +14,7 @@
 // Construction/Destruction
 //////////////////////////////////////////////////////////////////////
 
-#ifndef ADM_WIN32  // def __unix__
+#ifdef __unix__
 int CDirectorySearch::_findnext(unsigned long int hDir,_finddata_t *pfdData)
 {// begin _findnext
 	if(!hDir || hDir == 0xFFFFFFFF)
@@ -25,7 +25,7 @@
 	if(!pEntry)
 		return -1;
 	std::string sFilePath = "";
-#if defined( __linux__) || defined(__macosx__) || defined(ADM_WIN32)
+#if defined( __linux__) || defined(__macosx__) || defined(__MINGW32__)
 	strncpy(pfdData->name,pEntry->d_name,pEntry->d_reclen);
 	// append NULL terminator
 	pfdData->name[pEntry->d_reclen] = '\0';
@@ -50,7 +50,7 @@
 		pfdData->attrib |= _A_SUBDIR;
 	if(S_ISCHR(stInfo.st_mode) ||
 	S_ISBLK(stInfo.st_mode) ||
-#if !defined(ADM_WIN32)	
+#if !defined(__WIN32)	
 	S_ISLNK(stInfo.st_mode) ||
 	S_ISSOCK(stInfo.st_mode) ||
 #endif
@@ -100,7 +100,7 @@
 	const char *old=sDirectory.c_str();
 	s=new char[strlen(old)+10];
 	strcpy(s,old);
-#ifdef ADM_WIN32	
+#ifdef __WIN32	
 	strcat(s,"\\*");
 #endif
 	
@@ -112,7 +112,7 @@
 		printf("Find first failed\n");
 		return false;
 	}
-#ifdef ADM_WIN32   //ndef __unix__
+#ifdef __WIN32   //ndef __unix__
 	m_sDirectory = GetFileDirectory(sDirectory);
 #else
 	m_sDirectory = sDirectory;
@@ -149,7 +149,7 @@
 	for(int i = sFilePath.length()-1;i >= 0;i--)
 		if(sFilePath[i] == DIRECTORY_DELIMITOR)
 		{// begin copy directory name into buffer
-#ifdef ADM_WIN32
+#ifdef __WIN32
 			if(sFilePath[0] == DIRECTORY_DELIMITOR)
 			{
 				sFilePath.erase(0,1);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/DirectorySearch.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/DirectorySearch.h	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/DirectorySearch.h	2008-03-02 16:00:49 UTC (rev 3813)
@@ -14,7 +14,7 @@
 #if _MSC_VER > 1000
 #pragma once
 #endif // _MSC_VER > 1000
-#if defined( ADM_WIN32) 
+#ifdef __MINGW32__
 #include <io.h>
 #include <sys/stat.h>
 #else
@@ -27,7 +27,7 @@
 // create a non file bit for unix
 #define _A_NONFILE	0x03
 
-#if (defined( __unix__)||defined(__APPLE__)) && !defined(ADM_WIN32)
+#if (defined( __unix__)||defined(__APPLE__)) && !defined(__MINGW32__)
 
 // wrap the file mode bits
 #define _A_NORMAL	0x00
@@ -104,7 +104,7 @@
 	_finddata_t m_fdData;
 	std::string m_sDirectory;
 private:
-#ifndef ADM_WIN32 //def __unix__
+#ifdef __unix__
 	// prototypes
 	int _findfirst(const char *path,_finddata_t *pfdData);
 	int _findnext(unsigned long int hDir,_finddata_t *pfdData);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/StdFile.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/StdFile.h	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/StdFile.h	2008-03-02 16:00:49 UTC (rev 3813)
@@ -23,7 +23,7 @@
 
 using namespace std;
 
-#ifdef ADM_WIN32
+#ifdef __WIN32
 	const char DIRECTORY_DELIMITOR = '\\';
 #else
 	const char DIRECTORY_DELIMITOR = '/';

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_toolkit/automation.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_toolkit/automation.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_toolkit/automation.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -22,7 +22,7 @@
 #include <stdlib.h>
 //#include <glib.h>
 #include <signal.h>
-#ifndef ADM_WIN32
+#ifndef __WIN32
 #include <unistd.h>
 #endif
 #include <math.h>

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_toolkit/bitmap.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_toolkit/bitmap.h	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_toolkit/bitmap.h	2008-03-02 16:00:49 UTC (rev 3813)
@@ -42,11 +42,13 @@
 */
 } BITMAPHEADER;
 
+#ifndef _WINGDI_
 typedef struct BITMAPFILEHEADER
 {
-   uint16_t    type;
-	 uint32_t    size;
-   int16_t     xHotspot;
-   int16_t     yHotspot;
-   uint32_t    offsetToBits;
+   uint16_t    bfType;
+   uint32_t    bfSize;
+   int16_t     bfReserved1;
+   int16_t     bfReserved2;
+   uint32_t    bfOffBits;
 }  BITMAPFILEHEADER;
+#endif

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -43,7 +43,7 @@
 static void DIA_stop( void);
 static void change_priority(void);
 
-#ifndef ADM_WIN32
+#ifndef __WIN32
 static void shutdown_toggled(void);
 #endif
 
@@ -66,7 +66,7 @@
         
         gtk_register_dialog(dialog);
 
-	#ifndef ADM_WIN32
+	#ifndef __WIN32
 		// check for root privileges
 		if (getuid() != 0)
 		{
@@ -94,7 +94,7 @@
 
 		prefs->get(PRIORITY_ENCODING,&priority);
 
-	#ifndef ADM_WIN32
+	#ifndef __WIN32
 		// check for root privileges
 		if (getuid() == 0)
 		{
@@ -151,7 +151,7 @@
 
 void change_priority(void)
 {
-#ifndef ADM_WIN32
+#ifndef __WIN32
 	if (getuid() != 0)
 	{
 		gtk_signal_disconnect_by_func(GTK_OBJECT(WID(combobox_priority)), GTK_SIGNAL_FUNC(change_priority), NULL);
@@ -171,7 +171,7 @@
 	setpriority(PRIO_PROCESS, 0, ADM_getNiceValue(priorityLevel));
 }
 
-#ifndef ADM_WIN32
+#ifndef __WIN32
 void shutdown_toggled(void)
 {
 	if (getuid() != 0)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_integer.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_integer.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_integer.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -15,14 +15,10 @@
 
 #include "config.h"
 
-#include <string.h>
-#include <stdio.h>
 #include <math.h>
 
 #include "default.h"
 #include "../ADM_toolkit_gtk/ADM_gladeSupport.h"
-#include "../ADM_toolkit_gtk/toolkit_gtk.h"
-#include "../ADM_toolkit_gtk/toolkit_gtk_include.h"
 #include "../ADM_commonUI/DIA_factory.h"
 #include "ADM_assert.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_gtkRender.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_gtkRender.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_gtkRender.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -18,8 +18,8 @@
 #include "default.h"
 
 #include <gtk/gtk.h>
-#ifdef ADM_WIN32
-#define WIN32_CLASH
+
+#ifdef __WIN32
 #include <gdk/gdkwin32.h>
 #elif defined(__APPLE__)
 extern "C"
@@ -107,7 +107,7 @@
           
         win = gtk_widget_get_parent_window(widget);
 
-#ifdef ADM_WIN32
+#ifdef __WIN32
 		xinfo->display = (void*)GDK_WINDOW_HWND(widget->window);
 #elif defined(__APPLE__)
 		int windowWidth, windowHeight;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -349,7 +349,7 @@
 	                                ** you cannot overwrite segment data files, all files are kept open and
 	                                ** are detected here
 	                                */
-#ifndef ADM_WIN32
+#ifndef __WIN32
 					if( stat(name,&buf) == -1 ){
 						fprintf(stderr,"stat(%s) failed\n",name);
 						return;
@@ -461,7 +461,7 @@
 	{
 
                         selected_filename= (gchar *) 	gtk_file_chooser_get_filename(GTK_FILE_CHOOSER(dialog));
-#ifdef ADM_WIN32
+#ifdef __WIN32
                         if (*(selected_filename + strlen(selected_filename) - 1) == '\\'){
 #else			
                         if (*(selected_filename + strlen(selected_filename) - 1) == '/'){

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/eggtray_win32.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/eggtray_win32.c	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/eggtray_win32.c	2008-03-02 16:00:49 UTC (rev 3813)
@@ -22,7 +22,7 @@
 
 /* Stub code to interface with Shell_NotifyIcon */
 #include "config.h"
-#ifdef ADM_WIN32
+#ifdef __WIN32
 #include <windows.h>
 #include <wingdi.h>
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/eggtrayicon.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/eggtrayicon.c	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/eggtrayicon.c	2008-03-02 16:00:49 UTC (rev 3813)
@@ -18,7 +18,7 @@
  * Boston, MA 02111-1307, USA.
  */
 #include "config.h"
-#ifndef ADM_WIN32
+#ifndef __WIN32
 
 #include <gtk/gtk.h>
 #include <gtk/gtkversion.h>

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/toolkit.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/toolkit.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/toolkit.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -22,7 +22,7 @@
 #include <stdlib.h>
 #include <gtk/gtk.h>
 
-#ifndef ADM_WIN32
+#ifndef __WIN32
 #include <unistd.h>
 #endif
 
@@ -192,7 +192,7 @@
 */
 uint8_t UI_getPhysicalScreenSize(uint32_t *w, uint32_t *h)
 {
-#ifdef ADM_WIN32
+#ifdef __WIN32
 	getWorkingArea(w, h);
 #else
 	static int inited = 0;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/toolkit_dialog.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/toolkit_dialog.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/toolkit_dialog.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -67,13 +67,13 @@
         // old one is no longer modal
         if(widgetCount)
         {
-#ifndef ADM_WIN32                
+#ifndef __WIN32                
                 gtk_window_set_modal(GTK_WINDOW(widgetStack[widgetCount-1]), 0);
 #endif
                 gtk_window_set_transient_for (GTK_WINDOW(newdialog),GTK_WINDOW(widgetStack[widgetCount-1]));
         }
         gtk_window_set_modal(GTK_WINDOW(widgetStack[widgetCount]), 1);
-#ifdef ADM_WIN32
+#ifdef __WIN32
         gtk_window_set_icon(GTK_WINDOW(widgetStack[widgetCount]), gtk_window_get_icon (GTK_WINDOW(widgetStack[0])));
 #endif
         widgetCount++;
@@ -87,7 +87,7 @@
 	{
 		// Reset the old one modal
 		gtk_window_set_modal(GTK_WINDOW(widgetStack[widgetCount-1]), 1);
-#ifdef ADM_WIN32
+#ifdef __WIN32
 		gtk_window_present(GTK_WINDOW(widgetStack[widgetCount-1]));
 #endif
 	}

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_encoding.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_encoding.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_encoding.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -43,7 +43,7 @@
 
 	void priorityChanged(int priorityLevel)
 	{
-	#ifndef ADM_WIN32
+	#ifndef __WIN32
 		if (getuid() != 0)
 		{
 			ui.comboBoxPriority->disconnect(SIGNAL(currentIndexChanged(int)));
@@ -61,7 +61,7 @@
 
 	void shutdownChanged(int state)
 	{
-	#ifndef ADM_WIN32
+	#ifndef __WIN32
 		if (getuid() != 0)
 		{
 			ui.checkBoxShutdown->disconnect(SIGNAL(stateChanged(int)));
@@ -83,7 +83,7 @@
  {
 	ui.setupUi(this);
 
-#ifndef ADM_WIN32
+#ifndef __WIN32
 	//check for root privileges
 	if (getuid() == 0)
 	{
@@ -101,7 +101,7 @@
 
 	prefs->get(PRIORITY_ENCODING,&priority);	
 
-#ifndef ADM_WIN32
+#ifndef __WIN32
 	// check for root privileges
 	if (getuid() == 0)
 	{

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/T_preview.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/T_preview.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/T_preview.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -37,9 +37,10 @@
 /* Probably on unix/X11 ..*/
 #ifdef __APPLE__
 #include <Carbon/Carbon.h>
-#elif !defined(ADM_WIN32)
+#elif !defined(__WIN32)
 #include <QX11Info>
 #endif
+
 #include "avio.hxx"
 
 #include "ADM_colorspace/ADM_rgb.h"
@@ -188,7 +189,7 @@
 */
 void UI_getWindowInfo(void *draw, GUI_WindowInfo *xinfo)
 {
-#if defined(ADM_WIN32)
+#if defined(__WIN32)
 	xinfo->display=videoWindow->winId();
 #elif defined(__APPLE__)
 	QWidget* widget = videoWindow->parentWidget();

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -76,7 +76,7 @@
 #ifdef USE_VORBIS
         vorbis=1;
 #endif
-#ifdef ADM_WIN32
+#ifdef __WIN32
         win32=1;
 #endif
 #ifdef USE_FAAC

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -30,7 +30,7 @@
 #include "ADM_toolkit/toolkit.hxx"
 #include "DIA_factory.h"
 
-#ifdef ADM_WIN32
+#ifdef __WIN32
 #include "GUI_sdlRender.h"
 #endif
 
@@ -261,7 +261,7 @@
                              ,{RENDER_XV,   QT_TR_NOOP("XVideo (best)"),NULL}
 #endif
 #ifdef USE_SDL
-#ifdef ADM_WIN32
+#ifdef __WIN32
                              ,{RENDER_SDL,      QT_TR_NOOP("SDL (GDI)"),NULL}
 							 ,{RENDER_DIRECTX,      QT_TR_NOOP("SDL (DirectX)"),NULL}
 #else
@@ -317,10 +317,10 @@
 		#ifdef OSS_SUPPORT
 			{DEVICE_OSS, QT_TR_NOOP("OSS")},
 		#endif
-		#if	defined(USE_SDL) && !defined(ADM_WIN32)
+		#if	defined(USE_SDL) && !defined(__WIN32)
 			{DEVICE_SDL, QT_TR_NOOP("SDL")},
 		#endif
-		#ifdef ADM_WIN32
+		#ifdef __WIN32
 			{DEVICE_WIN32, QT_TR_NOOP("Win32")},
 		#endif
 			{DEVICE_DUMMY, QT_TR_NOOP("None")}
@@ -353,7 +353,7 @@
      
         // Filter path
         if( prefs->get(FILTERS_AUTOLOAD_PATH, &filterPath) != RC_OK )
-#ifndef ADM_WIN32
+#ifndef __WIN32
                filterPath = ADM_strdup("/tmp");
 #else
                filterPath = ADM_strdup("c:\\");
@@ -518,7 +518,7 @@
                 // Alternate mp3 tag (haali)
                 prefs->set(FEATURE_ALTERNATE_MP3_TAG,alternate_mp3_tag);
 
-			#if defined(ADM_WIN32) && defined(USE_SDL)
+			#if defined(__WIN32) && defined(USE_SDL)
 				// Initialise SDL again as driver may have changed
 				initSdl();
 			#endif

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/GUI_render.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/GUI_render.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/GUI_render.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -186,7 +186,7 @@
 uint8_t r=0;
 	ADM_assert(!accel_mode);
         
-#if !defined ADM_WIN32 && !defined(__APPLE__)
+#if !defined __WIN32 && !defined(__APPLE__)
 	// First check if local
 	// We do it in a very wrong way : If DISPLAY!=:0.0 we assume remote display
 	// in that case we do not even try to use accel
@@ -236,7 +236,7 @@
 
 #if defined(USE_SDL)
 			case RENDER_SDL:
-#ifdef ADM_WIN32
+#ifdef __WIN32
 			case RENDER_DIRECTX:
 #endif
 				accel_mode=new sdlAccelRender();

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/GUI_render.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/GUI_render.h	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/GUI_render.h	2008-03-02 16:00:49 UTC (rev 3813)
@@ -97,7 +97,7 @@
 #ifdef USE_SDL
         RENDER_SDL=2,
 
-#ifdef ADM_WIN32
+#ifdef __WIN32
 		RENDER_DIRECTX=3,
 #endif
 #endif

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/GUI_sdlRender.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/GUI_sdlRender.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/GUI_sdlRender.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -44,7 +44,7 @@
 #include "GUI_sdlRender.h"
 #include "ADM_assert.h"
 
-#ifdef ADM_WIN32
+#ifdef __WIN32
 #include "prefs.h"
 #endif
 
@@ -61,7 +61,7 @@
 static SDL_Overlay *sdl_overlay=NULL;
 static SDL_Surface *sdl_display=NULL;
 static SDL_Rect disp;
-#ifdef ADM_WIN32
+#ifdef __WIN32
 HWND sdlWin32;
 #endif
 static ColBase *color=NULL;
@@ -128,7 +128,7 @@
     }
 
     // Hack to get SDL to use GTK window, ugly but works
-#if !defined(ADM_WIN32) && !defined(__APPLE__)
+#if !defined(__WIN32) && !defined(__APPLE__)
 	char SDL_windowhack[32];
     int winId=(int)window->window;
 
@@ -146,7 +146,7 @@
 
     // Do it twice as the 1st time does not work
     // Hack to get SDL to use GTK window, ugly but works
-#if !defined(ADM_WIN32) && !defined(__APPLE__)
+#if !defined(__WIN32) && !defined(__APPLE__)
     putenv(SDL_windowhack);
     SDL_QuitSubSystem(SDL_INIT_VIDEO);
     if (SDL_InitSubSystem(SDL_INIT_VIDEO) < 0) 
@@ -161,7 +161,7 @@
     flags = SDL_ANYFORMAT | SDL_HWPALETTE | SDL_HWSURFACE | SDL_NOFRAME;
     bpp= SDL_VideoModeOK( w, h,  32, flags );
 
-#ifdef ADM_WIN32
+#ifdef __WIN32
 	// SDL window is created and displayed before we get a chance to set the parent.
 	// Therefore, align the SDL overlay with the client area before it is displayed.
 	POINT screenPoint = {};
@@ -204,7 +204,7 @@
 
     SDL_LockSurface(sdl_display);
 
-#ifdef ADM_WIN32
+#ifdef __WIN32
 	struct SDL_SysWMinfo wmInfo;
 	SDL_VERSION(&wmInfo.version);
 
@@ -281,7 +281,7 @@
 }
 uint8_t sdlAccelRender::display(uint8_t *ptr, uint32_t w, uint32_t h,renderZoom zoom)
 {
-#ifdef ADM_WIN32
+#ifdef __WIN32
 	// DirectX playback doesn't refresh correctly if the parent window is moved.
 	// Detect when the parent window has moved and force a coordinate update.
 	if (strcmp(getenv("SDL_VIDEODRIVER"), "directx") == 0)
@@ -369,7 +369,7 @@
 
     printf("[SDL] Version: %u.%u.%u\n",SDL_Linked_Version()->major, SDL_Linked_Version()->minor, SDL_Linked_Version()->patch);
 
-#ifdef ADM_WIN32
+#ifdef __WIN32
 	uint32_t videoDevice = RENDER_LAST;
 
 	if(!prefs->get(DEVICE_VIDEODEVICE, &videoDevice) || videoDevice != RENDER_DIRECTX)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidAnimated.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidAnimated.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidAnimated.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -126,7 +126,7 @@
             MKP(isNTSC,0);
             MKP(vignetteW,160);
             MKP(vignetteH,120);
-#ifdef ADM_WIN32
+#ifdef __WIN32
        MKP(backgroundImg,(ADM_filename *)ADM_strdup("c:\\test.jpg"));
 #else
             MKP(backgroundImg,(ADM_filename *)ADM_strdup("/tmp/taist.jpg"));

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidParticle.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidParticle.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidParticle.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -18,7 +18,7 @@
 #include <math.h>
 #include <algorithm>
 #include <string>
-#include <vector>
+//#include <vector>
 using namespace std;
 
 #include "default.h"
@@ -547,7 +547,7 @@
 
 uint8_t ImageTool::autoOutline (uint32_t x, uint32_t y)
 {
-    my_particle.init (debug);
+/*    my_particle.init (debug);
     PixelLocVec & outline = my_particle.outline;
 
     static int needbar = 1;
@@ -1070,7 +1070,7 @@
     }
 
 #endif // ? OLD_PARTICLE_WEDGE_SCHEME
-
+*/
     return 1;
 }
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidParticle.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidParticle.h	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidParticle.h	2008-03-02 16:00:49 UTC (rev 3813)
@@ -95,8 +95,8 @@
 //////////////////////////////////////////////////////////////////////////////
 
 #include <list>
-#include <vector>
-#include <iostream>
+//#include <vector>
+//#include <iostream>
 #include <iterator>
 
 class PixelLoc
@@ -136,8 +136,8 @@
     static const PixelLoc INVALID;
 };
 
-typedef std::vector <PixelLoc> PixelLocVec;
-
+//typedef std::vector <PixelLoc> PixelLocVec;
+/*
 inline std::ostream &
 operator << (std::ostream & s, const PixelLoc & pl)
 {
@@ -153,7 +153,7 @@
     s << "]";
     return s;
 }
-
+*/
 class ImageTool;
 
 #ifdef OLD_PARTICLE_WEDGE_SCHEME
@@ -244,7 +244,7 @@
         void trim_to_edge ();
     };
 
-    typedef std::vector <Wedge> WedgeVec;
+    //typedef std::vector <Wedge> WedgeVec;
 
     struct WedgePair
     {
@@ -286,7 +286,7 @@
 
     PixelLocVec outline;
     PixelLocVec white_pixels;
-    WedgeVec wedges;
+    //WedgeVec wedges;
     WedgePairVec wedge_pairs;
 
 public:
@@ -438,7 +438,7 @@
         };
     };
 
-    typedef std::vector <Wedge> WedgeVec;
+    //typedef std::vector <Wedge> WedgeVec;
 
     struct WedgePair
     {
@@ -470,7 +470,7 @@
         };
     };
 
-    typedef std::vector <WedgePair> WedgePairVec;
+    //typedef std::vector <WedgePair> WedgePairVec;
 
 public:
     uint16_t minx, maxx; // bounding box x
@@ -505,10 +505,10 @@
     double half_wedge_arc;
     BestFit best_fit;
 
-    PixelLocVec outline;
-    PixelLocVec white_pixels;
-    WedgeVec wedges;
-    WedgePairVec wedge_pairs;
+    //PixelLocVec outline;
+    //PixelLocVec white_pixels;
+    //WedgeVec wedges;
+    //WedgePairVec wedge_pairs;
 
 public:
     Particle ()
@@ -533,10 +533,10 @@
         wedge_interval = -1;
         half_wedge_arc = -1;
         best_fit = BestFit();
-        outline.clear();
-        white_pixels.clear();
-        wedges.clear();
-        wedge_pairs.clear();
+        //outline.clear();
+        //white_pixels.clear();
+        //wedges.clear();
+        //wedge_pairs.clear();
         debug = a_debug;
     }
 
@@ -555,7 +555,7 @@
             miny = y;
         if (y > maxy)
             maxy = y;
-        white_pixels.push_back (PixelLoc (x, y));
+        //white_pixels.push_back (PixelLoc (x, y));
     }
 
     void computeCentroid ()
@@ -579,18 +579,18 @@
 
     const WedgePair & getMinDist () const
     {
-        WedgePairVec::const_iterator wit = wedge_pairs.begin();
+/*        WedgePairVec::const_iterator wit = wedge_pairs.begin();
 #if 0
         while (!wit->total_distance)
             ++wit;
 #endif
-        return *wit;
+        return *wit; */
     }
 
     const WedgePair & getMaxDist () const
     {
-        WedgePairVec::const_iterator wit = wedge_pairs.end();
-        return *--wit;
+        /*WedgePairVec::const_iterator wit = wedge_pairs.end();
+        return *--wit; */
     }
 
     float getMinDistance () const
@@ -820,11 +820,11 @@
 
     // implementation is in ADM_vidSwissArmyKnife.cpp - nothing else uses it
     // (currently).
-
+/*
     template <class Oper, class Histo>
     void convolve (const std::vector <float> & kernel,
                    uint32_t kw, uint32_t kh, int32_t bias, const Oper & op,
-                   const Histo & histogram_in);
+                   const Histo & histogram_in); */
 
     void setDebug (uint32_t newDebug)
     {

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSRTload.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSRTload.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSRTload.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -451,7 +451,7 @@
 	// Get the amound of utf16...
 	done=(ADM_RAW-sout)>>1;
 
-#if defined(ADM_WIN32) || defined(ADM_BSD_FAMILY)
+#if defined(__WIN32) || defined(ADM_BSD_FAMILY)
 	// For Win32 and BSD we swap le and be
 
        ADM_GLYPH_T glyph;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -778,7 +778,7 @@
 };
 
 //============================================================================
-
+/*
 template <typename Oper, typename Histo>
 void ImageTool::convolve (const std::vector <float> & kernel,
                           uint32_t kw, uint32_t kh, int32_t bias,
@@ -886,7 +886,7 @@
             printf ("    Saturated %d low, %d high\n", satlow, sathigh);
     }
 }
-
+*/
 //============================================================================
 
 template <typename Oper, typename Histo>
@@ -1614,7 +1614,7 @@
         }
     }
 
-    FloatVector & kernel = myInfo->kernel;
+    //FloatVector & kernel = myInfo->kernel;
     uint32_t & kernel_w = myInfo->kernel_w;
     uint32_t & kernel_h = myInfo->kernel_h;
 
@@ -1626,7 +1626,7 @@
 
         if (doingConvolution)
         {
-            kernel.clear();
+            //kernel.clear();
             kernel_w = 0;
             kernel_h = 0;
 
@@ -1671,7 +1671,7 @@
                 return 0;
             }
 #endif
-
+/*
             copy (istream_iterator <float> (inputStream),
                   istream_iterator <float> (),
                   back_inserter (kernel));
@@ -1709,7 +1709,7 @@
                 }
                 if (count % kernel_w)
                     printf ("[incomplete?!]\n");
-            }
+            } */
         }
         else // file image (not convolution)
         {
@@ -2057,157 +2057,157 @@
 
     if (doingConvolution)
     {
-        if (kernel.empty())
+        /*if (kernel.empty())
         {
             fprintf (stderr, "No convolution kernel loaded - can't do "
                      "convolution!\n");
             return 0;
-        }
+        }*/
 
         switch (tool)
         {
         case TOOL_A:
-            imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsA(), HistogramNull());
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsA(), HistogramNull());
             break;
         case TOOL_P: // HERE: we could optimize this if we wanted to
-            imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsP(), HistogramNull());
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsP(), HistogramNull());
             break;
         case TOOL_P_MINUS_A:
-            imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsPminusA(), HistogramNull());
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsPminusA(), HistogramNull());
             break;
         case TOOL_A_MINUS_P:
-            imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsAminusP(), HistogramNull());
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsAminusP(), HistogramNull());
             break;
         case TOOL_P_PLUS_A:
-            imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsPplusA(), HistogramNull());
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsPplusA(), HistogramNull());
             break;
         case TOOL_P_TIMES_A:
-            imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsPtimesA(), HistogramNull());
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsPtimesA(), HistogramNull());
             break;
         case TOOL_P_DIVBY_A:
-            imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsPdivByA(), HistogramNull());
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsPdivByA(), HistogramNull());
             break;
         case TOOL_A_DIVBY_P:
-            imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsAdivByP(), HistogramNull());
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsAdivByP(), HistogramNull());
             break;
         case TOOL_MIN_P_A:
-            imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsMinPA(), HistogramNull());
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsMinPA(), HistogramNull());
             break;
         case TOOL_MAX_P_A:
-            imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsMaxPA(), HistogramNull());
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsMaxPA(), HistogramNull());
             break;
 
         case TOOL_A_WITH_HISTOGRAM:
-            imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsA(), *histogram);
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsA(), *histogram);
             break;
         case TOOL_P_WITH_HISTOGRAM: // HERE: we could optimize this if we wanted to
-            imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsP(), *histogram);
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsP(), *histogram);
             break;
         case TOOL_P_MINUS_A_WITH_HISTOGRAM:
-            imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsPminusA(), *histogram);
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsPminusA(), *histogram);
             break;
         case TOOL_A_MINUS_P_WITH_HISTOGRAM:
-            imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsAminusP(), *histogram);
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsAminusP(), *histogram);
             break;
         case TOOL_P_PLUS_A_WITH_HISTOGRAM:
-            imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsPplusA(), *histogram);
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsPplusA(), *histogram);
             break;
         case TOOL_P_TIMES_A_WITH_HISTOGRAM:
-            imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsPtimesA(), *histogram);
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsPtimesA(), *histogram);
             break;
         case TOOL_P_DIVBY_A_WITH_HISTOGRAM:
-            imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsPdivByA(), *histogram);
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsPdivByA(), *histogram);
             break;
         case TOOL_A_DIVBY_P_WITH_HISTOGRAM:
-            imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsAdivByP(), *histogram);
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsAdivByP(), *histogram);
             break;
         case TOOL_MIN_P_A_WITH_HISTOGRAM:
-            imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsMinPA(), *histogram);
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsMinPA(), *histogram);
             break;
         case TOOL_MAX_P_A_WITH_HISTOGRAM:
-            imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsMaxPA(), *histogram);
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsMaxPA(), *histogram);
             break;
 
         case TOOL_A_SCALED:
-            imtool.convolve (kernel, kernel_w, kernel_h, bias,
-                             OpPequalsA_Scaled (rbias, rmultiplier), HistogramNull());
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias,
+                             //OpPequalsA_Scaled (rbias, rmultiplier), HistogramNull());
             break;
         case TOOL_P_SCALED: // HERE_SCALED: we could optimize this if we wanted to
-            imtool.convolve (kernel, kernel_w, kernel_h, bias,
-                             OpPequalsP_Scaled (rbias, rmultiplier), HistogramNull());
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias,
+                             //OpPequalsP_Scaled (rbias, rmultiplier), HistogramNull());
             break;
         case TOOL_P_MINUS_A_SCALED:
-            imtool.convolve (kernel, kernel_w, kernel_h, bias,
-                             OpPequalsPminusA_Scaled (rbias, rmultiplier), HistogramNull());
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias,
+                             //OpPequalsPminusA_Scaled (rbias, rmultiplier), HistogramNull());
             break;
         case TOOL_A_MINUS_P_SCALED:
-            imtool.convolve (kernel, kernel_w, kernel_h, bias,
-                             OpPequalsAminusP_Scaled (rbias, rmultiplier), HistogramNull());
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias,
+                             //OpPequalsAminusP_Scaled (rbias, rmultiplier), HistogramNull());
             break;
         case TOOL_P_PLUS_A_SCALED:
-            imtool.convolve (kernel, kernel_w, kernel_h, bias,
-                             OpPequalsPplusA_Scaled (rbias, rmultiplier), HistogramNull());
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias,
+                             //OpPequalsPplusA_Scaled (rbias, rmultiplier), HistogramNull());
             break;
         case TOOL_P_TIMES_A_SCALED:
-            imtool.convolve (kernel, kernel_w, kernel_h, bias,
-                             OpPequalsPtimesA_Scaled (rbias, rmultiplier), HistogramNull());
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias,
+                             //OpPequalsPtimesA_Scaled (rbias, rmultiplier), HistogramNull());
             break;
         case TOOL_P_DIVBY_A_SCALED:
-            imtool.convolve (kernel, kernel_w, kernel_h, bias,
-                             OpPequalsPdivByA_Scaled (rbias, rmultiplier), HistogramNull());
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias,
+                             //OpPequalsPdivByA_Scaled (rbias, rmultiplier), HistogramNull());
             break;
         case TOOL_A_DIVBY_P_SCALED:
-            imtool.convolve (kernel, kernel_w, kernel_h, bias,
-                             OpPequalsAdivByP_Scaled (rbias, rmultiplier), HistogramNull());
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias,
+                             //OpPequalsAdivByP_Scaled (rbias, rmultiplier), HistogramNull());
             break;
         case TOOL_MIN_P_A_SCALED:
-            imtool.convolve (kernel, kernel_w, kernel_h, bias,
-                             OpPequalsMinPA_Scaled (rbias, rmultiplier), HistogramNull());
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias,
+                             //OpPequalsMinPA_Scaled (rbias, rmultiplier), HistogramNull());
             break;
         case TOOL_MAX_P_A_SCALED:
-            imtool.convolve (kernel, kernel_w, kernel_h, bias,
-                             OpPequalsMaxPA_Scaled (rbias, rmultiplier), HistogramNull());
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias,
+                             //OpPequalsMaxPA_Scaled (rbias, rmultiplier), HistogramNull());
             break;
 
         case TOOL_A_SCALED_WITH_HISTOGRAM:
-            imtool.convolve (kernel, kernel_w, kernel_h, bias,
-                             OpPequalsA_Scaled (rbias, rmultiplier), *histogram);
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias,
+                             //OpPequalsA_Scaled (rbias, rmultiplier), *histogram);
             break;
         case TOOL_P_SCALED_WITH_HISTOGRAM: // HERE: we could optimize this if we wanted to
-            imtool.convolve (kernel, kernel_w, kernel_h, bias,
-                             OpPequalsP_Scaled (rbias, rmultiplier), *histogram);
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias,
+                             //OpPequalsP_Scaled (rbias, rmultiplier), *histogram);
             break;
         case TOOL_P_MINUS_A_SCALED_WITH_HISTOGRAM:
-            imtool.convolve (kernel, kernel_w, kernel_h, bias,
-                             OpPequalsPminusA_Scaled (rbias, rmultiplier), *histogram);
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias,
+                             //OpPequalsPminusA_Scaled (rbias, rmultiplier), *histogram);
             break;
         case TOOL_A_MINUS_P_SCALED_WITH_HISTOGRAM:
-            imtool.convolve (kernel, kernel_w, kernel_h, bias,
-                             OpPequalsAminusP_Scaled (rbias, rmultiplier), *histogram);
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias,
+                             //OpPequalsAminusP_Scaled (rbias, rmultiplier), *histogram);
             break;
         case TOOL_P_PLUS_A_SCALED_WITH_HISTOGRAM:
-            imtool.convolve (kernel, kernel_w, kernel_h, bias,
-                             OpPequalsPplusA_Scaled (rbias, rmultiplier), *histogram);
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias,
+                             //OpPequalsPplusA_Scaled (rbias, rmultiplier), *histogram);
             break;
         case TOOL_P_TIMES_A_SCALED_WITH_HISTOGRAM:
-            imtool.convolve (kernel, kernel_w, kernel_h, bias,
-                             OpPequalsPtimesA_Scaled (rbias, rmultiplier), *histogram);
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias,
+                             //OpPequalsPtimesA_Scaled (rbias, rmultiplier), *histogram);
             break;
         case TOOL_P_DIVBY_A_SCALED_WITH_HISTOGRAM:
-            imtool.convolve (kernel, kernel_w, kernel_h, bias,
-                             OpPequalsPdivByA_Scaled (rbias, rmultiplier), *histogram);
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias,
+                             //OpPequalsPdivByA_Scaled (rbias, rmultiplier), *histogram);
             break;
         case TOOL_A_DIVBY_P_SCALED_WITH_HISTOGRAM:
-            imtool.convolve (kernel, kernel_w, kernel_h, bias,
-                             OpPequalsAdivByP_Scaled (rbias, rmultiplier), *histogram);
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias,
+                             //OpPequalsAdivByP_Scaled (rbias, rmultiplier), *histogram);
             break;
         case TOOL_MIN_P_A_SCALED_WITH_HISTOGRAM:
-            imtool.convolve (kernel, kernel_w, kernel_h, bias,
-                             OpPequalsMinPA_Scaled (rbias, rmultiplier), *histogram);
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias,
+                             //OpPequalsMinPA_Scaled (rbias, rmultiplier), *histogram);
             break;
         case TOOL_MAX_P_A_SCALED_WITH_HISTOGRAM:
-            imtool.convolve (kernel, kernel_w, kernel_h, bias,
-                             OpPequalsMaxPA_Scaled (rbias, rmultiplier), *histogram);
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias,
+                             //OpPequalsMaxPA_Scaled (rbias, rmultiplier), *histogram);
             break;
 
         default:

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.h	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.h	2008-03-02 16:00:49 UTC (rev 3813)
@@ -22,7 +22,7 @@
 
 #include "ADM_video/ADM_cache.h"
 
-#include <vector>
+//#include <vector>
 #include <string>
 
 #include <sys/time.h>
@@ -76,7 +76,7 @@
     // configure() method.  This would allow the objects to maintain a
     // persistent state in a more straightforward way.
 
-    typedef std::vector <float> FloatVector;
+    //typedef std::vector <float> FloatVector;
 
     class PersistentInfo
     {
@@ -85,7 +85,7 @@
         CONFcouple *  oldConf;
         uint32_t      refCount;
 
-        FloatVector   kernel;
+        //FloatVector   kernel;
         uint32_t      kernel_w;
         uint32_t      kernel_h;
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/CMakeLists.txt	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/CMakeLists.txt	2008-03-02 16:00:49 UTC (rev 3813)
@@ -38,10 +38,7 @@
 	ADM_vidVobSubRender.cpp
 	ADM_vobsubinfo.cpp
 	ADM_vidComputeAverage.cpp
-	ADM_vidSwissArmyKnife.cpp
-	ADM_vidThreshold.cpp
-	ADM_vidParticle.cpp
-	ADM_vidEraser.cpp)
+	ADM_vidThreshold.cpp)
 
 ADD_ADM_LIB_ALL_TARGETS(ADM_videoFilter ${ADM_videoFilter_SRCS})
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt	2008-03-02 16:00:49 UTC (rev 3813)
@@ -460,7 +460,14 @@
 ###########################################
 IF (ADM_OS_WINDOWS)
 	ADD_ADMLIB_ALL_TARGETS(ADM_osSupport)
-	ADD_LIB_ALL_TARGETS(pthreadGC2 winmm wsock32 imagehlp)
+	
+	IF (MINGW)
+		ADD_LIB_ALL_TARGETS(imagehlp wsock32 pthreadGC2)
+	ELSEIF (CYGWIN)
+		ADD_LIB_ALL_TARGETS(pthread cygwin)
+	ENDIF (MINGW)
+	
+	ADD_LIB_ALL_TARGETS(winmm)
 	ADD_LIB_ALL_TARGETS("-mno-cygwin -Wl,--export-all-symbols")
 
 	ADD_TARGET_LDFLAGS(avidemux2_cli "-Wl,-subsystem,console")

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/avi_vars.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/avi_vars.h	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/avi_vars.h	2008-03-02 16:00:49 UTC (rev 3813)
@@ -1,7 +1,6 @@
 #ifndef __AVI_VARS
 #define __AVI_VARS
 #include "default.h"
-#include <assert.h>
 #include "fourcc.h"
 #include "ADM_editor/ADM_edit.hxx"
 //----------------------
@@ -16,7 +15,7 @@
 #if (defined( HAVE_LIBESD) && defined(HAVE_ESD_H)) || \
  defined(OSS_SUPPORT) || defined (USE_ARTS) || \
   defined(USE_SDL) || defined(CONFIG_DARWIN) || \
-  defined(ADM_WIN32) || defined(ALSA_SUPPORT)
+  defined(__WIN32) || defined(ALSA_SUPPORT)
   
 #define HAVE_AUDIO
 #endif

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/gtk_gui.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/gtk_gui.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/gtk_gui.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -984,7 +984,7 @@
             setCurrentMixerFromString("NONE");
         }
 	for(i=strlen(longname);i>=0;i--)
-#ifdef ADM_WIN32
+#ifdef __WIN32
 		if( longname[i] == '\\' || longname[i] == '/' ){
 #else
 		if( longname[i] == '/' ){

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/gui_savenew.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/gui_savenew.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/gui_savenew.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -24,7 +24,7 @@
 #include <time.h>
 #include <sys/time.h>
 #include <pthread.h>
-#define WIN32_CLASH
+
 #include "avi_vars.h"
 #include "prototype.h"
 #include "ADM_toolkit/toolkit.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/guiplay.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/guiplay.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/guiplay.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -309,7 +309,7 @@
 //_______________________________________
 {
     uint32_t latency, one_sec;
-    uint32_t small;
+    uint32_t small_;
     uint32_t channels;
 
     wavbuf = 0;
@@ -367,11 +367,11 @@
     uint32_t fill=0;
     while(fill<one_sec)
     {
-      if (!(small = playback->fill(one_sec-fill, wavbuf,&status)))
+      if (!(small_ = playback->fill(one_sec-fill, wavbuf,&status)))
       {
         break;
       }
-    fill+=small;
+    fill+=small_;
     }
     dauds += fill/channels;  // In sample
     AVDM_AudioPlay(wavbuf, fill);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/main.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/main.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/main.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -23,10 +23,8 @@
 
 #include "default.h"
 
-#ifdef ADM_WIN32
-#define WIN32_CLASH
+#ifdef __MINGW32__
 #include <windows.h>
-#include <wingdi.h>
 #include <excpt.h>
 #endif
 
@@ -81,14 +79,17 @@
 extern void ADM_memStatEnd( void );
 extern void getUIDescription(char*);
 
-#ifdef ADM_WIN32
+#ifdef __MINGW32__
 extern EXCEPTION_DISPOSITION exceptionHandler(struct _EXCEPTION_RECORD* pExceptionRec, void* pEstablisherFrame, struct _CONTEXT* pContextRecord, void* pDispatcherContext);
-extern bool getWindowsVersion(char* version);
-extern void redirectStdoutToFile(void);
 #else
 extern void installSigHandler(void);
 #endif
 
+#ifdef __WIN32
+extern bool getWindowsVersion(char* version);
+extern void redirectStdoutToFile(void);
+#endif
+
 extern uint8_t  quotaInit(void);
 extern void ADMImage_stat( void );
 extern uint8_t win32_netInit(void);
@@ -111,7 +112,7 @@
 
 int main(int argc, char *argv[])
 {
-#ifdef ADM_WIN32
+#ifdef __WIN32
 	redirectStdoutToFile();
 #endif
 
@@ -119,7 +120,7 @@
 	new_progname = argv[0];
 #endif
 
-#ifndef ADM_WIN32
+#ifndef __MINGW32__
 	// thx smurf uk :)
     installSigHandler();
 #endif
@@ -148,7 +149,7 @@
 
 	printf("Build Target: ");
 
-#if defined(ADM_WIN32)
+#if defined(__WIN32)
 	printf("Microsoft Windows");
 #elif defined(__APPLE__)
 	printf("Apple");
@@ -170,7 +171,7 @@
 	getUIDescription(uiDesc);
 	printf("User Interface: %s\n", uiDesc);
 
-#ifdef ADM_WIN32
+#ifdef __WIN32
 	char version[250];
 
 	if (getWindowsVersion(version))
@@ -198,7 +199,7 @@
 
 	atexit(onexit);
 
-#ifdef ADM_WIN32
+#ifdef __MINGW32__
     win32_netInit();
 #endif
 
@@ -256,7 +257,7 @@
     else
 		ADM_assert(0); 
 
-#ifdef ADM_WIN32
+#ifdef __MINGW32__
 	__try1(exceptionHandler);
 #endif
 

Modified: branches/avidemux_2.5_branch_gruntster/cmake/config.h.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/config.h.cmake	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/cmake/config.h.cmake	2008-03-02 16:00:49 UTC (rev 3813)
@@ -24,9 +24,6 @@
 /* Sparc workstations */
 #cmakedefine ADM_SPARC
 
-/* Build for Windows 32bits */
-#cmakedefine ADM_WIN32
-
 #if ${CONFIG_HEADER_TYPE} == ADM_BUILD_GTK || ${CONFIG_HEADER_TYPE} == ADM_BUILD_QT4
 /* use ALSA as possible audio device */
 #cmakedefine ALSA_SUPPORT
@@ -253,7 +250,7 @@
 #cmakedefine ADM_CPU_X86
 #cmakedefine ADM_CPU_X86_64
 
-#ifdef ADM_OS_WINDOWS
+#ifdef __MINGW32__
 #define rindex strrchr
 #define index strchr
 #define ftello ftello64



From gruntster at mail.berlios.de  Sun Mar  2 17:55:19 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Sun, 2 Mar 2008 17:55:19 +0100
Subject: [Avidemux-svn-commit] r3814 - in
	branches/avidemux_2.5_branch_gruntster/avidemux: .
	ADM_libraries/ADM_utilities ADM_userInterfaces/ADM_commonUI
Message-ID: <200803021655.m22GtJSa012816@sheep.berlios.de>

Author: gruntster
Date: 2008-03-02 17:55:15 +0100 (Sun, 02 Mar 2008)
New Revision: 3814

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/default.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/GUI_sdlRender.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/avi_vars.h
Log:
[CMake] only use CONFIG_DARWIN in lavc

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/default.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/default.h	2008-03-02 16:00:49 UTC (rev 3813)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/default.h	2008-03-02 16:55:15 UTC (rev 3814)
@@ -96,7 +96,7 @@
 
 #if (defined( HAVE_LIBESD) && defined(HAVE_ESD_H)) || \
  defined(OSS_SUPPORT) || defined (USE_ARTS) || \
-  defined(USE_SDL) || defined(CONFIG_DARWIN) || \
+  defined(USE_SDL) || defined(__APPLE__) || \
   defined(__WIN32) || defined(ALSA_SUPPORT)
   
 #define HAVE_AUDIO

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp	2008-03-02 16:00:49 UTC (rev 3813)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp	2008-03-02 16:55:15 UTC (rev 3814)
@@ -305,7 +305,7 @@
 		#ifdef USE_ARTS
 			{DEVICE_ARTS, QT_TR_NOOP("aRts")},
 		#endif
-		#ifdef CONFIG_DARWIN
+		#ifdef __APPLE__
 			{DEVICE_COREAUDIO, QT_TR_NOOP("Core Audio")},
 		#endif
 		#ifdef USE_ESD

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/GUI_sdlRender.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/GUI_sdlRender.cpp	2008-03-02 16:00:49 UTC (rev 3813)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/GUI_sdlRender.cpp	2008-03-02 16:55:15 UTC (rev 3814)
@@ -256,12 +256,7 @@
         printf("[SDL] Overlay created; type: %d, planes: %d, pitch: %d\n", sdl_overlay->hw_overlay, sdl_overlay->planes, sdl_overlay->pitches[0]);
 
         if(!sdl_overlay->hw_overlay)
-        {
             printf("[SDL] Hardware acceleration disabled\n");
-        #ifdef CONFIG_DARWIN
-            printf("[SDL] ** Darwin**\n");
-        #endif
-        }
 
         if(!useYV12) color->reset(w,h);
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/avi_vars.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/avi_vars.h	2008-03-02 16:00:49 UTC (rev 3813)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/avi_vars.h	2008-03-02 16:55:15 UTC (rev 3814)
@@ -14,7 +14,7 @@
 //----------------------
 #if (defined( HAVE_LIBESD) && defined(HAVE_ESD_H)) || \
  defined(OSS_SUPPORT) || defined (USE_ARTS) || \
-  defined(USE_SDL) || defined(CONFIG_DARWIN) || \
+  defined(USE_SDL) || defined(__APPLE__) || \
   defined(__WIN32) || defined(ALSA_SUPPORT)
   
 #define HAVE_AUDIO



From mean at mail.berlios.de  Sun Mar  2 18:13:40 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 2 Mar 2008 18:13:40 +0100
Subject: [Avidemux-svn-commit] r3815 -
	branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_avi
Message-ID: <200803021713.m22HDetU014747@sheep.berlios.de>

Author: mean
Date: 2008-03-02 18:13:39 +0100 (Sun, 02 Mar 2008)
New Revision: 3815

Modified:
   branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_avi/op_aviwrite.cpp
Log:
[Avi] AC3/DTS fix for windows vista

Modified: branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_avi/op_aviwrite.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_avi/op_aviwrite.cpp	2008-03-02 16:55:15 UTC (rev 3814)
+++ branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_avi/op_aviwrite.cpp	2008-03-02 17:13:39 UTC (rev 3815)
@@ -359,6 +359,17 @@
 		extraLen=4;
 		}
 		break;
+#if 1		
+	case WAV_DTS:
+	case WAV_AC3: // Vista compatibility
+		 		  extra=(uint8_t *)wmaheader;
+		 		  extra[0]=0;
+		 		  extra[1]=0;
+				  extraLen=2;
+				  header->dwScale = 1;  
+				  wav.blockalign=1;	
+			break;
+#endif			
 	case WAV_MP3:							
 		  // then update VBR fields
 		  mp3vbr.cbsize = R16(12);



From mean at mail.berlios.de  Sun Mar  2 18:13:58 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 2 Mar 2008 18:13:58 +0100
Subject: [Avidemux-svn-commit] r3816 -
	branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi
Message-ID: <200803021713.m22HDwGc014791@sheep.berlios.de>

Author: mean
Date: 2008-03-02 18:13:57 +0100 (Sun, 02 Mar 2008)
New Revision: 3816

Modified:
   branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_aviwrite.cpp
Log:
[Avi] Fix AC3/DTS header wrt vista


Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_aviwrite.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_aviwrite.cpp	2008-03-02 17:13:39 UTC (rev 3815)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_aviwrite.cpp	2008-03-02 17:13:57 UTC (rev 3816)
@@ -359,6 +359,17 @@
 		extraLen=4;
 		}
 		break;
+#if 1		
+	case WAV_DTS:
+	case WAV_AC3: // Vista compatibility
+		 		  extra=(uint8_t *)wmaheader;
+		 		  extra[0]=0;
+		 		  extra[1]=0;
+				  extraLen=2;
+				  header->dwScale = 1;  
+				  wav.blockalign=1;	
+			break;
+#endif			
 	case WAV_MP3:							
 		  // then update VBR fields
 		  mp3vbr.cbsize = R16(12);



From mean at mail.berlios.de  Sun Mar  2 19:38:12 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 2 Mar 2008 19:38:12 +0100
Subject: [Avidemux-svn-commit] r3817 - branches
Message-ID: <200803021838.m22IcCIg005253@sheep.berlios.de>

Author: mean
Date: 2008-03-02 19:38:11 +0100 (Sun, 02 Mar 2008)
New Revision: 3817

Added:
   branches/avidemux_2.5_mean2/
Log:


Copied: branches/avidemux_2.5_mean2 (from rev 3816, branches/avidemux_2.5_branch_gruntster)



From gruntster at mail.berlios.de  Mon Mar  3 10:27:10 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Mon, 3 Mar 2008 10:27:10 +0100
Subject: [Avidemux-svn-commit] r3818 - in
	branches/avidemux_2.5_branch_gruntster: . avidemux
	avidemux/ADM_libraries avidemux/ADM_libraries/ADM_lavcodec
	avidemux/ADM_libraries/ADM_libmpeg2enc
	avidemux/ADM_libraries/ADM_libswscale
	avidemux/ADM_libraries/ADM_mplex
	avidemux/ADM_libraries/ADM_utilities avidemux/ADM_script
	avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2
	avidemux/ADM_userInterfaces/ADM_commonUI
	avidemux/ADM_videoFilter cmake cmake_compile_check
Message-ID: <200803030927.m239RAwO009128@sheep.berlios.de>

Author: gruntster
Date: 2008-03-03 10:26:56 +0100 (Mon, 03 Mar 2008)
New Revision: 3818

Added:
   branches/avidemux_2.5_branch_gruntster/cmake_compile_check/cpu_altivec_check.cpp
   branches/avidemux_2.5_branch_gruntster/cmake_compile_check/cpu_ppc_check.cpp
   branches/avidemux_2.5_branch_gruntster/cmake_compile_check/cpu_ssse3_check.cpp
   branches/avidemux_2.5_branch_gruntster/cmake_compile_check/cpu_x86-64_check.cpp
   branches/avidemux_2.5_branch_gruntster/cmake_compile_check/cpu_x86_check.cpp
Removed:
   branches/avidemux_2.5_branch_gruntster/cmake_compile_check/ssse3_check.cpp
Modified:
   branches/avidemux_2.5_branch_gruntster/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavcodec/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libswscale/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/admmangle.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/DirectorySearch.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/DirectorySearch.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/cmake/admCheckAudioCodecLibs.cmake
   branches/avidemux_2.5_branch_gruntster/cmake/admCheckAudioDeviceLibs.cmake
   branches/avidemux_2.5_branch_gruntster/cmake/admCheckMiscLibs.cmake
   branches/avidemux_2.5_branch_gruntster/cmake/admDetermineSystem.cmake
   branches/avidemux_2.5_branch_gruntster/cmake/admSetLavcodecFlags.cmake
   branches/avidemux_2.5_branch_gruntster/cmake/config.h.cmake
Log:
[CMake] guess GCC CPU support and remove CYG_MANGLING and ADM_OS_*

Modified: branches/avidemux_2.5_branch_gruntster/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/CMakeLists.txt	2008-03-02 18:38:11 UTC (rev 3817)
+++ branches/avidemux_2.5_branch_gruntster/CMakeLists.txt	2008-03-03 09:26:56 UTC (rev 3818)
@@ -39,22 +39,15 @@
 ########################################
 INCLUDE(admDetermineSystem)
 
-IF (ADM_OS_WINDOWS)
-	SET(CYG_MANGLING 1)
-ENDIF (ADM_OS_WINDOWS)
-
-IF (ADM_OS_DARWIN)
-	SET(CYG_MANGLING 1)
-ENDIF (ADM_OS_DARWIN)
-
 IF (CYGWIN)
 	SET(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -mwin32")
 	SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -mwin32")
 ENDIF (CYGWIN)
 
-IF (ADM_OS_LINUX)
-	SET(USE_JOG 1)		# jog shuttle is only available on Linux due to its interface
-ENDIF (ADM_OS_LINUX)
+IF (UNIX)
+	# jog shuttle is only available on Linux due to its interface
+	SET(USE_JOG 1)
+ENDIF (UNIX)
 
 ########################################
 # Standard Avidemux defines
@@ -78,15 +71,17 @@
 	SET(ARCH_X86_64 1)
 	SET(ARCH_64_BITS 1)
 ELSEIF (ADM_CPU_PPC)
-	OPTION(ALTIVEC ""  ON)
+	SET(ARCH_POWERPC 1)
 
-	IF (ALTIVEC)
-		SET(ADM_CPUCAP_ALTIVEC 1)
+	IF (ADM_CPU_ALTIVEC)
 		SET(ARCH_PPC 1)
-		SET(ARCH_POWERPC 1)
 		SET(USE_ALTIVEC 1)
 		SET(HAVE_ALTIVEC 1)
-	ENDIF (ALTIVEC)
+
+		IF (NOT APPLE)
+			SET(HAVE_ALTIVEC_H 1)
+		ENDIF (NOT APPLE)
+	ENDIF (ADM_CPU_ALTIVEC)
 ENDIF (ADM_CPU_X86)
 
 IF (CMAKE_WORDS_BIGENDIAN)
@@ -118,16 +113,11 @@
 ###########################################
 # CPU Specific
 ###########################################
-IF (ADM_CPUCAP_ALTIVEC)
-	SET(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -mabi=altivec -maltivec")
-	SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -mabi=altivec -maltivec")
+IF (ADM_CPU_ALTIVEC)
+	SET(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} ${ADM_ALTIVEC_FLAGS}")
+	SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} ${ADM_ALTIVEC_FLAGS}")
+ENDIF (ADM_CPU_ALTIVEC)
 
-	IF (ADM_OS_DARWIN)
-		SET(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -faltivec")
-		SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -faltivec")
-	ENDIF (ADM_OS_DARWIN)
-ENDIF (ADM_CPUCAP_ALTIVEC)
-
 ########################################
 # Subversion
 ########################################
@@ -191,10 +181,6 @@
 CHECK_INCLUDE_FILES(unistd.h     HAVE_UNISTD_H)		# internal use, ass, mad
 CHECK_INCLUDE_FILES(malloc.h     HAVE_MALLOC_H)		# libavcodec, libavutil, libpostproc, libswscale, mplex
 
-IF (ADM_CPUCAP_ALTIVEC AND NOT ADM_OS_DARWIN)
-	CHECK_INCLUDE_FILES(altivec.h    HAVE_ALTIVEC_H)	# libavcodec, libpostproc, libswscale, mpeg2dec, mpeg2enc
-ENDIF (ADM_CPUCAP_ALTIVEC AND NOT ADM_OS_DARWIN)
-
 MESSAGE("")
 
 ########################################

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavcodec/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavcodec/CMakeLists.txt	2008-03-02 18:38:11 UTC (rev 3817)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavcodec/CMakeLists.txt	2008-03-03 09:26:56 UTC (rev 3818)
@@ -40,12 +40,12 @@
 		i386/snowdsp_mmx.c i386/fft_3dn.c)
 ENDIF(ARCH_X86)
 
-IF (ADM_CPUCAP_ALTIVEC)
+IF (ADM_CPU_ALTIVEC)
 	SET(${ADM_LIB}_SRCS  ${${ADM_LIB}_SRCS}
 		ppc/dsputil_altivec.c  ppc/dsputil_ppc.c  ppc/fdct_altivec.c  ppc/fft_altivec.c  ppc/float_altivec.c  ppc/gmc_altivec.c
 		ppc/h264_altivec.c  ppc/idct_altivec.c  ppc/int_altivec.c  ppc/mpegvideo_altivec.c  ppc/mpegvideo_ppc.c
 		ppc/snow_altivec.c  ppc/vc1dsp_altivec.c)
-ENDIF (ADM_CPUCAP_ALTIVEC)
+ENDIF (ADM_CPU_ALTIVEC)
 
 ADD_ADM_LIB_ALL_TARGETS(${ADM_LIB} ${${ADM_LIB}_SRCS})
 ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "-I../ADM_lavutil -DHAVE_AV_CONFIG_H -Drestrict=__restrict__ -fomit-frame-pointer -include ffconf.h")

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/CMakeLists.txt	2008-03-02 18:38:11 UTC (rev 3817)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/CMakeLists.txt	2008-03-03 09:26:56 UTC (rev 3818)
@@ -11,7 +11,7 @@
 fdctref.cc            macroblock.cc         motion.cc                   predcomp_mmx.cc  putmpg.cc         ratectl.cc       ADM_mpe2enc.cpp
 )
 
-IF (ADM_CPUCAP_ALTIVEC)
+IF (ADM_CPU_ALTIVEC)
 	SET(${ADM_LIB}_SRCS ${${ADM_LIB}_SRCS}
 		altivec/add_pred.c   altivec/amber.c  altivec/benchmark.c  altivec/bsad.c  altivec/bsumsq.c  altivec/bsumsq_sub22.c  altivec/build_sub22_mests.c
 		altivec/build_sub44_mests.c  altivec/detect.c  altivec/fdct.c  altivec/fdct_idct.c  altivec/field_dct_best.c  altivec/find_best_one_pel.c
@@ -19,7 +19,7 @@
 		altivec/quant_weight_coeff_sum.c  altivec/quantize.c  altivec/sad_00.c  altivec/sad_01.c  altivec/sad_10.c  altivec/sad_11.c
 		altivec/sub_mean_reduction.c  altivec/sub_mean_reduction_ppc.S  altivec/sub_pred.c  altivec/subsample_image.c  altivec/sumsq.c
 		altivec/sumsq_sub22.c  altivec/variance.c)
-ENDIF (ADM_CPUCAP_ALTIVEC)
+ENDIF (ADM_CPU_ALTIVEC)
 
 ADD_ADM_LIB_ALL_TARGETS(${ADM_LIB} ${${ADM_LIB}_SRCS})
 ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "-I${CMAKE_CURRENT_SOURCE_DIR}")

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libswscale/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libswscale/CMakeLists.txt	2008-03-02 18:38:11 UTC (rev 3817)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libswscale/CMakeLists.txt	2008-03-03 09:26:56 UTC (rev 3818)
@@ -6,10 +6,10 @@
 ADD_ADM_LIB_ALL_TARGETS(${ADM_LIB} ${${ADM_LIB}_SRCS})
 ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "-DCONFIG_GPL -fomit-frame-pointer")
 
-IF (ADM_OS_DARWIN)
+IF (APPLE)
 	ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "-DPIC")
 	
 	IF (ADM_DEBUG)
 		ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "-O2")
 	ENDIF (ADM_DEBUG)
-ENDIF (ADM_OS_DARWIN)
\ No newline at end of file
+ENDIF (APPLE)
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/CMakeLists.txt	2008-03-02 18:38:11 UTC (rev 3817)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/CMakeLists.txt	2008-03-03 09:26:56 UTC (rev 3818)
@@ -9,6 +9,6 @@
 ADD_ADM_LIB_ALL_TARGETS(${ADM_LIB} ${${ADM_LIB}_SRCS})
 ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "-I${CMAKE_CURRENT_SOURCE_DIR} -DHAVE_FMAX")
 
-IF (NOT ADM_OS_APPLE)
+IF (NOT APPLE)
     ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "-DHAVE_MEMALIGN")
-ENDIF (NOT ADM_OS_APPLE)
+ENDIF (NOT APPLE)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/admmangle.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/admmangle.h	2008-03-02 18:38:11 UTC (rev 3817)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/admmangle.h	2008-03-03 09:26:56 UTC (rev 3818)
@@ -1,15 +1,29 @@
 // Symbol mangling for asm
-// is different on win32
 // Shamelessly borrowed from lavcodec
+#if ( defined(__PIC__) || defined(__pic__) ) && ! defined(PIC)
+#    define PIC
+#endif
 
-#ifdef CYG_MANGLING // CYGWIN
-	#define Mangle(x) "_" #x
-	#define MANGLE(x) "_" #x
+// Use rip-relative addressing if compiling PIC code on x86-64.
+#if defined(__MINGW32__) || defined(__CYGWIN__) || defined(__DJGPP__) || \
+    defined(__OS2__) || (defined (__OpenBSD__) && !defined(__ELF__))
+#    if defined(ARCH_X86_64) && defined(PIC)
+#        define MANGLE(a) "_" #a"(%%rip)"
+#    else
+#        define MANGLE(a) "_" #a
+#    endif
 #else
-	#define Mangle(x) #x
-	#define MANGLE(x) #x
+#    if defined(ARCH_X86_64) && defined(PIC)
+#        define MANGLE(a) #a"(%%rip)"
+#    elif defined(__APPLE__)
+#        define MANGLE(a) "_" #a
+#    else
+#        define MANGLE(a) #a
+#    endif
 #endif
 
+#define Mangle MANGLE
+
 #define ADM_ALIGN16 ".p2align 4\n"
 /* Regiter renaming */
 #ifdef ARCH_X86_64

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/CMakeLists.txt	2008-03-02 18:38:11 UTC (rev 3817)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/CMakeLists.txt	2008-03-03 09:26:56 UTC (rev 3818)
@@ -23,6 +23,6 @@
 	subdirs (PREORDER ADM_nvwa)
 endif (ADM_DEBUG AND FIND_LEAKS)
 
-if (ADM_OS_DARWIN AND USE_SDL)
+if (APPLE AND USE_SDL)
 	subdirs (PREORDER ADM_libsdl)
-endif (ADM_OS_DARWIN AND USE_SDL)
\ No newline at end of file
+endif (APPLE AND USE_SDL)
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/DirectorySearch.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/DirectorySearch.cpp	2008-03-02 18:38:11 UTC (rev 3817)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/DirectorySearch.cpp	2008-03-03 09:26:56 UTC (rev 3818)
@@ -14,7 +14,7 @@
 // Construction/Destruction
 //////////////////////////////////////////////////////////////////////
 
-#ifdef __unix__
+#if defined(__unix__) || defined(__APPLE__)
 int CDirectorySearch::_findnext(unsigned long int hDir,_finddata_t *pfdData)
 {// begin _findnext
 	if(!hDir || hDir == 0xFFFFFFFF)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/DirectorySearch.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/DirectorySearch.h	2008-03-02 18:38:11 UTC (rev 3817)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/DirectorySearch.h	2008-03-03 09:26:56 UTC (rev 3818)
@@ -27,7 +27,7 @@
 // create a non file bit for unix
 #define _A_NONFILE	0x03
 
-#if (defined( __unix__)||defined(__APPLE__)) && !defined(__MINGW32__)
+#if defined( __unix__) || defined(__APPLE__)
 
 // wrap the file mode bits
 #define _A_NORMAL	0x00
@@ -104,7 +104,7 @@
 	_finddata_t m_fdData;
 	std::string m_sDirectory;
 private:
-#ifdef __unix__
+#if defined(__unix__) || defined(__APPLE__)
 	// prototypes
 	int _findfirst(const char *path,_finddata_t *pfdData);
 	int _findnext(unsigned long int hDir,_finddata_t *pfdData);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/CMakeLists.txt	2008-03-02 18:38:11 UTC (rev 3817)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/CMakeLists.txt	2008-03-03 09:26:56 UTC (rev 3818)
@@ -3,9 +3,9 @@
 SET(${ADM_LIB}_SRCS
 	GUI_bindings.cpp  GUI_gtkRender.cpp  GUI_keymap.cpp  GUI_main2.cpp)
 
-IF (ADM_OS_DARWIN)
+IF (APPLE)
 	SET(${ADM_LIB}_SRCS ${${ADM_LIB}_SRCS} GUI_gtkRenderHelper.m)
-ENDIF (ADM_OS_DARWIN)
+ENDIF (APPLE)
 
 ADD_ADM_LIB_GTK_TARGET(${ADM_LIB} ${${ADM_LIB}_SRCS})
 ADD_CFLAGS_GTK_TARGET(${ADM_LIB} ${GTK_CFLAGS})

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/CMakeLists.txt	2008-03-02 18:38:11 UTC (rev 3817)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/CMakeLists.txt	2008-03-03 09:26:56 UTC (rev 3818)
@@ -9,9 +9,9 @@
 DIA_flyEq2.cpp        DIA_flv1.cpp            DIA_flyThreshold.cpp DIA_flyParticle.cpp DIA_flyEraser.cpp DIA_flySwissArmyKnife.cpp
 )
 
-IF (ADM_OS_DARWIN)
+IF (APPLE)
 	SET(${ADM_LIB}_SRCS ${${ADM_LIB}_SRCS} GUI_sdlRenderHelper.m)
-ENDIF (ADM_OS_DARWIN)
+ENDIF (APPLE)
 
 ADD_ADM_LIB_ALL_TARGETS(${ADM_LIB} ${${ADM_LIB}_SRCS})
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/CMakeLists.txt	2008-03-02 18:38:11 UTC (rev 3817)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/CMakeLists.txt	2008-03-03 09:26:56 UTC (rev 3818)
@@ -42,9 +42,9 @@
 
 ADD_ADM_LIB_ALL_TARGETS(ADM_videoFilter ${ADM_videoFilter_SRCS})
 
-IF (ADM_OS_DARWIN AND ADM_DEBUG)
+IF (APPLE AND ADM_DEBUG)
 	SET_SOURCE_FILES_PROPERTIES(ADM_vidYadif_asm.c PROPERTIES COMPILE_FLAGS "-O2")
-ENDIF (ADM_OS_DARWIN AND ADM_DEBUG)
+ENDIF (APPLE AND ADM_DEBUG)
 
 IF (USE_FREETYPE)
 	ADD_SOURCE_CFLAGS(ADM_vidSRT.cpp "${FREETYPE2_CFLAGS}")

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt	2008-03-02 18:38:11 UTC (rev 3817)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt	2008-03-03 09:26:56 UTC (rev 3818)
@@ -63,7 +63,7 @@
 ########################################
 # Embed resources for executables
 ########################################
-IF (ADM_OS_DARWIN)
+IF (APPLE)
 	# add icon
 	SET(ADM_EXE_SRCS ${ADM_EXE_SRCS} ${CMAKE_CURRENT_SOURCE_DIR}/xpm/avidemux.icns)
 	SET_SOURCE_FILES_PROPERTIES(${CMAKE_CURRENT_SOURCE_DIR}/xpm/avidemux.icns PROPERTIES MACOSX_PACKAGE_LOCATION Resources)
@@ -80,9 +80,9 @@
 	SET(MACOSX_BUNDLE_LONG_VERSION_STRING "${ADM_OSX_VERSION}") 
 	SET(MACOSX_BUNDLE_SHORT_VERSION_STRING "${ADM_OSX_VERSION}")
 	SET(MACOSX_BUNDLE_VERSION "${ADM_OSX_VERSION}")
-ENDIF (ADM_OS_DARWIN)
+ENDIF (APPLE)
 
-IF (ADM_OS_WINDOWS)
+IF (WIN32)
 	# add icon and version info
 	SET(FILEVERSION_STRING "${VERSION}.0.${ADM_SUBVERSION}")
 	SET(PRODUCTVERSION_STRING "${VERSION}")
@@ -94,7 +94,7 @@
 	ADD_CUSTOM_COMMAND(OUTPUT ${CMAKE_CURRENT_BINARY_DIR}/admWin32.obj COMMAND windres.exe -i ${CMAKE_CURRENT_BINARY_DIR}/admWin32.rc -o ${CMAKE_CURRENT_BINARY_DIR}/admWin32.obj -O coff --define VS_VERSION_INFO=1)
 
 	SET(ADM_EXE_SRCS ${ADM_EXE_SRCS} "${CMAKE_CURRENT_BINARY_DIR}/admWin32.obj")
-ENDIF (ADM_OS_WINDOWS)
+ENDIF (WIN32)
 
 ########################################
 # Our exectuables
@@ -235,10 +235,10 @@
 	ADD_ADMLIB_ALL_TARGETS(ADM_nvwa)
 ENDIF (ADM_DEBUG AND FIND_LEAKS)
 
-IF (ADM_OS_DARWIN AND USE_SDL)
+IF (APPLE AND USE_SDL)
 	TARGET_LINK_LIBRARIES(avidemux2_gtk ADM_libsdl_gtk)
 	TARGET_LINK_LIBRARIES(avidemux2_qt4 ADM_libsdl_qt4)
-ENDIF (ADM_OS_DARWIN AND USE_SDL)
+ENDIF (APPLE AND USE_SDL)
 
 ###########################################
 # Construct ADM_userInterface
@@ -317,11 +317,11 @@
 	ENDIF (ADM_UI_GTK)
 	
 	IF (ADM_UI_QT4)
-		IF (ADM_OS_DARWIN AND NOT QT_USE_FRAMEWORKS)
+		IF (APPLE AND NOT QT_USE_FRAMEWORKS)
 			TARGET_LINK_LIBRARIES(avidemux2_qt4 ${PNG_LIBRARIES})
-		ELSEIF (NOT ADM_OS_DARWIN)
+		ELSEIF (NOT APPLE)
 			TARGET_LINK_LIBRARIES(avidemux2_qt4 ${PNG_LIBRARIES})
-		ENDIF (ADM_OS_DARWIN AND NOT QT_USE_FRAMEWORKS)
+		ENDIF (APPLE AND NOT QT_USE_FRAMEWORKS)
 	ENDIF (ADM_UI_QT4)
 ENDIF (USE_PNG)
 
@@ -458,7 +458,7 @@
 ###########################################
 # OS Specific
 ###########################################
-IF (ADM_OS_WINDOWS)
+IF (WIN32)
 	ADD_ADMLIB_ALL_TARGETS(ADM_osSupport)
 	
 	IF (MINGW)
@@ -483,14 +483,14 @@
 	IF (CMAKE_BUILD_TYPE STREQUAL "Release")
 		ADD_LDFLAGS_ALL_TARGETS("-Wl,-s")
 	ENDIF (CMAKE_BUILD_TYPE STREQUAL "Release")
-ENDIF (ADM_OS_WINDOWS)
+ENDIF (WIN32)
 
-IF (ADM_OS_DARWIN)
+IF (APPLE)
 	ADD_LIB_ALL_TARGETS("-framework CoreServices -framework CoreAudio -framework AudioUnit -framework Carbon -framework Cocoa")
 
 	# for Leopard but it doesn't hurt Tiger
 	ADD_LIB_ALL_TARGETS("-Wl,-dylib_file,/System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libGL.dylib:/System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libGL.dylib")
-ENDIF (ADM_OS_DARWIN)
+ENDIF (APPLE)
 
 ###########################################
 # Install

Modified: branches/avidemux_2.5_branch_gruntster/cmake/admCheckAudioCodecLibs.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admCheckAudioCodecLibs.cmake	2008-03-02 18:38:11 UTC (rev 3817)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admCheckAudioCodecLibs.cmake	2008-03-03 09:26:56 UTC (rev 3818)
@@ -74,9 +74,9 @@
 MESSAGE(STATUS "*****************")
 
 IF (LAME)
-	IF (ADM_OS_LINUX)
+	IF (UNIX)
 		SET(LAME_REQUIRED_FLAGS "-lm")
-	ENDIF (ADM_OS_LINUX)
+	ENDIF (UNIX)
 
 	FIND_HEADER_AND_LIB(LAME lame/lame.h mp3lame lame_init ${LAME_REQUIRED_FLAGS})
 	PRINT_LIBRARY_INFO("LAME" LAME_FOUND "${LAME_INCLUDE_DIR}" "${LAME_LIBRARY_DIR}")
@@ -99,9 +99,9 @@
 MESSAGE(STATUS "*******************")
 
 IF (LIBDCA)
-	IF (ADM_OS_LINUX)
+	IF (UNIX)
 		SET(LIBDCA_REQUIRED_FLAGS "-lm")
-	ENDIF (ADM_OS_LINUX)
+	ENDIF (UNIX)
 
 	SET(LIBDCA_VERSION 005)
 

Modified: branches/avidemux_2.5_branch_gruntster/cmake/admCheckAudioDeviceLibs.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admCheckAudioDeviceLibs.cmake	2008-03-02 18:38:11 UTC (rev 3817)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admCheckAudioDeviceLibs.cmake	2008-03-03 09:26:56 UTC (rev 3818)
@@ -1,7 +1,7 @@
 ########################################
 # ALSA
 ########################################
-IF (ADM_OS_LINUX)
+IF (UNIX AND NOT APPLE)
 	OPTION(ALSA "" ON)
 
 	MESSAGE(STATUS "Checking for ALSA")
@@ -23,39 +23,39 @@
 	ENDIF (ALSA)
 
 	MESSAGE("")
-ELSE (ADM_OS_LINUX)
+ELSE (UNIX AND NOT APPLE)
 	SET(ALSA_CAPABLE FALSE)
-ENDIF (ADM_OS_LINUX)
+ENDIF (UNIX AND NOT APPLE)
 
 ########################################
 # aRts
 ########################################
-IF (ADM_OS_LINUX)
+IF (UNIX)
 	OPTION(ARTS "" ON)
-	
+
 	MESSAGE(STATUS "Checking for aRts")
 	MESSAGE(STATUS "*****************")
 
 	IF (ARTS)
 		FIND_PACKAGE(Arts)
 		PRINT_LIBRARY_INFO("aRts" ARTS_FOUND "${ARTS_CFLAGS}" "${ARTS_LDFLAGS}")
-		
+
 		IF (ARTS_FOUND)
 			SET(USE_ARTS 1)
 		ENDIF (ARTS_FOUND)
 	ELSE (ARTS)
 		MESSAGE("${MSG_DISABLE_OPTION}")
 	ENDIF (ARTS)
-		
+
 	MESSAGE("")
-ELSE (ADM_OS_LINUX)
+ELSE (UNIX)
 	SET(ARTS_CAPABLE FALSE)
-ENDIF (ADM_OS_LINUX)
+ENDIF (UNIX)
 
 ########################################
 # ESD
 ########################################
-IF (ADM_OS_LINUX)
+IF (UNIX)
 	OPTION(ESD "" ON)
 
 	MESSAGE(STATUS "Checking for ESD")
@@ -73,14 +73,14 @@
 	ENDIF (ESD)
 
 	MESSAGE("")
-ELSE (ADM_OS_LINUX)
+ELSE (UNIX)
 	SET(ESD_CAPABLE FALSE)
-ENDIF (ADM_OS_LINUX)
+ENDIF (UNIX)
 
 ########################################
 # JACK
 ########################################
-IF (ADM_OS_LINUX OR ADM_OS_DARWIN)
+IF (UNIX)
 	OPTION(JACK "" ON)
 
 	MESSAGE(STATUS "Checking for JACK")
@@ -96,11 +96,11 @@
 	ELSE (JACK)
 		MESSAGE("${MSG_DISABLE_OPTION}")
 	ENDIF (JACK)
-	
+
 	MESSAGE("")
-ELSE (ADM_OS_LINUX OR ADM_OS_DARWIN)
+ELSE (UNIX)
 	SET(JACK_CAPABLE FALSE)
-ENDIF (ADM_OS_LINUX OR ADM_OS_DARWIN)
+ENDIF (UNIX)
 
 ########################################
 # Secret Rabbit Code
@@ -115,19 +115,19 @@
 	IF (SRC_FOUND)
 		SET(USE_SRC 1)
 	ENDIF (SRC_FOUND)
-	
+
 	MESSAGE("")
 ENDIF (JACK_FOUND)
 
 ########################################
 # OSS
 ########################################
-IF (ADM_OS_LINUX)
+IF (UNIX AND NOT APPLE)
 	OPTION(OSS "" ON)
-	
+
 	MESSAGE(STATUS "Checking for OSS")
 	MESSAGE(STATUS "****************")
-	
+
 	IF (OSS)
 		FIND_HEADER_AND_LIB(OSS sys/soundcard.h)
 		PRINT_LIBRARY_INFO("OSS" OSS_FOUND "${OSS_INCLUDE_DIR}" "")
@@ -138,8 +138,8 @@
 	ELSE (OSS)
 		MESSAGE("${MSG_DISABLE_OPTION}")
 	ENDIF (OSS)
-	
+
 	MESSAGE("")
-ELSE (ADM_OS_LINUX)
+ELSE (UNIX AND NOT APPLE)
 	SET(OSS_CAPABLE FALSE)
-ENDIF (ADM_OS_LINUX)
\ No newline at end of file
+ENDIF (UNIX AND NOT APPLE)
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/cmake/admCheckMiscLibs.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admCheckMiscLibs.cmake	2008-03-02 18:38:11 UTC (rev 3817)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admCheckMiscLibs.cmake	2008-03-03 09:26:56 UTC (rev 3818)
@@ -120,7 +120,7 @@
 ########################################
 # XVideo
 ########################################
-IF (ADM_OS_LINUX)
+IF (UNIX AND NOT APPLE)
 	OPTION(XVIDEO "" ON)
 
 	IF (XVIDEO)
@@ -136,6 +136,6 @@
 
 		MESSAGE("")
 	ENDIF (XVIDEO)
-ELSE (ADM_OS_LINUX)
+ELSE (UNIX AND NOT APPLE)
 	SET(XVIDEO_CAPABLE FALSE)
-ENDIF (ADM_OS_LINUX)
+ENDIF (UNIX AND NOT APPLE)

Modified: branches/avidemux_2.5_branch_gruntster/cmake/admDetermineSystem.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admDetermineSystem.cmake	2008-03-02 18:38:11 UTC (rev 3817)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admDetermineSystem.cmake	2008-03-03 09:26:56 UTC (rev 3818)
@@ -1,47 +1,93 @@
-# - determine CPU and Operating System
-#  ADM_CPU_X86      - x86 CPU architecture was detected
-#  ADM_CPU_X86_64   - x86-64 CPU architecture was detected
-#  ADM_OS_DARWIN    - Mac OS X was detected
-#  ADM_OS_LINUX     - Linux was detected
-#  ADM_OS_WINDOWS   - Microsoft Windows was detected
+# Determine CPU and Operating System for GCC
+#  ADM_BSD_FAMILY        - BSD family operating system was detected
+#  ADM_CPU_ALTIVEC       - PowerPC CPU with AltiVec architecture was detected
+#  ADM_CPU_PPC           - PowerPC CPU architecture was detected
+#  ADM_CPU_X86           - x86 CPU architecture was detected
+#  ADM_CPU_X86_64        - x86-64 CPU architecture was detected
+#  CMAKE_WORDS_BIGENDIAN - big endian CPU detected
 
 INCLUDE(CMakeDetermineSystem)
 INCLUDE(TestBigEndian)
 
-# override detected processor for cross-compilation purposes
-IF (CROSS_SYSTEM_PROCESSOR)
-	SET(CROSS_SYSTEM_PROCESSOR ${CROSS_SYSTEM_PROCESSOR} CACHE INTERNAL "")
-	SET(CMAKE_SYSTEM_PROCESSOR ${CROSS_SYSTEM_PROCESSOR})
-ENDIF (CROSS_SYSTEM_PROCESSOR)
-
-IF (WIN32)
-	SET(ADM_OS_WINDOWS 1)
-ELSEIF (APPLE AND UNIX)
-	SET(ADM_OS_DARWIN 1)
+IF (APPLE)
 	SET(ADM_BSD_FAMILY 1)
 ELSEIF (UNIX)
-	SET(ADM_OS_LINUX 1)
-	
 	IF (CMAKE_SYSTEM_NAME STREQUAL "FreeBSD")
 		SET(ADM_BSD_FAMILY 1)
 	ENDIF (CMAKE_SYSTEM_NAME STREQUAL "FreeBSD")
-ENDIF (WIN32)
+ENDIF (APPLE)
 
-IF (${CMAKE_SYSTEM_PROCESSOR} STREQUAL "x86" OR ${CMAKE_SYSTEM_PROCESSOR} STREQUAL "i386" OR ${CMAKE_SYSTEM_PROCESSOR} STREQUAL "i586" OR ${CMAKE_SYSTEM_PROCESSOR} STREQUAL "i686")
-	SET(ADM_CPU_X86 1)
-ELSEIF (${CMAKE_SYSTEM_PROCESSOR} STREQUAL "x86_64" OR ${CMAKE_SYSTEM_PROCESSOR} STREQUAL "amd64")
+########################################
+# Check CPU support
+########################################
+MESSAGE(STATUS "Checking GCC support")
+MESSAGE(STATUS "********************")
+
+# x86_64
+ADM_COMPILE(cpu_x86-64_check.cpp "" "" "" X86_64_SUPPORTED outputx86_64Test)
+
+IF (X86_64_SUPPORTED)
 	SET(ADM_CPU_X86_64 1)
-ELSEIF (${CMAKE_SYSTEM_PROCESSOR} STREQUAL "ppc" OR ${CMAKE_SYSTEM_PROCESSOR} STREQUAL "powerpc" OR ${CMAKE_SYSTEM_PROCESSOR} STREQUAL "Power Macintosh")
-	SET(ADM_CPU_PPC 1)
-ENDIF (${CMAKE_SYSTEM_PROCESSOR} STREQUAL "x86" OR ${CMAKE_SYSTEM_PROCESSOR} STREQUAL "i386" OR ${CMAKE_SYSTEM_PROCESSOR} STREQUAL "i586" OR ${CMAKE_SYSTEM_PROCESSOR} STREQUAL "i686")
 
+	MESSAGE(STATUS "Check if GCC is x86 64-bit - Yes")
+ELSE (X86_64_SUPPORTED)
+	MESSAGE(STATUS "Check if GCC is x86 64-bit - No")
+
+	IF (VERBOSE)
+		MESSAGE("Error Message: ${outputx86_64Test}")
+	ENDIF (VERBOSE)
+
+	# x86
+	ADM_COMPILE(cpu_x86_check.cpp "" "" "" X86_SUPPORTED outputX86Test)
+
+	IF (X86_SUPPORTED)
+		SET(ADM_CPU_X86 1)
+
+		MESSAGE(STATUS "Check if GCC is x86 32-bit - Yes")
+	ELSE (X86_SUPPORTED)
+		MESSAGE(STATUS "Check if GCC is x86 32-bit - No")
+
+		IF (VERBOSE)
+			MESSAGE("Error Message: ${outputX86Test}")
+		ENDIF (VERBOSE)
+
+		# PowerPC
+		ADM_COMPILE(cpu_ppc_check.cpp "" "" "" POWERPC_SUPPORTED outputPowerPcTest)
+
+		IF (POWERPC_SUPPORTED)
+			SET(ADM_CPU_PPC 1)
+
+			SET(ADM_ALTIVEC_FLAGS "-mabi=altivec -maltivec")
+
+			IF (APPLE)
+				SET(ADM_ALTIVEC_FLAGS "${ADM_ALTIVEC_FLAGS} -faltivec")
+			ENDIF (APPLE)
+
+			MESSAGE(STATUS "Check if GCC is PowerPC - Yes")	
+			ADM_COMPILE(cpu_altivec_check.cpp "${ADM_ALTIVEC_FLAGS}" "" "" ALTIVEC_SUPPORTED outputAltivecTest)
+
+			IF (ALTIVEC_SUPPORTED)
+				SET(ADM_CPU_ALTIVEC 1)
+				MESSAGE(STATUS "Check if GCC is AltiVec - Yes")
+			ELSE (ALTIVEC_SUPPORTED)
+				MESSAGE(STATUS "Check if GCC is AltiVec - No")
+
+				IF (VERBOSE)
+					MESSAGE("Error Message: ${outputAltivecTest}")
+				ENDIF (VERBOSE)
+			ENDIF (ALTIVEC_SUPPORTED)
+		ELSE (POWERPC_SUPPORTED)
+			MESSAGE(STATUS "Check if GCC is PowerPC - No")
+
+			IF (VERBOSE)
+				MESSAGE("Error Message: ${outputPowerPcTest}")
+			ENDIF (VERBOSE)
+		ENDIF (POWERPC_SUPPORTED)
+	ENDIF (X86_SUPPORTED)
+ENDIF (X86_64_SUPPORTED)
+
 TEST_BIG_ENDIAN(CMAKE_WORDS_BIGENDIAN)
-MESSAGE("")
 
-IF (NOT ADM_OS_DARWIN AND NOT ADM_OS_WINDOWS AND NOT ADM_OS_LINUX)
-	MESSAGE(FATAL_ERROR "Operating System not supported (${CMAKE_SYSTEM_NAME})")
-ENDIF (NOT ADM_OS_DARWIN AND NOT ADM_OS_WINDOWS AND NOT ADM_OS_LINUX)
-
 IF (NOT ADM_CPU_X86 AND NOT ADM_CPU_X86_64 AND NOT ADM_CPU_PPC)
-	MESSAGE(FATAL_ERROR "CPU not supported (${CMAKE_SYSTEM_PROCESSOR})")
+	MESSAGE(FATAL_ERROR "CPU not supported")
 ENDIF (NOT ADM_CPU_X86 AND NOT ADM_CPU_X86_64 AND NOT ADM_CPU_PPC)
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/cmake/admSetLavcodecFlags.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admSetLavcodecFlags.cmake	2008-03-02 18:38:11 UTC (rev 3817)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admSetLavcodecFlags.cmake	2008-03-03 09:26:56 UTC (rev 3818)
@@ -24,42 +24,39 @@
 SET(HAVE_THREADS 1)
 SET(RUNTIME_CPUDETECT 1)
 
-IF (ADM_CPU_X86 OR ADM_CPU_X86_64)
-	SET(ENABLE_MMX 1)
-	SET(HAVE_MMX 1)
-	SET(HAVE_FAST_UNALIGNED 1)
-
-	IF (ADM_CPU_X86_64)
-		SET(HAVE_FAST_64BIT 1)
-	ENDIF (ADM_CPU_X86_64)
-ELSE (ADM_CPU_X86 OR ADM_CPU_X86_64)
-	SET(ENABLE_MMX 0)
+IF (ADM_CPU_X86 OR ADM_CPU_X86_64)
+	SET(ENABLE_MMX 1)
+	SET(HAVE_MMX 1)
+	SET(HAVE_FAST_UNALIGNED 1)
+
+	IF (ADM_CPU_X86_64)
+		SET(HAVE_FAST_64BIT 1)
+	ENDIF (ADM_CPU_X86_64)
+ELSE (ADM_CPU_X86 OR ADM_CPU_X86_64)
+	SET(ENABLE_MMX 0)
 ENDIF (ADM_CPU_X86 OR ADM_CPU_X86_64)
 
-IF (ADM_OS_DARWIN)
+IF (APPLE)
 	SET(CONFIG_DARWIN 1)
-ENDIF (ADM_OS_DARWIN)
+ENDIF (APPLE)
 
 ########################################
 # Check GCC support for SSSE3
 ########################################
 IF (ADM_CPU_X86 OR ADM_CPU_X86_64)
-	MESSAGE(STATUS "Checking GCC support for SSSE3")
-	MESSAGE(STATUS "******************************")
+	ADM_COMPILE(cpu_ssse3_check.cpp "" "" "" SSSE3_SUPPORTED outputSsse3Test)
 
-	ADM_COMPILE(ssse3_check.cpp "" "" "" SSSE3_SUPPORTED outputSsse3Test)
-
 	IF (SSSE3_SUPPORTED)
 		SET(HAVE_SSSE3 1)
 
-		MESSAGE(STATUS "GCC supports SSSE3")
+		MESSAGE(STATUS "Check if GCC supports SSSE3 - Yes")
 	ELSE (SSSE3_SUPPORTED)
-		MESSAGE(STATUS "GCC doesn't support SSSE3")
+		MESSAGE(STATUS "Check if GCC supports SSSE3 - No")
 
 		IF (VERBOSE)
 			MESSAGE("Error Message: ${outputSsse3Test}")
 		ENDIF (VERBOSE)	
 	ENDIF (SSSE3_SUPPORTED)
+ENDIF (ADM_CPU_X86 OR ADM_CPU_X86_64)
 
-	MESSAGE("")
-ENDIF (ADM_CPU_X86 OR ADM_CPU_X86_64)
\ No newline at end of file
+MESSAGE("")
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/cmake/config.h.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/config.h.cmake	2008-03-02 18:38:11 UTC (rev 3817)
+++ branches/avidemux_2.5_branch_gruntster/cmake/config.h.cmake	2008-03-03 09:26:56 UTC (rev 3818)
@@ -84,9 +84,6 @@
 #cmakedefine HAVE_SSSE3
 #cmakedefine CONFIG_DARWIN
 
-/* Name mangling */
-#cmakedefine CYG_MANGLING
-
 /* Mad */
 #cmakedefine FPM_DEFAULT
 #cmakedefine FPM_INTEL
@@ -243,10 +240,6 @@
 /* use Nvwa memory leak detector */
 #cmakedefine FIND_LEAKS
 
-#cmakedefine ADM_OS_DARWIN
-#cmakedefine ADM_OS_LINUX
-#cmakedefine ADM_OS_WINDOWS
-
 #cmakedefine ADM_CPU_X86
 #cmakedefine ADM_CPU_X86_64
 

Added: branches/avidemux_2.5_branch_gruntster/cmake_compile_check/cpu_altivec_check.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake_compile_check/cpu_altivec_check.cpp	2008-03-02 18:38:11 UTC (rev 3817)
+++ branches/avidemux_2.5_branch_gruntster/cmake_compile_check/cpu_altivec_check.cpp	2008-03-03 09:26:56 UTC (rev 3818)
@@ -0,0 +1,15 @@
+#ifndef __APPLE__
+#include <altivec.h>
+#endif
+
+int foo(void)
+{
+	unsigned char *x;
+
+	vec_ld(0, x);
+}
+
+int main(int a, char **b)
+{
+	return 0;
+}

Added: branches/avidemux_2.5_branch_gruntster/cmake_compile_check/cpu_ppc_check.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake_compile_check/cpu_ppc_check.cpp	2008-03-02 18:38:11 UTC (rev 3817)
+++ branches/avidemux_2.5_branch_gruntster/cmake_compile_check/cpu_ppc_check.cpp	2008-03-03 09:26:56 UTC (rev 3818)
@@ -0,0 +1,11 @@
+int foo(void)
+{
+	register const void *p;
+
+	asm volatile ("dcbt 0, %0" : : "r" (p));
+}
+
+int main(int a, char **b)
+{
+	return 0;
+}

Copied: branches/avidemux_2.5_branch_gruntster/cmake_compile_check/cpu_ssse3_check.cpp (from rev 3811, branches/avidemux_2.5_branch_gruntster/cmake_compile_check/ssse3_check.cpp)
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake_compile_check/ssse3_check.cpp	2008-02-29 18:35:39 UTC (rev 3811)
+++ branches/avidemux_2.5_branch_gruntster/cmake_compile_check/cpu_ssse3_check.cpp	2008-03-03 09:26:56 UTC (rev 3818)
@@ -0,0 +1,9 @@
+int foo(void)
+{
+	asm volatile ("pabsw %xmm0, %xmm0");
+}
+
+int main(int a, char **b)
+{
+	return 0;
+}

Added: branches/avidemux_2.5_branch_gruntster/cmake_compile_check/cpu_x86-64_check.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake_compile_check/cpu_x86-64_check.cpp	2008-03-02 18:38:11 UTC (rev 3817)
+++ branches/avidemux_2.5_branch_gruntster/cmake_compile_check/cpu_x86-64_check.cpp	2008-03-03 09:26:56 UTC (rev 3818)
@@ -0,0 +1,9 @@
+int foo(void)
+{
+	asm volatile ("movdqa %xmm8, 0");
+}
+
+int main(int a, char **b)
+{
+	return 0;
+}

Added: branches/avidemux_2.5_branch_gruntster/cmake_compile_check/cpu_x86_check.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake_compile_check/cpu_x86_check.cpp	2008-03-02 18:38:11 UTC (rev 3817)
+++ branches/avidemux_2.5_branch_gruntster/cmake_compile_check/cpu_x86_check.cpp	2008-03-03 09:26:56 UTC (rev 3818)
@@ -0,0 +1,9 @@
+int foo(void)
+{
+	asm volatile ("movdqa %xmm7, 0");
+}
+
+int main(int a, char **b)
+{
+	return 0;
+}

Deleted: branches/avidemux_2.5_branch_gruntster/cmake_compile_check/ssse3_check.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake_compile_check/ssse3_check.cpp	2008-03-02 18:38:11 UTC (rev 3817)
+++ branches/avidemux_2.5_branch_gruntster/cmake_compile_check/ssse3_check.cpp	2008-03-03 09:26:56 UTC (rev 3818)
@@ -1,11 +0,0 @@
-#include <stdio.h>
-#include <stdlib.h>
-
-int foo(void){
-      asm volatile("pabsw %xmm0, %xmm0");
-}
-int main(int a, char **b)
-{
-        return 0;
-}
-



From gruntster at mail.berlios.de  Mon Mar  3 11:52:13 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Mon, 3 Mar 2008 11:52:13 +0100
Subject: [Avidemux-svn-commit] r3819 - in
	branches/avidemux_2.5_branch_gruntster: . cmake cmake_compile_check
Message-ID: <200803031052.m23AqD49016160@sheep.berlios.de>

Author: gruntster
Date: 2008-03-03 11:52:09 +0100 (Mon, 03 Mar 2008)
New Revision: 3819

Added:
   branches/avidemux_2.5_branch_gruntster/cmake_compile_check/bsd_check.cpp
Modified:
   branches/avidemux_2.5_branch_gruntster/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/cmake/admCheckUserInterfaceLibs.cmake
   branches/avidemux_2.5_branch_gruntster/cmake/admDetermineSystem.cmake
Log:
[CMake] test GCC for BSD

Modified: branches/avidemux_2.5_branch_gruntster/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/CMakeLists.txt	2008-03-03 09:26:56 UTC (rev 3818)
+++ branches/avidemux_2.5_branch_gruntster/CMakeLists.txt	2008-03-03 10:52:09 UTC (rev 3819)
@@ -22,14 +22,9 @@
 ########################################
 # Global options
 ########################################
-OPTION(XMINGW "" OFF)
 OPTION(VERBOSE "" OFF)
 OPTION(LATE_BINDING "" OFF)
 
-IF (XMINGW)
-	SET(WIN32 1)
-ENDIF (XMINGW)
-
 IF (LATE_BINDING)
 	SET(USE_LATE_BINDING 1)
 ENDIF (LATE_BINDING)
@@ -44,10 +39,10 @@
 	SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -mwin32")
 ENDIF (CYGWIN)
 
-IF (UNIX)
+IF (UNIX AND NOT APPLE)
 	# jog shuttle is only available on Linux due to its interface
 	SET(USE_JOG 1)
-ENDIF (UNIX)
+ENDIF (UNIX AND NOT APPLE)
 
 ########################################
 # Standard Avidemux defines

Modified: branches/avidemux_2.5_branch_gruntster/cmake/admCheckUserInterfaceLibs.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admCheckUserInterfaceLibs.cmake	2008-03-03 09:26:56 UTC (rev 3818)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admCheckUserInterfaceLibs.cmake	2008-03-03 10:52:09 UTC (rev 3819)
@@ -70,24 +70,9 @@
 	MARK_AS_ADVANCED(QT_PLUGINS_DIR)
 	MARK_AS_ADVANCED(QT_QMAKE_EXECUTABLE)
 
-	IF (QT4_FOUND)
-		IF (XMINGW)
-			SET(QTXM /rot2/qt_4.3)
-
-			SET(QT_QMAKE_EXECUTABLE qmake)
-			SET(QT_UIC_EXECUTABLE uic-qt4)
-			SET(QT_MOC_EXECUTABLE moc-qt4)
-			SET(QT_RCC_EXECUTABLE rcc)
-			SET(QT_QTGUI_LIBRARY QtGui4)   # FIXME
-			SET(QT_QTCORE_LIBRARY QtCore4) # FIXME
-
-			SET(CMAKE_CXX_FLAGS "-I${QTXM}/include ${CMAKE_CXX_FLAGS}")
-			LINK_DIRECTORIES(${QTXM}/bin)
-			LINK_DIRECTORIES(${QTXM}/lib)
-		ENDIF (XMINGW)
-	ELSE (QT4_FOUND)
+	IF (NOT QT4_FOUND)
 		SET(ADM_UI_QT4 0)
-	ENDIF (QT4_FOUND)
+	ENDIF (NOT QT4_FOUND)
 ELSE (QT4)
 	MESSAGE("${MSG_DISABLE_OPTION}")
 ENDIF (QT4)

Modified: branches/avidemux_2.5_branch_gruntster/cmake/admDetermineSystem.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admDetermineSystem.cmake	2008-03-03 09:26:56 UTC (rev 3818)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admDetermineSystem.cmake	2008-03-03 10:52:09 UTC (rev 3819)
@@ -9,20 +9,29 @@
 INCLUDE(CMakeDetermineSystem)
 INCLUDE(TestBigEndian)
 
-IF (APPLE)
+MESSAGE(STATUS "Checking GCC support")
+MESSAGE(STATUS "********************")
+
+########################################
+# Check OS support
+########################################
+ADM_COMPILE(bsd_check.cpp "" "" "" BSD_SUPPORTED outputBsdTest)
+
+IF (BSD_SUPPORTED)
 	SET(ADM_BSD_FAMILY 1)
-ELSEIF (UNIX)
-	IF (CMAKE_SYSTEM_NAME STREQUAL "FreeBSD")
-		SET(ADM_BSD_FAMILY 1)
-	ENDIF (CMAKE_SYSTEM_NAME STREQUAL "FreeBSD")
-ENDIF (APPLE)
 
+	MESSAGE(STATUS "Check if GCC is BSD family - Yes")
+ELSE (BSD_SUPPORTED)
+	MESSAGE(STATUS "Check if GCC is BSD family - No")
+
+	IF (VERBOSE)
+		MESSAGE("Error Message: ${outputBsdTest}")
+	ENDIF (VERBOSE)
+ENDIF (BSD_SUPPORTED)
+
 ########################################
 # Check CPU support
 ########################################
-MESSAGE(STATUS "Checking GCC support")
-MESSAGE(STATUS "********************")
-
 # x86_64
 ADM_COMPILE(cpu_x86-64_check.cpp "" "" "" X86_64_SUPPORTED outputx86_64Test)
 

Added: branches/avidemux_2.5_branch_gruntster/cmake_compile_check/bsd_check.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake_compile_check/bsd_check.cpp	2008-03-03 09:26:56 UTC (rev 3818)
+++ branches/avidemux_2.5_branch_gruntster/cmake_compile_check/bsd_check.cpp	2008-03-03 10:52:09 UTC (rev 3819)
@@ -0,0 +1,8 @@
+int main(int a, char **b)
+{
+#if defined(__APPLE__) || defined(__FreeBSD__) || defined(__DragonFly__) || defined(__NetBSD__) || defined(__OpenBSD__)
+	return 0;
+#else
+#error Unable to detect GCC for BSD family
+#endif
+}



From mean at mail.berlios.de  Mon Mar  3 19:51:23 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Mon, 3 Mar 2008 19:51:23 +0100
Subject: [Avidemux-svn-commit] r3820 - in
	branches/avidemux_2.4_branch/avidemux: . ADM_audiofilter
	ADM_inputs/ADM_avsproxy ADM_inputs/ADM_matroska
	ADM_inputs/ADM_mp4 ADM_libraries/ADM_libmpeg2enc
	ADM_libraries/ADM_mplex ADM_libraries/ADM_utilities
	ADM_script ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk
	ADM_videoFilter
Message-ID: <200803031851.m23IpN3J013096@sheep.berlios.de>

Author: mean
Date: 2008-03-03 19:51:21 +0100 (Mon, 03 Mar 2008)
New Revision: 3820

Modified:
   branches/avidemux_2.4_branch/avidemux/ADM_audiofilter/audiofilter_mixer.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_inputs/ADM_avsproxy/ADM_avsproxy_net.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_inputs/ADM_matroska/ADM_mkvIndexer.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_inputs/ADM_mp4/ADM_mp4Analyzer.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_libraries/ADM_libmpeg2enc/cpu_accel.cc
   branches/avidemux_2.4_branch/avidemux/ADM_libraries/ADM_libmpeg2enc/motionest.cc
   branches/avidemux_2.4_branch/avidemux/ADM_libraries/ADM_mplex/ADM_mplexmuxer.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_libraries/ADM_mplex/inputstrm.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_libraries/ADM_mplex/multiplexor.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_libraries/ADM_mplex/padstrm.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_libraries/ADM_utilities/ADM_imageLoader.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_script/DirectorySearch.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_script/DirectorySearch.h
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_guiResize.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidDecDec.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidPulldown.cpp
   branches/avidemux_2.4_branch/avidemux/gui_action.cpp
Log:
[All] Jw patch : lot of unitialized vars & other similar errors

Modified: branches/avidemux_2.4_branch/avidemux/ADM_audiofilter/audiofilter_mixer.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_audiofilter/audiofilter_mixer.cpp	2008-03-03 10:52:09 UTC (rev 3819)
+++ branches/avidemux_2.4_branch/avidemux/ADM_audiofilter/audiofilter_mixer.cpp	2008-03-03 18:51:21 UTC (rev 3820)
@@ -551,7 +551,6 @@
 
     uint32_t rd = 0;
     uint8_t *in,*out;
-    uint32_t window;
     int nbSampleMax=max/_wavHeader.channels;
     uint8_t input_channels = _previous->getInfo()->channels;
 
@@ -565,7 +564,7 @@
       {
         memset(&_incomingBuffer[_head],0,sizeof(float) * input_channels);
         _tail=_head+input_channels;
-        printf("[Mixer] Warning asked %u symbols, a window is %u symbols\n",max,window);
+        printf("[Mixer] Warning asked %u symbols\n",max);
       }
       else
       {

Modified: branches/avidemux_2.4_branch/avidemux/ADM_inputs/ADM_avsproxy/ADM_avsproxy_net.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_inputs/ADM_avsproxy/ADM_avsproxy_net.cpp	2008-03-03 10:52:09 UTC (rev 3819)
+++ branches/avidemux_2.4_branch/avidemux/ADM_inputs/ADM_avsproxy/ADM_avsproxy_net.cpp	2008-03-03 18:51:21 UTC (rev 3820)
@@ -164,7 +164,6 @@
 uint8_t avsHeader::sendData(uint32_t cmd,uint32_t frame, uint32_t payload_size,uint8_t *payload)
 {
         SktHeader header;
-        int rx;
         memset(&header,0,sizeof(header));
 
         header.cmd=cmd;
@@ -173,7 +172,7 @@
         header.magic=(uint32_t)MAGGIC;
         if(!txData(sizeof(header),(uint8_t *)&header))
         {
-            printf("Error in senddata: header %d/%d\n",rx,sizeof(header));
+            printf("Error in senddata: header %d\n",sizeof(header));
             return 0;
         }
         int togo=payload_size;

Modified: branches/avidemux_2.4_branch/avidemux/ADM_inputs/ADM_matroska/ADM_mkvIndexer.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_inputs/ADM_matroska/ADM_mkvIndexer.cpp	2008-03-03 10:52:09 UTC (rev 3819)
+++ branches/avidemux_2.4_branch/avidemux/ADM_inputs/ADM_matroska/ADM_mkvIndexer.cpp	2008-03-03 18:51:21 UTC (rev 3820)
@@ -127,7 +127,7 @@
 */
 uint8_t mkvHeader::indexBlock(ADM_ebml_file *parser,uint32_t len,uint32_t clusterTimeCodeMs)
 {
-  int lacing,nbLaces,entryFlags;
+  int lacing,nbLaces,entryFlags=0;
   //
   uint64_t tail=parser->tell()+len;
   // Read Track id 
@@ -147,6 +147,7 @@
       uint8_t flags=parser->readu8();
       uint32_t remaining=tail-parser->tell();
       lacing=((flags>>1)&3);
+        // entryFlags ???
       //if(track) printf("This round %lld total:%lld\n",tail-parser->tell(),    _tracks[track]._sizeInBytes);
       switch(lacing)
       {

Modified: branches/avidemux_2.4_branch/avidemux/ADM_inputs/ADM_mp4/ADM_mp4Analyzer.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_inputs/ADM_mp4/ADM_mp4Analyzer.cpp	2008-03-03 10:52:09 UTC (rev 3819)
+++ branches/avidemux_2.4_branch/avidemux/ADM_inputs/ADM_mp4/ADM_mp4Analyzer.cpp	2008-03-03 18:51:21 UTC (rev 3820)
@@ -643,7 +643,8 @@
         
                                             offset=8+len;
                                             printf("\navcC numOfPictureParSets  :%x\n", MKD8(offset++));
-                                            len=MKD16(offset++);
+                                            len=MKD16(offset);
+                                            offset++;
                                             printf("avcC Pic len              :%x\n",len);
                                             mixDump(VDEO.extraData+offset,len);
                                             left=0;

Modified: branches/avidemux_2.4_branch/avidemux/ADM_libraries/ADM_libmpeg2enc/cpu_accel.cc
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_libraries/ADM_libmpeg2enc/cpu_accel.cc	2008-03-03 10:52:09 UTC (rev 3819)
+++ branches/avidemux_2.4_branch/avidemux/ADM_libraries/ADM_libmpeg2enc/cpu_accel.cc	2008-03-03 18:51:21 UTC (rev 3820)
@@ -46,7 +46,7 @@
 {
    int32_t eax, ebx, ecx, edx;
    int32_t AMD;
-   int32_t caps;
+   int32_t caps=0;
 
    if(CpuCaps::hasMMX()) caps |=ACCEL_X86_MMX;
    if(CpuCaps::hasMMXEXT()) caps |=ACCEL_X86_MMXEXT;

Modified: branches/avidemux_2.4_branch/avidemux/ADM_libraries/ADM_libmpeg2enc/motionest.cc
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_libraries/ADM_libmpeg2enc/motionest.cc	2008-03-03 10:52:09 UTC (rev 3819)
+++ branches/avidemux_2.4_branch/avidemux/ADM_libraries/ADM_libmpeg2enc/motionest.cc	2008-03-03 18:51:21 UTC (rev 3820)
@@ -2048,7 +2048,7 @@
 			16);            /* block height */
 
 	bestdp_mc->pos.x = imindmv;
-	bestdp_mc->pos.x = jmindmv;
+	bestdp_mc->pos.y = jmindmv; // Meanx : Jw patch,  Seems logical but not sure
 	*vmcp = vmc_dp;
 }
 

Modified: branches/avidemux_2.4_branch/avidemux/ADM_libraries/ADM_mplex/ADM_mplexmuxer.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_libraries/ADM_mplex/ADM_mplexmuxer.cpp	2008-03-03 10:52:09 UTC (rev 3819)
+++ branches/avidemux_2.4_branch/avidemux/ADM_libraries/ADM_mplex/ADM_mplexmuxer.cpp	2008-03-03 18:51:21 UTC (rev 3820)
@@ -294,7 +294,7 @@
                                 
                                 *(ptr+0)=(hh<<2)+(mm>>4);
                                 *(ptr+1)=((mm&0xf)<<4)+8+(ss>>3);
-                                *(ptr+2)= ((ss&7)<<5)+(ff>>1);
+                                *(ptr+2)= ((ss&7)<<5)+(ms>>1);
                                 *(ptr+3)&=0x7f;
                                 *(ptr+3)+=(ms&1) <<7;
                                 

Modified: branches/avidemux_2.4_branch/avidemux/ADM_libraries/ADM_mplex/inputstrm.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_libraries/ADM_mplex/inputstrm.cpp	2008-03-03 10:52:09 UTC (rev 3819)
+++ branches/avidemux_2.4_branch/avidemux/ADM_libraries/ADM_mplex/inputstrm.cpp	2008-03-03 18:51:21 UTC (rev 3820)
@@ -23,6 +23,7 @@
 
 #include <config.h>
 #include <assert.h>
+#include <limits.h>
 
 #include "mjpeg_types.h"
 #include "inputstrm.hpp"

Modified: branches/avidemux_2.4_branch/avidemux/ADM_libraries/ADM_mplex/multiplexor.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_libraries/ADM_mplex/multiplexor.cpp	2008-03-03 10:52:09 UTC (rev 3819)
+++ branches/avidemux_2.4_branch/avidemux/ADM_libraries/ADM_mplex/multiplexor.cpp	2008-03-03 18:51:21 UTC (rev 3820)
@@ -22,6 +22,7 @@
 #include <config.h>
 #include <math.h>
 #include <stdlib.h>
+#include <string.h>
 
 #include <mjpeg_types.h>
 #include <mjpeg_logging.h>

Modified: branches/avidemux_2.4_branch/avidemux/ADM_libraries/ADM_mplex/padstrm.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_libraries/ADM_mplex/padstrm.cpp	2008-03-03 10:52:09 UTC (rev 3819)
+++ branches/avidemux_2.4_branch/avidemux/ADM_libraries/ADM_mplex/padstrm.cpp	2008-03-03 18:51:21 UTC (rev 3820)
@@ -23,6 +23,7 @@
 #ifdef HAVE_CONFIG_H
 #include "config.h"
 #endif
+#include <string.h>
 
 #include "padstrm.hpp"
 

Modified: branches/avidemux_2.4_branch/avidemux/ADM_libraries/ADM_utilities/ADM_imageLoader.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_libraries/ADM_utilities/ADM_imageLoader.cpp	2008-03-03 10:52:09 UTC (rev 3819)
+++ branches/avidemux_2.4_branch/avidemux/ADM_libraries/ADM_utilities/ADM_imageLoader.cpp	2008-03-03 18:51:21 UTC (rev 3820)
@@ -360,7 +360,7 @@
 			uint32_t *fcc;
 		    uint8_t fcc_tab[4];
 		    FILE *fd;
-		    uint32_t off,tag,count,size;
+		    uint32_t off,tag=0,count,size;
 
 		    // 1- identity the file type
 		    //

Modified: branches/avidemux_2.4_branch/avidemux/ADM_script/DirectorySearch.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_script/DirectorySearch.cpp	2008-03-03 10:52:09 UTC (rev 3819)
+++ branches/avidemux_2.4_branch/avidemux/ADM_script/DirectorySearch.cpp	2008-03-03 18:51:21 UTC (rev 3820)
@@ -7,6 +7,7 @@
 Note:  This file is available under a BSD license.  Contact the author
 at amistry at am-productions.biz
 */
+#include <string.h>
 #include "config.h"
 #include "DirectorySearch.h"
 

Modified: branches/avidemux_2.4_branch/avidemux/ADM_script/DirectorySearch.h
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_script/DirectorySearch.h	2008-03-03 10:52:09 UTC (rev 3819)
+++ branches/avidemux_2.4_branch/avidemux/ADM_script/DirectorySearch.h	2008-03-03 18:51:21 UTC (rev 3820)
@@ -21,6 +21,7 @@
 #include <sys/types.h>
 #include <sys/stat.h>
 #include <dirent.h>
+#include <string.h>
 #endif
 #include "StdFile.h"
 

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp	2008-03-03 10:52:09 UTC (rev 3819)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp	2008-03-03 18:51:21 UTC (rev 3820)
@@ -414,7 +414,7 @@
 
         if(rw)
         {
-                        dialog=dialog = gtk_file_chooser_dialog_new ("Save",
+                        dialog = gtk_file_chooser_dialog_new ("Save",
                                       NULL,
                                       GTK_FILE_CHOOSER_ACTION_SAVE,
                                       GTK_STOCK_CANCEL, GTK_RESPONSE_CANCEL,
@@ -424,7 +424,7 @@
         }
         else
         {
-          dialog=dialog = gtk_file_chooser_dialog_new ("Open File",
+          dialog = gtk_file_chooser_dialog_new ("Open File",
                                       NULL,
                                       GTK_FILE_CHOOSER_ACTION_OPEN,
                                       GTK_STOCK_CANCEL, GTK_RESPONSE_CANCEL,

Modified: branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_guiResize.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_guiResize.cpp	2008-03-03 10:52:09 UTC (rev 3819)
+++ branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_guiResize.cpp	2008-03-03 18:51:21 UTC (rev 3820)
@@ -41,7 +41,7 @@
 #include <ADM_assert.h>
 
 
-static int getResizeParams(uint32_t * w, uint32_t * h, uint32_t * algo,uint32_t w,uint32_t h,uint32_t fps);
+static int getResizeParams(uint32_t * w, uint32_t * h, uint32_t * algo,uint32_t ow,uint32_t oh,uint32_t fps);
 
 
 extern uint8_t DIA_resize(uint32_t *width,uint32_t *height,uint32_t *algo,uint32_t originalw, uint32_t originalh,uint32_t fps1000);

Modified: branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidDecDec.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidDecDec.cpp	2008-03-03 10:52:09 UTC (rev 3819)
+++ branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidDecDec.cpp	2008-03-03 18:51:21 UTC (rev 3820)
@@ -912,6 +912,7 @@
 		//return src;
 		//memcpy(data,src,*len);
 
+                GETFRAME(useframe, src); // MEANX : not sure (jw detected a problem here)
 		data->duplicate(src);
 		vidCache->unlockAll();		
 		return 1; // return src;			

Modified: branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidPulldown.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidPulldown.cpp	2008-03-03 10:52:09 UTC (rev 3819)
+++ branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidPulldown.cpp	2008-03-03 18:51:21 UTC (rev 3820)
@@ -131,7 +131,7 @@
 		uint32_t dflags,dlen;
 #define GET_FRAME(x,y) if(!_in->getFrameNumberNoAlloc(x, &dlen,_uncompressed[y],&dflags)) \
  {\
-				 	 	printf("Cannot get frame %lu\n",target+i);\
+				 	 	printf("Cannot get frame %lu\n",x);\
 					 	return 0;     \
 				 }
 

Modified: branches/avidemux_2.4_branch/avidemux/gui_action.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/gui_action.cpp	2008-03-03 10:52:09 UTC (rev 3819)
+++ branches/avidemux_2.4_branch/avidemux/gui_action.cpp	2008-03-03 18:51:21 UTC (rev 3820)
@@ -1,4 +1,5 @@
 #include <stdio.h>
+#include <strings.h>
 #include <vector>
 using std::vector;
 #include <utility>



From mean at mail.berlios.de  Mon Mar  3 20:01:20 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Mon, 3 Mar 2008 20:01:20 +0100
Subject: [Avidemux-svn-commit] r3821 -
	branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk
Message-ID: <200803031901.m23J1KRm014470@sheep.berlios.de>

Author: mean
Date: 2008-03-03 20:01:19 +0100 (Mon, 03 Mar 2008)
New Revision: 3821

Modified:
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/mediactrl.c
Log:
[Gtk] media control patch with older linux kernel, patch by nhjm

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/mediactrl.c
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/mediactrl.c	2008-03-03 18:51:21 UTC (rev 3820)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/mediactrl.c	2008-03-03 19:01:19 UTC (rev 3821)
@@ -35,7 +35,17 @@
 #include <string.h>
 #include <errno.h>
 #include <linux/input.h>
+#include <linux/version.h>
 
+#if LINUX_VERSION_CODE < KERNEL_VERSION(2,6,0)
+struct input_id {
+        __u16 bustype;
+        __u16 vendor;
+        __u16 product;
+        __u16 version;
+};
+#endif
+
 #include "mediactrl.h"
 
 static char *_shuttle_name = "Shuttle";



From gruntster at mail.berlios.de  Tue Mar  4 11:19:12 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Tue, 4 Mar 2008 11:19:12 +0100
Subject: [Avidemux-svn-commit] r3822 - in
	branches/avidemux_2.5_branch_gruntster: cmake cmake_compile_check
Message-ID: <200803041019.m24AJC8V003015@sheep.berlios.de>

Author: gruntster
Date: 2008-03-04 11:19:08 +0100 (Tue, 04 Mar 2008)
New Revision: 3822

Added:
   branches/avidemux_2.5_branch_gruntster/cmake_compile_check/os_apple_check.cpp
   branches/avidemux_2.5_branch_gruntster/cmake_compile_check/os_bsd_check.cpp
   branches/avidemux_2.5_branch_gruntster/cmake_compile_check/os_cygwin_check.cpp
   branches/avidemux_2.5_branch_gruntster/cmake_compile_check/os_mingw_check.cpp
   branches/avidemux_2.5_branch_gruntster/cmake_compile_check/os_unix_check.cpp
   branches/avidemux_2.5_branch_gruntster/cmake_compile_check/os_win32_check.cpp
Removed:
   branches/avidemux_2.5_branch_gruntster/cmake/CMakeDetermineSystem.cmake
   branches/avidemux_2.5_branch_gruntster/cmake_compile_check/bsd_check.cpp
Modified:
   branches/avidemux_2.5_branch_gruntster/cmake/admDetermineSystem.cmake
Log:
[CMake] test GCC for OS

Deleted: branches/avidemux_2.5_branch_gruntster/cmake/CMakeDetermineSystem.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/CMakeDetermineSystem.cmake	2008-03-03 19:01:19 UTC (rev 3821)
+++ branches/avidemux_2.5_branch_gruntster/cmake/CMakeDetermineSystem.cmake	2008-03-04 10:19:08 UTC (rev 3822)
@@ -1,80 +0,0 @@
-
-# This module is used by the Makefile generator to determin the following variables:
-# CMAKE_SYSTEM_NAME - on unix this is uname -s, for windows it is Windows
-# CMAKE_SYSTEM_VERSION - on unix this is uname -r, for windows it is empty
-# CMAKE_SYSTEM - ${CMAKE_SYSTEM}-${CMAKE_SYSTEM_VERSION}, for windows: ${CMAKE_SYSTEM}
-#
-#  Expected uname -s output:
-#
-# AIX                           AIX  
-# BSD/OS                        BSD/OS  
-# FreeBSD                       FreeBSD  
-# HP-UX                         HP-UX  
-# IRIX                          IRIX  
-# Linux                         Linux  
-# NetBSD                        NetBSD  
-# OpenBSD                       OpenBSD  
-# OFS/1 (Digital Unix)          OSF1  
-# SCO OpenServer 5              SCO_SV  
-# SCO UnixWare 7                UnixWare  
-# SCO UnixWare (pre release 7)  UNIX_SV  
-# SCO XENIX                     Xenix  
-# Solaris                       SunOS  
-# SunOS                         SunOS  
-# Tru64                         Tru64  
-# Ultrix                        ULTRIX  
-# cygwin                        CYGWIN_NT-5.1
-# MacOSX                        Darwin
-  
-IF(UNIX)
-  FIND_PROGRAM(CMAKE_UNAME uname /bin /usr/bin /usr/local/bin )
-  IF(CMAKE_UNAME)
-    EXEC_PROGRAM(uname ARGS -s OUTPUT_VARIABLE CMAKE_SYSTEM_NAME)
-    EXEC_PROGRAM(uname ARGS -r OUTPUT_VARIABLE CMAKE_SYSTEM_VERSION)
-    EXEC_PROGRAM(uname ARGS -m OUTPUT_VARIABLE CMAKE_SYSTEM_PROCESSOR RETURN_VALUE val)
-
-    IF("${val}" GREATER 0)
-      SET(CMAKE_SYSTEM_PROCESSOR "unknown")
-    ENDIF("${val}" GREATER 0)
-    SET(CMAKE_UNAME ${CMAKE_UNAME} CACHE INTERNAL "uname command")
-    # processor may have double quote in the name, and that needs to be removed
-    STRING(REGEX REPLACE "\"" "" CMAKE_SYSTEM_PROCESSOR "${CMAKE_SYSTEM_PROCESSOR}")
-    STRING(REGEX REPLACE "/" "_" CMAKE_SYSTEM_PROCESSOR "${CMAKE_SYSTEM_PROCESSOR}")
-  ENDIF(CMAKE_UNAME)
-ELSE(UNIX)
-  IF(WIN32)
-    SET (CMAKE_SYSTEM_NAME "Windows")
-    SET (CMAKE_SYSTEM_PROCESSOR "$ENV{PROCESSOR_ARCHITECTURE}")
-  ENDIF(WIN32)
-ENDIF(UNIX)
-
-IF(NOT CMAKE_SYSTEM_NAME)
-  SET(CMAKE_SYSTEM_NAME "UnknownOS")
-ENDIF(NOT CMAKE_SYSTEM_NAME)
-
-# fix for BSD/OS , remove the /
-IF(CMAKE_SYSTEM_NAME MATCHES BSD.OS)
-  SET(CMAKE_SYSTEM_NAME BSDOS)
-ENDIF(CMAKE_SYSTEM_NAME MATCHES BSD.OS)
-
-# fix for CYGWIN which has windows version in it 
-IF(CMAKE_SYSTEM_NAME MATCHES CYGWIN)
-  SET(CMAKE_SYSTEM_NAME CYGWIN)
-ENDIF(CMAKE_SYSTEM_NAME MATCHES CYGWIN)
-
-# set CMAKE_SYSTEM to the CMAKE_SYSTEM_NAME
-SET(CMAKE_SYSTEM  ${CMAKE_SYSTEM_NAME})
-# if there is a CMAKE_SYSTEM_VERSION then add a -${CMAKE_SYSTEM_VERSION}
-IF(CMAKE_SYSTEM_VERSION)
-  SET(CMAKE_SYSTEM ${CMAKE_SYSTEM}-${CMAKE_SYSTEM_VERSION})
-ENDIF(CMAKE_SYSTEM_VERSION)
-
-
-FILE(APPEND ${CMAKE_BINARY_DIR}${CMAKE_FILES_DIRECTORY}/CMakeOutput.log 
-  "The system is: ${CMAKE_SYSTEM_NAME} - ${CMAKE_SYSTEM_VERSION} - ${CMAKE_SYSTEM_PROCESSOR}\n")
-
-# configure variables set in this file for fast reload
-CONFIGURE_FILE(${CMAKE_ROOT}/Modules/CMakeSystem.cmake.in 
-               ${CMAKE_BINARY_DIR}${CMAKE_FILES_DIRECTORY}/CMakeSystem.cmake 
-               IMMEDIATE)
-

Modified: branches/avidemux_2.5_branch_gruntster/cmake/admDetermineSystem.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admDetermineSystem.cmake	2008-03-03 19:01:19 UTC (rev 3821)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admDetermineSystem.cmake	2008-03-04 10:19:08 UTC (rev 3822)
@@ -6,7 +6,37 @@
 #  ADM_CPU_X86_64        - x86-64 CPU architecture was detected
 #  CMAKE_WORDS_BIGENDIAN - big endian CPU detected
 
-INCLUDE(CMakeDetermineSystem)
+MACRO (PERFORM_SYSTEM_TEST testFile testName testSupportedVarName)
+	IF (${ARGC} EQUAL 4)
+		SET (testFlags ${ARGV3})
+	ELSE (${ARGC} EQUAL 4)
+		SET (testFlags "")
+	ENDIF (${ARGC} EQUAL 4)
+
+	ADM_COMPILE(${testFile} "${testFlags}" "" "" ${testSupportedVarName} outputTest)
+
+	IF (${testSupportedVarName})
+		SET(testResult "Yes")
+	ELSE (${testSupportedVarName})
+		SET(testResult "No")
+	ENDIF (${testSupportedVarName})
+
+	IF (${testSupportedVarName} OR VERBOSE)
+		MESSAGE(STATUS "Check if GCC is ${testName} - ${testResult}")
+	ENDIF (${testSupportedVarName} OR VERBOSE)
+
+	IF (NOT ${testSupportedVarName} AND VERBOSE)
+		MESSAGE("Error Message: ${outputTest}")
+	ENDIF (NOT ${testSupportedVarName} AND VERBOSE)
+ENDMACRO (PERFORM_SYSTEM_TEST)
+
+# clear previous settings
+SET(APPLE)
+SET(CYGWIN)
+SET(MINGW)
+SET(UNIX)
+SET(WIN32)
+
 INCLUDE(TestBigEndian)
 
 MESSAGE(STATUS "Checking GCC support")
@@ -15,54 +45,62 @@
 ########################################
 # Check OS support
 ########################################
-ADM_COMPILE(bsd_check.cpp "" "" "" BSD_SUPPORTED outputBsdTest)
+PERFORM_SYSTEM_TEST(os_unix_check.cpp "Unix" UNIX_SUPPORTED)
 
-IF (BSD_SUPPORTED)
-	SET(ADM_BSD_FAMILY 1)
+IF (UNIX_SUPPORTED)
+	SET(UNIX 1)
 
-	MESSAGE(STATUS "Check if GCC is BSD family - Yes")
-ELSE (BSD_SUPPORTED)
-	MESSAGE(STATUS "Check if GCC is BSD family - No")
+	PERFORM_SYSTEM_TEST(os_bsd_check.cpp "BSD family" BSD_SUPPORTED)
 
-	IF (VERBOSE)
-		MESSAGE("Error Message: ${outputBsdTest}")
-	ENDIF (VERBOSE)
-ENDIF (BSD_SUPPORTED)
+	IF (BSD_SUPPORTED)
+		SET(ADM_BSD_FAMILY 1)
+		PERFORM_SYSTEM_TEST(os_apple_check.cpp "Apple" APPLE_SUPPORTED)
 
+		IF (APPLE_SUPPORTED)
+			SET(APPLE 1)
+		ENDIF (APPLE_SUPPORTED)
+	ELSE (BSD_SUPPORTED)
+		PERFORM_SYSTEM_TEST(os_cygwin_check.cpp "Cygwin" CYGWIN_SUPPORTED)
+
+		IF (CYGWIN_SUPPORTED)
+			SET(CYGWIN 1)
+
+			PERFORM_SYSTEM_TEST(os_win32_check.cpp "Win32" WIN32_SUPPORTED "-mwin32")
+
+			IF (WIN32_SUPPORTED)
+				SET(WIN32 1)
+			ENDIF (WIN32_SUPPORTED)
+		ENDIF (CYGWIN_SUPPORTED)
+	ENDIF (BSD_SUPPORTED)
+ELSE (UNIX_SUPPORTED)
+	PERFORM_SYSTEM_TEST(os_win32_check.cpp "Win32" WIN32_SUPPORTED)
+
+	IF (WIN32_SUPPORTED)
+		SET(WIN32 1)
+
+		PERFORM_SYSTEM_TEST(os_mingw_check.cpp "MinGW" MINGW_SUPPORTED)
+
+		IF (MINGW_SUPPORTED)
+			SET(MINGW 1)
+		ENDIF (MINGW_SUPPORTED)
+	ENDIF (WIN32_SUPPORTED)
+ENDIF (UNIX_SUPPORTED)
+
 ########################################
 # Check CPU support
 ########################################
-# x86_64
-ADM_COMPILE(cpu_x86-64_check.cpp "" "" "" X86_64_SUPPORTED outputx86_64Test)
+PERFORM_SYSTEM_TEST(cpu_x86-64_check.cpp "x86-64" X86_64_SUPPORTED)
 
 IF (X86_64_SUPPORTED)
 	SET(ADM_CPU_X86_64 1)
-
-	MESSAGE(STATUS "Check if GCC is x86 64-bit - Yes")
 ELSE (X86_64_SUPPORTED)
-	MESSAGE(STATUS "Check if GCC is x86 64-bit - No")
+	PERFORM_SYSTEM_TEST(cpu_x86_check.cpp "x86" X86_SUPPORTED)
 
-	IF (VERBOSE)
-		MESSAGE("Error Message: ${outputx86_64Test}")
-	ENDIF (VERBOSE)
-
-	# x86
-	ADM_COMPILE(cpu_x86_check.cpp "" "" "" X86_SUPPORTED outputX86Test)
-
 	IF (X86_SUPPORTED)
 		SET(ADM_CPU_X86 1)
-
-		MESSAGE(STATUS "Check if GCC is x86 32-bit - Yes")
 	ELSE (X86_SUPPORTED)
-		MESSAGE(STATUS "Check if GCC is x86 32-bit - No")
+		PERFORM_SYSTEM_TEST(cpu_ppc_check.cpp "PowerPC" POWERPC_SUPPORTED)
 
-		IF (VERBOSE)
-			MESSAGE("Error Message: ${outputX86Test}")
-		ENDIF (VERBOSE)
-
-		# PowerPC
-		ADM_COMPILE(cpu_ppc_check.cpp "" "" "" POWERPC_SUPPORTED outputPowerPcTest)
-
 		IF (POWERPC_SUPPORTED)
 			SET(ADM_CPU_PPC 1)
 
@@ -72,25 +110,11 @@
 				SET(ADM_ALTIVEC_FLAGS "${ADM_ALTIVEC_FLAGS} -faltivec")
 			ENDIF (APPLE)
 
-			MESSAGE(STATUS "Check if GCC is PowerPC - Yes")	
-			ADM_COMPILE(cpu_altivec_check.cpp "${ADM_ALTIVEC_FLAGS}" "" "" ALTIVEC_SUPPORTED outputAltivecTest)
+			PERFORM_SYSTEM_TEST(cpu_altivec_check.cpp "AltiVec" ALTIVEC_SUPPORTED)
 
 			IF (ALTIVEC_SUPPORTED)
 				SET(ADM_CPU_ALTIVEC 1)
-				MESSAGE(STATUS "Check if GCC is AltiVec - Yes")
-			ELSE (ALTIVEC_SUPPORTED)
-				MESSAGE(STATUS "Check if GCC is AltiVec - No")
-
-				IF (VERBOSE)
-					MESSAGE("Error Message: ${outputAltivecTest}")
-				ENDIF (VERBOSE)
 			ENDIF (ALTIVEC_SUPPORTED)
-		ELSE (POWERPC_SUPPORTED)
-			MESSAGE(STATUS "Check if GCC is PowerPC - No")
-
-			IF (VERBOSE)
-				MESSAGE("Error Message: ${outputPowerPcTest}")
-			ENDIF (VERBOSE)
 		ENDIF (POWERPC_SUPPORTED)
 	ENDIF (X86_SUPPORTED)
 ENDIF (X86_64_SUPPORTED)

Deleted: branches/avidemux_2.5_branch_gruntster/cmake_compile_check/bsd_check.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake_compile_check/bsd_check.cpp	2008-03-03 19:01:19 UTC (rev 3821)
+++ branches/avidemux_2.5_branch_gruntster/cmake_compile_check/bsd_check.cpp	2008-03-04 10:19:08 UTC (rev 3822)
@@ -1,8 +0,0 @@
-int main(int a, char **b)
-{
-#if defined(__APPLE__) || defined(__FreeBSD__) || defined(__DragonFly__) || defined(__NetBSD__) || defined(__OpenBSD__)
-	return 0;
-#else
-#error Unable to detect GCC for BSD family
-#endif
-}

Added: branches/avidemux_2.5_branch_gruntster/cmake_compile_check/os_apple_check.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake_compile_check/os_apple_check.cpp	2008-03-03 19:01:19 UTC (rev 3821)
+++ branches/avidemux_2.5_branch_gruntster/cmake_compile_check/os_apple_check.cpp	2008-03-04 10:19:08 UTC (rev 3822)
@@ -0,0 +1,8 @@
+int main(int a, char **b)
+{
+#if defined(__APPLE__)
+	return 0;
+#else
+#error GCC is not Apple
+#endif
+}

Copied: branches/avidemux_2.5_branch_gruntster/cmake_compile_check/os_bsd_check.cpp (from rev 3819, branches/avidemux_2.5_branch_gruntster/cmake_compile_check/bsd_check.cpp)

Added: branches/avidemux_2.5_branch_gruntster/cmake_compile_check/os_cygwin_check.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake_compile_check/os_cygwin_check.cpp	2008-03-03 19:01:19 UTC (rev 3821)
+++ branches/avidemux_2.5_branch_gruntster/cmake_compile_check/os_cygwin_check.cpp	2008-03-04 10:19:08 UTC (rev 3822)
@@ -0,0 +1,8 @@
+int main(int a, char **b)
+{
+#if defined(__CYGWIN__)
+	return 0;
+#else
+#error GCC is not Cygwin
+#endif
+}

Added: branches/avidemux_2.5_branch_gruntster/cmake_compile_check/os_mingw_check.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake_compile_check/os_mingw_check.cpp	2008-03-03 19:01:19 UTC (rev 3821)
+++ branches/avidemux_2.5_branch_gruntster/cmake_compile_check/os_mingw_check.cpp	2008-03-04 10:19:08 UTC (rev 3822)
@@ -0,0 +1,8 @@
+int main(int a, char **b)
+{
+#if defined(__MINGW32__)
+	return 0;
+#else
+#error GCC is not MinGW
+#endif
+}

Added: branches/avidemux_2.5_branch_gruntster/cmake_compile_check/os_unix_check.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake_compile_check/os_unix_check.cpp	2008-03-03 19:01:19 UTC (rev 3821)
+++ branches/avidemux_2.5_branch_gruntster/cmake_compile_check/os_unix_check.cpp	2008-03-04 10:19:08 UTC (rev 3822)
@@ -0,0 +1,8 @@
+int main(int a, char **b)
+{
+#if defined(__unix__)
+	return 0;
+#else
+#error GCC is not Unix
+#endif
+}

Added: branches/avidemux_2.5_branch_gruntster/cmake_compile_check/os_win32_check.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake_compile_check/os_win32_check.cpp	2008-03-03 19:01:19 UTC (rev 3821)
+++ branches/avidemux_2.5_branch_gruntster/cmake_compile_check/os_win32_check.cpp	2008-03-04 10:19:08 UTC (rev 3822)
@@ -0,0 +1,8 @@
+int main(int a, char **b)
+{
+#if defined(__WIN32)
+	return 0;
+#else
+#error GCC is not Win32
+#endif
+}



From gruntster at mail.berlios.de  Tue Mar  4 18:38:26 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Tue, 4 Mar 2008 18:38:26 +0100
Subject: [Avidemux-svn-commit] r3823 - in
	branches/avidemux_2.5_branch_gruntster: . avidemux
	avidemux/ADM_libraries/ADM_utilities
	avidemux/ADM_userInterfaces/ADM_QT4 cmake cmake_compile_check
Message-ID: <200803041738.m24HcQu0023049@sheep.berlios.de>

Author: gruntster
Date: 2008-03-04 18:38:18 +0100 (Tue, 04 Mar 2008)
New Revision: 3823

Modified:
   branches/avidemux_2.5_branch_gruntster/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_gettext.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ui_support.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/cmake/Po.cmake
   branches/avidemux_2.5_branch_gruntster/cmake_compile_check/os_unix_check.cpp
Log:
[CMake] fix translation support for Mac and bundle language files

Modified: branches/avidemux_2.5_branch_gruntster/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/CMakeLists.txt	2008-03-04 10:19:08 UTC (rev 3822)
+++ branches/avidemux_2.5_branch_gruntster/CMakeLists.txt	2008-03-04 17:38:18 UTC (rev 3823)
@@ -30,7 +30,7 @@
 ENDIF (LATE_BINDING)
 
 ########################################
-# Avidemux OS specific tweaks
+# Avidemux system specific tweaks
 ########################################
 INCLUDE(admDetermineSystem)
 
@@ -39,6 +39,11 @@
 	SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -mwin32")
 ENDIF (CYGWIN)
 
+IF (ADM_CPU_ALTIVEC)
+	SET(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} ${ADM_ALTIVEC_FLAGS}")
+	SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} ${ADM_ALTIVEC_FLAGS}")
+ENDIF (ADM_CPU_ALTIVEC)
+
 IF (UNIX AND NOT APPLE)
 	# jog shuttle is only available on Linux due to its interface
 	SET(USE_JOG 1)
@@ -105,14 +110,6 @@
 	SET(ADM_DEBUG 1)
 ENDIF (NOT CMAKE_BUILD_TYPE)
 
-###########################################
-# CPU Specific
-###########################################
-IF (ADM_CPU_ALTIVEC)
-	SET(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} ${ADM_ALTIVEC_FLAGS}")
-	SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} ${ADM_ALTIVEC_FLAGS}")
-ENDIF (ADM_CPU_ALTIVEC)
-
 ########################################
 # Subversion
 ########################################
@@ -202,7 +199,7 @@
 
 SET(CONFIG_HEADER_TYPE ADM_BUILD_QT4)
 CONFIGURE_FILE("${CMAKE_SOURCE_DIR}/cmake/config.h.cmake" "${CMAKE_CURRENT_BINARY_DIR}/config/qt4/config.h")
-MESSAGE(STATUS "QT4 config.h generated")
+MESSAGE(STATUS "Qt4 config.h generated")
 
 ########################################
 # Directories to build

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_gettext.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_gettext.cpp	2008-03-04 10:19:08 UTC (rev 3822)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_gettext.cpp	2008-03-04 17:38:18 UTC (rev 3823)
@@ -5,12 +5,36 @@
 #include <libintl.h>
 #include <locale.h>
 
+#ifdef __APPLE__
+#include <Carbon/Carbon.h>
+#endif
+
 void initGetText(void)
 {
 	char *local = setlocale(LC_ALL, "");
 
 #ifdef __WIN32
 	bindtextdomain("avidemux", "./share/locale");
+#elif defined(__APPLE__)
+#define MAX_PATH_SIZE 1024
+	char buffer[MAX_PATH_SIZE];
+
+	CFURLRef url(CFBundleCopyExecutableURL(CFBundleGetMainBundle()));
+	buffer[0] = '\0';
+
+	if (url)
+	{
+		CFURLGetFileSystemRepresentation(url, true, (UInt8*)buffer, MAX_PATH_SIZE);
+		CFRelease(url);
+
+		char *slash = strrchr(buffer, '/');
+		
+		if (slash)
+			slash[1] = '\0';
+	}
+
+	strcat(buffer, "../Resources/locale");
+	bindtextdomain("avidemux", buffer);
 #else
 	bindtextdomain("avidemux", ADMLOCALE);
 #endif
@@ -31,7 +55,7 @@
 	if(local)
 		printf("[Locale] Textdomain is now %s\n", local);
 
-#ifndef __WIN32
+#if !defined(__WIN32) && !defined(__APPLE__)
 	printf("[Locale] Files for %s appear to be in %s\n","avidemux", ADMLOCALE);
 #endif
 	printf("[Locale] Test: %s\n\n", dgettext("avidemux", "_File"));

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ui_support.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ui_support.cpp	2008-03-04 10:19:08 UTC (rev 3822)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ui_support.cpp	2008-03-04 17:38:18 UTC (rev 3823)
@@ -53,7 +53,11 @@
 {
 	printf("\n[Locale] Locale: %s\n", QLocale::system().name().toUtf8().constData());
 
+#ifdef __APPLE__
+	QString appdir = QCoreApplication::applicationDirPath() + "/../Resources/locale/";
+#else
 	QString appdir = QCoreApplication::applicationDirPath() + "/i18n/";
+#endif
 
 	loadTranslation(&qtTranslator, appdir + "qt_" + QLocale::system().name());
 	loadTranslation(&avidemuxTranslator, appdir + "avidemux_" + QLocale::system().name());

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt	2008-03-04 10:19:08 UTC (rev 3822)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt	2008-03-04 17:38:18 UTC (rev 3823)
@@ -80,6 +80,28 @@
 	SET(MACOSX_BUNDLE_LONG_VERSION_STRING "${ADM_OSX_VERSION}") 
 	SET(MACOSX_BUNDLE_SHORT_VERSION_STRING "${ADM_OSX_VERSION}")
 	SET(MACOSX_BUNDLE_VERSION "${ADM_OSX_VERSION}")
+
+	# include translation files in bundle
+	# this isn't the cleanest approach but there's not much we can do until the po directory is under the avidemux directory
+	FILE(GLOB PO_FILES ${CMAKE_SOURCE_DIR}/po/*.po)
+
+	FOREACH(_file ${PO_FILES})
+		GET_FILENAME_COMPONENT(_filename ${_file} NAME_WE)
+		SET(_mofile "${CMAKE_BINARY_DIR}/po/${_filename}/avidemux.mo")
+
+		SET(MO_FILES ${MO_FILES} ${_mofile})
+		SET_SOURCE_FILES_PROPERTIES(${_mofile} PROPERTIES GENERATED TRUE MACOSX_PACKAGE_LOCATION "Resources/locale/${_filename}/LC_MESSAGES")
+	ENDFOREACH(_file)
+
+	FILE(GLOB TS_FILES ${CMAKE_SOURCE_DIR}/po/*.ts)
+
+	FOREACH(_file ${TS_FILES})
+		GET_FILENAME_COMPONENT(_filename ${_file} NAME_WE)
+		SET(_qmfile "${CMAKE_BINARY_DIR}/po/${_filename}.qm")
+
+		SET(QM_FILES ${QM_FILES} ${_qmfile})
+		SET_SOURCE_FILES_PROPERTIES(${_qmfile} PROPERTIES GENERATED TRUE MACOSX_PACKAGE_LOCATION "Resources/locale")
+	ENDFOREACH(_file)
 ENDIF (APPLE)
 
 IF (WIN32)
@@ -101,17 +123,20 @@
 ########################################
 SET(ADM_EXE_SRCS ${ADM_EXE_SRCS} ADM_preview.cpp  gtk_gui.cpp  gui_autodrive.cpp  GUI_jobs.cpp  gui_navigate.cpp  guiplay.cpp  gui_savenew.cpp  main.cpp  gui_action.cpp)
 
-ADD_EXECUTABLE(avidemux2_cli MACOSX_BUNDLE ${ADM_EXE_SRCS})
+ADD_EXECUTABLE(avidemux2_cli MACOSX_BUNDLE ${ADM_EXE_SRCS} ${MO_FILES})
 ADD_TARGET_CFLAGS(avidemux2_cli "-I${CMAKE_BINARY_DIR}/config/cli")
+ADD_DEPENDENCIES(avidemux2_cli mofiles)
 
 IF (ADM_UI_GTK)
-	ADD_EXECUTABLE(avidemux2_gtk MACOSX_BUNDLE ${ADM_EXE_SRCS})
+	ADD_EXECUTABLE(avidemux2_gtk MACOSX_BUNDLE ${ADM_EXE_SRCS} ${MO_FILES})
 	ADD_TARGET_CFLAGS(avidemux2_gtk "-I${CMAKE_BINARY_DIR}/config/gtk")
+	ADD_DEPENDENCIES(avidemux2_gtk mofiles)
 ENDIF (ADM_UI_GTK)
 
 IF (ADM_UI_QT4)
-	ADD_EXECUTABLE(avidemux2_qt4 MACOSX_BUNDLE ${ADM_EXE_SRCS})
+	ADD_EXECUTABLE(avidemux2_qt4 MACOSX_BUNDLE ${ADM_EXE_SRCS} ${QM_FILES})
 	ADD_TARGET_CFLAGS(avidemux2_qt4 "-I${CMAKE_BINARY_DIR}/config/qt4")
+	ADD_DEPENDENCIES(avidemux2_qt4 qmfiles)
 ENDIF (ADM_UI_QT4)
 
 SDLify(main.cpp)
@@ -331,12 +356,10 @@
 # XVideo
 IF (USE_XV)
 	IF (ADM_UI_GTK)
-		TARGET_LINK_LIBRARIES(avidemux2_gtk ${X11_LIBRARIES})
 		TARGET_LINK_LIBRARIES(avidemux2_gtk ${XVIDEO_LIBRARY_DIR})
 	ENDIF (ADM_UI_GTK)
 
 	IF (ADM_UI_QT4)
-		TARGET_LINK_LIBRARIES(avidemux2_qt4 ${X11_LIBRARIES})
 		TARGET_LINK_LIBRARIES(avidemux2_qt4 ${XVIDEO_LIBRARY_DIR})
 	ENDIF (ADM_UI_QT4)
 ENDIF (USE_XV)

Modified: branches/avidemux_2.5_branch_gruntster/cmake/Po.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/Po.cmake	2008-03-04 10:19:08 UTC (rev 3822)
+++ branches/avidemux_2.5_branch_gruntster/cmake/Po.cmake	2008-03-04 17:38:18 UTC (rev 3823)
@@ -1,54 +1,46 @@
-# a small macro to create mo files out of po's
-# Taken from sim-im.org
-
-MACRO(FIND_MSGFMT)
-    IF(NOT MSGFMT_EXECUTABLE)
-        IF(NOT MSGFMT_NOT_FOUND)
-            SET(MSGFMT_NAME "msgfmt")
-            FIND_PROGRAM(MSGFMT_EXECUTABLE ${MSGFMT_NAME})
-
-            IF (NOT MSGFMT_EXECUTABLE)
-              MESSAGE(FATAL_ERROR "${MSGFMT_NAME} not found - po files can't be processed")
-              SET(MSGFMT_NOT_FOUND "1")     # to avoid double checking in one cmake run
-            ENDIF (NOT MSGFMT_EXECUTABLE)
-
-            MARK_AS_ADVANCED(MSGFMT_EXECUTABLE)
-        ENDIF(NOT MSGFMT_NOT_FOUND)
-    ENDIF(NOT MSGFMT_EXECUTABLE)
-ENDMACRO(FIND_MSGFMT)
-
-MACRO(COMPILE_PO_FILES po_subdir _sources)
-    FIND_MSGFMT()
-    SET(_basename avidemux2)
-	
-    IF(MSGFMT_EXECUTABLE)
-        FILE(GLOB po_files ${po_subdir}/*.po)
-
-        FOREACH(po_input ${po_files})
-
-            GET_FILENAME_COMPONENT(_in       ${po_input} ABSOLUTE)
-            GET_FILENAME_COMPONENT(_basename ${po_input} NAME_WE)
-
-            FILE(MAKE_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR})
-            GET_FILENAME_COMPONENT(_out ${CMAKE_CURRENT_BINARY_DIR}/${_basename}.mo ABSOLUTE)
-            
-            ADD_CUSTOM_COMMAND(
-                OUTPUT ${_out}
-                COMMAND ${CMAKE_COMMAND}
-                    -E echo
-                    "Generating" ${_out} "from" ${_in}
-                COMMAND ${MSGFMT_EXECUTABLE}
-                    ${_in}
-                    -o ${_out}
-                DEPENDS ${_in}
-            )
-                
-            SET(mo_files ${mo_files} ${_out})
-
-            INSTALL(FILES ${_out} DESTINATION "${CMAKE_INSTALL_PREFIX}/share/locale/${_basename}/LC_MESSAGES" RENAME avidemux.mo)
-        ENDFOREACH(po_input ${po_files})
-
-        SET(${_sources} ${${_sources}} ${mo_files})
-    ENDIF(MSGFMT_EXECUTABLE)
-ENDMACRO(COMPILE_PO_FILES)
-
+# a small macro to create mo files out of po's
+# Taken from sim-im.org
+
+MACRO(FIND_MSGFMT)
+    IF(NOT MSGFMT_EXECUTABLE)
+        IF(NOT MSGFMT_NOT_FOUND)
+            SET(MSGFMT_NAME "msgfmt")
+            FIND_PROGRAM(MSGFMT_EXECUTABLE ${MSGFMT_NAME})
+
+            IF (NOT MSGFMT_EXECUTABLE)
+              MESSAGE(FATAL_ERROR "${MSGFMT_NAME} not found - po files can't be processed")
+              SET(MSGFMT_NOT_FOUND "1")     # to avoid double checking in one cmake run
+            ENDIF (NOT MSGFMT_EXECUTABLE)
+
+            MARK_AS_ADVANCED(MSGFMT_EXECUTABLE)
+        ENDIF(NOT MSGFMT_NOT_FOUND)
+    ENDIF(NOT MSGFMT_EXECUTABLE)
+ENDMACRO(FIND_MSGFMT)
+
+MACRO(COMPILE_PO_FILES po_subdir _sources)
+    FIND_MSGFMT()
+
+    IF(MSGFMT_EXECUTABLE)
+        FILE(GLOB po_files ${po_subdir}/*.po)
+
+        FOREACH(po_input ${po_files})
+            GET_FILENAME_COMPONENT(_in ${po_input} ABSOLUTE)
+            GET_FILENAME_COMPONENT(_basename ${po_input} NAME_WE)
+
+            FILE(MAKE_DIRECTORY "${CMAKE_CURRENT_BINARY_DIR}/${_basename}")
+            GET_FILENAME_COMPONENT(_out "${CMAKE_CURRENT_BINARY_DIR}/${_basename}/avidemux.mo" ABSOLUTE)
+
+            ADD_CUSTOM_COMMAND(
+                OUTPUT ${_out}
+                COMMAND ${CMAKE_COMMAND} -E echo "Generating" ${_out} "from" ${_in}
+                COMMAND ${MSGFMT_EXECUTABLE} ${_in} -o ${_out}
+                DEPENDS ${_in})
+
+            SET(mo_files ${mo_files} ${_out})
+
+            INSTALL(FILES ${_out} DESTINATION "${CMAKE_INSTALL_PREFIX}/share/locale/${_basename}/LC_MESSAGES")
+        ENDFOREACH(po_input ${po_files})
+
+        SET(${_sources} ${${_sources}} ${mo_files})
+    ENDIF(MSGFMT_EXECUTABLE)
+ENDMACRO(COMPILE_PO_FILES)

Modified: branches/avidemux_2.5_branch_gruntster/cmake_compile_check/os_unix_check.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake_compile_check/os_unix_check.cpp	2008-03-04 10:19:08 UTC (rev 3822)
+++ branches/avidemux_2.5_branch_gruntster/cmake_compile_check/os_unix_check.cpp	2008-03-04 17:38:18 UTC (rev 3823)
@@ -1,6 +1,6 @@
 int main(int a, char **b)
 {
-#if defined(__unix__)
+#if defined(__unix__) || defined(__APPLE__)
 	return 0;
 #else
 #error GCC is not Unix



From gruntster at mail.berlios.de  Tue Mar  4 21:55:01 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Tue, 4 Mar 2008 21:55:01 +0100
Subject: [Avidemux-svn-commit] r3824 - in
	branches/avidemux_2.5_branch_gruntster: .
	avidemux/ADM_audiocodec avidemux/ADM_codecs
	avidemux/ADM_libraries/ADM_libMad
	avidemux/ADM_libraries/ADM_libMpeg2Dec
	avidemux/ADM_libraries/ADM_smjs
	avidemux/ADM_libraries/ADM_utilities avidemux/ADM_osSupport
	avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters
	avidemux/ADM_userInterfaces/ADM_commonUI
	avidemux/ADM_videoFilter cmake
Message-ID: <200803042055.m24Kt1lK013958@sheep.berlios.de>

Author: gruntster
Date: 2008-03-04 21:54:48 +0100 (Tue, 04 Mar 2008)
New Revision: 3824

Added:
   branches/avidemux_2.5_branch_gruntster/cmake/admLibMad.cmake
Modified:
   branches/avidemux_2.5_branch_gruntster/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_mpeg.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libMad/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libMpeg2Dec/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_smjs/jsautocfg.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/default.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_cpuCap.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/cmake/admDetermineSystem.cmake
   branches/avidemux_2.5_branch_gruntster/cmake/admSetLavcodecFlags.cmake
   branches/avidemux_2.5_branch_gruntster/cmake/config.h.cmake
Log:
[CMake] localise and clean up defines

Modified: branches/avidemux_2.5_branch_gruntster/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/CMakeLists.txt	2008-03-04 17:38:18 UTC (rev 3823)
+++ branches/avidemux_2.5_branch_gruntster/CMakeLists.txt	2008-03-04 20:54:48 UTC (rev 3824)
@@ -54,9 +54,7 @@
 ########################################
 SET(VERSION 2.5)
 
-SET(HAVE_BUILTIN_VECTOR 1)
 SET(HAVE_AUDIO 1)
-
 SET(USE_MP3 1)
 SET(USE_AC3 1)
 SET(USE_FFMPEG 1)
@@ -69,7 +67,6 @@
 ELSEIF (ADM_CPU_X86_64)
 	SET(ARCH_X86 1)
 	SET(ARCH_X86_64 1)
-	SET(ARCH_64_BITS 1)
 ELSEIF (ADM_CPU_PPC)
 	SET(ARCH_POWERPC 1)
 
@@ -89,21 +86,9 @@
 	SET(WORDS_BIGENDIAN 1)
 ENDIF (CMAKE_WORDS_BIGENDIAN)
 
-# LibMad
-IF (ADM_CPU_X86)
-	SET(FPM_INTEL 1)
-ELSEIF (ADM_CPU_X86_64)
-	SET(FPM_DEFAULT 1)
-ELSEIF (ADM_CPU_PPC)
-	SET(FPM_PPC 1)
-ENDIF (ADM_CPU_X86)
-
 # Libavcodec
 INCLUDE(admSetLavcodecFlags)
 
-# LibMpeg2Dec
-SET(ACCEL_DETECT 1)
-
 IF (NOT CMAKE_BUILD_TYPE)
 	SET(CMAKE_BUILD_TYPE "Release")
 ELSEIF (CMAKE_BUILD_TYPE STREQUAL "Debug")

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/CMakeLists.txt	2008-03-04 17:38:18 UTC (rev 3823)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/CMakeLists.txt	2008-03-04 20:54:48 UTC (rev 3824)
@@ -21,4 +21,9 @@
 
 IF (USE_VORBIS)
 	ADD_SOURCE_CFLAGS(audiocodec_ogg.cpp -I${VORBIS_INCLUDE_DIR})
-ENDIF (USE_VORBIS)
\ No newline at end of file
+ENDIF (USE_VORBIS)
+
+INCLUDE(admLibMad)
+GET_MAD_CFLAGS(MAD_CFLAGS)
+
+ADD_SOURCE_CFLAGS(ADM_codecmp3.cpp ${MAD_CFLAGS})
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_mpeg.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_mpeg.cpp	2008-03-04 17:38:18 UTC (rev 3823)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_mpeg.cpp	2008-03-04 20:54:48 UTC (rev 3824)
@@ -422,7 +422,7 @@
 {
   uint8_t *all;
   uint32_t page, img;
-#ifdef ARCH_64_BITS
+#ifdef ADM_CPU_64BIT
   uint64_t i;
   i = (uint64_t) id;
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libMad/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libMad/CMakeLists.txt	2008-03-04 17:38:18 UTC (rev 3823)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libMad/CMakeLists.txt	2008-03-04 20:54:48 UTC (rev 3824)
@@ -1,7 +1,12 @@
-SET(ADM_LIB ADM_libMad)
-
-SET(${ADM_LIB}_SRCS 
-	bit.c  decoder.c  fixed.c  frame.c  huffman.c  layer12.c  layer3.c  
-	stream.c  synth.c  timer.c  version.c)
-	
-ADD_ADM_LIB_ALL_TARGETS(${ADM_LIB} ${${ADM_LIB}_SRCS})
\ No newline at end of file
+SET(ADM_LIB ADM_libMad)
+
+SET(${ADM_LIB}_SRCS 
+	bit.c  decoder.c  fixed.c  frame.c  huffman.c  layer12.c  layer3.c  
+	stream.c  synth.c  timer.c  version.c)
+
+ADD_ADM_LIB_ALL_TARGETS(${ADM_LIB} ${${ADM_LIB}_SRCS})
+
+INCLUDE(admLibMad)
+GET_MAD_CFLAGS(MAD_CFLAGS)
+
+ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} ${MAD_CFLAGS})
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libMpeg2Dec/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libMpeg2Dec/CMakeLists.txt	2008-03-04 17:38:18 UTC (rev 3823)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libMpeg2Dec/CMakeLists.txt	2008-03-04 20:54:48 UTC (rev 3824)
@@ -4,4 +4,5 @@
 	alloc.c      cpu_state.c  header.c      idct_altivec.c  idct_mlib.c  motion_comp_alpha.c    motion_comp.c       motion_comp_mmx.c
 	cpu_accel.c  decode.c     idct_alpha.c  idct.c          idct_mmx.c   motion_comp_altivec.c  motion_comp_mlib.c  slice.c)
 
-ADD_ADM_LIB_ALL_TARGETS(${ADM_LIB} ${${ADM_LIB}_SRCS})
\ No newline at end of file
+ADD_ADM_LIB_ALL_TARGETS(${ADM_LIB} ${${ADM_LIB}_SRCS})
+ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "-DACCEL_DETECT")
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_smjs/jsautocfg.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_smjs/jsautocfg.h	2008-03-04 17:38:18 UTC (rev 3823)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_smjs/jsautocfg.h	2008-03-04 20:54:48 UTC (rev 3824)
@@ -22,7 +22,7 @@
 #define JS_BYTES_PER_DOUBLE 8L
 #define JS_BYTES_PER_DWORD  8L
 
-#ifdef ARCH_64_BITS
+#ifdef ADM_CPU_64BIT
 #define JS_BYTES_PER_LONG   8L
 #define JS_BYTES_PER_WORD   8L
 #define JS_BITS_PER_LONG    64L

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/default.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/default.h	2008-03-04 17:38:18 UTC (rev 3823)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/default.h	2008-03-04 20:54:48 UTC (rev 3824)
@@ -48,7 +48,7 @@
 #endif
 
 #ifndef GOT_TYPES
-#ifdef ARCH_64_BITS
+#ifdef ADM_CPU_64BIT
 #define int32_t 	signed int
 #define int64_t 	signed long int 
 #define uint64_t 	unsigned long  int

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_cpuCap.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_cpuCap.h	2008-03-04 17:38:18 UTC (rev 3823)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_cpuCap.h	2008-03-04 20:54:48 UTC (rev 3824)
@@ -51,7 +51,3 @@
 
 
 };
-
-#if (defined( ARCH_X86)  || defined(ARCH_X86_64)) && defined(HAVE_BUILTIN_VECTOR)
-#define USE_SSE 1
-#endif

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp	2008-03-04 17:38:18 UTC (rev 3823)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp	2008-03-04 20:54:48 UTC (rev 3824)
@@ -141,7 +141,7 @@
 wrapToolButton(GtkWidget * wid, gpointer user_data)
 {
         gui_act action;
-#ifdef ARCH_64_BITS
+#ifdef ADM_CPU_64BIT
 #define TPE long long int
 	long long int dummy;
 #else

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp	2008-03-04 17:38:18 UTC (rev 3823)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp	2008-03-04 20:54:48 UTC (rev 3824)
@@ -49,7 +49,7 @@
 #ifdef USE_FONTCONFIG
   adm_fontconfig=1;
 #endif
-#ifdef USE_ALTIVEC
+#ifdef ADM_CPU_ALTIVEC
         altivec=1;
 #endif
 #ifdef USE_MP3
@@ -112,13 +112,13 @@
 #ifdef USE_XV
 	xvideo=1;
 #endif
-#ifdef ARCH_X86
+#ifdef ADM_CPU_X86
 	x86=1;
 #endif
-#ifdef ARCH_X86_64
+#ifdef ADM_CPU_X86_64
 	x86_64=1;
 #endif
-#ifdef ARCH_POWERPC
+#ifdef ADM_CPU_PPC
 	adm_powerpc=1;
 #endif
 #ifdef HAVE_GETTEXT

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/CMakeLists.txt	2008-03-04 17:38:18 UTC (rev 3823)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/CMakeLists.txt	2008-03-04 20:54:48 UTC (rev 3824)
@@ -51,3 +51,7 @@
 	ADD_SOURCE_CFLAGS(ADM_vidSRTload.cpp "${FREETYPE2_CFLAGS}")
 	ADD_SOURCE_CFLAGS(ADM_vidSRTRender.cpp "${FREETYPE2_CFLAGS}")
 ENDIF (USE_FREETYPE)
+
+IF (ADM_CPU_X86)
+	ADD_SOURCE_CFLAGS(ADM_vidDecDec.cpp "-DUSE_SSE")
+ENDIF (ADM_CPU_X86)
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/cmake/admDetermineSystem.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admDetermineSystem.cmake	2008-03-04 17:38:18 UTC (rev 3823)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admDetermineSystem.cmake	2008-03-04 20:54:48 UTC (rev 3824)
@@ -1,9 +1,11 @@
 # Determine CPU and Operating System for GCC
 #  ADM_BSD_FAMILY        - BSD family operating system was detected
+#  ADM_CPU_64BIT         - 64-bit CPU was detected
 #  ADM_CPU_ALTIVEC       - PowerPC CPU with AltiVec architecture was detected
 #  ADM_CPU_PPC           - PowerPC CPU architecture was detected
 #  ADM_CPU_X86           - x86 CPU architecture was detected
-#  ADM_CPU_X86_64        - x86-64 CPU architecture was detected
+#  ADM_CPU_X86_32        - x86 32-bit CPU architecture was detected
+#  ADM_CPU_X86_64        - x86 64-bit CPU architecture was detected
 #  CMAKE_WORDS_BIGENDIAN - big endian CPU detected
 
 MACRO (PERFORM_SYSTEM_TEST testFile testName testSupportedVarName)
@@ -89,16 +91,19 @@
 ########################################
 # Check CPU support
 ########################################
-PERFORM_SYSTEM_TEST(cpu_x86-64_check.cpp "x86-64" X86_64_SUPPORTED)
+PERFORM_SYSTEM_TEST(cpu_x86-64_check.cpp "x86 64-bit" X86_64_SUPPORTED)
 
 IF (X86_64_SUPPORTED)
+	SET(ADM_CPU_X86 1)
 	SET(ADM_CPU_X86_64 1)
+	SET(ADM_CPU_64BIT 1)
 ELSE (X86_64_SUPPORTED)
-	PERFORM_SYSTEM_TEST(cpu_x86_check.cpp "x86" X86_SUPPORTED)
+	PERFORM_SYSTEM_TEST(cpu_x86_check.cpp "x86 32-bit" X86_32_SUPPORTED)
 
-	IF (X86_SUPPORTED)
+	IF (X86_32_SUPPORTED)
 		SET(ADM_CPU_X86 1)
-	ELSE (X86_SUPPORTED)
+		SET(ADM_CPU_X86_32 1)
+	ELSE (X86_32_SUPPORTED)
 		PERFORM_SYSTEM_TEST(cpu_ppc_check.cpp "PowerPC" POWERPC_SUPPORTED)
 
 		IF (POWERPC_SUPPORTED)
@@ -110,17 +115,17 @@
 				SET(ADM_ALTIVEC_FLAGS "${ADM_ALTIVEC_FLAGS} -faltivec")
 			ENDIF (APPLE)
 
-			PERFORM_SYSTEM_TEST(cpu_altivec_check.cpp "AltiVec" ALTIVEC_SUPPORTED)
+			PERFORM_SYSTEM_TEST(cpu_altivec_check.cpp "AltiVec" ALTIVEC_SUPPORTED "${ADM_ALTIVEC_FLAGS}")
 
 			IF (ALTIVEC_SUPPORTED)
 				SET(ADM_CPU_ALTIVEC 1)
 			ENDIF (ALTIVEC_SUPPORTED)
 		ENDIF (POWERPC_SUPPORTED)
-	ENDIF (X86_SUPPORTED)
+	ENDIF (X86_32_SUPPORTED)
 ENDIF (X86_64_SUPPORTED)
 
 TEST_BIG_ENDIAN(CMAKE_WORDS_BIGENDIAN)
 
-IF (NOT ADM_CPU_X86 AND NOT ADM_CPU_X86_64 AND NOT ADM_CPU_PPC)
+IF (NOT ADM_CPU_X86_32 AND NOT ADM_CPU_X86_64 AND NOT ADM_CPU_PPC)
 	MESSAGE(FATAL_ERROR "CPU not supported")
-ENDIF (NOT ADM_CPU_X86 AND NOT ADM_CPU_X86_64 AND NOT ADM_CPU_PPC)
\ No newline at end of file
+ENDIF (NOT ADM_CPU_X86_32 AND NOT ADM_CPU_X86_64 AND NOT ADM_CPU_PPC)
\ No newline at end of file

Added: branches/avidemux_2.5_branch_gruntster/cmake/admLibMad.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admLibMad.cmake	2008-03-04 17:38:18 UTC (rev 3823)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admLibMad.cmake	2008-03-04 20:54:48 UTC (rev 3824)
@@ -0,0 +1,9 @@
+MACRO (GET_MAD_CFLAGS varToSet)
+	IF (ADM_CPU_X86_32)
+		SET(${varToSet} "-DFPM_INTEL")
+	ELSEIF (ADM_CPU_X86_64)
+		SET(${varToSet} "-DFPM_DEFAULT")
+	ELSEIF (ADM_CPU_PPC)
+		SET(${varToSet} "-DFPM_PPC")
+	ENDIF (ADM_CPU_X86_32)
+ENDMACRO (GET_MAD_CFLAGS)
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/cmake/admSetLavcodecFlags.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admSetLavcodecFlags.cmake	2008-03-04 17:38:18 UTC (rev 3823)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admSetLavcodecFlags.cmake	2008-03-04 20:54:48 UTC (rev 3824)
@@ -24,7 +24,7 @@
 SET(HAVE_THREADS 1)
 SET(RUNTIME_CPUDETECT 1)
 
-IF (ADM_CPU_X86 OR ADM_CPU_X86_64)
+IF (ADM_CPU_X86)
 	SET(ENABLE_MMX 1)
 	SET(HAVE_MMX 1)
 	SET(HAVE_FAST_UNALIGNED 1)
@@ -32,9 +32,9 @@
 	IF (ADM_CPU_X86_64)
 		SET(HAVE_FAST_64BIT 1)
 	ENDIF (ADM_CPU_X86_64)
-ELSE (ADM_CPU_X86 OR ADM_CPU_X86_64)
+ELSE (ADM_CPU_X86)
 	SET(ENABLE_MMX 0)
-ENDIF (ADM_CPU_X86 OR ADM_CPU_X86_64)
+ENDIF (ADM_CPU_X86)
 
 IF (APPLE)
 	SET(CONFIG_DARWIN 1)
@@ -43,7 +43,7 @@
 ########################################
 # Check GCC support for SSSE3
 ########################################
-IF (ADM_CPU_X86 OR ADM_CPU_X86_64)
+IF (ADM_CPU_X86)
 	ADM_COMPILE(cpu_ssse3_check.cpp "" "" "" SSSE3_SUPPORTED outputSsse3Test)
 
 	IF (SSSE3_SUPPORTED)
@@ -57,6 +57,6 @@
 			MESSAGE("Error Message: ${outputSsse3Test}")
 		ENDIF (VERBOSE)	
 	ENDIF (SSSE3_SUPPORTED)
-ENDIF (ADM_CPU_X86 OR ADM_CPU_X86_64)
+ENDIF (ADM_CPU_X86)
 
 MESSAGE("")
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/cmake/config.h.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/config.h.cmake	2008-03-04 17:38:18 UTC (rev 3823)
+++ branches/avidemux_2.5_branch_gruntster/cmake/config.h.cmake	2008-03-04 20:54:48 UTC (rev 3824)
@@ -4,12 +4,16 @@
 #define ADM_BUILD_GTK 2
 #define ADM_BUILD_QT4 3
 
+#cmakedefine ADM_CPU_64BIT
+#cmakedefine ADM_CPU_ALTIVEC
+#cmakedefine ADM_CPU_PPC
+#cmakedefine ADM_CPU_X86
+#cmakedefine ADM_CPU_X86_32
+#cmakedefine ADM_CPU_X86_64
+
 /* Jog Shuttle */
 #cmakedefine USE_JOG
 
-/* MPEG2DEC */
-#cmakedefine ACCEL_DETECT
-
 /* Big endian CPU - SPARC or PowerPC */
 #cmakedefine ADM_BIG_ENDIAN
 
@@ -21,9 +25,6 @@
 
 #cmakedefine HAVE_AUDIO
 
-/* Sparc workstations */
-#cmakedefine ADM_SPARC
-
 #if ${CONFIG_HEADER_TYPE} == ADM_BUILD_GTK || ${CONFIG_HEADER_TYPE} == ADM_BUILD_QT4
 /* use ALSA as possible audio device */
 #cmakedefine ALSA_SUPPORT
@@ -32,9 +33,6 @@
 /* AMR_NB */
 #cmakedefine AMR_NB
 
-/* X86_64 AMD64 assembly */
-#cmakedefine ARCH_64_BITS
-
 /* Enable PowerPC optim */
 #cmakedefine ARCH_POWERPC
 
@@ -84,24 +82,12 @@
 #cmakedefine HAVE_SSSE3
 #cmakedefine CONFIG_DARWIN
 
-/* Mad */
-#cmakedefine FPM_DEFAULT
-#cmakedefine FPM_INTEL
-#cmakedefine FPM_PPC
-#cmakedefine FPM_SPARC
-
-/* Using GCC 2.9x.x */
-#cmakedefine GCC_2_95_X
-
 /* AltiVec for mpeg2enc */
 #cmakedefine HAVE_ALTIVEC
 
 /* Enable AltiVec by default */
 #cmakedefine HAVE_ALTIVEC_H
 
-/* Enable AltiVec by default */
-#cmakedefine HAVE_BUILTIN_VECTOR
-
 /* FontConfig detected */
 #cmakedefine HAVE_FONTCONFIG
 
@@ -145,13 +131,9 @@
 
 /* use Aften AC3 encoder */
 #cmakedefine USE_AFTEN
+#cmakedefine USE_AFTEN_07	// 0.07
+#cmakedefine USE_AFTEN_08	// 0.0.8
 
-/* Use Aften 0.07 */
-#cmakedefine USE_AFTEN_07
-
-/* Use Aften 0.08 */
-#cmakedefine USE_AFTEN_08
-
 /* AltiVec for mpeg2enc */
 #cmakedefine USE_ALTIVEC
 
@@ -240,9 +222,6 @@
 /* use Nvwa memory leak detector */
 #cmakedefine FIND_LEAKS
 
-#cmakedefine ADM_CPU_X86
-#cmakedefine ADM_CPU_X86_64
-
 #ifdef __MINGW32__
 #define rindex strrchr
 #define index strchr



From gruntster at mail.berlios.de  Wed Mar  5 12:50:12 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Wed, 5 Mar 2008 12:50:12 +0100
Subject: [Avidemux-svn-commit] r3825 - in
	branches/avidemux_2.5_branch_gruntster: . avidemux
	avidemux/ADM_audiocodec avidemux/ADM_codecs
	avidemux/ADM_colorspace avidemux/ADM_filter
	avidemux/ADM_inputs/ADM_openDML avidemux/ADM_libraries/ADM_lavcodec
	avidemux/ADM_libraries/ADM_lavformat
	avidemux/ADM_libraries/ADM_lavutil
	avidemux/ADM_libraries/ADM_libMpeg2Dec
	avidemux/ADM_libraries/ADM_libmpeg2enc
	avidemux/ADM_libraries/ADM_libpostproc
	avidemux/ADM_libraries/ADM_libswscale
	avidemux/ADM_libraries/ADM_mplex
	avidemux/ADM_libraries/ADM_utilities avidemux/ADM_osSupport
	avidemux/ADM_userInterfaces/ADM_commonUI avidemux/ADM_video
	avidemux/ADM_videoFilter cmake
Message-ID: <200803051150.m25BoC33030692@sheep.berlios.de>

Author: gruntster
Date: 2008-03-05 12:49:06 +0100 (Wed, 05 Mar 2008)
New Revision: 3825

Added:
   branches/avidemux_2.5_branch_gruntster/cmake/admLibavcodec.cmake
Removed:
   branches/avidemux_2.5_branch_gruntster/cmake/admSetLavcodecFlags.cmake
Modified:
   branches/avidemux_2.5_branch_gruntster/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_codecac3.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_dca.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_xvid4.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_colorspace/ADM_colorspace.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_colorspace/ADM_rgb.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_colorspace/rgb2yuv.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter_declaration.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_odml_odml.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavcodec/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavformat/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavutil/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libMpeg2Dec/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/cpu_accel.cc
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/fdct_mmx.cc
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/fdct_x86.cc
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/idct_mmx.cc
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/mblock_bsad_mmx.cc
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/mblock_bsumsq_mmx.cc
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/mblock_sad_mmx.cc
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/mblock_sad_mmxe.cc
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/mblock_sub44_sads_x86.cc
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/mblock_sumsq_mmx.cc
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/motion.cc
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/motionsearch.cc
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/mpeg2enc.cc
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/mpeg2enc_if.cc
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/mpeg2setup.cc
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/predcomp_mmx.cc
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/predcomp_mmxe.cc
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/predict_mmx.cc
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/predict_ref.cc
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/predict_x86.cc
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/quant_mmx2.cc
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/quantize_ref.cc
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/quantize_x86.cc
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/readpic.cc
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/transfrm_ref.cc
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/transfrm_ref.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/transfrm_x86.cc
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libpostproc/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libswscale/ADM_mp.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libswscale/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libswscale/yuv2rgb_altivec.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/cpu_accel.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_imageResizer.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_imageUtils.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_pp.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/admmangle.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_cpuCap.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_cpuCap.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_memcpy.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyEq2.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_interlaced.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidMPdelogo.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidBlend.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDeintASM.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidEq2.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidEq2.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFields.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFlux.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidHardIvtcRemoval.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLResize.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMSharpen.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMosaic.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMsmooth.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidResampleFPS.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVlad.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVobSubRender.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidYadif.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidYadif_asm.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADMmpdetc.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/main.cpp
   branches/avidemux_2.5_branch_gruntster/cmake/config.h.cmake
Log:
[CMake] more localisation and clean up of defines

Modified: branches/avidemux_2.5_branch_gruntster/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/CMakeLists.txt	2008-03-04 20:54:48 UTC (rev 3824)
+++ branches/avidemux_2.5_branch_gruntster/CMakeLists.txt	2008-03-05 11:49:06 UTC (rev 3825)
@@ -60,34 +60,15 @@
 SET(USE_FFMPEG 1)
 SET(USE_MJPEG 1)
 
-# ARCH_XXX need to be removed from Avidemux code one day and made library specific...
-IF (ADM_CPU_X86)
-	SET(ARCH_X86 1)
-	SET(ARCH_X86_32 1)
-ELSEIF (ADM_CPU_X86_64)
-	SET(ARCH_X86 1)
-	SET(ARCH_X86_64 1)
-ELSEIF (ADM_CPU_PPC)
-	SET(ARCH_POWERPC 1)
-
-	IF (ADM_CPU_ALTIVEC)
-		SET(ARCH_PPC 1)
-		SET(USE_ALTIVEC 1)
-		SET(HAVE_ALTIVEC 1)
-
-		IF (NOT APPLE)
-			SET(HAVE_ALTIVEC_H 1)
-		ENDIF (NOT APPLE)
-	ENDIF (ADM_CPU_ALTIVEC)
-ENDIF (ADM_CPU_X86)
-
 IF (CMAKE_WORDS_BIGENDIAN)
 	SET(ADM_BIG_ENDIAN 1)
+# needs to be made library specific
 	SET(WORDS_BIGENDIAN 1)
 ENDIF (CMAKE_WORDS_BIGENDIAN)
 
 # Libavcodec
-INCLUDE(admSetLavcodecFlags)
+INCLUDE(admLibavcodec)
+SET_LAVC_CONFIG_FLAGS()
 
 IF (NOT CMAKE_BUILD_TYPE)
 	SET(CMAKE_BUILD_TYPE "Release")

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_codecac3.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_codecac3.cpp	2008-03-04 20:54:48 UTC (rev 3824)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_codecac3.cpp	2008-03-05 11:49:06 UTC (rev 3825)
@@ -43,7 +43,7 @@
     ADM_assert(fourcc==WAV_AC3);
     ac3_handle=NULL;
     ac3_sample=NULL;
-#if (defined( ARCH_X86)  || defined(ARCH_X86_64))
+#ifdef ADM_CPU_X86
 #define CHK(x,y) if(CpuCaps::has##x()) flags|=MM_ACCEL_X86_##y;
     CHK(MMX,MMX);
     CHK(3DNOW,3DNOW);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_dca.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_dca.cpp	2008-03-04 20:54:48 UTC (rev 3824)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_dca.cpp	2008-03-05 11:49:06 UTC (rev 3825)
@@ -40,7 +40,7 @@
     ADM_assert(fourcc==WAV_DTS);
     dts_handle=NULL;
     
-#if (defined( ARCH_X86)  || defined(ARCH_X86_64))
+#ifdef ADM_CPU_X86
 #define CHK(x,y) if(CpuCaps::has##x()) flags|=MM_ACCEL_X86_##y;
     CHK(MMX,MMX);
     CHK(3DNOW,3DNOW);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_xvid4.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_xvid4.cpp	2008-03-04 20:54:48 UTC (rev 3824)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_xvid4.cpp	2008-03-05 11:49:06 UTC (rev 3825)
@@ -127,7 +127,7 @@
 
   printf ("[xvid] SIMD supported: (%x)\n", xvid_gbl_info.cpu_flags);
 #define CPUF(x) if(xvid_gbl_info.cpu_flags  & XVID_CPU_##x) printf("\t\t"#x"\n");
-#if defined( ARCH_X86)  || defined(ARCH_X86_64)
+#ifdef ADM_CPU_X86
   CPUF (MMX);
   CPUF (MMXEXT);
   CPUF (SSE);
@@ -135,7 +135,7 @@
   CPUF (3DNOW);
   CPUF (3DNOWEXT);
 #endif
-#ifdef USE_ALTIVEC
+#ifdef ADM_CPU_ALTIVEC
   CPUF (ALTIVEC);
 #endif
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_colorspace/ADM_colorspace.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_colorspace/ADM_colorspace.cpp	2008-03-04 20:54:48 UTC (rev 3824)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_colorspace/ADM_colorspace.cpp	2008-03-05 11:49:06 UTC (rev 3825)
@@ -24,7 +24,7 @@
 #include "colorspace.h"
 
 #include "ADM_osSupport/ADM_cpuCap.h"
-#if (defined( ARCH_X86) || defined(ARCH_X86_64))
+#ifdef ADM_CPU_X86
 extern "C" {
 #include "ADM_libraries/ADM_lavcodec/avcodec.h"
 }
@@ -35,11 +35,11 @@
 #include "ADM_rgb.h" 
 #include "ADM_colorspace.h"
 
-#if (defined( ARCH_X86)  || defined(ARCH_X86_64))		
+#ifdef ADM_CPU_X86
 		#define ADD(x,y) if( CpuCaps::has##x()) flags|=SWS_CPU_CAPS_##y;
 #define FLAGS()		ADD(MMX,MMX);				ADD(3DNOW,3DNOW);		ADD(MMXEXT,MMX2);
 #else
-#ifdef USE_ALTIVEC
+#ifdef ADM_CPU_ALTIVEC
 #define FLAGS() flags|=SWS_CPU_CAPS_ALTIVEC;
 #else
 #define FLAGS()

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_colorspace/ADM_rgb.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_colorspace/ADM_rgb.cpp	2008-03-04 20:54:48 UTC (rev 3824)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_colorspace/ADM_rgb.cpp	2008-03-05 11:49:06 UTC (rev 3825)
@@ -29,7 +29,7 @@
 
 #include "colorspace.h"
 #include "ADM_osSupport/ADM_cpuCap.h"
-#if (defined( ARCH_X86)  || defined(ARCH_X86_64))
+#ifdef ADM_CPU_X86
 extern "C" {
 #include "ADM_libraries/ADM_lavcodec/avcodec.h"
 }
@@ -47,11 +47,11 @@
         clean();  \
     }
 
-#if (defined( ARCH_X86)  || defined(ARCH_X86_64))		
+#ifdef ADM_CPU_X86
 		#define ADD(x,y) if( CpuCaps::has##x()) flags|=SWS_CPU_CAPS_##y;
 #define FLAGS()		ADD(MMX,MMX);				ADD(3DNOW,3DNOW);		ADD(MMXEXT,MMX2);
 #else
-#ifdef USE_ALTIVEC
+#ifdef ADM_CPU_ALTIVEC
 #define FLAGS() flags|=SWS_CPU_CAPS_ALTIVEC;
 #else
 #define FLAGS()
@@ -125,7 +125,7 @@
 */
 static void ADM_RGBA2BGRA(uint8_t *ptr, uint32_t howmuch)
 {
-#if ((defined( ARCH_X86)  || defined(ARCH_X86_64)))
+#ifdef ADM_CPU_X86
     __asm__(
                         "1: mov            (%0),%%eax \n"
                         "bswap          %%eax \n"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_colorspace/rgb2yuv.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_colorspace/rgb2yuv.cpp	2008-03-04 20:54:48 UTC (rev 3824)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_colorspace/rgb2yuv.cpp	2008-03-05 11:49:06 UTC (rev 3825)
@@ -26,7 +26,7 @@
 
 #include "default.h"
 #include "ADM_osSupport/ADM_cpuCap.h"
-#if (defined( ARCH_X86)  || defined(ARCH_X86_64))
+#ifdef ADM_CPU_X86
 extern "C" {
 #include "ADM_libraries/ADM_lavcodec/avcodec.h"
 }
@@ -215,7 +215,7 @@
 	int flags = SWS_SPLINE;
 	struct SwsContext *context=NULL;
 	
-	#if (defined( ARCH_X86)  || defined(ARCH_X86_64))
+	#ifdef ADM_CPU_X86
 		#define ADD(x, y) if (CpuCaps::has##x()) flags |= SWS_CPU_CAPS_##y;
 
 		ADD(MMX,MMX);
@@ -223,7 +223,7 @@
 		ADD(MMXEXT,MMX2);
 	#endif
 
-	#ifdef USE_ALTIVEC
+	#ifdef ADM_CPU_ALTIVEC
 	    flags |= SWS_CPU_CAPS_ALTIVEC;
 	#endif
 	    context = sws_getContext(w, h,
@@ -252,7 +252,7 @@
 	int flags = SWS_SPLINE;
 	struct SwsContext *context=NULL;
 	
-	#if (defined( ARCH_X86)  || defined(ARCH_X86_64))
+	#ifdef ADM_CPU_X86
 		#define ADD(x, y) if (CpuCaps::has##x()) flags |= SWS_CPU_CAPS_##y;
 
 		ADD(MMX,MMX);
@@ -260,7 +260,7 @@
 		ADD(MMXEXT,MMX2);
 	#endif
 
-	#ifdef USE_ALTIVEC
+	#ifdef ADM_CPU_ALTIVEC
 	    flags |= SWS_CPU_CAPS_ALTIVEC;
 	#endif
 	    context = sws_getContext(w, h,

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter_declaration.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter_declaration.cpp	2008-03-04 20:54:48 UTC (rev 3824)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter_declaration.cpp	2008-03-05 11:49:06 UTC (rev 3825)
@@ -21,8 +21,8 @@
 #include <stdio.h>
 #include <stdlib.h>
 #include <string.h>
+
 #include "ADM_assert.h"
-#include "ADM_assert.h"
 
 #include "config.h"
 #include "fourcc.h"
@@ -130,7 +130,7 @@
 	REGISTERX("mpdenoise3d",QT_TR_NOOP("MPlayer denoise3d"),QT_TR_NOOP("Reduce noise, smooth image, increase compressibility."),VF_MPLLQD3D,1,MPD3Dlow_create,MPD3Dlow_script);
 	REGISTERX("mphqdenoise3d",QT_TR_NOOP("MPlayer hqdn3d"),QT_TR_NOOP("High quality version of denoise3d. Slower but more precise."),VF_MPLHQD3D,1,MPD3D_create,MPD3D_script);
 	REGISTERX("fluxsmooth",QT_TR_NOOP("FluxSmooth"),QT_TR_NOOP("Spatio-temporal cleaner by Ross Thomas."),VF_FLUXSMOOTH,1,fluxsmooth_create,fluxsmooth_script);
-#if defined( ARCH_X86)  || defined(ARCH_X86_64)
+#ifdef ADM_CPU_X86
     	REGISTERX("temporalcleaner",QT_TR_NOOP("Temporal Cleaner"),QT_TR_NOOP("Vlad59's Avisynth port of Jim Casaburi's denoiser."),VF_VLADSMOOTH,1,vladsmooth_create,vladsmooth_script);
 #endif
 	REGISTERX("denoise",QT_TR_NOOP("Denoise"),QT_TR_NOOP("Port of Transcode DNR."),VF_DENOISE,1,denoise_create,denoise_script);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_odml_odml.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_odml_odml.cpp	2008-03-04 20:54:48 UTC (rev 3824)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_odml_odml.cpp	2008-03-05 11:49:06 UTC (rev 3825)
@@ -38,7 +38,7 @@
 
 //#define OPENDML_VERBOSE
 
-#if defined( __WIN32) || defined(ARCH_X86_64)
+#if defined( __WIN32) || defined(ADM_CPU_X86_64)
 	#define PPACKED __attribute__ ((packed, gcc_struct))
 #else
 	#define PPACKED 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavcodec/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavcodec/CMakeLists.txt	2008-03-04 20:54:48 UTC (rev 3824)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavcodec/CMakeLists.txt	2008-03-05 11:49:06 UTC (rev 3825)
@@ -29,7 +29,7 @@
 	dvbsub.c xiph.c
 	sp5xdec.c nellymoserdec.c)
 
-IF(ARCH_X86)
+IF(ADM_CPU_X86)
 	SET(${ADM_LIB}_SRCS  ${${ADM_LIB}_SRCS}
 		i386/cputest.c
 		i386/mpegvideo_mmx.c     i386/vp3dsp_mmx.c 
@@ -38,7 +38,7 @@
 		i386/fft_sse.c i386/vp3dsp_sse2.c  
 		i386/idct_mmx_xvid.c i386/fft_3dn2.c 
 		i386/snowdsp_mmx.c i386/fft_3dn.c)
-ENDIF(ARCH_X86)
+ENDIF(ADM_CPU_X86)
 
 IF (ADM_CPU_ALTIVEC)
 	SET(${ADM_LIB}_SRCS  ${${ADM_LIB}_SRCS}
@@ -57,3 +57,7 @@
 IF (USE_AMR_NB)
 	ADD_SOURCE_CFLAGS(amr.c -I${AMRNB_INCLUDE_DIR})
 ENDIF (USE_AMR_NB)
+
+INCLUDE(admLibavcodec)
+GET_LAVC_CFLAGS(LAVC_CFLAGS)
+ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "${LAVC_CFLAGS}")
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavformat/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavformat/CMakeLists.txt	2008-03-04 20:54:48 UTC (rev 3824)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavformat/CMakeLists.txt	2008-03-05 11:49:06 UTC (rev 3825)
@@ -7,4 +7,8 @@
 	flvenc.c matroskaenc.c)
 
 ADD_ADM_LIB_ALL_TARGETS(${ADM_LIB} ${${ADM_LIB}_SRCS})
-ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "-I../ADM_lavcodec -I../ADM_lavutil -DHAVE_AV_CONFIG_H")
\ No newline at end of file
+ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "-I../ADM_lavcodec -I../ADM_lavutil -DHAVE_AV_CONFIG_H")
+
+INCLUDE(admLibavcodec)
+GET_LAVC_CFLAGS(LAVC_CFLAGS)
+ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "${LAVC_CFLAGS}")
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavutil/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavutil/CMakeLists.txt	2008-03-04 20:54:48 UTC (rev 3824)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavutil/CMakeLists.txt	2008-03-05 11:49:06 UTC (rev 3825)
@@ -5,4 +5,8 @@
 	string.c)
 
 ADD_ADM_LIB_ALL_TARGETS(${ADM_LIB} ${${ADM_LIB}_SRCS})
-ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "-DHAVE_AV_CONFIG_H")
\ No newline at end of file
+ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "-DHAVE_AV_CONFIG_H")
+
+INCLUDE(admLibavcodec)
+GET_LAVC_CFLAGS(LAVC_CFLAGS)
+ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "${LAVC_CFLAGS}")
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libMpeg2Dec/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libMpeg2Dec/CMakeLists.txt	2008-03-04 20:54:48 UTC (rev 3824)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libMpeg2Dec/CMakeLists.txt	2008-03-05 11:49:06 UTC (rev 3825)
@@ -1,8 +1,18 @@
-SET(ADM_LIB ADM_libMpeg2Dec)
-
-SET(${ADM_LIB}_SRCS 
-	alloc.c      cpu_state.c  header.c      idct_altivec.c  idct_mlib.c  motion_comp_alpha.c    motion_comp.c       motion_comp_mmx.c
-	cpu_accel.c  decode.c     idct_alpha.c  idct.c          idct_mmx.c   motion_comp_altivec.c  motion_comp_mlib.c  slice.c)
-
-ADD_ADM_LIB_ALL_TARGETS(${ADM_LIB} ${${ADM_LIB}_SRCS})
-ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "-DACCEL_DETECT")
\ No newline at end of file
+SET(ADM_LIB ADM_libMpeg2Dec)
+
+SET(${ADM_LIB}_SRCS 
+	alloc.c      cpu_state.c  header.c      idct_altivec.c  idct_mlib.c  motion_comp_alpha.c    motion_comp.c       motion_comp_mmx.c
+	cpu_accel.c  decode.c     idct_alpha.c  idct.c          idct_mmx.c   motion_comp_altivec.c  motion_comp_mlib.c  slice.c)
+
+ADD_ADM_LIB_ALL_TARGETS(${ADM_LIB} ${${ADM_LIB}_SRCS})
+ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "-DACCEL_DETECT")
+
+IF (ADM_CPU_X86)
+	ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "-DARCH_X86")
+ELSEIF (ADM_CPU_ALTIVEC)
+	ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "-DARCH_PPC")
+
+	IF (NOT __APPLE__)
+		ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "-DHAVE_ALTIVEC_H")
+	ENDIF (NOT __APPLE__)
+ENDIF (ADM_CPU_X86)
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/CMakeLists.txt	2008-03-04 20:54:48 UTC (rev 3824)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/CMakeLists.txt	2008-03-05 11:49:06 UTC (rev 3825)
@@ -23,3 +23,17 @@
 
 ADD_ADM_LIB_ALL_TARGETS(${ADM_LIB} ${${ADM_LIB}_SRCS})
 ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "-I${CMAKE_CURRENT_SOURCE_DIR}")
+
+IF (ADM_CPU_X86)
+	ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "-DHAVE_X86CPU")
+
+	IF (ADM_CPU_X86_64)
+		ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "-DHAVE_X86_64_CPU")
+	ENDIF (ADM_CPU_X86_64)
+ELSEIF (ADM_CPU_ALTIVEC)
+	ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "-DHAVE_ALTIVEC")
+
+	IF (NOT __APPLE__)
+		ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "-DHAVE_ALTIVEC_H")
+	ENDIF (NOT __APPLE__)
+ENDIF (ADM_CPU_X86)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/cpu_accel.cc
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/cpu_accel.cc	2008-03-04 20:54:48 UTC (rev 3824)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/cpu_accel.cc	2008-03-05 11:49:06 UTC (rev 3825)
@@ -28,7 +28,7 @@
 #include "default.h"
 #include "ADM_osSupport/ADM_cpuCap.h"
 
-#if defined( HAVE_ALTIVEC ) && defined(USE_ALTIVEC)
+#ifdef HAVE_ALTIVEC
 int detect_altivec(){};
 #endif
 
@@ -40,7 +40,7 @@
 
 
 
-#if defined(ARCH_X86) || defined(ARCH_X86_64)
+#ifdef HAVE_X86CPU
 
 static int x86_accel (void)
 {
@@ -57,7 +57,7 @@
 #endif   
 int cpu_accel (void)
 {
-#if defined(ARCH_X86) || defined(ARCH_X86_64)
+#ifdef HAVE_X86CPU
     static int got_accel = 0;
     static int accel;
 
@@ -68,7 +68,7 @@
 
     return accel;
 #endif
-#if defined( HAVE_ALTIVEC) && defined(USE_ALTIVEC)
+#ifdef HAVE_ALTIVEC
     return detect_altivec();
 #else
     return 0;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/fdct_mmx.cc
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/fdct_mmx.cc	2008-03-04 20:54:48 UTC (rev 3824)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/fdct_mmx.cc	2008-03-05 11:49:06 UTC (rev 3825)
@@ -31,7 +31,7 @@
  */
 
 #include <config.h>
-#if defined( ARCH_X86)  || defined(ARCH_X86_64)
+#ifdef HAVE_X86CPU
 #include "mjpeg_types.h"
 #include "attributes.h"
 #include "mmx.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/fdct_x86.cc
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/fdct_x86.cc	2008-03-04 20:54:48 UTC (rev 3824)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/fdct_x86.cc	2008-03-05 11:49:06 UTC (rev 3825)
@@ -1,5 +1,5 @@
 #include <config.h>
-#if defined( ARCH_X86)  || defined(ARCH_X86_64)
+#ifdef HAVE_X86CPU
 #include <math.h>
 #include <unistd.h>
 #include "mjpeg_types.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/idct_mmx.cc
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/idct_mmx.cc	2008-03-04 20:54:48 UTC (rev 3824)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/idct_mmx.cc	2008-03-05 11:49:06 UTC (rev 3825)
@@ -2,7 +2,7 @@
 #include <stdio.h>
 #include <stdlib.h>
 #include <unistd.h>
-#if defined( ARCH_X86)  || defined(ARCH_X86_64)
+#ifdef HAVE_X86CPU
 #include "mjpeg_types.h"
 #include "mmx.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/mblock_bsad_mmx.cc
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/mblock_bsad_mmx.cc	2008-03-04 20:54:48 UTC (rev 3824)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/mblock_bsad_mmx.cc	2008-03-05 11:49:06 UTC (rev 3825)
@@ -21,7 +21,7 @@
 #include <config.h>
 #include <stdio.h>
 #include "mjpeg_types.h"
-#if defined( ARCH_X86)  || defined(ARCH_X86_64)
+#ifdef HAVE_X86CPU
 #include "mmx.h"
 
 // These rely on mm7 being zero

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/mblock_bsumsq_mmx.cc
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/mblock_bsumsq_mmx.cc	2008-03-04 20:54:48 UTC (rev 3824)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/mblock_bsumsq_mmx.cc	2008-03-05 11:49:06 UTC (rev 3825)
@@ -20,7 +20,7 @@
 
 #include <config.h>
 #include "mjpeg_types.h"
-#if defined( ARCH_X86)  || defined(ARCH_X86_64)
+#ifdef HAVE_X86CPU
 #include "mmx.h"
 
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/mblock_sad_mmx.cc
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/mblock_sad_mmx.cc	2008-03-04 20:54:48 UTC (rev 3824)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/mblock_sad_mmx.cc	2008-03-05 11:49:06 UTC (rev 3825)
@@ -26,7 +26,7 @@
 
 #include <config.h>
 #include "mjpeg_types.h"
-#if defined( ARCH_X86)  || defined(ARCH_X86_64)
+#ifdef HAVE_X86CPU
 #include "mmx.h"
 
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/mblock_sad_mmxe.cc
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/mblock_sad_mmxe.cc	2008-03-04 20:54:48 UTC (rev 3824)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/mblock_sad_mmxe.cc	2008-03-05 11:49:06 UTC (rev 3825)
@@ -31,7 +31,7 @@
 */
 
 #include <config.h>
-#if defined( ARCH_X86)  || defined(ARCH_X86_64)
+#ifdef HAVE_X86CPU
 #include "mjpeg_types.h"
 #include "mmx.h"
 #include "mmxsse_motion.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/mblock_sub44_sads_x86.cc
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/mblock_sub44_sads_x86.cc	2008-03-04 20:54:48 UTC (rev 3824)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/mblock_sub44_sads_x86.cc	2008-03-05 11:49:06 UTC (rev 3825)
@@ -35,7 +35,7 @@
  */
 
 #include <config.h>
-#if defined( ARCH_X86)  || defined(ARCH_X86_64)
+#ifdef HAVE_X86CPU
 #include "mjpeg_types.h"
 #include "attributes.h"
 #include "mmx.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/mblock_sumsq_mmx.cc
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/mblock_sumsq_mmx.cc	2008-03-04 20:54:48 UTC (rev 3824)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/mblock_sumsq_mmx.cc	2008-03-05 11:49:06 UTC (rev 3825)
@@ -20,7 +20,7 @@
 
 #include <config.h>
 #include "mjpeg_types.h"
-#if defined( ARCH_X86)  || defined(ARCH_X86_64)
+#ifdef HAVE_X86CPU
 #include "mmx.h"
 
 /*

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/motion.cc
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/motion.cc	2008-03-04 20:54:48 UTC (rev 3824)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/motion.cc	2008-03-05 11:49:06 UTC (rev 3825)
@@ -6,7 +6,7 @@
 #include "ADM_osSupport/ADM_cpuCap.h"
 void enable_mmxsse_motion(int cpucap)
 {
-#if defined( ARCH_X86)  || defined(ARCH_X86_64)
+#ifdef HAVE_X86CPU
 	if(CpuCaps::hasMMXEXT())  /* AMD MMX or SSE... */
 	{
                 printf( "[Mpeg2enc] MMXE motion \n");

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/motionsearch.cc
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/motionsearch.cc	2008-03-04 20:54:48 UTC (rev 3824)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/motionsearch.cc	2008-03-05 11:49:06 UTC (rev 3825)
@@ -39,7 +39,7 @@
  * and verification.
  */
 #define STATIC static
-#if defined( HAVE_ALTIVEC ) && defined(USE_ALTIVEC)
+#ifdef HAVE_ALTIVEC
 //#include "altivec/altivec_motion.h"
 #  if ALTIVEC_TEST_MOTION
 #    undef STATIC
@@ -49,7 +49,7 @@
 
 
 
-#if defined( ARCH_X86)  || defined(ARCH_X86_64)
+#ifdef HAVE_X86CPU
 #include "mmxsse_motion.h"
 #endif
 
@@ -996,7 +996,7 @@
 	pbuild_sub44_mests = build_sub44_mests;
 	psubsample_image = subsample_image;
 
-#if defined( ARCH_X86)  || defined(ARCH_X86_64)
+#ifdef HAVE_X86CPU
 	printf("[Mpeg2enc]Enabling mmx motion search\n");
 	enable_mmxsse_motion(0);
 #endif

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/mpeg2enc.cc
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/mpeg2enc.cc	2008-03-04 20:54:48 UTC (rev 3824)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/mpeg2enc.cc	2008-03-05 11:49:06 UTC (rev 3825)
@@ -67,7 +67,7 @@
 #include "format_codes.h"
 #include "mpegconsts.h"
 #include "fastintfns.h"
-#if defined( HAVE_ALTIVEC) && defined(USE_ALTIVEC)
+#ifdef HAVE_ALTIVEC
 /* needed for ALTIVEC_BENCHMARK and print_benchmark_statistics() */
 #include "../utils/altivec/altivec_conf.h"
 #endif

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/mpeg2enc_if.cc
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/mpeg2enc_if.cc	2008-03-04 20:54:48 UTC (rev 3824)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/mpeg2enc_if.cc	2008-03-05 11:49:06 UTC (rev 3825)
@@ -39,7 +39,7 @@
 #include "format_codes.h"
 #include "mpegconsts.h"
 #include "fastintfns.h"
-#if defined( HAVE_ALTIVEC) && defined(USE_ALTIVEC)
+#ifdef HAVE_ALTIVEC
 /* needed for ALTIVEC_BENCHMARK and print_benchmark_statistics() */
 //#include "../utils/altivec/altivec_conf.h"
 #endif

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/mpeg2setup.cc
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/mpeg2setup.cc	2008-03-04 20:54:48 UTC (rev 3824)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/mpeg2setup.cc	2008-03-05 11:49:06 UTC (rev 3825)
@@ -1187,7 +1187,7 @@
 	opt->enc_width = 16*mb_width;
 	opt->enc_height = 16*mb_height;
 
-#if defined( HAVE_ALTIVEC) && defined(USE_ALTIVEC)
+#ifdef HAVE_ALTIVEC
 	/* Pad opt->phy_width to 64 so that the rowstride of 4*4
 	 * sub-sampled data will be a multiple of 16 (ideal for AltiVec)
 	 * and the rowstride of 2*2 sub-sampled data will be a multiple

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/predcomp_mmx.cc
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/predcomp_mmx.cc	2008-03-04 20:54:48 UTC (rev 3824)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/predcomp_mmx.cc	2008-03-05 11:49:06 UTC (rev 3825)
@@ -25,7 +25,7 @@
 
 #include <config.h>
 #include "mjpeg_types.h"
-#if defined( ARCH_X86)  || defined(ARCH_X86_64)
+#ifdef HAVE_X86CPU
 #include "mmx.h"
 
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/predcomp_mmxe.cc
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/predcomp_mmxe.cc	2008-03-04 20:54:48 UTC (rev 3824)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/predcomp_mmxe.cc	2008-03-05 11:49:06 UTC (rev 3825)
@@ -24,7 +24,7 @@
  */
  
 #include <config.h>
-#if defined( ARCH_X86)  || defined(ARCH_X86_64)
+#ifdef HAVE_X86CPU
 #include "mjpeg_types.h"
 #include "mmx.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/predict_mmx.cc
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/predict_mmx.cc	2008-03-04 20:54:48 UTC (rev 3824)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/predict_mmx.cc	2008-03-05 11:49:06 UTC (rev 3825)
@@ -20,7 +20,7 @@
 
 #include <config.h>
 #include "mjpeg_types.h"
-#if defined( ARCH_X86)  || defined(ARCH_X86_64)
+#ifdef HAVE_X86CPU
 #include "mmx.h"
   
 void sub_pred_mmx(unsigned char *pred, unsigned char *cur, int lx, int16_t *blk)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/predict_ref.cc
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/predict_ref.cc	2008-03-04 20:54:48 UTC (rev 3824)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/predict_ref.cc	2008-03-05 11:49:06 UTC (rev 3825)
@@ -59,7 +59,7 @@
 #include <stdio.h>
 
 
-#if defined( HAVE_ALTIVEC) && defined(USE_ALTIVEC)
+#ifdef HAVE_ALTIVEC
 #include "altivec/altivec_predict.h"
 #endif
 
@@ -301,7 +301,7 @@
                 printf("[Mpeg2enc] C predict (NO ACCEL)\n");
 	}
 
-#if defined( ARCH_X86)  || defined(ARCH_X86_64)
+#ifdef HAVE_X86CPU
 	else if(cpucap & ACCEL_X86_MMXEXT ) /* AMD MMX or SSE... */
 	{
                 printf("[Mpeg2enc] MMXE predict\n");
@@ -313,7 +313,7 @@
 		ppred_comp = pred_comp_mmx;
 	}
 #endif
-#if defined( HAVE_ALTIVEC) && defined(USE_ALTIVEC)
+#ifdef HAVE_ALTIVEC
     else
 	{
 #  if ALTIVEC_TEST_PREDICT

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/predict_x86.cc
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/predict_x86.cc	2008-03-04 20:54:48 UTC (rev 3824)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/predict_x86.cc	2008-03-05 11:49:06 UTC (rev 3825)
@@ -25,7 +25,7 @@
 #include "mjpeg_types.h"
 #include "simd.h"
 #include "predict_ref.h"
-#if defined( ARCH_X86)  || defined(ARCH_X86_64)
+#ifdef HAVE_X86CPU
 void pred_comp_mmxe(
 	uint8_t *src,
 	uint8_t *dst,

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/quant_mmx2.cc
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/quant_mmx2.cc	2008-03-04 20:54:48 UTC (rev 3824)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/quant_mmx2.cc	2008-03-05 11:49:06 UTC (rev 3825)
@@ -22,7 +22,7 @@
  */
 
 #include <config.h>
-#if defined( ARCH_X86)  || defined(ARCH_X86_64)
+#ifdef HAVE_X86CPU
 #include "mjpeg_types.h"
 #include "mmx.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/quantize_ref.cc
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/quantize_ref.cc	2008-03-04 20:54:48 UTC (rev 3824)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/quantize_ref.cc	2008-03-05 11:49:06 UTC (rev 3825)
@@ -63,7 +63,7 @@
 #include "simd.h"
 #include "ADM_osSupport/ADM_cpuCap.h"
 
-#if defined( HAVE_ALTIVEC) && defined(USE_ALTIVEC)
+#ifdef HAVE_ALTIVEC
 void enable_altivec_quantization(int op);//t->mpeg1);
 #endif
 
@@ -473,7 +473,7 @@
 {
   pquant_weight_coeff_sum = quant_weight_coeff_sum;
   piquant_non_intra = iquant_non_intra;
-#if (defined( ARCH_X86)  || defined(ARCH_X86_64))
+#ifdef HAVE_X86CPU
         if(CpuCaps::hasMMX())
         {
                 printf("[Mpeg2enc]Using MMX quant non intra\n");

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/quantize_x86.cc
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/quantize_x86.cc	2008-03-04 20:54:48 UTC (rev 3824)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/quantize_x86.cc	2008-03-05 11:49:06 UTC (rev 3825)
@@ -29,7 +29,7 @@
 #include <math.h>
 #include <string.h>
 
-#if (defined( ARCH_X86)  || defined(ARCH_X86_64))
+#ifdef HAVE_X86CPU
 
 #include "syntaxparams.h"
 #include "mjpeg_logging.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/readpic.cc
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/readpic.cc	2008-03-04 20:54:48 UTC (rev 3824)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/readpic.cc	2008-03-05 11:49:06 UTC (rev 3825)
@@ -98,7 +98,7 @@
 
 int luminance_mean(uint8_t *frame, int w, int h )
 {
-#if defined( ARCH_X86)  || defined(ARCH_X86_64)
+#ifdef HAVE_X86CPU
         if(CpuCaps::hasMMX()) return luminance_mean_MMX(frame,w,h);
 #endif
         luminance_mean_C(frame,w,h);
@@ -121,14 +121,14 @@
 	sum=sum/(w*h);
 	return sum;
 }
-#if defined( ARCH_X86)  || defined(ARCH_X86_64)
+#ifdef HAVE_X86CPU
 // MEANX
 // code borrowed from ffmpeg by means
 
 static int pix_sum16_mmx(uint8_t * pix, int line_size)
 {
     const int h=16;
-#ifdef ARCH_X86_64
+#ifdef HAVE_X86_64_CPU
     long int rline_size=line_size;
     long int sum;
     long int index= -line_size*h;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/transfrm_ref.cc
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/transfrm_ref.cc	2008-03-04 20:54:48 UTC (rev 3824)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/transfrm_ref.cc	2008-03-05 11:49:06 UTC (rev 3825)
@@ -58,11 +58,11 @@
 #include "cpu_accel.h"
 #include "simd.h"
 #include "ADM_osSupport/ADM_cpuCap.h"
-#if defined( HAVE_ALTIVEC ) && defined(USE_ALTIVEC)
+#ifdef HAVE_ALTIVEC
 //#include "../utils/altivec/altivec_transform.h"
 #endif
 
-#if defined( ARCH_X86)  || defined(ARCH_X86_64)
+#ifdef HAVE_X86CPU
 
 	void add_pred_mmx (uint8_t *pred, uint8_t *cur,
 						  int lx, int16_t *blk) ;
@@ -192,7 +192,7 @@
 {
 
 	// By default use C implementation
-#if defined( ARCH_X86)  || defined(ARCH_X86_64)
+#ifdef HAVE_X86CPU
                 if(CpuCaps::hasSSE())
                 {
 		  pfdct = mp2_fdct_sse;
@@ -224,7 +224,7 @@
 		psub_pred = sub_pred;
 		pfield_dct_best = field_dct_best;
                 printf("[Mpeg2enc] C idct/fdct\n");
-#if !defined( ARCH_X86)  && !defined(ARCH_X86_64)
+#ifndef HAVE_X86CPU
 		printf("Because not X86 Arch\n");
 #endif
                 }
@@ -254,7 +254,7 @@
 		pfield_dct_best = field_dct_best;
 	}
 
-#if defined( HAVE_ALTIVEC) && defined(USE_ALTIVEC)
+#ifdef HAVE_ALTIVEC
 	if (flags > 0)
 	{
 #if ALTIVEC_TEST_TRANSFORM

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/transfrm_ref.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/transfrm_ref.h	2008-03-04 20:54:48 UTC (rev 3824)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/transfrm_ref.h	2008-03-05 11:49:06 UTC (rev 3825)
@@ -84,7 +84,7 @@
 void init_fdct (void);
 void init_idct (void);
 */
-#if defined( ARCH_X86)  || defined(ARCH_X86_64)
+#ifdef HAVE_X86CPU
 void init_mp2_fdct_sse();
 void mp2_fdct_sse( int16_t *blk );
 void mp2_idct_sse( int16_t *blk );

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/transfrm_x86.cc
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/transfrm_x86.cc	2008-03-04 20:54:48 UTC (rev 3824)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/transfrm_x86.cc	2008-03-05 11:49:06 UTC (rev 3825)
@@ -22,7 +22,7 @@
 
 
 #include <config.h>
-#if defined( ARCH_X86)  || defined(ARCH_X86_64)
+#ifdef HAVE_X86CPU
 #include <math.h>
 #include "mjpeg_types.h"
 #include "syntaxparams.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libpostproc/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libpostproc/CMakeLists.txt	2008-03-04 20:54:48 UTC (rev 3824)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libpostproc/CMakeLists.txt	2008-03-05 11:49:06 UTC (rev 3825)
@@ -6,6 +6,10 @@
 ADD_ADM_LIB_ALL_TARGETS(${ADM_LIB} ${${ADM_LIB}_SRCS})
 ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "-I.. -DHAVE_AV_CONFIG_H  -O3 -I../.. -I../ADM_lavutil -Drestrict=__restrict__ -fomit-frame-pointer")
 
-IF(ARCH_X86_64)
+IF(ADM_CPU_X86_64)
 	ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "-msse")
-ENDIF(ARCH_X86_64)
\ No newline at end of file
+ENDIF(ADM_CPU_X86_64)
+
+INCLUDE(admLibavcodec)
+GET_LAVC_CFLAGS(LAVC_CFLAGS)
+ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "${LAVC_CFLAGS}")
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libswscale/ADM_mp.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libswscale/ADM_mp.cpp	2008-03-04 20:54:48 UTC (rev 3824)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libswscale/ADM_mp.cpp	2008-03-05 11:49:06 UTC (rev 3825)
@@ -26,7 +26,7 @@
 #include "avio.hxx"
 #include "default.h"
 
-#if (defined( ARCH_X86)  || defined(ARCH_X86_64))
+#ifdef ADM_CPU_X86
 extern "C" {
 #include "ADM_libraries/ADM_lavcodec/avcodec.h"
 }
@@ -49,14 +49,14 @@
 
                            flags=SWS_BILINEAR;
 
-#if (defined( ARCH_X86)  || defined(ARCH_X86_64))
+#ifdef ADM_CPU_X86
                 
                 #define ADD(x,y) if( CpuCaps::has##x()) flags|=SWS_CPU_CAPS_##y;
                 ADD(MMX,MMX);           
                 ADD(3DNOW,3DNOW);
                 ADD(MMXEXT,MMX2);
-#endif  
-#ifdef USE_ALTIVEC
+#endif
+#ifdef ADM_CPU_ALTIVEC
                 flags|=SWS_CPU_CAPS_ALTIVEC;
 #endif
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libswscale/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libswscale/CMakeLists.txt	2008-03-04 20:54:48 UTC (rev 3824)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libswscale/CMakeLists.txt	2008-03-05 11:49:06 UTC (rev 3825)
@@ -1,7 +1,9 @@
 SET(ADM_LIB ADM_libswscale)
+SET(${ADM_LIB}_SRCS swscale.c yuv2rgb.c rgb2rgb.c ADM_mp.cpp)
 
-SET(${ADM_LIB}_SRCS 
-	swscale.c yuv2rgb.c rgb2rgb.c yuv2rgb_altivec.c ADM_mp.cpp)
+IF (ADM_CPU_ALTIVEC)
+	SET(${ADM_LIB}_SRCS ${${ADM_LIB}_SRCS} yuv2rgb_altivec.c)
+ENDIF (ADM_CPU_ALTIVEC)
 	
 ADD_ADM_LIB_ALL_TARGETS(${ADM_LIB} ${${ADM_LIB}_SRCS})
 ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "-DCONFIG_GPL -fomit-frame-pointer")
@@ -12,4 +14,8 @@
 	IF (ADM_DEBUG)
 		ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "-O2")
 	ENDIF (ADM_DEBUG)
-ENDIF (APPLE)
\ No newline at end of file
+ENDIF (APPLE)
+
+INCLUDE(admLibavcodec)
+GET_LAVC_CFLAGS(LAVC_CFLAGS)
+ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "${LAVC_CFLAGS}")
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libswscale/yuv2rgb_altivec.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libswscale/yuv2rgb_altivec.c	2008-03-04 20:54:48 UTC (rev 3824)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libswscale/yuv2rgb_altivec.c	2008-03-05 11:49:06 UTC (rev 3825)
@@ -80,7 +80,7 @@
  * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
  */
 #include "config.h"
-#ifdef USE_ALTIVEC
+
 #include <stdio.h>
 #include <stdlib.h>
 #include <string.h>
@@ -966,4 +966,3 @@
     }
 
 }
-#endif //MEANX

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/CMakeLists.txt	2008-03-04 20:54:48 UTC (rev 3824)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/CMakeLists.txt	2008-03-05 11:49:06 UTC (rev 3825)
@@ -12,3 +12,11 @@
 IF (NOT APPLE)
     ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "-DHAVE_MEMALIGN")
 ENDIF (NOT APPLE)
+
+IF (ADM_CPU_X86)
+    ADD_SOURCE_CFLAGS(cpu_accel.c "-DHAVE_X86CPU")
+ENDIF (ADM_CPU_X86)
+
+IF (ADM_CPU_ALTIVEC)
+    ADD_SOURCE_CFLAGS(cpu_accel.c "-DHAVE_ALTIVEC")
+ENDIF (ADM_CPU_ALTIVEC)
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/cpu_accel.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/cpu_accel.c	2008-03-04 20:54:48 UTC (rev 3824)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/cpu_accel.c	2008-03-05 11:49:06 UTC (rev 3825)
@@ -75,7 +75,7 @@
 /* Some miscelaneous stuff to allow checking whether SSE instructions cause
    illegal instruction errors.
 */
-
+#if !defined(__MINGW32__)
 static sigjmp_buf sigill_recover;
 
 static RETSIGTYPE sigillhandler(int sig )
@@ -84,11 +84,12 @@
 }
 
 typedef RETSIGTYPE (*__sig_t)(int);
+#endif
 
 static int testsseill()
 {
 	int illegal;
-#if defined(__CYGWIN__)
+#if defined(__CYGWIN__) || defined(__MINGW32__)
 	/* SSE causes a crash on CYGWIN, apparently.
 	   Perhaps the wrong signal is being caught or something along
 	   those line ;-) or maybe SSE itself won't work...

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_imageResizer.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_imageResizer.cpp	2008-03-04 20:54:48 UTC (rev 3824)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_imageResizer.cpp	2008-03-05 11:49:06 UTC (rev 3825)
@@ -22,7 +22,7 @@
 #include "ADM_image.h"
 #include "ADM_osSupport/ADM_cpuCap.h"
 
-#if (defined( ARCH_X86)  || defined(ARCH_X86_64))
+#ifdef ADM_CPU_X86
 extern "C" {
 #include "ADM_libraries/ADM_lavcodec/avcodec.h"
 }
@@ -60,7 +60,7 @@
 
 	int flags = SWS_SPLINE;
 
-#if (defined( ARCH_X86)  || defined(ARCH_X86_64))
+#ifdef ADM_CPU_X86
 	#define ADD(x, y) if (CpuCaps::has##x()) flags |= SWS_CPU_CAPS_##y;
 
 	ADD(MMX,MMX);
@@ -68,7 +68,7 @@
 	ADD(MMXEXT,MMX2);
 #endif
 
-#ifdef USE_ALTIVEC
+#ifdef ADM_CPU_ALTIVEC
     flags |= SWS_CPU_CAPS_ALTIVEC;
 #endif
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_imageUtils.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_imageUtils.cpp	2008-03-04 20:54:48 UTC (rev 3824)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_imageUtils.cpp	2008-03-05 11:49:06 UTC (rev 3825)
@@ -60,7 +60,7 @@
         
         return 1;
 }
-#if defined( ARCH_X86 ) || defined (ARCH_X86_64)
+#ifdef ADM_CPU_X86
 static uint8_t tinyAverageMMX(uint8_t *dst, uint8_t *src1, uint8_t *src2,uint32_t l)
 {
 int delta;
@@ -118,7 +118,7 @@
 
 uint8_t ADMImage::merge(ADMImage *src1,ADMImage *src2)
 {
-#if 1 && defined( ARCH_X86 ) || defined (ARCH_X86_64)
+#ifdef ADM_CPU_X86
         if(CpuCaps::hasMMX())
         {
                 tinyAverageMMX(YPLANE(this),YPLANE(src1),YPLANE(src2),(_width*_height*3)>>1);
@@ -149,7 +149,7 @@
         }
         return df;
 }
-#if defined( ARCH_X86 ) || defined (ARCH_X86_64)
+#ifdef ADM_CPU_X86
 static uint64_t noise64;
 static uint32_t computeDiffMMX(uint8_t  *s1,uint8_t *s2,uint32_t noise,uint32_t l)
 {
@@ -239,7 +239,7 @@
 uint32_t ADMImage::lumaDiff(ADMImage *src1,ADMImage *src2,uint32_t noise)
 {
 
-#if 1 && defined( ARCH_X86 ) || defined (ARCH_X86_64)
+#ifdef ADM_CPU_X86
 uint32_t r1,r2;
         if(CpuCaps::hasMMX())
         {
@@ -279,7 +279,7 @@
                 }
         return 1;
 }
-#if defined( ARCH_X86 ) || defined (ARCH_X86_64)
+#ifdef ADM_CPU_X86
 static uint8_t tinySubstractMMX(uint8_t *dst, uint8_t *src1, uint8_t *src2,uint32_t l)
 {
 int delta;
@@ -338,7 +338,7 @@
 uint8_t ADMImage::substract(ADMImage *src1,ADMImage *src2)
 {
 
-#if 1 && defined( ARCH_X86 ) || defined (ARCH_X86_64)
+#ifdef ADM_CPU_X86
 uint32_t r1,r2;
         if(CpuCaps::hasMMX())
         {

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_pp.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_pp.cpp	2008-03-04 20:54:48 UTC (rev 3824)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_pp.cpp	2008-03-05 11:49:06 UTC (rev 3825)
@@ -63,7 +63,7 @@
 		{
 		uint32_t ppCaps=0;
 		
-#if (defined( ARCH_X86)  || defined(ARCH_X86_64))
+#ifdef ADM_CPU_X86
 		
 	#define ADD(x,y) if( CpuCaps::has##x()) ppCaps|=PP_CPU_CAPS_##y;
 		
@@ -71,7 +71,7 @@
 		ADD(3DNOW,3DNOW);
 		ADD(MMXEXT,MMX2);
 #endif		
-#ifdef HAVE_ALTIVEC
+#ifdef ADM_CPU_ALTIVEC
 		ppCaps|=PP_CPU_CAPS_ALTIVEC;
 #endif	
 			pp->ppContext=pp_get_context(pp->w, pp->h, ppCaps

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/admmangle.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/admmangle.h	2008-03-04 20:54:48 UTC (rev 3824)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/admmangle.h	2008-03-05 11:49:06 UTC (rev 3825)
@@ -7,13 +7,13 @@
 // Use rip-relative addressing if compiling PIC code on x86-64.
 #if defined(__MINGW32__) || defined(__CYGWIN__) || defined(__DJGPP__) || \
     defined(__OS2__) || (defined (__OpenBSD__) && !defined(__ELF__))
-#    if defined(ARCH_X86_64) && defined(PIC)
+#    if defined(ADM_CPU_X86_64) && defined(PIC)
 #        define MANGLE(a) "_" #a"(%%rip)"
 #    else
 #        define MANGLE(a) "_" #a
 #    endif
 #else
-#    if defined(ARCH_X86_64) && defined(PIC)
+#    if defined(ADM_CPU_X86_64) && defined(PIC)
 #        define MANGLE(a) #a"(%%rip)"
 #    elif defined(__APPLE__)
 #        define MANGLE(a) "_" #a
@@ -26,7 +26,7 @@
 
 #define ADM_ALIGN16 ".p2align 4\n"
 /* Regiter renaming */
-#ifdef ARCH_X86_64
+#ifdef ADM_CPU_X86_64
 #define REG_a  "rax" 
 #define REGa    rax 
 #define REGb    rbx 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_cpuCap.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_cpuCap.cpp	2008-03-04 20:54:48 UTC (rev 3824)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_cpuCap.cpp	2008-03-05 11:49:06 UTC (rev 3825)
@@ -35,7 +35,7 @@
 }
 
 
-#if defined(ARCH_X86) || defined(ARCH_X86_64)
+#ifdef ADM_CPU_X86
 extern "C" 
 {
 #include "ADM_libraries/ADM_lavcodec/dsputil_cpu.h"
@@ -63,7 +63,7 @@
 	myCpuMask=0xffffffff;
 	prefs->get(FEATURE_CPU_CAPS,&myCpuMask);
 
-#if defined(ARCH_X86) || defined(ARCH_X86_64)
+#ifdef ADM_CPU_X86
 int rval = 0;
  int eax, ebx, ecx, edx;
  int max_std_level, max_ext_level, std_caps=0, ext_caps=0;
@@ -144,7 +144,7 @@
 }
 
 /************************************************************************/
-#if defined(ARCH_X86) || defined(ARCH_X86_64)
+#ifdef ADM_CPU_X86
 #include "ADM_libraries/ADM_libMpeg2Dec/mpeg2_cpu.h"
 #endif
 
@@ -152,7 +152,7 @@
 {
 int rval=0;
 
-#if defined(ARCH_X86) || defined(ARCH_X86_64)
+#ifdef ADM_CPU_X86
 #undef MATCH
 #define MATCH(x,y) if(CpuCaps::myCpuCaps & CpuCaps::myCpuMask & ADM_CPU_##x) rval|=MPEG2_ACCEL_X86_##x;
 	
@@ -164,7 +164,7 @@
 	return rval;
 }
 //******************************************************
-#if defined(ARCH_X86) || defined(ARCH_X86_64)
+#ifdef ADM_CPU_X86
 #include "ADM_lavcodec.h"
 #endif
 /**
@@ -175,7 +175,7 @@
 {
 int rval=0;
 
-#if defined(ARCH_X86) || defined(ARCH_X86_64)
+#ifdef ADM_CPU_X86
 #undef MATCH
 #define MATCH(x,y) if(CpuCaps::myCpuCaps &  CpuCaps::myCpuMask & ADM_CPU_##x) rval|=MM_##x;
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_cpuCap.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_cpuCap.h	2008-03-04 20:54:48 UTC (rev 3824)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_cpuCap.h	2008-03-05 11:49:06 UTC (rev 3825)
@@ -9,7 +9,7 @@
 // Copyright: See COPYING file that comes with this distribution
 //
 //
-#if defined(ARCH_X86_64) ||defined(ARCH_X86)
+#ifdef ADM_CPU_X86
 
 #define CHECK_Z(x) {if(CpuCaps::myCpuCaps & ADM_CPU_##x & CpuCaps::myCpuMask) return 1; else return 0;} 
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_memcpy.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_memcpy.cpp	2008-03-04 20:54:48 UTC (rev 3824)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_memcpy.cpp	2008-03-05 11:49:06 UTC (rev 3825)
@@ -110,7 +110,7 @@
 */
 
 
-#if defined(ARCH_X86) || defined(ARCH_X86_64)
+#ifdef ADM_CPU_X86
 
 
 /* for small memory blocks (<256 bytes) this version is faster */
@@ -379,7 +379,7 @@
 static void *linux_kernel_memcpy(void *to, const void *from, size_t len) {
   return linux_kernel_memcpy_impl(to,from,len);
 }
-#endif /* ARCH_X86 */
+#endif /* ADM_CPU_X86 */
 
 static struct {
   char *name;
@@ -392,22 +392,20 @@
 {
   { NULL, NULL, 0, 0 },
   { "libc memcpy()", memcpy, 0, 0 },
-#if defined( ARCH_X86)  || defined(ARCH_X86_64)
+#ifdef ADM_CPU_X86
   { "linux kernel memcpy()", linux_kernel_memcpy, 0, 0 },
-#if defined( ARCH_X86)  || defined(ARCH_X86_64)
   { "MMX optimized memcpy()", mmx_memcpy, 0, MM_MMX },
   { "MMXEXT optimized memcpy()", mmx2_memcpy, 0, MM_MMXEXT },
   { "SSE optimized memcpy()", sse_memcpy, 0, MM_MMXEXT|MM_SSE },
-#endif
-#endif /* ARCH_X86 */
-#if 0 && defined (ARCH_PPC) && !defined (HOST_OS_DARWIN)
+#endif /* ADM_CPU_X86 */
+#if 0 && defined (ADM_CPU_PPC) && !defined (__APPLE__)
   { "ppcasm_memcpy()", ppcasm_memcpy, 0, 0 },
   { "ppcasm_cacheable_memcpy()", ppcasm_cacheable_memcpy, 0, MM_ACCEL_PPC_CACHE32 },
-#endif /* ARCH_PPC && !HOST_OS_DARWIN */
+#endif /* ADM_CPU_PPC && !__APPLE__ */
   { NULL, NULL, 0, 0 }
 };
 
-#if defined( ARCH_X86)  || defined(ARCH_X86_64)
+#ifdef ADM_CPU_X86
 static unsigned long long int rdtsc(void)
 {
   unsigned long long int x;
@@ -459,14 +457,14 @@
   int               config_flags = 0;
 #undef memcpy
         myAdmMemcpy=memcpy;
-#if defined( ARCH_X86)  || defined(ARCH_X86_64)
+#ifdef ADM_CPU_X86
         if(CpuCaps::hasMMX())
                 myAdmMemcpy=mmx_memcpy;
 #endif
 #if 0
 	probe(memcpy,"libc");
 	probe(linux_kernel_memcpy,"kernel");
-#if defined( ARCH_X86)  || defined(ARCH_X86_64)
+#ifdef ADM_CPU_X86
 	if(CpuCaps::hasMMX()) probe(mmx_memcpy,"mmx");
 	if(CpuCaps::hasMMXEXT()) probe(mmx_memcpy,"mmxext");
 	if(CpuCaps::hasSSE()) probe(sse_memcpy,"sse");

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyEq2.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyEq2.cpp	2008-03-04 20:54:48 UTC (rev 3824)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyEq2.cpp	2008-03-05 11:49:06 UTC (rev 3825)
@@ -65,7 +65,7 @@
 			lutMeType *lutMe=apply_lut;
 			
 
-#if (defined( ARCH_X86)  || defined(ARCH_X86_64))
+#ifdef ADM_CPU_X86
 	        if(CpuCaps::hasMMX())
 	        {
 	        		lutMe=affine_1d_MMX;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_interlaced.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_interlaced.cpp	2008-03-04 20:54:48 UTC (rev 3824)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_interlaced.cpp	2008-03-05 11:49:06 UTC (rev 3825)
@@ -70,7 +70,7 @@
 		mm2 contains 4 bytes of n
 */
 
-#if (defined( ARCH_X86)  || defined(ARCH_X86_64)) && defined(ASM_ILACING)
+#if defined(ADM_CPU_X86) && defined(ASM_ILACING)
 
 static uint32_t      ADMVideo_interlaceCount_MMX( uint8_t *src ,uint32_t w, uint32_t h);
 static uint8_t *_l_p=NULL;
@@ -111,7 +111,7 @@
 
 uint32_t      ADMVideo_interlaceCount( uint8_t *src ,uint32_t w, uint32_t h)
 {
-#if (defined( ARCH_X86)  || defined(ARCH_X86_64)) && defined(ASM_ILACING)  
+#if defined(ADM_CPU_X86) && defined(ASM_ILACING)  
         if(CpuCaps::hasMMX())
                 return ADMVideo_interlaceCount_MMX(src,w,h);
         else
@@ -120,7 +120,7 @@
 
 }
 
-#if (defined( ARCH_X86)  || defined(ARCH_X86_64)) && defined(ASM_ILACING)  
+#if defined(ADM_CPU_X86) && defined(ASM_ILACING)  
 uint32_t      ADMVideo_interlaceCount_MMX( uint8_t *src ,uint32_t w, uint32_t h)
 {
 uint32_t m=0,y,x;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidMPdelogo.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidMPdelogo.cpp	2008-03-04 20:54:48 UTC (rev 3824)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidMPdelogo.cpp	2008-03-05 11:49:06 UTC (rev 3825)
@@ -23,7 +23,7 @@
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_video/ADM_vidCommonFilter.h"
 
-#if (defined( ARCH_X86)  || defined(ARCH_X86_64))
+#ifdef ADM_CPU_X86
 extern "C" {
 #include "ADM_libraries/ADM_lavcodec/avcodec.h"
 }

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp	2008-03-04 20:54:48 UTC (rev 3824)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp	2008-03-05 11:49:06 UTC (rev 3825)
@@ -185,7 +185,7 @@
   string[0]=0;
   
         cleanup();
-#if (defined( ARCH_X86)  || defined(ARCH_X86_64))
+#ifdef ADM_CPU_X86
 #define ADD(x,y) if( CpuCaps::has##x()) ppCaps|=PP_CPU_CAPS_##y;                
                 ADD(MMX,MMX);           
                 ADD(3DNOW,3DNOW);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidBlend.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidBlend.cpp	2008-03-04 20:54:48 UTC (rev 3824)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidBlend.cpp	2008-03-05 11:49:06 UTC (rev 3825)
@@ -39,7 +39,7 @@
 
 #include "admmangle.h"
 
-#ifdef ARCH_X86_64
+#ifdef ADM_CPU_X86_64
 static int64_t _l_w,_l_h;
 #else
  static int32_t _l_w,_l_h;
@@ -79,7 +79,7 @@
                  }
               }
 }
-#if defined( ARCH_X86)  || defined(ARCH_X86_64)
+#ifdef ADM_CPU_X86
 void ADMVideoFields::blend_MMX(uint8_t *p,uint8_t *c,
 																							uint8_t *n,
 																							uint8_t *e,

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDeintASM.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDeintASM.cpp	2008-03-04 20:54:48 UTC (rev 3824)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDeintASM.cpp	2008-03-05 11:49:06 UTC (rev 3825)
@@ -37,7 +37,7 @@
 
 #include"ADM_vidField.h"
 
-#if defined( ARCH_X86)  || defined(ARCH_X86_64)
+#ifdef ADM_CPU_X86
 //	#define DEBUG_DEINT 1
 //	#define MMX_TRACE 1
 	#include "ADM_video/mmx_macros.h"
@@ -94,7 +94,7 @@
                       }
            }
 }
-#if defined( ARCH_X86)  || defined(ARCH_X86_64)
+#ifdef ADM_CPU_X86
 void ADMVideoFields::hasMotion_MMX(uint8_t *p,uint8_t *c,
 									uint8_t *n,
 									uint8_t *e,

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidEq2.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidEq2.cpp	2008-03-04 20:54:48 UTC (rev 3824)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidEq2.cpp	2008-03-05 11:49:06 UTC (rev 3825)
@@ -167,7 +167,7 @@
   w=_info.width;
   h=_info.height;
 
-#if (defined( ARCH_X86)  || defined(ARCH_X86_64))
+#ifdef ADM_CPU_X86
   if(CpuCaps::hasMMX())
   {
         affine_1d_MMX(&(settings.param[0]),YPLANE(data),YPLANE(mysrc),w,h);
@@ -278,7 +278,7 @@
   par->lut_clean = 1;
 }
 
-#if (defined( ARCH_X86)  || defined(ARCH_X86_64))
+#ifdef ADM_CPU_X86
 
 void affine_1d_MMX (oneSetting *par, unsigned char *dst, unsigned char *src,
   unsigned int w, unsigned int h)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidEq2.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidEq2.h	2008-03-04 20:54:48 UTC (rev 3824)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidEq2.h	2008-03-05 11:49:06 UTC (rev 3825)
@@ -52,7 +52,7 @@
   unsigned int w, unsigned int h);
 void create_lut (oneSetting *par);
 
-#if (defined( ARCH_X86)  || defined(ARCH_X86_64))
+#ifdef ADM_CPU_X86
 void affine_1d_MMX (oneSetting *par, unsigned char *dst, unsigned char *src,
                 unsigned int w, unsigned int h);
 #endif

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFields.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFields.cpp	2008-03-04 20:54:48 UTC (rev 3824)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFields.cpp	2008-03-05 11:49:06 UTC (rev 3825)
@@ -118,7 +118,7 @@
            e2=_motionmask2+w; 	
   //___________________ C version of motion detection ________________________
        // other line
-#if (defined( ARCH_X86)  || defined(ARCH_X86_64)) && defined(ASM_DEINT)
+#if defined(ADM_CPU_X86) && defined(ASM_DEINT)
        if(CpuCaps::hasMMX())  
       	hasMotion_MMX(p,c,n,e,e2);
        else
@@ -200,7 +200,7 @@
 		n++;
 		c++;
 	}
-#if (defined( ARCH_X86)  || defined(ARCH_X86_64)) && defined(ASM_BLEND)
+#if defined(ADM_CPU_X86) && defined(ASM_BLEND)
        if(CpuCaps::hasMMX())               
               blend_MMX(p,c,n,e2,f);
         else

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFlux.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFlux.cpp	2008-03-04 20:54:48 UTC (rev 3824)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFlux.cpp	2008-03-05 11:49:06 UTC (rev 3825)
@@ -274,7 +274,7 @@
 	nextp += src_pitch;
 	destp += dst_pitch;
 
-	#if (defined( ARCH_X86)  || defined(ARCH_X86_64)) && defined(ASM_FLUX)
+	#if defined(ADM_CPU_X86) && defined(ASM_FLUX)
         if(CpuCaps::hasMMX())
         {
 		DoFilter_MMX(currp, prevp, nextp, src_pitch,
@@ -402,7 +402,7 @@
 	ADM_assert(ycnt == 0);
 
 }
-#if (defined( ARCH_X86)  || defined(ARCH_X86_64))
+#ifdef ADM_CPU_X86
 /*
 	__asm movq mm2, mm0 \
 	__asm movq mm3, mm1 \

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidHardIvtcRemoval.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidHardIvtcRemoval.cpp	2008-03-04 20:54:48 UTC (rev 3824)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidHardIvtcRemoval.cpp	2008-03-05 11:49:06 UTC (rev 3825)
@@ -221,7 +221,7 @@
                 }
         return 1;
 }
-#if defined (ARCH_X86 ) || defined (ARCH_X86_64 )
+#ifdef ADM_CPU_X86
 static uint8_t tinyRestoreMMX(uint8_t *dst, uint8_t *srcP, uint8_t *src,uint8_t *srcN,uint8_t *srcNN,uint32_t w, uint32_t h)
 {
 
@@ -291,7 +291,7 @@
 uint8_t *s1,*s2,*d1;
 int a1,a2,t1;
 
-#if defined (ARCH_X86 ) || defined (ARCH_X86_64 )
+#ifdef ADM_CPU_X86
         if(CpuCaps::hasMMX())
         {
               tinyRestoreMMX(YPLANE(tgt),YPLANE(srcP),YPLANE(src),YPLANE(srcN),YPLANE(srcNN),tgt->_width,tgt->_height);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLResize.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLResize.cpp	2008-03-04 20:54:48 UTC (rev 3824)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLResize.cpp	2008-03-05 11:49:06 UTC (rev 3825)
@@ -36,7 +36,7 @@
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_video/ADM_vidCommonFilter.h"
 
-#if (defined(ARCH_X86) || defined(ARCH_X86_64))
+#ifdef ADM_CPU_X86
 extern "C" {
 #include "ADM_libraries/ADM_lavcodec/avcodec.h"
 }
@@ -183,14 +183,13 @@
 						default:ADM_assert(0);
 
 					}
-#if (defined( ARCH_X86)  || defined(ARCH_X86_64))
-		
+#ifdef ADM_CPU_X86		
 		#define ADD(x,y) if( CpuCaps::has##x()) flags|=SWS_CPU_CAPS_##y;
 		ADD(MMX,MMX);		
 		ADD(3DNOW,3DNOW);
 		ADD(MMXEXT,MMX2);
 #endif	
-#ifdef USE_ALTIVEC
+#ifdef ADM_CPU_ALTIVEC
 		flags|=SWS_CPU_CAPS_ALTIVEC;
 #endif
 				    _context=sws_getContext(

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMSharpen.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMSharpen.cpp	2008-03-04 20:54:48 UTC (rev 3824)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMSharpen.cpp	2008-03-05 11:49:06 UTC (rev 3825)
@@ -303,7 +303,7 @@
   int val;
 
   // Vertical only for now      
-#if (defined( ARCH_X86)  || defined(ARCH_X86_64))
+#ifdef ADM_CPU_X86
   if(CpuCaps::hasMMX())
   {
   int off;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMosaic.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMosaic.cpp	2008-03-04 20:54:48 UTC (rev 3824)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMosaic.cpp	2008-03-05 11:49:06 UTC (rev 3825)
@@ -34,7 +34,7 @@
 #include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
 
 
-#if (defined( ARCH_X86)  || defined(ARCH_X86_64))
+#ifdef ADM_CPU_X86
 extern "C" {
 #include "ADM_libraries/ADM_lavcodec/avcodec.h"
 }
@@ -131,7 +131,7 @@
                 flags=SWS_BICUBIC;
 
 
-#if (defined( ARCH_X86)  || defined(ARCH_X86_64))
+#ifdef ADM_CPU_X86
                 
                 #define ADD(x,y) if( CpuCaps::has##x()) flags|=SWS_CPU_CAPS_##y;
                 ADD(MMX,MMX);           

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMsmooth.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMsmooth.cpp	2008-03-04 20:54:48 UTC (rev 3824)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMsmooth.cpp	2008-03-05 11:49:06 UTC (rev 3825)
@@ -32,9 +32,12 @@
 #include <stdio.h>
 #include <stdlib.h>
 #include <string.h>
+
+#if defined(ADM_CPU_ALTIVEC) && !defined(__APPLE__)
+#include <altivec.h>
+#endif
+
 #include "ADM_assert.h"
-
-#include "config.h"
 #include "fourcc.h"
 #include "avio.hxx"
 #include "avi_vars.h"
@@ -42,7 +45,7 @@
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
-#include"ADM_video/ADM_cache.h"
+#include "ADM_video/ADM_cache.h"
 
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME MODULE_FILTER
@@ -53,9 +56,6 @@
 
 #include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
 
-#ifdef HAVE_ALTIVEC_H
-#include "altivec.h"
-#endif
 #if 0
 #undef aprintf
 #define aprintf printf
@@ -84,10 +84,10 @@
 extern  void 	DrawStringYUY2(uint8_t *dst, int x, int y, const char *s); 
 
 static void Blur_C(uint8_t *in, uint8_t *out, uint32_t w, uint32_t h) ;
-#ifdef HAVE_ALTIVEC
+#ifdef ADM_CPU_ALTIVEC
 void Blur_Altivec(uint8_t *in, uint8_t *out, uint32_t w, uint32_t h);
 #endif
-#if (defined( ARCH_X86)  || defined(ARCH_X86_64))
+#ifdef ADM_CPU_X86
 void Blur_MMX(uint8_t *in, uint8_t *out, uint32_t w, uint32_t h);
 #endif
 class Msmooth : public AVDMGenericVideoStream
@@ -392,7 +392,7 @@
 }
 
 
-#ifdef HAVE_ALTIVEC
+#ifdef ADM_CPU_ALTIVEC
 #define vecbyte vector unsigned char
 #define vect16 vector unsigned short
 
@@ -485,7 +485,7 @@
 }
 #endif
 
-#if (defined( ARCH_X86)  || defined(ARCH_X86_64))
+#ifdef ADM_CPU_X86
 //______________________
 void Blur_MMX(uint8_t *in, uint8_t *out, uint32_t w, uint32_t h)
 {
@@ -603,7 +603,7 @@
 	int y1, y2, y3, y4;
 
 	/* Blur the source image prior to detail detection. */
-#if (defined( ARCH_X86)  || defined(ARCH_X86_64))
+#ifdef ADM_CPU_X86
 		//printf("MMX\n");
 	if(CpuCaps::hasMMX())
 	{
@@ -612,7 +612,7 @@
 	}
 	else
 	#endif
-	#ifdef HAVE_ALTIVEC
+	#ifdef ADM_CPU_ALTIVEC
 	#define ISALIGNED(x) (!( ((long long)x)&15 ))
 		if( ISALIGNED(srcp) && ISALIGNED(blurp) && ISALIGNED(workp) && ISALIGNED(maskp) && !(src_pitch&15))
 		{

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidResampleFPS.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidResampleFPS.cpp	2008-03-04 20:54:48 UTC (rev 3824)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidResampleFPS.cpp	2008-03-05 11:49:06 UTC (rev 3825)
@@ -173,7 +173,7 @@
                 CSET(use_linear);
                 return 1;
 }
-#if (defined( ARCH_X86)  || defined(ARCH_X86_64))
+#ifdef ADM_CPU_X86
 static uint64_t low,high;
 static void blendMMX(uint8_t *src, uint8_t *src2, uint8_t *dst, uint8_t alpha, uint8_t beta,uint32_t count)
 {
@@ -321,7 +321,7 @@
         
       count = page;
 
-#if (defined( ARCH_X86)  || defined(ARCH_X86_64))
+#ifdef ADM_CPU_X86
         if(CpuCaps::hasMMX())
                 blendMMX(in1,in2,out,lowweight,highweight,(count*3)>>1);
         else

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVlad.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVlad.cpp	2008-03-04 20:54:48 UTC (rev 3824)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVlad.cpp	2008-03-05 11:49:06 UTC (rev 3825)
@@ -41,13 +41,13 @@
 
 #include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
 
-#if  defined(ARCH_X86_64)
+#ifdef ADM_CPU_X86_64
 #define COUNTER long int
 #else
 #define COUNTER int
 #endif
 
-#if defined( ARCH_X86)  || defined(ARCH_X86_64)
+#ifdef ADM_CPU_X86
 static void ProcessCPlane_mmxe(unsigned char *source,
 				   unsigned char *prev,
 				   unsigned char* dest,
@@ -147,7 +147,7 @@
 
 	ProcessYPlane = ProcessYPlane_C;
 	ProcessCPlane = ProcessCPlane_C;
-#if defined( ARCH_X86)  || defined(ARCH_X86_64)
+#ifdef ADM_CPU_X86
 #if 0
 // Check
 	if(CpuCaps::hasMMXEXT() && (_info.width&7) == 0)
@@ -271,7 +271,7 @@
 	} while(++i < 0);
 }
 
-#if defined( ARCH_X86)  || defined(ARCH_X86_64)
+#ifdef ADM_CPU_X86
 void ProcessYPlane_mmxe( unsigned char *source,
 				    unsigned char *prev,
 				    unsigned char* dest,

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVobSubRender.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVobSubRender.cpp	2008-03-04 20:54:48 UTC (rev 3824)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVobSubRender.cpp	2008-03-05 11:49:06 UTC (rev 3825)
@@ -65,7 +65,7 @@
 #include "ADM_vobsubinfo.h"
 #include "ADM_vidVobSub.h"
 
-#if (defined( ARCH_X86)  || defined(ARCH_X86_64))
+#ifdef ADM_CPU_X86
 extern "C" {
 #include "ADM_libraries/ADM_lavcodec/avcodec.h"
 }

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidYadif.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidYadif.cpp	2008-03-04 20:54:48 UTC (rev 3824)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidYadif.cpp	2008-03-05 11:49:06 UTC (rev 3825)
@@ -54,7 +54,7 @@
 #define MAX3(a,b,c) MAX(MAX(a,b),c)
 
 //===========================================================================//
-#if (defined( ARCH_X86)  || defined(ARCH_X86_64))
+#ifdef ADM_CPU_X86
 extern "C"
 {
 void filter_line_mmx2(int mode, uint8_t *dst, const uint8_t *prev, const uint8_t *cur, const uint8_t *next, int w, int refs, int parity);
@@ -401,7 +401,7 @@
 void (*filter_line)(int mode, uint8_t *dst, const uint8_t *prev, const uint8_t *cur, const uint8_t *next, int w, int refs, int parity);
 	int y;
 	filter_line = filter_line_c;
-#if (defined( ARCH_X86)  || defined(ARCH_X86_64))
+#ifdef ADM_CPU_X86
 	if (CpuCaps::hasMMXEXT()) 
 		filter_line = filter_line_mmx2;
 #endif
@@ -421,7 +421,7 @@
         }
         memcpy(dst + (h-1)*dst_stride, cur0 + (h-1)*refs, w);
 
-#if (defined( ARCH_X86)  || defined(ARCH_X86_64))
+#ifdef ADM_CPU_X86
 	if (CpuCaps::hasMMXEXT()) 
 		asm volatile("emms");
 #endif

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidYadif_asm.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidYadif_asm.c	2008-03-04 20:54:48 UTC (rev 3824)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidYadif_asm.c	2008-03-05 11:49:06 UTC (rev 3825)
@@ -9,7 +9,7 @@
 #include "default.h"
 #include "admmangle.h"
 
-#if (defined( ARCH_X86)  || defined(ARCH_X86_64))
+#ifdef ADM_CPU_X86
 
 
 #define LOAD4(mem,dst) \

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADMmpdetc.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADMmpdetc.cpp	2008-03-04 20:54:48 UTC (rev 3824)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADMmpdetc.cpp	2008-03-05 11:49:06 UTC (rev 3825)
@@ -57,7 +57,7 @@
 						int dstStride, int srcStride);
 unsigned int 	hash_pic(unsigned char *img, int w, int h, int stride);
 static void 	block_diffs_C(struct metrics *m, unsigned char *old, unsigned char *nw, int os, int ns);
-#if defined( ARCH_X86)  || defined(ARCH_X86_64)
+#ifdef ADM_CPU_X86
 void block_diffs_MMX(struct metrics *m, unsigned char *old, unsigned char *ew, int os, int ns);
 #endif
 static void 	diff_planes(struct metrics *m, unsigned char *old, unsigned char *nw, int w, int h, int os, int ns);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/main.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/main.cpp	2008-03-04 20:54:48 UTC (rev 3824)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/main.cpp	2008-03-05 11:49:06 UTC (rev 3825)
@@ -157,11 +157,11 @@
 	printf("Linux");
 #endif
 
-#if defined(ARCH_X86_32)
+#if defined(ADM_CPU_X86_32)
 	printf(" (x86)");
-#elif defined(ARCH_X86_64)
+#elif defined(ADM_CPU_X86_64)
 	printf(" (x86-64)");
-#elif defined(ARCH_POWERPC)
+#elif defined(ADM_CPU_PPC)
 	printf(" (PowerPC)");
 #endif
 

Copied: branches/avidemux_2.5_branch_gruntster/cmake/admLibavcodec.cmake (from rev 3824, branches/avidemux_2.5_branch_gruntster/cmake/admSetLavcodecFlags.cmake)
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admSetLavcodecFlags.cmake	2008-03-04 20:54:48 UTC (rev 3824)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admLibavcodec.cmake	2008-03-05 11:49:06 UTC (rev 3825)
@@ -0,0 +1,84 @@
+# this is a temporary hack. Libavcodec should have it's own config file.
+
+MACRO (SET_LAVC_CONFIG_FLAGS)
+	SET(CONFIG_ENCODERS 1)
+	SET(CONFIG_DVVIDEO_ENCODER 1)
+
+	SET(CONFIG_DECODERS 1)
+	SET(CONFIG_DVVIDEO_DECODER 1)
+	SET(CONFIG_H263_DECODER 1)
+	SET(CONFIG_MPEG4_DECODER 1)
+	SET(CONFIG_MPEGAUDIO_HP 1)
+	SET(CONFIG_SNOW_DECODER 1)
+	SET(CONFIG_VC1_DECODER 1)
+	SET(CONFIG_WMV2_DECODER 1)
+	SET(CONFIG_WMV3_DECODER 1)
+	SET(CONFIG_ZLIB 1)
+
+	SET(CONFIG_MUXERS 1)
+	SET(CONFIG_MOV_MUXER 1)
+	SET(CONFIG_MP4_MUXER 1)
+	SET(CONFIG_PSP_MUXER 1)
+	SET(CONFIG_TG2_MUXER 1)
+	SET(CONFIG_TGP_MUXER 1)
+
+	SET(ENABLE_THREADS 1)
+	SET(HAVE_LRINTF 1)
+	SET(HAVE_THREADS 1)
+	SET(RUNTIME_CPUDETECT 1)
+
+	IF (ADM_CPU_X86)
+		SET(ENABLE_MMX 1)
+		SET(HAVE_MMX 1)
+		SET(HAVE_FAST_UNALIGNED 1)
+
+		IF (ADM_CPU_X86_64)
+			SET(HAVE_FAST_64BIT 1)
+		ENDIF (ADM_CPU_X86_64)
+	ELSE (ADM_CPU_X86)
+		SET(ENABLE_MMX 0)
+	ENDIF (ADM_CPU_X86)
+
+	IF (APPLE)
+		SET(CONFIG_DARWIN 1)
+	ENDIF (APPLE)
+
+	########################################
+	# Check GCC support for SSSE3
+	########################################
+	IF (ADM_CPU_X86)
+		ADM_COMPILE(cpu_ssse3_check.cpp "" "" "" SSSE3_SUPPORTED outputSsse3Test)
+
+		IF (SSSE3_SUPPORTED)
+			SET(HAVE_SSSE3 1)
+
+			MESSAGE(STATUS "Check if GCC supports SSSE3 - Yes")
+		ELSE (SSSE3_SUPPORTED)
+			MESSAGE(STATUS "Check if GCC supports SSSE3 - No")
+
+			IF (VERBOSE)
+				MESSAGE("Error Message: ${outputSsse3Test}")
+			ENDIF (VERBOSE)	
+		ENDIF (SSSE3_SUPPORTED)
+	ENDIF (ADM_CPU_X86)
+
+	MESSAGE("")
+ENDMACRO (SET_LAVC_CONFIG_FLAGS)
+
+MACRO (GET_LAVC_CFLAGS varToSet)
+	IF (ADM_CPU_X86)
+		SET(${varToSet} "-DARCH_X86 -DARCH_X86_32")
+	ELSEIF (ADM_CPU_X86_64)
+		SET(${varToSet} "-DARCH_X86 -DARCH_X86_64")
+	ELSEIF (ADM_CPU_PPC)
+		SET(${varToSet} "-DARCH_POWERPC")
+
+		IF (ADM_CPU_ALTIVEC)
+			SET(${varToSet} "${${varToSet}} -DHAVE_ALTIVEC")
+
+			IF (NOT APPLE)
+				SET(${varToSet} "${${varToSet}} -DHAVE_ALTIVEC_H")
+			ENDIF (NOT APPLE)
+		ENDIF (ADM_CPU_ALTIVEC)
+	ENDIF (ADM_CPU_X86)
+ENDMACRO (GET_LAVC_CFLAGS)
\ No newline at end of file

Deleted: branches/avidemux_2.5_branch_gruntster/cmake/admSetLavcodecFlags.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admSetLavcodecFlags.cmake	2008-03-04 20:54:48 UTC (rev 3824)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admSetLavcodecFlags.cmake	2008-03-05 11:49:06 UTC (rev 3825)
@@ -1,62 +0,0 @@
-SET(CONFIG_ENCODERS 1)
-SET(CONFIG_DVVIDEO_ENCODER 1)
-
-SET(CONFIG_DECODERS 1)
-SET(CONFIG_DVVIDEO_DECODER 1)
-SET(CONFIG_H263_DECODER 1)
-SET(CONFIG_MPEG4_DECODER 1)
-SET(CONFIG_MPEGAUDIO_HP 1)
-SET(CONFIG_SNOW_DECODER 1)
-SET(CONFIG_VC1_DECODER 1)
-SET(CONFIG_WMV2_DECODER 1)
-SET(CONFIG_WMV3_DECODER 1)
-SET(CONFIG_ZLIB 1)
-
-SET(CONFIG_MUXERS 1)
-SET(CONFIG_MOV_MUXER 1)
-SET(CONFIG_MP4_MUXER 1)
-SET(CONFIG_PSP_MUXER 1)
-SET(CONFIG_TG2_MUXER 1)
-SET(CONFIG_TGP_MUXER 1)
-
-SET(ENABLE_THREADS 1)
-SET(HAVE_LRINTF 1)
-SET(HAVE_THREADS 1)
-SET(RUNTIME_CPUDETECT 1)
-
-IF (ADM_CPU_X86)
-	SET(ENABLE_MMX 1)
-	SET(HAVE_MMX 1)
-	SET(HAVE_FAST_UNALIGNED 1)
-
-	IF (ADM_CPU_X86_64)
-		SET(HAVE_FAST_64BIT 1)
-	ENDIF (ADM_CPU_X86_64)
-ELSE (ADM_CPU_X86)
-	SET(ENABLE_MMX 0)
-ENDIF (ADM_CPU_X86)
-
-IF (APPLE)
-	SET(CONFIG_DARWIN 1)
-ENDIF (APPLE)
-
-########################################
-# Check GCC support for SSSE3
-########################################
-IF (ADM_CPU_X86)
-	ADM_COMPILE(cpu_ssse3_check.cpp "" "" "" SSSE3_SUPPORTED outputSsse3Test)
-
-	IF (SSSE3_SUPPORTED)
-		SET(HAVE_SSSE3 1)
-
-		MESSAGE(STATUS "Check if GCC supports SSSE3 - Yes")
-	ELSE (SSSE3_SUPPORTED)
-		MESSAGE(STATUS "Check if GCC supports SSSE3 - No")
-
-		IF (VERBOSE)
-			MESSAGE("Error Message: ${outputSsse3Test}")
-		ENDIF (VERBOSE)	
-	ENDIF (SSSE3_SUPPORTED)
-ENDIF (ADM_CPU_X86)
-
-MESSAGE("")
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/cmake/config.h.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/config.h.cmake	2008-03-04 20:54:48 UTC (rev 3824)
+++ branches/avidemux_2.5_branch_gruntster/cmake/config.h.cmake	2008-03-05 11:49:06 UTC (rev 3825)
@@ -14,7 +14,7 @@
 /* Jog Shuttle */
 #cmakedefine USE_JOG
 
-/* Big endian CPU - SPARC or PowerPC */
+/* Big endian CPU */
 #cmakedefine ADM_BIG_ENDIAN
 
 #define PACKAGE   "avidemux"
@@ -33,21 +33,6 @@
 /* AMR_NB */
 #cmakedefine AMR_NB
 
-/* Enable PowerPC optim */
-#cmakedefine ARCH_POWERPC
-
-/* AltiVec for libmpeg2 */
-#cmakedefine ARCH_PPC
-
-/* post proc */
-#cmakedefine ARCH_X86
-
-/* X86_32 assembly */
-#cmakedefine ARCH_X86_32
-
-/* X86_64 AMD64 assembly */
-#cmakedefine ARCH_X86_64
-
 /* FFMPEG */
 #cmakedefine CONFIG_ENCODERS
 #cmakedefine CONFIG_DVVIDEO_ENCODER
@@ -82,12 +67,6 @@
 #cmakedefine HAVE_SSSE3
 #cmakedefine CONFIG_DARWIN
 
-/* AltiVec for mpeg2enc */
-#cmakedefine HAVE_ALTIVEC
-
-/* Enable AltiVec by default */
-#cmakedefine HAVE_ALTIVEC_H
-
 /* FontConfig detected */
 #cmakedefine HAVE_FONTCONFIG
 
@@ -134,9 +113,6 @@
 #cmakedefine USE_AFTEN_07	// 0.07
 #cmakedefine USE_AFTEN_08	// 0.0.8
 
-/* AltiVec for mpeg2enc */
-#cmakedefine USE_ALTIVEC
-
 /* Tell avidemux to use libamrnb */
 #cmakedefine USE_AMR_NB
 
@@ -216,7 +192,7 @@
 /* Version number of package */
 #define VERSION "${VERSION}"
 
-/* Big endian CPU - SPARC or PowerPC */
+/* Big endian CPU */
 #cmakedefine WORDS_BIGENDIAN
 
 /* use Nvwa memory leak detector */



From gruntster at mail.berlios.de  Wed Mar  5 15:33:00 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Wed, 5 Mar 2008 15:33:00 +0100
Subject: [Avidemux-svn-commit] r3826 - in
	branches/avidemux_2.5_branch_gruntster: .
	avidemux/ADM_inputs/ADM_nuv avidemux/ADM_libraries/ADM_lavcodec
	avidemux/ADM_libraries/ADM_lavformat
	avidemux/ADM_libraries/ADM_lavutil avidemux/ADM_libraries/ADM_libMad
	avidemux/ADM_libraries/ADM_libMpeg2Dec
	avidemux/ADM_libraries/ADM_liba52
	avidemux/ADM_libraries/ADM_libpostproc
	avidemux/ADM_libraries/ADM_libswscale
	avidemux/ADM_libraries/ADM_mplex avidemux/ADM_osSupport
	avidemux/ADM_userInterfaces/ADM_commonUI cmake
Message-ID: <200803051433.m25EX0FU002239@sheep.berlios.de>

Author: gruntster
Date: 2008-03-05 15:32:46 +0100 (Wed, 05 Mar 2008)
New Revision: 3826

Added:
   branches/avidemux_2.5_branch_gruntster/cmake/admLibFfmpeg.cmake
Removed:
   branches/avidemux_2.5_branch_gruntster/cmake/admLibavcodec.cmake
Modified:
   branches/avidemux_2.5_branch_gruntster/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_nuv/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavcodec/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavcodec/ffconf.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavcodec/ffconf.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavformat/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavutil/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavutil/internal.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libMad/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libMpeg2Dec/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_liba52/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libpostproc/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libswscale/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_cpuCap.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_cpuCap.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp
   branches/avidemux_2.5_branch_gruntster/cmake/admDetermineSystem.cmake
   branches/avidemux_2.5_branch_gruntster/cmake/config.h.cmake
Log:
[CMake] final stage of localising defines

Modified: branches/avidemux_2.5_branch_gruntster/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/CMakeLists.txt	2008-03-05 11:49:06 UTC (rev 3825)
+++ branches/avidemux_2.5_branch_gruntster/CMakeLists.txt	2008-03-05 14:32:46 UTC (rev 3826)
@@ -54,22 +54,19 @@
 ########################################
 SET(VERSION 2.5)
 
+# Define internal flags for GTK+ and Qt4 builds.  These are turned off
+# if a showstopper is found.  CLI is automatically assumed as possible
+# since it uses the minimum set of required libraries and CMake will 
+# fail if these aren't met.
+SET(ADM_UI_GTK 1)
+SET(ADM_UI_QT4 1)
+
 SET(HAVE_AUDIO 1)
 SET(USE_MP3 1)
 SET(USE_AC3 1)
 SET(USE_FFMPEG 1)
 SET(USE_MJPEG 1)
 
-IF (CMAKE_WORDS_BIGENDIAN)
-	SET(ADM_BIG_ENDIAN 1)
-# needs to be made library specific
-	SET(WORDS_BIGENDIAN 1)
-ENDIF (CMAKE_WORDS_BIGENDIAN)
-
-# Libavcodec
-INCLUDE(admLibavcodec)
-SET_LAVC_CONFIG_FLAGS()
-
 IF (NOT CMAKE_BUILD_TYPE)
 	SET(CMAKE_BUILD_TYPE "Release")
 ELSEIF (CMAKE_BUILD_TYPE STREQUAL "Debug")
@@ -106,13 +103,6 @@
 ########################################
 # Check for libraries
 ########################################
-# Define internal flags for GTK+ and Qt4 builds.  These are turned off
-# if a showstopper is found.  CLI is automatically assumed as possible
-# since it uses the minimum set of required libraries and CMake will 
-# fail if these aren't met.
-SET(ADM_UI_GTK 1)
-SET(ADM_UI_QT4 1)
-
 SET(MSG_DISABLE_OPTION "Disabled per request")
 
 INCLUDE(admCheckRequiredLibs)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_nuv/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_nuv/CMakeLists.txt	2008-03-05 11:49:06 UTC (rev 3825)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_nuv/CMakeLists.txt	2008-03-05 14:32:46 UTC (rev 3826)
@@ -1,4 +1,8 @@
 SET(ADM_nuv_SRCS 
 	ADM_nuvAudio.cpp  ADM_nuv.cpp  minilzo.c  RTjpeg.c  RTjpegN.cpp  RToldformat.cpp)
 
-ADD_ADM_LIB_ALL_TARGETS(ADM_nuv ${ADM_nuv_SRCS})
\ No newline at end of file
+ADD_ADM_LIB_ALL_TARGETS(ADM_nuv ${ADM_nuv_SRCS})
+
+IF (ADM_BIG_ENDIAN)
+	ADD_CFLAGS_ALL_TARGETS(ADM_nuv "-DWORDS_BIGENDIAN")
+ENDIF (ADM_BIG_ENDIAN)
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavcodec/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavcodec/CMakeLists.txt	2008-03-05 11:49:06 UTC (rev 3825)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavcodec/CMakeLists.txt	2008-03-05 14:32:46 UTC (rev 3826)
@@ -1,63 +1,63 @@
-SET(ADM_LIB ADM_lavcodec)
-
-SET(${ADM_LIB}_SRCS 
-	adpcm.c 	allcodecs.c 	cyuv.c 	dsputil.c 	dv.c 
-	error_resilience.c 		fft.c 	h263.c 	h263dec.c 	huffyuv.c 	imgconvert.c 
-	jfdctfst.c 	jfdctint.c 	jrevdct.c 	mace.c 	mdct.c 	 	mjpeg.c 
-	motion_est.c 	mpeg12.c 	mpegaudio.c 	mpegaudiodec.c 	mpegvideo.c 	msmpeg4.c 	 
-	pcm.c 	ratecontrol.c 	raw.c 	resample.c 	rv10.c 	simple_idct.c 	svq1.c 
-	utils.c 	wmadec.c 	indeo3.c 	vp3.c 	vp3dsp.c 	h264.c 	ffv1.c 	ra144.c 	ra288.c 
-	golomb.c 	4xm.c 	cabac.c 	asv1.c vcr1.c cljr.c 	faandct.c 	 	parser.c 
-	roqvideo.c 	xan.c 	rpza.c 	msrle.c 	msvideo1.c 	cinepak.c 	vqavideo.c 
-	idcinvideo.c 	smc.c 	flicvideo.c 	interplayvideo.c 	dpcm.c 	8bps.c vmdav.c 
-	truemotion1.c flac.c g726.c 	qtrle.c lcl.c 	snow.c  
-	rangecoder.c bitstream.c h264idct.c h261.c amr.c tscc.c 
-	resample2.c pthread.c qdm2.c bitstream_filter.c eval.c 
-	vc1.c vc1dsp.c vp56.c  vp6.c vp5.c indeo2.c smacker.c  opt.c
-	fraps.c dnxhddata.h  dnxhddec.c
-	mpeg12data.c  mpegaudiodata.c  msmpeg4data.c   vc1data.c   vp56data.c mjpegbdec.c
-	h263_parser.c
-	h264_parser.c
-	mpeg4video_parser.c
-	mpegvideo_enc.c
-	mpeg12enc.c mpegaudioenc.c
-	ac3enc.c ac3.c ac3tab.c
-	mjpegenc.c mjpegdec.c
-	wma.c
-	dvbsub_parser.c
-	dvbsubdec.c
-	dvbsub.c xiph.c
-	sp5xdec.c nellymoserdec.c)
-
-IF(ADM_CPU_X86)
-	SET(${ADM_LIB}_SRCS  ${${ADM_LIB}_SRCS}
-		i386/cputest.c
-		i386/mpegvideo_mmx.c     i386/vp3dsp_mmx.c 
-		i386/dsputil_mmx.c   
-		i386/fdct_mmx.c   i386/motion_est_mmx.c  i386/simple_idct_mmx.c 
-		i386/fft_sse.c i386/vp3dsp_sse2.c  
-		i386/idct_mmx_xvid.c i386/fft_3dn2.c 
-		i386/snowdsp_mmx.c i386/fft_3dn.c)
-ENDIF(ADM_CPU_X86)
-
-IF (ADM_CPU_ALTIVEC)
-	SET(${ADM_LIB}_SRCS  ${${ADM_LIB}_SRCS}
-		ppc/dsputil_altivec.c  ppc/dsputil_ppc.c  ppc/fdct_altivec.c  ppc/fft_altivec.c  ppc/float_altivec.c  ppc/gmc_altivec.c
-		ppc/h264_altivec.c  ppc/idct_altivec.c  ppc/int_altivec.c  ppc/mpegvideo_altivec.c  ppc/mpegvideo_ppc.c
-		ppc/snow_altivec.c  ppc/vc1dsp_altivec.c)
-ENDIF (ADM_CPU_ALTIVEC)
-
-ADD_ADM_LIB_ALL_TARGETS(${ADM_LIB} ${${ADM_LIB}_SRCS})
-ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "-I../ADM_lavutil -DHAVE_AV_CONFIG_H -Drestrict=__restrict__ -fomit-frame-pointer -include ffconf.h")
-
-IF (ADM_DEBUG)
-	ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "-O2")
-ENDIF (ADM_DEBUG)
-
-IF (USE_AMR_NB)
-	ADD_SOURCE_CFLAGS(amr.c -I${AMRNB_INCLUDE_DIR})
-ENDIF (USE_AMR_NB)
-
-INCLUDE(admLibavcodec)
-GET_LAVC_CFLAGS(LAVC_CFLAGS)
-ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "${LAVC_CFLAGS}")
\ No newline at end of file
+SET(ADM_LIB ADM_lavcodec)
+
+SET(${ADM_LIB}_SRCS 
+	adpcm.c 	allcodecs.c 	cyuv.c 	dsputil.c 	dv.c 
+	error_resilience.c 		fft.c 	h263.c 	h263dec.c 	huffyuv.c 	imgconvert.c 
+	jfdctfst.c 	jfdctint.c 	jrevdct.c 	mace.c 	mdct.c 	 	mjpeg.c 
+	motion_est.c 	mpeg12.c 	mpegaudio.c 	mpegaudiodec.c 	mpegvideo.c 	msmpeg4.c 	 
+	pcm.c 	ratecontrol.c 	raw.c 	resample.c 	rv10.c 	simple_idct.c 	svq1.c 
+	utils.c 	wmadec.c 	indeo3.c 	vp3.c 	vp3dsp.c 	h264.c 	ffv1.c 	ra144.c 	ra288.c 
+	golomb.c 	4xm.c 	cabac.c 	asv1.c vcr1.c cljr.c 	faandct.c 	 	parser.c 
+	roqvideo.c 	xan.c 	rpza.c 	msrle.c 	msvideo1.c 	cinepak.c 	vqavideo.c 
+	idcinvideo.c 	smc.c 	flicvideo.c 	interplayvideo.c 	dpcm.c 	8bps.c vmdav.c 
+	truemotion1.c flac.c g726.c 	qtrle.c lcl.c 	snow.c  
+	rangecoder.c bitstream.c h264idct.c h261.c amr.c tscc.c 
+	resample2.c pthread.c qdm2.c bitstream_filter.c eval.c 
+	vc1.c vc1dsp.c vp56.c  vp6.c vp5.c indeo2.c smacker.c  opt.c
+	fraps.c dnxhddata.h  dnxhddec.c
+	mpeg12data.c  mpegaudiodata.c  msmpeg4data.c   vc1data.c   vp56data.c mjpegbdec.c
+	h263_parser.c
+	h264_parser.c
+	mpeg4video_parser.c
+	mpegvideo_enc.c
+	mpeg12enc.c mpegaudioenc.c
+	ac3enc.c ac3.c ac3tab.c
+	mjpegenc.c mjpegdec.c
+	wma.c
+	dvbsub_parser.c
+	dvbsubdec.c
+	dvbsub.c xiph.c
+	sp5xdec.c nellymoserdec.c)
+
+IF(ADM_CPU_X86)
+	SET(${ADM_LIB}_SRCS  ${${ADM_LIB}_SRCS}
+		i386/cputest.c
+		i386/mpegvideo_mmx.c     i386/vp3dsp_mmx.c 
+		i386/dsputil_mmx.c   
+		i386/fdct_mmx.c   i386/motion_est_mmx.c  i386/simple_idct_mmx.c 
+		i386/fft_sse.c i386/vp3dsp_sse2.c  
+		i386/idct_mmx_xvid.c i386/fft_3dn2.c 
+		i386/snowdsp_mmx.c i386/fft_3dn.c)
+ENDIF(ADM_CPU_X86)
+
+IF (ADM_CPU_ALTIVEC)
+	SET(${ADM_LIB}_SRCS  ${${ADM_LIB}_SRCS}
+		ppc/dsputil_altivec.c  ppc/dsputil_ppc.c  ppc/fdct_altivec.c  ppc/fft_altivec.c  ppc/float_altivec.c  ppc/gmc_altivec.c
+		ppc/h264_altivec.c  ppc/idct_altivec.c  ppc/int_altivec.c  ppc/mpegvideo_altivec.c  ppc/mpegvideo_ppc.c
+		ppc/snow_altivec.c  ppc/vc1dsp_altivec.c)
+ENDIF (ADM_CPU_ALTIVEC)
+
+ADD_ADM_LIB_ALL_TARGETS(${ADM_LIB} ${${ADM_LIB}_SRCS})
+ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "-I../ADM_lavutil -DHAVE_AV_CONFIG_H -Drestrict=__restrict__ -fomit-frame-pointer -include ffconf.h")
+
+IF (ADM_DEBUG)
+	ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "-O2")
+ENDIF (ADM_DEBUG)
+
+IF (USE_AMR_NB)
+	ADD_SOURCE_CFLAGS(amr.c -I${AMRNB_INCLUDE_DIR})
+ENDIF (USE_AMR_NB)
+
+INCLUDE(admLibFfmpeg)
+GET_FFMPEG_CFLAGS(FFMPEG_CFLAGS)
+ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "${FFMPEG_CFLAGS}")
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavcodec/ffconf.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavcodec/ffconf.c	2008-03-05 11:49:06 UTC (rev 3825)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavcodec/ffconf.c	2008-03-05 14:32:46 UTC (rev 3826)
@@ -1,348 +1,396 @@
-/*
- * Glue to lavcodec configure
- * MEANX
- * */
-#include <stdlib.h>
-#include <stdio.h>
-int main(void)
-{
-#define DECLARE_DECODER(a,b); printf("#define ENABLE_"#a"_DECODER 1\n"); 
-  
-    DECLARE_DECODER(NELLYMOSER,nellymoser);
-    DECLARE_DECODER(ADPCM_IMA_AMV, amv);
-    DECLARE_DECODER(CINEPAK, cinepak);
-    DECLARE_DECODER(DNXHD, dnxhd);
-    DECLARE_DECODER(FOURXM, fourxm);
-    DECLARE_DECODER(FRAPS, fraps);
-	DECLARE_DECODER(H263, h263);
-    DECLARE_DECODER(H264, h264);
-    DECLARE_DECODER(INDEO2, indeo2);
-    DECLARE_DECODER(INDEO3, indeo3);
-    DECLARE_DECODER(INTERPLAY_VIDEO, interplay_video);
-    DECLARE_DECODER(MPEGVIDEO, mpegvideo);
-    DECLARE_DECODER(MSVIDEO1, msvideo1);
-    DECLARE_DECODER(VC1, vc1);
-    DECLARE_DECODER(VCR1, vcr1);
-    DECLARE_DECODER(VP5, vp5);
-    DECLARE_DECODER(VP6, vp6);
-    DECLARE_DECODER(VP6F, vp6f);
-    DECLARE_DECODER(WMV3, wmv3);
-    DECLARE_DECODER (WMV1, wmv1);
-    DECLARE_DECODER (WMV2, wmv2);
-    DECLARE_DECODER(VP3, vp3);
-    DECLARE_DECODER (MPEG4, mpeg4);
-    DECLARE_DECODER (MSMPEG4V1, msmpeg4v1);
-    DECLARE_DECODER (MSMPEG4V2, msmpeg4v2);
-    DECLARE_DECODER (MSMPEG4V3, msmpeg4v3);
-    DECLARE_DECODER(MJPEGB, mjpegb);
-    DECLARE_DECODER (MJPEG, mjpeg);
-    DECLARE_DECODER(WMAV2, wmav2);
-    DECLARE_DECODER (DVVIDEO, dvvideo);
-    DECLARE_DECODER (HUFFYUV, huffyuv);
-    DECLARE_DECODER (FFVHUFF, ffvhuff);
-    DECLARE_DECODER(SVQ3, svq3);
-    DECLARE_DECODER(TSCC, tscc);
-    DECLARE_DECODER(QDM2, qdm2);
-    DECLARE_DECODER (FFV1, ffv1);
-    DECLARE_DECODER (MPEG1VIDEO, mpeg1video);
-    DECLARE_DECODER (MPEG2VIDEO, mpeg2video);
-    DECLARE_DECODER (RV10, rv10);
-    DECLARE_DECODER (RV20, rv20);
-    DECLARE_DECODER (DVBSUB, dvbsub);
-    DECLARE_DECODER (FLV, flv);
-    DECLARE_DECODER (SNOW, snow);
-    DECLARE_DECODER (AMV, amv);
-#undef DECLARE_DECODER
-#define DECLARE_DECODER(a,b); printf("#define ENABLE_"#a"_DECODER 0\n"); 
-
-    DECLARE_DECODER(AASC, aasc);
-    DECLARE_DECODER(AVS, avs);
-    DECLARE_DECODER(BETHSOFTVID, bethsoftvid);
-    DECLARE_DECODER(C93, c93);
-    DECLARE_DECODER(CAVS, cavs);
-    DECLARE_DECODER(CLJR, cljr);
-    DECLARE_DECODER(CSCD, cscd);
-    DECLARE_DECODER(CYUV, cyuv);
-    DECLARE_DECODER(DSICINVIDEO, dsicinvideo);
-    DECLARE_DECODER(DXA, dxa);
-    DECLARE_DECODER(EIGHTBPS, eightbps);
-    DECLARE_DECODER(FLIC, flic);
-    DECLARE_DECODER(IDCIN, idcin);
-    DECLARE_DECODER(KMVC, kmvc);
-    DECLARE_DECODER(LOCO, loco);
-    DECLARE_DECODER(MDEC, mdec);
-    DECLARE_DECODER(MMVIDEO, mmvideo);
-    DECLARE_DECODER(MPEG_XVMC, mpeg_xvmc);
-    DECLARE_DECODER(MSRLE, msrle);
-    DECLARE_DECODER(MSZH, mszh);
-    DECLARE_DECODER(NUV, nuv);
-    DECLARE_DECODER(PTX, ptx);
-    DECLARE_DECODER(QDRAW, qdraw);
-    DECLARE_DECODER(QPEG, qpeg);
-    DECLARE_DECODER(RPZA, rpza);
-    DECLARE_DECODER(SMACKER, smacker);
-    DECLARE_DECODER(SMC, smc);
-    DECLARE_DECODER(SP5X, sp5x);
-    DECLARE_DECODER(THEORA, theora);
-    DECLARE_DECODER(THP, thp);
-    DECLARE_DECODER(TIERTEXSEQVIDEO, tiertexseqvideo);
-    DECLARE_DECODER(TRUEMOTION1, truemotion1);
-    DECLARE_DECODER(TRUEMOTION2, truemotion2);
-    DECLARE_DECODER(TXD, txd);
-    DECLARE_DECODER(ULTI, ulti);
-    DECLARE_DECODER(VMDVIDEO, vmdvideo);
-    DECLARE_DECODER(VMNC, vmnc);
-    DECLARE_DECODER(VQA, vqa);
-    DECLARE_DECODER(WNV1, wnv1);
-    DECLARE_DECODER(XAN_WC3, xan_wc3);
-    DECLARE_DECODER(XL, xl);
-    DECLARE_DECODER(MPEG4AAC, mpeg4aac);
-    DECLARE_DECODER(ALAC, alac);
-    DECLARE_DECODER(ATRAC3, atrac3);
-    DECLARE_DECODER(COOK, cook);
-    DECLARE_DECODER(DCA, dca);
-    DECLARE_DECODER(DSICINAUDIO, dsicinaudio);
-    DECLARE_DECODER(IMC, imc);
-    DECLARE_DECODER(LIBA52, liba52);
-    DECLARE_DECODER(LIBFAAD, libfaad);
-    DECLARE_DECODER(MACE3, mace3);
-    DECLARE_DECODER(MACE6, mace6);
-    DECLARE_DECODER(MP3, mp3);
-    DECLARE_DECODER(MP3ADU, mp3adu);
-    DECLARE_DECODER(MP3ON4, mp3on4);
-    DECLARE_DECODER(MPC7, mpc7);
-    DECLARE_DECODER(RA_144, ra_144);
-    DECLARE_DECODER(RA_288, ra_288);
-    DECLARE_DECODER(SHORTEN, shorten);
-    DECLARE_DECODER(SMACKAUD, smackaud);
-    DECLARE_DECODER(TRUESPEECH, truespeech);
-    DECLARE_DECODER(TTA, tta);
-    DECLARE_DECODER(VMDAUDIO, vmdaudio);
-    DECLARE_DECODER(WAVPACK, wavpack);
-    DECLARE_DECODER(WS_SND1, ws_snd1);
-    DECLARE_DECODER(INTERPLAY_DPCM, interplay_dpcm);
-    DECLARE_DECODER(SOL_DPCM, sol_dpcm);
-    DECLARE_DECODER(XAN_DPCM, xan_dpcm);
-    DECLARE_DECODER(ADPCM_THP, adpcm_thp);
-    /* DUPE */
-    DECLARE_DECODER (ASV1, asv1);
-    DECLARE_DECODER (ASV2, asv2);
-    DECLARE_DECODER (BMP, bmp);
-    DECLARE_DECODER (FLASHSV, flashsv);
-    DECLARE_DECODER (GIF, gif);
-    DECLARE_DECODER (H261, h261);
-	DECLARE_DECODER (H263I, h263i);
-    DECLARE_DECODER (JPEGLS, jpegls);
-    DECLARE_DECODER (PNG, png);
-    DECLARE_DECODER (QTRLE, qtrle);
-    DECLARE_DECODER (RAWVIDEO, rawvideo);
-    DECLARE_DECODER (ROQ, roq);
-    DECLARE_DECODER (SGI, sgi);
-    DECLARE_DECODER (SVQ1, svq1);
-    DECLARE_DECODER (TARGA, targa);
-    DECLARE_DECODER (TIFF, tiff);
-    DECLARE_DECODER (ZLIB, zlib);
-    DECLARE_DECODER (ZMBV, zmbv);
-    DECLARE_DECODER (FLAC, flac);
-    DECLARE_DECODER (LIBAMR_NB, libamr_nb);
-    DECLARE_DECODER (LIBAMR_WB, libamr_wb);
-    DECLARE_DECODER (LIBGSM, libgsm);
-    DECLARE_DECODER (LIBGSM_MS, libgsm_ms);
-    DECLARE_DECODER (MP2, mp2);
-    DECLARE_DECODER (SONIC, sonic);
-    DECLARE_DECODER (VORBIS, vorbis);
-    DECLARE_DECODER(WMAV1, wmav1);
-    DECLARE_DECODER (PCM_ALAW, pcm_alaw);
-    DECLARE_DECODER (PCM_MULAW, pcm_mulaw);
-    DECLARE_DECODER (PCM_S8, pcm_s8);
-    DECLARE_DECODER (PCM_S16BE, pcm_s16be);
-    DECLARE_DECODER (PCM_S16LE, pcm_s16le);
-    DECLARE_DECODER (PCM_S24BE, pcm_s24be);
-    DECLARE_DECODER (PCM_S24DAUD, pcm_s24daud);
-    DECLARE_DECODER (PCM_S24LE, pcm_s24le);
-    DECLARE_DECODER (PCM_S32BE, pcm_s32be);
-    DECLARE_DECODER (PCM_S32LE, pcm_s32le);
-    DECLARE_DECODER (PCM_U8, pcm_u8);
-    DECLARE_DECODER (PCM_U16BE, pcm_u16be);
-    DECLARE_DECODER (PCM_U16LE, pcm_u16le);
-    DECLARE_DECODER (PCM_U24BE, pcm_u24be);
-    DECLARE_DECODER (PCM_U24LE, pcm_u24le);
-    DECLARE_DECODER (PCM_U32BE, pcm_u32be);
-    DECLARE_DECODER (PCM_U32LE, pcm_u32le);
-    DECLARE_DECODER (ROQ_DPCM, roq_dpcm);
-    DECLARE_DECODER (ADPCM_4XM, adpcm_4xm);
-    DECLARE_DECODER (ADPCM_ADX, adpcm_adx);
-    DECLARE_DECODER (ADPCM_CT, adpcm_ct);
-    DECLARE_DECODER (ADPCM_EA, adpcm_ea);
-    DECLARE_DECODER (ADPCM_G726, adpcm_g726);
-    DECLARE_DECODER (ADPCM_IMA_DK3, adpcm_ima_dk3);
-    DECLARE_DECODER (ADPCM_IMA_DK4, adpcm_ima_dk4);
-    DECLARE_DECODER (ADPCM_IMA_QT, adpcm_ima_qt);
-    DECLARE_DECODER (ADPCM_IMA_SMJPEG, adpcm_ima_smjpeg);
-    DECLARE_DECODER (ADPCM_IMA_WAV, adpcm_ima_wav);
-    DECLARE_DECODER (ADPCM_IMA_WS, adpcm_ima_ws);
-    DECLARE_DECODER (ADPCM_MS, adpcm_ms);
-    DECLARE_DECODER (ADPCM_SBPRO_2, adpcm_sbpro_2);
-    DECLARE_DECODER (ADPCM_SBPRO_3, adpcm_sbpro_3);
-    DECLARE_DECODER (ADPCM_SBPRO_4, adpcm_sbpro_4);
-    DECLARE_DECODER (ADPCM_SWF, adpcm_swf);
-    DECLARE_DECODER (ADPCM_XA, adpcm_xa);
-    DECLARE_DECODER (ADPCM_YAMAHA, adpcm_yamaha);
-    DECLARE_DECODER (DVDSUB, dvdsub);
-
-#define DECLARE_PARSER(a,b); printf("#define ENABLE_"#a"_PARSER 1\n"); 
-    DECLARE_PARSER (H263, h263);
-    DECLARE_PARSER (H264, h264);
-    DECLARE_PARSER (MPEG4VIDEO, mpeg4video);
-
-#undef DECLARE_PARSER
-#define DECLARE_PARSER(a,b); printf("#define ENABLE_"#a"_PARSER 0\n"); 
-    DECLARE_PARSER (AAC, aac);
-    DECLARE_PARSER (AC3, ac3);
-    DECLARE_PARSER (CAVSVIDEO, cavsvideo);
-    DECLARE_PARSER (DCA, dca);
-    DECLARE_PARSER (DVBSUB, dvbsub);
-    DECLARE_PARSER (DVDSUB, dvdsub);
-    DECLARE_PARSER (H261, h261);
-    DECLARE_PARSER (MJPEG, mjpeg);
-    DECLARE_PARSER (MPEGAUDIO, mpegaudio);
-    DECLARE_PARSER (MPEGVIDEO, mpegvideo);
-    DECLARE_PARSER (PNM, pnm);
-    DECLARE_PARSER (VC1, vc1);
-
-#define DECLARE_ENCODER(a,b); printf("#define ENABLE_"#a"_ENCODER 1\n"); 
-    DECLARE_ENCODER (MJPEG, mjpeg);
-    DECLARE_ENCODER (MSMPEG4V3, msmpeg4v3);
-    DECLARE_ENCODER(H263P, h263p);
-    DECLARE_ENCODER(AC3, ac3);
-    DECLARE_ENCODER (FFV1, ffv1);
-    DECLARE_ENCODER (FLV1, flv1);
-    DECLARE_ENCODER (FFVHUFF, ffvhuff);
-    DECLARE_ENCODER (H263, h263);
-    DECLARE_ENCODER (MPEG1VIDEO, mpeg1video);
-    DECLARE_ENCODER (MPEG2VIDEO, mpeg2video);
-    DECLARE_ENCODER (MPEG4, mpeg4);
-    DECLARE_ENCODER (FLV, flv);
-    DECLARE_ENCODER (MP2, mp2);
-    DECLARE_ENCODER (DVVIDEO, dvvideo);
-    DECLARE_ENCODER (HUFFYUV, huffyuv);
-    DECLARE_ENCODER (DVBSUB, dvbsub);
-    DECLARE_ENCODER (SNOW, snow);
-
-#undef DECLARE_ENCODER
-#define DECLARE_ENCODER(a,b); printf("#define ENABLE_"#a"_ENCODER 0\n"); 
-    DECLARE_ENCODER(ADPCM_IMA_AMV, amv);
-    DECLARE_ENCODER(LIBX264, libx264);
-    DECLARE_ENCODER(LIBXVID, libxvid);
-    DECLARE_ENCODER(LJPEG, ljpeg);
-    DECLARE_ENCODER(PAM, pam);
-    DECLARE_ENCODER(PBM, pbm);
-    DECLARE_ENCODER(PGM, pgm);
-    DECLARE_ENCODER(PGMYUV, pgmyuv);
-    DECLARE_ENCODER(PPM, ppm);
-    DECLARE_ENCODER(LIBFAAC, libfaac);
-    DECLARE_ENCODER(LIBMP3LAME, libmp3lame);
-    DECLARE_ENCODER(LIBTHEORA, libtheora);
-    DECLARE_ENCODER(SONIC_LS, sonic_ls);
-/* Dupe */
- DECLARE_ENCODER (ASV1, asv1);
-    DECLARE_ENCODER (ASV2, asv2);
-    DECLARE_ENCODER (BMP, bmp);
-    DECLARE_ENCODER (FLASHSV, flashsv);
-    DECLARE_ENCODER (GIF, gif);
-    DECLARE_ENCODER (H261, h261);
-    DECLARE_ENCODER (JPEGLS, jpegls);
-    DECLARE_ENCODER (MSMPEG4V1, msmpeg4v1);
-    DECLARE_ENCODER (MSMPEG4V2, msmpeg4v2);
-    DECLARE_ENCODER (PNG, png);
-    DECLARE_ENCODER (QTRLE, qtrle);
-    DECLARE_ENCODER (RAWVIDEO, rawvideo);
-    DECLARE_ENCODER (ROQ, roq);
-    DECLARE_ENCODER (RV10, rv10);
-    DECLARE_ENCODER (RV20, rv20);
-    DECLARE_ENCODER (SGI, sgi);
-    DECLARE_ENCODER (SVQ1, svq1);
-    DECLARE_ENCODER (TARGA, targa);
-    DECLARE_ENCODER (TIFF, tiff);
-    DECLARE_ENCODER (WMV1, wmv1);
-    DECLARE_ENCODER (WMV2, wmv2);
-    DECLARE_ENCODER (ZLIB, zlib);
-    DECLARE_ENCODER (ZMBV, zmbv);
-    DECLARE_ENCODER (FLAC, flac);
-    DECLARE_ENCODER (LIBAMR_NB, libamr_nb);
-    DECLARE_ENCODER (LIBAMR_WB, libamr_wb);
-    DECLARE_ENCODER (LIBGSM, libgsm);
-    DECLARE_ENCODER (LIBGSM_MS, libgsm_ms);
-    DECLARE_ENCODER (SONIC, sonic);
-    DECLARE_ENCODER (VORBIS, vorbis);
-    DECLARE_ENCODER(WMAV1, wmav1);
-    DECLARE_ENCODER(WMAV2, wmav2);
-    DECLARE_ENCODER (PCM_ALAW, pcm_alaw);
-    DECLARE_ENCODER (PCM_MULAW, pcm_mulaw);
-    DECLARE_ENCODER (PCM_S8, pcm_s8);
-    DECLARE_ENCODER (PCM_S16BE, pcm_s16be);
-    DECLARE_ENCODER (PCM_S16LE, pcm_s16le);
-    DECLARE_ENCODER (PCM_S24BE, pcm_s24be);
-    DECLARE_ENCODER (PCM_S24DAUD, pcm_s24daud);
-    DECLARE_ENCODER (PCM_S24LE, pcm_s24le);
-    DECLARE_ENCODER (PCM_S32BE, pcm_s32be);
-    DECLARE_ENCODER (PCM_S32LE, pcm_s32le);
-    DECLARE_ENCODER (PCM_U8, pcm_u8);
-    DECLARE_ENCODER (PCM_U16BE, pcm_u16be);
-    DECLARE_ENCODER (PCM_U16LE, pcm_u16le);
-    DECLARE_ENCODER (PCM_U24BE, pcm_u24be);
-    DECLARE_ENCODER (PCM_U24LE, pcm_u24le);
-    DECLARE_ENCODER (PCM_U32BE, pcm_u32be);
-    DECLARE_ENCODER (PCM_U32LE, pcm_u32le);
-    DECLARE_ENCODER (ROQ_DPCM, roq_dpcm);
-    DECLARE_ENCODER (ADPCM_4XM, adpcm_4xm);
-    DECLARE_ENCODER (ADPCM_ADX, adpcm_adx);
-    DECLARE_ENCODER (ADPCM_CT, adpcm_ct);
-    DECLARE_ENCODER (ADPCM_EA, adpcm_ea);
-    DECLARE_ENCODER (ADPCM_G726, adpcm_g726);
-    DECLARE_ENCODER (ADPCM_IMA_DK3, adpcm_ima_dk3);
-    DECLARE_ENCODER (ADPCM_IMA_DK4, adpcm_ima_dk4);
-    DECLARE_ENCODER (ADPCM_IMA_QT, adpcm_ima_qt);
-    DECLARE_ENCODER (ADPCM_IMA_SMJPEG, adpcm_ima_smjpeg);
-    DECLARE_ENCODER (ADPCM_IMA_WAV, adpcm_ima_wav);
-    DECLARE_ENCODER (ADPCM_IMA_WS, adpcm_ima_ws);
-    DECLARE_ENCODER (ADPCM_MS, adpcm_ms);
-    DECLARE_ENCODER (ADPCM_SBPRO_2, adpcm_sbpro_2);
-    DECLARE_ENCODER (ADPCM_SBPRO_3, adpcm_sbpro_3);
-    DECLARE_ENCODER (ADPCM_SBPRO_4, adpcm_sbpro_4);
-    DECLARE_ENCODER (ADPCM_SWF, adpcm_swf);
-    DECLARE_ENCODER (ADPCM_XA, adpcm_xa);
-    DECLARE_ENCODER (ADPCM_YAMAHA, adpcm_yamaha);
-    DECLARE_ENCODER (DVDSUB, dvdsub);
-
-printf("#define ENABLE_LIBVORBIS_ENCODER        0\n");
-printf("#define ENABLE_LIBVORBIS_DECODER        0\n");
-printf("#define ENABLE_MP3_HEADER_COMPRESS_BSF  0\n");
-printf("#define ENABLE_IMX_DUMP_HEADER_BSF      0\n");
-
-printf("#define ENABLE_DUMP_EXTRADATA_BSF       0\n");
-printf("#define ENABLE_REMOVE_EXTRADATA_BSF     0\n");
-printf("#define ENABLE_NOISE_BSF                0\n");
-printf("#define ENABLE_MP3_HEADER_DECOMPRESS_BSF 0\n");
-printf("#define ENABLE_MJPEGA_DUMP_HEADER_BSF   0\n");
-printf("#define ENABLE_IMX_DUMP_HEADER_BSF      0\n");
-/* FIXME */
-printf("#define ENABLE_ARMV4L      0\n");
-printf("#define ENABLE_MLIB      0\n");
-printf("#define ENABLE_SPARC      0\n");
-printf("#define ENABLE_ALPHA      0\n");
-
-// Hack so CMake and autoconf don't need to be changed
-printf("#include \"config.h\"\n");
-printf("#ifdef ARCH_POWERPC\n");
-printf("#define ENABLE_POWERPC      1\n");
-printf("#else\n");
-printf("#define ENABLE_POWERPC      0\n");
-printf("#endif\n");
-
-printf("#define ENABLE_MMI      0\n");
-printf("#define ENABLE_SH4      0\n");
-printf("#define ENABLE_BFIN      0\n");
-printf("#define ENABLE_SMALL      0\n");
-printf("#define CONFIG_SNOW_ENCODER      1\n");
-}
+/*
+ * Glue to lavcodec configure
+ * MEANX
+ * */
+#include <stdlib.h>
+#include <stdio.h>
+int main(void)
+{
+#define DECLARE_DECODER(a,b); printf("#define ENABLE_"#a"_DECODER 1\n"); 
+  
+    DECLARE_DECODER(NELLYMOSER,nellymoser);
+    DECLARE_DECODER(ADPCM_IMA_AMV, amv);
+    DECLARE_DECODER(CINEPAK, cinepak);
+    DECLARE_DECODER(DNXHD, dnxhd);
+    DECLARE_DECODER(FOURXM, fourxm);
+    DECLARE_DECODER(FRAPS, fraps);
+	DECLARE_DECODER(H263, h263);
+    DECLARE_DECODER(H264, h264);
+    DECLARE_DECODER(INDEO2, indeo2);
+    DECLARE_DECODER(INDEO3, indeo3);
+    DECLARE_DECODER(INTERPLAY_VIDEO, interplay_video);
+    DECLARE_DECODER(MPEGVIDEO, mpegvideo);
+    DECLARE_DECODER(MSVIDEO1, msvideo1);
+    DECLARE_DECODER(VC1, vc1);
+    DECLARE_DECODER(VCR1, vcr1);
+    DECLARE_DECODER(VP5, vp5);
+    DECLARE_DECODER(VP6, vp6);
+    DECLARE_DECODER(VP6F, vp6f);
+    DECLARE_DECODER(WMV3, wmv3);
+    DECLARE_DECODER (WMV1, wmv1);
+    DECLARE_DECODER (WMV2, wmv2);
+    DECLARE_DECODER(VP3, vp3);
+    DECLARE_DECODER (MPEG4, mpeg4);
+    DECLARE_DECODER (MSMPEG4V1, msmpeg4v1);
+    DECLARE_DECODER (MSMPEG4V2, msmpeg4v2);
+    DECLARE_DECODER (MSMPEG4V3, msmpeg4v3);
+    DECLARE_DECODER(MJPEGB, mjpegb);
+    DECLARE_DECODER (MJPEG, mjpeg);
+    DECLARE_DECODER(WMAV2, wmav2);
+    DECLARE_DECODER (DVVIDEO, dvvideo);
+    DECLARE_DECODER (HUFFYUV, huffyuv);
+    DECLARE_DECODER (FFVHUFF, ffvhuff);
+    DECLARE_DECODER(SVQ3, svq3);
+    DECLARE_DECODER(TSCC, tscc);
+    DECLARE_DECODER(QDM2, qdm2);
+    DECLARE_DECODER (FFV1, ffv1);
+    DECLARE_DECODER (MPEG1VIDEO, mpeg1video);
+    DECLARE_DECODER (MPEG2VIDEO, mpeg2video);
+    DECLARE_DECODER (RV10, rv10);
+    DECLARE_DECODER (RV20, rv20);
+    DECLARE_DECODER (DVBSUB, dvbsub);
+    DECLARE_DECODER (FLV, flv);
+    DECLARE_DECODER (SNOW, snow);
+    DECLARE_DECODER (AMV, amv);
+#undef DECLARE_DECODER
+#define DECLARE_DECODER(a,b); printf("#define ENABLE_"#a"_DECODER 0\n"); 
+
+    DECLARE_DECODER(AASC, aasc);
+    DECLARE_DECODER(AVS, avs);
+    DECLARE_DECODER(BETHSOFTVID, bethsoftvid);
+    DECLARE_DECODER(C93, c93);
+    DECLARE_DECODER(CAVS, cavs);
+    DECLARE_DECODER(CLJR, cljr);
+    DECLARE_DECODER(CSCD, cscd);
+    DECLARE_DECODER(CYUV, cyuv);
+    DECLARE_DECODER(DSICINVIDEO, dsicinvideo);
+    DECLARE_DECODER(DXA, dxa);
+    DECLARE_DECODER(EIGHTBPS, eightbps);
+    DECLARE_DECODER(FLIC, flic);
+    DECLARE_DECODER(IDCIN, idcin);
+    DECLARE_DECODER(KMVC, kmvc);
+    DECLARE_DECODER(LOCO, loco);
+    DECLARE_DECODER(MDEC, mdec);
+    DECLARE_DECODER(MMVIDEO, mmvideo);
+    DECLARE_DECODER(MPEG_XVMC, mpeg_xvmc);
+    DECLARE_DECODER(MSRLE, msrle);
+    DECLARE_DECODER(MSZH, mszh);
+    DECLARE_DECODER(NUV, nuv);
+    DECLARE_DECODER(PTX, ptx);
+    DECLARE_DECODER(QDRAW, qdraw);
+    DECLARE_DECODER(QPEG, qpeg);
+    DECLARE_DECODER(RPZA, rpza);
+    DECLARE_DECODER(SMACKER, smacker);
+    DECLARE_DECODER(SMC, smc);
+    DECLARE_DECODER(SP5X, sp5x);
+    DECLARE_DECODER(THEORA, theora);
+    DECLARE_DECODER(THP, thp);
+    DECLARE_DECODER(TIERTEXSEQVIDEO, tiertexseqvideo);
+    DECLARE_DECODER(TRUEMOTION1, truemotion1);
+    DECLARE_DECODER(TRUEMOTION2, truemotion2);
+    DECLARE_DECODER(TXD, txd);
+    DECLARE_DECODER(ULTI, ulti);
+    DECLARE_DECODER(VMDVIDEO, vmdvideo);
+    DECLARE_DECODER(VMNC, vmnc);
+    DECLARE_DECODER(VQA, vqa);
+    DECLARE_DECODER(WNV1, wnv1);
+    DECLARE_DECODER(XAN_WC3, xan_wc3);
+    DECLARE_DECODER(XL, xl);
+    DECLARE_DECODER(MPEG4AAC, mpeg4aac);
+    DECLARE_DECODER(ALAC, alac);
+    DECLARE_DECODER(ATRAC3, atrac3);
+    DECLARE_DECODER(COOK, cook);
+    DECLARE_DECODER(DCA, dca);
+    DECLARE_DECODER(DSICINAUDIO, dsicinaudio);
+    DECLARE_DECODER(IMC, imc);
+    DECLARE_DECODER(LIBA52, liba52);
+    DECLARE_DECODER(LIBFAAD, libfaad);
+    DECLARE_DECODER(MACE3, mace3);
+    DECLARE_DECODER(MACE6, mace6);
+    DECLARE_DECODER(MP3, mp3);
+    DECLARE_DECODER(MP3ADU, mp3adu);
+    DECLARE_DECODER(MP3ON4, mp3on4);
+    DECLARE_DECODER(MPC7, mpc7);
+    DECLARE_DECODER(RA_144, ra_144);
+    DECLARE_DECODER(RA_288, ra_288);
+    DECLARE_DECODER(SHORTEN, shorten);
+    DECLARE_DECODER(SMACKAUD, smackaud);
+    DECLARE_DECODER(TRUESPEECH, truespeech);
+    DECLARE_DECODER(TTA, tta);
+    DECLARE_DECODER(VMDAUDIO, vmdaudio);
+    DECLARE_DECODER(WAVPACK, wavpack);
+    DECLARE_DECODER(WS_SND1, ws_snd1);
+    DECLARE_DECODER(INTERPLAY_DPCM, interplay_dpcm);
+    DECLARE_DECODER(SOL_DPCM, sol_dpcm);
+    DECLARE_DECODER(XAN_DPCM, xan_dpcm);
+    DECLARE_DECODER(ADPCM_THP, adpcm_thp);
+    /* DUPE */
+    DECLARE_DECODER (ASV1, asv1);
+    DECLARE_DECODER (ASV2, asv2);
+    DECLARE_DECODER (BMP, bmp);
+    DECLARE_DECODER (FLASHSV, flashsv);
+    DECLARE_DECODER (GIF, gif);
+    DECLARE_DECODER (H261, h261);
+	DECLARE_DECODER (H263I, h263i);
+    DECLARE_DECODER (JPEGLS, jpegls);
+    DECLARE_DECODER (PNG, png);
+    DECLARE_DECODER (QTRLE, qtrle);
+    DECLARE_DECODER (RAWVIDEO, rawvideo);
+    DECLARE_DECODER (ROQ, roq);
+    DECLARE_DECODER (SGI, sgi);
+    DECLARE_DECODER (SVQ1, svq1);
+    DECLARE_DECODER (TARGA, targa);
+    DECLARE_DECODER (TIFF, tiff);
+    DECLARE_DECODER (ZLIB, zlib);
+    DECLARE_DECODER (ZMBV, zmbv);
+    DECLARE_DECODER (FLAC, flac);
+    DECLARE_DECODER (LIBAMR_NB, libamr_nb);
+    DECLARE_DECODER (LIBAMR_WB, libamr_wb);
+    DECLARE_DECODER (LIBGSM, libgsm);
+    DECLARE_DECODER (LIBGSM_MS, libgsm_ms);
+    DECLARE_DECODER (MP2, mp2);
+    DECLARE_DECODER (SONIC, sonic);
+    DECLARE_DECODER (VORBIS, vorbis);
+    DECLARE_DECODER(WMAV1, wmav1);
+    DECLARE_DECODER (PCM_ALAW, pcm_alaw);
+    DECLARE_DECODER (PCM_MULAW, pcm_mulaw);
+    DECLARE_DECODER (PCM_S8, pcm_s8);
+    DECLARE_DECODER (PCM_S16BE, pcm_s16be);
+    DECLARE_DECODER (PCM_S16LE, pcm_s16le);
+    DECLARE_DECODER (PCM_S24BE, pcm_s24be);
+    DECLARE_DECODER (PCM_S24DAUD, pcm_s24daud);
+    DECLARE_DECODER (PCM_S24LE, pcm_s24le);
+    DECLARE_DECODER (PCM_S32BE, pcm_s32be);
+    DECLARE_DECODER (PCM_S32LE, pcm_s32le);
+    DECLARE_DECODER (PCM_U8, pcm_u8);
+    DECLARE_DECODER (PCM_U16BE, pcm_u16be);
+    DECLARE_DECODER (PCM_U16LE, pcm_u16le);
+    DECLARE_DECODER (PCM_U24BE, pcm_u24be);
+    DECLARE_DECODER (PCM_U24LE, pcm_u24le);
+    DECLARE_DECODER (PCM_U32BE, pcm_u32be);
+    DECLARE_DECODER (PCM_U32LE, pcm_u32le);
+    DECLARE_DECODER (ROQ_DPCM, roq_dpcm);
+    DECLARE_DECODER (ADPCM_4XM, adpcm_4xm);
+    DECLARE_DECODER (ADPCM_ADX, adpcm_adx);
+    DECLARE_DECODER (ADPCM_CT, adpcm_ct);
+    DECLARE_DECODER (ADPCM_EA, adpcm_ea);
+    DECLARE_DECODER (ADPCM_G726, adpcm_g726);
+    DECLARE_DECODER (ADPCM_IMA_DK3, adpcm_ima_dk3);
+    DECLARE_DECODER (ADPCM_IMA_DK4, adpcm_ima_dk4);
+    DECLARE_DECODER (ADPCM_IMA_QT, adpcm_ima_qt);
+    DECLARE_DECODER (ADPCM_IMA_SMJPEG, adpcm_ima_smjpeg);
+    DECLARE_DECODER (ADPCM_IMA_WAV, adpcm_ima_wav);
+    DECLARE_DECODER (ADPCM_IMA_WS, adpcm_ima_ws);
+    DECLARE_DECODER (ADPCM_MS, adpcm_ms);
+    DECLARE_DECODER (ADPCM_SBPRO_2, adpcm_sbpro_2);
+    DECLARE_DECODER (ADPCM_SBPRO_3, adpcm_sbpro_3);
+    DECLARE_DECODER (ADPCM_SBPRO_4, adpcm_sbpro_4);
+    DECLARE_DECODER (ADPCM_SWF, adpcm_swf);
+    DECLARE_DECODER (ADPCM_XA, adpcm_xa);
+    DECLARE_DECODER (ADPCM_YAMAHA, adpcm_yamaha);
+    DECLARE_DECODER (DVDSUB, dvdsub);
+	DECLARE_DECODER (LIBVORBIS, libvorbis);
+
+#define DECLARE_PARSER(a,b); printf("#define ENABLE_"#a"_PARSER 1\n"); 
+    DECLARE_PARSER (H263, h263);
+    DECLARE_PARSER (H264, h264);
+    DECLARE_PARSER (MPEG4VIDEO, mpeg4video);
+
+#undef DECLARE_PARSER
+#define DECLARE_PARSER(a,b); printf("#define ENABLE_"#a"_PARSER 0\n"); 
+    DECLARE_PARSER (AAC, aac);
+    DECLARE_PARSER (AC3, ac3);
+    DECLARE_PARSER (CAVSVIDEO, cavsvideo);
+    DECLARE_PARSER (DCA, dca);
+    DECLARE_PARSER (DVBSUB, dvbsub);
+    DECLARE_PARSER (DVDSUB, dvdsub);
+    DECLARE_PARSER (H261, h261);
+    DECLARE_PARSER (MJPEG, mjpeg);
+    DECLARE_PARSER (MPEGAUDIO, mpegaudio);
+    DECLARE_PARSER (MPEGVIDEO, mpegvideo);
+    DECLARE_PARSER (PNM, pnm);
+    DECLARE_PARSER (VC1, vc1);
+
+#define DECLARE_ENCODER(a,b); printf("#define ENABLE_"#a"_ENCODER 1\n"); 
+    DECLARE_ENCODER (MJPEG, mjpeg);
+    DECLARE_ENCODER (MSMPEG4V3, msmpeg4v3);
+    DECLARE_ENCODER(H263P, h263p);
+    DECLARE_ENCODER(AC3, ac3);
+    DECLARE_ENCODER (FFV1, ffv1);
+    DECLARE_ENCODER (FLV1, flv1);
+    DECLARE_ENCODER (FFVHUFF, ffvhuff);
+    DECLARE_ENCODER (H263, h263);
+    DECLARE_ENCODER (MPEG1VIDEO, mpeg1video);
+    DECLARE_ENCODER (MPEG2VIDEO, mpeg2video);
+    DECLARE_ENCODER (MPEG4, mpeg4);
+    DECLARE_ENCODER (FLV, flv);
+    DECLARE_ENCODER (MP2, mp2);
+    DECLARE_ENCODER (DVVIDEO, dvvideo);
+    DECLARE_ENCODER (HUFFYUV, huffyuv);
+    DECLARE_ENCODER (DVBSUB, dvbsub);
+    DECLARE_ENCODER (SNOW, snow);
+
+#undef DECLARE_ENCODER
+#define DECLARE_ENCODER(a,b); printf("#define ENABLE_"#a"_ENCODER 0\n"); 
+    DECLARE_ENCODER(ADPCM_IMA_AMV, amv);
+    DECLARE_ENCODER(LIBX264, libx264);
+    DECLARE_ENCODER(LIBXVID, libxvid);
+    DECLARE_ENCODER(LJPEG, ljpeg);
+    DECLARE_ENCODER(PAM, pam);
+    DECLARE_ENCODER(PBM, pbm);
+    DECLARE_ENCODER(PGM, pgm);
+    DECLARE_ENCODER(PGMYUV, pgmyuv);
+    DECLARE_ENCODER(PPM, ppm);
+    DECLARE_ENCODER(LIBFAAC, libfaac);
+    DECLARE_ENCODER(LIBMP3LAME, libmp3lame);
+    DECLARE_ENCODER(LIBTHEORA, libtheora);
+    DECLARE_ENCODER(SONIC_LS, sonic_ls);
+/* Dupe */
+	DECLARE_ENCODER (ASV1, asv1);
+    DECLARE_ENCODER (ASV2, asv2);
+    DECLARE_ENCODER (BMP, bmp);
+    DECLARE_ENCODER (FLASHSV, flashsv);
+    DECLARE_ENCODER (GIF, gif);
+    DECLARE_ENCODER (H261, h261);
+    DECLARE_ENCODER (JPEGLS, jpegls);
+    DECLARE_ENCODER (MSMPEG4V1, msmpeg4v1);
+    DECLARE_ENCODER (MSMPEG4V2, msmpeg4v2);
+    DECLARE_ENCODER (PNG, png);
+    DECLARE_ENCODER (QTRLE, qtrle);
+    DECLARE_ENCODER (RAWVIDEO, rawvideo);
+    DECLARE_ENCODER (ROQ, roq);
+    DECLARE_ENCODER (RV10, rv10);
+    DECLARE_ENCODER (RV20, rv20);
+    DECLARE_ENCODER (SGI, sgi);
+    DECLARE_ENCODER (SVQ1, svq1);
+    DECLARE_ENCODER (TARGA, targa);
+    DECLARE_ENCODER (TIFF, tiff);
+    DECLARE_ENCODER (WMV1, wmv1);
+    DECLARE_ENCODER (WMV2, wmv2);
+    DECLARE_ENCODER (ZLIB, zlib);
+    DECLARE_ENCODER (ZMBV, zmbv);
+    DECLARE_ENCODER (FLAC, flac);
+    DECLARE_ENCODER (LIBAMR_NB, libamr_nb);
+    DECLARE_ENCODER (LIBAMR_WB, libamr_wb);
+    DECLARE_ENCODER (LIBGSM, libgsm);
+    DECLARE_ENCODER (LIBGSM_MS, libgsm_ms);
+    DECLARE_ENCODER (SONIC, sonic);
+    DECLARE_ENCODER (VORBIS, vorbis);
+    DECLARE_ENCODER(WMAV1, wmav1);
+    DECLARE_ENCODER(WMAV2, wmav2);
+    DECLARE_ENCODER (PCM_ALAW, pcm_alaw);
+    DECLARE_ENCODER (PCM_MULAW, pcm_mulaw);
+    DECLARE_ENCODER (PCM_S8, pcm_s8);
+    DECLARE_ENCODER (PCM_S16BE, pcm_s16be);
+    DECLARE_ENCODER (PCM_S16LE, pcm_s16le);
+    DECLARE_ENCODER (PCM_S24BE, pcm_s24be);
+    DECLARE_ENCODER (PCM_S24DAUD, pcm_s24daud);
+    DECLARE_ENCODER (PCM_S24LE, pcm_s24le);
+    DECLARE_ENCODER (PCM_S32BE, pcm_s32be);
+    DECLARE_ENCODER (PCM_S32LE, pcm_s32le);
+    DECLARE_ENCODER (PCM_U8, pcm_u8);
+    DECLARE_ENCODER (PCM_U16BE, pcm_u16be);
+    DECLARE_ENCODER (PCM_U16LE, pcm_u16le);
+    DECLARE_ENCODER (PCM_U24BE, pcm_u24be);
+    DECLARE_ENCODER (PCM_U24LE, pcm_u24le);
+    DECLARE_ENCODER (PCM_U32BE, pcm_u32be);
+    DECLARE_ENCODER (PCM_U32LE, pcm_u32le);
+    DECLARE_ENCODER (ROQ_DPCM, roq_dpcm);
+    DECLARE_ENCODER (ADPCM_4XM, adpcm_4xm);
+    DECLARE_ENCODER (ADPCM_ADX, adpcm_adx);
+    DECLARE_ENCODER (ADPCM_CT, adpcm_ct);
+    DECLARE_ENCODER (ADPCM_EA, adpcm_ea);
+    DECLARE_ENCODER (ADPCM_G726, adpcm_g726);
+    DECLARE_ENCODER (ADPCM_IMA_DK3, adpcm_ima_dk3);
+    DECLARE_ENCODER (ADPCM_IMA_DK4, adpcm_ima_dk4);
+    DECLARE_ENCODER (ADPCM_IMA_QT, adpcm_ima_qt);
+    DECLARE_ENCODER (ADPCM_IMA_SMJPEG, adpcm_ima_smjpeg);
+    DECLARE_ENCODER (ADPCM_IMA_WAV, adpcm_ima_wav);
+    DECLARE_ENCODER (ADPCM_IMA_WS, adpcm_ima_ws);
+    DECLARE_ENCODER (ADPCM_MS, adpcm_ms);
+    DECLARE_ENCODER (ADPCM_SBPRO_2, adpcm_sbpro_2);
+    DECLARE_ENCODER (ADPCM_SBPRO_3, adpcm_sbpro_3);
+    DECLARE_ENCODER (ADPCM_SBPRO_4, adpcm_sbpro_4);
+    DECLARE_ENCODER (ADPCM_SWF, adpcm_swf);
+    DECLARE_ENCODER (ADPCM_XA, adpcm_xa);
+    DECLARE_ENCODER (ADPCM_YAMAHA, adpcm_yamaha);
+    DECLARE_ENCODER (DVDSUB, dvdsub);
+	DECLARE_ENCODER (LIBVORBIS, libvorbis);
+
+#define DECLARE_BSF(a,b); printf("#define ENABLE_"#a"_BSF 0\n");
+
+	DECLARE_BSF(MP3_HEADER_COMPRESS, mp3_header_compress);
+	DECLARE_BSF(IMX_DUMP_HEADER, imx_dump_header);
+	DECLARE_BSF(DUMP_EXTRADATA, dump_extradata);
+	DECLARE_BSF(REMOVE_EXTRADATA, remove_extradata);
+	DECLARE_BSF(NOISE, noise);
+	DECLARE_BSF(MP3_HEADER_DECOMPRESS, mp3_header_decompress);
+	DECLARE_BSF(MJPEGA_DUMP_HEADER, mjpega_dump_header);
+	DECLARE_BSF(IMX_DUMP_HEADER, imx_dump_header);
+
+#define DECLARE_MUXER(a,b); printf("#define CONFIG_"#a"_MUXER 1\n");
+
+	printf("#define CONFIG_MUXERS 1\n");
+	DECLARE_MUXER(MOV, mov)
+	DECLARE_MUXER(MP4, mp4)
+	DECLARE_MUXER(PSP, psp)
+	DECLARE_MUXER(TG2, tg2)
+	DECLARE_MUXER(TGP, tgp)
+
+	printf("#define CONFIG_ENCODERS 1\n");
+	printf("#define CONFIG_DVVIDEO_ENCODER 1\n");
+	printf("#define CONFIG_SNOW_ENCODER 1\n");
+
+#define DECLARE_CONFIG_DECODER(a,b); printf("#define CONFIG_"#a"_DECODER 1\n");
+
+	printf("#define CONFIG_DECODERS 1\n");
+	DECLARE_CONFIG_DECODER(DVVIDEO, dvvideo);
+	DECLARE_CONFIG_DECODER(H263, h263);
+	DECLARE_CONFIG_DECODER(MPEG4, mpeg4);
+	DECLARE_CONFIG_DECODER(SNOW, snow);
+	DECLARE_CONFIG_DECODER(VC1, vc1);
+	DECLARE_CONFIG_DECODER(WMV2, wmv2);
+	DECLARE_CONFIG_DECODER(WMV3, wmv3);
+
+	printf("#define CONFIG_MPEGAUDIO_HP 1\n");
+	printf("#define CONFIG_ZLIB 1\n");
+
+#define ENABLE(a,b); printf("#define ENABLE_"#a" 0\n");
+
+	ENABLE(ARMV4L, armv4l);
+	ENABLE(MLIB, mlib);
+	ENABLE(SPARC, sparc);
+	ENABLE(ALPHA, alpha);
+	ENABLE(MMI, mmi);
+	ENABLE(SH4, sh4);
+	ENABLE(BFIN, bfin);
+	ENABLE(SMALL, small);
+
+	// Hack so CMake and autoconf don't need to be changed
+	printf("#ifdef ARCH_POWERPC\n");
+	printf("#define ENABLE_POWERPC 1\n");
+	printf("#else\n");
+	printf("#define ENABLE_POWERPC 0\n");
+	printf("#endif\n");
+
+	printf("#ifdef ARCH_X86\n");
+	printf("#define ENABLE_MMX 1\n");
+	printf("#define HAVE_MMX 1\n");
+	printf("#define HAVE_FAST_UNALIGNED 1\n");
+	printf("#else\n");
+	printf("#define ENABLE_MMX 0\n");
+	printf("#endif\n");
+
+	printf("#ifdef ARCH_X86_64\n");
+	printf("#define HAVE_FAST_64BIT 1\n");
+	printf("#endif\n");
+
+	printf("#ifdef __APPLE__\n");
+	printf("#define CONFIG_DARWIN 1\n");
+	printf("#endif\n");
+
+	printf("#define ENABLE_THREADS 1\n");
+	printf("#define HAVE_LRINTF 1\n");
+	printf("#define HAVE_THREADS 1\n");
+	printf("#define RUNTIME_CPUDETECT 1\n");
+}

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavcodec/ffconf.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavcodec/ffconf.h	2008-03-05 11:49:06 UTC (rev 3825)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavcodec/ffconf.h	2008-03-05 14:32:46 UTC (rev 3826)
@@ -175,6 +175,7 @@
 #define ENABLE_ADPCM_XA_DECODER 0
 #define ENABLE_ADPCM_YAMAHA_DECODER 0
 #define ENABLE_DVDSUB_DECODER 0
+#define ENABLE_LIBVORBIS_DECODER 0
 #define ENABLE_H263_PARSER 1
 #define ENABLE_H264_PARSER 1
 #define ENABLE_MPEG4VIDEO_PARSER 1
@@ -289,28 +290,61 @@
 #define ENABLE_ADPCM_XA_ENCODER 0
 #define ENABLE_ADPCM_YAMAHA_ENCODER 0
 #define ENABLE_DVDSUB_ENCODER 0
-#define ENABLE_LIBVORBIS_ENCODER        0
-#define ENABLE_LIBVORBIS_DECODER        0
-#define ENABLE_MP3_HEADER_COMPRESS_BSF  0
-#define ENABLE_IMX_DUMP_HEADER_BSF      0
-#define ENABLE_DUMP_EXTRADATA_BSF       0
-#define ENABLE_REMOVE_EXTRADATA_BSF     0
-#define ENABLE_NOISE_BSF                0
+#define ENABLE_LIBVORBIS_ENCODER 0
+#define ENABLE_MP3_HEADER_COMPRESS_BSF 0
+#define ENABLE_IMX_DUMP_HEADER_BSF 0
+#define ENABLE_DUMP_EXTRADATA_BSF 0
+#define ENABLE_REMOVE_EXTRADATA_BSF 0
+#define ENABLE_NOISE_BSF 0
 #define ENABLE_MP3_HEADER_DECOMPRESS_BSF 0
-#define ENABLE_MJPEGA_DUMP_HEADER_BSF   0
-#define ENABLE_IMX_DUMP_HEADER_BSF      0
-#define ENABLE_ARMV4L      0
-#define ENABLE_MLIB      0
-#define ENABLE_SPARC      0
-#define ENABLE_ALPHA      0
-#include "config.h"
+#define ENABLE_MJPEGA_DUMP_HEADER_BSF 0
+#define ENABLE_IMX_DUMP_HEADER_BSF 0
+#define CONFIG_MUXERS 1
+#define CONFIG_MOV_MUXER 1
+#define CONFIG_MP4_MUXER 1
+#define CONFIG_PSP_MUXER 1
+#define CONFIG_TG2_MUXER 1
+#define CONFIG_TGP_MUXER 1
+#define CONFIG_ENCODERS 1
+#define CONFIG_DVVIDEO_ENCODER 1
+#define CONFIG_SNOW_ENCODER 1
+#define CONFIG_DECODERS 1
+#define CONFIG_DVVIDEO_DECODER 1
+#define CONFIG_H263_DECODER 1
+#define CONFIG_MPEG4_DECODER 1
+#define CONFIG_SNOW_DECODER 1
+#define CONFIG_VC1_DECODER 1
+#define CONFIG_WMV2_DECODER 1
+#define CONFIG_WMV3_DECODER 1
+#define CONFIG_MPEGAUDIO_HP 1
+#define CONFIG_ZLIB 1
+#define ENABLE_ARMV4L 0
+#define ENABLE_MLIB 0
+#define ENABLE_SPARC 0
+#define ENABLE_ALPHA 0
+#define ENABLE_MMI 0
+#define ENABLE_SH4 0
+#define ENABLE_BFIN 0
+#define ENABLE_SMALL 0
 #ifdef ARCH_POWERPC
-#define ENABLE_POWERPC      1
+#define ENABLE_POWERPC 1
 #else
-#define ENABLE_POWERPC      0
+#define ENABLE_POWERPC 0
 #endif
-#define ENABLE_MMI      0
-#define ENABLE_SH4      0
-#define ENABLE_BFIN      0
-#define ENABLE_SMALL      0
-#define CONFIG_SNOW_ENCODER      1
+#ifdef ARCH_X86
+#define ENABLE_MMX 1
+#define HAVE_MMX 1
+#define HAVE_FAST_UNALIGNED 1
+#else
+#define ENABLE_MMX 0
+#endif
+#ifdef ARCH_X86_64
+#define HAVE_FAST_64BIT 1
+#endif
+#ifdef __APPLE__
+#define CONFIG_DARWIN 1
+#endif
+#define ENABLE_THREADS 1
+#define HAVE_LRINTF 1
+#define HAVE_THREADS 1
+#define RUNTIME_CPUDETECT 1

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavformat/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavformat/CMakeLists.txt	2008-03-05 11:49:06 UTC (rev 3825)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavformat/CMakeLists.txt	2008-03-05 14:32:46 UTC (rev 3826)
@@ -1,14 +1,14 @@
-SET(ADM_LIB ADM_lavformat)
-
-SET(${ADM_LIB}_SRCS 
-	mpeg.c utils.c avio.c ADM_lavformat.cpp 
-	aviobuf.c cutils.c img2.c file.c mpegtsenc.c ADM_muxts.cpp movenc.c 
-	avienc.c wav.c mov.c matroska.c isom.c isom.h riff.c
-	flvenc.c matroskaenc.c)
-
-ADD_ADM_LIB_ALL_TARGETS(${ADM_LIB} ${${ADM_LIB}_SRCS})
-ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "-I../ADM_lavcodec -I../ADM_lavutil -DHAVE_AV_CONFIG_H")
-
-INCLUDE(admLibavcodec)
-GET_LAVC_CFLAGS(LAVC_CFLAGS)
-ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "${LAVC_CFLAGS}")
\ No newline at end of file
+SET(ADM_LIB ADM_lavformat)
+
+SET(${ADM_LIB}_SRCS 
+	mpeg.c utils.c avio.c ADM_lavformat.cpp 
+	aviobuf.c cutils.c img2.c file.c mpegtsenc.c ADM_muxts.cpp movenc.c 
+	avienc.c wav.c mov.c matroska.c isom.c isom.h riff.c
+	flvenc.c matroskaenc.c)
+
+ADD_ADM_LIB_ALL_TARGETS(${ADM_LIB} ${${ADM_LIB}_SRCS})
+ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "-I../ADM_lavcodec -I../ADM_lavutil -DHAVE_AV_CONFIG_H -include ffconf.h")
+
+INCLUDE(admLibFfmpeg)
+GET_FFMPEG_CFLAGS(FFMPEG_CFLAGS)
+ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "${FFMPEG_CFLAGS}")
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavutil/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavutil/CMakeLists.txt	2008-03-05 11:49:06 UTC (rev 3825)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavutil/CMakeLists.txt	2008-03-05 14:32:46 UTC (rev 3826)
@@ -1,12 +1,12 @@
-SET(ADM_LIB ADM_lavutil)
-
-SET(${ADM_LIB}_SRCS 
-	integer.c  intfloat_readwrite.c  mathematics.c  rational.c md5.c crc.c log.c  adler32.c lls.c random.c
-	string.c)
-
-ADD_ADM_LIB_ALL_TARGETS(${ADM_LIB} ${${ADM_LIB}_SRCS})
-ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "-DHAVE_AV_CONFIG_H")
-
-INCLUDE(admLibavcodec)
-GET_LAVC_CFLAGS(LAVC_CFLAGS)
-ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "${LAVC_CFLAGS}")
\ No newline at end of file
+SET(ADM_LIB ADM_lavutil)
+
+SET(${ADM_LIB}_SRCS 
+	integer.c  intfloat_readwrite.c  mathematics.c  rational.c md5.c crc.c log.c  adler32.c lls.c random.c
+	string.c)
+
+ADD_ADM_LIB_ALL_TARGETS(${ADM_LIB} ${${ADM_LIB}_SRCS})
+ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "-DHAVE_AV_CONFIG_H -include ffconf.h")
+
+INCLUDE(admLibFfmpeg)
+GET_FFMPEG_CFLAGS(FFMPEG_CFLAGS)
+ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "${FFMPEG_CFLAGS}")
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavutil/internal.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavutil/internal.h	2008-03-05 11:49:06 UTC (rev 3825)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavutil/internal.h	2008-03-05 14:32:46 UTC (rev 3826)
@@ -1,39 +1,39 @@
-/*
- * copyright (c) 2006 Michael Niedermayer <michaelni at gmx.at>
- *
- * This file is part of FFmpeg.
- *
- * FFmpeg is free software; you can redistribute it and/or
- * modify it under the terms of the GNU Lesser General Public
- * License as published by the Free Software Foundation; either
- * version 2.1 of the License, or (at your option) any later version.
- *
- * FFmpeg is distributed in the hope that it will be useful,
- * but WITHOUT ANY WARRANTY; without even the implied warranty of
- * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
- * Lesser General Public License for more details.
- *
- * You should have received a copy of the GNU Lesser General Public
- * License along with FFmpeg; if not, write to the Free Software
- * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
- */
-
-/**
- * @file internal.h
- * common internal api header.
- */
-
-#ifndef INTERNAL_H
-#define INTERNAL_H
-
-#if !defined(DEBUG) && !defined(NDEBUG)
-#    define NDEBUG
-#endif
-
-#include <stdint.h>
-#include <stddef.h>
-#include <assert.h>
-
+/*
+ * copyright (c) 2006 Michael Niedermayer <michaelni at gmx.at>
+ *
+ * This file is part of FFmpeg.
+ *
+ * FFmpeg is free software; you can redistribute it and/or
+ * modify it under the terms of the GNU Lesser General Public
+ * License as published by the Free Software Foundation; either
+ * version 2.1 of the License, or (at your option) any later version.
+ *
+ * FFmpeg is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+ * Lesser General Public License for more details.
+ *
+ * You should have received a copy of the GNU Lesser General Public
+ * License along with FFmpeg; if not, write to the Free Software
+ * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
+ */
+
+/**
+ * @file internal.h
+ * common internal api header.
+ */
+
+#ifndef INTERNAL_H
+#define INTERNAL_H
+
+#if !defined(DEBUG) && !defined(NDEBUG)
+#    define NDEBUG
+#endif
+
+#include <stdint.h>
+#include <stddef.h>
+#include <assert.h>
+
 #ifndef attribute_align_arg
 #if defined(__GNUC__) && (__GNUC__ > 4 || __GNUC__ == 4 && __GNUC_MINOR__ > 1)
 #    define attribute_align_arg __attribute__((force_align_arg_pointer))
@@ -41,234 +41,234 @@
 #    define attribute_align_arg
 #endif
 #endif
-
-#ifndef attribute_used
-#if defined(__GNUC__) && (__GNUC__ > 3 || __GNUC__ == 3 && __GNUC_MINOR__ > 0)
-#    define attribute_used __attribute__((used))
-#else
-#    define attribute_used
-#endif
-#endif
-
-#ifndef M_PI
-#define M_PI    3.14159265358979323846
-#endif
-
-#ifndef INT16_MIN
-#define INT16_MIN       (-0x7fff-1)
-#endif
-
-#ifndef INT16_MAX
-#define INT16_MAX       0x7fff
-#endif
-
-#ifndef INT32_MIN
-#define INT32_MIN       (-0x7fffffff-1)
-#endif
-
-#ifndef INT32_MAX
-#define INT32_MAX       0x7fffffff
-#endif
-
-#ifndef UINT32_MAX
-#define UINT32_MAX      0xffffffff
-#endif
-
-#ifndef INT64_MIN
-#define INT64_MIN       (-0x7fffffffffffffffLL-1)
-#endif
-
-#ifndef INT64_MAX
-#define INT64_MAX INT64_C(9223372036854775807)
-#endif
-
-#ifndef UINT64_MAX
-#define UINT64_MAX UINT64_C(0xFFFFFFFFFFFFFFFF)
-#endif
-
-#ifndef INT_BIT
-#    if INT_MAX != 2147483647
-#        define INT_BIT 64
-#    else
-#        define INT_BIT 32
-#    endif
-#endif
-
-#if ( defined(__PIC__) || defined(__pic__) ) && ! defined(PIC)
-#    define PIC
-#endif
-
-#include "intreadwrite.h"
-#include "bswap.h"
-
-#ifndef offsetof
-#    define offsetof(T,F) ((unsigned int)((char *)&((T *)0)->F))
-#endif
-
-#ifdef USE_FASTMEMCPY
-#    include "libvo/fastmemcpy.h"
-#    define memcpy(a,b,c) fast_memcpy(a,b,c)
-#endif
-
-// Use rip-relative addressing if compiling PIC code on x86-64.
-#if defined(__MINGW32__) || defined(__CYGWIN__) || \
-    defined(__OS2__) || (defined (__OpenBSD__) && !defined(__ELF__))
-#    if defined(ARCH_X86_64) && defined(PIC)
-#        define MANGLE(a) "_" #a"(%%rip)"
-#    else
-#        define MANGLE(a) "_" #a
-#    endif
-#else
-#    if defined(ARCH_X86_64) && defined(PIC)
-#        define MANGLE(a) #a"(%%rip)"
-#    elif defined(CONFIG_DARWIN)
-#        define MANGLE(a) "_" #a
-#    else
-#        define MANGLE(a) #a
-#    endif
-#endif
-
-/* debug stuff */
-
-/* dprintf macros */
-#ifdef DEBUG
-#    define dprintf(pctx, ...) av_log(pctx, AV_LOG_DEBUG, __VA_ARGS__)
-#else
-#    define dprintf(pctx, ...)
-#endif
-
-#define av_abort()      do { av_log(NULL, AV_LOG_ERROR, "Abort at %s:%d\n", __FILE__, __LINE__); abort(); } while (0)
-
-/* math */
-
-extern const uint32_t ff_inverse[256];
-
-#if defined(ARCH_X86)
-#    define FASTDIV(a,b) \
-    ({\
-        int ret,dmy;\
-        asm volatile(\
-            "mull %3"\
-            :"=d"(ret),"=a"(dmy)\
-            :"1"(a),"g"(ff_inverse[b])\
-            );\
-        ret;\
-    })
-#elif defined(ARCH_ARMV4L)
-#    define FASTDIV(a,b) \
-    ({\
-        int ret,dmy;\
-        asm volatile(\
-            "umull %1, %0, %2, %3"\
-            :"=&r"(ret),"=&r"(dmy)\
-            :"r"(a),"r"(ff_inverse[b])\
-            );\
-        ret;\
-    })
-#elif defined(CONFIG_FASTDIV)
-#    define FASTDIV(a,b)   ((uint32_t)((((uint64_t)a)*ff_inverse[b])>>32))
-#else
-#    define FASTDIV(a,b)   ((a)/(b))
-#endif
-
-extern const uint8_t ff_sqrt_tab[128];
-
-static inline int ff_sqrt(int a)
-{
-    int ret=0;
-    int s, b;
-
-    if(a<128) return ff_sqrt_tab[a];
-
-    for(s=30; s>=0; s-=2){
-        ret+=ret;
-        b= (1+2*ret)<<s;
-        if(b<=a){
-            a-=b;
-            ret++;
-        }
-    }
-    return ret;
-}
-
-#if defined(ARCH_X86)
-#define MASK_ABS(mask, level)\
-            asm volatile(\
-                "cdq                    \n\t"\
-                "xorl %1, %0            \n\t"\
-                "subl %1, %0            \n\t"\
-                : "+a" (level), "=&d" (mask)\
-            );
-#else
-#define MASK_ABS(mask, level)\
-            mask= level>>31;\
-            level= (level^mask)-mask;
-#endif
-
-#ifdef HAVE_CMOV
-#define COPY3_IF_LT(x,y,a,b,c,d)\
-asm volatile (\
-    "cmpl %0, %3        \n\t"\
-    "cmovl %3, %0       \n\t"\
-    "cmovl %4, %1       \n\t"\
-    "cmovl %5, %2       \n\t"\
-    : "+&r" (x), "+&r" (a), "+r" (c)\
-    : "r" (y), "r" (b), "r" (d)\
-);
-#else
-#define COPY3_IF_LT(x,y,a,b,c,d)\
-if((y)<(x)){\
-     (x)=(y);\
-     (a)=(b);\
-     (c)=(d);\
-}
-#endif
-
-/* avoid usage of various functions */
-#undef  malloc
-#define malloc please_use_av_malloc
-#undef  free
-#define free please_use_av_free
-#undef  realloc
-#define realloc please_use_av_realloc
-#undef  time
-#define time time_is_forbidden_due_to_security_issues
-#undef  rand
-#define rand rand_is_forbidden_due_to_state_trashing_use_av_random
-#undef  srand
-#define srand srand_is_forbidden_due_to_state_trashing_use_av_init_random
-#undef  random
-#define random random_is_forbidden_due_to_state_trashing_use_av_random
-#undef  sprintf
-#define sprintf sprintf_is_forbidden_due_to_security_issues_use_snprintf
-#undef  strcat
-#define strcat strcat_is_forbidden_due_to_security_issues_use_av_strlcat
-#undef  exit
-#define exit exit_is_forbidden
-#if !(defined(LIBAVFORMAT_BUILD) || defined(FRAMEHOOK_H))
-#undef  printf
-#define printf please_use_av_log
-#undef  fprintf
-#define fprintf please_use_av_log
-#endif
-
-#define CHECKED_ALLOCZ(p, size)\
-{\
-    p= av_mallocz(size);\
-    if(p==NULL && (size)!=0){\
-        perror("malloc");\
-        goto fail;\
-    }\
-}
-
-#ifndef HAVE_LRINTF
-/* XXX: add ISOC specific test to avoid specific BSD testing. */
-/* better than nothing implementation. */
-/* btw, rintf() is existing on fbsd too -- alex */
-static av_always_inline long int lrintf(float x)
-{
-    return (int)(rint(x));
-}
-#endif /* HAVE_LRINTF */
-
-#endif /* INTERNAL_H */
+
+#ifndef attribute_used
+#if defined(__GNUC__) && (__GNUC__ > 3 || __GNUC__ == 3 && __GNUC_MINOR__ > 0)
+#    define attribute_used __attribute__((used))
+#else
+#    define attribute_used
+#endif
+#endif
+
+#ifndef M_PI
+#define M_PI    3.14159265358979323846
+#endif
+
+#ifndef INT16_MIN
+#define INT16_MIN       (-0x7fff-1)
+#endif
+
+#ifndef INT16_MAX
+#define INT16_MAX       0x7fff
+#endif
+
+#ifndef INT32_MIN
+#define INT32_MIN       (-0x7fffffff-1)
+#endif
+
+#ifndef INT32_MAX
+#define INT32_MAX       0x7fffffff
+#endif
+
+#ifndef UINT32_MAX
+#define UINT32_MAX      0xffffffff
+#endif
+
+#ifndef INT64_MIN
+#define INT64_MIN       (-0x7fffffffffffffffLL-1)
+#endif
+
+#ifndef INT64_MAX
+#define INT64_MAX INT64_C(9223372036854775807)
+#endif
+
+#ifndef UINT64_MAX
+#define UINT64_MAX UINT64_C(0xFFFFFFFFFFFFFFFF)
+#endif
+
+#ifndef INT_BIT
+#    if INT_MAX != 2147483647
+#        define INT_BIT 64
+#    else
+#        define INT_BIT 32
+#    endif
+#endif
+
+#if ( defined(__PIC__) || defined(__pic__) ) && ! defined(PIC)
+#    define PIC
+#endif
+
+#include "intreadwrite.h"
+#include "bswap.h"
+
+#ifndef offsetof
+#    define offsetof(T,F) ((unsigned int)((char *)&((T *)0)->F))
+#endif
+
+#ifdef USE_FASTMEMCPY
+#    include "libvo/fastmemcpy.h"
+#    define memcpy(a,b,c) fast_memcpy(a,b,c)
+#endif
+
+// Use rip-relative addressing if compiling PIC code on x86-64.
+#if defined(__MINGW32__) || defined(__CYGWIN__) || \
+    defined(__OS2__) || (defined (__OpenBSD__) && !defined(__ELF__))
+#    if defined(ARCH_X86_64) && defined(PIC)
+#        define MANGLE(a) "_" #a"(%%rip)"
+#    else
+#        define MANGLE(a) "_" #a
+#    endif
+#else
+#    if defined(ARCH_X86_64) && defined(PIC)
+#        define MANGLE(a) #a"(%%rip)"
+#    elif defined(CONFIG_DARWIN)
+#        define MANGLE(a) "_" #a
+#    else
+#        define MANGLE(a) #a
+#    endif
+#endif
+
+/* debug stuff */
+
+/* dprintf macros */
+#ifdef DEBUG
+#    define dprintf(pctx, ...) av_log(pctx, AV_LOG_DEBUG, __VA_ARGS__)
+#else
+#    define dprintf(pctx, ...)
+#endif
+
+#define av_abort()      do { av_log(NULL, AV_LOG_ERROR, "Abort at %s:%d\n", __FILE__, __LINE__); abort(); } while (0)
+
+/* math */
+
+extern const uint32_t ff_inverse[256];
+
+#if defined(ARCH_X86)
+#    define FASTDIV(a,b) \
+    ({\
+        int ret,dmy;\
+        asm volatile(\
+            "mull %3"\
+            :"=d"(ret),"=a"(dmy)\
+            :"1"(a),"g"(ff_inverse[b])\
+            );\
+        ret;\
+    })
+#elif defined(ARCH_ARMV4L)
+#    define FASTDIV(a,b) \
+    ({\
+        int ret,dmy;\
+        asm volatile(\
+            "umull %1, %0, %2, %3"\
+            :"=&r"(ret),"=&r"(dmy)\
+            :"r"(a),"r"(ff_inverse[b])\
+            );\
+        ret;\
+    })
+#elif defined(CONFIG_FASTDIV)
+#    define FASTDIV(a,b)   ((uint32_t)((((uint64_t)a)*ff_inverse[b])>>32))
+#else
+#    define FASTDIV(a,b)   ((a)/(b))
+#endif
+
+extern const uint8_t ff_sqrt_tab[128];
+
+static inline int ff_sqrt(int a)
+{
+    int ret=0;
+    int s, b;
+
+    if(a<128) return ff_sqrt_tab[a];
+
+    for(s=30; s>=0; s-=2){
+        ret+=ret;
+        b= (1+2*ret)<<s;
+        if(b<=a){
+            a-=b;
+            ret++;
+        }
+    }
+    return ret;
+}
+
+#if defined(ARCH_X86)
+#define MASK_ABS(mask, level)\
+            asm volatile(\
+                "cdq                    \n\t"\
+                "xorl %1, %0            \n\t"\
+                "subl %1, %0            \n\t"\
+                : "+a" (level), "=&d" (mask)\
+            );
+#else
+#define MASK_ABS(mask, level)\
+            mask= level>>31;\
+            level= (level^mask)-mask;
+#endif
+
+#ifdef HAVE_CMOV
+#define COPY3_IF_LT(x,y,a,b,c,d)\
+asm volatile (\
+    "cmpl %0, %3        \n\t"\
+    "cmovl %3, %0       \n\t"\
+    "cmovl %4, %1       \n\t"\
+    "cmovl %5, %2       \n\t"\
+    : "+&r" (x), "+&r" (a), "+r" (c)\
+    : "r" (y), "r" (b), "r" (d)\
+);
+#else
+#define COPY3_IF_LT(x,y,a,b,c,d)\
+if((y)<(x)){\
+     (x)=(y);\
+     (a)=(b);\
+     (c)=(d);\
+}
+#endif
+
+/* avoid usage of various functions */
+#undef  malloc
+#define malloc please_use_av_malloc
+#undef  free
+#define free please_use_av_free
+#undef  realloc
+#define realloc please_use_av_realloc
+#undef  time
+#define time time_is_forbidden_due_to_security_issues
+#undef  rand
+#define rand rand_is_forbidden_due_to_state_trashing_use_av_random
+#undef  srand
+#define srand srand_is_forbidden_due_to_state_trashing_use_av_init_random
+#undef  random
+#define random random_is_forbidden_due_to_state_trashing_use_av_random
+#undef  sprintf
+#define sprintf sprintf_is_forbidden_due_to_security_issues_use_snprintf
+#undef  strcat
+#define strcat strcat_is_forbidden_due_to_security_issues_use_av_strlcat
+#undef  exit
+#define exit exit_is_forbidden
+#if !(defined(LIBAVFORMAT_BUILD) || defined(FRAMEHOOK_H))
+#undef  printf
+#define printf please_use_av_log
+#undef  fprintf
+#define fprintf please_use_av_log
+#endif
+
+#define CHECKED_ALLOCZ(p, size)\
+{\
+    p= av_mallocz(size);\
+    if(p==NULL && (size)!=0){\
+        perror("malloc");\
+        goto fail;\
+    }\
+}
+
+#ifndef HAVE_LRINTF
+/* XXX: add ISOC specific test to avoid specific BSD testing. */
+/* better than nothing implementation. */
+/* btw, rintf() is existing on fbsd too -- alex */
+static av_always_inline long int lrintf(float x)
+{
+    return (int)(rint(x));
+}
+#endif /* HAVE_LRINTF */
+
+#endif /* INTERNAL_H */

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libMad/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libMad/CMakeLists.txt	2008-03-05 11:49:06 UTC (rev 3825)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libMad/CMakeLists.txt	2008-03-05 14:32:46 UTC (rev 3826)
@@ -9,4 +9,8 @@
 INCLUDE(admLibMad)
 GET_MAD_CFLAGS(MAD_CFLAGS)
 
-ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} ${MAD_CFLAGS})
\ No newline at end of file
+ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} ${MAD_CFLAGS})
+
+IF (ADM_BIG_ENDIAN)
+    ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "-DWORDS_BIGENDIAN")
+ENDIF (ADM_BIG_ENDIAN)
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libMpeg2Dec/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libMpeg2Dec/CMakeLists.txt	2008-03-05 11:49:06 UTC (rev 3825)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libMpeg2Dec/CMakeLists.txt	2008-03-05 14:32:46 UTC (rev 3826)
@@ -12,7 +12,7 @@
 ELSEIF (ADM_CPU_ALTIVEC)
 	ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "-DARCH_PPC")
 
-	IF (NOT __APPLE__)
+	IF (NOT APPLE)
 		ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "-DHAVE_ALTIVEC_H")
-	ENDIF (NOT __APPLE__)
+	ENDIF (NOT APPLE)
 ENDIF (ADM_CPU_X86)
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_liba52/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_liba52/CMakeLists.txt	2008-03-05 11:49:06 UTC (rev 3825)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_liba52/CMakeLists.txt	2008-03-05 14:32:46 UTC (rev 3826)
@@ -3,4 +3,8 @@
 SET(${ADM_LIB}_SRCS 
 	bit_allocate.c  bitstream.c  downmix.c  imdct.c  parse.c)
 
-ADD_ADM_LIB_ALL_TARGETS(${ADM_LIB} ${${ADM_LIB}_SRCS})
\ No newline at end of file
+ADD_ADM_LIB_ALL_TARGETS(${ADM_LIB} ${${ADM_LIB}_SRCS})
+
+IF (ADM_BIG_ENDIAN)
+    ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "-DWORDS_BIGENDIAN")
+ENDIF (ADM_BIG_ENDIAN)
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libpostproc/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libpostproc/CMakeLists.txt	2008-03-05 11:49:06 UTC (rev 3825)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libpostproc/CMakeLists.txt	2008-03-05 14:32:46 UTC (rev 3826)
@@ -1,15 +1,15 @@
-SET(ADM_LIB ADM_libpostproc)
-
-SET(${ADM_LIB}_SRCS 
-	postprocess.c)
-
-ADD_ADM_LIB_ALL_TARGETS(${ADM_LIB} ${${ADM_LIB}_SRCS})
-ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "-I.. -DHAVE_AV_CONFIG_H  -O3 -I../.. -I../ADM_lavutil -Drestrict=__restrict__ -fomit-frame-pointer")
-
-IF(ADM_CPU_X86_64)
-	ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "-msse")
-ENDIF(ADM_CPU_X86_64)
-
-INCLUDE(admLibavcodec)
-GET_LAVC_CFLAGS(LAVC_CFLAGS)
-ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "${LAVC_CFLAGS}")
\ No newline at end of file
+SET(ADM_LIB ADM_libpostproc)
+
+SET(${ADM_LIB}_SRCS 
+	postprocess.c)
+
+ADD_ADM_LIB_ALL_TARGETS(${ADM_LIB} ${${ADM_LIB}_SRCS})
+ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "-I.. -DHAVE_AV_CONFIG_H  -O3 -I../.. -I../ADM_lavutil -Drestrict=__restrict__ -fomit-frame-pointer -include ffconf.h")
+
+IF(ADM_CPU_X86_64)
+	ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "-msse")
+ENDIF(ADM_CPU_X86_64)
+
+INCLUDE(admLibFfmpeg)
+GET_FFMPEG_CFLAGS(FFMPEG_CFLAGS)
+ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "${FFMPEG_CFLAGS}")
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libswscale/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libswscale/CMakeLists.txt	2008-03-05 11:49:06 UTC (rev 3825)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libswscale/CMakeLists.txt	2008-03-05 14:32:46 UTC (rev 3826)
@@ -6,7 +6,7 @@
 ENDIF (ADM_CPU_ALTIVEC)
 	
 ADD_ADM_LIB_ALL_TARGETS(${ADM_LIB} ${${ADM_LIB}_SRCS})
-ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "-DCONFIG_GPL -fomit-frame-pointer")
+ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "-DCONFIG_GPL -fomit-frame-pointer -include ffconf.h")
 
 IF (APPLE)
 	ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "-DPIC")
@@ -16,6 +16,6 @@
 	ENDIF (ADM_DEBUG)
 ENDIF (APPLE)
 
-INCLUDE(admLibavcodec)
-GET_LAVC_CFLAGS(LAVC_CFLAGS)
-ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "${LAVC_CFLAGS}")
\ No newline at end of file
+INCLUDE(admLibFfmpeg)
+GET_FFMPEG_CFLAGS(FFMPEG_CFLAGS)
+ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "${FFMPEG_CFLAGS}")
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/CMakeLists.txt	2008-03-05 11:49:06 UTC (rev 3825)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/CMakeLists.txt	2008-03-05 14:32:46 UTC (rev 3826)
@@ -7,16 +7,14 @@
 	yuv4mpeg.c          cpu_accel.c)
 
 ADD_ADM_LIB_ALL_TARGETS(${ADM_LIB} ${${ADM_LIB}_SRCS})
-ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "-I${CMAKE_CURRENT_SOURCE_DIR} -DHAVE_FMAX")
+ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "-I${CMAKE_CURRENT_SOURCE_DIR} -DHAVE_FMAX -DRETSIGTYPE=void")
 
 IF (NOT APPLE)
     ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "-DHAVE_MEMALIGN")
 ENDIF (NOT APPLE)
 
 IF (ADM_CPU_X86)
-    ADD_SOURCE_CFLAGS(cpu_accel.c "-DHAVE_X86CPU")
-ENDIF (ADM_CPU_X86)
-
-IF (ADM_CPU_ALTIVEC)
-    ADD_SOURCE_CFLAGS(cpu_accel.c "-DHAVE_ALTIVEC")
-ENDIF (ADM_CPU_ALTIVEC)
\ No newline at end of file
+    ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "-DHAVE_X86CPU")
+ELSEIF (ADM_CPU_ALTIVEC)
+    ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "-DHAVE_ALTIVEC")
+ENDIF (ADM_CPU_X86)
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_cpuCap.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_cpuCap.cpp	2008-03-05 11:49:06 UTC (rev 3825)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_cpuCap.cpp	2008-03-05 14:32:46 UTC (rev 3826)
@@ -99,15 +99,15 @@
  {
      cpuid(1, eax, ebx, ecx, std_caps);
      if (std_caps & (1<<23))
-    	 myCpuCaps |= ADM_CPU_MMX;
+    	 myCpuCaps |= ADM_CPUCAP_MMX;
      if (std_caps & (1<<25))
-    	 myCpuCaps |= ADM_CPU_MMXEXT | ADM_CPU_SSE;
+    	 myCpuCaps |= ADM_CPUCAP_MMXEXT | ADM_CPUCAP_SSE;
      if (std_caps & (1<<26))
-    	 myCpuCaps |= ADM_CPU_SSE2;
+    	 myCpuCaps |= ADM_CPUCAP_SSE2;
      if (ecx & 1)
-    	 myCpuCaps |= ADM_CPU_SSE3;
+    	 myCpuCaps |= ADM_CPUCAP_SSE3;
      if (ecx & 0x00000200 )
-    	 myCpuCaps |= ADM_CPU_SSSE3;
+    	 myCpuCaps |= ADM_CPUCAP_SSSE3;
      
      
      
@@ -119,17 +119,17 @@
  {
      cpuid(0x80000001, eax, ebx, ecx, ext_caps);
      if (ext_caps & (1<<31))
-    	 myCpuCaps |= ADM_CPU_3DNOW;
+    	 myCpuCaps |= ADM_CPUCAP_3DNOW;
      if (ext_caps & (1<<30))
-    	 myCpuCaps |= ADM_CPU_3DNOWEXT;
+    	 myCpuCaps |= ADM_CPUCAP_3DNOWEXT;
      if (ext_caps & (1<<23))
-    	 myCpuCaps |= ADM_CPU_MMX;
+    	 myCpuCaps |= ADM_CPUCAP_MMX;
      if (ext_caps & (1<<22))
-    	 myCpuCaps |= ADM_CPU_MMXEXT;
+    	 myCpuCaps |= ADM_CPUCAP_MMXEXT;
      
  }
-#define CHECK(x) if(myCpuCaps & ADM_CPU_##x) { printf("\t\t"#x" detected ");\
-											if(!(myCpuMask&ADM_CPU_##x)) printf("  but disabled");printf("\n");}
+#define CHECK(x) if(myCpuCaps & ADM_CPUCAP_##x) { printf("\t\t"#x" detected ");\
+											if(!(myCpuMask&ADM_CPUCAP_##x)) printf("  but disabled");printf("\n");}
 	CHECK(MMX);
 	CHECK(3DNOW);
 	CHECK(MMXEXT);
@@ -154,7 +154,7 @@
 
 #ifdef ADM_CPU_X86
 #undef MATCH
-#define MATCH(x,y) if(CpuCaps::myCpuCaps & CpuCaps::myCpuMask & ADM_CPU_##x) rval|=MPEG2_ACCEL_X86_##x;
+#define MATCH(x,y) if(CpuCaps::myCpuCaps & CpuCaps::myCpuMask & ADM_CPUCAP_##x) rval|=MPEG2_ACCEL_X86_##x;
 	
 	MATCH(MMX,MMX);
 	MATCH(MMXEXT,MMXEXT);
@@ -177,7 +177,7 @@
 
 #ifdef ADM_CPU_X86
 #undef MATCH
-#define MATCH(x,y) if(CpuCaps::myCpuCaps &  CpuCaps::myCpuMask & ADM_CPU_##x) rval|=MM_##x;
+#define MATCH(x,y) if(CpuCaps::myCpuCaps &  CpuCaps::myCpuMask & ADM_CPUCAP_##x) rval|=MM_##x;
 
 	MATCH(MMX,MMX);
 	MATCH(MMXEXT,MMXEXT);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_cpuCap.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_cpuCap.h	2008-03-05 11:49:06 UTC (rev 3825)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_cpuCap.h	2008-03-05 14:32:46 UTC (rev 3826)
@@ -11,7 +11,7 @@
 //
 #ifdef ADM_CPU_X86
 
-#define CHECK_Z(x) {if(CpuCaps::myCpuCaps & ADM_CPU_##x & CpuCaps::myCpuMask) return 1; else return 0;} 
+#define CHECK_Z(x) {if(CpuCaps::myCpuCaps & ADM_CPUCAP_##x & CpuCaps::myCpuMask) return 1; else return 0;} 
 
 #else
 #define         CHECK_Z(x) {return 0;}
@@ -19,19 +19,19 @@
 
 typedef enum 
 {
-        ADM_CPU_NONE   =1,
-        ADM_CPU_MMX    =1<<1,
-        ADM_CPU_MMXEXT =1<<2,
-        ADM_CPU_3DNOW  =1<<3,
-        ADM_CPU_3DNOWEXT  =1<<4,
-        ADM_CPU_SSE    =1<<5,
-        ADM_CPU_SSE2   =1<<6,
-		ADM_CPU_SSE3   =1<<7,
-		ADM_CPU_SSSE3  =1<<8,
-        ADM_CPU_ALTIVEC=1<<9,
+        ADM_CPUCAP_NONE   =1,
+        ADM_CPUCAP_MMX    =1<<1,
+        ADM_CPUCAP_MMXEXT =1<<2,
+        ADM_CPUCAP_3DNOW  =1<<3,
+        ADM_CPUCAP_3DNOWEXT  =1<<4,
+        ADM_CPUCAP_SSE    =1<<5,
+        ADM_CPUCAP_SSE2   =1<<6,
+		ADM_CPUCAP_SSE3   =1<<7,
+		ADM_CPUCAP_SSSE3  =1<<8,
+        ADM_CPUCAP_ALTIVEC=1<<9,
         
-        ADM_CPU_ALL=0xffffffff
-} ADM_CPU_CAPS;
+        ADM_CPUCAP_ALL=0xffffffff
+} ADM_CPUCAP;
 
 class CpuCaps
 {

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp	2008-03-05 11:49:06 UTC (rev 3825)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp	2008-03-05 14:32:46 UTC (rev 3826)
@@ -92,9 +92,9 @@
     DOME(4,dring);
      
 // Cpu caps
-#define CPU_CAPS(x)    	if(CpuCaps::myCpuMask & ADM_CPU_##x) caps##x=1; else caps##x=0;
+#define CPU_CAPS(x)    	if(CpuCaps::myCpuMask & ADM_CPUCAP_##x) caps##x=1; else caps##x=0;
     
-    	if(CpuCaps::myCpuMask==ADM_CPU_ALL) capsAll=1; else capsAll=0;
+    	if(CpuCaps::myCpuMask==ADM_CPUCAP_ALL) capsAll=1; else capsAll=0;
     	CPU_CAPS(MMX);
     	CPU_CAPS(MMXEXT);
     	CPU_CAPS(3DNOW);
@@ -422,12 +422,12 @@
         	// cpu caps
         		if(capsAll)
         		{
-        			CpuCaps::myCpuMask=ADM_CPU_ALL;
+        			CpuCaps::myCpuMask=ADM_CPUCAP_ALL;
         		}else
         		{
         			CpuCaps::myCpuMask=0;
 #undef CPU_CAPS
-#define CPU_CAPS(x)    	if(caps##x) CpuCaps::myCpuMask|= ADM_CPU_##x;        	    	
+#define CPU_CAPS(x)    	if(caps##x) CpuCaps::myCpuMask|= ADM_CPUCAP_##x;        	    	
         	    	CPU_CAPS(MMX);
         	    	CPU_CAPS(MMXEXT);
         	    	CPU_CAPS(3DNOW);

Modified: branches/avidemux_2.5_branch_gruntster/cmake/admDetermineSystem.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admDetermineSystem.cmake	2008-03-05 11:49:06 UTC (rev 3825)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admDetermineSystem.cmake	2008-03-05 14:32:46 UTC (rev 3826)
@@ -1,12 +1,13 @@
 # Determine CPU and Operating System for GCC
-#  ADM_BSD_FAMILY        - BSD family operating system was detected
-#  ADM_CPU_64BIT         - 64-bit CPU was detected
-#  ADM_CPU_ALTIVEC       - PowerPC CPU with AltiVec architecture was detected
-#  ADM_CPU_PPC           - PowerPC CPU architecture was detected
-#  ADM_CPU_X86           - x86 CPU architecture was detected
-#  ADM_CPU_X86_32        - x86 32-bit CPU architecture was detected
-#  ADM_CPU_X86_64        - x86 64-bit CPU architecture was detected
-#  CMAKE_WORDS_BIGENDIAN - big endian CPU detected
+#  ADM_BIG_ENDIAN  - big endian CPU detected
+#  ADM_BSD_FAMILY  - BSD family operating system was detected
+#  ADM_CPU_64BIT   - 64-bit CPU was detected
+#  ADM_CPU_ALTIVEC - PowerPC CPU with AltiVec architecture was detected
+#  ADM_CPU_PPC     - PowerPC CPU architecture was detected
+#  ADM_CPU_SSSE3   - x86 CPU with SSSE3 instructions was detected
+#  ADM_CPU_X86     - x86 CPU architecture was detected
+#  ADM_CPU_X86_32  - x86 32-bit CPU architecture was detected
+#  ADM_CPU_X86_64  - x86 64-bit CPU architecture was detected
 
 MACRO (PERFORM_SYSTEM_TEST testFile testName testSupportedVarName)
 	IF (${ARGC} EQUAL 4)
@@ -124,8 +125,22 @@
 	ENDIF (X86_32_SUPPORTED)
 ENDIF (X86_64_SUPPORTED)
 
-TEST_BIG_ENDIAN(CMAKE_WORDS_BIGENDIAN)
+IF (ADM_CPU_X86)
+	PERFORM_SYSTEM_TEST(cpu_ssse3_check.cpp "SSSE3" SSSE3_SUPPORTED)
 
+	IF (SSSE3_SUPPORTED)
+		SET(ADM_CPU_SSSE3)
+	ENDIF (SSSE3_SUPPORTED)
+ENDIF (ADM_CPU_X86)
+
 IF (NOT ADM_CPU_X86_32 AND NOT ADM_CPU_X86_64 AND NOT ADM_CPU_PPC)
 	MESSAGE(FATAL_ERROR "CPU not supported")
-ENDIF (NOT ADM_CPU_X86_32 AND NOT ADM_CPU_X86_64 AND NOT ADM_CPU_PPC)
\ No newline at end of file
+ENDIF (NOT ADM_CPU_X86_32 AND NOT ADM_CPU_X86_64 AND NOT ADM_CPU_PPC)
+
+TEST_BIG_ENDIAN(CMAKE_WORDS_BIGENDIAN)
+
+IF (CMAKE_WORDS_BIGENDIAN)
+	SET(ADM_BIG_ENDIAN 1)
+ENDIF (CMAKE_WORDS_BIGENDIAN)
+
+MESSAGE("")
\ No newline at end of file

Copied: branches/avidemux_2.5_branch_gruntster/cmake/admLibFfmpeg.cmake (from rev 3825, branches/avidemux_2.5_branch_gruntster/cmake/admLibavcodec.cmake)
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admLibavcodec.cmake	2008-03-05 11:49:06 UTC (rev 3825)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admLibFfmpeg.cmake	2008-03-05 14:32:46 UTC (rev 3826)
@@ -0,0 +1,28 @@
+# This is a hack. FFmpeg libraries should have one config file.
+# This will be easier if automake is ever dropped.
+
+MACRO (GET_FFMPEG_CFLAGS varToSet)
+	IF (ADM_CPU_X86_32)
+		SET(${varToSet} "-DARCH_X86 -DARCH_X86_32")
+	ELSEIF (ADM_CPU_X86_64)
+		SET(${varToSet} "-DARCH_X86 -DARCH_X86_64")
+	ELSEIF (ADM_CPU_PPC)
+		SET(${varToSet} "-DARCH_POWERPC")
+
+		IF (ADM_CPU_ALTIVEC)
+			SET(${varToSet} "${${varToSet}} -DHAVE_ALTIVEC")
+
+			IF (NOT APPLE)
+				SET(${varToSet} "${${varToSet}} -DHAVE_ALTIVEC_H")
+			ENDIF (NOT APPLE)
+		ENDIF (ADM_CPU_ALTIVEC)
+	ENDIF (ADM_CPU_X86_32)
+
+	IF (ADM_CPU_SSSE3)
+		SET(${varToSet} "${${varToSet}} -DHAVE_SSSE3")
+	ENDIF (ADM_CPU_SSSE3)
+
+	IF (ADM_BIG_ENDIAN)
+		SET(${varToSet} "${${varToSet}} -DWORDS_BIGENDIAN")
+	ENDIF (ADM_BIG_ENDIAN)
+ENDMACRO (GET_FFMPEG_CFLAGS)
\ No newline at end of file

Deleted: branches/avidemux_2.5_branch_gruntster/cmake/admLibavcodec.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admLibavcodec.cmake	2008-03-05 11:49:06 UTC (rev 3825)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admLibavcodec.cmake	2008-03-05 14:32:46 UTC (rev 3826)
@@ -1,84 +0,0 @@
-# this is a temporary hack. Libavcodec should have it's own config file.
-
-MACRO (SET_LAVC_CONFIG_FLAGS)
-	SET(CONFIG_ENCODERS 1)
-	SET(CONFIG_DVVIDEO_ENCODER 1)
-
-	SET(CONFIG_DECODERS 1)
-	SET(CONFIG_DVVIDEO_DECODER 1)
-	SET(CONFIG_H263_DECODER 1)
-	SET(CONFIG_MPEG4_DECODER 1)
-	SET(CONFIG_MPEGAUDIO_HP 1)
-	SET(CONFIG_SNOW_DECODER 1)
-	SET(CONFIG_VC1_DECODER 1)
-	SET(CONFIG_WMV2_DECODER 1)
-	SET(CONFIG_WMV3_DECODER 1)
-	SET(CONFIG_ZLIB 1)
-
-	SET(CONFIG_MUXERS 1)
-	SET(CONFIG_MOV_MUXER 1)
-	SET(CONFIG_MP4_MUXER 1)
-	SET(CONFIG_PSP_MUXER 1)
-	SET(CONFIG_TG2_MUXER 1)
-	SET(CONFIG_TGP_MUXER 1)
-
-	SET(ENABLE_THREADS 1)
-	SET(HAVE_LRINTF 1)
-	SET(HAVE_THREADS 1)
-	SET(RUNTIME_CPUDETECT 1)
-
-	IF (ADM_CPU_X86)
-		SET(ENABLE_MMX 1)
-		SET(HAVE_MMX 1)
-		SET(HAVE_FAST_UNALIGNED 1)
-
-		IF (ADM_CPU_X86_64)
-			SET(HAVE_FAST_64BIT 1)
-		ENDIF (ADM_CPU_X86_64)
-	ELSE (ADM_CPU_X86)
-		SET(ENABLE_MMX 0)
-	ENDIF (ADM_CPU_X86)
-
-	IF (APPLE)
-		SET(CONFIG_DARWIN 1)
-	ENDIF (APPLE)
-
-	########################################
-	# Check GCC support for SSSE3
-	########################################
-	IF (ADM_CPU_X86)
-		ADM_COMPILE(cpu_ssse3_check.cpp "" "" "" SSSE3_SUPPORTED outputSsse3Test)
-
-		IF (SSSE3_SUPPORTED)
-			SET(HAVE_SSSE3 1)
-
-			MESSAGE(STATUS "Check if GCC supports SSSE3 - Yes")
-		ELSE (SSSE3_SUPPORTED)
-			MESSAGE(STATUS "Check if GCC supports SSSE3 - No")
-
-			IF (VERBOSE)
-				MESSAGE("Error Message: ${outputSsse3Test}")
-			ENDIF (VERBOSE)	
-		ENDIF (SSSE3_SUPPORTED)
-	ENDIF (ADM_CPU_X86)
-
-	MESSAGE("")
-ENDMACRO (SET_LAVC_CONFIG_FLAGS)
-
-MACRO (GET_LAVC_CFLAGS varToSet)
-	IF (ADM_CPU_X86)
-		SET(${varToSet} "-DARCH_X86 -DARCH_X86_32")
-	ELSEIF (ADM_CPU_X86_64)
-		SET(${varToSet} "-DARCH_X86 -DARCH_X86_64")
-	ELSEIF (ADM_CPU_PPC)
-		SET(${varToSet} "-DARCH_POWERPC")
-
-		IF (ADM_CPU_ALTIVEC)
-			SET(${varToSet} "${${varToSet}} -DHAVE_ALTIVEC")
-
-			IF (NOT APPLE)
-				SET(${varToSet} "${${varToSet}} -DHAVE_ALTIVEC_H")
-			ENDIF (NOT APPLE)
-		ENDIF (ADM_CPU_ALTIVEC)
-	ENDIF (ADM_CPU_X86)
-ENDMACRO (GET_LAVC_CFLAGS)
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/cmake/config.h.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/config.h.cmake	2008-03-05 11:49:06 UTC (rev 3825)
+++ branches/avidemux_2.5_branch_gruntster/cmake/config.h.cmake	2008-03-05 14:32:46 UTC (rev 3826)
@@ -4,25 +4,25 @@
 #define ADM_BUILD_GTK 2
 #define ADM_BUILD_QT4 3
 
+// GCC - CPU
+#cmakedefine ADM_BIG_ENDIAN
 #cmakedefine ADM_CPU_64BIT
 #cmakedefine ADM_CPU_ALTIVEC
 #cmakedefine ADM_CPU_PPC
+#cmakedefine ADM_CPU_SSSE3
 #cmakedefine ADM_CPU_X86
 #cmakedefine ADM_CPU_X86_32
 #cmakedefine ADM_CPU_X86_64
 
+// GCC - Operating System
+#cmakedefine ADM_BSD_FAMILY
+
 /* Jog Shuttle */
 #cmakedefine USE_JOG
 
-/* Big endian CPU */
-#cmakedefine ADM_BIG_ENDIAN
-
 #define PACKAGE   "avidemux"
 #define ADMLOCALE "${ADM_LOCALE}"
 
-/* BSD OS specific ifdef */
-#cmakedefine ADM_BSD_FAMILY
-
 #cmakedefine HAVE_AUDIO
 
 #if ${CONFIG_HEADER_TYPE} == ADM_BUILD_GTK || ${CONFIG_HEADER_TYPE} == ADM_BUILD_QT4
@@ -33,40 +33,6 @@
 /* AMR_NB */
 #cmakedefine AMR_NB
 
-/* FFMPEG */
-#cmakedefine CONFIG_ENCODERS
-#cmakedefine CONFIG_DVVIDEO_ENCODER
-
-#cmakedefine CONFIG_DECODERS
-#cmakedefine CONFIG_DVVIDEO_DECODER
-#cmakedefine CONFIG_H263_DECODER
-#cmakedefine CONFIG_MPEG4_DECODER
-#cmakedefine CONFIG_MPEGAUDIO_HP
-#cmakedefine CONFIG_SNOW_DECODER
-#cmakedefine CONFIG_VC1_DECODER
-#cmakedefine CONFIG_WMV2_DECODER
-#cmakedefine CONFIG_WMV3_DECODER
-#cmakedefine CONFIG_ZLIB
-
-#cmakedefine CONFIG_MUXERS
-#cmakedefine CONFIG_MOV_MUXER
-#cmakedefine CONFIG_MP4_MUXER
-#cmakedefine CONFIG_PSP_MUXER
-#cmakedefine CONFIG_TG2_MUXER
-#cmakedefine CONFIG_TGP_MUXER
-
-#define ENABLE_MMX ${ENABLE_MMX}
-#define ENABLE_THREADS ${ENABLE_THREADS}
-#cmakedefine HAVE_FAST_UNALIGNED
-#cmakedefine HAVE_LRINTF
-#cmakedefine HAVE_MMX
-#cmakedefine HAVE_THREADS
-#cmakedefine RUNTIME_CPUDETECT
-
-#cmakedefine HAVE_FAST_64BIT
-#cmakedefine HAVE_SSSE3
-#cmakedefine CONFIG_DARWIN
-
 /* FontConfig detected */
 #cmakedefine HAVE_FONTCONFIG
 
@@ -192,9 +158,6 @@
 /* Version number of package */
 #define VERSION "${VERSION}"
 
-/* Big endian CPU */
-#cmakedefine WORDS_BIGENDIAN
-
 /* use Nvwa memory leak detector */
 #cmakedefine FIND_LEAKS
 



From gruntster at mail.berlios.de  Wed Mar  5 16:32:49 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Wed, 5 Mar 2008 16:32:49 +0100
Subject: [Avidemux-svn-commit] r3827 - in
	branches/avidemux_2.5_branch_gruntster: cmake cmake_compile_check
Message-ID: <200803051532.m25FWnF1008522@sheep.berlios.de>

Author: gruntster
Date: 2008-03-05 16:32:46 +0100 (Wed, 05 Mar 2008)
New Revision: 3827

Added:
   branches/avidemux_2.5_branch_gruntster/cmake_compile_check/cpu_dcbzl_check.cpp
Modified:
   branches/avidemux_2.5_branch_gruntster/cmake/admDetermineSystem.cmake
   branches/avidemux_2.5_branch_gruntster/cmake/admLibFfmpeg.cmake
   branches/avidemux_2.5_branch_gruntster/cmake/config.h.cmake
Log:
[CMake] detect dcbzl instruction on PowerPC for FFmpeg

Modified: branches/avidemux_2.5_branch_gruntster/cmake/admDetermineSystem.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admDetermineSystem.cmake	2008-03-05 14:32:46 UTC (rev 3826)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admDetermineSystem.cmake	2008-03-05 15:32:46 UTC (rev 3827)
@@ -3,6 +3,7 @@
 #  ADM_BSD_FAMILY  - BSD family operating system was detected
 #  ADM_CPU_64BIT   - 64-bit CPU was detected
 #  ADM_CPU_ALTIVEC - PowerPC CPU with AltiVec architecture was detected
+#  ADM_CPU_DCBZL   - PowerPC CPU with dcbzl instruction was detected
 #  ADM_CPU_PPC     - PowerPC CPU architecture was detected
 #  ADM_CPU_SSSE3   - x86 CPU with SSSE3 instructions was detected
 #  ADM_CPU_X86     - x86 CPU architecture was detected
@@ -109,24 +110,29 @@
 
 		IF (POWERPC_SUPPORTED)
 			SET(ADM_CPU_PPC 1)
-
 			SET(ADM_ALTIVEC_FLAGS "-mabi=altivec -maltivec")
 
 			IF (APPLE)
 				SET(ADM_ALTIVEC_FLAGS "${ADM_ALTIVEC_FLAGS} -faltivec")
 			ENDIF (APPLE)
 
-			PERFORM_SYSTEM_TEST(cpu_altivec_check.cpp "AltiVec" ALTIVEC_SUPPORTED "${ADM_ALTIVEC_FLAGS}")
+			PERFORM_SYSTEM_TEST(cpu_altivec_check.cpp "AltiVec capable" ALTIVEC_SUPPORTED "${ADM_ALTIVEC_FLAGS}")
 
 			IF (ALTIVEC_SUPPORTED)
 				SET(ADM_CPU_ALTIVEC 1)
 			ENDIF (ALTIVEC_SUPPORTED)
+
+			PERFORM_SYSTEM_TEST(cpu_dcbzl_check.cpp "dcbzl capable" DCBZL_SUPPORTED)
+
+			IF (DCBZL_SUPPORTED)
+				SET(ADM_CPU_DCBZL 1)
+			ENDIF (DCBZL_SUPPORTED)
 		ENDIF (POWERPC_SUPPORTED)
 	ENDIF (X86_32_SUPPORTED)
 ENDIF (X86_64_SUPPORTED)
 
 IF (ADM_CPU_X86)
-	PERFORM_SYSTEM_TEST(cpu_ssse3_check.cpp "SSSE3" SSSE3_SUPPORTED)
+	PERFORM_SYSTEM_TEST(cpu_ssse3_check.cpp "SSSE3 capable" SSSE3_SUPPORTED)
 
 	IF (SSSE3_SUPPORTED)
 		SET(ADM_CPU_SSSE3)

Modified: branches/avidemux_2.5_branch_gruntster/cmake/admLibFfmpeg.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admLibFfmpeg.cmake	2008-03-05 14:32:46 UTC (rev 3826)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admLibFfmpeg.cmake	2008-03-05 15:32:46 UTC (rev 3827)
@@ -16,13 +16,17 @@
 				SET(${varToSet} "${${varToSet}} -DHAVE_ALTIVEC_H")
 			ENDIF (NOT APPLE)
 		ENDIF (ADM_CPU_ALTIVEC)
+
+		IF (ADM_CPU_DCBZL)
+			SET(${varToSet} "${${varToSet}} -DHAVE_DCBZL")
+		ENDIF (ADM_CPU_DCBZL)
 	ENDIF (ADM_CPU_X86_32)
 
 	IF (ADM_CPU_SSSE3)
 		SET(${varToSet} "${${varToSet}} -DHAVE_SSSE3")
 	ENDIF (ADM_CPU_SSSE3)
 
-	IF (ADM_BIG_ENDIAN)
-		SET(${varToSet} "${${varToSet}} -DWORDS_BIGENDIAN")
+	IF (ADM_BIG_ENDIAN)
+		SET(${varToSet} "${${varToSet}} -DWORDS_BIGENDIAN")
 	ENDIF (ADM_BIG_ENDIAN)
 ENDMACRO (GET_FFMPEG_CFLAGS)
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/cmake/config.h.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/config.h.cmake	2008-03-05 14:32:46 UTC (rev 3826)
+++ branches/avidemux_2.5_branch_gruntster/cmake/config.h.cmake	2008-03-05 15:32:46 UTC (rev 3827)
@@ -8,6 +8,7 @@
 #cmakedefine ADM_BIG_ENDIAN
 #cmakedefine ADM_CPU_64BIT
 #cmakedefine ADM_CPU_ALTIVEC
+#cmakedefine ADM_CPU_DCBZL
 #cmakedefine ADM_CPU_PPC
 #cmakedefine ADM_CPU_SSSE3
 #cmakedefine ADM_CPU_X86

Added: branches/avidemux_2.5_branch_gruntster/cmake_compile_check/cpu_dcbzl_check.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake_compile_check/cpu_dcbzl_check.cpp	2008-03-05 14:32:46 UTC (rev 3826)
+++ branches/avidemux_2.5_branch_gruntster/cmake_compile_check/cpu_dcbzl_check.cpp	2008-03-05 15:32:46 UTC (rev 3827)
@@ -0,0 +1,9 @@
+int main(void)
+{
+	register long zero = 0;
+	char data[1024];
+
+	asm volatile("dcbzl %0, %1" : : "b" (data), "r" (zero));
+
+	return 0;
+}
\ No newline at end of file



From gruntster at mail.berlios.de  Wed Mar  5 19:51:53 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Wed, 5 Mar 2008 19:51:53 +0100
Subject: [Avidemux-svn-commit] r3828 - in
	branches/avidemux_2.5_branch_gruntster:
	avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk cmake
Message-ID: <200803051851.m25Ipr0Y026583@sheep.berlios.de>

Author: gruntster
Date: 2008-03-05 19:51:49 +0100 (Wed, 05 Mar 2008)
New Revision: 3828

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/eggtrayicon.c
   branches/avidemux_2.5_branch_gruntster/cmake/admCheckUserInterfaceLibs.cmake
   branches/avidemux_2.5_branch_gruntster/cmake/config.h.cmake
Log:
[CMake] detect GTK+ X11 and disable system tray support when needed

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/eggtrayicon.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/eggtrayicon.c	2008-03-05 15:32:46 UTC (rev 3827)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/eggtrayicon.c	2008-03-05 18:51:49 UTC (rev 3828)
@@ -18,8 +18,16 @@
  * Boston, MA 02111-1307, USA.
  */
 #include "config.h"
+
 #ifndef __WIN32
+#ifndef HAVE_GTK_X11
+#include <gtk/gtk.h>
 
+void *adm_new_systray(GdkPixbuf *pixbufA[], int nb, char *name) {}
+void adm_delete_systray(void *systray) {}
+void adm_change_tooltip(void *systray, const char *tips) {}
+void adm_changeIcon_systray(void) {}
+#else
 #include <gtk/gtk.h>
 #include <gtk/gtkversion.h>
 
@@ -508,6 +516,5 @@
   	gtk_image_set_from_pixbuf( GTK_IMAGE(img), GDK_PIXBUF(cur));
 
 }
-#endif   /* not defined GUI_DISABLE_SYSTRAY */
-
-
+#endif	// HAVE_GTK_X11
+#endif	// __WIN32

Modified: branches/avidemux_2.5_branch_gruntster/cmake/admCheckUserInterfaceLibs.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admCheckUserInterfaceLibs.cmake	2008-03-05 15:32:46 UTC (rev 3827)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admCheckUserInterfaceLibs.cmake	2008-03-05 18:51:49 UTC (rev 3828)
@@ -21,9 +21,23 @@
 	PKG_CHECK_MODULES(GTK gtk+-2.0)
 	PRINT_LIBRARY_INFO("GTK+" GTK_FOUND "${GTK_CFLAGS}" "${GTK_LDFLAGS}")
 
-	IF (NOT GTK_FOUND)
+	IF (GTK_FOUND)
+		ADM_COMPILE(gtk_x11_check.cpp "${GTK_CFLAGS}" "" "${GTK_LDFLAGS}" GTK_X11_SUPPORTED outputGtkX11Test)
+
+		IF (GTK_X11_SUPPORTED)
+			SET(HAVE_GTK_X11 1)
+
+			MESSAGE(STATUS "GTK+ uses X11")
+		ELSE (GTK_X11_SUPPORTED)
+			MESSAGE(STATUS "GTK+ doesn't use X11")
+
+			IF (VERBOSE)
+				MESSAGE("Error Message: ${outputGtkX11Test}")
+			ENDIF (VERBOSE)
+		ENDIF (GTK_X11_SUPPORTED)
+	ELSE (GTK_FOUND)
 		SET(ADM_UI_GTK 0)
-	ENDIF (NOT GTK_FOUND)
+	ENDIF (GTK_FOUND)
 ELSE (GTK)
 	SET(ADM_UI_GTK 0)
 	MESSAGE("${MSG_DISABLE_OPTION}")

Modified: branches/avidemux_2.5_branch_gruntster/cmake/config.h.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/config.h.cmake	2008-03-05 15:32:46 UTC (rev 3827)
+++ branches/avidemux_2.5_branch_gruntster/cmake/config.h.cmake	2008-03-05 18:51:49 UTC (rev 3828)
@@ -45,6 +45,9 @@
 /* Define to 1 if you have the `gettimeofday' function. */
 #cmakedefine HAVE_GETTIMEOFDAY
 
+// GTK+ uses X11 framework
+#cmakedefine HAVE_GTK_X11
+
 /* Define to 1 if you have the <inttypes.h> header file. */
 #cmakedefine HAVE_INTTYPES_H
 



From gruntster at mail.berlios.de  Wed Mar  5 19:53:20 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Wed, 5 Mar 2008 19:53:20 +0100
Subject: [Avidemux-svn-commit] r3829 -
	branches/avidemux_2.5_branch_gruntster/cmake_compile_check
Message-ID: <200803051853.m25IrK9U026673@sheep.berlios.de>

Author: gruntster
Date: 2008-03-05 19:53:18 +0100 (Wed, 05 Mar 2008)
New Revision: 3829

Added:
   branches/avidemux_2.5_branch_gruntster/cmake_compile_check/gtk_x11_check.cpp
Log:
[CMake] add missing file

Added: branches/avidemux_2.5_branch_gruntster/cmake_compile_check/gtk_x11_check.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake_compile_check/gtk_x11_check.cpp	2008-03-05 18:51:49 UTC (rev 3828)
+++ branches/avidemux_2.5_branch_gruntster/cmake_compile_check/gtk_x11_check.cpp	2008-03-05 18:53:18 UTC (rev 3829)
@@ -0,0 +1,8 @@
+#include <gdk/gdkx.h>
+
+int main(void)
+{
+	gdk_x11_lookup_xdisplay(NULL);
+
+	return 0;
+}



From gruntster at mail.berlios.de  Wed Mar  5 20:22:41 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Wed, 5 Mar 2008 20:22:41 +0100
Subject: [Avidemux-svn-commit] r3830 - in
	branches/avidemux_2.5_branch_gruntster/avidemux: .
	ADM_audiofilter ADM_inputs/ADM_avsproxy
	ADM_inputs/ADM_matroska ADM_inputs/ADM_mp4
	ADM_libraries/ADM_libmpeg2enc ADM_libraries/ADM_mplex
	ADM_libraries/ADM_utilities ADM_outputs/oplug_avi ADM_script
	ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk ADM_videoFilter
Message-ID: <200803051922.m25JMfZi030280@sheep.berlios.de>

Author: gruntster
Date: 2008-03-05 20:22:27 +0100 (Wed, 05 Mar 2008)
New Revision: 3830

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiofilter_mixer.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_avsproxy/ADM_avsproxy_net.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_matroska/ADM_mkvIndexer.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mp4/ADM_mp4Analyzer.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/cpu_accel.cc
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/motionest.cc
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mplexmuxer.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/inputstrm.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/multiplexor.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/padstrm.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_imageLoader.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_aviwrite.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/DirectorySearch.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/DirectorySearch.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/mediactrl.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_guiResize.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDecDec.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidPulldown.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/gui_action.cpp
Log:
[Merge] integrate changes from 2.4 branch (r3821)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiofilter_mixer.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiofilter_mixer.cpp	2008-03-05 18:53:18 UTC (rev 3829)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiofilter_mixer.cpp	2008-03-05 19:22:27 UTC (rev 3830)
@@ -551,7 +551,6 @@
 
     uint32_t rd = 0;
     uint8_t *in,*out;
-    uint32_t window;
     int nbSampleMax=max/_wavHeader.channels;
     uint8_t input_channels = _previous->getInfo()->channels;
 
@@ -565,7 +564,7 @@
       {
         memset(&_incomingBuffer[_head],0,sizeof(float) * input_channels);
         _tail=_head+input_channels;
-        printf("[Mixer] Warning asked %u symbols, a window is %u symbols\n",max,window);
+        printf("[Mixer] Warning asked %u symbols\n",max);
       }
       else
       {

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_avsproxy/ADM_avsproxy_net.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_avsproxy/ADM_avsproxy_net.cpp	2008-03-05 18:53:18 UTC (rev 3829)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_avsproxy/ADM_avsproxy_net.cpp	2008-03-05 19:22:27 UTC (rev 3830)
@@ -162,7 +162,6 @@
 uint8_t avsHeader::sendData(uint32_t cmd,uint32_t frame, uint32_t payload_size,uint8_t *payload)
 {
         SktHeader header;
-        int rx;
         memset(&header,0,sizeof(header));
 
         header.cmd=cmd;
@@ -171,7 +170,7 @@
         header.magic=(uint32_t)MAGGIC;
         if(!txData(sizeof(header),(uint8_t *)&header))
         {
-            printf("Error in senddata: header %d/%d\n",rx,sizeof(header));
+            printf("Error in senddata: header %d\n",sizeof(header));
             return 0;
         }
         int togo=payload_size;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_matroska/ADM_mkvIndexer.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_matroska/ADM_mkvIndexer.cpp	2008-03-05 18:53:18 UTC (rev 3829)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_matroska/ADM_mkvIndexer.cpp	2008-03-05 19:22:27 UTC (rev 3830)
@@ -127,7 +127,7 @@
 */
 uint8_t mkvHeader::indexBlock(ADM_ebml_file *parser,uint32_t len,uint32_t clusterTimeCodeMs)
 {
-  int lacing,nbLaces,entryFlags;
+  int lacing,nbLaces,entryFlags=0;
   //
   uint64_t tail=parser->tell()+len;
   // Read Track id 
@@ -147,6 +147,7 @@
       uint8_t flags=parser->readu8();
       uint32_t remaining=tail-parser->tell();
       lacing=((flags>>1)&3);
+        // entryFlags ???
       //if(track) printf("This round %lld total:%lld\n",tail-parser->tell(),    _tracks[track]._sizeInBytes);
       switch(lacing)
       {

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mp4/ADM_mp4Analyzer.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mp4/ADM_mp4Analyzer.cpp	2008-03-05 18:53:18 UTC (rev 3829)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mp4/ADM_mp4Analyzer.cpp	2008-03-05 19:22:27 UTC (rev 3830)
@@ -640,7 +640,8 @@
         
                                             offset=8+len;
                                             printf("\navcC numOfPictureParSets  :%x\n", MKD8(offset++));
-                                            len=MKD16(offset++);
+                                            len=MKD16(offset);
+                                            offset++;
                                             printf("avcC Pic len              :%x\n",len);
                                             mixDump(VDEO.extraData+offset,len);
                                             left=0;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/cpu_accel.cc
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/cpu_accel.cc	2008-03-05 18:53:18 UTC (rev 3829)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/cpu_accel.cc	2008-03-05 19:22:27 UTC (rev 3830)
@@ -46,7 +46,7 @@
 {
    int32_t eax, ebx, ecx, edx;
    int32_t AMD;
-   int32_t caps;
+   int32_t caps=0;
 
    if(CpuCaps::hasMMX()) caps |=ACCEL_X86_MMX;
    if(CpuCaps::hasMMXEXT()) caps |=ACCEL_X86_MMXEXT;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/motionest.cc
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/motionest.cc	2008-03-05 18:53:18 UTC (rev 3829)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/motionest.cc	2008-03-05 19:22:27 UTC (rev 3830)
@@ -2048,7 +2048,7 @@
 			16);            /* block height */
 
 	bestdp_mc->pos.x = imindmv;
-	bestdp_mc->pos.x = jmindmv;
+	bestdp_mc->pos.y = jmindmv; // Meanx : Jw patch,  Seems logical but not sure
 	*vmcp = vmc_dp;
 }
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mplexmuxer.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mplexmuxer.cpp	2008-03-05 18:53:18 UTC (rev 3829)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mplexmuxer.cpp	2008-03-05 19:22:27 UTC (rev 3830)
@@ -289,7 +289,7 @@
                                 
                                 *(ptr+0)=(hh<<2)+(mm>>4);
                                 *(ptr+1)=((mm&0xf)<<4)+8+(ss>>3);
-                                *(ptr+2)= ((ss&7)<<5)+(ff>>1);
+                                *(ptr+2)= ((ss&7)<<5)+(ms>>1);
                                 *(ptr+3)&=0x7f;
                                 *(ptr+3)+=(ms&1) <<7;
                                 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/inputstrm.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/inputstrm.cpp	2008-03-05 18:53:18 UTC (rev 3829)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/inputstrm.cpp	2008-03-05 19:22:27 UTC (rev 3830)
@@ -23,6 +23,7 @@
 
 #include <config.h>
 #include <assert.h>
+#include <limits.h>
 
 #include "mjpeg_types.h"
 #include "inputstrm.hpp"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/multiplexor.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/multiplexor.cpp	2008-03-05 18:53:18 UTC (rev 3829)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/multiplexor.cpp	2008-03-05 19:22:27 UTC (rev 3830)
@@ -22,6 +22,7 @@
 #include <config.h>
 #include <math.h>
 #include <stdlib.h>
+#include <string.h>
 
 #include <mjpeg_types.h>
 #include <mjpeg_logging.h>

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/padstrm.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/padstrm.cpp	2008-03-05 18:53:18 UTC (rev 3829)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/padstrm.cpp	2008-03-05 19:22:27 UTC (rev 3830)
@@ -23,6 +23,7 @@
 #ifdef HAVE_CONFIG_H
 #include "config.h"
 #endif
+#include <string.h>
 
 #include "padstrm.hpp"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_imageLoader.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_imageLoader.cpp	2008-03-05 18:53:18 UTC (rev 3829)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_imageLoader.cpp	2008-03-05 19:22:27 UTC (rev 3830)
@@ -359,7 +359,7 @@
 			uint32_t *fcc;
 		    uint8_t fcc_tab[4];
 		    FILE *fd;
-		    uint32_t off,tag,count,size;
+		    uint32_t off,tag=0,count,size;
 
 		    // 1- identity the file type
 		    //

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_aviwrite.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_aviwrite.cpp	2008-03-05 18:53:18 UTC (rev 3829)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_aviwrite.cpp	2008-03-05 19:22:27 UTC (rev 3830)
@@ -359,6 +359,17 @@
 		extraLen=4;
 		}
 		break;
+#if 1		
+	case WAV_DTS:
+	case WAV_AC3: // Vista compatibility
+		 		  extra=(uint8_t *)wmaheader;
+		 		  extra[0]=0;
+		 		  extra[1]=0;
+				  extraLen=2;
+				  header->dwScale = 1;  
+				  wav.blockalign=1;	
+			break;
+#endif			
 	case WAV_MP3:							
 		  // then update VBR fields
 		  mp3vbr.cbsize = R16(12);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/DirectorySearch.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/DirectorySearch.cpp	2008-03-05 18:53:18 UTC (rev 3829)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/DirectorySearch.cpp	2008-03-05 19:22:27 UTC (rev 3830)
@@ -7,6 +7,7 @@
 Note:  This file is available under a BSD license.  Contact the author
 at amistry at am-productions.biz
 */
+#include <string.h>
 #include "config.h"
 #include "DirectorySearch.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/DirectorySearch.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/DirectorySearch.h	2008-03-05 18:53:18 UTC (rev 3829)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/DirectorySearch.h	2008-03-05 19:22:27 UTC (rev 3830)
@@ -21,6 +21,7 @@
 #include <sys/types.h>
 #include <sys/stat.h>
 #include <dirent.h>
+#include <string.h>
 #endif
 #include "StdFile.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp	2008-03-05 18:53:18 UTC (rev 3829)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp	2008-03-05 19:22:27 UTC (rev 3830)
@@ -414,7 +414,7 @@
 
         if(rw)
         {
-                        dialog=dialog = gtk_file_chooser_dialog_new ("Save",
+                        dialog = gtk_file_chooser_dialog_new ("Save",
                                       NULL,
                                       GTK_FILE_CHOOSER_ACTION_SAVE,
                                       GTK_STOCK_CANCEL, GTK_RESPONSE_CANCEL,
@@ -424,7 +424,7 @@
         }
         else
         {
-          dialog=dialog = gtk_file_chooser_dialog_new ("Open File",
+          dialog = gtk_file_chooser_dialog_new ("Open File",
                                       NULL,
                                       GTK_FILE_CHOOSER_ACTION_OPEN,
                                       GTK_STOCK_CANCEL, GTK_RESPONSE_CANCEL,

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/mediactrl.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/mediactrl.c	2008-03-05 18:53:18 UTC (rev 3829)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/mediactrl.c	2008-03-05 19:22:27 UTC (rev 3830)
@@ -35,7 +35,17 @@
 #include <string.h>
 #include <errno.h>
 #include <linux/input.h>
+#include <linux/version.h>
 
+#if LINUX_VERSION_CODE < KERNEL_VERSION(2,6,0)
+struct input_id {
+        __u16 bustype;
+        __u16 vendor;
+        __u16 product;
+        __u16 version;
+};
+#endif
+
 #include "mediactrl.h"
 
 static char *_shuttle_name = "Shuttle";

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_guiResize.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_guiResize.cpp	2008-03-05 18:53:18 UTC (rev 3829)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_guiResize.cpp	2008-03-05 19:22:27 UTC (rev 3830)
@@ -41,7 +41,7 @@
 #include "ADM_assert.h"
 
 
-static int getResizeParams(uint32_t * w, uint32_t * h, uint32_t * algo,uint32_t w,uint32_t h,uint32_t fps);
+static int getResizeParams(uint32_t * w, uint32_t * h, uint32_t * algo,uint32_t ow,uint32_t oh,uint32_t fps);
 
 
 extern uint8_t DIA_resize(uint32_t *width,uint32_t *height,uint32_t *algo,uint32_t originalw, uint32_t originalh,uint32_t fps1000);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDecDec.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDecDec.cpp	2008-03-05 18:53:18 UTC (rev 3829)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDecDec.cpp	2008-03-05 19:22:27 UTC (rev 3830)
@@ -912,6 +912,7 @@
 		//return src;
 		//memcpy(data,src,*len);
 
+                GETFRAME(useframe, src); // MEANX : not sure (jw detected a problem here)
 		data->duplicate(src);
 		vidCache->unlockAll();		
 		return 1; // return src;			

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidPulldown.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidPulldown.cpp	2008-03-05 18:53:18 UTC (rev 3829)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidPulldown.cpp	2008-03-05 19:22:27 UTC (rev 3830)
@@ -131,7 +131,7 @@
 		uint32_t dflags,dlen;
 #define GET_FRAME(x,y) if(!_in->getFrameNumberNoAlloc(x, &dlen,_uncompressed[y],&dflags)) \
  {\
-				 	 	printf("Cannot get frame %lu\n",target+i);\
+				 	 	printf("Cannot get frame %lu\n",x);\
 					 	return 0;     \
 				 }
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/gui_action.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/gui_action.cpp	2008-03-05 18:53:18 UTC (rev 3829)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/gui_action.cpp	2008-03-05 19:22:27 UTC (rev 3830)
@@ -1,4 +1,5 @@
 #include <stdio.h>
+#include <strings.h>
 #include <vector>
 using std::vector;
 #include <utility>



From gruntster at mail.berlios.de  Thu Mar  6 00:02:16 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Thu, 6 Mar 2008 00:02:16 +0100
Subject: [Avidemux-svn-commit] r3831 - in
	branches/avidemux_2.5_branch_mean/avidemux: .
	ADM_core/include ADM_core/src ADM_libraries/ADM_mplex
	ADM_libraries/ADM_utilities ADM_outputs/oplug_avi
	ADM_outputs/oplug_dummy ADM_outputs/oplug_flv
	ADM_outputs/oplug_mp4 ADM_outputs/oplug_mpeg
	ADM_outputs/oplug_mpegFF ADM_toolkit
	ADM_userInterfaces/ADM_GTK/ADM_gui2
Message-ID: <200803052302.m25N2GWO019399@sheep.berlios.de>

Author: gruntster
Date: 2008-03-06 00:01:57 +0100 (Thu, 06 Mar 2008)
New Revision: 3831

Modified:
   branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_assert.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_default.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_misc.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_memsupport.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_threads.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_mplex/ADM_mplexin.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_mplex/ADM_mplexmuxer.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_mplex/ADM_mplexout.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_mplex/ADM_mthread.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_mplex/ADM_transfert.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/avifmt.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_avisave.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_avisavecopy.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_pack.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_unpack.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_avisavedual.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_savesmart.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_toolkit/ADM_audioQueue.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_toolkit/ADM_packetQueue.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_gtkRender.cpp
   branches/avidemux_2.5_branch_mean/avidemux/gui_savenew.cpp
   branches/avidemux_2.5_branch_mean/avidemux/main.cpp
Log:
[Win32] fix compilation

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_assert.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_assert.h	2008-03-05 19:22:27 UTC (rev 3830)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_assert.h	2008-03-05 23:01:57 UTC (rev 3831)
@@ -101,6 +101,7 @@
         #define LLX "I64x"
         #define LLU "I64u"
         
+		char *ADM_slashToBackSlash(char *in);
         #define ADM_cleanupPath(x) ADM_slashToBackSlash(x)
 #else
         #define LLX "llx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_default.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_default.h	2008-03-05 19:22:27 UTC (rev 3830)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_default.h	2008-03-05 23:01:57 UTC (rev 3831)
@@ -25,15 +25,14 @@
 #include <stdlib.h>
 #include <string.h>
 
-#include "ADM_inttype.h"              
+#include "ADM_inttype.h"
 #include "ADM_assert.h"
 
 #ifdef __cplusplus
 #include "ADM_cpuCap.h"
 #include "ADM_clock.h"
-#include "ADM_threads.h"
 #include "ADM_misc.h"
 #endif
 
-#include "ADM_mangle.h"                                                        
+#include "ADM_mangle.h"
 #endif

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_misc.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_misc.h	2008-03-05 19:22:27 UTC (rev 3830)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_misc.h	2008-03-05 23:01:57 UTC (rev 3831)
@@ -37,9 +37,9 @@
 // change to lower case in place the string
 void            ADM_LowerCase(char *string);
 
-uint32_t        getTime( int called );;
+uint32_t        getTime( int called );
 uint32_t 	getTimeOfTheDay(void);
-//extern char *slashToBackSlash(char *in);
+
 #ifdef HAVE_GETTIMEOFDAY
 	#define TIMZ struct timezone
 #else

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_memsupport.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_memsupport.cpp	2008-03-05 19:22:27 UTC (rev 3830)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_memsupport.cpp	2008-03-05 23:01:57 UTC (rev 3831)
@@ -24,9 +24,8 @@
  *                                                                         *
  ***************************************************************************/
 #include "ADM_default.h"
+#include "ADM_threads.h"
 
-
-
 #undef memalign
 #undef malloc
 #undef free

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_threads.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_threads.cpp	2008-03-05 19:22:27 UTC (rev 3830)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_threads.cpp	2008-03-05 23:01:57 UTC (rev 3831)
@@ -12,16 +12,14 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include "config.h"
  
 #include <stdio.h>
 #include <stdlib.h>
 #include <string.h>
-#include <ADM_assert.h>
+
 #include "ADM_default.h"
+#include "ADM_threads.h"
 
-
-
 #define THR_CHECK(x) {int r=(x);if(r) {printf("Threading error :%d %s\n", \
                       r,strerror(r));exit(0);}}
 //**************** Mutex *******************

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_mplex/ADM_mplexin.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_mplex/ADM_mplexin.cpp	2008-03-05 19:22:27 UTC (rev 3830)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_mplex/ADM_mplexin.cpp	2008-03-05 23:01:57 UTC (rev 3831)
@@ -9,7 +9,6 @@
 // Copyright: See COPYING file that comes with this distribution
 //
 //
-#include "config.h"
 
 #include <stdio.h>
 #include <stdlib.h>
@@ -25,12 +24,12 @@
 #undef malloc
 #undef realloc
 #undef free
-#include <ADM_assert.h>
 
 #include "ADM_default.h"
+#include "ADM_threads.h"
+
 #include "ADM_toolkit/toolkit.hxx"
 
-
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME MODULE_LAVFORMAT
 #include "ADM_osSupport/ADM_debug.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_mplex/ADM_mplexmuxer.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_mplex/ADM_mplexmuxer.cpp	2008-03-05 19:22:27 UTC (rev 3830)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_mplex/ADM_mplexmuxer.cpp	2008-03-05 23:01:57 UTC (rev 3831)
@@ -21,23 +21,22 @@
  *                                                                         *
  ***************************************************************************/
 
-#include "config.h"
-
 #include <stdio.h>
 #include <stdlib.h>
 #include <math.h>
 #include <string.h>
 #include <sys/stat.h>
-#include <pthread.h>
+
+#include "ADM_default.h"
+#include "ADM_threads.h"
+
 #define WIN32_CLASH
 #include "interact.hpp"
 
 #undef malloc
 #undef realloc
 #undef free
-#include <ADM_assert.h>
 
-#include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 
 #include "ADM_audiofilter/audioprocess.hxx"
@@ -50,7 +49,6 @@
 
 #include "ADM_lavformat/ADM_lavformat.h"
 
-
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME MODULE_LAVFORMAT
 #include "ADM_osSupport/ADM_debug.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_mplex/ADM_mplexout.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_mplex/ADM_mplexout.cpp	2008-03-05 19:22:27 UTC (rev 3830)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_mplex/ADM_mplexout.cpp	2008-03-05 23:01:57 UTC (rev 3831)
@@ -1,5 +1,3 @@
-#include "config.h"
-
 #include <stdio.h>
 #include <stdlib.h>
 #include <math.h>
@@ -11,13 +9,12 @@
 #undef malloc
 #undef realloc
 #undef free
-#include <ADM_assert.h>
 
 #include "ADM_default.h"
+#include "ADM_threads.h"
+
 #include "ADM_toolkit/toolkit.hxx"
 
-
-
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME MODULE_LAVFORMAT
 #include "ADM_osSupport/ADM_debug.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_mplex/ADM_mthread.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_mplex/ADM_mthread.cpp	2008-03-05 19:22:27 UTC (rev 3830)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_mplex/ADM_mthread.cpp	2008-03-05 23:01:57 UTC (rev 3831)
@@ -12,19 +12,18 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include "config.h"
+
 #include <stdio.h>
 #include <stdlib.h>
-
 #include <string.h>
 #include <math.h>
-#include <pthread.h>
+
+#include "ADM_default.h"
+#include "ADM_threads.h"
+
 #define WIN32_CLASH
-#include "ADM_default.h"
 
 #include "ADM_toolkit/toolkit.hxx"
-#include <ADM_assert.h>
-
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_mplex/ADM_transfert.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_mplex/ADM_transfert.cpp	2008-03-05 19:22:27 UTC (rev 3830)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_mplex/ADM_transfert.cpp	2008-03-05 23:01:57 UTC (rev 3831)
@@ -17,15 +17,14 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include "config.h"
- 
+
 #include <stdio.h>
 #include <stdlib.h>
 #include <string.h>
-#include <ADM_assert.h>
+
 #include "ADM_default.h"
+#include "ADM_threads.h"
 
-
 #include"ADM_transfert.h"
 #define HIGH_LVL        ((TRANSFERT_BUFFER*2)/3)
 #define LOW_LVL         (TRANSFERT_BUFFER/3)

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/avifmt.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/avifmt.h	2008-03-05 19:22:27 UTC (rev 3830)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/avifmt.h	2008-03-05 23:01:57 UTC (rev 3831)
@@ -12,8 +12,7 @@
 
 #ifndef NOAVIFMT
 
-#ifndef __WINE_WINDEF_H
-#if !defined( WIN32_CLASH) || !defined(ADM_WIN32)
+#if !defined(__WINE_WINDEF_H) && !defined(_WINDEF_H)
 #define LOBYTE(w)              ((uint8_t)(uint16_t)(w))
 #define HIBYTE(w)              ((uint8_t)((uint16_t)(w) >> 8))
 
@@ -22,8 +21,6 @@
 
 #define MAKELONG(low,high)     ((int32_t)(((uint16_t)(low)) | (((uint32_t)((uint16_t)(high))) << 16)))
 
-
-
 typedef struct __attribute__((__packed__))
 {
     int16_t	left;
@@ -31,9 +28,6 @@
     int16_t	right;
     int16_t	bottom;
 } RECT, *PRECT, *LPRECT;
-
-#endif
-
 #endif // __WINE_WINDEF_H
 
 #ifdef _MSC_VER

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_avisave.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_avisave.cpp	2008-03-05 19:22:27 UTC (rev 3830)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_avisave.cpp	2008-03-05 23:01:57 UTC (rev 3831)
@@ -19,17 +19,16 @@
 * MODIFIED BY GMV 30.1.05: prepared for ODML
 */
  
-#include "config.h"
-
 #include <stdio.h>
 #include <stdlib.h>
 #include <math.h>
 #include <unistd.h>
-
-
 #include <time.h>
 #include <sys/time.h>
-#include <pthread.h>
+
+#include "ADM_default.h"
+#include "ADM_threads.h"
+
 #define WIN32_CLASH
 
 #include "fourcc.h"
@@ -43,8 +42,6 @@
 #include "ADM_filter/video_filters.h"
 #include "ADM_encoder/ADM_vidEncode.hxx"
 
-#include "ADM_assert.h" 
-
 #include "ADM_audio/aviaudio.hxx"
 #include "ADM_audiofilter/audioprocess.hxx"
 #include "oplug_avi/op_aviwrite.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_avisavecopy.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_avisavecopy.cpp	2008-03-05 19:22:27 UTC (rev 3830)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_avisavecopy.cpp	2008-03-05 23:01:57 UTC (rev 3831)
@@ -24,11 +24,11 @@
 #include <stdlib.h>
 #include <math.h>
 #include <unistd.h>
-
 #include <time.h>
 #include <sys/time.h>
-#include "config.h"
-#include <pthread.h>
+
+#include "ADM_default.h"
+#include "ADM_threads.h"
 #define WIN32_CLASH
 #include "fourcc.h"
 #include "avi_vars.h"
@@ -40,7 +40,6 @@
 #include "ADM_filter/video_filters.h"
 #include "ADM_encoder/ADM_vidEncode.hxx"
 
-
 #include "ADM_audio/aviaudio.hxx"
 #include "ADM_audiofilter/audioprocess.hxx"
 #include "oplug_avi/op_aviwrite.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_pack.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_pack.cpp	2008-03-05 19:22:27 UTC (rev 3830)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_pack.cpp	2008-03-05 23:01:57 UTC (rev 3831)
@@ -20,11 +20,12 @@
 #include <stdlib.h>
 #include <math.h>
 #include <unistd.h>
-
 #include <time.h>
 #include <sys/time.h>
-#include "config.h"
-#include <pthread.h>
+
+#include "ADM_default.h"
+#include "ADM_threads.h"
+
 #define WIN32_CLASH
 #include "fourcc.h"
 #include "avi_vars.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_unpack.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_unpack.cpp	2008-03-05 19:22:27 UTC (rev 3830)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_unpack.cpp	2008-03-05 23:01:57 UTC (rev 3831)
@@ -24,11 +24,11 @@
 #include <stdlib.h>
 #include <math.h>
 #include <unistd.h>
-
 #include <time.h>
 #include <sys/time.h>
-#include "config.h"
-#include <pthread.h>
+
+#include "ADM_default.h"
+#include "ADM_threads.h"
 #define WIN32_CLASH
 #include "fourcc.h"
 #include "avi_vars.h"
@@ -40,7 +40,6 @@
 #include "ADM_filter/video_filters.h"
 #include "ADM_encoder/ADM_vidEncode.hxx"
 
-
 #include "ADM_audio/aviaudio.hxx"
 #include "ADM_audiofilter/audioprocess.hxx"
 #include "oplug_avi/op_aviwrite.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_avisavedual.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_avisavedual.cpp	2008-03-05 19:22:27 UTC (rev 3830)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_avisavedual.cpp	2008-03-05 23:01:57 UTC (rev 3831)
@@ -17,16 +17,16 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include "config.h"
 
 #include <stdio.h>
 #include <stdlib.h>
 #include <math.h>
 #include <unistd.h>
-
 #include <time.h>
 #include <sys/time.h>
-#include <pthread.h>
+
+#include "ADM_default.h"
+#include "ADM_threads.h"
 #define WIN32_CLASH
 #include "fourcc.h"
 #include "avi_vars.h"
@@ -34,14 +34,10 @@
 
 //#include "avilist.h"
 
-#include <ADM_assert.h>
-
-
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_filter/video_filters.h"
 #include "ADM_encoder/ADM_vidEncode.hxx"
 
-
 #include "ADM_audio/aviaudio.hxx"
 #include "ADM_audiofilter/audioprocess.hxx"
 #include "oplug_avi/op_aviwrite.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp	2008-03-05 19:22:27 UTC (rev 3830)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp	2008-03-05 23:01:57 UTC (rev 3831)
@@ -22,11 +22,12 @@
 #include <stdlib.h>
 #include <math.h>
 #include <unistd.h>
-
 #include <time.h>
 #include <sys/time.h>
-#include "config.h"
-#include <pthread.h>
+
+#include "ADM_default.h"
+#include "ADM_threads.h"
+
 #define WIN32_CLASH
 #include "fourcc.h"
 #include "avi_vars.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_savesmart.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_savesmart.cpp	2008-03-05 19:22:27 UTC (rev 3830)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_savesmart.cpp	2008-03-05 23:01:57 UTC (rev 3831)
@@ -14,16 +14,17 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include "config.h"
 
 #include <stdio.h>
 #include <stdlib.h>
 #include <math.h>
 #include <unistd.h>
-
 #include <time.h>
 #include <sys/time.h>
-#include <pthread.h>
+
+#include "ADM_default.h"
+#include "ADM_threads.h"
+
 #define WIN32_CLASH
 #ifdef USE_FFMPEG
 extern "C" {
@@ -45,9 +46,6 @@
 //#include "ADM_codecs/ADM_divxEncode.h"
 #include "ADM_encoder/ADM_vidEncode.hxx"
 
-#include "ADM_assert.h" 
-
-
 #include "oplug_avi/op_aviwrite.hxx"
 #include "oplug_avi/op_avisave.h"
 #include "oplug_avi/op_savesmart.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp	2008-03-05 19:22:27 UTC (rev 3830)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp	2008-03-05 23:01:57 UTC (rev 3831)
@@ -16,28 +16,27 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include "config.h"
+
 #include <stdio.h>
 #include <stdlib.h>
-
 #include <string.h>
 #include <math.h>
-#include <pthread.h>
-#define WIN32_CLASH
 
+#include "ADM_default.h"
+#include "ADM_threads.h"
 
+#define WIN32_CLASH
+
 extern "C" {
 #include "ADM_lavcodec.h"
 };
-#include "ADM_default.h"
+
 #include "ADM_editor/ADM_Video.h"
 #include "ADM_colorspace/colorspace.h"
 #include "ADM_toolkit/toolkit.hxx"
-#include <ADM_assert.h>
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_filter/video_filters.h"
 
-
 #include "ADM_encoder/ADM_vidEncode.hxx"
 #include "ADM_codecs/ADM_codec.h"
 #include "ADM_encoder/adm_encoder.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp	2008-03-05 19:22:27 UTC (rev 3830)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp	2008-03-05 23:01:57 UTC (rev 3831)
@@ -15,16 +15,17 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include "config.h"
+
 #include <stdio.h>
 #include <stdlib.h>
-
 #include <string.h>
 #include <math.h>
-#include <pthread.h>
+
+#include "ADM_default.h"
+#include "ADM_threads.h"
+
 #define WIN32_CLASH
 
-
 extern "C" {
 #include "ADM_lavcodec.h"
 };
@@ -32,7 +33,6 @@
 #include "ADM_editor/ADM_Video.h"
 #include "ADM_colorspace/colorspace.h"
 #include "ADM_toolkit/toolkit.hxx"
-#include <ADM_assert.h>
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_filter/video_filters.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp	2008-03-05 19:22:27 UTC (rev 3830)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp	2008-03-05 23:01:57 UTC (rev 3831)
@@ -24,7 +24,9 @@
 
 #include <string.h>
 #include <math.h>
-#include <pthread.h>
+
+#include "ADM_default.h"
+#include "ADM_threads.h"
 #define WIN32_CLASH
 
 #ifdef USE_FFMPEG
@@ -37,7 +39,6 @@
 
 #include "ADM_colorspace/colorspace.h"
 #include "ADM_toolkit/toolkit.hxx"
-#include <ADM_assert.h>
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_filter/video_filters.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp	2008-03-05 19:22:27 UTC (rev 3830)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp	2008-03-05 23:01:57 UTC (rev 3831)
@@ -11,8 +11,6 @@
 //
 //
 
-#include "config.h"
-
 #include <stdio.h>
 #include <stdlib.h>
 #include <math.h>
@@ -20,14 +18,11 @@
 #include <sys/time.h>
 #include <errno.h>
 
-
 #include "ADM_default.h"
+#include "ADM_threads.h"
 
-
-
 #define WIN32_CLASH
 #include "avi_vars.h"
-#include <ADM_assert.h>
 #include "ADM_audiofilter/audioprocess.hxx"
 
 #include "DIA_encoding.h"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp	2008-03-05 19:22:27 UTC (rev 3830)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp	2008-03-05 23:01:57 UTC (rev 3831)
@@ -18,13 +18,15 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include "config.h"
+
 #include <stdio.h>
 #include <stdlib.h>
-
 #include <string.h>
 #include <math.h>
-#include <pthread.h>
+
+#include "ADM_default.h"
+#include "ADM_threads.h"
+
 #define WIN32_CLASH
 #ifdef USE_FFMPEG
 extern "C" {
@@ -36,7 +38,6 @@
 
 #include "ADM_colorspace/colorspace.h"
 #include "ADM_toolkit/toolkit.hxx"
-#include <ADM_assert.h>
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_filter/video_filters.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_toolkit/ADM_audioQueue.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_toolkit/ADM_audioQueue.cpp	2008-03-05 19:22:27 UTC (rev 3830)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_toolkit/ADM_audioQueue.cpp	2008-03-05 23:01:57 UTC (rev 3831)
@@ -6,14 +6,14 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include "config.h"
- 
+
 #include <stdio.h>
 #include <stdlib.h>
 #include <string.h>
-#include <ADM_assert.h>
-#include "ADM_default.h"
 
+#include "ADM_default.h"
+#include "ADM_threads.h"
+
 #include "ADM_audiofilter/audioprocess.hxx"
 #include "ADM_audiofilter/audioeng_buildfilters.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_toolkit/ADM_packetQueue.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_toolkit/ADM_packetQueue.cpp	2008-03-05 19:22:27 UTC (rev 3830)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_toolkit/ADM_packetQueue.cpp	2008-03-05 23:01:57 UTC (rev 3831)
@@ -12,14 +12,13 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include "config.h"
- 
+
 #include <stdio.h>
 #include <stdlib.h>
 #include <string.h>
-#include <ADM_assert.h>
-#include "ADM_default.h"
 
+#include "ADM_default.h"
+#include "ADM_threads.h"
 
 #include "ADM_packetQueue.h"
 /*!

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_gtkRender.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_gtkRender.cpp	2008-03-05 19:22:27 UTC (rev 3830)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_gtkRender.cpp	2008-03-05 23:01:57 UTC (rev 3831)
@@ -15,6 +15,7 @@
  *                                                                         *
  ***************************************************************************/
 
+#include "config.h"
 #include <gtk/gtk.h>
 #ifdef ADM_WIN32
 #define WIN32_CLASH

Modified: branches/avidemux_2.5_branch_mean/avidemux/gui_savenew.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/gui_savenew.cpp	2008-03-05 19:22:27 UTC (rev 3830)
+++ branches/avidemux_2.5_branch_mean/avidemux/gui_savenew.cpp	2008-03-05 23:01:57 UTC (rev 3831)
@@ -14,25 +14,22 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include <config.h>
 
 #include <stdio.h>
 #include <stdlib.h>
 #include <math.h>
 #include <unistd.h>
-
-
 #include <time.h>
 #include <sys/time.h>
-#include <pthread.h>
-#define WIN32_CLASH
-#include "avi_vars.h"
 
+#include "ADM_default.h"
+#include "ADM_threads.h"
 
+#define WIN32_CLASH
+
 #include "avi_vars.h"
 #include "prototype.h"
 #include "ADM_toolkit/toolkit.hxx"
-#include "ADM_assert.h"
 
 #include "ADM_audio/aviaudio.hxx"
 #include "ADM_audiofilter/audioprocess.hxx"

Modified: branches/avidemux_2.5_branch_mean/avidemux/main.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/main.cpp	2008-03-05 19:22:27 UTC (rev 3830)
+++ branches/avidemux_2.5_branch_mean/avidemux/main.cpp	2008-03-05 23:01:57 UTC (rev 3831)
@@ -16,17 +16,15 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include "ADM_default.h"
 
 #ifdef ADM_WIN32
 #define WIN32_CLASH
 #include <windows.h>
-#include <wingdi.h>
 #include <excpt.h>
 #endif
 
-#include "ADM_default.h"
-
-
+#include "ADM_threads.h"
 #define __DECLARE__
 #include "avi_vars.h"
 



From gruntster at mail.berlios.de  Thu Mar  6 19:49:02 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Thu, 6 Mar 2008 19:49:02 +0100
Subject: [Avidemux-svn-commit] r3833 - in
	branches/avidemux_2.4_branch/avidemux: . ADM_osSupport
	ADM_userInterfaces/ADM_GTK/ADM_gui2
	ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk
	ADM_userInterfaces/ADM_NONE/ADM_gui2
	ADM_userInterfaces/ADM_QT4/ADM_gui
Message-ID: <200803061849.m26In2DH019273@sheep.berlios.de>

Author: gruntster
Date: 2008-03-06 19:48:52 +0100 (Thu, 06 Mar 2008)
New Revision: 3833

Modified:
   branches/avidemux_2.4_branch/avidemux/ADM_osSupport/ADM_misc.h
   branches/avidemux_2.4_branch/avidemux/ADM_osSupport/win32.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_gtkRender.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/toolkit.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_NONE/ADM_gui2/file_none.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/Q_gui2.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui_none.cpp
   branches/avidemux_2.4_branch/avidemux/gtk_gui.cpp
Log:
[Preview] centre preview windows correctly on multi-monitor setups

Modified: branches/avidemux_2.4_branch/avidemux/ADM_osSupport/ADM_misc.h
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_osSupport/ADM_misc.h	2008-03-06 18:32:32 UTC (rev 3832)
+++ branches/avidemux_2.4_branch/avidemux/ADM_osSupport/ADM_misc.h	2008-03-06 18:48:52 UTC (rev 3833)
@@ -85,7 +85,6 @@
 	#define SHTDN_REASON_FLAG_PLANNED 0x80000000
 
 	int shutdown_win32(void);
-	void getWorkingArea(uint32_t *width, uint32_t *height);
 #else
 	#include <sys/resource.h>
 #endif

Modified: branches/avidemux_2.4_branch/avidemux/ADM_osSupport/win32.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_osSupport/win32.cpp	2008-03-06 18:32:32 UTC (rev 3832)
+++ branches/avidemux_2.4_branch/avidemux/ADM_osSupport/win32.cpp	2008-03-06 18:48:52 UTC (rev 3833)
@@ -393,41 +393,6 @@
 	return true;
 }
 
-#define MONITOR_DEFAULTTONEAREST    0x00000002
-
-void getWorkingArea(uint32_t *width, uint32_t *height)
-{
-	typedef void* (WINAPI *MonitorFromWindow)(HWND hwnd, uint32_t dwFlags);
-	typedef bool (WINAPI *GetMonitorInfo)(void *hMonitor, LPMONITORINFO lpmi);
-
-	static HMODULE user32 = GetModuleHandle("user32.dll");
-	static MonitorFromWindow pMonitorFromWindow = (MonitorFromWindow)GetProcAddress(user32, "MonitorFromWindow");
-	static GetMonitorInfo pGetMonitorInfo = (GetMonitorInfo)GetProcAddress(user32, "GetMonitorInfoA");
-
-	if (pMonitorFromWindow == NULL)
-	{
-		RECT rect;
-
-		// Required for NT4 - no multi-monitor support
-		SystemParametersInfo(SPI_GETWORKAREA, 0, &rect, 0);
-
-		*width = rect.right - rect.left;
-		*height = rect.bottom - rect.top;
-	}
-	else
-	{
-		void *hMonitor = pMonitorFromWindow(GetForegroundWindow(), MONITOR_DEFAULTTONEAREST);
-
-		MONITORINFO monitorInfo;
-
-		monitorInfo.cbSize = sizeof(MONITORINFO);
-		pGetMonitorInfo(hMonitor, &monitorInfo);
-
-		*width = monitorInfo.rcWork.right - monitorInfo.rcWork.left;
-		*height = monitorInfo.rcWork.bottom - monitorInfo.rcWork.top;
-	}
-}
-
 void redirectStdoutToFile(void)
 {
 	// Don't redirect stdout and stderr if SDL hasn't already hijacked it.

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp	2008-03-06 18:32:32 UTC (rev 3832)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp	2008-03-06 18:48:52 UTC (rev 3833)
@@ -46,7 +46,7 @@
 #include "../ADM_toolkit_gtk/ADM_jogshuttle.h"
 #include "gtkgui.h"
 
-uint8_t UI_getPhysicalScreenSize(uint32_t *w,uint32_t *h);
+extern uint8_t UI_getPhysicalScreenSize(void* window, uint32_t *w,uint32_t *h);
 
 
 #define WOD(x) lookup_widget (guiRootWindow,#x)
@@ -54,7 +54,7 @@
 void frame2time(uint32_t frame, uint32_t fps, uint16_t * hh, uint16_t * mm,
 	   uint16_t * ss, uint16_t * ms);
 
-static GtkWidget *guiRootWindow=NULL;
+GtkWidget *guiRootWindow=NULL;
 static GtkWidget *guiDrawingArea=NULL;
 static GtkWidget *guiSlider=NULL;
 
@@ -329,7 +329,7 @@
 		GUI_initCursor(  );
     
                 
-                UI_getPhysicalScreenSize(&w,&h); //gtk_widget_get_parent_window (guiRootWindow));
+                UI_getPhysicalScreenSize(guiRootWindow, &w, &h);
                 printf("The screen seems to be %u x %u px\n",w,h);
  
                 GUI_gtk_grow_off(1);
@@ -1287,7 +1287,6 @@
 extern char **global_argv;
 typedef gboolean GCALL       (void *);
 extern int automation(void );
-extern uint8_t UI_getPhysicalScreenSize(uint32_t *w,uint32_t *h);
 extern void initTranslator(void);
 
 int UI_Init(int argc, char **argv)

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_gtkRender.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_gtkRender.cpp	2008-03-06 18:32:32 UTC (rev 3832)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_gtkRender.cpp	2008-03-06 18:48:52 UTC (rev 3833)
@@ -44,7 +44,7 @@
 void GUI_gtk_grow_off(int onff);
 
 extern GtkWidget *getDrawWidget(void);
-extern uint8_t UI_getPhysicalScreenSize(uint32_t *w, uint32_t *h);
+extern uint8_t UI_getPhysicalScreenSize(void* window, uint32_t *w, uint32_t *h);
 
 #ifdef ENABLE_WINDOW_SIZING_HACK
 extern int maxWindowWidth, maxWindowHeight; // from GUI_bindings.cpp
@@ -194,7 +194,7 @@
 	gtk_window_get_size(window, &windowWidth, &windowHeight);
 	gtk_widget_get_size_request(drawingArea, &drawingWidth, &drawingHeight);
 
-	UI_getPhysicalScreenSize(&screenWidth, &screenHeight);
+	UI_getPhysicalScreenSize(window, &screenWidth, &screenHeight);
 
 	// Take drawing area out of the equation, how much extra do we need for additional controls?
 	windowWidth -= drawingWidth;
@@ -226,9 +226,11 @@
 void UI_centreCanvasWindow(GtkWindow *window, GtkWidget *canvas, int newCanvasWidth, int newCanvasHeight)
 {
 	int winWidth, winHeight, widgetWidth, widgetHeight;
-	uint32_t resWidth, resHeight;
+	GdkScreen *screen = gdk_screen_get_default();
+	int monitorNo = gdk_screen_get_monitor_at_window(screen, GTK_WIDGET(window->transient_parent)->window);
+	GdkRectangle rect;
 
-	UI_getPhysicalScreenSize(&resWidth, &resHeight);
+	gdk_screen_get_monitor_geometry(screen, monitorNo, &rect);
 	gtk_widget_get_size_request((GtkWidget*)canvas, &widgetWidth, &widgetHeight);
 	gtk_window_get_size(window, &winWidth, &winHeight);
 
@@ -239,6 +241,6 @@
 	winWidth += 10;
 	winHeight += 40;
 
-	gtk_window_move(window, ((int)resWidth - winWidth) / 2, ((int)resHeight - winHeight) / 2);
+	gtk_window_move(window, rect.x + (rect.width - winWidth) / 2, rect.y + (rect.height - winHeight) / 2);
 }
 // EOF

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/toolkit.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/toolkit.cpp	2008-03-06 18:32:32 UTC (rev 3832)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/toolkit.cpp	2008-03-06 18:48:52 UTC (rev 3833)
@@ -29,7 +29,7 @@
 #include "avi_vars.h"
 #include "ADM_misc.h"
 
-
+extern GtkWidget *guiRootWindow;
 GtkWidget *GUI_PixmapButtonDefault(GdkWindow * window, const gchar ** xpm,
                                   const gchar * tooltip);
 GtkWidget *GUI_PixmapButton(GdkWindow * window, const gchar ** xpm,
@@ -190,26 +190,22 @@
     \fn UI_getPhysicalScreenSize
     \brief return the physical size of display in pixels
 */
-uint8_t UI_getPhysicalScreenSize(uint32_t *w, uint32_t *h)
+uint8_t UI_getPhysicalScreenSize(void *window, uint32_t *w, uint32_t *h)
 {
-#ifdef ADM_WIN32
-	getWorkingArea(w, h);
-#else
-	static int inited = 0;
-	static int ww,hh;
+	GtkWindow* gtkWindow = (GtkWindow*)window;
+	GdkScreen *screen = gdk_screen_get_default();
 
-    if (!inited)
-    {      
-      GdkScreen* sc = gdk_screen_get_default();
-      ww = gdk_screen_get_width(sc);
-      hh = gdk_screen_get_height(sc);
-      inited = 1;
-    }
+	if (!gtkWindow)
+		gtkWindow = (GtkWindow*)guiRootWindow;
 
-    *w=ww;
-    *h=hh;
-#endif
+	int monitorNo = gdk_screen_get_monitor_at_window(screen, GTK_WIDGET(gtkWindow)->window);
+	GdkRectangle rect;
 
+	gdk_screen_get_monitor_geometry(screen, monitorNo, &rect);
+
+	*w = rect.width;
+	*h = rect.height;
+
 	return 1;
 }
 //EOF

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_NONE/ADM_gui2/file_none.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_NONE/ADM_gui2/file_none.cpp	2008-03-06 18:32:32 UTC (rev 3832)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_NONE/ADM_gui2/file_none.cpp	2008-03-06 18:48:52 UTC (rev 3833)
@@ -29,7 +29,7 @@
 void GUI_FileSelWrite(const char *label, char * * name)
 {}
 
-uint8_t UI_getPhysicalScreenSize(uint32_t *w,uint32_t *h)
+uint8_t UI_getPhysicalScreenSize(void *window, uint32_t *w,uint32_t *h)
 {
   *w=*h=10000; 
 }
\ No newline at end of file

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/Q_gui2.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/Q_gui2.cpp	2008-03-06 18:32:32 UTC (rev 3832)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/Q_gui2.cpp	2008-03-06 18:48:52 UTC (rev 3833)
@@ -41,7 +41,7 @@
 extern int global_argc;
 extern char **global_argv;
 
-extern uint8_t UI_getPhysicalScreenSize(uint32_t *w,uint32_t *h);
+extern uint8_t UI_getPhysicalScreenSize(void* window, uint32_t *w,uint32_t *h);
 extern int automation(void );
 extern void HandleAction(Action a);
 extern uint32_t encoderGetNbEncoder (void);
@@ -622,16 +622,16 @@
 
 	loadTranslator();
 
-	uint32_t w, h;
-
-	UI_getPhysicalScreenSize(&w,&h);
-	printf("The screen seems to be %u x %u px\n",w,h);
-
 	MainWindow *mw = new MainWindow();
 	mw->show();
 
 	QuiMainWindows = (QWidget*)mw;
 
+	uint32_t w, h;
+
+	UI_getPhysicalScreenSize(QuiMainWindows, &w,&h);
+	printf("The screen seems to be %u x %u px\n",w,h);
+
 	UI_QT4VideoWidget(mw->ui.frame_video);  // Add the widget that will handle video display
 	UI_updateRecentMenu();
 	setupMenus();

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui_none.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui_none.cpp	2008-03-06 18:32:32 UTC (rev 3832)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui_none.cpp	2008-03-06 18:48:52 UTC (rev 3833)
@@ -23,7 +23,7 @@
 uint8_t UI_arrow_enabled(void) {return 1;}
 uint8_t UI_arrow_disabled(void) {return 1;}
 
-uint8_t UI_getPhysicalScreenSize(uint32_t *w,uint32_t *h)
+uint8_t UI_getPhysicalScreenSize(void* window, uint32_t *w,uint32_t *h)
 {
 	QRect qrect = QApplication::desktop()->availableGeometry();
 

Modified: branches/avidemux_2.4_branch/avidemux/gtk_gui.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/gtk_gui.cpp	2008-03-06 18:32:32 UTC (rev 3832)
+++ branches/avidemux_2.4_branch/avidemux/gtk_gui.cpp	2008-03-06 18:48:52 UTC (rev 3833)
@@ -149,7 +149,7 @@
 PARAM_MUX muxMode = MUX_REGULAR;
 int muxParam = 0;
 
-extern uint8_t UI_getPhysicalScreenSize(uint32_t *w,uint32_t *h);
+extern uint8_t UI_getPhysicalScreenSize(void* window, uint32_t *w,uint32_t *h);
 extern uint8_t GUI_jobs(void);
 extern bool parseECMAScript(const char *name);
 void A_parseECMAScript(const char *name);
@@ -1063,7 +1063,7 @@
   
   /* Zoom out if needed */
   uint32_t phyW,phyH;
-  UI_getPhysicalScreenSize(&phyW,&phyH);
+  UI_getPhysicalScreenSize(NULL, &phyW,&phyH);
   if(phyW<avifileinfo->width || phyH<avifileinfo->height)
   {
       if(phyW<avifileinfo->width/2 || phyH<avifileinfo->height/2)



From mean at mail.berlios.de  Thu Mar  6 20:28:58 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 6 Mar 2008 20:28:58 +0100
Subject: [Avidemux-svn-commit] r3834 -
	branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi
Message-ID: <200803061928.m26JSw30023480@sheep.berlios.de>

Author: mean
Date: 2008-03-06 20:28:56 +0100 (Thu, 06 Mar 2008)
New Revision: 3834

Modified:
   branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_aviwrite.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_aviwrite.hxx
Log:
[Avi] Warning removal


Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_aviwrite.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_aviwrite.cpp	2008-03-06 18:48:52 UTC (rev 3833)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_aviwrite.cpp	2008-03-06 19:28:56 UTC (rev 3834)
@@ -1033,7 +1033,7 @@
 	}
 	return true;
 }
-void aviWrite::odml_write_sindex(int stream_nbr, char* stream_fcc)
+void aviWrite::odml_write_sindex(int stream_nbr, const char* stream_fcc)
 {
         
 	// Warning: This changes the file position
@@ -1086,7 +1086,7 @@
                 
 	}	
 }
-bool aviWrite::odml_write_index(int stream_nbr, char* stream_fcc, char* index_fcc){	// write index
+bool aviWrite::odml_write_index(int stream_nbr, const char* stream_fcc, const char* index_fcc){	// write index
 	// Warning: This changes the file position
 	if(doODML==NORMAL){
 		aprintf ("\n writing %lu interleaved ODML indexes for %lu frames in stream %s", odml_indexes[stream_nbr].index_count+1, vframe, stream_fcc);

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_aviwrite.hxx
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_aviwrite.hxx	2008-03-06 18:48:52 UTC (rev 3833)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_outputs/oplug_avi/op_aviwrite.hxx	2008-03-06 19:28:56 UTC (rev 3834)
@@ -94,8 +94,8 @@
 	void odml_destroy_index(void);	// deallocate index data structures
 	void odml_write_dummy_chunk(AviList* alist, uint64_t* fpos, uint32_t size);	// write a dummy chunk and get its file position
 	bool odml_index_frame(int stream_nbr, uint32_t data_size, bool keyFrame);	//index one data chunk
-	void odml_write_sindex(int stream_nbr, char* stream_fcc);	// write super index
-	bool odml_write_index(int stream_nbr, char* stream_fcc, char* index_fcc);	// write index
+	void odml_write_sindex(int stream_nbr, const char* stream_fcc);	// write super index
+	bool odml_write_index(int stream_nbr, const char* stream_fcc, const char* index_fcc);	// write index
 	void odml_riff_break(uint32_t len);	// advance to the next riff if required; len = chunk size to be written (incl. 4cc and size info) without padding
 	// END MOD Feb 2005 by GMV
         void reallocIndeces( odml_super_index_t *idx);



From mean at mail.berlios.de  Thu Mar  6 20:29:03 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 6 Mar 2008 20:29:03 +0100
Subject: [Avidemux-svn-commit] r3835 - in
	branches/avidemux_2.5_branch_mean/avidemux: . ADM_audiofilter
	ADM_inputs/ADM_avsproxy ADM_inputs/ADM_matroska
	ADM_inputs/ADM_mp4 ADM_libraries/ADM_libmpeg2enc
	ADM_libraries/ADM_mplex ADM_libraries/ADM_utilities
	ADM_script ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk
	ADM_videoFilter
Message-ID: <200803061929.m26JT3pK023503@sheep.berlios.de>

Author: mean
Date: 2008-03-06 20:29:01 +0100 (Thu, 06 Mar 2008)
New Revision: 3835

Modified:
   branches/avidemux_2.5_branch_mean/avidemux/ADM_audiofilter/audiofilter_mixer.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_avsproxy/ADM_avsproxy_net.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_matroska/ADM_mkvIndexer.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mp4/ADM_mp4Analyzer.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libmpeg2enc/cpu_accel.cc
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libmpeg2enc/motionest.cc
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_mplex/ADM_mplexmuxer.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_mplex/inputstrm.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_mplex/multiplexor.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_mplex/padstrm.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/ADM_imageLoader.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_script/DirectorySearch.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_script/DirectorySearch.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_guiResize.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidDecDec.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidPulldown.cpp
   branches/avidemux_2.5_branch_mean/avidemux/gui_action.cpp
Log:
[All] Report of r3820


Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_audiofilter/audiofilter_mixer.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_audiofilter/audiofilter_mixer.cpp	2008-03-06 19:28:56 UTC (rev 3834)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_audiofilter/audiofilter_mixer.cpp	2008-03-06 19:29:01 UTC (rev 3835)
@@ -551,7 +551,6 @@
 
     uint32_t rd = 0;
     uint8_t *in,*out;
-    uint32_t window;
     int nbSampleMax=max/_wavHeader.channels;
     uint8_t input_channels = _previous->getInfo()->channels;
 
@@ -565,7 +564,7 @@
       {
         memset(&_incomingBuffer[_head],0,sizeof(float) * input_channels);
         _tail=_head+input_channels;
-        printf("[Mixer] Warning asked %u symbols, a window is %u symbols\n",max,window);
+        printf("[Mixer] Warning asked %u symbols\n",max);
       }
       else
       {

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_avsproxy/ADM_avsproxy_net.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_avsproxy/ADM_avsproxy_net.cpp	2008-03-06 19:28:56 UTC (rev 3834)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_avsproxy/ADM_avsproxy_net.cpp	2008-03-06 19:29:01 UTC (rev 3835)
@@ -164,7 +164,6 @@
 uint8_t avsHeader::sendData(uint32_t cmd,uint32_t frame, uint32_t payload_size,uint8_t *payload)
 {
         SktHeader header;
-        int rx;
         memset(&header,0,sizeof(header));
 
         header.cmd=cmd;
@@ -173,7 +172,7 @@
         header.magic=(uint32_t)MAGGIC;
         if(!txData(sizeof(header),(uint8_t *)&header))
         {
-            printf("Error in senddata: header %d/%d\n",rx,sizeof(header));
+            printf("Error in senddata: header %d\n",sizeof(header));
             return 0;
         }
         int togo=payload_size;

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_matroska/ADM_mkvIndexer.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_matroska/ADM_mkvIndexer.cpp	2008-03-06 19:28:56 UTC (rev 3834)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_matroska/ADM_mkvIndexer.cpp	2008-03-06 19:29:01 UTC (rev 3835)
@@ -127,7 +127,7 @@
 */
 uint8_t mkvHeader::indexBlock(ADM_ebml_file *parser,uint32_t len,uint32_t clusterTimeCodeMs)
 {
-  int lacing,nbLaces,entryFlags;
+  int lacing,nbLaces,entryFlags=0;
   //
   uint64_t tail=parser->tell()+len;
   // Read Track id 
@@ -147,6 +147,7 @@
       uint8_t flags=parser->readu8();
       uint32_t remaining=tail-parser->tell();
       lacing=((flags>>1)&3);
+        // entryFlags ???
       //if(track) printf("This round %lld total:%lld\n",tail-parser->tell(),    _tracks[track]._sizeInBytes);
       switch(lacing)
       {

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mp4/ADM_mp4Analyzer.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mp4/ADM_mp4Analyzer.cpp	2008-03-06 19:28:56 UTC (rev 3834)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mp4/ADM_mp4Analyzer.cpp	2008-03-06 19:29:01 UTC (rev 3835)
@@ -643,7 +643,8 @@
         
                                             offset=8+len;
                                             printf("\navcC numOfPictureParSets  :%x\n", MKD8(offset++));
-                                            len=MKD16(offset++);
+                                            len=MKD16(offset);
+                                            offset++;
                                             printf("avcC Pic len              :%x\n",len);
                                             mixDump(VDEO.extraData+offset,len);
                                             left=0;

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libmpeg2enc/cpu_accel.cc
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libmpeg2enc/cpu_accel.cc	2008-03-06 19:28:56 UTC (rev 3834)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libmpeg2enc/cpu_accel.cc	2008-03-06 19:29:01 UTC (rev 3835)
@@ -46,7 +46,7 @@
 {
    int32_t eax, ebx, ecx, edx;
    int32_t AMD;
-   int32_t caps;
+   int32_t caps=0;
 
    if(CpuCaps::hasMMX()) caps |=ACCEL_X86_MMX;
    if(CpuCaps::hasMMXEXT()) caps |=ACCEL_X86_MMXEXT;

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libmpeg2enc/motionest.cc
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libmpeg2enc/motionest.cc	2008-03-06 19:28:56 UTC (rev 3834)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_libmpeg2enc/motionest.cc	2008-03-06 19:29:01 UTC (rev 3835)
@@ -2048,7 +2048,7 @@
 			16);            /* block height */
 
 	bestdp_mc->pos.x = imindmv;
-	bestdp_mc->pos.x = jmindmv;
+	bestdp_mc->pos.y = jmindmv; // Meanx : Jw patch,  Seems logical but not sure
 	*vmcp = vmc_dp;
 }
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_mplex/ADM_mplexmuxer.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_mplex/ADM_mplexmuxer.cpp	2008-03-06 19:28:56 UTC (rev 3834)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_mplex/ADM_mplexmuxer.cpp	2008-03-06 19:29:01 UTC (rev 3835)
@@ -292,7 +292,7 @@
                                 
                                 *(ptr+0)=(hh<<2)+(mm>>4);
                                 *(ptr+1)=((mm&0xf)<<4)+8+(ss>>3);
-                                *(ptr+2)= ((ss&7)<<5)+(ff>>1);
+                                *(ptr+2)= ((ss&7)<<5)+(ms>>1);
                                 *(ptr+3)&=0x7f;
                                 *(ptr+3)+=(ms&1) <<7;
                                 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_mplex/inputstrm.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_mplex/inputstrm.cpp	2008-03-06 19:28:56 UTC (rev 3834)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_mplex/inputstrm.cpp	2008-03-06 19:29:01 UTC (rev 3835)
@@ -23,6 +23,7 @@
 
 #include <config.h>
 #include <assert.h>
+#include <limits.h>
 
 #include "mjpeg_types.h"
 #include "inputstrm.hpp"

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_mplex/multiplexor.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_mplex/multiplexor.cpp	2008-03-06 19:28:56 UTC (rev 3834)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_mplex/multiplexor.cpp	2008-03-06 19:29:01 UTC (rev 3835)
@@ -22,6 +22,7 @@
 #include <config.h>
 #include <math.h>
 #include <stdlib.h>
+#include <string.h>
 
 #include <mjpeg_types.h>
 #include <mjpeg_logging.h>

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_mplex/padstrm.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_mplex/padstrm.cpp	2008-03-06 19:28:56 UTC (rev 3834)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_mplex/padstrm.cpp	2008-03-06 19:29:01 UTC (rev 3835)
@@ -23,6 +23,7 @@
 #ifdef HAVE_CONFIG_H
 #include "config.h"
 #endif
+#include <string.h>
 
 #include "padstrm.hpp"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/ADM_imageLoader.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/ADM_imageLoader.cpp	2008-03-06 19:28:56 UTC (rev 3834)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/ADM_imageLoader.cpp	2008-03-06 19:29:01 UTC (rev 3835)
@@ -359,7 +359,7 @@
 			uint32_t *fcc;
 		    uint8_t fcc_tab[4];
 		    FILE *fd;
-		    uint32_t off,tag,count,size;
+		    uint32_t off,tag=0,count,size;
 
 		    // 1- identity the file type
 		    //

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_script/DirectorySearch.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_script/DirectorySearch.cpp	2008-03-06 19:28:56 UTC (rev 3834)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_script/DirectorySearch.cpp	2008-03-06 19:29:01 UTC (rev 3835)
@@ -7,6 +7,7 @@
 Note:  This file is available under a BSD license.  Contact the author
 at amistry at am-productions.biz
 */
+#include <string.h>
 #include "config.h"
 #include "DirectorySearch.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_script/DirectorySearch.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_script/DirectorySearch.h	2008-03-06 19:28:56 UTC (rev 3834)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_script/DirectorySearch.h	2008-03-06 19:29:01 UTC (rev 3835)
@@ -21,6 +21,7 @@
 #include <sys/types.h>
 #include <sys/stat.h>
 #include <dirent.h>
+#include <string.h>
 #endif
 #include "StdFile.h"
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp	2008-03-06 19:28:56 UTC (rev 3834)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp	2008-03-06 19:29:01 UTC (rev 3835)
@@ -408,7 +408,7 @@
 
         if(rw)
         {
-                        dialog=dialog = gtk_file_chooser_dialog_new ("Save",
+                        dialog = gtk_file_chooser_dialog_new ("Save",
                                       NULL,
                                       GTK_FILE_CHOOSER_ACTION_SAVE,
                                       GTK_STOCK_CANCEL, GTK_RESPONSE_CANCEL,
@@ -418,7 +418,7 @@
         }
         else
         {
-          dialog=dialog = gtk_file_chooser_dialog_new ("Open File",
+          dialog = gtk_file_chooser_dialog_new ("Open File",
                                       NULL,
                                       GTK_FILE_CHOOSER_ACTION_OPEN,
                                       GTK_STOCK_CANCEL, GTK_RESPONSE_CANCEL,

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_guiResize.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_guiResize.cpp	2008-03-06 19:28:56 UTC (rev 3834)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_guiResize.cpp	2008-03-06 19:29:01 UTC (rev 3835)
@@ -27,7 +27,7 @@
 #include <ADM_assert.h>
 
 
-static int getResizeParams(uint32_t * w, uint32_t * h, uint32_t * algo,uint32_t w,uint32_t h,uint32_t fps);
+static int getResizeParams(uint32_t * w, uint32_t * h, uint32_t * algo,uint32_t ow,uint32_t oh,uint32_t fps);
 
 
 extern uint8_t DIA_resize(uint32_t *width,uint32_t *height,uint32_t *algo,uint32_t originalw, uint32_t originalh,uint32_t fps1000);

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidDecDec.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidDecDec.cpp	2008-03-06 19:28:56 UTC (rev 3834)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidDecDec.cpp	2008-03-06 19:29:01 UTC (rev 3835)
@@ -902,6 +902,7 @@
 		//return src;
 		//memcpy(data,src,*len);
 
+                GETFRAME(useframe, src); // MEANX : not sure (jw detected a problem here)
 		data->duplicate(src);
 		vidCache->unlockAll();		
 		return 1; // return src;			

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidPulldown.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidPulldown.cpp	2008-03-06 19:28:56 UTC (rev 3834)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_videoFilter/ADM_vidPulldown.cpp	2008-03-06 19:29:01 UTC (rev 3835)
@@ -120,7 +120,7 @@
 		uint32_t dflags,dlen;
 #define GET_FRAME(x,y) if(!_in->getFrameNumberNoAlloc(x, &dlen,_uncompressed[y],&dflags)) \
  {\
-				 	 	printf("Cannot get frame %lu\n",target+i);\
+				 	 	printf("Cannot get frame %lu\n",x);\
 					 	return 0;     \
 				 }
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/gui_action.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/gui_action.cpp	2008-03-06 19:28:56 UTC (rev 3834)
+++ branches/avidemux_2.5_branch_mean/avidemux/gui_action.cpp	2008-03-06 19:29:01 UTC (rev 3835)
@@ -1,4 +1,5 @@
 #include <stdio.h>
+#include <strings.h>
 #include <vector>
 using std::vector;
 #include <utility>



From mean at mail.berlios.de  Thu Mar  6 20:29:07 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 6 Mar 2008 20:29:07 +0100
Subject: [Avidemux-svn-commit] r3836 -
	branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk
Message-ID: <200803061929.m26JT7ui023514@sheep.berlios.de>

Author: mean
Date: 2008-03-06 20:29:04 +0100 (Thu, 06 Mar 2008)
New Revision: 3836

Modified:
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/mediactrl.c
Log:
[gtk] Merged r3821


Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/mediactrl.c
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/mediactrl.c	2008-03-06 19:29:01 UTC (rev 3835)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/mediactrl.c	2008-03-06 19:29:04 UTC (rev 3836)
@@ -35,7 +35,17 @@
 #include <string.h>
 #include <errno.h>
 #include <linux/input.h>
+#include <linux/version.h>
 
+#if LINUX_VERSION_CODE < KERNEL_VERSION(2,6,0)
+struct input_id {
+        __u16 bustype;
+        __u16 vendor;
+        __u16 product;
+        __u16 version;
+};
+#endif
+
 #include "mediactrl.h"
 
 static char *_shuttle_name = "Shuttle";



From mean at mail.berlios.de  Thu Mar  6 20:29:20 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 6 Mar 2008 20:29:20 +0100
Subject: [Avidemux-svn-commit] r3838 - in
	branches/avidemux_2.5_branch_mean/avidemux: ADM_audiocodec
	ADM_core/include ADM_libraries/ADM_mplex
Message-ID: <200803061929.m26JTKhm023542@sheep.berlios.de>

Author: mean
Date: 2008-03-06 20:29:19 +0100 (Thu, 06 Mar 2008)
New Revision: 3838

Modified:
   branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_ad_plugin.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_assert.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_mplex/cpu_accel.c
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_mplex/mjpeg_types.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_mplex/yuv4mpeg.c
Log:
[All] Rebase with gruntster win32 fix


Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_ad_plugin.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_ad_plugin.h	2008-03-06 19:29:09 UTC (rev 3837)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_ad_plugin.h	2008-03-06 19:29:19 UTC (rev 3838)
@@ -6,10 +6,13 @@
 #define ADM_ad_plugin_h
 #include "ADM_default."
 #include "ADM_audiocodec.h"
+#define AD_API_VERSION 1
 /* These are the 4 functions exported by each plugin ...*/
 typedef (ADM_AudioCodec*)ADM_ad_CreateFunction(uint32_t fourcc, WAVHeader *info,uint32_t extraLength,uint8_t *extraData);
 typedef (void *)         ADM_ad_DeleteFunction(ADM_AudioCodec *codec);
 typedef bool             ADM_ad_SupportedFormat(uint32_t audioFourcc);
+typedef uint32_t         ADM_ad_GetApiVersion(void);
+typedef uint32_t         ADM_ad_GetDecoderVersion(uint32_t *major, uint32_t *minor, uint32_t *patch);
 typedef const char       *ADM_ADM_ad_GetInfo(void);
 /* */
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_assert.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_assert.h	2008-03-06 19:29:09 UTC (rev 3837)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_assert.h	2008-03-06 19:29:19 UTC (rev 3838)
@@ -86,7 +86,7 @@
   #define malloc ADM_alloc
   #define realloc ADM_realloc
   #define memalign(x,y) ADM_alloc(y)
-  #define free  ADM_dealloc
+  #define free  ADM_dezalloc
   #undef strdup
   #define strdup ADM_strdup
   #define calloc ADM_calloc

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_mplex/cpu_accel.c
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_mplex/cpu_accel.c	2008-03-06 19:29:09 UTC (rev 3837)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_mplex/cpu_accel.c	2008-03-06 19:29:19 UTC (rev 3838)
@@ -19,14 +19,8 @@
 * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
 */
 
-#include <config.h>
-#include <stdio.h>
-#include <signal.h>
-#include <setjmp.h>
-#include <stdlib.h>
-#ifdef	HAVE_MALLOC_H
-#include <malloc.h>
-#endif
+#define ADM_LEGACY_PROGGY
+#include "ADM_default.h"
 #include <unistd.h>
 #include <string.h>
 #include <errno.h>

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_mplex/mjpeg_types.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_mplex/mjpeg_types.h	2008-03-06 19:29:09 UTC (rev 3837)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_mplex/mjpeg_types.h	2008-03-06 19:29:19 UTC (rev 3838)
@@ -21,25 +21,8 @@
 #ifndef __MJPEG_TYPES_H__
 #define __MJPEG_TYPES_H__
 
-#include <sys/types.h> /* FreeBSD, others - ssize_t */
+#include "ADM_default.h"
 
-/*
- * modern CYGWIN releases have stdint/inttypes so there's no need
- * to check for it or provide typedefs/defines
-*/
-
-#if defined(HAVE_STDINT_H)
-# include <stdint.h>
-#elif defined(HAVE_INTTYPES_H)
-# include <inttypes.h>
-#else
-typedef unsigned char uint8_t;
-typedef unsigned short uint16_t;
-typedef unsigned int uint32_t;
-typedef unsigned long long uint64_t;
-typedef long long int int64_t;
-#endif /* HAVE_STDINT_H */
-
 #if __GNUC__ > 2 || (__GNUC__ == 2 && __GNUC_MINOR__ > 4)
 #define GNUC_PRINTF( format_idx, arg_idx )    \
   __attribute__((format (printf, format_idx, arg_idx)))

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_mplex/yuv4mpeg.c
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_mplex/yuv4mpeg.c	2008-03-06 19:29:09 UTC (rev 3837)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_mplex/yuv4mpeg.c	2008-03-06 19:29:19 UTC (rev 3838)
@@ -19,13 +19,8 @@
  *  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
  *
  */
-
-#include <config.h>
-
-#include <unistd.h>
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
+#define ADM_LEGACY_PROGGY
+#include "ADM_default.h"
 #define INTERNAL_Y4M_LIBCODE_STUFF_QPX
 #include "yuv4mpeg.h"
 #include "yuv4mpeg_intern.h"



From mean at mail.berlios.de  Thu Mar  6 20:29:21 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 6 Mar 2008 20:29:21 +0100
Subject: [Avidemux-svn-commit] r3839 - in
	branches/avidemux_2.5_branch_mean/avidemux: . ADM_audiocodec
	ADM_core/include plugins/ADM_audiodecoder/ADM_ad_mad
Message-ID: <200803061929.m26JTLWE023554@sheep.berlios.de>

Author: mean
Date: 2008-03-06 20:29:21 +0100 (Thu, 06 Mar 2008)
New Revision: 3839

Added:
   branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_pluginLoad.cpp
Modified:
   branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_ad_plugin.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_audiocodec.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/CMakeLists.txt
   branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_dynamicLoading.h
   branches/avidemux_2.5_branch_mean/avidemux/main.cpp
   branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/ADM_ad_mad.cpp
   branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/CMakeLists.txt
Log:
[AudioPlugin] Skeleton for dynamic decoder loading


Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_ad_plugin.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_ad_plugin.h	2008-03-06 19:29:19 UTC (rev 3838)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_ad_plugin.h	2008-03-06 19:29:21 UTC (rev 3839)
@@ -4,16 +4,21 @@
 */
 #ifndef ADM_ad_plugin_h
 #define ADM_ad_plugin_h
-#include "ADM_default."
+#include "ADM_default.h"
+#include "../ADM_audio/ADM_audiodef.h"
 #include "ADM_audiocodec.h"
+#include "ADM_audio/aviaudio.hxx"
+#include "ADM_audiocodec/ADM_audiocodec.h"
+
 #define AD_API_VERSION 1
-/* These are the 4 functions exported by each plugin ...*/
-typedef (ADM_AudioCodec*)ADM_ad_CreateFunction(uint32_t fourcc, WAVHeader *info,uint32_t extraLength,uint8_t *extraData);
-typedef (void *)         ADM_ad_DeleteFunction(ADM_AudioCodec *codec);
-typedef bool             ADM_ad_SupportedFormat(uint32_t audioFourcc);
-typedef uint32_t         ADM_ad_GetApiVersion(void);
-typedef uint32_t         ADM_ad_GetDecoderVersion(uint32_t *major, uint32_t *minor, uint32_t *patch);
-typedef const char       *ADM_ADM_ad_GetInfo(void);
+/* These are the 6 functions exported by each plugin ...*/
+typedef ADM_Audiocodec  *(ADM_ad_CreateFunction)(uint32_t fourcc, 
+								WAVHeader *info,uint32_t extraLength,uint8_t *extraData);
+typedef void             (ADM_ad_DeleteFunction)(ADM_Audiocodec *codec);
+typedef bool             (ADM_ad_SupportedFormat)(uint32_t audioFourcc);
+typedef uint32_t         (ADM_ad_GetApiVersion)(void);
+typedef bool            (ADM_ad_GetDecoderVersion)(uint32_t *major, uint32_t *minor, uint32_t *patch);
+typedef const char       *(ADM_ADM_ad_GetInfo)(void);
 /* */
 
 #endif

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_audiocodec.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_audiocodec.cpp	2008-03-06 19:29:19 UTC (rev 3838)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_audiocodec.cpp	2008-03-06 19:29:21 UTC (rev 3839)
@@ -28,6 +28,8 @@
 #include "ADM_audiofilter/audiofilter_channel_route.h"
 #include "ADM_libraries/ADM_libwrapper/libwrapper_global.h"
 
+extern ADM_Audiocodec *ADM_ad_searchCodec(uint32_t fourcc,	WAVHeader *info,uint32_t extraLength,uint8_t *extraData);
+
 ADM_Audiocodec	*getAudioCodec(uint32_t fourcc,WAVHeader *info,uint32_t extra,uint8_t *extraData)
 {
 ADM_Audiocodec *out = NULL;
@@ -156,6 +158,8 @@
                 printf("\n Audio codec:  ffQDM2\n");
                 out= (ADM_Audiocodec *) new ADM_AudiocodecWMA(fourcc,info,extra,extraData);
                 break;
+            default:
+            	out= ADM_ad_searchCodec(fourcc,info,extra,extraData);
         	}
 
 	if (out == NULL)

Added: branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_pluginLoad.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_pluginLoad.cpp	2008-03-06 19:29:19 UTC (rev 3838)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_pluginLoad.cpp	2008-03-06 19:29:21 UTC (rev 3839)
@@ -0,0 +1,124 @@
+/**
+        \file ADM_pluginLoad.cpp
+        \brief Interface for dynamically loaded audio decoder
+*/
+
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ ***************************************************************************/
+#include "ADM_default.h"
+#include "ADM_ad_plugin.h"
+#include "ADM_toolkit/filesel.h"
+#include "ADM_dynamicLoading.h"
+#include <vector>
+/**
+ * 
+ */
+class ADM_ad_plugin
+{
+public:
+	ADM_ad_CreateFunction		*create;
+	ADM_ad_DeleteFunction		*destroy;
+	ADM_ad_SupportedFormat		*supportedFormat;
+	ADM_ad_GetApiVersion		*getApiVersion;
+	ADM_ad_GetDecoderVersion	*getDecoderVersion;
+	ADM_ADM_ad_GetInfo			*getInfo;
+};
+
+std::vector<ADM_ad_plugin *> ADM_audioPlugins;
+/**
+ * 	\fn tryLoadingAudioPlugin
+ *  \brief try to load the plugin given as argument..
+ */
+static uint8_t tryLoadingAudioPlugin(const char *file)
+{
+	ADM_ad_plugin blank;
+	printf("[ADM_ad_plugin] Scanning %s\n",ADM_GetFileName(file));
+	ADM_LibWrapper wrapper;
+	 if(true!=wrapper.loadLibrary(file))
+	 {
+		 printf("Load failed\n");
+		 return 0;
+	 }
+#define FUNCKY(a,b,c)	 blank.a=(b *)wrapper.getSymbol(#c); if(!blank.a) { printf("[ADM_ad_plugin]"#c" failed\n");return 0;}
+	 FUNCKY(create,ADM_ad_CreateFunction,create);
+	 FUNCKY(destroy,ADM_ad_DeleteFunction,destroy);
+	 FUNCKY(supportedFormat,ADM_ad_SupportedFormat,supportedFormat);
+	 FUNCKY(getApiVersion,ADM_ad_GetApiVersion,getApiVersion);
+	 FUNCKY(getDecoderVersion,ADM_ad_GetDecoderVersion,getDecoderVersion);
+	 FUNCKY(getInfo,ADM_ADM_ad_GetInfo,getInfo);
+	 
+	 // Check API version
+	 if(blank.getApiVersion()!=AD_API_VERSION)
+	 {
+		 	printf("[ADM_ad_plugin] File %s has API version too old (%d vs %d)\n",
+		 			ADM_GetFileName(file),ADM_GetFileName(file),AD_API_VERSION);
+		 	return 0;
+	 }
+	 // Get infos
+	 uint32_t major,minor,patch;
+	 const char *desc;
+	 blank.getDecoderVersion(&major,&minor,&patch);
+	 desc=blank.getInfo();
+	 // Print out stuff
+	 printf("[ADM_ad_plugin] Plugin loaded version %d.%d.%d, desc : %s\n",major,minor,patch,desc);
+	 //
+	 ADM_ad_plugin *p=new ADM_ad_plugin;
+	 *p=blank;
+	 ADM_audioPlugins.push_back(p);
+	
+	
+}
+/**
+ * 	\fn ADM_ad_loadPlugins
+ *  \brief load all audio plugins
+ */
+uint8_t ADM_ad_loadPlugins(void)
+{
+#define MAX_EXTERNAL_FILTER 50
+	  char *path="/home/fx/workspace/avidemux_git/avidemux_2.5_branch_mean/Build/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad";
+	  char *files[MAX_EXTERNAL_FILTER];
+	  uint32_t nbFile;
+	  
+	  
+	  memset(files,0,sizeof(char *)*MAX_EXTERNAL_FILTER);
+	  printf("[ADM_ad_plugin] Scanning directory %s\n",path);
+	  if(!buildDirectoryContent(&nbFile,path,
+			  files,MAX_EXTERNAL_FILTER,"so"))
+	  {
+		  printf("[AudioPlugin] Cannot Parse plugin");
+		  return 0;
+	  }
+	  for(int i=0;i<nbFile;i++)
+	   {
+	     tryLoadingAudioPlugin(files[i]);
+	   }
+	   printf("[ADM_ad_plugin] Scanning done,found %d codec \n",ADM_audioPlugins.size());
+	   return 1;
+}
+/**
+ * 	\fn ADM_ad_searchCodec
+ *  \brief Try to instantiate a codec that can decode the given stuff
+ */
+ADM_Audiocodec *ADM_ad_searchCodec(uint32_t fourcc,	WAVHeader *info,uint32_t extraLength,uint8_t *extraData)
+{
+	for(int i=0;i<ADM_audioPlugins.size();i++)
+	{
+		ADM_ad_plugin *a=ADM_audioPlugins[i];
+		ADM_assert(a);
+		ADM_assert(a->supportedFormat);
+		if(a->supportedFormat(fourcc)==true)
+		{
+			ADM_assert(a->create);
+			return a->create(fourcc, info,extraLength,extraData);
+		}
+	}
+	return NULL;
+}
+
+//EOF

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/CMakeLists.txt	2008-03-06 19:29:19 UTC (rev 3838)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/CMakeLists.txt	2008-03-06 19:29:21 UTC (rev 3839)
@@ -4,5 +4,7 @@
 ADM_codecmsadpcm.cpp  
 ADM_codeculaw.cpp  ADM_codecwma.cpp  ADM_lpcm.cpp
 ADM_audiocodec.cpp  ADM_codecfaad.cpp  
-ADM_codecwav.cpp   ADM_dca.cpp       audiocodec_ogg.cpp)
+ADM_codecwav.cpp   ADM_dca.cpp       audiocodec_ogg.cpp
+ADM_pluginLoad.cpp
+)
 ADD_LIBRARY(ADM_audiocodec STATIC ${ADM_audiocodec_SRCS})

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_dynamicLoading.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_dynamicLoading.h	2008-03-06 19:29:19 UTC (rev 3838)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_dynamicLoading.h	2008-03-06 19:29:21 UTC (rev 3839)
@@ -26,7 +26,7 @@
 	#ifdef ADM_WIN32
 		virtual char* formatMessage(uint32_t msgCode);
 	#endif
-
+public:
 		ADM_LibWrapper();
 		virtual ~ADM_LibWrapper();		
 		virtual bool loadLibrary(const char* path);

Modified: branches/avidemux_2.5_branch_mean/avidemux/main.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/main.cpp	2008-03-06 19:29:19 UTC (rev 3838)
+++ branches/avidemux_2.5_branch_mean/avidemux/main.cpp	2008-03-06 19:29:21 UTC (rev 3839)
@@ -73,6 +73,7 @@
 extern void ADM_memStatInit( void );
 extern void ADM_memStatEnd( void );
 extern void getUIDescription(char*);
+extern uint8_t ADM_ad_loadPlugins(void);
 
 #ifdef ADM_WIN32
 extern EXCEPTION_DISPOSITION exceptionHandler(struct _EXCEPTION_RECORD* pExceptionRec, void* pEstablisherFrame, struct _CONTEXT* pContextRecord, void* pDispatcherContext);
@@ -229,8 +230,10 @@
 	{
 		filterDynLoad(dynloadPath);
 	}
+	
 	ADM_dealloc(dynloadPath);
-
+	// Load audio codec plugin
+	ADM_ad_loadPlugins();
     ADM_lavInit();
 #ifdef HAVE_AUDIO
     AVDM_audioInit();

Modified: branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/ADM_ad_mad.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/ADM_ad_mad.cpp	2008-03-06 19:29:19 UTC (rev 3838)
+++ branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/ADM_ad_mad.cpp	2008-03-06 19:29:21 UTC (rev 3839)
@@ -14,16 +14,10 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <ADM_assert.h>
-#include <math.h>
+#include "ADM_default.h"
+#include "ADM_ad_plugin.h"
 
-#include "config.h"
-#include "fourcc.h"
-#include "ADM_audio/aviaudio.hxx"
-#include "ADM_audiocodec/ADM_audiocodec.h"
+#define OurClass ADM_AudiocodecMP3
 
 #ifdef USE_MP3
 #include "../ADM_libMad/mad.h"
@@ -51,7 +45,45 @@
 		virtual	uint8_t isCompressed(void) {return 1;}
 		virtual	uint8_t isDecompressable(void) {return 1;}
 };
+//********************************************************
+extern "C" { 
+ADM_Audiocodec *create(uint32_t fourcc,	WAVHeader *info,uint32_t extraLength,uint8_t *extraData) 
+{ 
+	return new ADM_AudiocodecMP3(fourcc);
+}
+ADM_Audiocodec *destroy(ADM_Audiocodec *codec) 
+{ 
+	ADM_AudiocodecMP3 *a=(ADM_AudiocodecMP3 *)codec;
+	delete a;
+}
+bool supportedFormat(uint32_t audioFourcc) 
+{ 
+	switch(audioFourcc)
+	{
+	case WAV_MP2:
+	case WAV_MP3: return true;
+	default:
+		return false;
+	}
+}
+uint32_t getApiVersion(void)
+{
+		return AD_API_VERSION;
+}
 
+bool getDecoderVersion(uint32_t *major,uint32_t *minor, uint32_t *patch)
+{
+	*major=*minor=0;
+	*patch=1;
+	return true;
+}
+const char *getInfo(void)
+{
+	return "LibMad decoder plugin for avidemux (c) Mean\n";
+}
+}
+//********************************************************
+
 ADM_AudiocodecMP3::ADM_AudiocodecMP3( uint32_t fourcc) :   ADM_Audiocodec(fourcc)
 {
         if((fourcc!=WAV_MP3) && (fourcc!=WAV_MP2))

Modified: branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/CMakeLists.txt	2008-03-06 19:29:19 UTC (rev 3838)
+++ branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/CMakeLists.txt	2008-03-06 19:29:21 UTC (rev 3839)
@@ -7,6 +7,7 @@
 
 
 include_directories(../../)
+include_directories(../../../ADM_audiocodec)
 include_directories(ADM_libMad)
 
 SET(ADM_ad_Mad_SRCS         ADM_ad_mad.cpp )



From gruntster at mail.berlios.de  Thu Mar  6 22:48:53 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Thu, 6 Mar 2008 22:48:53 +0100
Subject: [Avidemux-svn-commit] r3840 - in
	branches/avidemux_2.5_branch_gruntster/avidemux:
	ADM_core/include ADM_core/src ADM_libraries/ADM_libmpeg2enc
	ADM_outputs/oplug_avi
Message-ID: <200803062148.m26LmrR9004678@sheep.berlios.de>

Author: gruntster
Date: 2008-03-06 22:48:49 +0100 (Thu, 06 Mar 2008)
New Revision: 3840

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_inttype.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_crashdump.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_aviwrite.cpp
Log:
[Merge] fix build issues with Linux, Mac and big endian after merging

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_inttype.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_inttype.h	2008-03-06 19:29:21 UTC (rev 3839)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_inttype.h	2008-03-06 21:48:49 UTC (rev 3840)
@@ -23,7 +23,7 @@
 */
 #define MAXIMUM_SIZE 2048
 
-typedef unsigned char ADM_filename ;
+typedef unsigned char ADM_filename;
 
 #ifdef HAVE_STDINT_H
 #include <stdint.h>
@@ -76,12 +76,6 @@
 #ifdef HAVE_GETTEXT
 #  include <libintl.h>
 #  undef _
-#else
-#  define textdomain(String) (String)
-#  define gettext(String) (String)
-#  define dgettext(Domain,Message) (Message)
-#  define dcgettext(Domain,Message,Type) (Message)
-#  define bindtextdomain(Domain,Directory) (Domain)
 #endif
 
 extern const char* translate(const char *__domainname, const char *__msgid);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_crashdump.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_crashdump.cpp	2008-03-06 19:29:21 UTC (rev 3839)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_crashdump.cpp	2008-03-06 21:48:49 UTC (rev 3840)
@@ -59,7 +59,7 @@
 	if (mysaveFunction)
 		mysaveFunction();
 
-	snprintf(bfr,1024,"%s\n file %s, line %d\n",infofile,lineno);
+	snprintf(bfr,1024,"%s\n file %s, line %d\n", info, file, lineno);
 
 	if(myFatalFunction)
 		myFatalFunction("Crash",bfr);
@@ -386,6 +386,7 @@
 void ADM_backTrack(const char *info,int lineno,const char *file)
 {
 	char wholeStuff[2048];
+	void *stack[20];
 	char **functions;
 	int count, i;
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/CMakeLists.txt	2008-03-06 19:29:21 UTC (rev 3839)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/CMakeLists.txt	2008-03-06 21:48:49 UTC (rev 3840)
@@ -33,7 +33,7 @@
 ELSEIF (ADM_CPU_ALTIVEC)
 	ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "-DHAVE_ALTIVEC")
 
-	IF (NOT __APPLE__)
+	IF (NOT APPLE)
 		ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "-DHAVE_ALTIVEC_H")
-	ENDIF (NOT __APPLE__)
+	ENDIF (NOT APPLE)
 ENDIF (ADM_CPU_X86)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_aviwrite.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_aviwrite.cpp	2008-03-06 19:29:21 UTC (rev 3839)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_aviwrite.cpp	2008-03-06 21:48:49 UTC (rev 3840)
@@ -205,13 +205,13 @@
 	// in case of Little endian, do the usual swap crap
 	
 	AVIStreamHeader as;
-	BITMAPINFOHEADER b;
+	ADM_BITMAPINFOHEADER b;
 	memcpy(&as,&_videostream,sizeof(as));
 	Endian_AviStreamHeader(&as);		
 	memcpy(&b,&_bih,sizeof(_bih));
 	Endian_BitMapInfo( &b );
   	setStreamInfo (_file, (uint8_t *) &as,
-		  (uint8_t *)&b,sizeof(BITMAPINFOHEADER),
+		  (uint8_t *)&b,sizeof(ADM_BITMAPINFOHEADER),
 		// MOD Feb 2005 by GMV: ODML support
 		odml_video_super_idx_size,0,
 		// END MOD Feb 2005 by GMV



From mean at mail.berlios.de  Fri Mar  7 07:54:27 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 7 Mar 2008 07:54:27 +0100
Subject: [Avidemux-svn-commit] r3841 - in
	branches/avidemux_2.5_branch_mean/avidemux: ADM_audiocodec
	ADM_core/src
Message-ID: <200803070654.m276sRkH020171@sheep.berlios.de>

Author: mean
Date: 2008-03-07 07:54:27 +0100 (Fri, 07 Mar 2008)
New Revision: 3841

Modified:
   branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_pluginLoad.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_dynamicLoading.cpp
Log:
[AudioPlugin] Fix loading, silence dynLoad


Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_pluginLoad.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_pluginLoad.cpp	2008-03-06 21:48:49 UTC (rev 3840)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_pluginLoad.cpp	2008-03-07 06:54:27 UTC (rev 3841)
@@ -39,13 +39,13 @@
 {
 	ADM_ad_plugin blank;
 	printf("[ADM_ad_plugin] Scanning %s\n",ADM_GetFileName(file));
-	ADM_LibWrapper wrapper;
-	 if(true!=wrapper.loadLibrary(file))
+	ADM_LibWrapper *wrapper=new ADM_LibWrapper;
+	 if(true!=wrapper->loadLibrary(file))
 	 {
 		 printf("Load failed\n");
-		 return 0;
+		 goto Err_ad;
 	 }
-#define FUNCKY(a,b,c)	 blank.a=(b *)wrapper.getSymbol(#c); if(!blank.a) { printf("[ADM_ad_plugin]"#c" failed\n");return 0;}
+#define FUNCKY(a,b,c)	 blank.a=(b *)wrapper->getSymbol(#c); if(!blank.a) { printf("[ADM_ad_plugin]"#c" failed\n"); goto Err_ad;;}
 	 FUNCKY(create,ADM_ad_CreateFunction,create);
 	 FUNCKY(destroy,ADM_ad_DeleteFunction,destroy);
 	 FUNCKY(supportedFormat,ADM_ad_SupportedFormat,supportedFormat);
@@ -58,7 +58,7 @@
 	 {
 		 	printf("[ADM_ad_plugin] File %s has API version too old (%d vs %d)\n",
 		 			ADM_GetFileName(file),ADM_GetFileName(file),AD_API_VERSION);
-		 	return 0;
+		 	 goto Err_ad;
 	 }
 	 // Get infos
 	 uint32_t major,minor,patch;
@@ -67,12 +67,18 @@
 	 desc=blank.getInfo();
 	 // Print out stuff
 	 printf("[ADM_ad_plugin] Plugin loaded version %d.%d.%d, desc : %s\n",major,minor,patch,desc);
+	 
 	 //
-	 ADM_ad_plugin *p=new ADM_ad_plugin;
-	 *p=blank;
-	 ADM_audioPlugins.push_back(p);
+	 {
+		 ADM_ad_plugin *p=new ADM_ad_plugin;
+		 *p=blank;
+		 ADM_audioPlugins.push_back(p);
+	 }
+	 return 1;
+Err_ad:
+	delete wrapper;
+	return 0;
 	
-	
 }
 /**
  * 	\fn ADM_ad_loadPlugins
@@ -112,6 +118,7 @@
 		ADM_ad_plugin *a=ADM_audioPlugins[i];
 		ADM_assert(a);
 		ADM_assert(a->supportedFormat);
+		
 		if(a->supportedFormat(fourcc)==true)
 		{
 			ADM_assert(a->create);

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_dynamicLoading.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_dynamicLoading.cpp	2008-03-06 21:48:49 UTC (rev 3840)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_dynamicLoading.cpp	2008-03-07 06:54:27 UTC (rev 3841)
@@ -26,7 +26,12 @@
 #endif
 
 #include "ADM_dynamicLoading.h"
-
+// By default the library is silent, being part of ADM_core cannot use the debug_id funcs
+#if 1
+#define aprintf(...) {}
+#else
+#define aprintf printf
+#endif
 ADM_LibWrapper::ADM_LibWrapper()
 {
 	initialised = false;
@@ -37,7 +42,7 @@
 {
 	if (hinstLib != NULL)
 	{
-		printf("Unloading library 0x%08x\n", hinstLib);
+		aprintf("Unloading library 0x%08x\n", hinstLib);
 
 	#ifdef ADM_WIN32
 		FreeLibrary((HINSTANCE) hinstLib);
@@ -72,14 +77,14 @@
 	{
 		char* lpMsg = formatMessage(GetLastError());
 
-		printf("Unable to load [%s]: %s\n", path, lpMsg);
+		aprintf("Unable to load [%s]: %s\n", path, lpMsg);
 		LocalFree(lpMsg);
 
 		return false;
 	}
 	else
 	{
-		printf("Loaded library %s, handle = 0x%08x\n", path, hinstLib);
+		aprintf("Loaded library %s, handle = 0x%08x\n", path, hinstLib);
 
 		return true;
 	}
@@ -88,13 +93,13 @@
 	
 	if (hinstLib == NULL)
 	{
-		printf("Unable to load [%s]: %s\n", path, dlerror());
+		aprintf("Unable to load [%s]: %s\n", path, dlerror());
 
 		return false;
 	}
 	else
 	{
-		printf("Loaded library %s, handle = 0x%08x\n", path, hinstLib);
+		aprintf("Loaded library %s, handle = 0x%08x\n", path, hinstLib);
 
 		return true;
 	}
@@ -110,7 +115,7 @@
 	{
 		char* lpMsg = formatMessage(GetLastError());
 
-		printf("Unable to find symbol [%s]: %s\n", name, lpMsg);
+		aprintf("Unable to find symbol [%s]: %s\n", name, lpMsg);
 		LocalFree(lpMsg);
 	}
 
@@ -120,7 +125,7 @@
 
 	if (procAddr == NULL)
 	{
-		printf("Unable to find symbol [%s]: %s\n", name, dlerror());
+		aprintf("Unable to find symbol [%s]: %s\n", name, dlerror());
 	}
 
 	return procAddr;



From gruntster at mail.berlios.de  Fri Mar  7 12:18:43 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Fri, 7 Mar 2008 12:18:43 +0100
Subject: [Avidemux-svn-commit] r3842 - in
	branches/avidemux_2.5_branch_gruntster/avidemux:
	ADM_libraries/ADM_mplex ADM_osSupport
Message-ID: <200803071118.m27BIhdm014364@sheep.berlios.de>

Author: gruntster
Date: 2008-03-07 12:18:41 +0100 (Fri, 07 Mar 2008)
New Revision: 3842

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mplexin.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mplexout.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_crashHook.cpp
Log:
[Merge] fix build issues with Cygwin after merging

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mplexin.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mplexin.cpp	2008-03-07 06:54:27 UTC (rev 3841)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mplexin.cpp	2008-03-07 11:18:41 UTC (rev 3842)
@@ -17,15 +17,14 @@
 #include <sys/stat.h>
 #include <errno.h>
 
+#include "ADM_default.h"
+#include "ADM_threads.h"
 #include "interact.hpp"
 
 #undef malloc
 #undef realloc
 #undef free
 
-#include "ADM_default.h"
-#include "ADM_threads.h"
-
 #include "ADM_toolkit/toolkit.hxx"
 
 #include "ADM_osSupport/ADM_debugID.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mplexout.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mplexout.cpp	2008-03-07 06:54:27 UTC (rev 3841)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mplexout.cpp	2008-03-07 11:18:41 UTC (rev 3842)
@@ -4,15 +4,14 @@
 #include <string.h>
 #include <sys/stat.h>
 
+#include "ADM_default.h"
+#include "ADM_threads.h"
 #include "interact.hpp"
 
 #undef malloc
 #undef realloc
 #undef free
 
-#include "ADM_default.h"
-#include "ADM_threads.h"
-
 #include "ADM_toolkit/toolkit.hxx"
 
 #include "ADM_osSupport/ADM_debugID.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_crashHook.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_crashHook.cpp	2008-03-07 06:54:27 UTC (rev 3841)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_crashHook.cpp	2008-03-07 11:18:41 UTC (rev 3842)
@@ -14,23 +14,8 @@
  *                                                                         *
  ***************************************************************************/
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <stdarg.h>
-#include <string.h>
-#include <unistd.h>
-#include <math.h>
-
 #include "ADM_default.h"
-
-#ifdef __WIN32
-#include <windows.h>
-#include <excpt.h>
-#include <imagehlp.h>
-#endif
-
 #include "ADM_toolkit/toolkit.hxx"
-#include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
 #include "ADM_editor/ADM_edit.hxx"
 extern ADM_Composer *video_body;
 



From mean at mail.berlios.de  Fri Mar  7 19:34:15 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 7 Mar 2008 19:34:15 +0100
Subject: [Avidemux-svn-commit] r3843 - in
	branches/avidemux_2.5_branch_mean/avidemux: ADM_audiocodec
	ADM_libraries ADM_libraries/ADM_liba52
	plugins/ADM_audiodecoder plugins/ADM_audiodecoder/ADM_ad_ac3
	plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52
	plugins/ADM_audiodecoder/ADM_ad_mad
Message-ID: <200803071834.m27IYFW1000411@sheep.berlios.de>

Author: mean
Date: 2008-03-07 19:34:14 +0100 (Fri, 07 Mar 2008)
New Revision: 3843

Added:
   branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/
   branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_ad_a52.cpp
   branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/
   branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/CMakeLists.txt
   branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/Makefile.am
   branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/a52.h
   branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/a52_internal.h
   branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/attributes.h
   branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/bit_allocate.c
   branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/bitstream.c
   branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/bitstream.h
   branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/downmix.c
   branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/imdct.c
   branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/mm_accel.h
   branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/parse.c
   branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/tables.h
   branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/CMakeLists.txt
Removed:
   branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_codecac3.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/CMakeLists.txt
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/Makefile.am
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/a52.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/a52_internal.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/attributes.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/bit_allocate.c
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/bitstream.c
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/bitstream.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/downmix.c
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/imdct.c
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/mm_accel.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/parse.c
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/tables.h
Modified:
   branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_ad_plugin.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_audiocodec.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_audiocodec.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_pluginLoad.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/CMakeLists.txt
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/CMakeLists.txt
   branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/ADM_ad_mad.cpp
   branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/CMakeLists.txt
Log:
[Audio plugin] Cleanup + also do ac3


Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_ad_plugin.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_ad_plugin.h	2008-03-07 11:18:41 UTC (rev 3842)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_ad_plugin.h	2008-03-07 18:34:14 UTC (rev 3843)
@@ -19,6 +19,42 @@
 typedef uint32_t         (ADM_ad_GetApiVersion)(void);
 typedef bool            (ADM_ad_GetDecoderVersion)(uint32_t *major, uint32_t *minor, uint32_t *patch);
 typedef const char       *(ADM_ADM_ad_GetInfo)(void);
-/* */
 
+/* handly macro to declare plugins*/
+
+#define DECLARE_AUDIO_DECODER(Class,Major,Minor,Patch,Formats,Desc) \
+	extern "C" { \
+	ADM_Audiocodec *create(uint32_t fourcc,	WAVHeader *info,uint32_t extraLength,uint8_t *extraData)\
+	{ \
+		return new Class(fourcc,	info,extraLength,extraData);\
+	} \
+	ADM_Audiocodec *destroy(ADM_Audiocodec *codec) \
+	{ \
+		Class *a=(Class *)codec;\
+		delete a;\
+	}\
+	bool supportedFormat(uint32_t audioFourcc) \
+	{ \
+		for(int i=0;i<sizeof(Formats)/sizeof(uint32_t);i++)\
+			if(Formats[i]==audioFourcc) \
+				return true; \
+		return false; \
+	} \
+	uint32_t getApiVersion(void)\
+	{\
+			return AD_API_VERSION;\
+	}\
+	bool getDecoderVersion(uint32_t *major,uint32_t *minor, uint32_t *patch)\
+	{\
+		*major=Major;\
+		*minor=Minor;\
+		*patch=Patch;\
+		return true;\
+	}\
+	const char *getInfo(void)\
+	{\
+		return Desc; \
+	}\
+	}
+
 #endif

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_audiocodec.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_audiocodec.cpp	2008-03-07 11:18:41 UTC (rev 3842)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_audiocodec.cpp	2008-03-07 18:34:14 UTC (rev 3843)
@@ -92,13 +92,6 @@
 					out= (ADM_Audiocodec *)new ADM_AudiocodecWav(fourcc);
 #endif					
                   		break;
-#ifdef USE_AC3
-				case WAV_AC3:
-        				printf("\n Audio codec:  AC3\n");
-
-					out= (ADM_Audiocodec *) new ADM_AudiocodecAC3(fourcc, info);
-                  break;
-#endif
 #ifdef USE_LIBDCA
                 case WAV_DTS:
 					if (dca->isAvailable())
@@ -109,16 +102,6 @@
 
 					break;
 #endif
-#if 0
-#ifdef USE_MP3
-				case WAV_MP3:
-				case WAV_MP2:
-        				printf("\n Audio codec:  MP2-3\n");
-
-					out= (ADM_Audiocodec *) new ADM_AudiocodecMP3(fourcc);
-                  break;
-#endif
-#endif
 #ifdef USE_VORBIS
 				case WAV_OGG:
 						printf("\n Ogg/Vorbis \n");

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_audiocodec.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_audiocodec.h	2008-03-07 11:18:41 UTC (rev 3842)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_audiocodec.h	2008-03-07 18:34:14 UTC (rev 3843)
@@ -74,27 +74,7 @@
 		uint8_t isDecompressable(void) {return 0;}
 };
 
-#ifdef USE_AC3
-#define ADM_AC3_BUFFER (50000*2)
-class ADM_AudiocodecAC3 : public     ADM_Audiocodec
-{
-	protected:
-		void *ac3_handle;
-		void *ac3_sample;
-		uint32_t _downmix;
 
-	public:
-		ADM_AudiocodecAC3(uint32_t fourcc, WAVHeader *info);
-		virtual	~ADM_AudiocodecAC3();
-		virtual	uint8_t beginDecompress(void);
-		virtual	uint8_t endDecompress(void);
-		virtual	uint8_t run(uint8_t *inptr, uint32_t nbIn, float *outptr, uint32_t *nbOut);
-		virtual	uint8_t isCompressed(void) {return 1;}
-		virtual	uint8_t isDecompressable(void) {return 1;}
-
-   };
-#endif
-
 #ifdef USE_LIBDCA
 class ADM_AudiocodecDCA : public     ADM_Audiocodec
 {

Deleted: branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_codecac3.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_codecac3.cpp	2008-03-07 11:18:41 UTC (rev 3842)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_codecac3.cpp	2008-03-07 18:34:14 UTC (rev 3843)
@@ -1,204 +0,0 @@
-/***************************************************************************
-                          ADM_codecac3.cpp  -  description
-                             -------------------
-    begin                : Fri May 31 2002
-    copyright            : (C) 2002 by mean
-    email                : fixounet at free.fr
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <ADM_assert.h>
-#include <math.h>
-
-#include "config.h"
-#include "fourcc.h"
-#include "ADM_audio/aviaudio.hxx"
-#include "ADM_audiocodec/ADM_audiocodec.h"
-#include "ADM_audiofilter/audiofilter_channel_route.h"
-
-#include "prefs.h"
-
-#ifdef USE_AC3
-extern "C" {
-#include "ADM_liba52/a52.h"
-#include "ADM_liba52/mm_accel.h"
-};
-
-#define AC3_HANDLE ((a52_state_t *)ac3_handle)
-
-ADM_AudiocodecAC3::ADM_AudiocodecAC3( uint32_t fourcc, WAVHeader *info) :   ADM_Audiocodec(fourcc)
-{
-    int flags=0;
-    ADM_assert(fourcc==WAV_AC3);
-    ac3_handle=NULL;
-    ac3_sample=NULL;
-#if (defined( ARCH_X86)  || defined(ARCH_X86_64))
-#define CHK(x,y) if(CpuCaps::has##x()) flags|=MM_ACCEL_X86_##y;
-    CHK(MMX,MMX);
-    CHK(3DNOW,3DNOW);
-    CHK(MMXEXT,MMXEXT);
-#endif
-    
-    ac3_handle=(void *)a52_init(flags);
-    if(!ac3_handle)
-    {
-        printf("Cannot init a52\n");
-        ADM_assert(0);   
-    }
-    ac3_sample=(sample_t *)a52_samples(AC3_HANDLE);
-    if(!ac3_sample)
-    {
-        printf("Cannot init a52 sample\n");
-        ADM_assert(0);   
-    }
-        _downmix=0;
-      _wavHeader = info;
-      ADM_assert(_wavHeader);
-}
-
-ADM_AudiocodecAC3::~ADM_AudiocodecAC3( )
-{
-    if(ac3_handle)
-    {
-        a52_free(AC3_HANDLE);
-        ac3_handle=NULL;
-        ac3_sample=NULL;
-    }
-}
-
-uint8_t ADM_AudiocodecAC3::beginDecompress( void )
-{
-		return 1;
-}
-
-uint8_t ADM_AudiocodecAC3::endDecompress( void )
-{
-    return 1;
-}
-
-uint8_t ADM_AudiocodecAC3::run(uint8_t *inptr, uint32_t nbIn, float *outptr,   uint32_t *nbOut)
-{
-    uint32_t avail;
-    uint32_t length;
-    int flags = 0, samprate = 0, bitrate = 0;
-    uint8_t chan = _wavHeader->channels;
-    *nbOut=0;
-
-    //  Ready to decode
-    while(nbIn)
-    {
-        if(nbIn<7)
-        {
-            if(nbIn)
-                printf("[a52]: no data to decode avail %u\n",nbIn);
-            break;
-        }
-        length = a52_syncinfo(inptr, &flags, &samprate, &bitrate);
-        if(length==0)
-        {
-            printf("[a52] No startcode found\n");
-            break;
-        }
-        if(length>nbIn)
-        {
-            // not enough data
-            break;
-        }
-
-	if (ch_route.mode < 1) {
-		CHANNEL_TYPE *p_ch_type = ch_route.input_type;
-		if (flags & A52_LFE) {
-			*(p_ch_type++) = CH_LFE;
-		}
-		switch (flags & A52_CHANNEL_MASK) {
-			case A52_MONO:
-				*(p_ch_type++) = CH_MONO;
-			break;
-			case A52_STEREO:
-			case A52_DOLBY:
-				*(p_ch_type++) = CH_FRONT_LEFT;
-				*(p_ch_type++) = CH_FRONT_RIGHT;
-			break;
-			case A52_3F:
-				*(p_ch_type++) = CH_FRONT_LEFT;
-				*(p_ch_type++) = CH_FRONT_CENTER;
-				*(p_ch_type++) = CH_FRONT_RIGHT;
-			break;
-			case A52_2F1R:
-				*(p_ch_type++) = CH_FRONT_LEFT;
-				*(p_ch_type++) = CH_FRONT_RIGHT;
-				*(p_ch_type++) = CH_REAR_CENTER;
-			break;
-			case A52_3F1R:
-				*(p_ch_type++) = CH_FRONT_LEFT;
-				*(p_ch_type++) = CH_FRONT_CENTER;
-				*(p_ch_type++) = CH_FRONT_RIGHT;
-				*(p_ch_type++) = CH_REAR_CENTER;
-			break;
-			case A52_2F2R:
-				*(p_ch_type++) = CH_FRONT_LEFT;
-				*(p_ch_type++) = CH_FRONT_RIGHT;
-				*(p_ch_type++) = CH_REAR_LEFT;
-				*(p_ch_type++) = CH_REAR_RIGHT;
-			break;
-			case A52_3F2R:
-				*(p_ch_type++) = CH_FRONT_LEFT;
-				*(p_ch_type++) = CH_FRONT_CENTER;
-				*(p_ch_type++) = CH_FRONT_RIGHT;
-				*(p_ch_type++) = CH_REAR_LEFT;
-				*(p_ch_type++) = CH_REAR_RIGHT;
-			break;
-			default:
-				ADM_assert(0);
-		}
-	}
-
-        sample_t level = 1, bias = 0;
-
-        if (a52_frame(AC3_HANDLE, inptr, &flags, &level, bias))
-        {
-            printf("\n A52_frame failed!");
-            inptr+=length;
-            nbIn-=length;
-            *nbOut += 256 * chan * 6;
-            break;
-        };
-        inptr+=length;
-        nbIn-=length;
-        *nbOut += 256 * chan * 6;
-
-        float *cur;
-        for (int i = 0; i < 6; i++) {
-                if (a52_block(AC3_HANDLE)) {
-                        printf("\n A52_block failed! on fblock :%lu", i);
-                        // in that case we silent out the chunk
-                        memset(outptr, 0, 256 * chan * sizeof(float));
-                } else {
-                        for (int k = 0; k < chan; k++) {
-                                sample_t *sample=(sample_t *)ac3_sample;
-                                sample += 256 * k;
-                                cur = outptr + k;
-                                for (int j = 0; j < 256; j++) {
-                                        *cur = *sample++;
-                                        cur+=chan;
-                                }
-                        }
-                }
-                outptr += chan * 256;
-        }
-    }
-    return 1; 
-
-}
-
-#endif

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_pluginLoad.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_pluginLoad.cpp	2008-03-07 11:18:41 UTC (rev 3842)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_pluginLoad.cpp	2008-03-07 18:34:14 UTC (rev 3843)
@@ -1,6 +1,11 @@
 /**
         \file ADM_pluginLoad.cpp
         \brief Interface for dynamically loaded audio decoder
+        
+        There are 2 known problem here
+        1: The destructor is called instead of calling destroy in the class factory
+        2: Memory leak, ADM_audioPlugins is not destroyed as of today
+        
 */
 
 
@@ -28,6 +33,7 @@
 	ADM_ad_GetApiVersion		*getApiVersion;
 	ADM_ad_GetDecoderVersion	*getDecoderVersion;
 	ADM_ADM_ad_GetInfo			*getInfo;
+	ADM_LibWrapper				*wrapper;
 };
 
 std::vector<ADM_ad_plugin *> ADM_audioPlugins;
@@ -64,6 +70,7 @@
 	 uint32_t major,minor,patch;
 	 const char *desc;
 	 blank.getDecoderVersion(&major,&minor,&patch);
+	 blank.wrapper=wrapper;
 	 desc=blank.getInfo();
 	 // Print out stuff
 	 printf("[ADM_ad_plugin] Plugin loaded version %d.%d.%d, desc : %s\n",major,minor,patch,desc);
@@ -87,7 +94,7 @@
 uint8_t ADM_ad_loadPlugins(void)
 {
 #define MAX_EXTERNAL_FILTER 50
-	  char *path="/home/fx/workspace/avidemux_git/avidemux_2.5_branch_mean/Build/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad";
+	  char *path="/home/fx/ADM_plugins";
 	  char *files[MAX_EXTERNAL_FILTER];
 	  uint32_t nbFile;
 	  

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/CMakeLists.txt	2008-03-07 11:18:41 UTC (rev 3842)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/CMakeLists.txt	2008-03-07 18:34:14 UTC (rev 3843)
@@ -1,5 +1,5 @@
 
-SET(ADM_audiocodec_SRCS ADM_8bits.cpp       ADM_codecac3.cpp   
+SET(ADM_audiocodec_SRCS ADM_8bits.cpp          
 ADM_codecimaadpcm.cpp  
 ADM_codecmsadpcm.cpp  
 ADM_codeculaw.cpp  ADM_codecwma.cpp  ADM_lpcm.cpp

Deleted: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/CMakeLists.txt	2008-03-07 11:18:41 UTC (rev 3842)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/CMakeLists.txt	2008-03-07 18:34:14 UTC (rev 3843)
@@ -1,14 +0,0 @@
-################################
-#
-################################
-include(AdmLib)
-SET(ADM_LIB ADM_liba52)
-#
-SET(${ADM_LIB}_SRCS 
-bit_allocate.c  bitstream.c  downmix.c  imdct.c  parse.c
-)
-ADD_LIBRARY(${ADM_LIB} STATIC ${${ADM_LIB}_SRCS})
-ADD_ADM_LIB(${ADM_LIB} ADM_libraries)
-
-
-################################

Deleted: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/Makefile.am	2008-03-07 11:18:41 UTC (rev 3842)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/Makefile.am	2008-03-07 18:34:14 UTC (rev 3843)
@@ -1,10 +0,0 @@
-noinst_LIBRARIES = libADM_liba52.a
-
-INCLUDES = $(all_includes) 
-
-libADM_liba52_a_METASOURCES = AUTO
-
-libADM_liba52_a_SOURCES = bitstream.c imdct.c bit_allocate.c parse.c downmix.c
-
-EXTRA_DIST = a52.h  a52_internal.h  attributes.h  bitstream.h  mm_accel.h  tables.h bit_allocate.c  bitstream.c  downmix.c  imdct.c  parse.c
-

Deleted: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/a52.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/a52.h	2008-03-07 11:18:41 UTC (rev 3842)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/a52.h	2008-03-07 18:34:14 UTC (rev 3843)
@@ -1,62 +0,0 @@
-/*
- * a52.h
- * Copyright (C) 2000-2002 Michel Lespinasse <walken at zoy.org>
- * Copyright (C) 1999-2000 Aaron Holtzman <aholtzma at ess.engr.uvic.ca>
- *
- * This file is part of a52dec, a free ATSC A-52 stream decoder.
- * See http://liba52.sourceforge.net/ for updates.
- *
- * a52dec is free software; you can redistribute it and/or modify
- * it under the terms of the GNU General Public License as published by
- * the Free Software Foundation; either version 2 of the License, or
- * (at your option) any later version.
- *
- * a52dec is distributed in the hope that it will be useful,
- * but WITHOUT ANY WARRANTY; without even the implied warranty of
- * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- * GNU General Public License for more details.
- *
- * You should have received a copy of the GNU General Public License
- * along with this program; if not, write to the Free Software
- * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
- */
-
-#ifndef A52_H
-#define A52_H
-
-#ifndef LIBA52_DOUBLE
-typedef float sample_t;
-#else
-typedef double sample_t;
-#endif
-
-typedef struct a52_state_s a52_state_t;
-
-#define A52_CHANNEL 0
-#define A52_MONO 1
-#define A52_STEREO 2
-#define A52_3F 3
-#define A52_2F1R 4
-#define A52_3F1R 5
-#define A52_2F2R 6
-#define A52_3F2R 7
-#define A52_CHANNEL1 8
-#define A52_CHANNEL2 9
-#define A52_DOLBY 10
-#define A52_CHANNEL_MASK 15
-
-#define A52_LFE 16
-#define A52_ADJUST_LEVEL 32
-
-a52_state_t * a52_init (uint32_t mm_accel);
-sample_t * a52_samples (a52_state_t * state);
-int a52_syncinfo (uint8_t * buf, int * flags,
-		  int * sample_rate, int * bit_rate);
-int a52_frame (a52_state_t * state, uint8_t * buf, int * flags,
-	       sample_t * level, sample_t bias);
-void a52_dynrng (a52_state_t * state,
-		 sample_t (* call) (sample_t, void *), void * data);
-int a52_block (a52_state_t * state);
-void a52_free (a52_state_t * state);
-
-#endif /* A52_H */

Deleted: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/a52_internal.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/a52_internal.h	2008-03-07 11:18:41 UTC (rev 3842)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/a52_internal.h	2008-03-07 18:34:14 UTC (rev 3843)
@@ -1,123 +0,0 @@
-/*
- * a52_internal.h
- * Copyright (C) 2000-2002 Michel Lespinasse <walken at zoy.org>
- * Copyright (C) 1999-2000 Aaron Holtzman <aholtzma at ess.engr.uvic.ca>
- *
- * This file is part of a52dec, a free ATSC A-52 stream decoder.
- * See http://liba52.sourceforge.net/ for updates.
- *
- * a52dec is free software; you can redistribute it and/or modify
- * it under the terms of the GNU General Public License as published by
- * the Free Software Foundation; either version 2 of the License, or
- * (at your option) any later version.
- *
- * a52dec is distributed in the hope that it will be useful,
- * but WITHOUT ANY WARRANTY; without even the implied warranty of
- * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- * GNU General Public License for more details.
- *
- * You should have received a copy of the GNU General Public License
- * along with this program; if not, write to the Free Software
- * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
- */
-
-typedef struct {
-    uint8_t bai;		/* fine SNR offset, fast gain */
-    uint8_t deltbae;		/* delta bit allocation exists */
-    int8_t deltba[50];		/* per-band delta bit allocation */
-} ba_t;
-
-typedef struct {
-    uint8_t exp[256];		/* decoded channel exponents */
-    int8_t bap[256];		/* derived channel bit allocation */
-} expbap_t;
-
-struct a52_state_s {
-    uint8_t fscod;		/* sample rate */
-    uint8_t halfrate;		/* halfrate factor */
-    uint8_t acmod;		/* coded channels */
-    uint8_t lfeon;		/* coded lfe channel */
-    sample_t clev;		/* centre channel mix level */
-    sample_t slev;		/* surround channels mix level */
-
-    int output;			/* type of output */
-    sample_t level;		/* output level */
-    sample_t bias;		/* output bias */
-
-    int dynrnge;		/* apply dynamic range */
-    sample_t dynrng;		/* dynamic range */
-    void * dynrngdata;		/* dynamic range callback funtion and data */
-    sample_t (* dynrngcall) (sample_t range, void * dynrngdata);
-
-    uint8_t chincpl;		/* channel coupled */
-    uint8_t phsflginu;		/* phase flags in use (stereo only) */
-    uint8_t cplstrtmant;	/* coupling channel start mantissa */
-    uint8_t cplendmant;		/* coupling channel end mantissa */
-    uint32_t cplbndstrc;	/* coupling band structure */
-    sample_t cplco[5][18];	/* coupling coordinates */
-
-    /* derived information */
-    uint8_t cplstrtbnd;		/* coupling start band (for bit allocation) */
-    uint8_t ncplbnd;		/* number of coupling bands */
-
-    uint8_t rematflg;		/* stereo rematrixing */
-
-    uint8_t endmant[5];		/* channel end mantissa */
-
-    uint16_t bai;		/* bit allocation information */
-
-    uint32_t * buffer_start;
-    uint16_t lfsr_state;	/* dither state */
-    uint32_t bits_left;
-    uint32_t current_word;
-
-    uint8_t csnroffst;		/* coarse SNR offset */
-    ba_t cplba;			/* coupling bit allocation parameters */
-    ba_t ba[5];			/* channel bit allocation parameters */
-    ba_t lfeba;			/* lfe bit allocation parameters */
-
-    uint8_t cplfleak;		/* coupling fast leak init */
-    uint8_t cplsleak;		/* coupling slow leak init */
-
-    expbap_t cpl_expbap;
-    expbap_t fbw_expbap[5];
-    expbap_t lfe_expbap;
-
-    sample_t * samples;
-    int downmixed;
-};
-
-#define LEVEL_PLUS6DB 2.0
-#define LEVEL_PLUS3DB 1.4142135623730951
-#define LEVEL_3DB 0.7071067811865476
-#define LEVEL_45DB 0.5946035575013605
-#define LEVEL_6DB 0.5
-
-#define LEVEL_DPL2_1 0.8165
-#define LEVEL_DPL2_2 0.5774
-
-#define EXP_REUSE (0)
-#define EXP_D15   (1)
-#define EXP_D25   (2)
-#define EXP_D45   (3)
-
-#define DELTA_BIT_REUSE (0)
-#define DELTA_BIT_NEW (1)
-#define DELTA_BIT_NONE (2)
-#define DELTA_BIT_RESERVED (3)
-
-void a52_bit_allocate (a52_state_t * state, ba_t * ba, int bndstart,
-		       int start, int end, int fastleak, int slowleak,
-		       expbap_t * expbap);
-
-int a52_downmix_init (int input, int flags, sample_t * level,
-		      sample_t clev, sample_t slev);
-int a52_downmix_coeff (sample_t * coeff, int acmod, int output, sample_t level,
-		       sample_t clev, sample_t slev);
-void a52_downmix (sample_t * samples, int acmod, int output, sample_t bias,
-		  sample_t clev, sample_t slev);
-void a52_upmix (sample_t * samples, int acmod, int output);
-
-void a52_imdct_init (uint32_t mm_accel);
-void a52_imdct_256 (sample_t * data, sample_t * delay, sample_t bias);
-void a52_imdct_512 (sample_t * data, sample_t * delay, sample_t bias);

Deleted: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/attributes.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/attributes.h	2008-03-07 11:18:41 UTC (rev 3842)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/attributes.h	2008-03-07 18:34:14 UTC (rev 3843)
@@ -1,29 +0,0 @@
-/*
- * attributes.h
- * Copyright (C) 2000-2002 Michel Lespinasse <walken at zoy.org>
- * Copyright (C) 1999-2000 Aaron Holtzman <aholtzma at ess.engr.uvic.ca>
- *
- * This file is part of a52dec, a free ATSC A-52 stream decoder.
- * See http://liba52.sourceforge.net/ for updates.
- *
- * a52dec is free software; you can redistribute it and/or modify
- * it under the terms of the GNU General Public License as published by
- * the Free Software Foundation; either version 2 of the License, or
- * (at your option) any later version.
- *
- * a52dec is distributed in the hope that it will be useful,
- * but WITHOUT ANY WARRANTY; without even the implied warranty of
- * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- * GNU General Public License for more details.
- *
- * You should have received a copy of the GNU General Public License
- * along with this program; if not, write to the Free Software
- * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
- */
-
-/* use gcc attribs to align critical data structures */
-#ifdef ATTRIBUTE_ALIGNED_MAX
-#define ATTR_ALIGN(align) __attribute__ ((__aligned__ ((ATTRIBUTE_ALIGNED_MAX < align) ? ATTRIBUTE_ALIGNED_MAX : align)))
-#else
-#define ATTR_ALIGN(align)
-#endif

Deleted: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/bit_allocate.c
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/bit_allocate.c	2008-03-07 11:18:41 UTC (rev 3842)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/bit_allocate.c	2008-03-07 18:34:14 UTC (rev 3843)
@@ -1,265 +0,0 @@
-/*
- * bit_allocate.c
- * Copyright (C) 2000-2002 Michel Lespinasse <walken at zoy.org>
- * Copyright (C) 1999-2000 Aaron Holtzman <aholtzma at ess.engr.uvic.ca>
- *
- * This file is part of a52dec, a free ATSC A-52 stream decoder.
- * See http://liba52.sourceforge.net/ for updates.
- *
- * a52dec is free software; you can redistribute it and/or modify
- * it under the terms of the GNU General Public License as published by
- * the Free Software Foundation; either version 2 of the License, or
- * (at your option) any later version.
- *
- * a52dec is distributed in the hope that it will be useful,
- * but WITHOUT ANY WARRANTY; without even the implied warranty of
- * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- * GNU General Public License for more details.
- *
- * You should have received a copy of the GNU General Public License
- * along with this program; if not, write to the Free Software
- * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
- */
-
-#include "config.h"
-
-#include <inttypes.h>
-
-#include "a52.h"
-#include "a52_internal.h"
-
-static int hthtab[3][50] = {
-    {0x730, 0x730, 0x7c0, 0x800, 0x820, 0x840, 0x850, 0x850, 0x860, 0x860,
-     0x860, 0x860, 0x860, 0x870, 0x870, 0x870, 0x880, 0x880, 0x890, 0x890,
-     0x8a0, 0x8a0, 0x8b0, 0x8b0, 0x8c0, 0x8c0, 0x8d0, 0x8e0, 0x8f0, 0x900,
-     0x910, 0x910, 0x910, 0x910, 0x900, 0x8f0, 0x8c0, 0x870, 0x820, 0x7e0,
-     0x7a0, 0x770, 0x760, 0x7a0, 0x7c0, 0x7c0, 0x6e0, 0x400, 0x3c0, 0x3c0},
-    {0x710, 0x710, 0x7a0, 0x7f0, 0x820, 0x830, 0x840, 0x850, 0x850, 0x860,
-     0x860, 0x860, 0x860, 0x860, 0x870, 0x870, 0x870, 0x880, 0x880, 0x880,
-     0x890, 0x890, 0x8a0, 0x8a0, 0x8b0, 0x8b0, 0x8c0, 0x8c0, 0x8e0, 0x8f0,
-     0x900, 0x910, 0x910, 0x910, 0x910, 0x900, 0x8e0, 0x8b0, 0x870, 0x820,
-     0x7e0, 0x7b0, 0x760, 0x770, 0x7a0, 0x7c0, 0x780, 0x5d0, 0x3c0, 0x3c0},
-    {0x680, 0x680, 0x750, 0x7b0, 0x7e0, 0x810, 0x820, 0x830, 0x840, 0x850,
-     0x850, 0x850, 0x860, 0x860, 0x860, 0x860, 0x860, 0x860, 0x860, 0x860,
-     0x870, 0x870, 0x870, 0x870, 0x880, 0x880, 0x880, 0x890, 0x8a0, 0x8b0,
-     0x8c0, 0x8d0, 0x8e0, 0x8f0, 0x900, 0x910, 0x910, 0x910, 0x900, 0x8f0,
-     0x8d0, 0x8b0, 0x840, 0x7f0, 0x790, 0x760, 0x7a0, 0x7c0, 0x7b0, 0x720}
-};
-
-static int8_t baptab[305] = {
-    16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16,
-    16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16,
-    16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16,
-    16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16,
-    16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16,
-    16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16,	/* 93 padding elems */
-
-    16, 16, 16, 16, 16, 16, 16, 16, 16, 14, 14, 14, 14, 14, 14, 14,
-    14, 12, 12, 12, 12, 11, 11, 11, 11, 10, 10, 10, 10,  9,  9,  9,
-     9,  8,  8,  8,  8,  7,  7,  7,  7,  6,  6,  6,  6,  5,  5,  5,
-     5,  4,  4, -3, -3,  3,  3,  3, -2, -2, -1, -1, -1, -1, -1,  0,
-
-     0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
-     0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
-     0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
-     0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
-     0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
-     0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
-     0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
-     0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
-     0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
-     0,  0,  0,  0					/* 148 padding elems */
-};
-
-static int bndtab[30] = {21, 22,  23,  24,  25,  26,  27,  28,  31,  34,
-			 37, 40,  43,  46,  49,  55,  61,  67,  73,  79,
-			 85, 97, 109, 121, 133, 157, 181, 205, 229, 253};
-
-static int8_t latab[256] = {
-    -64, -63, -62, -61, -60, -59, -58, -57, -56, -55, -54, -53,
-    -52, -52, -51, -50, -49, -48, -47, -47, -46, -45, -44, -44,
-    -43, -42, -41, -41, -40, -39, -38, -38, -37, -36, -36, -35,
-    -35, -34, -33, -33, -32, -32, -31, -30, -30, -29, -29, -28,
-    -28, -27, -27, -26, -26, -25, -25, -24, -24, -23, -23, -22,
-    -22, -21, -21, -21, -20, -20, -19, -19, -19, -18, -18, -18,
-    -17, -17, -17, -16, -16, -16, -15, -15, -15, -14, -14, -14,
-    -13, -13, -13, -13, -12, -12, -12, -12, -11, -11, -11, -11,
-    -10, -10, -10, -10, -10,  -9,  -9,  -9,  -9,  -9,  -8,  -8,
-     -8,  -8,  -8,  -8,  -7,  -7,  -7,  -7,  -7,  -7,  -6,  -6,
-     -6,  -6,  -6,  -6,  -6,  -6,  -5,  -5,  -5,  -5,  -5,  -5,
-     -5,  -5,  -4,  -4,  -4,  -4,  -4,  -4,  -4,  -4,  -4,  -4,
-     -4,  -3,  -3,  -3,  -3,  -3,  -3,  -3,  -3,  -3,  -3,  -3,
-     -3,  -3,  -3,  -2,  -2,  -2,  -2,  -2,  -2,  -2,  -2,  -2,
-     -2,  -2,  -2,  -2,  -2,  -2,  -2,  -2,  -2,  -2,  -1,  -1,
-     -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
-     -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
-     -1,  -1,  -1,  -1,  -1,  -1,   0,   0,   0,   0,   0,   0,
-      0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,
-      0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,
-      0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,
-      0,   0,   0,   0
-};
-
-#define UPDATE_LEAK() 		\
-do {				\
-    fastleak += fdecay;		\
-    if (fastleak > psd + fgain)	\
-	fastleak = psd + fgain;	\
-    slowleak += sdecay;		\
-    if (slowleak > psd + sgain)	\
-	slowleak = psd + sgain;	\
-} while (0)
-
-#define COMPUTE_MASK()				\
-do {						\
-    if (psd > dbknee)				\
-	mask -= (psd - dbknee) >> 2;		\
-    if (mask > hth [i >> halfrate])		\
-	mask = hth [i >> halfrate];		\
-    mask -= snroffset + 128 * deltba[i];	\
-    mask = (mask > 0) ? 0 : ((-mask) >> 5);	\
-    mask -= floor;				\
-} while (0)
-
-void a52_bit_allocate (a52_state_t * state, ba_t * ba, int bndstart,
-		       int start, int end, int fastleak, int slowleak,
-		       expbap_t * expbap)
-{
-    static int slowgain[4] = {0x540, 0x4d8, 0x478, 0x410};
-    static int dbpbtab[4]  = {0xc00, 0x500, 0x300, 0x100};
-    static int floortab[8] = {0x910, 0x950, 0x990, 0x9d0,
-			      0xa10, 0xa90, 0xb10, 0x1400};
-
-    int i, j;
-    uint8_t * exp;
-    int8_t * bap;
-    int fdecay, fgain, sdecay, sgain, dbknee, floor, snroffset;
-    int psd, mask;
-    int8_t * deltba;
-    int * hth;
-    int halfrate;
-
-    halfrate = state->halfrate;
-    fdecay = (63 + 20 * ((state->bai >> 7) & 3)) >> halfrate;	/* fdcycod */
-    fgain = 128 + 128 * (ba->bai & 7);				/* fgaincod */
-    sdecay = (15 + 2 * (state->bai >> 9)) >> halfrate;		/* sdcycod */
-    sgain = slowgain[(state->bai >> 5) & 3];			/* sgaincod */
-    dbknee = dbpbtab[(state->bai >> 3) & 3];			/* dbpbcod */
-    hth = hthtab[state->fscod];
-    /*
-     * if there is no delta bit allocation, make deltba point to an area
-     * known to contain zeroes. baptab+156 here.
-     */
-    deltba = (ba->deltbae == DELTA_BIT_NONE) ? baptab + 156 : ba->deltba;
-    floor = floortab[state->bai & 7];				/* floorcod */
-    snroffset = 960 - 64 * state->csnroffst - 4 * (ba->bai >> 3) + floor;
-    floor >>= 5;
-
-    exp = expbap->exp;
-    bap = expbap->bap;
-
-    i = bndstart;
-    j = start;
-    if (start == 0) {	/* not the coupling channel */
-	int lowcomp;
-
-	lowcomp = 0;
-	j = end - 1;
-	do {
-	    if (i < j) {
-		if (exp[i+1] == exp[i] - 2)
-		    lowcomp = 384;
-		else if (lowcomp && (exp[i+1] > exp[i]))
-		    lowcomp -= 64;
-	    }
-	    psd = 128 * exp[i];
-	    mask = psd + fgain + lowcomp;
-	    COMPUTE_MASK ();
-	    bap[i] = (baptab+156)[mask + 4 * exp[i]];
-	    i++;
-	} while ((i < 3) || ((i < 7) && (exp[i] > exp[i-1])));
-	fastleak = psd + fgain;
-	slowleak = psd + sgain;
-
-	while (i < 7) {
-	    if (i < j) {
-		if (exp[i+1] == exp[i] - 2)
-		    lowcomp = 384;
-		else if (lowcomp && (exp[i+1] > exp[i]))
-		    lowcomp -= 64;
-	    }
-	    psd = 128 * exp[i];
-	    UPDATE_LEAK ();
-	    mask = ((fastleak + lowcomp < slowleak) ?
-		    fastleak + lowcomp : slowleak);
-	    COMPUTE_MASK ();
-	    bap[i] = (baptab+156)[mask + 4 * exp[i]];
-	    i++;
-	}
-
-	if (end == 7)	/* lfe channel */
-	    return;
-
-	do {
-	    if (exp[i+1] == exp[i] - 2)
-		lowcomp = 320;
-	    else if (lowcomp && (exp[i+1] > exp[i]))
-		lowcomp -= 64;
-	    psd = 128 * exp[i];
-	    UPDATE_LEAK ();
-	    mask = ((fastleak + lowcomp < slowleak) ?
-		    fastleak + lowcomp : slowleak);
-	    COMPUTE_MASK ();
-	    bap[i] = (baptab+156)[mask + 4 * exp[i]];
-	    i++;
-	} while (i < 20);
-
-	while (lowcomp > 128) {		/* two iterations maximum */
-	    lowcomp -= 128;
-	    psd = 128 * exp[i];
-	    UPDATE_LEAK ();
-	    mask = ((fastleak + lowcomp < slowleak) ?
-		    fastleak + lowcomp : slowleak);
-	    COMPUTE_MASK ();
-	    bap[i] = (baptab+156)[mask + 4 * exp[i]];
-	    i++;
-	}
-	j = i;
-    }
-
-    do {
-	int startband, endband;
-
-	startband = j;
-	endband = ((bndtab-20)[i] < end) ? (bndtab-20)[i] : end;
-	psd = 128 * exp[j++];
-	while (j < endband) {
-	    int next, delta;
-
-	    next = 128 * exp[j++];
-	    delta = next - psd;
-	    switch (delta >> 9) {
-	    case -6: case -5: case -4: case -3: case -2:
-		psd = next;
-		break;
-	    case -1:
-		psd = next + latab[(-delta) >> 1];
-		break;
-	    case 0:
-		psd += latab[delta >> 1];
-		break;
-	    }
-	}
-	/* minpsd = -289 */
-	UPDATE_LEAK ();
-	mask = (fastleak < slowleak) ? fastleak : slowleak;
-	COMPUTE_MASK ();
-	i++;
-	j = startband;
-	do {
-	    /* max(mask+4*exp)=147=-(minpsd+fgain-deltba-snroffset)>>5+4*exp */
-	    /* min(mask+4*exp)=-156=-(sgain-deltba-snroffset)>>5 */
-	    bap[j] = (baptab+156)[mask + 4 * exp[j]];
-	} while (++j < endband);
-    } while (j < end);
-}

Deleted: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/bitstream.c
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/bitstream.c	2008-03-07 11:18:41 UTC (rev 3842)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/bitstream.c	2008-03-07 18:34:14 UTC (rev 3843)
@@ -1,95 +0,0 @@
-/*
- * bitstream.c
- * Copyright (C) 2000-2002 Michel Lespinasse <walken at zoy.org>
- * Copyright (C) 1999-2000 Aaron Holtzman <aholtzma at ess.engr.uvic.ca>
- *
- * This file is part of a52dec, a free ATSC A-52 stream decoder.
- * See http://liba52.sourceforge.net/ for updates.
- *
- * a52dec is free software; you can redistribute it and/or modify
- * it under the terms of the GNU General Public License as published by
- * the Free Software Foundation; either version 2 of the License, or
- * (at your option) any later version.
- *
- * a52dec is distributed in the hope that it will be useful,
- * but WITHOUT ANY WARRANTY; without even the implied warranty of
- * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- * GNU General Public License for more details.
- *
- * You should have received a copy of the GNU General Public License
- * along with this program; if not, write to the Free Software
- * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
- */
-
-#include "config.h"
-
-#include <inttypes.h>
-
-#include "a52.h"
-#include "a52_internal.h"
-#include "bitstream.h"
-
-#define BUFFER_SIZE 4096
-
-void a52_bitstream_set_ptr (a52_state_t * state, uint8_t * buf)
-{
-    int align;
-
-    align = (long)buf & 3;
-    state->buffer_start = (uint32_t *) (buf - align);
-    state->bits_left = 0;
-    bitstream_get (state, align * 8);
-}
-
-static inline void bitstream_fill_current (a52_state_t * state)
-{
-    uint32_t tmp;
-
-    tmp = *(state->buffer_start++);
-    state->current_word = swab32 (tmp);
-}
-
-/*
- * The fast paths for _get is in the
- * bitstream.h header file so it can be inlined.
- *
- * The "bottom half" of this routine is suffixed _bh
- *
- * -ah
- */
-
-uint32_t a52_bitstream_get_bh (a52_state_t * state, uint32_t num_bits)
-{
-    uint32_t result;
-
-    num_bits -= state->bits_left;
-    result = ((state->current_word << (32 - state->bits_left)) >>
-	      (32 - state->bits_left));
-
-    bitstream_fill_current (state);
-
-    if (num_bits != 0)
-	result = (result << num_bits) | (state->current_word >> (32 - num_bits));
-
-    state->bits_left = 32 - num_bits;
-
-    return result;
-}
-
-int32_t a52_bitstream_get_bh_2 (a52_state_t * state, uint32_t num_bits)
-{
-    int32_t result;
-
-    num_bits -= state->bits_left;
-    result = ((((int32_t)state->current_word) << (32 - state->bits_left)) >>
-	      (32 - state->bits_left));
-
-    bitstream_fill_current(state);
-
-    if (num_bits != 0)
-	result = (result << num_bits) | (state->current_word >> (32 - num_bits));
-	
-    state->bits_left = 32 - num_bits;
-
-    return result;
-}

Deleted: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/bitstream.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/bitstream.h	2008-03-07 11:18:41 UTC (rev 3842)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/bitstream.h	2008-03-07 18:34:14 UTC (rev 3843)
@@ -1,77 +0,0 @@
-/*
- * bitstream.h
- * Copyright (C) 2000-2002 Michel Lespinasse <walken at zoy.org>
- * Copyright (C) 1999-2000 Aaron Holtzman <aholtzma at ess.engr.uvic.ca>
- *
- * This file is part of a52dec, a free ATSC A-52 stream decoder.
- * See http://liba52.sourceforge.net/ for updates.
- *
- * a52dec is free software; you can redistribute it and/or modify
- * it under the terms of the GNU General Public License as published by
- * the Free Software Foundation; either version 2 of the License, or
- * (at your option) any later version.
- *
- * a52dec is distributed in the hope that it will be useful,
- * but WITHOUT ANY WARRANTY; without even the implied warranty of
- * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- * GNU General Public License for more details.
- *
- * You should have received a copy of the GNU General Public License
- * along with this program; if not, write to the Free Software
- * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
- */
-
-/* (stolen from the kernel) */
-#ifdef WORDS_BIGENDIAN
-
-#	define swab32(x) (x)
-
-#else
-
-#	if 0 && defined (__i386__)
-
-#	define swab32(x) __i386_swab32(x)
-	static inline const uint32_t __i386_swab32(uint32_t x)
-	{
-		__asm__("bswap %0" : "=r" (x) : "0" (x));
-		return x;
-	}
-
-#	else
-
-#	define swab32(x)\
-((((uint8_t*)&x)[0] << 24) | (((uint8_t*)&x)[1] << 16) |  \
- (((uint8_t*)&x)[2] << 8)  | (((uint8_t*)&x)[3]))
-
-#	endif
-#endif
-
-void a52_bitstream_set_ptr (a52_state_t * state, uint8_t * buf);
-uint32_t a52_bitstream_get_bh (a52_state_t * state, uint32_t num_bits);
-int32_t a52_bitstream_get_bh_2 (a52_state_t * state, uint32_t num_bits);
-
-static inline uint32_t bitstream_get (a52_state_t * state, uint32_t num_bits)
-{
-    uint32_t result;
-	
-    if (num_bits < state->bits_left) {
-	result = (state->current_word << (32 - state->bits_left)) >> (32 - num_bits);
-	state->bits_left -= num_bits;
-	return result;
-    }
-
-    return a52_bitstream_get_bh (state, num_bits);
-}
-
-static inline int32_t bitstream_get_2 (a52_state_t * state, uint32_t num_bits)
-{
-    int32_t result;
-	
-    if (num_bits < state->bits_left) {
-	result = (((int32_t)state->current_word) << (32 - state->bits_left)) >> (32 - num_bits);
-	state->bits_left -= num_bits;
-	return result;
-    }
-
-    return a52_bitstream_get_bh_2 (state, num_bits);
-}

Deleted: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/downmix.c
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/downmix.c	2008-03-07 11:18:41 UTC (rev 3842)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/downmix.c	2008-03-07 18:34:14 UTC (rev 3843)
@@ -1,655 +0,0 @@
-/*
- * downmix.c
- * Copyright (C) 2000-2002 Michel Lespinasse <walken at zoy.org>
- * Copyright (C) 1999-2000 Aaron Holtzman <aholtzma at ess.engr.uvic.ca>
- *
- * This file is part of a52dec, a free ATSC A-52 stream decoder.
- * See http://liba52.sourceforge.net/ for updates.
- *
- * a52dec is free software; you can redistribute it and/or modify
- * it under the terms of the GNU General Public License as published by
- * the Free Software Foundation; either version 2 of the License, or
- * (at your option) any later version.
- *
- * a52dec is distributed in the hope that it will be useful,
- * but WITHOUT ANY WARRANTY; without even the implied warranty of
- * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- * GNU General Public License for more details.
- *
- * You should have received a copy of the GNU General Public License
- * along with this program; if not, write to the Free Software
- * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
- */
-
-#include "config.h"
-
-#include <string.h>
-#include <inttypes.h>
-
-#include "a52.h"
-#include "a52_internal.h"
-
-#define CONVERT(acmod,output) (((output) << 3) + (acmod))
-
-int a52_downmix_init (int input, int flags, sample_t * level,
-		      sample_t clev, sample_t slev)
-{
-    static uint8_t table[11][8] = {
-	{A52_CHANNEL,	A52_DOLBY,	A52_STEREO,	A52_STEREO,
-	 A52_STEREO,	A52_STEREO,	A52_STEREO,	A52_STEREO},
-	{A52_MONO,	A52_MONO,	A52_MONO,	A52_MONO,
-	 A52_MONO,	A52_MONO,	A52_MONO,	A52_MONO},
-	{A52_CHANNEL,	A52_DOLBY,	A52_STEREO,	A52_STEREO,
-	 A52_STEREO,	A52_STEREO,	A52_STEREO,	A52_STEREO},
-	{A52_CHANNEL,	A52_DOLBY,	A52_STEREO,	A52_3F,
-	 A52_STEREO,	A52_3F,		A52_STEREO,	A52_3F},
-	{A52_CHANNEL,	A52_DOLBY,	A52_STEREO,	A52_STEREO,
-	 A52_2F1R,	A52_2F1R,	A52_2F1R,	A52_2F1R},
-	{A52_CHANNEL,	A52_DOLBY,	A52_STEREO,	A52_STEREO,
-	 A52_2F1R,	A52_3F1R,	A52_2F1R,	A52_3F1R},
-	{A52_CHANNEL,	A52_DOLBY,	A52_STEREO,	A52_3F,
-	 A52_2F2R,	A52_2F2R,	A52_2F2R,	A52_2F2R},
-	{A52_CHANNEL,	A52_DOLBY,	A52_STEREO,	A52_3F,
-	 A52_2F2R,	A52_3F2R,	A52_2F2R,	A52_3F2R},
-	{A52_CHANNEL1,	A52_MONO,	A52_MONO,	A52_MONO,
-	 A52_MONO,	A52_MONO,	A52_MONO,	A52_MONO},
-	{A52_CHANNEL2,	A52_MONO,	A52_MONO,	A52_MONO,
-	 A52_MONO,	A52_MONO,	A52_MONO,	A52_MONO},
-	{A52_CHANNEL,	A52_DOLBY,	A52_STEREO,	A52_DOLBY,
-	 A52_DOLBY,	A52_DOLBY,	A52_DOLBY,	A52_DOLBY}
-    };
-    int output;
-
-    output = flags & A52_CHANNEL_MASK;
-    if (output > A52_DOLBY)
-	return -1;
-
-    output = table[output][input & 7];
-
-    if ((output == A52_STEREO) &&
-	((input == A52_DOLBY) || ((input == A52_3F) && (clev == LEVEL_3DB))))
-	output = A52_DOLBY;
-
-    if (flags & A52_ADJUST_LEVEL)
-	switch (CONVERT (input & 7, output)) {
-
-	case CONVERT (A52_3F, A52_MONO):
-	    *level *= LEVEL_3DB / (1 + clev);
-	    break;
-
-	case CONVERT (A52_STEREO, A52_MONO):
-	case CONVERT (A52_2F2R, A52_2F1R):
-	case CONVERT (A52_3F2R, A52_3F1R):
-	level_3db:
-	    *level *= LEVEL_3DB;
-	    break;
-
-	case CONVERT (A52_3F2R, A52_2F1R):
-	    if (clev < LEVEL_PLUS3DB - 1)
-		goto level_3db;
-	    /* break thru */
-	case CONVERT (A52_3F, A52_STEREO):
-	case CONVERT (A52_3F1R, A52_2F1R):
-	case CONVERT (A52_3F1R, A52_2F2R):
-	case CONVERT (A52_3F2R, A52_2F2R):
-	    *level /= 1 + clev;
-	    break;
-
-	case CONVERT (A52_2F1R, A52_MONO):
-	    *level *= LEVEL_PLUS3DB / (2 + slev);
-	    break;
-
-	case CONVERT (A52_2F1R, A52_STEREO):
-	case CONVERT (A52_3F1R, A52_3F):
-	    *level /= 1 + slev * LEVEL_3DB;
-	    break;
-
-	case CONVERT (A52_3F1R, A52_MONO):
-	    *level *= LEVEL_3DB / (1 + clev + 0.5 * slev);
-	    break;
-
-	case CONVERT (A52_3F1R, A52_STEREO):
-	    *level /= 1 + clev + slev * LEVEL_3DB;
-	    break;
-
-	case CONVERT (A52_2F2R, A52_MONO):
-	    *level *= LEVEL_3DB / (1 + slev);
-	    break;
-
-	case CONVERT (A52_2F2R, A52_STEREO):
-	case CONVERT (A52_3F2R, A52_3F):
-	    *level /= 1 + slev;
-	    break;
-
-	case CONVERT (A52_3F2R, A52_MONO):
-	    *level *= LEVEL_3DB / (1 + clev + slev);
-	    break;
-
-	case CONVERT (A52_3F2R, A52_STEREO):
-	    *level /= 1 + clev + slev;
-	    break;
-
-	case CONVERT (A52_MONO, A52_DOLBY):
-	    *level *= LEVEL_PLUS3DB;
-	    break;
-
-	case CONVERT (A52_3F, A52_DOLBY):
-	case CONVERT (A52_2F1R, A52_DOLBY):
-	    *level *= 1 / (1 + LEVEL_3DB);
-	    break;
-
-	case CONVERT (A52_3F1R, A52_DOLBY):
-	case CONVERT (A52_2F2R, A52_DOLBY):
-	    *level *= 1 / (1 + 2 * LEVEL_3DB);
-	    break;
-
-	case CONVERT (A52_3F2R, A52_DOLBY):
-	    *level *= 1 / (1 + 3 * LEVEL_3DB);
-	    break;
-	}
-
-    return output;
-}
-
-int a52_downmix_coeff (sample_t * coeff, int acmod, int output, sample_t level,
-		       sample_t clev, sample_t slev)
-{
-    switch (CONVERT (acmod, output & A52_CHANNEL_MASK)) {
-
-    case CONVERT (A52_CHANNEL, A52_CHANNEL):
-    case CONVERT (A52_MONO, A52_MONO):
-    case CONVERT (A52_STEREO, A52_STEREO):
-    case CONVERT (A52_3F, A52_3F):
-    case CONVERT (A52_2F1R, A52_2F1R):
-    case CONVERT (A52_3F1R, A52_3F1R):
-    case CONVERT (A52_2F2R, A52_2F2R):
-    case CONVERT (A52_3F2R, A52_3F2R):
-    case CONVERT (A52_STEREO, A52_DOLBY):
-	coeff[0] = coeff[1] = coeff[2] = coeff[3] = coeff[4] = level;
-	return 0;
-
-    case CONVERT (A52_CHANNEL, A52_MONO):
-	coeff[0] = coeff[1] = level * LEVEL_6DB;
-	return 3;
-
-    case CONVERT (A52_STEREO, A52_MONO):
-	coeff[0] = coeff[1] = level * LEVEL_3DB;
-	return 3;
-
-    case CONVERT (A52_3F, A52_MONO):
-	coeff[0] = coeff[2] = level * LEVEL_3DB;
-	coeff[1] = level * clev * LEVEL_PLUS3DB;
-	return 7;
-
-    case CONVERT (A52_2F1R, A52_MONO):
-	coeff[0] = coeff[1] = level * LEVEL_3DB;
-	coeff[2] = level * slev * LEVEL_3DB;
-	return 7;
-
-    case CONVERT (A52_2F2R, A52_MONO):
-	coeff[0] = coeff[1] = level * LEVEL_3DB;
-	coeff[2] = coeff[3] = level * slev * LEVEL_3DB;
-	return 15;
-
-    case CONVERT (A52_3F1R, A52_MONO):
-	coeff[0] = coeff[2] = level * LEVEL_3DB;
-	coeff[1] = level * clev * LEVEL_PLUS3DB;
-	coeff[3] = level * slev * LEVEL_3DB;
-	return 15;
-
-    case CONVERT (A52_3F2R, A52_MONO):
-	coeff[0] = coeff[2] = level * LEVEL_3DB;
-	coeff[1] = level * clev * LEVEL_PLUS3DB;
-	coeff[3] = coeff[4] = level * slev * LEVEL_3DB;
-	return 31;
-
-    case CONVERT (A52_MONO, A52_DOLBY):
-	coeff[0] = level * LEVEL_3DB;
-	return 0;
-
-    case CONVERT (A52_3F, A52_DOLBY):
-	clev = LEVEL_3DB;
-    case CONVERT (A52_3F, A52_STEREO):
-    case CONVERT (A52_3F1R, A52_2F1R):
-    case CONVERT (A52_3F2R, A52_2F2R):
-	coeff[0] = coeff[2] = coeff[3] = coeff[4] = level;
-	coeff[1] = level * clev;
-	return 7;
-
-    case CONVERT (A52_2F1R, A52_DOLBY):
-	slev = 1;
-    case CONVERT (A52_2F1R, A52_STEREO):
-	coeff[0] = coeff[1] = level;
-	coeff[2] = level * slev * LEVEL_3DB;
-	return 7;
-
-    case CONVERT (A52_3F1R, A52_DOLBY):
-	clev = LEVEL_3DB;
-	slev = 1;
-    case CONVERT (A52_3F1R, A52_STEREO):
-	coeff[0] = coeff[2] = level;
-	coeff[1] = level * clev;
-	coeff[3] = level * slev * LEVEL_3DB;
-	return 15;
-
-    case CONVERT (A52_2F2R, A52_DOLBY):
-	slev = LEVEL_3DB;
-    case CONVERT (A52_2F2R, A52_STEREO):
-	coeff[0] = coeff[1] = level;
-	coeff[2] = coeff[3] = level * slev;
-	return 15;
-
-    case CONVERT (A52_3F2R, A52_DOLBY):
-	clev = LEVEL_3DB;
-    case CONVERT (A52_3F2R, A52_2F1R):
-	slev = LEVEL_3DB;
-    case CONVERT (A52_3F2R, A52_STEREO):
-	coeff[0] = coeff[2] = level;
-	coeff[1] = level * clev;
-	coeff[3] = coeff[4] = level * slev;
-	return 31;
-
-    case CONVERT (A52_3F1R, A52_3F):
-	coeff[0] = coeff[1] = coeff[2] = level;
-	coeff[3] = level * slev * LEVEL_3DB;
-	return 13;
-
-    case CONVERT (A52_3F2R, A52_3F):
-	coeff[0] = coeff[1] = coeff[2] = level;
-	coeff[3] = coeff[4] = level * slev;
-	return 29;
-
-    case CONVERT (A52_2F2R, A52_2F1R):
-	coeff[0] = coeff[1] = level;
-	coeff[2] = coeff[3] = level * LEVEL_3DB;
-	return 12;
-
-    case CONVERT (A52_3F2R, A52_3F1R):
-	coeff[0] = coeff[1] = coeff[2] = level;
-	coeff[3] = coeff[4] = level * LEVEL_3DB;
-	return 24;
-
-    case CONVERT (A52_2F1R, A52_2F2R):
-	coeff[0] = coeff[1] = level;
-	coeff[2] = level * LEVEL_3DB;
-	return 0;
-
-    case CONVERT (A52_3F1R, A52_2F2R):
-	coeff[0] = coeff[2] = level;
-	coeff[1] = level * clev;
-	coeff[3] = level * LEVEL_3DB;
-	return 7;
-
-    case CONVERT (A52_3F1R, A52_3F2R):
-	coeff[0] = coeff[1] = coeff[2] = level;
-	coeff[3] = level * LEVEL_3DB;
-	return 0;
-
-    case CONVERT (A52_CHANNEL, A52_CHANNEL1):
-	coeff[0] = level;
-	coeff[1] = 0;
-	return 0;
-
-    case CONVERT (A52_CHANNEL, A52_CHANNEL2):
-	coeff[0] = 0;
-	coeff[1] = level;
-	return 0;
-    }
-
-    return -1;	/* NOTREACHED */
-}
-
-static void mix2to1 (sample_t * dest, sample_t * src, sample_t bias)
-{
-    int i;
-
-    for (i = 0; i < 256; i++)
-	dest[i] += src[i] + bias;
-}
-
-static void mix3to1 (sample_t * samples, sample_t bias)
-{
-    int i;
-
-    for (i = 0; i < 256; i++)
-	samples[i] += samples[i + 256] + samples[i + 512] + bias;
-}
-
-static void mix4to1 (sample_t * samples, sample_t bias)
-{
-    int i;
-
-    for (i = 0; i < 256; i++)
-	samples[i] += (samples[i + 256] + samples[i + 512] +
-		       samples[i + 768] + bias);
-}
-
-static void mix5to1 (sample_t * samples, sample_t bias)
-{
-    int i;
-
-    for (i = 0; i < 256; i++)
-	samples[i] += (samples[i + 256] + samples[i + 512] +
-		       samples[i + 768] + samples[i + 1024] + bias);
-}
-
-static void mix3to2 (sample_t * samples, sample_t bias)
-{
-    int i;
-    sample_t common;
-
-    for (i = 0; i < 256; i++) {
-	common = samples[i + 256] + bias;
-	samples[i] += common;
-	samples[i + 256] = samples[i + 512] + common;
-    }
-}
-
-static void mix21to2 (sample_t * left, sample_t * right, sample_t bias)
-{
-    int i;
-    sample_t common;
-
-    for (i = 0; i < 256; i++) {
-	common = right[i + 256] + bias;
-	left[i] += common;
-	right[i] += common;
-    }
-}
-
-static void mix21toS (sample_t * samples, sample_t bias)
-{
-    int i;
-    sample_t surround;
-
-    for (i = 0; i < 256; i++) {
-	surround = samples[i + 512];
-	samples[i] += bias - surround;
-	samples[i + 256] += bias + surround;
-    }
-}
-
-static void mix31to2 (sample_t * samples, sample_t bias)
-{
-    int i;
-    sample_t common;
-
-    for (i = 0; i < 256; i++) {
-	common = samples[i + 256] + samples[i + 768] + bias;
-	samples[i] += common;
-	samples[i + 256] = samples[i + 512] + common;
-    }
-}
-
-static void mix31toS (sample_t * samples, sample_t bias)
-{
-    int i;
-    sample_t common, surround;
-
-    for (i = 0; i < 256; i++) {
-	common = samples[i + 256] + bias;
-	surround = samples[i + 768];
-	samples[i] += common - surround;
-	samples[i + 256] = samples[i + 512] + common + surround;
-    }
-}
-
-static void mix22toS (sample_t * samples, sample_t bias)
-{
-    int i;
-    sample_t surround;
-
-    for (i = 0; i < 256; i++) {
-	surround = samples[i + 512] + samples[i + 768];
-	samples[i] += bias - surround;
-	samples[i + 256] += bias + surround;
-    }
-}
-
-static void mix32to2 (sample_t * samples, sample_t bias)
-{
-    int i;
-    sample_t common;
-
-    for (i = 0; i < 256; i++) {
-	common = samples[i + 256] + bias;
-	samples[i] += common + samples[i + 768];
-	samples[i + 256] = common + samples[i + 512] + samples[i + 1024];
-    }
-}
-
-static void mix32toS (sample_t * samples, sample_t bias)
-{
-    int i;
-    sample_t common, surround;
-
-    for (i = 0; i < 256; i++) {
-	common = samples[i + 256] + bias;
-	surround = samples[i + 768] + samples[i + 1024];
-	samples[i] += common - surround;
-	samples[i + 256] = samples[i + 512] + common + surround;
-    }
-}
-
-static void move2to1 (sample_t * src, sample_t * dest, sample_t bias)
-{
-    int i;
-
-    for (i = 0; i < 256; i++)
-	dest[i] = src[i] + src[i + 256] + bias;
-}
-
-static void zero (sample_t * samples)
-{
-    int i;
-
-    for (i = 0; i < 256; i++)
-	samples[i] = 0;
-}
-
-void a52_downmix (sample_t * samples, int acmod, int output, sample_t bias,
-		  sample_t clev, sample_t slev)
-{
-    switch (CONVERT (acmod, output & A52_CHANNEL_MASK)) {
-
-    case CONVERT (A52_CHANNEL, A52_CHANNEL2):
-	memcpy (samples, samples + 256, 256 * sizeof (sample_t));
-	break;
-
-    case CONVERT (A52_CHANNEL, A52_MONO):
-    case CONVERT (A52_STEREO, A52_MONO):
-    mix_2to1:
-	mix2to1 (samples, samples + 256, bias);
-	break;
-
-    case CONVERT (A52_2F1R, A52_MONO):
-	if (slev == 0)
-	    goto mix_2to1;
-    case CONVERT (A52_3F, A52_MONO):
-    mix_3to1:
-	mix3to1 (samples, bias);
-	break;
-
-    case CONVERT (A52_3F1R, A52_MONO):
-	if (slev == 0)
-	    goto mix_3to1;
-    case CONVERT (A52_2F2R, A52_MONO):
-	if (slev == 0)
-	    goto mix_2to1;
-	mix4to1 (samples, bias);
-	break;
-
-    case CONVERT (A52_3F2R, A52_MONO):
-	if (slev == 0)
-	    goto mix_3to1;
-	mix5to1 (samples, bias);
-	break;
-
-    case CONVERT (A52_MONO, A52_DOLBY):
-	memcpy (samples + 256, samples, 256 * sizeof (sample_t));
-	break;
-
-    case CONVERT (A52_3F, A52_STEREO):
-    case CONVERT (A52_3F, A52_DOLBY):
-    mix_3to2:
-	mix3to2 (samples, bias);
-	break;
-
-    case CONVERT (A52_2F1R, A52_STEREO):
-	if (slev == 0)
-	    break;
-	mix21to2 (samples, samples + 256, bias);
-	break;
-
-    case CONVERT (A52_2F1R, A52_DOLBY):
-	mix21toS (samples, bias);
-	break;
-
-    case CONVERT (A52_3F1R, A52_STEREO):
-	if (slev == 0)
-	    goto mix_3to2;
-	mix31to2 (samples, bias);
-	break;
-
-    case CONVERT (A52_3F1R, A52_DOLBY):
-	mix31toS (samples, bias);
-	break;
-
-    case CONVERT (A52_2F2R, A52_STEREO):
-	if (slev == 0)
-	    break;
-	mix2to1 (samples, samples + 512, bias);
-	mix2to1 (samples + 256, samples + 768, bias);
-	break;
-
-    case CONVERT (A52_2F2R, A52_DOLBY):
-	mix22toS (samples, bias);
-	break;
-
-    case CONVERT (A52_3F2R, A52_STEREO):
-	if (slev == 0)
-	    goto mix_3to2;
-	mix32to2 (samples, bias);
-	break;
-
-    case CONVERT (A52_3F2R, A52_DOLBY):
-	mix32toS (samples, bias);
-	break;
-
-    case CONVERT (A52_3F1R, A52_3F):
-	if (slev == 0)
-	    break;
-	mix21to2 (samples, samples + 512, bias);
-	break;
-
-    case CONVERT (A52_3F2R, A52_3F):
-	if (slev == 0)
-	    break;
-	mix2to1 (samples, samples + 768, bias);
-	mix2to1 (samples + 512, samples + 1024, bias);
-	break;
-
-    case CONVERT (A52_3F1R, A52_2F1R):
-	mix3to2 (samples, bias);
-	memcpy (samples + 512, samples + 768, 256 * sizeof (sample_t));
-	break;
-
-    case CONVERT (A52_2F2R, A52_2F1R):
-	mix2to1 (samples + 512, samples + 768, bias);
-	break;
-
-    case CONVERT (A52_3F2R, A52_2F1R):
-	mix3to2 (samples, bias);
-	move2to1 (samples + 768, samples + 512, bias);
-	break;
-
-    case CONVERT (A52_3F2R, A52_3F1R):
-	mix2to1 (samples + 768, samples + 1024, bias);
-	break;
-
-    case CONVERT (A52_2F1R, A52_2F2R):
-	memcpy (samples + 768, samples + 512, 256 * sizeof (sample_t));
-	break;
-
-    case CONVERT (A52_3F1R, A52_2F2R):
-	mix3to2 (samples, bias);
-	memcpy (samples + 512, samples + 768, 256 * sizeof (sample_t));
-	break;
-
-    case CONVERT (A52_3F2R, A52_2F2R):
-	mix3to2 (samples, bias);
-	memcpy (samples + 512, samples + 768, 256 * sizeof (sample_t));
-	memcpy (samples + 768, samples + 1024, 256 * sizeof (sample_t));
-	break;
-
-    case CONVERT (A52_3F1R, A52_3F2R):
-	memcpy (samples + 1027, samples + 768, 256 * sizeof (sample_t));
-	break;
-    }
-}
-
-void a52_upmix (sample_t * samples, int acmod, int output)
-{
-    switch (CONVERT (acmod, output & A52_CHANNEL_MASK)) {
-
-    case CONVERT (A52_CHANNEL, A52_CHANNEL2):
-	memcpy (samples + 256, samples, 256 * sizeof (sample_t));
-	break;
-
-    case CONVERT (A52_3F2R, A52_MONO):
-	zero (samples + 1024);
-    case CONVERT (A52_3F1R, A52_MONO):
-    case CONVERT (A52_2F2R, A52_MONO):
-	zero (samples + 768);
-    case CONVERT (A52_3F, A52_MONO):
-    case CONVERT (A52_2F1R, A52_MONO):
-	zero (samples + 512);
-    case CONVERT (A52_CHANNEL, A52_MONO):
-    case CONVERT (A52_STEREO, A52_MONO):
-	zero (samples + 256);
-	break;
-
-    case CONVERT (A52_3F2R, A52_STEREO):
-    case CONVERT (A52_3F2R, A52_DOLBY):
-	zero (samples + 1024);
-    case CONVERT (A52_3F1R, A52_STEREO):
-    case CONVERT (A52_3F1R, A52_DOLBY):
-	zero (samples + 768);
-    case CONVERT (A52_3F, A52_STEREO):
-    case CONVERT (A52_3F, A52_DOLBY):
-    mix_3to2:
-	memcpy (samples + 512, samples + 256, 256 * sizeof (sample_t));
-	zero (samples + 256);
-	break;
-
-    case CONVERT (A52_2F2R, A52_STEREO):
-    case CONVERT (A52_2F2R, A52_DOLBY):
-	zero (samples + 768);
-    case CONVERT (A52_2F1R, A52_STEREO):
-    case CONVERT (A52_2F1R, A52_DOLBY):
-	zero (samples + 512);
-	break;
-
-    case CONVERT (A52_3F2R, A52_3F):
-	zero (samples + 1024);
-    case CONVERT (A52_3F1R, A52_3F):
-    case CONVERT (A52_2F2R, A52_2F1R):
-	zero (samples + 768);
-	break;
-
-    case CONVERT (A52_3F2R, A52_3F1R):
-	zero (samples + 1024);
-	break;
-
-    case CONVERT (A52_3F2R, A52_2F1R):
-	zero (samples + 1024);
-    case CONVERT (A52_3F1R, A52_2F1R):
-    mix_31to21:
-	memcpy (samples + 768, samples + 512, 256 * sizeof (sample_t));
-	goto mix_3to2;
-
-    case CONVERT (A52_3F2R, A52_2F2R):
-	memcpy (samples + 1024, samples + 768, 256 * sizeof (sample_t));
-	goto mix_31to21;
-    }
-}

Deleted: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/imdct.c
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/imdct.c	2008-03-07 11:18:41 UTC (rev 3842)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/imdct.c	2008-03-07 18:34:14 UTC (rev 3843)
@@ -1,432 +0,0 @@
-/*
- * imdct.c
- * Copyright (C) 2000-2002 Michel Lespinasse <walken at zoy.org>
- * Copyright (C) 1999-2000 Aaron Holtzman <aholtzma at ess.engr.uvic.ca>
- *
- * The ifft algorithms in this file have been largely inspired by Dan
- * Bernstein's work, djbfft, available at http://cr.yp.to/djbfft.html
- *
- * This file is part of a52dec, a free ATSC A-52 stream decoder.
- * See http://liba52.sourceforge.net/ for updates.
- *
- * a52dec is free software; you can redistribute it and/or modify
- * it under the terms of the GNU General Public License as published by
- * the Free Software Foundation; either version 2 of the License, or
- * (at your option) any later version.
- *
- * a52dec is distributed in the hope that it will be useful,
- * but WITHOUT ANY WARRANTY; without even the implied warranty of
- * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- * GNU General Public License for more details.
- *
- * You should have received a copy of the GNU General Public License
- * along with this program; if not, write to the Free Software
- * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
- */
-
-#include "config.h"
-
-#include <math.h>
-#include <stdio.h>
-#ifdef LIBA52_DJBFFT
-#include <fftc4.h>
-#endif
-#ifndef M_PI
-#define M_PI 3.1415926535897932384626433832795029
-#endif
-#include <inttypes.h>
-
-#include "a52.h"
-#include "a52_internal.h"
-#include "mm_accel.h"
-
-typedef struct complex_s {
-    sample_t real;
-    sample_t imag;
-} complex_t;
-
-static uint8_t fftorder[] = {
-      0,128, 64,192, 32,160,224, 96, 16,144, 80,208,240,112, 48,176,
-      8,136, 72,200, 40,168,232,104,248,120, 56,184, 24,152,216, 88,
-      4,132, 68,196, 36,164,228,100, 20,148, 84,212,244,116, 52,180,
-    252,124, 60,188, 28,156,220, 92, 12,140, 76,204,236,108, 44,172,
-      2,130, 66,194, 34,162,226, 98, 18,146, 82,210,242,114, 50,178,
-     10,138, 74,202, 42,170,234,106,250,122, 58,186, 26,154,218, 90,
-    254,126, 62,190, 30,158,222, 94, 14,142, 78,206,238,110, 46,174,
-      6,134, 70,198, 38,166,230,102,246,118, 54,182, 22,150,214, 86
-};
-
-/* Root values for IFFT */
-static sample_t roots16[3];
-static sample_t roots32[7];
-static sample_t roots64[15];
-static sample_t roots128[31];
-
-/* Twiddle factors for IMDCT */
-static complex_t pre1[128];
-static complex_t post1[64];
-static complex_t pre2[64];
-static complex_t post2[32];
-
-static sample_t a52_imdct_window[256];
-
-static void (* ifft128) (complex_t * buf);
-static void (* ifft64) (complex_t * buf);
-
-static inline void ifft2 (complex_t * buf)
-{
-    double r, i;
-
-    r = buf[0].real;
-    i = buf[0].imag;
-    buf[0].real += buf[1].real;
-    buf[0].imag += buf[1].imag;
-    buf[1].real = r - buf[1].real;
-    buf[1].imag = i - buf[1].imag;
-}
-
-static inline void ifft4 (complex_t * buf)
-{
-    double tmp1, tmp2, tmp3, tmp4, tmp5, tmp6, tmp7, tmp8;
-
-    tmp1 = buf[0].real + buf[1].real;
-    tmp2 = buf[3].real + buf[2].real;
-    tmp3 = buf[0].imag + buf[1].imag;
-    tmp4 = buf[2].imag + buf[3].imag;
-    tmp5 = buf[0].real - buf[1].real;
-    tmp6 = buf[0].imag - buf[1].imag;
-    tmp7 = buf[2].imag - buf[3].imag;
-    tmp8 = buf[3].real - buf[2].real;
-
-    buf[0].real = tmp1 + tmp2;
-    buf[0].imag = tmp3 + tmp4;
-    buf[2].real = tmp1 - tmp2;
-    buf[2].imag = tmp3 - tmp4;
-    buf[1].real = tmp5 + tmp7;
-    buf[1].imag = tmp6 + tmp8;
-    buf[3].real = tmp5 - tmp7;
-    buf[3].imag = tmp6 - tmp8;
-}
-
-/* the basic split-radix ifft butterfly */
-
-#define BUTTERFLY(a0,a1,a2,a3,wr,wi) do {	\
-    tmp5 = a2.real * wr + a2.imag * wi;		\
-    tmp6 = a2.imag * wr - a2.real * wi;		\
-    tmp7 = a3.real * wr - a3.imag * wi;		\
-    tmp8 = a3.imag * wr + a3.real * wi;		\
-    tmp1 = tmp5 + tmp7;				\
-    tmp2 = tmp6 + tmp8;				\
-    tmp3 = tmp6 - tmp8;				\
-    tmp4 = tmp7 - tmp5;				\
-    a2.real = a0.real - tmp1;			\
-    a2.imag = a0.imag - tmp2;			\
-    a3.real = a1.real - tmp3;			\
-    a3.imag = a1.imag - tmp4;			\
-    a0.real += tmp1;				\
-    a0.imag += tmp2;				\
-    a1.real += tmp3;				\
-    a1.imag += tmp4;				\
-} while (0)
-
-/* split-radix ifft butterfly, specialized for wr=1 wi=0 */
-
-#define BUTTERFLY_ZERO(a0,a1,a2,a3) do {	\
-    tmp1 = a2.real + a3.real;			\
-    tmp2 = a2.imag + a3.imag;			\
-    tmp3 = a2.imag - a3.imag;			\
-    tmp4 = a3.real - a2.real;			\
-    a2.real = a0.real - tmp1;			\
-    a2.imag = a0.imag - tmp2;			\
-    a3.real = a1.real - tmp3;			\
-    a3.imag = a1.imag - tmp4;			\
-    a0.real += tmp1;				\
-    a0.imag += tmp2;				\
-    a1.real += tmp3;				\
-    a1.imag += tmp4;				\
-} while (0)
-
-/* split-radix ifft butterfly, specialized for wr=wi */
-
-#define BUTTERFLY_HALF(a0,a1,a2,a3,w) do {	\
-    tmp5 = (a2.real + a2.imag) * w;		\
-    tmp6 = (a2.imag - a2.real) * w;		\
-    tmp7 = (a3.real - a3.imag) * w;		\
-    tmp8 = (a3.imag + a3.real) * w;		\
-    tmp1 = tmp5 + tmp7;				\
-    tmp2 = tmp6 + tmp8;				\
-    tmp3 = tmp6 - tmp8;				\
-    tmp4 = tmp7 - tmp5;				\
-    a2.real = a0.real - tmp1;			\
-    a2.imag = a0.imag - tmp2;			\
-    a3.real = a1.real - tmp3;			\
-    a3.imag = a1.imag - tmp4;			\
-    a0.real += tmp1;				\
-    a0.imag += tmp2;				\
-    a1.real += tmp3;				\
-    a1.imag += tmp4;				\
-} while (0)
-
-static inline void ifft8 (complex_t * buf)
-{
-    double tmp1, tmp2, tmp3, tmp4, tmp5, tmp6, tmp7, tmp8;
-
-    ifft4 (buf);
-    ifft2 (buf + 4);
-    ifft2 (buf + 6);
-    BUTTERFLY_ZERO (buf[0], buf[2], buf[4], buf[6]);
-    BUTTERFLY_HALF (buf[1], buf[3], buf[5], buf[7], roots16[1]);
-}
-
-static void ifft_pass (complex_t * buf, sample_t * weight, int n)
-{
-    complex_t * buf1;
-    complex_t * buf2;
-    complex_t * buf3;
-    double tmp1, tmp2, tmp3, tmp4, tmp5, tmp6, tmp7, tmp8;
-    int i;
-
-    buf++;
-    buf1 = buf + n;
-    buf2 = buf + 2 * n;
-    buf3 = buf + 3 * n;
-
-    BUTTERFLY_ZERO (buf[-1], buf1[-1], buf2[-1], buf3[-1]);
-
-    i = n - 1;
-
-    do {
-	BUTTERFLY (buf[0], buf1[0], buf2[0], buf3[0], weight[n], weight[2*i]);
-	buf++;
-	buf1++;
-	buf2++;
-	buf3++;
-	weight++;
-    } while (--i);
-}
-
-static void ifft16 (complex_t * buf)
-{
-    ifft8 (buf);
-    ifft4 (buf + 8);
-    ifft4 (buf + 12);
-    ifft_pass (buf, roots16 - 4, 4);
-}
-
-static void ifft32 (complex_t * buf)
-{
-    ifft16 (buf);
-    ifft8 (buf + 16);
-    ifft8 (buf + 24);
-    ifft_pass (buf, roots32 - 8, 8);
-}
-
-static void ifft64_c (complex_t * buf)
-{
-    ifft32 (buf);
-    ifft16 (buf + 32);
-    ifft16 (buf + 48);
-    ifft_pass (buf, roots64 - 16, 16);
-}
-
-static void ifft128_c (complex_t * buf)
-{
-    ifft32 (buf);
-    ifft16 (buf + 32);
-    ifft16 (buf + 48);
-    ifft_pass (buf, roots64 - 16, 16);
-
-    ifft32 (buf + 64);
-    ifft32 (buf + 96);
-    ifft_pass (buf, roots128 - 32, 32);
-}
-
-void a52_imdct_512 (sample_t * data, sample_t * delay, sample_t bias)
-{
-    int i, k;
-    sample_t t_r, t_i, a_r, a_i, b_r, b_i, w_1, w_2;
-    const sample_t * window = a52_imdct_window;
-    complex_t buf[128];
-	
-    for (i = 0; i < 128; i++) {
-	k = fftorder[i];
-	t_r = pre1[i].real;
-	t_i = pre1[i].imag;
-
-	buf[i].real = t_i * data[255-k] + t_r * data[k];
-	buf[i].imag = t_r * data[255-k] - t_i * data[k];
-    }
-
-    ifft128 (buf);
-
-    /* Post IFFT complex multiply plus IFFT complex conjugate*/
-    /* Window and convert to real valued signal */
-    for (i = 0; i < 64; i++) {
-	/* y[n] = z[n] * (xcos1[n] + j * xsin1[n]) ; */
-	t_r = post1[i].real;
-	t_i = post1[i].imag;
-
-	a_r = t_r * buf[i].real     + t_i * buf[i].imag;
-	a_i = t_i * buf[i].real     - t_r * buf[i].imag;
-	b_r = t_i * buf[127-i].real + t_r * buf[127-i].imag;
-	b_i = t_r * buf[127-i].real - t_i * buf[127-i].imag;
-
-	w_1 = window[2*i];
-	w_2 = window[255-2*i];
-	data[2*i]     = delay[2*i] * w_2 - a_r * w_1 + bias;
-	data[255-2*i] = delay[2*i] * w_1 + a_r * w_2 + bias;
-	delay[2*i] = a_i;
-
-	w_1 = window[2*i+1];
-	w_2 = window[254-2*i];
-	data[2*i+1]   = delay[2*i+1] * w_2 + b_r * w_1 + bias;
-	data[254-2*i] = delay[2*i+1] * w_1 - b_r * w_2 + bias;
-	delay[2*i+1] = b_i;
-    }
-}
-
-void a52_imdct_256(sample_t * data, sample_t * delay, sample_t bias)
-{
-    int i, k;
-    sample_t t_r, t_i, a_r, a_i, b_r, b_i, c_r, c_i, d_r, d_i, w_1, w_2;
-    const sample_t * window = a52_imdct_window;
-    complex_t buf1[64], buf2[64];
-
-    /* Pre IFFT complex multiply plus IFFT cmplx conjugate */
-    for (i = 0; i < 64; i++) {
-	k = fftorder[i];
-	t_r = pre2[i].real;
-	t_i = pre2[i].imag;
-
-	buf1[i].real = t_i * data[254-k] + t_r * data[k];
-	buf1[i].imag = t_r * data[254-k] - t_i * data[k];
-
-	buf2[i].real = t_i * data[255-k] + t_r * data[k+1];
-	buf2[i].imag = t_r * data[255-k] - t_i * data[k+1];
-    }
-
-    ifft64 (buf1);
-    ifft64 (buf2);
-
-    /* Post IFFT complex multiply */
-    /* Window and convert to real valued signal */
-    for (i = 0; i < 32; i++) {
-	/* y1[n] = z1[n] * (xcos2[n] + j * xs in2[n]) ; */ 
-	t_r = post2[i].real;
-	t_i = post2[i].imag;
-
-	a_r = t_r * buf1[i].real    + t_i * buf1[i].imag;
-	a_i = t_i * buf1[i].real    - t_r * buf1[i].imag;
-	b_r = t_i * buf1[63-i].real + t_r * buf1[63-i].imag;
-	b_i = t_r * buf1[63-i].real - t_i * buf1[63-i].imag;
-
-	c_r = t_r * buf2[i].real    + t_i * buf2[i].imag;
-	c_i = t_i * buf2[i].real    - t_r * buf2[i].imag;
-	d_r = t_i * buf2[63-i].real + t_r * buf2[63-i].imag;
-	d_i = t_r * buf2[63-i].real - t_i * buf2[63-i].imag;
-
-	w_1 = window[2*i];
-	w_2 = window[255-2*i];
-	data[2*i]     = delay[2*i] * w_2 - a_r * w_1 + bias;
-	data[255-2*i] = delay[2*i] * w_1 + a_r * w_2 + bias;
-	delay[2*i] = c_i;
-
-	w_1 = window[128+2*i];
-	w_2 = window[127-2*i];
-	data[128+2*i] = delay[127-2*i] * w_2 + a_i * w_1 + bias;
-	data[127-2*i] = delay[127-2*i] * w_1 - a_i * w_2 + bias;
-	delay[127-2*i] = c_r;
-
-	w_1 = window[2*i+1];
-	w_2 = window[254-2*i];
-	data[2*i+1]   = delay[2*i+1] * w_2 - b_i * w_1 + bias;
-	data[254-2*i] = delay[2*i+1] * w_1 + b_i * w_2 + bias;
-	delay[2*i+1] = d_r;
-
-	w_1 = window[129+2*i];
-	w_2 = window[126-2*i];
-	data[129+2*i] = delay[126-2*i] * w_2 + b_r * w_1 + bias;
-	data[126-2*i] = delay[126-2*i] * w_1 - b_r * w_2 + bias;
-	delay[126-2*i] = d_i;
-    }
-}
-
-static double besselI0 (double x)
-{
-    double bessel = 1;
-    int i = 100;
-
-    do
-	bessel = bessel * x / (i * i) + 1;
-    while (--i);
-    return bessel;
-}
-
-void a52_imdct_init (uint32_t mm_accel)
-{
-    int i, k;
-    double sum;
-
-    /* compute imdct window - kaiser-bessel derived window, alpha = 5.0 */
-    sum = 0;
-    for (i = 0; i < 256; i++) {
-	sum += besselI0 (i * (256 - i) * (5 * M_PI / 256) * (5 * M_PI / 256));
-	a52_imdct_window[i] = sum;
-    }
-    sum++;
-    for (i = 0; i < 256; i++)
-	a52_imdct_window[i] = sqrt (a52_imdct_window[i] / sum);
-
-    for (i = 0; i < 3; i++)
-	roots16[i] = cos ((M_PI / 8) * (i + 1));
-
-    for (i = 0; i < 7; i++)
-	roots32[i] = cos ((M_PI / 16) * (i + 1));
-
-    for (i = 0; i < 15; i++)
-	roots64[i] = cos ((M_PI / 32) * (i + 1));
-
-    for (i = 0; i < 31; i++)
-	roots128[i] = cos ((M_PI / 64) * (i + 1));
-
-    for (i = 0; i < 64; i++) {
-	k = fftorder[i] / 2 + 64;
-	pre1[i].real = cos ((M_PI / 256) * (k - 0.25));
-	pre1[i].imag = sin ((M_PI / 256) * (k - 0.25));
-    }
-
-    for (i = 64; i < 128; i++) {
-	k = fftorder[i] / 2 + 64;
-	pre1[i].real = -cos ((M_PI / 256) * (k - 0.25));
-	pre1[i].imag = -sin ((M_PI / 256) * (k - 0.25));
-    }
-
-    for (i = 0; i < 64; i++) {
-	post1[i].real = cos ((M_PI / 256) * (i + 0.5));
-	post1[i].imag = sin ((M_PI / 256) * (i + 0.5));
-    }
-
-    for (i = 0; i < 64; i++) {
-	k = fftorder[i] / 4;
-	pre2[i].real = cos ((M_PI / 128) * (k - 0.25));
-	pre2[i].imag = sin ((M_PI / 128) * (k - 0.25));
-    }
-
-    for (i = 0; i < 32; i++) {
-	post2[i].real = cos ((M_PI / 128) * (i + 0.5));
-	post2[i].imag = sin ((M_PI / 128) * (i + 0.5));
-    }
-
-#ifdef LIBA52_DJBFFT
-    if (mm_accel & MM_ACCEL_DJBFFT) {
-	fprintf (stderr, "Using djbfft for IMDCT transform\n");
-	ifft128 = (void (*) (complex_t *)) fftc4_un128;
-	ifft64 = (void (*) (complex_t *)) fftc4_un64;
-    } else
-#endif
-    {
-	fprintf (stderr, "No accelerated IMDCT transform found\n");
-	ifft128 = ifft128_c;
-	ifft64 = ifft64_c;
-    }
-}

Deleted: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/mm_accel.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/mm_accel.h	2008-03-07 11:18:41 UTC (rev 3842)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/mm_accel.h	2008-03-07 18:34:14 UTC (rev 3843)
@@ -1,37 +0,0 @@
-/*
- * mm_accel.h
- * Copyright (C) 2000-2002 Michel Lespinasse <walken at zoy.org>
- * Copyright (C) 1999-2000 Aaron Holtzman <aholtzma at ess.engr.uvic.ca>
- *
- * This file is part of a52dec, a free ATSC A-52 stream decoder.
- * See http://liba52.sourceforge.net/ for updates.
- *
- * a52dec is free software; you can redistribute it and/or modify
- * it under the terms of the GNU General Public License as published by
- * the Free Software Foundation; either version 2 of the License, or
- * (at your option) any later version.
- *
- * a52dec is distributed in the hope that it will be useful,
- * but WITHOUT ANY WARRANTY; without even the implied warranty of
- * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- * GNU General Public License for more details.
- *
- * You should have received a copy of the GNU General Public License
- * along with this program; if not, write to the Free Software
- * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
- */
-
-#ifndef MM_ACCEL_H
-#define MM_ACCEL_H
-
-/* generic accelerations */
-#define MM_ACCEL_DJBFFT		0x00000001
-
-/* x86 accelerations */
-#define MM_ACCEL_X86_MMX	0x80000000
-#define MM_ACCEL_X86_3DNOW	0x40000000
-#define MM_ACCEL_X86_MMXEXT	0x20000000
-
-uint32_t mm_accel (void);
-
-#endif /* MM_ACCEL_H */

Deleted: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/parse.c
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/parse.c	2008-03-07 11:18:41 UTC (rev 3842)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/parse.c	2008-03-07 18:34:14 UTC (rev 3843)
@@ -1,905 +0,0 @@
-/*
- * parse.c
- * Copyright (C) 2000-2002 Michel Lespinasse <walken at zoy.org>
- * Copyright (C) 1999-2000 Aaron Holtzman <aholtzma at ess.engr.uvic.ca>
- *
- * This file is part of a52dec, a free ATSC A-52 stream decoder.
- * See http://liba52.sourceforge.net/ for updates.
- *
- * a52dec is free software; you can redistribute it and/or modify
- * it under the terms of the GNU General Public License as published by
- * the Free Software Foundation; either version 2 of the License, or
- * (at your option) any later version.
- *
- * a52dec is distributed in the hope that it will be useful,
- * but WITHOUT ANY WARRANTY; without even the implied warranty of
- * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- * GNU General Public License for more details.
- *
- * You should have received a copy of the GNU General Public License
- * along with this program; if not, write to the Free Software
- * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
- */
-
-
-//MEANX
-#define ADM_LEGACY_PROGGY
-#include "ADM_default.h"
-// /MEANX
-
-    
-#include "a52.h"
-#include "a52_internal.h"
-#include "bitstream.h"
-#include "tables.h"
-
-
-#ifdef HAVE_MEMALIGN
-/* some systems have memalign() but no declaration for it */
-void * memalign (size_t align, size_t size);
-#else
-/* assume malloc alignment is sufficient */
-#define memalign(align,size) malloc (size)
-#endif
-
-
-
-typedef struct {
-    sample_t q1[2];
-    sample_t q2[2];
-    sample_t q4;
-    int q1_ptr;
-    int q2_ptr;
-    int q4_ptr;
-} quantizer_t;
-
-static uint8_t halfrate[12] = {0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 3};
-
-a52_state_t * a52_init (uint32_t mm_accel)
-{
-    a52_state_t * state;
-    int i;
-
-    state = malloc (sizeof (a52_state_t));
-    if (state == NULL)
-	return NULL;
-
-    state->samples = memalign (16, 256 * 12 * sizeof (sample_t));
-    if (state->samples == NULL) {
-	free (state);
-	return NULL;
-    }
-
-    for (i = 0; i < 256 * 12; i++)
-	state->samples[i] = 0;
-
-    state->downmixed = 1;
-
-    state->lfsr_state = 1;
-
-    a52_imdct_init (mm_accel);
-
-    return state;
-}
-
-sample_t * a52_samples (a52_state_t * state)
-{
-    return state->samples;
-}
-
-int a52_syncinfo (uint8_t * buf, int * flags,
-		  int * sample_rate, int * bit_rate)
-{
-    static int rate[] = { 32,  40,  48,  56,  64,  80,  96, 112,
-			 128, 160, 192, 224, 256, 320, 384, 448,
-			 512, 576, 640};
-    static uint8_t lfeon[8] = {0x10, 0x10, 0x04, 0x04, 0x04, 0x01, 0x04, 0x01};
-    int frmsizecod;
-    int bitrate;
-    int half;
-    int acmod;
-
-    if ((buf[0] != 0x0b) || (buf[1] != 0x77))	/* syncword */
-	return 0;
-
-    if (buf[5] >= 0x60)		/* bsid >= 12 */
-	return 0;
-    half = halfrate[buf[5] >> 3];
-
-    /* acmod, dsurmod and lfeon */
-    acmod = buf[6] >> 5;
-    *flags = ((((buf[6] & 0xf8) == 0x50) ? A52_DOLBY : acmod) |
-	      ((buf[6] & lfeon[acmod]) ? A52_LFE : 0));
-
-    frmsizecod = buf[4] & 63;
-    if (frmsizecod >= 38)
-	return 0;
-    bitrate = rate [frmsizecod >> 1];
-    *bit_rate = (bitrate * 1000) >> half;
-
-    switch (buf[4] & 0xc0) {
-    case 0:
-	*sample_rate = 48000 >> half;
-	return 4 * bitrate;
-    case 0x40:
-	*sample_rate = 44100 >> half;
-	return 2 * (320 * bitrate / 147 + (frmsizecod & 1));
-    case 0x80:
-	*sample_rate = 32000 >> half;
-	return 6 * bitrate;
-    default:
-	return 0;
-    }
-}
-
-int a52_frame (a52_state_t * state, uint8_t * buf, int * flags,
-	       sample_t * level, sample_t bias)
-{
-    static sample_t clev[4] = {LEVEL_3DB, LEVEL_45DB, LEVEL_6DB, LEVEL_45DB};
-    static sample_t slev[4] = {LEVEL_3DB, LEVEL_6DB, 0, LEVEL_6DB};
-    int chaninfo;
-    int acmod;
-
-    state->fscod = buf[4] >> 6;
-    state->halfrate = halfrate[buf[5] >> 3];
-    state->acmod = acmod = buf[6] >> 5;
-
-    a52_bitstream_set_ptr (state, buf + 6);
-    bitstream_get (state, 3);	/* skip acmod we already parsed */
-
-    if ((acmod == 2) && (bitstream_get (state, 2) == 2))	/* dsurmod */
-	acmod = A52_DOLBY;
-
-    if ((acmod & 1) && (acmod != 1))
-	state->clev = clev[bitstream_get (state, 2)];	/* cmixlev */
-
-    if (acmod & 4)
-	state->slev = slev[bitstream_get (state, 2)];	/* surmixlev */
-
-    state->lfeon = bitstream_get (state, 1);
-
-    state->output = a52_downmix_init (acmod, *flags, level,
-				      state->clev, state->slev);
-    if (state->output < 0)
-	return 1;
-    if (state->lfeon && (*flags & A52_LFE))
-	state->output |= A52_LFE;
-    *flags = state->output;
-    /* the 2* compensates for differences in imdct */
-    state->dynrng = state->level = 2 * *level;
-    state->bias = bias;
-    state->dynrnge = 1;
-    state->dynrngcall = NULL;
-    state->cplba.deltbae = DELTA_BIT_NONE;
-    state->ba[0].deltbae = state->ba[1].deltbae = state->ba[2].deltbae =
-	state->ba[3].deltbae = state->ba[4].deltbae = DELTA_BIT_NONE;
-
-    chaninfo = !acmod;
-    do {
-	bitstream_get (state, 5);	/* dialnorm */
-	if (bitstream_get (state, 1))	/* compre */
-	    bitstream_get (state, 8);	/* compr */
-	if (bitstream_get (state, 1))	/* langcode */
-	    bitstream_get (state, 8);	/* langcod */
-	if (bitstream_get (state, 1))	/* audprodie */
-	    bitstream_get (state, 7);	/* mixlevel + roomtyp */
-    } while (chaninfo--);
-
-    bitstream_get (state, 2);		/* copyrightb + origbs */
-
-    if (bitstream_get (state, 1))	/* timecod1e */
-	bitstream_get (state, 14);	/* timecod1 */
-    if (bitstream_get (state, 1))	/* timecod2e */
-	bitstream_get (state, 14);	/* timecod2 */
-
-    if (bitstream_get (state, 1)) {	/* addbsie */
-	int addbsil;
-
-	addbsil = bitstream_get (state, 6);
-	do {
-	    bitstream_get (state, 8);	/* addbsi */
-	} while (addbsil--);
-    }
-
-    return 0;
-}
-
-void a52_dynrng (a52_state_t * state,
-		 sample_t (* call) (sample_t, void *), void * data)
-{
-    state->dynrnge = 0;
-    if (call) {
-	state->dynrnge = 1;
-	state->dynrngcall = call;
-	state->dynrngdata = data;
-    }
-}
-
-static int parse_exponents (a52_state_t * state, int expstr, int ngrps,
-			    uint8_t exponent, uint8_t * dest)
-{
-    int exps;
-
-    while (ngrps--) {
-	exps = bitstream_get (state, 7);
-
-	exponent += exp_1[exps];
-	if (exponent > 24)
-	    return 1;
-
-	switch (expstr) {
-	case EXP_D45:
-	    *(dest++) = exponent;
-	    *(dest++) = exponent;
-	case EXP_D25:
-	    *(dest++) = exponent;
-	case EXP_D15:
-	    *(dest++) = exponent;
-	}
-
-	exponent += exp_2[exps];
-	if (exponent > 24)
-	    return 1;
-
-	switch (expstr) {
-	case EXP_D45:
-	    *(dest++) = exponent;
-	    *(dest++) = exponent;
-	case EXP_D25:
-	    *(dest++) = exponent;
-	case EXP_D15:
-	    *(dest++) = exponent;
-	}
-
-	exponent += exp_3[exps];
-	if (exponent > 24)
-	    return 1;
-
-	switch (expstr) {
-	case EXP_D45:
-	    *(dest++) = exponent;
-	    *(dest++) = exponent;
-	case EXP_D25:
-	    *(dest++) = exponent;
-	case EXP_D15:
-	    *(dest++) = exponent;
-	}
-    }	
-
-    return 0;
-}
-
-static int parse_deltba (a52_state_t * state, int8_t * deltba)
-{
-    int deltnseg, deltlen, delta, j;
-
-    memset (deltba, 0, 50);
-
-    deltnseg = bitstream_get (state, 3);
-    j = 0;
-    do {
-	j += bitstream_get (state, 5);
-	deltlen = bitstream_get (state, 4);
-	delta = bitstream_get (state, 3);
-	delta -= (delta >= 4) ? 3 : 4;
-	if (!deltlen)
-	    continue;
-	if (j + deltlen >= 50)
-	    return 1;
-	while (deltlen--)
-	    deltba[j++] = delta;
-    } while (deltnseg--);
-
-    return 0;
-}
-
-static inline int zero_snr_offsets (int nfchans, a52_state_t * state)
-{
-    int i;
-
-    if ((state->csnroffst) ||
-	(state->chincpl && state->cplba.bai >> 3) ||	/* cplinu, fsnroffst */
-	(state->lfeon && state->lfeba.bai >> 3))	/* fsnroffst */
-	return 0;
-    for (i = 0; i < nfchans; i++)
-	if (state->ba[i].bai >> 3)			/* fsnroffst */
-	    return 0;
-    return 1;
-}
-
-static inline int16_t dither_gen (a52_state_t * state)
-{
-    int16_t nstate;
-
-    nstate = dither_lut[state->lfsr_state >> 8] ^ (state->lfsr_state << 8);
-	
-    state->lfsr_state = (uint16_t) nstate;
-
-    return nstate;
-}
-
-static void coeff_get (a52_state_t * state, sample_t * coeff,
-		       expbap_t * expbap, quantizer_t * quantizer,
-		       sample_t level, int dither, int end)
-{
-    int i;
-    uint8_t * exp;
-    int8_t * bap;
-    sample_t factor[25];
-
-    for (i = 0; i <= 24; i++)
-	factor[i] = scale_factor[i] * level;
-
-    exp = expbap->exp;
-    bap = expbap->bap;
-
-    for (i = 0; i < end; i++) {
-	int bapi;
-
-	bapi = bap[i];
-	switch (bapi) {
-	case 0:
-	    if (dither) {
-		coeff[i] = dither_gen (state) * LEVEL_3DB * factor[exp[i]];
-		continue;
-	    } else {
-		coeff[i] = 0;
-		continue;
-	    }
-
-	case -1:
-	    if (quantizer->q1_ptr >= 0) {
-		coeff[i] = quantizer->q1[quantizer->q1_ptr--] * factor[exp[i]];
-		continue;
-	    } else {
-		int code;
-
-		code = bitstream_get (state, 5);
-
-		quantizer->q1_ptr = 1;
-		quantizer->q1[0] = q_1_2[code];
-		quantizer->q1[1] = q_1_1[code];
-		coeff[i] = q_1_0[code] * factor[exp[i]];
-		continue;
-	    }
-
-	case -2:
-	    if (quantizer->q2_ptr >= 0) {
-		coeff[i] = quantizer->q2[quantizer->q2_ptr--] * factor[exp[i]];
-		continue;
-	    } else {
-		int code;
-
-		code = bitstream_get (state, 7);
-
-		quantizer->q2_ptr = 1;
-		quantizer->q2[0] = q_2_2[code];
-		quantizer->q2[1] = q_2_1[code];
-		coeff[i] = q_2_0[code] * factor[exp[i]];
-		continue;
-	    }
-
-	case 3:
-	    coeff[i] = q_3[bitstream_get (state, 3)] * factor[exp[i]];
-	    continue;
-
-	case -3:
-	    if (quantizer->q4_ptr == 0) {
-		quantizer->q4_ptr = -1;
-		coeff[i] = quantizer->q4 * factor[exp[i]];
-		continue;
-	    } else {
-		int code;
-
-		code = bitstream_get (state, 7);
-
-		quantizer->q4_ptr = 0;
-		quantizer->q4 = q_4_1[code];
-		coeff[i] = q_4_0[code] * factor[exp[i]];
-		continue;
-	    }
-
-	case 4:
-	    coeff[i] = q_5[bitstream_get (state, 4)] * factor[exp[i]];
-	    continue;
-
-	default:
-	    coeff[i] = ((bitstream_get_2 (state, bapi) << (16 - bapi)) *
-			  factor[exp[i]]);
-	}
-    }
-}
-
-static void coeff_get_coupling (a52_state_t * state, int nfchans,
-				sample_t * coeff, sample_t (* samples)[256],
-				quantizer_t * quantizer, uint8_t dithflag[5])
-{
-    int cplbndstrc, bnd, i, i_end, ch;
-    uint8_t * exp;
-    int8_t * bap;
-    sample_t cplco[5];
-
-    exp = state->cpl_expbap.exp;
-    bap = state->cpl_expbap.bap;
-    bnd = 0;
-    cplbndstrc = state->cplbndstrc;
-    i = state->cplstrtmant;
-    while (i < state->cplendmant) {
-	i_end = i + 12;
-	while (cplbndstrc & 1) {
-	    cplbndstrc >>= 1;
-	    i_end += 12;
-	}
-	cplbndstrc >>= 1;
-	for (ch = 0; ch < nfchans; ch++)
-	    cplco[ch] = state->cplco[ch][bnd] * coeff[ch];
-	bnd++;
-
-	while (i < i_end) {
-	    sample_t cplcoeff;
-	    int bapi;
-
-	    bapi = bap[i];
-	    switch (bapi) {
-	    case 0:
-		cplcoeff = LEVEL_3DB * scale_factor[exp[i]];
-		for (ch = 0; ch < nfchans; ch++)
-		    if ((state->chincpl >> ch) & 1) {
-			if (dithflag[ch])
-			    samples[ch][i] = (cplcoeff * cplco[ch] *
-					      dither_gen (state));
-			else
-			    samples[ch][i] = 0;
-		    }
-		i++;
-		continue;
-
-	    case -1:
-		if (quantizer->q1_ptr >= 0) {
-		    cplcoeff = quantizer->q1[quantizer->q1_ptr--];
-		    break;
-		} else {
-		    int code;
-
-		    code = bitstream_get (state, 5);
-
-		    quantizer->q1_ptr = 1;
-		    quantizer->q1[0] = q_1_2[code];
-		    quantizer->q1[1] = q_1_1[code];
-		    cplcoeff = q_1_0[code];
-		    break;
-		}
-
-	    case -2:
-		if (quantizer->q2_ptr >= 0) {
-		    cplcoeff = quantizer->q2[quantizer->q2_ptr--];
-		    break;
-		} else {
-		    int code;
-
-		    code = bitstream_get (state, 7);
-
-		    quantizer->q2_ptr = 1;
-		    quantizer->q2[0] = q_2_2[code];
-		    quantizer->q2[1] = q_2_1[code];
-		    cplcoeff = q_2_0[code];
-		    break;
-		}
-
-	    case 3:
-		cplcoeff = q_3[bitstream_get (state, 3)];
-		break;
-
-	    case -3:
-		if (quantizer->q4_ptr == 0) {
-		    quantizer->q4_ptr = -1;
-		    cplcoeff = quantizer->q4;
-		    break;
-		} else {
-		    int code;
-
-		    code = bitstream_get (state, 7);
-
-		    quantizer->q4_ptr = 0;
-		    quantizer->q4 = q_4_1[code];
-		    cplcoeff = q_4_0[code];
-		    break;
-		}
-
-	    case 4:
-		cplcoeff = q_5[bitstream_get (state, 4)];
-		break;
-
-	    default:
-		cplcoeff = bitstream_get_2 (state, bapi) << (16 - bapi);
-	    }
-
-	    cplcoeff *= scale_factor[exp[i]];
-	    for (ch = 0; ch < nfchans; ch++)
-		if ((state->chincpl >> ch) & 1)
-		    samples[ch][i] = cplcoeff * cplco[ch];
-	    i++;
-	}
-    }
-}
-
-int a52_block (a52_state_t * state)
-{
-    static const uint8_t nfchans_tbl[] = {2, 1, 2, 3, 3, 4, 4, 5, 1, 1, 2};
-    static int rematrix_band[4] = {25, 37, 61, 253};
-    int i, nfchans, chaninfo;
-    uint8_t cplexpstr, chexpstr[5], lfeexpstr, do_bit_alloc, done_cpl;
-    uint8_t blksw[5], dithflag[5];
-    sample_t coeff[5];
-    int chanbias;
-    quantizer_t quantizer;
-    sample_t * samples;
-
-    nfchans = nfchans_tbl[state->acmod];
-
-    for (i = 0; i < nfchans; i++)
-	blksw[i] = bitstream_get (state, 1);
-
-    for (i = 0; i < nfchans; i++)
-	dithflag[i] = bitstream_get (state, 1);
-
-    chaninfo = !state->acmod;
-    do {
-	if (bitstream_get (state, 1)) {	/* dynrnge */
-	    int dynrng;
-
-	    dynrng = bitstream_get_2 (state, 8);
-	    if (state->dynrnge) {
-		sample_t range;
-
-		range = ((((dynrng & 0x1f) | 0x20) << 13) *
-			 scale_factor[3 - (dynrng >> 5)]);
-		if (state->dynrngcall)
-		    range = state->dynrngcall (range, state->dynrngdata);
-		state->dynrng = state->level * range;
-	    }
-	}
-    } while (chaninfo--);
-
-    if (bitstream_get (state, 1)) {	/* cplstre */
-	state->chincpl = 0;
-	if (bitstream_get (state, 1)) {	/* cplinu */
-	    static uint8_t bndtab[16] = {31, 35, 37, 39, 41, 42, 43, 44,
-					 45, 45, 46, 46, 47, 47, 48, 48};
-	    int cplbegf;
-	    int cplendf;
-	    int ncplsubnd;
-
-	    for (i = 0; i < nfchans; i++)
-		state->chincpl |= bitstream_get (state, 1) << i;
-	    switch (state->acmod) {
-	    case 0: case 1:
-		return 1;
-	    case 2:
-		state->phsflginu = bitstream_get (state, 1);
-	    }
-	    cplbegf = bitstream_get (state, 4);
-	    cplendf = bitstream_get (state, 4);
-
-	    if (cplendf + 3 - cplbegf < 0)
-		return 1;
-	    state->ncplbnd = ncplsubnd = cplendf + 3 - cplbegf;
-	    state->cplstrtbnd = bndtab[cplbegf];
-	    state->cplstrtmant = cplbegf * 12 + 37;
-	    state->cplendmant = cplendf * 12 + 73;
-
-	    state->cplbndstrc = 0;
-	    for (i = 0; i < ncplsubnd - 1; i++)
-		if (bitstream_get (state, 1)) {
-		    state->cplbndstrc |= 1 << i;
-		    state->ncplbnd--;
-		}
-	}
-    }
-
-    if (state->chincpl) {	/* cplinu */
-	int j, cplcoe;
-
-	cplcoe = 0;
-	for (i = 0; i < nfchans; i++)
-	    if ((state->chincpl) >> i & 1)
-		if (bitstream_get (state, 1)) {	/* cplcoe */
-		    int mstrcplco, cplcoexp, cplcomant;
-
-		    cplcoe = 1;
-		    mstrcplco = 3 * bitstream_get (state, 2);
-		    for (j = 0; j < state->ncplbnd; j++) {
-			cplcoexp = bitstream_get (state, 4);
-			cplcomant = bitstream_get (state, 4);
-			if (cplcoexp == 15)
-			    cplcomant <<= 14;
-			else
-			    cplcomant = (cplcomant | 0x10) << 13;
-			state->cplco[i][j] =
-			    cplcomant * scale_factor[cplcoexp + mstrcplco];
-		    }
-		}
-	if ((state->acmod == 2) && state->phsflginu && cplcoe)
-	    for (j = 0; j < state->ncplbnd; j++)
-		if (bitstream_get (state, 1))	/* phsflg */
-		    state->cplco[1][j] = -state->cplco[1][j];
-    }
-
-    if ((state->acmod == 2) && (bitstream_get (state, 1))) {	/* rematstr */
-	int end;
-
-	state->rematflg = 0;
-	end = (state->chincpl) ? state->cplstrtmant : 253;	/* cplinu */
-	i = 0;
-	do
-	    state->rematflg |= bitstream_get (state, 1) << i;
-	while (rematrix_band[i++] < end);
-    }
-
-    cplexpstr = EXP_REUSE;
-    lfeexpstr = EXP_REUSE;
-    if (state->chincpl)	/* cplinu */
-	cplexpstr = bitstream_get (state, 2);
-    for (i = 0; i < nfchans; i++)
-	chexpstr[i] = bitstream_get (state, 2);
-    if (state->lfeon) 
-	lfeexpstr = bitstream_get (state, 1);
-
-    for (i = 0; i < nfchans; i++)
-	if (chexpstr[i] != EXP_REUSE) {
-	    if ((state->chincpl >> i) & 1)
-		state->endmant[i] = state->cplstrtmant;
-	    else {
-		int chbwcod;
-
-		chbwcod = bitstream_get (state, 6);
-		if (chbwcod > 60)
-		    return 1;
-		state->endmant[i] = chbwcod * 3 + 73;
-	    }
-	}
-
-    do_bit_alloc = 0;
-
-    if (cplexpstr != EXP_REUSE) {
-	int cplabsexp, ncplgrps;
-
-	do_bit_alloc = 64;
-	ncplgrps = ((state->cplendmant - state->cplstrtmant) /
-		    (3 << (cplexpstr - 1)));
-	cplabsexp = bitstream_get (state, 4) << 1;
-	if (parse_exponents (state, cplexpstr, ncplgrps, cplabsexp,
-			     state->cpl_expbap.exp + state->cplstrtmant))
-	    return 1;
-    }
-    for (i = 0; i < nfchans; i++)
-	if (chexpstr[i] != EXP_REUSE) {
-	    int grp_size, nchgrps;
-
-	    do_bit_alloc |= 1 << i;
-	    grp_size = 3 << (chexpstr[i] - 1);
-	    nchgrps = (state->endmant[i] + grp_size - 4) / grp_size;
-	    state->fbw_expbap[i].exp[0] = bitstream_get (state, 4);
-	    if (parse_exponents (state, chexpstr[i], nchgrps,
-				 state->fbw_expbap[i].exp[0],
-				 state->fbw_expbap[i].exp + 1))
-		return 1;
-	    bitstream_get (state, 2);	/* gainrng */
-	}
-    if (lfeexpstr != EXP_REUSE) {
-	do_bit_alloc |= 32;
-	state->lfe_expbap.exp[0] = bitstream_get (state, 4);
-	if (parse_exponents (state, lfeexpstr, 2, state->lfe_expbap.exp[0],
-			     state->lfe_expbap.exp + 1))
-	    return 1;
-    }
-
-    if (bitstream_get (state, 1)) {	/* baie */
-	do_bit_alloc = -1;
-	state->bai = bitstream_get (state, 11);
-    }
-    if (bitstream_get (state, 1)) {	/* snroffste */
-	do_bit_alloc = -1;
-	state->csnroffst = bitstream_get (state, 6);
-	if (state->chincpl)	/* cplinu */
-	    state->cplba.bai = bitstream_get (state, 7);
-	for (i = 0; i < nfchans; i++)
-	    state->ba[i].bai = bitstream_get (state, 7);
-	if (state->lfeon)
-	    state->lfeba.bai = bitstream_get (state, 7);
-    }
-    if ((state->chincpl) && (bitstream_get (state, 1))) { /* cplleake */
-	do_bit_alloc |= 64;
-	state->cplfleak = 9 - bitstream_get (state, 3);
-	state->cplsleak = 9 - bitstream_get (state, 3);
-    }
-
-    if (bitstream_get (state, 1)) {	/* deltbaie */
-	do_bit_alloc = -1;
-	if (state->chincpl)	/* cplinu */
-	    state->cplba.deltbae = bitstream_get (state, 2);
-	for (i = 0; i < nfchans; i++)
-	    state->ba[i].deltbae = bitstream_get (state, 2);
-	if (state->chincpl &&	/* cplinu */
-	    (state->cplba.deltbae == DELTA_BIT_NEW) &&
-	    parse_deltba (state, state->cplba.deltba))
-	    return 1;
-	for (i = 0; i < nfchans; i++)
-	    if ((state->ba[i].deltbae == DELTA_BIT_NEW) &&
-		parse_deltba (state, state->ba[i].deltba))
-		return 1;
-    }
-
-    if (do_bit_alloc) {
-	if (zero_snr_offsets (nfchans, state)) {
-	    memset (state->cpl_expbap.bap, 0, sizeof (state->cpl_expbap.bap));
-	    for (i = 0; i < nfchans; i++)
-		memset (state->fbw_expbap[i].bap, 0,
-			sizeof (state->fbw_expbap[i].bap));
-	    memset (state->lfe_expbap.bap, 0, sizeof (state->lfe_expbap.bap));
-	} else {
-	    if (state->chincpl && (do_bit_alloc & 64))	/* cplinu */
-		a52_bit_allocate (state, &state->cplba, state->cplstrtbnd,
-				  state->cplstrtmant, state->cplendmant,
-				  state->cplfleak << 8, state->cplsleak << 8,
-				  &state->cpl_expbap);
-	    for (i = 0; i < nfchans; i++)
-		if (do_bit_alloc & (1 << i))
-		    a52_bit_allocate (state, state->ba + i, 0, 0,
-				      state->endmant[i], 0, 0,
-				      state->fbw_expbap +i);
-	    if (state->lfeon && (do_bit_alloc & 32)) {
-		state->lfeba.deltbae = DELTA_BIT_NONE;
-		a52_bit_allocate (state, &state->lfeba, 0, 0, 7, 0, 0,
-				  &state->lfe_expbap);
-	    }
-	}
-    }
-
-    if (bitstream_get (state, 1)) {	/* skiple */
-	i = bitstream_get (state, 9);	/* skipl */
-	while (i--)
-	    bitstream_get (state, 8);
-    }
-
-    samples = state->samples;
-    if (state->output & A52_LFE)
-	samples += 256;	/* shift for LFE channel */
-
-    chanbias = a52_downmix_coeff (coeff, state->acmod, state->output,
-				  state->dynrng, state->clev, state->slev);
-
-    quantizer.q1_ptr = quantizer.q2_ptr = quantizer.q4_ptr = -1;
-    done_cpl = 0;
-
-    for (i = 0; i < nfchans; i++) {
-	int j;
-
-	coeff_get (state, samples + 256 * i, state->fbw_expbap +i, &quantizer,
-		   coeff[i], dithflag[i], state->endmant[i]);
-
-	if ((state->chincpl >> i) & 1) {
-	    if (!done_cpl) {
-		done_cpl = 1;
-		coeff_get_coupling (state, nfchans, coeff,
-				    (sample_t (*)[256])samples, &quantizer,
-				    dithflag);
-	    }
-	    j = state->cplendmant;
-	} else
-	    j = state->endmant[i];
-	do
-	    (samples + 256 * i)[j] = 0;
-	while (++j < 256);
-    }
-
-    if (state->acmod == 2) {
-	int j, end, band, rematflg;
-
-	end = ((state->endmant[0] < state->endmant[1]) ?
-	       state->endmant[0] : state->endmant[1]);
-
-	i = 0;
-	j = 13;
-	rematflg = state->rematflg;
-	do {
-	    if (! (rematflg & 1)) {
-		rematflg >>= 1;
-		j = rematrix_band[i++];
-		continue;
-	    }
-	    rematflg >>= 1;
-	    band = rematrix_band[i++];
-	    if (band > end)
-		band = end;
-	    do {
-		sample_t tmp0, tmp1;
-
-		tmp0 = samples[j];
-		tmp1 = (samples+256)[j];
-		samples[j] = tmp0 + tmp1;
-		(samples+256)[j] = tmp0 - tmp1;
-	    } while (++j < band);
-	} while (j < end);
-    }
-
-    if (state->lfeon) {
-	if (state->output & A52_LFE) {
-	    coeff_get (state, samples - 256, &state->lfe_expbap, &quantizer,
-		       state->dynrng, 0, 7);
-	    for (i = 7; i < 256; i++)
-		(samples-256)[i] = 0;
-	    a52_imdct_512 (samples - 256, samples + 1536 - 256, state->bias);
-	} else {
-	    /* just skip the LFE coefficients */
-	    coeff_get (state, samples + 1280, &state->lfe_expbap, &quantizer,
-		       0, 0, 7);
-	}
-    }
-
-    i = 0;
-    if (nfchans_tbl[state->output & A52_CHANNEL_MASK] < nfchans)
-	for (i = 1; i < nfchans; i++)
-	    if (blksw[i] != blksw[0])
-		break;
-
-    if (i < nfchans) {
-	if (state->downmixed) {
-	    state->downmixed = 0;
-	    a52_upmix (samples + 1536, state->acmod, state->output);
-	}
-
-	for (i = 0; i < nfchans; i++) {
-	    sample_t bias;
-
-	    bias = 0;
-	    if (!(chanbias & (1 << i)))
-		bias = state->bias;
-
-	    if (coeff[i]) {
-		if (blksw[i])
-		    a52_imdct_256 (samples + 256 * i, samples + 1536 + 256 * i,
-				   bias);
-		else 
-		    a52_imdct_512 (samples + 256 * i, samples + 1536 + 256 * i,
-				   bias);
-	    } else {
-		int j;
-
-		for (j = 0; j < 256; j++)
-		    (samples + 256 * i)[j] = bias;
-	    }
-	}
-
-	a52_downmix (samples, state->acmod, state->output, state->bias,
-		     state->clev, state->slev);
-    } else {
-	nfchans = nfchans_tbl[state->output & A52_CHANNEL_MASK];
-
-	a52_downmix (samples, state->acmod, state->output, 0,
-		     state->clev, state->slev);
-
-	if (!state->downmixed) {
-	    state->downmixed = 1;
-	    a52_downmix (samples + 1536, state->acmod, state->output, 0,
-			 state->clev, state->slev);
-	}
-
-	if (blksw[0])
-	    for (i = 0; i < nfchans; i++)
-		a52_imdct_256 (samples + 256 * i, samples + 1536 + 256 * i,
-			       state->bias);
-	else 
-	    for (i = 0; i < nfchans; i++)
-		a52_imdct_512 (samples + 256 * i, samples + 1536 + 256 * i,
-			       state->bias);
-    }
-
-    return 0;
-}
-
-void a52_free (a52_state_t * state)
-{
-    free (state->samples);
-    free (state);
-}

Deleted: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/tables.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/tables.h	2008-03-07 11:18:41 UTC (rev 3842)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/tables.h	2008-03-07 18:34:14 UTC (rev 3843)
@@ -1,246 +0,0 @@
-/*
- * tables.h
- * Copyright (C) 2000-2002 Michel Lespinasse <walken at zoy.org>
- * Copyright (C) 1999-2000 Aaron Holtzman <aholtzma at ess.engr.uvic.ca>
- *
- * This file is part of a52dec, a free ATSC A-52 stream decoder.
- * See http://liba52.sourceforge.net/ for updates.
- *
- * a52dec is free software; you can redistribute it and/or modify
- * it under the terms of the GNU General Public License as published by
- * the Free Software Foundation; either version 2 of the License, or
- * (at your option) any later version.
- *
- * a52dec is distributed in the hope that it will be useful,
- * but WITHOUT ANY WARRANTY; without even the implied warranty of
- * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- * GNU General Public License for more details.
- *
- * You should have received a copy of the GNU General Public License
- * along with this program; if not, write to the Free Software
- * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
- */
-
-static const int8_t exp_1[128] = {
-    -2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,
-    -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,
-     0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
-     1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
-     2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2,
-    25,25,25
-};
-static const int8_t exp_2[128] = {
-    -2,-2,-2,-2,-2,-1,-1,-1,-1,-1, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2,
-    -2,-2,-2,-2,-2,-1,-1,-1,-1,-1, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2,
-    -2,-2,-2,-2,-2,-1,-1,-1,-1,-1, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2,
-    -2,-2,-2,-2,-2,-1,-1,-1,-1,-1, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2,
-    -2,-2,-2,-2,-2,-1,-1,-1,-1,-1, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2,
-    25,25,25
-};
-static const int8_t exp_3[128] = {
-    -2,-1, 0, 1, 2,-2,-1, 0, 1, 2,-2,-1, 0, 1, 2,-2,-1, 0, 1, 2,-2,-1, 0, 1, 2,
-    -2,-1, 0, 1, 2,-2,-1, 0, 1, 2,-2,-1, 0, 1, 2,-2,-1, 0, 1, 2,-2,-1, 0, 1, 2,
-    -2,-1, 0, 1, 2,-2,-1, 0, 1, 2,-2,-1, 0, 1, 2,-2,-1, 0, 1, 2,-2,-1, 0, 1, 2,
-    -2,-1, 0, 1, 2,-2,-1, 0, 1, 2,-2,-1, 0, 1, 2,-2,-1, 0, 1, 2,-2,-1, 0, 1, 2,
-    -2,-1, 0, 1, 2,-2,-1, 0, 1, 2,-2,-1, 0, 1, 2,-2,-1, 0, 1, 2,-2,-1, 0, 1, 2,
-    25,25,25
-};
-
-#define Q0 ((-2 << 15) / 3.0)
-#define Q1 (0)
-#define Q2 ((2 << 15) / 3.0)
-
-static const sample_t q_1_0[32] = {
-    Q0,Q0,Q0,Q0,Q0,Q0,Q0,Q0,Q0,
-    Q1,Q1,Q1,Q1,Q1,Q1,Q1,Q1,Q1,
-    Q2,Q2,Q2,Q2,Q2,Q2,Q2,Q2,Q2,
-    0,0,0,0,0
-};
-
-static const sample_t q_1_1[32] = {
-    Q0,Q0,Q0,Q1,Q1,Q1,Q2,Q2,Q2,
-    Q0,Q0,Q0,Q1,Q1,Q1,Q2,Q2,Q2,
-    Q0,Q0,Q0,Q1,Q1,Q1,Q2,Q2,Q2,
-    0,0,0,0,0
-};
-
-static const sample_t q_1_2[32] = {
-    Q0,Q1,Q2,Q0,Q1,Q2,Q0,Q1,Q2,
-    Q0,Q1,Q2,Q0,Q1,Q2,Q0,Q1,Q2,
-    Q0,Q1,Q2,Q0,Q1,Q2,Q0,Q1,Q2,
-    0,0,0,0,0
-};
-
-#undef Q0
-#undef Q1
-#undef Q2
-
-#define Q0 ((-4 << 15) / 5.0)
-#define Q1 ((-2 << 15) / 5.0)
-#define Q2 (0)
-#define Q3 ((2 << 15) / 5.0)
-#define Q4 ((4 << 15) / 5.0)
-
-static const sample_t q_2_0[128] = {
-    Q0,Q0,Q0,Q0,Q0,Q0,Q0,Q0,Q0,Q0,Q0,Q0,Q0,Q0,Q0,Q0,Q0,Q0,Q0,Q0,Q0,Q0,Q0,Q0,Q0,
-    Q1,Q1,Q1,Q1,Q1,Q1,Q1,Q1,Q1,Q1,Q1,Q1,Q1,Q1,Q1,Q1,Q1,Q1,Q1,Q1,Q1,Q1,Q1,Q1,Q1,
-    Q2,Q2,Q2,Q2,Q2,Q2,Q2,Q2,Q2,Q2,Q2,Q2,Q2,Q2,Q2,Q2,Q2,Q2,Q2,Q2,Q2,Q2,Q2,Q2,Q2,
-    Q3,Q3,Q3,Q3,Q3,Q3,Q3,Q3,Q3,Q3,Q3,Q3,Q3,Q3,Q3,Q3,Q3,Q3,Q3,Q3,Q3,Q3,Q3,Q3,Q3,
-    Q4,Q4,Q4,Q4,Q4,Q4,Q4,Q4,Q4,Q4,Q4,Q4,Q4,Q4,Q4,Q4,Q4,Q4,Q4,Q4,Q4,Q4,Q4,Q4,Q4,
-    0,0,0
-};
-
-static const sample_t q_2_1[128] = {
-    Q0,Q0,Q0,Q0,Q0,Q1,Q1,Q1,Q1,Q1,Q2,Q2,Q2,Q2,Q2,Q3,Q3,Q3,Q3,Q3,Q4,Q4,Q4,Q4,Q4,
-    Q0,Q0,Q0,Q0,Q0,Q1,Q1,Q1,Q1,Q1,Q2,Q2,Q2,Q2,Q2,Q3,Q3,Q3,Q3,Q3,Q4,Q4,Q4,Q4,Q4,
-    Q0,Q0,Q0,Q0,Q0,Q1,Q1,Q1,Q1,Q1,Q2,Q2,Q2,Q2,Q2,Q3,Q3,Q3,Q3,Q3,Q4,Q4,Q4,Q4,Q4,
-    Q0,Q0,Q0,Q0,Q0,Q1,Q1,Q1,Q1,Q1,Q2,Q2,Q2,Q2,Q2,Q3,Q3,Q3,Q3,Q3,Q4,Q4,Q4,Q4,Q4,
-    Q0,Q0,Q0,Q0,Q0,Q1,Q1,Q1,Q1,Q1,Q2,Q2,Q2,Q2,Q2,Q3,Q3,Q3,Q3,Q3,Q4,Q4,Q4,Q4,Q4,
-    0,0,0
-};
-
-static const sample_t q_2_2[128] = {
-    Q0,Q1,Q2,Q3,Q4,Q0,Q1,Q2,Q3,Q4,Q0,Q1,Q2,Q3,Q4,Q0,Q1,Q2,Q3,Q4,Q0,Q1,Q2,Q3,Q4,
-    Q0,Q1,Q2,Q3,Q4,Q0,Q1,Q2,Q3,Q4,Q0,Q1,Q2,Q3,Q4,Q0,Q1,Q2,Q3,Q4,Q0,Q1,Q2,Q3,Q4,
-    Q0,Q1,Q2,Q3,Q4,Q0,Q1,Q2,Q3,Q4,Q0,Q1,Q2,Q3,Q4,Q0,Q1,Q2,Q3,Q4,Q0,Q1,Q2,Q3,Q4,
-    Q0,Q1,Q2,Q3,Q4,Q0,Q1,Q2,Q3,Q4,Q0,Q1,Q2,Q3,Q4,Q0,Q1,Q2,Q3,Q4,Q0,Q1,Q2,Q3,Q4,
-    Q0,Q1,Q2,Q3,Q4,Q0,Q1,Q2,Q3,Q4,Q0,Q1,Q2,Q3,Q4,Q0,Q1,Q2,Q3,Q4,Q0,Q1,Q2,Q3,Q4,
-    0,0,0
-};
-
-#undef Q0
-#undef Q1
-#undef Q2
-#undef Q3
-#undef Q4
-
-static const sample_t q_3[8] = {
-    (-6 << 15)/7.0, (-4 << 15)/7.0, (-2 << 15)/7.0, 0,
-    ( 2 << 15)/7.0, ( 4 << 15)/7.0, ( 6 << 15)/7.0, 0
-};
-
-#define Q0 ((-10 << 15) / 11.0)
-#define Q1 ((-8 << 15) / 11.0)
-#define Q2 ((-6 << 15) / 11.0)
-#define Q3 ((-4 << 15) / 11.0)
-#define Q4 ((-2 << 15) / 11.0)
-#define Q5 (0)
-#define Q6 ((2 << 15) / 11.0)
-#define Q7 ((4 << 15) / 11.0)
-#define Q8 ((6 << 15) / 11.0)
-#define Q9 ((8 << 15) / 11.0)
-#define QA ((10 << 15) / 11.0)
-
-static const sample_t q_4_0[128] = {
-    Q0, Q0, Q0, Q0, Q0, Q0, Q0, Q0, Q0, Q0, Q0,
-    Q1, Q1, Q1, Q1, Q1, Q1, Q1, Q1, Q1, Q1, Q1,
-    Q2, Q2, Q2, Q2, Q2, Q2, Q2, Q2, Q2, Q2, Q2,
-    Q3, Q3, Q3, Q3, Q3, Q3, Q3, Q3, Q3, Q3, Q3,
-    Q4, Q4, Q4, Q4, Q4, Q4, Q4, Q4, Q4, Q4, Q4,
-    Q5, Q5, Q5, Q5, Q5, Q5, Q5, Q5, Q5, Q5, Q5,
-    Q6, Q6, Q6, Q6, Q6, Q6, Q6, Q6, Q6, Q6, Q6,
-    Q7, Q7, Q7, Q7, Q7, Q7, Q7, Q7, Q7, Q7, Q7,
-    Q8, Q8, Q8, Q8, Q8, Q8, Q8, Q8, Q8, Q8, Q8,
-    Q9, Q9, Q9, Q9, Q9, Q9, Q9, Q9, Q9, Q9, Q9,
-    QA, QA, QA, QA, QA, QA, QA, QA, QA, QA, QA,
-    0,  0,  0,  0,  0,  0,  0
-};
-
-static const sample_t q_4_1[128] = {
-    Q0, Q1, Q2, Q3, Q4, Q5, Q6, Q7, Q8, Q9, QA,
-    Q0, Q1, Q2, Q3, Q4, Q5, Q6, Q7, Q8, Q9, QA,
-    Q0, Q1, Q2, Q3, Q4, Q5, Q6, Q7, Q8, Q9, QA,
-    Q0, Q1, Q2, Q3, Q4, Q5, Q6, Q7, Q8, Q9, QA,
-    Q0, Q1, Q2, Q3, Q4, Q5, Q6, Q7, Q8, Q9, QA,
-    Q0, Q1, Q2, Q3, Q4, Q5, Q6, Q7, Q8, Q9, QA,
-    Q0, Q1, Q2, Q3, Q4, Q5, Q6, Q7, Q8, Q9, QA,
-    Q0, Q1, Q2, Q3, Q4, Q5, Q6, Q7, Q8, Q9, QA,
-    Q0, Q1, Q2, Q3, Q4, Q5, Q6, Q7, Q8, Q9, QA,
-    Q0, Q1, Q2, Q3, Q4, Q5, Q6, Q7, Q8, Q9, QA,
-    Q0, Q1, Q2, Q3, Q4, Q5, Q6, Q7, Q8, Q9, QA,
-    0,  0,  0,  0,  0,  0,  0
-};
-
-#undef Q0
-#undef Q1
-#undef Q2
-#undef Q3
-#undef Q4
-#undef Q5
-#undef Q6
-#undef Q7
-#undef Q8
-#undef Q9
-#undef QA
-
-static const sample_t q_5[16] = {
-    (-14 << 15)/15.0,(-12 << 15)/15.0,(-10 << 15)/15.0,
-    ( -8 << 15)/15.0,( -6 << 15)/15.0,( -4 << 15)/15.0,
-    ( -2 << 15)/15.0,   0            ,(  2 << 15)/15.0,
-    (  4 << 15)/15.0,(  6 << 15)/15.0,(  8 << 15)/15.0,
-    ( 10 << 15)/15.0,( 12 << 15)/15.0,( 14 << 15)/15.0,
-    0
-};
-
-static const sample_t scale_factor[25] = {
-    0.000030517578125,
-    0.0000152587890625,
-    0.00000762939453125,
-    0.000003814697265625,
-    0.0000019073486328125,
-    0.00000095367431640625,
-    0.000000476837158203125,
-    0.0000002384185791015625,
-    0.00000011920928955078125,
-    0.000000059604644775390625,
-    0.0000000298023223876953125,
-    0.00000001490116119384765625,
-    0.000000007450580596923828125,
-    0.0000000037252902984619140625,
-    0.00000000186264514923095703125,
-    0.000000000931322574615478515625,
-    0.0000000004656612873077392578125,
-    0.00000000023283064365386962890625,
-    0.000000000116415321826934814453125,
-    0.0000000000582076609134674072265625,
-    0.00000000002910383045673370361328125,
-    0.000000000014551915228366851806640625,
-    0.0000000000072759576141834259033203125,
-    0.00000000000363797880709171295166015625,
-    0.000000000001818989403545856475830078125
-};
-
-static const uint16_t dither_lut[256] = {
-    0x0000, 0xa011, 0xe033, 0x4022, 0x6077, 0xc066, 0x8044, 0x2055,
-    0xc0ee, 0x60ff, 0x20dd, 0x80cc, 0xa099, 0x0088, 0x40aa, 0xe0bb,
-    0x21cd, 0x81dc, 0xc1fe, 0x61ef, 0x41ba, 0xe1ab, 0xa189, 0x0198,
-    0xe123, 0x4132, 0x0110, 0xa101, 0x8154, 0x2145, 0x6167, 0xc176,
-    0x439a, 0xe38b, 0xa3a9, 0x03b8, 0x23ed, 0x83fc, 0xc3de, 0x63cf,
-    0x8374, 0x2365, 0x6347, 0xc356, 0xe303, 0x4312, 0x0330, 0xa321,
-    0x6257, 0xc246, 0x8264, 0x2275, 0x0220, 0xa231, 0xe213, 0x4202,
-    0xa2b9, 0x02a8, 0x428a, 0xe29b, 0xc2ce, 0x62df, 0x22fd, 0x82ec,
-    0x8734, 0x2725, 0x6707, 0xc716, 0xe743, 0x4752, 0x0770, 0xa761,
-    0x47da, 0xe7cb, 0xa7e9, 0x07f8, 0x27ad, 0x87bc, 0xc79e, 0x678f,
-    0xa6f9, 0x06e8, 0x46ca, 0xe6db, 0xc68e, 0x669f, 0x26bd, 0x86ac,
-    0x6617, 0xc606, 0x8624, 0x2635, 0x0660, 0xa671, 0xe653, 0x4642,
-    0xc4ae, 0x64bf, 0x249d, 0x848c, 0xa4d9, 0x04c8, 0x44ea, 0xe4fb,
-    0x0440, 0xa451, 0xe473, 0x4462, 0x6437, 0xc426, 0x8404, 0x2415,
-    0xe563, 0x4572, 0x0550, 0xa541, 0x8514, 0x2505, 0x6527, 0xc536,
-    0x258d, 0x859c, 0xc5be, 0x65af, 0x45fa, 0xe5eb, 0xa5c9, 0x05d8,
-    0xae79, 0x0e68, 0x4e4a, 0xee5b, 0xce0e, 0x6e1f, 0x2e3d, 0x8e2c,
-    0x6e97, 0xce86, 0x8ea4, 0x2eb5, 0x0ee0, 0xaef1, 0xeed3, 0x4ec2,
-    0x8fb4, 0x2fa5, 0x6f87, 0xcf96, 0xefc3, 0x4fd2, 0x0ff0, 0xafe1,
-    0x4f5a, 0xef4b, 0xaf69, 0x0f78, 0x2f2d, 0x8f3c, 0xcf1e, 0x6f0f,
-    0xede3, 0x4df2, 0x0dd0, 0xadc1, 0x8d94, 0x2d85, 0x6da7, 0xcdb6,
-    0x2d0d, 0x8d1c, 0xcd3e, 0x6d2f, 0x4d7a, 0xed6b, 0xad49, 0x0d58,
-    0xcc2e, 0x6c3f, 0x2c1d, 0x8c0c, 0xac59, 0x0c48, 0x4c6a, 0xec7b,
-    0x0cc0, 0xacd1, 0xecf3, 0x4ce2, 0x6cb7, 0xcca6, 0x8c84, 0x2c95,
-    0x294d, 0x895c, 0xc97e, 0x696f, 0x493a, 0xe92b, 0xa909, 0x0918,
-    0xe9a3, 0x49b2, 0x0990, 0xa981, 0x89d4, 0x29c5, 0x69e7, 0xc9f6,
-    0x0880, 0xa891, 0xe8b3, 0x48a2, 0x68f7, 0xc8e6, 0x88c4, 0x28d5,
-    0xc86e, 0x687f, 0x285d, 0x884c, 0xa819, 0x0808, 0x482a, 0xe83b,
-    0x6ad7, 0xcac6, 0x8ae4, 0x2af5, 0x0aa0, 0xaab1, 0xea93, 0x4a82,
-    0xaa39, 0x0a28, 0x4a0a, 0xea1b, 0xca4e, 0x6a5f, 0x2a7d, 0x8a6c,
-    0x4b1a, 0xeb0b, 0xab29, 0x0b38, 0x2b6d, 0x8b7c, 0xcb5e, 0x6b4f,
-    0x8bf4, 0x2be5, 0x6bc7, 0xcbd6, 0xeb83, 0x4b92, 0x0bb0, 0xaba1
-};

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/CMakeLists.txt	2008-03-07 11:18:41 UTC (rev 3842)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/CMakeLists.txt	2008-03-07 18:34:14 UTC (rev 3843)
@@ -1,7 +1,6 @@
 subdirs (PREORDER ADM_lavcodec)
 subdirs (PREORDER ADM_lavformat)
 subdirs (PREORDER ADM_lavutil)
-subdirs (PREORDER ADM_liba52)
 subdirs (PREORDER ADM_libMpeg2Dec)
 subdirs (PREORDER ADM_libmpeg2enc)
 subdirs (PREORDER ADM_libswscale)

Copied: branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_ad_a52.cpp (from rev 3841, branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_codecac3.cpp)
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_codecac3.cpp	2008-03-07 06:54:27 UTC (rev 3841)
+++ branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_ad_a52.cpp	2008-03-07 18:34:14 UTC (rev 3843)
@@ -0,0 +1,220 @@
+/***************************************************************************
+                          ADM_codecac3.cpp  -  description
+                             -------------------
+    begin                : Fri May 31 2002
+    copyright            : (C) 2002 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include "ADM_default.h"
+#include "ADM_ad_plugin.h"
+#include "ADM_audiofilter/audiofilter_channel_route.h"
+#ifdef USE_AC3
+extern "C" {
+#include "ADM_liba52/a52.h"
+#include "ADM_liba52/mm_accel.h"
+};
+
+#define AC3_HANDLE ((a52_state_t *)ac3_handle)
+#define ADM_AC3_BUFFER (50000*2)
+class ADM_AudiocodecAC3 : public     ADM_Audiocodec
+{
+	protected:
+		void *ac3_handle;
+		void *ac3_sample;
+		uint32_t _downmix;
+
+	public:
+		ADM_AudiocodecAC3(uint32_t fourcc, WAVHeader *info,uint32_t extraLength,uint8_t *extraDatab);
+		virtual	~ADM_AudiocodecAC3();
+		virtual	uint8_t beginDecompress(void);
+		virtual	uint8_t endDecompress(void);
+		virtual	uint8_t run(uint8_t *inptr, uint32_t nbIn, float *outptr, uint32_t *nbOut);
+		virtual	uint8_t isCompressed(void) {return 1;}
+		virtual	uint8_t isDecompressable(void) {return 1;}
+
+   };
+// Supported formats + declare our plugin
+//*******************************************************
+   uint32_t Formats[]={WAV_AC3};
+   DECLARE_AUDIO_DECODER(ADM_AudiocodecAC3,						// Class
+		   	0,0,1, 												// Major, minor,patch 
+		   	Formats, 											// Supported formats
+		   	"LibAC3 decoder plugin for avidemux (c) Mean\n"); 	// Desc
+   //********************************************************
+
+ADM_AudiocodecAC3::ADM_AudiocodecAC3( uint32_t fourcc, WAVHeader *info,uint32_t extraLength,uint8_t *extraData)
+		:   ADM_Audiocodec(fourcc)
+{
+    int flags=0;
+    ADM_assert(fourcc==WAV_AC3);
+    ac3_handle=NULL;
+    ac3_sample=NULL;
+#if (defined( ARCH_X86)  || defined(ARCH_X86_64))
+#define CHK(x,y) if(CpuCaps::has##x()) flags|=MM_ACCEL_X86_##y;
+    CHK(MMX,MMX);
+    CHK(3DNOW,3DNOW);
+    CHK(MMXEXT,MMXEXT);
+#endif
+    
+    ac3_handle=(void *)a52_init(flags);
+    if(!ac3_handle)
+    {
+        printf("Cannot init a52\n");
+        ADM_assert(0);   
+    }
+    ac3_sample=(sample_t *)a52_samples(AC3_HANDLE);
+    if(!ac3_sample)
+    {
+        printf("Cannot init a52 sample\n");
+        ADM_assert(0);   
+    }
+        _downmix=0;
+      _wavHeader = info;
+      ADM_assert(_wavHeader);
+}
+
+ADM_AudiocodecAC3::~ADM_AudiocodecAC3( )
+{
+    if(ac3_handle)
+    {
+        a52_free(AC3_HANDLE);
+        ac3_handle=NULL;
+        ac3_sample=NULL;
+    }
+}
+
+uint8_t ADM_AudiocodecAC3::beginDecompress( void )
+{
+		return 1;
+}
+
+uint8_t ADM_AudiocodecAC3::endDecompress( void )
+{
+    return 1;
+}
+
+uint8_t ADM_AudiocodecAC3::run(uint8_t *inptr, uint32_t nbIn, float *outptr,   uint32_t *nbOut)
+{
+    uint32_t avail;
+    uint32_t length;
+    int flags = 0, samprate = 0, bitrate = 0;
+    uint8_t chan = _wavHeader->channels;
+    *nbOut=0;
+
+    //  Ready to decode
+    while(nbIn)
+    {
+        if(nbIn<7)
+        {
+            if(nbIn)
+                printf("[a52]: no data to decode avail %u\n",nbIn);
+            break;
+        }
+        length = a52_syncinfo(inptr, &flags, &samprate, &bitrate);
+        if(length==0)
+        {
+            printf("[a52] No startcode found\n");
+            break;
+        }
+        if(length>nbIn)
+        {
+            // not enough data
+            break;
+        }
+
+	if (ch_route.mode < 1) {
+		CHANNEL_TYPE *p_ch_type = ch_route.input_type;
+		if (flags & A52_LFE) {
+			*(p_ch_type++) = CH_LFE;
+		}
+		switch (flags & A52_CHANNEL_MASK) {
+			case A52_MONO:
+				*(p_ch_type++) = CH_MONO;
+			break;
+			case A52_STEREO:
+			case A52_DOLBY:
+				*(p_ch_type++) = CH_FRONT_LEFT;
+				*(p_ch_type++) = CH_FRONT_RIGHT;
+			break;
+			case A52_3F:
+				*(p_ch_type++) = CH_FRONT_LEFT;
+				*(p_ch_type++) = CH_FRONT_CENTER;
+				*(p_ch_type++) = CH_FRONT_RIGHT;
+			break;
+			case A52_2F1R:
+				*(p_ch_type++) = CH_FRONT_LEFT;
+				*(p_ch_type++) = CH_FRONT_RIGHT;
+				*(p_ch_type++) = CH_REAR_CENTER;
+			break;
+			case A52_3F1R:
+				*(p_ch_type++) = CH_FRONT_LEFT;
+				*(p_ch_type++) = CH_FRONT_CENTER;
+				*(p_ch_type++) = CH_FRONT_RIGHT;
+				*(p_ch_type++) = CH_REAR_CENTER;
+			break;
+			case A52_2F2R:
+				*(p_ch_type++) = CH_FRONT_LEFT;
+				*(p_ch_type++) = CH_FRONT_RIGHT;
+				*(p_ch_type++) = CH_REAR_LEFT;
+				*(p_ch_type++) = CH_REAR_RIGHT;
+			break;
+			case A52_3F2R:
+				*(p_ch_type++) = CH_FRONT_LEFT;
+				*(p_ch_type++) = CH_FRONT_CENTER;
+				*(p_ch_type++) = CH_FRONT_RIGHT;
+				*(p_ch_type++) = CH_REAR_LEFT;
+				*(p_ch_type++) = CH_REAR_RIGHT;
+			break;
+			default:
+				ADM_assert(0);
+		}
+	}
+
+        sample_t level = 1, bias = 0;
+
+        if (a52_frame(AC3_HANDLE, inptr, &flags, &level, bias))
+        {
+            printf("\n A52_frame failed!");
+            inptr+=length;
+            nbIn-=length;
+            *nbOut += 256 * chan * 6;
+            break;
+        };
+        inptr+=length;
+        nbIn-=length;
+        *nbOut += 256 * chan * 6;
+
+        float *cur;
+        for (int i = 0; i < 6; i++) {
+                if (a52_block(AC3_HANDLE)) {
+                        printf("\n A52_block failed! on fblock :%lu", i);
+                        // in that case we silent out the chunk
+                        memset(outptr, 0, 256 * chan * sizeof(float));
+                } else {
+                        for (int k = 0; k < chan; k++) {
+                                sample_t *sample=(sample_t *)ac3_sample;
+                                sample += 256 * k;
+                                cur = outptr + k;
+                                for (int j = 0; j < 256; j++) {
+                                        *cur = *sample++;
+                                        cur+=chan;
+                                }
+                        }
+                }
+                outptr += chan * 256;
+        }
+    }
+    return 1; 
+
+}
+
+#endif

Copied: branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/CMakeLists.txt (from rev 3841, branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/CMakeLists.txt)
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/CMakeLists.txt	2008-03-07 06:54:27 UTC (rev 3841)
+++ branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/CMakeLists.txt	2008-03-07 18:34:14 UTC (rev 3843)
@@ -0,0 +1,15 @@
+################################
+#
+################################
+include(AdmLib)
+SET(ADM_LIB ADM_liba52)
+#
+SET(${ADM_LIB}_SRCS 
+bit_allocate.c  bitstream.c  downmix.c  imdct.c  parse.c
+)
+ADD_LIBRARY(${ADM_LIB} STATIC ${${ADM_LIB}_SRCS})
+ADD_ADM_LIB(${ADM_LIB} ADM_libraries)
+add_definitions(-fPIC)
+
+
+################################

Copied: branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/Makefile.am (from rev 3841, branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/Makefile.am)
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/Makefile.am	2008-03-07 06:54:27 UTC (rev 3841)
+++ branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/Makefile.am	2008-03-07 18:34:14 UTC (rev 3843)
@@ -0,0 +1,10 @@
+noinst_LIBRARIES = libADM_liba52.a
+
+INCLUDES = $(all_includes) 
+
+libADM_liba52_a_METASOURCES = AUTO
+
+libADM_liba52_a_SOURCES = bitstream.c imdct.c bit_allocate.c parse.c downmix.c
+
+EXTRA_DIST = a52.h  a52_internal.h  attributes.h  bitstream.h  mm_accel.h  tables.h bit_allocate.c  bitstream.c  downmix.c  imdct.c  parse.c
+

Copied: branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/a52.h (from rev 3841, branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/a52.h)
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/a52.h	2008-03-07 06:54:27 UTC (rev 3841)
+++ branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/a52.h	2008-03-07 18:34:14 UTC (rev 3843)
@@ -0,0 +1,62 @@
+/*
+ * a52.h
+ * Copyright (C) 2000-2002 Michel Lespinasse <walken at zoy.org>
+ * Copyright (C) 1999-2000 Aaron Holtzman <aholtzma at ess.engr.uvic.ca>
+ *
+ * This file is part of a52dec, a free ATSC A-52 stream decoder.
+ * See http://liba52.sourceforge.net/ for updates.
+ *
+ * a52dec is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License as published by
+ * the Free Software Foundation; either version 2 of the License, or
+ * (at your option) any later version.
+ *
+ * a52dec is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ *
+ * You should have received a copy of the GNU General Public License
+ * along with this program; if not, write to the Free Software
+ * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+ */
+
+#ifndef A52_H
+#define A52_H
+
+#ifndef LIBA52_DOUBLE
+typedef float sample_t;
+#else
+typedef double sample_t;
+#endif
+
+typedef struct a52_state_s a52_state_t;
+
+#define A52_CHANNEL 0
+#define A52_MONO 1
+#define A52_STEREO 2
+#define A52_3F 3
+#define A52_2F1R 4
+#define A52_3F1R 5
+#define A52_2F2R 6
+#define A52_3F2R 7
+#define A52_CHANNEL1 8
+#define A52_CHANNEL2 9
+#define A52_DOLBY 10
+#define A52_CHANNEL_MASK 15
+
+#define A52_LFE 16
+#define A52_ADJUST_LEVEL 32
+
+a52_state_t * a52_init (uint32_t mm_accel);
+sample_t * a52_samples (a52_state_t * state);
+int a52_syncinfo (uint8_t * buf, int * flags,
+		  int * sample_rate, int * bit_rate);
+int a52_frame (a52_state_t * state, uint8_t * buf, int * flags,
+	       sample_t * level, sample_t bias);
+void a52_dynrng (a52_state_t * state,
+		 sample_t (* call) (sample_t, void *), void * data);
+int a52_block (a52_state_t * state);
+void a52_free (a52_state_t * state);
+
+#endif /* A52_H */

Copied: branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/a52_internal.h (from rev 3841, branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/a52_internal.h)
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/a52_internal.h	2008-03-07 06:54:27 UTC (rev 3841)
+++ branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/a52_internal.h	2008-03-07 18:34:14 UTC (rev 3843)
@@ -0,0 +1,123 @@
+/*
+ * a52_internal.h
+ * Copyright (C) 2000-2002 Michel Lespinasse <walken at zoy.org>
+ * Copyright (C) 1999-2000 Aaron Holtzman <aholtzma at ess.engr.uvic.ca>
+ *
+ * This file is part of a52dec, a free ATSC A-52 stream decoder.
+ * See http://liba52.sourceforge.net/ for updates.
+ *
+ * a52dec is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License as published by
+ * the Free Software Foundation; either version 2 of the License, or
+ * (at your option) any later version.
+ *
+ * a52dec is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ *
+ * You should have received a copy of the GNU General Public License
+ * along with this program; if not, write to the Free Software
+ * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+ */
+
+typedef struct {
+    uint8_t bai;		/* fine SNR offset, fast gain */
+    uint8_t deltbae;		/* delta bit allocation exists */
+    int8_t deltba[50];		/* per-band delta bit allocation */
+} ba_t;
+
+typedef struct {
+    uint8_t exp[256];		/* decoded channel exponents */
+    int8_t bap[256];		/* derived channel bit allocation */
+} expbap_t;
+
+struct a52_state_s {
+    uint8_t fscod;		/* sample rate */
+    uint8_t halfrate;		/* halfrate factor */
+    uint8_t acmod;		/* coded channels */
+    uint8_t lfeon;		/* coded lfe channel */
+    sample_t clev;		/* centre channel mix level */
+    sample_t slev;		/* surround channels mix level */
+
+    int output;			/* type of output */
+    sample_t level;		/* output level */
+    sample_t bias;		/* output bias */
+
+    int dynrnge;		/* apply dynamic range */
+    sample_t dynrng;		/* dynamic range */
+    void * dynrngdata;		/* dynamic range callback funtion and data */
+    sample_t (* dynrngcall) (sample_t range, void * dynrngdata);
+
+    uint8_t chincpl;		/* channel coupled */
+    uint8_t phsflginu;		/* phase flags in use (stereo only) */
+    uint8_t cplstrtmant;	/* coupling channel start mantissa */
+    uint8_t cplendmant;		/* coupling channel end mantissa */
+    uint32_t cplbndstrc;	/* coupling band structure */
+    sample_t cplco[5][18];	/* coupling coordinates */
+
+    /* derived information */
+    uint8_t cplstrtbnd;		/* coupling start band (for bit allocation) */
+    uint8_t ncplbnd;		/* number of coupling bands */
+
+    uint8_t rematflg;		/* stereo rematrixing */
+
+    uint8_t endmant[5];		/* channel end mantissa */
+
+    uint16_t bai;		/* bit allocation information */
+
+    uint32_t * buffer_start;
+    uint16_t lfsr_state;	/* dither state */
+    uint32_t bits_left;
+    uint32_t current_word;
+
+    uint8_t csnroffst;		/* coarse SNR offset */
+    ba_t cplba;			/* coupling bit allocation parameters */
+    ba_t ba[5];			/* channel bit allocation parameters */
+    ba_t lfeba;			/* lfe bit allocation parameters */
+
+    uint8_t cplfleak;		/* coupling fast leak init */
+    uint8_t cplsleak;		/* coupling slow leak init */
+
+    expbap_t cpl_expbap;
+    expbap_t fbw_expbap[5];
+    expbap_t lfe_expbap;
+
+    sample_t * samples;
+    int downmixed;
+};
+
+#define LEVEL_PLUS6DB 2.0
+#define LEVEL_PLUS3DB 1.4142135623730951
+#define LEVEL_3DB 0.7071067811865476
+#define LEVEL_45DB 0.5946035575013605
+#define LEVEL_6DB 0.5
+
+#define LEVEL_DPL2_1 0.8165
+#define LEVEL_DPL2_2 0.5774
+
+#define EXP_REUSE (0)
+#define EXP_D15   (1)
+#define EXP_D25   (2)
+#define EXP_D45   (3)
+
+#define DELTA_BIT_REUSE (0)
+#define DELTA_BIT_NEW (1)
+#define DELTA_BIT_NONE (2)
+#define DELTA_BIT_RESERVED (3)
+
+void a52_bit_allocate (a52_state_t * state, ba_t * ba, int bndstart,
+		       int start, int end, int fastleak, int slowleak,
+		       expbap_t * expbap);
+
+int a52_downmix_init (int input, int flags, sample_t * level,
+		      sample_t clev, sample_t slev);
+int a52_downmix_coeff (sample_t * coeff, int acmod, int output, sample_t level,
+		       sample_t clev, sample_t slev);
+void a52_downmix (sample_t * samples, int acmod, int output, sample_t bias,
+		  sample_t clev, sample_t slev);
+void a52_upmix (sample_t * samples, int acmod, int output);
+
+void a52_imdct_init (uint32_t mm_accel);
+void a52_imdct_256 (sample_t * data, sample_t * delay, sample_t bias);
+void a52_imdct_512 (sample_t * data, sample_t * delay, sample_t bias);

Copied: branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/attributes.h (from rev 3841, branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/attributes.h)
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/attributes.h	2008-03-07 06:54:27 UTC (rev 3841)
+++ branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/attributes.h	2008-03-07 18:34:14 UTC (rev 3843)
@@ -0,0 +1,29 @@
+/*
+ * attributes.h
+ * Copyright (C) 2000-2002 Michel Lespinasse <walken at zoy.org>
+ * Copyright (C) 1999-2000 Aaron Holtzman <aholtzma at ess.engr.uvic.ca>
+ *
+ * This file is part of a52dec, a free ATSC A-52 stream decoder.
+ * See http://liba52.sourceforge.net/ for updates.
+ *
+ * a52dec is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License as published by
+ * the Free Software Foundation; either version 2 of the License, or
+ * (at your option) any later version.
+ *
+ * a52dec is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ *
+ * You should have received a copy of the GNU General Public License
+ * along with this program; if not, write to the Free Software
+ * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+ */
+
+/* use gcc attribs to align critical data structures */
+#ifdef ATTRIBUTE_ALIGNED_MAX
+#define ATTR_ALIGN(align) __attribute__ ((__aligned__ ((ATTRIBUTE_ALIGNED_MAX < align) ? ATTRIBUTE_ALIGNED_MAX : align)))
+#else
+#define ATTR_ALIGN(align)
+#endif

Copied: branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/bit_allocate.c (from rev 3841, branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/bit_allocate.c)
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/bit_allocate.c	2008-03-07 06:54:27 UTC (rev 3841)
+++ branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/bit_allocate.c	2008-03-07 18:34:14 UTC (rev 3843)
@@ -0,0 +1,265 @@
+/*
+ * bit_allocate.c
+ * Copyright (C) 2000-2002 Michel Lespinasse <walken at zoy.org>
+ * Copyright (C) 1999-2000 Aaron Holtzman <aholtzma at ess.engr.uvic.ca>
+ *
+ * This file is part of a52dec, a free ATSC A-52 stream decoder.
+ * See http://liba52.sourceforge.net/ for updates.
+ *
+ * a52dec is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License as published by
+ * the Free Software Foundation; either version 2 of the License, or
+ * (at your option) any later version.
+ *
+ * a52dec is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ *
+ * You should have received a copy of the GNU General Public License
+ * along with this program; if not, write to the Free Software
+ * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+ */
+
+#include "config.h"
+
+#include <inttypes.h>
+
+#include "a52.h"
+#include "a52_internal.h"
+
+static int hthtab[3][50] = {
+    {0x730, 0x730, 0x7c0, 0x800, 0x820, 0x840, 0x850, 0x850, 0x860, 0x860,
+     0x860, 0x860, 0x860, 0x870, 0x870, 0x870, 0x880, 0x880, 0x890, 0x890,
+     0x8a0, 0x8a0, 0x8b0, 0x8b0, 0x8c0, 0x8c0, 0x8d0, 0x8e0, 0x8f0, 0x900,
+     0x910, 0x910, 0x910, 0x910, 0x900, 0x8f0, 0x8c0, 0x870, 0x820, 0x7e0,
+     0x7a0, 0x770, 0x760, 0x7a0, 0x7c0, 0x7c0, 0x6e0, 0x400, 0x3c0, 0x3c0},
+    {0x710, 0x710, 0x7a0, 0x7f0, 0x820, 0x830, 0x840, 0x850, 0x850, 0x860,
+     0x860, 0x860, 0x860, 0x860, 0x870, 0x870, 0x870, 0x880, 0x880, 0x880,
+     0x890, 0x890, 0x8a0, 0x8a0, 0x8b0, 0x8b0, 0x8c0, 0x8c0, 0x8e0, 0x8f0,
+     0x900, 0x910, 0x910, 0x910, 0x910, 0x900, 0x8e0, 0x8b0, 0x870, 0x820,
+     0x7e0, 0x7b0, 0x760, 0x770, 0x7a0, 0x7c0, 0x780, 0x5d0, 0x3c0, 0x3c0},
+    {0x680, 0x680, 0x750, 0x7b0, 0x7e0, 0x810, 0x820, 0x830, 0x840, 0x850,
+     0x850, 0x850, 0x860, 0x860, 0x860, 0x860, 0x860, 0x860, 0x860, 0x860,
+     0x870, 0x870, 0x870, 0x870, 0x880, 0x880, 0x880, 0x890, 0x8a0, 0x8b0,
+     0x8c0, 0x8d0, 0x8e0, 0x8f0, 0x900, 0x910, 0x910, 0x910, 0x900, 0x8f0,
+     0x8d0, 0x8b0, 0x840, 0x7f0, 0x790, 0x760, 0x7a0, 0x7c0, 0x7b0, 0x720}
+};
+
+static int8_t baptab[305] = {
+    16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16,
+    16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16,
+    16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16,
+    16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16,
+    16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16,
+    16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16,	/* 93 padding elems */
+
+    16, 16, 16, 16, 16, 16, 16, 16, 16, 14, 14, 14, 14, 14, 14, 14,
+    14, 12, 12, 12, 12, 11, 11, 11, 11, 10, 10, 10, 10,  9,  9,  9,
+     9,  8,  8,  8,  8,  7,  7,  7,  7,  6,  6,  6,  6,  5,  5,  5,
+     5,  4,  4, -3, -3,  3,  3,  3, -2, -2, -1, -1, -1, -1, -1,  0,
+
+     0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
+     0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
+     0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
+     0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
+     0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
+     0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
+     0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
+     0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
+     0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
+     0,  0,  0,  0					/* 148 padding elems */
+};
+
+static int bndtab[30] = {21, 22,  23,  24,  25,  26,  27,  28,  31,  34,
+			 37, 40,  43,  46,  49,  55,  61,  67,  73,  79,
+			 85, 97, 109, 121, 133, 157, 181, 205, 229, 253};
+
+static int8_t latab[256] = {
+    -64, -63, -62, -61, -60, -59, -58, -57, -56, -55, -54, -53,
+    -52, -52, -51, -50, -49, -48, -47, -47, -46, -45, -44, -44,
+    -43, -42, -41, -41, -40, -39, -38, -38, -37, -36, -36, -35,
+    -35, -34, -33, -33, -32, -32, -31, -30, -30, -29, -29, -28,
+    -28, -27, -27, -26, -26, -25, -25, -24, -24, -23, -23, -22,
+    -22, -21, -21, -21, -20, -20, -19, -19, -19, -18, -18, -18,
+    -17, -17, -17, -16, -16, -16, -15, -15, -15, -14, -14, -14,
+    -13, -13, -13, -13, -12, -12, -12, -12, -11, -11, -11, -11,
+    -10, -10, -10, -10, -10,  -9,  -9,  -9,  -9,  -9,  -8,  -8,
+     -8,  -8,  -8,  -8,  -7,  -7,  -7,  -7,  -7,  -7,  -6,  -6,
+     -6,  -6,  -6,  -6,  -6,  -6,  -5,  -5,  -5,  -5,  -5,  -5,
+     -5,  -5,  -4,  -4,  -4,  -4,  -4,  -4,  -4,  -4,  -4,  -4,
+     -4,  -3,  -3,  -3,  -3,  -3,  -3,  -3,  -3,  -3,  -3,  -3,
+     -3,  -3,  -3,  -2,  -2,  -2,  -2,  -2,  -2,  -2,  -2,  -2,
+     -2,  -2,  -2,  -2,  -2,  -2,  -2,  -2,  -2,  -2,  -1,  -1,
+     -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
+     -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,  -1,
+     -1,  -1,  -1,  -1,  -1,  -1,   0,   0,   0,   0,   0,   0,
+      0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,
+      0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,
+      0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,
+      0,   0,   0,   0
+};
+
+#define UPDATE_LEAK() 		\
+do {				\
+    fastleak += fdecay;		\
+    if (fastleak > psd + fgain)	\
+	fastleak = psd + fgain;	\
+    slowleak += sdecay;		\
+    if (slowleak > psd + sgain)	\
+	slowleak = psd + sgain;	\
+} while (0)
+
+#define COMPUTE_MASK()				\
+do {						\
+    if (psd > dbknee)				\
+	mask -= (psd - dbknee) >> 2;		\
+    if (mask > hth [i >> halfrate])		\
+	mask = hth [i >> halfrate];		\
+    mask -= snroffset + 128 * deltba[i];	\
+    mask = (mask > 0) ? 0 : ((-mask) >> 5);	\
+    mask -= floor;				\
+} while (0)
+
+void a52_bit_allocate (a52_state_t * state, ba_t * ba, int bndstart,
+		       int start, int end, int fastleak, int slowleak,
+		       expbap_t * expbap)
+{
+    static int slowgain[4] = {0x540, 0x4d8, 0x478, 0x410};
+    static int dbpbtab[4]  = {0xc00, 0x500, 0x300, 0x100};
+    static int floortab[8] = {0x910, 0x950, 0x990, 0x9d0,
+			      0xa10, 0xa90, 0xb10, 0x1400};
+
+    int i, j;
+    uint8_t * exp;
+    int8_t * bap;
+    int fdecay, fgain, sdecay, sgain, dbknee, floor, snroffset;
+    int psd, mask;
+    int8_t * deltba;
+    int * hth;
+    int halfrate;
+
+    halfrate = state->halfrate;
+    fdecay = (63 + 20 * ((state->bai >> 7) & 3)) >> halfrate;	/* fdcycod */
+    fgain = 128 + 128 * (ba->bai & 7);				/* fgaincod */
+    sdecay = (15 + 2 * (state->bai >> 9)) >> halfrate;		/* sdcycod */
+    sgain = slowgain[(state->bai >> 5) & 3];			/* sgaincod */
+    dbknee = dbpbtab[(state->bai >> 3) & 3];			/* dbpbcod */
+    hth = hthtab[state->fscod];
+    /*
+     * if there is no delta bit allocation, make deltba point to an area
+     * known to contain zeroes. baptab+156 here.
+     */
+    deltba = (ba->deltbae == DELTA_BIT_NONE) ? baptab + 156 : ba->deltba;
+    floor = floortab[state->bai & 7];				/* floorcod */
+    snroffset = 960 - 64 * state->csnroffst - 4 * (ba->bai >> 3) + floor;
+    floor >>= 5;
+
+    exp = expbap->exp;
+    bap = expbap->bap;
+
+    i = bndstart;
+    j = start;
+    if (start == 0) {	/* not the coupling channel */
+	int lowcomp;
+
+	lowcomp = 0;
+	j = end - 1;
+	do {
+	    if (i < j) {
+		if (exp[i+1] == exp[i] - 2)
+		    lowcomp = 384;
+		else if (lowcomp && (exp[i+1] > exp[i]))
+		    lowcomp -= 64;
+	    }
+	    psd = 128 * exp[i];
+	    mask = psd + fgain + lowcomp;
+	    COMPUTE_MASK ();
+	    bap[i] = (baptab+156)[mask + 4 * exp[i]];
+	    i++;
+	} while ((i < 3) || ((i < 7) && (exp[i] > exp[i-1])));
+	fastleak = psd + fgain;
+	slowleak = psd + sgain;
+
+	while (i < 7) {
+	    if (i < j) {
+		if (exp[i+1] == exp[i] - 2)
+		    lowcomp = 384;
+		else if (lowcomp && (exp[i+1] > exp[i]))
+		    lowcomp -= 64;
+	    }
+	    psd = 128 * exp[i];
+	    UPDATE_LEAK ();
+	    mask = ((fastleak + lowcomp < slowleak) ?
+		    fastleak + lowcomp : slowleak);
+	    COMPUTE_MASK ();
+	    bap[i] = (baptab+156)[mask + 4 * exp[i]];
+	    i++;
+	}
+
+	if (end == 7)	/* lfe channel */
+	    return;
+
+	do {
+	    if (exp[i+1] == exp[i] - 2)
+		lowcomp = 320;
+	    else if (lowcomp && (exp[i+1] > exp[i]))
+		lowcomp -= 64;
+	    psd = 128 * exp[i];
+	    UPDATE_LEAK ();
+	    mask = ((fastleak + lowcomp < slowleak) ?
+		    fastleak + lowcomp : slowleak);
+	    COMPUTE_MASK ();
+	    bap[i] = (baptab+156)[mask + 4 * exp[i]];
+	    i++;
+	} while (i < 20);
+
+	while (lowcomp > 128) {		/* two iterations maximum */
+	    lowcomp -= 128;
+	    psd = 128 * exp[i];
+	    UPDATE_LEAK ();
+	    mask = ((fastleak + lowcomp < slowleak) ?
+		    fastleak + lowcomp : slowleak);
+	    COMPUTE_MASK ();
+	    bap[i] = (baptab+156)[mask + 4 * exp[i]];
+	    i++;
+	}
+	j = i;
+    }
+
+    do {
+	int startband, endband;
+
+	startband = j;
+	endband = ((bndtab-20)[i] < end) ? (bndtab-20)[i] : end;
+	psd = 128 * exp[j++];
+	while (j < endband) {
+	    int next, delta;
+
+	    next = 128 * exp[j++];
+	    delta = next - psd;
+	    switch (delta >> 9) {
+	    case -6: case -5: case -4: case -3: case -2:
+		psd = next;
+		break;
+	    case -1:
+		psd = next + latab[(-delta) >> 1];
+		break;
+	    case 0:
+		psd += latab[delta >> 1];
+		break;
+	    }
+	}
+	/* minpsd = -289 */
+	UPDATE_LEAK ();
+	mask = (fastleak < slowleak) ? fastleak : slowleak;
+	COMPUTE_MASK ();
+	i++;
+	j = startband;
+	do {
+	    /* max(mask+4*exp)=147=-(minpsd+fgain-deltba-snroffset)>>5+4*exp */
+	    /* min(mask+4*exp)=-156=-(sgain-deltba-snroffset)>>5 */
+	    bap[j] = (baptab+156)[mask + 4 * exp[j]];
+	} while (++j < endband);
+    } while (j < end);
+}

Copied: branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/bitstream.c (from rev 3841, branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/bitstream.c)
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/bitstream.c	2008-03-07 06:54:27 UTC (rev 3841)
+++ branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/bitstream.c	2008-03-07 18:34:14 UTC (rev 3843)
@@ -0,0 +1,95 @@
+/*
+ * bitstream.c
+ * Copyright (C) 2000-2002 Michel Lespinasse <walken at zoy.org>
+ * Copyright (C) 1999-2000 Aaron Holtzman <aholtzma at ess.engr.uvic.ca>
+ *
+ * This file is part of a52dec, a free ATSC A-52 stream decoder.
+ * See http://liba52.sourceforge.net/ for updates.
+ *
+ * a52dec is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License as published by
+ * the Free Software Foundation; either version 2 of the License, or
+ * (at your option) any later version.
+ *
+ * a52dec is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ *
+ * You should have received a copy of the GNU General Public License
+ * along with this program; if not, write to the Free Software
+ * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+ */
+
+#include "config.h"
+
+#include <inttypes.h>
+
+#include "a52.h"
+#include "a52_internal.h"
+#include "bitstream.h"
+
+#define BUFFER_SIZE 4096
+
+void a52_bitstream_set_ptr (a52_state_t * state, uint8_t * buf)
+{
+    int align;
+
+    align = (long)buf & 3;
+    state->buffer_start = (uint32_t *) (buf - align);
+    state->bits_left = 0;
+    bitstream_get (state, align * 8);
+}
+
+static inline void bitstream_fill_current (a52_state_t * state)
+{
+    uint32_t tmp;
+
+    tmp = *(state->buffer_start++);
+    state->current_word = swab32 (tmp);
+}
+
+/*
+ * The fast paths for _get is in the
+ * bitstream.h header file so it can be inlined.
+ *
+ * The "bottom half" of this routine is suffixed _bh
+ *
+ * -ah
+ */
+
+uint32_t a52_bitstream_get_bh (a52_state_t * state, uint32_t num_bits)
+{
+    uint32_t result;
+
+    num_bits -= state->bits_left;
+    result = ((state->current_word << (32 - state->bits_left)) >>
+	      (32 - state->bits_left));
+
+    bitstream_fill_current (state);
+
+    if (num_bits != 0)
+	result = (result << num_bits) | (state->current_word >> (32 - num_bits));
+
+    state->bits_left = 32 - num_bits;
+
+    return result;
+}
+
+int32_t a52_bitstream_get_bh_2 (a52_state_t * state, uint32_t num_bits)
+{
+    int32_t result;
+
+    num_bits -= state->bits_left;
+    result = ((((int32_t)state->current_word) << (32 - state->bits_left)) >>
+	      (32 - state->bits_left));
+
+    bitstream_fill_current(state);
+
+    if (num_bits != 0)
+	result = (result << num_bits) | (state->current_word >> (32 - num_bits));
+	
+    state->bits_left = 32 - num_bits;
+
+    return result;
+}

Copied: branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/bitstream.h (from rev 3841, branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/bitstream.h)
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/bitstream.h	2008-03-07 06:54:27 UTC (rev 3841)
+++ branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/bitstream.h	2008-03-07 18:34:14 UTC (rev 3843)
@@ -0,0 +1,77 @@
+/*
+ * bitstream.h
+ * Copyright (C) 2000-2002 Michel Lespinasse <walken at zoy.org>
+ * Copyright (C) 1999-2000 Aaron Holtzman <aholtzma at ess.engr.uvic.ca>
+ *
+ * This file is part of a52dec, a free ATSC A-52 stream decoder.
+ * See http://liba52.sourceforge.net/ for updates.
+ *
+ * a52dec is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License as published by
+ * the Free Software Foundation; either version 2 of the License, or
+ * (at your option) any later version.
+ *
+ * a52dec is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ *
+ * You should have received a copy of the GNU General Public License
+ * along with this program; if not, write to the Free Software
+ * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+ */
+
+/* (stolen from the kernel) */
+#ifdef WORDS_BIGENDIAN
+
+#	define swab32(x) (x)
+
+#else
+
+#	if 0 && defined (__i386__)
+
+#	define swab32(x) __i386_swab32(x)
+	static inline const uint32_t __i386_swab32(uint32_t x)
+	{
+		__asm__("bswap %0" : "=r" (x) : "0" (x));
+		return x;
+	}
+
+#	else
+
+#	define swab32(x)\
+((((uint8_t*)&x)[0] << 24) | (((uint8_t*)&x)[1] << 16) |  \
+ (((uint8_t*)&x)[2] << 8)  | (((uint8_t*)&x)[3]))
+
+#	endif
+#endif
+
+void a52_bitstream_set_ptr (a52_state_t * state, uint8_t * buf);
+uint32_t a52_bitstream_get_bh (a52_state_t * state, uint32_t num_bits);
+int32_t a52_bitstream_get_bh_2 (a52_state_t * state, uint32_t num_bits);
+
+static inline uint32_t bitstream_get (a52_state_t * state, uint32_t num_bits)
+{
+    uint32_t result;
+	
+    if (num_bits < state->bits_left) {
+	result = (state->current_word << (32 - state->bits_left)) >> (32 - num_bits);
+	state->bits_left -= num_bits;
+	return result;
+    }
+
+    return a52_bitstream_get_bh (state, num_bits);
+}
+
+static inline int32_t bitstream_get_2 (a52_state_t * state, uint32_t num_bits)
+{
+    int32_t result;
+	
+    if (num_bits < state->bits_left) {
+	result = (((int32_t)state->current_word) << (32 - state->bits_left)) >> (32 - num_bits);
+	state->bits_left -= num_bits;
+	return result;
+    }
+
+    return a52_bitstream_get_bh_2 (state, num_bits);
+}

Copied: branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/downmix.c (from rev 3841, branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/downmix.c)
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/downmix.c	2008-03-07 06:54:27 UTC (rev 3841)
+++ branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/downmix.c	2008-03-07 18:34:14 UTC (rev 3843)
@@ -0,0 +1,655 @@
+/*
+ * downmix.c
+ * Copyright (C) 2000-2002 Michel Lespinasse <walken at zoy.org>
+ * Copyright (C) 1999-2000 Aaron Holtzman <aholtzma at ess.engr.uvic.ca>
+ *
+ * This file is part of a52dec, a free ATSC A-52 stream decoder.
+ * See http://liba52.sourceforge.net/ for updates.
+ *
+ * a52dec is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License as published by
+ * the Free Software Foundation; either version 2 of the License, or
+ * (at your option) any later version.
+ *
+ * a52dec is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ *
+ * You should have received a copy of the GNU General Public License
+ * along with this program; if not, write to the Free Software
+ * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+ */
+
+#include "config.h"
+
+#include <string.h>
+#include <inttypes.h>
+
+#include "a52.h"
+#include "a52_internal.h"
+
+#define CONVERT(acmod,output) (((output) << 3) + (acmod))
+
+int a52_downmix_init (int input, int flags, sample_t * level,
+		      sample_t clev, sample_t slev)
+{
+    static uint8_t table[11][8] = {
+	{A52_CHANNEL,	A52_DOLBY,	A52_STEREO,	A52_STEREO,
+	 A52_STEREO,	A52_STEREO,	A52_STEREO,	A52_STEREO},
+	{A52_MONO,	A52_MONO,	A52_MONO,	A52_MONO,
+	 A52_MONO,	A52_MONO,	A52_MONO,	A52_MONO},
+	{A52_CHANNEL,	A52_DOLBY,	A52_STEREO,	A52_STEREO,
+	 A52_STEREO,	A52_STEREO,	A52_STEREO,	A52_STEREO},
+	{A52_CHANNEL,	A52_DOLBY,	A52_STEREO,	A52_3F,
+	 A52_STEREO,	A52_3F,		A52_STEREO,	A52_3F},
+	{A52_CHANNEL,	A52_DOLBY,	A52_STEREO,	A52_STEREO,
+	 A52_2F1R,	A52_2F1R,	A52_2F1R,	A52_2F1R},
+	{A52_CHANNEL,	A52_DOLBY,	A52_STEREO,	A52_STEREO,
+	 A52_2F1R,	A52_3F1R,	A52_2F1R,	A52_3F1R},
+	{A52_CHANNEL,	A52_DOLBY,	A52_STEREO,	A52_3F,
+	 A52_2F2R,	A52_2F2R,	A52_2F2R,	A52_2F2R},
+	{A52_CHANNEL,	A52_DOLBY,	A52_STEREO,	A52_3F,
+	 A52_2F2R,	A52_3F2R,	A52_2F2R,	A52_3F2R},
+	{A52_CHANNEL1,	A52_MONO,	A52_MONO,	A52_MONO,
+	 A52_MONO,	A52_MONO,	A52_MONO,	A52_MONO},
+	{A52_CHANNEL2,	A52_MONO,	A52_MONO,	A52_MONO,
+	 A52_MONO,	A52_MONO,	A52_MONO,	A52_MONO},
+	{A52_CHANNEL,	A52_DOLBY,	A52_STEREO,	A52_DOLBY,
+	 A52_DOLBY,	A52_DOLBY,	A52_DOLBY,	A52_DOLBY}
+    };
+    int output;
+
+    output = flags & A52_CHANNEL_MASK;
+    if (output > A52_DOLBY)
+	return -1;
+
+    output = table[output][input & 7];
+
+    if ((output == A52_STEREO) &&
+	((input == A52_DOLBY) || ((input == A52_3F) && (clev == LEVEL_3DB))))
+	output = A52_DOLBY;
+
+    if (flags & A52_ADJUST_LEVEL)
+	switch (CONVERT (input & 7, output)) {
+
+	case CONVERT (A52_3F, A52_MONO):
+	    *level *= LEVEL_3DB / (1 + clev);
+	    break;
+
+	case CONVERT (A52_STEREO, A52_MONO):
+	case CONVERT (A52_2F2R, A52_2F1R):
+	case CONVERT (A52_3F2R, A52_3F1R):
+	level_3db:
+	    *level *= LEVEL_3DB;
+	    break;
+
+	case CONVERT (A52_3F2R, A52_2F1R):
+	    if (clev < LEVEL_PLUS3DB - 1)
+		goto level_3db;
+	    /* break thru */
+	case CONVERT (A52_3F, A52_STEREO):
+	case CONVERT (A52_3F1R, A52_2F1R):
+	case CONVERT (A52_3F1R, A52_2F2R):
+	case CONVERT (A52_3F2R, A52_2F2R):
+	    *level /= 1 + clev;
+	    break;
+
+	case CONVERT (A52_2F1R, A52_MONO):
+	    *level *= LEVEL_PLUS3DB / (2 + slev);
+	    break;
+
+	case CONVERT (A52_2F1R, A52_STEREO):
+	case CONVERT (A52_3F1R, A52_3F):
+	    *level /= 1 + slev * LEVEL_3DB;
+	    break;
+
+	case CONVERT (A52_3F1R, A52_MONO):
+	    *level *= LEVEL_3DB / (1 + clev + 0.5 * slev);
+	    break;
+
+	case CONVERT (A52_3F1R, A52_STEREO):
+	    *level /= 1 + clev + slev * LEVEL_3DB;
+	    break;
+
+	case CONVERT (A52_2F2R, A52_MONO):
+	    *level *= LEVEL_3DB / (1 + slev);
+	    break;
+
+	case CONVERT (A52_2F2R, A52_STEREO):
+	case CONVERT (A52_3F2R, A52_3F):
+	    *level /= 1 + slev;
+	    break;
+
+	case CONVERT (A52_3F2R, A52_MONO):
+	    *level *= LEVEL_3DB / (1 + clev + slev);
+	    break;
+
+	case CONVERT (A52_3F2R, A52_STEREO):
+	    *level /= 1 + clev + slev;
+	    break;
+
+	case CONVERT (A52_MONO, A52_DOLBY):
+	    *level *= LEVEL_PLUS3DB;
+	    break;
+
+	case CONVERT (A52_3F, A52_DOLBY):
+	case CONVERT (A52_2F1R, A52_DOLBY):
+	    *level *= 1 / (1 + LEVEL_3DB);
+	    break;
+
+	case CONVERT (A52_3F1R, A52_DOLBY):
+	case CONVERT (A52_2F2R, A52_DOLBY):
+	    *level *= 1 / (1 + 2 * LEVEL_3DB);
+	    break;
+
+	case CONVERT (A52_3F2R, A52_DOLBY):
+	    *level *= 1 / (1 + 3 * LEVEL_3DB);
+	    break;
+	}
+
+    return output;
+}
+
+int a52_downmix_coeff (sample_t * coeff, int acmod, int output, sample_t level,
+		       sample_t clev, sample_t slev)
+{
+    switch (CONVERT (acmod, output & A52_CHANNEL_MASK)) {
+
+    case CONVERT (A52_CHANNEL, A52_CHANNEL):
+    case CONVERT (A52_MONO, A52_MONO):
+    case CONVERT (A52_STEREO, A52_STEREO):
+    case CONVERT (A52_3F, A52_3F):
+    case CONVERT (A52_2F1R, A52_2F1R):
+    case CONVERT (A52_3F1R, A52_3F1R):
+    case CONVERT (A52_2F2R, A52_2F2R):
+    case CONVERT (A52_3F2R, A52_3F2R):
+    case CONVERT (A52_STEREO, A52_DOLBY):
+	coeff[0] = coeff[1] = coeff[2] = coeff[3] = coeff[4] = level;
+	return 0;
+
+    case CONVERT (A52_CHANNEL, A52_MONO):
+	coeff[0] = coeff[1] = level * LEVEL_6DB;
+	return 3;
+
+    case CONVERT (A52_STEREO, A52_MONO):
+	coeff[0] = coeff[1] = level * LEVEL_3DB;
+	return 3;
+
+    case CONVERT (A52_3F, A52_MONO):
+	coeff[0] = coeff[2] = level * LEVEL_3DB;
+	coeff[1] = level * clev * LEVEL_PLUS3DB;
+	return 7;
+
+    case CONVERT (A52_2F1R, A52_MONO):
+	coeff[0] = coeff[1] = level * LEVEL_3DB;
+	coeff[2] = level * slev * LEVEL_3DB;
+	return 7;
+
+    case CONVERT (A52_2F2R, A52_MONO):
+	coeff[0] = coeff[1] = level * LEVEL_3DB;
+	coeff[2] = coeff[3] = level * slev * LEVEL_3DB;
+	return 15;
+
+    case CONVERT (A52_3F1R, A52_MONO):
+	coeff[0] = coeff[2] = level * LEVEL_3DB;
+	coeff[1] = level * clev * LEVEL_PLUS3DB;
+	coeff[3] = level * slev * LEVEL_3DB;
+	return 15;
+
+    case CONVERT (A52_3F2R, A52_MONO):
+	coeff[0] = coeff[2] = level * LEVEL_3DB;
+	coeff[1] = level * clev * LEVEL_PLUS3DB;
+	coeff[3] = coeff[4] = level * slev * LEVEL_3DB;
+	return 31;
+
+    case CONVERT (A52_MONO, A52_DOLBY):
+	coeff[0] = level * LEVEL_3DB;
+	return 0;
+
+    case CONVERT (A52_3F, A52_DOLBY):
+	clev = LEVEL_3DB;
+    case CONVERT (A52_3F, A52_STEREO):
+    case CONVERT (A52_3F1R, A52_2F1R):
+    case CONVERT (A52_3F2R, A52_2F2R):
+	coeff[0] = coeff[2] = coeff[3] = coeff[4] = level;
+	coeff[1] = level * clev;
+	return 7;
+
+    case CONVERT (A52_2F1R, A52_DOLBY):
+	slev = 1;
+    case CONVERT (A52_2F1R, A52_STEREO):
+	coeff[0] = coeff[1] = level;
+	coeff[2] = level * slev * LEVEL_3DB;
+	return 7;
+
+    case CONVERT (A52_3F1R, A52_DOLBY):
+	clev = LEVEL_3DB;
+	slev = 1;
+    case CONVERT (A52_3F1R, A52_STEREO):
+	coeff[0] = coeff[2] = level;
+	coeff[1] = level * clev;
+	coeff[3] = level * slev * LEVEL_3DB;
+	return 15;
+
+    case CONVERT (A52_2F2R, A52_DOLBY):
+	slev = LEVEL_3DB;
+    case CONVERT (A52_2F2R, A52_STEREO):
+	coeff[0] = coeff[1] = level;
+	coeff[2] = coeff[3] = level * slev;
+	return 15;
+
+    case CONVERT (A52_3F2R, A52_DOLBY):
+	clev = LEVEL_3DB;
+    case CONVERT (A52_3F2R, A52_2F1R):
+	slev = LEVEL_3DB;
+    case CONVERT (A52_3F2R, A52_STEREO):
+	coeff[0] = coeff[2] = level;
+	coeff[1] = level * clev;
+	coeff[3] = coeff[4] = level * slev;
+	return 31;
+
+    case CONVERT (A52_3F1R, A52_3F):
+	coeff[0] = coeff[1] = coeff[2] = level;
+	coeff[3] = level * slev * LEVEL_3DB;
+	return 13;
+
+    case CONVERT (A52_3F2R, A52_3F):
+	coeff[0] = coeff[1] = coeff[2] = level;
+	coeff[3] = coeff[4] = level * slev;
+	return 29;
+
+    case CONVERT (A52_2F2R, A52_2F1R):
+	coeff[0] = coeff[1] = level;
+	coeff[2] = coeff[3] = level * LEVEL_3DB;
+	return 12;
+
+    case CONVERT (A52_3F2R, A52_3F1R):
+	coeff[0] = coeff[1] = coeff[2] = level;
+	coeff[3] = coeff[4] = level * LEVEL_3DB;
+	return 24;
+
+    case CONVERT (A52_2F1R, A52_2F2R):
+	coeff[0] = coeff[1] = level;
+	coeff[2] = level * LEVEL_3DB;
+	return 0;
+
+    case CONVERT (A52_3F1R, A52_2F2R):
+	coeff[0] = coeff[2] = level;
+	coeff[1] = level * clev;
+	coeff[3] = level * LEVEL_3DB;
+	return 7;
+
+    case CONVERT (A52_3F1R, A52_3F2R):
+	coeff[0] = coeff[1] = coeff[2] = level;
+	coeff[3] = level * LEVEL_3DB;
+	return 0;
+
+    case CONVERT (A52_CHANNEL, A52_CHANNEL1):
+	coeff[0] = level;
+	coeff[1] = 0;
+	return 0;
+
+    case CONVERT (A52_CHANNEL, A52_CHANNEL2):
+	coeff[0] = 0;
+	coeff[1] = level;
+	return 0;
+    }
+
+    return -1;	/* NOTREACHED */
+}
+
+static void mix2to1 (sample_t * dest, sample_t * src, sample_t bias)
+{
+    int i;
+
+    for (i = 0; i < 256; i++)
+	dest[i] += src[i] + bias;
+}
+
+static void mix3to1 (sample_t * samples, sample_t bias)
+{
+    int i;
+
+    for (i = 0; i < 256; i++)
+	samples[i] += samples[i + 256] + samples[i + 512] + bias;
+}
+
+static void mix4to1 (sample_t * samples, sample_t bias)
+{
+    int i;
+
+    for (i = 0; i < 256; i++)
+	samples[i] += (samples[i + 256] + samples[i + 512] +
+		       samples[i + 768] + bias);
+}
+
+static void mix5to1 (sample_t * samples, sample_t bias)
+{
+    int i;
+
+    for (i = 0; i < 256; i++)
+	samples[i] += (samples[i + 256] + samples[i + 512] +
+		       samples[i + 768] + samples[i + 1024] + bias);
+}
+
+static void mix3to2 (sample_t * samples, sample_t bias)
+{
+    int i;
+    sample_t common;
+
+    for (i = 0; i < 256; i++) {
+	common = samples[i + 256] + bias;
+	samples[i] += common;
+	samples[i + 256] = samples[i + 512] + common;
+    }
+}
+
+static void mix21to2 (sample_t * left, sample_t * right, sample_t bias)
+{
+    int i;
+    sample_t common;
+
+    for (i = 0; i < 256; i++) {
+	common = right[i + 256] + bias;
+	left[i] += common;
+	right[i] += common;
+    }
+}
+
+static void mix21toS (sample_t * samples, sample_t bias)
+{
+    int i;
+    sample_t surround;
+
+    for (i = 0; i < 256; i++) {
+	surround = samples[i + 512];
+	samples[i] += bias - surround;
+	samples[i + 256] += bias + surround;
+    }
+}
+
+static void mix31to2 (sample_t * samples, sample_t bias)
+{
+    int i;
+    sample_t common;
+
+    for (i = 0; i < 256; i++) {
+	common = samples[i + 256] + samples[i + 768] + bias;
+	samples[i] += common;
+	samples[i + 256] = samples[i + 512] + common;
+    }
+}
+
+static void mix31toS (sample_t * samples, sample_t bias)
+{
+    int i;
+    sample_t common, surround;
+
+    for (i = 0; i < 256; i++) {
+	common = samples[i + 256] + bias;
+	surround = samples[i + 768];
+	samples[i] += common - surround;
+	samples[i + 256] = samples[i + 512] + common + surround;
+    }
+}
+
+static void mix22toS (sample_t * samples, sample_t bias)
+{
+    int i;
+    sample_t surround;
+
+    for (i = 0; i < 256; i++) {
+	surround = samples[i + 512] + samples[i + 768];
+	samples[i] += bias - surround;
+	samples[i + 256] += bias + surround;
+    }
+}
+
+static void mix32to2 (sample_t * samples, sample_t bias)
+{
+    int i;
+    sample_t common;
+
+    for (i = 0; i < 256; i++) {
+	common = samples[i + 256] + bias;
+	samples[i] += common + samples[i + 768];
+	samples[i + 256] = common + samples[i + 512] + samples[i + 1024];
+    }
+}
+
+static void mix32toS (sample_t * samples, sample_t bias)
+{
+    int i;
+    sample_t common, surround;
+
+    for (i = 0; i < 256; i++) {
+	common = samples[i + 256] + bias;
+	surround = samples[i + 768] + samples[i + 1024];
+	samples[i] += common - surround;
+	samples[i + 256] = samples[i + 512] + common + surround;
+    }
+}
+
+static void move2to1 (sample_t * src, sample_t * dest, sample_t bias)
+{
+    int i;
+
+    for (i = 0; i < 256; i++)
+	dest[i] = src[i] + src[i + 256] + bias;
+}
+
+static void zero (sample_t * samples)
+{
+    int i;
+
+    for (i = 0; i < 256; i++)
+	samples[i] = 0;
+}
+
+void a52_downmix (sample_t * samples, int acmod, int output, sample_t bias,
+		  sample_t clev, sample_t slev)
+{
+    switch (CONVERT (acmod, output & A52_CHANNEL_MASK)) {
+
+    case CONVERT (A52_CHANNEL, A52_CHANNEL2):
+	memcpy (samples, samples + 256, 256 * sizeof (sample_t));
+	break;
+
+    case CONVERT (A52_CHANNEL, A52_MONO):
+    case CONVERT (A52_STEREO, A52_MONO):
+    mix_2to1:
+	mix2to1 (samples, samples + 256, bias);
+	break;
+
+    case CONVERT (A52_2F1R, A52_MONO):
+	if (slev == 0)
+	    goto mix_2to1;
+    case CONVERT (A52_3F, A52_MONO):
+    mix_3to1:
+	mix3to1 (samples, bias);
+	break;
+
+    case CONVERT (A52_3F1R, A52_MONO):
+	if (slev == 0)
+	    goto mix_3to1;
+    case CONVERT (A52_2F2R, A52_MONO):
+	if (slev == 0)
+	    goto mix_2to1;
+	mix4to1 (samples, bias);
+	break;
+
+    case CONVERT (A52_3F2R, A52_MONO):
+	if (slev == 0)
+	    goto mix_3to1;
+	mix5to1 (samples, bias);
+	break;
+
+    case CONVERT (A52_MONO, A52_DOLBY):
+	memcpy (samples + 256, samples, 256 * sizeof (sample_t));
+	break;
+
+    case CONVERT (A52_3F, A52_STEREO):
+    case CONVERT (A52_3F, A52_DOLBY):
+    mix_3to2:
+	mix3to2 (samples, bias);
+	break;
+
+    case CONVERT (A52_2F1R, A52_STEREO):
+	if (slev == 0)
+	    break;
+	mix21to2 (samples, samples + 256, bias);
+	break;
+
+    case CONVERT (A52_2F1R, A52_DOLBY):
+	mix21toS (samples, bias);
+	break;
+
+    case CONVERT (A52_3F1R, A52_STEREO):
+	if (slev == 0)
+	    goto mix_3to2;
+	mix31to2 (samples, bias);
+	break;
+
+    case CONVERT (A52_3F1R, A52_DOLBY):
+	mix31toS (samples, bias);
+	break;
+
+    case CONVERT (A52_2F2R, A52_STEREO):
+	if (slev == 0)
+	    break;
+	mix2to1 (samples, samples + 512, bias);
+	mix2to1 (samples + 256, samples + 768, bias);
+	break;
+
+    case CONVERT (A52_2F2R, A52_DOLBY):
+	mix22toS (samples, bias);
+	break;
+
+    case CONVERT (A52_3F2R, A52_STEREO):
+	if (slev == 0)
+	    goto mix_3to2;
+	mix32to2 (samples, bias);
+	break;
+
+    case CONVERT (A52_3F2R, A52_DOLBY):
+	mix32toS (samples, bias);
+	break;
+
+    case CONVERT (A52_3F1R, A52_3F):
+	if (slev == 0)
+	    break;
+	mix21to2 (samples, samples + 512, bias);
+	break;
+
+    case CONVERT (A52_3F2R, A52_3F):
+	if (slev == 0)
+	    break;
+	mix2to1 (samples, samples + 768, bias);
+	mix2to1 (samples + 512, samples + 1024, bias);
+	break;
+
+    case CONVERT (A52_3F1R, A52_2F1R):
+	mix3to2 (samples, bias);
+	memcpy (samples + 512, samples + 768, 256 * sizeof (sample_t));
+	break;
+
+    case CONVERT (A52_2F2R, A52_2F1R):
+	mix2to1 (samples + 512, samples + 768, bias);
+	break;
+
+    case CONVERT (A52_3F2R, A52_2F1R):
+	mix3to2 (samples, bias);
+	move2to1 (samples + 768, samples + 512, bias);
+	break;
+
+    case CONVERT (A52_3F2R, A52_3F1R):
+	mix2to1 (samples + 768, samples + 1024, bias);
+	break;
+
+    case CONVERT (A52_2F1R, A52_2F2R):
+	memcpy (samples + 768, samples + 512, 256 * sizeof (sample_t));
+	break;
+
+    case CONVERT (A52_3F1R, A52_2F2R):
+	mix3to2 (samples, bias);
+	memcpy (samples + 512, samples + 768, 256 * sizeof (sample_t));
+	break;
+
+    case CONVERT (A52_3F2R, A52_2F2R):
+	mix3to2 (samples, bias);
+	memcpy (samples + 512, samples + 768, 256 * sizeof (sample_t));
+	memcpy (samples + 768, samples + 1024, 256 * sizeof (sample_t));
+	break;
+
+    case CONVERT (A52_3F1R, A52_3F2R):
+	memcpy (samples + 1027, samples + 768, 256 * sizeof (sample_t));
+	break;
+    }
+}
+
+void a52_upmix (sample_t * samples, int acmod, int output)
+{
+    switch (CONVERT (acmod, output & A52_CHANNEL_MASK)) {
+
+    case CONVERT (A52_CHANNEL, A52_CHANNEL2):
+	memcpy (samples + 256, samples, 256 * sizeof (sample_t));
+	break;
+
+    case CONVERT (A52_3F2R, A52_MONO):
+	zero (samples + 1024);
+    case CONVERT (A52_3F1R, A52_MONO):
+    case CONVERT (A52_2F2R, A52_MONO):
+	zero (samples + 768);
+    case CONVERT (A52_3F, A52_MONO):
+    case CONVERT (A52_2F1R, A52_MONO):
+	zero (samples + 512);
+    case CONVERT (A52_CHANNEL, A52_MONO):
+    case CONVERT (A52_STEREO, A52_MONO):
+	zero (samples + 256);
+	break;
+
+    case CONVERT (A52_3F2R, A52_STEREO):
+    case CONVERT (A52_3F2R, A52_DOLBY):
+	zero (samples + 1024);
+    case CONVERT (A52_3F1R, A52_STEREO):
+    case CONVERT (A52_3F1R, A52_DOLBY):
+	zero (samples + 768);
+    case CONVERT (A52_3F, A52_STEREO):
+    case CONVERT (A52_3F, A52_DOLBY):
+    mix_3to2:
+	memcpy (samples + 512, samples + 256, 256 * sizeof (sample_t));
+	zero (samples + 256);
+	break;
+
+    case CONVERT (A52_2F2R, A52_STEREO):
+    case CONVERT (A52_2F2R, A52_DOLBY):
+	zero (samples + 768);
+    case CONVERT (A52_2F1R, A52_STEREO):
+    case CONVERT (A52_2F1R, A52_DOLBY):
+	zero (samples + 512);
+	break;
+
+    case CONVERT (A52_3F2R, A52_3F):
+	zero (samples + 1024);
+    case CONVERT (A52_3F1R, A52_3F):
+    case CONVERT (A52_2F2R, A52_2F1R):
+	zero (samples + 768);
+	break;
+
+    case CONVERT (A52_3F2R, A52_3F1R):
+	zero (samples + 1024);
+	break;
+
+    case CONVERT (A52_3F2R, A52_2F1R):
+	zero (samples + 1024);
+    case CONVERT (A52_3F1R, A52_2F1R):
+    mix_31to21:
+	memcpy (samples + 768, samples + 512, 256 * sizeof (sample_t));
+	goto mix_3to2;
+
+    case CONVERT (A52_3F2R, A52_2F2R):
+	memcpy (samples + 1024, samples + 768, 256 * sizeof (sample_t));
+	goto mix_31to21;
+    }
+}

Copied: branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/imdct.c (from rev 3841, branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/imdct.c)
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/imdct.c	2008-03-07 06:54:27 UTC (rev 3841)
+++ branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/imdct.c	2008-03-07 18:34:14 UTC (rev 3843)
@@ -0,0 +1,432 @@
+/*
+ * imdct.c
+ * Copyright (C) 2000-2002 Michel Lespinasse <walken at zoy.org>
+ * Copyright (C) 1999-2000 Aaron Holtzman <aholtzma at ess.engr.uvic.ca>
+ *
+ * The ifft algorithms in this file have been largely inspired by Dan
+ * Bernstein's work, djbfft, available at http://cr.yp.to/djbfft.html
+ *
+ * This file is part of a52dec, a free ATSC A-52 stream decoder.
+ * See http://liba52.sourceforge.net/ for updates.
+ *
+ * a52dec is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License as published by
+ * the Free Software Foundation; either version 2 of the License, or
+ * (at your option) any later version.
+ *
+ * a52dec is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ *
+ * You should have received a copy of the GNU General Public License
+ * along with this program; if not, write to the Free Software
+ * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+ */
+
+#include "config.h"
+
+#include <math.h>
+#include <stdio.h>
+#ifdef LIBA52_DJBFFT
+#include <fftc4.h>
+#endif
+#ifndef M_PI
+#define M_PI 3.1415926535897932384626433832795029
+#endif
+#include <inttypes.h>
+
+#include "a52.h"
+#include "a52_internal.h"
+#include "mm_accel.h"
+
+typedef struct complex_s {
+    sample_t real;
+    sample_t imag;
+} complex_t;
+
+static uint8_t fftorder[] = {
+      0,128, 64,192, 32,160,224, 96, 16,144, 80,208,240,112, 48,176,
+      8,136, 72,200, 40,168,232,104,248,120, 56,184, 24,152,216, 88,
+      4,132, 68,196, 36,164,228,100, 20,148, 84,212,244,116, 52,180,
+    252,124, 60,188, 28,156,220, 92, 12,140, 76,204,236,108, 44,172,
+      2,130, 66,194, 34,162,226, 98, 18,146, 82,210,242,114, 50,178,
+     10,138, 74,202, 42,170,234,106,250,122, 58,186, 26,154,218, 90,
+    254,126, 62,190, 30,158,222, 94, 14,142, 78,206,238,110, 46,174,
+      6,134, 70,198, 38,166,230,102,246,118, 54,182, 22,150,214, 86
+};
+
+/* Root values for IFFT */
+static sample_t roots16[3];
+static sample_t roots32[7];
+static sample_t roots64[15];
+static sample_t roots128[31];
+
+/* Twiddle factors for IMDCT */
+static complex_t pre1[128];
+static complex_t post1[64];
+static complex_t pre2[64];
+static complex_t post2[32];
+
+static sample_t a52_imdct_window[256];
+
+static void (* ifft128) (complex_t * buf);
+static void (* ifft64) (complex_t * buf);
+
+static inline void ifft2 (complex_t * buf)
+{
+    double r, i;
+
+    r = buf[0].real;
+    i = buf[0].imag;
+    buf[0].real += buf[1].real;
+    buf[0].imag += buf[1].imag;
+    buf[1].real = r - buf[1].real;
+    buf[1].imag = i - buf[1].imag;
+}
+
+static inline void ifft4 (complex_t * buf)
+{
+    double tmp1, tmp2, tmp3, tmp4, tmp5, tmp6, tmp7, tmp8;
+
+    tmp1 = buf[0].real + buf[1].real;
+    tmp2 = buf[3].real + buf[2].real;
+    tmp3 = buf[0].imag + buf[1].imag;
+    tmp4 = buf[2].imag + buf[3].imag;
+    tmp5 = buf[0].real - buf[1].real;
+    tmp6 = buf[0].imag - buf[1].imag;
+    tmp7 = buf[2].imag - buf[3].imag;
+    tmp8 = buf[3].real - buf[2].real;
+
+    buf[0].real = tmp1 + tmp2;
+    buf[0].imag = tmp3 + tmp4;
+    buf[2].real = tmp1 - tmp2;
+    buf[2].imag = tmp3 - tmp4;
+    buf[1].real = tmp5 + tmp7;
+    buf[1].imag = tmp6 + tmp8;
+    buf[3].real = tmp5 - tmp7;
+    buf[3].imag = tmp6 - tmp8;
+}
+
+/* the basic split-radix ifft butterfly */
+
+#define BUTTERFLY(a0,a1,a2,a3,wr,wi) do {	\
+    tmp5 = a2.real * wr + a2.imag * wi;		\
+    tmp6 = a2.imag * wr - a2.real * wi;		\
+    tmp7 = a3.real * wr - a3.imag * wi;		\
+    tmp8 = a3.imag * wr + a3.real * wi;		\
+    tmp1 = tmp5 + tmp7;				\
+    tmp2 = tmp6 + tmp8;				\
+    tmp3 = tmp6 - tmp8;				\
+    tmp4 = tmp7 - tmp5;				\
+    a2.real = a0.real - tmp1;			\
+    a2.imag = a0.imag - tmp2;			\
+    a3.real = a1.real - tmp3;			\
+    a3.imag = a1.imag - tmp4;			\
+    a0.real += tmp1;				\
+    a0.imag += tmp2;				\
+    a1.real += tmp3;				\
+    a1.imag += tmp4;				\
+} while (0)
+
+/* split-radix ifft butterfly, specialized for wr=1 wi=0 */
+
+#define BUTTERFLY_ZERO(a0,a1,a2,a3) do {	\
+    tmp1 = a2.real + a3.real;			\
+    tmp2 = a2.imag + a3.imag;			\
+    tmp3 = a2.imag - a3.imag;			\
+    tmp4 = a3.real - a2.real;			\
+    a2.real = a0.real - tmp1;			\
+    a2.imag = a0.imag - tmp2;			\
+    a3.real = a1.real - tmp3;			\
+    a3.imag = a1.imag - tmp4;			\
+    a0.real += tmp1;				\
+    a0.imag += tmp2;				\
+    a1.real += tmp3;				\
+    a1.imag += tmp4;				\
+} while (0)
+
+/* split-radix ifft butterfly, specialized for wr=wi */
+
+#define BUTTERFLY_HALF(a0,a1,a2,a3,w) do {	\
+    tmp5 = (a2.real + a2.imag) * w;		\
+    tmp6 = (a2.imag - a2.real) * w;		\
+    tmp7 = (a3.real - a3.imag) * w;		\
+    tmp8 = (a3.imag + a3.real) * w;		\
+    tmp1 = tmp5 + tmp7;				\
+    tmp2 = tmp6 + tmp8;				\
+    tmp3 = tmp6 - tmp8;				\
+    tmp4 = tmp7 - tmp5;				\
+    a2.real = a0.real - tmp1;			\
+    a2.imag = a0.imag - tmp2;			\
+    a3.real = a1.real - tmp3;			\
+    a3.imag = a1.imag - tmp4;			\
+    a0.real += tmp1;				\
+    a0.imag += tmp2;				\
+    a1.real += tmp3;				\
+    a1.imag += tmp4;				\
+} while (0)
+
+static inline void ifft8 (complex_t * buf)
+{
+    double tmp1, tmp2, tmp3, tmp4, tmp5, tmp6, tmp7, tmp8;
+
+    ifft4 (buf);
+    ifft2 (buf + 4);
+    ifft2 (buf + 6);
+    BUTTERFLY_ZERO (buf[0], buf[2], buf[4], buf[6]);
+    BUTTERFLY_HALF (buf[1], buf[3], buf[5], buf[7], roots16[1]);
+}
+
+static void ifft_pass (complex_t * buf, sample_t * weight, int n)
+{
+    complex_t * buf1;
+    complex_t * buf2;
+    complex_t * buf3;
+    double tmp1, tmp2, tmp3, tmp4, tmp5, tmp6, tmp7, tmp8;
+    int i;
+
+    buf++;
+    buf1 = buf + n;
+    buf2 = buf + 2 * n;
+    buf3 = buf + 3 * n;
+
+    BUTTERFLY_ZERO (buf[-1], buf1[-1], buf2[-1], buf3[-1]);
+
+    i = n - 1;
+
+    do {
+	BUTTERFLY (buf[0], buf1[0], buf2[0], buf3[0], weight[n], weight[2*i]);
+	buf++;
+	buf1++;
+	buf2++;
+	buf3++;
+	weight++;
+    } while (--i);
+}
+
+static void ifft16 (complex_t * buf)
+{
+    ifft8 (buf);
+    ifft4 (buf + 8);
+    ifft4 (buf + 12);
+    ifft_pass (buf, roots16 - 4, 4);
+}
+
+static void ifft32 (complex_t * buf)
+{
+    ifft16 (buf);
+    ifft8 (buf + 16);
+    ifft8 (buf + 24);
+    ifft_pass (buf, roots32 - 8, 8);
+}
+
+static void ifft64_c (complex_t * buf)
+{
+    ifft32 (buf);
+    ifft16 (buf + 32);
+    ifft16 (buf + 48);
+    ifft_pass (buf, roots64 - 16, 16);
+}
+
+static void ifft128_c (complex_t * buf)
+{
+    ifft32 (buf);
+    ifft16 (buf + 32);
+    ifft16 (buf + 48);
+    ifft_pass (buf, roots64 - 16, 16);
+
+    ifft32 (buf + 64);
+    ifft32 (buf + 96);
+    ifft_pass (buf, roots128 - 32, 32);
+}
+
+void a52_imdct_512 (sample_t * data, sample_t * delay, sample_t bias)
+{
+    int i, k;
+    sample_t t_r, t_i, a_r, a_i, b_r, b_i, w_1, w_2;
+    const sample_t * window = a52_imdct_window;
+    complex_t buf[128];
+	
+    for (i = 0; i < 128; i++) {
+	k = fftorder[i];
+	t_r = pre1[i].real;
+	t_i = pre1[i].imag;
+
+	buf[i].real = t_i * data[255-k] + t_r * data[k];
+	buf[i].imag = t_r * data[255-k] - t_i * data[k];
+    }
+
+    ifft128 (buf);
+
+    /* Post IFFT complex multiply plus IFFT complex conjugate*/
+    /* Window and convert to real valued signal */
+    for (i = 0; i < 64; i++) {
+	/* y[n] = z[n] * (xcos1[n] + j * xsin1[n]) ; */
+	t_r = post1[i].real;
+	t_i = post1[i].imag;
+
+	a_r = t_r * buf[i].real     + t_i * buf[i].imag;
+	a_i = t_i * buf[i].real     - t_r * buf[i].imag;
+	b_r = t_i * buf[127-i].real + t_r * buf[127-i].imag;
+	b_i = t_r * buf[127-i].real - t_i * buf[127-i].imag;
+
+	w_1 = window[2*i];
+	w_2 = window[255-2*i];
+	data[2*i]     = delay[2*i] * w_2 - a_r * w_1 + bias;
+	data[255-2*i] = delay[2*i] * w_1 + a_r * w_2 + bias;
+	delay[2*i] = a_i;
+
+	w_1 = window[2*i+1];
+	w_2 = window[254-2*i];
+	data[2*i+1]   = delay[2*i+1] * w_2 + b_r * w_1 + bias;
+	data[254-2*i] = delay[2*i+1] * w_1 - b_r * w_2 + bias;
+	delay[2*i+1] = b_i;
+    }
+}
+
+void a52_imdct_256(sample_t * data, sample_t * delay, sample_t bias)
+{
+    int i, k;
+    sample_t t_r, t_i, a_r, a_i, b_r, b_i, c_r, c_i, d_r, d_i, w_1, w_2;
+    const sample_t * window = a52_imdct_window;
+    complex_t buf1[64], buf2[64];
+
+    /* Pre IFFT complex multiply plus IFFT cmplx conjugate */
+    for (i = 0; i < 64; i++) {
+	k = fftorder[i];
+	t_r = pre2[i].real;
+	t_i = pre2[i].imag;
+
+	buf1[i].real = t_i * data[254-k] + t_r * data[k];
+	buf1[i].imag = t_r * data[254-k] - t_i * data[k];
+
+	buf2[i].real = t_i * data[255-k] + t_r * data[k+1];
+	buf2[i].imag = t_r * data[255-k] - t_i * data[k+1];
+    }
+
+    ifft64 (buf1);
+    ifft64 (buf2);
+
+    /* Post IFFT complex multiply */
+    /* Window and convert to real valued signal */
+    for (i = 0; i < 32; i++) {
+	/* y1[n] = z1[n] * (xcos2[n] + j * xs in2[n]) ; */ 
+	t_r = post2[i].real;
+	t_i = post2[i].imag;
+
+	a_r = t_r * buf1[i].real    + t_i * buf1[i].imag;
+	a_i = t_i * buf1[i].real    - t_r * buf1[i].imag;
+	b_r = t_i * buf1[63-i].real + t_r * buf1[63-i].imag;
+	b_i = t_r * buf1[63-i].real - t_i * buf1[63-i].imag;
+
+	c_r = t_r * buf2[i].real    + t_i * buf2[i].imag;
+	c_i = t_i * buf2[i].real    - t_r * buf2[i].imag;
+	d_r = t_i * buf2[63-i].real + t_r * buf2[63-i].imag;
+	d_i = t_r * buf2[63-i].real - t_i * buf2[63-i].imag;
+
+	w_1 = window[2*i];
+	w_2 = window[255-2*i];
+	data[2*i]     = delay[2*i] * w_2 - a_r * w_1 + bias;
+	data[255-2*i] = delay[2*i] * w_1 + a_r * w_2 + bias;
+	delay[2*i] = c_i;
+
+	w_1 = window[128+2*i];
+	w_2 = window[127-2*i];
+	data[128+2*i] = delay[127-2*i] * w_2 + a_i * w_1 + bias;
+	data[127-2*i] = delay[127-2*i] * w_1 - a_i * w_2 + bias;
+	delay[127-2*i] = c_r;
+
+	w_1 = window[2*i+1];
+	w_2 = window[254-2*i];
+	data[2*i+1]   = delay[2*i+1] * w_2 - b_i * w_1 + bias;
+	data[254-2*i] = delay[2*i+1] * w_1 + b_i * w_2 + bias;
+	delay[2*i+1] = d_r;
+
+	w_1 = window[129+2*i];
+	w_2 = window[126-2*i];
+	data[129+2*i] = delay[126-2*i] * w_2 + b_r * w_1 + bias;
+	data[126-2*i] = delay[126-2*i] * w_1 - b_r * w_2 + bias;
+	delay[126-2*i] = d_i;
+    }
+}
+
+static double besselI0 (double x)
+{
+    double bessel = 1;
+    int i = 100;
+
+    do
+	bessel = bessel * x / (i * i) + 1;
+    while (--i);
+    return bessel;
+}
+
+void a52_imdct_init (uint32_t mm_accel)
+{
+    int i, k;
+    double sum;
+
+    /* compute imdct window - kaiser-bessel derived window, alpha = 5.0 */
+    sum = 0;
+    for (i = 0; i < 256; i++) {
+	sum += besselI0 (i * (256 - i) * (5 * M_PI / 256) * (5 * M_PI / 256));
+	a52_imdct_window[i] = sum;
+    }
+    sum++;
+    for (i = 0; i < 256; i++)
+	a52_imdct_window[i] = sqrt (a52_imdct_window[i] / sum);
+
+    for (i = 0; i < 3; i++)
+	roots16[i] = cos ((M_PI / 8) * (i + 1));
+
+    for (i = 0; i < 7; i++)
+	roots32[i] = cos ((M_PI / 16) * (i + 1));
+
+    for (i = 0; i < 15; i++)
+	roots64[i] = cos ((M_PI / 32) * (i + 1));
+
+    for (i = 0; i < 31; i++)
+	roots128[i] = cos ((M_PI / 64) * (i + 1));
+
+    for (i = 0; i < 64; i++) {
+	k = fftorder[i] / 2 + 64;
+	pre1[i].real = cos ((M_PI / 256) * (k - 0.25));
+	pre1[i].imag = sin ((M_PI / 256) * (k - 0.25));
+    }
+
+    for (i = 64; i < 128; i++) {
+	k = fftorder[i] / 2 + 64;
+	pre1[i].real = -cos ((M_PI / 256) * (k - 0.25));
+	pre1[i].imag = -sin ((M_PI / 256) * (k - 0.25));
+    }
+
+    for (i = 0; i < 64; i++) {
+	post1[i].real = cos ((M_PI / 256) * (i + 0.5));
+	post1[i].imag = sin ((M_PI / 256) * (i + 0.5));
+    }
+
+    for (i = 0; i < 64; i++) {
+	k = fftorder[i] / 4;
+	pre2[i].real = cos ((M_PI / 128) * (k - 0.25));
+	pre2[i].imag = sin ((M_PI / 128) * (k - 0.25));
+    }
+
+    for (i = 0; i < 32; i++) {
+	post2[i].real = cos ((M_PI / 128) * (i + 0.5));
+	post2[i].imag = sin ((M_PI / 128) * (i + 0.5));
+    }
+
+#ifdef LIBA52_DJBFFT
+    if (mm_accel & MM_ACCEL_DJBFFT) {
+	fprintf (stderr, "Using djbfft for IMDCT transform\n");
+	ifft128 = (void (*) (complex_t *)) fftc4_un128;
+	ifft64 = (void (*) (complex_t *)) fftc4_un64;
+    } else
+#endif
+    {
+	fprintf (stderr, "No accelerated IMDCT transform found\n");
+	ifft128 = ifft128_c;
+	ifft64 = ifft64_c;
+    }
+}

Copied: branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/mm_accel.h (from rev 3841, branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/mm_accel.h)
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/mm_accel.h	2008-03-07 06:54:27 UTC (rev 3841)
+++ branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/mm_accel.h	2008-03-07 18:34:14 UTC (rev 3843)
@@ -0,0 +1,37 @@
+/*
+ * mm_accel.h
+ * Copyright (C) 2000-2002 Michel Lespinasse <walken at zoy.org>
+ * Copyright (C) 1999-2000 Aaron Holtzman <aholtzma at ess.engr.uvic.ca>
+ *
+ * This file is part of a52dec, a free ATSC A-52 stream decoder.
+ * See http://liba52.sourceforge.net/ for updates.
+ *
+ * a52dec is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License as published by
+ * the Free Software Foundation; either version 2 of the License, or
+ * (at your option) any later version.
+ *
+ * a52dec is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ *
+ * You should have received a copy of the GNU General Public License
+ * along with this program; if not, write to the Free Software
+ * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+ */
+
+#ifndef MM_ACCEL_H
+#define MM_ACCEL_H
+
+/* generic accelerations */
+#define MM_ACCEL_DJBFFT		0x00000001
+
+/* x86 accelerations */
+#define MM_ACCEL_X86_MMX	0x80000000
+#define MM_ACCEL_X86_3DNOW	0x40000000
+#define MM_ACCEL_X86_MMXEXT	0x20000000
+
+uint32_t mm_accel (void);
+
+#endif /* MM_ACCEL_H */

Copied: branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/parse.c (from rev 3841, branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/parse.c)
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/parse.c	2008-03-07 06:54:27 UTC (rev 3841)
+++ branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/parse.c	2008-03-07 18:34:14 UTC (rev 3843)
@@ -0,0 +1,905 @@
+/*
+ * parse.c
+ * Copyright (C) 2000-2002 Michel Lespinasse <walken at zoy.org>
+ * Copyright (C) 1999-2000 Aaron Holtzman <aholtzma at ess.engr.uvic.ca>
+ *
+ * This file is part of a52dec, a free ATSC A-52 stream decoder.
+ * See http://liba52.sourceforge.net/ for updates.
+ *
+ * a52dec is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License as published by
+ * the Free Software Foundation; either version 2 of the License, or
+ * (at your option) any later version.
+ *
+ * a52dec is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ *
+ * You should have received a copy of the GNU General Public License
+ * along with this program; if not, write to the Free Software
+ * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+ */
+
+
+//MEANX
+#define ADM_LEGACY_PROGGY
+#include "ADM_default.h"
+// /MEANX
+
+    
+#include "a52.h"
+#include "a52_internal.h"
+#include "bitstream.h"
+#include "tables.h"
+
+
+#ifdef HAVE_MEMALIGN
+/* some systems have memalign() but no declaration for it */
+void * memalign (size_t align, size_t size);
+#else
+/* assume malloc alignment is sufficient */
+#define memalign(align,size) malloc (size)
+#endif
+
+
+
+typedef struct {
+    sample_t q1[2];
+    sample_t q2[2];
+    sample_t q4;
+    int q1_ptr;
+    int q2_ptr;
+    int q4_ptr;
+} quantizer_t;
+
+static uint8_t halfrate[12] = {0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 3};
+
+a52_state_t * a52_init (uint32_t mm_accel)
+{
+    a52_state_t * state;
+    int i;
+
+    state = malloc (sizeof (a52_state_t));
+    if (state == NULL)
+	return NULL;
+
+    state->samples = memalign (16, 256 * 12 * sizeof (sample_t));
+    if (state->samples == NULL) {
+	free (state);
+	return NULL;
+    }
+
+    for (i = 0; i < 256 * 12; i++)
+	state->samples[i] = 0;
+
+    state->downmixed = 1;
+
+    state->lfsr_state = 1;
+
+    a52_imdct_init (mm_accel);
+
+    return state;
+}
+
+sample_t * a52_samples (a52_state_t * state)
+{
+    return state->samples;
+}
+
+int a52_syncinfo (uint8_t * buf, int * flags,
+		  int * sample_rate, int * bit_rate)
+{
+    static int rate[] = { 32,  40,  48,  56,  64,  80,  96, 112,
+			 128, 160, 192, 224, 256, 320, 384, 448,
+			 512, 576, 640};
+    static uint8_t lfeon[8] = {0x10, 0x10, 0x04, 0x04, 0x04, 0x01, 0x04, 0x01};
+    int frmsizecod;
+    int bitrate;
+    int half;
+    int acmod;
+
+    if ((buf[0] != 0x0b) || (buf[1] != 0x77))	/* syncword */
+	return 0;
+
+    if (buf[5] >= 0x60)		/* bsid >= 12 */
+	return 0;
+    half = halfrate[buf[5] >> 3];
+
+    /* acmod, dsurmod and lfeon */
+    acmod = buf[6] >> 5;
+    *flags = ((((buf[6] & 0xf8) == 0x50) ? A52_DOLBY : acmod) |
+	      ((buf[6] & lfeon[acmod]) ? A52_LFE : 0));
+
+    frmsizecod = buf[4] & 63;
+    if (frmsizecod >= 38)
+	return 0;
+    bitrate = rate [frmsizecod >> 1];
+    *bit_rate = (bitrate * 1000) >> half;
+
+    switch (buf[4] & 0xc0) {
+    case 0:
+	*sample_rate = 48000 >> half;
+	return 4 * bitrate;
+    case 0x40:
+	*sample_rate = 44100 >> half;
+	return 2 * (320 * bitrate / 147 + (frmsizecod & 1));
+    case 0x80:
+	*sample_rate = 32000 >> half;
+	return 6 * bitrate;
+    default:
+	return 0;
+    }
+}
+
+int a52_frame (a52_state_t * state, uint8_t * buf, int * flags,
+	       sample_t * level, sample_t bias)
+{
+    static sample_t clev[4] = {LEVEL_3DB, LEVEL_45DB, LEVEL_6DB, LEVEL_45DB};
+    static sample_t slev[4] = {LEVEL_3DB, LEVEL_6DB, 0, LEVEL_6DB};
+    int chaninfo;
+    int acmod;
+
+    state->fscod = buf[4] >> 6;
+    state->halfrate = halfrate[buf[5] >> 3];
+    state->acmod = acmod = buf[6] >> 5;
+
+    a52_bitstream_set_ptr (state, buf + 6);
+    bitstream_get (state, 3);	/* skip acmod we already parsed */
+
+    if ((acmod == 2) && (bitstream_get (state, 2) == 2))	/* dsurmod */
+	acmod = A52_DOLBY;
+
+    if ((acmod & 1) && (acmod != 1))
+	state->clev = clev[bitstream_get (state, 2)];	/* cmixlev */
+
+    if (acmod & 4)
+	state->slev = slev[bitstream_get (state, 2)];	/* surmixlev */
+
+    state->lfeon = bitstream_get (state, 1);
+
+    state->output = a52_downmix_init (acmod, *flags, level,
+				      state->clev, state->slev);
+    if (state->output < 0)
+	return 1;
+    if (state->lfeon && (*flags & A52_LFE))
+	state->output |= A52_LFE;
+    *flags = state->output;
+    /* the 2* compensates for differences in imdct */
+    state->dynrng = state->level = 2 * *level;
+    state->bias = bias;
+    state->dynrnge = 1;
+    state->dynrngcall = NULL;
+    state->cplba.deltbae = DELTA_BIT_NONE;
+    state->ba[0].deltbae = state->ba[1].deltbae = state->ba[2].deltbae =
+	state->ba[3].deltbae = state->ba[4].deltbae = DELTA_BIT_NONE;
+
+    chaninfo = !acmod;
+    do {
+	bitstream_get (state, 5);	/* dialnorm */
+	if (bitstream_get (state, 1))	/* compre */
+	    bitstream_get (state, 8);	/* compr */
+	if (bitstream_get (state, 1))	/* langcode */
+	    bitstream_get (state, 8);	/* langcod */
+	if (bitstream_get (state, 1))	/* audprodie */
+	    bitstream_get (state, 7);	/* mixlevel + roomtyp */
+    } while (chaninfo--);
+
+    bitstream_get (state, 2);		/* copyrightb + origbs */
+
+    if (bitstream_get (state, 1))	/* timecod1e */
+	bitstream_get (state, 14);	/* timecod1 */
+    if (bitstream_get (state, 1))	/* timecod2e */
+	bitstream_get (state, 14);	/* timecod2 */
+
+    if (bitstream_get (state, 1)) {	/* addbsie */
+	int addbsil;
+
+	addbsil = bitstream_get (state, 6);
+	do {
+	    bitstream_get (state, 8);	/* addbsi */
+	} while (addbsil--);
+    }
+
+    return 0;
+}
+
+void a52_dynrng (a52_state_t * state,
+		 sample_t (* call) (sample_t, void *), void * data)
+{
+    state->dynrnge = 0;
+    if (call) {
+	state->dynrnge = 1;
+	state->dynrngcall = call;
+	state->dynrngdata = data;
+    }
+}
+
+static int parse_exponents (a52_state_t * state, int expstr, int ngrps,
+			    uint8_t exponent, uint8_t * dest)
+{
+    int exps;
+
+    while (ngrps--) {
+	exps = bitstream_get (state, 7);
+
+	exponent += exp_1[exps];
+	if (exponent > 24)
+	    return 1;
+
+	switch (expstr) {
+	case EXP_D45:
+	    *(dest++) = exponent;
+	    *(dest++) = exponent;
+	case EXP_D25:
+	    *(dest++) = exponent;
+	case EXP_D15:
+	    *(dest++) = exponent;
+	}
+
+	exponent += exp_2[exps];
+	if (exponent > 24)
+	    return 1;
+
+	switch (expstr) {
+	case EXP_D45:
+	    *(dest++) = exponent;
+	    *(dest++) = exponent;
+	case EXP_D25:
+	    *(dest++) = exponent;
+	case EXP_D15:
+	    *(dest++) = exponent;
+	}
+
+	exponent += exp_3[exps];
+	if (exponent > 24)
+	    return 1;
+
+	switch (expstr) {
+	case EXP_D45:
+	    *(dest++) = exponent;
+	    *(dest++) = exponent;
+	case EXP_D25:
+	    *(dest++) = exponent;
+	case EXP_D15:
+	    *(dest++) = exponent;
+	}
+    }	
+
+    return 0;
+}
+
+static int parse_deltba (a52_state_t * state, int8_t * deltba)
+{
+    int deltnseg, deltlen, delta, j;
+
+    memset (deltba, 0, 50);
+
+    deltnseg = bitstream_get (state, 3);
+    j = 0;
+    do {
+	j += bitstream_get (state, 5);
+	deltlen = bitstream_get (state, 4);
+	delta = bitstream_get (state, 3);
+	delta -= (delta >= 4) ? 3 : 4;
+	if (!deltlen)
+	    continue;
+	if (j + deltlen >= 50)
+	    return 1;
+	while (deltlen--)
+	    deltba[j++] = delta;
+    } while (deltnseg--);
+
+    return 0;
+}
+
+static inline int zero_snr_offsets (int nfchans, a52_state_t * state)
+{
+    int i;
+
+    if ((state->csnroffst) ||
+	(state->chincpl && state->cplba.bai >> 3) ||	/* cplinu, fsnroffst */
+	(state->lfeon && state->lfeba.bai >> 3))	/* fsnroffst */
+	return 0;
+    for (i = 0; i < nfchans; i++)
+	if (state->ba[i].bai >> 3)			/* fsnroffst */
+	    return 0;
+    return 1;
+}
+
+static inline int16_t dither_gen (a52_state_t * state)
+{
+    int16_t nstate;
+
+    nstate = dither_lut[state->lfsr_state >> 8] ^ (state->lfsr_state << 8);
+	
+    state->lfsr_state = (uint16_t) nstate;
+
+    return nstate;
+}
+
+static void coeff_get (a52_state_t * state, sample_t * coeff,
+		       expbap_t * expbap, quantizer_t * quantizer,
+		       sample_t level, int dither, int end)
+{
+    int i;
+    uint8_t * exp;
+    int8_t * bap;
+    sample_t factor[25];
+
+    for (i = 0; i <= 24; i++)
+	factor[i] = scale_factor[i] * level;
+
+    exp = expbap->exp;
+    bap = expbap->bap;
+
+    for (i = 0; i < end; i++) {
+	int bapi;
+
+	bapi = bap[i];
+	switch (bapi) {
+	case 0:
+	    if (dither) {
+		coeff[i] = dither_gen (state) * LEVEL_3DB * factor[exp[i]];
+		continue;
+	    } else {
+		coeff[i] = 0;
+		continue;
+	    }
+
+	case -1:
+	    if (quantizer->q1_ptr >= 0) {
+		coeff[i] = quantizer->q1[quantizer->q1_ptr--] * factor[exp[i]];
+		continue;
+	    } else {
+		int code;
+
+		code = bitstream_get (state, 5);
+
+		quantizer->q1_ptr = 1;
+		quantizer->q1[0] = q_1_2[code];
+		quantizer->q1[1] = q_1_1[code];
+		coeff[i] = q_1_0[code] * factor[exp[i]];
+		continue;
+	    }
+
+	case -2:
+	    if (quantizer->q2_ptr >= 0) {
+		coeff[i] = quantizer->q2[quantizer->q2_ptr--] * factor[exp[i]];
+		continue;
+	    } else {
+		int code;
+
+		code = bitstream_get (state, 7);
+
+		quantizer->q2_ptr = 1;
+		quantizer->q2[0] = q_2_2[code];
+		quantizer->q2[1] = q_2_1[code];
+		coeff[i] = q_2_0[code] * factor[exp[i]];
+		continue;
+	    }
+
+	case 3:
+	    coeff[i] = q_3[bitstream_get (state, 3)] * factor[exp[i]];
+	    continue;
+
+	case -3:
+	    if (quantizer->q4_ptr == 0) {
+		quantizer->q4_ptr = -1;
+		coeff[i] = quantizer->q4 * factor[exp[i]];
+		continue;
+	    } else {
+		int code;
+
+		code = bitstream_get (state, 7);
+
+		quantizer->q4_ptr = 0;
+		quantizer->q4 = q_4_1[code];
+		coeff[i] = q_4_0[code] * factor[exp[i]];
+		continue;
+	    }
+
+	case 4:
+	    coeff[i] = q_5[bitstream_get (state, 4)] * factor[exp[i]];
+	    continue;
+
+	default:
+	    coeff[i] = ((bitstream_get_2 (state, bapi) << (16 - bapi)) *
+			  factor[exp[i]]);
+	}
+    }
+}
+
+static void coeff_get_coupling (a52_state_t * state, int nfchans,
+				sample_t * coeff, sample_t (* samples)[256],
+				quantizer_t * quantizer, uint8_t dithflag[5])
+{
+    int cplbndstrc, bnd, i, i_end, ch;
+    uint8_t * exp;
+    int8_t * bap;
+    sample_t cplco[5];
+
+    exp = state->cpl_expbap.exp;
+    bap = state->cpl_expbap.bap;
+    bnd = 0;
+    cplbndstrc = state->cplbndstrc;
+    i = state->cplstrtmant;
+    while (i < state->cplendmant) {
+	i_end = i + 12;
+	while (cplbndstrc & 1) {
+	    cplbndstrc >>= 1;
+	    i_end += 12;
+	}
+	cplbndstrc >>= 1;
+	for (ch = 0; ch < nfchans; ch++)
+	    cplco[ch] = state->cplco[ch][bnd] * coeff[ch];
+	bnd++;
+
+	while (i < i_end) {
+	    sample_t cplcoeff;
+	    int bapi;
+
+	    bapi = bap[i];
+	    switch (bapi) {
+	    case 0:
+		cplcoeff = LEVEL_3DB * scale_factor[exp[i]];
+		for (ch = 0; ch < nfchans; ch++)
+		    if ((state->chincpl >> ch) & 1) {
+			if (dithflag[ch])
+			    samples[ch][i] = (cplcoeff * cplco[ch] *
+					      dither_gen (state));
+			else
+			    samples[ch][i] = 0;
+		    }
+		i++;
+		continue;
+
+	    case -1:
+		if (quantizer->q1_ptr >= 0) {
+		    cplcoeff = quantizer->q1[quantizer->q1_ptr--];
+		    break;
+		} else {
+		    int code;
+
+		    code = bitstream_get (state, 5);
+
+		    quantizer->q1_ptr = 1;
+		    quantizer->q1[0] = q_1_2[code];
+		    quantizer->q1[1] = q_1_1[code];
+		    cplcoeff = q_1_0[code];
+		    break;
+		}
+
+	    case -2:
+		if (quantizer->q2_ptr >= 0) {
+		    cplcoeff = quantizer->q2[quantizer->q2_ptr--];
+		    break;
+		} else {
+		    int code;
+
+		    code = bitstream_get (state, 7);
+
+		    quantizer->q2_ptr = 1;
+		    quantizer->q2[0] = q_2_2[code];
+		    quantizer->q2[1] = q_2_1[code];
+		    cplcoeff = q_2_0[code];
+		    break;
+		}
+
+	    case 3:
+		cplcoeff = q_3[bitstream_get (state, 3)];
+		break;
+
+	    case -3:
+		if (quantizer->q4_ptr == 0) {
+		    quantizer->q4_ptr = -1;
+		    cplcoeff = quantizer->q4;
+		    break;
+		} else {
+		    int code;
+
+		    code = bitstream_get (state, 7);
+
+		    quantizer->q4_ptr = 0;
+		    quantizer->q4 = q_4_1[code];
+		    cplcoeff = q_4_0[code];
+		    break;
+		}
+
+	    case 4:
+		cplcoeff = q_5[bitstream_get (state, 4)];
+		break;
+
+	    default:
+		cplcoeff = bitstream_get_2 (state, bapi) << (16 - bapi);
+	    }
+
+	    cplcoeff *= scale_factor[exp[i]];
+	    for (ch = 0; ch < nfchans; ch++)
+		if ((state->chincpl >> ch) & 1)
+		    samples[ch][i] = cplcoeff * cplco[ch];
+	    i++;
+	}
+    }
+}
+
+int a52_block (a52_state_t * state)
+{
+    static const uint8_t nfchans_tbl[] = {2, 1, 2, 3, 3, 4, 4, 5, 1, 1, 2};
+    static int rematrix_band[4] = {25, 37, 61, 253};
+    int i, nfchans, chaninfo;
+    uint8_t cplexpstr, chexpstr[5], lfeexpstr, do_bit_alloc, done_cpl;
+    uint8_t blksw[5], dithflag[5];
+    sample_t coeff[5];
+    int chanbias;
+    quantizer_t quantizer;
+    sample_t * samples;
+
+    nfchans = nfchans_tbl[state->acmod];
+
+    for (i = 0; i < nfchans; i++)
+	blksw[i] = bitstream_get (state, 1);
+
+    for (i = 0; i < nfchans; i++)
+	dithflag[i] = bitstream_get (state, 1);
+
+    chaninfo = !state->acmod;
+    do {
+	if (bitstream_get (state, 1)) {	/* dynrnge */
+	    int dynrng;
+
+	    dynrng = bitstream_get_2 (state, 8);
+	    if (state->dynrnge) {
+		sample_t range;
+
+		range = ((((dynrng & 0x1f) | 0x20) << 13) *
+			 scale_factor[3 - (dynrng >> 5)]);
+		if (state->dynrngcall)
+		    range = state->dynrngcall (range, state->dynrngdata);
+		state->dynrng = state->level * range;
+	    }
+	}
+    } while (chaninfo--);
+
+    if (bitstream_get (state, 1)) {	/* cplstre */
+	state->chincpl = 0;
+	if (bitstream_get (state, 1)) {	/* cplinu */
+	    static uint8_t bndtab[16] = {31, 35, 37, 39, 41, 42, 43, 44,
+					 45, 45, 46, 46, 47, 47, 48, 48};
+	    int cplbegf;
+	    int cplendf;
+	    int ncplsubnd;
+
+	    for (i = 0; i < nfchans; i++)
+		state->chincpl |= bitstream_get (state, 1) << i;
+	    switch (state->acmod) {
+	    case 0: case 1:
+		return 1;
+	    case 2:
+		state->phsflginu = bitstream_get (state, 1);
+	    }
+	    cplbegf = bitstream_get (state, 4);
+	    cplendf = bitstream_get (state, 4);
+
+	    if (cplendf + 3 - cplbegf < 0)
+		return 1;
+	    state->ncplbnd = ncplsubnd = cplendf + 3 - cplbegf;
+	    state->cplstrtbnd = bndtab[cplbegf];
+	    state->cplstrtmant = cplbegf * 12 + 37;
+	    state->cplendmant = cplendf * 12 + 73;
+
+	    state->cplbndstrc = 0;
+	    for (i = 0; i < ncplsubnd - 1; i++)
+		if (bitstream_get (state, 1)) {
+		    state->cplbndstrc |= 1 << i;
+		    state->ncplbnd--;
+		}
+	}
+    }
+
+    if (state->chincpl) {	/* cplinu */
+	int j, cplcoe;
+
+	cplcoe = 0;
+	for (i = 0; i < nfchans; i++)
+	    if ((state->chincpl) >> i & 1)
+		if (bitstream_get (state, 1)) {	/* cplcoe */
+		    int mstrcplco, cplcoexp, cplcomant;
+
+		    cplcoe = 1;
+		    mstrcplco = 3 * bitstream_get (state, 2);
+		    for (j = 0; j < state->ncplbnd; j++) {
+			cplcoexp = bitstream_get (state, 4);
+			cplcomant = bitstream_get (state, 4);
+			if (cplcoexp == 15)
+			    cplcomant <<= 14;
+			else
+			    cplcomant = (cplcomant | 0x10) << 13;
+			state->cplco[i][j] =
+			    cplcomant * scale_factor[cplcoexp + mstrcplco];
+		    }
+		}
+	if ((state->acmod == 2) && state->phsflginu && cplcoe)
+	    for (j = 0; j < state->ncplbnd; j++)
+		if (bitstream_get (state, 1))	/* phsflg */
+		    state->cplco[1][j] = -state->cplco[1][j];
+    }
+
+    if ((state->acmod == 2) && (bitstream_get (state, 1))) {	/* rematstr */
+	int end;
+
+	state->rematflg = 0;
+	end = (state->chincpl) ? state->cplstrtmant : 253;	/* cplinu */
+	i = 0;
+	do
+	    state->rematflg |= bitstream_get (state, 1) << i;
+	while (rematrix_band[i++] < end);
+    }
+
+    cplexpstr = EXP_REUSE;
+    lfeexpstr = EXP_REUSE;
+    if (state->chincpl)	/* cplinu */
+	cplexpstr = bitstream_get (state, 2);
+    for (i = 0; i < nfchans; i++)
+	chexpstr[i] = bitstream_get (state, 2);
+    if (state->lfeon) 
+	lfeexpstr = bitstream_get (state, 1);
+
+    for (i = 0; i < nfchans; i++)
+	if (chexpstr[i] != EXP_REUSE) {
+	    if ((state->chincpl >> i) & 1)
+		state->endmant[i] = state->cplstrtmant;
+	    else {
+		int chbwcod;
+
+		chbwcod = bitstream_get (state, 6);
+		if (chbwcod > 60)
+		    return 1;
+		state->endmant[i] = chbwcod * 3 + 73;
+	    }
+	}
+
+    do_bit_alloc = 0;
+
+    if (cplexpstr != EXP_REUSE) {
+	int cplabsexp, ncplgrps;
+
+	do_bit_alloc = 64;
+	ncplgrps = ((state->cplendmant - state->cplstrtmant) /
+		    (3 << (cplexpstr - 1)));
+	cplabsexp = bitstream_get (state, 4) << 1;
+	if (parse_exponents (state, cplexpstr, ncplgrps, cplabsexp,
+			     state->cpl_expbap.exp + state->cplstrtmant))
+	    return 1;
+    }
+    for (i = 0; i < nfchans; i++)
+	if (chexpstr[i] != EXP_REUSE) {
+	    int grp_size, nchgrps;
+
+	    do_bit_alloc |= 1 << i;
+	    grp_size = 3 << (chexpstr[i] - 1);
+	    nchgrps = (state->endmant[i] + grp_size - 4) / grp_size;
+	    state->fbw_expbap[i].exp[0] = bitstream_get (state, 4);
+	    if (parse_exponents (state, chexpstr[i], nchgrps,
+				 state->fbw_expbap[i].exp[0],
+				 state->fbw_expbap[i].exp + 1))
+		return 1;
+	    bitstream_get (state, 2);	/* gainrng */
+	}
+    if (lfeexpstr != EXP_REUSE) {
+	do_bit_alloc |= 32;
+	state->lfe_expbap.exp[0] = bitstream_get (state, 4);
+	if (parse_exponents (state, lfeexpstr, 2, state->lfe_expbap.exp[0],
+			     state->lfe_expbap.exp + 1))
+	    return 1;
+    }
+
+    if (bitstream_get (state, 1)) {	/* baie */
+	do_bit_alloc = -1;
+	state->bai = bitstream_get (state, 11);
+    }
+    if (bitstream_get (state, 1)) {	/* snroffste */
+	do_bit_alloc = -1;
+	state->csnroffst = bitstream_get (state, 6);
+	if (state->chincpl)	/* cplinu */
+	    state->cplba.bai = bitstream_get (state, 7);
+	for (i = 0; i < nfchans; i++)
+	    state->ba[i].bai = bitstream_get (state, 7);
+	if (state->lfeon)
+	    state->lfeba.bai = bitstream_get (state, 7);
+    }
+    if ((state->chincpl) && (bitstream_get (state, 1))) { /* cplleake */
+	do_bit_alloc |= 64;
+	state->cplfleak = 9 - bitstream_get (state, 3);
+	state->cplsleak = 9 - bitstream_get (state, 3);
+    }
+
+    if (bitstream_get (state, 1)) {	/* deltbaie */
+	do_bit_alloc = -1;
+	if (state->chincpl)	/* cplinu */
+	    state->cplba.deltbae = bitstream_get (state, 2);
+	for (i = 0; i < nfchans; i++)
+	    state->ba[i].deltbae = bitstream_get (state, 2);
+	if (state->chincpl &&	/* cplinu */
+	    (state->cplba.deltbae == DELTA_BIT_NEW) &&
+	    parse_deltba (state, state->cplba.deltba))
+	    return 1;
+	for (i = 0; i < nfchans; i++)
+	    if ((state->ba[i].deltbae == DELTA_BIT_NEW) &&
+		parse_deltba (state, state->ba[i].deltba))
+		return 1;
+    }
+
+    if (do_bit_alloc) {
+	if (zero_snr_offsets (nfchans, state)) {
+	    memset (state->cpl_expbap.bap, 0, sizeof (state->cpl_expbap.bap));
+	    for (i = 0; i < nfchans; i++)
+		memset (state->fbw_expbap[i].bap, 0,
+			sizeof (state->fbw_expbap[i].bap));
+	    memset (state->lfe_expbap.bap, 0, sizeof (state->lfe_expbap.bap));
+	} else {
+	    if (state->chincpl && (do_bit_alloc & 64))	/* cplinu */
+		a52_bit_allocate (state, &state->cplba, state->cplstrtbnd,
+				  state->cplstrtmant, state->cplendmant,
+				  state->cplfleak << 8, state->cplsleak << 8,
+				  &state->cpl_expbap);
+	    for (i = 0; i < nfchans; i++)
+		if (do_bit_alloc & (1 << i))
+		    a52_bit_allocate (state, state->ba + i, 0, 0,
+				      state->endmant[i], 0, 0,
+				      state->fbw_expbap +i);
+	    if (state->lfeon && (do_bit_alloc & 32)) {
+		state->lfeba.deltbae = DELTA_BIT_NONE;
+		a52_bit_allocate (state, &state->lfeba, 0, 0, 7, 0, 0,
+				  &state->lfe_expbap);
+	    }
+	}
+    }
+
+    if (bitstream_get (state, 1)) {	/* skiple */
+	i = bitstream_get (state, 9);	/* skipl */
+	while (i--)
+	    bitstream_get (state, 8);
+    }
+
+    samples = state->samples;
+    if (state->output & A52_LFE)
+	samples += 256;	/* shift for LFE channel */
+
+    chanbias = a52_downmix_coeff (coeff, state->acmod, state->output,
+				  state->dynrng, state->clev, state->slev);
+
+    quantizer.q1_ptr = quantizer.q2_ptr = quantizer.q4_ptr = -1;
+    done_cpl = 0;
+
+    for (i = 0; i < nfchans; i++) {
+	int j;
+
+	coeff_get (state, samples + 256 * i, state->fbw_expbap +i, &quantizer,
+		   coeff[i], dithflag[i], state->endmant[i]);
+
+	if ((state->chincpl >> i) & 1) {
+	    if (!done_cpl) {
+		done_cpl = 1;
+		coeff_get_coupling (state, nfchans, coeff,
+				    (sample_t (*)[256])samples, &quantizer,
+				    dithflag);
+	    }
+	    j = state->cplendmant;
+	} else
+	    j = state->endmant[i];
+	do
+	    (samples + 256 * i)[j] = 0;
+	while (++j < 256);
+    }
+
+    if (state->acmod == 2) {
+	int j, end, band, rematflg;
+
+	end = ((state->endmant[0] < state->endmant[1]) ?
+	       state->endmant[0] : state->endmant[1]);
+
+	i = 0;
+	j = 13;
+	rematflg = state->rematflg;
+	do {
+	    if (! (rematflg & 1)) {
+		rematflg >>= 1;
+		j = rematrix_band[i++];
+		continue;
+	    }
+	    rematflg >>= 1;
+	    band = rematrix_band[i++];
+	    if (band > end)
+		band = end;
+	    do {
+		sample_t tmp0, tmp1;
+
+		tmp0 = samples[j];
+		tmp1 = (samples+256)[j];
+		samples[j] = tmp0 + tmp1;
+		(samples+256)[j] = tmp0 - tmp1;
+	    } while (++j < band);
+	} while (j < end);
+    }
+
+    if (state->lfeon) {
+	if (state->output & A52_LFE) {
+	    coeff_get (state, samples - 256, &state->lfe_expbap, &quantizer,
+		       state->dynrng, 0, 7);
+	    for (i = 7; i < 256; i++)
+		(samples-256)[i] = 0;
+	    a52_imdct_512 (samples - 256, samples + 1536 - 256, state->bias);
+	} else {
+	    /* just skip the LFE coefficients */
+	    coeff_get (state, samples + 1280, &state->lfe_expbap, &quantizer,
+		       0, 0, 7);
+	}
+    }
+
+    i = 0;
+    if (nfchans_tbl[state->output & A52_CHANNEL_MASK] < nfchans)
+	for (i = 1; i < nfchans; i++)
+	    if (blksw[i] != blksw[0])
+		break;
+
+    if (i < nfchans) {
+	if (state->downmixed) {
+	    state->downmixed = 0;
+	    a52_upmix (samples + 1536, state->acmod, state->output);
+	}
+
+	for (i = 0; i < nfchans; i++) {
+	    sample_t bias;
+
+	    bias = 0;
+	    if (!(chanbias & (1 << i)))
+		bias = state->bias;
+
+	    if (coeff[i]) {
+		if (blksw[i])
+		    a52_imdct_256 (samples + 256 * i, samples + 1536 + 256 * i,
+				   bias);
+		else 
+		    a52_imdct_512 (samples + 256 * i, samples + 1536 + 256 * i,
+				   bias);
+	    } else {
+		int j;
+
+		for (j = 0; j < 256; j++)
+		    (samples + 256 * i)[j] = bias;
+	    }
+	}
+
+	a52_downmix (samples, state->acmod, state->output, state->bias,
+		     state->clev, state->slev);
+    } else {
+	nfchans = nfchans_tbl[state->output & A52_CHANNEL_MASK];
+
+	a52_downmix (samples, state->acmod, state->output, 0,
+		     state->clev, state->slev);
+
+	if (!state->downmixed) {
+	    state->downmixed = 1;
+	    a52_downmix (samples + 1536, state->acmod, state->output, 0,
+			 state->clev, state->slev);
+	}
+
+	if (blksw[0])
+	    for (i = 0; i < nfchans; i++)
+		a52_imdct_256 (samples + 256 * i, samples + 1536 + 256 * i,
+			       state->bias);
+	else 
+	    for (i = 0; i < nfchans; i++)
+		a52_imdct_512 (samples + 256 * i, samples + 1536 + 256 * i,
+			       state->bias);
+    }
+
+    return 0;
+}
+
+void a52_free (a52_state_t * state)
+{
+    free (state->samples);
+    free (state);
+}

Copied: branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/tables.h (from rev 3841, branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/tables.h)
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_liba52/tables.h	2008-03-07 06:54:27 UTC (rev 3841)
+++ branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/tables.h	2008-03-07 18:34:14 UTC (rev 3843)
@@ -0,0 +1,246 @@
+/*
+ * tables.h
+ * Copyright (C) 2000-2002 Michel Lespinasse <walken at zoy.org>
+ * Copyright (C) 1999-2000 Aaron Holtzman <aholtzma at ess.engr.uvic.ca>
+ *
+ * This file is part of a52dec, a free ATSC A-52 stream decoder.
+ * See http://liba52.sourceforge.net/ for updates.
+ *
+ * a52dec is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License as published by
+ * the Free Software Foundation; either version 2 of the License, or
+ * (at your option) any later version.
+ *
+ * a52dec is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ *
+ * You should have received a copy of the GNU General Public License
+ * along with this program; if not, write to the Free Software
+ * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+ */
+
+static const int8_t exp_1[128] = {
+    -2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,
+    -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,
+     0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
+     1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
+     2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2,
+    25,25,25
+};
+static const int8_t exp_2[128] = {
+    -2,-2,-2,-2,-2,-1,-1,-1,-1,-1, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2,
+    -2,-2,-2,-2,-2,-1,-1,-1,-1,-1, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2,
+    -2,-2,-2,-2,-2,-1,-1,-1,-1,-1, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2,
+    -2,-2,-2,-2,-2,-1,-1,-1,-1,-1, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2,
+    -2,-2,-2,-2,-2,-1,-1,-1,-1,-1, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2,
+    25,25,25
+};
+static const int8_t exp_3[128] = {
+    -2,-1, 0, 1, 2,-2,-1, 0, 1, 2,-2,-1, 0, 1, 2,-2,-1, 0, 1, 2,-2,-1, 0, 1, 2,
+    -2,-1, 0, 1, 2,-2,-1, 0, 1, 2,-2,-1, 0, 1, 2,-2,-1, 0, 1, 2,-2,-1, 0, 1, 2,
+    -2,-1, 0, 1, 2,-2,-1, 0, 1, 2,-2,-1, 0, 1, 2,-2,-1, 0, 1, 2,-2,-1, 0, 1, 2,
+    -2,-1, 0, 1, 2,-2,-1, 0, 1, 2,-2,-1, 0, 1, 2,-2,-1, 0, 1, 2,-2,-1, 0, 1, 2,
+    -2,-1, 0, 1, 2,-2,-1, 0, 1, 2,-2,-1, 0, 1, 2,-2,-1, 0, 1, 2,-2,-1, 0, 1, 2,
+    25,25,25
+};
+
+#define Q0 ((-2 << 15) / 3.0)
+#define Q1 (0)
+#define Q2 ((2 << 15) / 3.0)
+
+static const sample_t q_1_0[32] = {
+    Q0,Q0,Q0,Q0,Q0,Q0,Q0,Q0,Q0,
+    Q1,Q1,Q1,Q1,Q1,Q1,Q1,Q1,Q1,
+    Q2,Q2,Q2,Q2,Q2,Q2,Q2,Q2,Q2,
+    0,0,0,0,0
+};
+
+static const sample_t q_1_1[32] = {
+    Q0,Q0,Q0,Q1,Q1,Q1,Q2,Q2,Q2,
+    Q0,Q0,Q0,Q1,Q1,Q1,Q2,Q2,Q2,
+    Q0,Q0,Q0,Q1,Q1,Q1,Q2,Q2,Q2,
+    0,0,0,0,0
+};
+
+static const sample_t q_1_2[32] = {
+    Q0,Q1,Q2,Q0,Q1,Q2,Q0,Q1,Q2,
+    Q0,Q1,Q2,Q0,Q1,Q2,Q0,Q1,Q2,
+    Q0,Q1,Q2,Q0,Q1,Q2,Q0,Q1,Q2,
+    0,0,0,0,0
+};
+
+#undef Q0
+#undef Q1
+#undef Q2
+
+#define Q0 ((-4 << 15) / 5.0)
+#define Q1 ((-2 << 15) / 5.0)
+#define Q2 (0)
+#define Q3 ((2 << 15) / 5.0)
+#define Q4 ((4 << 15) / 5.0)
+
+static const sample_t q_2_0[128] = {
+    Q0,Q0,Q0,Q0,Q0,Q0,Q0,Q0,Q0,Q0,Q0,Q0,Q0,Q0,Q0,Q0,Q0,Q0,Q0,Q0,Q0,Q0,Q0,Q0,Q0,
+    Q1,Q1,Q1,Q1,Q1,Q1,Q1,Q1,Q1,Q1,Q1,Q1,Q1,Q1,Q1,Q1,Q1,Q1,Q1,Q1,Q1,Q1,Q1,Q1,Q1,
+    Q2,Q2,Q2,Q2,Q2,Q2,Q2,Q2,Q2,Q2,Q2,Q2,Q2,Q2,Q2,Q2,Q2,Q2,Q2,Q2,Q2,Q2,Q2,Q2,Q2,
+    Q3,Q3,Q3,Q3,Q3,Q3,Q3,Q3,Q3,Q3,Q3,Q3,Q3,Q3,Q3,Q3,Q3,Q3,Q3,Q3,Q3,Q3,Q3,Q3,Q3,
+    Q4,Q4,Q4,Q4,Q4,Q4,Q4,Q4,Q4,Q4,Q4,Q4,Q4,Q4,Q4,Q4,Q4,Q4,Q4,Q4,Q4,Q4,Q4,Q4,Q4,
+    0,0,0
+};
+
+static const sample_t q_2_1[128] = {
+    Q0,Q0,Q0,Q0,Q0,Q1,Q1,Q1,Q1,Q1,Q2,Q2,Q2,Q2,Q2,Q3,Q3,Q3,Q3,Q3,Q4,Q4,Q4,Q4,Q4,
+    Q0,Q0,Q0,Q0,Q0,Q1,Q1,Q1,Q1,Q1,Q2,Q2,Q2,Q2,Q2,Q3,Q3,Q3,Q3,Q3,Q4,Q4,Q4,Q4,Q4,
+    Q0,Q0,Q0,Q0,Q0,Q1,Q1,Q1,Q1,Q1,Q2,Q2,Q2,Q2,Q2,Q3,Q3,Q3,Q3,Q3,Q4,Q4,Q4,Q4,Q4,
+    Q0,Q0,Q0,Q0,Q0,Q1,Q1,Q1,Q1,Q1,Q2,Q2,Q2,Q2,Q2,Q3,Q3,Q3,Q3,Q3,Q4,Q4,Q4,Q4,Q4,
+    Q0,Q0,Q0,Q0,Q0,Q1,Q1,Q1,Q1,Q1,Q2,Q2,Q2,Q2,Q2,Q3,Q3,Q3,Q3,Q3,Q4,Q4,Q4,Q4,Q4,
+    0,0,0
+};
+
+static const sample_t q_2_2[128] = {
+    Q0,Q1,Q2,Q3,Q4,Q0,Q1,Q2,Q3,Q4,Q0,Q1,Q2,Q3,Q4,Q0,Q1,Q2,Q3,Q4,Q0,Q1,Q2,Q3,Q4,
+    Q0,Q1,Q2,Q3,Q4,Q0,Q1,Q2,Q3,Q4,Q0,Q1,Q2,Q3,Q4,Q0,Q1,Q2,Q3,Q4,Q0,Q1,Q2,Q3,Q4,
+    Q0,Q1,Q2,Q3,Q4,Q0,Q1,Q2,Q3,Q4,Q0,Q1,Q2,Q3,Q4,Q0,Q1,Q2,Q3,Q4,Q0,Q1,Q2,Q3,Q4,
+    Q0,Q1,Q2,Q3,Q4,Q0,Q1,Q2,Q3,Q4,Q0,Q1,Q2,Q3,Q4,Q0,Q1,Q2,Q3,Q4,Q0,Q1,Q2,Q3,Q4,
+    Q0,Q1,Q2,Q3,Q4,Q0,Q1,Q2,Q3,Q4,Q0,Q1,Q2,Q3,Q4,Q0,Q1,Q2,Q3,Q4,Q0,Q1,Q2,Q3,Q4,
+    0,0,0
+};
+
+#undef Q0
+#undef Q1
+#undef Q2
+#undef Q3
+#undef Q4
+
+static const sample_t q_3[8] = {
+    (-6 << 15)/7.0, (-4 << 15)/7.0, (-2 << 15)/7.0, 0,
+    ( 2 << 15)/7.0, ( 4 << 15)/7.0, ( 6 << 15)/7.0, 0
+};
+
+#define Q0 ((-10 << 15) / 11.0)
+#define Q1 ((-8 << 15) / 11.0)
+#define Q2 ((-6 << 15) / 11.0)
+#define Q3 ((-4 << 15) / 11.0)
+#define Q4 ((-2 << 15) / 11.0)
+#define Q5 (0)
+#define Q6 ((2 << 15) / 11.0)
+#define Q7 ((4 << 15) / 11.0)
+#define Q8 ((6 << 15) / 11.0)
+#define Q9 ((8 << 15) / 11.0)
+#define QA ((10 << 15) / 11.0)
+
+static const sample_t q_4_0[128] = {
+    Q0, Q0, Q0, Q0, Q0, Q0, Q0, Q0, Q0, Q0, Q0,
+    Q1, Q1, Q1, Q1, Q1, Q1, Q1, Q1, Q1, Q1, Q1,
+    Q2, Q2, Q2, Q2, Q2, Q2, Q2, Q2, Q2, Q2, Q2,
+    Q3, Q3, Q3, Q3, Q3, Q3, Q3, Q3, Q3, Q3, Q3,
+    Q4, Q4, Q4, Q4, Q4, Q4, Q4, Q4, Q4, Q4, Q4,
+    Q5, Q5, Q5, Q5, Q5, Q5, Q5, Q5, Q5, Q5, Q5,
+    Q6, Q6, Q6, Q6, Q6, Q6, Q6, Q6, Q6, Q6, Q6,
+    Q7, Q7, Q7, Q7, Q7, Q7, Q7, Q7, Q7, Q7, Q7,
+    Q8, Q8, Q8, Q8, Q8, Q8, Q8, Q8, Q8, Q8, Q8,
+    Q9, Q9, Q9, Q9, Q9, Q9, Q9, Q9, Q9, Q9, Q9,
+    QA, QA, QA, QA, QA, QA, QA, QA, QA, QA, QA,
+    0,  0,  0,  0,  0,  0,  0
+};
+
+static const sample_t q_4_1[128] = {
+    Q0, Q1, Q2, Q3, Q4, Q5, Q6, Q7, Q8, Q9, QA,
+    Q0, Q1, Q2, Q3, Q4, Q5, Q6, Q7, Q8, Q9, QA,
+    Q0, Q1, Q2, Q3, Q4, Q5, Q6, Q7, Q8, Q9, QA,
+    Q0, Q1, Q2, Q3, Q4, Q5, Q6, Q7, Q8, Q9, QA,
+    Q0, Q1, Q2, Q3, Q4, Q5, Q6, Q7, Q8, Q9, QA,
+    Q0, Q1, Q2, Q3, Q4, Q5, Q6, Q7, Q8, Q9, QA,
+    Q0, Q1, Q2, Q3, Q4, Q5, Q6, Q7, Q8, Q9, QA,
+    Q0, Q1, Q2, Q3, Q4, Q5, Q6, Q7, Q8, Q9, QA,
+    Q0, Q1, Q2, Q3, Q4, Q5, Q6, Q7, Q8, Q9, QA,
+    Q0, Q1, Q2, Q3, Q4, Q5, Q6, Q7, Q8, Q9, QA,
+    Q0, Q1, Q2, Q3, Q4, Q5, Q6, Q7, Q8, Q9, QA,
+    0,  0,  0,  0,  0,  0,  0
+};
+
+#undef Q0
+#undef Q1
+#undef Q2
+#undef Q3
+#undef Q4
+#undef Q5
+#undef Q6
+#undef Q7
+#undef Q8
+#undef Q9
+#undef QA
+
+static const sample_t q_5[16] = {
+    (-14 << 15)/15.0,(-12 << 15)/15.0,(-10 << 15)/15.0,
+    ( -8 << 15)/15.0,( -6 << 15)/15.0,( -4 << 15)/15.0,
+    ( -2 << 15)/15.0,   0            ,(  2 << 15)/15.0,
+    (  4 << 15)/15.0,(  6 << 15)/15.0,(  8 << 15)/15.0,
+    ( 10 << 15)/15.0,( 12 << 15)/15.0,( 14 << 15)/15.0,
+    0
+};
+
+static const sample_t scale_factor[25] = {
+    0.000030517578125,
+    0.0000152587890625,
+    0.00000762939453125,
+    0.000003814697265625,
+    0.0000019073486328125,
+    0.00000095367431640625,
+    0.000000476837158203125,
+    0.0000002384185791015625,
+    0.00000011920928955078125,
+    0.000000059604644775390625,
+    0.0000000298023223876953125,
+    0.00000001490116119384765625,
+    0.000000007450580596923828125,
+    0.0000000037252902984619140625,
+    0.00000000186264514923095703125,
+    0.000000000931322574615478515625,
+    0.0000000004656612873077392578125,
+    0.00000000023283064365386962890625,
+    0.000000000116415321826934814453125,
+    0.0000000000582076609134674072265625,
+    0.00000000002910383045673370361328125,
+    0.000000000014551915228366851806640625,
+    0.0000000000072759576141834259033203125,
+    0.00000000000363797880709171295166015625,
+    0.000000000001818989403545856475830078125
+};
+
+static const uint16_t dither_lut[256] = {
+    0x0000, 0xa011, 0xe033, 0x4022, 0x6077, 0xc066, 0x8044, 0x2055,
+    0xc0ee, 0x60ff, 0x20dd, 0x80cc, 0xa099, 0x0088, 0x40aa, 0xe0bb,
+    0x21cd, 0x81dc, 0xc1fe, 0x61ef, 0x41ba, 0xe1ab, 0xa189, 0x0198,
+    0xe123, 0x4132, 0x0110, 0xa101, 0x8154, 0x2145, 0x6167, 0xc176,
+    0x439a, 0xe38b, 0xa3a9, 0x03b8, 0x23ed, 0x83fc, 0xc3de, 0x63cf,
+    0x8374, 0x2365, 0x6347, 0xc356, 0xe303, 0x4312, 0x0330, 0xa321,
+    0x6257, 0xc246, 0x8264, 0x2275, 0x0220, 0xa231, 0xe213, 0x4202,
+    0xa2b9, 0x02a8, 0x428a, 0xe29b, 0xc2ce, 0x62df, 0x22fd, 0x82ec,
+    0x8734, 0x2725, 0x6707, 0xc716, 0xe743, 0x4752, 0x0770, 0xa761,
+    0x47da, 0xe7cb, 0xa7e9, 0x07f8, 0x27ad, 0x87bc, 0xc79e, 0x678f,
+    0xa6f9, 0x06e8, 0x46ca, 0xe6db, 0xc68e, 0x669f, 0x26bd, 0x86ac,
+    0x6617, 0xc606, 0x8624, 0x2635, 0x0660, 0xa671, 0xe653, 0x4642,
+    0xc4ae, 0x64bf, 0x249d, 0x848c, 0xa4d9, 0x04c8, 0x44ea, 0xe4fb,
+    0x0440, 0xa451, 0xe473, 0x4462, 0x6437, 0xc426, 0x8404, 0x2415,
+    0xe563, 0x4572, 0x0550, 0xa541, 0x8514, 0x2505, 0x6527, 0xc536,
+    0x258d, 0x859c, 0xc5be, 0x65af, 0x45fa, 0xe5eb, 0xa5c9, 0x05d8,
+    0xae79, 0x0e68, 0x4e4a, 0xee5b, 0xce0e, 0x6e1f, 0x2e3d, 0x8e2c,
+    0x6e97, 0xce86, 0x8ea4, 0x2eb5, 0x0ee0, 0xaef1, 0xeed3, 0x4ec2,
+    0x8fb4, 0x2fa5, 0x6f87, 0xcf96, 0xefc3, 0x4fd2, 0x0ff0, 0xafe1,
+    0x4f5a, 0xef4b, 0xaf69, 0x0f78, 0x2f2d, 0x8f3c, 0xcf1e, 0x6f0f,
+    0xede3, 0x4df2, 0x0dd0, 0xadc1, 0x8d94, 0x2d85, 0x6da7, 0xcdb6,
+    0x2d0d, 0x8d1c, 0xcd3e, 0x6d2f, 0x4d7a, 0xed6b, 0xad49, 0x0d58,
+    0xcc2e, 0x6c3f, 0x2c1d, 0x8c0c, 0xac59, 0x0c48, 0x4c6a, 0xec7b,
+    0x0cc0, 0xacd1, 0xecf3, 0x4ce2, 0x6cb7, 0xcca6, 0x8c84, 0x2c95,
+    0x294d, 0x895c, 0xc97e, 0x696f, 0x493a, 0xe92b, 0xa909, 0x0918,
+    0xe9a3, 0x49b2, 0x0990, 0xa981, 0x89d4, 0x29c5, 0x69e7, 0xc9f6,
+    0x0880, 0xa891, 0xe8b3, 0x48a2, 0x68f7, 0xc8e6, 0x88c4, 0x28d5,
+    0xc86e, 0x687f, 0x285d, 0x884c, 0xa819, 0x0808, 0x482a, 0xe83b,
+    0x6ad7, 0xcac6, 0x8ae4, 0x2af5, 0x0aa0, 0xaab1, 0xea93, 0x4a82,
+    0xaa39, 0x0a28, 0x4a0a, 0xea1b, 0xca4e, 0x6a5f, 0x2a7d, 0x8a6c,
+    0x4b1a, 0xeb0b, 0xab29, 0x0b38, 0x2b6d, 0x8b7c, 0xcb5e, 0x6b4f,
+    0x8bf4, 0x2be5, 0x6bc7, 0xcbd6, 0xeb83, 0x4b92, 0x0bb0, 0xaba1
+};

Added: branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/CMakeLists.txt	2008-03-07 11:18:41 UTC (rev 3842)
+++ branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/CMakeLists.txt	2008-03-07 18:34:14 UTC (rev 3843)
@@ -0,0 +1,17 @@
+##
+##
+##
+
+subdirs(PREORDER ADM_liba52)
+
+
+
+include_directories(../../)
+include_directories(../../../ADM_audiocodec)
+include_directories(ADM_liba52)
+
+SET(ADM_ad_a52_SRCS         ADM_ad_a52.cpp )
+
+ADD_LIBRARY(ADM_ad_a52 SHARED ${ADM_ad_a52_SRCS})
+TARGET_LINK_LIBRARIES(ADM_ad_a52 ADM_liba52)
+

Modified: branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/ADM_ad_mad.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/ADM_ad_mad.cpp	2008-03-07 11:18:41 UTC (rev 3842)
+++ branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/ADM_ad_mad.cpp	2008-03-07 18:34:14 UTC (rev 3843)
@@ -37,7 +37,7 @@
 		void *_synth;
 
 	public:
-		ADM_AudiocodecMP3(uint32_t fourcc);
+		ADM_AudiocodecMP3(uint32_t fourcc,WAVHeader *info,uint32_t extraLength,uint8_t *extraData);
 		virtual	~ADM_AudiocodecMP3() ;
 		virtual	uint8_t beginDecompress(void);
 		virtual	uint8_t endDecompress(void);
@@ -45,49 +45,19 @@
 		virtual	uint8_t isCompressed(void) {return 1;}
 		virtual	uint8_t isDecompressable(void) {return 1;}
 };
+// Supported formats + declare our plugin
+//*******************************************************
+uint32_t Formats[]={WAV_MP3,WAV_MP2};
+DECLARE_AUDIO_DECODER(ADM_AudiocodecMP3,						// Class
+			0,0,1, 												// Major, minor,patch 
+			Formats, 											// Supported formats
+			"LibMad decoder plugin for avidemux (c) Mean\n"); 	// Desc
 //********************************************************
-extern "C" { 
-ADM_Audiocodec *create(uint32_t fourcc,	WAVHeader *info,uint32_t extraLength,uint8_t *extraData) 
-{ 
-	return new ADM_AudiocodecMP3(fourcc);
-}
-ADM_Audiocodec *destroy(ADM_Audiocodec *codec) 
-{ 
-	ADM_AudiocodecMP3 *a=(ADM_AudiocodecMP3 *)codec;
-	delete a;
-}
-bool supportedFormat(uint32_t audioFourcc) 
-{ 
-	switch(audioFourcc)
-	{
-	case WAV_MP2:
-	case WAV_MP3: return true;
-	default:
-		return false;
-	}
-}
-uint32_t getApiVersion(void)
-{
-		return AD_API_VERSION;
-}
 
-bool getDecoderVersion(uint32_t *major,uint32_t *minor, uint32_t *patch)
+ADM_AudiocodecMP3::ADM_AudiocodecMP3( uint32_t fourcc,WAVHeader *info,uint32_t extraLength,uint8_t *extraData) :   ADM_Audiocodec(fourcc)
 {
-	*major=*minor=0;
-	*patch=1;
-	return true;
-}
-const char *getInfo(void)
-{
-	return "LibMad decoder plugin for avidemux (c) Mean\n";
-}
-}
-//********************************************************
-
-ADM_AudiocodecMP3::ADM_AudiocodecMP3( uint32_t fourcc) :   ADM_Audiocodec(fourcc)
-{
         if((fourcc!=WAV_MP3) && (fourcc!=WAV_MP2))
-            ADM_assert(0);
+            ADM_assert(0); 
         if(fourcc==WAV_MP2) printf("Mpeg1/2 audio codec created\n");
         _stream=(void *)ADM_alloc(sizeof( mad_stream));
         _frame=(void *)ADM_alloc(sizeof( mad_frame));

Modified: branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/CMakeLists.txt	2008-03-07 11:18:41 UTC (rev 3842)
+++ branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/CMakeLists.txt	2008-03-07 18:34:14 UTC (rev 3843)
@@ -1 +1,2 @@
+subdirs(PREORDER ADM_ad_ac3)
 subdirs(PREORDER ADM_ad_mad)



From mean at mail.berlios.de  Fri Mar  7 19:34:17 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 7 Mar 2008 19:34:17 +0100
Subject: [Avidemux-svn-commit] r3844 - in
	branches/avidemux_2.5_branch_mean/avidemux: ADM_audiocodec
	plugins/ADM_audiodecoder plugins/ADM_audiodecoder/ADM_ad_faad
	plugins/ADM_audiodecoder/ADM_ad_vorbis
Message-ID: <200803071834.m27IYHcR000421@sheep.berlios.de>

Author: mean
Date: 2008-03-07 19:34:16 +0100 (Fri, 07 Mar 2008)
New Revision: 3844

Added:
   branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/
   branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/ADM_ad_faad.cpp
   branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_vorbis/
   branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_vorbis/ADM_ad_vorbis.cpp
   branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_vorbis/ADM_ad_vorbis.h
   branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_vorbis/CMakeLists.txt
Removed:
   branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_codecfaad.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_vorbis.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/audiocodec_ogg.cpp
Log:
[AudioPlugin] vorbis


Deleted: branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_codecfaad.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_codecfaad.cpp	2008-03-07 18:34:14 UTC (rev 3843)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_codecfaad.cpp	2008-03-07 18:34:16 UTC (rev 3844)
@@ -1,205 +0,0 @@
-//
-// C++ Implementation: ADM_codecfaad
-//
-// Description: class ADM_faad, interface to libfaad2 .
-//
-// The init can be done 2 ways
-// 1- some info are used as extradata (esds atom ot whatever) 
-// 2- the init is done when decoding the actual raw stream
-//
-// The big drawback if that in some case you can eat up a lot of the stream
-// before finding a packet start code to enable correct init of the codec
-//
-// Author: mean <fixounet at free.fr>, (C) 2004
-//
-// Copyright: See COPYING file that comes with this distribution
-//
-//
-#include "config.h"
-#ifdef USE_FAAD
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <ADM_assert.h>
-#include <math.h>
-
-#include "fourcc.h"
-#include "ADM_audio/aviaudio.hxx"
-#include "ADM_audiocodec/ADM_audiocodec.h"
-#include "ADM_audiofilter/audiofilter_channel_route.h"
-#include "faad.h"
-
-
-ADM_faad::ADM_faad( uint32_t fourcc ,uint32_t highEfficiency,WAVHeader *info,uint32_t l,uint8_t *d) :   ADM_Audiocodec(fourcc)
-{
-faacDecConfigurationPtr conf;
-#ifdef OLD_FAAD_PROTO
-unsigned long int srate;
-#else
-uint32_t srate;
-#endif
-unsigned char chan;
-		_inited=0;
-		_instance=NULL;
-		_inbuffer=0;
-		_instance = faacDecOpen();
-		conf=faacDecGetCurrentConfiguration(_instance);
-		// Update the field we know about
-		conf->outputFormat=FAAD_FMT_16BIT;
-		conf->defSampleRate=info->frequency;
-                if(!highEfficiency)
-                {
-		  conf->defObjectType =LC;
-                }else
-                {
-                   conf->defObjectType =HE_AAC;
-                }
-		faacDecSetConfiguration(_instance, conf);
-                printf("[FAAD] using %u bytes of extradata\n",l);
-		// if we have some extra data, it means we can init it from it
-		if(l)
-		{
-			_inited = 1;
-			faacDecInit2(_instance, d,l, &srate,&chan);
-			printf("[FAAD]Found :%d rate %d channels\n",srate,chan);
-                        if(srate!=info->frequency)
-                        {
-                            printf("[FAAD]Frequency mismatch!!! %d to %d (SBR ?)\n",info->frequency,srate);
-                            info->frequency=srate;
-                        }	
-                        if(chan!=info->channels) // Ask for stereo !
-                        {
-                             printf("[FAAD]channel mismatch!!! %d to %d \n",info->channels,chan);
-                            info->channels=chan;
-                        }
-		}
-		else // we will init it later on...
-		{
-			_inited=0;
-			printf("No conf header, will try to init later\n");
-			
-		}
-
-	ch_route.input_type[0] = CH_FRONT_CENTER;
-	ch_route.input_type[1] = CH_FRONT_LEFT;
-	ch_route.input_type[2] = CH_FRONT_RIGHT;
-	ch_route.input_type[3] = CH_REAR_LEFT;
-	ch_route.input_type[4] = CH_REAR_RIGHT;
-	ch_route.input_type[5] = CH_LFE;
-
-		printf("[FAAD]Faad decoder created\n");
-}
-
-ADM_faad::~ADM_faad()
-{
-	if(_instance)
-		faacDecClose(_instance);
-	_instance=NULL;
-	printf("Faad decoder closed\n");
-}
-
-void ADM_faad::purge(void)
-{
-	_inbuffer=0;
-	 faacDecPostSeekReset(_instance, 0);
-}
-uint8_t ADM_faad:: beginDecompress( void )
-{
-	_inbuffer=0;
-}
-uint8_t ADM_faad::endDecompress( void ) 
-{
-	_inbuffer=0;
-	 faacDecPostSeekReset(_instance, 0);
-}
-uint8_t ADM_faad::run(uint8_t *inptr, uint32_t nbIn, float *outptr, uint32_t *nbOut)
-{
-uint32_t xin;
-long int res;
-void *outbuf;
-faacDecFrameInfo info;
-int max=0;
-#ifdef OLD_FAAD_PROTO
-unsigned long int srate;
-#else
-uint32_t srate;
-#endif
-unsigned char chan=0;
-uint8_t first=0;
-
-
-		ADM_assert(_instance);
-		*nbOut=0;
-		if(!_inited) // we still have'nt initialized the codec
-		{
-			// Try
-			printf("Trying with %d bytes\n",nbIn);
-			res=faacDecInit(_instance,inptr,nbIn,&srate,&chan);
-			if(res>=0)
-			{
-				printf("Faad Inited : rate:%d chan:%d off:%ld\n",srate,chan,res);
-				_inited=1;
-				first=1;
-				_inbuffer=0;
-				inptr+=res;
-				nbIn-=res;
-				
-			}
-		}
-		if(!_inited)
-		{
-			printf("No dice...\n");
-			return 1;	
-		}
-		// The codec is initialized, feed him
-		do
-		{
-			max=FAAD_BUFFER-_inbuffer;
-			if(nbIn<max) max=nbIn;
-			memcpy(_buffer+_inbuffer,inptr,max);
-			inptr+=max;
-			nbIn-=max;
-			_inbuffer+=max;
-			/*
-			if(_inbuffer<FAAD_MIN_STREAMSIZE*2)
-			{
-				return 1;
-			}*/
-			memset(&info,0,sizeof(info));
-			//printf("%x %x\n",_buffer[0],_buffer[1]);
-		 	outbuf = faacDecDecode(_instance, &info, _buffer, _inbuffer);
-			if(info.error)
-			{
-				printf("Faad: Error %d :%s\n",info.error,
-					faacDecGetErrorMessage(info.error));
-				printf("Bye consumed %u, bytes dropped %u \n",info.bytesconsumed,_inbuffer);
-
-                                _inbuffer=0; // Purge buffer
-				return 1;
-			}
-			if(first)
-			{
-				printf("Channels : %d\n",info.channels);
-				printf("Frequency: %d\n",info.samplerate);
-				printf("SBR      : %d\n",info.sbr);
-				
-			
-			}
-			xin=info.bytesconsumed ;
-			if(xin>_inbuffer) xin=0;
-			
-			memmove(_buffer,_buffer+xin,_inbuffer-xin);
-			_inbuffer-=xin;
-			if(info.samples)
-			{
-				*nbOut+= info.samples;
-				int16_t *in = (int16_t *) outbuf;
-				for (int i = 0; i < info.samples; i++) {
-					*(outptr++) = (float)*in / 32768;
-					in++;
-				}
-			}
-		}while(nbIn);
-		return 1;
-}
-#endif

Deleted: branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_vorbis.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_vorbis.h	2008-03-07 18:34:14 UTC (rev 3843)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_vorbis.h	2008-03-07 18:34:16 UTC (rev 3844)
@@ -1,16 +0,0 @@
-
-
-typedef struct 
-{
-
- ogg_sync_state    osync;  // sync and verify incoming physical bitstream
- ogg_stream_state  ostream;  // take physical pages, weld into a logical stream of packets
- ogg_page          opage;  // one Ogg bitstream page. Vorbis packets are inside
- ogg_packet        opacket;  // one raw packet of data for decode
- vorbis_info       vinfo;  // struct that stores all the static vorbis bitstream settings
- vorbis_comment    vcomment;  // struct that stores all the bitstream user comments
- vorbis_dsp_state  vdsp;  // central working state for the packet->PCM decoder
- vorbis_block      vblock;  // local working space for packet->PCM decode
- float		   ampscale;
-
- }oggVorbis;

Deleted: branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/audiocodec_ogg.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/audiocodec_ogg.cpp	2008-03-07 18:34:14 UTC (rev 3843)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/audiocodec_ogg.cpp	2008-03-07 18:34:16 UTC (rev 3844)
@@ -1,207 +0,0 @@
-/***************************************************************************
-                          audiocodec_ogg.cpp  -  description
-                             -------------------
-    begin                : Thu May 23 2002
-    copyright            : (C) 2002 by mean
-    email                : fixounet at free.fr
-
-	Strongly inspired by mplayer ogg vorbis decoder
-	(ripp off should be more appropriate)
-	
-	We expect the first packet as extraData. It contains needed info such
-	as frequency/channels etc...
-	
-	How to deal with comment and codebook ?
-	Mmmmm
-    
- ***************************************************************************/
-
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-#include "config.h"
-
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <ADM_assert.h>
-#include <math.h>
-
-
-
-#include "fourcc.h"
-#include "ADM_audio/aviaudio.hxx"
-#include "ADM_audiocodec/ADM_audiocodec.h"
-#include "ADM_audiofilter/audiofilter_channel_route.h"
-
-#ifdef USE_VORBIS
-
-#include <vorbis/codec.h>
-#include "ADM_audiocodec/ADM_vorbis.h"
-#include "ADM_osSupport/ADM_debugID.h"
-#define MODULE_NAME MODULE_OGM_AUDIO
-#include "ADM_osSupport/ADM_debug.h"
-
-
- #define STRUCT ((oggVorbis *)_contextVoid)
- 
- ADM_vorbis::~ADM_vorbis()
- {
- 	oggVorbis *o;
-	o=(oggVorbis *)_contextVoid;
-	if(o) 
-	{
-		vorbis_block_clear(&o->vblock);
-		vorbis_info_clear(&o->vinfo);
-		delete o;
-	}
-	_contextVoid=NULL;
-	_init=0;
- 
- }
- 
- ADM_vorbis::ADM_vorbis(uint32_t fcc, WAVHeader *info, uint32_t extra, uint8_t *extraData)
- 	: ADM_Audiocodec(fcc)
- {
- ogg_packet packet;
- vorbis_comment comment;
- oggVorbis *vrbis;
- uint8_t *hdr,*cmt,*code;
- uint32_t size_hdr,size_cmt, size_code;
- uint32_t *ptr;
- 
- 	_init=0;
- 	printf("Trying to initialize vorbis codec with %lu bytes of header data\n",extra);
-	
-	vrbis=new oggVorbis;
- 	_contextVoid=(void *)vrbis;
-	
-	memset(vrbis,0,sizeof(oggVorbis));
-	
-	// init everything
-	vorbis_info_init(&STRUCT->vinfo);
-	vorbis_comment_init(&STRUCT->vcomment);
-	
-	// split extradata as header/comment/code
-	ptr=(uint32_t *)extraData;
-	size_hdr=*ptr++;
-	size_cmt=*ptr++;
-	size_code=*ptr++;
-	
-	hdr=extraData+3*sizeof(uint32_t);
-	cmt=hdr+size_hdr;
-	code=cmt+size_cmt;
-	
- 	// Feed header passed as extraData
-	packet.bytes=size_hdr;
-	packet.packet=hdr;
-	packet.b_o_s=1; // yes, it is a new stream	
-	if(0>vorbis_synthesis_headerin(&STRUCT->vinfo,&comment,&packet))
-	{
-		printf("Mmm something bad happened , cannot init 1st packet\n");
-		return;
-	}
-	// update some info in header this is the only place to get them
-	// especially frequency.
-/*
-	info->channels=STRUCT->vinfo.channels;
-	info->frequency=STRUCT->vinfo.rate;
-*/
-	info->byterate=STRUCT->vinfo.bitrate_nominal>>3;
-	
-	if(!info->byterate) 
-	{
-		printf("Mmm, no nominal bitrate...\n");
-		info->byterate=16000;
-	}
-	// now unpack comment
-	packet.bytes=size_cmt;
-	packet.packet=cmt;
-	packet.b_o_s=0; // Not new
-	if(0>vorbis_synthesis_headerin(&STRUCT->vinfo,&comment,&packet))
-	{
-		printf("Mmm something bad happened , cannot init 2st packet\n");
-		return;
-	}
-	// and codebook
-	packet.bytes=size_code;
-	packet.packet=code;
-	packet.b_o_s=0; // Not new
-	if(0>vorbis_synthesis_headerin(&STRUCT->vinfo,&comment,&packet))
-	{
-		printf("Mmm something bad happened , cannot init 3st packet\n");
-		return;
-	}
-	vorbis_comment_clear(&comment);
-	vorbis_synthesis_init(&STRUCT->vdsp,&STRUCT->vinfo);
-	vorbis_block_init(&STRUCT->vdsp,&STRUCT->vblock);
-	printf("Vorbis init successfull\n");
-	STRUCT->ampscale=1;
-	_init=1;
-
-	ch_route.input_type[0] = CH_FRONT_LEFT;
-	ch_route.input_type[1] = CH_FRONT_RIGHT;
-	ch_route.input_type[2] = CH_REAR_LEFT;
-	ch_route.input_type[3] = CH_REAR_RIGHT;
-	ch_route.input_type[4] = CH_FRONT_CENTER;
-	ch_route.input_type[5] = CH_LFE;
- }
- // This codec expects more or less one packet at a time !
- 
- uint8_t ADM_vorbis::run(uint8_t *inptr, uint32_t nbIn, float *outptr, uint32_t *nbOut)
-{
-ogg_packet packet;
-float **sample_pcm;
-int	nb_synth;
-
-	*nbOut=0;
-	if(!_init) return 0;
-	packet.b_o_s=0;
-	packet.e_o_s=0;
-	packet.bytes=nbIn;
-	packet.packet=inptr;
-        packet.granulepos=-1;
-	if(!vorbis_synthesis(&STRUCT->vblock,&packet))
-	{
-	      vorbis_synthesis_blockin(&STRUCT->vdsp,&STRUCT->vblock);
-	 }
-	 nb_synth=vorbis_synthesis_pcmout(&STRUCT->vdsp,&sample_pcm);
-	 if(nb_synth<0)
-	 {
-	 	printf("error decoding vorbis %d\n",nb_synth);
-		return 0;
-	 }
-	 
-	 for (uint32_t samp = 0; samp < nb_synth; samp++)
-	 	for (uint8_t chan = 0; chan < STRUCT->vinfo.channels; chan++)
-			*outptr++ = sample_pcm[chan][samp] * STRUCT->ampscale;
-
-	 *nbOut = STRUCT->vinfo.channels * nb_synth;
-
-	// Puge them
-	 vorbis_synthesis_read(&STRUCT->vdsp,nb_synth); 
-	 aprintf("This round : in %d bytes, out %d bytes synthetized:%d\n",nbIn,*nbOut,nb_synth);
-	return 1;
-	
-}	
-// Try to flush the buffer
-// unsuccessfully :(
-  uint8_t ADM_vorbis::endDecompress( void ) 
-  {
-  float **sample_pcm;
-  ogg_packet packet;
-  
-  	//vorbis_synthesis_blockin(&STRUCT->vdsp,&STRUCT->vblock);
-  	vorbis_synthesis_pcmout(&STRUCT->vdsp,&sample_pcm);
-        vorbis_synthesis_restart(&STRUCT->vdsp);
-  	return 1;
-  }
-#endif
-

Copied: branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/ADM_ad_faad.cpp (from rev 3843, branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_codecfaad.cpp)
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_codecfaad.cpp	2008-03-07 18:34:14 UTC (rev 3843)
+++ branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/ADM_ad_faad.cpp	2008-03-07 18:34:16 UTC (rev 3844)
@@ -0,0 +1,205 @@
+//
+// C++ Implementation: ADM_codecfaad
+//
+// Description: class ADM_faad, interface to libfaad2 .
+//
+// The init can be done 2 ways
+// 1- some info are used as extradata (esds atom ot whatever) 
+// 2- the init is done when decoding the actual raw stream
+//
+// The big drawback if that in some case you can eat up a lot of the stream
+// before finding a packet start code to enable correct init of the codec
+//
+// Author: mean <fixounet at free.fr>, (C) 2004
+//
+// Copyright: See COPYING file that comes with this distribution
+//
+//
+#include "config.h"
+#ifdef USE_FAAD
+#include <stdio.h>
+#include <stdlib.h>
+#include <string.h>
+#include <ADM_assert.h>
+#include <math.h>
+
+#include "fourcc.h"
+#include "ADM_audio/aviaudio.hxx"
+#include "ADM_audiocodec/ADM_audiocodec.h"
+#include "ADM_audiofilter/audiofilter_channel_route.h"
+#include "faad.h"
+
+
+ADM_faad::ADM_faad( uint32_t fourcc ,uint32_t highEfficiency,WAVHeader *info,uint32_t l,uint8_t *d) :   ADM_Audiocodec(fourcc)
+{
+faacDecConfigurationPtr conf;
+#ifdef OLD_FAAD_PROTO
+unsigned long int srate;
+#else
+uint32_t srate;
+#endif
+unsigned char chan;
+		_inited=0;
+		_instance=NULL;
+		_inbuffer=0;
+		_instance = faacDecOpen();
+		conf=faacDecGetCurrentConfiguration(_instance);
+		// Update the field we know about
+		conf->outputFormat=FAAD_FMT_16BIT;
+		conf->defSampleRate=info->frequency;
+                if(!highEfficiency)
+                {
+		  conf->defObjectType =LC;
+                }else
+                {
+                   conf->defObjectType =HE_AAC;
+                }
+		faacDecSetConfiguration(_instance, conf);
+                printf("[FAAD] using %u bytes of extradata\n",l);
+		// if we have some extra data, it means we can init it from it
+		if(l)
+		{
+			_inited = 1;
+			faacDecInit2(_instance, d,l, &srate,&chan);
+			printf("[FAAD]Found :%d rate %d channels\n",srate,chan);
+                        if(srate!=info->frequency)
+                        {
+                            printf("[FAAD]Frequency mismatch!!! %d to %d (SBR ?)\n",info->frequency,srate);
+                            info->frequency=srate;
+                        }	
+                        if(chan!=info->channels) // Ask for stereo !
+                        {
+                             printf("[FAAD]channel mismatch!!! %d to %d \n",info->channels,chan);
+                            info->channels=chan;
+                        }
+		}
+		else // we will init it later on...
+		{
+			_inited=0;
+			printf("No conf header, will try to init later\n");
+			
+		}
+
+	ch_route.input_type[0] = CH_FRONT_CENTER;
+	ch_route.input_type[1] = CH_FRONT_LEFT;
+	ch_route.input_type[2] = CH_FRONT_RIGHT;
+	ch_route.input_type[3] = CH_REAR_LEFT;
+	ch_route.input_type[4] = CH_REAR_RIGHT;
+	ch_route.input_type[5] = CH_LFE;
+
+		printf("[FAAD]Faad decoder created\n");
+}
+
+ADM_faad::~ADM_faad()
+{
+	if(_instance)
+		faacDecClose(_instance);
+	_instance=NULL;
+	printf("Faad decoder closed\n");
+}
+
+void ADM_faad::purge(void)
+{
+	_inbuffer=0;
+	 faacDecPostSeekReset(_instance, 0);
+}
+uint8_t ADM_faad:: beginDecompress( void )
+{
+	_inbuffer=0;
+}
+uint8_t ADM_faad::endDecompress( void ) 
+{
+	_inbuffer=0;
+	 faacDecPostSeekReset(_instance, 0);
+}
+uint8_t ADM_faad::run(uint8_t *inptr, uint32_t nbIn, float *outptr, uint32_t *nbOut)
+{
+uint32_t xin;
+long int res;
+void *outbuf;
+faacDecFrameInfo info;
+int max=0;
+#ifdef OLD_FAAD_PROTO
+unsigned long int srate;
+#else
+uint32_t srate;
+#endif
+unsigned char chan=0;
+uint8_t first=0;
+
+
+		ADM_assert(_instance);
+		*nbOut=0;
+		if(!_inited) // we still have'nt initialized the codec
+		{
+			// Try
+			printf("Trying with %d bytes\n",nbIn);
+			res=faacDecInit(_instance,inptr,nbIn,&srate,&chan);
+			if(res>=0)
+			{
+				printf("Faad Inited : rate:%d chan:%d off:%ld\n",srate,chan,res);
+				_inited=1;
+				first=1;
+				_inbuffer=0;
+				inptr+=res;
+				nbIn-=res;
+				
+			}
+		}
+		if(!_inited)
+		{
+			printf("No dice...\n");
+			return 1;	
+		}
+		// The codec is initialized, feed him
+		do
+		{
+			max=FAAD_BUFFER-_inbuffer;
+			if(nbIn<max) max=nbIn;
+			memcpy(_buffer+_inbuffer,inptr,max);
+			inptr+=max;
+			nbIn-=max;
+			_inbuffer+=max;
+			/*
+			if(_inbuffer<FAAD_MIN_STREAMSIZE*2)
+			{
+				return 1;
+			}*/
+			memset(&info,0,sizeof(info));
+			//printf("%x %x\n",_buffer[0],_buffer[1]);
+		 	outbuf = faacDecDecode(_instance, &info, _buffer, _inbuffer);
+			if(info.error)
+			{
+				printf("Faad: Error %d :%s\n",info.error,
+					faacDecGetErrorMessage(info.error));
+				printf("Bye consumed %u, bytes dropped %u \n",info.bytesconsumed,_inbuffer);
+
+                                _inbuffer=0; // Purge buffer
+				return 1;
+			}
+			if(first)
+			{
+				printf("Channels : %d\n",info.channels);
+				printf("Frequency: %d\n",info.samplerate);
+				printf("SBR      : %d\n",info.sbr);
+				
+			
+			}
+			xin=info.bytesconsumed ;
+			if(xin>_inbuffer) xin=0;
+			
+			memmove(_buffer,_buffer+xin,_inbuffer-xin);
+			_inbuffer-=xin;
+			if(info.samples)
+			{
+				*nbOut+= info.samples;
+				int16_t *in = (int16_t *) outbuf;
+				for (int i = 0; i < info.samples; i++) {
+					*(outptr++) = (float)*in / 32768;
+					in++;
+				}
+			}
+		}while(nbIn);
+		return 1;
+}
+#endif

Copied: branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_vorbis/ADM_ad_vorbis.cpp (from rev 3843, branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/audiocodec_ogg.cpp)
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/audiocodec_ogg.cpp	2008-03-07 18:34:14 UTC (rev 3843)
+++ branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_vorbis/ADM_ad_vorbis.cpp	2008-03-07 18:34:16 UTC (rev 3844)
@@ -0,0 +1,207 @@
+/***************************************************************************
+                          audiocodec_ogg.cpp  -  description
+                             -------------------
+    begin                : Thu May 23 2002
+    copyright            : (C) 2002 by mean
+    email                : fixounet at free.fr
+
+	Strongly inspired by mplayer ogg vorbis decoder
+	(ripp off should be more appropriate)
+	
+	We expect the first packet as extraData. It contains needed info such
+	as frequency/channels etc...
+	
+	How to deal with comment and codebook ?
+	Mmmmm
+    
+ ***************************************************************************/
+
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#include "config.h"
+
+#include <stdio.h>
+#include <stdlib.h>
+#include <string.h>
+#include <ADM_assert.h>
+#include <math.h>
+
+
+
+#include "fourcc.h"
+#include "ADM_audio/aviaudio.hxx"
+#include "ADM_audiocodec/ADM_audiocodec.h"
+#include "ADM_audiofilter/audiofilter_channel_route.h"
+
+#ifdef USE_VORBIS
+
+#include <vorbis/codec.h>
+#include "ADM_audiocodec/ADM_vorbis.h"
+#include "ADM_osSupport/ADM_debugID.h"
+#define MODULE_NAME MODULE_OGM_AUDIO
+#include "ADM_osSupport/ADM_debug.h"
+
+
+ #define STRUCT ((oggVorbis *)_contextVoid)
+ 
+ ADM_vorbis::~ADM_vorbis()
+ {
+ 	oggVorbis *o;
+	o=(oggVorbis *)_contextVoid;
+	if(o) 
+	{
+		vorbis_block_clear(&o->vblock);
+		vorbis_info_clear(&o->vinfo);
+		delete o;
+	}
+	_contextVoid=NULL;
+	_init=0;
+ 
+ }
+ 
+ ADM_vorbis::ADM_vorbis(uint32_t fcc, WAVHeader *info, uint32_t extra, uint8_t *extraData)
+ 	: ADM_Audiocodec(fcc)
+ {
+ ogg_packet packet;
+ vorbis_comment comment;
+ oggVorbis *vrbis;
+ uint8_t *hdr,*cmt,*code;
+ uint32_t size_hdr,size_cmt, size_code;
+ uint32_t *ptr;
+ 
+ 	_init=0;
+ 	printf("Trying to initialize vorbis codec with %lu bytes of header data\n",extra);
+	
+	vrbis=new oggVorbis;
+ 	_contextVoid=(void *)vrbis;
+	
+	memset(vrbis,0,sizeof(oggVorbis));
+	
+	// init everything
+	vorbis_info_init(&STRUCT->vinfo);
+	vorbis_comment_init(&STRUCT->vcomment);
+	
+	// split extradata as header/comment/code
+	ptr=(uint32_t *)extraData;
+	size_hdr=*ptr++;
+	size_cmt=*ptr++;
+	size_code=*ptr++;
+	
+	hdr=extraData+3*sizeof(uint32_t);
+	cmt=hdr+size_hdr;
+	code=cmt+size_cmt;
+	
+ 	// Feed header passed as extraData
+	packet.bytes=size_hdr;
+	packet.packet=hdr;
+	packet.b_o_s=1; // yes, it is a new stream	
+	if(0>vorbis_synthesis_headerin(&STRUCT->vinfo,&comment,&packet))
+	{
+		printf("Mmm something bad happened , cannot init 1st packet\n");
+		return;
+	}
+	// update some info in header this is the only place to get them
+	// especially frequency.
+/*
+	info->channels=STRUCT->vinfo.channels;
+	info->frequency=STRUCT->vinfo.rate;
+*/
+	info->byterate=STRUCT->vinfo.bitrate_nominal>>3;
+	
+	if(!info->byterate) 
+	{
+		printf("Mmm, no nominal bitrate...\n");
+		info->byterate=16000;
+	}
+	// now unpack comment
+	packet.bytes=size_cmt;
+	packet.packet=cmt;
+	packet.b_o_s=0; // Not new
+	if(0>vorbis_synthesis_headerin(&STRUCT->vinfo,&comment,&packet))
+	{
+		printf("Mmm something bad happened , cannot init 2st packet\n");
+		return;
+	}
+	// and codebook
+	packet.bytes=size_code;
+	packet.packet=code;
+	packet.b_o_s=0; // Not new
+	if(0>vorbis_synthesis_headerin(&STRUCT->vinfo,&comment,&packet))
+	{
+		printf("Mmm something bad happened , cannot init 3st packet\n");
+		return;
+	}
+	vorbis_comment_clear(&comment);
+	vorbis_synthesis_init(&STRUCT->vdsp,&STRUCT->vinfo);
+	vorbis_block_init(&STRUCT->vdsp,&STRUCT->vblock);
+	printf("Vorbis init successfull\n");
+	STRUCT->ampscale=1;
+	_init=1;
+
+	ch_route.input_type[0] = CH_FRONT_LEFT;
+	ch_route.input_type[1] = CH_FRONT_RIGHT;
+	ch_route.input_type[2] = CH_REAR_LEFT;
+	ch_route.input_type[3] = CH_REAR_RIGHT;
+	ch_route.input_type[4] = CH_FRONT_CENTER;
+	ch_route.input_type[5] = CH_LFE;
+ }
+ // This codec expects more or less one packet at a time !
+ 
+ uint8_t ADM_vorbis::run(uint8_t *inptr, uint32_t nbIn, float *outptr, uint32_t *nbOut)
+{
+ogg_packet packet;
+float **sample_pcm;
+int	nb_synth;
+
+	*nbOut=0;
+	if(!_init) return 0;
+	packet.b_o_s=0;
+	packet.e_o_s=0;
+	packet.bytes=nbIn;
+	packet.packet=inptr;
+        packet.granulepos=-1;
+	if(!vorbis_synthesis(&STRUCT->vblock,&packet))
+	{
+	      vorbis_synthesis_blockin(&STRUCT->vdsp,&STRUCT->vblock);
+	 }
+	 nb_synth=vorbis_synthesis_pcmout(&STRUCT->vdsp,&sample_pcm);
+	 if(nb_synth<0)
+	 {
+	 	printf("error decoding vorbis %d\n",nb_synth);
+		return 0;
+	 }
+	 
+	 for (uint32_t samp = 0; samp < nb_synth; samp++)
+	 	for (uint8_t chan = 0; chan < STRUCT->vinfo.channels; chan++)
+			*outptr++ = sample_pcm[chan][samp] * STRUCT->ampscale;
+
+	 *nbOut = STRUCT->vinfo.channels * nb_synth;
+
+	// Puge them
+	 vorbis_synthesis_read(&STRUCT->vdsp,nb_synth); 
+	 aprintf("This round : in %d bytes, out %d bytes synthetized:%d\n",nbIn,*nbOut,nb_synth);
+	return 1;
+	
+}	
+// Try to flush the buffer
+// unsuccessfully :(
+  uint8_t ADM_vorbis::endDecompress( void ) 
+  {
+  float **sample_pcm;
+  ogg_packet packet;
+  
+  	//vorbis_synthesis_blockin(&STRUCT->vdsp,&STRUCT->vblock);
+  	vorbis_synthesis_pcmout(&STRUCT->vdsp,&sample_pcm);
+        vorbis_synthesis_restart(&STRUCT->vdsp);
+  	return 1;
+  }
+#endif
+

Copied: branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_vorbis/ADM_ad_vorbis.h (from rev 3843, branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_vorbis.h)
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_vorbis.h	2008-03-07 18:34:14 UTC (rev 3843)
+++ branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_vorbis/ADM_ad_vorbis.h	2008-03-07 18:34:16 UTC (rev 3844)
@@ -0,0 +1,16 @@
+
+
+typedef struct 
+{
+
+ ogg_sync_state    osync;  // sync and verify incoming physical bitstream
+ ogg_stream_state  ostream;  // take physical pages, weld into a logical stream of packets
+ ogg_page          opage;  // one Ogg bitstream page. Vorbis packets are inside
+ ogg_packet        opacket;  // one raw packet of data for decode
+ vorbis_info       vinfo;  // struct that stores all the static vorbis bitstream settings
+ vorbis_comment    vcomment;  // struct that stores all the bitstream user comments
+ vorbis_dsp_state  vdsp;  // central working state for the packet->PCM decoder
+ vorbis_block      vblock;  // local working space for packet->PCM decode
+ float		   ampscale;
+
+ }oggVorbis;

Added: branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_vorbis/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_vorbis/CMakeLists.txt	2008-03-07 18:34:14 UTC (rev 3843)
+++ branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_vorbis/CMakeLists.txt	2008-03-07 18:34:16 UTC (rev 3844)
@@ -0,0 +1,11 @@
+##
+##
+##
+
+include_directories(../../)
+include_directories(../../../ADM_audiocodec)
+
+SET(ADM_ad_faad_SRCS         ADM_ad_faad.cpp )
+
+ADD_LIBRARY(ADM_ad_faad SHARED ${ADM_ad_faad_SRCS})
+



From mean at mail.berlios.de  Fri Mar  7 19:34:19 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 7 Mar 2008 19:34:19 +0100
Subject: [Avidemux-svn-commit] r3845 -
	branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad
Message-ID: <200803071834.m27IYJVe000431@sheep.berlios.de>

Author: mean
Date: 2008-03-07 19:34:18 +0100 (Fri, 07 Mar 2008)
New Revision: 3845

Added:
   branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/CMakeLists.txt
Log:
[AudioPlugin] vorbis


Added: branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/CMakeLists.txt	2008-03-07 18:34:16 UTC (rev 3844)
+++ branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/CMakeLists.txt	2008-03-07 18:34:18 UTC (rev 3845)
@@ -0,0 +1,11 @@
+##
+##
+##
+
+include_directories(../../)
+include_directories(../../../ADM_audiocodec)
+
+SET(ADM_ad_faad_SRCS         ADM_ad_faad.cpp )
+
+ADD_LIBRARY(ADM_ad_faad SHARED ${ADM_ad_faad_SRCS})
+



From mean at mail.berlios.de  Fri Mar  7 19:35:22 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 7 Mar 2008 19:35:22 +0100
Subject: [Avidemux-svn-commit] r3846 - in
	branches/avidemux_2.5_branch_mean/avidemux: ADM_audiocodec
	plugins/ADM_audiodecoder plugins/ADM_audiodecoder/ADM_ad_faad
	plugins/ADM_audiodecoder/ADM_ad_mad
	plugins/ADM_audiodecoder/ADM_ad_vorbis
Message-ID: <200803071835.m27IZMJj000562@sheep.berlios.de>

Author: mean
Date: 2008-03-07 19:35:21 +0100 (Fri, 07 Mar 2008)
New Revision: 3846

Modified:
   branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_audiocodec.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_audiocodec.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/CMakeLists.txt
   branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/ADM_ad_faad.cpp
   branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/ADM_ad_mad.cpp
   branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_vorbis/ADM_ad_vorbis.cpp
   branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_vorbis/CMakeLists.txt
   branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/CMakeLists.txt
Log:
[AudioPlugin] all


Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_audiocodec.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_audiocodec.cpp	2008-03-07 18:34:18 UTC (rev 3845)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_audiocodec.cpp	2008-03-07 18:35:21 UTC (rev 3846)
@@ -102,28 +102,6 @@
 
 					break;
 #endif
-#ifdef USE_VORBIS
-				case WAV_OGG:
-						printf("\n Ogg/Vorbis \n");
-						out= (ADM_Audiocodec *) new ADM_vorbis(fourcc,info,
-								extra,extraData);
-						break;
-#endif		
-#ifdef USE_FAAD
-                                case WAV_AAC_HE:
-						printf("\n MP4 audio (HE)\n");
-						out= (ADM_Audiocodec *) new ADM_faad(fourcc,1,info,
-								extra,extraData);
-						break;
-
-				case WAV_AAC:
-				case WAV_MP4:
-                                case 0x706D:  // Weird fourcc/id code used by mencoder
-						printf("\n MP4 audio \n");
-						out= (ADM_Audiocodec *) new ADM_faad(fourcc,0,info,
-								extra,extraData);
-						break;
-#endif
 				case WAV_ULAW:
 						printf("\n ULAW codec\n");
 						out=(ADM_Audiocodec *) new ADM_AudiocodecUlaw(fourcc,info);

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_audiocodec.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_audiocodec.h	2008-03-07 18:34:18 UTC (rev 3845)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/ADM_audiocodec.h	2008-03-07 18:35:21 UTC (rev 3846)
@@ -110,45 +110,6 @@
 
 
 
-#ifdef USE_VORBIS
-class ADM_vorbis : public     ADM_Audiocodec
-{
-	protected:
-		void *_contextVoid;
-
-	public:
-		ADM_vorbis(uint32_t fourcc, WAVHeader *info, uint32_t l, uint8_t *d);
-		virtual	~ADM_vorbis();
-		virtual	uint8_t run(uint8_t *inptr, uint32_t nbIn, float *outptr, uint32_t *nbOut);
-		virtual	uint8_t isCompressed(void) {return 1;}
-		virtual	uint8_t isDecompressable(void) {return 1;}
-		virtual	uint8_t beginDecompress(void) {return 1;}
-		virtual	uint8_t endDecompress(void);
-};
-#endif
-
-#ifdef USE_FAAD
-#define FAAD_BUFFER 2048
-class ADM_faad : public     ADM_Audiocodec
-{
-	protected:
-		uint8_t _inited;
-		void	*_instance;
-		uint8_t _buffer[FAAD_BUFFER];
-		uint32_t _inbuffer;	
-
-	public:
-		ADM_faad(uint32_t fourcc, uint32_t highEfficiency,WAVHeader *info, uint32_t l, uint8_t *d);
-		virtual	~ADM_faad();
-		virtual	void purge(void);
-		virtual	uint8_t run(uint8_t *inptr, uint32_t nbIn, float *outptr, uint32_t *nbOut);
-		virtual	uint8_t isCompressed(void) {return 1;}
-		virtual	uint8_t isDecompressable(void) {return 1;}
-		virtual	uint8_t beginDecompress(void);
-		virtual	uint8_t endDecompress(void);
-};
-#endif
-
 #define ADMWA_BUF (4*1024*16) // 64 kB internal
 class ADM_AudiocodecWMA : public     ADM_Audiocodec
 {

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/CMakeLists.txt	2008-03-07 18:34:18 UTC (rev 3845)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_audiocodec/CMakeLists.txt	2008-03-07 18:35:21 UTC (rev 3846)
@@ -3,8 +3,8 @@
 ADM_codecimaadpcm.cpp  
 ADM_codecmsadpcm.cpp  
 ADM_codeculaw.cpp  ADM_codecwma.cpp  ADM_lpcm.cpp
-ADM_audiocodec.cpp  ADM_codecfaad.cpp  
-ADM_codecwav.cpp   ADM_dca.cpp       audiocodec_ogg.cpp
+ADM_audiocodec.cpp  
+ADM_codecwav.cpp   ADM_dca.cpp 
 ADM_pluginLoad.cpp
 )
 ADD_LIBRARY(ADM_audiocodec STATIC ${ADM_audiocodec_SRCS})

Modified: branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/ADM_ad_faad.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/ADM_ad_faad.cpp	2008-03-07 18:34:18 UTC (rev 3845)
+++ branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/ADM_ad_faad.cpp	2008-03-07 18:35:21 UTC (rev 3846)
@@ -15,22 +15,40 @@
 // Copyright: See COPYING file that comes with this distribution
 //
 //
-#include "config.h"
-#ifdef USE_FAAD
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <ADM_assert.h>
-#include <math.h>
-
-#include "fourcc.h"
-#include "ADM_audio/aviaudio.hxx"
-#include "ADM_audiocodec/ADM_audiocodec.h"
+#include "ADM_default.h"
+#include "ADM_ad_plugin.h"
 #include "ADM_audiofilter/audiofilter_channel_route.h"
 #include "faad.h"
 
+#define FAAD_BUFFER 2048
+class ADM_faad : public     ADM_Audiocodec
+{
+	protected:
+		uint8_t _inited;
+		void	*_instance;
+		uint8_t _buffer[FAAD_BUFFER];
+		uint32_t _inbuffer;	
 
-ADM_faad::ADM_faad( uint32_t fourcc ,uint32_t highEfficiency,WAVHeader *info,uint32_t l,uint8_t *d) :   ADM_Audiocodec(fourcc)
+	public:
+		ADM_faad(uint32_t fourcc, WAVHeader *info, uint32_t l, uint8_t *d);
+		virtual	~ADM_faad();
+		virtual	void purge(void);
+		virtual	uint8_t run(uint8_t *inptr, uint32_t nbIn, float *outptr, uint32_t *nbOut);
+		virtual	uint8_t isCompressed(void) {return 1;}
+		virtual	uint8_t isDecompressable(void) {return 1;}
+		virtual	uint8_t beginDecompress(void);
+		virtual	uint8_t endDecompress(void);
+};
+// Supported formats + declare our plugin
+//*******************************************************
+uint32_t Formats[]={WAV_AAC,WAV_MP4};
+DECLARE_AUDIO_DECODER(ADM_faad,						// Class
+			0,0,1, 												// Major, minor,patch 
+			Formats, 											// Supported formats
+			"Faad2 decoder plugin for avidemux (c) Mean\n"); 	// Desc
+//********************************************************
+
+ADM_faad::ADM_faad( uint32_t fourcc ,WAVHeader *info,uint32_t l,uint8_t *d) :   ADM_Audiocodec(fourcc)
 {
 faacDecConfigurationPtr conf;
 #ifdef OLD_FAAD_PROTO
@@ -47,13 +65,7 @@
 		// Update the field we know about
 		conf->outputFormat=FAAD_FMT_16BIT;
 		conf->defSampleRate=info->frequency;
-                if(!highEfficiency)
-                {
-		  conf->defObjectType =LC;
-                }else
-                {
-                   conf->defObjectType =HE_AAC;
-                }
+  	    conf->defObjectType =LC;
 		faacDecSetConfiguration(_instance, conf);
                 printf("[FAAD] using %u bytes of extradata\n",l);
 		// if we have some extra data, it means we can init it from it
@@ -202,4 +214,4 @@
 		}while(nbIn);
 		return 1;
 }
-#endif
+

Modified: branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/ADM_ad_mad.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/ADM_ad_mad.cpp	2008-03-07 18:34:18 UTC (rev 3845)
+++ branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/ADM_ad_mad.cpp	2008-03-07 18:35:21 UTC (rev 3846)
@@ -17,8 +17,6 @@
 #include "ADM_default.h"
 #include "ADM_ad_plugin.h"
 
-#define OurClass ADM_AudiocodecMP3
-
 #ifdef USE_MP3
 #include "../ADM_libMad/mad.h"
 #define Stream ((mad_stream *)_stream)

Modified: branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_vorbis/ADM_ad_vorbis.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_vorbis/ADM_ad_vorbis.cpp	2008-03-07 18:34:18 UTC (rev 3845)
+++ branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_vorbis/ADM_ad_vorbis.cpp	2008-03-07 18:35:21 UTC (rev 3846)
@@ -25,26 +25,13 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-
-#include "config.h"
-
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <ADM_assert.h>
-#include <math.h>
-
-
-
-#include "fourcc.h"
-#include "ADM_audio/aviaudio.hxx"
-#include "ADM_audiocodec/ADM_audiocodec.h"
+#include "ADM_default.h"
+#include "ADM_ad_plugin.h"
 #include "ADM_audiofilter/audiofilter_channel_route.h"
 
-#ifdef USE_VORBIS
+#include <vorbis/codec.h>
+#include "ADM_ad_vorbis.h"
 
-#include <vorbis/codec.h>
-#include "ADM_audiocodec/ADM_vorbis.h"
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME MODULE_OGM_AUDIO
 #include "ADM_osSupport/ADM_debug.h"
@@ -52,6 +39,31 @@
 
  #define STRUCT ((oggVorbis *)_contextVoid)
  
+class ADM_vorbis : public     ADM_Audiocodec
+{
+	protected:
+		void *_contextVoid;
+
+	public:
+		ADM_vorbis(uint32_t fourcc, WAVHeader *info, uint32_t l, uint8_t *d);
+		virtual	~ADM_vorbis();
+		virtual	uint8_t run(uint8_t *inptr, uint32_t nbIn, float *outptr, uint32_t *nbOut);
+		virtual	uint8_t isCompressed(void) {return 1;}
+		virtual	uint8_t isDecompressable(void) {return 1;}
+		virtual	uint8_t beginDecompress(void) {return 1;}
+		virtual	uint8_t endDecompress(void);
+};
+
+// Supported formats + declare our plugin
+//*******************************************************
+uint32_t Formats[]={WAV_OGG};
+DECLARE_AUDIO_DECODER(ADM_vorbis,						// Class
+			0,0,1, 												// Major, minor,patch 
+			Formats, 											// Supported formats
+			"libVorbis decoder plugin for avidemux (c) Mean\n"); 	// Desc
+//********************************************************
+
+
  ADM_vorbis::~ADM_vorbis()
  {
  	oggVorbis *o;
@@ -203,5 +215,5 @@
         vorbis_synthesis_restart(&STRUCT->vdsp);
   	return 1;
   }
-#endif
 
+

Modified: branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_vorbis/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_vorbis/CMakeLists.txt	2008-03-07 18:34:18 UTC (rev 3845)
+++ branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/ADM_ad_vorbis/CMakeLists.txt	2008-03-07 18:35:21 UTC (rev 3846)
@@ -5,7 +5,7 @@
 include_directories(../../)
 include_directories(../../../ADM_audiocodec)
 
-SET(ADM_ad_faad_SRCS         ADM_ad_faad.cpp )
+SET(ADM_ad_vorbis_SRCS         ADM_ad_vorbis.cpp )
 
-ADD_LIBRARY(ADM_ad_faad SHARED ${ADM_ad_faad_SRCS})
+ADD_LIBRARY(ADM_ad_vorbis SHARED ${ADM_ad_vorbis_SRCS})
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/CMakeLists.txt	2008-03-07 18:34:18 UTC (rev 3845)
+++ branches/avidemux_2.5_branch_mean/avidemux/plugins/ADM_audiodecoder/CMakeLists.txt	2008-03-07 18:35:21 UTC (rev 3846)
@@ -1,2 +1,4 @@
 subdirs(PREORDER ADM_ad_ac3)
 subdirs(PREORDER ADM_ad_mad)
+subdirs(PREORDER ADM_ad_faad)
+subdirs(PREORDER ADM_ad_vorbis)



From mean at mail.berlios.de  Sat Mar  8 08:56:55 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 8 Mar 2008 08:56:55 +0100
Subject: [Avidemux-svn-commit] r3848 - branches
Message-ID: <200803080756.m287utfd006163@sheep.berlios.de>

Author: mean
Date: 2008-03-08 08:56:55 +0100 (Sat, 08 Mar 2008)
New Revision: 3848

Added:
   branches/avidemux_2.5_branch_mean_merged/
Log:


Copied: branches/avidemux_2.5_branch_mean_merged (from rev 3847, branches/avidemux_2.5_branch_gruntster)



From gruntster at mail.berlios.de  Sat Mar  8 09:41:22 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Sat, 8 Mar 2008 09:41:22 +0100
Subject: [Avidemux-svn-commit] r3849 - in
	branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder:
	. ADM_ad_ac3 ADM_ad_ac3/ADM_liba52 ADM_ad_faad ADM_ad_mad
	ADM_ad_mad/ADM_libMad ADM_ad_vorbis
Message-ID: <200803080841.m288fMKf010223@sheep.berlios.de>

Author: gruntster
Date: 2008-03-08 09:41:18 +0100 (Sat, 08 Mar 2008)
New Revision: 3849

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/ADM_ad_mad.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/ADM_libMad/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_vorbis/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/CMakeLists.txt
Log:
[Merge] fix build issues with Linux and plugins after merging

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/CMakeLists.txt	2008-03-08 07:56:55 UTC (rev 3848)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/CMakeLists.txt	2008-03-08 08:41:18 UTC (rev 3849)
@@ -4,4 +4,12 @@
 	bit_allocate.c  bitstream.c  downmix.c  imdct.c  parse.c)
 
 ADD_LIBRARY(${ADM_LIB} STATIC ${${ADM_LIB}_SRCS})
-add_definitions(-fPIC)
\ No newline at end of file
+
+IF (UNIX)
+	ADD_TARGET_CFLAGS(${ADM_LIB} -fPIC)
+ENDIF (UNIX)
+
+# FIXME
+ADD_TARGET_CFLAGS(${ADM_LIB} "-I${CMAKE_BINARY_DIR}/config/cli")
+ADD_TARGET_CFLAGS(${ADM_LIB} "-I${CMAKE_SOURCE_DIR}/avidemux/ADM_audiocodec")
+ADD_TARGET_CFLAGS(${ADM_LIB} "-I${CMAKE_SOURCE_DIR}/avidemux/ADM_core/include")
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/CMakeLists.txt	2008-03-08 07:56:55 UTC (rev 3848)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/CMakeLists.txt	2008-03-08 08:41:18 UTC (rev 3849)
@@ -1,17 +1,10 @@
-##
-##
-##
+ADD_SUBDIRECTORY(ADM_liba52)
 
-subdirs(PREORDER ADM_liba52)
+SET(ADM_ad_a52_SRCS ADM_ad_a52.cpp)
 
-
-
-include_directories(../../)
-include_directories(../../../ADM_audiocodec)
-include_directories(ADM_liba52)
-
-SET(ADM_ad_a52_SRCS         ADM_ad_a52.cpp )
-
 ADD_LIBRARY(ADM_ad_a52 SHARED ${ADM_ad_a52_SRCS})
 TARGET_LINK_LIBRARIES(ADM_ad_a52 ADM_liba52)
 
+# FIXME
+ADD_TARGET_CFLAGS(ADM_ad_a52 "-I${CMAKE_BINARY_DIR}/config/cli")
+ADD_TARGET_CFLAGS(ADM_ad_a52 "-I${CMAKE_SOURCE_DIR}/avidemux/ADM_audiocodec")
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/CMakeLists.txt	2008-03-08 07:56:55 UTC (rev 3848)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/CMakeLists.txt	2008-03-08 08:41:18 UTC (rev 3849)
@@ -1,11 +1,7 @@
-##
-##
-##
+SET(ADM_ad_faad_SRCS ADM_ad_faad.cpp )
 
-include_directories(../../)
-include_directories(../../../ADM_audiocodec)
-
-SET(ADM_ad_faad_SRCS         ADM_ad_faad.cpp )
-
 ADD_LIBRARY(ADM_ad_faad SHARED ${ADM_ad_faad_SRCS})
 
+# FIXME
+ADD_TARGET_CFLAGS(ADM_ad_faad "-I${CMAKE_BINARY_DIR}/config/cli")
+ADD_TARGET_CFLAGS(ADM_ad_faad "-I${CMAKE_SOURCE_DIR}/avidemux/ADM_audiocodec")
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/ADM_ad_mad.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/ADM_ad_mad.cpp	2008-03-08 07:56:55 UTC (rev 3848)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/ADM_ad_mad.cpp	2008-03-08 08:41:18 UTC (rev 3849)
@@ -18,7 +18,7 @@
 #include "ADM_ad_plugin.h"
 
 #ifdef USE_MP3
-#include "../ADM_libMad/mad.h"
+#include "ADM_libMad/mad.h"
 #define Stream ((mad_stream *)_stream)
 #define Frame ((mad_frame *)_frame)
 #define Synth ((mad_synth *)_synth)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/ADM_libMad/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/ADM_libMad/CMakeLists.txt	2008-03-08 07:56:55 UTC (rev 3848)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/ADM_libMad/CMakeLists.txt	2008-03-08 08:41:18 UTC (rev 3849)
@@ -1,8 +1,23 @@
-SET(ADM_LIB ADM_libMad)
-
-SET(${ADM_LIB}_SRCS 
-	bit.c  decoder.c  fixed.c  frame.c  huffman.c  layer12.c  layer3.c  
-	stream.c  synth.c  timer.c  version.c)
-
-ADD_LIBRARY(${ADM_LIB} STATIC ${${ADM_LIB}_SRCS})
-add_definitions(-fPIC)
+SET(ADM_LIB ADM_libMad)
+
+SET(${ADM_LIB}_SRCS 
+	bit.c  decoder.c  fixed.c  frame.c  huffman.c  layer12.c  layer3.c  
+	stream.c  synth.c  timer.c  version.c)
+
+ADD_LIBRARY(${ADM_LIB} STATIC ${${ADM_LIB}_SRCS})
+
+IF (UNIX)
+	ADD_TARGET_CFLAGS(${ADM_LIB} -fPIC)
+ENDIF (UNIX)
+
+INCLUDE(admLibMad)
+GET_MAD_CFLAGS(MAD_CFLAGS)
+
+ADD_TARGET_CFLAGS(${ADM_LIB} ${MAD_CFLAGS})
+
+IF (ADM_BIG_ENDIAN)
+	ADD_TARGET_CFLAGS(${ADM_LIB} "-DWORDS_BIGENDIAN")
+ENDIF (ADM_BIG_ENDIAN)
+
+# FIXME
+ADD_TARGET_CFLAGS(${ADM_LIB} "-I${CMAKE_BINARY_DIR}/config/cli")
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/CMakeLists.txt	2008-03-08 07:56:55 UTC (rev 3848)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/CMakeLists.txt	2008-03-08 08:41:18 UTC (rev 3849)
@@ -1,17 +1,15 @@
-##
-##
-##
+ADD_SUBDIRECTORY(ADM_libMad)
 
-subdirs(PREORDER ADM_libMad)
+SET(ADM_ad_Mad_SRCS ADM_ad_mad.cpp)
 
-
-
-include_directories(../../)
-include_directories(../../../ADM_audiocodec)
-include_directories(ADM_libMad)
-
-SET(ADM_ad_Mad_SRCS         ADM_ad_mad.cpp )
-
 ADD_LIBRARY(ADM_ad_Mad SHARED ${ADM_ad_Mad_SRCS})
 TARGET_LINK_LIBRARIES(ADM_ad_Mad ADM_libMad)
 
+INCLUDE(admLibMad)
+GET_MAD_CFLAGS(MAD_CFLAGS)
+
+ADD_TARGET_CFLAGS(ADM_ad_Mad ${MAD_CFLAGS})
+
+# FIXME
+ADD_TARGET_CFLAGS(ADM_ad_Mad "-I${CMAKE_BINARY_DIR}/config/cli")
+ADD_TARGET_CFLAGS(ADM_ad_Mad "-I${CMAKE_SOURCE_DIR}/avidemux/ADM_audiocodec")
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_vorbis/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_vorbis/CMakeLists.txt	2008-03-08 07:56:55 UTC (rev 3848)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_vorbis/CMakeLists.txt	2008-03-08 08:41:18 UTC (rev 3849)
@@ -1,11 +1,7 @@
-##
-##
-##
+SET(ADM_ad_vorbis_SRCS ADM_ad_vorbis.cpp )
 
-include_directories(../../)
-include_directories(../../../ADM_audiocodec)
-
-SET(ADM_ad_vorbis_SRCS         ADM_ad_vorbis.cpp )
-
 ADD_LIBRARY(ADM_ad_vorbis SHARED ${ADM_ad_vorbis_SRCS})
 
+# FIXME
+ADD_TARGET_CFLAGS(ADM_ad_vorbis "-I${CMAKE_BINARY_DIR}/config/cli")
+ADD_TARGET_CFLAGS(ADM_ad_vorbis "-I${CMAKE_SOURCE_DIR}/avidemux/ADM_audiocodec")
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/CMakeLists.txt	2008-03-08 07:56:55 UTC (rev 3848)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/CMakeLists.txt	2008-03-08 08:41:18 UTC (rev 3849)
@@ -1,4 +1,4 @@
-subdirs(PREORDER ADM_ad_ac3)
-subdirs(PREORDER ADM_ad_mad)
-subdirs(PREORDER ADM_ad_faad)
-subdirs(PREORDER ADM_ad_vorbis)
+ADD_SUBDIRECTORY(ADM_ad_ac3)
+ADD_SUBDIRECTORY(ADM_ad_faad)
+ADD_SUBDIRECTORY(ADM_ad_mad)
+ADD_SUBDIRECTORY(ADM_ad_vorbis)



From gruntster at mail.berlios.de  Sat Mar  8 10:30:41 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Sat, 8 Mar 2008 10:30:41 +0100
Subject: [Avidemux-svn-commit] r3850 - in
	branches/avidemux_2.5_branch_gruntster/avidemux:
	ADM_libraries/ADM_mplex plugins
Message-ID: <200803080930.m289Ufmw013574@sheep.berlios.de>

Author: gruntster
Date: 2008-03-08 10:30:39 +0100 (Sat, 08 Mar 2008)
New Revision: 3850

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/cpu_accel.c
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/CMakeLists.txt
Log:
[Merge] fix build for Unix

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/cpu_accel.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/cpu_accel.c	2008-03-08 08:41:18 UTC (rev 3849)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/cpu_accel.c	2008-03-08 09:30:39 UTC (rev 3850)
@@ -21,6 +21,8 @@
 
 #define ADM_LEGACY_PROGGY
 #include "ADM_default.h"
+#include <signal.h>
+#include <setjmp.h>
 #include <unistd.h>
 #include <string.h>
 #include <errno.h>

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/CMakeLists.txt	2008-03-08 08:41:18 UTC (rev 3849)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/CMakeLists.txt	2008-03-08 09:30:39 UTC (rev 3850)
@@ -1 +1 @@
-subdirs(PREORDER ADM_audiodecoder)
+ADD_SUBDIRECTORY(ADM_audiodecoder)



From gruntster at mail.berlios.de  Sat Mar  8 10:33:20 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Sat, 8 Mar 2008 10:33:20 +0100
Subject: [Avidemux-svn-commit] r3851 - in
	branches/avidemux_2.5_branch_gruntster/avidemux: .
	ADM_core/include ADM_core/src ADM_userInterfaces/ADM_GTK/ADM_gui2
	ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk
	ADM_userInterfaces/ADM_NONE/ADM_gui2
	ADM_userInterfaces/ADM_QT4/ADM_gui
Message-ID: <200803080933.m289XKFj013717@sheep.berlios.de>

Author: gruntster
Date: 2008-03-08 10:33:15 +0100 (Sat, 08 Mar 2008)
New Revision: 3851

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_misc.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_win32.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_gtkRender.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/toolkit.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_gui2/file_none.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/Q_gui2.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui_none.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/gtk_gui.cpp
Log:
[Merge] integrate changes from 2.4 branch (r3833)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_misc.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_misc.h	2008-03-08 09:30:39 UTC (rev 3850)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_misc.h	2008-03-08 09:33:15 UTC (rev 3851)
@@ -72,7 +72,6 @@
 	#define SHTDN_REASON_FLAG_PLANNED 0x80000000
 
 	int shutdown_win32(void);
-	void getWorkingArea(uint32_t *width, uint32_t *height);
 #else
 	#include <sys/resource.h>
 #endif

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_win32.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_win32.cpp	2008-03-08 09:30:39 UTC (rev 3850)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_win32.cpp	2008-03-08 09:33:15 UTC (rev 3851)
@@ -396,39 +396,6 @@
 
 #define MONITOR_DEFAULTTONEAREST    0x00000002
 
-void getWorkingArea(uint32_t *width, uint32_t *height)
-{
-	typedef void* (WINAPI *MonitorFromWindow)(HWND hwnd, uint32_t dwFlags);
-	typedef bool (WINAPI *GetMonitorInfo)(void *hMonitor, LPMONITORINFO lpmi);
-
-	static HMODULE user32 = GetModuleHandle("user32.dll");
-	static MonitorFromWindow pMonitorFromWindow = (MonitorFromWindow)GetProcAddress(user32, "MonitorFromWindow");
-	static GetMonitorInfo pGetMonitorInfo = (GetMonitorInfo)GetProcAddress(user32, "GetMonitorInfoA");
-
-	if (pMonitorFromWindow == NULL)
-	{
-		RECT rect;
-
-		// Required for NT4 - no multi-monitor support
-		SystemParametersInfo(SPI_GETWORKAREA, 0, &rect, 0);
-
-		*width = rect.right - rect.left;
-		*height = rect.bottom - rect.top;
-	}
-	else
-	{
-		void *hMonitor = pMonitorFromWindow(GetForegroundWindow(), MONITOR_DEFAULTTONEAREST);
-
-		MONITORINFO monitorInfo;
-
-		monitorInfo.cbSize = sizeof(MONITORINFO);
-		pGetMonitorInfo(hMonitor, &monitorInfo);
-
-		*width = monitorInfo.rcWork.right - monitorInfo.rcWork.left;
-		*height = monitorInfo.rcWork.bottom - monitorInfo.rcWork.top;
-	}
-}
-
 void redirectStdoutToFile(void)
 {
 	// Don't redirect stdout and stderr if SDL hasn't already hijacked it.

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp	2008-03-08 09:30:39 UTC (rev 3850)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp	2008-03-08 09:33:15 UTC (rev 3851)
@@ -35,7 +35,7 @@
 #include "gtkgui.h"
 #include "ADM_toolkit/toolkit.hxx"
 
-uint8_t UI_getPhysicalScreenSize(uint32_t *w,uint32_t *h);
+extern uint8_t UI_getPhysicalScreenSize(void* window, uint32_t *w,uint32_t *h);
 
 
 #define WOD(x) lookup_widget (guiRootWindow,#x)
@@ -43,7 +43,7 @@
 void frame2time(uint32_t frame, uint32_t fps, uint16_t * hh, uint16_t * mm,
 	   uint16_t * ss, uint16_t * ms);
 
-static GtkWidget *guiRootWindow=NULL;
+GtkWidget *guiRootWindow=NULL;
 static GtkWidget *guiDrawingArea=NULL;
 static GtkWidget *guiSlider=NULL;
 
@@ -318,7 +318,7 @@
 		GUI_initCursor(  );
     
                 
-                UI_getPhysicalScreenSize(&w,&h); //gtk_widget_get_parent_window (guiRootWindow));
+                UI_getPhysicalScreenSize(guiRootWindow, &w, &h);
                 printf("The screen seems to be %u x %u px\n",w,h);
  
                 GUI_gtk_grow_off(1);
@@ -1276,7 +1276,6 @@
 extern char **global_argv;
 typedef gboolean GCALL       (void *);
 extern int automation(void );
-extern uint8_t UI_getPhysicalScreenSize(uint32_t *w,uint32_t *h);
 extern void initTranslator(void);
 
 int UI_Init(int argc, char **argv)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_gtkRender.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_gtkRender.cpp	2008-03-08 09:30:39 UTC (rev 3850)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_gtkRender.cpp	2008-03-08 09:33:15 UTC (rev 3851)
@@ -41,7 +41,7 @@
 void GUI_gtk_grow_off(int onff);
 
 extern GtkWidget *getDrawWidget(void);
-extern uint8_t UI_getPhysicalScreenSize(uint32_t *w, uint32_t *h);
+extern uint8_t UI_getPhysicalScreenSize(void* window, uint32_t *w, uint32_t *h);
 
 #ifdef ENABLE_WINDOW_SIZING_HACK
 extern int maxWindowWidth, maxWindowHeight; // from GUI_bindings.cpp
@@ -191,7 +191,7 @@
 	gtk_window_get_size(window, &windowWidth, &windowHeight);
 	gtk_widget_get_size_request(drawingArea, &drawingWidth, &drawingHeight);
 
-	UI_getPhysicalScreenSize(&screenWidth, &screenHeight);
+	UI_getPhysicalScreenSize(window, &screenWidth, &screenHeight);
 
 	// Take drawing area out of the equation, how much extra do we need for additional controls?
 	windowWidth -= drawingWidth;
@@ -223,9 +223,11 @@
 void UI_centreCanvasWindow(GtkWindow *window, GtkWidget *canvas, int newCanvasWidth, int newCanvasHeight)
 {
 	int winWidth, winHeight, widgetWidth, widgetHeight;
-	uint32_t resWidth, resHeight;
+	GdkScreen *screen = gdk_screen_get_default();
+	int monitorNo = gdk_screen_get_monitor_at_window(screen, GTK_WIDGET(window->transient_parent)->window);
+	GdkRectangle rect;
 
-	UI_getPhysicalScreenSize(&resWidth, &resHeight);
+	gdk_screen_get_monitor_geometry(screen, monitorNo, &rect);
 	gtk_widget_get_size_request((GtkWidget*)canvas, &widgetWidth, &widgetHeight);
 	gtk_window_get_size(window, &winWidth, &winHeight);
 
@@ -236,6 +238,6 @@
 	winWidth += 10;
 	winHeight += 40;
 
-	gtk_window_move(window, ((int)resWidth - winWidth) / 2, ((int)resHeight - winHeight) / 2);
+	gtk_window_move(window, rect.x + (rect.width - winWidth) / 2, rect.y + (rect.height - winHeight) / 2);
 }
 // EOF

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/toolkit.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/toolkit.cpp	2008-03-08 09:30:39 UTC (rev 3850)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/toolkit.cpp	2008-03-08 09:33:15 UTC (rev 3851)
@@ -24,8 +24,8 @@
 #endif
 
 
+extern GtkWidget *guiRootWindow;
 
-
 GtkWidget *GUI_PixmapButtonDefault(GdkWindow * window, const gchar ** xpm,
                                   const gchar * tooltip);
 GtkWidget *GUI_PixmapButton(GdkWindow * window, const gchar ** xpm,
@@ -186,26 +186,22 @@
     \fn UI_getPhysicalScreenSize
     \brief return the physical size of display in pixels
 */
-uint8_t UI_getPhysicalScreenSize(uint32_t *w, uint32_t *h)
+uint8_t UI_getPhysicalScreenSize(void *window, uint32_t *w, uint32_t *h)
 {
-#ifdef __WIN32
-	getWorkingArea(w, h);
-#else
-	static int inited = 0;
-	static int ww,hh;
+	GtkWindow* gtkWindow = (GtkWindow*)window;
+	GdkScreen *screen = gdk_screen_get_default();
 
-    if (!inited)
-    {      
-      GdkScreen* sc = gdk_screen_get_default();
-      ww = gdk_screen_get_width(sc);
-      hh = gdk_screen_get_height(sc);
-      inited = 1;
-    }
+	if (!gtkWindow)
+		gtkWindow = (GtkWindow*)guiRootWindow;
 
-    *w=ww;
-    *h=hh;
-#endif
+	int monitorNo = gdk_screen_get_monitor_at_window(screen, GTK_WIDGET(gtkWindow)->window);
+	GdkRectangle rect;
 
+	gdk_screen_get_monitor_geometry(screen, monitorNo, &rect);
+
+	*w = rect.width;
+	*h = rect.height;
+
 	return 1;
 }
 //EOF

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_gui2/file_none.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_gui2/file_none.cpp	2008-03-08 09:30:39 UTC (rev 3850)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_gui2/file_none.cpp	2008-03-08 09:33:15 UTC (rev 3851)
@@ -29,7 +29,7 @@
 void GUI_FileSelWrite(const char *label, char * * name)
 {}
 
-uint8_t UI_getPhysicalScreenSize(uint32_t *w,uint32_t *h)
+uint8_t UI_getPhysicalScreenSize(void *window, uint32_t *w,uint32_t *h)
 {
   *w=*h=10000; 
 }
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/Q_gui2.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/Q_gui2.cpp	2008-03-08 09:30:39 UTC (rev 3850)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/Q_gui2.cpp	2008-03-08 09:33:15 UTC (rev 3851)
@@ -42,7 +42,7 @@
 extern int global_argc;
 extern char **global_argv;
 
-extern uint8_t UI_getPhysicalScreenSize(uint32_t *w,uint32_t *h);
+extern uint8_t UI_getPhysicalScreenSize(void* window, uint32_t *w,uint32_t *h);
 extern int automation(void );
 extern void HandleAction(Action a);
 extern uint32_t encoderGetNbEncoder (void);
@@ -623,16 +623,16 @@
 
 	loadTranslator();
 
-	uint32_t w, h;
-
-	UI_getPhysicalScreenSize(&w,&h);
-	printf("The screen seems to be %u x %u px\n",w,h);
-
 	MainWindow *mw = new MainWindow();
 	mw->show();
 
 	QuiMainWindows = (QWidget*)mw;
 
+	uint32_t w, h;
+
+	UI_getPhysicalScreenSize(QuiMainWindows, &w,&h);
+	printf("The screen seems to be %u x %u px\n",w,h);
+
 	UI_QT4VideoWidget(mw->ui.frame_video);  // Add the widget that will handle video display
 	UI_updateRecentMenu();
 	setupMenus();

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui_none.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui_none.cpp	2008-03-08 09:30:39 UTC (rev 3850)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui_none.cpp	2008-03-08 09:33:15 UTC (rev 3851)
@@ -23,7 +23,7 @@
 uint8_t UI_arrow_enabled(void) {return 1;}
 uint8_t UI_arrow_disabled(void) {return 1;}
 
-uint8_t UI_getPhysicalScreenSize(uint32_t *w,uint32_t *h)
+uint8_t UI_getPhysicalScreenSize(void* window, uint32_t *w,uint32_t *h)
 {
 	QRect qrect = QApplication::desktop()->availableGeometry();
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/gtk_gui.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/gtk_gui.cpp	2008-03-08 09:30:39 UTC (rev 3850)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/gtk_gui.cpp	2008-03-08 09:33:15 UTC (rev 3851)
@@ -146,7 +146,7 @@
 PARAM_MUX muxMode = MUX_REGULAR;
 int muxParam = 0;
 
-extern uint8_t UI_getPhysicalScreenSize(uint32_t *w,uint32_t *h);
+extern uint8_t UI_getPhysicalScreenSize(void* window, uint32_t *w,uint32_t *h);
 extern uint8_t GUI_jobs(void);
 extern bool parseECMAScript(const char *name);
 void A_parseECMAScript(const char *name);
@@ -1060,7 +1060,7 @@
   
   /* Zoom out if needed */
   uint32_t phyW,phyH;
-  UI_getPhysicalScreenSize(&phyW,&phyH);
+  UI_getPhysicalScreenSize(NULL, &phyW,&phyH);
   if(phyW<avifileinfo->width || phyH<avifileinfo->height)
   {
       if(phyW<avifileinfo->width/2 || phyH<avifileinfo->height/2)



From mean at mail.berlios.de  Sat Mar  8 10:56:15 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 8 Mar 2008 10:56:15 +0100
Subject: [Avidemux-svn-commit] r3852 - in
	branches/avidemux_2.5_branch_mean_merged/avidemux: .
	ADM_core/include ADM_core/src ADM_libraries/ADM_mplex
	ADM_userInterfaces/ADM_GTK/ADM_gui2
	ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk
	ADM_userInterfaces/ADM_NONE/ADM_gui2
	ADM_userInterfaces/ADM_QT4/ADM_gui plugins
	plugins/ADM_audiodecoder plugins/ADM_audiodecoder/ADM_ad_ac3
	plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52
	plugins/ADM_audiodecoder/ADM_ad_faad
	plugins/ADM_audiodecoder/ADM_ad_mad
	plugins/ADM_audiodecoder/ADM_ad_mad/ADM_libMad
	plugins/ADM_audiodecoder/ADM_ad_vorbis
Message-ID: <200803080956.m289uFp7016070@sheep.berlios.de>

Author: mean
Date: 2008-03-08 10:56:14 +0100 (Sat, 08 Mar 2008)
New Revision: 3852

Modified:
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/include/ADM_misc.h
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/src/ADM_win32.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_mplex/cpu_accel.c
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_gtkRender.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/toolkit.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_NONE/ADM_gui2/file_none.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui_none.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/gtk_gui.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/CMakeLists.txt
   branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/CMakeLists.txt
   branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/CMakeLists.txt
   branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/ADM_ad_mad.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/ADM_libMad/CMakeLists.txt
   branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/CMakeLists.txt
   branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_vorbis/CMakeLists.txt
   branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/CMakeLists.txt
   branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/CMakeLists.txt
Log:
[Patch] update r3849 3850 3851


Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/include/ADM_misc.h
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/include/ADM_misc.h	2008-03-08 09:33:15 UTC (rev 3851)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/include/ADM_misc.h	2008-03-08 09:56:14 UTC (rev 3852)
@@ -72,7 +72,6 @@
 	#define SHTDN_REASON_FLAG_PLANNED 0x80000000
 
 	int shutdown_win32(void);
-	void getWorkingArea(uint32_t *width, uint32_t *height);
 #else
 	#include <sys/resource.h>
 #endif

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/src/ADM_win32.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/src/ADM_win32.cpp	2008-03-08 09:33:15 UTC (rev 3851)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/src/ADM_win32.cpp	2008-03-08 09:56:14 UTC (rev 3852)
@@ -396,39 +396,6 @@
 
 #define MONITOR_DEFAULTTONEAREST    0x00000002
 
-void getWorkingArea(uint32_t *width, uint32_t *height)
-{
-	typedef void* (WINAPI *MonitorFromWindow)(HWND hwnd, uint32_t dwFlags);
-	typedef bool (WINAPI *GetMonitorInfo)(void *hMonitor, LPMONITORINFO lpmi);
-
-	static HMODULE user32 = GetModuleHandle("user32.dll");
-	static MonitorFromWindow pMonitorFromWindow = (MonitorFromWindow)GetProcAddress(user32, "MonitorFromWindow");
-	static GetMonitorInfo pGetMonitorInfo = (GetMonitorInfo)GetProcAddress(user32, "GetMonitorInfoA");
-
-	if (pMonitorFromWindow == NULL)
-	{
-		RECT rect;
-
-		// Required for NT4 - no multi-monitor support
-		SystemParametersInfo(SPI_GETWORKAREA, 0, &rect, 0);
-
-		*width = rect.right - rect.left;
-		*height = rect.bottom - rect.top;
-	}
-	else
-	{
-		void *hMonitor = pMonitorFromWindow(GetForegroundWindow(), MONITOR_DEFAULTTONEAREST);
-
-		MONITORINFO monitorInfo;
-
-		monitorInfo.cbSize = sizeof(MONITORINFO);
-		pGetMonitorInfo(hMonitor, &monitorInfo);
-
-		*width = monitorInfo.rcWork.right - monitorInfo.rcWork.left;
-		*height = monitorInfo.rcWork.bottom - monitorInfo.rcWork.top;
-	}
-}
-
 void redirectStdoutToFile(void)
 {
 	// Don't redirect stdout and stderr if SDL hasn't already hijacked it.

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_mplex/cpu_accel.c
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_mplex/cpu_accel.c	2008-03-08 09:33:15 UTC (rev 3851)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_mplex/cpu_accel.c	2008-03-08 09:56:14 UTC (rev 3852)
@@ -21,6 +21,8 @@
 
 #define ADM_LEGACY_PROGGY
 #include "ADM_default.h"
+#include <signal.h>
+#include <setjmp.h>
 #include <unistd.h>
 #include <string.h>
 #include <errno.h>

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp	2008-03-08 09:33:15 UTC (rev 3851)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp	2008-03-08 09:56:14 UTC (rev 3852)
@@ -35,7 +35,7 @@
 #include "gtkgui.h"
 #include "ADM_toolkit/toolkit.hxx"
 
-uint8_t UI_getPhysicalScreenSize(uint32_t *w,uint32_t *h);
+extern uint8_t UI_getPhysicalScreenSize(void* window, uint32_t *w,uint32_t *h);
 
 
 #define WOD(x) lookup_widget (guiRootWindow,#x)
@@ -43,7 +43,7 @@
 void frame2time(uint32_t frame, uint32_t fps, uint16_t * hh, uint16_t * mm,
 	   uint16_t * ss, uint16_t * ms);
 
-static GtkWidget *guiRootWindow=NULL;
+GtkWidget *guiRootWindow=NULL;
 static GtkWidget *guiDrawingArea=NULL;
 static GtkWidget *guiSlider=NULL;
 
@@ -318,7 +318,7 @@
 		GUI_initCursor(  );
     
                 
-                UI_getPhysicalScreenSize(&w,&h); //gtk_widget_get_parent_window (guiRootWindow));
+                UI_getPhysicalScreenSize(guiRootWindow, &w, &h);
                 printf("The screen seems to be %u x %u px\n",w,h);
  
                 GUI_gtk_grow_off(1);
@@ -1276,7 +1276,6 @@
 extern char **global_argv;
 typedef gboolean GCALL       (void *);
 extern int automation(void );
-extern uint8_t UI_getPhysicalScreenSize(uint32_t *w,uint32_t *h);
 extern void initTranslator(void);
 
 int UI_Init(int argc, char **argv)

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_gtkRender.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_gtkRender.cpp	2008-03-08 09:33:15 UTC (rev 3851)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_gtkRender.cpp	2008-03-08 09:56:14 UTC (rev 3852)
@@ -41,7 +41,7 @@
 void GUI_gtk_grow_off(int onff);
 
 extern GtkWidget *getDrawWidget(void);
-extern uint8_t UI_getPhysicalScreenSize(uint32_t *w, uint32_t *h);
+extern uint8_t UI_getPhysicalScreenSize(void* window, uint32_t *w, uint32_t *h);
 
 #ifdef ENABLE_WINDOW_SIZING_HACK
 extern int maxWindowWidth, maxWindowHeight; // from GUI_bindings.cpp
@@ -191,7 +191,7 @@
 	gtk_window_get_size(window, &windowWidth, &windowHeight);
 	gtk_widget_get_size_request(drawingArea, &drawingWidth, &drawingHeight);
 
-	UI_getPhysicalScreenSize(&screenWidth, &screenHeight);
+	UI_getPhysicalScreenSize(window, &screenWidth, &screenHeight);
 
 	// Take drawing area out of the equation, how much extra do we need for additional controls?
 	windowWidth -= drawingWidth;
@@ -223,9 +223,11 @@
 void UI_centreCanvasWindow(GtkWindow *window, GtkWidget *canvas, int newCanvasWidth, int newCanvasHeight)
 {
 	int winWidth, winHeight, widgetWidth, widgetHeight;
-	uint32_t resWidth, resHeight;
+	GdkScreen *screen = gdk_screen_get_default();
+	int monitorNo = gdk_screen_get_monitor_at_window(screen, GTK_WIDGET(window->transient_parent)->window);
+	GdkRectangle rect;
 
-	UI_getPhysicalScreenSize(&resWidth, &resHeight);
+	gdk_screen_get_monitor_geometry(screen, monitorNo, &rect);
 	gtk_widget_get_size_request((GtkWidget*)canvas, &widgetWidth, &widgetHeight);
 	gtk_window_get_size(window, &winWidth, &winHeight);
 
@@ -236,6 +238,6 @@
 	winWidth += 10;
 	winHeight += 40;
 
-	gtk_window_move(window, ((int)resWidth - winWidth) / 2, ((int)resHeight - winHeight) / 2);
+	gtk_window_move(window, rect.x + (rect.width - winWidth) / 2, rect.y + (rect.height - winHeight) / 2);
 }
 // EOF

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/toolkit.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/toolkit.cpp	2008-03-08 09:33:15 UTC (rev 3851)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/toolkit.cpp	2008-03-08 09:56:14 UTC (rev 3852)
@@ -24,8 +24,8 @@
 #endif
 
 
+extern GtkWidget *guiRootWindow;
 
-
 GtkWidget *GUI_PixmapButtonDefault(GdkWindow * window, const gchar ** xpm,
                                   const gchar * tooltip);
 GtkWidget *GUI_PixmapButton(GdkWindow * window, const gchar ** xpm,
@@ -186,26 +186,22 @@
     \fn UI_getPhysicalScreenSize
     \brief return the physical size of display in pixels
 */
-uint8_t UI_getPhysicalScreenSize(uint32_t *w, uint32_t *h)
+uint8_t UI_getPhysicalScreenSize(void *window, uint32_t *w, uint32_t *h)
 {
-#ifdef __WIN32
-	getWorkingArea(w, h);
-#else
-	static int inited = 0;
-	static int ww,hh;
+	GtkWindow* gtkWindow = (GtkWindow*)window;
+	GdkScreen *screen = gdk_screen_get_default();
 
-    if (!inited)
-    {      
-      GdkScreen* sc = gdk_screen_get_default();
-      ww = gdk_screen_get_width(sc);
-      hh = gdk_screen_get_height(sc);
-      inited = 1;
-    }
+	if (!gtkWindow)
+		gtkWindow = (GtkWindow*)guiRootWindow;
 
-    *w=ww;
-    *h=hh;
-#endif
+	int monitorNo = gdk_screen_get_monitor_at_window(screen, GTK_WIDGET(gtkWindow)->window);
+	GdkRectangle rect;
 
+	gdk_screen_get_monitor_geometry(screen, monitorNo, &rect);
+
+	*w = rect.width;
+	*h = rect.height;
+
 	return 1;
 }
 //EOF

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_NONE/ADM_gui2/file_none.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_NONE/ADM_gui2/file_none.cpp	2008-03-08 09:33:15 UTC (rev 3851)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_NONE/ADM_gui2/file_none.cpp	2008-03-08 09:56:14 UTC (rev 3852)
@@ -29,7 +29,7 @@
 void GUI_FileSelWrite(const char *label, char * * name)
 {}
 
-uint8_t UI_getPhysicalScreenSize(uint32_t *w,uint32_t *h)
+uint8_t UI_getPhysicalScreenSize(void *window, uint32_t *w,uint32_t *h)
 {
   *w=*h=10000; 
 }
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui_none.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui_none.cpp	2008-03-08 09:33:15 UTC (rev 3851)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui_none.cpp	2008-03-08 09:56:14 UTC (rev 3852)
@@ -23,7 +23,7 @@
 uint8_t UI_arrow_enabled(void) {return 1;}
 uint8_t UI_arrow_disabled(void) {return 1;}
 
-uint8_t UI_getPhysicalScreenSize(uint32_t *w,uint32_t *h)
+uint8_t UI_getPhysicalScreenSize(void* window, uint32_t *w,uint32_t *h)
 {
 	QRect qrect = QApplication::desktop()->availableGeometry();
 

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/gtk_gui.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/gtk_gui.cpp	2008-03-08 09:33:15 UTC (rev 3851)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/gtk_gui.cpp	2008-03-08 09:56:14 UTC (rev 3852)
@@ -146,7 +146,7 @@
 PARAM_MUX muxMode = MUX_REGULAR;
 int muxParam = 0;
 
-extern uint8_t UI_getPhysicalScreenSize(uint32_t *w,uint32_t *h);
+extern uint8_t UI_getPhysicalScreenSize(void* window, uint32_t *w,uint32_t *h);
 extern uint8_t GUI_jobs(void);
 extern bool parseECMAScript(const char *name);
 void A_parseECMAScript(const char *name);
@@ -1060,7 +1060,7 @@
   
   /* Zoom out if needed */
   uint32_t phyW,phyH;
-  UI_getPhysicalScreenSize(&phyW,&phyH);
+  UI_getPhysicalScreenSize(NULL, &phyW,&phyH);
   if(phyW<avifileinfo->width || phyH<avifileinfo->height)
   {
       if(phyW<avifileinfo->width/2 || phyH<avifileinfo->height/2)

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/CMakeLists.txt	2008-03-08 09:33:15 UTC (rev 3851)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/CMakeLists.txt	2008-03-08 09:56:14 UTC (rev 3852)
@@ -4,4 +4,12 @@
 	bit_allocate.c  bitstream.c  downmix.c  imdct.c  parse.c)
 
 ADD_LIBRARY(${ADM_LIB} STATIC ${${ADM_LIB}_SRCS})
-add_definitions(-fPIC)
\ No newline at end of file
+
+IF (UNIX)
+	ADD_TARGET_CFLAGS(${ADM_LIB} -fPIC)
+ENDIF (UNIX)
+
+# FIXME
+ADD_TARGET_CFLAGS(${ADM_LIB} "-I${CMAKE_BINARY_DIR}/config/cli")
+ADD_TARGET_CFLAGS(${ADM_LIB} "-I${CMAKE_SOURCE_DIR}/avidemux/ADM_audiocodec")
+ADD_TARGET_CFLAGS(${ADM_LIB} "-I${CMAKE_SOURCE_DIR}/avidemux/ADM_core/include")
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/CMakeLists.txt	2008-03-08 09:33:15 UTC (rev 3851)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/CMakeLists.txt	2008-03-08 09:56:14 UTC (rev 3852)
@@ -1,17 +1,10 @@
-##
-##
-##
+ADD_SUBDIRECTORY(ADM_liba52)
 
-subdirs(PREORDER ADM_liba52)
+SET(ADM_ad_a52_SRCS ADM_ad_a52.cpp)
 
-
-
-include_directories(../../)
-include_directories(../../../ADM_audiocodec)
-include_directories(ADM_liba52)
-
-SET(ADM_ad_a52_SRCS         ADM_ad_a52.cpp )
-
 ADD_LIBRARY(ADM_ad_a52 SHARED ${ADM_ad_a52_SRCS})
 TARGET_LINK_LIBRARIES(ADM_ad_a52 ADM_liba52)
 
+# FIXME
+ADD_TARGET_CFLAGS(ADM_ad_a52 "-I${CMAKE_BINARY_DIR}/config/cli")
+ADD_TARGET_CFLAGS(ADM_ad_a52 "-I${CMAKE_SOURCE_DIR}/avidemux/ADM_audiocodec")
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/CMakeLists.txt	2008-03-08 09:33:15 UTC (rev 3851)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/CMakeLists.txt	2008-03-08 09:56:14 UTC (rev 3852)
@@ -1,11 +1,7 @@
-##
-##
-##
+SET(ADM_ad_faad_SRCS ADM_ad_faad.cpp )
 
-include_directories(../../)
-include_directories(../../../ADM_audiocodec)
-
-SET(ADM_ad_faad_SRCS         ADM_ad_faad.cpp )
-
 ADD_LIBRARY(ADM_ad_faad SHARED ${ADM_ad_faad_SRCS})
 
+# FIXME
+ADD_TARGET_CFLAGS(ADM_ad_faad "-I${CMAKE_BINARY_DIR}/config/cli")
+ADD_TARGET_CFLAGS(ADM_ad_faad "-I${CMAKE_SOURCE_DIR}/avidemux/ADM_audiocodec")
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/ADM_ad_mad.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/ADM_ad_mad.cpp	2008-03-08 09:33:15 UTC (rev 3851)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/ADM_ad_mad.cpp	2008-03-08 09:56:14 UTC (rev 3852)
@@ -18,7 +18,7 @@
 #include "ADM_ad_plugin.h"
 
 #ifdef USE_MP3
-#include "../ADM_libMad/mad.h"
+#include "ADM_libMad/mad.h"
 #define Stream ((mad_stream *)_stream)
 #define Frame ((mad_frame *)_frame)
 #define Synth ((mad_synth *)_synth)

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/ADM_libMad/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/ADM_libMad/CMakeLists.txt	2008-03-08 09:33:15 UTC (rev 3851)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/ADM_libMad/CMakeLists.txt	2008-03-08 09:56:14 UTC (rev 3852)
@@ -5,4 +5,19 @@
 	stream.c  synth.c  timer.c  version.c)
 
 ADD_LIBRARY(${ADM_LIB} STATIC ${${ADM_LIB}_SRCS})
-add_definitions(-fPIC)
+
+IF (UNIX)
+	ADD_TARGET_CFLAGS(${ADM_LIB} -fPIC)
+ENDIF (UNIX)
+
+INCLUDE(admLibMad)
+GET_MAD_CFLAGS(MAD_CFLAGS)
+
+ADD_TARGET_CFLAGS(${ADM_LIB} ${MAD_CFLAGS})
+
+IF (ADM_BIG_ENDIAN)
+	ADD_TARGET_CFLAGS(${ADM_LIB} "-DWORDS_BIGENDIAN")
+ENDIF (ADM_BIG_ENDIAN)
+
+# FIXME
+ADD_TARGET_CFLAGS(${ADM_LIB} "-I${CMAKE_BINARY_DIR}/config/cli")
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/CMakeLists.txt	2008-03-08 09:33:15 UTC (rev 3851)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/CMakeLists.txt	2008-03-08 09:56:14 UTC (rev 3852)
@@ -1,17 +1,15 @@
-##
-##
-##
+ADD_SUBDIRECTORY(ADM_libMad)
 
-subdirs(PREORDER ADM_libMad)
+SET(ADM_ad_Mad_SRCS ADM_ad_mad.cpp)
 
-
-
-include_directories(../../)
-include_directories(../../../ADM_audiocodec)
-include_directories(ADM_libMad)
-
-SET(ADM_ad_Mad_SRCS         ADM_ad_mad.cpp )
-
 ADD_LIBRARY(ADM_ad_Mad SHARED ${ADM_ad_Mad_SRCS})
 TARGET_LINK_LIBRARIES(ADM_ad_Mad ADM_libMad)
 
+INCLUDE(admLibMad)
+GET_MAD_CFLAGS(MAD_CFLAGS)
+
+ADD_TARGET_CFLAGS(ADM_ad_Mad ${MAD_CFLAGS})
+
+# FIXME
+ADD_TARGET_CFLAGS(ADM_ad_Mad "-I${CMAKE_BINARY_DIR}/config/cli")
+ADD_TARGET_CFLAGS(ADM_ad_Mad "-I${CMAKE_SOURCE_DIR}/avidemux/ADM_audiocodec")
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_vorbis/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_vorbis/CMakeLists.txt	2008-03-08 09:33:15 UTC (rev 3851)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_vorbis/CMakeLists.txt	2008-03-08 09:56:14 UTC (rev 3852)
@@ -1,11 +1,7 @@
-##
-##
-##
+SET(ADM_ad_vorbis_SRCS ADM_ad_vorbis.cpp )
 
-include_directories(../../)
-include_directories(../../../ADM_audiocodec)
-
-SET(ADM_ad_vorbis_SRCS         ADM_ad_vorbis.cpp )
-
 ADD_LIBRARY(ADM_ad_vorbis SHARED ${ADM_ad_vorbis_SRCS})
 
+# FIXME
+ADD_TARGET_CFLAGS(ADM_ad_vorbis "-I${CMAKE_BINARY_DIR}/config/cli")
+ADD_TARGET_CFLAGS(ADM_ad_vorbis "-I${CMAKE_SOURCE_DIR}/avidemux/ADM_audiocodec")
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/CMakeLists.txt	2008-03-08 09:33:15 UTC (rev 3851)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/CMakeLists.txt	2008-03-08 09:56:14 UTC (rev 3852)
@@ -1,4 +1,4 @@
-subdirs(PREORDER ADM_ad_ac3)
-subdirs(PREORDER ADM_ad_mad)
-subdirs(PREORDER ADM_ad_faad)
-subdirs(PREORDER ADM_ad_vorbis)
+ADD_SUBDIRECTORY(ADM_ad_ac3)
+ADD_SUBDIRECTORY(ADM_ad_faad)
+ADD_SUBDIRECTORY(ADM_ad_mad)
+ADD_SUBDIRECTORY(ADM_ad_vorbis)

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/CMakeLists.txt	2008-03-08 09:33:15 UTC (rev 3851)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/CMakeLists.txt	2008-03-08 09:56:14 UTC (rev 3852)
@@ -1 +1 @@
-subdirs(PREORDER ADM_audiodecoder)
+ADD_SUBDIRECTORY(ADM_audiodecoder)



From mean at mail.berlios.de  Sat Mar  8 11:17:00 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 8 Mar 2008 11:17:00 +0100
Subject: [Avidemux-svn-commit] r3853 -
	branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui
Message-ID: <200803081017.m28AH0PO017905@sheep.berlios.de>

Author: mean
Date: 2008-03-08 11:16:59 +0100 (Sat, 08 Mar 2008)
New Revision: 3853

Modified:
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/Q_gui2.cpp
Log:
[Patch] Manually merged 2nd part of r3851


Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/Q_gui2.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/Q_gui2.cpp	2008-03-08 09:56:14 UTC (rev 3852)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/Q_gui2.cpp	2008-03-08 10:16:59 UTC (rev 3853)
@@ -42,7 +42,7 @@
 extern int global_argc;
 extern char **global_argv;
 
-extern uint8_t UI_getPhysicalScreenSize(uint32_t *w,uint32_t *h);
+extern uint8_t UI_getPhysicalScreenSize(void *window,uint32_t *w,uint32_t *h);
 extern int automation(void );
 extern void HandleAction(Action a);
 extern uint32_t encoderGetNbEncoder (void);
@@ -623,16 +623,18 @@
 
 	loadTranslator();
 
-	uint32_t w, h;
+	
 
-	UI_getPhysicalScreenSize(&w,&h);
-	printf("The screen seems to be %u x %u px\n",w,h);
-
 	MainWindow *mw = new MainWindow();
 	mw->show();
 
 	QuiMainWindows = (QWidget*)mw;
+	uint32_t w, h;
 
+	UI_getPhysicalScreenSize(QuiMainWindows, &w,&h);
+	printf("The screen seems to be %u x %u px\n",w,h);
+
+
 	UI_QT4VideoWidget(mw->ui.frame_video);  // Add the widget that will handle video display
 	UI_updateRecentMenu();
 	setupMenus();



From mean at mail.berlios.de  Sat Mar  8 15:50:50 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 8 Mar 2008 15:50:50 +0100
Subject: [Avidemux-svn-commit] r3854 - in
	branches/avidemux_2.5_branch_mean_merged/avidemux: .
	ADM_audiocodec plugins/ADM_audiodecoder/ADM_ad_faad
	plugins/ADM_audiodecoder/ADM_ad_vorbis
Message-ID: <200803081450.m28Eoohe001783@sheep.berlios.de>

Author: mean
Date: 2008-03-08 15:50:49 +0100 (Sat, 08 Mar 2008)
New Revision: 3854

Modified:
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiocodec/ADM_audiocodec.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiocodec/ADM_audiocodec.h
   branches/avidemux_2.5_branch_mean_merged/avidemux/CMakeLists.txt
   branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/CMakeLists.txt
   branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_vorbis/CMakeLists.txt
Log:
[AudioPlugin] Fix cmake, remove unresolved audiocodec


Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiocodec/ADM_audiocodec.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiocodec/ADM_audiocodec.cpp	2008-03-08 10:16:59 UTC (rev 3853)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiocodec/ADM_audiocodec.cpp	2008-03-08 14:50:49 UTC (rev 3854)
@@ -14,22 +14,18 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include "ADM_assert.h"
-#include <math.h>
 
-#include "config.h"
-
-#include "fourcc.h"
+#include "ADM_default.h"
 #include "ADM_audio/aviaudio.hxx"
 #include "ADM_audiocodec/ADM_audiocodec.h"
 #include "ADM_audiofilter/audiofilter_channel_route.h"
 #include "ADM_libraries/ADM_libwrapper/libwrapper_global.h"
 
 extern ADM_Audiocodec *ADM_ad_searchCodec(uint32_t fourcc,	WAVHeader *info,uint32_t extraLength,uint8_t *extraData);
-
+/**
+ * 	\fn getAudioCodec
+ *  \brief instantiate an audio decoder using the parameters as type/parameters..
+ */
 ADM_Audiocodec	*getAudioCodec(uint32_t fourcc,WAVHeader *info,uint32_t extra,uint8_t *extraData)
 {
 ADM_Audiocodec *out = NULL;
@@ -140,11 +136,3 @@
 	return out;
 }
 
-ADM_Audiocodec::ADM_Audiocodec( uint32_t fourcc ) {
-    UNUSED_ARG(fourcc);
-	_init=0;
-}
-
-ADM_Audiocodec::~ADM_Audiocodec()
-{}
-

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiocodec/ADM_audiocodec.h
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiocodec/ADM_audiocodec.h	2008-03-08 10:16:59 UTC (rev 3853)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiocodec/ADM_audiocodec.h	2008-03-08 14:50:49 UTC (rev 3854)
@@ -19,14 +19,15 @@
 #define SCRATCH_PAD_SIZE (100*1000*2)
 extern uint8_t scratchPad[];
 #define  ADMAC_BUFFER (48000*4)
+
 class ADM_Audiocodec
 {
 	protected:
 		uint8_t	_init;
 		WAVHeader *_wavHeader;
 	public:
-		ADM_Audiocodec(uint32_t fourcc);
-		virtual	~ADM_Audiocodec();
+		ADM_Audiocodec(uint32_t fourcc) {UNUSED_ARG(fourcc);_init=0;};
+		virtual	~ADM_Audiocodec() {};
 		virtual	void purge(void) {}
 		virtual	uint8_t beginDecompress(void)=0;
 		virtual	uint8_t endDecompress(void)=0;

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/CMakeLists.txt	2008-03-08 10:16:59 UTC (rev 3853)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/CMakeLists.txt	2008-03-08 14:50:49 UTC (rev 3854)
@@ -428,7 +428,7 @@
 	ADD_LIB_ALL_TARGETS("${LAME_LIBRARY_DIR}")
 ENDIF (HAVE_LIBMP3LAME)
 
-# Vorbis
+# Vorbis, need for encoder
 IF (USE_VORBIS)
 	ADD_LIB_ALL_TARGETS("${VORBIS_LIBRARY_DIR}")
 	ADD_LIB_ALL_TARGETS("${VORBISENC_LIBRARY_DIR}")
@@ -445,9 +445,9 @@
 ENDIF (USE_AFTEN)
 
 # FAAD
-IF (USE_FAAD)
-	ADD_LIB_ALL_TARGETS("${FAAD_LIBRARY_DIR}")
-ENDIF (USE_FAAD)
+#IF (USE_FAAD)
+#	ADD_LIB_ALL_TARGETS("${FAAD_LIBRARY_DIR}")
+#ENDIF (USE_FAAD)
 
 # Secret Rabbit Code
 IF (USE_SRC)

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/CMakeLists.txt	2008-03-08 10:16:59 UTC (rev 3853)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/CMakeLists.txt	2008-03-08 14:50:49 UTC (rev 3854)
@@ -1,3 +1,4 @@
+IF (USE_FAAD)
 SET(ADM_ad_faad_SRCS ADM_ad_faad.cpp )
 
 ADD_LIBRARY(ADM_ad_faad SHARED ${ADM_ad_faad_SRCS})
@@ -4,4 +5,7 @@
 
 # FIXME
 ADD_TARGET_CFLAGS(ADM_ad_faad "-I${CMAKE_BINARY_DIR}/config/cli")
-ADD_TARGET_CFLAGS(ADM_ad_faad "-I${CMAKE_SOURCE_DIR}/avidemux/ADM_audiocodec")
\ No newline at end of file
+ADD_TARGET_CFLAGS(ADM_ad_faad "-I${CMAKE_SOURCE_DIR}/avidemux/ADM_audiocodec")
+
+TARGET_LINK_LIBRARIES(ADM_ad_faad  ${FAAD_LIBRARY_DIR})
+ENDIF (USE_FAAD)
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_vorbis/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_vorbis/CMakeLists.txt	2008-03-08 10:16:59 UTC (rev 3853)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_vorbis/CMakeLists.txt	2008-03-08 14:50:49 UTC (rev 3854)
@@ -1,3 +1,5 @@
+IF (USE_VORBIS)
+	
 SET(ADM_ad_vorbis_SRCS ADM_ad_vorbis.cpp )
 
 ADD_LIBRARY(ADM_ad_vorbis SHARED ${ADM_ad_vorbis_SRCS})
@@ -4,4 +6,7 @@
 
 # FIXME
 ADD_TARGET_CFLAGS(ADM_ad_vorbis "-I${CMAKE_BINARY_DIR}/config/cli")
-ADD_TARGET_CFLAGS(ADM_ad_vorbis "-I${CMAKE_SOURCE_DIR}/avidemux/ADM_audiocodec")
\ No newline at end of file
+ADD_TARGET_CFLAGS(ADM_ad_vorbis "-I${CMAKE_SOURCE_DIR}/avidemux/ADM_audiocodec")
+TARGET_LINK_LIBRARIES(ADM_ad_vorbis  ${VORBIS_LIBRARY_DIR})
+TARGET_LINK_LIBRARIES(ADM_ad_vorbis  ${VORBISENC_LIBRARY_DIR})
+ENDIF (USE_VORBIS)
\ No newline at end of file



From mean at mail.berlios.de  Sun Mar  9 11:22:37 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 9 Mar 2008 11:22:37 +0100
Subject: [Avidemux-svn-commit] r3855 - in
	branches/avidemux_2.5_branch_mean_merged/avidemux:
	ADM_audiocodec plugins/ADM_audiodecoder/ADM_ad_ac3
	plugins/ADM_audiodecoder/ADM_ad_faad
	plugins/ADM_audiodecoder/ADM_ad_vorbis
Message-ID: <200803091022.m29AMbJp024502@sheep.berlios.de>

Author: mean
Date: 2008-03-09 11:22:37 +0100 (Sun, 09 Mar 2008)
New Revision: 3855

Modified:
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiocodec/ADM_audiocodec.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiocodec/ADM_audiocodec.h
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiocodec/ADM_lpcm.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_ad_a52.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/ADM_ad_faad.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_vorbis/ADM_ad_vorbis.cpp
Log:
[Audiocodec] Make them export their channel map


Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiocodec/ADM_audiocodec.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiocodec/ADM_audiocodec.cpp	2008-03-08 14:50:49 UTC (rev 3854)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiocodec/ADM_audiocodec.cpp	2008-03-09 10:22:37 UTC (rev 3855)
@@ -124,15 +124,20 @@
 		printf("\n Unknown codec : %lu",fourcc);
 		out = (ADM_Audiocodec *) new ADM_AudiocodecUnknown(fourcc);
 	}
-        if(info->channels==1)
-        {
-            ch_route.input_type[0] = CH_MONO;
-        }else
-        {
-	   ch_route.input_type[0] = CH_FRONT_LEFT;
-	   ch_route.input_type[1] = CH_FRONT_RIGHT;
-        }
-
+	// For channel mapping, simple case we do it here so that the decoder does not have
+	// to worry.
+	// For more complicated case (channel >2) , it is up to the decoder to do it...
+	switch(info->channels)
+	{
+			case 1: out->channelMapping[0] = CH_MONO;
+					break;
+			case 2: out->channelMapping[0] = CH_FRONT_LEFT;
+					out->channelMapping[1] = CH_FRONT_RIGHT;
+					break;
+			default:break;
+	
+	
+	}
 	return out;
 }
 

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiocodec/ADM_audiocodec.h
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiocodec/ADM_audiocodec.h	2008-03-08 14:50:49 UTC (rev 3854)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiocodec/ADM_audiocodec.h	2008-03-09 10:22:37 UTC (rev 3855)
@@ -16,6 +16,7 @@
  ***************************************************************************/
 #ifndef ADMAUDIOCODEC
 #define ADMAUDIOCODEC
+
 #define SCRATCH_PAD_SIZE (100*1000*2)
 extern uint8_t scratchPad[];
 #define  ADMAC_BUFFER (48000*4)
@@ -34,6 +35,8 @@
 		virtual	uint8_t run(uint8_t *inptr, uint32_t nbIn, float *outptr, uint32_t *nbOut)=0;
 		virtual	uint8_t isCompressed(void)=0;
 		virtual	uint8_t isDecompressable(void)=0;
+		// Channel mapping, only input is used by the decoders..
+		CHANNEL_TYPE channelMapping[MAX_CHANNELS];
  };
 
 ADM_Audiocodec	*getAudioCodec(uint32_t fourcc, WAVHeader *info, uint32_t extra=0, uint8_t *extraData=NULL);

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiocodec/ADM_lpcm.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiocodec/ADM_lpcm.cpp	2008-03-08 14:50:49 UTC (rev 3854)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiocodec/ADM_lpcm.cpp	2008-03-09 10:22:37 UTC (rev 3855)
@@ -33,12 +33,12 @@
 
 ADM_AudiocodecWavSwapped::ADM_AudiocodecWavSwapped( uint32_t fourcc ) : ADM_Audiocodec(fourcc)
 {
-	ch_route.input_type[0] = CH_FRONT_LEFT;
-	ch_route.input_type[1] = CH_FRONT_RIGHT;
-	ch_route.input_type[2] = CH_FRONT_CENTER;
-	ch_route.input_type[3] = CH_LFE;
-	ch_route.input_type[4] = CH_REAR_LEFT;
-	ch_route.input_type[5] = CH_REAR_RIGHT;
+	channelMapping[0] = CH_FRONT_LEFT;
+	channelMapping[1] = CH_FRONT_RIGHT;
+	channelMapping[2] = CH_FRONT_CENTER;
+	channelMapping[3] = CH_LFE;
+	channelMapping[4] = CH_REAR_LEFT;
+	channelMapping[5] = CH_REAR_RIGHT;
 }
 
 ADM_AudiocodecWavSwapped::~ADM_AudiocodecWavSwapped()

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_ad_a52.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_ad_a52.cpp	2008-03-08 14:50:49 UTC (rev 3854)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_ad_a52.cpp	2008-03-09 10:22:37 UTC (rev 3855)
@@ -16,7 +16,7 @@
  ***************************************************************************/
 #include "ADM_default.h"
 #include "ADM_ad_plugin.h"
-#include "ADM_audiofilter/audiofilter_channel_route.h"
+
 #ifdef USE_AC3
 extern "C" {
 #include "ADM_liba52/a52.h"
@@ -131,8 +131,8 @@
             break;
         }
 
-	if (ch_route.mode < 1) {
-		CHANNEL_TYPE *p_ch_type = ch_route.input_type;
+
+		CHANNEL_TYPE *p_ch_type = channelMapping;
 		if (flags & A52_LFE) {
 			*(p_ch_type++) = CH_LFE;
 		}
@@ -177,7 +177,7 @@
 			default:
 				ADM_assert(0);
 		}
-	}
+	
 
         sample_t level = 1, bias = 0;
 

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/ADM_ad_faad.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/ADM_ad_faad.cpp	2008-03-08 14:50:49 UTC (rev 3854)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/ADM_ad_faad.cpp	2008-03-09 10:22:37 UTC (rev 3855)
@@ -92,12 +92,12 @@
 			
 		}
 
-	ch_route.input_type[0] = CH_FRONT_CENTER;
-	ch_route.input_type[1] = CH_FRONT_LEFT;
-	ch_route.input_type[2] = CH_FRONT_RIGHT;
-	ch_route.input_type[3] = CH_REAR_LEFT;
-	ch_route.input_type[4] = CH_REAR_RIGHT;
-	ch_route.input_type[5] = CH_LFE;
+		channelMapping[0] = CH_FRONT_CENTER;
+		channelMapping[1] = CH_FRONT_LEFT;
+		channelMapping[2] = CH_FRONT_RIGHT;
+		channelMapping[3] = CH_REAR_LEFT;
+		channelMapping[4] = CH_REAR_RIGHT;
+		channelMapping[5] = CH_LFE;
 
 		printf("[FAAD]Faad decoder created\n");
 }

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_vorbis/ADM_ad_vorbis.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_vorbis/ADM_ad_vorbis.cpp	2008-03-08 14:50:49 UTC (rev 3854)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_vorbis/ADM_ad_vorbis.cpp	2008-03-09 10:22:37 UTC (rev 3855)
@@ -27,8 +27,8 @@
  ***************************************************************************/
 #include "ADM_default.h"
 #include "ADM_ad_plugin.h"
-#include "ADM_audiofilter/audiofilter_channel_route.h"
 
+
 #include <vorbis/codec.h>
 #include "ADM_ad_vorbis.h"
 
@@ -158,12 +158,12 @@
 	STRUCT->ampscale=1;
 	_init=1;
 
-	ch_route.input_type[0] = CH_FRONT_LEFT;
-	ch_route.input_type[1] = CH_FRONT_RIGHT;
-	ch_route.input_type[2] = CH_REAR_LEFT;
-	ch_route.input_type[3] = CH_REAR_RIGHT;
-	ch_route.input_type[4] = CH_FRONT_CENTER;
-	ch_route.input_type[5] = CH_LFE;
+	channelMapping[0] = CH_FRONT_LEFT;
+	channelMapping[1] = CH_FRONT_RIGHT;
+	channelMapping[2] = CH_REAR_LEFT;
+	channelMapping[3] = CH_REAR_RIGHT;
+	channelMapping[4] = CH_FRONT_CENTER;
+	channelMapping[5] = CH_LFE;
  }
  // This codec expects more or less one packet at a time !
  



From mean at mail.berlios.de  Sun Mar  9 11:22:39 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 9 Mar 2008 11:22:39 +0100
Subject: [Avidemux-svn-commit] r3856 -
	branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audio
Message-ID: <200803091022.m29AMdMM024512@sheep.berlios.de>

Author: mean
Date: 2008-03-09 11:22:38 +0100 (Sun, 09 Mar 2008)
New Revision: 3856

Modified:
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audio/ADM_audiodef.h
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audio/audiogen.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audio/aviaudio.hxx
Log:
[Audio] Localize channel mapping : enhance base def


Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audio/ADM_audiodef.h
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audio/ADM_audiodef.h	2008-03-09 10:22:37 UTC (rev 3855)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audio/ADM_audiodef.h	2008-03-09 10:22:38 UTC (rev 3856)
@@ -32,6 +32,26 @@
     CHANNEL_LAST
 } CHANNEL_CONF;
 
+#define MAX_CHANNELS 9
+
+typedef enum 
+{
+	CH_INVALID=0,
+	CH_MONO,
+	CH_FRONT_LEFT,
+	CH_FRONT_RIGHT,
+	CH_FRONT_CENTER,
+	CH_REAR_LEFT,
+	CH_REAR_RIGHT,
+	CH_REAR_CENTER,
+	CH_SIDE_LEFT,
+	CH_SIDE_RIGHT,
+	CH_LFE
+}CHANNEL_TYPE;
+// returns true if channel mapping is identical
+bool ADM_audioCompareChannelMapping(WAVHeader *wh1, WAVHeader *wh2,CHANNEL_TYPE *map1,CHANNEL_TYPE *map2);
+
+
 typedef struct
 {
   const char    *desc;

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audio/audiogen.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audio/audiogen.cpp	2008-03-09 10:22:37 UTC (rev 3855)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audio/audiogen.cpp	2008-03-09 10:22:38 UTC (rev 3856)
@@ -531,4 +531,23 @@
     return 1;
 
 }
+/**
+ * 	\fn ADM_audioCompareChannelMapping
+ *  \brief return true if the two channel mapping are identical, false else.
+ */
+bool ADM_audioCompareChannelMapping(WAVHeader *wh1, WAVHeader *wh2,CHANNEL_TYPE *map1,CHANNEL_TYPE *map2)
+{
+	if(wh1->channels != wh2->channels) return false; // cannot be identical..
+		
+			for (int j = 0; j < wh1->channels; j++)
+			{
+				if (map1[j] != map2[j]) 
+				{
+					return false;
+					
+				}
+			}
+	return true;
+}
+
 //

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audio/aviaudio.hxx
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audio/aviaudio.hxx	2008-03-09 10:22:37 UTC (rev 3855)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audio/aviaudio.hxx	2008-03-09 10:22:38 UTC (rev 3856)
@@ -77,6 +77,7 @@
 class AVDMGenericAudioStream
 {
    	protected:
+   				
     #define SIZE_INTERNAL 64*1024 
 					uint8_t 	internalBuffer[2 * SIZE_INTERNAL];
 					float 	internalBuffer_float[SIZE_INTERNAL];
@@ -163,10 +164,14 @@
 										uint32_t *samples);
 		// Return 1 if needs special muxing mode (AAC)			
 			virtual uint8_t packetPerFrame( void)	{return 0;} 
+				// The channel mapping for this stream
+				// Only used by decoder...
+			virtual CHANNEL_TYPE *getChannelMapping(void) {if(_codec) return _codec->channelMapping; else return NULL;}
 }
 ;
+/* Describe the channel mapping */
 
-
+//
 uint8_t mpegAudioIdentify(uint8_t *ptr, uint32_t maxLookUp, WAVHeader *header, uint8_t *tokens=NULL);
 
 #endif



From mean at mail.berlios.de  Sun Mar  9 11:22:40 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 9 Mar 2008 11:22:40 +0100
Subject: [Avidemux-svn-commit] r3857 -
	branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter
Message-ID: <200803091022.m29AMe6n024522@sheep.berlios.de>

Author: mean
Date: 2008-03-09 11:22:39 +0100 (Sun, 09 Mar 2008)
New Revision: 3857

Modified:
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/audioencoder.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/audioencoder.h
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/audioencoder_faac.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/audioencoder_vorbis.cpp
Log:
[Audio] Localize channel mapping : encoder use remapping


Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/audioencoder.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/audioencoder.cpp	2008-03-09 10:22:38 UTC (rev 3856)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/audioencoder.cpp	2008-03-09 10:22:39 UTC (rev 3857)
@@ -38,8 +38,7 @@
   tmpbuffer=new float[_wavheader->frequency*_wavheader->channels];
   tmphead=tmptail=0;
   eof_met=0;
-  ch_order[0] = CH_FRONT_LEFT;
-  ch_order[1] = CH_FRONT_RIGHT;
+  
 };
 /********************/
 AUDMEncoder::~AUDMEncoder()
@@ -134,27 +133,29 @@
 			nr = 0;
 	}
 }
-
-void AUDMEncoder::reorderChannels(float *data, uint32_t nb)
+/**
+ * 	\fn reorderChannels
+ *  \brief Reorder the channels
+ */
+void AUDMEncoder::reorderChannels(float *data, uint32_t nb,CHANNEL_TYPE *input,CHANNEL_TYPE *output)
 {
 	float tmp [_wavheader->channels];
 	static uint8_t reorder[MAX_CHANNELS];
 	static bool reorder_on;
 	
-	if (ch_route.mode < 1) {
+	
 		reorder_on = 0;
 		int j = 0;
-
-		if (_wavheader->channels > 2) {
+		// Should we reorder the channels (might be needed for encoder ?
+		if (_wavheader->channels > 2) 
+		{
 			CHANNEL_TYPE *p_ch_type;
-			if (ch_route.copy)
- 				p_ch_type = ch_route.input_type;
-			else
- 				p_ch_type = ch_route.output_type;
-
-			for (int i = 0; i < MAX_CHANNELS; i++) {
-				for (int c = 0; c < _wavheader->channels; c++) {
-					if (p_ch_type[c] == ch_order[i]) {
+			for (int i = 0; i < _wavheader->channels; i++) 
+			{
+				for (int c = 0; c < _wavheader->channels; c++) 
+				{
+					if (input[c] == output[i]) 
+					{
 						if (j != c)
 							reorder_on = 1;
 						reorder[j++] = c;
@@ -162,9 +163,7 @@
 				}
 			}
 		}
-		if (ch_route.mode == 0)
-			ch_route.mode = 1;
-	}
+	
 
 	if (reorder_on)
 		for (int i = 0; i < nb; i++) {

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/audioencoder.h
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/audioencoder.h	2008-03-09 10:22:38 UTC (rev 3856)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/audioencoder.h	2008-03-09 10:22:39 UTC (rev 3857)
@@ -56,10 +56,12 @@
     float          *tmpbuffer;
     uint8_t        refillBuffer(int minimum); // Mininum is in float
 
-    CHANNEL_TYPE ch_order[MAX_CHANNELS];
-    void reorderChannels(float *start, uint32_t nb);
+    
+    void reorderChannels(float *data, uint32_t nb,CHANNEL_TYPE *input,CHANNEL_TYPE *output);
 
     uint32_t       tmphead,tmptail;
+    // The encoder can remap the audio channel (or not). If so, let's store the the configuration here
+    CHANNEL_TYPE outputChannelMapping[MAX_CHANNELS];
   public:
     //
     uint32_t read(uint32_t len,uint8_t *buffer);

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/audioencoder_faac.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/audioencoder_faac.cpp	2008-03-09 10:22:38 UTC (rev 3856)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/audioencoder_faac.cpp	2008-03-09 10:22:39 UTC (rev 3857)
@@ -40,18 +40,18 @@
   channels=instream->getInfo()->channels;
   switch(channels)
   {
-    case 1:ch_order[1] = CH_FRONT_LEFT;break;
+    case 1:outputChannelMapping[1] = CH_FRONT_LEFT;break;
     case 2:
-      ch_order[0] = CH_FRONT_LEFT;
-      ch_order[1] = CH_FRONT_RIGHT;
+    	outputChannelMapping[0] = CH_FRONT_LEFT;
+    	outputChannelMapping[1] = CH_FRONT_RIGHT;
       break;
     default :
-      ch_order[0] = CH_FRONT_CENTER;
-      ch_order[1] = CH_FRONT_LEFT;
-      ch_order[2] = CH_FRONT_RIGHT;
-      ch_order[3] = CH_REAR_LEFT;
-      ch_order[4] = CH_REAR_RIGHT;
-      ch_order[5] = CH_LFE;
+    	outputChannelMapping[0] = CH_FRONT_CENTER;
+    	outputChannelMapping[1] = CH_FRONT_LEFT;
+    	outputChannelMapping[2] = CH_FRONT_RIGHT;
+    	outputChannelMapping[3] = CH_REAR_LEFT;
+    	outputChannelMapping[4] = CH_REAR_RIGHT;
+    	outputChannelMapping[5] = CH_LFE;
   }
 };
 
@@ -207,7 +207,7 @@
           return 0; 
         }
         ADM_assert(tmptail>=tmphead);
-        reorderChannels(&(tmpbuffer[tmphead]),*samples);
+        reorderChannels(&(tmpbuffer[tmphead]),*samples,_incoming->getChannelMapping(),outputChannelMapping);
         *len = faacEncEncode(_handle, (int32_t *)&(tmpbuffer[tmphead]), _chunk, dest, FA_BUFFER_SIZE);
         if(!*len) 
         {

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/audioencoder_vorbis.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/audioencoder_vorbis.cpp	2008-03-09 10:22:38 UTC (rev 3856)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/audioencoder_vorbis.cpp	2008-03-09 10:22:39 UTC (rev 3857)
@@ -56,12 +56,12 @@
   _wavheader->encoding=WAV_OGG;
   _oldpos=0;
   _handle=(void *)new  vorbisStruct; 
-  ch_order[0] = CH_FRONT_LEFT;
-  ch_order[1] = CH_FRONT_RIGHT;
-  ch_order[2] = CH_REAR_LEFT;
-  ch_order[3] = CH_REAR_RIGHT;
-  ch_order[4] = CH_FRONT_CENTER;
-  ch_order[5] = CH_LFE;
+  outputChannelMapping[0] = CH_FRONT_LEFT;
+  outputChannelMapping[1] = CH_FRONT_RIGHT;
+  outputChannelMapping[2] = CH_REAR_LEFT;
+  outputChannelMapping[3] = CH_REAR_RIGHT;
+  outputChannelMapping[4] = CH_FRONT_CENTER;
+  outputChannelMapping[5] = CH_LFE;
 };
 
 
@@ -228,7 +228,7 @@
     float_samples=vorbis_analysis_buffer(&VD, nbSample) ;
     int index=tmphead;
     // Put our samples in incoming buffer
-    reorderChannels(&(tmpbuffer[tmphead]), nbSample);
+    reorderChannels(&(tmpbuffer[tmphead]), nbSample,_incoming->getChannelMapping(),outputChannelMapping);
     for (int i = 0; i < nbSample; i++)
       for (int j = 0; j < _wavheader->channels; j++) {
       float_samples[j][i] = tmpbuffer[index++];



From mean at mail.berlios.de  Sun Mar  9 11:22:41 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 9 Mar 2008 11:22:41 +0100
Subject: [Avidemux-svn-commit] r3858 -
	branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter
Message-ID: <200803091022.m29AMfrU024532@sheep.berlios.de>

Author: mean
Date: 2008-03-09 11:22:40 +0100 (Sun, 09 Mar 2008)
New Revision: 3858

Modified:
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/audiofilter_bridge.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/audiofilter_bridge.h
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/audiofilter_buildchain.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/audiofilter_mixer.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/audiofilter_mixer.h
Log:
[Audio] Localize channel mapping : filter can remap or not


Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/audiofilter_bridge.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/audiofilter_bridge.cpp	2008-03-09 10:22:39 UTC (rev 3857)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/audiofilter_bridge.cpp	2008-03-09 10:22:40 UTC (rev 3858)
@@ -12,16 +12,10 @@
  *                                                                         *
  ***************************************************************************/
 
-#include "config.h"
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
+#include "ADM_default.h"
 #include <math.h>
 
-#include "ADM_assert.h"
-
-
 #include "avifmt.h"
 #include "avifmt2.h"
 // Needed for incoming ..
@@ -177,5 +171,15 @@
   }
   return 1;
 }
-
+/**
+ * 	\fn return _incoming->getChannelMapping();
+ * \brief since it is a bridge, we translate the filter channel mapping from the audiostream channel mapping
+ */
+CHANNEL_TYPE *AUDMAudioFilter_Bridge::getChannelMapping(void) 
+{
+	ADM_assert(_incoming);
+	CHANNEL_TYPE *chan=_incoming->getChannelMapping();
+	ADM_assert(chan);
+	return chan;
+}
 //EOF

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/audiofilter_bridge.h
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/audiofilter_bridge.h	2008-03-09 10:22:39 UTC (rev 3857)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/audiofilter_bridge.h	2008-03-09 10:22:40 UTC (rev 3858)
@@ -31,6 +31,7 @@
                                                                                            // Output MAXIMUM max float value
                                                                                            // Not sample! float!
     virtual    uint8_t    rewind(void)  ;                                              // go back to the beginning
+    virtual CHANNEL_TYPE *getChannelMapping(void);
 };
 
 

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/audiofilter_buildchain.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/audiofilter_buildchain.cpp	2008-03-09 10:22:39 UTC (rev 3857)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/audiofilter_buildchain.cpp	2008-03-09 10:22:40 UTC (rev 3858)
@@ -147,10 +147,7 @@
             mixer=new AUDMAudioFilterMixer( lastFilter,audioMixing);
             lastFilter = mixer;
             filtersFloat[filtercount++] = lastFilter;
-            ch_route.copy = 0;
-          } else
-            ch_route.copy = 1;
-
+          } 
     if (audioDRC)
           {
             AUDMAudioFilterLimiter *pdrc = NULL;
@@ -286,8 +283,6 @@
   AUDMAudioFilter         *lastFilter=NULL;
   AVDMGenericAudioStream  *output=NULL;
   AUDMEncoder             *tmpfilter=NULL;
-  ch_route.mode = 0;
-
 	// if audio is set to copy, we just return the first filter
   if(!audioProcessMode())
   {

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/audiofilter_mixer.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/audiofilter_mixer.cpp	2008-03-09 10:22:39 UTC (rev 3857)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/audiofilter_mixer.cpp	2008-03-09 10:22:40 UTC (rev 3858)
@@ -12,19 +12,14 @@
  *                                                                         *
  ***************************************************************************/
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <math.h>
-
 #include "ADM_default.h"
 
 #include "audioeng_process.h"
 #include "audiofilter_mixer.h"
 #include "audiofilter_channel_route.h"
 #include "audiofilter_dolby.h"
+#include <math.h>
 
-
 AUDMAudioFilterMixer::AUDMAudioFilterMixer(AUDMAudioFilter *instream,CHANNEL_CONF out):AUDMAudioFilter (instream)
 {
     _output=out;
@@ -39,61 +34,61 @@
 	switch (_output) {
 		case CHANNEL_MONO:
 			_wavHeader.channels = 1;
-			ch_route.output_type[0] = CH_MONO;
+			outputChannelMapping[0] = CH_MONO;
 		break;
 		case CHANNEL_STEREO:
 			_wavHeader.channels = 2;
-			ch_route.output_type[0] = CH_FRONT_LEFT;
-			ch_route.output_type[1] = CH_FRONT_RIGHT;
+			outputChannelMapping[0] = CH_FRONT_LEFT;
+			outputChannelMapping[1] = CH_FRONT_RIGHT;
 		break;
 		case CHANNEL_2F_1R:
 			_wavHeader.channels = 3;
-			ch_route.output_type[0] = CH_FRONT_LEFT;
-			ch_route.output_type[1] = CH_FRONT_RIGHT;
-			ch_route.output_type[2] = CH_REAR_CENTER;
+			outputChannelMapping[0] = CH_FRONT_LEFT;
+			outputChannelMapping[1] = CH_FRONT_RIGHT;
+			outputChannelMapping[2] = CH_REAR_CENTER;
 		break;
 		case CHANNEL_3F:
 			_wavHeader.channels = 3;
-			ch_route.output_type[0] = CH_FRONT_LEFT;
-			ch_route.output_type[1] = CH_FRONT_RIGHT;
-			ch_route.output_type[2] = CH_FRONT_CENTER;
+			outputChannelMapping[0] = CH_FRONT_LEFT;
+			outputChannelMapping[1] = CH_FRONT_RIGHT;
+			outputChannelMapping[2] = CH_FRONT_CENTER;
 		break;
 		case CHANNEL_3F_1R:
 			_wavHeader.channels = 4;
-			ch_route.output_type[0] = CH_FRONT_LEFT;
-			ch_route.output_type[1] = CH_FRONT_RIGHT;
-			ch_route.output_type[2] = CH_REAR_CENTER;
-			ch_route.output_type[3] = CH_FRONT_CENTER;
+			outputChannelMapping[0] = CH_FRONT_LEFT;
+			outputChannelMapping[1] = CH_FRONT_RIGHT;
+			outputChannelMapping[2] = CH_REAR_CENTER;
+			outputChannelMapping[3] = CH_FRONT_CENTER;
 		break;
 		case CHANNEL_2F_2R:
 			_wavHeader.channels = 4;
-			ch_route.output_type[0] = CH_FRONT_LEFT;
-			ch_route.output_type[1] = CH_FRONT_RIGHT;
-			ch_route.output_type[2] = CH_REAR_LEFT;
-			ch_route.output_type[3] = CH_REAR_RIGHT;
+			outputChannelMapping[0] = CH_FRONT_LEFT;
+			outputChannelMapping[1] = CH_FRONT_RIGHT;
+			outputChannelMapping[2] = CH_REAR_LEFT;
+			outputChannelMapping[3] = CH_REAR_RIGHT;
 		break;
 		case CHANNEL_3F_2R:
 			_wavHeader.channels = 5;
-			ch_route.output_type[0] = CH_FRONT_LEFT;
-			ch_route.output_type[1] = CH_FRONT_RIGHT;
-			ch_route.output_type[2] = CH_REAR_LEFT;
-			ch_route.output_type[3] = CH_REAR_RIGHT;
-			ch_route.output_type[4] = CH_FRONT_CENTER;
+			outputChannelMapping[0] = CH_FRONT_LEFT;
+			outputChannelMapping[1] = CH_FRONT_RIGHT;
+			outputChannelMapping[2] = CH_REAR_LEFT;
+			outputChannelMapping[3] = CH_REAR_RIGHT;
+			outputChannelMapping[4] = CH_FRONT_CENTER;
 		break;
 		case CHANNEL_3F_2R_LFE:
 			_wavHeader.channels = 6;
-			ch_route.output_type[0] = CH_FRONT_LEFT;
-			ch_route.output_type[1] = CH_FRONT_RIGHT;
-			ch_route.output_type[2] = CH_REAR_LEFT;
-			ch_route.output_type[3] = CH_REAR_RIGHT;
-			ch_route.output_type[4] = CH_FRONT_CENTER;
-			ch_route.output_type[5] = CH_LFE;
+			outputChannelMapping[0] = CH_FRONT_LEFT;
+			outputChannelMapping[1] = CH_FRONT_RIGHT;
+			outputChannelMapping[2] = CH_REAR_LEFT;
+			outputChannelMapping[3] = CH_REAR_RIGHT;
+			outputChannelMapping[4] = CH_FRONT_CENTER;
+			outputChannelMapping[5] = CH_LFE;
 		break;
 		case CHANNEL_DOLBY_PROLOGIC:
 		case CHANNEL_DOLBY_PROLOGIC2:
 			_wavHeader.channels = 2;
-			ch_route.output_type[0] = CH_FRONT_LEFT;
-			ch_route.output_type[1] = CH_FRONT_RIGHT;
+			outputChannelMapping[0] = CH_FRONT_LEFT;
+			outputChannelMapping[1] = CH_FRONT_RIGHT;
 			DolbyInit();
 		break;
 	}
@@ -106,7 +101,14 @@
 //    printf("[mixer]Out   channels : %u : %u \n",_wavHeader.channels,ADM_channel_mixer[_output]);
 
 };
-
+/**
+ * 	\fn getChannelMapping
+ *  \brief That filter changes the channel mapping, output its own
+ */
+CHANNEL_TYPE    *AUDMAudioFilterMixer::getChannelMapping(void ) 
+{
+		return this->outputChannelMapping;
+}
 AUDMAudioFilterMixer::~AUDMAudioFilterMixer()
 {
 };
@@ -118,7 +120,7 @@
     
 }
 
-static int MNto1(float *in,float *out,uint32_t nbSample,uint32_t chan)
+static int MNto1(float *in,float *out,uint32_t nbSample,uint32_t chan,CHANNEL_TYPE *chanMap)
 {
 float sum;
 int den=(chan+1)&0xfe;
@@ -135,13 +137,13 @@
     
 }
 
-static int MStereo(float *in,float *out,uint32_t nbSample,uint32_t chan)
+static int MStereo(float *in,float *out,uint32_t nbSample,uint32_t chan,CHANNEL_TYPE *chanMap)
 {
 	memset(out, 0, sizeof(float) * nbSample * 2);
 
 	for (int i = 0; i < nbSample; i++) {
 		for (int c = 0; c < chan; c++) {
-			switch (ch_route.input_type[c]) {
+			switch (chanMap[c]) {
 				case CH_MONO:
 				case CH_FRONT_CENTER:
 				case CH_REAR_CENTER:
@@ -168,13 +170,13 @@
 	return nbSample*2;
 }
 
-static int M2F1R(float *in,float *out,uint32_t nbSample,uint32_t chan)
+static int M2F1R(float *in,float *out,uint32_t nbSample,uint32_t chan,CHANNEL_TYPE *chanMap)
 {
 	memset(out, 0, sizeof(float) * nbSample * 3);
 
 	for (int i = 0; i < nbSample; i++) {
 		for (int c = 0; c < chan; c++) {
-			switch (ch_route.input_type[c]) {
+			switch (chanMap[c]) {
 				case CH_MONO:
 				case CH_FRONT_CENTER:
 					out[0]  += *in * 0.707;
@@ -213,13 +215,13 @@
 	return nbSample * 3;
 }
 
-static int M3F(float *in,float *out,uint32_t nbSample,uint32_t chan)
+static int M3F(float *in,float *out,uint32_t nbSample,uint32_t chan,CHANNEL_TYPE *chanMap)
 {
 	memset(out, 0, sizeof(float) * nbSample * 3);
 
 	for (int i = 0; i < nbSample; i++) {
 		for (int c = 0; c < chan; c++) {
-			switch (ch_route.input_type[c]) {
+			switch (chanMap[c]) {
 				case CH_MONO:
 				case CH_FRONT_CENTER:
 				case CH_REAR_CENTER:
@@ -249,13 +251,13 @@
 	return nbSample * 3;
 }
 
-static int M3F1R(float *in,float *out,uint32_t nbSample,uint32_t chan)
+static int M3F1R(float *in,float *out,uint32_t nbSample,uint32_t chan,CHANNEL_TYPE *chanMap)
 {
 	memset(out, 0, sizeof(float) * nbSample * 4);
 
 	for (int i = 0; i < nbSample; i++) {
 		for (int c = 0; c < chan; c++) {
-			switch (ch_route.input_type[c]) {
+			switch (chanMap[c]) {
 				case CH_MONO:
 				case CH_FRONT_CENTER:
 					out[3]  += *in;
@@ -294,13 +296,13 @@
 	return nbSample * 4;
 }
 
-static int M2F2R(float *in,float *out,uint32_t nbSample,uint32_t chan)
+static int M2F2R(float *in,float *out,uint32_t nbSample,uint32_t chan,CHANNEL_TYPE *chanMap)
 {
 	memset(out, 0, sizeof(float) * nbSample * 4);
 
 	for (int i = 0; i < nbSample; i++) {
 		for (int c = 0; c < chan; c++) {
-			switch (ch_route.input_type[c]) {
+			switch (chanMap[c]) {
 				case CH_MONO:
 				case CH_FRONT_CENTER:
 					out[0]  += *in * 0.707;
@@ -345,13 +347,13 @@
 	return nbSample * 4;
 }
 
-static int M3F2R(float *in,float *out,uint32_t nbSample,uint32_t chan)
+static int M3F2R(float *in,float *out,uint32_t nbSample,uint32_t chan,CHANNEL_TYPE *chanMap)
 {
 	memset(out, 0, sizeof(float) * nbSample * 5);
 
 	for (int i = 0; i < nbSample; i++) {
 		for (int c = 0; c < chan; c++) {
-			switch (ch_route.input_type[c]) {
+			switch (chanMap[c]) {
 				case CH_MONO:
 				case CH_FRONT_CENTER:
 					out[4]  += *in;
@@ -396,13 +398,13 @@
 	return nbSample * 5;
 }
 
-static int M3F2RLFE(float *in,float *out,uint32_t nbSample,uint32_t chan)
+static int M3F2RLFE(float *in,float *out,uint32_t nbSample,uint32_t chan,CHANNEL_TYPE *chanMap)
 {
 	memset(out, 0, sizeof(float) * nbSample * 6);
 
 	for (int i = 0; i < nbSample; i++) {
 		for (int c = 0; c < chan; c++) {
-			switch (ch_route.input_type[c]) {
+			switch (chanMap[c]) {
 				case CH_MONO:
 				case CH_FRONT_CENTER:
 					out[4]  += *in;
@@ -443,13 +445,13 @@
 	return nbSample * 6;
 }
 
-static int MDolbyProLogic(float *in,float *out,uint32_t nbSample,uint32_t chan)
+static int MDolbyProLogic(float *in,float *out,uint32_t nbSample,uint32_t chan,CHANNEL_TYPE *chanMap)
 {
 	memset(out, 0, sizeof(float) * nbSample * 2);
 
 	for (int i = 0; i < nbSample; i++) {
 		for (int c = 0; c < chan; c++) {
-			switch (ch_route.input_type[c]) {
+			switch (chanMap[c]) {
 				case CH_MONO:
 				case CH_FRONT_CENTER:
 				case CH_LFE:
@@ -487,13 +489,13 @@
 	return nbSample*2;
 }
 
-static int MDolbyProLogic2(float *in,float *out,uint32_t nbSample,uint32_t chan)
+static int MDolbyProLogic2(float *in,float *out,uint32_t nbSample,uint32_t chan,CHANNEL_TYPE *chanMap)
 {
 	memset(out, 0, sizeof(float) * nbSample * 2);
 
 	for (int i = 0; i < nbSample; i++) {
 		for (int c = 0; c < chan; c++) {
-			switch (ch_route.input_type[c]) {
+			switch (chanMap[c]) {
 				case CH_MONO:
 				case CH_FRONT_CENTER:
 				case CH_LFE:
@@ -538,7 +540,7 @@
 }
 
 
-typedef int MIXER(float *in,float *out,uint32_t nbSample,uint32_t chan)  ;
+typedef int MIXER(float *in,float *out,uint32_t nbSample,uint32_t chan,CHANNEL_TYPE *chanMap)  ;
 
 static MIXER *matrixCall[CHANNEL_LAST] = {
 NULL, MNto1, MStereo, M2F1R, M3F, M3F1R, M2F2R, M3F2R, M3F2RLFE, MDolbyProLogic, MDolbyProLogic2
@@ -586,13 +588,15 @@
     
 
     // Now do the downsampling
-	if (_output == CHANNEL_INVALID || ch_route.compareChType(&_wavHeader, _previous->getInfo())) {
-		ch_route.copy = 1;
+	if (_output == CHANNEL_INVALID || true==ADM_audioCompareChannelMapping(&_wavHeader, _previous->getInfo(),
+			_previous->getChannelMapping(),outputChannelMapping))
+	{
+		
 		rd= (uint32_t)MCOPY(&_incomingBuffer[_head],output,available,input_channels);
-	} else {
-		ch_route.copy = 0;
+	} else 
+	{
 		MIXER *call=matrixCall[_output];
-		rd= (uint32_t)call(&_incomingBuffer[_head],output,available,input_channels);
+		rd= (uint32_t)call(&_incomingBuffer[_head],output,available,input_channels,_previous->getChannelMapping());
 	}
 
     _head+=available*input_channels;

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/audiofilter_mixer.h
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/audiofilter_mixer.h	2008-03-09 10:22:39 UTC (rev 3857)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/audiofilter_mixer.h	2008-03-09 10:22:40 UTC (rev 3858)
@@ -5,10 +5,14 @@
     protected:
         CHANNEL_CONF    _output;
         CHANNEL_CONF    _input;
+        // output channel mapping
+        CHANNEL_TYPE outputChannelMapping[MAX_CHANNELS];
     public:
 
       ~AUDMAudioFilterMixer();
       AUDMAudioFilterMixer(AUDMAudioFilter *instream,CHANNEL_CONF out);
       uint32_t   fill(uint32_t max,float *output,AUD_Status *status);
+      // That filter changes its output channel mapping...
+      virtual   CHANNEL_TYPE    *getChannelMapping(void );
 };
 #endif



From mean at mail.berlios.de  Sun Mar  9 11:22:44 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 9 Mar 2008 11:22:44 +0100
Subject: [Avidemux-svn-commit] r3860 - in
	branches/avidemux_2.5_branch_mean_merged/avidemux:
	ADM_audiofilter ADM_editor
Message-ID: <200803091022.m29AMivw024552@sheep.berlios.de>

Author: mean
Date: 2008-03-09 11:22:43 +0100 (Sun, 09 Mar 2008)
New Revision: 3860

Modified:
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/audioeng_process.h
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_editor/ADM_edAudio.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_editor/ADM_edAudio.hxx
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_editor/ADMedAVIAUD.cpp
Log:
[Audio] Localize channel mapping : finalize


Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/audioeng_process.h
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/audioeng_process.h	2008-03-09 10:22:41 UTC (rev 3859)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/audioeng_process.h	2008-03-09 10:22:43 UTC (rev 3860)
@@ -20,6 +20,7 @@
 
 #define AUD_PROCESS_BUFFER_SIZE 48000*2*4 // should be enougth 4 seconds of stereo
 #include "ADM_audio/ADM_audiodef.h"
+#include "audiofilter_channel_route.h"
 /**
   This enumerate is used to give a more accurate error when no audio is output from
   an audio filter.
@@ -61,7 +62,8 @@
     //! \param status Status of the fill operation
     virtual uint8_t fillIncomingBuffer(AUD_Status *status);
     //! length in float
-    uint32_t        _length; 
+    uint32_t        _length;
+    
   public:
 /** Constructor
     \param previous : Pointer to previous in chain filter 
@@ -86,5 +88,8 @@
 //! Rewind the stream to the beginning. Used mainly by the normalize filter 
         virtual   uint8_t    rewind(void)  ;
                   uint32_t   getLength(void) {return _length;};
+// Returns the channel mapping, by default it is the on from the previous
+// The value returned is an array up to MAX_CHANNELS                  
+        virtual   CHANNEL_TYPE    *getChannelMapping(void ) {return _previous->getChannelMapping();}
 };
 #endif

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_editor/ADM_edAudio.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_editor/ADM_edAudio.cpp	2008-03-09 10:22:41 UTC (rev 3859)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_editor/ADM_edAudio.cpp	2008-03-09 10:22:43 UTC (rev 3860)
@@ -21,20 +21,12 @@
  *                                                                         *
  ***************************************************************************/
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-//#include <stream.h>
-#include "ADM_assert.h"
+#include "ADM_default.h"
 #include <math.h>
-#include "config.h"
 #include "avifmt.h"
 #include "avifmt2.h"
 
-#include "fourcc.h"
 
-//#include "aviaudio.hxx"
-
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_editor/ADM_edAudio.hxx"
 
@@ -51,7 +43,15 @@
 }
 // Build information
 //
-
+CHANNEL_TYPE *AVDMEditAudioStream::getChannelMapping(void)
+{
+#if 0
+	return _father->getChannelMapping();
+#else
+	return AVDMGenericAudioStream::getChannelMapping();
+#endif
+	
+}
 AVDMEditAudioStream::AVDMEditAudioStream (ADM_Composer * father)
 {
   uint32_t l = 0;

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_editor/ADM_edAudio.hxx
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_editor/ADM_edAudio.hxx	2008-03-09 10:22:41 UTC (rev 3859)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_editor/ADM_edAudio.hxx	2008-03-09 10:22:43 UTC (rev 3860)
@@ -30,4 +30,5 @@
 	virtual	uint8_t		getPacket(uint8_t *dest, uint32_t *len, uint32_t *samples);
 	virtual	uint8_t		flushPacket(void);
 	virtual uint8_t		extraData(uint32_t *l,uint8_t **d);
+	virtual CHANNEL_TYPE *getChannelMapping(void);
 };

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_editor/ADMedAVIAUD.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_editor/ADMedAVIAUD.cpp	2008-03-09 10:22:41 UTC (rev 3859)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_editor/ADMedAVIAUD.cpp	2008-03-09 10:22:43 UTC (rev 3860)
@@ -47,6 +47,14 @@
 	return 1;
 
 }
+#if 0
+CHANNEL_TYPE *ADM_Composer::getChannelMapping(void)
+{
+	_VIDEOS *currentVideo;
+		currentVideo=&_videos[AUDIOSEG];
+		return currentVideo->_audiostream->getChannelMapping();
+}
+#endif
 uint8_t ADM_Composer::getAudioPacket(uint8_t *dest, uint32_t *len, uint32_t *samples)
 {
 uint8_t r;	



From mean at mail.berlios.de  Sun Mar  9 11:22:43 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 9 Mar 2008 11:22:43 +0100
Subject: [Avidemux-svn-commit] r3859 -
	branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter
Message-ID: <200803091022.m29AMh9O024542@sheep.berlios.de>

Author: mean
Date: 2008-03-09 11:22:41 +0100 (Sun, 09 Mar 2008)
New Revision: 3859

Modified:
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/audiofilter_channel_route.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/audiofilter_channel_route.h
Log:
[Audio] Localize channel mapping : obsolete channel route


Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/audiofilter_channel_route.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/audiofilter_channel_route.cpp	2008-03-09 10:22:40 UTC (rev 3858)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/audiofilter_channel_route.cpp	2008-03-09 10:22:41 UTC (rev 3859)
@@ -1,36 +1 @@
-//
-// C++ Implementation: audiofilter_channel_route
-//
-// Description: 
-//
-//
-// Author: Mihail Zenkov <kreator at tut.by>, (C) 2006
-//
-// Copyright: See COPYING file that comes with this distribution
-//
-//
-#include <stdint.h>
-#include "ADM_audio/ADM_audiodef.h"
-#include "audiofilter_channel_route.h"
-
-ChannelRoute ch_route;
-
-bool ChannelRoute::compareChType(WAVHeader *wh1, WAVHeader *wh2)
-{
-	static bool ret;
-	if (mode < 1) {
-		int i = 0;
-		if (wh1->channels == wh2->channels)
-			for (int j = 0; j < wh1->channels; j++)
-				if (input_type[i] == output_type[j]) {
-					i++;
-					if (i == wh1->channels) {
-						ret = 1;
-						return ret;
-					}
-					j = -1;
-				}
-		ret = 0;
-	}
-	return ret;
-}
+//RMED
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/audiofilter_channel_route.h
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/audiofilter_channel_route.h	2008-03-09 10:22:40 UTC (rev 3858)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/audiofilter_channel_route.h	2008-03-09 10:22:41 UTC (rev 3859)
@@ -1,52 +1 @@
-//
-// C++ Interface: audiofilter_channel_route
-//
-// Description: 
-//
-//
-// Author: Mihail Zenkov <kreator at tut.by>, (C) 2006
-//
-// Copyright: See COPYING file that comes with this distribution
-//
-//
-#ifndef AUDM_CHANNEL_ROUTE_H
-#define AUDM_CHANNEL_ROUTE_H
-
-#define MAX_CHANNELS 9
-
-typedef enum 
-{
-	CH_INVALID=0,
-	CH_MONO,
-	CH_FRONT_LEFT,
-	CH_FRONT_RIGHT,
-	CH_FRONT_CENTER,
-	CH_REAR_LEFT,
-	CH_REAR_RIGHT,
-	CH_REAR_CENTER,
-	CH_SIDE_LEFT,
-	CH_SIDE_RIGHT,
-	CH_LFE
-}CHANNEL_TYPE;
-
-class ChannelRoute
-{
-public:
-	ChannelRoute() {}
-	~ChannelRoute() {}
-
-	bool compareChType(WAVHeader *wh1, WAVHeader *wh2);
-
-	CHANNEL_TYPE input_type[MAX_CHANNELS];
-	CHANNEL_TYPE output_type[MAX_CHANNELS];
-
-	/*	-1 get parm from each chunk
-		0 get parm from first chunk
-		1 all ready inited	 */
-	int8_t mode;
-	bool copy;
-};
-
-extern ChannelRoute ch_route;
-
-#endif
+//RMED
\ No newline at end of file



From mean at mail.berlios.de  Sun Mar  9 11:30:51 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 9 Mar 2008 11:30:51 +0100
Subject: [Avidemux-svn-commit] r3861 - in
	branches/avidemux_2.5_branch_mean_merged/avidemux:
	ADM_audiocodec ADM_audiofilter plugins/ADM_audiodecoder/ADM_ad_faad
Message-ID: <200803091030.m29AUpol025183@sheep.berlios.de>

Author: mean
Date: 2008-03-09 11:30:50 +0100 (Sun, 09 Mar 2008)
New Revision: 3861

Removed:
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/audiofilter_channel_route.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/audiofilter_channel_route.h
Modified:
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiocodec/ADM_audiocodec.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiocodec/ADM_dca.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiocodec/ADM_lpcm.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/CMakeLists.txt
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/audioencoder.h
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/audioeng_process.h
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/audiofilter_mixer.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/ADM_ad_faad.cpp
Log:
[Audio] Remove *channel*route


Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiocodec/ADM_audiocodec.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiocodec/ADM_audiocodec.cpp	2008-03-09 10:22:43 UTC (rev 3860)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiocodec/ADM_audiocodec.cpp	2008-03-09 10:30:50 UTC (rev 3861)
@@ -18,7 +18,6 @@
 #include "ADM_default.h"
 #include "ADM_audio/aviaudio.hxx"
 #include "ADM_audiocodec/ADM_audiocodec.h"
-#include "ADM_audiofilter/audiofilter_channel_route.h"
 #include "ADM_libraries/ADM_libwrapper/libwrapper_global.h"
 
 extern ADM_Audiocodec *ADM_ad_searchCodec(uint32_t fourcc,	WAVHeader *info,uint32_t extraLength,uint8_t *extraData);

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiocodec/ADM_dca.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiocodec/ADM_dca.cpp	2008-03-09 10:22:43 UTC (rev 3860)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiocodec/ADM_dca.cpp	2008-03-09 10:30:50 UTC (rev 3861)
@@ -14,18 +14,13 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include "ADM_assert.h"
+#include "ADM_default.h"
 #include <math.h>
 
-#include "config.h"
-#include "fourcc.h"
 #include "ADM_audio/aviaudio.hxx"
 #include "ADM_audiocodec/ADM_audiocodec.h"
-#include "ADM_audiofilter/audiofilter_channel_route.h"
 
+
 #include "prefs.h"
 
 #ifdef USE_LIBDCA

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiocodec/ADM_lpcm.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiocodec/ADM_lpcm.cpp	2008-03-09 10:22:43 UTC (rev 3860)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiocodec/ADM_lpcm.cpp	2008-03-09 10:30:50 UTC (rev 3861)
@@ -16,21 +16,15 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-//#include <sstream>
-#include "ADM_assert.h"
+#include "ADM_default.h"
 #include <math.h>
 
-#include "config.h"
+
 #include "avifmt.h"
 #include "avifmt2.h"
-#include "fourcc.h"
-//#include "ADM_audio/aviaudio.hxx"
 #include "ADM_audiocodec/ADM_audiocodec.h"
-#include "ADM_audiofilter/audiofilter_channel_route.h"
 
+
 ADM_AudiocodecWavSwapped::ADM_AudiocodecWavSwapped( uint32_t fourcc ) : ADM_Audiocodec(fourcc)
 {
 	channelMapping[0] = CH_FRONT_LEFT;

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/CMakeLists.txt	2008-03-09 10:22:43 UTC (rev 3860)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/CMakeLists.txt	2008-03-09 10:30:50 UTC (rev 3861)
@@ -2,7 +2,7 @@
 	audiodeng_buildfilters.cpp  audioencoder_lavcodec.cpp  audioeng_process.cpp           audiofilter_film2pal.cpp   audiolib_sox.cpp
 	audioencoder_aften.cpp      audioencoder_pcm.cpp       audiofilter_bridge.cpp         audiofilter_limiter.cpp    audio_raw.cpp
 	audioencoder.cpp            audioencoder_twolame.cpp   audiofilter_buildchain.cpp     audiofilter_mixer.cpp
-	audioencoder_faac.cpp       audioencoder_vorbis.cpp    audiofilter_channel_route.cpp  audiofilter_normalize.cpp
+	audioencoder_faac.cpp       audioencoder_vorbis.cpp    audiofilter_normalize.cpp
 	audioencoder_lame.cpp       audioeng_buff.cpp          audiofilter_dolby.cpp          audiofilter_sox.cpp)
 	
 ADD_ADM_LIB_ALL_TARGETS(ADM_audiofilter ${ADMaudiofilter_SRCS})
@@ -21,4 +21,4 @@
 
 IF (USE_VORBIS)
 	ADD_SOURCE_CFLAGS(audioencoder_vorbis.cpp -I${VORBIS_INCLUDE_DIR})
-ENDIF (USE_VORBIS)
\ No newline at end of file
+ENDIF (USE_VORBIS)

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/audioencoder.h
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/audioencoder.h	2008-03-09 10:22:43 UTC (rev 3860)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/audioencoder.h	2008-03-09 10:30:50 UTC (rev 3861)
@@ -16,7 +16,6 @@
   \param param : An opaque structure that contains the codec specific configuration datas
 */
 #include "audioeng_buildfilters.h"
-#include "audiofilter_channel_route.h"
 
 typedef struct ADM_audioEncoderDescriptor
 {

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/audioeng_process.h
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/audioeng_process.h	2008-03-09 10:22:43 UTC (rev 3860)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/audioeng_process.h	2008-03-09 10:30:50 UTC (rev 3861)
@@ -20,7 +20,6 @@
 
 #define AUD_PROCESS_BUFFER_SIZE 48000*2*4 // should be enougth 4 seconds of stereo
 #include "ADM_audio/ADM_audiodef.h"
-#include "audiofilter_channel_route.h"
 /**
   This enumerate is used to give a more accurate error when no audio is output from
   an audio filter.

Deleted: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/audiofilter_channel_route.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/audiofilter_channel_route.cpp	2008-03-09 10:22:43 UTC (rev 3860)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/audiofilter_channel_route.cpp	2008-03-09 10:30:50 UTC (rev 3861)
@@ -1 +0,0 @@
-//RMED
\ No newline at end of file

Deleted: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/audiofilter_channel_route.h
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/audiofilter_channel_route.h	2008-03-09 10:22:43 UTC (rev 3860)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/audiofilter_channel_route.h	2008-03-09 10:30:50 UTC (rev 3861)
@@ -1 +0,0 @@
-//RMED
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/audiofilter_mixer.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/audiofilter_mixer.cpp	2008-03-09 10:22:43 UTC (rev 3860)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/audiofilter_mixer.cpp	2008-03-09 10:30:50 UTC (rev 3861)
@@ -16,7 +16,6 @@
 
 #include "audioeng_process.h"
 #include "audiofilter_mixer.h"
-#include "audiofilter_channel_route.h"
 #include "audiofilter_dolby.h"
 #include <math.h>
 

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/ADM_ad_faad.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/ADM_ad_faad.cpp	2008-03-09 10:22:43 UTC (rev 3860)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/ADM_ad_faad.cpp	2008-03-09 10:30:50 UTC (rev 3861)
@@ -17,7 +17,7 @@
 //
 #include "ADM_default.h"
 #include "ADM_ad_plugin.h"
-#include "ADM_audiofilter/audiofilter_channel_route.h"
+
 #include "faad.h"
 
 #define FAAD_BUFFER 2048



From mean at mail.berlios.de  Sun Mar  9 16:26:56 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 9 Mar 2008 16:26:56 +0100
Subject: [Avidemux-svn-commit] r3862 - in
	branches/avidemux_2.5_branch_mean_merged: avidemux
	avidemux/ADM_audiocodec avidemux/ADM_core/include
	avidemux/ADM_core/src avidemux/ADM_libraries/ADM_lavformat
	avidemux/ADM_osSupport avidemux/ADM_toolkit cmake
Message-ID: <200803091526.m29FQueL007723@sheep.berlios.de>

Author: mean
Date: 2008-03-09 16:26:54 +0100 (Sun, 09 Mar 2008)
New Revision: 3862

Added:
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/include/ADM_files.h
Modified:
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiocodec/ADM_pluginLoad.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/include/ADM_default.h
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/src/ADM_fileio.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_lavformat/movenc.c
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_osSupport/ADM_fileio.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_toolkit/filesel.h
   branches/avidemux_2.5_branch_mean_merged/avidemux/main.cpp
   branches/avidemux_2.5_branch_mean_merged/cmake/admCheckMiscLibs.cmake
   branches/avidemux_2.5_branch_mean_merged/cmake/config.h.cmake
Log:
[Plugins] cleanup + load plugins from system wide dir and from local dir(no more hardcoded paths


Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiocodec/ADM_pluginLoad.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiocodec/ADM_pluginLoad.cpp	2008-03-09 10:30:50 UTC (rev 3861)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiocodec/ADM_pluginLoad.cpp	2008-03-09 15:26:54 UTC (rev 3862)
@@ -44,7 +44,7 @@
 static uint8_t tryLoadingAudioPlugin(const char *file)
 {
 	ADM_ad_plugin blank;
-	printf("[ADM_ad_plugin] Scanning %s\n",ADM_GetFileName(file));
+	//printf("[ADM_ad_plugin] Scanning %s\n",ADM_GetFileName(file));
 	ADM_LibWrapper *wrapper=new ADM_LibWrapper;
 	 if(true!=wrapper->loadLibrary(file))
 	 {
@@ -91,10 +91,9 @@
  * 	\fn ADM_ad_loadPlugins
  *  \brief load all audio plugins
  */
-uint8_t ADM_ad_loadPlugins(void)
+uint8_t ADM_ad_loadPlugins(const char *path)
 {
 #define MAX_EXTERNAL_FILTER 50
-	  char *path="/home/fx/ADM_plugins";
 	  char *files[MAX_EXTERNAL_FILTER];
 	  uint32_t nbFile;
 	  

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/include/ADM_default.h
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/include/ADM_default.h	2008-03-09 10:30:50 UTC (rev 3861)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/include/ADM_default.h	2008-03-09 15:26:54 UTC (rev 3862)
@@ -35,4 +35,5 @@
 #endif
 
 #include "ADM_mangle.h"
+#include "ADM_files.h"
 #endif

Copied: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/include/ADM_files.h (from rev 3861, branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_toolkit/filesel.h)
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_toolkit/filesel.h	2008-03-09 10:30:50 UTC (rev 3861)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/include/ADM_files.h	2008-03-09 15:26:54 UTC (rev 3862)
@@ -0,0 +1,34 @@
+/** *************************************************************************
+             
+    \fn ADM_filest.h
+    \brief Helpers function to access configuration files
+                      
+    copyright            : (C) 2008 by mean
+    
+ ***************************************************************************/
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#ifndef ADM_FILES_H
+#define ADM_FILES_H
+// Returns dir to ~/.avidemux, no need to free it
+char *ADM_getBaseDir(void);
+// Returns dir to ~/.avidemux/jobs, no need to free it
+char *ADM_getJobDir(void);
+// Returns dir to ~/.avidemux/custom, no need to free it
+char *ADM_getCustomDir(void);
+#ifdef __cplusplus
+/* Returns the full path relative to install dir i.e. /usr +base1/base2, needs to be deleted [] by caller */
+char *ADM_getInstallRelativePath(const char *base1, const char *base2=NULL,const char *base3=NULL);
+/* Returns the full path relative to .avidemux dir i.e. /home/fx/... +base1/base2 needs to be deleted []*/
+char *ADM_getHomeRelativePath(const char *base1, const char *base2=NULL,const char *base3=NULL);
+#endif
+uint8_t buildDirectoryContent(uint32_t *outnb,const char *base, char *jobName[],int maxElems,const char *ext);
+
+#endif
+//EOF
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/src/ADM_fileio.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/src/ADM_fileio.cpp	2008-03-09 10:30:50 UTC (rev 3861)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/src/ADM_fileio.cpp	2008-03-09 15:26:54 UTC (rev 3862)
@@ -29,6 +29,12 @@
 #include "ADM_toolkit/filesel.h"
 #include "ADM_toolkit/toolkit.hxx"
 
+#if defined(__WIN32)
+  static const char *separator="\\"; 
+#else
+  static const char *separator="/";
+#endif
+
 #undef fread
 #undef fwrite
 #undef fopen
@@ -62,12 +68,12 @@
   return fclose(file); 
 }
 //*****************************
-static char basedir[1024]={0};
-static char jobdir[1024]={0};
-static char customdir[1024]={0};
-int baseDirDone=0;
-int jobDirDone=0;
-int customDirDone=0;
+static char ADM_basedir[1024]={0};
+static char *ADM_jobdir=NULL;
+static char *ADM_customdir=NULL;
+static int baseDirDone=0;
+
+
 #ifdef __WIN32
 const char *ADM_DIR_NAME="\\avidemux";
 #else
@@ -82,23 +88,15 @@
 
 char *ADM_getCustomDir(void)
 {
-  if(customDirDone) return customdir;
-
-  char *rootDir;
-  rootDir=ADM_getBaseDir();
-  strncpy(customdir,rootDir,1023);
-#if defined(__WIN32)
-  strcat(customdir,"\\custom"); 
-#else
-  strcat(customdir,"/custom");
-#endif
-  if(!ADM_mkdir(customdir))
+  if(ADM_customdir) return ADM_customdir;
+  ADM_customdir=ADM_getHomeRelativePath("custom");
+  
+  if(!ADM_mkdir(ADM_customdir))
   {
-    GUI_Error_HIG(QT_TR_NOOP("Oops"),QT_TR_NOOP("can't create custom directory (%s)."),customdir);
-                return NULL;
+	  printf("can't create custom directory (%s).\n",ADM_customdir);
+      return NULL;
   }
-  customDirDone=1;
-  return customdir;
+  return ADM_customdir;
 }
 /*
       Get the  directory where jobs are stored
@@ -106,24 +104,60 @@
 
 char *ADM_getJobDir(void)
 {
-  if(jobDirDone) return jobdir;
+	  if(ADM_jobdir) return ADM_jobdir;
+	  ADM_jobdir=ADM_getHomeRelativePath("jobs");
+	  
+	  if(!ADM_mkdir(ADM_jobdir))
+	  {
+		  printf("can't create custom directory (%s).\n",ADM_jobdir);
+	      return NULL;
+	  }
+	  return ADM_jobdir;
+}
+/**
+ * 	\fn ADM_getRelativePath
+ */
+static char *ADM_getRelativePath(const char *base0,const char *base1, const char *base2,const char *base3)
+{
+	char *result;
+	int length=strlen(base1);
+	if(base2) length+=strlen(base2);
+	if(base3) length+=strlen(base3);
 
-  char *rootDir;
-  rootDir=ADM_getBaseDir();
-  strncpy(jobdir,rootDir,1023);
-#if defined(__WIN32)
-  strcat(jobdir,"\\jobs"); 
-#else
-  strcat(jobdir,"/jobs");
-#endif
-  if(!ADM_mkdir(jobdir))
-  {
-    GUI_Error_HIG(QT_TR_NOOP("Oops"),QT_TR_NOOP("can't create job directory (%s)."),jobdir);
-                return NULL;
-  }
-  jobDirDone=1;
-  return jobdir;
+	
+	
+	length+=strlen(base0);
+	length+=5; // Slashes + end 0
+	result=(char *)new char [length];
+	strcpy(result,base0);
+	strcat(result,separator);
+		
+	strcat(result,base1);
+	strcat(result,separator);
+	if(base2)
+	{
+		strcat(result,base2);
+		strcat(result,separator);
+		if(base3)
+		{
+			strcat(result,base3);
+			strcat(result,separator);
+		}
+	}
+	return result;
 }
+/**
+ * 	\fn char *ADM_getHomeRelativePath(const char *base1, const char *base2=NULL,const char *base3=NULL);
+ *  \brief Returns home directory +base 1 + base 2... The return value is a copy, and must be deleted []
+ */
+char *ADM_getHomeRelativePath(const char *base1, const char *base2,const char *base3)
+{
+	return ADM_getRelativePath(ADM_getBaseDir(),base1,base2,base3);
+}
+char *ADM_getInstallRelativePath(const char *base1, const char *base2,const char *base3)
+{
+	return ADM_getRelativePath(ADM_INSTALL_DIR,base1,base2,base3);
+}
 /*
       Get the root directory for .avidemux stuff
 ******************************************************/
@@ -133,7 +167,7 @@
 DIR *dir=NULL;
 char *home;
 //
-        if(baseDirDone) return basedir;
+        if(baseDirDone) return ADM_basedir;
 // Get the base directory
 #if defined(__WIN32)
         if( ! (home=getenv("USERPROFILE")) )
@@ -163,11 +197,11 @@
         delete [] dirname;
 
         // Now built the filename
-        strncpy(basedir,home,1023);
-        strncat(basedir,ADM_DIR_NAME,1023-strlen(basedir));
+        strncpy(ADM_basedir,home,1023);
+        strncat(ADM_basedir,ADM_DIR_NAME,1023-strlen(ADM_basedir));
         baseDirDone=1;
-        printf("Using %s as base directory for prefs/jobs/...\n",basedir);
-        return basedir;
+        printf("Using %s as base directory for prefs/jobs/...\n",ADM_basedir);
+        return ADM_basedir;
 }
 /*----------------------------------------
       Create a directory
@@ -206,6 +240,11 @@
               closedir(dir); 
               return 1;
 }
+/**
+ *  \fn buildDirectoryContent
+ * 	\brief Returns the content of a dir with the extension ext. The receiving array must be allocated by caller
+ * (just the array, not the names themselves)
+ */
 uint8_t buildDirectoryContent(uint32_t *outnb,const char *base, char *jobName[],int maxElems,const char *ext)
 {
 

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_lavformat/movenc.c
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_lavformat/movenc.c	2008-03-09 10:30:50 UTC (rev 3861)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_lavformat/movenc.c	2008-03-09 15:26:54 UTC (rev 3862)
@@ -946,13 +946,21 @@
     put_be32(pb, 0x1);
 
     put_be32(pb, av_rescale_rnd(track->trackDuration, globalTimescale, track->timescale, AV_ROUND_UP)); /* duration   ... doesn't seem to effect psp */
-
-    // MEANX : NO put_be32(pb, track->cluster[0].cts); /* first pts is cts since dts is 0 */
-      put_be32(pb, 0x00000000);
+#if 1
+    // MEANX : NO 
+    put_be32(pb, 0x00000000);
+    put_be32(pb, 0x0001);
     // /MEANX
+#else
+    put_be32(pb, track->cluster[0].cts); /* first pts is cts since dts is 0 */
+    put_be32(pb, 0x00010000);
+#endif
+    
+     
+    
 
 
-    put_be32(pb, 0x0001); // MEANX put_be32(pb, 0x00010000);
+   // MEANX 
     return 0x24;
 }
 

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_osSupport/ADM_fileio.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_osSupport/ADM_fileio.cpp	2008-03-09 10:30:50 UTC (rev 3861)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_osSupport/ADM_fileio.cpp	2008-03-09 15:26:54 UTC (rev 3862)
@@ -1,143 +1 @@
-/***************************************************************************
-                    
-    copyright            : (C) 2006 by mean
-    email                : fixounet at free.fr
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#include "config.h" 
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-    
-#include <dirent.h>
-#include <errno.h>
-#include <sys/stat.h>
-
-#include <unistd.h>
-
-#ifdef __MINGW32__
-#include <glib.h>
-#endif
-
-#include "ADM_default.h"
-
-
-#include "ADM_toolkit/filesel.h"
-#include "ADM_toolkit/toolkit.hxx"
-
-//*****************************
-static char basedir[1024]={0};
-static char jobdir[1024]={0};
-static char customdir[1024]={0};
-int baseDirDone=0;
-int jobDirDone=0;
-int customDirDone=0;
-#ifdef __WIN32
-const char *ADM_DIR_NAME="\\avidemux";
-#else
-const char *ADM_DIR_NAME="/.avidemux";
-#endif
-/*
-
-*/
-/*
-      Get the  directory where jobs are stored
-******************************************************/
-
-char *ADM_getCustomDir(void)
-{
-  if(customDirDone) return customdir;
-
-  char *rootDir;
-  rootDir=ADM_getBaseDir();
-  strncpy(customdir,rootDir,1023);
-#if defined(__WIN32)
-  strcat(customdir,"\\custom"); 
-#else
-  strcat(customdir,"/custom");
-#endif
-  if(!ADM_mkdir(customdir))
-  {
-    GUI_Error_HIG(QT_TR_NOOP("Oops"),QT_TR_NOOP("can't create custom directory (%s)."),customdir);
-                return NULL;
-  }
-  customDirDone=1;
-  return customdir;
-}
-/*
-      Get the  directory where jobs are stored
-******************************************************/
-
-char *ADM_getJobDir(void)
-{
-  if(jobDirDone) return jobdir;
-
-  char *rootDir;
-  rootDir=ADM_getBaseDir();
-  strncpy(jobdir,rootDir,1023);
-#if defined(__WIN32)
-  strcat(jobdir,"\\jobs"); 
-#else
-  strcat(jobdir,"/jobs");
-#endif
-  if(!ADM_mkdir(jobdir))
-  {
-    GUI_Error_HIG(QT_TR_NOOP("Oops"),QT_TR_NOOP("can't create job directory (%s)."),jobdir);
-                return NULL;
-  }
-  jobDirDone=1;
-  return jobdir;
-}
-/*
-      Get the root directory for .avidemux stuff
-******************************************************/
-char *ADM_getBaseDir(void)
-{
-char *dirname=NULL;
-DIR *dir=NULL;
-char *home;
-//
-        if(baseDirDone) return basedir;
-// Get the base directory
-#if defined(__WIN32)
-        if( ! (home=getenv("USERPROFILE")) )
-        {
-          GUI_Error_HIG(QT_TR_NOOP("Oops"),QT_TR_NOOP("can't determine $USERPROFILE."));
-                    home="c:\\";
-        }
-
-#else
-        if( ! (home=getenv("HOME")) )
-        {
-          GUI_Error_HIG(QT_TR_NOOP("Oops"),QT_TR_NOOP("can't determine $HOME."));
-                return NULL;
-        }
-#endif
-
- // Try to open the .avidemux directory
-        dirname=new char[strlen(home)+strlen(ADM_DIR_NAME)+2];
-        strcpy(dirname,home);
-        strcat(dirname,ADM_DIR_NAME);
-        if(!ADM_mkdir(dirname))
-        {
-          GUI_Error_HIG(QT_TR_NOOP("Oops"),QT_TR_NOOP("Cannot create the .avidemux directory"), NULL);
-                        delete [] dirname;
-                        return NULL;
-        }
-        delete [] dirname;
-
-        // Now built the filename
-        strncpy(basedir,home,1023);
-        strncat(basedir,ADM_DIR_NAME,1023-strlen(basedir));
-        baseDirDone=1;
-        printf("Using %s as base directory for prefs/jobs/...\n",basedir);
-        return basedir;
-}
+// RMED
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_toolkit/filesel.h
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_toolkit/filesel.h	2008-03-09 10:30:50 UTC (rev 3861)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_toolkit/filesel.h	2008-03-09 15:26:54 UTC (rev 3862)
@@ -25,12 +25,6 @@
 uint8_t FileSel_SelectRead(const char *title,char *target,uint32_t max, const char *source);
 uint8_t FileSel_SelectDir(const char *title,char *target,uint32_t max, const char *source);
 
-char *ADM_getBaseDir(void);
-char *ADM_getJobDir(void);
-char *ADM_getCustomDir(void);
 
-uint8_t buildDirectoryContent(uint32_t *outnb,const char *base, char *jobName[],int maxElems,const char *ext);
-//const char *GetFileName(const char *str);
-
 #endif
 //EOF

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/main.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/main.cpp	2008-03-09 10:30:50 UTC (rev 3861)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/main.cpp	2008-03-09 15:26:54 UTC (rev 3862)
@@ -72,7 +72,7 @@
 extern void ADM_memStatInit( void );
 extern void ADM_memStatEnd( void );
 extern void getUIDescription(char*);
-extern uint8_t ADM_ad_loadPlugins(void);
+extern uint8_t ADM_ad_loadPlugins(const char *path);
 
 #ifdef __MINGW32__
 extern EXCEPTION_DISPOSITION exceptionHandler(struct _EXCEPTION_RECORD* pExceptionRec, void* pEstablisherFrame, struct _CONTEXT* pContextRecord, void* pDispatcherContext);
@@ -234,8 +234,19 @@
 	}
 	
 	ADM_dealloc(dynloadPath);
-	// Load audio codec plugin
-	ADM_ad_loadPlugins();
+	//***************Plugins *********************
+	// Load system wide audio decoder plugin
+	char *adPlugins=ADM_getInstallRelativePath("lib","ADM_plugins","audioDecoder");
+	ADM_ad_loadPlugins(adPlugins);
+	delete [] adPlugins;
+	// load local audio decoder plugins
+	adPlugins=ADM_getHomeRelativePath("plugins","audioDecoder");
+	ADM_ad_loadPlugins(adPlugins);
+	delete [] adPlugins;
+	//***************Plugins *********************
+	
+	
+	
     ADM_lavInit();
 #ifdef HAVE_AUDIO
     AVDM_audioInit();

Modified: branches/avidemux_2.5_branch_mean_merged/cmake/admCheckMiscLibs.cmake
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/cmake/admCheckMiscLibs.cmake	2008-03-09 10:30:50 UTC (rev 3861)
+++ branches/avidemux_2.5_branch_mean_merged/cmake/admCheckMiscLibs.cmake	2008-03-09 15:26:54 UTC (rev 3862)
@@ -89,6 +89,7 @@
 ENDIF (GETTEXT)
 
 SET(ADM_LOCALE "${CMAKE_INSTALL_PREFIX}/share/locale")
+SET(ADM_INSTALL_DIR "${CMAKE_INSTALL_PREFIX}")
 
 MESSAGE("")
 

Modified: branches/avidemux_2.5_branch_mean_merged/cmake/config.h.cmake
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/cmake/config.h.cmake	2008-03-09 10:30:50 UTC (rev 3861)
+++ branches/avidemux_2.5_branch_mean_merged/cmake/config.h.cmake	2008-03-09 15:26:54 UTC (rev 3862)
@@ -23,6 +23,7 @@
 
 #define PACKAGE   "avidemux"
 #define ADMLOCALE "${ADM_LOCALE}"
+#define ADM_INSTALL_DIR "${ADM_INSTALL_DIR}"
 
 #cmakedefine HAVE_AUDIO
 



From mean at mail.berlios.de  Sun Mar  9 19:05:12 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 9 Mar 2008 19:05:12 +0100
Subject: [Avidemux-svn-commit] r3863 -
	branches/avidemux_2.5_branch_mean_merged/cmake
Message-ID: <200803091805.m29I5CO8030491@sheep.berlios.de>

Author: mean
Date: 2008-03-09 19:05:11 +0100 (Sun, 09 Mar 2008)
New Revision: 3863

Added:
   branches/avidemux_2.5_branch_mean_merged/cmake/ad_plugin.cmake
Log:
[AudioFiler] Install the plugins


Added: branches/avidemux_2.5_branch_mean_merged/cmake/ad_plugin.cmake
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/cmake/ad_plugin.cmake	2008-03-09 15:26:54 UTC (rev 3862)
+++ branches/avidemux_2.5_branch_mean_merged/cmake/ad_plugin.cmake	2008-03-09 18:05:11 UTC (rev 3863)
@@ -0,0 +1,6 @@
+MACRO(ADM_audio_plugin  _lib)
+ADD_TARGET_CFLAGS(${_lib} "-I${CMAKE_BINARY_DIR}/config/cli")
+ADD_TARGET_CFLAGS(${_lib} "-I${CMAKE_SOURCE_DIR}/avidemux/ADM_audiocodec")
+INSTALL(FILES ${_lib} DESTINATION "${CMAKE_INSTALL_PREFIX}/lib/ADM_plugins/audioDecoder/")
+MACRO(ADM_audio_plugin)
+



From mean at mail.berlios.de  Sun Mar  9 19:05:15 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 9 Mar 2008 19:05:15 +0100
Subject: [Avidemux-svn-commit] r3864 - in
	branches/avidemux_2.5_branch_mean_merged:
	avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3
	avidemux/plugins/ADM_audiodecoder/ADM_ad_faad
	avidemux/plugins/ADM_audiodecoder/ADM_ad_mad
	avidemux/plugins/ADM_audiodecoder/ADM_ad_vorbis cmake
Message-ID: <200803091805.m29I5FCZ030545@sheep.berlios.de>

Author: mean
Date: 2008-03-09 19:05:14 +0100 (Sun, 09 Mar 2008)
New Revision: 3864

Modified:
   branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/CMakeLists.txt
   branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/CMakeLists.txt
   branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/CMakeLists.txt
   branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_vorbis/CMakeLists.txt
   branches/avidemux_2.5_branch_mean_merged/cmake/ad_plugin.cmake
Log:
[AudioFiler] Install the plugins


Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/CMakeLists.txt	2008-03-09 18:05:11 UTC (rev 3863)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/CMakeLists.txt	2008-03-09 18:05:14 UTC (rev 3864)
@@ -6,5 +6,5 @@
 TARGET_LINK_LIBRARIES(ADM_ad_a52 ADM_liba52)
 
 # FIXME
-ADD_TARGET_CFLAGS(ADM_ad_a52 "-I${CMAKE_BINARY_DIR}/config/cli")
-ADD_TARGET_CFLAGS(ADM_ad_a52 "-I${CMAKE_SOURCE_DIR}/avidemux/ADM_audiocodec")
\ No newline at end of file
+INCLUDE(ad_plugin)
+ADM_audio_plugin(ADM_ad_a52)

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/CMakeLists.txt	2008-03-09 18:05:11 UTC (rev 3863)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/CMakeLists.txt	2008-03-09 18:05:14 UTC (rev 3864)
@@ -4,8 +4,8 @@
 ADD_LIBRARY(ADM_ad_faad SHARED ${ADM_ad_faad_SRCS})
 
 # FIXME
-ADD_TARGET_CFLAGS(ADM_ad_faad "-I${CMAKE_BINARY_DIR}/config/cli")
-ADD_TARGET_CFLAGS(ADM_ad_faad "-I${CMAKE_SOURCE_DIR}/avidemux/ADM_audiocodec")
 
 TARGET_LINK_LIBRARIES(ADM_ad_faad  ${FAAD_LIBRARY_DIR})
-ENDIF (USE_FAAD)
\ No newline at end of file
+INCLUDE(ad_plugin)
+ADM_audio_plugin(ADM_ad_faad)
+ENDIF (USE_FAAD)

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/CMakeLists.txt	2008-03-09 18:05:11 UTC (rev 3863)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/CMakeLists.txt	2008-03-09 18:05:14 UTC (rev 3864)
@@ -11,5 +11,5 @@
 ADD_TARGET_CFLAGS(ADM_ad_Mad ${MAD_CFLAGS})
 
 # FIXME
-ADD_TARGET_CFLAGS(ADM_ad_Mad "-I${CMAKE_BINARY_DIR}/config/cli")
-ADD_TARGET_CFLAGS(ADM_ad_Mad "-I${CMAKE_SOURCE_DIR}/avidemux/ADM_audiocodec")
\ No newline at end of file
+INCLUDE(ad_plugin)
+ADM_audio_plugin(ADM_ad_Mad)

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_vorbis/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_vorbis/CMakeLists.txt	2008-03-09 18:05:11 UTC (rev 3863)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_vorbis/CMakeLists.txt	2008-03-09 18:05:14 UTC (rev 3864)
@@ -5,8 +5,8 @@
 ADD_LIBRARY(ADM_ad_vorbis SHARED ${ADM_ad_vorbis_SRCS})
 
 # FIXME
-ADD_TARGET_CFLAGS(ADM_ad_vorbis "-I${CMAKE_BINARY_DIR}/config/cli")
-ADD_TARGET_CFLAGS(ADM_ad_vorbis "-I${CMAKE_SOURCE_DIR}/avidemux/ADM_audiocodec")
 TARGET_LINK_LIBRARIES(ADM_ad_vorbis  ${VORBIS_LIBRARY_DIR})
 TARGET_LINK_LIBRARIES(ADM_ad_vorbis  ${VORBISENC_LIBRARY_DIR})
-ENDIF (USE_VORBIS)
\ No newline at end of file
+INCLUDE(ad_plugin)
+ADM_audio_plugin(ADM_ad_vorbis)
+ENDIF (USE_VORBIS)

Modified: branches/avidemux_2.5_branch_mean_merged/cmake/ad_plugin.cmake
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/cmake/ad_plugin.cmake	2008-03-09 18:05:11 UTC (rev 3863)
+++ branches/avidemux_2.5_branch_mean_merged/cmake/ad_plugin.cmake	2008-03-09 18:05:14 UTC (rev 3864)
@@ -1,6 +1,6 @@
 MACRO(ADM_audio_plugin  _lib)
-ADD_TARGET_CFLAGS(${_lib} "-I${CMAKE_BINARY_DIR}/config/cli")
-ADD_TARGET_CFLAGS(${_lib} "-I${CMAKE_SOURCE_DIR}/avidemux/ADM_audiocodec")
-INSTALL(FILES ${_lib} DESTINATION "${CMAKE_INSTALL_PREFIX}/lib/ADM_plugins/audioDecoder/")
-MACRO(ADM_audio_plugin)
+        ADD_TARGET_CFLAGS(${_lib} "-I${CMAKE_BINARY_DIR}/config/cli")
+        ADD_TARGET_CFLAGS(${_lib} "-I${CMAKE_SOURCE_DIR}/avidemux/ADM_audiocodec")
+        INSTALL(TARGETS ${_lib} LIBRARY DESTINATION "${CMAKE_INSTALL_PREFIX}/lib/ADM_plugins/audioDecoder/")
+ENDMACRO(ADM_audio_plugin)
 



From gruntster at mail.berlios.de  Mon Mar 10 17:22:19 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Mon, 10 Mar 2008 17:22:19 +0100
Subject: [Avidemux-svn-commit] r3865 - in
 branches/avidemux_2.5_branch_gruntster: . avidemux avidemux/ADM_audiodevice
 avidemux/ADM_audiofilter avidemux/ADM_codecs avidemux/ADM_colorspace
 avidemux/ADM_core/include avidemux/ADM_core/src avidemux/ADM_filter
 avidemux/ADM_inputs/ADM_inpics avidemux/ADM_libraries/ADM_libmpeg2enc
 avidemux/ADM_libraries/ADM_libswscale avidemux/ADM_libraries/ADM_mplex
 avidemux/ADM_libraries/ADM_smjs avidemux/ADM_libraries/ADM_utilities
 avidemux/ADM_osSupport avidemux/ADM_outputs/oplug_avi
 avidemux/ADM_outputs/oplug_dummy avidemux/ADM_outputs/oplug_flv
 avidemux/ADM_outputs/oplug_mpeg avidemux/ADM_outputs/oplug_mpegFF
 avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog
 avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters
 avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2
 avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr
 avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk
 avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog
 avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui
 avidemux/ADM_userInterfaces/ADM_com! monUI avidemux/ADM_video
 avidemux/ADM_videoFilter cmake
Message-ID: <200803101622.m2AGMJMD011019@sheep.berlios.de>

Author: gruntster
Date: 2008-03-10 17:21:10 +0100 (Mon, 10 Mar 2008)
New Revision: 3865

Added:
   branches/avidemux_2.5_branch_gruntster/cmake/ADM_coreConfig.h.cmake
Modified:
   branches/avidemux_2.5_branch_gruntster/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/ADM_audiodevice.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/ADM_deviceArts.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audioencoder_lame.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiofilter_buildchain.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_theora_dec.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_colorspace/ADM_colorspace.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_colorspace/ADM_rgb.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_colorspace/rgb2yuv.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_assert.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_clock.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_cpuCap.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_default.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_dynamicLoading.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_inttype.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_mangle.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_misc.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_crashdump.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_fileio.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_memcpy.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_win32.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter_saveload.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_inpics/ADM_pics.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/mblock_sumsq_mmx.cc
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libswscale/ADM_mp.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libswscale/rgb2rgb.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mplexin.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mplexmuxer.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_transfert.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/cpu_accel.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_smjs/jscntxt.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_imageLoader.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_imageUtils.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_crashHook.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_misc.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_quota.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisave.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisave.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_pack.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_unpack.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_savesmart.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_equalizer.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_mpdelogo.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_working.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filterlist.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtersub.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_ocr.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/ADM_gladeSupport.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/toolkit_gtk.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_none.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_xvid4.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_encoding.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_srt.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_index_pg.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/file_qt4.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioconfig.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavDecoder.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_mjpeg.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/GUI_render.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/GUI_sdlRender.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_interlaced.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidCNR2.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidColorYuv.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidFont.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidMPdelogo.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_guiResize.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_resizebis.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidASS.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidAddBorder.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidAnimated.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidBSmear.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidBlend.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDGbob.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDecDec.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDeintASM.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDenoise.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDropOut.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFade.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFields.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidForcedPP.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidLargeMedian.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLD3D.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLD3Dlow.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLResize.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMSharpen.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMosaic.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMsmooth.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidPalShift.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidParticle.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidResampleFPS.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSRT.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSRTRender.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSRTload.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSoften.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidStabilize.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidThreshold.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVlad.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidYadif.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADMmpdetc.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/avi_vars.h
   branches/avidemux_2.5_branch_gruntster/avidemux/gui_savenew.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/main.cpp
   branches/avidemux_2.5_branch_gruntster/cmake/admConfigHelper.cmake
   branches/avidemux_2.5_branch_gruntster/cmake/admDetermineSystem.cmake
   branches/avidemux_2.5_branch_gruntster/cmake/config.h.cmake
Log:
[Core] split UI and core config headers

Modified: branches/avidemux_2.5_branch_gruntster/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/CMakeLists.txt	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/CMakeLists.txt	2008-03-10 16:21:10 UTC (rev 3865)
@@ -126,7 +126,6 @@
 CHECK_INCLUDE_FILES(inttypes.h   HAVE_INTTYPES_H)	# internal use, mpeg2enc, mplex
 CHECK_INCLUDE_FILES(stdint.h     HAVE_STDINT_H)		# internal use, mpeg2enc, mplex
 CHECK_INCLUDE_FILES(sys/types.h  HAVE_SYS_TYPES_H)	# mad, mpeg2enc
-CHECK_INCLUDE_FILES(unistd.h     HAVE_UNISTD_H)		# internal use, ass, mad
 CHECK_INCLUDE_FILES(malloc.h     HAVE_MALLOC_H)		# libavcodec, libavutil, libpostproc, libswscale, mplex
 
 MESSAGE("")
@@ -145,16 +144,19 @@
 ########################################
 # Generate config.h
 ########################################
+CONFIGURE_FILE("${CMAKE_SOURCE_DIR}/cmake/ADM_coreConfig.h.cmake" "${CMAKE_BINARY_DIR}/config/ADM_coreConfig.h")
+MESSAGE(STATUS "ADM_coreConfig.h generated")
+
 SET(CONFIG_HEADER_TYPE ADM_BUILD_CLI)
-CONFIGURE_FILE("${CMAKE_SOURCE_DIR}/cmake/config.h.cmake" "${CMAKE_CURRENT_BINARY_DIR}/config/cli/config.h")
+CONFIGURE_FILE("${CMAKE_SOURCE_DIR}/cmake/config.h.cmake" "${CMAKE_BINARY_DIR}/config/cli/config.h")
 MESSAGE(STATUS "CLI config.h generated")
 
 SET(CONFIG_HEADER_TYPE ADM_BUILD_GTK)
-CONFIGURE_FILE("${CMAKE_SOURCE_DIR}/cmake/config.h.cmake" "${CMAKE_CURRENT_BINARY_DIR}/config/gtk/config.h")
+CONFIGURE_FILE("${CMAKE_SOURCE_DIR}/cmake/config.h.cmake" "${CMAKE_BINARY_DIR}/config/gtk/config.h")
 MESSAGE(STATUS "GTK config.h generated")
 
 SET(CONFIG_HEADER_TYPE ADM_BUILD_QT4)
-CONFIGURE_FILE("${CMAKE_SOURCE_DIR}/cmake/config.h.cmake" "${CMAKE_CURRENT_BINARY_DIR}/config/qt4/config.h")
+CONFIGURE_FILE("${CMAKE_SOURCE_DIR}/cmake/config.h.cmake" "${CMAKE_BINARY_DIR}/config/qt4/config.h")
 MESSAGE(STATUS "Qt4 config.h generated")
 
 ########################################

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/ADM_audiodevice.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/ADM_audiodevice.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/ADM_audiodevice.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -15,24 +15,22 @@
  *                                                                         *
  ***************************************************************************/
 #include "config.h"
-#ifdef USE_ARTS
-#include <artsc.h>
-#endif
 
+#ifdef HAVE_AUDIO
 #include <stdio.h>
 #include <stdlib.h>
-
 #include <errno.h>
 
 #include "avi_vars.h"
 #include "prefs.h"
-#ifdef HAVE_AUDIO
+
 #include "ADM_assert.h"
 #include "ADM_audiodevice.h"
 
 #include "ADM_audiodevice/ADM_deviceoss.h"
 
 #ifdef USE_ARTS
+#include <artsc.h>
 #include "ADM_audiodevice/ADM_deviceArts.h"
 #endif
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/ADM_deviceArts.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/ADM_deviceArts.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/ADM_deviceArts.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -15,12 +15,12 @@
  *                                                                         *
  ***************************************************************************/
 
+#include "config.h"
 #include "ADM_default.h"
 
 #ifdef USE_ARTS
 #include <artsc.h>
 
-#include "ADM_assert.h"  
 #include "ADM_audiodevice.h"
 #include  "ADM_audiodevice/ADM_deviceoss.h"
 #include  "ADM_audiodevice/ADM_deviceArts.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audioencoder_lame.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audioencoder_lame.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audioencoder_lame.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -11,20 +11,16 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include "ADM_default.h"
+#include "config.h"
 
 #ifdef HAVE_LIBMP3LAME
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <math.h>
+#include <lame/lame.h>
 
+#include "ADM_default.h"
 #include "audioprocess.hxx"
 #include "audioeng_process.h"
 #include "audioencoder.h"
-//
 
-#include "lame/lame.h"
 #include "ADM_audiofilter/audioencoder_lame_param.h"
 #include "ADM_audiofilter/audioencoder_lame.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiofilter_buildchain.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiofilter_buildchain.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiofilter_buildchain.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -15,11 +15,7 @@
  *                                                                         *
  ***************************************************************************/
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <math.h>
-
+#include "config.h"
 #include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_theora_dec.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_theora_dec.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_theora_dec.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -15,11 +15,7 @@
  *                                                                         *
  ***************************************************************************/
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <math.h>
-
+#include "config.h"
 #include "ADM_default.h"
 
 #ifdef USE_THEORA

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_colorspace/ADM_colorspace.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_colorspace/ADM_colorspace.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_colorspace/ADM_colorspace.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -14,10 +14,7 @@
  *                                                                         *
  ***************************************************************************/
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-
+#include "config.h"
 #include "ADM_default.h"
 #include "colorspace.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_colorspace/ADM_rgb.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_colorspace/ADM_rgb.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_colorspace/ADM_rgb.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -19,10 +19,7 @@
  *                                                                         *
  ***************************************************************************/
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-
+#include "config.h"
 #include "ADM_default.h"
 #include "colorspace.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_colorspace/rgb2yuv.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_colorspace/rgb2yuv.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_colorspace/rgb2yuv.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -19,11 +19,9 @@
  *                                                                         *
  ***************************************************************************/
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
 #include <math.h>
 
+#include "config.h"
 #include "ADM_default.h"
 
 #ifdef ADM_CPU_X86

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_assert.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_assert.h	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_assert.h	2008-03-10 16:21:10 UTC (rev 3865)
@@ -15,8 +15,8 @@
  ***************************************************************************/
 #ifndef ADM_ASSERT_H
 #define ADM_ASSERT_H
+#include <assert.h>
 #include "ADM_inttype.h"
-#include <assert.h>
 
 #define ADM_assert(x) { if(!(x)) {ADM_backTrack("Assert failed :"#x,__LINE__,__FILE__);  }}
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_clock.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_clock.h	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_clock.h	2008-03-10 16:21:10 UTC (rev 3865)
@@ -14,8 +14,8 @@
  *   (at your option) any later version.                                   *
  ***************************************************************************/
 
-#ifndef __CLK__
-#define __CLK__
+#ifndef ADM_CLOCK_H
+#define ADM_CLOCK_H
 class Clock
 {
 	private: uint32_t _startTime;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_cpuCap.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_cpuCap.h	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_cpuCap.h	2008-03-10 16:21:10 UTC (rev 3865)
@@ -13,7 +13,11 @@
  *   the Free Software Foundation; either version 2 of the License, or     *
  *   (at your option) any later version.                                   *
  ***************************************************************************/
+#ifndef ADM_CPUCAP_H
+#define ADM_CPUCAP_H
 
+#include "ADM_coreConfig.h"
+
 #ifdef ADM_CPU_X86
 
 #define CHECK_Z(x) {if(CpuCaps::myCpuCaps & ADM_CPUCAP_##x & CpuCaps::myCpuMask) return 1; else return 0;} 
@@ -56,3 +60,4 @@
 
 
 };
+#endif

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_default.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_default.h	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_default.h	2008-03-10 16:21:10 UTC (rev 3865)
@@ -19,12 +19,11 @@
 #ifndef ADM_DEFAULT_H
 #define ADM_DEFAULT_H
 
-#include "config.h"
-
 #include <stdio.h>
 #include <stdlib.h>
 #include <string.h>
 
+#include "ADM_coreConfig.h"
 #include "ADM_inttype.h"
 #include "ADM_assert.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_dynamicLoading.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_dynamicLoading.h	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_dynamicLoading.h	2008-03-10 16:21:10 UTC (rev 3865)
@@ -14,8 +14,8 @@
  *   (at your option) any later version.                                   *
  ***************************************************************************/
 
-#ifndef LIBWRAPPER
-#define LIBWRAPPER
+#ifndef ADM_DYNAMICLOADING_H
+#define ADM_DYNAMICLOADING_H
 
 class ADM_LibWrapper
 {

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_inttype.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_inttype.h	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_inttype.h	2008-03-10 16:21:10 UTC (rev 3865)
@@ -6,17 +6,15 @@
     
  ***************************************************************************/
 
-#ifndef __ZDEFAULT
-#define __ZDEFAULT
+#ifndef ADM_INTTYPE_H
+#define ADM_INTTYPE_H
 
-#include "config.h"
+#include "ADM_coreConfig.h"
 
 #include <stdio.h>
 #include <stdlib.h>
 #include <string.h>
-#ifdef HAVE_UNISTD_H
 #include <unistd.h>
-#endif
 
 /*
    	The maximum width/height is MAXIMUM_SIZE 768*768 for now
@@ -48,16 +46,15 @@
 #define int32_t 	signed long  int
 #define int64_t 	signed long  long
 #define uint64_t 	unsigned long  long
+#endif	// ADM_CPU_64BIT
 
-#endif
 #define uint8_t  	unsigned char
 #define int8_t   	signed char
-
 #define int16_t 	signed short int
 #define uint16_t 	unsigned short int
 #define uint32_t 	unsigned long  int
+#endif	// GOT_TYPES
 
-#endif
 #define UNUSED_ARG(a) do {/* null */} while (&a == 0)
 
 #define MKFCC(a,b,c,d)   ((d<<24)+(c<<16)+(b<<8)+a)
@@ -70,28 +67,4 @@
 #define ADM_OK 	1
 #define ADM_IGN 2
 
-/*
- * Standard gettext macros.
- */
-#ifdef HAVE_GETTEXT
-#  include <libintl.h>
-#  undef _
 #endif
-
-extern const char* translate(const char *__domainname, const char *__msgid);
-
-#ifdef QT_TR_NOOP
-#undef QT_TR_NOOP
-#endif
-
-#define QT_TR_NOOP(String) translate (PACKAGE, String)
-
-#if (defined( HAVE_LIBESD) && defined(HAVE_ESD_H)) || \
- defined(OSS_SUPPORT) || defined (USE_ARTS) || \
-  defined(USE_SDL) || defined(__APPLE__) || \
-  defined(__WIN32) || defined(ALSA_SUPPORT)
-  
-#define HAVE_AUDIO
-#endif
-               
-#endif

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_mangle.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_mangle.h	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_mangle.h	2008-03-10 16:21:10 UTC (rev 3865)
@@ -6,6 +6,11 @@
     
  ***************************************************************************/
 
+#ifndef ADM_MANGLE_H
+#define ADM_MANGLE_H
+
+#include "ADM_coreConfig.h"
+
 #if ( defined(__PIC__) || defined(__pic__) ) && ! defined(PIC)
 #    define PIC
 #endif
@@ -80,3 +85,4 @@
 #endif
 
 #define ASM_CONST attribute_used __attribute__ ((aligned(8)))
+#endif

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_misc.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_misc.h	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_misc.h	2008-03-10 16:21:10 UTC (rev 3865)
@@ -6,10 +6,10 @@
     
  ***************************************************************************/
 
+#ifndef ADM_MISC_H
+#define ADM_MISC_H
 
-#ifndef __ADM_MISC__
-#define __ADM_MISC__
-//#include "time.h"
+#include "ADM_coreConfig.h"
 
 typedef enum 
 {

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_crashdump.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_crashdump.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_crashdump.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -250,8 +250,6 @@
 	if (myFatalFunction)
 		myFatalFunction("Crash", "Press OK to build crash info");
 
-	GUI_Error_HIG(QT_TR_NOOP("Fatal Error"),QT_TR_NOOP("A fatal error has occurred.\n\nClick OK to generate debug information. This may take a few minutes to complete."));
-
 	void* currentProcessId = GetCurrentProcess();
 
 	SymInitialize(currentProcessId, NULL, TRUE);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_fileio.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_fileio.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_fileio.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -94,7 +94,7 @@
 #endif
   if(!ADM_mkdir(customdir))
   {
-    GUI_Error_HIG(QT_TR_NOOP("Oops"),QT_TR_NOOP("can't create custom directory (%s)."),customdir);
+    GUI_Error_HIG("Oops","can't create custom directory (%s).",customdir);
                 return NULL;
   }
   customDirDone=1;
@@ -118,7 +118,7 @@
 #endif
   if(!ADM_mkdir(jobdir))
   {
-    GUI_Error_HIG(QT_TR_NOOP("Oops"),QT_TR_NOOP("can't create job directory (%s)."),jobdir);
+    GUI_Error_HIG("Oops","can't create job directory (%s).",jobdir);
                 return NULL;
   }
   jobDirDone=1;
@@ -138,14 +138,14 @@
 #if defined(__WIN32)
         if( ! (home=getenv("USERPROFILE")) )
         {
-          GUI_Error_HIG(QT_TR_NOOP("Oops"),QT_TR_NOOP("can't determine $USERPROFILE."));
+          GUI_Error_HIG("Oops","can't determine $USERPROFILE.");
                     home="c:\\";
         }
 
 #else
         if( ! (home=getenv("HOME")) )
         {
-          GUI_Error_HIG(QT_TR_NOOP("Oops"),QT_TR_NOOP("can't determine $HOME."));
+          GUI_Error_HIG("Oops","can't determine $HOME.");
                 return NULL;
         }
 #endif
@@ -156,7 +156,7 @@
         strcat(dirname,ADM_DIR_NAME);
         if(!ADM_mkdir(dirname))
         {
-          GUI_Error_HIG(QT_TR_NOOP("Oops"),QT_TR_NOOP("Cannot create the .avidemux directory"), NULL);
+          GUI_Error_HIG("Oops","Cannot create the .avidemux directory", NULL);
                         delete [] dirname;
                         return NULL;
         }

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_memcpy.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_memcpy.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_memcpy.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -386,22 +386,22 @@
 {
   { NULL, NULL, 0, 0 },
   { "libc memcpy()", memcpy, 0, 0 },
-#if defined( ARCH_X86)  || defined(ARCH_X86_64)
+#if defined(ADM_CPU_X86)
   { "linux kernel memcpy()", linux_kernel_memcpy, 0, 0 },
-#if defined( ARCH_X86)  || defined(ARCH_X86_64)
+#if defined(ADM_CPU_X86)
   { "MMX optimized memcpy()", mmx_memcpy, 0, MM_MMX },
   { "MMXEXT optimized memcpy()", mmx2_memcpy, 0, MM_MMXEXT },
   { "SSE optimized memcpy()", sse_memcpy, 0, MM_MMXEXT|MM_SSE },
 #endif
 #endif /* ARCH_X86 */
-#if 0 && defined (ARCH_PPC) && !defined (HOST_OS_DARWIN)
+#if 0 && defined(ADM_CPU_PPC) && !defined (__APPLE__)
   { "ppcasm_memcpy()", ppcasm_memcpy, 0, 0 },
   { "ppcasm_cacheable_memcpy()", ppcasm_cacheable_memcpy, 0, MM_ACCEL_PPC_CACHE32 },
 #endif /* ARCH_PPC && !HOST_OS_DARWIN */
   { NULL, NULL, 0, 0 }
 };
 
-#if defined( ARCH_X86)  || defined(ARCH_X86_64)
+#if defined(ADM_CPU_X86)
 static unsigned long long int rdtsc(void)
 {
   unsigned long long int x;
@@ -453,14 +453,14 @@
   int               config_flags = 0;
 #undef memcpy
         myAdmMemcpy=memcpy;
-#if defined( ARCH_X86)  || defined(ARCH_X86_64)
+#if defined(ADM_CPU_X86)
         if(CpuCaps::hasMMX())
                 myAdmMemcpy=mmx_memcpy;
 #endif
 #if 0
 	probe(memcpy,"libc");
 	probe(linux_kernel_memcpy,"kernel");
-#if defined( ARCH_X86)  || defined(ARCH_X86_64)
+#if defined(ADM_CPU_X86)
 	if(CpuCaps::hasMMX()) probe(mmx_memcpy,"mmx");
 	if(CpuCaps::hasMMXEXT()) probe(mmx_memcpy,"mmxext");
 	if(CpuCaps::hasSSE()) probe(sse_memcpy,"sse");

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_win32.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_win32.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_win32.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -402,7 +402,6 @@
 	// This allows us to optionally compile all EXEs as console applications
 	// so the output can be printed to the terminal for debugging purposes.
 
-#ifdef USE_SDL
 	// Close SDL generated logs
 	fclose(stdout);
 	fclose(stderr);
@@ -448,6 +447,5 @@
 	setvbuf(stderr, NULL, _IOLBF, BUFSIZ);
 
 	delete[] logPath;
-#endif	// USE_SDL
 }
 #endif	// __WIN32

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/CMakeLists.txt	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/CMakeLists.txt	2008-03-10 16:21:10 UTC (rev 3865)
@@ -3,4 +3,6 @@
 	ADM_memory.cpp  ADM_misc.cpp  TLK_clock.cpp  ADM_crashdump.cpp  ADM_fileio.cpp ADM_dynamicLoading.cpp)
 
 ADD_ADM_LIB_ALL_TARGETS(ADM_core ${ADM_core_SRCS})
-ADD_SOURCE_CFLAGS(ADM_fileio.cpp ${GLIB_CFLAGS})
\ No newline at end of file
+ADD_SOURCE_CFLAGS(ADM_fileio.cpp ${GLIB_CFLAGS})
+
+#ADD_TARGET_DEFINITIONS(ADM_core ADM_DEBUG FIND_LEAKS)
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter_saveload.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter_saveload.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter_saveload.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -17,13 +17,14 @@
  *                                                                         *
  ***************************************************************************/
 #define ADM_LEGACY_PROGGY
-#include "ADM_default.h"
-#include "fourcc.h"
+#include "config.h"
+
 #ifdef USE_LIBXML2
 	#include <libxml/tree.h>
 	#include <libxml/parser.h>
 #endif
 
+#include "fourcc.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_osSupport/ADM_quota.h"
 #include "ADM_assert.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_inpics/ADM_pics.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_inpics/ADM_pics.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_inpics/ADM_pics.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -21,7 +21,7 @@
  *                                                                         *
  ***************************************************************************/
 
-#include "ADM_default.h"
+#include "config.h"
 
 #include <stdio.h>
 #include <stdlib.h>

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/mblock_sumsq_mmx.cc
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/mblock_sumsq_mmx.cc	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/mblock_sumsq_mmx.cc	2008-03-10 16:21:10 UTC (rev 3865)
@@ -18,7 +18,7 @@
  *   Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
  */
 
-#include <config.h>
+#include "config.h"
 #include "mjpeg_types.h"
 #ifdef HAVE_X86CPU
 #include "mmx.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libswscale/ADM_mp.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libswscale/ADM_mp.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libswscale/ADM_mp.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -18,7 +18,7 @@
 #include <string.h>
 #include <math.h>
 
-#include "ADM_default.h"
+#include "config.h"
 #include "fourcc.h"
 
 #ifdef ADM_CPU_X86

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libswscale/rgb2rgb.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libswscale/rgb2rgb.c	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libswscale/rgb2rgb.c	2008-03-10 16:21:10 UTC (rev 3865)
@@ -26,7 +26,7 @@
  * under the LGPL license too
  */
 // MEANX
-#include "ADM_default.h"
+#include "config.h"
 #include "wrapper.h"
 // /MEANX
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mplexin.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mplexin.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mplexin.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -10,10 +10,6 @@
 //
 //
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <math.h>
-#include <string.h>
 #include <sys/stat.h>
 #include <errno.h>
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mplexmuxer.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mplexmuxer.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mplexmuxer.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -21,16 +21,11 @@
  *                                                                         *
  ***************************************************************************/
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <math.h>
-#include <string.h>
 #include <sys/stat.h>
 
 #include "ADM_default.h"
 #include "ADM_threads.h"
 
-
 #include "interact.hpp"
 
 #undef malloc

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_transfert.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_transfert.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_transfert.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -18,14 +18,10 @@
  *                                                                         *
  ***************************************************************************/
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-
 #include "ADM_default.h"
 #include "ADM_threads.h"
+#include "ADM_transfert.h"
 
-#include"ADM_transfert.h"
 #define HIGH_LVL        ((TRANSFERT_BUFFER*2)/3)
 #define LOW_LVL         (TRANSFERT_BUFFER/3)
 // minimum amount of audio buffer we need

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/cpu_accel.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/cpu_accel.c	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/cpu_accel.c	2008-03-10 16:21:10 UTC (rev 3865)
@@ -21,6 +21,7 @@
 
 #define ADM_LEGACY_PROGGY
 #include "ADM_default.h"
+
 #include <signal.h>
 #include <setjmp.h>
 #include <unistd.h>

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_smjs/jscntxt.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_smjs/jscntxt.h	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_smjs/jscntxt.h	2008-03-10 16:21:10 UTC (rev 3865)
@@ -415,7 +415,7 @@
  * JS_PUSH_TEMP_ROOT_OBJECT and JS_PUSH_TEMP_ROOT_STRING are type-safe
  * alternatives to JS_PUSH_TEMP_ROOT_GCTHING for JSObject and JSString. They
  * also provide a simple way to get a single pointer to rooted JSObject or
- * JSString via JS_PUSH_TEMP_ROOTQT_TR_NOOP(OBJECT|STRTING)(cx, NULL, &tvr). Then
+ * JSString via JS_PUSH_TEMP_ROOT_(OBJECT|STRTING)(cx, NULL, &tvr). Then
  * &tvr.u.object or tvr.u.string gives the necessary pointer, which puns
  * tvr.u.value safely because JSObject * and JSString * are GC-things and, as
  * such, their tag bits are all zeroes.

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_imageLoader.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_imageLoader.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_imageLoader.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -12,10 +12,7 @@
  *                                                                         *
  ***************************************************************************/
 
-#include <stdlib.h>
-#include <stdio.h>
-#include <string.h>
-
+#include "config.h"
 #include "ADM_default.h"
 
 #include "ADM_lavcodec.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_imageUtils.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_imageUtils.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_imageUtils.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -12,7 +12,7 @@
  *                                                                         *
  ***************************************************************************/
 
-#include "ADM_default.h"
+#include "config.h"
 
 #include <stdlib.h>
 #include <stdio.h>

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_crashHook.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_crashHook.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_crashHook.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -14,6 +14,7 @@
  *                                                                         *
  ***************************************************************************/
 
+#include "config.h"
 #include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_misc.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_misc.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_misc.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -1,6 +1,8 @@
+#include <math.h>
 
+#include "config.h"
 #include "ADM_default.h"
-#include "math.h"
+
 char* ms2timedisplay(uint32_t ms)
 {
 	uint32_t mm, ss;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_quota.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_quota.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_quota.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -3,8 +3,10 @@
                 \brief handle out of space error when writing to files
 */
 #define ADM_LEGACY_PROGGY
+#include <errno.h>
+
+#include "config.h"
 #include "ADM_default.h"
-#include <errno.h>
 #include "ADM_quota.h"
 
 #undef free

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisave.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisave.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisave.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -26,10 +26,10 @@
 #include <time.h>
 #include <sys/time.h>
 
+#include "config.h"
 #include "ADM_default.h"
 #include "ADM_threads.h"
 
-
 #include "fourcc.h"
 #include "avi_vars.h"
 #include "ADM_toolkit/toolkit.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisave.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisave.h	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisave.h	2008-03-10 16:21:10 UTC (rev 3865)
@@ -18,10 +18,10 @@
  #define   __AVI_SAVE__
 
 #include "ADM_default.h"
- #include "ADM_userInterfaces/ADM_commonUI/DIA_working.h"
- #include "ADM_userInterfaces/ADM_commonUI/DIA_encoding.h"
- #include "ADM_image.h"
- #include "ADM_osSupport/ADM_fileio.h"
+#include "ADM_userInterfaces/ADM_commonUI/DIA_working.h"
+#include "ADM_userInterfaces/ADM_commonUI/DIA_encoding.h"
+#include "ADM_image.h"
+#include "ADM_osSupport/ADM_fileio.h"
 #include "ADM_toolkit/ADM_audioQueue.h"
 
  class GenericAviSave

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -27,6 +27,7 @@
 #include <time.h>
 #include <sys/time.h>
 
+#include "config.h"
 #include "ADM_default.h"
 #include "ADM_threads.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_pack.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_pack.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_pack.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -23,6 +23,7 @@
 #include <time.h>
 #include <sys/time.h>
 
+#include "config.h"
 #include "ADM_default.h"
 #include "ADM_threads.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_unpack.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_unpack.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_unpack.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -27,6 +27,7 @@
 #include <time.h>
 #include <sys/time.h>
 
+#include "config.h"
 #include "ADM_default.h"
 #include "ADM_threads.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -25,6 +25,7 @@
 #include <time.h>
 #include <sys/time.h>
 
+#include "config.h"
 #include "ADM_default.h"
 #include "ADM_threads.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_savesmart.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_savesmart.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_savesmart.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -15,20 +15,14 @@
  *                                                                         *
  ***************************************************************************/
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <math.h>
-#include <unistd.h>
-#include <time.h>
-#include <sys/time.h>
-
+#include "config.h"
 #include "ADM_default.h"
 #include "ADM_threads.h"
 
 #ifdef USE_FFMPEG
 extern "C" {
 	#include "ADM_lavcodec.h"
-	};
+};
 #endif
 
 #include "fourcc.h"
@@ -55,6 +49,7 @@
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME MODULE_SAVE_AVI
 #include "ADM_osSupport/ADM_debug.h"
+
 GenericAviSaveSmart::GenericAviSaveSmart(uint32_t qf) : GenericAviSave()
 {
 	_cqReenc=qf;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -22,6 +22,7 @@
 #include <string.h>
 #include <math.h>
 
+#include "config.h"
 #include "ADM_default.h"
 #include "ADM_threads.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -21,14 +21,14 @@
 #include <string.h>
 #include <math.h>
 
+#include "config.h"
 #include "ADM_default.h"
 #include "ADM_threads.h"
 
-
 extern "C" {
 #include "ADM_lavcodec.h"
 };
-#include "ADM_default.h"
+
 #include "ADM_editor/ADM_Video.h"
 #include "ADM_colorspace/colorspace.h"
 #include "ADM_toolkit/toolkit.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -18,6 +18,7 @@
 #include <sys/time.h>
 #include <errno.h>
 
+#include "config.h"
 #include "ADM_default.h"
 #include "ADM_threads.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -19,16 +19,14 @@
  *                                                                         *
  ***************************************************************************/
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
+#include "config.h"
+
+#ifdef USE_FFMPEG
 #include <math.h>
 
 #include "ADM_default.h"
 #include "ADM_threads.h"
 
-
-#ifdef USE_FFMPEG
 extern "C" {
 #include "ADM_lavcodec.h"
 }
@@ -58,7 +56,6 @@
 #include "ADM_encoder/adm_encConfig.h"
 #include "ADM_encoder/ADM_vidEncode.hxx"
 
-
 #include "ADM_libraries/ADM_mplex/ADM_mthread.h"
 
 static uint8_t *_buffer=NULL,*_outbuffer=NULL;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -14,6 +14,8 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include <math.h>
+
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
 
 #include "ADM_toolkit/toolkit.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -7,13 +7,14 @@
  *                                                                         *
  ***************************************************************************/
 
+#include <math.h>
+
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
 #include "prefs.h"
 
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_libraries/ADM_utilities/avidemutils.h"
 #include "ADM_userInterfaces/ADM_commonUI/DIA_working.h"
-
 #include "DIA_encoding.h"
 #include "ADM_video/ADM_vidMisc.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_equalizer.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_equalizer.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_equalizer.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -19,6 +19,8 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include <math.h>
+
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "avi_vars.h"
@@ -29,7 +31,6 @@
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_video/ADM_vidEqualizer.h"
 
-
 extern "C" {
 #include "ADM_libraries/ADM_lavcodec/avcodec.h"
 }

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -15,6 +15,8 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include <math.h>
+
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
 #include "ADM_toolkit/toolkit.hxx"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_mpdelogo.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_mpdelogo.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_mpdelogo.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -20,13 +20,14 @@
  *                                                                         *
  ***************************************************************************/
 
+#include <math.h>
+
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
 #include "ADM_toolkit/toolkit.hxx"
 
 #include "ADM_image.h"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_colorspace/ADM_rgb.h"
-
 #include "ADM_video/ADM_vidMPdelogo.h"
 
 extern "C" {

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -1,6 +1,7 @@
 /*
  * This file was generated by Glade, once upon a time.
  */
+#include <math.h>
 
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
 #include "ADM_toolkit/toolkit.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -11,6 +11,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include <math.h>
 
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
 #include "ADM_osSupport/ADM_debugID.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_working.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_working.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_working.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -17,6 +17,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include <math.h>
 
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
 
@@ -26,7 +27,6 @@
 #define MODULE_NAME MODULE_CLOCKnTIMELEFT
 #include "ADM_osSupport/ADM_debug.h"
 
-
 #include "DIA_working.h"
 #include "ADM_video/ADM_vidMisc.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filterlist.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filterlist.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filterlist.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -14,6 +14,7 @@
  ***************************************************************************/
 #include "config.h"
 #include "../ADM_toolkit_gtk/toolkit_gtk_include.h"
+#include "ADM_default.h"
 
 GtkListStore 	*storeFilterList;
 GtkWidget	*create_dialogList (void)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -8,6 +8,7 @@
  ***************************************************************************/
 #include "config.h"
 #include "../ADM_toolkit_gtk/toolkit_gtk_include.h"
+#include "ADM_default.h"
 
 #define GLADE_HOOKUP_OBJECT(component,widget,name) \
   g_object_set_data_full (G_OBJECT (component), name, \

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtersub.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtersub.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtersub.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -15,6 +15,7 @@
  ***************************************************************************/
 #include "config.h"
 #include "../ADM_toolkit_gtk/toolkit_gtk_include.h"
+#include "ADM_default.h"
 
 GtkWidget		*create_filterMain (void);
 GtkListStore 	*storeMainFilter;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -14,6 +14,8 @@
  *   (at your option) any later version.                                   *
  ***************************************************************************/
 
+#include <math.h>
+
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
 #include "../ADM_commonUI/GUI_render.h"
 #include "gui_action.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -6,15 +6,10 @@
 #  include "config.h"
 #endif
 
-#include <sys/types.h>
-#include <sys/stat.h>
-#include <unistd.h>
-#include <string.h>
-#include <stdio.h>
-
 #include <gdk/gdkkeysyms.h>
 #include <gtk/gtk.h>
 
+#include "ADM_default.h"
 #include "../ADM_toolkit_gtk/ADM_gladeSupport.h"
 #include "../ADM_toolkit_gtk/jogshuttle.h"
 #include "../ADM_toolkit_gtk/gtkmarkscale.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_ocr.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_ocr.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_ocr.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -38,7 +38,6 @@
 #include "ADM_filter/video_filters.h"
 
 #include "ADM_toolkit/filesel.h"
-
 #include "ADM_colorspace/colorspace.h"
 
 #include "ADM_videoFilter/ADM_vobsubinfo.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/ADM_gladeSupport.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/ADM_gladeSupport.h	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/ADM_gladeSupport.h	2008-03-10 16:21:10 UTC (rev 3865)
@@ -3,13 +3,11 @@
  */
 
 #ifdef HAVE_CONFIG_H
-#  include <config.h>
+#  include "config.h"
 #endif
 
 #include <gtk/gtk.h>
-#include "ADM_default.h"
 
-
 /*
  * Public Functions.
  */

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/toolkit_gtk.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/toolkit_gtk.h	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/toolkit_gtk.h	2008-03-10 16:21:10 UTC (rev 3865)
@@ -14,9 +14,8 @@
  ***************************************************************************/
 #ifndef ADM_TLK_GTK
 #define ADM_TLK_GTK
-#include <stdio.h>
 #include <stdlib.h>
-#include <math.h>
+
 #include <glib.h>
 #include <gdk/gdkkeysyms.h>
 #include <gtk/gtk.h>

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_none.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_none.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_none.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -13,13 +13,14 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include "config.h"
 #include "ADM_default.h"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_video/ADM_vidCNR2_param.h"
 #include "ADM_video/ADM_vidColorYuv_param.h"
 #include "ADM_video/ADM_vidEqualizer.h"
 #include "ADM_video/ADM_vidMPdelogo.h"
-    
+
 #include "ADM_encoder/ADM_vidEncode.hxx"
 #include "ADM_audiofilter/audioencoder.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -4,17 +4,13 @@
 // Copyright: See COPYING file that comes with this distribution
 //
 //
+#include "config.h"
 #include "ADM_default.h"
-#include <iconv.h>
 
-#include "ADM_toolkit/toolkit.hxx"
-
 #include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_toolkit/filesel.h"
 
-
-
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -5,20 +5,20 @@
 //
 //
 
+#include "config.h"
+
+#ifdef USE_X264
 #include "ADM_default.h"
-
-
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
 #include "ADM_encoder/ADM_vidEncode.hxx"
 #include "ADM_codecs/ADM_x264param.h"
 
-#ifdef USE_X264
 extern "C"
 {
 #include "x264.h"
 }
-#endif
+
 /**
       \fn DIA_x264
       \brief Dialog for x264 codec settings
@@ -158,5 +158,5 @@
         }
          return 0;
 }
-
+#endif
 // EOF

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_xvid4.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_xvid4.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_xvid4.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -5,14 +5,13 @@
 //
 //
 
-#include "ADM_default.h"
+#include "config.h"
 
+#ifdef USE_XVID_4
+#include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
-
 #include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
-#ifdef USE_XVID_4
 #include "ADM_encoder/ADM_vidEncode.hxx"
-
 #include "ADM_codecs/ADM_xvid4param.h"
 /**
       \fn getFFCompressParams

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_encoding.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_encoding.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_encoding.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -11,20 +11,19 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include <math.h>
+
 #define Ui_Dialog Ui_encodingDialog
 #include "ui_encoding.h"
 #undef Ui_Dialog 
 
-#include "ADM_default.h"
-
 #include "prefs.h"
 #include "DIA_working.h"
 #include "DIA_encoding.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_libraries/ADM_utilities/avidemutils.h"
-#include "math.h"
 #include "ADM_video/ADM_vidMisc.h"
-#include "ADM_video/ADM_vidMisc.h"
+
 extern void UI_purge(void);
 static int stopReq=0;
 class encodingWindow : public QDialog

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_srt.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_srt.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_srt.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -20,6 +20,7 @@
 #include "ui_srt.h"
 #undef Ui_Dialog
 
+#include "config.h"
 #include "ADM_default.h"
 
 #include "ADM_toolkit/toolkit.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_index_pg.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_index_pg.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_index_pg.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -15,6 +15,8 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include <math.h>
+
 #include <QtCore/QVariant>
 #include <QtGui/QAction>
 #include <QtGui/QApplication>
@@ -26,7 +28,6 @@
 #include <QtGui/QWidget>
 
 #include "ADM_default.h"
-#include "math.h"
 #include "ADM_toolkit/toolkit.hxx"
 
 #include "ADM_video/ADM_genvideo.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/file_qt4.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/file_qt4.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/file_qt4.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -13,6 +13,7 @@
 
 #include <QtCore/QVariant>
 #include <QtGui/qfiledialog.h>
+
 #include "ADM_default.h"
 
 #include "ADM_toolkit/toolkit.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -4,6 +4,7 @@
 
 */
 
+#include "config.h"
 #include "ADM_default.h"
 
 #include "ADM_lavcodec.h"
@@ -13,7 +14,6 @@
 #include "ADM_encoder/ADM_vidEncode.hxx"
 #include "ADM_codecs/ADM_ffmpegConfig.h"
 #include "DIA_factory.h"
-#include "ADM_assert.h" 
 
 #warning FIXME Old : MaxBitrate in Byte/s, new entry in kb/s
 #warning FIXME Old : MaxBitrate in Byte/s, new entry in kb/s
@@ -22,12 +22,6 @@
 #warning FIXME Old : MaxBitrate in Byte/s new entry in kb/s
 #warning FIXME Old : MaxBitrate in Byte/s new entry in kb/s
 
-
-
-#include "ADM_codecs/ADM_codec.h"
-#include "ADM_encoder/ADM_vidEncode.hxx"
-#include "ADM_assert.h" 
-#include "DIA_factory.h"
 #include "../../ADM_libraries/ADM_libmpeg2enc/ADM_mpeg2enc.h"
 
 /**

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -12,11 +12,11 @@
 //
 //
 
+#include "config.h"
 #include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 
 #include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
-#include "ADM_assert.h" 
 #include "ADM_audiofilter/audiofilter_normalize_param.h"
 #include "ADM_audiofilter/audioeng_buildfilters.h"
 /**

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioconfig.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioconfig.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioconfig.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -14,10 +14,9 @@
  *                                                                         *
  ***************************************************************************/
 
+#include "config.h"
 #include "ADM_default.h"
 
-#include "ADM_assert.h"
-
 #include "DIA_factory.h"
 #include "../../ADM_audiofilter/audioprocess.hxx"
 #include "../../ADM_audiofilter/audioeng_process.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -18,11 +18,14 @@
  *                                                                         *
  ***************************************************************************/
 
+#include <math.h>
+
+#include "config.h"
 #include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "DIA_factory.h"
 #include "avi_vars.h"
-#include "math.h"
+
 /**
       \fn GUI_displayBitrate
       \brief display a bargraph with bitrates

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavDecoder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavDecoder.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavDecoder.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -12,6 +12,7 @@
 //
 //
 
+#include "config.h"
 #include "ADM_default.h"
 #include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -12,11 +12,11 @@
 //
 //
 
+#include "config.h"
 #include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 
 #include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
-#include "ADM_assert.h" 
 #include "ADM_lavcodec.h"
 #include "ADM_codecs/ADM_ffmpegConfig.h"
 #include "ADM_encoder/ADM_vidEncode.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_mjpeg.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_mjpeg.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_mjpeg.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -4,6 +4,7 @@
 
 */
 
+#include "config.h"
 #include "ADM_default.h"
 
 #include "ADM_lavcodec.h"
@@ -13,14 +14,7 @@
 #include "ADM_encoder/ADM_vidEncode.hxx"
 #include "ADM_codecs/ADM_ffmpegConfig.h"
 #include "DIA_factory.h"
-#include "ADM_assert.h" 
 
-
-
-#include "ADM_codecs/ADM_codec.h"
-#include "ADM_encoder/ADM_vidEncode.hxx"
-#include "ADM_assert.h" 
-#include "DIA_factory.h"
 #include "../../ADM_encoder/adm_encmjpeg_param.h"
 
 /**

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -12,6 +12,7 @@
 //
 //
 
+#include "config.h"
 #include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -17,10 +17,9 @@
  *                                                                         *
  ***************************************************************************/
 
+#include "config.h"
 #include "ADM_default.h"
 
-#include "ADM_assert.h"
-
 #include "DIA_resizeWiz.h"
 #include "DIA_factory.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -12,9 +12,11 @@
 //
 //
 
-#include "ADM_default.h"
 #include <math.h>
 
+#include "config.h"
+#include "ADM_default.h"
+
 #include "ADM_toolkit/toolkit.hxx"
 
 #include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -15,6 +15,7 @@
  *                                                                         *
  ***************************************************************************/
 
+#include "config.h"
 #include "ADM_default.h"
 
 #include "ADM_toolkit/toolkit.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/GUI_render.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/GUI_render.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/GUI_render.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -18,7 +18,7 @@
  *                                                                         *
  ***************************************************************************/
 
-#include "ADM_default.h"
+#include "config.h"
 #include "ADM_assert.h"
 #include "GUI_render.h"
 #include "GUI_accelRender.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/GUI_sdlRender.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/GUI_sdlRender.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/GUI_sdlRender.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -15,16 +15,13 @@
 //
 //
 
-#include "ADM_default.h"
+#include "config.h"
 
 #if defined(USE_SDL)
 
 #include <stdio.h>
 #include <stdlib.h>
-#include <math.h>
 #include <string.h>
-#include <time.h>
-#include <sys/time.h>
 
 extern "C" {
 // get rid of warnings due to different definitions

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_interlaced.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_interlaced.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_interlaced.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -28,8 +28,8 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include "config.h"
 #include "ADM_default.h"
-
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidCNR2.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidCNR2.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidCNR2.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -35,9 +35,10 @@
 //         31/07/2002 - ver 2.1  - Bug Fixes (thx to dividee ;)
 //         20/07/2002 - ver 2.0  - Avisynth filter coded (from scratch)
 
+#include <math.h>
 
+#include "config.h"
 #include "ADM_default.h"
-#include <math.h>
 
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidColorYuv.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidColorYuv.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidColorYuv.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -44,9 +44,9 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include "ADM_default.h"
 #include <math.h>
 
+#include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
@@ -55,8 +55,6 @@
 #define MODULE_NAME MODULE_FILTER
 #include "ADM_osSupport/ADM_debug.h"
 
-
-
 #include "ADM_vidColorYuv.h"
 #include "ADM_filter/video_filters.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidFont.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidFont.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidFont.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -15,12 +15,12 @@
  *                                                                         *
  ***************************************************************************/
 
-#include "ADM_default.h"
+#include "config.h"
 
+#ifdef USE_FREETYPE
 #include <iconv.h>
 
- #ifdef USE_FREETYPE
-
+#include "ADM_default.h"
 #include "ADM_vidFont.h"
 
 static    FT_Library   	library;   		/* handle to library     */

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidMPdelogo.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidMPdelogo.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidMPdelogo.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -6,6 +6,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include "config.h"
 #include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_guiResize.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_guiResize.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_guiResize.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -17,6 +17,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include "config.h"
 #include "ADM_default.h"
 
 #include "ADM_editor/ADM_edit.hxx"
@@ -24,9 +25,7 @@
 #include "ADM_resizebis.hxx"
 #include "ADM_video/ADM_vidCommonFilter.h"
 #include "ADM_toolkit/toolkit.hxx"
-#include "ADM_assert.h"
 
-
 static int getResizeParams(uint32_t * w, uint32_t * h, uint32_t * algo,uint32_t ow,uint32_t oh,uint32_t fps);
 
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_resizebis.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_resizebis.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_resizebis.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -21,8 +21,9 @@
  *                                                                         *
  ***************************************************************************/
 
+#include <math.h>
+
 #include "ADM_default.h"
-#include <math.h>
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidASS.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidASS.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidASS.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -10,8 +10,8 @@
   Initial port from MPlayer by Moonz
 
 */
+#include "config.h"
 #include "ADM_default.h"
-
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
@@ -20,6 +20,7 @@
 #include "ADM_filter/video_filters.h"
 #include "ADM_colorspace/ADM_rgb.h"
 #include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
+
 #ifdef USE_FREETYPE
 
 #ifndef DIR_SEP

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidAddBorder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidAddBorder.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidAddBorder.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -14,6 +14,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include "config.h"
 #include "ADM_default.h"
 
 #include "ADM_toolkit/toolkit.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidAnimated.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidAnimated.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidAnimated.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -16,14 +16,12 @@
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 
-
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME MODULE_FILTER
 #include "ADM_osSupport/ADM_debug.h"
+
 #include "ADM_filter/video_filters.h"
 #include "ADM_vidAnimated.h"
-
-
 #include "ADM_inputs/ADM_inpics/ADM_pics.h"
 
 static FILTER_PARAM animated_template={10,

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidBSmear.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidBSmear.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidBSmear.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -22,6 +22,7 @@
  *                                                                         *
  ***************************************************************************/
 
+#include "config.h"
 #include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidBlend.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidBlend.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidBlend.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -18,14 +18,13 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include "config.h"
 #include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_vidField.h"
 
-#include"ADM_vidField.h"
-
-
 #ifdef ADM_CPU_X86_64
 static int64_t _l_w,_l_h;
 #else

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -18,6 +18,7 @@
  *                                                                         *
  ***************************************************************************/
  
+#include "config.h"
 #include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDGbob.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDGbob.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDGbob.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -21,7 +21,7 @@
 	Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
 */
 
-
+#include "config.h"
 #include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDecDec.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDecDec.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDecDec.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -40,18 +40,18 @@
 	Donald Graft
 	neuron2 at attbi.com.
 */
+#include "config.h"
 #include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
-#include"ADM_vidField.h"
-#include"ADM_video/ADM_cache.h"
+#include "ADM_vidField.h"
+#include "ADM_video/ADM_cache.h"
 
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME MODULE_FILTER
 #include "ADM_osSupport/ADM_debug.h"
 
-
 #include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
 
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -30,18 +30,16 @@
 	along with this program; if not, write to the Free Software
 	Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
 */
+#include "config.h"
 #include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 
-
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME MODULE_FILTER
 #include "ADM_osSupport/ADM_debug.h"
 
-
-
 #include "ADM_vidDecTelecide.h"
 #include "ADM_filter/video_filters.h"
 #include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDeintASM.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDeintASM.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDeintASM.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -18,8 +18,8 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include "config.h"
 #include "ADM_default.h"
-
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDenoise.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDenoise.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDenoise.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -21,6 +21,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include "config.h"
 #include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDropOut.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDropOut.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDropOut.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -14,6 +14,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include "config.h"
 #include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFade.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFade.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFade.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -7,9 +7,11 @@
  *                                                                         *
  ***************************************************************************/
 
-#include "ADM_default.h"
 #include <math.h>
 
+#include "config.h"
+#include "ADM_default.h"
+
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFields.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFields.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFields.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -14,15 +14,13 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include "config.h"
 #include "ADM_default.h"
-
-
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_vidField.h"
 
-#include"ADM_vidField.h"
-
 //_______________________________________________________________
 
 ADMVideoFields::ADMVideoFields(

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidForcedPP.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidForcedPP.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidForcedPP.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -12,6 +12,7 @@
 //
 //
 
+#include "config.h"
 #include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
@@ -21,8 +22,6 @@
 #define MODULE_NAME MODULE_FILTER
 #include "ADM_osSupport/ADM_debug.h"
 
-
-
 #include "ADM_vidForcedPP.h"
 #include "ADM_userInterfaces/ADM_commonUI/DIA_enter.h"
 #include "ADM_filter/video_filters.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -34,9 +34,11 @@
 	Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
 */
 
-#include "ADM_default.h"
 #include <iconv.h>
 
+#include "config.h"
+#include "ADM_default.h"
+
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidLargeMedian.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidLargeMedian.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidLargeMedian.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -19,6 +19,7 @@
  *                                                                         *
  ***************************************************************************/
 
+#include "config.h"
 #include "ADM_default.h"
 
 #include "ADM_toolkit/toolkit.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLD3D.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLD3D.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLD3D.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -16,8 +16,11 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include <math.h>
+
+#include "config.h"
 #include "ADM_default.h"
-#include <math.h>
+
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLD3Dlow.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLD3Dlow.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLD3Dlow.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -16,8 +16,11 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include <math.h>
+
+#include "config.h"
 #include "ADM_default.h"
-#include <math.h>
+
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLResize.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLResize.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLResize.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -19,6 +19,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include "config.h"
 #include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
@@ -33,7 +34,6 @@
 
 #include "ADM_libraries/ADM_lavutil/avutil.h"
 #include "ADM_libraries/ADM_libswscale/swscale.h"
-
 #include "ADM_filter/video_filters.h"
 
 typedef struct alg

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMSharpen.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMSharpen.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMSharpen.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -33,21 +33,19 @@
 	Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
 */
 
+#include "config.h"
 #include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
-#include"ADM_video/ADM_cache.h"
+#include "ADM_video/ADM_cache.h"
 
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME MODULE_FILTER
 #include "ADM_osSupport/ADM_debug.h"
 
-
 #include "ADM_filter/video_filters.h"
-
 #include "ADM_vidMSharpen_param.h"
-
 #include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
 
 class Msharpen : public AVDMGenericVideoStream

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -21,6 +21,7 @@
     Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA
 */
 
+#include "config.h"
 #include "ADM_default.h"
 #include "ADM_lavcodec.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMosaic.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMosaic.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMosaic.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -14,6 +14,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include "config.h"
 #include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
@@ -22,7 +23,6 @@
 
 #include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
 
-
 #ifdef ADM_CPU_X86
 extern "C" {
 #include "ADM_libraries/ADM_lavcodec/avcodec.h"
@@ -33,12 +33,9 @@
 #include "ADM_libraries/ADM_libswscale/swscale.h"
 
 #include "ADM_filter/video_filters.h"
-
 #include "ADM_video/ADM_cache.h"
-
 #include "ADM_vidMosaic_param.h"
 
-
 class  ADMVideoMosaic:public AVDMGenericVideoStream
  {
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMsmooth.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMsmooth.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMsmooth.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -28,6 +28,7 @@
 	Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
 */
 
+#include "config.h"
 #include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
@@ -38,9 +39,7 @@
 #define MODULE_NAME MODULE_FILTER
 #include "ADM_osSupport/ADM_debug.h"
 
-
 #include "ADM_filter/video_filters.h"
-
 #include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
 
 #if 0

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidPalShift.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidPalShift.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidPalShift.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -14,6 +14,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include "config.h"
 #include "ADM_default.h"
 
 #include "ADM_toolkit/toolkit.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidParticle.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidParticle.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidParticle.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -18,16 +18,14 @@
 #include <math.h>
 #include <algorithm>
 #include <string>
-//#include <vector>
+#include <ctype.h>
+
 using namespace std;
 
 #include "ADM_default.h"
-#include <ctype.h>
 
-#include "ADM_assert.h"
 #undef memcpy   // avoid compile errors due to macro
 #include "fourcc.h"
-//#include "avi_vars.h"
 
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidResampleFPS.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidResampleFPS.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidResampleFPS.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -15,9 +15,10 @@
  *                                                                         *
  ***************************************************************************/
 
-#include "ADM_default.h"
 #include <math.h>
 
+#include "config.h"
+#include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSRT.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSRT.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSRT.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -15,14 +15,12 @@
  *                                                                         *
  ***************************************************************************/
 
-#include "ADM_default.h"
+#include "config.h"
 
-#include <math.h>
+#ifdef USE_FREETYPE
 #include <iconv.h>
 
-#ifdef USE_FREETYPE
-
-
+#include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
@@ -30,13 +28,11 @@
 #include "ADM_video/ADM_vidFont.h"
 #include "ADM_videoFilter/ADM_vidSRT.h"
 
-#include "ADM_assert.h"
-
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME MODULE_FILTER
 #include "ADM_osSupport/ADM_debug.h"
-#include "ADM_filter/video_filters.h"
 
+#include "ADM_filter/video_filters.h"
 #include "prefs.h"
 
 static FILTER_PARAM subParam={15,{"_fontsize","_subname","_fontname","_charset",

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSRTRender.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSRTRender.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSRTRender.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -15,14 +15,13 @@
  *                                                                         *
  ***************************************************************************/
 
-#include "ADM_default.h"
+#include "config.h"
 
+#ifdef USE_FREETYPE
 #include <math.h>
 #include <iconv.h>
 
-
-#ifdef USE_FREETYPE
-
+#include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 
 #include "ADM_editor/ADM_edit.hxx"
@@ -30,17 +29,13 @@
 
 #include "ADM_video/ADM_vidFont.h"
 #include "ADM_videoFilter/ADM_vidSRT.h"
-#include "ADM_assert.h"
 
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME MODULE_FILTER
 #include "ADM_osSupport/ADM_debug.h"
 
-
 #define SUB_OUT 0xf0000000
-
 #define ALPHA
-
 #define LUMA_LEVEL 10
 
 #define SAFE_STRCPY(dest,destLen,src,srcLen) \

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSRTload.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSRTload.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSRTload.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -25,26 +25,21 @@
  *                                                                         *
  ***************************************************************************/
 
-#include "ADM_default.h"
+#include "config.h"
 
+#ifdef USE_FREETYPE
 #include <math.h>
 #include <iconv.h>
-#include <errno.h>
 
-
-#ifdef USE_FREETYPE
 //#define __STDC_ISO_10646__
 
-
+#include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
-
-#include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 
 #include "ADM_video/ADM_vidFont.h"
 #include "ADM_videoFilter/ADM_vidSRT.h"
-#include "ADM_assert.h"
 
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME MODULE_FILTER

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSoften.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSoften.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSoften.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -16,6 +16,7 @@
 //	could use some stuff and some mmx too
 //
 
+#include "config.h"
 #include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
@@ -25,13 +26,10 @@
 #define MODULE_NAME MODULE_FILTER
 #include "ADM_osSupport/ADM_debug.h"
 
-
-
 #include "ADM_vidSoften.h"
 #include "ADM_userInterfaces/ADM_commonUI/DIA_enter.h"
 #include "ADM_filter/video_filters.h"
 
-
 #include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
 
 static FILTER_PARAM softParam={3,{"radius","luma","chroma"}};

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidStabilize.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidStabilize.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidStabilize.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -14,9 +14,10 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include "ADM_default.h"
 #include <math.h>
 
+#include "config.h"
+#include "ADM_default.h"
 
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -27,7 +27,6 @@
 #include <fstream>
 #include <iterator>
 
-#include "ADM_assert.h"
 #include "fourcc.h"
 #include "avi_vars.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidThreshold.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidThreshold.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidThreshold.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -14,6 +14,7 @@
  *                                                                         *
  ***************************************************************************/
  
+#include "config.h"
 #include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVlad.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVlad.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVlad.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -20,15 +20,14 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include "config.h"
 #include "ADM_default.h"
-
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_vidVlad.h"
 #include "ADM_filter/video_filters.h"
 
-
 #include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
 
 #ifdef ADM_CPU_X86_64

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidYadif.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidYadif.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidYadif.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -25,6 +25,7 @@
   Ported to avidemux by mean
   Same license as original (?GPL)
 */
+#include "config.h"
 #include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
@@ -32,7 +33,6 @@
 #include "ADM_video/ADM_cache.h"
 #include "ADM_filter/video_filters.h"
 
-
 #include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
 //************************************************
 #define MIN(a,b) ((a) > (b) ? (b) : (a))

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADMmpdetc.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADMmpdetc.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADMmpdetc.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -16,13 +16,10 @@
 #define HAVE_DETC
 #ifdef HAVE_DETC
 
-#include "ADM_default.h"
+#include "config.h"
 #include "ADM_lavcodec.h"
-#include "math.h"
 #include "fourcc.h"
 
-
-
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
@@ -32,7 +29,6 @@
 #define MODULE_NAME MODULE_FILTER
 #include "ADM_osSupport/ADM_debug.h"
 
-
 //static void decimate(uint8_t *src,uint8_t *target, uint32_t linessrc, uint32_t width);
 #include "ADM_filter/video_filters.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt	2008-03-10 16:21:10 UTC (rev 3865)
@@ -52,6 +52,7 @@
 ENDIF (ADM_DEBUG)
 
 INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR})
+INCLUDE_DIRECTORIES(${CMAKE_BINARY_DIR}/config)
 INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR}/ADM_core/include)
 INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR}/ADM_libraries/ADM_utilities)
 INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR}/ADM_libraries/ADM_lavutil)
@@ -489,13 +490,10 @@
 	ADD_ADMLIB_ALL_TARGETS(ADM_osSupport)
 	
 	IF (MINGW)
-		ADD_LIB_ALL_TARGETS(imagehlp wsock32 pthreadGC2)
-	ELSEIF (CYGWIN)
-		ADD_LIB_ALL_TARGETS(pthread cygwin)
+		ADD_LIB_ALL_TARGETS(-mno-cygwin imagehlp wsock32 pthreadGC2)
 	ENDIF (MINGW)
 	
-	ADD_LIB_ALL_TARGETS(winmm)
-	ADD_LIB_ALL_TARGETS("-mno-cygwin -Wl,--export-all-symbols")
+	ADD_LIB_ALL_TARGETS(winmm -Wl,--export-all-symbols)
 
 	ADD_TARGET_LDFLAGS(avidemux2_cli "-Wl,-subsystem,console")
 	

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/avi_vars.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/avi_vars.h	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/avi_vars.h	2008-03-10 16:21:10 UTC (rev 3865)
@@ -1,6 +1,6 @@
 #ifndef __AVI_VARS
 #define __AVI_VARS
-#include "ADM_default.h"
+#include "config.h"
 #include "fourcc.h"
 #include "ADM_editor/ADM_edit.hxx"
 //----------------------

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/gui_savenew.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/gui_savenew.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/gui_savenew.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -15,13 +15,6 @@
  *                                                                         *
  ***************************************************************************/
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <math.h>
-#include <unistd.h>
-#include <time.h>
-#include <sys/time.h>
-
 #include "ADM_default.h"
 #include "ADM_threads.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/main.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/main.cpp	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/main.cpp	2008-03-10 16:21:10 UTC (rev 3865)
@@ -16,14 +16,16 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include "ADM_default.h"
 
 #ifdef __MINGW32__
 #include <windows.h>
 #include <excpt.h>
 #endif
 
+#include "config.h"
+#include "ADM_default.h"
 #include "ADM_threads.h"
+
 #define __DECLARE__
 #include "avi_vars.h"
 
@@ -105,7 +107,7 @@
 
 int main(int argc, char *argv[])
 {
-#ifdef __WIN32
+#if defined(__WIN32) && defined(USE_SDL)
 	redirectStdoutToFile();
 #endif
 

Added: branches/avidemux_2.5_branch_gruntster/cmake/ADM_coreConfig.h.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/ADM_coreConfig.h.cmake	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/cmake/ADM_coreConfig.h.cmake	2008-03-10 16:21:10 UTC (rev 3865)
@@ -0,0 +1,34 @@
+#ifndef ADM_CORE_H
+#define ADM_CORE_H
+
+// GCC - CPU
+#cmakedefine ADM_BIG_ENDIAN
+#cmakedefine ADM_CPU_64BIT
+#cmakedefine ADM_CPU_ALTIVEC
+#cmakedefine ADM_CPU_DCBZL
+#cmakedefine ADM_CPU_PPC
+#cmakedefine ADM_CPU_SSSE3
+#cmakedefine ADM_CPU_X86
+#cmakedefine ADM_CPU_X86_32
+#cmakedefine ADM_CPU_X86_64
+
+// GCC - Operating System
+#cmakedefine ADM_BSD_FAMILY
+
+// 'gettimeofday' function is present
+#cmakedefine HAVE_GETTIMEOFDAY
+
+// Presence of header files
+#cmakedefine HAVE_INTTYPES_H
+#cmakedefine HAVE_MALLOC_H
+#cmakedefine HAVE_STDINT_H
+#cmakedefine HAVE_SYS_TYPES_H
+
+#ifdef __MINGW32__
+#define rindex strrchr
+#define index strchr
+#define ftello ftello64
+#define fseeko fseeko64
+#endif
+
+#endif
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/cmake/admConfigHelper.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admConfigHelper.cmake	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admConfigHelper.cmake	2008-03-10 16:21:10 UTC (rev 3865)
@@ -156,6 +156,19 @@
 ENDMACRO (ADD_TARGET_CFLAGS)
 
 
+MACRO (ADD_TARGET_DEFINITIONS _target)
+	GET_TARGET_PROPERTY(_flags ${_target} COMPILE_FLAGS)
+
+	FOREACH (_def ${ARGN})
+		IF (${_def})
+			APPEND_FLAGS(_flags "-D${_def}")
+		ENDIF (${_def})
+	ENDFOREACH (_def ${ARGN})
+
+	SET_TARGET_PROPERTIES(${_target} PROPERTIES COMPILE_FLAGS "${_flags}")
+ENDMACRO (ADD_TARGET_DEFINITIONS)
+
+
 MACRO (ADD_CFLAGS_GTK_TARGET _target)
 	IF (ADM_UI_GTK)
 		ADD_TARGET_CFLAGS(${_target}_gtk ${ARGN})

Modified: branches/avidemux_2.5_branch_gruntster/cmake/admDetermineSystem.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admDetermineSystem.cmake	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admDetermineSystem.cmake	2008-03-10 16:21:10 UTC (rev 3865)
@@ -135,7 +135,7 @@
 	PERFORM_SYSTEM_TEST(cpu_ssse3_check.cpp "SSSE3 capable" SSSE3_SUPPORTED)
 
 	IF (SSSE3_SUPPORTED)
-		SET(ADM_CPU_SSSE3)
+		SET(ADM_CPU_SSSE3 1)
 	ENDIF (SSSE3_SUPPORTED)
 ENDIF (ADM_CPU_X86)
 

Modified: branches/avidemux_2.5_branch_gruntster/cmake/config.h.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/config.h.cmake	2008-03-09 18:05:14 UTC (rev 3864)
+++ branches/avidemux_2.5_branch_gruntster/cmake/config.h.cmake	2008-03-10 16:21:10 UTC (rev 3865)
@@ -1,23 +1,12 @@
-/* config.h.in.  Generated from configure.in by autoheader.  */
+#ifndef ADM_CONFIG_H
+#define ADM_CONFIG_H
 
+#include "../ADM_coreConfig.h"
+
 #define ADM_BUILD_CLI 1
 #define ADM_BUILD_GTK 2
 #define ADM_BUILD_QT4 3
 
-// GCC - CPU
-#cmakedefine ADM_BIG_ENDIAN
-#cmakedefine ADM_CPU_64BIT
-#cmakedefine ADM_CPU_ALTIVEC
-#cmakedefine ADM_CPU_DCBZL
-#cmakedefine ADM_CPU_PPC
-#cmakedefine ADM_CPU_SSSE3
-#cmakedefine ADM_CPU_X86
-#cmakedefine ADM_CPU_X86_32
-#cmakedefine ADM_CPU_X86_64
-
-// GCC - Operating System
-#cmakedefine ADM_BSD_FAMILY
-
 /* Jog Shuttle */
 #cmakedefine USE_JOG
 
@@ -42,30 +31,12 @@
 #cmakedefine HAVE_GETTEXT
 #endif
 
-/* Define to 1 if you have the `gettimeofday' function. */
-#cmakedefine HAVE_GETTIMEOFDAY
-
 // GTK+ uses X11 framework
 #cmakedefine HAVE_GTK_X11
 
-/* Define to 1 if you have the <inttypes.h> header file. */
-#cmakedefine HAVE_INTTYPES_H
-
 /* Define to 1 if you have the `mp3lame' library (-lmp3lame). */
 #cmakedefine HAVE_LIBMP3LAME
 
-/* Use malloc.h */
-#cmakedefine HAVE_MALLOC_H
-
-/* Define to 1 if you have the <stdint.h> header file. */
-#cmakedefine HAVE_STDINT_H
-
-/* Define to 1 if you have the <sys/types.h> header file. */
-#cmakedefine HAVE_SYS_TYPES_H
-
-/* Define to 1 if you have the <unistd.h> header file. */
-#cmakedefine HAVE_UNISTD_H
-
 /* stricter prototyping */
 #cmakedefine ICONV_NEED_CONST
 
@@ -165,9 +136,23 @@
 /* use Nvwa memory leak detector */
 #cmakedefine FIND_LEAKS
 
-#ifdef __MINGW32__
-#define rindex strrchr
-#define index strchr
-#define ftello ftello64
-#define fseeko fseeko64
+#if defined(OSS_SUPPORT) || defined (USE_ARTS) || defined(USE_SDL) || defined(__APPLE__) || defined(__WIN32) || defined(ALSA_SUPPORT)
+#define HAVE_AUDIO
 #endif
+
+// FIXME - start
+#ifdef HAVE_GETTEXT
+#  include <libintl.h>
+#  undef _
+#endif
+
+extern const char* translate(const char *__domainname, const char *__msgid);
+
+#ifdef QT_TR_NOOP
+#undef QT_TR_NOOP
+#endif
+
+#define QT_TR_NOOP(String) translate (PACKAGE, String)
+// FIXME - end
+
+#endif
\ No newline at end of file



From gruntster at mail.berlios.de  Mon Mar 10 19:39:26 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Mon, 10 Mar 2008 19:39:26 +0100
Subject: [Avidemux-svn-commit] r3866 - in
	branches/avidemux_2.5_branch_gruntster: avidemux
	avidemux/ADM_audio avidemux/ADM_audiocodec
	avidemux/ADM_audiofilter avidemux/ADM_core/include
	avidemux/ADM_core/src avidemux/ADM_editor
	avidemux/ADM_libraries/ADM_lavformat avidemux/ADM_osSupport
	avidemux/ADM_toolkit avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3
	avidemux/plugins/ADM_audiodecoder/ADM_ad_faad
	avidemux/plugins/ADM_audiodecoder/ADM_ad_mad
	avidemux/plugins/ADM_audiodecoder/ADM_ad_vorbis cmake
Message-ID: <200803101839.m2AIdQfT010339@sheep.berlios.de>

Author: gruntster
Date: 2008-03-10 19:38:58 +0100 (Mon, 10 Mar 2008)
New Revision: 3866

Added:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_files.h
   branches/avidemux_2.5_branch_gruntster/cmake/ad_plugin.cmake
Removed:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiofilter_channel_route.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiofilter_channel_route.h
Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audio/ADM_audiodef.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audio/audiogen.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audio/aviaudio.hxx
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_audiocodec.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_audiocodec.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_dca.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_lpcm.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_pluginLoad.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audioencoder.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audioencoder.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audioencoder_faac.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audioencoder_vorbis.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audioeng_process.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiofilter_bridge.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiofilter_bridge.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiofilter_buildchain.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiofilter_mixer.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiofilter_mixer.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_default.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_fileio.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edAudio.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edAudio.hxx
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADMedAVIAUD.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavformat/movenc.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_fileio.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_toolkit/filesel.h
   branches/avidemux_2.5_branch_gruntster/avidemux/main.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_ad_a52.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/ADM_ad_faad.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_vorbis/ADM_ad_vorbis.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_vorbis/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/cmake/ADM_coreConfig.h.cmake
   branches/avidemux_2.5_branch_gruntster/cmake/admCheckMiscLibs.cmake
Log:
[Merge] integrate changes from Mean's 2.5 branch (r3864)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audio/ADM_audiodef.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audio/ADM_audiodef.h	2008-03-10 16:21:10 UTC (rev 3865)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audio/ADM_audiodef.h	2008-03-10 18:38:58 UTC (rev 3866)
@@ -32,6 +32,26 @@
     CHANNEL_LAST
 } CHANNEL_CONF;
 
+#define MAX_CHANNELS 9
+
+typedef enum 
+{
+	CH_INVALID=0,
+	CH_MONO,
+	CH_FRONT_LEFT,
+	CH_FRONT_RIGHT,
+	CH_FRONT_CENTER,
+	CH_REAR_LEFT,
+	CH_REAR_RIGHT,
+	CH_REAR_CENTER,
+	CH_SIDE_LEFT,
+	CH_SIDE_RIGHT,
+	CH_LFE
+}CHANNEL_TYPE;
+// returns true if channel mapping is identical
+bool ADM_audioCompareChannelMapping(WAVHeader *wh1, WAVHeader *wh2,CHANNEL_TYPE *map1,CHANNEL_TYPE *map2);
+
+
 typedef struct
 {
   const char    *desc;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audio/audiogen.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audio/audiogen.cpp	2008-03-10 16:21:10 UTC (rev 3865)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audio/audiogen.cpp	2008-03-10 18:38:58 UTC (rev 3866)
@@ -531,4 +531,23 @@
     return 1;
 
 }
+/**
+ * 	\fn ADM_audioCompareChannelMapping
+ *  \brief return true if the two channel mapping are identical, false else.
+ */
+bool ADM_audioCompareChannelMapping(WAVHeader *wh1, WAVHeader *wh2,CHANNEL_TYPE *map1,CHANNEL_TYPE *map2)
+{
+	if(wh1->channels != wh2->channels) return false; // cannot be identical..
+		
+			for (int j = 0; j < wh1->channels; j++)
+			{
+				if (map1[j] != map2[j]) 
+				{
+					return false;
+					
+				}
+			}
+	return true;
+}
+
 //

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audio/aviaudio.hxx
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audio/aviaudio.hxx	2008-03-10 16:21:10 UTC (rev 3865)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audio/aviaudio.hxx	2008-03-10 18:38:58 UTC (rev 3866)
@@ -77,6 +77,7 @@
 class AVDMGenericAudioStream
 {
    	protected:
+   				
     #define SIZE_INTERNAL 64*1024 
 					uint8_t 	internalBuffer[2 * SIZE_INTERNAL];
 					float 	internalBuffer_float[SIZE_INTERNAL];
@@ -163,10 +164,14 @@
 										uint32_t *samples);
 		// Return 1 if needs special muxing mode (AAC)			
 			virtual uint8_t packetPerFrame( void)	{return 0;} 
+				// The channel mapping for this stream
+				// Only used by decoder...
+			virtual CHANNEL_TYPE *getChannelMapping(void) {if(_codec) return _codec->channelMapping; else return NULL;}
 }
 ;
+/* Describe the channel mapping */
 
-
+//
 uint8_t mpegAudioIdentify(uint8_t *ptr, uint32_t maxLookUp, WAVHeader *header, uint8_t *tokens=NULL);
 
 #endif

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_audiocodec.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_audiocodec.cpp	2008-03-10 16:21:10 UTC (rev 3865)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_audiocodec.cpp	2008-03-10 18:38:58 UTC (rev 3866)
@@ -17,15 +17,14 @@
 #include <stdio.h>
 #include <stdlib.h>
 #include <string.h>
-#include "ADM_assert.h"
 #include <math.h>
 
 #include "config.h"
+#include "ADM_assert.h"
 
 #include "fourcc.h"
 #include "ADM_audio/aviaudio.hxx"
 #include "ADM_audiocodec/ADM_audiocodec.h"
-#include "ADM_audiofilter/audiofilter_channel_route.h"
 #include "ADM_libraries/ADM_libwrapper/libwrapper_global.h"
 
 extern ADM_Audiocodec *ADM_ad_searchCodec(uint32_t fourcc,	WAVHeader *info,uint32_t extraLength,uint8_t *extraData);
@@ -128,15 +127,20 @@
 		printf("\n Unknown codec : %lu",fourcc);
 		out = (ADM_Audiocodec *) new ADM_AudiocodecUnknown(fourcc);
 	}
-        if(info->channels==1)
-        {
-            ch_route.input_type[0] = CH_MONO;
-        }else
-        {
-	   ch_route.input_type[0] = CH_FRONT_LEFT;
-	   ch_route.input_type[1] = CH_FRONT_RIGHT;
-        }
-
+	// For channel mapping, simple case we do it here so that the decoder does not have
+	// to worry.
+	// For more complicated case (channel >2) , it is up to the decoder to do it...
+	switch(info->channels)
+	{
+			case 1: out->channelMapping[0] = CH_MONO;
+					break;
+			case 2: out->channelMapping[0] = CH_FRONT_LEFT;
+					out->channelMapping[1] = CH_FRONT_RIGHT;
+					break;
+			default:break;
+	
+	
+	}
 	return out;
 }
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_audiocodec.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_audiocodec.h	2008-03-10 16:21:10 UTC (rev 3865)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_audiocodec.h	2008-03-10 18:38:58 UTC (rev 3866)
@@ -16,6 +16,7 @@
  ***************************************************************************/
 #ifndef ADMAUDIOCODEC
 #define ADMAUDIOCODEC
+
 #define SCRATCH_PAD_SIZE (100*1000*2)
 extern uint8_t scratchPad[];
 #define  ADMAC_BUFFER (48000*4)
@@ -33,6 +34,8 @@
 		virtual	uint8_t run(uint8_t *inptr, uint32_t nbIn, float *outptr, uint32_t *nbOut)=0;
 		virtual	uint8_t isCompressed(void)=0;
 		virtual	uint8_t isDecompressable(void)=0;
+		// Channel mapping, only input is used by the decoders..
+		CHANNEL_TYPE channelMapping[MAX_CHANNELS];
  };
 
 ADM_Audiocodec	*getAudioCodec(uint32_t fourcc, WAVHeader *info, uint32_t extra=0, uint8_t *extraData=NULL);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_dca.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_dca.cpp	2008-03-10 16:21:10 UTC (rev 3865)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_dca.cpp	2008-03-10 18:38:58 UTC (rev 3866)
@@ -14,17 +14,13 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include "ADM_assert.h"
 #include <math.h>
 
 #include "config.h"
-#include "fourcc.h"
+#include "ADM_default.h"
+
 #include "ADM_audio/aviaudio.hxx"
 #include "ADM_audiocodec/ADM_audiocodec.h"
-#include "ADM_audiofilter/audiofilter_channel_route.h"
 
 #include "prefs.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_lpcm.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_lpcm.cpp	2008-03-10 16:21:10 UTC (rev 3865)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_lpcm.cpp	2008-03-10 18:38:58 UTC (rev 3866)
@@ -16,29 +16,23 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-//#include <sstream>
-#include "ADM_assert.h"
+#include "ADM_default.h"
 #include <math.h>
 
-#include "config.h"
+
 #include "avifmt.h"
 #include "avifmt2.h"
-#include "fourcc.h"
-//#include "ADM_audio/aviaudio.hxx"
 #include "ADM_audiocodec/ADM_audiocodec.h"
-#include "ADM_audiofilter/audiofilter_channel_route.h"
 
+
 ADM_AudiocodecWavSwapped::ADM_AudiocodecWavSwapped( uint32_t fourcc ) : ADM_Audiocodec(fourcc)
 {
-	ch_route.input_type[0] = CH_FRONT_LEFT;
-	ch_route.input_type[1] = CH_FRONT_RIGHT;
-	ch_route.input_type[2] = CH_FRONT_CENTER;
-	ch_route.input_type[3] = CH_LFE;
-	ch_route.input_type[4] = CH_REAR_LEFT;
-	ch_route.input_type[5] = CH_REAR_RIGHT;
+	channelMapping[0] = CH_FRONT_LEFT;
+	channelMapping[1] = CH_FRONT_RIGHT;
+	channelMapping[2] = CH_FRONT_CENTER;
+	channelMapping[3] = CH_LFE;
+	channelMapping[4] = CH_REAR_LEFT;
+	channelMapping[5] = CH_REAR_RIGHT;
 }
 
 ADM_AudiocodecWavSwapped::~ADM_AudiocodecWavSwapped()

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_pluginLoad.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_pluginLoad.cpp	2008-03-10 16:21:10 UTC (rev 3865)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_pluginLoad.cpp	2008-03-10 18:38:58 UTC (rev 3866)
@@ -44,7 +44,7 @@
 static uint8_t tryLoadingAudioPlugin(const char *file)
 {
 	ADM_ad_plugin blank;
-	printf("[ADM_ad_plugin] Scanning %s\n",ADM_GetFileName(file));
+	//printf("[ADM_ad_plugin] Scanning %s\n",ADM_GetFileName(file));
 	ADM_LibWrapper *wrapper=new ADM_LibWrapper;
 	 if(true!=wrapper->loadLibrary(file))
 	 {
@@ -91,10 +91,9 @@
  * 	\fn ADM_ad_loadPlugins
  *  \brief load all audio plugins
  */
-uint8_t ADM_ad_loadPlugins(void)
+uint8_t ADM_ad_loadPlugins(const char *path)
 {
 #define MAX_EXTERNAL_FILTER 50
-	  char *path="/home/fx/ADM_plugins";
 	  char *files[MAX_EXTERNAL_FILTER];
 	  uint32_t nbFile;
 	  

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/CMakeLists.txt	2008-03-10 16:21:10 UTC (rev 3865)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/CMakeLists.txt	2008-03-10 18:38:58 UTC (rev 3866)
@@ -2,7 +2,7 @@
 	audiodeng_buildfilters.cpp  audioencoder_lavcodec.cpp  audioeng_process.cpp           audiofilter_film2pal.cpp   audiolib_sox.cpp
 	audioencoder_aften.cpp      audioencoder_pcm.cpp       audiofilter_bridge.cpp         audiofilter_limiter.cpp    audio_raw.cpp
 	audioencoder.cpp            audioencoder_twolame.cpp   audiofilter_buildchain.cpp     audiofilter_mixer.cpp
-	audioencoder_faac.cpp       audioencoder_vorbis.cpp    audiofilter_channel_route.cpp  audiofilter_normalize.cpp
+	audioencoder_faac.cpp       audioencoder_vorbis.cpp    audiofilter_normalize.cpp
 	audioencoder_lame.cpp       audioeng_buff.cpp          audiofilter_dolby.cpp          audiofilter_sox.cpp)
 	
 ADD_ADM_LIB_ALL_TARGETS(ADM_audiofilter ${ADMaudiofilter_SRCS})
@@ -21,4 +21,4 @@
 
 IF (USE_VORBIS)
 	ADD_SOURCE_CFLAGS(audioencoder_vorbis.cpp -I${VORBIS_INCLUDE_DIR})
-ENDIF (USE_VORBIS)
\ No newline at end of file
+ENDIF (USE_VORBIS)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audioencoder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audioencoder.cpp	2008-03-10 16:21:10 UTC (rev 3865)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audioencoder.cpp	2008-03-10 18:38:58 UTC (rev 3866)
@@ -38,8 +38,7 @@
   tmpbuffer=new float[_wavheader->frequency*_wavheader->channels];
   tmphead=tmptail=0;
   eof_met=0;
-  ch_order[0] = CH_FRONT_LEFT;
-  ch_order[1] = CH_FRONT_RIGHT;
+  
 };
 /********************/
 AUDMEncoder::~AUDMEncoder()
@@ -134,27 +133,29 @@
 			nr = 0;
 	}
 }
-
-void AUDMEncoder::reorderChannels(float *data, uint32_t nb)
+/**
+ * 	\fn reorderChannels
+ *  \brief Reorder the channels
+ */
+void AUDMEncoder::reorderChannels(float *data, uint32_t nb,CHANNEL_TYPE *input,CHANNEL_TYPE *output)
 {
 	float tmp [_wavheader->channels];
 	static uint8_t reorder[MAX_CHANNELS];
 	static bool reorder_on;
 	
-	if (ch_route.mode < 1) {
+	
 		reorder_on = 0;
 		int j = 0;
-
-		if (_wavheader->channels > 2) {
+		// Should we reorder the channels (might be needed for encoder ?
+		if (_wavheader->channels > 2) 
+		{
 			CHANNEL_TYPE *p_ch_type;
-			if (ch_route.copy)
- 				p_ch_type = ch_route.input_type;
-			else
- 				p_ch_type = ch_route.output_type;
-
-			for (int i = 0; i < MAX_CHANNELS; i++) {
-				for (int c = 0; c < _wavheader->channels; c++) {
-					if (p_ch_type[c] == ch_order[i]) {
+			for (int i = 0; i < _wavheader->channels; i++) 
+			{
+				for (int c = 0; c < _wavheader->channels; c++) 
+				{
+					if (input[c] == output[i]) 
+					{
 						if (j != c)
 							reorder_on = 1;
 						reorder[j++] = c;
@@ -162,9 +163,7 @@
 				}
 			}
 		}
-		if (ch_route.mode == 0)
-			ch_route.mode = 1;
-	}
+	
 
 	if (reorder_on)
 		for (int i = 0; i < nb; i++) {

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audioencoder.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audioencoder.h	2008-03-10 16:21:10 UTC (rev 3865)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audioencoder.h	2008-03-10 18:38:58 UTC (rev 3866)
@@ -16,7 +16,6 @@
   \param param : An opaque structure that contains the codec specific configuration datas
 */
 #include "audioeng_buildfilters.h"
-#include "audiofilter_channel_route.h"
 
 typedef struct ADM_audioEncoderDescriptor
 {
@@ -56,10 +55,12 @@
     float          *tmpbuffer;
     uint8_t        refillBuffer(int minimum); // Mininum is in float
 
-    CHANNEL_TYPE ch_order[MAX_CHANNELS];
-    void reorderChannels(float *start, uint32_t nb);
+    
+    void reorderChannels(float *data, uint32_t nb,CHANNEL_TYPE *input,CHANNEL_TYPE *output);
 
     uint32_t       tmphead,tmptail;
+    // The encoder can remap the audio channel (or not). If so, let's store the the configuration here
+    CHANNEL_TYPE outputChannelMapping[MAX_CHANNELS];
   public:
     //
     uint32_t read(uint32_t len,uint8_t *buffer);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audioencoder_faac.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audioencoder_faac.cpp	2008-03-10 16:21:10 UTC (rev 3865)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audioencoder_faac.cpp	2008-03-10 18:38:58 UTC (rev 3866)
@@ -40,18 +40,18 @@
   channels=instream->getInfo()->channels;
   switch(channels)
   {
-    case 1:ch_order[1] = CH_FRONT_LEFT;break;
+    case 1:outputChannelMapping[1] = CH_FRONT_LEFT;break;
     case 2:
-      ch_order[0] = CH_FRONT_LEFT;
-      ch_order[1] = CH_FRONT_RIGHT;
+    	outputChannelMapping[0] = CH_FRONT_LEFT;
+    	outputChannelMapping[1] = CH_FRONT_RIGHT;
       break;
     default :
-      ch_order[0] = CH_FRONT_CENTER;
-      ch_order[1] = CH_FRONT_LEFT;
-      ch_order[2] = CH_FRONT_RIGHT;
-      ch_order[3] = CH_REAR_LEFT;
-      ch_order[4] = CH_REAR_RIGHT;
-      ch_order[5] = CH_LFE;
+    	outputChannelMapping[0] = CH_FRONT_CENTER;
+    	outputChannelMapping[1] = CH_FRONT_LEFT;
+    	outputChannelMapping[2] = CH_FRONT_RIGHT;
+    	outputChannelMapping[3] = CH_REAR_LEFT;
+    	outputChannelMapping[4] = CH_REAR_RIGHT;
+    	outputChannelMapping[5] = CH_LFE;
   }
 };
 
@@ -207,7 +207,7 @@
           return 0; 
         }
         ADM_assert(tmptail>=tmphead);
-        reorderChannels(&(tmpbuffer[tmphead]),*samples);
+        reorderChannels(&(tmpbuffer[tmphead]),*samples,_incoming->getChannelMapping(),outputChannelMapping);
         *len = faacEncEncode(_handle, (int32_t *)&(tmpbuffer[tmphead]), _chunk, dest, FA_BUFFER_SIZE);
         if(!*len) 
         {

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audioencoder_vorbis.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audioencoder_vorbis.cpp	2008-03-10 16:21:10 UTC (rev 3865)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audioencoder_vorbis.cpp	2008-03-10 18:38:58 UTC (rev 3866)
@@ -56,12 +56,12 @@
   _wavheader->encoding=WAV_OGG;
   _oldpos=0;
   _handle=(void *)new  vorbisStruct; 
-  ch_order[0] = CH_FRONT_LEFT;
-  ch_order[1] = CH_FRONT_RIGHT;
-  ch_order[2] = CH_REAR_LEFT;
-  ch_order[3] = CH_REAR_RIGHT;
-  ch_order[4] = CH_FRONT_CENTER;
-  ch_order[5] = CH_LFE;
+  outputChannelMapping[0] = CH_FRONT_LEFT;
+  outputChannelMapping[1] = CH_FRONT_RIGHT;
+  outputChannelMapping[2] = CH_REAR_LEFT;
+  outputChannelMapping[3] = CH_REAR_RIGHT;
+  outputChannelMapping[4] = CH_FRONT_CENTER;
+  outputChannelMapping[5] = CH_LFE;
 };
 
 
@@ -228,7 +228,7 @@
     float_samples=vorbis_analysis_buffer(&VD, nbSample) ;
     int index=tmphead;
     // Put our samples in incoming buffer
-    reorderChannels(&(tmpbuffer[tmphead]), nbSample);
+    reorderChannels(&(tmpbuffer[tmphead]), nbSample,_incoming->getChannelMapping(),outputChannelMapping);
     for (int i = 0; i < nbSample; i++)
       for (int j = 0; j < _wavheader->channels; j++) {
       float_samples[j][i] = tmpbuffer[index++];

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audioeng_process.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audioeng_process.h	2008-03-10 16:21:10 UTC (rev 3865)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audioeng_process.h	2008-03-10 18:38:58 UTC (rev 3866)
@@ -61,7 +61,8 @@
     //! \param status Status of the fill operation
     virtual uint8_t fillIncomingBuffer(AUD_Status *status);
     //! length in float
-    uint32_t        _length; 
+    uint32_t        _length;
+    
   public:
 /** Constructor
     \param previous : Pointer to previous in chain filter 
@@ -86,5 +87,8 @@
 //! Rewind the stream to the beginning. Used mainly by the normalize filter 
         virtual   uint8_t    rewind(void)  ;
                   uint32_t   getLength(void) {return _length;};
+// Returns the channel mapping, by default it is the on from the previous
+// The value returned is an array up to MAX_CHANNELS                  
+        virtual   CHANNEL_TYPE    *getChannelMapping(void ) {return _previous->getChannelMapping();}
 };
 #endif

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiofilter_bridge.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiofilter_bridge.cpp	2008-03-10 16:21:10 UTC (rev 3865)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiofilter_bridge.cpp	2008-03-10 18:38:58 UTC (rev 3866)
@@ -12,16 +12,10 @@
  *                                                                         *
  ***************************************************************************/
 
-#include "config.h"
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
+#include "ADM_default.h"
 #include <math.h>
 
-#include "ADM_assert.h"
-
-
 #include "avifmt.h"
 #include "avifmt2.h"
 // Needed for incoming ..
@@ -177,5 +171,15 @@
   }
   return 1;
 }
-
+/**
+ * 	\fn return _incoming->getChannelMapping();
+ * \brief since it is a bridge, we translate the filter channel mapping from the audiostream channel mapping
+ */
+CHANNEL_TYPE *AUDMAudioFilter_Bridge::getChannelMapping(void) 
+{
+	ADM_assert(_incoming);
+	CHANNEL_TYPE *chan=_incoming->getChannelMapping();
+	ADM_assert(chan);
+	return chan;
+}
 //EOF

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiofilter_bridge.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiofilter_bridge.h	2008-03-10 16:21:10 UTC (rev 3865)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiofilter_bridge.h	2008-03-10 18:38:58 UTC (rev 3866)
@@ -31,6 +31,7 @@
                                                                                            // Output MAXIMUM max float value
                                                                                            // Not sample! float!
     virtual    uint8_t    rewind(void)  ;                                              // go back to the beginning
+    virtual CHANNEL_TYPE *getChannelMapping(void);
 };
 
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiofilter_buildchain.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiofilter_buildchain.cpp	2008-03-10 16:21:10 UTC (rev 3865)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiofilter_buildchain.cpp	2008-03-10 18:38:58 UTC (rev 3866)
@@ -143,10 +143,7 @@
             mixer=new AUDMAudioFilterMixer( lastFilter,audioMixing);
             lastFilter = mixer;
             filtersFloat[filtercount++] = lastFilter;
-            ch_route.copy = 0;
-          } else
-            ch_route.copy = 1;
-
+          } 
     if (audioDRC)
           {
             AUDMAudioFilterLimiter *pdrc = NULL;
@@ -282,8 +279,6 @@
   AUDMAudioFilter         *lastFilter=NULL;
   AVDMGenericAudioStream  *output=NULL;
   AUDMEncoder             *tmpfilter=NULL;
-  ch_route.mode = 0;
-
 	// if audio is set to copy, we just return the first filter
   if(!audioProcessMode())
   {

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiofilter_channel_route.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiofilter_channel_route.cpp	2008-03-10 16:21:10 UTC (rev 3865)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiofilter_channel_route.cpp	2008-03-10 18:38:58 UTC (rev 3866)
@@ -1,36 +0,0 @@
-//
-// C++ Implementation: audiofilter_channel_route
-//
-// Description: 
-//
-//
-// Author: Mihail Zenkov <kreator at tut.by>, (C) 2006
-//
-// Copyright: See COPYING file that comes with this distribution
-//
-//
-#include <stdint.h>
-#include "ADM_audio/ADM_audiodef.h"
-#include "audiofilter_channel_route.h"
-
-ChannelRoute ch_route;
-
-bool ChannelRoute::compareChType(WAVHeader *wh1, WAVHeader *wh2)
-{
-	static bool ret;
-	if (mode < 1) {
-		int i = 0;
-		if (wh1->channels == wh2->channels)
-			for (int j = 0; j < wh1->channels; j++)
-				if (input_type[i] == output_type[j]) {
-					i++;
-					if (i == wh1->channels) {
-						ret = 1;
-						return ret;
-					}
-					j = -1;
-				}
-		ret = 0;
-	}
-	return ret;
-}

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiofilter_channel_route.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiofilter_channel_route.h	2008-03-10 16:21:10 UTC (rev 3865)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiofilter_channel_route.h	2008-03-10 18:38:58 UTC (rev 3866)
@@ -1,52 +0,0 @@
-//
-// C++ Interface: audiofilter_channel_route
-//
-// Description: 
-//
-//
-// Author: Mihail Zenkov <kreator at tut.by>, (C) 2006
-//
-// Copyright: See COPYING file that comes with this distribution
-//
-//
-#ifndef AUDM_CHANNEL_ROUTE_H
-#define AUDM_CHANNEL_ROUTE_H
-
-#define MAX_CHANNELS 9
-
-typedef enum 
-{
-	CH_INVALID=0,
-	CH_MONO,
-	CH_FRONT_LEFT,
-	CH_FRONT_RIGHT,
-	CH_FRONT_CENTER,
-	CH_REAR_LEFT,
-	CH_REAR_RIGHT,
-	CH_REAR_CENTER,
-	CH_SIDE_LEFT,
-	CH_SIDE_RIGHT,
-	CH_LFE
-}CHANNEL_TYPE;
-
-class ChannelRoute
-{
-public:
-	ChannelRoute() {}
-	~ChannelRoute() {}
-
-	bool compareChType(WAVHeader *wh1, WAVHeader *wh2);
-
-	CHANNEL_TYPE input_type[MAX_CHANNELS];
-	CHANNEL_TYPE output_type[MAX_CHANNELS];
-
-	/*	-1 get parm from each chunk
-		0 get parm from first chunk
-		1 all ready inited	 */
-	int8_t mode;
-	bool copy;
-};
-
-extern ChannelRoute ch_route;
-
-#endif

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiofilter_mixer.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiofilter_mixer.cpp	2008-03-10 16:21:10 UTC (rev 3865)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiofilter_mixer.cpp	2008-03-10 18:38:58 UTC (rev 3866)
@@ -12,19 +12,13 @@
  *                                                                         *
  ***************************************************************************/
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <math.h>
-
 #include "ADM_default.h"
 
 #include "audioeng_process.h"
 #include "audiofilter_mixer.h"
-#include "audiofilter_channel_route.h"
 #include "audiofilter_dolby.h"
+#include <math.h>
 
-
 AUDMAudioFilterMixer::AUDMAudioFilterMixer(AUDMAudioFilter *instream,CHANNEL_CONF out):AUDMAudioFilter (instream)
 {
     _output=out;
@@ -39,61 +33,61 @@
 	switch (_output) {
 		case CHANNEL_MONO:
 			_wavHeader.channels = 1;
-			ch_route.output_type[0] = CH_MONO;
+			outputChannelMapping[0] = CH_MONO;
 		break;
 		case CHANNEL_STEREO:
 			_wavHeader.channels = 2;
-			ch_route.output_type[0] = CH_FRONT_LEFT;
-			ch_route.output_type[1] = CH_FRONT_RIGHT;
+			outputChannelMapping[0] = CH_FRONT_LEFT;
+			outputChannelMapping[1] = CH_FRONT_RIGHT;
 		break;
 		case CHANNEL_2F_1R:
 			_wavHeader.channels = 3;
-			ch_route.output_type[0] = CH_FRONT_LEFT;
-			ch_route.output_type[1] = CH_FRONT_RIGHT;
-			ch_route.output_type[2] = CH_REAR_CENTER;
+			outputChannelMapping[0] = CH_FRONT_LEFT;
+			outputChannelMapping[1] = CH_FRONT_RIGHT;
+			outputChannelMapping[2] = CH_REAR_CENTER;
 		break;
 		case CHANNEL_3F:
 			_wavHeader.channels = 3;
-			ch_route.output_type[0] = CH_FRONT_LEFT;
-			ch_route.output_type[1] = CH_FRONT_RIGHT;
-			ch_route.output_type[2] = CH_FRONT_CENTER;
+			outputChannelMapping[0] = CH_FRONT_LEFT;
+			outputChannelMapping[1] = CH_FRONT_RIGHT;
+			outputChannelMapping[2] = CH_FRONT_CENTER;
 		break;
 		case CHANNEL_3F_1R:
 			_wavHeader.channels = 4;
-			ch_route.output_type[0] = CH_FRONT_LEFT;
-			ch_route.output_type[1] = CH_FRONT_RIGHT;
-			ch_route.output_type[2] = CH_REAR_CENTER;
-			ch_route.output_type[3] = CH_FRONT_CENTER;
+			outputChannelMapping[0] = CH_FRONT_LEFT;
+			outputChannelMapping[1] = CH_FRONT_RIGHT;
+			outputChannelMapping[2] = CH_REAR_CENTER;
+			outputChannelMapping[3] = CH_FRONT_CENTER;
 		break;
 		case CHANNEL_2F_2R:
 			_wavHeader.channels = 4;
-			ch_route.output_type[0] = CH_FRONT_LEFT;
-			ch_route.output_type[1] = CH_FRONT_RIGHT;
-			ch_route.output_type[2] = CH_REAR_LEFT;
-			ch_route.output_type[3] = CH_REAR_RIGHT;
+			outputChannelMapping[0] = CH_FRONT_LEFT;
+			outputChannelMapping[1] = CH_FRONT_RIGHT;
+			outputChannelMapping[2] = CH_REAR_LEFT;
+			outputChannelMapping[3] = CH_REAR_RIGHT;
 		break;
 		case CHANNEL_3F_2R:
 			_wavHeader.channels = 5;
-			ch_route.output_type[0] = CH_FRONT_LEFT;
-			ch_route.output_type[1] = CH_FRONT_RIGHT;
-			ch_route.output_type[2] = CH_REAR_LEFT;
-			ch_route.output_type[3] = CH_REAR_RIGHT;
-			ch_route.output_type[4] = CH_FRONT_CENTER;
+			outputChannelMapping[0] = CH_FRONT_LEFT;
+			outputChannelMapping[1] = CH_FRONT_RIGHT;
+			outputChannelMapping[2] = CH_REAR_LEFT;
+			outputChannelMapping[3] = CH_REAR_RIGHT;
+			outputChannelMapping[4] = CH_FRONT_CENTER;
 		break;
 		case CHANNEL_3F_2R_LFE:
 			_wavHeader.channels = 6;
-			ch_route.output_type[0] = CH_FRONT_LEFT;
-			ch_route.output_type[1] = CH_FRONT_RIGHT;
-			ch_route.output_type[2] = CH_REAR_LEFT;
-			ch_route.output_type[3] = CH_REAR_RIGHT;
-			ch_route.output_type[4] = CH_FRONT_CENTER;
-			ch_route.output_type[5] = CH_LFE;
+			outputChannelMapping[0] = CH_FRONT_LEFT;
+			outputChannelMapping[1] = CH_FRONT_RIGHT;
+			outputChannelMapping[2] = CH_REAR_LEFT;
+			outputChannelMapping[3] = CH_REAR_RIGHT;
+			outputChannelMapping[4] = CH_FRONT_CENTER;
+			outputChannelMapping[5] = CH_LFE;
 		break;
 		case CHANNEL_DOLBY_PROLOGIC:
 		case CHANNEL_DOLBY_PROLOGIC2:
 			_wavHeader.channels = 2;
-			ch_route.output_type[0] = CH_FRONT_LEFT;
-			ch_route.output_type[1] = CH_FRONT_RIGHT;
+			outputChannelMapping[0] = CH_FRONT_LEFT;
+			outputChannelMapping[1] = CH_FRONT_RIGHT;
 			DolbyInit();
 		break;
 	}
@@ -106,7 +100,14 @@
 //    printf("[mixer]Out   channels : %u : %u \n",_wavHeader.channels,ADM_channel_mixer[_output]);
 
 };
-
+/**
+ * 	\fn getChannelMapping
+ *  \brief That filter changes the channel mapping, output its own
+ */
+CHANNEL_TYPE    *AUDMAudioFilterMixer::getChannelMapping(void ) 
+{
+		return this->outputChannelMapping;
+}
 AUDMAudioFilterMixer::~AUDMAudioFilterMixer()
 {
 };
@@ -118,7 +119,7 @@
     
 }
 
-static int MNto1(float *in,float *out,uint32_t nbSample,uint32_t chan)
+static int MNto1(float *in,float *out,uint32_t nbSample,uint32_t chan,CHANNEL_TYPE *chanMap)
 {
 float sum;
 int den=(chan+1)&0xfe;
@@ -135,13 +136,13 @@
     
 }
 
-static int MStereo(float *in,float *out,uint32_t nbSample,uint32_t chan)
+static int MStereo(float *in,float *out,uint32_t nbSample,uint32_t chan,CHANNEL_TYPE *chanMap)
 {
 	memset(out, 0, sizeof(float) * nbSample * 2);
 
 	for (int i = 0; i < nbSample; i++) {
 		for (int c = 0; c < chan; c++) {
-			switch (ch_route.input_type[c]) {
+			switch (chanMap[c]) {
 				case CH_MONO:
 				case CH_FRONT_CENTER:
 				case CH_REAR_CENTER:
@@ -168,13 +169,13 @@
 	return nbSample*2;
 }
 
-static int M2F1R(float *in,float *out,uint32_t nbSample,uint32_t chan)
+static int M2F1R(float *in,float *out,uint32_t nbSample,uint32_t chan,CHANNEL_TYPE *chanMap)
 {
 	memset(out, 0, sizeof(float) * nbSample * 3);
 
 	for (int i = 0; i < nbSample; i++) {
 		for (int c = 0; c < chan; c++) {
-			switch (ch_route.input_type[c]) {
+			switch (chanMap[c]) {
 				case CH_MONO:
 				case CH_FRONT_CENTER:
 					out[0]  += *in * 0.707;
@@ -213,13 +214,13 @@
 	return nbSample * 3;
 }
 
-static int M3F(float *in,float *out,uint32_t nbSample,uint32_t chan)
+static int M3F(float *in,float *out,uint32_t nbSample,uint32_t chan,CHANNEL_TYPE *chanMap)
 {
 	memset(out, 0, sizeof(float) * nbSample * 3);
 
 	for (int i = 0; i < nbSample; i++) {
 		for (int c = 0; c < chan; c++) {
-			switch (ch_route.input_type[c]) {
+			switch (chanMap[c]) {
 				case CH_MONO:
 				case CH_FRONT_CENTER:
 				case CH_REAR_CENTER:
@@ -249,13 +250,13 @@
 	return nbSample * 3;
 }
 
-static int M3F1R(float *in,float *out,uint32_t nbSample,uint32_t chan)
+static int M3F1R(float *in,float *out,uint32_t nbSample,uint32_t chan,CHANNEL_TYPE *chanMap)
 {
 	memset(out, 0, sizeof(float) * nbSample * 4);
 
 	for (int i = 0; i < nbSample; i++) {
 		for (int c = 0; c < chan; c++) {
-			switch (ch_route.input_type[c]) {
+			switch (chanMap[c]) {
 				case CH_MONO:
 				case CH_FRONT_CENTER:
 					out[3]  += *in;
@@ -294,13 +295,13 @@
 	return nbSample * 4;
 }
 
-static int M2F2R(float *in,float *out,uint32_t nbSample,uint32_t chan)
+static int M2F2R(float *in,float *out,uint32_t nbSample,uint32_t chan,CHANNEL_TYPE *chanMap)
 {
 	memset(out, 0, sizeof(float) * nbSample * 4);
 
 	for (int i = 0; i < nbSample; i++) {
 		for (int c = 0; c < chan; c++) {
-			switch (ch_route.input_type[c]) {
+			switch (chanMap[c]) {
 				case CH_MONO:
 				case CH_FRONT_CENTER:
 					out[0]  += *in * 0.707;
@@ -345,13 +346,13 @@
 	return nbSample * 4;
 }
 
-static int M3F2R(float *in,float *out,uint32_t nbSample,uint32_t chan)
+static int M3F2R(float *in,float *out,uint32_t nbSample,uint32_t chan,CHANNEL_TYPE *chanMap)
 {
 	memset(out, 0, sizeof(float) * nbSample * 5);
 
 	for (int i = 0; i < nbSample; i++) {
 		for (int c = 0; c < chan; c++) {
-			switch (ch_route.input_type[c]) {
+			switch (chanMap[c]) {
 				case CH_MONO:
 				case CH_FRONT_CENTER:
 					out[4]  += *in;
@@ -396,13 +397,13 @@
 	return nbSample * 5;
 }
 
-static int M3F2RLFE(float *in,float *out,uint32_t nbSample,uint32_t chan)
+static int M3F2RLFE(float *in,float *out,uint32_t nbSample,uint32_t chan,CHANNEL_TYPE *chanMap)
 {
 	memset(out, 0, sizeof(float) * nbSample * 6);
 
 	for (int i = 0; i < nbSample; i++) {
 		for (int c = 0; c < chan; c++) {
-			switch (ch_route.input_type[c]) {
+			switch (chanMap[c]) {
 				case CH_MONO:
 				case CH_FRONT_CENTER:
 					out[4]  += *in;
@@ -443,13 +444,13 @@
 	return nbSample * 6;
 }
 
-static int MDolbyProLogic(float *in,float *out,uint32_t nbSample,uint32_t chan)
+static int MDolbyProLogic(float *in,float *out,uint32_t nbSample,uint32_t chan,CHANNEL_TYPE *chanMap)
 {
 	memset(out, 0, sizeof(float) * nbSample * 2);
 
 	for (int i = 0; i < nbSample; i++) {
 		for (int c = 0; c < chan; c++) {
-			switch (ch_route.input_type[c]) {
+			switch (chanMap[c]) {
 				case CH_MONO:
 				case CH_FRONT_CENTER:
 				case CH_LFE:
@@ -487,13 +488,13 @@
 	return nbSample*2;
 }
 
-static int MDolbyProLogic2(float *in,float *out,uint32_t nbSample,uint32_t chan)
+static int MDolbyProLogic2(float *in,float *out,uint32_t nbSample,uint32_t chan,CHANNEL_TYPE *chanMap)
 {
 	memset(out, 0, sizeof(float) * nbSample * 2);
 
 	for (int i = 0; i < nbSample; i++) {
 		for (int c = 0; c < chan; c++) {
-			switch (ch_route.input_type[c]) {
+			switch (chanMap[c]) {
 				case CH_MONO:
 				case CH_FRONT_CENTER:
 				case CH_LFE:
@@ -538,7 +539,7 @@
 }
 
 
-typedef int MIXER(float *in,float *out,uint32_t nbSample,uint32_t chan)  ;
+typedef int MIXER(float *in,float *out,uint32_t nbSample,uint32_t chan,CHANNEL_TYPE *chanMap)  ;
 
 static MIXER *matrixCall[CHANNEL_LAST] = {
 NULL, MNto1, MStereo, M2F1R, M3F, M3F1R, M2F2R, M3F2R, M3F2RLFE, MDolbyProLogic, MDolbyProLogic2
@@ -586,13 +587,15 @@
     
 
     // Now do the downsampling
-	if (_output == CHANNEL_INVALID || ch_route.compareChType(&_wavHeader, _previous->getInfo())) {
-		ch_route.copy = 1;
+	if (_output == CHANNEL_INVALID || true==ADM_audioCompareChannelMapping(&_wavHeader, _previous->getInfo(),
+			_previous->getChannelMapping(),outputChannelMapping))
+	{
+		
 		rd= (uint32_t)MCOPY(&_incomingBuffer[_head],output,available,input_channels);
-	} else {
-		ch_route.copy = 0;
+	} else 
+	{
 		MIXER *call=matrixCall[_output];
-		rd= (uint32_t)call(&_incomingBuffer[_head],output,available,input_channels);
+		rd= (uint32_t)call(&_incomingBuffer[_head],output,available,input_channels,_previous->getChannelMapping());
 	}
 
     _head+=available*input_channels;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiofilter_mixer.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiofilter_mixer.h	2008-03-10 16:21:10 UTC (rev 3865)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiofilter_mixer.h	2008-03-10 18:38:58 UTC (rev 3866)
@@ -5,10 +5,14 @@
     protected:
         CHANNEL_CONF    _output;
         CHANNEL_CONF    _input;
+        // output channel mapping
+        CHANNEL_TYPE outputChannelMapping[MAX_CHANNELS];
     public:
 
       ~AUDMAudioFilterMixer();
       AUDMAudioFilterMixer(AUDMAudioFilter *instream,CHANNEL_CONF out);
       uint32_t   fill(uint32_t max,float *output,AUD_Status *status);
+      // That filter changes its output channel mapping...
+      virtual   CHANNEL_TYPE    *getChannelMapping(void );
 };
 #endif

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_default.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_default.h	2008-03-10 16:21:10 UTC (rev 3865)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_default.h	2008-03-10 18:38:58 UTC (rev 3866)
@@ -34,4 +34,5 @@
 #endif
 
 #include "ADM_mangle.h"
+#include "ADM_files.h"
 #endif

Copied: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_files.h (from rev 3865, branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/include/ADM_files.h)
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/include/ADM_files.h	2008-03-10 16:21:10 UTC (rev 3865)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_files.h	2008-03-10 18:38:58 UTC (rev 3866)
@@ -0,0 +1,33 @@
+/** *************************************************************************
+             
+    \fn ADM_filest.h
+    \brief Helpers function to access configuration files
+                      
+    copyright            : (C) 2008 by mean
+    
+ ***************************************************************************/
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#ifndef ADM_FILES_H
+#define ADM_FILES_H
+// Returns dir to ~/.avidemux, no need to free it
+char *ADM_getBaseDir(void);
+// Returns dir to ~/.avidemux/jobs, no need to free it
+char *ADM_getJobDir(void);
+// Returns dir to ~/.avidemux/custom, no need to free it
+char *ADM_getCustomDir(void);
+#ifdef __cplusplus
+/* Returns the full path relative to install dir i.e. /usr +base1/base2, needs to be deleted [] by caller */
+char *ADM_getInstallRelativePath(const char *base1, const char *base2=NULL,const char *base3=NULL);
+/* Returns the full path relative to .avidemux dir i.e. /home/fx/... +base1/base2 needs to be deleted []*/
+char *ADM_getHomeRelativePath(const char *base1, const char *base2=NULL,const char *base3=NULL);
+#endif
+uint8_t buildDirectoryContent(uint32_t *outnb,const char *base, char *jobName[],int maxElems,const char *ext);
+
+#endif

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_fileio.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_fileio.cpp	2008-03-10 16:21:10 UTC (rev 3865)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_fileio.cpp	2008-03-10 18:38:58 UTC (rev 3866)
@@ -29,6 +29,12 @@
 #include "ADM_toolkit/filesel.h"
 #include "ADM_toolkit/toolkit.hxx"
 
+#if defined(__WIN32)
+  static const char *separator="\\"; 
+#else
+  static const char *separator="/";
+#endif
+
 #undef fread
 #undef fwrite
 #undef fopen
@@ -62,12 +68,12 @@
   return fclose(file); 
 }
 //*****************************
-static char basedir[1024]={0};
-static char jobdir[1024]={0};
-static char customdir[1024]={0};
-int baseDirDone=0;
-int jobDirDone=0;
-int customDirDone=0;
+static char ADM_basedir[1024]={0};
+static char *ADM_jobdir=NULL;
+static char *ADM_customdir=NULL;
+static int baseDirDone=0;
+
+
 #ifdef __WIN32
 const char *ADM_DIR_NAME="\\avidemux";
 #else
@@ -82,23 +88,15 @@
 
 char *ADM_getCustomDir(void)
 {
-  if(customDirDone) return customdir;
-
-  char *rootDir;
-  rootDir=ADM_getBaseDir();
-  strncpy(customdir,rootDir,1023);
-#if defined(__WIN32)
-  strcat(customdir,"\\custom"); 
-#else
-  strcat(customdir,"/custom");
-#endif
-  if(!ADM_mkdir(customdir))
+  if(ADM_customdir) return ADM_customdir;
+  ADM_customdir=ADM_getHomeRelativePath("custom");
+  
+  if(!ADM_mkdir(ADM_customdir))
   {
-    GUI_Error_HIG("Oops","can't create custom directory (%s).",customdir);
-                return NULL;
+	  printf("can't create custom directory (%s).\n",ADM_customdir);
+      return NULL;
   }
-  customDirDone=1;
-  return customdir;
+  return ADM_customdir;
 }
 /*
       Get the  directory where jobs are stored
@@ -106,24 +104,60 @@
 
 char *ADM_getJobDir(void)
 {
-  if(jobDirDone) return jobdir;
+	  if(ADM_jobdir) return ADM_jobdir;
+	  ADM_jobdir=ADM_getHomeRelativePath("jobs");
+	  
+	  if(!ADM_mkdir(ADM_jobdir))
+	  {
+		  printf("can't create custom directory (%s).\n",ADM_jobdir);
+	      return NULL;
+	  }
+	  return ADM_jobdir;
+}
+/**
+ * 	\fn ADM_getRelativePath
+ */
+static char *ADM_getRelativePath(const char *base0,const char *base1, const char *base2,const char *base3)
+{
+	char *result;
+	int length=strlen(base1);
+	if(base2) length+=strlen(base2);
+	if(base3) length+=strlen(base3);
 
-  char *rootDir;
-  rootDir=ADM_getBaseDir();
-  strncpy(jobdir,rootDir,1023);
-#if defined(__WIN32)
-  strcat(jobdir,"\\jobs"); 
-#else
-  strcat(jobdir,"/jobs");
-#endif
-  if(!ADM_mkdir(jobdir))
-  {
-    GUI_Error_HIG("Oops","can't create job directory (%s).",jobdir);
-                return NULL;
-  }
-  jobDirDone=1;
-  return jobdir;
+	
+	
+	length+=strlen(base0);
+	length+=5; // Slashes + end 0
+	result=(char *)new char [length];
+	strcpy(result,base0);
+	strcat(result,separator);
+		
+	strcat(result,base1);
+	strcat(result,separator);
+	if(base2)
+	{
+		strcat(result,base2);
+		strcat(result,separator);
+		if(base3)
+		{
+			strcat(result,base3);
+			strcat(result,separator);
+		}
+	}
+	return result;
 }
+/**
+ * 	\fn char *ADM_getHomeRelativePath(const char *base1, const char *base2=NULL,const char *base3=NULL);
+ *  \brief Returns home directory +base 1 + base 2... The return value is a copy, and must be deleted []
+ */
+char *ADM_getHomeRelativePath(const char *base1, const char *base2,const char *base3)
+{
+	return ADM_getRelativePath(ADM_getBaseDir(),base1,base2,base3);
+}
+char *ADM_getInstallRelativePath(const char *base1, const char *base2,const char *base3)
+{
+	return ADM_getRelativePath(ADM_INSTALL_DIR,base1,base2,base3);
+}
 /*
       Get the root directory for .avidemux stuff
 ******************************************************/
@@ -133,7 +167,7 @@
 DIR *dir=NULL;
 char *home;
 //
-        if(baseDirDone) return basedir;
+        if(baseDirDone) return ADM_basedir;
 // Get the base directory
 #if defined(__WIN32)
         if( ! (home=getenv("USERPROFILE")) )
@@ -163,11 +197,11 @@
         delete [] dirname;
 
         // Now built the filename
-        strncpy(basedir,home,1023);
-        strncat(basedir,ADM_DIR_NAME,1023-strlen(basedir));
+        strncpy(ADM_basedir,home,1023);
+        strncat(ADM_basedir,ADM_DIR_NAME,1023-strlen(ADM_basedir));
         baseDirDone=1;
-        printf("Using %s as base directory for prefs/jobs/...\n",basedir);
-        return basedir;
+        printf("Using %s as base directory for prefs/jobs/...\n",ADM_basedir);
+        return ADM_basedir;
 }
 /*----------------------------------------
       Create a directory
@@ -206,6 +240,11 @@
               closedir(dir); 
               return 1;
 }
+/**
+ *  \fn buildDirectoryContent
+ * 	\brief Returns the content of a dir with the extension ext. The receiving array must be allocated by caller
+ * (just the array, not the names themselves)
+ */
 uint8_t buildDirectoryContent(uint32_t *outnb,const char *base, char *jobName[],int maxElems,const char *ext)
 {
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edAudio.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edAudio.cpp	2008-03-10 16:21:10 UTC (rev 3865)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edAudio.cpp	2008-03-10 18:38:58 UTC (rev 3866)
@@ -21,20 +21,12 @@
  *                                                                         *
  ***************************************************************************/
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-//#include <stream.h>
-#include "ADM_assert.h"
+#include "ADM_default.h"
 #include <math.h>
-#include "config.h"
 #include "avifmt.h"
 #include "avifmt2.h"
 
-#include "fourcc.h"
 
-//#include "aviaudio.hxx"
-
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_editor/ADM_edAudio.hxx"
 
@@ -51,7 +43,15 @@
 }
 // Build information
 //
-
+CHANNEL_TYPE *AVDMEditAudioStream::getChannelMapping(void)
+{
+#if 0
+	return _father->getChannelMapping();
+#else
+	return AVDMGenericAudioStream::getChannelMapping();
+#endif
+	
+}
 AVDMEditAudioStream::AVDMEditAudioStream (ADM_Composer * father)
 {
   uint32_t l = 0;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edAudio.hxx
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edAudio.hxx	2008-03-10 16:21:10 UTC (rev 3865)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edAudio.hxx	2008-03-10 18:38:58 UTC (rev 3866)
@@ -30,4 +30,5 @@
 	virtual	uint8_t		getPacket(uint8_t *dest, uint32_t *len, uint32_t *samples);
 	virtual	uint8_t		flushPacket(void);
 	virtual uint8_t		extraData(uint32_t *l,uint8_t **d);
+	virtual CHANNEL_TYPE *getChannelMapping(void);
 };

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADMedAVIAUD.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADMedAVIAUD.cpp	2008-03-10 16:21:10 UTC (rev 3865)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADMedAVIAUD.cpp	2008-03-10 18:38:58 UTC (rev 3866)
@@ -47,6 +47,14 @@
 	return 1;
 
 }
+#if 0
+CHANNEL_TYPE *ADM_Composer::getChannelMapping(void)
+{
+	_VIDEOS *currentVideo;
+		currentVideo=&_videos[AUDIOSEG];
+		return currentVideo->_audiostream->getChannelMapping();
+}
+#endif
 uint8_t ADM_Composer::getAudioPacket(uint8_t *dest, uint32_t *len, uint32_t *samples)
 {
 uint8_t r;	

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavformat/movenc.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavformat/movenc.c	2008-03-10 16:21:10 UTC (rev 3865)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavformat/movenc.c	2008-03-10 18:38:58 UTC (rev 3866)
@@ -946,13 +946,21 @@
     put_be32(pb, 0x1);
 
     put_be32(pb, av_rescale_rnd(track->trackDuration, globalTimescale, track->timescale, AV_ROUND_UP)); /* duration   ... doesn't seem to effect psp */
-
-    // MEANX : NO put_be32(pb, track->cluster[0].cts); /* first pts is cts since dts is 0 */
-      put_be32(pb, 0x00000000);
+#if 1
+    // MEANX : NO 
+    put_be32(pb, 0x00000000);
+    put_be32(pb, 0x0001);
     // /MEANX
+#else
+    put_be32(pb, track->cluster[0].cts); /* first pts is cts since dts is 0 */
+    put_be32(pb, 0x00010000);
+#endif
+    
+     
+    
 
 
-    put_be32(pb, 0x0001); // MEANX put_be32(pb, 0x00010000);
+   // MEANX 
     return 0x24;
 }
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_fileio.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_fileio.cpp	2008-03-10 16:21:10 UTC (rev 3865)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_fileio.cpp	2008-03-10 18:38:58 UTC (rev 3866)
@@ -1,143 +1 @@
-/***************************************************************************
-                    
-    copyright            : (C) 2006 by mean
-    email                : fixounet at free.fr
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#include "config.h" 
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-    
-#include <dirent.h>
-#include <errno.h>
-#include <sys/stat.h>
-
-#include <unistd.h>
-
-#ifdef __MINGW32__
-#include <glib.h>
-#endif
-
-#include "ADM_default.h"
-
-
-#include "ADM_toolkit/filesel.h"
-#include "ADM_toolkit/toolkit.hxx"
-
-//*****************************
-static char basedir[1024]={0};
-static char jobdir[1024]={0};
-static char customdir[1024]={0};
-int baseDirDone=0;
-int jobDirDone=0;
-int customDirDone=0;
-#ifdef __WIN32
-const char *ADM_DIR_NAME="\\avidemux";
-#else
-const char *ADM_DIR_NAME="/.avidemux";
-#endif
-/*
-
-*/
-/*
-      Get the  directory where jobs are stored
-******************************************************/
-
-char *ADM_getCustomDir(void)
-{
-  if(customDirDone) return customdir;
-
-  char *rootDir;
-  rootDir=ADM_getBaseDir();
-  strncpy(customdir,rootDir,1023);
-#if defined(__WIN32)
-  strcat(customdir,"\\custom"); 
-#else
-  strcat(customdir,"/custom");
-#endif
-  if(!ADM_mkdir(customdir))
-  {
-    GUI_Error_HIG(QT_TR_NOOP("Oops"),QT_TR_NOOP("can't create custom directory (%s)."),customdir);
-                return NULL;
-  }
-  customDirDone=1;
-  return customdir;
-}
-/*
-      Get the  directory where jobs are stored
-******************************************************/
-
-char *ADM_getJobDir(void)
-{
-  if(jobDirDone) return jobdir;
-
-  char *rootDir;
-  rootDir=ADM_getBaseDir();
-  strncpy(jobdir,rootDir,1023);
-#if defined(__WIN32)
-  strcat(jobdir,"\\jobs"); 
-#else
-  strcat(jobdir,"/jobs");
-#endif
-  if(!ADM_mkdir(jobdir))
-  {
-    GUI_Error_HIG(QT_TR_NOOP("Oops"),QT_TR_NOOP("can't create job directory (%s)."),jobdir);
-                return NULL;
-  }
-  jobDirDone=1;
-  return jobdir;
-}
-/*
-      Get the root directory for .avidemux stuff
-******************************************************/
-char *ADM_getBaseDir(void)
-{
-char *dirname=NULL;
-DIR *dir=NULL;
-char *home;
-//
-        if(baseDirDone) return basedir;
-// Get the base directory
-#if defined(__WIN32)
-        if( ! (home=getenv("USERPROFILE")) )
-        {
-          GUI_Error_HIG(QT_TR_NOOP("Oops"),QT_TR_NOOP("can't determine $USERPROFILE."));
-                    home="c:\\";
-        }
-
-#else
-        if( ! (home=getenv("HOME")) )
-        {
-          GUI_Error_HIG(QT_TR_NOOP("Oops"),QT_TR_NOOP("can't determine $HOME."));
-                return NULL;
-        }
-#endif
-
- // Try to open the .avidemux directory
-        dirname=new char[strlen(home)+strlen(ADM_DIR_NAME)+2];
-        strcpy(dirname,home);
-        strcat(dirname,ADM_DIR_NAME);
-        if(!ADM_mkdir(dirname))
-        {
-          GUI_Error_HIG(QT_TR_NOOP("Oops"),QT_TR_NOOP("Cannot create the .avidemux directory"), NULL);
-                        delete [] dirname;
-                        return NULL;
-        }
-        delete [] dirname;
-
-        // Now built the filename
-        strncpy(basedir,home,1023);
-        strncat(basedir,ADM_DIR_NAME,1023-strlen(basedir));
-        baseDirDone=1;
-        printf("Using %s as base directory for prefs/jobs/...\n",basedir);
-        return basedir;
-}
+// RMED
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_toolkit/filesel.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_toolkit/filesel.h	2008-03-10 16:21:10 UTC (rev 3865)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_toolkit/filesel.h	2008-03-10 18:38:58 UTC (rev 3866)
@@ -25,12 +25,6 @@
 uint8_t FileSel_SelectRead(const char *title,char *target,uint32_t max, const char *source);
 uint8_t FileSel_SelectDir(const char *title,char *target,uint32_t max, const char *source);
 
-char *ADM_getBaseDir(void);
-char *ADM_getJobDir(void);
-char *ADM_getCustomDir(void);
 
-uint8_t buildDirectoryContent(uint32_t *outnb,const char *base, char *jobName[],int maxElems,const char *ext);
-//const char *GetFileName(const char *str);
-
 #endif
 //EOF

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/main.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/main.cpp	2008-03-10 16:21:10 UTC (rev 3865)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/main.cpp	2008-03-10 18:38:58 UTC (rev 3866)
@@ -74,7 +74,7 @@
 extern void ADM_memStatInit( void );
 extern void ADM_memStatEnd( void );
 extern void getUIDescription(char*);
-extern uint8_t ADM_ad_loadPlugins(void);
+extern uint8_t ADM_ad_loadPlugins(const char *path);
 
 #ifdef __MINGW32__
 extern EXCEPTION_DISPOSITION exceptionHandler(struct _EXCEPTION_RECORD* pExceptionRec, void* pEstablisherFrame, struct _CONTEXT* pContextRecord, void* pDispatcherContext);
@@ -236,8 +236,19 @@
 	}
 	
 	ADM_dealloc(dynloadPath);
-	// Load audio codec plugin
-	ADM_ad_loadPlugins();
+	//***************Plugins *********************
+	// Load system wide audio decoder plugin
+	char *adPlugins=ADM_getInstallRelativePath("lib","ADM_plugins","audioDecoder");
+	ADM_ad_loadPlugins(adPlugins);
+	delete [] adPlugins;
+	// load local audio decoder plugins
+	adPlugins=ADM_getHomeRelativePath("plugins","audioDecoder");
+	ADM_ad_loadPlugins(adPlugins);
+	delete [] adPlugins;
+	//***************Plugins *********************
+	
+	
+	
     ADM_lavInit();
 #ifdef HAVE_AUDIO
     AVDM_audioInit();

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_ad_a52.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_ad_a52.cpp	2008-03-10 16:21:10 UTC (rev 3865)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_ad_a52.cpp	2008-03-10 18:38:58 UTC (rev 3866)
@@ -16,7 +16,7 @@
  ***************************************************************************/
 #include "ADM_default.h"
 #include "ADM_ad_plugin.h"
-#include "ADM_audiofilter/audiofilter_channel_route.h"
+
 #ifdef USE_AC3
 extern "C" {
 #include "ADM_liba52/a52.h"
@@ -131,8 +131,8 @@
             break;
         }
 
-	if (ch_route.mode < 1) {
-		CHANNEL_TYPE *p_ch_type = ch_route.input_type;
+
+		CHANNEL_TYPE *p_ch_type = channelMapping;
 		if (flags & A52_LFE) {
 			*(p_ch_type++) = CH_LFE;
 		}
@@ -177,7 +177,7 @@
 			default:
 				ADM_assert(0);
 		}
-	}
+	
 
         sample_t level = 1, bias = 0;
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/CMakeLists.txt	2008-03-10 16:21:10 UTC (rev 3865)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/CMakeLists.txt	2008-03-10 18:38:58 UTC (rev 3866)
@@ -6,5 +6,5 @@
 TARGET_LINK_LIBRARIES(ADM_ad_a52 ADM_liba52)
 
 # FIXME
-ADD_TARGET_CFLAGS(ADM_ad_a52 "-I${CMAKE_BINARY_DIR}/config/cli")
-ADD_TARGET_CFLAGS(ADM_ad_a52 "-I${CMAKE_SOURCE_DIR}/avidemux/ADM_audiocodec")
\ No newline at end of file
+INCLUDE(ad_plugin)
+ADM_audio_plugin(ADM_ad_a52)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/ADM_ad_faad.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/ADM_ad_faad.cpp	2008-03-10 16:21:10 UTC (rev 3865)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/ADM_ad_faad.cpp	2008-03-10 18:38:58 UTC (rev 3866)
@@ -17,7 +17,7 @@
 //
 #include "ADM_default.h"
 #include "ADM_ad_plugin.h"
-#include "ADM_audiofilter/audiofilter_channel_route.h"
+
 #include "faad.h"
 
 #define FAAD_BUFFER 2048
@@ -92,12 +92,12 @@
 			
 		}
 
-	ch_route.input_type[0] = CH_FRONT_CENTER;
-	ch_route.input_type[1] = CH_FRONT_LEFT;
-	ch_route.input_type[2] = CH_FRONT_RIGHT;
-	ch_route.input_type[3] = CH_REAR_LEFT;
-	ch_route.input_type[4] = CH_REAR_RIGHT;
-	ch_route.input_type[5] = CH_LFE;
+		channelMapping[0] = CH_FRONT_CENTER;
+		channelMapping[1] = CH_FRONT_LEFT;
+		channelMapping[2] = CH_FRONT_RIGHT;
+		channelMapping[3] = CH_REAR_LEFT;
+		channelMapping[4] = CH_REAR_RIGHT;
+		channelMapping[5] = CH_LFE;
 
 		printf("[FAAD]Faad decoder created\n");
 }

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/CMakeLists.txt	2008-03-10 16:21:10 UTC (rev 3865)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/CMakeLists.txt	2008-03-10 18:38:58 UTC (rev 3866)
@@ -3,5 +3,6 @@
 ADD_LIBRARY(ADM_ad_faad SHARED ${ADM_ad_faad_SRCS})
 
 # FIXME
-ADD_TARGET_CFLAGS(ADM_ad_faad "-I${CMAKE_BINARY_DIR}/config/cli")
-ADD_TARGET_CFLAGS(ADM_ad_faad "-I${CMAKE_SOURCE_DIR}/avidemux/ADM_audiocodec")
\ No newline at end of file
+TARGET_LINK_LIBRARIES(ADM_ad_faad  ${FAAD_LIBRARY_DIR})
+INCLUDE(ad_plugin)
+ADM_audio_plugin(ADM_ad_faad)
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/CMakeLists.txt	2008-03-10 16:21:10 UTC (rev 3865)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/CMakeLists.txt	2008-03-10 18:38:58 UTC (rev 3866)
@@ -11,5 +11,5 @@
 ADD_TARGET_CFLAGS(ADM_ad_Mad ${MAD_CFLAGS})
 
 # FIXME
-ADD_TARGET_CFLAGS(ADM_ad_Mad "-I${CMAKE_BINARY_DIR}/config/cli")
-ADD_TARGET_CFLAGS(ADM_ad_Mad "-I${CMAKE_SOURCE_DIR}/avidemux/ADM_audiocodec")
\ No newline at end of file
+INCLUDE(ad_plugin)
+ADM_audio_plugin(ADM_ad_Mad)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_vorbis/ADM_ad_vorbis.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_vorbis/ADM_ad_vorbis.cpp	2008-03-10 16:21:10 UTC (rev 3865)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_vorbis/ADM_ad_vorbis.cpp	2008-03-10 18:38:58 UTC (rev 3866)
@@ -27,8 +27,8 @@
  ***************************************************************************/
 #include "ADM_default.h"
 #include "ADM_ad_plugin.h"
-#include "ADM_audiofilter/audiofilter_channel_route.h"
 
+
 #include <vorbis/codec.h>
 #include "ADM_ad_vorbis.h"
 
@@ -158,12 +158,12 @@
 	STRUCT->ampscale=1;
 	_init=1;
 
-	ch_route.input_type[0] = CH_FRONT_LEFT;
-	ch_route.input_type[1] = CH_FRONT_RIGHT;
-	ch_route.input_type[2] = CH_REAR_LEFT;
-	ch_route.input_type[3] = CH_REAR_RIGHT;
-	ch_route.input_type[4] = CH_FRONT_CENTER;
-	ch_route.input_type[5] = CH_LFE;
+	channelMapping[0] = CH_FRONT_LEFT;
+	channelMapping[1] = CH_FRONT_RIGHT;
+	channelMapping[2] = CH_REAR_LEFT;
+	channelMapping[3] = CH_REAR_RIGHT;
+	channelMapping[4] = CH_FRONT_CENTER;
+	channelMapping[5] = CH_LFE;
  }
  // This codec expects more or less one packet at a time !
  

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_vorbis/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_vorbis/CMakeLists.txt	2008-03-10 16:21:10 UTC (rev 3865)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_vorbis/CMakeLists.txt	2008-03-10 18:38:58 UTC (rev 3866)
@@ -2,6 +2,8 @@
 
 ADD_LIBRARY(ADM_ad_vorbis SHARED ${ADM_ad_vorbis_SRCS})
 
-# FIXME
-ADD_TARGET_CFLAGS(ADM_ad_vorbis "-I${CMAKE_BINARY_DIR}/config/cli")
-ADD_TARGET_CFLAGS(ADM_ad_vorbis "-I${CMAKE_SOURCE_DIR}/avidemux/ADM_audiocodec")
\ No newline at end of file
+# FIXME
+TARGET_LINK_LIBRARIES(ADM_ad_vorbis  ${VORBIS_LIBRARY_DIR})
+TARGET_LINK_LIBRARIES(ADM_ad_vorbis  ${VORBISENC_LIBRARY_DIR})
+INCLUDE(ad_plugin)
+ADM_audio_plugin(ADM_ad_vorbis)

Modified: branches/avidemux_2.5_branch_gruntster/cmake/ADM_coreConfig.h.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/ADM_coreConfig.h.cmake	2008-03-10 16:21:10 UTC (rev 3865)
+++ branches/avidemux_2.5_branch_gruntster/cmake/ADM_coreConfig.h.cmake	2008-03-10 18:38:58 UTC (rev 3866)
@@ -1,6 +1,8 @@
 #ifndef ADM_CORE_H
 #define ADM_CORE_H
 
+#define ADM_INSTALL_DIR "${ADM_INSTALL_DIR}"
+
 // GCC - CPU
 #cmakedefine ADM_BIG_ENDIAN
 #cmakedefine ADM_CPU_64BIT

Copied: branches/avidemux_2.5_branch_gruntster/cmake/ad_plugin.cmake (from rev 3865, branches/avidemux_2.5_branch_mean_merged/cmake/ad_plugin.cmake)

Modified: branches/avidemux_2.5_branch_gruntster/cmake/admCheckMiscLibs.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admCheckMiscLibs.cmake	2008-03-10 16:21:10 UTC (rev 3865)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admCheckMiscLibs.cmake	2008-03-10 18:38:58 UTC (rev 3866)
@@ -89,6 +89,7 @@
 ENDIF (GETTEXT)
 
 SET(ADM_LOCALE "${CMAKE_INSTALL_PREFIX}/share/locale")
+SET(ADM_INSTALL_DIR "${CMAKE_INSTALL_PREFIX}")
 
 MESSAGE("")
 



From gruntster at mail.berlios.de  Mon Mar 10 22:01:23 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Mon, 10 Mar 2008 22:01:23 +0100
Subject: [Avidemux-svn-commit] r3867 - in
	branches/avidemux_2.5_branch_gruntster: avidemux
	avidemux/ADM_core/src avidemux/ADM_libraries/ADM_lavcodec
	avidemux/ADM_osSupport avidemux/ADM_videoFilter cmake
Message-ID: <200803102101.m2AL1NcG027418@sheep.berlios.de>

Author: gruntster
Date: 2008-03-10 22:01:13 +0100 (Mon, 10 Mar 2008)
New Revision: 3867

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_dynamicLoading.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_fileio.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_misc.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/TLK_clock.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavcodec/avcodec.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSRTload.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/cmake/admConfigHelper.cmake
Log:
[Core] make ADM_core a shared lib

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_dynamicLoading.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_dynamicLoading.cpp	2008-03-10 18:38:58 UTC (rev 3866)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_dynamicLoading.cpp	2008-03-10 21:01:13 UTC (rev 3867)
@@ -14,24 +14,25 @@
  *   (at your option) any later version.                                   *
  ***************************************************************************/
 
-#include "config.h"
-
 #include <stdlib.h>
 #include <stdio.h>
-#include "ADM_default.h"
+
 #ifdef __WIN32
 #include <windows.h>
 #else
 #include <dlfcn.h>
 #endif
 
+#include "ADM_default.h"
 #include "ADM_dynamicLoading.h"
+
 // By default the library is silent, being part of ADM_core cannot use the debug_id funcs
 #if 1
 #define aprintf(...) {}
 #else
 #define aprintf printf
 #endif
+
 ADM_LibWrapper::ADM_LibWrapper()
 {
 	initialised = false;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_fileio.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_fileio.cpp	2008-03-10 18:38:58 UTC (rev 3866)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_fileio.cpp	2008-03-10 21:01:13 UTC (rev 3867)
@@ -163,45 +163,48 @@
 ******************************************************/
 char *ADM_getBaseDir(void)
 {
-char *dirname=NULL;
-DIR *dir=NULL;
-char *home;
-//
-        if(baseDirDone) return ADM_basedir;
-// Get the base directory
+	char *dirname=NULL;
+	DIR *dir=NULL;
+	char *home;
+
+	if(baseDirDone) return ADM_basedir;
+
+	// Get the base directory
 #if defined(__WIN32)
-        if( ! (home=getenv("USERPROFILE")) )
-        {
-          GUI_Error_HIG("Oops","can't determine $USERPROFILE.");
-                    home="c:\\";
-        }
-
+	if(!(home = getenv("USERPROFILE")))
+	{
+		printf("Oops: can't determine $USERPROFILE.");
+		home="c:\\";
+	}
 #else
-        if( ! (home=getenv("HOME")) )
-        {
-          GUI_Error_HIG("Oops","can't determine $HOME.");
-                return NULL;
-        }
+	if(!(home = getenv("HOME")))
+	{
+		printf("Oops: can't determine $HOME.");
+		return NULL;
+	}
 #endif
 
- // Try to open the .avidemux directory
-        dirname=new char[strlen(home)+strlen(ADM_DIR_NAME)+2];
-        strcpy(dirname,home);
-        strcat(dirname,ADM_DIR_NAME);
-        if(!ADM_mkdir(dirname))
-        {
-          GUI_Error_HIG("Oops","Cannot create the .avidemux directory", NULL);
-                        delete [] dirname;
-                        return NULL;
-        }
-        delete [] dirname;
+	// Try to open the .avidemux directory
+	dirname = new char[strlen(home) + strlen(ADM_DIR_NAME) + 2];
+	strcpy(dirname, home);
+	strcat(dirname, ADM_DIR_NAME);
 
-        // Now built the filename
-        strncpy(ADM_basedir,home,1023);
-        strncat(ADM_basedir,ADM_DIR_NAME,1023-strlen(ADM_basedir));
-        baseDirDone=1;
-        printf("Using %s as base directory for prefs/jobs/...\n",ADM_basedir);
-        return ADM_basedir;
+	if(!ADM_mkdir(dirname))
+	{
+		printf("Oops: cannot create the .avidemux directory", NULL);
+		delete [] dirname;
+		return NULL;
+	}
+
+	delete [] dirname;
+
+	// Now built the filename
+	strncpy(ADM_basedir,home,1023);
+	strncat(ADM_basedir,ADM_DIR_NAME,1023-strlen(ADM_basedir));
+	baseDirDone=1;
+	printf("Using %s as base directory for prefs/jobs/...\n", ADM_basedir);
+
+	return ADM_basedir;
 }
 /*----------------------------------------
       Create a directory

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_misc.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_misc.cpp	2008-03-10 18:38:58 UTC (rev 3866)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_misc.cpp	2008-03-10 21:01:13 UTC (rev 3867)
@@ -17,7 +17,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include "config.h"
+
 #include <stdio.h>
 #include <stdlib.h>
 #include <time.h>

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/CMakeLists.txt	2008-03-10 18:38:58 UTC (rev 3866)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/CMakeLists.txt	2008-03-10 21:01:13 UTC (rev 3867)
@@ -2,7 +2,14 @@
 	ADM_cpuCap.cpp  ADM_memcpy.cpp  ADM_memsupport.cpp  ADM_threads.cpp  ADM_win32.cpp
 	ADM_memory.cpp  ADM_misc.cpp  TLK_clock.cpp  ADM_crashdump.cpp  ADM_fileio.cpp ADM_dynamicLoading.cpp)
 
-ADD_ADM_LIB_ALL_TARGETS(ADM_core ${ADM_core_SRCS})
-ADD_SOURCE_CFLAGS(ADM_fileio.cpp ${GLIB_CFLAGS})
+ADD_LIBRARY(ADM_core SHARED ${ADM_core_SRCS})
 
-#ADD_TARGET_DEFINITIONS(ADM_core ADM_DEBUG FIND_LEAKS)
\ No newline at end of file
+REMOVE_DEFINITIONS(-DHAVE_CONFIG_H)
+ADD_TARGET_DEFINITIONS(ADM_core ADM_DEBUG FIND_LEAKS)
+
+IF (MINGW)
+	ADD_SOURCE_CFLAGS(ADM_fileio.cpp ${GLIB_CFLAGS})
+
+	ADD_TARGET_LDFLAGS(ADM_core ${GLIB_LDFLAGS})
+	TARGET_LINK_LIBRARIES(ADM_core pthreadGC2 imagehlp wsock32)
+ENDIF (MINGW)
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/TLK_clock.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/TLK_clock.cpp	2008-03-10 18:38:58 UTC (rev 3866)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/TLK_clock.cpp	2008-03-10 21:01:13 UTC (rev 3867)
@@ -33,14 +33,12 @@
 #include <unistd.h>
 #include <sys/time.h>
 
-#include "config.h"
+#include "ADM_default.h"
 
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME MODULE_CLOCKnTIMELEFT
 #include "ADM_osSupport/ADM_debug.h"
 
-#include "avi_vars.h"
-
 static uint8_t inited=0;
 static struct timeval _itimev;
 static uint32_t getAbsTime( void );

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavcodec/avcodec.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavcodec/avcodec.h	2008-03-10 18:38:58 UTC (rev 3866)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavcodec/avcodec.h	2008-03-10 21:01:13 UTC (rev 3867)
@@ -25,8 +25,6 @@
  * @file avcodec.h
  * external API header
  */
-
-#include "config.h" /* MEANX */
 #include "avutil.h"
 #include <sys/types.h> /* size_t */
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/CMakeLists.txt	2008-03-10 18:38:58 UTC (rev 3866)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/CMakeLists.txt	2008-03-10 21:01:13 UTC (rev 3867)
@@ -3,5 +3,4 @@
 
 ADD_ADM_LIB_ALL_TARGETS(ADM_osSupport ${ADM_osSupport_SRCS})
 
-ADD_SOURCE_CFLAGS(ADM_fileio.cpp ${GLIB_CFLAGS})
 ADD_SOURCE_CFLAGS(ADM_quota.cpp -I${LIBXML2_INCLUDE_DIR} ${LIBXML2_DEFINITIONS})
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSRTload.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSRTload.cpp	2008-03-10 18:38:58 UTC (rev 3866)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSRTload.cpp	2008-03-10 21:01:13 UTC (rev 3867)
@@ -30,6 +30,7 @@
 #ifdef USE_FREETYPE
 #include <math.h>
 #include <iconv.h>
+#include <errno.h>
 
 //#define __STDC_ISO_10646__
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt	2008-03-10 18:38:58 UTC (rev 3866)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt	2008-03-10 21:01:13 UTC (rev 3867)
@@ -216,7 +216,6 @@
 # Tails
 #########################################
 SET(ADM_TAILS
-	ADM_core
 	ADM_osSupport
 	ADM_encoder
 	ADM_toolkit
@@ -307,9 +306,15 @@
 		ADM_commonUI_qt4)
 ENDIF (ADM_UI_QT4)
 
-ADD_ADMLIB_ALL_TARGETS(ADM_utilities ADM_core)
+ADD_ADMLIB_ALL_TARGETS(ADM_utilities)
 
 ###########################################
+# ADM_core
+###########################################
+ADD_SUBDIRECTORY(ADM_core)
+ADD_LIB_ALL_TARGETS(ADM_core)
+
+###########################################
 # External libs
 ###########################################
 # libiconv
@@ -488,19 +493,19 @@
 ###########################################
 IF (WIN32)
 	ADD_ADMLIB_ALL_TARGETS(ADM_osSupport)
-	
+
 	IF (MINGW)
-		ADD_LIB_ALL_TARGETS(-mno-cygwin imagehlp wsock32 pthreadGC2)
+		ADD_LIB_ALL_TARGETS(-mno-cygwin)
 	ENDIF (MINGW)
-	
+
 	ADD_LIB_ALL_TARGETS(winmm -Wl,--export-all-symbols)
 
 	ADD_TARGET_LDFLAGS(avidemux2_cli "-Wl,-subsystem,console")
-	
+
 	IF (ADM_UI_GTK)
 		ADD_TARGET_LDFLAGS(avidemux2_gtk "-mwindows")
 	ENDIF (ADM_UI_GTK)
-	
+
 	IF (ADM_UI_QT4)
 		ADD_TARGET_LDFLAGS(avidemux2_qt4 "-mwindows")
 	ENDIF (ADM_UI_QT4)

Modified: branches/avidemux_2.5_branch_gruntster/cmake/admConfigHelper.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admConfigHelper.cmake	2008-03-10 18:38:58 UTC (rev 3866)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admConfigHelper.cmake	2008-03-10 21:01:13 UTC (rev 3867)
@@ -157,15 +157,19 @@
 
 
 MACRO (ADD_TARGET_DEFINITIONS _target)
+	SET(newflag)
 	GET_TARGET_PROPERTY(_flags ${_target} COMPILE_FLAGS)
 
 	FOREACH (_def ${ARGN})
 		IF (${_def})
 			APPEND_FLAGS(_flags "-D${_def}")
+			SET(newflag 1)
 		ENDIF (${_def})
 	ENDFOREACH (_def ${ARGN})
 
-	SET_TARGET_PROPERTIES(${_target} PROPERTIES COMPILE_FLAGS "${_flags}")
+	IF (newflag)
+		SET_TARGET_PROPERTIES(${_target} PROPERTIES COMPILE_FLAGS "${_flags}")
+	ENDIF (newflag)
 ENDMACRO (ADD_TARGET_DEFINITIONS)
 
 



From gruntster at mail.berlios.de  Tue Mar 11 14:58:39 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Tue, 11 Mar 2008 14:58:39 +0100
Subject: [Avidemux-svn-commit] r3868 - in
	branches/avidemux_2.5_branch_gruntster: . avidemux
	avidemux/ADM_audiocodec avidemux/ADM_core/src
	avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3
	avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52
	avidemux/plugins/ADM_audiodecoder/ADM_ad_faad
	avidemux/plugins/ADM_audiodecoder/ADM_ad_mad
	avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/ADM_libMad
	avidemux/plugins/ADM_audiodecoder/ADM_ad_vorbis cmake
Message-ID: <200803111358.m2BDwd5Y029326@sheep.berlios.de>

Author: gruntster
Date: 2008-03-11 14:58:28 +0100 (Tue, 11 Mar 2008)
New Revision: 3868

Added:
   branches/avidemux_2.5_branch_gruntster/cmake/admCheckFaad.cmake
Modified:
   branches/avidemux_2.5_branch_gruntster/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_audiocodec.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_audiocodec.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/bit_allocate.c
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/bitstream.c
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/downmix.c
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/imdct.c
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/ADM_ad_faad.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/ADM_ad_mad.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/ADM_libMad/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_vorbis/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/cmake/ad_plugin.cmake
   branches/avidemux_2.5_branch_gruntster/cmake/admCheckAudioCodecLibs.cmake
   branches/avidemux_2.5_branch_gruntster/cmake/admConfigSummary.cmake
   branches/avidemux_2.5_branch_gruntster/cmake/config.h.cmake
Log:
[AudioDec] change plugins to shared libs

Modified: branches/avidemux_2.5_branch_gruntster/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/CMakeLists.txt	2008-03-10 21:01:13 UTC (rev 3867)
+++ branches/avidemux_2.5_branch_gruntster/CMakeLists.txt	2008-03-11 13:58:28 UTC (rev 3868)
@@ -131,16 +131,13 @@
 MESSAGE("")
 
 ########################################
-# Print Summary
+# Debug Summary
 ########################################
 IF (VERBOSE)
 	INCLUDE(adm_log)
 	MESSAGE("")
 ENDIF (VERBOSE)
 
-INCLUDE(admConfigSummary)
-MESSAGE("")
-
 ########################################
 # Generate config.h
 ########################################
@@ -159,8 +156,16 @@
 CONFIGURE_FILE("${CMAKE_SOURCE_DIR}/cmake/config.h.cmake" "${CMAKE_BINARY_DIR}/config/qt4/config.h")
 MESSAGE(STATUS "Qt4 config.h generated")
 
+MESSAGE("")
+
 ########################################
 # Directories to build
 ########################################
 ADD_SUBDIRECTORY(avidemux)
 ADD_SUBDIRECTORY(po)
+
+########################################
+# Config Summary
+########################################
+INCLUDE(admConfigSummary)
+MESSAGE("")
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_audiocodec.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_audiocodec.cpp	2008-03-10 21:01:13 UTC (rev 3867)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_audiocodec.cpp	2008-03-11 13:58:28 UTC (rev 3868)
@@ -143,12 +143,3 @@
 	}
 	return out;
 }
-
-ADM_Audiocodec::ADM_Audiocodec( uint32_t fourcc ) {
-    UNUSED_ARG(fourcc);
-	_init=0;
-}
-
-ADM_Audiocodec::~ADM_Audiocodec()
-{}
-

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_audiocodec.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_audiocodec.h	2008-03-10 21:01:13 UTC (rev 3867)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_audiocodec.h	2008-03-11 13:58:28 UTC (rev 3868)
@@ -26,8 +26,13 @@
 		uint8_t	_init;
 		WAVHeader *_wavHeader;
 	public:
-		ADM_Audiocodec(uint32_t fourcc);
-		virtual	~ADM_Audiocodec();
+		ADM_Audiocodec(uint32_t fourcc)
+		{
+			UNUSED_ARG(fourcc);
+			_init=0;
+		};
+
+		virtual	~ADM_Audiocodec() {};
 		virtual	void purge(void) {}
 		virtual	uint8_t beginDecompress(void)=0;
 		virtual	uint8_t endDecompress(void)=0;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/CMakeLists.txt	2008-03-10 21:01:13 UTC (rev 3867)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/CMakeLists.txt	2008-03-11 13:58:28 UTC (rev 3868)
@@ -4,24 +4,11 @@
 
 ADD_ADM_LIB_ALL_TARGETS(ADM_audiocodec ${ADM_audiocodec_SRCS})
 
-#IF (USE_AMR_NB)
-	#ADD_SOURCE_CFLAGS(ADM_audiocodec.cpp -I${AMRNB_INCLUDE_DIR})
-#ENDIF (USE_AMR_NB)
+IF (USE_AMR_NB)
+	ADD_SOURCE_CFLAGS(ADM_audiocodec.cpp -I${AMRNB_INCLUDE_DIR})
+ENDIF (USE_AMR_NB)
 
-#IF (USE_FAAD)
-	#ADD_SOURCE_CFLAGS(ADM_codecfaad.cpp -I${FAAD_INCLUDE_DIR})
-#ENDIF (USE_FAAD)
-
-#IF (USE_LIBDCA)
-	#ADD_SOURCE_CFLAGS(ADM_audiocodec.cpp -I${LIBDCA_INCLUDE_DIR})
-	#ADD_SOURCE_CFLAGS(ADM_dca.cpp -I${LIBDCA_INCLUDE_DIR})
-#ENDIF (USE_LIBDCA)
-
-#IF (USE_VORBIS)
-	#ADD_SOURCE_CFLAGS(audiocodec_ogg.cpp -I${VORBIS_INCLUDE_DIR})
-#ENDIF (USE_VORBIS)
-
-#INCLUDE(admLibMad)
-#GET_MAD_CFLAGS(MAD_CFLAGS)
-
-#ADD_SOURCE_CFLAGS(ADM_codecmp3.cpp ${MAD_CFLAGS})
\ No newline at end of file
+IF (USE_LIBDCA)
+	ADD_SOURCE_CFLAGS(ADM_audiocodec.cpp -I${LIBDCA_INCLUDE_DIR})
+	ADD_SOURCE_CFLAGS(ADM_dca.cpp -I${LIBDCA_INCLUDE_DIR})
+ENDIF (USE_LIBDCA)
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/CMakeLists.txt	2008-03-10 21:01:13 UTC (rev 3867)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/CMakeLists.txt	2008-03-11 13:58:28 UTC (rev 3868)
@@ -3,8 +3,6 @@
 	ADM_memory.cpp  ADM_misc.cpp  TLK_clock.cpp  ADM_crashdump.cpp  ADM_fileio.cpp ADM_dynamicLoading.cpp)
 
 ADD_LIBRARY(ADM_core SHARED ${ADM_core_SRCS})
-
-REMOVE_DEFINITIONS(-DHAVE_CONFIG_H)
 ADD_TARGET_DEFINITIONS(ADM_core ADM_DEBUG FIND_LEAKS)
 
 IF (MINGW)
@@ -12,4 +10,6 @@
 
 	ADD_TARGET_LDFLAGS(ADM_core ${GLIB_LDFLAGS})
 	TARGET_LINK_LIBRARIES(ADM_core pthreadGC2 imagehlp wsock32)
-ENDIF (MINGW)
\ No newline at end of file
+ENDIF (MINGW)
+
+REMOVE_DEFINITIONS(-DHAVE_CONFIG_H)
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt	2008-03-10 21:01:13 UTC (rev 3867)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt	2008-03-11 13:58:28 UTC (rev 3868)
@@ -51,12 +51,12 @@
 	ADD_DEFINITIONS(-DADM_DEBUG)
 ENDIF (ADM_DEBUG)
 
-INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR})
-INCLUDE_DIRECTORIES(${CMAKE_BINARY_DIR}/config)
-INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR}/ADM_core/include)
-INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR}/ADM_libraries/ADM_utilities)
-INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR}/ADM_libraries/ADM_lavutil)
-INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR}/ADM_libraries/ADM_lavcodec)
+INCLUDE_DIRECTORIES("${CMAKE_CURRENT_SOURCE_DIR}")
+INCLUDE_DIRECTORIES("${CMAKE_BINARY_DIR}/config")
+INCLUDE_DIRECTORIES("${CMAKE_CURRENT_SOURCE_DIR}/ADM_core/include")
+INCLUDE_DIRECTORIES("${CMAKE_CURRENT_SOURCE_DIR}/ADM_libraries/ADM_utilities")
+INCLUDE_DIRECTORIES("${CMAKE_CURRENT_SOURCE_DIR}/ADM_libraries/ADM_lavutil")
+INCLUDE_DIRECTORIES("${CMAKE_CURRENT_SOURCE_DIR}/ADM_libraries/ADM_lavcodec")
 
 IF (GETTEXT_FOUND)
 	INCLUDE_DIRECTORIES(${GETTEXT_INCLUDE_DIR})
@@ -450,11 +450,6 @@
 	ADD_LIB_ALL_TARGETS("${AFTEN_LIBRARY_DIR}")
 ENDIF (USE_AFTEN)
 
-# FAAD
-IF (USE_FAAD)
-	ADD_LIB_ALL_TARGETS("${FAAD_LIBRARY_DIR}")
-ENDIF (USE_FAAD)
-
 # Secret Rabbit Code
 IF (USE_SRC)
 	ADD_LIB_ALL_TARGETS("${SRC_LIBRARY_DIR}")
@@ -469,11 +464,12 @@
 IF (USE_X264)
 	ADD_LIB_ALL_TARGETS("${X264_LIBRARY_DIR}")
 ENDIF (USE_X264)
+
 ###########################################
 # Plugins
 ###########################################
-
 ADD_SUBDIRECTORY(plugins)
+
 ###########################################
 # UI Specific
 ###########################################
@@ -536,5 +532,3 @@
 ENDIF (ADM_UI_QT4)
 
 INSTALL(TARGETS ${ADM_EXES} RUNTIME DESTINATION bin LIBRARY DESTINATION lib)
-
-# EOF

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/CMakeLists.txt	2008-03-10 21:01:13 UTC (rev 3867)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/CMakeLists.txt	2008-03-11 13:58:28 UTC (rev 3868)
@@ -9,7 +9,6 @@
 	ADD_TARGET_CFLAGS(${ADM_LIB} -fPIC)
 ENDIF (UNIX)
 
-# FIXME
-ADD_TARGET_CFLAGS(${ADM_LIB} "-I${CMAKE_BINARY_DIR}/config/cli")
-ADD_TARGET_CFLAGS(${ADM_LIB} "-I${CMAKE_SOURCE_DIR}/avidemux/ADM_audiocodec")
-ADD_TARGET_CFLAGS(${ADM_LIB} "-I${CMAKE_SOURCE_DIR}/avidemux/ADM_core/include")
\ No newline at end of file
+IF (ADM_BIG_ENDIAN)
+	ADD_TARGET_CFLAGS(${ADM_LIB} -DWORDS_BIGENDIAN)
+ENDIF (ADM_BIG_ENDIAN)
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/bit_allocate.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/bit_allocate.c	2008-03-10 21:01:13 UTC (rev 3867)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/bit_allocate.c	2008-03-11 13:58:28 UTC (rev 3868)
@@ -21,8 +21,6 @@
  * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
  */
 
-#include "config.h"
-
 #include <inttypes.h>
 
 #include "a52.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/bitstream.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/bitstream.c	2008-03-10 21:01:13 UTC (rev 3867)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/bitstream.c	2008-03-11 13:58:28 UTC (rev 3868)
@@ -21,8 +21,6 @@
  * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
  */
 
-#include "config.h"
-
 #include <inttypes.h>
 
 #include "a52.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/downmix.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/downmix.c	2008-03-10 21:01:13 UTC (rev 3867)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/downmix.c	2008-03-11 13:58:28 UTC (rev 3868)
@@ -21,8 +21,6 @@
  * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
  */
 
-#include "config.h"
-
 #include <string.h>
 #include <inttypes.h>
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/imdct.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/imdct.c	2008-03-10 21:01:13 UTC (rev 3867)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/imdct.c	2008-03-11 13:58:28 UTC (rev 3868)
@@ -24,8 +24,6 @@
  * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
  */
 
-#include "config.h"
-
 #include <math.h>
 #include <stdio.h>
 #ifdef LIBA52_DJBFFT

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/CMakeLists.txt	2008-03-10 21:01:13 UTC (rev 3867)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/CMakeLists.txt	2008-03-11 13:58:28 UTC (rev 3868)
@@ -5,6 +5,7 @@
 ADD_LIBRARY(ADM_ad_a52 SHARED ${ADM_ad_a52_SRCS})
 TARGET_LINK_LIBRARIES(ADM_ad_a52 ADM_liba52)
 
-# FIXME
 INCLUDE(ad_plugin)
 ADM_audio_plugin(ADM_ad_a52)
+
+REMOVE_DEFINITIONS(-DHAVE_CONFIG_H)
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/ADM_ad_faad.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/ADM_ad_faad.cpp	2008-03-10 21:01:13 UTC (rev 3867)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/ADM_ad_faad.cpp	2008-03-11 13:58:28 UTC (rev 3868)
@@ -15,12 +15,13 @@
 // Copyright: See COPYING file that comes with this distribution
 //
 //
+#include <faad.h>
+
 #include "ADM_default.h"
 #include "ADM_ad_plugin.h"
 
-#include "faad.h"
+#define FAAD_BUFFER 2048
 
-#define FAAD_BUFFER 2048
 class ADM_faad : public     ADM_Audiocodec
 {
 	protected:
@@ -51,7 +52,7 @@
 ADM_faad::ADM_faad( uint32_t fourcc ,WAVHeader *info,uint32_t l,uint8_t *d) :   ADM_Audiocodec(fourcc)
 {
 faacDecConfigurationPtr conf;
-#ifdef OLD_FAAD_PROTO
+#ifdef FAAD_OLD_PROTOTYPE
 unsigned long int srate;
 #else
 uint32_t srate;
@@ -131,7 +132,7 @@
 void *outbuf;
 faacDecFrameInfo info;
 int max=0;
-#ifdef OLD_FAAD_PROTO
+#ifdef FAAD_OLD_PROTOTYPE
 unsigned long int srate;
 #else
 uint32_t srate;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/CMakeLists.txt	2008-03-10 21:01:13 UTC (rev 3867)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/CMakeLists.txt	2008-03-11 13:58:28 UTC (rev 3868)
@@ -1,8 +1,15 @@
-SET(ADM_ad_faad_SRCS ADM_ad_faad.cpp )
+INCLUDE(admCheckFaad)
+checkFaad()
 
-ADD_LIBRARY(ADM_ad_faad SHARED ${ADM_ad_faad_SRCS})
+IF (HAVE_FAAD)
+	SET(ADM_ad_faad_SRCS ADM_ad_faad.cpp )
 
-# FIXME
-TARGET_LINK_LIBRARIES(ADM_ad_faad  ${FAAD_LIBRARY_DIR})
-INCLUDE(ad_plugin)
-ADM_audio_plugin(ADM_ad_faad)
\ No newline at end of file
+	ADD_LIBRARY(ADM_ad_faad SHARED ${ADM_ad_faad_SRCS})
+	TARGET_LINK_LIBRARIES(ADM_ad_faad ADM_core ${FAAD_LIBRARY_DIR})
+
+	INCLUDE(ad_plugin)
+	ADM_audio_plugin(ADM_ad_faad)
+
+	ADD_TARGET_CFLAGS(ADM_ad_faad "-I${FAAD_INCLUDE_DIR}")
+	ADD_TARGET_DEFINITIONS(ADM_ad_faad FAAD_OLD_PROTOTYPE)
+ENDIF (HAVE_FAAD)
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/ADM_ad_mad.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/ADM_ad_mad.cpp	2008-03-10 21:01:13 UTC (rev 3867)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/ADM_ad_mad.cpp	2008-03-11 13:58:28 UTC (rev 3868)
@@ -16,9 +16,8 @@
  ***************************************************************************/
 #include "ADM_default.h"
 #include "ADM_ad_plugin.h"
-
-#ifdef USE_MP3
 #include "ADM_libMad/mad.h"
+
 #define Stream ((mad_stream *)_stream)
 #define Frame ((mad_frame *)_frame)
 #define Synth ((mad_synth *)_synth)
@@ -163,5 +162,3 @@
 
      return 0;
 }
-
-#endif

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/ADM_libMad/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/ADM_libMad/CMakeLists.txt	2008-03-10 21:01:13 UTC (rev 3867)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/ADM_libMad/CMakeLists.txt	2008-03-11 13:58:28 UTC (rev 3868)
@@ -12,12 +12,10 @@
 
 INCLUDE(admLibMad)
 GET_MAD_CFLAGS(MAD_CFLAGS)
-
 ADD_TARGET_CFLAGS(${ADM_LIB} ${MAD_CFLAGS})
 
 IF (ADM_BIG_ENDIAN)
 	ADD_TARGET_CFLAGS(${ADM_LIB} "-DWORDS_BIGENDIAN")
 ENDIF (ADM_BIG_ENDIAN)
 
-# FIXME
-ADD_TARGET_CFLAGS(${ADM_LIB} "-I${CMAKE_BINARY_DIR}/config/cli")
\ No newline at end of file
+REMOVE_DEFINITIONS(-DHAVE_CONFIG_H)
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/CMakeLists.txt	2008-03-10 21:01:13 UTC (rev 3867)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/CMakeLists.txt	2008-03-11 13:58:28 UTC (rev 3868)
@@ -1,15 +1,15 @@
-ADD_SUBDIRECTORY(ADM_libMad)
-
-SET(ADM_ad_Mad_SRCS ADM_ad_mad.cpp)
-
-ADD_LIBRARY(ADM_ad_Mad SHARED ${ADM_ad_Mad_SRCS})
-TARGET_LINK_LIBRARIES(ADM_ad_Mad ADM_libMad)
-
+ADD_SUBDIRECTORY(ADM_libMad)
+
+SET(ADM_ad_Mad_SRCS ADM_ad_mad.cpp)
+
+ADD_LIBRARY(ADM_ad_Mad SHARED ${ADM_ad_Mad_SRCS})
+TARGET_LINK_LIBRARIES(ADM_ad_Mad ADM_core ADM_libMad)
+
 INCLUDE(admLibMad)
 GET_MAD_CFLAGS(MAD_CFLAGS)
 
-ADD_TARGET_CFLAGS(ADM_ad_Mad ${MAD_CFLAGS})
-
-# FIXME
-INCLUDE(ad_plugin)
-ADM_audio_plugin(ADM_ad_Mad)
+ADD_TARGET_CFLAGS(ADM_ad_Mad ${MAD_CFLAGS})
+REMOVE_DEFINITIONS(-DHAVE_CONFIG_H)
+
+INCLUDE(ad_plugin)
+ADM_audio_plugin(ADM_ad_Mad)
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_vorbis/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_vorbis/CMakeLists.txt	2008-03-10 21:01:13 UTC (rev 3867)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_vorbis/CMakeLists.txt	2008-03-11 13:58:28 UTC (rev 3868)
@@ -1,9 +1,13 @@
-SET(ADM_ad_vorbis_SRCS ADM_ad_vorbis.cpp )
+IF (USE_VORBIS)
+	SET(ADM_ad_vorbis_SRCS ADM_ad_vorbis.cpp)
 
-ADD_LIBRARY(ADM_ad_vorbis SHARED ${ADM_ad_vorbis_SRCS})
+	ADD_LIBRARY(ADM_ad_vorbis SHARED ${ADM_ad_vorbis_SRCS})
 
-# FIXME
-TARGET_LINK_LIBRARIES(ADM_ad_vorbis  ${VORBIS_LIBRARY_DIR})
-TARGET_LINK_LIBRARIES(ADM_ad_vorbis  ${VORBISENC_LIBRARY_DIR})
-INCLUDE(ad_plugin)
-ADM_audio_plugin(ADM_ad_vorbis)
+	TARGET_LINK_LIBRARIES(ADM_ad_vorbis ${VORBIS_LIBRARY_DIR})
+	TARGET_LINK_LIBRARIES(ADM_ad_vorbis ${VORBISENC_LIBRARY_DIR})
+
+	INCLUDE(ad_plugin)
+	ADM_audio_plugin(ADM_ad_vorbis)
+
+	ADD_TARGET_CFLAGS(ADM_ad_vorbis "-I${VORBIS_INCLUDE_DIR}")
+ENDIF (USE_VORBIS)
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/cmake/ad_plugin.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/ad_plugin.cmake	2008-03-10 21:01:13 UTC (rev 3867)
+++ branches/avidemux_2.5_branch_gruntster/cmake/ad_plugin.cmake	2008-03-11 13:58:28 UTC (rev 3868)
@@ -1,6 +1,8 @@
 MACRO(ADM_audio_plugin  _lib)
-        ADD_TARGET_CFLAGS(${_lib} "-I${CMAKE_BINARY_DIR}/config/cli")
-        ADD_TARGET_CFLAGS(${_lib} "-I${CMAKE_SOURCE_DIR}/avidemux/ADM_audiocodec")
-        INSTALL(TARGETS ${_lib} LIBRARY DESTINATION "${CMAKE_INSTALL_PREFIX}/lib/ADM_plugins/audioDecoder/")
+	INCLUDE_DIRECTORIES("${CMAKE_BINARY_DIR}/config")
+	INCLUDE_DIRECTORIES("${CMAKE_SOURCE_DIR}/avidemux/ADM_core/include")
+	INCLUDE_DIRECTORIES("${CMAKE_SOURCE_DIR}/avidemux/ADM_audiocodec")
+
+	INSTALL(TARGETS ${_lib} LIBRARY DESTINATION "${CMAKE_INSTALL_PREFIX}/lib/ADM_plugins/audioDecoder/")
 ENDMACRO(ADM_audio_plugin)
 

Modified: branches/avidemux_2.5_branch_gruntster/cmake/admCheckAudioCodecLibs.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admCheckAudioCodecLibs.cmake	2008-03-10 21:01:13 UTC (rev 3867)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admCheckAudioCodecLibs.cmake	2008-03-11 13:58:28 UTC (rev 3868)
@@ -158,46 +158,6 @@
 MESSAGE("")
 
 ########################################
-# FAAD
-########################################
-OPTION (FAAD "" ON)
-
-MESSAGE(STATUS "Checking for FAAD")
-MESSAGE(STATUS "*****************")
-
-IF (FAAD)
-	FIND_HEADER_AND_LIB(FAAD faad.h faad)
-
-	IF (FAAD_FOUND)
-		ADM_CHECK_FUNCTION_EXISTS(faacDecInit "${FAAD_LIBRARY_DIR}" FAACDEC_FUNCTION_FOUND)
-
-		IF (NOT FAACDEC_FUNCTION_FOUND)
-			ADM_CHECK_FUNCTION_EXISTS(NeAACDecInit "${FAAD_LIBRARY_DIR}" NEAACDEC_FUNCTION_FOUND)
-
-			IF (NOT NEAACDEC_FUNCTION_FOUND)
-				SET(FAAD_FOUND 0)
-			ENDIF (NOT NEAACDEC_FUNCTION_FOUND)
-		ENDIF (NOT FAACDEC_FUNCTION_FOUND)
-	ENDIF (FAAD_FOUND)
-
-	PRINT_LIBRARY_INFO("FAAD" FAAD_FOUND "${FAAD_INCLUDE_DIR}" "${FAAD_LIBRARY_DIR}")
-
-	IF (FAAD_FOUND)
-		SET(USE_FAAD 1)
-
-		CHECK_CFLAGS_REQUIRED(faad_check.cpp "-DOLD_FAAD_PROTO" "${FAAD_INCLUDE_DIR}" "${FAAD_LIBRARY_DIR}" FAAD_CFLAGS_REQUIRED)
-
-		IF (FAAD_CFLAGS_REQUIRED)
-			SET(OLD_FAAD_PROTO 1)
-		ENDIF (FAAD_CFLAGS_REQUIRED)
-	ENDIF (FAAD_FOUND)
-ELSE (FAAD)
-	MESSAGE("${MSG_DISABLE_OPTION}")
-ENDIF (FAAD)
-
-MESSAGE("")
-
-########################################
 # Vorbis
 ########################################
 OPTION(VORBIS "" ON)

Added: branches/avidemux_2.5_branch_gruntster/cmake/admCheckFaad.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admCheckFaad.cmake	2008-03-10 21:01:13 UTC (rev 3867)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admCheckFaad.cmake	2008-03-11 13:58:28 UTC (rev 3868)
@@ -0,0 +1,44 @@
+# Outputs:
+#   FAAD_INCLUDE_DIR
+#   FAAD_LIBRARY_DIR
+#   FAAD_OLD_PROTOTYPE
+#   HAVE_FAAD
+
+MACRO(checkFaad)
+	OPTION (FAAD "" ON)
+
+	MESSAGE(STATUS "Checking for FAAD")
+	MESSAGE(STATUS "*****************")
+
+	IF (FAAD)
+		FIND_HEADER_AND_LIB(FAAD faad.h faad)
+
+		IF (FAAD_FOUND)
+			ADM_CHECK_FUNCTION_EXISTS(faacDecInit "${FAAD_LIBRARY_DIR}" FAACDEC_FUNCTION_FOUND)
+
+			IF (NOT FAACDEC_FUNCTION_FOUND)
+				ADM_CHECK_FUNCTION_EXISTS(NeAACDecInit "${FAAD_LIBRARY_DIR}" NEAACDEC_FUNCTION_FOUND)
+
+				IF (NOT NEAACDEC_FUNCTION_FOUND)
+					SET(FAAD_FOUND 0)
+				ENDIF (NOT NEAACDEC_FUNCTION_FOUND)
+			ENDIF (NOT FAACDEC_FUNCTION_FOUND)
+		ENDIF (FAAD_FOUND)
+
+		PRINT_LIBRARY_INFO("FAAD" FAAD_FOUND "${FAAD_INCLUDE_DIR}" "${FAAD_LIBRARY_DIR}")
+
+		IF (FAAD_FOUND)
+			SET(HAVE_FAAD 1)
+
+			CHECK_CFLAGS_REQUIRED(faad_check.cpp "-DOLD_FAAD_PROTO" "${FAAD_INCLUDE_DIR}" "${FAAD_LIBRARY_DIR}" FAAD_CFLAGS_REQUIRED)
+
+			IF (FAAD_CFLAGS_REQUIRED)
+				SET(FAAD_OLD_PROTOTYPE 1)
+			ENDIF (FAAD_CFLAGS_REQUIRED)
+		ENDIF (FAAD_FOUND)
+	ELSE (FAAD)
+		MESSAGE("${MSG_DISABLE_OPTION}")
+	ENDIF (FAAD)
+
+	MESSAGE("")
+ENDMACRO(checkFaad)
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/cmake/admConfigSummary.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admConfigSummary.cmake	2008-03-10 21:01:13 UTC (rev 3867)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admConfigSummary.cmake	2008-03-11 13:58:28 UTC (rev 3868)
@@ -34,7 +34,7 @@
 ADM_DISPLAY("amrnb     " USE_AMR_NB)
 ADM_DISPLAY("LAME      " HAVE_LIBMP3LAME)
 ADM_DISPLAY("FAAC      " USE_FAAC)
-ADM_DISPLAY("FAAD      " USE_FAAD)
+ADM_DISPLAY("FAAD      " HAVE_FAAD)
 ADM_DISPLAY("libdca    " USE_LIBDCA)
 ADM_DISPLAY("Vorbis    " USE_VORBIS)
 

Modified: branches/avidemux_2.5_branch_gruntster/cmake/config.h.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/config.h.cmake	2008-03-10 21:01:13 UTC (rev 3867)
+++ branches/avidemux_2.5_branch_gruntster/cmake/config.h.cmake	2008-03-11 13:58:28 UTC (rev 3868)
@@ -40,15 +40,9 @@
 /* stricter prototyping */
 #cmakedefine ICONV_NEED_CONST
 
-/* use classing FAAD support */
-#cmakedefine OLD_FAAD_PROTO
-
 /* OSS detected */
 #cmakedefine OSS_SUPPORT
 
-/* use liba52 */
-#cmakedefine USE_AC3
-
 /* use Aften AC3 encoder */
 #cmakedefine USE_AFTEN
 #cmakedefine USE_AFTEN_07	// 0.07
@@ -73,9 +67,6 @@
 /* Use faac audio enccoder */
 #cmakedefine USE_FAAC
 
-/* FAAD2 detected */
-#cmakedefine USE_FAAD
-
 /* FFmpeg */
 #cmakedefine USE_FFMPEG
 
@@ -99,9 +90,6 @@
 /* MJPEG */
 #cmakedefine USE_MJPEG
 
-/* use libmad */
-#cmakedefine USE_MP3
-
 /* libpng is available */
 #cmakedefine USE_PNG
 



From gruntster at mail.berlios.de  Tue Mar 11 19:21:59 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Tue, 11 Mar 2008 19:21:59 +0100
Subject: [Avidemux-svn-commit] r3869 - in
	branches/avidemux_2.5_branch_gruntster: . avidemux
	avidemux/ADM_core/src avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3
	avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52
	avidemux/plugins/ADM_audiodecoder/ADM_ad_faad cmake
Message-ID: <200803111821.m2BILxIQ011891@sheep.berlios.de>

Author: gruntster
Date: 2008-03-11 19:21:46 +0100 (Tue, 11 Mar 2008)
New Revision: 3869

Modified:
   branches/avidemux_2.5_branch_gruntster/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_fileio.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_ad_a52.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/cmake/Ts.cmake
   branches/avidemux_2.5_branch_gruntster/cmake/ad_plugin.cmake
   branches/avidemux_2.5_branch_gruntster/cmake/admCheckMiscLibs.cmake
Log:
[AudioDec] install plugins and core

Modified: branches/avidemux_2.5_branch_gruntster/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/CMakeLists.txt	2008-03-11 13:58:28 UTC (rev 3868)
+++ branches/avidemux_2.5_branch_gruntster/CMakeLists.txt	2008-03-11 18:21:46 UTC (rev 3869)
@@ -49,6 +49,12 @@
 	SET(USE_JOG 1)
 ENDIF (UNIX AND NOT APPLE)
 
+IF (WIN32)
+	SET(BIN_DIR .)
+ELSE (WIN32)
+	SET(BIN_DIR bin)
+ENDIF (WIN32)
+
 ########################################
 # Standard Avidemux defines
 ########################################
@@ -61,11 +67,9 @@
 SET(ADM_UI_GTK 1)
 SET(ADM_UI_QT4 1)
 
-SET(HAVE_AUDIO 1)
-SET(USE_MP3 1)
-SET(USE_AC3 1)
 SET(USE_FFMPEG 1)
 SET(USE_MJPEG 1)
+SET(ADM_INSTALL_DIR "${CMAKE_INSTALL_PREFIX}")
 
 IF (NOT CMAKE_BUILD_TYPE)
 	SET(CMAKE_BUILD_TYPE "Release")

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_fileio.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_fileio.cpp	2008-03-11 13:58:28 UTC (rev 3868)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_fileio.cpp	2008-03-11 18:21:46 UTC (rev 3869)
@@ -1,449 +1,492 @@
-/***************************************************************************
-                    
-    copyright            : (C) 2006 by mean
-    email                : fixounet at free.fr
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <dirent.h>
-#include <errno.h>
-#include <sys/stat.h>
-#include <unistd.h>
-
-#ifdef __MINGW32__
-#include <glib.h>
-#endif
-
-#include "ADM_default.h"
-#include "ADM_toolkit/filesel.h"
-#include "ADM_toolkit/toolkit.hxx"
-
-#if defined(__WIN32)
-  static const char *separator="\\"; 
-#else
-  static const char *separator="/";
-#endif
-
-#undef fread
-#undef fwrite
-#undef fopen
-#undef fclose
-
-size_t ADM_fread (void *ptr, size_t size, size_t n, FILE *sstream)
-{
-  return fread(ptr,size,n,sstream);
-}
-
-size_t ADM_fwrite (void *ptr, size_t size, size_t n, FILE *sstream)
-{
-  return fwrite(ptr,size,n,sstream);
-}
-FILE  *ADM_fopen (const char *file, const char *mode)
-{
-  FILE *f;
-
-#ifdef __MINGW32__
-  gchar *retval = g_locale_from_utf8 (file, -1, NULL, NULL, NULL);
-  f=fopen(retval,mode);
-  g_free (retval);
-  return f;
-#else
-  return fopen(file,mode); 
-#endif
-}
-
-int    ADM_fclose (FILE *file)
-{
-  return fclose(file); 
-}
-//*****************************
-static char ADM_basedir[1024]={0};
-static char *ADM_jobdir=NULL;
-static char *ADM_customdir=NULL;
-static int baseDirDone=0;
-
-
-#ifdef __WIN32
-const char *ADM_DIR_NAME="\\avidemux";
-#else
-const char *ADM_DIR_NAME="/.avidemux";
-#endif
-/*
-
-*/
-/*
-      Get the  directory where jobs are stored
-******************************************************/
-
-char *ADM_getCustomDir(void)
-{
-  if(ADM_customdir) return ADM_customdir;
-  ADM_customdir=ADM_getHomeRelativePath("custom");
-  
-  if(!ADM_mkdir(ADM_customdir))
-  {
-	  printf("can't create custom directory (%s).\n",ADM_customdir);
-      return NULL;
-  }
-  return ADM_customdir;
-}
-/*
-      Get the  directory where jobs are stored
-******************************************************/
-
-char *ADM_getJobDir(void)
-{
-	  if(ADM_jobdir) return ADM_jobdir;
-	  ADM_jobdir=ADM_getHomeRelativePath("jobs");
-	  
-	  if(!ADM_mkdir(ADM_jobdir))
-	  {
-		  printf("can't create custom directory (%s).\n",ADM_jobdir);
-	      return NULL;
-	  }
-	  return ADM_jobdir;
-}
-/**
- * 	\fn ADM_getRelativePath
- */
-static char *ADM_getRelativePath(const char *base0,const char *base1, const char *base2,const char *base3)
-{
-	char *result;
-	int length=strlen(base1);
-	if(base2) length+=strlen(base2);
-	if(base3) length+=strlen(base3);
-
-	
-	
-	length+=strlen(base0);
-	length+=5; // Slashes + end 0
-	result=(char *)new char [length];
-	strcpy(result,base0);
-	strcat(result,separator);
-		
-	strcat(result,base1);
-	strcat(result,separator);
-	if(base2)
-	{
-		strcat(result,base2);
-		strcat(result,separator);
-		if(base3)
-		{
-			strcat(result,base3);
-			strcat(result,separator);
-		}
-	}
-	return result;
-}
-/**
- * 	\fn char *ADM_getHomeRelativePath(const char *base1, const char *base2=NULL,const char *base3=NULL);
- *  \brief Returns home directory +base 1 + base 2... The return value is a copy, and must be deleted []
- */
-char *ADM_getHomeRelativePath(const char *base1, const char *base2,const char *base3)
-{
-	return ADM_getRelativePath(ADM_getBaseDir(),base1,base2,base3);
-}
-char *ADM_getInstallRelativePath(const char *base1, const char *base2,const char *base3)
-{
-	return ADM_getRelativePath(ADM_INSTALL_DIR,base1,base2,base3);
-}
-/*
-      Get the root directory for .avidemux stuff
-******************************************************/
-char *ADM_getBaseDir(void)
-{
-	char *dirname=NULL;
-	DIR *dir=NULL;
-	char *home;
-
-	if(baseDirDone) return ADM_basedir;
-
-	// Get the base directory
-#if defined(__WIN32)
-	if(!(home = getenv("USERPROFILE")))
-	{
-		printf("Oops: can't determine $USERPROFILE.");
-		home="c:\\";
-	}
-#else
-	if(!(home = getenv("HOME")))
-	{
-		printf("Oops: can't determine $HOME.");
-		return NULL;
-	}
-#endif
-
-	// Try to open the .avidemux directory
-	dirname = new char[strlen(home) + strlen(ADM_DIR_NAME) + 2];
-	strcpy(dirname, home);
-	strcat(dirname, ADM_DIR_NAME);
-
-	if(!ADM_mkdir(dirname))
-	{
-		printf("Oops: cannot create the .avidemux directory", NULL);
-		delete [] dirname;
-		return NULL;
-	}
-
-	delete [] dirname;
-
-	// Now built the filename
-	strncpy(ADM_basedir,home,1023);
-	strncat(ADM_basedir,ADM_DIR_NAME,1023-strlen(ADM_basedir));
-	baseDirDone=1;
-	printf("Using %s as base directory for prefs/jobs/...\n", ADM_basedir);
-
-	return ADM_basedir;
-}
-/*----------------------------------------
-      Create a directory
-      If it already exists, do nothing
-------------------------------------------*/
-uint8_t ADM_mkdir(const char *dirname)
-{
-DIR *dir=NULL;
-              // Check it already exists ?
-              dir=opendir(dirname);
-              if(dir)
-              { 
-                  printf("Directory %s exists.Good.\n",dirname);
-                  closedir(dir);
-                  return 1;
-              }
-#ifdef __MINGW32__
-                if(mkdir(dirname))
-                {
-                    printf("Oops: mkdir failed on %s\n",dirname);   
-                    return 0;
-                }
-                
-#else    
-                char *sys=new char[strlen(dirname)+strlen("mkdir ")+2];
-                strcpy(sys,"mkdir ");
-                strcat(sys,dirname);
-                printf("Creating dir :%s\n",sys);
-                system(sys);
-                delete [] sys;
-#endif		
-              if((dir=opendir(dirname))==NULL)
-                {
-                        return 0;
-                }
-              closedir(dir); 
-              return 1;
-}
-/**
- *  \fn buildDirectoryContent
- * 	\brief Returns the content of a dir with the extension ext. The receiving array must be allocated by caller
- * (just the array, not the names themselves)
- */
-uint8_t buildDirectoryContent(uint32_t *outnb,const char *base, char *jobName[],int maxElems,const char *ext)
-{
-
-DIR *dir;
-struct dirent *direntry;
-int dirmax=0,len;
-int extlen=strlen(ext);
-    ADM_assert(extlen);
-    
-         dir=opendir(base);
-        if(!dir)
-        {
-                return 0;
-        }
-        while((direntry=readdir(dir)))
-        {
-                len=strlen(direntry->d_name);
-                if(len<(extlen+1)) continue;
-                int xbase=len-extlen;
-                if(memcmp(direntry->d_name+xbase,ext,extlen))
-                //if(direntry->d_name[len-1]!='s' || direntry->d_name[len-2]!='j' || direntry->d_name[len-3]!='.')
-                {
-                        printf("ignored:%s\n",direntry->d_name);
-                        continue;
-                }
-                jobName[dirmax]=(char *)ADM_alloc(strlen(base)+strlen(direntry->d_name)+2);
-                strcpy(jobName[dirmax],base);
-                strcat(jobName[dirmax],"/");
-                strcat(jobName[dirmax],direntry->d_name);
-                dirmax++;
-                if(dirmax>=maxElems)
-                {
-                        printf("[jobs]: Max # of jobs exceeded\n");
-                         break;
-                }
-        }
-        closedir(dir);
-        *outnb=dirmax;
-        return 1;
-}
-//------------------------------------------------------------------
-
-/*
-
-** note: it modifies it's first argument
-*/
-void simplify_path(char **buf){
-   unsigned int last1slash = 0;
-   unsigned int last2slash = 0;
-	while( !strncmp(*buf,"/../",4) )
-		memmove(*buf,*buf+3,strlen(*buf+3)+1);
-	for(unsigned int i=0;i<strlen(*buf)-2;i++)
-		while( !strncmp(*buf+i,"/./",3) )
-			memmove(*buf+i,*buf+i+2,strlen(*buf+i+2)+1);
-	for(unsigned int i=0;i<strlen(*buf)-3;i++){
-		if( *(*buf+i) == '/' ){
-			last2slash = last1slash;
-			last1slash = i;
-		}
-		if( !strncmp(*buf+i,"/../",4) ){
-			memmove(*buf+last2slash,*buf+i+3,strlen(*buf+i+3)+1);
-			return simplify_path(buf);
-		}
-	}
-}
-
-/**
-        \fn ADM_PathCanonize
-        \brief Canonize the path, returns a copy of the absolute path given as parameter
-*/
-char *ADM_PathCanonize(const char *tmpname)
-{
-	char path[300];
-	char *out ;
-
-	if( ! getcwd(path,300) ){
-		fprintf(stderr,"\ngetcwd() failed with: %s (%u)\n",
-		               strerror(errno), errno );
-		path[0] = '\0';
-	}
-	if(!tmpname || tmpname[0]==0)
-	{
-		out=new char [strlen(path)+2];
-		strcpy(out,path);
-#ifndef __WIN32		
-		strcat(out,"/");
-#else
-		strcat(out,"\\");
-#endif	
-		printf("\n Canonizing null string ??? (%s)\n",out);
-	}else if(tmpname[0]=='/'
-#if defined(__WIN32)
-		|| tmpname[1]==':'
-#endif	
-	
-	)
-	{
-		out=new char[strlen(tmpname)+1];
-		strcpy(out,tmpname);
-		return out;
-	}else{
-		out=new char[strlen(path)+strlen(tmpname)+6];
-		strcpy(out,path);
-#ifndef __WIN32		
-		strcat(out,"/");
-#else
-		strcat(out,"\\");
-#endif		
-		strcat(out,tmpname);
-	}
-	simplify_path(&out);
-	return out;
-}
-
-/**
-        \fn ADM_PathStripName
-	\brief Returns path only /foo/bar.avi -> /foo INPLACE, no copy done
-
-*/
-void		ADM_PathStripName(char *str)
-{
-		int len=strlen(str);
-		if(len<=1) return;
-		len--;
-#ifndef __WIN32		
-		while( *(str+len)!='/' && len)
-#else
-	while( *(str+len)!='\\' && len)
-#endif		
-		{
-			 *(str+len)=0;
-			 len--;
-		}
-}
-
-/**
-    \fn ADM_GetFileName
-    \brief Get the filename without path. /foo/bar.avi -> bar.avi INPLACE, NO COPY
-
-*/
-const char *ADM_GetFileName(const char *str)
-{
-	char *filename;
-        char *filename2;
-#ifndef __WIN32		
-	filename = strrchr(str, '/');
-        
-#else
-	filename = strrchr(str, '\\');
-        filename2 = strrchr(str, '/');
-        if(filename2 && filename)
-        {
-          if(filename2>filename) filename=filename2; 
-        }
-#endif
-	if (filename)
-		return filename+1;
-	else
-		return str;
-}
-
-/**
-    \fn ADM_PathSplit
-    \brief Split path into absolute path+name and extention i.e. /foo/bar/zee.avi -> /foo/bar/zee,avi.             Copy are returned
-
-*/
-void ADM_PathSplit(char *str, char **root, char **ext)
-{
-	char *full;
-	uint32_t l;
-
-		full=ADM_PathCanonize(str);
-		// Search the last .
-		l=strlen(full);
-		l--;
-		ADM_assert(l>0);
-		while( *(full+l)!='.' && l) l--;
-		if(!l || l==(strlen(full)-1))
-		{
-			if(l==(strlen(full)-1))
-			{
-				*(full+l)=0;  // remove trailing .
-			}
-			*ext=new char[2];
-			*root=full;
-			strcpy(*ext,"");
-			return ;
-		}
-		// else we do get an extension
-		// starting at l+1
-		uint32_t suff;
-
-		suff=strlen(full)-l-1;
-		*ext=new char[suff+1];
-		strcpy(*ext,full+l+1);
-		*(full+l)=0;
-		*root=full;
-		return ;
-}
+/***************************************************************************
+                    
+    copyright            : (C) 2006 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#include <stdio.h>
+#include <stdlib.h>
+#include <string.h>
+#include <dirent.h>
+#include <errno.h>
+#include <sys/stat.h>
+#include <unistd.h>
+
+#ifdef __MINGW32__
+#include <glib.h>
+#endif
+
+#include "ADM_default.h"
+#include "ADM_toolkit/filesel.h"
+#include "ADM_toolkit/toolkit.hxx"
+
+#ifdef __WIN32
+static const char *separator="\\";
+const char *ADM_DIR_NAME="\\avidemux";
+#else
+static const char *separator="/";
+const char *ADM_DIR_NAME="/.avidemux";
+#endif
+
+static char ADM_basedir[1024] = {0};
+static char *ADM_jobdir = NULL;
+static char *ADM_customdir = NULL;
+static int baseDirDone = 0;
+
+#undef fread
+#undef fwrite
+#undef fopen
+#undef fclose
+
+size_t ADM_fread(void *ptr, size_t size, size_t n, FILE *sstream)
+{
+	return fread(ptr,size,n,sstream);
+}
+
+size_t ADM_fwrite(void *ptr, size_t size, size_t n, FILE *sstream)
+{
+	return fwrite(ptr,size,n,sstream);
+}
+
+FILE *ADM_fopen(const char *file, const char *mode)
+{
+	FILE *f;
+
+#ifdef __MINGW32__
+	gchar *retval = g_locale_from_utf8 (file, -1, NULL, NULL, NULL);
+	f=fopen(retval,mode);
+	g_free (retval);
+	return f;
+#else
+	return fopen(file,mode); 
+#endif
+}
+
+int ADM_fclose(FILE *file)
+{
+	return fclose(file); 
+}
+
+/*
+      Get the  directory where jobs are stored
+******************************************************/
+char *ADM_getCustomDir(void)
+{
+	if (ADM_customdir)
+		return ADM_customdir;
+
+	ADM_customdir = ADM_getHomeRelativePath("custom");
+
+	if (!ADM_mkdir(ADM_customdir))
+	{
+		printf("can't create custom directory (%s).\n", ADM_customdir);
+		return NULL;
+	}
+
+	return ADM_customdir;
+}
+
+/*
+      Get the  directory where jobs are stored
+******************************************************/
+char *ADM_getJobDir(void)
+{
+	if (ADM_jobdir)
+		return ADM_jobdir;
+
+	ADM_jobdir = ADM_getHomeRelativePath("jobs");
+
+	if (!ADM_mkdir(ADM_jobdir))
+	{
+		printf("can't create custom directory (%s).\n", ADM_jobdir);
+		return NULL;
+	}
+
+	return ADM_jobdir;
+}
+
+/**
+ * 	\fn ADM_getRelativePath
+ */
+static char *ADM_getRelativePath(const char *base0,const char *base1, const char *base2,const char *base3)
+{
+	char *result;
+	int length = strlen(base1);
+
+	if (base2)
+		length += strlen(base2);
+
+	if (base3)
+		length += strlen(base3);
+
+	length += strlen(base0);
+	length += 5; // Slashes + end 0
+	result = (char *)new char [length];
+	strcpy(result, base0);
+	strcat(result, separator);
+
+	strcat(result, base1);
+	strcat(result, separator);
+
+	if (base2)
+	{
+		strcat(result, base2);
+		strcat(result, separator);
+
+		if (base3)
+		{
+			strcat(result, base3);
+			strcat(result, separator);
+		}
+	}
+
+	return result;
+}
+
+/**
+ * 	\fn char *ADM_getHomeRelativePath(const char *base1, const char *base2=NULL,const char *base3=NULL);
+ *  \brief Returns home directory +base 1 + base 2... The return value is a copy, and must be deleted []
+ */
+char *ADM_getHomeRelativePath(const char *base1, const char *base2,const char *base3)
+{
+	return ADM_getRelativePath(ADM_getBaseDir(), base1, base2, base3);
+}
+
+char *ADM_getInstallRelativePath(const char *base1, const char *base2,const char *base3)
+{
+	return ADM_getRelativePath(ADM_INSTALL_DIR, base1, base2, base3);
+}
+
+/*
+      Get the root directory for .avidemux stuff
+******************************************************/
+char *ADM_getBaseDir(void)
+{
+	char *dirname = NULL;
+	DIR *dir = NULL;
+	char *home;
+
+	if (baseDirDone)
+		return ADM_basedir;
+
+	// Get the base directory
+#if defined(__WIN32)
+	if (!(home = getenv("USERPROFILE")))
+	{
+		printf("Oops: can't determine $USERPROFILE.");
+		home = NULL;
+	}
+#else
+	if (!(home = getenv("HOME")))
+	{
+		printf("Oops: can't determine $HOME.");
+		return NULL;
+	}
+#endif
+
+	// Try to open the .avidemux directory
+	dirname = new char[strlen(home) + strlen(ADM_DIR_NAME) + 2];
+	strcpy(dirname, home);
+	strcat(dirname, ADM_DIR_NAME);
+
+	if (!ADM_mkdir(dirname))
+	{
+		printf("Oops: cannot create the .avidemux directory", NULL);
+		delete [] dirname;
+		return NULL;
+	}
+
+	delete [] dirname;
+
+	// Now built the filename
+	strncpy(ADM_basedir,home, 1023);
+	strncat(ADM_basedir, ADM_DIR_NAME, 1023 - strlen(ADM_basedir));
+	baseDirDone = 1;
+	printf("Using %s as base directory for prefs/jobs/...\n", ADM_basedir);
+
+	return ADM_basedir;
+}
+
+/*----------------------------------------
+      Create a directory
+      If it already exists, do nothing
+------------------------------------------*/
+uint8_t ADM_mkdir(const char *dirname)
+{
+	DIR *dir = NULL;
+
+	// Check it already exists ?
+	dir = opendir(dirname);
+
+	if (dir)
+	{ 
+		printf("Directory %s exists.Good.\n", dirname);
+		closedir(dir);
+		return 1;
+	}
+
+#ifdef __MINGW32__
+	if (mkdir(dirname))
+	{
+		printf("Oops: mkdir failed on %s\n", dirname);   
+		return 0;
+	}
+#else
+	char *sys = new char[strlen(dirname) + strlen("mkdir ") + 2];
+
+	strcpy(sys, "mkdir ");
+	strcat(sys, dirname);
+	printf("Creating dir :%s\n", sys);
+	system(sys);
+
+	delete [] sys;
+#endif
+	if ((dir = opendir(dirname)) == NULL)
+		return 0;
+
+	closedir(dir);
+
+	return 1;
+}
+/**
+ *  \fn buildDirectoryContent
+ * 	\brief Returns the content of a dir with the extension ext. The receiving array must be allocated by caller
+ * (just the array, not the names themselves)
+ */
+uint8_t buildDirectoryContent(uint32_t *outnb, const char *base, char *jobName[], int maxElems, const char *ext)
+{
+	DIR *dir;
+	struct dirent *direntry;
+	int dirmax = 0, len;
+	int extlen = strlen(ext);
+
+	ADM_assert(extlen);
+
+	dir = opendir(base);
+	if (!dir)
+		return 0;
+
+	while((direntry = readdir(dir)))
+	{
+		len = strlen(direntry->d_name);
+
+		if (len < (extlen + 1))
+			continue;
+
+		int xbase = len - extlen;
+
+		if (memcmp(direntry->d_name + xbase, ext, extlen))
+			//if (direntry->d_name[len-1]!='s' || direntry->d_name[len-2]!='j' || direntry->d_name[len-3]!='.')
+		{
+			printf("ignored:%s\n", direntry->d_name);
+			continue;
+		}
+
+		jobName[dirmax] = (char *)ADM_alloc(strlen(base) + strlen(direntry->d_name) + 2);
+		strcpy(jobName[dirmax], base);
+		strcat(jobName[dirmax], "/");
+		strcat(jobName[dirmax], direntry->d_name);
+		dirmax++;
+
+		if (dirmax >= maxElems)
+		{
+			printf("[jobs]: Max # of jobs exceeded\n");
+			break;
+		}
+	}
+
+	closedir(dir);
+	*outnb = dirmax;
+
+	return 1;
+}
+//------------------------------------------------------------------
+
+/*
+
+** note: it modifies it's first argument
+*/
+void simplify_path(char **buf)
+{
+	unsigned int last1slash = 0;
+	unsigned int last2slash = 0;
+
+	while (!strncmp(*buf, "/../", 4))
+		memmove(*buf, *buf + 3, strlen(*buf + 3) + 1);
+
+	for (unsigned int i = 0; i < strlen(*buf) - 2; i++)
+		while (!strncmp(*buf + i, "/./", 3))
+			memmove(*buf + i, *buf + i + 2, strlen(*buf + i + 2) + 1);
+
+	for (unsigned int i = 0; i < strlen(*buf) - 3; i++)
+	{
+		if (*(*buf + i) == '/')
+		{
+			last2slash = last1slash;
+			last1slash = i;
+		}
+
+		if (!strncmp(*buf + i, "/../", 4))
+		{
+			memmove(*buf + last2slash, *buf + i + 3, strlen(*buf + i + 3) + 1);
+
+			return simplify_path(buf);
+		}
+	}
+}
+
+/**
+        \fn ADM_PathCanonize
+        \brief Canonize the path, returns a copy of the absolute path given as parameter
+*/
+char *ADM_PathCanonize(const char *tmpname)
+{
+	char path[300];
+	char *out;
+
+	if (!getcwd(path, 300))
+	{
+		fprintf(stderr, "\ngetcwd() failed with: %s (%u)\n", strerror(errno), errno);
+		path[0] = '\0';
+	}
+
+	if (!tmpname || tmpname[0] == 0)
+	{
+		out = new char[strlen(path) + 2];
+		strcpy(out, path);
+#ifndef __WIN32
+		strcat(out, "/");
+#else
+		strcat(out, "\\");
+#endif
+		printf("\n Canonizing null string ??? (%s)\n", out);
+	}
+	else if (tmpname[0] == '/'
+#if defined(__WIN32)
+		|| tmpname[1] == ':'
+#endif
+		)
+	{
+		out = new char[strlen(tmpname) + 1];
+		strcpy(out, tmpname);
+
+		return out;
+	}
+	else
+	{
+		out = new char[strlen(path) + strlen(tmpname) + 6];
+		strcpy(out, path);
+#ifndef __WIN32
+		strcat(out, "/");
+#else
+		strcat(out, "\\");
+#endif
+		strcat(out, tmpname);
+	}
+
+	simplify_path(&out);
+
+	return out;
+}
+
+/**
+        \fn ADM_PathStripName
+	\brief Returns path only /foo/bar.avi -> /foo INPLACE, no copy done
+
+*/
+void ADM_PathStripName(char *str)
+{
+	int len = strlen(str);
+
+	if (len <= 1)
+		return;
+
+	len--;
+
+#ifndef __WIN32
+	while (*(str + len) != '/' && len)
+#else
+	while (*(str + len) != '\\' && len)
+#endif
+	{
+		*(str + len) = 0;
+		len--;
+	}
+}
+
+/**
+    \fn ADM_GetFileName
+    \brief Get the filename without path. /foo/bar.avi -> bar.avi INPLACE, NO COPY
+
+*/
+const char *ADM_GetFileName(const char *str)
+{
+	char *filename;
+	char *filename2;
+
+#ifndef __WIN32
+	filename = strrchr(str, '/');
+#else
+	filename = strrchr(str, '\\');
+	filename2 = strrchr(str, '/');
+
+	if (filename2 && filename)
+		if (filename2 > filename)
+			filename = filename2;
+#endif
+
+	if (filename)
+		return filename + 1;
+	else
+		return str;
+}
+
+/**
+    \fn ADM_PathSplit
+    \brief Split path into absolute path+name and extention i.e. /foo/bar/zee.avi -> /foo/bar/zee,avi.             Copy are returned
+
+*/
+void ADM_PathSplit(char *str, char **root, char **ext)
+{
+	char *full;
+	uint32_t l;
+
+	full = ADM_PathCanonize(str);
+	// Search the last
+	l = strlen(full);
+	l--;
+	ADM_assert(l > 0);
+
+	while (*(full + l) != '.' && l)
+		l--;
+
+	if (!l || l == (strlen(full) - 1))
+	{
+		if (l == (strlen(full) - 1))
+			*(full + l) = 0;  // remove trailing
+
+		*ext = new char[2];
+		*root = full;
+		strcpy(*ext, "");
+
+		return;
+	}
+	// else we do get an extension
+	// starting at l+1
+	uint32_t suff;
+
+	suff = strlen(full) - l - 1;
+	*ext = new char[suff + 1];
+	strcpy(*ext, full + l + 1);
+	*(full + l) = 0;
+	*root = full;
+}

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/CMakeLists.txt	2008-03-11 13:58:28 UTC (rev 3868)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/CMakeLists.txt	2008-03-11 18:21:46 UTC (rev 3869)
@@ -12,4 +12,6 @@
 	TARGET_LINK_LIBRARIES(ADM_core pthreadGC2 imagehlp wsock32)
 ENDIF (MINGW)
 
-REMOVE_DEFINITIONS(-DHAVE_CONFIG_H)
\ No newline at end of file
+REMOVE_DEFINITIONS(-DHAVE_CONFIG_H)
+
+INSTALL(TARGETS ADM_core RUNTIME DESTINATION ${BIN_DIR} LIBRARY DESTINATION lib)
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt	2008-03-11 13:58:28 UTC (rev 3868)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt	2008-03-11 18:21:46 UTC (rev 3869)
@@ -531,4 +531,4 @@
 	SET(ADM_EXES ${ADM_EXES} avidemux2_qt4)
 ENDIF (ADM_UI_QT4)
 
-INSTALL(TARGETS ${ADM_EXES} RUNTIME DESTINATION bin LIBRARY DESTINATION lib)
+INSTALL(TARGETS ${ADM_EXES} RUNTIME DESTINATION ${BIN_DIR} LIBRARY DESTINATION lib)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_ad_a52.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_ad_a52.cpp	2008-03-11 13:58:28 UTC (rev 3868)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_ad_a52.cpp	2008-03-11 18:21:46 UTC (rev 3869)
@@ -17,7 +17,6 @@
 #include "ADM_default.h"
 #include "ADM_ad_plugin.h"
 
-#ifdef USE_AC3
 extern "C" {
 #include "ADM_liba52/a52.h"
 #include "ADM_liba52/mm_accel.h"
@@ -216,5 +215,3 @@
     return 1; 
 
 }
-
-#endif

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/CMakeLists.txt	2008-03-11 13:58:28 UTC (rev 3868)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/CMakeLists.txt	2008-03-11 18:21:46 UTC (rev 3869)
@@ -4,6 +4,7 @@
 	bit_allocate.c  bitstream.c  downmix.c  imdct.c  parse.c)
 
 ADD_LIBRARY(${ADM_LIB} STATIC ${${ADM_LIB}_SRCS})
+TARGET_LINK_LIBRARIES(${ADM_LIB} ADM_core)
 
 IF (UNIX)
 	ADD_TARGET_CFLAGS(${ADM_LIB} -fPIC)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/CMakeLists.txt	2008-03-11 13:58:28 UTC (rev 3868)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/CMakeLists.txt	2008-03-11 18:21:46 UTC (rev 3869)
@@ -3,7 +3,7 @@
 SET(ADM_ad_a52_SRCS ADM_ad_a52.cpp)
 
 ADD_LIBRARY(ADM_ad_a52 SHARED ${ADM_ad_a52_SRCS})
-TARGET_LINK_LIBRARIES(ADM_ad_a52 ADM_liba52)
+TARGET_LINK_LIBRARIES(ADM_ad_a52 ADM_core ADM_liba52)
 
 INCLUDE(ad_plugin)
 ADM_audio_plugin(ADM_ad_a52)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/CMakeLists.txt	2008-03-11 13:58:28 UTC (rev 3868)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/CMakeLists.txt	2008-03-11 18:21:46 UTC (rev 3869)
@@ -2,7 +2,7 @@
 checkFaad()
 
 IF (HAVE_FAAD)
-	SET(ADM_ad_faad_SRCS ADM_ad_faad.cpp )
+	SET(ADM_ad_faad_SRCS ADM_ad_faad.cpp)
 
 	ADD_LIBRARY(ADM_ad_faad SHARED ${ADM_ad_faad_SRCS})
 	TARGET_LINK_LIBRARIES(ADM_ad_faad ADM_core ${FAAD_LIBRARY_DIR})

Modified: branches/avidemux_2.5_branch_gruntster/cmake/Ts.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/Ts.cmake	2008-03-11 13:58:28 UTC (rev 3868)
+++ branches/avidemux_2.5_branch_gruntster/cmake/Ts.cmake	2008-03-11 18:21:46 UTC (rev 3869)
@@ -64,7 +64,7 @@
                 
             SET(qm_files ${qm_files} ${_outXml} ${_out})
 
-			INSTALL(FILES ${_out} DESTINATION "${CMAKE_INSTALL_PREFIX}/bin/i18n")
+			INSTALL(FILES ${_out} DESTINATION "${CMAKE_INSTALL_PREFIX}/${BIN_DIR}/i18n")
         ENDFOREACH(ts_input ${ts_files})
 
         SET(${_sources} ${${_sources}} ${qm_files})
@@ -95,7 +95,7 @@
                 
             SET(qm_files ${qm_files} ${_out})
 
-			INSTALL(FILES ${_out} DESTINATION "${CMAKE_INSTALL_PREFIX}/bin/i18n")
+			INSTALL(FILES ${_out} DESTINATION "${CMAKE_INSTALL_PREFIX}/${BIN_DIR}/i18n")
         ENDFOREACH(ts_input ${ts_files})
 
         SET(${_sources} ${${_sources}} ${qm_files})

Modified: branches/avidemux_2.5_branch_gruntster/cmake/ad_plugin.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/ad_plugin.cmake	2008-03-11 13:58:28 UTC (rev 3868)
+++ branches/avidemux_2.5_branch_gruntster/cmake/ad_plugin.cmake	2008-03-11 18:21:46 UTC (rev 3869)
@@ -3,6 +3,5 @@
 	INCLUDE_DIRECTORIES("${CMAKE_SOURCE_DIR}/avidemux/ADM_core/include")
 	INCLUDE_DIRECTORIES("${CMAKE_SOURCE_DIR}/avidemux/ADM_audiocodec")
 
-	INSTALL(TARGETS ${_lib} LIBRARY DESTINATION "${CMAKE_INSTALL_PREFIX}/lib/ADM_plugins/audioDecoder/")
+	INSTALL(TARGETS ${_lib} DESTINATION "${CMAKE_INSTALL_PREFIX}/lib/ADM_plugins/audioDecoder/")
 ENDMACRO(ADM_audio_plugin)
-

Modified: branches/avidemux_2.5_branch_gruntster/cmake/admCheckMiscLibs.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admCheckMiscLibs.cmake	2008-03-11 13:58:28 UTC (rev 3868)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admCheckMiscLibs.cmake	2008-03-11 18:21:46 UTC (rev 3869)
@@ -89,7 +89,6 @@
 ENDIF (GETTEXT)
 
 SET(ADM_LOCALE "${CMAKE_INSTALL_PREFIX}/share/locale")
-SET(ADM_INSTALL_DIR "${CMAKE_INSTALL_PREFIX}")
 
 MESSAGE("")
 



From gruntster at mail.berlios.de  Tue Mar 11 19:52:55 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Tue, 11 Mar 2008 19:52:55 +0100
Subject: [Avidemux-svn-commit] r3870 - in
	branches/avidemux_2.5_branch_gruntster/avidemux:
	ADM_audiocodec ADM_core/src
Message-ID: <200803111852.m2BIqt3G030599@sheep.berlios.de>

Author: gruntster
Date: 2008-03-11 19:52:53 +0100 (Tue, 11 Mar 2008)
New Revision: 3870

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_pluginLoad.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_fileio.cpp
Log:
[AudioDec] load plugins on Win32

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_pluginLoad.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_pluginLoad.cpp	2008-03-11 18:21:46 UTC (rev 3869)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_pluginLoad.cpp	2008-03-11 18:52:53 UTC (rev 3870)
@@ -94,24 +94,33 @@
 uint8_t ADM_ad_loadPlugins(const char *path)
 {
 #define MAX_EXTERNAL_FILTER 50
-	  char *files[MAX_EXTERNAL_FILTER];
-	  uint32_t nbFile;
-	  
-	  
-	  memset(files,0,sizeof(char *)*MAX_EXTERNAL_FILTER);
-	  printf("[ADM_ad_plugin] Scanning directory %s\n",path);
-	  if(!buildDirectoryContent(&nbFile,path,
-			  files,MAX_EXTERNAL_FILTER,"so"))
-	  {
-		  printf("[AudioPlugin] Cannot Parse plugin");
-		  return 0;
-	  }
-	  for(int i=0;i<nbFile;i++)
-	   {
-	     tryLoadingAudioPlugin(files[i]);
-	   }
-	   printf("[ADM_ad_plugin] Scanning done,found %d codec \n",ADM_audioPlugins.size());
-	   return 1;
+
+#ifdef __WIN32
+#define SHARED_LIB_EXT "dll"
+#elif defined(__APPLE__)
+#define SHARED_LIB_EXT "dylib"
+#else
+#define SHARED_LIB_EXT "so"
+#endif
+
+	char *files[MAX_EXTERNAL_FILTER];
+	uint32_t nbFile;
+
+	memset(files,0,sizeof(char *)*MAX_EXTERNAL_FILTER);
+	printf("[ADM_ad_plugin] Scanning directory %s\n",path);
+
+	if(!buildDirectoryContent(&nbFile, path, files, MAX_EXTERNAL_FILTER, SHARED_LIB_EXT))
+	{
+		printf("[ADM_ad_plugin] Cannot parse plugin");
+		return 0;
+	}
+
+	for(int i=0;i<nbFile;i++)
+		tryLoadingAudioPlugin(files[i]);
+
+	printf("[ADM_ad_plugin] Scanning done, found %d codec\n", ADM_audioPlugins.size());
+
+	return 1;
 }
 /**
  * 	\fn ADM_ad_searchCodec

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_fileio.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_fileio.cpp	2008-03-11 18:21:46 UTC (rev 3869)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_fileio.cpp	2008-03-11 18:52:53 UTC (rev 3870)
@@ -21,6 +21,10 @@
 #include <sys/stat.h>
 #include <unistd.h>
 
+#ifdef __WIN32
+#include <windows.h>
+#endif
+
 #ifdef __MINGW32__
 #include <glib.h>
 #endif
@@ -163,7 +167,20 @@
 
 char *ADM_getInstallRelativePath(const char *base1, const char *base2,const char *base3)
 {
+#ifdef __WIN32
+	char moduleName[256];
+
+	GetModuleFileName(0, moduleName, sizeof(moduleName) / sizeof(char));
+
+	char *slash = strrchr(moduleName, '\\');
+		
+	if (slash)
+		*slash = '\0';
+
+	return ADM_getRelativePath(moduleName, base1, base2, base3);
+#else
 	return ADM_getRelativePath(ADM_INSTALL_DIR, base1, base2, base3);
+#endif
 }
 
 /*
@@ -287,7 +304,7 @@
 		if (memcmp(direntry->d_name + xbase, ext, extlen))
 			//if (direntry->d_name[len-1]!='s' || direntry->d_name[len-2]!='j' || direntry->d_name[len-3]!='.')
 		{
-			printf("ignored:%s\n", direntry->d_name);
+			printf("ignored: %s\n", direntry->d_name);
 			continue;
 		}
 



From gruntster at mail.berlios.de  Tue Mar 11 20:55:56 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Tue, 11 Mar 2008 20:55:56 +0100
Subject: [Avidemux-svn-commit] r3871 - in
	branches/avidemux_2.5_branch_gruntster/avidemux: .
	ADM_audiocodec ADM_core/src ADM_libraries/ADM_utilities
Message-ID: <200803111955.m2BJtu9K007573@sheep.berlios.de>

Author: gruntster
Date: 2008-03-11 20:55:52 +0100 (Tue, 11 Mar 2008)
New Revision: 3871

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_pluginLoad.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_fileio.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_gettext.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/main.cpp
Log:
[AudioDec] load plugins on Mac

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_pluginLoad.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_pluginLoad.cpp	2008-03-11 18:52:53 UTC (rev 3870)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_pluginLoad.cpp	2008-03-11 19:55:52 UTC (rev 3871)
@@ -111,7 +111,7 @@
 
 	if(!buildDirectoryContent(&nbFile, path, files, MAX_EXTERNAL_FILTER, SHARED_LIB_EXT))
 	{
-		printf("[ADM_ad_plugin] Cannot parse plugin");
+		printf("[ADM_ad_plugin] Cannot parse plugin\n");
 		return 0;
 	}
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_fileio.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_fileio.cpp	2008-03-11 18:52:53 UTC (rev 3870)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_fileio.cpp	2008-03-11 19:55:52 UTC (rev 3871)
@@ -23,6 +23,8 @@
 
 #ifdef __WIN32
 #include <windows.h>
+#elif defined(__APPLE__)
+#include <Carbon/Carbon.h>
 #endif
 
 #ifdef __MINGW32__
@@ -168,7 +170,7 @@
 char *ADM_getInstallRelativePath(const char *base1, const char *base2,const char *base3)
 {
 #ifdef __WIN32
-	char moduleName[256];
+	char moduleName[MAX_PATH];
 
 	GetModuleFileName(0, moduleName, sizeof(moduleName) / sizeof(char));
 
@@ -178,6 +180,26 @@
 		*slash = '\0';
 
 	return ADM_getRelativePath(moduleName, base1, base2, base3);
+#elif defined(__APPLE__)
+#define MAX_PATH_SIZE 1024
+
+	char buffer[MAX_PATH_SIZE];
+
+	CFURLRef url(CFBundleCopyExecutableURL(CFBundleGetMainBundle()));
+	buffer[0] = '\0';
+
+	if (url)
+	{
+		CFURLGetFileSystemRepresentation(url, true, (UInt8*)buffer, MAX_PATH_SIZE);
+		CFRelease(url);
+
+		char *slash = strrchr(buffer, '/');
+		
+		if (slash)
+			*slash = '\0';
+	}
+
+	return ADM_getRelativePath(buffer, base1, base2, base3);
 #else
 	return ADM_getRelativePath(ADM_INSTALL_DIR, base1, base2, base3);
 #endif

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/CMakeLists.txt	2008-03-11 18:52:53 UTC (rev 3870)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/CMakeLists.txt	2008-03-11 19:55:52 UTC (rev 3871)
@@ -10,6 +10,8 @@
 
 	ADD_TARGET_LDFLAGS(ADM_core ${GLIB_LDFLAGS})
 	TARGET_LINK_LIBRARIES(ADM_core pthreadGC2 imagehlp wsock32)
+ELSEIF (APPLE)
+	ADD_TARGET_LDFLAGS(ADM_core "-framework Carbon")
 ENDIF (MINGW)
 
 REMOVE_DEFINITIONS(-DHAVE_CONFIG_H)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_gettext.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_gettext.cpp	2008-03-11 18:52:53 UTC (rev 3870)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_gettext.cpp	2008-03-11 19:55:52 UTC (rev 3871)
@@ -1,14 +1,11 @@
 #include "config.h"
+#include "ADM_default.h"
 
 #ifdef HAVE_GETTEXT
 #include <stdio.h>
 #include <libintl.h>
 #include <locale.h>
 
-#ifdef __APPLE__
-#include <Carbon/Carbon.h>
-#endif
-
 void initGetText(void)
 {
 	char *local = setlocale(LC_ALL, "");
@@ -16,31 +13,16 @@
 #ifdef __WIN32
 	bindtextdomain("avidemux", "./share/locale");
 #elif defined(__APPLE__)
-#define MAX_PATH_SIZE 1024
-	char buffer[MAX_PATH_SIZE];
+	char *localeDir = ADM_getInstallRelativePath("..", "Resources", "locale");
 
-	CFURLRef url(CFBundleCopyExecutableURL(CFBundleGetMainBundle()));
-	buffer[0] = '\0';
-
-	if (url)
-	{
-		CFURLGetFileSystemRepresentation(url, true, (UInt8*)buffer, MAX_PATH_SIZE);
-		CFRelease(url);
-
-		char *slash = strrchr(buffer, '/');
-		
-		if (slash)
-			slash[1] = '\0';
-	}
-
-	strcat(buffer, "../Resources/locale");
-	bindtextdomain("avidemux", buffer);
+	bindtextdomain("avidemux", localeDir);
+	delete [] localeDir;
 #else
 	bindtextdomain("avidemux", ADMLOCALE);
 #endif
 
 	bind_textdomain_codeset("avidemux", "UTF-8");
-  
+
 	if(local)
 		printf("\n[Locale] setlocale %s\n", local);
 
@@ -48,7 +30,7 @@
 	textdomain("avidemux");
 
 	if(local)
-	    printf("[Locale] Textdomain was %s\n", local);
+		printf("[Locale] Textdomain was %s\n", local);
 
 	local = textdomain(NULL);
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/main.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/main.cpp	2008-03-11 18:52:53 UTC (rev 3870)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/main.cpp	2008-03-11 19:55:52 UTC (rev 3871)
@@ -238,9 +238,15 @@
 	ADM_dealloc(dynloadPath);
 	//***************Plugins *********************
 	// Load system wide audio decoder plugin
-	char *adPlugins=ADM_getInstallRelativePath("lib","ADM_plugins","audioDecoder");
+#ifdef __APPLE__
+	char *adPlugins = ADM_getInstallRelativePath("lib","ADM_plugins","audioDecoder");
+#else
+	char *adPlugins = ADM_getInstallRelativePath("../Resources/lib","ADM_plugins","audioDecoder");
+#endif
+
 	ADM_ad_loadPlugins(adPlugins);
 	delete [] adPlugins;
+
 	// load local audio decoder plugins
 	adPlugins=ADM_getHomeRelativePath("plugins","audioDecoder");
 	ADM_ad_loadPlugins(adPlugins);



From gruntster at mail.berlios.de  Wed Mar 12 12:37:55 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Wed, 12 Mar 2008 12:37:55 +0100
Subject: [Avidemux-svn-commit] r3872 - branches/avidemux_2.4_branch/po
Message-ID: <200803121137.m2CBbtsg024308@sheep.berlios.de>

Author: gruntster
Date: 2008-03-12 12:37:45 +0100 (Wed, 12 Mar 2008)
New Revision: 3872

Modified:
   branches/avidemux_2.4_branch/po/avidemux_it.ts
   branches/avidemux_2.4_branch/po/el.po
   branches/avidemux_2.4_branch/po/it.po
Log:
[I18N] Greek update by nikos and Italian update by zoppo

Modified: branches/avidemux_2.4_branch/po/avidemux_it.ts
===================================================================
--- branches/avidemux_2.4_branch/po/avidemux_it.ts	2008-03-11 19:55:52 UTC (rev 3871)
+++ branches/avidemux_2.4_branch/po/avidemux_it.ts	2008-03-12 11:37:45 UTC (rev 3872)
@@ -1,89 +1,13 @@
 <?xml version="1.0" encoding="utf-8"?>
 <!DOCTYPE TS><TS version="1.1" language="it">
-<defaultcodec></defaultcodec>
 <context>
     <name></name>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="58"/>
-        <source>1  - Extremely Low (Fastest)</source>
-        <translation>1  - Estremamente bassa (pi? veloce)</translation>
-    </message>
-    <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="59"/>
-        <source>2  - Very Low</source>
-        <translation>2  - Molto bassa</translation>
-    </message>
-    <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="60"/>
-        <source>3  - Low</source>
-        <translation>3  - Bassa</translation>
-    </message>
-    <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="61"/>
-        <source>4  - Medium</source>
-        <translation>4  - Media</translation>
-    </message>
-    <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="62"/>
-        <source>5  - High (Default)</source>
-        <translation>5  - Alta (predefinito)</translation>
-    </message>
-    <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="63"/>
-        <source>6  - Very High</source>
-        <translation>6  - Molto alta</translation>
-    </message>
-    <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="64"/>
-        <source>6B - Very High (RDO on Bframes)</source>
-        <translation>6B - Molto alta (RDO sui fotogrammi-B)</translation>
-    </message>
-    <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="65"/>
-        <source>7 - Ultra High</source>
-        <translation>7  - Ultra</translation>
-    </message>
-    <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="66"/>
-        <source>7B - Ultra High (RDO on Bframes)</source>
-        <translation>7B - Ultra (RDO sui fotogrammi-B)</translation>
-    </message>
-    <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="69"/>
-        <source>Partition Decision</source>
-        <translation>Decisione partizione</translation>
-    </message>
-    <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="72"/>
-        <source>Diamond search</source>
-        <translation>Ricerca romboidale</translation>
-    </message>
-    <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="73"/>
-        <source>Hexagonal search</source>
-        <translation>Ricerca esagonale</translation>
-    </message>
-    <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="74"/>
-        <source>Uneven multi hexagon</source>
-        <translation>Multi esagono irregolare</translation>
-    </message>
-    <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="75"/>
-        <source>Exhaustive search</source>
-        <translation>Ricerca esaustiva</translation>
-    </message>
-    <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_xvid4.cpp" line="72"/>
         <source>VHQ Mode</source>
         <translation>Modalit? VHQ</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="78"/>
-        <source>Max Ref Frames</source>
-        <translation>Numero massimo di fotogrammi di riferimento</translation>
-    </message>
-    <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_xvid4.cpp" line="76"/>
         <source>Max B Frames</source>
         <translation>Numero massimo di fotogrammi B</translation>
@@ -94,36 +18,11 @@
         <translation>Croma ME</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="81"/>
-        <source>Mixed Refs</source>
-        <translation>Riferimenti misti</translation>
-    </message>
-    <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="82"/>
-        <source>Fast P Skip</source>
-        <translation>P Skip veloce</translation>
-    </message>
-    <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="83"/>
-        <source>DCT Decimate</source>
-        <translation>DCT Decimate</translation>
-    </message>
-    <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="84"/>
-        <source>Interlaced</source>
-        <translation>Interlacciato</translation>
-    </message>
-    <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp" line="108"/>
         <source>Motion Estimation</source>
         <translation>Stima movimento</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="103"/>
-        <source>Disabled</source>
-        <translation>Disattivo</translation>
-    </message>
-    <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_xvid4.cpp" line="59"/>
         <source>Low</source>
         <translation>Bassa</translation>
@@ -134,86 +33,6 @@
         <translation>Alta</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="107"/>
-        <source>Trellis</source>
-        <translation>Trellis</translation>
-    </message>
-    <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="108"/>
-        <source>CABAC</source>
-        <translation>CABAC</translation>
-    </message>
-    <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="109"/>
-        <source>Noise Reduction</source>
-        <translation>Riduzione interferenza</translation>
-    </message>
-    <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="110"/>
-        <source>Deblocking Filter</source>
-        <translation>Filtro deblocking</translation>
-    </message>
-    <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="111"/>
-        <source>Strength</source>
-        <translation>Intensit?</translation>
-    </message>
-    <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="112"/>
-        <source>Threshold</source>
-        <translation>Soglia</translation>
-    </message>
-    <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="126"/>
-        <source>Misc</source>
-        <translation>Varie</translation>
-    </message>
-    <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="129"/>
-        <source>8x8 Transform</source>
-        <translation>Trasforma 8x8</translation>
-    </message>
-    <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="130"/>
-        <source>8x8P Transform</source>
-        <translation>Trasforma 8x8P</translation>
-    </message>
-    <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="131"/>
-        <source>8x8B Transform</source>
-        <translation>Trasforma 8x8B</translation>
-    </message>
-    <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="132"/>
-        <source>_4x4 Transform</source>
-        <translation>Trasforma _4x4</translation>
-    </message>
-    <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="133"/>
-        <source>_8x8I Transform</source>
-        <translation>Trasforma _8x8I</translation>
-    </message>
-    <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="134"/>
-        <source>_4x4I Transform</source>
-        <translation>Trasforma _4x4I</translation>
-    </message>
-    <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="148"/>
-        <source>Transform</source>
-        <translation>Trasforma</translation>
-    </message>
-    <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="144"/>
-        <source>B Frames</source>
-        <translation>Fotogrammi B</translation>
-    </message>
-    <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="152"/>
-        <source>X264 Configuration</source>
-        <translation>Configurazione X264</translation>
-    </message>
-    <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp" line="51"/>
         <source>None</source>
         <translation>Nessuna</translation>
@@ -2061,37 +1880,37 @@
         <translation>menu</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp" line="61"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="58"/>
         <source>1  - Extremely Low (Fastest)</source>
         <translation>1  - Estremamente bassa (pi? veloce)</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp" line="62"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="59"/>
         <source>2  - Very Low</source>
         <translation>2  - Molto bassa</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp" line="63"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="60"/>
         <source>3  - Low</source>
         <translation>3  - Bassa</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp" line="64"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="61"/>
         <source>4  - Medium</source>
         <translation>4  - Media</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp" line="65"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="62"/>
         <source>5  - High (Default)</source>
         <translation>5  - Alta (predefinito)</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp" line="66"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="63"/>
         <source>6  - Very High</source>
         <translation>6  - Molto alta</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp" line="67"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="64"/>
         <source>6B - Very High (RDO on Bframes)</source>
         <translation>6B - Molto alta (RDO sui fotogrammi-B)</translation>
     </message>
@@ -2101,12 +1920,12 @@
         <translation>7  - Ultra</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp" line="69"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="66"/>
         <source>7B - Ultra High (RDO on Bframes)</source>
         <translation>7B - Ultra (RDO sui fotogrammi-B)</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp" line="72"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="69"/>
         <source>Partition Decision</source>
         <translation>Decisione partizione</translation>
     </message>
@@ -2131,52 +1950,52 @@
         <translation>Ricerca esaustiva</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp" line="80"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="81"/>
         <source>VHQ Mode</source>
         <translation>Modalit? VHQ</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp" line="81"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="89"/>
         <source>Max Ref Frames</source>
         <translation>Numero massimo di fotogrammi di riferimento</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp" line="146"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="154"/>
         <source>Max B Frames</source>
         <translation>Numero massimo di fotogrammi B</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp" line="83"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="91"/>
         <source>Chroma ME</source>
         <translation>Croma ME</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp" line="84"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="92"/>
         <source>Mixed Refs</source>
         <translation>Riferimenti misti</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp" line="85"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="93"/>
         <source>Fast P Skip</source>
         <translation>P Skip veloce</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp" line="86"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="94"/>
         <source>DCT Decimate</source>
         <translation>DCT Decimate</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp" line="87"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="95"/>
         <source>Interlaced</source>
         <translation>Interlacciato</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp" line="89"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="97"/>
         <source>Motion Estimation</source>
         <translation>Stima movimento</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp" line="106"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="114"/>
         <source>Disabled</source>
         <translation>Disattivo</translation>
     </message>
@@ -2191,77 +2010,77 @@
         <translation>Alta</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp" line="110"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="118"/>
         <source>Trellis</source>
         <translation>Trellis</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp" line="111"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="119"/>
         <source>CABAC</source>
         <translation>CABAC</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp" line="112"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="120"/>
         <source>Noise Reduction</source>
         <translation>Riduzione interferenza</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp" line="113"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="121"/>
         <source>Deblocking Filter</source>
         <translation>Filtro deblocking</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp" line="114"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="122"/>
         <source>Strength</source>
         <translation>Intensit?</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp" line="115"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="123"/>
         <source>Threshold</source>
         <translation>Soglia</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp" line="120"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="137"/>
         <source>Misc</source>
         <translation>Varie</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp" line="132"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="140"/>
         <source>8x8 Transform</source>
         <translation>Trasforma 8x8</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp" line="133"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="141"/>
         <source>8x8P Transform</source>
         <translation>Trasforma 8x8P</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp" line="134"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="142"/>
         <source>8x8B Transform</source>
         <translation>Trasforma 8x8B</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp" line="135"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="143"/>
         <source>_4x4 Transform</source>
         <translation>Trasforma _4x4</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp" line="136"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="144"/>
         <source>_8x8I Transform</source>
         <translation>Trasforma _8x8I</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp" line="137"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="145"/>
         <source>_4x4I Transform</source>
         <translation>Trasforma _4x4I</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp" line="151"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="159"/>
         <source>Transform</source>
         <translation>Trasforma</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp" line="147"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="155"/>
         <source>B Frames</source>
         <translation>Fotogrammi B</translation>
     </message>
@@ -3528,12 +3347,12 @@
         <translation>Seleziona un file</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp" line="54"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="51"/>
         <source>Main</source>
         <translation>Generale</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp" line="101"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="109"/>
         <source>Motion</source>
         <translation>Movimento</translation>
     </message>
@@ -4362,6 +4181,41 @@
         <source>Put botj fields side by side.</source>
         <translation type="unfinished"></translation>
     </message>
+    <message>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="65"/>
+        <source>7  - Ultra High</source>
+        <translation>7  - Ultra</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="72"/>
+        <source>Diamond Search</source>
+        <translation>Ricerca romboidale</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="73"/>
+        <source>Hexagonal Search</source>
+        <translation>Ricerca esagonale</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="74"/>
+        <source>Uneven Multi-hexagon</source>
+        <translation>Multi-esagono irregolare</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="75"/>
+        <source>Exhaustive Search</source>
+        <translation>Ricerca esaustiva</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="77"/>
+        <source>Hadamard Exhaustive Search</source>
+        <translation>Ricerca esaustiva Hadamard</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="163"/>
+        <source>x264 Configuration</source>
+        <translation>Configurazione x264</translation>
+    </message>
 </context>
 <context>
     <name>ADMImage</name>
@@ -5047,175 +4901,180 @@
 <context>
     <name>ADMVideoSwissArmyKnife</name>
     <message>
-        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="258"/>
+        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="261"/>
         <source>P&apos; = A</source>
         <translation>P&apos; = A</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="259"/>
+        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="262"/>
         <source>P&apos; = P</source>
         <translation>P&apos; = P</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="260"/>
+        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="263"/>
         <source>P&apos; = P - A</source>
         <translation>P&apos; = P - A</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="261"/>
+        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="264"/>
         <source>P&apos; = A - P</source>
         <translation>P&apos; = A - P</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="262"/>
+        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="265"/>
         <source>P&apos; = P + A</source>
         <translation>P&apos; = P + A</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="263"/>
+        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="266"/>
         <source>P&apos; = P * A</source>
         <translation>P&apos; = P * A</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="264"/>
+        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="267"/>
         <source>P&apos; = P / A</source>
         <translation>P&apos; = P / A</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="265"/>
+        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="268"/>
         <source>P&apos; = A / P</source>
         <translation>P&apos; = A / P</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="266"/>
+        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="269"/>
         <source>P&apos; = min (P, A)</source>
         <translation>P&apos; = min (P, A)</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="267"/>
+        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="270"/>
         <source>P&apos; = max (P, A)</source>
         <translation>P&apos; = max (P, A)</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="272"/>
+        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="275"/>
         <source>A = convolve(P); Load convolution kernel from file</source>
         <translation>A = avvolgi(P); carica nucleo di avvolgimento da file</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="274"/>
+        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="277"/>
         <source>A = pixel from image file as float; Load image from file</source>
         <translation>A = pixel dal file immagine come float; carica immagine da file</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="276"/>
+        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="279"/>
         <source>A = pixel from image file as integer; Load image from file</source>
         <translation>A = pixel dal file immagine come integer; carica immagine da file</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="278"/>
+        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="281"/>
         <source>A = floating point constant value</source>
         <translation>A = valore costante virgola mobile</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="280"/>
+        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="283"/>
         <source>A = rolling average of pixel: A = A*(1-alpha)+(P*alpha)</source>
         <translation>A = media mobile di pixel: A = A*(1-alpha)+(P*alpha)</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="285"/>
+        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="288"/>
         <source>Select _Operation on each pixel P and input A:</source>
         <translation>_Seleziona opeazione per ogni pixel P e input A:</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="290"/>
+        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="293"/>
         <source>Input _Type:</source>
         <translation>_Tipo in ingresso:</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="321"/>
+        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="324"/>
         <source>Input _File (image or convolution kernel):</source>
         <translation>_File di ingresso (immagine o nucleo di avvolgimento):</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="325"/>
+        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="328"/>
         <source>_Load Bias (added to each pixel
 in file image when loaded):</source>
         <translation>_Carica Bias (aggiunto a ogni pixel
 nell&apos;immagine al caricamento):</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="330"/>
+        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="333"/>
         <source>Load _Multiplier (each pixel in
 file image mult. by this when loaded):</source>
         <translation>Carica _Moltiplicatore (ogni pixel nell&apos;immagine
 moltiplicato per questo valore al caricamento):</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="335"/>
+        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="338"/>
         <source>Input _Constant:</source>
         <translation>Costant_e in ingresso:</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="340"/>
-        <source>Memory constant _alpha
-(where A = (1-alpha)*A + alpha*curr_frame):</source>
-        <translation>Costante di memoria _alpha
-(dove A = (1-alpha)*A + alpha*fotogrammacorrente):</translation>
-    </message>
-    <message>
-        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="344"/>
+        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="351"/>
         <source>Init _Start Frame (first frame # to use for head start):</source>
         <translation>Ini_zializza fotogramma iniziale (primo numero
 di fotogramma da usare per la partenza facilitata):</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="348"/>
+        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="355"/>
         <source>Init _End Frame (last frame # to use for head start):</source>
         <translation>Inizia_lizza fotogramma finale (ultimo numero
 di fotogramma da usare per la partenza facilitata):</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="353"/>
+        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="360"/>
         <source>Init By _Rolling (compute head start using a rolling average rather than a straight average)</source>
         <translation>Inizializza con media mobile (elabora partenza facilitata usando una media mobile invece di una media diretta)</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="357"/>
+        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="364"/>
         <source>_Bias (will be added to result):</source>
         <translation>_Bias (sar? aggiunto al risultato):</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="360"/>
+        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="367"/>
         <source>_Result Bias (added to each result pixel):</source>
         <translation>Bias _risultato (aggiunto a ogni pixel risultato):</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="365"/>
+        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="372"/>
         <source>Result _Multiplier (each result pixel
 multiplied by this):</source>
         <translation>_Moltiplicatore risultato (ogni pixel risultato
 moltiplicato per questo valore):</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="369"/>
+        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="376"/>
         <source>_Histogram every N frames (0 to disable):</source>
         <translation>_Istogramma ogni N fotogrammi (0 per disattivare):</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="371"/>
+        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="378"/>
         <source>_Debugging settings (bits):</source>
         <translation>Impostazioni di _debug (bit):</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="321"/>
+        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="324"/>
         <source>Select file</source>
         <translation>Seleziona un file</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="380"/>
+        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="388"/>
         <source>Swiss Army Knife Configuration</source>
         <translation>Configurazione Swiss Army Knife</translation>
     </message>
+    <message>
+        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="343"/>
+        <source>Memory constant _alpha
+(where A = (1-alpha)*A + alpha*(curr_frame + lookahead)):</source>
+        <translation>Costante di memoria _alpha
+(dove A = (1-alpha)*A + alpha*(fotogrammacorrente + N fotogrammi)):</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="347"/>
+        <source>Look ahead _N frames:</source>
+        <translation>_N fotogrammi successivi:</translation>
+    </message>
 </context>
 <context>
     <name>ADMVideoThreshold</name>
@@ -5475,14 +5334,14 @@
         <translation>Dovresti usare Strumenti -&gt; Ricostruisci fotogrammi. Vuoi farlo ora?</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_editor/ADM_edit.cpp" line="1510"/>
+        <location filename="../avidemux/ADM_editor/ADM_edit.cpp" line="1517"/>
         <source>This looks like mpeg
  Do you want to index it?</source>
         <translation>Questo sembra un file mpeg
  Vuoi indicizzarlo?</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_editor/ADM_edit.cpp" line="1562"/>
+        <location filename="../avidemux/ADM_editor/ADM_edit.cpp" line="1569"/>
         <source>Indexing failed</source>
         <translation>Indicizzazione fallita</translation>
     </message>

Modified: branches/avidemux_2.4_branch/po/el.po
===================================================================
--- branches/avidemux_2.4_branch/po/el.po	2008-03-11 19:55:52 UTC (rev 3871)
+++ branches/avidemux_2.4_branch/po/el.po	2008-03-12 11:37:45 UTC (rev 3872)
@@ -5,10 +5,10 @@
 #
 msgid ""
 msgstr ""
-"Project-Id-Version: Avidemux 003\n"
+"Project-Id-Version: Avidemux el 004\n"
 "Report-Msgid-Bugs-To: \n"
 "POT-Creation-Date: 2003-12-29 15:55+0100\n"
-"PO-Revision-Date: 2007-10-28 23:54+0200\n"
+"PO-Revision-Date: 2008-03-10 20:36+0200\n"
 "Last-Translator: nikos papadopoulos <231036448 at freemail.gr>\n"
 "Language-Team: GREEK <231036448 at freemail.gr>\n"
 "MIME-Version: 1.0\n"
@@ -74,7 +74,7 @@
 #: avidemux/ADM_audio/audiotimeline.cpp:85
 #: avidemux/ADM_audio/audiotimeline.cpp:96
 msgid "Building VBR map"
-msgstr ""
+msgstr "??????? ????? VBR"
 
 #: avidemux/ADM_audiocodec/ADM_codecwma.cpp:88
 #: avidemux/ADM_audiocodec/ADM_codecwma.cpp:200
@@ -99,15 +99,14 @@
 
 #: avidemux/ADM_audiofilter/audioencoder_lame.cpp:220
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:104
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:296
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:295
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:103
 msgid "Stereo"
 msgstr "??????"
 
 #: avidemux/ADM_audiofilter/audioencoder_lame.cpp:221
-#, fuzzy
 msgid "Joint stereo"
-msgstr "Joint stereo"
+msgstr "??????? ??????"
 
 #: avidemux/ADM_audiofilter/audioencoder_lame.cpp:222
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:103
@@ -150,7 +149,7 @@
 
 #: avidemux/ADM_audiofilter/audioencoder_lame.cpp:252
 msgid "_Disable reservoir:"
-msgstr ""
+msgstr "_?????????????? ?????????:"
 
 #: avidemux/ADM_audiofilter/audioencoder_lame.cpp:256
 msgid "LAME Configuration"
@@ -178,11 +177,11 @@
 
 #: avidemux/ADM_audiofilter/audiofilter_buildchain.cpp:322
 #: avidemux/gui_autodrive.cpp:62
-#: avidemux/gui_autodrive.cpp:71
-#: avidemux/gui_autodrive.cpp:112
-#: avidemux/gui_autodrive.cpp:127
-#: avidemux/gui_autodrive.cpp:154
-#: avidemux/gui_autodrive.cpp:188
+#: avidemux/gui_autodrive.cpp:74
+#: avidemux/gui_autodrive.cpp:120
+#: avidemux/gui_autodrive.cpp:135
+#: avidemux/gui_autodrive.cpp:162
+#: avidemux/gui_autodrive.cpp:196
 msgid "Codec Error"
 msgstr "?????? ??????"
 
@@ -206,12 +205,6 @@
 msgid "Internal error with context for  codec"
 msgstr "????????? ?????? ?? ?? ??????????? ??? ??????"
 
-#: avidemux/ADM_codecs/ADM_ffmpeg.cpp:51
-msgid ""
-".\n"
-" Did you use too low / too high target for 2 pass ?"
-msgstr ""
-
 #: avidemux/ADM_editor/ADM_edFrameType.cpp:58
 msgid "No video loaded"
 msgstr "??? ????????? ??????"
@@ -222,12 +215,11 @@
 
 #: avidemux/ADM_editor/ADM_edFrameType.cpp:63
 msgid "DivX 5 + packed?"
-msgstr ""
+msgstr "DivX 5 +??????????????;"
 
 #: avidemux/ADM_editor/ADM_edFrameType.cpp:93
-#, fuzzy
 msgid "Rebuilding Frames"
-msgstr "??????? ???????"
+msgstr "???????????? ??? ????"
 
 #: avidemux/ADM_editor/ADM_edFrameType.cpp:129
 msgid "Aborted"
@@ -286,7 +278,7 @@
 
 #: avidemux/ADM_editor/ADM_edit.cpp:733
 msgid "Could not unpack the video"
-msgstr ""
+msgstr "??????? ?? ?????????????? ??? ??????"
 
 #: avidemux/ADM_editor/ADM_edit.cpp:733
 msgid "Using backup decoder - not frame accurate."
@@ -309,21 +301,22 @@
 msgstr ""
 
 #: avidemux/ADM_editor/ADM_edit.cpp:755
-#, fuzzy
 msgid "Index is not up to date"
-msgstr "???????? ??????????? %1 : %2"
+msgstr "?? ????????? ??? ????? ???????????"
 
 #: avidemux/ADM_editor/ADM_edit.cpp:755
 msgid "You should use Tool->Rebuild frame. Do it now ?"
 msgstr ""
 
-#: avidemux/ADM_editor/ADM_edit.cpp:1510
+#: avidemux/ADM_editor/ADM_edit.cpp:1517
 msgid ""
 "This looks like mpeg\n"
 " Do you want to index it?"
 msgstr ""
+"???? ???????? ?? ????? mpeg\n"
+" ?? ???????????? ?????????;"
 
-#: avidemux/ADM_editor/ADM_edit.cpp:1562
+#: avidemux/ADM_editor/ADM_edit.cpp:1569
 msgid "Indexing failed"
 msgstr "? ?????????? ?????????? ???????"
 
@@ -371,285 +364,292 @@
 msgid "At the moment, the DV codec only accepts 720*576 at 25"
 msgstr "??? ??? ???, ? ??????? DV, ?????????? ???? 720*576 at 25"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:54
+#: avidemux/ADM_filter/filter_declaration.cpp:55
 msgid "Crop"
 msgstr "????????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:54
+#: avidemux/ADM_filter/filter_declaration.cpp:55
 msgid "Remove lines from top/bottom/left/right."
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:55
+#: avidemux/ADM_filter/filter_declaration.cpp:56
 msgid "MPlayer resize"
 msgstr "?????? ?????????? MPlayer"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:55
+#: avidemux/ADM_filter/filter_declaration.cpp:56
 msgid "Change image size. Faster than Avisynth's Resize."
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:56
+#: avidemux/ADM_filter/filter_declaration.cpp:57
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:312
 msgid "Resize"
 msgstr "?????? ????????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:56
+#: avidemux/ADM_filter/filter_declaration.cpp:57
 msgid "Picture resizer ported from Avisynth."
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:57
+#: avidemux/ADM_filter/filter_declaration.cpp:58
 msgid "Add black borders"
 msgstr "???????? ?????? ?????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:57
+#: avidemux/ADM_filter/filter_declaration.cpp:58
 msgid "Add pure black border(s). Enlarges the picture."
 msgstr "?????? ??? ????? ?? ??????? ?????. ????????? ??? ???????."
 
-#: avidemux/ADM_filter/filter_declaration.cpp:58
+#: avidemux/ADM_filter/filter_declaration.cpp:59
 msgid "Blacken borders"
 msgstr "???????? ??? ?????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:58
+#: avidemux/ADM_filter/filter_declaration.cpp:59
 msgid "Fill borders with pure black. Doesn't alter size."
 msgstr "?????? ??? ????? ?? ??????? ?????. ??? ???????? ?? ??????????."
 
-#: avidemux/ADM_filter/filter_declaration.cpp:59
+#: avidemux/ADM_filter/filter_declaration.cpp:60
 msgid "Vertical flip"
 msgstr "?????????? ?????????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:59
+#: avidemux/ADM_filter/filter_declaration.cpp:60
 msgid "Vertically flip the picture."
 msgstr "?????????? ????????? ??? ???????."
 
-#: avidemux/ADM_filter/filter_declaration.cpp:60
+#: avidemux/ADM_filter/filter_declaration.cpp:61
 #: avidemux/ADM_videoFilter/ADM_vidRotate.cpp:271
 msgid "Rotate"
 msgstr "??????????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:60
+#: avidemux/ADM_filter/filter_declaration.cpp:61
 msgid "Rotate the picture by 90, 180 or 270 degrees."
 msgstr "?????????? ??? ??????? ???? 90, 180, ? 270 ??????."
 
-#: avidemux/ADM_filter/filter_declaration.cpp:62
+#: avidemux/ADM_filter/filter_declaration.cpp:63
 #: avidemux/ADM_videoFilter/ADM_vidResampleFPS.cpp:90
 msgid "Resample fps"
 msgstr "?????????????????? fps"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:62
+#: avidemux/ADM_filter/filter_declaration.cpp:63
 msgid "Change framerate while keeping duration."
 msgstr "?????? ??? ?????? ??? ????, ??? ??????????? ? ????????."
 
-#: avidemux/ADM_filter/filter_declaration.cpp:63
+#: avidemux/ADM_filter/filter_declaration.cpp:64
 msgid "Reverse"
 msgstr "?????????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:63
+#: avidemux/ADM_filter/filter_declaration.cpp:64
 msgid "Play video backward."
 msgstr "????????? ??????????? ??? ??????."
 
-#: avidemux/ADM_filter/filter_declaration.cpp:64
+#: avidemux/ADM_filter/filter_declaration.cpp:65
 #: avidemux/ADM_videoFilter/ADM_vidFade.cpp:78
 msgid "Fade"
 msgstr "????? ????????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:64
+#: avidemux/ADM_filter/filter_declaration.cpp:65
 msgid "Fade in/out."
 msgstr "????? ???????/??????."
 
-#: avidemux/ADM_filter/filter_declaration.cpp:69
+#: avidemux/ADM_filter/filter_declaration.cpp:71
 #: avidemux/ADM_videoFilter/ADM_vidYadif.cpp:186
 msgid "yadif"
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:69
+#: avidemux/ADM_filter/filter_declaration.cpp:71
 msgid "Yet Another DeInterlacer. Ported from MPlayer."
-msgstr ""
+msgstr "????? ???? ??????????. ????????? ??? ????????????? ??? ??? MPlayer."
 
-#: avidemux/ADM_filter/filter_declaration.cpp:70
+#: avidemux/ADM_filter/filter_declaration.cpp:72
 #: avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp:119
 #, fuzzy
 msgid "mcDeinterlace"
 msgstr "??????????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:70
+#: avidemux/ADM_filter/filter_declaration.cpp:72
 msgid "Motion compensation deinterlacer. Ported from MPlayer."
-msgstr ""
+msgstr "?????????? ??????????? ???????. ????????? ??? ????????????? ??? ??? MPlayer."
 
-#: avidemux/ADM_filter/filter_declaration.cpp:71
+#: avidemux/ADM_filter/filter_declaration.cpp:73
 #, fuzzy
 msgid "Deinterlace"
 msgstr "???????????? (deinterlace)"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:71
+#: avidemux/ADM_filter/filter_declaration.cpp:73
 msgid "Mask interlacing artifacts. Port of Smart deinterlace."
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:72
+#: avidemux/ADM_filter/filter_declaration.cpp:74
 #: avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp:100
 msgid "KernelDeint"
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:72
+#: avidemux/ADM_filter/filter_declaration.cpp:74
 msgid "Kernel deinterlacer by Donald Graft."
-msgstr ""
+msgstr "?????????? ????????? ??? Donald Graft."
 
-#: avidemux/ADM_filter/filter_declaration.cpp:73
+#: avidemux/ADM_filter/filter_declaration.cpp:75
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:121
 msgid "TDeint"
 msgstr "TDeint"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:73
+#: avidemux/ADM_filter/filter_declaration.cpp:75
 msgid "Motion adaptative deinterlacer by Tritical."
-msgstr ""
+msgstr "??????????????? ?????????? ??????? ??? ??? Tritical."
 
-#: avidemux/ADM_filter/filter_declaration.cpp:74
+#: avidemux/ADM_filter/filter_declaration.cpp:76
 #: avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp:119
 #, fuzzy
 msgid "libavcodec deinterlacer"
-msgstr "??????????"
+msgstr "??????? Deinterlacer..."
 
-#: avidemux/ADM_filter/filter_declaration.cpp:74
+#: avidemux/ADM_filter/filter_declaration.cpp:76
 msgid "All FFmpeg deinterlace filters (bicubic, median, ...)."
-msgstr ""
+msgstr "??? ?? ?????? ????????? FFmpeg (????????, ????, ...)."
 
-#: avidemux/ADM_filter/filter_declaration.cpp:75
+#: avidemux/ADM_filter/filter_declaration.cpp:77
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:131
 msgid "Decomb Telecide"
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:75
+#: avidemux/ADM_filter/filter_declaration.cpp:77
 msgid "Great deinterlacing package including IVTC."
-msgstr ""
+msgstr "???????? ?????? ????????? ??? ???????? IVTC."
 
-#: avidemux/ADM_filter/filter_declaration.cpp:76
+#: avidemux/ADM_filter/filter_declaration.cpp:78
 #: avidemux/ADM_videoFilter/ADM_vidDecDec.cpp:211
 msgid "Decomb Decimate"
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:76
+#: avidemux/ADM_filter/filter_declaration.cpp:78
 msgid "Useful to remove dupes left by Telecide."
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:77
+#: avidemux/ADM_filter/filter_declaration.cpp:79
 msgid "Pulldown"
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:77
+#: avidemux/ADM_filter/filter_declaration.cpp:79
 msgid "Convert 24 fps to 30 fps by repeating fields."
-msgstr ""
+msgstr "????????? ??? 24 fps ??? 30 fps, ?? ??? ????????? ??????."
 
-#: avidemux/ADM_filter/filter_declaration.cpp:79
+#: avidemux/ADM_filter/filter_declaration.cpp:81
 msgid "Bobber - convert each field into a full sized frame."
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:81
-#, fuzzy
+#: avidemux/ADM_filter/filter_declaration.cpp:83
 msgid "PAL field shift"
-msgstr "???????????? ???????? ???????????"
+msgstr "?????????? ?????? PAL"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:81
+#: avidemux/ADM_filter/filter_declaration.cpp:83
 msgid "Shift fields by one. Useful for some PAL movies."
-msgstr ""
+msgstr "?????????? ??? ?????? ???? ???. ??????? ?? ??????? ??????? PAL."
 
-#: avidemux/ADM_filter/filter_declaration.cpp:82
+#: avidemux/ADM_filter/filter_declaration.cpp:84
 msgid "PAL smart"
-msgstr ""
+msgstr "?????? PAL"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:82
+#: avidemux/ADM_filter/filter_declaration.cpp:84
 msgid "Smartly revert non constant PAL field shift."
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:87
+#: avidemux/ADM_filter/filter_declaration.cpp:89
 msgid "Drop"
 msgstr "???????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:87
+#: avidemux/ADM_filter/filter_declaration.cpp:89
 msgid "Drop damaged fields (e.g. from VHS capture)."
-msgstr ""
+msgstr "??????? ????????????? ?????? (?? ??? ??????? VHS)."
 
-#: avidemux/ADM_filter/filter_declaration.cpp:88
+#: avidemux/ADM_filter/filter_declaration.cpp:90
 msgid "Swap fields"
-msgstr ""
+msgstr "???????? ??????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:88
+#: avidemux/ADM_filter/filter_declaration.cpp:90
 msgid "Swap top and bottom fields."
-msgstr ""
+msgstr "???????? ??? ???? ??? ??? ???? ??????."
 
-#: avidemux/ADM_filter/filter_declaration.cpp:89
+#: avidemux/ADM_filter/filter_declaration.cpp:91
 msgid "Smart swap fields"
-msgstr ""
+msgstr "?????? ???????? ??????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:89
+#: avidemux/ADM_filter/filter_declaration.cpp:91
 msgid "Smartly swap fields. Needed when field order changes."
-msgstr ""
+msgstr "?????? ???????? ??????. ??????? ???? ??????? ? ????? ??? ??????."
 
-#: avidemux/ADM_filter/filter_declaration.cpp:91
+# ???
+#: avidemux/ADM_filter/filter_declaration.cpp:93
 msgid "Keep even fields"
-msgstr ""
+msgstr "????????? ??????????? ??????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:91
+#: avidemux/ADM_filter/filter_declaration.cpp:93
 msgid "Keep top fields. Gives a half height picture."
-msgstr ""
+msgstr "????????? ??? ????? ??????. ??????? ??????? ????? ?????."
 
-#: avidemux/ADM_filter/filter_declaration.cpp:92
+# ???
+#: avidemux/ADM_filter/filter_declaration.cpp:94
 msgid "Keep odd fields"
-msgstr ""
+msgstr "????????? ????????? ??????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:92
+#: avidemux/ADM_filter/filter_declaration.cpp:94
 msgid "Keep bottom fileds. Gives a half height picture."
-msgstr ""
+msgstr "????????? ??? ???? ??????. ??????? ??????? ????? ?????."
 
-#: avidemux/ADM_filter/filter_declaration.cpp:93
-#, fuzzy
+#: avidemux/ADM_filter/filter_declaration.cpp:95
 msgid "Separate fields"
-msgstr "???????????"
+msgstr "??????????? ??????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:93
+#: avidemux/ADM_filter/filter_declaration.cpp:95
 msgid "Each field becomes full picture, half sized."
-msgstr ""
+msgstr "???? ????? ??????? ?????? ??????, ?? ?? ???? ???????."
 
-#: avidemux/ADM_filter/filter_declaration.cpp:94
+#: avidemux/ADM_filter/filter_declaration.cpp:96
 msgid "Merge fields"
-msgstr ""
+msgstr "?????????? ??????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:94
+#: avidemux/ADM_filter/filter_declaration.cpp:96
 msgid "Merge two pictures as if they were two fields."
-msgstr ""
+msgstr "?????????? ??? ??????? ??? ?? ???? ??? ?????."
 
-#: avidemux/ADM_filter/filter_declaration.cpp:96
+#: avidemux/ADM_filter/filter_declaration.cpp:99
+msgid "Hz Stack fields"
+msgstr "Hz ????????? ??????"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:99
+msgid "Put botj fields side by side."
+msgstr "?????????? ??? ??? ??? ?????? ????? ?????."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:102
 msgid "Stack fields"
-msgstr ""
+msgstr "????????? ??????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:96
+#: avidemux/ADM_filter/filter_declaration.cpp:102
 msgid "Put two fields on top of one another."
-msgstr ""
+msgstr "?????????? ??? ?????? ?? ??? ???? ??? ????."
 
-#: avidemux/ADM_filter/filter_declaration.cpp:97
+#: avidemux/ADM_filter/filter_declaration.cpp:103
 msgid "Unstack fields"
-msgstr ""
+msgstr "???-????????? ??????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:97
+#: avidemux/ADM_filter/filter_declaration.cpp:103
 msgid "Interleave top and bottom part of the picture."
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:101
+#: avidemux/ADM_filter/filter_declaration.cpp:107
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eq2.cpp:205
 msgid "MPlayer eq2"
 msgstr "MPlayer eq2"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:101
+#: avidemux/ADM_filter/filter_declaration.cpp:107
 msgid "Adjust contrast, brightness, saturation and gamma."
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:102
-#, fuzzy
+#: avidemux/ADM_filter/filter_declaration.cpp:108
 msgid "MPlayer hue"
-msgstr "MPlayer eq2"
+msgstr "???????? ??? MPlayer"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:102
+#: avidemux/ADM_filter/filter_declaration.cpp:108
 msgid "Adjust hue and saturation."
-msgstr ""
+msgstr "??????? ??? ????????? ??? ??? ????????."
 
-#: avidemux/ADM_filter/filter_declaration.cpp:103
+#: avidemux/ADM_filter/filter_declaration.cpp:109
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:179
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_contrast.cpp:72
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_contrast.cpp:194
@@ -657,362 +657,365 @@
 msgid "Contrast"
 msgstr "????????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:103
+#: avidemux/ADM_filter/filter_declaration.cpp:109
 msgid "Adjust contrast, brightness and colors."
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:104
+#: avidemux/ADM_filter/filter_declaration.cpp:110
 #, fuzzy
 msgid "Luma equalizer"
-msgstr "?????????????"
+msgstr "???????????? ????????????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:104
+#: avidemux/ADM_filter/filter_declaration.cpp:110
 msgid "Luma correction filter with histogram."
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:106
+#: avidemux/ADM_filter/filter_declaration.cpp:112
 msgid "Swap U and V"
 msgstr "???????? U ??? V"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:106
+#: avidemux/ADM_filter/filter_declaration.cpp:112
+#, fuzzy
 msgid "Invert chroma U and chroma V."
-msgstr ""
+msgstr "?????????? ?????? ?? ?????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:107
+#: avidemux/ADM_filter/filter_declaration.cpp:113
 #, fuzzy
 msgid "Chroma shift"
-msgstr "??????? ????????:"
+msgstr "?????????? ?????????? ?????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:107
+#: avidemux/ADM_filter/filter_declaration.cpp:113
 msgid "Shift chroma U/V to fix badly synced luma/chroma."
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:109
+#: avidemux/ADM_filter/filter_declaration.cpp:115
 #, fuzzy
 msgid "Luma only"
-msgstr "??????? ????????????:"
+msgstr "???? ?? ???????????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:109
+#: avidemux/ADM_filter/filter_declaration.cpp:115
 msgid "Convert picture to greyscale (black and white)."
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:110
+#: avidemux/ADM_filter/filter_declaration.cpp:116
 #, fuzzy
 msgid "Chroma U only"
-msgstr "??????? ????????:"
+msgstr "???? ?? ???????????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:110
+#: avidemux/ADM_filter/filter_declaration.cpp:116
 msgid "Convert picture to grey, keeping only chroma U."
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:111
+#: avidemux/ADM_filter/filter_declaration.cpp:117
 #, fuzzy
 msgid "Chroma V only"
-msgstr "??????? ????????:"
+msgstr "???? ?? ???????????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:111
+#: avidemux/ADM_filter/filter_declaration.cpp:117
 msgid "Convert picture to grey, keeping only chroma V."
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:113
+#: avidemux/ADM_filter/filter_declaration.cpp:119
 #, fuzzy
 msgid "Luma delta"
-msgstr "??????? ????????????:"
+msgstr "???????? Delta Row"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:113
+#: avidemux/ADM_filter/filter_declaration.cpp:119
 msgid "Difference between current and previous picture."
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:114
+#: avidemux/ADM_filter/filter_declaration.cpp:120
 msgid "Avisynth ColorYUV"
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:114
+#: avidemux/ADM_filter/filter_declaration.cpp:120
 msgid "Alter colors (auto white balance etc...). Ported from Avisynth."
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:123
+#: avidemux/ADM_filter/filter_declaration.cpp:130
 #: avidemux/ADM_videoFilter/ADM_vidMPLD3Dlow.cpp:80
-#, fuzzy
 msgid "MPlayer denoise3d"
-msgstr "MPlayer eq2"
+msgstr "????????????????3d MPlayer "
 
-#: avidemux/ADM_filter/filter_declaration.cpp:123
+#: avidemux/ADM_filter/filter_declaration.cpp:130
 msgid "Reduce noise, smooth image, increase compressibility."
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:124
+#: avidemux/ADM_filter/filter_declaration.cpp:131
 #: avidemux/ADM_videoFilter/ADM_vidMPLD3D.cpp:80
 msgid "MPlayer hqdn3d"
 msgstr "MPlayer hqdn3d"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:124
+#: avidemux/ADM_filter/filter_declaration.cpp:131
 msgid "High quality version of denoise3d. Slower but more precise."
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:125
+#: avidemux/ADM_filter/filter_declaration.cpp:132
 #: avidemux/ADM_videoFilter/ADM_vidFlux.cpp:138
 msgid "FluxSmooth"
-msgstr ""
+msgstr "FluxSmooth"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:125
+#: avidemux/ADM_filter/filter_declaration.cpp:132
 msgid "Spatio-temporal cleaner by Ross Thomas."
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:127
+#: avidemux/ADM_filter/filter_declaration.cpp:134
 #: avidemux/ADM_videoFilter/ADM_vidVlad.cpp:106
-#, fuzzy
 msgid "Temporal Cleaner"
-msgstr "temporal"
+msgstr "???????? ??????????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:127
+#: avidemux/ADM_filter/filter_declaration.cpp:134
 msgid "Vlad59's Avisynth port of Jim Casaburi's denoiser."
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:129
+#: avidemux/ADM_filter/filter_declaration.cpp:136
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filterlist.cpp:173
 #: avidemux/ADM_videoFilter/ADM_vidDenoise.cpp:397
 msgid "Denoise"
 msgstr "???????????????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:129
+#: avidemux/ADM_filter/filter_declaration.cpp:136
 msgid "Port of Transcode DNR."
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:130
+#: avidemux/ADM_filter/filter_declaration.cpp:137
 #: avidemux/ADM_videoFilter/ADM_vidStabilize.cpp:66
 msgid "Stabilize"
 msgstr "?????????????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:130
+# ? ???????
+#: avidemux/ADM_filter/filter_declaration.cpp:137
 msgid "Light denoiser."
-msgstr ""
+msgstr "???????????????? ?????."
 
-#: avidemux/ADM_filter/filter_declaration.cpp:132
+#: avidemux/ADM_filter/filter_declaration.cpp:139
 msgid "Cnr2"
-msgstr ""
+msgstr "Cnr2"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:132
+#: avidemux/ADM_filter/filter_declaration.cpp:139
 msgid "Chroma noise reduction filter by MarcFD/Tritical."
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:134
+#: avidemux/ADM_filter/filter_declaration.cpp:141
 msgid "MSmooth by Donald Graft"
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:134
+#: avidemux/ADM_filter/filter_declaration.cpp:141
 msgid "Smooth the image, don't blur edges. Useful on anime."
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:135
+#: avidemux/ADM_filter/filter_declaration.cpp:142
 #: avidemux/ADM_videoFilter/ADM_vidSoften.cpp:74
 msgid "Soften"
 msgstr "?????????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:135
+#: avidemux/ADM_filter/filter_declaration.cpp:142
 msgid "A variant of stabilize."
-msgstr ""
+msgstr "??? ????????? ??? ?????????????."
 
-#: avidemux/ADM_filter/filter_declaration.cpp:139
+#: avidemux/ADM_filter/filter_declaration.cpp:147
 msgid "Sharpen"
 msgstr "??????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:139
+#: avidemux/ADM_filter/filter_declaration.cpp:147
 msgid "Enhance difference between near pixels."
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:140
+#: avidemux/ADM_filter/filter_declaration.cpp:148
 #: avidemux/ADM_videoFilter/ADM_vidMSharpen.cpp:172
-#, fuzzy
 msgid "MSharpen"
-msgstr "_???"
+msgstr "MSharpen (???????)"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:140
+#: avidemux/ADM_filter/filter_declaration.cpp:148
 msgid "Sharpen edges without amplifying noise. By Donald Graft."
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:141
-#, fuzzy
+#: avidemux/ADM_filter/filter_declaration.cpp:149
 msgid "asharp"
-msgstr "ASHARP"
+msgstr "asharp (???????)"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:141
-#, fuzzy
+#: avidemux/ADM_filter/filter_declaration.cpp:149
 msgid "Adaptative sharpener by MarcFD."
-msgstr "ASharp ??? ??? MarcFD"
+msgstr "??????????????? ??????? ??? ??? MarcFD."
 
-#: avidemux/ADM_filter/filter_declaration.cpp:143
+#: avidemux/ADM_filter/filter_declaration.cpp:151
+#, fuzzy
 msgid "Gauss smooth"
-msgstr ""
+msgstr "????? ?????????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:143
+#: avidemux/ADM_filter/filter_declaration.cpp:151
 msgid "Gaussian smooth. Blur the picture."
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:144
-#, fuzzy
+#: avidemux/ADM_filter/filter_declaration.cpp:152
 msgid "Mean"
-msgstr "?????"
+msgstr "????? (??????)"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:144
+#: avidemux/ADM_filter/filter_declaration.cpp:152
 msgid "Mean (blur) kernel."
-msgstr ""
+msgstr "????? ??????? (??????)."
 
-#: avidemux/ADM_filter/filter_declaration.cpp:145
-#, fuzzy
+#: avidemux/ADM_filter/filter_declaration.cpp:153
 msgid "Median"
-msgstr "????????"
+msgstr "?????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:145
+#: avidemux/ADM_filter/filter_declaration.cpp:153
 msgid "Median kernel 3x3. Remove high frequency noise."
-msgstr ""
+msgstr "????? ??????? 3x3. ??????? ?????? ?????? ??????????."
 
-#: avidemux/ADM_filter/filter_declaration.cpp:146
+#: avidemux/ADM_filter/filter_declaration.cpp:154
 msgid "Median (5x5)"
-msgstr ""
+msgstr "????? (5x5)"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:146
+#: avidemux/ADM_filter/filter_declaration.cpp:154
 msgid "Median kernel 5x5. Good for reducing chroma noise."
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:147
+#: avidemux/ADM_filter/filter_declaration.cpp:155
 msgid "Forced postprocessing"
 msgstr "????????????? ??????????????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:147
+#: avidemux/ADM_filter/filter_declaration.cpp:155
 msgid "Apply blind postprocessing."
 msgstr "???????? ?????? ???????????????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:151
+#: avidemux/ADM_filter/filter_declaration.cpp:160
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:112
 msgid "Subtitler"
 msgstr "????????????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:151
+#: avidemux/ADM_filter/filter_declaration.cpp:160
 msgid "Add srt/sub subtitles to the picture."
-msgstr ""
+msgstr "???????? ????????? srt/sub ???? ??????."
 
-#: avidemux/ADM_filter/filter_declaration.cpp:152
+#: avidemux/ADM_filter/filter_declaration.cpp:161
 #: avidemux/ADM_videoFilter/ADM_vidASS.cpp:95
 msgid "ASS"
 msgstr "ASS"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:152
+#: avidemux/ADM_filter/filter_declaration.cpp:161
 msgid "Add ASS/SSA subtitles to the picture."
-msgstr ""
+msgstr "???????? ????????? ASS/SSA ???? ??????."
 
-#: avidemux/ADM_filter/filter_declaration.cpp:154
+#: avidemux/ADM_filter/filter_declaration.cpp:164
 msgid "VobSub"
 msgstr "VobSub"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:154
+#: avidemux/ADM_filter/filter_declaration.cpp:164
 msgid "Embed VobSub subtitles into picture."
-msgstr ""
+msgstr "?????????? ????????? VobSub ???? ??????."
 
-#: avidemux/ADM_filter/filter_declaration.cpp:156
+#: avidemux/ADM_filter/filter_declaration.cpp:166
 msgid "DVB sub"
-msgstr ""
+msgstr "DVB sub"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:156
+#: avidemux/ADM_filter/filter_declaration.cpp:166
 msgid "Embed DVB-T subtitle."
-msgstr ""
+msgstr "?????????? ????????? DVB-T."
 
-#: avidemux/ADM_filter/filter_declaration.cpp:163
+#: avidemux/ADM_filter/filter_declaration.cpp:177
+#, fuzzy
 msgid "Blend remover"
-msgstr ""
+msgstr "???????? ????????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:163
+#: avidemux/ADM_filter/filter_declaration.cpp:177
 msgid "Remove blend between previous and next picture."
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:164
+#: avidemux/ADM_filter/filter_declaration.cpp:178
 msgid "Hard pulldown removal"
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:164
+#: avidemux/ADM_filter/filter_declaration.cpp:178
 msgid "Remove IVTC that has been analog captured or resized."
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:165
+#: avidemux/ADM_filter/filter_declaration.cpp:179
 msgid "Whirl"
 msgstr "????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:165
+#: avidemux/ADM_filter/filter_declaration.cpp:179
 msgid "Useless whirlwind effect."
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:166
+#: avidemux/ADM_filter/filter_declaration.cpp:180
 #: avidemux/ADM_videoFilter/ADM_vidMosaic.cpp:98
 msgid "Mosaic"
 msgstr "???????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:166
+#: avidemux/ADM_filter/filter_declaration.cpp:180
 msgid "Split the picture into tiny thumbnails."
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:167
-#, fuzzy
+#: avidemux/ADM_filter/filter_declaration.cpp:181
 msgid "MPlayer delogo"
-msgstr "MPlayer eq2"
+msgstr "MPlayer ????????? ?????????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:167
+#: avidemux/ADM_filter/filter_declaration.cpp:181
 msgid "Blend a logo by interpolating its surrounding box."
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:168
+#: avidemux/ADM_filter/filter_declaration.cpp:182
 #: avidemux/ADM_videoFilter/ADM_vidLogo.cpp:95
 msgid "Logo"
 msgstr "????????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:168
+#: avidemux/ADM_filter/filter_declaration.cpp:182
 msgid "Add a png as logo."
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:169
+#: avidemux/ADM_filter/filter_declaration.cpp:183
+#, fuzzy
 msgid "Animated Menu"
-msgstr ""
+msgstr "??????????? ?????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:170
+#: avidemux/ADM_filter/filter_declaration.cpp:184
 msgid "Create a video made of 6 mini windows, very useful to do DVD menus."
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:172
+#: avidemux/ADM_filter/filter_declaration.cpp:186
 msgid "Compute Average"
 msgstr "??????????? ????? ????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:172
+#: avidemux/ADM_filter/filter_declaration.cpp:186
 msgid "Compute average luma value for each pixel throughout all frames, and save to file"
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:173
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:898
-#, fuzzy
+#: avidemux/ADM_filter/filter_declaration.cpp:187
+msgid "Eraser"
+msgstr "?????????"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:187
+msgid "\"Erase\" arbitrary areas of each frame"
+msgstr ""
+
+#: avidemux/ADM_filter/filter_declaration.cpp:188
 msgid "Swiss Army Knife"
-msgstr "??????? Xvid4"
+msgstr "????????? ???????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:173
+#: avidemux/ADM_filter/filter_declaration.cpp:188
 msgid "Apply operation like P'=P*A, P-A, P+A, etc. using a convolution, rolling average, image from file, or constant"
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:174
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:272
+#: avidemux/ADM_filter/filter_declaration.cpp:189
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:401
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:976
 msgid "Threshold"
 msgstr "???????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:174
+#: avidemux/ADM_filter/filter_declaration.cpp:189
 msgid "Force too-bright/too-dim pixels to 0 and the rest to 255 or vice-versa"
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:175
-#, fuzzy
+#: avidemux/ADM_filter/filter_declaration.cpp:190
 msgid "Particle List"
-msgstr "??????"
+msgstr "????? ?????????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:175
+#: avidemux/ADM_filter/filter_declaration.cpp:190
 msgid "Identify 'particles' (groups of pixels)"
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:180
+#: avidemux/ADM_filter/filter_declaration.cpp:195
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_partial.cpp:123
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtersub.cpp:144
 msgid "Partial"
@@ -1031,26 +1034,24 @@
 msgstr "??? ??????? ?????? ??????"
 
 #: avidemux/ADM_filter/filter_saveload.cpp:207
-#, fuzzy
 msgid "No tag found"
-msgstr "?? ??????? ?????? ??? ??? ???????"
+msgstr "?? ??????? ???????"
 
 #: avidemux/ADM_filter/filter_saveload.cpp:287
-#, fuzzy
 msgid "Node not found"
-msgstr "? ???????????? ?????? ???????????? ?? ref=\"%s\" ??? ???????!"
+msgstr "?? ??????? ??????"
 
 #: avidemux/ADM_inputs/ADM_h263/ADM_h263.cpp:258
 msgid "Size is not (s)QCIF"
 msgstr "?? ??????? ??? ????? (s)QCIF"
 
-#: avidemux/ADM_inputs/ADM_mp4/ADM_mp4Analyzer.cpp:583
+#: avidemux/ADM_inputs/ADM_mp4/ADM_mp4Analyzer.cpp:589
 msgid "Problem reading SVQ3 headers"
 msgstr "???????? ???? ???????? ??? ????????? SVQ3"
 
 #: avidemux/ADM_inputs/ADM_mp4/ADM_mp4Indexer.cpp:346
 msgid "No stts table"
-msgstr ""
+msgstr "????? ?????? sstts"
 
 #: avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_indexer.cpp:149
 msgid "There is several mpeg file, append them ?"
@@ -1099,7 +1100,7 @@
 
 #: avidemux/ADM_inputs/ADM_ogm/ADM_ogm.cpp:426
 msgid "Scanning OGM"
-msgstr ""
+msgstr "?????? OGM"
 
 #: avidemux/ADM_inputs/ADM_openDML/ADM_openDML.cpp:281
 #: avidemux/ADM_inputs/ADM_openDML/ADM_openDML.cpp:363
@@ -1109,13 +1110,13 @@
 
 #: avidemux/ADM_inputs/ADM_openDML/ADM_openDMLDepack.cpp:93
 msgid "Unpacking bitstream"
-msgstr ""
+msgstr "?????????????? ???? ?????????"
 
 #: avidemux/ADM_inputs/ADM_openDML/ADM_opendml_reindex.cpp:68
 msgid "Indexing"
 msgstr "?????????? ??????????"
 
-#: avidemux/ADM_libraries/ADM_lavformat/ADM_lavformat.cpp:378
+#: avidemux/ADM_libraries/ADM_lavformat/ADM_lavformat.cpp:376
 msgid "Incompatible frame rate"
 msgstr "???????? ???????? ????"
 
@@ -1131,18 +1132,19 @@
 
 #: avidemux/ADM_libraries/ADM_lvemux/ADM_muxer.cpp:92
 msgid "lvemux init failed"
-msgstr ""
+msgstr "???????? ????????????? lvemux "
 
 #: avidemux/ADM_libraries/ADM_utilities/ADM_gettext.cpp:37
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:290
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:291
 msgid "_File"
 msgstr "_??????"
 
-#: avidemux/ADM_libraries/ADM_utilities/ADM_imageLoader.cpp:191
+#: avidemux/ADM_libraries/ADM_utilities/ADM_imageLoader.cpp:193
+#, fuzzy
 msgid "Wrong Colorspace"
-msgstr ""
+msgstr "????????? ?????????? ?????"
 
-#: avidemux/ADM_libraries/ADM_utilities/ADM_imageLoader.cpp:191
+#: avidemux/ADM_libraries/ADM_utilities/ADM_imageLoader.cpp:193
 msgid "Only YV12/I420 or YUY2/I422 JPegs are supported"
 msgstr "?????????????? ???? YV12/I420 ? YUY2/I422 JPeg"
 
@@ -1189,31 +1191,31 @@
 msgid "Cannot open \"%s\" for writing."
 msgstr "??????? ?? ??????? \"%s\" ??? ???????."
 
-#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:324
+#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:327
 msgid "NTSC 4:3"
 msgstr "NTSC 4:3"
 
-#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:325
-#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:326
+#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:328
+#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:329
 msgid "NTSC 16:9"
 msgstr "NTSC 16:9"
 
-#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:327
+#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:330
 msgid "PAL 4:3"
 msgstr "PAL 4:3"
 
-#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:328
+#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:331
 msgid "PAL 16:9"
 msgstr "PAL 16:9"
 
-#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:329
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:42
+#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:332
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:43
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:376
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:398
 msgid "1:1"
 msgstr "1:1"
 
-#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:331
+#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:334
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:598
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:795
 msgid "Unknown"
@@ -1351,7 +1353,7 @@
 msgstr "%lu ????????????"
 
 #: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:74
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:243
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:242
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:845
 msgid "Normal"
 msgstr "????????"
@@ -1384,9 +1386,8 @@
 msgstr ""
 
 #: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:90
-#, fuzzy
 msgid "AVI Muxer Options"
-msgstr "???????? Mpeg2"
+msgstr "???????? AVI Muxer"
 
 #: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:188
 msgid "Error initalizing audio filters"
@@ -1414,13 +1415,13 @@
 #: avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp:93
 #: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:149
 #: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:203
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:174
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:176
 #: avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp:76
 msgid "Filter init failed"
 msgstr "? ???????????? ??? ??????? ???????"
 
 #: avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp:127
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:399
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:401
 #: avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp:100
 msgid ""
 "\n"
@@ -1430,7 +1431,7 @@
 " ?????????????????? ??? ?????????? ??????? ?????????? ;"
 
 #: avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp:152
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:435
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:437
 msgid "Aborting"
 msgstr "???????????"
 
@@ -1444,22 +1445,23 @@
 #: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:215
 #: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:233
 #: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:332
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:212
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:335
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:419
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:214
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:337
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:421
 #: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:352
 msgid "Error while encoding"
 msgstr "?????? ???? ??? ????????????"
 
 #: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:190
 #: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:244
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:224
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:226
+#, fuzzy
 msgid "KeyFrame error"
-msgstr ""
+msgstr "?????? ????????????????"
 
 #: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:190
 #: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:244
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:224
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:226
 msgid ""
 "The beginning frame is not a key frame.\n"
 "Please move the A marker."
@@ -1487,7 +1489,7 @@
 msgstr "? ????????? ?????? ?? ????? 44100, 22050 ? 11025 Hz."
 
 #: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:254
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:251
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:253
 msgid "Cannot initialize the audio stream"
 msgstr "??????? ?  ???????????? ??? ???? ????"
 
@@ -1560,8 +1562,9 @@
 msgstr ""
 
 #: avidemux/ADM_script/ADM_JSFunctions.cpp:507
+#, fuzzy
 msgid "Test uinteger"
-msgstr ""
+msgstr "?????? ??????????????"
 
 #: avidemux/ADM_script/ADM_JSFunctions.cpp:519
 #, fuzzy
@@ -1573,8 +1576,9 @@
 msgstr "????????"
 
 #: avidemux/ADM_script/ADM_JSFunctions.cpp:558
+#, fuzzy
 msgid "No Strategy"
-msgstr ""
+msgstr "?? ?????? ?????????? '%s'"
 
 #: avidemux/ADM_script/ADM_JSFunctions.cpp:559
 msgid "3:2 Pulldown"
@@ -1607,11 +1611,11 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_animated.cpp:38
 msgid "Vignette _Width:"
-msgstr ""
+msgstr "_?????? ????????????? ????????:"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_animated.cpp:39
 msgid "Vignette _Height:"
-msgstr ""
+msgstr "_???? ????????????? ????????:"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_animated.cpp:42
 msgid "Vignette frame number"
@@ -1654,6 +1658,7 @@
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:80
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:89
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:51
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:327
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:373
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:381
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:389
@@ -1661,7 +1666,7 @@
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:568
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:583
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:219
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1124
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1188
 #: avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp:105
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:101
 #: avidemux/ADM_videoFilter/ADM_vidRotate.cpp:264
@@ -1694,7 +1699,7 @@
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:93
 #, fuzzy
 msgid "_Gain mode:"
-msgstr "??????????? VHQ:"
+msgstr "?????????? ??????????????"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:95
 msgid "G_ain value:"
@@ -1765,17 +1770,17 @@
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp:216
 #, fuzzy
 msgid "Number of I frames:"
-msgstr "??????? ???? ??? ?? G.711 "
+msgstr "??????? ????????:"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp:217
 #, fuzzy
 msgid "Number of P frames:"
-msgstr "??????? ???? ??? ?? G.711 "
+msgstr "??????? ????????:"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp:218
 #, fuzzy
 msgid "Number of B frames:"
-msgstr "??????? ???? ??? ?? G.711 "
+msgstr "??????? ????????:"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp:219
 #, fuzzy
@@ -1839,35 +1844,39 @@
 msgstr "Vorbis"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:156
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:307
 msgid "aRts"
 msgstr "aRts"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:157
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:313
 msgid "ESD"
 msgstr "ESD"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:158
-#, fuzzy
 msgid "Fontconfig"
-msgstr "????????? ?????? ??? fontconfig"
+msgstr "??????? ?????????????? (Fontconfig)"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:159
 msgid "FreeType 2"
 msgstr "FreeType 2"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:160
-msgid "gettext"
-msgstr "gettext"
+msgid "Gettext"
+msgstr "Gettext"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:161
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:304
 msgid "ALSA"
 msgstr "ALSA"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:162
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:319
 msgid "OSS"
 msgstr "OSS"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:163
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:322
 msgid "SDL"
 msgstr "SDL"
 
@@ -1900,7 +1909,7 @@
 msgstr "???????????"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:178
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:406
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:404
 msgid "CPU"
 msgstr "CPU"
 
@@ -1909,7 +1918,7 @@
 msgstr "???????????? ??????????"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:48
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:43
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:44
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:42
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:380
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:402
@@ -1917,7 +1926,7 @@
 msgstr "4:3"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:49
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:44
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:45
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:43
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:384
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:406
@@ -1999,7 +2008,7 @@
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:66
 #, fuzzy
 msgid "_Interlacing:"
-msgstr "??????????"
+msgstr "?????"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:88
 msgid "libavcodec MPEG-2 Configuration"
@@ -2080,16 +2089,17 @@
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:74
 #, fuzzy
 msgid "Mi_n. quantizer:"
-msgstr "M2VRequantizer"
+msgstr "???????? ?????????? ????????"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:75
 #, fuzzy
 msgid "Ma_x. quantizer:"
-msgstr "M2VRequantizer"
+msgstr "???????? ?????????? ????????"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:76
+#, fuzzy
 msgid "Max. quantizer _difference:"
-msgstr ""
+msgstr "??????? ??????? ??? ????? ??? ????????:"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:78
 msgid "4_MV"
@@ -2101,8 +2111,9 @@
 msgstr "_??????????? ???????? ???????? (trellis quantization)"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:81
+#, fuzzy
 msgid "_Quarter pixel"
-msgstr ""
+msgstr "??????? ?? ???/????:"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:82
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1018
@@ -2112,7 +2123,7 @@
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:85
 #, fuzzy
 msgid "_Number of B frames:"
-msgstr "??????? ???? ??? ?? G.711 "
+msgstr "??????? ????????:"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:86
 msgid "_Quantization type:"
@@ -2138,7 +2149,7 @@
 msgstr "???????? ?????????:"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:98
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:374
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:372
 msgid "User Interface"
 msgstr "?????????? ????????"
 
@@ -2158,7 +2169,7 @@
 msgstr "???????? ???????? (Quantization)"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:117
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1403
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1480
 msgid "Rate Control"
 msgstr "??????? ??????"
 
@@ -2172,8 +2183,9 @@
 msgstr "_???????? U ??? V"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavDecoder.cpp:27
+#, fuzzy
 msgid "Show motion _vectors"
-msgstr ""
+msgstr "???????? ??? ??????? ??????????? ???? ??? ?????? ??? ????? ????????;"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavDecoder.cpp:29
 msgid "Decoder Options"
@@ -2192,15 +2204,16 @@
 msgstr "??????? ??????? Idx:"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:93
+#, fuzzy
 msgid "Use GlyphSet (optional):"
-msgstr ""
+msgstr "- ??? ??? ?????? ???????????? ????, ?????????????? OR."
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:93
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:210
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:369
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:367
 #, fuzzy
 msgid "Select GlyphSet file"
-msgstr "??????? GlyphFile ??? ???????????"
+msgstr "??????? ??????? ????"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:94
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:211
@@ -2230,28 +2243,30 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:136
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:255
+#, fuzzy
 msgid "Cannot load the glyphset file."
-msgstr ""
+msgstr "??????? ? ??????? ??? ??????? torrent: %1"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:156
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:276
 #, fuzzy
 msgid "GlyphSet filename"
-msgstr "?? ?????? ????? ???????"
+msgstr "  --filename      - ????? ??????? ??? ???????\n"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:156
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:276
 #, fuzzy
 msgid "Save GlyphSet file"
-msgstr "?????????? ???????"
+msgstr "?????????? ?? ??????"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:158
 msgid "Save Glyph"
 msgstr "?????????? ?????????"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:208
+#, fuzzy
 msgid "Input TS:"
-msgstr ""
+msgstr "???????\tS"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:208
 msgid "Select TS file"
@@ -2262,8 +2277,9 @@
 msgstr "????????? PID:"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:210
+#, fuzzy
 msgid "Use glyphset (optional):"
-msgstr ""
+msgstr "- ??? ??? ?????? ???????????? ????, ?????????????? OR."
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:233
 msgid "Please Select a valid TS file."
@@ -2272,7 +2288,7 @@
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:278
 #, fuzzy
 msgid "Save GlyphSet"
-msgstr "?????????? Glyph"
+msgstr "?????????? &??..."
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp:40
 #: avidemux/ADM_videoFilter/ADM_vidForcedPP.cpp:60
@@ -2280,14 +2296,14 @@
 msgstr "?????? _???????:"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp:51
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:346
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:344
 #: avidemux/ADM_videoFilter/ADM_vidForcedPP.cpp:72
 #, fuzzy
 msgid "_Horizontal deblocking"
 msgstr "????????? ???????? ?????????"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp:52
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:347
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:345
 #: avidemux/ADM_videoFilter/ADM_vidForcedPP.cpp:73
 #, fuzzy
 msgid "_Vertical deblocking"
@@ -2299,294 +2315,315 @@
 msgid "_Deringing"
 msgstr "?????? ????????? ?????????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:188
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:187
 msgid "_Use systray while encoding"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:189
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:188
 msgid "_Accept non-standard audio frequency for DVD"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:190
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:189
 msgid "_Use libavcodec MPEG-2 decoder"
 msgstr "_????? ??????????????? libavcodec MPEG-2"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:191
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:190
 msgid "Create _OpenDML files"
 msgstr "?????????? ??????? _OpenDML"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:192
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:191
 msgid "Automatically _index MPEG files"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:193
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:192
 msgid "Automatically _swap A and B if A>B"
 msgstr "???????? _???????? A ??? B, ?? A>B"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:194
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:193
 msgid "_Disable NUV audio sync"
 msgstr "_?????????????? ???????????? ???? NUV"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:196
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:195
 msgid "Automatically _build VBR map"
-msgstr ""
+msgstr "???????? ??????? ??? ????? VBR"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:197
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:196
 msgid "Automatically _rebuild index"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:198
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:197
 msgid "Automatically remove _packed bitstream"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:200
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:199
 msgid "SIMD"
 msgstr "SIMD"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:202
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:201
 msgid "Enable all SIMD"
 msgstr "???????????? ???? ??? SIMD"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:203
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:202
 msgid "Enable MMX"
 msgstr "???????????? MMX"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:204
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:203
 msgid "Enable MMXEXT"
 msgstr "???????????? MMXEXT"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:205
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:204
 msgid "Enable 3DNOW"
 msgstr "???????????? 3DNOW"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:206
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:205
 msgid "Enable 3DNOWEXT"
 msgstr "???????????? 3DNOWEXT"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:207
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:206
 msgid "Enable SSE"
 msgstr "???????????? SSE"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:208
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:207
 msgid "Enable SSE2"
 msgstr "???????????? SSE2"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:209
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:208
 msgid "Enable SSE3"
 msgstr "???????????? SSE3"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:210
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:209
 msgid "Enable SSSE3"
 msgstr "???????????? SSSE3"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:231
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:230
+#, fuzzy
 msgid "_lavc threads:"
-msgstr ""
+msgstr "???????? ??????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:232
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:231
+#, fuzzy
 msgid "_x264 threads:"
-msgstr ""
+msgstr "???????? ??????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:233
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:232
+#, fuzzy
 msgid "X_vid threads:"
-msgstr ""
+msgstr "???????? ??????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:235
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:234
+#, fuzzy
 msgid "Multi-threading"
-msgstr ""
+msgstr "Multi-aterm"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:241
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:240
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:843
 msgid "High"
 msgstr "?????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:242
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:241
 msgid "Above normal"
 msgstr "???? ??? ?? ????????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:244
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:243
 msgid "Below normal"
 msgstr "???? ??? ?? ????????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:245
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:244
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:847
 msgid "Low"
 msgstr "??????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:247
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:246
 msgid "_Encoding priority:"
 msgstr "_????????????? ?????????????:"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:248
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:247
 msgid "_Indexing/unpacking priority:"
 msgstr "????????????? ??????????? ??????????/???-??????????????:"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:249
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:248
 msgid "_Playback priority:"
 msgstr "????????????? _????????????:"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:251
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:250
 msgid "Prioritisation"
 msgstr "??????? ??????????????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:256
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:255
 msgid "_Split MPEG files every (MB):"
 msgstr "_???????? ??????? MPEG ??? (MB):"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:258
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:257
 msgid "_Use alternative tag for MP3 in .mp4"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:261
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:260
 msgid "GTK+ (slow)"
 msgstr "GTK+ (????)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:263
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:262
 msgid "XVideo (best)"
 msgstr "XVideo (????????)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:267
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:266
 msgid "SDL (GDI)"
 msgstr "SDL (GDI)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:268
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:267
 msgid "SDL (DirectX)"
 msgstr "SDL (DirectX)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:270
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:269
 msgid "SDL (good)"
 msgstr "SDL (????)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:274
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:273
 msgid "Video _display:"
 msgstr "_???????? ??????:"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:279
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:278
 msgid "No alerts"
 msgstr "????? ????????????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:280
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:279
 msgid "Display only error alerts"
 msgstr "??????? ???? ??? ???????????? ?????????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:281
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:280
 msgid "Display all alerts"
 msgstr "??????? ???? ??? ????????????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:283
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:282
 #, fuzzy
 msgid "_Message level:"
 msgstr "?? ???????? ?????? ???? ??????? ??????? ?????????? ?????????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:288
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:287
 msgid "PCM"
 msgstr "PCM"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:289
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:288
 msgid "Master"
 msgstr "????????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:290
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:289
 msgid "_Volume control:"
 msgstr "_??????? ??????? ????:"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:295
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:294
+#, fuzzy
 msgid "No downmixing"
-msgstr ""
+msgstr "(????? ?????)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:297
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:296
 msgid "Pro Logic"
 msgstr "Pro Logic"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:298
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:297
 msgid "Pro Logic II"
 msgstr "Pro Logic II"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:300
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:299
+#, fuzzy
 msgid "_Local playback downmixing:"
-msgstr ""
+msgstr "? ?????? ??????????? NMM ???????."
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:332
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:310
+#, fuzzy
+msgid "Core Audio"
+msgstr "???????????? ?&???"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:316
+msgid "JACK"
+msgstr "JACK"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:325
+msgid "Win32"
+msgstr "Win32"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:330
 msgid "_Audio output:"
 msgstr "_?????? ????:"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:335
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:333
 msgid "ALSA _device:"
 msgstr "??????? _ALSA:"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:348
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:346
 #, fuzzy
 msgid "De_ringing"
-msgstr "?????? ????????? ?????????"
+msgstr "???&?????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:349
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:347
 #: avidemux/ADM_videoFilter/ADM_vidMSharpen.cpp:167
 #: avidemux/ADM_videoFilter/ADM_vidMsmooth.cpp:197
 msgid "_Strength:"
 msgstr "_?????:"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:350
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:348
 msgid "Default Postprocessing"
 msgstr "????????????? ??????????????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:364
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:362
 msgid "_Filter directory:"
 msgstr "????????? _???????:"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:364
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:362
 msgid "Select filter directory"
 msgstr "??????? ????????? ???????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:365
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:363
 msgid "_Load external filters"
 msgstr "_??????? ?????????? ???????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:368
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:366
+#, fuzzy
 msgid "Use _Global GlyphSet"
-msgstr ""
+msgstr "????? ????????? ????????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:369
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:367
 msgid "Gl_yphSet:"
 msgstr "Gl_yphSet:"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:378
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:376
 msgid "Automation"
 msgstr "??????????????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:382
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:380
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp:438
 msgid "Input"
 msgstr "???????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:386
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:384
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp:439
 msgid "Output"
 msgstr "??????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:391
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:394
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:397
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:389
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:392
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:395
 msgid "Audio"
 msgstr "????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:402
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:400
 #: avidemux/gtk_gui.cpp:2004
 msgid "Video"
 msgstr "??????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:410
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:408
 msgid "Threading"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:414
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:412
+#, fuzzy
 msgid "Global GlyphSet"
-msgstr ""
+msgstr "??????? ???????????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:418
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:416
 msgid "External Filters"
 msgstr "????????? ??????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:422
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:420
 msgid "Preferences"
 msgstr "???????????"
 
@@ -2597,7 +2634,7 @@
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_requant.cpp:51
 #, fuzzy
 msgid "Requant Configuration"
-msgstr "??????? Xvid4"
+msgstr "?????? ?????????"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:33
 msgid "VCD"
@@ -2623,22 +2660,22 @@
 msgid "PSP full res (720*480"
 msgstr "PSP ?????? ??????? (720*480"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:53
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:54
 msgid "_Target type:"
 msgstr "_???? ???????????:"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:54
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:55
 msgid "_Source aspect ratio:"
 msgstr "_???????? ??????? ?????:"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:55
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:56
 msgid "_Destination aspect ratio:"
 msgstr "???????? _??????? ??????????:"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:60
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:61
 #, fuzzy
 msgid "Auto Wizard"
-msgstr "???????? ????????"
+msgstr "????? cipher"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:88
 msgid "_Subtitle file:"
@@ -2685,44 +2722,48 @@
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:46
 #: avidemux/ADM_videoFilter/ADM_vidYadif.cpp:178
 msgid "Top field first"
-msgstr ""
+msgstr "????? ?? ????? ?????"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:47
 #: avidemux/ADM_videoFilter/ADM_vidYadif.cpp:177
 msgid "Bottom field first"
-msgstr ""
+msgstr "????? ?? ???? ?????"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:52
 msgid "Bottom field (keep top)"
-msgstr ""
+msgstr "???? ????? (????????? ??? ????)"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:53
 msgid "Top field (keep bottom)"
-msgstr ""
+msgstr "???? ????? (????????? ??? ????)"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:58
+#, fuzzy
 msgid "Cubic interpolation"
-msgstr ""
+msgstr "????????? AHD"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:59
 msgid "Modified ELA"
 msgstr "???????????? ELA"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:60
+#, fuzzy
 msgid "Kernel interpolation"
-msgstr ""
+msgstr "????????? AHD"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:61
 msgid "Modified ELA-2"
 msgstr "???????????? ELA-2"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:66
+#, fuzzy
 msgid "4 fields check"
-msgstr ""
+msgstr "??????? ???????"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:67
+#, fuzzy
 msgid "5 fields check"
-msgstr ""
+msgstr "??????? ???????"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:68
 msgid "4 fields check (no avg)"
@@ -2740,7 +2781,7 @@
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:76
 #, fuzzy
 msgid "Full link"
-msgstr "??????? ?? ???/????:"
+msgstr "????????????? ????????? 1"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:77
 msgid "Y to UV"
@@ -2765,13 +2806,13 @@
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:93
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:419
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:433
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1218
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1213
 msgid "0"
 msgstr "0"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:83
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:793
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:805
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:841
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:852
 msgid "1"
 msgstr "1"
 
@@ -2783,8 +2824,9 @@
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:111
 #: avidemux/ADM_videoFilter/ADM_vidDGbob.cpp:90
 #: avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp:92
+#, fuzzy
 msgid "_Field order:"
-msgstr ""
+msgstr "<b>????? Subpixel</b>:"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:92
 #, fuzzy
@@ -2812,8 +2854,9 @@
 msgstr "????? ??? ch_roma ??? ?? ????? ????????"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:101
+#, fuzzy
 msgid "Try _weave"
-msgstr ""
+msgstr "??????? ???????"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:102
 msgid "_Denoise"
@@ -2844,7 +2887,7 @@
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:110
 #, fuzzy
 msgid "Combe_d threshold:"
-msgstr "??????? ????????"
+msgstr "??????? ????????:"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:111
 msgid "Artefact _protection threshold:"
@@ -2884,21 +2927,22 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:45
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:50
+#, fuzzy
 msgid "The selected vobfile does not exist"
-msgstr ""
+msgstr "? ?????????? ?????????? ??? ???????."
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:55
 msgid "Please select a correct VobSub path/dir"
 msgstr "???????? ??????? ?? ????? ????????/???????? ??? VobSub"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_about.cpp:66
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:273
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:274
 msgid "Avidemux"
 msgstr "Avidemux"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_about.cpp:67
 msgid "? 2001-2007 Mean"
-msgstr ""
+msgstr "? 2001-2007 Mean"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_about.cpp:68
 msgid "Multiplatform video editor"
@@ -3251,6 +3295,350 @@
 "library.  If this is what you want to do, use the GNU Library General\n"
 "Public License instead of this License."
 msgstr ""
+"?? Avidemux ????? ???????? ?????????. ??????? ?? ?? ?????????? ???/? ?? ?? ???????????,\n"
+"??? ???? ????? ??? GNU ??????? ???????? ?????? ?????? 2,\n"
+"???? ???? ??????????? ??? ?? Free Software Foundation.\n"
+"\n"
+"\t\t    GNU GENERAL PUBLIC LICENSE\n"
+"\t\t       Version 2, June 1991\n"
+"\n"
+" Copyright (C) 1989, 1991 Free Software Foundation, Inc.\n"
+"                       51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA\n"
+" Everyone is permitted to copy and distribute verbatim copies\n"
+" of this license document, but changing it is not allowed.\n"
+"\n"
+"\t\t\t    Preamble\n"
+"\n"
+"  The licenses for most software are designed to take away your\n"
+"freedom to share and change it.  By contrast, the GNU General Public\n"
+"License is intended to guarantee your freedom to share and change free\n"
+"software--to make sure the software is free for all its users.  This\n"
+"General Public License applies to most of the Free Software\n"
+"Foundation's software and to any other program whose authors commit to\n"
+"using it.  (Some other Free Software Foundation software is covered by\n"
+"the GNU Library General Public License instead.)  You can apply it to\n"
+"your programs, too.\n"
+"\n"
+"  When we speak of free software, we are referring to freedom, not\n"
+"price.  Our General Public Licenses are designed to make sure that you\n"
+"have the freedom to distribute copies of free software (and charge for\n"
+"this service if you wish), that you receive source code or can get it\n"
+"if you want it, that you can change the software or use pieces of it\n"
+"in new free programs; and that you know you can do these things.\n"
+"\n"
+"  To protect your rights, we need to make restrictions that forbid\n"
+"anyone to deny you these rights or to ask you to surrender the rights.\n"
+"These restrictions translate to certain responsibilities for you if you\n"
+"distribute copies of the software, or if you modify it.\n"
+"\n"
+"  For example, if you distribute copies of such a program, whether\n"
+"gratis or for a fee, you must give the recipients all the rights that\n"
+"you have.  You must make sure that they, too, receive or can get the\n"
+"source code.  And you must show them these terms so they know their\n"
+"rights.\n"
+"\n"
+"  We protect your rights with two steps: (1) copyright the software, and\n"
+"(2) offer you this license which gives you legal permission to copy,\n"
+"distribute and/or modify the software.\n"
+"\n"
+"  Also, for each author's protection and ours, we want to make certain\n"
+"that everyone understands that there is no warranty for this free\n"
+"software.  If the software is modified by someone else and passed on, we\n"
+"want its recipients to know that what they have is not the original, so\n"
+"that any problems introduced by others will not reflect on the original\n"
+"authors' reputations.\n"
+"\n"
+"  Finally, any free program is threatened constantly by software\n"
+"patents.  We wish to avoid the danger that redistributors of a free\n"
+"program will individually obtain patent licenses, in effect making the\n"
+"program proprietary.  To prevent this, we have made it clear that any\n"
+"patent must be licensed for everyone's free use or not licensed at all.\n"
+"\n"
+"  The precise terms and conditions for copying, distribution and\n"
+"modification follow.\n"
+"\n"
+"\t\t    GNU GENERAL PUBLIC LICENSE\n"
+"   TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION\n"
+"\n"
+"  0. This License applies to any program or other work which contains\n"
+"a notice placed by the copyright holder saying it may be distributed\n"
+"under the terms of this General Public License.  The \"Program\", below,\n"
+"refers to any such program or work, and a \"work based on the Program\"\n"
+"means either the Program or any derivative work under copyright law:\n"
+"that is to say, a work containing the Program or a portion of it,\n"
+"either verbatim or with modifications and/or translated into another\n"
+"language.  (Hereinafter, translation is included without limitation in\n"
+"the term \"modification\".)  Each licensee is addressed as \"you\".\n"
+"\n"
+"Activities other than copying, distribution and modification are not\n"
+"covered by this License; they are outside its scope.  The act of\n"
+"running the Program is not restricted, and the output from the Program\n"
+"is covered only if its contents constitute a work based on the\n"
+"Program (independent of having been made by running the Program).\n"
+"Whether that is true depends on what the Program does.\n"
+"\n"
+"  1. You may copy and distribute verbatim copies of the Program's\n"
+"source code as you receive it, in any medium, provided that you\n"
+"conspicuously and appropriately publish on each copy an appropriate\n"
+"copyright notice and disclaimer of warranty; keep intact all the\n"
+"notices that refer to this License and to the absence of any warranty;\n"
+"and give any other recipients of the Program a copy of this License\n"
+"along with the Program.\n"
+"\n"
+"You may charge a fee for the physical act of transferring a copy, and\n"
+"you may at your option offer warranty protection in exchange for a fee.\n"
+"\n"
+"  2. You may modify your copy or copies of the Program or any portion\n"
+"of it, thus forming a work based on the Program, and copy and\n"
+"distribute such modifications or work under the terms of Section 1\n"
+"above, provided that you also meet all of these conditions:\n"
+"\n"
+"    a) You must cause the modified files to carry prominent notices\n"
+"    stating that you changed the files and the date of any change.\n"
+"\n"
+"    b) You must cause any work that you distribute or publish, that in\n"
+"    whole or in part contains or is derived from the Program or any\n"
+"    part thereof, to be licensed as a whole at no charge to all third\n"
+"    parties under the terms of this License.\n"
+"\n"
+"    c) If the modified program normally reads commands interactively\n"
+"    when run, you must cause it, when started running for such\n"
+"    interactive use in the most ordinary way, to print or display an\n"
+"    announcement including an appropriate copyright notice and a\n"
+"    notice that there is no warranty (or else, saying that you provide\n"
+"    a warranty) and that users may redistribute the program under\n"
+"    these conditions, and telling the user how to view a copy of this\n"
+"    License.  (Exception: if the Program itself is interactive but\n"
+"    does not normally print such an announcement, your work based on\n"
+"    the Program is not required to print an announcement.)\n"
+"\n"
+"These requirements apply to the modified work as a whole.  If\n"
+"identifiable sections of that work are not derived from the Program,\n"
+"and can be reasonably considered independent and separate works in\n"
+"themselves, then this License, and its terms, do not apply to those\n"
+"sections when you distribute them as separate works.  But when you\n"
+"distribute the same sections as part of a whole which is a work based\n"
+"on the Program, the distribution of the whole must be on the terms of\n"
+"this License, whose permissions for other licensees extend to the\n"
+"entire whole, and thus to each and every part regardless of who wrote it.\n"
+"\n"
+"Thus, it is not the intent of this section to claim rights or contest\n"
+"your rights to work written entirely by you; rather, the intent is to\n"
+"exercise the right to control the distribution of derivative or\n"
+"collective works based on the Program.\n"
+"\n"
+"In addition, mere aggregation of another work not based on the Program\n"
+"with the Program (or with a work based on the Program) on a volume of\n"
+"a storage or distribution medium does not bring the other work under\n"
+"the scope of this License.\n"
+"\n"
+"  3. You may copy and distribute the Program (or a work based on it,\n"
+"under Section 2) in object code or executable form under the terms of\n"
+"Sections 1 and 2 above provided that you also do one of the following:\n"
+"\n"
+"    a) Accompany it with the complete corresponding machine-readable\n"
+"    source code, which must be distributed under the terms of Sections\n"
+"    1 and 2 above on a medium customarily used for software interchange; or,\n"
+"\n"
+"    b) Accompany it with a written offer, valid for at least three\n"
+"    years, to give any third party, for a charge no more than your\n"
+"    cost of physically performing source distribution, a complete\n"
+"    machine-readable copy of the corresponding source code, to be\n"
+"    distributed under the terms of Sections 1 and 2 above on a medium\n"
+"    customarily used for software interchange; or,\n"
+"\n"
+"    c) Accompany it with the information you received as to the offer\n"
+"    to distribute corresponding source code.  (This alternative is\n"
+"    allowed only for noncommercial distribution and only if you\n"
+"    received the program in object code or executable form with such\n"
+"    an offer, in accord with Subsection b above.)\n"
+"\n"
+"The source code for a work means the preferred form of the work for\n"
+"making modifications to it.  For an executable work, complete source\n"
+"code means all the source code for all modules it contains, plus any\n"
+"associated interface definition files, plus the scripts used to\n"
+"control compilation and installation of the executable.  However, as a\n"
+"special exception, the source code distributed need not include\n"
+"anything that is normally distributed (in either source or binary\n"
+"form) with the major components (compiler, kernel, and so on) of the\n"
+"operating system on which the executable runs, unless that component\n"
+"itself accompanies the executable.\n"
+"\n"
+"If distribution of executable or object code is made by offering\n"
+"access to copy from a designated place, then offering equivalent\n"
+"access to copy the source code from the same place counts as\n"
+"distribution of the source code, even though third parties are not\n"
+"compelled to copy the source along with the object code.\n"
+"\n"
+"  4. You may not copy, modify, sublicense, or distribute the Program\n"
+"except as expressly provided under this License.  Any attempt\n"
+"otherwise to copy, modify, sublicense or distribute the Program is\n"
+"void, and will automatically terminate your rights under this License.\n"
+"However, parties who have received copies, or rights, from you under\n"
+"this License will not have their licenses terminated so long as such\n"
+"parties remain in full compliance.\n"
+"\n"
+"  5. You are not required to accept this License, since you have not\n"
+"signed it.  However, nothing else grants you permission to modify or\n"
+"distribute the Program or its derivative works.  These actions are\n"
+"prohibited by law if you do not accept this License.  Therefore, by\n"
+"modifying or distributing the Program (or any work based on the\n"
+"Program), you indicate your acceptance of this License to do so, and\n"
+"all its terms and conditions for copying, distributing or modifying\n"
+"the Program or works based on it.\n"
+"\n"
+"  6. Each time you redistribute the Program (or any work based on the\n"
+"Program), the recipient automatically receives a license from the\n"
+"original licensor to copy, distribute or modify the Program subject to\n"
+"these terms and conditions.  You may not impose any further\n"
+"restrictions on the recipients' exercise of the rights granted herein.\n"
+"You are not responsible for enforcing compliance by third parties to\n"
+"this License.\n"
+"\n"
+"  7. If, as a consequence of a court judgment or allegation of patent\n"
+"infringement or for any other reason (not limited to patent issues),\n"
+"conditions are imposed on you (whether by court order, agreement or\n"
+"otherwise) that contradict the conditions of this License, they do not\n"
+"excuse you from the conditions of this License.  If you cannot\n"
+"distribute so as to satisfy simultaneously your obligations under this\n"
+"License and any other pertinent obligations, then as a consequence you\n"
+"may not distribute the Program at all.  For example, if a patent\n"
+"license would not permit royalty-free redistribution of the Program by\n"
+"all those who receive copies directly or indirectly through you, then\n"
+"the only way you could satisfy both it and this License would be to\n"
+"refrain entirely from distribution of the Program.\n"
+"\n"
+"If any portion of this section is held invalid or unenforceable under\n"
+"any particular circumstance, the balance of the section is intended to\n"
+"apply and the section as a whole is intended to apply in other\n"
+"circumstances.\n"
+"\n"
+"It is not the purpose of this section to induce you to infringe any\n"
+"patents or other property right claims or to contest validity of any\n"
+"such claims; this section has the sole purpose of protecting the\n"
+"integrity of the free software distribution system, which is\n"
+"implemented by public license practices.  Many people have made\n"
+"generous contributions to the wide range of software distributed\n"
+"through that system in reliance on consistent application of that\n"
+"system; it is up to the author/donor to decide if he or she is willing\n"
+"to distribute software through any other system and a licensee cannot\n"
+"impose that choice.\n"
+"\n"
+"This section is intended to make thoroughly clear what is believed to\n"
+"be a consequence of the rest of this License.\n"
+"\n"
+"  8. If the distribution and/or use of the Program is restricted in\n"
+"certain countries either by patents or by copyrighted interfaces, the\n"
+"original copyright holder who places the Program under this License\n"
+"may add an explicit geographical distribution limitation excluding\n"
+"those countries, so that distribution is permitted only in or among\n"
+"countries not thus excluded.  In such case, this License incorporates\n"
+"the limitation as if written in the body of this License.\n"
+"\n"
+"  9. The Free Software Foundation may publish revised and/or new versions\n"
+"of the General Public License from time to time.  Such new versions will\n"
+"be similar in spirit to the present version, but may differ in detail to\n"
+"address new problems or concerns.\n"
+"\n"
+"Each version is given a distinguishing version number.  If the Program\n"
+"specifies a version number of this License which applies to it and \"any\n"
+"later version\", you have the option of following the terms and conditions\n"
+"either of that version or of any later version published by the Free\n"
+"Software Foundation.  If the Program does not specify a version number of\n"
+"this License, you may choose any version ever published by the Free Software\n"
+"Foundation.\n"
+"\n"
+"  10. If you wish to incorporate parts of the Program into other free\n"
+"programs whose distribution conditions are different, write to the author\n"
+"to ask for permission.  For software which is copyrighted by the Free\n"
+"Software Foundation, write to the Free Software Foundation; we sometimes\n"
+"make exceptions for this.  Our decision will be guided by the two goals\n"
+"of preserving the free status of all derivatives of our free software and\n"
+"of promoting the sharing and reuse of software generally.\n"
+"\n"
+"\t\t\t    NO WARRANTY\n"
+"\n"
+"  11. BECAUSE THE PROGRAM IS LICENSED FREE OF CHARGE, THERE IS NO WARRANTY\n"
+"FOR THE PROGRAM, TO THE EXTENT PERMITTED BY APPLICABLE LAW.  EXCEPT WHEN\n"
+"OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR OTHER PARTIES\n"
+"PROVIDE THE PROGRAM \"AS IS\" WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESSED\n"
+"OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF\n"
+"MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  THE ENTIRE RISK AS\n"
+"TO THE QUALITY AND PERFORMANCE OF THE PROGRAM IS WITH YOU.  SHOULD THE\n"
+"PROGRAM PROVE DEFECTIVE, YOU ASSUME THE COST OF ALL NECESSARY SERVICING,\n"
+"REPAIR OR CORRECTION.\n"
+"\n"
+"  12. IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN WRITING\n"
+"WILL ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MAY MODIFY AND/OR\n"
+"REDISTRIBUTE THE PROGRAM AS PERMITTED ABOVE, BE LIABLE TO YOU FOR DAMAGES,\n"
+"INCLUDING ANY GENERAL, SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES ARISING\n"
+"OUT OF THE USE OR INABILITY TO USE THE PROGRAM (INCLUDING BUT NOT LIMITED\n"
+"TO LOSS OF DATA OR DATA BEING RENDERED INACCURATE OR LOSSES SUSTAINED BY\n"
+"YOU OR THIRD PARTIES OR A FAILURE OF THE PROGRAM TO OPERATE WITH ANY OTHER\n"
+"PROGRAMS), EVEN IF SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE\n"
+"POSSIBILITY OF SUCH DAMAGES.\n"
+"\n"
+"\t\t     END OF TERMS AND CONDITIONS\n"
+"\n"
+"\t    How to Apply These Terms to Your New Programs\n"
+"\n"
+"  If you develop a new program, and you want it to be of the greatest\n"
+"possible use to the public, the best way to achieve this is to make it\n"
+"free software which everyone can redistribute and change under these terms.\n"
+"\n"
+"  To do so, attach the following notices to the program.  It is safest\n"
+"to attach them to the start of each source file to most effectively\n"
+"convey the exclusion of warranty; and each file should have at least\n"
+"the \"copyright\" line and a pointer to where the full notice is found.\n"
+"\n"
+"    <one line to give the program's name and a brief idea of what it does.>\n"
+"    Copyright (C) <year>  <name of author>\n"
+"\n"
+"    This program is free software; you can redistribute it and/or modify\n"
+"    it under the terms of the GNU General Public License as published by\n"
+"    the Free Software Foundation; either version 2 of the License, or\n"
+"    (at your option) any later version.\n"
+"\n"
+"    This program is distributed in the hope that it will be useful,\n"
+"    but WITHOUT ANY WARRANTY; without even the implied warranty of\n"
+"    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n"
+"    GNU General Public License for more details.\n"
+"\n"
+"    You should have received a copy of the GNU General Public License\n"
+"    along with this program; if not, write to the Free Software\n"
+"    Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA\n"
+"\n"
+"\n"
+"Also add information on how to contact you by electronic and paper mail.\n"
+"\n"
+"If the program is interactive, make it output a short notice like this\n"
+"when it starts in an interactive mode:\n"
+"\n"
+"    Gnomovision version 69, Copyright (C) year name of author\n"
+"    Gnomovision comes with ABSOLUTELY NO WARRANTY; for details type `show w'.\n"
+"    This is free software, and you are welcome to redistribute it\n"
+"    under certain conditions; type `show c' for details.\n"
+"\n"
+"The hypothetical commands `show w' and `show c' should show the appropriate\n"
+"parts of the General Public License.  Of course, the commands you use may\n"
+"be called something other than `show w' and `show c'; they could even be\n"
+"mouse-clicks or menu items--whatever suits your program.\n"
+"\n"
+"You should also get your employer (if you work as a programmer) or your\n"
+"school, if any, to sign a \"copyright disclaimer\" for the program, if\n"
+"necessary.  Here is a sample; alter the names:\n"
+"\n"
+"  Yoyodyne, Inc., hereby disclaims all copyright interest in the program\n"
+"  `Gnomovision' (which makes passes at compilers) written by James Hacker.\n"
+"\n"
+"  <signature of Ty Coon>, 1 April 1989\n"
+"  Ty Coon, President of Vice\n"
+"\n"
+"This General Public License does not permit incorporating your program into\n"
+"proprietary programs.  If your program is a subroutine library, you may\n"
+"consider it more useful to permit linking proprietary applications with the\n"
+"library.  If this is what you want to do, use the GNU Library General\n"
+"Public License instead of this License."
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_about.cpp:71
 msgid "http://www.avidemux.org"
@@ -3273,7 +3661,7 @@
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_asharp.cpp:71
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_chromaShift.cpp:67
 msgid "ASHARP"
-msgstr "ASHARP"
+msgstr "ASHARP (???????)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_asharp.cpp:183
 msgid "ASharp by MarcFD"
@@ -3288,8 +3676,9 @@
 msgstr "????? :"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_asharp.cpp:212
+#, fuzzy
 msgid "Block Adaptative :"
-msgstr ""
+msgstr "???????????? DCT"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_asharp.cpp:220
 #, fuzzy
@@ -3308,7 +3697,7 @@
 msgstr "?????????????"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:401
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:996
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:999
 msgid "Calculator"
 msgstr "???????????"
 
@@ -3344,8 +3733,9 @@
 msgstr "_????????????? ??????? (MB):"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:507
+#, fuzzy
 msgid "Output container format"
-msgstr ""
+msgstr "????? ?????? ????????????:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:534
 msgid "Total size"
@@ -3372,7 +3762,7 @@
 msgstr "DVD5"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:559
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:808
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:855
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_threadCount.cpp:87
 msgid "Custom"
 msgstr "?????????????"
@@ -3807,7 +4197,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:51
 msgid "Abort Requested"
-msgstr ""
+msgstr "??????????? ??? ???????"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:51
 msgid "Do you want to abort indexing ?"
@@ -3946,7 +4336,6 @@
 msgstr "???????? ?? ?????? ??????"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs_save.cpp:145
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:545
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_filesel.cpp:90
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_filesel.cpp:244
 msgid "_Browse..."
@@ -3970,7 +4359,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_mpdelogo.cpp:379
 msgid "Mplayer Delogo"
-msgstr ""
+msgstr "MPlayer ????????? ?????????"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_mpdelogo.cpp:397
 msgid "X"
@@ -3995,7 +4384,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:61
 msgid "Mini OCR"
-msgstr ""
+msgstr "????? OCR"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:86
 msgid "0:0:0"
@@ -4076,83 +4465,15 @@
 msgstr ""
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_partial.cpp:167
+#, fuzzy
 msgid "Configure partialized filter"
-msgstr ""
+msgstr "??????? ??? ??????? ??? ????????????????..."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:193
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:269
 #, fuzzy
 msgid "Particle Analysis Configuration"
 msgstr "??????? Xvid4"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:404
-#, fuzzy
-msgid "Particle Detection"
-msgstr "??????? Macroblock:"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:431
-msgid "Mi_nimum area for a particle to be detected:    "
-msgstr ""
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:445
-msgid "Ma_ximum area for a particle to be detected:   "
-msgstr ""
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:463
-msgid "_Left side crop (ignore this many pixels on the left):        "
-msgstr "???????? _????????? ??????? (??????? ???? ????? ??? ????????):"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:477
-msgid "_Right side crop (ignore this many pixels on the right):     "
-msgstr "???????? _?????? ??????? (??????? ???? ????? ??? ?????):"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:491
-msgid "_Top crop (ignore this many pixels on the top):                  "
-msgstr "???????? _???? ??????? (??????? ???? ????? ?????):"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:505
-msgid "_Bottom crop (ignore this many pixels on the bottom):   "
-msgstr "???????? _???? ??????? (??????? ???? ????? ????):"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:523
-msgid "Output _Format:   "
-msgstr "_????? ????????????? ??????:"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:535
-#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:189
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:174
-msgid "_Output File:"
-msgstr "_?????? ??????:"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:553
-msgid "_Camera Number for output file:      "
-msgstr ""
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:567
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1332
-msgid "_Debugging settings (bits):   "
-msgstr "????????? _?????????????? (bits):   "
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:600
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1365
-#, fuzzy
-msgid "Swiss Army Knife output"
-msgstr "??????? Xvid4"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:601
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1366
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:405
-msgid "Final output"
-msgstr "?????? ?????????? ??????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:617
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_preview.cpp:180
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1382
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:418
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp:336
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtersub.cpp:150
-msgid "Preview"
-msgstr "?????????????"
-
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_pause.cpp:93
 msgid "Paused"
 msgstr "?? ?????"
@@ -4176,9 +4497,8 @@
 msgstr "????????"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_pipe.cpp:95
-#, fuzzy
 msgid "Pipe to"
-msgstr "&??????????????? ???? ??? ???????"
+msgstr "?????????? ???"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_pipe.cpp:104
 msgid "Application path/name (/usr/bin/sox...)"
@@ -4189,6 +4509,13 @@
 msgid "Full parameter line"
 msgstr "????? ?????????? ??????? ??????? %1"
 
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_preview.cpp:180
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:542
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp:336
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtersub.cpp:150
+msgid "Preview"
+msgstr "?????????????"
+
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:40
 msgid "No"
 msgstr "???"
@@ -4268,7 +4595,7 @@
 msgstr "????? ??????????:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:311
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1060
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1063
 msgid "<b>Video</b>"
 msgstr "<b>??????</b>"
 
@@ -4277,13 +4604,14 @@
 msgstr ""
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:344
+#, fuzzy
 msgid "Packed Bitstream:"
-msgstr ""
+msgstr "%1 %"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:358
 #, fuzzy
 msgid "Quarter Pixel:"
-msgstr "???????? ?????????:"
+msgstr "??????? ?? ???/????:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:372
 msgid "<b>Extra Video Properties</b>"
@@ -4314,7 +4642,7 @@
 msgstr "?????????? ?????? bit:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:489
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1100
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1103
 msgid "<b>Audio</b>"
 msgstr "<b>????</b>"
 
@@ -4383,174 +4711,47 @@
 msgid "Font Size:"
 msgstr "??????? ??????????????:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:405
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:381
-#, fuzzy
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:505
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:388
 msgid "Swiss Army Knife Configuration"
-msgstr "??????? Xvid4"
+msgstr "??????? ????????? ??????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:925
-msgid "Select _Operation on each pixel P and input A:   "
-msgstr ""
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:937
-msgid "Input _Type:   "
-msgstr "????? ????????? ???????:   "
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:956
-msgid "Input _File (convolution kernel):   "
-msgstr ""
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:960
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:975
-#, fuzzy
-msgid "Select Convolution Kernel File"
-msgstr "??????? ???????  ?????????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:971
-msgid "Input _File (image file):   "
-msgstr "?????? _????????? (?????? ???????):"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:997
-msgid "First, _add to each float pixel value:   "
-msgstr ""
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1011
-msgid "Then, _multiply each float pixel value by:   "
-msgstr ""
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1025
-msgid "Mi_nimum loaded pixel value (will be scaled to 0):"
-msgstr ""
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1051
-msgid "Ma_ximum loaded pixel value (will be scaled to 255):"
-msgstr ""
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1073
-msgid "Pixel Value Scaling as Image File is Loaded"
-msgstr ""
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1085
-msgid "Input _Constant:      "
-msgstr ""
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1102
-msgid "Memory constant _alpha:   "
-msgstr ""
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1112
-#, fuzzy
-msgid " = 1 / "
-msgstr "P' = P / A"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1130
-msgid "_Initial average (\"head start\") is "
-msgstr ""
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1137
-msgid "straight"
-msgstr "??????????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1138
-#, fuzzy
-msgid "rolling"
-msgstr "???????????? ???????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1140
-msgid " average"
-msgstr " ????? ????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1148
-msgid "      of frames "
-msgstr "      ??? ????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1158
-msgid " through "
-msgstr " ????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1176
-msgid "Integer _Bias (will be added to result of selected operation):"
-msgstr ""
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1216
-msgid "First, _add to each pixel result value:   "
-msgstr ""
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1230
-msgid "Then, _multiply each pixel result value by:   "
-msgstr ""
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1244
-msgid "Mi_nimum result value (will be scaled to 0):"
-msgstr ""
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1270
-msgid "Ma_ximum result value (will be scaled to 255):"
-msgstr ""
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1292
-msgid "Pixel Value Scaling on Result of Selected Operation"
-msgstr ""
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1301
-msgid "(description of current config will go here)"
-msgstr ""
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1318
-msgid "_Histogram every N frames (0 to disable):   "
-msgstr "_?????????? ???? ? ???? (0 ??? ??????????????):"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1390
-msgid "Enable Preview"
-msgstr "???????????? ??????????????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:128
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:200
 #: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:163
 msgid "Threshold Configuration"
 msgstr "??????? ?????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:294
-#, fuzzy
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:423
 msgid "Minimum value to be in-range:"
-msgstr "_???????? ????, ????? ??? ?????:"
+msgstr "???????? ????, ????? ??? ?????:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:327
-#, fuzzy
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:456
 msgid "Maximum value to be in-range:"
-msgstr "_??????? ????, ????? ??? ?????:"
+msgstr "??????? ????, ????? ??? ?????:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:358
-#, fuzzy
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:487
 msgid "Output values:   "
-msgstr "????? ????????????? ??????:"
+msgstr "????? ????????????? ??????:   "
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:365
-#, fuzzy
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:494
 msgid "In-range values go black, out-of-range values go white"
 msgstr "?? ????? ??? ????? ????? ???????? ??????, ?? ????? ??? ????? ???????? ??????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:366
-#, fuzzy
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:495
 msgid "In-range values go white, out-of-range values go black"
 msgstr "?? ????? ??? ????? ????? ???????? ??????, ?? ????? ??? ????? ???????? ??????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:372
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:501
 msgid "Debugging settings (bits):   "
 msgstr "????????? ?????????????? (bits):   "
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:404
-#, fuzzy
-msgid "Threshold output"
-msgstr "??????? :"
-
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vcodec.cpp:104
 msgid "Video encoder"
 msgstr "????????????? ??????"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vcodec.cpp:118
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1080
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1120
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1083
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1123
 msgid "Configure"
 msgstr "???????"
 
@@ -4598,609 +4799,613 @@
 msgid "<b>Time remaining:</b>"
 msgstr "<b>?????? ??? ????????:</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:560
-msgid "X264 configuration"
-msgstr "??????? X264"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:110
+#, fuzzy
+msgid "Hadamard Exhaustive Search"
+msgstr "?????? ??????????:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:575
-msgid "Encoding Mode:"
-msgstr "????????? ??????????? ?????????????:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:596
+msgid "x264 Configuration"
+msgstr "??????? x264"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:587
-msgid "Entry input for target file size or bitrate"
-msgstr ""
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:617
+msgid "Encoding Mode"
+msgstr "????????? ??????????? ?????????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:589
-msgid "Quantizer (0-51):"
-msgstr "?????????? ???????? (0-51):"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:624
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:480
+msgid "Quantizer"
+msgstr "?????????? ???????? (Quantizer)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:602
-msgid "Constant Quantizer - Each frame will the same compression. Low numbers equal higher quality while high numbers equal lower quality"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:631
+msgid "Target Size"
+msgstr "??????? ???????????"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:644
+msgid "Constant Quantizer - Each frame will have the same compression. Low numbers equal higher quality while high numbers equal lower quality."
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:612
-msgid "Target Size:"
-msgstr "??????? ???????????:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:652
+msgid "Target bitrate or file size"
+msgstr "?????? bit ??????????? ? ??????? ???????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:624
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:660
 msgid "Single Pass - Quality Quantizer (Average)"
 msgstr "????? ?????????? - "
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:625
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:661
 msgid "Single Pass - Quality Quantizer (Constant)"
 msgstr "????? ?????????? - "
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:626
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:662
 msgid "Single Pass - Bitrate (Average)"
 msgstr "????? ?????????? - ?????? bit (????? ????)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:627
-msgid "Two Pass - File Size"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:663
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:768
+msgid "Two Pass - Video Size"
 msgstr "??? ????????? - ??????? ???????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:628
-msgid "Two Pass - Average bitrate"
-msgstr "??? ????????? - ????? ???? ?????? bit"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:664
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:772
+msgid "Two Pass - Average Bitrate"
+msgstr "??? ????????? - ????? ???? ?????? Bit"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:630
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:666
 msgid "Bitrate"
 msgstr "?????? bit"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:656
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:699
 #, fuzzy
-msgid "Partition decision"
-msgstr "??????? Macroblock:"
+msgid "Partition Decision"
+msgstr "? ??????? ???; "
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:663
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:706
 msgid "Method"
 msgstr "???????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:675
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:718
 msgid "1  - Extremely Low (Fastest)"
 msgstr "1  - ?????????? ?????? (???????????)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:676
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:719
 msgid "2  - Very Low"
 msgstr "2 - ???? ??????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:677
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:720
 msgid "3  - Low"
 msgstr "3- ??????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:678
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:721
 msgid "4  - Medium"
 msgstr "4 - ??????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:679
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:722
 msgid "5  - High (Default)"
 msgstr "5  - ????? (?????????????)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:680
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:723
 msgid "6  - Very High"
 msgstr "6- ???? ?????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:681
-msgid "6B - Very High (RDO on Bframes)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:724
+msgid "6B - Very High (RDO on B-frames)"
 msgstr "6B - ???? ????? (RDO ?? Bframes)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:682
-msgid "7 - Ultra High"
-msgstr "7- ?????????? ?????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:725
+msgid "7  - Ultra High"
+msgstr "7- ?????????? ?????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:683
-msgid "7B - Ultra High (RDO on Bframes)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:726
+msgid "7B - Ultra High (RDO on B-frames)"
 msgstr "7B - ?????????? ????? (RDO ?? Bframes)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:690
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:733
 #, fuzzy
-msgid "Diamond search"
+msgid "Diamond Search"
 msgstr "?????? ??????????:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:691
-msgid "Hexagonal search"
-msgstr ""
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:734
+#, fuzzy
+msgid "Hexagonal Search"
+msgstr "?????? ??????????:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:692
-msgid "Uneven multi hexagon"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:735
+msgid "Uneven Multi-hexagon"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:693
-msgid "Exhaustive search"
-msgstr ""
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:736
+#, fuzzy
+msgid "Exhaustive Search"
+msgstr "?????? ??????????:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:705
-msgid "Set how many previous frames can be referenced by a P/B-frame. Numbers above 5 do not seem to improve quality greatly. Numbers are 3 to 5 are recommended"
-msgstr ""
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:744
+#, fuzzy
+msgid "Max. Ref. Frames"
+msgstr "??????? ???? QP ?????? ????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:708
-msgid "Max. Ref. frames"
-msgstr ""
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:715
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:751
 msgid "Range"
 msgstr "?????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:728
-msgid "Define how many pixels are analysised. The higher the range the more accurate the analysis but the slower the encoding time"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:764
+msgid "Define how many pixels are analysed for motion estimation. The higher the range the more accurate the analysis but the slower the encoding time."
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:731
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:773
+msgid "Set how many previous frames can be referenced by a P/B-frame. Numbers above 5 do not seem to improve quality greatly. Numbers 3 to 5 are recommended."
+msgstr ""
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:776
 #, fuzzy
 msgid "Chroma ME"
-msgstr "??????? ????????:"
+msgstr "?????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:736
-msgid "Uses chroma (color) components for motion for compression and helps the quality"
-msgstr ""
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:781
+#, fuzzy
+msgid "Use color information for detecting motion to improve quality"
+msgstr "????????????? ??????????? chroma ??? ??? ?????????? ??? ???????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:739
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:784
+#, fuzzy
 msgid "Mixed Refs"
-msgstr ""
+msgstr "%1 (CD ??????? ???????)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:744
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:789
 msgid "Calculate referencing individually based on each partition"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:750
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:795
+#, fuzzy
 msgid "Fast P-Skip"
-msgstr ""
+msgstr "????????? pager"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:753
-msgid "Uncheck to enable fast p-skip"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:798
+msgid "Early skip detection on P-frames to speedup encoding. Quality will be slightly reduced."
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:756
-msgid "DCT decimate"
-msgstr ""
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:760
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:801
 #, fuzzy
-msgid "Interlace"
-msgstr "??????? ??????????"
+msgid "DCT Decimate"
+msgstr "JPEG DCT"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:763
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:806
 #, fuzzy
-msgid "Encode interlaced"
+msgid "Interlaced"
 msgstr "??????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:765
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:809
+#, fuzzy
+msgid "Input video is interlaced"
+msgstr "?? ?????? ????????????"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:811
 msgid "<b>Motion Estimation</b>"
 msgstr "<b>???????? ???????</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:792
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:804
-msgid "Enforce the size of a decoded pixel decoded to a certain value. Leave this at 1:1 for non-anamorphic video"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:840
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:851
+msgid "Enforce the size of a decoded pixel decoded to a certain value. Set this to 1:1 for non-anamorphic video."
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:796
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:844
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1051
 msgid ":"
 msgstr ":"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:813
-msgid "Set a custom aspect ratio. Default 1:1 is recommended for most video."
-msgstr ""
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:860
+msgid "Set a custom aspect ratio. The default 1:1 is recommended for most video."
+msgstr "????? ??? ????????????? ???????? ???????. ??? ?? ??????????? ?????? ?????????? ? ????????????? 1:1 ."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:818
-msgid "Predefined Aspect Ratios"
-msgstr ""
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:865
+msgid "Predefined Aspect Ratio"
+msgstr "???-?????????????? ???????? ??????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:823
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:870
 msgid "Set a common predefined aspect ratio"
-msgstr ""
+msgstr "????? ??? ?????, ???-?????????????? ???????? ??????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:827
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1040
-msgid "As input"
-msgstr "???? ?? ???????? ???????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:874
+msgid "As Input"
+msgstr "?? ???????? ???????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:832
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1043
-msgid "Get PAR from input video file"
-msgstr ""
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:895
+msgid "<b>Sample Aspect Ratio</b>"
+msgstr "<b>?????????  ?????????? ?????????</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:856
-msgid "<b>Sample Aspect Ratio (A/R)</b>"
-msgstr "<b>????????? ??????? ????????? (A/R)</b>"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:878
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:922
 msgid "CABAC"
 msgstr "CABAC"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:881
-msgid "Lossless compression method which usually improves the bitrate usage by 15% (especially on high bitrate). Helps the quality a lot but is slower. "
-msgstr "??????? ?????????, ????? ??????? ?????????. ??????? ????????? ?? ????? ??? ?????? bit ???? 15% (?????? ?? ??????? ??????? bit). ????????? ????????? ??? ????????, ???? ????? ??? ????."
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:925
+msgid "Lossless compression technique that reduces bitrate by approximately 10%. Increases encoding and decoding time."
+msgstr "??????? ????????? ????? ??????? ????????? ??? ??????? ?? ????? bit, ???? ??????? 10%. ???????, ????, ? ????? ????????????? ??? ????????????????."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:884
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:932
 #, fuzzy
 msgid "Trellis"
 msgstr "Trellis quantization"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:893
-msgid "Use rate distortion quantization to find optimal encoding for each block. Level 0 equals disabled, level 1 equals normal and level 2 equals high"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:941
+msgid "Use Trellis Rate Distortion Optimisation to find optimal encoding for each block. Level 0 equals disabled, level 1 equals normal and level 2 equals high."
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:900
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:948
 msgid "Noise Reduction"
 msgstr "?????? ???????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:909
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:957
 msgid "Set the amount of noise reduction"
 msgstr "????? ?? ??????? ??? ??????? ???????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:916
-msgid "Deblocking Filter :"
-msgstr ""
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:964
+#, fuzzy
+msgid "Deblocking Filter"
+msgstr "??????????? ???????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:919
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:967
 msgid "Enable in-loop deblocking to filter the video"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:932
-msgid "Set the amount of blurring to use for block edges when they are found"
-msgstr ""
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:984
+#, fuzzy
+msgid "Strength"
+msgstr "_?????:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:941
-msgid "Define the level for when deblocking is applied"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:998
+msgid "Threshold for block detection. Positive values will detect more blocks, negative values will detect less."
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:944
-msgid "<i>Threshold</i>"
-msgstr "<i>???????</i>"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1007
+msgid "Positive values will soften the video, negative values will sharpen"
+msgstr "??????? ????? ?? ??????????? ?? ??????, ?? ????????? ?? ?? ???????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:952
-msgid "<i>Strength</i>"
-msgstr "<i>?????</i>"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:960
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1010
 msgid "<b>Misc. Options</b>"
 msgstr "<b>???????? ????????</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:965
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1015
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1066
 msgid "Motion & Misc"
 msgstr "?????? ??? ???????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:986
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1041
 msgid "8x8 Transform"
-msgstr ""
+msgstr "??????????????? 8x8"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:989
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1044
 msgid "General block breakdown transformation"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:992
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1047
 msgid "8x8, 8x16 and 16x8 P-frame search"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:995
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1050
 msgid "Improve the P-frame quality"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:998
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1053
 msgid "8x8, 8x16 and 16x8 B-frame search"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1001
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1056
 msgid "Improve the B-frame quality"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1004
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1059
 msgid "4x4, 4x8 and 8x4 P-frame search"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1007
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1062
 msgid "Further improve the P-frame quality"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1009
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1064
 msgid "8x8 Intra search"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1012
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1067
 msgid "Enable DCT Intra block search to improve quality"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1015
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1070
 msgid "4x4 Intra search"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1018
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1073
 msgid "Further enable DCT Intra block search to improve quality"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1021
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1076
+#, fuzzy
 msgid "<b>Partition Macroblocks</b>"
-msgstr ""
+msgstr "??????????? ??? ??? ???????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1043
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1100
 #, fuzzy
 msgid "Bias"
 msgstr "?????? ???????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1056
-msgid "Increase / decrease probability for how often B-frames are used. Will not violate the maximum consecutive frame limit"
-msgstr ""
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1107
+#, fuzzy
+msgid "Max Consecutive"
+msgstr "?????????? ????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1065
-msgid "Set the maximum number of consecutive B-frames. This defines how many duplicate frames can be droped. Numbers 2 to 5 are recommended. This greatly improves the use of bitrate and quality"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1120
+msgid "Increase / decrease probability for how often B-frames are used. It will not violate the maximum consecutive frame limit."
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1068
-msgid "Max Consecutive"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1129
+msgid "Set the maximum number of consecutive B-frames. This defines how many duplicate frames can be dropped. Numbers 2 to 5 are recommended. This greatly improves the use of bitrate and quality."
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1079
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1143
 msgid "Bidirectional ME"
-msgstr ""
+msgstr "ME ?????? ???????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1084
-msgid "Jointly optimize both Motion Vector's in B-frames. This will improve quality but take more time for encoding"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1148
+msgid "Optimise both motion vectors in B-frames. This will improve quality but take more time for encoding."
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1086
-msgid "Weighted biprediction"
-msgstr ""
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1150
+#, fuzzy
+msgid "Weighted Biprediction"
+msgstr "? ?????????? ?????????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1091
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1155
 msgid "Enables weighting of B-frames to help fades"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1094
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1158
 msgid "Adaptative DCT"
 msgstr "???????????? DCT"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1099
-msgid "Use fewer B-frame if needed. This is always recommended. If not enabled, the codec will always use the maximum number of consecutive B-frames"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1163
+msgid "Use fewer B-frames if needed. This is always recommended. If not enabled, the codec will always use the maximum number of consecutive B-frames."
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1102
-msgid "Use as reference"
-msgstr "????? ?? ???????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1166
+msgid "Use as Reference"
+msgstr "????? ?? ???????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1107
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1171
 msgid "Allow B-frames to make references non-linearly to another B-frame (instead of creating a duplicate copy)"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1113
-msgid "B-Frame Direct Mode:  "
-msgstr ""
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1177
+#, fuzzy
+msgid "B-Frame Direct Mode"
+msgstr "?????? ????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1121
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1185
 msgid "Auto"
 msgstr "????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1122
-#, fuzzy
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1186
 msgid "Temporal"
-msgstr "temporal"
+msgstr "????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1123
-#, fuzzy
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1187
 msgid "Spatial"
-msgstr "spatial"
+msgstr "???????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1126
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1190
 #, fuzzy
 msgid "<b>B-Frames</b>"
 msgstr "????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1131
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1195
 #, fuzzy
 msgid "Partitions & Frames"
-msgstr "??????????? ????"
+msgstr "??????? ???????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1159
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1230
 msgid "Set how much \"bitrate bonus\" a keyframe can get"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1162
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1239
+msgid "Set how much bitrate is deducted from a B-frame as compared to the previous P-frame"
+msgstr ""
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1248
+msgid "Define how much the bitrate can fluctuate over the entire video. 0% results in a constant bitrate stream, while 100% results in a pure quality based bitrate stream."
+msgstr ""
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1251
 #, fuzzy
-msgid "Keyframe boost (%)"
+msgid "Keyframe Boost (%)"
 msgstr "???????? (dB):"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1169
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1258
 #, fuzzy
-msgid "B-frame reduction (%)"
-msgstr "???????? (dB):"
+msgid "B-frame Reduction (%)"
+msgstr "?????? ????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1176
-msgid "Bitrate variability (%)"
-msgstr "????????????? ?????? bit (%)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1265
+msgid "Bitrate Variability (%)"
+msgstr "????????????? ?????? Bit (%)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1189
-msgid "Set how much bitrate is deducted from a B-frame as compared to the previous P-frame"
-msgstr ""
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1198
-msgid "Define how much the bitrate can fluctuate over the entire video. 0% results in a constant bitrate stream, while 100% results in a pure quality based bitrate stream"
-msgstr ""
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1201
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1272
 msgid "<b>Bitrate</b>"
 msgstr "<b>?????? bit</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1219
-msgid "Min Qp"
-msgstr "???????? Qp"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1292
+msgid "Min QP"
+msgstr "???????? QP"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1226
-msgid "Max Qp"
-msgstr "??????? Qp"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1299
+msgid "Max QP"
+msgstr "??????? QP"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1233
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1306
 msgid "Max QP Step"
 msgstr "??????? ???? QP"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1247
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1320
 msgid "Enforce a minimum quantizer level"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1256
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1329
 msgid "Enforce a maximum quantizer level"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1265
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1338
 msgid "Define how much the quantizer rate can change between two consecutive frames"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1268
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1341
 #, fuzzy
 msgid "<b>Quantization Limits</b>"
-msgstr "????? ???????????:"
+msgstr "??????? ????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1286
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1368
+msgid "Increase / decrease sensitivity for detecting scene changes. Improves I-frame usage and quality."
+msgstr ""
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1371
 msgid "Scene Cut Threshold"
 msgstr "??????? ???????? ??????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1300
-msgid "Increase / decrease sensitivity for detecting Scene Changes to compensate for. Improves I-frame usage and helps quality"
-msgstr ""
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1378
+msgid "Min IDR Frame Interval"
+msgstr "???????? ???????????? ??? ???? IDR"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1303
-#, fuzzy
-msgid "Min IDR frame interval"
-msgstr "??????? ???????????? ?????? ??? ????????? ??? ????????:"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1316
-msgid "Set minimum frame interval between IDR frames. Defines the minimum amount a frame can be reused and referenced by other frames before a new clean one is established"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1391
+msgid "Set minimum frame interval between IDR frames. Defines the minimum amount a frame can be reused and referenced by other frames before a new IDR frame is established."
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1325
-msgid "Set maximum frame interval between IDR frames. Defines the maximum amount a frame can be reused and referenced by other frames before a new clean one is established"
-msgstr ""
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1400
+msgid "Set maximum frame interval between IDR frames. Defines the maximum amount a frame can be reused and referenced by other frames before a new IDR frame is established."
+msgstr "????? ?? ??????? ???????????? ????, ??????? ??? ???? IDR. ???????????? ?? ??????? ???????? ??????????????????? ??? ?????? ?? ???????? ???? ????, ??? ?? ???? ????, ???? ???????????? ??? ??? ???? IDR."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1328
-#, fuzzy
-msgid "Max IDR frame interval"
-msgstr "??????? ???????????? ?????? ??? ????????? ??? ????????:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1403
+msgid "Max IDR Frame Interval"
+msgstr "??????? ???????????? ??? ???? IDR"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1335
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1410
 msgid "<b>More Rate Settings</b>"
 msgstr "<b>???????????? ???????? ??????</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1353
-msgid "VBV buffer size"
-msgstr "??????? ???????????????? (buffer) VBV"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1430
+msgid "VBV Buffer Size"
+msgstr "??????? ???????????????? (buffer) VBV"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1360
-msgid "Initial VBV buffer (%)"
-msgstr "?????? ??????????????? (buffer) VBV (%)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1437
+msgid "Initial VBV Buffer (%)"
+msgstr "?????? ??????????????? (buffer) VBV (%)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1367
-msgid "Maximum local bitrate"
-msgstr "???????? ??????? ?????? bit"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1444
+msgid "Maximum Local Bitrate"
+msgstr "???????? ??????? ?????? Bit"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1398
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1475
 msgid "<b>Video Buffer Verifier</b>"
 msgstr "<b>???????????? ???????????????? (Buffer) ??????</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1430
-msgid "Allowed variance of average bitrate. Lower values mean less variance. Higher values mean more variance."
-msgstr "? ???????????? ????????????? ??? ?????? bit. ?????????? ????? ???????????? ????????? ?????????????. ??????????? ????? ????????? ??????????? ?????????????."
-
 # ???
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1433
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1508
 msgid "Bitrate Variance"
 msgstr "??????? ?????? bit"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1446
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1521
+msgid "Allowed variance of average bitrate. Lower values mean less variance. Higher values mean more variance."
+msgstr "? ???????????? ????????????? ??? ?????? bit. ?????????? ????? ???????????? ????????? ?????????????. ??????????? ????? ????????? ??????????? ?????????????."
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1530
 msgid "Allowed variance of average quantizer or quality. Lower values mean less variance. Higher values mean more variance. Note that 0 means constant quality while 1 means constant fluctuation. Recommended 0.6."
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1455
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1539
 msgid "Reduced fluctuations in Quantizer (before curve compression)"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1464
-msgid "Reduce fluctuations in QP (after curve compression)"
-msgstr ""
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1467
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1550
 #, fuzzy
 msgid "Quantizer Compression"
 msgstr "??????? ?????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1474
-msgid "Temp. Blur of est Frame Complexity"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1557
+msgid "Temp. Blur of Est. Frame Complexity"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1481
-msgid "Temp. Blur of Quant after CC"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1564
+msgid "Temp. Blur of Quant. after CC"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1488
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1571
 msgid "<b>Misc</b>"
 msgstr "<b>???????</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1512
-msgid "Quantization factors used between I- and P- frames"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1597
+msgid "Quantization factors used between I and P-frames"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1521
-msgid "Quantization used between P- and B- frames"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1606
+msgid "Quantization used between P and B-frames"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1530
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1615
 msgid "Quantization difference between chroma (color) and luma (brightness)"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1533
-msgid "Factor between I and P frame Quants"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1618
+msgid "Factor between I and P-frame Quants"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1540
-msgid "Factor between P and B frame Quants"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1625
+msgid "Factor between P and B-frame Quants"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1547
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1632
 msgid "Chroma QP Offset"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1554
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1639
 #, fuzzy
 msgid "<b>Quantizers</b>"
 msgstr "???????? ?????????:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1572
-msgid "Custom matrix"
-msgstr "????????????? ???????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1657
+msgid "Flat Matrix"
+msgstr "??????? ???????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1581
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1664
+msgid "JVT Matrix"
+msgstr "??????? JVT"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1674
+msgid "Custom Matrix"
+msgstr "????????????? ???????"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1684
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1128
 msgid "Open CQM file"
 msgstr "??????? ??????? CQM"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1587
-msgid "JVT matrix"
-msgstr "??????? JVT"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1595
-msgid "Flat matrix"
-msgstr "??????? ???????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1604
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1692
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1136
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1568
 msgid "Edit Custom Matrix"
 msgstr "??????????? ?????????????? ????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1609
-msgid "Edit a loaded custom quantization matrix file"
-msgstr ""
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1695
+#, fuzzy
+msgid "Edit loaded custom quantization matrix file"
+msgstr "?????? ??? ??????? ??? ?????????????? ??????? ????????."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1617
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1697
 #, fuzzy
 msgid "<b>Quantization Matrices</b>"
-msgstr "????? ???????????:"
+msgstr "Trellis quantization"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1622
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1702
 msgid "More"
 msgstr "???????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1630
-msgid "Defaults"
-msgstr "??????????????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1710
+msgid "_Defaults"
+msgstr "_??????????????"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:237
 msgid "Xvid Encoder"
@@ -5292,10 +5497,6 @@
 msgid "Max P Frame Qzer"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:480
-msgid "Quantizer"
-msgstr "?????????? ???????? (Quantizer)"
-
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:485
 msgid "Not Yet!"
 msgstr "??? ?????!"
@@ -5338,8 +5539,8 @@
 msgstr "?????? bit ??????????? (kb/s):"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:362
-msgid "Target size (MBytes):"
-msgstr "??????? ??????????? (MBytes):"
+msgid "Target video size (MB):"
+msgstr "??????? ??????????? ?????? (MB):"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:479
 msgid "Select Custom Matrix File to write"
@@ -5374,25 +5575,16 @@
 msgstr "??????? ???????????? 1 ? 2 ??????????"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:760
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:123
-msgid "Single pass - bitrate"
-msgstr "???? ??????? - ?????? bit"
+msgid "Single Pass - Bitrate"
+msgstr "???? ??????? - ?????? Bit"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:764
-msgid "Single pass - quantizer"
-msgstr "???? ??????? - ?????????? ????????"
+msgid "Single Pass - Quantizer"
+msgstr "???? ??????? - ?????????? ???????? (Quantizer)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:768
-msgid "Two pass, final size"
-msgstr "??? ?????????, ?????? ???????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:772
-msgid "Two pass, average bitrate"
-msgstr "??? ?????????, ????? ???? ?????? bit"
-
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:776
-msgid "Same Qz as input"
-msgstr ""
+msgid "Same Quantizer as Input"
+msgstr "????? ?????????? ???????? (Quantizer) ???? ?? ???????? ???????"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:785
 msgid "Target video bitrate"
@@ -5407,9 +5599,8 @@
 msgstr "????????? ??????????? ?????????? ?????? bit"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:806
-#, fuzzy
 msgid "_Interlaced"
-msgstr "??????????"
+msgstr "_??????????"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:809
 msgid "Enables interlaced frame support - use only if your source contains interlacing artifacts (i.e. fields instead of progressive frames)"
@@ -5450,7 +5641,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:839
 msgid "Packed bitstream"
-msgstr ""
+msgstr "????????????? ??? ?????????"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:842
 msgid "Enables Divx like packed vop, DO NOT SET, it is ugly"
@@ -5566,7 +5757,7 @@
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:999
 #, fuzzy
 msgid "Number of B-frames:"
-msgstr "??????? ???? ??? ?? G.711 "
+msgstr "??????? ????????:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1007
 msgid "Maximum number of sequential B-frames (when set to 0, the original I/P encoder is used)"
@@ -5592,6 +5783,14 @@
 msgid "Produces nicer-looking B-frames"
 msgstr ""
 
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1040
+msgid "As input"
+msgstr "???? ?? ???????? ???????"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1043
+msgid "Get PAR from input video file"
+msgstr ""
+
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1049
 msgid "Pixel Width"
 msgstr "?????? ?? ??????????????"
@@ -5633,16 +5832,19 @@
 msgstr "_??????? ?????????????? ????????"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1153
+#, fuzzy
 msgid "I-frame quantizer - Min:"
-msgstr ""
+msgstr "???????? ?????????? ???????? - ???? ???? ?? ??????????? ?? ????"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1158
+#, fuzzy
 msgid "P-frame quantizer - Min:"
-msgstr ""
+msgstr "???????? ?????????? ???????? - ???? ???? ?? ??????????? ?? ????"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1163
+#, fuzzy
 msgid "B-frame quantizer - Min:"
-msgstr ""
+msgstr "???????? ?????????? ???????? - ???? ???? ?? ??????????? ?? ????"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1176
 msgid "Minimum quantizer allowed for I-frames"
@@ -5692,11 +5894,11 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1283
 msgid "Max overflow improvement (%):"
-msgstr ""
+msgstr "???????? ???????? ???????????? (%):"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1288
 msgid "Max overflow degradation (%):"
-msgstr ""
+msgstr "????????? ???????? ???????????? (%):"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1300
 #, c-format
@@ -5733,7 +5935,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1350
 msgid "Overflow control strength (%):"
-msgstr ""
+msgstr "?????? ??????? ???????????? (%):"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1362
 msgid "The higher this value, the more bits get taken from frames larger than the average size, and redistributed to others"
@@ -5756,12 +5958,14 @@
 msgstr "??????? ???????"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1591
+#, fuzzy
 msgid "<b>Intra Matrix</b>"
-msgstr ""
+msgstr "???????????? Matrix"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1609
+#, fuzzy
 msgid "<b>Inter Matrix</b>"
-msgstr ""
+msgstr "???????????? Matrix"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_color.cpp:71
 msgid "Select Color"
@@ -5771,6 +5975,10 @@
 msgid "_Encoding mode:"
 msgstr "_????????? ??????????? ?????????????:"
 
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:123
+msgid "Single pass - bitrate"
+msgstr "???? ??????? - ?????? bit"
+
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:125
 msgid "Single pass - constant quality"
 msgstr "????? ?????????? - ??????? ????????"
@@ -5797,9 +6005,8 @@
 msgstr "_?????????? ???????? (Quantizer):"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:278
-#, fuzzy
 msgid "A_vg Quantizer:"
-msgstr "FFmpeg H263"
+msgstr "??_??? ?????????? ???????? (Quantizer):"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:283
 msgid "_Video size (MB):"
@@ -5841,9 +6048,8 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filterlist.cpp:123
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:285
-#, fuzzy
 msgid "Interlacing"
-msgstr "??????????"
+msgstr "?????"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filterlist.cpp:148
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:309
@@ -6042,508 +6248,507 @@
 msgid "Frame:%c(%02d)"
 msgstr "????:%c(%02d)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:297
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:298
 msgid "_Open..."
 msgstr "????_???..."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:308
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:309
 msgid "_Append..."
 msgstr "_????????..."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:319
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:320
 msgid "_Save"
 msgstr "_??????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:330
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:331
 msgid "Save _Video..."
 msgstr "?????????? _??????..."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:342
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:343
 msgid "Save _BMP Image..."
 msgstr "?????????? ??????? _BMP..."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:346
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:347
 msgid "Save _JPEG Image..."
 msgstr "?????????? ??????? _JPEG..."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:350
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:351
 msgid "Save _Selection as JPEG Images..."
 msgstr "?????????? ??? _???????? ?? ??????? JPEG.."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:363
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:364
 msgid "Save _Project"
 msgstr "?????????? _????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:371
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:372
 msgid "Save P_roject As..."
 msgstr "?????????? _???????? ??..."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:379
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:380
 msgid "_Load/Run Project..."
 msgstr "_???????/???????? ????????..."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:387
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:388
 msgid "A_dd to Joblist..."
 msgstr "_???????? ??? ????? ???????????..."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:391
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:392
 msgid "Show _Joblist"
 msgstr "??????? ??? ?????? ???????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:403
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:404
 msgid "Co_nnect to avsproxy"
 msgstr "_??????? ??? avsproxy"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:412
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:413
 msgid "Proper_ties"
 msgstr "????_?????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:423
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:424
 msgid "AVI _Muxer Options"
-msgstr ""
+msgstr "???????? AVI _Muxer"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:432
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:433
 msgid "_Quit"
 msgstr "_??????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:443
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:444
 msgid "_Edit"
 msgstr "_???????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:450
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:451
 msgid "_Reset Edits"
 msgstr "_????????? ????????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:463
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:464
 msgid "Cu_t"
 msgstr "?????_??"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:474
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:475
 msgid "_Copy"
 msgstr "???????_??"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:485
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:486
 msgid "_Paste"
 msgstr "???_???????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:496
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:497
 msgid "_Delete"
 msgstr "_????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:512
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:513
 msgid "Set Marker _A"
 msgstr "??????? ?????? _?"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:519
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:520
 msgid "Set Marker _B"
 msgstr "??????? ?????? _?"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:531
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:532
 msgid "Pre_ferences"
 msgstr "?????_??????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:539
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:540
 msgid "_View"
 msgstr "_???????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:546
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:547
 msgid "_Main Toolbar"
 msgstr "????? ?????? ?????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:551
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:552
 msgid "_A/V Sidebar"
 msgstr "_???????? ????? A/V"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:561
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:562
 msgid "_Zoom 1:4"
-msgstr "_??????? 1:4"
+msgstr "????????? 1:_4"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:568
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:569
 msgid "Z_oom 1:2"
-msgstr "?_???????? 1:2"
+msgstr "????????? 1:_2"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:575
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:576
 msgid "Zoom _1:1"
-msgstr "??????? _1:1"
+msgstr "??????? 1:_1"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:582
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:583
 msgid "Zoom _2:1"
-msgstr "??????? _2:1"
+msgstr "_????????? 2:1"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:589
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:590
 msgid "Vi_deo"
 msgstr "???_???"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:596
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:597
 msgid "_Decoder Options"
 msgstr "_???????? ???????????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:603
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:604
 msgid "_Postprocessing"
 msgstr "_??????????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:606
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:607
 msgid "Select postprocessing level"
 msgstr "??????? ??????? ???????????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:616
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:617
 msgid "P_review"
 msgstr "???_??????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:623
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:624
 msgid "Display _Output"
 msgstr "???????? _??????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:635
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:636
 msgid "_Frame Rate"
 msgstr "???????? _????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:639
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:688
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:640
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:689
 msgid "_Encoder"
 msgstr "_?????????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:646
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:647
 msgid "Fil_ters"
 msgstr "_??????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:653
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:654
 msgid "_Audio"
 msgstr "_????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:660
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:661
 msgid "_Main Track"
 msgstr "_????? ??????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:664
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:665
 msgid "_Second Track"
 msgstr "_??????? ??????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:668
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:669
 msgid "_Build VBR Time Map"
-msgstr ""
+msgstr "?? _??????? ? ?????? ?????? VBR"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:677
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:678
 msgid "S_ave..."
 msgstr "???_???????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:695
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:696
 msgid "_Filters"
 msgstr "_??????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:699
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:700
 msgid "_Tools"
 msgstr "_????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:706
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:707
 msgid "_Calculator"
 msgstr "_???????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:722
-#, fuzzy
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:723
 msgid "_Rebuild Frames (I & B)"
-msgstr "??????? ???????"
+msgstr "???????????? ??? ???? (I & B)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:726
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:727
 msgid "C_heck Frames (slow)"
 msgstr "_??????? ???? (????)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:730
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:731
 msgid "_Bitrate Histogram"
 msgstr "?????????? ?????? _Bit"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:734
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:735
 msgid "_Scan for Black Frames..."
 msgstr "_????????? ??? ????? ????..."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:743
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:744
 msgid "_VOB -> VobSub"
 msgstr "_VOB -> VobSub"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:747
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:748
 msgid "_OCR (VobSub -> srt)"
 msgstr "_OCR (VobSub -> srt)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:751
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:752
 msgid "OCR (TS->srt)"
 msgstr "OCR (TS->srt)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:755
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:756
 msgid "_Edit Glyph"
 msgstr "_??????????? ?????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:764
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:765
 msgid "_Frame Hex Dump"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:768
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:769
 msgid "A_uto"
 msgstr "_????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:775
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:776
 msgid "_VCD"
 msgstr "_VCD"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:779
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:780
 msgid "_SVCD"
 msgstr "_SVCD"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:783
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:784
 msgid "_DVD"
 msgstr "_DVD"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:787
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:788
 msgid "_PSP"
 msgstr "_PSP"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:791
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:792
 msgid "PSP (_H.264)"
 msgstr "PSP (_H.264)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:795
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:796
 msgid "F_LV"
 msgstr "F_LV"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:799
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:800
 msgid "IPOD (mpeg4)"
-msgstr ""
+msgstr "IPOD (mpeg4)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:803
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:804
 msgid "_Go"
 msgstr "_????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:810
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:811
 msgid "_Play/Stop"
 msgstr "_???????????/???????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:821
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:822
 msgid "P_revious Frame"
 msgstr "_??????????? ????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:832
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:833
 msgid "_Next Frame"
 msgstr "_??????? ????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:843
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:844
 #, fuzzy
 msgid "Pr_evious Intra Frame"
 msgstr "?????????_???????????? ?????? ????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:854
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:855
 #, fuzzy
 msgid "Next _Intra Frame"
-msgstr "???? ??????? ????"
+msgstr "???? ??????? ???????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:865
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:866
 msgid "Previou_s Black Frame"
 msgstr "???????????? _?????? ????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:869
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:870
 msgid "Ne_xt Black Frame"
 msgstr "_???????? ?????? ????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:873
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:874
 msgid "_First Frame"
 msgstr "_????? ????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:884
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:885
 msgid "_Last Frame"
 msgstr "_?????????? ????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:900
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:901
 msgid "Go to Marker _A"
 msgstr "???????? ??? ?????? _?"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:907
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:908
 msgid "Go to Marker _B"
 msgstr "???????? ??? ?????? _?"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:919
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:920
 msgid "Go to Fra_me..."
 msgstr "???????? ??? _????..."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:930
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:931
 msgid "Go to _Time..."
 msgstr "???????? ??? _?????..."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:941
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:942
 msgid "_Custom"
 msgstr "_?????????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:945
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:946
 msgid "_Help"
 msgstr "_???????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:952
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:953
 msgid "_Built-in Support"
 msgstr "_???????????? ??????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:956
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:957
 msgid "_About"
 msgstr "_??????? ??"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:974
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:975
 msgid "Open a file"
 msgstr "??????? ???? ???????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:984
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:985
 msgid "Save the file"
 msgstr "?????????? ???????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:990
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:991
 msgid "Audio/video file information"
 msgstr "??????????? ??????? ????/??????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:999
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1002
 msgid "Bitrate/size calculator"
 msgstr "??????????? ?????? bit/????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1078
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1118
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1081
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1121
 msgid "Copy"
 msgstr "?????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1083
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1086
 msgid "Configure video encoder"
 msgstr "??????? ???????????? ??????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1088
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1144
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1091
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1147
 msgid "Filters"
 msgstr "??????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1091
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1094
 msgid "Video filters"
 msgstr "?????? video"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1123
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1126
 msgid "Configure audio encoder"
 msgstr "??????? ???????????? ????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1131
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1134
 msgid "Audio filters"
 msgstr "?????? ????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1152
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1155
 msgid "Shift:"
 msgstr "??????????:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1155
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1158
 msgid "Enable time shift"
 msgstr "???????????? ???????? ???????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1161
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1164
 msgid "Audio/video time shift (ms)"
 msgstr "??????? ?????????? ????/?????? (ms)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1168
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1171
 msgid "<b>Format</b>"
 msgstr "<b>?????</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1209
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1204
 msgid "Frame: "
 msgstr "????:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1216
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1211
 msgid "Current frame"
 msgstr "?????? ????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1221
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1216
 msgid "/ 0000000"
 msgstr "/ 0000000"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1228
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1223
 msgid "Time: "
 msgstr "??????:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1235
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1230
 msgid "Current time"
 msgstr "?????? ??????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1236
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1231
 msgid "00:00:00.000"
 msgstr "00:00:00.000"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1239
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1234
 msgid "/ 00:00:00,000"
 msgstr "/ 00:00:00,000"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1246
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1241
 msgid "Frame: ?"
 msgstr "????: ?"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1270
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1265
 msgid "Play"
 msgstr "???????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1284
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1279
 msgid "Stop"
 msgstr "???????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1296
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1291
 msgid "Previous frame"
 msgstr "??????????? ????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1311
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1306
 msgid "Next frame"
 msgstr "??????? ????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1326
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1321
 #, fuzzy
 msgid "Previous keyframe"
 msgstr "??????????? ??????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1341
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1336
 #, fuzzy
 msgid "Next keyframe"
 msgstr "??????? ??????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1355
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1350
 msgid "Selection: start"
 msgstr "???????: ???? "
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1366
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1361
 msgid "Selection: end"
 msgstr "????????: ?????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1377
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1372
 msgid "Previous black frame"
 msgstr "??????????? ????? ????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1388
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1383
 msgid "Next black frame"
 msgstr "??????? ?????? ????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1399
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1394
 msgid "First frame"
 msgstr "????? ????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1410
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1405
 msgid "Last frame"
 msgstr "????????? ????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1424
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1419
 msgid "<b>Selection</b>"
 msgstr "<b>???????</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1441
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1436
 msgid "B:"
 msgstr "B:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1448
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1443
 msgid "Go to marker B"
 msgstr "???????? ??? ?????? ?"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1450
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1445
 msgid "A:"
 msgstr "A:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1457
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1452
 msgid "Go to marker A"
 msgstr "???????? ??? ?????? ?"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1459
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1467
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1454
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1462
 msgid " 0000000"
 msgstr " 0000000"
 
@@ -6615,15 +6820,14 @@
 "\n"
 "Do you want to replace it?"
 msgstr ""
-"%s ??????? ???.\n"
+"?? %s ??????? ???.\n"
 "\n"
 "?????? ?? ??????????????;"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp:365
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp:379
-#, fuzzy
 msgid "It is possible that you are trying to overwrite an input file!"
-msgstr "????? ?????? ?? ?????????? ?? "
+msgstr "????? ?????? ?? ?????????? ?? ???????????? ??? ?????? ????????? ???????!"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp:390
 msgid "Cannot write the file"
@@ -6678,26 +6882,27 @@
 msgstr "???????? ????????"
 
 #: avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp:107
+#, fuzzy
 msgid "Linear interpolate"
-msgstr ""
+msgstr "???????? ????????"
 
 #: avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp:108
+#, fuzzy
 msgid "Cubic interpolate"
-msgstr ""
+msgstr "?????? Spline"
 
 #: avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp:109
+#, fuzzy
 msgid "Median interpolate"
-msgstr ""
+msgstr "???????? ????????"
 
 #: avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp:110
-#, fuzzy
 msgid "FFmpeg deint"
-msgstr "FFmpeg Mpeg4"
+msgstr "???????? FFmpeg"
 
 #: avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp:114
-#, fuzzy
 msgid "_Deinterlacing:"
-msgstr "Deinterlacing"
+msgstr "_????????:"
 
 #: avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp:115
 #, fuzzy
@@ -6792,8 +6997,9 @@
 
 #: avidemux/ADM_videoFilter/ADM_vidBlendRemoval.cpp:87
 #: avidemux/ADM_videoFilter/ADM_vidHardIvtcRemoval.cpp:92
+#, fuzzy
 msgid "_Show metrics"
-msgstr ""
+msgstr "&???????? ????????"
 
 #: avidemux/ADM_videoFilter/ADM_vidBlendRemoval.cpp:87
 #: avidemux/ADM_videoFilter/ADM_vidHardIvtcRemoval.cpp:92
@@ -6801,8 +7007,9 @@
 msgstr ""
 
 #: avidemux/ADM_videoFilter/ADM_vidBlendRemoval.cpp:91
+#, fuzzy
 msgid "Blend Removal"
-msgstr ""
+msgstr "???????? ???????????"
 
 #: avidemux/ADM_videoFilter/ADM_vidBSmear.cpp:206
 msgid "Blacken Borders"
@@ -6819,6 +7026,11 @@
 msgstr "_???? ?????? (?? ????????? ???? # ??? ??????????????), -1 = ?????????:"
 
 #: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:189
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:191
+msgid "_Output File:"
+msgstr "_?????? ??????:"
+
+#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:189
 msgid "Select output file"
 msgstr "???????? ?? ?????? ????????????? ??????"
 
@@ -6851,8 +7063,9 @@
 msgstr "???????? ????????????"
 
 #: avidemux/ADM_videoFilter/ADM_vidDecDec.cpp:191
+#, fuzzy
 msgid "Replace (interpolate)"
-msgstr ""
+msgstr "????????????? ??????????????"
 
 #: avidemux/ADM_videoFilter/ADM_vidDecDec.cpp:192
 msgid "Discard longer dupe (anim?s)"
@@ -6892,8 +7105,9 @@
 msgstr "_?????:"
 
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:83
+#, fuzzy
 msgid "No strategy"
-msgstr ""
+msgstr "?? ?????? ?????????? '%s'"
 
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:84
 msgid "3:2 pulldown"
@@ -6937,11 +7151,11 @@
 
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:105
 msgid "Process image (not fields)"
-msgstr ""
+msgstr "??????????? ??????? (??? ?????)"
 
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:106
 msgid "Process image (not fields), debug"
-msgstr ""
+msgstr "??????????? ??????? (??? ?????), ?????????????"
 
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:110
 msgid "_Strategy:"
@@ -6954,15 +7168,17 @@
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:113
 #, fuzzy
 msgid "_Try backward:"
-msgstr "?????? XPM"
+msgstr "???? ?? ???? ?????"
 
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:115
+#, fuzzy
 msgid "_Direct threshold:"
-msgstr ""
+msgstr "??????? ????????:"
 
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:116
+#, fuzzy
 msgid "_Backward threshold:"
-msgstr ""
+msgstr "??????? ????????:"
 
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:117
 msgid "_Noise threshold:"
@@ -6970,7 +7186,7 @@
 
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:118
 msgid "Postp_rocessing threshold:"
-msgstr ""
+msgstr "??????? _???????????????:"
 
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:120
 msgid "_Use chroma to decide"
@@ -6987,7 +7203,7 @@
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:123
 #, fuzzy
 msgid "Bl_end"
-msgstr "????????"
+msgstr "_???? ??????:"
 
 #: avidemux/ADM_videoFilter/ADM_vidDenoise.cpp:386
 #, fuzzy
@@ -7002,7 +7218,7 @@
 #: avidemux/ADM_videoFilter/ADM_vidDenoise.cpp:388
 #, fuzzy
 msgid "L_uma threshold:"
-msgstr "??????? ????????????"
+msgstr "??????? ????????:"
 
 #: avidemux/ADM_videoFilter/ADM_vidDenoise.cpp:389
 msgid "Ch_roma threshold:"
@@ -7014,7 +7230,7 @@
 
 #: avidemux/ADM_videoFilter/ADM_vidDGbob.cpp:85
 msgid "Keep nb of frames and fps"
-msgstr ""
+msgstr "????????? ??? ??????? ??? ???? ??? ??? ???????? ???? (fps)"
 
 #: avidemux/ADM_videoFilter/ADM_vidDGbob.cpp:86
 #, fuzzy
@@ -7023,7 +7239,7 @@
 
 #: avidemux/ADM_videoFilter/ADM_vidDGbob.cpp:87
 msgid "Double nb of frames (slow motion)"
-msgstr ""
+msgstr "?????? ??????? ???? (???? ??????)"
 
 #: avidemux/ADM_videoFilter/ADM_vidDGbob.cpp:93
 msgid "_Extra"
@@ -7040,12 +7256,87 @@
 #: avidemux/ADM_videoFilter/ADM_vidDropOut.cpp:63
 #, fuzzy
 msgid "DropOut Threshold"
-msgstr "??????? ????????"
+msgstr "??????? ????????:"
 
 #: avidemux/ADM_videoFilter/ADM_vidDropOut.cpp:66
+#, fuzzy
 msgid "Drop Out"
+msgstr "%s ????????????."
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:191
+msgid "Erase"
+msgstr "???????"
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:192
+msgid "Un-Erase"
+msgstr "???-???????"
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:196
+msgid "1x1"
+msgstr "1x1"
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:197
+msgid "3x3"
+msgstr "3x3"
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:198
+msgid "5x5"
+msgstr "5x5"
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:199
+msgid "7x7"
+msgstr "7x7"
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:200
+msgid "9x9"
+msgstr "9x9"
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:201
+msgid "11x11"
+msgstr "11x11"
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:202
+msgid "15x15"
+msgstr "15x15"
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:203
+msgid "21x21"
+msgstr "21x21"
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:207
+#, fuzzy
+msgid "Brush _Mode:"
+msgstr "_??????????: "
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:211
+msgid "Brush _Size:"
+msgstr "_??????? ???????:"
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:244
+msgid "Output \"_Color\" for all masked pixels:"
 msgstr ""
 
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:250
+msgid "Eraser _Data File:"
+msgstr ""
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:250
+#, fuzzy
+msgid "Select data file"
+msgstr "??????? ???????"
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:255
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:196
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:378
+#: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:159
+msgid "_Debugging settings (bits):"
+msgstr "????????? _?????????????? (bit):"
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:261
+#, fuzzy
+msgid "Eraser Configuration"
+msgstr "??????? Vorbis"
+
 #: avidemux/ADM_videoFilter/ADM_vidFade.cpp:65
 msgid "Out"
 msgstr "??????"
@@ -7091,7 +7382,7 @@
 #: avidemux/ADM_videoFilter/ADM_vidLargeMedian.cpp:304
 #, fuzzy
 msgid "_Process luma"
-msgstr "???????????"
+msgstr "??????? ????????????:"
 
 #: avidemux/ADM_videoFilter/ADM_vidFastConvolution.cpp:467
 #: avidemux/ADM_videoFilter/ADM_vidLargeMedian.cpp:304
@@ -7104,8 +7395,9 @@
 msgstr "??????????? chroma"
 
 #: avidemux/ADM_videoFilter/ADM_vidFastConvolution.cpp:472
+#, fuzzy
 msgid "Fast Convolution"
-msgstr ""
+msgstr "&????????????? ?????????..."
 
 #: avidemux/ADM_videoFilter/ADM_vidFields.cpp:229
 msgid "Motion Threshold"
@@ -7114,17 +7406,17 @@
 #: avidemux/ADM_videoFilter/ADM_vidFields.cpp:231
 #, fuzzy
 msgid "Blend Threshold"
-msgstr "??????? ???????? ??????"
+msgstr "??????? ????????:"
 
 #: avidemux/ADM_videoFilter/ADM_vidFlux.cpp:133
 #, fuzzy
 msgid "_Temporal threshold:"
-msgstr "??????? ????????????"
+msgstr "??????? ????????:"
 
 #: avidemux/ADM_videoFilter/ADM_vidFlux.cpp:134
 #, fuzzy
 msgid "_Spatial threshold:"
-msgstr "??????? ????????????"
+msgstr "??????? ????????:"
 
 #: avidemux/ADM_videoFilter/ADM_vidForcedPP.cpp:81
 msgid "Forced Postprocessing"
@@ -7140,7 +7432,7 @@
 
 #: avidemux/ADM_videoFilter/ADM_vidHardIvtcRemoval.cpp:96
 msgid "Hard IVTC Removal"
-msgstr ""
+msgstr "???????? ??????? IVTC"
 
 #: avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp:93
 msgid "Smaller means more deinterlacing"
@@ -7168,7 +7460,7 @@
 
 #: avidemux/ADM_videoFilter/ADM_vidLargeMedian.cpp:309
 msgid "Large Median 5x5"
-msgstr ""
+msgstr "??????? ????? 5x5"
 
 #: avidemux/ADM_videoFilter/ADM_vidLogo.cpp:88
 msgid "_Logo (jpg file):"
@@ -7211,7 +7503,7 @@
 #: avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp:114
 #, fuzzy
 msgid "_Field dominance:"
-msgstr "??????????? ????????"
+msgstr "????? ???????????:"
 
 #: avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp:115
 msgid "_Qp:"
@@ -7220,12 +7512,12 @@
 #: avidemux/ADM_videoFilter/ADM_vidMosaic.cpp:90
 #, fuzzy
 msgid "_Horizontal stacking:"
-msgstr "????????? ???????? ?????????"
+msgstr "????????? ??????????"
 
 #: avidemux/ADM_videoFilter/ADM_vidMosaic.cpp:91
 #, fuzzy
 msgid "_Vertical stacking:"
-msgstr "?????????? ???????? ?????????"
+msgstr "?????? ????????"
 
 #: avidemux/ADM_videoFilter/ADM_vidMosaic.cpp:92
 msgid "_Shrink factor:"
@@ -7249,7 +7541,7 @@
 #: avidemux/ADM_videoFilter/ADM_vidMPLD3Dlow.cpp:76
 #, fuzzy
 msgid "_Temporal strength:"
-msgstr "??&?????:"
+msgstr "????:"
 
 #: avidemux/ADM_videoFilter/ADM_vidMSharpen.cpp:163
 #, fuzzy
@@ -7267,74 +7559,77 @@
 #: avidemux/ADM_videoFilter/ADM_vidMsmooth.cpp:195
 #, fuzzy
 msgid "Show _mask"
-msgstr "??? ????? ????????"
+msgstr "???????? ??????"
 
 #: avidemux/ADM_videoFilter/ADM_vidMsmooth.cpp:201
 msgid "MSmooth"
-msgstr ""
+msgstr "MSmooth"
 
 #: avidemux/ADM_videoFilter/ADM_vidPalShift.cpp:76
+#, fuzzy
 msgid "_Try reverse"
-msgstr ""
+msgstr "??????? ??????"
 
 #: avidemux/ADM_videoFilter/ADM_vidPalShift.cpp:80
 #, fuzzy
 msgid "Pal Field Shift"
 msgstr "???????????? ???????? ???????????"
 
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:122
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:135
 msgid "New format, preferred, good for Tracker3D"
 msgstr "??? ?????, ???????????, ???? ??? Tracker3D"
 
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:124
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:137
+msgid "DG at UWA format (includes shape info & bounding box)"
+msgstr "????? DG at UWA (???????????? ??????????? ???????? & ????? ?????)"
+
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:139
+msgid "AB at ODU format (includes shape info)"
+msgstr "????? AB at ODU (???????????? ??????????? ????????)"
+
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:141
 msgid "Old format that Tracker3D can't read directly"
 msgstr "?????????? ?????, ??? ? Tracker3D ??? ?????? ????????? ?? ????????"
 
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:128
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:145
 msgid "Output _Format:"
 msgstr "????? ????????????? _??????:"
 
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:153
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:170
 msgid "Mi_nimum area for a particle to be detected:"
-msgstr ""
+msgstr "_???????? ??????? ??? ??? ????????? ???? ?????????:"
 
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:156
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:173
 msgid "Ma_ximum area for a particle to be detected:"
-msgstr ""
+msgstr "_??????? ??????? ??? ??? ????????? ???? ?????????:"
 
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:160
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:177
 msgid "_Left side crop (ignore particles in):"
-msgstr ""
+msgstr "???????? _????????? ??????? (??????? ????????? ????):"
 
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:163
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:180
 msgid "_Right side crop (ignore particles in):"
-msgstr ""
+msgstr "???????? _?????? ??????? (??????? ????????? ????):"
 
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:166
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:183
 msgid "_Top crop (ignore particles in):"
-msgstr ""
+msgstr "???????? _????? ??????? (??????? ????????? ????):"
 
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:169
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:186
 msgid "_Bottom crop (ignore particles in):"
-msgstr ""
+msgstr "???????? _???? ??????? (??????? ????????? ????):"
 
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:174
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:322
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:191
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:324
 #: avidemux/gtk_gui.cpp:2016
 #: avidemux/gtk_gui.cpp:2113
 msgid "Select file"
 msgstr "??????? ???????"
 
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:177
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:194
 msgid "_Camera number:"
 msgstr "??????? _???????:"
 
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:179
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:372
-#: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:159
-msgid "_Debugging settings (bits):"
-msgstr "????????? _?????????????? (bit):"
-
 #: avidemux/ADM_videoFilter/ADM_vidResampleFPS.cpp:85
 msgid "_New frame rate:"
 msgstr "_??? ???????? ????:"
@@ -7395,127 +7690,133 @@
 msgid "Stabilize Threshold"
 msgstr "????????????? ??? ?????????"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:259
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:261
 msgid "P' = A"
 msgstr "P' = A"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:260
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:262
 msgid "P' = P"
 msgstr "P' = P"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:261
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:263
 msgid "P' = P - A"
 msgstr "P' = P - A"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:262
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:264
 msgid "P' = A - P"
 msgstr "P' = A - P"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:263
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:265
 msgid "P' = P + A"
 msgstr "P' = P + A"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:264
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:266
 msgid "P' = P * A"
 msgstr "P' = P * A"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:265
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:267
 msgid "P' = P / A"
 msgstr "P' = P / A"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:266
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:268
 msgid "P' = A / P"
 msgstr "P' = A / P"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:267
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:269
 msgid "P' = min (P, A)"
 msgstr "P' = ???????? (P, A)"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:268
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:270
 msgid "P' = max (P, A)"
 msgstr "P' = ??????? (P, A)"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:273
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:275
 msgid "A = convolve(P); Load convolution kernel from file"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:275
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:277
 msgid "A = pixel from image file as float; Load image from file"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:277
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:279
 msgid "A = pixel from image file as integer; Load image from file"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:279
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:281
+#, fuzzy
 msgid "A = floating point constant value"
-msgstr ""
+msgstr "3. ???????? (???? ??????? ????????????)"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:281
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:283
 msgid "A = rolling average of pixel: A = A*(1-alpha)+(P*alpha)"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:286
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:288
 msgid "Select _Operation on each pixel P and input A:"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:291
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:293
 msgid "Input _Type:"
 msgstr "_????? ???????:"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:322
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:324
 msgid "Input _File (image or convolution kernel):"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:325
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:327
 msgid ""
 "_Load Bias (added to each pixel\n"
 "in file image when loaded):"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:330
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:332
 msgid ""
 "Load _Multiplier (each pixel in\n"
 "file image mult. by this when loaded):"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:336
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:338
+#, fuzzy
 msgid "Input _Constant:"
-msgstr ""
+msgstr "?????????? ????????"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:340
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:342
 msgid ""
 "Memory constant _alpha\n"
-"(where A = (1-alpha)*A + alpha*curr_frame):"
+"(where A = (1-alpha)*A + alpha*(curr_frame + lookahead)):"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:345
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:347
+msgid "Look ahead _N frames:"
+msgstr ""
+
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:351
 msgid "Init _Start Frame (first frame # to use for head start):"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:349
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:355
 msgid "Init _End Frame (last frame # to use for head start):"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:353
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:359
 msgid "Init By _Rolling (compute head start using a rolling average rather than a straight average)"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:358
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:364
 msgid "_Bias (will be added to result):"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:361
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:367
 msgid "_Result Bias (added to each result pixel):"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:365
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:371
 msgid ""
 "Result _Multiplier (each result pixel\n"
 "multiplied by this):"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:370
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:376
 msgid "_Histogram every N frames (0 to disable):"
 msgstr "_?????????? ???? ? ???? (0 ??? ??????????????):"
 
@@ -7551,7 +7852,7 @@
 
 #: avidemux/ADM_videoFilter/ADM_vidYadif.cpp:171
 msgid "Temporal & spatial check"
-msgstr ""
+msgstr "???????? ??? ??????? ???????"
 
 #: avidemux/ADM_videoFilter/ADM_vidYadif.cpp:172
 msgid "Bob, temporal & spatial check"
@@ -7559,7 +7860,7 @@
 
 #: avidemux/ADM_videoFilter/ADM_vidYadif.cpp:173
 msgid "Skip spatial temporal check"
-msgstr ""
+msgstr "????????? ??????? ??? ???????? ???????"
 
 #: avidemux/ADM_videoFilter/ADM_vidYadif.cpp:174
 msgid "Bob, skip spatial temporal check"
@@ -7697,7 +7998,7 @@
 #: avidemux/gtk_gui.cpp:842
 #, fuzzy
 msgid "Rebuild all Keyframes?"
-msgstr "??????? ???????"
+msgstr "?????????????? ???? ??? ????????????..."
 
 #: avidemux/gtk_gui.cpp:900
 msgid "Permission error"
@@ -8039,15 +8340,14 @@
 msgstr "?? ?????? ???? ????? ?????????? ??? ?? ?????????? ???? ??????? ???????"
 
 #: avidemux/gui_autodrive.cpp:63
-msgid "You need both Xvid4 and FAAC support for Ipod profile"
-msgstr ""
+msgid "You need Xvid4 and either LAME or FAAC support for the iPod profile"
+msgstr "?????????? ? ?????????? ??? Xvid4, ??? ???? ??? LAME ? ??? FAAC ??? ?? ?????? iPod"
 
-#: avidemux/gui_autodrive.cpp:71
-#: avidemux/gui_autodrive.cpp:154
-msgid "Cannot select mpeg4 sp codec."
-msgstr "??????? ? ??????? ??? ?????? mpeg4 sp"
+#: avidemux/gui_autodrive.cpp:74
+msgid "Cannot select the MPEG-4 SP codec."
+msgstr "??????? ? ??????? ??? ?????? MPEG-4 SP."
 
-#: avidemux/gui_autodrive.cpp:113
+#: avidemux/gui_autodrive.cpp:121
 msgid ""
 "You don't have LAME!.\n"
 "It is needed to create FLV  video."
@@ -8055,11 +8355,15 @@
 "??? ????? ?? LAME!.\n"
 "????? ?????????? ??? ?? ?????????? ?????? FLV."
 
-#: avidemux/gui_autodrive.cpp:127
+#: avidemux/gui_autodrive.cpp:135
 msgid "Cannot select FLV1  codec."
 msgstr "??????? ? ??????? ??? ?????? FLV1"
 
-#: avidemux/gui_autodrive.cpp:189
+#: avidemux/gui_autodrive.cpp:162
+msgid "Cannot select mpeg4 sp codec."
+msgstr "??????? ? ??????? ??? ?????? mpeg4 sp"
+
+#: avidemux/gui_autodrive.cpp:197
 msgid ""
 "You don't have FAAC!.\n"
 "It is needed to create PSP compatible video."
@@ -8077,8 +8381,8 @@
 
 #: avidemux/gui_navigate.cpp:73
 #: avidemux/gui_navigate.cpp:111
-#: avidemux/gui_navigate.cpp:387
-#: avidemux/gui_navigate.cpp:423
+#: avidemux/gui_navigate.cpp:393
+#: avidemux/gui_navigate.cpp:429
 msgid "Decompressing error"
 msgstr "????? ???? ???????????"
 
@@ -8087,20 +8391,20 @@
 msgstr "??????? ? ??????????????? ??? ???????? ????"
 
 #: avidemux/gui_navigate.cpp:111
-#: avidemux/gui_navigate.cpp:423
+#: avidemux/gui_navigate.cpp:429
 #, fuzzy
 msgid "Cannot decode keyframe."
-msgstr "??????? ? ??????????????? ??? ???????? ????"
+msgstr "??????? ? ??????????????? ??? ????"
 
-#: avidemux/gui_navigate.cpp:234
+#: avidemux/gui_navigate.cpp:237
 msgid "Seeking"
 msgstr "?????????"
 
-#: avidemux/gui_navigate.cpp:312
+#: avidemux/gui_navigate.cpp:318
 msgid "Finding black frames"
 msgstr "????????? ?????? ????"
 
-#: avidemux/gui_navigate.cpp:387
+#: avidemux/gui_navigate.cpp:393
 msgid "Cannot decode the frame."
 msgstr "??????? ? ??????????????? ??? ????"
 

Modified: branches/avidemux_2.4_branch/po/it.po
===================================================================
--- branches/avidemux_2.4_branch/po/it.po	2008-03-11 19:55:52 UTC (rev 3871)
+++ branches/avidemux_2.4_branch/po/it.po	2008-03-12 11:37:45 UTC (rev 3872)
@@ -3,7 +3,7 @@
 "Project-Id-Version: avidemux\n"
 "Report-Msgid-Bugs-To: \n"
 "POT-Creation-Date: 2006-10-04 22:09+0300\n"
-"PO-Revision-Date: 2008-01-26 17:04+0100\n"
+"PO-Revision-Date: 2008-02-16 09:57+0100\n"
 "Last-Translator: \n"
 "Language-Team: it\n"
 "MIME-Version: 1.0\n"
@@ -308,7 +308,7 @@
 msgid "You should use Tool->Rebuild frame. Do it now ?"
 msgstr "Dovresti usare Strumenti -> Ricostruisci fotogrammi. Vuoi farlo ora?"
 
-#: avidemux/ADM_editor/ADM_edit.cpp:1510
+#: avidemux/ADM_editor/ADM_edit.cpp:1517
 msgid ""
 "This looks like mpeg\n"
 " Do you want to index it?"
@@ -316,7 +316,7 @@
 "Questo sembra un file mpeg\n"
 " Vuoi indicizzarlo?"
 
-#: avidemux/ADM_editor/ADM_edit.cpp:1562
+#: avidemux/ADM_editor/ADM_edit.cpp:1569
 msgid "Indexing failed"
 msgstr "Indicizzazione fallita"
 
@@ -974,7 +974,6 @@
 msgstr "\"Cancella\" aree arbitrarie di ogni fotogramma"
 
 #: avidemux/ADM_filter/filter_declaration.cpp:188
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:898
 msgid "Swiss Army Knife"
 msgstr "Swiss Army Knife"
 
@@ -983,7 +982,8 @@
 msgstr "Applica operazioni come P'=P*A, P-A, P+A, ecc. usando avvolgimento, media mobile, immagine da file, o costante."
 
 #: avidemux/ADM_filter/filter_declaration.cpp:189
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:272
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:401
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:976
 msgid "Threshold"
 msgstr "Threshold"
 
@@ -1643,7 +1643,7 @@
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:568
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:583
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:219
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1143
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1188
 #: avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp:105
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:101
 #: avidemux/ADM_videoFilter/ADM_vidRotate.cpp:264
@@ -2127,7 +2127,7 @@
 msgstr "Quantizzazione"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:117
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1427
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1480
 msgid "Rate Control"
 msgstr "Controllo bitrate"
 
@@ -2738,8 +2738,8 @@
 msgstr "0"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:83
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:807
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:819
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:841
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:852
 msgid "1"
 msgstr "1"
 
@@ -3678,7 +3678,7 @@
 msgstr "DVD5"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:559
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:822
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:855
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_threadCount.cpp:87
 msgid "Custom"
 msgstr "Personalizzata"
@@ -4239,7 +4239,6 @@
 msgstr "Seleziona il file di uscita"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs_save.cpp:145
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:553
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_filesel.cpp:90
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_filesel.cpp:244
 msgid "_Browse..."
@@ -4369,77 +4368,10 @@
 msgid "Configure partialized filter"
 msgstr "Configura filtro parziale"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:197
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:269
 msgid "Particle Analysis Configuration"
 msgstr "Configurazione analisi particella"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:412
-msgid "Particle Detection"
-msgstr "Rilevamento particelle"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:439
-msgid "Mi_nimum area for a particle to be detected:    "
-msgstr "_Area minima per l'individuazione di una particella: "
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:453
-msgid "Ma_ximum area for a particle to be detected:   "
-msgstr "A_rea massima per l'individuazione di una particella: "
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:471
-msgid "_Left side crop (ignore this many pixels on the left):        "
-msgstr "Crop laterale _sinistro (ignora questo numero di pixel a sinistra): "
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:485
-msgid "_Right side crop (ignore this many pixels on the right):     "
-msgstr "Crop laterale d_estro (ignora questo numero di pixel a destra): "
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:499
-msgid "_Top crop (ignore this many pixels on the top):                  "
-msgstr "Crop su_periore (ignora questo numero di pixel in alto): "
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:513
-msgid "_Bottom crop (ignore this many pixels on the bottom):   "
-msgstr "Crop _inferiore (ignora questo numero di pixel in basso): "
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:531
-msgid "Output _Format:   "
-msgstr "_Formato in uscita: "
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:543
-#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:189
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:191
-msgid "_Output File:"
-msgstr "File in _uscita:"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:561
-msgid "_Camera Number for output file:      "
-msgstr "Numero _telecamera per il file in uscita: "
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:575
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1332
-msgid "_Debugging settings (bits):   "
-msgstr "Impostazioni di _debug (bit): "
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:608
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1365
-msgid "Swiss Army Knife output"
-msgstr "Output Swiss Army Knife"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:609
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1366
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:405
-msgid "Final output"
-msgstr "Output finale"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:625
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_preview.cpp:180
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1382
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:418
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp:336
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtersub.cpp:150
-msgid "Preview"
-msgstr "Anteprima"
-
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_pause.cpp:93
 msgid "Paused"
 msgstr "In pausa"
@@ -4474,6 +4406,13 @@
 msgid "Full parameter line"
 msgstr "Linea parametri completa"
 
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_preview.cpp:180
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:542
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp:336
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtersub.cpp:150
+msgid "Preview"
+msgstr "Anteprima"
+
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:40
 msgid "No"
 msgstr "No"
@@ -4667,157 +4606,40 @@
 msgid "Font Size:"
 msgstr "Dimensione carattere:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:405
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:380
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:505
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:388
 msgid "Swiss Army Knife Configuration"
 msgstr "Configurazione Swiss Army Knife"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:925
-msgid "Select _Operation on each pixel P and input A:   "
-msgstr "_Seleziona opeazione per ogni pixel P e input A: "
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:937
-msgid "Input _Type:   "
-msgstr "_Tipo in ingresso: "
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:956
-msgid "Input _File (convolution kernel):   "
-msgstr "_File di ingresso (nucleo di avvolgimento): "
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:960
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:975
-msgid "Select Convolution Kernel File"
-msgstr "Seleziona il nucleo di avvolgimento"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:971
-msgid "Input _File (image file):   "
-msgstr "_File di ingresso (immagine): "
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:997
-msgid "First, _add to each float pixel value:   "
-msgstr "Prima _aggiungi a ogni pixel float il valore: "
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1011
-msgid "Then, _multiply each float pixel value by:   "
-msgstr "Poi moltiplica ogni pi_xel float per il valore: "
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1025
-msgid "Mi_nimum loaded pixel value (will be scaled to 0):"
-msgstr "_Valore minimo pixel caricato (sar? ridimensionato a 0):"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1051
-msgid "Ma_ximum loaded pixel value (will be scaled to 255):"
-msgstr "Va_lore massimo pixel caricato (sar? ridimensionato a 255):"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1073
-msgid "Pixel Value Scaling as Image File is Loaded"
-msgstr "Ridimensionamento valore pixel al caricamento del file immagine"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1085
-msgid "Input _Constant:      "
-msgstr "Costant_e in ingresso: "
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1102
-msgid "Memory constant _alpha:   "
-msgstr "Costante di memoria _alpha: "
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1112
-msgid " = 1 / "
-msgstr " = 1 / "
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1130
-msgid "_Initial average (\"head start\") is "
-msgstr "La media iniziale (\"head start\") ? una media "
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1137
-msgid "straight"
-msgstr "diretta"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1138
-msgid "rolling"
-msgstr "mobile"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1140
-msgid " average"
-msgstr " "
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1148
-msgid "      of frames "
-msgstr "dei fotogrammi da "
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1158
-msgid " through "
-msgstr " a "
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1176
-msgid "Integer _Bias (will be added to result of selected operation):"
-msgstr "_Bias Integer (sar? aggiunto al risultato dell'operazione selezionata):"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1216
-msgid "First, _add to each pixel result value:   "
-msgstr "Prima a_ggiungi a ogni pixel risultato il valore: "
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1230
-msgid "Then, _multiply each pixel result value by:   "
-msgstr "_Poi moltiplica ogni pixel risultato per il valore: "
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1244
-msgid "Mi_nimum result value (will be scaled to 0):"
-msgstr "Valo_re minimo pixel risultato (sar? ridimensionato a 0):"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1270
-msgid "Ma_ximum result value (will be scaled to 255):"
-msgstr "Valore _massimo pixel risultato (sar? ridimensionato a 255):"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1292
-msgid "Pixel Value Scaling on Result of Selected Operation"
-msgstr "Ridimensionamento valore pixel sul risultato dell'operazione selezionata"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1301
-msgid "(description of current config will go here)"
-msgstr "(la descrizione della configurazione corrente apparir? qui)"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1318
-msgid "_Histogram every N frames (0 to disable):   "
-msgstr "_Istogramma ogni N fotogrammi (0 per disattivare): "
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1390
-msgid "Enable Preview"
-msgstr "Attiva anteprima"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:128
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:200
 #: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:163
 msgid "Threshold Configuration"
 msgstr "Configurazione soglia"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:294
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:423
 msgid "Minimum value to be in-range:"
 msgstr "Valore minimo per rientrare nell'intervallo:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:327
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:456
 msgid "Maximum value to be in-range:"
 msgstr "Valore massimo per rientrare nell'intervallo:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:358
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:487
 msgid "Output values:   "
 msgstr "Valori in uscita: "
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:365
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:494
 msgid "In-range values go black, out-of-range values go white"
 msgstr "I valori interni all'intervallo sono neri, quelli esterni bianchi"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:366
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:495
 msgid "In-range values go white, out-of-range values go black"
 msgstr "I valori interni all'intervallo sono bianchi, quelli esterni neri"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:372
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:501
 msgid "Debugging settings (bits):   "
 msgstr "Impostazioni di debug (bit): "
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:404
-msgid "Threshold output"
-msgstr "Output soglia"
-
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vcodec.cpp:104
 msgid "Video encoder"
 msgstr "Codificatore video"
@@ -4872,590 +4694,584 @@
 msgid "<b>Time remaining:</b>"
 msgstr "<b>Tempo rimanente:</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:565
-msgid "x264 configuration"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:110
+msgid "Hadamard Exhaustive Search"
+msgstr "Ricerca esaustiva Hadamard"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:596
+msgid "x264 Configuration"
 msgstr "Configurazione x264"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:584
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:617
 msgid "Encoding Mode"
 msgstr "Modalit? di codifica"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:596
-msgid "Target bitrate or file size"
-msgstr "Bitrate o dimensione finale"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:624
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:480
+msgid "Quantizer"
+msgstr "Quantizzatore"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:598
-msgid "Quantizer (0-51)"
-msgstr "Quantizzatore (0-51)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:631
+msgid "Target Size"
+msgstr "Dimensione finale"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:611
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:644
 msgid "Constant Quantizer - Each frame will have the same compression. Low numbers equal higher quality while high numbers equal lower quality."
 msgstr "Quantizzatore costante - Ogni fotogramma avr? la stessa compressione. A valori minori corrisponde una maggiore qualit?, a valori maggiori una qualit? minore."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:621
-msgid "Target Size"
-msgstr "Dimensione finale"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:652
+msgid "Target bitrate or file size"
+msgstr "Bitrate o dimensione finale"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:633
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:660
 msgid "Single Pass - Quality Quantizer (Average)"
 msgstr "Passata singola - Quantizzatore qualit? (media)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:634
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:661
 msgid "Single Pass - Quality Quantizer (Constant)"
 msgstr "Passata singola - Quantizzatore qualit? (costante)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:635
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:662
 msgid "Single Pass - Bitrate (Average)"
 msgstr "Passata singola - Bitrate (medio)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:636
-msgid "Two Pass - File Size"
-msgstr "Due passate - Dimensione file"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:663
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:768
+msgid "Two Pass - Video Size"
+msgstr "Due passate - Dimensione video"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:637
-msgid "Two Pass - Average bitrate"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:664
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:772
+msgid "Two Pass - Average Bitrate"
 msgstr "Due passate - Bitrate medio"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:639
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:666
 msgid "Bitrate"
 msgstr "Bitrate"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:670
-msgid "Partition decision"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:699
+msgid "Partition Decision"
 msgstr "Decisione partizione"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:677
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:706
 msgid "Method"
 msgstr "Metodo"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:689
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:718
 msgid "1  - Extremely Low (Fastest)"
 msgstr "1  - Estremamente bassa (pi? veloce)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:690
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:719
 msgid "2  - Very Low"
 msgstr "2  - Molto bassa"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:691
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:720
 msgid "3  - Low"
 msgstr "3  - Bassa"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:692
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:721
 msgid "4  - Medium"
 msgstr "4  - Media"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:693
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:722
 msgid "5  - High (Default)"
 msgstr "5  - Alta (predefinito)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:694
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:723
 msgid "6  - Very High"
 msgstr "6  - Molto alta"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:695
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:724
 msgid "6B - Very High (RDO on B-frames)"
 msgstr "6B - Molto alta (RDO sui fotogrammi-B)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:696
-msgid "7 - Ultra High"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:725
+msgid "7  - Ultra High"
 msgstr "7  - Ultra"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:697
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:726
 msgid "7B - Ultra High (RDO on B-frames)"
 msgstr "7B - Ultra (RDO sui fotogrammi-B)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:704
-msgid "Diamond search"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:733
+msgid "Diamond Search"
 msgstr "Ricerca romboidale"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:705
-msgid "Hexagonal search"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:734
+msgid "Hexagonal Search"
 msgstr "Ricerca esagonale"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:706
-msgid "Uneven multi-hexagon"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:735
+msgid "Uneven Multi-hexagon"
 msgstr "Multi-esagono irregolare"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:707
-msgid "Exhaustive search"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:736
+msgid "Exhaustive Search"
 msgstr "Ricerca esaustiva"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:719
-msgid "Set how many previous frames can be referenced by a P/B-frame. Numbers above 5 do not seem to improve quality greatly. Numbers 3 to 5 are recommended."
-msgstr "Imposta a quanti fotogrammi precedenti pu? riferirsi un fotogramma-P/B. Valori superiori a 5 non sembrano migliorare molto la qualit?. Sono consigliati i valori da 3 a 5."
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:722
-msgid "Max. Ref. frames"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:744
+msgid "Max. Ref. Frames"
 msgstr ""
 "Numero massimo di\n"
 "fotogrammi di riferimento"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:729
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:751
 msgid "Range"
 msgstr "Intervallo"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:742
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:764
 msgid "Define how many pixels are analysed for motion estimation. The higher the range the more accurate the analysis but the slower the encoding time."
 msgstr "Definisci il numero di pixel da analizzare. Maggiore ? l'intervallo, pi? accurata ? l'analisi, ma pi? lenta ? la codifica."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:745
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:773
+msgid "Set how many previous frames can be referenced by a P/B-frame. Numbers above 5 do not seem to improve quality greatly. Numbers 3 to 5 are recommended."
+msgstr "Imposta a quanti fotogrammi precedenti pu? riferirsi un fotogramma-P/B. Valori superiori a 5 non sembrano migliorare molto la qualit?. Sono consigliati i valori da 3 a 5."
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:776
 msgid "Chroma ME"
 msgstr "Croma ME"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:750
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:781
 msgid "Use color information for detecting motion to improve quality"
 msgstr "Usa informazioni cromatiche per la rilevazione del movimento per migliorare la qualit?"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:753
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:784
 msgid "Mixed Refs"
 msgstr "Riferimenti misti "
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:758
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:789
 msgid "Calculate referencing individually based on each partition"
 msgstr "Calcola i riferimenti basati individualmente su ogni partizione"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:764
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:795
 msgid "Fast P-Skip"
 msgstr "P-Skip veloce"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:767
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:798
 msgid "Early skip detection on P-frames to speedup encoding. Quality will be slightly reduced."
 msgstr "Rilevamento salto anticipato sui fotogrammi-P per velocizzare la codifica. La qualit? sar? leggermente ridotta."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:770
-msgid "DCT decimate"
-msgstr "DCT decimate"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:801
+msgid "DCT Decimate"
+msgstr "DCT Decimate"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:774
-msgid "Interlace"
-msgstr "Interlaccia"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:806
+msgid "Interlaced"
+msgstr "Interlacciato"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:777
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:809
 msgid "Input video is interlaced"
 msgstr "Il video in ingresso ? interlacciato"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:779
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:811
 msgid "<b>Motion Estimation</b>"
 msgstr "<b>Valutazione movimento</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:806
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:818
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:840
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:851
 msgid "Enforce the size of a decoded pixel decoded to a certain value. Set this to 1:1 for non-anamorphic video."
 msgstr "Forza le dimensioni di un pixel decodificato a un certo valore. Impostare su 1:1 per un video non anamorfico."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:810
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:844
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1051
 msgid ":"
 msgstr ":"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:827
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:860
 msgid "Set a custom aspect ratio. The default 1:1 is recommended for most video."
 msgstr "Imposta proporzioni personalizzate. L'impostazione predefinita 1:1 ? raccomandata per la maggior parte dei video."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:832
-msgid "Predefined Aspect Ratios"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:865
+msgid "Predefined Aspect Ratio"
 msgstr "Proporzioni predefinite "
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:837
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:870
 msgid "Set a common predefined aspect ratio"
 msgstr "Imposta proporzioni comuni predefinite"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:841
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1040
-msgid "As input"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:874
+msgid "As Input"
 msgstr "Come in ingresso"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:846
-msgid "Get Pixel Aspect Ratio from input video file"
-msgstr "Recupera proporzioni pixel dal video in ingresso"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:895
+msgid "<b>Sample Aspect Ratio</b>"
+msgstr "<b>Campionamento proporzioni</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:870
-msgid "<b>Sample Aspect Ratio (A/R)</b>"
-msgstr "<b>Campionamento proporzioni (A/R)</b>"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:892
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:922
 msgid "CABAC"
 msgstr "CABAC"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:895
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:925
 msgid "Lossless compression technique that reduces bitrate by approximately 10%. Increases encoding and decoding time."
 msgstr "Tecnica di compressione senza perdita che riduce il bitrate di circa il 10%. Aumenta il tempo di codifica e decodifica."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:898
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:932
 msgid "Trellis"
 msgstr "Trellis"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:907
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:941
 msgid "Use Trellis Rate Distortion Optimisation to find optimal encoding for each block. Level 0 equals disabled, level 1 equals normal and level 2 equals high."
 msgstr "Usa l'ottimizzazione distorsione Trellis per trovare la codifica ottimale per ogni blocco. 0 significa disattivata, 1 normale e 2 alta."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:914
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:948
 msgid "Noise Reduction"
 msgstr "Riduzione interferenza"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:923
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:957
 msgid "Set the amount of noise reduction"
 msgstr "Imposta il livello di riduzione interferenza"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:930
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:964
 msgid "Deblocking Filter"
 msgstr "Filtro deblocking "
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:933
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:967
 msgid "Enable in-loop deblocking to filter the video"
 msgstr "Attiva filtro deblocking in-loop"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:946
-msgid "Positive values will soften the video, negative values will sharpen."
-msgstr "Valori positivi renderanno il video pi? sfocato, negativi pi? nitido."
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:984
+msgid "Strength"
+msgstr "Intensit?"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:955
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:998
 msgid "Threshold for block detection. Positive values will detect more blocks, negative values will detect less."
 msgstr "Soglia rilevamento blocchi. Valori positivi rileveranno pi? blocchi, negativi meno."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:958
-msgid "<i>Threshold</i>"
-msgstr "<i>Soglia</i>"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1007
+msgid "Positive values will soften the video, negative values will sharpen"
+msgstr "Valori positivi renderanno il video pi? sfocato, negativi pi? nitido"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:966
-msgid "<i>Strength</i>"
-msgstr "<i>Intensit? </i>"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:974
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1010
 msgid "<b>Misc. Options</b>"
 msgstr "<b>Opzioni varie</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:979
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1015
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1066
 msgid "Motion & Misc"
 msgstr "Movimento e varie"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1005
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1041
 msgid "8x8 Transform"
 msgstr "Trasforma 8x8"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1008
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1044
 msgid "General block breakdown transformation"
 msgstr "Trasformazione per la ripartizione generale dei blocchi"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1011
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1047
 msgid "8x8, 8x16 and 16x8 P-frame search"
 msgstr "Ricerca fotogrammi-P 8x8, 8x16 e 16x8"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1014
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1050
 msgid "Improve the P-frame quality"
 msgstr "Migliora la qualit? dei fotogrammi-P"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1017
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1053
 msgid "8x8, 8x16 and 16x8 B-frame search"
 msgstr "Ricerca fotogrammi-B 8x8, 8x16 e 16x8"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1020
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1056
 msgid "Improve the B-frame quality"
 msgstr "Migliora la qualit? dei fotogrammi-B"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1023
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1059
 msgid "4x4, 4x8 and 8x4 P-frame search"
 msgstr "Ricerca fotogrammi-P 4x4, 4x8 e 8x4"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1026
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1062
 msgid "Further improve the P-frame quality"
 msgstr "Migliora ulteriormente la qualit? dei fotogrammi-P"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1028
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1064
 msgid "8x8 Intra search"
 msgstr "Ricerca Intra 8x8"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1031
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1067
 msgid "Enable DCT Intra block search to improve quality"
 msgstr "Attiva ricerca blocchi DCT Intra per migliorare la qualit?"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1034
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1070
 msgid "4x4 Intra search"
 msgstr "Ricerca Intra 4x4"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1037
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1073
 msgid "Further enable DCT Intra block search to improve quality"
 msgstr "Attiva ricerca blocchi DCT Intra per migliorare ulteriormente la qualit?"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1040
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1076
 msgid "<b>Partition Macroblocks</b>"
 msgstr "<b>Partizione Macroblock</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1062
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1100
 msgid "Bias"
 msgstr "Polarizzazione"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1075
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1107
+msgid "Max Consecutive"
+msgstr "Max consecutivi"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1120
 msgid "Increase / decrease probability for how often B-frames are used. It will not violate the maximum consecutive frame limit."
 msgstr "Aumenta / diminuisce la probabilit? di utilizzo dei fotogrammi-B. Non superer? il limite massimo di fotogrammi consecutivi."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1084
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1129
 msgid "Set the maximum number of consecutive B-frames. This defines how many duplicate frames can be dropped. Numbers 2 to 5 are recommended. This greatly improves the use of bitrate and quality."
 msgstr "Imposta il massimo numero di fotogrammi-B consecutivi. Questa opzione definisce quanti fotogrammi duplicati possono essere eliminati. Sono consigliati i valori da 2 a 5. Migliora molto l'uso del bitrate e la qualit?."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1087
-msgid "Max Consecutive"
-msgstr "Max consecutivi"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1098
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1143
 msgid "Bidirectional ME"
 msgstr "Stima movimento bidirezionale"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1103
-msgid "Optimize both motion vectors in B-frames. This will improve quality but take more time for encoding."
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1148
+msgid "Optimise both motion vectors in B-frames. This will improve quality but take more time for encoding."
 msgstr "Ottimizza entrambi i vettori movimento nei fotogrammi-B. Questo migliorer? la qualit? ma richieder? un maggior tempo di codifica."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1105
-msgid "Weighted biprediction"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1150
+msgid "Weighted Biprediction"
 msgstr "Previsione ponderata"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1110
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1155
 msgid "Enables weighting of B-frames to help fades"
 msgstr "Attiva ponderazione dei fotogrammi-B per migliorare le dissolvenze"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1113
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1158
 msgid "Adaptative DCT"
 msgstr "DCT adattativo"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1118
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1163
 msgid "Use fewer B-frames if needed. This is always recommended. If not enabled, the codec will always use the maximum number of consecutive B-frames."
 msgstr "Usa meno fotogrammi-B se necessario. Sempre consigliato. Se disattivo, il codec user? sempre il numero massimo di fotogrammi-B consecutivi."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1121
-msgid "Use as reference"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1166
+msgid "Use as Reference"
 msgstr "Usa come riferimento"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1126
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1171
 msgid "Allow B-frames to make references non-linearly to another B-frame (instead of creating a duplicate copy)"
 msgstr "Consenti ai fotogrammi-B di fare riferimento a un altro fotogramma-B in modo non lineare"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1132
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1177
 msgid "B-Frame Direct Mode"
 msgstr "Modalit? diretta fotogrammi-B "
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1140
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1185
 msgid "Auto"
 msgstr "Auto"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1141
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1186
 msgid "Temporal"
 msgstr "Temporale"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1142
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1187
 msgid "Spatial"
 msgstr "Spaziale"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1145
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1190
 msgid "<b>B-Frames</b>"
 msgstr "<b>Fotogrammi-B</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1150
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1195
 msgid "Partitions & Frames"
 msgstr "Partizioni & Fotogrammi"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1183
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1230
 msgid "Set how much \"bitrate bonus\" a keyframe can get"
 msgstr "Imposta quanti \"bonus di bitrate\" pu? avere un fotogramma chiave"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1186
-msgid "Keyframe boost (%)"
-msgstr "Amplifica fotogrammi chiave (%)"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1193
-msgid "B-frame reduction (%)"
-msgstr "Riduzione fotogrammi-B (%)"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1200
-msgid "Bitrate variability (%)"
-msgstr "Variabilit? bitrate (%)"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1213
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1239
 msgid "Set how much bitrate is deducted from a B-frame as compared to the previous P-frame"
 msgstr "Imposta quanto bitrate ? dedotto dal fotogramma-B rispetto al precedente fotogramma-P"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1222
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1248
 msgid "Define how much the bitrate can fluctuate over the entire video. 0% results in a constant bitrate stream, while 100% results in a pure quality based bitrate stream."
 msgstr "Definisci quanto pu? fluttuare il bitrate sull'intero video. 0% significa un flusso a bitrate costante, mentre 100% significa un flusso bitrate basato sulla qualit?."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1225
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1251
+msgid "Keyframe Boost (%)"
+msgstr "Amplifica fotogrammi chiave (%)"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1258
+msgid "B-frame Reduction (%)"
+msgstr "Riduzione fotogrammi-B (%)"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1265
+msgid "Bitrate Variability (%)"
+msgstr "Variabilit? bitrate (%)"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1272
 msgid "<b>Bitrate</b>"
 msgstr "<b>Bitrate</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1243
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1292
 msgid "Min QP"
 msgstr "Min QP"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1250
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1299
 msgid "Max QP"
 msgstr "Max QP"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1257
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1306
 msgid "Max QP Step"
 msgstr "Max Qp Step"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1271
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1320
 msgid "Enforce a minimum quantizer level"
 msgstr "Imponi un livelo di quantizzatore minimo"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1280
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1329
 msgid "Enforce a maximum quantizer level"
 msgstr "Imponi un livelo di quantizzatore massimo"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1289
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1338
 msgid "Define how much the quantizer rate can change between two consecutive frames"
 msgstr "Definisci quanto pu? cambiare la quantizzazione tra due fotogrammi consecutivi"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1292
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1341
 msgid "<b>Quantization Limits</b>"
 msgstr "<b>Limiti di quantizzazione</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1310
-msgid "Scene Cut Threshold"
-msgstr "Soglia di taglio scene"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1324
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1368
 msgid "Increase / decrease sensitivity for detecting scene changes. Improves I-frame usage and quality."
 msgstr "Aumenta / diminuisci la sensibilita per rilevare cambiamenti di scena. Migliora l'uso dei fotogrammi-I e la qualit?."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1327
-msgid "Min IDR frame interval"
-msgstr "Inervallo minimo fotogrammi IDR"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1371
+msgid "Scene Cut Threshold"
+msgstr "Soglia di taglio scene"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1340
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1378
+msgid "Min IDR Frame Interval"
+msgstr "Intervallo minimo fotogrammi IDR"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1391
 msgid "Set minimum frame interval between IDR frames. Defines the minimum amount a frame can be reused and referenced by other frames before a new IDR frame is established."
 msgstr "Imposta l'intervallo minimo tra fotogrammi IDR. Definisce il minimo numero di volte che un fotogramma pu? essere riutilizzato o preso a riferimento da altri fotogrammi prima che sia stabilito un nuovo IDR."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1349
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1400
 msgid "Set maximum frame interval between IDR frames. Defines the maximum amount a frame can be reused and referenced by other frames before a new IDR frame is established."
 msgstr "Imposta l'intervallo massimo tra fotogrammi IDR. Definisce il massimo numero di volte che un fotogramma pu? essere riutilizzato o preso a riferimento da altri fotogrammi prima che sia stabilito un nuovo IDR."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1352
-msgid "Max IDR frame interval"
-msgstr "Inervallo massimo fotogrammi IDR"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1403
+msgid "Max IDR Frame Interval"
+msgstr "Intervallo massimo fotogrammi IDR"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1359
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1410
 msgid "<b>More Rate Settings</b>"
 msgstr "<b>Altre opzioni</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1377
-msgid "VBV buffer size"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1430
+msgid "VBV Buffer Size"
 msgstr "Dimensione buffer VBV"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1384
-msgid "Initial VBV buffer (%)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1437
+msgid "Initial VBV Buffer (%)"
 msgstr "Buffer VBV iniziale (%)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1391
-msgid "Maximum local bitrate"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1444
+msgid "Maximum Local Bitrate"
 msgstr "Bitrate locale massimo"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1422
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1475
 msgid "<b>Video Buffer Verifier</b>"
 msgstr "<b>Verificatore buffer video</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1459
-msgid "Allowed variance of average bitrate. Lower values mean less variance. Higher values mean more variance."
-msgstr "Varianza consentita del bitrate medio. Valori pi? alti significano maggiore varianza."
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1462
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1508
 msgid "Bitrate Variance"
 msgstr "Varianza bitrate"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1475
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1521
+msgid "Allowed variance of average bitrate. Lower values mean less variance. Higher values mean more variance."
+msgstr "Varianza consentita del bitrate medio. Valori pi? alti significano maggiore varianza."
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1530
 msgid "Allowed variance of average quantizer or quality. Lower values mean less variance. Higher values mean more variance. Note that 0 means constant quality while 1 means constant fluctuation. Recommended 0.6."
 msgstr "Varianza consentita della qualit? media. Valori pi? alti significano maggiore varianza. Nota che 0 significa qualit? costante mentre 1 fluttuazione costante. 0,6 consigliato."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1484
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1539
 msgid "Reduced fluctuations in Quantizer (before curve compression)"
 msgstr "Fluttuazioni ridotte nel quantizzatore (prima di compressione curva)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1493
-msgid "Reduce fluctuations in Quantizer (after curve compression)"
-msgstr "Fluttuazioni ridotte nel quantizzatore (dopo compressione curva)"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1496
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1550
 msgid "Quantizer Compression"
 msgstr "Compressione quantizzatore"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1503
-msgid "Temp. Blur of est Frame Complexity"
-msgstr "Sfocatura temp. complessit? fotogramma est"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1557
+msgid "Temp. Blur of Est. Frame Complexity"
+msgstr "Sfocatura temp. complessit? fotogramma est."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1510
-msgid "Temp. Blur of Quant after CC"
-msgstr "Sfocatura temp. quantizzatore dopo CC"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1564
+msgid "Temp. Blur of Quant. after CC"
+msgstr "Sfocatura temp. quant. dopo CC"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1517
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1571
 msgid "<b>Misc</b>"
 msgstr "<b>Varie</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1541
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1597
 msgid "Quantization factors used between I and P-frames"
 msgstr "Fattori di quantizzazione usati tra fotogrammi I e P"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1550
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1606
 msgid "Quantization used between P and B-frames"
 msgstr "Quantizzazione usata tra fotogrammi P e B"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1559
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1615
 msgid "Quantization difference between chroma (color) and luma (brightness)"
 msgstr "Differenza di quantizzazione tra croma (colore) e luma (luminost?)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1562
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1618
 msgid "Factor between I and P-frame Quants"
 msgstr "Fattore tra quantizzazione fotogrammi I e P"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1569
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1625
 msgid "Factor between P and B-frame Quants"
 msgstr "Fattore tra quantizzazione fotogrammi P e B"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1576
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1632
 msgid "Chroma QP Offset"
 msgstr "Offset Croma QP"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1583
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1639
 msgid "<b>Quantizers</b>"
 msgstr "<b>Quantizzatori</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1601
-msgid "Custom matrix"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1657
+msgid "Flat Matrix"
+msgstr "Matrice piana"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1664
+msgid "JVT Matrix"
+msgstr "Matrice JVT"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1674
+msgid "Custom Matrix"
 msgstr "Matrice personalizzata"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1610
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1684
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1128
 msgid "Open CQM file"
 msgstr "Apri file CQM"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1616
-msgid "JVT matrix"
-msgstr "Matrice JVT"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1624
-msgid "Flat matrix"
-msgstr "Matrice piana"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1633
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1692
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1136
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1568
 msgid "Edit Custom Matrix"
 msgstr "Modifica matrice personalizzata"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1638
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1695
 msgid "Edit loaded custom quantization matrix file"
 msgstr "Modifica la matrice di quantizzazione personalizzata caricata"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1646
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1697
 msgid "<b>Quantization Matrices</b>"
 msgstr "<b>Quantizzazione matrici</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1651
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1702
 msgid "More"
 msgstr "Altro"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1659
-msgid "Defaults"
-msgstr "Predefiniti"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1710
+msgid "_Defaults"
+msgstr "_Predefiniti"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:237
 msgid "Xvid Encoder"
@@ -5546,10 +5362,6 @@
 msgid "Max P Frame Qzer"
 msgstr "Max. quantiz. fotogramma P"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:480
-msgid "Quantizer"
-msgstr "Quantizzatore"
-
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:485
 msgid "Not Yet!"
 msgstr "Non ancora!"
@@ -5592,8 +5404,8 @@
 msgstr "Bitrate finale (kb/s):"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:362
-msgid "Target size (MBytes):"
-msgstr "Dimensione finale (MB):"
+msgid "Target video size (MB):"
+msgstr "Dimensione video finale (MB):"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:479
 msgid "Select Custom Matrix File to write"
@@ -5628,25 +5440,16 @@
 msgstr "Seleziona codifica a 1 o a 2 passate"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:760
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:123
-msgid "Single pass - bitrate"
-msgstr "Passata singola - bitrate"
+msgid "Single Pass - Bitrate"
+msgstr "Passata singola - Bitrate"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:764
-msgid "Single pass - quantizer"
-msgstr "Passata singola - quantizzatore"
+msgid "Single Pass - Quantizer"
+msgstr "Passata singola - Quantizzatore"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:768
-msgid "Two pass, final size"
-msgstr "Due passate - dimensione finale"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:772
-msgid "Two pass, average bitrate"
-msgstr "Due passate - bitrate variabile"
-
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:776
-msgid "Same Qz as input"
-msgstr "Stesso Qz dell'input"
+msgid "Same Quantizer as Input"
+msgstr "Stesso quantizzatore dell'input"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:785
 msgid "Target video bitrate"
@@ -5843,6 +5646,10 @@
 msgid "Produces nicer-looking B-frames"
 msgstr "Produce fotogrammi-B migliori"
 
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1040
+msgid "As input"
+msgstr "Come in ingresso"
+
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1043
 msgid "Get PAR from input video file"
 msgstr "Recupera proporzioni dal video in ingresso"
@@ -6024,6 +5831,10 @@
 msgid "_Encoding mode:"
 msgstr "Modalit? di _codifica:"
 
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:123
+msgid "Single pass - bitrate"
+msgstr "Passata singola - bitrate"
+
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:125
 msgid "Single pass - constant quality"
 msgstr "Passata singola - qualit? costante"
@@ -7058,6 +6869,11 @@
 msgstr "Fotogramma _finale (ultimo numero di fotogramma da includere), -1 = ultimo:"
 
 #: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:189
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:191
+msgid "_Output File:"
+msgstr "File in _uscita:"
+
+#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:189
 msgid "Select output file"
 msgstr "Seleziona il file in uscita"
 
@@ -7338,7 +7154,7 @@
 
 #: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:255
 #: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:196
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:371
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:378
 #: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:159
 msgid "_Debugging settings (bits):"
 msgstr "Impostazioni di _debug (bit):"
@@ -7614,7 +7430,7 @@
 msgstr "Crop _inferiore (ignora questo numero di particelle):"
 
 #: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:191
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:321
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:324
 #: avidemux/gtk_gui.cpp:2016
 #: avidemux/gtk_gui.cpp:2113
 msgid "Select file"
@@ -7684,79 +7500,79 @@
 msgid "Stabilize Threshold"
 msgstr "Stabilizza soglia"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:258
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:261
 msgid "P' = A"
 msgstr "P' = A"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:259
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:262
 msgid "P' = P"
 msgstr "P' = P"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:260
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:263
 msgid "P' = P - A"
 msgstr "P' = P - A"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:261
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:264
 msgid "P' = A - P"
 msgstr "P' = A - P"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:262
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:265
 msgid "P' = P + A"
 msgstr "P' = P + A"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:263
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:266
 msgid "P' = P * A"
 msgstr "P' = P * A"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:264
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:267
 msgid "P' = P / A"
 msgstr "P' = P / A"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:265
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:268
 msgid "P' = A / P"
 msgstr "P' = A / P"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:266
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:269
 msgid "P' = min (P, A)"
 msgstr "P' = min (P, A)"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:267
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:270
 msgid "P' = max (P, A)"
 msgstr "P' = max (P, A)"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:272
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:275
 msgid "A = convolve(P); Load convolution kernel from file"
 msgstr "A = avvolgi(P); carica nucleo di avvolgimento da file"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:274
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:277
 msgid "A = pixel from image file as float; Load image from file"
 msgstr "A = pixel dal file immagine come float; carica immagine da file"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:276
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:279
 msgid "A = pixel from image file as integer; Load image from file"
 msgstr "A = pixel dal file immagine come integer; carica immagine da file"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:278
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:281
 msgid "A = floating point constant value"
 msgstr "A = valore costante virgola mobile"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:280
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:283
 msgid "A = rolling average of pixel: A = A*(1-alpha)+(P*alpha)"
 msgstr "A = media mobile di pixel: A = A*(1-alpha)+(P*alpha)"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:285
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:288
 msgid "Select _Operation on each pixel P and input A:"
 msgstr "_Seleziona opeazione per ogni pixel P e input A:"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:290
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:293
 msgid "Input _Type:"
 msgstr "_Tipo in ingresso:"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:321
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:324
 msgid "Input _File (image or convolution kernel):"
 msgstr "_File di ingresso (immagine o nucleo di avvolgimento):"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:324
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:327
 msgid ""
 "_Load Bias (added to each pixel\n"
 "in file image when loaded):"
@@ -7764,7 +7580,7 @@
 "_Carica Bias (aggiunto a ogni pixel\n"
 "nell'immagine al caricamento):"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:329
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:332
 msgid ""
 "Load _Multiplier (each pixel in\n"
 "file image mult. by this when loaded):"
@@ -7772,43 +7588,47 @@
 "Carica _Moltiplicatore (ogni pixel nell'immagine\n"
 "moltiplicato per questo valore al caricamento):"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:335
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:338
 msgid "Input _Constant:"
 msgstr "Costant_e in ingresso:"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:339
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:342
 msgid ""
 "Memory constant _alpha\n"
-"(where A = (1-alpha)*A + alpha*curr_frame):"
+"(where A = (1-alpha)*A + alpha*(curr_frame + lookahead)):"
 msgstr ""
 "Costante di memoria _alpha\n"
-"(dove A = (1-alpha)*A + alpha*fotogrammacorrente):"
+"(dove A = (1-alpha)*A + alpha*(fotogrammacorrente + N fotogrammi):"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:344
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:347
+msgid "Look ahead _N frames:"
+msgstr "_N fotogrammi successivi:"
+
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:351
 msgid "Init _Start Frame (first frame # to use for head start):"
 msgstr ""
 "Ini_zializza fotogramma iniziale (primo numero\n"
 "di fotogramma da usare per la partenza facilitata):"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:348
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:355
 msgid "Init _End Frame (last frame # to use for head start):"
 msgstr ""
 "Inizia_lizza fotogramma finale (ultimo numero\n"
 "di fotogramma da usare per la partenza facilitata):"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:352
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:359
 msgid "Init By _Rolling (compute head start using a rolling average rather than a straight average)"
 msgstr "Inizializza con media mobile (elabo_ra partenza facilitata usando una media mobile invece di una media diretta)"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:357
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:364
 msgid "_Bias (will be added to result):"
 msgstr "_Bias (sar? aggiunto al risultato):"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:360
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:367
 msgid "_Result Bias (added to each result pixel):"
 msgstr "Bias _risultato (aggiunto a ogni pixel risultato):"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:364
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:371
 msgid ""
 "Result _Multiplier (each result pixel\n"
 "multiplied by this):"
@@ -7816,7 +7636,7 @@
 "_Moltiplicatore risultato (ogni pixel nell'immagine\n"
 "moltiplicato per questo valore):"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:369
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:376
 msgid "_Histogram every N frames (0 to disable):"
 msgstr "_Istogramma ogni N fotogrammi (0 per disattivare):"
 



From mean at mail.berlios.de  Wed Mar 12 19:54:26 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Wed, 12 Mar 2008 19:54:26 +0100
Subject: [Avidemux-svn-commit] r3873 - in
 branches/avidemux_2.5_branch_mean_merged: . avidemux
 avidemux/ADM_audiodevice avidemux/ADM_audiofilter avidemux/ADM_codecs
 avidemux/ADM_colorspace avidemux/ADM_core/include avidemux/ADM_core/src
 avidemux/ADM_filter avidemux/ADM_inputs/ADM_inpics
 avidemux/ADM_libraries/ADM_libmpeg2enc
 avidemux/ADM_libraries/ADM_libswscale avidemux/ADM_libraries/ADM_mplex
 avidemux/ADM_libraries/ADM_smjs avidemux/ADM_libraries/ADM_utilities
 avidemux/ADM_osSupport avidemux/ADM_outputs/oplug_avi
 avidemux/ADM_outputs/oplug_dummy avidemux/ADM_outputs/oplug_flv
 avidemux/ADM_outputs/oplug_mpeg avidemux/ADM_outputs/oplug_mpegFF
 avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog
 avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters
 avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2
 avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr
 avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk
 avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog
 avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui
 avidemux/ADM_userInterfaces/ADM_c! ommonUI avidemux/ADM_video
 avidemux/ADM_videoFilter cmake
Message-ID: <200803121854.m2CIsQgs002727@sheep.berlios.de>

Author: mean
Date: 2008-03-12 19:54:14 +0100 (Wed, 12 Mar 2008)
New Revision: 3873

Modified:
   branches/avidemux_2.5_branch_mean_merged/CMakeLists.txt
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiodevice/ADM_audiodevice.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiodevice/ADM_deviceArts.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/audioencoder_lame.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/audiofilter_buildchain.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_codecs/ADM_theora_dec.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_colorspace/ADM_colorspace.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_colorspace/ADM_rgb.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_colorspace/rgb2yuv.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/include/ADM_assert.h
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/include/ADM_clock.h
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/include/ADM_cpuCap.h
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/include/ADM_default.h
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/include/ADM_dynamicLoading.h
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/include/ADM_inttype.h
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/include/ADM_mangle.h
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/include/ADM_misc.h
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/src/ADM_crashdump.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/src/ADM_fileio.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/src/ADM_memcpy.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/src/ADM_win32.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/src/CMakeLists.txt
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_filter/filter_saveload.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_inputs/ADM_inpics/ADM_pics.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_libmpeg2enc/mblock_sumsq_mmx.cc
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_libswscale/ADM_mp.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_libswscale/rgb2rgb.c
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_mplex/ADM_mplexin.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_mplex/ADM_mplexmuxer.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_mplex/ADM_transfert.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_mplex/cpu_accel.c
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_smjs/jscntxt.h
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_utilities/ADM_imageLoader.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_utilities/ADM_imageUtils.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_osSupport/ADM_crashHook.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_osSupport/ADM_misc.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_osSupport/ADM_quota.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_outputs/oplug_avi/op_avisave.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_outputs/oplug_avi/op_avisave.h
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_outputs/oplug_avi/op_avisavecopy.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_pack.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_unpack.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_outputs/oplug_avi/op_savesmart.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_equalizer.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_mpdelogo.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_working.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filterlist.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtersub.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_ocr.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/ADM_gladeSupport.h
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/toolkit_gtk.h
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_none.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_xvid4.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_encoding.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_srt.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_index_pg.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/file_qt4.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioconfig.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavDecoder.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_mjpeg.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_commonUI/GUI_render.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_commonUI/GUI_sdlRender.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_video/ADM_interlaced.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_video/ADM_vidCNR2.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_video/ADM_vidColorYuv.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_video/ADM_vidFont.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_video/ADM_vidMPdelogo.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_guiResize.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_resizebis.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidASS.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidAddBorder.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidAnimated.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidBSmear.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidBlend.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidDGbob.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidDecDec.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidDeintASM.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidDenoise.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidDropOut.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidFade.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidFields.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidForcedPP.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidLargeMedian.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidMPLD3D.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidMPLD3Dlow.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidMPLResize.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidMSharpen.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidMosaic.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidMsmooth.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidPalShift.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidParticle.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidResampleFPS.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidSRT.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidSRTRender.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidSRTload.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidSoften.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidStabilize.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidThreshold.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidVlad.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidYadif.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADMmpdetc.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/CMakeLists.txt
   branches/avidemux_2.5_branch_mean_merged/avidemux/avi_vars.h
   branches/avidemux_2.5_branch_mean_merged/avidemux/gui_savenew.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/main.cpp
   branches/avidemux_2.5_branch_mean_merged/cmake/admConfigHelper.cmake
   branches/avidemux_2.5_branch_mean_merged/cmake/admDetermineSystem.cmake
   branches/avidemux_2.5_branch_mean_merged/cmake/config.h.cmake
Log:
[Branches] Merged r3865 from gruntster


Modified: branches/avidemux_2.5_branch_mean_merged/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/CMakeLists.txt	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/CMakeLists.txt	2008-03-12 18:54:14 UTC (rev 3873)
@@ -126,7 +126,6 @@
 CHECK_INCLUDE_FILES(inttypes.h   HAVE_INTTYPES_H)	# internal use, mpeg2enc, mplex
 CHECK_INCLUDE_FILES(stdint.h     HAVE_STDINT_H)		# internal use, mpeg2enc, mplex
 CHECK_INCLUDE_FILES(sys/types.h  HAVE_SYS_TYPES_H)	# mad, mpeg2enc
-CHECK_INCLUDE_FILES(unistd.h     HAVE_UNISTD_H)		# internal use, ass, mad
 CHECK_INCLUDE_FILES(malloc.h     HAVE_MALLOC_H)		# libavcodec, libavutil, libpostproc, libswscale, mplex
 
 MESSAGE("")
@@ -145,16 +144,19 @@
 ########################################
 # Generate config.h
 ########################################
+CONFIGURE_FILE("${CMAKE_SOURCE_DIR}/cmake/ADM_coreConfig.h.cmake" "${CMAKE_BINARY_DIR}/config/ADM_coreConfig.h")
+MESSAGE(STATUS "ADM_coreConfig.h generated")
+
 SET(CONFIG_HEADER_TYPE ADM_BUILD_CLI)
-CONFIGURE_FILE("${CMAKE_SOURCE_DIR}/cmake/config.h.cmake" "${CMAKE_CURRENT_BINARY_DIR}/config/cli/config.h")
+CONFIGURE_FILE("${CMAKE_SOURCE_DIR}/cmake/config.h.cmake" "${CMAKE_BINARY_DIR}/config/cli/config.h")
 MESSAGE(STATUS "CLI config.h generated")
 
 SET(CONFIG_HEADER_TYPE ADM_BUILD_GTK)
-CONFIGURE_FILE("${CMAKE_SOURCE_DIR}/cmake/config.h.cmake" "${CMAKE_CURRENT_BINARY_DIR}/config/gtk/config.h")
+CONFIGURE_FILE("${CMAKE_SOURCE_DIR}/cmake/config.h.cmake" "${CMAKE_BINARY_DIR}/config/gtk/config.h")
 MESSAGE(STATUS "GTK config.h generated")
 
 SET(CONFIG_HEADER_TYPE ADM_BUILD_QT4)
-CONFIGURE_FILE("${CMAKE_SOURCE_DIR}/cmake/config.h.cmake" "${CMAKE_CURRENT_BINARY_DIR}/config/qt4/config.h")
+CONFIGURE_FILE("${CMAKE_SOURCE_DIR}/cmake/config.h.cmake" "${CMAKE_BINARY_DIR}/config/qt4/config.h")
 MESSAGE(STATUS "Qt4 config.h generated")
 
 ########################################

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiodevice/ADM_audiodevice.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiodevice/ADM_audiodevice.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiodevice/ADM_audiodevice.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -15,24 +15,22 @@
  *                                                                         *
  ***************************************************************************/
 #include "config.h"
-#ifdef USE_ARTS
-#include <artsc.h>
-#endif
 
+#ifdef HAVE_AUDIO
 #include <stdio.h>
 #include <stdlib.h>
-
 #include <errno.h>
 
 #include "avi_vars.h"
 #include "prefs.h"
-#ifdef HAVE_AUDIO
+
 #include "ADM_assert.h"
 #include "ADM_audiodevice.h"
 
 #include "ADM_audiodevice/ADM_deviceoss.h"
 
 #ifdef USE_ARTS
+#include <artsc.h>
 #include "ADM_audiodevice/ADM_deviceArts.h"
 #endif
 

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiodevice/ADM_deviceArts.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiodevice/ADM_deviceArts.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiodevice/ADM_deviceArts.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -15,12 +15,12 @@
  *                                                                         *
  ***************************************************************************/
 
+#include "config.h"
 #include "ADM_default.h"
 
 #ifdef USE_ARTS
 #include <artsc.h>
 
-#include "ADM_assert.h"  
 #include "ADM_audiodevice.h"
 #include  "ADM_audiodevice/ADM_deviceoss.h"
 #include  "ADM_audiodevice/ADM_deviceArts.h"

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/audioencoder_lame.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/audioencoder_lame.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/audioencoder_lame.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -11,20 +11,16 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include "ADM_default.h"
+#include "config.h"
 
 #ifdef HAVE_LIBMP3LAME
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <math.h>
+#include <lame/lame.h>
 
+#include "ADM_default.h"
 #include "audioprocess.hxx"
 #include "audioeng_process.h"
 #include "audioencoder.h"
-//
 
-#include "lame/lame.h"
 #include "ADM_audiofilter/audioencoder_lame_param.h"
 #include "ADM_audiofilter/audioencoder_lame.h"
 

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/audiofilter_buildchain.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/audiofilter_buildchain.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiofilter/audiofilter_buildchain.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -15,11 +15,7 @@
  *                                                                         *
  ***************************************************************************/
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <math.h>
-
+#include "config.h"
 #include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_codecs/ADM_theora_dec.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_codecs/ADM_theora_dec.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_codecs/ADM_theora_dec.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -15,11 +15,7 @@
  *                                                                         *
  ***************************************************************************/
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <math.h>
-
+#include "config.h"
 #include "ADM_default.h"
 
 #ifdef USE_THEORA

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_colorspace/ADM_colorspace.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_colorspace/ADM_colorspace.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_colorspace/ADM_colorspace.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -14,10 +14,7 @@
  *                                                                         *
  ***************************************************************************/
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-
+#include "config.h"
 #include "ADM_default.h"
 #include "colorspace.h"
 

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_colorspace/ADM_rgb.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_colorspace/ADM_rgb.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_colorspace/ADM_rgb.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -18,11 +18,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-
+#include "config.h"
 #include "ADM_default.h"
 #include "colorspace.h"
 

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_colorspace/rgb2yuv.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_colorspace/rgb2yuv.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_colorspace/rgb2yuv.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -19,11 +19,9 @@
  *                                                                         *
  ***************************************************************************/
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
 #include <math.h>
 
+#include "config.h"
 #include "ADM_default.h"
 
 #ifdef ADM_CPU_X86

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/include/ADM_assert.h
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/include/ADM_assert.h	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/include/ADM_assert.h	2008-03-12 18:54:14 UTC (rev 3873)
@@ -15,8 +15,8 @@
  ***************************************************************************/
 #ifndef ADM_ASSERT_H
 #define ADM_ASSERT_H
+#include <assert.h>
 #include "ADM_inttype.h"
-#include <assert.h>
 
 #define ADM_assert(x) { if(!(x)) {ADM_backTrack("Assert failed :"#x,__LINE__,__FILE__);  }}
 

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/include/ADM_clock.h
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/include/ADM_clock.h	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/include/ADM_clock.h	2008-03-12 18:54:14 UTC (rev 3873)
@@ -14,8 +14,8 @@
  *   (at your option) any later version.                                   *
  ***************************************************************************/
 
-#ifndef __CLK__
-#define __CLK__
+#ifndef ADM_CLOCK_H
+#define ADM_CLOCK_H
 class Clock
 {
 	private: uint32_t _startTime;

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/include/ADM_cpuCap.h
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/include/ADM_cpuCap.h	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/include/ADM_cpuCap.h	2008-03-12 18:54:14 UTC (rev 3873)
@@ -13,7 +13,11 @@
  *   the Free Software Foundation; either version 2 of the License, or     *
  *   (at your option) any later version.                                   *
  ***************************************************************************/
+#ifndef ADM_CPUCAP_H
+#define ADM_CPUCAP_H
 
+#include "ADM_coreConfig.h"
+
 #ifdef ADM_CPU_X86
 
 #define CHECK_Z(x) {if(CpuCaps::myCpuCaps & ADM_CPUCAP_##x & CpuCaps::myCpuMask) return 1; else return 0;} 
@@ -56,3 +60,4 @@
 
 
 };
+#endif

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/include/ADM_default.h
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/include/ADM_default.h	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/include/ADM_default.h	2008-03-12 18:54:14 UTC (rev 3873)
@@ -19,12 +19,11 @@
 #ifndef ADM_DEFAULT_H
 #define ADM_DEFAULT_H
 
-#include "config.h"
-
 #include <stdio.h>
 #include <stdlib.h>
 #include <string.h>
 
+#include "ADM_coreConfig.h"
 #include "ADM_inttype.h"
 #include "ADM_assert.h"
 

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/include/ADM_dynamicLoading.h
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/include/ADM_dynamicLoading.h	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/include/ADM_dynamicLoading.h	2008-03-12 18:54:14 UTC (rev 3873)
@@ -14,8 +14,8 @@
  *   (at your option) any later version.                                   *
  ***************************************************************************/
 
-#ifndef LIBWRAPPER
-#define LIBWRAPPER
+#ifndef ADM_DYNAMICLOADING_H
+#define ADM_DYNAMICLOADING_H
 
 class ADM_LibWrapper
 {

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/include/ADM_inttype.h
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/include/ADM_inttype.h	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/include/ADM_inttype.h	2008-03-12 18:54:14 UTC (rev 3873)
@@ -6,17 +6,15 @@
     
  ***************************************************************************/
 
-#ifndef __ZDEFAULT
-#define __ZDEFAULT
+#ifndef ADM_INTTYPE_H
+#define ADM_INTTYPE_H
 
-#include "config.h"
+#include "ADM_coreConfig.h"
 
 #include <stdio.h>
 #include <stdlib.h>
 #include <string.h>
-#ifdef HAVE_UNISTD_H
 #include <unistd.h>
-#endif
 
 /*
    	The maximum width/height is MAXIMUM_SIZE 768*768 for now
@@ -48,16 +46,15 @@
 #define int32_t 	signed long  int
 #define int64_t 	signed long  long
 #define uint64_t 	unsigned long  long
+#endif	// ADM_CPU_64BIT
 
-#endif
 #define uint8_t  	unsigned char
 #define int8_t   	signed char
-
 #define int16_t 	signed short int
 #define uint16_t 	unsigned short int
 #define uint32_t 	unsigned long  int
+#endif	// GOT_TYPES
 
-#endif
 #define UNUSED_ARG(a) do {/* null */} while (&a == 0)
 
 #define MKFCC(a,b,c,d)   ((d<<24)+(c<<16)+(b<<8)+a)
@@ -70,28 +67,4 @@
 #define ADM_OK 	1
 #define ADM_IGN 2
 
-/*
- * Standard gettext macros.
- */
-#ifdef HAVE_GETTEXT
-#  include <libintl.h>
-#  undef _
 #endif
-
-extern const char* translate(const char *__domainname, const char *__msgid);
-
-#ifdef QT_TR_NOOP
-#undef QT_TR_NOOP
-#endif
-
-#define QT_TR_NOOP(String) translate (PACKAGE, String)
-
-#if (defined( HAVE_LIBESD) && defined(HAVE_ESD_H)) || \
- defined(OSS_SUPPORT) || defined (USE_ARTS) || \
-  defined(USE_SDL) || defined(__APPLE__) || \
-  defined(__WIN32) || defined(ALSA_SUPPORT)
-  
-#define HAVE_AUDIO
-#endif
-               
-#endif

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/include/ADM_mangle.h
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/include/ADM_mangle.h	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/include/ADM_mangle.h	2008-03-12 18:54:14 UTC (rev 3873)
@@ -6,6 +6,11 @@
     
  ***************************************************************************/
 
+#ifndef ADM_MANGLE_H
+#define ADM_MANGLE_H
+
+#include "ADM_coreConfig.h"
+
 #if ( defined(__PIC__) || defined(__pic__) ) && ! defined(PIC)
 #    define PIC
 #endif
@@ -80,3 +85,4 @@
 #endif
 
 #define ASM_CONST attribute_used __attribute__ ((aligned(8)))
+#endif

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/include/ADM_misc.h
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/include/ADM_misc.h	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/include/ADM_misc.h	2008-03-12 18:54:14 UTC (rev 3873)
@@ -6,10 +6,10 @@
     
  ***************************************************************************/
 
+#ifndef ADM_MISC_H
+#define ADM_MISC_H
 
-#ifndef __ADM_MISC__
-#define __ADM_MISC__
-//#include "time.h"
+#include "ADM_coreConfig.h"
 
 typedef enum 
 {

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/src/ADM_crashdump.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/src/ADM_crashdump.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/src/ADM_crashdump.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -250,8 +250,6 @@
 	if (myFatalFunction)
 		myFatalFunction("Crash", "Press OK to build crash info");
 
-	GUI_Error_HIG(QT_TR_NOOP("Fatal Error"),QT_TR_NOOP("A fatal error has occurred.\n\nClick OK to generate debug information. This may take a few minutes to complete."));
-
 	void* currentProcessId = GetCurrentProcess();
 
 	SymInitialize(currentProcessId, NULL, TRUE);

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/src/ADM_fileio.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/src/ADM_fileio.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/src/ADM_fileio.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -172,14 +172,14 @@
 #if defined(__WIN32)
         if( ! (home=getenv("USERPROFILE")) )
         {
-          GUI_Error_HIG(QT_TR_NOOP("Oops"),QT_TR_NOOP("can't determine $USERPROFILE."));
+          GUI_Error_HIG("Oops","can't determine $USERPROFILE.");
                     home="c:\\";
         }
 
 #else
         if( ! (home=getenv("HOME")) )
         {
-          GUI_Error_HIG(QT_TR_NOOP("Oops"),QT_TR_NOOP("can't determine $HOME."));
+          GUI_Error_HIG("Oops","can't determine $HOME.");
                 return NULL;
         }
 #endif
@@ -190,7 +190,7 @@
         strcat(dirname,ADM_DIR_NAME);
         if(!ADM_mkdir(dirname))
         {
-          GUI_Error_HIG(QT_TR_NOOP("Oops"),QT_TR_NOOP("Cannot create the .avidemux directory"), NULL);
+          GUI_Error_HIG("Oops","Cannot create the .avidemux directory", NULL);
                         delete [] dirname;
                         return NULL;
         }

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/src/ADM_memcpy.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/src/ADM_memcpy.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/src/ADM_memcpy.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -386,22 +386,22 @@
 {
   { NULL, NULL, 0, 0 },
   { "libc memcpy()", memcpy, 0, 0 },
-#if defined( ARCH_X86)  || defined(ARCH_X86_64)
+#if defined(ADM_CPU_X86)
   { "linux kernel memcpy()", linux_kernel_memcpy, 0, 0 },
-#if defined( ARCH_X86)  || defined(ARCH_X86_64)
+#if defined(ADM_CPU_X86)
   { "MMX optimized memcpy()", mmx_memcpy, 0, MM_MMX },
   { "MMXEXT optimized memcpy()", mmx2_memcpy, 0, MM_MMXEXT },
   { "SSE optimized memcpy()", sse_memcpy, 0, MM_MMXEXT|MM_SSE },
 #endif
 #endif /* ARCH_X86 */
-#if 0 && defined (ARCH_PPC) && !defined (HOST_OS_DARWIN)
+#if 0 && defined(ADM_CPU_PPC) && !defined (__APPLE__)
   { "ppcasm_memcpy()", ppcasm_memcpy, 0, 0 },
   { "ppcasm_cacheable_memcpy()", ppcasm_cacheable_memcpy, 0, MM_ACCEL_PPC_CACHE32 },
 #endif /* ARCH_PPC && !HOST_OS_DARWIN */
   { NULL, NULL, 0, 0 }
 };
 
-#if defined( ARCH_X86)  || defined(ARCH_X86_64)
+#if defined(ADM_CPU_X86)
 static unsigned long long int rdtsc(void)
 {
   unsigned long long int x;
@@ -453,14 +453,14 @@
   int               config_flags = 0;
 #undef memcpy
         myAdmMemcpy=memcpy;
-#if defined( ARCH_X86)  || defined(ARCH_X86_64)
+#if defined(ADM_CPU_X86)
         if(CpuCaps::hasMMX())
                 myAdmMemcpy=mmx_memcpy;
 #endif
 #if 0
 	probe(memcpy,"libc");
 	probe(linux_kernel_memcpy,"kernel");
-#if defined( ARCH_X86)  || defined(ARCH_X86_64)
+#if defined(ADM_CPU_X86)
 	if(CpuCaps::hasMMX()) probe(mmx_memcpy,"mmx");
 	if(CpuCaps::hasMMXEXT()) probe(mmx_memcpy,"mmxext");
 	if(CpuCaps::hasSSE()) probe(sse_memcpy,"sse");

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/src/ADM_win32.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/src/ADM_win32.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/src/ADM_win32.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -402,7 +402,6 @@
 	// This allows us to optionally compile all EXEs as console applications
 	// so the output can be printed to the terminal for debugging purposes.
 
-#ifdef USE_SDL
 	// Close SDL generated logs
 	fclose(stdout);
 	fclose(stderr);
@@ -448,6 +447,5 @@
 	setvbuf(stderr, NULL, _IOLBF, BUFSIZ);
 
 	delete[] logPath;
-#endif	// USE_SDL
 }
 #endif	// __WIN32

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/src/CMakeLists.txt	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/src/CMakeLists.txt	2008-03-12 18:54:14 UTC (rev 3873)
@@ -3,4 +3,6 @@
 	ADM_memory.cpp  ADM_misc.cpp  TLK_clock.cpp  ADM_crashdump.cpp  ADM_fileio.cpp ADM_dynamicLoading.cpp)
 
 ADD_ADM_LIB_ALL_TARGETS(ADM_core ${ADM_core_SRCS})
-ADD_SOURCE_CFLAGS(ADM_fileio.cpp ${GLIB_CFLAGS})
\ No newline at end of file
+ADD_SOURCE_CFLAGS(ADM_fileio.cpp ${GLIB_CFLAGS})
+
+#ADD_TARGET_DEFINITIONS(ADM_core ADM_DEBUG FIND_LEAKS)
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_filter/filter_saveload.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_filter/filter_saveload.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_filter/filter_saveload.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -17,13 +17,14 @@
  *                                                                         *
  ***************************************************************************/
 #define ADM_LEGACY_PROGGY
-#include "ADM_default.h"
-#include "fourcc.h"
+#include "config.h"
+
 #ifdef USE_LIBXML2
 	#include <libxml/tree.h>
 	#include <libxml/parser.h>
 #endif
 
+#include "fourcc.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_osSupport/ADM_quota.h"
 #include "ADM_assert.h"

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_inputs/ADM_inpics/ADM_pics.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_inputs/ADM_inpics/ADM_pics.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_inputs/ADM_inpics/ADM_pics.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -21,7 +21,7 @@
  *                                                                         *
  ***************************************************************************/
 
-#include "ADM_default.h"
+#include "config.h"
 
 #include <stdio.h>
 #include <stdlib.h>

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_libmpeg2enc/mblock_sumsq_mmx.cc
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_libmpeg2enc/mblock_sumsq_mmx.cc	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_libmpeg2enc/mblock_sumsq_mmx.cc	2008-03-12 18:54:14 UTC (rev 3873)
@@ -18,7 +18,7 @@
  *   Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
  */
 
-#include <config.h>
+#include "config.h"
 #include "mjpeg_types.h"
 #ifdef HAVE_X86CPU
 #include "mmx.h"

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_libswscale/ADM_mp.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_libswscale/ADM_mp.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_libswscale/ADM_mp.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -18,7 +18,7 @@
 #include <string.h>
 #include <math.h>
 
-#include "ADM_default.h"
+#include "config.h"
 #include "fourcc.h"
 
 #ifdef ADM_CPU_X86

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_libswscale/rgb2rgb.c
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_libswscale/rgb2rgb.c	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_libswscale/rgb2rgb.c	2008-03-12 18:54:14 UTC (rev 3873)
@@ -26,7 +26,7 @@
  * under the LGPL license too
  */
 // MEANX
-#include "ADM_default.h"
+#include "config.h"
 #include "wrapper.h"
 // /MEANX
 

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_mplex/ADM_mplexin.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_mplex/ADM_mplexin.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_mplex/ADM_mplexin.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -10,10 +10,6 @@
 //
 //
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <math.h>
-#include <string.h>
 #include <sys/stat.h>
 #include <errno.h>
 

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_mplex/ADM_mplexmuxer.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_mplex/ADM_mplexmuxer.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_mplex/ADM_mplexmuxer.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -21,16 +21,11 @@
  *                                                                         *
  ***************************************************************************/
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <math.h>
-#include <string.h>
 #include <sys/stat.h>
 
 #include "ADM_default.h"
 #include "ADM_threads.h"
 
-
 #include "interact.hpp"
 
 #undef malloc

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_mplex/ADM_transfert.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_mplex/ADM_transfert.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_mplex/ADM_transfert.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -18,14 +18,10 @@
  *                                                                         *
  ***************************************************************************/
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-
 #include "ADM_default.h"
 #include "ADM_threads.h"
+#include "ADM_transfert.h"
 
-#include"ADM_transfert.h"
 #define HIGH_LVL        ((TRANSFERT_BUFFER*2)/3)
 #define LOW_LVL         (TRANSFERT_BUFFER/3)
 // minimum amount of audio buffer we need

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_mplex/cpu_accel.c
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_mplex/cpu_accel.c	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_mplex/cpu_accel.c	2008-03-12 18:54:14 UTC (rev 3873)
@@ -21,6 +21,7 @@
 
 #define ADM_LEGACY_PROGGY
 #include "ADM_default.h"
+
 #include <signal.h>
 #include <setjmp.h>
 #include <unistd.h>

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_smjs/jscntxt.h
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_smjs/jscntxt.h	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_smjs/jscntxt.h	2008-03-12 18:54:14 UTC (rev 3873)
@@ -415,7 +415,7 @@
  * JS_PUSH_TEMP_ROOT_OBJECT and JS_PUSH_TEMP_ROOT_STRING are type-safe
  * alternatives to JS_PUSH_TEMP_ROOT_GCTHING for JSObject and JSString. They
  * also provide a simple way to get a single pointer to rooted JSObject or
- * JSString via JS_PUSH_TEMP_ROOTQT_TR_NOOP(OBJECT|STRTING)(cx, NULL, &tvr). Then
+ * JSString via JS_PUSH_TEMP_ROOT_(OBJECT|STRTING)(cx, NULL, &tvr). Then
  * &tvr.u.object or tvr.u.string gives the necessary pointer, which puns
  * tvr.u.value safely because JSObject * and JSString * are GC-things and, as
  * such, their tag bits are all zeroes.

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_utilities/ADM_imageLoader.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_utilities/ADM_imageLoader.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_utilities/ADM_imageLoader.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -12,10 +12,7 @@
  *                                                                         *
  ***************************************************************************/
 
-#include <stdlib.h>
-#include <stdio.h>
-#include <string.h>
-
+#include "config.h"
 #include "ADM_default.h"
 
 #include "ADM_lavcodec.h"

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_utilities/ADM_imageUtils.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_utilities/ADM_imageUtils.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_utilities/ADM_imageUtils.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -12,7 +12,7 @@
  *                                                                         *
  ***************************************************************************/
 
-#include "ADM_default.h"
+#include "config.h"
 
 #include <stdlib.h>
 #include <stdio.h>

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_osSupport/ADM_crashHook.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_osSupport/ADM_crashHook.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_osSupport/ADM_crashHook.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -14,6 +14,7 @@
  *                                                                         *
  ***************************************************************************/
 
+#include "config.h"
 #include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_osSupport/ADM_misc.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_osSupport/ADM_misc.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_osSupport/ADM_misc.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -1,6 +1,8 @@
+#include <math.h>
 
+#include "config.h"
 #include "ADM_default.h"
-#include "math.h"
+
 char* ms2timedisplay(uint32_t ms)
 {
 	uint32_t mm, ss;

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_osSupport/ADM_quota.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_osSupport/ADM_quota.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_osSupport/ADM_quota.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -3,8 +3,10 @@
                 \brief handle out of space error when writing to files
 */
 #define ADM_LEGACY_PROGGY
+#include <errno.h>
+
+#include "config.h"
 #include "ADM_default.h"
-#include <errno.h>
 #include "ADM_quota.h"
 
 #undef free

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_outputs/oplug_avi/op_avisave.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_outputs/oplug_avi/op_avisave.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_outputs/oplug_avi/op_avisave.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -26,10 +26,10 @@
 #include <time.h>
 #include <sys/time.h>
 
+#include "config.h"
 #include "ADM_default.h"
 #include "ADM_threads.h"
 
-
 #include "fourcc.h"
 #include "avi_vars.h"
 #include "ADM_toolkit/toolkit.hxx"

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_outputs/oplug_avi/op_avisave.h
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_outputs/oplug_avi/op_avisave.h	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_outputs/oplug_avi/op_avisave.h	2008-03-12 18:54:14 UTC (rev 3873)
@@ -18,10 +18,10 @@
  #define   __AVI_SAVE__
 
 #include "ADM_default.h"
- #include "ADM_userInterfaces/ADM_commonUI/DIA_working.h"
- #include "ADM_userInterfaces/ADM_commonUI/DIA_encoding.h"
- #include "ADM_image.h"
- #include "ADM_osSupport/ADM_fileio.h"
+#include "ADM_userInterfaces/ADM_commonUI/DIA_working.h"
+#include "ADM_userInterfaces/ADM_commonUI/DIA_encoding.h"
+#include "ADM_image.h"
+#include "ADM_osSupport/ADM_fileio.h"
 #include "ADM_toolkit/ADM_audioQueue.h"
 
  class GenericAviSave

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_outputs/oplug_avi/op_avisavecopy.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_outputs/oplug_avi/op_avisavecopy.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_outputs/oplug_avi/op_avisavecopy.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -27,6 +27,7 @@
 #include <time.h>
 #include <sys/time.h>
 
+#include "config.h"
 #include "ADM_default.h"
 #include "ADM_threads.h"
 

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_pack.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_pack.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_pack.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -23,6 +23,7 @@
 #include <time.h>
 #include <sys/time.h>
 
+#include "config.h"
 #include "ADM_default.h"
 #include "ADM_threads.h"
 

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_unpack.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_unpack.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_unpack.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -27,6 +27,7 @@
 #include <time.h>
 #include <sys/time.h>
 
+#include "config.h"
 #include "ADM_default.h"
 #include "ADM_threads.h"
 

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -25,6 +25,7 @@
 #include <time.h>
 #include <sys/time.h>
 
+#include "config.h"
 #include "ADM_default.h"
 #include "ADM_threads.h"
 

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_outputs/oplug_avi/op_savesmart.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_outputs/oplug_avi/op_savesmart.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_outputs/oplug_avi/op_savesmart.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -15,20 +15,14 @@
  *                                                                         *
  ***************************************************************************/
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <math.h>
-#include <unistd.h>
-#include <time.h>
-#include <sys/time.h>
-
+#include "config.h"
 #include "ADM_default.h"
 #include "ADM_threads.h"
 
 #ifdef USE_FFMPEG
 extern "C" {
 	#include "ADM_lavcodec.h"
-	};
+};
 #endif
 
 #include "fourcc.h"
@@ -55,6 +49,7 @@
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME MODULE_SAVE_AVI
 #include "ADM_osSupport/ADM_debug.h"
+
 GenericAviSaveSmart::GenericAviSaveSmart(uint32_t qf) : GenericAviSave()
 {
 	_cqReenc=qf;

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -22,6 +22,7 @@
 #include <string.h>
 #include <math.h>
 
+#include "config.h"
 #include "ADM_default.h"
 #include "ADM_threads.h"
 

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -21,14 +21,14 @@
 #include <string.h>
 #include <math.h>
 
+#include "config.h"
 #include "ADM_default.h"
 #include "ADM_threads.h"
 
-
 extern "C" {
 #include "ADM_lavcodec.h"
 };
-#include "ADM_default.h"
+
 #include "ADM_editor/ADM_Video.h"
 #include "ADM_colorspace/colorspace.h"
 #include "ADM_toolkit/toolkit.hxx"

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -18,6 +18,7 @@
 #include <sys/time.h>
 #include <errno.h>
 
+#include "config.h"
 #include "ADM_default.h"
 #include "ADM_threads.h"
 

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -19,16 +19,14 @@
  *                                                                         *
  ***************************************************************************/
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
+#include "config.h"
+
+#ifdef USE_FFMPEG
 #include <math.h>
 
 #include "ADM_default.h"
 #include "ADM_threads.h"
 
-
-#ifdef USE_FFMPEG
 extern "C" {
 #include "ADM_lavcodec.h"
 }
@@ -58,7 +56,6 @@
 #include "ADM_encoder/adm_encConfig.h"
 #include "ADM_encoder/ADM_vidEncode.hxx"
 
-
 #include "ADM_libraries/ADM_mplex/ADM_mthread.h"
 
 static uint8_t *_buffer=NULL,*_outbuffer=NULL;

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -14,6 +14,8 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include <math.h>
+
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
 
 #include "ADM_toolkit/toolkit.hxx"

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -7,13 +7,14 @@
  *                                                                         *
  ***************************************************************************/
 
+#include <math.h>
+
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
 #include "prefs.h"
 
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_libraries/ADM_utilities/avidemutils.h"
 #include "ADM_userInterfaces/ADM_commonUI/DIA_working.h"
-
 #include "DIA_encoding.h"
 #include "ADM_video/ADM_vidMisc.h"
 

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_equalizer.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_equalizer.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_equalizer.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -19,6 +19,8 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include <math.h>
+
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "avi_vars.h"
@@ -29,7 +31,6 @@
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_video/ADM_vidEqualizer.h"
 
-
 extern "C" {
 #include "ADM_libraries/ADM_lavcodec/avcodec.h"
 }

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -15,6 +15,8 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include <math.h>
+
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
 #include "ADM_toolkit/toolkit.hxx"
 

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_mpdelogo.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_mpdelogo.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_mpdelogo.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -19,6 +19,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include <math.h>
 
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
 #include "ADM_toolkit/toolkit.hxx"

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -1,6 +1,7 @@
 /*
  * This file was generated by Glade, once upon a time.
  */
+#include <math.h>
 
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
 #include "ADM_toolkit/toolkit.hxx"

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -11,6 +11,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include <math.h>
 
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
 #include "ADM_osSupport/ADM_debugID.h"

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_working.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_working.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_working.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -17,6 +17,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include <math.h>
 
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
 
@@ -26,7 +27,6 @@
 #define MODULE_NAME MODULE_CLOCKnTIMELEFT
 #include "ADM_osSupport/ADM_debug.h"
 
-
 #include "DIA_working.h"
 #include "ADM_video/ADM_vidMisc.h"
 

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filterlist.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filterlist.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filterlist.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -14,6 +14,7 @@
  ***************************************************************************/
 #include "config.h"
 #include "../ADM_toolkit_gtk/toolkit_gtk_include.h"
+#include "ADM_default.h"
 
 GtkListStore 	*storeFilterList;
 GtkWidget	*create_dialogList (void)

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -8,6 +8,7 @@
  ***************************************************************************/
 #include "config.h"
 #include "../ADM_toolkit_gtk/toolkit_gtk_include.h"
+#include "ADM_default.h"
 
 #define GLADE_HOOKUP_OBJECT(component,widget,name) \
   g_object_set_data_full (G_OBJECT (component), name, \

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtersub.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtersub.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtersub.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -15,6 +15,7 @@
  ***************************************************************************/
 #include "config.h"
 #include "../ADM_toolkit_gtk/toolkit_gtk_include.h"
+#include "ADM_default.h"
 
 GtkWidget		*create_filterMain (void);
 GtkListStore 	*storeMainFilter;

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -14,6 +14,8 @@
  *   (at your option) any later version.                                   *
  ***************************************************************************/
 
+#include <math.h>
+
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
 #include "../ADM_commonUI/GUI_render.h"
 #include "gui_action.hxx"

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -6,15 +6,10 @@
 #  include "config.h"
 #endif
 
-#include <sys/types.h>
-#include <sys/stat.h>
-#include <unistd.h>
-#include <string.h>
-#include <stdio.h>
-
 #include <gdk/gdkkeysyms.h>
 #include <gtk/gtk.h>
 
+#include "ADM_default.h"
 #include "../ADM_toolkit_gtk/ADM_gladeSupport.h"
 #include "../ADM_toolkit_gtk/jogshuttle.h"
 #include "../ADM_toolkit_gtk/gtkmarkscale.h"

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_ocr.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_ocr.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_ocr.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -38,7 +38,6 @@
 #include "ADM_filter/video_filters.h"
 
 #include "ADM_toolkit/filesel.h"
-
 #include "ADM_colorspace/colorspace.h"
 
 #include "ADM_videoFilter/ADM_vobsubinfo.h"

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/ADM_gladeSupport.h
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/ADM_gladeSupport.h	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/ADM_gladeSupport.h	2008-03-12 18:54:14 UTC (rev 3873)
@@ -3,13 +3,11 @@
  */
 
 #ifdef HAVE_CONFIG_H
-#  include <config.h>
+#  include "config.h"
 #endif
 
 #include <gtk/gtk.h>
-#include "ADM_default.h"
 
-
 /*
  * Public Functions.
  */

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/toolkit_gtk.h
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/toolkit_gtk.h	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/toolkit_gtk.h	2008-03-12 18:54:14 UTC (rev 3873)
@@ -14,9 +14,8 @@
  ***************************************************************************/
 #ifndef ADM_TLK_GTK
 #define ADM_TLK_GTK
-#include <stdio.h>
 #include <stdlib.h>
-#include <math.h>
+
 #include <glib.h>
 #include <gdk/gdkkeysyms.h>
 #include <gtk/gtk.h>

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_none.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_none.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_none.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -13,13 +13,14 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include "config.h"
 #include "ADM_default.h"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_video/ADM_vidCNR2_param.h"
 #include "ADM_video/ADM_vidColorYuv_param.h"
 #include "ADM_video/ADM_vidEqualizer.h"
 #include "ADM_video/ADM_vidMPdelogo.h"
-    
+
 #include "ADM_encoder/ADM_vidEncode.hxx"
 #include "ADM_audiofilter/audioencoder.h"
 

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -4,17 +4,13 @@
 // Copyright: See COPYING file that comes with this distribution
 //
 //
+#include "config.h"
 #include "ADM_default.h"
-#include <iconv.h>
 
-#include "ADM_toolkit/toolkit.hxx"
-
 #include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_toolkit/filesel.h"
 
-
-
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -5,20 +5,20 @@
 //
 //
 
+#include "config.h"
+
+#ifdef USE_X264
 #include "ADM_default.h"
-
-
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
 #include "ADM_encoder/ADM_vidEncode.hxx"
 #include "ADM_codecs/ADM_x264param.h"
 
-#ifdef USE_X264
 extern "C"
 {
 #include "x264.h"
 }
-#endif
+
 /**
       \fn DIA_x264
       \brief Dialog for x264 codec settings
@@ -158,5 +158,5 @@
         }
          return 0;
 }
-
+#endif
 // EOF

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_xvid4.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_xvid4.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_xvid4.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -5,14 +5,13 @@
 //
 //
 
-#include "ADM_default.h"
+#include "config.h"
 
+#ifdef USE_XVID_4
+#include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
-
 #include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
-#ifdef USE_XVID_4
 #include "ADM_encoder/ADM_vidEncode.hxx"
-
 #include "ADM_codecs/ADM_xvid4param.h"
 /**
       \fn getFFCompressParams

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_encoding.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_encoding.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_encoding.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -11,20 +11,18 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include <math.h>
 #define Ui_Dialog Ui_encodingDialog
 #include "ui_encoding.h"
 #undef Ui_Dialog 
 
-#include "ADM_default.h"
 
 #include "prefs.h"
 #include "DIA_working.h"
 #include "DIA_encoding.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_libraries/ADM_utilities/avidemutils.h"
-#include "math.h"
 #include "ADM_video/ADM_vidMisc.h"
-#include "ADM_video/ADM_vidMisc.h"
 extern void UI_purge(void);
 static int stopReq=0;
 class encodingWindow : public QDialog

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_srt.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_srt.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_srt.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -20,6 +20,7 @@
 #include "ui_srt.h"
 #undef Ui_Dialog
 
+#include "config.h"
 #include "ADM_default.h"
 
 #include "ADM_toolkit/toolkit.hxx"

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_index_pg.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_index_pg.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_index_pg.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -15,6 +15,8 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include <math.h>
+
 #include <QtCore/QVariant>
 #include <QtGui/QAction>
 #include <QtGui/QApplication>
@@ -26,7 +28,6 @@
 #include <QtGui/QWidget>
 
 #include "ADM_default.h"
-#include "math.h"
 #include "ADM_toolkit/toolkit.hxx"
 
 #include "ADM_video/ADM_genvideo.hxx"

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/file_qt4.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/file_qt4.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/file_qt4.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -13,6 +13,7 @@
 
 #include <QtCore/QVariant>
 #include <QtGui/qfiledialog.h>
+
 #include "ADM_default.h"
 
 #include "ADM_toolkit/toolkit.hxx"

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -4,6 +4,7 @@
 
 */
 
+#include "config.h"
 #include "ADM_default.h"
 
 #include "ADM_lavcodec.h"
@@ -13,7 +14,6 @@
 #include "ADM_encoder/ADM_vidEncode.hxx"
 #include "ADM_codecs/ADM_ffmpegConfig.h"
 #include "DIA_factory.h"
-#include "ADM_assert.h" 
 
 #warning FIXME Old : MaxBitrate in Byte/s, new entry in kb/s
 #warning FIXME Old : MaxBitrate in Byte/s, new entry in kb/s
@@ -22,12 +22,6 @@
 #warning FIXME Old : MaxBitrate in Byte/s new entry in kb/s
 #warning FIXME Old : MaxBitrate in Byte/s new entry in kb/s
 
-
-
-#include "ADM_codecs/ADM_codec.h"
-#include "ADM_encoder/ADM_vidEncode.hxx"
-#include "ADM_assert.h" 
-#include "DIA_factory.h"
 #include "../../ADM_libraries/ADM_libmpeg2enc/ADM_mpeg2enc.h"
 
 /**

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -12,11 +12,11 @@
 //
 //
 
+#include "config.h"
 #include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 
 #include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
-#include "ADM_assert.h" 
 #include "ADM_audiofilter/audiofilter_normalize_param.h"
 #include "ADM_audiofilter/audioeng_buildfilters.h"
 /**

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioconfig.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioconfig.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioconfig.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -14,10 +14,9 @@
  *                                                                         *
  ***************************************************************************/
 
+#include "config.h"
 #include "ADM_default.h"
 
-#include "ADM_assert.h"
-
 #include "DIA_factory.h"
 #include "../../ADM_audiofilter/audioprocess.hxx"
 #include "../../ADM_audiofilter/audioeng_process.h"

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -18,11 +18,14 @@
  *                                                                         *
  ***************************************************************************/
 
+#include <math.h>
+
+#include "config.h"
 #include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "DIA_factory.h"
 #include "avi_vars.h"
-#include "math.h"
+
 /**
       \fn GUI_displayBitrate
       \brief display a bargraph with bitrates

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavDecoder.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavDecoder.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavDecoder.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -12,6 +12,7 @@
 //
 //
 
+#include "config.h"
 #include "ADM_default.h"
 #include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
 

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -12,11 +12,11 @@
 //
 //
 
+#include "config.h"
 #include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 
 #include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
-#include "ADM_assert.h" 
 #include "ADM_lavcodec.h"
 #include "ADM_codecs/ADM_ffmpegConfig.h"
 #include "ADM_encoder/ADM_vidEncode.hxx"

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_mjpeg.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_mjpeg.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_mjpeg.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -4,6 +4,7 @@
 
 */
 
+#include "config.h"
 #include "ADM_default.h"
 
 #include "ADM_lavcodec.h"
@@ -13,14 +14,7 @@
 #include "ADM_encoder/ADM_vidEncode.hxx"
 #include "ADM_codecs/ADM_ffmpegConfig.h"
 #include "DIA_factory.h"
-#include "ADM_assert.h" 
 
-
-
-#include "ADM_codecs/ADM_codec.h"
-#include "ADM_encoder/ADM_vidEncode.hxx"
-#include "ADM_assert.h" 
-#include "DIA_factory.h"
 #include "../../ADM_encoder/adm_encmjpeg_param.h"
 
 /**

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -12,6 +12,7 @@
 //
 //
 
+#include "config.h"
 #include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -17,10 +17,9 @@
  *                                                                         *
  ***************************************************************************/
 
+#include "config.h"
 #include "ADM_default.h"
 
-#include "ADM_assert.h"
-
 #include "DIA_resizeWiz.h"
 #include "DIA_factory.h"
 

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -12,9 +12,11 @@
 //
 //
 
-#include "ADM_default.h"
 #include <math.h>
 
+#include "config.h"
+#include "ADM_default.h"
+
 #include "ADM_toolkit/toolkit.hxx"
 
 #include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -15,6 +15,7 @@
  *                                                                         *
  ***************************************************************************/
 
+#include "config.h"
 #include "ADM_default.h"
 
 #include "ADM_toolkit/toolkit.hxx"

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_commonUI/GUI_render.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_commonUI/GUI_render.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_commonUI/GUI_render.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -18,7 +18,7 @@
  *                                                                         *
  ***************************************************************************/
 
-#include "ADM_default.h"
+#include "config.h"
 #include "ADM_assert.h"
 #include "GUI_render.h"
 #include "GUI_accelRender.h"

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_commonUI/GUI_sdlRender.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_commonUI/GUI_sdlRender.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_userInterfaces/ADM_commonUI/GUI_sdlRender.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -14,17 +14,13 @@
 //  The pitch stride has to be changed as there could be some padding depending on the OS
 //
 //
+#include "config.h"
 
-#include "ADM_default.h"
-
 #if defined(USE_SDL)
 
 #include <stdio.h>
 #include <stdlib.h>
-#include <math.h>
 #include <string.h>
-#include <time.h>
-#include <sys/time.h>
 
 extern "C" {
 // get rid of warnings due to different definitions

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_video/ADM_interlaced.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_video/ADM_interlaced.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_video/ADM_interlaced.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -28,8 +28,8 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include "config.h"
 #include "ADM_default.h"
-
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_video/ADM_vidCNR2.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_video/ADM_vidCNR2.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_video/ADM_vidCNR2.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -35,9 +35,10 @@
 //         31/07/2002 - ver 2.1  - Bug Fixes (thx to dividee ;)
 //         20/07/2002 - ver 2.0  - Avisynth filter coded (from scratch)
 
+#include <math.h>
 
+#include "config.h"
 #include "ADM_default.h"
-#include <math.h>
 
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_video/ADM_vidColorYuv.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_video/ADM_vidColorYuv.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_video/ADM_vidColorYuv.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -44,9 +44,9 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include "ADM_default.h"
 #include <math.h>
 
+#include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
@@ -55,8 +55,6 @@
 #define MODULE_NAME MODULE_FILTER
 #include "ADM_osSupport/ADM_debug.h"
 
-
-
 #include "ADM_vidColorYuv.h"
 #include "ADM_filter/video_filters.h"
 

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_video/ADM_vidFont.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_video/ADM_vidFont.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_video/ADM_vidFont.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -15,12 +15,12 @@
  *                                                                         *
  ***************************************************************************/
 
-#include "ADM_default.h"
+#include "config.h"
 
+#ifdef USE_FREETYPE
 #include <iconv.h>
 
- #ifdef USE_FREETYPE
-
+#include "ADM_default.h"
 #include "ADM_vidFont.h"
 
 static    FT_Library   	library;   		/* handle to library     */

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_video/ADM_vidMPdelogo.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_video/ADM_vidMPdelogo.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_video/ADM_vidMPdelogo.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -6,6 +6,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include "config.h"
 #include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_guiResize.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_guiResize.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_guiResize.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -17,6 +17,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include "config.h"
 #include "ADM_default.h"
 
 #include "ADM_editor/ADM_edit.hxx"
@@ -24,9 +25,7 @@
 #include "ADM_resizebis.hxx"
 #include "ADM_video/ADM_vidCommonFilter.h"
 #include "ADM_toolkit/toolkit.hxx"
-#include "ADM_assert.h"
 
-
 static int getResizeParams(uint32_t * w, uint32_t * h, uint32_t * algo,uint32_t ow,uint32_t oh,uint32_t fps);
 
 

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_resizebis.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_resizebis.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_resizebis.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -21,8 +21,9 @@
  *                                                                         *
  ***************************************************************************/
 
+#include <math.h>
+
 #include "ADM_default.h"
-#include <math.h>
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidASS.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidASS.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidASS.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -10,8 +10,8 @@
   Initial port from MPlayer by Moonz
 
 */
+#include "config.h"
 #include "ADM_default.h"
-
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
@@ -20,6 +20,7 @@
 #include "ADM_filter/video_filters.h"
 #include "ADM_colorspace/ADM_rgb.h"
 #include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
+
 #ifdef USE_FREETYPE
 
 #ifndef DIR_SEP

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidAddBorder.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidAddBorder.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidAddBorder.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -14,6 +14,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include "config.h"
 #include "ADM_default.h"
 
 #include "ADM_toolkit/toolkit.hxx"

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidAnimated.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidAnimated.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidAnimated.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -16,14 +16,12 @@
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 
-
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME MODULE_FILTER
 #include "ADM_osSupport/ADM_debug.h"
+
 #include "ADM_filter/video_filters.h"
 #include "ADM_vidAnimated.h"
-
-
 #include "ADM_inputs/ADM_inpics/ADM_pics.h"
 
 static FILTER_PARAM animated_template={10,

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidBSmear.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidBSmear.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidBSmear.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -22,6 +22,7 @@
  *                                                                         *
  ***************************************************************************/
 
+#include "config.h"
 #include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidBlend.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidBlend.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidBlend.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -18,14 +18,13 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include "config.h"
 #include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_vidField.h"
 
-#include"ADM_vidField.h"
-
-
 #ifdef ADM_CPU_X86_64
 static int64_t _l_w,_l_h;
 #else

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -18,6 +18,7 @@
  *                                                                         *
  ***************************************************************************/
  
+#include "config.h"
 #include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidDGbob.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidDGbob.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidDGbob.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -21,7 +21,7 @@
 	Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
 */
 
-
+#include "config.h"
 #include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidDecDec.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidDecDec.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidDecDec.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -40,18 +40,18 @@
 	Donald Graft
 	neuron2 at attbi.com.
 */
+#include "config.h"
 #include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
-#include"ADM_vidField.h"
-#include"ADM_video/ADM_cache.h"
+#include "ADM_vidField.h"
+#include "ADM_video/ADM_cache.h"
 
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME MODULE_FILTER
 #include "ADM_osSupport/ADM_debug.h"
 
-
 #include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
 
 

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -30,18 +30,16 @@
 	along with this program; if not, write to the Free Software
 	Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
 */
+#include "config.h"
 #include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 
-
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME MODULE_FILTER
 #include "ADM_osSupport/ADM_debug.h"
 
-
-
 #include "ADM_vidDecTelecide.h"
 #include "ADM_filter/video_filters.h"
 #include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidDeintASM.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidDeintASM.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidDeintASM.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -18,8 +18,8 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include "config.h"
 #include "ADM_default.h"
-
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidDenoise.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidDenoise.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidDenoise.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -21,6 +21,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include "config.h"
 #include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidDropOut.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidDropOut.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidDropOut.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -14,6 +14,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include "config.h"
 #include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidFade.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidFade.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidFade.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -7,9 +7,11 @@
  *                                                                         *
  ***************************************************************************/
 
-#include "ADM_default.h"
 #include <math.h>
 
+#include "config.h"
+#include "ADM_default.h"
+
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidFields.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidFields.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidFields.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -14,15 +14,13 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include "config.h"
 #include "ADM_default.h"
-
-
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_vidField.h"
 
-#include"ADM_vidField.h"
-
 //_______________________________________________________________
 
 ADMVideoFields::ADMVideoFields(

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidForcedPP.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidForcedPP.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidForcedPP.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -12,6 +12,7 @@
 //
 //
 
+#include "config.h"
 #include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
@@ -21,8 +22,6 @@
 #define MODULE_NAME MODULE_FILTER
 #include "ADM_osSupport/ADM_debug.h"
 
-
-
 #include "ADM_vidForcedPP.h"
 #include "ADM_userInterfaces/ADM_commonUI/DIA_enter.h"
 #include "ADM_filter/video_filters.h"

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -34,9 +34,11 @@
 	Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
 */
 
-#include "ADM_default.h"
 #include <iconv.h>
 
+#include "config.h"
+#include "ADM_default.h"
+
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidLargeMedian.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidLargeMedian.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidLargeMedian.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -19,6 +19,7 @@
  *                                                                         *
  ***************************************************************************/
 
+#include "config.h"
 #include "ADM_default.h"
 
 #include "ADM_toolkit/toolkit.hxx"

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidMPLD3D.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidMPLD3D.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidMPLD3D.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -16,8 +16,11 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include <math.h>
+
+#include "config.h"
 #include "ADM_default.h"
-#include <math.h>
+
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidMPLD3Dlow.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidMPLD3Dlow.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidMPLD3Dlow.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -16,8 +16,11 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include <math.h>
+
+#include "config.h"
 #include "ADM_default.h"
-#include <math.h>
+
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidMPLResize.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidMPLResize.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidMPLResize.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -19,6 +19,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include "config.h"
 #include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
@@ -33,7 +34,6 @@
 
 #include "ADM_libraries/ADM_lavutil/avutil.h"
 #include "ADM_libraries/ADM_libswscale/swscale.h"
-
 #include "ADM_filter/video_filters.h"
 
 typedef struct alg

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidMSharpen.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidMSharpen.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidMSharpen.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -33,21 +33,19 @@
 	Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
 */
 
+#include "config.h"
 #include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
-#include"ADM_video/ADM_cache.h"
+#include "ADM_video/ADM_cache.h"
 
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME MODULE_FILTER
 #include "ADM_osSupport/ADM_debug.h"
 
-
 #include "ADM_filter/video_filters.h"
-
 #include "ADM_vidMSharpen_param.h"
-
 #include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
 
 class Msharpen : public AVDMGenericVideoStream

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -21,6 +21,7 @@
     Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA
 */
 
+#include "config.h"
 #include "ADM_default.h"
 #include "ADM_lavcodec.h"
 

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidMosaic.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidMosaic.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidMosaic.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -14,6 +14,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include "config.h"
 #include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
@@ -22,7 +23,6 @@
 
 #include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
 
-
 #ifdef ADM_CPU_X86
 extern "C" {
 #include "ADM_libraries/ADM_lavcodec/avcodec.h"
@@ -33,12 +33,9 @@
 #include "ADM_libraries/ADM_libswscale/swscale.h"
 
 #include "ADM_filter/video_filters.h"
-
 #include "ADM_video/ADM_cache.h"
-
 #include "ADM_vidMosaic_param.h"
 
-
 class  ADMVideoMosaic:public AVDMGenericVideoStream
  {
 

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidMsmooth.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidMsmooth.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidMsmooth.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -28,6 +28,7 @@
 	Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
 */
 
+#include "config.h"
 #include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
@@ -38,9 +39,7 @@
 #define MODULE_NAME MODULE_FILTER
 #include "ADM_osSupport/ADM_debug.h"
 
-
 #include "ADM_filter/video_filters.h"
-
 #include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
 
 #if 0

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidPalShift.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidPalShift.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidPalShift.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -14,6 +14,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include "config.h"
 #include "ADM_default.h"
 
 #include "ADM_toolkit/toolkit.hxx"

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidParticle.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidParticle.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidParticle.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -18,16 +18,14 @@
 #include <math.h>
 #include <algorithm>
 #include <string>
-//#include <vector>
+#include <ctype.h>
+
 using namespace std;
 
 #include "ADM_default.h"
-#include <ctype.h>
 
-#include "ADM_assert.h"
 #undef memcpy   // avoid compile errors due to macro
 #include "fourcc.h"
-//#include "avi_vars.h"
 
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidResampleFPS.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidResampleFPS.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidResampleFPS.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -15,9 +15,10 @@
  *                                                                         *
  ***************************************************************************/
 
-#include "ADM_default.h"
 #include <math.h>
 
+#include "config.h"
+#include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidSRT.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidSRT.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidSRT.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -15,14 +15,12 @@
  *                                                                         *
  ***************************************************************************/
 
-#include "ADM_default.h"
+#include "config.h"
 
-#include <math.h>
+#ifdef USE_FREETYPE
 #include <iconv.h>
 
-#ifdef USE_FREETYPE
-
-
+#include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
@@ -30,13 +28,11 @@
 #include "ADM_video/ADM_vidFont.h"
 #include "ADM_videoFilter/ADM_vidSRT.h"
 
-#include "ADM_assert.h"
-
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME MODULE_FILTER
 #include "ADM_osSupport/ADM_debug.h"
-#include "ADM_filter/video_filters.h"
 
+#include "ADM_filter/video_filters.h"
 #include "prefs.h"
 
 static FILTER_PARAM subParam={15,{"_fontsize","_subname","_fontname","_charset",

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidSRTRender.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidSRTRender.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidSRTRender.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -15,14 +15,13 @@
  *                                                                         *
  ***************************************************************************/
 
-#include "ADM_default.h"
+#include "config.h"
 
+#ifdef USE_FREETYPE
 #include <math.h>
 #include <iconv.h>
 
-
-#ifdef USE_FREETYPE
-
+#include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 
 #include "ADM_editor/ADM_edit.hxx"
@@ -30,17 +29,13 @@
 
 #include "ADM_video/ADM_vidFont.h"
 #include "ADM_videoFilter/ADM_vidSRT.h"
-#include "ADM_assert.h"
 
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME MODULE_FILTER
 #include "ADM_osSupport/ADM_debug.h"
 
-
 #define SUB_OUT 0xf0000000
-
 #define ALPHA
-
 #define LUMA_LEVEL 10
 
 #define SAFE_STRCPY(dest,destLen,src,srcLen) \

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidSRTload.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidSRTload.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidSRTload.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -25,26 +25,21 @@
  *                                                                         *
  ***************************************************************************/
 
-#include "ADM_default.h"
+#include "config.h"
 
+#ifdef USE_FREETYPE
 #include <math.h>
 #include <iconv.h>
-#include <errno.h>
 
-
-#ifdef USE_FREETYPE
 //#define __STDC_ISO_10646__
 
-
+#include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
-
-#include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 
 #include "ADM_video/ADM_vidFont.h"
 #include "ADM_videoFilter/ADM_vidSRT.h"
-#include "ADM_assert.h"
 
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME MODULE_FILTER

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidSoften.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidSoften.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidSoften.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -16,6 +16,7 @@
 //	could use some stuff and some mmx too
 //
 
+#include "config.h"
 #include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
@@ -25,13 +26,10 @@
 #define MODULE_NAME MODULE_FILTER
 #include "ADM_osSupport/ADM_debug.h"
 
-
-
 #include "ADM_vidSoften.h"
 #include "ADM_userInterfaces/ADM_commonUI/DIA_enter.h"
 #include "ADM_filter/video_filters.h"
 
-
 #include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
 
 static FILTER_PARAM softParam={3,{"radius","luma","chroma"}};

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidStabilize.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidStabilize.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidStabilize.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -14,9 +14,10 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include "ADM_default.h"
 #include <math.h>
 
+#include "config.h"
+#include "ADM_default.h"
 
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -27,7 +27,6 @@
 #include <fstream>
 #include <iterator>
 
-#include "ADM_assert.h"
 #include "fourcc.h"
 #include "avi_vars.h"
 

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidThreshold.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidThreshold.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidThreshold.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -14,6 +14,7 @@
  *                                                                         *
  ***************************************************************************/
  
+#include "config.h"
 #include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidVlad.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidVlad.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidVlad.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -20,15 +20,14 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include "config.h"
 #include "ADM_default.h"
-
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_vidVlad.h"
 #include "ADM_filter/video_filters.h"
 
-
 #include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
 
 #ifdef ADM_CPU_X86_64

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidYadif.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidYadif.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidYadif.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -25,6 +25,7 @@
   Ported to avidemux by mean
   Same license as original (?GPL)
 */
+#include "config.h"
 #include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
@@ -32,7 +33,6 @@
 #include "ADM_video/ADM_cache.h"
 #include "ADM_filter/video_filters.h"
 
-
 #include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
 //************************************************
 #define MIN(a,b) ((a) > (b) ? (b) : (a))

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADMmpdetc.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADMmpdetc.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADMmpdetc.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -16,13 +16,10 @@
 #define HAVE_DETC
 #ifdef HAVE_DETC
 
-#include "ADM_default.h"
+#include "config.h"
 #include "ADM_lavcodec.h"
-#include "math.h"
 #include "fourcc.h"
 
-
-
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
@@ -32,7 +29,6 @@
 #define MODULE_NAME MODULE_FILTER
 #include "ADM_osSupport/ADM_debug.h"
 
-
 //static void decimate(uint8_t *src,uint8_t *target, uint32_t linessrc, uint32_t width);
 #include "ADM_filter/video_filters.h"
 

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/CMakeLists.txt	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/CMakeLists.txt	2008-03-12 18:54:14 UTC (rev 3873)
@@ -52,6 +52,7 @@
 ENDIF (ADM_DEBUG)
 
 INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR})
+INCLUDE_DIRECTORIES(${CMAKE_CURRENT_BINARY_DIR}/../config)
 INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR}/ADM_core/include)
 INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR}/ADM_libraries/ADM_utilities)
 INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR}/ADM_libraries/ADM_lavutil)
@@ -489,13 +490,10 @@
 	ADD_ADMLIB_ALL_TARGETS(ADM_osSupport)
 	
 	IF (MINGW)
-		ADD_LIB_ALL_TARGETS(imagehlp wsock32 pthreadGC2)
-	ELSEIF (CYGWIN)
-		ADD_LIB_ALL_TARGETS(pthread cygwin)
+ 		ADD_LIB_ALL_TARGETS(-mno-cygwin imagehlp wsock32 pthreadGC2)
 	ENDIF (MINGW)
 	
-	ADD_LIB_ALL_TARGETS(winmm)
-	ADD_LIB_ALL_TARGETS("-mno-cygwin -Wl,--export-all-symbols")
+ 	ADD_LIB_ALL_TARGETS(winmm -Wl,--export-all-symbols)
 
 	ADD_TARGET_LDFLAGS(avidemux2_cli "-Wl,-subsystem,console")
 	

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/avi_vars.h
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/avi_vars.h	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/avi_vars.h	2008-03-12 18:54:14 UTC (rev 3873)
@@ -1,6 +1,6 @@
 #ifndef __AVI_VARS
 #define __AVI_VARS
-#include "ADM_default.h"
+#include "config.h"
 #include "fourcc.h"
 #include "ADM_editor/ADM_edit.hxx"
 //----------------------

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/gui_savenew.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/gui_savenew.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/gui_savenew.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -15,13 +15,6 @@
  *                                                                         *
  ***************************************************************************/
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <math.h>
-#include <unistd.h>
-#include <time.h>
-#include <sys/time.h>
-
 #include "ADM_default.h"
 #include "ADM_threads.h"
 

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/main.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/main.cpp	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/main.cpp	2008-03-12 18:54:14 UTC (rev 3873)
@@ -16,14 +16,16 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include "ADM_default.h"
 
 #ifdef __MINGW32__
 #include <windows.h>
 #include <excpt.h>
 #endif
 
+#include "config.h"
+#include "ADM_default.h"
 #include "ADM_threads.h"
+
 #define __DECLARE__
 #include "avi_vars.h"
 
@@ -105,7 +107,7 @@
 
 int main(int argc, char *argv[])
 {
-#ifdef __WIN32
+#if defined(__WIN32) && defined(USE_SDL)
 	redirectStdoutToFile();
 #endif
 

Modified: branches/avidemux_2.5_branch_mean_merged/cmake/admConfigHelper.cmake
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/cmake/admConfigHelper.cmake	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/cmake/admConfigHelper.cmake	2008-03-12 18:54:14 UTC (rev 3873)
@@ -155,6 +155,17 @@
 	SET_TARGET_PROPERTIES(${_target} PROPERTIES COMPILE_FLAGS "${_flags}")
 ENDMACRO (ADD_TARGET_CFLAGS)
 
+MACRO (ADD_TARGET_DEFINITIONS _target)
+ 	GET_TARGET_PROPERTY(_flags ${_target} COMPILE_FLAGS)
+ 
+ 	FOREACH (_def ${ARGN})
+ 		IF (${_def})
+ 			APPEND_FLAGS(_flags "-D${_def}")
+ 		ENDIF (${_def})
+ 	ENDFOREACH (_def ${ARGN})
+ 
+ 	SET_TARGET_PROPERTIES(${_target} PROPERTIES COMPILE_FLAGS "${_flags}")
+ENDMACRO (ADD_TARGET_DEFINITIONS)
 
 MACRO (ADD_CFLAGS_GTK_TARGET _target)
 	IF (ADM_UI_GTK)
@@ -211,4 +222,4 @@
 	APPEND_FLAGS(_flags ${ARGN})
 
 	TARGET_LINK_LIBRARIES(${_target} ${_flags})
-ENDMACRO (ADD_TARGET_LDFLAGS)
\ No newline at end of file
+ENDMACRO (ADD_TARGET_LDFLAGS)

Modified: branches/avidemux_2.5_branch_mean_merged/cmake/admDetermineSystem.cmake
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/cmake/admDetermineSystem.cmake	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/cmake/admDetermineSystem.cmake	2008-03-12 18:54:14 UTC (rev 3873)
@@ -135,7 +135,7 @@
 	PERFORM_SYSTEM_TEST(cpu_ssse3_check.cpp "SSSE3 capable" SSSE3_SUPPORTED)
 
 	IF (SSSE3_SUPPORTED)
-		SET(ADM_CPU_SSSE3)
+		SET(ADM_CPU_SSSE3 1)
 	ENDIF (SSSE3_SUPPORTED)
 ENDIF (ADM_CPU_X86)
 
@@ -149,4 +149,4 @@
 	SET(ADM_BIG_ENDIAN 1)
 ENDIF (CMAKE_WORDS_BIGENDIAN)
 
-MESSAGE("")
\ No newline at end of file
+MESSAGE("")

Modified: branches/avidemux_2.5_branch_mean_merged/cmake/config.h.cmake
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/cmake/config.h.cmake	2008-03-12 11:37:45 UTC (rev 3872)
+++ branches/avidemux_2.5_branch_mean_merged/cmake/config.h.cmake	2008-03-12 18:54:14 UTC (rev 3873)
@@ -1,20 +1,13 @@
 /* config.h.in.  Generated from configure.in by autoheader.  */
 
+#ifndef ADM_CONFIG_H
+#define ADM_CONFIG_H
+
+#include "../ADM_coreConfig.h"
 #define ADM_BUILD_CLI 1
 #define ADM_BUILD_GTK 2
 #define ADM_BUILD_QT4 3
 
-// GCC - CPU
-#cmakedefine ADM_BIG_ENDIAN
-#cmakedefine ADM_CPU_64BIT
-#cmakedefine ADM_CPU_ALTIVEC
-#cmakedefine ADM_CPU_DCBZL
-#cmakedefine ADM_CPU_PPC
-#cmakedefine ADM_CPU_SSSE3
-#cmakedefine ADM_CPU_X86
-#cmakedefine ADM_CPU_X86_32
-#cmakedefine ADM_CPU_X86_64
-
 // GCC - Operating System
 #cmakedefine ADM_BSD_FAMILY
 
@@ -43,30 +36,12 @@
 #cmakedefine HAVE_GETTEXT
 #endif
 
-/* Define to 1 if you have the `gettimeofday' function. */
-#cmakedefine HAVE_GETTIMEOFDAY
-
 // GTK+ uses X11 framework
 #cmakedefine HAVE_GTK_X11
 
-/* Define to 1 if you have the <inttypes.h> header file. */
-#cmakedefine HAVE_INTTYPES_H
-
 /* Define to 1 if you have the `mp3lame' library (-lmp3lame). */
 #cmakedefine HAVE_LIBMP3LAME
 
-/* Use malloc.h */
-#cmakedefine HAVE_MALLOC_H
-
-/* Define to 1 if you have the <stdint.h> header file. */
-#cmakedefine HAVE_STDINT_H
-
-/* Define to 1 if you have the <sys/types.h> header file. */
-#cmakedefine HAVE_SYS_TYPES_H
-
-/* Define to 1 if you have the <unistd.h> header file. */
-#cmakedefine HAVE_UNISTD_H
-
 /* stricter prototyping */
 #cmakedefine ICONV_NEED_CONST
 
@@ -166,9 +141,23 @@
 /* use Nvwa memory leak detector */
 #cmakedefine FIND_LEAKS
 
-#ifdef __MINGW32__
-#define rindex strrchr
-#define index strchr
-#define ftello ftello64
-#define fseeko fseeko64
+#if defined(OSS_SUPPORT) || defined (USE_ARTS) || defined(USE_SDL) || defined(__APPLE__) || defined(__WIN32) || defined(ALSA_SUPPORT)
+ #define HAVE_AUDIO
 #endif
+
+// FIXME - start
+#ifdef HAVE_GETTEXT
+#  include <libintl.h>
+#  undef _
+#endif
+
+extern const char* translate(const char *__domainname, const char *__msgid);
+
+#ifdef QT_TR_NOOP
+#undef QT_TR_NOOP
+#endif
+
+#define QT_TR_NOOP(String) translate (PACKAGE, String)
+// FIXME - end
+
+#endif



From mean at mail.berlios.de  Wed Mar 12 19:54:28 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Wed, 12 Mar 2008 19:54:28 +0100
Subject: [Avidemux-svn-commit] r3875 - in
	branches/avidemux_2.5_branch_mean_merged:
	avidemux/ADM_core/include avidemux/ADM_videoFilter cmake
Message-ID: <200803121854.m2CIsS1l002749@sheep.berlios.de>

Author: mean
Date: 2008-03-12 19:54:28 +0100 (Wed, 12 Mar 2008)
New Revision: 3875

Added:
   branches/avidemux_2.5_branch_mean_merged/cmake/ADM_coreConfig.h.cmake
Modified:
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/include/ADM_files.h
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidSRTload.cpp
   branches/avidemux_2.5_branch_mean_merged/cmake/config.h.cmake
Log:
[3865] fix warning + fix errno + fix ADM_INSTALLDIR that belongs to coreConfig, not config


Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/include/ADM_files.h
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/include/ADM_files.h	2008-03-12 18:54:27 UTC (rev 3874)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/include/ADM_files.h	2008-03-12 18:54:28 UTC (rev 3875)
@@ -31,4 +31,5 @@
 uint8_t buildDirectoryContent(uint32_t *outnb,const char *base, char *jobName[],int maxElems,const char *ext);
 
 #endif
-//EOF
\ No newline at end of file
+//EOF
+

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidSRTload.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidSRTload.cpp	2008-03-12 18:54:27 UTC (rev 3874)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_videoFilter/ADM_vidSRTload.cpp	2008-03-12 18:54:28 UTC (rev 3875)
@@ -44,7 +44,7 @@
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME MODULE_FILTER
 #include "ADM_osSupport/ADM_debug.h"
-
+#include <errno.h>
 #define ADM_RAW 1024
 
 static iconv_t myConv=(iconv_t)-1;;

Added: branches/avidemux_2.5_branch_mean_merged/cmake/ADM_coreConfig.h.cmake
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/cmake/ADM_coreConfig.h.cmake	2008-03-12 18:54:27 UTC (rev 3874)
+++ branches/avidemux_2.5_branch_mean_merged/cmake/ADM_coreConfig.h.cmake	2008-03-12 18:54:28 UTC (rev 3875)
@@ -0,0 +1,37 @@
+#ifndef ADM_CORE_H
+#define ADM_CORE_H
+
+// GCC - CPU
+#cmakedefine ADM_BIG_ENDIAN
+#cmakedefine ADM_CPU_64BIT
+#cmakedefine ADM_CPU_ALTIVEC
+#cmakedefine ADM_CPU_DCBZL
+#cmakedefine ADM_CPU_PPC
+#cmakedefine ADM_CPU_SSSE3
+#cmakedefine ADM_CPU_X86
+#cmakedefine ADM_CPU_X86_32
+#cmakedefine ADM_CPU_X86_64
+
+// GCC - Operating System
+#cmakedefine ADM_BSD_FAMILY
+
+// 'gettimeofday' function is present
+#cmakedefine HAVE_GETTIMEOFDAY
+
+// Presence of header files
+#cmakedefine HAVE_INTTYPES_H
+#cmakedefine HAVE_MALLOC_H
+#cmakedefine HAVE_STDINT_H
+#cmakedefine HAVE_SYS_TYPES_H
+
+// Needed for the relatives functions..
+#define ADM_INSTALL_DIR "${ADM_INSTALL_DIR}"
+
+#ifdef __MINGW32__
+#define rindex strrchr
+#define index strchr
+#define ftello ftello64
+#define fseeko fseeko64
+#endif
+
+#endif

Modified: branches/avidemux_2.5_branch_mean_merged/cmake/config.h.cmake
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/cmake/config.h.cmake	2008-03-12 18:54:27 UTC (rev 3874)
+++ branches/avidemux_2.5_branch_mean_merged/cmake/config.h.cmake	2008-03-12 18:54:28 UTC (rev 3875)
@@ -16,7 +16,6 @@
 
 #define PACKAGE   "avidemux"
 #define ADMLOCALE "${ADM_LOCALE}"
-#define ADM_INSTALL_DIR "${ADM_INSTALL_DIR}"
 
 #cmakedefine HAVE_AUDIO
 



From mean at mail.berlios.de  Wed Mar 12 19:54:27 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Wed, 12 Mar 2008 19:54:27 +0100
Subject: [Avidemux-svn-commit] r3874 -
	branches/avidemux_2.5_branch_mean_merged
Message-ID: <200803121854.m2CIsRHm002737@sheep.berlios.de>

Author: mean
Date: 2008-03-12 19:54:27 +0100 (Wed, 12 Mar 2008)
New Revision: 3874

Added:
   branches/avidemux_2.5_branch_mean_merged/.gitignore
Log:
[Git] gitignore" .gitignore


Added: branches/avidemux_2.5_branch_mean_merged/.gitignore
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/.gitignore	2008-03-12 18:54:14 UTC (rev 3873)
+++ branches/avidemux_2.5_branch_mean_merged/.gitignore	2008-03-12 18:54:27 UTC (rev 3874)
@@ -0,0 +1,6 @@
+*~
+*.rej
+*.orig
+[tT]ags
+Doxyfile
+*.kdev*



From mean at mail.berlios.de  Wed Mar 12 19:55:19 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Wed, 12 Mar 2008 19:55:19 +0100
Subject: [Avidemux-svn-commit] r3876 - in
	branches/avidemux_2.5_branch_mean_merged: . avidemux
	avidemux/ADM_audiocodec avidemux/ADM_core/src
	avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3
	avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52
	avidemux/plugins/ADM_audiodecoder/ADM_ad_faad
	avidemux/plugins/ADM_audiodecoder/ADM_ad_mad
	avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/ADM_libMad cmake
Message-ID: <200803121855.m2CItJ3k002925@sheep.berlios.de>

Author: mean
Date: 2008-03-12 19:55:18 +0100 (Wed, 12 Mar 2008)
New Revision: 3876

Modified:
   branches/avidemux_2.5_branch_mean_merged/CMakeLists.txt
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiocodec/CMakeLists.txt
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/src/CMakeLists.txt
   branches/avidemux_2.5_branch_mean_merged/avidemux/CMakeLists.txt
   branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/CMakeLists.txt
   branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/bit_allocate.c
   branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/bitstream.c
   branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/downmix.c
   branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/imdct.c
   branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/CMakeLists.txt
   branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/ADM_ad_faad.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/CMakeLists.txt
   branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/ADM_ad_mad.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/ADM_libMad/CMakeLists.txt
   branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/CMakeLists.txt
   branches/avidemux_2.5_branch_mean_merged/cmake/ad_plugin.cmake
   branches/avidemux_2.5_branch_mean_merged/cmake/admCheckAudioCodecLibs.cmake
   branches/avidemux_2.5_branch_mean_merged/cmake/admConfigSummary.cmake
   branches/avidemux_2.5_branch_mean_merged/cmake/config.h.cmake
Log:
[Gruntster] Merged r3868


Modified: branches/avidemux_2.5_branch_mean_merged/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/CMakeLists.txt	2008-03-12 18:54:28 UTC (rev 3875)
+++ branches/avidemux_2.5_branch_mean_merged/CMakeLists.txt	2008-03-12 18:55:18 UTC (rev 3876)
@@ -138,8 +138,6 @@
 	MESSAGE("")
 ENDIF (VERBOSE)
 
-INCLUDE(admConfigSummary)
-MESSAGE("")
 
 ########################################
 # Generate config.h
@@ -159,8 +157,16 @@
 CONFIGURE_FILE("${CMAKE_SOURCE_DIR}/cmake/config.h.cmake" "${CMAKE_BINARY_DIR}/config/qt4/config.h")
 MESSAGE(STATUS "Qt4 config.h generated")
 
+MESSAGE("")
 ########################################
 # Directories to build
 ########################################
 ADD_SUBDIRECTORY(avidemux)
 ADD_SUBDIRECTORY(po)
+
+########################################
+# Config Summary
+########################################
+INCLUDE(admConfigSummary)
+MESSAGE("")
+

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiocodec/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiocodec/CMakeLists.txt	2008-03-12 18:54:28 UTC (rev 3875)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiocodec/CMakeLists.txt	2008-03-12 18:55:18 UTC (rev 3876)
@@ -4,24 +4,12 @@
 
 ADD_ADM_LIB_ALL_TARGETS(ADM_audiocodec ${ADM_audiocodec_SRCS})
 
-#IF (USE_AMR_NB)
-	#ADD_SOURCE_CFLAGS(ADM_audiocodec.cpp -I${AMRNB_INCLUDE_DIR})
-#ENDIF (USE_AMR_NB)
+IF (USE_AMR_NB)
+	ADD_SOURCE_CFLAGS(ADM_audiocodec.cpp -I${AMRNB_INCLUDE_DIR})
+ENDIF (USE_AMR_NB)
 
-#IF (USE_FAAD)
-	#ADD_SOURCE_CFLAGS(ADM_codecfaad.cpp -I${FAAD_INCLUDE_DIR})
-#ENDIF (USE_FAAD)
+IF (USE_LIBDCA)
+	ADD_SOURCE_CFLAGS(ADM_audiocodec.cpp -I${LIBDCA_INCLUDE_DIR})
+	ADD_SOURCE_CFLAGS(ADM_dca.cpp -I${LIBDCA_INCLUDE_DIR})
+ENDIF (USE_LIBDCA)
 
-#IF (USE_LIBDCA)
-	#ADD_SOURCE_CFLAGS(ADM_audiocodec.cpp -I${LIBDCA_INCLUDE_DIR})
-	#ADD_SOURCE_CFLAGS(ADM_dca.cpp -I${LIBDCA_INCLUDE_DIR})
-#ENDIF (USE_LIBDCA)
-
-#IF (USE_VORBIS)
-	#ADD_SOURCE_CFLAGS(audiocodec_ogg.cpp -I${VORBIS_INCLUDE_DIR})
-#ENDIF (USE_VORBIS)
-
-#INCLUDE(admLibMad)
-#GET_MAD_CFLAGS(MAD_CFLAGS)
-
-#ADD_SOURCE_CFLAGS(ADM_codecmp3.cpp ${MAD_CFLAGS})
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/src/CMakeLists.txt	2008-03-12 18:54:28 UTC (rev 3875)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/src/CMakeLists.txt	2008-03-12 18:55:18 UTC (rev 3876)
@@ -5,4 +5,5 @@
 ADD_ADM_LIB_ALL_TARGETS(ADM_core ${ADM_core_SRCS})
 ADD_SOURCE_CFLAGS(ADM_fileio.cpp ${GLIB_CFLAGS})
 
-#ADD_TARGET_DEFINITIONS(ADM_core ADM_DEBUG FIND_LEAKS)
\ No newline at end of file
+REMOVE_DEFINITIONS(-DHAVE_CONFIG_H)
+

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/CMakeLists.txt	2008-03-12 18:54:28 UTC (rev 3875)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/CMakeLists.txt	2008-03-12 18:55:18 UTC (rev 3876)
@@ -445,11 +445,6 @@
 	ADD_LIB_ALL_TARGETS("${AFTEN_LIBRARY_DIR}")
 ENDIF (USE_AFTEN)
 
-# FAAD
-#IF (USE_FAAD)
-#	ADD_LIB_ALL_TARGETS("${FAAD_LIBRARY_DIR}")
-#ENDIF (USE_FAAD)
-
 # Secret Rabbit Code
 IF (USE_SRC)
 	ADD_LIB_ALL_TARGETS("${SRC_LIBRARY_DIR}")
@@ -467,8 +462,8 @@
 ###########################################
 # Plugins
 ###########################################
-
 ADD_SUBDIRECTORY(plugins)
+
 ###########################################
 # UI Specific
 ###########################################

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/CMakeLists.txt	2008-03-12 18:54:28 UTC (rev 3875)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/CMakeLists.txt	2008-03-12 18:55:18 UTC (rev 3876)
@@ -9,7 +9,7 @@
 	ADD_TARGET_CFLAGS(${ADM_LIB} -fPIC)
 ENDIF (UNIX)
 
-# FIXME
-ADD_TARGET_CFLAGS(${ADM_LIB} "-I${CMAKE_BINARY_DIR}/config/cli")
-ADD_TARGET_CFLAGS(${ADM_LIB} "-I${CMAKE_SOURCE_DIR}/avidemux/ADM_audiocodec")
-ADD_TARGET_CFLAGS(${ADM_LIB} "-I${CMAKE_SOURCE_DIR}/avidemux/ADM_core/include")
\ No newline at end of file
+IF (ADM_BIG_ENDIAN)
+	ADD_TARGET_CFLAGS(${ADM_LIB} -DWORDS_BIGENDIAN)
+ENDIF (ADM_BIG_ENDIAN)
+

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/bit_allocate.c
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/bit_allocate.c	2008-03-12 18:54:28 UTC (rev 3875)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/bit_allocate.c	2008-03-12 18:55:18 UTC (rev 3876)
@@ -21,7 +21,6 @@
  * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
  */
 
-#include "config.h"
 
 #include <inttypes.h>
 

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/bitstream.c
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/bitstream.c	2008-03-12 18:54:28 UTC (rev 3875)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/bitstream.c	2008-03-12 18:55:18 UTC (rev 3876)
@@ -21,7 +21,6 @@
  * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
  */
 
-#include "config.h"
 
 #include <inttypes.h>
 

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/downmix.c
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/downmix.c	2008-03-12 18:54:28 UTC (rev 3875)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/downmix.c	2008-03-12 18:55:18 UTC (rev 3876)
@@ -21,7 +21,6 @@
  * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
  */
 
-#include "config.h"
 
 #include <string.h>
 #include <inttypes.h>

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/imdct.c
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/imdct.c	2008-03-12 18:54:28 UTC (rev 3875)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/imdct.c	2008-03-12 18:55:18 UTC (rev 3876)
@@ -24,7 +24,6 @@
  * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
  */
 
-#include "config.h"
 
 #include <math.h>
 #include <stdio.h>

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/CMakeLists.txt	2008-03-12 18:54:28 UTC (rev 3875)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/CMakeLists.txt	2008-03-12 18:55:18 UTC (rev 3876)
@@ -8,3 +8,6 @@
 # FIXME
 INCLUDE(ad_plugin)
 ADM_audio_plugin(ADM_ad_a52)
+
+REMOVE_DEFINITIONS(-DHAVE_CONFIG_H)
+

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/ADM_ad_faad.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/ADM_ad_faad.cpp	2008-03-12 18:54:28 UTC (rev 3875)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/ADM_ad_faad.cpp	2008-03-12 18:55:18 UTC (rev 3876)
@@ -15,10 +15,10 @@
 // Copyright: See COPYING file that comes with this distribution
 //
 //
+#include "faad.h"
 #include "ADM_default.h"
 #include "ADM_ad_plugin.h"
 
-#include "faad.h"
 
 #define FAAD_BUFFER 2048
 class ADM_faad : public     ADM_Audiocodec
@@ -51,7 +51,7 @@
 ADM_faad::ADM_faad( uint32_t fourcc ,WAVHeader *info,uint32_t l,uint8_t *d) :   ADM_Audiocodec(fourcc)
 {
 faacDecConfigurationPtr conf;
-#ifdef OLD_FAAD_PROTO
+#ifdef FAAD_OLD_PROTOTYPE
 unsigned long int srate;
 #else
 uint32_t srate;
@@ -131,7 +131,7 @@
 void *outbuf;
 faacDecFrameInfo info;
 int max=0;
-#ifdef OLD_FAAD_PROTO
+#ifdef FAAD_OLD_PROTOTYPE
 unsigned long int srate;
 #else
 uint32_t srate;

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/CMakeLists.txt	2008-03-12 18:54:28 UTC (rev 3875)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/CMakeLists.txt	2008-03-12 18:55:18 UTC (rev 3876)
@@ -5,7 +5,10 @@
 
 # FIXME
 
-TARGET_LINK_LIBRARIES(ADM_ad_faad  ${FAAD_LIBRARY_DIR})
-INCLUDE(ad_plugin)
-ADM_audio_plugin(ADM_ad_faad)
+        TARGET_LINK_LIBRARIES(ADM_ad_faad  ${FAAD_LIBRARY_DIR})
+        INCLUDE(ad_plugin)
+        ADM_audio_plugin(ADM_ad_faad)
+	ADD_TARGET_CFLAGS(ADM_ad_faad "-I${FAAD_INCLUDE_DIR}")
+	ADD_TARGET_DEFINITIONS(ADM_ad_faad FAAD_OLD_PROTOTYPE)
+
 ENDIF (USE_FAAD)

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/ADM_ad_mad.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/ADM_ad_mad.cpp	2008-03-12 18:54:28 UTC (rev 3875)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/ADM_ad_mad.cpp	2008-03-12 18:55:18 UTC (rev 3876)
@@ -17,7 +17,6 @@
 #include "ADM_default.h"
 #include "ADM_ad_plugin.h"
 
-#ifdef USE_MP3
 #include "ADM_libMad/mad.h"
 #define Stream ((mad_stream *)_stream)
 #define Frame ((mad_frame *)_frame)
@@ -164,4 +163,3 @@
      return 0;
 }
 
-#endif

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/ADM_libMad/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/ADM_libMad/CMakeLists.txt	2008-03-12 18:54:28 UTC (rev 3875)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/ADM_libMad/CMakeLists.txt	2008-03-12 18:55:18 UTC (rev 3876)
@@ -18,6 +18,5 @@
 IF (ADM_BIG_ENDIAN)
 	ADD_TARGET_CFLAGS(${ADM_LIB} "-DWORDS_BIGENDIAN")
 ENDIF (ADM_BIG_ENDIAN)
+REMOVE_DEFINITIONS(-DHAVE_CONFIG_H)
 
-# FIXME
-ADD_TARGET_CFLAGS(${ADM_LIB} "-I${CMAKE_BINARY_DIR}/config/cli")
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/CMakeLists.txt	2008-03-12 18:54:28 UTC (rev 3875)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/CMakeLists.txt	2008-03-12 18:55:18 UTC (rev 3876)
@@ -9,7 +9,7 @@
 GET_MAD_CFLAGS(MAD_CFLAGS)
 
 ADD_TARGET_CFLAGS(ADM_ad_Mad ${MAD_CFLAGS})
-
+REMOVE_DEFINITIONS(-DHAVE_CONFIG_H)
 # FIXME
 INCLUDE(ad_plugin)
 ADM_audio_plugin(ADM_ad_Mad)

Modified: branches/avidemux_2.5_branch_mean_merged/cmake/ad_plugin.cmake
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/cmake/ad_plugin.cmake	2008-03-12 18:54:28 UTC (rev 3875)
+++ branches/avidemux_2.5_branch_mean_merged/cmake/ad_plugin.cmake	2008-03-12 18:55:18 UTC (rev 3876)
@@ -1,6 +1,7 @@
 MACRO(ADM_audio_plugin  _lib)
-        ADD_TARGET_CFLAGS(${_lib} "-I${CMAKE_BINARY_DIR}/config/cli")
-        ADD_TARGET_CFLAGS(${_lib} "-I${CMAKE_SOURCE_DIR}/avidemux/ADM_audiocodec")
+        INCLUDE_DIRECTORIES("${CMAKE_BINARY_DIR}/config")
+	INCLUDE_DIRECTORIES("${CMAKE_SOURCE_DIR}/avidemux/ADM_core/include")
+        INCLUDE_DIRECTORIES("${CMAKE_SOURCE_DIR}/avidemux/ADM_audiocodec")
         INSTALL(TARGETS ${_lib} LIBRARY DESTINATION "${CMAKE_INSTALL_PREFIX}/lib/ADM_plugins/audioDecoder/")
 ENDMACRO(ADM_audio_plugin)
 

Modified: branches/avidemux_2.5_branch_mean_merged/cmake/admCheckAudioCodecLibs.cmake
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/cmake/admCheckAudioCodecLibs.cmake	2008-03-12 18:54:28 UTC (rev 3875)
+++ branches/avidemux_2.5_branch_mean_merged/cmake/admCheckAudioCodecLibs.cmake	2008-03-12 18:55:18 UTC (rev 3876)
@@ -158,46 +158,6 @@
 MESSAGE("")
 
 ########################################
-# FAAD
-########################################
-OPTION (FAAD "" ON)
-
-MESSAGE(STATUS "Checking for FAAD")
-MESSAGE(STATUS "*****************")
-
-IF (FAAD)
-	FIND_HEADER_AND_LIB(FAAD faad.h faad)
-
-	IF (FAAD_FOUND)
-		ADM_CHECK_FUNCTION_EXISTS(faacDecInit "${FAAD_LIBRARY_DIR}" FAACDEC_FUNCTION_FOUND)
-
-		IF (NOT FAACDEC_FUNCTION_FOUND)
-			ADM_CHECK_FUNCTION_EXISTS(NeAACDecInit "${FAAD_LIBRARY_DIR}" NEAACDEC_FUNCTION_FOUND)
-
-			IF (NOT NEAACDEC_FUNCTION_FOUND)
-				SET(FAAD_FOUND 0)
-			ENDIF (NOT NEAACDEC_FUNCTION_FOUND)
-		ENDIF (NOT FAACDEC_FUNCTION_FOUND)
-	ENDIF (FAAD_FOUND)
-
-	PRINT_LIBRARY_INFO("FAAD" FAAD_FOUND "${FAAD_INCLUDE_DIR}" "${FAAD_LIBRARY_DIR}")
-
-	IF (FAAD_FOUND)
-		SET(USE_FAAD 1)
-
-		CHECK_CFLAGS_REQUIRED(faad_check.cpp "-DOLD_FAAD_PROTO" "${FAAD_INCLUDE_DIR}" "${FAAD_LIBRARY_DIR}" FAAD_CFLAGS_REQUIRED)
-
-		IF (FAAD_CFLAGS_REQUIRED)
-			SET(OLD_FAAD_PROTO 1)
-		ENDIF (FAAD_CFLAGS_REQUIRED)
-	ENDIF (FAAD_FOUND)
-ELSE (FAAD)
-	MESSAGE("${MSG_DISABLE_OPTION}")
-ENDIF (FAAD)
-
-MESSAGE("")
-
-########################################
 # Vorbis
 ########################################
 OPTION(VORBIS "" ON)
@@ -220,4 +180,4 @@
 	MESSAGE("${MSG_DISABLE_OPTION}")
 ENDIF (VORBIS)
 
-MESSAGE ("")
\ No newline at end of file
+MESSAGE ("")

Modified: branches/avidemux_2.5_branch_mean_merged/cmake/admConfigSummary.cmake
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/cmake/admConfigSummary.cmake	2008-03-12 18:54:28 UTC (rev 3875)
+++ branches/avidemux_2.5_branch_mean_merged/cmake/admConfigSummary.cmake	2008-03-12 18:55:18 UTC (rev 3876)
@@ -34,7 +34,7 @@
 ADM_DISPLAY("amrnb     " USE_AMR_NB)
 ADM_DISPLAY("LAME      " HAVE_LIBMP3LAME)
 ADM_DISPLAY("FAAC      " USE_FAAC)
-ADM_DISPLAY("FAAD      " USE_FAAD)
+ADM_DISPLAY("FAAD      " HAVE_FAAD)
 ADM_DISPLAY("libdca    " USE_LIBDCA)
 ADM_DISPLAY("Vorbis    " USE_VORBIS)
 

Modified: branches/avidemux_2.5_branch_mean_merged/cmake/config.h.cmake
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/cmake/config.h.cmake	2008-03-12 18:54:28 UTC (rev 3875)
+++ branches/avidemux_2.5_branch_mean_merged/cmake/config.h.cmake	2008-03-12 18:55:18 UTC (rev 3876)
@@ -44,15 +44,10 @@
 /* stricter prototyping */
 #cmakedefine ICONV_NEED_CONST
 
-/* use classing FAAD support */
-#cmakedefine OLD_FAAD_PROTO
 
 /* OSS detected */
 #cmakedefine OSS_SUPPORT
 
-/* use liba52 */
-#cmakedefine USE_AC3
-
 /* use Aften AC3 encoder */
 #cmakedefine USE_AFTEN
 #cmakedefine USE_AFTEN_07	// 0.07
@@ -77,9 +72,6 @@
 /* Use faac audio enccoder */
 #cmakedefine USE_FAAC
 
-/* FAAD2 detected */
-#cmakedefine USE_FAAD
-
 /* FFmpeg */
 #cmakedefine USE_FFMPEG
 
@@ -103,9 +95,6 @@
 /* MJPEG */
 #cmakedefine USE_MJPEG
 
-/* use libmad */
-#cmakedefine USE_MP3
-
 /* libpng is available */
 #cmakedefine USE_PNG
 



From mean at mail.berlios.de  Wed Mar 12 19:55:22 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Wed, 12 Mar 2008 19:55:22 +0100
Subject: [Avidemux-svn-commit] r3877 - in
	branches/avidemux_2.5_branch_mean_merged: . avidemux
	avidemux/ADM_core/src avidemux/ADM_libraries/ADM_lavcodec
	avidemux/ADM_libraries/ADM_lavformat
	avidemux/ADM_libraries/ADM_libMpeg2Dec
	avidemux/ADM_libraries/ADM_libmpeg2enc
	avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3
	avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52 cmake
Message-ID: <200803121855.m2CItMmk002938@sheep.berlios.de>

Author: mean
Date: 2008-03-12 19:55:21 +0100 (Wed, 12 Mar 2008)
New Revision: 3877

Modified:
   branches/avidemux_2.5_branch_mean_merged/CMakeLists.txt
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/src/ADM_cpuCap.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/src/ADM_dynamicLoading.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/src/ADM_misc.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/src/CMakeLists.txt
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/src/TLK_clock.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_lavcodec/CMakeLists.txt
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_lavformat/ADM_lavformat.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_libMpeg2Dec/CMakeLists.txt
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_libMpeg2Dec/cpu_accel.c
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_libmpeg2enc/ADM_mpe2enc.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/CMakeLists.txt
   branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_ad_a52.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/CMakeLists.txt
   branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/CMakeLists.txt
   branches/avidemux_2.5_branch_mean_merged/cmake/Ts.cmake
   branches/avidemux_2.5_branch_mean_merged/cmake/ad_plugin.cmake
   branches/avidemux_2.5_branch_mean_merged/cmake/admCheckMiscLibs.cmake
Log:
[Merge r3869]+cpucap fix


Modified: branches/avidemux_2.5_branch_mean_merged/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/CMakeLists.txt	2008-03-12 18:55:18 UTC (rev 3876)
+++ branches/avidemux_2.5_branch_mean_merged/CMakeLists.txt	2008-03-12 18:55:21 UTC (rev 3877)
@@ -49,6 +49,13 @@
 	SET(USE_JOG 1)
 ENDIF (UNIX AND NOT APPLE)
 
+IF (WIN32)
+	SET(BIN_DIR .)
+ELSE (WIN32)
+	SET(BIN_DIR bin)
+ENDIF (WIN32)
+
+
 ########################################
 # Standard Avidemux defines
 ########################################
@@ -62,11 +69,11 @@
 SET(ADM_UI_QT4 1)
 
 SET(HAVE_AUDIO 1)
-SET(USE_MP3 1)
-SET(USE_AC3 1)
 SET(USE_FFMPEG 1)
 SET(USE_MJPEG 1)
+SET(ADM_INSTALL_DIR "${CMAKE_INSTALL_PREFIX}")
 
+
 IF (NOT CMAKE_BUILD_TYPE)
 	SET(CMAKE_BUILD_TYPE "Release")
 ELSEIF (CMAKE_BUILD_TYPE STREQUAL "Debug")

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/src/ADM_cpuCap.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/src/ADM_cpuCap.cpp	2008-03-12 18:55:18 UTC (rev 3876)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/src/ADM_cpuCap.cpp	2008-03-12 18:55:21 UTC (rev 3877)
@@ -142,56 +142,10 @@
 	return ;
 }
 
-/************************************************************************/
-#ifdef ADM_CPU_X86
-#include "ADM_libraries/ADM_libMpeg2Dec/mpeg2_cpu.h"
-#endif
 
-int ADM_mpeg2dec_mm_support(void)
-{
-int rval=0;
-
-#ifdef ADM_CPU_X86
-#undef MATCH
-#define MATCH(x,y) if(CpuCaps::myCpuCaps & CpuCaps::myCpuMask & ADM_CPUCAP_##x) rval|=MPEG2_ACCEL_X86_##x;
-	
-	MATCH(MMX,MMX);
-	MATCH(MMXEXT,MMXEXT);
-	MATCH(3DNOW,3DNOW);
-#endif
-
-	return rval;
-}
 //******************************************************
-#ifdef ADM_CPU_X86
-#include "ADM_lavcodec.h"
-#endif
-/**
- * 		\fn lavcodec_mm_support
- * 		\brief Give lavcodec CPU supported ( FF_MM_MMX)
- */
-int ADM_lavcodec_mm_support(void)
-{
-int rval=0;
 
-#ifdef ADM_CPU_X86
-#undef MATCH
-#define MATCH(x,y) if(CpuCaps::myCpuCaps &  CpuCaps::myCpuMask & ADM_CPUCAP_##x) rval|=MM_##x;
 
-	MATCH(MMX,MMX);
-	MATCH(MMXEXT,MMXEXT);
-	MATCH(SSE,SSE);
-	MATCH(SSE2,SSE2);
-	MATCH(SSE3,SSE3);
-	MATCH(SSSE3,SSSE3);
-	MATCH(3DNOW,3DNOW);
-	MATCH(3DNOWEXT,3DNOWEXT);
-#endif
-
-	return rval;
-}
-// EOF
-
 // Stolen from x264
 int ADM_cpu_num_processors(void)
 {

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/src/ADM_dynamicLoading.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/src/ADM_dynamicLoading.cpp	2008-03-12 18:55:18 UTC (rev 3876)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/src/ADM_dynamicLoading.cpp	2008-03-12 18:55:21 UTC (rev 3877)
@@ -14,7 +14,6 @@
  *   (at your option) any later version.                                   *
  ***************************************************************************/
 
-#include "config.h"
 
 #include <stdlib.h>
 #include <stdio.h>

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/src/ADM_misc.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/src/ADM_misc.cpp	2008-03-12 18:55:18 UTC (rev 3876)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/src/ADM_misc.cpp	2008-03-12 18:55:21 UTC (rev 3877)
@@ -17,7 +17,6 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include "config.h"
 #include <stdio.h>
 #include <stdlib.h>
 #include <time.h>

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/src/CMakeLists.txt	2008-03-12 18:55:18 UTC (rev 3876)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/src/CMakeLists.txt	2008-03-12 18:55:21 UTC (rev 3877)
@@ -1,9 +1,17 @@
 SET(ADM_core_SRCS 
-	ADM_cpuCap.cpp  ADM_memcpy.cpp  ADM_memsupport.cpp  ADM_threads.cpp  ADM_win32.cpp
-	ADM_memory.cpp  ADM_misc.cpp  TLK_clock.cpp  ADM_crashdump.cpp  ADM_fileio.cpp ADM_dynamicLoading.cpp)
+        ADM_cpuCap.cpp  ADM_memcpy.cpp  ADM_memsupport.cpp  ADM_threads.cpp  ADM_win32.cpp
+        ADM_memory.cpp  ADM_misc.cpp  TLK_clock.cpp  ADM_crashdump.cpp  ADM_fileio.cpp ADM_dynamicLoading.cpp)
 
-ADD_ADM_LIB_ALL_TARGETS(ADM_core ${ADM_core_SRCS})
-ADD_SOURCE_CFLAGS(ADM_fileio.cpp ${GLIB_CFLAGS})
+ADD_LIBRARY(ADM_core SHARED ${ADM_core_SRCS})
+ADD_TARGET_DEFINITIONS(ADM_core ADM_DEBUG FIND_LEAKS)
 
+IF (MINGW)
+        ADD_SOURCE_CFLAGS(ADM_fileio.cpp ${GLIB_CFLAGS})
+
+        ADD_TARGET_LDFLAGS(ADM_core ${GLIB_LDFLAGS})
+        TARGET_LINK_LIBRARIES(ADM_core pthreadGC2 imagehlp wsock32)
+ENDIF (MINGW)
+
 REMOVE_DEFINITIONS(-DHAVE_CONFIG_H)
 
+INSTALL(TARGETS ADM_core RUNTIME DESTINATION ${BIN_DIR} LIBRARY DESTINATION lib)

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/src/TLK_clock.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/src/TLK_clock.cpp	2008-03-12 18:55:18 UTC (rev 3876)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/src/TLK_clock.cpp	2008-03-12 18:55:21 UTC (rev 3877)
@@ -33,13 +33,12 @@
 #include <unistd.h>
 #include <sys/time.h>
 
-#include "config.h"
+#include "ADM_default.h"
 
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME MODULE_CLOCKnTIMELEFT
 #include "ADM_osSupport/ADM_debug.h"
 
-#include "avi_vars.h"
 
 static uint8_t inited=0;
 static struct timeval _itimev;

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_lavcodec/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_lavcodec/CMakeLists.txt	2008-03-12 18:55:18 UTC (rev 3876)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_lavcodec/CMakeLists.txt	2008-03-12 18:55:21 UTC (rev 3877)
@@ -27,7 +27,9 @@
 	dvbsub_parser.c
 	dvbsubdec.c
 	dvbsub.c xiph.c
-	sp5xdec.c nellymoserdec.c)
+	sp5xdec.c nellymoserdec.c
+        ADM_lavcodec.cpp
+)
 
 IF(ADM_CPU_X86)
 	SET(${ADM_LIB}_SRCS  ${${ADM_LIB}_SRCS}
@@ -60,4 +62,4 @@
 
 INCLUDE(admLibFfmpeg)
 GET_FFMPEG_CFLAGS(FFMPEG_CFLAGS)
-ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "${FFMPEG_CFLAGS}")
\ No newline at end of file
+ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "${FFMPEG_CFLAGS}")

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_lavformat/ADM_lavformat.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_lavformat/ADM_lavformat.cpp	2008-03-12 18:55:18 UTC (rev 3876)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_lavformat/ADM_lavformat.cpp	2008-03-12 18:55:21 UTC (rev 3877)
@@ -1,4 +1,4 @@
-//
+
 // C++ Implementation: ADM_lavformat
 //
 // Description: 
@@ -52,7 +52,7 @@
 #define MODULE_NAME MODULE_LAVFORMAT
 #include "ADM_osSupport/ADM_debug.h"
 
-
+#include "ADM_cpuCap.h"
 static    AVOutputFormat *fmt;
 static    AVFormatContext *oc;
 static    AVStream *audio_st, *video_st;
@@ -802,7 +802,35 @@
     return 0;
   
 }
+#ifdef ADM_CPU_X86
+#include "ADM_lavcodec.h"
+#include "ADM_libraries/ADM_lavcodec/dsputil_cpu.h"
+#endif
+/**
+ * 		\fn lavcodec_mm_support
+ * 		\brief Give lavcodec CPU supported ( FF_MM_MMX)
+ */
+int ADM_lavcodec_mm_support(void)
+{
+int rval=0;
 
+#ifdef ADM_CPU_X86
+#undef MATCH
+#define MATCH(x,y) if(CpuCaps::myCpuCaps &  CpuCaps::myCpuMask & ADM_CPUCAP_##x) rval|=MM_##x;
+
+	MATCH(MMX,MMX);
+	MATCH(MMXEXT,MMXEXT);
+	MATCH(SSE,SSE);
+	MATCH(SSE2,SSE2);
+	MATCH(SSE3,SSE3);
+	MATCH(SSSE3,SSSE3);
+	MATCH(3DNOW,3DNOW);
+	MATCH(3DNOWEXT,3DNOWEXT);
+#endif
+
+	return rval;
+}
+// EOF
 //___________________________________________________________________________
 //EOF
 

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_libMpeg2Dec/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_libMpeg2Dec/CMakeLists.txt	2008-03-12 18:55:18 UTC (rev 3876)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_libMpeg2Dec/CMakeLists.txt	2008-03-12 18:55:21 UTC (rev 3877)
@@ -2,7 +2,8 @@
 
 SET(${ADM_LIB}_SRCS 
 	alloc.c      cpu_state.c  header.c      idct_altivec.c  idct_mlib.c  motion_comp_alpha.c    motion_comp.c       motion_comp_mmx.c
-	cpu_accel.c  decode.c     idct_alpha.c  idct.c          idct_mmx.c   motion_comp_altivec.c  motion_comp_mlib.c  slice.c)
+	cpu_accel.c  decode.c     idct_alpha.c  idct.c          idct_mmx.c   motion_comp_altivec.c  motion_comp_mlib.c  slice.c
+        ADM_mpeg2dec.cpp)
 
 ADD_ADM_LIB_ALL_TARGETS(${ADM_LIB} ${${ADM_LIB}_SRCS})
 ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "-DACCEL_DETECT")
@@ -15,4 +16,4 @@
 	IF (NOT APPLE)
 		ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "-DHAVE_ALTIVEC_H")
 	ENDIF (NOT APPLE)
-ENDIF (ADM_CPU_X86)
\ No newline at end of file
+ENDIF (ADM_CPU_X86)

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_libMpeg2Dec/cpu_accel.c
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_libMpeg2Dec/cpu_accel.c	2008-03-12 18:55:18 UTC (rev 3876)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_libMpeg2Dec/cpu_accel.c	2008-03-12 18:55:21 UTC (rev 3877)
@@ -30,10 +30,11 @@
 #include "mpeg2_internal.h"
 
 typedef void (*sighandler_t)(int); // MEANX RETSIGTYPE
- 
+extern int ADM_mpeg2dec_mm_support(void);
 
-extern int ADM_mpeg2dec_mm_support(void); // MEANX
+/************************************************************************/
 
+
 #ifdef ACCEL_DETECT
 #ifdef ARCH_X86
 static inline uint32_t arch_accel (void)

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_libmpeg2enc/ADM_mpe2enc.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_libmpeg2enc/ADM_mpe2enc.cpp	2008-03-12 18:55:18 UTC (rev 3876)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_libmpeg2enc/ADM_mpe2enc.cpp	2008-03-12 18:55:21 UTC (rev 3877)
@@ -260,4 +260,3 @@
 		return commonMpeg2Init(qz,maxbr,fps1000,interlaced,bff,wide,fast);
 }
 
-

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/CMakeLists.txt	2008-03-12 18:55:18 UTC (rev 3876)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/CMakeLists.txt	2008-03-12 18:55:21 UTC (rev 3877)
@@ -216,7 +216,6 @@
 # Tails
 #########################################
 SET(ADM_TAILS
-	ADM_core
 	ADM_osSupport
 	ADM_encoder
 	ADM_toolkit
@@ -307,7 +306,7 @@
 		ADM_commonUI_qt4)
 ENDIF (ADM_UI_QT4)
 
-ADD_ADMLIB_ALL_TARGETS(ADM_utilities ADM_core)
+ADD_ADMLIB_ALL_TARGETS(ADM_utilities)
 
 ###########################################
 # External libs
@@ -512,6 +511,8 @@
 	ADD_LIB_ALL_TARGETS("-Wl,-dylib_file,/System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libGL.dylib:/System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libGL.dylib")
 ENDIF (APPLE)
 
+ADD_LIB_ALL_TARGETS(-L${CMAKE_CURRENT_BINARY_DIR}/ADM_core/src -lADM_core)
+
 ###########################################
 # Install
 ###########################################
@@ -525,6 +526,6 @@
 	SET(ADM_EXES ${ADM_EXES} avidemux2_qt4)
 ENDIF (ADM_UI_QT4)
 
-INSTALL(TARGETS ${ADM_EXES} RUNTIME DESTINATION bin LIBRARY DESTINATION lib)
+INSTALL(TARGETS ${ADM_EXES} RUNTIME DESTINATION ${BIN_DIR} LIBRARY DESTINATION lib)
 
 # EOF

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_ad_a52.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_ad_a52.cpp	2008-03-12 18:55:18 UTC (rev 3876)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_ad_a52.cpp	2008-03-12 18:55:21 UTC (rev 3877)
@@ -17,7 +17,6 @@
 #include "ADM_default.h"
 #include "ADM_ad_plugin.h"
 
-#ifdef USE_AC3
 extern "C" {
 #include "ADM_liba52/a52.h"
 #include "ADM_liba52/mm_accel.h"
@@ -217,4 +216,3 @@
 
 }
 
-#endif

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/CMakeLists.txt	2008-03-12 18:55:18 UTC (rev 3876)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/CMakeLists.txt	2008-03-12 18:55:21 UTC (rev 3877)
@@ -4,6 +4,7 @@
 	bit_allocate.c  bitstream.c  downmix.c  imdct.c  parse.c)
 
 ADD_LIBRARY(${ADM_LIB} STATIC ${${ADM_LIB}_SRCS})
+TARGET_LINK_LIBRARIES(${ADM_LIB} ADM_core)
 
 IF (UNIX)
 	ADD_TARGET_CFLAGS(${ADM_LIB} -fPIC)

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/CMakeLists.txt	2008-03-12 18:55:18 UTC (rev 3876)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/CMakeLists.txt	2008-03-12 18:55:21 UTC (rev 3877)
@@ -3,7 +3,7 @@
 SET(ADM_ad_a52_SRCS ADM_ad_a52.cpp)
 
 ADD_LIBRARY(ADM_ad_a52 SHARED ${ADM_ad_a52_SRCS})
-TARGET_LINK_LIBRARIES(ADM_ad_a52 ADM_liba52)
+TARGET_LINK_LIBRARIES(ADM_ad_a52 ADM_core ADM_liba52)
 
 # FIXME
 INCLUDE(ad_plugin)

Modified: branches/avidemux_2.5_branch_mean_merged/cmake/Ts.cmake
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/cmake/Ts.cmake	2008-03-12 18:55:18 UTC (rev 3876)
+++ branches/avidemux_2.5_branch_mean_merged/cmake/Ts.cmake	2008-03-12 18:55:21 UTC (rev 3877)
@@ -64,7 +64,7 @@
                 
             SET(qm_files ${qm_files} ${_outXml} ${_out})
 
-			INSTALL(FILES ${_out} DESTINATION "${CMAKE_INSTALL_PREFIX}/bin/i18n")
+                        INSTALL(FILES ${_out} DESTINATION "${CMAKE_INSTALL_PREFIX}/${BIN_DIR}/i18n")
         ENDFOREACH(ts_input ${ts_files})
 
         SET(${_sources} ${${_sources}} ${qm_files})
@@ -95,7 +95,7 @@
                 
             SET(qm_files ${qm_files} ${_out})
 
-			INSTALL(FILES ${_out} DESTINATION "${CMAKE_INSTALL_PREFIX}/bin/i18n")
+                        INSTALL(FILES ${_out} DESTINATION "${CMAKE_INSTALL_PREFIX}/${BIN_DIR}/i18n")
         ENDFOREACH(ts_input ${ts_files})
 
         SET(${_sources} ${${_sources}} ${qm_files})

Modified: branches/avidemux_2.5_branch_mean_merged/cmake/ad_plugin.cmake
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/cmake/ad_plugin.cmake	2008-03-12 18:55:18 UTC (rev 3876)
+++ branches/avidemux_2.5_branch_mean_merged/cmake/ad_plugin.cmake	2008-03-12 18:55:21 UTC (rev 3877)
@@ -2,6 +2,6 @@
         INCLUDE_DIRECTORIES("${CMAKE_BINARY_DIR}/config")
 	INCLUDE_DIRECTORIES("${CMAKE_SOURCE_DIR}/avidemux/ADM_core/include")
         INCLUDE_DIRECTORIES("${CMAKE_SOURCE_DIR}/avidemux/ADM_audiocodec")
-        INSTALL(TARGETS ${_lib} LIBRARY DESTINATION "${CMAKE_INSTALL_PREFIX}/lib/ADM_plugins/audioDecoder/")
+        INSTALL(TARGETS ${_lib} DESTINATION "${CMAKE_INSTALL_PREFIX}/lib/ADM_plugins/audioDecoder/")
 ENDMACRO(ADM_audio_plugin)
 

Modified: branches/avidemux_2.5_branch_mean_merged/cmake/admCheckMiscLibs.cmake
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/cmake/admCheckMiscLibs.cmake	2008-03-12 18:55:18 UTC (rev 3876)
+++ branches/avidemux_2.5_branch_mean_merged/cmake/admCheckMiscLibs.cmake	2008-03-12 18:55:21 UTC (rev 3877)
@@ -89,7 +89,6 @@
 ENDIF (GETTEXT)
 
 SET(ADM_LOCALE "${CMAKE_INSTALL_PREFIX}/share/locale")
-SET(ADM_INSTALL_DIR "${CMAKE_INSTALL_PREFIX}")
 
 MESSAGE("")
 



From mean at mail.berlios.de  Wed Mar 12 19:55:23 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Wed, 12 Mar 2008 19:55:23 +0100
Subject: [Avidemux-svn-commit] r3878 - in
	branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries:
	ADM_lavcodec ADM_libMpeg2Dec
Message-ID: <200803121855.m2CItNi5002948@sheep.berlios.de>

Author: mean
Date: 2008-03-12 19:55:23 +0100 (Wed, 12 Mar 2008)
New Revision: 3878

Added:
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_lavcodec/ADM_lavcodec.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_libMpeg2Dec/ADM_mpeg2dec.cpp
Log:
[Merge r3869]+cpucap fix


Added: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_lavcodec/ADM_lavcodec.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_lavcodec/ADM_lavcodec.cpp	2008-03-12 18:55:21 UTC (rev 3877)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_lavcodec/ADM_lavcodec.cpp	2008-03-12 18:55:23 UTC (rev 3878)
@@ -0,0 +1,34 @@
+#include "ADM_default.h"
+#ifdef ADM_CPU_X86
+#include "ADM_lavcodec.h"
+#include "ADM_libraries/ADM_lavcodec/dsputil_cpu.h"
+#endif
+/**
+ * 		\fn lavcodec_mm_support
+ * 		\brief Give lavcodec CPU supported ( FF_MM_MMX)
+ */
+extern "C"
+{
+int ADM_lavcodec_mm_support(void);
+}
+int ADM_lavcodec_mm_support(void)
+{
+int rval=0;
+
+#ifdef ADM_CPU_X86
+#undef MATCH
+#define MATCH(x,y) if(CpuCaps::myCpuCaps &  CpuCaps::myCpuMask & ADM_CPUCAP_##x) rval|=MM_##x;
+
+	MATCH(MMX,MMX);
+	MATCH(MMXEXT,MMXEXT);
+	MATCH(SSE,SSE);
+	MATCH(SSE2,SSE2);
+	MATCH(SSE3,SSE3);
+	MATCH(SSSE3,SSSE3);
+	MATCH(3DNOW,3DNOW);
+	MATCH(3DNOWEXT,3DNOWEXT);
+#endif
+
+	return rval;
+}
+// EOF

Added: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_libMpeg2Dec/ADM_mpeg2dec.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_libMpeg2Dec/ADM_mpeg2dec.cpp	2008-03-12 18:55:21 UTC (rev 3877)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_libMpeg2Dec/ADM_mpeg2dec.cpp	2008-03-12 18:55:23 UTC (rev 3878)
@@ -0,0 +1,36 @@
+//
+// C++ Implementation: ADM_cpuCap
+//
+// Description: 
+//
+//
+// Author: mean <fixounet at free.fr>, (C) 2004
+//
+// Copyright: See COPYING file that comes with this distribution
+//
+//
+#include "ADM_default.h"
+#ifdef ADM_CPU_X86
+#include "ADM_libraries/ADM_libMpeg2Dec/mpeg2_cpu.h"
+#include "ADM_libraries/ADM_lavcodec/dsputil_cpu.h"
+#include "ADM_cpuCap.h"
+#endif
+extern "C"
+{
+int ADM_mpeg2dec_mm_support(void);
+}
+int ADM_mpeg2dec_mm_support(void)
+{
+int rval=0;
+
+#ifdef ADM_CPU_X86
+#undef MATCH
+#define MATCH(x,y) if(CpuCaps::myCpuCaps & CpuCaps::myCpuMask & ADM_CPUCAP_##x) rval|=MPEG2_ACCEL_X86_##x;
+	
+	MATCH(MMX,MMX);
+	MATCH(MMXEXT,MMXEXT);
+	MATCH(3DNOW,3DNOW);
+#endif
+
+	return rval;
+}



From mean at mail.berlios.de  Wed Mar 12 19:55:24 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Wed, 12 Mar 2008 19:55:24 +0100
Subject: [Avidemux-svn-commit] r3879 -
	branches/avidemux_2.5_branch_mean_merged/cmake
Message-ID: <200803121855.m2CItODO002959@sheep.berlios.de>

Author: mean
Date: 2008-03-12 19:55:23 +0100 (Wed, 12 Mar 2008)
New Revision: 3879

Added:
   branches/avidemux_2.5_branch_mean_merged/cmake/admCheckFaad.cmake
Log:
[AudioPlugins] ADM_core is not needed on unix


Added: branches/avidemux_2.5_branch_mean_merged/cmake/admCheckFaad.cmake
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/cmake/admCheckFaad.cmake	2008-03-12 18:55:23 UTC (rev 3878)
+++ branches/avidemux_2.5_branch_mean_merged/cmake/admCheckFaad.cmake	2008-03-12 18:55:23 UTC (rev 3879)
@@ -0,0 +1,45 @@
+# Outputs:
+#   FAAD_INCLUDE_DIR
+#   FAAD_LIBRARY_DIR
+#   FAAD_OLD_PROTOTYPE
+#   HAVE_FAAD
+
+MACRO(checkFaad)
+	OPTION (FAAD "" ON)
+
+	MESSAGE(STATUS "Checking for FAAD")
+	MESSAGE(STATUS "*****************")
+
+	IF (FAAD)
+		FIND_HEADER_AND_LIB(FAAD faad.h faad)
+
+		IF (FAAD_FOUND)
+			ADM_CHECK_FUNCTION_EXISTS(faacDecInit "${FAAD_LIBRARY_DIR}" FAACDEC_FUNCTION_FOUND)
+
+			IF (NOT FAACDEC_FUNCTION_FOUND)
+				ADM_CHECK_FUNCTION_EXISTS(NeAACDecInit "${FAAD_LIBRARY_DIR}" NEAACDEC_FUNCTION_FOUND)
+
+				IF (NOT NEAACDEC_FUNCTION_FOUND)
+					SET(FAAD_FOUND 0)
+				ENDIF (NOT NEAACDEC_FUNCTION_FOUND)
+			ENDIF (NOT FAACDEC_FUNCTION_FOUND)
+		ENDIF (FAAD_FOUND)
+
+		PRINT_LIBRARY_INFO("FAAD" FAAD_FOUND "${FAAD_INCLUDE_DIR}" "${FAAD_LIBRARY_DIR}")
+
+		IF (FAAD_FOUND)
+			SET(HAVE_FAAD 1)
+
+			CHECK_CFLAGS_REQUIRED(faad_check.cpp "-DOLD_FAAD_PROTO" "${FAAD_INCLUDE_DIR}" "${FAAD_LIBRARY_DIR}" FAAD_CFLAGS_REQUIRED)
+
+			IF (FAAD_CFLAGS_REQUIRED)
+				SET(FAAD_OLD_PROTOTYPE 1)
+			ENDIF (FAAD_CFLAGS_REQUIRED)
+		ENDIF (FAAD_FOUND)
+	ELSE (FAAD)
+		MESSAGE("${MSG_DISABLE_OPTION}")
+	ENDIF (FAAD)
+
+	MESSAGE("")
+ENDMACRO(checkFaad)
+



From mean at mail.berlios.de  Wed Mar 12 19:55:28 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Wed, 12 Mar 2008 19:55:28 +0100
Subject: [Avidemux-svn-commit] r3881 -
	branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad
Message-ID: <200803121855.m2CItSrU002983@sheep.berlios.de>

Author: mean
Date: 2008-03-12 19:55:28 +0100 (Wed, 12 Mar 2008)
New Revision: 3881

Modified:
   branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/CMakeLists.txt
Log:
[AudioPlugin] Use checkFaad inside plugins


Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/CMakeLists.txt	2008-03-12 18:55:27 UTC (rev 3880)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/CMakeLists.txt	2008-03-12 18:55:28 UTC (rev 3881)
@@ -1,4 +1,6 @@
-IF (USE_FAAD)
+INCLUDE(admCheckFaad)
+checkFaad()
+IF (HAVE_FAAD)
 SET(ADM_ad_faad_SRCS ADM_ad_faad.cpp )
 
 ADD_LIBRARY(ADM_ad_faad SHARED ${ADM_ad_faad_SRCS})
@@ -9,6 +11,8 @@
         INCLUDE(ad_plugin)
         ADM_audio_plugin(ADM_ad_faad)
 	ADD_TARGET_CFLAGS(ADM_ad_faad "-I${FAAD_INCLUDE_DIR}")
-	ADD_TARGET_DEFINITIONS(ADM_ad_faad FAAD_OLD_PROTOTYPE)
+        IF(FAAD_OLD_PROTOTYPE)
+	        ADD_TARGET_DEFINITIONS(ADM_ad_faad FAAD_OLD_PROTOTYPE)
+        ENDIF(FAAD_OLD_PROTOTYPE)
 
-ENDIF (USE_FAAD)
+ENDIF (HAVE_FAAD)



From mean at mail.berlios.de  Wed Mar 12 19:55:28 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Wed, 12 Mar 2008 19:55:28 +0100
Subject: [Avidemux-svn-commit] r3880 - in
	branches/avidemux_2.5_branch_mean_merged:
	avidemux/ADM_libraries/ADM_lavformat
	avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3
	avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52 cmake
Message-ID: <200803121855.m2CItSmp002973@sheep.berlios.de>

Author: mean
Date: 2008-03-12 19:55:27 +0100 (Wed, 12 Mar 2008)
New Revision: 3880

Modified:
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_lavformat/ADM_lavformat.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/CMakeLists.txt
   branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/CMakeLists.txt
   branches/avidemux_2.5_branch_mean_merged/cmake/ad_plugin.cmake
Log:
[AudioPlugins] ADM_core is not needed on unix


Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_lavformat/ADM_lavformat.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_lavformat/ADM_lavformat.cpp	2008-03-12 18:55:23 UTC (rev 3879)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_lavformat/ADM_lavformat.cpp	2008-03-12 18:55:27 UTC (rev 3880)
@@ -802,35 +802,7 @@
     return 0;
   
 }
-#ifdef ADM_CPU_X86
-#include "ADM_lavcodec.h"
-#include "ADM_libraries/ADM_lavcodec/dsputil_cpu.h"
-#endif
-/**
- * 		\fn lavcodec_mm_support
- * 		\brief Give lavcodec CPU supported ( FF_MM_MMX)
- */
-int ADM_lavcodec_mm_support(void)
-{
-int rval=0;
 
-#ifdef ADM_CPU_X86
-#undef MATCH
-#define MATCH(x,y) if(CpuCaps::myCpuCaps &  CpuCaps::myCpuMask & ADM_CPUCAP_##x) rval|=MM_##x;
-
-	MATCH(MMX,MMX);
-	MATCH(MMXEXT,MMXEXT);
-	MATCH(SSE,SSE);
-	MATCH(SSE2,SSE2);
-	MATCH(SSE3,SSE3);
-	MATCH(SSSE3,SSSE3);
-	MATCH(3DNOW,3DNOW);
-	MATCH(3DNOWEXT,3DNOWEXT);
-#endif
-
-	return rval;
-}
-// EOF
 //___________________________________________________________________________
 //EOF
 

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/CMakeLists.txt	2008-03-12 18:55:23 UTC (rev 3879)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/CMakeLists.txt	2008-03-12 18:55:27 UTC (rev 3880)
@@ -4,7 +4,6 @@
 	bit_allocate.c  bitstream.c  downmix.c  imdct.c  parse.c)
 
 ADD_LIBRARY(${ADM_LIB} STATIC ${${ADM_LIB}_SRCS})
-TARGET_LINK_LIBRARIES(${ADM_LIB} ADM_core)
 
 IF (UNIX)
 	ADD_TARGET_CFLAGS(${ADM_LIB} -fPIC)

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/CMakeLists.txt	2008-03-12 18:55:23 UTC (rev 3879)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/CMakeLists.txt	2008-03-12 18:55:27 UTC (rev 3880)
@@ -3,7 +3,7 @@
 SET(ADM_ad_a52_SRCS ADM_ad_a52.cpp)
 
 ADD_LIBRARY(ADM_ad_a52 SHARED ${ADM_ad_a52_SRCS})
-TARGET_LINK_LIBRARIES(ADM_ad_a52 ADM_core ADM_liba52)
+TARGET_LINK_LIBRARIES(ADM_ad_a52 ADM_liba52)
 
 # FIXME
 INCLUDE(ad_plugin)

Modified: branches/avidemux_2.5_branch_mean_merged/cmake/ad_plugin.cmake
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/cmake/ad_plugin.cmake	2008-03-12 18:55:23 UTC (rev 3879)
+++ branches/avidemux_2.5_branch_mean_merged/cmake/ad_plugin.cmake	2008-03-12 18:55:27 UTC (rev 3880)
@@ -2,6 +2,9 @@
         INCLUDE_DIRECTORIES("${CMAKE_BINARY_DIR}/config")
 	INCLUDE_DIRECTORIES("${CMAKE_SOURCE_DIR}/avidemux/ADM_core/include")
         INCLUDE_DIRECTORIES("${CMAKE_SOURCE_DIR}/avidemux/ADM_audiocodec")
+if(WIN32)
+	TARGET_LINK_LIBRARIES(${_lib} ADM_core)
+endif(WIN32)
         INSTALL(TARGETS ${_lib} DESTINATION "${CMAKE_INSTALL_PREFIX}/lib/ADM_plugins/audioDecoder/")
 ENDMACRO(ADM_audio_plugin)
 



From mean at mail.berlios.de  Wed Mar 12 19:55:30 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Wed, 12 Mar 2008 19:55:30 +0100
Subject: [Avidemux-svn-commit] r3882 - in
	branches/avidemux_2.5_branch_mean_merged/avidemux:
	ADM_audiocodec ADM_core/src
Message-ID: <200803121855.m2CItUbf002993@sheep.berlios.de>

Author: mean
Date: 2008-03-12 19:55:29 +0100 (Wed, 12 Mar 2008)
New Revision: 3882

Modified:
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiocodec/ADM_pluginLoad.cpp
   branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/src/ADM_fileio.cpp
Log:
[Patch] Sync with r3870


Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiocodec/ADM_pluginLoad.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiocodec/ADM_pluginLoad.cpp	2008-03-12 18:55:28 UTC (rev 3881)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_audiocodec/ADM_pluginLoad.cpp	2008-03-12 18:55:29 UTC (rev 3882)
@@ -94,24 +94,33 @@
 uint8_t ADM_ad_loadPlugins(const char *path)
 {
 #define MAX_EXTERNAL_FILTER 50
-	  char *files[MAX_EXTERNAL_FILTER];
-	  uint32_t nbFile;
-	  
-	  
-	  memset(files,0,sizeof(char *)*MAX_EXTERNAL_FILTER);
-	  printf("[ADM_ad_plugin] Scanning directory %s\n",path);
-	  if(!buildDirectoryContent(&nbFile,path,
-			  files,MAX_EXTERNAL_FILTER,"so"))
-	  {
-		  printf("[AudioPlugin] Cannot Parse plugin");
-		  return 0;
-	  }
-	  for(int i=0;i<nbFile;i++)
-	   {
-	     tryLoadingAudioPlugin(files[i]);
-	   }
-	   printf("[ADM_ad_plugin] Scanning done,found %d codec \n",ADM_audioPlugins.size());
-	   return 1;
+
+#ifdef __WIN32
+#define SHARED_LIB_EXT "dll"
+#elif defined(__APPLE__)
+#define SHARED_LIB_EXT "dylib"
+#else
+#define SHARED_LIB_EXT "so"
+#endif
+
+	char *files[MAX_EXTERNAL_FILTER];
+	uint32_t nbFile;
+
+	memset(files,0,sizeof(char *)*MAX_EXTERNAL_FILTER);
+	printf("[ADM_ad_plugin] Scanning directory %s\n",path);
+
+	if(!buildDirectoryContent(&nbFile, path, files, MAX_EXTERNAL_FILTER, SHARED_LIB_EXT))
+	{
+		printf("[ADM_ad_plugin] Cannot parse plugin");
+		return 0;
+	}
+
+	for(int i=0;i<nbFile;i++)
+		tryLoadingAudioPlugin(files[i]);
+
+	printf("[ADM_ad_plugin] Scanning done, found %d codec\n", ADM_audioPlugins.size());
+
+	return 1;
 }
 /**
  * 	\fn ADM_ad_searchCodec

Modified: branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/src/ADM_fileio.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/src/ADM_fileio.cpp	2008-03-12 18:55:28 UTC (rev 3881)
+++ branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_core/src/ADM_fileio.cpp	2008-03-12 18:55:29 UTC (rev 3882)
@@ -21,6 +21,10 @@
 #include <sys/stat.h>
 #include <unistd.h>
 
+#ifdef __WIN32
+#include <windows.h>
+#endif
+
 #ifdef __MINGW32__
 #include <glib.h>
 #endif



From gruntster at mail.berlios.de  Wed Mar 12 20:10:23 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Wed, 12 Mar 2008 20:10:23 +0100
Subject: [Avidemux-svn-commit] r3883 -
	branches/avidemux_2.5_branch_gruntster/cmake
Message-ID: <200803121910.m2CJANVV004705@sheep.berlios.de>

Author: gruntster
Date: 2008-03-12 20:10:21 +0100 (Wed, 12 Mar 2008)
New Revision: 3883

Modified:
   branches/avidemux_2.5_branch_gruntster/cmake/adm_log.cmake
   branches/avidemux_2.5_branch_gruntster/cmake/adm_qt4.cmake
Log:
[CMake] cleaner detection of standalone MinGW

Modified: branches/avidemux_2.5_branch_gruntster/cmake/adm_log.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/adm_log.cmake	2008-03-12 18:55:29 UTC (rev 3882)
+++ branches/avidemux_2.5_branch_gruntster/cmake/adm_log.cmake	2008-03-12 19:10:21 UTC (rev 3883)
@@ -79,6 +79,9 @@
 # is TRUE when using the MinGW compiler in Windows
 MESSAGE( STATUS "MINGW: " ${MINGW} )
 
+# is TRUE on Windows when using the MSYS
+MESSAGE( STATUS "MSYS: " ${MSYS} )
+
 # is TRUE on Windows when using the CygWin version of cmake
 MESSAGE( STATUS "CYGWIN: " ${CYGWIN} )
 

Modified: branches/avidemux_2.5_branch_gruntster/cmake/adm_qt4.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/adm_qt4.cmake	2008-03-12 18:55:29 UTC (rev 3882)
+++ branches/avidemux_2.5_branch_gruntster/cmake/adm_qt4.cmake	2008-03-12 19:10:21 UTC (rev 3883)
@@ -1,16 +1,9 @@
-SET(VERBATIM "VERBATIM")
-
 # Cygwin and MSYS require escaping but standalone MinGW doesn't.
-# Since CMake doesn't provide a way of detecting MSYS, check for
-# sh.exe in the path.  MinGW makefiles can't be genereated if sh
-# is in the path.
-IF(MINGW)
-	FIND_PROGRAM(SH_EXECUTABLE NAMES sh)
-	
-	IF(NOT SH_EXECUTABLE)   # if not Cygwin or MSYS
-		SET(VERBATIM "")
-	ENDIF(NOT SH_EXECUTABLE)
-ENDIF(MINGW)
+IF (MINGW AND NOT MSYS)
+	SET(VERBATIM "")
+ELSE (MINGW AND NOT MSYS)
+	SET(VERBATIM "VERBATIM")
+ENDIF(MINGW AND NOT MSYS)
 
 ##############################################################"
 # FOR AQ



From gruntster at mail.berlios.de  Wed Mar 12 21:21:15 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Wed, 12 Mar 2008 21:21:15 +0100
Subject: [Avidemux-svn-commit] r3884 - in
	branches/avidemux_2.5_branch_gruntster: . avidemux
Message-ID: <200803122021.m2CKLFxp010646@sheep.berlios.de>

Author: gruntster
Date: 2008-03-12 21:21:12 +0100 (Wed, 12 Mar 2008)
New Revision: 3884

Modified:
   branches/avidemux_2.5_branch_gruntster/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt
Log:
[CMake] strip shared libs on Win32

Modified: branches/avidemux_2.5_branch_gruntster/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/CMakeLists.txt	2008-03-12 19:10:21 UTC (rev 3883)
+++ branches/avidemux_2.5_branch_gruntster/CMakeLists.txt	2008-03-12 20:21:12 UTC (rev 3884)
@@ -29,6 +29,10 @@
 	SET(USE_LATE_BINDING 1)
 ENDIF (LATE_BINDING)
 
+IF (NOT CMAKE_BUILD_TYPE)
+	SET(CMAKE_BUILD_TYPE "Release")
+ENDIF (NOT CMAKE_BUILD_TYPE)
+
 ########################################
 # Avidemux system specific tweaks
 ########################################
@@ -51,6 +55,11 @@
 
 IF (WIN32)
 	SET(BIN_DIR .)
+
+	IF (CMAKE_BUILD_TYPE STREQUAL "Release")
+		SET(CMAKE_EXE_LINKER_FLAGS "${CMAKE_EXE_LINKER_FLAGS} -Wl,-s")
+		SET(CMAKE_SHARED_LINKER_FLAGS "${CMAKE_SHARED_LINKER_FLAGS} -Wl,-s")
+	ENDIF (CMAKE_BUILD_TYPE STREQUAL "Release")
 ELSE (WIN32)
 	SET(BIN_DIR bin)
 ENDIF (WIN32)
@@ -71,11 +80,9 @@
 SET(USE_MJPEG 1)
 SET(ADM_INSTALL_DIR "${CMAKE_INSTALL_PREFIX}")
 
-IF (NOT CMAKE_BUILD_TYPE)
-	SET(CMAKE_BUILD_TYPE "Release")
-ELSEIF (CMAKE_BUILD_TYPE STREQUAL "Debug")
+IF (CMAKE_BUILD_TYPE STREQUAL "Debug")
 	SET(ADM_DEBUG 1)
-ENDIF (NOT CMAKE_BUILD_TYPE)
+ENDIF (CMAKE_BUILD_TYPE STREQUAL "Debug")
 
 ########################################
 # Subversion

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt	2008-03-12 19:10:21 UTC (rev 3883)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt	2008-03-12 20:21:12 UTC (rev 3884)
@@ -494,7 +494,7 @@
 		ADD_LIB_ALL_TARGETS(-mno-cygwin)
 	ENDIF (MINGW)
 
-	ADD_LIB_ALL_TARGETS(winmm -Wl,--export-all-symbols)
+	ADD_LIB_ALL_TARGETS(winmm)
 
 	ADD_TARGET_LDFLAGS(avidemux2_cli "-Wl,-subsystem,console")
 
@@ -505,10 +505,6 @@
 	IF (ADM_UI_QT4)
 		ADD_TARGET_LDFLAGS(avidemux2_qt4 "-mwindows")
 	ENDIF (ADM_UI_QT4)
-
-	IF (CMAKE_BUILD_TYPE STREQUAL "Release")
-		ADD_LDFLAGS_ALL_TARGETS("-Wl,-s")
-	ENDIF (CMAKE_BUILD_TYPE STREQUAL "Release")
 ENDIF (WIN32)
 
 IF (APPLE)



From gruntster at mail.berlios.de  Wed Mar 12 21:23:46 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Wed, 12 Mar 2008 21:23:46 +0100
Subject: [Avidemux-svn-commit] r3885 - branches/avidemux_2.4_branch/avidemux
Message-ID: <200803122023.m2CKNkWf010748@sheep.berlios.de>

Author: gruntster
Date: 2008-03-12 21:23:45 +0100 (Wed, 12 Mar 2008)
New Revision: 3885

Modified:
   branches/avidemux_2.4_branch/avidemux/CMakeLists.txt
Log:
[CMake] link libiconv when necessary

Modified: branches/avidemux_2.4_branch/avidemux/CMakeLists.txt
===================================================================
--- branches/avidemux_2.4_branch/avidemux/CMakeLists.txt	2008-03-12 20:21:12 UTC (rev 3884)
+++ branches/avidemux_2.4_branch/avidemux/CMakeLists.txt	2008-03-12 20:23:45 UTC (rev 3885)
@@ -244,9 +244,9 @@
 # Add external libs
 ###########################################
 #iconv
-if(NEEED_LIBICONV)
+if(NEED_LIBICONV)
 	add_libs_all_targets(iconv)
-endif(NEEED_LIBICONV)
+endif(NEED_LIBICONV)
 
 #gettext
 if(ADM_GETTEXT_LIB)



From gruntster at mail.berlios.de  Wed Mar 12 22:38:04 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Wed, 12 Mar 2008 22:38:04 +0100
Subject: [Avidemux-svn-commit] r3886 -
	branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2
Message-ID: <200803122138.m2CLc4rE022330@sheep.berlios.de>

Author: gruntster
Date: 2008-03-12 22:38:02 +0100 (Wed, 12 Mar 2008)
New Revision: 3886

Modified:
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_gtkRender.cpp
Log:
[Preview] fix centring of parentless preview windows

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_gtkRender.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_gtkRender.cpp	2008-03-12 20:23:45 UTC (rev 3885)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_gtkRender.cpp	2008-03-12 21:38:02 UTC (rev 3886)
@@ -43,6 +43,7 @@
 
 void GUI_gtk_grow_off(int onff);
 
+extern GtkWidget *guiRootWindow;
 extern GtkWidget *getDrawWidget(void);
 extern uint8_t UI_getPhysicalScreenSize(void* window, uint32_t *w, uint32_t *h);
 
@@ -227,9 +228,16 @@
 {
 	int winWidth, winHeight, widgetWidth, widgetHeight;
 	GdkScreen *screen = gdk_screen_get_default();
-	int monitorNo = gdk_screen_get_monitor_at_window(screen, GTK_WIDGET(window->transient_parent)->window);
 	GdkRectangle rect;
+	GtkWidget *referenceWidget;
 
+	if (window->transient_parent == NULL)
+		referenceWidget = guiRootWindow;
+	else
+		referenceWidget = GTK_WIDGET(window->transient_parent);
+
+	int monitorNo = gdk_screen_get_monitor_at_window(screen, referenceWidget->window);
+
 	gdk_screen_get_monitor_geometry(screen, monitorNo, &rect);
 	gtk_widget_get_size_request((GtkWidget*)canvas, &widgetWidth, &widgetHeight);
 	gtk_window_get_size(window, &winWidth, &winHeight);



From gruntster at mail.berlios.de  Thu Mar 13 13:21:48 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Thu, 13 Mar 2008 13:21:48 +0100
Subject: [Avidemux-svn-commit] r3887 - in
	branches/avidemux_2.5_branch_gruntster: .
	avidemux/ADM_core/src avidemux/ADM_libraries/ADM_lavcodec
	avidemux/ADM_libraries/ADM_lavformat
	avidemux/ADM_libraries/ADM_libMpeg2Dec
	avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3
	avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52
	avidemux/plugins/ADM_audiodecoder/ADM_ad_faad
	avidemux/plugins/ADM_audiodecoder/ADM_ad_mad
	avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/ADM_libMad cmake
Message-ID: <200803131221.m2DCLmpW018878@sheep.berlios.de>

Author: gruntster
Date: 2008-03-13 13:21:32 +0100 (Thu, 13 Mar 2008)
New Revision: 3887

Added:
   branches/avidemux_2.5_branch_gruntster/.gitignore
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavcodec/ADM_lavcodec.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libMpeg2Dec/ADM_mpeg2dec.cpp
Removed:
   branches/avidemux_2.5_branch_gruntster/cmake/admLibMad.cmake
Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_cpuCap.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavcodec/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavformat/ADM_lavformat.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libMpeg2Dec/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/ADM_libMad/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/CMakeLists.txt
Log:
[Merge] integrate changes from Mean's 2.5 branch (r3882)

Copied: branches/avidemux_2.5_branch_gruntster/.gitignore (from rev 3884, branches/avidemux_2.5_branch_mean_merged/.gitignore)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_cpuCap.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_cpuCap.cpp	2008-03-12 21:38:02 UTC (rev 3886)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_cpuCap.cpp	2008-03-13 12:21:32 UTC (rev 3887)
@@ -142,56 +142,10 @@
 	return ;
 }
 
-/************************************************************************/
-#ifdef ADM_CPU_X86
-#include "ADM_libraries/ADM_libMpeg2Dec/mpeg2_cpu.h"
-#endif
 
-int ADM_mpeg2dec_mm_support(void)
-{
-int rval=0;
-
-#ifdef ADM_CPU_X86
-#undef MATCH
-#define MATCH(x,y) if(CpuCaps::myCpuCaps & CpuCaps::myCpuMask & ADM_CPUCAP_##x) rval|=MPEG2_ACCEL_X86_##x;
-	
-	MATCH(MMX,MMX);
-	MATCH(MMXEXT,MMXEXT);
-	MATCH(3DNOW,3DNOW);
-#endif
-
-	return rval;
-}
 //******************************************************
-#ifdef ADM_CPU_X86
-#include "ADM_lavcodec.h"
-#endif
-/**
- * 		\fn lavcodec_mm_support
- * 		\brief Give lavcodec CPU supported ( FF_MM_MMX)
- */
-int ADM_lavcodec_mm_support(void)
-{
-int rval=0;
 
-#ifdef ADM_CPU_X86
-#undef MATCH
-#define MATCH(x,y) if(CpuCaps::myCpuCaps &  CpuCaps::myCpuMask & ADM_CPUCAP_##x) rval|=MM_##x;
 
-	MATCH(MMX,MMX);
-	MATCH(MMXEXT,MMXEXT);
-	MATCH(SSE,SSE);
-	MATCH(SSE2,SSE2);
-	MATCH(SSE3,SSE3);
-	MATCH(SSSE3,SSSE3);
-	MATCH(3DNOW,3DNOW);
-	MATCH(3DNOWEXT,3DNOWEXT);
-#endif
-
-	return rval;
-}
-// EOF
-
 // Stolen from x264
 int ADM_cpu_num_processors(void)
 {

Copied: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavcodec/ADM_lavcodec.cpp (from rev 3884, branches/avidemux_2.5_branch_mean_merged/avidemux/ADM_libraries/ADM_lavcodec/ADM_lavcodec.cpp)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavcodec/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavcodec/CMakeLists.txt	2008-03-12 21:38:02 UTC (rev 3886)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavcodec/CMakeLists.txt	2008-03-13 12:21:32 UTC (rev 3887)
@@ -27,7 +27,9 @@
 	dvbsub_parser.c
 	dvbsubdec.c
 	dvbsub.c xiph.c
-	sp5xdec.c nellymoserdec.c)
+	sp5xdec.c nellymoserdec.c
+	ADM_lavcodec.cpp
+)
 
 IF(ADM_CPU_X86)
 	SET(${ADM_LIB}_SRCS  ${${ADM_LIB}_SRCS}
@@ -60,4 +62,4 @@
 
 INCLUDE(admLibFfmpeg)
 GET_FFMPEG_CFLAGS(FFMPEG_CFLAGS)
-ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "${FFMPEG_CFLAGS}")
\ No newline at end of file
+ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "${FFMPEG_CFLAGS}")

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavformat/ADM_lavformat.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavformat/ADM_lavformat.cpp	2008-03-12 21:38:02 UTC (rev 3886)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavformat/ADM_lavformat.cpp	2008-03-13 12:21:32 UTC (rev 3887)
@@ -1,4 +1,4 @@
-//
+
 // C++ Implementation: ADM_lavformat
 //
 // Description: 
@@ -52,7 +52,7 @@
 #define MODULE_NAME MODULE_LAVFORMAT
 #include "ADM_osSupport/ADM_debug.h"
 
-
+#include "ADM_cpuCap.h"
 static    AVOutputFormat *fmt;
 static    AVFormatContext *oc;
 static    AVStream *audio_st, *video_st;

Added: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libMpeg2Dec/ADM_mpeg2dec.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libMpeg2Dec/ADM_mpeg2dec.cpp	2008-03-12 21:38:02 UTC (rev 3886)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libMpeg2Dec/ADM_mpeg2dec.cpp	2008-03-13 12:21:32 UTC (rev 3887)
@@ -0,0 +1,36 @@
+//
+// C++ Implementation: ADM_cpuCap
+//
+// Description: 
+//
+//
+// Author: mean <fixounet at free.fr>, (C) 2004
+//
+// Copyright: See COPYING file that comes with this distribution
+//
+//
+#include "ADM_default.h"
+#ifdef ADM_CPU_X86
+#include "ADM_libraries/ADM_libMpeg2Dec/mpeg2_cpu.h"
+#include "ADM_libraries/ADM_lavcodec/dsputil_cpu.h"
+#include "ADM_cpuCap.h"
+#endif
+extern "C"
+{
+int ADM_mpeg2dec_mm_support(void);
+}
+int ADM_mpeg2dec_mm_support(void)
+{
+int rval=0;
+
+#ifdef ADM_CPU_X86
+#undef MATCH
+#define MATCH(x,y) if(CpuCaps::myCpuCaps & CpuCaps::myCpuMask & ADM_CPUCAP_##x) rval|=MPEG2_ACCEL_X86_##x;
+	
+	MATCH(MMX,MMX);
+	MATCH(MMXEXT,MMXEXT);
+	MATCH(3DNOW,3DNOW);
+#endif
+
+	return rval;
+}

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libMpeg2Dec/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libMpeg2Dec/CMakeLists.txt	2008-03-12 21:38:02 UTC (rev 3886)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libMpeg2Dec/CMakeLists.txt	2008-03-13 12:21:32 UTC (rev 3887)
@@ -2,7 +2,8 @@
 
 SET(${ADM_LIB}_SRCS 
 	alloc.c      cpu_state.c  header.c      idct_altivec.c  idct_mlib.c  motion_comp_alpha.c    motion_comp.c       motion_comp_mmx.c
-	cpu_accel.c  decode.c     idct_alpha.c  idct.c          idct_mmx.c   motion_comp_altivec.c  motion_comp_mlib.c  slice.c)
+	cpu_accel.c  decode.c     idct_alpha.c  idct.c          idct_mmx.c   motion_comp_altivec.c  motion_comp_mlib.c  slice.c
+	ADM_mpeg2dec.cpp)
 
 ADD_ADM_LIB_ALL_TARGETS(${ADM_LIB} ${${ADM_LIB}_SRCS})
 ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "-DACCEL_DETECT")
@@ -15,4 +16,4 @@
 	IF (NOT APPLE)
 		ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "-DHAVE_ALTIVEC_H")
 	ENDIF (NOT APPLE)
-ENDIF (ADM_CPU_X86)
\ No newline at end of file
+ENDIF (ADM_CPU_X86)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/CMakeLists.txt	2008-03-12 21:38:02 UTC (rev 3886)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/CMakeLists.txt	2008-03-13 12:21:32 UTC (rev 3887)
@@ -4,8 +4,11 @@
 	bit_allocate.c  bitstream.c  downmix.c  imdct.c  parse.c)
 
 ADD_LIBRARY(${ADM_LIB} STATIC ${${ADM_LIB}_SRCS})
-TARGET_LINK_LIBRARIES(${ADM_LIB} ADM_core)
 
+IF (WIN32)
+	TARGET_LINK_LIBRARIES(${ADM_LIB} ADM_core)
+ENDIF (WIN32)
+
 IF (UNIX)
 	ADD_TARGET_CFLAGS(${ADM_LIB} -fPIC)
 ENDIF (UNIX)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/CMakeLists.txt	2008-03-12 21:38:02 UTC (rev 3886)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/CMakeLists.txt	2008-03-13 12:21:32 UTC (rev 3887)
@@ -3,8 +3,12 @@
 SET(ADM_ad_a52_SRCS ADM_ad_a52.cpp)
 
 ADD_LIBRARY(ADM_ad_a52 SHARED ${ADM_ad_a52_SRCS})
-TARGET_LINK_LIBRARIES(ADM_ad_a52 ADM_core ADM_liba52)
+TARGET_LINK_LIBRARIES(ADM_ad_a52 ADM_liba52)
 
+IF (WIN32)
+	TARGET_LINK_LIBRARIES(ADM_ad_a52 ADM_core)
+ENDIF (WIN32)
+
 INCLUDE(ad_plugin)
 ADM_audio_plugin(ADM_ad_a52)
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/CMakeLists.txt	2008-03-12 21:38:02 UTC (rev 3886)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/CMakeLists.txt	2008-03-13 12:21:32 UTC (rev 3887)
@@ -5,8 +5,12 @@
 	SET(ADM_ad_faad_SRCS ADM_ad_faad.cpp)
 
 	ADD_LIBRARY(ADM_ad_faad SHARED ${ADM_ad_faad_SRCS})
-	TARGET_LINK_LIBRARIES(ADM_ad_faad ADM_core ${FAAD_LIBRARY_DIR})
+	TARGET_LINK_LIBRARIES(ADM_ad_faad ${FAAD_LIBRARY_DIR})
 
+	IF (WIN32)
+		TARGET_LINK_LIBRARIES(ADM_ad_faad ADM_core)
+	ENDIF (WIN32)
+
 	INCLUDE(ad_plugin)
 	ADM_audio_plugin(ADM_ad_faad)
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/ADM_libMad/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/ADM_libMad/CMakeLists.txt	2008-03-12 21:38:02 UTC (rev 3886)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/ADM_libMad/CMakeLists.txt	2008-03-13 12:21:32 UTC (rev 3887)
@@ -10,12 +10,6 @@
 	ADD_TARGET_CFLAGS(${ADM_LIB} -fPIC)
 ENDIF (UNIX)
 
-INCLUDE(admLibMad)
-GET_MAD_CFLAGS(MAD_CFLAGS)
-ADD_TARGET_CFLAGS(${ADM_LIB} ${MAD_CFLAGS})
-
 IF (ADM_BIG_ENDIAN)
 	ADD_TARGET_CFLAGS(${ADM_LIB} "-DWORDS_BIGENDIAN")
 ENDIF (ADM_BIG_ENDIAN)
-
-REMOVE_DEFINITIONS(-DHAVE_CONFIG_H)
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/CMakeLists.txt	2008-03-12 21:38:02 UTC (rev 3886)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/CMakeLists.txt	2008-03-13 12:21:32 UTC (rev 3887)
@@ -1,3 +1,13 @@
+IF (ADM_CPU_X86_32)
+	ADD_DEFINITIONS("-DFPM_INTEL")
+ELSEIF (ADM_CPU_X86_64)
+	ADD_DEFINITIONS("-DFPM_DEFAULT")
+ELSEIF (ADM_CPU_PPC)
+	ADD_DEFINITIONS("-DFPM_PPC")
+ENDIF (ADM_CPU_X86_32)
+
+REMOVE_DEFINITIONS(-DHAVE_CONFIG_H)
+
 ADD_SUBDIRECTORY(ADM_libMad)
 
 SET(ADM_ad_Mad_SRCS ADM_ad_mad.cpp)
@@ -3,12 +13,10 @@
 
 ADD_LIBRARY(ADM_ad_Mad SHARED ${ADM_ad_Mad_SRCS})
-TARGET_LINK_LIBRARIES(ADM_ad_Mad ADM_core ADM_libMad)
+TARGET_LINK_LIBRARIES(ADM_ad_Mad ADM_libMad)
 
-INCLUDE(admLibMad)
-GET_MAD_CFLAGS(MAD_CFLAGS)
+IF (WIN32)
+	TARGET_LINK_LIBRARIES(ADM_ad_Mad ADM_core)
+ENDIF (WIN32)
 
-ADD_TARGET_CFLAGS(ADM_ad_Mad ${MAD_CFLAGS})
-REMOVE_DEFINITIONS(-DHAVE_CONFIG_H)
-
 INCLUDE(ad_plugin)
 ADM_audio_plugin(ADM_ad_Mad)
\ No newline at end of file

Deleted: branches/avidemux_2.5_branch_gruntster/cmake/admLibMad.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admLibMad.cmake	2008-03-12 21:38:02 UTC (rev 3886)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admLibMad.cmake	2008-03-13 12:21:32 UTC (rev 3887)
@@ -1,9 +0,0 @@
-MACRO (GET_MAD_CFLAGS varToSet)
-	IF (ADM_CPU_X86_32)
-		SET(${varToSet} "-DFPM_INTEL")
-	ELSEIF (ADM_CPU_X86_64)
-		SET(${varToSet} "-DFPM_DEFAULT")
-	ELSEIF (ADM_CPU_PPC)
-		SET(${varToSet} "-DFPM_PPC")
-	ENDIF (ADM_CPU_X86_32)
-ENDMACRO (GET_MAD_CFLAGS)
\ No newline at end of file



From gruntster at mail.berlios.de  Thu Mar 13 15:02:54 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Thu, 13 Mar 2008 15:02:54 +0100
Subject: [Avidemux-svn-commit] r3888 - in
	branches/avidemux_2.5_branch_gruntster: . avidemux
	avidemux/ADM_audio avidemux/ADM_audiocodec
	avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3
	avidemux/plugins/ADM_audiodecoder/ADM_ad_faad
	avidemux/plugins/ADM_audiodecoder/ADM_ad_mad
	avidemux/plugins/ADM_audiodecoder/ADM_ad_vorbis cmake
Message-ID: <200803131402.m2DE2scQ029962@sheep.berlios.de>

Author: gruntster
Date: 2008-03-13 15:02:47 +0100 (Thu, 13 Mar 2008)
New Revision: 3888

Modified:
   branches/avidemux_2.5_branch_gruntster/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audio/aviaudio.hxx
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_ad_plugin.h
   branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_vorbis/ADM_ad_vorbis.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_vorbis/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/cmake/ad_plugin.cmake
Log:
[CMake] don't use the UI's include dirs and definitions for plugins

Modified: branches/avidemux_2.5_branch_gruntster/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/CMakeLists.txt	2008-03-13 12:21:32 UTC (rev 3887)
+++ branches/avidemux_2.5_branch_gruntster/CMakeLists.txt	2008-03-13 14:02:47 UTC (rev 3888)
@@ -173,6 +173,7 @@
 # Directories to build
 ########################################
 ADD_SUBDIRECTORY(avidemux)
+ADD_SUBDIRECTORY(avidemux/plugins)
 ADD_SUBDIRECTORY(po)
 
 ########################################

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audio/aviaudio.hxx
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audio/aviaudio.hxx	2008-03-13 12:21:32 UTC (rev 3887)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audio/aviaudio.hxx	2008-03-13 14:02:47 UTC (rev 3888)
@@ -70,7 +70,7 @@
 #define WAV_NELLYMOSER   9901
 #define WAV_UNKNOWN     9999
 #include "../ADM_audiocodec/ADM_audiocodec.h"
-#include "ADM_osSupport/ADM_fileio.h"
+#include "../ADM_osSupport/ADM_fileio.h"
 
 
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_ad_plugin.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_ad_plugin.h	2008-03-13 12:21:32 UTC (rev 3887)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_ad_plugin.h	2008-03-13 14:02:47 UTC (rev 3888)
@@ -7,8 +7,7 @@
 #include "ADM_default.h"
 #include "../ADM_audio/ADM_audiodef.h"
 #include "ADM_audiocodec.h"
-#include "ADM_audio/aviaudio.hxx"
-#include "ADM_audiocodec/ADM_audiocodec.h"
+#include "../ADM_audio/aviaudio.hxx"
 
 #define AD_API_VERSION 1
 /* These are the 6 functions exported by each plugin ...*/

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt	2008-03-13 12:21:32 UTC (rev 3887)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt	2008-03-13 14:02:47 UTC (rev 3888)
@@ -466,11 +466,6 @@
 ENDIF (USE_X264)
 
 ###########################################
-# Plugins
-###########################################
-ADD_SUBDIRECTORY(plugins)
-
-###########################################
 # UI Specific
 ###########################################
 ADD_TARGET_LDFLAGS(avidemux2_cli ${GLIB_LDFLAGS})

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/CMakeLists.txt	2008-03-13 12:21:32 UTC (rev 3887)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/CMakeLists.txt	2008-03-13 14:02:47 UTC (rev 3888)
@@ -1,3 +1,6 @@
+INCLUDE(ad_plugin)
+INIT_AUDIO_PLUGIN()
+
 ADD_SUBDIRECTORY(ADM_liba52)
 
 SET(ADM_ad_a52_SRCS ADM_ad_a52.cpp)
@@ -9,7 +12,4 @@
 	TARGET_LINK_LIBRARIES(ADM_ad_a52 ADM_core)
 ENDIF (WIN32)
 
-INCLUDE(ad_plugin)
-ADM_audio_plugin(ADM_ad_a52)
-
-REMOVE_DEFINITIONS(-DHAVE_CONFIG_H)
\ No newline at end of file
+INSTALL_AUDIODECODER(ADM_ad_a52)
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/CMakeLists.txt	2008-03-13 12:21:32 UTC (rev 3887)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/CMakeLists.txt	2008-03-13 14:02:47 UTC (rev 3888)
@@ -2,6 +2,9 @@
 checkFaad()
 
 IF (HAVE_FAAD)
+	INCLUDE(ad_plugin)
+	INIT_AUDIO_PLUGIN()
+	
 	SET(ADM_ad_faad_SRCS ADM_ad_faad.cpp)
 
 	ADD_LIBRARY(ADM_ad_faad SHARED ${ADM_ad_faad_SRCS})
@@ -11,9 +14,8 @@
 		TARGET_LINK_LIBRARIES(ADM_ad_faad ADM_core)
 	ENDIF (WIN32)
 
-	INCLUDE(ad_plugin)
-	ADM_audio_plugin(ADM_ad_faad)
-
 	ADD_TARGET_CFLAGS(ADM_ad_faad "-I${FAAD_INCLUDE_DIR}")
 	ADD_TARGET_DEFINITIONS(ADM_ad_faad FAAD_OLD_PROTOTYPE)
+	
+	INSTALL_AUDIODECODER(ADM_ad_faad)
 ENDIF (HAVE_FAAD)
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/CMakeLists.txt	2008-03-13 12:21:32 UTC (rev 3887)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/CMakeLists.txt	2008-03-13 14:02:47 UTC (rev 3888)
@@ -1,3 +1,6 @@
+INCLUDE(ad_plugin)
+INIT_AUDIO_PLUGIN()
+
 IF (ADM_CPU_X86_32)
 	ADD_DEFINITIONS("-DFPM_INTEL")
 ELSEIF (ADM_CPU_X86_64)
@@ -6,8 +9,6 @@
 	ADD_DEFINITIONS("-DFPM_PPC")
 ENDIF (ADM_CPU_X86_32)
 
-REMOVE_DEFINITIONS(-DHAVE_CONFIG_H)
-
 ADD_SUBDIRECTORY(ADM_libMad)
 
 SET(ADM_ad_Mad_SRCS ADM_ad_mad.cpp)
@@ -19,5 +20,4 @@
 	TARGET_LINK_LIBRARIES(ADM_ad_Mad ADM_core)
 ENDIF (WIN32)
 
-INCLUDE(ad_plugin)
-ADM_audio_plugin(ADM_ad_Mad)
\ No newline at end of file
+INSTALL_AUDIODECODER(ADM_ad_Mad)
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_vorbis/ADM_ad_vorbis.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_vorbis/ADM_ad_vorbis.cpp	2008-03-13 12:21:32 UTC (rev 3887)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_vorbis/ADM_ad_vorbis.cpp	2008-03-13 14:02:47 UTC (rev 3888)
@@ -25,20 +25,14 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include <vorbis/codec.h>
+
 #include "ADM_default.h"
 #include "ADM_ad_plugin.h"
-
-
-#include <vorbis/codec.h>
 #include "ADM_ad_vorbis.h"
 
-#include "ADM_osSupport/ADM_debugID.h"
-#define MODULE_NAME MODULE_OGM_AUDIO
-#include "ADM_osSupport/ADM_debug.h"
+#define STRUCT ((oggVorbis *)_contextVoid)
 
-
- #define STRUCT ((oggVorbis *)_contextVoid)
- 
 class ADM_vorbis : public     ADM_Audiocodec
 {
 	protected:
@@ -199,7 +193,7 @@
 
 	// Puge them
 	 vorbis_synthesis_read(&STRUCT->vdsp,nb_synth); 
-	 aprintf("This round : in %d bytes, out %d bytes synthetized:%d\n",nbIn,*nbOut,nb_synth);
+	 printf("This round : in %d bytes, out %d bytes synthetized:%d\n",nbIn,*nbOut,nb_synth);
 	return 1;
 	
 }	

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_vorbis/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_vorbis/CMakeLists.txt	2008-03-13 12:21:32 UTC (rev 3887)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_vorbis/CMakeLists.txt	2008-03-13 14:02:47 UTC (rev 3888)
@@ -1,13 +1,15 @@
-IF (USE_VORBIS)
-	SET(ADM_ad_vorbis_SRCS ADM_ad_vorbis.cpp)
-
-	ADD_LIBRARY(ADM_ad_vorbis SHARED ${ADM_ad_vorbis_SRCS})
-
-	TARGET_LINK_LIBRARIES(ADM_ad_vorbis ${VORBIS_LIBRARY_DIR})
-	TARGET_LINK_LIBRARIES(ADM_ad_vorbis ${VORBISENC_LIBRARY_DIR})
-
+IF (USE_VORBIS)
 	INCLUDE(ad_plugin)
-	ADM_audio_plugin(ADM_ad_vorbis)
+	INIT_AUDIO_PLUGIN()
 
+	SET(ADM_ad_vorbis_SRCS ADM_ad_vorbis.cpp)
+
+	ADD_LIBRARY(ADM_ad_vorbis SHARED ${ADM_ad_vorbis_SRCS})
+
+	TARGET_LINK_LIBRARIES(ADM_ad_vorbis ${VORBIS_LIBRARY_DIR})
+	TARGET_LINK_LIBRARIES(ADM_ad_vorbis ${VORBISENC_LIBRARY_DIR})
+
 	ADD_TARGET_CFLAGS(ADM_ad_vorbis "-I${VORBIS_INCLUDE_DIR}")
+
+	INSTALL_AUDIODECODER(ADM_ad_vorbis)
 ENDIF (USE_VORBIS)
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/cmake/ad_plugin.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/ad_plugin.cmake	2008-03-13 12:21:32 UTC (rev 3887)
+++ branches/avidemux_2.5_branch_gruntster/cmake/ad_plugin.cmake	2008-03-13 14:02:47 UTC (rev 3888)
@@ -1,7 +1,9 @@
-MACRO(ADM_audio_plugin  _lib)
+MACRO(INIT_AUDIO_PLUGIN)
 	INCLUDE_DIRECTORIES("${CMAKE_BINARY_DIR}/config")
 	INCLUDE_DIRECTORIES("${CMAKE_SOURCE_DIR}/avidemux/ADM_core/include")
 	INCLUDE_DIRECTORIES("${CMAKE_SOURCE_DIR}/avidemux/ADM_audiocodec")
+ENDMACRO(INIT_AUDIO_PLUGIN)
 
+MACRO(INSTALL_AUDIODECODER _lib)
 	INSTALL(TARGETS ${_lib} DESTINATION "${CMAKE_INSTALL_PREFIX}/lib/ADM_plugins/audioDecoder/")
-ENDMACRO(ADM_audio_plugin)
+ENDMACRO(INSTALL_AUDIODECODER)
\ No newline at end of file



From gruntster at mail.berlios.de  Thu Mar 13 18:57:53 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Thu, 13 Mar 2008 18:57:53 +0100
Subject: [Avidemux-svn-commit] r3889 - in
	branches/avidemux_2.5_branch_gruntster: avidemux
	avidemux/ADM_libraries/ADM_libass avidemux/ADM_toolkit
	avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog
	avidemux/ADM_userInterfaces/ADM_commonUI avidemux/ADM_video
	avidemux/ADM_videoFilter cmake
Message-ID: <200803131757.m2DHvrJO030029@sheep.berlios.de>

Author: gruntster
Date: 2008-03-13 18:57:37 +0100 (Thu, 13 Mar 2008)
New Revision: 3889

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libass/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_toolkit/automation.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_srt.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_gototime.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidFont.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSRT.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSRTRender.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/cmake/admCheckMiscLibs.cmake
   branches/avidemux_2.5_branch_gruntster/cmake/admCheckRequiredLibs.cmake
Log:
[CMake] link libiconv only when using FreeType2

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libass/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libass/CMakeLists.txt	2008-03-13 14:02:47 UTC (rev 3888)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libass/CMakeLists.txt	2008-03-13 17:57:37 UTC (rev 3889)
@@ -6,7 +6,7 @@
 		ass_font.c)
 
 	ADD_ADM_LIB_ALL_TARGETS(${ADM_LIB} ${${ADM_LIB}_SRCS})
-	ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} ${FREETYPE2_CFLAGS})
+	ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} ${FREETYPE2_CFLAGS} "-I${LIBICONV_INCLUDE_DIR}")
 
 	IF (USE_FONTCONFIG)
 		ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} ${FONTCONFIG_CFLAGS})

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_toolkit/automation.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_toolkit/automation.cpp	2008-03-13 14:02:47 UTC (rev 3888)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_toolkit/automation.cpp	2008-03-13 17:57:37 UTC (rev 3889)
@@ -20,7 +20,6 @@
 #include "config.h"
 
 #include <stdlib.h>
-//#include <glib.h>
 #include <signal.h>
 #ifndef __WIN32
 #include <unistd.h>

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_srt.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_srt.cpp	2008-03-13 14:02:47 UTC (rev 3888)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_srt.cpp	2008-03-13 17:57:37 UTC (rev 3889)
@@ -14,12 +14,11 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include "../ADM_toolkit_gtk/toolkit_gtk.h"
-#include <iconv.h>
+#include "config.h"
 
 #ifdef USE_FREETYPE
+#include "../ADM_toolkit_gtk/toolkit_gtk.h"
 
-
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_toolkit/filesel.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_gototime.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_gototime.cpp	2008-03-13 14:02:47 UTC (rev 3888)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_gototime.cpp	2008-03-13 17:57:37 UTC (rev 3889)
@@ -1,24 +1,7 @@
-//
-// C++ Implementation: ADM_vidForcedPP
-//
-//
-//
-//
 #include "config.h"
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-
-#include <math.h>
-#include <math.h>
-#include <iconv.h>
-
-
 #include "ADM_default.h"
 #include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
-#include "ADM_assert.h"
 
-
 uint8_t DIA_gotoTime(uint16_t *hh, uint16_t *mm, uint16_t *ss)
 {
 uint32_t h=*hh,m=*mm,s=*ss;
@@ -35,4 +18,3 @@
     return 1;
 
 }
-//EOF 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp	2008-03-13 14:02:47 UTC (rev 3888)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp	2008-03-13 17:57:37 UTC (rev 3889)
@@ -12,20 +12,13 @@
 //
 //
 #include "config.h"
-#ifdef USE_FREETYPE
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <math.h>
-#include <iconv.h>
 
+#ifdef USE_FREETYPE
 #include "ADM_default.h"
 #include "GUI_render.h"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "DIA_flyDialog.h"
 
-#include "ADM_assert.h"
-
 #include "ADM_toolkit/toolkit.hxx"
 
 #include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidFont.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidFont.cpp	2008-03-13 14:02:47 UTC (rev 3888)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidFont.cpp	2008-03-13 17:57:37 UTC (rev 3889)
@@ -18,7 +18,6 @@
 #include "config.h"
 
 #ifdef USE_FREETYPE
-#include <iconv.h>
 
 #include "ADM_default.h"
 #include "ADM_vidFont.h"
@@ -26,8 +25,6 @@
 static    FT_Library   	library;   		/* handle to library     */
 static    int 			initialized=0; 	// 0 No init at all, 1 engine inited
 
-
-
 ADMfont::ADMfont ( void )
 {	
 	_faceAllocated=0;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp	2008-03-13 14:02:47 UTC (rev 3888)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp	2008-03-13 17:57:37 UTC (rev 3889)
@@ -34,8 +34,6 @@
 	Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
 */
 
-#include <iconv.h>
-
 #include "config.h"
 #include "ADM_default.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSRT.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSRT.cpp	2008-03-13 14:02:47 UTC (rev 3888)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSRT.cpp	2008-03-13 17:57:37 UTC (rev 3889)
@@ -18,8 +18,6 @@
 #include "config.h"
 
 #ifdef USE_FREETYPE
-#include <iconv.h>
-
 #include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSRTRender.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSRTRender.cpp	2008-03-13 14:02:47 UTC (rev 3888)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSRTRender.cpp	2008-03-13 17:57:37 UTC (rev 3889)
@@ -19,7 +19,6 @@
 
 #ifdef USE_FREETYPE
 #include <math.h>
-#include <iconv.h>
 
 #include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/CMakeLists.txt	2008-03-13 14:02:47 UTC (rev 3888)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/CMakeLists.txt	2008-03-13 17:57:37 UTC (rev 3889)
@@ -48,7 +48,7 @@
 
 IF (USE_FREETYPE)
 	ADD_SOURCE_CFLAGS(ADM_vidSRT.cpp "${FREETYPE2_CFLAGS}")
-	ADD_SOURCE_CFLAGS(ADM_vidSRTload.cpp "${FREETYPE2_CFLAGS}")
+	ADD_SOURCE_CFLAGS(ADM_vidSRTload.cpp "${FREETYPE2_CFLAGS}" "-I${LIBICONV_INCLUDE_DIR}")
 	ADD_SOURCE_CFLAGS(ADM_vidSRTRender.cpp "${FREETYPE2_CFLAGS}")
 ENDIF (USE_FREETYPE)
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt	2008-03-13 14:02:47 UTC (rev 3888)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt	2008-03-13 17:57:37 UTC (rev 3889)
@@ -317,9 +317,6 @@
 ###########################################
 # External libs
 ###########################################
-# libiconv
-ADD_LIB_ALL_TARGETS("${LIBICONV_LIBRARY_DIR}")
-
 # gettext
 IF (GETTEXT_FOUND)
 	TARGET_LINK_LIBRARIES(avidemux2_cli ${GETTEXT_LIBRARY_DIR})
@@ -332,6 +329,9 @@
 # Freetype2
 IF (USE_FREETYPE)
 	ADD_LDFLAGS_ALL_TARGETS(${FREETYPE2_LDFLAGS})
+
+	# libiconv
+	ADD_LIB_ALL_TARGETS("${LIBICONV_LIBRARY_DIR}")
 ENDIF (USE_FREETYPE)
 
 # FontConfig

Modified: branches/avidemux_2.5_branch_gruntster/cmake/admCheckMiscLibs.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admCheckMiscLibs.cmake	2008-03-13 14:02:47 UTC (rev 3888)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admCheckMiscLibs.cmake	2008-03-13 17:57:37 UTC (rev 3889)
@@ -42,6 +42,41 @@
 MESSAGE("")
 
 ########################################
+# libiconv
+########################################
+IF (USE_FREETYPE)
+	MESSAGE(STATUS "Checking for libiconv")
+	MESSAGE(STATUS "*********************")
+
+	FIND_HEADER_AND_LIB(LIBICONV iconv.h iconv)
+	PRINT_LIBRARY_INFO("libiconv" LIBICONV_FOUND "${LIBICONV_INCLUDE_DIR}" "${LIBICONV_LIBRARY_DIR}")
+
+	IF (NOT LIBICONV_INCLUDE_DIR)
+		MESSAGE(STATUS "iconv.h not found, disabling FreeType2")
+		SET(USE_FREETYPE)
+	ELSE (NOT LIBICONV_INCLUDE_DIR)
+		IF (LIBICONV_LIBRARY_DIR)
+			MESSAGE(STATUS "libiconv is probably needed")
+
+			CHECK_CFLAGS_REQUIRED(iconv_check.cpp "-DICONV_NEED_CONST" "${LIBICONV_INCLUDE_DIR}" "${LIBICONV_LIBRARY_DIR}" LIBICONV_CFLAGS_REQUIRED)
+		ELSE (LIBICONV_LIBRARY_DIR)
+			SET(LIBICONV_INCLUDE_DIR "")
+			SET(LIBICONV_LIBRARY_DIR "")
+			MESSAGE(STATUS "libiconv is probably not needed")
+
+			ADM_COMPILE(iconv_check.cpp "-DICONV_NEED_CONST" "" "" LIBICONV_CFLAGS_REQUIRED LIBICONV_COMPILE_OUTPUT)
+		ENDIF (LIBICONV_LIBRARY_DIR)
+
+		IF (LIBICONV_CFLAGS_REQUIRED)
+			SET(LIBICONV_DEFINITIONS "-DICONV_NEED_CONST")
+			SET(ICONV_NEED_CONST 1)
+		ENDIF(LIBICONV_CFLAGS_REQUIRED)
+	ENDIF (NOT LIBICONV_INCLUDE_DIR)
+
+	MESSAGE("")
+ENDIF (USE_FREETYPE)
+
+########################################
 # gettext
 ########################################
 MESSAGE(STATUS "Checking for gettext")

Modified: branches/avidemux_2.5_branch_gruntster/cmake/admCheckRequiredLibs.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admCheckRequiredLibs.cmake	2008-03-13 14:02:47 UTC (rev 3888)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admCheckRequiredLibs.cmake	2008-03-13 17:57:37 UTC (rev 3889)
@@ -19,38 +19,6 @@
 MESSAGE("")
 
 ########################################
-# libiconv
-########################################
-MESSAGE(STATUS "Checking for libiconv")
-MESSAGE(STATUS "*********************")
-
-FIND_HEADER_AND_LIB(LIBICONV iconv.h iconv)
-PRINT_LIBRARY_INFO("libiconv" LIBICONV_FOUND "${LIBICONV_INCLUDE_DIR}" "${LIBICONV_LIBRARY_DIR}")
-
-IF (NOT LIBICONV_INCLUDE_DIR)
-	MESSAGE(FATAL_ERROR "iconv.h not found")
-ENDIF (NOT LIBICONV_INCLUDE_DIR)
-
-IF (LIBICONV_LIBRARY_DIR)
-	MESSAGE(STATUS "libiconv is probably needed")
-
-	CHECK_CFLAGS_REQUIRED(iconv_check.cpp "-DICONV_NEED_CONST" "${LIBICONV_INCLUDE_DIR}" "${LIBICONV_LIBRARY_DIR}" LIBICONV_CFLAGS_REQUIRED)
-ELSE (LIBICONV_LIBRARY_DIR)
-	SET(LIBICONV_INCLUDE_DIR "")
-	SET(LIBICONV_LIBRARY_DIR "")
-	MESSAGE(STATUS "libiconv is probably not needed")
-
-	ADM_COMPILE(iconv_check.cpp "-DICONV_NEED_CONST" "" "" LIBICONV_CFLAGS_REQUIRED LIBICONV_COMPILE_OUTPUT)
-ENDIF (LIBICONV_LIBRARY_DIR)
-
-IF (LIBICONV_CFLAGS_REQUIRED)
-	SET(LIBICONV_DEFINITIONS "-DICONV_NEED_CONST")
-	SET(ICONV_NEED_CONST 1)
-ENDIF(LIBICONV_CFLAGS_REQUIRED)
-
-MESSAGE("")
-
-########################################
 # Libxml2
 ########################################
 MESSAGE(STATUS "Checking for Libxml2")



From gruntster at mail.berlios.de  Thu Mar 13 19:40:37 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Thu, 13 Mar 2008 19:40:37 +0100
Subject: [Avidemux-svn-commit] r3890 -
	branches/avidemux_2.5_branch_gruntster/cmake
Message-ID: <200803131840.m2DIeb59012291@sheep.berlios.de>

Author: gruntster
Date: 2008-03-13 19:40:35 +0100 (Thu, 13 Mar 2008)
New Revision: 3890

Modified:
   branches/avidemux_2.5_branch_gruntster/cmake/admCheckMiscLibs.cmake
Log:
[CMake] libiconv fix for Linux

Modified: branches/avidemux_2.5_branch_gruntster/cmake/admCheckMiscLibs.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admCheckMiscLibs.cmake	2008-03-13 17:57:37 UTC (rev 3889)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admCheckMiscLibs.cmake	2008-03-13 18:40:35 UTC (rev 3890)
@@ -60,11 +60,10 @@
 
 			CHECK_CFLAGS_REQUIRED(iconv_check.cpp "-DICONV_NEED_CONST" "${LIBICONV_INCLUDE_DIR}" "${LIBICONV_LIBRARY_DIR}" LIBICONV_CFLAGS_REQUIRED)
 		ELSE (LIBICONV_LIBRARY_DIR)
-			SET(LIBICONV_INCLUDE_DIR "")
 			SET(LIBICONV_LIBRARY_DIR "")
 			MESSAGE(STATUS "libiconv is probably not needed")
 
-			ADM_COMPILE(iconv_check.cpp "-DICONV_NEED_CONST" "" "" LIBICONV_CFLAGS_REQUIRED LIBICONV_COMPILE_OUTPUT)
+			ADM_COMPILE(iconv_check.cpp "-DICONV_NEED_CONST" "${LIBICONV_INCLUDE_DIR}" "" LIBICONV_CFLAGS_REQUIRED LIBICONV_COMPILE_OUTPUT)
 		ENDIF (LIBICONV_LIBRARY_DIR)
 
 		IF (LIBICONV_CFLAGS_REQUIRED)



From gruntster at mail.berlios.de  Fri Mar 14 03:05:33 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Fri, 14 Mar 2008 03:05:33 +0100
Subject: [Avidemux-svn-commit] r3891 - in
	branches/avidemux_2.5_branch_gruntster/avidemux:
	ADM_core/include ADM_core/src
	ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk
Message-ID: <200803140205.m2E25XNc014518@sheep.berlios.de>

Author: gruntster
Date: 2008-03-14 03:05:29 +0100 (Fri, 14 Mar 2008)
New Revision: 3891

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_assert.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_fileio.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp
Log:
[Core] remove ADM_core's GLib dependency on Win32

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_assert.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_assert.h	2008-03-13 18:40:35 UTC (rev 3890)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_assert.h	2008-03-14 02:05:29 UTC (rev 3891)
@@ -40,8 +40,6 @@
 int             ADM_fclose (FILE *file);
 uint8_t         ADM_fileExist(char *name);
 uint8_t         ADM_mkdir(const char *name);
-//char            *ADM_rindex(const char *s, int c);
-//char            *ADM_index(const char *s, int c);
 
 /* Replacements for memory allocation functions */
 extern void     *ADM_alloc(size_t size);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_fileio.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_fileio.cpp	2008-03-13 18:40:35 UTC (rev 3890)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_fileio.cpp	2008-03-14 02:05:29 UTC (rev 3891)
@@ -27,10 +27,6 @@
 #include <Carbon/Carbon.h>
 #endif
 
-#ifdef __MINGW32__
-#include <glib.h>
-#endif
-
 #include "ADM_default.h"
 #include "ADM_toolkit/filesel.h"
 #include "ADM_toolkit/toolkit.hxx"
@@ -65,15 +61,18 @@
 
 FILE *ADM_fopen(const char *file, const char *mode)
 {
-	FILE *f;
-
 #ifdef __MINGW32__
-	gchar *retval = g_locale_from_utf8 (file, -1, NULL, NULL, NULL);
-	f=fopen(retval,mode);
-	g_free (retval);
-	return f;
+	int nFileLen = MultiByteToWideChar(CP_UTF8, MB_ERR_INVALID_CHARS, file, -1, NULL, 0);
+	int nModeLen = MultiByteToWideChar(CP_UTF8, MB_ERR_INVALID_CHARS, mode, -1, NULL, 0);
+	wchar_t wFile[nFileLen + 1];
+	wchar_t wMode[nModeLen + 1];
+
+	MultiByteToWideChar(CP_UTF8, 0, mode, -1, wMode, nModeLen + 1);
+	MultiByteToWideChar(CP_UTF8, 0, file, -1, wFile, nFileLen + 1);
+
+	return _wfopen(wFile, wMode);
 #else
-	return fopen(file,mode); 
+	return fopen(file, mode);
 #endif
 }
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/CMakeLists.txt	2008-03-13 18:40:35 UTC (rev 3890)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/CMakeLists.txt	2008-03-14 02:05:29 UTC (rev 3891)
@@ -6,9 +6,6 @@
 ADD_TARGET_DEFINITIONS(ADM_core ADM_DEBUG FIND_LEAKS)
 
 IF (MINGW)
-	ADD_SOURCE_CFLAGS(ADM_fileio.cpp ${GLIB_CFLAGS})
-
-	ADD_TARGET_LDFLAGS(ADM_core ${GLIB_LDFLAGS})
 	TARGET_LINK_LIBRARIES(ADM_core pthreadGC2 imagehlp wsock32)
 ELSEIF (APPLE)
 	ADD_TARGET_LDFLAGS(ADM_core "-framework Carbon")

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp	2008-03-13 18:40:35 UTC (rev 3890)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp	2008-03-14 02:05:29 UTC (rev 3891)
@@ -1,376 +1,384 @@
 /***************************************************************************
-                          TLK_filesel.cpp  -  description
-                             -------------------
-	New version of file selector
+TLK_filesel.cpp  -  description
+-------------------
+New version of file selector
 
-    begin                : Fri Sep 20 2002
-    copyright            : (C) 2002 by mean
-    email                : fixounet at free.fr
- ***************************************************************************/
+begin                : Fri Sep 20 2002
+copyright            : (C) 2002 by mean
+email                : fixounet at free.fr
+***************************************************************************/
 
 /***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
+*                                                                         *
+*   This program is free software; you can redistribute it and/or modify  *
+*   it under the terms of the GNU General Public License as published by  *
+*   the Free Software Foundation; either version 2 of the License, or     *
+*   (at your option) any later version.                                   *
+*                                                                         *
+***************************************************************************/
 
 #include "toolkit_gtk.h"
+
 #include <errno.h>
 #include <sys/types.h>
 #include <sys/stat.h>
 #include <dirent.h>
 
+#include "ADM_default.h"
 #include "avi_vars.h"
 
-
 #include "ADM_toolkit/filesel.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "prefs.h"
+
 #define TH_READ 1
 #define TH_WRITE 2
 
-extern char * actual_workbench_file;
+extern char *actual_workbench_file;
 
-static void GUI_FileSel(const char *label, SELFILE_CB * cb, int rw, char **name=NULL);
-char            *ADM_PathCanonize(const char *tmpname);
-void            ADM_PathStripName(char *str);
-uint8_t         initFileSelector(void);
+static void GUI_FileSel(const char *label, SELFILE_CB *cb, int rw, char **name = NULL);
+uint8_t initFileSelector(void);
 
-static GtkFileFilter   *filter_avi=NULL,*filter_mpeg=NULL,*filter_image=NULL,*filter_all=NULL;
-static uint8_t          setFilter( GtkWidget *dialog);
+static GtkFileFilter *filter_avi = NULL, *filter_mpeg = NULL, *filter_image = NULL, *filter_all = NULL;
+static uint8_t setFilter(GtkWidget *dialog);
 
 /**
-    \fn FileSel_SelectRead(const char *title,char *target,uint32_t max, const char *source)
-    \brief allow to select a file
-    @return 0 on failure, 1 on success
-    @param title : window title 
-    @param target : where to copy the result (must be allocated by caller)
-    @param max : Max # of bytes that target can hold
-    @param source : where we start from
+\fn FileSel_SelectRead(const char *title,char *target,uint32_t max, const char *source)
+\brief allow to select a file
+ at return 0 on failure, 1 on success
+ at param title : window title 
+ at param target : where to copy the result (must be allocated by caller)
+ at param max : Max # of bytes that target can hold
+ at param source : where we start from
 */
-uint8_t FileSel_SelectRead(const char *title,char *target,uint32_t max, const char *source)
+uint8_t FileSel_SelectRead(const char *title, char *target, uint32_t max, const char *source)
 {
-	
-GtkWidget *dialog;
-uint8_t ret=0;
-gchar *selected_filename;
-gchar last;
-char *dupe=NULL,*tmpname=NULL;
-DIR *dir=NULL;
-	
-	dialog = gtk_file_chooser_dialog_new ("Open File",
-                                      NULL,
-                                      GTK_FILE_CHOOSER_ACTION_OPEN,
-                                      GTK_STOCK_CANCEL, GTK_RESPONSE_CANCEL,
-                                      GTK_STOCK_OPEN, GTK_RESPONSE_ACCEPT,
-                                      NULL);
-	gtk_window_set_title (GTK_WINDOW (dialog),title);
-        initFileSelector();
-        setFilter(dialog);
-        gtk_register_dialog(dialog);
-//	gtk_transient(dialog);
+	GtkWidget *dialog;
+	uint8_t ret = 0;
+	gchar *selected_filename, last;
+	char *dupe = NULL, *tmpname = NULL;
+	DIR *dir = NULL;
+
+	dialog = gtk_file_chooser_dialog_new("Open File", NULL, GTK_FILE_CHOOSER_ACTION_OPEN,
+		GTK_STOCK_CANCEL, GTK_RESPONSE_CANCEL, GTK_STOCK_OPEN, GTK_RESPONSE_ACCEPT,	NULL);
+
+	gtk_window_set_title(GTK_WINDOW(dialog), title);
+	initFileSelector();
+	setFilter(dialog);
+	gtk_register_dialog(dialog);
+
 	if (source && *source)
-	{
-		gtk_file_chooser_set_filename(GTK_FILE_CHOOSER(dialog),(gchar *)source);
-	}
+		gtk_file_chooser_set_filename(GTK_FILE_CHOOSER(dialog), (gchar*)source);
 	else	//use pref
+		if (prefs->get(LASTDIR_READ, (ADM_filename**)&tmpname))
+			gtk_file_chooser_set_current_folder(GTK_FILE_CHOOSER(dialog), (gchar*)tmpname);
+
+	if (gtk_dialog_run(GTK_DIALOG(dialog)) == GTK_RESPONSE_ACCEPT)
 	{
-		if( prefs->get(LASTDIR_READ,(ADM_filename **)&tmpname))
+		selected_filename = (gchar *)gtk_file_chooser_get_filename(GTK_FILE_CHOOSER(dialog));
+
+		if (strlen(selected_filename))
 		{
-			gtk_file_chooser_set_current_folder(GTK_FILE_CHOOSER(dialog),(gchar *)tmpname);
-		}
-	}
-	if(gtk_dialog_run(GTK_DIALOG(dialog))==GTK_RESPONSE_ACCEPT)
-	{
-			selected_filename= (gchar *) 	gtk_file_chooser_get_filename(GTK_FILE_CHOOSER(dialog));
-			if(strlen(selected_filename))
+			last = selected_filename[strlen(selected_filename) - 1]; 
+
+			if (last == '/' || last =='\\' )
 			{
-			last=selected_filename[strlen(selected_filename) - 1]; 
-			 if (last == '/' || last =='\\' )
-			 {
-                           GUI_Error_HIG(QT_TR_NOOP("Cannot open directory as a file"), NULL);
-						return 0;
+				GUI_Error_HIG(QT_TR_NOOP("Cannot open directory as a file"), NULL);
+				return 0;
 			}
 			else
 			{
 				// Check we can read it ..
-				
-					FILE *fd;
-					fd=fopen(selected_filename,"rb");
-					if(fd)
-					{	
-						fclose(fd);
-						strncpy(target,(char *)selected_filename,max);
-						// Finally we accept it :)
-						ret=1;
-					}
+				FILE *fd;
+
+				fd = fopen(selected_filename,"rb");
+
+				if (fd)
+				{
+					fclose(fd);
+					strncpy(target, (char*)selected_filename, max);
+					// Finally we accept it :)
+					ret = 1;
+				}
 			}
-			}
-	}	
-        gtk_unregister_dialog(dialog);
+		}
+	}
+
+	gtk_unregister_dialog(dialog);
 	gtk_widget_destroy(dialog);
+
 	return ret;
 }
 /**
-    \fn FileSel_SelectWrite(const char *title,char *target,uint32_t max, const char *source)
-    \brief allow to select a file
-    @return 0 on failure, 1 on success
-    @param title : window title 
-    @param target : where to copy the result (must be allocated by caller)
-    @param max : Max # of bytes that target can hold
-    @param source : where we start from
+\fn FileSel_SelectWrite(const char *title,char *target,uint32_t max, const char *source)
+\brief allow to select a file
+ at return 0 on failure, 1 on success
+ at param title : window title 
+ at param target : where to copy the result (must be allocated by caller)
+ at param max : Max # of bytes that target can hold
+ at param source : where we start from
 */
-uint8_t FileSel_SelectWrite(const char *title,char *target,uint32_t max, const char *source)
+uint8_t FileSel_SelectWrite(const char *title, char *target, uint32_t max, const char *source)
 {
-	
-GtkWidget *dialog;
-uint8_t ret=0;
-gchar *selected_filename;
-gchar last;
-char *dupe=NULL,*tmpname=NULL;
-DIR *dir=NULL;
-	
-	dialog = gtk_file_chooser_dialog_new ("Write to File",
-                                      NULL,
-                                      GTK_FILE_CHOOSER_ACTION_SAVE,
-                                      GTK_STOCK_CANCEL, GTK_RESPONSE_CANCEL,
-                                      GTK_STOCK_OPEN, GTK_RESPONSE_ACCEPT,
-                                      NULL);
-	gtk_window_set_title (GTK_WINDOW (dialog),title);
-        initFileSelector();
-        setFilter(dialog);
-        gtk_register_dialog(dialog);
-//	gtk_transient(dialog);
+	GtkWidget *dialog;
+	uint8_t ret = 0;
+	gchar *selected_filename;
+	gchar last;
+	char *dupe = NULL, *tmpname = NULL;
+	DIR *dir = NULL;
+
+	dialog = gtk_file_chooser_dialog_new("Write to File", NULL, GTK_FILE_CHOOSER_ACTION_SAVE,
+		GTK_STOCK_CANCEL, GTK_RESPONSE_CANCEL, GTK_STOCK_OPEN, GTK_RESPONSE_ACCEPT, NULL);
+
+	gtk_window_set_title(GTK_WINDOW(dialog), title);
+	initFileSelector();
+	setFilter(dialog);
+	gtk_register_dialog(dialog);
+
 	if (source && *source)
 	{
 #if 0
-// well, this is what they say to do, but then you can't easily edit the
-// name...
+		// well, this is what they say to do, but then you can't easily edit the
+		// name...
 
-                // the following sequence is per GTK docs for gtk_file_chooser_set_filename()
-                if (access (source, W_OK) == 0) // if file exists
-                {
-                    gtk_file_chooser_set_filename(GTK_FILE_CHOOSER(dialog),(gchar *)source);
-                    // printf ("FileSel_SelectWrite: existing %s\n", source);
-                }
-                else // new file
+		// the following sequence is per GTK docs for gtk_file_chooser_set_filename()
+		if (access (source, W_OK) == 0) // if file exists
+			gtk_file_chooser_set_filename(GTK_FILE_CHOOSER(dialog),(gchar *)source);
+		else // new file
 #endif
-                {
-                    dupe=ADM_PathCanonize(source);
-                    ADM_PathStripName(dupe);
-                    gtk_file_chooser_set_current_folder(GTK_FILE_CHOOSER(dialog),(gchar *)dupe);
-                    gtk_file_chooser_set_current_name(GTK_FILE_CHOOSER(dialog),
-                                                      (gchar *)(source + strlen(dupe)));
-                    // printf ("FileSel_SelectWrite: folder %s, name %s\n", dupe, source + strlen(dupe));
-                    delete [] dupe;
-                }
-	
+		{
+			dupe = ADM_PathCanonize(source);
+			ADM_PathStripName(dupe);
+
+			gtk_file_chooser_set_current_folder(GTK_FILE_CHOOSER(dialog), (gchar*)dupe);
+			gtk_file_chooser_set_current_name(GTK_FILE_CHOOSER(dialog),
+				(gchar*)(source + strlen(dupe)));
+
+			delete [] dupe;
+		}
 	}
 	else	//use pref
 	{
-		if( prefs->get(LASTDIR_WRITE,(ADM_filename **)&tmpname))
+		if (prefs->get(LASTDIR_WRITE,(ADM_filename **)&tmpname))
 		{
-			
-			dupe=ADM_PathCanonize(tmpname);
+			dupe = ADM_PathCanonize(tmpname);
 
-			if( (dir=opendir(dupe)) )
+			if (dir = opendir(dupe))
 			{
 				closedir(dir);
-				gtk_file_chooser_set_current_folder(GTK_FILE_CHOOSER(dialog),(gchar *)tmpname);
+				gtk_file_chooser_set_current_folder(GTK_FILE_CHOOSER(dialog), (gchar*)tmpname);
 			}
+
 			delete [] dupe;
 		}
 	}
-	if(gtk_dialog_run(GTK_DIALOG(dialog))==GTK_RESPONSE_ACCEPT)
+	if (gtk_dialog_run(GTK_DIALOG(dialog)) == GTK_RESPONSE_ACCEPT)
 	{
-			selected_filename= (gchar *) 	gtk_file_chooser_get_filename(GTK_FILE_CHOOSER(dialog));
-			if(strlen(selected_filename))
+		selected_filename = (gchar*)gtk_file_chooser_get_filename(GTK_FILE_CHOOSER(dialog));
+
+		if (strlen(selected_filename))
+		{
+			last = selected_filename[strlen(selected_filename) - 1];
+
+			if (last == '/' || last =='\\')
 			{
-			last=selected_filename[strlen(selected_filename) - 1]; 
-			 if (last == '/' || last =='\\' )
-			 {
-                           GUI_Error_HIG(QT_TR_NOOP("Cannot open directory as a file"), NULL);
-						return 0;
+				GUI_Error_HIG(QT_TR_NOOP("Cannot open directory as a file"), NULL);
+				return 0;
 			}
 			else
 			{
-                              strncpy(target,(char *)selected_filename,max);
-                              // Finally we accept it :)
-                              ret=1;
-					
+				strncpy(target, (char*)selected_filename, max);
+				// Finally we accept it :)
+				ret = 1;
 			}
-			}
-	}	
-        gtk_unregister_dialog(dialog);
+		}
+	}
+
+	gtk_unregister_dialog(dialog);
 	gtk_widget_destroy(dialog);
+
 	return ret;
 }
+
 /**
-    \fn FileSel_SelectDir(const char *title,char *target,uint32_t max, const char *source)
-    \brief allow to select a directory
-    @return 0 on failure, 1 on success
-    @param title : window title 
-    @param target : where to copy the result (must be allocated by caller)
-    @param max : Max # of bytes that target can hold
-    @param source : where we start from
+\fn FileSel_SelectDir(const char *title,char *target,uint32_t max, const char *source)
+\brief allow to select a directory
+ at return 0 on failure, 1 on success
+ at param title : window title 
+ at param target : where to copy the result (must be allocated by caller)
+ at param max : Max # of bytes that target can hold
+ at param source : where we start from
 */
-uint8_t FileSel_SelectDir(const char *title,char *target,uint32_t max, const char *source)
+uint8_t FileSel_SelectDir(const char *title, char *target, uint32_t max, const char *source)
 {
-	
-GtkWidget *dialog;
-uint8_t ret=0;
-gchar *selected_filename;
-gchar last;
-char *dupe=NULL,*tmpname=NULL;
-DIR *dir=NULL;
-	
-        dialog = gtk_file_chooser_dialog_new ("Open File",
-                                      NULL,
-                                      GTK_FILE_CHOOSER_ACTION_SELECT_FOLDER,
-                                      GTK_STOCK_CANCEL, GTK_RESPONSE_CANCEL,
-                                      GTK_STOCK_OPEN, GTK_RESPONSE_ACCEPT,
-                                      NULL);
-        gtk_window_set_title (GTK_WINDOW (dialog),title);
-        gtk_register_dialog(dialog);
-        /* Set default dir if provided ..*/
-        if(source)
-        {
-                dupe=ADM_PathCanonize(source);
-                ADM_PathStripName(dupe);
-                if( (dir=opendir(dupe)) )
-                        {
-                                closedir(dir);
-                                gtk_file_chooser_set_filename(GTK_FILE_CHOOSER(dialog),(gchar *)source);
-                        }
-                delete [] dupe;
-        
-        }
-        else	//use pref
-        {
-                if( prefs->get(LASTDIR_READ,(ADM_filename **)&tmpname))
-                {
-                        
-        
-                        dupe=ADM_PathCanonize(tmpname);
-                        ADM_PathStripName(dupe);
-  
-                        if( (dir=opendir(dupe)) )
-                        {
-                                closedir(dir);
-                                gtk_file_chooser_set_filename(GTK_FILE_CHOOSER(dialog),(gchar *)dupe);
-                        }
-                        delete [] dupe;
-                }
-        }
+	GtkWidget *dialog;
+	uint8_t ret = 0;
+	gchar *selected_filename;
+	gchar last;
+	char *dupe = NULL, *tmpname = NULL;
+	DIR *dir = NULL;
 
-        if(gtk_dialog_run(GTK_DIALOG(dialog))==GTK_RESPONSE_ACCEPT)
-        {
-          selected_filename= (gchar *) 	gtk_file_chooser_get_filename(GTK_FILE_CHOOSER(dialog));
-          if(strlen(selected_filename))  /* Nothing selected */
-          {
-            /* Check it is a dir ...*/
-            printf("<%s>\n",selected_filename);; 
-            strncpy(target,selected_filename,max);
-            target[max-1]=0;
-            ret=1;
-          }
-        }	
-        gtk_unregister_dialog(dialog);
-        gtk_widget_destroy(dialog);
-        return ret;
+	dialog = gtk_file_chooser_dialog_new("Open File", NULL, GTK_FILE_CHOOSER_ACTION_SELECT_FOLDER,
+		GTK_STOCK_CANCEL, GTK_RESPONSE_CANCEL, GTK_STOCK_OPEN, GTK_RESPONSE_ACCEPT, NULL);
+
+	gtk_window_set_title(GTK_WINDOW(dialog), title);
+	gtk_register_dialog(dialog);
+
+	/* Set default dir if provided ..*/
+	if (source)
+	{
+		dupe = ADM_PathCanonize(source);
+		ADM_PathStripName(dupe);
+
+		if (dir = opendir(dupe))
+		{
+			closedir(dir);
+			gtk_file_chooser_set_filename(GTK_FILE_CHOOSER(dialog), (gchar*)source);
+		}
+
+		delete [] dupe;
+	}
+	else	//use pref
+	{
+		if (prefs->get(LASTDIR_READ, (ADM_filename **)&tmpname))
+		{
+			dupe = ADM_PathCanonize(tmpname);
+			ADM_PathStripName(dupe);
+
+			if (dir = opendir(dupe))
+			{
+				closedir(dir);
+				gtk_file_chooser_set_filename(GTK_FILE_CHOOSER(dialog), (gchar*)dupe);
+			}
+
+			delete [] dupe;
+		}
+	}
+
+	if (gtk_dialog_run(GTK_DIALOG(dialog)) == GTK_RESPONSE_ACCEPT)
+	{
+		selected_filename = (gchar*)gtk_file_chooser_get_filename(GTK_FILE_CHOOSER(dialog));
+
+		if (strlen(selected_filename))  /* Nothing selected */
+		{
+			/* Check it is a dir ...*/
+			printf("<%s>\n", selected_filename);
+			strncpy(target, selected_filename, max);
+			target[max-1] = 0;
+			ret = 1;
+		}
+	}
+
+	gtk_unregister_dialog(dialog);
+	gtk_widget_destroy(dialog);
+
+	return ret;
 }
 
 void GUI_FileSelWrite(const char *label, SELFILE_CB * cb)
-{				/* Create the selector */
-    GUI_FileSel(label, cb, 1);
+{
+	/* Create the selector */
+	GUI_FileSel(label, cb, 1);
 }
 
 void GUI_FileSelRead(const char *label, SELFILE_CB * cb)
-{				/* Create the selector */
-    GUI_FileSel(label, cb, 0);
+{
+	/* Create the selector */
+	GUI_FileSel(label, cb, 0);
 }
 void GUI_FileSelRead(const char *label, char * * name)
-{				/* Create the selector */
-    GUI_FileSel(label, NULL, 0,name);
+{
+	/* Create the selector */
+	GUI_FileSel(label, NULL, 0, name);
 }
 void GUI_FileSelWrite(const char *label, char * * name)
-{				/* Create the selector */
-    GUI_FileSel(label, NULL, 1,name);
+{
+	/* Create the selector */
+	GUI_FileSel(label, NULL, 1, name);
 }
 
 // CYB 2005.02.23: DND
 void fileReadWrite(SELFILE_CB *cb, int rw, char *name)
 {
-
-	if(name)
+	if (name)
 	{
-		if(cb)
+		if (cb)
 		{
 			FILE *fd;
-			fd=fopen(name,"rb");
-			if(rw==0) // read
+			fd = fopen(name, "rb");
+
+			if (rw == 0) // read
 			{
 				// try to open it..
-				if(!fd)
+				if (!fd)
 				{
-                                  GUI_Error_HIG(QT_TR_NOOP("File error"), QT_TR_NOOP("Cannot open \"%s\"."), name);
+					GUI_Error_HIG(QT_TR_NOOP("File error"), QT_TR_NOOP("Cannot open \"%s\"."), name);
 					return;
 				}
 			}
 			else // write
 			{
-				if(fd){
-				  struct stat buf;
-				  int fdino;
+				if (fd)
+				{
+					struct stat buf;
+					int fdino;
+					char msg[300];
+
 					fclose(fd);
 
-					char msg[300];
-
 					snprintf(msg, 300, QT_TR_NOOP("%s already exists.\n\nDo you want to replace it?"), ADM_GetFileName(name));
 
-                                        if(!GUI_Question(msg))
+					if (!GUI_Question(msg))
 						return;
-	                                /*
-	                                ** JSC Fri Feb 10 00:07:30 CET 2006
-	                                ** compare existing output file inode against each current open files inode
-	                                ** i'm ignoring st_dev, so we may get false positives
-	                                ** i'm testing until fd=1024, should be MAXFD computed by configure
-	                                ** keep in mind:
-	                                ** you can overwrite .idx files, they are loaded into memory and closed soon
-	                                ** you cannot overwrite segment data files, all files are kept open and
-	                                ** are detected here
-	                                */
+
+					/*
+					** JSC Fri Feb 10 00:07:30 CET 2006
+					** compare existing output file inode against each current open files inode
+					** i'm ignoring st_dev, so we may get false positives
+					** i'm testing until fd=1024, should be MAXFD computed by configure
+					** keep in mind:
+					** you can overwrite .idx files, they are loaded into memory and closed soon
+					** you cannot overwrite segment data files, all files are kept open and
+					** are detected here
+					*/
 #ifndef __WIN32
-					if( stat(name,&buf) == -1 ){
-						fprintf(stderr,"stat(%s) failed\n",name);
+					if (stat(name,&buf) == -1)
+					{
+						fprintf(stderr, "stat(%s) failed\n", name);
 						return;
 					}
 #endif
 					fdino = buf.st_ino;
-					for(int i=0;i<1024;i++){
-						if( fstat(i,&buf) != -1 ){
-							if( buf.st_ino == fdino ){
-							  char str[512];
-								snprintf(str,512,"File \"%s\" exists and is opened by Avidemux",name);
-								GUI_Error_HIG(str,
-                                                                    QT_TR_NOOP("It is possible that you are trying to overwrite an input file!"));
+					for (int i = 0; i < 1024; i++)
+					{
+						if (fstat(i, &buf) != -1)
+						{
+							if (buf.st_ino == fdino)
+							{
+								char str[512];
+
+								snprintf(str, 512, "File \"%s\" exists and is opened by Avidemux", name);
+								GUI_Error_HIG(str, QT_TR_NOOP("It is possible that you are trying to overwrite an input file!"));
+
 								return;
 							}
 						}
 					}
 					/*
-	                                ** compare output file against actual EMCAscript file
+					** compare output file against actual EMCAscript file
 					** need to stat() to avoid symlink (/home/x.js) vs. real file (/export/home/x.js) case
-	                                */
-					if( actual_workbench_file ){
-						if( stat(actual_workbench_file,&buf) != -1 ){
-							if( buf.st_ino == fdino ){
-							  char str[512];
-								snprintf(str,512,"File \"%s\" exists and is the actual ECMAscript file",name);
-                                                                GUI_Error_HIG(str,QT_TR_NOOP("It is possible that you are trying to overwrite an input file!"));
+					*/
+					if (actual_workbench_file)
+					{
+						if (stat(actual_workbench_file, &buf) != -1)
+						{
+							if (buf.st_ino == fdino)
+							{
+								char str[512];
+
+								snprintf(str, 512, "File \"%s\" exists and is the actual ECMAscript file", name);
+								GUI_Error_HIG(str, QT_TR_NOOP("It is possible that you are trying to overwrite an input file!"));
+
 								return;
 							}
 						}
@@ -378,13 +386,16 @@
 				}
 
 				// check we have right access to it
-				fd=fopen(name,"wb");
-				if(!fd)
+				fd = fopen(name, "wb");
+
+				if (!fd)
 				{
-                                  GUI_Error_HIG(QT_TR_NOOP("Cannot write the file"),QT_TR_NOOP( "No write access to \"%s\"."), name);
+					GUI_Error_HIG(QT_TR_NOOP("Cannot write the file"), QT_TR_NOOP("No write access to \"%s\"."), name);
+
 					return;
 				}
 			}
+
 			fclose(fd);
 			cb(name);
 		} // no callback -> return value
@@ -394,152 +405,143 @@
 
 
 void GUI_FileSel(const char *label, SELFILE_CB * cb, int rw,char **rname)
-{				/* Create the selector */
-
-    	GtkWidget *dialog;
-	char *name=NULL;
+{
+	/* Create the selector */
+	GtkWidget *dialog;
+	char *name = NULL;
 	char *tmpname;
 	gchar *selected_filename;
-        uint8_t res;
+	uint8_t res;
 
-       
-	if(rname)
-		*rname=NULL;
+	if (rname)
+		*rname = NULL;
 
-        if(rw)
-        {
-                        dialog = gtk_file_chooser_dialog_new ("Save",
-                                      NULL,
-                                      GTK_FILE_CHOOSER_ACTION_SAVE,
-                                      GTK_STOCK_CANCEL, GTK_RESPONSE_CANCEL,
-                                      GTK_STOCK_SAVE, GTK_RESPONSE_ACCEPT,
-                                      NULL);
-                        
-        }
-        else
-        {
-          dialog = gtk_file_chooser_dialog_new ("Open File",
-                                      NULL,
-                                      GTK_FILE_CHOOSER_ACTION_OPEN,
-                                      GTK_STOCK_CANCEL, GTK_RESPONSE_CANCEL,
-                                      GTK_STOCK_OPEN, GTK_RESPONSE_ACCEPT,
-                                      NULL);
-        }
-		gtk_dialog_set_default_response (GTK_DIALOG (dialog), GTK_RESPONSE_ACCEPT);
-        /**********/
-        initFileSelector();
-        setFilter(dialog);
-        /**********/
-        gtk_window_set_title (GTK_WINDOW (dialog),label);
-        gtk_register_dialog(dialog);
-        if(rw)
-                res=prefs->get(LASTDIR_WRITE,(ADM_filename **)&tmpname); 
-        else
-               res=prefs->get(LASTDIR_READ,(ADM_filename **)&tmpname); 
-        if(res)
+	if (rw)
+		dialog = gtk_file_chooser_dialog_new ("Save", NULL, GTK_FILE_CHOOSER_ACTION_SAVE,
+			GTK_STOCK_CANCEL, GTK_RESPONSE_CANCEL, GTK_STOCK_SAVE, GTK_RESPONSE_ACCEPT, NULL);
+	else
+		dialog = gtk_file_chooser_dialog_new ("Open File", NULL, GTK_FILE_CHOOSER_ACTION_OPEN, 
+			GTK_STOCK_CANCEL, GTK_RESPONSE_CANCEL, GTK_STOCK_OPEN, GTK_RESPONSE_ACCEPT, NULL);
+
+	gtk_dialog_set_default_response (GTK_DIALOG(dialog), GTK_RESPONSE_ACCEPT);
+
+	initFileSelector();
+	setFilter(dialog);
+
+	gtk_window_set_title (GTK_WINDOW(dialog), label);
+	gtk_register_dialog(dialog);
+
+	if (rw)
+		res = prefs->get(LASTDIR_WRITE,(ADM_filename **)&tmpname);
+	else
+		res = prefs->get(LASTDIR_READ,(ADM_filename **)&tmpname);
+
+	if (res)
 	{
-                DIR *dir;
-                char *str=ADM_PathCanonize(tmpname);
-                ADM_PathStripName(str);
+		DIR *dir;
+		char *str = ADM_PathCanonize(tmpname);
 
-                /* LASTDIR may have gone; then do nothing and use current dir instead (implied) */
-                if( (dir=opendir(str)) )
-                {
-                        closedir(dir);
-                        gtk_file_chooser_set_current_folder(GTK_FILE_CHOOSER(dialog),(gchar *)str);
-                }
-                delete [] str;
-        }
-		ADM_dealloc(tmpname);
-        if(gtk_dialog_run(GTK_DIALOG(dialog))==GTK_RESPONSE_ACCEPT)
+		ADM_PathStripName(str);
+
+		/* LASTDIR may have gone; then do nothing and use current dir instead (implied) */
+		if (dir = opendir(str))
+		{
+			closedir(dir);
+			gtk_file_chooser_set_current_folder(GTK_FILE_CHOOSER(dialog),(gchar *)str);
+		}
+
+		delete [] str;
+	}
+
+	ADM_dealloc(tmpname);
+
+	if (gtk_dialog_run(GTK_DIALOG(dialog)) == GTK_RESPONSE_ACCEPT)
 	{
+		selected_filename = (gchar *)gtk_file_chooser_get_filename(GTK_FILE_CHOOSER(dialog));
 
-                        selected_filename= (gchar *) 	gtk_file_chooser_get_filename(GTK_FILE_CHOOSER(dialog));
 #ifdef __WIN32
-                        if (*(selected_filename + strlen(selected_filename) - 1) == '\\'){
-#else			
-                        if (*(selected_filename + strlen(selected_filename) - 1) == '/'){
-#endif	 
-                        GUI_Error_HIG(QT_TR_NOOP("Cannot open directory as a file"), NULL);
-                }
-                else
-                {
-                        name=ADM_strdup(selected_filename);
+		if (*(selected_filename + strlen(selected_filename) - 1) == '\\'){
+#else
+		if (*(selected_filename + strlen(selected_filename) - 1) == '/'){
+#endif
+			GUI_Error_HIG(QT_TR_NOOP("Cannot open directory as a file"), NULL);
+		}
+		else
+		{
+			name = ADM_strdup(selected_filename);
 
-                        char *str=ADM_PathCanonize(name);
-                        ADM_PathStripName(str);
-                        if(rw)
-                                prefs->set(LASTDIR_WRITE,(ADM_filename *)str);			
-                        else
-                                prefs->set(LASTDIR_READ,(ADM_filename *)str);                        
-                        delete [] str;
+			char *str = ADM_PathCanonize(name);
 
-                }
-        }
-        gtk_unregister_dialog(dialog);
-        gtk_widget_destroy(dialog);
+			ADM_PathStripName(str);
 
-// CYB 2005.02.23
-        if(cb)
-        {
-                fileReadWrite(cb, rw, name);
-				ADM_dealloc(name);
-        }
-        else
-        {
-                *rname=name;  
-        }
+			if (rw)
+				prefs->set(LASTDIR_WRITE, (ADM_filename*)str);
+			else
+				prefs->set(LASTDIR_READ, (ADM_filename*)str);
+
+			delete [] str;
+		}
+	}
+
+	gtk_unregister_dialog(dialog);
+	gtk_widget_destroy(dialog);
+
+	// CYB 2005.02.23
+	if (cb)
+	{
+		fileReadWrite(cb, rw, name);
+		ADM_dealloc(name);
+	}
+	else
+		*rname = name;
 }
 
 
-
 /* Mean:It seems it is attached to the dialog & destroyed with it
-   As it leads to crash if we don't recreate them each time....*/
-uint8_t         initFileSelector(void)
+As it leads to crash if we don't recreate them each time....*/
+uint8_t initFileSelector(void)
 {
-
 #define ADD_PAT(x,y) gtk_file_filter_add_pattern(x,"*."#y);
-        
-        filter_avi=gtk_file_filter_new();
-        gtk_file_filter_set_name(filter_avi,"Avi (*.avi)");
-        ADD_PAT(filter_avi,avi);
-        ADD_PAT(filter_avi,AVI);
-        
-        filter_mpeg=gtk_file_filter_new();
-        gtk_file_filter_set_name(filter_mpeg,"Mpeg (*.m*,*.vob)");
-        ADD_PAT(filter_mpeg,[mM][12][Vv]);
-        ADD_PAT(filter_mpeg,[Mm][pP][gG]);
-        ADD_PAT(filter_mpeg,[Vv][Oo][Bb]);
-        ADD_PAT(filter_mpeg,ts);
-        ADD_PAT(filter_mpeg,TS);
 
-       
-        filter_image=gtk_file_filter_new();
-        gtk_file_filter_set_name(filter_image,QT_TR_NOOP("Images"));
-        ADD_PAT(filter_image,png);
-        ADD_PAT(filter_image,bmp);
-        ADD_PAT(filter_image,jpg);
+	filter_avi=gtk_file_filter_new();
+	gtk_file_filter_set_name(filter_avi, "AVI (*.avi)");
+	ADD_PAT(filter_avi, avi);
+	ADD_PAT(filter_avi, AVI);
 
-        ADD_PAT(filter_image,PNG);
-        ADD_PAT(filter_image,BMP);
-        ADD_PAT(filter_image,JPG);
+	filter_mpeg=gtk_file_filter_new();
+	gtk_file_filter_set_name(filter_mpeg, "MPEG (*.m*,*.vob)");
+	ADD_PAT(filter_mpeg, [mM][12][Vv]);
+	ADD_PAT(filter_mpeg, [Mm][pP][gG]);
+	ADD_PAT(filter_mpeg, [Vv][Oo][Bb]);
+	ADD_PAT(filter_mpeg, ts);
+	ADD_PAT(filter_mpeg, TS);
 
+	filter_image = gtk_file_filter_new();
 
-        
-        filter_all=gtk_file_filter_new();
-        gtk_file_filter_set_name(filter_all,QT_TR_NOOP("All"));
-        gtk_file_filter_add_pattern (filter_all, "*");
+	gtk_file_filter_set_name(filter_image, QT_TR_NOOP("Images"));
+	ADD_PAT(filter_image, png);
+	ADD_PAT(filter_image, bmp);
+	ADD_PAT(filter_image, jpg);
 
-        return 1;
+	ADD_PAT(filter_image, PNG);
+	ADD_PAT(filter_image, BMP);
+	ADD_PAT(filter_image, JPG);
+
+	filter_all = gtk_file_filter_new();
+
+	gtk_file_filter_set_name(filter_all, QT_TR_NOOP("All"));
+	gtk_file_filter_add_pattern(filter_all, "*");
+
+	return 1;
 }
 
-uint8_t setFilter( GtkWidget *dialog)
+uint8_t setFilter(GtkWidget *dialog)
 {
-        gtk_file_chooser_add_filter     (GTK_FILE_CHOOSER(dialog), filter_all);
-        gtk_file_chooser_add_filter     (GTK_FILE_CHOOSER(dialog), filter_avi);
-        gtk_file_chooser_add_filter     (GTK_FILE_CHOOSER(dialog), filter_mpeg);
-        gtk_file_chooser_add_filter     (GTK_FILE_CHOOSER(dialog), filter_image);
-        
-        return 1;
+	gtk_file_chooser_add_filter(GTK_FILE_CHOOSER(dialog), filter_all);
+	gtk_file_chooser_add_filter(GTK_FILE_CHOOSER(dialog), filter_avi);
+	gtk_file_chooser_add_filter(GTK_FILE_CHOOSER(dialog), filter_mpeg);
+	gtk_file_chooser_add_filter(GTK_FILE_CHOOSER(dialog), filter_image);
+
+	return 1;
 }
 //EOF



From gruntster at mail.berlios.de  Fri Mar 14 14:20:33 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Fri, 14 Mar 2008 14:20:33 +0100
Subject: [Avidemux-svn-commit] r3892 - in
	branches/avidemux_2.5_branch_gruntster: avidemux
	avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2
	avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk cmake
Message-ID: <200803141320.m2EDKX4B005122@sheep.berlios.de>

Author: gruntster
Date: 2008-03-14 14:20:26 +0100 (Fri, 14 Mar 2008)
New Revision: 3892

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/toolkit_gtk.h
   branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/gtk_gui.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/main.cpp
   branches/avidemux_2.5_branch_gruntster/cmake/admCheckUserInterfaceLibs.cmake
Log:
[GLib] remove GLib dependency

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp	2008-03-14 02:05:29 UTC (rev 3891)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp	2008-03-14 13:20:26 UTC (rev 3892)
@@ -140,7 +140,7 @@
  void UI_BusyCursor( void );
  void UI_NormalCursor( void );
 // For checking if Slider shift key is pressed
-gboolean SliderIsShifted = FALSE;
+bool SliderIsShifted = FALSE;
 gboolean UI_SliderPressed(GtkWidget *widget, GdkEventButton *event, gpointer user_data);
 gboolean UI_SliderReleased(GtkWidget *widget, GdkEventButton *event, gpointer user_data);
 gboolean UI_returnFocus(GtkWidget *widget, GdkEventButton *event, gpointer user_data);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/toolkit_gtk.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/toolkit_gtk.h	2008-03-14 02:05:29 UTC (rev 3891)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/toolkit_gtk.h	2008-03-14 13:20:26 UTC (rev 3892)
@@ -1,22 +1,20 @@
 
 /***************************************************************************
-    copyright            : (C) 2001/2006 by mean
-    email                : fixounet at free.fr
- ***************************************************************************/
+copyright            : (C) 2001/2006 by mean
+email                : fixounet at free.fr
+***************************************************************************/
 
 /***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
+*                                                                         *
+*   This program is free software; you can redistribute it and/or modify  *
+*   it under the terms of the GNU General Public License as published by  *
+*   the Free Software Foundation; either version 2 of the License, or     *
+*   (at your option) any later version.                                   *
+*                                                                         *
+***************************************************************************/
 #ifndef ADM_TLK_GTK
 #define ADM_TLK_GTK
-#include <stdlib.h>
 
-#include <glib.h>
 #include <gdk/gdkkeysyms.h>
 #include <gtk/gtk.h>
 
@@ -24,31 +22,26 @@
 #include "ADM_gladeSupport.h"
 #include "toolkit_gtk_include.h"
 
+uint8_t getRangeInMenu(GtkWidget *Menu);
+void changeTextInMenu(GtkWidget *menu, int range, const char *text);
+void UI_purge(void);
+uint8_t getSelectionNumber(uint32_t nb, GtkWidget *tree, GtkListStore *store, uint32_t *number);
+uint8_t setSelectionNumber(uint32_t nb, GtkWidget *tree, GtkListStore *store, uint32_t number);
+int gtk_read_entry(GtkWidget *entry);
+void gtk_write_entry(GtkWidget *entry, int value);
+void gtk_write_entry_string(GtkWidget *entry, char *value);
+float gtk_read_entry_float(GtkWidget *entry);
+void gtk_write_entry_float(GtkWidget *entry, float value);
 
+/* Window handling: transient modal etc..*/
+void gtk_register_dialog(GtkWidget *newdialog);
+void gtk_unregister_dialog(GtkWidget *newdialog);
+void gtk_transient(GtkWidget *widget);
 
-uint8_t getRangeInMenu(GtkWidget * Menu);
-void    changeTextInMenu(GtkWidget *menu,int range,const char *text);
-void    UI_purge(void );
-uint8_t getSelectionNumber(uint32_t nb,GtkWidget *tree  , GtkListStore 	*store,uint32_t *number);
-uint8_t setSelectionNumber(uint32_t nb,GtkWidget *tree  , GtkListStore 	*store,uint32_t number);
-int     gtk_read_entry(GtkWidget *entry);
-void    gtk_write_entry(GtkWidget *entry, int value);
-void    gtk_write_entry_string(GtkWidget *entry, char *value);
-float   gtk_read_entry_float(GtkWidget *entry);
-
-void    gtk_write_entry_float(GtkWidget *entry, float value);
-
-/* Window handling : transient modal etc..*/
-
-void    gtk_register_dialog(GtkWidget *newdialog);
-void    gtk_unregister_dialog(GtkWidget *newdialog);
-void    gtk_transient(GtkWidget *widget);
-/*****/
 #define WID(x) lookup_widget(dialog,#x)
 #define RADIO_SET(widget_name,value) gtk_toggle_button_set_active \
-                                ( GTK_TOGGLE_BUTTON (WID(widget_name)), value)
-                                
-#define RADIO_GET(widget_name) gtk_toggle_button_get_active \
-                                ( GTK_TOGGLE_BUTTON (WID(widget_name)))
+	(GTK_TOGGLE_BUTTON (WID(widget_name)), value)
 
+#define RADIO_GET(widget_name) gtk_toggle_button_get_active \
+	(GTK_TOGGLE_BUTTON (WID(widget_name)))
 #endif

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt	2008-03-14 02:05:29 UTC (rev 3891)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt	2008-03-14 13:20:26 UTC (rev 3892)
@@ -143,7 +143,6 @@
 
 SDLify(main.cpp)
 ADD_SOURCE_CFLAGS(main.cpp "-DADM_SUBVERSION=${ADM_SUBVERSION}")
-ADD_SOURCE_CFLAGS(gtk_gui.cpp ${GLIB_CFLAGS})
 
 IF (USE_AMR_NB)
 	ADD_SOURCE_CFLAGS(main.cpp -I${AMRNB_INCLUDE_DIR})
@@ -468,14 +467,11 @@
 ###########################################
 # UI Specific
 ###########################################
-ADD_TARGET_LDFLAGS(avidemux2_cli ${GLIB_LDFLAGS})
-
 IF (ADM_UI_GTK)
 	ADD_TARGET_LDFLAGS(avidemux2_gtk ${GTK_LDFLAGS} ${GTHREAD_LDFLAGS})
 ENDIF (ADM_UI_GTK)
 
 IF (ADM_UI_QT4)
-	ADD_TARGET_LDFLAGS(avidemux2_qt4 ${GLIB_LDFLAGS})
 	TARGET_LINK_LIBRARIES(avidemux2_qt4 ${QT_QTGUI_LIBRARY} ${QT_QTCORE_LIBRARY})
 ENDIF (ADM_UI_QT4)
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/gtk_gui.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/gtk_gui.cpp	2008-03-14 02:05:29 UTC (rev 3891)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/gtk_gui.cpp	2008-03-14 13:20:26 UTC (rev 3892)
@@ -24,7 +24,6 @@
 #include <sys/time.h>
 #include <fcntl.h>	/* O_RDONLY */
 #include <errno.h>
-#include <glib.h>
     
 #include "ADM_lavcodec.h"
 #include "fourcc.h"
@@ -40,7 +39,7 @@
 #include "ADM_audiofilter/audioprocess.hxx"
 #include "gui_action.hxx"
 #include "gtkgui.h"
-//#include "ADM_gui/GUI_vars.h"
+
 #include "ADM_outputs/oplug_avi/GUI_mux.h"
 #include "ADM_outputs/oplug_mpegFF/oplug_vcdff.h"
 #include "ADM_audiofilter/audioeng_buildfilters.h"
@@ -60,11 +59,9 @@
 #include "ADM_filter/video_filters.h"
 #include "ADM_encoder/ADM_vidEncode.hxx"
 #include "ADM_codecs/ADM_ffmpeg.h"
-
 #include "ADM_libraries/ADM_libmpeg2enc/ADM_mpeg2enc.h"
-
-#include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
 #include "ADM_video/ADM_vidMisc.h"
+
 void A_handleSecondTrack (int tracktype);
 int A_delete(uint32_t start, uint32_t end);
 void A_saveImg (char *name);
@@ -155,7 +152,7 @@
 renderZoom currentZoom=ZOOM_1_1;
 uint8_t A_setSecondAudioTrack(const AudioSource nw,char *name);
 extern const char * GUI_getCustomScript(uint32_t nb);
-extern gboolean SliderIsShifted;
+extern bool SliderIsShifted;
 
 void GUI_showCurrentFrameHex(void);
 void GUI_avsProxy(void);
@@ -172,7 +169,6 @@
 
 void HandleAction (Action action)
 {
-  gchar *name_utf8;
   static int recursive = 0;
 
   uint32_t nf = 0;
@@ -210,13 +206,16 @@
         case ACT_RECENT2:
         case ACT_RECENT3:
                         const char **name;
+						char* fileName;
                         int rank;
                                 name=prefs->get_lastfiles();
                                 rank=(int)action-ACT_RECENT0;
                                 ADM_assert(name[rank]);
-				name_utf8 = g_filename_from_utf8(name[rank], -1, NULL, NULL, NULL);
-                                A_openAvi2 (name_utf8, 0);
-				g_free(name_utf8);
+
+								fileName = ADM_strdup(name[rank]);
+                                A_openAvi2(fileName, 0);
+								ADM_dealloc(fileName);
+
                 return;
         case ACT_ViewMain: UI_toogleMain();return;
         case ACT_ViewSide: UI_toogleSide();return;
@@ -882,7 +881,6 @@
 int A_openAvi2 (char *name, uint8_t mode)
 {
   uint8_t res;
-  gchar *name_utf8;
   char *longname;
   uint32_t magic[4];
   uint32_t id = 0;
@@ -965,8 +963,7 @@
 	}
 
 	/* remember any video or workbench file to "recent" */
-	name_utf8 = g_filename_to_utf8(longname, -1, NULL, NULL, NULL);
-	prefs->set_lastfile(name_utf8);
+	prefs->set_lastfile(longname);
         UI_updateRecentMenu();
 	updateLoaded ();
         if(currentaudiostream)
@@ -996,7 +993,7 @@
 		}
 	UI_setTitle(longname+i);
     }
-	g_free(name_utf8);
+
 	delete[] longname;
 	return 1;
 }

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/main.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/main.cpp	2008-03-14 02:05:29 UTC (rev 3891)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/main.cpp	2008-03-14 13:20:26 UTC (rev 3892)
@@ -239,9 +239,9 @@
 	//***************Plugins *********************
 	// Load system wide audio decoder plugin
 #ifdef __APPLE__
+	char *adPlugins = ADM_getInstallRelativePath("../Resources/lib","ADM_plugins","audioDecoder");
+#else
 	char *adPlugins = ADM_getInstallRelativePath("lib","ADM_plugins","audioDecoder");
-#else
-	char *adPlugins = ADM_getInstallRelativePath("../Resources/lib","ADM_plugins","audioDecoder");
 #endif
 
 	ADM_ad_loadPlugins(adPlugins);

Modified: branches/avidemux_2.5_branch_gruntster/cmake/admCheckUserInterfaceLibs.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admCheckUserInterfaceLibs.cmake	2008-03-14 02:05:29 UTC (rev 3891)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admCheckUserInterfaceLibs.cmake	2008-03-14 13:20:26 UTC (rev 3892)
@@ -1,15 +1,4 @@
 ########################################
-# GLib
-########################################
-MESSAGE(STATUS "Checking for GLib")
-MESSAGE(STATUS "*****************")
-
-PKG_CHECK_MODULES(GLIB glib-2.0)
-PRINT_LIBRARY_INFO("GLib" GLIB_FOUND "${GLIB_CFLAGS}" "${GLIB_LDFLAGS}" FATAL_ERROR)
-
-MESSAGE("")
-
-########################################
 # GTK+
 ########################################
 OPTION(GTK "" ON)



From gruntster at mail.berlios.de  Fri Mar 14 14:35:55 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Fri, 14 Mar 2008 14:35:55 +0100
Subject: [Avidemux-svn-commit] r3893 - in
	branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder:
	ADM_ad_ac3 ADM_ad_ac3/ADM_liba52 ADM_ad_faad ADM_ad_mad
Message-ID: <200803141335.m2EDZtSv007014@sheep.berlios.de>

Author: gruntster
Date: 2008-03-14 14:35:51 +0100 (Fri, 14 Mar 2008)
New Revision: 3893

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/CMakeLists.txt
Log:
[CMake] link plugins with ADM_core on Mac

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/CMakeLists.txt	2008-03-14 13:20:26 UTC (rev 3892)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/CMakeLists.txt	2008-03-14 13:35:51 UTC (rev 3893)
@@ -5,9 +5,9 @@
 
 ADD_LIBRARY(${ADM_LIB} STATIC ${${ADM_LIB}_SRCS})
 
-IF (WIN32)
+IF (WIN32 OR APPLE)
 	TARGET_LINK_LIBRARIES(${ADM_LIB} ADM_core)
-ENDIF (WIN32)
+ENDIF (WIN32 OR APPLE)
 
 IF (UNIX)
 	ADD_TARGET_CFLAGS(${ADM_LIB} -fPIC)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/CMakeLists.txt	2008-03-14 13:20:26 UTC (rev 3892)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/CMakeLists.txt	2008-03-14 13:35:51 UTC (rev 3893)
@@ -8,8 +8,8 @@
 ADD_LIBRARY(ADM_ad_a52 SHARED ${ADM_ad_a52_SRCS})
 TARGET_LINK_LIBRARIES(ADM_ad_a52 ADM_liba52)
 
-IF (WIN32)
+IF (WIN32 OR APPLE)
 	TARGET_LINK_LIBRARIES(ADM_ad_a52 ADM_core)
-ENDIF (WIN32)
+ENDIF (WIN32 OR APPLE)
 
 INSTALL_AUDIODECODER(ADM_ad_a52)
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/CMakeLists.txt	2008-03-14 13:20:26 UTC (rev 3892)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/CMakeLists.txt	2008-03-14 13:35:51 UTC (rev 3893)
@@ -10,9 +10,9 @@
 	ADD_LIBRARY(ADM_ad_faad SHARED ${ADM_ad_faad_SRCS})
 	TARGET_LINK_LIBRARIES(ADM_ad_faad ${FAAD_LIBRARY_DIR})
 
-	IF (WIN32)
+	IF (WIN32 OR APPLE)
 		TARGET_LINK_LIBRARIES(ADM_ad_faad ADM_core)
-	ENDIF (WIN32)
+	ENDIF (WIN32 OR APPLE)
 
 	ADD_TARGET_CFLAGS(ADM_ad_faad "-I${FAAD_INCLUDE_DIR}")
 	ADD_TARGET_DEFINITIONS(ADM_ad_faad FAAD_OLD_PROTOTYPE)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/CMakeLists.txt	2008-03-14 13:20:26 UTC (rev 3892)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/CMakeLists.txt	2008-03-14 13:35:51 UTC (rev 3893)
@@ -1,4 +1,4 @@
-INCLUDE(ad_plugin)
+INCLUDE(ad_plugin)
 INIT_AUDIO_PLUGIN()
 
 IF (ADM_CPU_X86_32)
@@ -16,8 +16,8 @@
 ADD_LIBRARY(ADM_ad_Mad SHARED ${ADM_ad_Mad_SRCS})
 TARGET_LINK_LIBRARIES(ADM_ad_Mad ADM_libMad)
 
-IF (WIN32)
+IF (WIN32 OR APPLE)
 	TARGET_LINK_LIBRARIES(ADM_ad_Mad ADM_core)
-ENDIF (WIN32)
+ENDIF (WIN32 OR APPLE)
 
 INSTALL_AUDIODECODER(ADM_ad_Mad)
\ No newline at end of file



From gruntster at mail.berlios.de  Sat Mar 15 12:43:06 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Sat, 15 Mar 2008 12:43:06 +0100
Subject: [Avidemux-svn-commit] r3894 - in
	branches/avidemux_2.5_branch_gruntster: . avidemux
	avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters cmake
Message-ID: <200803151143.m2FBh6N2006741@sheep.berlios.de>

Author: gruntster
Date: 2008-03-15 12:42:55 +0100 (Sat, 15 Mar 2008)
New Revision: 3894

Modified:
   branches/avidemux_2.5_branch_gruntster/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/avi_vars.h
   branches/avidemux_2.5_branch_gruntster/cmake/config.h.cmake
Log:
[CMake] tidy up a few definitions

Modified: branches/avidemux_2.5_branch_gruntster/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/CMakeLists.txt	2008-03-14 13:35:51 UTC (rev 3893)
+++ branches/avidemux_2.5_branch_gruntster/CMakeLists.txt	2008-03-15 11:42:55 UTC (rev 3894)
@@ -76,8 +76,6 @@
 SET(ADM_UI_GTK 1)
 SET(ADM_UI_QT4 1)
 
-SET(USE_FFMPEG 1)
-SET(USE_MJPEG 1)
 SET(ADM_INSTALL_DIR "${CMAKE_INSTALL_PREFIX}")
 
 IF (CMAKE_BUILD_TYPE STREQUAL "Debug")

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp	2008-03-14 13:35:51 UTC (rev 3893)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp	2008-03-15 11:42:55 UTC (rev 3894)
@@ -6,8 +6,10 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
 #include <vector>
+
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_toolkit/filesel.h"
 #include "ADM_video/ADM_genvideo.hxx"
@@ -15,7 +17,7 @@
 #include "ADM_video/ADM_videoNull.h"
 #include "ADM_filter/video_filters.h"
 #include "ADM_video/ADM_vidPartial.h"
-
+#include "avi_vars.h"
 #include "ADM_filter/vidVCD.h"
 //___________________________________________
 typedef enum 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/avi_vars.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/avi_vars.h	2008-03-14 13:35:51 UTC (rev 3893)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/avi_vars.h	2008-03-15 11:42:55 UTC (rev 3894)
@@ -5,42 +5,23 @@
 #include "ADM_editor/ADM_edit.hxx"
 //----------------------
 
-
-#define HAVE_ENCODER
-
-
-//----------------------
-//----------------------
-//----------------------
-#if (defined( HAVE_LIBESD) && defined(HAVE_ESD_H)) || \
- defined(OSS_SUPPORT) || defined (USE_ARTS) || \
-  defined(USE_SDL) || defined(__APPLE__) || \
-  defined(__WIN32) || defined(ALSA_SUPPORT)
-  
-#define HAVE_AUDIO
-#endif
-//----------------------
-
-
-
 #ifdef __DECLARE__
 #define EXTERN 
 #else
 #define EXTERN extern
 #endif
 
-//
 #define DEBUG
 #define DEBUG_L2
 
 
-
 EXTERN ADM_Composer *video_body
 #ifdef __DECLARE__
 =NULL
 #endif
 ;
 
+
 EXTERN uint32_t  curframe;
 EXTERN uint32_t verbose;
 EXTERN uint32_t originalPriority;

Modified: branches/avidemux_2.5_branch_gruntster/cmake/config.h.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/config.h.cmake	2008-03-14 13:35:51 UTC (rev 3893)
+++ branches/avidemux_2.5_branch_gruntster/cmake/config.h.cmake	2008-03-15 11:42:55 UTC (rev 3894)
@@ -13,8 +13,6 @@
 #define PACKAGE   "avidemux"
 #define ADMLOCALE "${ADM_LOCALE}"
 
-#cmakedefine HAVE_AUDIO
-
 #if ${CONFIG_HEADER_TYPE} == ADM_BUILD_GTK || ${CONFIG_HEADER_TYPE} == ADM_BUILD_QT4
 /* use ALSA as possible audio device */
 #cmakedefine ALSA_SUPPORT
@@ -68,7 +66,7 @@
 #cmakedefine USE_FAAC
 
 /* FFmpeg */
-#cmakedefine USE_FFMPEG
+#define USE_FFMPEG
 
 /* FontConfig detected */
 #cmakedefine USE_FONTCONFIG
@@ -87,8 +85,7 @@
 /* Libxml2 is available */
 #cmakedefine USE_LIBXML2
 
-/* MJPEG */
-#cmakedefine USE_MJPEG
+#define USE_MJPEG
 
 /* libpng is available */
 #cmakedefine USE_PNG
@@ -128,6 +125,8 @@
 #define HAVE_AUDIO
 #endif
 
+#define HAVE_ENCODER
+
 // FIXME - start
 #ifdef HAVE_GETTEXT
 #  include <libintl.h>



From gruntster at mail.berlios.de  Sat Mar 15 16:52:59 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Sat, 15 Mar 2008 16:52:59 +0100
Subject: [Avidemux-svn-commit] r3895 - in
	branches/avidemux_2.5_branch_gruntster: avidemux
	avidemux/ADM_audio avidemux/ADM_colorspace
	avidemux/ADM_core/src avidemux/ADM_infoExtractor
	avidemux/ADM_inputs/ADM_flv avidemux/ADM_libraries
	avidemux/ADM_libraries/ADM_ffmpeg
	avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec
	avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat
	avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavutil
	avidemux/ADM_libraries/ADM_ffmpeg/ADM_libpostproc
	avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale
	avidemux/ADM_libraries/ADM_libMpeg2Dec
	avidemux/ADM_libraries/ADM_mplex
	avidemux/ADM_libraries/ADM_utilities avidemux/ADM_outputs
	avidemux/ADM_outputs/oplug_avi avidemux/ADM_outputs/oplug_dummy
	avidemux/ADM_outputs/oplug_flv avidemux/ADM_outputs/oplug_mp4
	avidemux/ADM_outputs/oplug_mpeg avidemux/ADM_outputs/oplug_mpegFF
	avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog
	avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2
	avidemux/ADM_userInterfaces/ADM_commonUI avidemux/ADM_video
	avidemux/ADM_videoFilter cmake
Message-ID: <200803151552.m2FFqx3P031691@sheep.berlios.de>

Author: gruntster
Date: 2008-03-15 16:52:19 +0100 (Sat, 15 Mar 2008)
New Revision: 3895

Added:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavutil/
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libpostproc/
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/config.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ffconf.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/ADM_lavformat.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/ADM_lavformat.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/ADM_muxts.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/ADM_tscrc.h
Removed:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/ffconf.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/ffconf.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/ADM_lavformat.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/ADM_lavformat.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/ADM_muxts.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/ADM_tscrc.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavcodec/
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavformat/
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavutil/
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libpostproc/
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libswscale/
   branches/avidemux_2.5_branch_gruntster/cmake/admLibFfmpeg.cmake
Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audio/ADM_dcainfo.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_colorspace/ADM_colorspace.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_colorspace/ADM_rgb.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_colorspace/rgb2yuv.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_cpuCap.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_memcpy.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_memsupport.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_infoExtractor/ADM_infoextractor.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_flv/ADM_flv.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_lavcodec.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/ADM_lavcodec.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/movenc.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavutil/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libpostproc/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/ADM_mp.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libMpeg2Dec/ADM_mpeg2dec.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mplexmuxer.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mthread.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_imageResizer.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_pack.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_preview.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_equalizer.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_mpdelogo.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_gtkRender.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyDialog.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidMPdelogo.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLResize.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMosaic.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVobSubRender.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt
Log:
[ffmpeg] make ffmpeg libs shared

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audio/ADM_dcainfo.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audio/ADM_dcainfo.cpp	2008-03-15 11:42:55 UTC (rev 3894)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audio/ADM_dcainfo.cpp	2008-03-15 15:52:19 UTC (rev 3895)
@@ -16,9 +16,9 @@
 #include "ADM_audio/ADM_dcainfo.h"
 extern "C"
 {
-#include "ADM_libraries/ADM_lavutil/common.h"
-#include "ADM_libraries/ADM_lavutil/bswap.h"
-#include "ADM_libraries/ADM_lavcodec/bitstream.h"
+#include "ADM_libraries/ADM_ffmpeg/ADM_lavutil/common.h"
+#include "ADM_libraries/ADM_ffmpeg/ADM_lavutil/bswap.h"
+#include "ADM_libraries/ADM_ffmpeg/ADM_lavcodec/bitstream.h"
 
 }
 #include "ADM_assert.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_colorspace/ADM_colorspace.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_colorspace/ADM_colorspace.cpp	2008-03-15 11:42:55 UTC (rev 3894)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_colorspace/ADM_colorspace.cpp	2008-03-15 15:52:19 UTC (rev 3895)
@@ -20,12 +20,12 @@
 
 #ifdef ADM_CPU_X86
 extern "C" {
-#include "ADM_libraries/ADM_lavcodec/avcodec.h"
+#include "ADM_libraries/ADM_ffmpeg/ADM_lavcodec/avcodec.h"
 }
 #endif
 
-#include "ADM_libraries/ADM_lavutil/avutil.h"
-#include "ADM_libraries/ADM_libswscale/swscale.h"
+#include "ADM_libraries/ADM_ffmpeg/ADM_lavutil/avutil.h"
+#include "ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale.h"
 #include "ADM_rgb.h" 
 #include "ADM_colorspace.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_colorspace/ADM_rgb.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_colorspace/ADM_rgb.cpp	2008-03-15 11:42:55 UTC (rev 3894)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_colorspace/ADM_rgb.cpp	2008-03-15 15:52:19 UTC (rev 3895)
@@ -25,12 +25,12 @@
 
 #ifdef ADM_CPU_X86
 extern "C" {
-#include "ADM_libraries/ADM_lavcodec/avcodec.h"
+#include "ADM_libraries/ADM_ffmpeg/ADM_lavcodec/avcodec.h"
 }
 #endif
 
-#include "ADM_libraries/ADM_lavutil/avutil.h"
-#include "ADM_libraries/ADM_libswscale/swscale.h"
+#include "ADM_libraries/ADM_ffmpeg/ADM_lavutil/avutil.h"
+#include "ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale.h"
 #include "ADM_rgb.h" 
 
 #define CLEANUP() \

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_colorspace/rgb2yuv.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_colorspace/rgb2yuv.cpp	2008-03-15 11:42:55 UTC (rev 3894)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_colorspace/rgb2yuv.cpp	2008-03-15 15:52:19 UTC (rev 3895)
@@ -26,11 +26,11 @@
 
 #ifdef ADM_CPU_X86
 extern "C" {
-#include "ADM_libraries/ADM_lavcodec/avcodec.h"
+#include "ADM_libraries/ADM_ffmpeg/ADM_lavcodec/avcodec.h"
 }
 #endif
 
-#include "ADM_libraries/ADM_libswscale/swscale.h"
+#include "ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale.h"
 #include "colorspace.h"
 
 /**

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_cpuCap.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_cpuCap.cpp	2008-03-15 11:42:55 UTC (rev 3894)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_cpuCap.cpp	2008-03-15 15:52:19 UTC (rev 3895)
@@ -37,7 +37,7 @@
 #ifdef ADM_CPU_X86
 extern "C" 
 {
-#include "ADM_libraries/ADM_lavcodec/dsputil_cpu.h"
+#include "ADM_libraries/ADM_ffmpeg/ADM_lavcodec/dsputil_cpu.h"
 }
 #endif
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_memcpy.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_memcpy.cpp	2008-03-15 11:42:55 UTC (rev 3894)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_memcpy.cpp	2008-03-15 15:52:19 UTC (rev 3895)
@@ -38,7 +38,7 @@
 
 extern "C"
 {
-	#include "ADM_libraries/ADM_lavcodec/dsputil_cpu.h"
+	#include "ADM_libraries/ADM_ffmpeg/ADM_lavcodec/dsputil_cpu.h"
 
 adm_fast_memcpy myAdmMemcpy=NULL;
 /* Original comments from mplayer (file: aclib.c)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_memsupport.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_memsupport.cpp	2008-03-15 11:42:55 UTC (rev 3894)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_memsupport.cpp	2008-03-15 15:52:19 UTC (rev 3895)
@@ -208,20 +208,20 @@
 
 		return ptr;
 	}
-}
 
-char *av_strdup(const char *s)
-{
-    char *ptr;
-    int len;
+	char *av_strdup(const char *s)
+	{
+		char *ptr;
+		int len;
 
-    len = strlen(s) + 1;
-    ptr = (char *)av_malloc(len);
+		len = strlen(s) + 1;
+		ptr = (char *)av_malloc(len);
 
-    if (ptr)
-        memcpy(ptr, s, len);
+		if (ptr)
+			memcpy(ptr, s, len);
 
-    return ptr;
+		return ptr;
+	}
 }
 
 /**

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_infoExtractor/ADM_infoextractor.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_infoExtractor/ADM_infoextractor.cpp	2008-03-15 11:42:55 UTC (rev 3894)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_infoExtractor/ADM_infoextractor.cpp	2008-03-15 15:52:19 UTC (rev 3895)
@@ -35,8 +35,8 @@
 #include "common.h"
 #include "bswap.h"
 #define INT_MAX (0x7FFFFFFF)
-#include "ADM_libraries/ADM_lavcodec/bitstream.h"
-#include "ADM_libraries/ADM_lavcodec/golomb.h"
+#include "ADM_libraries/ADM_ffmpeg/ADM_lavcodec/bitstream.h"
+#include "ADM_libraries/ADM_ffmpeg/ADM_lavcodec/golomb.h"
 }
 
 #include "ADM_infoExtractor/ADM_h264_tag.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_flv/ADM_flv.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_flv/ADM_flv.cpp	2008-03-15 11:42:55 UTC (rev 3894)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_flv/ADM_flv.cpp	2008-03-15 15:52:19 UTC (rev 3895)
@@ -30,7 +30,7 @@
 #include "ADM_flv.h"
 
 // Borrowed from lavformt/flv.h
-#include "ADM_libraries/ADM_lavformat/flv.h"
+#include "ADM_libraries/ADM_ffmpeg/ADM_lavformat/flv.h"
 // Borrowed from lavformt/flv.h    
 
 uint32_t ADM_UsecFromFps1000(uint32_t fps1000);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_lavcodec.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_lavcodec.h	2008-03-15 11:42:55 UTC (rev 3894)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_lavcodec.h	2008-03-15 15:52:19 UTC (rev 3895)
@@ -18,6 +18,6 @@
   #define  __ADM_LAVC
   extern "C"
   {  
-  #include "ADM_libraries/ADM_lavcodec/avcodec.h"
+  #include "ADM_libraries/ADM_ffmpeg/ADM_lavcodec/avcodec.h"
   };
 #endif

Copied: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec (from rev 3894, branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavcodec)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/ADM_lavcodec.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavcodec/ADM_lavcodec.cpp	2008-03-15 11:42:55 UTC (rev 3894)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/ADM_lavcodec.cpp	2008-03-15 15:52:19 UTC (rev 3895)
@@ -1,7 +1,7 @@
 #include "ADM_default.h"
 #ifdef ADM_CPU_X86
 #include "ADM_lavcodec.h"
-#include "ADM_libraries/ADM_lavcodec/dsputil_cpu.h"
+#include "ADM_libraries/ADM_ffmpeg/ADM_lavcodec/dsputil_cpu.h"
 #endif
 /**
  * 		\fn lavcodec_mm_support

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavcodec/CMakeLists.txt	2008-03-15 11:42:55 UTC (rev 3894)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/CMakeLists.txt	2008-03-15 15:52:19 UTC (rev 3895)
@@ -1,65 +1,51 @@
-SET(ADM_LIB ADM_lavcodec)
+SET(ADM_LIB ADM_libavcodec)
 
 SET(${ADM_LIB}_SRCS 
-	adpcm.c 	allcodecs.c 	cyuv.c 	dsputil.c 	dv.c 
-	error_resilience.c 		fft.c 	h263.c 	h263dec.c 	huffyuv.c 	imgconvert.c 
-	jfdctfst.c 	jfdctint.c 	jrevdct.c 	mace.c 	mdct.c 	 	mjpeg.c 
-	motion_est.c 	mpeg12.c 	mpegaudio.c 	mpegaudiodec.c 	mpegvideo.c 	msmpeg4.c 	 
-	pcm.c 	ratecontrol.c 	raw.c 	resample.c 	rv10.c 	simple_idct.c 	svq1.c 
-	utils.c 	wmadec.c 	indeo3.c 	vp3.c 	vp3dsp.c 	h264.c 	ffv1.c 	ra144.c 	ra288.c 
-	golomb.c 	4xm.c 	cabac.c 	asv1.c vcr1.c cljr.c 	faandct.c 	 	parser.c 
-	roqvideo.c 	xan.c 	rpza.c 	msrle.c 	msvideo1.c 	cinepak.c 	vqavideo.c 
-	idcinvideo.c 	smc.c 	flicvideo.c 	interplayvideo.c 	dpcm.c 	8bps.c vmdav.c 
-	truemotion1.c flac.c g726.c 	qtrle.c lcl.c 	snow.c  
-	rangecoder.c bitstream.c h264idct.c h261.c amr.c tscc.c 
-	resample2.c pthread.c qdm2.c bitstream_filter.c eval.c 
-	vc1.c vc1dsp.c vp56.c  vp6.c vp5.c indeo2.c smacker.c  opt.c
-	fraps.c dnxhddata.h  dnxhddec.c
-	mpeg12data.c  mpegaudiodata.c  msmpeg4data.c   vc1data.c   vp56data.c mjpegbdec.c
-	h263_parser.c
-	h264_parser.c
-	mpeg4video_parser.c
-	mpegvideo_enc.c
-	mpeg12enc.c mpegaudioenc.c
-	ac3enc.c ac3.c ac3tab.c
-	mjpegenc.c mjpegdec.c
-	wma.c
-	dvbsub_parser.c
-	dvbsubdec.c
-	dvbsub.c xiph.c
-	sp5xdec.c nellymoserdec.c
+	adpcm.c  allcodecs.c  cyuv.c  dsputil.c  dv.c  error_resilience.c  fft.c  h263.c
+	h263dec.c  huffyuv.c  imgconvert.c  jfdctfst.c  jfdctint.c  jrevdct.c  mace.c
+	mdct.c  mjpeg.c  motion_est.c  mpeg12.c  mpegaudio.c  mpegaudiodec.c  mpegvideo.c
+	msmpeg4.c  pcm.c  ratecontrol.c  raw.c  resample.c  rv10.c  simple_idct.c  svq1.c
+	utils.c  wmadec.c  indeo3.c  vp3.c  vp3dsp.c  h264.c  ffv1.c  ra144.c  ra288.c
+	golomb.c  4xm.c  cabac.c  asv1.c  vcr1.c  cljr.c  faandct.c  parser.c  roqvideo.c
+	xan.c  rpza.c  msrle.c  msvideo1.c  cinepak.c  vqavideo.c  idcinvideo.c  smc.c
+	flicvideo.c  interplayvideo.c  dpcm.c  8bps.c  vmdav.c  truemotion1.c  flac.c
+	g726.c  qtrle.c  lcl.c  snow.c  rangecoder.c  bitstream.c  h264idct.c  h261.c
+	amr.c  tscc.c  resample2.c  pthread.c  qdm2.c  bitstream_filter.c  eval.c  vc1.c
+	vc1dsp.c  vp56.c  vp6.c  vp5.c  indeo2.c  smacker.c  opt.c  fraps.c  dnxhddec.c
+	mpeg12data.c  mpegaudiodata.c  msmpeg4data.c  vc1data.c  vp56data.c  mjpegbdec.c
+	h263_parser.c  h264_parser.c  mpeg4video_parser.c  mpegvideo_enc.c  mpeg12enc.c
+	mpegaudioenc.c  ac3enc.c  ac3.c  ac3tab.c  mjpegenc.c  mjpegdec.c  wma.c  
+	dvbsub_parser.c  dvbsubdec.c  dvbsub.c  xiph.c  sp5xdec.c  nellymoserdec.c
 	ADM_lavcodec.cpp
 )
 
 IF(ADM_CPU_X86)
 	SET(${ADM_LIB}_SRCS  ${${ADM_LIB}_SRCS}
-		i386/cputest.c
-		i386/mpegvideo_mmx.c     i386/vp3dsp_mmx.c 
-		i386/dsputil_mmx.c   
-		i386/fdct_mmx.c   i386/motion_est_mmx.c  i386/simple_idct_mmx.c 
-		i386/fft_sse.c i386/vp3dsp_sse2.c  
-		i386/idct_mmx_xvid.c i386/fft_3dn2.c 
-		i386/snowdsp_mmx.c i386/fft_3dn.c)
+		i386/cputest.c  i386/mpegvideo_mmx.c  i386/vp3dsp_mmx.c  i386/dsputil_mmx.c
+		i386/fdct_mmx.c  i386/motion_est_mmx.c  i386/simple_idct_mmx.c  i386/fft_sse.c
+		i386/vp3dsp_sse2.c  i386/idct_mmx_xvid.c  i386/fft_3dn2.c  i386/snowdsp_mmx.c
+		i386/fft_3dn.c)
 ENDIF(ADM_CPU_X86)
 
 IF (ADM_CPU_ALTIVEC)
 	SET(${ADM_LIB}_SRCS  ${${ADM_LIB}_SRCS}
-		ppc/dsputil_altivec.c  ppc/dsputil_ppc.c  ppc/fdct_altivec.c  ppc/fft_altivec.c  ppc/float_altivec.c  ppc/gmc_altivec.c
-		ppc/h264_altivec.c  ppc/idct_altivec.c  ppc/int_altivec.c  ppc/mpegvideo_altivec.c  ppc/mpegvideo_ppc.c
+		ppc/dsputil_altivec.c  ppc/dsputil_ppc.c  ppc/fdct_altivec.c  ppc/fft_altivec.c
+		ppc/float_altivec.c  ppc/gmc_altivec.c  ppc/h264_altivec.c  ppc/idct_altivec.c
+		ppc/int_altivec.c  ppc/mpegvideo_altivec.c  ppc/mpegvideo_ppc.c
 		ppc/snow_altivec.c  ppc/vc1dsp_altivec.c)
 ENDIF (ADM_CPU_ALTIVEC)
 
-ADD_ADM_LIB_ALL_TARGETS(${ADM_LIB} ${${ADM_LIB}_SRCS})
-ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "-I../ADM_lavutil -DHAVE_AV_CONFIG_H -Drestrict=__restrict__ -fomit-frame-pointer -include ffconf.h")
+ADD_LIBRARY(${ADM_LIB} SHARED ${${ADM_LIB}_SRCS})
+ADD_TARGET_CFLAGS(${ADM_LIB} "-I../ADM_lavutil -DHAVE_AV_CONFIG_H -Drestrict=__restrict__ -fomit-frame-pointer")
 
 IF (ADM_DEBUG)
-	ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "-O2")
+	ADD_TARGET_CFLAGS(${ADM_LIB} "-O2")
 ENDIF (ADM_DEBUG)
 
 IF (USE_AMR_NB)
 	ADD_SOURCE_CFLAGS(amr.c -I${AMRNB_INCLUDE_DIR})
 ENDIF (USE_AMR_NB)
 
-INCLUDE(admLibFfmpeg)
-GET_FFMPEG_CFLAGS(FFMPEG_CFLAGS)
-ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "${FFMPEG_CFLAGS}")
+TARGET_LINK_LIBRARIES(${ADM_LIB} ADM_core ADM_libavutil ${ZLIB_LIBRARY})
+
+INSTALL(TARGETS ${ADM_LIB} RUNTIME DESTINATION ${BIN_DIR} LIBRARY DESTINATION lib)
\ No newline at end of file

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/ffconf.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavcodec/ffconf.c	2008-03-15 11:42:55 UTC (rev 3894)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/ffconf.c	2008-03-15 15:52:19 UTC (rev 3895)
@@ -1,396 +0,0 @@
-/*
- * Glue to lavcodec configure
- * MEANX
- * */
-#include <stdlib.h>
-#include <stdio.h>
-int main(void)
-{
-#define DECLARE_DECODER(a,b); printf("#define ENABLE_"#a"_DECODER 1\n"); 
-  
-    DECLARE_DECODER(NELLYMOSER,nellymoser);
-    DECLARE_DECODER(ADPCM_IMA_AMV, amv);
-    DECLARE_DECODER(CINEPAK, cinepak);
-    DECLARE_DECODER(DNXHD, dnxhd);
-    DECLARE_DECODER(FOURXM, fourxm);
-    DECLARE_DECODER(FRAPS, fraps);
-	DECLARE_DECODER(H263, h263);
-    DECLARE_DECODER(H264, h264);
-    DECLARE_DECODER(INDEO2, indeo2);
-    DECLARE_DECODER(INDEO3, indeo3);
-    DECLARE_DECODER(INTERPLAY_VIDEO, interplay_video);
-    DECLARE_DECODER(MPEGVIDEO, mpegvideo);
-    DECLARE_DECODER(MSVIDEO1, msvideo1);
-    DECLARE_DECODER(VC1, vc1);
-    DECLARE_DECODER(VCR1, vcr1);
-    DECLARE_DECODER(VP5, vp5);
-    DECLARE_DECODER(VP6, vp6);
-    DECLARE_DECODER(VP6F, vp6f);
-    DECLARE_DECODER(WMV3, wmv3);
-    DECLARE_DECODER (WMV1, wmv1);
-    DECLARE_DECODER (WMV2, wmv2);
-    DECLARE_DECODER(VP3, vp3);
-    DECLARE_DECODER (MPEG4, mpeg4);
-    DECLARE_DECODER (MSMPEG4V1, msmpeg4v1);
-    DECLARE_DECODER (MSMPEG4V2, msmpeg4v2);
-    DECLARE_DECODER (MSMPEG4V3, msmpeg4v3);
-    DECLARE_DECODER(MJPEGB, mjpegb);
-    DECLARE_DECODER (MJPEG, mjpeg);
-    DECLARE_DECODER(WMAV2, wmav2);
-    DECLARE_DECODER (DVVIDEO, dvvideo);
-    DECLARE_DECODER (HUFFYUV, huffyuv);
-    DECLARE_DECODER (FFVHUFF, ffvhuff);
-    DECLARE_DECODER(SVQ3, svq3);
-    DECLARE_DECODER(TSCC, tscc);
-    DECLARE_DECODER(QDM2, qdm2);
-    DECLARE_DECODER (FFV1, ffv1);
-    DECLARE_DECODER (MPEG1VIDEO, mpeg1video);
-    DECLARE_DECODER (MPEG2VIDEO, mpeg2video);
-    DECLARE_DECODER (RV10, rv10);
-    DECLARE_DECODER (RV20, rv20);
-    DECLARE_DECODER (DVBSUB, dvbsub);
-    DECLARE_DECODER (FLV, flv);
-    DECLARE_DECODER (SNOW, snow);
-    DECLARE_DECODER (AMV, amv);
-#undef DECLARE_DECODER
-#define DECLARE_DECODER(a,b); printf("#define ENABLE_"#a"_DECODER 0\n"); 
-
-    DECLARE_DECODER(AASC, aasc);
-    DECLARE_DECODER(AVS, avs);
-    DECLARE_DECODER(BETHSOFTVID, bethsoftvid);
-    DECLARE_DECODER(C93, c93);
-    DECLARE_DECODER(CAVS, cavs);
-    DECLARE_DECODER(CLJR, cljr);
-    DECLARE_DECODER(CSCD, cscd);
-    DECLARE_DECODER(CYUV, cyuv);
-    DECLARE_DECODER(DSICINVIDEO, dsicinvideo);
-    DECLARE_DECODER(DXA, dxa);
-    DECLARE_DECODER(EIGHTBPS, eightbps);
-    DECLARE_DECODER(FLIC, flic);
-    DECLARE_DECODER(IDCIN, idcin);
-    DECLARE_DECODER(KMVC, kmvc);
-    DECLARE_DECODER(LOCO, loco);
-    DECLARE_DECODER(MDEC, mdec);
-    DECLARE_DECODER(MMVIDEO, mmvideo);
-    DECLARE_DECODER(MPEG_XVMC, mpeg_xvmc);
-    DECLARE_DECODER(MSRLE, msrle);
-    DECLARE_DECODER(MSZH, mszh);
-    DECLARE_DECODER(NUV, nuv);
-    DECLARE_DECODER(PTX, ptx);
-    DECLARE_DECODER(QDRAW, qdraw);
-    DECLARE_DECODER(QPEG, qpeg);
-    DECLARE_DECODER(RPZA, rpza);
-    DECLARE_DECODER(SMACKER, smacker);
-    DECLARE_DECODER(SMC, smc);
-    DECLARE_DECODER(SP5X, sp5x);
-    DECLARE_DECODER(THEORA, theora);
-    DECLARE_DECODER(THP, thp);
-    DECLARE_DECODER(TIERTEXSEQVIDEO, tiertexseqvideo);
-    DECLARE_DECODER(TRUEMOTION1, truemotion1);
-    DECLARE_DECODER(TRUEMOTION2, truemotion2);
-    DECLARE_DECODER(TXD, txd);
-    DECLARE_DECODER(ULTI, ulti);
-    DECLARE_DECODER(VMDVIDEO, vmdvideo);
-    DECLARE_DECODER(VMNC, vmnc);
-    DECLARE_DECODER(VQA, vqa);
-    DECLARE_DECODER(WNV1, wnv1);
-    DECLARE_DECODER(XAN_WC3, xan_wc3);
-    DECLARE_DECODER(XL, xl);
-    DECLARE_DECODER(MPEG4AAC, mpeg4aac);
-    DECLARE_DECODER(ALAC, alac);
-    DECLARE_DECODER(ATRAC3, atrac3);
-    DECLARE_DECODER(COOK, cook);
-    DECLARE_DECODER(DCA, dca);
-    DECLARE_DECODER(DSICINAUDIO, dsicinaudio);
-    DECLARE_DECODER(IMC, imc);
-    DECLARE_DECODER(LIBA52, liba52);
-    DECLARE_DECODER(LIBFAAD, libfaad);
-    DECLARE_DECODER(MACE3, mace3);
-    DECLARE_DECODER(MACE6, mace6);
-    DECLARE_DECODER(MP3, mp3);
-    DECLARE_DECODER(MP3ADU, mp3adu);
-    DECLARE_DECODER(MP3ON4, mp3on4);
-    DECLARE_DECODER(MPC7, mpc7);
-    DECLARE_DECODER(RA_144, ra_144);
-    DECLARE_DECODER(RA_288, ra_288);
-    DECLARE_DECODER(SHORTEN, shorten);
-    DECLARE_DECODER(SMACKAUD, smackaud);
-    DECLARE_DECODER(TRUESPEECH, truespeech);
-    DECLARE_DECODER(TTA, tta);
-    DECLARE_DECODER(VMDAUDIO, vmdaudio);
-    DECLARE_DECODER(WAVPACK, wavpack);
-    DECLARE_DECODER(WS_SND1, ws_snd1);
-    DECLARE_DECODER(INTERPLAY_DPCM, interplay_dpcm);
-    DECLARE_DECODER(SOL_DPCM, sol_dpcm);
-    DECLARE_DECODER(XAN_DPCM, xan_dpcm);
-    DECLARE_DECODER(ADPCM_THP, adpcm_thp);
-    /* DUPE */
-    DECLARE_DECODER (ASV1, asv1);
-    DECLARE_DECODER (ASV2, asv2);
-    DECLARE_DECODER (BMP, bmp);
-    DECLARE_DECODER (FLASHSV, flashsv);
-    DECLARE_DECODER (GIF, gif);
-    DECLARE_DECODER (H261, h261);
-	DECLARE_DECODER (H263I, h263i);
-    DECLARE_DECODER (JPEGLS, jpegls);
-    DECLARE_DECODER (PNG, png);
-    DECLARE_DECODER (QTRLE, qtrle);
-    DECLARE_DECODER (RAWVIDEO, rawvideo);
-    DECLARE_DECODER (ROQ, roq);
-    DECLARE_DECODER (SGI, sgi);
-    DECLARE_DECODER (SVQ1, svq1);
-    DECLARE_DECODER (TARGA, targa);
-    DECLARE_DECODER (TIFF, tiff);
-    DECLARE_DECODER (ZLIB, zlib);
-    DECLARE_DECODER (ZMBV, zmbv);
-    DECLARE_DECODER (FLAC, flac);
-    DECLARE_DECODER (LIBAMR_NB, libamr_nb);
-    DECLARE_DECODER (LIBAMR_WB, libamr_wb);
-    DECLARE_DECODER (LIBGSM, libgsm);
-    DECLARE_DECODER (LIBGSM_MS, libgsm_ms);
-    DECLARE_DECODER (MP2, mp2);
-    DECLARE_DECODER (SONIC, sonic);
-    DECLARE_DECODER (VORBIS, vorbis);
-    DECLARE_DECODER(WMAV1, wmav1);
-    DECLARE_DECODER (PCM_ALAW, pcm_alaw);
-    DECLARE_DECODER (PCM_MULAW, pcm_mulaw);
-    DECLARE_DECODER (PCM_S8, pcm_s8);
-    DECLARE_DECODER (PCM_S16BE, pcm_s16be);
-    DECLARE_DECODER (PCM_S16LE, pcm_s16le);
-    DECLARE_DECODER (PCM_S24BE, pcm_s24be);
-    DECLARE_DECODER (PCM_S24DAUD, pcm_s24daud);
-    DECLARE_DECODER (PCM_S24LE, pcm_s24le);
-    DECLARE_DECODER (PCM_S32BE, pcm_s32be);
-    DECLARE_DECODER (PCM_S32LE, pcm_s32le);
-    DECLARE_DECODER (PCM_U8, pcm_u8);
-    DECLARE_DECODER (PCM_U16BE, pcm_u16be);
-    DECLARE_DECODER (PCM_U16LE, pcm_u16le);
-    DECLARE_DECODER (PCM_U24BE, pcm_u24be);
-    DECLARE_DECODER (PCM_U24LE, pcm_u24le);
-    DECLARE_DECODER (PCM_U32BE, pcm_u32be);
-    DECLARE_DECODER (PCM_U32LE, pcm_u32le);
-    DECLARE_DECODER (ROQ_DPCM, roq_dpcm);
-    DECLARE_DECODER (ADPCM_4XM, adpcm_4xm);
-    DECLARE_DECODER (ADPCM_ADX, adpcm_adx);
-    DECLARE_DECODER (ADPCM_CT, adpcm_ct);
-    DECLARE_DECODER (ADPCM_EA, adpcm_ea);
-    DECLARE_DECODER (ADPCM_G726, adpcm_g726);
-    DECLARE_DECODER (ADPCM_IMA_DK3, adpcm_ima_dk3);
-    DECLARE_DECODER (ADPCM_IMA_DK4, adpcm_ima_dk4);
-    DECLARE_DECODER (ADPCM_IMA_QT, adpcm_ima_qt);
-    DECLARE_DECODER (ADPCM_IMA_SMJPEG, adpcm_ima_smjpeg);
-    DECLARE_DECODER (ADPCM_IMA_WAV, adpcm_ima_wav);
-    DECLARE_DECODER (ADPCM_IMA_WS, adpcm_ima_ws);
-    DECLARE_DECODER (ADPCM_MS, adpcm_ms);
-    DECLARE_DECODER (ADPCM_SBPRO_2, adpcm_sbpro_2);
-    DECLARE_DECODER (ADPCM_SBPRO_3, adpcm_sbpro_3);
-    DECLARE_DECODER (ADPCM_SBPRO_4, adpcm_sbpro_4);
-    DECLARE_DECODER (ADPCM_SWF, adpcm_swf);
-    DECLARE_DECODER (ADPCM_XA, adpcm_xa);
-    DECLARE_DECODER (ADPCM_YAMAHA, adpcm_yamaha);
-    DECLARE_DECODER (DVDSUB, dvdsub);
-	DECLARE_DECODER (LIBVORBIS, libvorbis);
-
-#define DECLARE_PARSER(a,b); printf("#define ENABLE_"#a"_PARSER 1\n"); 
-    DECLARE_PARSER (H263, h263);
-    DECLARE_PARSER (H264, h264);
-    DECLARE_PARSER (MPEG4VIDEO, mpeg4video);
-
-#undef DECLARE_PARSER
-#define DECLARE_PARSER(a,b); printf("#define ENABLE_"#a"_PARSER 0\n"); 
-    DECLARE_PARSER (AAC, aac);
-    DECLARE_PARSER (AC3, ac3);
-    DECLARE_PARSER (CAVSVIDEO, cavsvideo);
-    DECLARE_PARSER (DCA, dca);
-    DECLARE_PARSER (DVBSUB, dvbsub);
-    DECLARE_PARSER (DVDSUB, dvdsub);
-    DECLARE_PARSER (H261, h261);
-    DECLARE_PARSER (MJPEG, mjpeg);
-    DECLARE_PARSER (MPEGAUDIO, mpegaudio);
-    DECLARE_PARSER (MPEGVIDEO, mpegvideo);
-    DECLARE_PARSER (PNM, pnm);
-    DECLARE_PARSER (VC1, vc1);
-
-#define DECLARE_ENCODER(a,b); printf("#define ENABLE_"#a"_ENCODER 1\n"); 
-    DECLARE_ENCODER (MJPEG, mjpeg);
-    DECLARE_ENCODER (MSMPEG4V3, msmpeg4v3);
-    DECLARE_ENCODER(H263P, h263p);
-    DECLARE_ENCODER(AC3, ac3);
-    DECLARE_ENCODER (FFV1, ffv1);
-    DECLARE_ENCODER (FLV1, flv1);
-    DECLARE_ENCODER (FFVHUFF, ffvhuff);
-    DECLARE_ENCODER (H263, h263);
-    DECLARE_ENCODER (MPEG1VIDEO, mpeg1video);
-    DECLARE_ENCODER (MPEG2VIDEO, mpeg2video);
-    DECLARE_ENCODER (MPEG4, mpeg4);
-    DECLARE_ENCODER (FLV, flv);
-    DECLARE_ENCODER (MP2, mp2);
-    DECLARE_ENCODER (DVVIDEO, dvvideo);
-    DECLARE_ENCODER (HUFFYUV, huffyuv);
-    DECLARE_ENCODER (DVBSUB, dvbsub);
-    DECLARE_ENCODER (SNOW, snow);
-
-#undef DECLARE_ENCODER
-#define DECLARE_ENCODER(a,b); printf("#define ENABLE_"#a"_ENCODER 0\n"); 
-    DECLARE_ENCODER(ADPCM_IMA_AMV, amv);
-    DECLARE_ENCODER(LIBX264, libx264);
-    DECLARE_ENCODER(LIBXVID, libxvid);
-    DECLARE_ENCODER(LJPEG, ljpeg);
-    DECLARE_ENCODER(PAM, pam);
-    DECLARE_ENCODER(PBM, pbm);
-    DECLARE_ENCODER(PGM, pgm);
-    DECLARE_ENCODER(PGMYUV, pgmyuv);
-    DECLARE_ENCODER(PPM, ppm);
-    DECLARE_ENCODER(LIBFAAC, libfaac);
-    DECLARE_ENCODER(LIBMP3LAME, libmp3lame);
-    DECLARE_ENCODER(LIBTHEORA, libtheora);
-    DECLARE_ENCODER(SONIC_LS, sonic_ls);
-/* Dupe */
-	DECLARE_ENCODER (ASV1, asv1);
-    DECLARE_ENCODER (ASV2, asv2);
-    DECLARE_ENCODER (BMP, bmp);
-    DECLARE_ENCODER (FLASHSV, flashsv);
-    DECLARE_ENCODER (GIF, gif);
-    DECLARE_ENCODER (H261, h261);
-    DECLARE_ENCODER (JPEGLS, jpegls);
-    DECLARE_ENCODER (MSMPEG4V1, msmpeg4v1);
-    DECLARE_ENCODER (MSMPEG4V2, msmpeg4v2);
-    DECLARE_ENCODER (PNG, png);
-    DECLARE_ENCODER (QTRLE, qtrle);
-    DECLARE_ENCODER (RAWVIDEO, rawvideo);
-    DECLARE_ENCODER (ROQ, roq);
-    DECLARE_ENCODER (RV10, rv10);
-    DECLARE_ENCODER (RV20, rv20);
-    DECLARE_ENCODER (SGI, sgi);
-    DECLARE_ENCODER (SVQ1, svq1);
-    DECLARE_ENCODER (TARGA, targa);
-    DECLARE_ENCODER (TIFF, tiff);
-    DECLARE_ENCODER (WMV1, wmv1);
-    DECLARE_ENCODER (WMV2, wmv2);
-    DECLARE_ENCODER (ZLIB, zlib);
-    DECLARE_ENCODER (ZMBV, zmbv);
-    DECLARE_ENCODER (FLAC, flac);
-    DECLARE_ENCODER (LIBAMR_NB, libamr_nb);
-    DECLARE_ENCODER (LIBAMR_WB, libamr_wb);
-    DECLARE_ENCODER (LIBGSM, libgsm);
-    DECLARE_ENCODER (LIBGSM_MS, libgsm_ms);
-    DECLARE_ENCODER (SONIC, sonic);
-    DECLARE_ENCODER (VORBIS, vorbis);
-    DECLARE_ENCODER(WMAV1, wmav1);
-    DECLARE_ENCODER(WMAV2, wmav2);
-    DECLARE_ENCODER (PCM_ALAW, pcm_alaw);
-    DECLARE_ENCODER (PCM_MULAW, pcm_mulaw);
-    DECLARE_ENCODER (PCM_S8, pcm_s8);
-    DECLARE_ENCODER (PCM_S16BE, pcm_s16be);
-    DECLARE_ENCODER (PCM_S16LE, pcm_s16le);
-    DECLARE_ENCODER (PCM_S24BE, pcm_s24be);
-    DECLARE_ENCODER (PCM_S24DAUD, pcm_s24daud);
-    DECLARE_ENCODER (PCM_S24LE, pcm_s24le);
-    DECLARE_ENCODER (PCM_S32BE, pcm_s32be);
-    DECLARE_ENCODER (PCM_S32LE, pcm_s32le);
-    DECLARE_ENCODER (PCM_U8, pcm_u8);
-    DECLARE_ENCODER (PCM_U16BE, pcm_u16be);
-    DECLARE_ENCODER (PCM_U16LE, pcm_u16le);
-    DECLARE_ENCODER (PCM_U24BE, pcm_u24be);
-    DECLARE_ENCODER (PCM_U24LE, pcm_u24le);
-    DECLARE_ENCODER (PCM_U32BE, pcm_u32be);
-    DECLARE_ENCODER (PCM_U32LE, pcm_u32le);
-    DECLARE_ENCODER (ROQ_DPCM, roq_dpcm);
-    DECLARE_ENCODER (ADPCM_4XM, adpcm_4xm);
-    DECLARE_ENCODER (ADPCM_ADX, adpcm_adx);
-    DECLARE_ENCODER (ADPCM_CT, adpcm_ct);
-    DECLARE_ENCODER (ADPCM_EA, adpcm_ea);
-    DECLARE_ENCODER (ADPCM_G726, adpcm_g726);
-    DECLARE_ENCODER (ADPCM_IMA_DK3, adpcm_ima_dk3);
-    DECLARE_ENCODER (ADPCM_IMA_DK4, adpcm_ima_dk4);
-    DECLARE_ENCODER (ADPCM_IMA_QT, adpcm_ima_qt);
-    DECLARE_ENCODER (ADPCM_IMA_SMJPEG, adpcm_ima_smjpeg);
-    DECLARE_ENCODER (ADPCM_IMA_WAV, adpcm_ima_wav);
-    DECLARE_ENCODER (ADPCM_IMA_WS, adpcm_ima_ws);
-    DECLARE_ENCODER (ADPCM_MS, adpcm_ms);
-    DECLARE_ENCODER (ADPCM_SBPRO_2, adpcm_sbpro_2);
-    DECLARE_ENCODER (ADPCM_SBPRO_3, adpcm_sbpro_3);
-    DECLARE_ENCODER (ADPCM_SBPRO_4, adpcm_sbpro_4);
-    DECLARE_ENCODER (ADPCM_SWF, adpcm_swf);
-    DECLARE_ENCODER (ADPCM_XA, adpcm_xa);
-    DECLARE_ENCODER (ADPCM_YAMAHA, adpcm_yamaha);
-    DECLARE_ENCODER (DVDSUB, dvdsub);
-	DECLARE_ENCODER (LIBVORBIS, libvorbis);
-
-#define DECLARE_BSF(a,b); printf("#define ENABLE_"#a"_BSF 0\n");
-
-	DECLARE_BSF(MP3_HEADER_COMPRESS, mp3_header_compress);
-	DECLARE_BSF(IMX_DUMP_HEADER, imx_dump_header);
-	DECLARE_BSF(DUMP_EXTRADATA, dump_extradata);
-	DECLARE_BSF(REMOVE_EXTRADATA, remove_extradata);
-	DECLARE_BSF(NOISE, noise);
-	DECLARE_BSF(MP3_HEADER_DECOMPRESS, mp3_header_decompress);
-	DECLARE_BSF(MJPEGA_DUMP_HEADER, mjpega_dump_header);
-	DECLARE_BSF(IMX_DUMP_HEADER, imx_dump_header);
-
-#define DECLARE_MUXER(a,b); printf("#define CONFIG_"#a"_MUXER 1\n");
-
-	printf("#define CONFIG_MUXERS 1\n");
-	DECLARE_MUXER(MOV, mov)
-	DECLARE_MUXER(MP4, mp4)
-	DECLARE_MUXER(PSP, psp)
-	DECLARE_MUXER(TG2, tg2)
-	DECLARE_MUXER(TGP, tgp)
-
-	printf("#define CONFIG_ENCODERS 1\n");
-	printf("#define CONFIG_DVVIDEO_ENCODER 1\n");
-	printf("#define CONFIG_SNOW_ENCODER 1\n");
-
-#define DECLARE_CONFIG_DECODER(a,b); printf("#define CONFIG_"#a"_DECODER 1\n");
-
-	printf("#define CONFIG_DECODERS 1\n");
-	DECLARE_CONFIG_DECODER(DVVIDEO, dvvideo);
-	DECLARE_CONFIG_DECODER(H263, h263);
-	DECLARE_CONFIG_DECODER(MPEG4, mpeg4);
-	DECLARE_CONFIG_DECODER(SNOW, snow);
-	DECLARE_CONFIG_DECODER(VC1, vc1);
-	DECLARE_CONFIG_DECODER(WMV2, wmv2);
-	DECLARE_CONFIG_DECODER(WMV3, wmv3);
-
-	printf("#define CONFIG_MPEGAUDIO_HP 1\n");
-	printf("#define CONFIG_ZLIB 1\n");
-
-#define ENABLE(a,b); printf("#define ENABLE_"#a" 0\n");
-
-	ENABLE(ARMV4L, armv4l);
-	ENABLE(MLIB, mlib);
-	ENABLE(SPARC, sparc);
-	ENABLE(ALPHA, alpha);
-	ENABLE(MMI, mmi);
-	ENABLE(SH4, sh4);
-	ENABLE(BFIN, bfin);
-	ENABLE(SMALL, small);
-
-	// Hack so CMake and autoconf don't need to be changed
-	printf("#ifdef ARCH_POWERPC\n");
-	printf("#define ENABLE_POWERPC 1\n");
-	printf("#else\n");
-	printf("#define ENABLE_POWERPC 0\n");
-	printf("#endif\n");
-
-	printf("#ifdef ARCH_X86\n");
-	printf("#define ENABLE_MMX 1\n");
-	printf("#define HAVE_MMX 1\n");
-	printf("#define HAVE_FAST_UNALIGNED 1\n");
-	printf("#else\n");
-	printf("#define ENABLE_MMX 0\n");
-	printf("#endif\n");
-
-	printf("#ifdef ARCH_X86_64\n");
-	printf("#define HAVE_FAST_64BIT 1\n");
-	printf("#endif\n");
-
-	printf("#ifdef __APPLE__\n");
-	printf("#define CONFIG_DARWIN 1\n");
-	printf("#endif\n");
-
-	printf("#define ENABLE_THREADS 1\n");
-	printf("#define HAVE_LRINTF 1\n");
-	printf("#define HAVE_THREADS 1\n");
-	printf("#define RUNTIME_CPUDETECT 1\n");
-}

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/ffconf.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavcodec/ffconf.h	2008-03-15 11:42:55 UTC (rev 3894)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/ffconf.h	2008-03-15 15:52:19 UTC (rev 3895)
@@ -1,350 +0,0 @@
-#define ENABLE_NELLYMOSER_DECODER 1
-#define ENABLE_ADPCM_IMA_AMV_DECODER 1
-#define ENABLE_CINEPAK_DECODER 1
-#define ENABLE_DNXHD_DECODER 1
-#define ENABLE_FOURXM_DECODER 1
-#define ENABLE_FRAPS_DECODER 1
-#define ENABLE_H263_DECODER 1
-#define ENABLE_H264_DECODER 1
-#define ENABLE_INDEO2_DECODER 1
-#define ENABLE_INDEO3_DECODER 1
-#define ENABLE_INTERPLAY_VIDEO_DECODER 1
-#define ENABLE_MPEGVIDEO_DECODER 1
-#define ENABLE_MSVIDEO1_DECODER 1
-#define ENABLE_VC1_DECODER 1
-#define ENABLE_VCR1_DECODER 1
-#define ENABLE_VP5_DECODER 1
-#define ENABLE_VP6_DECODER 1
-#define ENABLE_VP6F_DECODER 1
-#define ENABLE_WMV3_DECODER 1
-#define ENABLE_WMV1_DECODER 1
-#define ENABLE_WMV2_DECODER 1
-#define ENABLE_VP3_DECODER 1
-#define ENABLE_MPEG4_DECODER 1
-#define ENABLE_MSMPEG4V1_DECODER 1
-#define ENABLE_MSMPEG4V2_DECODER 1
-#define ENABLE_MSMPEG4V3_DECODER 1
-#define ENABLE_MJPEGB_DECODER 1
-#define ENABLE_MJPEG_DECODER 1
-#define ENABLE_WMAV2_DECODER 1
-#define ENABLE_DVVIDEO_DECODER 1
-#define ENABLE_HUFFYUV_DECODER 1
-#define ENABLE_FFVHUFF_DECODER 1
-#define ENABLE_SVQ3_DECODER 1
-#define ENABLE_TSCC_DECODER 1
-#define ENABLE_QDM2_DECODER 1
-#define ENABLE_FFV1_DECODER 1
-#define ENABLE_MPEG1VIDEO_DECODER 1
-#define ENABLE_MPEG2VIDEO_DECODER 1
-#define ENABLE_RV10_DECODER 1
-#define ENABLE_RV20_DECODER 1
-#define ENABLE_DVBSUB_DECODER 1
-#define ENABLE_FLV_DECODER 1
-#define ENABLE_SNOW_DECODER 1
-#define ENABLE_AMV_DECODER 1
-#define ENABLE_AASC_DECODER 0
-#define ENABLE_AVS_DECODER 0
-#define ENABLE_BETHSOFTVID_DECODER 0
-#define ENABLE_C93_DECODER 0
-#define ENABLE_CAVS_DECODER 0
-#define ENABLE_CLJR_DECODER 0
-#define ENABLE_CSCD_DECODER 0
-#define ENABLE_CYUV_DECODER 0
-#define ENABLE_DSICINVIDEO_DECODER 0
-#define ENABLE_DXA_DECODER 0
-#define ENABLE_EIGHTBPS_DECODER 0
-#define ENABLE_FLIC_DECODER 0
-#define ENABLE_IDCIN_DECODER 0
-#define ENABLE_KMVC_DECODER 0
-#define ENABLE_LOCO_DECODER 0
-#define ENABLE_MDEC_DECODER 0
-#define ENABLE_MMVIDEO_DECODER 0
-#define ENABLE_MPEG_XVMC_DECODER 0
-#define ENABLE_MSRLE_DECODER 0
-#define ENABLE_MSZH_DECODER 0
-#define ENABLE_NUV_DECODER 0
-#define ENABLE_PTX_DECODER 0
-#define ENABLE_QDRAW_DECODER 0
-#define ENABLE_QPEG_DECODER 0
-#define ENABLE_RPZA_DECODER 0
-#define ENABLE_SMACKER_DECODER 0
-#define ENABLE_SMC_DECODER 0
-#define ENABLE_SP5X_DECODER 0
-#define ENABLE_THEORA_DECODER 0
-#define ENABLE_THP_DECODER 0
-#define ENABLE_TIERTEXSEQVIDEO_DECODER 0
-#define ENABLE_TRUEMOTION1_DECODER 0
-#define ENABLE_TRUEMOTION2_DECODER 0
-#define ENABLE_TXD_DECODER 0
-#define ENABLE_ULTI_DECODER 0
-#define ENABLE_VMDVIDEO_DECODER 0
-#define ENABLE_VMNC_DECODER 0
-#define ENABLE_VQA_DECODER 0
-#define ENABLE_WNV1_DECODER 0
-#define ENABLE_XAN_WC3_DECODER 0
-#define ENABLE_XL_DECODER 0
-#define ENABLE_MPEG4AAC_DECODER 0
-#define ENABLE_ALAC_DECODER 0
-#define ENABLE_ATRAC3_DECODER 0
-#define ENABLE_COOK_DECODER 0
-#define ENABLE_DCA_DECODER 0
-#define ENABLE_DSICINAUDIO_DECODER 0
-#define ENABLE_IMC_DECODER 0
-#define ENABLE_LIBA52_DECODER 0
-#define ENABLE_LIBFAAD_DECODER 0
-#define ENABLE_MACE3_DECODER 0
-#define ENABLE_MACE6_DECODER 0
-#define ENABLE_MP3_DECODER 0
-#define ENABLE_MP3ADU_DECODER 0
-#define ENABLE_MP3ON4_DECODER 0
-#define ENABLE_MPC7_DECODER 0
-#define ENABLE_RA_144_DECODER 0
-#define ENABLE_RA_288_DECODER 0
-#define ENABLE_SHORTEN_DECODER 0
-#define ENABLE_SMACKAUD_DECODER 0
-#define ENABLE_TRUESPEECH_DECODER 0
-#define ENABLE_TTA_DECODER 0
-#define ENABLE_VMDAUDIO_DECODER 0
-#define ENABLE_WAVPACK_DECODER 0
-#define ENABLE_WS_SND1_DECODER 0
-#define ENABLE_INTERPLAY_DPCM_DECODER 0
-#define ENABLE_SOL_DPCM_DECODER 0
-#define ENABLE_XAN_DPCM_DECODER 0
-#define ENABLE_ADPCM_THP_DECODER 0
-#define ENABLE_ASV1_DECODER 0
-#define ENABLE_ASV2_DECODER 0
-#define ENABLE_BMP_DECODER 0
-#define ENABLE_FLASHSV_DECODER 0
-#define ENABLE_GIF_DECODER 0
-#define ENABLE_H261_DECODER 0
-#define ENABLE_H263I_DECODER 0
-#define ENABLE_JPEGLS_DECODER 0
-#define ENABLE_PNG_DECODER 0
-#define ENABLE_QTRLE_DECODER 0
-#define ENABLE_RAWVIDEO_DECODER 0
-#define ENABLE_ROQ_DECODER 0
-#define ENABLE_SGI_DECODER 0
-#define ENABLE_SVQ1_DECODER 0
-#define ENABLE_TARGA_DECODER 0
-#define ENABLE_TIFF_DECODER 0
-#define ENABLE_ZLIB_DECODER 0
-#define ENABLE_ZMBV_DECODER 0
-#define ENABLE_FLAC_DECODER 0
-#define ENABLE_LIBAMR_NB_DECODER 0
-#define ENABLE_LIBAMR_WB_DECODER 0
-#define ENABLE_LIBGSM_DECODER 0
-#define ENABLE_LIBGSM_MS_DECODER 0
-#define ENABLE_MP2_DECODER 0
-#define ENABLE_SONIC_DECODER 0
-#define ENABLE_VORBIS_DECODER 0
-#define ENABLE_WMAV1_DECODER 0
-#define ENABLE_PCM_ALAW_DECODER 0
-#define ENABLE_PCM_MULAW_DECODER 0
-#define ENABLE_PCM_S8_DECODER 0
-#define ENABLE_PCM_S16BE_DECODER 0
-#define ENABLE_PCM_S16LE_DECODER 0
-#define ENABLE_PCM_S24BE_DECODER 0
-#define ENABLE_PCM_S24DAUD_DECODER 0
-#define ENABLE_PCM_S24LE_DECODER 0
-#define ENABLE_PCM_S32BE_DECODER 0
-#define ENABLE_PCM_S32LE_DECODER 0
-#define ENABLE_PCM_U8_DECODER 0
-#define ENABLE_PCM_U16BE_DECODER 0
-#define ENABLE_PCM_U16LE_DECODER 0
-#define ENABLE_PCM_U24BE_DECODER 0
-#define ENABLE_PCM_U24LE_DECODER 0
-#define ENABLE_PCM_U32BE_DECODER 0
-#define ENABLE_PCM_U32LE_DECODER 0
-#define ENABLE_ROQ_DPCM_DECODER 0
-#define ENABLE_ADPCM_4XM_DECODER 0
-#define ENABLE_ADPCM_ADX_DECODER 0
-#define ENABLE_ADPCM_CT_DECODER 0
-#define ENABLE_ADPCM_EA_DECODER 0
-#define ENABLE_ADPCM_G726_DECODER 0
-#define ENABLE_ADPCM_IMA_DK3_DECODER 0
-#define ENABLE_ADPCM_IMA_DK4_DECODER 0
-#define ENABLE_ADPCM_IMA_QT_DECODER 0
-#define ENABLE_ADPCM_IMA_SMJPEG_DECODER 0
-#define ENABLE_ADPCM_IMA_WAV_DECODER 0
-#define ENABLE_ADPCM_IMA_WS_DECODER 0
-#define ENABLE_ADPCM_MS_DECODER 0
-#define ENABLE_ADPCM_SBPRO_2_DECODER 0
-#define ENABLE_ADPCM_SBPRO_3_DECODER 0
-#define ENABLE_ADPCM_SBPRO_4_DECODER 0
-#define ENABLE_ADPCM_SWF_DECODER 0
-#define ENABLE_ADPCM_XA_DECODER 0
-#define ENABLE_ADPCM_YAMAHA_DECODER 0
-#define ENABLE_DVDSUB_DECODER 0
-#define ENABLE_LIBVORBIS_DECODER 0
-#define ENABLE_H263_PARSER 1
-#define ENABLE_H264_PARSER 1
-#define ENABLE_MPEG4VIDEO_PARSER 1
-#define ENABLE_AAC_PARSER 0
-#define ENABLE_AC3_PARSER 0
-#define ENABLE_CAVSVIDEO_PARSER 0
-#define ENABLE_DCA_PARSER 0
-#define ENABLE_DVBSUB_PARSER 0
-#define ENABLE_DVDSUB_PARSER 0
-#define ENABLE_H261_PARSER 0
-#define ENABLE_MJPEG_PARSER 0
-#define ENABLE_MPEGAUDIO_PARSER 0
-#define ENABLE_MPEGVIDEO_PARSER 0
-#define ENABLE_PNM_PARSER 0
-#define ENABLE_VC1_PARSER 0
-#define ENABLE_MJPEG_ENCODER 1
-#define ENABLE_MSMPEG4V3_ENCODER 1
-#define ENABLE_H263P_ENCODER 1
-#define ENABLE_AC3_ENCODER 1
-#define ENABLE_FFV1_ENCODER 1
-#define ENABLE_FLV1_ENCODER 1
-#define ENABLE_FFVHUFF_ENCODER 1
-#define ENABLE_H263_ENCODER 1
-#define ENABLE_MPEG1VIDEO_ENCODER 1
-#define ENABLE_MPEG2VIDEO_ENCODER 1
-#define ENABLE_MPEG4_ENCODER 1
-#define ENABLE_FLV_ENCODER 1
-#define ENABLE_MP2_ENCODER 1
-#define ENABLE_DVVIDEO_ENCODER 1
-#define ENABLE_HUFFYUV_ENCODER 1
-#define ENABLE_DVBSUB_ENCODER 1
-#define ENABLE_SNOW_ENCODER 1
-#define ENABLE_ADPCM_IMA_AMV_ENCODER 0
-#define ENABLE_LIBX264_ENCODER 0
-#define ENABLE_LIBXVID_ENCODER 0
-#define ENABLE_LJPEG_ENCODER 0
-#define ENABLE_PAM_ENCODER 0
-#define ENABLE_PBM_ENCODER 0
-#define ENABLE_PGM_ENCODER 0
-#define ENABLE_PGMYUV_ENCODER 0
-#define ENABLE_PPM_ENCODER 0
-#define ENABLE_LIBFAAC_ENCODER 0
-#define ENABLE_LIBMP3LAME_ENCODER 0
-#define ENABLE_LIBTHEORA_ENCODER 0
-#define ENABLE_SONIC_LS_ENCODER 0
-#define ENABLE_ASV1_ENCODER 0
-#define ENABLE_ASV2_ENCODER 0
-#define ENABLE_BMP_ENCODER 0
-#define ENABLE_FLASHSV_ENCODER 0
-#define ENABLE_GIF_ENCODER 0
-#define ENABLE_H261_ENCODER 0
-#define ENABLE_JPEGLS_ENCODER 0
-#define ENABLE_MSMPEG4V1_ENCODER 0
-#define ENABLE_MSMPEG4V2_ENCODER 0
-#define ENABLE_PNG_ENCODER 0
-#define ENABLE_QTRLE_ENCODER 0
-#define ENABLE_RAWVIDEO_ENCODER 0
-#define ENABLE_ROQ_ENCODER 0
-#define ENABLE_RV10_ENCODER 0
-#define ENABLE_RV20_ENCODER 0
-#define ENABLE_SGI_ENCODER 0
-#define ENABLE_SVQ1_ENCODER 0
-#define ENABLE_TARGA_ENCODER 0
-#define ENABLE_TIFF_ENCODER 0
-#define ENABLE_WMV1_ENCODER 0
-#define ENABLE_WMV2_ENCODER 0
-#define ENABLE_ZLIB_ENCODER 0
-#define ENABLE_ZMBV_ENCODER 0
-#define ENABLE_FLAC_ENCODER 0
-#define ENABLE_LIBAMR_NB_ENCODER 0
-#define ENABLE_LIBAMR_WB_ENCODER 0
-#define ENABLE_LIBGSM_ENCODER 0
-#define ENABLE_LIBGSM_MS_ENCODER 0
-#define ENABLE_SONIC_ENCODER 0
-#define ENABLE_VORBIS_ENCODER 0
-#define ENABLE_WMAV1_ENCODER 0
-#define ENABLE_WMAV2_ENCODER 0
-#define ENABLE_PCM_ALAW_ENCODER 0
-#define ENABLE_PCM_MULAW_ENCODER 0
-#define ENABLE_PCM_S8_ENCODER 0
-#define ENABLE_PCM_S16BE_ENCODER 0
-#define ENABLE_PCM_S16LE_ENCODER 0
-#define ENABLE_PCM_S24BE_ENCODER 0
-#define ENABLE_PCM_S24DAUD_ENCODER 0
-#define ENABLE_PCM_S24LE_ENCODER 0
-#define ENABLE_PCM_S32BE_ENCODER 0
-#define ENABLE_PCM_S32LE_ENCODER 0
-#define ENABLE_PCM_U8_ENCODER 0
-#define ENABLE_PCM_U16BE_ENCODER 0
-#define ENABLE_PCM_U16LE_ENCODER 0
-#define ENABLE_PCM_U24BE_ENCODER 0
-#define ENABLE_PCM_U24LE_ENCODER 0
-#define ENABLE_PCM_U32BE_ENCODER 0
-#define ENABLE_PCM_U32LE_ENCODER 0
-#define ENABLE_ROQ_DPCM_ENCODER 0
-#define ENABLE_ADPCM_4XM_ENCODER 0
-#define ENABLE_ADPCM_ADX_ENCODER 0
-#define ENABLE_ADPCM_CT_ENCODER 0
-#define ENABLE_ADPCM_EA_ENCODER 0
-#define ENABLE_ADPCM_G726_ENCODER 0
-#define ENABLE_ADPCM_IMA_DK3_ENCODER 0
-#define ENABLE_ADPCM_IMA_DK4_ENCODER 0
-#define ENABLE_ADPCM_IMA_QT_ENCODER 0
-#define ENABLE_ADPCM_IMA_SMJPEG_ENCODER 0
-#define ENABLE_ADPCM_IMA_WAV_ENCODER 0
-#define ENABLE_ADPCM_IMA_WS_ENCODER 0
-#define ENABLE_ADPCM_MS_ENCODER 0
-#define ENABLE_ADPCM_SBPRO_2_ENCODER 0
-#define ENABLE_ADPCM_SBPRO_3_ENCODER 0
-#define ENABLE_ADPCM_SBPRO_4_ENCODER 0
-#define ENABLE_ADPCM_SWF_ENCODER 0
-#define ENABLE_ADPCM_XA_ENCODER 0
-#define ENABLE_ADPCM_YAMAHA_ENCODER 0
-#define ENABLE_DVDSUB_ENCODER 0
-#define ENABLE_LIBVORBIS_ENCODER 0
-#define ENABLE_MP3_HEADER_COMPRESS_BSF 0
-#define ENABLE_IMX_DUMP_HEADER_BSF 0
-#define ENABLE_DUMP_EXTRADATA_BSF 0
-#define ENABLE_REMOVE_EXTRADATA_BSF 0
-#define ENABLE_NOISE_BSF 0
-#define ENABLE_MP3_HEADER_DECOMPRESS_BSF 0
-#define ENABLE_MJPEGA_DUMP_HEADER_BSF 0
-#define ENABLE_IMX_DUMP_HEADER_BSF 0
-#define CONFIG_MUXERS 1
-#define CONFIG_MOV_MUXER 1
-#define CONFIG_MP4_MUXER 1
-#define CONFIG_PSP_MUXER 1
-#define CONFIG_TG2_MUXER 1
-#define CONFIG_TGP_MUXER 1
-#define CONFIG_ENCODERS 1
-#define CONFIG_DVVIDEO_ENCODER 1
-#define CONFIG_SNOW_ENCODER 1
-#define CONFIG_DECODERS 1
-#define CONFIG_DVVIDEO_DECODER 1
-#define CONFIG_H263_DECODER 1
-#define CONFIG_MPEG4_DECODER 1
-#define CONFIG_SNOW_DECODER 1
-#define CONFIG_VC1_DECODER 1
-#define CONFIG_WMV2_DECODER 1
-#define CONFIG_WMV3_DECODER 1
-#define CONFIG_MPEGAUDIO_HP 1
-#define CONFIG_ZLIB 1
-#define ENABLE_ARMV4L 0
-#define ENABLE_MLIB 0
-#define ENABLE_SPARC 0
-#define ENABLE_ALPHA 0
-#define ENABLE_MMI 0
-#define ENABLE_SH4 0
-#define ENABLE_BFIN 0
-#define ENABLE_SMALL 0
-#ifdef ARCH_POWERPC
-#define ENABLE_POWERPC 1
-#else
-#define ENABLE_POWERPC 0
-#endif
-#ifdef ARCH_X86
-#define ENABLE_MMX 1
-#define HAVE_MMX 1
-#define HAVE_FAST_UNALIGNED 1
-#else
-#define ENABLE_MMX 0
-#endif
-#ifdef ARCH_X86_64
-#define HAVE_FAST_64BIT 1
-#endif
-#ifdef __APPLE__
-#define CONFIG_DARWIN 1
-#endif
-#define ENABLE_THREADS 1
-#define HAVE_LRINTF 1
-#define HAVE_THREADS 1
-#define RUNTIME_CPUDETECT 1

Copied: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat (from rev 3894, branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavformat)

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/ADM_lavformat.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavformat/ADM_lavformat.cpp	2008-03-15 11:42:55 UTC (rev 3894)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/ADM_lavformat.cpp	2008-03-15 15:52:19 UTC (rev 3895)
@@ -1,809 +0,0 @@
-
-// C++ Implementation: ADM_lavformat
-//
-// Description: 
-//
-//
-// Author: mean <fixounet at free.fr>, (C) 2004
-//
-// Copyright: See COPYING file that comes with this distribution
-//
-//
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-#include "config.h"
-
-#include <stdio.h>
-#include <stdlib.h>
-#include <math.h>
-#include <string.h>
-
-extern "C" 
-{
-	
-	#include "avformat.h"
-};
-
-#undef malloc
-#undef realloc
-#undef free
-#include "ADM_assert.h"
-#include "ADM_default.h"
-#include "ADM_toolkit/toolkit.hxx"
-
-#include "ADM_audiofilter/audioprocess.hxx"
-#include "ADM_audio/ADM_a52info.h"
-
-#include "ADM_codecs/ADM_codec.h"
-#include "ADM_editor/ADM_Video.h"
-
-#include "ADM_lavformat.h"
-#include "fourcc.h"
-
-#include "prefs.h"
-#include "ADM_osSupport/ADM_debugID.h"
-#define MODULE_NAME MODULE_LAVFORMAT
-#include "ADM_osSupport/ADM_debug.h"
-
-#include "ADM_cpuCap.h"
-static    AVOutputFormat *fmt;
-static    AVFormatContext *oc;
-static    AVStream *audio_st, *video_st;
-static    double audio_pts, video_pts;
-
-static uint32_t one;
-uint64_t  _curDTS;
-
-static uint8_t ADM_4cc_to_lavcodec(const char *fcc, CodecID *outlavid);
-static uint8_t ADM_WaveTag_to_lavcodec(uint32_t tag, CodecID *outlavid);
-// convert in in us to out in 90Khz tick
-int64_t adm_90k( double in)
-{
-int64_t out;
-	// in=in/1000*1000 us->s
-	// in/=(1/90000) nb 90 khz tick
-	// in*=90*000/000*000
-	// in =  in*=90/000
-	//in=in*90./1000.;
-	out= (int64_t)in;
-	return out;
-}
-//___________________________________________________________________________
-lavMuxer::lavMuxer( void )
-{
-	fmt=NULL;
-	oc=NULL;
-	audio_st=NULL;
-	video_st=NULL;
-	_fps1000=0;
-	_audioByterate=0;
-	_lastAudioDts=0;
-	_frameNo=0;
-	_running=0;
-	_curDTS=0;
-        _audioFq=0;
-}
-//___________________________________________________________________________
-lavMuxer::~lavMuxer()
-{
-	close();
-}
-//___________________________________________________________________________
-uint8_t lavMuxer::open(const char *filename, uint32_t inbitrate,ADM_MUXER_TYPE type, aviInfo *info, WAVHeader *audioheader) 
-{
-        return open(filename,inbitrate,type,info,0,NULL,audioheader,0,NULL);
-}
-
-
-uint8_t lavMuxer::open(const char *filename,uint32_t inbitrate, ADM_MUXER_TYPE type, aviInfo *info,
-              uint32_t videoExtraDataSize, uint8_t *videoExtraData, WAVHeader *audioheader,
-              uint32_t audioextraSize,uint8_t *audioextraData)
-{
- AVCodecContext *c;
- 	_type=type;
-	_fps1000=info->fps1000;
-	switch(_type)
-	{
-	case MUXER_TS:
-		fmt=guess_format("mpegts", NULL, NULL);
-		break;
-	case MUXER_DVD:
-		fmt = guess_format("dvd", NULL, NULL);
-		break;
-	case MUXER_VCD:
-		fmt = guess_format("vcd", NULL, NULL);
-		break;
-	case MUXER_SVCD:
-		fmt = guess_format("svcd", NULL, NULL);
-		break;
-	case MUXER_MP4:
-		fmt = guess_format("mp4", NULL, NULL);
-		break;
-	case MUXER_PSP:
-		fmt = guess_format("psp", NULL, NULL);
-		break;
-	case MUXER_FLV:
-		fmt = guess_format("flv", NULL, NULL);
-		break;          
-	case MUXER_MATROSKA:
-		fmt = guess_format("matroska", NULL, NULL);
-		break;          
-
-	default:
-		fmt=NULL;
-	}
-	if (!fmt) 
-	{
-        	printf("Lav:Cannot guess format\n");
-                ADM_assert(0);
-		return 0;
-	}
-	oc = av_alloc_format_context();
-	if (!oc) 
-	{
-       		printf("Lav:Cannot allocate context\n");
-		return 0;
-	}
-	oc->oformat = fmt;
-	snprintf(oc->filename,1000,"file://%s",filename);
-	// Video
-	//________
-	
-	video_st = av_new_stream(oc, 0);
-	if (!video_st) 
-	{
-		printf("Lav: new stream failed\n");
-		return 0;
-	}	
-	
-	c = video_st->codec;
-	switch(_type)
-	{
-				case MUXER_FLV:
-					 c->codec=new AVCodec;
-					 memset(c->codec,0,sizeof(AVCodec));
-					 if(fourCC::check(info->fcc,(uint8_t *)"FLV1"))
-					 {
-						 c->codec_id=CODEC_ID_FLV1;
-					 	 c->codec->name=ADM_strdup("FLV1");
-					 }else
-					 {
-						 if(fourCC::check(info->fcc,(uint8_t *)"VP6F"))
-						 			{
-							 		 c->codec_id=CODEC_ID_VP6F;
-					 				 c->codec->name=ADM_strdup("VP6F");
-						 			}
-						 else
-							 ADM_assert(0);
-					 
-					 }
-					 
-					 break;
-                case MUXER_MATROSKA:
-                        strcpy(oc->title,"Avidemux");
-                        strcpy(oc->author,"Avidemux");
-                        c->sample_aspect_ratio.num=1;
-                        c->sample_aspect_ratio.den=1;
-                        if(isMpeg4Compatible(info->fcc))
-                        {
-                                c->codec_id = CODEC_ID_MPEG4;
-                                c->has_b_frames=1; // in doubt...
-                        }else
-                        {
-                                if(isH264Compatible(info->fcc))
-                                {
-                                        c->has_b_frames=1; // in doubt...
-                                        c->codec_id = CODEC_ID_H264;
-                                        c->codec=new AVCodec;
-                                        memset(c->codec,0,sizeof(AVCodec));
-                                        c->codec->name=ADM_strdup("H264");
-                                }
-                                else
-                                {
-                                   if(!ADM_4cc_to_lavcodec((const char *)&(info->fcc),&(c->codec_id)))
-                                   {
-                                      printf("[lavFormat] Cannot map  this\n");
-                                      return 0;
-                                   }
-                                  
-                                }
-                        }
-                        if(videoExtraDataSize)
-                        {
-                                c->extradata=videoExtraData;
-                                c->extradata_size= videoExtraDataSize;
-                        }
-                        break;
-                case MUXER_MP4:
-                case MUXER_PSP:
-                {
-                        // probably a memeleak here
-                        char *foo=ADM_strdup(filename);
-                        
-                        strcpy(oc->title,ADM_GetFileName(foo));
-                        strcpy(oc->author,"Avidemux");
-                        c->sample_aspect_ratio.num=1;
-                        c->sample_aspect_ratio.den=1;
-                        if(isMpeg4Compatible(info->fcc))
-                        {
-                                c->codec_id = CODEC_ID_MPEG4;
-                                c->has_b_frames=1; // in doubt...
-                        }else
-                        {
-                                if(isH264Compatible(info->fcc))
-                                {
-                                        c->has_b_frames=1; // in doubt...
-                                        c->codec_id = CODEC_ID_H264;
-                                        c->codec=new AVCodec;
-                                        memset(c->codec,0,sizeof(AVCodec));
-                                        c->codec->name=ADM_strdup("H264");
-                                }
-                                else
-                                {
-                                        if(isDVCompatible(info->fcc))
-                                        {
-                                          c->codec_id = CODEC_ID_DVVIDEO;
-                                        }else
-                                        {
-                                          if(fourCC::check(info->fcc,(uint8_t *)"H263"))
-                                          {
-                                                    c->codec_id=CODEC_ID_H263;
-                                            }else{
-                                                    c->codec_id = CODEC_ID_MPEG4; // Default value
-                                                    printf("Ooops, cant mux that...\n");
-                                                    printf("Ooops, cant mux that...\n");
-                                                    printf("Ooops, cant mux that...\n");
-                                                }
-                                        }
-                                }
-                        }
-                        if(videoExtraDataSize)
-                        {
-                                c->extradata=videoExtraData;
-                                c->extradata_size= videoExtraDataSize;
-                        }
-                        if(MUXER_PSP==_type)
-                        {
-                            c->rc_buffer_size=0; //8*1024*224;
-                            c->rc_max_rate=0; //768*1000;
-                            c->rc_min_rate=0;
-                            c->bit_rate=768*1000;
-                        }
-                        else
-                        {
-                            c->rc_buffer_size=8*1024*224;
-                            c->rc_max_rate=9500*1000;
-                            c->rc_min_rate=0;
-                            if(!inbitrate)
-                                    c->bit_rate=9000*1000;
-                            else
-                                    c->bit_rate=inbitrate;
-                        }
-                }
-                        break;
-                case MUXER_TS:
-                        c->codec_id = CODEC_ID_MPEG2VIDEO;
-                        c->rc_buffer_size=8*1024*224;
-                        c->rc_max_rate=9500*1000;
-                        c->rc_min_rate=0;
-                        if(!inbitrate)
-                                c->bit_rate=9000*1000;
-                        else
-                                c->bit_rate=inbitrate;
-        
-                        break;
-		case MUXER_DVD:
-			c->codec_id = CODEC_ID_MPEG2VIDEO;
-			c->rc_buffer_size=8*1024*224;
-			c->rc_max_rate=9500*1000;
-			c->rc_min_rate=0;
-			if(!inbitrate)
-				c->bit_rate=9000*1000;
-			else
-				c->bit_rate=inbitrate;
-	
-			break;
-		case MUXER_VCD:
-			c->codec_id = CODEC_ID_MPEG1VIDEO;
-
-			c->rc_buffer_size=8*1024*40;
-			c->rc_max_rate=1152*1000;
-			c->rc_min_rate=1152*1000;
-			
-			c->bit_rate=1152*1000;
-			
-
-			break;
-		case MUXER_SVCD:
-			c->codec_id = CODEC_ID_MPEG2VIDEO;
-
-			c->rc_buffer_size=8*1024*112;
-			c->rc_max_rate=2500*1000;
-			c->rc_min_rate=0*1000;
-			if(!inbitrate)
-				c->bit_rate=2040*1000;
-			else
-				c->bit_rate=inbitrate;
-
-			break;
-		default:
-			ADM_assert(0);
-	}
-	
-	c->codec_type = CODEC_TYPE_VIDEO;
-	c->flags=CODEC_FLAG_QSCALE;   
-	c->width = info->width;  
-	c->height = info->height; 
-
-       AVRational fps25=(AVRational){1001,25025};
-       AVRational fps24=(AVRational){1001,24000};
-       AVRational fps30= (AVRational){1001,30000};
-       AVRational fpsfree= (AVRational){1000,_fps1000};
-
-        
-    	switch(_fps1000)
-	{
-		case 25000:
-                {
-			 c->time_base= fps25; 
-			 break;
-                }
-		case 23976:
-                        if(_type==MUXER_MP4 || _type==MUXER_PSP || _type==MUXER_FLV || _type==MUXER_MATROSKA)
-                        {
-                                 c->time_base= fps24; //(AVRational){1001,24000};
-                                break;
-                        }
-		case  29970:
-			 c->time_base=fps30;
-			break;
-		default:
-                      {
-                            if(_type==MUXER_MP4 || _type==MUXER_PSP || _type==MUXER_FLV || _type==MUXER_MATROSKA)
-                            {
-                                    c->time_base=fpsfree;// (AVRational){1000,_fps1000};
-                                    break;
-                            }
-                            else
-                            {
-                                GUI_Error_HIG(QT_TR_NOOP("Incompatible frame rate"), NULL);
-                                return 0;
-                            }
-                            }
-                        break;
-	}
-
-			
-	c->gop_size=15;
-	c->max_b_frames=2;
-	c->has_b_frames=1;
-
-	
-	// Audio
-	//________
-        if(audioheader)
-        {
-          audio_st = av_new_stream(oc, 1);
-          if (!audio_st) 
-          {
-                  printf("Lav: new stream failed\n");
-                  return 0;
-          }
-  
-                  
-          c = audio_st->codec;
-          c->frame_size=1024; //For AAC mainly, sample per frame
-          printf("[LavFormat] Bitrate %u\n",(audioheader->byterate*8)/1000);
-          _audioFq=c->sample_rate = audioheader->frequency;
-#if 0
-           if(_type== MUXER_PSP && audioheader->encoding==WAV_AAC)
-            {
-                    _audioFq=c->sample_rate = audioheader->frequency/2;                 //_audioFq*=2; // SBR
-             }
-#endif
-          
-          switch(audioheader->encoding)
-          {
-                  case WAV_AC3: c->codec_id = CODEC_ID_AC3;break;
-                  case WAV_MP2: c->codec_id = CODEC_ID_MP2;break;
-                  case WAV_MP3:
-  #warning FIXME : Probe deeper
-                              c->frame_size=1152;
-                              c->codec_id = CODEC_ID_MP3;
-                              break;
-                  case WAV_PCM: 
-                                  // One chunk is 10 ms (1/100 of fq)
-                                  c->frame_size=4;
-                                  c->codec_id = CODEC_ID_PCM_S16LE;break;
-                  case WAV_AAC: 
-                                  c->extradata=audioextraData;
-                                  c->extradata_size= audioextraSize;
-                                  c->codec_id = CODEC_ID_AAC;
-                                  break;
-                  default:
-                          if(_type==MUXER_MATROSKA)
-                          {
-                           if(ADM_WaveTag_to_lavcodec(audioheader->encoding, &(c->codec_id)))
-                           {
-                             if(audioextraData)
-                             {
-                                  c->extradata=audioextraData;
-                                  c->extradata_size= audioextraSize;
-                             }
-                             // Put a dummy time increment
-                              c->time_base= fps25;
-                             break;
-                           }
-                          }
-                            
-                          printf("Cant mux that ! audio\n"); 
-                          printf("Cant mux that ! audio\n");
-                          c->codec_id = CODEC_ID_MP2;
-                          return 0;
-                          break;
-          }
-          c->codec_type = CODEC_TYPE_AUDIO;
-          
-          c->bit_rate = audioheader->byterate*8;
-          c->rc_buffer_size=(c->bit_rate/(2*8)); // 500 ms worth
-          
-          c->channels = audioheader->channels;
-          _audioByterate=audioheader->byterate;
-          
-        }
-        // /audio
-	
-	
-//----------------------
-	switch(_type)
-	{
-				case MUXER_FLV:
-                case MUXER_PSP:
-                case MUXER_MP4:
-                case MUXER_MATROSKA:
-                        oc->mux_rate=10080*1000; // Needed ?
-                        break;
-
-                case MUXER_TS:
-                        oc->mux_rate=10080*1000;
-                        break;
-		case MUXER_DVD:
-			oc->packet_size=2048;
-			oc->mux_rate=10080*1000;
-			break;
-		case MUXER_VCD:
-			oc->packet_size=2324;
-			oc->mux_rate=2352 * 75 * 8;
-			
-			break;
-		case MUXER_SVCD:
-			
-			oc->packet_size=2324;
-			oc->mux_rate=2*2352 * 75 * 8; // ?
-			
-			break;
-		default:
-			ADM_assert(0);
-	}
-	oc->preload=AV_TIME_BASE/10; // 100 ms preloading
-	oc->max_delay=200*1000; // 500 ms
-	
-	if (av_set_parameters(oc, NULL) < 0) 
-	{
-		printf("Lav: set param failed \n");
-		return 0;
-	}
-	 if (url_fopen(&(oc->pb), filename, URL_WRONLY) < 0) 
-	 {
-	 	printf("Lav: Failed to open file :%s\n",filename);
-		return 0;
-        }
-
-	ADM_assert(av_write_header(oc)>=0);
-	dump_format(oc, 0, filename, 1);
-
-
-	printf("lavformat mpeg muxer initialized\n");
-	
-	_running=1;
-
-	one=(1000*1000*1000)/_fps1000; 
-	_curDTS=one;
-
-	return 1;
-}
-//___________________________________________________________________________
-uint8_t lavMuxer::writeAudioPacket(uint32_t len, uint8_t *buf,uint32_t sample)
-{
-        
-        int ret;
-        AVPacket pkt;
-        double f;
-        int64_t timeInUs;
-
-            //printf("Audio paclet : size %u, sample %u\n",len,sample);
-        
-           if(!audio_st) return 0;
-           if(!len) return 1;
-            av_init_packet(&pkt);
-
-            timeInUs=(int64_t)sample2time_us(sample);
-            /* Rescale to ?? */
-            if(_type==MUXER_FLV || _type==MUXER_MATROSKA) /* The FLV muxer expects packets dated in ms, there is something i did not get... WTF */
-            {
-            			f=timeInUs/1000;
-            			f=floor(f+0.4);
-            }
-            else
-            {
-            	f=timeInUs;
-            	f/=1000000.; // In ms seconds 
-            	f*=_audioFq;
-            	f=floor(f+0.4);
-            }
-            pkt.dts=pkt.pts=(int)(f);
-
-            //printf("F:%f Q:%u D=%u\n",f,pkt.pts,timeInUs-_lastAudioDts);
-            
-            pkt.flags |= PKT_FLAG_KEY; 
-            pkt.data= buf;
-            pkt.size= len;
-            pkt.stream_index=1;
-            //pkt.duration=pkt.dts-_lastAudioDts; // Duration
-            aprintf("A: sample: %d frame_pts: %d fq: %d\n",(int32_t )sample,(int32_t )pkt.dts,audio_st->codec->sample_rate); 
-
-            ret = av_write_frame(oc, &pkt);
-            _lastAudioDts=timeInUs;
-            if(ret) 
-            {
-                        printf("Error writing audio packet\n");
-                        printf("pts %llu dts %llu\n",pkt.pts,pkt.dts);
-                        return 0;
-            }
-            return 1;
-}
-//________________________________________________________________________
-uint64_t  lavMuxer::sample2time_us( uint32_t sample )
-{
-double f;
-
-                f=sample;
-                f*=1000.*1000.;
-                f/=_audioFq;              // Sample / Frequency = time in seconds *10E6 to get in in us
-                
-                return (uint64_t)floor(f);
-
-}
-//___________________________________________________________________________
-uint8_t lavMuxer::needAudio( void )
-{
-	
-        if(!audio_st) return 0;
-
-	double f;
-	uint64_t dts=_lastAudioDts;  // Last audio dts
-
-		
-		aprintf("Need audio  ?: %llu / %llu : %llu\n ",dts,_curDTS,_curDTS+one);
-		if((dts+5000>=_curDTS) && (dts<=_curDTS+one)) return 1;
-		if(dts<=_curDTS)
-		{
-			printf("LavMuxer:Audio DTS is too low %llu / %llu!\n",dts,_curDTS);
-			return 1;
-		}
-		return 0;
-}
-//___________________________________________________________________________
-uint8_t lavMuxer::writeVideoPacket(ADMBitstream *bitstream)
-{
-int ret;
-
-double p,d;
-  	AVPacket pkt;
-            av_init_packet(&pkt);
-	    
-        p=bitstream->ptsFrame+1;      // Pts           // Time p/fps1000=out/den  out=p*den*1000/fps1000
-        p=(p*1000*1000*1000);
-        p=p/_fps1000;                  // in us
-	
-        d=bitstream->dtsFrame;		// dts
-	d=(d*1000*1000*1000);
-	d=d/_fps1000;
-	
-	
-	_curDTS=(int64_t)floor(d);	
-        
-        // Rescale
-#define RESCALE(x) x=x*video_st->codec->time_base.den*1000.;\
-                   x=x/_fps1000;
-        
-        p=bitstream->ptsFrame+1;
-        RESCALE(p);
-        
-        d=bitstream->dtsFrame;
-        RESCALE(d);
-        
-        if(_type==MUXER_FLV || _type==MUXER_MATROSKA) /* The FLV muxer expects packets dated in ms, there is something i did not get... WTF */
-        {
-        			p=p*1000/_fps1000;
-        			d=d*1000/_fps1000;
-        }
-    	pkt.dts=(int64_t)floor(d);
-    	pkt.pts=(int64_t)floor(p);
-
-       // printf("Lavformat : Pts :%u dts:%u",displayframe,frameno);
-	aprintf("Lavformat : Pts :%llu dts:%llu",pkt.pts,pkt.dts);
-	pkt.stream_index=0;
-           
-        pkt.data= bitstream->data;
-        pkt.size= bitstream->len;
-	// Look if it is a gop start or seq start
-        if(_type==MUXER_MP4 || _type==MUXER_PSP || _type==MUXER_FLV || _type==MUXER_MATROSKA)
-        {
-            if(bitstream->flags & AVI_KEY_FRAME) 
-                        pkt.flags |= PKT_FLAG_KEY;
-        }else
-            if(!bitstream->data[0] &&  !bitstream->data[1] && bitstream->data[2]==1)
-	{
-            if(bitstream->data[3]==0xb3 || bitstream->data[3]==0xb8 ) // Seq start or gop start
-		pkt.flags |= PKT_FLAG_KEY;
-		//printf("Intra\n"); 
-	}
-           
-	ret =av_write_frame(oc, &pkt);
-	if(ret) 
-	{
-		printf("Error writing video packet\n");
-		return 0;
-	}
-        aprintf("V: frame %lu pts%d\n",bitstream->dtsFrame,pkt.pts);
-	
-	return 1;
-}
-//___________________________________________________________________________
-uint8_t lavMuxer::forceRestamp(void)
-{
-	return 1;
-}
-//___________________________________________________________________________
-uint8_t lavMuxer::close( void )
-{
-	if(_running)
-	{
-		_running=0;
-		// Flush
-		// Cause deadlock :
-		av_write_trailer(oc);
-		url_fclose(&oc->pb);
-
-	}
-	if(audio_st)
-	{
-		 av_free(audio_st);
-	}
-	if(video_st)
-	{
-		 av_free(video_st);
-	}
-	video_st=NULL;
-	audio_st=NULL;
-	if(oc)
-		av_free(oc);
-	oc=NULL;
-	return 1;
-}
-//___________________________________________________________________________
-uint8_t lavMuxer::audioEmpty( void)
-{
-	return 0;
-}
-extern "C"
-{
-     extern  int        mpegps_init(void );
-     extern  int        movenc_init(void );
-     extern  int        flvenc_init(void );
-     extern  int        matroskaenc_init(void );
-};
-extern URLProtocol file_protocol ;
-uint8_t lavformat_init(void)
-{
-                movenc_init();
-                flvenc_init();
-                matroskaenc_init();
-                register_protocol(&file_protocol);
-}
-extern "C"
-{
-/** 
-    \fn ADM_useAlternateTagging
-    \brief returns 1 if using haali compatible tagging, 0 if normal. For mp3 in mp4ff.
-*/
-int ADM_useAlternateTagging(void)
-{
-  uint32_t v=1;
-  prefs->get(FEATURE_ALTERNATE_MP3_TAG,&v);
-  return v;
-} 
-}
-
-typedef struct
-{
-  const char *name;
-  int    id;
-}lavFCC_t;
-
-lavFCC_t lavFCC[]=
-{
-  {"DIV3",CODEC_ID_MSMPEG4V3},
-  {"FLV1",CODEC_ID_FLV1},
-  {"MPEG",CODEC_ID_MPEG2VIDEO},
-  {"DUMMY",0Xffff}
-};
-/**
-    \fn ADM_4cc_to_lavcodec
-    \brief Convert avi fourcc to lavcodec id (video)
-
-*/
-uint8_t ADM_4cc_to_lavcodec(const char *fcc, CodecID *outlavid)
-{
-    uint32_t nb=sizeof( lavFCC)/sizeof(lavFCC_t);
-    nb--;
-    for(int i=0;i<nb;i++)
-    {
-      if(!strncmp(lavFCC[i].name,fcc,4))
-      {
-        *outlavid=(CodecID)lavFCC[i].id;
-        return 1; 
-      }
-      
-    }
-    return 0;
-  
-}
-//*****************
-typedef struct
-{
-  uint32_t tag;
-  int    id;
-}lavWaveTag_t;
-
-lavWaveTag_t lavWaveTag[]=
-{
-  {WAV_AC3,CODEC_ID_AC3},
-  {WAV_OGG,CODEC_ID_VORBIS},
-  {WAV_AAC,CODEC_ID_AAC},
-  {0xdead,0Xffff} // DUMMY
-};
-/**
-    \fn ADM_WaveTag_to_lavcodec
-    \brief Convert ADM audio codec id to lavcodec id (video)
-
-*/
-uint8_t ADM_WaveTag_to_lavcodec(uint32_t tag, CodecID *outlavid)
-{
-    uint32_t nb=sizeof( lavWaveTag)/sizeof(lavWaveTag_t);
-    nb--;
-    for(int i=0;i<nb;i++)
-    {
-      if(lavWaveTag[i].tag==tag)
-      {
-        *outlavid=(CodecID)lavWaveTag[i].id;
-        return 1; 
-      }
-      
-    }
-    return 0;
-  
-}
-
-//___________________________________________________________________________
-//EOF
-
-

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/ADM_lavformat.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavformat/ADM_lavformat.h	2008-03-15 11:42:55 UTC (rev 3894)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/ADM_lavformat.h	2008-03-15 15:52:19 UTC (rev 3895)
@@ -1,167 +0,0 @@
-//
-// C++ Interface: ADM_lavformat
-//
-// Description: 
-//
-//	iface to libavformat	
-//
-//
-// Author: mean <fixounet at free.fr>, (C) 2004
-//
-// Copyright: See COPYING file that comes with this distribution
-//
-//
-#ifndef ADM_LAVFORMAT_H
-#define ADM_LAVFORMAT_H
-#include "ADM_bitstream.h"
-typedef enum
-{
-        MUXER_NONE=0,
-        MUXER_DVD,
-		MUXER_VCD,
-		MUXER_SVCD,
-        MUXER_TS,
-        MUXER_MP4,
-        MUXER_PSP,
-        MUXER_FLV,
-        MUXER_MATROSKA,
-        MUXER_DUMMY
-}ADM_MUXER_TYPE;
-
-
-class ADMMpegMuxer
-{
-protected:
-                uint32_t _frameNo;
-                uint32_t _fps1000;
-                uint32_t _audioByterate;
-                uint32_t _audioFq;
-                uint32_t _total; // deprecated, only for muxts
-                uint64_t _lastAudioDts;
-                uint32_t _running;
-                ADM_MUXER_TYPE _type;
-                uint8_t  _restamp;
-                ADM_MUXER_TYPE _muxerType;
-
-public:
-        virtual uint8_t open(const char *filename,uint32_t inbitrate, ADM_MUXER_TYPE type, 
-                                aviInfo *info, WAVHeader *audioheader)=0;
-        virtual uint8_t writeAudioPacket(uint32_t len, uint8_t *buf)=0;
-        virtual uint8_t writeVideoPacket(ADMBitstream *bitstream )=0;
-        virtual uint8_t forceRestamp(void)=0;
-        virtual uint8_t close( void )=0;
-        virtual uint8_t audioEmpty( void)=0;
-        virtual uint8_t needAudio(void)=0;
-        virtual uint8_t audioEof(void) {return 1;}
-
-                ADMMpegMuxer(void) {};
-                virtual ~ADMMpegMuxer(void) {};
-
-};
-class lavMuxer : public ADMMpegMuxer
-{
-private:
-                uint64_t  sample2time_us( uint32_t sample );
-		
-
-public:
-		lavMuxer(void );
-		~lavMuxer(  );
-	virtual uint8_t open(const char *filename,uint32_t inbitrate, ADM_MUXER_TYPE type, aviInfo *info, WAVHeader *audioheader);
-        virtual uint8_t open(const char *filename,uint32_t inbitrate, ADM_MUXER_TYPE type, aviInfo *info,uint32_t videoExtraDataSize,
-                        uint8_t *videoExtraData, WAVHeader *audioheader,uint32_t audioextraSize,uint8_t *audioextraData);
-        
-        virtual uint8_t writeAudioPacket(uint32_t len, uint8_t *buf,uint32_t sample);
-        virtual uint8_t writeAudioPacket(uint32_t len, uint8_t *buf) { ADM_assert(0);return 1;}
-        virtual uint8_t writeVideoPacket(ADMBitstream *bitstream );
-        virtual uint8_t forceRestamp(void);
-        virtual uint8_t close( void );
-        virtual uint8_t audioEmpty( void);
-        virtual uint8_t needAudio(void);
-
-	
-
-};
-
-class mplexMuxer : public ADMMpegMuxer
-{
-protected:
-               
-public:
-                mplexMuxer(void );
-                ~mplexMuxer(  );
-        virtual uint8_t open(const char *filename,uint32_t inbitrate, ADM_MUXER_TYPE type, aviInfo *info, WAVHeader *audioheader);
-        virtual uint8_t writeVideoPacket(ADMBitstream *bitstream );
-        virtual uint8_t writeAudioPacket(uint32_t len, uint8_t *buf);
-        virtual uint8_t forceRestamp(void);
-        virtual uint8_t close( void );
-        virtual uint8_t audioEmpty( void);
-        virtual uint8_t needAudio(void);
-        virtual uint8_t audioEof(void);
-        virtual uint8_t videoEof(void);
-
-};
-#define TS_PACKET_SIZE 188
-
-typedef struct
-{
-    uint64_t pts;
-    uint8_t  packet[TS_PACKET_SIZE];
-}entryPacket;
-
-typedef struct
-{
-    uint32_t pid;
-    uint32_t counter;
-    uint32_t tableId;
-    uint32_t sectionId;
-}channel;
-
-class tsMuxer : public ADMMpegMuxer
-{
-protected:
-        uint32_t    audioPacket;
-        entryPacket *packetPipe;
-        uint32_t    packetHead,packetTail;
-        FILE        *outFile;     
-        uint32_t    audioPid,videoPid;
-        uint32_t    _curPTS;
-        uint32_t    nbPacket;
-        uint32_t    packetSincePAT;
-        uint64_t    lastPCR;
-        uint8_t     *audioBuffer;
-        uint32_t    audioFill;
-        uint8_t     *pesBuffer;
-        
-        entryPacket *getPacket( void);   
-        uint8_t     writeSection( uint32_t pid,channel *chan, 
-                                uint8_t *data, uint32_t len) ;
-        uint8_t     writePmt( void); 
-        uint8_t     writePat( void);                       
-        uint8_t     writePacket(uint8_t *data, uint32_t len, uint64_t pcr,channel *chan,uint8_t start);
-        uint8_t     writePacketPad(uint8_t *data, uint32_t len, uint64_t pcr,channel *chan,uint8_t start);
-        uint64_t    audioTime( uint32_t time)   ;            // Time is us
-        uint64_t    videoTime( uint32_t frameno);   // Time in us                    
-        uint8_t     flushPackets(uint8_t r);
-        uint8_t     writeAudioPacket2(void);
-        uint8_t     pes2ts(channel *chan,uint64_t pcr,uint8_t tim );
-        uint8_t     writeVideoPacket2(uint32_t len, uint8_t *buf,uint32_t frameno,uint32_t displayframe );
-        channel     audioChannel,videoChannel,pmt,pat;
-        aviInfo     _info;
-        WAVHeader   _wavHeader;
-             
-public:
-                tsMuxer(void );
-                ~tsMuxer(  );
-        virtual uint8_t open(const char *filename,uint32_t inbitrate, ADM_MUXER_TYPE type, aviInfo *info, WAVHeader *audioheader);
-        virtual uint8_t writeVideoPacket(ADMBitstream *bitstream );
-        virtual uint8_t writeAudioPacket(uint32_t len, uint8_t *buf);
-        virtual uint8_t forceRestamp(void);
-        virtual uint8_t close( void );
-        virtual uint8_t audioEmpty( void);
-        virtual uint8_t needAudio(void);
-
-};
-#endif
-//EOF
-

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/ADM_muxts.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavformat/ADM_muxts.cpp	2008-03-15 11:42:55 UTC (rev 3894)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/ADM_muxts.cpp	2008-03-15 15:52:19 UTC (rev 3895)
@@ -1,708 +0,0 @@
-//
-// C++ Implementation: ADM_lavformat
-//
-// Description: 
-//
-//
-// Author: mean <fixounet at free.fr>, (C) 2004
-//
-// Copyright: See COPYING file that comes with this distribution
-//
-//
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-#include "config.h"
-
-#include <stdio.h>
-#include <stdlib.h>
-#include <math.h>
-#include <string.h>
-
-
-#include "ADM_assert.h"
-
-#include "ADM_default.h"
-#include "ADM_toolkit/toolkit.hxx"
-
-#include "ADM_audiofilter/audioprocess.hxx"
-#include "ADM_audio/ADM_a52info.h"
-
-#include "ADM_codecs/ADM_codec.h"
-#include "ADM_editor/ADM_Video.h"
-
-#include "ADM_lavformat.h"
-
-
-#include "ADM_osSupport/ADM_debugID.h"
-#define MODULE_NAME MODULE_LAVFORMAT
-#include "ADM_osSupport/ADM_debug.h"
-#include "ADM_tscrc.h"
-
-
-#define TS_NB_PACKET   1000
-
-#define PAT_PID         0
-#define PMT_PID         0x42
-#define AUDIO_PID       0x45
-#define VIDEO_PID       0x44
-
-#define TS_HEADER_LEN 4
-
-#define TS_UNIT_START        0x40
-#define TS_UNIT_PAYLOAD_ONLY 0x10
-#define TS_UNIT_PAYLOAD_AF   0x30
-// 33 bits 
-#define TS_PCR_MASK             0x0000003FFFFFFFFFLL
-#define TS_NO_PCR               0xFF00000000000000LL
-#define TS_PAT_EVERY_PACKET     256
-#define TS_MUX_RATE             10000000        // 10 Mbs
-
-#define AUDIO_BUFFER            1024*10
-#define PES_BUFFER              1024            // Just to build packet into
-#define STUFFING_PATTERN        0
-#define MUX_EVERY_N_AUDIO_FRAMES 5
-static uint8_t writePts(uint8_t *data,uint64_t ipts,uint32_t flags);
-// /* ------------------------------------------------------------------------*/write
-tsMuxer::tsMuxer( void)
-{
-    packetPipe=new entryPacket[TS_NB_PACKET];
-    memset(packetPipe,0,sizeof(entryPacket)*TS_NB_PACKET);
-    packetHead=packetTail=0;
-    
-    audioChannel.pid=AUDIO_PID;
-    audioChannel.counter=0;
-    
-    videoChannel.pid=VIDEO_PID;
-    videoChannel.counter=0;
-    
-    pat.pid=PAT_PID;
-    pat.counter=0;
-    pat.tableId=0;
-    pat.sectionId=0;
-    
-    pmt.pid=PMT_PID;
-    pmt.counter=0;
-    pmt.tableId=2;
-    pmt.sectionId=1;
-    
-    _total=0;
-    _curPTS=0;
-    
-    packetSincePAT=0;
-    nbPacket=0;
-    lastPCR=0;
-    audioFill=0;
-    audioBuffer=new uint8_t[AUDIO_BUFFER];
-    pesBuffer=new uint8_t [PES_BUFFER];
-    audioPacket=0;
-}
-tsMuxer::~tsMuxer( )
-{
-   if(packetPipe)
-    delete [] packetPipe;
-   packetPipe=NULL;
-   if(audioBuffer)
-        delete [] audioBuffer;
-   audioBuffer=NULL;
-   if(pesBuffer)
-        delete [] pesBuffer;
-   pesBuffer=NULL;
-
-}
-//
-// Flush out of data packets
-// update pcr on the fly with non stupid value
-//
-uint8_t tsMuxer::flushPackets(uint8_t really)
-{
-double dpcr;    // delta PCR
-uint64_t pcr,packetpcr;
-entryPacket *entry;
-        
-        dpcr=TS_PACKET_SIZE*8;
-        dpcr/=TS_MUX_RATE;      
-        dpcr=dpcr*1000*1000;        // duration of a packet in us
-        pcr=(uint64_t )dpcr;
-        while(1)
-        {
-            if(packetHead==packetTail) break; // no more packet to handle
-            entry=&(packetPipe[packetHead]);
-#if 0            
-            if(entry->pts!=TS_NO_PCR)
-            {
-                if(entry->pts>=_curPTS) _curPTS=entry->pts;
-                    else
-                {
-                    // need to update
-                    uint32_t i=4;
-                    uint64_t fixed;
-                    uint8_t *pkt=entry->packet;
-                    
-                    fixed=_curPTS;
-                     //mask to avoid overflow
-                    fixed=(fixed*90)/1000;
-                    fixed=fixed&0x1FFFFFFFFLL; // 33 Bits
-                    pkt[i++]=7;
-                    pkt[i++]=0x10; // AF flags       
-                    pkt[i++]=(fixed>>25)&0xff; // FF
-                    pkt[i++]=(fixed>>17)&0xff; // FF
-                    pkt[i++]=(fixed>>9)&0xff; // FF
-                    pkt[i++]=(fixed>>1)&0xff; // FF
-                    pkt[i++]=(fixed<<7)&0x80; // &0x80
-                    pkt[i++]=0x00;
-                }
-            }
-#endif            
-           // _curPTS+=pcr;
-            fwrite(entry->packet,TS_PACKET_SIZE,1,outFile);
-            packetHead++;
-            packetHead%=TS_NB_PACKET;
-        }
-        return 1;
-}
-/*
-sync_byte 8 bslbf 
-transport_error_indicator 1 bslbf       1: Error present
-payload_unit_start_indicator 1 bslbf    If 1 a unit start in this packet, there is an offset later
-transport_priority 1 bslbf              x
-PID 13 uimsbf 
-transport_scrambling_control 2 bslbf  00 not scrambled
-adaptation_field_control 2 bslbf      00 01:Payload only 10:adap only 11: payload + adap
-continuity_counter 4 uimsbf 
-if(adaptation_field_control=='10' || adaptation_field_control=='11
-'){ adaptation_field() }
-if(adaptation_field_control=='01' || adaptation_field_control=='11') 
-{ for (i=0;i<N;i++){ data_byte 8 bslbf } } } bslbf Bit string, 
-
-pcr is pts in us
-*/
-uint8_t     tsMuxer::writePacket(uint8_t *data, uint32_t len, uint64_t pcr,channel *chan,uint8_t start)
-{
-
-uint32_t i=0,val=0,fill=0,fre;
-entryPacket *paket;
-uint8_t *pkt;
-
-    if(start)
-      if(((packetTail+TS_NB_PACKET-packetHead)%TS_NB_PACKET)>TS_NB_PACKET/4)
-      {  
-            flushPackets(0);    
-      }
-     
-    //ADM_assert(len<TS_PACKET_SIZE-3);
-    if(!packetSincePAT)
-    {
-        packetSincePAT++;
-        writePat();
-        writePmt();
-    }
-    else
-        packetSincePAT++;
-    packetSincePAT%=TS_PAT_EVERY_PACKET;
-    
-    //
-    paket=getPacket();
-    paket->pts=pcr;
-    pkt=paket->packet;
-
-    // Here we go
-
-        // Will we fill the packet
-        fre=TS_PACKET_SIZE-TS_HEADER_LEN;
-        if(start)       fre--;  // offset
-        if(pcr!=TS_NO_PCR) fre-=8;
-        if(len<fre) // We won't fill the packet
-        {
-                fill=fre-len;
-        }
-
-    pkt[i++]=0x47;
-    if(start) val=TS_UNIT_START; // Start ?
-            else val=0;
-    pkt[i++]=val+((chan->pid)>>8);
-    pkt[i++]=(chan->pid)&0xff;
-   
-    if(pcr!=TS_NO_PCR || fill)
-        val=TS_UNIT_PAYLOAD_AF;     // if me put a pcr, we need to say there is
-                                    // an adaption field
-    else
-        val=TS_UNIT_PAYLOAD_ONLY;
-    pkt[i++]=val+(chan->counter&0xf);  // Payload only
-    chan->counter++;
-    if(pcr!=TS_NO_PCR || fill)
-    {
-        if(pcr!=TS_NO_PCR)
-        {
-        
-                pcr=(pcr*90)/1000;
-                pcr=pcr&0x1FFFFFFFFLL; //mask to avoid overflow
-                pkt[i++]=7+fill;
-                pkt[i++]=0x10; // AF flags
-        
-                pkt[i++]=(pcr>>25)&0xff; // FF
-                pkt[i++]=(pcr>>17)&0xff; // FF
-                pkt[i++]=(pcr>>9)&0xff; // FF
-                pkt[i++]=(pcr>>1)&0xff; // FF
-                pkt[i++]=(pcr<<7)&0x80; // &0x80
-                pkt[i++]=0x00;
-                if(fill)
-                {
-                        memset(pkt+i,0xff,fill);        
-                        i+=fill;
-                }
-        }
-        else
-        {
-                pkt[i++]=fill-1;
-                switch(fill)
-                {
-                        case 1: break;
-                        case 2: pkt[i++]=0;
-                                break;
-                        default:
-                                pkt[i++]=0;
-                                memset(pkt+i,0xff,fill-2);   
-                                i+=fill-2;
-                                break;
-                }
-        }
-     }
-
-    
-    if(start) pkt[i++]=0; // pointer field
-    uint32_t left=TS_PACKET_SIZE-i;
-    ADM_assert(len>=left);
-    memcpy(pkt+i,data,left);
-    return left;
-}
-
-uint32_t mpegTsCRC(uint8_t *data, uint32_t len)
-{
-    int i;
-    uint32_t crc = 0xffffffff;
-    
-    for (i=0; i<len; i++)
-        crc = (crc << 8) ^ crc_table[((crc >> 24) ^ *data++) & 0xff];
-    
-    return crc;
-}
-/*****************************/
-entryPacket *tsMuxer::getPacket( void)
-{
- 
- entryPacket *r=&packetPipe[packetTail++];
- packetTail%=TS_NB_PACKET;
- ADM_assert(packetTail!=packetHead);
- return r;   
-}
-
-uint8_t tsMuxer::open(const char *filename,uint32_t inbitrate, ADM_MUXER_TYPE type, aviInfo *info, WAVHeader *audioheader)
-{
-    ADM_assert(type==MUXER_TS);
-    outFile=fopen(filename,"wb");
-    if(!outFile)
-    {
-        printf("TS:Cannot open for write\n");
-        return 0; 
-    }
-    memcpy(&_info,info,sizeof(_info));
-    memcpy(&_wavHeader,audioheader,sizeof(_wavHeader));
-    
-    return 1;
-}
-uint8_t tsMuxer::close( void)
-{
-    flushPackets(1);    
-    if(outFile) fclose(outFile);
-    outFile=NULL;
-    return 1;
-}
-uint8_t tsMuxer::forceRestamp(void)
-{
-    return 1;
-}
-uint8_t tsMuxer::audioEmpty( void)
-{
-    return 0;
-}
-uint8_t tsMuxer::needAudio(void)
-{
-	
-    double f;
-    uint64_t pts;
-    // all computation is in us
-    uint32_t one=(1000*1000*1000)/_info.fps1000;
-    
-            pts=audioTime(audioFill);
-            aprintf("Need audio  ?: %llu / %llu : %llu\n ",pts,_curPTS,_curPTS+one);
-            if((pts>=_curPTS) && (pts<=_curPTS+one)) return 1;
-            if(pts<=_curPTS)
-            {
-                    printf("tsMuxer:Audio DTS is too low %llu / %llu!\n",pts,_curPTS);
-                    return 1;
-            }
-            return 0;
-}
-/*
-    Write the program Access Table
-    In our case it is pretty simple as we have one video and one audio
-    in one PMT
-    We assume it fits in one TS packet
-
-    8 :Table id
-    1 :Section syntax indicator (1 for PAT)
-    1: 0
-    2: 11
-    12: length
-    16: Transport ID
-    2 : 11
-    5: Version number
-    1: current next indicator
-    8 : : section number
-    8:last section number
-        8: Program number
-        3: 111
-        13: Nit pid
-    32 : CRC    
-*/
-uint8_t tsMuxer::writeSection( uint32_t pid,channel *chan, 
-                                uint8_t *data, uint32_t len)
-{
-    uint8_t packet[1024];
-    uint32_t i=0,sectionLen=0,crc;
-    
-    sectionLen=len+4+5; // Includes header & crc
-    
-    packet[i++]=chan->tableId;
-    packet[i++]=0xb0+(sectionLen>>8);
-    packet[i++]=0x00+(sectionLen&0xff);
-    packet[i++]=chan->sectionId>>8;     // For PMT: Program number
-    packet[i++]=chan->sectionId&0xff;
-    packet[i++]=0xc1;   // Table is applicable
-    packet[i++]=0;      // section  number
-    packet[i++]=0;      // last section number
-    
-    memcpy(packet+i,data,len);
-    i+=len;
-    //ADM_assert(len<TS_PACKET_SIZE-3);
-    // and CRC
-    crc= mpegTsCRC(packet,i);
-    packet[i++]=(crc>>24)&0xff;
-    packet[i++]=(crc>>16)&0xff;
-    packet[i++]=(crc>>8)&0xff;
-    packet[i++]=(crc    )&0xff;
-   
-  //  writePacket(packet,i,NO_PCR);
-    writePacket(packet, i, TS_NO_PCR,chan,1);
-    return 1;
-}
-uint8_t tsMuxer::writePat( void)
-{
-uint8_t data[1024];
-uint32_t i=0,sid=1;
-
-        sid=pmt.sectionId;
-        data[i++]=sid>>8;                
-        data[i++]=sid&0xff;                        
-        data[i++]=0xe0+((pmt.pid)>>8);                
-        data[i++]=(pmt.pid)&0xff;    
-        return writeSection(pat.pid,&pat,data,4);                    
-                                
-}   
-uint8_t tsMuxer::writePmt( void)
-{
-uint8_t data[1024];
-uint32_t i=0,sid=1;
-
-        data[i++]=0xE0+(videoChannel.pid>>8);  // PCR pid locked on audio             
-        data[i++]=videoChannel.pid&0xff;       //                 
-        data[i++]=0xf0;  // info length              
-        data[i++]=0;  // info length   
-        //-- Video --
-        data[i++]=0x02; // Mpeg2 video
-        data[i++]=0xE0+(videoChannel.pid>>8); // pid
-        data[i++]=(videoChannel.pid&0xff); 
-        data[i++]=0xF0; // no descriptor
-        data[i++]=3;    // Stream descriptor
-        data[i++]=0x52;    
-        data[i++]=1;    
-        data[i++]=1;    
-        //-- Audio --
-        if(_wavHeader.encoding==WAV_AC3)
-            data[i++]=0x81; // ac3
-        else
-            data[i++]=0x03; // Mpeg2 audio
-        data[i++]=0xE0+(audioChannel.pid>>8); // pid
-        data[i++]=(audioChannel.pid&0xff); 
-        data[i++]=0xF0; // no descriptor
-        data[i++]=3+6;    // Stream descriptor
-        data[i++]=0x52;    
-        data[i++]=1;    
-        data[i++]=2;    
-        data[i++]=0x0a; // Language    
-        data[i++]=4;    
-        data[i++]='e';    
-        data[i++]='n';    
-        data[i++]='g';    
-        data[i++]=0x02;     // Hearing impaired ?
-        
-        
-/*        data[2]=0xF0+((i-4)>>8);
-        data[3]=((i-4)&0xff);
-*/        
-        return writeSection(pmt.pid,&pmt,data,i);                          
-                                
-} 
-uint8_t tsMuxer::pes2ts(channel *chan,uint64_t pcr,uint8_t tim )
-{
-        uint32_t part=0,l;
-        uint32_t out=PES_BUFFER;
-        uint8_t *data=pesBuffer;
-        while(out)
-        {
-                if(!part && tim)
-                {
-                        l=writePacket(data,out,pcr,chan,1);
-                }
-                else
-                        l=writePacket(data,out,TS_NO_PCR,chan,0);
-                out-=l;
-                data+=l;
-                part++;
-        }
-        return 1;
-}
-uint8_t tsMuxer::writeVideoPacket(ADMBitstream *bitstream )
-{
-#define MAX_PES 64000
-uint32_t l,len;
-uint8_t *buf;
-
-       //writeAudioPacket2();
-       _curPTS=videoTime(bitstream->dtsFrame); 
-       len=bitstream->len;
-       buf=bitstream->data;
-       while(len)
-       {
-                if(len>MAX_PES)
-                        l=MAX_PES;
-                else
-                    l=len;
-                if(!writeVideoPacket2(l,buf, bitstream->dtsFrame, bitstream->ptsFrame ))
-                {
-                    return 0;    
-                }
-                len-=l;
-                buf+=l;
-        }
-        return 1;
-
-}                                  
-uint8_t tsMuxer::writeVideoPacket2(uint32_t len, uint8_t *buf,uint32_t frameno,uint32_t displayframe )
-{
-    
-    uint8_t  *data;
-    uint32_t pes_len;
-    uint64_t its;
-    double d;
-    uint32_t left,part=1;
-    
-//#define IGNORE_PTS
-        
-#ifdef IGNORE_PTS
-        displayframe=frameno+1;
-#endif    
-
-    // First packet    
-    while(len)
-    {
-            
-            // we build header & pts separately
-            //
-            uint32_t i=0,left;
-            data=pesBuffer;
-            if(part)
-            {
-            
-                //data[i++]=0x00;
-                data[i++]=0x00;
-                data[i++]=0x01;
-                data[i++]=0xe0;   // video id
-                pes_len=len+3+10;  // PES header
-                data[i++]=pes_len>>8;
-                data[i++]=pes_len & 0xff;
-                data[i++]=0x80; // mpeg2
-           
-                data[i++]=0x80+0x40; // PTS + dts
-                data[i++]=10;    // PTS LEN
-            
-                // pts
-                
-                its=videoTime(displayframe);
-                writePts(data+i,its,3);
-                data[i]|=0x10;
-                i+=5;
-                // dts
-                its=videoTime(frameno);
-                writePts(data+i,its,1);
-                i+=5;                
-
-                left=TS_PACKET_SIZE-i;
-                if(left>len)
-                {
-                      left=len;
-
-                }
-                memcpy(data+i,buf,left);                      
-                left=writePacket(data, i+len, its,&videoChannel,1);
-                left=left-i;
-            }
-            else
-            {
-                left=writePacket(buf, len, TS_NO_PCR,&videoChannel,0);
-            }
-
-            buf+=left;
-            len-=left;                   
-            part=0;
-     }    
-    return 1;
-}
-/* Return time elapsed for video in us */
-uint64_t tsMuxer::videoTime( uint32_t frameno)
-{
-double d;
-uint64_t p;
-    d=frameno;		// dts
-    d=(d*1000*1000*1000);
-    d=d/_info.fps1000; // in usec
-    
-    p= (uint64_t)floor(d);
-   
-    return p;
-}    
-/* Return time elapsed for audio in us */
-uint64_t tsMuxer::audioTime( uint32_t fill)
-{
-double f;
-uint64_t d;
-    f=_total+fill;
-     f*=1000.*1000.;  // in us
-     f/=(_wavHeader.byterate);   
-     d= (uint64_t)floor(f);
-     
-     return d;
-}
-uint8_t tsMuxer::writeAudioPacket(uint32_t len, uint8_t *buf)
-{
-        memcpy(audioBuffer+audioFill,buf,len);
-        audioFill+=len;
-        audioPacket++;
-        ADM_assert(audioFill<AUDIO_BUFFER);
-        if(audioPacket>=MUX_EVERY_N_AUDIO_FRAMES)
-        {
-                writeAudioPacket2();
-                audioPacket%=MUX_EVERY_N_AUDIO_FRAMES;
-        }
-        return 1;        
-}
-uint8_t tsMuxer::writeAudioPacket2(void)
-{
-    uint32_t part=1;
-    uint8_t  *data; // should be enough for one frame...    
-    uint64_t ipts;   
-    uint32_t left,pes_len;
-    uint8_t  *buf=audioBuffer;
-    uint32_t len=audioFill,org=audioFill;    
-    uint64_t its;
-
-    if(!audioFill) return 1; // nothing to do
-
-
-     while(len)
-    {
-            
-            // we build header & pts separately
-            //
-            uint32_t i=0,left;
-            data=pesBuffer;
-            if(part)
-            {
-            
-                //data[i++]=0x00;
-                data[i++]=0x00;
-                data[i++]=0x01;
-               // data[i++]=0xc0;   // video id
-                if(_wavHeader.encoding==WAV_AC3)
-                {
-                        data[i++]=0xbd;   // audio id
-                }
-                else
-                        data[i++]=0xc0;   // audio id
-
-                pes_len=len+3+5;  // PES header
-                data[i++]=pes_len>>8;
-                data[i++]=pes_len & 0xff;
-                data[i++]=0x80; // mpeg2            
-                data[i++]=0x80; // PTS 
-                data[i++]=5;    // PTS LEN
-            
-                // pts
-                its=audioTime(0);
-                writePts(data+i,its,2);
-                i+=5;                             
-            
-                left=TS_PACKET_SIZE-i;
-                if(left>len)
-                {
-                      left=len;
-
-                }
-                memcpy(data+i,buf,left);                      
-                left=writePacket(data, i+len, its,&audioChannel,1);
-                left=left-i;
-            }
-            else
-            {
-                left=writePacket(buf, len, TS_NO_PCR,&audioChannel,0);
-            }
-
-            buf+=left;
-            len-=left;                   
-            part=0;
-     }    
-   
-     audioFill=0;
-     _total+=org;
-     return 1;
-}
-/*
-    ipts is is us
-*/
-/*
-        flags : PTS only = 2 PTS+DTS=3 DTS=1
-
-*/
-uint8_t writePts(uint8_t *data,uint64_t ipts,uint32_t flags)
-{
-uint32_t i=0;
-uint64_t p;
-            ipts=ipts&0xfffffffffLL; // clip to 36 bits 33 bits *8 before clipping
-            ipts=(ipts*90)/1000;
-            
-            data[i++]=(flags << 4) | (((ipts >> 30) & 0x07) << 1) | 1;
-            p=(((ipts >> 15) & 0x7fff) << 1) | 1;
-            data[i++]=p>>8;
-            data[i++]=p&0xff;
-            p=(((ipts) & 0x7fff) << 1) | 1;
-            data[i++]=p>>8;
-            data[i++]=p&0xff;
-}
-// EOF

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/ADM_tscrc.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavformat/ADM_tscrc.h	2008-03-15 11:42:55 UTC (rev 3894)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/ADM_tscrc.h	2008-03-15 15:52:19 UTC (rev 3895)
@@ -1,45 +0,0 @@
-static const uint32_t crc_table[256] = {
-	0x00000000, 0x04c11db7, 0x09823b6e, 0x0d4326d9, 0x130476dc, 0x17c56b6b,
-	0x1a864db2, 0x1e475005, 0x2608edb8, 0x22c9f00f, 0x2f8ad6d6, 0x2b4bcb61,
-	0x350c9b64, 0x31cd86d3, 0x3c8ea00a, 0x384fbdbd, 0x4c11db70, 0x48d0c6c7,
-	0x4593e01e, 0x4152fda9, 0x5f15adac, 0x5bd4b01b, 0x569796c2, 0x52568b75,
-	0x6a1936c8, 0x6ed82b7f, 0x639b0da6, 0x675a1011, 0x791d4014, 0x7ddc5da3,
-	0x709f7b7a, 0x745e66cd, 0x9823b6e0, 0x9ce2ab57, 0x91a18d8e, 0x95609039,
-	0x8b27c03c, 0x8fe6dd8b, 0x82a5fb52, 0x8664e6e5, 0xbe2b5b58, 0xbaea46ef,
-	0xb7a96036, 0xb3687d81, 0xad2f2d84, 0xa9ee3033, 0xa4ad16ea, 0xa06c0b5d,
-	0xd4326d90, 0xd0f37027, 0xddb056fe, 0xd9714b49, 0xc7361b4c, 0xc3f706fb,
-	0xceb42022, 0xca753d95, 0xf23a8028, 0xf6fb9d9f, 0xfbb8bb46, 0xff79a6f1,
-	0xe13ef6f4, 0xe5ffeb43, 0xe8bccd9a, 0xec7dd02d, 0x34867077, 0x30476dc0,
-	0x3d044b19, 0x39c556ae, 0x278206ab, 0x23431b1c, 0x2e003dc5, 0x2ac12072,
-	0x128e9dcf, 0x164f8078, 0x1b0ca6a1, 0x1fcdbb16, 0x018aeb13, 0x054bf6a4,
-	0x0808d07d, 0x0cc9cdca, 0x7897ab07, 0x7c56b6b0, 0x71159069, 0x75d48dde,
-	0x6b93dddb, 0x6f52c06c, 0x6211e6b5, 0x66d0fb02, 0x5e9f46bf, 0x5a5e5b08,
-	0x571d7dd1, 0x53dc6066, 0x4d9b3063, 0x495a2dd4, 0x44190b0d, 0x40d816ba,
-	0xaca5c697, 0xa864db20, 0xa527fdf9, 0xa1e6e04e, 0xbfa1b04b, 0xbb60adfc,
-	0xb6238b25, 0xb2e29692, 0x8aad2b2f, 0x8e6c3698, 0x832f1041, 0x87ee0df6,
-	0x99a95df3, 0x9d684044, 0x902b669d, 0x94ea7b2a, 0xe0b41de7, 0xe4750050,
-	0xe9362689, 0xedf73b3e, 0xf3b06b3b, 0xf771768c, 0xfa325055, 0xfef34de2,
-	0xc6bcf05f, 0xc27dede8, 0xcf3ecb31, 0xcbffd686, 0xd5b88683, 0xd1799b34,
-	0xdc3abded, 0xd8fba05a, 0x690ce0ee, 0x6dcdfd59, 0x608edb80, 0x644fc637,
-	0x7a089632, 0x7ec98b85, 0x738aad5c, 0x774bb0eb, 0x4f040d56, 0x4bc510e1,
-	0x46863638, 0x42472b8f, 0x5c007b8a, 0x58c1663d, 0x558240e4, 0x51435d53,
-	0x251d3b9e, 0x21dc2629, 0x2c9f00f0, 0x285e1d47, 0x36194d42, 0x32d850f5,
-	0x3f9b762c, 0x3b5a6b9b, 0x0315d626, 0x07d4cb91, 0x0a97ed48, 0x0e56f0ff,
-	0x1011a0fa, 0x14d0bd4d, 0x19939b94, 0x1d528623, 0xf12f560e, 0xf5ee4bb9,
-	0xf8ad6d60, 0xfc6c70d7, 0xe22b20d2, 0xe6ea3d65, 0xeba91bbc, 0xef68060b,
-	0xd727bbb6, 0xd3e6a601, 0xdea580d8, 0xda649d6f, 0xc423cd6a, 0xc0e2d0dd,
-	0xcda1f604, 0xc960ebb3, 0xbd3e8d7e, 0xb9ff90c9, 0xb4bcb610, 0xb07daba7,
-	0xae3afba2, 0xaafbe615, 0xa7b8c0cc, 0xa379dd7b, 0x9b3660c6, 0x9ff77d71,
-	0x92b45ba8, 0x9675461f, 0x8832161a, 0x8cf30bad, 0x81b02d74, 0x857130c3,
-	0x5d8a9099, 0x594b8d2e, 0x5408abf7, 0x50c9b640, 0x4e8ee645, 0x4a4ffbf2,
-	0x470cdd2b, 0x43cdc09c, 0x7b827d21, 0x7f436096, 0x7200464f, 0x76c15bf8,
-	0x68860bfd, 0x6c47164a, 0x61043093, 0x65c52d24, 0x119b4be9, 0x155a565e,
-	0x18197087, 0x1cd86d30, 0x029f3d35, 0x065e2082, 0x0b1d065b, 0x0fdc1bec,
-	0x3793a651, 0x3352bbe6, 0x3e119d3f, 0x3ad08088, 0x2497d08d, 0x2056cd3a,
-	0x2d15ebe3, 0x29d4f654, 0xc5a92679, 0xc1683bce, 0xcc2b1d17, 0xc8ea00a0,
-	0xd6ad50a5, 0xd26c4d12, 0xdf2f6bcb, 0xdbee767c, 0xe3a1cbc1, 0xe760d676,
-	0xea23f0af, 0xeee2ed18, 0xf0a5bd1d, 0xf464a0aa, 0xf9278673, 0xfde69bc4,
-	0x89b8fd09, 0x8d79e0be, 0x803ac667, 0x84fbdbd0, 0x9abc8bd5, 0x9e7d9662,
-	0x933eb0bb, 0x97ffad0c, 0xafb010b1, 0xab710d06, 0xa6322bdf, 0xa2f33668,
-	0xbcb4666d, 0xb8757bda, 0xb5365d03, 0xb1f740b4
-};

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavformat/CMakeLists.txt	2008-03-15 11:42:55 UTC (rev 3894)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/CMakeLists.txt	2008-03-15 15:52:19 UTC (rev 3895)
@@ -1,14 +1,13 @@
-SET(ADM_LIB ADM_lavformat)
+SET(ADM_LIB ADM_libavformat)
 
 SET(${ADM_LIB}_SRCS 
-	mpeg.c utils.c avio.c ADM_lavformat.cpp 
-	aviobuf.c cutils.c img2.c file.c mpegtsenc.c ADM_muxts.cpp movenc.c 
-	avienc.c wav.c mov.c matroska.c isom.c isom.h riff.c
-	flvenc.c matroskaenc.c)
+	mpeg.c  utils.c  avio.c  aviobuf.c  cutils.c  img2.c  file.c  mpegtsenc.c
+	movenc.c  avienc.c  wav.c  mov.c  matroska.c  isom.c  isom.h  riff.c
+	flvenc.c  matroskaenc.c)
 
-ADD_ADM_LIB_ALL_TARGETS(${ADM_LIB} ${${ADM_LIB}_SRCS})
-ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "-I../ADM_lavcodec -I../ADM_lavutil -DHAVE_AV_CONFIG_H -include ffconf.h")
+ADD_LIBRARY(${ADM_LIB} SHARED ${${ADM_LIB}_SRCS})
+ADD_TARGET_CFLAGS(${ADM_LIB} "-I../ADM_lavcodec -I../ADM_lavutil -DHAVE_AV_CONFIG_H")
 
-INCLUDE(admLibFfmpeg)
-GET_FFMPEG_CFLAGS(FFMPEG_CFLAGS)
-ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "${FFMPEG_CFLAGS}")
\ No newline at end of file
+TARGET_LINK_LIBRARIES(${ADM_LIB} ADM_core ADM_libavutil ADM_libavcodec)
+
+INSTALL(TARGETS ${ADM_LIB} RUNTIME DESTINATION ${BIN_DIR} LIBRARY DESTINATION lib)
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/movenc.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavformat/movenc.c	2008-03-15 11:42:55 UTC (rev 3894)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/movenc.c	2008-03-15 15:52:19 UTC (rev 3895)
@@ -270,7 +270,8 @@
   //MEANX  put_byte(pb, codec_get_tag(ff_mp4_obj_type, track->enc->codec_id));
  // MEANX
     codec_id=track->enc->codec_id;
-    if(ADM_useAlternateTagging() && codec_id==CODEC_ID_MP3) codec_id=CODEC_ID_MP2;
+#warning useAlternateTagging disabled
+    //if(ADM_useAlternateTagging() && codec_id==CODEC_ID_MP3) codec_id=CODEC_ID_MP2;
     put_byte(pb, codec_get_tag(ff_mp4_obj_type, codec_id));
     // /MEANX
 

Copied: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavutil (from rev 3894, branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavutil)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavutil/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavutil/CMakeLists.txt	2008-03-15 11:42:55 UTC (rev 3894)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavutil/CMakeLists.txt	2008-03-15 15:52:19 UTC (rev 3895)
@@ -1,12 +1,10 @@
-SET(ADM_LIB ADM_lavutil)
+SET(ADM_LIB ADM_libavutil)
 
 SET(${ADM_LIB}_SRCS 
-	integer.c  intfloat_readwrite.c  mathematics.c  rational.c md5.c crc.c log.c  adler32.c lls.c random.c
-	string.c)
+	integer.c  intfloat_readwrite.c  mathematics.c  rational.c  md5.c  crc.c
+	log.c  adler32.c  lls.c  random.c  string.c)
 
-ADD_ADM_LIB_ALL_TARGETS(${ADM_LIB} ${${ADM_LIB}_SRCS})
-ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "-DHAVE_AV_CONFIG_H -include ffconf.h")
+ADD_LIBRARY(${ADM_LIB} SHARED ${${ADM_LIB}_SRCS})
+ADD_TARGET_CFLAGS(${ADM_LIB} "-DHAVE_AV_CONFIG_H")
 
-INCLUDE(admLibFfmpeg)
-GET_FFMPEG_CFLAGS(FFMPEG_CFLAGS)
-ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "${FFMPEG_CFLAGS}")
\ No newline at end of file
+INSTALL(TARGETS ${ADM_LIB} RUNTIME DESTINATION ${BIN_DIR} LIBRARY DESTINATION lib)
\ No newline at end of file

Copied: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libpostproc (from rev 3894, branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libpostproc)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libpostproc/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libpostproc/CMakeLists.txt	2008-03-15 11:42:55 UTC (rev 3894)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libpostproc/CMakeLists.txt	2008-03-15 15:52:19 UTC (rev 3895)
@@ -1,15 +1,14 @@
 SET(ADM_LIB ADM_libpostproc)
 
-SET(${ADM_LIB}_SRCS 
-	postprocess.c)
+SET(${ADM_LIB}_SRCS postprocess.c)
 
-ADD_ADM_LIB_ALL_TARGETS(${ADM_LIB} ${${ADM_LIB}_SRCS})
-ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "-I.. -DHAVE_AV_CONFIG_H  -O3 -I../.. -I../ADM_lavutil -Drestrict=__restrict__ -fomit-frame-pointer -include ffconf.h")
+ADD_LIBRARY(${ADM_LIB} SHARED ${${ADM_LIB}_SRCS})
+ADD_TARGET_CFLAGS(${ADM_LIB} "-I.. -DHAVE_AV_CONFIG_H  -O3 -I../.. -I../ADM_lavutil -Drestrict=__restrict__ -fomit-frame-pointer")
 
 IF(ADM_CPU_X86_64)
-	ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "-msse")
+	ADD_TARGET_CFLAGS(${ADM_LIB} "-msse")
 ENDIF(ADM_CPU_X86_64)
 
-INCLUDE(admLibFfmpeg)
-GET_FFMPEG_CFLAGS(FFMPEG_CFLAGS)
-ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "${FFMPEG_CFLAGS}")
\ No newline at end of file
+TARGET_LINK_LIBRARIES(${ADM_LIB} ADM_core ADM_libavutil)
+
+INSTALL(TARGETS ${ADM_LIB} RUNTIME DESTINATION ${BIN_DIR} LIBRARY DESTINATION lib)
\ No newline at end of file

Copied: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale (from rev 3894, branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libswscale)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/ADM_mp.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libswscale/ADM_mp.cpp	2008-03-15 11:42:55 UTC (rev 3894)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/ADM_mp.cpp	2008-03-15 15:52:19 UTC (rev 3895)
@@ -23,12 +23,12 @@
 
 #ifdef ADM_CPU_X86
 extern "C" {
-#include "ADM_libraries/ADM_lavcodec/avcodec.h"
+#include "ADM_libraries/ADM_ffmpeg/ADM_lavcodec/avcodec.h"
 }
 #endif
 
-#include "ADM_libraries/ADM_lavutil/avutil.h"
-#include "ADM_libraries/ADM_libswscale/swscale.h"
+#include "ADM_libraries/ADM_ffmpeg/ADM_lavutil/avutil.h"
+#include "ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale.h"
 
 
 #include "ADM_mp.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libswscale/CMakeLists.txt	2008-03-15 11:42:55 UTC (rev 3894)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/CMakeLists.txt	2008-03-15 15:52:19 UTC (rev 3895)
@@ -5,17 +5,17 @@
 	SET(${ADM_LIB}_SRCS ${${ADM_LIB}_SRCS} yuv2rgb_altivec.c)
 ENDIF (ADM_CPU_ALTIVEC)
 	
-ADD_ADM_LIB_ALL_TARGETS(${ADM_LIB} ${${ADM_LIB}_SRCS})
-ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "-DCONFIG_GPL -fomit-frame-pointer -include ffconf.h")
+ADD_LIBRARY(${ADM_LIB} SHARED ${${ADM_LIB}_SRCS})
+ADD_TARGET_CFLAGS(${ADM_LIB} "-DCONFIG_GPL -fomit-frame-pointer")
 
 IF (APPLE)
-	ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "-DPIC")
+	ADD_TARGET_CFLAGS(${ADM_LIB} "-DPIC")
 	
 	IF (ADM_DEBUG)
-		ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "-O2")
+		ADD_TARGET_CFLAGS(${ADM_LIB} "-O2")
 	ENDIF (ADM_DEBUG)
 ENDIF (APPLE)
 
-INCLUDE(admLibFfmpeg)
-GET_FFMPEG_CFLAGS(FFMPEG_CFLAGS)
-ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "${FFMPEG_CFLAGS}")
\ No newline at end of file
+TARGET_LINK_LIBRARIES(${ADM_LIB} ADM_core ADM_libavutil)
+
+INSTALL(TARGETS ${ADM_LIB} RUNTIME DESTINATION ${BIN_DIR} LIBRARY DESTINATION lib)
\ No newline at end of file

Added: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/CMakeLists.txt	2008-03-15 11:42:55 UTC (rev 3894)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/CMakeLists.txt	2008-03-15 15:52:19 UTC (rev 3895)
@@ -0,0 +1,35 @@
+IF (ADM_CPU_X86_32)
+	ADD_DEFINITIONS("-DARCH_X86 -DARCH_X86_32")
+ELSEIF (ADM_CPU_X86_64)
+	ADD_DEFINITIONS("-DARCH_X86 -DARCH_X86_64")
+ELSEIF (ADM_CPU_PPC)
+	ADD_DEFINITIONS("-DARCH_POWERPC")
+
+	IF (ADM_CPU_ALTIVEC)
+		ADD_DEFINITIONS("-DHAVE_ALTIVEC")
+
+		IF (NOT APPLE)
+			ADD_DEFINITIONS("-DHAVE_ALTIVEC_H")
+		ENDIF (NOT APPLE)
+	ENDIF (ADM_CPU_ALTIVEC)
+
+	IF (ADM_CPU_DCBZL)
+		ADD_DEFINITIONS("-DHAVE_DCBZL")
+	ENDIF (ADM_CPU_DCBZL)
+ENDIF (ADM_CPU_X86_32)
+
+IF (ADM_CPU_SSSE3)
+	ADD_DEFINITIONS("-DHAVE_SSSE3")
+ENDIF (ADM_CPU_SSSE3)
+
+IF (ADM_BIG_ENDIAN)
+	ADD_DEFINITIONS("-DWORDS_BIGENDIAN")
+ENDIF (ADM_BIG_ENDIAN)
+
+INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR})
+
+ADD_SUBDIRECTORY(ADM_lavcodec)
+ADD_SUBDIRECTORY(ADM_lavformat)
+ADD_SUBDIRECTORY(ADM_lavutil)
+ADD_SUBDIRECTORY(ADM_libswscale)
+ADD_SUBDIRECTORY(ADM_libpostproc)
\ No newline at end of file

Copied: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/config.h (from rev 3894, branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavcodec/ffconf.h)

Copied: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ffconf.c (from rev 3894, branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavcodec/ffconf.c)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libMpeg2Dec/ADM_mpeg2dec.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libMpeg2Dec/ADM_mpeg2dec.cpp	2008-03-15 11:42:55 UTC (rev 3894)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libMpeg2Dec/ADM_mpeg2dec.cpp	2008-03-15 15:52:19 UTC (rev 3895)
@@ -12,7 +12,7 @@
 #include "ADM_default.h"
 #ifdef ADM_CPU_X86
 #include "ADM_libraries/ADM_libMpeg2Dec/mpeg2_cpu.h"
-#include "ADM_libraries/ADM_lavcodec/dsputil_cpu.h"
+#include "ADM_libraries/ADM_ffmpeg/ADM_lavcodec/dsputil_cpu.h"
 #include "ADM_cpuCap.h"
 #endif
 extern "C"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mplexmuxer.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mplexmuxer.cpp	2008-03-15 11:42:55 UTC (rev 3894)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mplexmuxer.cpp	2008-03-15 15:52:19 UTC (rev 3895)
@@ -38,7 +38,7 @@
 #include "avifmt.h"
 #include "avifmt2.h"
 #include "ADM_editor/ADM_Video.h"
-#include "ADM_libraries/ADM_lavformat/ADM_lavformat.h"
+#include "ADM_outputs/ADM_lavformat.h"
 
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME MODULE_LAVFORMAT

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mthread.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mthread.cpp	2008-03-15 11:42:55 UTC (rev 3894)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mthread.cpp	2008-03-15 15:52:19 UTC (rev 3895)
@@ -22,8 +22,6 @@
 #include "ADM_default.h"
 #include "ADM_threads.h"
 
-
-
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
@@ -32,7 +30,7 @@
 #include "ADM_userInterfaces/ADM_commonUI/DIA_encoding.h"
 #include "ADM_audiofilter/audioprocess.hxx"
 #include "ADM_audiofilter/audioeng_buildfilters.h"
-#include "ADM_libraries/ADM_lavformat/ADM_lavformat.h"
+#include "ADM_outputs/ADM_lavformat.h"
 #include "ADM_mthread.h"
 
 admMutex accessMutex("accessMutex_MT_muxer");

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_imageResizer.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_imageResizer.cpp	2008-03-15 11:42:55 UTC (rev 3894)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_imageResizer.cpp	2008-03-15 15:52:19 UTC (rev 3895)
@@ -23,10 +23,10 @@
 
 #ifdef ADM_CPU_X86
 extern "C" {
-#include "ADM_libraries/ADM_lavcodec/avcodec.h"
+#include "ADM_libraries/ADM_ffmpeg/ADM_lavcodec/avcodec.h"
 }
 #endif
-#include "ADM_libraries/ADM_libswscale/swscale.h"
+#include "ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale.h"
 
 ADMImageResizer::ADMImageResizer(uint32_t ow, uint32_t oh, uint32_t dw, uint32_t dh)
 {

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/CMakeLists.txt	2008-03-15 11:42:55 UTC (rev 3894)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/CMakeLists.txt	2008-03-15 15:52:19 UTC (rev 3895)
@@ -1,9 +1,6 @@
-subdirs (PREORDER ADM_lavcodec)
-subdirs (PREORDER ADM_lavformat)
-subdirs (PREORDER ADM_lavutil)
+subdirs (PREORDER ADM_ffmpeg)
 subdirs (PREORDER ADM_libMpeg2Dec)
 subdirs (PREORDER ADM_libmpeg2enc)
-subdirs (PREORDER ADM_libswscale)
 subdirs (PREORDER ADM_libtwolame)
 subdirs (PREORDER ADM_libwrapper)
 subdirs (PREORDER ADM_lvemux)
@@ -11,7 +8,6 @@
 subdirs (PREORDER ADM_smjs)
 subdirs (PREORDER ADM_utilities)
 subdirs (PREORDER ADM_xvidratectl)
-subdirs (PREORDER ADM_libpostproc)
 
 if(USE_FREETYPE)
 	subdirs (PREORDER ADM_libass)

Copied: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/ADM_lavformat.cpp (from rev 3894, branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavformat/ADM_lavformat.cpp)
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavformat/ADM_lavformat.cpp	2008-03-15 11:42:55 UTC (rev 3894)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/ADM_lavformat.cpp	2008-03-15 15:52:19 UTC (rev 3895)
@@ -0,0 +1,808 @@
+
+// C++ Implementation: ADM_lavformat
+//
+// Description: 
+//
+//
+// Author: mean <fixounet at free.fr>, (C) 2004
+//
+// Copyright: See COPYING file that comes with this distribution
+//
+//
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#include "config.h"
+
+#include <stdio.h>
+#include <stdlib.h>
+#include <math.h>
+#include <string.h>
+
+extern "C" 
+{
+	#include "ADM_libraries/ADM_ffmpeg/ADM_lavformat/avformat.h"
+};
+
+#undef malloc
+#undef realloc
+#undef free
+
+#include "ADM_default.h"
+#include "ADM_toolkit/toolkit.hxx"
+
+#include "ADM_audiofilter/audioprocess.hxx"
+#include "ADM_audio/ADM_a52info.h"
+
+#include "ADM_codecs/ADM_codec.h"
+#include "ADM_editor/ADM_Video.h"
+
+#include "ADM_lavformat.h"
+#include "fourcc.h"
+
+#include "prefs.h"
+#include "ADM_osSupport/ADM_debugID.h"
+#define MODULE_NAME MODULE_LAVFORMAT
+#include "ADM_osSupport/ADM_debug.h"
+
+#include "ADM_cpuCap.h"
+static    AVOutputFormat *fmt;
+static    AVFormatContext *oc;
+static    AVStream *audio_st, *video_st;
+static    double audio_pts, video_pts;
+
+static uint32_t one;
+uint64_t  _curDTS;
+
+static uint8_t ADM_4cc_to_lavcodec(const char *fcc, CodecID *outlavid);
+static uint8_t ADM_WaveTag_to_lavcodec(uint32_t tag, CodecID *outlavid);
+// convert in in us to out in 90Khz tick
+int64_t adm_90k( double in)
+{
+int64_t out;
+	// in=in/1000*1000 us->s
+	// in/=(1/90000) nb 90 khz tick
+	// in*=90*000/000*000
+	// in =  in*=90/000
+	//in=in*90./1000.;
+	out= (int64_t)in;
+	return out;
+}
+//___________________________________________________________________________
+lavMuxer::lavMuxer( void )
+{
+	fmt=NULL;
+	oc=NULL;
+	audio_st=NULL;
+	video_st=NULL;
+	_fps1000=0;
+	_audioByterate=0;
+	_lastAudioDts=0;
+	_frameNo=0;
+	_running=0;
+	_curDTS=0;
+        _audioFq=0;
+}
+//___________________________________________________________________________
+lavMuxer::~lavMuxer()
+{
+	close();
+}
+//___________________________________________________________________________
+uint8_t lavMuxer::open(const char *filename, uint32_t inbitrate,ADM_MUXER_TYPE type, aviInfo *info, WAVHeader *audioheader) 
+{
+        return open(filename,inbitrate,type,info,0,NULL,audioheader,0,NULL);
+}
+
+
+uint8_t lavMuxer::open(const char *filename,uint32_t inbitrate, ADM_MUXER_TYPE type, aviInfo *info,
+              uint32_t videoExtraDataSize, uint8_t *videoExtraData, WAVHeader *audioheader,
+              uint32_t audioextraSize,uint8_t *audioextraData)
+{
+ AVCodecContext *c;
+ 	_type=type;
+	_fps1000=info->fps1000;
+	switch(_type)
+	{
+	case MUXER_TS:
+		fmt=guess_format("mpegts", NULL, NULL);
+		break;
+	case MUXER_DVD:
+		fmt = guess_format("dvd", NULL, NULL);
+		break;
+	case MUXER_VCD:
+		fmt = guess_format("vcd", NULL, NULL);
+		break;
+	case MUXER_SVCD:
+		fmt = guess_format("svcd", NULL, NULL);
+		break;
+	case MUXER_MP4:
+		fmt = guess_format("mp4", NULL, NULL);
+		break;
+	case MUXER_PSP:
+		fmt = guess_format("psp", NULL, NULL);
+		break;
+	case MUXER_FLV:
+		fmt = guess_format("flv", NULL, NULL);
+		break;          
+	case MUXER_MATROSKA:
+		fmt = guess_format("matroska", NULL, NULL);
+		break;          
+
+	default:
+		fmt=NULL;
+	}
+	if (!fmt) 
+	{
+        	printf("Lav:Cannot guess format\n");
+                ADM_assert(0);
+		return 0;
+	}
+	oc = av_alloc_format_context();
+	if (!oc) 
+	{
+       		printf("Lav:Cannot allocate context\n");
+		return 0;
+	}
+	oc->oformat = fmt;
+	snprintf(oc->filename,1000,"file://%s",filename);
+	// Video
+	//________
+	
+	video_st = av_new_stream(oc, 0);
+	if (!video_st) 
+	{
+		printf("Lav: new stream failed\n");
+		return 0;
+	}	
+	
+	c = video_st->codec;
+	switch(_type)
+	{
+				case MUXER_FLV:
+					 c->codec=new AVCodec;
+					 memset(c->codec,0,sizeof(AVCodec));
+					 if(fourCC::check(info->fcc,(uint8_t *)"FLV1"))
+					 {
+						 c->codec_id=CODEC_ID_FLV1;
+					 	 c->codec->name=ADM_strdup("FLV1");
+					 }else
+					 {
+						 if(fourCC::check(info->fcc,(uint8_t *)"VP6F"))
+						 			{
+							 		 c->codec_id=CODEC_ID_VP6F;
+					 				 c->codec->name=ADM_strdup("VP6F");
+						 			}
+						 else
+							 ADM_assert(0);
+					 
+					 }
+					 
+					 break;
+                case MUXER_MATROSKA:
+                        strcpy(oc->title,"Avidemux");
+                        strcpy(oc->author,"Avidemux");
+                        c->sample_aspect_ratio.num=1;
+                        c->sample_aspect_ratio.den=1;
+                        if(isMpeg4Compatible(info->fcc))
+                        {
+                                c->codec_id = CODEC_ID_MPEG4;
+                                c->has_b_frames=1; // in doubt...
+                        }else
+                        {
+                                if(isH264Compatible(info->fcc))
+                                {
+                                        c->has_b_frames=1; // in doubt...
+                                        c->codec_id = CODEC_ID_H264;
+                                        c->codec=new AVCodec;
+                                        memset(c->codec,0,sizeof(AVCodec));
+                                        c->codec->name=ADM_strdup("H264");
+                                }
+                                else
+                                {
+                                   if(!ADM_4cc_to_lavcodec((const char *)&(info->fcc),&(c->codec_id)))
+                                   {
+                                      printf("[lavFormat] Cannot map  this\n");
+                                      return 0;
+                                   }
+                                  
+                                }
+                        }
+                        if(videoExtraDataSize)
+                        {
+                                c->extradata=videoExtraData;
+                                c->extradata_size= videoExtraDataSize;
+                        }
+                        break;
+                case MUXER_MP4:
+                case MUXER_PSP:
+                {
+                        // probably a memeleak here
+                        char *foo=ADM_strdup(filename);
+                        
+                        strcpy(oc->title,ADM_GetFileName(foo));
+                        strcpy(oc->author,"Avidemux");
+                        c->sample_aspect_ratio.num=1;
+                        c->sample_aspect_ratio.den=1;
+                        if(isMpeg4Compatible(info->fcc))
+                        {
+                                c->codec_id = CODEC_ID_MPEG4;
+                                c->has_b_frames=1; // in doubt...
+                        }else
+                        {
+                                if(isH264Compatible(info->fcc))
+                                {
+                                        c->has_b_frames=1; // in doubt...
+                                        c->codec_id = CODEC_ID_H264;
+                                        c->codec=new AVCodec;
+                                        memset(c->codec,0,sizeof(AVCodec));
+                                        c->codec->name=ADM_strdup("H264");
+                                }
+                                else
+                                {
+                                        if(isDVCompatible(info->fcc))
+                                        {
+                                          c->codec_id = CODEC_ID_DVVIDEO;
+                                        }else
+                                        {
+                                          if(fourCC::check(info->fcc,(uint8_t *)"H263"))
+                                          {
+                                                    c->codec_id=CODEC_ID_H263;
+                                            }else{
+                                                    c->codec_id = CODEC_ID_MPEG4; // Default value
+                                                    printf("Ooops, cant mux that...\n");
+                                                    printf("Ooops, cant mux that...\n");
+                                                    printf("Ooops, cant mux that...\n");
+                                                }
+                                        }
+                                }
+                        }
+                        if(videoExtraDataSize)
+                        {
+                                c->extradata=videoExtraData;
+                                c->extradata_size= videoExtraDataSize;
+                        }
+                        if(MUXER_PSP==_type)
+                        {
+                            c->rc_buffer_size=0; //8*1024*224;
+                            c->rc_max_rate=0; //768*1000;
+                            c->rc_min_rate=0;
+                            c->bit_rate=768*1000;
+                        }
+                        else
+                        {
+                            c->rc_buffer_size=8*1024*224;
+                            c->rc_max_rate=9500*1000;
+                            c->rc_min_rate=0;
+                            if(!inbitrate)
+                                    c->bit_rate=9000*1000;
+                            else
+                                    c->bit_rate=inbitrate;
+                        }
+                }
+                        break;
+                case MUXER_TS:
+                        c->codec_id = CODEC_ID_MPEG2VIDEO;
+                        c->rc_buffer_size=8*1024*224;
+                        c->rc_max_rate=9500*1000;
+                        c->rc_min_rate=0;
+                        if(!inbitrate)
+                                c->bit_rate=9000*1000;
+                        else
+                                c->bit_rate=inbitrate;
+        
+                        break;
+		case MUXER_DVD:
+			c->codec_id = CODEC_ID_MPEG2VIDEO;
+			c->rc_buffer_size=8*1024*224;
+			c->rc_max_rate=9500*1000;
+			c->rc_min_rate=0;
+			if(!inbitrate)
+				c->bit_rate=9000*1000;
+			else
+				c->bit_rate=inbitrate;
+	
+			break;
+		case MUXER_VCD:
+			c->codec_id = CODEC_ID_MPEG1VIDEO;
+
+			c->rc_buffer_size=8*1024*40;
+			c->rc_max_rate=1152*1000;
+			c->rc_min_rate=1152*1000;
+			
+			c->bit_rate=1152*1000;
+			
+
+			break;
+		case MUXER_SVCD:
+			c->codec_id = CODEC_ID_MPEG2VIDEO;
+
+			c->rc_buffer_size=8*1024*112;
+			c->rc_max_rate=2500*1000;
+			c->rc_min_rate=0*1000;
+			if(!inbitrate)
+				c->bit_rate=2040*1000;
+			else
+				c->bit_rate=inbitrate;
+
+			break;
+		default:
+			ADM_assert(0);
+	}
+	
+	c->codec_type = CODEC_TYPE_VIDEO;
+	c->flags=CODEC_FLAG_QSCALE;   
+	c->width = info->width;  
+	c->height = info->height; 
+
+       AVRational fps25=(AVRational){1001,25025};
+       AVRational fps24=(AVRational){1001,24000};
+       AVRational fps30= (AVRational){1001,30000};
+       AVRational fpsfree= (AVRational){1000,_fps1000};
+
+        
+    	switch(_fps1000)
+	{
+		case 25000:
+                {
+			 c->time_base= fps25; 
+			 break;
+                }
+		case 23976:
+                        if(_type==MUXER_MP4 || _type==MUXER_PSP || _type==MUXER_FLV || _type==MUXER_MATROSKA)
+                        {
+                                 c->time_base= fps24; //(AVRational){1001,24000};
+                                break;
+                        }
+		case  29970:
+			 c->time_base=fps30;
+			break;
+		default:
+                      {
+                            if(_type==MUXER_MP4 || _type==MUXER_PSP || _type==MUXER_FLV || _type==MUXER_MATROSKA)
+                            {
+                                    c->time_base=fpsfree;// (AVRational){1000,_fps1000};
+                                    break;
+                            }
+                            else
+                            {
+                                GUI_Error_HIG(QT_TR_NOOP("Incompatible frame rate"), NULL);
+                                return 0;
+                            }
+                            }
+                        break;
+	}
+
+			
+	c->gop_size=15;
+	c->max_b_frames=2;
+	c->has_b_frames=1;
+
+	
+	// Audio
+	//________
+        if(audioheader)
+        {
+          audio_st = av_new_stream(oc, 1);
+          if (!audio_st) 
+          {
+                  printf("Lav: new stream failed\n");
+                  return 0;
+          }
+  
+                  
+          c = audio_st->codec;
+          c->frame_size=1024; //For AAC mainly, sample per frame
+          printf("[LavFormat] Bitrate %u\n",(audioheader->byterate*8)/1000);
+          _audioFq=c->sample_rate = audioheader->frequency;
+#if 0
+           if(_type== MUXER_PSP && audioheader->encoding==WAV_AAC)
+            {
+                    _audioFq=c->sample_rate = audioheader->frequency/2;                 //_audioFq*=2; // SBR
+             }
+#endif
+          
+          switch(audioheader->encoding)
+          {
+                  case WAV_AC3: c->codec_id = CODEC_ID_AC3;break;
+                  case WAV_MP2: c->codec_id = CODEC_ID_MP2;break;
+                  case WAV_MP3:
+  #warning FIXME : Probe deeper
+                              c->frame_size=1152;
+                              c->codec_id = CODEC_ID_MP3;
+                              break;
+                  case WAV_PCM: 
+                                  // One chunk is 10 ms (1/100 of fq)
+                                  c->frame_size=4;
+                                  c->codec_id = CODEC_ID_PCM_S16LE;break;
+                  case WAV_AAC: 
+                                  c->extradata=audioextraData;
+                                  c->extradata_size= audioextraSize;
+                                  c->codec_id = CODEC_ID_AAC;
+                                  break;
+                  default:
+                          if(_type==MUXER_MATROSKA)
+                          {
+                           if(ADM_WaveTag_to_lavcodec(audioheader->encoding, &(c->codec_id)))
+                           {
+                             if(audioextraData)
+                             {
+                                  c->extradata=audioextraData;
+                                  c->extradata_size= audioextraSize;
+                             }
+                             // Put a dummy time increment
+                              c->time_base= fps25;
+                             break;
+                           }
+                          }
+                            
+                          printf("Cant mux that ! audio\n"); 
+                          printf("Cant mux that ! audio\n");
+                          c->codec_id = CODEC_ID_MP2;
+                          return 0;
+                          break;
+          }
+          c->codec_type = CODEC_TYPE_AUDIO;
+          
+          c->bit_rate = audioheader->byterate*8;
+          c->rc_buffer_size=(c->bit_rate/(2*8)); // 500 ms worth
+          
+          c->channels = audioheader->channels;
+          _audioByterate=audioheader->byterate;
+          
+        }
+        // /audio
+	
+	
+//----------------------
+	switch(_type)
+	{
+				case MUXER_FLV:
+                case MUXER_PSP:
+                case MUXER_MP4:
+                case MUXER_MATROSKA:
+                        oc->mux_rate=10080*1000; // Needed ?
+                        break;
+
+                case MUXER_TS:
+                        oc->mux_rate=10080*1000;
+                        break;
+		case MUXER_DVD:
+			oc->packet_size=2048;
+			oc->mux_rate=10080*1000;
+			break;
+		case MUXER_VCD:
+			oc->packet_size=2324;
+			oc->mux_rate=2352 * 75 * 8;
+			
+			break;
+		case MUXER_SVCD:
+			
+			oc->packet_size=2324;
+			oc->mux_rate=2*2352 * 75 * 8; // ?
+			
+			break;
+		default:
+			ADM_assert(0);
+	}
+	oc->preload=AV_TIME_BASE/10; // 100 ms preloading
+	oc->max_delay=200*1000; // 500 ms
+	
+	if (av_set_parameters(oc, NULL) < 0) 
+	{
+		printf("Lav: set param failed \n");
+		return 0;
+	}
+	 if (url_fopen(&(oc->pb), filename, URL_WRONLY) < 0) 
+	 {
+	 	printf("Lav: Failed to open file :%s\n",filename);
+		return 0;
+        }
+
+	ADM_assert(av_write_header(oc)>=0);
+	dump_format(oc, 0, filename, 1);
+
+
+	printf("lavformat mpeg muxer initialized\n");
+	
+	_running=1;
+
+	one=(1000*1000*1000)/_fps1000; 
+	_curDTS=one;
+
+	return 1;
+}
+//___________________________________________________________________________
+uint8_t lavMuxer::writeAudioPacket(uint32_t len, uint8_t *buf,uint32_t sample)
+{
+        
+        int ret;
+        AVPacket pkt;
+        double f;
+        int64_t timeInUs;
+
+            //printf("Audio paclet : size %u, sample %u\n",len,sample);
+        
+           if(!audio_st) return 0;
+           if(!len) return 1;
+            av_init_packet(&pkt);
+
+            timeInUs=(int64_t)sample2time_us(sample);
+            /* Rescale to ?? */
+            if(_type==MUXER_FLV || _type==MUXER_MATROSKA) /* The FLV muxer expects packets dated in ms, there is something i did not get... WTF */
+            {
+            			f=timeInUs/1000;
+            			f=floor(f+0.4);
+            }
+            else
+            {
+            	f=timeInUs;
+            	f/=1000000.; // In ms seconds 
+            	f*=_audioFq;
+            	f=floor(f+0.4);
+            }
+            pkt.dts=pkt.pts=(int)(f);
+
+            //printf("F:%f Q:%u D=%u\n",f,pkt.pts,timeInUs-_lastAudioDts);
+            
+            pkt.flags |= PKT_FLAG_KEY; 
+            pkt.data= buf;
+            pkt.size= len;
+            pkt.stream_index=1;
+            //pkt.duration=pkt.dts-_lastAudioDts; // Duration
+            aprintf("A: sample: %d frame_pts: %d fq: %d\n",(int32_t )sample,(int32_t )pkt.dts,audio_st->codec->sample_rate); 
+
+            ret = av_write_frame(oc, &pkt);
+            _lastAudioDts=timeInUs;
+            if(ret) 
+            {
+                        printf("Error writing audio packet\n");
+                        printf("pts %llu dts %llu\n",pkt.pts,pkt.dts);
+                        return 0;
+            }
+            return 1;
+}
+//________________________________________________________________________
+uint64_t  lavMuxer::sample2time_us( uint32_t sample )
+{
+double f;
+
+                f=sample;
+                f*=1000.*1000.;
+                f/=_audioFq;              // Sample / Frequency = time in seconds *10E6 to get in in us
+                
+                return (uint64_t)floor(f);
+
+}
+//___________________________________________________________________________
+uint8_t lavMuxer::needAudio( void )
+{
+	
+        if(!audio_st) return 0;
+
+	double f;
+	uint64_t dts=_lastAudioDts;  // Last audio dts
+
+		
+		aprintf("Need audio  ?: %llu / %llu : %llu\n ",dts,_curDTS,_curDTS+one);
+		if((dts+5000>=_curDTS) && (dts<=_curDTS+one)) return 1;
+		if(dts<=_curDTS)
+		{
+			printf("LavMuxer:Audio DTS is too low %llu / %llu!\n",dts,_curDTS);
+			return 1;
+		}
+		return 0;
+}
+//___________________________________________________________________________
+uint8_t lavMuxer::writeVideoPacket(ADMBitstream *bitstream)
+{
+int ret;
+
+double p,d;
+  	AVPacket pkt;
+            av_init_packet(&pkt);
+	    
+        p=bitstream->ptsFrame+1;      // Pts           // Time p/fps1000=out/den  out=p*den*1000/fps1000
+        p=(p*1000*1000*1000);
+        p=p/_fps1000;                  // in us
+	
+        d=bitstream->dtsFrame;		// dts
+	d=(d*1000*1000*1000);
+	d=d/_fps1000;
+	
+	
+	_curDTS=(int64_t)floor(d);	
+        
+        // Rescale
+#define RESCALE(x) x=x*video_st->codec->time_base.den*1000.;\
+                   x=x/_fps1000;
+        
+        p=bitstream->ptsFrame+1;
+        RESCALE(p);
+        
+        d=bitstream->dtsFrame;
+        RESCALE(d);
+        
+        if(_type==MUXER_FLV || _type==MUXER_MATROSKA) /* The FLV muxer expects packets dated in ms, there is something i did not get... WTF */
+        {
+        			p=p*1000/_fps1000;
+        			d=d*1000/_fps1000;
+        }
+    	pkt.dts=(int64_t)floor(d);
+    	pkt.pts=(int64_t)floor(p);
+
+       // printf("Lavformat : Pts :%u dts:%u",displayframe,frameno);
+	aprintf("Lavformat : Pts :%llu dts:%llu",pkt.pts,pkt.dts);
+	pkt.stream_index=0;
+           
+        pkt.data= bitstream->data;
+        pkt.size= bitstream->len;
+	// Look if it is a gop start or seq start
+        if(_type==MUXER_MP4 || _type==MUXER_PSP || _type==MUXER_FLV || _type==MUXER_MATROSKA)
+        {
+            if(bitstream->flags & AVI_KEY_FRAME) 
+                        pkt.flags |= PKT_FLAG_KEY;
+        }else
+            if(!bitstream->data[0] &&  !bitstream->data[1] && bitstream->data[2]==1)
+	{
+            if(bitstream->data[3]==0xb3 || bitstream->data[3]==0xb8 ) // Seq start or gop start
+		pkt.flags |= PKT_FLAG_KEY;
+		//printf("Intra\n"); 
+	}
+           
+	ret =av_write_frame(oc, &pkt);
+	if(ret) 
+	{
+		printf("Error writing video packet\n");
+		return 0;
+	}
+        aprintf("V: frame %lu pts%d\n",bitstream->dtsFrame,pkt.pts);
+	
+	return 1;
+}
+//___________________________________________________________________________
+uint8_t lavMuxer::forceRestamp(void)
+{
+	return 1;
+}
+//___________________________________________________________________________
+uint8_t lavMuxer::close( void )
+{
+	if(_running)
+	{
+		_running=0;
+		// Flush
+		// Cause deadlock :
+		av_write_trailer(oc);
+		url_fclose(&oc->pb);
+
+	}
+	if(audio_st)
+	{
+		 av_free(audio_st);
+	}
+	if(video_st)
+	{
+		 av_free(video_st);
+	}
+	video_st=NULL;
+	audio_st=NULL;
+	if(oc)
+		av_free(oc);
+	oc=NULL;
+	return 1;
+}
+//___________________________________________________________________________
+uint8_t lavMuxer::audioEmpty( void)
+{
+	return 0;
+}
+extern "C"
+{
+     extern  int        mpegps_init(void );
+     extern  int        movenc_init(void );
+     extern  int        flvenc_init(void );
+     extern  int        matroskaenc_init(void );
+};
+extern URLProtocol file_protocol ;
+uint8_t lavformat_init(void)
+{
+                movenc_init();
+                flvenc_init();
+                matroskaenc_init();
+                register_protocol(&file_protocol);
+}
+extern "C"
+{
+/** 
+    \fn ADM_useAlternateTagging
+    \brief returns 1 if using haali compatible tagging, 0 if normal. For mp3 in mp4ff.
+*/
+int ADM_useAlternateTagging(void)
+{
+  uint32_t v=1;
+  prefs->get(FEATURE_ALTERNATE_MP3_TAG,&v);
+  return v;
+} 
+}
+
+typedef struct
+{
+  const char *name;
+  int    id;
+}lavFCC_t;
+
+lavFCC_t lavFCC[]=
+{
+  {"DIV3",CODEC_ID_MSMPEG4V3},
+  {"FLV1",CODEC_ID_FLV1},
+  {"MPEG",CODEC_ID_MPEG2VIDEO},
+  {"DUMMY",0Xffff}
+};
+/**
+    \fn ADM_4cc_to_lavcodec
+    \brief Convert avi fourcc to lavcodec id (video)
+
+*/
+uint8_t ADM_4cc_to_lavcodec(const char *fcc, CodecID *outlavid)
+{
+    uint32_t nb=sizeof( lavFCC)/sizeof(lavFCC_t);
+    nb--;
+    for(int i=0;i<nb;i++)
+    {
+      if(!strncmp(lavFCC[i].name,fcc,4))
+      {
+        *outlavid=(CodecID)lavFCC[i].id;
+        return 1; 
+      }
+      
+    }
+    return 0;
+  
+}
+//*****************
+typedef struct
+{
+  uint32_t tag;
+  int    id;
+}lavWaveTag_t;
+
+lavWaveTag_t lavWaveTag[]=
+{
+  {WAV_AC3,CODEC_ID_AC3},
+  {WAV_OGG,CODEC_ID_VORBIS},
+  {WAV_AAC,CODEC_ID_AAC},
+  {0xdead,0Xffff} // DUMMY
+};
+/**
+    \fn ADM_WaveTag_to_lavcodec
+    \brief Convert ADM audio codec id to lavcodec id (video)
+
+*/
+uint8_t ADM_WaveTag_to_lavcodec(uint32_t tag, CodecID *outlavid)
+{
+    uint32_t nb=sizeof( lavWaveTag)/sizeof(lavWaveTag_t);
+    nb--;
+    for(int i=0;i<nb;i++)
+    {
+      if(lavWaveTag[i].tag==tag)
+      {
+        *outlavid=(CodecID)lavWaveTag[i].id;
+        return 1; 
+      }
+      
+    }
+    return 0;
+  
+}
+
+//___________________________________________________________________________
+//EOF
+
+

Copied: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/ADM_lavformat.h (from rev 3894, branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavformat/ADM_lavformat.h)

Copied: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/ADM_muxts.cpp (from rev 3894, branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavformat/ADM_muxts.cpp)

Copied: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/ADM_tscrc.h (from rev 3894, branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavformat/ADM_tscrc.h)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/CMakeLists.txt	2008-03-15 11:42:55 UTC (rev 3894)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/CMakeLists.txt	2008-03-15 15:52:19 UTC (rev 3895)
@@ -6,3 +6,8 @@
 ADD_SUBDIRECTORY(oplug_flv)
 ADD_SUBDIRECTORY(oplug_dummy)
 
+SET(ADM_LIB ADM_outputs)
+SET(${ADM_LIB}_SRCS 
+	ADM_lavformat.cpp  ADM_muxts.cpp)
+
+ADD_ADM_LIB_ALL_TARGETS(${ADM_LIB} ${${ADM_LIB}_SRCS})

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_pack.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_pack.cpp	2008-03-15 11:42:55 UTC (rev 3894)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_pack.cpp	2008-03-15 15:52:19 UTC (rev 3895)
@@ -335,8 +335,8 @@
 extern "C"
 {
 #define av_always_inline inline
-#include "ADM_libraries/ADM_lavutil/bswap.h" 
-#include "ADM_libraries/ADM_lavcodec/bitstream.h" 
+#include "ADM_libraries/ADM_ffmpeg/ADM_lavutil/bswap.h" 
+#include "ADM_libraries/ADM_ffmpeg/ADM_lavcodec/bitstream.h" 
 }
 void putNvop(ADMBitstream *data,uint32_t timebits, uint32_t timeincval)
 {

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp	2008-03-15 11:42:55 UTC (rev 3894)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp	2008-03-15 15:52:19 UTC (rev 3895)
@@ -47,7 +47,7 @@
 #include "ADM_userInterfaces/ADM_commonUI/DIA_encoding.h"
 #include "ADM_audiofilter/audioprocess.hxx"
 #include "ADM_audiofilter/audioeng_buildfilters.h"
-#include "ADM_libraries/ADM_lavformat/ADM_lavformat.h"
+#include "../ADM_lavformat.h"
 #include "fourcc.h"
 #include "ADM_encoder/adm_encConfig.h"
 #include "ADM_encoder/ADM_vidEncode.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp	2008-03-15 11:42:55 UTC (rev 3894)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp	2008-03-15 15:52:19 UTC (rev 3895)
@@ -47,7 +47,7 @@
 #include "ADM_userInterfaces/ADM_commonUI/DIA_encoding.h"
 #include "ADM_audiofilter/audioprocess.hxx"
 #include "ADM_audiofilter/audioeng_buildfilters.h"
-#include "ADM_libraries/ADM_lavformat/ADM_lavformat.h"
+#include "../ADM_lavformat.h"
 #include "fourcc.h"
 #include "ADM_encoder/adm_encConfig.h"
 #include "ADM_encoder/ADM_vidEncode.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp	2008-03-15 11:42:55 UTC (rev 3894)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp	2008-03-15 15:52:19 UTC (rev 3895)
@@ -52,7 +52,7 @@
 #include "ADM_userInterfaces/ADM_commonUI/DIA_encoding.h"
 #include "ADM_audiofilter/audioprocess.hxx"
 #include "ADM_audiofilter/audioeng_buildfilters.h"
-#include "ADM_libraries/ADM_lavformat/ADM_lavformat.h"
+#include "../ADM_lavformat.h"
 
 #include "ADM_encoder/adm_encConfig.h"
 #include "ADM_encoder/ADM_vidEncode.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp	2008-03-15 11:42:55 UTC (rev 3894)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp	2008-03-15 15:52:19 UTC (rev 3895)
@@ -31,7 +31,7 @@
 #include "prefs.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_outputfmt.h"
-#include "ADM_libraries/ADM_lavformat/ADM_lavformat.h"
+#include "../ADM_lavformat.h"
 
 #include "ADM_libraries/ADM_lvemux/ADM_muxer.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp	2008-03-15 11:42:55 UTC (rev 3894)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp	2008-03-15 15:52:19 UTC (rev 3895)
@@ -51,7 +51,7 @@
 #include "ADM_userInterfaces/ADM_commonUI/DIA_encoding.h"
 #include "ADM_audiofilter/audioprocess.hxx"
 #include "ADM_audiofilter/audioeng_buildfilters.h"
-#include "ADM_libraries/ADM_lavformat/ADM_lavformat.h"
+#include "../ADM_lavformat.h"
 
 #include "ADM_encoder/adm_encConfig.h"
 #include "ADM_encoder/ADM_vidEncode.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_preview.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_preview.cpp	2008-03-15 11:42:55 UTC (rev 3894)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_preview.cpp	2008-03-15 15:52:19 UTC (rev 3895)
@@ -50,7 +50,7 @@
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME MODULE_PREVIEW
 #include "ADM_osSupport/ADM_debug.h"
-#include "ADM_libraries/ADM_libswscale/ADM_mp.h"
+#include "ADM_libraries/ADM_ffmpeg/ADM_libswscale/ADM_mp.h"
 #include "ADM_userInterfaces/ADM_commonUI/GUI_ui.h"
 
 #define MAX(a,b) ( (a)>(b) ? (a) : (b) )

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_equalizer.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_equalizer.cpp	2008-03-15 11:42:55 UTC (rev 3894)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_equalizer.cpp	2008-03-15 15:52:19 UTC (rev 3895)
@@ -32,7 +32,7 @@
 #include "ADM_video/ADM_vidEqualizer.h"
 
 extern "C" {
-#include "ADM_libraries/ADM_lavcodec/avcodec.h"
+#include "ADM_libraries/ADM_ffmpeg/ADM_lavcodec/avcodec.h"
 }
 
 static ColYuvRgb    *rgbConv=NULL;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_mpdelogo.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_mpdelogo.cpp	2008-03-15 11:42:55 UTC (rev 3894)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_mpdelogo.cpp	2008-03-15 15:52:19 UTC (rev 3895)
@@ -31,7 +31,7 @@
 #include "ADM_video/ADM_vidMPdelogo.h"
 
 extern "C" {
-#include "ADM_libraries/ADM_lavcodec/avcodec.h"
+#include "ADM_libraries/ADM_ffmpeg/ADM_lavcodec/avcodec.h"
 }
 
 static GtkWidget	*create_dialog1 (void);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_gtkRender.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_gtkRender.cpp	2008-03-15 11:42:55 UTC (rev 3894)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_gtkRender.cpp	2008-03-15 15:52:19 UTC (rev 3895)
@@ -36,7 +36,7 @@
 #include "../ADM_commonUI/GUI_accelRender.h"
 
 #include "ADM_colorspace/ADM_rgb.h"
-#include "ADM_libraries/ADM_libswscale/ADM_mp.h"
+#include "ADM_libraries/ADM_ffmpeg/ADM_libswscale/ADM_mp.h"
 
 void GUI_gtk_grow_off(int onff);
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyDialog.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyDialog.cpp	2008-03-15 11:42:55 UTC (rev 3894)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyDialog.cpp	2008-03-15 15:52:19 UTC (rev 3895)
@@ -21,7 +21,7 @@
 #include "ADM_assert.h"
 
 extern "C" {
-#include "ADM_libraries/ADM_lavcodec/avcodec.h"
+#include "ADM_libraries/ADM_ffmpeg/ADM_lavcodec/avcodec.h"
 }
 
 ADM_flyDialog::ADM_flyDialog(uint32_t width,uint32_t height,AVDMGenericVideoStream *in,

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidMPdelogo.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidMPdelogo.cpp	2008-03-15 11:42:55 UTC (rev 3894)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidMPdelogo.cpp	2008-03-15 15:52:19 UTC (rev 3895)
@@ -15,12 +15,12 @@
 
 #ifdef ADM_CPU_X86
 extern "C" {
-#include "ADM_libraries/ADM_lavcodec/avcodec.h"
+#include "ADM_libraries/ADM_ffmpeg/ADM_lavcodec/avcodec.h"
 }
 #endif
 
-#include "ADM_libraries/ADM_lavutil/avutil.h"
-#include "ADM_libraries/ADM_libswscale/swscale.h"
+#include "ADM_libraries/ADM_ffmpeg/ADM_lavutil/avutil.h"
+#include "ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale.h"
 
 #include "ADM_filter/video_filters.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLResize.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLResize.cpp	2008-03-15 11:42:55 UTC (rev 3894)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLResize.cpp	2008-03-15 15:52:19 UTC (rev 3895)
@@ -28,12 +28,12 @@
 
 #ifdef ADM_CPU_X86
 extern "C" {
-#include "ADM_libraries/ADM_lavcodec/avcodec.h"
+#include "ADM_libraries/ADM_ffmpeg/ADM_lavcodec/avcodec.h"
 }
 #endif
 
-#include "ADM_libraries/ADM_lavutil/avutil.h"
-#include "ADM_libraries/ADM_libswscale/swscale.h"
+#include "ADM_libraries/ADM_ffmpeg/ADM_lavutil/avutil.h"
+#include "ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale.h"
 #include "ADM_filter/video_filters.h"
 
 typedef struct alg

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMosaic.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMosaic.cpp	2008-03-15 11:42:55 UTC (rev 3894)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMosaic.cpp	2008-03-15 15:52:19 UTC (rev 3895)
@@ -25,12 +25,12 @@
 
 #ifdef ADM_CPU_X86
 extern "C" {
-#include "ADM_libraries/ADM_lavcodec/avcodec.h"
+#include "ADM_libraries/ADM_ffmpeg/ADM_lavcodec/avcodec.h"
 }
 #endif
 
-#include "ADM_libraries/ADM_lavutil/avutil.h"
-#include "ADM_libraries/ADM_libswscale/swscale.h"
+#include "ADM_libraries/ADM_ffmpeg/ADM_lavutil/avutil.h"
+#include "ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale.h"
 
 #include "ADM_filter/video_filters.h"
 #include "ADM_video/ADM_cache.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVobSubRender.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVobSubRender.cpp	2008-03-15 11:42:55 UTC (rev 3894)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVobSubRender.cpp	2008-03-15 15:52:19 UTC (rev 3895)
@@ -67,12 +67,12 @@
 
 #ifdef ADM_CPU_X86
 extern "C" {
-#include "ADM_libraries/ADM_lavcodec/avcodec.h"
+#include "ADM_libraries/ADM_ffmpeg/ADM_lavcodec/avcodec.h"
 }
 #endif
 
-#include "ADM_libraries/ADM_lavutil/avutil.h"
-#include "ADM_libraries/ADM_libswscale/swscale.h"
+#include "ADM_libraries/ADM_ffmpeg/ADM_lavutil/avutil.h"
+#include "ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale.h"
 
 
 #include "ADM_osSupport/ADM_debugID.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt	2008-03-15 11:42:55 UTC (rev 3894)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt	2008-03-15 15:52:19 UTC (rev 3895)
@@ -55,8 +55,8 @@
 INCLUDE_DIRECTORIES("${CMAKE_BINARY_DIR}/config")
 INCLUDE_DIRECTORIES("${CMAKE_CURRENT_SOURCE_DIR}/ADM_core/include")
 INCLUDE_DIRECTORIES("${CMAKE_CURRENT_SOURCE_DIR}/ADM_libraries/ADM_utilities")
-INCLUDE_DIRECTORIES("${CMAKE_CURRENT_SOURCE_DIR}/ADM_libraries/ADM_lavutil")
-INCLUDE_DIRECTORIES("${CMAKE_CURRENT_SOURCE_DIR}/ADM_libraries/ADM_lavcodec")
+INCLUDE_DIRECTORIES("${CMAKE_CURRENT_SOURCE_DIR}/ADM_libraries/ADM_ffmpeg/ADM_lavutil")
+INCLUDE_DIRECTORIES("${CMAKE_CURRENT_SOURCE_DIR}/ADM_libraries/ADM_ffmpeg/ADM_lavcodec")
 
 IF (GETTEXT_FOUND)
 	INCLUDE_DIRECTORIES(${GETTEXT_INCLUDE_DIR})
@@ -179,14 +179,15 @@
 ###########################################
 ADD_SUBDIRECTORY(ADM_outputs)
 
-SET(ADM_OUTPUTS
+SET(ADM_OUTPUTS	
 	oplug_avi
 	oplug_mp4
 	oplug_mpeg
 	oplug_mpegFF
 	oplug_ogm
 	oplug_flv
-	oplug_dummy)
+	oplug_dummy
+	ADM_outputs)
 
 ADD_ADMLIB_ALL_TARGETS(${ADM_OUTPUTS})
 
@@ -232,24 +233,24 @@
 ###########################################
 ADD_SUBDIRECTORY(ADM_libraries)
 
-SET(ADM_LIBRARIES
-	ADM_lavformat
-	ADM_lavcodec
-	ADM_lavutil
+ADD_ADMLIB_ALL_TARGETS(
 	ADM_mplex
 	ADM_libMpeg2Dec
 	ADM_libmpeg2enc
-	ADM_libswscale
 	ADM_libtwolame
 	ADM_libwrapper
 	ADM_lvemux
 	ADM_smjs
 	ADM_utilities
 	ADM_xvidratectl
-	ADM_libpostproc
 	ADM_colorspace)
 
-ADD_ADMLIB_ALL_TARGETS(${ADM_LIBRARIES})
+ADD_LIB_ALL_TARGETS(
+	ADM_libavutil
+	ADM_libpostproc
+	ADM_libswscale
+	ADM_libavcodec
+	ADM_libavformat)
 
 IF (USE_FREETYPE)
 	ADD_ADMLIB_ALL_TARGETS(ADM_libass)

Deleted: branches/avidemux_2.5_branch_gruntster/cmake/admLibFfmpeg.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admLibFfmpeg.cmake	2008-03-15 11:42:55 UTC (rev 3894)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admLibFfmpeg.cmake	2008-03-15 15:52:19 UTC (rev 3895)
@@ -1,32 +0,0 @@
-# This is a hack. FFmpeg libraries should have one config file.
-# This will be easier if automake is ever dropped.
-
-MACRO (GET_FFMPEG_CFLAGS varToSet)
-	IF (ADM_CPU_X86_32)
-		SET(${varToSet} "-DARCH_X86 -DARCH_X86_32")
-	ELSEIF (ADM_CPU_X86_64)
-		SET(${varToSet} "-DARCH_X86 -DARCH_X86_64")
-	ELSEIF (ADM_CPU_PPC)
-		SET(${varToSet} "-DARCH_POWERPC")
-
-		IF (ADM_CPU_ALTIVEC)
-			SET(${varToSet} "${${varToSet}} -DHAVE_ALTIVEC")
-
-			IF (NOT APPLE)
-				SET(${varToSet} "${${varToSet}} -DHAVE_ALTIVEC_H")
-			ENDIF (NOT APPLE)
-		ENDIF (ADM_CPU_ALTIVEC)
-
-		IF (ADM_CPU_DCBZL)
-			SET(${varToSet} "${${varToSet}} -DHAVE_DCBZL")
-		ENDIF (ADM_CPU_DCBZL)
-	ENDIF (ADM_CPU_X86_32)
-
-	IF (ADM_CPU_SSSE3)
-		SET(${varToSet} "${${varToSet}} -DHAVE_SSSE3")
-	ENDIF (ADM_CPU_SSSE3)
-
-	IF (ADM_BIG_ENDIAN)
-		SET(${varToSet} "${${varToSet}} -DWORDS_BIGENDIAN")
-	ENDIF (ADM_BIG_ENDIAN)
-ENDMACRO (GET_FFMPEG_CFLAGS)
\ No newline at end of file



From gruntster at mail.berlios.de  Sat Mar 15 17:15:46 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Sat, 15 Mar 2008 17:15:46 +0100
Subject: [Avidemux-svn-commit] r3896 - in
	branches/avidemux_2.5_branch_gruntster/avidemux: .
	ADM_libraries/ADM_smjs
Message-ID: <200803151615.m2FGFkZ8003665@sheep.berlios.de>

Author: gruntster
Date: 2008-03-15 17:15:43 +0100 (Sat, 15 Mar 2008)
New Revision: 3896

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_smjs/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_smjs/jsautocfg.h
   branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt
Log:
[smjs] make SpiderMonkey lib shared

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_smjs/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_smjs/CMakeLists.txt	2008-03-15 15:52:19 UTC (rev 3895)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_smjs/CMakeLists.txt	2008-03-15 16:15:43 UTC (rev 3896)
@@ -5,16 +5,20 @@
 	jsarena.c  jsbool.c  jsdhash.c   jsexn.c   jsgc.c    jslock.c    jsmath.c  jsopcode.c  jsregexp.c  jsscript.c  jsxdrapi.c
 	jsarray.c  jsdate.c    jsdtoa.c    jsfile.c  jshash.c  jslog2.c    jsnum.c   jsparse.c   jsscan.c    jsstr.c     jsxml.c)
 	
-ADD_ADM_LIB_ALL_TARGETS(${ADM_LIB} ${${ADM_LIB}_SRCS})
+ADD_LIBRARY(${ADM_LIB} SHARED ${${ADM_LIB}_SRCS})
 
 IF (MINGW)
-	ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "-DXP_WIN")
+	ADD_TARGET_CFLAGS(${ADM_LIB} "-DXP_WIN")
 ELSE (MINGW)
-	ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "-DXP_UNIX -DSVR4 -DSYSV -D_BSD_SOURCE -DPOSIX_SOURCE -DHAVE_VA_COPY -DVA_COPY=va_copy")
+	ADD_TARGET_CFLAGS(${ADM_LIB} "-DXP_UNIX -DSVR4 -DSYSV -D_BSD_SOURCE -DPOSIX_SOURCE -DHAVE_VA_COPY -DVA_COPY=va_copy")
 ENDIF (MINGW)
 
-ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "-DNDEBUG -DTRIMMED -DEXPORT_JS_API -DJS_USE_SAFE_ARENA -D_IEEE_LIBM")
-ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "-Dmalloc=ADM_alloc")
-ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "-Drealloc=ADM_realloc")
-ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "-Dfree=ADM_dezalloc")
-ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} "-Dcalloc=ADM_calloc -I/usr/include/nspr")
+ADD_TARGET_CFLAGS(${ADM_LIB} "-DNDEBUG -DTRIMMED -DEXPORT_JS_API -DJS_USE_SAFE_ARENA -D_IEEE_LIBM")
+ADD_TARGET_CFLAGS(${ADM_LIB} "-Dmalloc=ADM_alloc")
+ADD_TARGET_CFLAGS(${ADM_LIB} "-Drealloc=ADM_realloc")
+ADD_TARGET_CFLAGS(${ADM_LIB} "-Dfree=ADM_dezalloc")
+ADD_TARGET_CFLAGS(${ADM_LIB} "-Dcalloc=ADM_calloc -I/usr/include/nspr")
+
+TARGET_LINK_LIBRARIES(${ADM_LIB} ADM_core)
+
+INSTALL(TARGETS ${ADM_LIB} RUNTIME DESTINATION ${BIN_DIR} LIBRARY DESTINATION lib)
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_smjs/jsautocfg.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_smjs/jsautocfg.h	2008-03-15 15:52:19 UTC (rev 3895)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_smjs/jsautocfg.h	2008-03-15 16:15:43 UTC (rev 3896)
@@ -2,7 +2,7 @@
 #define js_autocfg___
 
 /* AUTOMATICALLY GENERATED - DO NOT EDIT */
-#include "config.h"
+#include "ADM_coreConfig.h"
 
 
 #ifdef ADM_BIG_ENDIAN

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt	2008-03-15 15:52:19 UTC (rev 3895)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt	2008-03-15 16:15:43 UTC (rev 3896)
@@ -240,12 +240,12 @@
 	ADM_libtwolame
 	ADM_libwrapper
 	ADM_lvemux
-	ADM_smjs
 	ADM_utilities
 	ADM_xvidratectl
 	ADM_colorspace)
 
 ADD_LIB_ALL_TARGETS(
+	ADM_smjs
 	ADM_libavutil
 	ADM_libpostproc
 	ADM_libswscale



From gruntster at mail.berlios.de  Sat Mar 15 18:17:16 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Sat, 15 Mar 2008 18:17:16 +0100
Subject: [Avidemux-svn-commit] r3897 - in
 branches/avidemux_2.5_branch_gruntster: . avidemux avidemux/ADM_audio
 avidemux/ADM_audiocodec avidemux/ADM_audiodevice avidemux/ADM_audiofilter
 avidemux/ADM_codecs avidemux/ADM_colorspace avidemux/ADM_editor
 avidemux/ADM_encoder avidemux/ADM_filter avidemux/ADM_infoExtractor
 avidemux/ADM_inputs avidemux/ADM_inputs/ADM_amv avidemux/ADM_inputs/ADM_asf
 avidemux/ADM_inputs/ADM_avsproxy avidemux/ADM_inputs/ADM_flv
 avidemux/ADM_inputs/ADM_h263 avidemux/ADM_inputs/ADM_inpics
 avidemux/ADM_inputs/ADM_matroska avidemux/ADM_inputs/ADM_mp4
 avidemux/ADM_inputs/ADM_mpegdemuxer avidemux/ADM_inputs/ADM_nuv
 avidemux/ADM_inputs/ADM_ogm avidemux/ADM_inputs/ADM_openDML
 avidemux/ADM_libraries avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec
 avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386
 avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/ppc
 avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat
 avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavutil
 avidemux/ADM_libraries/ADM_ffmpeg/ADM_libpos! tproc
 avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale
 avidemux/ADM_libraries/ADM_libMpeg2Dec avidemux/ADM_libraries/ADM_libass
 avidemux/ADM_libraries/ADM_libmpeg2enc
 avidemux/ADM_libraries/ADM_libmpeg2enc/altivec
 avidemux/ADM_libraries/ADM_libtwolame avidemux/ADM_libraries/ADM_libwrapper
 avidemux/ADM_libraries/ADM_lvemux avidemux/ADM_libraries/ADM_mplex
 avidemux/ADM_libraries/ADM_smjs avidemux/ADM_libraries/ADM_utilities
 avidemux/ADM_libraries/ADM_xvidratectl avidemux/ADM_ocr
 avidemux/ADM_osSupport avidemux/ADM_outputs avidemux/ADM_outputs/oplug_avi
 avidemux/ADM_outputs/oplug_dummy avidemux/ADM_outputs/oplug_flv
 avidemux/ADM_outputs/oplug_mp4 avidemux/ADM_outputs/oplug_mpeg
 avidemux/ADM_outputs/oplug_mpegFF avidemux/ADM_outputs/oplug_ogm
 avidemux/ADM_requant avidemux/ADM_script avidemux/ADM_toolkit
 avidemux/ADM_userInterfaces avidemux/ADM_userInterfaces/ADM_GTK
 avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog
 avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory avidemux/ADM!
 _userInterfaces/ADM_GTK/ADM_filters avidemux/ADM_userInterface! s/ADM_GT
Message-ID: <200803151717.m2FHHGA8010035@sheep.berlios.de>

Author: gruntster
Date: 2008-03-15 18:16:16 +0100 (Sat, 15 Mar 2008)
New Revision: 3897

Removed:
   branches/avidemux_2.5_branch_gruntster/.cvsignore
   branches/avidemux_2.5_branch_gruntster/ChangeLog
   branches/avidemux_2.5_branch_gruntster/History
   branches/avidemux_2.5_branch_gruntster/INSTALL
   branches/avidemux_2.5_branch_gruntster/Makefile.am
   branches/avidemux_2.5_branch_gruntster/Makefile.dist
   branches/avidemux_2.5_branch_gruntster/avidemux.spec
   branches/avidemux_2.5_branch_gruntster/avidemux/.cvsignore
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audio/.cvsignore
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audio/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/.cvsignore
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/.cvsignore
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/.cvsignore
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/.cvsignore
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_colorspace/.cvsignore
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_colorspace/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/.cvsignore
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/.cvsignore
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/.cvsignore
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_infoExtractor/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_amv/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_asf/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_avsproxy/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_flv/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_h263/.cvsignore
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_h263/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_inpics/.cvsignore
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_inpics/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_matroska/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mp4/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_nuv/.cvsignore
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_nuv/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_ogm/.cvsignore
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_ogm/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/.cvsignore
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/.cvsignore
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/.cvsignore
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/ppc/.cvsignore
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/ppc/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/.cvsignore
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavutil/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libpostproc/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libMpeg2Dec/.cvsignore
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libMpeg2Dec/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libass/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/.cvsignore
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/altivec/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libtwolame/.cvsignore
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libtwolame/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libwrapper/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lvemux/.cvsignore
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lvemux/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/.cvsignore
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_smjs/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/.cvsignore
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_xvidratectl/.cvsignore
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_xvidratectl/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_ocr/.cvsignore
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_ocr/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/.cvsignore
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_dummy/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_flv/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mp4/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpeg/.cvsignore
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpeg/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpegFF/.cvsignore
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpegFF/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_ogm/.cvsignore
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_ogm/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_requant/.cvsignore
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_requant/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/.cvsignore
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_toolkit/.cvsignore
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_toolkit/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/.cvsignore
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/.cvsignore
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialogFactory/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_filters/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_gui2/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_ocr/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/.cvsignore
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/ADM_libMad/Makefile.am
   branches/avidemux_2.5_branch_gruntster/avidemux/xpm/.cvsignore
   branches/avidemux_2.5_branch_gruntster/avidemux/xpm/Makefile.am
   branches/avidemux_2.5_branch_gruntster/configure.darwin
   branches/avidemux_2.5_branch_gruntster/configure.darwinport
   branches/avidemux_2.5_branch_gruntster/configure.files
   branches/avidemux_2.5_branch_gruntster/configure.in.bot
   branches/avidemux_2.5_branch_gruntster/configure.in.in
   branches/avidemux_2.5_branch_gruntster/m4/
   branches/avidemux_2.5_branch_gruntster/po/.cvsignore
   branches/avidemux_2.5_branch_gruntster/po/Makefile.am
   branches/avidemux_2.5_branch_gruntster/subdirs
Log:
[automake] remove automake scripts

Deleted: branches/avidemux_2.5_branch_gruntster/.cvsignore
===================================================================
--- branches/avidemux_2.5_branch_gruntster/.cvsignore	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/.cvsignore	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,13 +0,0 @@
-*.o
-Makefile.in
-config*
-Avidemux2.kd*
-Makefile
-libtool
-autom4te.cache
-stamp-h1
-aclocal.m4
-configure
-acinclude.m4
-configure.in
-

Deleted: branches/avidemux_2.5_branch_gruntster/ChangeLog
===================================================================
--- branches/avidemux_2.5_branch_gruntster/ChangeLog	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/ChangeLog	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,14 +0,0 @@
-2003-09-17  <>
-	New ui, same as for SVCD/DVD 
-
-2003-03-23  gettextize  <bug-gnu-gettext at gnu.org>
-
-	* configure.in (AC_CONFIG_FILES): Add po/Makefile.in.
-
-2003-03-23  gettextize  <bug-gnu-gettext at gnu.org>
-
-	* Makefile.am (SUBDIRS): Add m4.
-	(ACLOCAL_AMFLAGS): New variable.
-	(EXTRA_DIST): Add admin/config.rpath.
-	* configure.in (AC_CONFIG_FILES): Add po/Makefile.in,
-

Deleted: branches/avidemux_2.5_branch_gruntster/History
===================================================================
--- branches/avidemux_2.5_branch_gruntster/History	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/History	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,1693 +0,0 @@
-************************ TODO****************************
-	Todo :
-
-	Audio API : 	Grab returns MINUS_ONE when cannot read anymore
-				Read returns 0
-				getPacket returns 0
-*********************** /TODO **************************
-
-
-
-********************************* Step2 *********************************
-                Fixed mpeg detection (lower threshold)
-                New filters: mosaic hard pd removal blend removal
-                Fixed size for output (74 &  70 mn)
-                
-
-                Fixed blank in path for mpeg    
-                unblend field, does not work very well
-                Fixed TS loading
-                Fixed slowdown in mpeg PS loading
-                Fixed huge junk chunk in mpeg->avi
-                Jobs
-
-test1
-                Fixed requantizer
-                Colorspace from mplayer
-                DRC
-                wizard for VCD etc.. that asks for aspect ratios
-                use ~/.avidemux for storage
-                Tray icon
-                Fixed win32 bigfile issue
-                PNG + use mplayer for importing BMP
-                SDL support for win32 enhanced (maybe macOsX too)
-                Dual audio fixed (sort of)
-                Jakub new dialog
-                Filter for open/save
-
-***********************************************************
-        25 June
-                Multiple audio track for OGM + cleanup of the mess
-        20 June
-                Added audio track selection
-        19 June
-                Low level/mid level ok for audio switching
-        18 June
-                Began adding support for on the fly audio track switch
-        12 June  Fixed some got_pict=0 issue 
-                 TS: Fixed AC3 demuxing, mostly ok
-        09 June  Fixed "-" in script, began mpeg TS
-        08 June  Fixed faad2/x264. Added threshold to miniocr + enabled skipall button.
-        07 June  Fixed demuxer for private stream2 / multiple file input
-        06 June  Fixed Xv redraw issue
-
-                dedicated ui for indexing progress
-        01      Prober + new ui + commit the whole thing
-        31      ES Ok, PS ok, demuxer + stats, audio + multiple audio tracks (only one picked)
-        26      Basic audio ok
-        25      finished ES, began PS, simplisitc PS done
---------------2.0.40--------------------------
-        24      ES demuxer & indexer
-        23/05
-                - began working on new mpeg demuxer
-        22/05
-                - save pp in project
-                - global pp default
-                - re-enabled swap uv in pp
-                - external source for audio scriptable
-        20/05
-                - fixed the "," issue in prefs_gen.pl
-                - fixed some ocr issue
-                - moved to pristine mplayer swscale
-        19/05
-                - fixed resize_mmx2 by disabling it
-        18/05
-                - moving project save/load to script
---------------------2.0.38 final : 1030-----
-        14/05   
-                - changed max for eq2 to 3 (from 10)
-        12/05
-                - fixed (?) mpeg 2 layer 3 packet size computing
-        11/05
-                - added ugly/simplistic var stuff
-        10/05
-                - fix (?) the cpucap integer declaration
-                - fix some win32 transient issue
-        09/05
-                - Eq2 part2
-                - be less strict on mpeg audio match code
-        08/05
-                - fixed jpeg encoding
-                - clean up of MMX etc..
-                - fixed filter display (jakub)
-                - changed audio mux rate  for mpeg ts (vk)
-                - race in mpeg PS (T rupp)
-                - support mov file starting by skip
-                - dont reset marker when loading filters
-		- began to build non reg
-        07/05   - fix build when mmx is disabled
-                - cleanup prefs menu to add video accel
-                - added video accel in prefs
-
-        06/05  - Hdd failure
-        05/05
-                - Redone decomb telecide using avisynth compatibility lib
-        04/05
-                - --rebuild-index command line
-        01/05
-                - Asharp
-------------------------2.0.38rc3-------------
-        30/04
-                Fixed save bmp on large file (hdtv)
-                Maybe fixed altivec pp
-        26/4
-                - msharpen 1/2
-        25/4
-                - dgbob 2/2
-        24/4
-                - doc update
-                - dgbob 1/2
-        20/04
-                - added language to ts
-                - jakub new bitrate calc ui
-                - some fix in bitrate calc
-        19/04
-                - fix # of parameter for mplayerhqd3D
-                - fixed vobsub index non sequential (when some languages were omitted from the sub)
-        18/04
-                - tiny gui for eq2 , gamma working ?
-                - fixed Ts output for picture > 64 k, vlc happy now
-        17/04
-                - added container info for ogm & avi
-
-        15/04
-        
-                - fixed (?) mpeg2enc build on non 386
-                - fixed green flags/huffyuv
----------------------------------------------
-April Break
-                Ts muxer
-                Mplayer hue & eq2
-                Fixed bitrate calc not showing
-                Fixed black frame handling
------------------------2.0.38rc2b----------------------------------------
-        28/03/05
-                - assume 24 fps is pulldowned (lavformat)
-                - set bitrate for ts
-                - Fix b frames detection when dontcopy is on
-        27/03/05
-                - Dont try to copymode a mpeg dont starting by intra 
-                - fixed some bugs in miniOcr
-                - enter key validate the glyph in miniOCR
-        26/03/05
-                - mpegTs
-                - upped mpeg split
-                - Jens : Partial display correct frame # / avoid partializing partialized filter
-                - Jens : crash avoided writing error on prj
-                - dont crash when using appended file with no audio
-                - A Robinson : Scan all black frames
-                - Try to speed up a bit black frame detection
-        25/03/05
-                - better bitrate calc
-                - begin work on muxer for mpegTs
-                
-        24/03/05
-                - try to detect GMC
-                - FIXME: dropped frame handling
-        23/03/05
-                - more dontcopy stuff
-                - fixed memcpy_mmx
-        22/03/05
-                - added refcopy to gain one extra memcpy
-        21/03/05
-                - fast xine/mplayer memcpy
-        20/03/05
-                - Merged entropy linear for fps resample +conf+mmx
-                - added ability to select Alsa device
-        16/03/05
-                - X264 fine tuning for encoding CBR (it was just 1000 too high :))
-                - Dialog for x264 does its job
-                - fix myth autoloading bug
-        15/03/05
-                - Better handling of 8 bits PCM
-
-        13/03/05
-                - X264 ui
-                - Redone ocr ui
-                - jens : mono2stero/append from cli + save stat as a file
-        10/03/05
-                - jens : Gcc 2.95
-                - lavc pp deint over
-        09/03/05
-                - Begin adding lavc pp deint
-        08/03/05
-                - Merged Cyrille DnD patch
-        07/03/05
-                - fixed one bit offset, thanks yan
-
-   March break
-        - save/load glyphs
-        - avoid memcpying when using mad decoder
-        - less memcpy for WMA/AMR decoding
-        - clean up WMA decoding too
-        - Added AMR NB decoder from ffmpeg
-        - Peek inside mp4/h263 to get correct width/height
-        - use common free/alloc for pp
-
-
-
-        25/01/05
-                - ffmpeg patch fourcc Jindrich Makovicka 
-        22/01/05
-                - skeleton UI for x264
-                - more x264 : param/cbr/cq
-        21/01/05
-                - x264
--------------------------2.0.38rc1----------------------
-        20/01/05
-                - vobsub ui + shift capability
-        19/01/05
-                - cleanup for mpeg identify + ignore diff at padding level
-                - accept 0xF4 mpeg audio
-        18/01/05
-                - fix auto load for mpeg when N>10 (centove)
-        16/01/05
-                - ODML write support by GMV
-        15/01/05
-                - added indexMpeg to script
-        12/01/05
-                - 1Meg prefill for audio to prevent mplex from empty-ing audio while filing video
-                - append cleanup (script/cli/...)
-                - avoid one more mplex mjpeg_exit
-        11/01/05
-                - made some tweak with mplex muxer
-        10/01/05
-                - fixed vobsub display
-                - fixed loadcodec config for XDVD
-        06/01/05
-                - Optimized async editor get frame
-        05/01/05
-                - display ok + select lang ok. Time to resize properly
-                Maybe need some chroma too
-                - resize ok chroma ok
-        04/01/05
-                - vs:simple ui
-                - vs:can select the language
-        03/01/05
-                - more cleanup & basic resampling
-                - resampling ok, colors ok, speed up
-        02/01/05
-                - cleanup of vobsub/restructuring
-        30/01/05
-                - better vobsub timing
-                - fixed win32_huff loading : padding bug in openmlindex_secondary
-        29/01/05
-                - fixed bad jump in seq header (broken mpeg indexing)
-                - fixed (?) lock handling on mplex muxing
-                - jens : added avidemux2 to vcdimager in addons
-                - moonz : added change fps filter
-                - changed ui for mpeg2 passthrough
-
-        24/01/05
-                - Simple seeking for vobsub :)
-        23/01/05
-                - silence mplex SCR warning . Dont understand where they come from
-                - exit cleanly from mplex (?)
-                - Jens : Export setformat to cli
-        21/01/05
-                - more vobsub: color conv + merge + blend ok
-        20/01/05
-                - more vobsub
-                - mixup fixed for confcoupl -> read
-                
-        17/01/05-18/01
-                Timid vobsub support
-                Read psu packet ok, now fix up the rle decoder
-        16/01/05
-                Cosmetic job on equalizer
-        15/01/05
-                 update to ffmpeg cvs
-                 added ffhuff read/write
- Xmas break, win32 based, Laptop rules
-       
-              Basic support for field encoded mpeg2
-              Fix postproc for field encoded mpeg2
-              Fix displayed qz (not ok for mpeg2)
-              Fix displayed audio in copy mode
-              Win32: Display quant workaround
-              Added setFormat script command
-              Display audio codec/mode when using lavc codec
-              
-
-	21.12.04
-		- display if qpel was used (gross hack)
-		- 
-	19.12.04
-		- fix crah when unpacking Bvop / resulting # of image > initial (blah2.5.Avi)
-		- save container used in project file
-		- better projection model
-	18.12.04
-		- simplistic projecton model + VBV for DVD (lavc)
-		- Jens : save xvid conf in prefs
-		
-	17.12.04
-		- fixed xvidrc + dvd (lavc)
-		- began adding VBV to xvidrc
-	13/12/04
-		- added muxer capabilities to lavcodec mpeg1/2 codec (X*VCD)
-	12/12/04
-		- S s.deleeuw : add more file in mpeg (several digit)
-		- Jens : gcc 2.95 fix
----------------test2-----------------------
-	08/12/04
-		- Use fake normalize to avoid being stuck for long in calculator DVD/ps
-	06/12/04
-		- PTS/DTS is in fact needed (absolutely)
-	05/12/04
-		- Try to guess svcd in copy mode
-	04/12/04
-		- non altivec ppc fix by darwin at otierney.net 
-	03/12/04
-		- stereo2mono / -1 final
-		- cleanup for removed menu entries
-		- handle mp3 vbr/cbr writing correctly, gain some space !
-	02/12/04
-		- save as VCD PS/DVD PS depending if it is mpeg1 or 2
-		- win32 compile fix for lavformat
-		- mono2stereo and stereo 2 mono, need to add override mode
-	01/12/04
-		- did half smart copy
-	28/11/04
-		- SVCD + UI
-	27/11/04
-		- fixed audio too short when pulldown + mpeg2 in a mpeg stream (wrong computation of duration)
-		- fixed deadlock on lavFormat end of stream
-		- vcd template
-	25/11/04
-		- lavformat ok
-	21/11/04
-		- muxer ~ ok, need to do PTS
-       18/11/04
-       		- Began to merge lavformat mpeg2 muxer
-       17/11/04
-       		- dual audio 
-       14/11/04
-       		- be silent in script mode
-		- try to workaround empty space between atoms
-		- read mp4a atom correctly
-		- read better some atoms (should work in all case : stts)
-		- partial support of aac in avi
-       13/11/04
-       		- better handling of audio in mp4/mov
-		- added follow mode to cli (follow=3)
-		- svq3 needs extradata
-       12/11/04
-       		- fix size_t/unsigned in for realloc
-       11/11/04
-       		- fix gop size changing from pass1 to pass2 for SVCD
-		- merged Xvid 1.1
-		- fixed bframe offset/ratio
-		- fix audio stall for save dvd ps
-       10/11/04
-       		- Redesigned xvid ratecontrol to offer a simpler common interface for all rc code
-		- merged old ratecontrol into new interface
-		- began to do new ratecontrol in new interface
-       08/11/04
-       		- ffv1rec : Improved ffv1rec (Michael Teske)
-       07/11/04
-       		- faac encoding access through menu
-		- 16/9 for DVD lavc
-		- display different name
-       ------------06 Nov 04  : 2.0.34-test1---------------
-       04/11/04
-   		- display current a/v codec
-       03/11/04
-       		- Correct header when encoding mp3 VBR
-		- fix round up for timeshift on wave
-       02/11/04
-       		- cleaned up rawshift*
-		- fixed wav packetizer going empty
-       01/11/04
-       		- handle reordering in ogm
-		- fixed fresh packet bit in ogm header
-		- fixed timestamps in ogm header
-		- avoid scratch at startup of vorbis track
-		- 
-       30/10/04
-       		- fixed vop not coded + xvid for unpacker
-		- mp3 vbr fixed
-       29/10/04
-       		- removed the -msse when mmx is on (DUH!)
-		- masquerade as dx50 change divx****p to divx****n in user data segment
-		- fixed raw copy of vorbis in ogm (with limitations)
-		
-       28/10/04
-       		- try to pass through vorbis . Raw copy is ok, need to add timeseek capability
-		- support for wma, playback is screwy
-       27/10/04
-       		- fixed bad start stream bit for ogm
-		- fixed \ vs / on win32
-       26/10/04
-       		- crocodil enhanced bitrate calculator
-       		- unpacker : update user data field
-		- scan deeper for  B frmes
-		- Jens : autoindex for nuv
-		- Jens : gcc fix for ffv1
-		
-       ----------------2.0.32-------------------------
-       19/10/04
-       		- rotate bug
-		- amd64 cpu asm code resynced with ffmpeg
-		- all mmx cpu does not compile nicely with -msse
-		- altivec x1 ok
-		- divx unpacker skeleton
-       18/10/04
-       		- reverted to regular horizX1 for altivec
-		- fixed a bug in normalize + save as DVD PS
-       17/10/04
-       		- X1postproc altivec : VertX1 ok, horizX1 not ok
-       16/10/04 - null pointer crash protection (C Clayton)
-       		- fixed faac/faad
-		- pcm bug
-       -------------2.0.30----------------------
-       13/10/04
-       		- fixed bad memcpy in crop and contrast
-		- Jens : --autoidx
-		- packetizer for ulaw & LPCM
-       11/10/04
-       		- Began to merge x86 code compatible with both 32&64 bits
-       10/10/04
-       		- Fix read error with vbr map + mp3
-		- Display also avg bitrate + returns it in calculator
-       09/10/04
-       		- fixed avi audio so that they don't wrap around
-		- use packet even for read
-		- video codecs menu not hardcoded anymore
-		- began to do calculator
-       06/10/04
-       		- fixed display filter after partial save
-       03/10/04
-       		- fixed audio api for ogm
-		- incomplete header for ogm
-		- fixed vorbis reading
-       02/10/04
-       		- began to fix seeking/reading for ogm
-		- fixed 1st timestamp of header too high
-		- fixed ac3 packetizer
-		- fixed seeking in ogm for non vorbis stream
-		
-       01/10/04
-       		- Fixed vbv header when using external 2 pass encoding (hint from Janne Grunau)
-       30/09/04
-       		- more PPC stuff
-		- fix bug in ogg muxer 
-		- Mitja Vodopivec : Support for interlaced DVD (ffmpeg)
-		- Janne Grunau : Fix in buffer size 
-       25/09/04
-       		- more altivec/macOs
-		- accept xvid 4.1 as xvid 4.0
-       24/09/04
-       		- fixed macOsX / altivec libtoolization
-		- black frame
-		- fixed display of audio size (ogm)
-		- pad with silence end of ogm (ogm)
-       21/09/04
-       		- began libtoolization of libavcodec
-       20/09/04
-       		- unified 16 bytes aligned  alloc/Free
-		- fixed free/delete mixup
-		- works on ibookG4 / debian
-       19/09/04
-       		- same encoding for xvid
-       18/09/04
-       		- same encoding
-		- fixed overflow in save audio in processed mode
-       16/09/04
-       		- vorbis : fixed header/comment/codebook writing
-		- vorbis : muxing in ogm ok, nice overhead though
-				
-		
-       15/09/04
-       		- more vorbis
-		- jens : save current proj cleanup + doc update
-		- overflow fix (?)
-       14/09/04
-       		- fixed save audio in process mode (no sampling count)
-		- gcc 2.95 in dia lame
-		- some overflow in mpeg
-       13/09/04
-       		- fixed multi channel aac encoding
-		- fixed aac header in muxing 
-		- fixed muxing (high overhead)
-		- skeleton for vorbis
-       12/09/04
-       		- handle rec chunk
-		- began to add faac. Need doc. Mono ok, stereo no ok
-       11/09/04
-       		- fix anti-drift stuff
-		- use getPacket also for save audio
-		- begin to add aac encoding
-       10/09/04
-       		- added preliminary wav packetizer
-		- fixed bug when there is not enough for last packet
-		- simplified the null audio filter
-		- fixed mpeg layer2/3 packet size computation
-       09/09/04
-       		- move getPacket up to editor, part I
-			Need to make a schematic of the stuff
-       08/09/04
-       		- use packet for vbr time map (much faster)
-		- whirl does not need MMX
-       07/09/04
-       		- dittor for avi
-		- added preset to save/load edl
-		- use buildRawshift instead of manually building the filter chain (memleak)
-		- shift for ogm too
-       06/09/04
-       		- switch to packet: - done for OGM: AC3 & MP3
-       05/09/04
-       		- added ability to use lavcodec mpeg1/2 decoder
-		- began to switch to get packet interface for ogm as a testbed
-		
-       04/09/2004
-       		- kerning + fixed crash for font + improved rendering
-		- fixed decoding ffmpeg when no quant data (ffv1 for ex)
-		- new API for filesel with hinting(srt only ATM)
-		- Win32 filename cleanup & name cleanup
-		- removed SDL audio for win32
-		
-       01/09/2004
-       		- modl modal fix
-       31/08/04
-       		- finished almost all filters
-		- fixed a cache handling bug
-		- be smarter concerning quant in ADMImage 
-		- began to add copyInfo, need to patch all filters...
-       30/08/04
-       		- separated postproc
-		- added qp infos
-		- cleaned up and reactivate filters, part 1
-		- remove chroma also for blacken border
-		- new filter stackfield
-       29/08/04
-       		- added cache at editor level w B frame support (LRU cache)
-		
-       28/08/04
-       		- altivec postproc (macOSx only ?)
-		- configure switch -framework for macOsX
-		- began to switch to ADMImage class to handle image rather than uint8_t *
-      27/08/04
-      		- bitrate-> vbv for xvid rate control
-		- autoconf cleanup
-		- VBV buffer size availble through ui
-		- predictor borrowed from P. Cheat formula.
-       		
-       25/08/04
-       		- shadow for subtitles
-		- default charset is iso8859-1
-		- update to ffmpeg cvs
-		- new properties ui in one piece
-		
-       24/08/04
-       		- Fixed VBV buffer for DVD ffmpeg
-		- cleanup for param : SVCD/DVD
-		- separate conf for XVCD DVDffmpeg
-		- new ui for DVDffmpeg
-		- Jens  : Save current project
-		- Jens  : Save sub settings
-		
-		
-       20/08/04
-       18 /19
-       		- log file is stored in xxx.stat, not in /tmp/xxx anymore
-		-  USe less prefill for mpeg2enc (30->6)
-       17/08/04
-       		- more ui stuff
-		- rgb32 fix from ffmpeg
-		- win32: /tmp does not exist for default log file!
-       15/08/04
-       		- Jakub UI Job
-		- Began to move i18n to sub frontend, and do only unicode in font display
-		- Fixed xvid 0.9/ADM_assert (Tigs)
-		- i18n ok (?) Workish
-       14/08/04
-       		- added go to A & goto B buttons
-       13/08/04
-       		- ask quant for smart copy right away (for ron)
-		- prettier integer input/question/alert dialog box
-       ____________________2.0.28___________________________
-       11/08/04
-       		- centralized cpu cap for mpeg2enc
-       09/08/04
-       		- fixed XVCD
-		- added ulaw audio codec
-		- more win32 stuff
-       08/08/04
-       		- assert -> ADM_assert
-		- some win32 fix
-       04/08/04
-       		- Faster pass1 for 2 pass SVCD/DVD
-		- Couple of win32 fix
-       03/08/04
-       		- Better 2 pass for SVCD
-		- Fixed -g missing when --with-debug is set
-		- sscanf weirdness spotted on win32 & fixed
-       02/08/04
-       		- E Strickland : -t for ffv1rec
-		
-       -----------------------------------------------------
-       28/07/04
-       		- audio for win32 (skeleton)
-       27/07/04
-       		- more cyg/ming stuff.
-       24/07/04 - some toto%=: fix to allow -funroll-loop
-       		- more mingw fix
-       23/07/04 - Began merging win32
-       
-       _____________2 0 26 ------------------------
-       17/07/04
-       		- OGM demuxer : ditto for audio track
-		- Tried to put back Xvid ratecontrol for s/x vcd
-       16/07/04
-       		- OGM demuxer : handles ok video track made by ogmtools
-       14/07/04
-       		- OGM demuxer : better handle non vorbis audio track (hackish)
-       13/07/04
-       		- OGM Muxer : B frames support for video 
-       11/07/04
-       		- Better audio muxer for OGM, makes mplayer crash for ac3 :(
-       10/07/04
-       		- OGM writter skeleton, gui and copy/process mode. No audio.
-		- Bit of audio
-       09/07/04
-       		- added PTS info + stream info audio audio stream in TS (not 100% ok)
-		- fix bug when mpeg audio never goes back to zero
-       08/07/04
-       		- began adding PTS infos for TS stream (bugged / incomplete)
-       05/07/04
-       		- OGM reader: Handles better non vorbis audio in ogm, not perfect thought
-		- OGM muxer : Audio ok in copy mode, the abs_pos field is not ok (makes vlc go crazy)
-				+ Do B frame
-				+ Do encoding mode
-				+ Fix reading of output of ogmmerge (?)
-		- Fix TS when pid > 0x100
-       04/07/04	
-       		- a bit more on ogm writter, It is just a prototype ATM
-		
-       02/07/04
-       		- began writting ogm writter
-       28/06/04
-       		- fixed audio duration computation (overflow)
-		- double click on recent brings it forward
-       27/06/04
-       		- BE/LE in atom name
-		- display correct thing about mp4a and amr nb
-		- libfaad interface (incomplete/bugged)
-       26/06/04
-       		- faad autoconf'ed / class added/ no code for now
-       25/06/04
-       		- fixed vop not coded (small header imageless)
--------------------------No DSL------------------------
-       23/06/04
-       		- clean up of audio detection. Faster & go more deeply
-       21/06/04
-       		- Fixed double bug in mpeg TS demuxer, still visual glitch for cnn.ts
-       18/06/04
-       		- Allow pid selection in Ts stream (ok with trailers, not ok with DVB)
-       15/06/04
-       		- removed padding for audio stream /mpeg TS. clean up a bit
-		- fix for crash when null mpeg frames (mencoder files)
-       13/06/04
-       		- added audio for mpeg TS, still harcoded
-       12/06/04
-       		- disabled VBR packetizing, not legit for DVD ?
-       11/06/04
-       		- put absolute path in mpeg index
-		- removeFrame function
-		- began adding support for mencoder new way of 'mpeg in avi' 
-       08/06/04
-       		- VBR muxing for mpeg writter
-		- fixed smart copy for divx3
-       31/05/04
-       		- skeleton for video filter scriptability
-		- save current filters as script
-       30/05/04
-       		- began to add video filters to script
-       29/05/04
-       		- fix openDML reader when the !keyframe flag is set
-		- more scripting videocodec/savedvd/save. Parser bugged.
-       28/05/04
-       		- Dont save file in copy mode with starting/ending B frame
-		- Warn if B frames loose their fw/bw reference (not sure it is a good
-				idea (tm) )
-       27/05/04
-       		- more scripting
-       20/05/04
-       		- Msmooth from donald graft
-		- First step of scripting engine
-		
-       18/05/04
-       		- proper AC3 cut on packet boundaries
-		- dropped dependancies on liba52 except for decoding
-		- wrap CPU features around CpuCap class
-		- sse for decimate
-		
-       17/05/04
-       		- Redone crop ui + autocrop. Code is ugly but it will do for now.
-       16/05/04
-       		- UI for decomb
-		- Do not preview out of scope frame (for frame changing filter : ivtc, mergefield...)
-		- Decomb decimate + UI, not debugged
-       15/05/04
-       		- Added decomb telecide filter
-		- Added general purpose cache frame mechanism (need a better cache eviction method)
-       13/05/04
-       		- Fixed audio playback on big endian cpu
-       
-       12/05/04
-       		- added audio through SDL
-		- Fixed video/SDL init so that it is only a subsystem and moved SDL_init to main
-		- altivec yuv422 colors still wrong 
-       10/05/04
-       		- fixed mjpeg
-		- correcly place SDL window on top of GDK window
-		- rewrite MMX yv12_422
-		- optimize altivec yv12_422, still buggy
-       09/05/04
-       		- SDL ok on macOsX
-		- Fixed endiannes problem on mad decoder (my fault)
-       08/05/04
-       		- trying to guess FILM mpeg2
-		- cleanup on xv to add libSDL (mainly for win32/darwin)
-		- added libSDL for configure step
-		
-________________________2.0.24_________________________       
-       06/05/04
-       		  - tarballing for 2.0.24
-       05/05/04
-       		 - Fix segault when requantizing without audio
-		 - Fix segault when not enough audio in pass through mode
-       04/05/04
-       		 - cleanup on amd64 by Peter Niemayer
-		 - more gcc 3.4 fix
-		 - fixed makefile.am for distfile that was borked by newer autoconf/gideon
-       03/05/04
-       		- gcc 3.4 fix (x3)
-		- preparing for distclean package (duh! was a long time)
-		
-       02/05/04
-       		- busy having sex
-       01/05/04
-       		- removed some assert in filters
-		- jens : Fix autcrop
-       28/04/04
-       		- even better sub settings
-		- synced with mplayer resize of 1.0pre3
-		- Allow mplayer resize on non MMX
-		- Default resize is now mplayer
-		- Fixed Xv being disabled often
-       27/04/04
-       		- better chroma blending for sub
-		- better sub settings
-       25/04/04
-       		- Fixed external wav / big endian
-		- Do not attempt to run Xv in remote X mode
-		- Dynamically use best PP, do the same for swscale **** fixme *****!
-       23/04/04
-       		- Fixed freeze when there is not enough audio on mpeg PS write (was lvemux)
-		- Fixed display name for some audio types
-       22/04/04
-       		- Really fixed pulldown
-       21/04/04
-       		- Fixed pulldown for ffmpeg
-		- B frame still not working for mpeg
-       20/04/04
-       		- Fixed autoconf for macOsX -*** DROPPED I18N fixme ***
-       18/04/04
-       		- macOsX: Added audio support :), and some quartz stuff but not committed 
-		- some nasm stuff for cygwin
-		- decoder option for each segment (needed for swap uv)
-       14/04/04
-       		- fixed audio too short with pal2film
-		- since we are in rgb32 now, fully convert yv12->rgb
-				and do no drop last 2 lines
-       11/04/04
-       		- created x86_64 for ffmpeg + assembly
-		- jens: UI for bordersmear/blacken border
-		
-       09/04/04
-       		- changed busy to busyicon
-		- update to ffmpeg cvs
-       08/04/04
-       	
-       		- Fixed display frame
-		- Allow going to last frame (Jens)
-		- Check Parity for crop/add borders
-       07/04/04
-       		- Merged cygwin patch
-       27-30		
-       		- cygwin port/fix
-       26.03.2004
-       		- fixed unpacked for divx5 case
-		- cygwin fix
-		- fixed C version of yv12->RGB
-       24.03.2004
-       		- completed auto bitstream unpacker
-       23.03.2004
-       		- Jens : Add --info 
-		
-       21.03.2004
-       		- better reindex openDML files 
-		- reindex takes track number into account
-		- fixed save bmp
-		- Jens: Better handling of disapearing old dir
-		- dont crash when resampling to the same fq
-		- added pal2film and film2pal audiofilter
-       20.03.2004
-       		- altivec to rgb32 too
-		- fixed 2 pass (x86)
-		- fixed display phasis
-		- swap uv broken on g4
-		- save bmp broken
-		- Jens : Search file also in edl/curdir
-		
-       18/03/2004
-       		- cleanup for linuxppc & altivec
-		- fixed save jpeg
-		- added save as bunch of jpeg
-		- internal switch from RGB24 to RGB32 (faster and more suited for altivec :) )
-       17/03/2004
-       		- Jens : Fix openDML read with multiple riff header
-		- yv12rgb altivec= ok on macOsX
-       16/03/2004
-       		- First version of YV12 to rgb altivec code, spotted lots of mistake for macOsX / altivec
-       14/03/2004
-       		- Fixed and finished more output video
-       13/03/2004
-       		- more detail output (video / audio size)
-       11.03.2004
-       		- fixed ffv1rec
-       09.03.2004
-       		- fixed init of internal toolame
-       08.03.2004
-       		- ADM64 patch by axel arnold
-       06.03.2004
-       		- fixed import BMP
-		- Raise back video filter list after adding
-		- Double click = ok for filter list / filters
-		- Began support of UTF16 subs
-       04.03.2004
-       		- Fixed 2 pass reusing old log file with Xvid
-       03.03.2004
-       		- finished update of libmpeg2dec
-       02.03.2004
-       		- Updated libmpeg2dec to 0.4b
-       29.02.2004	
-       		- Max bitrate for DVD upped
-		- alsa 1.x support
-		- vlad patch
-		- fix the little bugs from 2.0.22 
-		- Some warnings removed
-		- added lrintf autodetect in ./configure
-		- added EMULATE_FAST in ./configure
-		- added iconv /const ** to ./configure
-		- Fixed bad reading of edl file ("a")
------------2.0.22---------------------------       
-       24.02.2004
-       		- Fixed a/v sync correction that was disabled due to silent parameters
-       22.02.2004
-       		- Fix requant to complete the current frame and not delay datas to the next
-		- aprintf is C friendly 
-		- Requant must have its timecode redone too.
-       21.02.2004
-       		- Applied JSC patch
-		- Synced with FFmpeg
-		- Updated ffv1rec to xvid4 compatible stuff
-       17.02.2004
-       		- Fixed 2Gb on save mpeg PS spotted by wildsack
-		- More tcrequant stuff
-		- Store seq header in extra data, use it if needed in pass through mode
-		- Added mjpa to mjpeg synonyms
-		
-       16/02/2004
-       		- fixed the alignBits stuff
-		- began injecting tcrequant
-       15/02/2004
-       		- Changed (again) the way the mpeg2 index is built
-		- Fixed the gop duplicate bug when saving in DVD ps mode
-		- Updated the Gop restamp code in lvemux
-       12/02/2004
-       		- Fixed audio split into audio frames
-		- Found (?) a bug in lvemux at 384 kbps
-       11/02/2004
-       		- Fixed gop update , only first packet is seen as async for AC3.
-       10/02/2004
-       		- Began fixing the way the audio is written -> gop_update is bugged!
-       09/02/2004
-       		- Added a/v shift to save mpeg PS when audio in copy mode
-       08/02/2004
-       		- fixed drift in mpeg
-		- Recompute gop header in case of copy to DVD ps
-		- More subs from daniel
-		- Fixed passthrough mode
-       06 &07 / 02/2004
-       		- Fixed c++ism in muxout spotted by anish
-		- Changed the way the index is built to be compatible with pass through
-       05/02/2004
-       		- Added mpeg2 sync for external mpegaudio
-       04/02/2004
-       		- More subtitle from Daniel
-		- Fixed fps in case of fps changing filter + encoding to mpeg PS
-		- Fixed ffmpeg audio not setting the byterate field (!)
-       03/02/2004
-       		- Factorized some code between mpeg encoding & pass through
-		- Fixed code for AC3 in lvemux
-       01/02/2004
-       		- another endianness fix ogm
-       31/01/2004
-       		- moved CVS to berlios<<-------------------
-		- Merged Daniel Lima subtitles fixes
-		- Build audio index separately from video index > much quicker
-		- Cleaned up the whole ogg audio mess, nicer now, can add tracks if needed
-		- Endianness fix for OGM
-       29/01/2004
-       		- Seeking ok, a tad slow. plop at playback.
-       28/01/2004
-       		- Ogg playback ok, seeking is a problem.
-       27/01/2004
-       		- First libvorbis init successfull
-		- complete init with header/comment/codebook packet read ( :P )
-       26/01/2004
-       		- more ogg
-       25/01/2004
-       		- ogg audio
-		- fix for weird avi header made by streamer
-       21/01/2004	
-       		- lavcodec patch for siemens
-		- fred patch for 3gp -> avi
-		- Merged & modified Entropy patch for better audio sync
-		- Fixed the bug of qscale x=1--W instead of x=0--W-1
-       20/01/2004
-       		- speedup for soften
-       18/01/2004
-       		- Fixed external wav crash
-		- Added ForcePP filter
-		- Valgrind -> some little fix
-		- Added soften (uncomplete)
-       17/01/2004
-       		- New ui for SVCD/DVD
-		- Split save mpeg2 es/mpeg2 ps -> new menu entry
-       16/01/2004
-       		- Fixed wrong bitrate for libtoolame 
-		- Fixed audio detection when audio process is on
-		- More stuff into lvemux
-		- More fix for SVCD/DVD mixing
-       15/01/2004
-       		- began adding lvemux
-       14/01/2004
-       		- Merge WLA & Jens patches
-		- Better handle MP2 bs MP3
-		- Began integrating lvemux
-		- Fixed xvid4 reuse of log file
-       13/01/2004
-       		- dont pop out null frame when B frames are on
-		- fix (?) for too many dropped B frame  + incorrect reordering
-		 
-       12/01/2004
-       		- better direct input for frame#
-		- Fixed interlaced/widescreen settings (scroll lock)
-       11/01/2004
-       		- preliminary support for libtoolame encoding
-		- added encode_interleaved to libtoolame
-		- try to keep the B frames at the beginning by replacing them by dupe of I frame
-       10/01/2004
-       		- better support for 8 bits pcm audio
-		- endian fix for save audio /PCM
-		- added libtoolame beta (with a always beta software it is ok)
-       09/01/2004
-       		- Try to better detect type2 avi
-       08/01/2004
-       		- reverted closed gop stuff
-		- fixed buffered audio filter using same buffer for in and out (duh!)
-		- disabled post proc for mpeg1/2 for the moment
-       07/01/2004
-       		- dropped sox, trying to use libresample instead (early job)
-       06/01/2004
-       		- Better max bitrate for ffmpeg
-       04/01/2004
-       		- Update to ffmpeg CVS
-		- Look at destructor for mpeg codec <<<<
-		- Use ffmpeg 2 pass engine for XSVCD
-       03/01/2004
-       		- Begin adding postprocessing to mpeg1/2
-		- Unified PP, dropped mplayer one, taken the one from libavcodec instead
-		- Merged Jens patch
-		
-       02/01/2004
-       		- Added ui for kernel deint
-		- Display time shift between audio and video
-		- Fixed closed gop 
-		
-       01/01/2004
-       		- Fixed cache issue when the cached frame was the forward ref frame
-			(still some ugly stuff here)
-		- Added D Graft kernel deint
-       31/12/2003
-       		- Put back ffv1 patch for frame type
-		- more lavc ui stuff  
-       30/12/2003
-       		- UI -> both save bmp & save jpg are there
-		- save bmp fixed on big endian cpus
-       29/12/2003
-       		- Updated po file  + vcodec by type detection
-       27/12/2003
-       		- Fix for missing 1st sub (workaround), thanks ron
-       26/12/2003
-       		- Added half D1 res + command 
-		- split codec configuration from edl file
-		 
-		
-------------------------2.0.20---------------------		
-       20/12/2003
-       		- Fixed overflow in xvid 2 pass mode
-		- emulate_fast_int fix for solaris & bsd
-       16/12/2003
-       		- inttypes BIG cleanup (solaris/amd64 stuff)
-		- xvid4 finish and init " a la " mplayer
-       13/12/2003
-       		- Fix for hpel xvid4
-		- Default bitrate is 1500 (was 1.5)
-		- Try to be 64 bits clean
-       12/12/2003
-       		- Fixed mpeg indexer ui
-		- Xvid4 a la jakub
-       10/12/2003
-       		- indexer now also shows # of channels and bitrate
-       09/12/2003
-       		- Added some more Xvid options. Not working properly now
-		- Continued mpeg audio scan. More user friendly now. (2/3).
-       08/12/2003
-       		- Finished 2pass xvid + some i/f cleanup. 
-		- Added m2vrequant to the addond dir
-		- Markers taken into account for requant
-		- First part of better autodecting audio tracks from mpeg file
-       06/12/2003
-       		- Basic Xvid4 working
-       04/12/2003
-       		- Begun Xvid 4 support
-		- Fixed Requant
-		- Fixed --audio-toolame (thx bruce1271)
-       01/12/2003
-       		- Disabled buggy altivec code in libavcodec
-		- Mpeg2dec is 0.3.1 -> partial update to take gcc bug for altivec (gcc < 3.3). *altivec.c from 23 April 2003
-				(should be macOsX safe too)
-       30/11/2003
-       		- M2V Requantizer
-		- Most dialog are now transient to main
-       29/11/2003
-       		- Fixed lagrange multiplier for newer ffmpeg version
-		- Show quantizer for both xvid and lavcodec
-		- Added requantizer menu + requantize mpeg menu
-		- Fixed bitrate histogram for avi/openDML
-       28/11/2003
-       		- Sox resample almost ok
-		- Misc fix for audio buffering
-		- Added resample and append to cli commands
-       26/11/2003
-       		- PPC cleanup (ffmpeg) no altivec yet
-		- Huge speed increase in audio processing, resample to X is ok for mono
-	23/11/2003
-		- Forgot to re-enable MMX optim for Xvid in CQ mode (oops)       
-       18/11/2003
-       		- Slowly incorporating lvemux mux engine
-		- Partially fixed Xv redrawing bug
-       17/11/2003
-       		- Fix for ffmpeg4 ui being stuck
-       14/11/2003
-       		- UI continued (keyboard shortcut)
-		- Fixed modal mode for ffmpeg tuning
-		-
-       13/11/2003
-       		- New UI
-		- Fix VCD
-       09/11/2003
-       		  Fix for slightly broken avi header (non standard at least) -> Cagnulein
-		  Fixing MacOSX build (fun stuff :) )
-       03/11/2003 Deinterlace non ivtc-ed frames
-       01/11/2003----------2.0.18-------------
-       28/10/2003
-       		- Fixed displayed Qz/Size/Bitrate for Pass1 (mpeg)
-		- Fixed trainling frames for mpeg1/2
-		- Change from CQ=6 to CBR=avg for pass 1 + gross patch disable padding
-       18/10/2003
-       		- Fixed FFV1 keyframe
-		- Fixed MP ivtc (?)
-		- Began to put back 3:2 pulldown in ffmpeg
-       16/10/2003
-       		- Solaris/Big endian fix for openDML
-       15/10/2003
-       		- Fixed rebuild Keyframe for gcc 2.95 (strained the stack too much)
-		- Do flush to avoid delaying the io too much
-		- Added new ui : DIA_SVCD, added 16/9 and interlaced to ffconfig  & ui
-       14/10/2003
-       		- Fixed potential round up error in detc
-		- Fixed ctrl+[]
-       13/10/2003
-       		
-       		- Some keyboard shortcuts added
-		- Save ffmpeg mpeg2 audio with valid encoding (we take mp3 closest)
-       12/10/2003
-       		- Fixed some openDML offset 
-		- Arts : reverted to default settings
-		- Cache : Always on, side effects ?
-		- Switched from detc to ivtc
-		- Fixed audioIdx not initialized
-       11/10/2003
-       		- 32/64 fix for openDML
-		- fix for extraData audio & video
-		- audio track added for openDML super index
-		- fix for dual audio openDML
-		- fix for flags not updated for P frames
-		- tag junk field with avidemux 
-		- smarter choice between openDML/regular avi
-       10/10/2003
-       		- Regular index workish commiting
-       09/10/2003
-       		- Continued openDML + regular + reindexer
-		- Reverted to save bmp
-       07/10/2003
-       		- Fixed vprocess for good
-		- Fixed frame start/end in edl
-       05/10/2003
-       		- Fixed extraData len in header (Joseph)
-		- Layout skeleton for openDML (empty now)
-       04/10/2003
-       		- Began to remove multi char const (gcc 3.3)
-		- Fixed length computation for save audio (hope i did not break it)
-		- Be more responsive / update more often when saving audio (little loss of perf prolly)
-       03/10/2003
-       		- Fixed mplayer detc port. Removed ivtc.
-       02/10/2003
-       		- Fixed xvid 2 pass
-		- Save MarkA / MarkB in edl too
-		- Merged Laurent Culioli patch for configure --disable-mmx
-       01/10/2003
-       		- Merged Anish FreeBSD compatibiliy stuff
-		- Began to port detc - not working as of now
-       30-09-2003
-       		- Half fixed black border (still left & right chroma to do)
-		- First step to big avi support
-       28-09-2003
-       		- Merged Set display fix for mpeg encoding
-		- Merged Dopez sync fix for ffv1rec
-		- Added lavdeinterlace as video filter
-		- Added Vincent Strubel ppc configure stuff
-----------2.0.16----------       
-       26-09-2003
-       		- Merged h263/lavcodec stuffing from Michael Niedermayer
-       25-09-2003
-       		- set name for SVCD/DVD/X*CD
-       22-09-2003
-       		- Fixed multiple toggling
-		- Fixed bad ifdef xvid_cvs
-		- Fix unneccessary crop/resize for SVCD res
-		- Fix SVCD/... res so that we do 1:1 -> 4:3 instead of 1:1 -> 1:1
-       21-09-2003
-       		- Now everybody use the new encoding ui
-		- Fixed nasm clash between mpeg2enc and xvid (dct_mmx stuff)
-       20-09-2003
-       		- Fixed byte/bit in *VCD when called from cli (ugly need to rewrite the whole stuff)
-       19-09-2003
-       		- Updated doc a bit
-		- Fixed DVD output a bit too
-		- Fixed mmx for mpeg2enc + build on non mmx system
-       18*09*2003
-       		- Fix reset seg not complete
-       17/09/2003
-       		- mpeg2enc 1st pass with Q=4 -> better
-		- same for xsvcd
-		- Fixed vbv & bitrate for xsvcd should not be rejected anymore
-       16/09/2003
-       		- Migrated CVS to tuxfamily.org . Thanks to them :)
-       09/09/2003
-       		- CODEC: Mpeg2enc, began to nasm-ism it., still slow
-       07/09/2003
-       		- CODEC: Mpeg3enc ok for VCD, still not really good for SVCD
-		- DEMUX: Fixed a bug in aviaudio ->read spotted by efence
-       05/09/2003
-       		- CODEC: Initial import of mpeg2enc 1.6.90
-				Making mpeg3enc out of avidemux
-15-5       
-      04/09/2003
-      		- UI: Set loaded file title
-		- EDITOR : Fix last frame being dropped
-		- config : Try to be clean with freeBSD directly through config.in.in
-		- UI: Make a nicer display of bitrate histogram
-       02/09/2003
-       		- EDITOR : Restore video process mode correctly in EDL
-		- CODEC: Fixed gop size & custom matrix
-       01/09/2003
-
-       		- CODEC: Added custom matrix/gop size
-		- UI: Display mpeg1/ mpeg2 in codec
-		- Codec: Set user tunable gop size & qz matrix (->buggy)
-       31/08/2003
-       		- UI: Preview killed if output is set
-		- XVCD: Added min & max bitrate (works only in 2 pass mode)
-		- UI : Added histogram
-		- TOOLKIT: Added gtk_entry read/write
-		- DEMUXER : Expanded avi to 64 bits internally.
-		- configure : Check for pkg-config && gtk flags a bit harder
-       30/08/2003
-       		- New resize with PAL and 4/3 16/9 taken into account
-		- XVCD / XSVCD
-       26/08/2003
-       		- FILTER : Fixed D3D for good this times
-		- EDITOR : Load edl when SVCD type
-		- FFMPEG: Updated to 0.4.7 + mpeg2 encoder from CVS
-       25/08/2003
-       		-FILTER: Fixed HQD3D not allocating enough memory
-       		-FILTER: Fixed(?) D3D/ HQD3D floor/ceil errors
-		- FILTER : Finished chroma shift
-
-       24/08/2003
-       		- EDITOR 	: Codec fine tuning is saved in edl file (.specific part)
-		- FILTER 	: Began going visual for chroma shift
----2.0.15-1---
-       23/08/2003
-       		- FFV1 : ~/.ffv1recrc + 2 Gb limit
-		- FILTER: Fixed slow / bad redraw for crop
-		- lavcodec: Merged AC3 patch
-	22/08/2003
-       		- FILTER: Fixed subtitles (multi line case ->build id)
-		- EDITOR : Fixed cache not being activated
-		- DEMUX: Scan jpeg header to find width & height (crappy)
-       21/08/2003
-       		- NUV : Correct recomputation of normal bitrate when fq!=44.1 khz
-		- DEMUX : Added partial support for jpeg files (still need to set w & h)
-       20/08/2003
-       		- AVIW: Patched aviwrite so that microsecperframe is never null -> bad fix, compute
-				it from fps
-		- NUV: Added support for 'N' tag -> audio frequency. Sync broken if !=44,11 khz
-       19/08/2003
-       		- FILTER:Fixed HD D3D -> ??
-		- CODEC:Fixed max I frame interval for Xvid
-       18/08/2003
-       		- FFV1: ffv1rec cleanup, Mjpeg & mpeg still buggy Grrr
-       17/08/2003
-       		- CODEC: Mjpeg encoder from lavcodec
-		- CODEC: Save as jpeg instead of bmp
-		- DEMX: Began modifying in pict to load jpeg too
-******2.0.14***********
-
-2.0.13-3
-       15-08-2003
-       			- FILTER : Clean up of Drop filter
-			- GUI 	: Keep selected filter after up/down
-       11/12/13-08-2003
-			- Added gui color sel
-			- Added support for mythTv "T" frame
-       11-08-2003
-			- Tried to add color selection to subtitles
-2.0.13-2
-       10-08-2003
-       			- CONF: Merged (some) netbsd patches
-			- CODEC: Added swap uv option for ffmpeg
-			- EDITOR: Fixed audio bug which was working only if there was 1 reference
-       09-08-2003
-       			- NUV: Fixed extraLen in nuvheader being unitialized
-			- GUI: Changed the keymapping [] for A/B, home/end to goto(0) / goto(end)
-			- FILTER: New gui for SRT, lookup
-			- FILTER : Cleanup sub parser
-			- FILTER : Changed the aliasing method for subs
-       08-08-2003
-       			- GUI: Do not even try to index divx5 vop packed
-			- Began to work on new subtitle config
-2.0.13-1-----
-       07-08-2003
-       			- GUI: When deleting frames, reset a & b to 0, max
-			- WKB: Load file with space in the name
-       06-08-2003
-       			- 3GP : Added big size support (up to 4gB)
-			- 3GP : Added stss atom support (keyframe)
-			- 3GP : Added support for SVQ3 atom
-			- Codecs : Added support for SVQ3 lavcodec
-	05-08-2003
-			-3GP: Fixed the bih field (codec stayed at XXX when saving as copy)
-			- 3GP: Fixed the const sample/ chunk case
-			- 3GP : Added 8bits unsigned pseudo codec
-       04-08-2003
-       			- 3gp:Fixed fps computation for 3gp/olympus
-			- 3gp: Fixed reindex for 3gp/olympus
-			- 3gp :Fixed esds header for mp4 video (3gp)
-			- Merged jens patches
-			- 3gp :Added support for olympus raw audio (8 bits -> problem)
-			- ** Fix when all sample the same size !!**
-       03-08-2003
-       			- Rewrote the track handling for avi , now accept track id beginning by 0/1/2
-			- fixed save dual which was not working
-***03-08-2003 ***2.0.12
-
-	3-08-2003
-			- Try to accept avi where audio is first (at least grab video)
-			 need to rethink it...
-
-       02-08-2003
-       			- Added decoding for olympus like .mov
-			- Fixed DVB buggy stream (laclasse)
-			- Ignore errors for tivo files (indierocksteve)
-			- Modified stuff to include ffv1rec in package
-       29-08-2003
-       			- Merged Anish Freebsd patches
-			- Fixed Asher problem with crop
-       28-08-2003
-       			- Added support for any ffv1rec codec
-			- Modded ffv1rec to add fourcc/extradata  (huffyuv / ffv1 available from now)
-       27-07-2003
-       			- Added ffv1rec to source tree (will come back on it later)
-			- Fixed key shortcuts
-       26-07-2003
-       			- Added autodetect for mpeg audio
-			- Use ffmpeg mjpeg decode if no mjpegtools
-       24-07-2003
-       			- Fixed DVD params being used instead of SVCD (indie)
-			- New stuff in autoconf to deal with freeBSD/power pc etc...
-			- Jens patch for end/start check
-       23-07-2003
-       			- 3gp video & audio support (no AMR codec for audio)
-			- Fixed false message for divx5
-			- Fixed # frame count for copy/paste
-
-       21-07-2003
-       			- Added check video
-			- Added copy/paste
-			- Began 3GP read support
-	18-07-2003
-			- Added mpeg1 inside avi support (rcooley)
-			- Added support for FFV1 codec (nice and fast)
-	17-07-2003
-			- update ffmpeg to cvs
-	16-07-2003
-			- configure.in.in fix for powerpc
-			- dont go to frame 0 after cut
-			- fix the case when we load a edl file which as less frame than the current edl filesel
-			- File type autodetect for solaris/powerpc
-			- Sound playback for solaris/powerpc
-			- Fixed smart copy (oops)
-2.0.8-10-----------------
-       09-07-2003
-       			- Solaris mostly ok except OBJ_MMX to manually remove
-			- Fixed the audio/video conf swap
-			- DVD/SVCD/VCD is now using the encoder gui
-			- Applied Jens autoswap disabler patch
-			- Added are you sure in encoding stop button
-       08-07-2003
-       			- More solaris
-			- New avi writter Copy mode :
-				+ Ok for MP3 VBR x1
-				+ OK for MP3 CBR x1
-				+ OK for wma x1
-	07-07-2003
-			- Fix for process mode vids
-			- More solaris stuff
-			- libmpeg2 should compile on non intel cpu
----------2.0.9-1--------------
-       06-07-2003
-       			- Autocrop
-       05-07-2003
-       			- Gtk2 isation of xvid
-			- Xvid params simplified, now closer to the windows version
-			- Crop Gtk2 ised (except autocrop)
-
-       04-07-2003
-       			- Dual audio save back online
-			- Fixed memory leak in save copy
-			- Fixed copy mode if mpeg type is selected
-			- Merged first part of solaris compatibility stuff
-       02-07-2003
-       			- Try to detect MP3 VBR (crude)
-			- Save prefs without updating codec stuff at exit (last working dir saved)
-			- Canonized name to avoid current directory problem at filesel level
-					** Fixme : Should be canonized also for idx/workbench etc...**
-       30-07-2003
-       			- Gtk2isation of muxer options
-			- Fixed SVCD (buildid)
-	29-06-2003
-			- Gtk2 isation of Mplayer postproc  + display correct strength
-			- Gtk2isation of enterInt & enterFloat
-			- Auto iconification of main window when encoding
-			- Gtk2-isation of XVCD gui
-			- Google found the solution for the adjust crap : gtk_range_get_adjustment
-				Could be simpler in Gtk doc GrumbleMumble
-------------2.0.8---------
-       24-06-2003
-       			- Added audio conf & process mode
-			- Added video process mode
-			- Need video codec conf and we are done :)
-       23-06-2003
-       			- Added audio & video codec to the saved infos in workbench
-			- Added save audio filter in workbench
-			- Fixed inapropriate delete _incoming in avisave. (?).
-       22-06-2003
-       			- More update stuff (should be clean now)
-			- Began remerging the whole save stuff
-2.0.7-4
-	18-06-2003
-			- Fixed update in a cleaner way
-	17-06-2003
-			- Fixed update of preview window by  2 patch
-			- Added reference frame # for subtitle
-       16-06-2003
-       			- Fixed call to xvid when divx is not present (bad ifdef)
-			- added non reg test to cvs
-       15-06-2003
-       			- Fixed abort for nuv loading properly (jens Arm). Probably a memory leak or two there...
-			- Changed behaviour, now save [A,B[ like for cutting
-			- Made GUI for mplayer (HQ)D3D filter
-			- Tested a bit the new engine on VCD/XVCD & Xvid : seems okay
-       12-06-2003
-       			- Continued splitting the getLastFilter / getFirst filter in two parts
-				(one for the whole stream, one for a piece of it like audio)
-       11-06-2003
-       			- Began the new null & raw filters
-       09-06-2003
-       			- Patched (again) libavcodec to use its vop packed detection stuff
-			- Rmed divx dependancy
-			- New mod for new mythtv comptype=4 stuff ( Scott Doty)
-
-	08-06-2003
-			- Merged Jens patch + Divx 5.0.5 decoder (ugly patch)
-			- Try to detect vop packed stream (even uglier)
---2.0.7-1
-	03-06-2003
-			- Added non-HQ mplayer denoise3D
-	02-06-2003
-			- Fixed rotate (Martin Schipany)
-       01-06-2003
-       			- Fixed the assembly strangeness in 2.0.6
-			- Began to add Mplayer Denoise3D
-			- Fixed the warning due to multiple destroy call for preview
---2.0.6--
-       31-05-2003
-       			- Fixed fps saving when altered by filter
-			- Fixed cancel in pass 1
-       30-05-2003
-       			- Fixed the strdup bug in export VCD
-			- Mostly debugged the mmx version & C version of ilace count (could be faster)
-			- Works except the 0-4 case where pulldowned frame are across two 5images blocks
-			- Added a pulldown filter.
-
-       	29-05-2003
-			- Played with mmx.h, very handy to debug mmx code
-	28-05-2003
-			- Began merging and asming the interlace count code
-
----2.0.4---
-26-05-2003
-			- Fixed clock
-			- Added nuv indexing / saving/loading
-			- Played with rivatv and found the source of the noisy video . Nice picture now :)
- 25/05/2003
- 			- Fixed clock (Jens)
- 24/05/2003
- 			- Fixed (again) mpeg demuxer. Workaround a gcc bug ?. Weird.
-  23/05/2003
-  			- Began adding support for divx 5.0.5 encoder. At least it does compile
-			- Began IVTC
-			- Fixed local problem with toolame 44.1 -> 44,1  (look at lame too ***)
--------2.0.3-3
-  22/05/2003
-  			- Fixed bug spotted by papaf about mpegQuant for XVCD
-  21/05/2003
-			- Hopefully fixed the mpeg indexing bug
-			- Removed the system_end_of_stream check
-			- Upped autocut to 3gb for snowdog
---------2.0.3-2
- 19/05/2003
-			- Fixed the variadic macro mess for Gcc 3, have to look for gcc 2.95
-			- Fixed gcc 3.3 rejecting string as char, almost no more warnings :)
-			- Made a slightly better printf system for debug
-			- Dropped last lonely B frame in case of AVI (probably a better way)
-			- Ditto for mpeg, we try to keep more frames toward the end
-			- Removed the end-of-stream check for mpeg (0xb9)
-18/05/2003
-			- Began separating Mpeg2 file i/o and codec & played ET : Best covert ops 2 times    :)
-			- It is mostly working, but there is a speed penalty, probably out of order access
-			- Need to completly rewrite the audio handling part...
-17/05/2003
-			- Began to deal with CBR/VBR audio in editor
-			- Updated ffmpeg, that fixes the problem with pict_type
-			- Patched so that hurry_up returns the correct value
-			- B frame strategy does not work with PB frame ala DIVX, should find a way to split it back to P/B frames
-			- Re-silenced ffmpeg & forced aspect ratio 2
-16/05/2003
-			- More B frame stuff, ok when encoding from ADM, not when re-ordered from external avi file
-			- Added a frame type indicator
-			- Fixed interpretation of libavcodec frame type -> do not use frame.pict_type anymore
-			  -> now globally working, time to do mpeg1/2
-15/05/2003
-			- B-frame reordering for avi
-			- Min Q for SVCD-mpeg1 back to 2, max 20
-14/05/2003
-			- B frame handling logic added to editor
-13/05/2003
-			- Began to add framework support for B-frame...
-12/05/2003
-			- Big warning clean-up
-			- Added underflow flags to 2 pass, and temptative padding
-			- Fixed preview by gtk2 -ised it a bit
-11/05/2003
-			- Fixed display of add borders
-			- Fixed the make dist engine
-			- Removed the buildFfmpeg script -> not used anymore
-			- Time to set a release avidemux 2.0.2
-10/05/2003
-			- Set lower quantizer incs  for XVCD
-			- Set aspect ration according to region
------------------ preview12 -------------------
-09/05/2003
-			- 2passXvid with ffmpeg mpeg1 encode is workish       
-08/05/2003
-			- Began an hybrid of FFmpeg mpeg1 encoder
-					with xvid 2 pass algorythm. It will enable max rate control later.
-
------------ preview 11--------------------------
-07/05/2003
-
-			- Added some i18n to subtitles, now handles russian / czech and german.
-			- a lot of patches to This
-05/05/2003
-			- Fixed contrast gui
-			- Merged Jens 3/4 patches
-			- Alsa is working now, borrowed some bits from Mplayer (sw param)
-					some pops & cracks , dunno where it is coming from
-			- LPCM pseudo codec
-			- Added PCM mpeg program audio track support Jva
-04/05/2003
-			- Fixed OGM (255/0)
-			- Began to add alsa audio support
--------------       preview10-----------------
-02/05/2003
-			- OGM demuxer for video is work-ish albeit slowly
-01/05/2003
-			- More OGM stuff
-			- Apparently mpeg2 from CLI  is broken       <<< Fixed
-30/04/2003
-			- Redone masking for subtitle
-			- Merged Jens patches
-			- CTRL+G is back
-29/04/2003
-			- Merged patch from Thomas schank (filename protection for mpeg2enc)
-			- Gtkisation of mpeg2opt, Jens will not be happy ...
-			- Inlined read8/16/32 for mpeg2 parser should be significantly faster
-28/04/2003
-			- Partial is back.
-			- Skeleton for OGM reader & include files
-27/04/2003
-			- Fixed save wkb with no filter
-			- Fixed load workbench from cli with wrong name
-			- Merged jens patch
-			- Lame piping (does not work)
-			- Pipe to anything (not completed)
-			- Fixed encoder (cli -> jens)
-			- Re-enabled normalize & downsample for command line (ugly)
-			- Added cli mode for toolame
----------- preview9--------------------
-25/04/2003
-			- Cleanup of audio filter chain builder
-			- Fixed LOCALEDIR
-			- toolame is autodetected at buid time
-			- Remerged Jens save mpeg patch
-			
-24/04/2003
-			- First toolame piping stuff.
-23/04/2003
-			- Fixed multiple working when saving avi in process mode
-			- Fixed inversion on audio type for mpeg (AC3/mpeg)
-			- Fixed a couple of warnings (some of them interesting)
-			- Added entry for pipe audio
--------- preview 8--------
-21/04/2003
-			- Working -> DIA_working (gtk2), no more global stuff.
-			- Created DIA_busy for simple waiting stuff
-			- Removed GUI_workin stuff
-			- Opening mpeg ->index, and open it (a bit ugly), no more failed
-			- Began adding slow unoptimized 411/422 converter for FFmpeg
-20/04/2003
-			- Upgraded libmpeg2 to 0.3.1, simpler...
-			- Added Clock API
-
-18/04/2003
-			- Save image is back
-			- cleaned up yv12rgb
-			- Gtk2isation of DNR
---- preview 7---
-17/04/2003
-			- Finished incorporating Mplayer resize
-16/04/2003
-			- Fixed lanczos3 (and bicubic) filter
-			- Began to add mplayer resize func
-15/04/2003
-			- New filter : Smart swap that tries to identify the frame that need
-				field swapping.
-14/04/2003
-			- New filter : chroma shift
-			- Fixed click beside the slidebar to jump ahead a bit
-			- Added Anish
-			- Tried a patch for RTJpegN (blind patch) for marcooo and the Suse 8.2
-13/04/2003
-			- New xml stuff ~ 90 % ok, some bugs left  / partial still broken
-			- Everything should be mostly functionnal now
-			- Check that we have really write access (Simon's request)
-12/04/2003
-			- Save filter as XML -> now mandory ? 50 % done
-			- Switching from binary save to xml save -> everything is broken...   
-11/04/2003
-			- Separate & merge fields (cheap)
-			- Began working on new filter load/save in XML
-				(time to learn how libxml works)
-10/04/2003
-			- Added filters swap fields, keep odd & keep even
-08/04&07/04
-			- New GUI for resize engine (16/9 eme and slider)
---preview5--
-04/04/2003	Birthday :)
-			- Gtk2 isation of filters
-			- Gtk2isation of convolution filters
-			- Set nicer window size (jakub)
-			- Added reset segments
-			- New filesel, gtk2 way.
-
-03/04/2003
-			- Merged Jacek Pliszka <pliszka at phyun0.ucr.edu goto black frame patch
-02/04/2003
-			- Auto-open index in case of mpeg
-			- Only remember successfully opened files
-			- Resize recent file dialog
-01/04/2003
-			- Re-coded save/load workbench
-			- Load workbench as file (ugly)
-			- Fixed xv leaking colors (workaround)
-			- Fixed CTRL+X
-31/03/2003
-			- Time map menu fix
-			- Audio device clean up + saved in pref
-
-30/03/2003
-			- Update ffmpeg to yesterday CVS
-27/03/2003
-			- Fixed Xv  Made preview 3.
-23&24/03/2003
-			- i18n
-22/03/2003
-			- 0.9RC3 is out
-			- editor :continued splitting editor into segments and videos
-			- played mame a bit, galaga still my favorite game.
-21/03/2003
-			- Began trashing editor
-19/03/2003
-			- About & mjpeg GUI
-			- mjpeg config consistent with others
-18/03/2003
-			- Finished audio codec settings
-			- Fixed change FPS
-			- rewrote properties dialog in gtk2
-17/03/2003
-			- More clean- up 
-			- Menus mostly complete
-			- Most functions present       
-
-16/03/2003
-			- Fixed a process & v process toggle buttons
-			- Decorellated menu binding from glade :)   
-			- Finished audio filters    
-			- Video codec + configure
-			- Audio codec + configure
-			- Workish solution for myth TV
-			
-15/03/2003
-			- Removed old GUI for good
-			- Fixed Xv release
-			- Audio filter setup 50 % done
-			- Merged new version of RTjpeg
-			- Have a nuv / mythTv nuv compatible stuff -> reread carefully.       
-14/03/2003
-			- Fixed configure about Xv stuff
-			- Make patch-o-matic for gui_main       
-			- Huge cleanup on callback.[ch] and interface.[ch]
-			- Began switching from old GUI to new GUI 
-			- new layers  UI_ and render_
-13/03/2003
-			- First clean up of renderer (no more shared stuff)       
-12/03/2003
-			- Began splitting new GUI in ADM_gui2       

Deleted: branches/avidemux_2.5_branch_gruntster/INSTALL
===================================================================
--- branches/avidemux_2.5_branch_gruntster/INSTALL	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/INSTALL	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,167 +0,0 @@
-Basic Installation
-==================
-
-   These are generic installation instructions.
-
-   The `configure' shell script attempts to guess correct values for
-various system-dependent variables used during compilation.  It uses
-those values to create a `Makefile' in each directory of the package.
-It may also create one or more `.h' files containing system-dependent
-definitions.  Finally, it creates a shell script `config.status' that
-you can run in the future to recreate the current configuration, a file
-`config.cache' that saves the results of its tests to speed up
-reconfiguring, and a file `config.log' containing compiler output
-(useful mainly for debugging `configure').
-
-   If you need to do unusual things to compile the package, please try
-to figure out how `configure' could check whether to do them, and mail
-diffs or instructions to the address given in the `README' so they can
-be considered for the next release.  If at some point `config.cache'
-contains results you don't want to keep, you may remove or edit it.
-
-   The file `configure.in' is used to create `configure' by a program
-called `autoconf'.  You only need `configure.in' if you want to change
-it or regenerate `configure' using a newer version of `autoconf'.
-
-The simplest way to compile this package is:
-
-  1. `cd' to the directory containing the package's source code and type
-     `./configure' to configure the package for your system.  If you're
-     using `csh' on an old version of System V, you might need to type
-     `sh ./configure' instead to prevent `csh' from trying to execute
-     `configure' itself.
-
-     Running `configure' takes a while.  While running, it prints some
-     messages telling which features it is checking for.
-
-  2. Type `make' to compile the package.
-
-  3. Type `make install' to install the programs and any data files and
-     documentation.
-
-  4. You can remove the program binaries and object files from the
-     source code directory by typing `make clean'.  
-
-Compilers and Options
-=====================
-
-   Some systems require unusual options for compilation or linking that
-the `configure' script does not know about.  You can give `configure'
-initial values for variables by setting them in the environment.  Using
-a Bourne-compatible shell, you can do that on the command line like
-this:
-     CC=c89 CFLAGS=-O2 LIBS=-lposix ./configure
-
-Or on systems that have the `env' program, you can do it like this:
-     env CPPFLAGS=-I/usr/local/include LDFLAGS=-s ./configure
-
-Compiling For Multiple Architectures
-====================================
-
-   You can compile the package for more than one kind of computer at the
-same time, by placing the object files for each architecture in their
-own directory.  To do this, you must use a version of `make' that
-supports the `VPATH' variable, such as GNU `make'.  `cd' to the
-directory where you want the object files and executables to go and run
-the `configure' script.  `configure' automatically checks for the
-source code in the directory that `configure' is in and in `..'.
-
-   If you have to use a `make' that does not supports the `VPATH'
-variable, you have to compile the package for one architecture at a time
-in the source code directory.  After you have installed the package for
-one architecture, use `make distclean' before reconfiguring for another
-architecture.
-
-Installation Names
-==================
-
-   By default, `make install' will install the package's files in
-`/usr/local/bin', `/usr/local/man', etc.  You can specify an
-installation prefix other than `/usr/local' by giving `configure' the
-option `--prefix=PATH'.
-
-   You can specify separate installation prefixes for
-architecture-specific files and architecture-independent files.  If you
-give `configure' the option `--exec-prefix=PATH', the package will use
-PATH as the prefix for installing programs and libraries.
-Documentation and other data files will still use the regular prefix.
-
-   If the package supports it, you can cause programs to be installed
-with an extra prefix or suffix on their names by giving `configure' the
-option `--program-prefix=PREFIX' or `--program-suffix=SUFFIX'.
-
-Optional Features
-=================
-
-   Some packages pay attention to `--enable-FEATURE' options to
-`configure', where FEATURE indicates an optional part of the package.
-They may also pay attention to `--with-PACKAGE' options, where PACKAGE
-is something like `gnu-as' or `x' (for the X Window System).  The
-`README' should mention any `--enable-' and `--with-' options that the
-package recognizes.
-
-   For packages that use the X Window System, `configure' can usually
-find the X include and library files automatically, but if it doesn't,
-you can use the `configure' options `--x-includes=DIR' and
-`--x-libraries=DIR' to specify their locations.
-
-Specifying the System Type
-==========================
-
-   There may be some features `configure' can not figure out
-automatically, but needs to determine by the type of host the package
-will run on.  Usually `configure' can figure that out, but if it prints
-a message saying it can not guess the host type, give it the
-`--host=TYPE' option.  TYPE can either be a short name for the system
-type, such as `sun4', or a canonical name with three fields:
-     CPU-COMPANY-SYSTEM
-
-See the file `config.sub' for the possible values of each field.  If
-`config.sub' isn't included in this package, then this package doesn't
-need to know the host type.
-
-   If you are building compiler tools for cross-compiling, you can also
-use the `--target=TYPE' option to select the type of system they will
-produce code for and the `--build=TYPE' option to select the type of
-system on which you are compiling the package.
-
-Sharing Defaults
-================
-
-   If you want to set default values for `configure' scripts to share,
-you can create a site shell script called `config.site' that gives
-default values for variables like `CC', `cache_file', and `prefix'.
-`configure' looks for `PREFIX/share/config.site' if it exists, then
-`PREFIX/etc/config.site' if it exists.  Or, you can set the
-`CONFIG_SITE' environment variable to the location of the site script.
-A warning: not all `configure' scripts look for a site script.
-
-Operation Controls
-==================
-
-   `configure' recognizes the following options to control how it
-operates.
-
-`--cache-file=FILE'
-     Use and save the results of the tests in FILE instead of
-     `./config.cache'.  Set FILE to `/dev/null' to disable caching, for
-     debugging `configure'.
-
-`--help'
-     Print a summary of the options to `configure', and exit.
-
-`--quiet'
-`--silent'
-`-q'
-     Do not print messages saying which checks are being made.
-
-`--srcdir=DIR'
-     Look for the package's source code in directory DIR.  Usually
-     `configure' can determine that directory automatically.
-
-`--version'
-     Print the version of Autoconf used to generate the `configure'
-     script, and exit.
-
-`configure' also accepts some other, not widely useful, options.
-

Deleted: branches/avidemux_2.5_branch_gruntster/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,35 +0,0 @@
-####### kdevelop will overwrite this part!!! (begin)##########
-
-#SUBDIRS = m4  avidemux
-
-#EXTRA_DIST = admin/config.rpath  Avidemux.kdevprj admin AUTHORS COPYING ChangeLog INSTALL README TODO History buildLavCodec.sh
-
-####### kdevelop will overwrite this part!!! (end)############
-# not a GNU package. You can remove this line, if
-# have all needed files, that a GNU package needs
-SUBDIRS =  po m4  avidemux  
-EXTRA_DIST = addons admin AUTHORS COPYING ChangeLog INSTALL README TODO History  configure.in.in Makefile.dist
-
-AUTOMAKE_OPTIONS = foreign
-
-$(top_srcdir)/configure.in: configure.in.in $(top_srcdir)/subdirs
-	cd $(top_srcdir) && $(MAKE) -f admin/Makefile.common configure.in ;
-
-$(top_srcdir)/subdirs:
-	cd $(top_srcdir) && $(MAKE) -f admin/Makefile.common subdirs
-
-$(top_srcdir)/acinclude.m4: $(top_srcdir)/admin/acinclude.m4.in $(top_srcdir)/admin/libtool.m4.in
-	@cd $(top_srcdir) && cat admin/acinclude.m4.in admin/libtool.m4.in > acinclude.m4
-
-MAINTAINERCLEANFILES = subdirs configure.in acinclude.m4 configure.files
-
-package-messages:
-	$(MAKE) -f admin/Makefile.common package-messages
-
-dist-hook:
-	cd $(top_distdir) && perl admin/am_edit -padmin
-	cd $(top_distdir) && $(MAKE) -f admin/Makefile.common subdirs
-
-
-
-ACLOCAL_AMFLAGS = -I m4

Deleted: branches/avidemux_2.5_branch_gruntster/Makefile.dist
===================================================================
--- branches/avidemux_2.5_branch_gruntster/Makefile.dist	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/Makefile.dist	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,17 +0,0 @@
-export WANT_AUTOCONF_2_5=1
-export WANT_AUTOMAKE_1_6=1
-
-all:
-	@echo "This Makefile is only for the CVS repository"
-	@echo "This will be deleted before making the distribution"
-	@echo ""
-	@if test ! -d admin; then \
-	   echo "Please recheckout this module!" ;\
-	   echo "for cvs: use checkout once and after that update again" ;\
-	   echo "for cvsup: checkout kde-common from cvsup and" ;\
-	   echo "   link kde-common/admin to ./admin" ;\
-	   exit 1 ;\
-	fi
-	$(MAKE) -f admin/Makefile.common cvs
-
-.SILENT:

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/.cvsignore
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/.cvsignore	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/.cvsignore	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,5 +0,0 @@
-Makefile
-Makefile.in
-.deps
-.libs
-avidemux2

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audio/.cvsignore
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audio/.cvsignore	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audio/.cvsignore	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,4 +0,0 @@
-Makefile.in
-Makefile
-*.o
-.deps

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audio/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audio/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audio/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,21 +0,0 @@
-####### kdevelop will overwrite this part!!! (begin)##########
-noinst_LIBRARIES = libADM_audio.a
-
-INCLUDES = $(all_includes) -I../ADM_libraries -I../ADM_libraries/ADM_utilities -I../ADM_libraries/ADM_lavutil
-
-libADM_audio_a_METASOURCES = AUTO
-
-libADM_audio_a_SOURCES = audio_mpegidentify.cpp audiowavex.cpp \
-		audiotimeline.cpp audiosource_ext.cpp audiomp3ex.cpp audiogen.cpp audioac3ex.cpp \
-		ADM_a52info.cpp audio_packetizer.cpp ADM_mp3info.cpp ADM_aacinfo.cpp ADM_dcainfo.cpp
-
-
-EXTRA_DIST =  \
-ADM_a52info.cpp  ADM_audiodef.h ADM_mp3info.h   audioex.h  audiosource_ext.h \
-ADM_a52info.h  ADM_dcainfo.cpp  audio_mpegidentify.cpp  audiogen.cpp   audiotimeline.cpp \
-ADM_aacinfo.cpp  ADM_dcainfo.h  audio_packetizer.cpp  audiomp3ex.cpp audiowavex.cpp \
-ADM_aacinfo.h  ADM_mp3info.cpp  audioac3ex.cpp  audiosource_ext.cpp \
-audiomode.hxx  aviaudio.hxx
-
-####### kdevelop will overwrite this part!!! (end)############
-noinst_HEADERS = ADM_a52info.h ADM_mp3info.h ADM_aacinfo.h

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/.cvsignore
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/.cvsignore	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/.cvsignore	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,4 +0,0 @@
-Makefile.in
-Makefile
-*.o
-.deps

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,21 +0,0 @@
-####### kdevelop will overwrite this part!!! (begin)##########
-noinst_LIBRARIES = libADM_audiocodec.a
-
-INCLUDES = $(all_includes) -I../ADM_libraries -I../ADM_libraries/ADM_utilities -I../ADM_libraries/ADM_lavutil
-
-libADM_audiocodec_a_METASOURCES = AUTO
-libADM_audiocodec_a_SOURCES = ADM_codecwma.cpp  \
-	audiocodec_ogg.cpp ADM_codecwav.cpp ADM_codecmp3.cpp ADM_codecac3.cpp ADM_audiocodec.cpp \
-	ADM_lpcm.cpp ADM_8bits.cpp ADM_codecfaad.cpp ADM_codeculaw.cpp \
-ADM_codecimaadpcm.cpp ADM_dca.cpp ADM_codecmsadpcm.cpp
-
-
-EXTRA_DIST = \
-ADM_8bits.cpp         ADM_codecac3.cpp       ADM_codeculaw.cpp  audiocodec_ogg.cpp \
-ADM_audiocodec.cpp    ADM_codecfaad.cpp      ADM_codecwav.cpp   ADM_lpcm.cpp \
-ADM_audiocodec.h      ADM_codecimaadpcm.cpp  ADM_codecwma.cpp   ADM_vorbis.h \
-ADM_audiocodeclist.h  ADM_codecmp3.cpp       ADM_dca.cpp        adm_ogg.h
-
-
-####### kdevelop will overwrite this part!!! (end)############
-noinst_HEADERS = ADM_vorbis.h 

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/.cvsignore
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/.cvsignore	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/.cvsignore	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,4 +0,0 @@
-Makefile.in
-Makefile
-*.o
-.deps

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,23 +0,0 @@
-####### kdevelop will overwrite this part!!! (begin)##########
-noinst_LIBRARIES = libADM_audiodevice.a
-
-## INCLUDES were found outside kdevelop specific part
-
-libADM_audiodevice_a_METASOURCES = AUTO
-
-libADM_audiodevice_a_SOURCES = ADM_deviceArts.cpp ADM_audiodevice.cpp \
-	ADM_deviceoss.cpp ADM_deviceALSA.cpp ADM_deviceALSA.h ADM_deviceAudioCore.cpp \
-	ADM_deviceSDL.cpp ADM_deviceWin32.cpp ADM_deviceEsd.cpp
-
-
-EXTRA_DIST = ADM_audiodevice.cpp  ADM_deviceArts.cpp       \
-ADM_deviceEsd.cpp  ADM_deviceWin32.cpp  audio_out.h \
-ADM_audiodevice.h    ADM_deviceArts.h         ADM_deviceEsd.h    ADM_deviceWin32.h    oss_out.cpp \
-ADM_deviceALSA.cpp   ADM_deviceAudioCore.cpp  ADM_deviceSDL.cpp  ADM_deviceoss.cpp \
-ADM_deviceALSA.h     ADM_deviceAudioCore.h    ADM_deviceSDL.h    ADM_deviceoss.h
-
-####### kdevelop will overwrite this part!!! (end)############
-
-INCLUDES = $(all_includes) -I../ADM_libraries -I../ADM_libraries/ADM_utilities -I../ADM_libraries/ADM_lavutil \
-		 $(ARTS_CFLAGS)
-noinst_HEADERS = ADM_audiodevice.h ADM_deviceSDL.h ADM_deviceWin32.h

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/.cvsignore
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/.cvsignore	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/.cvsignore	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,4 +0,0 @@
-Makefile.in
-Makefile
-*.o
-.deps

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,45 +0,0 @@
-####### kdevelop will overwrite this part!!! (begin)##########
-noinst_LIBRARIES = libADM_audiofilter.a
-
-INCLUDES = $(all_includes) -I../ADM_libraries -I../ADM_libraries/ADM_utilities -I../ADM_libraries/ADM_lavutil -I../ADM_libraries/ADM_lavcodec
-
-libADM_audiofilter_a_METASOURCES = AUTO
-
-libADM_audiofilter_a_SOURCES = audiodeng_buildfilters.cpp  \
-		audioeng_buff.cpp  \
-		audiolib_sox.cpp   \
-		audiofilter_normalize.cpp audioeng_process.cpp \
-		audiofilter_mixer.cpp audiofilter_bridge.cpp audioencoder.cpp \
-		audiofilter_limiter.cpp audiofilter_buildchain.cpp \
-		audiofilter_sox.cpp audiofilter_film2pal.cpp \
-		audioencoder_lame.cpp audioencoder_twolame.cpp \
-		audioencoder_faac.cpp audioencoder_lavcodec.cpp \
-		audioencoder_vorbis.cpp audioencoder_pcm.cpp \
-		audio_raw.cpp audiofilter_channel_route.cpp \
-		audiofilter_dolby.cpp audioencoder_aften.cpp
-
-
-
-EXTRA_DIST = audio_raw.cpp               audioencoder_pcm.h        \
-audiofilter_film2pal.h \
-audio_raw.h                 audioencoder_twolame.cpp      audiofilter_limiter.cpp \
-audiodeng_buildfilters.cpp  audioencoder_twolame.h        audiofilter_limiter.h \
-audioencoder.cpp            audioencoder_twolame_param.h  audiofilter_limiter_param.h \
-audioencoder.h              audioencoder_vorbis.cpp       audiofilter_mixer.cpp \
-audioencoder_config.h       audioencoder_vorbis.h         audiofilter_mixer.h \
-audioencoder_faac.cpp       audioencoder_vorbis_param.h   audiofilter_normalize.cpp \
-audioencoder_faac.h         audioeng_buff.cpp             audiofilter_normalize.h \
-audioencoder_faac_param.h   audioeng_buildfilters.h       audiofilter_normalize_param.h \
-audioencoder_lame.cpp       audioeng_process.cpp          audiofilter_sox.cpp \
-audioencoder_lame.h         audioeng_process.h            audiofilter_sox.h \
-audioencoder_lame_param.h   audiofilter_bridge.cpp        audiolib_sox.cpp \
-audioencoder_lavcodec.cpp   audiofilter_bridge.h          audiolib_sox.h \
-audioencoder_lavcodec.h     audiofilter_buildchain.cpp    audioprocess.hxx \
-audioencoder_pcm.cpp        audiofilter_film2pal.cpp      resampl.h \
-audiofilter_channel_route.cpp audiofilter_dolby.cpp audiofilter_channel_route.h \
-audioencoder_aften.cpp audioencoder_aften.h
-
-
-
-####### kdevelop will overwrite this part!!! (end)############
-

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/.cvsignore
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/.cvsignore	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/.cvsignore	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,4 +0,0 @@
-Makefile.in
-Makefile
-*.o
-.deps

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,28 +0,0 @@
-####### kdevelop will overwrite this part!!! (begin)##########
-noinst_LIBRARIES = libADM_codecs.a
-
-INCLUDES = $(all_includes) -I../ADM_libraries -I../ADM_libraries/ADM_utilities -I../ADM_libraries/ADM_lavutil
-
-libADM_codecs_a_METASOURCES = AUTO
-
-libADM_codecs_a_SOURCES =  ADM_theora_dec.cpp ADM_ffmp43.cpp \
-	ADM_mjpegEncode.cpp ADM_rgb16.cpp ADM_xvid.cpp ADM_xvideco.cpp ADM_mjpeg.cpp ADM_ffmpeg.cpp \
-	ADM_codecs.cpp ADM_ffmpegConfig.h ADM_mpeg.h ADM_mpeg.cpp  \
-	ADM_xvidcvs.cpp ADM_xvid4.cpp ADM_uyvy.cpp ADM_x264.cpp ADM_png.cpp
-
-
-EXTRA_DIST =  ADM_codec.h         ADM_divxEncode.h    ADM_mjpegEncode.cpp  ADM_theora_dec.h \
-ADM_xvid.cpp \
-ADM_codecNull.h     ADM_mjpegEncode.h    ADM_theora_enc.h  ADM_xvid.h \
-ADM_codecs.cpp      ADM_ffmp43.cpp      ADM_mpeg.cpp         ADM_uyvy.cpp      ADM_xvid4.cpp \
-ADM_ffmp43.h        ADM_mpeg.h           ADM_uyvy.h        ADM_xvid4.h \
-ADM_ffmpeg.cpp      ADM_png.cpp          ADM_xvid4param.h \
-ADM_ffmpeg.h        ADM_png.h            ADM_xvidcvs.cpp \
-ADM_ffmpegConfig.h  ADM_rgb16.cpp        ADM_x264.cpp      ADM_xvideco.cpp \
-ADM_mjpeg.cpp       ADM_rgb16.h          ADM_x264.h        ADM_xvideco.h \
-ADM_mjpeg.h         ADM_theora_dec.cpp   ADM_x264param.h
-
-
-####### kdevelop will overwrite this part!!! (end)############
-noinst_HEADERS = ADM_xvid4param.h ADM_xvid4.h ADM_uyvy.h ADM_x264.h \
-	ADM_x264param.h

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_colorspace/.cvsignore
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_colorspace/.cvsignore	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_colorspace/.cvsignore	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,4 +0,0 @@
-Makefile.in
-Makefile
-*.o
-.deps

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_colorspace/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_colorspace/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_colorspace/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,14 +0,0 @@
-####### kdevelop will overwrite this part!!! (begin)##########
-noinst_LIBRARIES = libADM_colorspace.a
-
-
-libADM_colorspace_a_METASOURCES = AUTO
-
-libADM_colorspace_a_SOURCES = ADM_rgb.cpp yuv.cpp rgb2yuv.cpp ADM_colorspace.cpp
-
-
-EXTRA_DIST =  ADM_rgb.cpp  ADM_rgb.h  colorspace.h  rgb2yuv.cpp  yuv.cpp
-
-####### kdevelop will overwrite this part!!! (end)############
-INCLUDES = $(all_includes) -I../ADM_libraries -I../ADM_libraries/ADM_utilities -I../ADM_libraries/ADM_lavutil \
-		$(ALTIVEC_SWITCH)

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/.cvsignore
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/.cvsignore	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/.cvsignore	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,4 +0,0 @@
-Makefile.in
-Makefile
-*.o
-.deps

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,24 +0,0 @@
-####### kdevelop will overwrite this part!!! (begin)##########
-noinst_LIBRARIES = libADM_editor.a
-
-INCLUDES = $(all_includes)  $(SMONKEY_CFLAGS) \
-	-I../ADM_libraries -I../ADM_libraries/ADM_utilities -I../ADM_libraries/ADM_lavutil 	\
-	-I../ADM_inputs
-
-
-libADM_editor_a_METASOURCES = AUTO
-
-libADM_editor_a_SOURCES = ADM_Video.cpp ADMedAVIAUD.cpp ADM_edStub.cpp \
-	ADM_edSearch.cpp ADM_edRender.cpp ADM_edit.cpp ADM_edAudio.cpp ADM_edIdentify.cpp \
-	ADM_edLoadSave.cpp ADM_edFrameType.cpp ADM_edCache.cpp
-
-
-EXTRA_DIST = ADM_Video.cpp    ADM_edCache.cpp      \
-ADM_edLoadSave.cpp  ADM_edit.cpp \
-ADM_Video.h      ADM_edCache.h        ADM_edRender.cpp    ADM_edit.hxx \
-ADM_edAudio.cpp  ADM_edFrameType.cpp  ADM_edSearch.cpp    ADM_outputfmt.h \
-ADM_edAudio.hxx  ADM_edIdentify.cpp   ADM_edStub.cpp      ADMedAVIAUD.cpp
-
-
-####### kdevelop will overwrite this part!!! (end)############
-noinst_HEADERS = ADM_edCache.h ADM_outputfmt.h

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/.cvsignore
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/.cvsignore	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/.cvsignore	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,4 +0,0 @@
-Makefile.in
-Makefile
-*.o
-.deps

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,27 +0,0 @@
-####### kdevelop will overwrite this part!!! (begin)##########
-noinst_LIBRARIES = libADM_encoder.a
-
-INCLUDES = $(all_includes) -I../ADM_libraries -I../ADM_libraries/ADM_utilities -I../ADM_libraries/ADM_lavutil 
-
-libADM_encoder_a_METASOURCES = AUTO
-
-libADM_encoder_a_SOURCES = adm_encConfig.cpp xvid_vbr.c adm_encxvid.cpp \
-	adm_encoder.cpp adm_encmjpeg.cpp adm_encffmpeg.cpp adm_encdivx2p.cpp adm_encdivx.cpp \
-	adm_encffmpeg1.cpp adm_encffmatrix.h adm_encXvid4.cpp adm_encx264.cpp \
-	adm_encCopy.cpp adm_encyv12.cpp adm_encmpeg2enc.cpp adm_encmpeg2enc.h \
-	adm_encRequant.cpp 
-
-
-EXTRA_DIST =  ADM_encCodecDesc.h    adm_encCopy.h   \
-adm_encffmatrix.h   adm_encmjpeg_param.h  adm_encxvid.h \
-ADM_vidEncode.hxx     adm_encXvid4.cpp   adm_encffmpeg.cpp   adm_encoder.cpp       adm_encyv12.cpp \
-ADM_videocodeclist.h  adm_encXvid4.h     adm_encffmpeg.h     adm_encoder.h         adm_encyv12.h \
-adm_encConfig.cpp     adm_encdivx.cpp    adm_encffmpeg1.cpp  adm_encx264.cpp       xvid_vbr.h \
-adm_encConfig.h       adm_encdivx.h      adm_encmjpeg.cpp    adm_encx264.h \
-adm_encCopy.cpp       adm_encdivx2p.cpp  adm_encmjpeg.h      adm_encxvid.cpp \
-adm_encmpeg2enc.cpp adm_encmpeg2enc.h adm_encRequant.cpp adm_encRequant.h
-
-
-
-####### kdevelop will overwrite this part!!! (end)############
-noinst_HEADERS = adm_encXvid4.h adm_encx264.h

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/.cvsignore
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/.cvsignore	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/.cvsignore	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,4 +0,0 @@
-Makefile.in
-Makefile
-*.o
-.deps

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,19 +0,0 @@
-####### kdevelop will overwrite this part!!! (begin)##########
-noinst_LIBRARIES = libADM_filter.a
-
-## INCLUDES were found outside kdevelop specific part
-
-libADM_filter_a_METASOURCES = AUTO
-
-libADM_filter_a_SOURCES = vidVCD.cpp  filter_declaration.cpp filter.cpp  filter_saveload.cpp  filter_dylib.cpp
-
-
-EXTRA_DIST = filter.cpp             \
-filter_saveload.cpp    vidVCD.cpp  video_filters.h \
-filter_declaration.cpp  
-
-
-####### kdevelop will overwrite this part!!! (end)############
-INCLUDES = $(all_includes) -I../ADM_libraries -I../ADM_libraries/ADM_utilities -I../ADM_libraries/ADM_lavutil \
-		   $(XML_CFLAGS)
-noinst_HEADERS =  vidVCD.h

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_infoExtractor/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_infoExtractor/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_infoExtractor/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,14 +0,0 @@
-####### kdevelop will overwrite this part!!! (begin)##########
-noinst_LIBRARIES = libADM_infoExtractor.a
-
-INCLUDES = $(all_includes) -I../ADM_libraries -I../ADM_libraries/ADM_utilities -I../ADM_libraries/ADM_lavutil -I../ADM_inputs
-
-libADM_infoExtractor_a_METASOURCES = AUTO
-
-libADM_infoExtractor_a_SOURCES =  ADM_infoextractor.cpp
-
-
-EXTRA_DIST =  
-
-####### kdevelop will overwrite this part!!! (end)############
-noinst_HEADERS = 

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_amv/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_amv/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_amv/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,9 +0,0 @@
-noinst_LIBRARIES = libADM_amv.a
-
-INCLUDES = $(all_includes)  -I../../ADM_libraries -I../../ADM_libraries/ADM_utilities   -I../../ADM_libraries/ADM_lavutil
-
-libADM_amv_a_SOURCES = ADM_amvAudio.cpp  ADM_amv.cpp  
-
-EXTRA_DIST= 
-
-

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_asf/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_asf/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_asf/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,10 +0,0 @@
-noinst_LIBRARIES = libADM_asf.a
-
-INCLUDES = $(all_includes)  -I../../ADM_libraries -I../../ADM_libraries/ADM_utilities   -I../../ADM_libraries/ADM_lavutil
- 
-
-libADM_asf_a_METASOURCES = AUTO
-
-libADM_asf_a_SOURCES = ADM_asf.cpp ADM_asf_audio.cpp ADM_asfChunk.cpp ADM_asfPacket.cpp
-
-EXTRA_DIST = ADM_asf.cpp  ADM_asf.h  ADM_asf_audio.cpp ADM_asfChunk.cpp ADM_asfPacket.cpp ADM_asfPacket.h

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_avsproxy/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_avsproxy/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_avsproxy/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,13 +0,0 @@
-####### kdevelop will overwrite this part!!! (begin)##########
-noinst_LIBRARIES = libADM_avsproxy.a
-
-INCLUDES = $(all_includes)  -I../../ADM_libraries -I../../ADM_libraries/ADM_utilities   -I../../ADM_libraries/ADM_lavutil
-
-libADM_avsproxy_a_METASOURCES = AUTO
-
-libADM_avsproxy_a_SOURCES = ADM_avsproxy.cpp  ADM_avsproxy_net.cpp
-
-
-EXTRA_DIST = ADM_avsproxy.cpp  ADM_avsproxy.h  ADM_avsproxy_internal.h  ADM_avsproxy_net.cpp
-
-####### kdevelop will overwrite this part!!! (end)############

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_flv/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_flv/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_flv/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,12 +0,0 @@
-noinst_LIBRARIES = libADM_flv.a
-
-INCLUDES = $(all_includes)  -I../../ADM_libraries -I../../ADM_libraries/ADM_utilities   -I../../ADM_libraries/ADM_lavutil
-
-
-libADM_flv_a_SOURCES = ADM_flvAudio.cpp  ADM_flv.cpp  ADM_flvIndex.cpp
-
-
-
-EXTRA_DIST= 
-
-

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_h263/.cvsignore
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_h263/.cvsignore	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_h263/.cvsignore	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,4 +0,0 @@
-Makefile.in
-Makefile
-*.o
-.deps

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_h263/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_h263/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_h263/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,12 +0,0 @@
-noinst_LIBRARIES = libADM_h263.a
-
-INCLUDES = $(all_includes)  -I../../ADM_libraries -I../../ADM_libraries/ADM_utilities   -I../../ADM_libraries/ADM_lavutil
-
-libADM_h263_a_METASOURCES = AUTO
-
-libADM_h263_a_SOURCES = bitsRead.cpp ADM_h263.cpp ADM_mp4.cpp
-
-
-EXTRA_DIST =  ADM_h263.cpp  ADM_h263.h  ADM_mp4.cpp  bitsRead.cpp  bitsRead.h
-
-

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_inpics/.cvsignore
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_inpics/.cvsignore	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_inpics/.cvsignore	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,4 +0,0 @@
-Makefile.in
-Makefile
-*.o
-.deps

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_inpics/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_inpics/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_inpics/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,14 +0,0 @@
-####### kdevelop will overwrite this part!!! (begin)##########
-noinst_LIBRARIES = libADM_inpics.a
-
-INCLUDES = $(all_includes)  -I../../ADM_libraries -I../../ADM_libraries/ADM_utilities   -I../../ADM_libraries/ADM_lavutil
-
-libADM_inpics_a_METASOURCES = AUTO
-
-libADM_inpics_a_SOURCES = ADM_pics.cpp bitmap.h
-
-
-EXTRA_DIST = ADM_pics.cpp  ADM_pics.h  bitmap.h
- 
-
-####### kdevelop will overwrite this part!!! (end)############

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_matroska/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_matroska/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_matroska/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,11 +0,0 @@
-noinst_LIBRARIES = libADM_matroska.a
-
-INCLUDES = $(all_includes)  -I../../ADM_libraries -I../../ADM_libraries/ADM_utilities   -I../../ADM_libraries/ADM_lavutil -I../../ADM_libraries/ADM_lavcodec
-
-
-
-libADM_matroska_a_METASOURCES = AUTO
-
-libADM_matroska_a_SOURCES = ADM_mkv.cpp ADM_mkv_audio.cpp ebml.cpp mkv_tags.cpp ADM_mkvEntries.cpp ADM_mkvTrackType.cpp ADM_mkvIndexer.cpp
-
-EXTRA_DIST = ADM_mkv.cpp  ADM_mkv.h  ADM_mkv_audio.cpp 

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mp4/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mp4/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mp4/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,13 +0,0 @@
-noinst_LIBRARIES = libADM_mp4.a
-
-INCLUDES = $(all_includes)  -I../../ADM_libraries -I../../ADM_libraries/ADM_utilities   -I../../ADM_libraries/ADM_lavutil
-
-
-libADM_mp4_a_SOURCES = ADM_mp4.cpp ADM_mp4audio.cpp ADM_atom.cpp ADM_mp4.h ADM_atom.h  \
-			ADM_mp4Analyzer.cpp ADM_mp4Leaf.cpp ADM_mp4Indexer.cpp
-
-
-
-EXTRA_DIST= 
-
-

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,26 +0,0 @@
-####### kdevelop will overwrite this part!!! (begin)##########
-noinst_LIBRARIES = libADM_mpegdemuxer.a
-
-INCLUDES = $(all_includes) -I../../ADM_libraries -I../../ADM_libraries/ADM_utilities -I../../ADM_libraries/ADM_lavutil \
-		-I../../ADM_userInterfaces/ADM_commonUI/ 
-
-libADM_mpegdemuxer_a_METASOURCES = AUTO
-
-libADM_mpegdemuxer_a_SOURCES = dmx_io.cpp dmx_demuxer.cpp dmx_indexer.cpp dmx_demuxerES.cpp \
-dmx_video.cpp dmx_demuxerPS.cpp dmx_identify.cpp dmx_audio.cpp dmx_probe.cpp \
-dmx_probeTS.cpp dmx_demuxerTS.cpp dmx_demuxerMSDVR.cpp dmx_demuxerMSDVR.h \
-dmx_indexer_mpeg2.cpp dmx_indexer_h264.cpp
-
-
-EXTRA_DIST = dmx_audio.cpp      dmx_demuxerEs.h  \
-dmx_identify.cpp  dmx_io.h             dmx_video.h \
-dmx_audio.h        dmx_demuxerPS.cpp  dmx_identify.h    dmx_mpegstartcode.h \
-dmx_demuxer.cpp    dmx_demuxerPS.h    dmx_indexer.cpp   dmx_probe.cpp \
-dmx_demuxer.h      dmx_demuxerTS.cpp  dmx_indexer.h     dmx_probe.h \
-dmx_demuxerES.cpp  dmx_demuxerTS.h    dmx_io.cpp        dmx_video.cpp \
-dmx_demuxerMSDVR.cpp dmx_demuxerMSDVR.h
-
-
-
-####### kdevelop will overwrite this part!!! (end)############
-noinst_HEADERS =  

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_nuv/.cvsignore
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_nuv/.cvsignore	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_nuv/.cvsignore	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,4 +0,0 @@
-Makefile.in
-Makefile
-*.o
-.deps

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_nuv/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_nuv/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_nuv/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,17 +0,0 @@
-####### kdevelop will overwrite this part!!! (begin)##########
-noinst_LIBRARIES = libADM_nuv.a
-
-
-libADM_nuv_a_METASOURCES = AUTO
-
-libADM_nuv_a_SOURCES = minilzo.c ADM_nuvAudio.cpp ADM_nuv.cpp RTjpeg.c RTjpegN.cpp ADM_rtGlob.h RToldformat.cpp
-
-
-EXTRA_DIST = ADM_nuv.cpp  ADM_nuvAudio.cpp  RTjpeg.h     RTjpegN.h     \
-lzoconf.h  mmx.h \
-ADM_nuv.h    ADM_rtGlob.h      RTjpegN.cpp  RToldformat.cpp  minilzo.h  nuppel.h
-
-
-####### kdevelop will overwrite this part!!! (end)############
-INCLUDES = $(all_includes)  -I../../ADM_libraries -I../../ADM_libraries/ADM_utilities   -I../../ADM_libraries/ADM_lavutil \
-		-I../../ADM_userInterfaces/ADM_commonUI

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_ogm/.cvsignore
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_ogm/.cvsignore	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_ogm/.cvsignore	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,4 +0,0 @@
-Makefile.in
-Makefile
-*.o
-.deps

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_ogm/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_ogm/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_ogm/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,17 +0,0 @@
-####### kdevelop will overwrite this part!!! (begin)##########
-noinst_LIBRARIES = libADM_ogm.a
-
-
-libADM_ogm_a_METASOURCES = AUTO
-
-libADM_ogm_a_SOURCES = ADM_oghead.h ADM_ogm.h ADM_ogm.cpp ADM_ogmpages.cpp \
-	ADM_ogmpages.h ADM_ogmAudio.cpp ADM_ogmreorder.cpp
-
-
-EXTRA_DIST = ADM_oghead.h  ADM_ogm.h         ADM_ogmpages.cpp  ADM_ogmreorder.cpp \
-ADM_ogm.cpp   ADM_ogmAudio.cpp  ADM_ogmpages.h
-
-
-####### kdevelop will overwrite this part!!! (end)############
-INCLUDES = $(all_includes) -I../../ADM_libraries -I../../ADM_libraries/ADM_utilities -I../../ADM_libraries/ADM_lavutil \
-		-I../../ADM_userInterfaces/ADM_commonUI/ 

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/.cvsignore
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/.cvsignore	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/.cvsignore	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,4 +0,0 @@
-Makefile.in
-Makefile
-*.o
-.deps

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,19 +0,0 @@
-noinst_LIBRARIES = libADM_openDML.a
-
-INCLUDES = $(all_includes)  -I../../ADM_libraries -I../../ADM_libraries/ADM_utilities   -I../../ADM_libraries/ADM_lavutil \
-		-I../../ADM_userInterfaces/ADM_commonUI
-
-libADM_openDML_a_METASOURCES = AUTO
-
-libADM_openDML_a_SOURCES = ADM_openDML.cpp ADM_riff.cpp ADM_odml_odml.cpp \
-		ADM_odml_regular.cpp ADM_opendml_reorder.cpp \
-		ADM_opendml_reindex.cpp ADM_openDMLDepack.cpp \
-		ADM_odml_audio.cpp
-
-
-noinst_HEADERS =  ADM_openDML.h ADM_riff.h
-EXTRA_DIST=ADM_odml_audio.cpp  ADM_odml_regular.cpp \
-ADM_openDMLDepack.cpp    ADM_riff.cpp \
-ADM_odml_audio.h    ADM_openDML.cpp       ADM_opendml_reindex.cpp  ADM_riff.h \
-ADM_odml_odml.cpp   ADM_openDML.h         ADM_opendml_reorder.cpp
-

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,5 +0,0 @@
-SUBDIRS=ADM_avsproxy  ADM_inpics    ADM_mpegdemuxer  ADM_ogm     \
-	ADM_asf  ADM_h263      ADM_matroska  ADM_nuv          ADM_openDML \
-	ADM_mp4 ADM_flv	ADM_amv
-INCLUDES = $(all_includes) 
-

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/.cvsignore
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/.cvsignore	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/.cvsignore	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,2 +0,0 @@
-Makefile.*
-.depend

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,126 +0,0 @@
-libavcodec_a_METASOURCES = AUTO
-noinst_LIBRARIES = libavcodec.a
-SUBDIRS=i386 ppc 
-LAVUTIL=../ADM_lavutil 
-if BUILD_MMX_COMPATIBLE
-EXTEND_MMX = i386/cputest.c     \
-			i386/mpegvideo_mmx.c     i386/vp3dsp_mmx.c \
-			i386/dsputil_mmx.c  i386/idct_mmx.c  \
-			i386/fdct_mmx.c   i386/motion_est_mmx.c  i386/simple_idct_mmx.c \
-			i386/fft_sse.c i386/vp3dsp_sse2.c  \
-			i386/idct_mmx_xvid.c i386/fft_3dn2.c \
-			i386/snowdsp_mmx.c i386/fft_3dn.c 
-X_PPC_FLAGS=
-else
-EXTEND_MMX = 
-endif
-
-if BUILD_A64
-X_MMX_FLAGS=-DHAVE_MMX 
-else
-X_MMX_FLAGS=
-endif
-
-if BUILD_ALTIVEC
-EXTEND_PPC=ppc/dsputil_ppc.c ppc/mpegvideo_ppc.c ppc/dsputil_altivec.c \
-	ppc/fft_altivec.c \
-	ppc/gmc_altivec.c \
-	ppc/idct_altivec.c \
-	ppc/fdct_altivec.c \
-	ppc/dsputil_h264_altivec.c \
-	ppc/mpegvideo_altivec.c \
-	ppc/snow_altivec.c
-
-else
-
-EXTEND_PPC=
-
-endif
-MYCFLAGS= -I. -I.. -DHAVE_AV_CONFIG_H $(X_MMX_FLAGS) -O3 -I../.. -I$(LAVUTIL) -Drestrict=__restrict__ -fomit-frame-pointer -include ffconf.h
-# for SSE we need special compil flags
-fft_sse.o:i386/fft_sse.c
-	$(CC) -o $@ $< -c $(MYCFLAGS) $(CFLAGS) $(all_includes) -I..   -msse -I$(LAVUTIL) -I../../..
-vp3dsp_sse2.o:i386/vp3dsp_sse2.c
-	$(CC) -o $@ $< -c  $(MYCFLAGS) $(CFLAGS) $(all_includes) -I..  -msse -I$(LAVUTIL) -I../../..
-
-libavcodec_a_SOURCES = $(EXTEND_PPC) $(EXTEND_MMX) ac3enc.c  \
-		adpcm.c 	allcodecs.c 	cyuv.c 	dsputil.c 	dv.c \
-		error_resilience.c 		fdctref.c 	fft.c 	h263.c 	h263dec.c 	huffyuv.c 	imgconvert.c \
-		jfdctfst.c 	jfdctint.c 	jrevdct.c 	mace.c 	mdct.c 	 	mjpeg.c \
-		motion_est.c 	mpeg12.c 	mpegaudio.c 	mpegaudiodec.c 	mpegvideo.c 	msmpeg4.c 	 \
-		pcm.c 	ratecontrol.c 	raw.c 	resample.c 	rv10.c 	simple_idct.c 	svq1.c \
-		utils.c 	wmadec.c 	indeo3.c 	vp3.c 	vp3dsp.c 	h264.c 	ffv1.c 	ra144.c 	ra288.c \
-		golomb.c 	4xm.c 	cabac.c 	asv1.c vcr1.c cljr.c 	faandct.c 	 	parser.c \
-		roqvideo.c 	xan.c 	rpza.c 	msrle.c 	msvideo1.c 	cinepak.c 	vqavideo.c \
-		idcinvideo.c 	smc.c 	flicvideo.c 	interplayvideo.c 	dpcm.c 	8bps.c vmdav.c \
-		truemotion1.c flac.c g726.c 	qtrle.c lcl.c 	snow.c  \
-		rangecoder.c bitstream.c h264idct.c h261.c amr.c tscc.c \
-		resample2.c pthread.c qdm2.c bitstream_filter.c eval.c \
-		vc1.c vc1dsp.c vp56.c vp56data.c vp6.c vp5.c indeo2.c indeo3.c  smacker.c  opt.c \
-		 fraps.c dnxhddata.h  dnxhddec.c	\
-                mpeg12data.c  mpegaudiodata.c  msmpeg4data.c   vc1data.c   vp56data.c mjpegbdec.c \
-                h263_parser.c \
-                h264_parser.c \
-                mpeg4video_parser.c \
-                mpegvideo_enc.c \
-                mpeg12enc.c mpegaudioenc.c \
-                ac3enc.c ac3.c ac3tab.c \
-                mjpegenc.c mjpegdec.c \
-                wma.c \
-                dvbsub_parser.c \
-                dvbsubdec.c \
-                dvbsub.c xiph.c sp5xdec.c nellymoserdec.c
-
-	
-
-EXTRA_DIST = ac3.h    faandct.h      internal.h   \
-oggvorbis.h  snow.h     vc1data.h \
-ac3tab.h   fastmemcpy.h     lzo.h      opt.h    sp5x.h     vorbis.h \
-avcodec.h  golomb.h     mpeg12data.h   os_support.h svq1_cb.h    vp3data.h \
-bitstream.h  h261data.h     mpeg4data.h    qdm2data.h   svq1_vlc.h   wmadata.h \
-cabac.h  h263data.h     mpegaudio.h    ra144.h    swscale.h \
-cavsdata.h h264data.h     mpegaudiodectab.h  ra288.h    truemotion1data.h \
-cookdata.h imgconvert_template.h  mpegaudiotab.h   rangecoder.h truespeech_data.h \
-dsputil.h  indeo2data.h     mpegvideo.h    rtjpeg.h   ulti_cb.h \
-dvdata.h   indeo3data.h     msmpeg4data.h  simple_idct.h  vc1acdata.h \
-4xm.c     dtsdec.c    indeo2.c     oggvorbis.c  svq3.c \
-8bps.c      dv.c      indeo3.c     opt.c    truemotion1.c \
-a52dec.c    dvbsub.c    interplayvideo.c   opts.c   truemotion2.c \
-aasc.c      dvbsubdec.c   jfdctfst.c     os2thread.c  truespeech.c \
-ac3dec.c    dvdsub.c    jfdctint.c     parser.c   tscc.c \
-ac3enc.c    dvdsubenc.c   jpeg_ls.c      pcm.c    tta.c \
-adpcm.c     error_resilience.c  jrevdct.c      png.c    ulti.c \
-adx.c     eval.c      kmvc.c       pnm.c    utils.c \
-alac.c      faac.c      lcl.c      pthread.c  vc1.c \
-allcodecs.c   faad.c      libgsm.c     qdm2.c   vcr1.c \
-amr.c     faandct.c     loco.c       qdrw.c   vmdav.c \
-apiexample.c    fdctref.c     lzo.c      qpeg.c   vorbis.c \
-asv1.c      fft-test.c    mace.c       qtrle.c    vp3.c \
-avcodec.c     fft.c     mdct.c       ra144.c    vp3dsp.c \
-avs.c     ffv1.c      mdec.c       ra288.c    vqavideo.c \
-beosthread.c    flac.c      mem.c      rangecoder.c w32thread.c \
-bitstream.c   flacenc.c     mjpeg.c      ratecontrol.c  wmadec.c \
-bitstream_filter.c  flashsv.c     mmvideo.c      raw.c    wmv2.c \
-bmp.c     flicvideo.c   motion_est.c     resample.c   wnv1.c \
-cabac.c     fraps.c     motion_est_template.c  resample2.c  ws-snd1.c \
-cavs.c      g726.c      motion_test.c    roqvideo.c   x264.c \
-cavsdsp.c     golomb.c    mp3lameaudio.c   rpza.c   xan.c \
-cinepak.c     h261.c      mpeg12.c     rtjpeg.c   xl.c \
-cljr.c      h263.c      mpegaudio.c    rv10.c   xvid_rc.c \
-common.c    h263dec.c     mpegaudiodec.c   shorten.c  xvidff.c \
-cook.c      h264.c      mpegvideo.c    simple_idct.c  xvmcvideo.c \
-cscd.c      h264idct.c    msmpeg4.c      smacker.c  zmbv.c \
-cyuv.c      huffyuv.c     msrle.c      smc.c \
-dct-test.c    idcinvideo.c    msvideo1.c     snow.c \
-dpcm.c      imgconvert.c    nuv.c      sonic.c \
-dsputil.c      oggtheora.c    svq1.c \
-vc1dsp.c \
-i386 libpostproc ppc 
-
-	
-	
-
-####### kdevelop will overwrite this part!!! (end)############
-INCLUDES = $(all_includes) $(MYCFLAGS)
-noinst_HEADERS = 
-

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/.cvsignore
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/.cvsignore	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/.cvsignore	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,5 +0,0 @@
-*.o
-*.a
-.deps
-.libs
-config.cpu

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1 +0,0 @@
-EXTRA_DIST = cputest.c dsputil_mmx.c dsputil_mmx_avg.h dsputil_mmx_rnd.h fdct_mmx.c fft_sse.c mmx.h motion_est_mmx.c mpegvideo_mmx.c mpegvideo_mmx_template.c simple_idct_mmx.c vp3dsp_mmx.c vp3dsp_sse2.c

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/ppc/.cvsignore
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/ppc/.cvsignore	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/ppc/.cvsignore	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,5 +0,0 @@
-*.o
-*.a
-.deps
-.libs
-config.cpu

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/ppc/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/ppc/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/ppc/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1 +0,0 @@
-EXTRA_DIST = dsputil_altivec.c dsputil_altivec.h dsputil_ppc.c dsputil_ppc.h fdct_altivec.c fft_altivec.c gcc_fixes.h gmc_altivec.c idct_altivec.c mpegvideo_altivec.c mpegvideo_ppc.c

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/.cvsignore
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/.cvsignore	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/.cvsignore	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,4 +0,0 @@
-Makefile.in
-Makefile
-*.o
-.deps

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,21 +0,0 @@
-####### kdevelop will overwrite this part!!! (begin)##########
-noinst_LIBRARIES = libADM_lavformat.a
-
-
-libADM_lavformat_a_METASOURCES = AUTO
-
-libADM_lavformat_a_SOURCES =  mpeg.c utils.c avio.c ADM_lavformat.cpp \
-aviobuf.c cutils.c img2.c file.c mpegtsenc.c ADM_muxts.cpp movenc.c \
-avienc.c wav.c mov.c matroska.c isom.c isom.h riff.c flvenc.c \
-matroskaenc.c
-
-
-EXTRA_DIST = ADM_lavformat.cpp  ADM_muxts.cpp  avformat.h  avio.h   \
-mpegts.h  rtp.h   rtspcodes.h \
-ADM_lavformat.h    ADM_tscrc.h    avi.h       mov.h   riff.h    rtsp.h \
-isom.c isom.h riff.c
-
-
-####### kdevelop will overwrite this part!!! (end)############
-INCLUDES = $(all_includes)  -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -I../ADM_lavcodec -I.. -DHAVE_AV_CONFIG_H -I../ADM_lavutil
-noinst_HEADERS =  

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavutil/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavutil/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavutil/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,19 +0,0 @@
-####### kdevelop will overwrite this part!!! (begin)##########
-noinst_LIBRARIES = libADM_lavutil.a
-
-
-libADM_lavutil_a_METASOURCES = AUTO
-
-libADM_lavutil_a_SOURCES =  integer.c  intfloat_readwrite.c  mathematics.c  rational.c md5.c crc.c log.c  adler32.c lls.c string.c random.c
-
-
-EXTRA_DIST = avutil.h  common.h  integer.h   \
-mathematics.h  rational.h \
-bswap.h crc.h   intfloat_readwrite.h  md5.h    x86_cpu.h log.c \
-lls.h adler32.h adler32.c mem.c internal.h log.h lls.c \
-fifo.c crc.c 
-
-
-####### kdevelop will overwrite this part!!! (end)############
-INCLUDES = $(all_includes)  -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -I../ADM_lavcodec -I.. -DHAVE_AV_CONFIG_H
-noinst_HEADERS =  

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libpostproc/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libpostproc/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libpostproc/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,20 +0,0 @@
-####### kdevelop will overwrite this part!!! (begin)##########
-noinst_LIBRARIES = libpostproc.a
-
-
-libpostproc_a_METASOURCES = AUTO
-
-libpostproc_a_SOURCES =  postprocess.c
-	
-
-
-EXTRA_DIST = 
-
-####### kdevelop will overwrite this part!!! (end)############
-INCLUDES = $(all_includes)   -I../.. -DHAVE_AV_CONFIG_H  -I../../../ADM_libraries/ADM_lavutil/
-if BUILD_A64
-INCLUDES +=-DHAVE_MMX -msse 
-endif
-noinst_HEADERS =  
-
-

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,20 +0,0 @@
-####### kdevelop will overwrite this part!!! (begin)##########
-noinst_LIBRARIES = libswscale.a
-
-#INCLUDES = $(all_includes)
-
-libswscale_a_METASOURCES = AUTO
-
-libswscale_a_SOURCES = swscale.c yuv2rgb.c rgb2rgb.c yuv2rgb_altivec.c ADM_mp.cpp
-
-
-EXTRA_DIST = ADM_mp.cpp  ADM_mp.h    rgb2rgb.h  swscale.h  swscale_internal.h  wrapper.h \
-rgb2rgb.c swscale_altivec_template.c  yuv2rgb_altivec.c \
-rgb2rgb_template.c  swscale_template.c  yuv2rgb_template.c \
-swscale.c yuv2rgb.c
-
-
-####### kdevelop will overwrite this part!!! (end)############
-
-INCLUDES= $(all_includes)  -I../ADM_lavutil -I../ADM_utilities -I.. -DCONFIG_GPL
-noinst_HEADERS = 

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libMpeg2Dec/.cvsignore
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libMpeg2Dec/.cvsignore	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libMpeg2Dec/.cvsignore	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,4 +0,0 @@
-Makefile.in
-Makefile
-*.o
-.deps

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libMpeg2Dec/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libMpeg2Dec/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libMpeg2Dec/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,21 +0,0 @@
-####### kdevelop will overwrite this part!!! (begin)##########
-noinst_LIBRARIES = liblibMpeg2Dec.a
-
-## INCLUDES were found outside kdevelop specific part
-
-liblibMpeg2Dec_a_METASOURCES = AUTO
-
-liblibMpeg2Dec_a_SOURCES =  alloc.c attributes.h convert.h cpu_accel.c cpu_state.c decode.c header.c idct.c idct_alpha.c idct_altivec.c idct_mlib.c idct_mmx.c mmx.h motion_comp.c motion_comp_alpha.c motion_comp_altivec.c motion_comp_mlib.c motion_comp_mmx.c mpeg2.h mpeg2_internal.h slice.c  video_out.h vlc.h
-
-
-EXTRA_DIST = alloc.c       cpu_state.c  idct_alpha.c    mmx.h     \
-motion_comp_mlib.c  slice.c \
-attributes.h  decode.c     idct_altivec.c  motion_comp.c          motion_comp_mmx.c   video_out.h \
-convert.h     header.c     idct_mlib.c     motion_comp_alpha.c    mpeg2.h             vlc.h \
-cpu_accel.c   idct.c       idct_mmx.c      motion_comp_altivec.c  mpeg2_internal.h 
-
-####### kdevelop will overwrite this part!!! (end)############
-
-#ugly trick to enable MMX
-#INCLUDES = $(all_includes) $(LMPG_OPT)
-INCLUDES = $(all_includes)  $(ALTIVEC_SWITCH) -I../ADM_utilities

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libass/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libass/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libass/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,8 +0,0 @@
-noinst_LIBRARIES = libass.a
-libass_a_METASOURCES = AUTO
-libass_a_SOURCES = ass.c  ass_cache.c  ass_fontconfig.c  ass_render.c  ass_utils.c  mputils.c ass_bitmap.c ass_library.c ass_font.c
-
-EXTRA_DIST = 
-
-INCLUDES = $(all_includes) -I../.. $(FREETYPE_CFLAGS)  $(FC_CFLAGS) -DAVIDEMUX 
-noinst_HEADERS =  

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/.cvsignore
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/.cvsignore	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/.cvsignore	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,4 +0,0 @@
-Makefile.in
-Makefile
-*.o
-.deps

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,68 +0,0 @@
-####### kdevelop will overwrite this part!!! (begin)##########
-noinst_LIBRARIES = libmpeg2enc.a
-
-
-## INCLUDES were found outside kdevelop specific part
-
-#quantize.cc 
-#quantize_x86.cc 
-#quantize.cc 
-#quant_mmx.s 
-#quantize_x86.cc 
-#quantize.cc 
-
-if BUILD_ALTIVEC
-SUBDIRS = altivec
-endif
-
-libmpeg2enc_a_METASOURCES = AUTO
-libmpeg2enc_a_SOURCES = ADM_mpe2enc.cpp ADM_mpeg2enc.h ad_layer.cc conform.cc fdctdata.cc fdctref.cc \
-feedframe.cc idct.cc idctdata.cc macroblock.cc motionest.cc motionsearch.cc mpeg2enc.cc mpeg2param.cc \
-mpeg2setup.cc mpegconsts.cc predict.cc predict_ref.cc putbits.cc puthdr.cc putmpg.cc putpic.cc putseq.cc \
-putvlc.cc \
-quantize_ref.cc ratectl.cc readpic.cc stats.cc synchrolib.cc transfrm.cc transfrm_ref.cc \
-writepic.cc yuv4mpeg.cc yuv4mpeg_ratio.cc mpeg2enc_if.cc ioio.c cpu_accel.cc \
-predcomp_mmx.cc predcomp_mmxe.cc \
-mblock_bsad_mmx.cc \
-mblock_sad_mmx.cc mblock_sad_mmxe.cc \
-mblock_sumsq_mmx.cc \
-predict_mmx.cc \
-quantize.cc \
-quant_mmx2.cc \
-mblock_bsumsq_mmx.cc \
-predict_x86.cc build_sub22_mests.cc build_sub44_mests.cc \
-find_best_one_pel.cc \
-motion.cc \
-mblock_sub44_sads_x86.cc fdct_mmx.cc fdct_x86.cc idct_mmx.cc transfrm_x86.cc \
-quantize_x86.cc
-
-
-####### kdevelop will overwrite this part!!! (end)############
-
-INCLUDES = $(all_includes)
-AUTOMAKE_OPTIONS = -Wno-portability
-#
-# From mpeg2enc 's Makefile.am
-%.o: %.s ; 	$(AS) $(ASFLAGS) -o $@ $<
-#
-EXTRA_DIST = ADM_mpe2enc.cpp       global.h        \
-mmxsse_motion.h   predict_ref.cc   stats.cc \
-ADM_mpeg2Param.h      idct.cc                     motion.cc         predict_ref.h    synchrolib.cc \
-ADM_mpeg2enc.h        idct_mmx.cc                 motionest.cc      predict_x86.cc   synchrolib.h \
-ad_layer.cc           idctdata.cc                 motionsearch.cc   putbits.cc       syntaxparams.h \
-attributes.h          ioio.c                      motionsearch.h    puthdr.cc        tables.h \
-build_sub22_mests.cc  macroblock.cc               mpeg2enc.cc       putmpg.cc        transfrm.cc \
-build_sub44_mests.cc  macroblock.hh               mpeg2enc.h        putpic.cc        transfrm_ref.cc \
-conform.cc            mblock_bsad_mmx.cc          mpeg2enc_if.cc    putseq.cc        transfrm_ref.h \
-cpu_accel.cc          mblock_bsumsq_mmx.cc        mpeg2param.cc     putvlc.cc        transfrm_x86.cc \
-cpu_accel.h           mblock_sad_mmx.cc           mpeg2parm.h       quant_mmx2.cc    vlc.h \
-fastintfns.h          mblock_sad_mmxe.cc          mpeg2setup.cc     quantize.cc      writepic.cc \
-fdct_mmx.cc           mblock_sub44_sads_x86.cc    mpegconsts.cc     quantize_ref.cc  xx.c \
-fdct_x86.cc           mblock_sub44_sads_x86.h     mpegconsts.h      quantize_ref.h   yuv4mpeg.cc \
-fdctdata.cc           mblock_sub44_sads_x86_h.cc  picture.hh        quantize_x86.cc  yuv4mpeg.h \
-fdctref.cc            mblock_sumsq_mmx.cc         predcomp_mmx.cc   ratectl.cc       yuv4mpeg_intern.h \
-feedframe.cc          mjpeg_logging.h             predcomp_mmxe.cc  ratectl.hh       yuv4mpeg_ratio.cc \
-find_best_one_pel.cc  mjpeg_types.h               predict.cc        readpic.cc \
-format_codes.h        mmx.h                       predict_mmx.cc    simd.h
-
-noinst_HEADERS = ADM_mpeg2Param.h

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/altivec/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/altivec/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/altivec/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,56 +0,0 @@
-# Process this file with Automake to produce Makefile.in
-
-INCLUDES = -I$(top_srcdir) -I$(top_srcdir)/utils
-
-LTCOMPILE = $(LIBTOOL) --mode=compile \
-	$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) \
-	$(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS)
-
-noinst_LTLIBRARIES = libaltivec.la
-
-libaltivec_la_SOURCES = \
-	add_pred.c \
-	amber.c \
-	benchmark.c \
-	bsad.c \
-	bsumsq.c \
-	bsumsq_sub22.c \
-	build_sub22_mests.c \
-	build_sub44_mests.c \
-	detect.c \
-	fdct.c \
-	fdct_idct.c \
-	field_dct_best.c \
-	find_best_one_pel.c \
-	idct.c \
-	iquant_intra.c \
-	iquant_non_intra.c \
-	motion.c \
-	pred_comp.c \
-	quant_non_intra.c \
-	quant_weight_coeff_sum.c \
-	quantize.c \
-	sad_00.c \
-	sad_01.c \
-	sad_10.c \
-	sad_11.c \
-	sub_mean_reduction.c \
-	sub_mean_reduction_ppc.S \
-	sub_pred.c \
-	subsample_image.c \
-	sumsq.c \
-	sumsq_sub22.c \
-	variance.c
-
-noinst_HEADERS = \
-	altivec_conf.h \
-	altivec_motion.h \
-	altivec_predict.h \
-	altivec_quantize.h \
-	altivec_transform.h \
-	amber.h \
-	benchmark.h \
-	vectorize.h \
-	verify.h
-
-MAINTAINERCLEANFILES = Makefile.in

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libtwolame/.cvsignore
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libtwolame/.cvsignore	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libtwolame/.cvsignore	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,4 +0,0 @@
-Makefile.in
-Makefile
-*.o
-.deps

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libtwolame/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libtwolame/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libtwolame/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,17 +0,0 @@
-noinst_LIBRARIES = liblibtoolame.a
- 
-
-liblibtoolame_a_METASOURCES = AUTO
-
-liblibtoolame_a_SOURCES = ath.c availbits.c bitbuffer.c  crc.c dab.c encode.c energy.c fft.c mem.c psycho_0.c psycho_1.c psycho_2.c psycho_3.c psycho_4.c psycho_n1.c subband.c  twolame.c get_set.c util.c
-
-noinst_HEADERS =  absthr.h ath.h availbits.h bitbuffer.h common.h crc.h critband.h dab.h encode_new.h encoder.h energy.h enwindow.h fft.h freqtable.h mem.h musicin.h psycho_0.h psycho_1.h psycho_2.h psycho_3.h psycho_4.h psycho_n1.h subband.h  twolame.h 
-
-INCLUDES= -DNDEBUG -DINLINE=inline 
-EXTRA_DIST = absthr.h     crc.h     encoder.h    mem.h  \
-psycho_1_freqtable.h  psycho_n1.h \
-ath.h    critband.h    energy.h     musicin.h    psycho_2.h    subband.h \
-availbits.h  dab.h     enwindow.h   psycho_0.h       psycho_2_absthr.h     tables.h \
-bitbuffer.h  encode.h  fft.h    psycho_1.h       psycho_3.h    twolame.h \
-common.h     encode_new.h  freqtable.h  psycho_1_critband.h  psycho_4.h    util.h
-

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libwrapper/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libwrapper/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libwrapper/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,13 +0,0 @@
-####### kdevelop will overwrite this part!!! (begin)##########
-noinst_LIBRARIES = libADM_libwrapper.a
-
-libADM_libwrapper_a_METASOURCES = AUTO
-libADM_libwrapper_a_SOURCES = libwrapper.cpp	libwrapper_dca.cpp	libwrapper_amrnb.cpp	libwrapper_global.cpp
-
-
-EXTRA_DIST = \
-libwrapper.h	libwrapper_dca.h	libwrapper_amrnb.h	libwrapper_global.h
-
-
-####### kdevelop will overwrite this part!!! (end)############
-

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lvemux/.cvsignore
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lvemux/.cvsignore	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lvemux/.cvsignore	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,4 +0,0 @@
-Makefile.in
-Makefile
-*.o
-.deps

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lvemux/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lvemux/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lvemux/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,12 +0,0 @@
-####### kdevelop will overwrite this part!!! (begin)##########
-noinst_LIBRARIES = libADM_lvemux.a
-
-libADM_lvemux_a_METASOURCES = AUTO
-
-libADM_lvemux_a_SOURCES =  mux_out.c mux_out.h ADM_muxer.cpp
-
-
-
-####### kdevelop will overwrite this part!!! (end)############
-INCLUDES = $(all_includes)  -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64  
-EXTRA_DIST=ADM_muxer.cpp  ADM_muxer.h  mux_out.h

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/.cvsignore
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/.cvsignore	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/.cvsignore	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,4 +0,0 @@
-Makefile.in
-Makefile
-*.o
-.deps

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,14 +0,0 @@
-####### kdevelop will overwrite this part!!! (begin)##########
-noinst_LIBRARIES = libADM_mplex.a
-
-## INCLUDES were found outside kdevelop specific part
-
-libADM_mplex_a_METASOURCES = AUTO
-libADM_mplex_a_SOURCES = ac3strm_in.cpp ADM_mplexout.cpp audiostrm_out.cpp dtsstrm_in.cpp lpcmstrm_in.cpp multiplexor.cpp stream_params.cpp \
-videostrm_in.cpp ADM_mplexin.cpp ADM_mthread.cpp bits.cpp inputstrm.cpp padstrm.cpp systems.cpp videostrm_out.cpp ADM_mplexmuxer.cpp \
-ADM_transfert.cpp interact.cpp mpastrm_in.cpp stillsstream.cpp mpegconsts.c mjpeg_logging.c decodebufmodel.cpp yuv4mpeg.c cpu_accel.c
-
-
-####### kdevelop will overwrite this part!!! (end)############
-INCLUDES= $(all_includes) -DHAVE_MEMALIGN
-noinst_HEADERS = ADM_inout.h ADM_transfert.h
\ No newline at end of file

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_smjs/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_smjs/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_smjs/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,55 +0,0 @@
-####### kdevelop will overwrite this part!!! (begin)##########
-noinst_LIBRARIES = libADM_smjs.a
-
-## INCLUDES were found outside kdevelop specific part
-
-libADM_smjs_a_METASOURCES = AUTO
-
-libADM_smjs_a_SOURCES = 		\
-	jsapi.c		\
-	jsarena.c	\
-	jsarray.c	\
-	jsatom.c	\
-	jsbool.c	\
-	jscntxt.c	\
-	jsdate.c	\
-	jsdbgapi.c	\
-	jsdhash.c	\
-	jsdtoa.c	\
-	jsemit.c	\
-	jsexn.c		\
-	jsfun.c		\
-	jsgc.c		\
-	jshash.c	\
-	jsinterp.c	\
-	jslock.c	\
-	jslog2.c	\
-	jslong.c	\
-	jsmath.c	\
-	jsnum.c		\
-	jsobj.c		\
-	jsopcode.c      \
-	jsparse.c	\
-	jsprf.c		\
-	jsregexp.c	\
-	jsscan.c	\
-	jsscope.c	\
-	jsscript.c	\
-	jsstr.c		\
-	jsutil.c        \
-	jsxdrapi.c	\
-	jsxml.c		\
-	prmjtime.c	
-
-
-SUBDIRS = 
-
-EXTRA_DIST = 
-
-if HAVE_CYGWIN
-INCLUDES = $(all_includes) -DXP_WIN
-else
-INCLUDES = $(all_includes) -DXP_UNIX -DSVR4 -DSYSV -D_BSD_SOURCE -DPOSIX_SOURCE -DHAVE_VA_COPY -DVA_COPY=va_copy
-endif
-
-INCLUDES += -DNDEBUG -DTRIMMED -DEXPORT_JS_API -DJS_USE_SAFE_ARENA -D_IEEE_LIBM -Dmalloc=ADM_alloc -Drealloc=ADM_realloc -Dfree=ADM_dezalloc -Dcalloc=ADM_calloc -I/usr/include/nspr
\ No newline at end of file

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/.cvsignore
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/.cvsignore	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/.cvsignore	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,4 +0,0 @@
-Makefile.in
-Makefile
-*.o
-.deps

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,24 +0,0 @@
-####### kdevelop will overwrite this part!!! (begin)##########
-noinst_LIBRARIES = libADM_library.a
-
-INCLUDES = $(all_includes) -DADMLOCALE='"'$(ADM_LOCALEDIR)'"'
-
-libADM_library_a_METASOURCES = AUTO
-
-libADM_library_a_SOURCES = subchunk.cpp  fourcc.cpp broken.cpp \
-		aviio.cpp aviindexer.cpp aviframe.cpp avidemutils.cpp ADM_image.cpp \
-	ADM_fileio.cpp ADM_print.cpp ADM_imageUtils.cpp ADM_bitstream.cpp \
-	ADM_imageResizer.cpp ADM_pp.cpp prefs.cpp ADM_imageLoader.cpp ADM_gettext.cpp
-
-
-EXTRA_DIST =  ADM_bitstream.cpp  ADM_image.cpp     \
-ADM_print.cpp     avifmt2.h       avio.hxx    fourcc.h \
-ADM_bitstream.h    ADM_image.h           ADM_print_priv.h  aviframe.cpp    broken.cpp  indexer.hxx \
-ADM_fileio.cpp     ADM_imageResizer.cpp  avidemutils.cpp \
-aviindexer.cpp  default.h   subchunk.cpp \
-ADM_fileio.h       ADM_imageUtils.cpp    avifmt.h          aviio.cpp       fourcc.cpp  subchunk.h \
-avidemutils.h
-
-
-####### kdevelop will overwrite this part!!! (end)############
-noinst_HEADERS = ADM_image.h ADM_fileio.h

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_xvidratectl/.cvsignore
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_xvidratectl/.cvsignore	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_xvidratectl/.cvsignore	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,4 +0,0 @@
-Makefile.in
-Makefile
-*.o
-.deps

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_xvidratectl/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_xvidratectl/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_xvidratectl/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,15 +0,0 @@
-####### kdevelop will overwrite this part!!! (begin)##########
-noinst_LIBRARIES = libADM_xvidratectl.a
-
-INCLUDES = $(all_includes)
-
-libADM_xvidratectl_a_METASOURCES = AUTO
-
-libADM_xvidratectl_a_SOURCES = ADM_xvidratectl.cpp ADM_oldxvid.cpp \
-	ADM_xvidratectlVBV.cpp
-
-
-EXTRA_DIST = ADM_oldxvid.cpp  ADM_ratecontrol.h  ADM_xvidr_internal.h  ADM_xvidratectl.cpp  ADM_xvidratectlVBV.cpp
-
-####### kdevelop will overwrite this part!!! (end)############
-noinst_HEADERS = ADM_ratecontrol.h

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,3 +0,0 @@
-SUBDIRS= ADM_lavcodec   ADM_lavutil  ADM_libass  ADM_libMpeg2Dec  ADM_libswscale  ADM_lvemux  ADM_utilities   \
-	 ADM_lavformat  ADM_liba52   ADM_libMad  ADM_libmpeg2enc  ADM_libtwolame  ADM_mplex   ADM_xvidratectl \
-	 ADM_smjs	ADM_libwrapper ADM_libpostproc

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_ocr/.cvsignore
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_ocr/.cvsignore	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_ocr/.cvsignore	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,4 +0,0 @@
-Makefile.in
-Makefile
-*.o
-.deps

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_ocr/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_ocr/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_ocr/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,17 +0,0 @@
-noinst_LIBRARIES = libADM_ocr.a
-
-INCLUDES = $(all_includes)  $(GTK_CFLAGS) \
-	 -I../ADM_libraries -I../ADM_libraries/ADM_utilities -I../ADM_libraries/ADM_lavutil -I../ADM_inputs \
-	-I../ADM_userInterfaces/ADM_commonUI \
-	-I../ADM_userInterfaces/ADM_GTK
-
-libADM_ocr_a_METASOURCES = AUTO
-
-libADM_ocr_a_SOURCES =   adm_glyph.cpp adm_leftturn.cpp ADM_vob2vobsub.cpp ADM_ocr.cpp ADM_bitmapSource.cpp ADM_ocrEngine.cpp
-
-
-EXTRA_DIST =  ADM_leftturn.h     ADM_vob2vobsub.cpp  adm_glyph.h  \
-  adm_glyph.cpp       adm_leftturn.cpp
-
-
-noinst_HEADERS = 

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,22 +0,0 @@
-####### kdevelop will overwrite this part!!! (begin)##########
-noinst_LIBRARIES = libADM_ossupport.a
-
-## INCLUDES were found outside kdevelop specific part
-
-libADM_ossupport_a_METASOURCES = AUTO
-
-libADM_ossupport_a_SOURCES = \
-ADM_cpuCap.cpp  ADM_memcpy.cpp  ADM_misc.cpp   ADM_quota.cpp    TLK_clock.cpp \
-ADM_debug.cpp   ADM_memory.cpp  ADM_queue.cpp  ADM_threads.cpp  win32.cpp \
-ADM_memsupport.cpp ADM_fileio.cpp ADM_crashdump.cpp
-
-
-
-EXTRA_DIST = 	ADM_cpuCap.h  ADM_debug.h  ADM_debugID.h  ADM_queue.h  ADM_quota.h ?\
-	        ADM_threads.h  TLK_clock.h
-
-
-
-####### kdevelop will overwrite this part!!! (end)############
-INCLUDES = $(all_includes) -I../ADM_libraries -I../ADM_libraries/ADM_utilities -I../ADM_libraries/ADM_lavutil $(GLIB_CFLAGS)
-noinst_HEADERS =  

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1 +0,0 @@
-SUBDIRS= oplug_avi  oplug_mp4  oplug_mpeg  oplug_mpegFF  oplug_ogm oplug_flv oplug_dummy

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/.cvsignore
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/.cvsignore	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/.cvsignore	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,4 +0,0 @@
-Makefile.in
-Makefile
-*.o
-.deps

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,20 +0,0 @@
-####### kdevelop will overwrite this part!!! (begin)##########
-noinst_LIBRARIES = liboplug_avi.a
-
-INCLUDES = $(all_includes)  -I../../ADM_libraries -I../../ADM_libraries/ADM_utilities   -I../../ADM_libraries/ADM_lavutil \
-		-I../../ADM_userInterfaces/ADM_commonUI 
-
-liboplug_avi_a_METASOURCES = AUTO
-
-liboplug_avi_a_SOURCES = op_savesmart.cpp op_saveprocess.cpp op_aviwrite.cpp \
-			 op_avisavedual.cpp op_avisavecopy.cpp op_avisave.cpp  \
-			 avilist.cpp op_avisavecopy_pack.cpp op_avisavecopy_unpack.cpp
-
-
-EXTRA_DIST =  GUI_mux.h       op_avisavecopy.cpp  op_aviwrite.hxx    \
-op_saveprocess.cpp  op_savesmart.hxx \
-op_avisave.cpp  op_avisavedual.cpp  op_savecopy.h         op_saveprocess.h \
-op_avisave.h    op_aviwrite.cpp     op_saveproc2pass.cpp  op_savesmart.cpp
-
-
-####### kdevelop will overwrite this part!!! (end)############

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_dummy/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_dummy/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_dummy/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,14 +0,0 @@
-####### kdevelop will overwrite this part!!! (begin)##########
-noinst_LIBRARIES = liboplug_dummy.a
-
-INCLUDES = $(all_includes)  -I../../ADM_libraries -I../../ADM_libraries/ADM_utilities   -I../../ADM_libraries/ADM_lavutil \
-		-I../../ADM_userInterfaces/ADM_commonUI 
-
-liboplug_dummy_a_METASOURCES = AUTO
-
-liboplug_dummy_a_SOURCES = oplug_dummy.cpp 
-
-
-EXTRA_DIST = oplug_dummy.cpp  oplug_dummy.h
-
-####### kdevelop will overwrite this part!!! (end)############

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_flv/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_flv/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_flv/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,14 +0,0 @@
-####### kdevelop will overwrite this part!!! (begin)##########
-noinst_LIBRARIES = liboplug_flv.a
-
-INCLUDES = $(all_includes)  -I../../ADM_libraries -I../../ADM_libraries/ADM_utilities   -I../../ADM_libraries/ADM_lavutil \
-		-I../../ADM_userInterfaces/ADM_commonUI 
-
-liboplug_flv_a_METASOURCES = AUTO
-
-liboplug_flv_a_SOURCES = oplug_flv.cpp 
-
-
-EXTRA_DIST = oplug_flv.cpp  oplug_flv.h
-
-####### kdevelop will overwrite this part!!! (end)############

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mp4/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mp4/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mp4/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,14 +0,0 @@
-####### kdevelop will overwrite this part!!! (begin)##########
-noinst_LIBRARIES = liboplug_mp4.a
-
-INCLUDES = $(all_includes)  -I../../ADM_libraries -I../../ADM_libraries/ADM_utilities   -I../../ADM_libraries/ADM_lavutil \
-		-I../../ADM_userInterfaces/ADM_commonUI 
-
-liboplug_mp4_a_METASOURCES = AUTO
-
-liboplug_mp4_a_SOURCES = oplug_mp4.cpp 
-
-
-EXTRA_DIST = oplug_mp4.cpp  oplug_mp4.h
-
-####### kdevelop will overwrite this part!!! (end)############

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpeg/.cvsignore
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpeg/.cvsignore	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpeg/.cvsignore	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,4 +0,0 @@
-Makefile.in
-Makefile
-*.o
-.deps

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpeg/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpeg/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpeg/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,15 +0,0 @@
-####### kdevelop will overwrite this part!!! (begin)##########
-noinst_LIBRARIES = liboplug_mpeg.a
-
-INCLUDES = $(all_includes)  -I../../ADM_libraries -I../../ADM_libraries/ADM_utilities   -I../../ADM_libraries/ADM_lavutil \
-		-I../../ADM_userInterfaces/ADM_commonUI \
-		 -I../../ADM_inputs
-
-liboplug_mpeg_a_METASOURCES = AUTO
-
-liboplug_mpeg_a_SOURCES = op_mpegpass.cpp
-
-
-EXTRA_DIST = op_mpeg.h   op_mpegpass.cpp  
-
-####### kdevelop will overwrite this part!!! (end)############

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpegFF/.cvsignore
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpegFF/.cvsignore	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpegFF/.cvsignore	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,4 +0,0 @@
-Makefile.in
-Makefile
-*.o
-.deps

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpegFF/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpegFF/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpegFF/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,14 +0,0 @@
-####### kdevelop will overwrite this part!!! (begin)##########
-noinst_LIBRARIES = liboplug_mpegFF.a
-
-INCLUDES = $(all_includes)  -I../../ADM_libraries -I../../ADM_libraries/ADM_utilities   -I../../ADM_libraries/ADM_lavutil \
-		-I../../ADM_userInterfaces/ADM_commonUI 
-
-liboplug_mpegFF_a_METASOURCES = AUTO
-
-liboplug_mpegFF_a_SOURCES = oplug_vcdff.cpp 
-
-
-EXTRA_DIST = oplug_encodervcd.h  oplug_vcdff.cpp  oplug_vcdff.h
-
-####### kdevelop will overwrite this part!!! (end)############

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_ogm/.cvsignore
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_ogm/.cvsignore	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_ogm/.cvsignore	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,4 +0,0 @@
-Makefile.in
-Makefile
-*.o
-.deps

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_ogm/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_ogm/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_ogm/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,12 +0,0 @@
-noinst_LIBRARIES = liboplug_ogm.a
-INCLUDES = $(all_includes)  -I../../ADM_libraries -I../../ADM_libraries/ADM_utilities   -I../../ADM_libraries/ADM_lavutil \
-		-I../../ADM_userInterfaces/ADM_commonUI \
-		 -I../../ADM_inputs
-liboplug_ogm_a_METASOURCES = AUTO
-
-liboplug_ogm_a_SOURCES = op_ogpage.cpp op_ogsave.cpp op_ogsavecopy.cpp op_ogsaveprocess.cpp op_ogaudio.cpp
-noinst_HEADERS = op_ogpage.h op_ogsave.h
-EXTRA_DIST = op_ogaudio.cpp  op_ogpage.h    op_ogsave.h  \
-op_ogsaveprocess.cpp \
-op_ogpage.cpp   op_ogsave.cpp  op_ogsavecopy.cpp
-

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_requant/.cvsignore
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_requant/.cvsignore	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_requant/.cvsignore	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,4 +0,0 @@
-Makefile.in
-Makefile
-*.o
-.deps

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_requant/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_requant/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_requant/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,15 +0,0 @@
-####### kdevelop will overwrite this part!!! (begin)##########
-noinst_LIBRARIES = libADM_requant.a
-
-
-libADM_requant_a_METASOURCES = AUTO
-
-libADM_requant_a_SOURCES =  tcrequant.c
-
-
-EXTRA_DIST = getvlc.h  putvlc.h  tcrequant.h
-
-####### kdevelop will overwrite this part!!! (end)############
-INCLUDES = $(all_includes) -I../ADM_libraries -I../ADM_libraries/ADM_utilities -I../ADM_libraries/ADM_lavutil \
-		 -g   -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 
-noinst_HEADERS =  tcrequant.h putvlc.h getvlc.h

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/.cvsignore
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/.cvsignore	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/.cvsignore	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,5 +0,0 @@
-Makefile.in
-Makefile
-*.o
-.deps
-update

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,32 +0,0 @@
-####### kdevelop will overwrite this part!!! (begin)##########
-noinst_LIBRARIES = libADM_script.a
-
-
-libADM_script_a_METASOURCES = AUTO
-
-libADM_script_a_SOURCES =   \
-		 ADM_JSAvidemux.cpp ADM_JSAvidemux.h ADM_JSGlobal.cpp \
-		ADM_JSGlobal.h ADM_Avidemux.cpp ADM_AvidemuxAudio.cpp ADM_JSAvidemuxAudio.cpp \
-	ADM_AvidemuxVideo.cpp ADM_JSAvidemuxVideo.cpp ADM_JSFunctions.cpp \
-	DirectorySearch.cpp ADM_JSDirectorySearch.cpp
-
-
-EXTRA_DIST =  ADM_Avidemux.cpp       ADM_JSAvidemux.h           ADM_JSFunctions.cpp    DirectorySearch.h \
-ADM_Avidemux.h         ADM_JSAvidemuxAudio.cpp    ADM_JSGlobal.cpp       StdFile.cpp \
-ADM_AvidemuxAudio.cpp  ADM_JSAvidemuxAudio.h      ADM_JSGlobal.h         StdFile.h \
-ADM_AvidemuxAudio.h    ADM_JSAvidemuxVideo.cpp    ADM_SharedLibrary.cpp  adm_scanner.h \
-ADM_AvidemuxVideo.cpp  ADM_JSAvidemuxVideo.h      ADM_SharedLibrary.h \
-ADM_AvidemuxVideo.h    ADM_JSDirectorySearch.cpp  ADM_container.h \
-ADM_JSAvidemux.cpp     ADM_JSDirectorySearch.h    DirectorySearch.cpp
-
-
-####### kdevelop will overwrite this part!!! (end)############
-noinst_HEADERS = ADM_JSGlobal.h ADM_Avidemux.h \
-		ADM_AvidemuxAudio.h ADM_JSAvidemuxAudio.h ADM_AvidemuxVideo.h ADM_JSAvidemuxVideo.h
-
-
-
-
-INCLUDES = $(all_includes) -I../ADM_libraries -I../ADM_libraries/ADM_utilities -I../ADM_libraries/ADM_lavutil \
-			-I$(top_srcdir)/avidemux -DJS_THREADSAFE -I../ADM_libraries/ADM_smjs -DXP_UNIX 
-

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_toolkit/.cvsignore
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_toolkit/.cvsignore	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_toolkit/.cvsignore	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,4 +0,0 @@
-Makefile.in
-Makefile
-*.o
-.deps

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_toolkit/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_toolkit/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_toolkit/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,21 +0,0 @@
-###### kdevelop will overwrite this part!!! (begin)##########
-noinst_LIBRARIES = libADM_toolkit.a
-
-## INCLUDES were found outside kdevelop specific part
-
-libADM_toolkit_a_METASOURCES = AUTO
-
-libADM_toolkit_a_SOURCES =  \
-	ADM_audioQueue.cpp   automation.cpp    \
-	ADM_intfloat.cpp     \
-	ADM_packetQueue.cpp     
-
-EXTRA_DIST = ADM_audioQueue.h  ADM_packetQueue.h         \
-		ADM_intfloat.h    bitmap.h           \
-		filesel.h       
-
-
-####### kdevelop will overwrite this part!!! (end)############
-INCLUDES = $(all_includes) -I../ADM_libraries -I../ADM_libraries/ADM_utilities -I../ADM_libraries/ADM_lavutil \
-		 $(SMONKEY_CFLAGS)
-noinst_HEADERS =  

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/.cvsignore
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/.cvsignore	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/.cvsignore	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,4 +0,0 @@
-Makefile.in
-Makefile
-*.o
-.deps

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,60 +0,0 @@
-#
-noinst_LIBRARIES = libADM_dialogGtk.a 
-
-INCLUDES = $(all_includes) $(GTK_CFLAGS) $(XML_CFLAGS)  $(FREETYPE_CFLAGS) -DADM_SUBVERSION=@ADM_SUBVERSION@ \
-		-I../../../ADM_libraries/ADM_utilities \
-		-I../../ADM_commonUI -I../../.. -I../../../ADM_libraries/ADM_lavutil \
-		-I../../../ADM_inputs -I../../../ADM_outputs
-
-libADM_dialogGtk_a_METASOURCES = AUTO
-
-libADM_dialogGtk_a_SOURCES =  DIA_vcodec.cpp DIA_acodec.cpp \
-	DIA_properties.cpp  DIA_about.cpp DIA_recent.cpp \
-	DIA_resize.cpp DIA_working.cpp \
-	DIA_working.h DIA_busy.cpp DIA_busy.h DIA_exLame.cpp DIA_pipe.cpp  \
-	DIA_xvid.cpp DIA_crop.cpp  DIA_encoding.cpp   \
-	DIA_xvid4.cpp  \
-	DIA_pause.cpp \
-	DIA_calculator.cpp DIA_equalizer.cpp \
-	DIA_vobsub.cpp DIA_x264.cpp DIA_ocr.cpp  DIA_hue.cpp DIA_eq2.cpp \
-	DIA_asharp.cpp  DIA_idx_pg.cpp  \
-	DIA_cnr2.cpp DIA_jobs.cpp DIA_jobs_save.cpp  \
-	DIA_mpdelogo.cpp \
-        DIA_chromaShift.cpp \
-        \
-        DIA_preview.cpp \
-        DIA_contrast.cpp \
-        DIA_srt.cpp \
-	DIA_coloryuv.cpp \
-	DIA_quota.cpp \
-	DIA_partial.cpp  \
-	DIA_threshold.cpp \
-	DIA_SwissArmyKnife.cpp \
-	DIA_particle.cpp \
-	DIA_flyDialog.cpp \
-	DIA_eraser.cpp
-
-
-
-
-EXTRA_DIST =  \
-DIA_mcdeint.cpp     DIA_resize.cpp \
-DIA_cnr2.cpp          \
-DIA_color.cpp         DIA_eq2.cpp          \
-DIA_coloryuv.cpp      DIA_equalizer.cpp    DIA_mpdelogo.cpp     \
-DIA_contrast.cpp      DIA_exLame.cpp       DIA_srt.cpp \
-DIA_about.cpp         \
-DIA_acodec.cpp       DIA_crop.cpp          \
-DIA_hue.cpp          DIA_ocr.cpp         DIA_vcodec.cpp \
-DIA_asharp.cpp       DIA_idx_pg.cpp       DIA_partial.cpp     DIA_vobsub.cpp \
-DIA_idx_pg.h         DIA_pause.cpp       \
-DIA_pipe.cpp        DIA_working.cpp \
-DIA_defaultAudio.cpp  DIA_jobs.cpp        DIA_working.h \
-DIA_jobs_save.cpp     DIA_x264.cpp \
-DIA_preview.cpp     \
-DIA_busy.cpp         DIA_properties.cpp  DIA_xvid.cpp \
-DIA_busy.h            DIA_quota.cpp       DIA_xvid4.cpp \
-DIA_calculator.cpp   DIA_encoding.cpp      DIA_recent.cpp \
-DIA_chromaShift.cpp  DIA_encoding.h        DIA_lavpp_deint.cpp \
-DIA_threshold.cpp    DIA_SwissArmyKnife.cpp DIA_particle.cpp DIA_eraser.cpp
-

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,28 +0,0 @@
-
-noinst_LIBRARIES = libADM_dialogFactory.a 
-
-INCLUDES = $(all_includes) $(GTK_CFLAGS) $(XML_CFLAGS)  $(FREETYPE_CFLAGS) -DADM_SUBVERSION=@ADM_SUBVERSION@ \
-		-I../../../ADM_libraries/ADM_utilities \
-		-I../../ADM_commonUI -I../../.. -I../../../ADM_libraries/ADM_lavutil \
-		-I../../../ADM_inputs -I../../../ADM_outputs
-
-libADM_dialogFactory_a_METASOURCES = AUTO
-
-libADM_dialogFactory_a_SOURCES = DIA_dialogFactory.cpp \
-FAC_toggle.cpp \
-FAC_integer.cpp \
-FAC_float.cpp \
-FAC_menu.cpp \
-DIA_filesel.cpp \
-FAC_bitrate.cpp \
-FAC_bar.cpp \
-FAC_readOnlyText.cpp \
-FAC_notch.cpp \
-FAC_frame.cpp \
-FAC_hex.cpp \
-FAC_button.cpp \
-DIA_color.cpp \
-FAC_matrix.cpp \
-FAC_threadCount.cpp
-
-

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,14 +0,0 @@
-
-noinst_LIBRARIES = libADM_filtersGtk.a 
-
-INCLUDES = $(all_includes) $(GTK_CFLAGS) $(XML_CFLAGS)   \
-		-I../../../ADM_libraries/ADM_utilities \
-		-I../../ADM_commonUI -I../../.. -I../../../ADM_libraries/ADM_lavutil 
-
-libADM_filtersGtk_a_METASOURCES = AUTO
-
-libADM_filtersGtk_a_SOURCES = gui_filterlist.cpp  gui_filtermanager.cpp  gui_filtermanager_dialog.cpp  gui_filtersub.cpp
-
-
-
-EXTRA_DIST =  

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/.cvsignore
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/.cvsignore	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/.cvsignore	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,4 +0,0 @@
-Makefile.in
-Makefile
-*.o
-.deps

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,19 +0,0 @@
-####### kdevelop will overwrite this part!!! (begin)##########
-noinst_LIBRARIES = libADM_gui2.a
-
-## INCLUDES were found outside kdevelop specific part
-
-libADM_gui2_a_METASOURCES = AUTO
-
-libADM_gui2_a_SOURCES = GUI_main2.cpp GUI_bindings.cpp GUI_gtkRender.cpp   GUI_ui.h GUI_keymap.cpp GUI_xvDraw.h GUI_menumap.h 
-
-
-EXTRA_DIST =   GUI_main2.cpp     \
-GUI_ui.h         \
-GUI_bindings.cpp   GUI_menumap.h      \
-GUI_keymap.cpp     GUI_gtkRender.cpp  
-
-
-####### kdevelop will overwrite this part!!! (end)############
-INCLUDES= $(all_includes) $(GTK_CFLAGS) -I../../../ -I../../../ADM_libraries/ADM_utilities
-noinst_HEADERS = 

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,16 +0,0 @@
-
-noinst_LIBRARIES = libADM_ocrGtk.a 
-
-INCLUDES = $(all_includes) $(GTK_CFLAGS) $(XML_CFLAGS)  $(FREETYPE_CFLAGS) \
-		-I../../../ADM_libraries/ADM_utilities \
-		-I../../ADM_commonUI -I../../.. -I../../../ADM_libraries/ADM_lavutil \
-		-I../../../ADM_inputs -I../../../ADM_outputs \
-		-I../../../ADM_ocr 
-
-libADM_ocrGtk_a_METASOURCES = AUTO
-
-libADM_ocrGtk_a_SOURCES =  adm_editglyph.cpp  adm_ocr.cpp
-
-EXTRA_DIST =  
-
-

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,17 +0,0 @@
-
-noinst_LIBRARIES = libADM_toolkit_gtk.a 
-
-INCLUDES = $(all_includes) $(GTK_CFLAGS) $(XML_CFLAGS)  $(FREETYPE_CFLAGS) -DADM_SUBVERSION=@ADM_SUBVERSION@ \
-		-I../../../ADM_libraries/ADM_utilities \
-		-I../../ADM_commonUI -I../../.. -I../../../ADM_libraries/ADM_lavutil \
-		-I../../../ADM_inputs -I../../../ADM_outputs -I../../../ADM_osSupport
-
-libADM_toolkit_gtk_a_METASOURCES = AUTO
-
-libADM_toolkit_gtk_a_SOURCES = ADM_gladeSupport.cpp  ADM_tray_gtk.cpp  choice.cpp  TLK_filesel.cpp  toolkit.cpp  toolkit_dialog.cpp \
-		eggtrayicon.c eggtray_win32.c gtkmarkscale.c jogshuttle.c ADM_jogshuttle.cpp mediactrl.c
-
-
-EXTRA_DIST = 
-
-

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,7 +0,0 @@
-SUBDIRS= ADM_dialog  ADM_gui2 ADM_toolkit_gtk ADM_filters ADM_dialogFactory ADM_ocr
-
-noinst_LIBRARIES = libADM_UI_GTK.a 
-libADM_UI_GTK_a_METASOURCES = AUTO
-libADM_UI_GTK_a_SOURCES = ui_support.cpp
-
-INCLUDES = $(all_includes) $(GTK_CFLAGS)
\ No newline at end of file

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,17 +0,0 @@
-
-noinst_LIBRARIES = libADM_dialog.a 
-
-INCLUDES = $(all_includes)  $(XML_CFLAGS)  $(FREETYPE_CFLAGS) -DADM_SUBVERSION=@ADM_SUBVERSION@ \
-		-I../../../ADM_libraries/ADM_utilities \
-		-I../../ADM_commonUI -I../../.. -I../../../ADM_libraries/ADM_lavutil \
-		-I../../../ADM_inputs -I../../../ADM_outputs
-
-libADM_dialog_a_METASOURCES = AUTO
-
-libADM_dialog_a_SOURCES = DIA_busy.cpp  DIA_encoding.cpp  DIA_working.cpp alert_none.cpp DIA_none.cpp OCR_none.cpp DIA_indexing.cpp DIA_flyDialog.cpp
-
-
-
-
-
-EXTRA_DIST =  

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialogFactory/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialogFactory/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialogFactory/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,13 +0,0 @@
-
-noinst_LIBRARIES = libADM_dialogFactory.a 
-
-INCLUDES = $(all_includes) $(GTK_CFLAGS) $(XML_CFLAGS)  $(FREETYPE_CFLAGS) -DADM_SUBVERSION=@ADM_SUBVERSION@ \
-		-I../../../ADM_libraries/ADM_utilities \
-		-I../../ADM_commonUI -I../../.. -I../../../ADM_libraries/ADM_lavutil \
-		-I../../../ADM_inputs -I../../../ADM_outputs
-
-libADM_dialogFactory_a_METASOURCES = AUTO
-
-libADM_dialogFactory_a_SOURCES = DIA_dialogFactory.cpp FAC_toggle.cpp
-
-

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_filters/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_filters/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_filters/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,15 +0,0 @@
-
-noinst_LIBRARIES = libADM_filters.a 
-
-INCLUDES = $(all_includes)  $(XML_CFLAGS)  $(FREETYPE_CFLAGS) -DADM_SUBVERSION=@ADM_SUBVERSION@ \
-		-I../../../ADM_libraries/ADM_utilities \
-		-I../../ADM_commonUI -I../../.. -I../../../ADM_libraries/ADM_lavutil \
-		-I../../../ADM_inputs -I../../../ADM_outputs
-
-libADM_filters_a_METASOURCES = AUTO
-
-libADM_filters_a_SOURCES = filter_none.cpp
-
-
-
-EXTRA_DIST =  

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_gui2/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_gui2/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_gui2/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,15 +0,0 @@
-
-noinst_LIBRARIES = libADM_gui2.a 
-
-INCLUDES = $(all_includes)  $(XML_CFLAGS)  $(FREETYPE_CFLAGS) -DADM_SUBVERSION=@ADM_SUBVERSION@ \
-		-I../../../ADM_libraries/ADM_utilities \
-		-I../../ADM_commonUI -I../../.. -I../../../ADM_libraries/ADM_lavutil \
-		-I../../../ADM_inputs -I../../../ADM_outputs
-
-libADM_gui2_a_METASOURCES = AUTO
-
-libADM_gui2_a_SOURCES = gui_none.cpp file_none.cpp preview_none.cpp
-
-
-
-EXTRA_DIST =  

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,6 +0,0 @@
-noinst_LIBRARIES = libADM_UI_None.a
-
-libADM_UI_None_a_METASOURCES = AUTO
-libADM_UI_None_a_SOURCES = ui_support.cpp
-
-SUBDIRS = ADM_dialog  ADM_gui2  ADM_filters ADM_dialogFactory

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,27 +0,0 @@
-
-noinst_LIBRARIES = libADM_dialog.a 
-libADM_dialog_a_SOURCES = DIA_busy.cpp  alert_qt4.cpp DIA_none.cpp OCR_none.cpp  \
-AQ_props.cpp AQ_working.cpp AQ_encoding.cpp  DIA_xvid4.cpp AQ_resizing.cpp AT_flyDialog.cpp \
-AQ_jobs.cpp \
-AQ_crop.cpp AT_QCanvas.cpp \
-AQ_asharp.cpp AQ_chromashift.cpp \
-AQ_contrast.cpp AQ_hue.cpp \
-AQ_srt.cpp \
-AT_index_pg.cpp DIA_x264.cpp \
-AQ_vobsub.cpp \
-AQ_eq2.cpp \
-DIA_srt.cpp
-
-INCLUDES = $(all_includes)  $(XML_CFLAGS)  $(FREETYPE_CFLAGS) -DADM_SUBVERSION=@ADM_SUBVERSION@ \
-		-I../../../ADM_libraries/ADM_utilities \
-		-I../../ADM_commonUI -I../../.. -I../../../ADM_libraries/ADM_lavutil \
-		-I../../../ADM_inputs -I../../../ADM_outputs @ADM_QTINCLUDES@
-
-libADM_dialog_a_METASOURCES = AUTO
-
-
-include ../Makefile.adm
-
-
-EXTRA_DIST =  
-

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,19 +0,0 @@
-
-noinst_LIBRARIES = libADM_dialogFactory.a 
-
-libADM_dialogFactory_a_METASOURCES = AUTO
-
-libADM_dialogFactory_a_SOURCES = AT_dialogFactory.cpp AT_toggle.cpp FAC_integer.cpp AT_menu.cpp FAC_float.cpp \
-AT_filesel.cpp AT_bitrate.cpp AT_threadCount.cpp \
-AT_button.cpp \
-AT_slider.cpp \
-FAC_bar.cpp FAC_readOnlyText.cpp FAC_notch.cpp FAC_frame.cpp FAC_hex.cpp FAC_matrix.cpp
-
-
-INCLUDES = $(all_includes)  $(XML_CFLAGS)  $(FREETYPE_CFLAGS) -DADM_SUBVERSION=@ADM_SUBVERSION@ \
-                -I../../../ADM_libraries/ADM_utilities \
-                -I../../ADM_commonUI -I../../.. -I../../../ADM_libraries/ADM_lavutil \
-                -I../../../ADM_inputs -I../../../ADM_outputs @ADM_QTINCLUDES@
-
-include ../Makefile.adm
-

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,19 +0,0 @@
-
-noinst_LIBRARIES = libADM_filters.a 
-libADM_filters_a_SOURCES =  filter_none.cpp AQ_mainfilter.cpp filter_rsc.cpp
-
-INCLUDES = $(all_includes)  $(XML_CFLAGS)  $(FREETYPE_CFLAGS) -DADM_SUBVERSION=@ADM_SUBVERSION@ \
-		-I../../../ADM_libraries/ADM_utilities \
-		-I../../ADM_commonUI -I../../.. -I../../../ADM_libraries/ADM_lavutil \
-		-I../../../ADM_inputs -I../../../ADM_outputs @ADM_QTINCLUDES@
-
-libADM_filters_a_METASOURCES = AUTO
-
-
-include ../Makefile.adm
-filter_rsc.cpp : filter.qrc
-	$(RCC)  $< -o $@   -name filter
-
-
-EXTRA_DIST =  
-

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,20 +0,0 @@
-
-noinst_LIBRARIES = libADM_gui2.a 
-
-INCLUDES = $(all_includes)  $(XML_CFLAGS)  $(FREETYPE_CFLAGS) -DADM_SUBVERSION=@ADM_SUBVERSION@ \
-		-I../../../ADM_libraries/ADM_utilities \
-		-I../../ADM_commonUI -I../../.. -I../../../ADM_libraries/ADM_lavutil \
-		-I../../../ADM_inputs -I../../../ADM_outputs \
-		@ADM_QTINCLUDES@
-
-libADM_gui2_a_METASOURCES = AUTO
-
-libADM_gui2_a_SOURCES = gui_none.cpp file_qt4.cpp avidemux_rsc.cpp \
-			AQ_gui2.cpp   AT_preview.cpp ADM_qslider.cpp
-
-include ../Makefile.adm
-
-avidemux_rsc.cpp : avidemux.qrc
-	$(RCC)  $< -o $@	-name avidemux
-EXTRA_DIST =
-

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_ocr/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_ocr/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_ocr/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,16 +0,0 @@
-
-noinst_LIBRARIES = libADM_ocrQt4.a 
-libADM_ocrQt4_a_SOURCES = AQ_ocr.cpp 
-
-INCLUDES = $(all_includes)  -I../../../ADM_libraries/ADM_utilities \
-		-I../../ADM_commonUI -I../../.. -I../../../ADM_libraries/ADM_lavutil \
-		-I../../../ADM_inputs -I../../../ADM_outputs @ADM_QTINCLUDES@ ../../../ADM_ocr
-
-libADM_ocrQt4_a_METASOURCES = AUTO
-
-
-include ../Makefile.adm
-
-
-EXTRA_DIST =  
-

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,14 +0,0 @@
-noinst_LIBRARIES = libADM_UI_QT4.a
-
-libADM_UI_QT4_a_METASOURCES = AUTO
-libADM_UI_QT4_a_SOURCES = ui_support.cpp
-
-INCLUDES = @ADM_QTINCLUDES@
-SUBDIRS = ADM_dialog  ADM_gui  ADM_filters ADM_dialogFactory ADM_ocr
-
-
-
-clean:
-	rm -f ui_*.h AT_*.cpp AQ_*.cpp  *.moc
-	rm -f */ui_*.h */AT_*.cpp */AQ_*.cpp  */*.moc
-

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,32 +0,0 @@
-noinst_LIBRARIES = libADM_CommonUI.a libmergedCommonUI.a
-libADM_CommonUI_a_METASOURCES = AUTO
-libADM_CommonUI_a_SOURCES = GUI_sdlRender.cpp  GUI_xvRender.cpp  \
-DIA_resizeWiz.cpp DIA_builtin.cpp DIA_postproc.cpp DIA_enter.cpp \
-DIA_audioconfig.cpp GUI_render.cpp DIA_SVCD.cpp DIA_DVDff.cpp \
-DIA_bitrateHisto.cpp DIA_prefs.cpp DIA_gototime.cpp \
-DIA_lavcodec.cpp DIA_mjpeg.cpp DIA_requant.cpp \
-DIA_audioFilter.cpp DIA_flyDialog.cpp DIA_flyCrop.cpp \
-DIA_flyAsharp.cpp DIA_flyChromaShift.cpp DIA_flyContrast.cpp \
-DIA_flyHue.cpp \
-DIA_flySrtPos.cpp \
-DIA_tdeint.cpp DIA_v2v.cpp \
-DIA_lavDecoder.cpp  DIA_srt.cpp \
-DIA_animated.cpp \
-DIA_ocr.cpp \
-DIA_tsSub.cpp \
-DIA_flyEq2.cpp \
-DIA_flyThreshold.cpp \
-DIA_flySwissArmyKnife.cpp \
-DIA_flyParticle.cpp \
-DIA_flyEraser.cpp \
-DIA_flv1.cpp
-
-commonObjs:=$(subst .cpp,.o,$(libADM_CommonUI_a_SOURCES))
-
-libmergedCommonUI.a :  $(commonObjs) 
-	$(LD) -r -o libmergedCommonUI.o  $(commonObjs)  && touch libmergedCommonUI.a 
-
-INCLUDES = $(all_includes) $(GTK_CFLAGS) $(XML_CFLAGS)  $(FREETYPE_CFLAGS) -DADM_SUBVERSION=@ADM_SUBVERSION@ \
-		-I./../../ADM_libraries/ADM_utilities \
-		-I./../ADM_commonUI -I../../.. -I./../../ADM_libraries/ADM_lavutil \
-		-I./../../ADM_inputs -I../..../ADM_outputs -I../../ADM_ocr

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,7 +0,0 @@
-SUBDIRS = ADM_NONE ADM_commonUI
-if ADM_UI_GTK
- SUBDIRS += ADM_GTK
-endif
-if ADM_UI_QT4
- SUBDIRS += ADM_QT4
-endif

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/.cvsignore
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/.cvsignore	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/.cvsignore	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,4 +0,0 @@
-Makefile.in
-Makefile
-*.o
-.deps

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,34 +0,0 @@
-####### kdevelop will overwrite this part!!! (begin)##########
-noinst_LIBRARIES = libADM_video.a
-
-## INCLUDES were found outside kdevelop specific part
-
-libADM_video_a_METASOURCES = AUTO
-#INCLUDES = $(all_includes) 
-
-libADM_video_a_SOURCES = \
- ADM_vidCached.cpp \
- ADM_vidPartial.cpp \
- ADM_vidFont.cpp \
- ADM_vidNull.cpp \
- ADM_vidClean.cpp \
- ADM_genvideo.cpp \
- ADM_vidFieldUtil.cpp \
- ADM_vidFieldUtil.h \
- ADM_confCouples.cpp \
- ADM_interlaced.cpp \
- ADM_vidRaw.cpp \
- ADM_cache.cpp \
- ADM_vidEqualizer.cpp \
- ADM_vidCNR2.cpp \
- ADM_vidMPdelogo.cpp \
- ADM_vidColorYuv.cpp  
-
-				
-
-
-EXTRA_DIST =  
-
-####### kdevelop will overwrite this part!!! (end)############
-INCLUDES = $(all_includes) -I../ADM_libraries -I../ADM_libraries/ADM_utilities -I../ADM_libraries/ADM_lavutil \
-			 $(FREETYPE_CFLAGS) $(ALTIVEC_SWITCH) -I../ADM_userInterfaces/ADM_commonUI -I../ADM_inputs

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,88 +0,0 @@
-####### generated by kdevelop long, long ago; now maintained by hand
-noinst_LIBRARIES = libADM_videoFilter.a
-
-## INCLUDES were found outside kdevelop specific part
-
-libADM_videoFilter_a_METASOURCES = AUTO
-#INCLUDES = $(all_includes) 
-
-libADM_videoFilter_a_SOURCES =  \
-ADM_resizeter.cpp \
-ADM_vidResize.cpp \
-ADM_vidResize25.cpp \
-ADM_resizebis.cpp \
-ADM_vidMPLResize.cpp \
-ADM_vidTdeint.cpp \
-ADM_guiResize.cpp \
- ADM_vidASS.cpp \
- ADM_vidBlend.cpp \
- ADM_vidDeintASM.cpp \
- ADM_vidDecDec.cpp \
- ADM_vidDecTelecide.cpp \
- ADM_vidDeinterlace.cpp \
- ADM_vidFields.cpp \
- ADM_vidPalShift.cpp \
- ADM_vidReverse.cpp \
- ADM_vidSeparateField.cpp \
- ADM_vidSwapSmart.cpp \
- ADM_vidSwapFields.cpp \
- ADM_vidPalSmart.cpp \
- ADM_vidUVSwap.cpp \
- ADM_vidStabilize.cpp \
- ADM_vidDropOut.cpp \
- ADM_vidVlad.cpp \
- ADM_vidWhirl.cpp \
- ADM_vidPulldown.cpp \
- ADM_vidFlipV.cpp \
- ADM_vidLuma.cpp \
- ADM_vidLargeMedian.cpp \
- ADM_vidChromaShift.cpp   \
- ADM_vidChroma.cpp \
- ADM_vidMosaic.cpp \
- ADM_vidBlendRemoval.cpp  \
- ADM_vidHardIvtcRemoval.cpp \
- ADM_vidDGbob.cpp \
- ADM_vidForcedPP.cpp \
- ADM_vidMSharpen.cpp \
- ADM_vidDenoise.cpp \
- ADM_vidMPLD3D.cpp \
- ADM_vidMPLD3Dlow.cpp \
- ADM_lavpp_deint.cpp \
- ADM_vidKernelDeint.cpp \
- ADM_vidMcDeint.cpp \
- ADM_vidFade.cpp \
- ADM_vidResampleFPS.cpp \
- ADM_vidSoften.cpp \
- ADM_vidBSmear.cpp \
- ADM_vidAddBorder.cpp \
- ADM_vidFlux.cpp \
- ADM_vidMsmooth.cpp \
- ADM_vidFastConvolution.cpp  \
- ADM_vidRotate.cpp \
- ADM_vidYadif.cpp \
- ADM_vidYadif_asm.c \
- ADM_vidAnimated.cpp \
- ADM_vidDvbSub.cpp \
- ADM_vidLogo.cpp \
- ADM_vidHue.cpp \
- ADM_vidSRT.cpp \
- ADM_vidSRTload.cpp \
- ADM_vidSRTRender.cpp \
- ADM_vidEq2.cpp \
- ADM_vidAsharp.cpp \
- ADM_vidContrast.cpp \
- ADM_vidDelta.cpp  \
- ADM_vidUnblend.cpp        \
- ADM_vidVobsub.cpp \
- ADM_vidVobSubRender.cpp \
- ADM_vobsubinfo.cpp \
- ADM_vidCrop.cpp \
- ADM_vidComputeAverage.cpp \
- ADM_vidSwissArmyKnife.cpp \
- ADM_vidThreshold.cpp \
- ADM_vidParticle.cpp       \
- ADM_vidEraser.cpp
-
-
-INCLUDES = $(all_includes) -I../ADM_libraries -I../ADM_libraries/ADM_utilities -I../ADM_libraries/ADM_lavutil \
-			 $(FREETYPE_CFLAGS) $(ALTIVEC_SWITCH) -I../ADM_userInterfaces/ADM_commonUI -I../ADM_inputs -I../ADM_video

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,193 +0,0 @@
-####### kdevelop will overwrite this part!!! (begin)##########
-
-
-CQK=avidemux2_cli
-if ADM_UI_GTK 
-CQK_GTK=avidemux2_gtk
-endif
-if ADM_UI_QT4
-CQK_QT4=avidemux2_qt4
-endif
-
-bin_PROGRAMS= $(CQK) $(CQK_GTK) $(CQK_QT4) 
-
-## INCLUDES were found outside kdevelop specific part
-
-if BUILD_ALTIVEC
-libmpeg2enc_Altivec = ./mpeg2enc/altivec/libaltivec.la
-endif
-
-if HAVE_CYGWIN
-win32_icon = ./xpm/adm.o
-endif
-
-user_interface_gtk = \
-		./ADM_toolkit/libADM_toolkit.a				\
-		./ADM_ocr/libADM_ocr.a	\
-		./ADM_userInterfaces/ADM_commonUI/libmergedCommonUI.o  \
-		./ADM_userInterfaces/ADM_GTK/libADM_UI_GTK.a    \
-		./ADM_userInterfaces/ADM_GTK/ADM_ocr/libADM_ocrGtk.a	\
-		./ADM_userInterfaces/ADM_GTK/ADM_filters/libADM_filtersGtk.a \
-		./ADM_userInterfaces/ADM_GTK/ADM_dialog/libADM_dialogGtk.a	\
-		./ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/libADM_dialogFactory.a	\
-		./ADM_userInterfaces/ADM_GTK/ADM_gui2/libADM_gui2.a	\
-		./ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/libADM_toolkit_gtk.a	 
-		
-user_interface_cli = \
-		./ADM_toolkit/libADM_toolkit.a				\
-		./ADM_userInterfaces/ADM_NONE/libADM_UI_None.a    \
-		./ADM_userInterfaces/ADM_NONE/ADM_gui2/libADM_gui2.a	\
-		./ADM_userInterfaces/ADM_NONE/ADM_dialog/libADM_dialog.a	\
-		./ADM_userInterfaces/ADM_NONE/ADM_dialogFactory/libADM_dialogFactory.a	\
-		./ADM_userInterfaces/ADM_commonUI/libADM_CommonUI.a	\
-		./ADM_ocr/libADM_ocr.a	\
-		./ADM_userInterfaces/ADM_NONE/ADM_gui2/libADM_gui2.a	\
-		./ADM_userInterfaces/ADM_NONE/ADM_filters/libADM_filters.a  
-		
-		
-user_interface_qt4 = \
-			./ADM_userInterfaces/ADM_QT4/libADM_UI_QT4.a   \
-			./ADM_userInterfaces/ADM_QT4/ADM_gui/libADM_gui2.a	\
-			./ADM_userInterfaces/ADM_QT4/ADM_dialog/libADM_dialog.a	\
-			./ADM_userInterfaces/ADM_QT4/ADM_dialog/AQ_srt.o	\
-			./ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/libADM_dialogFactory.a	\
-			./ADM_userInterfaces/ADM_commonUI/libADM_CommonUI.a	\
-			./ADM_ocr/libADM_ocr.a	\
-			./ADM_userInterfaces/ADM_QT4/ADM_ocr/libADM_ocrQt4.a   \
-			./ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/libADM_dialogFactory.a	\
-			./ADM_userInterfaces/ADM_QT4/ADM_gui/libADM_gui2.a	\
-			./ADM_userInterfaces/ADM_QT4/ADM_filters/libADM_filters.a \
-			./ADM_toolkit/libADM_toolkit.a
-
-adm_src =   guiplay.cpp  \
-	gui_savenew.cpp  gui_navigate.cpp gtk_gui.cpp   \
-	main.cpp   gui_action.cpp  \
-	gui_autodrive.cpp GUI_jobs.cpp ADM_preview.cpp
-
-
-avidemux2_cli_SOURCES=$(adm_src)
-if ADM_UI_GTK
-avidemux2_gtk_SOURCES=$(adm_src)
-endif
-if ADM_UI_QT4
-avidemux2_qt4_SOURCES=$(adm_src)
-endif
-
-SUBDIRS = ADM_libraries ADM_audio ADM_audiocodec ADM_audiofilter ADM_codecs \
-	ADM_colorspace ADM_editor ADM_encoder ADM_filter  \
-	ADM_toolkit xpm ADM_video ADM_videoFilter ADM_audiodevice \
-	\
-	ADM_requant \
-	ADM_script ADM_ocr \
-	ADM_osSupport \
-	ADM_inputs ADM_outputs \
-	ADM_userInterfaces \
-	ADM_infoExtractor
-	
-
-
-EXTRA_DIST = ADM_assert.h       gtkgui.h         \
-h  gui_autodrive.cpp  main.cpp   \
-ADM_lavcodec.h  GUI_jobs.cpp      gui_navigate.cpp   \
-gui_savenew.cpp     \
-     avi_vars.h      gtk_gui.cpp    guiplay.cpp    prefs.h \
-gui_action.hxx prefs.in
-
-####### kdevelop will overwrite this part!!! (end)############
-
-adm_lib= \
-./ADM_libraries/ADM_libwrapper/libADM_libwrapper.a	\
-ADM_filter/filter_saveload.o 				\
-./ADM_audiofilter/libADM_audiofilter.a			\
-./ADM_filter/libADM_filter.a				\
-./ADM_editor/libADM_editor.a				\
-./ADM_audiocodec/libADM_audiocodec.a			\
-./ADM_audio/libADM_audio.a				\
-./ADM_script/libADM_script.a				\
-./ADM_libraries/ADM_smjs/libADM_smjs.a			\
-./ADM_videoFilter/libADM_videoFilter.a			\
-./ADM_video/libADM_video.a				\
-./ADM_audiodevice/libADM_audiodevice.a			\
-./ADM_outputs/oplug_mp4/liboplug_mp4.a			\
-./ADM_outputs/oplug_mpeg/liboplug_mpeg.a		\
-./ADM_outputs/oplug_mpegFF/liboplug_mpegFF.a		\
-./ADM_outputs/oplug_ogm/liboplug_ogm.a			\
-./ADM_outputs/oplug_avi/liboplug_avi.a			\
-./ADM_outputs/oplug_flv/liboplug_flv.a			\
-./ADM_outputs/oplug_dummy/liboplug_dummy.a		\
-./ADM_encoder/libADM_encoder.a				\
-./ADM_codecs/libADM_codecs.a				\
-./ADM_requant/libADM_requant.a				\
-./ADM_inputs/ADM_mp4/libADM_mp4.a			\
-./ADM_inputs/ADM_asf/libADM_asf.a			\
-./ADM_inputs/ADM_h263/libADM_h263.a			\
-./ADM_inputs/ADM_inpics/libADM_inpics.a			\
-./ADM_inputs/ADM_mpegdemuxer/libADM_mpegdemuxer.a	\
-./ADM_inputs/ADM_nuv/libADM_nuv.a			\
-./ADM_inputs/ADM_ogm/libADM_ogm.a			\
-./ADM_inputs/ADM_flv/libADM_flv.a			\
-./ADM_inputs/ADM_amv/libADM_amv.a			\
-./ADM_inputs/ADM_openDML/libADM_openDML.a		\
-./ADM_inputs/ADM_avsproxy/libADM_avsproxy.a		\
-./ADM_inputs/ADM_matroska/libADM_matroska.a		\
-./ADM_infoExtractor/libADM_infoExtractor.a 		\
-./ADM_libraries/ADM_libpostproc/libpostproc.a	\
-./ADM_libraries/ADM_mplex/libADM_mplex.a		\
-./ADM_libraries/ADM_lvemux/libADM_lvemux.a		\
-./ADM_libraries/ADM_lavformat/libADM_lavformat.a	\
-./ADM_libraries/ADM_lavcodec/libavcodec.a		\
-./ADM_libraries/ADM_lavutil/libADM_lavutil.a		\
-./ADM_libraries/ADM_liba52/libADM_liba52.a		\
-./ADM_libraries/ADM_libMad/libADM_mad.a			\
-./ADM_libraries/ADM_libass/libass.a			\
-./ADM_libraries/ADM_libtwolame/liblibtoolame.a		\
-./ADM_libraries/ADM_libMpeg2Dec/liblibMpeg2Dec.a	\
-./ADM_libraries/ADM_libmpeg2enc/libmpeg2enc.a		\
-./ADM_libraries/ADM_xvidratectl/libADM_xvidratectl.a
-
-adm_postlib= \
-./ADM_libraries/ADM_utilities/libADM_library.a		\
-./ADM_colorspace/libADM_colorspace.a			\
-./ADM_osSupport/libADM_ossupport.a			\
-./ADM_libraries/ADM_libswscale/libswscale.a		\
-$(libmpeg2enc_Altivec) \
-$(win32_icon)
-
-if ADM_UI_GTK
-avidemux2_gtk_LDADD=$(adm_lib) $(user_interface_gtk) $(adm_postlib) $(all_libraries)  $(SDL_LIBS) $(GTK_LIBS) $(FREETYPE_LIBS) $(FC_LIBS) $(ARTS_LIBS) $(XML_LIBS) $(GLIB_LIBS)
-endif
-
-avidemux2_cli_LDADD=$(adm_lib) $(user_interface_cli) $(adm_postlib) $(all_libraries)  $(SDL_LIBS) $(FREETYPE_LIBS) $(FC_LIBS) $(ARTS_LIBS) $(XML_LIBS)  $(GLIB_LIBS)
-
-if ADM_UI_QT4	
-avidemux2_qt4_LDADD=$(adm_lib) $(user_interface_qt4) $(adm_postlib) $(all_libraries) $(ADM_QTLIBS) $(SDL_LIBS) $(FREETYPE_LIBS) $(FC_LIBS) $(ARTS_LIBS) $(XML_LIBS) $(GLIB_LIBS)
-endif
-
-
-INCLUDES = $(all_includes) $(GTK_CFLAGS) $(XML_CFLAGS) \
-	$(SMONKEY_CFLAGS) \
-	-IADM_inputs -IADM_outputs \
-	-IADM_lavutil  -IADM_libraries -IADM_libraries/ADM_utilities -IADM_libraries/ADM_lavutil \
-	-IADM_userInterfaces/ADM_commonUI \
-	-IADM_userInterfaces/ADM_GTK $(GLIB_CFLAGS) \
-	-DADM_SUBVERSION=0 \
-	@ADM_QTINCLUDES@
-
-# the library search path.
-if ADM_UI_GTK
-if HAVE_CYGWIN
-avidemux2_gtk_LDFLAGS=-Wl,--export-all-symbols
-else
-avidemux2_gtk_LDFLAGS=-Wl,--export-dynamic
-endif
-endif
-
-avidemux2_cli_LDFLAGS =-Wl,--export-dynamic  
-
-if ADM_UI_QT4	
-avidemux2_qt4_LDFLAGS= -Wl,--export-dynamic 
-endif
-
-noinst_HEADERS = 
-AM_CFLAGS = -g
-AM_CXXFLAGS = -g

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,10 +0,0 @@
-noinst_LIBRARIES = libADM_liba52.a
-
-INCLUDES = $(all_includes) 
-
-libADM_liba52_a_METASOURCES = AUTO
-
-libADM_liba52_a_SOURCES = bitstream.c imdct.c bit_allocate.c parse.c downmix.c
-
-EXTRA_DIST = a52.h  a52_internal.h  attributes.h  bitstream.h  mm_accel.h  tables.h bit_allocate.c  bitstream.c  downmix.c  imdct.c  parse.c
-

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/ADM_libMad/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/ADM_libMad/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/ADM_libMad/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,16 +0,0 @@
-####### kdevelop will overwrite this part!!! (begin)##########
-noinst_LIBRARIES = libADM_mad.a
-
-## INCLUDES were found outside kdevelop specific part
-
-libADM_mad_a_METASOURCES = AUTO
-
-libADM_mad_a_SOURCES = bit.c  decoder.c  fixed.c  frame.c  huffman.c  layer12.c  layer3.c stream.c  synth.c  timer.c  version.c
-
-SUBDIRS = 
-
-EXTRA_DIST = bit.h  fixed.h  global.h layer12.h  mad.h   stream.h  timer.h \
-decoder.h  frame.h  huffman.h  layer3.h madmem.h  synth.h version.h \
-D.dat  imdct_s.dat  qc_table.dat  rq_table.dat  sf_table.dat
-
-INCLUDES =  $(all_includes) 

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/xpm/.cvsignore
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/xpm/.cvsignore	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/xpm/.cvsignore	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,4 +0,0 @@
-Makefile.in
-Makefile
-*.o
-.deps

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/xpm/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/xpm/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/xpm/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,17 +0,0 @@
-####### kdevelop will overwrite this part!!! (begin)##########
-
-
-EXTRA_DIST =  1.inc          about.xpm       \
-film13.inc  film9.inc                   play.xpm \
-2.inc          avidemux_icon.inc        film15.inc  forward.xpm                 preview.inc \
-3.inc          avidemux_icon.xpm        film17.inc  gnome-calculator.xpm        stop.xpm \
-4.inc          avidemux_icon_small.inc  film19.inc  gnome-calculator_small.xpm  systray.inc \
-5.inc          backward.xpm             film21.inc  gnome_calc_small.inc        systray.xpm \
-6.inc          begin.xpm                film23.inc  gnome_calculator.inc        systray2.inc \
-7.inc          end.xpm                  film3.inc   markA.xpm                   systray2.xpm \
-Kbackward.xpm  film1.inc                film5.inc   markB.xpm                   xpm_nextblack.xpm \
-Kforward.xpm   film11.inc               film7.inc   output.inc                  xpm_prevblack.xpm \
-preview-button.inc
-
-
-####### kdevelop will overwrite this part!!! (end)############

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux.spec
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux.spec	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/avidemux.spec	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,213 +0,0 @@
-%define name	avidemux2
-%define ver	2.0	
-%define rel	7
-%define prefix	/usr
-
-Summary:	A graphical multiplex/demultiplex tool using GTK.
-Name:		%name
-Version:	%ver
-Release:	%rel
-License:	GPL
-Group:		Applications/Multimedia
-Packager:	Kubus (based on ::cipherfunk industries::)
-
-Source:		%{name}-%{version}.tgz
-URL:		http://fixounet.free.fr/avidemux/
-BuildRoot:	%{_tmppath}/%{name}-%{version}-root
-BuildRequires:	gcc >= 2.96
-BuildRequires:	glib-devel
-BuildRequires:	gtk+-devel >= 2.0.0
-BuildRequires:  nasm >= 0.98.22
-Requires:	glib
-Requires:	gtk+ >= 2.0.0
-
-%description
-Avidemux is a graphical tool to edit AVI. It allows you to multiplex and
-demultiplex audio to/from video.
-
-It is able to cut video, import BMP, MJPEG and MPEG video, and encode them.
-You can also process video with included filters. It requires a DivX 
-compatible encoder and the Gimp Toolkit (GTK) libraries.
-
-%prep
-%setup
-
-%build
-
-LC_MESSAGES=C ; export LC_MESSAGES
-
-if [ ! -f configure ]; then
-			CC=gcc CXX=g++ \
-			CFLAGS="$RPM_OPT_FLAGS" \
-			CXXFLAGS="$RPM_OPT_FLAGS" \
-			./autogen.sh \
-			--prefix=%{_prefix} \
-			--datadir=%{_datadir}/%{name} \
-			--sysconfdir=%{_sysconfdir}/%{name} \
-			--host=%{_target_platform} \
-			--disable-warnings
-else
-			CC=gcc CXX=g++ \
-			CFLAGS="$RPM_OPT_FLAGS" \
-			CXXFLAGS="$RPM_OPT_FLAGS" \
-			./configure \
-			--prefix=%{_prefix} \
-			--datadir=%{_datadir}/%{name} \
-			--sysconfdir=%{_sysconfdir}/%{name} \
-			--host=%{_target_platform} \
-			--disable-warnings
-
-fi
-
-# if RPM_BUILD_NCPUS unset, set it
-if [ -z "$RPM_BUILD_NCPUS" ] ; then
-  if [ -x /usr/bin/getconf ] ; then
-    RPM_BUILD_NCPUS=$(/usr/bin/getconf _NPROCESSORS_ONLN)
-    if [ $RPM_BUILD_NCPUS -eq 0 ]; then
-      RPM_BUILD_NCPUS=1
-    fi
-  else
-    RPM_BUILD_NCPUS=1
-  fi
-fi
-
-#make -j$RPM_BUILD_NCPUS
-make
-
-%install
-rm -rf %{buildroot}
-%makeinstall
-
-%clean
-rm -rf %{buildroot}
-
-%files
-%defattr(755, root, root)
-
-%{_bindir}/%{name}
-
-%changelog
-* Tue Mar 04 2003 Jacek Pliszka <pliszka at phyun0.ucr.edu> 0.9-rc1
-- update to 0.9-rc1
-- .spec adjusted for rpm building from tar.gz 
-
-* Mon Feb 10 2003 Paul Drain <pd at cipherfunk.org> 0.9pre32-2
-- added GUI cleanups
-- remove debugging flag from default ffmpeg build
-
-* Sat Feb 08 2003 Paul Drain <pd at cipherfunk.org> 0.9pre32-1
-- update to pre32
-
-* Fri Jan 31 2003 Paul Drain <pd at cipherfunk.org> 0.9pre31-1
-- snapshot build of 31-5 code (never officially packaged)
-
-* Mon Jan 27 2003 Paul Drain <pd at cipherfunk.org> 0.9pre30-2
-- added mean's 'recommended' pre30 patches
-
-* Sun Jan 19 2003 Paul Drain <pd at cipherfunk.org> 0.9pre30-1
-- update to pre30
-- removed pending patches (merged in mainline)
-
-* Mon Jan 13 2003 Paul Drain <pd at cipherfunk.org> 0.9pre28-4
-- updated current snapshot code (against 29-3.tar.gz)
-- added GUI cleanups patch
-
-* Tue Jan 07 2003 Paul Drain <pd at cipherfunk.org> 0.9pre28-3
-- updated current snapshot code (against 29-2.tar.gz)
-- added nasm to the build depenancies
-
-* Tue Jan 07 2003 Paul Drain <pd at cipherfunk.org> 0.9pre28-2
-- updated current snapshot code (against 29-1.tar.gz)
-
-* Sun Jan 05 2003 Paul Drain <pd at cipherfunk.org> 0.9pre28-1
-- update to pre28
-- removed freetype and alignment bugfixes (merged in mainline)
-
-* Mon Dec 30 2002 Paul Drain <pd at cipherfunk.org> 0.9pre26-2
-- added freetype 2.1.3 build patch
-- added MP3 and PCM alignment patch
-
-* Sat Dec 28 2002 Paul Drain <pd at cipherfunk.org> 0.9pre26-1
-- update to pre26
-- removed ffmpeg bugfixes (merged in mainline)
-
-* Fri Dec 20 2002 Paul Drain <pd at cipherfunk.org> 0.9pre24-5
-- updated current snapshot code (against 25-3.tar.gz)
-
-* Thu Dec 12 2002 Paul Drain <pd at cipherfunk.org> 0.9pre24-4
-- added current snapshot code (against 25-1.tar.gz)
-- removed extended mp3 header patch (merged in mainline)
-- removed the __without_divx flag in this specfile
-  (no longer required)
-  
-* Wed Dec 11 2002 Paul Drain <pd at cipherfunk.org> 0.9pre24-3
-- added H263 based XViD playback patch to fix padding on badly
-  encoded XViD or emulated DivX films
-- added various small compile time bugfixes from ffmpeg CVS
-- added RPM version tag
-
-* Tue Dec 10 2002 Paul Drain <pd at cipherfunk.org> 0.9pre24-2
-- added extended mp3 header patch (exports header info to CBR and VBR MP3s)
-- added stablization filter patch
-- rebuilt against LAME 3.93.1
-
-* Mon Dec 09 2002 Paul Drain <pd at cipherfunk.org> 0.9pre24
-- update to pre24
-
-* Fri Dec 06 2002 Paul Drain <pd at cipherfunk.org> 0.9pre22-6
-- update pre23 snapshot patch (patch vs. 23-9.tar.gz)
-- update XViD defaults (keyframe lengths)
-
-* Tue Dec 03 2002 Paul Drain <pd at cipherfunk.org> 0.9pre22-5
-- update pre23 snapshot patch (patch vs. 23-6.tar.gz)
-
-* Fri Nov 29 2002 Paul Drain <pd at cipherfunk.org> 0.9pre22-4
-- update pre23 snapshot patch (patch vs. 23-4.tar.gz)
-- fixed fastchroma bug
-
-* Tue Nov 25 2002 Paul Drain <pd at cipherfunk.org> 0.9pre22-2
-- add pre23 snapshot patch (patch vs. 23-1.tar.gz)
-
-* Thu Nov 21 2002 Paul Drain <pd at cipherfunk.org> 0.9pre22-1
-- update to pre22
-
-* Mon Oct 07 2002 Paul Drain <pd at cipherfunk.org>
-- update to pre18
-- removed 0.9pre16 patches, merged in mainline
-
-* Fri Oct 04 2002 Paul Drain <pd at cipherfunk.org>
-- automated rebuild under gcc 3.2
-
-* Mon Sep 23 2002 Paul Drain <pd at cipherfunk.org>
-- update to pre16
-- removed 0.9pre14 patches, merged in mainline
-- added patch for unusual GTK+ paths in automake
-
-* Sun Sep 22 2002 Paul Drain <pd at cipherfunk.org>
-- add patch to fix 2pass CBR encoding bug
-- add patch to fix ffmpeg single pass VBR demuxing bug
-
-* Sat Sep 14 2002 Paul Drain <pd at cipherfunk.org>
-- update to pre14
-
-* Fri Aug 30 2002 Paul Drain <pd at cipherfunk.org>
-- update to pre13
-
-* Sun Aug 25 2002 Paul Drain <pd at cipherfunk.org>
-- added XviD encoder fixes from current avidemux snapshot
-
-* Thu Aug 15 2002 Paul Drain <pd at cipherfunk.org>
-- update to pre12
-- removed patch0, fixed in mainline
-
-* Wed Aug 14 2002 Paul Drain <pd at cipherfunk.org>
-- mark divx4linux as an i386 dependant library
-- remove %attr and make the defaults 0755 (no need to write to the binaries)
-
-* Mon Aug 12 2002 Paul Drain <pd at cipherfunk.org>
-- update to pre11
-- added cosmetic patch for spelling error :) 
-
-* Mon Aug 05 2002 Paul Drain <pd at cipherfunk.org>
-- Completely rebuilt the specfile
-

Deleted: branches/avidemux_2.5_branch_gruntster/configure.darwin
===================================================================
--- branches/avidemux_2.5_branch_gruntster/configure.darwin	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/configure.darwin	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,12 +0,0 @@
-#!/bin/bash
-# -DUSE_ALTIVEC -framework SDL -I/Developer/SDKs/MacOSX10.4u.sdk/System/Library/Frameworks/SDL.framework/Headers
-export PATH=/sw/lib/freetype219/bin:$PATH
-export PKG_CONFIG_PATH="/sw/lib/freetype219/lib/pkgconfig:/sw/lib/pkgconfig:/sw/lib"
-export CPPFLAGS="-I/sw/lib/freetype219/include/freetype2 -I/Developer/SDKs/MacOSX10.4u.sdk/usr/include -I/Developer/SDKs/MacOSX10.4u.sdk/usr/X11R6/include -I/Developer/SDKs/MacOSX10.4u.sdk/usr/X11R6/include -I/sw/include"
-export CFLAGS="$CPPFLAGS $CFLAGS -D__unix___ -D__maxosx__  "
-export CXXFLAGS="$CPPFLAGS $CXXFLAGS  -D__unix__ -D__linux__"
-export LDFLAGS="-L/sw/lib/freetype219/lib -L/sw/lib/mozilla -lmozjs -lnspr4 -L/Developer/SDKs/MacOSX10.4u.sdk/usr/lib -L/usr/X11R6/lib/ -L/Developer/SDKs/MacOSX10.4u.sdk/usr/X11R6/lib -L/sw/lib $LDFLAGS "
-export CCAS=gcc
-#export CCAS=/usr/libexec/gcc/darwin/ppc/as
-./configure --prefix=/sw --enable-freetype --with-freetype --with-altivec --enable-altivec --with-jsapi-include=/sw/include  --enable-debug=0 --disable-xv --with-libsdl  --without-esd --without-arts $*
-

Deleted: branches/avidemux_2.5_branch_gruntster/configure.darwinport
===================================================================
--- branches/avidemux_2.5_branch_gruntster/configure.darwinport	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/configure.darwinport	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,9 +0,0 @@
-#!/bin/bash
-export PATH=/opt/local/bin:$PATH
-export LD_LIBRARY_PATH=/opt/local/lib:$LD_LIBRARY_PATH
-export CPPFLAGS="-I/opt/local/include"
-export CFLAGS=$CPPFLAGS
-export CXXFLAGS=$CPPFLAGS
-export LDFLAGS="-L/opt/local/lib"
-./configure --prefix=/opt/local --with-extra-includes=/opt/local/include --with-extra-libs=/opt/local/lib --enable-altivec
-

Deleted: branches/avidemux_2.5_branch_gruntster/configure.files
===================================================================
--- branches/avidemux_2.5_branch_gruntster/configure.files	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/configure.files	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,2 +0,0 @@
-configure.in.in
-configure.in.bot

Deleted: branches/avidemux_2.5_branch_gruntster/configure.in.bot
===================================================================
--- branches/avidemux_2.5_branch_gruntster/configure.in.bot	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/configure.in.bot	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,46 +0,0 @@
-dnl **   mean   ***
-echo "****************************************"
-echo "********** Configure Summary ***********"
-echo "****************************************"
-echo "*********** User Interfaces ************"
-echo " CLI                 : yes"
-echo " GTK                 : $adm_gtk_enabled ($GTK_VERSION)"
-echo " QT4                 : $adm_qt4_enabled"
-echo "************* Video Codecs *************"
-echo " FFmpeg              : yes"
-echo " x264                : $have_x264"
-echo " Xvid                : $have_xvid ($xvid_version)"
-echo "************* Audio Codecs *************"
-echo " A52/AC3             : yes"
-echo " Aften               : $have_aften ($aften_version)"
-echo " amrnb               : $have_libamrnb"
-echo " FAAC                : $have_faac"
-echo " FAAD2               : $have_faad"
-echo " LAME                : $have_lame"
-echo " libdca              : $have_libdca"
-echo " MAD                 : yes"
-echo " Ogg Vorbis          : $have_vorbis"
-echo "************ Misc Libraries ************"
-echo " ALSA                : $have_alsa"
-echo " aRts                : $have_arts"
-echo " ESD                 : $have_esd"
-echo " Fontconfig          : $have_fontconfig"
-echo " FreeType 2          : $have_freetype"
-echo " gettext locale      : $ADM_LOCALEDIR"
-echo " Libxml2             : $have_xml2"
-echo " OSS                 : $have_oss"
-echo " SDL                 : $have_sdl"
-echo " XVideo              : $have_xv"
-echo "********** Machine Dependent ***********"
-echo " AltiVec             : $have_altivec"
-echo " AMD64               : $have_amd64"
-echo " Little endian CPU   : $have_little_endian"
-echo " PowerPC             : $have_ppc"
-echo " X86                 : $use_mmx"
-echo " Cygwin              : $use_cygwin"
-echo " Mac OS X (Darwin)   : $have_darwin"
-echo " Debug               : $use_debug"
-echo " GCC vector support  : $use_builtin"
-echo " Late binding        : $use_late_binding"
-echo " Profiling           : $use_profile"
-echo "****************************************"

Deleted: branches/avidemux_2.5_branch_gruntster/configure.in.in
===================================================================
--- branches/avidemux_2.5_branch_gruntster/configure.in.in	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/configure.in.in	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,1454 +0,0 @@
-dnl    This file is part of the KDE libraries/packages
-dnl    Copyright (C) 2001 Stephan Kulow (coolo at kde.org)
-dnl                       modified by Walter Tasin (tasin at kdevelop.org)
-dnl                       for c++ console applications
-
-dnl    This file is free software; you can redistribute it and/or
-dnl    modify it under the terms of the GNU Library General Public
-dnl    License as published by the Free Software Foundation; either
-dnl    version 2 of the License, or (at your option) any later version.
-
-dnl    This library is distributed in the hope that it will be useful,
-dnl    but WITHOUT ANY WARRANTY; without even the implied warranty of
-dnl    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
-dnl    Library General Public License for more details.
-
-dnl    You should have received a copy of the GNU Library General Public License
-dnl    along with this library; see the file COPYING.LIB.  If not, write to
-dnl    the Free Software Foundation, Inc., 59 Temple Place - Suite 330,
-dnl    Boston, MA 02111-1307, USA.
-
-# Original Author was Kalle at kde.org
-# I lifted it in some mater. (Stephan Kulow)
-# I used much code from Janos Farkas
-
-
-AC_INIT(acinclude.m4) dnl a source file from your sub dir
-
-dnl This is so we can use kde-common
-dnl needed -- mean
-AC_CONFIG_AUX_DIR(admin)
-
-dnl This ksh/zsh feature conflicts with `cd blah ; pwd`
-unset CDPATH
-
-dnl Checking host/target/build systems, for make, install etc.
-AC_CANONICAL_HOST
-
-dnl Perform program name transformation
-AC_ARG_PROGRAM
-dnl Automake doc recommends to do this only here. (Janos)
-AM_INIT_AUTOMAKE(avidemux,"2.4.1")
-ADM_SUBVERSION="0"
-
-if [[ -f .svn/entries ]]; then
-	AC_PATH_PROG(SVNVERSION, svnversion, no)
-	
-	if test "$SVNVERSION" != "no" ; then
-		rev=`svnversion . | sed 's/^.*://g' | sed 's/M$//g'`
-		ADM_SUBVERSION="\"$rev\""
-	fi
-fi
-
-dnl almost the same like KDE_SET_PEFIX but the path is /usr/local
-unset CDPATH
-
-dnl make /usr/local the default for the installation
-AC_PREFIX_DEFAULT(/usr/local)
-
-AM_PROG_AS
-
-dnl Ranlib
-AC_PROG_RANLIB
-AC_PROG_CXX
-AC_PROG_LIBTOOL
-
-dnl without this order in this file, automake will be confused!
-AM_CONFIG_HEADER(config.h)
-
-dnl added to ease install in uncommon place
-dnl it has to be done early else it breaks cross compile
-CPPFLAGS="$USER_INCLUDES $CPPFLAGS"
-CFLAGS="$USER_INCLUDES $CFLAGS"
-CXXFLAGS="$USER_INCLUDES $CXXFLAGS"
-# needed for make install
-#inlined, AM_PROG_MKDIR_P, it is not present on some system (fedora)
-
-if mkdir -p --version . >/dev/null 2>&1 && test ! -d ./--version; then
-	# Keeping the `.' argument allows $(mkdir_p) to be used without
-	# argument.  Indeed, we sometimes output rules like
-	#   $(mkdir_p) $(somedir)
-	# where $(somedir) is conditionally defined.
-	# (`test -n '$(somedir)' && $(mkdir_p) $(somedir)' is a more
-	# expensive solution, as it forces Make to start a sub-shell.)
-	
-	mkdir_p='mkdir -p -- .'
-else
-	# On NextStep and OpenStep, the `mkdir' command does not
-	# recognize any option.  It will interpret all options as
-	# directories to create, and then abort because `.' already
-	# exists.
-	
-	for d in ./-p ./--version;
-	do
-		test -d $d && rmdir $d
-	done
-	
-	# $(mkinstalldirs) is defined by Automake if mkinstalldirs exists.
-	
-	if test -f "$ac_aux_dir/mkinstalldirs"; then
-		mkdir_p='$(mkinstalldirs)'
-	else
-		mkdir_p='$(install_sh) -d'
-	fi
-fi
-
-AC_SUBST([mkdir_p])
-
-# /AM_PROG_MKDIR_P
-AC_PROG_INSTALL
-
-dnl create only shared libtool-libraries
-AC_ENABLE_SHARED(no)
-
-dnl set the following to yes, if you want to create static
-dnl libtool-libraries, too.
-AC_ENABLE_STATIC(no)
-
-dnl create a working libtool-script
-dnl KDE_PROG_LIBTOOL
-dnl KDE_CHECK_EXTRA_LIBS
-
-all_libraries="$all_libraries $USER_LDFLAGS"
-AC_SUBST(all_includes)
-AC_SUBST(all_libraries)
-dnl avoid po mess
-AC_SUBST(AUTODIRS)
-AC_SUBST(ADM_SUBVERSION)
-
-
-dnl _________________ gettext _________________
-AM_GNU_GETTEXT([external])
-GETTEXT_PACKAGE=avidemux
-AC_DEFINE_UNQUOTED([GETTEXT_PACKAGE], "$GETTEXT_PACKAGE", [gettext package name])
-ADM_LOCALEDIR=${datadir}/locale
-AC_SUBST(ADM_LOCALEDIR)
-
-dnl _________________ GTK 2.x _________________
-adm_gtk_enabled=yes
-
-echo " -------------------  for GTK 2.x ------------------"
-AC_PATH_PROG(PKG_CONFIG, pkg-config, no)
-if test "$PKG_CONFIG" = "no" ; then
-	echo "************ pkg-config IS MANDATORY ***************"
- 	AC_MSG_ERROR([*** pkg-config not found ! ***])
-	adm_gtk_enabled="no"
-fi
-
-dnl AC_PATH_PROG(PKG_CONFIG,pkg-config, AC_MSG_ERROR([*** pkg-config not found ! ***]))
-
-GTK_VERSION=`$PKG_CONFIG  gtk+-2.0 --modversion`
-GLIB_VERSION=`$PKG_CONFIG  glib-2.0 --modversion`
-
-if test "x$GTK_VERSION" = "x" ; then
-	echo "************ Cannot identify gtk2 version ***************"
-	AC_MSG_WARN([*** pkg-config installed incorrectly or gtk2-dev absent ! ***])
-	adm_gtk_enabled="no"
-fi
-
-if test "x$GLIB_VERSION" = "x" ; then
-	echo "************ Cannot identify glib-2.0 version ***************"
-	AC_MSG_WARN([*** pkg-config installed incorrectly or glib2-dev absent ! ***])
-	adm_gtk_enabled="no"
-fi
-
-VEROK=`echo "$GTK_VERSION" | perl -ne '@a=split(/\./,$_);
-	if( $a[[0]] > 2 or ($a[[0]] == 2 and $a[[1]] >= 6) ){
-		print "OK";
-	} else {
-		print "FAILED";
-	}'`
-                 
-if test "x$VEROK" != "xOK" ; then
-	AC_MSG_WARN([*** need gtk+ v2.6 or greater ! ***])
-	adm_gtk_enabled="no"
-fi
-
-GTK_LIBS=`$PKG_CONFIG  gtk+-2.0 --libs`
-GLIB_LIBS=`$PKG_CONFIG  glib-2.0 --libs`
-GTHREAD_LIBS=`$PKG_CONFIG  gthread-2.0  --libs`
-
-GTK_LIBS="$GTK_LIBS  $GTHREAD_LIBS"
-GTK_CFLAGS=`$PKG_CONFIG  gtk+-2.0 --cflags`
-GLIB_CFLAGS=`$PKG_CONFIG  glib-2.0 --cflags`  
-
-AC_SUBST(GLIB_LIBS)
-AC_SUBST(GLIB_CFLAGS)
-
-AC_SUBST(GTK_CFLAGS)
-AC_SUBST(GTK_LIBS)
-AC_SUBST(GTK_VERSION)
-
-dnl _________________ QT 4.x __________________
-adm_qt4_enabled=yes
-
-echo " ------------------- Probing for QT 4.x ------------------"
-QTDIR=xxx
-
-QTPOSTFIX="-qt4"
-QTEXTRAINC="/usr/include/qt4"
-QTEXTRALIB="/usr/lib/qt4"
-
-AC_ARG_WITH([qt-dir],
-	AC_HELP_STRING([--with-qt-dir=/path/to/Qt-4.x.0], 
-		[to specify the path to the Qt-4.x.0 directory.]),
-	[QTPATHS="$withval"],
-	[QTPATHS="/usr/local/Trolltech/Qt-4.1.0 /c/Qt/4.1.0"])
-	
-AC_ARG_WITH([qt-include],
-	AC_HELP_STRING([--with-qt-include=/path/to/Qt-4.x include],
-		[to specify the path to the Qt-4. include directory]),
-	[QTEXTRAINC="$withval"],
-	[QTEXTRAINC="/usr/include/qt4"])
-	
-for x in $QTPATHS; do
-    if test -d $x ; then
-       QTDIR="$x"
-    fi
-done
-
-AC_MSG_CHECKING(QT4.2 directory)
-
-if test $QTDIR = xxx ; then
-   AC_MSG_WARN(Could not locate QT 4.x)
-   adm_qt4_enabled="no"
-fi
-
-AC_MSG_RESULT($QTDIR)
-AC_MSG_CHECKING(QT4.x lib)
-
-AC_ARG_WITH([qt-lib],
-	AC_HELP_STRING([--with-qt-lib=/path/to/Qt-4.x lib],
-		[to specify the path to the Qt-4. lib directory]),
-	[QTEXTRALIB="$withval"],
-	[QTEXTRALIB="$QTDIR/lib"])
-
-AC_MSG_RESULT($QTEXTRALIB)
-
-host=`uname -a` # AC_CANONICAL_HOST is broken at the time of this writing.
-case $host in
-  MINGW32*)
-    AC_MSG_NOTICE(MinGW detected.)
-    QTLIBS="-L$QTEXTRALIB -lopengl32 -lglu32 -lgdi32 -luser32 -lmingw32 -lqtmain -lQtOpenGL4 -lQtGui4 -lQtCore4 -mthreads -Wl,-enable-stdcall-fixup -Wl,-enable-auto-import -Wl,-enable-runtime-pseudo-reloc -Wl,-subsystem,windows"
-    QTINC="-I$QTDIR/include -I$QTDIR/include/QtCore -I$QTDIR/include/QtGui -I$QTDIR/include/QtOpenGL -DUNICODE -DQT_LARGEFILE_SUPPORT -DQT_DLL -DQT_NO_DEBUG -DQT_OPENGL_LIB -DQT_GUI_LIB -DQT_CORE_LIB -DQT_THREAD_SUPPORT -DQT_NEEDS_QMAIN -frtti -fexceptions -I$QTEXTRAINC"
-    QTBIN="$QTDIR/bin"
-	QTPOSTFIX=""
-    ;;
-  *)
-    AC_MSG_NOTICE(I'm assuming this is Linux)
-    AC_PATH_XTRA
-    QTLIBS="-Wl,-rpath,$QTEXTRALIB -L$QTEXTRALIB -lQtGui  -lQtCore $X_LIBS -lX11 -lXext -lXmu -lXt -lXi $X_EXTRA_LIBS  -lpthread"
-    QTINC="-I$QTEXTRAINC -I$QTEXTRAINC/QtGui -I$QTEXTRAINC/QtCore -I$QTEXTRAINC/QtOpenGL $X_CFLAGS -DQT_OPENGL_LIB -DQT_GUI_LIB -DQT_CORE_LIB -DQT_SHARED -I$QTEXTRAINC"
-    QTBIN="$QTDIR/bin"
-    ;;
-esac
-
-AC_MSG_CHECKING(QT4.x include)
-AC_MSG_RESULT($QTINC $QTEXTRAINC)
-
-ADM_QTLIBS="$QTLIBS"
-ADM_QTINCLUDES="$QTINC"
-ADM_QTCFLAGS="$QTINC"
-
-MOC="$QTBIN/moc$QTPOSTFIX"
-UIC="$QTBIN/uic$QTPOSTFIX"
-RCC="$QTBIN/rcc"
-AC_SUBST(MOC)
-AC_SUBST(UIC)
-AC_SUBST(RCC)
-
-# Now we check whether we can actually build a Qt app.
-cat > myqt.h << EOF
-	#include <QObject>
-
-	class Test : public QObject
-	{
-		Q_OBJECT
-		
-		public:
-			Test() {}
-			~Test() {}
-			
-		public slots:
-			void receive() {}
-			
-		signals:
-			void send();
-	};
-EOF
-
-cat > myqt.cpp << EOF
-	#include "myqt.h"
-	#include <QApplication>
-
-	int main( int argc, char **argv )
-	{
-		QApplication app( argc, argv );
-		Test t;
-		QObject::connect( &t, SIGNAL(send()), &t, SLOT(receive()) );
-	}
-EOF
-
-AC_MSG_CHECKING(does moc work?)
-bnv_try_1="$MOC myqt.h -o moc_myqt.cpp"
-AC_TRY_EVAL(bnv_try_1)
-
-if test x"$ac_status" != x0; then
-	AC_MSG_WARN(moc doesn't work)
-	adm_qt4_enabled="no"
-fi
-
-AC_MSG_RESULT(yes)
-AC_MSG_CHECKING(can I compile moc_myqt.cpp?)
-bnv_try_2="$CXX -c $CXXFLAGS $ADM_QTINCLUDES $ADM_QTCFLAGS -o moc_myqt.o moc_myqt.cpp"
-AC_TRY_EVAL(bnv_try_2)
-
-if test x"$ac_status" != x0; then
-	AC_MSG_WARN(couldn't compile moc_myqt.cpp)
-	adm_qt4_enabled="no"
-fi
-
-AC_MSG_RESULT(yes)
-AC_MSG_CHECKING(can I compile myqt.cpp?)
-bnv_try_3="$CXX $QTINC -c $CXXFLAGS $ADM_QTINCLUDES $ADM_QTCFLAGS -o myqt.o myqt.cpp"
-AC_TRY_EVAL(bnv_try_3)
-
-if test x"$ac_status" != x0; then
-	AC_MSG_WARN(couldn't compile myqt.cpp)
-	adm_qt4_enabled="no"
-fi
-
-AC_MSG_RESULT(yes)
-AC_MSG_CHECKING(can I link against QT?)
-nv_try_4="$CXX $LIBS $ADM_QTLIBS -o myqt myqt.o moc_myqt.o"
-AC_TRY_EVAL(bnv_try_4)
-
-if test x"$ac_status" != x0; then
-	AC_MSG_WARN(couldn't link)
-	adm_qt4_enabled="no"
-fi
-
-AC_MSG_RESULT(yes)
-AC_MSG_CHECKING(for mkoctfile)
-AC_TRY_EVAL(mkoctfile)
-
-if test x"$ac_status" != x0; then
-	AC_MSG_WARN(mkoctfile is not in the path)
-	adm_qt4_enabled="no"
-fi
-
-AC_MSG_RESULT(yes)
-rm -f moc_myqt.cpp myqt.h myqt.cpp myqt.o myqt moc_myqt.o
-
-echo " ------------------- End of UI probe ------------------"
-    
-AC_SUBST(ADM_QTLIBS)
-AC_SUBST(ADM_QTINCLUDES)
-AC_SUBST(ADM_QTCFLAGS)
-
-dnl __________ Initialise Variables ___________
-AM_CONDITIONAL(ADM_UI_GTK,  test "x$adm_gtk_enabled" = "xyes" )
-AM_CONDITIONAL(ADM_UI_NONE, test "xnone" = "xnone" )
-AM_CONDITIONAL(ADM_UI_QT4,  test "x$adm_qt4_enabled" = "xyes" )
-
-AC_SUBST(AS)
-AC_SUBST(ASFLAGS)
-AC_SUBST(CCAS)
-AC_SUBST(CCASFLAGS)
-
-AC_DEFINE(USE_FFMPEG,1,[FFmpeg])
-AC_DEFINE(USE_MJPEG,1,[MJPEG])
-AC_DEFINE(CONFIG_DVVIDEO_ENCODER,1,[DV encoder])
-
-have_alsa=yes
-have_little_endian=yes
-have_vorbis=yes
-have_xvid=no
-have_xx_xvid=yes
-have_xvid4=yes
-have_xml2=yes
-have_bsd=no
-have_altivec=no
-have_malloc=no
-have_darwin=no
-have_amd64=no
-have_ppc=no
-have_x264=yes
-have_aften=yes
-have_libamrnb=yes
-
-dnl ____________ Cygwin / MinGW ? _____________
-use_cygwin=no
-AC_MSG_CHECKING(Win32 host)
-
-AC_TRY_COMPILE([
-	#if !defined(__CYGWIN__) && !defined(__MINGW32__)
-		#error
-	#endif
-],
-	int z=0
-,[
-	use_cygwin=yes
-])
-
-AC_MSG_RESULT($use_cygwin)
-AM_CONDITIONAL(HAVE_CYGWIN, test "x$use_cygwin" = "xyes")
-
-if test "x$use_cygwin" = "xyes"; then
-	AC_DEFINE(CYG_MANGLING,1,"Name mangling")
-	AC_DEFINE(ADM_WIN32,1,"Build for windows 32bits")
-	AC_DEFINE(rindex,strrchr,"rindex does not exist on Cygwin")
-	AC_DEFINE(index,strchr,"index does not exist on Cygwin")
-	AC_DEFINE(fseeko,fseeko64,"")
-	AC_DEFINE(ftello,ftello64,"")
-	CXXFLAGS="$CXXFLAGS -mno-cygwin -mms-bitfields"
-	CFLAGS="$CFLAGS -mno-cygwin -mms-bitfields"	
-fi
-
-dnl _______________ gettimeofday ______________
-AC_CHECK_FUNCS(gettimeofday, AC_DEFINE(HAVE_GETTIMEOFDAY,1,"[Use native gettimeofday function]"))
-
-dnl ______________ Multithreading _____________
-dnl required for x264 and mplex
-
-if test "x$use_cygwin" = "xyes"; then
-	LIBS="$LIBS -limagehlp -lpthreadGC2 -Wl,-s"
-else
-	LDFLAGS="$LDFLAGS -lpthread -lX11 -lXext -L/usr/X11R6/lib"
-fi
-
-dnl _______________ Late Binding ______________
-AC_ARG_ENABLE([late-binding],
-	[AC_HELP_STRING([--enable-late-binding], [enable late binding of selected libraries [default=no]])],
-	[use_late_binding=${enableval}], [use_late_binding=no])
-
-if test "x$use_late_binding" = "xyes"; then
-	AC_DEFINE(USE_LATE_BINDING, 1, "[use late binding of selected libraries]")
-fi
-
-dnl _________________ malloc.h ________________
-AC_CHECK_HEADERS(malloc.h,have_malloc_h=yes)
-AC_CHECK_HEADERS(malloc/malloc.h,have_malloc_h=yes)
-
-if test "x$have_malloc_h" = "xyes"; then
-	CPPFLAGS="$CPPFLAGS -I/usr/include/malloc"
-	AC_DEFINE(HAVE_MALLOC_H,1,[Use malloc.h])	
-fi
-
-dnl _________________ Libxml2 _________________
-AC_PATH_PROG(XML_CONFIG, xml2-config, no)
-
-if test "$XML_CONFIG" = "no" ; then
- 	XML_LIBS=""
-	XML_CFLAGS=""
-	
-	if test "x$use_cygwin" = "xno"; then
-		have_xml2=no
-	fi
-fi
-
-if test "x$have_xml2" = "xyes"; then
-	if test "$XML_CONFIG" = "no" ; then
-		XML_LIBS="-L${libdir} -llibxml2 -lz -liconv -lws2_32"
-		XML_CFLAGS="-I${includedir}/libxml2"
- 	else
-		XML_CFLAGS=`$XML_CONFIG  --cflags`
-		XML_LIBS=`$XML_CONFIG  --libs`
-	fi
-
-	old_flags=$CPPFLAGS
-	CPPFLAGS="$CPPFLAGS $XML_CFLAGS"
-
-	AC_CHECK_HEADERS(libxml/parser.h,,have_xml2=no)
-	
-	if test "x$have_xml2" = "xyes"; then
-		AC_DEFINE(USE_LIBXML2,1,[Libxml2 is available])		
-	else
-		AC_MSG_WARN(no valid parser.h header found for Libxml2)
-	fi
-fi
-
-if test "x$have_xml2" = "xno"; then
-	echo "************ LIBXML2 IS MANDATORY ************"
-	echo "***** get it from http://www.xmlsoft.org *****"
-	
-	AC_MSG_ERROR([*** No Libxml2 found ***])
-fi
-
-AC_SUBST(XML_CFLAGS)
-AC_SUBST(XML_LIBS)
-
-dnl __________________ Aften __________________
-AC_ARG_WITH([aften],
-	[AC_HELP_STRING([--without-aften], [force compilation without Aften [default=test]])],
-	[with_aften=${withval}], [with_aften=test])
-
-AC_MSG_CHECKING([if Aften support is requested])
-AC_MSG_RESULT($with_aften)
-
-if test "x$with_aften" = "xno"; then
-	have_aften=no
-fi
-
-if test "x$have_aften" = "xyes"; then
-	AC_MSG_CHECKING([for Aften codec])
-	AC_CHECK_HEADER(aften/aften.h,aften_header=aften/aften.h,have_aften=no)
-	
-	if test "x$have_aften" = "xno"; then
-		have_aften=yes
-		AC_CHECK_HEADER(aften.h,aften_header=aften.h,have_aften=no)		
-	fi
-fi
-
-if test "x$have_aften" = "xyes"; then
-	AC_LANG_PUSH(C++)
-	AC_TRY_RUN([
-		#include "$aften_header"
-
-		int determineVersion(char *version)
-		{
-			if (version == "0.06") { return 6; } else { return 0; }
-		}
-		
-		int determineVersion(double version)
-		{
-			if (version == 0.05) { return 5; } else { return 0; }
-		}
-		
-		int main()
-		{
-			// AFTEN_VERSION is deprecated after v0.06 so if this compiles the version must be <= 0.06
-			return determineVersion(AFTEN_VERSION);
-		}
-	])
-	AC_LANG_POP()
-
-	if test "x$ac_status" = "x5"; then
-		aften_version="0.05"
-		AC_DEFINE(USE_AFTEN_05, 1, [Use Aften 0.05 or earlier])
-		AC_CHECK_LIB(aften,aften_encode_init,,have_aften=no,-lm)
-	elif test "x$ac_status" = "x6"; then
-		aften_version="0.06"
-		AC_DEFINE(USE_AFTEN_06, 1, [Use Aften 0.06])
-		AC_CHECK_LIB(aften,aften_encode_init,,have_aften=no,-lm)
-	else
-		AC_CHECK_LIB(aften,aften_get_version,,have_aften=no,-lm)
-			
-		if test "x$have_aften" = "xno"; then			
-			aften_version="unsupported"
-		else
-			aften_version=">= 0.06"
-		fi
-	fi
-
-	AC_MSG_CHECKING([version of Aften])	
-	AC_MSG_RESULT($aften_version)
-fi
-
-if test "x$have_aften" = "xyes"; then
-	AC_DEFINE(USE_AFTEN,1,[use Aften AC3 encoder])
-fi
-
-dnl ___________________ x264 __________________
-AC_MSG_CHECKING(for x264 codec)
-AC_CHECK_HEADER(x264.h,,have_x264=no)
-
-if test "x$have_x264" = "xyes"; then
-   AC_CHECK_LIB(x264,x264_encoder_open,,have_x264=no,-lm )
-fi
-
-if test "x$have_x264" = "xyes"; then
-	AC_DEFINE(USE_X264,1,[use x264 encoder])
-fi
-
-dnl ________________ libamrnb _________________
-AC_MSG_CHECKING(for libamrnb codec)
-AC_CHECK_HEADER(amrnb/interf_dec.h,,have_libamrnb=no)
-
-if test "x$have_libamrnb" = "xyes"; then
-	if test "x$use_late_binding" = "xno"; then
-		AC_CHECK_LIB(amrnb,GP3Decoder_Interface_Decode,,have_libamrnb=no,-lm)
-	fi
-fi
-
-if test "x$have_libamrnb" = "xyes"; then
-	AC_DEFINE(AMR_NB,1,[AMR_NB])
-	AC_DEFINE(CONFIG_AMR_NB,1,[AMR_NB])
-	AC_DEFINE(USE_AMR_NB,1,[Tell avidemux to use libamrnb])
-else
-	AC_MSG_WARN(libamr not found, you can download it there : ftp://ftp.penguin.cz/pub/users/utx/amr/)
-fi
-
-dnl _________________ Xvid 0.9 ________________
-AC_MSG_CHECKING(for Xvid 0.9 codec)
-AC_CHECK_HEADER(xvid.h,,have_xx_xvid=no)
-
-dnl -- check API version 2.1 and not 2.0 --
-cat >> conftest.$ac_ext <<EOF
-	#include "xvid.h"
-
-	int main()
-	{
-		#if API_VERSION != ((2<<16)+1)
-			#error Xvid API Not 2.1
-		#endif
-		
-		return 1;
-	}
-EOF
-
-ac_compile='${CXX} -c $CXXFLAGS $all_includes $CPPFLAGS conftest.$ac_ext > /dev/null'
- 
-if AC_TRY_EVAL(ac_compile); then
-	have_xx_xvid=yes
-	AC_CHECK_LIB(xvidcore,xvid_encore,,have_xx_xvid=no,-lm)
-else
-	have_xx_xvid=no
-fi
-
-if test "x$have_xx_xvid" = "xyes"; then
-	AC_DEFINE(USE_XX_XVID,1,[use Xvid 0.9 API])
-	have_xvid=yes
-	xvid_version="0.9"
-fi
-
-dnl _________________ Xvid 1.x ________________
-AC_MSG_CHECKING(for Xvid 1.x codec)
-AC_CHECK_HEADER(xvid.h,,have_xvid4=no)
-
-dnl -- check API version 4.0 --
-AC_TRY_COMPILE([
-  	#include "xvid.h"
-  	
-	#if ( XVID_API == ((4<<16)+0)) || ( XVID_API == ((4<<16)+1))
-		#error Xvid Api is 4.0 :)
-	#endif
-],
-	int z=0
-,[
-	have_xvid4=no
-])
-
-AC_CHECK_LIB(xvidcore,xvid_encore,,have_xvid4=no,-lm)
- 
-if test "x$have_xvid4" = "xyes"; then 	
-	AC_CHECK_LIB(xvidcore,xvid_encore,,have_xvid4=no,-lm)
-	
-	if test "x$have_xvid4" = "xyes"; then
-		AC_DEFINE(USE_XVID_4,1,[use Xvid 1.x API])
-		have_xvid=yes
-		xvid_version="1.x"
-	fi
-fi
-
-dnl __________________ libpng _________________
-AC_MSG_CHECKING(for libpng)
-have_png=yes
-AC_CHECK_HEADER(png.h,,have_png=no)
-AC_CHECK_LIB(png,png_malloc,,have_png=no)
- 
-if test "x$have_png" = "xyes"; then
-	AC_DEFINE(USE_PNG,1,[libpng is available])
-fi
-
-dnl _______________ OS dep stuff ______________
-
-dnl ------- lrintf --------
-have_lrintf=no
-AC_MSG_CHECKING(for lrintf in math.h)
-
-AC_TRY_COMPILE([
-	#include <math.h>
-],[
-	int arg = 0;
-	arg=lrintf(0.5);
-],[
-	have_lrintf=yes
-])
-
-if test x$have_lrintf = xyes ; then
-	AC_DEFINE(HAVE_LRINTF,1,[roundup function])
-fi
-
-AC_MSG_RESULT($have_lrintf)
-
-dnl ------ fast int -------
-have_fastint=no
-AC_MSG_CHECKING(for fastint)
-
-AC_TRY_COMPILE([
-	#include <stdio.h>
-	#include <stdint.h>
-],[
-	int arg = 0;
-	int_fast16_t fst=0;
-],[
-	have_fastint=yes
-])
-
-if test x$have_fastint = xno ; then
-	AC_DEFINE(EMULATE_FAST_INT,1,[roundup function])
-fi
-
-AC_MSG_RESULT($have_fastint)
-
-dnl -- iconv needs const? --
-have_consticonv=yes
-AC_MSG_CHECKING(iconv needs const)
-
-AC_TRY_COMPILE([
-	#include <stdio.h>
-	#include <stdlib.h>
-	#include <iconv.h>
-],[
-	char *in,*out;
-	size_t sin, sout, sz;
-	iconv_t _conv;
-	sin=1;
-	sout=4;
- 	sz=iconv(_conv,&in,&sin,&out,&sout);
-],[
-	have_consticonv=no
-])
-
-if test x$have_consticonv = xyes ; then
-	AC_DEFINE(ICONV_NEED_CONST,1,[stricter prototyping])
-fi
-
-AC_MSG_RESULT($have_consticonv)
-
-dnl ___________________ ESD ___________________
-AC_ARG_WITH([esd],
-	[AC_HELP_STRING([--without-esd], [force compilation without ESD [default=test]])],
-	[with_esd=${withval}], [with_esd=test])
-
-AC_MSG_CHECKING([if ESD support is requested])
-AC_MSG_RESULT($with_esd)
-
-have_esd=no
-
-if test "x$with_esd" != "xno"; then
-	AC_MSG_CHECKING(for ESD support)
-	AC_TRY_COMPILE([
-		#include <esd.h>
-	],[
-		int arg = ESD_BITS16;
-	],[
-		have_esd=yes
-	])
-	
-	if test "x$have_esd" = "xyes"; then
-		AC_CHECK_LIB(esd,esd_close,,have_esd=no,-lesd)
-	fi
-	
-	AC_MSG_RESULT($have_esd)
-
-	if test "x$have_esd" = "xyes"; then
-		AC_DEFINE(USE_ESD,1,[ESD detected])
-	fi
-fi
-
-dnl ___________________ OSS ___________________
-AC_ARG_WITH([oss],
-	[AC_HELP_STRING([--without-oss], [force compilation without OSS [default=test]])],
-	[with_oss=${withval}], [with_oss=test])
-
-AC_MSG_CHECKING([if OSS support is requested])
-AC_MSG_RESULT($with_oss)
-
-have_oss=no
-
-if test "x$with_oss" != "xno"; then
-	AC_MSG_CHECKING(for OSS support)
-	AC_TRY_COMPILE([
-		#ifdef __NetBSD__
-			#include <sys/ioccom.h>
-			#include <soundcard.h>
-		#else
-			#include <sys/soundcard.h>
-		#endif
-	],[
-		int arg = SNDCTL_DSP_SETFRAGMENT;
-	],[
-		have_oss=yes
-	])
-	AC_MSG_RESULT($have_oss)
-
-	if test "x$have_oss" = "xyes"; then
-		AC_DEFINE(OSS_SUPPORT,1,[OSS detected])
-	fi
-fi
-
-dnl ___________________ ALSA __________________
-AC_MSG_CHECKING(for ALSA support)
-AC_CHECK_HEADERS(alsa/asoundlib.h,,have_alsa=no)
-
-if test "x$have_alsa" = "xyes"; then
-	have_alsa=no
-
-	dnl -- check version 0.9.x --
-	AC_TRY_COMPILE([
-		#include <alsa/asoundlib.h>
-	],[
-		#if SND_LIB_MAJOR!=0 || SND_LIB_MINOR!=9
-			#error Not ALSA 0.9!
-		#endif
-		
-		int arg = 0;
-	],[
-		have_alsa=yes
-		have_alsa_1=no
-	])
-
-	dnl -- if it fails, try ALSA 1.0 --
-	if test "x$have_alsa" = "xno"; then
-		AC_TRY_COMPILE([
-			#include <alsa/asoundlib.h>
-		],[
-			#if SND_LIB_MAJOR!=1 || SND_LIB_MINOR!=0
-				#error Not ALSA 1.0!
-			#endif
-			
-			int arg = 0;
-		],[
-			have_alsa=yes
-			have_alsa_1=yes
-		])
-	fi
-	
-	AC_CHECK_LIB(asound,snd_pcm_hw_params_set_channels,,have_alsa=no,-lm)
-fi
-
-if test "x$have_alsa" = "xyes"; then				
-	AC_DEFINE(ALSA_SUPPORT,1,"[use ALSA as possible audio device]")
-fi
-
-if test "x$have_alsa_1" = "xyes"; then				
-	AC_DEFINE(ALSA_1_0_SUPPORT,1,"[ALSA is 1.0]")
-fi
-
-dnl ___________________ aRts __________________
-AC_ARG_WITH([arts],
-	[AC_HELP_STRING([--without-arts], [force compilation without aRts [default=test]])],
-	[with_arts=${withval}], [with_arts=test])
-
-AC_MSG_CHECKING([if aRts support is required])
-AC_MSG_RESULT($with_arts)
-
-have_arts=no
-ARTS_CFLAGS=
-ARTS_LIBS=
-
-if test "x$with_arts" != "xno"; then
-	AC_PATH_PROG(ART_CONFIG, artsc-config, no)
-	if test "x$ART_CONFIG" != "xno"; then
-		have_arts=yes
-
-		ARTS_CFLAGS=$($ART_CONFIG --cflags)
-		ARTS_LIBS=$($ART_CONFIG --libs)
-
-		old_cppflags=$CPPFLAGS
-		old_cflags=$CFLAGS
-
-		CPPFLAGS="$CPPFLAGS $ARTS_CFLAGS"
-		CFLAGS="$CFLAGS $ARTS_CFLAGS"
-
-		AC_CHECK_HEADERS([artsc.h], , [have_arts=no])
-
-		CPPFLAGS=$old_cppflags
-		CFLAGS=$old_cflags
-	fi
-
-	if test "x$have_arts" = "xyes"; then
-		AC_DEFINE(USE_ARTS, 1, "[aRts detected]")
-	elif test "x$with_arts" = "xyes"; then
-		AC_MSG_ERROR([aRts support requested but not found])
-	fi
-fi
-
-AC_SUBST(ARTS_CFLAGS)
-AC_SUBST(ARTS_LIBS)
-
-dnl __________________ libdca _________________
-AC_ARG_WITH([libdca],
-	[AC_HELP_STRING([--without-libdca], [force compilation without libdca [default=test]])],
-	[with_libdca=${withval}], [with_libdca=test])
-
-AC_MSG_CHECKING([if libdca support is required])
-AC_MSG_RESULT($with_libdca)
-
-have_libdca=no
-
-if test "x$with_libdca" != "xno"; then
-    have_libdca=yes
-    AC_CHECK_HEADERS([dts.h], , have_libdca=no)
-    
-    if test "x$have_libdca" = "xyes"; then
-    	AC_CHECK_HEADERS([dts_internal.h], , have_libdca=no)
-    	
-    	if test "x$have_libdca" = "xyes"; then
-    		if test "x$use_late_binding" = "xno"; then
-				AC_CHECK_LIB(dts, dts_init, , have_libdca=no)
-			fi
-		else
-    		AC_MSG_WARN(dts.h is there but I also need dts_internal.h to compile libdca/libdts. Please copy dts_internal.h where dts.h is)
-    	fi
-    fi
-    
-    if test "x$have_libdca" = "xyes"; then
-		AC_DEFINE(USE_LIBDCA, 1, "[libdca detected]")
-    elif test "x$with_libdca" = "xyes"; then
-		AC_MSG_ERROR([libdca support requested but not found])
-    fi
-fi
-
-dnl ___________________ MAD ___________________
-AC_DEFINE(USE_MP3,1,[use libmad])
-
-dnl __________________ FAAD2 __________________
-AC_ARG_WITH([faad2],
-	[AC_HELP_STRING([--without-faad2], [force compilation without FAAD2 [default=test]])],
- 	[with_faad2=${withval}], [with_faad2=test])
- 	
-AC_ARG_WITH([newfaad],
- 	AC_HELP_STRING([--with-newfaad], [use Gentoo hacked faad2.h]),
- 	[newfaad=${withval}], [newfaad=no])
- 
-AC_MSG_CHECKING([if FAAD2 support is required])
-AC_MSG_RESULT($with_faad2)
- 
-have_faad=no
- 
-if test "x$with_faad2" != "xno"; then
- 	have_faad=yes
- 	AC_CHECK_HEADERS([faad.h], , have_faad=no)
- 	
- 	if test "x$have_faad" = "xyes"; then
- 		AC_CHECK_LIB( faad, faacDecInit, , have_faad=no )
- 		
- 		if test "x$have_faad" = "xno"; then
-			have_faad=yes
- 			AC_CHECK_LIB( faad, NeAACDecInit, , have_faad=no )
-		fi
-		
- 		if test "x$have_faad" = "xyes"; then
-			AC_DEFINE(USE_FAAD, 1, [FAAD2 detected])
- 		elif test "x$with_faad2" = "xyes"; then
- 			AC_MSG_ERROR([FAAD2 support requested but not found])
- 		fi
- 
- 		if test "x$newfaad" = "xno"; then
- 			AC_DEFINE(OLD_FAAD_PROTO, 1, [use classing FAAD support])
- 		fi
-	fi
- fi
-
-dnl ___________________ FAAC __________________
-AC_ARG_WITH([faac],
-	[AC_HELP_STRING([--without-faac], [force compilation without FAAC [default=test]])],
- 	[have_faac=${withval}], [have_faac=test])
-
-AC_MSG_CHECKING([if FAAC support is required]) 
-AC_MSG_RESULT($have_faac)
- 	
-if test "x$have_faac" != "xno"; then
-	have_faac=yes
-	AC_CHECK_HEADERS(faac.h,,have_faac=no)
-	
-	if test "x$have_faad" = "xyes"; then
-		AC_CHECK_LIB( faac,faacEncClose,,have_faac=no, -lm )
-	fi
-	
-	if test "x$have_faac" = "xyes"; then
-		AC_DEFINE(USE_FAAC,1,"[Use faac audio enccoder]")
-	fi  
-fi
-
-dnl __________________ liba52 _________________
-AC_DEFINE(USE_AC3,1,[use liba52])
-
-dnl __________________ Vorbis _________________
-AC_CHECK_LIB(vorbis,vorbis_info_init,,have_vorbis=no, -lm)
-
-if test "x$have_vorbis" = "xyes"; then
-	AC_CHECK_LIB(vorbisenc,vorbis_encode_init,,have_vorbis=no, -lm)
-	
-	if test "x$have_vorbis" = "xyes"; then
-		AC_CHECK_LIB(vorbis,vorbis_synthesis_restart,,have_vorbis=no, -lm)
-		
-		if test "x$have_vorbis" = "xyes"; then
-			AC_DEFINE(USE_VORBIS,1,[Vorbis detected])
-		fi
-	fi
-fi
-
-dnl ___________________ LAME __________________
-AC_ARG_WITH([lame],
-	[AC_HELP_STRING([--without-lame], [force compilation without LAME [default=test]])],
- 	[with_lame=${withval}], [with_lame=test])
- 
-AC_MSG_CHECKING([if LAME support is required])
-AC_MSG_RESULT($with_lame)
- 
-have_lame=no
- 
-if test "x$with_lame" != "xno"; then
-	have_lame=yes
-	AC_CHECK_HEADERS(lame/lame.h, , have_lame=no)
-	AC_CHECK_LIB(mp3lame, lame_init, , have_lame=no, -lm)
-
-	if test "x$with_lame" = "xyes" && test "x$have_lame" = "xno"; then
-		AC_MSG_ERROR([LAME support requested but not found])
-	fi
-fi
-
-dnl ________________ FreeType 2 _______________
-AC_ARG_WITH([freetype2],
-	[AC_HELP_STRING([--without-freetype2], [force compilation without FreeType 2 [default=test]])],
-	[with_freetype2=${withval}], [with_freetype2=test])
-
-AC_MSG_CHECKING([if FreeType 2 support is required])
-AC_MSG_RESULT($with_freetype2)
-
-have_freetype=no
-
-if test "x$with_freetype2" != "xno"; then
-	PKG_CHECK_MODULES(FREETYPE, freetype2, have_freetype=yes, [
-		if test "x$with_freetype2" = "xyes"; then
-			AC_MSG_ERROR([FreeType 2 support requested but not found])
-		fi
-	])
-
-	if test "x$have_freetype" = "xyes"; then
-		AC_DEFINE(USE_FREETYPE,1,"[FreeType2 detected]")
-	fi
-fi
-
-AM_CONDITIONAL(HAVE_FREETYPE, test "x$have_freetype" = "xyes" )
-AC_SUBST(FREETYPE_CFLAGS)
-AC_SUBST(FREETYPE_LIBS)
-
-dnl ________________ Fontconfig _______________
-AC_ARG_WITH([fontconfig],
-	[AC_HELP_STRING([--without-fontconfig], [force compilation without Fontconfig [default=test]])],
-	[with_fontconfig=${withval}], [with_fontconfig=test])
-
-AC_MSG_CHECKING([if Fontconfig support is required])
-AC_MSG_RESULT($with_fontconfig)
-
-have_fontconfig=no
-
-if test "x$with_fontconfig" != "xno"; then
-	have_fontconfig=yes
-	AC_CHECK_HEADER(fontconfig/fontconfig.h,,have_fontconfig=no)
-	
-	if test "x$have_fontconfig" = "xyes"; then
-		AC_CHECK_LIB(fontconfig,FcStrSetCreate,,have_fontconfig=no,-lm)
-	fi
-	
-	if test "x$have_freetype" = "xyes"; then
-		AC_DEFINE(USE_FONTCONFIG,1,"[FontConfig detected]")
-		AC_DEFINE(HAVE_FONTCONFIG,1,"[FontConfig detected]")
-	fi
-fi
-
-dnl __________________ XVideo _________________
-have_xv=no
-
-if test "x$use_cygwin" = "xyes"; then
-	enable_xv="no";
-else
-	AC_ARG_WITH([xv],
-		[AC_HELP_STRING([--without-xv], [force compilation without XVideo [default=test]])],
-		[enable_xv=${enableval}], [enable_xv=test])
-
-	AC_MSG_CHECKING([if XVideo support is required])
-	AC_MSG_RESULT($enable_xv)	
-
-	if test "x$enable_xv" != "xno"; then
-		have_xv=yes
-
-		AC_CHECK_HEADERS([sys/shm.h X11/extensions/XShm.h X11/extensions/Xvlib.h], , have_xv=no, [
-			#include <stdio.h>
-			#include <X11/Intrinsic.h>
-		])
-			
-		if test "x$have_xv" = "xyes"; then
-			AC_CHECK_LIB(Xv, XvShmPutImage, , have_xv=no, -L/usr/X11R6/lib -L/usr/X11R6/lib64  -lXext -lX11 -lm)
-		fi
-
-		if test "x$have_xv" = "xyes"; then
-			AC_DEFINE(USE_XV,1,[XVideo detected])
-		elif test "x$enable_xv" = "xyes"; then
-			AC_MSG_ERROR([XVideo support requested but not found])
-		fi
-	fi
-fi
-
-dnl ___________________ SDL ___________________
-AC_ARG_WITH([libsdl],
-	[AC_HELP_STRING([--without-libsdl], [force compilation without SDL [default=test]])],
-	[with_sdl=${withval}], [with_sdl=test])
-
-AC_MSG_CHECKING([if SDL support is required])
-AC_MSG_RESULT($with_sdl)
-
-have_sdl=no
-SDL_CFLAGS=
-SDL_LIBS=
-
-if test "x$with_sdl" != "xno"; then
-	AC_PATH_PROG(SDL_CONFIG, sdl-config, "no")
-	
-	if test "$SDL_CONFIG" = "no" ; then
-		SDL_LIBS=""
-		SDL_CFLAGS=""
-		have_sdl=no
-	else
-		SDL_CFLAGS=`$SDL_CONFIG  --cflags`
-		SDL_LIBS=`$SDL_CONFIG  --libs`                  
-		CPPFLAGS="$CPPFLAGS $SDL_CFLAGS"
-		have_sdl=yes
-	fi
-	
-	if test "x$have_sdl" = "xyes" ;  then
-		AC_DEFINE(USE_SDL,1,[SDL detected])
-	fi
-fi
-
-AC_SUBST(SDL_CFLAGS)
-AC_SUBST(SDL_LIBS)
-
-dnl ___________________ CPU ___________________
-echo "Checking CPU/system type"
-echo "CPU type: $host_cpu"
-
-use_mmx=no
-
-case $host_cpu in
-	i386|i486|i586|i686)
-		have_little_endian=yes;		
-		AC_DEFINE(ARCH_X86,1,[post proc])		
-		AC_DEFINE(HAVE_MMX,1,[post proc])       
-		AC_DEFINE(ENABLE_MMX,1,[post proc])       
-		AC_DEFINE(FPM_INTEL,1,[Mad ])       
-		AC_DEFINE(RUNTIME_CPUDETECT,1,"Let FFmpeg decide which is faster")		
-		AC_DEFINE(ARCH_X86_32,1,"X86_32 assembly")
-		AC_DEFINE(HAVE_FAST_UNALIGNED,1,"FFMPEG")
-		use_mmx=yes
-		echo "X86 is ON"
-		;;
-	x86_64|amd64)
-		have_little_endian=yes;		
-		AC_DEFINE(ARCH_X86_64,1,"X86_64 AMD64 assembly")
-		AC_DEFINE(ARCH_64_BITS,1,"X86_64 AMD64 assembly")
-		AC_DEFINE(HAVE_MMX,1,[post proc])
-		AC_DEFINE(ENABLE_MMX,1,[post proc])       
-		AC_DEFINE(FPM_DEFAULT,1,[Mad ])
-		AC_DEFINE(RUNTIME_CPUDETECT,1,"Let FFmpeg decide which is faster")
-		AC_DEFINE(HAVE_FAST_UNALIGNED,1,"FFMPEG")
-		AC_DEFINE(HAVE_FAST_64BIT,1,"FFMPEG")
-		use_mmx=yes
-		have_amd64=yes                
-		echo "AMD64"
-		;;
-	 ia64)
-		have_little_endian=yes;
-		AC_DEFINE(ARCH_64_BITS,1,"X86_64 AMD64 assembly")
-		AC_DEFINE(FPM_DEFAULT,1,[Mad ])
-		AC_DEFINE(RUNTIME_CPUDETECT,1,"Let FFmpeg decide which is faster")
-		AC_DEFINE(ENABLE_MMX,0,[post proc])
-		AC_DEFINE(HAVE_FAST_64BIT,1,"FFMPEG")
-		echo "IA64"
-		;;
-	sparc|sparc64)
-		have_little_endian=no;
-		LMPG_OPT="";
-		AC_DEFINE(ADM_BIG_ENDIAN,1,[Big endian CPU - SPARC or PowerPC])
-		AC_DEFINE(FPM_SPARC,1,[Mad ])
-		AC_DEFINE(WORDS_BIGENDIAN,1,[Big endian CPU - SPARC or PowerPC])
-		AC_DEFINE(ENABLE_MMX,0,[post proc])
-		AC_DEFINE(HAVE_FAST_64BIT,1,"FFMPEG")
-		;;		
-	sun4u)
-		LDFLAGS="$LDFLAGS -lposix4";
-		have_little_endian=no;
-		AC_DEFINE(FPM_SPARC,1,[Mad ])
-		LMPG_OPT="";
-		AC_DEFINE(ADM_SPARC,1,[Sparc workstations])
-		AC_DEFINE(ADM_BIG_ENDIAN,1,[Big endian CPU - SPARC or PowerPC])
-		AC_DEFINE(WORDS_BIGENDIAN,1,[Big endian CPU - SPARC or PowerPC])
-		AC_DEFINE(ENABLE_MMX,0,[post proc])
-		AC_DEFINE(HAVE_FAST_64BIT,1,"FFMPEG")
-		;;
-	ppc)
-		have_little_endian=no;
-		LMPG_OPT="";
-		AC_DEFINE(FPM_PPC,1,[Mad ])       
-		have_ppc=yes				
-		dnl we assume to be on linux-ish system here
-		AC_DEFINE(restrict,__restrict__,[roundup function])
-		AC_DEFINE(ADM_BIG_ENDIAN,1,[Big endian CPU - SPARC or PowerPC])
-		AC_DEFINE(ARCH_POWERPC,1,[Enable PowerPC optim])		
-		AC_ARG_ENABLE(altivec, 
-			AC_HELP_STRING([--enable-altivec], [enable AltiVec acceleration (PowerPC)]),
-			have_altivec=yes)
-		AC_DEFINE(WORDS_BIGENDIAN,1,[Big endian CPU - SPARC or PowerPC])
-		AC_DEFINE(ENABLE_MMX,0,[post proc])       
-		;;
-	*)
-		adm_cpu=`uname -p`;
-		
-		case $adm_cpu in
-			powerpc)
-				echo "Power Macintosh (Darwin ??)"
-				have_darwin=yes
-				have_little_endian=no
-				AC_DEFINE(FPM_PPC,1,[Mad ])       
-				AC_DEFINE(ADM_BSD_FAMILY,1,[BSD OS specific ifdef])
-				LMPG_OPT="";
-				LDFLAGS="$LDFLAGS  \
-					-framework CoreServices \
-					-framework CoreAudio  \
-					-framework AudioUnit"  
-			
-				AC_DEFINE(ADM_BIG_ENDIAN,1,[Big endian CPU - SPARC or PowerPC])
-				AC_DEFINE(CONFIG_DARWIN,0,[Inform FFmpeg we are using Darwin Mac OS X])
-				AC_DEFINE(WORDS_BIGENDIAN,1,[Big endian CPU - SPARC or PowerPC])
-		                AC_DEFINE(ENABLE_MMX,0,[post proc])       
-				AC_ARG_ENABLE(altivec, 
-					AC_HELP_STRING([--enable-altivec], [enable AltiVec acceleration (PowerPC)]),
-					have_altivec=yes)
-				AC_DEFINE(ARCH_POWERPC,1,[Enable PowerPC optim])
-				have_ppc=yes
-				;;
-			*)
-				have_little_endian=no;
-				LMPG_OPT="";
-
-				AC_DEFINE(FPM_DEFAULT,1,[Mad ])       
-				AC_DEFINE(ADM_BIG_ENDIAN,1,[Big endian CPU - SPARC or PowerPC])
-				AC_DEFINE(WORDS_BIGENDIAN,1,[Big endian CPU - SPARC or PowerPC])
-		                AC_DEFINE(ENABLE_MMX,0,[post proc])       
-				;;
-		esac
-esac
-
-ALTIVEC_SWITCH=''
-AC_MSG_CHECKING(for AltiVec)
-AC_MSG_RESULT($have_altivec)
-
-if test "x$have_altivec" = "xyes"; then
-	echo "AltiVec enabled";
-
-	AC_DEFINE(HAVE_ALTIVEC,1,[Enable AltiVec by default])
-	
-	if test "x$have_darwin" = "xno"; then
-		AC_DEFINE(HAVE_ALTIVEC_H,1,[Enable AltiVec by default])
-		ALTIVEC_SWITCH='-mabi=altivec -maltivec'		
-	else
-		dnl we are using Mac OS X, deal with how they do stuff
-		ALTIVEC_SWITCH='-mabi=altivec -maltivec -faltivec -force_cpusubtype_ALL'
-	fi
-	
-	CFLAGS="$CFLAGS $ALTIVEC_SWITCH"
-	CXXFLAGS="$CXXFLAGS $ALTIVEC_SWITCH"
-	AC_DEFINE(ARCH_PPC,1,[AltiVec for libmpeg2])
-	AC_DEFINE(USE_ALTIVEC,1,[AltiVec for mpeg2enc]) 
-	AC_DEFINE(HAVE_ALTIVEC,1,[AltiVec for mpeg2enc]) 
-fi
-
-echo "CPU done"
-
-AC_SUBST(LMPG_OPT)
-AC_SUBST(ALTIVEC_SWITCH)
-
-AM_CONDITIONAL(BUILD_MMX_COMPATIBLE, test "x$use_mmx" = "xyes" || test "x$have_amd64" = "xyes")
-AM_CONDITIONAL(BUILD_DARWIN, test "x$have_darwin" = "xyes")
-AM_CONDITIONAL(BUILD_PPC, test "x$have_ppc" = "xyes")
-AM_CONDITIONAL(BUILD_ALTIVEC, test "x$have_altivec" = "xyes")
-AM_CONDITIONAL(BUILD_A64, test "x$have_amd64" = "xyes")
-
-dnl _________________ Vectors _________________
-dnl for AltiVec mainly and a bit of 386 (fft)
-dnl (except for AMD64 ? bug in Ubuntu ?)
-
-if test "x$have_amd64" = "xno"; then
-	use_builtin=no
-	AC_MSG_CHECKING(Built-in vectors)
-
-	AC_TRY_COMPILE([	
-		#if __GNUC__ > 3 || (__GNUC__ == 3 && __GNUC_MINOR__ >= 2)
-		#else
-			#error no vector built-ins
-		#endif
-		],
-			int z=0
-		,[
-			use_builtin=yes
-		])
-
-	AC_MSG_RESULT(use_builtin)
-	
-	if test "x$use_builtin" = "xyes"; then
-		AC_DEFINE(HAVE_BUILTIN_VECTOR,1,[Enable AltiVec by default])
-	fi
-fi
-
-dnl _________________ BSD OS __________________
-AC_TRY_COMPILE([
-  	#include <stdlib.h>
-
-	#if !defined (__FreeBSD__) && !defined(__NetBSD__) && !defined(__OpenBSD__) && !defined(__APPLE__)
-		#error
-	#endif
-],
-	int z=0
-,[
-  	AC_DEFINE(ADM_BSD_FAMILY,1,[BSD OS specific ifdef])
-	have_bsd=yes;
-	echo "BSD type OS"
-])
-
-dnl ________ Debug, Profiling & Optims ________
-AC_ARG_ENABLE([profile],
-	[AC_HELP_STRING([--enable-profile], [enable profiling [default=no]])],
-	[use_profile=${enableval}], [use_profile=no])
-
-if test "x$use_profile" = "xyes"; then
-	CXXFLAGS="$CXXFLAGS -pg"
-	CFLAGS="$CFLAGS -pg"
-	LDFLAGS="$LDFLAGS -pg"
-fi
-
-AC_ARG_ENABLE([debug],
-	[AC_HELP_STRING([--enable-debug], [enable debug symbols [default=no]])],
-	[use_debug=${enableval}], [use_debug=no])
- 
-if test "x$use_debug" = "xyes"; then
-	AC_DEFINE(ADM_DEBUG,1,[be verbose])
-	CXXFLAGS="$CXXFLAGS -O1 -g3"
-	CFLAGS="$CFLAGS -O1 -g3"
-else
-	dnl -- built-in means gcc3, for gcc 2 we stick to -O2 --
-	if test "x$use_builtin" = "xyes"; then
-		CXXFLAGS="$CXXFLAGS -O3"
-		CFLAGS="$CFLAGS -O3"
-	else
-		CXXFLAGS="$CXXFLAGS -O2"
-		CFLAGS="$CFLAGS -O2"
-	fi
-fi
-
-AC_ARG_WITH([gpt],
-	[AC_HELP_STRING([--with-gpt], [use Google Performance Tools [default=no]])],
-	[use_gpt=${withval}], [use_gpt=no])
- 
-if test "x$use_gpt" = "xyes"; then
-	LDFLAGS="$LDFLAGS -lprofiler -ltcmalloc"	
-fi
-
-CFLAGS="$CFLAGS -falign-loops=16"
-CXXFLAGS="$CXXFLAGS -falign-loops=16"
-CXXFLAGS="$CXXFLAGS -I.. -I../ADM_lavutil -IADM_utilities -I../ADM_utilities  -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -I../.."
-
-dnl ________________ lavcodec _________________
-AC_DEFINE(CONFIG_WMV3_DECODER,1,[FFMPEG])
-AC_DEFINE(CONFIG_VC1_DECODER,1,[FFMPEG])
-AC_DEFINE(CONFIG_RISKY,1,[FFMPEG])
-AC_DEFINE(CONFIG_ENCODERS,1,[FFMPEG])
-AC_DEFINE(CONFIG_DECODERS,1,[FFMPEG])
-AC_DEFINE(CONFIG_QDM2_DECODER,1,[FFMPEG])
-AC_DEFINE(CONFIG_MPEGAUDIO_HP,1,[FFMPEG])
-
-dnl bunch of new stuff
-AC_DEFINE(CONFIG_SNOW_ENCODER,1,[CONFIG_SNOW_ENCODER])
-AC_DEFINE(CONFIG_AC3_ENCODER,1,[CONFIG_AC3_ENCODER])
-AC_DEFINE(CONFIG_MP2_ENCODER,1,[CONFIG_MP2_ENCODER])
-AC_DEFINE(CONFIG_MPEG1VIDEO_ENCODER,1,[CONFIG_MPEG1VIDEO_ENCODER])
-AC_DEFINE(CONFIG_MPEG2VIDEO_ENCODER,1,[CONFIG_MPEG2VIDEO_ENCODER])
-AC_DEFINE(CONFIG_H263_ENCODER,1,[CONFIG_H263_ENCODER])
-AC_DEFINE(CONFIG_H263P_ENCODER,1,[CONFIG_H263P_ENCODER])
-AC_DEFINE(CONFIG_MPEG4_ENCODER,1,[CONFIG_MPEG4_ENCODER])
-AC_DEFINE(CONFIG_MSMPEG4V3_ENCODER,1,[CONFIG_MSMPEG4V3_ENCODER])
-AC_DEFINE(CONFIG_MJPEG_ENCODER,1,[CONFIG_MJPEG_ENCODER])
-AC_DEFINE(CONFIG_HUFFYUV_ENCODER,1,[CONFIG_HUFFYUV_ENCODER])
-AC_DEFINE(CONFIG_FFVHUFF_ENCODER,1,[CONFIG_FFVHUFF_ENCODER])
-AC_DEFINE(CONFIG_FFV1_ENCODER,1,[CONFIG_FFV1_ENCODER])
-
-dnl decoders
-AC_DEFINE(CONFIG_SNOW_DECODER,1,[CONFIG_SNOW_DECODER])
-AC_DEFINE(CONFIG_TSCC_DECODER,1,[CONFIG_MPEG1VIDEO_ENCODER])
-AC_DEFINE(CONFIG_ZLIB,1,[CONFIG_MPEG1VIDEO_ENCODER])
-AC_DEFINE(CONFIG_MPEG1VIDEO_DECODER,1,[CONFIG_MPEG1VIDEO_ENCODER])
-AC_DEFINE(CONFIG_MPEG2VIDEO_DECODER,1,[CONFIG_MPEG2VIDEO_ENCODER])
-AC_DEFINE(CONFIG_H263_DECODER,1,[CONFIG_H263_ENCODER])
-AC_DEFINE(CONFIG_H263P_DECODER,1,[CONFIG_H263P_ENCODER])
-AC_DEFINE(CONFIG_H264_DECODER,1,[CONFIG_H263P_ENCODER])
-AC_DEFINE(CONFIG_MPEG4_DECODER,1,[CONFIG_MPEG4_ENCODER])
-AC_DEFINE(CONFIG_MSMPEG4V3_DECODER,1,[CONFIG_MSMPEG4V3_ENCODER])
-AC_DEFINE(CONFIG_MSMPEG4V2_DECODER,1,[CONFIG_MSMPEG4V3_ENCODER])
-AC_DEFINE(CONFIG_MJPEG_DECODER,1,[CONFIG_MJPEG_ENCODER])
-AC_DEFINE(CONFIG_HUFFYUV_DECODER,1,[CONFIG_HUFFYUV_ENCODER])
-AC_DEFINE(CONFIG_FFVHUFF_DECODER,1,[CONFIG_FFVHUFF_ENCODER])
-AC_DEFINE(CONFIG_FFV1_DECODER,1,[CONFIG_FFV1_ENCODER])
-AC_DEFINE(CONFIG_CYUV_DECODER,1,[CONFIG_FFV1_ENCODER])
-AC_DEFINE(CONFIG_SVQ3_DECODER,1,[CONFIG_FFV1_ENCODER])
-AC_DEFINE(CONFIG_WMAV2_DECODER,1,[CONFIG_FFV1_ENCODER])
-AC_DEFINE(CONFIG_DVVIDEO_DECODER,1,[CONFIG_FFV1_ENCODER])
-AC_DEFINE(CONFIG_WMV2_DECODER,1,[CONFIG_FFV1_ENCODER])
-AC_DEFINE(CONFIG_WMV1_DECODER,1,[CONFIG_FFV1_ENCODER])
-AC_DEFINE(CONFIG_MUXERS,1,[CONFIG_MUXERS])
-AC_DEFINE(CONFIG_TG2_MUXER,1,[CONFIG_MUXERS])
-AC_DEFINE(CONFIG_TGP_MUXER,1,[CONFIG_MUXERS])
-AC_DEFINE(CONFIG_PSP_MUXER,1,[CONFIG_MUXERS])
-AC_DEFINE(CONFIG_MP4_MUXER,1,[CONFIG_MUXERS])
-AC_DEFINE(CONFIG_MOV_MUXER,1,[CONFIG_MUXERS])
-AC_DEFINE(CONFIG_MATROSKA_MUXER,1,[CONFIG_MATROSKA_MUXERS])
-AC_DEFINE(HAVE_THREADS,1,[HAVE_THREADS])
-AC_DEFINE(ENABLE_THREADS,1,[ENABLE_THREADS])
-
-AC_ARG_ENABLE([ssse3],
-	[AC_HELP_STRING([--enable-ssse3], [disable SSSE3 extensions [default=yes]])],
-	[enable_ssse3=${enableval}], [enable_ssse3=yes])
-
-if test "x$enable_ssse3" = "xyes"; then
-	AC_DEFINE(HAVE_SSSE3, 1, [use SSSE3 extensions with libavcodec])
-fi
-
-dnl ________________ libmpeg2 _________________
-AC_DEFINE(ACCEL_DETECT,1,[MPEG2DEC])
-
-dnl _______________ Preferences _______________
-echo "Generating prefs if needed...(srcdir: <$srcdir> pwd:<$PWD>)"
-
-if test $srcdir/admin/prefs_gen.pl -nt $srcdir/avidemux/prefs.in; then
-	touch $srcdir/avidemux/prefs.in
-fi
-
-if test $srcdir/avidemux/prefs.in -nt $srcdir/avidemux/prefs.h -o $srcdir/avidemux/prefs.in -nt $srcdir/avidemux/prefs.cpp; then
-	echo "Regeneration preferences definitions"
-	perl $srcdir/admin/prefs_gen.pl $srcdir/avidemux
-fi
-
-dnl _______________ GCC 2.9x.x ________________
-if { echo '#if __GNUC__ == 2 && __GNUC_MINOR__ >= 95'
-	echo ' yes '
-	echo '#endif'; } | ${CC} -E - | grep yes > /dev/null; then
-		AC_DEFINE(GCC_2_95_X,1,[Using GCC 2.9x.x])
-fi
-
-dnl ##AC_CONFIG_FILES(po/Makefile.in)
-dnl ##AC_CONFIG_FILES(po/Makefile)
-
-dnl --end of file --

Deleted: branches/avidemux_2.5_branch_gruntster/po/.cvsignore
===================================================================
--- branches/avidemux_2.5_branch_gruntster/po/.cvsignore	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/po/.cvsignore	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,4 +0,0 @@
-*.o
-Makefile.in
-Makefile
-*.gmo

Deleted: branches/avidemux_2.5_branch_gruntster/po/Makefile.am
===================================================================
--- branches/avidemux_2.5_branch_gruntster/po/Makefile.am	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/po/Makefile.am	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,3 +0,0 @@
-POFILES= es.po fr.po klingon.po ru.po de.po pt_BR.po ja.po sr.po sr at Latn.po ca.po tr.po it.po
-EXTRA_DIST = es.po fr.po klingon.po ru.po de.po pt_BR.po ja.po sr.po sr at Latn.po ca.po tr.po it.po
-

Deleted: branches/avidemux_2.5_branch_gruntster/subdirs
===================================================================
--- branches/avidemux_2.5_branch_gruntster/subdirs	2008-03-15 16:15:43 UTC (rev 3896)
+++ branches/avidemux_2.5_branch_gruntster/subdirs	2008-03-15 17:16:16 UTC (rev 3897)
@@ -1,3 +0,0 @@
-avidemux
-m4
-po



From gruntster at mail.berlios.de  Sun Mar 16 16:16:11 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Sun, 16 Mar 2008 16:16:11 +0100
Subject: [Avidemux-svn-commit] r3898 - in
	branches/avidemux_2.5_branch_gruntster/avidemux: . ADM_codecs
	ADM_core/src ADM_libraries ADM_libraries/ADM_utilities
	ADM_outputs/oplug_mpeg ADM_userInterfaces/ADM_commonUI
Message-ID: <200803161516.m2GFGB8j030436@sheep.berlios.de>

Author: gruntster
Date: 2008-03-16 16:16:03 +0100 (Sun, 16 Mar 2008)
New Revision: 3898

Removed:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_mpeg.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_mpeg.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libMpeg2Dec/
Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_codecs.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_crashdump.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/prefs.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/prefs.h
   branches/avidemux_2.5_branch_gruntster/avidemux/prefs.in
Log:
[mpeg2dec] remove mpeg2dec

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_codecs.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_codecs.cpp	2008-03-15 17:16:16 UTC (rev 3897)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_codecs.cpp	2008-03-16 15:16:03 UTC (rev 3898)
@@ -62,7 +62,6 @@
 #include "ADM_codecs/ADM_theora_dec.h"
 #endif
 
-#include "ADM_codecs/ADM_mpeg.h"
 #include "ADM_codecs/ADM_png.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_assert.h"
@@ -391,33 +390,13 @@
 
     }
   if (isMpeg12Compatible (fcc))
-    {
-      uint32_t lavcodec_mpeg = 0;
-      printf ("\n using Mpeg1/2 codec (libmpeg2)\n");
-      if (!prefs->get (FEATURE_USE_LAVCODEC_MPEG, &lavcodec_mpeg))
-	{
-	  lavcodec_mpeg = 0;
-	}
-      if (lavcodec_mpeg)
-	{
-	  return (decoders *) (new
-			       decoderFFMpeg12 (w, h, extraLen, extraData));
-	}
-      else
-	{
-	  return (decoders *) (new decoderMpeg (w, h, extraLen, extraData));
-	}
-      //  
-    }
+	  return (decoders *) (new decoderFFMpeg12 (w, h, extraLen, extraData));
 
   // default : null decoder
   printf ("\n using invalid codec for \n");
   fourCC::print (fcc);
 
   return (decoders *) (new decoderEmpty (w, h));
-
-
-
 }
 
 uint8_t coders::compress (ADMImage * in, ADMBitstream * out)

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_mpeg.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_mpeg.cpp	2008-03-15 17:16:16 UTC (rev 3897)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_mpeg.cpp	2008-03-16 15:16:03 UTC (rev 3898)
@@ -1,449 +0,0 @@
-/***************************************************************************
-                          ADM_mpeg.h  -  description
-                             -------------------
-
-	Mpeg1/2 decoder interface tp libmpeg2
-
-	We store the system header etc ... as extra data
-
-    begin                : Sat Sep 28 2002
-    copyright            : (C) 2002 by mean
-    email                : fixounet at free.fr
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#include "config.h"
-
-#include <stdio.h>
-
-#ifdef HAVE_SYS_PARAM_H
-#include <sys/param.h>
-#endif
-
-#if  defined( __FreeBSD__ ) || defined(__APPLE__)
-#include <sys/types.h>
-#endif
-
-#include <stdlib.h>
-#include <string.h>
-
-#include "ADM_default.h"
-#include "avifmt.h"
-#include "avifmt2.h"
-#include "fourcc.h"
-#include "ADM_toolkit/toolkit.hxx"
-#include "ADM_codecs/ADM_codec.h"
-#include "ADM_codecs/ADM_mpeg.h"
-
-#define MPEG2DEC  ((mpeg2dec_t *)_decoder)
-
-extern "C"
-{
-#include "ADM_libraries/ADM_libMpeg2Dec/video_out.h"
-#undef free
-#undef alloc
-#undef realloc
-
-#include "ADM_libraries/ADM_libMpeg2Dec/mpeg2.h"
-#include "ADM_libraries/ADM_libMpeg2Dec/mpeg2_internal.h"
-#include "ADM_assert.h"
-#include "ADM_osSupport/ADM_debugID.h"
-#define MODULE_NAME MODULE_CODEC
-#include "ADM_osSupport/ADM_debug.h"
-
-
-  extern void mpeg2_pop (mpeg2dec_t * m);
-  extern void mpeg2_popI (mpeg2dec_t * m);
-  static vo_instance_t *yv12_open (void);
-  static void yv12_close (vo_instance_t * _instance);
-  static int yv12_setup (vo_instance_t * _instance, unsigned int width,
-			 unsigned int height, unsigned int chroma_w,
-			 unsigned int chroma_h, vo_setup_result_t * result);
-  static void yv12_setup_fbuf (vo_instance_t * _instance, uint8_t ** buf,
-			       void **id);
-  extern int mpeg2_cleanup (mpeg2dec_t * mpeg2dec);
-};
-
-//static uint8_t *zero=NULL;
-
-decoderMpeg *_father = NULL;
-static vo_instance_t *output;
-// avoid exporting our stuff...
-typedef struct yv12_instance_s
-{
-  vo_instance_t vo;
-  decoderMpeg *father;
-  uint32_t w, h;
-  uint8_t *buffer;
-} yv12_instance_t;
-
-decoderMpeg::~decoderMpeg()
-{
-	kill_codec();
-	delete[] unpackBuffer;
-
-	if (_seqHeader)
-	{
-		delete[] _seqHeader;
-		_seqHeader = NULL;
-	}
-}
-//____________________________________
-uint8_t decoderMpeg::isMpeg1 (void)
-{
-  mpeg2_decoder_t *
-    dec;
-  dec = &((MPEG2DEC)->decoder);
-  return (dec->mpeg1);
-}
-//____________________-un init ____________________
-uint8_t decoderMpeg::kill_codec (void)
-{
-  mpeg2_decoder_t *
-    dec;
-  dec = &((MPEG2DEC)->decoder);
-
-  if (dec->quant)
-    {
-      ADM_dealloc (dec->quant);
-      dec->quant = NULL;
-    }
-  mpeg2_close (MPEG2DEC);
-  _decoder = NULL;
-  yv12_close (output);
-  output = NULL;
-
-  return 1;
-}
-//________________________________________________
-void
-decoderMpeg::setParam (void)
-{
-
-
-  return;
-}
-/*
-______________________________________________________________________________________
-		Constructor for mpeg decoder
-______________________________________________________________________________________
-*/
-decoderMpeg::decoderMpeg (uint32_t w, uint32_t h, uint32_t extraLen, uint8_t * extraData) : decoders (w,h)
-{
-	mpeg2_decoder_t *dec;
-	uint32_t wmb, hmb;
-	yv12_instance_t *inst;
-
-	_seqLen = extraLen;
-
-	if (extraLen)
-	{
-		_seqHeader = new uint8_t[extraLen];
-		memcpy (_seqHeader, extraData, extraLen);
-	}
-	else
-		_seqHeader = NULL;
-
-	// store for future use
-	_seqFound = 0;
-	par_width=par_height=1;
-
-	printf ("\nInitializing MPEG2 decoder %lu x %lu\n", _w, _h);
-	output = yv12_open ();
-	inst = (yv12_instance_t *) output;
-	unpackBuffer = new uint8_t[(w * h * 9) >> 1];
-	inst->buffer = unpackBuffer;
-	_decoder = mpeg2_init();
-	dec = &((MPEG2DEC)->decoder);
-
-	wmb = (_w + 15) >> 4;;
-	hmb = (_h + 15) >> 4;;
-
-	dec->quant_stride = wmb;
-	dec->quant = (int8_t *)ADM_alloc ((wmb * hmb) * sizeof (int8_t));
-
-	feedData (extraLen, _seqHeader);
-	feedData (extraLen, _seqHeader);
-
-	// Post processing settings
-	_swapUV = 0;
-	// Post Proc is disabled by default
-
-	printf ("\nDone\n");
-}
-/*------------------------------------------------------------------*/
-uint8_t
-  decoderMpeg::uncompress  (ADMCompressedImage * in, ADMImage * out)
-{
-  
-    out->flags = 0;
-#if defined( REMOVE_PADDING)
-  while (*(in + len - 1) == 0)
-    len--;
-#endif
-  if (!in->dataLength)
-    {
-      if (!dontcopy ())
-	return 1;
-    }
-  if (in->dataLength)
-    feedData (in->dataLength, in->data);
-
-  const mpeg2_info_t *info;
-  uint8_t *t;
-
-  t = (uint8_t *) MPEG2DEC->fbuf[0]->buf[0];
-  mpeg2_cleanup (MPEG2DEC);
-  info = mpeg2_info (MPEG2DEC);
-
-  if (info->sequence) {
-    par_width = info->sequence->pixel_width;
-    par_height = info->sequence->pixel_height;
-  }
-
-  aprintf("Mpeg  %u * %u\n",par_width,par_height);
-  out->_noPicture = 0;		// For mpeg1/2 we ALWAYS have a picture
-  if (out->quant && MPEG2DEC->decoder.quant_stride >= out->_qStride)
-    {
-
-
-      if (dontcopy ())
-	{
-	  out->_qSize = ((_w + 15) >> 4) * ((_h + 15) >> 4);
-	  out->_qStride = (_w + 15) >> 4;
-	  out->quant = (uint8_t *) MPEG2DEC->decoder.quant;
-	}
-      else
-	memcpy (out->quant, MPEG2DEC->decoder.quant, out->_qSize);
-
-    }
-  if (dontcopy ())
-    {
-      uint32_t plane = _w * _h;
-
-      out->_planes[0] = t;
-      out->_planes[1] = t + plane;
-      out->_planes[2] = t + ((plane * 5) >> 2);
-      out->_planeStride[0] = _w;
-      out->_planeStride[1] = _w >> 1;
-      out->_planeStride[2] = _w >> 1;
-    }
-  else
-    {
-      memcpy (out->data, t, (_w * _h * 3) >> 1);
-    }
-
-  switch (MPEG2DEC->decoder.coding_type)
-    {
-    case I_TYPE:
-      out->flags = AVI_KEY_FRAME;
-      break;
-    case B_TYPE:
-      out->flags = AVI_B_FRAME;
-      break;
-    case P_TYPE:
-      out->flags = 0;
-      break;
-    default:
-      printf ("\n unknown frame type ! %d\n", MPEG2DEC->decoder.coding_type);
-      //ADM_assert(0);
-      //return 0;
-      out->flags = 0;
-    }
-  if (MPEG2DEC->ext_state & PIC_FLAG_PROGRESSIVE_FRAME)
-    {
-      aprintf ("Progressive\n");
-    }
-  return 1;
-}
-void
-decoderMpeg::feedData (uint32_t len, uint8_t * data)
-{
-  decode_mpeg2 (data, data + len);
-
-}
-void
-decoderMpeg::setFather (decoderMpeg * f)
-{
-  _father = f;
-}
-
-
-/**
-	decode_mpeg2: Just a copy/paste from mpeg2dec
-
-*/
-void
-decoderMpeg::decode_mpeg2 (uint8_t * current, uint8_t * end)
-{
-  const mpeg2_info_t *info;
-  int state;
-  int loop = 0;
-
-  mpeg2_buffer (MPEG2DEC, current, end);
-
-  info = mpeg2_info (MPEG2DEC);
-  while (1)
-    {
-
-      state = mpeg2_parse (MPEG2DEC);
-      aprintf ("Mpeg2dec : %d \n", state);
-      switch (state)
-	{
-	case STATE_BUFFER:
-	  loop++;
-	  if (loop > 2)
-	    {
-	      aprintf ("Mpeg2dec: Running empty...\n");
-	      return;
-	    }
-	  break;
-	case -1:
-	  printf ("Not ready \n");
-	  return;
-	case STATE_SEQUENCE:
-	  /* might set nb fbuf, convert format, stride */
-	  /* might set fbufs */
-	  printf ("\n Seq found\n");
-
-	  vo_setup_result_t res;
-	  if (!_seqFound)
-	    {
-	      if (output->setup (output,
-				 info->sequence->width,
-				 info->sequence->height,
-				 info->sequence->width >> 1,
-				 info->sequence->height >> 1, &res))
-		{
-		  fprintf (stderr, "display setup failed\n");
-		  exit (1);
-		}
-	      uint8_t *buf[3];
-	      void *id;
-	      //mpeg2_custom_fbuf(MPEG2DEC,1);
-	      output->setup_fbuf (output, buf, (void **) 0);	// 3 buffer ...
-	      mpeg2_set_buf (MPEG2DEC, buf, (void *) 0);
-	      output->setup_fbuf (output, buf, (void **) 1);
-	      mpeg2_set_buf (MPEG2DEC, buf, (void *) 1);
-	      output->setup_fbuf (output, buf, (void **) 2);
-	      mpeg2_set_buf (MPEG2DEC, buf, (void *) 2);
-	      _seqFound = 0;
-	    }
-	  else
-	    printf ("..already initialized...\n");
-
-	  break;
-	case STATE_PICTURE:
-	  /* might skip */
-	  /* might set fbuf */
-
-	  _seen = MPEG2DEC->decoder.coding_type;
-	  //printf("1st %d\n",_seen);
-	  break;
-	case STATE_PICTURE_2ND:
-	  /* should not do anything */
-	  //printf("2nd\n");
-	  break;
-	case STATE_SLICE:
-	case STATE_END:
-	  /* draw current picture */
-	  /* might free frame buffer */
-
-	  break;
-	}
-    }
-}
-
-
-/**
-		yv12_open : set up the callbacks
-*/
-vo_instance_t *
-yv12_open (void)
-{
-  yv12_instance_t *instance;
-
-  instance = new yv12_instance_t;
-  if (instance == NULL)
-    return NULL;
-  memset (instance, 0, sizeof (*instance));
-
-  instance->vo.setup = yv12_setup;
-  instance->vo.setup_fbuf = yv12_setup_fbuf;
-  instance->vo.set_fbuf = NULL;
-  instance->vo.draw = NULL;
-  instance->vo.discard = NULL;
-  instance->vo.close = yv12_close;
-  instance->father = _father;
-
-  printf (" YV12 open called\n");
-
-  return (vo_instance_t *) instance;
-}
-/**
-		yv12_setup : Nothing to do
-*/
-int
-yv12_setup (vo_instance_t * _instance, unsigned int width,
-	    unsigned int height, unsigned int chroma_w, unsigned int chroma_h,
-	    vo_setup_result_t * result)
-{
-  yv12_instance_t *ins;
-
-  ins = (yv12_instance_t *) _instance;
-  ins->w = width;
-  ins->h = height;
-  result->convert = NULL;
-  printf (" YV12 setup called\n");
-  return 0;
-}
-/**
-	yv12_close : nothing to do
-*/
-void
-yv12_close (vo_instance_t * _instance)
-{
-	delete _instance;
-	printf ("yv12close called\n");
-}
-
-/**
-	yv12_setup_fbuf : Allocate some buffers
-*/
-static void
-yv12_setup_fbuf (vo_instance_t * _instance, uint8_t ** buf, void **id)
-{
-  uint8_t *all;
-  uint32_t page, img;
-#ifdef ADM_CPU_64BIT
-  uint64_t i;
-  i = (uint64_t) id;
-
-#else
-  uint32_t i;
-  i = (uint32_t) id;
-#endif
-
-  yv12_instance_t *instance = (yv12_instance_t *) _instance;
-  printf (" **********YV12 setup fbuf called : %lu x %lu (%lu)\n",
-	  instance->w, instance->h, i);
-
-  page = instance->w * instance->h;
-  img = (page * 3) >> 1;
-
-  all = instance->buffer;
-  all += img * i;
-  memset (all, 0, img);
-  buf[0] = all;
-  buf[2] = all + page;;
-  buf[1] = all + page + (page >> 2);;
-  //@*id=NULL;
-
-}

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_mpeg.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_mpeg.h	2008-03-15 17:16:16 UTC (rev 3897)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_mpeg.h	2008-03-16 15:16:03 UTC (rev 3898)
@@ -1,68 +0,0 @@
-/***************************************************************************
-                          ADM_mpeg.h  -  description
-                             -------------------
-
-	Mpeg1/2 decoder based on libmpeg2
-
-    begin                : Sat Sep 28 2002
-    copyright            : (C) 2002 by mean
-    email                : fixounet at free.fr
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-#include "ADM_pp.h"
-class decoderMpeg:public decoders
-{
-protected:
-  uint8_t _seen;
-  uint8_t *_seqHeader;
-  uint32_t _seqLen;
-  uint8_t _seqFound;
-  uint8_t par_height;
-  uint8_t par_width;
-
-  uint8_t init_codec (void);
-  uint8_t kill_codec (void);
-  void *_decoder;
-  void setFather (decoderMpeg * f);
-  void decode_mpeg2 (uint8_t * current, uint8_t * end);
-  void feedData (uint32_t len, uint8_t * data);
-  uint32_t _swapUV;
-  uint8_t *unpackBuffer;
-
-
-
-
-public:
-    decoderMpeg (uint32_t w, uint32_t h,
-		 uint32_t extraLen, uint8_t * extraData);
-    virtual ~ decoderMpeg ();
-  virtual uint8_t uncompress  (ADMCompressedImage * in, ADMImage * out);
-  virtual uint8_t getPARWidth (void)
-  {
-     return par_width;
-  }
-  virtual uint8_t getPARHeight (void)
-  {
-     return par_height;
-  }
-  virtual uint8_t bFramePossible (void)
-  {
-    return 1;
-  }
-  virtual void setParam (void);
-  uint8_t isMpeg1 (void);
-  uint8_t dontcopy (void)
-  {
-    return 1;
-  }
-
-};

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/CMakeLists.txt	2008-03-15 17:16:16 UTC (rev 3897)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/CMakeLists.txt	2008-03-16 15:16:03 UTC (rev 3898)
@@ -1,6 +1,6 @@
 SET(ADM_codecs_SRCS 
 	ADM_codecs.cpp  ADM_ffmpeg.cpp  ADM_mjpegEncode.cpp  ADM_png.cpp    ADM_theora_dec.cpp  ADM_x264.cpp   ADM_xvid.cpp     ADM_xvideco.cpp
-	ADM_ffmp43.cpp  ADM_mjpeg.cpp   ADM_mpeg.cpp         ADM_rgb16.cpp  ADM_uyvy.cpp        ADM_xvid4.cpp  ADM_xvidcvs.cpp)
+	ADM_ffmp43.cpp  ADM_mjpeg.cpp   ADM_rgb16.cpp  ADM_uyvy.cpp        ADM_xvid4.cpp  ADM_xvidcvs.cpp)
 
 ADD_ADM_LIB_ALL_TARGETS(ADM_codecs ${ADM_codecs_SRCS})
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_crashdump.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_crashdump.cpp	2008-03-15 17:16:16 UTC (rev 3897)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_crashdump.cpp	2008-03-16 15:16:03 UTC (rev 3898)
@@ -412,7 +412,7 @@
 
 	if(myFatalFunction)
 		myFatalFunction("Crash", wholeStuff); // FIXME
-#endif __CYGWIN__
+#endif	//__CYGWIN__
 
 	exit(-1); // _exit(1) ???
 }

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/prefs.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/prefs.cpp	2008-03-15 17:16:16 UTC (rev 3897)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/prefs.cpp	2008-03-16 15:16:03 UTC (rev 3898)
@@ -115,7 +115,6 @@
 	{"feature.svcdres.preferedsourceratio",		STRING,"1:1",	NULL, NULL, NULL },
 	{"feature.saveprefsonexit",		UINT,	"1",	NULL,	"0",	"1"	},
 	{"feature.ignoresavedmarkers",		UINT,	"0",	NULL,	"0",	"1"	},
-	{"feature.use_lavcodec_mpeg",		UINT,	"0",	NULL,	"0",	"1"	},
 	{"feature.disable_nuv_resync",		UINT,	"0",	NULL,	"0",	"1"	},
 	{"feature.tryautoidx",		UINT,	"0",	NULL,	"0",	"1"	},
 	{"feature.use_odml",		UINT,	"0",	NULL,	"0",	"1"	},
@@ -141,7 +140,7 @@
 	{"priority.playback",		UINT,	"0",	NULL,	"0",	"4"	}
 };
 
-int num_opts = 81;
+int num_opts = 80;
 // </prefs_gen>
 
 #ifdef USE_LIBXML2

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/CMakeLists.txt	2008-03-15 17:16:16 UTC (rev 3897)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/CMakeLists.txt	2008-03-16 15:16:03 UTC (rev 3898)
@@ -1,5 +1,4 @@
 subdirs (PREORDER ADM_ffmpeg)
-subdirs (PREORDER ADM_libMpeg2Dec)
 subdirs (PREORDER ADM_libmpeg2enc)
 subdirs (PREORDER ADM_libtwolame)
 subdirs (PREORDER ADM_libwrapper)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp	2008-03-15 17:16:16 UTC (rev 3897)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp	2008-03-16 15:16:03 UTC (rev 3898)
@@ -36,7 +36,6 @@
 #include "ADM_libraries/ADM_lvemux/ADM_muxer.h"
 
 // To have access to low level infos 
-#include "ADM_codecs/ADM_mpeg.h"
 #include "ADM_lavcodec.h"
 #include "ADM_codecs/ADM_ffmp43.h"
 #include "ADM_inputs/ADM_mpegdemuxer/dmx_mpegstartcode.h"
@@ -110,48 +109,11 @@
 	}
 	// Check
 	WAVHeader *hdr=audio->getInfo();
-	uint32_t isMpeg1;
-	uint32_t isLav;
-	if(!prefs->get(FEATURE_USE_LAVCODEC_MPEG, &isLav))
-		{
-		 isLav=0;
-		}
 
-	if(!isLav)
-	{
-		decoderMpeg *mpeghdr;
-	
-		mpeghdr=(decoderMpeg *)video_body->rawGetDecoder(0);
-		isMpeg1=mpeghdr->isMpeg1();
-	}
-	else
-	{
-		// How to know if it is mpeg 1?
-		// Assume it is not
-		/*
-		decoderFFMpeg12 *mpeghdr;
-	
-		mpeghdr=(decoderFFMpeg12 *)video_body->rawGetDecoder(0);
-		isMpeg1=mpeghdr->isMpeg1();
-		*/
-		isMpeg1=0;
-	
-	}
-	
 	switch(format)
         {
         case ADM_PS:	
-                if(isMpeg1)
-                {
-                        if(hdr->frequency!=44100 ||  hdr->encoding != WAV_MP2)
-                        {
-                          GUI_Error_HIG(QT_TR_NOOP("Incompatible audio"), QT_TR_NOOP("For VCD, audio must be 44.1 kHz MP2."));
-                                return 0 ;
-                        }
-                        mux=MUXER_VCD;
-                        printf("PassThrough: Using VCD PS\n");        
-                }else
-                {    // Mpeg2 
+                    // Mpeg2 
                         aviInfo info;
                         video_body->getVideoInfo(&info);
                         if(hdr->frequency==44100 && info.width==480&& hdr->encoding == WAV_MP2 ) // SVCD ?
@@ -181,7 +143,6 @@
                                mux=MUXER_DVD;
                                printf("PassThrough: Using DVD PS\n");
                         }
-                }
 
   	        muxer=new mplexMuxer();
                 break;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp	2008-03-15 17:16:16 UTC (rev 3897)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp	2008-03-16 15:16:03 UTC (rev 3898)
@@ -48,7 +48,6 @@
 {
 uint32_t olddevice,newdevice;
 
-uint32_t	lavcodec_mpeg=0;
 uint32_t        use_odml=0;
 uint32_t	autosplit=0;
 uint32_t render;
@@ -151,8 +150,6 @@
         if(!prefs->get(SETTINGS_MPEGSPLIT, &autosplit))
                 autosplit=690;		
                         
-        if(!prefs->get(FEATURE_USE_LAVCODEC_MPEG, &lavcodec_mpeg))
-                lavcodec_mpeg=0;
         // Open DML (Gmv)
         if(!prefs->get(FEATURE_USE_ODML, &use_odml))
           use_odml=0;
@@ -185,7 +182,6 @@
         /************************ Build diaelems ****************************************/
         diaElemToggle useSysTray(&useTray,QT_TR_NOOP("_Use systray while encoding"));
         diaElemToggle allowAnyMpeg(&mpeg_no_limit,QT_TR_NOOP("_Accept non-standard audio frequency for DVD"));
-        diaElemToggle useLavcodec(&lavcodec_mpeg,QT_TR_NOOP("_Use libavcodec MPEG-2 decoder"));
         diaElemToggle openDml(&use_odml,QT_TR_NOOP("Create _OpenDML files"));
         diaElemToggle autoIndex(&useAutoIndex,QT_TR_NOOP("Automatically _index MPEG files"));
         diaElemToggle autoSwap(&useSwap,QT_TR_NOOP("Automatically _swap A and B if A>B"));
@@ -375,8 +371,8 @@
         diaElemTabs tabAuto(QT_TR_NOOP("Automation"),5,diaAuto);
         
         /* Input */
-        diaElem *diaInput[]={&nuvAudio,&useLavcodec};
-        diaElemTabs tabInput(QT_TR_NOOP("Input"),2,(diaElem **)diaInput);
+        diaElem *diaInput[]={&nuvAudio};
+        diaElemTabs tabInput(QT_TR_NOOP("Input"),1,(diaElem **)diaInput);
         
         /* Output */
         diaElem *diaOutput[]={&autoSplit,&openDml,&allowAnyMpeg,&togTagMp3};
@@ -482,8 +478,6 @@
                 prefs->set(FEATURE_MPEG_NO_LIMIT, mpeg_no_limit);
                 // Video render
                 prefs->set(DEVICE_VIDEODEVICE,render);
-                // Mpeg /lavcodec
-                prefs->set(FEATURE_USE_LAVCODEC_MPEG, lavcodec_mpeg);
                 // Odml
                 prefs->set(FEATURE_USE_ODML, use_odml);
 				// Split

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt	2008-03-15 17:16:16 UTC (rev 3897)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt	2008-03-16 15:16:03 UTC (rev 3898)
@@ -235,7 +235,6 @@
 
 ADD_ADMLIB_ALL_TARGETS(
 	ADM_mplex
-	ADM_libMpeg2Dec
 	ADM_libmpeg2enc
 	ADM_libtwolame
 	ADM_libwrapper

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/prefs.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/prefs.h	2008-03-15 17:16:16 UTC (rev 3897)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/prefs.h	2008-03-16 15:16:03 UTC (rev 3898)
@@ -65,7 +65,6 @@
 	FEATURE_SVCDRES_PREFEREDSOURCERATIO,
 	FEATURE_SAVEPREFSONEXIT,
 	FEATURE_IGNORESAVEDMARKERS,
-	FEATURE_USE_LAVCODEC_MPEG,
 	FEATURE_DISABLE_NUV_RESYNC,
 	FEATURE_TRYAUTOIDX,
 	FEATURE_USE_ODML,

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/prefs.in
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/prefs.in	2008-03-15 17:16:16 UTC (rev 3897)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/prefs.in	2008-03-16 15:16:03 UTC (rev 3898)
@@ -74,7 +74,6 @@
 feature.svcdres.preferedsourceratio,	STRING, "1:1"
 feature.saveprefsonexit,		UINT,	1,	0,	1
 feature.ignoresavedmarkers,		UINT,	0,	0,	1
-feature.use_lavcodec_mpeg,		UINT,	0,	0,	1
 feature.disable_nuv_resync,		UINT,	0,	0,	1
 feature.tryautoidx,			UINT,	0,	0,	1
 feature.use_odml,                       UINT,   0,      0,      1



From mean at mail.berlios.de  Sun Mar 16 18:51:58 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 16 Mar 2008 18:51:58 +0100
Subject: [Avidemux-svn-commit] r3899 - in
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg:
	ADM_lavcodec ADM_lavformat ADM_lavutil ADM_libpostproc
	ADM_libswscale
Message-ID: <200803161751.m2GHpwFI015652@sheep.berlios.de>

Author: mean
Date: 2008-03-16 18:51:51 +0100 (Sun, 16 Mar 2008)
New Revision: 3899

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavutil/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libpostproc/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/wrapper.h
Log:
[FFmpegShared] Fix shared build on amd64


Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/CMakeLists.txt	2008-03-16 15:16:03 UTC (rev 3898)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/CMakeLists.txt	2008-03-16 17:51:51 UTC (rev 3899)
@@ -41,11 +41,10 @@
 IF (ADM_DEBUG)
 	ADD_TARGET_CFLAGS(${ADM_LIB} "-O2")
 ENDIF (ADM_DEBUG)
+IF (UNIX)
+	ADD_TARGET_CFLAGS(${ADM_LIB} -fPIC -DPIC)
+ENDIF (UNIX)
 
-IF (USE_AMR_NB)
-	ADD_SOURCE_CFLAGS(amr.c -I${AMRNB_INCLUDE_DIR})
-ENDIF (USE_AMR_NB)
-
 TARGET_LINK_LIBRARIES(${ADM_LIB} ADM_core ADM_libavutil ${ZLIB_LIBRARY})
 
-INSTALL(TARGETS ${ADM_LIB} RUNTIME DESTINATION ${BIN_DIR} LIBRARY DESTINATION lib)
\ No newline at end of file
+INSTALL(TARGETS ${ADM_LIB} RUNTIME DESTINATION ${BIN_DIR} LIBRARY DESTINATION lib)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/CMakeLists.txt	2008-03-16 15:16:03 UTC (rev 3898)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/CMakeLists.txt	2008-03-16 17:51:51 UTC (rev 3899)
@@ -8,6 +8,10 @@
 ADD_LIBRARY(${ADM_LIB} SHARED ${${ADM_LIB}_SRCS})
 ADD_TARGET_CFLAGS(${ADM_LIB} "-I../ADM_lavcodec -I../ADM_lavutil -DHAVE_AV_CONFIG_H")
 
+IF (UNIX)
+	ADD_TARGET_CFLAGS(${ADM_LIB} -fPIC)
+ENDIF (UNIX)
+
 TARGET_LINK_LIBRARIES(${ADM_LIB} ADM_core ADM_libavutil ADM_libavcodec)
 
-INSTALL(TARGETS ${ADM_LIB} RUNTIME DESTINATION ${BIN_DIR} LIBRARY DESTINATION lib)
\ No newline at end of file
+INSTALL(TARGETS ${ADM_LIB} RUNTIME DESTINATION ${BIN_DIR} LIBRARY DESTINATION lib)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavutil/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavutil/CMakeLists.txt	2008-03-16 15:16:03 UTC (rev 3898)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavutil/CMakeLists.txt	2008-03-16 17:51:51 UTC (rev 3899)
@@ -7,4 +7,9 @@
 ADD_LIBRARY(${ADM_LIB} SHARED ${${ADM_LIB}_SRCS})
 ADD_TARGET_CFLAGS(${ADM_LIB} "-DHAVE_AV_CONFIG_H")
 
-INSTALL(TARGETS ${ADM_LIB} RUNTIME DESTINATION ${BIN_DIR} LIBRARY DESTINATION lib)
\ No newline at end of file
+IF (UNIX)
+	ADD_TARGET_CFLAGS(${ADM_LIB} -fPIC)
+ENDIF (UNIX)
+
+
+INSTALL(TARGETS ${ADM_LIB} RUNTIME DESTINATION ${BIN_DIR} LIBRARY DESTINATION lib)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libpostproc/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libpostproc/CMakeLists.txt	2008-03-16 15:16:03 UTC (rev 3898)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libpostproc/CMakeLists.txt	2008-03-16 17:51:51 UTC (rev 3899)
@@ -8,7 +8,11 @@
 IF(ADM_CPU_X86_64)
 	ADD_TARGET_CFLAGS(${ADM_LIB} "-msse")
 ENDIF(ADM_CPU_X86_64)
+IF (UNIX)
+	ADD_TARGET_CFLAGS(${ADM_LIB} -fPIC -DPIC)
+ENDIF (UNIX)
 
+
 TARGET_LINK_LIBRARIES(${ADM_LIB} ADM_core ADM_libavutil)
 
-INSTALL(TARGETS ${ADM_LIB} RUNTIME DESTINATION ${BIN_DIR} LIBRARY DESTINATION lib)
\ No newline at end of file
+INSTALL(TARGETS ${ADM_LIB} RUNTIME DESTINATION ${BIN_DIR} LIBRARY DESTINATION lib)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/CMakeLists.txt	2008-03-16 15:16:03 UTC (rev 3898)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/CMakeLists.txt	2008-03-16 17:51:51 UTC (rev 3899)
@@ -17,5 +17,8 @@
 ENDIF (APPLE)
 
 TARGET_LINK_LIBRARIES(${ADM_LIB} ADM_core ADM_libavutil)
+IF (UNIX)
+	ADD_TARGET_CFLAGS(${ADM_LIB} -fPIC -DPIC)
+ENDIF (UNIX)
 
 INSTALL(TARGETS ${ADM_LIB} RUNTIME DESTINATION ${BIN_DIR} LIBRARY DESTINATION lib)
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale.c	2008-03-16 15:16:03 UTC (rev 3898)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale.c	2008-03-16 17:51:51 UTC (rev 3899)
@@ -84,6 +84,10 @@
 
 
 #include "../ADM_lavcodec/opt.h" //MEANX
+//**** Does not build as shared on amd64... MEANX
+#ifdef ARCH_X86_64
+#undef RUNTIME_CPUDETECT
+#endif
 
 #undef MOVNTQ
 #undef PAVGB

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/wrapper.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/wrapper.h	2008-03-16 15:16:03 UTC (rev 3898)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/wrapper.h	2008-03-16 17:51:51 UTC (rev 3899)
@@ -3,7 +3,7 @@
 	Replacement for assert
 */
 #include "ADM_default.h"
-
+#undef memcpy
 //******************
 #undef malloc
 #undef realloc



From mean at mail.berlios.de  Sun Mar 16 18:53:06 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 16 Mar 2008 18:53:06 +0100
Subject: [Avidemux-svn-commit] r3900 - in
	branches/avidemux_2.5_branch_gruntster:
	avidemux/ADM_libraries/ADM_libwrapper
	avidemux/plugins/ADM_audiodecoder
	avidemux/plugins/ADM_audiodecoder/ADM_ad_dca cmake
Message-ID: <200803161753.m2GHr68e016748@sheep.berlios.de>

Author: mean
Date: 2008-03-16 18:53:05 +0100 (Sun, 16 Mar 2008)
New Revision: 3900

Added:
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_dca/
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_dca/ADM_dca.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_dca/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/cmake/admCheckDca.cmake
Removed:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libwrapper/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libwrapper/libwrapper.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libwrapper/libwrapper_amrnb.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libwrapper/libwrapper_amrnb.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libwrapper/libwrapper_dca.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libwrapper/libwrapper_dca.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libwrapper/libwrapper_global.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libwrapper/libwrapper_global.h
Log:
[AudioDecoder] Make faad/dca works, dts untested


Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libwrapper/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libwrapper/CMakeLists.txt	2008-03-16 17:51:51 UTC (rev 3899)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libwrapper/CMakeLists.txt	2008-03-16 17:53:05 UTC (rev 3900)
@@ -1,16 +0,0 @@
-SET(ADM_LIB ADM_libwrapper)
-
-SET(${ADM_LIB}_SRCS
-	libwrapper_amrnb.cpp  libwrapper_dca.cpp  libwrapper_global.cpp)
-
-ADD_ADM_LIB_ALL_TARGETS(${ADM_LIB} ${${ADM_LIB}_SRCS})
-
-IF (USE_AMR_NB)
-	ADD_SOURCE_CFLAGS(libwrapper_amrnb.cpp -I${AMRNB_INCLUDE_DIR})
-	ADD_SOURCE_CFLAGS(libwrapper_global.cpp -I${AMRNB_INCLUDE_DIR})
-ENDIF (USE_AMR_NB)
-
-IF (USE_LIBDCA)
-	ADD_SOURCE_CFLAGS(libwrapper_dca.cpp -I${LIBDCA_INCLUDE_DIR})
-	ADD_SOURCE_CFLAGS(libwrapper_global.cpp -I${LIBDCA_INCLUDE_DIR})
-ENDIF (USE_LIBDCA)

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libwrapper/libwrapper.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libwrapper/libwrapper.h	2008-03-16 17:51:51 UTC (rev 3899)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libwrapper/libwrapper.h	2008-03-16 17:53:05 UTC (rev 3900)
@@ -1 +0,0 @@
-#include "ADM_dynamicLoading.h"

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libwrapper/libwrapper_amrnb.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libwrapper/libwrapper_amrnb.cpp	2008-03-16 17:51:51 UTC (rev 3899)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libwrapper/libwrapper_amrnb.cpp	2008-03-16 17:53:05 UTC (rev 3900)
@@ -1,85 +0,0 @@
-#include "config.h"
-
-#ifdef USE_AMR_NB
-#include <stdio.h>
-#include "ADM_default.h"
-#include "libwrapper_amrnb.h"
-
-ADM_LibWrapperAmrnb::ADM_LibWrapperAmrnb() : ADM_LibWrapper()
-{
-#ifdef USE_LATE_BINDING
-#ifdef __WIN32
-	char* libname = "libamrnb-2.dll";
-#else
-	char* libname = "libamrnb-2.so";	// ???
-#endif
-
-	initialised = (loadLibrary(libname) && getSymbols(6, 
-		&func_Decoder_Interface_init, "Decoder_Interface_init", 
-		&func_Decoder_Interface_exit, "Decoder_Interface_exit",
-		&func_Encoder_Interface_exit, "Encoder_Interface_exit",
-		&func_GP3Decoder_Interface_Decode, "GP3Decoder_Interface_Decode",
-		&func_GP3VADxEncoder_Interface_Encode, "GP3VADxEncoder_Interface_Encode",
-		&func_VADxEncoder_Interface_init, "VADxEncoder_Interface_init"));
-#else
-	initialised = true;
-#endif	
-}
-
-ADM_LibWrapperAmrnb::~ADM_LibWrapperAmrnb() {}
-
-extern "C" void* Decoder_Interface_init_(ADM_LibWrapperAmrnb* amrnb)
-{
-#ifdef USE_LATE_BINDING
-	return amrnb->func_Decoder_Interface_init();
-#else
-	return Decoder_Interface_init();
-#endif
-}
-
-extern "C" void Decoder_Interface_Decode_(ADM_LibWrapperAmrnb* amrnb, void *st, unsigned char *bits, short *synth, int bfi)
-{
-#ifdef USE_LATE_BINDING
-	amrnb->func_GP3Decoder_Interface_Decode(st, bits, synth, bfi);
-#else
-	Decoder_Interface_Decode(st, bits, synth, bfi);
-#endif
-}
-
-extern "C" void Decoder_Interface_exit_(ADM_LibWrapperAmrnb* amrnb, void* state)
-{
-#ifdef USE_LATE_BINDING
-	amrnb->func_Decoder_Interface_exit(state);
-#else
-	Decoder_Interface_exit(state);
-#endif
-}
-
-extern "C" int Encoder_Interface_Encode_(ADM_LibWrapperAmrnb* amrnb, void *st, enum Mode mode, short *speech, unsigned char *serial, int forceSpeech)
-{
-#ifdef USE_LATE_BINDING
-	return amrnb->func_GP3VADxEncoder_Interface_Encode(st, mode, speech, serial, forceSpeech, 0);
-#else
-	return Encoder_Interface_Encode(st, mode, speech, serial, forceSpeech);
-#endif
-}
-
-extern "C" void Encoder_Interface_exit_(ADM_LibWrapperAmrnb* amrnb, void* state)
-{
-#ifdef USE_LATE_BINDING
-	amrnb->func_Encoder_Interface_exit(state);
-#else
-	Encoder_Interface_exit(state);
-#endif
-}
-
-extern "C" void* Encoder_Interface_init_(ADM_LibWrapperAmrnb* amrnb, int dtx)
-{
-#ifdef USE_LATE_BINDING
-	return amrnb->func_VADxEncoder_Interface_init(dtx, 0);
-#else
-	return Encoder_Interface_init(dtx);
-#endif
-}
-
-#endif

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libwrapper/libwrapper_amrnb.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libwrapper/libwrapper_amrnb.h	2008-03-16 17:51:51 UTC (rev 3899)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libwrapper/libwrapper_amrnb.h	2008-03-16 17:53:05 UTC (rev 3900)
@@ -1,47 +0,0 @@
-#ifndef LIBWRAPPER_AMRNB
-#define LIBWRAPPER_AMRNB
-
-#ifdef USE_AMR_NB
-#ifdef __cplusplus
-#include "libwrapper.h"
-
-extern "C"
-{
-#endif	// __cpluscplus
-
-#include "amrnb/interf_dec.h"
-#include "amrnb/interf_enc.h"
-
-#ifdef __cplusplus
-}
-#endif	// __cpluscplus
-
-#ifdef __cplusplus
-class ADM_LibWrapperAmrnb : public ADM_LibWrapper
-{
-	public:
-	#ifdef USE_LATE_BINDING
-		void (*func_Decoder_Interface_exit)(void *state);
-		void* (*func_Decoder_Interface_init)(void);		
-		void (*func_Encoder_Interface_exit)(void *state);
-		void (*func_GP3Decoder_Interface_Decode)(void *st, unsigned char *bits, short *synth, int bfi);
-		int (*func_GP3VADxEncoder_Interface_Encode)(void *st, enum Mode mode, short *speech, unsigned char *serial, int forceSpeech, char vad2_code);
-		void* (*func_VADxEncoder_Interface_init)(int dtx, char vad2_code);
-	#endif
-	
-		ADM_LibWrapperAmrnb();
-		virtual	~ADM_LibWrapperAmrnb();
-};
-#else
-struct ADM_LibWrapperAmrnb;
-
-void Decoder_Interface_Decode_(struct ADM_LibWrapperAmrnb* amrnb, void *st, unsigned char *bits, short *synth, int bfi);
-void Decoder_Interface_exit_(struct ADM_LibWrapperAmrnb* amrnb, void *state);
-void* Decoder_Interface_init_(struct ADM_LibWrapperAmrnb* amrnb);
-int Encoder_Interface_Encode_(struct ADM_LibWrapperAmrnb* amrnb, void *st, enum Mode mode, short *speech, unsigned char *serial, int forceSpeech);
-void Encoder_Interface_exit_(struct ADM_LibWrapperAmrnb* amrnb, void *state);
-void* Encoder_Interface_init_(struct ADM_LibWrapperAmrnb* amrnb, int dtx);
-#endif	// __cpluscplus
-
-#endif	// USE_AMR_NB
-#endif	// LIBWRAPPER_AMRNB

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libwrapper/libwrapper_dca.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libwrapper/libwrapper_dca.cpp	2008-03-16 17:51:51 UTC (rev 3899)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libwrapper/libwrapper_dca.cpp	2008-03-16 17:53:05 UTC (rev 3900)
@@ -1,114 +0,0 @@
-#include "config.h"
-
-#ifdef USE_LIBDCA
-#include <stdio.h>
-#include "ADM_default.h"
-#include "libwrapper_dca.h"
-
-ADM_LibWrapperDca::ADM_LibWrapperDca() : ADM_LibWrapper()
-{
-#ifdef USE_LATE_BINDING
-#ifdef __WIN32
-#ifdef USE_LIBDCA_002
-	const char* libname = "libdts.dll";
-#else
-	const char* libname = "libdca-0.dll";
-#endif	// USE_LIBDCA_002
-#else
-#ifdef USE_LIBDCA_002
-	const char* libname = "libdts.so";	// ???
-#else
-	const char* libname = "libdca-0.so";	// ???
-#endif	// USE_LIBDCA_002
-#endif	// __WIN32
-
-#ifdef USE_LIBDCA_002
-	initialised = (loadLibrary(libname) && getSymbols(7, 
-		&func_dts_block, "dts_block", 
-		&func_dts_blocks_num, "dts_blocks_num", 
-		&func_dts_frame, "dts_frame", 
-		&func_dts_free, "dts_free", 
-		&func_dts_init, "dts_init",
-		&func_dts_samples, "dts_samples", 
-		&func_dts_syncinfo, "dts_syncinfo"));
-#else
-	initialised = (loadLibrary(libname) && getSymbols(7, 
-		&func_dts_block, "dca_block", 
-		&func_dts_blocks_num, "dca_blocks_num", 
-		&func_dts_frame, "dca_frame", 
-		&func_dts_free, "dca_free", 
-		&func_dts_init, "dca_init",
-		&func_dts_samples, "dca_samples", 
-		&func_dts_syncinfo, "dca_syncinfo"));
-#endif	// USE_LIBDCA_002
-#else
-	initialised = true;
-#endif	// USE_LATE_BINDING
-}
-
-ADM_LibWrapperDca::~ADM_LibWrapperDca() {}
-
-int ADM_LibWrapperDca::dts_block_ (dts_state_t* state)
-{
-#ifdef USE_LATE_BINDING
-	return func_dts_block(state);
-#else
-	return dts_block(state);
-#endif
-}
-
-int ADM_LibWrapperDca::dts_blocks_num_ (dts_state_t* state)
-{
-#ifdef USE_LATE_BINDING
-	return func_dts_blocks_num(state);
-#else
-	return dts_blocks_num(state);
-#endif
-}
-
-int ADM_LibWrapperDca::dts_frame_ (dts_state_t* state, uint8_t* buf, int* flags, level_t* level, sample_t bias)
-{
-#ifdef USE_LATE_BINDING
-	return func_dts_frame(state, buf, flags, level, bias);
-#else
-	return dts_frame(state, buf, flags, level, bias);
-#endif
-}
-
-void ADM_LibWrapperDca::dts_free_ (dts_state_t* state)
-{
-#ifdef USE_LATE_BINDING
-	return func_dts_free(state);
-#else
-	return dts_free(state);
-#endif
-}
-
-dts_state_t* ADM_LibWrapperDca::dts_init_ (uint32_t mm_accel)
-{
-#ifdef USE_LATE_BINDING
-	return func_dts_init(mm_accel);
-#else
-	return dts_init(mm_accel);
-#endif
-}
-
-sample_t* ADM_LibWrapperDca::dts_samples_ (dts_state_t* state)
-{
-#ifdef USE_LATE_BINDING
-	return func_dts_samples(state);
-#else
-	return dts_samples(state);
-#endif
-}
-
-int ADM_LibWrapperDca::dts_syncinfo_ (dts_state_t* state, uint8_t* buf, int* flags, int* sample_rate, int* bit_rate, int* frame_length)
-{
-#ifdef USE_LATE_BINDING
-	return func_dts_syncinfo(state, buf, flags, sample_rate, bit_rate, frame_length);
-#else
-	return dts_syncinfo(state, buf, flags, sample_rate, bit_rate, frame_length);
-#endif
-}
-
-#endif

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libwrapper/libwrapper_dca.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libwrapper/libwrapper_dca.h	2008-03-16 17:51:51 UTC (rev 3899)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libwrapper/libwrapper_dca.h	2008-03-16 17:53:05 UTC (rev 3900)
@@ -1,38 +0,0 @@
-#ifndef LIBWRAPPER_DCA
-#define LIBWRAPPER_DCA
-
-#ifdef USE_LIBDCA
-#include "libwrapper.h"
-
-extern "C"
-{
-#include "dts.h"
-//#include "dts_internal.h"
-}
-
-class ADM_LibWrapperDca : public ADM_LibWrapper
-{
-	protected:
-	#ifdef USE_LATE_BINDING
-		int (*func_dts_block)(dts_state_t* state);
-		int (*func_dts_blocks_num) (dts_state_t* state);
-		int (*func_dts_frame) (dts_state_t* state, uint8_t* buf, int* flags, level_t* level, sample_t bias);
-		void (*func_dts_free) (dts_state_t* state);
-		dts_state_t* (*func_dts_init) (uint32_t mm_accel);
-		sample_t* (*func_dts_samples) (dts_state_t* state);
-		int (*func_dts_syncinfo) (dts_state_t* state, uint8_t* buf, int* flags, int* sample_rate, int* bit_rate, int* frame_length);
-	#endif
-
-	public:
-		ADM_LibWrapperDca();
-		virtual	~ADM_LibWrapperDca();
-		int dts_block_ (dts_state_t* state);
-		int dts_blocks_num_ (dts_state_t* state);
-		int dts_frame_ (dts_state_t* state, uint8_t* buf, int* flags, level_t* level, sample_t bias);
-		void dts_free_ (dts_state_t* state);
-		dts_state_t* dts_init_ (uint32_t mm_accel);
-		sample_t* dts_samples_ (dts_state_t* state);
-		int dts_syncinfo_ (dts_state_t* state, uint8_t* buf, int* flags, int* sample_rate, int* bit_rate, int* frame_length);
-};
-#endif
-#endif

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libwrapper/libwrapper_global.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libwrapper/libwrapper_global.cpp	2008-03-16 17:51:51 UTC (rev 3899)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libwrapper/libwrapper_global.cpp	2008-03-16 17:53:05 UTC (rev 3900)
@@ -1,31 +0,0 @@
-#include <stdio.h>
-#include "ADM_default.h"
-#include "libwrapper_global.h"
-
-void initLibWrappers()
-{
-#ifdef USE_AMR_NB
-	amrnb = new ADM_LibWrapperAmrnb();
-#endif
-#ifdef USE_LIBDCA
-	dca = new ADM_LibWrapperDca();
-#endif
-}
-
-void destroyLibWrappers()
-{
-#ifdef USE_AMR_NB
-	delete amrnb;
-#endif
-#ifdef USE_LIBDCA
-	delete dca;
-#endif
-}
-
-#ifdef USE_AMR_NB
-extern "C" ADM_LibWrapperAmrnb* getAmrnbWrapper(void)
-{ 
-	return amrnb;
-}
-#endif
-//EOF

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libwrapper/libwrapper_global.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libwrapper/libwrapper_global.h	2008-03-16 17:51:51 UTC (rev 3899)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libwrapper/libwrapper_global.h	2008-03-16 17:53:05 UTC (rev 3900)
@@ -1,37 +0,0 @@
-#ifndef LIBWRAPPER_GLOBAL
-#define LIBWRAPPER_GLOBAL
-
-#include "config.h"
-//
-#if defined(__DECLARE__)
-#define ZZ_PREFIX
-#define ZZ_POSTFIX =NULL
-#else
-#define ZZ_PREFIX extern
-#define ZZ_POSTFIX 
-#endif //__DECLARE__
-
-// AMRNB
-#ifdef USE_AMR_NB
-#define _TYPEDEF_H
-
-#include "libwrapper_amrnb.h"
-
-#if defined(__cplusplus)
-ZZ_PREFIX ADM_LibWrapperAmrnb  *amrnb ZZ_POSTFIX;
-#else
-struct ADM_LibWrapperAmrnb* getAmrnbWrapper(void);
-#endif	// __cplusplus
-#endif	// USE_AMR_NB
-
-// LIBDCA
-#if defined(USE_LIBDCA) && defined(__cplusplus)
-#include "libwrapper_dca.h"
-
-ZZ_PREFIX ADM_LibWrapperDca* dca ZZ_POSTFIX;
-#endif // USE LIBDCA
-
-// funcs
-void initLibWrappers();
-void destroyLibWrappers();
-#endif // LIBWRAPPER

Added: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_dca/ADM_dca.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_dca/ADM_dca.cpp	2008-03-16 17:51:51 UTC (rev 3899)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_dca/ADM_dca.cpp	2008-03-16 17:53:05 UTC (rev 3900)
@@ -0,0 +1,197 @@
+/***************************************************************************
+                          ADM_codecac3.cpp  -  description
+                             -------------------
+    begin                : Fri May 31 2002
+    copyright            : (C) 2002 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include <math.h>
+
+#include "config.h"
+#include "ADM_default.h"
+
+#include "ADM_audio/aviaudio.hxx"
+#include "ADM_audiocodec/ADM_audiocodec.h"
+
+#include "prefs.h"
+
+#ifdef USE_LIBDCA
+#include "ADM_audio/ADM_dcainfo.h"
+#include "ADM_libraries/ADM_libwrapper/libwrapper_global.h"
+
+#define DTS_HANDLE ((dts_state_t *)dts_handle)
+
+ADM_AudiocodecDCA::ADM_AudiocodecDCA( uint32_t fourcc, WAVHeader *info) :   ADM_Audiocodec(fourcc)
+{
+    int flags=0;
+    ADM_assert(fourcc==WAV_DTS);
+    dts_handle=NULL;
+    
+#ifdef ADM_CPU_X86
+#define CHK(x,y) if(CpuCaps::has##x()) flags|=MM_ACCEL_X86_##y;
+    CHK(MMX,MMX);
+    CHK(3DNOW,3DNOW);
+    CHK(MMXEXT,MMXEXT);
+#endif
+    
+    dts_handle=(void *)dca->dts_init_(flags);
+    if(!dts_handle)
+    {
+        printf("Cannot init libdca\n");
+        ADM_assert(0);   
+    }
+	_wavHeader = info;
+}
+
+ADM_AudiocodecDCA::~ADM_AudiocodecDCA( )
+{
+    if(dts_handle)
+    {
+        dca->dts_free_(DTS_HANDLE);
+        dts_handle=NULL;
+    }
+}
+
+uint8_t ADM_AudiocodecDCA::beginDecompress( void )
+{
+    return 1;
+}
+
+uint8_t ADM_AudiocodecDCA::endDecompress( void )
+{
+    return 1;
+}
+
+uint8_t ADM_AudiocodecDCA::run(uint8_t *inptr, uint32_t nbIn, float *outptr, uint32_t *nbOut)
+{
+    uint32_t avail;
+    uint32_t length,syncoff;
+    int flags = 0, samprate = 0, bitrate = 0, frame_length;
+    uint8_t chan = _wavHeader->channels;
+    *nbOut=0;
+
+
+    //  Ready to decode
+    while(nbIn)
+    {
+        if(nbIn<DTS_HEADER_SIZE)
+        {
+            if(nbIn)
+                printf("[DTS]: no data to decode avail %u\n",nbIn);
+            break;
+        }
+        //length = ADM_DCAGetInfo(ptr,nbIn, &samprate, &bitrate, &chan,&syncoff,&flags);
+        length = dca->dts_syncinfo_ (DTS_HANDLE,  inptr, &flags, &samprate,&bitrate, &frame_length);
+
+        if(!length)
+        {
+            printf("[DTS] dts_syncinfo failed\n");
+            ADM_assert(0); 
+        }
+        if(length>nbIn)
+        {
+            // not enough data
+            break;
+        }
+
+	if (ch_route.mode < 1) {
+		CHANNEL_TYPE *p_ch_type = ch_route.input_type;
+		switch (flags & DTS_CHANNEL_MASK) {
+			case DTS_MONO:
+				*(p_ch_type++) = CH_MONO;
+			break;
+			case DTS_STEREO:
+			case DTS_DOLBY:
+				*(p_ch_type++) = CH_FRONT_LEFT;
+				*(p_ch_type++) = CH_FRONT_RIGHT;
+			break;
+			case DTS_3F:
+				*(p_ch_type++) = CH_FRONT_CENTER;
+				*(p_ch_type++) = CH_FRONT_LEFT;
+				*(p_ch_type++) = CH_FRONT_RIGHT;
+			break;
+			case DTS_2F1R:
+				*(p_ch_type++) = CH_FRONT_LEFT;
+				*(p_ch_type++) = CH_FRONT_RIGHT;
+				*(p_ch_type++) = CH_REAR_CENTER;
+			break;
+			case DTS_3F1R:
+				*(p_ch_type++) = CH_FRONT_CENTER;
+				*(p_ch_type++) = CH_FRONT_LEFT;
+				*(p_ch_type++) = CH_FRONT_RIGHT;
+				*(p_ch_type++) = CH_REAR_CENTER;
+			break;
+			case DTS_2F2R:
+				*(p_ch_type++) = CH_FRONT_LEFT;
+				*(p_ch_type++) = CH_FRONT_RIGHT;
+				*(p_ch_type++) = CH_REAR_LEFT;
+				*(p_ch_type++) = CH_REAR_RIGHT;
+			break;
+			case DTS_3F2R:
+				*(p_ch_type++) = CH_FRONT_CENTER;
+				*(p_ch_type++) = CH_FRONT_LEFT;
+				*(p_ch_type++) = CH_FRONT_RIGHT;
+				*(p_ch_type++) = CH_REAR_LEFT;
+				*(p_ch_type++) = CH_REAR_RIGHT;
+			break;
+			default:
+				ADM_assert(0);
+		}
+		if (flags & DTS_LFE) {
+			*(p_ch_type++) = CH_LFE;
+		}
+	}
+
+        sample_t level = 1, bias = 0;
+        flags &=DTS_CHANNEL_MASK;
+        flags |= DTS_ADJUST_LEVEL;
+
+        if (dca->dts_frame_(DTS_HANDLE, inptr, &flags, &level, bias))
+        {
+            printf("\n DTS_frame failed!");
+            inptr+=length;
+            nbIn-=length;
+            outptr+=256*chan;
+            *nbOut+=256*chan;
+            break;
+        };
+
+        inptr+=length;
+        nbIn-=length;
+        // Each block is 256 samples
+        *nbOut += 256 * chan * dca->dts_blocks_num_(DTS_HANDLE);
+	float *cur;
+	for (int i = 0; i < dca->dts_blocks_num_(DTS_HANDLE); i++) {
+		if (dca->dts_block_ (DTS_HANDLE)) {
+			printf("\n[DTS] dts_block failed on block %d/%d\n",i,dca->dts_blocks_num_ (DTS_HANDLE));
+			// in that case we silent out the chunk
+			memset(outptr, 0, 256 * chan * sizeof(float));
+		} else {
+			float *cur;
+			for (int k = 0; k < chan; k++) {
+				sample_t *sample=(sample_t *)dca->dts_samples_(DTS_HANDLE);
+				sample += 256 * k;
+				cur = outptr + k;
+				for (int j = 0; j < 256; j++) {
+					*cur = *sample++;
+					cur+=chan;
+				}
+			}
+		}
+		outptr += chan * 256;
+	}
+    }
+
+    return 1; 
+}
+
+#endif

Added: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_dca/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_dca/CMakeLists.txt	2008-03-16 17:51:51 UTC (rev 3899)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_dca/CMakeLists.txt	2008-03-16 17:53:05 UTC (rev 3900)
@@ -0,0 +1,16 @@
+INCLUDE(admCheckDca)
+checkFaad()
+
+IF (LIBDCA_FOUND)
+	INCLUDE(ad_plugin)
+	
+	SET(ADM_ad_dca_SRCS ADM_dca.cpp)
+
+	ADD_LIBRARY(ADM_ad_dca SHARED ${ADM_ad_dca_SRCS})
+	TARGET_LINK_LIBRARIES(ADM_ad_dca ${LIBDCA_LIBRARY_DIR})
+
+	ADD_TARGET_CFLAGS(ADM_ad_dca "-I${LIBDCA_INCLUDE_DIR}")
+
+	INIT_AUDIO_PLUGIN(ADM_ad_dca)
+	INSTALL_AUDIODECODER(ADM_ad_dca)
+ENDIF (HAVE_FAAD)

Added: branches/avidemux_2.5_branch_gruntster/cmake/admCheckDca.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admCheckDca.cmake	2008-03-16 17:51:51 UTC (rev 3899)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admCheckDca.cmake	2008-03-16 17:53:05 UTC (rev 3900)
@@ -0,0 +1,48 @@
+########################################
+# libdca
+########################################
+MACRO(checkDca)
+OPTION(LIBDCA "" ON)
+
+MESSAGE(STATUS "Checking for libdca")
+MESSAGE(STATUS "*******************")
+
+IF (LIBDCA)
+	IF (UNIX)
+		SET(LIBDCA_REQUIRED_FLAGS "-lm")
+	ENDIF (UNIX)
+
+	SET(LIBDCA_VERSION 005)
+
+	IF (USE_LATE_BINDING)
+		FIND_HEADER_AND_LIB(LIBDCA_005 dca.h)
+
+		IF (NOT LIBDCA_005_FOUND)
+			SET(LIBDCA_VERSION 002)
+			FIND_HEADER_AND_LIB(LIBDCA_002 dts.h)
+		ENDIF (NOT LIBDCA_005_FOUND)
+	ELSE (USE_LATE_BINDING)
+		FIND_HEADER_AND_LIB(LIBDCA_005 dca.h dca dca_init ${LIBDCA_REQUIRED_FLAGS})
+
+		IF (NOT LIBDCA_005_FOUND)
+			SET(LIBDCA_VERSION 002)
+			FIND_HEADER_AND_LIB(LIBDCA_002 dts.h dts dts_init ${LIBDCA_REQUIRED_FLAGS})
+		ENDIF (NOT LIBDCA_005_FOUND)
+	ENDIF (USE_LATE_BINDING)
+
+	IF (LIBDCA_${LIBDCA_VERSION}_FOUND)
+		SET(LIBDCA_FOUND 1)
+		SET(USE_LIBDCA 1)
+		SET(USE_LIBDCA_${LIBDCA_VERSION} 1)
+		SET(LIBDCA_INCLUDE_DIR "${LIBDCA_${LIBDCA_VERSION}_INCLUDE_DIR}")
+		SET(LIBDCA_LIBRARY_DIR "${LIBDCA_${LIBDCA_VERSION}_LIBRARY_DIR}")
+	ENDIF (LIBDCA_${LIBDCA_VERSION}_FOUND)
+
+	PRINT_LIBRARY_INFO("libdca" LIBDCA_FOUND "${LIBDCA_INCLUDE_DIR}" "${LIBDCA_LIBRARY_DIR}")
+ELSE (LIBDCA)
+	MESSAGE("${MSG_DISABLE_OPTION}")
+ENDIF (LIBDCA)
+
+MESSAGE("")
+ENDMACRO(checkDca)
+



From mean at mail.berlios.de  Sun Mar 16 18:53:10 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 16 Mar 2008 18:53:10 +0100
Subject: [Avidemux-svn-commit] r3901 - in
	branches/avidemux_2.5_branch_gruntster: avidemux
	avidemux/ADM_audiocodec avidemux/ADM_core/src avidemux/ADM_libraries
	avidemux/ADM_userInterfaces/ADM_commonUI
	avidemux/plugins/ADM_audiodecoder
	avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3
	avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52
	avidemux/plugins/ADM_audiodecoder/ADM_ad_dca
	avidemux/plugins/ADM_audiodecoder/ADM_ad_faad
	avidemux/plugins/ADM_audiodecoder/ADM_ad_mad
	avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/ADM_libMad
	avidemux/plugins/ADM_audiodecoder/ADM_ad_vorbis cmake
Message-ID: <200803161753.m2GHrA8g016811@sheep.berlios.de>

Author: mean
Date: 2008-03-16 18:53:08 +0100 (Sun, 16 Mar 2008)
New Revision: 3901

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_audiocodec.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_audiocodec.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_pluginLoad.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_dynamicLoading.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/main.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_ad_a52.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_dca/ADM_dca.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_dca/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/ADM_ad_faad.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/ADM_ad_mad.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/ADM_libMad/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_vorbis/ADM_ad_vorbis.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_vorbis/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/cmake/ad_plugin.cmake
   branches/avidemux_2.5_branch_gruntster/cmake/admCheckAudioCodecLibs.cmake
   branches/avidemux_2.5_branch_gruntster/cmake/admCheckDca.cmake
   branches/avidemux_2.5_branch_gruntster/cmake/admConfigHelper.cmake
Log:
[AudioDecoder] Make faad/dca works, dts untested


Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_audiocodec.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_audiocodec.cpp	2008-03-16 17:53:05 UTC (rev 3900)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_audiocodec.cpp	2008-03-16 17:53:08 UTC (rev 3901)
@@ -25,8 +25,8 @@
 #include "fourcc.h"
 #include "ADM_audio/aviaudio.hxx"
 #include "ADM_audiocodec/ADM_audiocodec.h"
-#include "ADM_libraries/ADM_libwrapper/libwrapper_global.h"
 
+
 extern ADM_Audiocodec *ADM_ad_searchCodec(uint32_t fourcc,	WAVHeader *info,uint32_t extraLength,uint8_t *extraData);
 
 ADM_Audiocodec	*getAudioCodec(uint32_t fourcc,WAVHeader *info,uint32_t extra,uint8_t *extraData)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_audiocodec.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_audiocodec.h	2008-03-16 17:53:05 UTC (rev 3900)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_audiocodec.h	2008-03-16 17:53:08 UTC (rev 3901)
@@ -83,24 +83,7 @@
 };
 
 
-#ifdef USE_LIBDCA
-class ADM_AudiocodecDCA : public     ADM_Audiocodec
-{
-	protected:
-		void *dts_handle;
 
-	public:
-		ADM_AudiocodecDCA(uint32_t fourcc, WAVHeader *info);
-		virtual	~ADM_AudiocodecDCA();
-		virtual	uint8_t beginDecompress(void);
-		virtual	uint8_t endDecompress(void);
-		virtual	uint8_t run(uint8_t *inptr, uint32_t nbIn, float *outptr, uint32_t *nbOut);
-		virtual	uint8_t isCompressed(void) {return 1;}
-		virtual	uint8_t isDecompressable(void) {return 1;}
-
-   };
-#endif
-
 class ADM_Audiocodec8Bits : public     ADM_Audiocodec
 {
 	protected:

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_pluginLoad.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_pluginLoad.cpp	2008-03-16 17:53:05 UTC (rev 3900)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_pluginLoad.cpp	2008-03-16 17:53:08 UTC (rev 3901)
@@ -21,6 +21,12 @@
 #include "ADM_toolkit/filesel.h"
 #include "ADM_dynamicLoading.h"
 #include <vector>
+#if 1
+#define aprintf printf
+#else
+#define aprintf(...) {}
+#endif
+
 /**
  * 
  */
@@ -34,6 +40,7 @@
 	ADM_ad_GetDecoderVersion	*getDecoderVersion;
 	ADM_ADM_ad_GetInfo			*getInfo;
 	ADM_LibWrapper				*wrapper;
+	const char 					*name;
 };
 
 std::vector<ADM_ad_plugin *> ADM_audioPlugins;
@@ -48,7 +55,7 @@
 	ADM_LibWrapper *wrapper=new ADM_LibWrapper;
 	 if(true!=wrapper->loadLibrary(file))
 	 {
-		 printf("Load failed\n");
+		 printf("[ADM_ad_plugin] LoadLibrary failed for %s\n",ADM_GetFileName(file));
 		 goto Err_ad;
 	 }
 #define FUNCKY(a,b,c)	 blank.a=(b *)wrapper->getSymbol(#c); if(!blank.a) { printf("[ADM_ad_plugin]"#c" failed\n"); goto Err_ad;;}
@@ -71,6 +78,7 @@
 	 const char *desc;
 	 blank.getDecoderVersion(&major,&minor,&patch);
 	 blank.wrapper=wrapper;
+	 blank.name=ADM_strdup(ADM_GetFileName(file));
 	 desc=blank.getInfo();
 	 // Print out stuff
 	 printf("[ADM_ad_plugin] Plugin loaded version %d.%d.%d, desc : %s\n",major,minor,patch,desc);
@@ -133,7 +141,7 @@
 		ADM_ad_plugin *a=ADM_audioPlugins[i];
 		ADM_assert(a);
 		ADM_assert(a->supportedFormat);
-		
+		aprintf("Format 0x%x : probing %s\n",fourcc,a->name);
 		if(a->supportedFormat(fourcc)==true)
 		{
 			ADM_assert(a->create);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/CMakeLists.txt	2008-03-16 17:53:05 UTC (rev 3900)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/CMakeLists.txt	2008-03-16 17:53:08 UTC (rev 3901)
@@ -1,6 +1,6 @@
 SET(ADM_audiocodec_SRCS
 	ADM_8bits.cpp  ADM_codecimaadpcm.cpp  ADM_codecmsadpcm.cpp  ADM_codeculaw.cpp  ADM_codecwma.cpp  ADM_lpcm.cpp
-	ADM_audiocodec.cpp  ADM_codecwav.cpp  ADM_dca.cpp  ADM_pluginLoad.cpp)
+	ADM_audiocodec.cpp  ADM_codecwav.cpp  ADM_pluginLoad.cpp)
 
 ADD_ADM_LIB_ALL_TARGETS(ADM_audiocodec ${ADM_audiocodec_SRCS})
 
@@ -8,7 +8,3 @@
 	ADD_SOURCE_CFLAGS(ADM_audiocodec.cpp -I${AMRNB_INCLUDE_DIR})
 ENDIF (USE_AMR_NB)
 
-IF (USE_LIBDCA)
-	ADD_SOURCE_CFLAGS(ADM_audiocodec.cpp -I${LIBDCA_INCLUDE_DIR})
-	ADD_SOURCE_CFLAGS(ADM_dca.cpp -I${LIBDCA_INCLUDE_DIR})
-ENDIF (USE_LIBDCA)
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_dynamicLoading.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_dynamicLoading.cpp	2008-03-16 17:53:05 UTC (rev 3900)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_dynamicLoading.cpp	2008-03-16 17:53:08 UTC (rev 3901)
@@ -90,11 +90,11 @@
 		return true;
 	}
 #else
-	hinstLib = dlopen(path, RTLD_NOW);
+	hinstLib = dlopen(path, RTLD_NOW | RTLD_GLOBAL);
 	
 	if (hinstLib == NULL)
 	{
-		aprintf("Unable to load [%s]: %s\n", path, dlerror());
+		printf("Unable to load [%s]: %s\n", path, dlerror());
 
 		return false;
 	}

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/CMakeLists.txt	2008-03-16 17:53:05 UTC (rev 3900)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/CMakeLists.txt	2008-03-16 17:53:08 UTC (rev 3901)
@@ -1,7 +1,6 @@
 subdirs (PREORDER ADM_ffmpeg)
 subdirs (PREORDER ADM_libmpeg2enc)
 subdirs (PREORDER ADM_libtwolame)
-subdirs (PREORDER ADM_libwrapper)
 subdirs (PREORDER ADM_lvemux)
 subdirs (PREORDER ADM_mplex)
 subdirs (PREORDER ADM_smjs)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp	2008-03-16 17:53:05 UTC (rev 3900)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp	2008-03-16 17:53:08 UTC (rev 3901)
@@ -32,7 +32,6 @@
 #include "ADM_default.h"
 #include "DIA_factory.h"
 #include "ADM_assert.h"
-#include "ADM_libraries/ADM_libwrapper/libwrapper_global.h"
 
 /**
     \fn DIA_builtin(void)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt	2008-03-16 17:53:05 UTC (rev 3900)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt	2008-03-16 17:53:08 UTC (rev 3901)
@@ -237,7 +237,6 @@
 	ADM_mplex
 	ADM_libmpeg2enc
 	ADM_libtwolame
-	ADM_libwrapper
 	ADM_lvemux
 	ADM_utilities
 	ADM_xvidratectl

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/main.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/main.cpp	2008-03-16 17:53:05 UTC (rev 3900)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/main.cpp	2008-03-16 17:53:08 UTC (rev 3901)
@@ -33,7 +33,6 @@
 #include "prefs.h"
 #include "ADM_audiodevice/audio_out.h"
 #include "ADM_toolkit/ADM_intfloat.h"
-#include "ADM_libraries/ADM_libwrapper/libwrapper_global.h"
 
 #ifdef USE_XVID_4
 extern void xvid4_init(void);
@@ -263,9 +262,7 @@
     buildDistMatrix();
     initScaleTab();
 
-    COL_init();
-	initLibWrappers();
-	
+    COL_init();	
     if(SpidermonkeyInit() == true)
         printf("Spidermonkey initialized.\n");
     else
@@ -293,7 +290,6 @@
     pthread_mutex_unlock(&g_pSpiderMonkeyMutex);
     destroyPrefs();
     filterCleanUp();
-	destroyLibWrappers();
 	ADM_lavDestroy();
 
 #ifdef USE_SDL

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_ad_a52.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_ad_a52.cpp	2008-03-16 17:53:05 UTC (rev 3900)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_ad_a52.cpp	2008-03-16 17:53:08 UTC (rev 3901)
@@ -43,7 +43,7 @@
    };
 // Supported formats + declare our plugin
 //*******************************************************
-   uint32_t Formats[]={WAV_AC3};
+   static  uint32_t Formats[]={WAV_AC3};
    DECLARE_AUDIO_DECODER(ADM_AudiocodecAC3,						// Class
 		   	0,0,1, 												// Major, minor,patch 
 		   	Formats, 											// Supported formats

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/CMakeLists.txt	2008-03-16 17:53:05 UTC (rev 3900)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/ADM_liba52/CMakeLists.txt	2008-03-16 17:53:08 UTC (rev 3901)
@@ -15,4 +15,6 @@
 
 IF (ADM_BIG_ENDIAN)
 	ADD_TARGET_CFLAGS(${ADM_LIB} -DWORDS_BIGENDIAN)
-ENDIF (ADM_BIG_ENDIAN)
\ No newline at end of file
+ENDIF (ADM_BIG_ENDIAN)
+
+INIT_AUDIO_PLUGIN(${ADM_LIB})
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/CMakeLists.txt	2008-03-16 17:53:05 UTC (rev 3900)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_ac3/CMakeLists.txt	2008-03-16 17:53:08 UTC (rev 3901)
@@ -1,5 +1,4 @@
 INCLUDE(ad_plugin)
-INIT_AUDIO_PLUGIN()
 
 ADD_SUBDIRECTORY(ADM_liba52)
 
@@ -8,8 +7,5 @@
 ADD_LIBRARY(ADM_ad_a52 SHARED ${ADM_ad_a52_SRCS})
 TARGET_LINK_LIBRARIES(ADM_ad_a52 ADM_liba52)
 
-IF (WIN32 OR APPLE)
-	TARGET_LINK_LIBRARIES(ADM_ad_a52 ADM_core)
-ENDIF (WIN32 OR APPLE)
-
-INSTALL_AUDIODECODER(ADM_ad_a52)
\ No newline at end of file
+INIT_AUDIO_PLUGIN(ADM_ad_a52)
+INSTALL_AUDIODECODER(ADM_ad_a52)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_dca/ADM_dca.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_dca/ADM_dca.cpp	2008-03-16 17:53:05 UTC (rev 3900)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_dca/ADM_dca.cpp	2008-03-16 17:53:08 UTC (rev 3901)
@@ -15,22 +15,89 @@
  *                                                                         *
  ***************************************************************************/
 #include <math.h>
-
-#include "config.h"
 #include "ADM_default.h"
+#include "ADM_ad_plugin.h"
+#ifdef USE_LIBDCA_002
+extern "C" {
+#include "dts.h"
+}
+#define LIBDCA_STATE dts_state_t
+#define DTS(x) DTS_##x
+#else
+extern "C" {
+#include "dca.h"
+}
+#define LIBDCA_STATE dca_state_t
+#define DTS(x) DCA_##x 
+#endif
 
-#include "ADM_audio/aviaudio.hxx"
-#include "ADM_audiocodec/ADM_audiocodec.h"
+#define DTS_HEADER_SIZE (10)
 
-#include "prefs.h"
+class ADM_AudiocodecDCA : public     ADM_Audiocodec
+{
+	protected:
+		void *dts_handle;
 
-#ifdef USE_LIBDCA
-#include "ADM_audio/ADM_dcainfo.h"
-#include "ADM_libraries/ADM_libwrapper/libwrapper_global.h"
+	public:
+		ADM_AudiocodecDCA(uint32_t fourcc, WAVHeader *info, uint32_t l, uint8_t *d);
+		virtual	~ADM_AudiocodecDCA();
+		virtual	uint8_t beginDecompress(void);
+		virtual	uint8_t endDecompress(void);
+		virtual	uint8_t run(uint8_t *inptr, uint32_t nbIn, float *outptr, uint32_t *nbOut);
+		virtual	uint8_t isCompressed(void) {return 1;}
+		virtual	uint8_t isDecompressable(void) {return 1;}
 
-#define DTS_HANDLE ((dts_state_t *)dts_handle)
+   };
+typedef struct
+{
+		int (*dts_block)(LIBDCA_STATE* state);
+		int (*dts_blocks_num) (LIBDCA_STATE* state);
+		int (*dts_frame) (LIBDCA_STATE* state, uint8_t* buf, int* flags, level_t* level, sample_t bias);
+		void (*dts_free) (LIBDCA_STATE* state);
+		LIBDCA_STATE* (*dts_init) (uint32_t mm_accel);
+		sample_t* (*dts_samples) (LIBDCA_STATE* state);
+		int (*dts_syncinfo) (LIBDCA_STATE* state, uint8_t* buf, int* flags, int* sample_rate, int* bit_rate, int* frame_length);
+}DCA_func_struct;
+#ifdef USE_LIBDCA_002
+DCA_func_struct dcaFunctions=
+{
+	dts_block, 
+	dts_blocks_num, 
+	dts_frame, 
+	dts_free, 
+	dts_init,
+	dts_samples, 
+	dts_syncinfo
+};	
+#else // 05
+DCA_func_struct dcaFunctions=
+{
+	dca_block, 
+	dca_blocks_num, 
+	dca_frame, 
+	dca_free, 
+	dca_init,
+	dca_samples, 
+	dca_syncinfo
+};	
+#endif
 
-ADM_AudiocodecDCA::ADM_AudiocodecDCA( uint32_t fourcc, WAVHeader *info) :   ADM_Audiocodec(fourcc)
+DCA_func_struct *dca=&dcaFunctions;
+
+#define DTS_HANDLE ((LIBDCA_STATE *)dts_handle)
+// Supported formats + declare our plugin
+//*******************************************************
+static uint32_t Formats[]={WAV_DTS};
+DECLARE_AUDIO_DECODER(ADM_AudiocodecDCA,						// Class
+			0,0,1, 												// Major, minor,patch 
+			Formats, 											// Supported formats
+#ifdef USE_LIBDCA_002			
+			"libDts decoder plugin for avidemux (c) Mean/Gruntster\n"); 	// Desc
+#else
+			"libDca decoder plugin for avidemux (c) Mean/Gruntster\n"); 	// Desc
+#endif
+   //********************************************************
+ADM_AudiocodecDCA::ADM_AudiocodecDCA(uint32_t fourcc, WAVHeader *info, uint32_t l, uint8_t *d) :   ADM_Audiocodec(fourcc)
 {
     int flags=0;
     ADM_assert(fourcc==WAV_DTS);
@@ -43,7 +110,7 @@
     CHK(MMXEXT,MMXEXT);
 #endif
     
-    dts_handle=(void *)dca->dts_init_(flags);
+    dts_handle=(void *)dca->dts_init(flags);
     if(!dts_handle)
     {
         printf("Cannot init libdca\n");
@@ -56,7 +123,7 @@
 {
     if(dts_handle)
     {
-        dca->dts_free_(DTS_HANDLE);
+        dca->dts_free(DTS_HANDLE);
         dts_handle=NULL;
     }
 }
@@ -90,7 +157,7 @@
             break;
         }
         //length = ADM_DCAGetInfo(ptr,nbIn, &samprate, &bitrate, &chan,&syncoff,&flags);
-        length = dca->dts_syncinfo_ (DTS_HANDLE,  inptr, &flags, &samprate,&bitrate, &frame_length);
+        length = dca->dts_syncinfo (DTS_HANDLE,  inptr, &flags, &samprate,&bitrate, &frame_length);
 
         if(!length)
         {
@@ -102,41 +169,41 @@
             // not enough data
             break;
         }
+        CHANNEL_TYPE *p_ch_type = channelMapping;
 
-	if (ch_route.mode < 1) {
-		CHANNEL_TYPE *p_ch_type = ch_route.input_type;
-		switch (flags & DTS_CHANNEL_MASK) {
-			case DTS_MONO:
+		switch (flags & DTS(CHANNEL_MASK)) 
+		{
+			case DTS(MONO):
 				*(p_ch_type++) = CH_MONO;
 			break;
-			case DTS_STEREO:
-			case DTS_DOLBY:
+			case DTS(STEREO):
+			case DTS(DOLBY):
 				*(p_ch_type++) = CH_FRONT_LEFT;
 				*(p_ch_type++) = CH_FRONT_RIGHT;
 			break;
-			case DTS_3F:
+			case DTS(3F):
 				*(p_ch_type++) = CH_FRONT_CENTER;
 				*(p_ch_type++) = CH_FRONT_LEFT;
 				*(p_ch_type++) = CH_FRONT_RIGHT;
 			break;
-			case DTS_2F1R:
+			case DTS(2F1R):
 				*(p_ch_type++) = CH_FRONT_LEFT;
 				*(p_ch_type++) = CH_FRONT_RIGHT;
 				*(p_ch_type++) = CH_REAR_CENTER;
 			break;
-			case DTS_3F1R:
+			case DTS(3F1R):
 				*(p_ch_type++) = CH_FRONT_CENTER;
 				*(p_ch_type++) = CH_FRONT_LEFT;
 				*(p_ch_type++) = CH_FRONT_RIGHT;
 				*(p_ch_type++) = CH_REAR_CENTER;
 			break;
-			case DTS_2F2R:
+			case DTS(2F2R):
 				*(p_ch_type++) = CH_FRONT_LEFT;
 				*(p_ch_type++) = CH_FRONT_RIGHT;
 				*(p_ch_type++) = CH_REAR_LEFT;
 				*(p_ch_type++) = CH_REAR_RIGHT;
 			break;
-			case DTS_3F2R:
+			case DTS(3F2R):
 				*(p_ch_type++) = CH_FRONT_CENTER;
 				*(p_ch_type++) = CH_FRONT_LEFT;
 				*(p_ch_type++) = CH_FRONT_RIGHT;
@@ -145,17 +212,18 @@
 			break;
 			default:
 				ADM_assert(0);
-		}
-		if (flags & DTS_LFE) {
+		} // End switch
+		if (flags & DTS(LFE)) 
+		{
 			*(p_ch_type++) = CH_LFE;
 		}
-	}
+	
 
         sample_t level = 1, bias = 0;
-        flags &=DTS_CHANNEL_MASK;
-        flags |= DTS_ADJUST_LEVEL;
+        flags &=DTS(CHANNEL_MASK);
+        flags |= DTS(ADJUST_LEVEL);
 
-        if (dca->dts_frame_(DTS_HANDLE, inptr, &flags, &level, bias))
+        if (dca->dts_frame(DTS_HANDLE, inptr, &flags, &level, bias))
         {
             printf("\n DTS_frame failed!");
             inptr+=length;
@@ -168,17 +236,17 @@
         inptr+=length;
         nbIn-=length;
         // Each block is 256 samples
-        *nbOut += 256 * chan * dca->dts_blocks_num_(DTS_HANDLE);
+        *nbOut += 256 * chan * dca->dts_blocks_num(DTS_HANDLE);
 	float *cur;
-	for (int i = 0; i < dca->dts_blocks_num_(DTS_HANDLE); i++) {
-		if (dca->dts_block_ (DTS_HANDLE)) {
-			printf("\n[DTS] dts_block failed on block %d/%d\n",i,dca->dts_blocks_num_ (DTS_HANDLE));
+	for (int i = 0; i < dca->dts_blocks_num(DTS_HANDLE); i++) {
+		if (dca->dts_block(DTS_HANDLE)) {
+			printf("\n[DTS] dts_block failed on block %d/%d\n",i,dca->dts_blocks_num (DTS_HANDLE));
 			// in that case we silent out the chunk
 			memset(outptr, 0, 256 * chan * sizeof(float));
 		} else {
 			float *cur;
 			for (int k = 0; k < chan; k++) {
-				sample_t *sample=(sample_t *)dca->dts_samples_(DTS_HANDLE);
+				sample_t *sample=(sample_t *)dca->dts_samples(DTS_HANDLE);
 				sample += 256 * k;
 				cur = outptr + k;
 				for (int j = 0; j < 256; j++) {
@@ -194,4 +262,3 @@
     return 1; 
 }
 
-#endif

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_dca/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_dca/CMakeLists.txt	2008-03-16 17:53:05 UTC (rev 3900)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_dca/CMakeLists.txt	2008-03-16 17:53:08 UTC (rev 3901)
@@ -1,5 +1,6 @@
+# DCA decoder
 INCLUDE(admCheckDca)
-checkFaad()
+checkDca()
 
 IF (LIBDCA_FOUND)
 	INCLUDE(ad_plugin)
@@ -10,7 +11,8 @@
 	TARGET_LINK_LIBRARIES(ADM_ad_dca ${LIBDCA_LIBRARY_DIR})
 
 	ADD_TARGET_CFLAGS(ADM_ad_dca "-I${LIBDCA_INCLUDE_DIR}")
+	ADD_TARGET_CFLAGS(ADM_ad_dca "-DUSE_LIBDCA_${LIBDCA_VERSION}")
 
 	INIT_AUDIO_PLUGIN(ADM_ad_dca)
 	INSTALL_AUDIODECODER(ADM_ad_dca)
-ENDIF (HAVE_FAAD)
+ENDIF (LIBDCA_FOUND)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/ADM_ad_faad.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/ADM_ad_faad.cpp	2008-03-16 17:53:05 UTC (rev 3900)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/ADM_ad_faad.cpp	2008-03-16 17:53:08 UTC (rev 3901)
@@ -42,7 +42,7 @@
 };
 // Supported formats + declare our plugin
 //*******************************************************
-uint32_t Formats[]={WAV_AAC,WAV_MP4};
+static uint32_t Formats[]={WAV_AAC,WAV_MP4};
 DECLARE_AUDIO_DECODER(ADM_faad,						// Class
 			0,0,1, 												// Major, minor,patch 
 			Formats, 											// Supported formats

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/CMakeLists.txt	2008-03-16 17:53:05 UTC (rev 3900)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/CMakeLists.txt	2008-03-16 17:53:08 UTC (rev 3901)
@@ -3,19 +3,15 @@
 
 IF (HAVE_FAAD)
 	INCLUDE(ad_plugin)
-	INIT_AUDIO_PLUGIN()
 	
 	SET(ADM_ad_faad_SRCS ADM_ad_faad.cpp)
 
 	ADD_LIBRARY(ADM_ad_faad SHARED ${ADM_ad_faad_SRCS})
 	TARGET_LINK_LIBRARIES(ADM_ad_faad ${FAAD_LIBRARY_DIR})
 
-	IF (WIN32 OR APPLE)
-		TARGET_LINK_LIBRARIES(ADM_ad_faad ADM_core)
-	ENDIF (WIN32 OR APPLE)
-
 	ADD_TARGET_CFLAGS(ADM_ad_faad "-I${FAAD_INCLUDE_DIR}")
 	ADD_TARGET_DEFINITIONS(ADM_ad_faad FAAD_OLD_PROTOTYPE)
 	
+	INIT_AUDIO_PLUGIN(ADM_ad_faad)
 	INSTALL_AUDIODECODER(ADM_ad_faad)
-ENDIF (HAVE_FAAD)
\ No newline at end of file
+ENDIF (HAVE_FAAD)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/ADM_ad_mad.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/ADM_ad_mad.cpp	2008-03-16 17:53:05 UTC (rev 3900)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/ADM_ad_mad.cpp	2008-03-16 17:53:08 UTC (rev 3901)
@@ -44,7 +44,7 @@
 };
 // Supported formats + declare our plugin
 //*******************************************************
-uint32_t Formats[]={WAV_MP3,WAV_MP2};
+static uint32_t Formats[]={WAV_MP3,WAV_MP2};
 DECLARE_AUDIO_DECODER(ADM_AudiocodecMP3,						// Class
 			0,0,1, 												// Major, minor,patch 
 			Formats, 											// Supported formats

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/ADM_libMad/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/ADM_libMad/CMakeLists.txt	2008-03-16 17:53:05 UTC (rev 3900)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/ADM_libMad/CMakeLists.txt	2008-03-16 17:53:08 UTC (rev 3901)
@@ -13,3 +13,5 @@
 IF (ADM_BIG_ENDIAN)
 	ADD_TARGET_CFLAGS(${ADM_LIB} "-DWORDS_BIGENDIAN")
 ENDIF (ADM_BIG_ENDIAN)
+
+INIT_AUDIO_PLUGIN(${ADM_LIB})

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/CMakeLists.txt	2008-03-16 17:53:05 UTC (rev 3900)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/CMakeLists.txt	2008-03-16 17:53:08 UTC (rev 3901)
@@ -1,5 +1,4 @@
 INCLUDE(ad_plugin)
-INIT_AUDIO_PLUGIN()
 
 IF (ADM_CPU_X86_32)
 	ADD_DEFINITIONS("-DFPM_INTEL")
@@ -16,8 +15,5 @@
 ADD_LIBRARY(ADM_ad_Mad SHARED ${ADM_ad_Mad_SRCS})
 TARGET_LINK_LIBRARIES(ADM_ad_Mad ADM_libMad)
 
-IF (WIN32 OR APPLE)
-	TARGET_LINK_LIBRARIES(ADM_ad_Mad ADM_core)
-ENDIF (WIN32 OR APPLE)
-
-INSTALL_AUDIODECODER(ADM_ad_Mad)
\ No newline at end of file
+INIT_AUDIO_PLUGIN(ADM_ad_Mad)
+INSTALL_AUDIODECODER(ADM_ad_Mad)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_vorbis/ADM_ad_vorbis.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_vorbis/ADM_ad_vorbis.cpp	2008-03-16 17:53:05 UTC (rev 3900)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_vorbis/ADM_ad_vorbis.cpp	2008-03-16 17:53:08 UTC (rev 3901)
@@ -50,7 +50,7 @@
 
 // Supported formats + declare our plugin
 //*******************************************************
-uint32_t Formats[]={WAV_OGG};
+static uint32_t Formats[]={WAV_OGG};
 DECLARE_AUDIO_DECODER(ADM_vorbis,						// Class
 			0,0,1, 												// Major, minor,patch 
 			Formats, 											// Supported formats

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_vorbis/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_vorbis/CMakeLists.txt	2008-03-16 17:53:05 UTC (rev 3900)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_vorbis/CMakeLists.txt	2008-03-16 17:53:08 UTC (rev 3901)
@@ -1,15 +1,15 @@
-IF (USE_VORBIS)
+IF (USE_VORBIS)
 	INCLUDE(ad_plugin)
-	INIT_AUDIO_PLUGIN()
-
-	SET(ADM_ad_vorbis_SRCS ADM_ad_vorbis.cpp)
-
-	ADD_LIBRARY(ADM_ad_vorbis SHARED ${ADM_ad_vorbis_SRCS})
-
-	TARGET_LINK_LIBRARIES(ADM_ad_vorbis ${VORBIS_LIBRARY_DIR})
-	TARGET_LINK_LIBRARIES(ADM_ad_vorbis ${VORBISENC_LIBRARY_DIR})
-
-	ADD_TARGET_CFLAGS(ADM_ad_vorbis "-I${VORBIS_INCLUDE_DIR}")
-
-	INSTALL_AUDIODECODER(ADM_ad_vorbis)
-ENDIF (USE_VORBIS)
\ No newline at end of file
+
+	SET(ADM_ad_vorbis_SRCS ADM_ad_vorbis.cpp)
+
+	ADD_LIBRARY(ADM_ad_vorbis SHARED ${ADM_ad_vorbis_SRCS})
+
+	TARGET_LINK_LIBRARIES(ADM_ad_vorbis ${VORBIS_LIBRARY_DIR})
+	TARGET_LINK_LIBRARIES(ADM_ad_vorbis ${VORBISENC_LIBRARY_DIR})
+
+	ADD_TARGET_CFLAGS(ADM_ad_vorbis "-I${VORBIS_INCLUDE_DIR}")
+
+	INIT_AUDIO_PLUGIN(ADM_ad_vorbis)
+	INSTALL_AUDIODECODER(ADM_ad_vorbis)
+ENDIF (USE_VORBIS)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/CMakeLists.txt	2008-03-16 17:53:05 UTC (rev 3900)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/CMakeLists.txt	2008-03-16 17:53:08 UTC (rev 3901)
@@ -2,3 +2,4 @@
 ADD_SUBDIRECTORY(ADM_ad_faad)
 ADD_SUBDIRECTORY(ADM_ad_mad)
 ADD_SUBDIRECTORY(ADM_ad_vorbis)
+ADD_SUBDIRECTORY(ADM_ad_dca)

Modified: branches/avidemux_2.5_branch_gruntster/cmake/ad_plugin.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/ad_plugin.cmake	2008-03-16 17:53:05 UTC (rev 3900)
+++ branches/avidemux_2.5_branch_gruntster/cmake/ad_plugin.cmake	2008-03-16 17:53:08 UTC (rev 3901)
@@ -1,9 +1,12 @@
-MACRO(INIT_AUDIO_PLUGIN)
+MACRO(INIT_AUDIO_PLUGIN _lib)
 	INCLUDE_DIRECTORIES("${CMAKE_BINARY_DIR}/config")
 	INCLUDE_DIRECTORIES("${CMAKE_SOURCE_DIR}/avidemux/ADM_core/include")
 	INCLUDE_DIRECTORIES("${CMAKE_SOURCE_DIR}/avidemux/ADM_audiocodec")
+        if(WIN32)
+                TARGET_LINK_LIBRARIES(${_lib} ADM_core)
+        endif(WIN32)
 ENDMACRO(INIT_AUDIO_PLUGIN)
 
 MACRO(INSTALL_AUDIODECODER _lib)
 	INSTALL(TARGETS ${_lib} DESTINATION "${CMAKE_INSTALL_PREFIX}/lib/ADM_plugins/audioDecoder/")
-ENDMACRO(INSTALL_AUDIODECODER)
\ No newline at end of file
+ENDMACRO(INSTALL_AUDIODECODER)

Modified: branches/avidemux_2.5_branch_gruntster/cmake/admCheckAudioCodecLibs.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admCheckAudioCodecLibs.cmake	2008-03-16 17:53:05 UTC (rev 3900)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admCheckAudioCodecLibs.cmake	2008-03-16 17:53:08 UTC (rev 3901)
@@ -90,52 +90,7 @@
 
 MESSAGE("")
 
-########################################
-# libdca
-########################################
-OPTION(LIBDCA "" ON)
 
-MESSAGE(STATUS "Checking for libdca")
-MESSAGE(STATUS "*******************")
-
-IF (LIBDCA)
-	IF (UNIX)
-		SET(LIBDCA_REQUIRED_FLAGS "-lm")
-	ENDIF (UNIX)
-
-	SET(LIBDCA_VERSION 005)
-
-	IF (USE_LATE_BINDING)
-		FIND_HEADER_AND_LIB(LIBDCA_005 dca.h)
-
-		IF (NOT LIBDCA_005_FOUND)
-			SET(LIBDCA_VERSION 002)
-			FIND_HEADER_AND_LIB(LIBDCA_002 dts.h)
-		ENDIF (NOT LIBDCA_005_FOUND)
-	ELSE (USE_LATE_BINDING)
-		FIND_HEADER_AND_LIB(LIBDCA_005 dca.h dca dca_init ${LIBDCA_REQUIRED_FLAGS})
-
-		IF (NOT LIBDCA_005_FOUND)
-			SET(LIBDCA_VERSION 002)
-			FIND_HEADER_AND_LIB(LIBDCA_002 dts.h dts dts_init ${LIBDCA_REQUIRED_FLAGS})
-		ENDIF (NOT LIBDCA_005_FOUND)
-	ENDIF (USE_LATE_BINDING)
-
-	IF (LIBDCA_${LIBDCA_VERSION}_FOUND)
-		SET(LIBDCA_FOUND 1)
-		SET(USE_LIBDCA 1)
-		SET(USE_LIBDCA_${LIBDCA_VERSION} 1)
-		SET(LIBDCA_INCLUDE_DIR "${LIBDCA_${LIBDCA_VERSION}_INCLUDE_DIR}")
-		SET(LIBDCA_LIBRARY_DIR "${LIBDCA_${LIBDCA_VERSION}_LIBRARY_DIR}")
-	ENDIF (LIBDCA_${LIBDCA_VERSION}_FOUND)
-
-	PRINT_LIBRARY_INFO("libdca" LIBDCA_FOUND "${LIBDCA_INCLUDE_DIR}" "${LIBDCA_LIBRARY_DIR}")
-ELSE (LIBDCA)
-	MESSAGE("${MSG_DISABLE_OPTION}")
-ENDIF (LIBDCA)
-
-MESSAGE("")
-
 ########################################
 # FAAC
 ########################################
@@ -180,4 +135,4 @@
 	MESSAGE("${MSG_DISABLE_OPTION}")
 ENDIF (VORBIS)
 
-MESSAGE ("")
\ No newline at end of file
+MESSAGE ("")

Modified: branches/avidemux_2.5_branch_gruntster/cmake/admCheckDca.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admCheckDca.cmake	2008-03-16 17:53:05 UTC (rev 3900)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admCheckDca.cmake	2008-03-16 17:53:08 UTC (rev 3901)
@@ -14,22 +14,13 @@
 
 	SET(LIBDCA_VERSION 005)
 
-	IF (USE_LATE_BINDING)
-		FIND_HEADER_AND_LIB(LIBDCA_005 dca.h)
+	FIND_HEADER_AND_LIB(LIBDCA_005 dca.h dca dca_init ${LIBDCA_REQUIRED_FLAGS})
 
-		IF (NOT LIBDCA_005_FOUND)
-			SET(LIBDCA_VERSION 002)
-			FIND_HEADER_AND_LIB(LIBDCA_002 dts.h)
-		ENDIF (NOT LIBDCA_005_FOUND)
-	ELSE (USE_LATE_BINDING)
-		FIND_HEADER_AND_LIB(LIBDCA_005 dca.h dca dca_init ${LIBDCA_REQUIRED_FLAGS})
+	IF (NOT LIBDCA_005_FOUND)
+		SET(LIBDCA_VERSION 002)
+		FIND_HEADER_AND_LIB(LIBDCA_002 dts.h dts dts_init ${LIBDCA_REQUIRED_FLAGS})
+	ENDIF (NOT LIBDCA_005_FOUND)
 
-		IF (NOT LIBDCA_005_FOUND)
-			SET(LIBDCA_VERSION 002)
-			FIND_HEADER_AND_LIB(LIBDCA_002 dts.h dts dts_init ${LIBDCA_REQUIRED_FLAGS})
-		ENDIF (NOT LIBDCA_005_FOUND)
-	ENDIF (USE_LATE_BINDING)
-
 	IF (LIBDCA_${LIBDCA_VERSION}_FOUND)
 		SET(LIBDCA_FOUND 1)
 		SET(USE_LIBDCA 1)

Modified: branches/avidemux_2.5_branch_gruntster/cmake/admConfigHelper.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admConfigHelper.cmake	2008-03-16 17:53:05 UTC (rev 3900)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admConfigHelper.cmake	2008-03-16 17:53:08 UTC (rev 3901)
@@ -228,4 +228,4 @@
 	APPEND_FLAGS(_flags ${ARGN})
 
 	TARGET_LINK_LIBRARIES(${_target} ${_flags})
-ENDMACRO (ADD_TARGET_LDFLAGS)
\ No newline at end of file
+ENDMACRO (ADD_TARGET_LDFLAGS)



From mean at mail.berlios.de  Sun Mar 16 18:53:12 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 16 Mar 2008 18:53:12 +0100
Subject: [Avidemux-svn-commit] r3902 - in
	branches/avidemux_2.5_branch_gruntster/avidemux:
	ADM_audiocodec ADM_libraries/ADM_ffmpeg/ADM_lavcodec
	ADM_userInterfaces/ADM_commonUI plugins/ADM_audiodecoder
	plugins/ADM_audiodecoder/ADM_ad_amrnb
Message-ID: <200803161753.m2GHrC6V016843@sheep.berlios.de>

Author: mean
Date: 2008-03-16 18:53:12 +0100 (Sun, 16 Mar 2008)
New Revision: 3902

Added:
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_amrnb/
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_amrnb/ADM_ad_amrnb.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_amrnb/CMakeLists.txt
Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_audiocodec.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_audiocodec.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_codecwma.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/amr.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/CMakeLists.txt
Log:
[AudioDecoder] Added AMRNB audio decoder


Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_audiocodec.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_audiocodec.cpp	2008-03-16 17:53:08 UTC (rev 3901)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_audiocodec.cpp	2008-03-16 17:53:12 UTC (rev 3902)
@@ -65,16 +65,6 @@
 					out= (ADM_Audiocodec *)new ADM_AudiocodecWav(fourcc);
 #endif					
                   			break;
-#ifdef USE_AMR_NB
-				case WAV_AMRNB:
-					if (amrnb->isAvailable())
-					{
-						printf("\n AMR narrow band codec\n");
-						out=(ADM_Audiocodec *)new ADM_AudiocodecAMR(fourcc,info);
-					}
-
-					break;
-#endif
 				case WAV_8BITS:
 					printf("\n 8 BIts pseudo codec\n");
     					out= (ADM_Audiocodec *)new ADM_Audiocodec8Bits(fourcc);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_audiocodec.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_audiocodec.h	2008-03-16 17:53:08 UTC (rev 3901)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_audiocodec.h	2008-03-16 17:53:12 UTC (rev 3902)
@@ -120,23 +120,7 @@
 		virtual	uint8_t isDecompressable(void) {return 1;}
 };
 
-#define ADM_AMR_BUFFER (16*1024) // 16 kB internal
-class ADM_AudiocodecAMR : public     ADM_Audiocodec
-{
-	protected:
-		void *_contextVoid;
-		uint8_t  _buffer[ ADM_AMR_BUFFER];
-		uint32_t _head,_tail;
 
-	public:
-		ADM_AudiocodecAMR(uint32_t fourcc, WAVHeader *info);
-		virtual	~ADM_AudiocodecAMR() ;
-		virtual	uint8_t beginDecompress(void) ;
-		virtual	uint8_t endDecompress(void);
-		virtual	uint8_t run(uint8_t *inptr, uint32_t nbIn, float *outptr, uint32_t *nbOut);
-		virtual	uint8_t isCompressed(void) {return 1;}
-		virtual	uint8_t isDecompressable(void) {return 1;}
-};
 
  class ADM_AudiocodecUlaw : public     ADM_Audiocodec
  {

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_codecwma.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_codecwma.cpp	2008-03-16 17:53:08 UTC (rev 3901)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_codecwma.cpp	2008-03-16 17:53:12 UTC (rev 3902)
@@ -166,97 +166,5 @@
         
         return 1;
 }
-///************************************************
-#ifdef USE_AMR_NB
-  uint8_t ADM_AudiocodecAMR::beginDecompress( void ) 
-   {
-            _tail=_head=0;
-            return 1;
-   };
-   uint8_t ADM_AudiocodecAMR::endDecompress( void ) 
-   {
-            _tail=_head=0;
-            return 1;
-   };
-/* AMR specific */
- ADM_AudiocodecAMR::ADM_AudiocodecAMR(uint32_t fourcc,WAVHeader *info)
-       :  ADM_Audiocodec(fourcc)
- {
-        _tail=_head=0;
-        ADM_assert(fourcc==WAV_AMRNB);	
-        _contextVoid=(void *)avcodec_alloc_context();
-        ADM_assert(_contextVoid);
-        // Fills in some values...	
-        info->channels=_context->channels 		= 1;
-        info->frequency=_context->sample_rate = 8000;
-        _context->bit_rate = 12000; // byte -> bits
-        _context->block_align = 32;       // ...
-        _context->codec_id = CODEC_ID_AMR_NB;
-        _context->extradata=NULL;
-        _context->extradata_size=0;	
-        printf(" Opening AMR codec\n");
 
-        AVCodec *codec=avcodec_find_decoder(CODEC_ID_AMR_NB);
-        if(!codec) {GUI_Error_HIG(QT_TR_NOOP("Internal error"), QT_TR_NOOP("Cannot open AMR codec."));ADM_assert(0);} 
-        if (avcodec_open(_context, codec) < 0)
-        {
-            printf("\n AMR decoder init failed !\n");
-            ADM_assert(0);
-        }
-        printf("FFamr init successful \n");
-}
- ADM_AudiocodecAMR::~ADM_AudiocodecAMR()
- {
-        avcodec_close(_context);
-        ADM_dealloc(_context);
-        _contextVoid=NULL;
-}    
-/*-------------------------------------------------------------------------------------------------------------------------
--------------------------------------------------------------------------------------------------------------------------*/
-#define AMR_PACKET 32
-uint8_t ADM_AudiocodecAMR::run(uint8_t *inptr, uint32_t nbIn, float *outptr, uint32_t *nbOut)
-{
-int out;
-int pout=0;
-int16_t *run16;
-
-
-        *nbOut=0;
-        // Shrink
-        if(_head && (_tail+nbIn)*3>ADM_AMR_BUFFER*2)
-        {
-            memmove(_buffer,_buffer+_head,_tail-_head);
-            _tail-=_head;
-            _head=0;
-        }
-        //
-        ADM_assert(nbIn+_tail<ADM_AMR_BUFFER);
-        memcpy(_buffer+_tail,inptr,nbIn);
-        _tail+=nbIn;
-        while(_tail-_head>AMR_PACKET)
-        {
-          out=avcodec_decode_audio2(_context,(int16_t *)scratchPad,
-                                   &pout,_buffer+_head,_tail-_head);
-                
-                if(out<0)
-                {
-                        printf( " *** AMR decoding error ***\n");
-                        _head+=1; // Try skipping some bytes
-                        continue;
-                }
-            
-                _head+=out; // consumed bytes
-                pout>>=1;
-                *nbOut+=pout;
-                run16=(int16_t *)scratchPad;
-                for(int i=0;i<pout;i++)
-                {
-                  *outptr++=((float)run16[i])/32767.;
-                }
-        }
-        
-
-        return 1;
-}
-#endif
 //---

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/amr.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/amr.c	2008-03-16 17:53:08 UTC (rev 3901)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/amr.c	2008-03-16 17:53:12 UTC (rev 3902)
@@ -56,10 +56,9 @@
  */
  /* MEANX */
 #include "config.h"
-#ifdef USE_AMR_NB
+#if 0 //def USE_AMR_NB
  /* MEANX */
 
-#include "ADM_libraries/ADM_libwrapper/libwrapper_global.h"
 #include "avcodec.h"
 
 #ifdef CONFIG_AMR_NB_FIXED

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp	2008-03-16 17:53:08 UTC (rev 3901)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp	2008-03-16 17:53:12 UTC (rev 3902)
@@ -90,7 +90,7 @@
 #ifdef USE_AFTEN
         aften=1;
 #endif
-#ifdef USE_AMR_NB
+#if 0 //def USE_AMR_NB
 	if (amrnb->isAvailable())
 		libamrnb=1;
 #endif

Added: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_amrnb/ADM_ad_amrnb.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_amrnb/ADM_ad_amrnb.cpp	2008-03-16 17:53:08 UTC (rev 3901)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_amrnb/ADM_ad_amrnb.cpp	2008-03-16 17:53:12 UTC (rev 3902)
@@ -0,0 +1,126 @@
+/***************************************************************************
+                          ADM_ad_amrnb.cpp  -  description
+                             -------------------
+    begin                : Fri May 31 2002
+    copyright            : (C) 2002 by mean/Gruntster
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include "ADM_default.h"
+#include "ADM_ad_plugin.h"
+
+extern "C" {
+#include "amrnb/typedef.h"
+#include "amrnb/interf_dec.h"
+};
+
+#define ADM_AMR_BUFFER (16*1024) // 16 kB internal
+class ADM_AudiocodecAmrNb : public     ADM_Audiocodec
+{
+	protected:
+		void *state;
+		uint8_t  _buffer[ ADM_AMR_BUFFER];
+		uint32_t _head,_tail;
+
+	public:
+		ADM_AudiocodecAmrNb(uint32_t fourcc, WAVHeader *info,uint32_t extraLength,uint8_t *extraDatab);
+		virtual	~ADM_AudiocodecAmrNb() ;
+		virtual	uint8_t beginDecompress(void) ;
+		virtual	uint8_t endDecompress(void);
+		virtual	uint8_t run(uint8_t *inptr, uint32_t nbIn, float *outptr, uint32_t *nbOut);
+		virtual	uint8_t isCompressed(void) {return 1;}
+		virtual	uint8_t isDecompressable(void) {return 1;}
+};
+// Supported formats + declare our plugin
+//*******************************************************
+   static  uint32_t Formats[]={WAV_AMRNB};
+   DECLARE_AUDIO_DECODER(ADM_AudiocodecAmrNb,						// Class
+		   	0,0,1, 												// Major, minor,patch 
+		   	Formats, 											// Supported formats
+		   	"LibAC3 decoder plugin for avidemux (c) Mean/Gruntster\n"); 	// Desc
+   //********************************************************
+
+   ///************************************************
+     uint8_t ADM_AudiocodecAmrNb::beginDecompress( void ) 
+      {
+               _tail=_head=0;
+               return 1;
+      };
+      uint8_t ADM_AudiocodecAmrNb::endDecompress( void ) 
+      {
+               _tail=_head=0;
+               return 1;
+      };
+  /**
+   *  \fn ADM_AudiocodecAmrNb
+   *  \brief 
+   */
+   
+ADM_AudiocodecAmrNb::ADM_AudiocodecAmrNb( uint32_t fourcc, WAVHeader *info,uint32_t extraLength,uint8_t *extraData)
+		:   ADM_Audiocodec(fourcc)
+{
+      state=Decoder_Interface_init();
+      _wavHeader = info;
+      ADM_assert(_wavHeader);
+}
+/**
+ * 	\fn ~ADM_AudiocodecAmrNb
+ *  \brief 
+ */
+ADM_AudiocodecAmrNb::~ADM_AudiocodecAmrNb( )
+{
+    if(state)
+    {
+        Decoder_Interface_exit(state);
+        state=NULL;
+    }
+}
+/**
+ * 	\fn run
+ *  \brief Decode the incoming datas
+ */
+
+uint8_t ADM_AudiocodecAmrNb::run(uint8_t *inptr, uint32_t nbIn, float *outptr,   uint32_t *nbOut)
+{
+#define SAMPLE_PER_FRAME 160
+	
+	static const short block_size[16]={ 12, 13, 15, 17, 19, 20, 26, 31, 5, 0, 0, 0, 0, 0, 0, 0 };
+	int16_t decodeBuffer[SAMPLE_PER_FRAME];
+	uint8_t *buf=inptr;
+	*nbOut=0;
+again:	
+	while(nbIn)
+	{
+		int dec_mode,packet_size;
+	    dec_mode = (buf[0] >> 3) & 0x000F;
+	    
+	    packet_size = block_size[dec_mode]+1;
+	    if(packet_size>nbIn)
+	    {
+	    	printf("Packet size %u, available data %u\n",packet_size,nbIn);
+	    	return 1;
+	    }
+        Decoder_Interface_Decode(state,buf,decodeBuffer,0);
+        // int to float
+        int16_t *in=decodeBuffer;
+        for (int i = 0; i < SAMPLE_PER_FRAME; i++) 
+        {
+        	*(outptr++) = (float)*in / 32768;
+        	in++;
+        }
+        //
+        *nbOut+=SAMPLE_PER_FRAME;
+
+        buf+=packet_size;
+        nbIn-=packet_size;
+	}
+    return 1; 
+}

Added: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_amrnb/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_amrnb/CMakeLists.txt	2008-03-16 17:53:08 UTC (rev 3901)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_amrnb/CMakeLists.txt	2008-03-16 17:53:12 UTC (rev 3902)
@@ -0,0 +1,41 @@
+#
+MACRO(checkAMRNB)
+OPTION(AMRNB "" ON)
+
+MESSAGE(STATUS "Checking for amrnb")
+MESSAGE(STATUS "******************")
+
+IF (AMRNB)
+	
+	FIND_HEADER_AND_LIB(AMRNB amrnb/interf_dec.h amrnb GP3Decoder_Interface_Decode)
+	
+	PRINT_LIBRARY_INFO("amrnb" AMRNB_FOUND "${AMRNB_INCLUDE_DIR}" "${AMRNB_LIBRARY_DIR}")
+
+	IF (AMRNB_FOUND)
+		SET(USE_AMR_NB 1)
+		SET(CONFIG_AMR_NB 1)
+	ENDIF (AMRNB_FOUND)
+ELSE (AMRNB)
+	MESSAGE("${MSG_DISABLE_OPTION}")
+ENDIF (AMRNB)
+
+MESSAGE("")
+ENDMACRO(checkAMRNB)
+
+
+# AMRNB decoder
+checkAMRNB()
+
+IF (AMRNB_FOUND)
+	INCLUDE(ad_plugin)
+	
+	SET(ADM_ad_amrnb_SRCS ADM_ad_amrnb.cpp)
+
+	ADD_LIBRARY(ADM_ad_amrnb SHARED ${ADM_ad_amrnb_SRCS})
+	TARGET_LINK_LIBRARIES(ADM_ad_amrnb ${AMRNB_LIBRARY_DIR})
+
+	ADD_TARGET_CFLAGS(ADM_ad_amrnb "-I${AMRNB_INCLUDE_DIR}")
+
+	INIT_AUDIO_PLUGIN(ADM_ad_amrnb)
+	INSTALL_AUDIODECODER(ADM_ad_amrnb)
+ENDIF (AMRNB_FOUND)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/CMakeLists.txt	2008-03-16 17:53:08 UTC (rev 3901)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/CMakeLists.txt	2008-03-16 17:53:12 UTC (rev 3902)
@@ -3,3 +3,4 @@
 ADD_SUBDIRECTORY(ADM_ad_mad)
 ADD_SUBDIRECTORY(ADM_ad_vorbis)
 ADD_SUBDIRECTORY(ADM_ad_dca)
+ADD_SUBDIRECTORY(ADM_ad_amrnb)



From mean at mail.berlios.de  Sun Mar 16 18:53:18 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 16 Mar 2008 18:53:18 +0100
Subject: [Avidemux-svn-commit] r3903 - in
	branches/avidemux_2.5_branch_gruntster/avidemux:
	ADM_audiocodec ADM_libraries/ADM_ffmpeg/ADM_lavformat
	plugins/ADM_audiodecoder/ADM_ad_amrnb
Message-ID: <200803161753.m2GHrIRO016930@sheep.berlios.de>

Author: mean
Date: 2008-03-16 18:53:14 +0100 (Sun, 16 Mar 2008)
New Revision: 3903

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_pluginLoad.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/wav.c
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_amrnb/ADM_ad_amrnb.cpp
Log:
[Merge] Fix wav.c unresolved, name for amrnb plugin, display plugin name


Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_pluginLoad.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_pluginLoad.cpp	2008-03-16 17:53:12 UTC (rev 3902)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_pluginLoad.cpp	2008-03-16 17:53:14 UTC (rev 3903)
@@ -81,7 +81,8 @@
 	 blank.name=ADM_strdup(ADM_GetFileName(file));
 	 desc=blank.getInfo();
 	 // Print out stuff
-	 printf("[ADM_ad_plugin] Plugin loaded version %d.%d.%d, desc : %s\n",major,minor,patch,desc);
+	 printf("[ADM_ad_plugin] Plugin loaded version %d.%d.%d, name %s,desc : %s ",
+			 		major,minor,patch,blank.name,desc);
 	 
 	 //
 	 {

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/wav.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/wav.c	2008-03-16 17:53:12 UTC (rev 3902)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/wav.c	2008-03-16 17:53:14 UTC (rev 3903)
@@ -135,7 +135,7 @@
         size = 0x7fffffff;
     return size;
 }
-
+#ifdef CONFIG_WAV_DEMUXER //MEANX
 static int wav_probe(AVProbeData *p)
 {
     /* check file header */
@@ -254,7 +254,7 @@
     return pcm_read_seek(s, stream_index, timestamp, flags);
 }
 
-#ifdef CONFIG_WAV_DEMUXER
+// MEANX #ifdef CONFIG_WAV_DEMUXER
 AVInputFormat wav_demuxer = {
     "wav",
     "wav format",

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_amrnb/ADM_ad_amrnb.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_amrnb/ADM_ad_amrnb.cpp	2008-03-16 17:53:12 UTC (rev 3902)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_amrnb/ADM_ad_amrnb.cpp	2008-03-16 17:53:14 UTC (rev 3903)
@@ -45,7 +45,7 @@
    DECLARE_AUDIO_DECODER(ADM_AudiocodecAmrNb,						// Class
 		   	0,0,1, 												// Major, minor,patch 
 		   	Formats, 											// Supported formats
-		   	"LibAC3 decoder plugin for avidemux (c) Mean/Gruntster\n"); 	// Desc
+		   	"LibAMR NB decoder plugin for avidemux (c) Mean/Gruntster\n"); 	// Desc
    //********************************************************
 
    ///************************************************



From mean at mail.berlios.de  Sun Mar 16 19:22:33 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 16 Mar 2008 19:22:33 +0100
Subject: [Avidemux-svn-commit] r3904 -
	branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_avi
Message-ID: <200803161822.m2GIMXJa030302@sheep.berlios.de>

Author: mean
Date: 2008-03-16 19:22:33 +0100 (Sun, 16 Mar 2008)
New Revision: 3904

Modified:
   branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_avi/op_savesmart.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_avi/op_savesmart.hxx
Log:
[AviOuput] Fix smart copy when global headers are used

Modified: branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_avi/op_savesmart.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_avi/op_savesmart.cpp	2008-03-16 17:53:14 UTC (rev 3903)
+++ branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_avi/op_savesmart.cpp	2008-03-16 18:22:33 UTC (rev 3904)
@@ -166,7 +166,7 @@
 	  stopEncoder ();	// Tobias F
 	  delete	    _encoder;
 	  _encoder = NULL;
-	  return writeVideoChunk_copy(frame);
+	  return writeVideoChunk_copy(frame,1);
 	}
 	// Else encode it ....
 	//1-Read it
@@ -183,7 +183,7 @@
 	return writter->saveVideoFrame (bitstream.len, _videoFlag, vbuffer);
 }
 //_________________________________________________________
-uint8_t GenericAviSaveSmart::writeVideoChunk_copy (uint32_t frame)
+uint8_t GenericAviSaveSmart::writeVideoChunk_copy (uint32_t frame,uint32_t first)
 {
   // Check flags and seq
   uint32_t myseq=0;
@@ -292,6 +292,30 @@
         _videoFlag=img.flags;
 	
 	encoding_gui->setFrame(frame-frameStart,img.dataLength,0,frametogo);
+	if(first)
+	{
+		ADM_assert(_videoFlag == AVI_KEY_FRAME);
+		// Grab extra data ..
+			uint8_t *extraData;
+			uint32_t extraLen;
+			uint8_t r;
+   			video_body->getExtraHeaderData(&extraLen,&extraData);
+			if(extraLen)
+			{
+			//********************************************************************
+			// If we have global headers we have to duplicate the old headers as they were replaced
+			// by the new headers from the section we re-encoded
+			//********************************************************************
+				printf("[Smart] Duplicating vop header (%d bytes)\n",extraLen);
+				uint8_t *buffer=new uint8_t[extraLen+img.dataLength];
+				memcpy(buffer,extraData,extraLen);
+				memcpy(buffer+extraLen,img.data,img.dataLength);
+				r=writter->saveVideoFrame (img.dataLength+extraLen, img.flags, buffer);;
+				delete [] buffer;
+				return r;
+				
+			}
+	}
 	return writter->saveVideoFrame (img.dataLength, img.flags, img.data);;
 }
 //_________________________________________________________

Modified: branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_avi/op_savesmart.hxx
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_avi/op_savesmart.hxx	2008-03-16 17:53:14 UTC (rev 3903)
+++ branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_avi/op_savesmart.hxx	2008-03-16 18:22:33 UTC (rev 3904)
@@ -32,7 +32,7 @@
 	virtual 		uint8_t 	setupVideo( char *name  );
  	virtual 		uint8_t 	writeVideoChunk(uint32_t frame );
 				uint8_t		 writeVideoChunk_recode (uint32_t frame);
-				uint8_t		 writeVideoChunk_copy (uint32_t frame);
+				uint8_t		 writeVideoChunk_copy (uint32_t frame,uint32_t first=0);
               			encoder 	*_encoder;
               			uint8_t 	_cqReenc          ;
 				



From gruntster at mail.berlios.de  Mon Mar 17 12:26:18 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Mon, 17 Mar 2008 12:26:18 +0100
Subject: [Avidemux-svn-commit] r3905 - in
	branches/avidemux_2.5_branch_gruntster: avidemux/ADM_core/src cmake
Message-ID: <200803171126.m2HBQIiv005876@sheep.berlios.de>

Author: gruntster
Date: 2008-03-17 12:26:15 +0100 (Mon, 17 Mar 2008)
New Revision: 3905

Added:
   branches/avidemux_2.5_branch_gruntster/cmake/FindThreads.cmake
Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/cmake/admCheckRequiredLibs.cmake
Log:
[CMake] detect pthreads for Win32

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/CMakeLists.txt	2008-03-16 18:22:33 UTC (rev 3904)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/CMakeLists.txt	2008-03-17 11:26:15 UTC (rev 3905)
@@ -6,7 +6,8 @@
 ADD_TARGET_DEFINITIONS(ADM_core ADM_DEBUG FIND_LEAKS)
 
 IF (MINGW)
-	TARGET_LINK_LIBRARIES(ADM_core pthreadGC2 imagehlp wsock32)
+	TARGET_LINK_LIBRARIES(ADM_core "${PTHREAD_LIBRARIES}" imagehlp wsock32)
+	ADD_TARGET_CFLAGS(ADM_core "-I${PTHREAD_INCLUDE_DIR}")
 ELSEIF (APPLE)
 	ADD_TARGET_LDFLAGS(ADM_core "-framework Carbon")
 ENDIF (MINGW)

Added: branches/avidemux_2.5_branch_gruntster/cmake/FindThreads.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/FindThreads.cmake	2008-03-16 18:22:33 UTC (rev 3904)
+++ branches/avidemux_2.5_branch_gruntster/cmake/FindThreads.cmake	2008-03-17 11:26:15 UTC (rev 3905)
@@ -0,0 +1,64 @@
+# - This module determines the thread library of the system.
+# The following variables are set
+#  PTHREAD_FOUND - system has pthreads
+#  PTHREAD_INCLUDE_DIR - the pthreads include directory
+#  PTHREAD_LIBRARIES - the libraries needed to use pthreads
+
+INCLUDE (CheckIncludeFile)
+INCLUDE (CheckIncludeFiles)
+INCLUDE (CheckLibraryExists)
+
+# Do we have pthreads?
+FIND_PATH(PTHREAD_INCLUDE_DIR pthread.h)
+
+IF(PTHREAD_INCLUDE_DIR)
+	# We have pthread.h
+	# Let's check for the library now.
+
+	# Do we have -lpthreads
+	FIND_LIBRARY(PTHREAD_LIBRARIES "pthreads")
+
+	IF (NOT PTHREAD_LIBRARIES)
+		FIND_LIBRARY(PTHREAD_LIBRARIES "pthread")
+	ENDIF (NOT PTHREAD_LIBRARIES)
+
+	IF (NOT PTHREAD_LIBRARIES AND WIN32)
+		FIND_LIBRARY(PTHREAD_LIBRARIES "pthreadGC2")
+	ENDIF (NOT PTHREAD_LIBRARIES AND WIN32)
+
+	IF (NOT PTHREAD_LIBRARIES)
+		MESSAGE(STATUS "Check if compiler accepts -pthread")
+
+		TRY_RUN(THREADS_PTHREAD_ARG THREADS_HAVE_PTHREAD_ARG
+			${CMAKE_BINARY_DIR}
+			${CMAKE_ROOT}/Modules/CheckForPthreads.c
+			CMAKE_FLAGS -DLINK_LIBRARIES:STRING=-pthread
+			OUTPUT_VARIABLE OUTPUT)
+
+		IF (THREADS_HAVE_PTHREAD_ARG)
+			IF(THREADS_PTHREAD_ARG MATCHES "^2$")
+				MESSAGE(STATUS "Check if compiler accepts -pthread - yes")
+			ELSE (THREADS_PTHREAD_ARG MATCHES "^2$")
+				MESSAGE(STATUS "Check if compiler accepts -pthread - no")
+
+				FILE(APPEND 
+					${CMAKE_BINARY_DIR}${CMAKE_FILES_DIRECTORY}/CMakeError.log 
+					"Determining if compiler accepts -pthread returned ${THREADS_PTHREAD_ARG} instead of 2. The compiler had the following output:\n${OUTPUT}\n\n")
+			ENDIF (THREADS_PTHREAD_ARG MATCHES "^2$")
+		ELSE (THREADS_HAVE_PTHREAD_ARG)
+			MESSAGE(STATUS "Check if compiler accepts -pthread - no")
+
+			FILE(APPEND 
+				${CMAKE_BINARY_DIR}${CMAKE_FILES_DIRECTORY}/CMakeError.log 
+				"Determining if compiler accepts -pthread failed with the following output:\n${OUTPUT}\n\n")
+		ENDIF (THREADS_HAVE_PTHREAD_ARG)
+
+		IF (THREADS_HAVE_PTHREAD_ARG)
+			SET(PTHREAD_LIBRARIES "-pthread")
+		ENDIF (THREADS_HAVE_PTHREAD_ARG)
+	ENDIF (NOT PTHREAD_LIBRARIES)
+
+	IF (PTHREAD_LIBRARIES)
+		SET(PTHREAD_FOUND 1)
+	ENDIF (PTHREAD_LIBRARIES)
+ENDIF(PTHREAD_INCLUDE_DIR)
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/cmake/admCheckRequiredLibs.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admCheckRequiredLibs.cmake	2008-03-16 18:22:33 UTC (rev 3904)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admCheckRequiredLibs.cmake	2008-03-17 11:26:15 UTC (rev 3905)
@@ -47,4 +47,17 @@
 
 SET(PNG_CFLAGS ${PNG_CFLAGS} ${PNG_DEFINITIONS})
 SET(USE_PNG 1)
-MESSAGE("")
\ No newline at end of file
+MESSAGE("")
+
+########################################
+# pthreads
+########################################
+IF (WIN32)
+	MESSAGE(STATUS "Checking for pthreads")
+	MESSAGE(STATUS "*********************")
+
+	FIND_PACKAGE(Threads)
+	PRINT_LIBRARY_INFO("pthreads" PTHREAD_FOUND "${PTHREAD_INCLUDE_DIR}" "${PTHREAD_LIBRARIES}" FATAL_ERROR)
+
+	MESSAGE("")
+ENDIF (WIN32)
\ No newline at end of file



From gruntster at mail.berlios.de  Mon Mar 17 12:55:57 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Mon, 17 Mar 2008 12:55:57 +0100
Subject: [Avidemux-svn-commit] r3906 - in
	branches/avidemux_2.5_branch_gruntster: . avidemux
	avidemux/ADM_audiocodec avidemux/ADM_userInterfaces/ADM_commonUI
	avidemux/plugins/ADM_audiodecoder/ADM_ad_amrnb cmake
Message-ID: <200803171155.m2HBtvYf012134@sheep.berlios.de>

Author: gruntster
Date: 2008-03-17 12:55:49 +0100 (Mon, 17 Mar 2008)
New Revision: 3906

Modified:
   branches/avidemux_2.5_branch_gruntster/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_amrnb/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/cmake/admCheckAudioCodecLibs.cmake
   branches/avidemux_2.5_branch_gruntster/cmake/config.h.cmake
Log:
[CMake] remove remnants of Win32 late binding

Modified: branches/avidemux_2.5_branch_gruntster/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/CMakeLists.txt	2008-03-17 11:26:15 UTC (rev 3905)
+++ branches/avidemux_2.5_branch_gruntster/CMakeLists.txt	2008-03-17 11:55:49 UTC (rev 3906)
@@ -23,12 +23,7 @@
 # Global options
 ########################################
 OPTION(VERBOSE "" OFF)
-OPTION(LATE_BINDING "" OFF)
 
-IF (LATE_BINDING)
-	SET(USE_LATE_BINDING 1)
-ENDIF (LATE_BINDING)
-
 IF (NOT CMAKE_BUILD_TYPE)
 	SET(CMAKE_BUILD_TYPE "Release")
 ENDIF (NOT CMAKE_BUILD_TYPE)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/CMakeLists.txt	2008-03-17 11:26:15 UTC (rev 3905)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/CMakeLists.txt	2008-03-17 11:55:49 UTC (rev 3906)
@@ -2,9 +2,4 @@
 	ADM_8bits.cpp  ADM_codecimaadpcm.cpp  ADM_codecmsadpcm.cpp  ADM_codeculaw.cpp  ADM_codecwma.cpp  ADM_lpcm.cpp
 	ADM_audiocodec.cpp  ADM_codecwav.cpp  ADM_pluginLoad.cpp)
 
-ADD_ADM_LIB_ALL_TARGETS(ADM_audiocodec ${ADM_audiocodec_SRCS})
-
-IF (USE_AMR_NB)
-	ADD_SOURCE_CFLAGS(ADM_audiocodec.cpp -I${AMRNB_INCLUDE_DIR})
-ENDIF (USE_AMR_NB)
-
+ADD_ADM_LIB_ALL_TARGETS(ADM_audiocodec ${ADM_audiocodec_SRCS})
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/CMakeLists.txt	2008-03-17 11:26:15 UTC (rev 3905)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/CMakeLists.txt	2008-03-17 11:55:49 UTC (rev 3906)
@@ -15,12 +15,4 @@
 
 ADD_ADM_LIB_ALL_TARGETS(${ADM_LIB} ${${ADM_LIB}_SRCS})
 
-SDLify(GUI_sdlRender.cpp)
-
-IF (USE_AMR_NB)
-	ADD_SOURCE_CFLAGS(DIA_builtin.cpp -I${AMRNB_INCLUDE_DIR})
-ENDIF (USE_AMR_NB)
-
-IF (USE_LIBDCA)
-	ADD_SOURCE_CFLAGS(DIA_builtin.cpp -I${LIBDCA_INCLUDE_DIR})
-ENDIF (USE_LIBDCA)
+SDLify(GUI_sdlRender.cpp)
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt	2008-03-17 11:26:15 UTC (rev 3905)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt	2008-03-17 11:55:49 UTC (rev 3906)
@@ -144,14 +144,6 @@
 SDLify(main.cpp)
 ADD_SOURCE_CFLAGS(main.cpp "-DADM_SUBVERSION=${ADM_SUBVERSION}")
 
-IF (USE_AMR_NB)
-	ADD_SOURCE_CFLAGS(main.cpp -I${AMRNB_INCLUDE_DIR})
-ENDIF (USE_AMR_NB)
-
-IF (USE_LIBDCA)
-	ADD_SOURCE_CFLAGS(main.cpp -I${LIBDCA_INCLUDE_DIR})
-ENDIF (USE_LIBDCA)
-
 ########################################
 # Compile and link general subdirs
 ########################################
@@ -417,16 +409,6 @@
 	ADD_LIB_ALL_TARGETS("${JACK_LIBRARY_DIR}")
 ENDIF (USE_JACK)
 
-# amrnb
-IF (USE_AMR_NB AND NOT USE_LATE_BINDING)
-	ADD_LIB_ALL_TARGETS("${AMRNB_LIBRARY_DIR}")
-ENDIF (USE_AMR_NB AND NOT USE_LATE_BINDING)
-
-# libdca
-IF (USE_LIBDCA AND NOT USE_LATE_BINDING)
-	ADD_LIB_ALL_TARGETS("${LIBDCA_LIBRARY_DIR}")
-ENDIF (USE_LIBDCA AND NOT USE_LATE_BINDING)
-
 # LAME
 IF (HAVE_LIBMP3LAME)
 	ADD_LIB_ALL_TARGETS("${LAME_LIBRARY_DIR}")

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_amrnb/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_amrnb/CMakeLists.txt	2008-03-17 11:26:15 UTC (rev 3905)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_amrnb/CMakeLists.txt	2008-03-17 11:55:49 UTC (rev 3906)
@@ -1,25 +1,17 @@
-#
 MACRO(checkAMRNB)
-OPTION(AMRNB "" ON)
+	OPTION(AMRNB "" ON)
 
-MESSAGE(STATUS "Checking for amrnb")
-MESSAGE(STATUS "******************")
+	MESSAGE(STATUS "Checking for amrnb")
+	MESSAGE(STATUS "******************")
 
-IF (AMRNB)
-	
-	FIND_HEADER_AND_LIB(AMRNB amrnb/interf_dec.h amrnb GP3Decoder_Interface_Decode)
-	
-	PRINT_LIBRARY_INFO("amrnb" AMRNB_FOUND "${AMRNB_INCLUDE_DIR}" "${AMRNB_LIBRARY_DIR}")
+	IF (AMRNB)
+		FIND_HEADER_AND_LIB(AMRNB amrnb/interf_dec.h amrnb GP3Decoder_Interface_Decode)
+		PRINT_LIBRARY_INFO("amrnb" AMRNB_FOUND "${AMRNB_INCLUDE_DIR}" "${AMRNB_LIBRARY_DIR}")
+	ELSE (AMRNB)
+		MESSAGE("${MSG_DISABLE_OPTION}")
+	ENDIF (AMRNB)
 
-	IF (AMRNB_FOUND)
-		SET(USE_AMR_NB 1)
-		SET(CONFIG_AMR_NB 1)
-	ENDIF (AMRNB_FOUND)
-ELSE (AMRNB)
-	MESSAGE("${MSG_DISABLE_OPTION}")
-ENDIF (AMRNB)
-
-MESSAGE("")
+	MESSAGE("")
 ENDMACRO(checkAMRNB)
 
 

Modified: branches/avidemux_2.5_branch_gruntster/cmake/admCheckAudioCodecLibs.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admCheckAudioCodecLibs.cmake	2008-03-17 11:26:15 UTC (rev 3905)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admCheckAudioCodecLibs.cmake	2008-03-17 11:55:49 UTC (rev 3906)
@@ -39,33 +39,6 @@
 MESSAGE("")
 
 ########################################
-# amrnb
-########################################
-OPTION(AMRNB "" ON)
-
-MESSAGE(STATUS "Checking for amrnb")
-MESSAGE(STATUS "******************")
-
-IF (AMRNB)
-	IF (LATE_BINDING)
-		FIND_HEADER_AND_LIB(AMRNB amrnb/interf_dec.h)
-	ELSE (LATE_BINDING)
-		FIND_HEADER_AND_LIB(AMRNB amrnb/interf_dec.h amrnb GP3Decoder_Interface_Decode)
-	ENDIF (LATE_BINDING)
-
-	PRINT_LIBRARY_INFO("amrnb" AMRNB_FOUND "${AMRNB_INCLUDE_DIR}" "${AMRNB_LIBRARY_DIR}")
-
-	IF (AMRNB_FOUND)
-		SET(USE_AMR_NB 1)
-		SET(CONFIG_AMR_NB 1)
-	ENDIF (AMRNB_FOUND)
-ELSE (AMRNB)
-	MESSAGE("${MSG_DISABLE_OPTION}")
-ENDIF (AMRNB)
-
-MESSAGE("")
-
-########################################
 # LAME
 ########################################
 OPTION(LAME "" ON)

Modified: branches/avidemux_2.5_branch_gruntster/cmake/config.h.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/config.h.cmake	2008-03-17 11:26:15 UTC (rev 3905)
+++ branches/avidemux_2.5_branch_gruntster/cmake/config.h.cmake	2008-03-17 11:55:49 UTC (rev 3906)
@@ -18,9 +18,6 @@
 #cmakedefine ALSA_SUPPORT
 #endif
 
-/* AMR_NB */
-#cmakedefine AMR_NB
-
 /* FontConfig detected */
 #cmakedefine HAVE_FONTCONFIG
 
@@ -46,9 +43,6 @@
 #cmakedefine USE_AFTEN_07	// 0.07
 #cmakedefine USE_AFTEN_08	// 0.0.8
 
-/* Tell avidemux to use libamrnb */
-#cmakedefine USE_AMR_NB
-
 #if ${CONFIG_HEADER_TYPE} == ADM_BUILD_GTK || ${CONFIG_HEADER_TYPE} == ADM_BUILD_QT4
 /* aRts detected */
 #cmakedefine USE_ARTS
@@ -74,14 +68,6 @@
 /* FreeType2 detected */
 #cmakedefine USE_FREETYPE
 
-/* use late binding of selected libraries */
-#cmakedefine USE_LATE_BINDING
-
-/* libdca detected */
-#cmakedefine USE_LIBDCA
-#cmakedefine USE_LIBDCA_002
-#cmakedefine USE_LIBDCA_005
-
 /* Libxml2 is available */
 #cmakedefine USE_LIBXML2
 



From gruntster at mail.berlios.de  Tue Mar 18 14:12:13 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Tue, 18 Mar 2008 14:12:13 +0100
Subject: [Avidemux-svn-commit] r3907 - branches/avidemux_2.4_branch
Message-ID: <200803181312.m2IDCDE0019185@sheep.berlios.de>

Author: gruntster
Date: 2008-03-18 14:12:12 +0100 (Tue, 18 Mar 2008)
New Revision: 3907

Modified:
   branches/avidemux_2.4_branch/ConfigureChecks.cmake
Log:
[CMake] improve detection of libiconv

Modified: branches/avidemux_2.4_branch/ConfigureChecks.cmake
===================================================================
--- branches/avidemux_2.4_branch/ConfigureChecks.cmake	2008-03-17 11:55:49 UTC (rev 3906)
+++ branches/avidemux_2.4_branch/ConfigureChecks.cmake	2008-03-18 13:12:12 UTC (rev 3907)
@@ -410,7 +410,7 @@
 ENDIF (NOT HAVE_ICONV_H)
 
 # need libiconv ?
-CHECK_LIBRARY_EXISTS(iconv libiconv "" LINK_WITH_ICONV)
+FIND_LIBRARY(LINK_WITH_ICONV NAMES iconv $ENV{CXXFLAGS})
 
 IF (LINK_WITH_ICONV)
 	SET(NEED_LIBICONV 1)



From gruntster at mail.berlios.de  Tue Mar 18 14:13:54 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Tue, 18 Mar 2008 14:13:54 +0100
Subject: [Avidemux-svn-commit] r3908 - in
	branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces:
	ADM_GTK/ADM_gui2 ADM_QT4/ADM_gui ADM_commonUI
Message-ID: <200803181313.m2IDDsUF019653@sheep.berlios.de>

Author: gruntster
Date: 2008-03-18 14:13:51 +0100 (Tue, 18 Mar 2008)
New Revision: 3908

Modified:
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_gtkRender.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/T_preview.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/GUI_sdlRender.cpp
Log:
[SDL] fix zoom when using SDL

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_gtkRender.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_gtkRender.cpp	2008-03-18 13:12:12 UTC (rev 3907)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_gtkRender.cpp	2008-03-18 13:13:51 UTC (rev 3908)
@@ -111,22 +111,23 @@
 #ifdef ADM_WIN32
 		xinfo->display = (void*)GDK_WINDOW_HWND(widget->window);
 #elif defined(__APPLE__)
+		xinfo->display = 0;
+		xinfo->window = getMainNSWindow();
+#else
+		xinfo->window = GDK_WINDOW_XWINDOW(widget->window);
+		xinfo->display = GDK_WINDOW_XDISPLAY(win);
+#endif
+
 		int windowWidth, windowHeight;
 		int x, y;
 
 		gdk_drawable_get_size(win, &windowWidth, &windowHeight);
 		gdk_window_get_position(widget->window, &x, &y);
 
-		xinfo->display = 0;
-		xinfo->window = getMainNSWindow();
 		xinfo->x = x;
 		xinfo->y = windowHeight - (y + lastH);
 		xinfo->width = lastW;
 		xinfo->height = lastH;
-#else
-		xinfo->window = GDK_WINDOW_XWINDOW(widget->window);
-		xinfo->display = GDK_WINDOW_XDISPLAY(win);
-#endif
 }
 
 #ifdef ENABLE_WINDOW_SIZING_HACK

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/T_preview.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/T_preview.cpp	2008-03-18 13:12:12 UTC (rev 3907)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/T_preview.cpp	2008-03-18 13:13:51 UTC (rev 3908)
@@ -188,22 +188,23 @@
 */
 void UI_getWindowInfo(void *draw, GUI_WindowInfo *xinfo)
 {
+	QWidget* widget = videoWindow->parentWidget();
+
 #if defined(ADM_WIN32)
 	xinfo->display=videoWindow->winId();
 #elif defined(__APPLE__)
-	QWidget* widget = videoWindow->parentWidget();
-
 	xinfo->display = HIViewGetWindow(HIViewRef(widget->winId()));
 	xinfo->window = 0;
+#else
+    const QX11Info &info=videoWindow->x11Info();
+    xinfo->display=info.display();
+    xinfo->window=videoWindow->winId();
+#endif
+
 	xinfo->x = widget->x();
 	xinfo->y = widget->parentWidget()->height() - (widget->y() + displayH);
 	xinfo->width = displayW;
 	xinfo->height = displayH;
-#else
-    const QX11Info &info=videoWindow->x11Info();
-    xinfo->display=info.display();
-    xinfo->window=videoWindow->winId();
-#endif 
 }
 
 

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/GUI_sdlRender.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/GUI_sdlRender.cpp	2008-03-18 13:12:12 UTC (rev 3907)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/GUI_sdlRender.cpp	2008-03-18 13:13:51 UTC (rev 3908)
@@ -188,13 +188,11 @@
 		// Create Cocoa view and attach to Carbon window using custom Objective-C function.
 		// It's a retarded way of doing things but that's what Apple has imposed...
 		initSdlCocoaView(parent, window->x, window->y, window->width, window->height, (window->display != NULL));
+#endif
 
-	// SDL will resize our Cocoa window to width and height passed to SetVideoMode.
+	// SDL will resize our window to width and height passed to SetVideoMode.
 	// This is fine until we use zoomed views so pass window dimensions instead.
 	sdl_display= SDL_SetVideoMode(window->width, window->height, bpp, flags);
-#else
-	sdl_display= SDL_SetVideoMode( w, h,  bpp, flags );
-#endif
 
     if (!sdl_display)
     {



From gruntster at mail.berlios.de  Tue Mar 18 19:11:08 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Tue, 18 Mar 2008 19:11:08 +0100
Subject: [Avidemux-svn-commit] r3909 - in
	branches/avidemux_2.5_branch_gruntster:
	avidemux/ADM_outputs/oplug_avi
	avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2
	avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui
	avidemux/ADM_userInterfaces/ADM_commonUI po
Message-ID: <200803181811.m2IIB8nb003537@sheep.berlios.de>

Author: gruntster
Date: 2008-03-18 19:11:00 +0100 (Tue, 18 Mar 2008)
New Revision: 3909

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_savesmart.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_savesmart.hxx
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_gtkRender.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/T_preview.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/GUI_sdlRender.cpp
   branches/avidemux_2.5_branch_gruntster/po/avidemux_it.ts
   branches/avidemux_2.5_branch_gruntster/po/el.po
   branches/avidemux_2.5_branch_gruntster/po/it.po
Log:
[Merge] integrate changes from 2.4 branch (r3908)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_savesmart.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_savesmart.cpp	2008-03-18 13:13:51 UTC (rev 3908)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_savesmart.cpp	2008-03-18 18:11:00 UTC (rev 3909)
@@ -156,7 +156,7 @@
 	  stopEncoder ();	// Tobias F
 	  delete	    _encoder;
 	  _encoder = NULL;
-	  return writeVideoChunk_copy(frame);
+	  return writeVideoChunk_copy(frame,1);
 	}
 	// Else encode it ....
 	//1-Read it
@@ -173,7 +173,7 @@
 	return writter->saveVideoFrame (bitstream.len, _videoFlag, vbuffer);
 }
 //_________________________________________________________
-uint8_t GenericAviSaveSmart::writeVideoChunk_copy (uint32_t frame)
+uint8_t GenericAviSaveSmart::writeVideoChunk_copy (uint32_t frame,uint32_t first)
 {
   // Check flags and seq
   uint32_t myseq=0;
@@ -282,6 +282,30 @@
         _videoFlag=img.flags;
 	
 	encoding_gui->setFrame(frame-frameStart,img.dataLength,0,frametogo);
+	if(first)
+	{
+		ADM_assert(_videoFlag == AVI_KEY_FRAME);
+		// Grab extra data ..
+			uint8_t *extraData;
+			uint32_t extraLen;
+			uint8_t r;
+   			video_body->getExtraHeaderData(&extraLen,&extraData);
+			if(extraLen)
+			{
+			//********************************************************************
+			// If we have global headers we have to duplicate the old headers as they were replaced
+			// by the new headers from the section we re-encoded
+			//********************************************************************
+				printf("[Smart] Duplicating vop header (%d bytes)\n",extraLen);
+				uint8_t *buffer=new uint8_t[extraLen+img.dataLength];
+				memcpy(buffer,extraData,extraLen);
+				memcpy(buffer+extraLen,img.data,img.dataLength);
+				r=writter->saveVideoFrame (img.dataLength+extraLen, img.flags, buffer);;
+				delete [] buffer;
+				return r;
+				
+			}
+	}
 	return writter->saveVideoFrame (img.dataLength, img.flags, img.data);;
 }
 //_________________________________________________________

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_savesmart.hxx
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_savesmart.hxx	2008-03-18 13:13:51 UTC (rev 3908)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_savesmart.hxx	2008-03-18 18:11:00 UTC (rev 3909)
@@ -32,7 +32,7 @@
 	virtual 		uint8_t 	setupVideo( char *name  );
  	virtual 		uint8_t 	writeVideoChunk(uint32_t frame );
 				uint8_t		 writeVideoChunk_recode (uint32_t frame);
-				uint8_t		 writeVideoChunk_copy (uint32_t frame);
+				uint8_t		 writeVideoChunk_copy (uint32_t frame,uint32_t first=0);
               			encoder 	*_encoder;
               			uint8_t 	_cqReenc          ;
 				

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_gtkRender.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_gtkRender.cpp	2008-03-18 13:13:51 UTC (rev 3908)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_gtkRender.cpp	2008-03-18 18:11:00 UTC (rev 3909)
@@ -40,6 +40,7 @@
 
 void GUI_gtk_grow_off(int onff);
 
+extern GtkWidget *guiRootWindow;
 extern GtkWidget *getDrawWidget(void);
 extern uint8_t UI_getPhysicalScreenSize(void* window, uint32_t *w, uint32_t *h);
 
@@ -107,22 +108,23 @@
 #ifdef __WIN32
 		xinfo->display = (void*)GDK_WINDOW_HWND(widget->window);
 #elif defined(__APPLE__)
+		xinfo->display = 0;
+		xinfo->window = getMainNSWindow();
+#else
+		xinfo->window = GDK_WINDOW_XWINDOW(widget->window);
+		xinfo->display = GDK_WINDOW_XDISPLAY(win);
+#endif
+
 		int windowWidth, windowHeight;
 		int x, y;
 
 		gdk_drawable_get_size(win, &windowWidth, &windowHeight);
 		gdk_window_get_position(widget->window, &x, &y);
 
-		xinfo->display = 0;
-		xinfo->window = getMainNSWindow();
 		xinfo->x = x;
 		xinfo->y = windowHeight - (y + lastH);
 		xinfo->width = lastW;
 		xinfo->height = lastH;
-#else
-		xinfo->window = GDK_WINDOW_XWINDOW(widget->window);
-		xinfo->display = GDK_WINDOW_XDISPLAY(win);
-#endif
 }
 
 #ifdef ENABLE_WINDOW_SIZING_HACK
@@ -224,9 +226,16 @@
 {
 	int winWidth, winHeight, widgetWidth, widgetHeight;
 	GdkScreen *screen = gdk_screen_get_default();
-	int monitorNo = gdk_screen_get_monitor_at_window(screen, GTK_WIDGET(window->transient_parent)->window);
 	GdkRectangle rect;
+	GtkWidget *referenceWidget;
 
+	if (window->transient_parent == NULL)
+		referenceWidget = guiRootWindow;
+	else
+		referenceWidget = GTK_WIDGET(window->transient_parent);
+
+	int monitorNo = gdk_screen_get_monitor_at_window(screen, referenceWidget->window);
+
 	gdk_screen_get_monitor_geometry(screen, monitorNo, &rect);
 	gtk_widget_get_size_request((GtkWidget*)canvas, &widgetWidth, &widgetHeight);
 	gtk_window_get_size(window, &winWidth, &winHeight);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/T_preview.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/T_preview.cpp	2008-03-18 13:13:51 UTC (rev 3908)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/T_preview.cpp	2008-03-18 18:11:00 UTC (rev 3909)
@@ -187,22 +187,23 @@
 */
 void UI_getWindowInfo(void *draw, GUI_WindowInfo *xinfo)
 {
+	QWidget* widget = videoWindow->parentWidget();
+
 #if defined(__WIN32)
 	xinfo->display=videoWindow->winId();
 #elif defined(__APPLE__)
-	QWidget* widget = videoWindow->parentWidget();
-
 	xinfo->display = HIViewGetWindow(HIViewRef(widget->winId()));
 	xinfo->window = 0;
+#else
+    const QX11Info &info=videoWindow->x11Info();
+    xinfo->display=info.display();
+    xinfo->window=videoWindow->winId();
+#endif
+
 	xinfo->x = widget->x();
 	xinfo->y = widget->parentWidget()->height() - (widget->y() + displayH);
 	xinfo->width = displayW;
 	xinfo->height = displayH;
-#else
-    const QX11Info &info=videoWindow->x11Info();
-    xinfo->display=info.display();
-    xinfo->window=videoWindow->winId();
-#endif 
 }
 
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/GUI_sdlRender.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/GUI_sdlRender.cpp	2008-03-18 13:13:51 UTC (rev 3908)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/GUI_sdlRender.cpp	2008-03-18 18:11:00 UTC (rev 3909)
@@ -183,13 +183,11 @@
 		// Create Cocoa view and attach to Carbon window using custom Objective-C function.
 		// It's a retarded way of doing things but that's what Apple has imposed...
 		initSdlCocoaView(parent, window->x, window->y, window->width, window->height, (window->display != NULL));
+#endif
 
-	// SDL will resize our Cocoa window to width and height passed to SetVideoMode.
+	// SDL will resize our window to width and height passed to SetVideoMode.
 	// This is fine until we use zoomed views so pass window dimensions instead.
 	sdl_display= SDL_SetVideoMode(window->width, window->height, bpp, flags);
-#else
-	sdl_display= SDL_SetVideoMode( w, h,  bpp, flags );
-#endif
 
     if (!sdl_display)
     {

Modified: branches/avidemux_2.5_branch_gruntster/po/avidemux_it.ts
===================================================================
--- branches/avidemux_2.5_branch_gruntster/po/avidemux_it.ts	2008-03-18 13:13:51 UTC (rev 3908)
+++ branches/avidemux_2.5_branch_gruntster/po/avidemux_it.ts	2008-03-18 18:11:00 UTC (rev 3909)
@@ -1,89 +1,13 @@
 <?xml version="1.0" encoding="utf-8"?>
 <!DOCTYPE TS><TS version="1.1" language="it">
-<defaultcodec></defaultcodec>
 <context>
     <name></name>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="58"/>
-        <source>1  - Extremely Low (Fastest)</source>
-        <translation>1  - Estremamente bassa (pi? veloce)</translation>
-    </message>
-    <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="59"/>
-        <source>2  - Very Low</source>
-        <translation>2  - Molto bassa</translation>
-    </message>
-    <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="60"/>
-        <source>3  - Low</source>
-        <translation>3  - Bassa</translation>
-    </message>
-    <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="61"/>
-        <source>4  - Medium</source>
-        <translation>4  - Media</translation>
-    </message>
-    <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="62"/>
-        <source>5  - High (Default)</source>
-        <translation>5  - Alta (predefinito)</translation>
-    </message>
-    <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="63"/>
-        <source>6  - Very High</source>
-        <translation>6  - Molto alta</translation>
-    </message>
-    <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="64"/>
-        <source>6B - Very High (RDO on Bframes)</source>
-        <translation>6B - Molto alta (RDO sui fotogrammi-B)</translation>
-    </message>
-    <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="65"/>
-        <source>7 - Ultra High</source>
-        <translation>7  - Ultra</translation>
-    </message>
-    <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="66"/>
-        <source>7B - Ultra High (RDO on Bframes)</source>
-        <translation>7B - Ultra (RDO sui fotogrammi-B)</translation>
-    </message>
-    <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="69"/>
-        <source>Partition Decision</source>
-        <translation>Decisione partizione</translation>
-    </message>
-    <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="72"/>
-        <source>Diamond search</source>
-        <translation>Ricerca romboidale</translation>
-    </message>
-    <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="73"/>
-        <source>Hexagonal search</source>
-        <translation>Ricerca esagonale</translation>
-    </message>
-    <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="74"/>
-        <source>Uneven multi hexagon</source>
-        <translation>Multi esagono irregolare</translation>
-    </message>
-    <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="75"/>
-        <source>Exhaustive search</source>
-        <translation>Ricerca esaustiva</translation>
-    </message>
-    <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_xvid4.cpp" line="72"/>
         <source>VHQ Mode</source>
         <translation>Modalit? VHQ</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="78"/>
-        <source>Max Ref Frames</source>
-        <translation>Numero massimo di fotogrammi di riferimento</translation>
-    </message>
-    <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_xvid4.cpp" line="76"/>
         <source>Max B Frames</source>
         <translation>Numero massimo di fotogrammi B</translation>
@@ -94,36 +18,11 @@
         <translation>Croma ME</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="81"/>
-        <source>Mixed Refs</source>
-        <translation>Riferimenti misti</translation>
-    </message>
-    <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="82"/>
-        <source>Fast P Skip</source>
-        <translation>P Skip veloce</translation>
-    </message>
-    <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="83"/>
-        <source>DCT Decimate</source>
-        <translation>DCT Decimate</translation>
-    </message>
-    <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="84"/>
-        <source>Interlaced</source>
-        <translation>Interlacciato</translation>
-    </message>
-    <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp" line="108"/>
         <source>Motion Estimation</source>
         <translation>Stima movimento</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="103"/>
-        <source>Disabled</source>
-        <translation>Disattivo</translation>
-    </message>
-    <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_xvid4.cpp" line="59"/>
         <source>Low</source>
         <translation>Bassa</translation>
@@ -134,86 +33,6 @@
         <translation>Alta</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="107"/>
-        <source>Trellis</source>
-        <translation>Trellis</translation>
-    </message>
-    <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="108"/>
-        <source>CABAC</source>
-        <translation>CABAC</translation>
-    </message>
-    <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="109"/>
-        <source>Noise Reduction</source>
-        <translation>Riduzione interferenza</translation>
-    </message>
-    <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="110"/>
-        <source>Deblocking Filter</source>
-        <translation>Filtro deblocking</translation>
-    </message>
-    <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="111"/>
-        <source>Strength</source>
-        <translation>Intensit?</translation>
-    </message>
-    <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="112"/>
-        <source>Threshold</source>
-        <translation>Soglia</translation>
-    </message>
-    <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="126"/>
-        <source>Misc</source>
-        <translation>Varie</translation>
-    </message>
-    <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="129"/>
-        <source>8x8 Transform</source>
-        <translation>Trasforma 8x8</translation>
-    </message>
-    <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="130"/>
-        <source>8x8P Transform</source>
-        <translation>Trasforma 8x8P</translation>
-    </message>
-    <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="131"/>
-        <source>8x8B Transform</source>
-        <translation>Trasforma 8x8B</translation>
-    </message>
-    <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="132"/>
-        <source>_4x4 Transform</source>
-        <translation>Trasforma _4x4</translation>
-    </message>
-    <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="133"/>
-        <source>_8x8I Transform</source>
-        <translation>Trasforma _8x8I</translation>
-    </message>
-    <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="134"/>
-        <source>_4x4I Transform</source>
-        <translation>Trasforma _4x4I</translation>
-    </message>
-    <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="148"/>
-        <source>Transform</source>
-        <translation>Trasforma</translation>
-    </message>
-    <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="144"/>
-        <source>B Frames</source>
-        <translation>Fotogrammi B</translation>
-    </message>
-    <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="152"/>
-        <source>X264 Configuration</source>
-        <translation>Configurazione X264</translation>
-    </message>
-    <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp" line="51"/>
         <source>None</source>
         <translation>Nessuna</translation>
@@ -2061,37 +1880,37 @@
         <translation>menu</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp" line="61"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="58"/>
         <source>1  - Extremely Low (Fastest)</source>
         <translation>1  - Estremamente bassa (pi? veloce)</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp" line="62"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="59"/>
         <source>2  - Very Low</source>
         <translation>2  - Molto bassa</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp" line="63"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="60"/>
         <source>3  - Low</source>
         <translation>3  - Bassa</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp" line="64"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="61"/>
         <source>4  - Medium</source>
         <translation>4  - Media</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp" line="65"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="62"/>
         <source>5  - High (Default)</source>
         <translation>5  - Alta (predefinito)</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp" line="66"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="63"/>
         <source>6  - Very High</source>
         <translation>6  - Molto alta</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp" line="67"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="64"/>
         <source>6B - Very High (RDO on Bframes)</source>
         <translation>6B - Molto alta (RDO sui fotogrammi-B)</translation>
     </message>
@@ -2101,12 +1920,12 @@
         <translation>7  - Ultra</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp" line="69"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="66"/>
         <source>7B - Ultra High (RDO on Bframes)</source>
         <translation>7B - Ultra (RDO sui fotogrammi-B)</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp" line="72"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="69"/>
         <source>Partition Decision</source>
         <translation>Decisione partizione</translation>
     </message>
@@ -2131,52 +1950,52 @@
         <translation>Ricerca esaustiva</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp" line="80"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="81"/>
         <source>VHQ Mode</source>
         <translation>Modalit? VHQ</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp" line="81"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="89"/>
         <source>Max Ref Frames</source>
         <translation>Numero massimo di fotogrammi di riferimento</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp" line="146"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="154"/>
         <source>Max B Frames</source>
         <translation>Numero massimo di fotogrammi B</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp" line="83"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="91"/>
         <source>Chroma ME</source>
         <translation>Croma ME</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp" line="84"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="92"/>
         <source>Mixed Refs</source>
         <translation>Riferimenti misti</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp" line="85"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="93"/>
         <source>Fast P Skip</source>
         <translation>P Skip veloce</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp" line="86"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="94"/>
         <source>DCT Decimate</source>
         <translation>DCT Decimate</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp" line="87"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="95"/>
         <source>Interlaced</source>
         <translation>Interlacciato</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp" line="89"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="97"/>
         <source>Motion Estimation</source>
         <translation>Stima movimento</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp" line="106"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="114"/>
         <source>Disabled</source>
         <translation>Disattivo</translation>
     </message>
@@ -2191,77 +2010,77 @@
         <translation>Alta</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp" line="110"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="118"/>
         <source>Trellis</source>
         <translation>Trellis</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp" line="111"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="119"/>
         <source>CABAC</source>
         <translation>CABAC</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp" line="112"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="120"/>
         <source>Noise Reduction</source>
         <translation>Riduzione interferenza</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp" line="113"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="121"/>
         <source>Deblocking Filter</source>
         <translation>Filtro deblocking</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp" line="114"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="122"/>
         <source>Strength</source>
         <translation>Intensit?</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp" line="115"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="123"/>
         <source>Threshold</source>
         <translation>Soglia</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp" line="120"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="137"/>
         <source>Misc</source>
         <translation>Varie</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp" line="132"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="140"/>
         <source>8x8 Transform</source>
         <translation>Trasforma 8x8</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp" line="133"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="141"/>
         <source>8x8P Transform</source>
         <translation>Trasforma 8x8P</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp" line="134"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="142"/>
         <source>8x8B Transform</source>
         <translation>Trasforma 8x8B</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp" line="135"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="143"/>
         <source>_4x4 Transform</source>
         <translation>Trasforma _4x4</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp" line="136"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="144"/>
         <source>_8x8I Transform</source>
         <translation>Trasforma _8x8I</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp" line="137"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="145"/>
         <source>_4x4I Transform</source>
         <translation>Trasforma _4x4I</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp" line="151"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="159"/>
         <source>Transform</source>
         <translation>Trasforma</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp" line="147"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="155"/>
         <source>B Frames</source>
         <translation>Fotogrammi B</translation>
     </message>
@@ -3528,12 +3347,12 @@
         <translation>Seleziona un file</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp" line="54"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="51"/>
         <source>Main</source>
         <translation>Generale</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp" line="101"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="109"/>
         <source>Motion</source>
         <translation>Movimento</translation>
     </message>
@@ -4362,6 +4181,41 @@
         <source>Put botj fields side by side.</source>
         <translation type="unfinished"></translation>
     </message>
+    <message>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="65"/>
+        <source>7  - Ultra High</source>
+        <translation>7  - Ultra</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="72"/>
+        <source>Diamond Search</source>
+        <translation>Ricerca romboidale</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="73"/>
+        <source>Hexagonal Search</source>
+        <translation>Ricerca esagonale</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="74"/>
+        <source>Uneven Multi-hexagon</source>
+        <translation>Multi-esagono irregolare</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="75"/>
+        <source>Exhaustive Search</source>
+        <translation>Ricerca esaustiva</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="77"/>
+        <source>Hadamard Exhaustive Search</source>
+        <translation>Ricerca esaustiva Hadamard</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="163"/>
+        <source>x264 Configuration</source>
+        <translation>Configurazione x264</translation>
+    </message>
 </context>
 <context>
     <name>ADMImage</name>
@@ -5047,175 +4901,180 @@
 <context>
     <name>ADMVideoSwissArmyKnife</name>
     <message>
-        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="258"/>
+        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="261"/>
         <source>P&apos; = A</source>
         <translation>P&apos; = A</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="259"/>
+        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="262"/>
         <source>P&apos; = P</source>
         <translation>P&apos; = P</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="260"/>
+        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="263"/>
         <source>P&apos; = P - A</source>
         <translation>P&apos; = P - A</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="261"/>
+        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="264"/>
         <source>P&apos; = A - P</source>
         <translation>P&apos; = A - P</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="262"/>
+        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="265"/>
         <source>P&apos; = P + A</source>
         <translation>P&apos; = P + A</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="263"/>
+        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="266"/>
         <source>P&apos; = P * A</source>
         <translation>P&apos; = P * A</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="264"/>
+        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="267"/>
         <source>P&apos; = P / A</source>
         <translation>P&apos; = P / A</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="265"/>
+        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="268"/>
         <source>P&apos; = A / P</source>
         <translation>P&apos; = A / P</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="266"/>
+        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="269"/>
         <source>P&apos; = min (P, A)</source>
         <translation>P&apos; = min (P, A)</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="267"/>
+        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="270"/>
         <source>P&apos; = max (P, A)</source>
         <translation>P&apos; = max (P, A)</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="272"/>
+        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="275"/>
         <source>A = convolve(P); Load convolution kernel from file</source>
         <translation>A = avvolgi(P); carica nucleo di avvolgimento da file</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="274"/>
+        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="277"/>
         <source>A = pixel from image file as float; Load image from file</source>
         <translation>A = pixel dal file immagine come float; carica immagine da file</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="276"/>
+        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="279"/>
         <source>A = pixel from image file as integer; Load image from file</source>
         <translation>A = pixel dal file immagine come integer; carica immagine da file</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="278"/>
+        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="281"/>
         <source>A = floating point constant value</source>
         <translation>A = valore costante virgola mobile</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="280"/>
+        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="283"/>
         <source>A = rolling average of pixel: A = A*(1-alpha)+(P*alpha)</source>
         <translation>A = media mobile di pixel: A = A*(1-alpha)+(P*alpha)</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="285"/>
+        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="288"/>
         <source>Select _Operation on each pixel P and input A:</source>
         <translation>_Seleziona opeazione per ogni pixel P e input A:</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="290"/>
+        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="293"/>
         <source>Input _Type:</source>
         <translation>_Tipo in ingresso:</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="321"/>
+        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="324"/>
         <source>Input _File (image or convolution kernel):</source>
         <translation>_File di ingresso (immagine o nucleo di avvolgimento):</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="325"/>
+        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="328"/>
         <source>_Load Bias (added to each pixel
 in file image when loaded):</source>
         <translation>_Carica Bias (aggiunto a ogni pixel
 nell&apos;immagine al caricamento):</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="330"/>
+        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="333"/>
         <source>Load _Multiplier (each pixel in
 file image mult. by this when loaded):</source>
         <translation>Carica _Moltiplicatore (ogni pixel nell&apos;immagine
 moltiplicato per questo valore al caricamento):</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="335"/>
+        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="338"/>
         <source>Input _Constant:</source>
         <translation>Costant_e in ingresso:</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="340"/>
-        <source>Memory constant _alpha
-(where A = (1-alpha)*A + alpha*curr_frame):</source>
-        <translation>Costante di memoria _alpha
-(dove A = (1-alpha)*A + alpha*fotogrammacorrente):</translation>
-    </message>
-    <message>
-        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="344"/>
+        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="351"/>
         <source>Init _Start Frame (first frame # to use for head start):</source>
         <translation>Ini_zializza fotogramma iniziale (primo numero
 di fotogramma da usare per la partenza facilitata):</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="348"/>
+        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="355"/>
         <source>Init _End Frame (last frame # to use for head start):</source>
         <translation>Inizia_lizza fotogramma finale (ultimo numero
 di fotogramma da usare per la partenza facilitata):</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="353"/>
+        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="360"/>
         <source>Init By _Rolling (compute head start using a rolling average rather than a straight average)</source>
         <translation>Inizializza con media mobile (elabora partenza facilitata usando una media mobile invece di una media diretta)</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="357"/>
+        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="364"/>
         <source>_Bias (will be added to result):</source>
         <translation>_Bias (sar? aggiunto al risultato):</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="360"/>
+        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="367"/>
         <source>_Result Bias (added to each result pixel):</source>
         <translation>Bias _risultato (aggiunto a ogni pixel risultato):</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="365"/>
+        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="372"/>
         <source>Result _Multiplier (each result pixel
 multiplied by this):</source>
         <translation>_Moltiplicatore risultato (ogni pixel risultato
 moltiplicato per questo valore):</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="369"/>
+        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="376"/>
         <source>_Histogram every N frames (0 to disable):</source>
         <translation>_Istogramma ogni N fotogrammi (0 per disattivare):</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="371"/>
+        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="378"/>
         <source>_Debugging settings (bits):</source>
         <translation>Impostazioni di _debug (bit):</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="321"/>
+        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="324"/>
         <source>Select file</source>
         <translation>Seleziona un file</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="380"/>
+        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="388"/>
         <source>Swiss Army Knife Configuration</source>
         <translation>Configurazione Swiss Army Knife</translation>
     </message>
+    <message>
+        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="343"/>
+        <source>Memory constant _alpha
+(where A = (1-alpha)*A + alpha*(curr_frame + lookahead)):</source>
+        <translation>Costante di memoria _alpha
+(dove A = (1-alpha)*A + alpha*(fotogrammacorrente + N fotogrammi)):</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="347"/>
+        <source>Look ahead _N frames:</source>
+        <translation>_N fotogrammi successivi:</translation>
+    </message>
 </context>
 <context>
     <name>ADMVideoThreshold</name>
@@ -5475,14 +5334,14 @@
         <translation>Dovresti usare Strumenti -&gt; Ricostruisci fotogrammi. Vuoi farlo ora?</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_editor/ADM_edit.cpp" line="1510"/>
+        <location filename="../avidemux/ADM_editor/ADM_edit.cpp" line="1517"/>
         <source>This looks like mpeg
  Do you want to index it?</source>
         <translation>Questo sembra un file mpeg
  Vuoi indicizzarlo?</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_editor/ADM_edit.cpp" line="1562"/>
+        <location filename="../avidemux/ADM_editor/ADM_edit.cpp" line="1569"/>
         <source>Indexing failed</source>
         <translation>Indicizzazione fallita</translation>
     </message>

Modified: branches/avidemux_2.5_branch_gruntster/po/el.po
===================================================================
--- branches/avidemux_2.5_branch_gruntster/po/el.po	2008-03-18 13:13:51 UTC (rev 3908)
+++ branches/avidemux_2.5_branch_gruntster/po/el.po	2008-03-18 18:11:00 UTC (rev 3909)
@@ -5,10 +5,10 @@
 #
 msgid ""
 msgstr ""
-"Project-Id-Version: Avidemux 003\n"
+"Project-Id-Version: Avidemux el 004\n"
 "Report-Msgid-Bugs-To: \n"
 "POT-Creation-Date: 2003-12-29 15:55+0100\n"
-"PO-Revision-Date: 2007-10-28 23:54+0200\n"
+"PO-Revision-Date: 2008-03-10 20:36+0200\n"
 "Last-Translator: nikos papadopoulos <231036448 at freemail.gr>\n"
 "Language-Team: GREEK <231036448 at freemail.gr>\n"
 "MIME-Version: 1.0\n"
@@ -74,7 +74,7 @@
 #: avidemux/ADM_audio/audiotimeline.cpp:85
 #: avidemux/ADM_audio/audiotimeline.cpp:96
 msgid "Building VBR map"
-msgstr ""
+msgstr "??????? ????? VBR"
 
 #: avidemux/ADM_audiocodec/ADM_codecwma.cpp:88
 #: avidemux/ADM_audiocodec/ADM_codecwma.cpp:200
@@ -99,15 +99,14 @@
 
 #: avidemux/ADM_audiofilter/audioencoder_lame.cpp:220
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:104
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:296
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:295
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:103
 msgid "Stereo"
 msgstr "??????"
 
 #: avidemux/ADM_audiofilter/audioencoder_lame.cpp:221
-#, fuzzy
 msgid "Joint stereo"
-msgstr "Joint stereo"
+msgstr "??????? ??????"
 
 #: avidemux/ADM_audiofilter/audioencoder_lame.cpp:222
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:103
@@ -150,7 +149,7 @@
 
 #: avidemux/ADM_audiofilter/audioencoder_lame.cpp:252
 msgid "_Disable reservoir:"
-msgstr ""
+msgstr "_?????????????? ?????????:"
 
 #: avidemux/ADM_audiofilter/audioencoder_lame.cpp:256
 msgid "LAME Configuration"
@@ -178,11 +177,11 @@
 
 #: avidemux/ADM_audiofilter/audiofilter_buildchain.cpp:322
 #: avidemux/gui_autodrive.cpp:62
-#: avidemux/gui_autodrive.cpp:71
-#: avidemux/gui_autodrive.cpp:112
-#: avidemux/gui_autodrive.cpp:127
-#: avidemux/gui_autodrive.cpp:154
-#: avidemux/gui_autodrive.cpp:188
+#: avidemux/gui_autodrive.cpp:74
+#: avidemux/gui_autodrive.cpp:120
+#: avidemux/gui_autodrive.cpp:135
+#: avidemux/gui_autodrive.cpp:162
+#: avidemux/gui_autodrive.cpp:196
 msgid "Codec Error"
 msgstr "?????? ??????"
 
@@ -206,12 +205,6 @@
 msgid "Internal error with context for  codec"
 msgstr "????????? ?????? ?? ?? ??????????? ??? ??????"
 
-#: avidemux/ADM_codecs/ADM_ffmpeg.cpp:51
-msgid ""
-".\n"
-" Did you use too low / too high target for 2 pass ?"
-msgstr ""
-
 #: avidemux/ADM_editor/ADM_edFrameType.cpp:58
 msgid "No video loaded"
 msgstr "??? ????????? ??????"
@@ -222,12 +215,11 @@
 
 #: avidemux/ADM_editor/ADM_edFrameType.cpp:63
 msgid "DivX 5 + packed?"
-msgstr ""
+msgstr "DivX 5 +??????????????;"
 
 #: avidemux/ADM_editor/ADM_edFrameType.cpp:93
-#, fuzzy
 msgid "Rebuilding Frames"
-msgstr "??????? ???????"
+msgstr "???????????? ??? ????"
 
 #: avidemux/ADM_editor/ADM_edFrameType.cpp:129
 msgid "Aborted"
@@ -286,7 +278,7 @@
 
 #: avidemux/ADM_editor/ADM_edit.cpp:733
 msgid "Could not unpack the video"
-msgstr ""
+msgstr "??????? ?? ?????????????? ??? ??????"
 
 #: avidemux/ADM_editor/ADM_edit.cpp:733
 msgid "Using backup decoder - not frame accurate."
@@ -309,21 +301,22 @@
 msgstr ""
 
 #: avidemux/ADM_editor/ADM_edit.cpp:755
-#, fuzzy
 msgid "Index is not up to date"
-msgstr "???????? ??????????? %1 : %2"
+msgstr "?? ????????? ??? ????? ???????????"
 
 #: avidemux/ADM_editor/ADM_edit.cpp:755
 msgid "You should use Tool->Rebuild frame. Do it now ?"
 msgstr ""
 
-#: avidemux/ADM_editor/ADM_edit.cpp:1510
+#: avidemux/ADM_editor/ADM_edit.cpp:1517
 msgid ""
 "This looks like mpeg\n"
 " Do you want to index it?"
 msgstr ""
+"???? ???????? ?? ????? mpeg\n"
+" ?? ???????????? ?????????;"
 
-#: avidemux/ADM_editor/ADM_edit.cpp:1562
+#: avidemux/ADM_editor/ADM_edit.cpp:1569
 msgid "Indexing failed"
 msgstr "? ?????????? ?????????? ???????"
 
@@ -371,285 +364,292 @@
 msgid "At the moment, the DV codec only accepts 720*576 at 25"
 msgstr "??? ??? ???, ? ??????? DV, ?????????? ???? 720*576 at 25"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:54
+#: avidemux/ADM_filter/filter_declaration.cpp:55
 msgid "Crop"
 msgstr "????????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:54
+#: avidemux/ADM_filter/filter_declaration.cpp:55
 msgid "Remove lines from top/bottom/left/right."
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:55
+#: avidemux/ADM_filter/filter_declaration.cpp:56
 msgid "MPlayer resize"
 msgstr "?????? ?????????? MPlayer"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:55
+#: avidemux/ADM_filter/filter_declaration.cpp:56
 msgid "Change image size. Faster than Avisynth's Resize."
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:56
+#: avidemux/ADM_filter/filter_declaration.cpp:57
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:312
 msgid "Resize"
 msgstr "?????? ????????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:56
+#: avidemux/ADM_filter/filter_declaration.cpp:57
 msgid "Picture resizer ported from Avisynth."
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:57
+#: avidemux/ADM_filter/filter_declaration.cpp:58
 msgid "Add black borders"
 msgstr "???????? ?????? ?????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:57
+#: avidemux/ADM_filter/filter_declaration.cpp:58
 msgid "Add pure black border(s). Enlarges the picture."
 msgstr "?????? ??? ????? ?? ??????? ?????. ????????? ??? ???????."
 
-#: avidemux/ADM_filter/filter_declaration.cpp:58
+#: avidemux/ADM_filter/filter_declaration.cpp:59
 msgid "Blacken borders"
 msgstr "???????? ??? ?????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:58
+#: avidemux/ADM_filter/filter_declaration.cpp:59
 msgid "Fill borders with pure black. Doesn't alter size."
 msgstr "?????? ??? ????? ?? ??????? ?????. ??? ???????? ?? ??????????."
 
-#: avidemux/ADM_filter/filter_declaration.cpp:59
+#: avidemux/ADM_filter/filter_declaration.cpp:60
 msgid "Vertical flip"
 msgstr "?????????? ?????????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:59
+#: avidemux/ADM_filter/filter_declaration.cpp:60
 msgid "Vertically flip the picture."
 msgstr "?????????? ????????? ??? ???????."
 
-#: avidemux/ADM_filter/filter_declaration.cpp:60
+#: avidemux/ADM_filter/filter_declaration.cpp:61
 #: avidemux/ADM_videoFilter/ADM_vidRotate.cpp:271
 msgid "Rotate"
 msgstr "??????????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:60
+#: avidemux/ADM_filter/filter_declaration.cpp:61
 msgid "Rotate the picture by 90, 180 or 270 degrees."
 msgstr "?????????? ??? ??????? ???? 90, 180, ? 270 ??????."
 
-#: avidemux/ADM_filter/filter_declaration.cpp:62
+#: avidemux/ADM_filter/filter_declaration.cpp:63
 #: avidemux/ADM_videoFilter/ADM_vidResampleFPS.cpp:90
 msgid "Resample fps"
 msgstr "?????????????????? fps"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:62
+#: avidemux/ADM_filter/filter_declaration.cpp:63
 msgid "Change framerate while keeping duration."
 msgstr "?????? ??? ?????? ??? ????, ??? ??????????? ? ????????."
 
-#: avidemux/ADM_filter/filter_declaration.cpp:63
+#: avidemux/ADM_filter/filter_declaration.cpp:64
 msgid "Reverse"
 msgstr "?????????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:63
+#: avidemux/ADM_filter/filter_declaration.cpp:64
 msgid "Play video backward."
 msgstr "????????? ??????????? ??? ??????."
 
-#: avidemux/ADM_filter/filter_declaration.cpp:64
+#: avidemux/ADM_filter/filter_declaration.cpp:65
 #: avidemux/ADM_videoFilter/ADM_vidFade.cpp:78
 msgid "Fade"
 msgstr "????? ????????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:64
+#: avidemux/ADM_filter/filter_declaration.cpp:65
 msgid "Fade in/out."
 msgstr "????? ???????/??????."
 
-#: avidemux/ADM_filter/filter_declaration.cpp:69
+#: avidemux/ADM_filter/filter_declaration.cpp:71
 #: avidemux/ADM_videoFilter/ADM_vidYadif.cpp:186
 msgid "yadif"
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:69
+#: avidemux/ADM_filter/filter_declaration.cpp:71
 msgid "Yet Another DeInterlacer. Ported from MPlayer."
-msgstr ""
+msgstr "????? ???? ??????????. ????????? ??? ????????????? ??? ??? MPlayer."
 
-#: avidemux/ADM_filter/filter_declaration.cpp:70
+#: avidemux/ADM_filter/filter_declaration.cpp:72
 #: avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp:119
 #, fuzzy
 msgid "mcDeinterlace"
 msgstr "??????????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:70
+#: avidemux/ADM_filter/filter_declaration.cpp:72
 msgid "Motion compensation deinterlacer. Ported from MPlayer."
-msgstr ""
+msgstr "?????????? ??????????? ???????. ????????? ??? ????????????? ??? ??? MPlayer."
 
-#: avidemux/ADM_filter/filter_declaration.cpp:71
+#: avidemux/ADM_filter/filter_declaration.cpp:73
 #, fuzzy
 msgid "Deinterlace"
 msgstr "???????????? (deinterlace)"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:71
+#: avidemux/ADM_filter/filter_declaration.cpp:73
 msgid "Mask interlacing artifacts. Port of Smart deinterlace."
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:72
+#: avidemux/ADM_filter/filter_declaration.cpp:74
 #: avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp:100
 msgid "KernelDeint"
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:72
+#: avidemux/ADM_filter/filter_declaration.cpp:74
 msgid "Kernel deinterlacer by Donald Graft."
-msgstr ""
+msgstr "?????????? ????????? ??? Donald Graft."
 
-#: avidemux/ADM_filter/filter_declaration.cpp:73
+#: avidemux/ADM_filter/filter_declaration.cpp:75
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:121
 msgid "TDeint"
 msgstr "TDeint"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:73
+#: avidemux/ADM_filter/filter_declaration.cpp:75
 msgid "Motion adaptative deinterlacer by Tritical."
-msgstr ""
+msgstr "??????????????? ?????????? ??????? ??? ??? Tritical."
 
-#: avidemux/ADM_filter/filter_declaration.cpp:74
+#: avidemux/ADM_filter/filter_declaration.cpp:76
 #: avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp:119
 #, fuzzy
 msgid "libavcodec deinterlacer"
-msgstr "??????????"
+msgstr "??????? Deinterlacer..."
 
-#: avidemux/ADM_filter/filter_declaration.cpp:74
+#: avidemux/ADM_filter/filter_declaration.cpp:76
 msgid "All FFmpeg deinterlace filters (bicubic, median, ...)."
-msgstr ""
+msgstr "??? ?? ?????? ????????? FFmpeg (????????, ????, ...)."
 
-#: avidemux/ADM_filter/filter_declaration.cpp:75
+#: avidemux/ADM_filter/filter_declaration.cpp:77
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:131
 msgid "Decomb Telecide"
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:75
+#: avidemux/ADM_filter/filter_declaration.cpp:77
 msgid "Great deinterlacing package including IVTC."
-msgstr ""
+msgstr "???????? ?????? ????????? ??? ???????? IVTC."
 
-#: avidemux/ADM_filter/filter_declaration.cpp:76
+#: avidemux/ADM_filter/filter_declaration.cpp:78
 #: avidemux/ADM_videoFilter/ADM_vidDecDec.cpp:211
 msgid "Decomb Decimate"
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:76
+#: avidemux/ADM_filter/filter_declaration.cpp:78
 msgid "Useful to remove dupes left by Telecide."
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:77
+#: avidemux/ADM_filter/filter_declaration.cpp:79
 msgid "Pulldown"
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:77
+#: avidemux/ADM_filter/filter_declaration.cpp:79
 msgid "Convert 24 fps to 30 fps by repeating fields."
-msgstr ""
+msgstr "????????? ??? 24 fps ??? 30 fps, ?? ??? ????????? ??????."
 
-#: avidemux/ADM_filter/filter_declaration.cpp:79
+#: avidemux/ADM_filter/filter_declaration.cpp:81
 msgid "Bobber - convert each field into a full sized frame."
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:81
-#, fuzzy
+#: avidemux/ADM_filter/filter_declaration.cpp:83
 msgid "PAL field shift"
-msgstr "???????????? ???????? ???????????"
+msgstr "?????????? ?????? PAL"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:81
+#: avidemux/ADM_filter/filter_declaration.cpp:83
 msgid "Shift fields by one. Useful for some PAL movies."
-msgstr ""
+msgstr "?????????? ??? ?????? ???? ???. ??????? ?? ??????? ??????? PAL."
 
-#: avidemux/ADM_filter/filter_declaration.cpp:82
+#: avidemux/ADM_filter/filter_declaration.cpp:84
 msgid "PAL smart"
-msgstr ""
+msgstr "?????? PAL"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:82
+#: avidemux/ADM_filter/filter_declaration.cpp:84
 msgid "Smartly revert non constant PAL field shift."
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:87
+#: avidemux/ADM_filter/filter_declaration.cpp:89
 msgid "Drop"
 msgstr "???????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:87
+#: avidemux/ADM_filter/filter_declaration.cpp:89
 msgid "Drop damaged fields (e.g. from VHS capture)."
-msgstr ""
+msgstr "??????? ????????????? ?????? (?? ??? ??????? VHS)."
 
-#: avidemux/ADM_filter/filter_declaration.cpp:88
+#: avidemux/ADM_filter/filter_declaration.cpp:90
 msgid "Swap fields"
-msgstr ""
+msgstr "???????? ??????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:88
+#: avidemux/ADM_filter/filter_declaration.cpp:90
 msgid "Swap top and bottom fields."
-msgstr ""
+msgstr "???????? ??? ???? ??? ??? ???? ??????."
 
-#: avidemux/ADM_filter/filter_declaration.cpp:89
+#: avidemux/ADM_filter/filter_declaration.cpp:91
 msgid "Smart swap fields"
-msgstr ""
+msgstr "?????? ???????? ??????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:89
+#: avidemux/ADM_filter/filter_declaration.cpp:91
 msgid "Smartly swap fields. Needed when field order changes."
-msgstr ""
+msgstr "?????? ???????? ??????. ??????? ???? ??????? ? ????? ??? ??????."
 
-#: avidemux/ADM_filter/filter_declaration.cpp:91
+# ???
+#: avidemux/ADM_filter/filter_declaration.cpp:93
 msgid "Keep even fields"
-msgstr ""
+msgstr "????????? ??????????? ??????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:91
+#: avidemux/ADM_filter/filter_declaration.cpp:93
 msgid "Keep top fields. Gives a half height picture."
-msgstr ""
+msgstr "????????? ??? ????? ??????. ??????? ??????? ????? ?????."
 
-#: avidemux/ADM_filter/filter_declaration.cpp:92
+# ???
+#: avidemux/ADM_filter/filter_declaration.cpp:94
 msgid "Keep odd fields"
-msgstr ""
+msgstr "????????? ????????? ??????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:92
+#: avidemux/ADM_filter/filter_declaration.cpp:94
 msgid "Keep bottom fileds. Gives a half height picture."
-msgstr ""
+msgstr "????????? ??? ???? ??????. ??????? ??????? ????? ?????."
 
-#: avidemux/ADM_filter/filter_declaration.cpp:93
-#, fuzzy
+#: avidemux/ADM_filter/filter_declaration.cpp:95
 msgid "Separate fields"
-msgstr "???????????"
+msgstr "??????????? ??????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:93
+#: avidemux/ADM_filter/filter_declaration.cpp:95
 msgid "Each field becomes full picture, half sized."
-msgstr ""
+msgstr "???? ????? ??????? ?????? ??????, ?? ?? ???? ???????."
 
-#: avidemux/ADM_filter/filter_declaration.cpp:94
+#: avidemux/ADM_filter/filter_declaration.cpp:96
 msgid "Merge fields"
-msgstr ""
+msgstr "?????????? ??????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:94
+#: avidemux/ADM_filter/filter_declaration.cpp:96
 msgid "Merge two pictures as if they were two fields."
-msgstr ""
+msgstr "?????????? ??? ??????? ??? ?? ???? ??? ?????."
 
-#: avidemux/ADM_filter/filter_declaration.cpp:96
+#: avidemux/ADM_filter/filter_declaration.cpp:99
+msgid "Hz Stack fields"
+msgstr "Hz ????????? ??????"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:99
+msgid "Put botj fields side by side."
+msgstr "?????????? ??? ??? ??? ?????? ????? ?????."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:102
 msgid "Stack fields"
-msgstr ""
+msgstr "????????? ??????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:96
+#: avidemux/ADM_filter/filter_declaration.cpp:102
 msgid "Put two fields on top of one another."
-msgstr ""
+msgstr "?????????? ??? ?????? ?? ??? ???? ??? ????."
 
-#: avidemux/ADM_filter/filter_declaration.cpp:97
+#: avidemux/ADM_filter/filter_declaration.cpp:103
 msgid "Unstack fields"
-msgstr ""
+msgstr "???-????????? ??????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:97
+#: avidemux/ADM_filter/filter_declaration.cpp:103
 msgid "Interleave top and bottom part of the picture."
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:101
+#: avidemux/ADM_filter/filter_declaration.cpp:107
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eq2.cpp:205
 msgid "MPlayer eq2"
 msgstr "MPlayer eq2"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:101
+#: avidemux/ADM_filter/filter_declaration.cpp:107
 msgid "Adjust contrast, brightness, saturation and gamma."
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:102
-#, fuzzy
+#: avidemux/ADM_filter/filter_declaration.cpp:108
 msgid "MPlayer hue"
-msgstr "MPlayer eq2"
+msgstr "???????? ??? MPlayer"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:102
+#: avidemux/ADM_filter/filter_declaration.cpp:108
 msgid "Adjust hue and saturation."
-msgstr ""
+msgstr "??????? ??? ????????? ??? ??? ????????."
 
-#: avidemux/ADM_filter/filter_declaration.cpp:103
+#: avidemux/ADM_filter/filter_declaration.cpp:109
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:179
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_contrast.cpp:72
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_contrast.cpp:194
@@ -657,362 +657,365 @@
 msgid "Contrast"
 msgstr "????????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:103
+#: avidemux/ADM_filter/filter_declaration.cpp:109
 msgid "Adjust contrast, brightness and colors."
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:104
+#: avidemux/ADM_filter/filter_declaration.cpp:110
 #, fuzzy
 msgid "Luma equalizer"
-msgstr "?????????????"
+msgstr "???????????? ????????????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:104
+#: avidemux/ADM_filter/filter_declaration.cpp:110
 msgid "Luma correction filter with histogram."
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:106
+#: avidemux/ADM_filter/filter_declaration.cpp:112
 msgid "Swap U and V"
 msgstr "???????? U ??? V"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:106
+#: avidemux/ADM_filter/filter_declaration.cpp:112
+#, fuzzy
 msgid "Invert chroma U and chroma V."
-msgstr ""
+msgstr "?????????? ?????? ?? ?????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:107
+#: avidemux/ADM_filter/filter_declaration.cpp:113
 #, fuzzy
 msgid "Chroma shift"
-msgstr "??????? ????????:"
+msgstr "?????????? ?????????? ?????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:107
+#: avidemux/ADM_filter/filter_declaration.cpp:113
 msgid "Shift chroma U/V to fix badly synced luma/chroma."
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:109
+#: avidemux/ADM_filter/filter_declaration.cpp:115
 #, fuzzy
 msgid "Luma only"
-msgstr "??????? ????????????:"
+msgstr "???? ?? ???????????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:109
+#: avidemux/ADM_filter/filter_declaration.cpp:115
 msgid "Convert picture to greyscale (black and white)."
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:110
+#: avidemux/ADM_filter/filter_declaration.cpp:116
 #, fuzzy
 msgid "Chroma U only"
-msgstr "??????? ????????:"
+msgstr "???? ?? ???????????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:110
+#: avidemux/ADM_filter/filter_declaration.cpp:116
 msgid "Convert picture to grey, keeping only chroma U."
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:111
+#: avidemux/ADM_filter/filter_declaration.cpp:117
 #, fuzzy
 msgid "Chroma V only"
-msgstr "??????? ????????:"
+msgstr "???? ?? ???????????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:111
+#: avidemux/ADM_filter/filter_declaration.cpp:117
 msgid "Convert picture to grey, keeping only chroma V."
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:113
+#: avidemux/ADM_filter/filter_declaration.cpp:119
 #, fuzzy
 msgid "Luma delta"
-msgstr "??????? ????????????:"
+msgstr "???????? Delta Row"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:113
+#: avidemux/ADM_filter/filter_declaration.cpp:119
 msgid "Difference between current and previous picture."
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:114
+#: avidemux/ADM_filter/filter_declaration.cpp:120
 msgid "Avisynth ColorYUV"
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:114
+#: avidemux/ADM_filter/filter_declaration.cpp:120
 msgid "Alter colors (auto white balance etc...). Ported from Avisynth."
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:123
+#: avidemux/ADM_filter/filter_declaration.cpp:130
 #: avidemux/ADM_videoFilter/ADM_vidMPLD3Dlow.cpp:80
-#, fuzzy
 msgid "MPlayer denoise3d"
-msgstr "MPlayer eq2"
+msgstr "????????????????3d MPlayer "
 
-#: avidemux/ADM_filter/filter_declaration.cpp:123
+#: avidemux/ADM_filter/filter_declaration.cpp:130
 msgid "Reduce noise, smooth image, increase compressibility."
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:124
+#: avidemux/ADM_filter/filter_declaration.cpp:131
 #: avidemux/ADM_videoFilter/ADM_vidMPLD3D.cpp:80
 msgid "MPlayer hqdn3d"
 msgstr "MPlayer hqdn3d"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:124
+#: avidemux/ADM_filter/filter_declaration.cpp:131
 msgid "High quality version of denoise3d. Slower but more precise."
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:125
+#: avidemux/ADM_filter/filter_declaration.cpp:132
 #: avidemux/ADM_videoFilter/ADM_vidFlux.cpp:138
 msgid "FluxSmooth"
-msgstr ""
+msgstr "FluxSmooth"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:125
+#: avidemux/ADM_filter/filter_declaration.cpp:132
 msgid "Spatio-temporal cleaner by Ross Thomas."
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:127
+#: avidemux/ADM_filter/filter_declaration.cpp:134
 #: avidemux/ADM_videoFilter/ADM_vidVlad.cpp:106
-#, fuzzy
 msgid "Temporal Cleaner"
-msgstr "temporal"
+msgstr "???????? ??????????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:127
+#: avidemux/ADM_filter/filter_declaration.cpp:134
 msgid "Vlad59's Avisynth port of Jim Casaburi's denoiser."
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:129
+#: avidemux/ADM_filter/filter_declaration.cpp:136
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filterlist.cpp:173
 #: avidemux/ADM_videoFilter/ADM_vidDenoise.cpp:397
 msgid "Denoise"
 msgstr "???????????????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:129
+#: avidemux/ADM_filter/filter_declaration.cpp:136
 msgid "Port of Transcode DNR."
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:130
+#: avidemux/ADM_filter/filter_declaration.cpp:137
 #: avidemux/ADM_videoFilter/ADM_vidStabilize.cpp:66
 msgid "Stabilize"
 msgstr "?????????????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:130
+# ? ???????
+#: avidemux/ADM_filter/filter_declaration.cpp:137
 msgid "Light denoiser."
-msgstr ""
+msgstr "???????????????? ?????."
 
-#: avidemux/ADM_filter/filter_declaration.cpp:132
+#: avidemux/ADM_filter/filter_declaration.cpp:139
 msgid "Cnr2"
-msgstr ""
+msgstr "Cnr2"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:132
+#: avidemux/ADM_filter/filter_declaration.cpp:139
 msgid "Chroma noise reduction filter by MarcFD/Tritical."
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:134
+#: avidemux/ADM_filter/filter_declaration.cpp:141
 msgid "MSmooth by Donald Graft"
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:134
+#: avidemux/ADM_filter/filter_declaration.cpp:141
 msgid "Smooth the image, don't blur edges. Useful on anime."
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:135
+#: avidemux/ADM_filter/filter_declaration.cpp:142
 #: avidemux/ADM_videoFilter/ADM_vidSoften.cpp:74
 msgid "Soften"
 msgstr "?????????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:135
+#: avidemux/ADM_filter/filter_declaration.cpp:142
 msgid "A variant of stabilize."
-msgstr ""
+msgstr "??? ????????? ??? ?????????????."
 
-#: avidemux/ADM_filter/filter_declaration.cpp:139
+#: avidemux/ADM_filter/filter_declaration.cpp:147
 msgid "Sharpen"
 msgstr "??????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:139
+#: avidemux/ADM_filter/filter_declaration.cpp:147
 msgid "Enhance difference between near pixels."
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:140
+#: avidemux/ADM_filter/filter_declaration.cpp:148
 #: avidemux/ADM_videoFilter/ADM_vidMSharpen.cpp:172
-#, fuzzy
 msgid "MSharpen"
-msgstr "_???"
+msgstr "MSharpen (???????)"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:140
+#: avidemux/ADM_filter/filter_declaration.cpp:148
 msgid "Sharpen edges without amplifying noise. By Donald Graft."
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:141
-#, fuzzy
+#: avidemux/ADM_filter/filter_declaration.cpp:149
 msgid "asharp"
-msgstr "ASHARP"
+msgstr "asharp (???????)"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:141
-#, fuzzy
+#: avidemux/ADM_filter/filter_declaration.cpp:149
 msgid "Adaptative sharpener by MarcFD."
-msgstr "ASharp ??? ??? MarcFD"
+msgstr "??????????????? ??????? ??? ??? MarcFD."
 
-#: avidemux/ADM_filter/filter_declaration.cpp:143
+#: avidemux/ADM_filter/filter_declaration.cpp:151
+#, fuzzy
 msgid "Gauss smooth"
-msgstr ""
+msgstr "????? ?????????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:143
+#: avidemux/ADM_filter/filter_declaration.cpp:151
 msgid "Gaussian smooth. Blur the picture."
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:144
-#, fuzzy
+#: avidemux/ADM_filter/filter_declaration.cpp:152
 msgid "Mean"
-msgstr "?????"
+msgstr "????? (??????)"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:144
+#: avidemux/ADM_filter/filter_declaration.cpp:152
 msgid "Mean (blur) kernel."
-msgstr ""
+msgstr "????? ??????? (??????)."
 
-#: avidemux/ADM_filter/filter_declaration.cpp:145
-#, fuzzy
+#: avidemux/ADM_filter/filter_declaration.cpp:153
 msgid "Median"
-msgstr "????????"
+msgstr "?????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:145
+#: avidemux/ADM_filter/filter_declaration.cpp:153
 msgid "Median kernel 3x3. Remove high frequency noise."
-msgstr ""
+msgstr "????? ??????? 3x3. ??????? ?????? ?????? ??????????."
 
-#: avidemux/ADM_filter/filter_declaration.cpp:146
+#: avidemux/ADM_filter/filter_declaration.cpp:154
 msgid "Median (5x5)"
-msgstr ""
+msgstr "????? (5x5)"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:146
+#: avidemux/ADM_filter/filter_declaration.cpp:154
 msgid "Median kernel 5x5. Good for reducing chroma noise."
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:147
+#: avidemux/ADM_filter/filter_declaration.cpp:155
 msgid "Forced postprocessing"
 msgstr "????????????? ??????????????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:147
+#: avidemux/ADM_filter/filter_declaration.cpp:155
 msgid "Apply blind postprocessing."
 msgstr "???????? ?????? ???????????????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:151
+#: avidemux/ADM_filter/filter_declaration.cpp:160
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:112
 msgid "Subtitler"
 msgstr "????????????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:151
+#: avidemux/ADM_filter/filter_declaration.cpp:160
 msgid "Add srt/sub subtitles to the picture."
-msgstr ""
+msgstr "???????? ????????? srt/sub ???? ??????."
 
-#: avidemux/ADM_filter/filter_declaration.cpp:152
+#: avidemux/ADM_filter/filter_declaration.cpp:161
 #: avidemux/ADM_videoFilter/ADM_vidASS.cpp:95
 msgid "ASS"
 msgstr "ASS"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:152
+#: avidemux/ADM_filter/filter_declaration.cpp:161
 msgid "Add ASS/SSA subtitles to the picture."
-msgstr ""
+msgstr "???????? ????????? ASS/SSA ???? ??????."
 
-#: avidemux/ADM_filter/filter_declaration.cpp:154
+#: avidemux/ADM_filter/filter_declaration.cpp:164
 msgid "VobSub"
 msgstr "VobSub"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:154
+#: avidemux/ADM_filter/filter_declaration.cpp:164
 msgid "Embed VobSub subtitles into picture."
-msgstr ""
+msgstr "?????????? ????????? VobSub ???? ??????."
 
-#: avidemux/ADM_filter/filter_declaration.cpp:156
+#: avidemux/ADM_filter/filter_declaration.cpp:166
 msgid "DVB sub"
-msgstr ""
+msgstr "DVB sub"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:156
+#: avidemux/ADM_filter/filter_declaration.cpp:166
 msgid "Embed DVB-T subtitle."
-msgstr ""
+msgstr "?????????? ????????? DVB-T."
 
-#: avidemux/ADM_filter/filter_declaration.cpp:163
+#: avidemux/ADM_filter/filter_declaration.cpp:177
+#, fuzzy
 msgid "Blend remover"
-msgstr ""
+msgstr "???????? ????????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:163
+#: avidemux/ADM_filter/filter_declaration.cpp:177
 msgid "Remove blend between previous and next picture."
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:164
+#: avidemux/ADM_filter/filter_declaration.cpp:178
 msgid "Hard pulldown removal"
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:164
+#: avidemux/ADM_filter/filter_declaration.cpp:178
 msgid "Remove IVTC that has been analog captured or resized."
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:165
+#: avidemux/ADM_filter/filter_declaration.cpp:179
 msgid "Whirl"
 msgstr "????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:165
+#: avidemux/ADM_filter/filter_declaration.cpp:179
 msgid "Useless whirlwind effect."
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:166
+#: avidemux/ADM_filter/filter_declaration.cpp:180
 #: avidemux/ADM_videoFilter/ADM_vidMosaic.cpp:98
 msgid "Mosaic"
 msgstr "???????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:166
+#: avidemux/ADM_filter/filter_declaration.cpp:180
 msgid "Split the picture into tiny thumbnails."
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:167
-#, fuzzy
+#: avidemux/ADM_filter/filter_declaration.cpp:181
 msgid "MPlayer delogo"
-msgstr "MPlayer eq2"
+msgstr "MPlayer ????????? ?????????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:167
+#: avidemux/ADM_filter/filter_declaration.cpp:181
 msgid "Blend a logo by interpolating its surrounding box."
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:168
+#: avidemux/ADM_filter/filter_declaration.cpp:182
 #: avidemux/ADM_videoFilter/ADM_vidLogo.cpp:95
 msgid "Logo"
 msgstr "????????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:168
+#: avidemux/ADM_filter/filter_declaration.cpp:182
 msgid "Add a png as logo."
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:169
+#: avidemux/ADM_filter/filter_declaration.cpp:183
+#, fuzzy
 msgid "Animated Menu"
-msgstr ""
+msgstr "??????????? ?????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:170
+#: avidemux/ADM_filter/filter_declaration.cpp:184
 msgid "Create a video made of 6 mini windows, very useful to do DVD menus."
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:172
+#: avidemux/ADM_filter/filter_declaration.cpp:186
 msgid "Compute Average"
 msgstr "??????????? ????? ????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:172
+#: avidemux/ADM_filter/filter_declaration.cpp:186
 msgid "Compute average luma value for each pixel throughout all frames, and save to file"
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:173
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:898
-#, fuzzy
+#: avidemux/ADM_filter/filter_declaration.cpp:187
+msgid "Eraser"
+msgstr "?????????"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:187
+msgid "\"Erase\" arbitrary areas of each frame"
+msgstr ""
+
+#: avidemux/ADM_filter/filter_declaration.cpp:188
 msgid "Swiss Army Knife"
-msgstr "??????? Xvid4"
+msgstr "????????? ???????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:173
+#: avidemux/ADM_filter/filter_declaration.cpp:188
 msgid "Apply operation like P'=P*A, P-A, P+A, etc. using a convolution, rolling average, image from file, or constant"
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:174
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:272
+#: avidemux/ADM_filter/filter_declaration.cpp:189
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:401
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:976
 msgid "Threshold"
 msgstr "???????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:174
+#: avidemux/ADM_filter/filter_declaration.cpp:189
 msgid "Force too-bright/too-dim pixels to 0 and the rest to 255 or vice-versa"
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:175
-#, fuzzy
+#: avidemux/ADM_filter/filter_declaration.cpp:190
 msgid "Particle List"
-msgstr "??????"
+msgstr "????? ?????????"
 
-#: avidemux/ADM_filter/filter_declaration.cpp:175
+#: avidemux/ADM_filter/filter_declaration.cpp:190
 msgid "Identify 'particles' (groups of pixels)"
 msgstr ""
 
-#: avidemux/ADM_filter/filter_declaration.cpp:180
+#: avidemux/ADM_filter/filter_declaration.cpp:195
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_partial.cpp:123
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtersub.cpp:144
 msgid "Partial"
@@ -1031,26 +1034,24 @@
 msgstr "??? ??????? ?????? ??????"
 
 #: avidemux/ADM_filter/filter_saveload.cpp:207
-#, fuzzy
 msgid "No tag found"
-msgstr "?? ??????? ?????? ??? ??? ???????"
+msgstr "?? ??????? ???????"
 
 #: avidemux/ADM_filter/filter_saveload.cpp:287
-#, fuzzy
 msgid "Node not found"
-msgstr "? ???????????? ?????? ???????????? ?? ref=\"%s\" ??? ???????!"
+msgstr "?? ??????? ??????"
 
 #: avidemux/ADM_inputs/ADM_h263/ADM_h263.cpp:258
 msgid "Size is not (s)QCIF"
 msgstr "?? ??????? ??? ????? (s)QCIF"
 
-#: avidemux/ADM_inputs/ADM_mp4/ADM_mp4Analyzer.cpp:583
+#: avidemux/ADM_inputs/ADM_mp4/ADM_mp4Analyzer.cpp:589
 msgid "Problem reading SVQ3 headers"
 msgstr "???????? ???? ???????? ??? ????????? SVQ3"
 
 #: avidemux/ADM_inputs/ADM_mp4/ADM_mp4Indexer.cpp:346
 msgid "No stts table"
-msgstr ""
+msgstr "????? ?????? sstts"
 
 #: avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_indexer.cpp:149
 msgid "There is several mpeg file, append them ?"
@@ -1099,7 +1100,7 @@
 
 #: avidemux/ADM_inputs/ADM_ogm/ADM_ogm.cpp:426
 msgid "Scanning OGM"
-msgstr ""
+msgstr "?????? OGM"
 
 #: avidemux/ADM_inputs/ADM_openDML/ADM_openDML.cpp:281
 #: avidemux/ADM_inputs/ADM_openDML/ADM_openDML.cpp:363
@@ -1109,13 +1110,13 @@
 
 #: avidemux/ADM_inputs/ADM_openDML/ADM_openDMLDepack.cpp:93
 msgid "Unpacking bitstream"
-msgstr ""
+msgstr "?????????????? ???? ?????????"
 
 #: avidemux/ADM_inputs/ADM_openDML/ADM_opendml_reindex.cpp:68
 msgid "Indexing"
 msgstr "?????????? ??????????"
 
-#: avidemux/ADM_libraries/ADM_lavformat/ADM_lavformat.cpp:378
+#: avidemux/ADM_libraries/ADM_lavformat/ADM_lavformat.cpp:376
 msgid "Incompatible frame rate"
 msgstr "???????? ???????? ????"
 
@@ -1131,18 +1132,19 @@
 
 #: avidemux/ADM_libraries/ADM_lvemux/ADM_muxer.cpp:92
 msgid "lvemux init failed"
-msgstr ""
+msgstr "???????? ????????????? lvemux "
 
 #: avidemux/ADM_libraries/ADM_utilities/ADM_gettext.cpp:37
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:290
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:291
 msgid "_File"
 msgstr "_??????"
 
-#: avidemux/ADM_libraries/ADM_utilities/ADM_imageLoader.cpp:191
+#: avidemux/ADM_libraries/ADM_utilities/ADM_imageLoader.cpp:193
+#, fuzzy
 msgid "Wrong Colorspace"
-msgstr ""
+msgstr "????????? ?????????? ?????"
 
-#: avidemux/ADM_libraries/ADM_utilities/ADM_imageLoader.cpp:191
+#: avidemux/ADM_libraries/ADM_utilities/ADM_imageLoader.cpp:193
 msgid "Only YV12/I420 or YUY2/I422 JPegs are supported"
 msgstr "?????????????? ???? YV12/I420 ? YUY2/I422 JPeg"
 
@@ -1189,31 +1191,31 @@
 msgid "Cannot open \"%s\" for writing."
 msgstr "??????? ?? ??????? \"%s\" ??? ???????."
 
-#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:324
+#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:327
 msgid "NTSC 4:3"
 msgstr "NTSC 4:3"
 
-#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:325
-#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:326
+#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:328
+#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:329
 msgid "NTSC 16:9"
 msgstr "NTSC 16:9"
 
-#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:327
+#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:330
 msgid "PAL 4:3"
 msgstr "PAL 4:3"
 
-#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:328
+#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:331
 msgid "PAL 16:9"
 msgstr "PAL 16:9"
 
-#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:329
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:42
+#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:332
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:43
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:376
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:398
 msgid "1:1"
 msgstr "1:1"
 
-#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:331
+#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:334
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:598
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:795
 msgid "Unknown"
@@ -1351,7 +1353,7 @@
 msgstr "%lu ????????????"
 
 #: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:74
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:243
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:242
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:845
 msgid "Normal"
 msgstr "????????"
@@ -1384,9 +1386,8 @@
 msgstr ""
 
 #: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:90
-#, fuzzy
 msgid "AVI Muxer Options"
-msgstr "???????? Mpeg2"
+msgstr "???????? AVI Muxer"
 
 #: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:188
 msgid "Error initalizing audio filters"
@@ -1414,13 +1415,13 @@
 #: avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp:93
 #: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:149
 #: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:203
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:174
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:176
 #: avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp:76
 msgid "Filter init failed"
 msgstr "? ???????????? ??? ??????? ???????"
 
 #: avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp:127
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:399
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:401
 #: avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp:100
 msgid ""
 "\n"
@@ -1430,7 +1431,7 @@
 " ?????????????????? ??? ?????????? ??????? ?????????? ;"
 
 #: avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp:152
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:435
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:437
 msgid "Aborting"
 msgstr "???????????"
 
@@ -1444,22 +1445,23 @@
 #: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:215
 #: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:233
 #: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:332
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:212
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:335
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:419
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:214
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:337
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:421
 #: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:352
 msgid "Error while encoding"
 msgstr "?????? ???? ??? ????????????"
 
 #: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:190
 #: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:244
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:224
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:226
+#, fuzzy
 msgid "KeyFrame error"
-msgstr ""
+msgstr "?????? ????????????????"
 
 #: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:190
 #: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:244
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:224
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:226
 msgid ""
 "The beginning frame is not a key frame.\n"
 "Please move the A marker."
@@ -1487,7 +1489,7 @@
 msgstr "? ????????? ?????? ?? ????? 44100, 22050 ? 11025 Hz."
 
 #: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:254
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:251
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:253
 msgid "Cannot initialize the audio stream"
 msgstr "??????? ?  ???????????? ??? ???? ????"
 
@@ -1560,8 +1562,9 @@
 msgstr ""
 
 #: avidemux/ADM_script/ADM_JSFunctions.cpp:507
+#, fuzzy
 msgid "Test uinteger"
-msgstr ""
+msgstr "?????? ??????????????"
 
 #: avidemux/ADM_script/ADM_JSFunctions.cpp:519
 #, fuzzy
@@ -1573,8 +1576,9 @@
 msgstr "????????"
 
 #: avidemux/ADM_script/ADM_JSFunctions.cpp:558
+#, fuzzy
 msgid "No Strategy"
-msgstr ""
+msgstr "?? ?????? ?????????? '%s'"
 
 #: avidemux/ADM_script/ADM_JSFunctions.cpp:559
 msgid "3:2 Pulldown"
@@ -1607,11 +1611,11 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_animated.cpp:38
 msgid "Vignette _Width:"
-msgstr ""
+msgstr "_?????? ????????????? ????????:"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_animated.cpp:39
 msgid "Vignette _Height:"
-msgstr ""
+msgstr "_???? ????????????? ????????:"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_animated.cpp:42
 msgid "Vignette frame number"
@@ -1654,6 +1658,7 @@
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:80
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:89
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:51
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:327
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:373
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:381
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:389
@@ -1661,7 +1666,7 @@
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:568
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:583
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:219
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1124
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1188
 #: avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp:105
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:101
 #: avidemux/ADM_videoFilter/ADM_vidRotate.cpp:264
@@ -1694,7 +1699,7 @@
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:93
 #, fuzzy
 msgid "_Gain mode:"
-msgstr "??????????? VHQ:"
+msgstr "?????????? ??????????????"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:95
 msgid "G_ain value:"
@@ -1765,17 +1770,17 @@
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp:216
 #, fuzzy
 msgid "Number of I frames:"
-msgstr "??????? ???? ??? ?? G.711 "
+msgstr "??????? ????????:"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp:217
 #, fuzzy
 msgid "Number of P frames:"
-msgstr "??????? ???? ??? ?? G.711 "
+msgstr "??????? ????????:"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp:218
 #, fuzzy
 msgid "Number of B frames:"
-msgstr "??????? ???? ??? ?? G.711 "
+msgstr "??????? ????????:"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp:219
 #, fuzzy
@@ -1839,35 +1844,39 @@
 msgstr "Vorbis"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:156
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:307
 msgid "aRts"
 msgstr "aRts"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:157
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:313
 msgid "ESD"
 msgstr "ESD"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:158
-#, fuzzy
 msgid "Fontconfig"
-msgstr "????????? ?????? ??? fontconfig"
+msgstr "??????? ?????????????? (Fontconfig)"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:159
 msgid "FreeType 2"
 msgstr "FreeType 2"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:160
-msgid "gettext"
-msgstr "gettext"
+msgid "Gettext"
+msgstr "Gettext"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:161
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:304
 msgid "ALSA"
 msgstr "ALSA"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:162
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:319
 msgid "OSS"
 msgstr "OSS"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:163
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:322
 msgid "SDL"
 msgstr "SDL"
 
@@ -1900,7 +1909,7 @@
 msgstr "???????????"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:178
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:406
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:404
 msgid "CPU"
 msgstr "CPU"
 
@@ -1909,7 +1918,7 @@
 msgstr "???????????? ??????????"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:48
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:43
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:44
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:42
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:380
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:402
@@ -1917,7 +1926,7 @@
 msgstr "4:3"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:49
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:44
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:45
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:43
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:384
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:406
@@ -1999,7 +2008,7 @@
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:66
 #, fuzzy
 msgid "_Interlacing:"
-msgstr "??????????"
+msgstr "?????"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:88
 msgid "libavcodec MPEG-2 Configuration"
@@ -2080,16 +2089,17 @@
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:74
 #, fuzzy
 msgid "Mi_n. quantizer:"
-msgstr "M2VRequantizer"
+msgstr "???????? ?????????? ????????"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:75
 #, fuzzy
 msgid "Ma_x. quantizer:"
-msgstr "M2VRequantizer"
+msgstr "???????? ?????????? ????????"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:76
+#, fuzzy
 msgid "Max. quantizer _difference:"
-msgstr ""
+msgstr "??????? ??????? ??? ????? ??? ????????:"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:78
 msgid "4_MV"
@@ -2101,8 +2111,9 @@
 msgstr "_??????????? ???????? ???????? (trellis quantization)"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:81
+#, fuzzy
 msgid "_Quarter pixel"
-msgstr ""
+msgstr "??????? ?? ???/????:"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:82
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1018
@@ -2112,7 +2123,7 @@
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:85
 #, fuzzy
 msgid "_Number of B frames:"
-msgstr "??????? ???? ??? ?? G.711 "
+msgstr "??????? ????????:"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:86
 msgid "_Quantization type:"
@@ -2138,7 +2149,7 @@
 msgstr "???????? ?????????:"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:98
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:374
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:372
 msgid "User Interface"
 msgstr "?????????? ????????"
 
@@ -2158,7 +2169,7 @@
 msgstr "???????? ???????? (Quantization)"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:117
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1403
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1480
 msgid "Rate Control"
 msgstr "??????? ??????"
 
@@ -2172,8 +2183,9 @@
 msgstr "_???????? U ??? V"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavDecoder.cpp:27
+#, fuzzy
 msgid "Show motion _vectors"
-msgstr ""
+msgstr "???????? ??? ??????? ??????????? ???? ??? ?????? ??? ????? ????????;"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavDecoder.cpp:29
 msgid "Decoder Options"
@@ -2192,15 +2204,16 @@
 msgstr "??????? ??????? Idx:"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:93
+#, fuzzy
 msgid "Use GlyphSet (optional):"
-msgstr ""
+msgstr "- ??? ??? ?????? ???????????? ????, ?????????????? OR."
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:93
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:210
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:369
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:367
 #, fuzzy
 msgid "Select GlyphSet file"
-msgstr "??????? GlyphFile ??? ???????????"
+msgstr "??????? ??????? ????"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:94
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:211
@@ -2230,28 +2243,30 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:136
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:255
+#, fuzzy
 msgid "Cannot load the glyphset file."
-msgstr ""
+msgstr "??????? ? ??????? ??? ??????? torrent: %1"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:156
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:276
 #, fuzzy
 msgid "GlyphSet filename"
-msgstr "?? ?????? ????? ???????"
+msgstr "  --filename      - ????? ??????? ??? ???????\n"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:156
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:276
 #, fuzzy
 msgid "Save GlyphSet file"
-msgstr "?????????? ???????"
+msgstr "?????????? ?? ??????"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:158
 msgid "Save Glyph"
 msgstr "?????????? ?????????"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:208
+#, fuzzy
 msgid "Input TS:"
-msgstr ""
+msgstr "???????\tS"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:208
 msgid "Select TS file"
@@ -2262,8 +2277,9 @@
 msgstr "????????? PID:"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:210
+#, fuzzy
 msgid "Use glyphset (optional):"
-msgstr ""
+msgstr "- ??? ??? ?????? ???????????? ????, ?????????????? OR."
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:233
 msgid "Please Select a valid TS file."
@@ -2272,7 +2288,7 @@
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:278
 #, fuzzy
 msgid "Save GlyphSet"
-msgstr "?????????? Glyph"
+msgstr "?????????? &??..."
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp:40
 #: avidemux/ADM_videoFilter/ADM_vidForcedPP.cpp:60
@@ -2280,14 +2296,14 @@
 msgstr "?????? _???????:"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp:51
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:346
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:344
 #: avidemux/ADM_videoFilter/ADM_vidForcedPP.cpp:72
 #, fuzzy
 msgid "_Horizontal deblocking"
 msgstr "????????? ???????? ?????????"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp:52
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:347
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:345
 #: avidemux/ADM_videoFilter/ADM_vidForcedPP.cpp:73
 #, fuzzy
 msgid "_Vertical deblocking"
@@ -2299,294 +2315,315 @@
 msgid "_Deringing"
 msgstr "?????? ????????? ?????????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:188
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:187
 msgid "_Use systray while encoding"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:189
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:188
 msgid "_Accept non-standard audio frequency for DVD"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:190
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:189
 msgid "_Use libavcodec MPEG-2 decoder"
 msgstr "_????? ??????????????? libavcodec MPEG-2"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:191
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:190
 msgid "Create _OpenDML files"
 msgstr "?????????? ??????? _OpenDML"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:192
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:191
 msgid "Automatically _index MPEG files"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:193
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:192
 msgid "Automatically _swap A and B if A>B"
 msgstr "???????? _???????? A ??? B, ?? A>B"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:194
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:193
 msgid "_Disable NUV audio sync"
 msgstr "_?????????????? ???????????? ???? NUV"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:196
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:195
 msgid "Automatically _build VBR map"
-msgstr ""
+msgstr "???????? ??????? ??? ????? VBR"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:197
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:196
 msgid "Automatically _rebuild index"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:198
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:197
 msgid "Automatically remove _packed bitstream"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:200
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:199
 msgid "SIMD"
 msgstr "SIMD"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:202
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:201
 msgid "Enable all SIMD"
 msgstr "???????????? ???? ??? SIMD"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:203
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:202
 msgid "Enable MMX"
 msgstr "???????????? MMX"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:204
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:203
 msgid "Enable MMXEXT"
 msgstr "???????????? MMXEXT"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:205
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:204
 msgid "Enable 3DNOW"
 msgstr "???????????? 3DNOW"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:206
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:205
 msgid "Enable 3DNOWEXT"
 msgstr "???????????? 3DNOWEXT"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:207
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:206
 msgid "Enable SSE"
 msgstr "???????????? SSE"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:208
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:207
 msgid "Enable SSE2"
 msgstr "???????????? SSE2"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:209
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:208
 msgid "Enable SSE3"
 msgstr "???????????? SSE3"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:210
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:209
 msgid "Enable SSSE3"
 msgstr "???????????? SSSE3"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:231
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:230
+#, fuzzy
 msgid "_lavc threads:"
-msgstr ""
+msgstr "???????? ??????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:232
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:231
+#, fuzzy
 msgid "_x264 threads:"
-msgstr ""
+msgstr "???????? ??????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:233
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:232
+#, fuzzy
 msgid "X_vid threads:"
-msgstr ""
+msgstr "???????? ??????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:235
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:234
+#, fuzzy
 msgid "Multi-threading"
-msgstr ""
+msgstr "Multi-aterm"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:241
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:240
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:843
 msgid "High"
 msgstr "?????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:242
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:241
 msgid "Above normal"
 msgstr "???? ??? ?? ????????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:244
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:243
 msgid "Below normal"
 msgstr "???? ??? ?? ????????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:245
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:244
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:847
 msgid "Low"
 msgstr "??????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:247
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:246
 msgid "_Encoding priority:"
 msgstr "_????????????? ?????????????:"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:248
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:247
 msgid "_Indexing/unpacking priority:"
 msgstr "????????????? ??????????? ??????????/???-??????????????:"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:249
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:248
 msgid "_Playback priority:"
 msgstr "????????????? _????????????:"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:251
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:250
 msgid "Prioritisation"
 msgstr "??????? ??????????????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:256
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:255
 msgid "_Split MPEG files every (MB):"
 msgstr "_???????? ??????? MPEG ??? (MB):"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:258
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:257
 msgid "_Use alternative tag for MP3 in .mp4"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:261
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:260
 msgid "GTK+ (slow)"
 msgstr "GTK+ (????)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:263
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:262
 msgid "XVideo (best)"
 msgstr "XVideo (????????)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:267
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:266
 msgid "SDL (GDI)"
 msgstr "SDL (GDI)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:268
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:267
 msgid "SDL (DirectX)"
 msgstr "SDL (DirectX)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:270
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:269
 msgid "SDL (good)"
 msgstr "SDL (????)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:274
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:273
 msgid "Video _display:"
 msgstr "_???????? ??????:"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:279
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:278
 msgid "No alerts"
 msgstr "????? ????????????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:280
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:279
 msgid "Display only error alerts"
 msgstr "??????? ???? ??? ???????????? ?????????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:281
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:280
 msgid "Display all alerts"
 msgstr "??????? ???? ??? ????????????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:283
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:282
 #, fuzzy
 msgid "_Message level:"
 msgstr "?? ???????? ?????? ???? ??????? ??????? ?????????? ?????????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:288
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:287
 msgid "PCM"
 msgstr "PCM"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:289
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:288
 msgid "Master"
 msgstr "????????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:290
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:289
 msgid "_Volume control:"
 msgstr "_??????? ??????? ????:"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:295
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:294
+#, fuzzy
 msgid "No downmixing"
-msgstr ""
+msgstr "(????? ?????)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:297
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:296
 msgid "Pro Logic"
 msgstr "Pro Logic"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:298
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:297
 msgid "Pro Logic II"
 msgstr "Pro Logic II"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:300
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:299
+#, fuzzy
 msgid "_Local playback downmixing:"
-msgstr ""
+msgstr "? ?????? ??????????? NMM ???????."
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:332
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:310
+#, fuzzy
+msgid "Core Audio"
+msgstr "???????????? ?&???"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:316
+msgid "JACK"
+msgstr "JACK"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:325
+msgid "Win32"
+msgstr "Win32"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:330
 msgid "_Audio output:"
 msgstr "_?????? ????:"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:335
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:333
 msgid "ALSA _device:"
 msgstr "??????? _ALSA:"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:348
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:346
 #, fuzzy
 msgid "De_ringing"
-msgstr "?????? ????????? ?????????"
+msgstr "???&?????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:349
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:347
 #: avidemux/ADM_videoFilter/ADM_vidMSharpen.cpp:167
 #: avidemux/ADM_videoFilter/ADM_vidMsmooth.cpp:197
 msgid "_Strength:"
 msgstr "_?????:"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:350
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:348
 msgid "Default Postprocessing"
 msgstr "????????????? ??????????????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:364
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:362
 msgid "_Filter directory:"
 msgstr "????????? _???????:"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:364
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:362
 msgid "Select filter directory"
 msgstr "??????? ????????? ???????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:365
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:363
 msgid "_Load external filters"
 msgstr "_??????? ?????????? ???????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:368
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:366
+#, fuzzy
 msgid "Use _Global GlyphSet"
-msgstr ""
+msgstr "????? ????????? ????????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:369
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:367
 msgid "Gl_yphSet:"
 msgstr "Gl_yphSet:"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:378
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:376
 msgid "Automation"
 msgstr "??????????????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:382
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:380
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp:438
 msgid "Input"
 msgstr "???????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:386
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:384
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp:439
 msgid "Output"
 msgstr "??????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:391
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:394
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:397
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:389
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:392
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:395
 msgid "Audio"
 msgstr "????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:402
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:400
 #: avidemux/gtk_gui.cpp:2004
 msgid "Video"
 msgstr "??????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:410
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:408
 msgid "Threading"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:414
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:412
+#, fuzzy
 msgid "Global GlyphSet"
-msgstr ""
+msgstr "??????? ???????????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:418
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:416
 msgid "External Filters"
 msgstr "????????? ??????"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:422
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:420
 msgid "Preferences"
 msgstr "???????????"
 
@@ -2597,7 +2634,7 @@
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_requant.cpp:51
 #, fuzzy
 msgid "Requant Configuration"
-msgstr "??????? Xvid4"
+msgstr "?????? ?????????"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:33
 msgid "VCD"
@@ -2623,22 +2660,22 @@
 msgid "PSP full res (720*480"
 msgstr "PSP ?????? ??????? (720*480"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:53
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:54
 msgid "_Target type:"
 msgstr "_???? ???????????:"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:54
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:55
 msgid "_Source aspect ratio:"
 msgstr "_???????? ??????? ?????:"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:55
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:56
 msgid "_Destination aspect ratio:"
 msgstr "???????? _??????? ??????????:"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:60
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:61
 #, fuzzy
 msgid "Auto Wizard"
-msgstr "???????? ????????"
+msgstr "????? cipher"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:88
 msgid "_Subtitle file:"
@@ -2685,44 +2722,48 @@
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:46
 #: avidemux/ADM_videoFilter/ADM_vidYadif.cpp:178
 msgid "Top field first"
-msgstr ""
+msgstr "????? ?? ????? ?????"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:47
 #: avidemux/ADM_videoFilter/ADM_vidYadif.cpp:177
 msgid "Bottom field first"
-msgstr ""
+msgstr "????? ?? ???? ?????"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:52
 msgid "Bottom field (keep top)"
-msgstr ""
+msgstr "???? ????? (????????? ??? ????)"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:53
 msgid "Top field (keep bottom)"
-msgstr ""
+msgstr "???? ????? (????????? ??? ????)"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:58
+#, fuzzy
 msgid "Cubic interpolation"
-msgstr ""
+msgstr "????????? AHD"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:59
 msgid "Modified ELA"
 msgstr "???????????? ELA"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:60
+#, fuzzy
 msgid "Kernel interpolation"
-msgstr ""
+msgstr "????????? AHD"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:61
 msgid "Modified ELA-2"
 msgstr "???????????? ELA-2"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:66
+#, fuzzy
 msgid "4 fields check"
-msgstr ""
+msgstr "??????? ???????"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:67
+#, fuzzy
 msgid "5 fields check"
-msgstr ""
+msgstr "??????? ???????"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:68
 msgid "4 fields check (no avg)"
@@ -2740,7 +2781,7 @@
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:76
 #, fuzzy
 msgid "Full link"
-msgstr "??????? ?? ???/????:"
+msgstr "????????????? ????????? 1"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:77
 msgid "Y to UV"
@@ -2765,13 +2806,13 @@
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:93
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:419
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:433
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1218
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1213
 msgid "0"
 msgstr "0"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:83
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:793
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:805
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:841
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:852
 msgid "1"
 msgstr "1"
 
@@ -2783,8 +2824,9 @@
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:111
 #: avidemux/ADM_videoFilter/ADM_vidDGbob.cpp:90
 #: avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp:92
+#, fuzzy
 msgid "_Field order:"
-msgstr ""
+msgstr "<b>????? Subpixel</b>:"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:92
 #, fuzzy
@@ -2812,8 +2854,9 @@
 msgstr "????? ??? ch_roma ??? ?? ????? ????????"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:101
+#, fuzzy
 msgid "Try _weave"
-msgstr ""
+msgstr "??????? ???????"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:102
 msgid "_Denoise"
@@ -2844,7 +2887,7 @@
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:110
 #, fuzzy
 msgid "Combe_d threshold:"
-msgstr "??????? ????????"
+msgstr "??????? ????????:"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:111
 msgid "Artefact _protection threshold:"
@@ -2884,21 +2927,22 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:45
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:50
+#, fuzzy
 msgid "The selected vobfile does not exist"
-msgstr ""
+msgstr "? ?????????? ?????????? ??? ???????."
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:55
 msgid "Please select a correct VobSub path/dir"
 msgstr "???????? ??????? ?? ????? ????????/???????? ??? VobSub"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_about.cpp:66
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:273
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:274
 msgid "Avidemux"
 msgstr "Avidemux"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_about.cpp:67
 msgid "? 2001-2007 Mean"
-msgstr ""
+msgstr "? 2001-2007 Mean"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_about.cpp:68
 msgid "Multiplatform video editor"
@@ -3251,6 +3295,350 @@
 "library.  If this is what you want to do, use the GNU Library General\n"
 "Public License instead of this License."
 msgstr ""
+"?? Avidemux ????? ???????? ?????????. ??????? ?? ?? ?????????? ???/? ?? ?? ???????????,\n"
+"??? ???? ????? ??? GNU ??????? ???????? ?????? ?????? 2,\n"
+"???? ???? ??????????? ??? ?? Free Software Foundation.\n"
+"\n"
+"\t\t    GNU GENERAL PUBLIC LICENSE\n"
+"\t\t       Version 2, June 1991\n"
+"\n"
+" Copyright (C) 1989, 1991 Free Software Foundation, Inc.\n"
+"                       51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA\n"
+" Everyone is permitted to copy and distribute verbatim copies\n"
+" of this license document, but changing it is not allowed.\n"
+"\n"
+"\t\t\t    Preamble\n"
+"\n"
+"  The licenses for most software are designed to take away your\n"
+"freedom to share and change it.  By contrast, the GNU General Public\n"
+"License is intended to guarantee your freedom to share and change free\n"
+"software--to make sure the software is free for all its users.  This\n"
+"General Public License applies to most of the Free Software\n"
+"Foundation's software and to any other program whose authors commit to\n"
+"using it.  (Some other Free Software Foundation software is covered by\n"
+"the GNU Library General Public License instead.)  You can apply it to\n"
+"your programs, too.\n"
+"\n"
+"  When we speak of free software, we are referring to freedom, not\n"
+"price.  Our General Public Licenses are designed to make sure that you\n"
+"have the freedom to distribute copies of free software (and charge for\n"
+"this service if you wish), that you receive source code or can get it\n"
+"if you want it, that you can change the software or use pieces of it\n"
+"in new free programs; and that you know you can do these things.\n"
+"\n"
+"  To protect your rights, we need to make restrictions that forbid\n"
+"anyone to deny you these rights or to ask you to surrender the rights.\n"
+"These restrictions translate to certain responsibilities for you if you\n"
+"distribute copies of the software, or if you modify it.\n"
+"\n"
+"  For example, if you distribute copies of such a program, whether\n"
+"gratis or for a fee, you must give the recipients all the rights that\n"
+"you have.  You must make sure that they, too, receive or can get the\n"
+"source code.  And you must show them these terms so they know their\n"
+"rights.\n"
+"\n"
+"  We protect your rights with two steps: (1) copyright the software, and\n"
+"(2) offer you this license which gives you legal permission to copy,\n"
+"distribute and/or modify the software.\n"
+"\n"
+"  Also, for each author's protection and ours, we want to make certain\n"
+"that everyone understands that there is no warranty for this free\n"
+"software.  If the software is modified by someone else and passed on, we\n"
+"want its recipients to know that what they have is not the original, so\n"
+"that any problems introduced by others will not reflect on the original\n"
+"authors' reputations.\n"
+"\n"
+"  Finally, any free program is threatened constantly by software\n"
+"patents.  We wish to avoid the danger that redistributors of a free\n"
+"program will individually obtain patent licenses, in effect making the\n"
+"program proprietary.  To prevent this, we have made it clear that any\n"
+"patent must be licensed for everyone's free use or not licensed at all.\n"
+"\n"
+"  The precise terms and conditions for copying, distribution and\n"
+"modification follow.\n"
+"\n"
+"\t\t    GNU GENERAL PUBLIC LICENSE\n"
+"   TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION\n"
+"\n"
+"  0. This License applies to any program or other work which contains\n"
+"a notice placed by the copyright holder saying it may be distributed\n"
+"under the terms of this General Public License.  The \"Program\", below,\n"
+"refers to any such program or work, and a \"work based on the Program\"\n"
+"means either the Program or any derivative work under copyright law:\n"
+"that is to say, a work containing the Program or a portion of it,\n"
+"either verbatim or with modifications and/or translated into another\n"
+"language.  (Hereinafter, translation is included without limitation in\n"
+"the term \"modification\".)  Each licensee is addressed as \"you\".\n"
+"\n"
+"Activities other than copying, distribution and modification are not\n"
+"covered by this License; they are outside its scope.  The act of\n"
+"running the Program is not restricted, and the output from the Program\n"
+"is covered only if its contents constitute a work based on the\n"
+"Program (independent of having been made by running the Program).\n"
+"Whether that is true depends on what the Program does.\n"
+"\n"
+"  1. You may copy and distribute verbatim copies of the Program's\n"
+"source code as you receive it, in any medium, provided that you\n"
+"conspicuously and appropriately publish on each copy an appropriate\n"
+"copyright notice and disclaimer of warranty; keep intact all the\n"
+"notices that refer to this License and to the absence of any warranty;\n"
+"and give any other recipients of the Program a copy of this License\n"
+"along with the Program.\n"
+"\n"
+"You may charge a fee for the physical act of transferring a copy, and\n"
+"you may at your option offer warranty protection in exchange for a fee.\n"
+"\n"
+"  2. You may modify your copy or copies of the Program or any portion\n"
+"of it, thus forming a work based on the Program, and copy and\n"
+"distribute such modifications or work under the terms of Section 1\n"
+"above, provided that you also meet all of these conditions:\n"
+"\n"
+"    a) You must cause the modified files to carry prominent notices\n"
+"    stating that you changed the files and the date of any change.\n"
+"\n"
+"    b) You must cause any work that you distribute or publish, that in\n"
+"    whole or in part contains or is derived from the Program or any\n"
+"    part thereof, to be licensed as a whole at no charge to all third\n"
+"    parties under the terms of this License.\n"
+"\n"
+"    c) If the modified program normally reads commands interactively\n"
+"    when run, you must cause it, when started running for such\n"
+"    interactive use in the most ordinary way, to print or display an\n"
+"    announcement including an appropriate copyright notice and a\n"
+"    notice that there is no warranty (or else, saying that you provide\n"
+"    a warranty) and that users may redistribute the program under\n"
+"    these conditions, and telling the user how to view a copy of this\n"
+"    License.  (Exception: if the Program itself is interactive but\n"
+"    does not normally print such an announcement, your work based on\n"
+"    the Program is not required to print an announcement.)\n"
+"\n"
+"These requirements apply to the modified work as a whole.  If\n"
+"identifiable sections of that work are not derived from the Program,\n"
+"and can be reasonably considered independent and separate works in\n"
+"themselves, then this License, and its terms, do not apply to those\n"
+"sections when you distribute them as separate works.  But when you\n"
+"distribute the same sections as part of a whole which is a work based\n"
+"on the Program, the distribution of the whole must be on the terms of\n"
+"this License, whose permissions for other licensees extend to the\n"
+"entire whole, and thus to each and every part regardless of who wrote it.\n"
+"\n"
+"Thus, it is not the intent of this section to claim rights or contest\n"
+"your rights to work written entirely by you; rather, the intent is to\n"
+"exercise the right to control the distribution of derivative or\n"
+"collective works based on the Program.\n"
+"\n"
+"In addition, mere aggregation of another work not based on the Program\n"
+"with the Program (or with a work based on the Program) on a volume of\n"
+"a storage or distribution medium does not bring the other work under\n"
+"the scope of this License.\n"
+"\n"
+"  3. You may copy and distribute the Program (or a work based on it,\n"
+"under Section 2) in object code or executable form under the terms of\n"
+"Sections 1 and 2 above provided that you also do one of the following:\n"
+"\n"
+"    a) Accompany it with the complete corresponding machine-readable\n"
+"    source code, which must be distributed under the terms of Sections\n"
+"    1 and 2 above on a medium customarily used for software interchange; or,\n"
+"\n"
+"    b) Accompany it with a written offer, valid for at least three\n"
+"    years, to give any third party, for a charge no more than your\n"
+"    cost of physically performing source distribution, a complete\n"
+"    machine-readable copy of the corresponding source code, to be\n"
+"    distributed under the terms of Sections 1 and 2 above on a medium\n"
+"    customarily used for software interchange; or,\n"
+"\n"
+"    c) Accompany it with the information you received as to the offer\n"
+"    to distribute corresponding source code.  (This alternative is\n"
+"    allowed only for noncommercial distribution and only if you\n"
+"    received the program in object code or executable form with such\n"
+"    an offer, in accord with Subsection b above.)\n"
+"\n"
+"The source code for a work means the preferred form of the work for\n"
+"making modifications to it.  For an executable work, complete source\n"
+"code means all the source code for all modules it contains, plus any\n"
+"associated interface definition files, plus the scripts used to\n"
+"control compilation and installation of the executable.  However, as a\n"
+"special exception, the source code distributed need not include\n"
+"anything that is normally distributed (in either source or binary\n"
+"form) with the major components (compiler, kernel, and so on) of the\n"
+"operating system on which the executable runs, unless that component\n"
+"itself accompanies the executable.\n"
+"\n"
+"If distribution of executable or object code is made by offering\n"
+"access to copy from a designated place, then offering equivalent\n"
+"access to copy the source code from the same place counts as\n"
+"distribution of the source code, even though third parties are not\n"
+"compelled to copy the source along with the object code.\n"
+"\n"
+"  4. You may not copy, modify, sublicense, or distribute the Program\n"
+"except as expressly provided under this License.  Any attempt\n"
+"otherwise to copy, modify, sublicense or distribute the Program is\n"
+"void, and will automatically terminate your rights under this License.\n"
+"However, parties who have received copies, or rights, from you under\n"
+"this License will not have their licenses terminated so long as such\n"
+"parties remain in full compliance.\n"
+"\n"
+"  5. You are not required to accept this License, since you have not\n"
+"signed it.  However, nothing else grants you permission to modify or\n"
+"distribute the Program or its derivative works.  These actions are\n"
+"prohibited by law if you do not accept this License.  Therefore, by\n"
+"modifying or distributing the Program (or any work based on the\n"
+"Program), you indicate your acceptance of this License to do so, and\n"
+"all its terms and conditions for copying, distributing or modifying\n"
+"the Program or works based on it.\n"
+"\n"
+"  6. Each time you redistribute the Program (or any work based on the\n"
+"Program), the recipient automatically receives a license from the\n"
+"original licensor to copy, distribute or modify the Program subject to\n"
+"these terms and conditions.  You may not impose any further\n"
+"restrictions on the recipients' exercise of the rights granted herein.\n"
+"You are not responsible for enforcing compliance by third parties to\n"
+"this License.\n"
+"\n"
+"  7. If, as a consequence of a court judgment or allegation of patent\n"
+"infringement or for any other reason (not limited to patent issues),\n"
+"conditions are imposed on you (whether by court order, agreement or\n"
+"otherwise) that contradict the conditions of this License, they do not\n"
+"excuse you from the conditions of this License.  If you cannot\n"
+"distribute so as to satisfy simultaneously your obligations under this\n"
+"License and any other pertinent obligations, then as a consequence you\n"
+"may not distribute the Program at all.  For example, if a patent\n"
+"license would not permit royalty-free redistribution of the Program by\n"
+"all those who receive copies directly or indirectly through you, then\n"
+"the only way you could satisfy both it and this License would be to\n"
+"refrain entirely from distribution of the Program.\n"
+"\n"
+"If any portion of this section is held invalid or unenforceable under\n"
+"any particular circumstance, the balance of the section is intended to\n"
+"apply and the section as a whole is intended to apply in other\n"
+"circumstances.\n"
+"\n"
+"It is not the purpose of this section to induce you to infringe any\n"
+"patents or other property right claims or to contest validity of any\n"
+"such claims; this section has the sole purpose of protecting the\n"
+"integrity of the free software distribution system, which is\n"
+"implemented by public license practices.  Many people have made\n"
+"generous contributions to the wide range of software distributed\n"
+"through that system in reliance on consistent application of that\n"
+"system; it is up to the author/donor to decide if he or she is willing\n"
+"to distribute software through any other system and a licensee cannot\n"
+"impose that choice.\n"
+"\n"
+"This section is intended to make thoroughly clear what is believed to\n"
+"be a consequence of the rest of this License.\n"
+"\n"
+"  8. If the distribution and/or use of the Program is restricted in\n"
+"certain countries either by patents or by copyrighted interfaces, the\n"
+"original copyright holder who places the Program under this License\n"
+"may add an explicit geographical distribution limitation excluding\n"
+"those countries, so that distribution is permitted only in or among\n"
+"countries not thus excluded.  In such case, this License incorporates\n"
+"the limitation as if written in the body of this License.\n"
+"\n"
+"  9. The Free Software Foundation may publish revised and/or new versions\n"
+"of the General Public License from time to time.  Such new versions will\n"
+"be similar in spirit to the present version, but may differ in detail to\n"
+"address new problems or concerns.\n"
+"\n"
+"Each version is given a distinguishing version number.  If the Program\n"
+"specifies a version number of this License which applies to it and \"any\n"
+"later version\", you have the option of following the terms and conditions\n"
+"either of that version or of any later version published by the Free\n"
+"Software Foundation.  If the Program does not specify a version number of\n"
+"this License, you may choose any version ever published by the Free Software\n"
+"Foundation.\n"
+"\n"
+"  10. If you wish to incorporate parts of the Program into other free\n"
+"programs whose distribution conditions are different, write to the author\n"
+"to ask for permission.  For software which is copyrighted by the Free\n"
+"Software Foundation, write to the Free Software Foundation; we sometimes\n"
+"make exceptions for this.  Our decision will be guided by the two goals\n"
+"of preserving the free status of all derivatives of our free software and\n"
+"of promoting the sharing and reuse of software generally.\n"
+"\n"
+"\t\t\t    NO WARRANTY\n"
+"\n"
+"  11. BECAUSE THE PROGRAM IS LICENSED FREE OF CHARGE, THERE IS NO WARRANTY\n"
+"FOR THE PROGRAM, TO THE EXTENT PERMITTED BY APPLICABLE LAW.  EXCEPT WHEN\n"
+"OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR OTHER PARTIES\n"
+"PROVIDE THE PROGRAM \"AS IS\" WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESSED\n"
+"OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF\n"
+"MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  THE ENTIRE RISK AS\n"
+"TO THE QUALITY AND PERFORMANCE OF THE PROGRAM IS WITH YOU.  SHOULD THE\n"
+"PROGRAM PROVE DEFECTIVE, YOU ASSUME THE COST OF ALL NECESSARY SERVICING,\n"
+"REPAIR OR CORRECTION.\n"
+"\n"
+"  12. IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN WRITING\n"
+"WILL ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MAY MODIFY AND/OR\n"
+"REDISTRIBUTE THE PROGRAM AS PERMITTED ABOVE, BE LIABLE TO YOU FOR DAMAGES,\n"
+"INCLUDING ANY GENERAL, SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES ARISING\n"
+"OUT OF THE USE OR INABILITY TO USE THE PROGRAM (INCLUDING BUT NOT LIMITED\n"
+"TO LOSS OF DATA OR DATA BEING RENDERED INACCURATE OR LOSSES SUSTAINED BY\n"
+"YOU OR THIRD PARTIES OR A FAILURE OF THE PROGRAM TO OPERATE WITH ANY OTHER\n"
+"PROGRAMS), EVEN IF SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE\n"
+"POSSIBILITY OF SUCH DAMAGES.\n"
+"\n"
+"\t\t     END OF TERMS AND CONDITIONS\n"
+"\n"
+"\t    How to Apply These Terms to Your New Programs\n"
+"\n"
+"  If you develop a new program, and you want it to be of the greatest\n"
+"possible use to the public, the best way to achieve this is to make it\n"
+"free software which everyone can redistribute and change under these terms.\n"
+"\n"
+"  To do so, attach the following notices to the program.  It is safest\n"
+"to attach them to the start of each source file to most effectively\n"
+"convey the exclusion of warranty; and each file should have at least\n"
+"the \"copyright\" line and a pointer to where the full notice is found.\n"
+"\n"
+"    <one line to give the program's name and a brief idea of what it does.>\n"
+"    Copyright (C) <year>  <name of author>\n"
+"\n"
+"    This program is free software; you can redistribute it and/or modify\n"
+"    it under the terms of the GNU General Public License as published by\n"
+"    the Free Software Foundation; either version 2 of the License, or\n"
+"    (at your option) any later version.\n"
+"\n"
+"    This program is distributed in the hope that it will be useful,\n"
+"    but WITHOUT ANY WARRANTY; without even the implied warranty of\n"
+"    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n"
+"    GNU General Public License for more details.\n"
+"\n"
+"    You should have received a copy of the GNU General Public License\n"
+"    along with this program; if not, write to the Free Software\n"
+"    Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA\n"
+"\n"
+"\n"
+"Also add information on how to contact you by electronic and paper mail.\n"
+"\n"
+"If the program is interactive, make it output a short notice like this\n"
+"when it starts in an interactive mode:\n"
+"\n"
+"    Gnomovision version 69, Copyright (C) year name of author\n"
+"    Gnomovision comes with ABSOLUTELY NO WARRANTY; for details type `show w'.\n"
+"    This is free software, and you are welcome to redistribute it\n"
+"    under certain conditions; type `show c' for details.\n"
+"\n"
+"The hypothetical commands `show w' and `show c' should show the appropriate\n"
+"parts of the General Public License.  Of course, the commands you use may\n"
+"be called something other than `show w' and `show c'; they could even be\n"
+"mouse-clicks or menu items--whatever suits your program.\n"
+"\n"
+"You should also get your employer (if you work as a programmer) or your\n"
+"school, if any, to sign a \"copyright disclaimer\" for the program, if\n"
+"necessary.  Here is a sample; alter the names:\n"
+"\n"
+"  Yoyodyne, Inc., hereby disclaims all copyright interest in the program\n"
+"  `Gnomovision' (which makes passes at compilers) written by James Hacker.\n"
+"\n"
+"  <signature of Ty Coon>, 1 April 1989\n"
+"  Ty Coon, President of Vice\n"
+"\n"
+"This General Public License does not permit incorporating your program into\n"
+"proprietary programs.  If your program is a subroutine library, you may\n"
+"consider it more useful to permit linking proprietary applications with the\n"
+"library.  If this is what you want to do, use the GNU Library General\n"
+"Public License instead of this License."
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_about.cpp:71
 msgid "http://www.avidemux.org"
@@ -3273,7 +3661,7 @@
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_asharp.cpp:71
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_chromaShift.cpp:67
 msgid "ASHARP"
-msgstr "ASHARP"
+msgstr "ASHARP (???????)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_asharp.cpp:183
 msgid "ASharp by MarcFD"
@@ -3288,8 +3676,9 @@
 msgstr "????? :"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_asharp.cpp:212
+#, fuzzy
 msgid "Block Adaptative :"
-msgstr ""
+msgstr "???????????? DCT"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_asharp.cpp:220
 #, fuzzy
@@ -3308,7 +3697,7 @@
 msgstr "?????????????"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:401
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:996
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:999
 msgid "Calculator"
 msgstr "???????????"
 
@@ -3344,8 +3733,9 @@
 msgstr "_????????????? ??????? (MB):"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:507
+#, fuzzy
 msgid "Output container format"
-msgstr ""
+msgstr "????? ?????? ????????????:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:534
 msgid "Total size"
@@ -3372,7 +3762,7 @@
 msgstr "DVD5"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:559
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:808
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:855
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_threadCount.cpp:87
 msgid "Custom"
 msgstr "?????????????"
@@ -3807,7 +4197,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:51
 msgid "Abort Requested"
-msgstr ""
+msgstr "??????????? ??? ???????"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:51
 msgid "Do you want to abort indexing ?"
@@ -3946,7 +4336,6 @@
 msgstr "???????? ?? ?????? ??????"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs_save.cpp:145
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:545
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_filesel.cpp:90
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_filesel.cpp:244
 msgid "_Browse..."
@@ -3970,7 +4359,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_mpdelogo.cpp:379
 msgid "Mplayer Delogo"
-msgstr ""
+msgstr "MPlayer ????????? ?????????"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_mpdelogo.cpp:397
 msgid "X"
@@ -3995,7 +4384,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:61
 msgid "Mini OCR"
-msgstr ""
+msgstr "????? OCR"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:86
 msgid "0:0:0"
@@ -4076,83 +4465,15 @@
 msgstr ""
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_partial.cpp:167
+#, fuzzy
 msgid "Configure partialized filter"
-msgstr ""
+msgstr "??????? ??? ??????? ??? ????????????????..."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:193
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:269
 #, fuzzy
 msgid "Particle Analysis Configuration"
 msgstr "??????? Xvid4"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:404
-#, fuzzy
-msgid "Particle Detection"
-msgstr "??????? Macroblock:"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:431
-msgid "Mi_nimum area for a particle to be detected:    "
-msgstr ""
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:445
-msgid "Ma_ximum area for a particle to be detected:   "
-msgstr ""
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:463
-msgid "_Left side crop (ignore this many pixels on the left):        "
-msgstr "???????? _????????? ??????? (??????? ???? ????? ??? ????????):"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:477
-msgid "_Right side crop (ignore this many pixels on the right):     "
-msgstr "???????? _?????? ??????? (??????? ???? ????? ??? ?????):"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:491
-msgid "_Top crop (ignore this many pixels on the top):                  "
-msgstr "???????? _???? ??????? (??????? ???? ????? ?????):"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:505
-msgid "_Bottom crop (ignore this many pixels on the bottom):   "
-msgstr "???????? _???? ??????? (??????? ???? ????? ????):"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:523
-msgid "Output _Format:   "
-msgstr "_????? ????????????? ??????:"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:535
-#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:189
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:174
-msgid "_Output File:"
-msgstr "_?????? ??????:"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:553
-msgid "_Camera Number for output file:      "
-msgstr ""
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:567
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1332
-msgid "_Debugging settings (bits):   "
-msgstr "????????? _?????????????? (bits):   "
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:600
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1365
-#, fuzzy
-msgid "Swiss Army Knife output"
-msgstr "??????? Xvid4"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:601
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1366
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:405
-msgid "Final output"
-msgstr "?????? ?????????? ??????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:617
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_preview.cpp:180
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1382
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:418
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp:336
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtersub.cpp:150
-msgid "Preview"
-msgstr "?????????????"
-
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_pause.cpp:93
 msgid "Paused"
 msgstr "?? ?????"
@@ -4176,9 +4497,8 @@
 msgstr "????????"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_pipe.cpp:95
-#, fuzzy
 msgid "Pipe to"
-msgstr "&??????????????? ???? ??? ???????"
+msgstr "?????????? ???"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_pipe.cpp:104
 msgid "Application path/name (/usr/bin/sox...)"
@@ -4189,6 +4509,13 @@
 msgid "Full parameter line"
 msgstr "????? ?????????? ??????? ??????? %1"
 
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_preview.cpp:180
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:542
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp:336
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtersub.cpp:150
+msgid "Preview"
+msgstr "?????????????"
+
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:40
 msgid "No"
 msgstr "???"
@@ -4268,7 +4595,7 @@
 msgstr "????? ??????????:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:311
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1060
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1063
 msgid "<b>Video</b>"
 msgstr "<b>??????</b>"
 
@@ -4277,13 +4604,14 @@
 msgstr ""
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:344
+#, fuzzy
 msgid "Packed Bitstream:"
-msgstr ""
+msgstr "%1 %"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:358
 #, fuzzy
 msgid "Quarter Pixel:"
-msgstr "???????? ?????????:"
+msgstr "??????? ?? ???/????:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:372
 msgid "<b>Extra Video Properties</b>"
@@ -4314,7 +4642,7 @@
 msgstr "?????????? ?????? bit:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:489
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1100
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1103
 msgid "<b>Audio</b>"
 msgstr "<b>????</b>"
 
@@ -4383,174 +4711,47 @@
 msgid "Font Size:"
 msgstr "??????? ??????????????:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:405
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:381
-#, fuzzy
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:505
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:388
 msgid "Swiss Army Knife Configuration"
-msgstr "??????? Xvid4"
+msgstr "??????? ????????? ??????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:925
-msgid "Select _Operation on each pixel P and input A:   "
-msgstr ""
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:937
-msgid "Input _Type:   "
-msgstr "????? ????????? ???????:   "
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:956
-msgid "Input _File (convolution kernel):   "
-msgstr ""
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:960
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:975
-#, fuzzy
-msgid "Select Convolution Kernel File"
-msgstr "??????? ???????  ?????????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:971
-msgid "Input _File (image file):   "
-msgstr "?????? _????????? (?????? ???????):"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:997
-msgid "First, _add to each float pixel value:   "
-msgstr ""
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1011
-msgid "Then, _multiply each float pixel value by:   "
-msgstr ""
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1025
-msgid "Mi_nimum loaded pixel value (will be scaled to 0):"
-msgstr ""
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1051
-msgid "Ma_ximum loaded pixel value (will be scaled to 255):"
-msgstr ""
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1073
-msgid "Pixel Value Scaling as Image File is Loaded"
-msgstr ""
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1085
-msgid "Input _Constant:      "
-msgstr ""
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1102
-msgid "Memory constant _alpha:   "
-msgstr ""
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1112
-#, fuzzy
-msgid " = 1 / "
-msgstr "P' = P / A"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1130
-msgid "_Initial average (\"head start\") is "
-msgstr ""
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1137
-msgid "straight"
-msgstr "??????????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1138
-#, fuzzy
-msgid "rolling"
-msgstr "???????????? ???????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1140
-msgid " average"
-msgstr " ????? ????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1148
-msgid "      of frames "
-msgstr "      ??? ????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1158
-msgid " through "
-msgstr " ????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1176
-msgid "Integer _Bias (will be added to result of selected operation):"
-msgstr ""
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1216
-msgid "First, _add to each pixel result value:   "
-msgstr ""
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1230
-msgid "Then, _multiply each pixel result value by:   "
-msgstr ""
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1244
-msgid "Mi_nimum result value (will be scaled to 0):"
-msgstr ""
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1270
-msgid "Ma_ximum result value (will be scaled to 255):"
-msgstr ""
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1292
-msgid "Pixel Value Scaling on Result of Selected Operation"
-msgstr ""
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1301
-msgid "(description of current config will go here)"
-msgstr ""
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1318
-msgid "_Histogram every N frames (0 to disable):   "
-msgstr "_?????????? ???? ? ???? (0 ??? ??????????????):"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1390
-msgid "Enable Preview"
-msgstr "???????????? ??????????????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:128
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:200
 #: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:163
 msgid "Threshold Configuration"
 msgstr "??????? ?????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:294
-#, fuzzy
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:423
 msgid "Minimum value to be in-range:"
-msgstr "_???????? ????, ????? ??? ?????:"
+msgstr "???????? ????, ????? ??? ?????:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:327
-#, fuzzy
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:456
 msgid "Maximum value to be in-range:"
-msgstr "_??????? ????, ????? ??? ?????:"
+msgstr "??????? ????, ????? ??? ?????:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:358
-#, fuzzy
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:487
 msgid "Output values:   "
-msgstr "????? ????????????? ??????:"
+msgstr "????? ????????????? ??????:   "
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:365
-#, fuzzy
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:494
 msgid "In-range values go black, out-of-range values go white"
 msgstr "?? ????? ??? ????? ????? ???????? ??????, ?? ????? ??? ????? ???????? ??????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:366
-#, fuzzy
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:495
 msgid "In-range values go white, out-of-range values go black"
 msgstr "?? ????? ??? ????? ????? ???????? ??????, ?? ????? ??? ????? ???????? ??????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:372
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:501
 msgid "Debugging settings (bits):   "
 msgstr "????????? ?????????????? (bits):   "
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:404
-#, fuzzy
-msgid "Threshold output"
-msgstr "??????? :"
-
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vcodec.cpp:104
 msgid "Video encoder"
 msgstr "????????????? ??????"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vcodec.cpp:118
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1080
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1120
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1083
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1123
 msgid "Configure"
 msgstr "???????"
 
@@ -4598,609 +4799,613 @@
 msgid "<b>Time remaining:</b>"
 msgstr "<b>?????? ??? ????????:</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:560
-msgid "X264 configuration"
-msgstr "??????? X264"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:110
+#, fuzzy
+msgid "Hadamard Exhaustive Search"
+msgstr "?????? ??????????:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:575
-msgid "Encoding Mode:"
-msgstr "????????? ??????????? ?????????????:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:596
+msgid "x264 Configuration"
+msgstr "??????? x264"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:587
-msgid "Entry input for target file size or bitrate"
-msgstr ""
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:617
+msgid "Encoding Mode"
+msgstr "????????? ??????????? ?????????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:589
-msgid "Quantizer (0-51):"
-msgstr "?????????? ???????? (0-51):"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:624
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:480
+msgid "Quantizer"
+msgstr "?????????? ???????? (Quantizer)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:602
-msgid "Constant Quantizer - Each frame will the same compression. Low numbers equal higher quality while high numbers equal lower quality"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:631
+msgid "Target Size"
+msgstr "??????? ???????????"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:644
+msgid "Constant Quantizer - Each frame will have the same compression. Low numbers equal higher quality while high numbers equal lower quality."
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:612
-msgid "Target Size:"
-msgstr "??????? ???????????:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:652
+msgid "Target bitrate or file size"
+msgstr "?????? bit ??????????? ? ??????? ???????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:624
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:660
 msgid "Single Pass - Quality Quantizer (Average)"
 msgstr "????? ?????????? - "
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:625
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:661
 msgid "Single Pass - Quality Quantizer (Constant)"
 msgstr "????? ?????????? - "
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:626
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:662
 msgid "Single Pass - Bitrate (Average)"
 msgstr "????? ?????????? - ?????? bit (????? ????)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:627
-msgid "Two Pass - File Size"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:663
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:768
+msgid "Two Pass - Video Size"
 msgstr "??? ????????? - ??????? ???????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:628
-msgid "Two Pass - Average bitrate"
-msgstr "??? ????????? - ????? ???? ?????? bit"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:664
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:772
+msgid "Two Pass - Average Bitrate"
+msgstr "??? ????????? - ????? ???? ?????? Bit"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:630
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:666
 msgid "Bitrate"
 msgstr "?????? bit"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:656
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:699
 #, fuzzy
-msgid "Partition decision"
-msgstr "??????? Macroblock:"
+msgid "Partition Decision"
+msgstr "? ??????? ???; "
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:663
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:706
 msgid "Method"
 msgstr "???????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:675
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:718
 msgid "1  - Extremely Low (Fastest)"
 msgstr "1  - ?????????? ?????? (???????????)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:676
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:719
 msgid "2  - Very Low"
 msgstr "2 - ???? ??????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:677
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:720
 msgid "3  - Low"
 msgstr "3- ??????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:678
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:721
 msgid "4  - Medium"
 msgstr "4 - ??????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:679
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:722
 msgid "5  - High (Default)"
 msgstr "5  - ????? (?????????????)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:680
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:723
 msgid "6  - Very High"
 msgstr "6- ???? ?????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:681
-msgid "6B - Very High (RDO on Bframes)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:724
+msgid "6B - Very High (RDO on B-frames)"
 msgstr "6B - ???? ????? (RDO ?? Bframes)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:682
-msgid "7 - Ultra High"
-msgstr "7- ?????????? ?????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:725
+msgid "7  - Ultra High"
+msgstr "7- ?????????? ?????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:683
-msgid "7B - Ultra High (RDO on Bframes)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:726
+msgid "7B - Ultra High (RDO on B-frames)"
 msgstr "7B - ?????????? ????? (RDO ?? Bframes)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:690
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:733
 #, fuzzy
-msgid "Diamond search"
+msgid "Diamond Search"
 msgstr "?????? ??????????:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:691
-msgid "Hexagonal search"
-msgstr ""
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:734
+#, fuzzy
+msgid "Hexagonal Search"
+msgstr "?????? ??????????:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:692
-msgid "Uneven multi hexagon"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:735
+msgid "Uneven Multi-hexagon"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:693
-msgid "Exhaustive search"
-msgstr ""
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:736
+#, fuzzy
+msgid "Exhaustive Search"
+msgstr "?????? ??????????:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:705
-msgid "Set how many previous frames can be referenced by a P/B-frame. Numbers above 5 do not seem to improve quality greatly. Numbers are 3 to 5 are recommended"
-msgstr ""
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:744
+#, fuzzy
+msgid "Max. Ref. Frames"
+msgstr "??????? ???? QP ?????? ????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:708
-msgid "Max. Ref. frames"
-msgstr ""
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:715
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:751
 msgid "Range"
 msgstr "?????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:728
-msgid "Define how many pixels are analysised. The higher the range the more accurate the analysis but the slower the encoding time"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:764
+msgid "Define how many pixels are analysed for motion estimation. The higher the range the more accurate the analysis but the slower the encoding time."
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:731
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:773
+msgid "Set how many previous frames can be referenced by a P/B-frame. Numbers above 5 do not seem to improve quality greatly. Numbers 3 to 5 are recommended."
+msgstr ""
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:776
 #, fuzzy
 msgid "Chroma ME"
-msgstr "??????? ????????:"
+msgstr "?????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:736
-msgid "Uses chroma (color) components for motion for compression and helps the quality"
-msgstr ""
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:781
+#, fuzzy
+msgid "Use color information for detecting motion to improve quality"
+msgstr "????????????? ??????????? chroma ??? ??? ?????????? ??? ???????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:739
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:784
+#, fuzzy
 msgid "Mixed Refs"
-msgstr ""
+msgstr "%1 (CD ??????? ???????)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:744
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:789
 msgid "Calculate referencing individually based on each partition"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:750
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:795
+#, fuzzy
 msgid "Fast P-Skip"
-msgstr ""
+msgstr "????????? pager"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:753
-msgid "Uncheck to enable fast p-skip"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:798
+msgid "Early skip detection on P-frames to speedup encoding. Quality will be slightly reduced."
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:756
-msgid "DCT decimate"
-msgstr ""
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:760
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:801
 #, fuzzy
-msgid "Interlace"
-msgstr "??????? ??????????"
+msgid "DCT Decimate"
+msgstr "JPEG DCT"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:763
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:806
 #, fuzzy
-msgid "Encode interlaced"
+msgid "Interlaced"
 msgstr "??????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:765
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:809
+#, fuzzy
+msgid "Input video is interlaced"
+msgstr "?? ?????? ????????????"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:811
 msgid "<b>Motion Estimation</b>"
 msgstr "<b>???????? ???????</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:792
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:804
-msgid "Enforce the size of a decoded pixel decoded to a certain value. Leave this at 1:1 for non-anamorphic video"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:840
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:851
+msgid "Enforce the size of a decoded pixel decoded to a certain value. Set this to 1:1 for non-anamorphic video."
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:796
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:844
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1051
 msgid ":"
 msgstr ":"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:813
-msgid "Set a custom aspect ratio. Default 1:1 is recommended for most video."
-msgstr ""
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:860
+msgid "Set a custom aspect ratio. The default 1:1 is recommended for most video."
+msgstr "????? ??? ????????????? ???????? ???????. ??? ?? ??????????? ?????? ?????????? ? ????????????? 1:1 ."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:818
-msgid "Predefined Aspect Ratios"
-msgstr ""
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:865
+msgid "Predefined Aspect Ratio"
+msgstr "???-?????????????? ???????? ??????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:823
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:870
 msgid "Set a common predefined aspect ratio"
-msgstr ""
+msgstr "????? ??? ?????, ???-?????????????? ???????? ??????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:827
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1040
-msgid "As input"
-msgstr "???? ?? ???????? ???????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:874
+msgid "As Input"
+msgstr "?? ???????? ???????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:832
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1043
-msgid "Get PAR from input video file"
-msgstr ""
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:895
+msgid "<b>Sample Aspect Ratio</b>"
+msgstr "<b>?????????  ?????????? ?????????</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:856
-msgid "<b>Sample Aspect Ratio (A/R)</b>"
-msgstr "<b>????????? ??????? ????????? (A/R)</b>"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:878
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:922
 msgid "CABAC"
 msgstr "CABAC"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:881
-msgid "Lossless compression method which usually improves the bitrate usage by 15% (especially on high bitrate). Helps the quality a lot but is slower. "
-msgstr "??????? ?????????, ????? ??????? ?????????. ??????? ????????? ?? ????? ??? ?????? bit ???? 15% (?????? ?? ??????? ??????? bit). ????????? ????????? ??? ????????, ???? ????? ??? ????."
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:925
+msgid "Lossless compression technique that reduces bitrate by approximately 10%. Increases encoding and decoding time."
+msgstr "??????? ????????? ????? ??????? ????????? ??? ??????? ?? ????? bit, ???? ??????? 10%. ???????, ????, ? ????? ????????????? ??? ????????????????."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:884
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:932
 #, fuzzy
 msgid "Trellis"
 msgstr "Trellis quantization"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:893
-msgid "Use rate distortion quantization to find optimal encoding for each block. Level 0 equals disabled, level 1 equals normal and level 2 equals high"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:941
+msgid "Use Trellis Rate Distortion Optimisation to find optimal encoding for each block. Level 0 equals disabled, level 1 equals normal and level 2 equals high."
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:900
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:948
 msgid "Noise Reduction"
 msgstr "?????? ???????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:909
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:957
 msgid "Set the amount of noise reduction"
 msgstr "????? ?? ??????? ??? ??????? ???????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:916
-msgid "Deblocking Filter :"
-msgstr ""
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:964
+#, fuzzy
+msgid "Deblocking Filter"
+msgstr "??????????? ???????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:919
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:967
 msgid "Enable in-loop deblocking to filter the video"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:932
-msgid "Set the amount of blurring to use for block edges when they are found"
-msgstr ""
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:984
+#, fuzzy
+msgid "Strength"
+msgstr "_?????:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:941
-msgid "Define the level for when deblocking is applied"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:998
+msgid "Threshold for block detection. Positive values will detect more blocks, negative values will detect less."
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:944
-msgid "<i>Threshold</i>"
-msgstr "<i>???????</i>"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1007
+msgid "Positive values will soften the video, negative values will sharpen"
+msgstr "??????? ????? ?? ??????????? ?? ??????, ?? ????????? ?? ?? ???????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:952
-msgid "<i>Strength</i>"
-msgstr "<i>?????</i>"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:960
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1010
 msgid "<b>Misc. Options</b>"
 msgstr "<b>???????? ????????</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:965
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1015
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1066
 msgid "Motion & Misc"
 msgstr "?????? ??? ???????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:986
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1041
 msgid "8x8 Transform"
-msgstr ""
+msgstr "??????????????? 8x8"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:989
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1044
 msgid "General block breakdown transformation"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:992
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1047
 msgid "8x8, 8x16 and 16x8 P-frame search"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:995
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1050
 msgid "Improve the P-frame quality"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:998
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1053
 msgid "8x8, 8x16 and 16x8 B-frame search"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1001
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1056
 msgid "Improve the B-frame quality"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1004
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1059
 msgid "4x4, 4x8 and 8x4 P-frame search"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1007
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1062
 msgid "Further improve the P-frame quality"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1009
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1064
 msgid "8x8 Intra search"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1012
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1067
 msgid "Enable DCT Intra block search to improve quality"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1015
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1070
 msgid "4x4 Intra search"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1018
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1073
 msgid "Further enable DCT Intra block search to improve quality"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1021
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1076
+#, fuzzy
 msgid "<b>Partition Macroblocks</b>"
-msgstr ""
+msgstr "??????????? ??? ??? ???????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1043
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1100
 #, fuzzy
 msgid "Bias"
 msgstr "?????? ???????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1056
-msgid "Increase / decrease probability for how often B-frames are used. Will not violate the maximum consecutive frame limit"
-msgstr ""
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1107
+#, fuzzy
+msgid "Max Consecutive"
+msgstr "?????????? ????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1065
-msgid "Set the maximum number of consecutive B-frames. This defines how many duplicate frames can be droped. Numbers 2 to 5 are recommended. This greatly improves the use of bitrate and quality"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1120
+msgid "Increase / decrease probability for how often B-frames are used. It will not violate the maximum consecutive frame limit."
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1068
-msgid "Max Consecutive"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1129
+msgid "Set the maximum number of consecutive B-frames. This defines how many duplicate frames can be dropped. Numbers 2 to 5 are recommended. This greatly improves the use of bitrate and quality."
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1079
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1143
 msgid "Bidirectional ME"
-msgstr ""
+msgstr "ME ?????? ???????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1084
-msgid "Jointly optimize both Motion Vector's in B-frames. This will improve quality but take more time for encoding"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1148
+msgid "Optimise both motion vectors in B-frames. This will improve quality but take more time for encoding."
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1086
-msgid "Weighted biprediction"
-msgstr ""
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1150
+#, fuzzy
+msgid "Weighted Biprediction"
+msgstr "? ?????????? ?????????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1091
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1155
 msgid "Enables weighting of B-frames to help fades"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1094
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1158
 msgid "Adaptative DCT"
 msgstr "???????????? DCT"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1099
-msgid "Use fewer B-frame if needed. This is always recommended. If not enabled, the codec will always use the maximum number of consecutive B-frames"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1163
+msgid "Use fewer B-frames if needed. This is always recommended. If not enabled, the codec will always use the maximum number of consecutive B-frames."
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1102
-msgid "Use as reference"
-msgstr "????? ?? ???????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1166
+msgid "Use as Reference"
+msgstr "????? ?? ???????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1107
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1171
 msgid "Allow B-frames to make references non-linearly to another B-frame (instead of creating a duplicate copy)"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1113
-msgid "B-Frame Direct Mode:  "
-msgstr ""
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1177
+#, fuzzy
+msgid "B-Frame Direct Mode"
+msgstr "?????? ????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1121
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1185
 msgid "Auto"
 msgstr "????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1122
-#, fuzzy
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1186
 msgid "Temporal"
-msgstr "temporal"
+msgstr "????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1123
-#, fuzzy
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1187
 msgid "Spatial"
-msgstr "spatial"
+msgstr "???????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1126
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1190
 #, fuzzy
 msgid "<b>B-Frames</b>"
 msgstr "????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1131
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1195
 #, fuzzy
 msgid "Partitions & Frames"
-msgstr "??????????? ????"
+msgstr "??????? ???????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1159
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1230
 msgid "Set how much \"bitrate bonus\" a keyframe can get"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1162
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1239
+msgid "Set how much bitrate is deducted from a B-frame as compared to the previous P-frame"
+msgstr ""
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1248
+msgid "Define how much the bitrate can fluctuate over the entire video. 0% results in a constant bitrate stream, while 100% results in a pure quality based bitrate stream."
+msgstr ""
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1251
 #, fuzzy
-msgid "Keyframe boost (%)"
+msgid "Keyframe Boost (%)"
 msgstr "???????? (dB):"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1169
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1258
 #, fuzzy
-msgid "B-frame reduction (%)"
-msgstr "???????? (dB):"
+msgid "B-frame Reduction (%)"
+msgstr "?????? ????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1176
-msgid "Bitrate variability (%)"
-msgstr "????????????? ?????? bit (%)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1265
+msgid "Bitrate Variability (%)"
+msgstr "????????????? ?????? Bit (%)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1189
-msgid "Set how much bitrate is deducted from a B-frame as compared to the previous P-frame"
-msgstr ""
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1198
-msgid "Define how much the bitrate can fluctuate over the entire video. 0% results in a constant bitrate stream, while 100% results in a pure quality based bitrate stream"
-msgstr ""
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1201
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1272
 msgid "<b>Bitrate</b>"
 msgstr "<b>?????? bit</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1219
-msgid "Min Qp"
-msgstr "???????? Qp"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1292
+msgid "Min QP"
+msgstr "???????? QP"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1226
-msgid "Max Qp"
-msgstr "??????? Qp"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1299
+msgid "Max QP"
+msgstr "??????? QP"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1233
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1306
 msgid "Max QP Step"
 msgstr "??????? ???? QP"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1247
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1320
 msgid "Enforce a minimum quantizer level"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1256
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1329
 msgid "Enforce a maximum quantizer level"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1265
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1338
 msgid "Define how much the quantizer rate can change between two consecutive frames"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1268
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1341
 #, fuzzy
 msgid "<b>Quantization Limits</b>"
-msgstr "????? ???????????:"
+msgstr "??????? ????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1286
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1368
+msgid "Increase / decrease sensitivity for detecting scene changes. Improves I-frame usage and quality."
+msgstr ""
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1371
 msgid "Scene Cut Threshold"
 msgstr "??????? ???????? ??????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1300
-msgid "Increase / decrease sensitivity for detecting Scene Changes to compensate for. Improves I-frame usage and helps quality"
-msgstr ""
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1378
+msgid "Min IDR Frame Interval"
+msgstr "???????? ???????????? ??? ???? IDR"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1303
-#, fuzzy
-msgid "Min IDR frame interval"
-msgstr "??????? ???????????? ?????? ??? ????????? ??? ????????:"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1316
-msgid "Set minimum frame interval between IDR frames. Defines the minimum amount a frame can be reused and referenced by other frames before a new clean one is established"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1391
+msgid "Set minimum frame interval between IDR frames. Defines the minimum amount a frame can be reused and referenced by other frames before a new IDR frame is established."
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1325
-msgid "Set maximum frame interval between IDR frames. Defines the maximum amount a frame can be reused and referenced by other frames before a new clean one is established"
-msgstr ""
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1400
+msgid "Set maximum frame interval between IDR frames. Defines the maximum amount a frame can be reused and referenced by other frames before a new IDR frame is established."
+msgstr "????? ?? ??????? ???????????? ????, ??????? ??? ???? IDR. ???????????? ?? ??????? ???????? ??????????????????? ??? ?????? ?? ???????? ???? ????, ??? ?? ???? ????, ???? ???????????? ??? ??? ???? IDR."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1328
-#, fuzzy
-msgid "Max IDR frame interval"
-msgstr "??????? ???????????? ?????? ??? ????????? ??? ????????:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1403
+msgid "Max IDR Frame Interval"
+msgstr "??????? ???????????? ??? ???? IDR"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1335
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1410
 msgid "<b>More Rate Settings</b>"
 msgstr "<b>???????????? ???????? ??????</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1353
-msgid "VBV buffer size"
-msgstr "??????? ???????????????? (buffer) VBV"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1430
+msgid "VBV Buffer Size"
+msgstr "??????? ???????????????? (buffer) VBV"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1360
-msgid "Initial VBV buffer (%)"
-msgstr "?????? ??????????????? (buffer) VBV (%)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1437
+msgid "Initial VBV Buffer (%)"
+msgstr "?????? ??????????????? (buffer) VBV (%)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1367
-msgid "Maximum local bitrate"
-msgstr "???????? ??????? ?????? bit"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1444
+msgid "Maximum Local Bitrate"
+msgstr "???????? ??????? ?????? Bit"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1398
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1475
 msgid "<b>Video Buffer Verifier</b>"
 msgstr "<b>???????????? ???????????????? (Buffer) ??????</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1430
-msgid "Allowed variance of average bitrate. Lower values mean less variance. Higher values mean more variance."
-msgstr "? ???????????? ????????????? ??? ?????? bit. ?????????? ????? ???????????? ????????? ?????????????. ??????????? ????? ????????? ??????????? ?????????????."
-
 # ???
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1433
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1508
 msgid "Bitrate Variance"
 msgstr "??????? ?????? bit"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1446
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1521
+msgid "Allowed variance of average bitrate. Lower values mean less variance. Higher values mean more variance."
+msgstr "? ???????????? ????????????? ??? ?????? bit. ?????????? ????? ???????????? ????????? ?????????????. ??????????? ????? ????????? ??????????? ?????????????."
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1530
 msgid "Allowed variance of average quantizer or quality. Lower values mean less variance. Higher values mean more variance. Note that 0 means constant quality while 1 means constant fluctuation. Recommended 0.6."
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1455
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1539
 msgid "Reduced fluctuations in Quantizer (before curve compression)"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1464
-msgid "Reduce fluctuations in QP (after curve compression)"
-msgstr ""
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1467
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1550
 #, fuzzy
 msgid "Quantizer Compression"
 msgstr "??????? ?????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1474
-msgid "Temp. Blur of est Frame Complexity"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1557
+msgid "Temp. Blur of Est. Frame Complexity"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1481
-msgid "Temp. Blur of Quant after CC"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1564
+msgid "Temp. Blur of Quant. after CC"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1488
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1571
 msgid "<b>Misc</b>"
 msgstr "<b>???????</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1512
-msgid "Quantization factors used between I- and P- frames"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1597
+msgid "Quantization factors used between I and P-frames"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1521
-msgid "Quantization used between P- and B- frames"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1606
+msgid "Quantization used between P and B-frames"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1530
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1615
 msgid "Quantization difference between chroma (color) and luma (brightness)"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1533
-msgid "Factor between I and P frame Quants"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1618
+msgid "Factor between I and P-frame Quants"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1540
-msgid "Factor between P and B frame Quants"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1625
+msgid "Factor between P and B-frame Quants"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1547
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1632
 msgid "Chroma QP Offset"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1554
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1639
 #, fuzzy
 msgid "<b>Quantizers</b>"
 msgstr "???????? ?????????:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1572
-msgid "Custom matrix"
-msgstr "????????????? ???????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1657
+msgid "Flat Matrix"
+msgstr "??????? ???????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1581
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1664
+msgid "JVT Matrix"
+msgstr "??????? JVT"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1674
+msgid "Custom Matrix"
+msgstr "????????????? ???????"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1684
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1128
 msgid "Open CQM file"
 msgstr "??????? ??????? CQM"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1587
-msgid "JVT matrix"
-msgstr "??????? JVT"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1595
-msgid "Flat matrix"
-msgstr "??????? ???????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1604
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1692
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1136
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1568
 msgid "Edit Custom Matrix"
 msgstr "??????????? ?????????????? ????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1609
-msgid "Edit a loaded custom quantization matrix file"
-msgstr ""
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1695
+#, fuzzy
+msgid "Edit loaded custom quantization matrix file"
+msgstr "?????? ??? ??????? ??? ?????????????? ??????? ????????."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1617
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1697
 #, fuzzy
 msgid "<b>Quantization Matrices</b>"
-msgstr "????? ???????????:"
+msgstr "Trellis quantization"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1622
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1702
 msgid "More"
 msgstr "???????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1630
-msgid "Defaults"
-msgstr "??????????????"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1710
+msgid "_Defaults"
+msgstr "_??????????????"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:237
 msgid "Xvid Encoder"
@@ -5292,10 +5497,6 @@
 msgid "Max P Frame Qzer"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:480
-msgid "Quantizer"
-msgstr "?????????? ???????? (Quantizer)"
-
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:485
 msgid "Not Yet!"
 msgstr "??? ?????!"
@@ -5338,8 +5539,8 @@
 msgstr "?????? bit ??????????? (kb/s):"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:362
-msgid "Target size (MBytes):"
-msgstr "??????? ??????????? (MBytes):"
+msgid "Target video size (MB):"
+msgstr "??????? ??????????? ?????? (MB):"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:479
 msgid "Select Custom Matrix File to write"
@@ -5374,25 +5575,16 @@
 msgstr "??????? ???????????? 1 ? 2 ??????????"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:760
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:123
-msgid "Single pass - bitrate"
-msgstr "???? ??????? - ?????? bit"
+msgid "Single Pass - Bitrate"
+msgstr "???? ??????? - ?????? Bit"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:764
-msgid "Single pass - quantizer"
-msgstr "???? ??????? - ?????????? ????????"
+msgid "Single Pass - Quantizer"
+msgstr "???? ??????? - ?????????? ???????? (Quantizer)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:768
-msgid "Two pass, final size"
-msgstr "??? ?????????, ?????? ???????"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:772
-msgid "Two pass, average bitrate"
-msgstr "??? ?????????, ????? ???? ?????? bit"
-
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:776
-msgid "Same Qz as input"
-msgstr ""
+msgid "Same Quantizer as Input"
+msgstr "????? ?????????? ???????? (Quantizer) ???? ?? ???????? ???????"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:785
 msgid "Target video bitrate"
@@ -5407,9 +5599,8 @@
 msgstr "????????? ??????????? ?????????? ?????? bit"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:806
-#, fuzzy
 msgid "_Interlaced"
-msgstr "??????????"
+msgstr "_??????????"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:809
 msgid "Enables interlaced frame support - use only if your source contains interlacing artifacts (i.e. fields instead of progressive frames)"
@@ -5450,7 +5641,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:839
 msgid "Packed bitstream"
-msgstr ""
+msgstr "????????????? ??? ?????????"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:842
 msgid "Enables Divx like packed vop, DO NOT SET, it is ugly"
@@ -5566,7 +5757,7 @@
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:999
 #, fuzzy
 msgid "Number of B-frames:"
-msgstr "??????? ???? ??? ?? G.711 "
+msgstr "??????? ????????:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1007
 msgid "Maximum number of sequential B-frames (when set to 0, the original I/P encoder is used)"
@@ -5592,6 +5783,14 @@
 msgid "Produces nicer-looking B-frames"
 msgstr ""
 
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1040
+msgid "As input"
+msgstr "???? ?? ???????? ???????"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1043
+msgid "Get PAR from input video file"
+msgstr ""
+
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1049
 msgid "Pixel Width"
 msgstr "?????? ?? ??????????????"
@@ -5633,16 +5832,19 @@
 msgstr "_??????? ?????????????? ????????"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1153
+#, fuzzy
 msgid "I-frame quantizer - Min:"
-msgstr ""
+msgstr "???????? ?????????? ???????? - ???? ???? ?? ??????????? ?? ????"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1158
+#, fuzzy
 msgid "P-frame quantizer - Min:"
-msgstr ""
+msgstr "???????? ?????????? ???????? - ???? ???? ?? ??????????? ?? ????"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1163
+#, fuzzy
 msgid "B-frame quantizer - Min:"
-msgstr ""
+msgstr "???????? ?????????? ???????? - ???? ???? ?? ??????????? ?? ????"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1176
 msgid "Minimum quantizer allowed for I-frames"
@@ -5692,11 +5894,11 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1283
 msgid "Max overflow improvement (%):"
-msgstr ""
+msgstr "???????? ???????? ???????????? (%):"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1288
 msgid "Max overflow degradation (%):"
-msgstr ""
+msgstr "????????? ???????? ???????????? (%):"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1300
 #, c-format
@@ -5733,7 +5935,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1350
 msgid "Overflow control strength (%):"
-msgstr ""
+msgstr "?????? ??????? ???????????? (%):"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1362
 msgid "The higher this value, the more bits get taken from frames larger than the average size, and redistributed to others"
@@ -5756,12 +5958,14 @@
 msgstr "??????? ???????"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1591
+#, fuzzy
 msgid "<b>Intra Matrix</b>"
-msgstr ""
+msgstr "???????????? Matrix"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1609
+#, fuzzy
 msgid "<b>Inter Matrix</b>"
-msgstr ""
+msgstr "???????????? Matrix"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_color.cpp:71
 msgid "Select Color"
@@ -5771,6 +5975,10 @@
 msgid "_Encoding mode:"
 msgstr "_????????? ??????????? ?????????????:"
 
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:123
+msgid "Single pass - bitrate"
+msgstr "???? ??????? - ?????? bit"
+
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:125
 msgid "Single pass - constant quality"
 msgstr "????? ?????????? - ??????? ????????"
@@ -5797,9 +6005,8 @@
 msgstr "_?????????? ???????? (Quantizer):"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:278
-#, fuzzy
 msgid "A_vg Quantizer:"
-msgstr "FFmpeg H263"
+msgstr "??_??? ?????????? ???????? (Quantizer):"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:283
 msgid "_Video size (MB):"
@@ -5841,9 +6048,8 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filterlist.cpp:123
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:285
-#, fuzzy
 msgid "Interlacing"
-msgstr "??????????"
+msgstr "?????"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filterlist.cpp:148
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager_dialog.cpp:309
@@ -6042,508 +6248,507 @@
 msgid "Frame:%c(%02d)"
 msgstr "????:%c(%02d)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:297
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:298
 msgid "_Open..."
 msgstr "????_???..."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:308
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:309
 msgid "_Append..."
 msgstr "_????????..."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:319
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:320
 msgid "_Save"
 msgstr "_??????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:330
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:331
 msgid "Save _Video..."
 msgstr "?????????? _??????..."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:342
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:343
 msgid "Save _BMP Image..."
 msgstr "?????????? ??????? _BMP..."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:346
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:347
 msgid "Save _JPEG Image..."
 msgstr "?????????? ??????? _JPEG..."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:350
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:351
 msgid "Save _Selection as JPEG Images..."
 msgstr "?????????? ??? _???????? ?? ??????? JPEG.."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:363
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:364
 msgid "Save _Project"
 msgstr "?????????? _????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:371
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:372
 msgid "Save P_roject As..."
 msgstr "?????????? _???????? ??..."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:379
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:380
 msgid "_Load/Run Project..."
 msgstr "_???????/???????? ????????..."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:387
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:388
 msgid "A_dd to Joblist..."
 msgstr "_???????? ??? ????? ???????????..."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:391
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:392
 msgid "Show _Joblist"
 msgstr "??????? ??? ?????? ???????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:403
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:404
 msgid "Co_nnect to avsproxy"
 msgstr "_??????? ??? avsproxy"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:412
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:413
 msgid "Proper_ties"
 msgstr "????_?????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:423
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:424
 msgid "AVI _Muxer Options"
-msgstr ""
+msgstr "???????? AVI _Muxer"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:432
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:433
 msgid "_Quit"
 msgstr "_??????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:443
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:444
 msgid "_Edit"
 msgstr "_???????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:450
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:451
 msgid "_Reset Edits"
 msgstr "_????????? ????????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:463
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:464
 msgid "Cu_t"
 msgstr "?????_??"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:474
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:475
 msgid "_Copy"
 msgstr "???????_??"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:485
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:486
 msgid "_Paste"
 msgstr "???_???????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:496
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:497
 msgid "_Delete"
 msgstr "_????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:512
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:513
 msgid "Set Marker _A"
 msgstr "??????? ?????? _?"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:519
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:520
 msgid "Set Marker _B"
 msgstr "??????? ?????? _?"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:531
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:532
 msgid "Pre_ferences"
 msgstr "?????_??????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:539
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:540
 msgid "_View"
 msgstr "_???????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:546
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:547
 msgid "_Main Toolbar"
 msgstr "????? ?????? ?????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:551
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:552
 msgid "_A/V Sidebar"
 msgstr "_???????? ????? A/V"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:561
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:562
 msgid "_Zoom 1:4"
-msgstr "_??????? 1:4"
+msgstr "????????? 1:_4"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:568
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:569
 msgid "Z_oom 1:2"
-msgstr "?_???????? 1:2"
+msgstr "????????? 1:_2"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:575
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:576
 msgid "Zoom _1:1"
-msgstr "??????? _1:1"
+msgstr "??????? 1:_1"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:582
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:583
 msgid "Zoom _2:1"
-msgstr "??????? _2:1"
+msgstr "_????????? 2:1"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:589
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:590
 msgid "Vi_deo"
 msgstr "???_???"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:596
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:597
 msgid "_Decoder Options"
 msgstr "_???????? ???????????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:603
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:604
 msgid "_Postprocessing"
 msgstr "_??????????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:606
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:607
 msgid "Select postprocessing level"
 msgstr "??????? ??????? ???????????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:616
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:617
 msgid "P_review"
 msgstr "???_??????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:623
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:624
 msgid "Display _Output"
 msgstr "???????? _??????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:635
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:636
 msgid "_Frame Rate"
 msgstr "???????? _????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:639
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:688
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:640
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:689
 msgid "_Encoder"
 msgstr "_?????????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:646
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:647
 msgid "Fil_ters"
 msgstr "_??????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:653
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:654
 msgid "_Audio"
 msgstr "_????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:660
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:661
 msgid "_Main Track"
 msgstr "_????? ??????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:664
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:665
 msgid "_Second Track"
 msgstr "_??????? ??????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:668
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:669
 msgid "_Build VBR Time Map"
-msgstr ""
+msgstr "?? _??????? ? ?????? ?????? VBR"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:677
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:678
 msgid "S_ave..."
 msgstr "???_???????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:695
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:696
 msgid "_Filters"
 msgstr "_??????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:699
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:700
 msgid "_Tools"
 msgstr "_????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:706
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:707
 msgid "_Calculator"
 msgstr "_???????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:722
-#, fuzzy
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:723
 msgid "_Rebuild Frames (I & B)"
-msgstr "??????? ???????"
+msgstr "???????????? ??? ???? (I & B)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:726
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:727
 msgid "C_heck Frames (slow)"
 msgstr "_??????? ???? (????)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:730
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:731
 msgid "_Bitrate Histogram"
 msgstr "?????????? ?????? _Bit"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:734
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:735
 msgid "_Scan for Black Frames..."
 msgstr "_????????? ??? ????? ????..."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:743
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:744
 msgid "_VOB -> VobSub"
 msgstr "_VOB -> VobSub"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:747
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:748
 msgid "_OCR (VobSub -> srt)"
 msgstr "_OCR (VobSub -> srt)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:751
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:752
 msgid "OCR (TS->srt)"
 msgstr "OCR (TS->srt)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:755
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:756
 msgid "_Edit Glyph"
 msgstr "_??????????? ?????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:764
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:765
 msgid "_Frame Hex Dump"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:768
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:769
 msgid "A_uto"
 msgstr "_????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:775
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:776
 msgid "_VCD"
 msgstr "_VCD"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:779
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:780
 msgid "_SVCD"
 msgstr "_SVCD"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:783
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:784
 msgid "_DVD"
 msgstr "_DVD"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:787
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:788
 msgid "_PSP"
 msgstr "_PSP"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:791
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:792
 msgid "PSP (_H.264)"
 msgstr "PSP (_H.264)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:795
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:796
 msgid "F_LV"
 msgstr "F_LV"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:799
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:800
 msgid "IPOD (mpeg4)"
-msgstr ""
+msgstr "IPOD (mpeg4)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:803
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:804
 msgid "_Go"
 msgstr "_????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:810
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:811
 msgid "_Play/Stop"
 msgstr "_???????????/???????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:821
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:822
 msgid "P_revious Frame"
 msgstr "_??????????? ????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:832
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:833
 msgid "_Next Frame"
 msgstr "_??????? ????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:843
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:844
 #, fuzzy
 msgid "Pr_evious Intra Frame"
 msgstr "?????????_???????????? ?????? ????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:854
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:855
 #, fuzzy
 msgid "Next _Intra Frame"
-msgstr "???? ??????? ????"
+msgstr "???? ??????? ???????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:865
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:866
 msgid "Previou_s Black Frame"
 msgstr "???????????? _?????? ????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:869
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:870
 msgid "Ne_xt Black Frame"
 msgstr "_???????? ?????? ????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:873
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:874
 msgid "_First Frame"
 msgstr "_????? ????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:884
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:885
 msgid "_Last Frame"
 msgstr "_?????????? ????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:900
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:901
 msgid "Go to Marker _A"
 msgstr "???????? ??? ?????? _?"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:907
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:908
 msgid "Go to Marker _B"
 msgstr "???????? ??? ?????? _?"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:919
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:920
 msgid "Go to Fra_me..."
 msgstr "???????? ??? _????..."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:930
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:931
 msgid "Go to _Time..."
 msgstr "???????? ??? _?????..."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:941
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:942
 msgid "_Custom"
 msgstr "_?????????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:945
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:946
 msgid "_Help"
 msgstr "_???????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:952
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:953
 msgid "_Built-in Support"
 msgstr "_???????????? ??????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:956
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:957
 msgid "_About"
 msgstr "_??????? ??"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:974
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:975
 msgid "Open a file"
 msgstr "??????? ???? ???????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:984
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:985
 msgid "Save the file"
 msgstr "?????????? ???????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:990
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:991
 msgid "Audio/video file information"
 msgstr "??????????? ??????? ????/??????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:999
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1002
 msgid "Bitrate/size calculator"
 msgstr "??????????? ?????? bit/????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1078
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1118
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1081
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1121
 msgid "Copy"
 msgstr "?????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1083
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1086
 msgid "Configure video encoder"
 msgstr "??????? ???????????? ??????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1088
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1144
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1091
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1147
 msgid "Filters"
 msgstr "??????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1091
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1094
 msgid "Video filters"
 msgstr "?????? video"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1123
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1126
 msgid "Configure audio encoder"
 msgstr "??????? ???????????? ????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1131
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1134
 msgid "Audio filters"
 msgstr "?????? ????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1152
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1155
 msgid "Shift:"
 msgstr "??????????:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1155
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1158
 msgid "Enable time shift"
 msgstr "???????????? ???????? ???????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1161
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1164
 msgid "Audio/video time shift (ms)"
 msgstr "??????? ?????????? ????/?????? (ms)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1168
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1171
 msgid "<b>Format</b>"
 msgstr "<b>?????</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1209
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1204
 msgid "Frame: "
 msgstr "????:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1216
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1211
 msgid "Current frame"
 msgstr "?????? ????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1221
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1216
 msgid "/ 0000000"
 msgstr "/ 0000000"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1228
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1223
 msgid "Time: "
 msgstr "??????:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1235
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1230
 msgid "Current time"
 msgstr "?????? ??????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1236
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1231
 msgid "00:00:00.000"
 msgstr "00:00:00.000"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1239
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1234
 msgid "/ 00:00:00,000"
 msgstr "/ 00:00:00,000"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1246
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1241
 msgid "Frame: ?"
 msgstr "????: ?"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1270
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1265
 msgid "Play"
 msgstr "???????????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1284
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1279
 msgid "Stop"
 msgstr "???????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1296
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1291
 msgid "Previous frame"
 msgstr "??????????? ????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1311
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1306
 msgid "Next frame"
 msgstr "??????? ????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1326
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1321
 #, fuzzy
 msgid "Previous keyframe"
 msgstr "??????????? ??????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1341
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1336
 #, fuzzy
 msgid "Next keyframe"
 msgstr "??????? ??????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1355
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1350
 msgid "Selection: start"
 msgstr "???????: ???? "
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1366
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1361
 msgid "Selection: end"
 msgstr "????????: ?????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1377
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1372
 msgid "Previous black frame"
 msgstr "??????????? ????? ????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1388
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1383
 msgid "Next black frame"
 msgstr "??????? ?????? ????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1399
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1394
 msgid "First frame"
 msgstr "????? ????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1410
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1405
 msgid "Last frame"
 msgstr "????????? ????"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1424
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1419
 msgid "<b>Selection</b>"
 msgstr "<b>???????</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1441
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1436
 msgid "B:"
 msgstr "B:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1448
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1443
 msgid "Go to marker B"
 msgstr "???????? ??? ?????? ?"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1450
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1445
 msgid "A:"
 msgstr "A:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1457
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1452
 msgid "Go to marker A"
 msgstr "???????? ??? ?????? ?"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1459
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1467
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1454
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1462
 msgid " 0000000"
 msgstr " 0000000"
 
@@ -6615,15 +6820,14 @@
 "\n"
 "Do you want to replace it?"
 msgstr ""
-"%s ??????? ???.\n"
+"?? %s ??????? ???.\n"
 "\n"
 "?????? ?? ??????????????;"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp:365
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp:379
-#, fuzzy
 msgid "It is possible that you are trying to overwrite an input file!"
-msgstr "????? ?????? ?? ?????????? ?? "
+msgstr "????? ?????? ?? ?????????? ?? ???????????? ??? ?????? ????????? ???????!"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp:390
 msgid "Cannot write the file"
@@ -6678,26 +6882,27 @@
 msgstr "???????? ????????"
 
 #: avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp:107
+#, fuzzy
 msgid "Linear interpolate"
-msgstr ""
+msgstr "???????? ????????"
 
 #: avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp:108
+#, fuzzy
 msgid "Cubic interpolate"
-msgstr ""
+msgstr "?????? Spline"
 
 #: avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp:109
+#, fuzzy
 msgid "Median interpolate"
-msgstr ""
+msgstr "???????? ????????"
 
 #: avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp:110
-#, fuzzy
 msgid "FFmpeg deint"
-msgstr "FFmpeg Mpeg4"
+msgstr "???????? FFmpeg"
 
 #: avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp:114
-#, fuzzy
 msgid "_Deinterlacing:"
-msgstr "Deinterlacing"
+msgstr "_????????:"
 
 #: avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp:115
 #, fuzzy
@@ -6792,8 +6997,9 @@
 
 #: avidemux/ADM_videoFilter/ADM_vidBlendRemoval.cpp:87
 #: avidemux/ADM_videoFilter/ADM_vidHardIvtcRemoval.cpp:92
+#, fuzzy
 msgid "_Show metrics"
-msgstr ""
+msgstr "&???????? ????????"
 
 #: avidemux/ADM_videoFilter/ADM_vidBlendRemoval.cpp:87
 #: avidemux/ADM_videoFilter/ADM_vidHardIvtcRemoval.cpp:92
@@ -6801,8 +7007,9 @@
 msgstr ""
 
 #: avidemux/ADM_videoFilter/ADM_vidBlendRemoval.cpp:91
+#, fuzzy
 msgid "Blend Removal"
-msgstr ""
+msgstr "???????? ???????????"
 
 #: avidemux/ADM_videoFilter/ADM_vidBSmear.cpp:206
 msgid "Blacken Borders"
@@ -6819,6 +7026,11 @@
 msgstr "_???? ?????? (?? ????????? ???? # ??? ??????????????), -1 = ?????????:"
 
 #: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:189
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:191
+msgid "_Output File:"
+msgstr "_?????? ??????:"
+
+#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:189
 msgid "Select output file"
 msgstr "???????? ?? ?????? ????????????? ??????"
 
@@ -6851,8 +7063,9 @@
 msgstr "???????? ????????????"
 
 #: avidemux/ADM_videoFilter/ADM_vidDecDec.cpp:191
+#, fuzzy
 msgid "Replace (interpolate)"
-msgstr ""
+msgstr "????????????? ??????????????"
 
 #: avidemux/ADM_videoFilter/ADM_vidDecDec.cpp:192
 msgid "Discard longer dupe (anim?s)"
@@ -6892,8 +7105,9 @@
 msgstr "_?????:"
 
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:83
+#, fuzzy
 msgid "No strategy"
-msgstr ""
+msgstr "?? ?????? ?????????? '%s'"
 
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:84
 msgid "3:2 pulldown"
@@ -6937,11 +7151,11 @@
 
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:105
 msgid "Process image (not fields)"
-msgstr ""
+msgstr "??????????? ??????? (??? ?????)"
 
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:106
 msgid "Process image (not fields), debug"
-msgstr ""
+msgstr "??????????? ??????? (??? ?????), ?????????????"
 
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:110
 msgid "_Strategy:"
@@ -6954,15 +7168,17 @@
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:113
 #, fuzzy
 msgid "_Try backward:"
-msgstr "?????? XPM"
+msgstr "???? ?? ???? ?????"
 
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:115
+#, fuzzy
 msgid "_Direct threshold:"
-msgstr ""
+msgstr "??????? ????????:"
 
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:116
+#, fuzzy
 msgid "_Backward threshold:"
-msgstr ""
+msgstr "??????? ????????:"
 
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:117
 msgid "_Noise threshold:"
@@ -6970,7 +7186,7 @@
 
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:118
 msgid "Postp_rocessing threshold:"
-msgstr ""
+msgstr "??????? _???????????????:"
 
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:120
 msgid "_Use chroma to decide"
@@ -6987,7 +7203,7 @@
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:123
 #, fuzzy
 msgid "Bl_end"
-msgstr "????????"
+msgstr "_???? ??????:"
 
 #: avidemux/ADM_videoFilter/ADM_vidDenoise.cpp:386
 #, fuzzy
@@ -7002,7 +7218,7 @@
 #: avidemux/ADM_videoFilter/ADM_vidDenoise.cpp:388
 #, fuzzy
 msgid "L_uma threshold:"
-msgstr "??????? ????????????"
+msgstr "??????? ????????:"
 
 #: avidemux/ADM_videoFilter/ADM_vidDenoise.cpp:389
 msgid "Ch_roma threshold:"
@@ -7014,7 +7230,7 @@
 
 #: avidemux/ADM_videoFilter/ADM_vidDGbob.cpp:85
 msgid "Keep nb of frames and fps"
-msgstr ""
+msgstr "????????? ??? ??????? ??? ???? ??? ??? ???????? ???? (fps)"
 
 #: avidemux/ADM_videoFilter/ADM_vidDGbob.cpp:86
 #, fuzzy
@@ -7023,7 +7239,7 @@
 
 #: avidemux/ADM_videoFilter/ADM_vidDGbob.cpp:87
 msgid "Double nb of frames (slow motion)"
-msgstr ""
+msgstr "?????? ??????? ???? (???? ??????)"
 
 #: avidemux/ADM_videoFilter/ADM_vidDGbob.cpp:93
 msgid "_Extra"
@@ -7040,12 +7256,87 @@
 #: avidemux/ADM_videoFilter/ADM_vidDropOut.cpp:63
 #, fuzzy
 msgid "DropOut Threshold"
-msgstr "??????? ????????"
+msgstr "??????? ????????:"
 
 #: avidemux/ADM_videoFilter/ADM_vidDropOut.cpp:66
+#, fuzzy
 msgid "Drop Out"
+msgstr "%s ????????????."
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:191
+msgid "Erase"
+msgstr "???????"
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:192
+msgid "Un-Erase"
+msgstr "???-???????"
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:196
+msgid "1x1"
+msgstr "1x1"
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:197
+msgid "3x3"
+msgstr "3x3"
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:198
+msgid "5x5"
+msgstr "5x5"
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:199
+msgid "7x7"
+msgstr "7x7"
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:200
+msgid "9x9"
+msgstr "9x9"
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:201
+msgid "11x11"
+msgstr "11x11"
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:202
+msgid "15x15"
+msgstr "15x15"
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:203
+msgid "21x21"
+msgstr "21x21"
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:207
+#, fuzzy
+msgid "Brush _Mode:"
+msgstr "_??????????: "
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:211
+msgid "Brush _Size:"
+msgstr "_??????? ???????:"
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:244
+msgid "Output \"_Color\" for all masked pixels:"
 msgstr ""
 
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:250
+msgid "Eraser _Data File:"
+msgstr ""
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:250
+#, fuzzy
+msgid "Select data file"
+msgstr "??????? ???????"
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:255
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:196
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:378
+#: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:159
+msgid "_Debugging settings (bits):"
+msgstr "????????? _?????????????? (bit):"
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:261
+#, fuzzy
+msgid "Eraser Configuration"
+msgstr "??????? Vorbis"
+
 #: avidemux/ADM_videoFilter/ADM_vidFade.cpp:65
 msgid "Out"
 msgstr "??????"
@@ -7091,7 +7382,7 @@
 #: avidemux/ADM_videoFilter/ADM_vidLargeMedian.cpp:304
 #, fuzzy
 msgid "_Process luma"
-msgstr "???????????"
+msgstr "??????? ????????????:"
 
 #: avidemux/ADM_videoFilter/ADM_vidFastConvolution.cpp:467
 #: avidemux/ADM_videoFilter/ADM_vidLargeMedian.cpp:304
@@ -7104,8 +7395,9 @@
 msgstr "??????????? chroma"
 
 #: avidemux/ADM_videoFilter/ADM_vidFastConvolution.cpp:472
+#, fuzzy
 msgid "Fast Convolution"
-msgstr ""
+msgstr "&????????????? ?????????..."
 
 #: avidemux/ADM_videoFilter/ADM_vidFields.cpp:229
 msgid "Motion Threshold"
@@ -7114,17 +7406,17 @@
 #: avidemux/ADM_videoFilter/ADM_vidFields.cpp:231
 #, fuzzy
 msgid "Blend Threshold"
-msgstr "??????? ???????? ??????"
+msgstr "??????? ????????:"
 
 #: avidemux/ADM_videoFilter/ADM_vidFlux.cpp:133
 #, fuzzy
 msgid "_Temporal threshold:"
-msgstr "??????? ????????????"
+msgstr "??????? ????????:"
 
 #: avidemux/ADM_videoFilter/ADM_vidFlux.cpp:134
 #, fuzzy
 msgid "_Spatial threshold:"
-msgstr "??????? ????????????"
+msgstr "??????? ????????:"
 
 #: avidemux/ADM_videoFilter/ADM_vidForcedPP.cpp:81
 msgid "Forced Postprocessing"
@@ -7140,7 +7432,7 @@
 
 #: avidemux/ADM_videoFilter/ADM_vidHardIvtcRemoval.cpp:96
 msgid "Hard IVTC Removal"
-msgstr ""
+msgstr "???????? ??????? IVTC"
 
 #: avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp:93
 msgid "Smaller means more deinterlacing"
@@ -7168,7 +7460,7 @@
 
 #: avidemux/ADM_videoFilter/ADM_vidLargeMedian.cpp:309
 msgid "Large Median 5x5"
-msgstr ""
+msgstr "??????? ????? 5x5"
 
 #: avidemux/ADM_videoFilter/ADM_vidLogo.cpp:88
 msgid "_Logo (jpg file):"
@@ -7211,7 +7503,7 @@
 #: avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp:114
 #, fuzzy
 msgid "_Field dominance:"
-msgstr "??????????? ????????"
+msgstr "????? ???????????:"
 
 #: avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp:115
 msgid "_Qp:"
@@ -7220,12 +7512,12 @@
 #: avidemux/ADM_videoFilter/ADM_vidMosaic.cpp:90
 #, fuzzy
 msgid "_Horizontal stacking:"
-msgstr "????????? ???????? ?????????"
+msgstr "????????? ??????????"
 
 #: avidemux/ADM_videoFilter/ADM_vidMosaic.cpp:91
 #, fuzzy
 msgid "_Vertical stacking:"
-msgstr "?????????? ???????? ?????????"
+msgstr "?????? ????????"
 
 #: avidemux/ADM_videoFilter/ADM_vidMosaic.cpp:92
 msgid "_Shrink factor:"
@@ -7249,7 +7541,7 @@
 #: avidemux/ADM_videoFilter/ADM_vidMPLD3Dlow.cpp:76
 #, fuzzy
 msgid "_Temporal strength:"
-msgstr "??&?????:"
+msgstr "????:"
 
 #: avidemux/ADM_videoFilter/ADM_vidMSharpen.cpp:163
 #, fuzzy
@@ -7267,74 +7559,77 @@
 #: avidemux/ADM_videoFilter/ADM_vidMsmooth.cpp:195
 #, fuzzy
 msgid "Show _mask"
-msgstr "??? ????? ????????"
+msgstr "???????? ??????"
 
 #: avidemux/ADM_videoFilter/ADM_vidMsmooth.cpp:201
 msgid "MSmooth"
-msgstr ""
+msgstr "MSmooth"
 
 #: avidemux/ADM_videoFilter/ADM_vidPalShift.cpp:76
+#, fuzzy
 msgid "_Try reverse"
-msgstr ""
+msgstr "??????? ??????"
 
 #: avidemux/ADM_videoFilter/ADM_vidPalShift.cpp:80
 #, fuzzy
 msgid "Pal Field Shift"
 msgstr "???????????? ???????? ???????????"
 
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:122
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:135
 msgid "New format, preferred, good for Tracker3D"
 msgstr "??? ?????, ???????????, ???? ??? Tracker3D"
 
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:124
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:137
+msgid "DG at UWA format (includes shape info & bounding box)"
+msgstr "????? DG at UWA (???????????? ??????????? ???????? & ????? ?????)"
+
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:139
+msgid "AB at ODU format (includes shape info)"
+msgstr "????? AB at ODU (???????????? ??????????? ????????)"
+
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:141
 msgid "Old format that Tracker3D can't read directly"
 msgstr "?????????? ?????, ??? ? Tracker3D ??? ?????? ????????? ?? ????????"
 
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:128
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:145
 msgid "Output _Format:"
 msgstr "????? ????????????? _??????:"
 
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:153
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:170
 msgid "Mi_nimum area for a particle to be detected:"
-msgstr ""
+msgstr "_???????? ??????? ??? ??? ????????? ???? ?????????:"
 
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:156
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:173
 msgid "Ma_ximum area for a particle to be detected:"
-msgstr ""
+msgstr "_??????? ??????? ??? ??? ????????? ???? ?????????:"
 
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:160
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:177
 msgid "_Left side crop (ignore particles in):"
-msgstr ""
+msgstr "???????? _????????? ??????? (??????? ????????? ????):"
 
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:163
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:180
 msgid "_Right side crop (ignore particles in):"
-msgstr ""
+msgstr "???????? _?????? ??????? (??????? ????????? ????):"
 
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:166
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:183
 msgid "_Top crop (ignore particles in):"
-msgstr ""
+msgstr "???????? _????? ??????? (??????? ????????? ????):"
 
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:169
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:186
 msgid "_Bottom crop (ignore particles in):"
-msgstr ""
+msgstr "???????? _???? ??????? (??????? ????????? ????):"
 
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:174
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:322
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:191
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:324
 #: avidemux/gtk_gui.cpp:2016
 #: avidemux/gtk_gui.cpp:2113
 msgid "Select file"
 msgstr "??????? ???????"
 
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:177
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:194
 msgid "_Camera number:"
 msgstr "??????? _???????:"
 
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:179
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:372
-#: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:159
-msgid "_Debugging settings (bits):"
-msgstr "????????? _?????????????? (bit):"
-
 #: avidemux/ADM_videoFilter/ADM_vidResampleFPS.cpp:85
 msgid "_New frame rate:"
 msgstr "_??? ???????? ????:"
@@ -7395,127 +7690,133 @@
 msgid "Stabilize Threshold"
 msgstr "????????????? ??? ?????????"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:259
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:261
 msgid "P' = A"
 msgstr "P' = A"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:260
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:262
 msgid "P' = P"
 msgstr "P' = P"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:261
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:263
 msgid "P' = P - A"
 msgstr "P' = P - A"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:262
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:264
 msgid "P' = A - P"
 msgstr "P' = A - P"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:263
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:265
 msgid "P' = P + A"
 msgstr "P' = P + A"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:264
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:266
 msgid "P' = P * A"
 msgstr "P' = P * A"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:265
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:267
 msgid "P' = P / A"
 msgstr "P' = P / A"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:266
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:268
 msgid "P' = A / P"
 msgstr "P' = A / P"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:267
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:269
 msgid "P' = min (P, A)"
 msgstr "P' = ???????? (P, A)"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:268
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:270
 msgid "P' = max (P, A)"
 msgstr "P' = ??????? (P, A)"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:273
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:275
 msgid "A = convolve(P); Load convolution kernel from file"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:275
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:277
 msgid "A = pixel from image file as float; Load image from file"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:277
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:279
 msgid "A = pixel from image file as integer; Load image from file"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:279
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:281
+#, fuzzy
 msgid "A = floating point constant value"
-msgstr ""
+msgstr "3. ???????? (???? ??????? ????????????)"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:281
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:283
 msgid "A = rolling average of pixel: A = A*(1-alpha)+(P*alpha)"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:286
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:288
 msgid "Select _Operation on each pixel P and input A:"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:291
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:293
 msgid "Input _Type:"
 msgstr "_????? ???????:"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:322
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:324
 msgid "Input _File (image or convolution kernel):"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:325
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:327
 msgid ""
 "_Load Bias (added to each pixel\n"
 "in file image when loaded):"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:330
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:332
 msgid ""
 "Load _Multiplier (each pixel in\n"
 "file image mult. by this when loaded):"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:336
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:338
+#, fuzzy
 msgid "Input _Constant:"
-msgstr ""
+msgstr "?????????? ????????"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:340
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:342
 msgid ""
 "Memory constant _alpha\n"
-"(where A = (1-alpha)*A + alpha*curr_frame):"
+"(where A = (1-alpha)*A + alpha*(curr_frame + lookahead)):"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:345
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:347
+msgid "Look ahead _N frames:"
+msgstr ""
+
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:351
 msgid "Init _Start Frame (first frame # to use for head start):"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:349
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:355
 msgid "Init _End Frame (last frame # to use for head start):"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:353
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:359
 msgid "Init By _Rolling (compute head start using a rolling average rather than a straight average)"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:358
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:364
 msgid "_Bias (will be added to result):"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:361
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:367
 msgid "_Result Bias (added to each result pixel):"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:365
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:371
 msgid ""
 "Result _Multiplier (each result pixel\n"
 "multiplied by this):"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:370
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:376
 msgid "_Histogram every N frames (0 to disable):"
 msgstr "_?????????? ???? ? ???? (0 ??? ??????????????):"
 
@@ -7551,7 +7852,7 @@
 
 #: avidemux/ADM_videoFilter/ADM_vidYadif.cpp:171
 msgid "Temporal & spatial check"
-msgstr ""
+msgstr "???????? ??? ??????? ???????"
 
 #: avidemux/ADM_videoFilter/ADM_vidYadif.cpp:172
 msgid "Bob, temporal & spatial check"
@@ -7559,7 +7860,7 @@
 
 #: avidemux/ADM_videoFilter/ADM_vidYadif.cpp:173
 msgid "Skip spatial temporal check"
-msgstr ""
+msgstr "????????? ??????? ??? ???????? ???????"
 
 #: avidemux/ADM_videoFilter/ADM_vidYadif.cpp:174
 msgid "Bob, skip spatial temporal check"
@@ -7697,7 +7998,7 @@
 #: avidemux/gtk_gui.cpp:842
 #, fuzzy
 msgid "Rebuild all Keyframes?"
-msgstr "??????? ???????"
+msgstr "?????????????? ???? ??? ????????????..."
 
 #: avidemux/gtk_gui.cpp:900
 msgid "Permission error"
@@ -8039,15 +8340,14 @@
 msgstr "?? ?????? ???? ????? ?????????? ??? ?? ?????????? ???? ??????? ???????"
 
 #: avidemux/gui_autodrive.cpp:63
-msgid "You need both Xvid4 and FAAC support for Ipod profile"
-msgstr ""
+msgid "You need Xvid4 and either LAME or FAAC support for the iPod profile"
+msgstr "?????????? ? ?????????? ??? Xvid4, ??? ???? ??? LAME ? ??? FAAC ??? ?? ?????? iPod"
 
-#: avidemux/gui_autodrive.cpp:71
-#: avidemux/gui_autodrive.cpp:154
-msgid "Cannot select mpeg4 sp codec."
-msgstr "??????? ? ??????? ??? ?????? mpeg4 sp"
+#: avidemux/gui_autodrive.cpp:74
+msgid "Cannot select the MPEG-4 SP codec."
+msgstr "??????? ? ??????? ??? ?????? MPEG-4 SP."
 
-#: avidemux/gui_autodrive.cpp:113
+#: avidemux/gui_autodrive.cpp:121
 msgid ""
 "You don't have LAME!.\n"
 "It is needed to create FLV  video."
@@ -8055,11 +8355,15 @@
 "??? ????? ?? LAME!.\n"
 "????? ?????????? ??? ?? ?????????? ?????? FLV."
 
-#: avidemux/gui_autodrive.cpp:127
+#: avidemux/gui_autodrive.cpp:135
 msgid "Cannot select FLV1  codec."
 msgstr "??????? ? ??????? ??? ?????? FLV1"
 
-#: avidemux/gui_autodrive.cpp:189
+#: avidemux/gui_autodrive.cpp:162
+msgid "Cannot select mpeg4 sp codec."
+msgstr "??????? ? ??????? ??? ?????? mpeg4 sp"
+
+#: avidemux/gui_autodrive.cpp:197
 msgid ""
 "You don't have FAAC!.\n"
 "It is needed to create PSP compatible video."
@@ -8077,8 +8381,8 @@
 
 #: avidemux/gui_navigate.cpp:73
 #: avidemux/gui_navigate.cpp:111
-#: avidemux/gui_navigate.cpp:387
-#: avidemux/gui_navigate.cpp:423
+#: avidemux/gui_navigate.cpp:393
+#: avidemux/gui_navigate.cpp:429
 msgid "Decompressing error"
 msgstr "????? ???? ???????????"
 
@@ -8087,20 +8391,20 @@
 msgstr "??????? ? ??????????????? ??? ???????? ????"
 
 #: avidemux/gui_navigate.cpp:111
-#: avidemux/gui_navigate.cpp:423
+#: avidemux/gui_navigate.cpp:429
 #, fuzzy
 msgid "Cannot decode keyframe."
-msgstr "??????? ? ??????????????? ??? ???????? ????"
+msgstr "??????? ? ??????????????? ??? ????"
 
-#: avidemux/gui_navigate.cpp:234
+#: avidemux/gui_navigate.cpp:237
 msgid "Seeking"
 msgstr "?????????"
 
-#: avidemux/gui_navigate.cpp:312
+#: avidemux/gui_navigate.cpp:318
 msgid "Finding black frames"
 msgstr "????????? ?????? ????"
 
-#: avidemux/gui_navigate.cpp:387
+#: avidemux/gui_navigate.cpp:393
 msgid "Cannot decode the frame."
 msgstr "??????? ? ??????????????? ??? ????"
 

Modified: branches/avidemux_2.5_branch_gruntster/po/it.po
===================================================================
--- branches/avidemux_2.5_branch_gruntster/po/it.po	2008-03-18 13:13:51 UTC (rev 3908)
+++ branches/avidemux_2.5_branch_gruntster/po/it.po	2008-03-18 18:11:00 UTC (rev 3909)
@@ -3,7 +3,7 @@
 "Project-Id-Version: avidemux\n"
 "Report-Msgid-Bugs-To: \n"
 "POT-Creation-Date: 2006-10-04 22:09+0300\n"
-"PO-Revision-Date: 2008-01-26 17:04+0100\n"
+"PO-Revision-Date: 2008-02-16 09:57+0100\n"
 "Last-Translator: \n"
 "Language-Team: it\n"
 "MIME-Version: 1.0\n"
@@ -308,7 +308,7 @@
 msgid "You should use Tool->Rebuild frame. Do it now ?"
 msgstr "Dovresti usare Strumenti -> Ricostruisci fotogrammi. Vuoi farlo ora?"
 
-#: avidemux/ADM_editor/ADM_edit.cpp:1510
+#: avidemux/ADM_editor/ADM_edit.cpp:1517
 msgid ""
 "This looks like mpeg\n"
 " Do you want to index it?"
@@ -316,7 +316,7 @@
 "Questo sembra un file mpeg\n"
 " Vuoi indicizzarlo?"
 
-#: avidemux/ADM_editor/ADM_edit.cpp:1562
+#: avidemux/ADM_editor/ADM_edit.cpp:1569
 msgid "Indexing failed"
 msgstr "Indicizzazione fallita"
 
@@ -974,7 +974,6 @@
 msgstr "\"Cancella\" aree arbitrarie di ogni fotogramma"
 
 #: avidemux/ADM_filter/filter_declaration.cpp:188
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:898
 msgid "Swiss Army Knife"
 msgstr "Swiss Army Knife"
 
@@ -983,7 +982,8 @@
 msgstr "Applica operazioni come P'=P*A, P-A, P+A, ecc. usando avvolgimento, media mobile, immagine da file, o costante."
 
 #: avidemux/ADM_filter/filter_declaration.cpp:189
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:272
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:401
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:976
 msgid "Threshold"
 msgstr "Threshold"
 
@@ -1643,7 +1643,7 @@
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:568
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:583
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:219
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1143
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1188
 #: avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp:105
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:101
 #: avidemux/ADM_videoFilter/ADM_vidRotate.cpp:264
@@ -2127,7 +2127,7 @@
 msgstr "Quantizzazione"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:117
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1427
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1480
 msgid "Rate Control"
 msgstr "Controllo bitrate"
 
@@ -2738,8 +2738,8 @@
 msgstr "0"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:83
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:807
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:819
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:841
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:852
 msgid "1"
 msgstr "1"
 
@@ -3678,7 +3678,7 @@
 msgstr "DVD5"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:559
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:822
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:855
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_threadCount.cpp:87
 msgid "Custom"
 msgstr "Personalizzata"
@@ -4239,7 +4239,6 @@
 msgstr "Seleziona il file di uscita"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs_save.cpp:145
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:553
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_filesel.cpp:90
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_filesel.cpp:244
 msgid "_Browse..."
@@ -4369,77 +4368,10 @@
 msgid "Configure partialized filter"
 msgstr "Configura filtro parziale"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:197
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:269
 msgid "Particle Analysis Configuration"
 msgstr "Configurazione analisi particella"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:412
-msgid "Particle Detection"
-msgstr "Rilevamento particelle"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:439
-msgid "Mi_nimum area for a particle to be detected:    "
-msgstr "_Area minima per l'individuazione di una particella: "
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:453
-msgid "Ma_ximum area for a particle to be detected:   "
-msgstr "A_rea massima per l'individuazione di una particella: "
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:471
-msgid "_Left side crop (ignore this many pixels on the left):        "
-msgstr "Crop laterale _sinistro (ignora questo numero di pixel a sinistra): "
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:485
-msgid "_Right side crop (ignore this many pixels on the right):     "
-msgstr "Crop laterale d_estro (ignora questo numero di pixel a destra): "
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:499
-msgid "_Top crop (ignore this many pixels on the top):                  "
-msgstr "Crop su_periore (ignora questo numero di pixel in alto): "
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:513
-msgid "_Bottom crop (ignore this many pixels on the bottom):   "
-msgstr "Crop _inferiore (ignora questo numero di pixel in basso): "
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:531
-msgid "Output _Format:   "
-msgstr "_Formato in uscita: "
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:543
-#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:189
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:191
-msgid "_Output File:"
-msgstr "File in _uscita:"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:561
-msgid "_Camera Number for output file:      "
-msgstr "Numero _telecamera per il file in uscita: "
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:575
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1332
-msgid "_Debugging settings (bits):   "
-msgstr "Impostazioni di _debug (bit): "
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:608
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1365
-msgid "Swiss Army Knife output"
-msgstr "Output Swiss Army Knife"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:609
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1366
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:405
-msgid "Final output"
-msgstr "Output finale"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:625
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_preview.cpp:180
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1382
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:418
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp:336
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtersub.cpp:150
-msgid "Preview"
-msgstr "Anteprima"
-
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_pause.cpp:93
 msgid "Paused"
 msgstr "In pausa"
@@ -4474,6 +4406,13 @@
 msgid "Full parameter line"
 msgstr "Linea parametri completa"
 
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_preview.cpp:180
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:542
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp:336
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtersub.cpp:150
+msgid "Preview"
+msgstr "Anteprima"
+
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:40
 msgid "No"
 msgstr "No"
@@ -4667,157 +4606,40 @@
 msgid "Font Size:"
 msgstr "Dimensione carattere:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:405
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:380
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:505
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:388
 msgid "Swiss Army Knife Configuration"
 msgstr "Configurazione Swiss Army Knife"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:925
-msgid "Select _Operation on each pixel P and input A:   "
-msgstr "_Seleziona opeazione per ogni pixel P e input A: "
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:937
-msgid "Input _Type:   "
-msgstr "_Tipo in ingresso: "
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:956
-msgid "Input _File (convolution kernel):   "
-msgstr "_File di ingresso (nucleo di avvolgimento): "
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:960
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:975
-msgid "Select Convolution Kernel File"
-msgstr "Seleziona il nucleo di avvolgimento"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:971
-msgid "Input _File (image file):   "
-msgstr "_File di ingresso (immagine): "
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:997
-msgid "First, _add to each float pixel value:   "
-msgstr "Prima _aggiungi a ogni pixel float il valore: "
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1011
-msgid "Then, _multiply each float pixel value by:   "
-msgstr "Poi moltiplica ogni pi_xel float per il valore: "
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1025
-msgid "Mi_nimum loaded pixel value (will be scaled to 0):"
-msgstr "_Valore minimo pixel caricato (sar? ridimensionato a 0):"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1051
-msgid "Ma_ximum loaded pixel value (will be scaled to 255):"
-msgstr "Va_lore massimo pixel caricato (sar? ridimensionato a 255):"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1073
-msgid "Pixel Value Scaling as Image File is Loaded"
-msgstr "Ridimensionamento valore pixel al caricamento del file immagine"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1085
-msgid "Input _Constant:      "
-msgstr "Costant_e in ingresso: "
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1102
-msgid "Memory constant _alpha:   "
-msgstr "Costante di memoria _alpha: "
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1112
-msgid " = 1 / "
-msgstr " = 1 / "
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1130
-msgid "_Initial average (\"head start\") is "
-msgstr "La media iniziale (\"head start\") ? una media "
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1137
-msgid "straight"
-msgstr "diretta"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1138
-msgid "rolling"
-msgstr "mobile"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1140
-msgid " average"
-msgstr " "
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1148
-msgid "      of frames "
-msgstr "dei fotogrammi da "
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1158
-msgid " through "
-msgstr " a "
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1176
-msgid "Integer _Bias (will be added to result of selected operation):"
-msgstr "_Bias Integer (sar? aggiunto al risultato dell'operazione selezionata):"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1216
-msgid "First, _add to each pixel result value:   "
-msgstr "Prima a_ggiungi a ogni pixel risultato il valore: "
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1230
-msgid "Then, _multiply each pixel result value by:   "
-msgstr "_Poi moltiplica ogni pixel risultato per il valore: "
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1244
-msgid "Mi_nimum result value (will be scaled to 0):"
-msgstr "Valo_re minimo pixel risultato (sar? ridimensionato a 0):"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1270
-msgid "Ma_ximum result value (will be scaled to 255):"
-msgstr "Valore _massimo pixel risultato (sar? ridimensionato a 255):"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1292
-msgid "Pixel Value Scaling on Result of Selected Operation"
-msgstr "Ridimensionamento valore pixel sul risultato dell'operazione selezionata"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1301
-msgid "(description of current config will go here)"
-msgstr "(la descrizione della configurazione corrente apparir? qui)"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1318
-msgid "_Histogram every N frames (0 to disable):   "
-msgstr "_Istogramma ogni N fotogrammi (0 per disattivare): "
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:1390
-msgid "Enable Preview"
-msgstr "Attiva anteprima"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:128
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:200
 #: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:163
 msgid "Threshold Configuration"
 msgstr "Configurazione soglia"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:294
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:423
 msgid "Minimum value to be in-range:"
 msgstr "Valore minimo per rientrare nell'intervallo:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:327
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:456
 msgid "Maximum value to be in-range:"
 msgstr "Valore massimo per rientrare nell'intervallo:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:358
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:487
 msgid "Output values:   "
 msgstr "Valori in uscita: "
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:365
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:494
 msgid "In-range values go black, out-of-range values go white"
 msgstr "I valori interni all'intervallo sono neri, quelli esterni bianchi"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:366
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:495
 msgid "In-range values go white, out-of-range values go black"
 msgstr "I valori interni all'intervallo sono bianchi, quelli esterni neri"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:372
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:501
 msgid "Debugging settings (bits):   "
 msgstr "Impostazioni di debug (bit): "
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:404
-msgid "Threshold output"
-msgstr "Output soglia"
-
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vcodec.cpp:104
 msgid "Video encoder"
 msgstr "Codificatore video"
@@ -4872,590 +4694,584 @@
 msgid "<b>Time remaining:</b>"
 msgstr "<b>Tempo rimanente:</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:565
-msgid "x264 configuration"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:110
+msgid "Hadamard Exhaustive Search"
+msgstr "Ricerca esaustiva Hadamard"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:596
+msgid "x264 Configuration"
 msgstr "Configurazione x264"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:584
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:617
 msgid "Encoding Mode"
 msgstr "Modalit? di codifica"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:596
-msgid "Target bitrate or file size"
-msgstr "Bitrate o dimensione finale"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:624
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:480
+msgid "Quantizer"
+msgstr "Quantizzatore"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:598
-msgid "Quantizer (0-51)"
-msgstr "Quantizzatore (0-51)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:631
+msgid "Target Size"
+msgstr "Dimensione finale"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:611
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:644
 msgid "Constant Quantizer - Each frame will have the same compression. Low numbers equal higher quality while high numbers equal lower quality."
 msgstr "Quantizzatore costante - Ogni fotogramma avr? la stessa compressione. A valori minori corrisponde una maggiore qualit?, a valori maggiori una qualit? minore."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:621
-msgid "Target Size"
-msgstr "Dimensione finale"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:652
+msgid "Target bitrate or file size"
+msgstr "Bitrate o dimensione finale"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:633
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:660
 msgid "Single Pass - Quality Quantizer (Average)"
 msgstr "Passata singola - Quantizzatore qualit? (media)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:634
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:661
 msgid "Single Pass - Quality Quantizer (Constant)"
 msgstr "Passata singola - Quantizzatore qualit? (costante)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:635
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:662
 msgid "Single Pass - Bitrate (Average)"
 msgstr "Passata singola - Bitrate (medio)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:636
-msgid "Two Pass - File Size"
-msgstr "Due passate - Dimensione file"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:663
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:768
+msgid "Two Pass - Video Size"
+msgstr "Due passate - Dimensione video"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:637
-msgid "Two Pass - Average bitrate"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:664
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:772
+msgid "Two Pass - Average Bitrate"
 msgstr "Due passate - Bitrate medio"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:639
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:666
 msgid "Bitrate"
 msgstr "Bitrate"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:670
-msgid "Partition decision"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:699
+msgid "Partition Decision"
 msgstr "Decisione partizione"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:677
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:706
 msgid "Method"
 msgstr "Metodo"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:689
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:718
 msgid "1  - Extremely Low (Fastest)"
 msgstr "1  - Estremamente bassa (pi? veloce)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:690
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:719
 msgid "2  - Very Low"
 msgstr "2  - Molto bassa"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:691
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:720
 msgid "3  - Low"
 msgstr "3  - Bassa"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:692
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:721
 msgid "4  - Medium"
 msgstr "4  - Media"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:693
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:722
 msgid "5  - High (Default)"
 msgstr "5  - Alta (predefinito)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:694
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:723
 msgid "6  - Very High"
 msgstr "6  - Molto alta"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:695
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:724
 msgid "6B - Very High (RDO on B-frames)"
 msgstr "6B - Molto alta (RDO sui fotogrammi-B)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:696
-msgid "7 - Ultra High"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:725
+msgid "7  - Ultra High"
 msgstr "7  - Ultra"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:697
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:726
 msgid "7B - Ultra High (RDO on B-frames)"
 msgstr "7B - Ultra (RDO sui fotogrammi-B)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:704
-msgid "Diamond search"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:733
+msgid "Diamond Search"
 msgstr "Ricerca romboidale"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:705
-msgid "Hexagonal search"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:734
+msgid "Hexagonal Search"
 msgstr "Ricerca esagonale"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:706
-msgid "Uneven multi-hexagon"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:735
+msgid "Uneven Multi-hexagon"
 msgstr "Multi-esagono irregolare"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:707
-msgid "Exhaustive search"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:736
+msgid "Exhaustive Search"
 msgstr "Ricerca esaustiva"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:719
-msgid "Set how many previous frames can be referenced by a P/B-frame. Numbers above 5 do not seem to improve quality greatly. Numbers 3 to 5 are recommended."
-msgstr "Imposta a quanti fotogrammi precedenti pu? riferirsi un fotogramma-P/B. Valori superiori a 5 non sembrano migliorare molto la qualit?. Sono consigliati i valori da 3 a 5."
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:722
-msgid "Max. Ref. frames"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:744
+msgid "Max. Ref. Frames"
 msgstr ""
 "Numero massimo di\n"
 "fotogrammi di riferimento"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:729
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:751
 msgid "Range"
 msgstr "Intervallo"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:742
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:764
 msgid "Define how many pixels are analysed for motion estimation. The higher the range the more accurate the analysis but the slower the encoding time."
 msgstr "Definisci il numero di pixel da analizzare. Maggiore ? l'intervallo, pi? accurata ? l'analisi, ma pi? lenta ? la codifica."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:745
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:773
+msgid "Set how many previous frames can be referenced by a P/B-frame. Numbers above 5 do not seem to improve quality greatly. Numbers 3 to 5 are recommended."
+msgstr "Imposta a quanti fotogrammi precedenti pu? riferirsi un fotogramma-P/B. Valori superiori a 5 non sembrano migliorare molto la qualit?. Sono consigliati i valori da 3 a 5."
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:776
 msgid "Chroma ME"
 msgstr "Croma ME"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:750
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:781
 msgid "Use color information for detecting motion to improve quality"
 msgstr "Usa informazioni cromatiche per la rilevazione del movimento per migliorare la qualit?"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:753
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:784
 msgid "Mixed Refs"
 msgstr "Riferimenti misti "
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:758
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:789
 msgid "Calculate referencing individually based on each partition"
 msgstr "Calcola i riferimenti basati individualmente su ogni partizione"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:764
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:795
 msgid "Fast P-Skip"
 msgstr "P-Skip veloce"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:767
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:798
 msgid "Early skip detection on P-frames to speedup encoding. Quality will be slightly reduced."
 msgstr "Rilevamento salto anticipato sui fotogrammi-P per velocizzare la codifica. La qualit? sar? leggermente ridotta."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:770
-msgid "DCT decimate"
-msgstr "DCT decimate"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:801
+msgid "DCT Decimate"
+msgstr "DCT Decimate"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:774
-msgid "Interlace"
-msgstr "Interlaccia"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:806
+msgid "Interlaced"
+msgstr "Interlacciato"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:777
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:809
 msgid "Input video is interlaced"
 msgstr "Il video in ingresso ? interlacciato"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:779
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:811
 msgid "<b>Motion Estimation</b>"
 msgstr "<b>Valutazione movimento</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:806
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:818
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:840
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:851
 msgid "Enforce the size of a decoded pixel decoded to a certain value. Set this to 1:1 for non-anamorphic video."
 msgstr "Forza le dimensioni di un pixel decodificato a un certo valore. Impostare su 1:1 per un video non anamorfico."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:810
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:844
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1051
 msgid ":"
 msgstr ":"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:827
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:860
 msgid "Set a custom aspect ratio. The default 1:1 is recommended for most video."
 msgstr "Imposta proporzioni personalizzate. L'impostazione predefinita 1:1 ? raccomandata per la maggior parte dei video."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:832
-msgid "Predefined Aspect Ratios"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:865
+msgid "Predefined Aspect Ratio"
 msgstr "Proporzioni predefinite "
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:837
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:870
 msgid "Set a common predefined aspect ratio"
 msgstr "Imposta proporzioni comuni predefinite"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:841
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1040
-msgid "As input"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:874
+msgid "As Input"
 msgstr "Come in ingresso"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:846
-msgid "Get Pixel Aspect Ratio from input video file"
-msgstr "Recupera proporzioni pixel dal video in ingresso"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:895
+msgid "<b>Sample Aspect Ratio</b>"
+msgstr "<b>Campionamento proporzioni</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:870
-msgid "<b>Sample Aspect Ratio (A/R)</b>"
-msgstr "<b>Campionamento proporzioni (A/R)</b>"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:892
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:922
 msgid "CABAC"
 msgstr "CABAC"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:895
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:925
 msgid "Lossless compression technique that reduces bitrate by approximately 10%. Increases encoding and decoding time."
 msgstr "Tecnica di compressione senza perdita che riduce il bitrate di circa il 10%. Aumenta il tempo di codifica e decodifica."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:898
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:932
 msgid "Trellis"
 msgstr "Trellis"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:907
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:941
 msgid "Use Trellis Rate Distortion Optimisation to find optimal encoding for each block. Level 0 equals disabled, level 1 equals normal and level 2 equals high."
 msgstr "Usa l'ottimizzazione distorsione Trellis per trovare la codifica ottimale per ogni blocco. 0 significa disattivata, 1 normale e 2 alta."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:914
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:948
 msgid "Noise Reduction"
 msgstr "Riduzione interferenza"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:923
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:957
 msgid "Set the amount of noise reduction"
 msgstr "Imposta il livello di riduzione interferenza"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:930
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:964
 msgid "Deblocking Filter"
 msgstr "Filtro deblocking "
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:933
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:967
 msgid "Enable in-loop deblocking to filter the video"
 msgstr "Attiva filtro deblocking in-loop"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:946
-msgid "Positive values will soften the video, negative values will sharpen."
-msgstr "Valori positivi renderanno il video pi? sfocato, negativi pi? nitido."
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:984
+msgid "Strength"
+msgstr "Intensit?"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:955
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:998
 msgid "Threshold for block detection. Positive values will detect more blocks, negative values will detect less."
 msgstr "Soglia rilevamento blocchi. Valori positivi rileveranno pi? blocchi, negativi meno."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:958
-msgid "<i>Threshold</i>"
-msgstr "<i>Soglia</i>"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1007
+msgid "Positive values will soften the video, negative values will sharpen"
+msgstr "Valori positivi renderanno il video pi? sfocato, negativi pi? nitido"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:966
-msgid "<i>Strength</i>"
-msgstr "<i>Intensit? </i>"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:974
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1010
 msgid "<b>Misc. Options</b>"
 msgstr "<b>Opzioni varie</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:979
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1015
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1066
 msgid "Motion & Misc"
 msgstr "Movimento e varie"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1005
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1041
 msgid "8x8 Transform"
 msgstr "Trasforma 8x8"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1008
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1044
 msgid "General block breakdown transformation"
 msgstr "Trasformazione per la ripartizione generale dei blocchi"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1011
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1047
 msgid "8x8, 8x16 and 16x8 P-frame search"
 msgstr "Ricerca fotogrammi-P 8x8, 8x16 e 16x8"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1014
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1050
 msgid "Improve the P-frame quality"
 msgstr "Migliora la qualit? dei fotogrammi-P"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1017
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1053
 msgid "8x8, 8x16 and 16x8 B-frame search"
 msgstr "Ricerca fotogrammi-B 8x8, 8x16 e 16x8"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1020
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1056
 msgid "Improve the B-frame quality"
 msgstr "Migliora la qualit? dei fotogrammi-B"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1023
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1059
 msgid "4x4, 4x8 and 8x4 P-frame search"
 msgstr "Ricerca fotogrammi-P 4x4, 4x8 e 8x4"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1026
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1062
 msgid "Further improve the P-frame quality"
 msgstr "Migliora ulteriormente la qualit? dei fotogrammi-P"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1028
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1064
 msgid "8x8 Intra search"
 msgstr "Ricerca Intra 8x8"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1031
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1067
 msgid "Enable DCT Intra block search to improve quality"
 msgstr "Attiva ricerca blocchi DCT Intra per migliorare la qualit?"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1034
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1070
 msgid "4x4 Intra search"
 msgstr "Ricerca Intra 4x4"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1037
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1073
 msgid "Further enable DCT Intra block search to improve quality"
 msgstr "Attiva ricerca blocchi DCT Intra per migliorare ulteriormente la qualit?"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1040
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1076
 msgid "<b>Partition Macroblocks</b>"
 msgstr "<b>Partizione Macroblock</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1062
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1100
 msgid "Bias"
 msgstr "Polarizzazione"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1075
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1107
+msgid "Max Consecutive"
+msgstr "Max consecutivi"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1120
 msgid "Increase / decrease probability for how often B-frames are used. It will not violate the maximum consecutive frame limit."
 msgstr "Aumenta / diminuisce la probabilit? di utilizzo dei fotogrammi-B. Non superer? il limite massimo di fotogrammi consecutivi."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1084
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1129
 msgid "Set the maximum number of consecutive B-frames. This defines how many duplicate frames can be dropped. Numbers 2 to 5 are recommended. This greatly improves the use of bitrate and quality."
 msgstr "Imposta il massimo numero di fotogrammi-B consecutivi. Questa opzione definisce quanti fotogrammi duplicati possono essere eliminati. Sono consigliati i valori da 2 a 5. Migliora molto l'uso del bitrate e la qualit?."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1087
-msgid "Max Consecutive"
-msgstr "Max consecutivi"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1098
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1143
 msgid "Bidirectional ME"
 msgstr "Stima movimento bidirezionale"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1103
-msgid "Optimize both motion vectors in B-frames. This will improve quality but take more time for encoding."
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1148
+msgid "Optimise both motion vectors in B-frames. This will improve quality but take more time for encoding."
 msgstr "Ottimizza entrambi i vettori movimento nei fotogrammi-B. Questo migliorer? la qualit? ma richieder? un maggior tempo di codifica."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1105
-msgid "Weighted biprediction"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1150
+msgid "Weighted Biprediction"
 msgstr "Previsione ponderata"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1110
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1155
 msgid "Enables weighting of B-frames to help fades"
 msgstr "Attiva ponderazione dei fotogrammi-B per migliorare le dissolvenze"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1113
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1158
 msgid "Adaptative DCT"
 msgstr "DCT adattativo"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1118
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1163
 msgid "Use fewer B-frames if needed. This is always recommended. If not enabled, the codec will always use the maximum number of consecutive B-frames."
 msgstr "Usa meno fotogrammi-B se necessario. Sempre consigliato. Se disattivo, il codec user? sempre il numero massimo di fotogrammi-B consecutivi."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1121
-msgid "Use as reference"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1166
+msgid "Use as Reference"
 msgstr "Usa come riferimento"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1126
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1171
 msgid "Allow B-frames to make references non-linearly to another B-frame (instead of creating a duplicate copy)"
 msgstr "Consenti ai fotogrammi-B di fare riferimento a un altro fotogramma-B in modo non lineare"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1132
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1177
 msgid "B-Frame Direct Mode"
 msgstr "Modalit? diretta fotogrammi-B "
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1140
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1185
 msgid "Auto"
 msgstr "Auto"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1141
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1186
 msgid "Temporal"
 msgstr "Temporale"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1142
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1187
 msgid "Spatial"
 msgstr "Spaziale"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1145
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1190
 msgid "<b>B-Frames</b>"
 msgstr "<b>Fotogrammi-B</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1150
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1195
 msgid "Partitions & Frames"
 msgstr "Partizioni & Fotogrammi"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1183
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1230
 msgid "Set how much \"bitrate bonus\" a keyframe can get"
 msgstr "Imposta quanti \"bonus di bitrate\" pu? avere un fotogramma chiave"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1186
-msgid "Keyframe boost (%)"
-msgstr "Amplifica fotogrammi chiave (%)"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1193
-msgid "B-frame reduction (%)"
-msgstr "Riduzione fotogrammi-B (%)"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1200
-msgid "Bitrate variability (%)"
-msgstr "Variabilit? bitrate (%)"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1213
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1239
 msgid "Set how much bitrate is deducted from a B-frame as compared to the previous P-frame"
 msgstr "Imposta quanto bitrate ? dedotto dal fotogramma-B rispetto al precedente fotogramma-P"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1222
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1248
 msgid "Define how much the bitrate can fluctuate over the entire video. 0% results in a constant bitrate stream, while 100% results in a pure quality based bitrate stream."
 msgstr "Definisci quanto pu? fluttuare il bitrate sull'intero video. 0% significa un flusso a bitrate costante, mentre 100% significa un flusso bitrate basato sulla qualit?."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1225
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1251
+msgid "Keyframe Boost (%)"
+msgstr "Amplifica fotogrammi chiave (%)"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1258
+msgid "B-frame Reduction (%)"
+msgstr "Riduzione fotogrammi-B (%)"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1265
+msgid "Bitrate Variability (%)"
+msgstr "Variabilit? bitrate (%)"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1272
 msgid "<b>Bitrate</b>"
 msgstr "<b>Bitrate</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1243
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1292
 msgid "Min QP"
 msgstr "Min QP"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1250
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1299
 msgid "Max QP"
 msgstr "Max QP"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1257
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1306
 msgid "Max QP Step"
 msgstr "Max Qp Step"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1271
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1320
 msgid "Enforce a minimum quantizer level"
 msgstr "Imponi un livelo di quantizzatore minimo"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1280
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1329
 msgid "Enforce a maximum quantizer level"
 msgstr "Imponi un livelo di quantizzatore massimo"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1289
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1338
 msgid "Define how much the quantizer rate can change between two consecutive frames"
 msgstr "Definisci quanto pu? cambiare la quantizzazione tra due fotogrammi consecutivi"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1292
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1341
 msgid "<b>Quantization Limits</b>"
 msgstr "<b>Limiti di quantizzazione</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1310
-msgid "Scene Cut Threshold"
-msgstr "Soglia di taglio scene"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1324
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1368
 msgid "Increase / decrease sensitivity for detecting scene changes. Improves I-frame usage and quality."
 msgstr "Aumenta / diminuisci la sensibilita per rilevare cambiamenti di scena. Migliora l'uso dei fotogrammi-I e la qualit?."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1327
-msgid "Min IDR frame interval"
-msgstr "Inervallo minimo fotogrammi IDR"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1371
+msgid "Scene Cut Threshold"
+msgstr "Soglia di taglio scene"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1340
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1378
+msgid "Min IDR Frame Interval"
+msgstr "Intervallo minimo fotogrammi IDR"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1391
 msgid "Set minimum frame interval between IDR frames. Defines the minimum amount a frame can be reused and referenced by other frames before a new IDR frame is established."
 msgstr "Imposta l'intervallo minimo tra fotogrammi IDR. Definisce il minimo numero di volte che un fotogramma pu? essere riutilizzato o preso a riferimento da altri fotogrammi prima che sia stabilito un nuovo IDR."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1349
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1400
 msgid "Set maximum frame interval between IDR frames. Defines the maximum amount a frame can be reused and referenced by other frames before a new IDR frame is established."
 msgstr "Imposta l'intervallo massimo tra fotogrammi IDR. Definisce il massimo numero di volte che un fotogramma pu? essere riutilizzato o preso a riferimento da altri fotogrammi prima che sia stabilito un nuovo IDR."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1352
-msgid "Max IDR frame interval"
-msgstr "Inervallo massimo fotogrammi IDR"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1403
+msgid "Max IDR Frame Interval"
+msgstr "Intervallo massimo fotogrammi IDR"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1359
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1410
 msgid "<b>More Rate Settings</b>"
 msgstr "<b>Altre opzioni</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1377
-msgid "VBV buffer size"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1430
+msgid "VBV Buffer Size"
 msgstr "Dimensione buffer VBV"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1384
-msgid "Initial VBV buffer (%)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1437
+msgid "Initial VBV Buffer (%)"
 msgstr "Buffer VBV iniziale (%)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1391
-msgid "Maximum local bitrate"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1444
+msgid "Maximum Local Bitrate"
 msgstr "Bitrate locale massimo"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1422
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1475
 msgid "<b>Video Buffer Verifier</b>"
 msgstr "<b>Verificatore buffer video</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1459
-msgid "Allowed variance of average bitrate. Lower values mean less variance. Higher values mean more variance."
-msgstr "Varianza consentita del bitrate medio. Valori pi? alti significano maggiore varianza."
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1462
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1508
 msgid "Bitrate Variance"
 msgstr "Varianza bitrate"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1475
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1521
+msgid "Allowed variance of average bitrate. Lower values mean less variance. Higher values mean more variance."
+msgstr "Varianza consentita del bitrate medio. Valori pi? alti significano maggiore varianza."
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1530
 msgid "Allowed variance of average quantizer or quality. Lower values mean less variance. Higher values mean more variance. Note that 0 means constant quality while 1 means constant fluctuation. Recommended 0.6."
 msgstr "Varianza consentita della qualit? media. Valori pi? alti significano maggiore varianza. Nota che 0 significa qualit? costante mentre 1 fluttuazione costante. 0,6 consigliato."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1484
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1539
 msgid "Reduced fluctuations in Quantizer (before curve compression)"
 msgstr "Fluttuazioni ridotte nel quantizzatore (prima di compressione curva)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1493
-msgid "Reduce fluctuations in Quantizer (after curve compression)"
-msgstr "Fluttuazioni ridotte nel quantizzatore (dopo compressione curva)"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1496
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1550
 msgid "Quantizer Compression"
 msgstr "Compressione quantizzatore"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1503
-msgid "Temp. Blur of est Frame Complexity"
-msgstr "Sfocatura temp. complessit? fotogramma est"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1557
+msgid "Temp. Blur of Est. Frame Complexity"
+msgstr "Sfocatura temp. complessit? fotogramma est."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1510
-msgid "Temp. Blur of Quant after CC"
-msgstr "Sfocatura temp. quantizzatore dopo CC"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1564
+msgid "Temp. Blur of Quant. after CC"
+msgstr "Sfocatura temp. quant. dopo CC"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1517
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1571
 msgid "<b>Misc</b>"
 msgstr "<b>Varie</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1541
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1597
 msgid "Quantization factors used between I and P-frames"
 msgstr "Fattori di quantizzazione usati tra fotogrammi I e P"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1550
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1606
 msgid "Quantization used between P and B-frames"
 msgstr "Quantizzazione usata tra fotogrammi P e B"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1559
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1615
 msgid "Quantization difference between chroma (color) and luma (brightness)"
 msgstr "Differenza di quantizzazione tra croma (colore) e luma (luminost?)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1562
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1618
 msgid "Factor between I and P-frame Quants"
 msgstr "Fattore tra quantizzazione fotogrammi I e P"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1569
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1625
 msgid "Factor between P and B-frame Quants"
 msgstr "Fattore tra quantizzazione fotogrammi P e B"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1576
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1632
 msgid "Chroma QP Offset"
 msgstr "Offset Croma QP"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1583
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1639
 msgid "<b>Quantizers</b>"
 msgstr "<b>Quantizzatori</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1601
-msgid "Custom matrix"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1657
+msgid "Flat Matrix"
+msgstr "Matrice piana"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1664
+msgid "JVT Matrix"
+msgstr "Matrice JVT"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1674
+msgid "Custom Matrix"
 msgstr "Matrice personalizzata"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1610
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1684
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1128
 msgid "Open CQM file"
 msgstr "Apri file CQM"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1616
-msgid "JVT matrix"
-msgstr "Matrice JVT"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1624
-msgid "Flat matrix"
-msgstr "Matrice piana"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1633
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1692
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1136
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1568
 msgid "Edit Custom Matrix"
 msgstr "Modifica matrice personalizzata"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1638
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1695
 msgid "Edit loaded custom quantization matrix file"
 msgstr "Modifica la matrice di quantizzazione personalizzata caricata"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1646
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1697
 msgid "<b>Quantization Matrices</b>"
 msgstr "<b>Quantizzazione matrici</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1651
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1702
 msgid "More"
 msgstr "Altro"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1659
-msgid "Defaults"
-msgstr "Predefiniti"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1710
+msgid "_Defaults"
+msgstr "_Predefiniti"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:237
 msgid "Xvid Encoder"
@@ -5546,10 +5362,6 @@
 msgid "Max P Frame Qzer"
 msgstr "Max. quantiz. fotogramma P"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:480
-msgid "Quantizer"
-msgstr "Quantizzatore"
-
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:485
 msgid "Not Yet!"
 msgstr "Non ancora!"
@@ -5592,8 +5404,8 @@
 msgstr "Bitrate finale (kb/s):"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:362
-msgid "Target size (MBytes):"
-msgstr "Dimensione finale (MB):"
+msgid "Target video size (MB):"
+msgstr "Dimensione video finale (MB):"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:479
 msgid "Select Custom Matrix File to write"
@@ -5628,25 +5440,16 @@
 msgstr "Seleziona codifica a 1 o a 2 passate"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:760
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:123
-msgid "Single pass - bitrate"
-msgstr "Passata singola - bitrate"
+msgid "Single Pass - Bitrate"
+msgstr "Passata singola - Bitrate"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:764
-msgid "Single pass - quantizer"
-msgstr "Passata singola - quantizzatore"
+msgid "Single Pass - Quantizer"
+msgstr "Passata singola - Quantizzatore"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:768
-msgid "Two pass, final size"
-msgstr "Due passate - dimensione finale"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:772
-msgid "Two pass, average bitrate"
-msgstr "Due passate - bitrate variabile"
-
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:776
-msgid "Same Qz as input"
-msgstr "Stesso Qz dell'input"
+msgid "Same Quantizer as Input"
+msgstr "Stesso quantizzatore dell'input"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:785
 msgid "Target video bitrate"
@@ -5843,6 +5646,10 @@
 msgid "Produces nicer-looking B-frames"
 msgstr "Produce fotogrammi-B migliori"
 
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1040
+msgid "As input"
+msgstr "Come in ingresso"
+
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1043
 msgid "Get PAR from input video file"
 msgstr "Recupera proporzioni dal video in ingresso"
@@ -6024,6 +5831,10 @@
 msgid "_Encoding mode:"
 msgstr "Modalit? di _codifica:"
 
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:123
+msgid "Single pass - bitrate"
+msgstr "Passata singola - bitrate"
+
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:125
 msgid "Single pass - constant quality"
 msgstr "Passata singola - qualit? costante"
@@ -7058,6 +6869,11 @@
 msgstr "Fotogramma _finale (ultimo numero di fotogramma da includere), -1 = ultimo:"
 
 #: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:189
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:191
+msgid "_Output File:"
+msgstr "File in _uscita:"
+
+#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:189
 msgid "Select output file"
 msgstr "Seleziona il file in uscita"
 
@@ -7338,7 +7154,7 @@
 
 #: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:255
 #: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:196
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:371
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:378
 #: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:159
 msgid "_Debugging settings (bits):"
 msgstr "Impostazioni di _debug (bit):"
@@ -7614,7 +7430,7 @@
 msgstr "Crop _inferiore (ignora questo numero di particelle):"
 
 #: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:191
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:321
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:324
 #: avidemux/gtk_gui.cpp:2016
 #: avidemux/gtk_gui.cpp:2113
 msgid "Select file"
@@ -7684,79 +7500,79 @@
 msgid "Stabilize Threshold"
 msgstr "Stabilizza soglia"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:258
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:261
 msgid "P' = A"
 msgstr "P' = A"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:259
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:262
 msgid "P' = P"
 msgstr "P' = P"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:260
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:263
 msgid "P' = P - A"
 msgstr "P' = P - A"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:261
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:264
 msgid "P' = A - P"
 msgstr "P' = A - P"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:262
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:265
 msgid "P' = P + A"
 msgstr "P' = P + A"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:263
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:266
 msgid "P' = P * A"
 msgstr "P' = P * A"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:264
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:267
 msgid "P' = P / A"
 msgstr "P' = P / A"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:265
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:268
 msgid "P' = A / P"
 msgstr "P' = A / P"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:266
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:269
 msgid "P' = min (P, A)"
 msgstr "P' = min (P, A)"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:267
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:270
 msgid "P' = max (P, A)"
 msgstr "P' = max (P, A)"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:272
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:275
 msgid "A = convolve(P); Load convolution kernel from file"
 msgstr "A = avvolgi(P); carica nucleo di avvolgimento da file"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:274
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:277
 msgid "A = pixel from image file as float; Load image from file"
 msgstr "A = pixel dal file immagine come float; carica immagine da file"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:276
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:279
 msgid "A = pixel from image file as integer; Load image from file"
 msgstr "A = pixel dal file immagine come integer; carica immagine da file"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:278
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:281
 msgid "A = floating point constant value"
 msgstr "A = valore costante virgola mobile"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:280
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:283
 msgid "A = rolling average of pixel: A = A*(1-alpha)+(P*alpha)"
 msgstr "A = media mobile di pixel: A = A*(1-alpha)+(P*alpha)"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:285
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:288
 msgid "Select _Operation on each pixel P and input A:"
 msgstr "_Seleziona opeazione per ogni pixel P e input A:"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:290
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:293
 msgid "Input _Type:"
 msgstr "_Tipo in ingresso:"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:321
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:324
 msgid "Input _File (image or convolution kernel):"
 msgstr "_File di ingresso (immagine o nucleo di avvolgimento):"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:324
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:327
 msgid ""
 "_Load Bias (added to each pixel\n"
 "in file image when loaded):"
@@ -7764,7 +7580,7 @@
 "_Carica Bias (aggiunto a ogni pixel\n"
 "nell'immagine al caricamento):"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:329
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:332
 msgid ""
 "Load _Multiplier (each pixel in\n"
 "file image mult. by this when loaded):"
@@ -7772,43 +7588,47 @@
 "Carica _Moltiplicatore (ogni pixel nell'immagine\n"
 "moltiplicato per questo valore al caricamento):"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:335
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:338
 msgid "Input _Constant:"
 msgstr "Costant_e in ingresso:"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:339
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:342
 msgid ""
 "Memory constant _alpha\n"
-"(where A = (1-alpha)*A + alpha*curr_frame):"
+"(where A = (1-alpha)*A + alpha*(curr_frame + lookahead)):"
 msgstr ""
 "Costante di memoria _alpha\n"
-"(dove A = (1-alpha)*A + alpha*fotogrammacorrente):"
+"(dove A = (1-alpha)*A + alpha*(fotogrammacorrente + N fotogrammi):"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:344
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:347
+msgid "Look ahead _N frames:"
+msgstr "_N fotogrammi successivi:"
+
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:351
 msgid "Init _Start Frame (first frame # to use for head start):"
 msgstr ""
 "Ini_zializza fotogramma iniziale (primo numero\n"
 "di fotogramma da usare per la partenza facilitata):"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:348
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:355
 msgid "Init _End Frame (last frame # to use for head start):"
 msgstr ""
 "Inizia_lizza fotogramma finale (ultimo numero\n"
 "di fotogramma da usare per la partenza facilitata):"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:352
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:359
 msgid "Init By _Rolling (compute head start using a rolling average rather than a straight average)"
 msgstr "Inizializza con media mobile (elabo_ra partenza facilitata usando una media mobile invece di una media diretta)"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:357
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:364
 msgid "_Bias (will be added to result):"
 msgstr "_Bias (sar? aggiunto al risultato):"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:360
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:367
 msgid "_Result Bias (added to each result pixel):"
 msgstr "Bias _risultato (aggiunto a ogni pixel risultato):"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:364
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:371
 msgid ""
 "Result _Multiplier (each result pixel\n"
 "multiplied by this):"
@@ -7816,7 +7636,7 @@
 "_Moltiplicatore risultato (ogni pixel nell'immagine\n"
 "moltiplicato per questo valore):"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:369
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:376
 msgid "_Histogram every N frames (0 to disable):"
 msgstr "_Istogramma ogni N fotogrammi (0 per disattivare):"
 



From mean at mail.berlios.de  Fri Mar 21 07:48:45 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 21 Mar 2008 07:48:45 +0100
Subject: [Avidemux-svn-commit] r3910 - in
	branches/avidemux_2.5_branch_gruntster:
	avidemux/plugins/ADM_audiodecoder/ADM_ad_dca cmake
Message-ID: <200803210648.m2L6mjIG004801@sheep.berlios.de>

Author: mean
Date: 2008-03-21 07:48:44 +0100 (Fri, 21 Mar 2008)
New Revision: 3910

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_dca/ADM_dca.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_dca/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/cmake/admCheckDca.cmake
Log:
[AudioDecoder] Make faad/dca works, dts untested


Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_dca/ADM_dca.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_dca/ADM_dca.cpp	2008-03-18 18:11:00 UTC (rev 3909)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_dca/ADM_dca.cpp	2008-03-21 06:48:44 UTC (rev 3910)
@@ -15,89 +15,22 @@
  *                                                                         *
  ***************************************************************************/
 #include <math.h>
+
+#include "config.h"
 #include "ADM_default.h"
-#include "ADM_ad_plugin.h"
-#ifdef USE_LIBDCA_002
-extern "C" {
-#include "dts.h"
-}
-#define LIBDCA_STATE dts_state_t
-#define DTS(x) DTS_##x
-#else
-extern "C" {
-#include "dca.h"
-}
-#define LIBDCA_STATE dca_state_t
-#define DTS(x) DCA_##x 
-#endif
 
-#define DTS_HEADER_SIZE (10)
+#include "ADM_audio/aviaudio.hxx"
+#include "ADM_audiocodec/ADM_audiocodec.h"
 
-class ADM_AudiocodecDCA : public     ADM_Audiocodec
-{
-	protected:
-		void *dts_handle;
+#include "prefs.h"
 
-	public:
-		ADM_AudiocodecDCA(uint32_t fourcc, WAVHeader *info, uint32_t l, uint8_t *d);
-		virtual	~ADM_AudiocodecDCA();
-		virtual	uint8_t beginDecompress(void);
-		virtual	uint8_t endDecompress(void);
-		virtual	uint8_t run(uint8_t *inptr, uint32_t nbIn, float *outptr, uint32_t *nbOut);
-		virtual	uint8_t isCompressed(void) {return 1;}
-		virtual	uint8_t isDecompressable(void) {return 1;}
+#ifdef USE_LIBDCA
+#include "ADM_audio/ADM_dcainfo.h"
+#include "ADM_libraries/ADM_libwrapper/libwrapper_global.h"
 
-   };
-typedef struct
-{
-		int (*dts_block)(LIBDCA_STATE* state);
-		int (*dts_blocks_num) (LIBDCA_STATE* state);
-		int (*dts_frame) (LIBDCA_STATE* state, uint8_t* buf, int* flags, level_t* level, sample_t bias);
-		void (*dts_free) (LIBDCA_STATE* state);
-		LIBDCA_STATE* (*dts_init) (uint32_t mm_accel);
-		sample_t* (*dts_samples) (LIBDCA_STATE* state);
-		int (*dts_syncinfo) (LIBDCA_STATE* state, uint8_t* buf, int* flags, int* sample_rate, int* bit_rate, int* frame_length);
-}DCA_func_struct;
-#ifdef USE_LIBDCA_002
-DCA_func_struct dcaFunctions=
-{
-	dts_block, 
-	dts_blocks_num, 
-	dts_frame, 
-	dts_free, 
-	dts_init,
-	dts_samples, 
-	dts_syncinfo
-};	
-#else // 05
-DCA_func_struct dcaFunctions=
-{
-	dca_block, 
-	dca_blocks_num, 
-	dca_frame, 
-	dca_free, 
-	dca_init,
-	dca_samples, 
-	dca_syncinfo
-};	
-#endif
+#define DTS_HANDLE ((dts_state_t *)dts_handle)
 
-DCA_func_struct *dca=&dcaFunctions;
-
-#define DTS_HANDLE ((LIBDCA_STATE *)dts_handle)
-// Supported formats + declare our plugin
-//*******************************************************
-static uint32_t Formats[]={WAV_DTS};
-DECLARE_AUDIO_DECODER(ADM_AudiocodecDCA,						// Class
-			0,0,1, 												// Major, minor,patch 
-			Formats, 											// Supported formats
-#ifdef USE_LIBDCA_002			
-			"libDts decoder plugin for avidemux (c) Mean/Gruntster\n"); 	// Desc
-#else
-			"libDca decoder plugin for avidemux (c) Mean/Gruntster\n"); 	// Desc
-#endif
-   //********************************************************
-ADM_AudiocodecDCA::ADM_AudiocodecDCA(uint32_t fourcc, WAVHeader *info, uint32_t l, uint8_t *d) :   ADM_Audiocodec(fourcc)
+ADM_AudiocodecDCA::ADM_AudiocodecDCA( uint32_t fourcc, WAVHeader *info) :   ADM_Audiocodec(fourcc)
 {
     int flags=0;
     ADM_assert(fourcc==WAV_DTS);
@@ -110,7 +43,7 @@
     CHK(MMXEXT,MMXEXT);
 #endif
     
-    dts_handle=(void *)dca->dts_init(flags);
+    dts_handle=(void *)dca->dts_init_(flags);
     if(!dts_handle)
     {
         printf("Cannot init libdca\n");
@@ -123,7 +56,7 @@
 {
     if(dts_handle)
     {
-        dca->dts_free(DTS_HANDLE);
+        dca->dts_free_(DTS_HANDLE);
         dts_handle=NULL;
     }
 }
@@ -157,7 +90,7 @@
             break;
         }
         //length = ADM_DCAGetInfo(ptr,nbIn, &samprate, &bitrate, &chan,&syncoff,&flags);
-        length = dca->dts_syncinfo (DTS_HANDLE,  inptr, &flags, &samprate,&bitrate, &frame_length);
+        length = dca->dts_syncinfo_ (DTS_HANDLE,  inptr, &flags, &samprate,&bitrate, &frame_length);
 
         if(!length)
         {
@@ -169,41 +102,41 @@
             // not enough data
             break;
         }
-        CHANNEL_TYPE *p_ch_type = channelMapping;
 
-		switch (flags & DTS(CHANNEL_MASK)) 
-		{
-			case DTS(MONO):
+	if (ch_route.mode < 1) {
+		CHANNEL_TYPE *p_ch_type = ch_route.input_type;
+		switch (flags & DTS_CHANNEL_MASK) {
+			case DTS_MONO:
 				*(p_ch_type++) = CH_MONO;
 			break;
-			case DTS(STEREO):
-			case DTS(DOLBY):
+			case DTS_STEREO:
+			case DTS_DOLBY:
 				*(p_ch_type++) = CH_FRONT_LEFT;
 				*(p_ch_type++) = CH_FRONT_RIGHT;
 			break;
-			case DTS(3F):
+			case DTS_3F:
 				*(p_ch_type++) = CH_FRONT_CENTER;
 				*(p_ch_type++) = CH_FRONT_LEFT;
 				*(p_ch_type++) = CH_FRONT_RIGHT;
 			break;
-			case DTS(2F1R):
+			case DTS_2F1R:
 				*(p_ch_type++) = CH_FRONT_LEFT;
 				*(p_ch_type++) = CH_FRONT_RIGHT;
 				*(p_ch_type++) = CH_REAR_CENTER;
 			break;
-			case DTS(3F1R):
+			case DTS_3F1R:
 				*(p_ch_type++) = CH_FRONT_CENTER;
 				*(p_ch_type++) = CH_FRONT_LEFT;
 				*(p_ch_type++) = CH_FRONT_RIGHT;
 				*(p_ch_type++) = CH_REAR_CENTER;
 			break;
-			case DTS(2F2R):
+			case DTS_2F2R:
 				*(p_ch_type++) = CH_FRONT_LEFT;
 				*(p_ch_type++) = CH_FRONT_RIGHT;
 				*(p_ch_type++) = CH_REAR_LEFT;
 				*(p_ch_type++) = CH_REAR_RIGHT;
 			break;
-			case DTS(3F2R):
+			case DTS_3F2R:
 				*(p_ch_type++) = CH_FRONT_CENTER;
 				*(p_ch_type++) = CH_FRONT_LEFT;
 				*(p_ch_type++) = CH_FRONT_RIGHT;
@@ -212,18 +145,17 @@
 			break;
 			default:
 				ADM_assert(0);
-		} // End switch
-		if (flags & DTS(LFE)) 
-		{
+		}
+		if (flags & DTS_LFE) {
 			*(p_ch_type++) = CH_LFE;
 		}
-	
+	}
 
         sample_t level = 1, bias = 0;
-        flags &=DTS(CHANNEL_MASK);
-        flags |= DTS(ADJUST_LEVEL);
+        flags &=DTS_CHANNEL_MASK;
+        flags |= DTS_ADJUST_LEVEL;
 
-        if (dca->dts_frame(DTS_HANDLE, inptr, &flags, &level, bias))
+        if (dca->dts_frame_(DTS_HANDLE, inptr, &flags, &level, bias))
         {
             printf("\n DTS_frame failed!");
             inptr+=length;
@@ -236,17 +168,17 @@
         inptr+=length;
         nbIn-=length;
         // Each block is 256 samples
-        *nbOut += 256 * chan * dca->dts_blocks_num(DTS_HANDLE);
+        *nbOut += 256 * chan * dca->dts_blocks_num_(DTS_HANDLE);
 	float *cur;
-	for (int i = 0; i < dca->dts_blocks_num(DTS_HANDLE); i++) {
-		if (dca->dts_block(DTS_HANDLE)) {
-			printf("\n[DTS] dts_block failed on block %d/%d\n",i,dca->dts_blocks_num (DTS_HANDLE));
+	for (int i = 0; i < dca->dts_blocks_num_(DTS_HANDLE); i++) {
+		if (dca->dts_block_ (DTS_HANDLE)) {
+			printf("\n[DTS] dts_block failed on block %d/%d\n",i,dca->dts_blocks_num_ (DTS_HANDLE));
 			// in that case we silent out the chunk
 			memset(outptr, 0, 256 * chan * sizeof(float));
 		} else {
 			float *cur;
 			for (int k = 0; k < chan; k++) {
-				sample_t *sample=(sample_t *)dca->dts_samples(DTS_HANDLE);
+				sample_t *sample=(sample_t *)dca->dts_samples_(DTS_HANDLE);
 				sample += 256 * k;
 				cur = outptr + k;
 				for (int j = 0; j < 256; j++) {
@@ -262,3 +194,4 @@
     return 1; 
 }
 
+#endif

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_dca/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_dca/CMakeLists.txt	2008-03-18 18:11:00 UTC (rev 3909)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_dca/CMakeLists.txt	2008-03-21 06:48:44 UTC (rev 3910)
@@ -1,6 +1,5 @@
-# DCA decoder
 INCLUDE(admCheckDca)
-checkDca()
+checkFaad()
 
 IF (LIBDCA_FOUND)
 	INCLUDE(ad_plugin)
@@ -11,8 +10,7 @@
 	TARGET_LINK_LIBRARIES(ADM_ad_dca ${LIBDCA_LIBRARY_DIR})
 
 	ADD_TARGET_CFLAGS(ADM_ad_dca "-I${LIBDCA_INCLUDE_DIR}")
-	ADD_TARGET_CFLAGS(ADM_ad_dca "-DUSE_LIBDCA_${LIBDCA_VERSION}")
 
 	INIT_AUDIO_PLUGIN(ADM_ad_dca)
 	INSTALL_AUDIODECODER(ADM_ad_dca)
-ENDIF (LIBDCA_FOUND)
+ENDIF (HAVE_FAAD)

Modified: branches/avidemux_2.5_branch_gruntster/cmake/admCheckDca.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admCheckDca.cmake	2008-03-18 18:11:00 UTC (rev 3909)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admCheckDca.cmake	2008-03-21 06:48:44 UTC (rev 3910)
@@ -14,13 +14,22 @@
 
 	SET(LIBDCA_VERSION 005)
 
-	FIND_HEADER_AND_LIB(LIBDCA_005 dca.h dca dca_init ${LIBDCA_REQUIRED_FLAGS})
+	IF (USE_LATE_BINDING)
+		FIND_HEADER_AND_LIB(LIBDCA_005 dca.h)
 
-	IF (NOT LIBDCA_005_FOUND)
-		SET(LIBDCA_VERSION 002)
-		FIND_HEADER_AND_LIB(LIBDCA_002 dts.h dts dts_init ${LIBDCA_REQUIRED_FLAGS})
-	ENDIF (NOT LIBDCA_005_FOUND)
+		IF (NOT LIBDCA_005_FOUND)
+			SET(LIBDCA_VERSION 002)
+			FIND_HEADER_AND_LIB(LIBDCA_002 dts.h)
+		ENDIF (NOT LIBDCA_005_FOUND)
+	ELSE (USE_LATE_BINDING)
+		FIND_HEADER_AND_LIB(LIBDCA_005 dca.h dca dca_init ${LIBDCA_REQUIRED_FLAGS})
 
+		IF (NOT LIBDCA_005_FOUND)
+			SET(LIBDCA_VERSION 002)
+			FIND_HEADER_AND_LIB(LIBDCA_002 dts.h dts dts_init ${LIBDCA_REQUIRED_FLAGS})
+		ENDIF (NOT LIBDCA_005_FOUND)
+	ENDIF (USE_LATE_BINDING)
+
 	IF (LIBDCA_${LIBDCA_VERSION}_FOUND)
 		SET(LIBDCA_FOUND 1)
 		SET(USE_LIBDCA 1)



From mean at mail.berlios.de  Fri Mar 21 07:51:40 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 21 Mar 2008 07:51:40 +0100
Subject: [Avidemux-svn-commit] r3912 - in
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg:
	ADM_libpostproc ADM_libswscale
Message-ID: <200803210651.m2L6pe0Z005037@sheep.berlios.de>

Author: mean
Date: 2008-03-21 07:51:32 +0100 (Fri, 21 Mar 2008)
New Revision: 3912

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libpostproc/postprocess.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libpostproc/postprocess.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libpostproc/postprocess_altivec_template.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libpostproc/postprocess_internal.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libpostproc/postprocess_template.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/rgb2rgb.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/rgb2rgb.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/rgb2rgb_template.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale_altivec_template.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale_internal.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale_template.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/yuv2rgb.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/yuv2rgb_altivec.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/yuv2rgb_template.c
Log:
[Lav*] import


Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libpostproc/postprocess.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libpostproc/postprocess.c	2008-03-21 06:48:49 UTC (rev 3911)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libpostproc/postprocess.c	2008-03-21 06:51:32 UTC (rev 3912)
@@ -47,8 +47,8 @@
 MedianDeinterlace#      E       Ec      Ec
 TempDeNoiser#           E               e       e       Ec
 
-* i dont have a 3dnow CPU -> its untested, but noone said it doesnt work so it seems to work
-# more or less selfinvented filters so the exactness isnt too meaningfull
+* I do not have a 3DNow! CPU -> it is untested, but no one said it does not work so it seems to work
+# more or less selfinvented filters so the exactness is not too meaningful
 E = Exact implementation
 e = allmost exact implementation (slightly different rounding,...)
 a = alternative / approximate impl
@@ -74,7 +74,7 @@
 //Changelog: use the Subversion log
 
 #include "config.h"
-#include "../ADM_lavutil/avutil.h"
+#include "avutil.h"
 #include <inttypes.h>
 #include <stdio.h>
 #include <stdlib.h>
@@ -87,14 +87,9 @@
 //#undef HAVE_MMX
 //#undef ARCH_X86
 //#define DEBUG_BRIGHTNESS
-#ifdef USE_FASTMEMCPY
-#include "libvo/fastmemcpy.h"
-#endif
 #include "postprocess.h"
 #include "postprocess_internal.h"
 
-#include "mangle.h" //FIXME should be supressed
-
 #ifdef HAVE_ALTIVEC_H
 #include <altivec.h>
 #endif
@@ -106,22 +101,19 @@
 //#define NUM_BLOCKS_AT_ONCE 16 //not used yet
 
 #if defined(ARCH_X86)
-static uint64_t __attribute__((aligned(8))) attribute_used w05= 0x0005000500050005LL;
-static uint64_t __attribute__((aligned(8))) attribute_used w04= 0x0004000400040004LL;
-static uint64_t __attribute__((aligned(8))) attribute_used w20= 0x0020002000200020LL;
-static uint64_t __attribute__((aligned(8))) attribute_used b00= 0x0000000000000000LL;
-static uint64_t __attribute__((aligned(8))) attribute_used b01= 0x0101010101010101LL;
-static uint64_t __attribute__((aligned(8))) attribute_used b02= 0x0202020202020202LL;
-static uint64_t __attribute__((aligned(8))) attribute_used b08= 0x0808080808080808LL;
-static uint64_t __attribute__((aligned(8))) attribute_used b80= 0x8080808080808080LL;
+DECLARE_ASM_CONST(8, uint64_t, w05)= 0x0005000500050005LL;
+DECLARE_ASM_CONST(8, uint64_t, w04)= 0x0004000400040004LL;
+DECLARE_ASM_CONST(8, uint64_t, w20)= 0x0020002000200020LL;
+DECLARE_ASM_CONST(8, uint64_t, b00)= 0x0000000000000000LL;
+DECLARE_ASM_CONST(8, uint64_t, b01)= 0x0101010101010101LL;
+DECLARE_ASM_CONST(8, uint64_t, b02)= 0x0202020202020202LL;
+DECLARE_ASM_CONST(8, uint64_t, b08)= 0x0808080808080808LL;
+DECLARE_ASM_CONST(8, uint64_t, b80)= 0x8080808080808080LL;
 #endif
 
-static uint8_t clip_table[3*256];
-static uint8_t * const clip_tab= clip_table + 256;
+DECLARE_ASM_CONST(8, int, deringThreshold)= 20;
 
-static const int attribute_used deringThreshold= 20;
 
-
 static struct PPFilter filters[]=
 {
         {"hb", "hdeblock",              1, 1, 3, H_DEBLOCK},
@@ -147,11 +139,11 @@
 
 static const char *replaceTable[]=
 {
-        "default",      "hdeblock:a,vdeblock:a,dering:a",
-        "de",           "hdeblock:a,vdeblock:a,dering:a",
-        "fast",         "x1hdeblock:a,x1vdeblock:a,dering:a",
-        "fa",           "x1hdeblock:a,x1vdeblock:a,dering:a",
-        "ac",           "ha:a:128:7,va:a,dering:a",
+        "default",      "hb:a,vb:a,dr:a",
+        "de",           "hb:a,vb:a,dr:a",
+        "fast",         "h1:a,v1:a,dr:a",
+        "fa",           "h1:a,v1:a,dr:a",
+        "ac",           "ha:a:128:7,va:a,dr:a",
         NULL //End Marker
 };
 
@@ -400,9 +392,9 @@
 /**
  * Experimental Filter 1 (Horizontal)
  * will not damage linear gradients
- * Flat blocks should look like they where passed through the (1,1,2,2,4,2,2,1,1) 9-Tap filter
- * can only smooth blocks at the expected locations (it cant smooth them if they did move)
- * MMX2 version does correct clipping C version doesnt
+ * Flat blocks should look like they were passed through the (1,1,2,2,4,2,2,1,1) 9-Tap filter
+ * can only smooth blocks at the expected locations (it cannot smooth them if they did move)
+ * MMX2 version does correct clipping C version does not
  * not identical with the vertical one
  */
 static inline void horizX1Filter(uint8_t *src, int stride, int QP)
@@ -649,21 +641,21 @@
 #include "postprocess_template.c"
 #endif
 
-// minor note: the HAVE_xyz is messed up after that line so dont use it
+// minor note: the HAVE_xyz is messed up after that line so do not use it.
 
-static inline void postProcess(uint8_t src[], int srcStride, uint8_t dst[], int dstStride, int width, int height,
-        QP_STORE_T QPs[], int QPStride, int isColor, pp_mode_t *vm, pp_context_t *vc)
+static inline void postProcess(const uint8_t src[], int srcStride, uint8_t dst[], int dstStride, int width, int height,
+        const QP_STORE_T QPs[], int QPStride, int isColor, pp_mode_t *vm, pp_context_t *vc)
 {
         PPContext *c= (PPContext *)vc;
         PPMode *ppMode= (PPMode *)vm;
         c->ppMode= *ppMode; //FIXME
 
-        // useing ifs here as they are faster than function pointers allthough the
-        // difference wouldnt be messureable here but its much better because
-        // someone might exchange the cpu whithout restarting mplayer ;)
+        // Using ifs here as they are faster than function pointers although the
+        // difference would not be measurable here but it is much better because
+        // someone might exchange the CPU whithout restarting MPlayer ;)
 #ifdef RUNTIME_CPUDETECT
 #if defined(ARCH_X86)
-        // ordered per speed fasterst first
+        // ordered per speed fastest first
         if(c->cpuCaps & PP_CPU_CAPS_MMX2)
                 postProcess_MMX2(src, srcStride, dst, dstStride, width, height, QPs, QPStride, isColor, c);
         else if(c->cpuCaps & PP_CPU_CAPS_3DNOW)
@@ -702,7 +694,11 @@
 
 /* -pp Command line Help
 */
-char *pp_help=
+#if LIBPOSTPROC_VERSION_INT < (52<<16)
+const char *const pp_help=
+#else
+const char pp_help[] =
+#endif
 "Available postprocessing filters:\n"
 "Filters                        Options\n"
 "short  long name       short   long option     Description\n"
@@ -746,12 +742,12 @@
 "\n"
 ;
 
-pp_mode_t *pp_get_mode_by_name_and_quality(char *name, int quality)
+pp_mode_t *pp_get_mode_by_name_and_quality(const char *name, int quality)
 {
         char temp[GET_MODE_BUFFER_SIZE];
         char *p= temp;
-        const char *filterDelimiters= ",/";
-        const char *optionDelimiters= ":";
+        static const char filterDelimiters[] = ",/";
+        static const char optionDelimiters[] = ":";
         struct PPMode *ppMode;
         char *filterToken;
 
@@ -964,7 +960,7 @@
 
         for(i=0; i<3; i++)
         {
-                //Note:the +17*1024 is just there so i dont have to worry about r/w over te end
+                //Note: The +17*1024 is just there so i do not have to worry about r/w over the end.
                 reallocAlign((void **)&c->tempBlured[i], 8, stride*mbHeight*16 + 17*1024);
                 reallocAlign((void **)&c->tempBluredPast[i], 8, 256*((height+7)&(~7))/2 + 17*1024);//FIXME size
         }
@@ -975,27 +971,17 @@
         reallocAlign((void **)&c->forcedQPTable, 8, mbWidth*sizeof(QP_STORE_T));
 }
 
-static void global_init(void){
-        int i;
-        memset(clip_table, 0, 256);
-        for(i=256; i<512; i++)
-                clip_table[i]= i;
-        memset(clip_table+512, 0, 256);
-}
-
 static const char * context_to_name(void * ptr) {
     return "postproc";
 }
 
-static AVClass av_codec_context_class = { "Postproc", context_to_name, NULL };
+static const AVClass av_codec_context_class = { "Postproc", context_to_name, NULL };
 
 pp_context_t *pp_get_context(int width, int height, int cpuCaps){
         PPContext *c= av_malloc(sizeof(PPContext));
         int stride= (width+15)&(~15);    //assumed / will realloc if needed
         int qpStride= (width+15)/16 + 2; //assumed / will realloc if needed
 
-        global_init();
-
         memset(c, 0, sizeof(PPContext));
         c->av_class = &av_codec_context_class;
         c->cpuCaps= cpuCaps;
@@ -1035,10 +1021,10 @@
         av_free(c);
 }
 
-void  pp_postprocess(uint8_t * src[3], int srcStride[3],
-                 uint8_t * dst[3], int dstStride[3],
+void  pp_postprocess(const uint8_t * src[3], const int srcStride[3],
+                 uint8_t * dst[3], const int dstStride[3],
                  int width, int height,
-                 QP_STORE_T *QP_store,  int QPStride,
+                 const QP_STORE_T *QP_store,  int QPStride,
                  pp_mode_t *vm,  void *vc, int pict_type)
 {
         int mbWidth = (width+15)>>4;
@@ -1060,16 +1046,16 @@
                 QP_store= c->forcedQPTable;
                 absQPStride = QPStride = 0;
                 if(mode->lumMode & FORCE_QUANT)
-                        for(i=0; i<mbWidth; i++) QP_store[i]= mode->forcedQuant;
+                        for(i=0; i<mbWidth; i++) c->forcedQPTable[i]= mode->forcedQuant;
                 else
-                        for(i=0; i<mbWidth; i++) QP_store[i]= 1;
+                        for(i=0; i<mbWidth; i++) c->forcedQPTable[i]= 1;
         }
 
         if(pict_type & PP_PICT_TYPE_QP2){
                 int i;
                 const int count= mbHeight * absQPStride;
                 for(i=0; i<(count>>2); i++){
-                        ((uint32_t*)c->stdQPTable)[i] = (((uint32_t*)QP_store)[i]>>1) & 0x7F7F7F7F;
+                        ((uint32_t*)c->stdQPTable)[i] = (((const uint32_t*)QP_store)[i]>>1) & 0x7F7F7F7F;
                 }
                 for(i<<=2; i<count; i++){
                         c->stdQPTable[i] = QP_store[i]>>1;
@@ -1095,7 +1081,7 @@
                         int i;
                         const int count= mbHeight * QPStride;
                         for(i=0; i<(count>>2); i++){
-                                ((uint32_t*)c->nonBQPTable)[i] = ((uint32_t*)QP_store)[i] & 0x3F3F3F3F;
+                                ((uint32_t*)c->nonBQPTable)[i] = ((const uint32_t*)QP_store)[i] & 0x3F3F3F3F;
                         }
                         for(i<<=2; i<count; i++){
                                 c->nonBQPTable[i] = QP_store[i] & 0x3F;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libpostproc/postprocess.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libpostproc/postprocess.h	2008-03-21 06:48:49 UTC (rev 3911)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libpostproc/postprocess.h	2008-03-21 06:51:32 UTC (rev 3912)
@@ -18,21 +18,27 @@
  * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
  */
 
-#ifndef NEWPOSTPROCESS_H
-#define NEWPOSTPROCESS_H
+#ifndef FFMPEG_POSTPROCESS_H
+#define FFMPEG_POSTPROCESS_H
 
 /**
  * @file postprocess.h
  * @brief
- *     external api for the pp stuff
+ *     external postprocessing API
  */
 
-#ifdef __cplusplus
-extern "C" {
-#endif
+#include "libavutil/avutil.h"
 
-#define LIBPOSTPROC_VERSION_INT ((51<<16)+(1<<8)+0)
-#define LIBPOSTPROC_VERSION     51.1.0
+#define LIBPOSTPROC_VERSION_MAJOR 51
+#define LIBPOSTPROC_VERSION_MINOR  1
+#define LIBPOSTPROC_VERSION_MICRO  0
+
+#define LIBPOSTPROC_VERSION_INT AV_VERSION_INT(LIBPOSTPROC_VERSION_MAJOR, \
+                                               LIBPOSTPROC_VERSION_MINOR, \
+                                               LIBPOSTPROC_VERSION_MICRO)
+#define LIBPOSTPROC_VERSION     AV_VERSION(LIBPOSTPROC_VERSION_MAJOR, \
+                                           LIBPOSTPROC_VERSION_MINOR, \
+                                           LIBPOSTPROC_VERSION_MICRO)
 #define LIBPOSTPROC_BUILD       LIBPOSTPROC_VERSION_INT
 
 #define LIBPOSTPROC_IDENT       "postproc" AV_STRINGIFY(LIBPOSTPROC_VERSION)
@@ -41,15 +47,21 @@
 
 #define QP_STORE_T int8_t
 
+#include <inttypes.h>
+
 typedef void pp_context_t;
 typedef void pp_mode_t;
 
-extern char *pp_help; ///< a simple help text
+#if LIBPOSTPROC_VERSION_INT < (52<<16)
+extern const char *const pp_help; ///< a simple help text
+#else
+extern const char pp_help[]; ///< a simple help text
+#endif
 
-void  pp_postprocess(uint8_t * src[3], int srcStride[3],
-                 uint8_t * dst[3], int dstStride[3],
+void  pp_postprocess(const uint8_t * src[3], const int srcStride[3],
+                 uint8_t * dst[3], const int dstStride[3],
                  int horizontalSize, int verticalSize,
-                 QP_STORE_T *QP_store,  int QP_stride,
+                 const QP_STORE_T *QP_store,  int QP_stride,
                  pp_mode_t *mode, pp_context_t *ppContext, int pict_type);
 
 
@@ -58,7 +70,7 @@
  * name is the string after "-pp" on the command line
  * quality is a number from 0 to PP_QUALITY_MAX
  */
-pp_mode_t *pp_get_mode_by_name_and_quality(char *name, int quality);
+pp_mode_t *pp_get_mode_by_name_and_quality(const char *name, int quality);
 void pp_free_mode(pp_mode_t *mode);
 
 pp_context_t *pp_get_context(int width, int height, int flags);
@@ -77,8 +89,4 @@
 
 #define PP_PICT_TYPE_QP2  0x00000010 ///< MPEG2 style QScale
 
-#ifdef __cplusplus
-}
-#endif
-
-#endif
+#endif /* FFMPEG_POSTPROCESS_H */

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libpostproc/postprocess_altivec_template.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libpostproc/postprocess_altivec_template.c	2008-03-21 06:48:49 UTC (rev 3911)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libpostproc/postprocess_altivec_template.c	2008-03-21 06:51:32 UTC (rev 3912)
@@ -20,13 +20,8 @@
  * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
  */
 
+#include "avutil.h"
 
-#ifdef CONFIG_DARWIN
-#define AVV(x...) (x)
-#else
-#define AVV(x...) {x}
-#endif
-
 #define ALTIVEC_TRANSPOSE_8x8_SHORT(src_a,src_b,src_c,src_d,src_e,src_f,src_g,src_h) \
   do {                                                                  \
     __typeof__(src_a) tempA1, tempB1, tempC1, tempD1;                   \
@@ -67,7 +62,7 @@
     vector by assuming (stride % 16) == 0, unfortunately
     this is not always true.
   */
-  short __attribute__ ((aligned(16))) data[8];
+  DECLARE_ALIGNED(16, short, data[8]);
   int numEq;
   uint8_t *src2 = src;
   vector signed short v_dcOffset;
@@ -115,9 +110,9 @@
     (vector signed short)vec_mergeh((vector signed char)zero,           \
                                     (vector signed char)v_srcA##i)
 
-    // special casing the aligned case is worthwhile, as all call from
-    // the (transposed) horizontable deblocks will be aligned, i naddition
-    // to the naturraly aligned vertical deblocks.
+    /* Special-casing the aligned case is worthwhile, as all calls from
+     * the (transposed) horizontable deblocks will be aligned, in addition
+     * to the naturally aligned vertical deblocks. */
     if (properStride && srcAlign) {
       LOAD_LINE_ALIGNED(0);
       LOAD_LINE_ALIGNED(1);
@@ -199,14 +194,14 @@
     One could remove the recomputation of the perm
     vector by assuming (stride % 16) == 0, unfortunately
     this is not always true. Quite a lot of load/stores
-    can be removed by assuming proper alignement of
+    can be removed by assuming proper alignment of
     src & stride :-(
   */
   uint8_t *src2 = src;
   const vector signed int zero = vec_splat_s32(0);
   const int properStride = (stride % 16);
   const int srcAlign = ((unsigned long)src2 % 16);
-  short __attribute__ ((aligned(16))) qp[8];
+  DECLARE_ALIGNED(16, short, qp[8]);
   qp[0] = c->QP;
   vector signed short vqp = vec_ld(0, qp);
   vqp = vec_splat(vqp, 0);
@@ -235,9 +230,9 @@
     (vector signed short)vec_mergeh((vector signed char)zero,           \
                                     (vector signed char)vbT##i)
 
-    // special casing the aligned case is worthwhile, as all call from
-    // the (transposed) horizontable deblocks will be aligned, in addition
-    // to the naturraly aligned vertical deblocks.
+    /* Special-casing the aligned case is worthwhile, as all calls from
+     * the (transposed) horizontable deblocks will be aligned, in addition
+     * to the naturally aligned vertical deblocks. */
     if (properStride && srcAlign) {
       LOAD_LINE_ALIGNED(0);
       LOAD_LINE_ALIGNED(1);
@@ -353,9 +348,9 @@
     vec_perm(vf##i, vbT##i, permHH);                            \
   vec_st(vg##i, i * stride, src2)
 
-  // special casing the aligned case is worthwhile, as all call from
-  // the (transposed) horizontable deblocks will be aligned, in addition
-  // to the naturraly aligned vertical deblocks.
+  /* Special-casing the aligned case is worthwhile, as all calls from
+   * the (transposed) horizontable deblocks will be aligned, in addition
+   * to the naturally aligned vertical deblocks. */
   if (properStride && srcAlign) {
     PACK_AND_STORE_ALIGNED(1);
     PACK_AND_STORE_ALIGNED(2);
@@ -387,12 +382,12 @@
     One could remove the recomputation of the perm
     vector by assuming (stride % 16) == 0, unfortunately
     this is not always true. Quite a lot of load/stores
-    can be removed by assuming proper alignement of
+    can be removed by assuming proper alignment of
     src & stride :-(
   */
   uint8_t *src2 = src;
   const vector signed int zero = vec_splat_s32(0);
-  short __attribute__ ((aligned(16))) qp[8];
+  DECLARE_ALIGNED(16, short, qp[8]);
   qp[0] = 8*c->QP;
   vector signed short vqp = vec_ld(0, qp);
   vqp = vec_splat(vqp, 0);
@@ -474,7 +469,7 @@
   const vector signed short dornotd = vec_sel((vector signed short)zero,
                                               dclampedfinal,
                                               vec_cmplt(absmE, vqp));
-  /* add/substract to l4 and l5 */
+  /* add/subtract to l4 and l5 */
   const vector signed short vb4minusd = vec_sub(vb4, dornotd);
   const vector signed short vb5plusd = vec_add(vb5, dornotd);
   /* finally, stores */
@@ -511,11 +506,11 @@
     One could remove the recomputation of the perm
     vector by assuming (stride % 16) == 0, unfortunately
     this is not always true. Quite a lot of load/stores
-    can be removed by assuming proper alignement of
+    can be removed by assuming proper alignment of
     src & stride :-(
   */
   uint8_t *srcCopy = src;
-  uint8_t __attribute__((aligned(16))) dt[16];
+  DECLARE_ALIGNED(16, uint8_t, dt[16]);
   const vector signed int zero = vec_splat_s32(0);
   vector unsigned char v_dt;
   dt[0] = deringThreshold;
@@ -579,7 +574,7 @@
     v_avg = vec_avg(v_min, v_max);
   }
 
-  signed int __attribute__((aligned(16))) S[8];
+  DECLARE_ALIGNED(16, signed int, S[8]);
   {
     const vector unsigned short mask1 = (vector unsigned short)
       AVV(0x0001, 0x0002, 0x0004, 0x0008,
@@ -675,7 +670,7 @@
   /* I'm not sure the following is actually faster
      than straight, unvectorized C code :-( */
 
-  int __attribute__((aligned(16))) tQP2[4];
+  DECLARE_ALIGNED(16, int, tQP2[4]);
   tQP2[0]= c->QP/2 + 1;
   vector signed int vQP2 = vec_ld(0, tQP2);
   vQP2 = vec_splat(vQP2, 0);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libpostproc/postprocess_internal.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libpostproc/postprocess_internal.h	2008-03-21 06:48:49 UTC (rev 3911)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libpostproc/postprocess_internal.h	2008-03-21 06:51:32 UTC (rev 3912)
@@ -23,8 +23,12 @@
  * internal api header.
  */
 
-#include "../ADM_lavutil/avutil.h"
+#ifndef FFMPEG_POSTPROCESS_INTERNAL_H
+#define FFMPEG_POSTPROCESS_INTERNAL_H
 
+#include "avutil.h"
+#include "postprocess.h"
+
 #define V_DEBLOCK       0x01
 #define H_DEBLOCK       0x02
 #define DERING          0x04
@@ -62,27 +66,16 @@
 #define TEMP_NOISE_FILTER               0x100000
 #define FORCE_QUANT                     0x200000
 
-#if ( defined(__PIC__) || defined(__pic__) ) && ! defined(PIC)
-#    define PIC
-#endif
-
-//use if u want a faster postprocessing code
-//cant differentiate between chroma & luma filters (both on or both off)
-//obviosly the -pp option at the commandline has no effect except turning the here selected
+//use if you want a faster postprocessing code
+//cannot differentiate between chroma & luma filters (both on or both off)
+//obviously the -pp option on the command line has no effect except turning the here selected
 //filters on
 //#define COMPILE_TIME_MODE 0x77
 
-#if 1
 static inline int CLIP(int a){
         if(a&256) return ((a)>>31)^(-1);
         else      return a;
 }
-//#define CLIP(a) (((a)&256) ? ((a)>>31)^(-1) : (a))
-#elif 0
-#define CLIP(a) clip_tab[a]
-#else
-#define CLIP(a) (a)
-#endif
 /**
  * Postprocessng filter.
  */
@@ -122,7 +115,7 @@
         /**
          * info on struct for av_log
          */
-        AVClass *av_class;
+        const AVClass *av_class;
 
         uint8_t *tempBlocks; ///<used for the horizontal code
 
@@ -173,11 +166,13 @@
 } PPContext;
 
 
-static inline void linecpy(void *dest, void *src, int lines, int stride)
+static inline void linecpy(void *dest, const void *src, int lines, int stride)
 {
         if (stride > 0) {
                 memcpy(dest, src, lines*stride);
         } else {
-                memcpy(dest+(lines-1)*stride, src+(lines-1)*stride, -lines*stride);
+                memcpy((uint8_t*)dest+(lines-1)*stride, (const uint8_t*)src+(lines-1)*stride, -lines*stride);
         }
 }
+
+#endif /* FFMPEG_POSTPROCESS_INTERNAL_H */

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libpostproc/postprocess_template.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libpostproc/postprocess_template.c	2008-03-21 06:48:49 UTC (rev 3911)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libpostproc/postprocess_template.c	2008-03-21 06:51:32 UTC (rev 3912)
@@ -16,7 +16,7 @@
  * You should have received a copy of the GNU General Public License
  * along with FFmpeg; if not, write to the Free Software
  * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
-*/
+ */
 
 /**
  * @file postprocess_template.c
@@ -73,7 +73,7 @@
         "paddb " #a ", " #b " \n\t"
 #endif
 
-//FIXME? |255-0| = 1 (shouldnt be a problem ...)
+//FIXME? |255-0| = 1 (should not be a problem ...)
 #ifdef HAVE_MMX
 /**
  * Check if the middle 8x8 Block in the given 8x16 block is flat
@@ -373,7 +373,8 @@
  * Experimental implementation of the filter (Algorithm 1) described in a paper from Ramkishor & Karandikar
  * values are correctly clipped (MMX2)
  * values are wraparound (C)
- * conclusion: its fast, but introduces ugly horizontal patterns if there is a continious gradient
+ * Conclusion: It is fast, but introduces ugly horizontal patterns
+ * if there is a continuous gradient.
         0 8 16 24
         x = 8
         x/2 = 4
@@ -477,9 +478,9 @@
 /**
  * Experimental Filter 1
  * will not damage linear gradients
- * Flat blocks should look like they where passed through the (1,1,2,2,4,2,2,1,1) 9-Tap filter
- * can only smooth blocks at the expected locations (it cant smooth them if they did move)
- * MMX2 version does correct clipping C version doesnt
+ * Flat blocks should look like they were passed through the (1,1,2,2,4,2,2,1,1) 9-Tap filter
+ * can only smooth blocks at the expected locations (it cannot smooth them if they did move)
+ * MMX2 version does correct clipping C version does not
  */
 static inline void RENAME(vertX1Filter)(uint8_t *src, int stride, PPContext *co)
 {
@@ -1545,7 +1546,7 @@
 /**
  * Deinterlaces the given block by linearly interpolating every second line.
  * will be called for every 8x8 block and can read & write from line 4-15
- * lines 0-3 have been passed through the deblock / dering filters allready, but can be read too
+ * lines 0-3 have been passed through the deblock / dering filters already, but can be read, too.
  * lines 4-12 will be read into the deblocking filter and should be deinterlaced
  */
 static inline void RENAME(deInterlaceInterpolateLinear)(uint8_t src[], int stride)
@@ -1597,7 +1598,7 @@
 /**
  * Deinterlaces the given block by cubic interpolating every second line.
  * will be called for every 8x8 block and can read & write from line 4-15
- * lines 0-3 have been passed through the deblock / dering filters allready, but can be read too
+ * lines 0-3 have been passed through the deblock / dering filters already, but can be read, too.
  * lines 4-12 will be read into the deblocking filter and should be deinterlaced
  * this filter will read lines 3-15 and write 7-13
  */
@@ -1662,7 +1663,7 @@
 /**
  * Deinterlaces the given block by filtering every second line with a (-1 4 2 4 -1) filter.
  * will be called for every 8x8 block and can read & write from line 4-15
- * lines 0-3 have been passed through the deblock / dering filters allready, but can be read too
+ * lines 0-3 have been passed through the deblock / dering filters already, but can be read, too.
  * lines 4-12 will be read into the deblocking filter and should be deinterlaced
  * this filter will read lines 4-13 and write 5-11
  */
@@ -1742,7 +1743,7 @@
 /**
  * Deinterlaces the given block by filtering every line with a (-1 2 6 2 -1) filter.
  * will be called for every 8x8 block and can read & write from line 4-15
- * lines 0-3 have been passed through the deblock / dering filters allready, but can be read too
+ * lines 0-3 have been passed through the deblock / dering filters already, but can be read, too.
  * lines 4-12 will be read into the deblocking filter and should be deinterlaced
  * this filter will read lines 4-13 and write 4-11
  */
@@ -1844,7 +1845,7 @@
 /**
  * Deinterlaces the given block by filtering all lines with a (1 2 1) filter.
  * will be called for every 8x8 block and can read & write from line 4-15
- * lines 0-3 have been passed through the deblock / dering filters allready, but can be read too
+ * lines 0-3 have been passed through the deblock / dering filters already, but can be read, too.
  * lines 4-12 will be read into the deblocking filter and should be deinterlaced
  * this filter will read lines 4-13 and write 4-11
  */
@@ -1946,7 +1947,7 @@
 /**
  * Deinterlaces the given block by applying a median filter to every second line.
  * will be called for every 8x8 block and can read & write from line 4-15,
- * lines 0-3 have been passed through the deblock / dering filters allready, but can be read too
+ * lines 0-3 have been passed through the deblock / dering filters already, but can be read, too.
  * lines 4-12 will be read into the deblocking filter and should be deinterlaced
  */
 static inline void RENAME(deInterlaceMedian)(uint8_t src[], int stride)
@@ -3179,16 +3180,16 @@
 }
 #endif //HAVE_MMX
 
-static void RENAME(postProcess)(uint8_t src[], int srcStride, uint8_t dst[], int dstStride, int width, int height,
-        QP_STORE_T QPs[], int QPStride, int isColor, PPContext *c);
+static void RENAME(postProcess)(const uint8_t src[], int srcStride, uint8_t dst[], int dstStride, int width, int height,
+        const QP_STORE_T QPs[], int QPStride, int isColor, PPContext *c);
 
 /**
- * Copies a block from src to dst and fixes the blacklevel
- * levelFix == 0 -> dont touch the brighness & contrast
+ * Copies a block from src to dst and fixes the blacklevel.
+ * levelFix == 0 -> do not touch the brighness & contrast
  */
 #undef SCALED_CPY
 
-static inline void RENAME(blockCopy)(uint8_t dst[], int dstStride, uint8_t src[], int srcStride,
+static inline void RENAME(blockCopy)(uint8_t dst[], int dstStride, const uint8_t src[], int srcStride,
         int levelFix, int64_t *packedOffsetAndScale)
 {
 #ifndef HAVE_MMX
@@ -3345,10 +3346,10 @@
 /**
  * Filters array of bytes (Y or U or V values)
  */
-static void RENAME(postProcess)(uint8_t src[], int srcStride, uint8_t dst[], int dstStride, int width, int height,
-        QP_STORE_T QPs[], int QPStride, int isColor, PPContext *c2)
+static void RENAME(postProcess)(const uint8_t src[], int srcStride, uint8_t dst[], int dstStride, int width, int height,
+        const QP_STORE_T QPs[], int QPStride, int isColor, PPContext *c2)
 {
-        PPContext __attribute__((aligned(8))) c= *c2; //copy to stack for faster access
+        DECLARE_ALIGNED(8, PPContext, c)= *c2; //copy to stack for faster access
         int x,y;
 #ifdef COMPILE_TIME_MODE
         const int mode= COMPILE_TIME_MODE;
@@ -3415,7 +3416,7 @@
                         sum+= yHistogram[i];
                 }
 
-                /* we allways get a completly black picture first */
+                /* We always get a completely black picture first. */
                 maxClipped= (uint64_t)(sum * c.ppMode.maxClippedThreshold);
 
                 clipped= sum;
@@ -3461,10 +3462,10 @@
         /* copy & deinterlace first row of blocks */
         y=-BLOCK_SIZE;
         {
-                uint8_t *srcBlock= &(src[y*srcStride]);
+                const uint8_t *srcBlock= &(src[y*srcStride]);
                 uint8_t *dstBlock= tempDst + dstStride;
 
-                // From this point on it is guranteed that we can read and write 16 lines downward
+                // From this point on it is guaranteed that we can read and write 16 lines downward
                 // finish 1 block before the next otherwise we might have a problem
                 // with the L1 Cache of the P4 ... or only a few blocks at a time or soemthing
                 for(x=0; x<width; x+=BLOCK_SIZE)
@@ -3498,7 +3499,7 @@
                         );
 
 #elif defined(HAVE_3DNOW)
-//FIXME check if this is faster on an 3dnow chip or if its faster without the prefetch or ...
+//FIXME check if this is faster on an 3dnow chip or if it is faster without the prefetch or ...
 /*                        prefetch(srcBlock + (((x>>3)&3) + 5)*srcStride + 32);
                         prefetch(srcBlock + (((x>>3)&3) + 9)*srcStride + 32);
                         prefetchw(dstBlock + (((x>>3)&3) + 5)*dstStride + 32);
@@ -3544,13 +3545,13 @@
         for(y=0; y<height; y+=BLOCK_SIZE)
         {
                 //1% speedup if these are here instead of the inner loop
-                uint8_t *srcBlock= &(src[y*srcStride]);
+                const uint8_t *srcBlock= &(src[y*srcStride]);
                 uint8_t *dstBlock= &(dst[y*dstStride]);
 #ifdef HAVE_MMX
                 uint8_t *tempBlock1= c.tempBlocks;
                 uint8_t *tempBlock2= c.tempBlocks + 8;
 #endif
-                int8_t *QPptr= &QPs[(y>>qpVShift)*QPStride];
+                const int8_t *QPptr= &QPs[(y>>qpVShift)*QPStride];
                 int8_t *nonBQPptr= &c.nonBQPTable[(y>>qpVShift)*FFABS(QPStride)];
                 int QP=0;
                 /* can we mess with a 8x16 block from srcBlock/dstBlock downwards and 1 line upwards
@@ -3578,7 +3579,7 @@
                         srcBlock= tempSrc;
                 }
 
-                // From this point on it is guranteed that we can read and write 16 lines downward
+                // From this point on it is guaranteed that we can read and write 16 lines downward
                 // finish 1 block before the next otherwise we might have a problem
                 // with the L1 Cache of the P4 ... or only a few blocks at a time or soemthing
                 for(x=0; x<width; x+=BLOCK_SIZE)
@@ -3642,7 +3643,7 @@
                         );
 
 #elif defined(HAVE_3DNOW)
-//FIXME check if this is faster on an 3dnow chip or if its faster without the prefetch or ...
+//FIXME check if this is faster on an 3dnow chip or if it is faster without the prefetch or ...
 /*                        prefetch(srcBlock + (((x>>3)&3) + 5)*srcStride + 32);
                         prefetch(srcBlock + (((x>>3)&3) + 9)*srcStride + 32);
                         prefetchw(dstBlock + (((x>>3)&3) + 5)*dstStride + 32);
@@ -3717,7 +3718,7 @@
                                 else if(mode & H_DEBLOCK)
                                 {
 #ifdef HAVE_ALTIVEC
-                                        unsigned char __attribute__ ((aligned(16))) tempBlock[272];
+                                        DECLARE_ALIGNED(16, unsigned char, tempBlock[272]);
                                         transpose_16x8_char_toPackedAlign_altivec(tempBlock, dstBlock - (4 + 1), stride);
 
                                         const int t=vertClassify_altivec(tempBlock-48, 16, &c);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/rgb2rgb.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/rgb2rgb.c	2008-03-21 06:48:49 UTC (rev 3911)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/rgb2rgb.c	2008-03-21 06:51:32 UTC (rev 3912)
@@ -25,35 +25,28 @@
  * the C code (not assembly, mmx, ...) of this file can be used
  * under the LGPL license too
  */
-// MEANX
+#include <inttypes.h>
 #include "config.h"
-#include "wrapper.h"
-// /MEANX
-
 #include "rgb2rgb.h"
 #include "swscale.h"
 #include "swscale_internal.h"
 #include "x86_cpu.h"
 #include "bswap.h"
-// MEANX
 
-
-// /MEANX
-
 #define FAST_BGR2YV12 // use 7 bit coeffs instead of 15bit
 
-void (*rgb24to32)(const uint8_t *src,uint8_t *dst,long src_size);
-void (*rgb24to16)(const uint8_t *src,uint8_t *dst,long src_size);
-void (*rgb24to15)(const uint8_t *src,uint8_t *dst,long src_size);
-void (*rgb32to24)(const uint8_t *src,uint8_t *dst,long src_size);
-void (*rgb32to16)(const uint8_t *src,uint8_t *dst,long src_size);
-void (*rgb32to15)(const uint8_t *src,uint8_t *dst,long src_size);
-void (*rgb15to16)(const uint8_t *src,uint8_t *dst,long src_size);
-void (*rgb15to24)(const uint8_t *src,uint8_t *dst,long src_size);
-void (*rgb15to32)(const uint8_t *src,uint8_t *dst,long src_size);
-void (*rgb16to15)(const uint8_t *src,uint8_t *dst,long src_size);
-void (*rgb16to24)(const uint8_t *src,uint8_t *dst,long src_size);
-void (*rgb16to32)(const uint8_t *src,uint8_t *dst,long src_size);
+void (*rgb24to32)(const uint8_t *src, uint8_t *dst, long src_size);
+void (*rgb24to16)(const uint8_t *src, uint8_t *dst, long src_size);
+void (*rgb24to15)(const uint8_t *src, uint8_t *dst, long src_size);
+void (*rgb32to24)(const uint8_t *src, uint8_t *dst, long src_size);
+void (*rgb32to16)(const uint8_t *src, uint8_t *dst, long src_size);
+void (*rgb32to15)(const uint8_t *src, uint8_t *dst, long src_size);
+void (*rgb15to16)(const uint8_t *src, uint8_t *dst, long src_size);
+void (*rgb15to24)(const uint8_t *src, uint8_t *dst, long src_size);
+void (*rgb15to32)(const uint8_t *src, uint8_t *dst, long src_size);
+void (*rgb16to15)(const uint8_t *src, uint8_t *dst, long src_size);
+void (*rgb16to24)(const uint8_t *src, uint8_t *dst, long src_size);
+void (*rgb16to32)(const uint8_t *src, uint8_t *dst, long src_size);
 //void (*rgb24tobgr32)(const uint8_t *src, uint8_t *dst, long src_size);
 void (*rgb24tobgr24)(const uint8_t *src, uint8_t *dst, long src_size);
 void (*rgb24tobgr16)(const uint8_t *src, uint8_t *dst, long src_size);
@@ -95,53 +88,40 @@
                      long srcStride3, long dstStride);
 
 #if defined(ARCH_X86) && defined(CONFIG_GPL)
-static const uint64_t mmx_null     __attribute__((aligned(8))) = 0x0000000000000000ULL;
-static const uint64_t mmx_one      __attribute__((aligned(8))) = 0xFFFFFFFFFFFFFFFFULL;
-static const uint64_t mask32b      attribute_used __attribute__((aligned(8))) = 0x000000FF000000FFULL;
-static const uint64_t mask32g      attribute_used __attribute__((aligned(8))) = 0x0000FF000000FF00ULL;
-static const uint64_t mask32r      attribute_used __attribute__((aligned(8))) = 0x00FF000000FF0000ULL;
-static const uint64_t mask32       __attribute__((aligned(8))) = 0x00FFFFFF00FFFFFFULL;
-static const uint64_t mask3216br   __attribute__((aligned(8))) = 0x00F800F800F800F8ULL;
-static const uint64_t mask3216g    __attribute__((aligned(8))) = 0x0000FC000000FC00ULL;
-static const uint64_t mask3215g    __attribute__((aligned(8))) = 0x0000F8000000F800ULL;
-static const uint64_t mul3216      __attribute__((aligned(8))) = 0x2000000420000004ULL;
-static const uint64_t mul3215      __attribute__((aligned(8))) = 0x2000000820000008ULL;
-static const uint64_t mask24b      attribute_used __attribute__((aligned(8))) = 0x00FF0000FF0000FFULL;
-static const uint64_t mask24g      attribute_used __attribute__((aligned(8))) = 0xFF0000FF0000FF00ULL;
-static const uint64_t mask24r      attribute_used __attribute__((aligned(8))) = 0x0000FF0000FF0000ULL;
-static const uint64_t mask24l      __attribute__((aligned(8))) = 0x0000000000FFFFFFULL;
-static const uint64_t mask24h      __attribute__((aligned(8))) = 0x0000FFFFFF000000ULL;
-static const uint64_t mask24hh     __attribute__((aligned(8))) = 0xffff000000000000ULL;
-static const uint64_t mask24hhh    __attribute__((aligned(8))) = 0xffffffff00000000ULL;
-static const uint64_t mask24hhhh   __attribute__((aligned(8))) = 0xffffffffffff0000ULL;
-static const uint64_t mask15b      __attribute__((aligned(8))) = 0x001F001F001F001FULL; /* 00000000 00011111  xxB */
-static const uint64_t mask15rg     __attribute__((aligned(8))) = 0x7FE07FE07FE07FE0ULL; /* 01111111 11100000  RGx */
-static const uint64_t mask15s      __attribute__((aligned(8))) = 0xFFE0FFE0FFE0FFE0ULL;
-static const uint64_t mask15g      __attribute__((aligned(8))) = 0x03E003E003E003E0ULL;
-static const uint64_t mask15r      __attribute__((aligned(8))) = 0x7C007C007C007C00ULL;
+DECLARE_ASM_CONST(8, uint64_t, mmx_null)     = 0x0000000000000000ULL;
+DECLARE_ASM_CONST(8, uint64_t, mmx_one)      = 0xFFFFFFFFFFFFFFFFULL;
+DECLARE_ASM_CONST(8, uint64_t, mask32b)      = 0x000000FF000000FFULL;
+DECLARE_ASM_CONST(8, uint64_t, mask32g)      = 0x0000FF000000FF00ULL;
+DECLARE_ASM_CONST(8, uint64_t, mask32r)      = 0x00FF000000FF0000ULL;
+DECLARE_ASM_CONST(8, uint64_t, mask32)       = 0x00FFFFFF00FFFFFFULL;
+DECLARE_ASM_CONST(8, uint64_t, mask3216br)   = 0x00F800F800F800F8ULL;
+DECLARE_ASM_CONST(8, uint64_t, mask3216g)    = 0x0000FC000000FC00ULL;
+DECLARE_ASM_CONST(8, uint64_t, mask3215g)    = 0x0000F8000000F800ULL;
+DECLARE_ASM_CONST(8, uint64_t, mul3216)      = 0x2000000420000004ULL;
+DECLARE_ASM_CONST(8, uint64_t, mul3215)      = 0x2000000820000008ULL;
+DECLARE_ASM_CONST(8, uint64_t, mask24b)      = 0x00FF0000FF0000FFULL;
+DECLARE_ASM_CONST(8, uint64_t, mask24g)      = 0xFF0000FF0000FF00ULL;
+DECLARE_ASM_CONST(8, uint64_t, mask24r)      = 0x0000FF0000FF0000ULL;
+DECLARE_ASM_CONST(8, uint64_t, mask24l)      = 0x0000000000FFFFFFULL;
+DECLARE_ASM_CONST(8, uint64_t, mask24h)      = 0x0000FFFFFF000000ULL;
+DECLARE_ASM_CONST(8, uint64_t, mask24hh)     = 0xffff000000000000ULL;
+DECLARE_ASM_CONST(8, uint64_t, mask24hhh)    = 0xffffffff00000000ULL;
+DECLARE_ASM_CONST(8, uint64_t, mask24hhhh)   = 0xffffffffffff0000ULL;
+DECLARE_ASM_CONST(8, uint64_t, mask15b)      = 0x001F001F001F001FULL; /* 00000000 00011111  xxB */
+DECLARE_ASM_CONST(8, uint64_t, mask15rg)     = 0x7FE07FE07FE07FE0ULL; /* 01111111 11100000  RGx */
+DECLARE_ASM_CONST(8, uint64_t, mask15s)      = 0xFFE0FFE0FFE0FFE0ULL;
+DECLARE_ASM_CONST(8, uint64_t, mask15g)      = 0x03E003E003E003E0ULL;
+DECLARE_ASM_CONST(8, uint64_t, mask15r)      = 0x7C007C007C007C00ULL;
 #define mask16b mask15b
-static const uint64_t mask16g      __attribute__((aligned(8))) = 0x07E007E007E007E0ULL;
-static const uint64_t mask16r      __attribute__((aligned(8))) = 0xF800F800F800F800ULL;
-static const uint64_t red_16mask   __attribute__((aligned(8))) = 0x0000f8000000f800ULL;
-static const uint64_t green_16mask __attribute__((aligned(8))) = 0x000007e0000007e0ULL;
-static const uint64_t blue_16mask  __attribute__((aligned(8))) = 0x0000001f0000001fULL;
-static const uint64_t red_15mask   __attribute__((aligned(8))) = 0x00007c0000007c00ULL;
-static const uint64_t green_15mask __attribute__((aligned(8))) = 0x000003e0000003e0ULL;
-static const uint64_t blue_15mask  __attribute__((aligned(8))) = 0x0000001f0000001fULL;
+DECLARE_ASM_CONST(8, uint64_t, mask16g)      = 0x07E007E007E007E0ULL;
+DECLARE_ASM_CONST(8, uint64_t, mask16r)      = 0xF800F800F800F800ULL;
+DECLARE_ASM_CONST(8, uint64_t, red_16mask)   = 0x0000f8000000f800ULL;
+DECLARE_ASM_CONST(8, uint64_t, green_16mask) = 0x000007e0000007e0ULL;
+DECLARE_ASM_CONST(8, uint64_t, blue_16mask)  = 0x0000001f0000001fULL;
+DECLARE_ASM_CONST(8, uint64_t, red_15mask)   = 0x00007c0000007c00ULL;
+DECLARE_ASM_CONST(8, uint64_t, green_15mask) = 0x000003e0000003e0ULL;
+DECLARE_ASM_CONST(8, uint64_t, blue_15mask)  = 0x0000001f0000001fULL;
 
-#ifdef FAST_BGR2YV12
-static const uint64_t bgr2YCoeff   attribute_used __attribute__((aligned(8))) = 0x000000210041000DULL;
-static const uint64_t bgr2UCoeff   attribute_used __attribute__((aligned(8))) = 0x0000FFEEFFDC0038ULL;
-static const uint64_t bgr2VCoeff   attribute_used __attribute__((aligned(8))) = 0x00000038FFD2FFF8ULL;
-#else
-static const uint64_t bgr2YCoeff   attribute_used __attribute__((aligned(8))) = 0x000020E540830C8BULL;
-static const uint64_t bgr2UCoeff   attribute_used __attribute__((aligned(8))) = 0x0000ED0FDAC23831ULL;
-static const uint64_t bgr2VCoeff   attribute_used __attribute__((aligned(8))) = 0x00003831D0E6F6EAULL;
-#endif
-static const uint64_t bgr2YOffset  attribute_used __attribute__((aligned(8))) = 0x1010101010101010ULL;
-static const uint64_t bgr2UVOffset attribute_used __attribute__((aligned(8))) = 0x8080808080808080ULL;
-static const uint64_t w1111        attribute_used __attribute__((aligned(8))) = 0x0001000100010001ULL;
-
 #if 0
 static volatile uint64_t __attribute__((aligned(8))) b5Dither;
 static volatile uint64_t __attribute__((aligned(8))) g5Dither;
@@ -238,20 +218,20 @@
 
 /*
     for (i=0; i<num_pixels; i++)
-        ((unsigned *)dst)[i] = ((unsigned *)palette)[ src[i] ];
+        ((unsigned *)dst)[i] = ((unsigned *)palette)[src[i]];
 */
 
     for (i=0; i<num_pixels; i++)
     {
         #ifdef WORDS_BIGENDIAN
-            dst[3]= palette[ src[i]*4+2 ];
-            dst[2]= palette[ src[i]*4+1 ];
-            dst[1]= palette[ src[i]*4+0 ];
+            dst[3]= palette[src[i]*4+2];
+            dst[2]= palette[src[i]*4+1];
+            dst[1]= palette[src[i]*4+0];
         #else
         //FIXME slow?
-            dst[0]= palette[ src[i]*4+2 ];
-            dst[1]= palette[ src[i]*4+1 ];
-            dst[2]= palette[ src[i]*4+0 ];
+            dst[0]= palette[src[i]*4+2];
+            dst[1]= palette[src[i]*4+1];
+            dst[2]= palette[src[i]*4+0];
             //dst[3]= 0; /* do we need this cleansing? */
         #endif
         dst+= 4;
@@ -264,14 +244,14 @@
     for (i=0; i<num_pixels; i++)
     {
         #ifdef WORDS_BIGENDIAN
-            dst[3]= palette[ src[i]*4+0 ];
-            dst[2]= palette[ src[i]*4+1 ];
-            dst[1]= palette[ src[i]*4+2 ];
+            dst[3]= palette[src[i]*4+0];
+            dst[2]= palette[src[i]*4+1];
+            dst[1]= palette[src[i]*4+2];
         #else
             //FIXME slow?
-            dst[0]= palette[ src[i]*4+0 ];
-            dst[1]= palette[ src[i]*4+1 ];
-            dst[2]= palette[ src[i]*4+2 ];
+            dst[0]= palette[src[i]*4+0];
+            dst[1]= palette[src[i]*4+1];
+            dst[2]= palette[src[i]*4+2];
             //dst[3]= 0; /* do we need this cleansing? */
         #endif
 
@@ -288,14 +268,14 @@
 /*
     writes 1 byte o much and might cause alignment issues on some architectures?
     for (i=0; i<num_pixels; i++)
-        ((unsigned *)(&dst[i*3])) = ((unsigned *)palette)[ src[i] ];
+        ((unsigned *)(&dst[i*3])) = ((unsigned *)palette)[src[i]];
 */
     for (i=0; i<num_pixels; i++)
     {
         //FIXME slow?
-        dst[0]= palette[ src[i]*4+2 ];
-        dst[1]= palette[ src[i]*4+1 ];
-        dst[2]= palette[ src[i]*4+0 ];
+        dst[0]= palette[src[i]*4+2];
+        dst[1]= palette[src[i]*4+1];
+        dst[2]= palette[src[i]*4+0];
         dst+= 3;
     }
 }
@@ -306,14 +286,14 @@
 /*
     writes 1 byte o much and might cause alignment issues on some architectures?
     for (i=0; i<num_pixels; i++)
-        ((unsigned *)(&dst[i*3])) = ((unsigned *)palette)[ src[i] ];
+        ((unsigned *)(&dst[i*3])) = ((unsigned *)palette)[src[i]];
 */
     for (i=0; i<num_pixels; i++)
     {
         //FIXME slow?
-        dst[0]= palette[ src[i]*4+0 ];
-        dst[1]= palette[ src[i]*4+1 ];
-        dst[2]= palette[ src[i]*4+2 ];
+        dst[0]= palette[src[i]*4+0];
+        dst[1]= palette[src[i]*4+1];
+        dst[2]= palette[src[i]*4+2];
         dst+= 3;
     }
 }
@@ -325,13 +305,13 @@
 {
     long i;
     for (i=0; i<num_pixels; i++)
-        ((uint16_t *)dst)[i] = ((uint16_t *)palette)[ src[i] ];
+        ((uint16_t *)dst)[i] = ((uint16_t *)palette)[src[i]];
 }
 void palette8tobgr16(const uint8_t *src, uint8_t *dst, long num_pixels, const uint8_t *palette)
 {
     long i;
     for (i=0; i<num_pixels; i++)
-        ((uint16_t *)dst)[i] = bswap_16(((uint16_t *)palette)[ src[i] ]);
+        ((uint16_t *)dst)[i] = bswap_16(((uint16_t *)palette)[src[i]]);
 }
 
 /**
@@ -341,13 +321,13 @@
 {
     long i;
     for (i=0; i<num_pixels; i++)
-        ((uint16_t *)dst)[i] = ((uint16_t *)palette)[ src[i] ];
+        ((uint16_t *)dst)[i] = ((uint16_t *)palette)[src[i]];
 }
 void palette8tobgr15(const uint8_t *src, uint8_t *dst, long num_pixels, const uint8_t *palette)
 {
     long i;
     for (i=0; i<num_pixels; i++)
-        ((uint16_t *)dst)[i] = bswap_16(((uint16_t *)palette)[ src[i] ]);
+        ((uint16_t *)dst)[i] = bswap_16(((uint16_t *)palette)[src[i]]);
 }
 
 void rgb32tobgr24(const uint8_t *src, uint8_t *dst, long src_size)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/rgb2rgb.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/rgb2rgb.h	2008-03-21 06:48:49 UTC (rev 3911)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/rgb2rgb.h	2008-03-21 06:51:32 UTC (rev 3912)
@@ -23,8 +23,8 @@
  * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
  */
 
-#ifndef RGB2RGB_INCLUDED
-#define RGB2RGB_INCLUDED
+#ifndef FFMPEG_RGB2RGB_H
+#define FFMPEG_RGB2RGB_H
 
 #include <inttypes.h>
 
@@ -143,4 +143,4 @@
 
 void sws_rgb2rgb_init(int flags);
 
-#endif
+#endif /* FFMPEG_RGB2RGB_H */

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/rgb2rgb_template.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/rgb2rgb_template.c	2008-03-21 06:48:49 UTC (rev 3911)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/rgb2rgb_template.c	2008-03-21 06:51:32 UTC (rev 3912)
@@ -23,15 +23,15 @@
  * along with FFmpeg; if not, write to the Free Software
  * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
  *
- * the C code (not assembly, mmx, ...) of this file can be used
- * under the LGPL license too
+ * The C code (not assembly, mmx, ...) of this file can be used
+ * under the LGPL license.
  */
 
 #include <stddef.h>
 #include <inttypes.h> /* for __WORDSIZE */
 
 #ifndef __WORDSIZE
-// #warning You have misconfigured system and probably will lose performance!
+// #warning You have a misconfigured system and will probably lose performance!
 #define __WORDSIZE MP_WORDSIZE
 #endif
 
@@ -53,7 +53,7 @@
 #define PREFETCH  "prefetch"
 #define PREFETCHW "prefetchw"
 #define PAVGB     "pavgusb"
-#elif defined ( HAVE_MMX2 )
+#elif defined (HAVE_MMX2)
 #define PREFETCH "prefetchnta"
 #define PREFETCHW "prefetcht0"
 #define PAVGB     "pavgb"
@@ -68,7 +68,7 @@
 #endif
 
 #ifdef HAVE_3DNOW
-/* On K6 femms is faster of emms. On K7 femms is directly mapped on emms. */
+/* On K6 femms is faster than emms. On K7 femms is directly mapped on emms. */
 #define EMMS     "femms"
 #else
 #define EMMS     "emms"
@@ -82,7 +82,7 @@
 #define SFENCE " # nop"
 #endif
 
-static inline void RENAME(rgb24to32)(const uint8_t *src,uint8_t *dst,long src_size)
+static inline void RENAME(rgb24to32)(const uint8_t *src, uint8_t *dst, long src_size)
 {
     uint8_t *dest = dst;
     const uint8_t *s = src;
@@ -92,12 +92,12 @@
     #endif
     end = s + src_size;
     #ifdef HAVE_MMX
-        __asm __volatile(PREFETCH"    %0"::"m"(*s):"memory");
+        asm volatile(PREFETCH"    %0"::"m"(*s):"memory");
         mm_end = end - 23;
-        __asm __volatile("movq        %0, %%mm7"::"m"(mask32):"memory");
+        asm volatile("movq        %0, %%mm7"::"m"(mask32):"memory");
         while (s < mm_end)
         {
-            __asm __volatile(
+            asm volatile(
             PREFETCH"    32%1           \n\t"
             "movd          %1, %%mm0    \n\t"
             "punpckldq    3%1, %%mm0    \n\t"
@@ -121,8 +121,8 @@
             dest += 32;
             s += 24;
         }
-        __asm __volatile(SFENCE:::"memory");
-        __asm __volatile(EMMS:::"memory");
+        asm volatile(SFENCE:::"memory");
+        asm volatile(EMMS:::"memory");
     #endif
     while (s < end)
     {
@@ -142,7 +142,7 @@
     }
 }
 
-static inline void RENAME(rgb32to24)(const uint8_t *src,uint8_t *dst,long src_size)
+static inline void RENAME(rgb32to24)(const uint8_t *src, uint8_t *dst, long src_size)
 {
     uint8_t *dest = dst;
     const uint8_t *s = src;
@@ -152,11 +152,11 @@
 #endif
     end = s + src_size;
 #ifdef HAVE_MMX
-    __asm __volatile(PREFETCH"    %0"::"m"(*s):"memory");
+    asm volatile(PREFETCH"    %0"::"m"(*s):"memory");
     mm_end = end - 31;
     while (s < mm_end)
     {
-        __asm __volatile(
+        asm volatile(
         PREFETCH"    32%1           \n\t"
         "movq          %1, %%mm0    \n\t"
         "movq         8%1, %%mm1    \n\t"
@@ -207,8 +207,8 @@
         dest += 24;
         s += 32;
     }
-    __asm __volatile(SFENCE:::"memory");
-    __asm __volatile(EMMS:::"memory");
+    asm volatile(SFENCE:::"memory");
+    asm volatile(EMMS:::"memory");
 #endif
     while (s < end)
     {
@@ -232,9 +232,9 @@
  Original by Strepto/Astral
  ported to gcc & bugfixed : A'rpi
  MMX2, 3DNOW optimization by Nick Kurshev
- 32bit c version, and and&add trick by Michael Niedermayer
+ 32 bit C version, and and&add trick by Michael Niedermayer
 */
-static inline void RENAME(rgb15to16)(const uint8_t *src,uint8_t *dst,long src_size)
+static inline void RENAME(rgb15to16)(const uint8_t *src, uint8_t *dst, long src_size)
 {
     register const uint8_t* s=src;
     register uint8_t* d=dst;
@@ -242,12 +242,12 @@
     const uint8_t *mm_end;
     end = s + src_size;
 #ifdef HAVE_MMX
-    __asm __volatile(PREFETCH"    %0"::"m"(*s));
-    __asm __volatile("movq        %0, %%mm4"::"m"(mask15s));
+    asm volatile(PREFETCH"    %0"::"m"(*s));
+    asm volatile("movq        %0, %%mm4"::"m"(mask15s));
     mm_end = end - 15;
     while (s<mm_end)
     {
-        __asm __volatile(
+        asm volatile(
         PREFETCH"  32%1         \n\t"
         "movq        %1, %%mm0  \n\t"
         "movq       8%1, %%mm2  \n\t"
@@ -265,8 +265,8 @@
         d+=16;
         s+=16;
     }
-    __asm __volatile(SFENCE:::"memory");
-    __asm __volatile(EMMS:::"memory");
+    asm volatile(SFENCE:::"memory");
+    asm volatile(EMMS:::"memory");
 #endif
     mm_end = end - 3;
     while (s < mm_end)
@@ -283,7 +283,7 @@
     }
 }
 
-static inline void RENAME(rgb16to15)(const uint8_t *src,uint8_t *dst,long src_size)
+static inline void RENAME(rgb16to15)(const uint8_t *src, uint8_t *dst, long src_size)
 {
     register const uint8_t* s=src;
     register uint8_t* d=dst;
@@ -291,13 +291,13 @@
     const uint8_t *mm_end;
     end = s + src_size;
 #ifdef HAVE_MMX
-    __asm __volatile(PREFETCH"    %0"::"m"(*s));
-    __asm __volatile("movq        %0, %%mm7"::"m"(mask15rg));
-    __asm __volatile("movq        %0, %%mm6"::"m"(mask15b));
+    asm volatile(PREFETCH"    %0"::"m"(*s));
+    asm volatile("movq        %0, %%mm7"::"m"(mask15rg));
+    asm volatile("movq        %0, %%mm6"::"m"(mask15b));
     mm_end = end - 15;
     while (s<mm_end)
     {
-        __asm __volatile(
+        asm volatile(
         PREFETCH"  32%1         \n\t"
         "movq        %1, %%mm0  \n\t"
         "movq       8%1, %%mm2  \n\t"
@@ -319,8 +319,8 @@
         d+=16;
         s+=16;
     }
-    __asm __volatile(SFENCE:::"memory");
-    __asm __volatile(EMMS:::"memory");
+    asm volatile(SFENCE:::"memory");
+    asm volatile(EMMS:::"memory");
 #endif
     mm_end = end - 3;
     while (s < mm_end)
@@ -350,7 +350,7 @@
     end = s + src_size;
 #ifdef HAVE_MMX
     mm_end = end - 15;
-#if 1 //is faster only if multiplies are reasonable fast (FIXME figure out on which CPUs this is faster, on Athlon it is slightly faster)
+#if 1 //is faster only if multiplies are reasonably fast (FIXME figure out on which CPUs this is faster, on Athlon it is slightly faster)
     asm volatile(
     "movq           %3, %%mm5   \n\t"
     "movq           %4, %%mm6   \n\t"
@@ -386,14 +386,14 @@
     : "r" (mm_end), "m" (mask3216g), "m" (mask3216br), "m" (mul3216)
     );
 #else
-    __asm __volatile(PREFETCH"    %0"::"m"(*src):"memory");
-    __asm __volatile(
+    asm volatile(PREFETCH"    %0"::"m"(*src):"memory");
+    asm volatile(
         "movq    %0, %%mm7    \n\t"
         "movq    %1, %%mm6    \n\t"
         ::"m"(red_16mask),"m"(green_16mask));
     while (s < mm_end)
     {
-        __asm __volatile(
+        asm volatile(
         PREFETCH"    32%1           \n\t"
         "movd          %1, %%mm0    \n\t"
         "movd         4%1, %%mm3    \n\t"
@@ -427,8 +427,8 @@
         s += 16;
     }
 #endif
-    __asm __volatile(SFENCE:::"memory");
-    __asm __volatile(EMMS:::"memory");
+    asm volatile(SFENCE:::"memory");
+    asm volatile(EMMS:::"memory");
 #endif
     while (s < end)
     {
@@ -447,15 +447,15 @@
     uint16_t *d = (uint16_t *)dst;
     end = s + src_size;
 #ifdef HAVE_MMX
-    __asm __volatile(PREFETCH"    %0"::"m"(*src):"memory");
-    __asm __volatile(
+    asm volatile(PREFETCH"    %0"::"m"(*src):"memory");
+    asm volatile(
         "movq          %0, %%mm7    \n\t"
         "movq          %1, %%mm6    \n\t"
         ::"m"(red_16mask),"m"(green_16mask));
     mm_end = end - 15;
     while (s < mm_end)
     {
-        __asm __volatile(
+        asm volatile(
         PREFETCH"    32%1           \n\t"
         "movd          %1, %%mm0    \n\t"
         "movd         4%1, %%mm3    \n\t"
@@ -488,8 +488,8 @@
         d += 4;
         s += 16;
     }
-    __asm __volatile(SFENCE:::"memory");
-    __asm __volatile(EMMS:::"memory");
+    asm volatile(SFENCE:::"memory");
+    asm volatile(EMMS:::"memory");
 #endif
     while (s < end)
     {
@@ -509,7 +509,7 @@
     end = s + src_size;
 #ifdef HAVE_MMX
     mm_end = end - 15;
-#if 1 //is faster only if multiplies are reasonable fast (FIXME figure out on which CPUs this is faster, on Athlon it is slightly faster)
+#if 1 //is faster only if multiplies are reasonably fast (FIXME figure out on which CPUs this is faster, on Athlon it is slightly faster)
     asm volatile(
     "movq           %3, %%mm5   \n\t"
     "movq           %4, %%mm6   \n\t"
@@ -545,14 +545,14 @@
     : "r" (mm_end), "m" (mask3215g), "m" (mask3216br), "m" (mul3215)
     );
 #else
-    __asm __volatile(PREFETCH"    %0"::"m"(*src):"memory");
-    __asm __volatile(
+    asm volatile(PREFETCH"    %0"::"m"(*src):"memory");
+    asm volatile(
         "movq          %0, %%mm7    \n\t"
         "movq          %1, %%mm6    \n\t"
         ::"m"(red_15mask),"m"(green_15mask));
     while (s < mm_end)
     {
-        __asm __volatile(
+        asm volatile(
         PREFETCH"    32%1           \n\t"
         "movd          %1, %%mm0    \n\t"
         "movd         4%1, %%mm3    \n\t"
@@ -586,8 +586,8 @@
         s += 16;
     }
 #endif
-    __asm __volatile(SFENCE:::"memory");
-    __asm __volatile(EMMS:::"memory");
+    asm volatile(SFENCE:::"memory");
+    asm volatile(EMMS:::"memory");
 #endif
     while (s < end)
     {
@@ -606,15 +606,15 @@
     uint16_t *d = (uint16_t *)dst;
     end = s + src_size;
 #ifdef HAVE_MMX
-    __asm __volatile(PREFETCH"    %0"::"m"(*src):"memory");
-    __asm __volatile(
+    asm volatile(PREFETCH"    %0"::"m"(*src):"memory");
+    asm volatile(
         "movq          %0, %%mm7    \n\t"
         "movq          %1, %%mm6    \n\t"
         ::"m"(red_15mask),"m"(green_15mask));
     mm_end = end - 15;
     while (s < mm_end)
     {
-        __asm __volatile(
+        asm volatile(
         PREFETCH"    32%1           \n\t"
         "movd          %1, %%mm0    \n\t"
         "movd         4%1, %%mm3    \n\t"
@@ -647,8 +647,8 @@
         d += 4;
         s += 16;
     }
-    __asm __volatile(SFENCE:::"memory");
-    __asm __volatile(EMMS:::"memory");
+    asm volatile(SFENCE:::"memory");
+    asm volatile(EMMS:::"memory");
 #endif
     while (s < end)
     {
@@ -667,15 +667,15 @@
     uint16_t *d = (uint16_t *)dst;
     end = s + src_size;
 #ifdef HAVE_MMX
-    __asm __volatile(PREFETCH"    %0"::"m"(*src):"memory");
-    __asm __volatile(
+    asm volatile(PREFETCH"    %0"::"m"(*src):"memory");
+    asm volatile(
         "movq         %0, %%mm7     \n\t"
         "movq         %1, %%mm6     \n\t"
         ::"m"(red_16mask),"m"(green_16mask));
     mm_end = end - 11;
     while (s < mm_end)
     {
-        __asm __volatile(
+        asm volatile(
         PREFETCH"    32%1           \n\t"
         "movd          %1, %%mm0    \n\t"
         "movd         3%1, %%mm3    \n\t"
@@ -708,8 +708,8 @@
         d += 4;
         s += 12;
     }
-    __asm __volatile(SFENCE:::"memory");
-    __asm __volatile(EMMS:::"memory");
+    asm volatile(SFENCE:::"memory");
+    asm volatile(EMMS:::"memory");
 #endif
     while (s < end)
     {
@@ -730,15 +730,15 @@
     uint16_t *d = (uint16_t *)dst;
     end = s + src_size;
 #ifdef HAVE_MMX
-    __asm __volatile(PREFETCH"    %0"::"m"(*src):"memory");
-    __asm __volatile(
+    asm volatile(PREFETCH"    %0"::"m"(*src):"memory");
+    asm volatile(
         "movq         %0, %%mm7     \n\t"
         "movq         %1, %%mm6     \n\t"
         ::"m"(red_16mask),"m"(green_16mask));
     mm_end = end - 15;
     while (s < mm_end)
     {
-        __asm __volatile(
+        asm volatile(
         PREFETCH"    32%1           \n\t"
         "movd          %1, %%mm0    \n\t"
         "movd         3%1, %%mm3    \n\t"
@@ -771,8 +771,8 @@
         d += 4;
         s += 12;
     }
-    __asm __volatile(SFENCE:::"memory");
-    __asm __volatile(EMMS:::"memory");
+    asm volatile(SFENCE:::"memory");
+    asm volatile(EMMS:::"memory");
 #endif
     while (s < end)
     {
@@ -793,15 +793,15 @@
     uint16_t *d = (uint16_t *)dst;
     end = s + src_size;
 #ifdef HAVE_MMX
-    __asm __volatile(PREFETCH"    %0"::"m"(*src):"memory");
-    __asm __volatile(
+    asm volatile(PREFETCH"    %0"::"m"(*src):"memory");
+    asm volatile(
         "movq          %0, %%mm7    \n\t"
         "movq          %1, %%mm6    \n\t"
         ::"m"(red_15mask),"m"(green_15mask));
     mm_end = end - 11;
     while (s < mm_end)
     {
-        __asm __volatile(
+        asm volatile(
         PREFETCH"    32%1           \n\t"
         "movd          %1, %%mm0    \n\t"
         "movd         3%1, %%mm3    \n\t"
@@ -834,8 +834,8 @@
         d += 4;
         s += 12;
     }
-    __asm __volatile(SFENCE:::"memory");
-    __asm __volatile(EMMS:::"memory");
+    asm volatile(SFENCE:::"memory");
+    asm volatile(EMMS:::"memory");
 #endif
     while (s < end)
     {
@@ -856,15 +856,15 @@
     uint16_t *d = (uint16_t *)dst;
     end = s + src_size;
 #ifdef HAVE_MMX
-    __asm __volatile(PREFETCH"    %0"::"m"(*src):"memory");
-    __asm __volatile(
+    asm volatile(PREFETCH"    %0"::"m"(*src):"memory");
+    asm volatile(
         "movq         %0, %%mm7     \n\t"
         "movq         %1, %%mm6     \n\t"
         ::"m"(red_15mask),"m"(green_15mask));
     mm_end = end - 15;
     while (s < mm_end)
     {
-        __asm __volatile(
+        asm volatile(
         PREFETCH"   32%1            \n\t"
         "movd         %1, %%mm0     \n\t"
         "movd        3%1, %%mm3     \n\t"
@@ -897,8 +897,8 @@
         d += 4;
         s += 12;
     }
-    __asm __volatile(SFENCE:::"memory");
-    __asm __volatile(EMMS:::"memory");
+    asm volatile(SFENCE:::"memory");
+    asm volatile(EMMS:::"memory");
 #endif
     while (s < end)
     {
@@ -910,12 +910,10 @@
 }
 
 /*
-  I use here less accurate approximation by simply
- left-shifting the input
-  value and filling the low order bits with
- zeroes. This method improves png's
-  compression but this scheme cannot reproduce white exactly, since it does not
-  generate an all-ones maximum value; the net effect is to darken the
+  I use less accurate approximation here by simply left-shifting the input
+  value and filling the low order bits with zeroes. This method improves PNG
+  compression but this scheme cannot reproduce white exactly, since it does
+  not generate an all-ones maximum value; the net effect is to darken the
   image slightly.
 
   The better method should be "left bit replication":
@@ -942,11 +940,11 @@
     const uint16_t *s = (uint16_t *)src;
     end = s + src_size/2;
 #ifdef HAVE_MMX
-    __asm __volatile(PREFETCH"    %0"::"m"(*s):"memory");
+    asm volatile(PREFETCH"    %0"::"m"(*s):"memory");
     mm_end = end - 7;
     while (s < mm_end)
     {
-        __asm __volatile(
+        asm volatile(
         PREFETCH"    32%1           \n\t"
         "movq          %1, %%mm0    \n\t"
         "movq          %1, %%mm1    \n\t"
@@ -1009,7 +1007,7 @@
         :"m"(*s),"m"(mask15b),"m"(mask15g),"m"(mask15r), "m"(mmx_null)
         :"memory");
         /* Borrowed 32 to 24 */
-        __asm __volatile(
+        asm volatile(
         "movq       %%mm0, %%mm4    \n\t"
         "movq       %%mm3, %%mm5    \n\t"
         "movq       %%mm6, %%mm0    \n\t"
@@ -1061,8 +1059,8 @@
         d += 24;
         s += 8;
     }
-    __asm __volatile(SFENCE:::"memory");
-    __asm __volatile(EMMS:::"memory");
+    asm volatile(SFENCE:::"memory");
+    asm volatile(EMMS:::"memory");
 #endif
     while (s < end)
     {
@@ -1084,11 +1082,11 @@
     const uint16_t *s = (const uint16_t *)src;
     end = s + src_size/2;
 #ifdef HAVE_MMX
-    __asm __volatile(PREFETCH"    %0"::"m"(*s):"memory");
+    asm volatile(PREFETCH"    %0"::"m"(*s):"memory");
     mm_end = end - 7;
     while (s < mm_end)
     {
-        __asm __volatile(
+        asm volatile(
         PREFETCH"    32%1           \n\t"
         "movq          %1, %%mm0    \n\t"
         "movq          %1, %%mm1    \n\t"
@@ -1150,7 +1148,7 @@
         :"m"(*s),"m"(mask16b),"m"(mask16g),"m"(mask16r),"m"(mmx_null)
         :"memory");
         /* Borrowed 32 to 24 */
-        __asm __volatile(
+        asm volatile(
         "movq       %%mm0, %%mm4    \n\t"
         "movq       %%mm3, %%mm5    \n\t"
         "movq       %%mm6, %%mm0    \n\t"
@@ -1202,8 +1200,8 @@
         d += 24;
         s += 8;
     }
-    __asm __volatile(SFENCE:::"memory");
-    __asm __volatile(EMMS:::"memory");
+    asm volatile(SFENCE:::"memory");
+    asm volatile(EMMS:::"memory");
 #endif
     while (s < end)
     {
@@ -1225,12 +1223,12 @@
     const uint16_t *s = (const uint16_t *)src;
     end = s + src_size/2;
 #ifdef HAVE_MMX
-    __asm __volatile(PREFETCH"    %0"::"m"(*s):"memory");
-    __asm __volatile("pxor    %%mm7,%%mm7    \n\t":::"memory");
+    asm volatile(PREFETCH"    %0"::"m"(*s):"memory");
+    asm volatile("pxor    %%mm7,%%mm7    \n\t":::"memory");
     mm_end = end - 3;
     while (s < mm_end)
     {
-        __asm __volatile(
+        asm volatile(
         PREFETCH"    32%1           \n\t"
         "movq          %1, %%mm0    \n\t"
         "movq          %1, %%mm1    \n\t"
@@ -1266,12 +1264,12 @@
         d += 16;
         s += 4;
     }
-    __asm __volatile(SFENCE:::"memory");
-    __asm __volatile(EMMS:::"memory");
+    asm volatile(SFENCE:::"memory");
+    asm volatile(EMMS:::"memory");
 #endif
     while (s < end)
     {
-#if 0 //slightly slower on athlon
+#if 0 //slightly slower on Athlon
         int bgr= *s++;
         *((uint32_t*)d)++ = ((bgr&0x1F)<<3) + ((bgr&0x3E0)<<6) + ((bgr&0x7C00)<<9);
 #else
@@ -1303,12 +1301,12 @@
     const uint16_t *s = (uint16_t *)src;
     end = s + src_size/2;
 #ifdef HAVE_MMX
-    __asm __volatile(PREFETCH"    %0"::"m"(*s):"memory");
-    __asm __volatile("pxor    %%mm7,%%mm7    \n\t":::"memory");
+    asm volatile(PREFETCH"    %0"::"m"(*s):"memory");
+    asm volatile("pxor    %%mm7,%%mm7    \n\t":::"memory");
     mm_end = end - 3;
     while (s < mm_end)
     {
-        __asm __volatile(
+        asm volatile(
         PREFETCH"    32%1           \n\t"
         "movq          %1, %%mm0    \n\t"
         "movq          %1, %%mm1    \n\t"
@@ -1344,8 +1342,8 @@
         d += 16;
         s += 4;
     }
-    __asm __volatile(SFENCE:::"memory");
-    __asm __volatile(EMMS:::"memory");
+    asm volatile(SFENCE:::"memory");
+    asm volatile(EMMS:::"memory");
 #endif
     while (s < end)
     {
@@ -1370,7 +1368,7 @@
     long idx = 15 - src_size;
     uint8_t *s = (uint8_t *) src-idx, *d = dst-idx;
 #ifdef HAVE_MMX
-    __asm __volatile(
+    asm volatile(
     "test          %0, %0           \n\t"
     "jns           2f               \n\t"
     PREFETCH"       (%1, %0)        \n\t"
@@ -1477,8 +1475,8 @@
     : "r" (src-mmx_size), "r"(dst-mmx_size)
     );
 
-    __asm __volatile(SFENCE:::"memory");
-    __asm __volatile(EMMS:::"memory");
+    asm volatile(SFENCE:::"memory");
+    asm volatile(EMMS:::"memory");
 
     if (mmx_size==23) return; //finihsed, was multiple of 8
 
@@ -1507,7 +1505,7 @@
     for (y=0; y<height; y++)
     {
 #ifdef HAVE_MMX
-//FIXME handle 2 lines a once (fewer prefetch, reuse some chrom, but very likely limited by mem anyway)
+//FIXME handle 2 lines at once (fewer prefetches, reuse some chroma, but very likely memory-limited anyway)
         asm volatile(
         "xor                 %%"REG_a", %%"REG_a"   \n\t"
         ASMALIGN(4)
@@ -1623,7 +1621,7 @@
         }
 #endif
 #endif
-        if ((y&(vertLumPerChroma-1))==(vertLumPerChroma-1) )
+        if ((y&(vertLumPerChroma-1)) == vertLumPerChroma-1)
         {
             usrc += chromStride;
             vsrc += chromStride;
@@ -1639,9 +1637,8 @@
 }
 
 /**
- *
- * height should be a multiple of 2 and width should be a multiple of 16 (if this is a
- * problem for anyone then tell me, and ill fix it)
+ * Height should be a multiple of 2 and width should be a multiple of 16 (if
+ * this is a problem for anyone then tell me, and I will fix it).
  */
 static inline void RENAME(yv12toyuy2)(const uint8_t *ysrc, const uint8_t *usrc, const uint8_t *vsrc, uint8_t *dst,
                                       long width, long height,
@@ -1660,7 +1657,7 @@
     for (y=0; y<height; y++)
     {
 #ifdef HAVE_MMX
-//FIXME handle 2 lines a once (fewer prefetch, reuse some chrom, but very likely limited by mem anyway)
+//FIXME handle 2 lines at once (fewer prefetches, reuse some chroma, but very likely memory-limited anyway)
         asm volatile(
         "xor                %%"REG_a", %%"REG_a"    \n\t"
         ASMALIGN(4)
@@ -1695,7 +1692,7 @@
         : "%"REG_a
         );
 #else
-//FIXME adapt the alpha asm code from yv12->yuy2
+//FIXME adapt the Alpha ASM code from yv12->yuy2
 
 #if __WORDSIZE >= 64
         int i;
@@ -1730,7 +1727,7 @@
         }
 #endif
 #endif
-        if ((y&(vertLumPerChroma-1))==(vertLumPerChroma-1) )
+        if ((y&(vertLumPerChroma-1)) == vertLumPerChroma-1)
         {
             usrc += chromStride;
             vsrc += chromStride;
@@ -1746,9 +1743,8 @@
 }
 
 /**
- *
- * height should be a multiple of 2 and width should be a multiple of 16 (if this is a
- * problem for anyone then tell me, and ill fix it)
+ * Height should be a multiple of 2 and width should be a multiple of 16 (if
+ * this is a problem for anyone then tell me, and I will fix it).
  */
 static inline void RENAME(yv12touyvy)(const uint8_t *ysrc, const uint8_t *usrc, const uint8_t *vsrc, uint8_t *dst,
                                       long width, long height,
@@ -1759,8 +1755,7 @@
 }
 
 /**
- *
- * width should be a multiple of 16
+ * Width should be a multiple of 16.
  */
 static inline void RENAME(yuv422ptoyuy2)(const uint8_t *ysrc, const uint8_t *usrc, const uint8_t *vsrc, uint8_t *dst,
                                          long width, long height,
@@ -1770,9 +1765,8 @@
 }
 
 /**
- *
- * height should be a multiple of 2 and width should be a multiple of 16 (if this is a
- * problem for anyone then tell me, and ill fix it)
+ * Height should be a multiple of 2 and width should be a multiple of 16 (if
+ * this is a problem for anyone then tell me, and I will fix it).
  */
 static inline void RENAME(yuy2toyv12)(const uint8_t *src, uint8_t *ydst, uint8_t *udst, uint8_t *vdst,
                                       long width, long height,
@@ -2007,10 +2001,10 @@
 }
 
 /**
- *
- * height should be a multiple of 2 and width should be a multiple of 16 (if this is a
- * problem for anyone then tell me, and ill fix it)
- * chrominance data is only taken from every secound line others are ignored FIXME write HQ version
+ * Height should be a multiple of 2 and width should be a multiple of 16 (if
+ * this is a problem for anyone then tell me, and I will fix it).
+ * Chrominance data is only taken from every secound line, others are ignored.
+ * FIXME: Write HQ version.
  */
 static inline void RENAME(uyvytoyv12)(const uint8_t *src, uint8_t *ydst, uint8_t *udst, uint8_t *vdst,
                                       long width, long height,
@@ -2133,10 +2127,11 @@
 }
 
 /**
- *
- * height should be a multiple of 2 and width should be a multiple of 2 (if this is a
- * problem for anyone then tell me, and ill fix it)
- * chrominance data is only taken from every secound line others are ignored in the C version FIXME write HQ version
+ * Height should be a multiple of 2 and width should be a multiple of 2 (if
+ * this is a problem for anyone then tell me, and I will fix it).
+ * Chrominance data is only taken from every secound line,
+ * others are ignored in the C version.
+ * FIXME: Write HQ version.
  */
 static inline void RENAME(rgb24toyv12)(const uint8_t *src, uint8_t *ydst, uint8_t *udst, uint8_t *vdst,
                                        long width, long height,
@@ -2152,8 +2147,8 @@
         {
             asm volatile(
             "mov                        %2, %%"REG_a"   \n\t"
-            "movq     "MANGLE(bgr2YCoeff)", %%mm6       \n\t"
-            "movq          "MANGLE(w1111)", %%mm5       \n\t"
+            "movq  "MANGLE(ff_bgr2YCoeff)", %%mm6       \n\t"
+            "movq       "MANGLE(ff_w1111)", %%mm5       \n\t"
             "pxor                    %%mm7, %%mm7       \n\t"
             "lea (%%"REG_a", %%"REG_a", 2), %%"REG_d"   \n\t"
             ASMALIGN(4)
@@ -2211,7 +2206,7 @@
             "psraw                      $7, %%mm4       \n\t"
 
             "packuswb                %%mm4, %%mm0       \n\t"
-            "paddusb "MANGLE(bgr2YOffset)", %%mm0       \n\t"
+            "paddusb "MANGLE(ff_bgr2YOffset)", %%mm0    \n\t"
 
             MOVNTQ"                  %%mm0, (%1, %%"REG_a") \n\t"
             "add                        $8,      %%"REG_a"  \n\t"
@@ -2225,8 +2220,8 @@
         src -= srcStride*2;
         asm volatile(
         "mov                        %4, %%"REG_a"   \n\t"
-        "movq          "MANGLE(w1111)", %%mm5       \n\t"
-        "movq     "MANGLE(bgr2UCoeff)", %%mm6       \n\t"
+        "movq       "MANGLE(ff_w1111)", %%mm5       \n\t"
+        "movq  "MANGLE(ff_bgr2UCoeff)", %%mm6       \n\t"
         "pxor                    %%mm7, %%mm7       \n\t"
         "lea (%%"REG_a", %%"REG_a", 2), %%"REG_d"   \n\t"
         "add                 %%"REG_d", %%"REG_d"   \n\t"
@@ -2275,8 +2270,8 @@
         "psrlw                      $2, %%mm0       \n\t"
         "psrlw                      $2, %%mm2       \n\t"
 #endif
-        "movq     "MANGLE(bgr2VCoeff)", %%mm1       \n\t"
-        "movq     "MANGLE(bgr2VCoeff)", %%mm3       \n\t"
+        "movq  "MANGLE(ff_bgr2VCoeff)", %%mm1       \n\t"
+        "movq  "MANGLE(ff_bgr2VCoeff)", %%mm3       \n\t"
 
         "pmaddwd                 %%mm0, %%mm1       \n\t"
         "pmaddwd                 %%mm2, %%mm3       \n\t"
@@ -2333,12 +2328,12 @@
         "paddw                   %%mm1, %%mm5       \n\t"
         "paddw                   %%mm3, %%mm2       \n\t"
         "paddw                   %%mm5, %%mm2       \n\t"
-        "movq          "MANGLE(w1111)", %%mm5       \n\t"
+        "movq       "MANGLE(ff_w1111)", %%mm5       \n\t"
         "psrlw                      $2, %%mm4       \n\t"
         "psrlw                      $2, %%mm2       \n\t"
 #endif
-        "movq     "MANGLE(bgr2VCoeff)", %%mm1       \n\t"
-        "movq     "MANGLE(bgr2VCoeff)", %%mm3       \n\t"
+        "movq  "MANGLE(ff_bgr2VCoeff)", %%mm1       \n\t"
+        "movq  "MANGLE(ff_bgr2VCoeff)", %%mm3       \n\t"
 
         "pmaddwd                 %%mm4, %%mm1       \n\t"
         "pmaddwd                 %%mm2, %%mm3       \n\t"
@@ -2362,7 +2357,7 @@
         "punpckldq               %%mm4, %%mm0           \n\t"
         "punpckhdq               %%mm4, %%mm1           \n\t"
         "packsswb                %%mm1, %%mm0           \n\t"
-        "paddb  "MANGLE(bgr2UVOffset)", %%mm0           \n\t"
+        "paddb "MANGLE(ff_bgr2UVOffset)", %%mm0         \n\t"
         "movd                    %%mm0, (%2, %%"REG_a") \n\t"
         "punpckhdq               %%mm0, %%mm0           \n\t"
         "movd                    %%mm0, (%3, %%"REG_a") \n\t"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale.c	2008-03-21 06:48:49 UTC (rev 3911)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale.c	2008-03-21 06:51:32 UTC (rev 3912)
@@ -38,7 +38,7 @@
 */
 
 /*
-tested special converters (most are tested actually but i didnt write it down ...)
+tested special converters (most are tested actually, but I did not write it down ...)
  YV12 -> BGR16
  YV12 -> YV12
  BGR15 -> BGR16
@@ -53,16 +53,13 @@
   BGR32 -> BGR24 & RGB32 -> RGB24
   BGR24 -> YV12
 */
-// MEANX
-#include "config.h"
-// /MEANX
 
 #include <inttypes.h>
 #include <string.h>
 #include <math.h>
 #include <stdio.h>
 #include <unistd.h>
-#include <limits.h> // MEANX
+#include "config.h"
 #include <assert.h>
 #ifdef HAVE_SYS_MMAN_H
 #include <sys/mman.h>
@@ -75,20 +72,8 @@
 #include "x86_cpu.h"
 #include "bswap.h"
 #include "rgb2rgb.h"
+#include "libavcodec/opt.h"
 
-// MEANX
-#include "wrapper.h"
-
-// /MEANX
-
-
-
-#include "../ADM_lavcodec/opt.h" //MEANX
-//**** Does not build as shared on amd64... MEANX
-#ifdef ARCH_X86_64
-#undef RUNTIME_CPUDETECT
-#endif
-
 #undef MOVNTQ
 #undef PAVGB
 
@@ -117,6 +102,7 @@
 
 #define isSupportedIn(x)    (       \
            (x)==PIX_FMT_YUV420P     \
+        || (x)==PIX_FMT_YUVA420P    \
         || (x)==PIX_FMT_YUYV422     \
         || (x)==PIX_FMT_UYVY422     \
         || (x)==PIX_FMT_RGB32       \
@@ -139,6 +125,7 @@
         || (x)==PIX_FMT_RGB8        \
         || (x)==PIX_FMT_BGR4_BYTE   \
         || (x)==PIX_FMT_RGB4_BYTE   \
+        || (x)==PIX_FMT_YUV440P     \
     )
 #define isSupportedOut(x)   (       \
            (x)==PIX_FMT_YUV420P     \
@@ -182,7 +169,7 @@
 Special versions: fast Y 1:1 scaling (no interpolation in y direction)
 
 TODO
-more intelligent missalignment avoidance for the horizontal scaler
+more intelligent misalignment avoidance for the horizontal scaler
 write special vertical cubic upscale version
 Optimize C code (yv12 / minmax)
 add support for packed pixel yuv input & output
@@ -193,51 +180,51 @@
 */
 
 #if defined(ARCH_X86) && defined (CONFIG_GPL)
-static uint64_t attribute_used __attribute__((aligned(8))) bF8=       0xF8F8F8F8F8F8F8F8LL;
-static uint64_t attribute_used __attribute__((aligned(8))) bFC=       0xFCFCFCFCFCFCFCFCLL;
-static uint64_t                __attribute__((aligned(8))) w10=       0x0010001000100010LL;
-static uint64_t attribute_used __attribute__((aligned(8))) w02=       0x0002000200020002LL;
-static uint64_t attribute_used __attribute__((aligned(8))) bm00001111=0x00000000FFFFFFFFLL;
-static uint64_t attribute_used __attribute__((aligned(8))) bm00000111=0x0000000000FFFFFFLL;
-static uint64_t attribute_used __attribute__((aligned(8))) bm11111000=0xFFFFFFFFFF000000LL;
-static uint64_t attribute_used __attribute__((aligned(8))) bm01010101=0x00FF00FF00FF00FFLL;
+DECLARE_ASM_CONST(8, uint64_t, bF8)=       0xF8F8F8F8F8F8F8F8LL;
+DECLARE_ASM_CONST(8, uint64_t, bFC)=       0xFCFCFCFCFCFCFCFCLL;
+DECLARE_ASM_CONST(8, uint64_t, w10)=       0x0010001000100010LL;
+DECLARE_ASM_CONST(8, uint64_t, w02)=       0x0002000200020002LL;
+DECLARE_ASM_CONST(8, uint64_t, bm00001111)=0x00000000FFFFFFFFLL;
+DECLARE_ASM_CONST(8, uint64_t, bm00000111)=0x0000000000FFFFFFLL;
+DECLARE_ASM_CONST(8, uint64_t, bm11111000)=0xFFFFFFFFFF000000LL;
+DECLARE_ASM_CONST(8, uint64_t, bm01010101)=0x00FF00FF00FF00FFLL;
 
 static volatile uint64_t attribute_used __attribute__((aligned(8))) b5Dither;
 static volatile uint64_t attribute_used __attribute__((aligned(8))) g5Dither;
 static volatile uint64_t attribute_used __attribute__((aligned(8))) g6Dither;
 static volatile uint64_t attribute_used __attribute__((aligned(8))) r5Dither;
 
-static uint64_t __attribute__((aligned(8))) dither4[2]={
+const DECLARE_ALIGNED(8, uint64_t, ff_dither4[2]) = {
         0x0103010301030103LL,
         0x0200020002000200LL,};
 
-static uint64_t __attribute__((aligned(8))) dither8[2]={
+const DECLARE_ALIGNED(8, uint64_t, ff_dither8[2]) = {
         0x0602060206020602LL,
         0x0004000400040004LL,};
 
-static uint64_t                __attribute__((aligned(8))) b16Mask=   0x001F001F001F001FLL;
-static uint64_t attribute_used __attribute__((aligned(8))) g16Mask=   0x07E007E007E007E0LL;
-static uint64_t attribute_used __attribute__((aligned(8))) r16Mask=   0xF800F800F800F800LL;
-static uint64_t                __attribute__((aligned(8))) b15Mask=   0x001F001F001F001FLL;
-static uint64_t attribute_used __attribute__((aligned(8))) g15Mask=   0x03E003E003E003E0LL;
-static uint64_t attribute_used __attribute__((aligned(8))) r15Mask=   0x7C007C007C007C00LL;
+DECLARE_ASM_CONST(8, uint64_t, b16Mask)=   0x001F001F001F001FLL;
+DECLARE_ASM_CONST(8, uint64_t, g16Mask)=   0x07E007E007E007E0LL;
+DECLARE_ASM_CONST(8, uint64_t, r16Mask)=   0xF800F800F800F800LL;
+DECLARE_ASM_CONST(8, uint64_t, b15Mask)=   0x001F001F001F001FLL;
+DECLARE_ASM_CONST(8, uint64_t, g15Mask)=   0x03E003E003E003E0LL;
+DECLARE_ASM_CONST(8, uint64_t, r15Mask)=   0x7C007C007C007C00LL;
 
-static uint64_t attribute_used __attribute__((aligned(8))) M24A=      0x00FF0000FF0000FFLL;
-static uint64_t attribute_used __attribute__((aligned(8))) M24B=      0xFF0000FF0000FF00LL;
-static uint64_t attribute_used __attribute__((aligned(8))) M24C=      0x0000FF0000FF0000LL;
+DECLARE_ALIGNED(8, const uint64_t, ff_M24A)         = 0x00FF0000FF0000FFLL;
+DECLARE_ALIGNED(8, const uint64_t, ff_M24B)         = 0xFF0000FF0000FF00LL;
+DECLARE_ALIGNED(8, const uint64_t, ff_M24C)         = 0x0000FF0000FF0000LL;
 
 #ifdef FAST_BGR2YV12
-static const uint64_t bgr2YCoeff   attribute_used __attribute__((aligned(8))) = 0x000000210041000DULL;
-static const uint64_t bgr2UCoeff   attribute_used __attribute__((aligned(8))) = 0x0000FFEEFFDC0038ULL;
-static const uint64_t bgr2VCoeff   attribute_used __attribute__((aligned(8))) = 0x00000038FFD2FFF8ULL;
+DECLARE_ALIGNED(8, const uint64_t, ff_bgr2YCoeff)   = 0x000000210041000DULL;
+DECLARE_ALIGNED(8, const uint64_t, ff_bgr2UCoeff)   = 0x0000FFEEFFDC0038ULL;
+DECLARE_ALIGNED(8, const uint64_t, ff_bgr2VCoeff)   = 0x00000038FFD2FFF8ULL;
 #else
-static const uint64_t bgr2YCoeff   attribute_used __attribute__((aligned(8))) = 0x000020E540830C8BULL;
-static const uint64_t bgr2UCoeff   attribute_used __attribute__((aligned(8))) = 0x0000ED0FDAC23831ULL;
-static const uint64_t bgr2VCoeff   attribute_used __attribute__((aligned(8))) = 0x00003831D0E6F6EAULL;
+DECLARE_ALIGNED(8, const uint64_t, ff_bgr2YCoeff)   = 0x000020E540830C8BULL;
+DECLARE_ALIGNED(8, const uint64_t, ff_bgr2UCoeff)   = 0x0000ED0FDAC23831ULL;
+DECLARE_ALIGNED(8, const uint64_t, ff_bgr2VCoeff)   = 0x00003831D0E6F6EAULL;
 #endif /* FAST_BGR2YV12 */
-static const uint64_t bgr2YOffset  attribute_used __attribute__((aligned(8))) = 0x1010101010101010ULL;
-static const uint64_t bgr2UVOffset attribute_used __attribute__((aligned(8))) = 0x8080808080808080ULL;
-static const uint64_t w1111        attribute_used __attribute__((aligned(8))) = 0x0001000100010001ULL;
+DECLARE_ALIGNED(8, const uint64_t, ff_bgr2YOffset)  = 0x1010101010101010ULL;
+DECLARE_ALIGNED(8, const uint64_t, ff_bgr2UVOffset) = 0x8080808080808080ULL;
+DECLARE_ALIGNED(8, const uint64_t, ff_w1111)        = 0x0001000100010001ULL;
 #endif /* defined(ARCH_X86) */
 
 // clipping helper table for C implementations:
@@ -254,18 +241,13 @@
 static const char * sws_context_to_name(void * ptr) {
     return "swscaler";
 }
-/* MEANX ????? */
-#ifndef offsetof
-#    define offsetof(T,F) ((unsigned int)((char *)&((T *)0)->F))
-#endif
-/* MEANX */
 
 #define OFFSET(x) offsetof(SwsContext, x)
 #define DEFAULT 0
 #define VE AV_OPT_FLAG_VIDEO_PARAM | AV_OPT_FLAG_ENCODING_PARAM
 
 static const AVOption options[] = {
-    { "sws_flags", "scaler/cpu flags", OFFSET(flags), FF_OPT_TYPE_FLAGS, DEFAULT, INT_MIN, INT_MAX, VE, "sws_flags" },
+    { "sws_flags", "scaler/cpu flags", OFFSET(flags), FF_OPT_TYPE_FLAGS, DEFAULT, 0, UINT_MAX, VE, "sws_flags" },
     { "fast_bilinear", "fast bilinear", 0, FF_OPT_TYPE_CONST, SWS_FAST_BILINEAR, INT_MIN, INT_MAX, VE, "sws_flags" },
     { "bilinear", "bilinear", 0, FF_OPT_TYPE_CONST, SWS_BILINEAR, INT_MIN, INT_MAX, VE, "sws_flags" },
     { "bicubic", "bicubic", 0, FF_OPT_TYPE_CONST, SWS_BICUBIC, INT_MIN, INT_MAX, VE, "sws_flags" },
@@ -292,13 +274,15 @@
 #undef VE
 #undef DEFAULT
 
-static AVClass sws_context_class = { "SWScaler", sws_context_to_name, options };
+static const AVClass sws_context_class = { "SWScaler", sws_context_to_name, options };
 
-char *sws_format_name(enum PixelFormat format)
+const char *sws_format_name(enum PixelFormat format)
 {
     switch (format) {
         case PIX_FMT_YUV420P:
             return "yuv420p";
+        case PIX_FMT_YUVA420P:
+            return "yuva420p";
         case PIX_FMT_YUYV422:
             return "yuyv422";
         case PIX_FMT_RGB24:
@@ -371,6 +355,8 @@
             return "nv12";
         case PIX_FMT_NV21:
             return "nv21";
+        case PIX_FMT_YUV440P:
+            return "yuv440p";
         default:
             return "Unknown format";
     }
@@ -381,7 +367,7 @@
 {
     volatile int i= bF8+bFC+w10+
     bm00001111+bm00000111+bm11111000+b16Mask+g16Mask+r16Mask+b15Mask+g15Mask+r15Mask+
-    M24A+M24B+M24C+w02 + b5Dither+g5Dither+r5Dither+g6Dither+dither4[0]+dither8[0]+bm01010101;
+    ff_M24A+ff_M24B+ff_M24C+w02 + b5Dither+g5Dither+r5Dither+g6Dither+ff_dither4[0]+ff_dither8[0]+bm01010101;
     if (i) i=0;
 }
 #endif
@@ -402,7 +388,7 @@
         dest[i]= av_clip_uint8(val>>19);
     }
 
-    if (uDest != NULL)
+    if (uDest)
         for (i=0; i<chrDstW; i++)
         {
             int u=1<<18;
@@ -411,7 +397,7 @@
             for (j=0; j<chrFilterSize; j++)
             {
                 u += chrSrc[j][i] * chrFilter[j];
-                v += chrSrc[j][i + 2048] * chrFilter[j];
+                v += chrSrc[j][i + VOFW] * chrFilter[j];
             }
 
             uDest[i]= av_clip_uint8(u>>19);
@@ -435,7 +421,7 @@
         dest[i]= av_clip_uint8(val>>19);
     }
 
-    if (uDest == NULL)
+    if (!uDest)
         return;
 
     if (dstFormat == PIX_FMT_NV12)
@@ -447,7 +433,7 @@
             for (j=0; j<chrFilterSize; j++)
             {
                 u += chrSrc[j][i] * chrFilter[j];
-                v += chrSrc[j][i + 2048] * chrFilter[j];
+                v += chrSrc[j][i + VOFW] * chrFilter[j];
             }
 
             uDest[2*i]= av_clip_uint8(u>>19);
@@ -462,7 +448,7 @@
             for (j=0; j<chrFilterSize; j++)
             {
                 u += chrSrc[j][i] * chrFilter[j];
-                v += chrSrc[j][i + 2048] * chrFilter[j];
+                v += chrSrc[j][i + VOFW] * chrFilter[j];
             }
 
             uDest[2*i]= av_clip_uint8(v>>19);
@@ -488,7 +474,7 @@
         for (j=0; j<chrFilterSize; j++)\
         {\
             U += chrSrc[j][i] * chrFilter[j];\
-            V += chrSrc[j][i+2048] * chrFilter[j];\
+            V += chrSrc[j][i+VOFW] * chrFilter[j];\
         }\
         Y1>>=19;\
         Y2>>=19;\
@@ -518,7 +504,7 @@
         int Y1= (buf0[i2  ]*yalpha1+buf1[i2  ]*yalpha)>>19;           \
         int Y2= (buf0[i2+1]*yalpha1+buf1[i2+1]*yalpha)>>19;           \
         int U= (uvbuf0[i     ]*uvalpha1+uvbuf1[i     ]*uvalpha)>>19;  \
-        int V= (uvbuf0[i+2048]*uvalpha1+uvbuf1[i+2048]*uvalpha)>>19;  \
+        int V= (uvbuf0[i+VOFW]*uvalpha1+uvbuf1[i+VOFW]*uvalpha)>>19;  \
 
 #define YSCALE_YUV_2_RGB2_C(type) \
     YSCALE_YUV_2_PACKED2_C\
@@ -533,7 +519,7 @@
         int Y1= buf0[i2  ]>>7;\
         int Y2= buf0[i2+1]>>7;\
         int U= (uvbuf1[i     ])>>7;\
-        int V= (uvbuf1[i+2048])>>7;\
+        int V= (uvbuf1[i+VOFW])>>7;\
 
 #define YSCALE_YUV_2_RGB1_C(type) \
     YSCALE_YUV_2_PACKED1_C\
@@ -548,7 +534,7 @@
         int Y1= buf0[i2  ]>>7;\
         int Y2= buf0[i2+1]>>7;\
         int U= (uvbuf0[i     ] + uvbuf1[i     ])>>8;\
-        int V= (uvbuf0[i+2048] + uvbuf1[i+2048])>>8;\
+        int V= (uvbuf0[i+VOFW] + uvbuf1[i+VOFW])>>8;\
 
 #define YSCALE_YUV_2_RGB1B_C(type) \
     YSCALE_YUV_2_PACKED1B_C\
@@ -1557,7 +1543,7 @@
 
 #if defined(RUNTIME_CPUDETECT) && defined (CONFIG_GPL)
 #if defined(ARCH_X86)
-    // ordered per speed fasterst first
+    // ordered per speed fastest first
     if (flags & SWS_CPU_CAPS_MMX2)
         return swScale_MMX2;
     else if (flags & SWS_CPU_CAPS_3DNOW)
@@ -1611,9 +1597,9 @@
     }
     dst = dstParam[1] + dstStride[1]*srcSliceY/2;
     if (c->dstFormat == PIX_FMT_NV12)
-        interleaveBytes( src[1],src[2],dst,c->srcW/2,srcSliceH/2,srcStride[1],srcStride[2],dstStride[0] );
+        interleaveBytes(src[1], src[2], dst, c->srcW/2, srcSliceH/2, srcStride[1], srcStride[2], dstStride[0]);
     else
-        interleaveBytes( src[2],src[1],dst,c->srcW/2,srcSliceH/2,srcStride[2],srcStride[1],dstStride[0] );
+        interleaveBytes(src[2], src[1], dst, c->srcW/2, srcSliceH/2, srcStride[2], srcStride[1], dstStride[0]);
 
     return srcSliceH;
 }
@@ -1622,7 +1608,7 @@
                                int srcSliceH, uint8_t* dstParam[], int dstStride[]){
     uint8_t *dst=dstParam[0] + dstStride[0]*srcSliceY;
 
-    yv12toyuy2( src[0],src[1],src[2],dst,c->srcW,srcSliceH,srcStride[0],srcStride[1],dstStride[0] );
+    yv12toyuy2(src[0], src[1], src[2], dst, c->srcW, srcSliceH, srcStride[0], srcStride[1], dstStride[0]);
 
     return srcSliceH;
 }
@@ -1631,7 +1617,7 @@
                                int srcSliceH, uint8_t* dstParam[], int dstStride[]){
     uint8_t *dst=dstParam[0] + dstStride[0]*srcSliceY;
 
-    yv12touyvy( src[0],src[1],src[2],dst,c->srcW,srcSliceH,srcStride[0],srcStride[1],dstStride[0] );
+    yv12touyvy(src[0], src[1], src[2], dst, c->srcW, srcSliceH, srcStride[0], srcStride[1], dstStride[0]);
 
     return srcSliceH;
 }
@@ -1663,7 +1649,7 @@
         case 0x83: conv= rgb15to32; break;
         case 0x84: conv= rgb16to32; break;
         case 0x86: conv= rgb24to32; break;
-        default: av_log(c, AV_LOG_ERROR, "swScaler: internal error %s -> %s converter\n",
+        default: av_log(c, AV_LOG_ERROR, "internal error %s -> %s converter\n",
                         sws_format_name(srcFormat), sws_format_name(dstFormat)); break;
         }
     }else if (  (isBGR(srcFormat) && isRGB(dstFormat))
@@ -1685,17 +1671,17 @@
         case 0x84: conv= rgb16tobgr32; break;
         case 0x86: conv= rgb24tobgr32; break;
         case 0x88: conv= rgb32tobgr32; break;
-        default: av_log(c, AV_LOG_ERROR, "swScaler: internal error %s -> %s converter\n",
+        default: av_log(c, AV_LOG_ERROR, "internal error %s -> %s converter\n",
                         sws_format_name(srcFormat), sws_format_name(dstFormat)); break;
         }
     }else{
-        av_log(c, AV_LOG_ERROR, "swScaler: internal error %s -> %s converter\n",
+        av_log(c, AV_LOG_ERROR, "internal error %s -> %s converter\n",
                sws_format_name(srcFormat), sws_format_name(dstFormat));
     }
 
     if(conv)
     {
-        if (dstStride[0]*srcBpp == srcStride[0]*dstBpp)
+        if (dstStride[0]*srcBpp == srcStride[0]*dstBpp && srcStride[0] > 0)
             conv(src[0], dst[0] + dstStride[0]*srcSliceY, srcSliceH*srcStride[0]);
         else
         {
@@ -1894,6 +1880,7 @@
         *v=0;
         break;
     case PIX_FMT_YUV420P:
+    case PIX_FMT_YUVA420P:
     case PIX_FMT_GRAY16BE:
     case PIX_FMT_GRAY16LE:
     case PIX_FMT_GRAY8: //FIXME remove after different subsamplings are fully implemented
@@ -1902,6 +1889,10 @@
         *h=1;
         *v=1;
         break;
+    case PIX_FMT_YUV440P:
+        *h=0;
+        *v=1;
+        break;
     case PIX_FMT_YUV410P:
         *h=2;
         *v=2;
@@ -2022,6 +2013,9 @@
         case PIX_FMT_YUVJ444P:
             *format = PIX_FMT_YUV444P;
             return 1;
+        case PIX_FMT_YUVJ440P:
+            *format = PIX_FMT_YUV440P;
+            return 1;
         default:
             return 0;
     }
@@ -2056,7 +2050,7 @@
 #endif
 #endif /* RUNTIME_CPUDETECT */
     if (clip_table[512] != 255) globalInit();
-    if (rgb15to16 == NULL) sws_rgb2rgb_init(flags);
+    if (!rgb15to16) sws_rgb2rgb_init(flags);
 
     unscaled = (srcW == dstW && srcH == dstH);
     needsDither= (isBGR(dstFormat) || isRGB(dstFormat))
@@ -2068,12 +2062,12 @@
 
     if (!isSupportedIn(srcFormat))
     {
-        av_log(NULL, AV_LOG_ERROR, "swScaler: %s is not supported as input format\n", sws_format_name(srcFormat));
+        av_log(NULL, AV_LOG_ERROR, "swScaler: %s is not supported as input pixel format\n", sws_format_name(srcFormat));
         return NULL;
     }
     if (!isSupportedOut(dstFormat))
     {
-        av_log(NULL, AV_LOG_ERROR, "swScaler: %s is not supported as output format\n", sws_format_name(dstFormat));
+        av_log(NULL, AV_LOG_ERROR, "swScaler: %s is not supported as output pixel format\n", sws_format_name(dstFormat));
         return NULL;
     }
 
@@ -2084,6 +2078,10 @@
                srcW, srcH, dstW, dstH);
         return NULL;
     }
+    if(srcW > VOFW || dstW > VOFW){
+        av_log(NULL, AV_LOG_ERROR, "swScaler: Compile time max width is "AV_STRINGIFY(VOFW)" change VOF/VOFW and recompile\n");
+        return NULL;
+    }
 
     if (!dstFilter) dstFilter= &dummyFilter;
     if (!srcFilter) srcFilter= &dummyFilter;
@@ -2103,14 +2101,14 @@
     c->vRounder= 4* 0x0001000100010001ULL;
 
     usesHFilter= usesVFilter= 0;
-    if (dstFilter->lumV!=NULL && dstFilter->lumV->length>1) usesVFilter=1;
-    if (dstFilter->lumH!=NULL && dstFilter->lumH->length>1) usesHFilter=1;
-    if (dstFilter->chrV!=NULL && dstFilter->chrV->length>1) usesVFilter=1;
-    if (dstFilter->chrH!=NULL && dstFilter->chrH->length>1) usesHFilter=1;
-    if (srcFilter->lumV!=NULL && srcFilter->lumV->length>1) usesVFilter=1;
-    if (srcFilter->lumH!=NULL && srcFilter->lumH->length>1) usesHFilter=1;
-    if (srcFilter->chrV!=NULL && srcFilter->chrV->length>1) usesVFilter=1;
-    if (srcFilter->chrH!=NULL && srcFilter->chrH->length>1) usesHFilter=1;
+    if (dstFilter->lumV && dstFilter->lumV->length>1) usesVFilter=1;
+    if (dstFilter->lumH && dstFilter->lumH->length>1) usesHFilter=1;
+    if (dstFilter->chrV && dstFilter->chrV->length>1) usesVFilter=1;
+    if (dstFilter->chrH && dstFilter->chrH->length>1) usesHFilter=1;
+    if (srcFilter->lumV && srcFilter->lumV->length>1) usesVFilter=1;
+    if (srcFilter->lumH && srcFilter->lumH->length>1) usesHFilter=1;
+    if (srcFilter->chrV && srcFilter->chrV->length>1) usesVFilter=1;
+    if (srcFilter->chrH && srcFilter->chrH->length>1) usesHFilter=1;
 
     getSubSampleFactors(&c->chrSrcHSubSample, &c->chrSrcVSubSample, srcFormat);
     getSubSampleFactors(&c->chrDstHSubSample, &c->chrDstVSubSample, dstFormat);
@@ -2164,7 +2162,7 @@
         }
 #endif
 
-        if ( srcFormat==PIX_FMT_YUV410P && dstFormat==PIX_FMT_YUV420P )
+        if (srcFormat==PIX_FMT_YUV410P && dstFormat==PIX_FMT_YUV420P)
         {
             c->swScale= yvu9toyv12Wrapper;
         }
@@ -2220,7 +2218,7 @@
         /* simple copy */
         if (  srcFormat == dstFormat
             || (isPlanarYUV(srcFormat) && isGray(dstFormat))
-            || (isPlanarYUV(dstFormat) && isGray(srcFormat)) )
+            || (isPlanarYUV(dstFormat) && isGray(srcFormat)))
         {
             c->swScale= simpleCopy;
         }
@@ -2246,7 +2244,7 @@
 
         if (c->swScale){
             if (flags&SWS_PRINT_INFO)
-                av_log(c, AV_LOG_INFO, "SwScaler: using unscaled %s -> %s special converter\n",
+                av_log(c, AV_LOG_INFO, "using unscaled %s -> %s special converter\n",
                                 sws_format_name(srcFormat), sws_format_name(dstFormat));
             return c;
         }
@@ -2258,7 +2256,7 @@
         if (!c->canMMX2BeUsed && dstW >=srcW && (srcW&15)==0 && (flags&SWS_FAST_BILINEAR))
         {
             if (flags&SWS_PRINT_INFO)
-                av_log(c, AV_LOG_INFO, "SwScaler: output Width is not a multiple of 32 -> no MMX2 scaler\n");
+                av_log(c, AV_LOG_INFO, "output Width is not a multiple of 32 -> no MMX2 scaler\n");
         }
         if (usesHFilter) c->canMMX2BeUsed=0;
     }
@@ -2379,7 +2377,7 @@
         nextSlice>>= c->chrSrcVSubSample;
         nextSlice<<= c->chrSrcVSubSample;
         if (c->vLumFilterPos[i   ] + c->vLumBufSize < nextSlice)
-            c->vLumBufSize= nextSlice - c->vLumFilterPos[i   ];
+            c->vLumBufSize= nextSlice - c->vLumFilterPos[i];
         if (c->vChrFilterPos[chrI] + c->vChrBufSize < (nextSlice>>c->chrSrcVSubSample))
             c->vChrBufSize= (nextSlice>>c->chrSrcVSubSample) - c->vChrFilterPos[chrI];
     }
@@ -2390,13 +2388,15 @@
     //Note we need at least one pixel more at the end because of the mmx code (just in case someone wanna replace the 4000/8000)
     /* align at 16 bytes for AltiVec */
     for (i=0; i<c->vLumBufSize; i++)
-        c->lumPixBuf[i]= c->lumPixBuf[i+c->vLumBufSize]= av_mallocz(4000);
+        c->lumPixBuf[i]= c->lumPixBuf[i+c->vLumBufSize]= av_mallocz(VOF+1);
     for (i=0; i<c->vChrBufSize; i++)
-        c->chrPixBuf[i]= c->chrPixBuf[i+c->vChrBufSize]= av_malloc(8000);
+        c->chrPixBuf[i]= c->chrPixBuf[i+c->vChrBufSize]= av_malloc((VOF+1)*2);
 
     //try to avoid drawing green stuff between the right end and the stride end
-    for (i=0; i<c->vChrBufSize; i++) memset(c->chrPixBuf[i], 64, 8000);
+    for (i=0; i<c->vChrBufSize; i++) memset(c->chrPixBuf[i], 64, (VOF+1)*2);
 
+    assert(2*VOFW == VOF);
+
     ASSERT(c->chrDstH <= dstH)
 
     if (flags&SWS_PRINT_INFO)
@@ -2407,29 +2407,29 @@
         char *dither= "";
 #endif
         if (flags&SWS_FAST_BILINEAR)
-            av_log(c, AV_LOG_INFO, "SwScaler: FAST_BILINEAR scaler, ");
+            av_log(c, AV_LOG_INFO, "FAST_BILINEAR scaler, ");
         else if (flags&SWS_BILINEAR)
-            av_log(c, AV_LOG_INFO, "SwScaler: BILINEAR scaler, ");
+            av_log(c, AV_LOG_INFO, "BILINEAR scaler, ");
         else if (flags&SWS_BICUBIC)
-            av_log(c, AV_LOG_INFO, "SwScaler: BICUBIC scaler, ");
+            av_log(c, AV_LOG_INFO, "BICUBIC scaler, ");
         else if (flags&SWS_X)
-            av_log(c, AV_LOG_INFO, "SwScaler: Experimental scaler, ");
+            av_log(c, AV_LOG_INFO, "Experimental scaler, ");
         else if (flags&SWS_POINT)
-            av_log(c, AV_LOG_INFO, "SwScaler: Nearest Neighbor / POINT scaler, ");
+            av_log(c, AV_LOG_INFO, "Nearest Neighbor / POINT scaler, ");
         else if (flags&SWS_AREA)
-            av_log(c, AV_LOG_INFO, "SwScaler: Area Averageing scaler, ");
+            av_log(c, AV_LOG_INFO, "Area Averageing scaler, ");
         else if (flags&SWS_BICUBLIN)
-            av_log(c, AV_LOG_INFO, "SwScaler: luma BICUBIC / chroma BILINEAR scaler, ");
+            av_log(c, AV_LOG_INFO, "luma BICUBIC / chroma BILINEAR scaler, ");
         else if (flags&SWS_GAUSS)
-            av_log(c, AV_LOG_INFO, "SwScaler: Gaussian scaler, ");
+            av_log(c, AV_LOG_INFO, "Gaussian scaler, ");
         else if (flags&SWS_SINC)
-            av_log(c, AV_LOG_INFO, "SwScaler: Sinc scaler, ");
+            av_log(c, AV_LOG_INFO, "Sinc scaler, ");
         else if (flags&SWS_LANCZOS)
-            av_log(c, AV_LOG_INFO, "SwScaler: Lanczos scaler, ");
+            av_log(c, AV_LOG_INFO, "Lanczos scaler, ");
         else if (flags&SWS_SPLINE)
-            av_log(c, AV_LOG_INFO, "SwScaler: Bicubic spline scaler, ");
+            av_log(c, AV_LOG_INFO, "Bicubic spline scaler, ");
         else
-            av_log(c, AV_LOG_INFO, "SwScaler: ehh flags invalid?! ");
+            av_log(c, AV_LOG_INFO, "ehh flags invalid?! ");
 
         if (dstFormat==PIX_FMT_BGR555 || dstFormat==PIX_FMT_BGR565)
             av_log(c, AV_LOG_INFO, "from %s to%s %s ",
@@ -2455,70 +2455,70 @@
         if (flags & SWS_CPU_CAPS_MMX)
         {
             if (c->canMMX2BeUsed && (flags&SWS_FAST_BILINEAR))
-                av_log(c, AV_LOG_VERBOSE, "SwScaler: using FAST_BILINEAR MMX2 scaler for horizontal scaling\n");
+                av_log(c, AV_LOG_VERBOSE, "using FAST_BILINEAR MMX2 scaler for horizontal scaling\n");
             else
             {
                 if (c->hLumFilterSize==4)
-                    av_log(c, AV_LOG_VERBOSE, "SwScaler: using 4-tap MMX scaler for horizontal luminance scaling\n");
+                    av_log(c, AV_LOG_VERBOSE, "using 4-tap MMX scaler for horizontal luminance scaling\n");
                 else if (c->hLumFilterSize==8)
-                    av_log(c, AV_LOG_VERBOSE, "SwScaler: using 8-tap MMX scaler for horizontal luminance scaling\n");
+                    av_log(c, AV_LOG_VERBOSE, "using 8-tap MMX scaler for horizontal luminance scaling\n");
                 else
-                    av_log(c, AV_LOG_VERBOSE, "SwScaler: using n-tap MMX scaler for horizontal luminance scaling\n");
+                    av_log(c, AV_LOG_VERBOSE, "using n-tap MMX scaler for horizontal luminance scaling\n");
 
                 if (c->hChrFilterSize==4)
-                    av_log(c, AV_LOG_VERBOSE, "SwScaler: using 4-tap MMX scaler for horizontal chrominance scaling\n");
+                    av_log(c, AV_LOG_VERBOSE, "using 4-tap MMX scaler for horizontal chrominance scaling\n");
                 else if (c->hChrFilterSize==8)
-                    av_log(c, AV_LOG_VERBOSE, "SwScaler: using 8-tap MMX scaler for horizontal chrominance scaling\n");
+                    av_log(c, AV_LOG_VERBOSE, "using 8-tap MMX scaler for horizontal chrominance scaling\n");
                 else
-                    av_log(c, AV_LOG_VERBOSE, "SwScaler: using n-tap MMX scaler for horizontal chrominance scaling\n");
+                    av_log(c, AV_LOG_VERBOSE, "using n-tap MMX scaler for horizontal chrominance scaling\n");
             }
         }
         else
         {
 #if defined(ARCH_X86)
-            av_log(c, AV_LOG_VERBOSE, "SwScaler: using X86-Asm scaler for horizontal scaling\n");
+            av_log(c, AV_LOG_VERBOSE, "using X86-Asm scaler for horizontal scaling\n");
 #else
             if (flags & SWS_FAST_BILINEAR)
-                av_log(c, AV_LOG_VERBOSE, "SwScaler: using FAST_BILINEAR C scaler for horizontal scaling\n");
+                av_log(c, AV_LOG_VERBOSE, "using FAST_BILINEAR C scaler for horizontal scaling\n");
             else
-                av_log(c, AV_LOG_VERBOSE, "SwScaler: using C scaler for horizontal scaling\n");
+                av_log(c, AV_LOG_VERBOSE, "using C scaler for horizontal scaling\n");
 #endif
         }
         if (isPlanarYUV(dstFormat))
         {
             if (c->vLumFilterSize==1)
-                av_log(c, AV_LOG_VERBOSE, "SwScaler: using 1-tap %s \"scaler\" for vertical scaling (YV12 like)\n", (flags & SWS_CPU_CAPS_MMX) ? "MMX" : "C");
+                av_log(c, AV_LOG_VERBOSE, "using 1-tap %s \"scaler\" for vertical scaling (YV12 like)\n", (flags & SWS_CPU_CAPS_MMX) ? "MMX" : "C");
             else
-                av_log(c, AV_LOG_VERBOSE, "SwScaler: using n-tap %s scaler for vertical scaling (YV12 like)\n", (flags & SWS_CPU_CAPS_MMX) ? "MMX" : "C");
+                av_log(c, AV_LOG_VERBOSE, "using n-tap %s scaler for vertical scaling (YV12 like)\n", (flags & SWS_CPU_CAPS_MMX) ? "MMX" : "C");
         }
         else
         {
             if (c->vLumFilterSize==1 && c->vChrFilterSize==2)
-                av_log(c, AV_LOG_VERBOSE, "SwScaler: using 1-tap %s \"scaler\" for vertical luminance scaling (BGR)\n"
-                       "SwScaler:       2-tap scaler for vertical chrominance scaling (BGR)\n",(flags & SWS_CPU_CAPS_MMX) ? "MMX" : "C");
+                av_log(c, AV_LOG_VERBOSE, "using 1-tap %s \"scaler\" for vertical luminance scaling (BGR)\n"
+                       "      2-tap scaler for vertical chrominance scaling (BGR)\n", (flags & SWS_CPU_CAPS_MMX) ? "MMX" : "C");
             else if (c->vLumFilterSize==2 && c->vChrFilterSize==2)
-                av_log(c, AV_LOG_VERBOSE, "SwScaler: using 2-tap linear %s scaler for vertical scaling (BGR)\n", (flags & SWS_CPU_CAPS_MMX) ? "MMX" : "C");
+                av_log(c, AV_LOG_VERBOSE, "using 2-tap linear %s scaler for vertical scaling (BGR)\n", (flags & SWS_CPU_CAPS_MMX) ? "MMX" : "C");
             else
-                av_log(c, AV_LOG_VERBOSE, "SwScaler: using n-tap %s scaler for vertical scaling (BGR)\n", (flags & SWS_CPU_CAPS_MMX) ? "MMX" : "C");
+                av_log(c, AV_LOG_VERBOSE, "using n-tap %s scaler for vertical scaling (BGR)\n", (flags & SWS_CPU_CAPS_MMX) ? "MMX" : "C");
         }
 
         if (dstFormat==PIX_FMT_BGR24)
-            av_log(c, AV_LOG_VERBOSE, "SwScaler: using %s YV12->BGR24 Converter\n",
+            av_log(c, AV_LOG_VERBOSE, "using %s YV12->BGR24 Converter\n",
                    (flags & SWS_CPU_CAPS_MMX2) ? "MMX2" : ((flags & SWS_CPU_CAPS_MMX) ? "MMX" : "C"));
         else if (dstFormat==PIX_FMT_RGB32)
-            av_log(c, AV_LOG_VERBOSE, "SwScaler: using %s YV12->BGR32 Converter\n", (flags & SWS_CPU_CAPS_MMX) ? "MMX" : "C");
+            av_log(c, AV_LOG_VERBOSE, "using %s YV12->BGR32 Converter\n", (flags & SWS_CPU_CAPS_MMX) ? "MMX" : "C");
         else if (dstFormat==PIX_FMT_BGR565)
-            av_log(c, AV_LOG_VERBOSE, "SwScaler: using %s YV12->BGR16 Converter\n", (flags & SWS_CPU_CAPS_MMX) ? "MMX" : "C");
+            av_log(c, AV_LOG_VERBOSE, "using %s YV12->BGR16 Converter\n", (flags & SWS_CPU_CAPS_MMX) ? "MMX" : "C");
         else if (dstFormat==PIX_FMT_BGR555)
-            av_log(c, AV_LOG_VERBOSE, "SwScaler: using %s YV12->BGR15 Converter\n", (flags & SWS_CPU_CAPS_MMX) ? "MMX" : "C");
+            av_log(c, AV_LOG_VERBOSE, "using %s YV12->BGR15 Converter\n", (flags & SWS_CPU_CAPS_MMX) ? "MMX" : "C");
 
-        av_log(c, AV_LOG_VERBOSE, "SwScaler: %dx%d -> %dx%d\n", srcW, srcH, dstW, dstH);
+        av_log(c, AV_LOG_VERBOSE, "%dx%d -> %dx%d\n", srcW, srcH, dstW, dstH);
     }
     if (flags & SWS_PRINT_INFO)
     {
-        av_log(c, AV_LOG_DEBUG, "SwScaler:Lum srcW=%d srcH=%d dstW=%d dstH=%d xInc=%d yInc=%d\n",
+        av_log(c, AV_LOG_DEBUG, "Lum srcW=%d srcH=%d dstW=%d dstH=%d xInc=%d yInc=%d\n",
                c->srcW, c->srcH, c->dstW, c->dstH, c->lumXInc, c->lumYInc);
-        av_log(c, AV_LOG_DEBUG, "SwScaler:Chr srcW=%d srcH=%d dstW=%d dstH=%d xInc=%d yInc=%d\n",
+        av_log(c, AV_LOG_DEBUG, "Chr srcW=%d srcH=%d dstW=%d dstH=%d xInc=%d yInc=%d\n",
                c->chrSrcW, c->chrSrcH, c->chrDstW, c->chrDstH, c->chrXInc, c->chrYInc);
     }
 
@@ -2527,7 +2527,7 @@
 }
 
 /**
- * swscale warper, so we don't need to export the SwsContext.
+ * swscale wrapper, so we don't need to export the SwsContext.
  * assumes planar YUV to be in YUV order instead of YVU
  */
 int sws_scale(SwsContext *c, uint8_t* src[], int srcStride[], int srcSliceY,
@@ -2536,7 +2536,7 @@
     uint8_t* src2[4]= {src[0], src[1], src[2]};
     uint32_t pal[256];
     if (c->sliceDir == 0 && srcSliceY != 0 && srcSliceY + srcSliceH != c->srcH) {
-        av_log(c, AV_LOG_ERROR, "swScaler: slices start in the middle!\n");
+        av_log(c, AV_LOG_ERROR, "Slices start in the middle!\n");
         return 0;
     }
     if (c->sliceDir == 0) {
@@ -2581,7 +2581,7 @@
 }
 
 /**
- * swscale warper, so we don't need to export the SwsContext
+ * swscale wrapper, so we don't need to export the SwsContext
  */
 int sws_scale_ordered(SwsContext *c, uint8_t* src[], int srcStride[], int srcSliceY,
                       int srcSliceH, uint8_t* dst[], int dstStride[]){
@@ -2663,7 +2663,7 @@
     for (i=0; i<length; i++)
     {
         double dist= i-middle;
-        coeff[i]= exp( -dist*dist/(2*variance*variance) ) / sqrt(2*variance*PI);
+        coeff[i]= exp(-dist*dist/(2*variance*variance)) / sqrt(2*variance*PI);
     }
 
     sws_normalizeVec(vec, 1.0);
@@ -2965,18 +2965,23 @@
                                         int dstW, int dstH, int dstFormat, int flags,
                                         SwsFilter *srcFilter, SwsFilter *dstFilter, double *param)
 {
-    if (context != NULL) {
-        if ((context->srcW != srcW) || (context->srcH != srcH) ||
-            (context->srcFormat != srcFormat) ||
-            (context->dstW != dstW) || (context->dstH != dstH) ||
-            (context->dstFormat != dstFormat) || (context->flags != flags) ||
-            (context->param != param))
+    static const double default_param[2] = {SWS_PARAM_DEFAULT, SWS_PARAM_DEFAULT};
+
+    if (!param)
+        param = default_param;
+
+    if (context) {
+        if (context->srcW != srcW || context->srcH != srcH ||
+            context->srcFormat != srcFormat ||
+            context->dstW != dstW || context->dstH != dstH ||
+            context->dstFormat != dstFormat || context->flags != flags ||
+            context->param[0] != param[0] || context->param[1] != param[1])
         {
             sws_freeContext(context);
             context = NULL;
         }
     }
-    if (context == NULL) {
+    if (!context) {
         return sws_getContext(srcW, srcH, srcFormat,
                               dstW, dstH, dstFormat, flags,
                               srcFilter, dstFilter, param);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale.h	2008-03-21 06:48:49 UTC (rev 3911)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale.h	2008-03-21 06:51:32 UTC (rev 3912)
@@ -18,11 +18,8 @@
  * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
  */
 
-#ifndef SWSCALE_H
-#define SWSCALE_H
-#ifdef __cplusplus
-extern "C" {
-#endif
+#ifndef FFMPEG_SWSCALE_H
+#define FFMPEG_SWSCALE_H
 
 /**
  * @file swscale.h
@@ -30,13 +27,18 @@
  *     external api for the swscale stuff
  */
 
-#include "avutil.h"
+#include "libavutil/avutil.h"
 
-#define AV_STRINGIFY(s)         AV_TOSTRING(s)
-#define AV_TOSTRING(s) #s
+#define LIBSWSCALE_VERSION_MAJOR 0
+#define LIBSWSCALE_VERSION_MINOR 5
+#define LIBSWSCALE_VERSION_MICRO 1
 
-#define LIBSWSCALE_VERSION_INT  ((0<<16)+(5<<8)+0)
-#define LIBSWSCALE_VERSION      0.5.0
+#define LIBSWSCALE_VERSION_INT  AV_VERSION_INT(LIBSWSCALE_VERSION_MAJOR, \
+                                               LIBSWSCALE_VERSION_MINOR, \
+                                               LIBSWSCALE_VERSION_MICRO)
+#define LIBSWSCALE_VERSION      AV_VERSION(LIBSWSCALE_VERSION_MAJOR, \
+                                           LIBSWSCALE_VERSION_MINOR, \
+                                           LIBSWSCALE_VERSION_MICRO)
 #define LIBSWSCALE_BUILD        LIBSWSCALE_VERSION_INT
 
 #define LIBSWSCALE_IDENT        "SwS" AV_STRINGIFY(LIBSWSCALE_VERSION)
@@ -140,8 +142,5 @@
                                         int srcW, int srcH, int srcFormat,
                                         int dstW, int dstH, int dstFormat, int flags,
                                         SwsFilter *srcFilter, SwsFilter *dstFilter, double *param);
-#ifdef __cplusplus
-}
-#endif
 
-#endif
+#endif /* FFMPEG_SWSCALE_H */

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale_altivec_template.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale_altivec_template.c	2008-03-21 06:48:49 UTC (rev 3911)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale_altivec_template.c	2008-03-21 06:51:32 UTC (rev 3912)
@@ -2,7 +2,7 @@
  * AltiVec-enhanced yuv2yuvX
  *
  * Copyright (C) 2004 Romain Dolbeau <romain at dolbeau.org>
- * based on the equivalent C code in "postproc/swscale.c"
+ * based on the equivalent C code in swscale.c
  *
  * This file is part of FFmpeg.
  *
@@ -21,22 +21,16 @@
  * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
  */
 
-#ifdef CONFIG_DARWIN
-#define AVV(x...) (x)
-#else
-#define AVV(x...) {x}
-#endif
-
 #define vzero vec_splat_s32(0)
 
 static inline void
 altivec_packIntArrayToCharArray(int *val, uint8_t* dest, int dstW) {
     register int i;
     vector unsigned int altivec_vectorShiftInt19 =
-        vec_add(vec_splat_u32(10),vec_splat_u32(9));
+        vec_add(vec_splat_u32(10), vec_splat_u32(9));
     if ((unsigned long)dest % 16) {
-        /* badly aligned store, we force store alignement */
-        /* and will handle load misalignement on val w/ vec_perm */
+        /* badly aligned store, we force store alignment */
+        /* and will handle load misalignment on val w/ vec_perm */
         vector unsigned char perm1;
         vector signed int v1;
         for (i = 0 ; (i < dstW) &&
@@ -52,10 +46,10 @@
             vector signed int v3 = vec_ld(offset + 32, val);
             vector signed int v4 = vec_ld(offset + 48, val);
             vector signed int v5 = vec_ld(offset + 64, val);
-            vector signed int v12 = vec_perm(v1,v2,perm1);
-            vector signed int v23 = vec_perm(v2,v3,perm1);
-            vector signed int v34 = vec_perm(v3,v4,perm1);
-            vector signed int v45 = vec_perm(v4,v5,perm1);
+            vector signed int v12 = vec_perm(v1, v2, perm1);
+            vector signed int v23 = vec_perm(v2, v3, perm1);
+            vector signed int v34 = vec_perm(v3, v4, perm1);
+            vector signed int v45 = vec_perm(v4, v5, perm1);
 
             vector signed int vA = vec_sra(v12, altivec_vectorShiftInt19);
             vector signed int vB = vec_sra(v23, altivec_vectorShiftInt19);
@@ -143,7 +137,7 @@
                 val[i] += lumSrc[j][i] * lumFilter[j];
             }
         }
-        altivec_packIntArrayToCharArray(val,dest,dstW);
+        altivec_packIntArrayToCharArray(val, dest, dstW);
     }
     if (uDest != 0) {
         int  __attribute__ ((aligned (16))) u[chrDstW];
@@ -209,8 +203,8 @@
                 v[i] += chrSrc[j][i + 2048] * chrFilter[j];
             }
         }
-        altivec_packIntArrayToCharArray(u,uDest,chrDstW);
-        altivec_packIntArrayToCharArray(v,vDest,chrDstW);
+        altivec_packIntArrayToCharArray(u, uDest, chrDstW);
+        altivec_packIntArrayToCharArray(v, vDest, chrDstW);
     }
 }
 
@@ -258,9 +252,9 @@
         // and we're going to use vec_mule, so we chose
         // carefully how to "unpack" the elements into the even slots
         if ((i << 3) % 16)
-            filter_v = vec_mergel(filter_v,(vector signed short)vzero);
+            filter_v = vec_mergel(filter_v, (vector signed short)vzero);
         else
-            filter_v = vec_mergeh(filter_v,(vector signed short)vzero);
+            filter_v = vec_mergeh(filter_v, (vector signed short)vzero);
 
         val_vEven = vec_mule(src_v, filter_v);
         val_s = vec_sums(val_vEven, vzero);
@@ -360,7 +354,7 @@
             src_v0 = src_v1;
         }
 
-        if (j < (filterSize-7)) {
+        if (j < filterSize-7) {
             // loading src_v0 is useless, it's already done above
             //vector unsigned char src_v0 = vec_ld(srcPos + j, src);
             vector unsigned char src_v1, src_vF;
@@ -393,7 +387,7 @@
 static inline int yv12toyuy2_unscaled_altivec(SwsContext *c, uint8_t* src[], int srcStride[], int srcSliceY,
                                               int srcSliceH, uint8_t* dstParam[], int dstStride_a[]) {
     uint8_t *dst=dstParam[0] + dstStride_a[0]*srcSliceY;
-    // yv12toyuy2( src[0],src[1],src[2],dst,c->srcW,srcSliceH,srcStride[0],srcStride[1],dstStride[0] );
+    // yv12toyuy2(src[0], src[1], src[2], dst, c->srcW, srcSliceH, srcStride[0], srcStride[1], dstStride[0]);
     uint8_t *ysrc = src[0];
     uint8_t *usrc = src[1];
     uint8_t *vsrc = src[2];
@@ -407,7 +401,7 @@
     register unsigned int y;
 
     if (width&15) {
-        yv12toyuy2( ysrc, usrc, vsrc, dst,c->srcW,srcSliceH, lumStride, chromStride, dstStride);
+        yv12toyuy2(ysrc, usrc, vsrc, dst, c->srcW, srcSliceH, lumStride, chromStride, dstStride);
         return srcSliceH;
     }
 
@@ -456,7 +450,7 @@
             vec_st(v_yuy2_0, (i << 1), dst);
             vec_st(v_yuy2_1, (i << 1) + 16, dst);
         }
-        if ( (y&(vertLumPerChroma-1))==(vertLumPerChroma-1) ) {
+        if ((y&(vertLumPerChroma-1)) == vertLumPerChroma-1) {
             usrc += chromStride;
             vsrc += chromStride;
         }
@@ -470,7 +464,7 @@
 static inline int yv12touyvy_unscaled_altivec(SwsContext *c, uint8_t* src[], int srcStride[], int srcSliceY,
                                               int srcSliceH, uint8_t* dstParam[], int dstStride_a[]) {
     uint8_t *dst=dstParam[0] + dstStride_a[0]*srcSliceY;
-    // yv12toyuy2( src[0],src[1],src[2],dst,c->srcW,srcSliceH,srcStride[0],srcStride[1],dstStride[0] );
+    // yv12toyuy2(src[0], src[1], src[2], dst, c->srcW, srcSliceH, srcStride[0], srcStride[1], dstStride[0]);
     uint8_t *ysrc = src[0];
     uint8_t *usrc = src[1];
     uint8_t *vsrc = src[2];
@@ -484,7 +478,7 @@
     register unsigned int y;
 
     if (width&15) {
-        yv12touyvy( ysrc, usrc, vsrc, dst,c->srcW,srcSliceH, lumStride, chromStride, dstStride);
+        yv12touyvy(ysrc, usrc, vsrc, dst, c->srcW, srcSliceH, lumStride, chromStride, dstStride);
         return srcSliceH;
     }
 
@@ -533,7 +527,7 @@
             vec_st(v_uyvy_0, (i << 1), dst);
             vec_st(v_uyvy_1, (i << 1) + 16, dst);
         }
-        if ( (y&(vertLumPerChroma-1))==(vertLumPerChroma-1) ) {
+        if ((y&(vertLumPerChroma-1)) == vertLumPerChroma-1) {
             usrc += chromStride;
             vsrc += chromStride;
         }

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale_internal.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale_internal.h	2008-03-21 06:48:49 UTC (rev 3911)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale_internal.h	2008-03-21 06:51:32 UTC (rev 3912)
@@ -18,23 +18,22 @@
  * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
  */
 
-#ifndef SWSCALE_INTERNAL_H
-#define SWSCALE_INTERNAL_H
+#ifndef FFMPEG_SWSCALE_INTERNAL_H
+#define FFMPEG_SWSCALE_INTERNAL_H
 
+#include "config.h"
+
 #ifdef HAVE_ALTIVEC_H
 #include <altivec.h>
 #endif
 
 #include "avutil.h"
 
-#ifdef CONFIG_DARWIN
-#define AVV(x...) (x)
-#else
-#define AVV(x...) {x}
-#endif
-
 #define MAX_FILTER_SIZE 256
 
+#define VOFW 2048
+#define VOF  (VOFW*2)
+
 typedef int (*SwsFunc)(struct SwsContext *context, uint8_t* src[], int srcStride[], int srcSliceY,
              int srcSliceH, uint8_t* dst[], int dstStride[]);
 
@@ -43,11 +42,11 @@
     /**
      * info on struct for av_log
      */
-    AVClass *av_class;
+    const AVClass *av_class;
 
     /**
-     *
-     * Note the src,dst,srcStride,dstStride will be copied, in the sws_scale() warper so they can freely be modified here
+     * Note that src, dst, srcStride, dstStride will be copied in the
+     * sws_scale() wrapper so they can be freely modified here.
      */
     SwsFunc swScale;
     int srcW, srcH, dstH;
@@ -74,7 +73,7 @@
     int16_t *vChrFilter;
     int16_t *vChrFilterPos;
 
-    uint8_t formatConvBuffer[4000]; //FIXME dynamic alloc, but we have to change a lot of code for this to be useful
+    uint8_t formatConvBuffer[VOF]; //FIXME dynamic alloc, but we have to change a lot of code for this to be useful
 
     int hLumFilterSize;
     int hChrFilterSize;
@@ -177,6 +176,9 @@
     uint32_t gmask        __attribute__((aligned(4)));
 #endif
 
+#ifdef HAVE_VIS
+    uint64_t sparc_coeffs[10] __attribute__((aligned(8)));
+#endif
 
 } SwsContext;
 //FIXME check init (where 0)
@@ -184,8 +186,15 @@
 SwsFunc yuv2rgb_get_func_ptr (SwsContext *c);
 int yuv2rgb_c_init_tables (SwsContext *c, const int inv_table[4], int fullRange, int brightness, int contrast, int saturation);
 
-char *sws_format_name(int format);
+void yuv2rgb_altivec_init_tables (SwsContext *c, const int inv_table[4],int brightness,int contrast, int saturation);
+SwsFunc yuv2rgb_init_altivec (SwsContext *c);
+void altivec_yuv2packedX (SwsContext *c,
+                          int16_t *lumFilter, int16_t **lumSrc, int lumFilterSize,
+                          int16_t *chrFilter, int16_t **chrSrc, int chrFilterSize,
+                          uint8_t *dest, int dstW, int dstY);
 
+const char *sws_format_name(int format);
+
 //FIXME replace this with something faster
 #define isPlanarYUV(x)  (           \
            (x)==PIX_FMT_YUV410P     \
@@ -193,6 +202,7 @@
         || (x)==PIX_FMT_YUV411P     \
         || (x)==PIX_FMT_YUV422P     \
         || (x)==PIX_FMT_YUV444P     \
+        || (x)==PIX_FMT_YUV440P     \
         || (x)==PIX_FMT_NV12        \
         || (x)==PIX_FMT_NV21        \
     )
@@ -265,4 +275,7 @@
     }
 }
 
-#endif
+extern const DECLARE_ALIGNED(8, uint64_t, ff_dither4[2]);
+extern const DECLARE_ALIGNED(8, uint64_t, ff_dither8[2]);
+
+#endif /* FFMPEG_SWSCALE_INTERNAL_H */

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale_template.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale_template.c	2008-03-21 06:48:49 UTC (rev 3911)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale_template.c	2008-03-21 06:51:32 UTC (rev 3912)
@@ -39,7 +39,7 @@
 #ifdef HAVE_3DNOW
 #define PREFETCH  "prefetch"
 #define PREFETCHW "prefetchw"
-#elif defined ( HAVE_MMX2 )
+#elif defined (HAVE_MMX2)
 #define PREFETCH "prefetchnta"
 #define PREFETCHW "prefetcht0"
 #else
@@ -80,8 +80,8 @@
     ASMALIGN(4) /* FIXME Unroll? */\
     "1:                                                 \n\t"\
     "movq                      8(%%"REG_d"), %%mm0      \n\t" /* filterCoeff */\
-    "movq   " #x "(%%"REG_S", %%"REG_a", 2), %%mm2      \n\t" /* srcData */\
-    "movq 8+" #x "(%%"REG_S", %%"REG_a", 2), %%mm5      \n\t" /* srcData */\
+    "movq   "  x "(%%"REG_S", %%"REG_a", 2), %%mm2      \n\t" /* srcData */\
+    "movq 8+"  x "(%%"REG_S", %%"REG_a", 2), %%mm5      \n\t" /* srcData */\
     "add                                $16, %%"REG_d"  \n\t"\
     "mov                        (%%"REG_d"), %%"REG_S"  \n\t"\
     "test                         %%"REG_S", %%"REG_S"  \n\t"\
@@ -117,10 +117,10 @@
     "mov                        (%%"REG_d"), %%"REG_S"  \n\t"\
     ASMALIGN(4) \
     "1:                                                 \n\t"\
-    "movq   " #x "(%%"REG_S", %%"REG_a", 2), %%mm0      \n\t" /* srcData */\
-    "movq 8+" #x "(%%"REG_S", %%"REG_a", 2), %%mm2      \n\t" /* srcData */\
+    "movq   "  x "(%%"REG_S", %%"REG_a", 2), %%mm0      \n\t" /* srcData */\
+    "movq 8+"  x "(%%"REG_S", %%"REG_a", 2), %%mm2      \n\t" /* srcData */\
     "mov                       4(%%"REG_d"), %%"REG_S"  \n\t"\
-    "movq   " #x "(%%"REG_S", %%"REG_a", 2), %%mm1      \n\t" /* srcData */\
+    "movq   "  x "(%%"REG_S", %%"REG_a", 2), %%mm1      \n\t" /* srcData */\
     "movq                             %%mm0, %%mm3      \n\t"\
     "punpcklwd                        %%mm1, %%mm0      \n\t"\
     "punpckhwd                        %%mm1, %%mm3      \n\t"\
@@ -129,7 +129,7 @@
     "pmaddwd                          %%mm1, %%mm3      \n\t"\
     "paddd                            %%mm0, %%mm4      \n\t"\
     "paddd                            %%mm3, %%mm5      \n\t"\
-    "movq 8+" #x "(%%"REG_S", %%"REG_a", 2), %%mm3      \n\t" /* srcData */\
+    "movq 8+"  x "(%%"REG_S", %%"REG_a", 2), %%mm3      \n\t" /* srcData */\
     "mov                      16(%%"REG_d"), %%"REG_S"  \n\t"\
     "add                                $16, %%"REG_d"  \n\t"\
     "test                         %%"REG_S", %%"REG_S"  \n\t"\
@@ -202,7 +202,7 @@
     "2:                                             \n\t"\
     "movq               8(%%"REG_d"), %%mm0         \n\t" /* filterCoeff */\
     "movq     (%%"REG_S", %%"REG_a"), %%mm2         \n\t" /* UsrcData */\
-    "movq 4096(%%"REG_S", %%"REG_a"), %%mm5         \n\t" /* VsrcData */\
+    "movq "AV_STRINGIFY(VOF)"(%%"REG_S", %%"REG_a"), %%mm5         \n\t" /* VsrcData */\
     "add                         $16, %%"REG_d"     \n\t"\
     "mov                 (%%"REG_d"), %%"REG_S"     \n\t"\
     "pmulhw                    %%mm0, %%mm2         \n\t"\
@@ -252,7 +252,7 @@
     ASMALIGN(4)\
     "2:                                             \n\t"\
     "movq     (%%"REG_S", %%"REG_a"), %%mm0         \n\t" /* UsrcData */\
-    "movq 4096(%%"REG_S", %%"REG_a"), %%mm2         \n\t" /* VsrcData */\
+    "movq "AV_STRINGIFY(VOF)"(%%"REG_S", %%"REG_a"), %%mm2         \n\t" /* VsrcData */\
     "mov                4(%%"REG_d"), %%"REG_S"     \n\t"\
     "movq     (%%"REG_S", %%"REG_a"), %%mm1         \n\t" /* UsrcData */\
     "movq                      %%mm0, %%mm3         \n\t"\
@@ -263,7 +263,7 @@
     "pmaddwd                   %%mm1, %%mm3         \n\t"\
     "paddd                     %%mm0, %%mm4         \n\t"\
     "paddd                     %%mm3, %%mm5         \n\t"\
-    "movq 4096(%%"REG_S", %%"REG_a"), %%mm3         \n\t" /* VsrcData */\
+    "movq "AV_STRINGIFY(VOF)"(%%"REG_S", %%"REG_a"), %%mm3         \n\t" /* VsrcData */\
     "mov               16(%%"REG_d"), %%"REG_S"     \n\t"\
     "add                         $16, %%"REG_d"     \n\t"\
     "test                  %%"REG_S", %%"REG_S"     \n\t"\
@@ -388,10 +388,10 @@
     "pmulhw               %%mm6, %%mm0  \n\t" /* (buf0[eax] - buf1[eax])yalpha1>>16*/\
     "pmulhw               %%mm5, %%mm2  \n\t" /* (uvbuf0[eax] - uvbuf1[eax])uvalpha1>>16*/\
     "psraw                   $4, %%mm1  \n\t" /* buf0[eax] - buf1[eax] >>4*/\
-    "movq 4096(%2, %%"REG_a",2), %%mm4  \n\t" /* uvbuf0[eax+2048]*/\
+    "movq "AV_STRINGIFY(VOF)"(%2, %%"REG_a",2), %%mm4  \n\t" /* uvbuf0[eax+2048]*/\
     "psraw                   $4, %%mm3  \n\t" /* uvbuf0[eax] - uvbuf1[eax] >>4*/\
     "paddw                %%mm0, %%mm1  \n\t" /* buf0[eax]yalpha1 + buf1[eax](1-yalpha1) >>16*/\
-    "movq 4096(%3, %%"REG_a",2), %%mm0  \n\t" /* uvbuf1[eax+2048]*/\
+    "movq "AV_STRINGIFY(VOF)"(%3, %%"REG_a",2), %%mm0  \n\t" /* uvbuf1[eax+2048]*/\
     "paddw                %%mm2, %%mm3  \n\t" /* uvbuf0[eax]uvalpha1 - uvbuf1[eax](1-uvalpha1)*/\
     "psubw                %%mm0, %%mm4  \n\t" /* uvbuf0[eax+2048] - uvbuf1[eax+2048]*/\
     "psubw        "MANGLE(w80)", %%mm1  \n\t" /* 8(Y-16)*/\
@@ -434,8 +434,8 @@
     "1:                                 \n\t"\
     "movq     (%2, "#index"), %%mm2     \n\t" /* uvbuf0[eax]*/\
     "movq     (%3, "#index"), %%mm3     \n\t" /* uvbuf1[eax]*/\
-    "movq 4096(%2, "#index"), %%mm5     \n\t" /* uvbuf0[eax+2048]*/\
-    "movq 4096(%3, "#index"), %%mm4     \n\t" /* uvbuf1[eax+2048]*/\
+    "movq "AV_STRINGIFY(VOF)"(%2, "#index"), %%mm5     \n\t" /* uvbuf0[eax+2048]*/\
+    "movq "AV_STRINGIFY(VOF)"(%3, "#index"), %%mm4     \n\t" /* uvbuf1[eax+2048]*/\
     "psubw             %%mm3, %%mm2     \n\t" /* uvbuf0[eax] - uvbuf1[eax]*/\
     "psubw             %%mm4, %%mm5     \n\t" /* uvbuf0[eax+2048] - uvbuf1[eax+2048]*/\
     "movq "CHR_MMX_FILTER_OFFSET"+8("#c"), %%mm0    \n\t"\
@@ -466,8 +466,8 @@
     "1:                                 \n\t"\
     "movq     (%2, "#index"), %%mm2     \n\t" /* uvbuf0[eax]*/\
     "movq     (%3, "#index"), %%mm3     \n\t" /* uvbuf1[eax]*/\
-    "movq 4096(%2, "#index"), %%mm5     \n\t" /* uvbuf0[eax+2048]*/\
-    "movq 4096(%3, "#index"), %%mm4     \n\t" /* uvbuf1[eax+2048]*/\
+    "movq "AV_STRINGIFY(VOF)"(%2, "#index"), %%mm5     \n\t" /* uvbuf0[eax+2048]*/\
+    "movq "AV_STRINGIFY(VOF)"(%3, "#index"), %%mm4     \n\t" /* uvbuf1[eax+2048]*/\
     "psubw             %%mm3, %%mm2     \n\t" /* uvbuf0[eax] - uvbuf1[eax]*/\
     "psubw             %%mm4, %%mm5     \n\t" /* uvbuf0[eax+2048] - uvbuf1[eax+2048]*/\
     "movq "CHR_MMX_FILTER_OFFSET"+8("#c"), %%mm0    \n\t"\
@@ -531,7 +531,7 @@
     ASMALIGN(4)\
     "1:                                 \n\t"\
     "movq     (%2, "#index"), %%mm3     \n\t" /* uvbuf0[eax]*/\
-    "movq 4096(%2, "#index"), %%mm4     \n\t" /* uvbuf0[eax+2048]*/\
+    "movq "AV_STRINGIFY(VOF)"(%2, "#index"), %%mm4     \n\t" /* uvbuf0[eax+2048]*/\
     "psraw                $7, %%mm3     \n\t" \
     "psraw                $7, %%mm4     \n\t" \
     "movq  (%0, "#index", 2), %%mm1     \n\t" /*buf0[eax]*/\
@@ -546,7 +546,7 @@
     ASMALIGN(4)\
     "1:                                 \n\t"\
     "movq     (%2, "#index"), %%mm3     \n\t" /* uvbuf0[eax]*/\
-    "movq 4096(%2, "#index"), %%mm4     \n\t" /* uvbuf0[eax+2048]*/\
+    "movq "AV_STRINGIFY(VOF)"(%2, "#index"), %%mm4     \n\t" /* uvbuf0[eax+2048]*/\
     "psraw                $4, %%mm3     \n\t" /* uvbuf0[eax] - uvbuf1[eax] >>4*/\
     "psraw                $4, %%mm4     \n\t" /* uvbuf0[eax+2048] - uvbuf1[eax+2048] >>4*/\
     "psubw  "U_OFFSET"("#c"), %%mm3     \n\t" /* (U-128)8*/\
@@ -596,8 +596,8 @@
     "1:                                 \n\t"\
     "movq     (%2, "#index"), %%mm2     \n\t" /* uvbuf0[eax]*/\
     "movq     (%3, "#index"), %%mm3     \n\t" /* uvbuf1[eax]*/\
-    "movq 4096(%2, "#index"), %%mm5     \n\t" /* uvbuf0[eax+2048]*/\
-    "movq 4096(%3, "#index"), %%mm4     \n\t" /* uvbuf1[eax+2048]*/\
+    "movq "AV_STRINGIFY(VOF)"(%2, "#index"), %%mm5     \n\t" /* uvbuf0[eax+2048]*/\
+    "movq "AV_STRINGIFY(VOF)"(%3, "#index"), %%mm4     \n\t" /* uvbuf1[eax+2048]*/\
     "paddw             %%mm2, %%mm3     \n\t" /* uvbuf0[eax] + uvbuf1[eax]*/\
     "paddw             %%mm5, %%mm4     \n\t" /* uvbuf0[eax+2048] + uvbuf1[eax+2048]*/\
     "psrlw                $8, %%mm3     \n\t" \
@@ -615,8 +615,8 @@
     "1:                                 \n\t"\
     "movq     (%2, "#index"), %%mm2     \n\t" /* uvbuf0[eax]*/\
     "movq     (%3, "#index"), %%mm3     \n\t" /* uvbuf1[eax]*/\
-    "movq 4096(%2, "#index"), %%mm5     \n\t" /* uvbuf0[eax+2048]*/\
-    "movq 4096(%3, "#index"), %%mm4     \n\t" /* uvbuf1[eax+2048]*/\
+    "movq "AV_STRINGIFY(VOF)"(%2, "#index"), %%mm5     \n\t" /* uvbuf0[eax+2048]*/\
+    "movq "AV_STRINGIFY(VOF)"(%3, "#index"), %%mm4     \n\t" /* uvbuf1[eax+2048]*/\
     "paddw             %%mm2, %%mm3     \n\t" /* uvbuf0[eax] + uvbuf1[eax]*/\
     "paddw             %%mm5, %%mm4     \n\t" /* uvbuf0[eax+2048] + uvbuf1[eax+2048]*/\
     "psrlw                $5, %%mm3     \n\t" /*FIXME might overflow*/\
@@ -855,8 +855,8 @@
 
 #define WRITEBGR24MMX2(dst, dstw, index) \
     /* mm2=B, %%mm4=G, %%mm5=R, %%mm7=0 */\
-    "movq "MANGLE(M24A)", %%mm0 \n\t"\
-    "movq "MANGLE(M24C)", %%mm7 \n\t"\
+    "movq "MANGLE(ff_M24A)", %%mm0 \n\t"\
+    "movq "MANGLE(ff_M24C)", %%mm7 \n\t"\
     "pshufw $0x50, %%mm2, %%mm1 \n\t" /* B3 B2 B3 B2  B1 B0 B1 B0 */\
     "pshufw $0x50, %%mm4, %%mm3 \n\t" /* G3 G2 G3 G2  G1 G0 G1 G0 */\
     "pshufw $0x00, %%mm5, %%mm6 \n\t" /* R1 R0 R1 R0  R1 R0 R1 R0 */\
@@ -875,7 +875,7 @@
     "pshufw $0x55, %%mm4, %%mm3 \n\t" /* G4 G3 G4 G3  G4 G3 G4 G3 */\
     "pshufw $0xA5, %%mm5, %%mm6 \n\t" /* R5 R4 R5 R4  R3 R2 R3 R2 */\
 \
-    "pand "MANGLE(M24B)", %%mm1 \n\t" /* B5       B4        B3    */\
+    "pand "MANGLE(ff_M24B)", %%mm1 \n\t" /* B5       B4        B3    */\
     "pand   %%mm7, %%mm3        \n\t" /*       G4        G3       */\
     "pand   %%mm0, %%mm6        \n\t" /*    R4        R3       R2 */\
 \
@@ -889,7 +889,7 @@
 \
     "pand   %%mm7, %%mm1        \n\t" /*       B7        B6       */\
     "pand   %%mm0, %%mm3        \n\t" /*    G7        G6       G5 */\
-    "pand "MANGLE(M24B)", %%mm6 \n\t" /* R7       R6        R5    */\
+    "pand "MANGLE(ff_M24B)", %%mm6 \n\t" /* R7       R6        R5    */\
 \
     "por    %%mm1, %%mm3        \n\t"\
     "por    %%mm3, %%mm6        \n\t"\
@@ -934,18 +934,18 @@
 #ifdef HAVE_MMX
     if (c->flags & SWS_ACCURATE_RND){
         if (uDest){
-            YSCALEYUV2YV12X_ACCURATE(   0, CHR_MMX_FILTER_OFFSET, uDest, chrDstW)
-            YSCALEYUV2YV12X_ACCURATE(4096, CHR_MMX_FILTER_OFFSET, vDest, chrDstW)
+            YSCALEYUV2YV12X_ACCURATE(   "0", CHR_MMX_FILTER_OFFSET, uDest, chrDstW)
+            YSCALEYUV2YV12X_ACCURATE(AV_STRINGIFY(VOF), CHR_MMX_FILTER_OFFSET, vDest, chrDstW)
         }
 
-        YSCALEYUV2YV12X_ACCURATE(0, LUM_MMX_FILTER_OFFSET, dest, dstW)
+        YSCALEYUV2YV12X_ACCURATE("0", LUM_MMX_FILTER_OFFSET, dest, dstW)
     }else{
         if (uDest){
-            YSCALEYUV2YV12X(   0, CHR_MMX_FILTER_OFFSET, uDest, chrDstW)
-            YSCALEYUV2YV12X(4096, CHR_MMX_FILTER_OFFSET, vDest, chrDstW)
+            YSCALEYUV2YV12X(   "0", CHR_MMX_FILTER_OFFSET, uDest, chrDstW)
+            YSCALEYUV2YV12X(AV_STRINGIFY(VOF), CHR_MMX_FILTER_OFFSET, vDest, chrDstW)
         }
 
-        YSCALEYUV2YV12X(0, LUM_MMX_FILTER_OFFSET, dest, dstW)
+        YSCALEYUV2YV12X("0", LUM_MMX_FILTER_OFFSET, dest, dstW)
     }
 #else
 #ifdef HAVE_ALTIVEC
@@ -957,7 +957,7 @@
             chrFilter, chrSrc, chrFilterSize,
             dest, uDest, vDest, dstW, chrDstW);
 #endif //!HAVE_ALTIVEC
-#endif
+#endif /* HAVE_MMX */
 }
 
 static inline void RENAME(yuv2nv12X)(SwsContext *c, int16_t *lumFilter, int16_t **lumSrc, int lumFilterSize,
@@ -973,7 +973,7 @@
                                     uint8_t *dest, uint8_t *uDest, uint8_t *vDest, long dstW, long chrDstW)
 {
 #ifdef HAVE_MMX
-    if (uDest != NULL)
+    if (uDest)
     {
         asm volatile(
             YSCALEYUV2YV121
@@ -984,7 +984,7 @@
 
         asm volatile(
             YSCALEYUV2YV121
-            :: "r" (chrSrc + 2048 + chrDstW), "r" (vDest + chrDstW),
+            :: "r" (chrSrc + VOFW + chrDstW), "r" (vDest + chrDstW),
             "g" (-chrDstW)
             : "%"REG_a
         );
@@ -1010,11 +1010,11 @@
         dest[i]= val;
     }
 
-    if (uDest != NULL)
+    if (uDest)
         for (i=0; i<chrDstW; i++)
         {
             int u=chrSrc[i]>>7;
-            int v=chrSrc[i + 2048]>>7;
+            int v=chrSrc[i + VOFW]>>7;
 
             if ((u|v)&256){
                 if (u<0)        u=0;
@@ -1161,7 +1161,7 @@
             return;
         }
     }
-#endif
+#endif /* HAVE_MMX */
 #ifdef HAVE_ALTIVEC
     /* The following list of supported dstFormat values should
        match what's found in the body of altivec_yuv2packedX() */
@@ -1333,7 +1333,7 @@
             : "%"REG_a
             );
             break;
-#endif
+#endif /* HAVE_MMX */
         case PIX_FMT_BGR32:
 #ifndef HAVE_MMX
         case PIX_FMT_RGB32:
@@ -1348,7 +1348,7 @@
                     // vertical linear interpolation && yuv2rgb in a single step:
                     int Y=yuvtab_2568[((buf0[i]*yalpha1+buf1[i]*yalpha)>>19)];
                     int U=((uvbuf0[i]*uvalpha1+uvbuf1[i]*uvalpha)>>19);
-                    int V=((uvbuf0[i+2048]*uvalpha1+uvbuf1[i+2048]*uvalpha)>>19);
+                    int V=((uvbuf0[i+VOFW]*uvalpha1+uvbuf1[i+VOFW]*uvalpha)>>19);
                     dest[0]=clip_table[((Y + yuvtab_40cf[U]) >>13)];
                     dest[1]=clip_table[((Y + yuvtab_1a1e[V] + yuvtab_0c92[U]) >>13)];
                     dest[2]=clip_table[((Y + yuvtab_3343[V]) >>13)];
@@ -1362,7 +1362,7 @@
                     // vertical linear interpolation && yuv2rgb in a single step:
                     int Y=yuvtab_2568[((buf0[i]*yalpha1+buf1[i]*yalpha)>>19)];
                     int U=((uvbuf0[i]*uvalpha1+uvbuf1[i]*uvalpha)>>19);
-                    int V=((uvbuf0[i+2048]*uvalpha1+uvbuf1[i+2048]*uvalpha)>>19);
+                    int V=((uvbuf0[i+VOFW]*uvalpha1+uvbuf1[i+VOFW]*uvalpha)>>19);
                     dest[0]=clip_table[((Y + yuvtab_40cf[U]) >>13)];
                     dest[1]=clip_table[((Y + yuvtab_1a1e[V] + yuvtab_0c92[U]) >>13)];
                     dest[2]=clip_table[((Y + yuvtab_3343[V]) >>13)];
@@ -1376,7 +1376,7 @@
                     // vertical linear interpolation && yuv2rgb in a single step:
                     int Y=yuvtab_2568[((buf0[i]*yalpha1+buf1[i]*yalpha)>>19)];
                     int U=((uvbuf0[i]*uvalpha1+uvbuf1[i]*uvalpha)>>19);
-                    int V=((uvbuf0[i+2048]*uvalpha1+uvbuf1[i+2048]*uvalpha)>>19);
+                    int V=((uvbuf0[i+VOFW]*uvalpha1+uvbuf1[i+VOFW]*uvalpha)>>19);
 
                     ((uint16_t*)dest)[i] =
                         clip_table16b[(Y + yuvtab_40cf[U]) >>13] |
@@ -1391,7 +1391,7 @@
                     // vertical linear interpolation && yuv2rgb in a single step:
                     int Y=yuvtab_2568[((buf0[i]*yalpha1+buf1[i]*yalpha)>>19)];
                     int U=((uvbuf0[i]*uvalpha1+uvbuf1[i]*uvalpha)>>19);
-                    int V=((uvbuf0[i+2048]*uvalpha1+uvbuf1[i+2048]*uvalpha)>>19);
+                    int V=((uvbuf0[i+VOFW]*uvalpha1+uvbuf1[i+VOFW]*uvalpha)>>19);
 
                     ((uint16_t*)dest)[i] =
                         clip_table15b[(Y + yuvtab_40cf[U]) >>13] |
@@ -1513,7 +1513,7 @@
     }
 
 #ifdef HAVE_MMX
-    if ( uvalpha < 2048 ) // note this is not correct (shifts chrominance by 0.5 pixels) but it is a bit faster
+    if (uvalpha < 2048) // note this is not correct (shifts chrominance by 0.5 pixels) but it is a bit faster
     {
         switch(dstFormat)
         {
@@ -1691,8 +1691,8 @@
             return;
         }
     }
-#endif
-    if ( uvalpha < 2048 )
+#endif /* HAVE_MMX */
+    if (uvalpha < 2048)
     {
         YSCALE_YUV_2_ANYRGB_C(YSCALE_YUV_2_RGB1_C, YSCALE_YUV_2_PACKED1_C)
     }else{
@@ -1831,7 +1831,7 @@
         int g= (((uint32_t*)src)[i]>>8)&0xFF;
         int r= (((uint32_t*)src)[i]>>16)&0xFF;
 
-        dst[i]= ((RY*r + GY*g + BY*b + (33<<(RGB2YUV_SHIFT-1)) )>>RGB2YUV_SHIFT);
+        dst[i]= ((RY*r + GY*g + BY*b + (33<<(RGB2YUV_SHIFT-1)))>>RGB2YUV_SHIFT);
     }
 }
 
@@ -1859,8 +1859,8 @@
 #ifdef HAVE_MMX
     asm volatile(
     "mov                        %2, %%"REG_a"   \n\t"
-    "movq     "MANGLE(bgr2YCoeff)", %%mm6       \n\t"
-    "movq          "MANGLE(w1111)", %%mm5       \n\t"
+    "movq  "MANGLE(ff_bgr2YCoeff)", %%mm6       \n\t"
+    "movq       "MANGLE(ff_w1111)", %%mm5       \n\t"
     "pxor                    %%mm7, %%mm7       \n\t"
     "lea (%%"REG_a", %%"REG_a", 2), %%"REG_d"   \n\t"
     ASMALIGN(4)
@@ -1918,7 +1918,7 @@
     "psraw                      $7, %%mm4       \n\t"
 
     "packuswb                %%mm4, %%mm0       \n\t"
-    "paddusb "MANGLE(bgr2YOffset)", %%mm0       \n\t"
+    "paddusb "MANGLE(ff_bgr2YOffset)", %%mm0    \n\t"
 
     "movq                    %%mm0, (%1, %%"REG_a") \n\t"
     "add                        $8, %%"REG_a"   \n\t"
@@ -1934,9 +1934,9 @@
         int g= src[i*3+1];
         int r= src[i*3+2];
 
-        dst[i]= ((RY*r + GY*g + BY*b + (33<<(RGB2YUV_SHIFT-1)) )>>RGB2YUV_SHIFT);
+        dst[i]= ((RY*r + GY*g + BY*b + (33<<(RGB2YUV_SHIFT-1)))>>RGB2YUV_SHIFT);
     }
-#endif
+#endif /* HAVE_MMX */
 }
 
 static inline void RENAME(bgr24ToUV)(uint8_t *dstU, uint8_t *dstV, uint8_t *src1, uint8_t *src2, long width)
@@ -1944,8 +1944,8 @@
 #ifdef HAVE_MMX
     asm volatile(
     "mov                        %3, %%"REG_a"   \n\t"
-    "movq          "MANGLE(w1111)", %%mm5       \n\t"
-    "movq     "MANGLE(bgr2UCoeff)", %%mm6       \n\t"
+    "movq       "MANGLE(ff_w1111)", %%mm5       \n\t"
+    "movq  "MANGLE(ff_bgr2UCoeff)", %%mm6       \n\t"
     "pxor                    %%mm7, %%mm7       \n\t"
     "lea (%%"REG_a", %%"REG_a", 2), %%"REG_d"   \n\t"
     "add                 %%"REG_d", %%"REG_d"   \n\t"
@@ -1977,8 +1977,8 @@
     "psrlw                      $1, %%mm0       \n\t"
     "psrlw                      $1, %%mm2       \n\t"
 #endif
-    "movq     "MANGLE(bgr2VCoeff)", %%mm1       \n\t"
-    "movq     "MANGLE(bgr2VCoeff)", %%mm3       \n\t"
+    "movq  "MANGLE(ff_bgr2VCoeff)", %%mm1       \n\t"
+    "movq  "MANGLE(ff_bgr2VCoeff)", %%mm3       \n\t"
 
     "pmaddwd                 %%mm0, %%mm1       \n\t"
     "pmaddwd                 %%mm2, %%mm3       \n\t"
@@ -2019,12 +2019,12 @@
     "punpcklbw              %%mm7, %%mm5       \n\t"
     "punpcklbw              %%mm7, %%mm2       \n\t"
     "paddw                  %%mm5, %%mm2       \n\t"
-    "movq         "MANGLE(w1111)", %%mm5       \n\t"
+    "movq      "MANGLE(ff_w1111)", %%mm5       \n\t"
     "psrlw                     $2, %%mm4       \n\t"
     "psrlw                     $2, %%mm2       \n\t"
 #endif
-    "movq    "MANGLE(bgr2VCoeff)", %%mm1       \n\t"
-    "movq    "MANGLE(bgr2VCoeff)", %%mm3       \n\t"
+    "movq "MANGLE(ff_bgr2VCoeff)", %%mm1       \n\t"
+    "movq "MANGLE(ff_bgr2VCoeff)", %%mm3       \n\t"
 
     "pmaddwd                %%mm4, %%mm1       \n\t"
     "pmaddwd                %%mm2, %%mm3       \n\t"
@@ -2048,7 +2048,7 @@
     "punpckldq              %%mm4, %%mm0       \n\t"
     "punpckhdq              %%mm4, %%mm1       \n\t"
     "packsswb               %%mm1, %%mm0       \n\t"
-    "paddb "MANGLE(bgr2UVOffset)", %%mm0       \n\t"
+    "paddb "MANGLE(ff_bgr2UVOffset)", %%mm0    \n\t"
 
     "movd                   %%mm0, (%1, %%"REG_a")  \n\t"
     "punpckhdq              %%mm0, %%mm0            \n\t"
@@ -2069,11 +2069,11 @@
         dstU[i]= ((RU*r + GU*g + BU*b)>>(RGB2YUV_SHIFT+1)) + 128;
         dstV[i]= ((RV*r + GV*g + BV*b)>>(RGB2YUV_SHIFT+1)) + 128;
     }
-#endif
+#endif /* HAVE_MMX */
     assert(src1 == src2);
 }
 
-static inline void RENAME(bgr16ToY)(uint8_t *dst, uint8_t *src, int width)
+static inline void RENAME(rgb16ToY)(uint8_t *dst, uint8_t *src, int width)
 {
     int i;
     for (i=0; i<width; i++)
@@ -2087,7 +2087,7 @@
     }
 }
 
-static inline void RENAME(bgr16ToUV)(uint8_t *dstU, uint8_t *dstV, uint8_t *src1, uint8_t *src2, int width)
+static inline void RENAME(rgb16ToUV)(uint8_t *dstU, uint8_t *dstV, uint8_t *src1, uint8_t *src2, int width)
 {
     int i;
     assert(src1==src2);
@@ -2109,7 +2109,7 @@
     }
 }
 
-static inline void RENAME(bgr15ToY)(uint8_t *dst, uint8_t *src, int width)
+static inline void RENAME(rgb15ToY)(uint8_t *dst, uint8_t *src, int width)
 {
     int i;
     for (i=0; i<width; i++)
@@ -2123,7 +2123,7 @@
     }
 }
 
-static inline void RENAME(bgr15ToUV)(uint8_t *dstU, uint8_t *dstV, uint8_t *src1, uint8_t *src2, int width)
+static inline void RENAME(rgb15ToUV)(uint8_t *dstU, uint8_t *dstV, uint8_t *src1, uint8_t *src2, int width)
 {
     int i;
     assert(src1==src2);
@@ -2155,7 +2155,7 @@
         int g= (((uint32_t*)src)[i]>>8)&0xFF;
         int b= (((uint32_t*)src)[i]>>16)&0xFF;
 
-        dst[i]= ((RY*r + GY*g + BY*b + (33<<(RGB2YUV_SHIFT-1)) )>>RGB2YUV_SHIFT);
+        dst[i]= ((RY*r + GY*g + BY*b + (33<<(RGB2YUV_SHIFT-1)))>>RGB2YUV_SHIFT);
     }
 }
 
@@ -2187,7 +2187,7 @@
         int g= src[i*3+1];
         int b= src[i*3+2];
 
-        dst[i]= ((RY*r + GY*g + BY*b + (33<<(RGB2YUV_SHIFT-1)) )>>RGB2YUV_SHIFT);
+        dst[i]= ((RY*r + GY*g + BY*b + (33<<(RGB2YUV_SHIFT-1)))>>RGB2YUV_SHIFT);
     }
 }
 
@@ -2206,7 +2206,7 @@
     }
 }
 
-static inline void RENAME(rgb16ToY)(uint8_t *dst, uint8_t *src, int width)
+static inline void RENAME(bgr16ToY)(uint8_t *dst, uint8_t *src, int width)
 {
     int i;
     for (i=0; i<width; i++)
@@ -2220,7 +2220,7 @@
     }
 }
 
-static inline void RENAME(rgb16ToUV)(uint8_t *dstU, uint8_t *dstV, uint8_t *src1, uint8_t *src2, int width)
+static inline void RENAME(bgr16ToUV)(uint8_t *dstU, uint8_t *dstV, uint8_t *src1, uint8_t *src2, int width)
 {
     int i;
     assert(src1 == src2);
@@ -2239,7 +2239,7 @@
     }
 }
 
-static inline void RENAME(rgb15ToY)(uint8_t *dst, uint8_t *src, int width)
+static inline void RENAME(bgr15ToY)(uint8_t *dst, uint8_t *src, int width)
 {
     int i;
     for (i=0; i<width; i++)
@@ -2253,7 +2253,7 @@
     }
 }
 
-static inline void RENAME(rgb15ToUV)(uint8_t *dstU, uint8_t *dstV, uint8_t *src1, uint8_t *src2, int width)
+static inline void RENAME(bgr15ToUV)(uint8_t *dstU, uint8_t *dstV, uint8_t *src1, uint8_t *src2, int width)
 {
     int i;
     assert(src1 == src2);
@@ -2476,8 +2476,8 @@
         dst[i] = av_clip(val>>7, 0, (1<<15)-1); // the cubic equation does overflow ...
         //dst[i] = val>>7;
     }
-#endif
-#endif
+#endif /* HAVE_ALTIVEC */
+#endif /* HAVE_MMX */
 }
       // *** horizontal scale Y line to temp buffer
 static inline void RENAME(hyscale)(uint16_t *dst, long dstWidth, uint8_t *src, int srcW, int xInc,
@@ -2594,7 +2594,7 @@
             "add               %%"REG_a", %%"REG_D" \n\t"\
             "xor               %%"REG_a", %%"REG_a" \n\t"\
 
-#endif
+#endif /* ARCH_X86_64 */
 
 FUNNY_Y_CODE
 FUNNY_Y_CODE
@@ -2622,7 +2622,7 @@
         }
         else
         {
-#endif
+#endif /* HAVE_MMX2 */
         long xInc_shr16 = xInc >> 16;
         uint16_t xInc_mask = xInc & 0xffff;
         //NO MMX just normal asm ...
@@ -2678,7 +2678,7 @@
             dst[i]= (src[xx]<<7) + (src[xx+1] - src[xx])*xalpha;
             xpos+=xInc;
         }
-#endif
+#endif /* defined(ARCH_X86) */
     }
 }
 
@@ -2690,63 +2690,63 @@
 {
     if (srcFormat==PIX_FMT_YUYV422)
     {
-        RENAME(yuy2ToUV)(formatConvBuffer, formatConvBuffer+2048, src1, src2, srcW);
+        RENAME(yuy2ToUV)(formatConvBuffer, formatConvBuffer+VOFW, src1, src2, srcW);
         src1= formatConvBuffer;
-        src2= formatConvBuffer+2048;
+        src2= formatConvBuffer+VOFW;
     }
     else if (srcFormat==PIX_FMT_UYVY422)
     {
-        RENAME(uyvyToUV)(formatConvBuffer, formatConvBuffer+2048, src1, src2, srcW);
+        RENAME(uyvyToUV)(formatConvBuffer, formatConvBuffer+VOFW, src1, src2, srcW);
         src1= formatConvBuffer;
-        src2= formatConvBuffer+2048;
+        src2= formatConvBuffer+VOFW;
     }
     else if (srcFormat==PIX_FMT_RGB32)
     {
-        RENAME(bgr32ToUV)(formatConvBuffer, formatConvBuffer+2048, src1, src2, srcW);
+        RENAME(bgr32ToUV)(formatConvBuffer, formatConvBuffer+VOFW, src1, src2, srcW);
         src1= formatConvBuffer;
-        src2= formatConvBuffer+2048;
+        src2= formatConvBuffer+VOFW;
     }
     else if (srcFormat==PIX_FMT_BGR24)
     {
-        RENAME(bgr24ToUV)(formatConvBuffer, formatConvBuffer+2048, src1, src2, srcW);
+        RENAME(bgr24ToUV)(formatConvBuffer, formatConvBuffer+VOFW, src1, src2, srcW);
         src1= formatConvBuffer;
-        src2= formatConvBuffer+2048;
+        src2= formatConvBuffer+VOFW;
     }
     else if (srcFormat==PIX_FMT_BGR565)
     {
-        RENAME(bgr16ToUV)(formatConvBuffer, formatConvBuffer+2048, src1, src2, srcW);
+        RENAME(bgr16ToUV)(formatConvBuffer, formatConvBuffer+VOFW, src1, src2, srcW);
         src1= formatConvBuffer;
-        src2= formatConvBuffer+2048;
+        src2= formatConvBuffer+VOFW;
     }
     else if (srcFormat==PIX_FMT_BGR555)
     {
-        RENAME(bgr15ToUV)(formatConvBuffer, formatConvBuffer+2048, src1, src2, srcW);
+        RENAME(bgr15ToUV)(formatConvBuffer, formatConvBuffer+VOFW, src1, src2, srcW);
         src1= formatConvBuffer;
-        src2= formatConvBuffer+2048;
+        src2= formatConvBuffer+VOFW;
     }
     else if (srcFormat==PIX_FMT_BGR32)
     {
-        RENAME(rgb32ToUV)(formatConvBuffer, formatConvBuffer+2048, src1, src2, srcW);
+        RENAME(rgb32ToUV)(formatConvBuffer, formatConvBuffer+VOFW, src1, src2, srcW);
         src1= formatConvBuffer;
-        src2= formatConvBuffer+2048;
+        src2= formatConvBuffer+VOFW;
     }
     else if (srcFormat==PIX_FMT_RGB24)
     {
-        RENAME(rgb24ToUV)(formatConvBuffer, formatConvBuffer+2048, src1, src2, srcW);
+        RENAME(rgb24ToUV)(formatConvBuffer, formatConvBuffer+VOFW, src1, src2, srcW);
         src1= formatConvBuffer;
-        src2= formatConvBuffer+2048;
+        src2= formatConvBuffer+VOFW;
     }
     else if (srcFormat==PIX_FMT_RGB565)
     {
-        RENAME(rgb16ToUV)(formatConvBuffer, formatConvBuffer+2048, src1, src2, srcW);
+        RENAME(rgb16ToUV)(formatConvBuffer, formatConvBuffer+VOFW, src1, src2, srcW);
         src1= formatConvBuffer;
-        src2= formatConvBuffer+2048;
+        src2= formatConvBuffer+VOFW;
     }
     else if (srcFormat==PIX_FMT_RGB555)
     {
-        RENAME(rgb15ToUV)(formatConvBuffer, formatConvBuffer+2048, src1, src2, srcW);
+        RENAME(rgb15ToUV)(formatConvBuffer, formatConvBuffer+VOFW, src1, src2, srcW);
         src1= formatConvBuffer;
-        src2= formatConvBuffer+2048;
+        src2= formatConvBuffer+VOFW;
     }
     else if (isGray(srcFormat))
     {
@@ -2754,9 +2754,9 @@
     }
     else if (srcFormat==PIX_FMT_RGB8 || srcFormat==PIX_FMT_BGR8 || srcFormat==PIX_FMT_PAL8 || srcFormat==PIX_FMT_BGR4_BYTE  || srcFormat==PIX_FMT_RGB4_BYTE)
     {
-        RENAME(palToUV)(formatConvBuffer, formatConvBuffer+2048, src1, src2, srcW, pal);
+        RENAME(palToUV)(formatConvBuffer, formatConvBuffer+VOFW, src1, src2, srcW, pal);
         src1= formatConvBuffer;
-        src2= formatConvBuffer+2048;
+        src2= formatConvBuffer+VOFW;
     }
 
 #ifdef HAVE_MMX
@@ -2767,7 +2767,7 @@
 #endif
     {
         RENAME(hScale)(dst     , dstWidth, src1, srcW, xInc, hChrFilter, hChrFilterPos, hChrFilterSize);
-        RENAME(hScale)(dst+2048, dstWidth, src2, srcW, xInc, hChrFilter, hChrFilterPos, hChrFilterSize);
+        RENAME(hScale)(dst+VOFW, dstWidth, src2, srcW, xInc, hChrFilter, hChrFilterPos, hChrFilterSize);
     }
     else // Fast Bilinear upscale / crap downscale
     {
@@ -2812,7 +2812,7 @@
             "add          %%"REG_a", %%"REG_D"  \n\t"\
             "xor          %%"REG_a", %%"REG_a"  \n\t"\
 
-#endif
+#endif /* ARCH_X86_64 */
 
 FUNNY_UV_CODE
 FUNNY_UV_CODE
@@ -2821,7 +2821,7 @@
             "xor          %%"REG_a", %%"REG_a"  \n\t" // i
             "mov                 %5, %%"REG_c"  \n\t" // src
             "mov                 %1, %%"REG_D"  \n\t" // buf1
-            "add              $4096, %%"REG_D"  \n\t"
+            "add              $"AV_STRINGIFY(VOF)", %%"REG_D"  \n\t"
             PREFETCH"   (%%"REG_c")             \n\t"
             PREFETCH" 32(%%"REG_c")             \n\t"
             PREFETCH" 64(%%"REG_c")             \n\t"
@@ -2848,12 +2848,12 @@
             {
                 //printf("%d %d %d\n", dstWidth, i, srcW);
                 dst[i] = src1[srcW-1]*128;
-                dst[i+2048] = src2[srcW-1]*128;
+                dst[i+VOFW] = src2[srcW-1]*128;
             }
         }
         else
         {
-#endif
+#endif /* HAVE_MMX2 */
             long xInc_shr16 = (long) (xInc >> 16);
             uint16_t xInc_mask = xInc & 0xffff;
             asm volatile(
@@ -2881,7 +2881,7 @@
             "addl    %%edi, %%esi                   \n\t" //src[xx+1]*2*xalpha + src[xx]*(1-2*xalpha)
             "mov        %1, %%"REG_D"               \n\t"
             "shrl       $9, %%esi                   \n\t"
-            "movw     %%si, 4096(%%"REG_D", %%"REG_a", 2)   \n\t"
+            "movw     %%si, "AV_STRINGIFY(VOF)"(%%"REG_D", %%"REG_a", 2)   \n\t"
 
             "addw       %4, %%cx                    \n\t" //2*xalpha += xInc&0xFF
             "adc        %3, %%"REG_d"               \n\t" //xx+= xInc>>8 + carry
@@ -2891,7 +2891,7 @@
 
 /* GCC-3.3 makes MPlayer crash on IA-32 machines when using "g" operand here,
    which is needed to support GCC-4.0 */
-#if defined(ARCH_X86_64) && ((__GNUC__ > 3) || ( __GNUC__ == 3 && __GNUC_MINOR__ >= 4))
+#if defined(ARCH_X86_64) && ((__GNUC__ > 3) || (__GNUC__ == 3 && __GNUC_MINOR__ >= 4))
             :: "m" (src1), "m" (dst), "g" ((long)dstWidth), "m" (xInc_shr16), "m" (xInc_mask),
 #else
             :: "m" (src1), "m" (dst), "m" ((long)dstWidth), "m" (xInc_shr16), "m" (xInc_mask),
@@ -2910,14 +2910,14 @@
             register unsigned int xx=xpos>>16;
             register unsigned int xalpha=(xpos&0xFFFF)>>9;
             dst[i]=(src1[xx]*(xalpha^127)+src1[xx+1]*xalpha);
-            dst[i+2048]=(src2[xx]*(xalpha^127)+src2[xx+1]*xalpha);
+            dst[i+VOFW]=(src2[xx]*(xalpha^127)+src2[xx+1]*xalpha);
             /* slower
             dst[i]= (src1[xx]<<7) + (src1[xx+1] - src1[xx])*xalpha;
-            dst[i+2048]=(src2[xx]<<7) + (src2[xx+1] - src2[xx])*xalpha;
+            dst[i+VOFW]=(src2[xx]<<7) + (src2[xx+1] - src2[xx])*xalpha;
             */
             xpos+=xInc;
         }
-#endif
+#endif /* defined(ARCH_X86) */
     }
 }
 
@@ -3002,8 +3002,8 @@
         static int firstTime=1; //FIXME move this into the context perhaps
         if (flags & SWS_PRINT_INFO && firstTime)
         {
-            av_log(c, AV_LOG_WARNING, "SwScaler: Warning: dstStride is not aligned!\n"
-                   "SwScaler:          ->cannot do aligned memory acesses anymore\n");
+            av_log(c, AV_LOG_WARNING, "Warning: dstStride is not aligned!\n"
+                   "         ->cannot do aligned memory acesses anymore\n");
             firstTime=0;
         }
     }
@@ -3077,8 +3077,8 @@
                 lastInChrBuf++;
             }
             //wrap buf index around to stay inside the ring buffer
-            if (lumBufIndex >= vLumBufSize ) lumBufIndex-= vLumBufSize;
-            if (chrBufIndex >= vChrBufSize ) chrBufIndex-= vChrBufSize;
+            if (lumBufIndex >= vLumBufSize) lumBufIndex-= vLumBufSize;
+            if (chrBufIndex >= vChrBufSize) chrBufIndex-= vChrBufSize;
         }
         else // not enough lines left in this slice -> load the rest in the buffer
         {
@@ -3118,16 +3118,16 @@
                 lastInChrBuf++;
             }
             //wrap buf index around to stay inside the ring buffer
-            if (lumBufIndex >= vLumBufSize ) lumBufIndex-= vLumBufSize;
-            if (chrBufIndex >= vChrBufSize ) chrBufIndex-= vChrBufSize;
+            if (lumBufIndex >= vLumBufSize) lumBufIndex-= vLumBufSize;
+            if (chrBufIndex >= vChrBufSize) chrBufIndex-= vChrBufSize;
             break; //we can't output a dstY line so let's try with the next slice
         }
 
 #ifdef HAVE_MMX
-        b5Dither= dither8[dstY&1];
-        g6Dither= dither4[dstY&1];
-        g5Dither= dither8[dstY&1];
-        r5Dither= dither8[(dstY+1)&1];
+        b5Dither= ff_dither8[dstY&1];
+        g6Dither= ff_dither4[dstY&1];
+        g5Dither= ff_dither8[dstY&1];
+        r5Dither= ff_dither8[(dstY+1)&1];
 #endif
         if (dstY < dstH-2)
         {
@@ -3259,8 +3259,8 @@
     }
 
 #ifdef HAVE_MMX
-    __asm __volatile(SFENCE:::"memory");
-    __asm __volatile(EMMS:::"memory");
+    asm volatile(SFENCE:::"memory");
+    asm volatile(EMMS:::"memory");
 #endif
     /* store changed local vars back in the context */
     c->dstY= dstY;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/yuv2rgb.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/yuv2rgb.c	2008-03-21 06:48:49 UTC (rev 3911)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/yuv2rgb.c	2008-03-21 06:51:32 UTC (rev 3912)
@@ -2,7 +2,6 @@
  * yuv2rgb.c, Software YUV to RGB converter
  *
  *  Copyright (C) 1999, Aaron Holtzman <aholtzma at ess.engr.uvic.ca>
- *  All Rights Reserved.
  *
  *  Functions broken out from display_x11.c and several new modes
  *  added by H?kan Hjort <d95hjort at dtek.chalmers.se>
@@ -29,9 +28,6 @@
  *  along with mpeg2dec; if not, write to the Free Software
  *  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
  */
-// MEANX
-#include "config.h"
-// /MEANX
 
 #include <stdio.h>
 #include <stdlib.h>
@@ -43,15 +39,14 @@
 #include "swscale.h"
 #include "swscale_internal.h"
 
+#ifdef HAVE_VIS
+#include "yuv2rgb_vis.c"
+#endif
+
 #ifdef HAVE_MLIB
 #include "yuv2rgb_mlib.c"
 #endif
-// MEANX
-#include "wrapper.h"
 
-// /MEANX
-
-
 #define DITHER1XBPP // only for mmx
 
 const uint8_t  __attribute__((aligned(8))) dither_2x2_4[2][8]={
@@ -164,14 +159,10 @@
 #ifdef HAVE_MMX
 
 /* hope these constant values are cache line aligned */
-static uint64_t attribute_used __attribute__((aligned(8))) mmx_00ffw   = 0x00ff00ff00ff00ffULL;
-static uint64_t attribute_used __attribute__((aligned(8))) mmx_redmask = 0xf8f8f8f8f8f8f8f8ULL;
-static uint64_t attribute_used __attribute__((aligned(8))) mmx_grnmask = 0xfcfcfcfcfcfcfcfcULL;
+DECLARE_ASM_CONST(8, uint64_t, mmx_00ffw)   = 0x00ff00ff00ff00ffULL;
+DECLARE_ASM_CONST(8, uint64_t, mmx_redmask) = 0xf8f8f8f8f8f8f8f8ULL;
+DECLARE_ASM_CONST(8, uint64_t, mmx_grnmask) = 0xfcfcfcfcfcfcfcfcULL;
 
-static uint64_t attribute_used __attribute__((aligned(8))) M24A=   0x00FF0000FF0000FFULL;
-static uint64_t attribute_used __attribute__((aligned(8))) M24B=   0xFF0000FF0000FF00ULL;
-static uint64_t attribute_used __attribute__((aligned(8))) M24C=   0x0000FF0000FF0000ULL;
-
 // the volatile is required because gcc otherwise optimizes some writes away not knowing that these
 // are read in the asm block
 static volatile uint64_t attribute_used __attribute__((aligned(8))) b5Dither;
@@ -179,14 +170,6 @@
 static volatile uint64_t attribute_used __attribute__((aligned(8))) g6Dither;
 static volatile uint64_t attribute_used __attribute__((aligned(8))) r5Dither;
 
-static uint64_t __attribute__((aligned(8))) dither4[2]={
-    0x0103010301030103LL,
-    0x0200020002000200LL,};
-
-static uint64_t __attribute__((aligned(8))) dither8[2]={
-    0x0602060206020602LL,
-    0x0004000400040004LL,};
-
 #undef HAVE_MMX
 
 //MMX versions
@@ -293,8 +276,7 @@
             dst_2 += dst_delta;\
         }\
         if (c->dstW & 4) {\
-            int av_unused U, V;\
-            int Y;\
+            int av_unused Y, U, V;\
 
 #define EPILOG2()\
         }\
@@ -639,6 +621,12 @@
         }
     }
 #endif
+#ifdef HAVE_VIS
+    {
+        SwsFunc t= yuv2rgb_init_vis(c);
+        if (t) return t;
+    }
+#endif
 #ifdef HAVE_MLIB
     {
         SwsFunc t= yuv2rgb_init_mlib(c);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/yuv2rgb_altivec.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/yuv2rgb_altivec.c	2008-03-21 06:48:49 UTC (rev 3911)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/yuv2rgb_altivec.c	2008-03-21 06:51:32 UTC (rev 3912)
@@ -1,968 +1,960 @@
-/*
-  marc.hoffman at analog.com    March 8, 2004
-
-  Altivec Acceleration for Color Space Conversion revision 0.2
-
-  convert I420 YV12 to RGB in various formats,
-    it rejects images that are not in 420 formats
-    it rejects images that don't have widths of multiples of 16
-    it rejects images that don't have heights of multiples of 2
-  reject defers to C simulation codes.
-
-  lots of optimizations to be done here
-
-  1. need to fix saturation code, I just couldn't get it to fly with packs and adds.
-     so we currently use max min to clip
-
-  2. the inefficient use of chroma loading needs a bit of brushing up
-
-  3. analysis of pipeline stalls needs to be done, use shark to identify pipeline stalls
-
-
-  MODIFIED to calculate coeffs from currently selected color space.
-  MODIFIED core to be a macro which you spec the output format.
-  ADDED UYVY conversion which is never called due to some thing in SWSCALE.
-  CORRECTED algorithim selection to be strict on input formats.
-  ADDED runtime detection of altivec.
-
-  ADDED altivec_yuv2packedX vertical scl + RGB converter
-
-  March 27,2004
-  PERFORMANCE ANALYSIS
-
-  The C version use 25% of the processor or ~250Mips for D1 video rawvideo used as test
-  The ALTIVEC version uses 10% of the processor or ~100Mips for D1 video same sequence
-
-  720*480*30  ~10MPS
-
-  so we have roughly 10clocks per pixel this is too high something has to be wrong.
-
-  OPTIMIZED clip codes to utilize vec_max and vec_packs removing the need for vec_min.
-
-  OPTIMIZED DST OUTPUT cache/dma controls. we are pretty much
-  guaranteed to have the input video frame it was just decompressed so
-  it probably resides in L1 caches.  However we are creating the
-  output video stream this needs to use the DSTST instruction to
-  optimize for the cache.  We couple this with the fact that we are
-  not going to be visiting the input buffer again so we mark it Least
-  Recently Used.  This shaves 25% of the processor cycles off.
-
-  Now MEMCPY is the largest mips consumer in the system, probably due
-  to the inefficient X11 stuff.
-
-  GL libraries seem to be very slow on this machine 1.33Ghz PB running
-  Jaguar, this is not the case for my 1Ghz PB.  I thought it might be
-  a versioning issues, however i have libGL.1.2.dylib for both
-  machines. ((We need to figure this out now))
-
-  GL2 libraries work now with patch for RGB32
-
-  NOTE quartz vo driver ARGB32_to_RGB24 consumes 30% of the processor
-
-  Integrated luma prescaling adjustment for saturation/contrast/brightness adjustment.
-*/
-
-/*
- * This file is part of FFmpeg.
- *
- * FFmpeg is free software; you can redistribute it and/or modify
- * it under the terms of the GNU General Public License as published by
- * the Free Software Foundation; either version 2 of the License, or
- * (at your option) any later version.
- *
- * FFmpeg is distributed in the hope that it will be useful,
- * but WITHOUT ANY WARRANTY; without even the implied warranty of
- * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- * GNU General Public License for more details.
- *
- * You should have received a copy of the GNU General Public License
- * along with FFmpeg; if not, write to the Free Software
- * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
- */
-#include "config.h"
-
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <inttypes.h>
-#include <assert.h>
-#include "config.h"
-#ifdef HAVE_MALLOC_H
-#include <malloc.h>
-#endif
-#include "rgb2rgb.h"
-#include "swscale.h"
-#include "swscale_internal.h"
-
-#undef PROFILE_THE_BEAST
-#undef INC_SCALING
-
-typedef unsigned char ubyte;
-typedef signed char   sbyte;
-
-
-/* RGB interleaver, 16 planar pels 8-bit samples per channel in
-   homogeneous vector registers x0,x1,x2 are interleaved with the
-   following technique:
-
-      o0 = vec_mergeh (x0,x1);
-      o1 = vec_perm (o0, x2, perm_rgb_0);
-      o2 = vec_perm (o0, x2, perm_rgb_1);
-      o3 = vec_mergel (x0,x1);
-      o4 = vec_perm (o3,o2,perm_rgb_2);
-      o5 = vec_perm (o3,o2,perm_rgb_3);
-
-  perm_rgb_0:   o0(RG).h v1(B) --> o1*
-              0   1  2   3   4
-             rgbr|gbrg|brgb|rgbr
-             0010 0100 1001 0010
-             0102 3145 2673 894A
-
-  perm_rgb_1:   o0(RG).h v1(B) --> o2
-              0   1  2   3   4
-             gbrg|brgb|bbbb|bbbb
-             0100 1001 1111 1111
-             B5CD 6EF7 89AB CDEF
-
-  perm_rgb_2:   o3(RG).l o2(rgbB.l) --> o4*
-              0   1  2   3   4
-             gbrg|brgb|rgbr|gbrg
-             1111 1111 0010 0100
-             89AB CDEF 0182 3945
-
-  perm_rgb_2:   o3(RG).l o2(rgbB.l) ---> o5*
-              0   1  2   3   4
-             brgb|rgbr|gbrg|brgb
-             1001 0010 0100 1001
-             a67b 89cA BdCD eEFf
-
-*/
-static
-const vector unsigned char
-  perm_rgb_0 = (const vector unsigned char)AVV(0x00,0x01,0x10,0x02,0x03,0x11,0x04,0x05,
-                                               0x12,0x06,0x07,0x13,0x08,0x09,0x14,0x0a),
-  perm_rgb_1 = (const vector unsigned char)AVV(0x0b,0x15,0x0c,0x0d,0x16,0x0e,0x0f,0x17,
-                                               0x18,0x19,0x1a,0x1b,0x1c,0x1d,0x1e,0x1f),
-  perm_rgb_2 = (const vector unsigned char)AVV(0x10,0x11,0x12,0x13,0x14,0x15,0x16,0x17,
-                                               0x00,0x01,0x18,0x02,0x03,0x19,0x04,0x05),
-  perm_rgb_3 = (const vector unsigned char)AVV(0x1a,0x06,0x07,0x1b,0x08,0x09,0x1c,0x0a,
-                                               0x0b,0x1d,0x0c,0x0d,0x1e,0x0e,0x0f,0x1f);
-
-#define vec_merge3(x2,x1,x0,y0,y1,y2)       \
-do {                                        \
-    typeof(x0) o0,o2,o3;                    \
-        o0 = vec_mergeh (x0,x1);            \
-        y0 = vec_perm (o0, x2, perm_rgb_0); \
-        o2 = vec_perm (o0, x2, perm_rgb_1); \
-        o3 = vec_mergel (x0,x1);            \
-        y1 = vec_perm (o3,o2,perm_rgb_2);   \
-        y2 = vec_perm (o3,o2,perm_rgb_3);   \
-} while(0)
-
-#define vec_mstbgr24(x0,x1,x2,ptr)      \
-do {                                    \
-    typeof(x0) _0,_1,_2;                \
-    vec_merge3 (x0,x1,x2,_0,_1,_2);     \
-    vec_st (_0, 0, ptr++);              \
-    vec_st (_1, 0, ptr++);              \
-    vec_st (_2, 0, ptr++);              \
-}  while (0);
-
-#define vec_mstrgb24(x0,x1,x2,ptr)      \
-do {                                    \
-    typeof(x0) _0,_1,_2;                \
-    vec_merge3 (x2,x1,x0,_0,_1,_2);     \
-    vec_st (_0, 0, ptr++);              \
-    vec_st (_1, 0, ptr++);              \
-    vec_st (_2, 0, ptr++);              \
-}  while (0);
-
-/* pack the pixels in rgb0 format
-   msb R
-   lsb 0
-*/
-#define vec_mstrgb32(T,x0,x1,x2,x3,ptr)                                       \
-do {                                                                          \
-    T _0,_1,_2,_3;                                                            \
-    _0 = vec_mergeh (x0,x1);                                                  \
-    _1 = vec_mergeh (x2,x3);                                                  \
-    _2 = (T)vec_mergeh ((vector unsigned short)_0,(vector unsigned short)_1); \
-    _3 = (T)vec_mergel ((vector unsigned short)_0,(vector unsigned short)_1); \
-    vec_st (_2, 0*16, (T *)ptr);                                              \
-    vec_st (_3, 1*16, (T *)ptr);                                              \
-    _0 = vec_mergel (x0,x1);                                                  \
-    _1 = vec_mergel (x2,x3);                                                  \
-    _2 = (T)vec_mergeh ((vector unsigned short)_0,(vector unsigned short)_1); \
-    _3 = (T)vec_mergel ((vector unsigned short)_0,(vector unsigned short)_1); \
-    vec_st (_2, 2*16, (T *)ptr);                                              \
-    vec_st (_3, 3*16, (T *)ptr);                                              \
-    ptr += 4;                                                                 \
-}  while (0);
-
-/*
-
-  | 1     0       1.4021   | | Y |
-  | 1    -0.3441 -0.7142   |x| Cb|
-  | 1     1.7718  0        | | Cr|
-
-
-  Y:      [-128 127]
-  Cb/Cr : [-128 127]
-
-  typical yuv conversion work on Y: 0-255 this version has been optimized for jpeg decode.
-
-*/
-
-
-
-
-#define vec_unh(x) \
-    (vector signed short) \
-        vec_perm(x,(typeof(x))AVV(0),\
-                 (vector unsigned char)AVV(0x10,0x00,0x10,0x01,0x10,0x02,0x10,0x03,\
-                                           0x10,0x04,0x10,0x05,0x10,0x06,0x10,0x07))
-#define vec_unl(x) \
-    (vector signed short) \
-        vec_perm(x,(typeof(x))AVV(0),\
-                 (vector unsigned char)AVV(0x10,0x08,0x10,0x09,0x10,0x0A,0x10,0x0B,\
-                                           0x10,0x0C,0x10,0x0D,0x10,0x0E,0x10,0x0F))
-
-#define vec_clip_s16(x) \
-    vec_max (vec_min (x, (vector signed short)AVV(235,235,235,235,235,235,235,235)),\
-                         (vector signed short)AVV( 16, 16, 16, 16, 16, 16, 16, 16))
-
-#define vec_packclp(x,y) \
-    (vector unsigned char)vec_packs \
-        ((vector unsigned short)vec_max (x,(vector signed short) AVV(0)), \
-         (vector unsigned short)vec_max (y,(vector signed short) AVV(0)))
-
-//#define out_pixels(a,b,c,ptr) vec_mstrgb32(typeof(a),((typeof (a))AVV(0)),a,a,a,ptr)
-
-
-static inline void cvtyuvtoRGB (SwsContext *c,
-                                vector signed short Y, vector signed short U, vector signed short V,
-                                vector signed short *R, vector signed short *G, vector signed short *B)
-{
-    vector signed   short vx,ux,uvx;
-
-    Y = vec_mradds (Y, c->CY, c->OY);
-    U  = vec_sub (U,(vector signed short)
-                    vec_splat((vector signed short)AVV(128),0));
-    V  = vec_sub (V,(vector signed short)
-                    vec_splat((vector signed short)AVV(128),0));
-
-    //   ux  = (CBU*(u<<c->CSHIFT)+0x4000)>>15;
-    ux = vec_sl (U, c->CSHIFT);
-    *B = vec_mradds (ux, c->CBU, Y);
-
-    // vx  = (CRV*(v<<c->CSHIFT)+0x4000)>>15;
-    vx = vec_sl (V, c->CSHIFT);
-    *R = vec_mradds (vx, c->CRV, Y);
-
-    // uvx = ((CGU*u) + (CGV*v))>>15;
-    uvx = vec_mradds (U, c->CGU, Y);
-    *G  = vec_mradds (V, c->CGV, uvx);
-}
-
-
-/*
-  ------------------------------------------------------------------------------
-  CS converters
-  ------------------------------------------------------------------------------
-*/
-
-
-#define DEFCSP420_CVT(name,out_pixels)                                  \
-static int altivec_##name (SwsContext *c,                               \
-                           unsigned char **in, int *instrides,          \
-                           int srcSliceY,        int srcSliceH,         \
-                           unsigned char **oplanes, int *outstrides)    \
-{                                                                       \
-    int w = c->srcW;                                                    \
-    int h = srcSliceH;                                                  \
-    int i,j;                                                            \
-    int instrides_scl[3];                                               \
-    vector unsigned char y0,y1;                                         \
-                                                                        \
-    vector signed char  u,v;                                            \
-                                                                        \
-    vector signed short Y0,Y1,Y2,Y3;                                    \
-    vector signed short U,V;                                            \
-    vector signed short vx,ux,uvx;                                      \
-    vector signed short vx0,ux0,uvx0;                                   \
-    vector signed short vx1,ux1,uvx1;                                   \
-    vector signed short R0,G0,B0;                                       \
-    vector signed short R1,G1,B1;                                       \
-    vector unsigned char R,G,B;                                         \
-                                                                        \
-    vector unsigned char *y1ivP, *y2ivP, *uivP, *vivP;                  \
-    vector unsigned char align_perm;                                    \
-                                                                        \
-    vector signed short                                                 \
-        lCY  = c->CY,                                                   \
-        lOY  = c->OY,                                                   \
-        lCRV = c->CRV,                                                  \
-        lCBU = c->CBU,                                                  \
-        lCGU = c->CGU,                                                  \
-        lCGV = c->CGV;                                                  \
-                                                                        \
-    vector unsigned short lCSHIFT = c->CSHIFT;                          \
-                                                                        \
-    ubyte *y1i   = in[0];                                               \
-    ubyte *y2i   = in[0]+instrides[0];                                  \
-    ubyte *ui    = in[1];                                               \
-    ubyte *vi    = in[2];                                               \
-                                                                        \
-    vector unsigned char *oute                                          \
-        = (vector unsigned char *)                                      \
-            (oplanes[0]+srcSliceY*outstrides[0]);                       \
-    vector unsigned char *outo                                          \
-        = (vector unsigned char *)                                      \
-            (oplanes[0]+srcSliceY*outstrides[0]+outstrides[0]);         \
-                                                                        \
-                                                                        \
-    instrides_scl[0] = instrides[0]*2-w;  /* the loop moves y{1,2}i by w */ \
-    instrides_scl[1] = instrides[1]-w/2;  /* the loop moves ui by w/2 */    \
-    instrides_scl[2] = instrides[2]-w/2;  /* the loop moves vi by w/2 */    \
-                                                                        \
-                                                                        \
-    for (i=0;i<h/2;i++) {                                               \
-        vec_dstst (outo, (0x02000002|(((w*3+32)/32)<<16)), 0);          \
-        vec_dstst (oute, (0x02000002|(((w*3+32)/32)<<16)), 1);          \
-                                                                        \
-        for (j=0;j<w/16;j++) {                                          \
-                                                                        \
-            y1ivP = (vector unsigned char *)y1i;                        \
-            y2ivP = (vector unsigned char *)y2i;                        \
-            uivP  = (vector unsigned char *)ui;                         \
-            vivP  = (vector unsigned char *)vi;                         \
-                                                                        \
-            align_perm = vec_lvsl (0, y1i);                             \
-            y0 = (vector unsigned char)                                 \
-                 vec_perm (y1ivP[0], y1ivP[1], align_perm);             \
-                                                                        \
-            align_perm = vec_lvsl (0, y2i);                             \
-            y1 = (vector unsigned char)                                 \
-                 vec_perm (y2ivP[0], y2ivP[1], align_perm);             \
-                                                                        \
-            align_perm = vec_lvsl (0, ui);                              \
-            u = (vector signed char)                                    \
-                vec_perm (uivP[0], uivP[1], align_perm);                \
-                                                                        \
-            align_perm = vec_lvsl (0, vi);                              \
-            v = (vector signed char)                                    \
-                vec_perm (vivP[0], vivP[1], align_perm);                \
-                                                                        \
-            u  = (vector signed char)                                   \
-                 vec_sub (u,(vector signed char)                        \
-                          vec_splat((vector signed char)AVV(128),0));   \
-            v  = (vector signed char)                                   \
-                 vec_sub (v,(vector signed char)                        \
-                          vec_splat((vector signed char)AVV(128),0));   \
-                                                                        \
-            U  = vec_unpackh (u);                                       \
-            V  = vec_unpackh (v);                                       \
-                                                                        \
-                                                                        \
-            Y0 = vec_unh (y0);                                          \
-            Y1 = vec_unl (y0);                                          \
-            Y2 = vec_unh (y1);                                          \
-            Y3 = vec_unl (y1);                                          \
-                                                                        \
-            Y0 = vec_mradds (Y0, lCY, lOY);                             \
-            Y1 = vec_mradds (Y1, lCY, lOY);                             \
-            Y2 = vec_mradds (Y2, lCY, lOY);                             \
-            Y3 = vec_mradds (Y3, lCY, lOY);                             \
-                                                                        \
-            /*   ux  = (CBU*(u<<CSHIFT)+0x4000)>>15 */                  \
-            ux = vec_sl (U, lCSHIFT);                                   \
-            ux = vec_mradds (ux, lCBU, (vector signed short)AVV(0));    \
-            ux0  = vec_mergeh (ux,ux);                                  \
-            ux1  = vec_mergel (ux,ux);                                  \
-                                                                        \
-            /* vx  = (CRV*(v<<CSHIFT)+0x4000)>>15;        */            \
-            vx = vec_sl (V, lCSHIFT);                                   \
-            vx = vec_mradds (vx, lCRV, (vector signed short)AVV(0));    \
-            vx0  = vec_mergeh (vx,vx);                                  \
-            vx1  = vec_mergel (vx,vx);                                  \
-                                                                        \
-            /* uvx = ((CGU*u) + (CGV*v))>>15 */                         \
-            uvx = vec_mradds (U, lCGU, (vector signed short)AVV(0));    \
-            uvx = vec_mradds (V, lCGV, uvx);                            \
-            uvx0 = vec_mergeh (uvx,uvx);                                \
-            uvx1 = vec_mergel (uvx,uvx);                                \
-                                                                        \
-            R0 = vec_add (Y0,vx0);                                      \
-            G0 = vec_add (Y0,uvx0);                                     \
-            B0 = vec_add (Y0,ux0);                                      \
-            R1 = vec_add (Y1,vx1);                                      \
-            G1 = vec_add (Y1,uvx1);                                     \
-            B1 = vec_add (Y1,ux1);                                      \
-                                                                        \
-            R  = vec_packclp (R0,R1);                                   \
-            G  = vec_packclp (G0,G1);                                   \
-            B  = vec_packclp (B0,B1);                                   \
-                                                                        \
-            out_pixels(R,G,B,oute);                                     \
-                                                                        \
-            R0 = vec_add (Y2,vx0);                                      \
-            G0 = vec_add (Y2,uvx0);                                     \
-            B0 = vec_add (Y2,ux0);                                      \
-            R1 = vec_add (Y3,vx1);                                      \
-            G1 = vec_add (Y3,uvx1);                                     \
-            B1 = vec_add (Y3,ux1);                                      \
-            R  = vec_packclp (R0,R1);                                   \
-            G  = vec_packclp (G0,G1);                                   \
-            B  = vec_packclp (B0,B1);                                   \
-                                                                        \
-                                                                        \
-            out_pixels(R,G,B,outo);                                     \
-                                                                        \
-            y1i  += 16;                                                 \
-            y2i  += 16;                                                 \
-            ui   += 8;                                                  \
-            vi   += 8;                                                  \
-                                                                        \
-        }                                                               \
-                                                                        \
-        outo  += (outstrides[0])>>4;                                    \
-        oute  += (outstrides[0])>>4;                                    \
-                                                                        \
-        ui    += instrides_scl[1];                                      \
-        vi    += instrides_scl[2];                                      \
-        y1i   += instrides_scl[0];                                      \
-        y2i   += instrides_scl[0];                                      \
-    }                                                                   \
-    return srcSliceH;                                                   \
-}
-
-
-#define out_abgr(a,b,c,ptr)  vec_mstrgb32(typeof(a),((typeof (a))AVV(0)),c,b,a,ptr)
-#define out_bgra(a,b,c,ptr)  vec_mstrgb32(typeof(a),c,b,a,((typeof (a))AVV(0)),ptr)
-#define out_rgba(a,b,c,ptr)  vec_mstrgb32(typeof(a),a,b,c,((typeof (a))AVV(0)),ptr)
-#define out_argb(a,b,c,ptr)  vec_mstrgb32(typeof(a),((typeof (a))AVV(0)),a,b,c,ptr)
-#define out_rgb24(a,b,c,ptr) vec_mstrgb24(a,b,c,ptr)
-#define out_bgr24(a,b,c,ptr) vec_mstbgr24(a,b,c,ptr)
-
-DEFCSP420_CVT (yuv2_abgr, out_abgr)
-#if 1
-DEFCSP420_CVT (yuv2_bgra, out_bgra)
-#else
-static int altivec_yuv2_bgra32 (SwsContext *c,
-                                unsigned char **in, int *instrides,
-                                int srcSliceY,        int srcSliceH,
-                                unsigned char **oplanes, int *outstrides)
-{
-    int w = c->srcW;
-    int h = srcSliceH;
-    int i,j;
-    int instrides_scl[3];
-    vector unsigned char y0,y1;
-
-    vector signed char  u,v;
-
-    vector signed short Y0,Y1,Y2,Y3;
-    vector signed short U,V;
-    vector signed short vx,ux,uvx;
-    vector signed short vx0,ux0,uvx0;
-    vector signed short vx1,ux1,uvx1;
-    vector signed short R0,G0,B0;
-    vector signed short R1,G1,B1;
-    vector unsigned char R,G,B;
-
-    vector unsigned char *uivP, *vivP;
-    vector unsigned char align_perm;
-
-    vector signed short
-        lCY  = c->CY,
-        lOY  = c->OY,
-        lCRV = c->CRV,
-        lCBU = c->CBU,
-        lCGU = c->CGU,
-        lCGV = c->CGV;
-
-    vector unsigned short lCSHIFT = c->CSHIFT;
-
-    ubyte *y1i   = in[0];
-    ubyte *y2i   = in[0]+w;
-    ubyte *ui    = in[1];
-    ubyte *vi    = in[2];
-
-    vector unsigned char *oute
-        = (vector unsigned char *)
-          (oplanes[0]+srcSliceY*outstrides[0]);
-    vector unsigned char *outo
-        = (vector unsigned char *)
-          (oplanes[0]+srcSliceY*outstrides[0]+outstrides[0]);
-
-
-    instrides_scl[0] = instrides[0];
-    instrides_scl[1] = instrides[1]-w/2;  /* the loop moves ui by w/2 */
-    instrides_scl[2] = instrides[2]-w/2;  /* the loop moves vi by w/2 */
-
-
-    for (i=0;i<h/2;i++) {
-        vec_dstst (outo, (0x02000002|(((w*3+32)/32)<<16)), 0);
-        vec_dstst (oute, (0x02000002|(((w*3+32)/32)<<16)), 1);
-
-        for (j=0;j<w/16;j++) {
-
-            y0 = vec_ldl (0,y1i);
-            y1 = vec_ldl (0,y2i);
-            uivP = (vector unsigned char *)ui;
-            vivP = (vector unsigned char *)vi;
-
-            align_perm = vec_lvsl (0, ui);
-            u  = (vector signed char)vec_perm (uivP[0], uivP[1], align_perm);
-
-            align_perm = vec_lvsl (0, vi);
-            v  = (vector signed char)vec_perm (vivP[0], vivP[1], align_perm);
-            u  = (vector signed char)
-                 vec_sub (u,(vector signed char)
-                          vec_splat((vector signed char)AVV(128),0));
-
-            v  = (vector signed char)
-                 vec_sub (v, (vector signed char)
-                          vec_splat((vector signed char)AVV(128),0));
-
-            U  = vec_unpackh (u);
-            V  = vec_unpackh (v);
-
-
-            Y0 = vec_unh (y0);
-            Y1 = vec_unl (y0);
-            Y2 = vec_unh (y1);
-            Y3 = vec_unl (y1);
-
-            Y0 = vec_mradds (Y0, lCY, lOY);
-            Y1 = vec_mradds (Y1, lCY, lOY);
-            Y2 = vec_mradds (Y2, lCY, lOY);
-            Y3 = vec_mradds (Y3, lCY, lOY);
-
-            /*   ux  = (CBU*(u<<CSHIFT)+0x4000)>>15 */
-            ux = vec_sl (U, lCSHIFT);
-            ux = vec_mradds (ux, lCBU, (vector signed short)AVV(0));
-            ux0  = vec_mergeh (ux,ux);
-            ux1  = vec_mergel (ux,ux);
-
-            /* vx  = (CRV*(v<<CSHIFT)+0x4000)>>15;        */
-            vx = vec_sl (V, lCSHIFT);
-            vx = vec_mradds (vx, lCRV, (vector signed short)AVV(0));
-            vx0  = vec_mergeh (vx,vx);
-            vx1  = vec_mergel (vx,vx);
-            /* uvx = ((CGU*u) + (CGV*v))>>15 */
-            uvx = vec_mradds (U, lCGU, (vector signed short)AVV(0));
-            uvx = vec_mradds (V, lCGV, uvx);
-            uvx0 = vec_mergeh (uvx,uvx);
-            uvx1 = vec_mergel (uvx,uvx);
-            R0 = vec_add (Y0,vx0);
-            G0 = vec_add (Y0,uvx0);
-            B0 = vec_add (Y0,ux0);
-            R1 = vec_add (Y1,vx1);
-            G1 = vec_add (Y1,uvx1);
-            B1 = vec_add (Y1,ux1);
-            R  = vec_packclp (R0,R1);
-            G  = vec_packclp (G0,G1);
-            B  = vec_packclp (B0,B1);
-
-            out_argb(R,G,B,oute);
-            R0 = vec_add (Y2,vx0);
-            G0 = vec_add (Y2,uvx0);
-            B0 = vec_add (Y2,ux0);
-            R1 = vec_add (Y3,vx1);
-            G1 = vec_add (Y3,uvx1);
-            B1 = vec_add (Y3,ux1);
-            R  = vec_packclp (R0,R1);
-            G  = vec_packclp (G0,G1);
-            B  = vec_packclp (B0,B1);
-
-            out_argb(R,G,B,outo);
-            y1i  += 16;
-            y2i  += 16;
-            ui   += 8;
-            vi   += 8;
-
-        }
-
-        outo  += (outstrides[0])>>4;
-        oute  += (outstrides[0])>>4;
-
-        ui    += instrides_scl[1];
-        vi    += instrides_scl[2];
-        y1i   += instrides_scl[0];
-        y2i   += instrides_scl[0];
-    }
-    return srcSliceH;
-}
-
-#endif
-
-
-DEFCSP420_CVT (yuv2_rgba, out_rgba)
-DEFCSP420_CVT (yuv2_argb, out_argb)
-DEFCSP420_CVT (yuv2_rgb24,  out_rgb24)
-DEFCSP420_CVT (yuv2_bgr24,  out_bgr24)
-
-
-// uyvy|uyvy|uyvy|uyvy
-// 0123 4567 89ab cdef
-static
-const vector unsigned char
-    demux_u = (const vector unsigned char)AVV(0x10,0x00,0x10,0x00,
-                                              0x10,0x04,0x10,0x04,
-                                              0x10,0x08,0x10,0x08,
-                                              0x10,0x0c,0x10,0x0c),
-    demux_v = (const vector unsigned char)AVV(0x10,0x02,0x10,0x02,
-                                              0x10,0x06,0x10,0x06,
-                                              0x10,0x0A,0x10,0x0A,
-                                              0x10,0x0E,0x10,0x0E),
-    demux_y = (const vector unsigned char)AVV(0x10,0x01,0x10,0x03,
-                                              0x10,0x05,0x10,0x07,
-                                              0x10,0x09,0x10,0x0B,
-                                              0x10,0x0D,0x10,0x0F);
-
-/*
-  this is so I can play live CCIR raw video
-*/
-static int altivec_uyvy_rgb32 (SwsContext *c,
-                               unsigned char **in, int *instrides,
-                               int srcSliceY,        int srcSliceH,
-                               unsigned char **oplanes, int *outstrides)
-{
-    int w = c->srcW;
-    int h = srcSliceH;
-    int i,j;
-    vector unsigned char uyvy;
-    vector signed   short Y,U,V;
-    vector signed   short R0,G0,B0,R1,G1,B1;
-    vector unsigned char  R,G,B;
-    vector unsigned char *out;
-    ubyte *img;
-
-    img = in[0];
-    out = (vector unsigned char *)(oplanes[0]+srcSliceY*outstrides[0]);
-
-    for (i=0;i<h;i++) {
-        for (j=0;j<w/16;j++) {
-            uyvy = vec_ld (0, img);
-            U = (vector signed short)
-                vec_perm (uyvy, (vector unsigned char)AVV(0), demux_u);
-
-            V = (vector signed short)
-                vec_perm (uyvy, (vector unsigned char)AVV(0), demux_v);
-
-            Y = (vector signed short)
-                vec_perm (uyvy, (vector unsigned char)AVV(0), demux_y);
-
-            cvtyuvtoRGB (c, Y,U,V,&R0,&G0,&B0);
-
-            uyvy = vec_ld (16, img);
-            U = (vector signed short)
-                vec_perm (uyvy, (vector unsigned char)AVV(0), demux_u);
-
-            V = (vector signed short)
-                vec_perm (uyvy, (vector unsigned char)AVV(0), demux_v);
-
-            Y = (vector signed short)
-                vec_perm (uyvy, (vector unsigned char)AVV(0), demux_y);
-
-            cvtyuvtoRGB (c, Y,U,V,&R1,&G1,&B1);
-
-            R  = vec_packclp (R0,R1);
-            G  = vec_packclp (G0,G1);
-            B  = vec_packclp (B0,B1);
-
-            //      vec_mstbgr24 (R,G,B, out);
-            out_rgba (R,G,B,out);
-
-            img += 32;
-        }
-    }
-    return srcSliceH;
-}
-
-
-
-/* Ok currently the acceleration routine only supports
-   inputs of widths a multiple of 16
-   and heights a multiple 2
-
-   So we just fall back to the C codes for this.
-*/
-SwsFunc yuv2rgb_init_altivec (SwsContext *c)
-{
-    if (!(c->flags & SWS_CPU_CAPS_ALTIVEC))
-        return NULL;
-
-    /*
-      and this seems not to matter too much I tried a bunch of
-      videos with abnormal widths and mplayer crashes else where.
-      mplayer -vo x11 -rawvideo on:w=350:h=240 raw-350x240.eyuv
-      boom with X11 bad match.
-
-    */
-    if ((c->srcW & 0xf) != 0)    return NULL;
-
-    switch (c->srcFormat) {
-    case PIX_FMT_YUV410P:
-    case PIX_FMT_YUV420P:
-    /*case IMGFMT_CLPL:        ??? */
-    case PIX_FMT_GRAY8:
-    case PIX_FMT_NV12:
-    case PIX_FMT_NV21:
-        if ((c->srcH & 0x1) != 0)
-            return NULL;
-
-        switch(c->dstFormat){
-        case PIX_FMT_RGB24:
-            av_log(c, AV_LOG_WARNING, "ALTIVEC: Color Space RGB24\n");
-            return altivec_yuv2_rgb24;
-        case PIX_FMT_BGR24:
-            av_log(c, AV_LOG_WARNING, "ALTIVEC: Color Space BGR24\n");
-            return altivec_yuv2_bgr24;
-        case PIX_FMT_ARGB:
-            av_log(c, AV_LOG_WARNING, "ALTIVEC: Color Space ARGB\n");
-            return altivec_yuv2_argb;
-        case PIX_FMT_ABGR:
-            av_log(c, AV_LOG_WARNING, "ALTIVEC: Color Space ABGR\n");
-            return altivec_yuv2_abgr;
-        case PIX_FMT_RGBA:
-            av_log(c, AV_LOG_WARNING, "ALTIVEC: Color Space RGBA\n");
-            return altivec_yuv2_rgba;
-        case PIX_FMT_BGRA:
-            av_log(c, AV_LOG_WARNING, "ALTIVEC: Color Space BGRA\n");
-            return altivec_yuv2_bgra;
-        default: return NULL;
-        }
-        break;
-
-    case PIX_FMT_UYVY422:
-        switch(c->dstFormat){
-        case PIX_FMT_BGR32:
-            av_log(c, AV_LOG_WARNING, "ALTIVEC: Color Space UYVY -> RGB32\n");
-            return altivec_uyvy_rgb32;
-        default: return NULL;
-        }
-        break;
-
-    }
-    return NULL;
-}
-
-static uint16_t roundToInt16(int64_t f){
-    int r= (f + (1<<15))>>16;
-         if (r<-0x7FFF) return 0x8000;
-    else if (r> 0x7FFF) return 0x7FFF;
-    else                return r;
-}
-
-void yuv2rgb_altivec_init_tables (SwsContext *c, const int inv_table[4],int brightness,int contrast, int saturation)
-{
-    union {
-        signed short tmp[8] __attribute__ ((aligned(16)));
-        vector signed short vec;
-    } buf;
-
-    buf.tmp[0] =  ( (0xffffLL) * contrast>>8 )>>9;                      //cy
-    buf.tmp[1] =  -256*brightness;                                      //oy
-    buf.tmp[2] =  (inv_table[0]>>3) *(contrast>>16)*(saturation>>16);   //crv
-    buf.tmp[3] =  (inv_table[1]>>3) *(contrast>>16)*(saturation>>16);   //cbu
-    buf.tmp[4] = -((inv_table[2]>>1)*(contrast>>16)*(saturation>>16));  //cgu
-    buf.tmp[5] = -((inv_table[3]>>1)*(contrast>>16)*(saturation>>16));  //cgv
-
-
-    c->CSHIFT = (vector unsigned short)vec_splat_u16(2);
-    c->CY   = vec_splat ((vector signed short)buf.vec, 0);
-    c->OY   = vec_splat ((vector signed short)buf.vec, 1);
-    c->CRV  = vec_splat ((vector signed short)buf.vec, 2);
-    c->CBU  = vec_splat ((vector signed short)buf.vec, 3);
-    c->CGU  = vec_splat ((vector signed short)buf.vec, 4);
-    c->CGV  = vec_splat ((vector signed short)buf.vec, 5);
-#if 0
-    {
-    int i;
-    char *v[6]={"cy","oy","crv","cbu","cgu","cgv"};
-    for (i=0; i<6; i++)
-        printf("%s %d ", v[i],buf.tmp[i] );
-        printf("\n");
-    }
-#endif
-    return;
-}
-
-
-void
-altivec_yuv2packedX (SwsContext *c,
-                     int16_t *lumFilter, int16_t **lumSrc, int lumFilterSize,
-                     int16_t *chrFilter, int16_t **chrSrc, int chrFilterSize,
-                     uint8_t *dest, int dstW, int dstY)
-{
-    int i,j;
-    vector signed short X,X0,X1,Y0,U0,V0,Y1,U1,V1,U,V;
-    vector signed short R0,G0,B0,R1,G1,B1;
-
-    vector unsigned char R,G,B;
-    vector unsigned char *out,*nout;
-
-    vector signed short   RND = vec_splat_s16(1<<3);
-    vector unsigned short SCL = vec_splat_u16(4);
-    unsigned long scratch[16] __attribute__ ((aligned (16)));
-
-    vector signed short *YCoeffs, *CCoeffs;
-
-    YCoeffs = c->vYCoeffsBank+dstY*lumFilterSize;
-    CCoeffs = c->vCCoeffsBank+dstY*chrFilterSize;
-
-    out = (vector unsigned char *)dest;
-
-    for (i=0; i<dstW; i+=16){
-        Y0 = RND;
-        Y1 = RND;
-        /* extract 16 coeffs from lumSrc */
-        for (j=0; j<lumFilterSize; j++) {
-            X0 = vec_ld (0,  &lumSrc[j][i]);
-            X1 = vec_ld (16, &lumSrc[j][i]);
-            Y0 = vec_mradds (X0, YCoeffs[j], Y0);
-            Y1 = vec_mradds (X1, YCoeffs[j], Y1);
-        }
-
-        U = RND;
-        V = RND;
-        /* extract 8 coeffs from U,V */
-        for (j=0; j<chrFilterSize; j++) {
-            X  = vec_ld (0, &chrSrc[j][i/2]);
-            U  = vec_mradds (X, CCoeffs[j], U);
-            X  = vec_ld (0, &chrSrc[j][i/2+2048]);
-            V  = vec_mradds (X, CCoeffs[j], V);
-        }
-
-        /* scale and clip signals */
-        Y0 = vec_sra (Y0, SCL);
-        Y1 = vec_sra (Y1, SCL);
-        U  = vec_sra (U,  SCL);
-        V  = vec_sra (V,  SCL);
-
-        Y0 = vec_clip_s16 (Y0);
-        Y1 = vec_clip_s16 (Y1);
-        U  = vec_clip_s16 (U);
-        V  = vec_clip_s16 (V);
-
-        /* now we have
-          Y0= y0 y1 y2 y3 y4 y5 y6 y7     Y1= y8 y9 y10 y11 y12 y13 y14 y15
-          U= u0 u1 u2 u3 u4 u5 u6 u7      V= v0 v1 v2 v3 v4 v5 v6 v7
-
-          Y0= y0 y1 y2 y3 y4 y5 y6 y7    Y1= y8 y9 y10 y11 y12 y13 y14 y15
-          U0= u0 u0 u1 u1 u2 u2 u3 u3    U1= u4 u4 u5 u5 u6 u6 u7 u7
-          V0= v0 v0 v1 v1 v2 v2 v3 v3    V1= v4 v4 v5 v5 v6 v6 v7 v7
-        */
-
-        U0 = vec_mergeh (U,U);
-        V0 = vec_mergeh (V,V);
-
-        U1 = vec_mergel (U,U);
-        V1 = vec_mergel (V,V);
-
-        cvtyuvtoRGB (c, Y0,U0,V0,&R0,&G0,&B0);
-        cvtyuvtoRGB (c, Y1,U1,V1,&R1,&G1,&B1);
-
-        R  = vec_packclp (R0,R1);
-        G  = vec_packclp (G0,G1);
-        B  = vec_packclp (B0,B1);
-
-        switch(c->dstFormat) {
-            case PIX_FMT_ABGR:  out_abgr  (R,G,B,out); break;
-            case PIX_FMT_BGRA:  out_bgra  (R,G,B,out); break;
-            case PIX_FMT_RGBA:  out_rgba  (R,G,B,out); break;
-            case PIX_FMT_ARGB:  out_argb  (R,G,B,out); break;
-            case PIX_FMT_RGB24: out_rgb24 (R,G,B,out); break;
-            case PIX_FMT_BGR24: out_bgr24 (R,G,B,out); break;
-            default:
-            {
-                /* If this is reached, the caller should have called yuv2packedXinC
-                   instead. */
-                static int printed_error_message;
-                if (!printed_error_message) {
-                    av_log(c, AV_LOG_ERROR, "altivec_yuv2packedX doesn't support %s output\n",
-                           sws_format_name(c->dstFormat));
-                    printed_error_message=1;
-                }
-                return;
-            }
-        }
-    }
-
-    if (i < dstW) {
-        i -= 16;
-
-        Y0 = RND;
-        Y1 = RND;
-        /* extract 16 coeffs from lumSrc */
-        for (j=0; j<lumFilterSize; j++) {
-            X0 = vec_ld (0,  &lumSrc[j][i]);
-            X1 = vec_ld (16, &lumSrc[j][i]);
-            Y0 = vec_mradds (X0, YCoeffs[j], Y0);
-            Y1 = vec_mradds (X1, YCoeffs[j], Y1);
-        }
-
-        U = RND;
-        V = RND;
-        /* extract 8 coeffs from U,V */
-        for (j=0; j<chrFilterSize; j++) {
-            X  = vec_ld (0, &chrSrc[j][i/2]);
-            U  = vec_mradds (X, CCoeffs[j], U);
-            X  = vec_ld (0, &chrSrc[j][i/2+2048]);
-            V  = vec_mradds (X, CCoeffs[j], V);
-        }
-
-        /* scale and clip signals */
-        Y0 = vec_sra (Y0, SCL);
-        Y1 = vec_sra (Y1, SCL);
-        U  = vec_sra (U,  SCL);
-        V  = vec_sra (V,  SCL);
-
-        Y0 = vec_clip_s16 (Y0);
-        Y1 = vec_clip_s16 (Y1);
-        U  = vec_clip_s16 (U);
-        V  = vec_clip_s16 (V);
-
-        /* now we have
-           Y0= y0 y1 y2 y3 y4 y5 y6 y7     Y1= y8 y9 y10 y11 y12 y13 y14 y15
-           U = u0 u1 u2 u3 u4 u5 u6 u7     V = v0 v1 v2 v3 v4 v5 v6 v7
-
-           Y0= y0 y1 y2 y3 y4 y5 y6 y7    Y1= y8 y9 y10 y11 y12 y13 y14 y15
-           U0= u0 u0 u1 u1 u2 u2 u3 u3    U1= u4 u4 u5 u5 u6 u6 u7 u7
-           V0= v0 v0 v1 v1 v2 v2 v3 v3    V1= v4 v4 v5 v5 v6 v6 v7 v7
-        */
-
-        U0 = vec_mergeh (U,U);
-        V0 = vec_mergeh (V,V);
-
-        U1 = vec_mergel (U,U);
-        V1 = vec_mergel (V,V);
-
-        cvtyuvtoRGB (c, Y0,U0,V0,&R0,&G0,&B0);
-        cvtyuvtoRGB (c, Y1,U1,V1,&R1,&G1,&B1);
-
-        R  = vec_packclp (R0,R1);
-        G  = vec_packclp (G0,G1);
-        B  = vec_packclp (B0,B1);
-
-        nout = (vector unsigned char *)scratch;
-        switch(c->dstFormat) {
-            case PIX_FMT_ABGR:  out_abgr  (R,G,B,nout); break;
-            case PIX_FMT_BGRA:  out_bgra  (R,G,B,nout); break;
-            case PIX_FMT_RGBA:  out_rgba  (R,G,B,nout); break;
-            case PIX_FMT_ARGB:  out_argb  (R,G,B,nout); break;
-            case PIX_FMT_RGB24: out_rgb24 (R,G,B,nout); break;
-            case PIX_FMT_BGR24: out_bgr24 (R,G,B,nout); break;
-            default:
-                /* Unreachable, I think. */
-                av_log(c, AV_LOG_ERROR, "altivec_yuv2packedX doesn't support %s output\n",
-                       sws_format_name(c->dstFormat));
-                return;
-        }
-
-        memcpy (&((uint32_t*)dest)[i], scratch, (dstW-i)/4);
-    }
-
-}
+/*
+  marc.hoffman at analog.com    March 8, 2004
+
+  AltiVec acceleration for colorspace conversion revision 0.2
+
+  convert I420 YV12 to RGB in various formats,
+    it rejects images that are not in 420 formats
+    it rejects images that don't have widths of multiples of 16
+    it rejects images that don't have heights of multiples of 2
+  reject defers to C simulation codes.
+
+  lots of optimizations to be done here
+
+  1. need to fix saturation code, I just couldn't get it to fly with packs and adds.
+     so we currently use max min to clip
+
+  2. the inefficient use of chroma loading needs a bit of brushing up
+
+  3. analysis of pipeline stalls needs to be done, use shark to identify pipeline stalls
+
+
+  MODIFIED to calculate coeffs from currently selected color space.
+  MODIFIED core to be a macro which you spec the output format.
+  ADDED UYVY conversion which is never called due to some thing in SWSCALE.
+  CORRECTED algorithim selection to be strict on input formats.
+  ADDED runtime detection of altivec.
+
+  ADDED altivec_yuv2packedX vertical scl + RGB converter
+
+  March 27,2004
+  PERFORMANCE ANALYSIS
+
+  The C version use 25% of the processor or ~250Mips for D1 video rawvideo used as test
+  The ALTIVEC version uses 10% of the processor or ~100Mips for D1 video same sequence
+
+  720*480*30  ~10MPS
+
+  so we have roughly 10clocks per pixel this is too high something has to be wrong.
+
+  OPTIMIZED clip codes to utilize vec_max and vec_packs removing the need for vec_min.
+
+  OPTIMIZED DST OUTPUT cache/dma controls. we are pretty much
+  guaranteed to have the input video frame it was just decompressed so
+  it probably resides in L1 caches.  However we are creating the
+  output video stream this needs to use the DSTST instruction to
+  optimize for the cache.  We couple this with the fact that we are
+  not going to be visiting the input buffer again so we mark it Least
+  Recently Used.  This shaves 25% of the processor cycles off.
+
+  Now MEMCPY is the largest mips consumer in the system, probably due
+  to the inefficient X11 stuff.
+
+  GL libraries seem to be very slow on this machine 1.33Ghz PB running
+  Jaguar, this is not the case for my 1Ghz PB.  I thought it might be
+  a versioning issues, however I have libGL.1.2.dylib for both
+  machines. ((We need to figure this out now))
+
+  GL2 libraries work now with patch for RGB32
+
+  NOTE quartz vo driver ARGB32_to_RGB24 consumes 30% of the processor
+
+  Integrated luma prescaling adjustment for saturation/contrast/brightness adjustment.
+*/
+
+/*
+ * This file is part of FFmpeg.
+ *
+ * FFmpeg is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License as published by
+ * the Free Software Foundation; either version 2 of the License, or
+ * (at your option) any later version.
+ *
+ * FFmpeg is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ *
+ * You should have received a copy of the GNU General Public License
+ * along with FFmpeg; if not, write to the Free Software
+ * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
+ */
+
+#include <stdio.h>
+#include <stdlib.h>
+#include <string.h>
+#include <inttypes.h>
+#include <assert.h>
+#include "config.h"
+#ifdef HAVE_MALLOC_H
+#include <malloc.h>
+#endif
+#include "rgb2rgb.h"
+#include "swscale.h"
+#include "swscale_internal.h"
+
+#undef PROFILE_THE_BEAST
+#undef INC_SCALING
+
+typedef unsigned char ubyte;
+typedef signed char   sbyte;
+
+
+/* RGB interleaver, 16 planar pels 8-bit samples per channel in
+   homogeneous vector registers x0,x1,x2 are interleaved with the
+   following technique:
+
+      o0 = vec_mergeh (x0,x1);
+      o1 = vec_perm (o0, x2, perm_rgb_0);
+      o2 = vec_perm (o0, x2, perm_rgb_1);
+      o3 = vec_mergel (x0,x1);
+      o4 = vec_perm (o3,o2,perm_rgb_2);
+      o5 = vec_perm (o3,o2,perm_rgb_3);
+
+  perm_rgb_0:   o0(RG).h v1(B) --> o1*
+              0   1  2   3   4
+             rgbr|gbrg|brgb|rgbr
+             0010 0100 1001 0010
+             0102 3145 2673 894A
+
+  perm_rgb_1:   o0(RG).h v1(B) --> o2
+              0   1  2   3   4
+             gbrg|brgb|bbbb|bbbb
+             0100 1001 1111 1111
+             B5CD 6EF7 89AB CDEF
+
+  perm_rgb_2:   o3(RG).l o2(rgbB.l) --> o4*
+              0   1  2   3   4
+             gbrg|brgb|rgbr|gbrg
+             1111 1111 0010 0100
+             89AB CDEF 0182 3945
+
+  perm_rgb_2:   o3(RG).l o2(rgbB.l) ---> o5*
+              0   1  2   3   4
+             brgb|rgbr|gbrg|brgb
+             1001 0010 0100 1001
+             a67b 89cA BdCD eEFf
+
+*/
+static
+const vector unsigned char
+  perm_rgb_0 = (const vector unsigned char)AVV(0x00,0x01,0x10,0x02,0x03,0x11,0x04,0x05,
+                                               0x12,0x06,0x07,0x13,0x08,0x09,0x14,0x0a),
+  perm_rgb_1 = (const vector unsigned char)AVV(0x0b,0x15,0x0c,0x0d,0x16,0x0e,0x0f,0x17,
+                                               0x18,0x19,0x1a,0x1b,0x1c,0x1d,0x1e,0x1f),
+  perm_rgb_2 = (const vector unsigned char)AVV(0x10,0x11,0x12,0x13,0x14,0x15,0x16,0x17,
+                                               0x00,0x01,0x18,0x02,0x03,0x19,0x04,0x05),
+  perm_rgb_3 = (const vector unsigned char)AVV(0x1a,0x06,0x07,0x1b,0x08,0x09,0x1c,0x0a,
+                                               0x0b,0x1d,0x0c,0x0d,0x1e,0x0e,0x0f,0x1f);
+
+#define vec_merge3(x2,x1,x0,y0,y1,y2)       \
+do {                                        \
+    typeof(x0) o0,o2,o3;                    \
+        o0 = vec_mergeh (x0,x1);            \
+        y0 = vec_perm (o0, x2, perm_rgb_0); \
+        o2 = vec_perm (o0, x2, perm_rgb_1); \
+        o3 = vec_mergel (x0,x1);            \
+        y1 = vec_perm (o3,o2,perm_rgb_2);   \
+        y2 = vec_perm (o3,o2,perm_rgb_3);   \
+} while(0)
+
+#define vec_mstbgr24(x0,x1,x2,ptr)      \
+do {                                    \
+    typeof(x0) _0,_1,_2;                \
+    vec_merge3 (x0,x1,x2,_0,_1,_2);     \
+    vec_st (_0, 0, ptr++);              \
+    vec_st (_1, 0, ptr++);              \
+    vec_st (_2, 0, ptr++);              \
+}  while (0);
+
+#define vec_mstrgb24(x0,x1,x2,ptr)      \
+do {                                    \
+    typeof(x0) _0,_1,_2;                \
+    vec_merge3 (x2,x1,x0,_0,_1,_2);     \
+    vec_st (_0, 0, ptr++);              \
+    vec_st (_1, 0, ptr++);              \
+    vec_st (_2, 0, ptr++);              \
+}  while (0);
+
+/* pack the pixels in rgb0 format
+   msb R
+   lsb 0
+*/
+#define vec_mstrgb32(T,x0,x1,x2,x3,ptr)                                       \
+do {                                                                          \
+    T _0,_1,_2,_3;                                                            \
+    _0 = vec_mergeh (x0,x1);                                                  \
+    _1 = vec_mergeh (x2,x3);                                                  \
+    _2 = (T)vec_mergeh ((vector unsigned short)_0,(vector unsigned short)_1); \
+    _3 = (T)vec_mergel ((vector unsigned short)_0,(vector unsigned short)_1); \
+    vec_st (_2, 0*16, (T *)ptr);                                              \
+    vec_st (_3, 1*16, (T *)ptr);                                              \
+    _0 = vec_mergel (x0,x1);                                                  \
+    _1 = vec_mergel (x2,x3);                                                  \
+    _2 = (T)vec_mergeh ((vector unsigned short)_0,(vector unsigned short)_1); \
+    _3 = (T)vec_mergel ((vector unsigned short)_0,(vector unsigned short)_1); \
+    vec_st (_2, 2*16, (T *)ptr);                                              \
+    vec_st (_3, 3*16, (T *)ptr);                                              \
+    ptr += 4;                                                                 \
+}  while (0);
+
+/*
+
+  | 1     0       1.4021   | | Y |
+  | 1    -0.3441 -0.7142   |x| Cb|
+  | 1     1.7718  0        | | Cr|
+
+
+  Y:      [-128 127]
+  Cb/Cr : [-128 127]
+
+  typical yuv conversion work on Y: 0-255 this version has been optimized for jpeg decode.
+
+*/
+
+
+
+
+#define vec_unh(x) \
+    (vector signed short) \
+        vec_perm(x,(typeof(x))AVV(0),\
+                 (vector unsigned char)AVV(0x10,0x00,0x10,0x01,0x10,0x02,0x10,0x03,\
+                                           0x10,0x04,0x10,0x05,0x10,0x06,0x10,0x07))
+#define vec_unl(x) \
+    (vector signed short) \
+        vec_perm(x,(typeof(x))AVV(0),\
+                 (vector unsigned char)AVV(0x10,0x08,0x10,0x09,0x10,0x0A,0x10,0x0B,\
+                                           0x10,0x0C,0x10,0x0D,0x10,0x0E,0x10,0x0F))
+
+#define vec_clip_s16(x) \
+    vec_max (vec_min (x, (vector signed short)AVV(235,235,235,235,235,235,235,235)),\
+                         (vector signed short)AVV( 16, 16, 16, 16, 16, 16, 16, 16))
+
+#define vec_packclp(x,y) \
+    (vector unsigned char)vec_packs \
+        ((vector unsigned short)vec_max (x,(vector signed short) AVV(0)), \
+         (vector unsigned short)vec_max (y,(vector signed short) AVV(0)))
+
+//#define out_pixels(a,b,c,ptr) vec_mstrgb32(typeof(a),((typeof (a))AVV(0)),a,a,a,ptr)
+
+
+static inline void cvtyuvtoRGB (SwsContext *c,
+                                vector signed short Y, vector signed short U, vector signed short V,
+                                vector signed short *R, vector signed short *G, vector signed short *B)
+{
+    vector signed   short vx,ux,uvx;
+
+    Y = vec_mradds (Y, c->CY, c->OY);
+    U  = vec_sub (U,(vector signed short)
+                    vec_splat((vector signed short)AVV(128),0));
+    V  = vec_sub (V,(vector signed short)
+                    vec_splat((vector signed short)AVV(128),0));
+
+    //   ux  = (CBU*(u<<c->CSHIFT)+0x4000)>>15;
+    ux = vec_sl (U, c->CSHIFT);
+    *B = vec_mradds (ux, c->CBU, Y);
+
+    // vx  = (CRV*(v<<c->CSHIFT)+0x4000)>>15;
+    vx = vec_sl (V, c->CSHIFT);
+    *R = vec_mradds (vx, c->CRV, Y);
+
+    // uvx = ((CGU*u) + (CGV*v))>>15;
+    uvx = vec_mradds (U, c->CGU, Y);
+    *G  = vec_mradds (V, c->CGV, uvx);
+}
+
+
+/*
+  ------------------------------------------------------------------------------
+  CS converters
+  ------------------------------------------------------------------------------
+*/
+
+
+#define DEFCSP420_CVT(name,out_pixels)                                  \
+static int altivec_##name (SwsContext *c,                               \
+                           unsigned char **in, int *instrides,          \
+                           int srcSliceY,        int srcSliceH,         \
+                           unsigned char **oplanes, int *outstrides)    \
+{                                                                       \
+    int w = c->srcW;                                                    \
+    int h = srcSliceH;                                                  \
+    int i,j;                                                            \
+    int instrides_scl[3];                                               \
+    vector unsigned char y0,y1;                                         \
+                                                                        \
+    vector signed char  u,v;                                            \
+                                                                        \
+    vector signed short Y0,Y1,Y2,Y3;                                    \
+    vector signed short U,V;                                            \
+    vector signed short vx,ux,uvx;                                      \
+    vector signed short vx0,ux0,uvx0;                                   \
+    vector signed short vx1,ux1,uvx1;                                   \
+    vector signed short R0,G0,B0;                                       \
+    vector signed short R1,G1,B1;                                       \
+    vector unsigned char R,G,B;                                         \
+                                                                        \
+    vector unsigned char *y1ivP, *y2ivP, *uivP, *vivP;                  \
+    vector unsigned char align_perm;                                    \
+                                                                        \
+    vector signed short                                                 \
+        lCY  = c->CY,                                                   \
+        lOY  = c->OY,                                                   \
+        lCRV = c->CRV,                                                  \
+        lCBU = c->CBU,                                                  \
+        lCGU = c->CGU,                                                  \
+        lCGV = c->CGV;                                                  \
+                                                                        \
+    vector unsigned short lCSHIFT = c->CSHIFT;                          \
+                                                                        \
+    ubyte *y1i   = in[0];                                               \
+    ubyte *y2i   = in[0]+instrides[0];                                  \
+    ubyte *ui    = in[1];                                               \
+    ubyte *vi    = in[2];                                               \
+                                                                        \
+    vector unsigned char *oute                                          \
+        = (vector unsigned char *)                                      \
+            (oplanes[0]+srcSliceY*outstrides[0]);                       \
+    vector unsigned char *outo                                          \
+        = (vector unsigned char *)                                      \
+            (oplanes[0]+srcSliceY*outstrides[0]+outstrides[0]);         \
+                                                                        \
+                                                                        \
+    instrides_scl[0] = instrides[0]*2-w;  /* the loop moves y{1,2}i by w */ \
+    instrides_scl[1] = instrides[1]-w/2;  /* the loop moves ui by w/2 */    \
+    instrides_scl[2] = instrides[2]-w/2;  /* the loop moves vi by w/2 */    \
+                                                                        \
+                                                                        \
+    for (i=0;i<h/2;i++) {                                               \
+        vec_dstst (outo, (0x02000002|(((w*3+32)/32)<<16)), 0);          \
+        vec_dstst (oute, (0x02000002|(((w*3+32)/32)<<16)), 1);          \
+                                                                        \
+        for (j=0;j<w/16;j++) {                                          \
+                                                                        \
+            y1ivP = (vector unsigned char *)y1i;                        \
+            y2ivP = (vector unsigned char *)y2i;                        \
+            uivP  = (vector unsigned char *)ui;                         \
+            vivP  = (vector unsigned char *)vi;                         \
+                                                                        \
+            align_perm = vec_lvsl (0, y1i);                             \
+            y0 = (vector unsigned char)                                 \
+                 vec_perm (y1ivP[0], y1ivP[1], align_perm);             \
+                                                                        \
+            align_perm = vec_lvsl (0, y2i);                             \
+            y1 = (vector unsigned char)                                 \
+                 vec_perm (y2ivP[0], y2ivP[1], align_perm);             \
+                                                                        \
+            align_perm = vec_lvsl (0, ui);                              \
+            u = (vector signed char)                                    \
+                vec_perm (uivP[0], uivP[1], align_perm);                \
+                                                                        \
+            align_perm = vec_lvsl (0, vi);                              \
+            v = (vector signed char)                                    \
+                vec_perm (vivP[0], vivP[1], align_perm);                \
+                                                                        \
+            u  = (vector signed char)                                   \
+                 vec_sub (u,(vector signed char)                        \
+                          vec_splat((vector signed char)AVV(128),0));   \
+            v  = (vector signed char)                                   \
+                 vec_sub (v,(vector signed char)                        \
+                          vec_splat((vector signed char)AVV(128),0));   \
+                                                                        \
+            U  = vec_unpackh (u);                                       \
+            V  = vec_unpackh (v);                                       \
+                                                                        \
+                                                                        \
+            Y0 = vec_unh (y0);                                          \
+            Y1 = vec_unl (y0);                                          \
+            Y2 = vec_unh (y1);                                          \
+            Y3 = vec_unl (y1);                                          \
+                                                                        \
+            Y0 = vec_mradds (Y0, lCY, lOY);                             \
+            Y1 = vec_mradds (Y1, lCY, lOY);                             \
+            Y2 = vec_mradds (Y2, lCY, lOY);                             \
+            Y3 = vec_mradds (Y3, lCY, lOY);                             \
+                                                                        \
+            /*   ux  = (CBU*(u<<CSHIFT)+0x4000)>>15 */                  \
+            ux = vec_sl (U, lCSHIFT);                                   \
+            ux = vec_mradds (ux, lCBU, (vector signed short)AVV(0));    \
+            ux0  = vec_mergeh (ux,ux);                                  \
+            ux1  = vec_mergel (ux,ux);                                  \
+                                                                        \
+            /* vx  = (CRV*(v<<CSHIFT)+0x4000)>>15;        */            \
+            vx = vec_sl (V, lCSHIFT);                                   \
+            vx = vec_mradds (vx, lCRV, (vector signed short)AVV(0));    \
+            vx0  = vec_mergeh (vx,vx);                                  \
+            vx1  = vec_mergel (vx,vx);                                  \
+                                                                        \
+            /* uvx = ((CGU*u) + (CGV*v))>>15 */                         \
+            uvx = vec_mradds (U, lCGU, (vector signed short)AVV(0));    \
+            uvx = vec_mradds (V, lCGV, uvx);                            \
+            uvx0 = vec_mergeh (uvx,uvx);                                \
+            uvx1 = vec_mergel (uvx,uvx);                                \
+                                                                        \
+            R0 = vec_add (Y0,vx0);                                      \
+            G0 = vec_add (Y0,uvx0);                                     \
+            B0 = vec_add (Y0,ux0);                                      \
+            R1 = vec_add (Y1,vx1);                                      \
+            G1 = vec_add (Y1,uvx1);                                     \
+            B1 = vec_add (Y1,ux1);                                      \
+                                                                        \
+            R  = vec_packclp (R0,R1);                                   \
+            G  = vec_packclp (G0,G1);                                   \
+            B  = vec_packclp (B0,B1);                                   \
+                                                                        \
+            out_pixels(R,G,B,oute);                                     \
+                                                                        \
+            R0 = vec_add (Y2,vx0);                                      \
+            G0 = vec_add (Y2,uvx0);                                     \
+            B0 = vec_add (Y2,ux0);                                      \
+            R1 = vec_add (Y3,vx1);                                      \
+            G1 = vec_add (Y3,uvx1);                                     \
+            B1 = vec_add (Y3,ux1);                                      \
+            R  = vec_packclp (R0,R1);                                   \
+            G  = vec_packclp (G0,G1);                                   \
+            B  = vec_packclp (B0,B1);                                   \
+                                                                        \
+                                                                        \
+            out_pixels(R,G,B,outo);                                     \
+                                                                        \
+            y1i  += 16;                                                 \
+            y2i  += 16;                                                 \
+            ui   += 8;                                                  \
+            vi   += 8;                                                  \
+                                                                        \
+        }                                                               \
+                                                                        \
+        outo  += (outstrides[0])>>4;                                    \
+        oute  += (outstrides[0])>>4;                                    \
+                                                                        \
+        ui    += instrides_scl[1];                                      \
+        vi    += instrides_scl[2];                                      \
+        y1i   += instrides_scl[0];                                      \
+        y2i   += instrides_scl[0];                                      \
+    }                                                                   \
+    return srcSliceH;                                                   \
+}
+
+
+#define out_abgr(a,b,c,ptr)  vec_mstrgb32(typeof(a),((typeof (a))AVV(0)),c,b,a,ptr)
+#define out_bgra(a,b,c,ptr)  vec_mstrgb32(typeof(a),c,b,a,((typeof (a))AVV(0)),ptr)
+#define out_rgba(a,b,c,ptr)  vec_mstrgb32(typeof(a),a,b,c,((typeof (a))AVV(0)),ptr)
+#define out_argb(a,b,c,ptr)  vec_mstrgb32(typeof(a),((typeof (a))AVV(0)),a,b,c,ptr)
+#define out_rgb24(a,b,c,ptr) vec_mstrgb24(a,b,c,ptr)
+#define out_bgr24(a,b,c,ptr) vec_mstbgr24(a,b,c,ptr)
+
+DEFCSP420_CVT (yuv2_abgr, out_abgr)
+#if 1
+DEFCSP420_CVT (yuv2_bgra, out_bgra)
+#else
+static int altivec_yuv2_bgra32 (SwsContext *c,
+                                unsigned char **in, int *instrides,
+                                int srcSliceY,        int srcSliceH,
+                                unsigned char **oplanes, int *outstrides)
+{
+    int w = c->srcW;
+    int h = srcSliceH;
+    int i,j;
+    int instrides_scl[3];
+    vector unsigned char y0,y1;
+
+    vector signed char  u,v;
+
+    vector signed short Y0,Y1,Y2,Y3;
+    vector signed short U,V;
+    vector signed short vx,ux,uvx;
+    vector signed short vx0,ux0,uvx0;
+    vector signed short vx1,ux1,uvx1;
+    vector signed short R0,G0,B0;
+    vector signed short R1,G1,B1;
+    vector unsigned char R,G,B;
+
+    vector unsigned char *uivP, *vivP;
+    vector unsigned char align_perm;
+
+    vector signed short
+        lCY  = c->CY,
+        lOY  = c->OY,
+        lCRV = c->CRV,
+        lCBU = c->CBU,
+        lCGU = c->CGU,
+        lCGV = c->CGV;
+
+    vector unsigned short lCSHIFT = c->CSHIFT;
+
+    ubyte *y1i   = in[0];
+    ubyte *y2i   = in[0]+w;
+    ubyte *ui    = in[1];
+    ubyte *vi    = in[2];
+
+    vector unsigned char *oute
+        = (vector unsigned char *)
+          (oplanes[0]+srcSliceY*outstrides[0]);
+    vector unsigned char *outo
+        = (vector unsigned char *)
+          (oplanes[0]+srcSliceY*outstrides[0]+outstrides[0]);
+
+
+    instrides_scl[0] = instrides[0];
+    instrides_scl[1] = instrides[1]-w/2;  /* the loop moves ui by w/2 */
+    instrides_scl[2] = instrides[2]-w/2;  /* the loop moves vi by w/2 */
+
+
+    for (i=0;i<h/2;i++) {
+        vec_dstst (outo, (0x02000002|(((w*3+32)/32)<<16)), 0);
+        vec_dstst (oute, (0x02000002|(((w*3+32)/32)<<16)), 1);
+
+        for (j=0;j<w/16;j++) {
+
+            y0 = vec_ldl (0,y1i);
+            y1 = vec_ldl (0,y2i);
+            uivP = (vector unsigned char *)ui;
+            vivP = (vector unsigned char *)vi;
+
+            align_perm = vec_lvsl (0, ui);
+            u  = (vector signed char)vec_perm (uivP[0], uivP[1], align_perm);
+
+            align_perm = vec_lvsl (0, vi);
+            v  = (vector signed char)vec_perm (vivP[0], vivP[1], align_perm);
+            u  = (vector signed char)
+                 vec_sub (u,(vector signed char)
+                          vec_splat((vector signed char)AVV(128),0));
+
+            v  = (vector signed char)
+                 vec_sub (v, (vector signed char)
+                          vec_splat((vector signed char)AVV(128),0));
+
+            U  = vec_unpackh (u);
+            V  = vec_unpackh (v);
+
+
+            Y0 = vec_unh (y0);
+            Y1 = vec_unl (y0);
+            Y2 = vec_unh (y1);
+            Y3 = vec_unl (y1);
+
+            Y0 = vec_mradds (Y0, lCY, lOY);
+            Y1 = vec_mradds (Y1, lCY, lOY);
+            Y2 = vec_mradds (Y2, lCY, lOY);
+            Y3 = vec_mradds (Y3, lCY, lOY);
+
+            /*   ux  = (CBU*(u<<CSHIFT)+0x4000)>>15 */
+            ux = vec_sl (U, lCSHIFT);
+            ux = vec_mradds (ux, lCBU, (vector signed short)AVV(0));
+            ux0  = vec_mergeh (ux,ux);
+            ux1  = vec_mergel (ux,ux);
+
+            /* vx  = (CRV*(v<<CSHIFT)+0x4000)>>15;        */
+            vx = vec_sl (V, lCSHIFT);
+            vx = vec_mradds (vx, lCRV, (vector signed short)AVV(0));
+            vx0  = vec_mergeh (vx,vx);
+            vx1  = vec_mergel (vx,vx);
+            /* uvx = ((CGU*u) + (CGV*v))>>15 */
+            uvx = vec_mradds (U, lCGU, (vector signed short)AVV(0));
+            uvx = vec_mradds (V, lCGV, uvx);
+            uvx0 = vec_mergeh (uvx,uvx);
+            uvx1 = vec_mergel (uvx,uvx);
+            R0 = vec_add (Y0,vx0);
+            G0 = vec_add (Y0,uvx0);
+            B0 = vec_add (Y0,ux0);
+            R1 = vec_add (Y1,vx1);
+            G1 = vec_add (Y1,uvx1);
+            B1 = vec_add (Y1,ux1);
+            R  = vec_packclp (R0,R1);
+            G  = vec_packclp (G0,G1);
+            B  = vec_packclp (B0,B1);
+
+            out_argb(R,G,B,oute);
+            R0 = vec_add (Y2,vx0);
+            G0 = vec_add (Y2,uvx0);
+            B0 = vec_add (Y2,ux0);
+            R1 = vec_add (Y3,vx1);
+            G1 = vec_add (Y3,uvx1);
+            B1 = vec_add (Y3,ux1);
+            R  = vec_packclp (R0,R1);
+            G  = vec_packclp (G0,G1);
+            B  = vec_packclp (B0,B1);
+
+            out_argb(R,G,B,outo);
+            y1i  += 16;
+            y2i  += 16;
+            ui   += 8;
+            vi   += 8;
+
+        }
+
+        outo  += (outstrides[0])>>4;
+        oute  += (outstrides[0])>>4;
+
+        ui    += instrides_scl[1];
+        vi    += instrides_scl[2];
+        y1i   += instrides_scl[0];
+        y2i   += instrides_scl[0];
+    }
+    return srcSliceH;
+}
+
+#endif
+
+
+DEFCSP420_CVT (yuv2_rgba, out_rgba)
+DEFCSP420_CVT (yuv2_argb, out_argb)
+DEFCSP420_CVT (yuv2_rgb24,  out_rgb24)
+DEFCSP420_CVT (yuv2_bgr24,  out_bgr24)
+
+
+// uyvy|uyvy|uyvy|uyvy
+// 0123 4567 89ab cdef
+static
+const vector unsigned char
+    demux_u = (const vector unsigned char)AVV(0x10,0x00,0x10,0x00,
+                                              0x10,0x04,0x10,0x04,
+                                              0x10,0x08,0x10,0x08,
+                                              0x10,0x0c,0x10,0x0c),
+    demux_v = (const vector unsigned char)AVV(0x10,0x02,0x10,0x02,
+                                              0x10,0x06,0x10,0x06,
+                                              0x10,0x0A,0x10,0x0A,
+                                              0x10,0x0E,0x10,0x0E),
+    demux_y = (const vector unsigned char)AVV(0x10,0x01,0x10,0x03,
+                                              0x10,0x05,0x10,0x07,
+                                              0x10,0x09,0x10,0x0B,
+                                              0x10,0x0D,0x10,0x0F);
+
+/*
+  this is so I can play live CCIR raw video
+*/
+static int altivec_uyvy_rgb32 (SwsContext *c,
+                               unsigned char **in, int *instrides,
+                               int srcSliceY,        int srcSliceH,
+                               unsigned char **oplanes, int *outstrides)
+{
+    int w = c->srcW;
+    int h = srcSliceH;
+    int i,j;
+    vector unsigned char uyvy;
+    vector signed   short Y,U,V;
+    vector signed   short R0,G0,B0,R1,G1,B1;
+    vector unsigned char  R,G,B;
+    vector unsigned char *out;
+    ubyte *img;
+
+    img = in[0];
+    out = (vector unsigned char *)(oplanes[0]+srcSliceY*outstrides[0]);
+
+    for (i=0;i<h;i++) {
+        for (j=0;j<w/16;j++) {
+            uyvy = vec_ld (0, img);
+            U = (vector signed short)
+                vec_perm (uyvy, (vector unsigned char)AVV(0), demux_u);
+
+            V = (vector signed short)
+                vec_perm (uyvy, (vector unsigned char)AVV(0), demux_v);
+
+            Y = (vector signed short)
+                vec_perm (uyvy, (vector unsigned char)AVV(0), demux_y);
+
+            cvtyuvtoRGB (c, Y,U,V,&R0,&G0,&B0);
+
+            uyvy = vec_ld (16, img);
+            U = (vector signed short)
+                vec_perm (uyvy, (vector unsigned char)AVV(0), demux_u);
+
+            V = (vector signed short)
+                vec_perm (uyvy, (vector unsigned char)AVV(0), demux_v);
+
+            Y = (vector signed short)
+                vec_perm (uyvy, (vector unsigned char)AVV(0), demux_y);
+
+            cvtyuvtoRGB (c, Y,U,V,&R1,&G1,&B1);
+
+            R  = vec_packclp (R0,R1);
+            G  = vec_packclp (G0,G1);
+            B  = vec_packclp (B0,B1);
+
+            //      vec_mstbgr24 (R,G,B, out);
+            out_rgba (R,G,B,out);
+
+            img += 32;
+        }
+    }
+    return srcSliceH;
+}
+
+
+
+/* Ok currently the acceleration routine only supports
+   inputs of widths a multiple of 16
+   and heights a multiple 2
+
+   So we just fall back to the C codes for this.
+*/
+SwsFunc yuv2rgb_init_altivec (SwsContext *c)
+{
+    if (!(c->flags & SWS_CPU_CAPS_ALTIVEC))
+        return NULL;
+
+    /*
+      and this seems not to matter too much I tried a bunch of
+      videos with abnormal widths and MPlayer crashes elsewhere.
+      mplayer -vo x11 -rawvideo on:w=350:h=240 raw-350x240.eyuv
+      boom with X11 bad match.
+
+    */
+    if ((c->srcW & 0xf) != 0)    return NULL;
+
+    switch (c->srcFormat) {
+    case PIX_FMT_YUV410P:
+    case PIX_FMT_YUV420P:
+    /*case IMGFMT_CLPL:        ??? */
+    case PIX_FMT_GRAY8:
+    case PIX_FMT_NV12:
+    case PIX_FMT_NV21:
+        if ((c->srcH & 0x1) != 0)
+            return NULL;
+
+        switch(c->dstFormat){
+        case PIX_FMT_RGB24:
+            av_log(c, AV_LOG_WARNING, "ALTIVEC: Color Space RGB24\n");
+            return altivec_yuv2_rgb24;
+        case PIX_FMT_BGR24:
+            av_log(c, AV_LOG_WARNING, "ALTIVEC: Color Space BGR24\n");
+            return altivec_yuv2_bgr24;
+        case PIX_FMT_ARGB:
+            av_log(c, AV_LOG_WARNING, "ALTIVEC: Color Space ARGB\n");
+            return altivec_yuv2_argb;
+        case PIX_FMT_ABGR:
+            av_log(c, AV_LOG_WARNING, "ALTIVEC: Color Space ABGR\n");
+            return altivec_yuv2_abgr;
+        case PIX_FMT_RGBA:
+            av_log(c, AV_LOG_WARNING, "ALTIVEC: Color Space RGBA\n");
+            return altivec_yuv2_rgba;
+        case PIX_FMT_BGRA:
+            av_log(c, AV_LOG_WARNING, "ALTIVEC: Color Space BGRA\n");
+            return altivec_yuv2_bgra;
+        default: return NULL;
+        }
+        break;
+
+    case PIX_FMT_UYVY422:
+        switch(c->dstFormat){
+        case PIX_FMT_BGR32:
+            av_log(c, AV_LOG_WARNING, "ALTIVEC: Color Space UYVY -> RGB32\n");
+            return altivec_uyvy_rgb32;
+        default: return NULL;
+        }
+        break;
+
+    }
+    return NULL;
+}
+
+void yuv2rgb_altivec_init_tables (SwsContext *c, const int inv_table[4],int brightness,int contrast, int saturation)
+{
+    union {
+        signed short tmp[8] __attribute__ ((aligned(16)));
+        vector signed short vec;
+    } buf;
+
+    buf.tmp[0] =  ((0xffffLL) * contrast>>8)>>9;                        //cy
+    buf.tmp[1] =  -256*brightness;                                      //oy
+    buf.tmp[2] =  (inv_table[0]>>3) *(contrast>>16)*(saturation>>16);   //crv
+    buf.tmp[3] =  (inv_table[1]>>3) *(contrast>>16)*(saturation>>16);   //cbu
+    buf.tmp[4] = -((inv_table[2]>>1)*(contrast>>16)*(saturation>>16));  //cgu
+    buf.tmp[5] = -((inv_table[3]>>1)*(contrast>>16)*(saturation>>16));  //cgv
+
+
+    c->CSHIFT = (vector unsigned short)vec_splat_u16(2);
+    c->CY   = vec_splat ((vector signed short)buf.vec, 0);
+    c->OY   = vec_splat ((vector signed short)buf.vec, 1);
+    c->CRV  = vec_splat ((vector signed short)buf.vec, 2);
+    c->CBU  = vec_splat ((vector signed short)buf.vec, 3);
+    c->CGU  = vec_splat ((vector signed short)buf.vec, 4);
+    c->CGV  = vec_splat ((vector signed short)buf.vec, 5);
+#if 0
+    {
+    int i;
+    char *v[6]={"cy","oy","crv","cbu","cgu","cgv"};
+    for (i=0; i<6; i++)
+        printf("%s %d ", v[i],buf.tmp[i] );
+        printf("\n");
+    }
+#endif
+    return;
+}
+
+
+void
+altivec_yuv2packedX (SwsContext *c,
+                     int16_t *lumFilter, int16_t **lumSrc, int lumFilterSize,
+                     int16_t *chrFilter, int16_t **chrSrc, int chrFilterSize,
+                     uint8_t *dest, int dstW, int dstY)
+{
+    int i,j;
+    vector signed short X,X0,X1,Y0,U0,V0,Y1,U1,V1,U,V;
+    vector signed short R0,G0,B0,R1,G1,B1;
+
+    vector unsigned char R,G,B;
+    vector unsigned char *out,*nout;
+
+    vector signed short   RND = vec_splat_s16(1<<3);
+    vector unsigned short SCL = vec_splat_u16(4);
+    unsigned long scratch[16] __attribute__ ((aligned (16)));
+
+    vector signed short *YCoeffs, *CCoeffs;
+
+    YCoeffs = c->vYCoeffsBank+dstY*lumFilterSize;
+    CCoeffs = c->vCCoeffsBank+dstY*chrFilterSize;
+
+    out = (vector unsigned char *)dest;
+
+    for (i=0; i<dstW; i+=16){
+        Y0 = RND;
+        Y1 = RND;
+        /* extract 16 coeffs from lumSrc */
+        for (j=0; j<lumFilterSize; j++) {
+            X0 = vec_ld (0,  &lumSrc[j][i]);
+            X1 = vec_ld (16, &lumSrc[j][i]);
+            Y0 = vec_mradds (X0, YCoeffs[j], Y0);
+            Y1 = vec_mradds (X1, YCoeffs[j], Y1);
+        }
+
+        U = RND;
+        V = RND;
+        /* extract 8 coeffs from U,V */
+        for (j=0; j<chrFilterSize; j++) {
+            X  = vec_ld (0, &chrSrc[j][i/2]);
+            U  = vec_mradds (X, CCoeffs[j], U);
+            X  = vec_ld (0, &chrSrc[j][i/2+2048]);
+            V  = vec_mradds (X, CCoeffs[j], V);
+        }
+
+        /* scale and clip signals */
+        Y0 = vec_sra (Y0, SCL);
+        Y1 = vec_sra (Y1, SCL);
+        U  = vec_sra (U,  SCL);
+        V  = vec_sra (V,  SCL);
+
+        Y0 = vec_clip_s16 (Y0);
+        Y1 = vec_clip_s16 (Y1);
+        U  = vec_clip_s16 (U);
+        V  = vec_clip_s16 (V);
+
+        /* now we have
+          Y0= y0 y1 y2 y3 y4 y5 y6 y7     Y1= y8 y9 y10 y11 y12 y13 y14 y15
+          U= u0 u1 u2 u3 u4 u5 u6 u7      V= v0 v1 v2 v3 v4 v5 v6 v7
+
+          Y0= y0 y1 y2 y3 y4 y5 y6 y7    Y1= y8 y9 y10 y11 y12 y13 y14 y15
+          U0= u0 u0 u1 u1 u2 u2 u3 u3    U1= u4 u4 u5 u5 u6 u6 u7 u7
+          V0= v0 v0 v1 v1 v2 v2 v3 v3    V1= v4 v4 v5 v5 v6 v6 v7 v7
+        */
+
+        U0 = vec_mergeh (U,U);
+        V0 = vec_mergeh (V,V);
+
+        U1 = vec_mergel (U,U);
+        V1 = vec_mergel (V,V);
+
+        cvtyuvtoRGB (c, Y0,U0,V0,&R0,&G0,&B0);
+        cvtyuvtoRGB (c, Y1,U1,V1,&R1,&G1,&B1);
+
+        R  = vec_packclp (R0,R1);
+        G  = vec_packclp (G0,G1);
+        B  = vec_packclp (B0,B1);
+
+        switch(c->dstFormat) {
+            case PIX_FMT_ABGR:  out_abgr  (R,G,B,out); break;
+            case PIX_FMT_BGRA:  out_bgra  (R,G,B,out); break;
+            case PIX_FMT_RGBA:  out_rgba  (R,G,B,out); break;
+            case PIX_FMT_ARGB:  out_argb  (R,G,B,out); break;
+            case PIX_FMT_RGB24: out_rgb24 (R,G,B,out); break;
+            case PIX_FMT_BGR24: out_bgr24 (R,G,B,out); break;
+            default:
+            {
+                /* If this is reached, the caller should have called yuv2packedXinC
+                   instead. */
+                static int printed_error_message;
+                if (!printed_error_message) {
+                    av_log(c, AV_LOG_ERROR, "altivec_yuv2packedX doesn't support %s output\n",
+                           sws_format_name(c->dstFormat));
+                    printed_error_message=1;
+                }
+                return;
+            }
+        }
+    }
+
+    if (i < dstW) {
+        i -= 16;
+
+        Y0 = RND;
+        Y1 = RND;
+        /* extract 16 coeffs from lumSrc */
+        for (j=0; j<lumFilterSize; j++) {
+            X0 = vec_ld (0,  &lumSrc[j][i]);
+            X1 = vec_ld (16, &lumSrc[j][i]);
+            Y0 = vec_mradds (X0, YCoeffs[j], Y0);
+            Y1 = vec_mradds (X1, YCoeffs[j], Y1);
+        }
+
+        U = RND;
+        V = RND;
+        /* extract 8 coeffs from U,V */
+        for (j=0; j<chrFilterSize; j++) {
+            X  = vec_ld (0, &chrSrc[j][i/2]);
+            U  = vec_mradds (X, CCoeffs[j], U);
+            X  = vec_ld (0, &chrSrc[j][i/2+2048]);
+            V  = vec_mradds (X, CCoeffs[j], V);
+        }
+
+        /* scale and clip signals */
+        Y0 = vec_sra (Y0, SCL);
+        Y1 = vec_sra (Y1, SCL);
+        U  = vec_sra (U,  SCL);
+        V  = vec_sra (V,  SCL);
+
+        Y0 = vec_clip_s16 (Y0);
+        Y1 = vec_clip_s16 (Y1);
+        U  = vec_clip_s16 (U);
+        V  = vec_clip_s16 (V);
+
+        /* now we have
+           Y0= y0 y1 y2 y3 y4 y5 y6 y7     Y1= y8 y9 y10 y11 y12 y13 y14 y15
+           U = u0 u1 u2 u3 u4 u5 u6 u7     V = v0 v1 v2 v3 v4 v5 v6 v7
+
+           Y0= y0 y1 y2 y3 y4 y5 y6 y7    Y1= y8 y9 y10 y11 y12 y13 y14 y15
+           U0= u0 u0 u1 u1 u2 u2 u3 u3    U1= u4 u4 u5 u5 u6 u6 u7 u7
+           V0= v0 v0 v1 v1 v2 v2 v3 v3    V1= v4 v4 v5 v5 v6 v6 v7 v7
+        */
+
+        U0 = vec_mergeh (U,U);
+        V0 = vec_mergeh (V,V);
+
+        U1 = vec_mergel (U,U);
+        V1 = vec_mergel (V,V);
+
+        cvtyuvtoRGB (c, Y0,U0,V0,&R0,&G0,&B0);
+        cvtyuvtoRGB (c, Y1,U1,V1,&R1,&G1,&B1);
+
+        R  = vec_packclp (R0,R1);
+        G  = vec_packclp (G0,G1);
+        B  = vec_packclp (B0,B1);
+
+        nout = (vector unsigned char *)scratch;
+        switch(c->dstFormat) {
+            case PIX_FMT_ABGR:  out_abgr  (R,G,B,nout); break;
+            case PIX_FMT_BGRA:  out_bgra  (R,G,B,nout); break;
+            case PIX_FMT_RGBA:  out_rgba  (R,G,B,nout); break;
+            case PIX_FMT_ARGB:  out_argb  (R,G,B,nout); break;
+            case PIX_FMT_RGB24: out_rgb24 (R,G,B,nout); break;
+            case PIX_FMT_BGR24: out_bgr24 (R,G,B,nout); break;
+            default:
+                /* Unreachable, I think. */
+                av_log(c, AV_LOG_ERROR, "altivec_yuv2packedX doesn't support %s output\n",
+                       sws_format_name(c->dstFormat));
+                return;
+        }
+
+        memcpy (&((uint32_t*)dest)[i], scratch, (dstW-i)/4);
+    }
+
+}

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/yuv2rgb_template.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/yuv2rgb_template.c	2008-03-21 06:48:49 UTC (rev 3911)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/yuv2rgb_template.c	2008-03-21 06:51:32 UTC (rev 3912)
@@ -2,7 +2,6 @@
  * yuv2rgb_mmx.c, Software YUV to RGB converter with Intel MMX "technology"
  *
  * Copyright (C) 2000, Silicon Integrated System Corp.
- * All Rights Reserved.
  *
  * Author: Olie Lho <ollie at sis.com.tw>
  *
@@ -138,16 +137,16 @@
     //printf("%X %X %X %X %X %X %X %X %X %X\n", (int)&c->redDither, (int)&b5Dither, (int)src[0], (int)src[1], (int)src[2], (int)dst[0],
     //srcStride[0],srcStride[1],srcStride[2],dstStride[0]);
     for (y= 0; y<srcSliceH; y++ ) {
-        uint8_t *_image = dst[0] + (y+srcSliceY)*dstStride[0];
-        uint8_t *_py = src[0] + y*srcStride[0];
-        uint8_t *_pu = src[1] + (y>>1)*srcStride[1];
-        uint8_t *_pv = src[2] + (y>>1)*srcStride[2];
+        uint8_t *image = dst[0] + (y+srcSliceY)*dstStride[0];
+        uint8_t *py = src[0] + y*srcStride[0];
+        uint8_t *pu = src[1] + (y>>1)*srcStride[1];
+        uint8_t *pv = src[2] + (y>>1)*srcStride[2];
         long index= -h_size/2;
 
-        b5Dither= dither8[y&1];
-        g6Dither= dither4[y&1];
-        g5Dither= dither8[y&1];
-        r5Dither= dither8[(y+1)&1];
+        b5Dither= ff_dither8[y&1];
+        g6Dither= ff_dither4[y&1];
+        g5Dither= ff_dither8[y&1];
+        r5Dither= ff_dither8[(y+1)&1];
         /* this mmx assembly code deals with SINGLE scan line at a time, it convert 8
            pixels in each iteration */
         __asm__ __volatile__ (
@@ -207,8 +206,8 @@
         "add  $4, %0    \n\t"
         " js  1b        \n\t"
 
-        : "+r" (index), "+r" (_image)
-        : "r" (_pu - index), "r" (_pv - index), "r"(&c->redDither), "r" (_py - 2*index)
+        : "+r" (index), "+r" (image)
+        : "r" (pu - index), "r" (pv - index), "r"(&c->redDither), "r" (py - 2*index)
         );
     }
 
@@ -233,16 +232,16 @@
     //printf("%X %X %X %X %X %X %X %X %X %X\n", (int)&c->redDither, (int)&b5Dither, (int)src[0], (int)src[1], (int)src[2], (int)dst[0],
     //srcStride[0],srcStride[1],srcStride[2],dstStride[0]);
     for (y= 0; y<srcSliceH; y++ ) {
-        uint8_t *_image = dst[0] + (y+srcSliceY)*dstStride[0];
-        uint8_t *_py = src[0] + y*srcStride[0];
-        uint8_t *_pu = src[1] + (y>>1)*srcStride[1];
-        uint8_t *_pv = src[2] + (y>>1)*srcStride[2];
+        uint8_t *image = dst[0] + (y+srcSliceY)*dstStride[0];
+        uint8_t *py = src[0] + y*srcStride[0];
+        uint8_t *pu = src[1] + (y>>1)*srcStride[1];
+        uint8_t *pv = src[2] + (y>>1)*srcStride[2];
         long index= -h_size/2;
 
-        b5Dither= dither8[y&1];
-        g6Dither= dither4[y&1];
-        g5Dither= dither8[y&1];
-        r5Dither= dither8[(y+1)&1];
+        b5Dither= ff_dither8[y&1];
+        g6Dither= ff_dither4[y&1];
+        g5Dither= ff_dither8[y&1];
+        r5Dither= ff_dither8[(y+1)&1];
         /* this mmx assembly code deals with SINGLE scan line at a time, it convert 8
            pixels in each iteration */
         __asm__ __volatile__ (
@@ -297,8 +296,8 @@
         "add $16, %1            \n\t"
         "add $4, %0             \n\t"
         " js 1b                 \n\t"
-        : "+r" (index), "+r" (_image)
-        : "r" (_pu - index), "r" (_pv - index), "r"(&c->redDither), "r" (_py - 2*index)
+        : "+r" (index), "+r" (image)
+        : "r" (pu - index), "r" (pv - index), "r"(&c->redDither), "r" (py - 2*index)
         );
     }
 
@@ -321,10 +320,10 @@
     __asm__ __volatile__ ("pxor %mm4, %mm4;" /* zero mm4 */ );
 
     for (y= 0; y<srcSliceH; y++ ) {
-        uint8_t *_image = dst[0] + (y+srcSliceY)*dstStride[0];
-        uint8_t *_py = src[0] + y*srcStride[0];
-        uint8_t *_pu = src[1] + (y>>1)*srcStride[1];
-        uint8_t *_pv = src[2] + (y>>1)*srcStride[2];
+        uint8_t *image = dst[0] + (y+srcSliceY)*dstStride[0];
+        uint8_t *py = src[0] + y*srcStride[0];
+        uint8_t *pu = src[1] + (y>>1)*srcStride[1];
+        uint8_t *pv = src[2] + (y>>1)*srcStride[2];
         long index= -h_size/2;
 
         /* this mmx assembly code deals with SINGLE scan line at a time, it convert 8
@@ -339,8 +338,8 @@
 YUV2RGB
         /* mm0=B, %%mm2=G, %%mm1=R */
 #ifdef HAVE_MMX2
-        "movq "MANGLE(M24A)", %%mm4     \n\t"
-        "movq "MANGLE(M24C)", %%mm7     \n\t"
+        "movq "MANGLE(ff_M24A)", %%mm4     \n\t"
+        "movq "MANGLE(ff_M24C)", %%mm7     \n\t"
         "pshufw $0x50, %%mm0, %%mm5     \n\t" /* B3 B2 B3 B2  B1 B0 B1 B0 */
         "pshufw $0x50, %%mm2, %%mm3     \n\t" /* G3 G2 G3 G2  G1 G0 G1 G0 */
         "pshufw $0x00, %%mm1, %%mm6     \n\t" /* R1 R0 R1 R0  R1 R0 R1 R0 */
@@ -359,7 +358,7 @@
         "pshufw $0x55, %%mm2, %%mm3     \n\t" /* G4 G3 G4 G3  G4 G3 G4 G3 */
         "pshufw $0xA5, %%mm1, %%mm6     \n\t" /* R5 R4 R5 R4  R3 R2 R3 R2 */
 
-        "pand "MANGLE(M24B)", %%mm5     \n\t" /* B5       B4        B3    */
+        "pand "MANGLE(ff_M24B)", %%mm5     \n\t" /* B5       B4        B3    */
         "pand          %%mm7, %%mm3     \n\t" /*       G4        G3       */
         "pand          %%mm4, %%mm6     \n\t" /*    R4        R3       R2 */
 
@@ -374,7 +373,7 @@
 
         "pand          %%mm7, %%mm5     \n\t" /*       B7        B6       */
         "pand          %%mm4, %%mm3     \n\t" /*    G7        G6       G5 */
-        "pand "MANGLE(M24B)", %%mm6     \n\t" /* R7       R6        R5    */
+        "pand "MANGLE(ff_M24B)", %%mm6     \n\t" /* R7       R6        R5    */
         "movd 4 (%3, %0), %%mm1;" /* Load 4 Cr 00 00 00 00 v3 v2 v1 v0 */
 \
         "por          %%mm5, %%mm3      \n\t"
@@ -443,8 +442,8 @@
         "add  $4, %0    \n\t"
         " js  1b        \n\t"
 
-        : "+r" (index), "+r" (_image)
-        : "r" (_pu - index), "r" (_pv - index), "r"(&c->redDither), "r" (_py - 2*index)
+        : "+r" (index), "+r" (image)
+        : "r" (pu - index), "r" (pv - index), "r"(&c->redDither), "r" (py - 2*index)
         );
     }
 
@@ -467,10 +466,10 @@
     __asm__ __volatile__ ("pxor %mm4, %mm4;" /* zero mm4 */ );
 
     for (y= 0; y<srcSliceH; y++ ) {
-        uint8_t *_image = dst[0] + (y+srcSliceY)*dstStride[0];
-        uint8_t *_py = src[0] + y*srcStride[0];
-        uint8_t *_pu = src[1] + (y>>1)*srcStride[1];
-        uint8_t *_pv = src[2] + (y>>1)*srcStride[2];
+        uint8_t *image = dst[0] + (y+srcSliceY)*dstStride[0];
+        uint8_t *py = src[0] + y*srcStride[0];
+        uint8_t *pu = src[1] + (y>>1)*srcStride[1];
+        uint8_t *pv = src[2] + (y>>1)*srcStride[2];
         long index= -h_size/2;
 
         /* this mmx assembly code deals with SINGLE scan line at a time, it convert 8
@@ -529,8 +528,8 @@
         "add  $4, %0    \n\t"
         " js  1b        \n\t"
 
-        : "+r" (index), "+r" (_image)
-        : "r" (_pu - index), "r" (_pv - index), "r"(&c->redDither), "r" (_py - 2*index)
+        : "+r" (index), "+r" (image)
+        : "r" (pu - index), "r" (pv - index), "r"(&c->redDither), "r" (py - 2*index)
         );
     }
 



From mean at mail.berlios.de  Fri Mar 21 07:51:46 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 21 Mar 2008 07:51:46 +0100
Subject: [Avidemux-svn-commit] r3913 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat
Message-ID: <200803210651.m2L6pk9Z005052@sheep.berlios.de>

Author: mean
Date: 2008-03-21 07:51:44 +0100 (Fri, 21 Mar 2008)
New Revision: 3913

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/flvenc.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/isom.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/matroskaenc.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/movenc.c
Log:
[Lavupdate] lavformat


Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/flvenc.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/flvenc.c	2008-03-21 06:51:32 UTC (rev 3912)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/flvenc.c	2008-03-21 06:51:44 UTC (rev 3913)
@@ -328,7 +328,8 @@
     "video/x-flv",
     "flv",
     sizeof(FLVContext),
-#ifdef CONFIG_LIBMP3LAME
+//MEANX #ifdef CONFIG_LIBMP3LAME
+#ifdef HAVE_LIBMP3LAME  
     CODEC_ID_MP3,
 #else // CONFIG_LIBMP3LAME
     CODEC_ID_ADPCM_SWF,

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/isom.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/isom.c	2008-03-21 06:51:32 UTC (rev 3912)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/isom.c	2008-03-21 06:51:44 UTC (rev 3913)
@@ -40,7 +40,7 @@
     { CODEC_ID_AAC       , 102 }, /* MPEG2 AAC Main */
     { CODEC_ID_AAC       , 103 }, /* MPEG2 AAC Low */
     { CODEC_ID_AAC       , 104 }, /* MPEG2 AAC SSR */
-    { CODEC_ID_MP3       , 107 }, /* 11172-3 */
+    { CODEC_ID_MP2       , 107 }, /* 11172-3 */ /* MEANX WAS MP3 */
     { CODEC_ID_MP3       , 105 }, /* 13818-3 */
     { CODEC_ID_MPEG1VIDEO, 106 }, /* 11172-2 */
     { CODEC_ID_MJPEG     , 108 }, /* 10918-1 */
@@ -149,7 +149,9 @@
     { CODEC_ID_MACE3, MKTAG('M', 'A', 'C', '3') }, /* Macintosh Audio Compression and Expansion 3:1 */
     { CODEC_ID_MACE6, MKTAG('M', 'A', 'C', '6') }, /* Macintosh Audio Compression and Expansion 6:1 */
 
-    { CODEC_ID_MP3, MKTAG('.', 'm', 'p', '3') }, /* MPEG layer 3 */ /* sample files at http://www.3ivx.com/showcase.html use this tag */
+    //MEANX { CODEC_ID_MP3, MKTAG('.', 'm', 'p', '3') }, /* MPEG layer 3 */ /* sample files at http://www.3ivx.com/showcase.html use this tag */
+     { CODEC_ID_MP3, MKTAG( 'm', 'p', '4','a') },
+    // /MEANX
     { CODEC_ID_MP3, 0x6D730055 }, /* MPEG layer 3 */
     { CODEC_ID_MP3, MKTAG('m', 's', 0x00, 0x55) }, /* MPEG layer 3 *//* XXX: check endianness */
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/matroskaenc.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/matroskaenc.c	2008-03-21 06:51:32 UTC (rev 3912)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/matroskaenc.c	2008-03-21 06:51:44 UTC (rev 3913)
@@ -391,6 +391,7 @@
 
 static int put_xiph_codecpriv(AVFormatContext *s, ByteIOContext *pb, AVCodecContext *codec)
 {
+#if 0 // MEANX avidemux does thing differently
     uint8_t *header_start[3];
     int header_len[3];
     int first_header_size;
@@ -415,6 +416,28 @@
         put_buffer(pb, header_start[j], header_len[j]);
 
     return 0;
+#else
+   // Not endian safe....
+      uint32_t packetLen[3],*ptr=(uint32_t *)codec->extradata;
+      uint8_t *data[3],i,j;
+      if( 3*4+ptr[0]+ptr[1]+ptr[2]!=codec->extradata_size)
+      {
+        av_log(s, AV_LOG_ERROR, "Broken avidemux xiph header.\n");
+        return -1;
+      }
+      data[0]=codec->extradata+3*4;
+      data[1]=data[0]+ptr[0];
+      data[2]=data[1]+ptr[1];
+      put_byte(pb, 2);                    // number packets - 1
+      for (j = 0; j < 2; j++) 
+      {
+          put_xiph_size(pb, ptr[j]);
+      }
+      for (j = 0; j < 3; j++)
+        put_buffer(pb, data[j], ptr[j]);
+      
+      return 0; // /MEANX
+#endif
 }
 
 #define FLAC_STREAMINFO_SIZE 34
@@ -544,6 +567,23 @@
         put_ebml_uint (pb, MATROSKA_ID_TRACKNUMBER     , i + 1);
         put_ebml_uint (pb, MATROSKA_ID_TRACKUID        , i + 1);
         put_ebml_uint (pb, MATROSKA_ID_TRACKFLAGLACING , 0);    // no lacing (yet)
+/**  MEANX : Add a default duration for video **/
+        if(codec->codec_type==CODEC_TYPE_VIDEO)
+        {
+          if(codec->time_base.den && codec->time_base.num)
+          {
+            int num=codec->time_base.num;
+            int den=codec->time_base.den;
+            unsigned int default_duration;
+            float period=num;
+                  period/=den;
+                  period*=1000*1000*1000; // in ns
+                  default_duration=(unsigned int)floor(period);
+                  put_ebml_uint (pb, MATROSKA_ID_TRACKDEFAULTDURATION ,default_duration);
+          }
+        }
+        
+/**  MEANX : Add a default duration for video **/
 
         if (st->language[0])
             put_ebml_string(pb, MATROSKA_ID_TRACKLANGUAGE, st->language);
@@ -845,3 +885,13 @@
     mkv_write_trailer,
     .codec_tag = (const AVCodecTag*[]){codec_wav_tags, 0},
 };
+// MEANX
+//
+int matroskaenc_init(void)
+{
+    av_register_output_format(&matroska_muxer);
+    return 0;
+}
+// /MEANX
+
+

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/movenc.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/movenc.c	2008-03-21 06:51:32 UTC (rev 3912)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/movenc.c	2008-03-21 06:51:44 UTC (rev 3913)
@@ -39,6 +39,11 @@
 #define MODE_3G2 4
 #define MODE_IPOD 5
 
+// MEANX
+extern int ADM_useAlternateTagging(void);
+// MEANX
+
+
 typedef struct MOVIentry {
     unsigned int flags, size;
     uint64_t     pos;
@@ -245,6 +250,8 @@
 
 static int mov_write_esds_tag(ByteIOContext *pb, MOVTrack* track) // Basic
 {
+int codec_id; // MEANX
+
     offset_t pos = url_ftell(pb);
     int decoderSpecificInfoLen = track->vosLen ? descrLength(track->vosLen):0;
 
@@ -262,7 +269,11 @@
     putDescr(pb, 0x04, 13 + decoderSpecificInfoLen);
 
     // Object type indication
-    put_byte(pb, codec_get_tag(ff_mp4_obj_type, track->enc->codec_id));
+   //MEANX  put_byte(pb, codec_get_tag(ff_mp4_obj_type, track->enc->codec_id));
+   codec_id=track->enc->codec_id;
+    if(ADM_useAlternateTagging() && codec_id==CODEC_ID_MP3) codec_id=CODEC_ID_MP2;
+    put_byte(pb, codec_get_tag(ff_mp4_obj_type, codec_id));
+    // /MEANX
 
     // the following fields is made of 6 bits to identify the streamtype (4 for video, 5 for audio)
     // plus 1 bit to indicate upstream and 1 bit set to 1 (reserved)
@@ -382,7 +393,7 @@
         track->enc->codec_id == CODEC_ID_PCM_S24LE ||
         track->enc->codec_id == CODEC_ID_PCM_S32LE))
         mov_write_wave_tag(pb, track);
-    else if(track->tag == MKTAG('m','p','4','a'))
+    else if(track->tag == MKTAG('m','p','4','a')) // MEANX : Not changed, AAC OR MP3 NOT SURE...
         mov_write_esds_tag(pb, track);
     else if(track->enc->codec_id == CODEC_ID_AMR_NB)
         mov_write_amr_tag(pb, track);
@@ -930,8 +941,11 @@
 
     put_be32(pb, av_rescale_rnd(track->trackDuration, globalTimescale, track->timescale, AV_ROUND_UP)); /* duration   ... doesn't seem to effect psp */
 
-    put_be32(pb, track->cluster[0].cts); /* first pts is cts since dts is 0 */
-    put_be32(pb, 0x00010000);
+    // MEANX NO put_be32(pb, track->cluster[0].cts); /* first pts is cts since dts is 0 */
+    // MEANX NO put_be32(pb, 0x00010000);
+ put_be32(pb, 0x00000000);
+ put_be32(pb, 0x00000001);
+
     return 0x24;
 }
 
@@ -1747,3 +1761,15 @@
     .codec_tag = (const AVCodecTag*[]){ff_mp4_obj_type, 0},
 };
 #endif
+/* MEANX */
+int movenc_init(void)
+{
+    av_register_output_format(&mov_muxer);
+    av_register_output_format(&tgp_muxer);
+    av_register_output_format(&mp4_muxer);
+    av_register_output_format(&psp_muxer);
+    av_register_output_format(&tg2_muxer);
+    // FIXME av_register_output_format(&ipod_muxer);
+    return 0;
+}
+/* MEANX */



From mean at mail.berlios.de  Fri Mar 21 07:51:49 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 21 Mar 2008 07:51:49 +0100
Subject: [Avidemux-svn-commit] r3914 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavutil
Message-ID: <200803210651.m2L6pnLl005062@sheep.berlios.de>

Author: mean
Date: 2008-03-21 07:51:48 +0100 (Fri, 21 Mar 2008)
New Revision: 3914

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavutil/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavutil/avutil.h
Log:
[Lavupdate] lavutil


Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavutil/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavutil/CMakeLists.txt	2008-03-21 06:51:44 UTC (rev 3913)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavutil/CMakeLists.txt	2008-03-21 06:51:48 UTC (rev 3914)
@@ -1,9 +1,28 @@
 SET(ADM_LIB ADM_libavutil)
 
 SET(${ADM_LIB}_SRCS 
-	integer.c  intfloat_readwrite.c  mathematics.c  rational.c  md5.c  crc.c
-	log.c  adler32.c  lls.c  random.c  string.c)
-
+adler32.c
+aes.c
+base64.c
+crc.c
+des.c
+fifo.c
+integer.c
+intfloat_readwrite.c
+lls.c
+log.c
+lzo.c
+mathematics.c
+md5.c
+mem.c
+random.c
+rational.c
+rc4.c
+sha1.c
+softfloat.c
+string.c
+tree.c
+)
 ADD_LIBRARY(${ADM_LIB} SHARED ${${ADM_LIB}_SRCS})
 ADD_TARGET_CFLAGS(${ADM_LIB} "-DHAVE_AV_CONFIG_H")
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavutil/avutil.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavutil/avutil.h	2008-03-21 06:51:44 UTC (rev 3913)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavutil/avutil.h	2008-03-21 06:51:48 UTC (rev 3914)
@@ -48,7 +48,14 @@
 
 #define LIBAVUTIL_IDENT         "Lavu" AV_STRINGIFY(LIBAVUTIL_VERSION)
 
+/* MEANX
+ * - */
+#define ASMALIGN(ZEROBITS) ".p2align " #ZEROBITS "\n\t"
+/* /MEANX
+ */
 
+
+
 #include "common.h"
 #include "mathematics.h"
 #include "rational.h"



From mean at mail.berlios.de  Fri Mar 21 07:51:52 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 21 Mar 2008 07:51:52 +0100
Subject: [Avidemux-svn-commit] r3915 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libpostproc
Message-ID: <200803210651.m2L6pqcN005072@sheep.berlios.de>

Author: mean
Date: 2008-03-21 07:51:51 +0100 (Fri, 21 Mar 2008)
New Revision: 3915

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libpostproc/postprocess.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libpostproc/postprocess.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libpostproc/postprocess_template.c
Log:
[Lavupdate] libpostproc


Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libpostproc/postprocess.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libpostproc/postprocess.c	2008-03-21 06:51:48 UTC (rev 3914)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libpostproc/postprocess.c	2008-03-21 06:51:51 UTC (rev 3915)
@@ -74,7 +74,9 @@
 //Changelog: use the Subversion log
 
 #include "config.h"
-#include "avutil.h"
+// MEANX #include "avutil.h"
+#include "../ADM_lavutil/avutil.h"
+// /MEANX
 #include <inttypes.h>
 #include <stdio.h>
 #include <stdlib.h>

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libpostproc/postprocess.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libpostproc/postprocess.h	2008-03-21 06:51:48 UTC (rev 3914)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libpostproc/postprocess.h	2008-03-21 06:51:51 UTC (rev 3915)
@@ -27,8 +27,9 @@
  *     external postprocessing API
  */
 
-#include "libavutil/avutil.h"
-
+// MEANX #include "libavutil/avutil.h"
+#include "../ADM_lavutil/avutil.h"
+// /MEANX
 #define LIBPOSTPROC_VERSION_MAJOR 51
 #define LIBPOSTPROC_VERSION_MINOR  1
 #define LIBPOSTPROC_VERSION_MICRO  0

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libpostproc/postprocess_template.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libpostproc/postprocess_template.c	2008-03-21 06:51:48 UTC (rev 3914)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libpostproc/postprocess_template.c	2008-03-21 06:51:51 UTC (rev 3915)
@@ -50,8 +50,14 @@
 #undef PMAXUB
 
 #ifdef HAVE_MMX2
+// MEANX
+#undef REAL_PAVGB
+// /MEANX
 #define REAL_PAVGB(a,b) "pavgb " #a ", " #b " \n\t"
 #elif defined (HAVE_3DNOW)
+// MEANX
+#undef REAL_PAVGB
+// /MEANX
 #define REAL_PAVGB(a,b) "pavgusb " #a ", " #b " \n\t"
 #endif
 #define PAVGB(a,b)  REAL_PAVGB(a,b)
@@ -1204,11 +1210,18 @@
 
 #undef FIND_MIN_MAX
 #ifdef HAVE_MMX2
+// MEANX
+#undef REAL_FIND_MIN_MAX
+// /MEANX
 #define REAL_FIND_MIN_MAX(addr)\
                 "movq " #addr ", %%mm0                  \n\t"\
                 "pminub %%mm0, %%mm7                    \n\t"\
                 "pmaxub %%mm0, %%mm6                    \n\t"
 #else
+// MEANX
+#undef REAL_FIND_MIN_MAX
+// /MEANX
+
 #define REAL_FIND_MIN_MAX(addr)\
                 "movq " #addr ", %%mm0                  \n\t"\
                 "movq %%mm7, %%mm1                      \n\t"\
@@ -3205,6 +3218,8 @@
                         "lea (%3,%5), %%"REG_d"         \n\t"
                         "pxor %%mm4, %%mm4              \n\t"
 #ifdef HAVE_MMX2
+// MEANX
+#undef REAL_SCALED_CPY
 #define REAL_SCALED_CPY(src1, src2, dst1, dst2)                                                \
                         "movq " #src1 ", %%mm0          \n\t"\
                         "movq " #src1 ", %%mm5          \n\t"\
@@ -3228,6 +3243,8 @@
                         "movq %%mm1, " #dst2 "          \n\t"\
 
 #else //HAVE_MMX2
+// MEANX
+#undef REAL_SCALED_CPY
 #define REAL_SCALED_CPY(src1, src2, dst1, dst2)                                        \
                         "movq " #src1 ", %%mm0          \n\t"\
                         "movq " #src1 ", %%mm5          \n\t"\



From mean at mail.berlios.de  Fri Mar 21 07:52:09 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 21 Mar 2008 07:52:09 +0100
Subject: [Avidemux-svn-commit] r3916 - in
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg:
	. ADM_lavcodec ADM_lavcodec/i386 ADM_lavformat ADM_lavutil
	ADM_libpostproc ADM_libswscale
Message-ID: <200803210652.m2L6q9tu005083@sheep.berlios.de>

Author: mean
Date: 2008-03-21 07:51:55 +0100 (Fri, 21 Mar 2008)
New Revision: 3916

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/avcodec.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/dsputil.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/ffv1.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/h263.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/h263dec.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/h264.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/cputest.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/dsputil_mmx.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/mpeg12.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/mpeg12enc.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/mpegvideo.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/mpegvideo_enc.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/opt.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/update_ffconf.sh
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/utils.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/avformat.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavutil/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libpostproc/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/rgb2rgb.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale_internal.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/yuv2rgb.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/config.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ffconf.c
Log:
[LAV*] Fix build on amd64


Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/CMakeLists.txt	2008-03-21 06:51:51 UTC (rev 3915)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/CMakeLists.txt	2008-03-21 06:51:55 UTC (rev 3916)
@@ -10,7 +10,7 @@
 	xan.c  rpza.c  msrle.c  msvideo1.c  cinepak.c  vqavideo.c  idcinvideo.c  smc.c
 	flicvideo.c  interplayvideo.c  dpcm.c  8bps.c  vmdav.c  truemotion1.c  flac.c
 	g726.c  qtrle.c  lcl.c  snow.c  rangecoder.c  bitstream.c  h264idct.c  h261.c
-	amr.c  tscc.c  resample2.c  pthread.c  qdm2.c  bitstream_filter.c  eval.c  vc1.c
+	amr.c  tscc.c  resample2.c    qdm2.c  bitstream_filter.c  eval.c  vc1.c
 	vc1dsp.c  vp56.c  vp6.c  vp5.c  indeo2.c  smacker.c  opt.c  fraps.c  dnxhddec.c
 	mpeg12data.c  mpegaudiodata.c  msmpeg4data.c  vc1data.c  vp56data.c  mjpegbdec.c
 	h263_parser.c  h264_parser.c  mpeg4video_parser.c  mpegvideo_enc.c  mpeg12enc.c
@@ -43,6 +43,7 @@
 ENDIF (ADM_DEBUG)
 IF (UNIX)
 	ADD_TARGET_CFLAGS(${ADM_LIB} -fPIC -DPIC)
+        ADD_TARGET_LDFLAGS(${ADM_LIB} "-rdynamic -export-dynamic -Wl,-Bsymbolic")
 ENDIF (UNIX)
 
 TARGET_LINK_LIBRARIES(${ADM_LIB} ADM_core ADM_libavutil ${ZLIB_LIBRARY})

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/avcodec.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/avcodec.h	2008-03-21 06:51:51 UTC (rev 3915)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/avcodec.h	2008-03-21 06:51:55 UTC (rev 3916)
@@ -26,9 +26,9 @@
  * external API header
  */
 
+#include "config.h" // MEANX
+#include "../ADM_lavutil/avutil.h" // MEANX
 
-#include "libavutil/avutil.h"
-
 #define LIBAVCODEC_VERSION_MAJOR 51
 #define LIBAVCODEC_VERSION_MINOR 51
 #define LIBAVCODEC_VERSION_MICRO  0
@@ -449,6 +449,8 @@
 #define CODEC_FLAG2_CHUNKS        0x00008000 ///< Input bitstream might be truncated at a packet boundaries instead of only at frame boundaries.
 #define CODEC_FLAG2_NON_LINEAR_QUANT 0x00010000 ///< Use MPEG-2 nonlinear quantizer.
 #define CODEC_FLAG2_BIT_RESERVOIR 0x00020000 ///< Use a bit reservoir when encoding if possible
+//MEANX: NEVER EVER USE CLOSED GOP ?
+#define CODEC_FLAG2_32_PULLDOWN   0x80000000 
 
 /* Unsupported options :
  *              Syntax Arithmetic coding (SAC)
@@ -1215,6 +1217,7 @@
      * - decoding: unused
      */
     int rc_max_rate;
+    int rc_max_rate_header; /*< That one is set in the header MEANX */
 
     /**
      * minimum bitrate
@@ -1229,6 +1232,8 @@
      * - decoding: unused
      */
     int rc_buffer_size;
+    int rc_buffer_size_header;  /*< That one is set in the header MEANX*/
+
     float rc_buffer_aggressivity;
 
     /**

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/dsputil.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/dsputil.h	2008-03-21 06:51:51 UTC (rev 3915)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/dsputil.h	2008-03-21 06:51:55 UTC (rev 3916)
@@ -29,8 +29,9 @@
 
 #ifndef FFMPEG_DSPUTIL_H
 #define FFMPEG_DSPUTIL_H
-
+#include "math.h" //MEANX
 #include "avcodec.h"
+#include "intreadwrite.h" //MEANX
 
 
 //#define DEBUG
@@ -510,7 +511,9 @@
 
 /* should be defined by architectures supporting
    one or more MultiMedia extension */
+#if 0 //MEANX
 int mm_support(void);
+#endif
 
 void dsputil_init_alpha(DSPContext* c, AVCodecContext *avctx);
 void dsputil_init_armv4l(DSPContext* c, AVCodecContext *avctx);
@@ -527,7 +530,8 @@
 #if defined(HAVE_MMX)
 
 #undef emms_c
-
+#include "dsputil_cpu.h" /* MEANX */
+#if 0
 #define MM_MMX    0x0001 /* standard MMX */
 #define MM_3DNOW  0x0004 /* AMD 3DNOW */
 #define MM_MMXEXT 0x0002 /* SSE integer functions or AMD MMX ext */
@@ -538,14 +542,15 @@
 #define MM_SSSE3  0x0080 /* Conroe SSSE3 functions */
 
 extern int mm_flags;
-
+#endif // /MEANX
 void add_pixels_clamped_mmx(const DCTELEM *block, uint8_t *pixels, int line_size);
 void put_pixels_clamped_mmx(const DCTELEM *block, uint8_t *pixels, int line_size);
 void put_signed_pixels_clamped_mmx(const DCTELEM *block, uint8_t *pixels, int line_size);
 
 static inline void emms(void)
 {
-    asm volatile ("emms;":::"memory");
+    //asm volatile ("emms;":::"memory");
+    asm volatile ("emms;"); //  MEANX
 }
 
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/ffv1.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/ffv1.c	2008-03-21 06:51:51 UTC (rev 3915)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/ffv1.c	2008-03-21 06:51:55 UTC (rev 3916)
@@ -959,6 +959,8 @@
         clear_state(f);
     }else{
         p->key_frame= 0;
+         p->pict_type= FF_P_TYPE; // MEANX : looks more like a P to me as user
+
     }
     if(!f->plane[0].state && !f->plane[0].vlc_state)
         return -1;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/h263.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/h263.c	2008-03-21 06:51:51 UTC (rev 3915)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/h263.c	2008-03-21 06:51:55 UTC (rev 3916)
@@ -3129,8 +3129,14 @@
 static inline int mpeg4_is_resync(MpegEncContext *s){
     int bits_count= get_bits_count(&s->gb);
     int v= show_bits(&s->gb, 16);
-
-    if(s->workaround_bugs&FF_BUG_NO_PADDING){
+ if(s->lavc_build==4655 || s->xvid_build ) // Breaks multithreaded decoding meanx
+    {
+    #if 0
+    #undef printf
+    printf("bugs: %X lavc_build:%d xvid_build:%d divx_version:%d divx_build:%d %s\n",
+               s->workaround_bugs, s->lavc_build, s->xvid_build, s->divx_version, s->divx_build,
+               s->divx_packed ? "p" : "");
+    #endif
         return 0;
     }
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/h263dec.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/h263dec.c	2008-03-21 06:51:51 UTC (rev 3915)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/h263dec.c	2008-03-21 06:51:55 UTC (rev 3916)
@@ -118,7 +118,25 @@
 
     return 0;
 }
+/* MeanX : Ugly patch to detect vo ppacked stuff ... */
+int av_is_voppacked(AVCodecContext *avctx, int *vop_packed, int *gmc, int *qpel)
+{
+    MpegEncContext *s = avctx->priv_data;
+    // set sane default
+    *vop_packed=0;
+    *gmc=0;
+    *qpel=0;
+    if(avctx->codec->id!=CODEC_ID_MPEG4) return 0;
+    	
+  	*vop_packed=(s->divx_packed);
+	*qpel=s->quarter_sample;
+	*gmc=0;	// FIXME
+	return 1;
 
+  }
+  /* MeanX */
+
+
 int ff_h263_decode_end(AVCodecContext *avctx)
 {
     MpegEncContext *s = avctx->priv_data;
@@ -255,6 +273,7 @@
     /* try to detect the padding bug */
     if(      s->codec_id==CODEC_ID_MPEG4
        &&   (s->workaround_bugs&FF_BUG_AUTODETECT)
+        &&  !(s->workaround_bugs&FF_BUG_NO_PADDING) // MEANX
        &&    s->gb.size_in_bits - get_bits_count(&s->gb) >=0
        &&    s->gb.size_in_bits - get_bits_count(&s->gb) < 48
 //       &&   !s->resync_marker
@@ -277,8 +296,10 @@
                 s->padding_bug_score++;
         }
     }
-
-    if(s->workaround_bugs&FF_BUG_AUTODETECT){
+// MEANX   slice end not reached when autodetect is set
+   if( !(s->workaround_bugs&FF_BUG_NO_PADDING) &&
+            s->workaround_bugs&FF_BUG_AUTODETECT ){
+    // MEANX if(s->workaround_bugs&FF_BUG_AUTODETECT){
         if(s->padding_bug_score > -2 && !s->data_partitioning /*&& (s->divx_version || !s->resync_marker)*/)
             s->workaround_bugs |=  FF_BUG_NO_PADDING;
         else
@@ -412,7 +433,14 @@
     } else {
         ret = h263_decode_picture_header(s);
     }
+	//MEANX we need to do it here also for quicktime file / ctts atom 
+        // we need the correct frame type, and qt file may contain 
+        // vop not coded frame.
+        pict->pict_type=s->current_picture.pict_type= s->pict_type;
+        pict->key_frame=s->current_picture.key_frame= s->pict_type == FF_I_TYPE;
+        //MEANX
 
+
     if(ret==FRAME_SKIPPED) return get_consumed_bytes(s, buf_size);
 
     /* skip if the header was thrashed */
@@ -690,6 +718,12 @@
 
 assert(s->current_picture.pict_type == s->current_picture_ptr->pict_type);
 assert(s->current_picture.pict_type == s->pict_type);
+/* MEANX */
+  if(s->current_picture_ptr)
+      s->current_picture_ptr->opaque=pict->opaque;
+/* MEANX */
+
+
     if (s->pict_type == FF_B_TYPE || s->low_delay) {
         *pict= *(AVFrame*)s->current_picture_ptr;
     } else if (s->last_picture_ptr != NULL) {

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/h264.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/h264.c	2008-03-21 06:51:51 UTC (rev 3915)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/h264.c	2008-03-21 06:51:55 UTC (rev 3916)
@@ -75,7 +75,18 @@
 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 3, 3, 3, 3, 3, 3, 4, 4, 4, 4, 4, 4, 5, 5, 5, 5, 5, 5, 6, 6, 6, 6, 6, 6, 7, 7, 7, 7, 7, 7, 8, 8, 8, 8,
 };
 
+/* MEANX */
+int av_getAVCStreamInfo(AVCodecContext *avctx, uint32_t  *nalSize, uint32_t *isAvc)
+{
+      H264Context *h = avctx->priv_data;
+      assert(h);
+      *nalSize=h->nal_length_size;
+      *isAvc=h->is_avc;
+	return 1;
 
+  }
+/* MeanX */
+
 static void fill_caches(H264Context *h, int mb_type, int for_deblock){
     MpegEncContext * const s = &h->s;
     const int mb_xy= s->mb_x + s->mb_y*s->mb_stride;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/cputest.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/cputest.c	2008-03-21 06:51:51 UTC (rev 3915)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/cputest.c	2008-03-21 06:51:55 UTC (rev 3916)
@@ -42,10 +42,16 @@
          : "=a" (eax), "=S" (ebx),\
            "=c" (ecx), "=d" (edx)\
          : "0" (index));
+/* MEANX */
+extern int ADM_lavcodec_mm_support(void);
+/*/MEANX */
 
 /* Function to test if multimedia instructions are supported...  */
 int mm_support(void)
 {
+	return ADM_lavcodec_mm_support();
+
+#if 0 //MEANX
     int rval = 0;
     int eax, ebx, ecx, edx;
     int max_std_level, max_ext_level, std_caps=0, ext_caps=0;
@@ -121,6 +127,7 @@
         (rval&FF_MM_3DNOWEXT) ? "3DNowExt ":"");
 #endif
     return rval;
+#endif // /MEANX
 }
 
 #ifdef TEST

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/dsputil_mmx.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/dsputil_mmx.c	2008-03-21 06:51:51 UTC (rev 3915)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/dsputil_mmx.c	2008-03-21 06:51:55 UTC (rev 3916)
@@ -47,7 +47,7 @@
 DECLARE_ALIGNED_16(const uint64_t, ff_pdw_80000000[2]) =
 {0x8000000080000000ULL, 0x8000000080000000ULL};
 
-DECLARE_ALIGNED_8 (const uint64_t, ff_pw_3  ) = 0x0003000300030003ULL;
+DECLARE_ALIGNED_8 (const uint64_t, ff_pw_3  ) = 0x0003000300030003ULL; 
 DECLARE_ALIGNED_8 (const uint64_t, ff_pw_4  ) = 0x0004000400040004ULL;
 DECLARE_ALIGNED_16(const xmm_t,    ff_pw_5  ) = {0x0005000500050005ULL, 0x0005000500050005ULL};
 DECLARE_ALIGNED_8 (const uint64_t, ff_pw_8  ) = 0x0008000800080008ULL;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/mpeg12.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/mpeg12.c	2008-03-21 06:51:51 UTC (rev 3915)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/mpeg12.c	2008-03-21 06:51:55 UTC (rev 3916)
@@ -1934,7 +1934,12 @@
         ff_er_frame_end(s);
 
         MPV_frame_end(s);
+/* MEANX */
+  if(s->current_picture_ptr)
+      s->current_picture_ptr->opaque=pict->opaque;
+/* MEANX */
 
+
         if (s->pict_type == FF_B_TYPE || s->low_delay) {
             *pict= *(AVFrame*)s->current_picture_ptr;
             ff_print_debug_info(s, pict);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/mpeg12enc.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/mpeg12enc.c	2008-03-21 06:51:51 UTC (rev 3915)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/mpeg12enc.c	2008-03-21 06:51:55 UTC (rev 3916)
@@ -127,10 +127,19 @@
             s->frame_rate_index= i;
         }
     }
+ /* MEANX 
+
     if(dmin)
         return -1;
     else
         return 0;
+  */
+        if(dmin>4)
+   {
+        av_log(0,AV_LOG_ERROR,"We did a roundup ! Expect async!\n");
+   }
+        return 0; //MEANX
+
 }
 
 static int encode_init(AVCodecContext *avctx)
@@ -208,6 +217,7 @@
 
             put_bits(&s->pb, 12, s->width);
             put_bits(&s->pb, 12, s->height);
+#if 0 //MEANX
 
             for(i=1; i<15; i++){
                 float error= aspect_ratio;
@@ -223,20 +233,44 @@
                     s->aspect_ratio_info= i;
                 }
             }
+#endif // MEANX
+            //MEANX put_bits(&s->pb, 4, s->aspect_ratio_info);
+            //MEANX put_bits(&s->pb, 4, s->frame_rate_index);
+ // MEANX 4:3
+  if(s->avctx->sample_aspect_ratio.num==16 && s->avctx->sample_aspect_ratio.den==9)
+            {
+                //printf("FFmpeg : Wide\n");
+                put_bits(&s->pb,4,3); //16:9
+            }
+            else        //4:3
+            {
+              if(s->codec_id == CODEC_ID_MPEG2VIDEO)
+                put_bits(&s->pb, 4, 2);
+              else
+                put_bits(&s->pb, 4, 12); // MPEG1
+            }
+// /MEANX
 
-            put_bits(&s->pb, 4, s->aspect_ratio_info);
-            put_bits(&s->pb, 4, s->frame_rate_index);
+// //MEANX PULLDOWN            put_bits(&s->pb, 4, s->frame_rate_index);
+if((s->flags2 & CODEC_FLAG2_32_PULLDOWN) && (s->codec_id == CODEC_ID_MPEG2VIDEO))
+            {           
+                put_bits(&s->pb, 4,4);
+            }
+            else
+            {                                  
+                put_bits(&s->pb, 4, s->frame_rate_index);
+            } //MEANX pulldown
 
-            if(s->avctx->rc_max_rate){
-                v = (s->avctx->rc_max_rate + 399) / 400;
+            if(s->avctx->rc_max_rate_header){ //MEANX we use header
+                v = (s->avctx->rc_max_rate_header + 399) / 400;
                 if (v > 0x3ffff && s->codec_id == CODEC_ID_MPEG1VIDEO)
                     v = 0x3ffff;
             }else{
                 v= 0x3FFFF;
             }
 
-            if(s->avctx->rc_buffer_size)
-                vbv_buffer_size = s->avctx->rc_buffer_size;
+            if(s->avctx->rc_buffer_size_header) // MEANX we use header
+                vbv_buffer_size = s->avctx->rc_buffer_size_header;
             else
                 /* VBV calculation: Scaled so that a VCD has the proper VBV size of 40 kilobytes */
                 vbv_buffer_size = (( 20 * s->bit_rate) / (1151929 / 2)) * 8 * 1024;
@@ -269,8 +303,17 @@
 
                 put_bits(&s->pb, 3, s->avctx->profile); //profile
                 put_bits(&s->pb, 4, s->avctx->level); //level
+   // MEANX pulldown put_bits(&s->pb, 1, s->progressive_sequence);
+  // MEANX Pulldown
+ if(s->flags2 & CODEC_FLAG2_32_PULLDOWN) //MEANX
+                        put_bits(&s->pb, 1, 0);
+                else
+                        put_bits(&s->pb, 1, s->progressive_sequence);
 
-                put_bits(&s->pb, 1, s->progressive_sequence);
+
+// /MEANX
+
+
                 put_bits(&s->pb, 2, s->chroma_format);
                 put_bits(&s->pb, 2, 0); //horizontal size ext
                 put_bits(&s->pb, 2, 0); //vertical size ext
@@ -334,6 +377,8 @@
 
 void mpeg1_encode_picture_header(MpegEncContext *s, int picture_number)
 {
+	int tff,rff; //MEANX
+
     mpeg1_encode_sequence_header(s);
 
     /* mpeg1 picture header */
@@ -370,6 +415,49 @@
 
     s->frame_pred_frame_dct = 1;
     if(s->codec_id == CODEC_ID_MPEG2VIDEO){
+ /* MEANX -- Pulldown */
+        if(s->flags2 & CODEC_FLAG2_32_PULLDOWN)
+        {
+        
+                switch((s->picture_number - 
+                          s->gop_picture_number)&3)
+                {
+                        case 0:
+                        default:
+                                rff=1;
+                                tff=1;
+                                break;
+                        case 1:
+                                rff=0;
+                                tff=0;
+                                break;
+                        case 2:
+                                rff=1;
+                                tff=0;
+                                break;
+                        case 3:
+                                rff=0;
+                                tff=1;
+                                break;
+                }               
+           }
+        else
+        {
+                if (s->progressive_sequence) 
+                {
+                        tff=0; /* no repeat */
+                } else 
+                {
+                        tff= s->current_picture_ptr->top_field_first;
+                }
+                rff=s->repeat_first_field;
+        
+        }
+
+//               /MEANX pulldown
+
+
+
         put_header(s, EXT_START_CODE);
         put_bits(&s->pb, 4, 8); //pic ext
         if (s->pict_type == FF_P_TYPE || s->pict_type == FF_B_TYPE) {
@@ -388,11 +476,16 @@
 
         assert(s->picture_structure == PICT_FRAME);
         put_bits(&s->pb, 2, s->picture_structure);
+#if 0 //MEANX
+
         if (s->progressive_sequence) {
             put_bits(&s->pb, 1, 0); /* no repeat */
         } else {
             put_bits(&s->pb, 1, s->current_picture_ptr->top_field_first);
         }
+#endif
+         put_bits(&s->pb, 1, tff);  //MEANX PULLDOWN
+
         /* XXX: optimize the generation of this flag with entropy
            measures */
         s->frame_pred_frame_dct = s->progressive_sequence;
@@ -402,7 +495,10 @@
         put_bits(&s->pb, 1, s->q_scale_type);
         put_bits(&s->pb, 1, s->intra_vlc_format);
         put_bits(&s->pb, 1, s->alternate_scan);
-        put_bits(&s->pb, 1, s->repeat_first_field);
+ // MEANX put_bits(&s->pb, 1, s->repeat_first_field);
+	put_bits(&s->pb, 1, rff);
+      // /MEANX
+
         s->progressive_frame = s->progressive_sequence;
         put_bits(&s->pb, 1, s->chroma_format == CHROMA_420 ? s->progressive_frame : 0); /* chroma_420_type */
         put_bits(&s->pb, 1, s->progressive_frame);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/mpegvideo.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/mpegvideo.c	2008-03-21 06:51:51 UTC (rev 3915)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/mpegvideo.c	2008-03-21 06:51:55 UTC (rev 3916)
@@ -558,7 +558,11 @@
     CHECKED_ALLOCZ(s->prev_pict_types, PREV_PICT_TYPES_BUFFER_SIZE);
 
     s->parse_context.state= -1;
-    if((s->avctx->debug&(FF_DEBUG_VIS_QP|FF_DEBUG_VIS_MB_TYPE)) || (s->avctx->debug_mv)){
+ //MEANX: Allocate them always, as they may be free when we decode 1st image
+
+    // MEANXif((s->avctx->debug&(FF_DEBUG_VIS_QP|FF_DEBUG_VIS_MB_TYPE)) || (s->avctx->debug_mv)){
+if(1){ // MEANX
+
        s->visualization_buffer[0] = av_malloc((s->mb_width*16 + 2*EDGE_WIDTH) * s->mb_height*16 + 2*EDGE_WIDTH);
        s->visualization_buffer[1] = av_malloc((s->mb_width*8 + EDGE_WIDTH) * s->mb_height*8 + EDGE_WIDTH);
        s->visualization_buffer[2] = av_malloc((s->mb_width*8 + EDGE_WIDTH) * s->mb_height*8 + EDGE_WIDTH);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/mpegvideo_enc.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/mpegvideo_enc.c	2008-03-21 06:51:51 UTC (rev 3915)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/mpegvideo_enc.c	2008-03-21 06:51:55 UTC (rev 3916)
@@ -371,12 +371,14 @@
 
         av_log(avctx, AV_LOG_INFO, "Warning vbv_delay will be set to 0xFFFF (=VBR) as the specified vbv buffer is too large for the given bitrate!\n");
     }
+#if 0 //MEANX
 
     if((s->flags & CODEC_FLAG_4MV) && s->codec_id != CODEC_ID_MPEG4
        && s->codec_id != CODEC_ID_H263 && s->codec_id != CODEC_ID_H263P && s->codec_id != CODEC_ID_FLV1){
         av_log(avctx, AV_LOG_ERROR, "4MV not supported by codec\n");
         return -1;
     }
+#endif
 
     if(s->obmc && s->avctx->mb_decision != FF_MB_DECISION_SIMPLE){
         av_log(avctx, AV_LOG_ERROR, "OBMC is only supported with simple mb decision\n");
@@ -408,12 +410,13 @@
         av_log(avctx, AV_LOG_ERROR, "interlacing not supported by codec\n");
         return -1;
     }
+#if 0 //MEANX
 
     if(s->mpeg_quant && s->codec_id != CODEC_ID_MPEG4){ //FIXME mpeg2 uses that too
         av_log(avctx, AV_LOG_ERROR, "mpeg2 style quantization not supported by codec\n");
         return -1;
     }
-
+#endif
     if((s->flags & CODEC_FLAG_CBP_RD) && !(s->flags & CODEC_FLAG_TRELLIS_QUANT)){
         av_log(avctx, AV_LOG_ERROR, "CBP RD needs trellis quant\n");
         return -1;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/opt.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/opt.h	2008-03-21 06:51:51 UTC (rev 3915)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/opt.h	2008-03-21 06:51:55 UTC (rev 3916)
@@ -27,7 +27,8 @@
  * AVOptions
  */
 
-#include "libavutil/rational.h"
+// MEANX #include "libavutil/rational.h"
+#include "../ADM_lavutil/rational.h"
 
 enum AVOptionType{
     FF_OPT_TYPE_FLAGS,

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/update_ffconf.sh
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/update_ffconf.sh	2008-03-21 06:51:51 UTC (rev 3915)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/update_ffconf.sh	2008-03-21 06:51:55 UTC (rev 3916)
@@ -1,2 +1,2 @@
-gcc ffconf.c -o ffconf
-./ffconf > ffconf.h
+gcc ../ffconf.c -o ffconf
+./ffconf > ../config.h

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/utils.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/utils.c	2008-03-21 06:51:51 UTC (rev 3915)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/utils.c	2008-03-21 06:51:55 UTC (rev 3916)
@@ -959,10 +959,12 @@
 
     if((avctx->codec->capabilities & CODEC_CAP_DELAY) || buf_size){
         //FIXME remove the check below _after_ ensuring that all audio check that the available space is enough
+#if 0 // MEANX : Silence
         if(*frame_size_ptr < AVCODEC_MAX_AUDIO_FRAME_SIZE){
             av_log(avctx, AV_LOG_ERROR, "buffer smaller than AVCODEC_MAX_AUDIO_FRAME_SIZE\n");
             return -1;
         }
+#endif
         if(*frame_size_ptr < FF_MIN_BUFFER_SIZE ||
         *frame_size_ptr < avctx->channels * avctx->frame_size * sizeof(int16_t)){
             av_log(avctx, AV_LOG_ERROR, "buffer %d too small\n", *frame_size_ptr);
@@ -1387,7 +1389,7 @@
         return -1;
     }
 #if !defined(HAVE_MKSTEMP)
-    fd = open(*filename, O_RDWR | O_BINARY | O_CREAT, 0444);
+    fd = open(*filename, O_RDWR /* MEANX | O_BINARY*/ | O_CREAT, 0444);
 #else
     snprintf(*filename, len, "/tmp/%sXXXXXX", prefix);
     fd = mkstemp(*filename);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/CMakeLists.txt	2008-03-21 06:51:51 UTC (rev 3915)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/CMakeLists.txt	2008-03-21 06:51:55 UTC (rev 3916)
@@ -9,7 +9,8 @@
 ADD_TARGET_CFLAGS(${ADM_LIB} "-I../ADM_lavcodec -I../ADM_lavutil -DHAVE_AV_CONFIG_H")
 
 IF (UNIX)
-	ADD_TARGET_CFLAGS(${ADM_LIB} -fPIC)
+	ADD_TARGET_CFLAGS(${ADM_LIB} -fPIC -DPIC)
+        ADD_TARGET_LDFLAGS(${ADM_LIB} "-rdynamic -export-dynamic -Wl,-Bsymbolic")
 ENDIF (UNIX)
 
 TARGET_LINK_LIBRARIES(${ADM_LIB} ADM_core ADM_libavutil ADM_libavcodec)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/avformat.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/avformat.h	2008-03-21 06:51:51 UTC (rev 3915)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/avformat.h	2008-03-21 06:51:55 UTC (rev 3916)
@@ -37,7 +37,7 @@
 
 #include <time.h>
 #include <stdio.h>  /* FILE */
-#include "libavcodec/avcodec.h"
+#include "../ADM_lavcodec/avcodec.h"
 
 #include "avio.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavutil/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavutil/CMakeLists.txt	2008-03-21 06:51:51 UTC (rev 3915)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavutil/CMakeLists.txt	2008-03-21 06:51:55 UTC (rev 3916)
@@ -27,7 +27,8 @@
 ADD_TARGET_CFLAGS(${ADM_LIB} "-DHAVE_AV_CONFIG_H")
 
 IF (UNIX)
-	ADD_TARGET_CFLAGS(${ADM_LIB} -fPIC)
+	ADD_TARGET_CFLAGS(${ADM_LIB} -fPIC -DPIC)
+        ADD_TARGET_LDFLAGS(${ADM_LIB} "-rdynamic -export-dynamic -Wl,-Bsymbolic")
 ENDIF (UNIX)
 
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libpostproc/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libpostproc/CMakeLists.txt	2008-03-21 06:51:51 UTC (rev 3915)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libpostproc/CMakeLists.txt	2008-03-21 06:51:55 UTC (rev 3916)
@@ -10,6 +10,7 @@
 ENDIF(ADM_CPU_X86_64)
 IF (UNIX)
 	ADD_TARGET_CFLAGS(${ADM_LIB} -fPIC -DPIC)
+        ADD_TARGET_LDFLAGS(${ADM_LIB} "-rdynamic -export-dynamic -Wl,-Bsymbolic")
 ENDIF (UNIX)
 
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/CMakeLists.txt	2008-03-21 06:51:51 UTC (rev 3915)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/CMakeLists.txt	2008-03-21 06:51:55 UTC (rev 3916)
@@ -18,7 +18,8 @@
 
 TARGET_LINK_LIBRARIES(${ADM_LIB} ADM_core ADM_libavutil)
 IF (UNIX)
-	ADD_TARGET_CFLAGS(${ADM_LIB} -fPIC -DPIC)
+	ADD_TARGET_CFLAGS(${ADM_LIB} -fPIC -DPIC )
+        ADD_TARGET_LDFLAGS(${ADM_LIB} "-rdynamic -export-dynamic -Wl,-Bsymbolic")
 ENDIF (UNIX)
 
-INSTALL(TARGETS ${ADM_LIB} RUNTIME DESTINATION ${BIN_DIR} LIBRARY DESTINATION lib)
\ No newline at end of file
+INSTALL(TARGETS ${ADM_LIB} RUNTIME DESTINATION ${BIN_DIR} LIBRARY DESTINATION lib)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/rgb2rgb.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/rgb2rgb.c	2008-03-21 06:51:51 UTC (rev 3915)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/rgb2rgb.c	2008-03-21 06:51:55 UTC (rev 3916)
@@ -32,7 +32,12 @@
 #include "swscale_internal.h"
 #include "x86_cpu.h"
 #include "bswap.h"
+// MEANX
+#include "wrapper.h"
+#include "ADM_mangle.h"
+// /MEANX
 
+
 #define FAST_BGR2YV12 // use 7 bit coeffs instead of 15bit
 
 void (*rgb24to32)(const uint8_t *src, uint8_t *dst, long src_size);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale.c	2008-03-21 06:51:51 UTC (rev 3915)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale.c	2008-03-21 06:51:55 UTC (rev 3916)
@@ -59,7 +59,9 @@
 #include <math.h>
 #include <stdio.h>
 #include <unistd.h>
+#include <stddef.h> // MEANX
 #include "config.h"
+#include <limits.h> // MEANX
 #include <assert.h>
 #ifdef HAVE_SYS_MMAN_H
 #include <sys/mman.h>
@@ -72,7 +74,12 @@
 #include "x86_cpu.h"
 #include "bswap.h"
 #include "rgb2rgb.h"
-#include "libavcodec/opt.h"
+// MEANX #include "libavcodec/opt.h"
+#include "../ADM_lavcodec/opt.h"
+// MEANX
+#include "wrapper.h"
+#include "ADM_mangle.h"
+// /MEANX
 
 #undef MOVNTQ
 #undef PAVGB
@@ -83,7 +90,11 @@
 //#undef ARCH_X86
 //#define WORDS_BIGENDIAN
 #define DITHER1XBPP
-
+// MEANX
+#ifdef ARCH_X86_64
+#undef RUNTIME_CPUDETECT
+#endif 
+// /MEANX
 #define FAST_BGR2YV12 // use 7 bit coeffs instead of 15bit
 
 #define RET 0xC3 //near return opcode for X86
@@ -242,7 +253,7 @@
     return "swscaler";
 }
 
-#define OFFSET(x) offsetof(SwsContext, x)
+#define OFFSET(x)  offsetof(SwsContext, x)
 #define DEFAULT 0
 #define VE AV_OPT_FLAG_VIDEO_PARAM | AV_OPT_FLAG_ENCODING_PARAM
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale.h	2008-03-21 06:51:51 UTC (rev 3915)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale.h	2008-03-21 06:51:55 UTC (rev 3916)
@@ -27,7 +27,8 @@
  *     external api for the swscale stuff
  */
 
-#include "libavutil/avutil.h"
+// MEANX #include "libavutil/avutil.h"
+#include "../ADM_lavutil/avutil.h"
 
 #define LIBSWSCALE_VERSION_MAJOR 0
 #define LIBSWSCALE_VERSION_MINOR 5

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale_internal.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale_internal.h	2008-03-21 06:51:51 UTC (rev 3915)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale_internal.h	2008-03-21 06:51:55 UTC (rev 3916)
@@ -27,7 +27,8 @@
 #include <altivec.h>
 #endif
 
-#include "avutil.h"
+// MEANX #include "avutil.h"
+#include "../ADM_lavutil/avutil.h"
 
 #define MAX_FILTER_SIZE 256
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/yuv2rgb.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/yuv2rgb.c	2008-03-21 06:51:51 UTC (rev 3915)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/yuv2rgb.c	2008-03-21 06:51:55 UTC (rev 3916)
@@ -46,7 +46,12 @@
 #ifdef HAVE_MLIB
 #include "yuv2rgb_mlib.c"
 #endif
+// MEANX
+#include "wrapper.h"
+#include "ADM_mangle.h"
+// /MEANX
 
+
 #define DITHER1XBPP // only for mmx
 
 const uint8_t  __attribute__((aligned(8))) dither_2x2_4[2][8]={

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/config.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/config.h	2008-03-21 06:51:51 UTC (rev 3915)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/config.h	2008-03-21 06:51:55 UTC (rev 3916)
@@ -1,350 +1,385 @@
-#define ENABLE_NELLYMOSER_DECODER 1
-#define ENABLE_ADPCM_IMA_AMV_DECODER 1
-#define ENABLE_CINEPAK_DECODER 1
-#define ENABLE_DNXHD_DECODER 1
-#define ENABLE_FOURXM_DECODER 1
-#define ENABLE_FRAPS_DECODER 1
-#define ENABLE_H263_DECODER 1
-#define ENABLE_H264_DECODER 1
-#define ENABLE_INDEO2_DECODER 1
-#define ENABLE_INDEO3_DECODER 1
-#define ENABLE_INTERPLAY_VIDEO_DECODER 1
-#define ENABLE_MPEGVIDEO_DECODER 1
-#define ENABLE_MSVIDEO1_DECODER 1
-#define ENABLE_VC1_DECODER 1
-#define ENABLE_VCR1_DECODER 1
-#define ENABLE_VP5_DECODER 1
-#define ENABLE_VP6_DECODER 1
-#define ENABLE_VP6F_DECODER 1
-#define ENABLE_WMV3_DECODER 1
-#define ENABLE_WMV1_DECODER 1
-#define ENABLE_WMV2_DECODER 1
-#define ENABLE_VP3_DECODER 1
-#define ENABLE_MPEG4_DECODER 1
-#define ENABLE_MSMPEG4V1_DECODER 1
-#define ENABLE_MSMPEG4V2_DECODER 1
-#define ENABLE_MSMPEG4V3_DECODER 1
-#define ENABLE_MJPEGB_DECODER 1
-#define ENABLE_MJPEG_DECODER 1
-#define ENABLE_WMAV2_DECODER 1
-#define ENABLE_DVVIDEO_DECODER 1
-#define ENABLE_HUFFYUV_DECODER 1
-#define ENABLE_FFVHUFF_DECODER 1
-#define ENABLE_SVQ3_DECODER 1
-#define ENABLE_TSCC_DECODER 1
-#define ENABLE_QDM2_DECODER 1
-#define ENABLE_FFV1_DECODER 1
-#define ENABLE_MPEG1VIDEO_DECODER 1
-#define ENABLE_MPEG2VIDEO_DECODER 1
-#define ENABLE_RV10_DECODER 1
-#define ENABLE_RV20_DECODER 1
-#define ENABLE_DVBSUB_DECODER 1
-#define ENABLE_FLV_DECODER 1
-#define ENABLE_SNOW_DECODER 1
-#define ENABLE_AMV_DECODER 1
-#define ENABLE_AASC_DECODER 0
-#define ENABLE_AVS_DECODER 0
-#define ENABLE_BETHSOFTVID_DECODER 0
-#define ENABLE_C93_DECODER 0
-#define ENABLE_CAVS_DECODER 0
-#define ENABLE_CLJR_DECODER 0
-#define ENABLE_CSCD_DECODER 0
-#define ENABLE_CYUV_DECODER 0
-#define ENABLE_DSICINVIDEO_DECODER 0
-#define ENABLE_DXA_DECODER 0
-#define ENABLE_EIGHTBPS_DECODER 0
-#define ENABLE_FLIC_DECODER 0
-#define ENABLE_IDCIN_DECODER 0
-#define ENABLE_KMVC_DECODER 0
-#define ENABLE_LOCO_DECODER 0
-#define ENABLE_MDEC_DECODER 0
-#define ENABLE_MMVIDEO_DECODER 0
-#define ENABLE_MPEG_XVMC_DECODER 0
-#define ENABLE_MSRLE_DECODER 0
-#define ENABLE_MSZH_DECODER 0
-#define ENABLE_NUV_DECODER 0
-#define ENABLE_PTX_DECODER 0
-#define ENABLE_QDRAW_DECODER 0
-#define ENABLE_QPEG_DECODER 0
-#define ENABLE_RPZA_DECODER 0
-#define ENABLE_SMACKER_DECODER 0
-#define ENABLE_SMC_DECODER 0
-#define ENABLE_SP5X_DECODER 0
-#define ENABLE_THEORA_DECODER 0
-#define ENABLE_THP_DECODER 0
-#define ENABLE_TIERTEXSEQVIDEO_DECODER 0
-#define ENABLE_TRUEMOTION1_DECODER 0
-#define ENABLE_TRUEMOTION2_DECODER 0
-#define ENABLE_TXD_DECODER 0
-#define ENABLE_ULTI_DECODER 0
-#define ENABLE_VMDVIDEO_DECODER 0
-#define ENABLE_VMNC_DECODER 0
-#define ENABLE_VQA_DECODER 0
-#define ENABLE_WNV1_DECODER 0
-#define ENABLE_XAN_WC3_DECODER 0
-#define ENABLE_XL_DECODER 0
-#define ENABLE_MPEG4AAC_DECODER 0
-#define ENABLE_ALAC_DECODER 0
-#define ENABLE_ATRAC3_DECODER 0
-#define ENABLE_COOK_DECODER 0
-#define ENABLE_DCA_DECODER 0
-#define ENABLE_DSICINAUDIO_DECODER 0
-#define ENABLE_IMC_DECODER 0
-#define ENABLE_LIBA52_DECODER 0
-#define ENABLE_LIBFAAD_DECODER 0
-#define ENABLE_MACE3_DECODER 0
-#define ENABLE_MACE6_DECODER 0
-#define ENABLE_MP3_DECODER 0
-#define ENABLE_MP3ADU_DECODER 0
-#define ENABLE_MP3ON4_DECODER 0
-#define ENABLE_MPC7_DECODER 0
-#define ENABLE_RA_144_DECODER 0
-#define ENABLE_RA_288_DECODER 0
-#define ENABLE_SHORTEN_DECODER 0
-#define ENABLE_SMACKAUD_DECODER 0
-#define ENABLE_TRUESPEECH_DECODER 0
-#define ENABLE_TTA_DECODER 0
-#define ENABLE_VMDAUDIO_DECODER 0
-#define ENABLE_WAVPACK_DECODER 0
-#define ENABLE_WS_SND1_DECODER 0
-#define ENABLE_INTERPLAY_DPCM_DECODER 0
-#define ENABLE_SOL_DPCM_DECODER 0
-#define ENABLE_XAN_DPCM_DECODER 0
-#define ENABLE_ADPCM_THP_DECODER 0
-#define ENABLE_ASV1_DECODER 0
-#define ENABLE_ASV2_DECODER 0
-#define ENABLE_BMP_DECODER 0
-#define ENABLE_FLASHSV_DECODER 0
-#define ENABLE_GIF_DECODER 0
-#define ENABLE_H261_DECODER 0
-#define ENABLE_H263I_DECODER 0
-#define ENABLE_JPEGLS_DECODER 0
-#define ENABLE_PNG_DECODER 0
-#define ENABLE_QTRLE_DECODER 0
-#define ENABLE_RAWVIDEO_DECODER 0
-#define ENABLE_ROQ_DECODER 0
-#define ENABLE_SGI_DECODER 0
-#define ENABLE_SVQ1_DECODER 0
-#define ENABLE_TARGA_DECODER 0
-#define ENABLE_TIFF_DECODER 0
-#define ENABLE_ZLIB_DECODER 0
-#define ENABLE_ZMBV_DECODER 0
-#define ENABLE_FLAC_DECODER 0
-#define ENABLE_LIBAMR_NB_DECODER 0
-#define ENABLE_LIBAMR_WB_DECODER 0
-#define ENABLE_LIBGSM_DECODER 0
-#define ENABLE_LIBGSM_MS_DECODER 0
-#define ENABLE_MP2_DECODER 0
-#define ENABLE_SONIC_DECODER 0
-#define ENABLE_VORBIS_DECODER 0
-#define ENABLE_WMAV1_DECODER 0
-#define ENABLE_PCM_ALAW_DECODER 0
-#define ENABLE_PCM_MULAW_DECODER 0
-#define ENABLE_PCM_S8_DECODER 0
-#define ENABLE_PCM_S16BE_DECODER 0
-#define ENABLE_PCM_S16LE_DECODER 0
-#define ENABLE_PCM_S24BE_DECODER 0
-#define ENABLE_PCM_S24DAUD_DECODER 0
-#define ENABLE_PCM_S24LE_DECODER 0
-#define ENABLE_PCM_S32BE_DECODER 0
-#define ENABLE_PCM_S32LE_DECODER 0
-#define ENABLE_PCM_U8_DECODER 0
-#define ENABLE_PCM_U16BE_DECODER 0
-#define ENABLE_PCM_U16LE_DECODER 0
-#define ENABLE_PCM_U24BE_DECODER 0
-#define ENABLE_PCM_U24LE_DECODER 0
-#define ENABLE_PCM_U32BE_DECODER 0
-#define ENABLE_PCM_U32LE_DECODER 0
-#define ENABLE_ROQ_DPCM_DECODER 0
-#define ENABLE_ADPCM_4XM_DECODER 0
-#define ENABLE_ADPCM_ADX_DECODER 0
-#define ENABLE_ADPCM_CT_DECODER 0
-#define ENABLE_ADPCM_EA_DECODER 0
-#define ENABLE_ADPCM_G726_DECODER 0
-#define ENABLE_ADPCM_IMA_DK3_DECODER 0
-#define ENABLE_ADPCM_IMA_DK4_DECODER 0
-#define ENABLE_ADPCM_IMA_QT_DECODER 0
-#define ENABLE_ADPCM_IMA_SMJPEG_DECODER 0
-#define ENABLE_ADPCM_IMA_WAV_DECODER 0
-#define ENABLE_ADPCM_IMA_WS_DECODER 0
-#define ENABLE_ADPCM_MS_DECODER 0
-#define ENABLE_ADPCM_SBPRO_2_DECODER 0
-#define ENABLE_ADPCM_SBPRO_3_DECODER 0
-#define ENABLE_ADPCM_SBPRO_4_DECODER 0
-#define ENABLE_ADPCM_SWF_DECODER 0
-#define ENABLE_ADPCM_XA_DECODER 0
-#define ENABLE_ADPCM_YAMAHA_DECODER 0
-#define ENABLE_DVDSUB_DECODER 0
-#define ENABLE_LIBVORBIS_DECODER 0
-#define ENABLE_H263_PARSER 1
-#define ENABLE_H264_PARSER 1
-#define ENABLE_MPEG4VIDEO_PARSER 1
-#define ENABLE_AAC_PARSER 0
-#define ENABLE_AC3_PARSER 0
-#define ENABLE_CAVSVIDEO_PARSER 0
-#define ENABLE_DCA_PARSER 0
-#define ENABLE_DVBSUB_PARSER 0
-#define ENABLE_DVDSUB_PARSER 0
-#define ENABLE_H261_PARSER 0
-#define ENABLE_MJPEG_PARSER 0
-#define ENABLE_MPEGAUDIO_PARSER 0
-#define ENABLE_MPEGVIDEO_PARSER 0
-#define ENABLE_PNM_PARSER 0
-#define ENABLE_VC1_PARSER 0
-#define ENABLE_MJPEG_ENCODER 1
-#define ENABLE_MSMPEG4V3_ENCODER 1
-#define ENABLE_H263P_ENCODER 1
-#define ENABLE_AC3_ENCODER 1
-#define ENABLE_FFV1_ENCODER 1
-#define ENABLE_FLV1_ENCODER 1
-#define ENABLE_FFVHUFF_ENCODER 1
-#define ENABLE_H263_ENCODER 1
-#define ENABLE_MPEG1VIDEO_ENCODER 1
-#define ENABLE_MPEG2VIDEO_ENCODER 1
-#define ENABLE_MPEG4_ENCODER 1
-#define ENABLE_FLV_ENCODER 1
-#define ENABLE_MP2_ENCODER 1
-#define ENABLE_DVVIDEO_ENCODER 1
-#define ENABLE_HUFFYUV_ENCODER 1
-#define ENABLE_DVBSUB_ENCODER 1
-#define ENABLE_SNOW_ENCODER 1
-#define ENABLE_ADPCM_IMA_AMV_ENCODER 0
-#define ENABLE_LIBX264_ENCODER 0
-#define ENABLE_LIBXVID_ENCODER 0
-#define ENABLE_LJPEG_ENCODER 0
-#define ENABLE_PAM_ENCODER 0
-#define ENABLE_PBM_ENCODER 0
-#define ENABLE_PGM_ENCODER 0
-#define ENABLE_PGMYUV_ENCODER 0
-#define ENABLE_PPM_ENCODER 0
-#define ENABLE_LIBFAAC_ENCODER 0
-#define ENABLE_LIBMP3LAME_ENCODER 0
-#define ENABLE_LIBTHEORA_ENCODER 0
-#define ENABLE_SONIC_LS_ENCODER 0
-#define ENABLE_ASV1_ENCODER 0
-#define ENABLE_ASV2_ENCODER 0
-#define ENABLE_BMP_ENCODER 0
-#define ENABLE_FLASHSV_ENCODER 0
-#define ENABLE_GIF_ENCODER 0
-#define ENABLE_H261_ENCODER 0
-#define ENABLE_JPEGLS_ENCODER 0
-#define ENABLE_MSMPEG4V1_ENCODER 0
-#define ENABLE_MSMPEG4V2_ENCODER 0
-#define ENABLE_PNG_ENCODER 0
-#define ENABLE_QTRLE_ENCODER 0
-#define ENABLE_RAWVIDEO_ENCODER 0
-#define ENABLE_ROQ_ENCODER 0
-#define ENABLE_RV10_ENCODER 0
-#define ENABLE_RV20_ENCODER 0
-#define ENABLE_SGI_ENCODER 0
-#define ENABLE_SVQ1_ENCODER 0
-#define ENABLE_TARGA_ENCODER 0
-#define ENABLE_TIFF_ENCODER 0
-#define ENABLE_WMV1_ENCODER 0
-#define ENABLE_WMV2_ENCODER 0
-#define ENABLE_ZLIB_ENCODER 0
-#define ENABLE_ZMBV_ENCODER 0
-#define ENABLE_FLAC_ENCODER 0
-#define ENABLE_LIBAMR_NB_ENCODER 0
-#define ENABLE_LIBAMR_WB_ENCODER 0
-#define ENABLE_LIBGSM_ENCODER 0
-#define ENABLE_LIBGSM_MS_ENCODER 0
-#define ENABLE_SONIC_ENCODER 0
-#define ENABLE_VORBIS_ENCODER 0
-#define ENABLE_WMAV1_ENCODER 0
-#define ENABLE_WMAV2_ENCODER 0
-#define ENABLE_PCM_ALAW_ENCODER 0
-#define ENABLE_PCM_MULAW_ENCODER 0
-#define ENABLE_PCM_S8_ENCODER 0
-#define ENABLE_PCM_S16BE_ENCODER 0
-#define ENABLE_PCM_S16LE_ENCODER 0
-#define ENABLE_PCM_S24BE_ENCODER 0
-#define ENABLE_PCM_S24DAUD_ENCODER 0
-#define ENABLE_PCM_S24LE_ENCODER 0
-#define ENABLE_PCM_S32BE_ENCODER 0
-#define ENABLE_PCM_S32LE_ENCODER 0
-#define ENABLE_PCM_U8_ENCODER 0
-#define ENABLE_PCM_U16BE_ENCODER 0
-#define ENABLE_PCM_U16LE_ENCODER 0
-#define ENABLE_PCM_U24BE_ENCODER 0
-#define ENABLE_PCM_U24LE_ENCODER 0
-#define ENABLE_PCM_U32BE_ENCODER 0
-#define ENABLE_PCM_U32LE_ENCODER 0
-#define ENABLE_ROQ_DPCM_ENCODER 0
-#define ENABLE_ADPCM_4XM_ENCODER 0
-#define ENABLE_ADPCM_ADX_ENCODER 0
-#define ENABLE_ADPCM_CT_ENCODER 0
-#define ENABLE_ADPCM_EA_ENCODER 0
-#define ENABLE_ADPCM_G726_ENCODER 0
-#define ENABLE_ADPCM_IMA_DK3_ENCODER 0
-#define ENABLE_ADPCM_IMA_DK4_ENCODER 0
-#define ENABLE_ADPCM_IMA_QT_ENCODER 0
-#define ENABLE_ADPCM_IMA_SMJPEG_ENCODER 0
-#define ENABLE_ADPCM_IMA_WAV_ENCODER 0
-#define ENABLE_ADPCM_IMA_WS_ENCODER 0
-#define ENABLE_ADPCM_MS_ENCODER 0
-#define ENABLE_ADPCM_SBPRO_2_ENCODER 0
-#define ENABLE_ADPCM_SBPRO_3_ENCODER 0
-#define ENABLE_ADPCM_SBPRO_4_ENCODER 0
-#define ENABLE_ADPCM_SWF_ENCODER 0
-#define ENABLE_ADPCM_XA_ENCODER 0
-#define ENABLE_ADPCM_YAMAHA_ENCODER 0
-#define ENABLE_DVDSUB_ENCODER 0
-#define ENABLE_LIBVORBIS_ENCODER 0
-#define ENABLE_MP3_HEADER_COMPRESS_BSF 0
-#define ENABLE_IMX_DUMP_HEADER_BSF 0
-#define ENABLE_DUMP_EXTRADATA_BSF 0
-#define ENABLE_REMOVE_EXTRADATA_BSF 0
-#define ENABLE_NOISE_BSF 0
-#define ENABLE_MP3_HEADER_DECOMPRESS_BSF 0
-#define ENABLE_MJPEGA_DUMP_HEADER_BSF 0
-#define ENABLE_IMX_DUMP_HEADER_BSF 0
-#define CONFIG_MUXERS 1
-#define CONFIG_MOV_MUXER 1
-#define CONFIG_MP4_MUXER 1
-#define CONFIG_PSP_MUXER 1
-#define CONFIG_TG2_MUXER 1
-#define CONFIG_TGP_MUXER 1
-#define CONFIG_ENCODERS 1
-#define CONFIG_DVVIDEO_ENCODER 1
-#define CONFIG_SNOW_ENCODER 1
-#define CONFIG_DECODERS 1
-#define CONFIG_DVVIDEO_DECODER 1
-#define CONFIG_H263_DECODER 1
-#define CONFIG_MPEG4_DECODER 1
-#define CONFIG_SNOW_DECODER 1
-#define CONFIG_VC1_DECODER 1
-#define CONFIG_WMV2_DECODER 1
-#define CONFIG_WMV3_DECODER 1
-#define CONFIG_MPEGAUDIO_HP 1
-#define CONFIG_ZLIB 1
-#define ENABLE_ARMV4L 0
-#define ENABLE_MLIB 0
-#define ENABLE_SPARC 0
-#define ENABLE_ALPHA 0
-#define ENABLE_MMI 0
-#define ENABLE_SH4 0
-#define ENABLE_BFIN 0
-#define ENABLE_SMALL 0
-#ifdef ARCH_POWERPC
-#define ENABLE_POWERPC 1
-#else
-#define ENABLE_POWERPC 0
-#endif
-#ifdef ARCH_X86
-#define ENABLE_MMX 1
-#define HAVE_MMX 1
-#define HAVE_FAST_UNALIGNED 1
-#else
-#define ENABLE_MMX 0
-#endif
-#ifdef ARCH_X86_64
-#define HAVE_FAST_64BIT 1
-#endif
-#ifdef __APPLE__
-#define CONFIG_DARWIN 1
-#endif
-#define ENABLE_THREADS 1
-#define HAVE_LRINTF 1
-#define HAVE_THREADS 1
-#define RUNTIME_CPUDETECT 1
+#define ENABLE_NELLYMOSER_DECODER 1
+#define ENABLE_ADPCM_IMA_AMV_DECODER 1
+#define ENABLE_CINEPAK_DECODER 1
+#define ENABLE_DNXHD_DECODER 1
+#define ENABLE_FOURXM_DECODER 1
+#define ENABLE_FRAPS_DECODER 1
+#define ENABLE_H263_DECODER 1
+#define ENABLE_H264_DECODER 1
+#define ENABLE_INDEO2_DECODER 1
+#define ENABLE_INDEO3_DECODER 1
+#define ENABLE_INTERPLAY_VIDEO_DECODER 1
+#define ENABLE_MPEGVIDEO_DECODER 1
+#define ENABLE_MSVIDEO1_DECODER 1
+#define ENABLE_VC1_DECODER 1
+#define ENABLE_VCR1_DECODER 1
+#define ENABLE_VP5_DECODER 1
+#define ENABLE_VP6_DECODER 1
+#define ENABLE_VP6A_DECODER 1
+#define ENABLE_VP6F_DECODER 1
+#define ENABLE_WMV3_DECODER 1
+#define ENABLE_WMV1_DECODER 1
+#define ENABLE_WMV2_DECODER 1
+#define ENABLE_VP3_DECODER 1
+#define ENABLE_MPEG4_DECODER 1
+#define ENABLE_MSMPEG4V1_DECODER 1
+#define ENABLE_MSMPEG4V2_DECODER 1
+#define ENABLE_MSMPEG4V3_DECODER 1
+#define ENABLE_MJPEGB_DECODER 1
+#define ENABLE_MJPEG_DECODER 1
+#define ENABLE_WMAV2_DECODER 1
+#define ENABLE_DVVIDEO_DECODER 1
+#define ENABLE_HUFFYUV_DECODER 1
+#define ENABLE_FFVHUFF_DECODER 1
+#define ENABLE_SVQ3_DECODER 1
+#define ENABLE_TSCC_DECODER 1
+#define ENABLE_QDM2_DECODER 1
+#define ENABLE_FFV1_DECODER 1
+#define ENABLE_MPEG1VIDEO_DECODER 1
+#define ENABLE_MPEG2VIDEO_DECODER 1
+#define ENABLE_RV10_DECODER 1
+#define ENABLE_RV20_DECODER 1
+#define ENABLE_DVBSUB_DECODER 1
+#define ENABLE_FLV_DECODER 1
+#define ENABLE_SNOW_DECODER 1
+#define ENABLE_AMV_DECODER 1
+#define ENABLE_PCX_DECODER 0
+#define ENABLE_SUNRAST_DECODER 0
+#define ENABLE_VB_DECODER 0
+#define ENABLE_XSUB_DECODER 0
+#define ENABLE_AC3_DECODER 0
+#define ENABLE_APE_DECODER 0
+#define ENABLE_MPC8_DECODER 0
+#define ENABLE_PCM_S16LE_PLANAR_DECODER 0
+#define ENABLE_PCM_ZORK_DECODER 0
+#define ENABLE_ADPCM_EA_R1_DECODER 0
+#define ENABLE_ADPCM_EA_R2_DECODER 0
+#define ENABLE_ADPCM_EA_R3_DECODER 0
+#define ENABLE_ADPCM_EA_XAS_DECODER 0
+#define ENABLE_ADPCM_IMA_EA_EACS_DECODER 0
+#define ENABLE_ADPCM_IMA_EA_SEAD_DECODER 0
+#define ENABLE_AASC_DECODER 0
+#define ENABLE_AVS_DECODER 0
+#define ENABLE_BETHSOFTVID_DECODER 0
+#define ENABLE_C93_DECODER 0
+#define ENABLE_CAVS_DECODER 0
+#define ENABLE_CLJR_DECODER 0
+#define ENABLE_CSCD_DECODER 0
+#define ENABLE_CYUV_DECODER 0
+#define ENABLE_DSICINVIDEO_DECODER 0
+#define ENABLE_DXA_DECODER 0
+#define ENABLE_EIGHTBPS_DECODER 0
+#define ENABLE_FLIC_DECODER 0
+#define ENABLE_IDCIN_DECODER 0
+#define ENABLE_KMVC_DECODER 0
+#define ENABLE_LOCO_DECODER 0
+#define ENABLE_MDEC_DECODER 0
+#define ENABLE_MMVIDEO_DECODER 0
+#define ENABLE_MPEG_XVMC_DECODER 0
+#define ENABLE_MSRLE_DECODER 0
+#define ENABLE_MSZH_DECODER 0
+#define ENABLE_NUV_DECODER 0
+#define ENABLE_PTX_DECODER 0
+#define ENABLE_QDRAW_DECODER 0
+#define ENABLE_QPEG_DECODER 0
+#define ENABLE_RPZA_DECODER 0
+#define ENABLE_SMACKER_DECODER 0
+#define ENABLE_SMC_DECODER 0
+#define ENABLE_SP5X_DECODER 0
+#define ENABLE_THEORA_DECODER 0
+#define ENABLE_THP_DECODER 0
+#define ENABLE_TIERTEXSEQVIDEO_DECODER 0
+#define ENABLE_TRUEMOTION1_DECODER 0
+#define ENABLE_TRUEMOTION2_DECODER 0
+#define ENABLE_TXD_DECODER 0
+#define ENABLE_ULTI_DECODER 0
+#define ENABLE_VMDVIDEO_DECODER 0
+#define ENABLE_VMNC_DECODER 0
+#define ENABLE_VQA_DECODER 0
+#define ENABLE_WNV1_DECODER 0
+#define ENABLE_XAN_WC3_DECODER 0
+#define ENABLE_XL_DECODER 0
+#define ENABLE_MPEG4AAC_DECODER 0
+#define ENABLE_ALAC_DECODER 0
+#define ENABLE_ATRAC3_DECODER 0
+#define ENABLE_COOK_DECODER 0
+#define ENABLE_DCA_DECODER 0
+#define ENABLE_DSICINAUDIO_DECODER 0
+#define ENABLE_IMC_DECODER 0
+#define ENABLE_LIBA52_DECODER 0
+#define ENABLE_LIBFAAD_DECODER 0
+#define ENABLE_MACE3_DECODER 0
+#define ENABLE_MACE6_DECODER 0
+#define ENABLE_MP3_DECODER 0
+#define ENABLE_MP3ADU_DECODER 0
+#define ENABLE_MP3ON4_DECODER 0
+#define ENABLE_MPC7_DECODER 0
+#define ENABLE_RA_144_DECODER 0
+#define ENABLE_RA_288_DECODER 0
+#define ENABLE_SHORTEN_DECODER 0
+#define ENABLE_SMACKAUD_DECODER 0
+#define ENABLE_TRUESPEECH_DECODER 0
+#define ENABLE_TTA_DECODER 0
+#define ENABLE_VMDAUDIO_DECODER 0
+#define ENABLE_WAVPACK_DECODER 0
+#define ENABLE_WS_SND1_DECODER 0
+#define ENABLE_INTERPLAY_DPCM_DECODER 0
+#define ENABLE_SOL_DPCM_DECODER 0
+#define ENABLE_XAN_DPCM_DECODER 0
+#define ENABLE_ADPCM_THP_DECODER 0
+#define ENABLE_ASV1_DECODER 0
+#define ENABLE_ASV2_DECODER 0
+#define ENABLE_BMP_DECODER 0
+#define ENABLE_FLASHSV_DECODER 0
+#define ENABLE_GIF_DECODER 0
+#define ENABLE_H261_DECODER 0
+#define ENABLE_H263I_DECODER 0
+#define ENABLE_JPEGLS_DECODER 0
+#define ENABLE_PNG_DECODER 0
+#define ENABLE_QTRLE_DECODER 0
+#define ENABLE_RAWVIDEO_DECODER 0
+#define ENABLE_ROQ_DECODER 0
+#define ENABLE_SGI_DECODER 0
+#define ENABLE_SVQ1_DECODER 0
+#define ENABLE_TARGA_DECODER 0
+#define ENABLE_TIFF_DECODER 0
+#define ENABLE_ZLIB_DECODER 0
+#define ENABLE_ZMBV_DECODER 0
+#define ENABLE_FLAC_DECODER 0
+#define ENABLE_LIBAMR_NB_DECODER 0
+#define ENABLE_LIBAMR_WB_DECODER 0
+#define ENABLE_LIBGSM_DECODER 0
+#define ENABLE_LIBGSM_MS_DECODER 0
+#define ENABLE_MP2_DECODER 0
+#define ENABLE_SONIC_DECODER 0
+#define ENABLE_VORBIS_DECODER 0
+#define ENABLE_WMAV1_DECODER 0
+#define ENABLE_PCM_ALAW_DECODER 0
+#define ENABLE_PCM_MULAW_DECODER 0
+#define ENABLE_PCM_S8_DECODER 0
+#define ENABLE_PCM_S16BE_DECODER 0
+#define ENABLE_PCM_S16LE_DECODER 0
+#define ENABLE_PCM_S24BE_DECODER 0
+#define ENABLE_PCM_S24DAUD_DECODER 0
+#define ENABLE_PCM_S24LE_DECODER 0
+#define ENABLE_PCM_S32BE_DECODER 0
+#define ENABLE_PCM_S32LE_DECODER 0
+#define ENABLE_PCM_U8_DECODER 0
+#define ENABLE_PCM_U16BE_DECODER 0
+#define ENABLE_PCM_U16LE_DECODER 0
+#define ENABLE_PCM_U24BE_DECODER 0
+#define ENABLE_PCM_U24LE_DECODER 0
+#define ENABLE_PCM_U32BE_DECODER 0
+#define ENABLE_PCM_U32LE_DECODER 0
+#define ENABLE_ROQ_DPCM_DECODER 0
+#define ENABLE_ADPCM_4XM_DECODER 0
+#define ENABLE_ADPCM_ADX_DECODER 0
+#define ENABLE_ADPCM_CT_DECODER 0
+#define ENABLE_ADPCM_EA_DECODER 0
+#define ENABLE_ADPCM_G726_DECODER 0
+#define ENABLE_ADPCM_IMA_DK3_DECODER 0
+#define ENABLE_ADPCM_IMA_DK4_DECODER 0
+#define ENABLE_ADPCM_IMA_QT_DECODER 0
+#define ENABLE_ADPCM_IMA_SMJPEG_DECODER 0
+#define ENABLE_ADPCM_IMA_WAV_DECODER 0
+#define ENABLE_ADPCM_IMA_WS_DECODER 0
+#define ENABLE_ADPCM_MS_DECODER 0
+#define ENABLE_ADPCM_SBPRO_2_DECODER 0
+#define ENABLE_ADPCM_SBPRO_3_DECODER 0
+#define ENABLE_ADPCM_SBPRO_4_DECODER 0
+#define ENABLE_ADPCM_SWF_DECODER 0
+#define ENABLE_ADPCM_XA_DECODER 0
+#define ENABLE_ADPCM_YAMAHA_DECODER 0
+#define ENABLE_DVDSUB_DECODER 0
+#define ENABLE_LIBVORBIS_DECODER 0
+#define ENABLE_H263_PARSER 1
+#define ENABLE_H264_PARSER 1
+#define ENABLE_MPEG4VIDEO_PARSER 1
+#define ENABLE_AAC_PARSER 0
+#define ENABLE_AC3_PARSER 0
+#define ENABLE_CAVSVIDEO_PARSER 0
+#define ENABLE_DCA_PARSER 0
+#define ENABLE_DVBSUB_PARSER 0
+#define ENABLE_DVDSUB_PARSER 0
+#define ENABLE_H261_PARSER 0
+#define ENABLE_MJPEG_PARSER 0
+#define ENABLE_MPEGAUDIO_PARSER 0
+#define ENABLE_MPEGVIDEO_PARSER 0
+#define ENABLE_PNM_PARSER 0
+#define ENABLE_VC1_PARSER 0
+#define ENABLE_MJPEG_ENCODER 1
+#define ENABLE_MSMPEG4V3_ENCODER 1
+#define ENABLE_H263P_ENCODER 1
+#define ENABLE_AC3_ENCODER 1
+#define ENABLE_FFV1_ENCODER 1
+#define ENABLE_FLV1_ENCODER 1
+#define ENABLE_FFVHUFF_ENCODER 1
+#define ENABLE_H263_ENCODER 1
+#define ENABLE_MPEG1VIDEO_ENCODER 1
+#define ENABLE_MPEG2VIDEO_ENCODER 1
+#define ENABLE_MPEG4_ENCODER 1
+#define ENABLE_FLV_ENCODER 1
+#define ENABLE_MP2_ENCODER 1
+#define ENABLE_DVVIDEO_ENCODER 1
+#define ENABLE_HUFFYUV_ENCODER 1
+#define ENABLE_DVBSUB_ENCODER 1
+#define ENABLE_SNOW_ENCODER 1
+#define ENABLE_DNXHD_ENCODER 0
+#define ENABLE_PCM_ZORK_ENCODER 0
+#define ENABLE_ADPCM_IMA_AMV_ENCODER 0
+#define ENABLE_LIBX264_ENCODER 0
+#define ENABLE_LIBXVID_ENCODER 0
+#define ENABLE_LJPEG_ENCODER 0
+#define ENABLE_PAM_ENCODER 0
+#define ENABLE_PBM_ENCODER 0
+#define ENABLE_PGM_ENCODER 0
+#define ENABLE_PGMYUV_ENCODER 0
+#define ENABLE_PPM_ENCODER 0
+#define ENABLE_LIBFAAC_ENCODER 0
+#define ENABLE_LIBMP3LAME_ENCODER 0
+#define ENABLE_LIBTHEORA_ENCODER 0
+#define ENABLE_SONIC_LS_ENCODER 0
+#define ENABLE_ASV1_ENCODER 0
+#define ENABLE_ASV2_ENCODER 0
+#define ENABLE_BMP_ENCODER 0
+#define ENABLE_FLASHSV_ENCODER 0
+#define ENABLE_GIF_ENCODER 0
+#define ENABLE_H261_ENCODER 0
+#define ENABLE_JPEGLS_ENCODER 0
+#define ENABLE_MSMPEG4V1_ENCODER 0
+#define ENABLE_MSMPEG4V2_ENCODER 0
+#define ENABLE_PNG_ENCODER 0
+#define ENABLE_QTRLE_ENCODER 0
+#define ENABLE_RAWVIDEO_ENCODER 0
+#define ENABLE_ROQ_ENCODER 0
+#define ENABLE_RV10_ENCODER 0
+#define ENABLE_RV20_ENCODER 0
+#define ENABLE_SGI_ENCODER 0
+#define ENABLE_SVQ1_ENCODER 0
+#define ENABLE_TARGA_ENCODER 0
+#define ENABLE_TIFF_ENCODER 0
+#define ENABLE_WMV1_ENCODER 0
+#define ENABLE_WMV2_ENCODER 0
+#define ENABLE_ZLIB_ENCODER 0
+#define ENABLE_ZMBV_ENCODER 0
+#define ENABLE_FLAC_ENCODER 0
+#define ENABLE_LIBAMR_NB_ENCODER 0
+#define ENABLE_LIBAMR_WB_ENCODER 0
+#define ENABLE_LIBGSM_ENCODER 0
+#define ENABLE_LIBGSM_MS_ENCODER 0
+#define ENABLE_SONIC_ENCODER 0
+#define ENABLE_VORBIS_ENCODER 0
+#define ENABLE_WMAV1_ENCODER 0
+#define ENABLE_WMAV2_ENCODER 0
+#define ENABLE_PCM_ALAW_ENCODER 0
+#define ENABLE_PCM_MULAW_ENCODER 0
+#define ENABLE_PCM_S8_ENCODER 0
+#define ENABLE_PCM_S16BE_ENCODER 0
+#define ENABLE_PCM_S16LE_ENCODER 0
+#define ENABLE_PCM_S24BE_ENCODER 0
+#define ENABLE_PCM_S24DAUD_ENCODER 0
+#define ENABLE_PCM_S24LE_ENCODER 0
+#define ENABLE_PCM_S32BE_ENCODER 0
+#define ENABLE_PCM_S32LE_ENCODER 0
+#define ENABLE_PCM_U8_ENCODER 0
+#define ENABLE_PCM_U16BE_ENCODER 0
+#define ENABLE_PCM_U16LE_ENCODER 0
+#define ENABLE_PCM_U24BE_ENCODER 0
+#define ENABLE_PCM_U24LE_ENCODER 0
+#define ENABLE_PCM_U32BE_ENCODER 0
+#define ENABLE_PCM_U32LE_ENCODER 0
+#define ENABLE_ROQ_DPCM_ENCODER 0
+#define ENABLE_ADPCM_4XM_ENCODER 0
+#define ENABLE_ADPCM_ADX_ENCODER 0
+#define ENABLE_ADPCM_CT_ENCODER 0
+#define ENABLE_ADPCM_EA_ENCODER 0
+#define ENABLE_ADPCM_G726_ENCODER 0
+#define ENABLE_ADPCM_IMA_DK3_ENCODER 0
+#define ENABLE_ADPCM_IMA_DK4_ENCODER 0
+#define ENABLE_ADPCM_IMA_QT_ENCODER 0
+#define ENABLE_ADPCM_IMA_SMJPEG_ENCODER 0
+#define ENABLE_ADPCM_IMA_WAV_ENCODER 0
+#define ENABLE_ADPCM_IMA_WS_ENCODER 0
+#define ENABLE_ADPCM_MS_ENCODER 0
+#define ENABLE_ADPCM_SBPRO_2_ENCODER 0
+#define ENABLE_ADPCM_SBPRO_3_ENCODER 0
+#define ENABLE_ADPCM_SBPRO_4_ENCODER 0
+#define ENABLE_ADPCM_SWF_ENCODER 0
+#define ENABLE_ADPCM_XA_ENCODER 0
+#define ENABLE_ADPCM_YAMAHA_ENCODER 0
+#define ENABLE_DVDSUB_ENCODER 0
+#define ENABLE_LIBVORBIS_ENCODER 0
+#define ENABLE_MP3_HEADER_COMPRESS_BSF 0
+#define ENABLE_IMX_DUMP_HEADER_BSF 0
+#define ENABLE_DUMP_EXTRADATA_BSF 0
+#define ENABLE_REMOVE_EXTRADATA_BSF 0
+#define ENABLE_NOISE_BSF 0
+#define ENABLE_MP3_HEADER_DECOMPRESS_BSF 0
+#define ENABLE_MJPEGA_DUMP_HEADER_BSF 0
+#define ENABLE_H264_MP4TOANNEXB_BSF 0
+#define ENABLE_MOV2TEXTSUB_BSF 0
+#define ENABLE_TEXT2MOVSUB_BSF 0
+#define CONFIG_MUXERS 1
+#define CONFIG_MOV_MUXER 1
+#define CONFIG_MP4_MUXER 1
+#define CONFIG_PSP_MUXER 1
+#define CONFIG_TG2_MUXER 1
+#define CONFIG_TGP_MUXER 1
+#define CONFIG_ENCODERS 1
+#define CONFIG_DVVIDEO_ENCODER 1
+#define CONFIG_SNOW_ENCODER 1
+#define CONFIG_DECODERS 1
+#define CONFIG_DVVIDEO_DECODER 1
+#define CONFIG_H263_DECODER 1
+#define CONFIG_MPEG4_DECODER 1
+#define CONFIG_SNOW_DECODER 1
+#define CONFIG_VC1_DECODER 1
+#define CONFIG_WMV2_DECODER 1
+#define CONFIG_WMV3_DECODER 1
+#define CONFIG_MPEGAUDIO_HP 1
+#define CONFIG_ZLIB 1
+#define ENABLE_ARMV4L 0
+#define ENABLE_MLIB 0
+#define ENABLE_SPARC 0
+#define ENABLE_ALPHA 0
+#define ENABLE_MMI 0
+#define ENABLE_SH4 0
+#define ENABLE_BFIN 0
+#define ENABLE_SMALL 0
+#define ENABLE_MLP_PARSER 0
+#ifdef ARCH_POWERPC
+#define ENABLE_POWERPC 1
+#else
+#define ENABLE_POWERPC 0
+#endif
+#ifdef ARCH_X86
+#define ENABLE_MMX 1
+#define ENABLE_BSWAP 1
+#define HAVE_BYTESWAP_H 1
+#define HAVE_MMX 1
+#define HAVE_FAST_UNALIGNED 1
+#define ARCH_X86 1
+#else
+#define ENABLE_MMX 0
+#endif
+#ifdef ARCH_X86_64
+#define HAVE_FAST_64BIT 1
+#define HAVE_SSSE3 1
+#define HAVE_EBP_AVAILABLE 1
+#define HAVE_EBX_AVAILABLE 1
+#define ARCH_X86_64 1
+#endif
+#ifdef __APPLE__
+#define CONFIG_DARWIN 1
+#endif
+#define ENABLE_THREADS 1
+#define ENABLE_ENCODERS 1
+#define ENABLE_VIS 0
+#define ENABLE_GRAY 0
+#define HAVE_LRINTF 1
+#define HAVE_LLRINT 1
+#define HAVE_LRINT 1
+#define HAVE_ROUND 1
+#define HAVE_ROUNDF 1
+#define HAVE_THREADS 1
+#define RUNTIME_CPUDETECT 1

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ffconf.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ffconf.c	2008-03-21 06:51:51 UTC (rev 3915)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ffconf.c	2008-03-21 06:51:55 UTC (rev 3916)
@@ -25,6 +25,7 @@
     DECLARE_DECODER(VCR1, vcr1);
     DECLARE_DECODER(VP5, vp5);
     DECLARE_DECODER(VP6, vp6);
+    DECLARE_DECODER(VP6A, vp6);
     DECLARE_DECODER(VP6F, vp6f);
     DECLARE_DECODER(WMV3, wmv3);
     DECLARE_DECODER (WMV1, wmv1);
@@ -54,7 +55,23 @@
     DECLARE_DECODER (AMV, amv);
 #undef DECLARE_DECODER
 #define DECLARE_DECODER(a,b); printf("#define ENABLE_"#a"_DECODER 0\n"); 
+    DECLARE_DECODER(PCX, aasc);
+    DECLARE_DECODER(SUNRAST, aasc);
+    DECLARE_DECODER(VB, aasc);
+    DECLARE_DECODER(XSUB, aasc);
+    DECLARE_DECODER(AC3, aasc);
+    DECLARE_DECODER(APE, aasc);
+    DECLARE_DECODER(MPC8, aasc);
+    DECLARE_DECODER(PCM_S16LE_PLANAR, aasc);
+    DECLARE_DECODER(PCM_ZORK, aasc);
+    DECLARE_DECODER(ADPCM_EA_R1, aasc);
+    DECLARE_DECODER(ADPCM_EA_R2, aasc);
+    DECLARE_DECODER(ADPCM_EA_R3, aasc);
+    DECLARE_DECODER(ADPCM_EA_XAS, aasc);
+    DECLARE_DECODER(ADPCM_IMA_EA_EACS, aasc);
+    DECLARE_DECODER(ADPCM_IMA_EA_SEAD, aasc);
 
+//
     DECLARE_DECODER(AASC, aasc);
     DECLARE_DECODER(AVS, avs);
     DECLARE_DECODER(BETHSOFTVID, bethsoftvid);
@@ -232,6 +249,8 @@
 
 #undef DECLARE_ENCODER
 #define DECLARE_ENCODER(a,b); printf("#define ENABLE_"#a"_ENCODER 0\n"); 
+    DECLARE_ENCODER(DNXHD, amv);
+    DECLARE_ENCODER(PCM_ZORK, amv);
     DECLARE_ENCODER(ADPCM_IMA_AMV, amv);
     DECLARE_ENCODER(LIBX264, libx264);
     DECLARE_ENCODER(LIBXVID, libxvid);
@@ -326,7 +345,9 @@
 	DECLARE_BSF(NOISE, noise);
 	DECLARE_BSF(MP3_HEADER_DECOMPRESS, mp3_header_decompress);
 	DECLARE_BSF(MJPEGA_DUMP_HEADER, mjpega_dump_header);
-	DECLARE_BSF(IMX_DUMP_HEADER, imx_dump_header);
+	DECLARE_BSF(H264_MP4TOANNEXB, imx_dump_header);
+	DECLARE_BSF(MOV2TEXTSUB, imx_dump_header);
+	DECLARE_BSF(TEXT2MOVSUB, imx_dump_header);
 
 #define DECLARE_MUXER(a,b); printf("#define CONFIG_"#a"_MUXER 1\n");
 
@@ -365,6 +386,8 @@
 	ENABLE(SH4, sh4);
 	ENABLE(BFIN, bfin);
 	ENABLE(SMALL, small);
+#define DECLARE_ENABLE_PARSER(a,b); printf("#define ENABLE_"#a"_PARSER 0\n");
+	DECLARE_ENABLE_PARSER(MLP, wmv3);
 
 	// Hack so CMake and autoconf don't need to be changed
 	printf("#ifdef ARCH_POWERPC\n");
@@ -375,14 +398,22 @@
 
 	printf("#ifdef ARCH_X86\n");
 	printf("#define ENABLE_MMX 1\n");
+	printf("#define ENABLE_BSWAP 1\n");
+	printf("#define HAVE_BYTESWAP_H 1\n");
 	printf("#define HAVE_MMX 1\n");
 	printf("#define HAVE_FAST_UNALIGNED 1\n");
+	printf("#define ARCH_X86 1\n");
 	printf("#else\n");
 	printf("#define ENABLE_MMX 0\n");
+
 	printf("#endif\n");
 
 	printf("#ifdef ARCH_X86_64\n");
 	printf("#define HAVE_FAST_64BIT 1\n");
+	printf("#define HAVE_SSSE3 1\n");
+	printf("#define HAVE_EBP_AVAILABLE 1\n");
+	printf("#define HAVE_EBX_AVAILABLE 1\n");
+	printf("#define ARCH_X86_64 1\n");
 	printf("#endif\n");
 
 	printf("#ifdef __APPLE__\n");
@@ -390,7 +421,14 @@
 	printf("#endif\n");
 
 	printf("#define ENABLE_THREADS 1\n");
+	printf("#define ENABLE_ENCODERS 1\n");
+	printf("#define ENABLE_VIS 0\n");
+	printf("#define ENABLE_GRAY 0\n");
 	printf("#define HAVE_LRINTF 1\n");
+	printf("#define HAVE_LLRINT 1\n");
+	printf("#define HAVE_LRINT 1\n");
+	printf("#define HAVE_ROUND 1\n");
+	printf("#define HAVE_ROUNDF 1\n");
 	printf("#define HAVE_THREADS 1\n");
 	printf("#define RUNTIME_CPUDETECT 1\n");
 }



From mean at mail.berlios.de  Fri Mar 21 07:52:17 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 21 Mar 2008 07:52:17 +0100
Subject: [Avidemux-svn-commit] r3917 - in
	branches/avidemux_2.5_branch_gruntster/avidemux: ADM_codecs
	ADM_colorspace ADM_editor ADM_libraries/ADM_ffmpeg/ADM_lavcodec
	ADM_libraries/ADM_ffmpeg/ADM_lavformat
	ADM_libraries/ADM_ffmpeg/ADM_libswscale
	ADM_libraries/ADM_utilities ADM_outputs ADM_video ADM_videoFilter
Message-ID: <200803210652.m2L6qHbS005093@sheep.berlios.de>

Author: mean
Date: 2008-03-21 07:52:13 +0100 (Fri, 21 Mar 2008)
New Revision: 3917

Added:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/ff_png.h
Removed:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/png.h
Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_ffmp43.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_png.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_colorspace/ADM_colorspace.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_colorspace/ADM_rgb.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_colorspace/rgb2yuv.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edRender.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/pngdec.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/pngenc.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/flvenc.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/riff.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/ADM_mp.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_imageResizer.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_pp.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/ADM_lavformat.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidMPdelogo.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidForcedPP.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLResize.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMosaic.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVobSubRender.cpp
Log:
[Lav*] Update + fix unresolved


Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_ffmp43.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_ffmp43.cpp	2008-03-21 06:51:55 UTC (rev 3916)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_ffmp43.cpp	2008-03-21 06:52:13 UTC (rev 3917)
@@ -25,7 +25,9 @@
 
 #include "ADM_assert.h"
 #include "prefs.h"
+extern "C" {
 #include "ADM_lavcodec.h"
+}
 #include "ADM_default.h"
 
 #include "ADM_codecs/ADM_codec.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_png.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_png.cpp	2008-03-21 06:51:55 UTC (rev 3916)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_png.cpp	2008-03-21 06:52:13 UTC (rev 3917)
@@ -28,8 +28,10 @@
 
 #include "ADM_codecs/ADM_codec.h"
 #include "ADM_codecs/ADM_png.h"
-
+extern "C"
+{
 #include "png.h"
+}
 #include "ADM_assert.h"
 
 #define PNG_PTR ((png_structp)png_ptr)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/CMakeLists.txt	2008-03-21 06:51:55 UTC (rev 3916)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/CMakeLists.txt	2008-03-21 06:52:13 UTC (rev 3917)
@@ -14,4 +14,6 @@
 
 IF (USE_XVID_4)
 	ADD_SOURCE_CFLAGS(ADM_xvid4.cpp -I${XVID_INCLUDE_DIR})
-ENDIF (USE_XVID_4)
\ No newline at end of file
+ENDIF (USE_XVID_4)
+
+REMOVE_DEFINITIONS(-DHAVE_CONFIG_H)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_colorspace/ADM_colorspace.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_colorspace/ADM_colorspace.cpp	2008-03-21 06:51:55 UTC (rev 3916)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_colorspace/ADM_colorspace.cpp	2008-03-21 06:52:13 UTC (rev 3917)
@@ -18,14 +18,13 @@
 #include "ADM_default.h"
 #include "colorspace.h"
 
-#ifdef ADM_CPU_X86
+
 extern "C" {
 #include "ADM_libraries/ADM_ffmpeg/ADM_lavcodec/avcodec.h"
-}
-#endif
-
 #include "ADM_libraries/ADM_ffmpeg/ADM_lavutil/avutil.h"
 #include "ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale.h"
+}
+
 #include "ADM_rgb.h" 
 #include "ADM_colorspace.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_colorspace/ADM_rgb.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_colorspace/ADM_rgb.cpp	2008-03-21 06:51:55 UTC (rev 3916)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_colorspace/ADM_rgb.cpp	2008-03-21 06:52:13 UTC (rev 3917)
@@ -23,14 +23,13 @@
 #include "ADM_default.h"
 #include "colorspace.h"
 
-#ifdef ADM_CPU_X86
 extern "C" {
 #include "ADM_libraries/ADM_ffmpeg/ADM_lavcodec/avcodec.h"
-}
-#endif
-
 #include "ADM_libraries/ADM_ffmpeg/ADM_lavutil/avutil.h"
 #include "ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale.h"
+}
+
+	
 #include "ADM_rgb.h" 
 
 #define CLEANUP() \

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_colorspace/rgb2yuv.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_colorspace/rgb2yuv.cpp	2008-03-21 06:51:55 UTC (rev 3916)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_colorspace/rgb2yuv.cpp	2008-03-21 06:52:13 UTC (rev 3917)
@@ -24,13 +24,12 @@
 #include "config.h"
 #include "ADM_default.h"
 
-#ifdef ADM_CPU_X86
+
 extern "C" {
 #include "ADM_libraries/ADM_ffmpeg/ADM_lavcodec/avcodec.h"
+#include "ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale.h"
 }
-#endif
 
-#include "ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale.h"
 #include "colorspace.h"
 
 /**

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edRender.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edRender.cpp	2008-03-21 06:51:55 UTC (rev 3916)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edRender.cpp	2008-03-21 06:52:13 UTC (rev 3917)
@@ -519,7 +519,8 @@
 
 	// we do postproc !
 	// keep
-	uint8_t *oBuff[3],*iBuff[3];
+	uint8_t *oBuff[3];
+	const uint8_t *iBuff[3];
 	int	strideTab[3];
 	int	strideTab2[3];
 	aviInfo _info;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/CMakeLists.txt	2008-03-21 06:51:55 UTC (rev 3916)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/CMakeLists.txt	2008-03-21 06:52:13 UTC (rev 3917)
@@ -16,7 +16,10 @@
 	h263_parser.c  h264_parser.c  mpeg4video_parser.c  mpegvideo_enc.c  mpeg12enc.c
 	mpegaudioenc.c  ac3enc.c  ac3.c  ac3tab.c  mjpegenc.c  mjpegdec.c  wma.c  
 	dvbsub_parser.c  dvbsubdec.c  dvbsub.c  xiph.c  sp5xdec.c  nellymoserdec.c
-	ADM_lavcodec.cpp
+	ADM_lavcodec.cpp pthread.c
+	huffman.c wmv2dec.c wmv2.c h264pred.c
+	intrax8.c intrax8dsp.c dnxhddata.c faanidct.c ac3_parser.c
+	aac_ac3_parser.c aac_parser.c
 )
 
 IF(ADM_CPU_X86)
@@ -24,7 +27,10 @@
 		i386/cputest.c  i386/mpegvideo_mmx.c  i386/vp3dsp_mmx.c  i386/dsputil_mmx.c
 		i386/fdct_mmx.c  i386/motion_est_mmx.c  i386/simple_idct_mmx.c  i386/fft_sse.c
 		i386/vp3dsp_sse2.c  i386/idct_mmx_xvid.c  i386/fft_3dn2.c  i386/snowdsp_mmx.c
-		i386/fft_3dn.c)
+		i386/fft_3dn.c
+		i386/dsputilenc_mmx.c
+		i386/vc1dsp_mmx.c
+		)
 ENDIF(ADM_CPU_X86)
 
 IF (ADM_CPU_ALTIVEC)

Copied: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/ff_png.h (from rev 3916, branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/png.h)
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/png.h	2008-03-21 06:51:55 UTC (rev 3916)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/ff_png.h	2008-03-21 06:52:13 UTC (rev 3917)
@@ -0,0 +1,77 @@
+/*
+ * PNG image format
+ * Copyright (c) 2003 Fabrice Bellard.
+ *
+ * This file is part of FFmpeg.
+ *
+ * FFmpeg is free software; you can redistribute it and/or
+ * modify it under the terms of the GNU Lesser General Public
+ * License as published by the Free Software Foundation; either
+ * version 2.1 of the License, or (at your option) any later version.
+ *
+ * FFmpeg is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+ * Lesser General Public License for more details.
+ *
+ * You should have received a copy of the GNU Lesser General Public
+ * License along with FFmpeg; if not, write to the Free Software
+ * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
+ */
+
+#ifndef FFMPEG_PNG_H
+#define FFMPEG_PNG_H
+
+#include <stdint.h>
+
+#define PNG_COLOR_MASK_PALETTE    1
+#define PNG_COLOR_MASK_COLOR      2
+#define PNG_COLOR_MASK_ALPHA      4
+
+#define PNG_COLOR_TYPE_GRAY 0
+#define PNG_COLOR_TYPE_PALETTE  (PNG_COLOR_MASK_COLOR | PNG_COLOR_MASK_PALETTE)
+#define PNG_COLOR_TYPE_RGB        (PNG_COLOR_MASK_COLOR)
+#define PNG_COLOR_TYPE_RGB_ALPHA  (PNG_COLOR_MASK_COLOR | PNG_COLOR_MASK_ALPHA)
+#define PNG_COLOR_TYPE_GRAY_ALPHA (PNG_COLOR_MASK_ALPHA)
+
+#define PNG_FILTER_TYPE_LOCO   64
+#define PNG_FILTER_VALUE_NONE  0
+#define PNG_FILTER_VALUE_SUB   1
+#define PNG_FILTER_VALUE_UP    2
+#define PNG_FILTER_VALUE_AVG   3
+#define PNG_FILTER_VALUE_PAETH 4
+#define PNG_FILTER_VALUE_MIXED 5
+
+#define PNG_IHDR      0x0001
+#define PNG_IDAT      0x0002
+#define PNG_ALLIMAGE  0x0004
+#define PNG_PLTE      0x0008
+
+#define NB_PASSES 7
+
+extern const uint8_t ff_pngsig[8];
+extern const uint8_t ff_mngsig[8];
+
+/* Mask to determine which y pixels are valid in a pass */
+extern const uint8_t ff_png_pass_ymask[NB_PASSES];
+
+/* minimum x value */
+extern const uint8_t ff_png_pass_xmin[NB_PASSES];
+
+/* x shift to get row width */
+extern const uint8_t ff_png_pass_xshift[NB_PASSES];
+
+/* Mask to determine which pixels are valid in a pass */
+extern const uint8_t ff_png_pass_mask[NB_PASSES];
+
+extern void *ff_png_zalloc(void *opaque, unsigned int items,
+                           unsigned int size);
+
+extern void ff_png_zfree(void *opaque, void *ptr);
+
+extern int ff_png_get_nb_channels(int color_type);
+
+/* compute the row size of an interleaved pass */
+extern int ff_png_pass_row_size(int pass, int bits_per_pixel, int width);
+
+#endif /* FFMPEG_PNG_H */

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/png.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/png.h	2008-03-21 06:51:55 UTC (rev 3916)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/png.h	2008-03-21 06:52:13 UTC (rev 3917)
@@ -1,77 +0,0 @@
-/*
- * PNG image format
- * Copyright (c) 2003 Fabrice Bellard.
- *
- * This file is part of FFmpeg.
- *
- * FFmpeg is free software; you can redistribute it and/or
- * modify it under the terms of the GNU Lesser General Public
- * License as published by the Free Software Foundation; either
- * version 2.1 of the License, or (at your option) any later version.
- *
- * FFmpeg is distributed in the hope that it will be useful,
- * but WITHOUT ANY WARRANTY; without even the implied warranty of
- * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
- * Lesser General Public License for more details.
- *
- * You should have received a copy of the GNU Lesser General Public
- * License along with FFmpeg; if not, write to the Free Software
- * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
- */
-
-#ifndef FFMPEG_PNG_H
-#define FFMPEG_PNG_H
-
-#include <stdint.h>
-
-#define PNG_COLOR_MASK_PALETTE    1
-#define PNG_COLOR_MASK_COLOR      2
-#define PNG_COLOR_MASK_ALPHA      4
-
-#define PNG_COLOR_TYPE_GRAY 0
-#define PNG_COLOR_TYPE_PALETTE  (PNG_COLOR_MASK_COLOR | PNG_COLOR_MASK_PALETTE)
-#define PNG_COLOR_TYPE_RGB        (PNG_COLOR_MASK_COLOR)
-#define PNG_COLOR_TYPE_RGB_ALPHA  (PNG_COLOR_MASK_COLOR | PNG_COLOR_MASK_ALPHA)
-#define PNG_COLOR_TYPE_GRAY_ALPHA (PNG_COLOR_MASK_ALPHA)
-
-#define PNG_FILTER_TYPE_LOCO   64
-#define PNG_FILTER_VALUE_NONE  0
-#define PNG_FILTER_VALUE_SUB   1
-#define PNG_FILTER_VALUE_UP    2
-#define PNG_FILTER_VALUE_AVG   3
-#define PNG_FILTER_VALUE_PAETH 4
-#define PNG_FILTER_VALUE_MIXED 5
-
-#define PNG_IHDR      0x0001
-#define PNG_IDAT      0x0002
-#define PNG_ALLIMAGE  0x0004
-#define PNG_PLTE      0x0008
-
-#define NB_PASSES 7
-
-extern const uint8_t ff_pngsig[8];
-extern const uint8_t ff_mngsig[8];
-
-/* Mask to determine which y pixels are valid in a pass */
-extern const uint8_t ff_png_pass_ymask[NB_PASSES];
-
-/* minimum x value */
-extern const uint8_t ff_png_pass_xmin[NB_PASSES];
-
-/* x shift to get row width */
-extern const uint8_t ff_png_pass_xshift[NB_PASSES];
-
-/* Mask to determine which pixels are valid in a pass */
-extern const uint8_t ff_png_pass_mask[NB_PASSES];
-
-extern void *ff_png_zalloc(void *opaque, unsigned int items,
-                           unsigned int size);
-
-extern void ff_png_zfree(void *opaque, void *ptr);
-
-extern int ff_png_get_nb_channels(int color_type);
-
-/* compute the row size of an interleaved pass */
-extern int ff_png_pass_row_size(int pass, int bits_per_pixel, int width);
-
-#endif /* FFMPEG_PNG_H */

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/pngdec.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/pngdec.c	2008-03-21 06:51:55 UTC (rev 3916)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/pngdec.c	2008-03-21 06:52:13 UTC (rev 3917)
@@ -20,7 +20,7 @@
  */
 #include "avcodec.h"
 #include "bytestream.h"
-#include "png.h"
+#include "ff_png.h"
 #include "dsputil.h"
 
 /* TODO:

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/pngenc.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/pngenc.c	2008-03-21 06:51:55 UTC (rev 3916)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/pngenc.c	2008-03-21 06:52:13 UTC (rev 3917)
@@ -20,7 +20,7 @@
  */
 #include "avcodec.h"
 #include "bytestream.h"
-#include "png.h"
+#include "ff_png.h"
 #include <dsputil.h>
 
 /* TODO:

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/CMakeLists.txt	2008-03-21 06:51:55 UTC (rev 3916)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/CMakeLists.txt	2008-03-21 06:52:13 UTC (rev 3917)
@@ -3,7 +3,8 @@
 SET(${ADM_LIB}_SRCS 
 	mpeg.c  utils.c  avio.c  aviobuf.c  cutils.c  img2.c  file.c  mpegtsenc.c
 	movenc.c  avienc.c  wav.c  mov.c  matroska.c  isom.c  isom.h  riff.c
-	flvenc.c  matroskaenc.c)
+	flvenc.c  matroskaenc.c
+	avc.c raw.c  riff.c)
 
 ADD_LIBRARY(${ADM_LIB} SHARED ${${ADM_LIB}_SRCS})
 ADD_TARGET_CFLAGS(${ADM_LIB} "-I../ADM_lavcodec -I../ADM_lavutil -DHAVE_AV_CONFIG_H")

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/flvenc.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/flvenc.c	2008-03-21 06:51:55 UTC (rev 3916)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/flvenc.c	2008-03-21 06:52:13 UTC (rev 3917)
@@ -340,3 +340,9 @@
     flv_write_trailer,
     .codec_tag= (const AVCodecTag*[]){flv_video_codec_ids, flv_audio_codec_ids, 0},
 };
+// MEANX
+int flvenc_init(void)
+{
+    av_register_output_format(&flv_muxer);
+    return 0;
+}
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/riff.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/riff.c	2008-03-21 06:51:55 UTC (rev 3916)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/riff.c	2008-03-21 06:52:13 UTC (rev 3917)
@@ -343,7 +343,7 @@
 }
 #endif //CONFIG_MUXERS
 
-#ifdef CONFIG_DEMUXERS
+// MEANX #ifdef CONFIG_DEMUXERS
 /* We could be given one of the three possible structures here:
  * WAVEFORMAT, PCMWAVEFORMAT or WAVEFORMATEX. Each structure
  * is an expansion of the previous one with the fields added
@@ -410,8 +410,8 @@
         id = CODEC_ID_PCM_ZORK;
     return id;
 }
-#endif // CONFIG_DEMUXERS
-
+//#endif // CONFIG_DEMUXERS
+//#ifdef CONFIG_DEMUXERS //MEANX
 void ff_parse_specific_params(AVCodecContext *stream, int *au_rate, int *au_ssize, int *au_scale)
 {
     int gcd;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/ADM_mp.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/ADM_mp.cpp	2008-03-21 06:51:55 UTC (rev 3916)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/ADM_mp.cpp	2008-03-21 06:52:13 UTC (rev 3917)
@@ -21,14 +21,12 @@
 #include "config.h"
 #include "fourcc.h"
 
-#ifdef ADM_CPU_X86
+
 extern "C" {
 #include "ADM_libraries/ADM_ffmpeg/ADM_lavcodec/avcodec.h"
-}
-#endif
-
 #include "ADM_libraries/ADM_ffmpeg/ADM_lavutil/avutil.h"
 #include "ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale.h"
+}
 
 
 #include "ADM_mp.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_imageResizer.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_imageResizer.cpp	2008-03-21 06:51:55 UTC (rev 3916)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_imageResizer.cpp	2008-03-21 06:52:13 UTC (rev 3917)
@@ -11,23 +11,16 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include "config.h"
-
-#include <stdlib.h>
-#include <stdio.h>
-#include <string.h>
-#include "ADM_assert.h"
 #include "ADM_default.h"
 
 #include "ADM_image.h"
 
-#ifdef ADM_CPU_X86
 extern "C" {
 #include "ADM_libraries/ADM_ffmpeg/ADM_lavcodec/avcodec.h"
-}
-#endif
 #include "ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale.h"
+}
 
+
 ADMImageResizer::ADMImageResizer(uint32_t ow, uint32_t oh, uint32_t dw, uint32_t dh)
 {
 	init(ow, oh, dw, dh, PIX_FMT_YUV420P, PIX_FMT_YUV420P);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_pp.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_pp.h	2008-03-21 06:51:55 UTC (rev 3916)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_pp.h	2008-03-21 06:52:13 UTC (rev 3917)
@@ -11,7 +11,9 @@
 //
 #ifndef ADMPP
 #define ADMPP
+extern "C" {
 #include "../ADM_libpostproc/postprocess.h"
+}
 typedef struct ADM_PP
 {
 	pp_context_t			*ppContext;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/ADM_lavformat.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/ADM_lavformat.cpp	2008-03-21 06:51:55 UTC (rev 3916)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/ADM_lavformat.cpp	2008-03-21 06:52:13 UTC (rev 3917)
@@ -680,7 +680,7 @@
 		// Flush
 		// Cause deadlock :
 		av_write_trailer(oc);
-		url_fclose(&oc->pb);
+		url_fclose((oc->pb));
 
 	}
 	if(audio_st)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidMPdelogo.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidMPdelogo.cpp	2008-03-21 06:51:55 UTC (rev 3916)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidMPdelogo.cpp	2008-03-21 06:52:13 UTC (rev 3917)
@@ -13,14 +13,12 @@
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_video/ADM_vidCommonFilter.h"
 
-#ifdef ADM_CPU_X86
+
 extern "C" {
 #include "ADM_libraries/ADM_ffmpeg/ADM_lavcodec/avcodec.h"
-}
-#endif
-
 #include "ADM_libraries/ADM_ffmpeg/ADM_lavutil/avutil.h"
 #include "ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale.h"
+}
 
 #include "ADM_filter/video_filters.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp	2008-03-21 06:51:55 UTC (rev 3916)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp	2008-03-21 06:52:13 UTC (rev 3917)
@@ -248,7 +248,8 @@
 
   
   //
-  uint8_t *iBuff[3],*oBuff[3];
+  const uint8_t *iBuff[3];
+   uint8_t *oBuff[3];
   int strideTab[3],strideTab2[3];                 
                                                                 
   oBuff[0]=YPLANE(data);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidForcedPP.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidForcedPP.cpp	2008-03-21 06:51:55 UTC (rev 3916)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidForcedPP.cpp	2008-03-21 06:52:13 UTC (rev 3917)
@@ -166,7 +166,8 @@
 		}
 			// we do postproc !
 			// keep
-			uint8_t *iBuff[3],*oBuff[3];
+			const uint8_t *iBuff[3];
+			uint8_t *oBuff[3];
 			int strideTab[3],strideTab2[3];			
 				
 				

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLResize.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLResize.cpp	2008-03-21 06:51:55 UTC (rev 3916)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLResize.cpp	2008-03-21 06:52:13 UTC (rev 3917)
@@ -26,14 +26,12 @@
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_video/ADM_vidCommonFilter.h"
 
-#ifdef ADM_CPU_X86
+
 extern "C" {
 #include "ADM_libraries/ADM_ffmpeg/ADM_lavcodec/avcodec.h"
-}
-#endif
-
 #include "ADM_libraries/ADM_ffmpeg/ADM_lavutil/avutil.h"
 #include "ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale.h"
+}
 #include "ADM_filter/video_filters.h"
 
 typedef struct alg

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMosaic.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMosaic.cpp	2008-03-21 06:51:55 UTC (rev 3916)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMosaic.cpp	2008-03-21 06:52:13 UTC (rev 3917)
@@ -23,15 +23,16 @@
 
 #include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
 
-#ifdef ADM_CPU_X86
+
 extern "C" {
 #include "ADM_libraries/ADM_ffmpeg/ADM_lavcodec/avcodec.h"
-}
-#endif
-
 #include "ADM_libraries/ADM_ffmpeg/ADM_lavutil/avutil.h"
 #include "ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale.h"
 
+}
+
+
+
 #include "ADM_filter/video_filters.h"
 #include "ADM_video/ADM_cache.h"
 #include "ADM_vidMosaic_param.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVobSubRender.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVobSubRender.cpp	2008-03-21 06:51:55 UTC (rev 3916)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVobSubRender.cpp	2008-03-21 06:52:13 UTC (rev 3917)
@@ -65,16 +65,15 @@
 #include "ADM_vobsubinfo.h"
 #include "ADM_vidVobSub.h"
 
-#ifdef ADM_CPU_X86
+
 extern "C" {
 #include "ADM_libraries/ADM_ffmpeg/ADM_lavcodec/avcodec.h"
-}
-#endif
-
 #include "ADM_libraries/ADM_ffmpeg/ADM_lavutil/avutil.h"
 #include "ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale.h"
+}
 
 
+
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME MODULE_FILTER
 #include "ADM_osSupport/ADM_debug.h"



From mean at mail.berlios.de  Fri Mar 21 07:52:20 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 21 Mar 2008 07:52:20 +0100
Subject: [Avidemux-svn-commit] r3918 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavutil
Message-ID: <200803210652.m2L6qKw1005103@sheep.berlios.de>

Author: mean
Date: 2008-03-21 07:52:20 +0100 (Fri, 21 Mar 2008)
New Revision: 3918

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavutil/CMakeLists.txt
Log:
[Lav*] use our own memory manager


Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavutil/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavutil/CMakeLists.txt	2008-03-21 06:52:13 UTC (rev 3917)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavutil/CMakeLists.txt	2008-03-21 06:52:20 UTC (rev 3918)
@@ -14,7 +14,6 @@
 lzo.c
 mathematics.c
 md5.c
-mem.c
 random.c
 rational.c
 rc4.c



From mean at mail.berlios.de  Fri Mar 21 07:52:22 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 21 Mar 2008 07:52:22 +0100
Subject: [Avidemux-svn-commit] r3919 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs
Message-ID: <200803210652.m2L6qMIO005113@sheep.berlios.de>

Author: mean
Date: 2008-03-21 07:52:21 +0100 (Fri, 21 Mar 2008)
New Revision: 3919

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_ffmp43.cpp
Log:
[Lav*] Enable multithreaded h264 encoding


Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_ffmp43.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_ffmp43.cpp	2008-03-21 06:52:20 UTC (rev 3918)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_ffmp43.cpp	2008-03-21 06:52:21 UTC (rev 3919)
@@ -537,6 +537,7 @@
   _refCopy = 1;			// YUV420 only
   _context->extradata = (uint8_t *) d;
   _context->extradata_size = (int) l;
+  decoderMultiThread ();
   if(lowdelay)
     LOWDELAY();
   printf ("[lavc] Initializing H264 decoder with %d extradata\n", l);



From mean at mail.berlios.de  Fri Mar 21 07:52:24 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 21 Mar 2008 07:52:24 +0100
Subject: [Avidemux-svn-commit] r3920 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat
Message-ID: <200803210652.m2L6qOoF005123@sheep.berlios.de>

Author: mean
Date: 2008-03-21 07:52:24 +0100 (Fri, 21 Mar 2008)
New Revision: 3920

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/CMakeLists.txt
Log:
[Lac*] Remove dupe (riff.c)


Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/CMakeLists.txt	2008-03-21 06:52:21 UTC (rev 3919)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/CMakeLists.txt	2008-03-21 06:52:24 UTC (rev 3920)
@@ -2,7 +2,7 @@
 
 SET(${ADM_LIB}_SRCS 
 	mpeg.c  utils.c  avio.c  aviobuf.c  cutils.c  img2.c  file.c  mpegtsenc.c
-	movenc.c  avienc.c  wav.c  mov.c  matroska.c  isom.c  isom.h  riff.c
+	movenc.c  avienc.c  wav.c  mov.c  matroska.c  isom.c  isom.h  
 	flvenc.c  matroskaenc.c
 	avc.c raw.c  riff.c)
 



From mean at mail.berlios.de  Fri Mar 21 07:52:26 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 21 Mar 2008 07:52:26 +0100
Subject: [Avidemux-svn-commit] r3921 -
	branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_dca
Message-ID: <200803210652.m2L6qQfR005133@sheep.berlios.de>

Author: mean
Date: 2008-03-21 07:52:26 +0100 (Fri, 21 Mar 2008)
New Revision: 3921

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_dca/ADM_dca.cpp
Log:
[Merge]


Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_dca/ADM_dca.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_dca/ADM_dca.cpp	2008-03-21 06:52:24 UTC (rev 3920)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_dca/ADM_dca.cpp	2008-03-21 06:52:26 UTC (rev 3921)
@@ -15,22 +15,89 @@
  *                                                                         *
  ***************************************************************************/
 #include <math.h>
-
-#include "config.h"
 #include "ADM_default.h"
+#include "ADM_ad_plugin.h"
+#ifdef USE_LIBDCA_002
+extern "C" {
+#include "dts.h"
+}
+#define LIBDCA_STATE dts_state_t
+#define DTS(x) DTS_##x
+#else
+extern "C" {
+#include "dca.h"
+}
+#define LIBDCA_STATE dca_state_t
+#define DTS(x) DCA_##x 
+#endif
 
-#include "ADM_audio/aviaudio.hxx"
-#include "ADM_audiocodec/ADM_audiocodec.h"
+#define DTS_HEADER_SIZE (10)
 
-#include "prefs.h"
+class ADM_AudiocodecDCA : public     ADM_Audiocodec
+{
+	protected:
+		void *dts_handle;
 
-#ifdef USE_LIBDCA
-#include "ADM_audio/ADM_dcainfo.h"
-#include "ADM_libraries/ADM_libwrapper/libwrapper_global.h"
+	public:
+		ADM_AudiocodecDCA(uint32_t fourcc, WAVHeader *info, uint32_t l, uint8_t *d);
+		virtual	~ADM_AudiocodecDCA();
+		virtual	uint8_t beginDecompress(void);
+		virtual	uint8_t endDecompress(void);
+		virtual	uint8_t run(uint8_t *inptr, uint32_t nbIn, float *outptr, uint32_t *nbOut);
+		virtual	uint8_t isCompressed(void) {return 1;}
+		virtual	uint8_t isDecompressable(void) {return 1;}
 
-#define DTS_HANDLE ((dts_state_t *)dts_handle)
+   };
+typedef struct
+{
+		int (*dts_block)(LIBDCA_STATE* state);
+		int (*dts_blocks_num) (LIBDCA_STATE* state);
+		int (*dts_frame) (LIBDCA_STATE* state, uint8_t* buf, int* flags, level_t* level, sample_t bias);
+		void (*dts_free) (LIBDCA_STATE* state);
+		LIBDCA_STATE* (*dts_init) (uint32_t mm_accel);
+		sample_t* (*dts_samples) (LIBDCA_STATE* state);
+		int (*dts_syncinfo) (LIBDCA_STATE* state, uint8_t* buf, int* flags, int* sample_rate, int* bit_rate, int* frame_length);
+}DCA_func_struct;
+#ifdef USE_LIBDCA_002
+DCA_func_struct dcaFunctions=
+{
+	dts_block, 
+	dts_blocks_num, 
+	dts_frame, 
+	dts_free, 
+	dts_init,
+	dts_samples, 
+	dts_syncinfo
+};	
+#else // 05
+DCA_func_struct dcaFunctions=
+{
+	dca_block, 
+	dca_blocks_num, 
+	dca_frame, 
+	dca_free, 
+	dca_init,
+	dca_samples, 
+	dca_syncinfo
+};	
+#endif
 
-ADM_AudiocodecDCA::ADM_AudiocodecDCA( uint32_t fourcc, WAVHeader *info) :   ADM_Audiocodec(fourcc)
+DCA_func_struct *dca=&dcaFunctions;
+
+#define DTS_HANDLE ((LIBDCA_STATE *)dts_handle)
+// Supported formats + declare our plugin
+//*******************************************************
+static uint32_t Formats[]={WAV_DTS};
+DECLARE_AUDIO_DECODER(ADM_AudiocodecDCA,						// Class
+			0,0,1, 												// Major, minor,patch 
+			Formats, 											// Supported formats
+#ifdef USE_LIBDCA_002			
+			"libDts decoder plugin for avidemux (c) Mean/Gruntster\n"); 	// Desc
+#else
+			"libDca decoder plugin for avidemux (c) Mean/Gruntster\n"); 	// Desc
+#endif
+   //********************************************************
+ADM_AudiocodecDCA::ADM_AudiocodecDCA(uint32_t fourcc, WAVHeader *info, uint32_t l, uint8_t *d) :   ADM_Audiocodec(fourcc)
 {
     int flags=0;
     ADM_assert(fourcc==WAV_DTS);
@@ -43,7 +110,7 @@
     CHK(MMXEXT,MMXEXT);
 #endif
     
-    dts_handle=(void *)dca->dts_init_(flags);
+    dts_handle=(void *)dca->dts_init(flags);
     if(!dts_handle)
     {
         printf("Cannot init libdca\n");
@@ -56,7 +123,7 @@
 {
     if(dts_handle)
     {
-        dca->dts_free_(DTS_HANDLE);
+        dca->dts_free(DTS_HANDLE);
         dts_handle=NULL;
     }
 }
@@ -90,7 +157,7 @@
             break;
         }
         //length = ADM_DCAGetInfo(ptr,nbIn, &samprate, &bitrate, &chan,&syncoff,&flags);
-        length = dca->dts_syncinfo_ (DTS_HANDLE,  inptr, &flags, &samprate,&bitrate, &frame_length);
+        length = dca->dts_syncinfo (DTS_HANDLE,  inptr, &flags, &samprate,&bitrate, &frame_length);
 
         if(!length)
         {
@@ -102,41 +169,41 @@
             // not enough data
             break;
         }
+        CHANNEL_TYPE *p_ch_type = channelMapping;
 
-	if (ch_route.mode < 1) {
-		CHANNEL_TYPE *p_ch_type = ch_route.input_type;
-		switch (flags & DTS_CHANNEL_MASK) {
-			case DTS_MONO:
+		switch (flags & DTS(CHANNEL_MASK)) 
+		{
+			case DTS(MONO):
 				*(p_ch_type++) = CH_MONO;
 			break;
-			case DTS_STEREO:
-			case DTS_DOLBY:
+			case DTS(STEREO):
+			case DTS(DOLBY):
 				*(p_ch_type++) = CH_FRONT_LEFT;
 				*(p_ch_type++) = CH_FRONT_RIGHT;
 			break;
-			case DTS_3F:
+			case DTS(3F):
 				*(p_ch_type++) = CH_FRONT_CENTER;
 				*(p_ch_type++) = CH_FRONT_LEFT;
 				*(p_ch_type++) = CH_FRONT_RIGHT;
 			break;
-			case DTS_2F1R:
+			case DTS(2F1R):
 				*(p_ch_type++) = CH_FRONT_LEFT;
 				*(p_ch_type++) = CH_FRONT_RIGHT;
 				*(p_ch_type++) = CH_REAR_CENTER;
 			break;
-			case DTS_3F1R:
+			case DTS(3F1R):
 				*(p_ch_type++) = CH_FRONT_CENTER;
 				*(p_ch_type++) = CH_FRONT_LEFT;
 				*(p_ch_type++) = CH_FRONT_RIGHT;
 				*(p_ch_type++) = CH_REAR_CENTER;
 			break;
-			case DTS_2F2R:
+			case DTS(2F2R):
 				*(p_ch_type++) = CH_FRONT_LEFT;
 				*(p_ch_type++) = CH_FRONT_RIGHT;
 				*(p_ch_type++) = CH_REAR_LEFT;
 				*(p_ch_type++) = CH_REAR_RIGHT;
 			break;
-			case DTS_3F2R:
+			case DTS(3F2R):
 				*(p_ch_type++) = CH_FRONT_CENTER;
 				*(p_ch_type++) = CH_FRONT_LEFT;
 				*(p_ch_type++) = CH_FRONT_RIGHT;
@@ -145,17 +212,18 @@
 			break;
 			default:
 				ADM_assert(0);
-		}
-		if (flags & DTS_LFE) {
+		} // End switch
+		if (flags & DTS(LFE)) 
+		{
 			*(p_ch_type++) = CH_LFE;
 		}
-	}
+	
 
         sample_t level = 1, bias = 0;
-        flags &=DTS_CHANNEL_MASK;
-        flags |= DTS_ADJUST_LEVEL;
+        flags &=DTS(CHANNEL_MASK);
+        flags |= DTS(ADJUST_LEVEL);
 
-        if (dca->dts_frame_(DTS_HANDLE, inptr, &flags, &level, bias))
+        if (dca->dts_frame(DTS_HANDLE, inptr, &flags, &level, bias))
         {
             printf("\n DTS_frame failed!");
             inptr+=length;
@@ -168,17 +236,17 @@
         inptr+=length;
         nbIn-=length;
         // Each block is 256 samples
-        *nbOut += 256 * chan * dca->dts_blocks_num_(DTS_HANDLE);
+        *nbOut += 256 * chan * dca->dts_blocks_num(DTS_HANDLE);
 	float *cur;
-	for (int i = 0; i < dca->dts_blocks_num_(DTS_HANDLE); i++) {
-		if (dca->dts_block_ (DTS_HANDLE)) {
-			printf("\n[DTS] dts_block failed on block %d/%d\n",i,dca->dts_blocks_num_ (DTS_HANDLE));
+	for (int i = 0; i < dca->dts_blocks_num(DTS_HANDLE); i++) {
+		if (dca->dts_block(DTS_HANDLE)) {
+			printf("\n[DTS] dts_block failed on block %d/%d\n",i,dca->dts_blocks_num (DTS_HANDLE));
 			// in that case we silent out the chunk
 			memset(outptr, 0, 256 * chan * sizeof(float));
 		} else {
 			float *cur;
 			for (int k = 0; k < chan; k++) {
-				sample_t *sample=(sample_t *)dca->dts_samples_(DTS_HANDLE);
+				sample_t *sample=(sample_t *)dca->dts_samples(DTS_HANDLE);
 				sample += 256 * k;
 				cur = outptr + k;
 				for (int j = 0; j < 256; j++) {
@@ -194,4 +262,3 @@
     return 1; 
 }
 
-#endif



From mean at mail.berlios.de  Fri Mar 21 07:52:28 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 21 Mar 2008 07:52:28 +0100
Subject: [Avidemux-svn-commit] r3922 -
	branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_dca
Message-ID: <200803210652.m2L6qSHG005143@sheep.berlios.de>

Author: mean
Date: 2008-03-21 07:52:28 +0100 (Fri, 21 Mar 2008)
New Revision: 3922

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_dca/CMakeLists.txt
Log:
[Merge]


Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_dca/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_dca/CMakeLists.txt	2008-03-21 06:52:26 UTC (rev 3921)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_dca/CMakeLists.txt	2008-03-21 06:52:28 UTC (rev 3922)
@@ -1,5 +1,6 @@
+# DCA decoder
 INCLUDE(admCheckDca)
-checkFaad()
+checkDca()
 
 IF (LIBDCA_FOUND)
 	INCLUDE(ad_plugin)
@@ -10,7 +11,8 @@
 	TARGET_LINK_LIBRARIES(ADM_ad_dca ${LIBDCA_LIBRARY_DIR})
 
 	ADD_TARGET_CFLAGS(ADM_ad_dca "-I${LIBDCA_INCLUDE_DIR}")
+	ADD_TARGET_CFLAGS(ADM_ad_dca "-DUSE_LIBDCA_${LIBDCA_VERSION}")
 
 	INIT_AUDIO_PLUGIN(ADM_ad_dca)
 	INSTALL_AUDIODECODER(ADM_ad_dca)
-ENDIF (HAVE_FAAD)
+ENDIF (LIBDCA_FOUND)



From mean at mail.berlios.de  Fri Mar 21 07:52:29 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 21 Mar 2008 07:52:29 +0100
Subject: [Avidemux-svn-commit] r3923 -
	branches/avidemux_2.5_branch_gruntster/cmake
Message-ID: <200803210652.m2L6qTVv005153@sheep.berlios.de>

Author: mean
Date: 2008-03-21 07:52:29 +0100 (Fri, 21 Mar 2008)
New Revision: 3923

Modified:
   branches/avidemux_2.5_branch_gruntster/cmake/admCheckDca.cmake
Log:
[Merge]


Modified: branches/avidemux_2.5_branch_gruntster/cmake/admCheckDca.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admCheckDca.cmake	2008-03-21 06:52:28 UTC (rev 3922)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admCheckDca.cmake	2008-03-21 06:52:29 UTC (rev 3923)
@@ -14,22 +14,13 @@
 
 	SET(LIBDCA_VERSION 005)
 
-	IF (USE_LATE_BINDING)
-		FIND_HEADER_AND_LIB(LIBDCA_005 dca.h)
+	FIND_HEADER_AND_LIB(LIBDCA_005 dca.h dca dca_init ${LIBDCA_REQUIRED_FLAGS})
 
-		IF (NOT LIBDCA_005_FOUND)
-			SET(LIBDCA_VERSION 002)
-			FIND_HEADER_AND_LIB(LIBDCA_002 dts.h)
-		ENDIF (NOT LIBDCA_005_FOUND)
-	ELSE (USE_LATE_BINDING)
-		FIND_HEADER_AND_LIB(LIBDCA_005 dca.h dca dca_init ${LIBDCA_REQUIRED_FLAGS})
+	IF (NOT LIBDCA_005_FOUND)
+		SET(LIBDCA_VERSION 002)
+		FIND_HEADER_AND_LIB(LIBDCA_002 dts.h dts dts_init ${LIBDCA_REQUIRED_FLAGS})
+	ENDIF (NOT LIBDCA_005_FOUND)
 
-		IF (NOT LIBDCA_005_FOUND)
-			SET(LIBDCA_VERSION 002)
-			FIND_HEADER_AND_LIB(LIBDCA_002 dts.h dts dts_init ${LIBDCA_REQUIRED_FLAGS})
-		ENDIF (NOT LIBDCA_005_FOUND)
-	ENDIF (USE_LATE_BINDING)
-
 	IF (LIBDCA_${LIBDCA_VERSION}_FOUND)
 		SET(LIBDCA_FOUND 1)
 		SET(USE_LIBDCA 1)



From gruntster at mail.berlios.de  Fri Mar 21 19:52:06 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Fri, 21 Mar 2008 19:52:06 +0100
Subject: [Avidemux-svn-commit] r3924 - in
	branches/avidemux_2.5_branch_gruntster: .
	avidemux/ADM_libraries/ADM_ffmpeg
	avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec
	avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat
	avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavutil
	avidemux/ADM_libraries/ADM_ffmpeg/ADM_libpostproc
	avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale cmake
Message-ID: <200803211852.m2LIq6fN014432@sheep.berlios.de>

Author: gruntster
Date: 2008-03-21 19:51:56 +0100 (Fri, 21 Mar 2008)
New Revision: 3924

Modified:
   branches/avidemux_2.5_branch_gruntster/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/movenc.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavutil/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libpostproc/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/config.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ffconf.c
   branches/avidemux_2.5_branch_gruntster/cmake/ADM_coreConfig.h.cmake
Log:
[ffmpeg] Win32 and Darwin fixes

Modified: branches/avidemux_2.5_branch_gruntster/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/CMakeLists.txt	2008-03-21 06:52:29 UTC (rev 3923)
+++ branches/avidemux_2.5_branch_gruntster/CMakeLists.txt	2008-03-21 18:51:56 UTC (rev 3924)
@@ -127,6 +127,7 @@
 
 CHECK_FUNCTION_EXISTS(gettimeofday HAVE_GETTIMEOFDAY)
 
+CHECK_INCLUDE_FILES(byteswap.h   HAVE_BYTESWAP_H)	# libavutil
 CHECK_INCLUDE_FILES(inttypes.h   HAVE_INTTYPES_H)	# internal use, mpeg2enc, mplex
 CHECK_INCLUDE_FILES(stdint.h     HAVE_STDINT_H)		# internal use, mpeg2enc, mplex
 CHECK_INCLUDE_FILES(sys/types.h  HAVE_SYS_TYPES_H)	# mad, mpeg2enc

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/CMakeLists.txt	2008-03-21 06:52:29 UTC (rev 3923)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/CMakeLists.txt	2008-03-21 18:51:56 UTC (rev 3924)
@@ -16,21 +16,16 @@
 	h263_parser.c  h264_parser.c  mpeg4video_parser.c  mpegvideo_enc.c  mpeg12enc.c
 	mpegaudioenc.c  ac3enc.c  ac3.c  ac3tab.c  mjpegenc.c  mjpegdec.c  wma.c  
 	dvbsub_parser.c  dvbsubdec.c  dvbsub.c  xiph.c  sp5xdec.c  nellymoserdec.c
-	ADM_lavcodec.cpp pthread.c
-	huffman.c wmv2dec.c wmv2.c h264pred.c
-	intrax8.c intrax8dsp.c dnxhddata.c faanidct.c ac3_parser.c
-	aac_ac3_parser.c aac_parser.c
-)
+	ADM_lavcodec.cpp  pthread.c  huffman.c  wmv2dec.c  wmv2.c  h264pred.c  intrax8.c
+	intrax8dsp.c  dnxhddata.c  faanidct.c  ac3_parser.c  aac_ac3_parser.c
+	aac_parser.c  mpegaudiodecheader.c)
 
 IF(ADM_CPU_X86)
 	SET(${ADM_LIB}_SRCS  ${${ADM_LIB}_SRCS}
 		i386/cputest.c  i386/mpegvideo_mmx.c  i386/vp3dsp_mmx.c  i386/dsputil_mmx.c
 		i386/fdct_mmx.c  i386/motion_est_mmx.c  i386/simple_idct_mmx.c  i386/fft_sse.c
 		i386/vp3dsp_sse2.c  i386/idct_mmx_xvid.c  i386/fft_3dn2.c  i386/snowdsp_mmx.c
-		i386/fft_3dn.c
-		i386/dsputilenc_mmx.c
-		i386/vc1dsp_mmx.c
-		)
+		i386/fft_3dn.c  i386/dsputilenc_mmx.c  i386/vc1dsp_mmx.c  i386/idct_mmx.c)
 ENDIF(ADM_CPU_X86)
 
 IF (ADM_CPU_ALTIVEC)
@@ -42,15 +37,14 @@
 ENDIF (ADM_CPU_ALTIVEC)
 
 ADD_LIBRARY(${ADM_LIB} SHARED ${${ADM_LIB}_SRCS})
-ADD_TARGET_CFLAGS(${ADM_LIB} "-I../ADM_lavutil -DHAVE_AV_CONFIG_H -Drestrict=__restrict__ -fomit-frame-pointer")
 
-IF (ADM_DEBUG)
-	ADD_TARGET_CFLAGS(${ADM_LIB} "-O2")
-ENDIF (ADM_DEBUG)
-IF (UNIX)
-	ADD_TARGET_CFLAGS(${ADM_LIB} -fPIC -DPIC)
-        ADD_TARGET_LDFLAGS(${ADM_LIB} "-rdynamic -export-dynamic -Wl,-Bsymbolic")
-ENDIF (UNIX)
+IF (WIN32 AND ADM_DEBUG)
+	ADD_SOURCE_CFLAGS(cabac.c -O2)
+	ADD_SOURCE_CFLAGS(h264.c -O2)
+	ADD_SOURCE_CFLAGS(h264_parser.c -O2)
+	ADD_SOURCE_CFLAGS(i386/dsputil_mmx.c -O2)
+	ADD_SOURCE_CFLAGS(i386/snowdsp_mmx.c -O2)
+ENDIF (WIN32 AND ADM_DEBUG)
 
 TARGET_LINK_LIBRARIES(${ADM_LIB} ADM_core ADM_libavutil ${ZLIB_LIBRARY})
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/CMakeLists.txt	2008-03-21 06:52:29 UTC (rev 3923)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/CMakeLists.txt	2008-03-21 18:51:56 UTC (rev 3924)
@@ -7,13 +7,6 @@
 	avc.c raw.c  riff.c)
 
 ADD_LIBRARY(${ADM_LIB} SHARED ${${ADM_LIB}_SRCS})
-ADD_TARGET_CFLAGS(${ADM_LIB} "-I../ADM_lavcodec -I../ADM_lavutil -DHAVE_AV_CONFIG_H")
-
-IF (UNIX)
-	ADD_TARGET_CFLAGS(${ADM_LIB} -fPIC -DPIC)
-        ADD_TARGET_LDFLAGS(${ADM_LIB} "-rdynamic -export-dynamic -Wl,-Bsymbolic")
-ENDIF (UNIX)
-
 TARGET_LINK_LIBRARIES(${ADM_LIB} ADM_core ADM_libavutil ADM_libavcodec)
 
 INSTALL(TARGETS ${ADM_LIB} RUNTIME DESTINATION ${BIN_DIR} LIBRARY DESTINATION lib)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/movenc.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/movenc.c	2008-03-21 06:52:29 UTC (rev 3923)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/movenc.c	2008-03-21 18:51:56 UTC (rev 3924)
@@ -40,7 +40,7 @@
 #define MODE_IPOD 5
 
 // MEANX
-extern int ADM_useAlternateTagging(void);
+//extern int ADM_useAlternateTagging(void);
 // MEANX
 
 
@@ -271,7 +271,7 @@
     // Object type indication
    //MEANX  put_byte(pb, codec_get_tag(ff_mp4_obj_type, track->enc->codec_id));
    codec_id=track->enc->codec_id;
-    if(ADM_useAlternateTagging() && codec_id==CODEC_ID_MP3) codec_id=CODEC_ID_MP2;
+    //if(ADM_useAlternateTagging() && codec_id==CODEC_ID_MP3) codec_id=CODEC_ID_MP2;
     put_byte(pb, codec_get_tag(ff_mp4_obj_type, codec_id));
     // /MEANX
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavutil/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavutil/CMakeLists.txt	2008-03-21 06:52:29 UTC (rev 3923)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavutil/CMakeLists.txt	2008-03-21 18:51:56 UTC (rev 3924)
@@ -22,13 +22,8 @@
 string.c
 tree.c
 )
+
 ADD_LIBRARY(${ADM_LIB} SHARED ${${ADM_LIB}_SRCS})
-ADD_TARGET_CFLAGS(${ADM_LIB} "-DHAVE_AV_CONFIG_H")
+TARGET_LINK_LIBRARIES(${ADM_LIB} ADM_core)
 
-IF (UNIX)
-	ADD_TARGET_CFLAGS(${ADM_LIB} -fPIC -DPIC)
-        ADD_TARGET_LDFLAGS(${ADM_LIB} "-rdynamic -export-dynamic -Wl,-Bsymbolic")
-ENDIF (UNIX)
-
-
 INSTALL(TARGETS ${ADM_LIB} RUNTIME DESTINATION ${BIN_DIR} LIBRARY DESTINATION lib)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libpostproc/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libpostproc/CMakeLists.txt	2008-03-21 06:52:29 UTC (rev 3923)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libpostproc/CMakeLists.txt	2008-03-21 18:51:56 UTC (rev 3924)
@@ -3,17 +3,11 @@
 SET(${ADM_LIB}_SRCS postprocess.c)
 
 ADD_LIBRARY(${ADM_LIB} SHARED ${${ADM_LIB}_SRCS})
-ADD_TARGET_CFLAGS(${ADM_LIB} "-I.. -DHAVE_AV_CONFIG_H  -O3 -I../.. -I../ADM_lavutil -Drestrict=__restrict__ -fomit-frame-pointer")
 
-IF(ADM_CPU_X86_64)
-	ADD_TARGET_CFLAGS(${ADM_LIB} "-msse")
-ENDIF(ADM_CPU_X86_64)
-IF (UNIX)
-	ADD_TARGET_CFLAGS(${ADM_LIB} -fPIC -DPIC)
-        ADD_TARGET_LDFLAGS(${ADM_LIB} "-rdynamic -export-dynamic -Wl,-Bsymbolic")
-ENDIF (UNIX)
+IF (WIN32 AND ADM_DEBUG)
+	ADD_TARGET_CFLAGS(${ADM_LIB} -O2)
+ENDIF (WIN32 AND ADM_DEBUG)
 
-
 TARGET_LINK_LIBRARIES(${ADM_LIB} ADM_core ADM_libavutil)
 
 INSTALL(TARGETS ${ADM_LIB} RUNTIME DESTINATION ${BIN_DIR} LIBRARY DESTINATION lib)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/CMakeLists.txt	2008-03-21 06:52:29 UTC (rev 3923)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/CMakeLists.txt	2008-03-21 18:51:56 UTC (rev 3924)
@@ -4,22 +4,13 @@
 IF (ADM_CPU_ALTIVEC)
 	SET(${ADM_LIB}_SRCS ${${ADM_LIB}_SRCS} yuv2rgb_altivec.c)
 ENDIF (ADM_CPU_ALTIVEC)
-	
+
 ADD_LIBRARY(${ADM_LIB} SHARED ${${ADM_LIB}_SRCS})
-ADD_TARGET_CFLAGS(${ADM_LIB} "-DCONFIG_GPL -fomit-frame-pointer")
 
-IF (APPLE)
-	ADD_TARGET_CFLAGS(${ADM_LIB} "-DPIC")
-	
-	IF (ADM_DEBUG)
-		ADD_TARGET_CFLAGS(${ADM_LIB} "-O2")
-	ENDIF (ADM_DEBUG)
-ENDIF (APPLE)
+IF (APPLE AND ADM_DEBUG)
+	ADD_SOURCE_CFLAGS(${ADM_LIB} -O2)
+ENDIF (APPLE AND ADM_DEBUG)
 
 TARGET_LINK_LIBRARIES(${ADM_LIB} ADM_core ADM_libavutil)
-IF (UNIX)
-	ADD_TARGET_CFLAGS(${ADM_LIB} -fPIC -DPIC )
-        ADD_TARGET_LDFLAGS(${ADM_LIB} "-rdynamic -export-dynamic -Wl,-Bsymbolic")
-ENDIF (UNIX)
 
 INSTALL(TARGETS ${ADM_LIB} RUNTIME DESTINATION ${BIN_DIR} LIBRARY DESTINATION lib)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/CMakeLists.txt	2008-03-21 06:52:29 UTC (rev 3923)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/CMakeLists.txt	2008-03-21 18:51:56 UTC (rev 3924)
@@ -1,33 +1,25 @@
-IF (ADM_CPU_X86_32)
-	ADD_DEFINITIONS("-DARCH_X86 -DARCH_X86_32")
-ELSEIF (ADM_CPU_X86_64)
-	ADD_DEFINITIONS("-DARCH_X86 -DARCH_X86_64")
-ELSEIF (ADM_CPU_PPC)
-	ADD_DEFINITIONS("-DARCH_POWERPC")
+INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR})
 
-	IF (ADM_CPU_ALTIVEC)
-		ADD_DEFINITIONS("-DHAVE_ALTIVEC")
+# Compiler flags
+ADD_DEFINITIONS(-DHAVE_AV_CONFIG_H -fomit-frame-pointer -fno-math-errno)
 
-		IF (NOT APPLE)
-			ADD_DEFINITIONS("-DHAVE_ALTIVEC_H")
-		ENDIF (NOT APPLE)
-	ENDIF (ADM_CPU_ALTIVEC)
+IF (ADM_CPU_X86_64 OR ADM_CPU_PPC)
+	ADD_DEFINITIONS(-fPIC -DPIC)
+ENDIF (ADM_CPU_X86_64 OR ADM_CPU_PPC)
 
-	IF (ADM_CPU_DCBZL)
-		ADD_DEFINITIONS("-DHAVE_DCBZL")
-	ENDIF (ADM_CPU_DCBZL)
-ENDIF (ADM_CPU_X86_32)
+# Linker flags
+IF (APPLE)
+	SET(CMAKE_SHARED_LINKER_FLAGS "${CMAKE_SHARED_LINKER_FLAGS} -Wl,-read_only_relocs,suppress")
+ENDIF (APPLE)
 
-IF (ADM_CPU_SSSE3)
-	ADD_DEFINITIONS("-DHAVE_SSSE3")
-ENDIF (ADM_CPU_SSSE3)
+IF (UNIX AND NOT APPLE)
+	SET(CMAKE_SHARED_LINKER_FLAGS "${CMAKE_SHARED_LINKER_FLAGS} -rdynamic -export-dynamic -Wl,-Bsymbolic")
+ENDIF (UNIX AND NOT APPLE)
 
-IF (ADM_BIG_ENDIAN)
-	ADD_DEFINITIONS("-DWORDS_BIGENDIAN")
-ENDIF (ADM_BIG_ENDIAN)
+IF (WIN32)
+	SET(CMAKE_SHARED_LINKER_FLAGS "${CMAKE_SHARED_LINKER_FLAGS} -Wl,--enable-runtime-pseudo-reloc -Wl,--enable-auto-image-base")
+ENDIF (WIN32)
 
-INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR})
-
 ADD_SUBDIRECTORY(ADM_lavcodec)
 ADD_SUBDIRECTORY(ADM_lavformat)
 ADD_SUBDIRECTORY(ADM_lavutil)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/config.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/config.h	2008-03-21 06:52:29 UTC (rev 3923)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/config.h	2008-03-21 18:51:56 UTC (rev 3924)
@@ -1,385 +1,408 @@
-#define ENABLE_NELLYMOSER_DECODER 1
-#define ENABLE_ADPCM_IMA_AMV_DECODER 1
-#define ENABLE_CINEPAK_DECODER 1
-#define ENABLE_DNXHD_DECODER 1
-#define ENABLE_FOURXM_DECODER 1
-#define ENABLE_FRAPS_DECODER 1
-#define ENABLE_H263_DECODER 1
-#define ENABLE_H264_DECODER 1
-#define ENABLE_INDEO2_DECODER 1
-#define ENABLE_INDEO3_DECODER 1
-#define ENABLE_INTERPLAY_VIDEO_DECODER 1
-#define ENABLE_MPEGVIDEO_DECODER 1
-#define ENABLE_MSVIDEO1_DECODER 1
-#define ENABLE_VC1_DECODER 1
-#define ENABLE_VCR1_DECODER 1
-#define ENABLE_VP5_DECODER 1
-#define ENABLE_VP6_DECODER 1
-#define ENABLE_VP6A_DECODER 1
-#define ENABLE_VP6F_DECODER 1
-#define ENABLE_WMV3_DECODER 1
-#define ENABLE_WMV1_DECODER 1
-#define ENABLE_WMV2_DECODER 1
-#define ENABLE_VP3_DECODER 1
-#define ENABLE_MPEG4_DECODER 1
-#define ENABLE_MSMPEG4V1_DECODER 1
-#define ENABLE_MSMPEG4V2_DECODER 1
-#define ENABLE_MSMPEG4V3_DECODER 1
-#define ENABLE_MJPEGB_DECODER 1
-#define ENABLE_MJPEG_DECODER 1
-#define ENABLE_WMAV2_DECODER 1
-#define ENABLE_DVVIDEO_DECODER 1
-#define ENABLE_HUFFYUV_DECODER 1
-#define ENABLE_FFVHUFF_DECODER 1
-#define ENABLE_SVQ3_DECODER 1
-#define ENABLE_TSCC_DECODER 1
-#define ENABLE_QDM2_DECODER 1
-#define ENABLE_FFV1_DECODER 1
-#define ENABLE_MPEG1VIDEO_DECODER 1
-#define ENABLE_MPEG2VIDEO_DECODER 1
-#define ENABLE_RV10_DECODER 1
-#define ENABLE_RV20_DECODER 1
-#define ENABLE_DVBSUB_DECODER 1
-#define ENABLE_FLV_DECODER 1
-#define ENABLE_SNOW_DECODER 1
-#define ENABLE_AMV_DECODER 1
-#define ENABLE_PCX_DECODER 0
-#define ENABLE_SUNRAST_DECODER 0
-#define ENABLE_VB_DECODER 0
-#define ENABLE_XSUB_DECODER 0
-#define ENABLE_AC3_DECODER 0
-#define ENABLE_APE_DECODER 0
-#define ENABLE_MPC8_DECODER 0
-#define ENABLE_PCM_S16LE_PLANAR_DECODER 0
-#define ENABLE_PCM_ZORK_DECODER 0
-#define ENABLE_ADPCM_EA_R1_DECODER 0
-#define ENABLE_ADPCM_EA_R2_DECODER 0
-#define ENABLE_ADPCM_EA_R3_DECODER 0
-#define ENABLE_ADPCM_EA_XAS_DECODER 0
-#define ENABLE_ADPCM_IMA_EA_EACS_DECODER 0
-#define ENABLE_ADPCM_IMA_EA_SEAD_DECODER 0
-#define ENABLE_AASC_DECODER 0
-#define ENABLE_AVS_DECODER 0
-#define ENABLE_BETHSOFTVID_DECODER 0
-#define ENABLE_C93_DECODER 0
-#define ENABLE_CAVS_DECODER 0
-#define ENABLE_CLJR_DECODER 0
-#define ENABLE_CSCD_DECODER 0
-#define ENABLE_CYUV_DECODER 0
-#define ENABLE_DSICINVIDEO_DECODER 0
-#define ENABLE_DXA_DECODER 0
-#define ENABLE_EIGHTBPS_DECODER 0
-#define ENABLE_FLIC_DECODER 0
-#define ENABLE_IDCIN_DECODER 0
-#define ENABLE_KMVC_DECODER 0
-#define ENABLE_LOCO_DECODER 0
-#define ENABLE_MDEC_DECODER 0
-#define ENABLE_MMVIDEO_DECODER 0
-#define ENABLE_MPEG_XVMC_DECODER 0
-#define ENABLE_MSRLE_DECODER 0
-#define ENABLE_MSZH_DECODER 0
-#define ENABLE_NUV_DECODER 0
-#define ENABLE_PTX_DECODER 0
-#define ENABLE_QDRAW_DECODER 0
-#define ENABLE_QPEG_DECODER 0
-#define ENABLE_RPZA_DECODER 0
-#define ENABLE_SMACKER_DECODER 0
-#define ENABLE_SMC_DECODER 0
-#define ENABLE_SP5X_DECODER 0
-#define ENABLE_THEORA_DECODER 0
-#define ENABLE_THP_DECODER 0
-#define ENABLE_TIERTEXSEQVIDEO_DECODER 0
-#define ENABLE_TRUEMOTION1_DECODER 0
-#define ENABLE_TRUEMOTION2_DECODER 0
-#define ENABLE_TXD_DECODER 0
-#define ENABLE_ULTI_DECODER 0
-#define ENABLE_VMDVIDEO_DECODER 0
-#define ENABLE_VMNC_DECODER 0
-#define ENABLE_VQA_DECODER 0
-#define ENABLE_WNV1_DECODER 0
-#define ENABLE_XAN_WC3_DECODER 0
-#define ENABLE_XL_DECODER 0
-#define ENABLE_MPEG4AAC_DECODER 0
-#define ENABLE_ALAC_DECODER 0
-#define ENABLE_ATRAC3_DECODER 0
-#define ENABLE_COOK_DECODER 0
-#define ENABLE_DCA_DECODER 0
-#define ENABLE_DSICINAUDIO_DECODER 0
-#define ENABLE_IMC_DECODER 0
-#define ENABLE_LIBA52_DECODER 0
-#define ENABLE_LIBFAAD_DECODER 0
-#define ENABLE_MACE3_DECODER 0
-#define ENABLE_MACE6_DECODER 0
-#define ENABLE_MP3_DECODER 0
-#define ENABLE_MP3ADU_DECODER 0
-#define ENABLE_MP3ON4_DECODER 0
-#define ENABLE_MPC7_DECODER 0
-#define ENABLE_RA_144_DECODER 0
-#define ENABLE_RA_288_DECODER 0
-#define ENABLE_SHORTEN_DECODER 0
-#define ENABLE_SMACKAUD_DECODER 0
-#define ENABLE_TRUESPEECH_DECODER 0
-#define ENABLE_TTA_DECODER 0
-#define ENABLE_VMDAUDIO_DECODER 0
-#define ENABLE_WAVPACK_DECODER 0
-#define ENABLE_WS_SND1_DECODER 0
-#define ENABLE_INTERPLAY_DPCM_DECODER 0
-#define ENABLE_SOL_DPCM_DECODER 0
-#define ENABLE_XAN_DPCM_DECODER 0
-#define ENABLE_ADPCM_THP_DECODER 0
-#define ENABLE_ASV1_DECODER 0
-#define ENABLE_ASV2_DECODER 0
-#define ENABLE_BMP_DECODER 0
-#define ENABLE_FLASHSV_DECODER 0
-#define ENABLE_GIF_DECODER 0
-#define ENABLE_H261_DECODER 0
-#define ENABLE_H263I_DECODER 0
-#define ENABLE_JPEGLS_DECODER 0
-#define ENABLE_PNG_DECODER 0
-#define ENABLE_QTRLE_DECODER 0
-#define ENABLE_RAWVIDEO_DECODER 0
-#define ENABLE_ROQ_DECODER 0
-#define ENABLE_SGI_DECODER 0
-#define ENABLE_SVQ1_DECODER 0
-#define ENABLE_TARGA_DECODER 0
-#define ENABLE_TIFF_DECODER 0
-#define ENABLE_ZLIB_DECODER 0
-#define ENABLE_ZMBV_DECODER 0
-#define ENABLE_FLAC_DECODER 0
-#define ENABLE_LIBAMR_NB_DECODER 0
-#define ENABLE_LIBAMR_WB_DECODER 0
-#define ENABLE_LIBGSM_DECODER 0
-#define ENABLE_LIBGSM_MS_DECODER 0
-#define ENABLE_MP2_DECODER 0
-#define ENABLE_SONIC_DECODER 0
-#define ENABLE_VORBIS_DECODER 0
-#define ENABLE_WMAV1_DECODER 0
-#define ENABLE_PCM_ALAW_DECODER 0
-#define ENABLE_PCM_MULAW_DECODER 0
-#define ENABLE_PCM_S8_DECODER 0
-#define ENABLE_PCM_S16BE_DECODER 0
-#define ENABLE_PCM_S16LE_DECODER 0
-#define ENABLE_PCM_S24BE_DECODER 0
-#define ENABLE_PCM_S24DAUD_DECODER 0
-#define ENABLE_PCM_S24LE_DECODER 0
-#define ENABLE_PCM_S32BE_DECODER 0
-#define ENABLE_PCM_S32LE_DECODER 0
-#define ENABLE_PCM_U8_DECODER 0
-#define ENABLE_PCM_U16BE_DECODER 0
-#define ENABLE_PCM_U16LE_DECODER 0
-#define ENABLE_PCM_U24BE_DECODER 0
-#define ENABLE_PCM_U24LE_DECODER 0
-#define ENABLE_PCM_U32BE_DECODER 0
-#define ENABLE_PCM_U32LE_DECODER 0
-#define ENABLE_ROQ_DPCM_DECODER 0
-#define ENABLE_ADPCM_4XM_DECODER 0
-#define ENABLE_ADPCM_ADX_DECODER 0
-#define ENABLE_ADPCM_CT_DECODER 0
-#define ENABLE_ADPCM_EA_DECODER 0
-#define ENABLE_ADPCM_G726_DECODER 0
-#define ENABLE_ADPCM_IMA_DK3_DECODER 0
-#define ENABLE_ADPCM_IMA_DK4_DECODER 0
-#define ENABLE_ADPCM_IMA_QT_DECODER 0
-#define ENABLE_ADPCM_IMA_SMJPEG_DECODER 0
-#define ENABLE_ADPCM_IMA_WAV_DECODER 0
-#define ENABLE_ADPCM_IMA_WS_DECODER 0
-#define ENABLE_ADPCM_MS_DECODER 0
-#define ENABLE_ADPCM_SBPRO_2_DECODER 0
-#define ENABLE_ADPCM_SBPRO_3_DECODER 0
-#define ENABLE_ADPCM_SBPRO_4_DECODER 0
-#define ENABLE_ADPCM_SWF_DECODER 0
-#define ENABLE_ADPCM_XA_DECODER 0
-#define ENABLE_ADPCM_YAMAHA_DECODER 0
-#define ENABLE_DVDSUB_DECODER 0
-#define ENABLE_LIBVORBIS_DECODER 0
-#define ENABLE_H263_PARSER 1
-#define ENABLE_H264_PARSER 1
-#define ENABLE_MPEG4VIDEO_PARSER 1
-#define ENABLE_AAC_PARSER 0
-#define ENABLE_AC3_PARSER 0
-#define ENABLE_CAVSVIDEO_PARSER 0
-#define ENABLE_DCA_PARSER 0
-#define ENABLE_DVBSUB_PARSER 0
-#define ENABLE_DVDSUB_PARSER 0
-#define ENABLE_H261_PARSER 0
-#define ENABLE_MJPEG_PARSER 0
-#define ENABLE_MPEGAUDIO_PARSER 0
-#define ENABLE_MPEGVIDEO_PARSER 0
-#define ENABLE_PNM_PARSER 0
-#define ENABLE_VC1_PARSER 0
-#define ENABLE_MJPEG_ENCODER 1
-#define ENABLE_MSMPEG4V3_ENCODER 1
-#define ENABLE_H263P_ENCODER 1
-#define ENABLE_AC3_ENCODER 1
-#define ENABLE_FFV1_ENCODER 1
-#define ENABLE_FLV1_ENCODER 1
-#define ENABLE_FFVHUFF_ENCODER 1
-#define ENABLE_H263_ENCODER 1
-#define ENABLE_MPEG1VIDEO_ENCODER 1
-#define ENABLE_MPEG2VIDEO_ENCODER 1
-#define ENABLE_MPEG4_ENCODER 1
-#define ENABLE_FLV_ENCODER 1
-#define ENABLE_MP2_ENCODER 1
-#define ENABLE_DVVIDEO_ENCODER 1
-#define ENABLE_HUFFYUV_ENCODER 1
-#define ENABLE_DVBSUB_ENCODER 1
-#define ENABLE_SNOW_ENCODER 1
-#define ENABLE_DNXHD_ENCODER 0
-#define ENABLE_PCM_ZORK_ENCODER 0
-#define ENABLE_ADPCM_IMA_AMV_ENCODER 0
-#define ENABLE_LIBX264_ENCODER 0
-#define ENABLE_LIBXVID_ENCODER 0
-#define ENABLE_LJPEG_ENCODER 0
-#define ENABLE_PAM_ENCODER 0
-#define ENABLE_PBM_ENCODER 0
-#define ENABLE_PGM_ENCODER 0
-#define ENABLE_PGMYUV_ENCODER 0
-#define ENABLE_PPM_ENCODER 0
-#define ENABLE_LIBFAAC_ENCODER 0
-#define ENABLE_LIBMP3LAME_ENCODER 0
-#define ENABLE_LIBTHEORA_ENCODER 0
-#define ENABLE_SONIC_LS_ENCODER 0
-#define ENABLE_ASV1_ENCODER 0
-#define ENABLE_ASV2_ENCODER 0
-#define ENABLE_BMP_ENCODER 0
-#define ENABLE_FLASHSV_ENCODER 0
-#define ENABLE_GIF_ENCODER 0
-#define ENABLE_H261_ENCODER 0
-#define ENABLE_JPEGLS_ENCODER 0
-#define ENABLE_MSMPEG4V1_ENCODER 0
-#define ENABLE_MSMPEG4V2_ENCODER 0
-#define ENABLE_PNG_ENCODER 0
-#define ENABLE_QTRLE_ENCODER 0
-#define ENABLE_RAWVIDEO_ENCODER 0
-#define ENABLE_ROQ_ENCODER 0
-#define ENABLE_RV10_ENCODER 0
-#define ENABLE_RV20_ENCODER 0
-#define ENABLE_SGI_ENCODER 0
-#define ENABLE_SVQ1_ENCODER 0
-#define ENABLE_TARGA_ENCODER 0
-#define ENABLE_TIFF_ENCODER 0
-#define ENABLE_WMV1_ENCODER 0
-#define ENABLE_WMV2_ENCODER 0
-#define ENABLE_ZLIB_ENCODER 0
-#define ENABLE_ZMBV_ENCODER 0
-#define ENABLE_FLAC_ENCODER 0
-#define ENABLE_LIBAMR_NB_ENCODER 0
-#define ENABLE_LIBAMR_WB_ENCODER 0
-#define ENABLE_LIBGSM_ENCODER 0
-#define ENABLE_LIBGSM_MS_ENCODER 0
-#define ENABLE_SONIC_ENCODER 0
-#define ENABLE_VORBIS_ENCODER 0
-#define ENABLE_WMAV1_ENCODER 0
-#define ENABLE_WMAV2_ENCODER 0
-#define ENABLE_PCM_ALAW_ENCODER 0
-#define ENABLE_PCM_MULAW_ENCODER 0
-#define ENABLE_PCM_S8_ENCODER 0
-#define ENABLE_PCM_S16BE_ENCODER 0
-#define ENABLE_PCM_S16LE_ENCODER 0
-#define ENABLE_PCM_S24BE_ENCODER 0
-#define ENABLE_PCM_S24DAUD_ENCODER 0
-#define ENABLE_PCM_S24LE_ENCODER 0
-#define ENABLE_PCM_S32BE_ENCODER 0
-#define ENABLE_PCM_S32LE_ENCODER 0
-#define ENABLE_PCM_U8_ENCODER 0
-#define ENABLE_PCM_U16BE_ENCODER 0
-#define ENABLE_PCM_U16LE_ENCODER 0
-#define ENABLE_PCM_U24BE_ENCODER 0
-#define ENABLE_PCM_U24LE_ENCODER 0
-#define ENABLE_PCM_U32BE_ENCODER 0
-#define ENABLE_PCM_U32LE_ENCODER 0
-#define ENABLE_ROQ_DPCM_ENCODER 0
-#define ENABLE_ADPCM_4XM_ENCODER 0
-#define ENABLE_ADPCM_ADX_ENCODER 0
-#define ENABLE_ADPCM_CT_ENCODER 0
-#define ENABLE_ADPCM_EA_ENCODER 0
-#define ENABLE_ADPCM_G726_ENCODER 0
-#define ENABLE_ADPCM_IMA_DK3_ENCODER 0
-#define ENABLE_ADPCM_IMA_DK4_ENCODER 0
-#define ENABLE_ADPCM_IMA_QT_ENCODER 0
-#define ENABLE_ADPCM_IMA_SMJPEG_ENCODER 0
-#define ENABLE_ADPCM_IMA_WAV_ENCODER 0
-#define ENABLE_ADPCM_IMA_WS_ENCODER 0
-#define ENABLE_ADPCM_MS_ENCODER 0
-#define ENABLE_ADPCM_SBPRO_2_ENCODER 0
-#define ENABLE_ADPCM_SBPRO_3_ENCODER 0
-#define ENABLE_ADPCM_SBPRO_4_ENCODER 0
-#define ENABLE_ADPCM_SWF_ENCODER 0
-#define ENABLE_ADPCM_XA_ENCODER 0
-#define ENABLE_ADPCM_YAMAHA_ENCODER 0
-#define ENABLE_DVDSUB_ENCODER 0
-#define ENABLE_LIBVORBIS_ENCODER 0
-#define ENABLE_MP3_HEADER_COMPRESS_BSF 0
-#define ENABLE_IMX_DUMP_HEADER_BSF 0
-#define ENABLE_DUMP_EXTRADATA_BSF 0
-#define ENABLE_REMOVE_EXTRADATA_BSF 0
-#define ENABLE_NOISE_BSF 0
-#define ENABLE_MP3_HEADER_DECOMPRESS_BSF 0
-#define ENABLE_MJPEGA_DUMP_HEADER_BSF 0
-#define ENABLE_H264_MP4TOANNEXB_BSF 0
-#define ENABLE_MOV2TEXTSUB_BSF 0
-#define ENABLE_TEXT2MOVSUB_BSF 0
-#define CONFIG_MUXERS 1
-#define CONFIG_MOV_MUXER 1
-#define CONFIG_MP4_MUXER 1
-#define CONFIG_PSP_MUXER 1
-#define CONFIG_TG2_MUXER 1
-#define CONFIG_TGP_MUXER 1
-#define CONFIG_ENCODERS 1
-#define CONFIG_DVVIDEO_ENCODER 1
-#define CONFIG_SNOW_ENCODER 1
-#define CONFIG_DECODERS 1
-#define CONFIG_DVVIDEO_DECODER 1
-#define CONFIG_H263_DECODER 1
-#define CONFIG_MPEG4_DECODER 1
-#define CONFIG_SNOW_DECODER 1
-#define CONFIG_VC1_DECODER 1
-#define CONFIG_WMV2_DECODER 1
-#define CONFIG_WMV3_DECODER 1
-#define CONFIG_MPEGAUDIO_HP 1
-#define CONFIG_ZLIB 1
-#define ENABLE_ARMV4L 0
-#define ENABLE_MLIB 0
-#define ENABLE_SPARC 0
-#define ENABLE_ALPHA 0
-#define ENABLE_MMI 0
-#define ENABLE_SH4 0
-#define ENABLE_BFIN 0
-#define ENABLE_SMALL 0
-#define ENABLE_MLP_PARSER 0
-#ifdef ARCH_POWERPC
-#define ENABLE_POWERPC 1
-#else
-#define ENABLE_POWERPC 0
-#endif
-#ifdef ARCH_X86
-#define ENABLE_MMX 1
-#define ENABLE_BSWAP 1
-#define HAVE_BYTESWAP_H 1
-#define HAVE_MMX 1
-#define HAVE_FAST_UNALIGNED 1
-#define ARCH_X86 1
-#else
-#define ENABLE_MMX 0
-#endif
-#ifdef ARCH_X86_64
-#define HAVE_FAST_64BIT 1
-#define HAVE_SSSE3 1
-#define HAVE_EBP_AVAILABLE 1
-#define HAVE_EBX_AVAILABLE 1
-#define ARCH_X86_64 1
-#endif
-#ifdef __APPLE__
-#define CONFIG_DARWIN 1
-#endif
-#define ENABLE_THREADS 1
-#define ENABLE_ENCODERS 1
-#define ENABLE_VIS 0
-#define ENABLE_GRAY 0
-#define HAVE_LRINTF 1
-#define HAVE_LLRINT 1
-#define HAVE_LRINT 1
-#define HAVE_ROUND 1
-#define HAVE_ROUNDF 1
-#define HAVE_THREADS 1
-#define RUNTIME_CPUDETECT 1
+#include "ADM_coreConfig.h"
+#define ENABLE_NELLYMOSER_DECODER 1
+#define ENABLE_ADPCM_IMA_AMV_DECODER 1
+#define ENABLE_CINEPAK_DECODER 1
+#define ENABLE_DNXHD_DECODER 1
+#define ENABLE_FOURXM_DECODER 1
+#define ENABLE_FRAPS_DECODER 1
+#define ENABLE_H263_DECODER 1
+#define ENABLE_H264_DECODER 1
+#define ENABLE_INDEO2_DECODER 1
+#define ENABLE_INDEO3_DECODER 1
+#define ENABLE_INTERPLAY_VIDEO_DECODER 1
+#define ENABLE_MPEGVIDEO_DECODER 1
+#define ENABLE_MSVIDEO1_DECODER 1
+#define ENABLE_VC1_DECODER 1
+#define ENABLE_VCR1_DECODER 1
+#define ENABLE_VP5_DECODER 1
+#define ENABLE_VP6_DECODER 1
+#define ENABLE_VP6A_DECODER 1
+#define ENABLE_VP6F_DECODER 1
+#define ENABLE_WMV3_DECODER 1
+#define ENABLE_WMV1_DECODER 1
+#define ENABLE_WMV2_DECODER 1
+#define ENABLE_VP3_DECODER 1
+#define ENABLE_MPEG4_DECODER 1
+#define ENABLE_MSMPEG4V1_DECODER 1
+#define ENABLE_MSMPEG4V2_DECODER 1
+#define ENABLE_MSMPEG4V3_DECODER 1
+#define ENABLE_MJPEGB_DECODER 1
+#define ENABLE_MJPEG_DECODER 1
+#define ENABLE_WMAV2_DECODER 1
+#define ENABLE_DVVIDEO_DECODER 1
+#define ENABLE_HUFFYUV_DECODER 1
+#define ENABLE_FFVHUFF_DECODER 1
+#define ENABLE_SVQ3_DECODER 1
+#define ENABLE_TSCC_DECODER 1
+#define ENABLE_QDM2_DECODER 1
+#define ENABLE_FFV1_DECODER 1
+#define ENABLE_MPEG1VIDEO_DECODER 1
+#define ENABLE_MPEG2VIDEO_DECODER 1
+#define ENABLE_RV10_DECODER 1
+#define ENABLE_RV20_DECODER 1
+#define ENABLE_DVBSUB_DECODER 1
+#define ENABLE_FLV_DECODER 1
+#define ENABLE_SNOW_DECODER 1
+#define ENABLE_AMV_DECODER 1
+#define ENABLE_PCX_DECODER 0
+#define ENABLE_SUNRAST_DECODER 0
+#define ENABLE_VB_DECODER 0
+#define ENABLE_XSUB_DECODER 0
+#define ENABLE_AC3_DECODER 0
+#define ENABLE_APE_DECODER 0
+#define ENABLE_MPC8_DECODER 0
+#define ENABLE_PCM_S16LE_PLANAR_DECODER 0
+#define ENABLE_PCM_ZORK_DECODER 0
+#define ENABLE_ADPCM_EA_R1_DECODER 0
+#define ENABLE_ADPCM_EA_R2_DECODER 0
+#define ENABLE_ADPCM_EA_R3_DECODER 0
+#define ENABLE_ADPCM_EA_XAS_DECODER 0
+#define ENABLE_ADPCM_IMA_EA_EACS_DECODER 0
+#define ENABLE_ADPCM_IMA_EA_SEAD_DECODER 0
+#define ENABLE_AASC_DECODER 0
+#define ENABLE_AVS_DECODER 0
+#define ENABLE_BETHSOFTVID_DECODER 0
+#define ENABLE_C93_DECODER 0
+#define ENABLE_CAVS_DECODER 0
+#define ENABLE_CLJR_DECODER 0
+#define ENABLE_CSCD_DECODER 0
+#define ENABLE_CYUV_DECODER 0
+#define ENABLE_DSICINVIDEO_DECODER 0
+#define ENABLE_DXA_DECODER 0
+#define ENABLE_EIGHTBPS_DECODER 0
+#define ENABLE_FLIC_DECODER 0
+#define ENABLE_IDCIN_DECODER 0
+#define ENABLE_KMVC_DECODER 0
+#define ENABLE_LOCO_DECODER 0
+#define ENABLE_MDEC_DECODER 0
+#define ENABLE_MMVIDEO_DECODER 0
+#define ENABLE_MPEG_XVMC_DECODER 0
+#define ENABLE_MSRLE_DECODER 0
+#define ENABLE_MSZH_DECODER 0
+#define ENABLE_NUV_DECODER 0
+#define ENABLE_PTX_DECODER 0
+#define ENABLE_QDRAW_DECODER 0
+#define ENABLE_QPEG_DECODER 0
+#define ENABLE_RPZA_DECODER 0
+#define ENABLE_SMACKER_DECODER 0
+#define ENABLE_SMC_DECODER 0
+#define ENABLE_SP5X_DECODER 0
+#define ENABLE_THEORA_DECODER 0
+#define ENABLE_THP_DECODER 0
+#define ENABLE_TIERTEXSEQVIDEO_DECODER 0
+#define ENABLE_TRUEMOTION1_DECODER 0
+#define ENABLE_TRUEMOTION2_DECODER 0
+#define ENABLE_TXD_DECODER 0
+#define ENABLE_ULTI_DECODER 0
+#define ENABLE_VMDVIDEO_DECODER 0
+#define ENABLE_VMNC_DECODER 0
+#define ENABLE_VQA_DECODER 0
+#define ENABLE_WNV1_DECODER 0
+#define ENABLE_XAN_WC3_DECODER 0
+#define ENABLE_XL_DECODER 0
+#define ENABLE_MPEG4AAC_DECODER 0
+#define ENABLE_ALAC_DECODER 0
+#define ENABLE_ATRAC3_DECODER 0
+#define ENABLE_COOK_DECODER 0
+#define ENABLE_DCA_DECODER 0
+#define ENABLE_DSICINAUDIO_DECODER 0
+#define ENABLE_IMC_DECODER 0
+#define ENABLE_LIBA52_DECODER 0
+#define ENABLE_LIBFAAD_DECODER 0
+#define ENABLE_MACE3_DECODER 0
+#define ENABLE_MACE6_DECODER 0
+#define ENABLE_MP3_DECODER 0
+#define ENABLE_MP3ADU_DECODER 0
+#define ENABLE_MP3ON4_DECODER 0
+#define ENABLE_MPC7_DECODER 0
+#define ENABLE_RA_144_DECODER 0
+#define ENABLE_RA_288_DECODER 0
+#define ENABLE_SHORTEN_DECODER 0
+#define ENABLE_SMACKAUD_DECODER 0
+#define ENABLE_TRUESPEECH_DECODER 0
+#define ENABLE_TTA_DECODER 0
+#define ENABLE_VMDAUDIO_DECODER 0
+#define ENABLE_WAVPACK_DECODER 0
+#define ENABLE_WS_SND1_DECODER 0
+#define ENABLE_INTERPLAY_DPCM_DECODER 0
+#define ENABLE_SOL_DPCM_DECODER 0
+#define ENABLE_XAN_DPCM_DECODER 0
+#define ENABLE_ADPCM_THP_DECODER 0
+#define ENABLE_ASV1_DECODER 0
+#define ENABLE_ASV2_DECODER 0
+#define ENABLE_BMP_DECODER 0
+#define ENABLE_FLASHSV_DECODER 0
+#define ENABLE_GIF_DECODER 0
+#define ENABLE_H261_DECODER 0
+#define ENABLE_H263I_DECODER 0
+#define ENABLE_JPEGLS_DECODER 0
+#define ENABLE_PNG_DECODER 0
+#define ENABLE_QTRLE_DECODER 0
+#define ENABLE_RAWVIDEO_DECODER 0
+#define ENABLE_ROQ_DECODER 0
+#define ENABLE_SGI_DECODER 0
+#define ENABLE_SVQ1_DECODER 0
+#define ENABLE_TARGA_DECODER 0
+#define ENABLE_TIFF_DECODER 0
+#define ENABLE_ZLIB_DECODER 0
+#define ENABLE_ZMBV_DECODER 0
+#define ENABLE_FLAC_DECODER 0
+#define ENABLE_LIBAMR_NB_DECODER 0
+#define ENABLE_LIBAMR_WB_DECODER 0
+#define ENABLE_LIBGSM_DECODER 0
+#define ENABLE_LIBGSM_MS_DECODER 0
+#define ENABLE_MP2_DECODER 0
+#define ENABLE_SONIC_DECODER 0
+#define ENABLE_VORBIS_DECODER 0
+#define ENABLE_WMAV1_DECODER 0
+#define ENABLE_PCM_ALAW_DECODER 0
+#define ENABLE_PCM_MULAW_DECODER 0
+#define ENABLE_PCM_S8_DECODER 0
+#define ENABLE_PCM_S16BE_DECODER 0
+#define ENABLE_PCM_S16LE_DECODER 0
+#define ENABLE_PCM_S24BE_DECODER 0
+#define ENABLE_PCM_S24DAUD_DECODER 0
+#define ENABLE_PCM_S24LE_DECODER 0
+#define ENABLE_PCM_S32BE_DECODER 0
+#define ENABLE_PCM_S32LE_DECODER 0
+#define ENABLE_PCM_U8_DECODER 0
+#define ENABLE_PCM_U16BE_DECODER 0
+#define ENABLE_PCM_U16LE_DECODER 0
+#define ENABLE_PCM_U24BE_DECODER 0
+#define ENABLE_PCM_U24LE_DECODER 0
+#define ENABLE_PCM_U32BE_DECODER 0
+#define ENABLE_PCM_U32LE_DECODER 0
+#define ENABLE_ROQ_DPCM_DECODER 0
+#define ENABLE_ADPCM_4XM_DECODER 0
+#define ENABLE_ADPCM_ADX_DECODER 0
+#define ENABLE_ADPCM_CT_DECODER 0
+#define ENABLE_ADPCM_EA_DECODER 0
+#define ENABLE_ADPCM_G726_DECODER 0
+#define ENABLE_ADPCM_IMA_DK3_DECODER 0
+#define ENABLE_ADPCM_IMA_DK4_DECODER 0
+#define ENABLE_ADPCM_IMA_QT_DECODER 0
+#define ENABLE_ADPCM_IMA_SMJPEG_DECODER 0
+#define ENABLE_ADPCM_IMA_WAV_DECODER 0
+#define ENABLE_ADPCM_IMA_WS_DECODER 0
+#define ENABLE_ADPCM_MS_DECODER 0
+#define ENABLE_ADPCM_SBPRO_2_DECODER 0
+#define ENABLE_ADPCM_SBPRO_3_DECODER 0
+#define ENABLE_ADPCM_SBPRO_4_DECODER 0
+#define ENABLE_ADPCM_SWF_DECODER 0
+#define ENABLE_ADPCM_XA_DECODER 0
+#define ENABLE_ADPCM_YAMAHA_DECODER 0
+#define ENABLE_DVDSUB_DECODER 0
+#define ENABLE_LIBVORBIS_DECODER 0
+#define ENABLE_H263_PARSER 1
+#define ENABLE_H264_PARSER 1
+#define ENABLE_MPEG4VIDEO_PARSER 1
+#define ENABLE_AAC_PARSER 0
+#define ENABLE_AC3_PARSER 0
+#define ENABLE_CAVSVIDEO_PARSER 0
+#define ENABLE_DCA_PARSER 0
+#define ENABLE_DVBSUB_PARSER 0
+#define ENABLE_DVDSUB_PARSER 0
+#define ENABLE_H261_PARSER 0
+#define ENABLE_MJPEG_PARSER 0
+#define ENABLE_MPEGAUDIO_PARSER 0
+#define ENABLE_MPEGVIDEO_PARSER 0
+#define ENABLE_PNM_PARSER 0
+#define ENABLE_VC1_PARSER 0
+#define ENABLE_MJPEG_ENCODER 1
+#define ENABLE_MSMPEG4V3_ENCODER 1
+#define ENABLE_H263P_ENCODER 1
+#define ENABLE_AC3_ENCODER 1
+#define ENABLE_FFV1_ENCODER 1
+#define ENABLE_FLV1_ENCODER 1
+#define ENABLE_FFVHUFF_ENCODER 1
+#define ENABLE_H263_ENCODER 1
+#define ENABLE_MPEG1VIDEO_ENCODER 1
+#define ENABLE_MPEG2VIDEO_ENCODER 1
+#define ENABLE_MPEG4_ENCODER 1
+#define ENABLE_FLV_ENCODER 1
+#define ENABLE_MP2_ENCODER 1
+#define ENABLE_DVVIDEO_ENCODER 1
+#define ENABLE_HUFFYUV_ENCODER 1
+#define ENABLE_DVBSUB_ENCODER 1
+#define ENABLE_SNOW_ENCODER 1
+#define ENABLE_DNXHD_ENCODER 0
+#define ENABLE_PCM_ZORK_ENCODER 0
+#define ENABLE_ADPCM_IMA_AMV_ENCODER 0
+#define ENABLE_LIBX264_ENCODER 0
+#define ENABLE_LIBXVID_ENCODER 0
+#define ENABLE_LJPEG_ENCODER 0
+#define ENABLE_PAM_ENCODER 0
+#define ENABLE_PBM_ENCODER 0
+#define ENABLE_PGM_ENCODER 0
+#define ENABLE_PGMYUV_ENCODER 0
+#define ENABLE_PPM_ENCODER 0
+#define ENABLE_LIBFAAC_ENCODER 0
+#define ENABLE_LIBMP3LAME_ENCODER 0
+#define ENABLE_LIBTHEORA_ENCODER 0
+#define ENABLE_SONIC_LS_ENCODER 0
+#define ENABLE_ASV1_ENCODER 0
+#define ENABLE_ASV2_ENCODER 0
+#define ENABLE_BMP_ENCODER 0
+#define ENABLE_FLASHSV_ENCODER 0
+#define ENABLE_GIF_ENCODER 0
+#define ENABLE_H261_ENCODER 0
+#define ENABLE_JPEGLS_ENCODER 0
+#define ENABLE_MSMPEG4V1_ENCODER 0
+#define ENABLE_MSMPEG4V2_ENCODER 0
+#define ENABLE_PNG_ENCODER 0
+#define ENABLE_QTRLE_ENCODER 0
+#define ENABLE_RAWVIDEO_ENCODER 0
+#define ENABLE_ROQ_ENCODER 0
+#define ENABLE_RV10_ENCODER 0
+#define ENABLE_RV20_ENCODER 0
+#define ENABLE_SGI_ENCODER 0
+#define ENABLE_SVQ1_ENCODER 0
+#define ENABLE_TARGA_ENCODER 0
+#define ENABLE_TIFF_ENCODER 0
+#define ENABLE_WMV1_ENCODER 0
+#define ENABLE_WMV2_ENCODER 0
+#define ENABLE_ZLIB_ENCODER 0
+#define ENABLE_ZMBV_ENCODER 0
+#define ENABLE_FLAC_ENCODER 0
+#define ENABLE_LIBAMR_NB_ENCODER 0
+#define ENABLE_LIBAMR_WB_ENCODER 0
+#define ENABLE_LIBGSM_ENCODER 0
+#define ENABLE_LIBGSM_MS_ENCODER 0
+#define ENABLE_SONIC_ENCODER 0
+#define ENABLE_VORBIS_ENCODER 0
+#define ENABLE_WMAV1_ENCODER 0
+#define ENABLE_WMAV2_ENCODER 0
+#define ENABLE_PCM_ALAW_ENCODER 0
+#define ENABLE_PCM_MULAW_ENCODER 0
+#define ENABLE_PCM_S8_ENCODER 0
+#define ENABLE_PCM_S16BE_ENCODER 0
+#define ENABLE_PCM_S16LE_ENCODER 0
+#define ENABLE_PCM_S24BE_ENCODER 0
+#define ENABLE_PCM_S24DAUD_ENCODER 0
+#define ENABLE_PCM_S24LE_ENCODER 0
+#define ENABLE_PCM_S32BE_ENCODER 0
+#define ENABLE_PCM_S32LE_ENCODER 0
+#define ENABLE_PCM_U8_ENCODER 0
+#define ENABLE_PCM_U16BE_ENCODER 0
+#define ENABLE_PCM_U16LE_ENCODER 0
+#define ENABLE_PCM_U24BE_ENCODER 0
+#define ENABLE_PCM_U24LE_ENCODER 0
+#define ENABLE_PCM_U32BE_ENCODER 0
+#define ENABLE_PCM_U32LE_ENCODER 0
+#define ENABLE_ROQ_DPCM_ENCODER 0
+#define ENABLE_ADPCM_4XM_ENCODER 0
+#define ENABLE_ADPCM_ADX_ENCODER 0
+#define ENABLE_ADPCM_CT_ENCODER 0
+#define ENABLE_ADPCM_EA_ENCODER 0
+#define ENABLE_ADPCM_G726_ENCODER 0
+#define ENABLE_ADPCM_IMA_DK3_ENCODER 0
+#define ENABLE_ADPCM_IMA_DK4_ENCODER 0
+#define ENABLE_ADPCM_IMA_QT_ENCODER 0
+#define ENABLE_ADPCM_IMA_SMJPEG_ENCODER 0
+#define ENABLE_ADPCM_IMA_WAV_ENCODER 0
+#define ENABLE_ADPCM_IMA_WS_ENCODER 0
+#define ENABLE_ADPCM_MS_ENCODER 0
+#define ENABLE_ADPCM_SBPRO_2_ENCODER 0
+#define ENABLE_ADPCM_SBPRO_3_ENCODER 0
+#define ENABLE_ADPCM_SBPRO_4_ENCODER 0
+#define ENABLE_ADPCM_SWF_ENCODER 0
+#define ENABLE_ADPCM_XA_ENCODER 0
+#define ENABLE_ADPCM_YAMAHA_ENCODER 0
+#define ENABLE_DVDSUB_ENCODER 0
+#define ENABLE_LIBVORBIS_ENCODER 0
+#define ENABLE_MP3_HEADER_COMPRESS_BSF 0
+#define ENABLE_IMX_DUMP_HEADER_BSF 0
+#define ENABLE_DUMP_EXTRADATA_BSF 0
+#define ENABLE_REMOVE_EXTRADATA_BSF 0
+#define ENABLE_NOISE_BSF 0
+#define ENABLE_MP3_HEADER_DECOMPRESS_BSF 0
+#define ENABLE_MJPEGA_DUMP_HEADER_BSF 0
+#define ENABLE_H264_MP4TOANNEXB_BSF 0
+#define ENABLE_MOV2TEXTSUB_BSF 0
+#define ENABLE_TEXT2MOVSUB_BSF 0
+#define CONFIG_MUXERS 1
+#define CONFIG_MOV_MUXER 1
+#define CONFIG_MP4_MUXER 1
+#define CONFIG_PSP_MUXER 1
+#define CONFIG_TG2_MUXER 1
+#define CONFIG_TGP_MUXER 1
+#define CONFIG_ENCODERS 1
+#define CONFIG_DVVIDEO_ENCODER 1
+#define CONFIG_SNOW_ENCODER 1
+#define CONFIG_DECODERS 1
+#define CONFIG_DVVIDEO_DECODER 1
+#define CONFIG_H263_DECODER 1
+#define CONFIG_MPEG4_DECODER 1
+#define CONFIG_SNOW_DECODER 1
+#define CONFIG_VC1_DECODER 1
+#define CONFIG_WMV2_DECODER 1
+#define CONFIG_WMV3_DECODER 1
+#define CONFIG_MPEGAUDIO_HP 1
+#define CONFIG_ZLIB 1
+#define CONFIG_GPL 1
+#define ENABLE_ARMV4L 0
+#define ENABLE_MLIB 0
+#define ENABLE_SPARC 0
+#define ENABLE_ALPHA 0
+#define ENABLE_MMI 0
+#define ENABLE_SH4 0
+#define ENABLE_BFIN 0
+#define ENABLE_SMALL 0
+#define ENABLE_MLP_PARSER 0
+#ifdef __APPLE__
+#	define CONFIG_DARWIN 1
+#endif
+#if defined(ADM_CPU_X86_32)
+#	define ARCH_X86 1
+#	define ARCH_X86_32 1
+#elif defined(ADM_CPU_X86_64)
+#	define ARCH_X86 1
+#	define ARCH_X86_64 1
+#elif defined(ADM_CPU_PPC)
+#	define ARCH_POWERPC 1
+#ifdef ADM_CPU_ALTIVEC
+#	define HAVE_ALTIVEC 1
+#ifndef __APPLE__
+#	define HAVE_ALTIVEC_H 1
+#endif	// __APPLE__
+#endif	// ADM_CPU_ALTIVEC
+#ifdef ADM_CPU_DCBZL
+#	define HAVE_DCBZL 1
+#endif	// ADM_CPU_DCBZL
+#endif	// ADM_CPU_X86_32
+#ifdef ADM_CPU_SSSE3
+#	define HAVE_SSSE3 1
+#endif
+#ifdef ARCH_POWERPC
+#	define ENABLE_POWERPC 1
+#else
+#	define ENABLE_POWERPC 0
+#endif
+#ifdef ARCH_X86
+#	define ENABLE_MMX 1
+#	define ENABLE_BSWAP 1
+#	define HAVE_MMX 1
+#	define HAVE_FAST_UNALIGNED 1
+#	define HAVE_EBP_AVAILABLE 1
+#	define HAVE_EBX_AVAILABLE 1
+#else
+#	define ENABLE_MMX 0
+#endif
+#ifdef ARCH_X86_64
+#	define HAVE_FAST_64BIT 1
+#endif
+#ifdef ADM_BIG_ENDIAN
+#	define WORDS_BIGENDIAN 1
+#endif
+#define ENABLE_THREADS 1
+#define ENABLE_ENCODERS 1
+#define ENABLE_VIS 0
+#define ENABLE_GRAY 0
+#define HAVE_LRINTF 1
+#define HAVE_LLRINT 1
+#define HAVE_LRINT 1
+#define HAVE_ROUND 1
+#define HAVE_ROUNDF 1
+#define HAVE_THREADS 1
+#define RUNTIME_CPUDETECT 1
+#define restrict __restrict__

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ffconf.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ffconf.c	2008-03-21 06:52:29 UTC (rev 3923)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ffconf.c	2008-03-21 18:51:56 UTC (rev 3924)
@@ -6,6 +6,8 @@
 #include <stdio.h>
 int main(void)
 {
+	printf("#include \"ADM_coreConfig.h\"\n");
+
 #define DECLARE_DECODER(a,b); printf("#define ENABLE_"#a"_DECODER 1\n"); 
   
     DECLARE_DECODER(NELLYMOSER,nellymoser);
@@ -375,6 +377,7 @@
 
 	printf("#define CONFIG_MPEGAUDIO_HP 1\n");
 	printf("#define CONFIG_ZLIB 1\n");
+	printf("#define CONFIG_GPL 1\n");
 
 #define ENABLE(a,b); printf("#define ENABLE_"#a" 0\n");
 
@@ -389,35 +392,56 @@
 #define DECLARE_ENABLE_PARSER(a,b); printf("#define ENABLE_"#a"_PARSER 0\n");
 	DECLARE_ENABLE_PARSER(MLP, wmv3);
 
-	// Hack so CMake and autoconf don't need to be changed
+	printf("#ifdef __APPLE__\n");
+	printf("#	define CONFIG_DARWIN 1\n");
+	printf("#endif\n");
+
+	printf("#if defined(ADM_CPU_X86_32)\n");
+	printf("#	define ARCH_X86 1\n");
+	printf("#	define ARCH_X86_32 1\n");
+	printf("#elif defined(ADM_CPU_X86_64)\n");
+	printf("#	define ARCH_X86 1\n");
+	printf("#	define ARCH_X86_64 1\n");
+	printf("#elif defined(ADM_CPU_PPC)\n");
+	printf("#	define ARCH_POWERPC 1\n");
+	printf("#ifdef ADM_CPU_ALTIVEC\n");
+	printf("#	define HAVE_ALTIVEC 1\n");
+	printf("#ifndef __APPLE__\n");
+	printf("#	define HAVE_ALTIVEC_H 1\n");
+	printf("#endif	// __APPLE__\n");
+	printf("#endif	// ADM_CPU_ALTIVEC\n");
+	printf("#ifdef ADM_CPU_DCBZL\n");
+	printf("#	define HAVE_DCBZL 1\n");
+	printf("#endif	// ADM_CPU_DCBZL\n");
+	printf("#endif	// ADM_CPU_X86_32\n");
+
+	printf("#ifdef ADM_CPU_SSSE3\n");
+	printf("#	define HAVE_SSSE3 1\n");
+	printf("#endif\n");
+
 	printf("#ifdef ARCH_POWERPC\n");
-	printf("#define ENABLE_POWERPC 1\n");
+	printf("#	define ENABLE_POWERPC 1\n");
 	printf("#else\n");
-	printf("#define ENABLE_POWERPC 0\n");
+	printf("#	define ENABLE_POWERPC 0\n");
 	printf("#endif\n");
 
 	printf("#ifdef ARCH_X86\n");
-	printf("#define ENABLE_MMX 1\n");
-	printf("#define ENABLE_BSWAP 1\n");
-	printf("#define HAVE_BYTESWAP_H 1\n");
-	printf("#define HAVE_MMX 1\n");
-	printf("#define HAVE_FAST_UNALIGNED 1\n");
-	printf("#define ARCH_X86 1\n");
+	printf("#	define ENABLE_MMX 1\n");
+	printf("#	define ENABLE_BSWAP 1\n");
+	printf("#	define HAVE_MMX 1\n");
+	printf("#	define HAVE_FAST_UNALIGNED 1\n");
+	printf("#	define HAVE_EBP_AVAILABLE 1\n");
+	printf("#	define HAVE_EBX_AVAILABLE 1\n");
 	printf("#else\n");
-	printf("#define ENABLE_MMX 0\n");
-
+	printf("#	define ENABLE_MMX 0\n");
 	printf("#endif\n");
 
 	printf("#ifdef ARCH_X86_64\n");
-	printf("#define HAVE_FAST_64BIT 1\n");
-	printf("#define HAVE_SSSE3 1\n");
-	printf("#define HAVE_EBP_AVAILABLE 1\n");
-	printf("#define HAVE_EBX_AVAILABLE 1\n");
-	printf("#define ARCH_X86_64 1\n");
+	printf("#	define HAVE_FAST_64BIT 1\n");
 	printf("#endif\n");
 
-	printf("#ifdef __APPLE__\n");
-	printf("#define CONFIG_DARWIN 1\n");
+	printf("#ifdef ADM_BIG_ENDIAN\n");
+	printf("#	define WORDS_BIGENDIAN 1\n");
 	printf("#endif\n");
 
 	printf("#define ENABLE_THREADS 1\n");
@@ -431,4 +455,5 @@
 	printf("#define HAVE_ROUNDF 1\n");
 	printf("#define HAVE_THREADS 1\n");
 	printf("#define RUNTIME_CPUDETECT 1\n");
+	printf("#define restrict __restrict__\n");
 }

Modified: branches/avidemux_2.5_branch_gruntster/cmake/ADM_coreConfig.h.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/ADM_coreConfig.h.cmake	2008-03-21 06:52:29 UTC (rev 3923)
+++ branches/avidemux_2.5_branch_gruntster/cmake/ADM_coreConfig.h.cmake	2008-03-21 18:51:56 UTC (rev 3924)
@@ -21,6 +21,7 @@
 #cmakedefine HAVE_GETTIMEOFDAY
 
 // Presence of header files
+#cmakedefine HAVE_BYTESWAP_H
 #cmakedefine HAVE_INTTYPES_H
 #cmakedefine HAVE_MALLOC_H
 #cmakedefine HAVE_STDINT_H



From gruntster at mail.berlios.de  Fri Mar 21 20:31:46 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Fri, 21 Mar 2008 20:31:46 +0100
Subject: [Avidemux-svn-commit] r3925 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg
Message-ID: <200803211931.m2LJVkmm018150@sheep.berlios.de>

Author: gruntster
Date: 2008-03-21 20:31:45 +0100 (Fri, 21 Mar 2008)
New Revision: 3925

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/CMakeLists.txt
Log:
[ffmpeg] Linux 32-bit fix

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/CMakeLists.txt	2008-03-21 18:51:56 UTC (rev 3924)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/CMakeLists.txt	2008-03-21 19:31:45 UTC (rev 3925)
@@ -3,6 +3,11 @@
 # Compiler flags
 ADD_DEFINITIONS(-DHAVE_AV_CONFIG_H -fomit-frame-pointer -fno-math-errno)
 
+IF (UNIX)
+	# CMake automatically adds -fPIC so remove it
+	STRING(REPLACE "-fPIC" "" CMAKE_SHARED_LIBRARY_C_FLAGS ${CMAKE_SHARED_LIBRARY_C_FLAGS})
+ENDIF (UNIX)
+
 IF (ADM_CPU_X86_64 OR ADM_CPU_PPC)
 	ADD_DEFINITIONS(-fPIC -DPIC)
 ENDIF (ADM_CPU_X86_64 OR ADM_CPU_PPC)
@@ -13,7 +18,7 @@
 ENDIF (APPLE)
 
 IF (UNIX AND NOT APPLE)
-	SET(CMAKE_SHARED_LINKER_FLAGS "${CMAKE_SHARED_LINKER_FLAGS} -rdynamic -export-dynamic -Wl,-Bsymbolic")
+	SET(CMAKE_SHARED_LINKER_FLAGS "${CMAKE_SHARED_LINKER_FLAGS} -export-dynamic -Wl,-Bsymbolic")
 ENDIF (UNIX AND NOT APPLE)
 
 IF (WIN32)



From gruntster at mail.berlios.de  Fri Mar 21 21:47:35 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Fri, 21 Mar 2008 21:47:35 +0100
Subject: [Avidemux-svn-commit] r3926 - in
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg:
	. ADM_lavcodec ADM_libpostproc
Message-ID: <200803212047.m2LKlZMR029113@sheep.berlios.de>

Author: gruntster
Date: 2008-03-21 21:47:32 +0100 (Fri, 21 Mar 2008)
New Revision: 3926

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libpostproc/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/CMakeLists.txt
Log:
[ffmpeg] Darwin and debug fixes

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/CMakeLists.txt	2008-03-21 19:31:45 UTC (rev 3925)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/CMakeLists.txt	2008-03-21 20:47:32 UTC (rev 3926)
@@ -33,18 +33,18 @@
 		ppc/dsputil_altivec.c  ppc/dsputil_ppc.c  ppc/fdct_altivec.c  ppc/fft_altivec.c
 		ppc/float_altivec.c  ppc/gmc_altivec.c  ppc/h264_altivec.c  ppc/idct_altivec.c
 		ppc/int_altivec.c  ppc/mpegvideo_altivec.c  ppc/mpegvideo_ppc.c
-		ppc/snow_altivec.c  ppc/vc1dsp_altivec.c)
+		ppc/snow_altivec.c  ppc/vc1dsp_altivec.c  ppc/check_altivec.c)
 ENDIF (ADM_CPU_ALTIVEC)
 
 ADD_LIBRARY(${ADM_LIB} SHARED ${${ADM_LIB}_SRCS})
 
-IF (WIN32 AND ADM_DEBUG)
+IF (ADM_DEBUG AND ADM_CPU_X86_32)
 	ADD_SOURCE_CFLAGS(cabac.c -O2)
 	ADD_SOURCE_CFLAGS(h264.c -O2)
 	ADD_SOURCE_CFLAGS(h264_parser.c -O2)
 	ADD_SOURCE_CFLAGS(i386/dsputil_mmx.c -O2)
 	ADD_SOURCE_CFLAGS(i386/snowdsp_mmx.c -O2)
-ENDIF (WIN32 AND ADM_DEBUG)
+ENDIF (ADM_DEBUG AND ADM_CPU_X86_32)
 
 TARGET_LINK_LIBRARIES(${ADM_LIB} ADM_core ADM_libavutil ${ZLIB_LIBRARY})
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libpostproc/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libpostproc/CMakeLists.txt	2008-03-21 19:31:45 UTC (rev 3925)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libpostproc/CMakeLists.txt	2008-03-21 20:47:32 UTC (rev 3926)
@@ -4,9 +4,9 @@
 
 ADD_LIBRARY(${ADM_LIB} SHARED ${${ADM_LIB}_SRCS})
 
-IF (WIN32 AND ADM_DEBUG)
+IF (ADM_DEBUG AND ADM_CPU_X86_32)
 	ADD_TARGET_CFLAGS(${ADM_LIB} -O2)
-ENDIF (WIN32 AND ADM_DEBUG)
+ENDIF (ADM_DEBUG AND ADM_CPU_X86_32)
 
 TARGET_LINK_LIBRARIES(${ADM_LIB} ADM_core ADM_libavutil)
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/CMakeLists.txt	2008-03-21 19:31:45 UTC (rev 3925)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/CMakeLists.txt	2008-03-21 20:47:32 UTC (rev 3926)
@@ -3,9 +3,14 @@
 # Compiler flags
 ADD_DEFINITIONS(-DHAVE_AV_CONFIG_H -fomit-frame-pointer -fno-math-errno)
 
+IF (APPLE)
+	ADD_DEFINITIONS(-mdynamic-no-pic)
+ENDIF (APPLE)
+
 IF (UNIX)
 	# CMake automatically adds -fPIC so remove it
 	STRING(REPLACE "-fPIC" "" CMAKE_SHARED_LIBRARY_C_FLAGS ${CMAKE_SHARED_LIBRARY_C_FLAGS})
+	STRING(REPLACE "-fPIC" "" CMAKE_SHARED_LIBRARY_CXX_FLAGS ${CMAKE_SHARED_LIBRARY_CXX_FLAGS})
 ENDIF (UNIX)
 
 IF (ADM_CPU_X86_64 OR ADM_CPU_PPC)
@@ -14,7 +19,7 @@
 
 # Linker flags
 IF (APPLE)
-	SET(CMAKE_SHARED_LINKER_FLAGS "${CMAKE_SHARED_LINKER_FLAGS} -Wl,-read_only_relocs,suppress")
+	SET(CMAKE_SHARED_LINKER_FLAGS "${CMAKE_SHARED_LINKER_FLAGS} -Wl,-single_module -Wl,-read_only_relocs,suppress")
 ENDIF (APPLE)
 
 IF (UNIX AND NOT APPLE)



From gruntster at mail.berlios.de  Sat Mar 22 00:17:22 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Sat, 22 Mar 2008 00:17:22 +0100
Subject: [Avidemux-svn-commit] r3927 - in
	branches/avidemux_2.5_branch_gruntster:
	avidemux/ADM_libraries/ADM_ffmpeg
	avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale
	avidemux/plugins/ADM_audiodecoder/ADM_ad_amrnb
	avidemux/plugins/ADM_audiodecoder/ADM_ad_dca
	avidemux/plugins/ADM_audiodecoder/ADM_ad_faad
	avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/ADM_libMad cmake
Message-ID: <200803212317.m2LNHMGQ008806@sheep.berlios.de>

Author: gruntster
Date: 2008-03-22 00:17:17 +0100 (Sat, 22 Mar 2008)
New Revision: 3927

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_amrnb/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_dca/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/ADM_libMad/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/cmake/ad_plugin.cmake
Log:
[CMake] prevent pic warning on Darwin ppc and fix ad plugins

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/CMakeLists.txt	2008-03-21 20:47:32 UTC (rev 3926)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/CMakeLists.txt	2008-03-21 23:17:17 UTC (rev 3927)
@@ -8,7 +8,7 @@
 ADD_LIBRARY(${ADM_LIB} SHARED ${${ADM_LIB}_SRCS})
 
 IF (APPLE AND ADM_DEBUG)
-	ADD_SOURCE_CFLAGS(${ADM_LIB} -O2)
+	ADD_TARGET_CFLAGS(${ADM_LIB} -O2)
 ENDIF (APPLE AND ADM_DEBUG)
 
 TARGET_LINK_LIBRARIES(${ADM_LIB} ADM_core ADM_libavutil)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/CMakeLists.txt	2008-03-21 20:47:32 UTC (rev 3926)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/CMakeLists.txt	2008-03-21 23:17:17 UTC (rev 3927)
@@ -3,10 +3,6 @@
 # Compiler flags
 ADD_DEFINITIONS(-DHAVE_AV_CONFIG_H -fomit-frame-pointer -fno-math-errno)
 
-IF (APPLE)
-	ADD_DEFINITIONS(-mdynamic-no-pic)
-ENDIF (APPLE)
-
 IF (UNIX)
 	# CMake automatically adds -fPIC so remove it
 	STRING(REPLACE "-fPIC" "" CMAKE_SHARED_LIBRARY_C_FLAGS ${CMAKE_SHARED_LIBRARY_C_FLAGS})
@@ -15,6 +11,8 @@
 
 IF (ADM_CPU_X86_64 OR ADM_CPU_PPC)
 	ADD_DEFINITIONS(-fPIC -DPIC)
+ELSEIF (APPLE)
+	ADD_DEFINITIONS(-mdynamic-no-pic)
 ENDIF (ADM_CPU_X86_64 OR ADM_CPU_PPC)
 
 # Linker flags

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_amrnb/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_amrnb/CMakeLists.txt	2008-03-21 20:47:32 UTC (rev 3926)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_amrnb/CMakeLists.txt	2008-03-21 23:17:17 UTC (rev 3927)
@@ -24,7 +24,7 @@
 	SET(ADM_ad_amrnb_SRCS ADM_ad_amrnb.cpp)
 
 	ADD_LIBRARY(ADM_ad_amrnb SHARED ${ADM_ad_amrnb_SRCS})
-	TARGET_LINK_LIBRARIES(ADM_ad_amrnb ${AMRNB_LIBRARY_DIR})
+	TARGET_LINK_LIBRARIES(ADM_ad_amrnb ADM_core ${AMRNB_LIBRARY_DIR})
 
 	ADD_TARGET_CFLAGS(ADM_ad_amrnb "-I${AMRNB_INCLUDE_DIR}")
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_dca/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_dca/CMakeLists.txt	2008-03-21 20:47:32 UTC (rev 3926)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_dca/CMakeLists.txt	2008-03-21 23:17:17 UTC (rev 3927)
@@ -8,7 +8,7 @@
 	SET(ADM_ad_dca_SRCS ADM_dca.cpp)
 
 	ADD_LIBRARY(ADM_ad_dca SHARED ${ADM_ad_dca_SRCS})
-	TARGET_LINK_LIBRARIES(ADM_ad_dca ${LIBDCA_LIBRARY_DIR})
+	TARGET_LINK_LIBRARIES(ADM_ad_dca ADM_core ${LIBDCA_LIBRARY_DIR})
 
 	ADD_TARGET_CFLAGS(ADM_ad_dca "-I${LIBDCA_INCLUDE_DIR}")
 	ADD_TARGET_CFLAGS(ADM_ad_dca "-DUSE_LIBDCA_${LIBDCA_VERSION}")

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/CMakeLists.txt	2008-03-21 20:47:32 UTC (rev 3926)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_faad/CMakeLists.txt	2008-03-21 23:17:17 UTC (rev 3927)
@@ -7,11 +7,11 @@
 	SET(ADM_ad_faad_SRCS ADM_ad_faad.cpp)
 
 	ADD_LIBRARY(ADM_ad_faad SHARED ${ADM_ad_faad_SRCS})
-	TARGET_LINK_LIBRARIES(ADM_ad_faad ${FAAD_LIBRARY_DIR})
+	TARGET_LINK_LIBRARIES(ADM_ad_faad ADM_core ${FAAD_LIBRARY_DIR})
 
 	ADD_TARGET_CFLAGS(ADM_ad_faad "-I${FAAD_INCLUDE_DIR}")
 	ADD_TARGET_DEFINITIONS(ADM_ad_faad FAAD_OLD_PROTOTYPE)
-	
+
 	INIT_AUDIO_PLUGIN(ADM_ad_faad)
 	INSTALL_AUDIODECODER(ADM_ad_faad)
 ENDIF (HAVE_FAAD)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/ADM_libMad/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/ADM_libMad/CMakeLists.txt	2008-03-21 20:47:32 UTC (rev 3926)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_mad/ADM_libMad/CMakeLists.txt	2008-03-21 23:17:17 UTC (rev 3927)
@@ -15,3 +15,4 @@
 ENDIF (ADM_BIG_ENDIAN)
 
 INIT_AUDIO_PLUGIN(${ADM_LIB})
+TARGET_LINK_LIBRARIES(${ADM_LIB} ADM_core)
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/cmake/ad_plugin.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/ad_plugin.cmake	2008-03-21 20:47:32 UTC (rev 3926)
+++ branches/avidemux_2.5_branch_gruntster/cmake/ad_plugin.cmake	2008-03-21 23:17:17 UTC (rev 3927)
@@ -2,9 +2,6 @@
 	INCLUDE_DIRECTORIES("${CMAKE_BINARY_DIR}/config")
 	INCLUDE_DIRECTORIES("${CMAKE_SOURCE_DIR}/avidemux/ADM_core/include")
 	INCLUDE_DIRECTORIES("${CMAKE_SOURCE_DIR}/avidemux/ADM_audiocodec")
-        if(WIN32)
-                TARGET_LINK_LIBRARIES(${_lib} ADM_core)
-        endif(WIN32)
 ENDMACRO(INIT_AUDIO_PLUGIN)
 
 MACRO(INSTALL_AUDIODECODER _lib)



From gruntster at mail.berlios.de  Sat Mar 22 01:10:16 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Sat, 22 Mar 2008 01:10:16 +0100
Subject: [Avidemux-svn-commit] r3928 - in
	branches/avidemux_2.5_branch_gruntster:
	avidemux/ADM_libraries/ADM_ffmpeg cmake cmake_compile_check
Message-ID: <200803220010.m2M0AGjb001744@sheep.berlios.de>

Author: gruntster
Date: 2008-03-22 01:10:07 +0100 (Sat, 22 Mar 2008)
New Revision: 3928

Added:
   branches/avidemux_2.5_branch_gruntster/cmake_compile_check/cpu_mmx2_check.cpp
Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/config.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ffconf.c
   branches/avidemux_2.5_branch_gruntster/cmake/ADM_coreConfig.h.cmake
   branches/avidemux_2.5_branch_gruntster/cmake/admDetermineSystem.cmake
Log:
[ffmpeg] check MMX2 support

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/config.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/config.h	2008-03-21 23:17:17 UTC (rev 3927)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/config.h	2008-03-22 00:10:07 UTC (rev 3928)
@@ -370,6 +370,9 @@
 #	define HAVE_DCBZL 1
 #endif	// ADM_CPU_DCBZL
 #endif	// ADM_CPU_X86_32
+#ifdef ADM_CPU_MMX2
+#	define HAVE_MMX2 1
+#endif
 #ifdef ADM_CPU_SSSE3
 #	define HAVE_SSSE3 1
 #endif

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ffconf.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ffconf.c	2008-03-21 23:17:17 UTC (rev 3927)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ffconf.c	2008-03-22 00:10:07 UTC (rev 3928)
@@ -415,6 +415,10 @@
 	printf("#endif	// ADM_CPU_DCBZL\n");
 	printf("#endif	// ADM_CPU_X86_32\n");
 
+	printf("#ifdef ADM_CPU_MMX2\n");
+	printf("#	define HAVE_MMX2 1\n");
+	printf("#endif\n");
+
 	printf("#ifdef ADM_CPU_SSSE3\n");
 	printf("#	define HAVE_SSSE3 1\n");
 	printf("#endif\n");

Modified: branches/avidemux_2.5_branch_gruntster/cmake/ADM_coreConfig.h.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/ADM_coreConfig.h.cmake	2008-03-21 23:17:17 UTC (rev 3927)
+++ branches/avidemux_2.5_branch_gruntster/cmake/ADM_coreConfig.h.cmake	2008-03-22 00:10:07 UTC (rev 3928)
@@ -9,6 +9,7 @@
 #cmakedefine ADM_CPU_ALTIVEC
 #cmakedefine ADM_CPU_DCBZL
 #cmakedefine ADM_CPU_PPC
+#cmakedefine ADM_CPU_MMX2
 #cmakedefine ADM_CPU_SSSE3
 #cmakedefine ADM_CPU_X86
 #cmakedefine ADM_CPU_X86_32

Modified: branches/avidemux_2.5_branch_gruntster/cmake/admDetermineSystem.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admDetermineSystem.cmake	2008-03-21 23:17:17 UTC (rev 3927)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admDetermineSystem.cmake	2008-03-22 00:10:07 UTC (rev 3928)
@@ -2,13 +2,14 @@
 #  ADM_BIG_ENDIAN  - big endian CPU detected
 #  ADM_BSD_FAMILY  - BSD family operating system was detected
 #  ADM_CPU_64BIT   - 64-bit CPU was detected
-#  ADM_CPU_ALTIVEC - PowerPC CPU with AltiVec architecture was detected
-#  ADM_CPU_DCBZL   - PowerPC CPU with dcbzl instruction was detected
 #  ADM_CPU_PPC     - PowerPC CPU architecture was detected
-#  ADM_CPU_SSSE3   - x86 CPU with SSSE3 instructions was detected
+#  ADM_CPU_ALTIVEC - PowerPC CPU with AltiVec instructions is supported
+#  ADM_CPU_DCBZL   - PowerPC CPU with dcbzl instruction is supported
 #  ADM_CPU_X86     - x86 CPU architecture was detected
 #  ADM_CPU_X86_32  - x86 32-bit CPU architecture was detected
 #  ADM_CPU_X86_64  - x86 64-bit CPU architecture was detected
+#  ADM_CPU_MMX2    - x86 CPU with MMX2 instructions is supported
+#  ADM_CPU_SSSE3   - x86 CPU with SSSE3 instructions is supported
 
 MACRO (PERFORM_SYSTEM_TEST testFile testName testSupportedVarName)
 	IF (${ARGC} EQUAL 4)
@@ -132,6 +133,12 @@
 ENDIF (X86_64_SUPPORTED)
 
 IF (ADM_CPU_X86)
+	PERFORM_SYSTEM_TEST(cpu_mmx2_check.cpp "MMX2 capable" MMX2_SUPPORTED)
+
+	IF (MMX2_SUPPORTED)
+		SET(ADM_CPU_MMX2 1)
+	ENDIF (MMX2_SUPPORTED)
+
 	PERFORM_SYSTEM_TEST(cpu_ssse3_check.cpp "SSSE3 capable" SSSE3_SUPPORTED)
 
 	IF (SSSE3_SUPPORTED)

Added: branches/avidemux_2.5_branch_gruntster/cmake_compile_check/cpu_mmx2_check.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake_compile_check/cpu_mmx2_check.cpp	2008-03-21 23:17:17 UTC (rev 3927)
+++ branches/avidemux_2.5_branch_gruntster/cmake_compile_check/cpu_mmx2_check.cpp	2008-03-22 00:10:07 UTC (rev 3928)
@@ -0,0 +1,9 @@
+int foo(void)
+{
+	asm volatile ("movss %xmm0, %xmm0");
+}
+
+int main(int a, char **b)
+{
+	return 0;
+}



From mean at mail.berlios.de  Sat Mar 22 12:46:24 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 22 Mar 2008 12:46:24 +0100
Subject: [Avidemux-svn-commit] r3929 - in
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg:
	. ADM_lavutil
Message-ID: <200803221146.m2MBkOU2002280@sheep.berlios.de>

Author: mean
Date: 2008-03-22 12:46:20 +0100 (Sat, 22 Mar 2008)
New Revision: 3929

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavutil/internal.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/config.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ffconf.c
Log:
[Lav*] Merge from mean branch


Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavutil/internal.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavutil/internal.h	2008-03-22 00:10:07 UTC (rev 3928)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavutil/internal.h	2008-03-22 11:46:20 UTC (rev 3929)
@@ -234,12 +234,14 @@
 #endif
 
 /* avoid usage of various functions */
+#if 0 //MEANX
 #undef  malloc
 #define malloc please_use_av_malloc
 #undef  free
 #define free please_use_av_free
 #undef  realloc
 #define realloc please_use_av_realloc
+#endif
 #undef  time
 #define time time_is_forbidden_due_to_security_issues
 #undef  rand

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/config.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/config.h	2008-03-22 00:10:07 UTC (rev 3928)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/config.h	2008-03-22 11:46:20 UTC (rev 3929)
@@ -1,411 +1,425 @@
-#include "ADM_coreConfig.h"
-#define ENABLE_NELLYMOSER_DECODER 1
-#define ENABLE_ADPCM_IMA_AMV_DECODER 1
-#define ENABLE_CINEPAK_DECODER 1
-#define ENABLE_DNXHD_DECODER 1
-#define ENABLE_FOURXM_DECODER 1
-#define ENABLE_FRAPS_DECODER 1
-#define ENABLE_H263_DECODER 1
-#define ENABLE_H264_DECODER 1
-#define ENABLE_INDEO2_DECODER 1
-#define ENABLE_INDEO3_DECODER 1
-#define ENABLE_INTERPLAY_VIDEO_DECODER 1
-#define ENABLE_MPEGVIDEO_DECODER 1
-#define ENABLE_MSVIDEO1_DECODER 1
-#define ENABLE_VC1_DECODER 1
-#define ENABLE_VCR1_DECODER 1
-#define ENABLE_VP5_DECODER 1
-#define ENABLE_VP6_DECODER 1
-#define ENABLE_VP6A_DECODER 1
-#define ENABLE_VP6F_DECODER 1
-#define ENABLE_WMV3_DECODER 1
-#define ENABLE_WMV1_DECODER 1
-#define ENABLE_WMV2_DECODER 1
-#define ENABLE_VP3_DECODER 1
-#define ENABLE_MPEG4_DECODER 1
-#define ENABLE_MSMPEG4V1_DECODER 1
-#define ENABLE_MSMPEG4V2_DECODER 1
-#define ENABLE_MSMPEG4V3_DECODER 1
-#define ENABLE_MJPEGB_DECODER 1
-#define ENABLE_MJPEG_DECODER 1
-#define ENABLE_WMAV2_DECODER 1
-#define ENABLE_DVVIDEO_DECODER 1
-#define ENABLE_HUFFYUV_DECODER 1
-#define ENABLE_FFVHUFF_DECODER 1
-#define ENABLE_SVQ3_DECODER 1
-#define ENABLE_TSCC_DECODER 1
-#define ENABLE_QDM2_DECODER 1
-#define ENABLE_FFV1_DECODER 1
-#define ENABLE_MPEG1VIDEO_DECODER 1
-#define ENABLE_MPEG2VIDEO_DECODER 1
-#define ENABLE_RV10_DECODER 1
-#define ENABLE_RV20_DECODER 1
-#define ENABLE_DVBSUB_DECODER 1
-#define ENABLE_FLV_DECODER 1
-#define ENABLE_SNOW_DECODER 1
-#define ENABLE_AMV_DECODER 1
-#define ENABLE_PCX_DECODER 0
-#define ENABLE_SUNRAST_DECODER 0
-#define ENABLE_VB_DECODER 0
-#define ENABLE_XSUB_DECODER 0
-#define ENABLE_AC3_DECODER 0
-#define ENABLE_APE_DECODER 0
-#define ENABLE_MPC8_DECODER 0
-#define ENABLE_PCM_S16LE_PLANAR_DECODER 0
-#define ENABLE_PCM_ZORK_DECODER 0
-#define ENABLE_ADPCM_EA_R1_DECODER 0
-#define ENABLE_ADPCM_EA_R2_DECODER 0
-#define ENABLE_ADPCM_EA_R3_DECODER 0
-#define ENABLE_ADPCM_EA_XAS_DECODER 0
-#define ENABLE_ADPCM_IMA_EA_EACS_DECODER 0
-#define ENABLE_ADPCM_IMA_EA_SEAD_DECODER 0
-#define ENABLE_AASC_DECODER 0
-#define ENABLE_AVS_DECODER 0
-#define ENABLE_BETHSOFTVID_DECODER 0
-#define ENABLE_C93_DECODER 0
-#define ENABLE_CAVS_DECODER 0
-#define ENABLE_CLJR_DECODER 0
-#define ENABLE_CSCD_DECODER 0
-#define ENABLE_CYUV_DECODER 0
-#define ENABLE_DSICINVIDEO_DECODER 0
-#define ENABLE_DXA_DECODER 0
-#define ENABLE_EIGHTBPS_DECODER 0
-#define ENABLE_FLIC_DECODER 0
-#define ENABLE_IDCIN_DECODER 0
-#define ENABLE_KMVC_DECODER 0
-#define ENABLE_LOCO_DECODER 0
-#define ENABLE_MDEC_DECODER 0
-#define ENABLE_MMVIDEO_DECODER 0
-#define ENABLE_MPEG_XVMC_DECODER 0
-#define ENABLE_MSRLE_DECODER 0
-#define ENABLE_MSZH_DECODER 0
-#define ENABLE_NUV_DECODER 0
-#define ENABLE_PTX_DECODER 0
-#define ENABLE_QDRAW_DECODER 0
-#define ENABLE_QPEG_DECODER 0
-#define ENABLE_RPZA_DECODER 0
-#define ENABLE_SMACKER_DECODER 0
-#define ENABLE_SMC_DECODER 0
-#define ENABLE_SP5X_DECODER 0
-#define ENABLE_THEORA_DECODER 0
-#define ENABLE_THP_DECODER 0
-#define ENABLE_TIERTEXSEQVIDEO_DECODER 0
-#define ENABLE_TRUEMOTION1_DECODER 0
-#define ENABLE_TRUEMOTION2_DECODER 0
-#define ENABLE_TXD_DECODER 0
-#define ENABLE_ULTI_DECODER 0
-#define ENABLE_VMDVIDEO_DECODER 0
-#define ENABLE_VMNC_DECODER 0
-#define ENABLE_VQA_DECODER 0
-#define ENABLE_WNV1_DECODER 0
-#define ENABLE_XAN_WC3_DECODER 0
-#define ENABLE_XL_DECODER 0
-#define ENABLE_MPEG4AAC_DECODER 0
-#define ENABLE_ALAC_DECODER 0
-#define ENABLE_ATRAC3_DECODER 0
-#define ENABLE_COOK_DECODER 0
-#define ENABLE_DCA_DECODER 0
-#define ENABLE_DSICINAUDIO_DECODER 0
-#define ENABLE_IMC_DECODER 0
-#define ENABLE_LIBA52_DECODER 0
-#define ENABLE_LIBFAAD_DECODER 0
-#define ENABLE_MACE3_DECODER 0
-#define ENABLE_MACE6_DECODER 0
-#define ENABLE_MP3_DECODER 0
-#define ENABLE_MP3ADU_DECODER 0
-#define ENABLE_MP3ON4_DECODER 0
-#define ENABLE_MPC7_DECODER 0
-#define ENABLE_RA_144_DECODER 0
-#define ENABLE_RA_288_DECODER 0
-#define ENABLE_SHORTEN_DECODER 0
-#define ENABLE_SMACKAUD_DECODER 0
-#define ENABLE_TRUESPEECH_DECODER 0
-#define ENABLE_TTA_DECODER 0
-#define ENABLE_VMDAUDIO_DECODER 0
-#define ENABLE_WAVPACK_DECODER 0
-#define ENABLE_WS_SND1_DECODER 0
-#define ENABLE_INTERPLAY_DPCM_DECODER 0
-#define ENABLE_SOL_DPCM_DECODER 0
-#define ENABLE_XAN_DPCM_DECODER 0
-#define ENABLE_ADPCM_THP_DECODER 0
-#define ENABLE_ASV1_DECODER 0
-#define ENABLE_ASV2_DECODER 0
-#define ENABLE_BMP_DECODER 0
-#define ENABLE_FLASHSV_DECODER 0
-#define ENABLE_GIF_DECODER 0
-#define ENABLE_H261_DECODER 0
-#define ENABLE_H263I_DECODER 0
-#define ENABLE_JPEGLS_DECODER 0
-#define ENABLE_PNG_DECODER 0
-#define ENABLE_QTRLE_DECODER 0
-#define ENABLE_RAWVIDEO_DECODER 0
-#define ENABLE_ROQ_DECODER 0
-#define ENABLE_SGI_DECODER 0
-#define ENABLE_SVQ1_DECODER 0
-#define ENABLE_TARGA_DECODER 0
-#define ENABLE_TIFF_DECODER 0
-#define ENABLE_ZLIB_DECODER 0
-#define ENABLE_ZMBV_DECODER 0
-#define ENABLE_FLAC_DECODER 0
-#define ENABLE_LIBAMR_NB_DECODER 0
-#define ENABLE_LIBAMR_WB_DECODER 0
-#define ENABLE_LIBGSM_DECODER 0
-#define ENABLE_LIBGSM_MS_DECODER 0
-#define ENABLE_MP2_DECODER 0
-#define ENABLE_SONIC_DECODER 0
-#define ENABLE_VORBIS_DECODER 0
-#define ENABLE_WMAV1_DECODER 0
-#define ENABLE_PCM_ALAW_DECODER 0
-#define ENABLE_PCM_MULAW_DECODER 0
-#define ENABLE_PCM_S8_DECODER 0
-#define ENABLE_PCM_S16BE_DECODER 0
-#define ENABLE_PCM_S16LE_DECODER 0
-#define ENABLE_PCM_S24BE_DECODER 0
-#define ENABLE_PCM_S24DAUD_DECODER 0
-#define ENABLE_PCM_S24LE_DECODER 0
-#define ENABLE_PCM_S32BE_DECODER 0
-#define ENABLE_PCM_S32LE_DECODER 0
-#define ENABLE_PCM_U8_DECODER 0
-#define ENABLE_PCM_U16BE_DECODER 0
-#define ENABLE_PCM_U16LE_DECODER 0
-#define ENABLE_PCM_U24BE_DECODER 0
-#define ENABLE_PCM_U24LE_DECODER 0
-#define ENABLE_PCM_U32BE_DECODER 0
-#define ENABLE_PCM_U32LE_DECODER 0
-#define ENABLE_ROQ_DPCM_DECODER 0
-#define ENABLE_ADPCM_4XM_DECODER 0
-#define ENABLE_ADPCM_ADX_DECODER 0
-#define ENABLE_ADPCM_CT_DECODER 0
-#define ENABLE_ADPCM_EA_DECODER 0
-#define ENABLE_ADPCM_G726_DECODER 0
-#define ENABLE_ADPCM_IMA_DK3_DECODER 0
-#define ENABLE_ADPCM_IMA_DK4_DECODER 0
-#define ENABLE_ADPCM_IMA_QT_DECODER 0
-#define ENABLE_ADPCM_IMA_SMJPEG_DECODER 0
-#define ENABLE_ADPCM_IMA_WAV_DECODER 0
-#define ENABLE_ADPCM_IMA_WS_DECODER 0
-#define ENABLE_ADPCM_MS_DECODER 0
-#define ENABLE_ADPCM_SBPRO_2_DECODER 0
-#define ENABLE_ADPCM_SBPRO_3_DECODER 0
-#define ENABLE_ADPCM_SBPRO_4_DECODER 0
-#define ENABLE_ADPCM_SWF_DECODER 0
-#define ENABLE_ADPCM_XA_DECODER 0
-#define ENABLE_ADPCM_YAMAHA_DECODER 0
-#define ENABLE_DVDSUB_DECODER 0
-#define ENABLE_LIBVORBIS_DECODER 0
-#define ENABLE_H263_PARSER 1
-#define ENABLE_H264_PARSER 1
-#define ENABLE_MPEG4VIDEO_PARSER 1
-#define ENABLE_AAC_PARSER 0
-#define ENABLE_AC3_PARSER 0
-#define ENABLE_CAVSVIDEO_PARSER 0
-#define ENABLE_DCA_PARSER 0
-#define ENABLE_DVBSUB_PARSER 0
-#define ENABLE_DVDSUB_PARSER 0
-#define ENABLE_H261_PARSER 0
-#define ENABLE_MJPEG_PARSER 0
-#define ENABLE_MPEGAUDIO_PARSER 0
-#define ENABLE_MPEGVIDEO_PARSER 0
-#define ENABLE_PNM_PARSER 0
-#define ENABLE_VC1_PARSER 0
-#define ENABLE_MJPEG_ENCODER 1
-#define ENABLE_MSMPEG4V3_ENCODER 1
-#define ENABLE_H263P_ENCODER 1
-#define ENABLE_AC3_ENCODER 1
-#define ENABLE_FFV1_ENCODER 1
-#define ENABLE_FLV1_ENCODER 1
-#define ENABLE_FFVHUFF_ENCODER 1
-#define ENABLE_H263_ENCODER 1
-#define ENABLE_MPEG1VIDEO_ENCODER 1
-#define ENABLE_MPEG2VIDEO_ENCODER 1
-#define ENABLE_MPEG4_ENCODER 1
-#define ENABLE_FLV_ENCODER 1
-#define ENABLE_MP2_ENCODER 1
-#define ENABLE_DVVIDEO_ENCODER 1
-#define ENABLE_HUFFYUV_ENCODER 1
-#define ENABLE_DVBSUB_ENCODER 1
-#define ENABLE_SNOW_ENCODER 1
-#define ENABLE_DNXHD_ENCODER 0
-#define ENABLE_PCM_ZORK_ENCODER 0
-#define ENABLE_ADPCM_IMA_AMV_ENCODER 0
-#define ENABLE_LIBX264_ENCODER 0
-#define ENABLE_LIBXVID_ENCODER 0
-#define ENABLE_LJPEG_ENCODER 0
-#define ENABLE_PAM_ENCODER 0
-#define ENABLE_PBM_ENCODER 0
-#define ENABLE_PGM_ENCODER 0
-#define ENABLE_PGMYUV_ENCODER 0
-#define ENABLE_PPM_ENCODER 0
-#define ENABLE_LIBFAAC_ENCODER 0
-#define ENABLE_LIBMP3LAME_ENCODER 0
-#define ENABLE_LIBTHEORA_ENCODER 0
-#define ENABLE_SONIC_LS_ENCODER 0
-#define ENABLE_ASV1_ENCODER 0
-#define ENABLE_ASV2_ENCODER 0
-#define ENABLE_BMP_ENCODER 0
-#define ENABLE_FLASHSV_ENCODER 0
-#define ENABLE_GIF_ENCODER 0
-#define ENABLE_H261_ENCODER 0
-#define ENABLE_JPEGLS_ENCODER 0
-#define ENABLE_MSMPEG4V1_ENCODER 0
-#define ENABLE_MSMPEG4V2_ENCODER 0
-#define ENABLE_PNG_ENCODER 0
-#define ENABLE_QTRLE_ENCODER 0
-#define ENABLE_RAWVIDEO_ENCODER 0
-#define ENABLE_ROQ_ENCODER 0
-#define ENABLE_RV10_ENCODER 0
-#define ENABLE_RV20_ENCODER 0
-#define ENABLE_SGI_ENCODER 0
-#define ENABLE_SVQ1_ENCODER 0
-#define ENABLE_TARGA_ENCODER 0
-#define ENABLE_TIFF_ENCODER 0
-#define ENABLE_WMV1_ENCODER 0
-#define ENABLE_WMV2_ENCODER 0
-#define ENABLE_ZLIB_ENCODER 0
-#define ENABLE_ZMBV_ENCODER 0
-#define ENABLE_FLAC_ENCODER 0
-#define ENABLE_LIBAMR_NB_ENCODER 0
-#define ENABLE_LIBAMR_WB_ENCODER 0
-#define ENABLE_LIBGSM_ENCODER 0
-#define ENABLE_LIBGSM_MS_ENCODER 0
-#define ENABLE_SONIC_ENCODER 0
-#define ENABLE_VORBIS_ENCODER 0
-#define ENABLE_WMAV1_ENCODER 0
-#define ENABLE_WMAV2_ENCODER 0
-#define ENABLE_PCM_ALAW_ENCODER 0
-#define ENABLE_PCM_MULAW_ENCODER 0
-#define ENABLE_PCM_S8_ENCODER 0
-#define ENABLE_PCM_S16BE_ENCODER 0
-#define ENABLE_PCM_S16LE_ENCODER 0
-#define ENABLE_PCM_S24BE_ENCODER 0
-#define ENABLE_PCM_S24DAUD_ENCODER 0
-#define ENABLE_PCM_S24LE_ENCODER 0
-#define ENABLE_PCM_S32BE_ENCODER 0
-#define ENABLE_PCM_S32LE_ENCODER 0
-#define ENABLE_PCM_U8_ENCODER 0
-#define ENABLE_PCM_U16BE_ENCODER 0
-#define ENABLE_PCM_U16LE_ENCODER 0
-#define ENABLE_PCM_U24BE_ENCODER 0
-#define ENABLE_PCM_U24LE_ENCODER 0
-#define ENABLE_PCM_U32BE_ENCODER 0
-#define ENABLE_PCM_U32LE_ENCODER 0
-#define ENABLE_ROQ_DPCM_ENCODER 0
-#define ENABLE_ADPCM_4XM_ENCODER 0
-#define ENABLE_ADPCM_ADX_ENCODER 0
-#define ENABLE_ADPCM_CT_ENCODER 0
-#define ENABLE_ADPCM_EA_ENCODER 0
-#define ENABLE_ADPCM_G726_ENCODER 0
-#define ENABLE_ADPCM_IMA_DK3_ENCODER 0
-#define ENABLE_ADPCM_IMA_DK4_ENCODER 0
-#define ENABLE_ADPCM_IMA_QT_ENCODER 0
-#define ENABLE_ADPCM_IMA_SMJPEG_ENCODER 0
-#define ENABLE_ADPCM_IMA_WAV_ENCODER 0
-#define ENABLE_ADPCM_IMA_WS_ENCODER 0
-#define ENABLE_ADPCM_MS_ENCODER 0
-#define ENABLE_ADPCM_SBPRO_2_ENCODER 0
-#define ENABLE_ADPCM_SBPRO_3_ENCODER 0
-#define ENABLE_ADPCM_SBPRO_4_ENCODER 0
-#define ENABLE_ADPCM_SWF_ENCODER 0
-#define ENABLE_ADPCM_XA_ENCODER 0
-#define ENABLE_ADPCM_YAMAHA_ENCODER 0
-#define ENABLE_DVDSUB_ENCODER 0
-#define ENABLE_LIBVORBIS_ENCODER 0
-#define ENABLE_MP3_HEADER_COMPRESS_BSF 0
-#define ENABLE_IMX_DUMP_HEADER_BSF 0
-#define ENABLE_DUMP_EXTRADATA_BSF 0
-#define ENABLE_REMOVE_EXTRADATA_BSF 0
-#define ENABLE_NOISE_BSF 0
-#define ENABLE_MP3_HEADER_DECOMPRESS_BSF 0
-#define ENABLE_MJPEGA_DUMP_HEADER_BSF 0
-#define ENABLE_H264_MP4TOANNEXB_BSF 0
-#define ENABLE_MOV2TEXTSUB_BSF 0
-#define ENABLE_TEXT2MOVSUB_BSF 0
-#define CONFIG_MUXERS 1
-#define CONFIG_MOV_MUXER 1
-#define CONFIG_MP4_MUXER 1
-#define CONFIG_PSP_MUXER 1
-#define CONFIG_TG2_MUXER 1
-#define CONFIG_TGP_MUXER 1
-#define CONFIG_ENCODERS 1
-#define CONFIG_DVVIDEO_ENCODER 1
-#define CONFIG_SNOW_ENCODER 1
-#define CONFIG_DECODERS 1
-#define CONFIG_DVVIDEO_DECODER 1
-#define CONFIG_H263_DECODER 1
-#define CONFIG_MPEG4_DECODER 1
-#define CONFIG_SNOW_DECODER 1
-#define CONFIG_VC1_DECODER 1
-#define CONFIG_WMV2_DECODER 1
-#define CONFIG_WMV3_DECODER 1
-#define CONFIG_MPEGAUDIO_HP 1
-#define CONFIG_ZLIB 1
-#define CONFIG_GPL 1
-#define ENABLE_ARMV4L 0
-#define ENABLE_MLIB 0
-#define ENABLE_SPARC 0
-#define ENABLE_ALPHA 0
-#define ENABLE_MMI 0
-#define ENABLE_SH4 0
-#define ENABLE_BFIN 0
-#define ENABLE_SMALL 0
-#define ENABLE_MLP_PARSER 0
-#ifdef __APPLE__
-#	define CONFIG_DARWIN 1
-#endif
-#if defined(ADM_CPU_X86_32)
-#	define ARCH_X86 1
-#	define ARCH_X86_32 1
-#elif defined(ADM_CPU_X86_64)
-#	define ARCH_X86 1
-#	define ARCH_X86_64 1
-#elif defined(ADM_CPU_PPC)
-#	define ARCH_POWERPC 1
-#ifdef ADM_CPU_ALTIVEC
-#	define HAVE_ALTIVEC 1
-#ifndef __APPLE__
-#	define HAVE_ALTIVEC_H 1
-#endif	// __APPLE__
-#endif	// ADM_CPU_ALTIVEC
-#ifdef ADM_CPU_DCBZL
-#	define HAVE_DCBZL 1
-#endif	// ADM_CPU_DCBZL
-#endif	// ADM_CPU_X86_32
-#ifdef ADM_CPU_MMX2
-#	define HAVE_MMX2 1
-#endif
-#ifdef ADM_CPU_SSSE3
-#	define HAVE_SSSE3 1
-#endif
-#ifdef ARCH_POWERPC
-#	define ENABLE_POWERPC 1
-#else
-#	define ENABLE_POWERPC 0
-#endif
-#ifdef ARCH_X86
-#	define ENABLE_MMX 1
-#	define ENABLE_BSWAP 1
-#	define HAVE_MMX 1
-#	define HAVE_FAST_UNALIGNED 1
-#	define HAVE_EBP_AVAILABLE 1
-#	define HAVE_EBX_AVAILABLE 1
-#else
-#	define ENABLE_MMX 0
-#endif
-#ifdef ARCH_X86_64
-#	define HAVE_FAST_64BIT 1
-#endif
-#ifdef ADM_BIG_ENDIAN
-#	define WORDS_BIGENDIAN 1
-#endif
-#define ENABLE_THREADS 1
-#define ENABLE_ENCODERS 1
-#define ENABLE_VIS 0
-#define ENABLE_GRAY 0
-#define HAVE_LRINTF 1
-#define HAVE_LLRINT 1
-#define HAVE_LRINT 1
-#define HAVE_ROUND 1
-#define HAVE_ROUNDF 1
-#define HAVE_THREADS 1
-#define RUNTIME_CPUDETECT 1
-#define restrict __restrict__
+#include "ADM_coreConfig.h"
+#define ENABLE_NELLYMOSER_DECODER 1
+#define ENABLE_ADPCM_IMA_AMV_DECODER 1
+#define ENABLE_CINEPAK_DECODER 1
+#define ENABLE_DNXHD_DECODER 1
+#define ENABLE_FOURXM_DECODER 1
+#define ENABLE_FRAPS_DECODER 1
+#define ENABLE_H263_DECODER 1
+#define ENABLE_H264_DECODER 1
+#define ENABLE_INDEO2_DECODER 1
+#define ENABLE_INDEO3_DECODER 1
+#define ENABLE_INTERPLAY_VIDEO_DECODER 1
+#define ENABLE_MPEGVIDEO_DECODER 1
+#define ENABLE_MSVIDEO1_DECODER 1
+#define ENABLE_VC1_DECODER 1
+#define ENABLE_VCR1_DECODER 1
+#define ENABLE_VP5_DECODER 1
+#define ENABLE_VP6_DECODER 1
+#define ENABLE_VP6A_DECODER 1
+#define ENABLE_VP6F_DECODER 1
+#define ENABLE_WMV3_DECODER 1
+#define ENABLE_WMV1_DECODER 1
+#define ENABLE_WMV2_DECODER 1
+#define ENABLE_VP3_DECODER 1
+#define ENABLE_MPEG4_DECODER 1
+#define ENABLE_MSMPEG4V1_DECODER 1
+#define ENABLE_MSMPEG4V2_DECODER 1
+#define ENABLE_MSMPEG4V3_DECODER 1
+#define ENABLE_MJPEGB_DECODER 1
+#define ENABLE_MJPEG_DECODER 1
+#define ENABLE_WMAV2_DECODER 1
+#define ENABLE_DVVIDEO_DECODER 1
+#define ENABLE_HUFFYUV_DECODER 1
+#define ENABLE_FFVHUFF_DECODER 1
+#define ENABLE_SVQ3_DECODER 1
+#define ENABLE_TSCC_DECODER 1
+#define ENABLE_QDM2_DECODER 1
+#define ENABLE_FFV1_DECODER 1
+#define ENABLE_MPEG1VIDEO_DECODER 1
+#define ENABLE_MPEG2VIDEO_DECODER 1
+#define ENABLE_RV10_DECODER 1
+#define ENABLE_RV20_DECODER 1
+#define ENABLE_DVBSUB_DECODER 1
+#define ENABLE_FLV_DECODER 1
+#define ENABLE_SNOW_DECODER 1
+#define ENABLE_AMV_DECODER 1
+#define ENABLE_PCX_DECODER 0
+#define ENABLE_SUNRAST_DECODER 0
+#define ENABLE_VB_DECODER 0
+#define ENABLE_XSUB_DECODER 0
+#define ENABLE_AC3_DECODER 0
+#define ENABLE_APE_DECODER 0
+#define ENABLE_MPC8_DECODER 0
+#define ENABLE_PCM_S16LE_PLANAR_DECODER 0
+#define ENABLE_PCM_ZORK_DECODER 0
+#define ENABLE_ADPCM_EA_R1_DECODER 0
+#define ENABLE_ADPCM_EA_R2_DECODER 0
+#define ENABLE_ADPCM_EA_R3_DECODER 0
+#define ENABLE_ADPCM_EA_XAS_DECODER 0
+#define ENABLE_ADPCM_IMA_EA_EACS_DECODER 0
+#define ENABLE_ADPCM_IMA_EA_SEAD_DECODER 0
+#define ENABLE_AASC_DECODER 0
+#define ENABLE_AVS_DECODER 0
+#define ENABLE_BETHSOFTVID_DECODER 0
+#define ENABLE_C93_DECODER 0
+#define ENABLE_CAVS_DECODER 0
+#define ENABLE_CLJR_DECODER 0
+#define ENABLE_CSCD_DECODER 0
+#define ENABLE_CYUV_DECODER 0
+#define ENABLE_DSICINVIDEO_DECODER 0
+#define ENABLE_DXA_DECODER 0
+#define ENABLE_EIGHTBPS_DECODER 0
+#define ENABLE_FLIC_DECODER 0
+#define ENABLE_IDCIN_DECODER 0
+#define ENABLE_KMVC_DECODER 0
+#define ENABLE_LOCO_DECODER 0
+#define ENABLE_MDEC_DECODER 0
+#define ENABLE_MMVIDEO_DECODER 0
+#define ENABLE_MPEG_XVMC_DECODER 0
+#define ENABLE_MSRLE_DECODER 0
+#define ENABLE_MSZH_DECODER 0
+#define ENABLE_NUV_DECODER 0
+#define ENABLE_PTX_DECODER 0
+#define ENABLE_QDRAW_DECODER 0
+#define ENABLE_QPEG_DECODER 0
+#define ENABLE_RPZA_DECODER 0
+#define ENABLE_SMACKER_DECODER 0
+#define ENABLE_SMC_DECODER 0
+#define ENABLE_SP5X_DECODER 0
+#define ENABLE_THEORA_DECODER 0
+#define ENABLE_THP_DECODER 0
+#define ENABLE_TIERTEXSEQVIDEO_DECODER 0
+#define ENABLE_TRUEMOTION1_DECODER 0
+#define ENABLE_TRUEMOTION2_DECODER 0
+#define ENABLE_TXD_DECODER 0
+#define ENABLE_ULTI_DECODER 0
+#define ENABLE_VMDVIDEO_DECODER 0
+#define ENABLE_VMNC_DECODER 0
+#define ENABLE_VQA_DECODER 0
+#define ENABLE_WNV1_DECODER 0
+#define ENABLE_XAN_WC3_DECODER 0
+#define ENABLE_XL_DECODER 0
+#define ENABLE_MPEG4AAC_DECODER 0
+#define ENABLE_ALAC_DECODER 0
+#define ENABLE_ATRAC3_DECODER 0
+#define ENABLE_COOK_DECODER 0
+#define ENABLE_DCA_DECODER 0
+#define ENABLE_DSICINAUDIO_DECODER 0
+#define ENABLE_IMC_DECODER 0
+#define ENABLE_LIBA52_DECODER 0
+#define ENABLE_LIBFAAD_DECODER 0
+#define ENABLE_MACE3_DECODER 0
+#define ENABLE_MACE6_DECODER 0
+#define ENABLE_MP3_DECODER 0
+#define ENABLE_MP3ADU_DECODER 0
+#define ENABLE_MP3ON4_DECODER 0
+#define ENABLE_MPC7_DECODER 0
+#define ENABLE_RA_144_DECODER 0
+#define ENABLE_RA_288_DECODER 0
+#define ENABLE_SHORTEN_DECODER 0
+#define ENABLE_SMACKAUD_DECODER 0
+#define ENABLE_TRUESPEECH_DECODER 0
+#define ENABLE_TTA_DECODER 0
+#define ENABLE_VMDAUDIO_DECODER 0
+#define ENABLE_WAVPACK_DECODER 0
+#define ENABLE_WS_SND1_DECODER 0
+#define ENABLE_INTERPLAY_DPCM_DECODER 0
+#define ENABLE_SOL_DPCM_DECODER 0
+#define ENABLE_XAN_DPCM_DECODER 0
+#define ENABLE_ADPCM_THP_DECODER 0
+#define ENABLE_ASV1_DECODER 0
+#define ENABLE_ASV2_DECODER 0
+#define ENABLE_BMP_DECODER 0
+#define ENABLE_FLASHSV_DECODER 0
+#define ENABLE_GIF_DECODER 0
+#define ENABLE_H261_DECODER 0
+#define ENABLE_H263I_DECODER 0
+#define ENABLE_JPEGLS_DECODER 0
+#define ENABLE_PNG_DECODER 0
+#define ENABLE_QTRLE_DECODER 0
+#define ENABLE_RAWVIDEO_DECODER 0
+#define ENABLE_ROQ_DECODER 0
+#define ENABLE_SGI_DECODER 0
+#define ENABLE_SVQ1_DECODER 0
+#define ENABLE_TARGA_DECODER 0
+#define ENABLE_TIFF_DECODER 0
+#define ENABLE_ZLIB_DECODER 0
+#define ENABLE_ZMBV_DECODER 0
+#define ENABLE_FLAC_DECODER 0
+#define ENABLE_LIBAMR_NB_DECODER 0
+#define ENABLE_LIBAMR_WB_DECODER 0
+#define ENABLE_LIBGSM_DECODER 0
+#define ENABLE_LIBGSM_MS_DECODER 0
+#define ENABLE_MP2_DECODER 0
+#define ENABLE_SONIC_DECODER 0
+#define ENABLE_VORBIS_DECODER 0
+#define ENABLE_WMAV1_DECODER 0
+#define ENABLE_PCM_ALAW_DECODER 0
+#define ENABLE_PCM_MULAW_DECODER 0
+#define ENABLE_PCM_S8_DECODER 0
+#define ENABLE_PCM_S16BE_DECODER 0
+#define ENABLE_PCM_S16LE_DECODER 0
+#define ENABLE_PCM_S24BE_DECODER 0
+#define ENABLE_PCM_S24DAUD_DECODER 0
+#define ENABLE_PCM_S24LE_DECODER 0
+#define ENABLE_PCM_S32BE_DECODER 0
+#define ENABLE_PCM_S32LE_DECODER 0
+#define ENABLE_PCM_U8_DECODER 0
+#define ENABLE_PCM_U16BE_DECODER 0
+#define ENABLE_PCM_U16LE_DECODER 0
+#define ENABLE_PCM_U24BE_DECODER 0
+#define ENABLE_PCM_U24LE_DECODER 0
+#define ENABLE_PCM_U32BE_DECODER 0
+#define ENABLE_PCM_U32LE_DECODER 0
+#define ENABLE_ROQ_DPCM_DECODER 0
+#define ENABLE_ADPCM_4XM_DECODER 0
+#define ENABLE_ADPCM_ADX_DECODER 0
+#define ENABLE_ADPCM_CT_DECODER 0
+#define ENABLE_ADPCM_EA_DECODER 0
+#define ENABLE_ADPCM_G726_DECODER 0
+#define ENABLE_ADPCM_IMA_DK3_DECODER 0
+#define ENABLE_ADPCM_IMA_DK4_DECODER 0
+#define ENABLE_ADPCM_IMA_QT_DECODER 0
+#define ENABLE_ADPCM_IMA_SMJPEG_DECODER 0
+#define ENABLE_ADPCM_IMA_WAV_DECODER 0
+#define ENABLE_ADPCM_IMA_WS_DECODER 0
+#define ENABLE_ADPCM_MS_DECODER 0
+#define ENABLE_ADPCM_SBPRO_2_DECODER 0
+#define ENABLE_ADPCM_SBPRO_3_DECODER 0
+#define ENABLE_ADPCM_SBPRO_4_DECODER 0
+#define ENABLE_ADPCM_SWF_DECODER 0
+#define ENABLE_ADPCM_XA_DECODER 0
+#define ENABLE_ADPCM_YAMAHA_DECODER 0
+#define ENABLE_DVDSUB_DECODER 0
+#define ENABLE_LIBVORBIS_DECODER 0
+#define ENABLE_H263_PARSER 1
+#define ENABLE_H264_PARSER 1
+#define ENABLE_MPEG4VIDEO_PARSER 1
+#define ENABLE_AAC_PARSER 0
+#define ENABLE_AC3_PARSER 0
+#define ENABLE_CAVSVIDEO_PARSER 0
+#define ENABLE_DCA_PARSER 0
+#define ENABLE_DVBSUB_PARSER 0
+#define ENABLE_DVDSUB_PARSER 0
+#define ENABLE_H261_PARSER 0
+#define ENABLE_MJPEG_PARSER 0
+#define ENABLE_MPEGAUDIO_PARSER 0
+#define ENABLE_MPEGVIDEO_PARSER 0
+#define ENABLE_PNM_PARSER 0
+#define ENABLE_VC1_PARSER 0
+#define ENABLE_MJPEG_ENCODER 1
+#define ENABLE_MSMPEG4V3_ENCODER 1
+#define ENABLE_H263P_ENCODER 1
+#define ENABLE_AC3_ENCODER 1
+#define ENABLE_FFV1_ENCODER 1
+#define ENABLE_FLV1_ENCODER 1
+#define ENABLE_FFVHUFF_ENCODER 1
+#define ENABLE_H263_ENCODER 1
+#define ENABLE_MPEG1VIDEO_ENCODER 1
+#define ENABLE_MPEG2VIDEO_ENCODER 1
+#define ENABLE_MPEG4_ENCODER 1
+#define ENABLE_FLV_ENCODER 1
+#define ENABLE_MP2_ENCODER 1
+#define ENABLE_DVVIDEO_ENCODER 1
+#define ENABLE_HUFFYUV_ENCODER 1
+#define ENABLE_DVBSUB_ENCODER 1
+#define ENABLE_SNOW_ENCODER 1
+#define ENABLE_DNXHD_ENCODER 0
+#define ENABLE_PCM_ZORK_ENCODER 0
+#define ENABLE_ADPCM_IMA_AMV_ENCODER 0
+#define ENABLE_LIBX264_ENCODER 0
+#define ENABLE_LIBXVID_ENCODER 0
+#define ENABLE_LJPEG_ENCODER 0
+#define ENABLE_PAM_ENCODER 0
+#define ENABLE_PBM_ENCODER 0
+#define ENABLE_PGM_ENCODER 0
+#define ENABLE_PGMYUV_ENCODER 0
+#define ENABLE_PPM_ENCODER 0
+#define ENABLE_LIBFAAC_ENCODER 0
+#define ENABLE_LIBMP3LAME_ENCODER 0
+#define ENABLE_LIBTHEORA_ENCODER 0
+#define ENABLE_SONIC_LS_ENCODER 0
+#define ENABLE_ASV1_ENCODER 0
+#define ENABLE_ASV2_ENCODER 0
+#define ENABLE_BMP_ENCODER 0
+#define ENABLE_FLASHSV_ENCODER 0
+#define ENABLE_GIF_ENCODER 0
+#define ENABLE_H261_ENCODER 0
+#define ENABLE_JPEGLS_ENCODER 0
+#define ENABLE_MSMPEG4V1_ENCODER 0
+#define ENABLE_MSMPEG4V2_ENCODER 0
+#define ENABLE_PNG_ENCODER 0
+#define ENABLE_QTRLE_ENCODER 0
+#define ENABLE_RAWVIDEO_ENCODER 0
+#define ENABLE_ROQ_ENCODER 0
+#define ENABLE_RV10_ENCODER 0
+#define ENABLE_RV20_ENCODER 0
+#define ENABLE_SGI_ENCODER 0
+#define ENABLE_SVQ1_ENCODER 0
+#define ENABLE_TARGA_ENCODER 0
+#define ENABLE_TIFF_ENCODER 0
+#define ENABLE_WMV1_ENCODER 0
+#define ENABLE_WMV2_ENCODER 0
+#define ENABLE_ZLIB_ENCODER 0
+#define ENABLE_ZMBV_ENCODER 0
+#define ENABLE_FLAC_ENCODER 0
+#define ENABLE_LIBAMR_NB_ENCODER 0
+#define ENABLE_LIBAMR_WB_ENCODER 0
+#define ENABLE_LIBGSM_ENCODER 0
+#define ENABLE_LIBGSM_MS_ENCODER 0
+#define ENABLE_SONIC_ENCODER 0
+#define ENABLE_VORBIS_ENCODER 0
+#define ENABLE_WMAV1_ENCODER 0
+#define ENABLE_WMAV2_ENCODER 0
+#define ENABLE_PCM_ALAW_ENCODER 0
+#define ENABLE_PCM_MULAW_ENCODER 0
+#define ENABLE_PCM_S8_ENCODER 0
+#define ENABLE_PCM_S16BE_ENCODER 0
+#define ENABLE_PCM_S16LE_ENCODER 0
+#define ENABLE_PCM_S24BE_ENCODER 0
+#define ENABLE_PCM_S24DAUD_ENCODER 0
+#define ENABLE_PCM_S24LE_ENCODER 0
+#define ENABLE_PCM_S32BE_ENCODER 0
+#define ENABLE_PCM_S32LE_ENCODER 0
+#define ENABLE_PCM_U8_ENCODER 0
+#define ENABLE_PCM_U16BE_ENCODER 0
+#define ENABLE_PCM_U16LE_ENCODER 0
+#define ENABLE_PCM_U24BE_ENCODER 0
+#define ENABLE_PCM_U24LE_ENCODER 0
+#define ENABLE_PCM_U32BE_ENCODER 0
+#define ENABLE_PCM_U32LE_ENCODER 0
+#define ENABLE_ROQ_DPCM_ENCODER 0
+#define ENABLE_ADPCM_4XM_ENCODER 0
+#define ENABLE_ADPCM_ADX_ENCODER 0
+#define ENABLE_ADPCM_CT_ENCODER 0
+#define ENABLE_ADPCM_EA_ENCODER 0
+#define ENABLE_ADPCM_G726_ENCODER 0
+#define ENABLE_ADPCM_IMA_DK3_ENCODER 0
+#define ENABLE_ADPCM_IMA_DK4_ENCODER 0
+#define ENABLE_ADPCM_IMA_QT_ENCODER 0
+#define ENABLE_ADPCM_IMA_SMJPEG_ENCODER 0
+#define ENABLE_ADPCM_IMA_WAV_ENCODER 0
+#define ENABLE_ADPCM_IMA_WS_ENCODER 0
+#define ENABLE_ADPCM_MS_ENCODER 0
+#define ENABLE_ADPCM_SBPRO_2_ENCODER 0
+#define ENABLE_ADPCM_SBPRO_3_ENCODER 0
+#define ENABLE_ADPCM_SBPRO_4_ENCODER 0
+#define ENABLE_ADPCM_SWF_ENCODER 0
+#define ENABLE_ADPCM_XA_ENCODER 0
+#define ENABLE_ADPCM_YAMAHA_ENCODER 0
+#define ENABLE_DVDSUB_ENCODER 0
+#define ENABLE_LIBVORBIS_ENCODER 0
+#define ENABLE_MP3_HEADER_COMPRESS_BSF 0
+#define ENABLE_IMX_DUMP_HEADER_BSF 0
+#define ENABLE_DUMP_EXTRADATA_BSF 0
+#define ENABLE_REMOVE_EXTRADATA_BSF 0
+#define ENABLE_NOISE_BSF 0
+#define ENABLE_MP3_HEADER_DECOMPRESS_BSF 0
+#define ENABLE_MJPEGA_DUMP_HEADER_BSF 0
+#define ENABLE_H264_MP4TOANNEXB_BSF 0
+#define ENABLE_MOV2TEXTSUB_BSF 0
+#define ENABLE_TEXT2MOVSUB_BSF 0
+#define CONFIG_MUXERS 1
+#define CONFIG_MOV_MUXER 1
+#define CONFIG_MP4_MUXER 1
+#define CONFIG_PSP_MUXER 1
+#define CONFIG_TG2_MUXER 1
+#define CONFIG_TGP_MUXER 1
+#define CONFIG_ENCODERS 1
+#define CONFIG_DVVIDEO_ENCODER 1
+#define CONFIG_SNOW_ENCODER 1
+#define CONFIG_DECODERS 1
+#define CONFIG_DVVIDEO_DECODER 1
+#define CONFIG_H263_DECODER 1
+#define CONFIG_MPEG4_DECODER 1
+#define CONFIG_SNOW_DECODER 1
+#define CONFIG_VC1_DECODER 1
+#define CONFIG_WMV2_DECODER 1
+#define CONFIG_WMV3_DECODER 1
+#define CONFIG_MPEGAUDIO_HP 1
+#define CONFIG_ZLIB 1
+#define CONFIG_GPL 1
+#define ENABLE_ARMV4L 0
+#define ENABLE_MLIB 0
+#define ENABLE_SPARC 0
+#define ENABLE_ALPHA 0
+#define ENABLE_MMI 0
+#define ENABLE_SH4 0
+#define ENABLE_BFIN 0
+#define ENABLE_SMALL 0
+#define ENABLE_MLP_PARSER 0
+//****************** SYSTEM *******************
+#ifdef __APPLE__
+#	define CONFIG_DARWIN 1
+#endif
+#if defined(ADM_CPU_X86_32)
+#	define ARCH_X86 1
+#	define ARCH_X86_32 1
+#elif defined(ADM_CPU_X86_64)
+#	define ARCH_X86 1
+#	define ARCH_X86_64 1
+#elif defined(ADM_CPU_PPC)
+#	define ARCH_POWERPC 1
+#ifdef ADM_CPU_ALTIVEC
+#	define HAVE_ALTIVEC 1
+#ifndef __APPLE__
+#	define HAVE_ALTIVEC_H 1
+#endif	// __APPLE__
+#endif	// ADM_CPU_ALTIVEC
+#ifdef ADM_CPU_DCBZL
+#	define HAVE_DCBZL 1
+#endif	// ADM_CPU_DCBZL
+#endif	// ADM_CPU_X86_32
+#ifdef ADM_CPU_MMX2
+#	define HAVE_MMX2 1
+#endif
+#ifdef ADM_CPU_SSSE3
+#	define HAVE_SSSE3 1
+#endif
+#ifdef ARCH_POWERPC
+#	define ENABLE_POWERPC 1
+#else
+#	define ENABLE_POWERPC 0
+#endif
+#ifdef ARCH_X86
+#	define ENABLE_MMX 1
+#	define ENABLE_X86 1
+#	define ENABLE_BSWAP 1
+#	define HAVE_MMX 1
+#	define ENABLE_MMX 1
+#	define HAVE_FAST_UNALIGNED 1
+#	define ENABLE_FAST_UNALIGNED 1
+#	define HAVE_EBP_AVAILABLE 1
+#	define HAVE_EBX_AVAILABLE 1
+#else
+#	define ENABLE_MMX 0
+#endif
+#ifdef ARCH_X86_64
+#	define HAVE_FAST_64BIT 1
+#	define HAVE_EBP_AVAILABLE 1
+#	define ENABLE_EBP_AVAILABLE 1
+#	define HAVE_EBX_AVAILABLE 1
+#	define ENABLE_EBX_AVAILABLE 1
+#	define ENABLE_EBX_AVAILABLE 1
+#	define ENABLE_EBX_AVAILABLE 1
+#	undef HAVE_MMX2
+#	define HAVE_SSE2 1
+#	define HAVE_SSE 1
+#endif
+#ifdef ADM_BIG_ENDIAN
+#	define WORDS_BIGENDIAN 1
+#	define ENABLE_X86_64 1
+#endif
+#define ENABLE_THREADS 1
+#define ENABLE_ENCODERS 1
+#define ENABLE_VIS 0
+#define ENABLE_GRAY 0
+#define HAVE_LRINTF 1
+#define HAVE_LLRINT 1
+#define HAVE_LRINT 1
+#define HAVE_ROUND 1
+#define HAVE_ROUNDF 1
+#define HAVE_THREADS 1
+#define RUNTIME_CPUDETECT 1
+#define restrict __restrict__

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ffconf.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ffconf.c	2008-03-22 00:10:07 UTC (rev 3928)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ffconf.c	2008-03-22 11:46:20 UTC (rev 3929)
@@ -391,7 +391,7 @@
 	ENABLE(SMALL, small);
 #define DECLARE_ENABLE_PARSER(a,b); printf("#define ENABLE_"#a"_PARSER 0\n");
 	DECLARE_ENABLE_PARSER(MLP, wmv3);
-
+        printf("//****************** SYSTEM *******************\n");
 	printf("#ifdef __APPLE__\n");
 	printf("#	define CONFIG_DARWIN 1\n");
 	printf("#endif\n");
@@ -431,9 +431,12 @@
 
 	printf("#ifdef ARCH_X86\n");
 	printf("#	define ENABLE_MMX 1\n");
+	printf("#	define ENABLE_X86 1\n");
 	printf("#	define ENABLE_BSWAP 1\n");
 	printf("#	define HAVE_MMX 1\n");
+	printf("#	define ENABLE_MMX 1\n");
 	printf("#	define HAVE_FAST_UNALIGNED 1\n");
+	printf("#	define ENABLE_FAST_UNALIGNED 1\n");
 	printf("#	define HAVE_EBP_AVAILABLE 1\n");
 	printf("#	define HAVE_EBX_AVAILABLE 1\n");
 	printf("#else\n");
@@ -442,10 +445,23 @@
 
 	printf("#ifdef ARCH_X86_64\n");
 	printf("#	define HAVE_FAST_64BIT 1\n");
+
+	printf("#	define HAVE_EBP_AVAILABLE 1\n");
+	printf("#	define ENABLE_EBP_AVAILABLE 1\n");
+	printf("#	define HAVE_EBX_AVAILABLE 1\n");
+	printf("#	define ENABLE_EBX_AVAILABLE 1\n");
+
+	printf("#	define ENABLE_EBX_AVAILABLE 1\n");
+	printf("#	define ENABLE_EBX_AVAILABLE 1\n");
+	printf("#	undef HAVE_MMX2\n");
+	printf("#	define HAVE_SSE2 1\n");
+	printf("#	define HAVE_SSE 1\n");
+
 	printf("#endif\n");
 
 	printf("#ifdef ADM_BIG_ENDIAN\n");
 	printf("#	define WORDS_BIGENDIAN 1\n");
+	printf("#	define ENABLE_X86_64 1\n");
 	printf("#endif\n");
 
 	printf("#define ENABLE_THREADS 1\n");



From gruntster at mail.berlios.de  Sat Mar 22 13:25:44 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Sat, 22 Mar 2008 13:25:44 +0100
Subject: [Avidemux-svn-commit] r3930 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg
Message-ID: <200803221225.m2MCPixO029428@sheep.berlios.de>

Author: gruntster
Date: 2008-03-22 13:25:42 +0100 (Sat, 22 Mar 2008)
New Revision: 3930

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/config.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ffconf.c
Log:
[ffmpeg] cosmetics

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/config.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/config.h	2008-03-22 11:46:20 UTC (rev 3929)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/config.h	2008-03-22 12:25:42 UTC (rev 3930)
@@ -1,425 +1,412 @@
-#include "ADM_coreConfig.h"
-#define ENABLE_NELLYMOSER_DECODER 1
-#define ENABLE_ADPCM_IMA_AMV_DECODER 1
-#define ENABLE_CINEPAK_DECODER 1
-#define ENABLE_DNXHD_DECODER 1
-#define ENABLE_FOURXM_DECODER 1
-#define ENABLE_FRAPS_DECODER 1
-#define ENABLE_H263_DECODER 1
-#define ENABLE_H264_DECODER 1
-#define ENABLE_INDEO2_DECODER 1
-#define ENABLE_INDEO3_DECODER 1
-#define ENABLE_INTERPLAY_VIDEO_DECODER 1
-#define ENABLE_MPEGVIDEO_DECODER 1
-#define ENABLE_MSVIDEO1_DECODER 1
-#define ENABLE_VC1_DECODER 1
-#define ENABLE_VCR1_DECODER 1
-#define ENABLE_VP5_DECODER 1
-#define ENABLE_VP6_DECODER 1
-#define ENABLE_VP6A_DECODER 1
-#define ENABLE_VP6F_DECODER 1
-#define ENABLE_WMV3_DECODER 1
-#define ENABLE_WMV1_DECODER 1
-#define ENABLE_WMV2_DECODER 1
-#define ENABLE_VP3_DECODER 1
-#define ENABLE_MPEG4_DECODER 1
-#define ENABLE_MSMPEG4V1_DECODER 1
-#define ENABLE_MSMPEG4V2_DECODER 1
-#define ENABLE_MSMPEG4V3_DECODER 1
-#define ENABLE_MJPEGB_DECODER 1
-#define ENABLE_MJPEG_DECODER 1
-#define ENABLE_WMAV2_DECODER 1
-#define ENABLE_DVVIDEO_DECODER 1
-#define ENABLE_HUFFYUV_DECODER 1
-#define ENABLE_FFVHUFF_DECODER 1
-#define ENABLE_SVQ3_DECODER 1
-#define ENABLE_TSCC_DECODER 1
-#define ENABLE_QDM2_DECODER 1
-#define ENABLE_FFV1_DECODER 1
-#define ENABLE_MPEG1VIDEO_DECODER 1
-#define ENABLE_MPEG2VIDEO_DECODER 1
-#define ENABLE_RV10_DECODER 1
-#define ENABLE_RV20_DECODER 1
-#define ENABLE_DVBSUB_DECODER 1
-#define ENABLE_FLV_DECODER 1
-#define ENABLE_SNOW_DECODER 1
-#define ENABLE_AMV_DECODER 1
-#define ENABLE_PCX_DECODER 0
-#define ENABLE_SUNRAST_DECODER 0
-#define ENABLE_VB_DECODER 0
-#define ENABLE_XSUB_DECODER 0
-#define ENABLE_AC3_DECODER 0
-#define ENABLE_APE_DECODER 0
-#define ENABLE_MPC8_DECODER 0
-#define ENABLE_PCM_S16LE_PLANAR_DECODER 0
-#define ENABLE_PCM_ZORK_DECODER 0
-#define ENABLE_ADPCM_EA_R1_DECODER 0
-#define ENABLE_ADPCM_EA_R2_DECODER 0
-#define ENABLE_ADPCM_EA_R3_DECODER 0
-#define ENABLE_ADPCM_EA_XAS_DECODER 0
-#define ENABLE_ADPCM_IMA_EA_EACS_DECODER 0
-#define ENABLE_ADPCM_IMA_EA_SEAD_DECODER 0
-#define ENABLE_AASC_DECODER 0
-#define ENABLE_AVS_DECODER 0
-#define ENABLE_BETHSOFTVID_DECODER 0
-#define ENABLE_C93_DECODER 0
-#define ENABLE_CAVS_DECODER 0
-#define ENABLE_CLJR_DECODER 0
-#define ENABLE_CSCD_DECODER 0
-#define ENABLE_CYUV_DECODER 0
-#define ENABLE_DSICINVIDEO_DECODER 0
-#define ENABLE_DXA_DECODER 0
-#define ENABLE_EIGHTBPS_DECODER 0
-#define ENABLE_FLIC_DECODER 0
-#define ENABLE_IDCIN_DECODER 0
-#define ENABLE_KMVC_DECODER 0
-#define ENABLE_LOCO_DECODER 0
-#define ENABLE_MDEC_DECODER 0
-#define ENABLE_MMVIDEO_DECODER 0
-#define ENABLE_MPEG_XVMC_DECODER 0
-#define ENABLE_MSRLE_DECODER 0
-#define ENABLE_MSZH_DECODER 0
-#define ENABLE_NUV_DECODER 0
-#define ENABLE_PTX_DECODER 0
-#define ENABLE_QDRAW_DECODER 0
-#define ENABLE_QPEG_DECODER 0
-#define ENABLE_RPZA_DECODER 0
-#define ENABLE_SMACKER_DECODER 0
-#define ENABLE_SMC_DECODER 0
-#define ENABLE_SP5X_DECODER 0
-#define ENABLE_THEORA_DECODER 0
-#define ENABLE_THP_DECODER 0
-#define ENABLE_TIERTEXSEQVIDEO_DECODER 0
-#define ENABLE_TRUEMOTION1_DECODER 0
-#define ENABLE_TRUEMOTION2_DECODER 0
-#define ENABLE_TXD_DECODER 0
-#define ENABLE_ULTI_DECODER 0
-#define ENABLE_VMDVIDEO_DECODER 0
-#define ENABLE_VMNC_DECODER 0
-#define ENABLE_VQA_DECODER 0
-#define ENABLE_WNV1_DECODER 0
-#define ENABLE_XAN_WC3_DECODER 0
-#define ENABLE_XL_DECODER 0
-#define ENABLE_MPEG4AAC_DECODER 0
-#define ENABLE_ALAC_DECODER 0
-#define ENABLE_ATRAC3_DECODER 0
-#define ENABLE_COOK_DECODER 0
-#define ENABLE_DCA_DECODER 0
-#define ENABLE_DSICINAUDIO_DECODER 0
-#define ENABLE_IMC_DECODER 0
-#define ENABLE_LIBA52_DECODER 0
-#define ENABLE_LIBFAAD_DECODER 0
-#define ENABLE_MACE3_DECODER 0
-#define ENABLE_MACE6_DECODER 0
-#define ENABLE_MP3_DECODER 0
-#define ENABLE_MP3ADU_DECODER 0
-#define ENABLE_MP3ON4_DECODER 0
-#define ENABLE_MPC7_DECODER 0
-#define ENABLE_RA_144_DECODER 0
-#define ENABLE_RA_288_DECODER 0
-#define ENABLE_SHORTEN_DECODER 0
-#define ENABLE_SMACKAUD_DECODER 0
-#define ENABLE_TRUESPEECH_DECODER 0
-#define ENABLE_TTA_DECODER 0
-#define ENABLE_VMDAUDIO_DECODER 0
-#define ENABLE_WAVPACK_DECODER 0
-#define ENABLE_WS_SND1_DECODER 0
-#define ENABLE_INTERPLAY_DPCM_DECODER 0
-#define ENABLE_SOL_DPCM_DECODER 0
-#define ENABLE_XAN_DPCM_DECODER 0
-#define ENABLE_ADPCM_THP_DECODER 0
-#define ENABLE_ASV1_DECODER 0
-#define ENABLE_ASV2_DECODER 0
-#define ENABLE_BMP_DECODER 0
-#define ENABLE_FLASHSV_DECODER 0
-#define ENABLE_GIF_DECODER 0
-#define ENABLE_H261_DECODER 0
-#define ENABLE_H263I_DECODER 0
-#define ENABLE_JPEGLS_DECODER 0
-#define ENABLE_PNG_DECODER 0
-#define ENABLE_QTRLE_DECODER 0
-#define ENABLE_RAWVIDEO_DECODER 0
-#define ENABLE_ROQ_DECODER 0
-#define ENABLE_SGI_DECODER 0
-#define ENABLE_SVQ1_DECODER 0
-#define ENABLE_TARGA_DECODER 0
-#define ENABLE_TIFF_DECODER 0
-#define ENABLE_ZLIB_DECODER 0
-#define ENABLE_ZMBV_DECODER 0
-#define ENABLE_FLAC_DECODER 0
-#define ENABLE_LIBAMR_NB_DECODER 0
-#define ENABLE_LIBAMR_WB_DECODER 0
-#define ENABLE_LIBGSM_DECODER 0
-#define ENABLE_LIBGSM_MS_DECODER 0
-#define ENABLE_MP2_DECODER 0
-#define ENABLE_SONIC_DECODER 0
-#define ENABLE_VORBIS_DECODER 0
-#define ENABLE_WMAV1_DECODER 0
-#define ENABLE_PCM_ALAW_DECODER 0
-#define ENABLE_PCM_MULAW_DECODER 0
-#define ENABLE_PCM_S8_DECODER 0
-#define ENABLE_PCM_S16BE_DECODER 0
-#define ENABLE_PCM_S16LE_DECODER 0
-#define ENABLE_PCM_S24BE_DECODER 0
-#define ENABLE_PCM_S24DAUD_DECODER 0
-#define ENABLE_PCM_S24LE_DECODER 0
-#define ENABLE_PCM_S32BE_DECODER 0
-#define ENABLE_PCM_S32LE_DECODER 0
-#define ENABLE_PCM_U8_DECODER 0
-#define ENABLE_PCM_U16BE_DECODER 0
-#define ENABLE_PCM_U16LE_DECODER 0
-#define ENABLE_PCM_U24BE_DECODER 0
-#define ENABLE_PCM_U24LE_DECODER 0
-#define ENABLE_PCM_U32BE_DECODER 0
-#define ENABLE_PCM_U32LE_DECODER 0
-#define ENABLE_ROQ_DPCM_DECODER 0
-#define ENABLE_ADPCM_4XM_DECODER 0
-#define ENABLE_ADPCM_ADX_DECODER 0
-#define ENABLE_ADPCM_CT_DECODER 0
-#define ENABLE_ADPCM_EA_DECODER 0
-#define ENABLE_ADPCM_G726_DECODER 0
-#define ENABLE_ADPCM_IMA_DK3_DECODER 0
-#define ENABLE_ADPCM_IMA_DK4_DECODER 0
-#define ENABLE_ADPCM_IMA_QT_DECODER 0
-#define ENABLE_ADPCM_IMA_SMJPEG_DECODER 0
-#define ENABLE_ADPCM_IMA_WAV_DECODER 0
-#define ENABLE_ADPCM_IMA_WS_DECODER 0
-#define ENABLE_ADPCM_MS_DECODER 0
-#define ENABLE_ADPCM_SBPRO_2_DECODER 0
-#define ENABLE_ADPCM_SBPRO_3_DECODER 0
-#define ENABLE_ADPCM_SBPRO_4_DECODER 0
-#define ENABLE_ADPCM_SWF_DECODER 0
-#define ENABLE_ADPCM_XA_DECODER 0
-#define ENABLE_ADPCM_YAMAHA_DECODER 0
-#define ENABLE_DVDSUB_DECODER 0
-#define ENABLE_LIBVORBIS_DECODER 0
-#define ENABLE_H263_PARSER 1
-#define ENABLE_H264_PARSER 1
-#define ENABLE_MPEG4VIDEO_PARSER 1
-#define ENABLE_AAC_PARSER 0
-#define ENABLE_AC3_PARSER 0
-#define ENABLE_CAVSVIDEO_PARSER 0
-#define ENABLE_DCA_PARSER 0
-#define ENABLE_DVBSUB_PARSER 0
-#define ENABLE_DVDSUB_PARSER 0
-#define ENABLE_H261_PARSER 0
-#define ENABLE_MJPEG_PARSER 0
-#define ENABLE_MPEGAUDIO_PARSER 0
-#define ENABLE_MPEGVIDEO_PARSER 0
-#define ENABLE_PNM_PARSER 0
-#define ENABLE_VC1_PARSER 0
-#define ENABLE_MJPEG_ENCODER 1
-#define ENABLE_MSMPEG4V3_ENCODER 1
-#define ENABLE_H263P_ENCODER 1
-#define ENABLE_AC3_ENCODER 1
-#define ENABLE_FFV1_ENCODER 1
-#define ENABLE_FLV1_ENCODER 1
-#define ENABLE_FFVHUFF_ENCODER 1
-#define ENABLE_H263_ENCODER 1
-#define ENABLE_MPEG1VIDEO_ENCODER 1
-#define ENABLE_MPEG2VIDEO_ENCODER 1
-#define ENABLE_MPEG4_ENCODER 1
-#define ENABLE_FLV_ENCODER 1
-#define ENABLE_MP2_ENCODER 1
-#define ENABLE_DVVIDEO_ENCODER 1
-#define ENABLE_HUFFYUV_ENCODER 1
-#define ENABLE_DVBSUB_ENCODER 1
-#define ENABLE_SNOW_ENCODER 1
-#define ENABLE_DNXHD_ENCODER 0
-#define ENABLE_PCM_ZORK_ENCODER 0
-#define ENABLE_ADPCM_IMA_AMV_ENCODER 0
-#define ENABLE_LIBX264_ENCODER 0
-#define ENABLE_LIBXVID_ENCODER 0
-#define ENABLE_LJPEG_ENCODER 0
-#define ENABLE_PAM_ENCODER 0
-#define ENABLE_PBM_ENCODER 0
-#define ENABLE_PGM_ENCODER 0
-#define ENABLE_PGMYUV_ENCODER 0
-#define ENABLE_PPM_ENCODER 0
-#define ENABLE_LIBFAAC_ENCODER 0
-#define ENABLE_LIBMP3LAME_ENCODER 0
-#define ENABLE_LIBTHEORA_ENCODER 0
-#define ENABLE_SONIC_LS_ENCODER 0
-#define ENABLE_ASV1_ENCODER 0
-#define ENABLE_ASV2_ENCODER 0
-#define ENABLE_BMP_ENCODER 0
-#define ENABLE_FLASHSV_ENCODER 0
-#define ENABLE_GIF_ENCODER 0
-#define ENABLE_H261_ENCODER 0
-#define ENABLE_JPEGLS_ENCODER 0
-#define ENABLE_MSMPEG4V1_ENCODER 0
-#define ENABLE_MSMPEG4V2_ENCODER 0
-#define ENABLE_PNG_ENCODER 0
-#define ENABLE_QTRLE_ENCODER 0
-#define ENABLE_RAWVIDEO_ENCODER 0
-#define ENABLE_ROQ_ENCODER 0
-#define ENABLE_RV10_ENCODER 0
-#define ENABLE_RV20_ENCODER 0
-#define ENABLE_SGI_ENCODER 0
-#define ENABLE_SVQ1_ENCODER 0
-#define ENABLE_TARGA_ENCODER 0
-#define ENABLE_TIFF_ENCODER 0
-#define ENABLE_WMV1_ENCODER 0
-#define ENABLE_WMV2_ENCODER 0
-#define ENABLE_ZLIB_ENCODER 0
-#define ENABLE_ZMBV_ENCODER 0
-#define ENABLE_FLAC_ENCODER 0
-#define ENABLE_LIBAMR_NB_ENCODER 0
-#define ENABLE_LIBAMR_WB_ENCODER 0
-#define ENABLE_LIBGSM_ENCODER 0
-#define ENABLE_LIBGSM_MS_ENCODER 0
-#define ENABLE_SONIC_ENCODER 0
-#define ENABLE_VORBIS_ENCODER 0
-#define ENABLE_WMAV1_ENCODER 0
-#define ENABLE_WMAV2_ENCODER 0
-#define ENABLE_PCM_ALAW_ENCODER 0
-#define ENABLE_PCM_MULAW_ENCODER 0
-#define ENABLE_PCM_S8_ENCODER 0
-#define ENABLE_PCM_S16BE_ENCODER 0
-#define ENABLE_PCM_S16LE_ENCODER 0
-#define ENABLE_PCM_S24BE_ENCODER 0
-#define ENABLE_PCM_S24DAUD_ENCODER 0
-#define ENABLE_PCM_S24LE_ENCODER 0
-#define ENABLE_PCM_S32BE_ENCODER 0
-#define ENABLE_PCM_S32LE_ENCODER 0
-#define ENABLE_PCM_U8_ENCODER 0
-#define ENABLE_PCM_U16BE_ENCODER 0
-#define ENABLE_PCM_U16LE_ENCODER 0
-#define ENABLE_PCM_U24BE_ENCODER 0
-#define ENABLE_PCM_U24LE_ENCODER 0
-#define ENABLE_PCM_U32BE_ENCODER 0
-#define ENABLE_PCM_U32LE_ENCODER 0
-#define ENABLE_ROQ_DPCM_ENCODER 0
-#define ENABLE_ADPCM_4XM_ENCODER 0
-#define ENABLE_ADPCM_ADX_ENCODER 0
-#define ENABLE_ADPCM_CT_ENCODER 0
-#define ENABLE_ADPCM_EA_ENCODER 0
-#define ENABLE_ADPCM_G726_ENCODER 0
-#define ENABLE_ADPCM_IMA_DK3_ENCODER 0
-#define ENABLE_ADPCM_IMA_DK4_ENCODER 0
-#define ENABLE_ADPCM_IMA_QT_ENCODER 0
-#define ENABLE_ADPCM_IMA_SMJPEG_ENCODER 0
-#define ENABLE_ADPCM_IMA_WAV_ENCODER 0
-#define ENABLE_ADPCM_IMA_WS_ENCODER 0
-#define ENABLE_ADPCM_MS_ENCODER 0
-#define ENABLE_ADPCM_SBPRO_2_ENCODER 0
-#define ENABLE_ADPCM_SBPRO_3_ENCODER 0
-#define ENABLE_ADPCM_SBPRO_4_ENCODER 0
-#define ENABLE_ADPCM_SWF_ENCODER 0
-#define ENABLE_ADPCM_XA_ENCODER 0
-#define ENABLE_ADPCM_YAMAHA_ENCODER 0
-#define ENABLE_DVDSUB_ENCODER 0
-#define ENABLE_LIBVORBIS_ENCODER 0
-#define ENABLE_MP3_HEADER_COMPRESS_BSF 0
-#define ENABLE_IMX_DUMP_HEADER_BSF 0
-#define ENABLE_DUMP_EXTRADATA_BSF 0
-#define ENABLE_REMOVE_EXTRADATA_BSF 0
-#define ENABLE_NOISE_BSF 0
-#define ENABLE_MP3_HEADER_DECOMPRESS_BSF 0
-#define ENABLE_MJPEGA_DUMP_HEADER_BSF 0
-#define ENABLE_H264_MP4TOANNEXB_BSF 0
-#define ENABLE_MOV2TEXTSUB_BSF 0
-#define ENABLE_TEXT2MOVSUB_BSF 0
-#define CONFIG_MUXERS 1
-#define CONFIG_MOV_MUXER 1
-#define CONFIG_MP4_MUXER 1
-#define CONFIG_PSP_MUXER 1
-#define CONFIG_TG2_MUXER 1
-#define CONFIG_TGP_MUXER 1
-#define CONFIG_ENCODERS 1
-#define CONFIG_DVVIDEO_ENCODER 1
-#define CONFIG_SNOW_ENCODER 1
-#define CONFIG_DECODERS 1
-#define CONFIG_DVVIDEO_DECODER 1
-#define CONFIG_H263_DECODER 1
-#define CONFIG_MPEG4_DECODER 1
-#define CONFIG_SNOW_DECODER 1
-#define CONFIG_VC1_DECODER 1
-#define CONFIG_WMV2_DECODER 1
-#define CONFIG_WMV3_DECODER 1
-#define CONFIG_MPEGAUDIO_HP 1
-#define CONFIG_ZLIB 1
-#define CONFIG_GPL 1
-#define ENABLE_ARMV4L 0
-#define ENABLE_MLIB 0
-#define ENABLE_SPARC 0
-#define ENABLE_ALPHA 0
-#define ENABLE_MMI 0
-#define ENABLE_SH4 0
-#define ENABLE_BFIN 0
-#define ENABLE_SMALL 0
-#define ENABLE_MLP_PARSER 0
-//****************** SYSTEM *******************
-#ifdef __APPLE__
-#	define CONFIG_DARWIN 1
-#endif
-#if defined(ADM_CPU_X86_32)
-#	define ARCH_X86 1
-#	define ARCH_X86_32 1
-#elif defined(ADM_CPU_X86_64)
-#	define ARCH_X86 1
-#	define ARCH_X86_64 1
-#elif defined(ADM_CPU_PPC)
-#	define ARCH_POWERPC 1
-#ifdef ADM_CPU_ALTIVEC
-#	define HAVE_ALTIVEC 1
-#ifndef __APPLE__
-#	define HAVE_ALTIVEC_H 1
-#endif	// __APPLE__
-#endif	// ADM_CPU_ALTIVEC
-#ifdef ADM_CPU_DCBZL
-#	define HAVE_DCBZL 1
-#endif	// ADM_CPU_DCBZL
-#endif	// ADM_CPU_X86_32
-#ifdef ADM_CPU_MMX2
-#	define HAVE_MMX2 1
-#endif
-#ifdef ADM_CPU_SSSE3
-#	define HAVE_SSSE3 1
-#endif
-#ifdef ARCH_POWERPC
-#	define ENABLE_POWERPC 1
-#else
-#	define ENABLE_POWERPC 0
-#endif
-#ifdef ARCH_X86
-#	define ENABLE_MMX 1
-#	define ENABLE_X86 1
-#	define ENABLE_BSWAP 1
-#	define HAVE_MMX 1
-#	define ENABLE_MMX 1
-#	define HAVE_FAST_UNALIGNED 1
-#	define ENABLE_FAST_UNALIGNED 1
-#	define HAVE_EBP_AVAILABLE 1
-#	define HAVE_EBX_AVAILABLE 1
-#else
-#	define ENABLE_MMX 0
-#endif
-#ifdef ARCH_X86_64
-#	define HAVE_FAST_64BIT 1
-#	define HAVE_EBP_AVAILABLE 1
-#	define ENABLE_EBP_AVAILABLE 1
-#	define HAVE_EBX_AVAILABLE 1
-#	define ENABLE_EBX_AVAILABLE 1
-#	define ENABLE_EBX_AVAILABLE 1
-#	define ENABLE_EBX_AVAILABLE 1
-#	undef HAVE_MMX2
-#	define HAVE_SSE2 1
-#	define HAVE_SSE 1
-#endif
-#ifdef ADM_BIG_ENDIAN
-#	define WORDS_BIGENDIAN 1
-#	define ENABLE_X86_64 1
-#endif
-#define ENABLE_THREADS 1
-#define ENABLE_ENCODERS 1
-#define ENABLE_VIS 0
-#define ENABLE_GRAY 0
-#define HAVE_LRINTF 1
-#define HAVE_LLRINT 1
-#define HAVE_LRINT 1
-#define HAVE_ROUND 1
-#define HAVE_ROUNDF 1
-#define HAVE_THREADS 1
-#define RUNTIME_CPUDETECT 1
-#define restrict __restrict__
+#include "ADM_coreConfig.h"
+#define ENABLE_NELLYMOSER_DECODER 1
+#define ENABLE_ADPCM_IMA_AMV_DECODER 1
+#define ENABLE_CINEPAK_DECODER 1
+#define ENABLE_DNXHD_DECODER 1
+#define ENABLE_FOURXM_DECODER 1
+#define ENABLE_FRAPS_DECODER 1
+#define ENABLE_H263_DECODER 1
+#define ENABLE_H264_DECODER 1
+#define ENABLE_INDEO2_DECODER 1
+#define ENABLE_INDEO3_DECODER 1
+#define ENABLE_INTERPLAY_VIDEO_DECODER 1
+#define ENABLE_MPEGVIDEO_DECODER 1
+#define ENABLE_MSVIDEO1_DECODER 1
+#define ENABLE_VC1_DECODER 1
+#define ENABLE_VCR1_DECODER 1
+#define ENABLE_VP5_DECODER 1
+#define ENABLE_VP6_DECODER 1
+#define ENABLE_VP6A_DECODER 1
+#define ENABLE_VP6F_DECODER 1
+#define ENABLE_WMV3_DECODER 1
+#define ENABLE_WMV1_DECODER 1
+#define ENABLE_WMV2_DECODER 1
+#define ENABLE_VP3_DECODER 1
+#define ENABLE_MPEG4_DECODER 1
+#define ENABLE_MSMPEG4V1_DECODER 1
+#define ENABLE_MSMPEG4V2_DECODER 1
+#define ENABLE_MSMPEG4V3_DECODER 1
+#define ENABLE_MJPEGB_DECODER 1
+#define ENABLE_MJPEG_DECODER 1
+#define ENABLE_WMAV2_DECODER 1
+#define ENABLE_DVVIDEO_DECODER 1
+#define ENABLE_HUFFYUV_DECODER 1
+#define ENABLE_FFVHUFF_DECODER 1
+#define ENABLE_SVQ3_DECODER 1
+#define ENABLE_TSCC_DECODER 1
+#define ENABLE_QDM2_DECODER 1
+#define ENABLE_FFV1_DECODER 1
+#define ENABLE_MPEG1VIDEO_DECODER 1
+#define ENABLE_MPEG2VIDEO_DECODER 1
+#define ENABLE_RV10_DECODER 1
+#define ENABLE_RV20_DECODER 1
+#define ENABLE_DVBSUB_DECODER 1
+#define ENABLE_FLV_DECODER 1
+#define ENABLE_SNOW_DECODER 1
+#define ENABLE_AMV_DECODER 1
+#define ENABLE_PCX_DECODER 0
+#define ENABLE_SUNRAST_DECODER 0
+#define ENABLE_VB_DECODER 0
+#define ENABLE_XSUB_DECODER 0
+#define ENABLE_AC3_DECODER 0
+#define ENABLE_APE_DECODER 0
+#define ENABLE_MPC8_DECODER 0
+#define ENABLE_PCM_S16LE_PLANAR_DECODER 0
+#define ENABLE_PCM_ZORK_DECODER 0
+#define ENABLE_ADPCM_EA_R1_DECODER 0
+#define ENABLE_ADPCM_EA_R2_DECODER 0
+#define ENABLE_ADPCM_EA_R3_DECODER 0
+#define ENABLE_ADPCM_EA_XAS_DECODER 0
+#define ENABLE_ADPCM_IMA_EA_EACS_DECODER 0
+#define ENABLE_ADPCM_IMA_EA_SEAD_DECODER 0
+#define ENABLE_AASC_DECODER 0
+#define ENABLE_AVS_DECODER 0
+#define ENABLE_BETHSOFTVID_DECODER 0
+#define ENABLE_C93_DECODER 0
+#define ENABLE_CAVS_DECODER 0
+#define ENABLE_CLJR_DECODER 0
+#define ENABLE_CSCD_DECODER 0
+#define ENABLE_CYUV_DECODER 0
+#define ENABLE_DSICINVIDEO_DECODER 0
+#define ENABLE_DXA_DECODER 0
+#define ENABLE_EIGHTBPS_DECODER 0
+#define ENABLE_FLIC_DECODER 0
+#define ENABLE_IDCIN_DECODER 0
+#define ENABLE_KMVC_DECODER 0
+#define ENABLE_LOCO_DECODER 0
+#define ENABLE_MDEC_DECODER 0
+#define ENABLE_MMVIDEO_DECODER 0
+#define ENABLE_MPEG_XVMC_DECODER 0
+#define ENABLE_MSRLE_DECODER 0
+#define ENABLE_MSZH_DECODER 0
+#define ENABLE_NUV_DECODER 0
+#define ENABLE_PTX_DECODER 0
+#define ENABLE_QDRAW_DECODER 0
+#define ENABLE_QPEG_DECODER 0
+#define ENABLE_RPZA_DECODER 0
+#define ENABLE_SMACKER_DECODER 0
+#define ENABLE_SMC_DECODER 0
+#define ENABLE_SP5X_DECODER 0
+#define ENABLE_THEORA_DECODER 0
+#define ENABLE_THP_DECODER 0
+#define ENABLE_TIERTEXSEQVIDEO_DECODER 0
+#define ENABLE_TRUEMOTION1_DECODER 0
+#define ENABLE_TRUEMOTION2_DECODER 0
+#define ENABLE_TXD_DECODER 0
+#define ENABLE_ULTI_DECODER 0
+#define ENABLE_VMDVIDEO_DECODER 0
+#define ENABLE_VMNC_DECODER 0
+#define ENABLE_VQA_DECODER 0
+#define ENABLE_WNV1_DECODER 0
+#define ENABLE_XAN_WC3_DECODER 0
+#define ENABLE_XL_DECODER 0
+#define ENABLE_MPEG4AAC_DECODER 0
+#define ENABLE_ALAC_DECODER 0
+#define ENABLE_ATRAC3_DECODER 0
+#define ENABLE_COOK_DECODER 0
+#define ENABLE_DCA_DECODER 0
+#define ENABLE_DSICINAUDIO_DECODER 0
+#define ENABLE_IMC_DECODER 0
+#define ENABLE_LIBA52_DECODER 0
+#define ENABLE_LIBFAAD_DECODER 0
+#define ENABLE_MACE3_DECODER 0
+#define ENABLE_MACE6_DECODER 0
+#define ENABLE_MP3_DECODER 0
+#define ENABLE_MP3ADU_DECODER 0
+#define ENABLE_MP3ON4_DECODER 0
+#define ENABLE_MPC7_DECODER 0
+#define ENABLE_RA_144_DECODER 0
+#define ENABLE_RA_288_DECODER 0
+#define ENABLE_SHORTEN_DECODER 0
+#define ENABLE_SMACKAUD_DECODER 0
+#define ENABLE_TRUESPEECH_DECODER 0
+#define ENABLE_TTA_DECODER 0
+#define ENABLE_VMDAUDIO_DECODER 0
+#define ENABLE_WAVPACK_DECODER 0
+#define ENABLE_WS_SND1_DECODER 0
+#define ENABLE_INTERPLAY_DPCM_DECODER 0
+#define ENABLE_SOL_DPCM_DECODER 0
+#define ENABLE_XAN_DPCM_DECODER 0
+#define ENABLE_ADPCM_THP_DECODER 0
+#define ENABLE_ASV1_DECODER 0
+#define ENABLE_ASV2_DECODER 0
+#define ENABLE_BMP_DECODER 0
+#define ENABLE_FLASHSV_DECODER 0
+#define ENABLE_GIF_DECODER 0
+#define ENABLE_H261_DECODER 0
+#define ENABLE_H263I_DECODER 0
+#define ENABLE_JPEGLS_DECODER 0
+#define ENABLE_PNG_DECODER 0
+#define ENABLE_QTRLE_DECODER 0
+#define ENABLE_RAWVIDEO_DECODER 0
+#define ENABLE_ROQ_DECODER 0
+#define ENABLE_SGI_DECODER 0
+#define ENABLE_SVQ1_DECODER 0
+#define ENABLE_TARGA_DECODER 0
+#define ENABLE_TIFF_DECODER 0
+#define ENABLE_ZLIB_DECODER 0
+#define ENABLE_ZMBV_DECODER 0
+#define ENABLE_FLAC_DECODER 0
+#define ENABLE_LIBAMR_NB_DECODER 0
+#define ENABLE_LIBAMR_WB_DECODER 0
+#define ENABLE_LIBGSM_DECODER 0
+#define ENABLE_LIBGSM_MS_DECODER 0
+#define ENABLE_MP2_DECODER 0
+#define ENABLE_SONIC_DECODER 0
+#define ENABLE_VORBIS_DECODER 0
+#define ENABLE_WMAV1_DECODER 0
+#define ENABLE_PCM_ALAW_DECODER 0
+#define ENABLE_PCM_MULAW_DECODER 0
+#define ENABLE_PCM_S8_DECODER 0
+#define ENABLE_PCM_S16BE_DECODER 0
+#define ENABLE_PCM_S16LE_DECODER 0
+#define ENABLE_PCM_S24BE_DECODER 0
+#define ENABLE_PCM_S24DAUD_DECODER 0
+#define ENABLE_PCM_S24LE_DECODER 0
+#define ENABLE_PCM_S32BE_DECODER 0
+#define ENABLE_PCM_S32LE_DECODER 0
+#define ENABLE_PCM_U8_DECODER 0
+#define ENABLE_PCM_U16BE_DECODER 0
+#define ENABLE_PCM_U16LE_DECODER 0
+#define ENABLE_PCM_U24BE_DECODER 0
+#define ENABLE_PCM_U24LE_DECODER 0
+#define ENABLE_PCM_U32BE_DECODER 0
+#define ENABLE_PCM_U32LE_DECODER 0
+#define ENABLE_ROQ_DPCM_DECODER 0
+#define ENABLE_ADPCM_4XM_DECODER 0
+#define ENABLE_ADPCM_ADX_DECODER 0
+#define ENABLE_ADPCM_CT_DECODER 0
+#define ENABLE_ADPCM_EA_DECODER 0
+#define ENABLE_ADPCM_G726_DECODER 0
+#define ENABLE_ADPCM_IMA_DK3_DECODER 0
+#define ENABLE_ADPCM_IMA_DK4_DECODER 0
+#define ENABLE_ADPCM_IMA_QT_DECODER 0
+#define ENABLE_ADPCM_IMA_SMJPEG_DECODER 0
+#define ENABLE_ADPCM_IMA_WAV_DECODER 0
+#define ENABLE_ADPCM_IMA_WS_DECODER 0
+#define ENABLE_ADPCM_MS_DECODER 0
+#define ENABLE_ADPCM_SBPRO_2_DECODER 0
+#define ENABLE_ADPCM_SBPRO_3_DECODER 0
+#define ENABLE_ADPCM_SBPRO_4_DECODER 0
+#define ENABLE_ADPCM_SWF_DECODER 0
+#define ENABLE_ADPCM_XA_DECODER 0
+#define ENABLE_ADPCM_YAMAHA_DECODER 0
+#define ENABLE_DVDSUB_DECODER 0
+#define ENABLE_LIBVORBIS_DECODER 0
+#define ENABLE_H263_PARSER 1
+#define ENABLE_H264_PARSER 1
+#define ENABLE_MPEG4VIDEO_PARSER 1
+#define ENABLE_AAC_PARSER 0
+#define ENABLE_AC3_PARSER 0
+#define ENABLE_CAVSVIDEO_PARSER 0
+#define ENABLE_DCA_PARSER 0
+#define ENABLE_DVBSUB_PARSER 0
+#define ENABLE_DVDSUB_PARSER 0
+#define ENABLE_H261_PARSER 0
+#define ENABLE_MJPEG_PARSER 0
+#define ENABLE_MPEGAUDIO_PARSER 0
+#define ENABLE_MPEGVIDEO_PARSER 0
+#define ENABLE_PNM_PARSER 0
+#define ENABLE_VC1_PARSER 0
+#define ENABLE_MJPEG_ENCODER 1
+#define ENABLE_MSMPEG4V3_ENCODER 1
+#define ENABLE_H263P_ENCODER 1
+#define ENABLE_AC3_ENCODER 1
+#define ENABLE_FFV1_ENCODER 1
+#define ENABLE_FLV1_ENCODER 1
+#define ENABLE_FFVHUFF_ENCODER 1
+#define ENABLE_H263_ENCODER 1
+#define ENABLE_MPEG1VIDEO_ENCODER 1
+#define ENABLE_MPEG2VIDEO_ENCODER 1
+#define ENABLE_MPEG4_ENCODER 1
+#define ENABLE_FLV_ENCODER 1
+#define ENABLE_MP2_ENCODER 1
+#define ENABLE_DVVIDEO_ENCODER 1
+#define ENABLE_HUFFYUV_ENCODER 1
+#define ENABLE_DVBSUB_ENCODER 1
+#define ENABLE_SNOW_ENCODER 1
+#define ENABLE_DNXHD_ENCODER 0
+#define ENABLE_PCM_ZORK_ENCODER 0
+#define ENABLE_ADPCM_IMA_AMV_ENCODER 0
+#define ENABLE_LIBX264_ENCODER 0
+#define ENABLE_LIBXVID_ENCODER 0
+#define ENABLE_LJPEG_ENCODER 0
+#define ENABLE_PAM_ENCODER 0
+#define ENABLE_PBM_ENCODER 0
+#define ENABLE_PGM_ENCODER 0
+#define ENABLE_PGMYUV_ENCODER 0
+#define ENABLE_PPM_ENCODER 0
+#define ENABLE_LIBFAAC_ENCODER 0
+#define ENABLE_LIBMP3LAME_ENCODER 0
+#define ENABLE_LIBTHEORA_ENCODER 0
+#define ENABLE_SONIC_LS_ENCODER 0
+#define ENABLE_ASV1_ENCODER 0
+#define ENABLE_ASV2_ENCODER 0
+#define ENABLE_BMP_ENCODER 0
+#define ENABLE_FLASHSV_ENCODER 0
+#define ENABLE_GIF_ENCODER 0
+#define ENABLE_H261_ENCODER 0
+#define ENABLE_JPEGLS_ENCODER 0
+#define ENABLE_MSMPEG4V1_ENCODER 0
+#define ENABLE_MSMPEG4V2_ENCODER 0
+#define ENABLE_PNG_ENCODER 0
+#define ENABLE_QTRLE_ENCODER 0
+#define ENABLE_RAWVIDEO_ENCODER 0
+#define ENABLE_ROQ_ENCODER 0
+#define ENABLE_RV10_ENCODER 0
+#define ENABLE_RV20_ENCODER 0
+#define ENABLE_SGI_ENCODER 0
+#define ENABLE_SVQ1_ENCODER 0
+#define ENABLE_TARGA_ENCODER 0
+#define ENABLE_TIFF_ENCODER 0
+#define ENABLE_WMV1_ENCODER 0
+#define ENABLE_WMV2_ENCODER 0
+#define ENABLE_ZLIB_ENCODER 0
+#define ENABLE_ZMBV_ENCODER 0
+#define ENABLE_FLAC_ENCODER 0
+#define ENABLE_LIBAMR_NB_ENCODER 0
+#define ENABLE_LIBAMR_WB_ENCODER 0
+#define ENABLE_LIBGSM_ENCODER 0
+#define ENABLE_LIBGSM_MS_ENCODER 0
+#define ENABLE_SONIC_ENCODER 0
+#define ENABLE_VORBIS_ENCODER 0
+#define ENABLE_WMAV1_ENCODER 0
+#define ENABLE_WMAV2_ENCODER 0
+#define ENABLE_PCM_ALAW_ENCODER 0
+#define ENABLE_PCM_MULAW_ENCODER 0
+#define ENABLE_PCM_S8_ENCODER 0
+#define ENABLE_PCM_S16BE_ENCODER 0
+#define ENABLE_PCM_S16LE_ENCODER 0
+#define ENABLE_PCM_S24BE_ENCODER 0
+#define ENABLE_PCM_S24DAUD_ENCODER 0
+#define ENABLE_PCM_S24LE_ENCODER 0
+#define ENABLE_PCM_S32BE_ENCODER 0
+#define ENABLE_PCM_S32LE_ENCODER 0
+#define ENABLE_PCM_U8_ENCODER 0
+#define ENABLE_PCM_U16BE_ENCODER 0
+#define ENABLE_PCM_U16LE_ENCODER 0
+#define ENABLE_PCM_U24BE_ENCODER 0
+#define ENABLE_PCM_U24LE_ENCODER 0
+#define ENABLE_PCM_U32BE_ENCODER 0
+#define ENABLE_PCM_U32LE_ENCODER 0
+#define ENABLE_ROQ_DPCM_ENCODER 0
+#define ENABLE_ADPCM_4XM_ENCODER 0
+#define ENABLE_ADPCM_ADX_ENCODER 0
+#define ENABLE_ADPCM_CT_ENCODER 0
+#define ENABLE_ADPCM_EA_ENCODER 0
+#define ENABLE_ADPCM_G726_ENCODER 0
+#define ENABLE_ADPCM_IMA_DK3_ENCODER 0
+#define ENABLE_ADPCM_IMA_DK4_ENCODER 0
+#define ENABLE_ADPCM_IMA_QT_ENCODER 0
+#define ENABLE_ADPCM_IMA_SMJPEG_ENCODER 0
+#define ENABLE_ADPCM_IMA_WAV_ENCODER 0
+#define ENABLE_ADPCM_IMA_WS_ENCODER 0
+#define ENABLE_ADPCM_MS_ENCODER 0
+#define ENABLE_ADPCM_SBPRO_2_ENCODER 0
+#define ENABLE_ADPCM_SBPRO_3_ENCODER 0
+#define ENABLE_ADPCM_SBPRO_4_ENCODER 0
+#define ENABLE_ADPCM_SWF_ENCODER 0
+#define ENABLE_ADPCM_XA_ENCODER 0
+#define ENABLE_ADPCM_YAMAHA_ENCODER 0
+#define ENABLE_DVDSUB_ENCODER 0
+#define ENABLE_LIBVORBIS_ENCODER 0
+#define ENABLE_MP3_HEADER_COMPRESS_BSF 0
+#define ENABLE_IMX_DUMP_HEADER_BSF 0
+#define ENABLE_DUMP_EXTRADATA_BSF 0
+#define ENABLE_REMOVE_EXTRADATA_BSF 0
+#define ENABLE_NOISE_BSF 0
+#define ENABLE_MP3_HEADER_DECOMPRESS_BSF 0
+#define ENABLE_MJPEGA_DUMP_HEADER_BSF 0
+#define ENABLE_H264_MP4TOANNEXB_BSF 0
+#define ENABLE_MOV2TEXTSUB_BSF 0
+#define ENABLE_TEXT2MOVSUB_BSF 0
+#define CONFIG_MUXERS 1
+#define CONFIG_MOV_MUXER 1
+#define CONFIG_MP4_MUXER 1
+#define CONFIG_PSP_MUXER 1
+#define CONFIG_TG2_MUXER 1
+#define CONFIG_TGP_MUXER 1
+#define CONFIG_ENCODERS 1
+#define CONFIG_DVVIDEO_ENCODER 1
+#define CONFIG_SNOW_ENCODER 1
+#define CONFIG_DECODERS 1
+#define CONFIG_DVVIDEO_DECODER 1
+#define CONFIG_H263_DECODER 1
+#define CONFIG_MPEG4_DECODER 1
+#define CONFIG_SNOW_DECODER 1
+#define CONFIG_VC1_DECODER 1
+#define CONFIG_WMV2_DECODER 1
+#define CONFIG_WMV3_DECODER 1
+#define CONFIG_MPEGAUDIO_HP 1
+#define CONFIG_ZLIB 1
+#define CONFIG_GPL 1
+#define ENABLE_ARMV4L 0
+#define ENABLE_MLIB 0
+#define ENABLE_SPARC 0
+#define ENABLE_ALPHA 0
+#define ENABLE_MMI 0
+#define ENABLE_SH4 0
+#define ENABLE_BFIN 0
+#define ENABLE_SMALL 0
+#define ENABLE_MLP_PARSER 0
+//****************** SYSTEM *******************
+#ifdef __APPLE__
+#	define CONFIG_DARWIN 1
+#endif
+#if defined(ADM_CPU_X86_32)
+#	define ARCH_X86 1
+#	define ARCH_X86_32 1
+#elif defined(ADM_CPU_X86_64)
+#	define ARCH_X86 1
+#	define ARCH_X86_64 1
+#elif defined(ADM_CPU_PPC)
+#	define ARCH_POWERPC 1
+#ifdef ADM_CPU_ALTIVEC
+#	define HAVE_ALTIVEC 1
+#ifndef __APPLE__
+#	define HAVE_ALTIVEC_H 1
+#endif	// __APPLE__
+#endif	// ADM_CPU_ALTIVEC
+#ifdef ADM_CPU_DCBZL
+#	define HAVE_DCBZL 1
+#endif	// ADM_CPU_DCBZL
+#endif	// ADM_CPU_X86_32
+#if defined(ADM_CPU_X86_32) && defined(ADM_CPU_MMX2)
+#	define HAVE_MMX2 1
+#endif
+#ifdef ADM_CPU_SSSE3
+#	define HAVE_SSSE3 1
+#endif
+#ifdef ARCH_POWERPC
+#	define ENABLE_POWERPC 1
+#else
+#	define ENABLE_POWERPC 0
+#endif
+#ifdef ARCH_X86
+#	define ENABLE_BSWAP 1
+#	define HAVE_MMX 1
+#	define ENABLE_MMX 1
+#	define HAVE_FAST_UNALIGNED 1
+#	define HAVE_EBP_AVAILABLE 1
+#	define HAVE_EBX_AVAILABLE 1
+#else
+#	define ENABLE_MMX 0
+#endif
+#ifdef ARCH_X86_64
+#	define HAVE_FAST_64BIT 1
+#endif
+#ifdef ADM_BIG_ENDIAN
+#	define WORDS_BIGENDIAN 1
+#endif
+#define ENABLE_THREADS 1
+#define ENABLE_ENCODERS 1
+#define ENABLE_VIS 0
+#define ENABLE_GRAY 0
+#define HAVE_LRINTF 1
+#define HAVE_LLRINT 1
+#define HAVE_LRINT 1
+#define HAVE_ROUND 1
+#define HAVE_ROUNDF 1
+#define HAVE_THREADS 1
+#define RUNTIME_CPUDETECT 1
+#define restrict __restrict__

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ffconf.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ffconf.c	2008-03-22 11:46:20 UTC (rev 3929)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ffconf.c	2008-03-22 12:25:42 UTC (rev 3930)
@@ -415,7 +415,7 @@
 	printf("#endif	// ADM_CPU_DCBZL\n");
 	printf("#endif	// ADM_CPU_X86_32\n");
 
-	printf("#ifdef ADM_CPU_MMX2\n");
+	printf("#if defined(ADM_CPU_X86_32) && defined(ADM_CPU_MMX2)\n");
 	printf("#	define HAVE_MMX2 1\n");
 	printf("#endif\n");
 
@@ -430,13 +430,10 @@
 	printf("#endif\n");
 
 	printf("#ifdef ARCH_X86\n");
-	printf("#	define ENABLE_MMX 1\n");
-	printf("#	define ENABLE_X86 1\n");
 	printf("#	define ENABLE_BSWAP 1\n");
 	printf("#	define HAVE_MMX 1\n");
 	printf("#	define ENABLE_MMX 1\n");
 	printf("#	define HAVE_FAST_UNALIGNED 1\n");
-	printf("#	define ENABLE_FAST_UNALIGNED 1\n");
 	printf("#	define HAVE_EBP_AVAILABLE 1\n");
 	printf("#	define HAVE_EBX_AVAILABLE 1\n");
 	printf("#else\n");
@@ -445,23 +442,10 @@
 
 	printf("#ifdef ARCH_X86_64\n");
 	printf("#	define HAVE_FAST_64BIT 1\n");
-
-	printf("#	define HAVE_EBP_AVAILABLE 1\n");
-	printf("#	define ENABLE_EBP_AVAILABLE 1\n");
-	printf("#	define HAVE_EBX_AVAILABLE 1\n");
-	printf("#	define ENABLE_EBX_AVAILABLE 1\n");
-
-	printf("#	define ENABLE_EBX_AVAILABLE 1\n");
-	printf("#	define ENABLE_EBX_AVAILABLE 1\n");
-	printf("#	undef HAVE_MMX2\n");
-	printf("#	define HAVE_SSE2 1\n");
-	printf("#	define HAVE_SSE 1\n");
-
 	printf("#endif\n");
 
 	printf("#ifdef ADM_BIG_ENDIAN\n");
 	printf("#	define WORDS_BIGENDIAN 1\n");
-	printf("#	define ENABLE_X86_64 1\n");
 	printf("#endif\n");
 
 	printf("#define ENABLE_THREADS 1\n");



From gruntster at mail.berlios.de  Mon Mar 24 21:04:40 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Mon, 24 Mar 2008 21:04:40 +0100
Subject: [Avidemux-svn-commit] r3931 -
	branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory
Message-ID: <200803242004.m2OK4eYk030875@sheep.berlios.de>

Author: gruntster
Date: 2008-03-24 21:04:31 +0100 (Mon, 24 Mar 2008)
New Revision: 3931

Modified:
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_dialogFactory.cpp
Log:
[Qt4] add expanding spacer to dialogFactory tabs

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_dialogFactory.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_dialogFactory.cpp	2008-03-22 12:25:42 UTC (rev 3930)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_dialogFactory.cpp	2008-03-24 20:04:31 UTC (rev 3931)
@@ -181,6 +181,7 @@
 
   QWidget *wid=new QWidget;
   QGridLayout *layout=new QGridLayout(wid);
+  QSpacerItem *spacerItem = new QSpacerItem(20, 40, QSizePolicy::Minimum, QSizePolicy::Expanding);
   
   /* First compute the size of our window */
   int vsize=0;
@@ -204,5 +205,7 @@
   {
     tab->dias[i]->finalize(); 
   }
+
+  layout->addItem(spacerItem, v, 0);
 }
 //EOF



From gruntster at mail.berlios.de  Tue Mar 25 01:17:34 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Tue, 25 Mar 2008 01:17:34 +0100
Subject: [Avidemux-svn-commit] r3932 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavutil
Message-ID: <200803250017.m2P0HYkm019055@sheep.berlios.de>

Author: gruntster
Date: 2008-03-25 01:17:33 +0100 (Tue, 25 Mar 2008)
New Revision: 3932

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavutil/CMakeLists.txt
Log:
[lavutil] remove conflicting main function

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavutil/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavutil/CMakeLists.txt	2008-03-24 20:04:31 UTC (rev 3931)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavutil/CMakeLists.txt	2008-03-25 00:17:33 UTC (rev 3932)
@@ -18,7 +18,6 @@
 rational.c
 rc4.c
 sha1.c
-softfloat.c
 string.c
 tree.c
 )



From mean at mail.berlios.de  Wed Mar 26 20:26:26 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Wed, 26 Mar 2008 20:26:26 +0100
Subject: [Avidemux-svn-commit] r3933 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg
Message-ID: <200803261926.m2QJQQBO011406@sheep.berlios.de>

Author: mean
Date: 2008-03-26 20:26:26 +0100 (Wed, 26 Mar 2008)
New Revision: 3933

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/config.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ffconf.c
Log:
Conflicts:

	avidemux/ADM_libraries/ADM_ffmpeg/config.h
	avidemux/ADM_libraries/ADM_ffmpeg/ffconf.c

Conflicts:

	avidemux/ADM_libraries/ADM_ffmpeg/config.h
	avidemux/ADM_libraries/ADM_ffmpeg/ffconf.c


Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/config.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/config.h	2008-03-25 00:17:33 UTC (rev 3932)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/config.h	2008-03-26 19:26:26 UTC (rev 3933)
@@ -1,3 +1,4 @@
+<<<<<<< HEAD:avidemux/ADM_libraries/ADM_ffmpeg/config.h
 #include "ADM_coreConfig.h"
 #define ENABLE_NELLYMOSER_DECODER 1
 #define ENABLE_ADPCM_IMA_AMV_DECODER 1
@@ -410,3 +411,430 @@
 #define HAVE_THREADS 1
 #define RUNTIME_CPUDETECT 1
 #define restrict __restrict__
+=======
+#include "ADM_coreConfig.h"
+#define ENABLE_NELLYMOSER_DECODER 1
+#define ENABLE_ADPCM_IMA_AMV_DECODER 1
+#define ENABLE_CINEPAK_DECODER 1
+#define ENABLE_DNXHD_DECODER 1
+#define ENABLE_FOURXM_DECODER 1
+#define ENABLE_FRAPS_DECODER 1
+#define ENABLE_H263_DECODER 1
+#define ENABLE_H264_DECODER 1
+#define ENABLE_INDEO2_DECODER 1
+#define ENABLE_INDEO3_DECODER 1
+#define ENABLE_INTERPLAY_VIDEO_DECODER 1
+#define ENABLE_MPEGVIDEO_DECODER 1
+#define ENABLE_MSVIDEO1_DECODER 1
+#define ENABLE_VC1_DECODER 1
+#define ENABLE_VCR1_DECODER 1
+#define ENABLE_VP5_DECODER 1
+#define ENABLE_VP6_DECODER 1
+#define ENABLE_VP6A_DECODER 1
+#define ENABLE_VP6F_DECODER 1
+#define ENABLE_WMV3_DECODER 1
+#define ENABLE_WMV1_DECODER 1
+#define ENABLE_WMV2_DECODER 1
+#define ENABLE_VP3_DECODER 1
+#define ENABLE_MPEG4_DECODER 1
+#define ENABLE_MSMPEG4V1_DECODER 1
+#define ENABLE_MSMPEG4V2_DECODER 1
+#define ENABLE_MSMPEG4V3_DECODER 1
+#define ENABLE_MJPEGB_DECODER 1
+#define ENABLE_MJPEG_DECODER 1
+#define ENABLE_WMAV2_DECODER 1
+#define ENABLE_DVVIDEO_DECODER 1
+#define ENABLE_HUFFYUV_DECODER 1
+#define ENABLE_FFVHUFF_DECODER 1
+#define ENABLE_SVQ3_DECODER 1
+#define ENABLE_TSCC_DECODER 1
+#define ENABLE_QDM2_DECODER 1
+#define ENABLE_FFV1_DECODER 1
+#define ENABLE_MPEG1VIDEO_DECODER 1
+#define ENABLE_MPEG2VIDEO_DECODER 1
+#define ENABLE_RV10_DECODER 1
+#define ENABLE_RV20_DECODER 1
+#define ENABLE_DVBSUB_DECODER 1
+#define ENABLE_FLV_DECODER 1
+#define ENABLE_SNOW_DECODER 1
+#define ENABLE_AMV_DECODER 1
+#define ENABLE_PCX_DECODER 0
+#define ENABLE_SUNRAST_DECODER 0
+#define ENABLE_VB_DECODER 0
+#define ENABLE_XSUB_DECODER 0
+#define ENABLE_AC3_DECODER 0
+#define ENABLE_APE_DECODER 0
+#define ENABLE_MPC8_DECODER 0
+#define ENABLE_PCM_S16LE_PLANAR_DECODER 0
+#define ENABLE_PCM_ZORK_DECODER 0
+#define ENABLE_ADPCM_EA_R1_DECODER 0
+#define ENABLE_ADPCM_EA_R2_DECODER 0
+#define ENABLE_ADPCM_EA_R3_DECODER 0
+#define ENABLE_ADPCM_EA_XAS_DECODER 0
+#define ENABLE_ADPCM_IMA_EA_EACS_DECODER 0
+#define ENABLE_ADPCM_IMA_EA_SEAD_DECODER 0
+#define ENABLE_AASC_DECODER 0
+#define ENABLE_AVS_DECODER 0
+#define ENABLE_BETHSOFTVID_DECODER 0
+#define ENABLE_C93_DECODER 0
+#define ENABLE_CAVS_DECODER 0
+#define ENABLE_CLJR_DECODER 0
+#define ENABLE_CSCD_DECODER 0
+#define ENABLE_CYUV_DECODER 0
+#define ENABLE_DSICINVIDEO_DECODER 0
+#define ENABLE_DXA_DECODER 0
+#define ENABLE_EIGHTBPS_DECODER 0
+#define ENABLE_FLIC_DECODER 0
+#define ENABLE_IDCIN_DECODER 0
+#define ENABLE_KMVC_DECODER 0
+#define ENABLE_LOCO_DECODER 0
+#define ENABLE_MDEC_DECODER 0
+#define ENABLE_MMVIDEO_DECODER 0
+#define ENABLE_MPEG_XVMC_DECODER 0
+#define ENABLE_MSRLE_DECODER 0
+#define ENABLE_MSZH_DECODER 0
+#define ENABLE_NUV_DECODER 0
+#define ENABLE_PTX_DECODER 0
+#define ENABLE_QDRAW_DECODER 0
+#define ENABLE_QPEG_DECODER 0
+#define ENABLE_RPZA_DECODER 0
+#define ENABLE_SMACKER_DECODER 0
+#define ENABLE_SMC_DECODER 0
+#define ENABLE_SP5X_DECODER 0
+#define ENABLE_THEORA_DECODER 0
+#define ENABLE_THP_DECODER 0
+#define ENABLE_TIERTEXSEQVIDEO_DECODER 0
+#define ENABLE_TRUEMOTION1_DECODER 0
+#define ENABLE_TRUEMOTION2_DECODER 0
+#define ENABLE_TXD_DECODER 0
+#define ENABLE_ULTI_DECODER 0
+#define ENABLE_VMDVIDEO_DECODER 0
+#define ENABLE_VMNC_DECODER 0
+#define ENABLE_VQA_DECODER 0
+#define ENABLE_WNV1_DECODER 0
+#define ENABLE_XAN_WC3_DECODER 0
+#define ENABLE_XL_DECODER 0
+#define ENABLE_MPEG4AAC_DECODER 0
+#define ENABLE_ALAC_DECODER 0
+#define ENABLE_ATRAC3_DECODER 0
+#define ENABLE_COOK_DECODER 0
+#define ENABLE_DCA_DECODER 0
+#define ENABLE_DSICINAUDIO_DECODER 0
+#define ENABLE_IMC_DECODER 0
+#define ENABLE_LIBA52_DECODER 0
+#define ENABLE_LIBFAAD_DECODER 0
+#define ENABLE_MACE3_DECODER 0
+#define ENABLE_MACE6_DECODER 0
+#define ENABLE_MP3_DECODER 0
+#define ENABLE_MP3ADU_DECODER 0
+#define ENABLE_MP3ON4_DECODER 0
+#define ENABLE_MPC7_DECODER 0
+#define ENABLE_RA_144_DECODER 0
+#define ENABLE_RA_288_DECODER 0
+#define ENABLE_SHORTEN_DECODER 0
+#define ENABLE_SMACKAUD_DECODER 0
+#define ENABLE_TRUESPEECH_DECODER 0
+#define ENABLE_TTA_DECODER 0
+#define ENABLE_VMDAUDIO_DECODER 0
+#define ENABLE_WAVPACK_DECODER 0
+#define ENABLE_WS_SND1_DECODER 0
+#define ENABLE_INTERPLAY_DPCM_DECODER 0
+#define ENABLE_SOL_DPCM_DECODER 0
+#define ENABLE_XAN_DPCM_DECODER 0
+#define ENABLE_ADPCM_THP_DECODER 0
+#define ENABLE_ASV1_DECODER 0
+#define ENABLE_ASV2_DECODER 0
+#define ENABLE_BMP_DECODER 0
+#define ENABLE_FLASHSV_DECODER 0
+#define ENABLE_GIF_DECODER 0
+#define ENABLE_H261_DECODER 0
+#define ENABLE_H263I_DECODER 0
+#define ENABLE_JPEGLS_DECODER 0
+#define ENABLE_PNG_DECODER 0
+#define ENABLE_QTRLE_DECODER 0
+#define ENABLE_RAWVIDEO_DECODER 0
+#define ENABLE_ROQ_DECODER 0
+#define ENABLE_SGI_DECODER 0
+#define ENABLE_SVQ1_DECODER 0
+#define ENABLE_TARGA_DECODER 0
+#define ENABLE_TIFF_DECODER 0
+#define ENABLE_ZLIB_DECODER 0
+#define ENABLE_ZMBV_DECODER 0
+#define ENABLE_FLAC_DECODER 0
+#define ENABLE_LIBAMR_NB_DECODER 0
+#define ENABLE_LIBAMR_WB_DECODER 0
+#define ENABLE_LIBGSM_DECODER 0
+#define ENABLE_LIBGSM_MS_DECODER 0
+#define ENABLE_MP2_DECODER 0
+#define ENABLE_SONIC_DECODER 0
+#define ENABLE_VORBIS_DECODER 0
+#define ENABLE_WMAV1_DECODER 0
+#define ENABLE_PCM_ALAW_DECODER 0
+#define ENABLE_PCM_MULAW_DECODER 0
+#define ENABLE_PCM_S8_DECODER 0
+#define ENABLE_PCM_S16BE_DECODER 0
+#define ENABLE_PCM_S16LE_DECODER 0
+#define ENABLE_PCM_S24BE_DECODER 0
+#define ENABLE_PCM_S24DAUD_DECODER 0
+#define ENABLE_PCM_S24LE_DECODER 0
+#define ENABLE_PCM_S32BE_DECODER 0
+#define ENABLE_PCM_S32LE_DECODER 0
+#define ENABLE_PCM_U8_DECODER 0
+#define ENABLE_PCM_U16BE_DECODER 0
+#define ENABLE_PCM_U16LE_DECODER 0
+#define ENABLE_PCM_U24BE_DECODER 0
+#define ENABLE_PCM_U24LE_DECODER 0
+#define ENABLE_PCM_U32BE_DECODER 0
+#define ENABLE_PCM_U32LE_DECODER 0
+#define ENABLE_ROQ_DPCM_DECODER 0
+#define ENABLE_ADPCM_4XM_DECODER 0
+#define ENABLE_ADPCM_ADX_DECODER 0
+#define ENABLE_ADPCM_CT_DECODER 0
+#define ENABLE_ADPCM_EA_DECODER 0
+#define ENABLE_ADPCM_G726_DECODER 0
+#define ENABLE_ADPCM_IMA_DK3_DECODER 0
+#define ENABLE_ADPCM_IMA_DK4_DECODER 0
+#define ENABLE_ADPCM_IMA_QT_DECODER 0
+#define ENABLE_ADPCM_IMA_SMJPEG_DECODER 0
+#define ENABLE_ADPCM_IMA_WAV_DECODER 0
+#define ENABLE_ADPCM_IMA_WS_DECODER 0
+#define ENABLE_ADPCM_MS_DECODER 0
+#define ENABLE_ADPCM_SBPRO_2_DECODER 0
+#define ENABLE_ADPCM_SBPRO_3_DECODER 0
+#define ENABLE_ADPCM_SBPRO_4_DECODER 0
+#define ENABLE_ADPCM_SWF_DECODER 0
+#define ENABLE_ADPCM_XA_DECODER 0
+#define ENABLE_ADPCM_YAMAHA_DECODER 0
+#define ENABLE_DVDSUB_DECODER 0
+#define ENABLE_LIBVORBIS_DECODER 0
+#define ENABLE_H263_PARSER 1
+#define ENABLE_H264_PARSER 1
+#define ENABLE_MPEG4VIDEO_PARSER 1
+#define ENABLE_AAC_PARSER 0
+#define ENABLE_AC3_PARSER 0
+#define ENABLE_CAVSVIDEO_PARSER 0
+#define ENABLE_DCA_PARSER 0
+#define ENABLE_DVBSUB_PARSER 0
+#define ENABLE_DVDSUB_PARSER 0
+#define ENABLE_H261_PARSER 0
+#define ENABLE_MJPEG_PARSER 0
+#define ENABLE_MPEGAUDIO_PARSER 0
+#define ENABLE_MPEGVIDEO_PARSER 0
+#define ENABLE_PNM_PARSER 0
+#define ENABLE_VC1_PARSER 0
+#define ENABLE_MJPEG_ENCODER 1
+#define ENABLE_MSMPEG4V3_ENCODER 1
+#define ENABLE_H263P_ENCODER 1
+#define ENABLE_AC3_ENCODER 1
+#define ENABLE_FFV1_ENCODER 1
+#define ENABLE_FLV1_ENCODER 1
+#define ENABLE_FFVHUFF_ENCODER 1
+#define ENABLE_H263_ENCODER 1
+#define ENABLE_MPEG1VIDEO_ENCODER 1
+#define ENABLE_MPEG2VIDEO_ENCODER 1
+#define ENABLE_MPEG4_ENCODER 1
+#define ENABLE_FLV_ENCODER 1
+#define ENABLE_MP2_ENCODER 1
+#define ENABLE_DVVIDEO_ENCODER 1
+#define ENABLE_HUFFYUV_ENCODER 1
+#define ENABLE_DVBSUB_ENCODER 1
+#define ENABLE_SNOW_ENCODER 1
+#define ENABLE_DNXHD_ENCODER 0
+#define ENABLE_PCM_ZORK_ENCODER 0
+#define ENABLE_ADPCM_IMA_AMV_ENCODER 0
+#define ENABLE_LIBX264_ENCODER 0
+#define ENABLE_LIBXVID_ENCODER 0
+#define ENABLE_LJPEG_ENCODER 0
+#define ENABLE_PAM_ENCODER 0
+#define ENABLE_PBM_ENCODER 0
+#define ENABLE_PGM_ENCODER 0
+#define ENABLE_PGMYUV_ENCODER 0
+#define ENABLE_PPM_ENCODER 0
+#define ENABLE_LIBFAAC_ENCODER 0
+#define ENABLE_LIBMP3LAME_ENCODER 0
+#define ENABLE_LIBTHEORA_ENCODER 0
+#define ENABLE_SONIC_LS_ENCODER 0
+#define ENABLE_ASV1_ENCODER 0
+#define ENABLE_ASV2_ENCODER 0
+#define ENABLE_BMP_ENCODER 0
+#define ENABLE_FLASHSV_ENCODER 0
+#define ENABLE_GIF_ENCODER 0
+#define ENABLE_H261_ENCODER 0
+#define ENABLE_JPEGLS_ENCODER 0
+#define ENABLE_MSMPEG4V1_ENCODER 0
+#define ENABLE_MSMPEG4V2_ENCODER 0
+#define ENABLE_PNG_ENCODER 0
+#define ENABLE_QTRLE_ENCODER 0
+#define ENABLE_RAWVIDEO_ENCODER 0
+#define ENABLE_ROQ_ENCODER 0
+#define ENABLE_RV10_ENCODER 0
+#define ENABLE_RV20_ENCODER 0
+#define ENABLE_SGI_ENCODER 0
+#define ENABLE_SVQ1_ENCODER 0
+#define ENABLE_TARGA_ENCODER 0
+#define ENABLE_TIFF_ENCODER 0
+#define ENABLE_WMV1_ENCODER 0
+#define ENABLE_WMV2_ENCODER 0
+#define ENABLE_ZLIB_ENCODER 0
+#define ENABLE_ZMBV_ENCODER 0
+#define ENABLE_FLAC_ENCODER 0
+#define ENABLE_LIBAMR_NB_ENCODER 0
+#define ENABLE_LIBAMR_WB_ENCODER 0
+#define ENABLE_LIBGSM_ENCODER 0
+#define ENABLE_LIBGSM_MS_ENCODER 0
+#define ENABLE_SONIC_ENCODER 0
+#define ENABLE_VORBIS_ENCODER 0
+#define ENABLE_WMAV1_ENCODER 0
+#define ENABLE_WMAV2_ENCODER 0
+#define ENABLE_PCM_ALAW_ENCODER 0
+#define ENABLE_PCM_MULAW_ENCODER 0
+#define ENABLE_PCM_S8_ENCODER 0
+#define ENABLE_PCM_S16BE_ENCODER 0
+#define ENABLE_PCM_S16LE_ENCODER 0
+#define ENABLE_PCM_S24BE_ENCODER 0
+#define ENABLE_PCM_S24DAUD_ENCODER 0
+#define ENABLE_PCM_S24LE_ENCODER 0
+#define ENABLE_PCM_S32BE_ENCODER 0
+#define ENABLE_PCM_S32LE_ENCODER 0
+#define ENABLE_PCM_U8_ENCODER 0
+#define ENABLE_PCM_U16BE_ENCODER 0
+#define ENABLE_PCM_U16LE_ENCODER 0
+#define ENABLE_PCM_U24BE_ENCODER 0
+#define ENABLE_PCM_U24LE_ENCODER 0
+#define ENABLE_PCM_U32BE_ENCODER 0
+#define ENABLE_PCM_U32LE_ENCODER 0
+#define ENABLE_ROQ_DPCM_ENCODER 0
+#define ENABLE_ADPCM_4XM_ENCODER 0
+#define ENABLE_ADPCM_ADX_ENCODER 0
+#define ENABLE_ADPCM_CT_ENCODER 0
+#define ENABLE_ADPCM_EA_ENCODER 0
+#define ENABLE_ADPCM_G726_ENCODER 0
+#define ENABLE_ADPCM_IMA_DK3_ENCODER 0
+#define ENABLE_ADPCM_IMA_DK4_ENCODER 0
+#define ENABLE_ADPCM_IMA_QT_ENCODER 0
+#define ENABLE_ADPCM_IMA_SMJPEG_ENCODER 0
+#define ENABLE_ADPCM_IMA_WAV_ENCODER 0
+#define ENABLE_ADPCM_IMA_WS_ENCODER 0
+#define ENABLE_ADPCM_MS_ENCODER 0
+#define ENABLE_ADPCM_SBPRO_2_ENCODER 0
+#define ENABLE_ADPCM_SBPRO_3_ENCODER 0
+#define ENABLE_ADPCM_SBPRO_4_ENCODER 0
+#define ENABLE_ADPCM_SWF_ENCODER 0
+#define ENABLE_ADPCM_XA_ENCODER 0
+#define ENABLE_ADPCM_YAMAHA_ENCODER 0
+#define ENABLE_DVDSUB_ENCODER 0
+#define ENABLE_LIBVORBIS_ENCODER 0
+#define ENABLE_MP3_HEADER_COMPRESS_BSF 0
+#define ENABLE_IMX_DUMP_HEADER_BSF 0
+#define ENABLE_DUMP_EXTRADATA_BSF 0
+#define ENABLE_REMOVE_EXTRADATA_BSF 0
+#define ENABLE_NOISE_BSF 0
+#define ENABLE_MP3_HEADER_DECOMPRESS_BSF 0
+#define ENABLE_MJPEGA_DUMP_HEADER_BSF 0
+#define ENABLE_H264_MP4TOANNEXB_BSF 0
+#define ENABLE_MOV2TEXTSUB_BSF 0
+#define ENABLE_TEXT2MOVSUB_BSF 0
+#define CONFIG_MUXERS 1
+#define CONFIG_MOV_MUXER 1
+#define CONFIG_MP4_MUXER 1
+#define CONFIG_PSP_MUXER 1
+#define CONFIG_TG2_MUXER 1
+#define CONFIG_TGP_MUXER 1
+#define CONFIG_ENCODERS 1
+#define CONFIG_DVVIDEO_ENCODER 1
+#define CONFIG_SNOW_ENCODER 1
+#define CONFIG_DECODERS 1
+#define CONFIG_DVVIDEO_DECODER 1
+#define CONFIG_H263_DECODER 1
+#define CONFIG_MPEG4_DECODER 1
+#define CONFIG_SNOW_DECODER 1
+#define CONFIG_VC1_DECODER 1
+#define CONFIG_WMV2_DECODER 1
+#define CONFIG_WMV3_DECODER 1
+#define CONFIG_MPEGAUDIO_HP 1
+#define CONFIG_ZLIB 1
+#define CONFIG_GPL 1
+#define ENABLE_ARMV4L 0
+#define ENABLE_MLIB 0
+#define ENABLE_SPARC 0
+#define ENABLE_ALPHA 0
+#define ENABLE_MMI 0
+#define ENABLE_SH4 0
+#define ENABLE_BFIN 0
+#define ENABLE_SMALL 0
+#define ENABLE_MLP_PARSER 0
+//****************** SYSTEM *******************
+#ifdef __APPLE__
+#	define CONFIG_DARWIN 1
+#endif
+#if defined(ADM_CPU_X86_32)
+#	define ARCH_X86 1
+#	define ARCH_X86_32 1
+#elif defined(ADM_CPU_X86_64)
+#	define ARCH_X86 1
+#	define ARCH_X86_64 1
+#elif defined(ADM_CPU_PPC)
+#	define ARCH_POWERPC 1
+#ifdef ADM_CPU_ALTIVEC
+#	define HAVE_ALTIVEC 1
+#ifndef __APPLE__
+#	define HAVE_ALTIVEC_H 1
+#endif	// __APPLE__
+#endif	// ADM_CPU_ALTIVEC
+#ifdef ADM_CPU_DCBZL
+#	define HAVE_DCBZL 1
+#endif	// ADM_CPU_DCBZL
+#endif	// ADM_CPU_X86_32
+#ifdef ADM_CPU_MMX2
+#	define HAVE_MMX2 1
+#endif
+#ifdef ADM_CPU_SSSE3
+#	define HAVE_SSSE3 1
+#endif
+#ifdef ARCH_POWERPC
+#	define ENABLE_POWERPC 1
+#else
+#	define ENABLE_POWERPC 0
+#endif
+#ifdef ARCH_X86
+#	define ENABLE_MMX 1
+#	define ENABLE_X86 1
+#	define ENABLE_BSWAP 1
+#	define HAVE_MMX 1
+#	define ENABLE_MMX 1
+#	define HAVE_FAST_UNALIGNED 1
+#	define ENABLE_FAST_UNALIGNED 1
+#	define HAVE_EBP_AVAILABLE 1
+#	define HAVE_EBX_AVAILABLE 1
+#else
+#	define ENABLE_MMX 0
+#endif
+#ifdef ARCH_X86_64
+#	define HAVE_FAST_64BIT 1
+#	define HAVE_EBP_AVAILABLE 1
+#	define ENABLE_EBP_AVAILABLE 1
+#	define HAVE_EBX_AVAILABLE 1
+#	define ENABLE_EBX_AVAILABLE 1
+#	define ENABLE_EBX_AVAILABLE 1
+#	define ENABLE_EBX_AVAILABLE 1
+#	undef HAVE_MMX2
+#	define HAVE_SSE2 1
+#	define HAVE_SSE 1
+#endif
+#ifdef ADM_BIG_ENDIAN
+#	define WORDS_BIGENDIAN 1
+#	define ENABLE_X86_64 1
+#endif
+#define ENABLE_THREADS 1
+#define ENABLE_ENCODERS 1
+#define ENABLE_VIS 0
+#define ENABLE_GRAY 0
+#define HAVE_LRINTF 1
+#define HAVE_LLRINT 1
+#define HAVE_LRINT 1
+#define HAVE_ROUND 1
+#define HAVE_ROUNDF 1
+#define HAVE_THREADS 1
+#define RUNTIME_CPUDETECT 1
+#define restrict __restrict__
+>>>>>>> mean:avidemux/ADM_libraries/ADM_ffmpeg/config.h

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ffconf.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ffconf.c	2008-03-25 00:17:33 UTC (rev 3932)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ffconf.c	2008-03-26 19:26:26 UTC (rev 3933)
@@ -430,10 +430,16 @@
 	printf("#endif\n");
 
 	printf("#ifdef ARCH_X86\n");
+<<<<<<< HEAD:avidemux/ADM_libraries/ADM_ffmpeg/ffconf.c
+=======
+	printf("#	define ENABLE_MMX 1\n");
+	printf("#	define ENABLE_X86 1\n");
+>>>>>>> mean:avidemux/ADM_libraries/ADM_ffmpeg/ffconf.c
 	printf("#	define ENABLE_BSWAP 1\n");
 	printf("#	define HAVE_MMX 1\n");
 	printf("#	define ENABLE_MMX 1\n");
 	printf("#	define HAVE_FAST_UNALIGNED 1\n");
+	printf("#	define ENABLE_FAST_UNALIGNED 1\n");
 	printf("#	define HAVE_EBP_AVAILABLE 1\n");
 	printf("#	define HAVE_EBX_AVAILABLE 1\n");
 	printf("#else\n");
@@ -442,10 +448,23 @@
 
 	printf("#ifdef ARCH_X86_64\n");
 	printf("#	define HAVE_FAST_64BIT 1\n");
+
+	printf("#	define HAVE_EBP_AVAILABLE 1\n");
+	printf("#	define ENABLE_EBP_AVAILABLE 1\n");
+	printf("#	define HAVE_EBX_AVAILABLE 1\n");
+	printf("#	define ENABLE_EBX_AVAILABLE 1\n");
+
+	printf("#	define ENABLE_EBX_AVAILABLE 1\n");
+	printf("#	define ENABLE_EBX_AVAILABLE 1\n");
+	printf("#	undef HAVE_MMX2\n");
+	printf("#	define HAVE_SSE2 1\n");
+	printf("#	define HAVE_SSE 1\n");
+
 	printf("#endif\n");
 
 	printf("#ifdef ADM_BIG_ENDIAN\n");
 	printf("#	define WORDS_BIGENDIAN 1\n");
+	printf("#	define ENABLE_X86_64 1\n");
 	printf("#endif\n");
 
 	printf("#define ENABLE_THREADS 1\n");



From mean at mail.berlios.de  Wed Mar 26 20:26:47 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Wed, 26 Mar 2008 20:26:47 +0100
Subject: [Avidemux-svn-commit] r3934 - in
	branches/avidemux_2.5_branch_gruntster/avidemux: .
	ADM_audiocodec ADM_audiofilter ADM_core/src ADM_coreUI
	ADM_coreUI/include ADM_coreUI/src ADM_filter
	ADM_inputs/ADM_inpics ADM_inputs/ADM_mpegdemuxer
	ADM_inputs/ADM_nuv ADM_libraries/ADM_ffmpeg/ADM_lavcodec
	ADM_ocr ADM_outputs/oplug_avi ADM_script
	ADM_userInterfaces/ADM_GTK/ADM_dialog
	ADM_userInterfaces/ADM_GTK/ADM_dialogFactory
	ADM_userInterfaces/ADM_GTK/ADM_filters
	ADM_userInterfaces/ADM_GTK/ADM_gui2
	ADM_userInterfaces/ADM_GTK/ADM_ocr
	ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk
	ADM_userInterfaces/ADM_NONE/ADM_dialog
	ADM_userInterfaces/ADM_NONE/ADM_dialogFactory
	ADM_userInterfaces/ADM_NONE/ADM_gui2
	ADM_userInterfaces/ADM_QT4/ADM_dialog
	ADM_userInterfaces/ADM_QT4/ADM_dialogFactory
	ADM_userInterfaces/ADM_QT4/ADM_filters
	ADM_userInterfaces/ADM_QT4/ADM_gui
	ADM_userInterfaces/ADM_commonUI ADM_video ADM_videoFilter
Message-ID: <200803261926.m2QJQlAJ011486@sheep.berlios.de>

Author: mean
Date: 2008-03-26 20:26:31 +0100 (Wed, 26 Mar 2008)
New Revision: 3934

Added:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_coreUI_internal.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_enter.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_factory.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_factoryStubs.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_fileSel.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_factory.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_fileSel.cpp
Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_pluginLoad.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audioencoder_lame.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audioencoder_vorbis.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_fileio.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter_dylib.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_inpics/ADM_pics.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_indexer.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_indexer_h264.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_indexer_mpeg2.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_probe.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_probeTS.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_nuv/ADM_nuv.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/avcodec.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_ocr/ADM_bitmapSource.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_ocr/ADM_ocr.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_ocr/ADM_vob2vobsub.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisave.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisave.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSFunctions.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eraser.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs_save.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_srt.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_dialogFactory.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_filesel.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bar.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_button.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_float.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_frame.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_hex.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_integer.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_matrix.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_menu.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_notch.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_readOnlyText.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_threadCount.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_toggle.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_ocr.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_none.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialogFactory/DIA_dialogFactory.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_gui2/file_none.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_xvid4.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_bar.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_float.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_frame.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_hex.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_integer.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_matrix.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_notch.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_readOnlyText.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_bitrate.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_button.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_dialogFactory.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_filesel.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_menu.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_slider.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_threadCount.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_toggle.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/Q_mainfilter.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/file_qt4.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioconfig.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_gototime.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavDecoder.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tsSub.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidFieldUnblend.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidASS.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidAddBorder.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidBSmear.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidBlendRemoval.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDGbob.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDecDec.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDeinterlace.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDenoise.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDropOut.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidEq2.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidEraser.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFade.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFastConvolution.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFlux.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidForcedPP.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidHardIvtcRemoval.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidHue.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidLargeMedian.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidLogo.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLD3D.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLD3Dlow.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMSharpen.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMosaic.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMsmooth.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidPalShift.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidParticle.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidResampleFPS.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidRotate.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSoften.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidStabilize.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidTdeint.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidThreshold.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVlad.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVobSubRender.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVobsub.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidYadif.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/GUI_jobs.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/gtk_gui.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/gui_navigate.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/gui_savenew.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/guiplay.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/main.cpp
Log:
[Merge]


Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_pluginLoad.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_pluginLoad.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_pluginLoad.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -18,7 +18,7 @@
  ***************************************************************************/
 #include "ADM_default.h"
 #include "ADM_ad_plugin.h"
-#include "ADM_toolkit/filesel.h"
+#include "DIA_fileSel.h"
 #include "ADM_dynamicLoading.h"
 #include <vector>
 #if 1

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audioencoder_lame.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audioencoder_lame.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audioencoder_lame.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -194,7 +194,7 @@
       @return 1 on success, 0 on failure
 
 */
-#include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 int DIA_getLameSettings(ADM_audioEncoderDescriptor *descriptor)
   {
     int ret=0;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audioencoder_vorbis.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audioencoder_vorbis.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audioencoder_vorbis.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -248,7 +248,7 @@
       @return 1 on success, 0 on failure
 
 */
-#include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 int DIA_getVorbisSettings(ADM_audioEncoderDescriptor *descriptor)
   {
     int ret=0;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_fileio.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_fileio.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_fileio.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -28,7 +28,7 @@
 #endif
 
 #include "ADM_default.h"
-#include "ADM_toolkit/filesel.h"
+#include "DIA_fileSel.h"
 #include "ADM_toolkit/toolkit.hxx"
 
 #ifdef __WIN32

Added: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/CMakeLists.txt	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/CMakeLists.txt	2008-03-26 19:26:31 UTC (rev 3934)
@@ -0,0 +1 @@
+ADD_SUBDIRECTORY(src)

Added: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_coreUI_internal.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_coreUI_internal.h	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_coreUI_internal.h	2008-03-26 19:26:31 UTC (rev 3934)
@@ -0,0 +1,56 @@
+/***************************************************************************
+                          DIA_coreUI_internal.h
+  Handles univeral dialog
+  (C) Mean 2006 fixounet at free.fr
+
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#ifndef DIA_COREUI_INTERNAL_H
+#define DIA_COREUI_INTERNAL_H
+#include "DIA_enter.h"
+#include "DIA_fileSel.h"
+#include "DIA_factory.h"
+ 
+// Dia enter
+typedef struct
+{
+	DIA_FILE_INIT	  *fileInit;
+	DIA_FILE_SEL_CB   *fileReadCb;
+	DIA_FILE_SEL_CB   *fileWriteCb;
+	DIA_FILE_SEL_NAME *fileReadName;
+	DIA_FILE_SEL_NAME *fileWriteName;
+	DIA_FILE_SELECT   *fileSelectRead;
+	DIA_FILE_SELECT   *fileSelectWrite;
+	DIA_FILE_SELECT   *fileSelectDirectory;
+}DIA_FILESEL_DESC_T;
+
+// Call this to hook your fileSelector functions
+uint8_t DIA_fileSelInit(DIA_FILESEL_DESC_T *d);
+
+
+//
+typedef uint8_t DIA_FACTORY_RUN_TABS(const char *title,uint32_t nb,diaElemTabs **tabs);
+typedef uint8_t DIA_FACTORY_RUN(const char *title,uint32_t nb,diaElem **elems);
+typedef struct
+{
+	DIA_FACTORY_RUN      *FactoryRun;
+	DIA_FACTORY_RUN_TABS *FactoryRunTab;
+//	
+	CREATE_BUTTON_T 	 *CreareButton;
+	DELETE_DIA_ELEM_T    *DestroyButton;
+//
+	CREATE_BAR_T		 *CreateBar;
+	DELETE_DIA_ELEM_T    *DestroyBar;
+	
+}FactoryDescriptor;
+//
+uint8_t DIA_factoryInit(FactoryDescriptor *d);
+#endif

Copied: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_enter.h (from rev 3933, branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialogFactory/DIA_dialogFactory.cpp)
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialogFactory/DIA_dialogFactory.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_enter.h	2008-03-26 19:26:31 UTC (rev 3934)
@@ -0,0 +1,24 @@
+/***************************************************************************
+                          DIA_enter.h
+  Handles univeral dialog
+  (C) Mean 2006 fixounet at free.fr
+
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#ifndef DIA_ENTER_H
+#define DIA_ENTER_H
+
+//  Get a float value
+uint8_t  DIA_GetFloatValue(float *value, float min, float max, const char *title, const char *legend);
+//  Get an integer value
+uint8_t  DIA_GetIntegerValue(int *value, int min, int max, const char *title, const char *legend);
+
+#endif

Added: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_factory.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_factory.h	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_factory.h	2008-03-26 19:26:31 UTC (rev 3934)
@@ -0,0 +1,469 @@
+/***************************************************************************
+                          DIA_factory.h
+  Handles univeral dialog
+  (C) Mean 2006 fixounet at free.fr
+
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#ifndef DIA_FACTORY_H
+#define DIA_FACTORY_H
+
+#include "ADM_assert.h"
+
+typedef enum 
+{
+  ELEM_INVALID=0,
+  ELEM_TOGGLE,
+  ELEM_INTEGER,
+  ELEM_FLOAT,
+  ELEM_MENU,
+  ELEM_FILE_READ,
+  ELEM_BITRATE,
+  ELEM_BAR,
+  ELEM_ROTEXT,
+  ELEM_NOTCH,
+  ELEM_DIR_SELECT,
+  ELEM_TEXT,
+  ELEM_FRAME,
+  ELEM_HEXDUMP,
+  ELEM_TOGGLE_UINT,
+  ELEM_TOGGLE_INT,
+  ELEM_BUTTON,
+  ELEM_SLIDER,
+  ELEM_THREAD_COUNT,
+  ELEM_MATRIX,
+  ELEM_COUNT,
+  ELEM_MAX=ELEM_COUNT-1
+}elemEnum;
+typedef void ADM_FAC_CALLBACK(void *cookie);
+
+#define ELEM_TYPE_FLOAT float
+
+/*********************************************/
+class diaElem
+{
+  protected:
+    void    setSize(int z) {size=z;};
+    int     readOnly;
+    diaElem    *internalPointer;
+public:
+  void *param;
+  void *myWidget;
+  const char *paramTitle;
+  const char *tip;
+  elemEnum mySelf;
+  int       size; // Size of the widget in line
+
+  diaElem(elemEnum num) {paramTitle=NULL;param=NULL;mySelf=num;myWidget=NULL;size=1;readOnly=0;internalPointer=NULL;};
+          int getSize(void) {return size;};
+  virtual ~diaElem() {};
+  virtual void setMe(void *dialog, void *opaque,uint32_t line)=0;
+  virtual void getMe(void)=0;
+  virtual void setRo(void) {readOnly=1;}
+  virtual void setRw(void) {readOnly=0;}
+          
+  virtual void enable(uint32_t onoff) {}
+  virtual void finalize(void) {} // in case some widget needs some stuff just before using them
+};
+/*********************************************/
+#define MENU_MAX_lINK 10
+typedef struct dialElemLink
+{
+  uint32_t  value;
+  uint32_t  onoff;
+  diaElem  *widget;
+}dialElemLink;
+/*********************************************/
+
+typedef void      DELETE_DIA_ELEM_T(diaElem *widget);
+/*********************************************/
+typedef diaElem  *(CREATE_BUTTON_T)(const char *toggleTitle, ADM_FAC_CALLBACK *cb,void *cookie,const char *tip);
+
+
+class diaElemButton : public diaElem
+{
+  protected:
+  public:
+    void            *_cookie;
+    ADM_FAC_CALLBACK *_callBack;
+            diaElemButton(const char *toggleTitle, ADM_FAC_CALLBACK *cb,void *cookie,const char *tip=NULL);
+  virtual   ~diaElemButton() ;
+  void      setMe(void *dialog, void *opaque,uint32_t line);
+  void      getMe(void);
+  void      enable(uint32_t onoff) ;
+};
+
+/*********************************************/
+
+class diaElemMatrix : public diaElem
+{
+  protected:
+  public:
+    uint8_t *_matrix;
+    uint32_t _matrixSize;
+    		diaElemMatrix(uint8_t *trix,const char *toggleTitle, uint32_t trixSize,const char *tip=NULL);
+  virtual   ~diaElemMatrix() ;
+  void      setMe(void *dialog, void *opaque,uint32_t line);
+  void      getMe(void);
+  void      enable(uint32_t onoff) ;
+};
+/************************************/
+template <typename T>
+class diaElemGenericSlider : public diaElem
+{
+  protected:
+    
+    T min,max,incr;
+    uint32_t digits;
+public:
+    diaElemGenericSlider(T *value,const char *toggleTitle, T min,T max,T incr = 1, const char *tip=NULL);
+  virtual   ~diaElemGenericSlider() ;
+  void      setMe(void *dialog, void *opaque,uint32_t line);
+  void      getMe(void);
+  void      enable(uint32_t onoff) ;
+  void      setDigits(uint32_t digits) { this->digits = digits; }
+};
+typedef diaElemGenericSlider <int32_t> diaElemSlider;
+/* Same but unsigned */
+typedef diaElemGenericSlider <uint32_t> diaElemUSlider;
+/* Same but float */
+typedef diaElemGenericSlider <ELEM_TYPE_FLOAT> diaElemFSlider;
+
+/*********************************************/
+class diaElemToggle : public diaElem
+{
+  protected:
+    dialElemLink        links[MENU_MAX_lINK];
+    uint32_t            nbLink;
+    
+public:
+            diaElemToggle(uint32_t *toggleValue,const char *toggleTitle, const char *tip=NULL);
+  virtual   ~diaElemToggle() ;
+  void      setMe(void *dialog, void *opaque,uint32_t line);
+  void      getMe(void);
+  void      enable(uint32_t onoff) ;
+  void      finalize(void);
+  void      updateMe();
+  uint8_t   link(uint32_t onoff,diaElem *w);
+};
+/*********************************************/
+class diaElemToggleUint : public diaElem
+{
+  protected:
+        uint32_t *emb;
+        const char *embName;
+        void *widgetUint;
+        uint32_t _min,_max;
+public:
+            diaElemToggleUint(uint32_t *toggleValue,const char *toggleTitle, uint32_t *uintval, const char *name,uint32_t min,uint32_t max,const char *tip=NULL);
+  virtual   ~diaElemToggleUint() ;
+  void      setMe(void *dialog, void *opaque,uint32_t line);
+  void      getMe(void);
+  void      enable(uint32_t onoff) ;
+  void      finalize(void);
+  void      updateMe();
+};
+class diaElemToggleInt : public diaElemToggleUint
+{
+  protected:
+        int32_t *emb;
+        int32_t _min,_max;
+public:
+            diaElemToggleInt(uint32_t *toggleValue,const char *toggleTitle, int32_t *uintval, const char *name,int32_t min,int32_t max,const char *tip=NULL);
+  virtual   ~diaElemToggleInt() ;
+  void      setMe(void *dialog, void *opaque,uint32_t line);
+  void      getMe(void);
+};
+/*********************************************/
+class diaElemInteger : public diaElem
+{
+
+public:
+  int32_t min,max;
+  diaElemInteger(int32_t *intValue,const char *toggleTitle, int32_t min, int32_t max,const char *tip=NULL);
+  virtual ~diaElemInteger() ;
+  void setMe(void *dialog, void *opaque,uint32_t line);
+  void getMe(void);
+  void      enable(uint32_t onoff) ;
+};
+/* Same but unsigned */
+class diaElemUInteger : public diaElem
+{
+
+public:
+  uint32_t min,max;
+  diaElemUInteger(uint32_t *intValue,const char *toggleTitle, uint32_t min, uint32_t max,const char *tip=NULL);
+  virtual ~diaElemUInteger() ;
+  void setMe(void *dialog, void *opaque,uint32_t line);
+  void getMe(void);
+  void      enable(uint32_t onoff) ;
+  
+};
+/*************************************************/
+typedef diaElem  *(CREATE_BAR_T)(uint32_t percent,const char *toggleTitle);
+
+class diaElemBar : public diaElem
+{
+  protected :
+        uint32_t per;
+public:
+  
+  diaElemBar(uint32_t percent,const char *toggleTitle);
+  virtual ~diaElemBar() ;
+  void setMe(void *dialog, void *opaque,uint32_t line);
+  void getMe(void);
+};
+
+/*********************************************/
+class diaElemFloat : public diaElem
+{
+
+public:
+  ELEM_TYPE_FLOAT min,max;
+  diaElemFloat(ELEM_TYPE_FLOAT *intValue,const char *toggleTitle, ELEM_TYPE_FLOAT min, 
+               ELEM_TYPE_FLOAT max,const char *tip=NULL);
+  virtual ~diaElemFloat() ;
+  void setMe(void *dialog, void *opaque,uint32_t line);
+  void getMe(void);
+  void      enable(uint32_t onoff) ;
+};
+/*************************************************/
+typedef struct diaMenuEntry
+{
+  public:
+    uint32_t    val;
+    const char *text;
+    const char *desc;
+  public:
+}diaMenuEntry;
+
+class diaMenuEntryDynamic : public diaMenuEntry
+{
+  public:
+  public:
+    diaMenuEntryDynamic(uint32_t v,const char *t,const char *d) 
+      {
+          val=v;
+          text=ADM_strdup(t);
+          desc=ADM_strdup(d);
+      }
+    ~diaMenuEntryDynamic() 
+      { 
+          ADM_dealloc(text);
+          ADM_dealloc(desc);
+      }
+    
+};
+//*******************************
+// static (i.e. hardcoded) menu
+//*******************************
+
+
+
+//*******************************
+// Same but for dynamic menus
+//*******************************
+class diaElemMenuDynamic : public diaElem
+{
+diaMenuEntryDynamic **menu;
+uint32_t            nbMenu;
+dialElemLink        links[MENU_MAX_lINK];
+uint32_t            nbLink;
+
+public:
+  diaElemMenuDynamic(uint32_t *intValue,const char *itle, uint32_t nb, 
+               diaMenuEntryDynamic **menu,const char *tip=NULL);
+  
+  virtual   ~diaElemMenuDynamic() ;
+  void      setMe(void *dialog, void *opaque,uint32_t line);
+  void      getMe(void);
+  uint8_t   link(diaMenuEntryDynamic *entry,uint32_t onoff,diaElem *w);
+  void      updateMe(void);
+  void      enable(uint32_t onoff) ;
+  void      finalize(void);
+};
+
+class diaElemMenu : public diaElem
+{
+const diaMenuEntry  *menu;
+uint32_t            nbMenu;
+dialElemLink        links[MENU_MAX_lINK];
+uint32_t            nbLink;
+
+diaElemMenuDynamic  *dyna;
+diaMenuEntryDynamic  **menus;
+public:
+  diaElemMenu(uint32_t *intValue,const char *itle, uint32_t nb, 
+               const diaMenuEntry *menu,const char *tip=NULL);
+  
+  virtual ~diaElemMenu() ;
+  void setMe(void *dialog, void *opaque,uint32_t line);
+  void getMe(void);
+  uint8_t   link(diaMenuEntry *entry,uint32_t onoff,diaElem *w);
+  void      updateMe(void);
+  void      enable(uint32_t onoff) ;
+  void      finalize(void);;
+};
+
+/*************************************************/
+#include "ADM_encoder/ADM_vidEncode.hxx"
+
+class diaElemBitrate : public diaElem
+{
+  protected:
+    COMPRES_PARAMS    copy;
+    uint32_t maxQ;
+public:
+  
+  diaElemBitrate(COMPRES_PARAMS *p,const char *toggleTitle,const char *tip=NULL);
+  virtual ~diaElemBitrate() ;
+  void setMe(void *dialog, void *opaque,uint32_t line);
+  void getMe(void);
+  void setMaxQz(uint32_t qz);
+  
+  void updateMe(void);
+};
+
+/*************************************************/
+class diaElemFile : public diaElem
+{
+
+protected:
+    const char * defaultSuffix;
+public:
+  
+  diaElemFile(uint32_t writeMode,char **filename,const char *toggleTitle,
+              const char *defaultSuffix = 0,const char *tip=NULL);
+  virtual ~diaElemFile() ;
+  void setMe(void *dialog, void *opaque,uint32_t line);
+  void getMe(void);
+  uint32_t _write;
+  void   changeFile(void);
+  void   enable(uint32_t onoff);
+};
+/*************************************************/
+class diaElemDirSelect : public diaElem
+{
+
+public:
+  
+  diaElemDirSelect(char **filename,const char *toggleTitle,const char *tip=NULL);
+  virtual ~diaElemDirSelect() ;
+  void setMe(void *dialog, void *opaque,uint32_t line);
+  void getMe(void);
+  
+  void changeFile(void);
+  void   enable(uint32_t onoff);
+};
+/*************************************************/
+/* The text MUST be copied internally ! */
+class diaElemReadOnlyText : public diaElem
+{
+
+public:
+  
+  diaElemReadOnlyText(char *readyOnly,const char *toggleTitle,const char *tip=NULL);
+  virtual ~diaElemReadOnlyText() ;
+  void setMe(void *dialog, void *opaque,uint32_t line);
+  void getMe(void);
+  
+};
+/*************************************************/
+/* The text MUST be copied internally ! */
+class diaElemText : public diaElem
+{
+
+public:
+  
+  diaElemText(char **text,const char *toggleTitle,const char *tip=NULL);
+  virtual ~diaElemText() ;
+  void setMe(void *dialog, void *opaque,uint32_t line);
+  void getMe(void);
+  void enable(uint32_t onoff);
+};
+
+/*********************************************/
+class diaElemNotch : public diaElem
+{
+  uint32_t yesno;
+public:
+  
+  diaElemNotch(uint32_t yes,const char *toggleTitle, const char *tip=NULL);
+  virtual ~diaElemNotch() ;
+  void setMe(void *dialog, void *opaque,uint32_t line);
+  void getMe(void) {};
+};
+/*********************************************/
+class diaElemTabs 
+{
+  public:
+    
+  uint32_t nbElems;
+  diaElem  **dias;
+  const char *title;
+  
+  diaElemTabs(const char *toggleTitle, uint32_t nb, diaElem **content)
+  {
+      nbElems=nb;
+      dias=content; 
+      title=toggleTitle;
+  }
+  virtual ~diaElemTabs() 
+  {
+  }
+};
+/**********************************************/
+#define DIA_MAX_FRAME 10
+class diaElemFrame : public diaElem
+{
+  uint32_t frameSize;
+  uint32_t nbElems;
+  diaElem  *elems[DIA_MAX_FRAME];
+public:
+  
+  diaElemFrame(const char *toggleTitle, const char *tip=NULL);
+  virtual ~diaElemFrame() ;
+  void setMe(void *dialog, void *opaque,uint32_t line);
+  void getMe(void) ;
+  void swallow(diaElem *widget);
+  void enable(uint32_t onoff);
+  void finalize(void);
+};
+/**********************************************/
+class diaElemHex : public diaElem
+{
+  uint32_t dataSize;
+  uint8_t  *data;
+  
+public:
+  
+  diaElemHex(const char *toggleTitle, uint32_t dataSize,uint8_t *data);
+  virtual ~diaElemHex() ;
+  void setMe(void *dialog, void *opaque,uint32_t line);
+  void getMe(void) ;
+  void finalize(void);
+};
+/**********************************************/
+class diaElemThreadCount : public diaElem
+{
+
+public:
+  
+  diaElemThreadCount(uint32_t *value, const char *title, const char *tip = NULL);
+  virtual ~diaElemThreadCount() ;
+  void setMe(void *dialog, void *opaque, uint32_t line);
+  void getMe(void);
+};
+/*********************************************/
+uint8_t diaFactoryRun(const char *title,uint32_t nb,diaElem **elems);
+uint8_t diaFactoryRunTabs(const char *title,uint32_t nb,diaElemTabs **tabs);
+/*********************************************/
+#endif

Copied: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_factoryStubs.h (from rev 3933, branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialogFactory/DIA_dialogFactory.cpp)
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialogFactory/DIA_dialogFactory.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_factoryStubs.h	2008-03-26 19:26:31 UTC (rev 3934)
@@ -0,0 +1,32 @@
+/***************************************************************************
+                          DIA_factoryStubs.h
+  
+  (C) Mean 2008 fixounet at free.fr
+
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#ifndef DIA_FACTORY_STUBS_H
+#define DIA_FACTORY_STUBS_H
+
+#define DIA_MKSTUBS(aClass) \
+void      aClass::setMe(void *dialog, void *opaque,uint32_t line)\
+	{ \
+		ADM_assert(internalPointer); \
+		internalPointer->setMe(dialog,opaque,line); \
+	} \
+void      aClass::getMe(void)\
+	{ \
+	ADM_assert(internalPointer); \
+	internalPointer->getMe(); \
+	} 
+
+#endif

Added: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_fileSel.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_fileSel.h	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_fileSel.h	2008-03-26 19:26:31 UTC (rev 3934)
@@ -0,0 +1,39 @@
+
+/***************************************************************************
+    copyright            : (C) 2001/2005 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#ifndef DIA_FILESEL_H
+#define DIA_FILESEL_H
+typedef void SELFILE_CB(char *);
+
+// Associated functions type
+typedef void    DIA_FILE_SEL_CB(const char *label,SELFILE_CB cb);
+typedef void    DIA_FILE_SEL_NAME(const char *label, char * * name);
+typedef uint8_t DIA_FILE_SELECT(const char *title,char *target,uint32_t max, const char *source);
+typedef void	DIA_FILE_INIT(void);
+
+// Old FileSel interface
+void GUI_FileSelRead(const char *label,SELFILE_CB cb) ;
+void GUI_FileSelWrite(const char *label,SELFILE_CB cb) ;
+void GUI_FileSelRead(const char *label, char * * name);
+void GUI_FileSelWrite(const char *label, char * * name);
+
+// New FileSel interface, the receiving buffer is allocated by the caller
+uint8_t FileSel_SelectWrite(const char *title,char *target,uint32_t max, const char *source);
+uint8_t FileSel_SelectRead(const char *title,char *target,uint32_t max, const char *source);
+uint8_t FileSel_SelectDir(const char *title,char *target,uint32_t max, const char *source);
+
+
+#endif
+//EOF

Added: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/CMakeLists.txt	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/CMakeLists.txt	2008-03-26 19:26:31 UTC (rev 3934)
@@ -0,0 +1,16 @@
+SET(ADM_coreUI_SRCS 
+        DIA_factory.cpp
+        DIA_fileSel.cpp
+)
+
+ADD_LIBRARY(ADM_coreUI SHARED ${ADM_coreUI_SRCS})
+ADD_TARGET_DEFINITIONS(ADM_coreUI ADM_DEBUG FIND_LEAKS)
+
+IF (MINGW)
+ELSEIF (APPLE)
+	ADD_TARGET_LDFLAGS(ADM_coreUI "-framework Carbon")
+ENDIF (MINGW)
+
+REMOVE_DEFINITIONS(-DHAVE_CONFIG_H)
+
+INSTALL(TARGETS ADM_coreUI RUNTIME DESTINATION ${BIN_DIR} LIBRARY DESTINATION lib)

Added: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_factory.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_factory.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_factory.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -0,0 +1,75 @@
+/***************************************************************************
+                          DIA_factory.cpp
+  This file contains only redirect functions.
+  Check the GTK/QT/.. functions to see the intersting parts
+  (C) Mean 2008 fixounet at free.fr
+
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#include "ADM_default.h"
+#include "DIA_coreUI_internal.h"
+#include "DIA_factoryStubs.h"
+
+static FactoryDescriptor *Factory=NULL;
+/**
+ * 	\fn FactoryDescriptor
+ */
+uint8_t  DIA_factoryInit(FactoryDescriptor *d)
+{
+	Factory=d;
+	return 1;
+}
+// ****************** All ************************
+uint8_t diaFactoryRun(const char *title,uint32_t nb,diaElem **elems)
+{
+	ADM_assert(Factory); 
+	return Factory->FactoryRun(title,nb,elems);
+}
+uint8_t diaFactoryRunTabs(const char *title,uint32_t nb,diaElemTabs **tabs)
+{
+	ADM_assert(Factory); 
+	return Factory->FactoryRunTab(title,nb,tabs);
+}
+
+// ****************** Buttons ********************
+diaElemButton ::diaElemButton(const char *toggleTitle, ADM_FAC_CALLBACK *cb,void *cookie,const char *tip) :diaElem(ELEM_BUTTON)
+{
+	ADM_assert(Factory); 
+	internalPointer=Factory->CreareButton(toggleTitle, cb,cookie,tip);
+}
+diaElemButton ::~diaElemButton()
+{
+	ADM_assert(Factory); 
+	Factory->DestroyButton(internalPointer);
+	internalPointer=NULL;
+}
+void      diaElemButton::enable(uint32_t onoff)
+	{ 
+		ADM_assert(internalPointer); 
+		internalPointer->enable(onoff); 
+	}
+DIA_MKSTUBS(diaElemButton)
+// ****************** Bar ********************
+diaElemBar ::diaElemBar(uint32_t percent,const char *toggleTitle) :diaElem(ELEM_BAR)
+{
+	ADM_assert(Factory); 
+	internalPointer=Factory->CreateBar(percent,toggleTitle);
+}
+diaElemBar ::~diaElemBar()
+{
+	ADM_assert(Factory); 
+	Factory->DestroyBar(internalPointer);
+	internalPointer=NULL;
+}
+DIA_MKSTUBS(diaElemBar)
+// ******************************************	
+// EOF

Added: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_fileSel.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_fileSel.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_fileSel.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -0,0 +1,110 @@
+/***************************************************************************
+                          DIA_fileSel.cpp
+  
+  (C) Mean 2008 fixounet at free.fr
+
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#include "ADM_default.h"
+#include "DIA_coreUI_internal.h"
+
+static DIA_FILESEL_DESC_T *fileSelDescriptor=NULL;
+/**
+ * 	\fn DIA_fileSelInit
+ *  \brief Hook the fileDialog
+ */
+uint8_t DIA_fileSelInit(DIA_FILESEL_DESC_T *d)
+{
+	fileSelDescriptor=d;
+	fileSelDescriptor->fileInit();
+	return 1;
+}
+
+// A bunch of boomerang functions
+/**
+ * \fn GUI_FileSelRead
+ * \brief Select a file for reading, when ok the CB callback is called with the name as argument
+ */	
+void GUI_FileSelRead(const char *label,SELFILE_CB cb) 
+{
+	ADM_assert(fileSelDescriptor);
+	return fileSelDescriptor->fileReadCb(label,cb);	
+}
+/**
+ * \fn GUI_FileSelWrite
+ * \brief Select a file for Writing, when ok the CB callback is called with the name as argument
+ */	
+void GUI_FileSelWrite(const char *label,SELFILE_CB cb) 
+{
+	ADM_assert(fileSelDescriptor);
+	return fileSelDescriptor->fileWriteCb(label,cb);	
+}
+/**
+ * \fn GUI_FileSelRead
+ * \brief Select a file for reading, name is allocated with a copy of the name, null if fail.
+ */	
+void GUI_FileSelRead(const char *label,char * * name) 
+{
+	ADM_assert(fileSelDescriptor);
+	return fileSelDescriptor->fileReadName(label,name);	
+}
+/**
+ * \fn GUI_FileSelWrite
+ * \brief Select a file for Writing, name is allocated with a copy of the name, null if fail.
+ */	
+
+void GUI_FileSelWrite(const char *label,char * * name) 
+{
+	ADM_assert(fileSelDescriptor);
+	return fileSelDescriptor->fileWriteName(label,name);	
+}
+/**
+ * \fn FileSel_SelectWrite
+ * \brief Select a file for Writing, name is allocated with a copy of the name, null if fail.
+ * @param title : [in] Title of the dialog box
+ * @param target: [in/out] Buffer that will hold the name, must be at least max bytes big
+ * @param max : [in] Max number of bytes the buffer will hold
+ * @param source : [in] Initial value for the file, can be null
+ */	
+uint8_t FileSel_SelectWrite(const char *title,char *target,uint32_t max, const char *source)
+{
+	ADM_assert(fileSelDescriptor);
+	return fileSelDescriptor->fileSelectWrite(title,target,max, source);
+}
+/**
+ * \fn FileSel_SelectRead
+ * \brief Select a file for Reading, name is allocated with a copy of the name, null if fail.
+ * @param title : [in] Title of the dialog box
+ * @param target: [in/out] Buffer that will hold the name, must be at least max bytes big
+ * @param max : [in] Max number of bytes the buffer will hold
+ * @param source : [in] Initial value for the file, can be null
+ */	
+uint8_t FileSel_SelectRead(const char *title,char *target,uint32_t max, const char *source)
+{
+	ADM_assert(fileSelDescriptor);
+	return fileSelDescriptor->fileSelectRead(title,target,max, source);
+}
+/**
+ * \fn FileSel_SelectDir
+ * \brief Select a directory, name is allocated with a copy of the name, null if fail.
+ * @param title : [in] Title of the dialog box
+ * @param target: [in/out] Buffer that will hold the name, must be at least max bytes big
+ * @param max : [in] Max number of bytes the buffer will hold
+ * @param source : [in] Initial value for the file, can be null
+ */	
+uint8_t FileSel_SelectDir(const char *title,char *target,uint32_t max, const char *source)
+{
+	ADM_assert(fileSelDescriptor);
+	return fileSelDescriptor->fileSelectDirectory(title,target,max, source);
+}
+
+// EOF

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter_dylib.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter_dylib.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter_dylib.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -33,7 +33,7 @@
 #include "fourcc.h"
 
 #include "ADM_toolkit/toolkit.hxx"
-#include "ADM_toolkit/filesel.h"
+#include "DIA_fileSel.h"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_filter/video_filters.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_inpics/ADM_pics.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_inpics/ADM_pics.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_inpics/ADM_pics.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -34,7 +34,7 @@
 #include "ADM_toolkit/bitmap.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_assert.h"
-#include "ADM_toolkit/filesel.h"
+#include "DIA_fileSel.h"
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME MODULE_INPIC
 #include "ADM_osSupport/ADM_debug.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_indexer.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_indexer.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_indexer.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -27,7 +27,7 @@
 
 
 #include "ADM_toolkit/toolkit.hxx"
-#include "ADM_toolkit/filesel.h"
+#include "DIA_fileSel.h"
 #include "ADM_osSupport/ADM_quota.h"
 #include "ADM_userInterfaces/ADM_commonUI/DIA_idx_pg.h"
 #include "ADM_libraries/ADM_utilities/avidemutils.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_indexer_h264.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_indexer_h264.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_indexer_h264.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -26,7 +26,7 @@
 
 
 #include "ADM_toolkit/toolkit.hxx"
-#include "ADM_toolkit/filesel.h"
+#include "DIA_fileSel.h"
 #include "ADM_osSupport/ADM_quota.h"
 #include "ADM_userInterfaces/ADM_commonUI/DIA_idx_pg.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_indexer_mpeg2.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_indexer_mpeg2.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_indexer_mpeg2.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -26,7 +26,7 @@
 
 
 #include "ADM_toolkit/toolkit.hxx"
-#include "ADM_toolkit/filesel.h"
+#include "DIA_fileSel.h"
 #include "ADM_osSupport/ADM_quota.h"
 #include "ADM_userInterfaces/ADM_commonUI/DIA_idx_pg.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_probe.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_probe.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_probe.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -25,7 +25,7 @@
 #include "ADM_assert.h"
 
 #include "ADM_toolkit/toolkit.hxx"
-#include "ADM_toolkit/filesel.h"
+#include "DIA_fileSel.h"
 #include "fourcc.h"
 #include "ADM_userInterfaces/ADM_commonUI/DIA_working.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_probeTS.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_probeTS.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_probeTS.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -26,7 +26,7 @@
 
 
 #include "ADM_toolkit/toolkit.hxx"
-#include "ADM_toolkit/filesel.h"
+#include "DIA_fileSel.h"
 #include "fourcc.h"
 #include "ADM_userInterfaces/ADM_commonUI/DIA_working.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_nuv/ADM_nuv.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_nuv/ADM_nuv.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_nuv/ADM_nuv.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -77,7 +77,7 @@
 #include "RTjpegN.h"
 
 #include "ADM_toolkit/toolkit.hxx"
-#include "ADM_toolkit/filesel.h"
+#include "DIA_fileSel.h"
 
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME MODULE_NUV

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/avcodec.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/avcodec.h	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/avcodec.h	2008-03-26 19:26:31 UTC (rev 3934)
@@ -2298,7 +2298,7 @@
 
 #if LIBAVCODEC_VERSION_INT < ((52<<16)+(0<<8)+0)
 /* YUV420 format is assumed ! */
-
+#if 0 // MEANX
 /**
  * @deprecated Use the software scaler (swscale) instead.
  */
@@ -2330,7 +2330,7 @@
  * @deprecated Use the software scaler (swscale) instead.
  */
 attribute_deprecated void img_resample_close(struct ImgReSampleContext *s);
-
+#endif //MEANX
 #endif
 
 /**

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_ocr/ADM_bitmapSource.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_ocr/ADM_bitmapSource.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_ocr/ADM_bitmapSource.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -23,8 +23,8 @@
  #include "ADM_ocr.h"
  #include "ADM_ocrInternal.h"
  #include "ADM_toolkit/toolkit.hxx"
- #include "ADM_userInterfaces/ADM_commonUI/DIA_enter.h"
- #include "ADM_videoFilter/ADM_vidDvbSub.h"
+ #include "DIA_enter.h"
+#include "ADM_videoFilter/ADM_vidDvbSub.h"
 
 /*  *****************************
  * 	**** Case 1 : Vobsub ********

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_ocr/ADM_ocr.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_ocr/ADM_ocr.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_ocr/ADM_ocr.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -23,8 +23,7 @@
  #include "ADM_ocr.h"
 #include "ADM_ocrInternal.h"
  #include "ADM_toolkit/toolkit.hxx"
- #include "ADM_userInterfaces/ADM_commonUI/DIA_enter.h"
-
+ #include "DIA_enter.h"
 static uint32_t minThreshold=0x80;
 
 /* In the UI related code */

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_ocr/ADM_vob2vobsub.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_ocr/ADM_vob2vobsub.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_ocr/ADM_vob2vobsub.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -43,7 +43,7 @@
 #include "ADM_audio/aviaudio.hxx"
 #include "ADM_audiofilter/audioprocess.hxx"
 
-#include "ADM_toolkit/filesel.h"
+#include "DIA_fileSel.h"
 #include "ADM_inputs/ADM_mpegdemuxer/dmx_demuxer.h"
 #include "ADM_inputs/ADM_mpegdemuxer/dmx_demuxerPS.h"
 #include "ADM_userInterfaces/ADM_commonUI/DIA_working.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisave.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisave.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisave.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -54,7 +54,7 @@
 
 
 #include "ADM_audiofilter/audioeng_buildfilters.h"
-#include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
+#include "ADM_coreUI/include/DIA_factory.h"
 const char *getStrFromAudioCodec( uint32_t codec);
 //_________________________
 uint8_t ADM_aviUISetMuxer(  void )
@@ -374,7 +374,7 @@
       encoding_gui=NULL;
 
 }
-void GenericAviSave::guiSetPhasis(char *str)
+void GenericAviSave::guiSetPhasis(const char *str)
 {
       ADM_assert(encoding_gui);
       encoding_gui->setPhasis(str);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisave.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisave.h	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisave.h	2008-03-26 19:26:31 UTC (rev 3934)
@@ -64,7 +64,7 @@
                     virtual uint8_t writeVideoChunk(uint32_t frame )=0;
                     virtual void guiStart(void);
                     virtual void guiStop(void);
-                    	    void guiSetPhasis(char *str);
+                    	    void guiSetPhasis(const char *str);
                     virtual uint8_t guiUpdate(uint32_t nb,uint32_t total);		    
                     uint8_t	handleMuxSize(void ) ; // auto chop
                     uint8_t reigniteChunk( uint32_t len, uint8_t *data );

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSFunctions.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSFunctions.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSFunctions.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -42,9 +42,9 @@
 #include "ADM_script/ADM_container.h"
 
 #include "ADM_JSGlobal.h"
-#include "ADM_toolkit/filesel.h"
+#include "DIA_fileSel.h"
 
-#include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 
 std::vector <std::string> g_vIncludes;
 extern char **environ;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -31,7 +31,7 @@
 #include "ADM_toolkit/toolkit.hxx"
 #include "DIA_flyDialog.h"
 #include "DIA_flySwissArmyKnife.h"
-#include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h" // for diaElemMenu etc.
+#include "DIA_factory.h"
 #include "ADM_filter/video_filters.h"
 
 #undef _

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -19,7 +19,7 @@
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
 
 #include "ADM_toolkit/toolkit.hxx"
-#include "ADM_toolkit/filesel.h"
+#include "DIA_fileSel.h"
 
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eraser.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eraser.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eraser.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -28,11 +28,11 @@
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_videoFilter/ADM_vidEraser.h"
 #include "ADM_toolkit/toolkit.hxx"
-#include "ADM_toolkit/filesel.h"
+#include "DIA_fileSel.h"
 
 #include "DIA_flyDialog.h"
 #include "DIA_flyEraser.h"
-#include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h" // for diaElemMenu etc.
+#include "DIA_factory.h"
 #include "ADM_filter/video_filters.h"
 
 using namespace std;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs_save.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs_save.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs_save.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -1,6 +1,6 @@
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
 #include "ADM_toolkit/toolkit.hxx"
-#include "ADM_toolkit/filesel.h"
+#include "DIA_fileSel.h"
 #include "avidemutils.h"
 
 static GtkWidget       *create_dialog1 (void);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -28,11 +28,11 @@
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_videoFilter/ADM_vidParticle.h"
 #include "ADM_toolkit/toolkit.hxx"
-#include "ADM_toolkit/filesel.h"
+#include "DIA_fileSel.h"
 
 #include "DIA_flyDialog.h"
 #include "DIA_flyParticle.h"
-#include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h" // for diaElemMenu etc.
+#include "DIA_factory.h"
 #include "ADM_filter/video_filters.h"
 
 #undef _

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_srt.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_srt.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_srt.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -20,7 +20,7 @@
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
 
 #include "ADM_toolkit/toolkit.hxx"
-#include "ADM_toolkit/filesel.h"
+#include "DIA_fileSel.h"
 
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -15,7 +15,7 @@
  ***************************************************************************/
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
 #include "ADM_toolkit/toolkit.hxx"
-#include "ADM_toolkit/filesel.h"
+#include "DIA_fileSel.h"
 
 #define CHECK_GET(x,y) {*y=gtk_toggle_button_get_active( GTK_TOGGLE_BUTTON(WID(x)));}
 #define CHECK_SET(x,y) {gtk_toggle_button_set_active( GTK_TOGGLE_BUTTON(WID(x)),*y);}   

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -1,5 +1,5 @@
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
-#include "ADM_toolkit/filesel.h"
+#include "DIA_fileSel.h"
 #include "ADM_toolkit/toolkit.hxx"
 
 #ifdef USE_XVID_4

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_dialogFactory.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_dialogFactory.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_dialogFactory.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -13,12 +13,16 @@
  ***************************************************************************/
 
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
-#include "../ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
+#include "DIA_coreUI_internal.h"
 
 static uint8_t  buildOneTab(GtkWidget *nb,int index, diaElemTabs *tab);
 static uint8_t  readOneTab(int index, diaElemTabs *tab);
+//
+static uint8_t gtkDiaFactoryRunTabs(const char *title,uint32_t nb,diaElemTabs **tabs);
+static uint8_t gtkDiaFactoryRun(const char *title,uint32_t nb,diaElem **elems);
+//
 
-
 /**
     \fn addLine(diaElem *elem, GtkDialog *dialog, GtkWidget *vbox)
     \brief setup an line with the element given as parameter
@@ -48,7 +52,7 @@
     @return 0 on failure, 1 on success
 */
 
-uint8_t diaFactoryRun(const char *title,uint32_t nb,diaElem **elems)
+uint8_t gtkDiaFactoryRun(const char *title,uint32_t nb,diaElem **elems)
 {
   uint8_t ret=0;
   ADM_assert(elems);
@@ -146,7 +150,7 @@
     \fn   diaFactoryRun
     \brief   Same as above but for tabbed dialog
 */
-uint8_t diaFactoryRunTabs(const char *title,uint32_t nb,diaElemTabs **tabs)
+uint8_t gtkDiaFactoryRunTabs(const char *title,uint32_t nb,diaElemTabs **tabs)
 {
   uint8_t ret=0;
   ADM_assert(tabs);
@@ -283,4 +287,38 @@
   return 1; 
 }
 
+
+//*****************HOOK************
+/**
+ * 	\fn InitFactory
+ *  \brief Install hoook for dialogFactory
+ * */
+extern diaElem  *gtkCreateButton(const char *toggleTitle, ADM_FAC_CALLBACK *cb,void *cookie,const char *tip);
+extern void 	gtkDeleteButton(diaElem *e);
+extern diaElem  *gtkCreateBar(uint32_t percent,const char *toggleTitle);
+extern void     gtkDeleteBar(diaElem *e);
+//************
+static FactoryDescriptor GtkFactoryDescriptor=
+{
+	&gtkDiaFactoryRun,
+	&gtkDiaFactoryRunTabs,
+	// Buttons
+	&gtkCreateButton,
+	&gtkDeleteButton,
+	// Bar
+	&gtkCreateBar,
+	&gtkDeleteBar
+};
+
+/**
+ * 	\fn InitFactory
+ *  \brief Install our factory hooks
+ */
+void InitFactory(void)
+{
+	DIA_factoryInit(&GtkFactoryDescriptor);
+	
+	
+}
+
 //EOF

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_filesel.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_filesel.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_filesel.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -13,8 +13,8 @@
  *                                                                         *
  ***************************************************************************/
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
-#include "../ADM_commonUI/DIA_factory.h"
-#include "ADM_toolkit/filesel.h"
+#include "DIA_factory.h"
+#include "DIA_fileSel.h"
 
 static void fileRead(void *w,void *p);
 static void dirSel(void *w,void *p);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bar.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bar.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bar.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -14,9 +14,21 @@
  ***************************************************************************/
 
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
-#include "../ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
+namespace ADM_GtkFactory
+{
+class diaElemBar : public diaElem
+{
+  protected :
+        uint32_t per;
+public:
+  
+  diaElemBar(uint32_t percent,const char *toggleTitle);
+  virtual ~diaElemBar() ;
+  void setMe(void *dialog, void *opaque,uint32_t line);
+  void getMe(void);
+};
 
-
 diaElemBar::diaElemBar(uint32_t percent,const char *toggleTitle)
   : diaElem(ELEM_BAR)
 {
@@ -61,5 +73,17 @@
 {
   
 }
+} // End of namespace
+//****************************Hoook*****************
 
+diaElem  *gtkCreateBar(uint32_t percent,const char *toggleTitle)
+{
+	return new  ADM_GtkFactory::diaElemBar(percent,toggleTitle);
+}
+void gtkDeleteBar(diaElem *e)
+{
+	ADM_GtkFactory::diaElemBar *a=(ADM_GtkFactory::diaElemBar *)e;
+	delete a;
+}
+//
 //EOF

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -14,7 +14,7 @@
  ***************************************************************************/
 
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
-#include "../ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 
 
 static void cb_mod(void *w,void *p);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_button.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_button.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_button.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -14,11 +14,26 @@
  ***************************************************************************/
 
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
-#include "../ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 
+namespace ADM_GtkFactory
+{
 
 static void cb_button (GtkWidget *widget,gpointer callback_data);
+class diaElemButton : public diaElem
+{
+  protected:
+  public:
+    void            *_cookie;
+    ADM_FAC_CALLBACK *_callBack;
+            diaElemButton(const char *toggleTitle, ADM_FAC_CALLBACK *cb,void *cookie,const char *tip=NULL);
+  virtual   ~diaElemButton() ;
+  void      setMe(void *dialog, void *opaque,uint32_t line);
+  void      getMe(void);
+  void      enable(uint32_t onoff) ;
+};
 
+
 diaElemButton:: diaElemButton(const char *toggleTitle, ADM_FAC_CALLBACK *cb,void *cookie,const char *tip)
   : diaElem(ELEM_BUTTON)
 {
@@ -65,4 +80,18 @@
   button->_callBack(button->_cookie);
 }
 
+} // End of namespace
+//****************************Hoook*****************
+
+diaElem  *gtkCreateButton(const char *toggleTitle, ADM_FAC_CALLBACK *cb,void *cookie,const char *tip)
+{
+	return new  ADM_GtkFactory::diaElemButton(toggleTitle,cb,cookie,tip);
+}
+void gtkDeleteButton(diaElem *e)
+{
+	ADM_GtkFactory::diaElemButton *a=(ADM_GtkFactory::diaElemButton *)e;
+	delete a;
+}
+//
+
 //EOF

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_float.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_float.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_float.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -14,7 +14,7 @@
  ***************************************************************************/
 
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
-#include "../ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 
 diaElemFloat::diaElemFloat(ELEM_TYPE_FLOAT *intValue,const char *toggleTitle, 
                             ELEM_TYPE_FLOAT min, ELEM_TYPE_FLOAT max,const char *tip)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_frame.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_frame.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_frame.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -14,7 +14,7 @@
  ***************************************************************************/
 
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
-#include "../ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 
 
 diaElemFrame::diaElemFrame(const char *toggleTitle, const char *tip)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_hex.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_hex.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_hex.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -14,7 +14,7 @@
  ***************************************************************************/
 
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
-#include "../ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 
 
 #define HEX_NB_LINE   8

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_integer.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_integer.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_integer.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -14,7 +14,7 @@
  ***************************************************************************/
 
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
-#include "../ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 
 diaElemInteger::diaElemInteger(int32_t *intValue,const char *toggleTitle, int32_t min, int32_t max,const char *tip)
   : diaElem(ELEM_INTEGER)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_matrix.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_matrix.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_matrix.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -14,7 +14,7 @@
  ***************************************************************************/
 
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
-#include "../ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 
 diaElemMatrix::diaElemMatrix(uint8_t *trix,const char *toggleTitle, uint32_t trixSize,const char *tip)
   : diaElem(ELEM_MATRIX)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_menu.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_menu.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_menu.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -14,7 +14,7 @@
  ***************************************************************************/
 
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
-#include "../ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 
 static void cb_menu(void *w,void *p);
 static void cb_menus(void *w,void *p);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_notch.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_notch.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_notch.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -14,7 +14,7 @@
  ***************************************************************************/
 
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
-#include "../ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 
 
 diaElemNotch::diaElemNotch(uint32_t yes,const char *toggleTitle, const char *tip)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_readOnlyText.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_readOnlyText.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_readOnlyText.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -14,7 +14,7 @@
  ***************************************************************************/
 
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
-#include "../ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 
 
 diaElemReadOnlyText::diaElemReadOnlyText(char *readyOnly,const char *toggleTitle,const char *tip)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_threadCount.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_threadCount.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_threadCount.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -14,7 +14,7 @@
  ***************************************************************************/
 
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
-#include "../ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 
 static void customToggled(void *widget, void *userData);
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_toggle.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_toggle.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_toggle.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -14,7 +14,7 @@
  ***************************************************************************/
 
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
-#include "../ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 
 static void cb_menu(void *w,void *p);
 static void cb_menu2(void *w,void *p);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -11,7 +11,7 @@
 #include <vector>
 
 #include "ADM_toolkit/toolkit.hxx"
-#include "ADM_toolkit/filesel.h"
+#include "DIA_fileSel.h"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_videoNull.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -27,7 +27,7 @@
 #include "ADM_codecs/ADM_codec.h"
 #include "../ADM_commonUI/GUI_ui.h"
 
-#include "ADM_toolkit/filesel.h"
+#include "DIA_fileSel.h"
 #include "ADM_editor/ADM_Video.h"
 
 #include "prefs.h"
@@ -120,7 +120,10 @@
 extern void guiCallback(GtkMenuItem * menuitem, gpointer user_data);
 extern void HandleAction(Action act);
 extern gboolean UI_on_key_press(GtkWidget *widget, GdkEventKey* event, gpointer user_data);
+namespace ADM_GTK_fileSel
+{
 extern void fileReadWrite(SELFILE_CB cb, int rw, char *name);
+};
 
 // To build vcodec
 extern uint32_t encoderGetNbEncoder(void);
@@ -1178,11 +1181,11 @@
       char *filename=names[i];
       if (avifileinfo) 
               {
-                    fileReadWrite(A_appendAvi, 0, (char*)filename);
+    	  		   ADM_GTK_fileSel::fileReadWrite(A_appendAvi, 0, (char*)filename);
                }
                else
                {
-                    fileReadWrite(reinterpret_cast <void (*)(char *)> (A_openAvi), 0, (char*)filename);
+            	   ADM_GTK_fileSel::fileReadWrite(reinterpret_cast <void (*)(char *)> (A_openAvi), 0, (char*)filename);
                }
       ADM_dealloc(names[i]); 
     }

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -13,11 +13,11 @@
  ***************************************************************************/
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
 #include "ADM_toolkit/toolkit.hxx"
-#include "ADM_toolkit/filesel.h"
+#include "DIA_fileSel.h"
 
 
 #include "ADM_ocr/adm_glyph.h"
-#include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 static GtkWidget *create_dialog1 (void);
 static admGlyph *currentGlyph=NULL;
 static GtkWidget *dialog;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_ocr.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_ocr.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_ocr.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -37,7 +37,7 @@
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_filter/video_filters.h"
 
-#include "ADM_toolkit/filesel.h"
+#include "DIA_fileSel.h"
 #include "ADM_colorspace/colorspace.h"
 
 #include "ADM_videoFilter/ADM_vobsubinfo.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -27,15 +27,18 @@
 #include "ADM_default.h"
 #include "avi_vars.h"
 
-#include "ADM_toolkit/filesel.h"
+#include "DIA_fileSel.h"
+#include "DIA_coreUI_internal.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "prefs.h"
 
 #define TH_READ 1
 #define TH_WRITE 2
-
 extern char *actual_workbench_file;
 
+namespace ADM_GTK_fileSel 
+{
+
 static void GUI_FileSel(const char *label, SELFILE_CB *cb, int rw, char **name = NULL);
 uint8_t initFileSelector(void);
 
@@ -544,4 +547,30 @@
 
 	return 1;
 }
+/*************/
+void init(void)
+{
+	initFileSelector();
+}
+} // End of nameSpace
+static DIA_FILESEL_DESC_T GtkFileSelDesc=
+{
+	ADM_GTK_fileSel::init,	
+	ADM_GTK_fileSel::GUI_FileSelRead,
+	ADM_GTK_fileSel::GUI_FileSelWrite,
+	ADM_GTK_fileSel::GUI_FileSelRead,
+	ADM_GTK_fileSel::GUI_FileSelWrite,
+	ADM_GTK_fileSel::FileSel_SelectWrite,
+	ADM_GTK_fileSel::FileSel_SelectRead,
+	ADM_GTK_fileSel::FileSel_SelectDir
+};
+
+
+
+// Hook our functions
+void initFileSelector(void)
+{
+	DIA_fileSelInit(&GtkFileSelDesc);
+}
+
 //EOF

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_none.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_none.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_none.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -87,7 +87,6 @@
 void DIA_Calculator(uint32_t *sizeInMeg, uint32_t *avgBitrate ) {}
 void DIA_properties(void) {}
 int GUI_handleVFilter (void) {return 0;}
-uint8_t initFileSelector(void) {return 0;}
 uint8_t initGUI(void) {return 1;}
 void destroyGUI(void) {}
 uint8_t DIA_job(uint32_t nb,char **name) {return 0;}

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialogFactory/DIA_dialogFactory.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialogFactory/DIA_dialogFactory.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialogFactory/DIA_dialogFactory.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -37,7 +37,10 @@
 {
   return 0; 
 }
+void InitFactory(void)
+{
+	
+}
 
 
-
 //EOF

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_gui2/file_none.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_gui2/file_none.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_gui2/file_none.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -14,12 +14,21 @@
 #include <stdlib.h>
 #include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
-#include "ADM_toolkit/filesel.h"
+#include "DIA_fileSel.h"
+#include "DIA_coreUI_internal.h"
 
-uint8_t FileSel_SelectDir(const char *title,char *target,uint32_t max, const char *source)
-{ 
-  return 0;
-}
+namespace  ADM_CLI_fileSel
+{
+//********************
+static void GUI_FileSelRead(const char *label,SELFILE_CB cb);
+static void GUI_FileSelWrite(const char *label,SELFILE_CB cb);
+static void GUI_FileSelRead(const char *label, char * * name);
+static void GUI_FileSelWrite(const char *label, char * * name);
+static uint8_t FileSel_SelectDir(const char *title,char *target,uint32_t max, const char *source);
+static uint8_t FileSel_SelectWrite(const char *title,char *target,uint32_t max, const char *source);
+static uint8_t FileSel_SelectRead(const char *title,char *target,uint32_t max, const char *source);
+static void init(void);
+//********************
 void GUI_FileSelRead(const char *label,SELFILE_CB cb) 
 {}
 void GUI_FileSelWrite(const char *label,SELFILE_CB cb) 
@@ -29,6 +38,45 @@
 void GUI_FileSelWrite(const char *label, char * * name)
 {}
 
+uint8_t FileSel_SelectWrite(const char *title,char *target,uint32_t max, const char *source)
+{
+	return 0;
+}
+uint8_t FileSel_SelectRead(const char *title,char *target,uint32_t max, const char *source)
+{
+  return 0;
+}
+uint8_t FileSel_SelectDir(const char *title,char *target,uint32_t max, const char *source)
+{
+	return 0;
+}
+void init(void)
+{
+	return ;
+}
+
+} //--- end namespace-------------
+static DIA_FILESEL_DESC_T CliFileSelDesc=
+{
+	ADM_CLI_fileSel::init,	
+	ADM_CLI_fileSel::GUI_FileSelRead,
+	ADM_CLI_fileSel::GUI_FileSelWrite,
+	ADM_CLI_fileSel::GUI_FileSelRead,
+	ADM_CLI_fileSel::GUI_FileSelWrite,
+	ADM_CLI_fileSel::FileSel_SelectWrite,
+	ADM_CLI_fileSel::FileSel_SelectRead,
+	ADM_CLI_fileSel::FileSel_SelectDir
+};
+
+
+
+// Hook our functions
+void initFileSelector(void)
+{
+	DIA_fileSelInit(&CliFileSelDesc);
+}
+
+
 uint8_t UI_getPhysicalScreenSize(void *window, uint32_t *w,uint32_t *h)
 {
   *w=*h=10000; 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -7,9 +7,9 @@
 #include "config.h"
 #include "ADM_default.h"
 
-#include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 #include "ADM_toolkit/toolkit.hxx"
-#include "ADM_toolkit/filesel.h"
+#include "DIA_fileSel.h"
 
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -10,7 +10,7 @@
 #ifdef USE_X264
 #include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
-#include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 #include "ADM_encoder/ADM_vidEncode.hxx"
 #include "ADM_codecs/ADM_x264param.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_xvid4.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_xvid4.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_xvid4.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -10,7 +10,7 @@
 #ifdef USE_XVID_4
 #include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
-#include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 #include "ADM_encoder/ADM_vidEncode.hxx"
 #include "ADM_codecs/ADM_xvid4param.h"
 /**

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_bar.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_bar.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_bar.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -28,7 +28,7 @@
 #include <QProgressBar>
 
 #include "ADM_default.h"
-#include "../ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 #include "ADM_assert.h"
 
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_float.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_float.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_float.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -27,7 +27,7 @@
 #include <QLabel>
 
 #include "ADM_default.h"
-#include "../ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 #include "ADM_assert.h"
 
 extern const char *shortkey(const char *);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_frame.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_frame.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_frame.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -28,7 +28,7 @@
 #include <QLabel>
 
 #include "ADM_default.h"
-#include "../ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 #include "ADM_assert.h"
 
 extern const char *shortkey(const char *);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_hex.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_hex.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_hex.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -27,7 +27,7 @@
 #include <QCheckBox>
 
 #include "ADM_default.h"
-#include "../ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 #include "ADM_assert.h"
 
 extern const char *shortkey(const char *);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_integer.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_integer.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_integer.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -28,7 +28,7 @@
 #include <QSlider>
 
 #include "ADM_default.h"
-#include "../ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 #include "ADM_assert.h"
 
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_matrix.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_matrix.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_matrix.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -27,7 +27,7 @@
 #include <QLabel>
 
 #include "ADM_default.h"
-#include "../ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 #include "ADM_assert.h"
 
 extern const char *shortkey(const char *);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_notch.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_notch.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_notch.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -27,7 +27,7 @@
 #include <QCheckBox>
 
 #include "ADM_default.h"
-#include "../ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 #include "ADM_assert.h"
 
 extern const char *shortkey(const char *);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_readOnlyText.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_readOnlyText.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_readOnlyText.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -28,7 +28,7 @@
 #include <QLineEdit>
 
 #include "ADM_default.h"
-#include "../ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 #include "ADM_assert.h"
 
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_bitrate.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_bitrate.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_bitrate.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -29,7 +29,7 @@
 #include <QLabel>
 
 #include "ADM_default.h"
-#include "../ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 #include "ADM_assert.h"
 
 extern const char *shortkey(const char *);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_button.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_button.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_button.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -29,7 +29,7 @@
 #include <QLabel>
 
 #include "ADM_default.h"
-#include "../ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 #include "ADM_assert.h"
 
 extern const char *shortkey(const char *);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_dialogFactory.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_dialogFactory.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_dialogFactory.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -29,7 +29,7 @@
 #include <QTabWidget>
 
 #include "ADM_default.h"
-#include "../ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 #include "ADM_assert.h"
 
 class factoryWindow : public QDialog
@@ -205,4 +205,12 @@
     tab->dias[i]->finalize(); 
   }
 }
+/**
+ * 
+ */
+void InitFactory(void)
+{
+	
+}
+
 //EOF

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_filesel.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_filesel.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_filesel.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -30,7 +30,7 @@
 
 #include "ADM_default.h"
 #include "prefs.h"
-#include "../ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 #include "ADM_assert.h"
 #include "ADM_toolkit/filesel.h"
 extern const char *shortkey(const char *);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_menu.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_menu.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_menu.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -27,7 +27,7 @@
 #include <QGridLayout>
 
 #include "ADM_default.h"
-#include "../ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 #include "ADM_assert.h"
 
 #include <QCheckBox>

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_slider.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_slider.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_slider.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -28,7 +28,7 @@
 #include <QSlider>
 
 #include "ADM_default.h"
-#include "../ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 #include "ADM_assert.h"
 
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_threadCount.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_threadCount.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_threadCount.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -22,7 +22,7 @@
 #include <QSpinBox>
 
 #include "ADM_default.h"
-#include "../ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 
 extern const char* shortkey(const char*);
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_toggle.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_toggle.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_toggle.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -28,7 +28,7 @@
 #include <QSpinBox>
 
 #include "ADM_default.h"
-#include "../ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 #include "ADM_assert.h"
 
 extern const char *shortkey(const char *);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/Q_mainfilter.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/Q_mainfilter.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/Q_mainfilter.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -51,7 +51,7 @@
 #include "ADM_filter/video_filters.h"
 #include "ADM_video/ADM_vidPartial.h"
 #include "ADM_filter/vidVCD.h"
-#include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 /*******************************************************/
 #define NB_TREE 8
 #define myFg 0xFF

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/file_qt4.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/file_qt4.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/file_qt4.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -17,12 +17,18 @@
 #include "ADM_default.h"
 
 #include "ADM_toolkit/toolkit.hxx"
-#include "ADM_toolkit/filesel.h"
+#include "DIA_fileSel.h"
+#include "DIA_coreUI_internal.h"
+
 #include "prefs.h"
 
-    
+namespace ADM_QT4_fileSel
+{
 static void GUI_FileSelSelect(const char *label, char **name, uint32_t access) ;
-
+static void GUI_FileSelRead(const char *label,SELFILE_CB cb) ;
+static void GUI_FileSelWrite(const char *label,SELFILE_CB cb);
+static void GUI_FileSelRead(const char *label, char * * name);
+static void GUI_FileSelWrite(const char *label, char * * name);
 //****************************************************************************************************
 void GUI_FileSelRead(const char *label,SELFILE_CB cb) 
 {
@@ -199,8 +205,35 @@
 
   return 0;
 }
+/**
+ * 
+ */
+void init(void)
+{
+	// Nothing special to do for QT4 fileselector
+}
+} // End of nameSpace
+static DIA_FILESEL_DESC_T Qt4FileSelDesc=
+{
+	ADM_QT4_fileSel::init,	
+	ADM_QT4_fileSel::GUI_FileSelRead,
+	ADM_QT4_fileSel::GUI_FileSelWrite,
+	ADM_QT4_fileSel::GUI_FileSelRead,
+	ADM_QT4_fileSel::GUI_FileSelWrite,
+	ADM_QT4_fileSel::FileSel_SelectWrite,
+	ADM_QT4_fileSel::FileSel_SelectRead,
+	ADM_QT4_fileSel::FileSel_SelectDir
+};
 
 
 
+// Hook our functions
+void initFileSelector(void)
+{
+	DIA_fileSelInit(&Qt4FileSelDesc);
+}
+
+
+
 //****************************************************************************************************
 //EOF

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -16,7 +16,7 @@
 #include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 
-#include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 #include "ADM_audiofilter/audiofilter_normalize_param.h"
 #include "ADM_audiofilter/audioeng_buildfilters.h"
 /**

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioconfig.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioconfig.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioconfig.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -28,7 +28,6 @@
       @return 1 on success, 0 on failure
 
 */
-#include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
 int DIA_defaultSettings(ADM_audioEncoderDescriptor *descriptor)
   {
     int ret=0;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_gototime.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_gototime.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_gototime.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -1,6 +1,6 @@
 #include "config.h"
 #include "ADM_default.h"
-#include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 
 uint8_t DIA_gotoTime(uint16_t *hh, uint16_t *mm, uint16_t *ss)
 {

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavDecoder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavDecoder.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavDecoder.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -14,7 +14,7 @@
 
 #include "config.h"
 #include "ADM_default.h"
-#include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 
 /**
       \fn DIA_lavDecoder

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -16,7 +16,7 @@
 #include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 
-#include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 #include "ADM_lavcodec.h"
 #include "ADM_codecs/ADM_ffmpegConfig.h"
 #include "ADM_encoder/ADM_vidEncode.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -32,7 +32,7 @@
 #include "ADM_default.h"
 
 
-#include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_filter/video_filters.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -16,7 +16,7 @@
 #include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
 
-#include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 
 int DIA_getMPParams( uint32_t *pplevel, uint32_t *ppstrength,uint32_t *swap)
 {

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -21,7 +21,7 @@
 
 #include "ADM_toolkit/toolkit.hxx"
 
-#include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 #include "ADM_encoder/ADM_vidEncode.hxx"
 //#include "ADM_video/ADM_vidFont.h"
 class ADMfont;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -19,7 +19,7 @@
 
 #include "ADM_toolkit/toolkit.hxx"
 
-#include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 #include "ADM_videoFilter/ADM_vidTDeint_param.h"
 /**
       \fn DIA_tdeint

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tsSub.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tsSub.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tsSub.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -26,7 +26,7 @@
 #include "ADM_lavcodec.h"
 #include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
-#include "ADM_toolkit/filesel.h"
+#include "DIA_fileSel.h"
 #include "DIA_factory.h"
 #include "ADM_inputs/ADM_mpegdemuxer/dmx_mpegstartcode.h"
 #include "ADM_inputs/ADM_mpegdemuxer/dmx_demuxerTS.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -19,7 +19,7 @@
 #include "ADM_default.h"
 
 #include "ADM_toolkit/toolkit.hxx"
-#include "ADM_toolkit/filesel.h"
+#include "DIA_fileSel.h"
 #include "DIA_factory.h"
 
 /**

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidFieldUnblend.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidFieldUnblend.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidFieldUnblend.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -36,7 +36,7 @@
 #include "ADM_osSupport/ADM_debug.h"
 #include "ADM_video/ADM_cache.h"
 #include "ADM_filter/video_filters.h"
-#include "ADM_userInterfaces/ADM_commonUI/DIA_enter.h"
+#include "DIA_enter.h"
 
 #define MUL 1
 // Set it to 2 for post separate field

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -34,7 +34,7 @@
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_filter/video_filters.h"
 
-#include "ADM_toolkit/filesel.h"
+#include "DIA_fileSel.h"
 
 #include "ADM_colorspace/colorspace.h"
 
@@ -46,7 +46,7 @@
 
 #include "ADM_lavpp_deintparam.h"
 
-#include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 /*
 {"al", "autolevels",            0, 1, 2, LEVEL_FIX},
 {"lb", "linblenddeint",         1, 1, 4, LINEAR_BLEND_DEINT_FILTER},

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidASS.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidASS.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidASS.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -19,7 +19,7 @@
 #include "ADM_vidASS.h"
 #include "ADM_filter/video_filters.h"
 #include "ADM_colorspace/ADM_rgb.h"
-#include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 
 #ifdef USE_FREETYPE
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidAddBorder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidAddBorder.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidAddBorder.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -24,7 +24,7 @@
 #include "ADM_video/ADM_vidCommonFilter.h"
 #include "ADM_filter/video_filters.h"
 
-#include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 
 static FILTER_PARAM cropParam={4,{"left","right","top","bottom"}};
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidBSmear.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidBSmear.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidBSmear.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -30,7 +30,7 @@
 #include "ADM_video/ADM_vidCommonFilter.h"
 #include "ADM_filter/video_filters.h"
 
-#include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 
 static FILTER_PARAM cropParam={4,{"left","right","top","bottom"}};
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidBlendRemoval.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidBlendRemoval.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidBlendRemoval.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -36,9 +36,9 @@
 #include "ADM_osSupport/ADM_debug.h"
 #include "ADM_video/ADM_cache.h"
 #include "ADM_filter/video_filters.h"
-#include "ADM_userInterfaces/ADM_commonUI/DIA_enter.h"
+#include "DIA_enter.h"
 
-#include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 #include "ADM_vidBlendRemoval_param.h"
 #define MUL 1
 // Set it to 2 for post separate field

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -26,7 +26,7 @@
 
 #include "ADM_filter/video_filters.h"
 
-#include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 
 #include "ADM_vidComputeAverage.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDGbob.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDGbob.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDGbob.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -35,7 +35,7 @@
 
 #include "ADM_vidDGbob_param.h"
 
-#include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 
 class DGbob : public AVDMGenericVideoStream
 {

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDecDec.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDecDec.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDecDec.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -52,7 +52,7 @@
 #define MODULE_NAME MODULE_FILTER
 #include "ADM_osSupport/ADM_debug.h"
 
-#include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 
 
 #define PROGRESSIVE  0x00000001

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -42,7 +42,7 @@
 
 #include "ADM_vidDecTelecide.h"
 #include "ADM_filter/video_filters.h"
-#include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 
 static FILTER_PARAM decomb_template={16,{"order","back","guide",
 	 	 	"gthresh","post","chroma","vthresh",

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDeinterlace.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDeinterlace.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDeinterlace.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -28,7 +28,7 @@
 #include"ADM_vidDeinterlace.h"
 #include "ADM_filter/video_filters.h"
 
-#include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 
 static FILTER_PARAM deintParam={2,{"motion_trigger","blend_trigger"}};
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDenoise.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDenoise.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDenoise.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -30,7 +30,7 @@
 #include "ADM_filter/video_filters.h"
 
 
-#include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 
 static FILTER_PARAM denoiseParam={5,{"lumaLock","lumaThreshold","chromaLock","chromaThreshold",
 					"sceneChange"}};

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDropOut.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDropOut.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDropOut.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -21,7 +21,7 @@
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_vidDropOut.h"
 #include "ADM_filter/video_filters.h"
-#include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 
 static FILTER_PARAM dropParam={1,{"threshold"}};
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidEq2.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidEq2.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidEq2.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -32,7 +32,7 @@
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_filter/video_filters.h"
-#include "ADM_userInterfaces/ADM_commonUI/DIA_enter.h"
+#include "DIA_factory.h"
 #include "ADM_video/ADM_cache.h"
 
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidEraser.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidEraser.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidEraser.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -40,7 +40,7 @@
 
 #include "ADM_filter/video_filters.h"
 
-#include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 
 #include "ADM_vidEraser.h"
 #include "ADM_userInterfaces/ADM_commonUI/DIA_flyDialog.h" // for MenuMapping

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFade.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFade.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFade.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -23,7 +23,7 @@
 #include "ADM_filter/video_filters.h"
 #include "ADM_vidFade_param.h"
 
-#include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 
 class AVDM_Fade : public AVDMGenericVideoStream
 {

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFastConvolution.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFastConvolution.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFastConvolution.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -27,7 +27,7 @@
 #include "ADM_video/ADM_genvideo.hxx"
 
 #include"ADM_filter/video_filters.h"
-#include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 #include "ADM_vidConvolution.hxx"
 #include "ADM_assert.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFlux.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFlux.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFlux.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -36,7 +36,7 @@
 #include "ADM_video/ADM_genvideo.hxx"
 
 
-#include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 #include "ADM_vidFlux.h"
 #include "ADM_filter/video_filters.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidForcedPP.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidForcedPP.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidForcedPP.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -23,10 +23,10 @@
 #include "ADM_osSupport/ADM_debug.h"
 
 #include "ADM_vidForcedPP.h"
-#include "ADM_userInterfaces/ADM_commonUI/DIA_enter.h"
+#include "DIA_enter.h"
 #include "ADM_filter/video_filters.h"
 
-#include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 
 static FILTER_PARAM ppParam={3,{"postProcType","postProcStrength","forcedQuant"}};
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidHardIvtcRemoval.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidHardIvtcRemoval.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidHardIvtcRemoval.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -36,9 +36,9 @@
 #include "ADM_osSupport/ADM_debug.h"
 #include "ADM_video/ADM_cache.h"
 #include "ADM_filter/video_filters.h"
-#include "ADM_userInterfaces/ADM_commonUI/DIA_enter.h"
+#include "DIA_enter.h"
 
-#include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 
 #define MUL 1
 // Set it to 2 for post separate field

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidHue.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidHue.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidHue.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -18,7 +18,7 @@
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_filter/video_filters.h"
-#include "ADM_userInterfaces/ADM_commonUI/DIA_enter.h"
+#include "DIA_enter.h"
 #include "ADM_video/ADM_cache.h"
 
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -47,7 +47,7 @@
 #include "ADM_filter/video_filters.h"
 #include "ADM_vidKernelDeint.h"
 
-#include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 
 static FILTER_PARAM kdintParam={5,{"order","threshold","sharp","twoway","map"}};
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidLargeMedian.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidLargeMedian.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidLargeMedian.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -28,7 +28,7 @@
 
 #include"ADM_vidLargeMedian.h"
 #include "ADM_filter/video_filters.h"
-#include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 
 static FILTER_PARAM nullParam={2,{"chroma","luma"}};
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidLogo.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidLogo.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidLogo.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -34,7 +34,7 @@
 #include "ADM_video/ADM_vidCommonFilter.h"
 #include "ADM_filter/video_filters.h"
 #include "ADM_colorspace/ADM_rgb.h"
-#include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 
 static FILTER_PARAM logoParam={4,
         { /* float */ "image",

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLD3D.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLD3D.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLD3D.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -31,7 +31,7 @@
 #include "ADM_osSupport/ADM_debug.h"
 #include "ADM_filter/video_filters.h"
 
-#include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 static FILTER_PARAM mp3Param={3,{"param1","param2","param3"}};
 
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLD3Dlow.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLD3Dlow.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLD3Dlow.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -31,7 +31,7 @@
 #include "ADM_osSupport/ADM_debug.h"
 #include "ADM_filter/video_filters.h"
 
-#include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 
 static FILTER_PARAM mp3Param={3,{"param1","param2","param3"}};
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMSharpen.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMSharpen.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMSharpen.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -46,7 +46,7 @@
 
 #include "ADM_filter/video_filters.h"
 #include "ADM_vidMSharpen_param.h"
-#include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 
 class Msharpen : public AVDMGenericVideoStream
 {

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -35,7 +35,7 @@
 
 #include "ADM_vidMcDeint_param.h"
 
-#include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 
 static FILTER_PARAM mcDeintParam={3,{"mode","qp","initial_parity"}};
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMosaic.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMosaic.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMosaic.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -21,7 +21,7 @@
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_video/ADM_vidCommonFilter.h"
 
-#include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 
 
 extern "C" {

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMsmooth.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMsmooth.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMsmooth.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -40,7 +40,7 @@
 #include "ADM_osSupport/ADM_debug.h"
 
 #include "ADM_filter/video_filters.h"
-#include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 
 #if 0
 #undef aprintf

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidPalShift.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidPalShift.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidPalShift.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -23,7 +23,7 @@
 #include "ADM_vidPalShift.h"
 #include "ADM_filter/video_filters.h"
 
-#include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 
 static FILTER_PARAM nullParam={0,{""}};
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidParticle.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidParticle.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidParticle.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -36,7 +36,7 @@
 
 #include "ADM_filter/video_filters.h"
 
-#include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 
 #include "ADM_vidParticle.h"
 #include "ADM_userInterfaces/ADM_commonUI/DIA_flyDialog.h" // for MenuMapping

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidResampleFPS.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidResampleFPS.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidResampleFPS.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -23,9 +23,9 @@
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_filter/video_filters.h"
-#include "ADM_userInterfaces/ADM_commonUI/DIA_enter.h"
+#include "DIA_enter.h"
 #include "ADM_video/ADM_cache.h"
-#include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 
 static FILTER_PARAM ResampParam={2,{"newfps","use_linear"}};
 typedef struct FPS_Param

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidRotate.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidRotate.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidRotate.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -29,7 +29,7 @@
 #include "ADM_filter/video_filters.h"
 #include "ADM_assert.h"
         
-#include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 
 typedef struct ROTATE_PARAM
 {

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSoften.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSoften.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSoften.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -27,10 +27,10 @@
 #include "ADM_osSupport/ADM_debug.h"
 
 #include "ADM_vidSoften.h"
-#include "ADM_userInterfaces/ADM_commonUI/DIA_enter.h"
+#include "DIA_enter.h"
 #include "ADM_filter/video_filters.h"
 
-#include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 
 static FILTER_PARAM softParam={3,{"radius","luma","chroma"}};
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidStabilize.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidStabilize.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidStabilize.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -25,7 +25,7 @@
 #include "ADM_vidStabilize.h"
 #include "ADM_filter/video_filters.h"
 
-#include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 
 static FILTER_PARAM stabParam={1,{"param"}};
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -39,7 +39,7 @@
 
 #include "ADM_filter/video_filters.h"
 
-#include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 
 #include "ADM_vidSwissArmyKnife.h"
 #include "ADM_vidParticle.h" // for ImageTool

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidTdeint.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidTdeint.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidTdeint.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -51,7 +51,7 @@
 #include "ADM_osSupport/ADM_debug.h"
 #include "ADM_video/ADM_cache.h"
 #include "ADM_filter/video_filters.h"
-#include "ADM_userInterfaces/ADM_commonUI/DIA_enter.h"
+#include "DIA_factory.h"
 
 
 #define min MIN

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidThreshold.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidThreshold.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidThreshold.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -22,7 +22,7 @@
 
 #include "ADM_filter/video_filters.h"
 
-#include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 
 #include "ADM_vidThreshold.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVlad.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVlad.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVlad.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -28,7 +28,7 @@
 #include "ADM_vidVlad.h"
 #include "ADM_filter/video_filters.h"
 
-#include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 
 #ifdef ADM_CPU_X86_64
 #define COUNTER long int

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVobSubRender.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVobSubRender.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVobSubRender.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -60,7 +60,7 @@
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_filter/video_filters.h"
-#include "ADM_toolkit/filesel.h"
+#include "DIA_fileSel.h"
 #include "ADM_colorspace/colorspace.h"
 #include "ADM_vobsubinfo.h"
 #include "ADM_vidVobSub.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVobsub.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVobsub.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVobsub.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -40,7 +40,7 @@
 #include "ADM_filter/video_filters.h"
 
 
-#include "ADM_toolkit/filesel.h"
+#include "DIA_fileSel.h"
 
 #include "ADM_colorspace/colorspace.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidYadif.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidYadif.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidYadif.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -33,7 +33,7 @@
 #include "ADM_video/ADM_cache.h"
 #include "ADM_filter/video_filters.h"
 
-#include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
+#include "DIA_factory.h"
 //************************************************
 #define MIN(a,b) ((a) > (b) ? (b) : (a))
 #define MAX(a,b) ((a) < (b) ? (b) : (a))

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt	2008-03-26 19:26:31 UTC (rev 3934)
@@ -54,6 +54,7 @@
 INCLUDE_DIRECTORIES("${CMAKE_CURRENT_SOURCE_DIR}")
 INCLUDE_DIRECTORIES("${CMAKE_BINARY_DIR}/config")
 INCLUDE_DIRECTORIES("${CMAKE_CURRENT_SOURCE_DIR}/ADM_core/include")
+INCLUDE_DIRECTORIES("${CMAKE_CURRENT_SOURCE_DIR}/ADM_coreUI/include")
 INCLUDE_DIRECTORIES("${CMAKE_CURRENT_SOURCE_DIR}/ADM_libraries/ADM_utilities")
 INCLUDE_DIRECTORIES("${CMAKE_CURRENT_SOURCE_DIR}/ADM_libraries/ADM_ffmpeg/ADM_lavutil")
 INCLUDE_DIRECTORIES("${CMAKE_CURRENT_SOURCE_DIR}/ADM_libraries/ADM_ffmpeg/ADM_lavcodec")
@@ -299,10 +300,12 @@
 ADD_ADMLIB_ALL_TARGETS(ADM_utilities)
 
 ###########################################
-# ADM_core
+# ADM_core/ADM_coreUI
 ###########################################
 ADD_SUBDIRECTORY(ADM_core)
 ADD_LIB_ALL_TARGETS(ADM_core)
+ADD_SUBDIRECTORY(ADM_coreUI)
+ADD_LIB_ALL_TARGETS(ADM_coreUI)
 
 ###########################################
 # External libs

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/GUI_jobs.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/GUI_jobs.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/GUI_jobs.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -20,7 +20,7 @@
 
 #include "ADM_default.h"
 #include "ADM_assert.h"
-#include "ADM_toolkit/filesel.h"
+#include "DIA_fileSel.h"
 #include "ADM_toolkit/toolkit.hxx"
 
 #define MAX_JOBS 120

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/gtk_gui.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/gtk_gui.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/gtk_gui.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -29,7 +29,7 @@
 #include "fourcc.h"
 #include "avi_vars.h"
 #include "ADM_assert.h"
-#include "ADM_toolkit/filesel.h"
+#include "DIA_fileSel.h"
 #include "prototype.h"
 #include "ADM_toolkit/toolkit.hxx"
 #include "ADM_toolkit/bitmap.h"
@@ -52,8 +52,8 @@
 
 #include "ADM_userInterfaces/ADM_commonUI/DIA_busy.h"
 #include "ADM_userInterfaces/ADM_commonUI/DIA_working.h"
-#include "ADM_userInterfaces/ADM_commonUI/DIA_factory.h"
-#include "ADM_userInterfaces/ADM_commonUI/DIA_enter.h"
+#include "DIA_factory.h"
+#include "DIA_enter.h"
 
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_filter/video_filters.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/gui_navigate.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/gui_navigate.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/gui_navigate.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -23,7 +23,7 @@
 
 #include <math.h>
 
-#include "ADM_toolkit/filesel.h"
+#include "DIA_fileSel.h"
 #include "ADM_assert.h"
 #include "prototype.h"
 #include "ADM_audiodevice/audio_out.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/gui_savenew.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/gui_savenew.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/gui_savenew.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -40,7 +40,7 @@
 #include "ADM_outputs/oplug_avi/op_savesmart.hxx"
 #include "ADM_filter/video_filters.h"
 
-#include "ADM_toolkit/filesel.h"
+#include "DIA_fileSel.h"
 #include "ADM_userInterfaces/ADM_commonUI/GUI_ui.h"
 #include "ADM_outputs/oplug_mpegFF/oplug_vcdff.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/guiplay.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/guiplay.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/guiplay.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -31,7 +31,7 @@
 #include "avi_vars.h"
 #include "ADM_assert.h" 
 
-#include "ADM_toolkit/filesel.h"
+#include "DIA_fileSel.h"
 #include "prototype.h"
 #include "ADM_audiodevice/audio_out.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/main.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/main.cpp	2008-03-26 19:26:26 UTC (rev 3933)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/main.cpp	2008-03-26 19:26:31 UTC (rev 3934)
@@ -74,7 +74,7 @@
 extern void ADM_memStatEnd( void );
 extern void getUIDescription(char*);
 extern uint8_t ADM_ad_loadPlugins(const char *path);
-
+extern void InitFactory(void);
 #ifdef __MINGW32__
 extern EXCEPTION_DISPOSITION exceptionHandler(struct _EXCEPTION_RECORD* pExceptionRec, void* pEstablisherFrame, struct _CONTEXT* pContextRecord, void* pDispatcherContext);
 #else
@@ -203,7 +203,7 @@
 #ifdef USE_XVID_4
     xvid4_init();
 #endif
-
+    InitFactory();
     initFileSelector();
     ADM_InitMemcpy();
 



From mean at mail.berlios.de  Wed Mar 26 20:26:57 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Wed, 26 Mar 2008 20:26:57 +0100
Subject: [Avidemux-svn-commit] r3935 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg
Message-ID: <200803261926.m2QJQvZB011562@sheep.berlios.de>

Author: mean
Date: 2008-03-26 20:26:56 +0100 (Wed, 26 Mar 2008)
New Revision: 3935

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/config.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ffconf.c
Log:
[Merge rebase]


Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/config.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/config.h	2008-03-26 19:26:31 UTC (rev 3934)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/config.h	2008-03-26 19:26:56 UTC (rev 3935)
@@ -1,4 +1,3 @@
-<<<<<<< HEAD:avidemux/ADM_libraries/ADM_ffmpeg/config.h
 #include "ADM_coreConfig.h"
 #define ENABLE_NELLYMOSER_DECODER 1
 #define ENABLE_ADPCM_IMA_AMV_DECODER 1
@@ -411,430 +410,3 @@
 #define HAVE_THREADS 1
 #define RUNTIME_CPUDETECT 1
 #define restrict __restrict__
-=======
-#include "ADM_coreConfig.h"
-#define ENABLE_NELLYMOSER_DECODER 1
-#define ENABLE_ADPCM_IMA_AMV_DECODER 1
-#define ENABLE_CINEPAK_DECODER 1
-#define ENABLE_DNXHD_DECODER 1
-#define ENABLE_FOURXM_DECODER 1
-#define ENABLE_FRAPS_DECODER 1
-#define ENABLE_H263_DECODER 1
-#define ENABLE_H264_DECODER 1
-#define ENABLE_INDEO2_DECODER 1
-#define ENABLE_INDEO3_DECODER 1
-#define ENABLE_INTERPLAY_VIDEO_DECODER 1
-#define ENABLE_MPEGVIDEO_DECODER 1
-#define ENABLE_MSVIDEO1_DECODER 1
-#define ENABLE_VC1_DECODER 1
-#define ENABLE_VCR1_DECODER 1
-#define ENABLE_VP5_DECODER 1
-#define ENABLE_VP6_DECODER 1
-#define ENABLE_VP6A_DECODER 1
-#define ENABLE_VP6F_DECODER 1
-#define ENABLE_WMV3_DECODER 1
-#define ENABLE_WMV1_DECODER 1
-#define ENABLE_WMV2_DECODER 1
-#define ENABLE_VP3_DECODER 1
-#define ENABLE_MPEG4_DECODER 1
-#define ENABLE_MSMPEG4V1_DECODER 1
-#define ENABLE_MSMPEG4V2_DECODER 1
-#define ENABLE_MSMPEG4V3_DECODER 1
-#define ENABLE_MJPEGB_DECODER 1
-#define ENABLE_MJPEG_DECODER 1
-#define ENABLE_WMAV2_DECODER 1
-#define ENABLE_DVVIDEO_DECODER 1
-#define ENABLE_HUFFYUV_DECODER 1
-#define ENABLE_FFVHUFF_DECODER 1
-#define ENABLE_SVQ3_DECODER 1
-#define ENABLE_TSCC_DECODER 1
-#define ENABLE_QDM2_DECODER 1
-#define ENABLE_FFV1_DECODER 1
-#define ENABLE_MPEG1VIDEO_DECODER 1
-#define ENABLE_MPEG2VIDEO_DECODER 1
-#define ENABLE_RV10_DECODER 1
-#define ENABLE_RV20_DECODER 1
-#define ENABLE_DVBSUB_DECODER 1
-#define ENABLE_FLV_DECODER 1
-#define ENABLE_SNOW_DECODER 1
-#define ENABLE_AMV_DECODER 1
-#define ENABLE_PCX_DECODER 0
-#define ENABLE_SUNRAST_DECODER 0
-#define ENABLE_VB_DECODER 0
-#define ENABLE_XSUB_DECODER 0
-#define ENABLE_AC3_DECODER 0
-#define ENABLE_APE_DECODER 0
-#define ENABLE_MPC8_DECODER 0
-#define ENABLE_PCM_S16LE_PLANAR_DECODER 0
-#define ENABLE_PCM_ZORK_DECODER 0
-#define ENABLE_ADPCM_EA_R1_DECODER 0
-#define ENABLE_ADPCM_EA_R2_DECODER 0
-#define ENABLE_ADPCM_EA_R3_DECODER 0
-#define ENABLE_ADPCM_EA_XAS_DECODER 0
-#define ENABLE_ADPCM_IMA_EA_EACS_DECODER 0
-#define ENABLE_ADPCM_IMA_EA_SEAD_DECODER 0
-#define ENABLE_AASC_DECODER 0
-#define ENABLE_AVS_DECODER 0
-#define ENABLE_BETHSOFTVID_DECODER 0
-#define ENABLE_C93_DECODER 0
-#define ENABLE_CAVS_DECODER 0
-#define ENABLE_CLJR_DECODER 0
-#define ENABLE_CSCD_DECODER 0
-#define ENABLE_CYUV_DECODER 0
-#define ENABLE_DSICINVIDEO_DECODER 0
-#define ENABLE_DXA_DECODER 0
-#define ENABLE_EIGHTBPS_DECODER 0
-#define ENABLE_FLIC_DECODER 0
-#define ENABLE_IDCIN_DECODER 0
-#define ENABLE_KMVC_DECODER 0
-#define ENABLE_LOCO_DECODER 0
-#define ENABLE_MDEC_DECODER 0
-#define ENABLE_MMVIDEO_DECODER 0
-#define ENABLE_MPEG_XVMC_DECODER 0
-#define ENABLE_MSRLE_DECODER 0
-#define ENABLE_MSZH_DECODER 0
-#define ENABLE_NUV_DECODER 0
-#define ENABLE_PTX_DECODER 0
-#define ENABLE_QDRAW_DECODER 0
-#define ENABLE_QPEG_DECODER 0
-#define ENABLE_RPZA_DECODER 0
-#define ENABLE_SMACKER_DECODER 0
-#define ENABLE_SMC_DECODER 0
-#define ENABLE_SP5X_DECODER 0
-#define ENABLE_THEORA_DECODER 0
-#define ENABLE_THP_DECODER 0
-#define ENABLE_TIERTEXSEQVIDEO_DECODER 0
-#define ENABLE_TRUEMOTION1_DECODER 0
-#define ENABLE_TRUEMOTION2_DECODER 0
-#define ENABLE_TXD_DECODER 0
-#define ENABLE_ULTI_DECODER 0
-#define ENABLE_VMDVIDEO_DECODER 0
-#define ENABLE_VMNC_DECODER 0
-#define ENABLE_VQA_DECODER 0
-#define ENABLE_WNV1_DECODER 0
-#define ENABLE_XAN_WC3_DECODER 0
-#define ENABLE_XL_DECODER 0
-#define ENABLE_MPEG4AAC_DECODER 0
-#define ENABLE_ALAC_DECODER 0
-#define ENABLE_ATRAC3_DECODER 0
-#define ENABLE_COOK_DECODER 0
-#define ENABLE_DCA_DECODER 0
-#define ENABLE_DSICINAUDIO_DECODER 0
-#define ENABLE_IMC_DECODER 0
-#define ENABLE_LIBA52_DECODER 0
-#define ENABLE_LIBFAAD_DECODER 0
-#define ENABLE_MACE3_DECODER 0
-#define ENABLE_MACE6_DECODER 0
-#define ENABLE_MP3_DECODER 0
-#define ENABLE_MP3ADU_DECODER 0
-#define ENABLE_MP3ON4_DECODER 0
-#define ENABLE_MPC7_DECODER 0
-#define ENABLE_RA_144_DECODER 0
-#define ENABLE_RA_288_DECODER 0
-#define ENABLE_SHORTEN_DECODER 0
-#define ENABLE_SMACKAUD_DECODER 0
-#define ENABLE_TRUESPEECH_DECODER 0
-#define ENABLE_TTA_DECODER 0
-#define ENABLE_VMDAUDIO_DECODER 0
-#define ENABLE_WAVPACK_DECODER 0
-#define ENABLE_WS_SND1_DECODER 0
-#define ENABLE_INTERPLAY_DPCM_DECODER 0
-#define ENABLE_SOL_DPCM_DECODER 0
-#define ENABLE_XAN_DPCM_DECODER 0
-#define ENABLE_ADPCM_THP_DECODER 0
-#define ENABLE_ASV1_DECODER 0
-#define ENABLE_ASV2_DECODER 0
-#define ENABLE_BMP_DECODER 0
-#define ENABLE_FLASHSV_DECODER 0
-#define ENABLE_GIF_DECODER 0
-#define ENABLE_H261_DECODER 0
-#define ENABLE_H263I_DECODER 0
-#define ENABLE_JPEGLS_DECODER 0
-#define ENABLE_PNG_DECODER 0
-#define ENABLE_QTRLE_DECODER 0
-#define ENABLE_RAWVIDEO_DECODER 0
-#define ENABLE_ROQ_DECODER 0
-#define ENABLE_SGI_DECODER 0
-#define ENABLE_SVQ1_DECODER 0
-#define ENABLE_TARGA_DECODER 0
-#define ENABLE_TIFF_DECODER 0
-#define ENABLE_ZLIB_DECODER 0
-#define ENABLE_ZMBV_DECODER 0
-#define ENABLE_FLAC_DECODER 0
-#define ENABLE_LIBAMR_NB_DECODER 0
-#define ENABLE_LIBAMR_WB_DECODER 0
-#define ENABLE_LIBGSM_DECODER 0
-#define ENABLE_LIBGSM_MS_DECODER 0
-#define ENABLE_MP2_DECODER 0
-#define ENABLE_SONIC_DECODER 0
-#define ENABLE_VORBIS_DECODER 0
-#define ENABLE_WMAV1_DECODER 0
-#define ENABLE_PCM_ALAW_DECODER 0
-#define ENABLE_PCM_MULAW_DECODER 0
-#define ENABLE_PCM_S8_DECODER 0
-#define ENABLE_PCM_S16BE_DECODER 0
-#define ENABLE_PCM_S16LE_DECODER 0
-#define ENABLE_PCM_S24BE_DECODER 0
-#define ENABLE_PCM_S24DAUD_DECODER 0
-#define ENABLE_PCM_S24LE_DECODER 0
-#define ENABLE_PCM_S32BE_DECODER 0
-#define ENABLE_PCM_S32LE_DECODER 0
-#define ENABLE_PCM_U8_DECODER 0
-#define ENABLE_PCM_U16BE_DECODER 0
-#define ENABLE_PCM_U16LE_DECODER 0
-#define ENABLE_PCM_U24BE_DECODER 0
-#define ENABLE_PCM_U24LE_DECODER 0
-#define ENABLE_PCM_U32BE_DECODER 0
-#define ENABLE_PCM_U32LE_DECODER 0
-#define ENABLE_ROQ_DPCM_DECODER 0
-#define ENABLE_ADPCM_4XM_DECODER 0
-#define ENABLE_ADPCM_ADX_DECODER 0
-#define ENABLE_ADPCM_CT_DECODER 0
-#define ENABLE_ADPCM_EA_DECODER 0
-#define ENABLE_ADPCM_G726_DECODER 0
-#define ENABLE_ADPCM_IMA_DK3_DECODER 0
-#define ENABLE_ADPCM_IMA_DK4_DECODER 0
-#define ENABLE_ADPCM_IMA_QT_DECODER 0
-#define ENABLE_ADPCM_IMA_SMJPEG_DECODER 0
-#define ENABLE_ADPCM_IMA_WAV_DECODER 0
-#define ENABLE_ADPCM_IMA_WS_DECODER 0
-#define ENABLE_ADPCM_MS_DECODER 0
-#define ENABLE_ADPCM_SBPRO_2_DECODER 0
-#define ENABLE_ADPCM_SBPRO_3_DECODER 0
-#define ENABLE_ADPCM_SBPRO_4_DECODER 0
-#define ENABLE_ADPCM_SWF_DECODER 0
-#define ENABLE_ADPCM_XA_DECODER 0
-#define ENABLE_ADPCM_YAMAHA_DECODER 0
-#define ENABLE_DVDSUB_DECODER 0
-#define ENABLE_LIBVORBIS_DECODER 0
-#define ENABLE_H263_PARSER 1
-#define ENABLE_H264_PARSER 1
-#define ENABLE_MPEG4VIDEO_PARSER 1
-#define ENABLE_AAC_PARSER 0
-#define ENABLE_AC3_PARSER 0
-#define ENABLE_CAVSVIDEO_PARSER 0
-#define ENABLE_DCA_PARSER 0
-#define ENABLE_DVBSUB_PARSER 0
-#define ENABLE_DVDSUB_PARSER 0
-#define ENABLE_H261_PARSER 0
-#define ENABLE_MJPEG_PARSER 0
-#define ENABLE_MPEGAUDIO_PARSER 0
-#define ENABLE_MPEGVIDEO_PARSER 0
-#define ENABLE_PNM_PARSER 0
-#define ENABLE_VC1_PARSER 0
-#define ENABLE_MJPEG_ENCODER 1
-#define ENABLE_MSMPEG4V3_ENCODER 1
-#define ENABLE_H263P_ENCODER 1
-#define ENABLE_AC3_ENCODER 1
-#define ENABLE_FFV1_ENCODER 1
-#define ENABLE_FLV1_ENCODER 1
-#define ENABLE_FFVHUFF_ENCODER 1
-#define ENABLE_H263_ENCODER 1
-#define ENABLE_MPEG1VIDEO_ENCODER 1
-#define ENABLE_MPEG2VIDEO_ENCODER 1
-#define ENABLE_MPEG4_ENCODER 1
-#define ENABLE_FLV_ENCODER 1
-#define ENABLE_MP2_ENCODER 1
-#define ENABLE_DVVIDEO_ENCODER 1
-#define ENABLE_HUFFYUV_ENCODER 1
-#define ENABLE_DVBSUB_ENCODER 1
-#define ENABLE_SNOW_ENCODER 1
-#define ENABLE_DNXHD_ENCODER 0
-#define ENABLE_PCM_ZORK_ENCODER 0
-#define ENABLE_ADPCM_IMA_AMV_ENCODER 0
-#define ENABLE_LIBX264_ENCODER 0
-#define ENABLE_LIBXVID_ENCODER 0
-#define ENABLE_LJPEG_ENCODER 0
-#define ENABLE_PAM_ENCODER 0
-#define ENABLE_PBM_ENCODER 0
-#define ENABLE_PGM_ENCODER 0
-#define ENABLE_PGMYUV_ENCODER 0
-#define ENABLE_PPM_ENCODER 0
-#define ENABLE_LIBFAAC_ENCODER 0
-#define ENABLE_LIBMP3LAME_ENCODER 0
-#define ENABLE_LIBTHEORA_ENCODER 0
-#define ENABLE_SONIC_LS_ENCODER 0
-#define ENABLE_ASV1_ENCODER 0
-#define ENABLE_ASV2_ENCODER 0
-#define ENABLE_BMP_ENCODER 0
-#define ENABLE_FLASHSV_ENCODER 0
-#define ENABLE_GIF_ENCODER 0
-#define ENABLE_H261_ENCODER 0
-#define ENABLE_JPEGLS_ENCODER 0
-#define ENABLE_MSMPEG4V1_ENCODER 0
-#define ENABLE_MSMPEG4V2_ENCODER 0
-#define ENABLE_PNG_ENCODER 0
-#define ENABLE_QTRLE_ENCODER 0
-#define ENABLE_RAWVIDEO_ENCODER 0
-#define ENABLE_ROQ_ENCODER 0
-#define ENABLE_RV10_ENCODER 0
-#define ENABLE_RV20_ENCODER 0
-#define ENABLE_SGI_ENCODER 0
-#define ENABLE_SVQ1_ENCODER 0
-#define ENABLE_TARGA_ENCODER 0
-#define ENABLE_TIFF_ENCODER 0
-#define ENABLE_WMV1_ENCODER 0
-#define ENABLE_WMV2_ENCODER 0
-#define ENABLE_ZLIB_ENCODER 0
-#define ENABLE_ZMBV_ENCODER 0
-#define ENABLE_FLAC_ENCODER 0
-#define ENABLE_LIBAMR_NB_ENCODER 0
-#define ENABLE_LIBAMR_WB_ENCODER 0
-#define ENABLE_LIBGSM_ENCODER 0
-#define ENABLE_LIBGSM_MS_ENCODER 0
-#define ENABLE_SONIC_ENCODER 0
-#define ENABLE_VORBIS_ENCODER 0
-#define ENABLE_WMAV1_ENCODER 0
-#define ENABLE_WMAV2_ENCODER 0
-#define ENABLE_PCM_ALAW_ENCODER 0
-#define ENABLE_PCM_MULAW_ENCODER 0
-#define ENABLE_PCM_S8_ENCODER 0
-#define ENABLE_PCM_S16BE_ENCODER 0
-#define ENABLE_PCM_S16LE_ENCODER 0
-#define ENABLE_PCM_S24BE_ENCODER 0
-#define ENABLE_PCM_S24DAUD_ENCODER 0
-#define ENABLE_PCM_S24LE_ENCODER 0
-#define ENABLE_PCM_S32BE_ENCODER 0
-#define ENABLE_PCM_S32LE_ENCODER 0
-#define ENABLE_PCM_U8_ENCODER 0
-#define ENABLE_PCM_U16BE_ENCODER 0
-#define ENABLE_PCM_U16LE_ENCODER 0
-#define ENABLE_PCM_U24BE_ENCODER 0
-#define ENABLE_PCM_U24LE_ENCODER 0
-#define ENABLE_PCM_U32BE_ENCODER 0
-#define ENABLE_PCM_U32LE_ENCODER 0
-#define ENABLE_ROQ_DPCM_ENCODER 0
-#define ENABLE_ADPCM_4XM_ENCODER 0
-#define ENABLE_ADPCM_ADX_ENCODER 0
-#define ENABLE_ADPCM_CT_ENCODER 0
-#define ENABLE_ADPCM_EA_ENCODER 0
-#define ENABLE_ADPCM_G726_ENCODER 0
-#define ENABLE_ADPCM_IMA_DK3_ENCODER 0
-#define ENABLE_ADPCM_IMA_DK4_ENCODER 0
-#define ENABLE_ADPCM_IMA_QT_ENCODER 0
-#define ENABLE_ADPCM_IMA_SMJPEG_ENCODER 0
-#define ENABLE_ADPCM_IMA_WAV_ENCODER 0
-#define ENABLE_ADPCM_IMA_WS_ENCODER 0
-#define ENABLE_ADPCM_MS_ENCODER 0
-#define ENABLE_ADPCM_SBPRO_2_ENCODER 0
-#define ENABLE_ADPCM_SBPRO_3_ENCODER 0
-#define ENABLE_ADPCM_SBPRO_4_ENCODER 0
-#define ENABLE_ADPCM_SWF_ENCODER 0
-#define ENABLE_ADPCM_XA_ENCODER 0
-#define ENABLE_ADPCM_YAMAHA_ENCODER 0
-#define ENABLE_DVDSUB_ENCODER 0
-#define ENABLE_LIBVORBIS_ENCODER 0
-#define ENABLE_MP3_HEADER_COMPRESS_BSF 0
-#define ENABLE_IMX_DUMP_HEADER_BSF 0
-#define ENABLE_DUMP_EXTRADATA_BSF 0
-#define ENABLE_REMOVE_EXTRADATA_BSF 0
-#define ENABLE_NOISE_BSF 0
-#define ENABLE_MP3_HEADER_DECOMPRESS_BSF 0
-#define ENABLE_MJPEGA_DUMP_HEADER_BSF 0
-#define ENABLE_H264_MP4TOANNEXB_BSF 0
-#define ENABLE_MOV2TEXTSUB_BSF 0
-#define ENABLE_TEXT2MOVSUB_BSF 0
-#define CONFIG_MUXERS 1
-#define CONFIG_MOV_MUXER 1
-#define CONFIG_MP4_MUXER 1
-#define CONFIG_PSP_MUXER 1
-#define CONFIG_TG2_MUXER 1
-#define CONFIG_TGP_MUXER 1
-#define CONFIG_ENCODERS 1
-#define CONFIG_DVVIDEO_ENCODER 1
-#define CONFIG_SNOW_ENCODER 1
-#define CONFIG_DECODERS 1
-#define CONFIG_DVVIDEO_DECODER 1
-#define CONFIG_H263_DECODER 1
-#define CONFIG_MPEG4_DECODER 1
-#define CONFIG_SNOW_DECODER 1
-#define CONFIG_VC1_DECODER 1
-#define CONFIG_WMV2_DECODER 1
-#define CONFIG_WMV3_DECODER 1
-#define CONFIG_MPEGAUDIO_HP 1
-#define CONFIG_ZLIB 1
-#define CONFIG_GPL 1
-#define ENABLE_ARMV4L 0
-#define ENABLE_MLIB 0
-#define ENABLE_SPARC 0
-#define ENABLE_ALPHA 0
-#define ENABLE_MMI 0
-#define ENABLE_SH4 0
-#define ENABLE_BFIN 0
-#define ENABLE_SMALL 0
-#define ENABLE_MLP_PARSER 0
-//****************** SYSTEM *******************
-#ifdef __APPLE__
-#	define CONFIG_DARWIN 1
-#endif
-#if defined(ADM_CPU_X86_32)
-#	define ARCH_X86 1
-#	define ARCH_X86_32 1
-#elif defined(ADM_CPU_X86_64)
-#	define ARCH_X86 1
-#	define ARCH_X86_64 1
-#elif defined(ADM_CPU_PPC)
-#	define ARCH_POWERPC 1
-#ifdef ADM_CPU_ALTIVEC
-#	define HAVE_ALTIVEC 1
-#ifndef __APPLE__
-#	define HAVE_ALTIVEC_H 1
-#endif	// __APPLE__
-#endif	// ADM_CPU_ALTIVEC
-#ifdef ADM_CPU_DCBZL
-#	define HAVE_DCBZL 1
-#endif	// ADM_CPU_DCBZL
-#endif	// ADM_CPU_X86_32
-#ifdef ADM_CPU_MMX2
-#	define HAVE_MMX2 1
-#endif
-#ifdef ADM_CPU_SSSE3
-#	define HAVE_SSSE3 1
-#endif
-#ifdef ARCH_POWERPC
-#	define ENABLE_POWERPC 1
-#else
-#	define ENABLE_POWERPC 0
-#endif
-#ifdef ARCH_X86
-#	define ENABLE_MMX 1
-#	define ENABLE_X86 1
-#	define ENABLE_BSWAP 1
-#	define HAVE_MMX 1
-#	define ENABLE_MMX 1
-#	define HAVE_FAST_UNALIGNED 1
-#	define ENABLE_FAST_UNALIGNED 1
-#	define HAVE_EBP_AVAILABLE 1
-#	define HAVE_EBX_AVAILABLE 1
-#else
-#	define ENABLE_MMX 0
-#endif
-#ifdef ARCH_X86_64
-#	define HAVE_FAST_64BIT 1
-#	define HAVE_EBP_AVAILABLE 1
-#	define ENABLE_EBP_AVAILABLE 1
-#	define HAVE_EBX_AVAILABLE 1
-#	define ENABLE_EBX_AVAILABLE 1
-#	define ENABLE_EBX_AVAILABLE 1
-#	define ENABLE_EBX_AVAILABLE 1
-#	undef HAVE_MMX2
-#	define HAVE_SSE2 1
-#	define HAVE_SSE 1
-#endif
-#ifdef ADM_BIG_ENDIAN
-#	define WORDS_BIGENDIAN 1
-#	define ENABLE_X86_64 1
-#endif
-#define ENABLE_THREADS 1
-#define ENABLE_ENCODERS 1
-#define ENABLE_VIS 0
-#define ENABLE_GRAY 0
-#define HAVE_LRINTF 1
-#define HAVE_LLRINT 1
-#define HAVE_LRINT 1
-#define HAVE_ROUND 1
-#define HAVE_ROUNDF 1
-#define HAVE_THREADS 1
-#define RUNTIME_CPUDETECT 1
-#define restrict __restrict__
->>>>>>> mean:avidemux/ADM_libraries/ADM_ffmpeg/config.h

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ffconf.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ffconf.c	2008-03-26 19:26:31 UTC (rev 3934)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ffconf.c	2008-03-26 19:26:56 UTC (rev 3935)
@@ -430,16 +430,10 @@
 	printf("#endif\n");
 
 	printf("#ifdef ARCH_X86\n");
-<<<<<<< HEAD:avidemux/ADM_libraries/ADM_ffmpeg/ffconf.c
-=======
-	printf("#	define ENABLE_MMX 1\n");
-	printf("#	define ENABLE_X86 1\n");
->>>>>>> mean:avidemux/ADM_libraries/ADM_ffmpeg/ffconf.c
 	printf("#	define ENABLE_BSWAP 1\n");
 	printf("#	define HAVE_MMX 1\n");
 	printf("#	define ENABLE_MMX 1\n");
 	printf("#	define HAVE_FAST_UNALIGNED 1\n");
-	printf("#	define ENABLE_FAST_UNALIGNED 1\n");
 	printf("#	define HAVE_EBP_AVAILABLE 1\n");
 	printf("#	define HAVE_EBX_AVAILABLE 1\n");
 	printf("#else\n");
@@ -448,23 +442,10 @@
 
 	printf("#ifdef ARCH_X86_64\n");
 	printf("#	define HAVE_FAST_64BIT 1\n");
-
-	printf("#	define HAVE_EBP_AVAILABLE 1\n");
-	printf("#	define ENABLE_EBP_AVAILABLE 1\n");
-	printf("#	define HAVE_EBX_AVAILABLE 1\n");
-	printf("#	define ENABLE_EBX_AVAILABLE 1\n");
-
-	printf("#	define ENABLE_EBX_AVAILABLE 1\n");
-	printf("#	define ENABLE_EBX_AVAILABLE 1\n");
-	printf("#	undef HAVE_MMX2\n");
-	printf("#	define HAVE_SSE2 1\n");
-	printf("#	define HAVE_SSE 1\n");
-
 	printf("#endif\n");
 
 	printf("#ifdef ADM_BIG_ENDIAN\n");
 	printf("#	define WORDS_BIGENDIAN 1\n");
-	printf("#	define ENABLE_X86_64 1\n");
 	printf("#endif\n");
 
 	printf("#define ENABLE_THREADS 1\n");



From mean at mail.berlios.de  Wed Mar 26 20:26:59 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Wed, 26 Mar 2008 20:26:59 +0100
Subject: [Avidemux-svn-commit] r3936 - in
	branches/avidemux_2.5_branch_gruntster/avidemux: ADM_toolkit
	ADM_userInterfaces/ADM_commonUI
Message-ID: <200803261926.m2QJQxul011572@sheep.berlios.de>

Author: mean
Date: 2008-03-26 20:26:58 +0100 (Wed, 26 Mar 2008)
New Revision: 3936

Removed:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_toolkit/filesel.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_factory.h
Log:
[Merge]


Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_toolkit/filesel.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_toolkit/filesel.h	2008-03-26 19:26:56 UTC (rev 3935)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_toolkit/filesel.h	2008-03-26 19:26:58 UTC (rev 3936)
@@ -1,30 +0,0 @@
-
-/***************************************************************************
-    copyright            : (C) 2001/2005 by mean
-    email                : fixounet at free.fr
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-#ifndef FILESEL_H
-#define FILESEL_H
-typedef void SELFILE_CB(char *);
-void GUI_FileSelRead(const char *label,SELFILE_CB cb) ;
-void GUI_FileSelWrite(const char *label,SELFILE_CB cb) ;
-void GUI_FileSelRead(const char *label, char * * name);
-void GUI_FileSelWrite(const char *label, char * * name);
-
-uint8_t FileSel_SelectWrite(const char *title,char *target,uint32_t max, const char *source);
-uint8_t FileSel_SelectRead(const char *title,char *target,uint32_t max, const char *source);
-uint8_t FileSel_SelectDir(const char *title,char *target,uint32_t max, const char *source);
-
-
-#endif
-//EOF

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_factory.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_factory.h	2008-03-26 19:26:56 UTC (rev 3935)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_factory.h	2008-03-26 19:26:58 UTC (rev 3936)
@@ -1,461 +0,0 @@
-/***************************************************************************
-                          DIA_factory.h
-  Handles univeral dialog
-  (C) Mean 2006 fixounet at free.fr
-
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#ifndef DIA_FACTORY_H
-#define DIA_FACTORY_H
-
-#include "ADM_assert.h"
-
-typedef enum 
-{
-  ELEM_INVALID=0,
-  ELEM_TOGGLE,
-  ELEM_INTEGER,
-  ELEM_FLOAT,
-  ELEM_MENU,
-  ELEM_FILE_READ,
-  ELEM_BITRATE,
-  ELEM_BAR,
-  ELEM_ROTEXT,
-  ELEM_NOTCH,
-  ELEM_DIR_SELECT,
-  ELEM_TEXT,
-  ELEM_FRAME,
-  ELEM_HEXDUMP,
-  ELEM_TOGGLE_UINT,
-  ELEM_TOGGLE_INT,
-  ELEM_BUTTON,
-  ELEM_SLIDER,
-  ELEM_THREAD_COUNT,
-  ELEM_MATRIX,
-  ELEM_COUNT,
-  ELEM_MAX=ELEM_COUNT-1
-}elemEnum;
-typedef void ADM_FAC_CALLBACK(void *cookie);
-
-#define ELEM_TYPE_FLOAT float
-
-/*********************************************/
-class diaElem
-{
-  protected:
-    void    setSize(int z) {size=z;};
-    int     readOnly;
-public:
-  void *param;
-  void *myWidget;
-  const char *paramTitle;
-  const char *tip;
-  elemEnum mySelf;
-  int       size; // Size of the widget in line
-
-  diaElem(elemEnum num) {paramTitle=NULL;param=NULL;mySelf=num;myWidget=NULL;size=1;readOnly=0;};
-          int getSize(void) {return size;};
-  virtual ~diaElem() {};
-  virtual void setMe(void *dialog, void *opaque,uint32_t line)=0;
-  virtual void getMe(void)=0;
-          void setRo(void) {readOnly=1;}
-          void setRw(void) {readOnly=0;}
-          
-  virtual void enable(uint32_t onoff) {printf("Enabling %d\n",onoff);}
-  virtual void finalize(void) {} // in case some widget needs some stuff just before using them
-};
-/*********************************************/
-#define MENU_MAX_lINK 10
-typedef struct dialElemLink
-{
-  uint32_t  value;
-  uint32_t  onoff;
-  diaElem  *widget;
-}dialElemLink;
-/*********************************************/
-
-class diaElemButton : public diaElem
-{
-  protected:
-  public:
-    void            *_cookie;
-    ADM_FAC_CALLBACK *_callBack;
-            diaElemButton(const char *toggleTitle, ADM_FAC_CALLBACK *cb,void *cookie,const char *tip=NULL);
-  virtual   ~diaElemButton() ;
-  void      setMe(void *dialog, void *opaque,uint32_t line);
-  void      getMe(void);
-  void      enable(uint32_t onoff) ;
-};
-
-/*********************************************/
-
-class diaElemMatrix : public diaElem
-{
-  protected:
-  public:
-    uint8_t *_matrix;
-    uint32_t _matrixSize;
-    		diaElemMatrix(uint8_t *trix,const char *toggleTitle, uint32_t trixSize,const char *tip=NULL);
-  virtual   ~diaElemMatrix() ;
-  void      setMe(void *dialog, void *opaque,uint32_t line);
-  void      getMe(void);
-  void      enable(uint32_t onoff) ;
-};
-/************************************/
-template <typename T>
-class diaElemGenericSlider : public diaElem
-{
-  protected:
-    
-    T min,max,incr;
-    uint32_t digits;
-public:
-    diaElemGenericSlider(T *value,const char *toggleTitle, T min,T max,T incr = 1, const char *tip=NULL);
-  virtual   ~diaElemGenericSlider() ;
-  void      setMe(void *dialog, void *opaque,uint32_t line);
-  void      getMe(void);
-  void      enable(uint32_t onoff) ;
-  void      setDigits(uint32_t digits) { this->digits = digits; }
-};
-typedef diaElemGenericSlider <int32_t> diaElemSlider;
-/* Same but unsigned */
-typedef diaElemGenericSlider <uint32_t> diaElemUSlider;
-/* Same but float */
-typedef diaElemGenericSlider <ELEM_TYPE_FLOAT> diaElemFSlider;
-
-/*********************************************/
-class diaElemToggle : public diaElem
-{
-  protected:
-    dialElemLink        links[MENU_MAX_lINK];
-    uint32_t            nbLink;
-    
-public:
-            diaElemToggle(uint32_t *toggleValue,const char *toggleTitle, const char *tip=NULL);
-  virtual   ~diaElemToggle() ;
-  void      setMe(void *dialog, void *opaque,uint32_t line);
-  void      getMe(void);
-  void      enable(uint32_t onoff) ;
-  void      finalize(void);
-  void      updateMe();
-  uint8_t   link(uint32_t onoff,diaElem *w);
-};
-/*********************************************/
-class diaElemToggleUint : public diaElem
-{
-  protected:
-        uint32_t *emb;
-        const char *embName;
-        void *widgetUint;
-        uint32_t _min,_max;
-public:
-            diaElemToggleUint(uint32_t *toggleValue,const char *toggleTitle, uint32_t *uintval, const char *name,uint32_t min,uint32_t max,const char *tip=NULL);
-  virtual   ~diaElemToggleUint() ;
-  void      setMe(void *dialog, void *opaque,uint32_t line);
-  void      getMe(void);
-  void      enable(uint32_t onoff) ;
-  void      finalize(void);
-  void      updateMe();
-};
-class diaElemToggleInt : public diaElemToggleUint
-{
-  protected:
-        int32_t *emb;
-        int32_t _min,_max;
-public:
-            diaElemToggleInt(uint32_t *toggleValue,const char *toggleTitle, int32_t *uintval, const char *name,int32_t min,int32_t max,const char *tip=NULL);
-  virtual   ~diaElemToggleInt() ;
-  void      setMe(void *dialog, void *opaque,uint32_t line);
-  void      getMe(void);
-};
-/*********************************************/
-class diaElemInteger : public diaElem
-{
-
-public:
-  int32_t min,max;
-  diaElemInteger(int32_t *intValue,const char *toggleTitle, int32_t min, int32_t max,const char *tip=NULL);
-  virtual ~diaElemInteger() ;
-  void setMe(void *dialog, void *opaque,uint32_t line);
-  void getMe(void);
-  void      enable(uint32_t onoff) ;
-};
-/* Same but unsigned */
-class diaElemUInteger : public diaElem
-{
-
-public:
-  uint32_t min,max;
-  diaElemUInteger(uint32_t *intValue,const char *toggleTitle, uint32_t min, uint32_t max,const char *tip=NULL);
-  virtual ~diaElemUInteger() ;
-  void setMe(void *dialog, void *opaque,uint32_t line);
-  void getMe(void);
-  void      enable(uint32_t onoff) ;
-  
-};
-/*************************************************/
-class diaElemBar : public diaElem
-{
-  protected :
-        uint32_t per;
-public:
-  
-  diaElemBar(uint32_t percent,const char *toggleTitle);
-  virtual ~diaElemBar() ;
-  void setMe(void *dialog, void *opaque,uint32_t line);
-  void getMe(void);
-};
-
-/*********************************************/
-class diaElemFloat : public diaElem
-{
-
-public:
-  ELEM_TYPE_FLOAT min,max;
-  diaElemFloat(ELEM_TYPE_FLOAT *intValue,const char *toggleTitle, ELEM_TYPE_FLOAT min, 
-               ELEM_TYPE_FLOAT max,const char *tip=NULL);
-  virtual ~diaElemFloat() ;
-  void setMe(void *dialog, void *opaque,uint32_t line);
-  void getMe(void);
-  void      enable(uint32_t onoff) ;
-};
-/*************************************************/
-typedef struct diaMenuEntry
-{
-  public:
-    uint32_t    val;
-    const char *text;
-    const char *desc;
-  public:
-}diaMenuEntry;
-
-class diaMenuEntryDynamic : public diaMenuEntry
-{
-  public:
-  public:
-    diaMenuEntryDynamic(uint32_t v,const char *t,const char *d) 
-      {
-          val=v;
-          text=ADM_strdup(t);
-          desc=ADM_strdup(d);
-      }
-    ~diaMenuEntryDynamic() 
-      { 
-          ADM_dealloc(text);
-          ADM_dealloc(desc);
-      }
-    
-};
-//*******************************
-// static (i.e. hardcoded) menu
-//*******************************
-
-
-
-//*******************************
-// Same but for dynamic menus
-//*******************************
-class diaElemMenuDynamic : public diaElem
-{
-diaMenuEntryDynamic **menu;
-uint32_t            nbMenu;
-dialElemLink        links[MENU_MAX_lINK];
-uint32_t            nbLink;
-
-public:
-  diaElemMenuDynamic(uint32_t *intValue,const char *itle, uint32_t nb, 
-               diaMenuEntryDynamic **menu,const char *tip=NULL);
-  
-  virtual   ~diaElemMenuDynamic() ;
-  void      setMe(void *dialog, void *opaque,uint32_t line);
-  void      getMe(void);
-  uint8_t   link(diaMenuEntryDynamic *entry,uint32_t onoff,diaElem *w);
-  void      updateMe(void);
-  void      enable(uint32_t onoff) ;
-  void      finalize(void);
-};
-
-class diaElemMenu : public diaElem
-{
-const diaMenuEntry  *menu;
-uint32_t            nbMenu;
-dialElemLink        links[MENU_MAX_lINK];
-uint32_t            nbLink;
-
-diaElemMenuDynamic  *dyna;
-diaMenuEntryDynamic  **menus;
-public:
-  diaElemMenu(uint32_t *intValue,const char *itle, uint32_t nb, 
-               const diaMenuEntry *menu,const char *tip=NULL);
-  
-  virtual ~diaElemMenu() ;
-  void setMe(void *dialog, void *opaque,uint32_t line);
-  void getMe(void);
-  uint8_t   link(diaMenuEntry *entry,uint32_t onoff,diaElem *w);
-  void      updateMe(void);
-  void      enable(uint32_t onoff) ;
-  void      finalize(void);;
-};
-
-/*************************************************/
-#include "ADM_encoder/ADM_vidEncode.hxx"
-
-class diaElemBitrate : public diaElem
-{
-  protected:
-    COMPRES_PARAMS    copy;
-    uint32_t maxQ;
-public:
-  
-  diaElemBitrate(COMPRES_PARAMS *p,const char *toggleTitle,const char *tip=NULL);
-  virtual ~diaElemBitrate() ;
-  void setMe(void *dialog, void *opaque,uint32_t line);
-  void getMe(void);
-  void setMaxQz(uint32_t qz);
-  
-  void updateMe(void);
-};
-
-/*************************************************/
-class diaElemFile : public diaElem
-{
-
-protected:
-    const char * defaultSuffix;
-public:
-  
-  diaElemFile(uint32_t writeMode,char **filename,const char *toggleTitle,
-              const char *defaultSuffix = 0,const char *tip=NULL);
-  virtual ~diaElemFile() ;
-  void setMe(void *dialog, void *opaque,uint32_t line);
-  void getMe(void);
-  uint32_t _write;
-  void   changeFile(void);
-  void   enable(uint32_t onoff);
-};
-/*************************************************/
-class diaElemDirSelect : public diaElem
-{
-
-public:
-  
-  diaElemDirSelect(char **filename,const char *toggleTitle,const char *tip=NULL);
-  virtual ~diaElemDirSelect() ;
-  void setMe(void *dialog, void *opaque,uint32_t line);
-  void getMe(void);
-  
-  void changeFile(void);
-  void   enable(uint32_t onoff);
-};
-/*************************************************/
-/* The text MUST be copied internally ! */
-class diaElemReadOnlyText : public diaElem
-{
-
-public:
-  
-  diaElemReadOnlyText(char *readyOnly,const char *toggleTitle,const char *tip=NULL);
-  virtual ~diaElemReadOnlyText() ;
-  void setMe(void *dialog, void *opaque,uint32_t line);
-  void getMe(void);
-  
-};
-/*************************************************/
-/* The text MUST be copied internally ! */
-class diaElemText : public diaElem
-{
-
-public:
-  
-  diaElemText(char **text,const char *toggleTitle,const char *tip=NULL);
-  virtual ~diaElemText() ;
-  void setMe(void *dialog, void *opaque,uint32_t line);
-  void getMe(void);
-  void enable(uint32_t onoff);
-};
-
-/*********************************************/
-class diaElemNotch : public diaElem
-{
-  uint32_t yesno;
-public:
-  
-  diaElemNotch(uint32_t yes,const char *toggleTitle, const char *tip=NULL);
-  virtual ~diaElemNotch() ;
-  void setMe(void *dialog, void *opaque,uint32_t line);
-  void getMe(void) {};
-};
-/*********************************************/
-class diaElemTabs 
-{
-  public:
-    
-  uint32_t nbElems;
-  diaElem  **dias;
-  const char *title;
-  
-  diaElemTabs(const char *toggleTitle, uint32_t nb, diaElem **content)
-  {
-      nbElems=nb;
-      dias=content; 
-      title=toggleTitle;
-  }
-  virtual ~diaElemTabs() 
-  {
-  }
-};
-/**********************************************/
-#define DIA_MAX_FRAME 10
-class diaElemFrame : public diaElem
-{
-  uint32_t frameSize;
-  uint32_t nbElems;
-  diaElem  *elems[DIA_MAX_FRAME];
-public:
-  
-  diaElemFrame(const char *toggleTitle, const char *tip=NULL);
-  virtual ~diaElemFrame() ;
-  void setMe(void *dialog, void *opaque,uint32_t line);
-  void getMe(void) ;
-  void swallow(diaElem *widget);
-  void enable(uint32_t onoff);
-  void finalize(void);
-};
-/**********************************************/
-class diaElemHex : public diaElem
-{
-  uint32_t dataSize;
-  uint8_t  *data;
-  
-public:
-  
-  diaElemHex(const char *toggleTitle, uint32_t dataSize,uint8_t *data);
-  virtual ~diaElemHex() ;
-  void setMe(void *dialog, void *opaque,uint32_t line);
-  void getMe(void) ;
-  void finalize(void);
-};
-/**********************************************/
-class diaElemThreadCount : public diaElem
-{
-
-public:
-  
-  diaElemThreadCount(uint32_t *value, const char *title, const char *tip = NULL);
-  virtual ~diaElemThreadCount() ;
-  void setMe(void *dialog, void *opaque, uint32_t line);
-  void getMe(void);
-};
-/*********************************************/
-uint8_t diaFactoryRun(const char *title,uint32_t nb,diaElem **elems);
-uint8_t diaFactoryRunTabs(const char *title,uint32_t nb,diaElemTabs **tabs);
-/*********************************************/
-#endif



From mean at mail.berlios.de  Wed Mar 26 20:27:01 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Wed, 26 Mar 2008 20:27:01 +0100
Subject: [Avidemux-svn-commit] r3937 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI
Message-ID: <200803261927.m2QJR1RG011582@sheep.berlios.de>

Author: mean
Date: 2008-03-26 20:27:01 +0100 (Wed, 26 Mar 2008)
New Revision: 3937

Removed:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_enter.h
Log:
[Merge]


Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_enter.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_enter.h	2008-03-26 19:26:58 UTC (rev 3936)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_enter.h	2008-03-26 19:27:01 UTC (rev 3937)
@@ -1,6 +0,0 @@
-
-
-uint8_t  DIA_GetFloatValue(float *value, float min, float max, const char *title, const char *legend);
-uint8_t  DIA_GetIntegerValue(int *value, int min, int max, const char *title, const char *legend);
-
-uint8_t  DIA_enterString_HIG(const char *title, const char *second, char **outname);



From mean at mail.berlios.de  Wed Mar 26 20:46:45 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Wed, 26 Mar 2008 20:46:45 +0100
Subject: [Avidemux-svn-commit] r3938 - in
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4:
	ADM_dialog ADM_dialogFactory ADM_filters ADM_gui ADM_ocr
Message-ID: <200803261946.m2QJkj8S013799@sheep.berlios.de>

Author: mean
Date: 2008-03-26 20:46:44 +0100 (Wed, 26 Mar 2008)
New Revision: 3938

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_vobsub.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_filesel.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/Q_mainfilter.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/Q_gui2.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_ocr/Q_ocr.cpp
Log:
Merge branch 'mean'


Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_vobsub.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_vobsub.cpp	2008-03-26 19:27:01 UTC (rev 3937)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_vobsub.cpp	2008-03-26 19:46:44 UTC (rev 3938)
@@ -21,7 +21,7 @@
 #include "ADM_default.h"
 
 #include "ADM_toolkit/toolkit.hxx"
-#include "ADM_toolkit/filesel.h"
+#include "DIA_fileSel.h"
 #include "ADM_image.h"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_colorspace/ADM_rgb.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_filesel.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_filesel.cpp	2008-03-26 19:27:01 UTC (rev 3937)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_filesel.cpp	2008-03-26 19:46:44 UTC (rev 3938)
@@ -32,7 +32,7 @@
 #include "prefs.h"
 #include "DIA_factory.h"
 #include "ADM_assert.h"
-#include "ADM_toolkit/filesel.h"
+#include "DIA_fileSel.h"
 extern const char *shortkey(const char *);
 void GUI_FileSelRead(const char *label, char * * name);
 #define MAX_SEL 2040

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/Q_mainfilter.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/Q_mainfilter.cpp	2008-03-26 19:27:01 UTC (rev 3937)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/Q_mainfilter.cpp	2008-03-26 19:46:44 UTC (rev 3938)
@@ -36,7 +36,7 @@
 #include "QStringListModel" 
 #include "QColor" 
 #include "ADM_default.h"
-#include "ADM_toolkit/filesel.h"
+#include "DIA_fileSel.h"
 
 # include "prefs.h"
 #include "ADM_audiodevice/audio_out.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/Q_gui2.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/Q_gui2.cpp	2008-03-26 19:27:01 UTC (rev 3937)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/Q_gui2.cpp	2008-03-26 19:46:44 UTC (rev 3938)
@@ -35,7 +35,7 @@
 #include "ADM_codecs/ADM_codec.h"
 #include "gui_action.hxx"
 #include "ADM_editor/ADM_outputfmt.h"
-#include "ADM_toolkit/filesel.h"
+#include "DIA_fileSel.h"
 #include "ADM_video/ADM_vidMisc.h"
 #include "prefs.h"
 #include "ADM_video/ADM_vidMisc.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_ocr/Q_ocr.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_ocr/Q_ocr.cpp	2008-03-26 19:27:01 UTC (rev 3937)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_ocr/Q_ocr.cpp	2008-03-26 19:46:44 UTC (rev 3938)
@@ -25,7 +25,7 @@
 
 #include "ADM_default.h"
 #include "ADM_toolkit/toolkit.hxx"
-#include "ADM_toolkit/filesel.h"
+#include "DIA_fileSel.h"
 #include "ADM_image.h"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_colorspace/ADM_rgb.h"



From gruntster at mail.berlios.de  Wed Mar 26 21:18:02 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Wed, 26 Mar 2008 21:18:02 +0100
Subject: [Avidemux-svn-commit] r3939 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src
Message-ID: <200803262018.m2QKI259018110@sheep.berlios.de>

Author: gruntster
Date: 2008-03-26 21:18:00 +0100 (Wed, 26 Mar 2008)
New Revision: 3939

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/CMakeLists.txt
Log:
[coreUI] Win32 build fix

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/CMakeLists.txt	2008-03-26 19:46:44 UTC (rev 3938)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/CMakeLists.txt	2008-03-26 20:18:00 UTC (rev 3939)
@@ -1,16 +1,9 @@
 SET(ADM_coreUI_SRCS 
-        DIA_factory.cpp
-        DIA_fileSel.cpp
+	DIA_factory.cpp
+	DIA_fileSel.cpp
 )
 
 ADD_LIBRARY(ADM_coreUI SHARED ${ADM_coreUI_SRCS})
-ADD_TARGET_DEFINITIONS(ADM_coreUI ADM_DEBUG FIND_LEAKS)
+TARGET_LINK_LIBRARIES(ADM_coreUI ADM_core)
 
-IF (MINGW)
-ELSEIF (APPLE)
-	ADD_TARGET_LDFLAGS(ADM_coreUI "-framework Carbon")
-ENDIF (MINGW)
-
-REMOVE_DEFINITIONS(-DHAVE_CONFIG_H)
-
 INSTALL(TARGETS ADM_coreUI RUNTIME DESTINATION ${BIN_DIR} LIBRARY DESTINATION lib)



From mean at mail.berlios.de  Thu Mar 27 20:03:42 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 27 Mar 2008 20:03:42 +0100
Subject: [Avidemux-svn-commit] r3940 - in
	branches/avidemux_2.5_branch_gruntster/avidemux:
	ADM_coreUI/include ADM_coreUI/src
	ADM_userInterfaces/ADM_GTK/ADM_dialogFactory
Message-ID: <200803271903.m2RJ3gb7014743@sheep.berlios.de>

Author: mean
Date: 2008-03-27 20:03:41 +0100 (Thu, 27 Mar 2008)
New Revision: 3940

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_coreUI_internal.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_factory.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_factory.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_dialogFactory.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_float.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_integer.cpp
Log:
[Merge]


Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_coreUI_internal.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_coreUI_internal.h	2008-03-26 20:18:00 UTC (rev 3939)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_coreUI_internal.h	2008-03-27 19:03:41 UTC (rev 3940)
@@ -49,6 +49,15 @@
 //
 	CREATE_BAR_T		 *CreateBar;
 	DELETE_DIA_ELEM_T    *DestroyBar;
+// Float
+	CREATE_FLOAT_T       *CreateFloat;
+	DELETE_DIA_ELEM_T    *DestroyFloat;
+// Integer	
+	CREATE_INTEGER_T     *CreateInteger;
+	DELETE_DIA_ELEM_T    *DestroyInteger;
+// UInteger	
+	CREATE_UINTEGER_T    *CreateUInteger;
+	DELETE_DIA_ELEM_T    *DestroyUInteger;
 	
 }FactoryDescriptor;
 //

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_factory.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_factory.h	2008-03-26 20:18:00 UTC (rev 3939)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_factory.h	2008-03-27 19:03:41 UTC (rev 3940)
@@ -84,6 +84,7 @@
 /*********************************************/
 
 typedef void      DELETE_DIA_ELEM_T(diaElem *widget);
+typedef void      FINALIZE_DIA_ELEM_T(void);
 /*********************************************/
 typedef diaElem  *(CREATE_BUTTON_T)(const char *toggleTitle, ADM_FAC_CALLBACK *cb,void *cookie,const char *tip);
 
@@ -183,6 +184,8 @@
   void      getMe(void);
 };
 /*********************************************/
+typedef diaElem  *(CREATE_INTEGER_T)(int32_t *intValue,const char *toggleTitle,int32_t min, int32_t max,const char *tip);
+typedef diaElem  *(CREATE_UINTEGER_T)(uint32_t *intValue,const char *toggleTitle,uint32_t min, uint32_t max,const char *tip);
 class diaElemInteger : public diaElem
 {
 
@@ -223,6 +226,8 @@
 };
 
 /*********************************************/
+typedef diaElem  *(CREATE_FLOAT_T)(ELEM_TYPE_FLOAT *intValue,const char *toggleTitle, ELEM_TYPE_FLOAT min,
+        ELEM_TYPE_FLOAT max,const char *tip);
 class diaElemFloat : public diaElem
 {
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_factory.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_factory.cpp	2008-03-26 20:18:00 UTC (rev 3939)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_factory.cpp	2008-03-27 19:03:41 UTC (rev 3940)
@@ -71,5 +71,63 @@
 	internalPointer=NULL;
 }
 DIA_MKSTUBS(diaElemBar)
+
+// ****************** Buttons ********************
+diaElemFloat ::diaElemFloat(ELEM_TYPE_FLOAT *intValue,const char *toggleTitle, ELEM_TYPE_FLOAT min,
+        ELEM_TYPE_FLOAT max,const char *tip) :diaElem(ELEM_FLOAT)
+{
+	ADM_assert(Factory); 
+	internalPointer=Factory->CreateFloat(intValue,toggleTitle, min,max,tip);
+}
+diaElemFloat ::~diaElemFloat()
+{
+	ADM_assert(Factory); 
+	Factory->DestroyFloat(internalPointer);
+	internalPointer=NULL;
+}
+void      diaElemFloat::enable(uint32_t onoff)
+	{ 
+		ADM_assert(internalPointer); 
+		internalPointer->enable(onoff); 
+	}
+DIA_MKSTUBS(diaElemFloat)
+// ****************** Integer ********************
+diaElemInteger ::diaElemInteger(int32_t *intValue,const char *toggleTitle, int32_t min, int32_t max,const char *tip) :
+	diaElem(ELEM_INTEGER)
+{
+	ADM_assert(Factory); 
+	internalPointer=Factory->CreateInteger(intValue,toggleTitle, min,max,tip);
+}
+diaElemInteger ::~diaElemInteger()
+{
+	ADM_assert(Factory); 
+	Factory->DestroyInteger(internalPointer);
+	internalPointer=NULL;
+}
+void      diaElemInteger::enable(uint32_t onoff)
+	{ 
+		ADM_assert(internalPointer); 
+		internalPointer->enable(onoff); 
+	}
+DIA_MKSTUBS(diaElemInteger)
+// ****************** UInteger ********************
+diaElemUInteger ::diaElemUInteger(uint32_t *intValue,const char *toggleTitle, uint32_t min, uint32_t max,const char *tip) :
+	diaElem(ELEM_INTEGER)
+{
+	ADM_assert(Factory); 
+	internalPointer=Factory->CreateUInteger(intValue,toggleTitle, min,max,tip);
+}
+diaElemUInteger ::~diaElemUInteger()
+{
+	ADM_assert(Factory); 
+	Factory->DestroyUInteger(internalPointer);
+	internalPointer=NULL;
+}
+void      diaElemUInteger::enable(uint32_t onoff)
+	{ 
+		ADM_assert(internalPointer); 
+		internalPointer->enable(onoff); 
+	}
+DIA_MKSTUBS(diaElemUInteger)
 // ******************************************	
 // EOF

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_dialogFactory.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_dialogFactory.cpp	2008-03-26 20:18:00 UTC (rev 3939)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_dialogFactory.cpp	2008-03-27 19:03:41 UTC (rev 3940)
@@ -297,6 +297,12 @@
 extern void 	gtkDeleteButton(diaElem *e);
 extern diaElem  *gtkCreateBar(uint32_t percent,const char *toggleTitle);
 extern void     gtkDeleteBar(diaElem *e);
+extern diaElem  *gtkCreateFloat(ELEM_TYPE_FLOAT *intValue,const char *toggleTitle, ELEM_TYPE_FLOAT min, ELEM_TYPE_FLOAT max,const char *tip);
+extern void     gtkDeleteFloat(diaElem *e);
+extern CREATE_INTEGER_T gtkCreateInteger;
+extern CREATE_UINTEGER_T gtkCreateUInteger;
+extern DELETE_DIA_ELEM_T gtkDestroyInteger;
+extern DELETE_DIA_ELEM_T gtkDestroyUInteger;
 //************
 static FactoryDescriptor GtkFactoryDescriptor=
 {
@@ -307,7 +313,16 @@
 	&gtkDeleteButton,
 	// Bar
 	&gtkCreateBar,
-	&gtkDeleteBar
+	&gtkDeleteBar,
+	// Float
+	&gtkCreateFloat,
+	&gtkDeleteFloat,
+	// Integer
+	&gtkCreateInteger,
+	&gtkDestroyInteger,
+	// UInteger
+	&gtkCreateUInteger,
+	&gtkDestroyUInteger
 };
 
 /**

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_float.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_float.cpp	2008-03-26 20:18:00 UTC (rev 3939)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_float.cpp	2008-03-27 19:03:41 UTC (rev 3940)
@@ -16,6 +16,23 @@
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
 #include "DIA_factory.h"
 
+namespace ADM_GtkFactory
+{
+
+
+class diaElemFloat : public diaElem
+{
+
+public:
+  ELEM_TYPE_FLOAT min,max;
+  diaElemFloat(ELEM_TYPE_FLOAT *intValue,const char *toggleTitle, ELEM_TYPE_FLOAT min, 
+               ELEM_TYPE_FLOAT max,const char *tip=NULL);
+  virtual ~diaElemFloat() ;
+  void setMe(void *dialog, void *opaque,uint32_t line);
+  void getMe(void);
+  void      enable(uint32_t onoff) ;
+};
+
 diaElemFloat::diaElemFloat(ELEM_TYPE_FLOAT *intValue,const char *toggleTitle, 
                             ELEM_TYPE_FLOAT min, ELEM_TYPE_FLOAT max,const char *tip)
   : diaElem(ELEM_FLOAT)
@@ -81,5 +98,17 @@
   GtkWidget *widget=(GtkWidget *)myWidget;
   gtk_widget_set_sensitive(GTK_WIDGET(myWidget),onoff);
 }
+} // End of namespace
+//****************************Hoook*****************
 
+diaElem  *gtkCreateFloat(ELEM_TYPE_FLOAT *intValue,const char *toggleTitle, ELEM_TYPE_FLOAT min,
+        ELEM_TYPE_FLOAT max,const char *tip)
+{
+	return new  ADM_GtkFactory::diaElemFloat(intValue,toggleTitle,min,max,tip);
+}
+void gtkDeleteFloat(diaElem *e)
+{
+	ADM_GtkFactory::diaElemFloat *a=(ADM_GtkFactory::diaElemFloat *)e;
+	delete a;
+}
 //EOF

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_integer.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_integer.cpp	2008-03-26 20:18:00 UTC (rev 3939)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_integer.cpp	2008-03-27 19:03:41 UTC (rev 3940)
@@ -16,6 +16,35 @@
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
 #include "DIA_factory.h"
 
+
+
+namespace ADM_GtkFactory
+{
+class diaElemInteger : public diaElem
+{
+
+public:
+  int32_t min,max;
+  diaElemInteger(int32_t *intValue,const char *toggleTitle, int32_t min, int32_t max,const char *tip=NULL);
+  virtual ~diaElemInteger() ;
+  void setMe(void *dialog, void *opaque,uint32_t line);
+  void getMe(void);
+  void      enable(uint32_t onoff) ;
+};
+/* Same but unsigned */
+class diaElemUInteger : public diaElem
+{
+
+public:
+  uint32_t min,max;
+  diaElemUInteger(uint32_t *intValue,const char *toggleTitle, uint32_t min, uint32_t max,const char *tip=NULL);
+  virtual ~diaElemUInteger() ;
+  void setMe(void *dialog, void *opaque,uint32_t line);
+  void getMe(void);
+  void      enable(uint32_t onoff) ;
+  
+};
+
 diaElemInteger::diaElemInteger(int32_t *intValue,const char *toggleTitle, int32_t min, int32_t max,const char *tip)
   : diaElem(ELEM_INTEGER)
 {
@@ -156,7 +185,28 @@
 }
 
 //****************************************************
+} // End of namespace
+//****************************Hoook*****************
 
+diaElem  *gtkCreateInteger(int32_t *intValue,const char *toggleTitle,int32_t min, int32_t max,const char *tip)
+{
+	return new  ADM_GtkFactory::diaElemInteger(intValue,toggleTitle,min,max,tip);
+}
+void gtkDestroyInteger(diaElem *e)
+{
+	ADM_GtkFactory::diaElemInteger *a=(ADM_GtkFactory::diaElemInteger *)e;
+	delete a;
+}
+diaElem  *gtkCreateUInteger(uint32_t *intValue,const char *toggleTitle,uint32_t min, uint32_t max,const char *tip)
+{
+	return new  ADM_GtkFactory::diaElemUInteger(intValue,toggleTitle,min,max,tip);
+}
+void gtkDestroyUInteger(diaElem *e)
+{
+	ADM_GtkFactory::diaElemUInteger *a=(ADM_GtkFactory::diaElemUInteger *)e;
+	delete a;
+}
+//****************************************************
 template <typename T>
 static
 uint32_t diaElemSliderDigitsDefault (T incr)



From gruntster at mail.berlios.de  Fri Mar 28 15:41:02 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Fri, 28 Mar 2008 15:41:02 +0100
Subject: [Avidemux-svn-commit] r3941 - branches/avidemux_2.4_branch/po
Message-ID: <200803281441.m2SEf2fm021519@sheep.berlios.de>

Author: gruntster
Date: 2008-03-28 15:40:56 +0100 (Fri, 28 Mar 2008)
New Revision: 3941

Modified:
   branches/avidemux_2.4_branch/po/fr.po
Log:
[I18N] French update by NSV

Modified: branches/avidemux_2.4_branch/po/fr.po
===================================================================
--- branches/avidemux_2.4_branch/po/fr.po	2008-03-27 19:03:41 UTC (rev 3940)
+++ branches/avidemux_2.4_branch/po/fr.po	2008-03-28 14:40:56 UTC (rev 3941)
@@ -5,14 +5,17 @@
 msgstr ""
 "Project-Id-Version: fr\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2007-09-26 14:47+0100\n"
-"PO-Revision-Date: 2007-11-01 12:17+0100\n"
-"Last-Translator: \n"
+"POT-Creation-Date: 2008-03-18 14:10+0000\n"
+"PO-Revision-Date: 2008-03-27 14:17+0100\n"
+"Last-Translator: NSV <xxNSVxx at gmail.com>\n"
 "Language-Team:  <en at li.org>\n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: 8bit\n"
 "X-Generator: KBabel 1.11.4\n"
+"X-Poedit-Language: French\n"
+"X-Poedit-Country: FRANCE\n"
+"X-Poedit-Basepath: C:\\Users\\NSV\\Documents\\Projet\\C++\\Avidemux\\\n"
 
 #: avidemux/ADM_editor/ADM_outputfmt.h:42
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:511
@@ -29,19 +32,19 @@
 
 #: avidemux/ADM_editor/ADM_outputfmt.h:45
 msgid "AVI, unpack VOP"
-msgstr ""
+msgstr "AVI, sans VOP"
 
 #: avidemux/ADM_editor/ADM_outputfmt.h:46
 msgid "MPEG-PS (A+V)"
-msgstr "MPEG-PS A+V"
+msgstr "MPEG-PS (A+V)"
 
 #: avidemux/ADM_editor/ADM_outputfmt.h:47
 msgid "MPEG-TS (A+V)"
-msgstr "MPEG-TS A+V"
+msgstr "MPEG-TS (A+V)"
 
 #: avidemux/ADM_editor/ADM_outputfmt.h:48
 msgid "MPEG video"
-msgstr ""
+msgstr "Vid?o MPEG"
 
 #: avidemux/ADM_editor/ADM_outputfmt.h:49
 msgid "MP4"
@@ -58,31 +61,32 @@
 
 #: avidemux/ADM_editor/ADM_outputfmt.h:52
 msgid "FLV"
-msgstr ""
+msgstr "FLV"
 
 #: avidemux/ADM_editor/ADM_outputfmt.h:53
 msgid "MKV"
-msgstr ""
+msgstr "MKV"
 
 #: avidemux/ADM_editor/ADM_outputfmt.h:54
+#, fuzzy
 msgid "DUMMY"
-msgstr ""
+msgstr "EXEMPLE"
 
 #: avidemux/ADM_audio/audiotimeline.cpp:85
 #: avidemux/ADM_audio/audiotimeline.cpp:96
 msgid "Building VBR map"
-msgstr "Construction de l'index"
+msgstr "Construction de l'index VBR"
 
-#: avidemux/ADM_audiocodec/ADM_codecwma.cpp:75
-#: avidemux/ADM_audiocodec/ADM_codecwma.cpp:183
+#: avidemux/ADM_audiocodec/ADM_codecwma.cpp:88
+#: avidemux/ADM_audiocodec/ADM_codecwma.cpp:200
 msgid "Internal error"
 msgstr "Erreur interne"
 
-#: avidemux/ADM_audiocodec/ADM_codecwma.cpp:75
+#: avidemux/ADM_audiocodec/ADM_codecwma.cpp:88
 msgid "Cannot open WMA2 codec."
 msgstr "Ne peut pas ouvrir le codec WMA2."
 
-#: avidemux/ADM_audiocodec/ADM_codecwma.cpp:183
+#: avidemux/ADM_audiocodec/ADM_codecwma.cpp:200
 msgid "Cannot open AMR codec."
 msgstr "Ne peut pas ouvrir le codec AMR."
 
@@ -96,24 +100,24 @@
 
 #: avidemux/ADM_audiofilter/audioencoder_lame.cpp:220
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:104
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:296
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:110
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:295
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:103
 msgid "Stereo"
 msgstr "St?r?o"
 
 #: avidemux/ADM_audiofilter/audioencoder_lame.cpp:221
 msgid "Joint stereo"
-msgstr "St?r?o join"
+msgstr "St?r?o joint"
 
 #: avidemux/ADM_audiofilter/audioencoder_lame.cpp:222
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:103
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:107
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:100
 msgid "Mono"
 msgstr "Mono"
 
 #: avidemux/ADM_audiofilter/audioencoder_lame.cpp:224
 msgid "C_hannel mode:"
-msgstr "Mode Canal:"
+msgstr "Type de _canal :"
 
 #: avidemux/ADM_audiofilter/audioencoder_lame.cpp:227
 msgid "CBR"
@@ -125,29 +129,33 @@
 
 #: avidemux/ADM_audiofilter/audioencoder_lame.cpp:230
 msgid "Extreme"
-msgstr "Extr?me"
+msgstr "Extr?me"
 
 #: avidemux/ADM_audiofilter/audioencoder_lame.cpp:233
 msgid "Bit_rate mode:"
-msgstr "Mode Bi_trate:"
+msgstr "Type de _d?bit :"
 
 #: avidemux/ADM_audiofilter/audioencoder_lame.cpp:246
 #: avidemux/ADM_audiofilter/audioencoder_vorbis.cpp:288
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioconfig.cpp:59
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioconfig.cpp:52
 msgid "_Bitrate:"
-msgstr "_Bitrate:"
+msgstr "_D?bit :"
 
 #: avidemux/ADM_audiofilter/audioencoder_lame.cpp:251
 #: avidemux/ADM_audiofilter/audioencoder_vorbis.cpp:290
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_mjpeg.cpp:40
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_mjpeg.cpp:36
 #: avidemux/ADM_videoFilter/ADM_vidDecDec.cpp:204
 msgid "_Quality:"
-msgstr "_Qualit?:"
+msgstr "_Qualit? :"
 
 #: avidemux/ADM_audiofilter/audioencoder_lame.cpp:252
 msgid "_Disable reservoir:"
-msgstr "D?sactiver le bitrate r?servoir"
+msgstr "_D?sactiver le bit reservoir (Qualit? plus basse) :"
 
+#: avidemux/ADM_audiofilter/audioencoder_lame.cpp:256
+msgid "LAME Configuration"
+msgstr "Configuration de LAME"
+
 #: avidemux/ADM_audiofilter/audioencoder_vorbis.cpp:271
 msgid "VBR"
 msgstr "VBR"
@@ -162,18 +170,25 @@
 #: avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp:113
 #: avidemux/ADM_videoFilter/ADM_vidYadif.cpp:181
 msgid "_Mode:"
-msgstr "_Mode:"
+msgstr "_Mode :"
 
+#: avidemux/ADM_audiofilter/audioencoder_vorbis.cpp:297
+msgid "Vorbis Configuration"
+msgstr "Configuration de Vorbis"
+
 #: avidemux/ADM_audiofilter/audiofilter_buildchain.cpp:322
-#: avidemux/gui_autodrive.cpp:78 avidemux/gui_autodrive.cpp:93
-#: avidemux/gui_autodrive.cpp:120 avidemux/gui_autodrive.cpp:154
+#: avidemux/gui_autodrive.cpp:62
+#: avidemux/gui_autodrive.cpp:74
+#: avidemux/gui_autodrive.cpp:120
+#: avidemux/gui_autodrive.cpp:135
+#: avidemux/gui_autodrive.cpp:162
+#: avidemux/gui_autodrive.cpp:196
 msgid "Codec Error"
-msgstr "Erreur codec"
+msgstr "Erreur de codec"
 
 #: avidemux/ADM_audiofilter/audiofilter_buildchain.cpp:322
 msgid ""
-"The number of channels is greater than what the selected audio codec can "
-"do.\n"
+"The number of channels is greater than what the selected audio codec can do.\n"
 "Either change codec or use the mixer filter to have less channels."
 msgstr ""
 "Le nombre de canaux est plus grand que ce que le codec audio peut accepter.\n"
@@ -183,20 +198,14 @@
 msgid "Internal error finding codec"
 msgstr "Erreur interne pour trouver le codec"
 
-#: avidemux/ADM_codecs/ADM_ffmpeg.cpp:48
+#: avidemux/ADM_codecs/ADM_ffmpeg.cpp:49
 msgid "Internal error opening codec"
 msgstr "Erreur interne pour ouvrir le codec"
 
-#: avidemux/ADM_codecs/ADM_ffmpeg.cpp:50
+#: avidemux/ADM_codecs/ADM_ffmpeg.cpp:51
 msgid "Internal error with context for  codec"
 msgstr "Erreur interne avec le contexte du codec"
 
-#: avidemux/ADM_codecs/ADM_ffmpeg.cpp:50
-msgid ""
-".\n"
-" Did you use too low / too high target for 2 pass ?"
-msgstr "<br>Avez vous sp?cific? un bitrate trop haut ou trop bas ?"
-
 #: avidemux/ADM_editor/ADM_edFrameType.cpp:58
 msgid "No video loaded"
 msgstr "Aucune vid?o charg?e"
@@ -207,11 +216,11 @@
 
 #: avidemux/ADM_editor/ADM_edFrameType.cpp:63
 msgid "DivX 5 + packed?"
-msgstr "DivX 5 + packed??"
+msgstr "DivX 5 + empaquet? ?"
 
 #: avidemux/ADM_editor/ADM_edFrameType.cpp:93
 msgid "Rebuilding Frames"
-msgstr "Reconstuire un index"
+msgstr "Reconstruction des images"
 
 #: avidemux/ADM_editor/ADM_edFrameType.cpp:129
 msgid "Aborted"
@@ -228,30 +237,25 @@
 #: avidemux/ADM_editor/ADM_edit.cpp:415
 #, c-format
 msgid "Attempt to open %s failed!"
-msgstr "Echec ouverture de ??%s???!"
+msgstr "Echec de l'ouverture de ??%s???!"
 
 #: avidemux/ADM_editor/ADM_edit.cpp:439
 msgid ""
-"You cannot mix different video dimensions yet. Using the partial video "
-"filter later, will not work around this problem. The workaround is:\n"
-"1.) \"resize\" / \"add border\" / \"crop\" each stream to the same "
-"resolution\n"
+"You cannot mix different video dimensions yet. Using the partial video filter later, will not work around this problem. The workaround is:\n"
+"1.) \"resize\" / \"add border\" / \"crop\" each stream to the same resolution\n"
 "2.) concatinate them together"
 msgstr ""
-"Vous ne pouvez pas multiplexer des vid?os de dimensions diff?rentes.Utiliser "
-"un filtre vid?o partiel plus tard,ne focntionnera pas pour ce probl?me. Le "
-"travail est:\n"
-"1.)\"redimensionner\" /\"Ajout bordure\" /\"cropper\" chaque flux pour la "
-"m?me dimension \n"
+"Vous ne pouvez pas multiplexer des vid?os de dimensions diff?rentes. Utiliser un filtre vid?o partiel plus tard, ne fonctionnera pas pour ce probl?me. Le travail est :\n"
+"1.) \"redimensionner\" /\"ajout de bordure\" / \"retailler\" chaque flux pour la m?me dimension\n"
 "2.) concat?ner tous ensemble"
 
 #: avidemux/ADM_editor/ADM_edit.cpp:551
 msgid "Build Time Map"
-msgstr "Construire Time Map"
+msgstr "Construire l'index temporel"
 
 #: avidemux/ADM_editor/ADM_edit.cpp:551
 msgid "Build VBR time map?"
-msgstr "Construire le Time Map pour le VBR??"
+msgstr "Construire l'index temporel pour le VBR??"
 
 #: avidemux/ADM_editor/ADM_edit.cpp:585
 msgid "Use that mode"
@@ -259,22 +263,21 @@
 
 #: avidemux/ADM_editor/ADM_edit.cpp:585
 msgid "H264 detected"
-msgstr "H264 d?tect?"
+msgstr "H.264 d?tect?"
 
 #: avidemux/ADM_editor/ADM_edit.cpp:585
 msgid ""
-"If the file is using bframe as reference, it can lead to crash or "
-"stutteting.\n"
-"Avidemux can use another mode which is safed but <b>YOU WILL LOOSE FRAME "
-"ACCURACY</b>.\n"
+"If the file is using bframe as reference, it can lead to crash or stutteting.\n"
+"Avidemux can use another mode which is safed but <b>YOU WILL LOOSE FRAME ACCURACY</b>.\n"
 "Do you want to use that mode ?"
 msgstr ""
-"Si le fichier utilise l'option b-frame as reference, cela peut conduire ? un crash ou ? des saccades.\nAvidemux peut utilier un autre mode qui est plus stable, mais <b>cela fera perdre la pr?cision ? l'image pr?s</b>\n"
+"Si le fichier utilise l'option image-B comme r?f?rence, cela peut conduire ? un plantage ou ? des saccades.\n"
+"Avidemux peut utiliser un autre mode qui est plus stable mais <b>VOUS PERDREZ LA PRECISION DE L'IMAGE</b>.\n"
 "Voulez vous utiliser ce mode ?"
 
 #: avidemux/ADM_editor/ADM_edit.cpp:712
 msgid "Packed Bitstream detected"
-msgstr "Packed Bitstream d?tect?"
+msgstr "Bitstream empaquet? d?tect?"
 
 #: avidemux/ADM_editor/ADM_edit.cpp:713
 msgid "Do you want me to unpack it ?"
@@ -282,7 +285,7 @@
 
 #: avidemux/ADM_editor/ADM_edit.cpp:733
 msgid "Could not unpack the video"
-msgstr "Impossible de d?paquer la vid?o"
+msgstr "Impossible de d?paqueter la vid?o"
 
 #: avidemux/ADM_editor/ADM_edit.cpp:733
 msgid "Using backup decoder - not frame accurate."
@@ -294,7 +297,7 @@
 
 #: avidemux/ADM_editor/ADM_edit.cpp:738
 msgid "The unpacking succeedeed but the index is still not up to date."
-msgstr "Le d?paquetage a r?eussi mais l'index n'est toujours pas ? our."
+msgstr "Le d?paquetage a r?ussi mais l'index n'est toujours pas ? jour."
 
 #: avidemux/ADM_editor/ADM_edit.cpp:744
 msgid "Troubles ahead"
@@ -302,7 +305,7 @@
 
 #: avidemux/ADM_editor/ADM_edit.cpp:744
 msgid "This a VOP packed AVI."
-msgstr "Ceci est un AVI ??VOP packed??."
+msgstr "Ceci est un AVI avec VOP."
 
 #: avidemux/ADM_editor/ADM_edit.cpp:755
 msgid "Index is not up to date"
@@ -310,19 +313,19 @@
 
 #: avidemux/ADM_editor/ADM_edit.cpp:755
 msgid "You should use Tool->Rebuild frame. Do it now ?"
-msgstr "Vous devriez utiliser ??Outils->Reconstruire image??. Le faire maintenant??"
+msgstr "Vous devriez utiliser ??Outils -> Reconstruire image??. Le faire maintenant??"
 
-#: avidemux/ADM_editor/ADM_edit.cpp:1510
+#: avidemux/ADM_editor/ADM_edit.cpp:1517
 msgid ""
 "This looks like mpeg\n"
 " Do you want to index it?"
 msgstr ""
-"Ce fichier est un MPEG\n"
+"Ce fichier ressemble ? un MPEG.\n"
 "Voulez vous l'indexer??"
 
-#: avidemux/ADM_editor/ADM_edit.cpp:1562
+#: avidemux/ADM_editor/ADM_edit.cpp:1569
 msgid "Indexing failed"
-msgstr "Echec indexage"
+msgstr "Echec d'indexation"
 
 #: avidemux/ADM_editor/ADM_edLoadSave.cpp:75
 msgid "Unsupported"
@@ -330,7 +333,7 @@
 
 #: avidemux/ADM_editor/ADM_edLoadSave.cpp:301
 msgid "Old format project file"
-msgstr "Fichier projet ancien format"
+msgstr "Fichier projet dans un ancien format"
 
 #: avidemux/ADM_editor/ADM_edLoadSave.cpp:301
 msgid "No more supported."
@@ -362,19 +365,669 @@
 
 #: avidemux/ADM_encoder/adm_encffmpeg.cpp:261
 msgid "Incompatible settings"
-msgstr "R?glages incomptaibles"
+msgstr "R?glages incompatibles"
 
 #: avidemux/ADM_encoder/adm_encffmpeg.cpp:261
 msgid "At the moment, the DV codec only accepts 720*576 at 25"
-msgstr "Pour le moment,le codec DV accepte seulement le 720*576 at 25 fps"
+msgstr "Pour le moment, le codec DV accepte seulement le 720*576 at 25fps"
 
+#: avidemux/ADM_filter/filter_declaration.cpp:55
+msgid "Crop"
+msgstr "Crop"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:55
+msgid "Remove lines from top/bottom/left/right."
+msgstr "Retaille la vid?o."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:56
+msgid "MPlayer resize"
+msgstr "MPlayer resize"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:56
+msgid "Change image size. Faster than Avisynth's Resize."
+msgstr "Redimensionne l'image. Plus rapide que le filtre d'Avisynth."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:57
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:312
+msgid "Resize"
+msgstr "Resize"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:57
+msgid "Picture resizer ported from Avisynth."
+msgstr "Filtre de redimensionnement de l'image par Avisynth."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:58
+msgid "Add black borders"
+msgstr "Add black borders"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:58
+msgid "Add pure black border(s). Enlarges the picture."
+msgstr "Ajoute des bordures noires. Agrandit l'image."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:59
+msgid "Blacken borders"
+msgstr "Blacken borders"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:59
+msgid "Fill borders with pure black. Doesn't alter size."
+msgstr "Ajoute des bordures noires. N'agrandit pas l'image."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:60
+msgid "Vertical flip"
+msgstr "Vertical flip"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:60
+msgid "Vertically flip the picture."
+msgstr "Retourne l'image verticalement."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:61
+#: avidemux/ADM_videoFilter/ADM_vidRotate.cpp:271
+msgid "Rotate"
+msgstr "Rotate"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:61
+msgid "Rotate the picture by 90, 180 or 270 degrees."
+msgstr "Pivote l'image de 90, 180 ou 270 degr?s."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:63
+#: avidemux/ADM_videoFilter/ADM_vidResampleFPS.cpp:90
+msgid "Resample fps"
+msgstr "Resample fps"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:63
+msgid "Change framerate while keeping duration."
+msgstr "Change le nombre d'images par seconde en gardant la m?me dur?e de la vid?o."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:64
+msgid "Reverse"
+msgstr "Reverse"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:64
+msgid "Play video backward."
+msgstr "Lit la vid?o ? l'envers."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:65
+#: avidemux/ADM_videoFilter/ADM_vidFade.cpp:78
+msgid "Fade"
+msgstr "Fade"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:65
+msgid "Fade in/out."
+msgstr "Fondu entrant/sortant"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:71
+#: avidemux/ADM_videoFilter/ADM_vidYadif.cpp:186
+msgid "yadif"
+msgstr "yadif"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:71
+msgid "Yet Another DeInterlacer. Ported from MPlayer."
+msgstr "D?sentrelaceur port? depuis MPlayer."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:72
+#: avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp:119
+msgid "mcDeinterlace"
+msgstr "mcDeinterlace"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:72
+msgid "Motion compensation deinterlacer. Ported from MPlayer."
+msgstr "Motion compensation deinterlacer port? depuis MPlayer."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:73
+msgid "Deinterlace"
+msgstr "Deinterlace"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:73
+#, fuzzy
+msgid "Mask interlacing artifacts. Port of Smart deinterlace."
+msgstr "Masque les artefacts entrelac?s."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:74
+#: avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp:100
+msgid "KernelDeint"
+msgstr "KernelDeint"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:74
+msgid "Kernel deinterlacer by Donald Graft."
+msgstr "D?sentrelaceur par Donald Graft."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:75
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:121
+msgid "TDeint"
+msgstr "TDeint"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:75
+msgid "Motion adaptative deinterlacer by Tritical."
+msgstr "Motion adaptative deinterlacer par Tritical."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:76
+#: avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp:119
+msgid "libavcodec deinterlacer"
+msgstr "libavcodec deinterlacer"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:76
+msgid "All FFmpeg deinterlace filters (bicubic, median, ...)."
+msgstr "Tous les filtres FFmpeg de d?sentrelacement (bicubique, moyen, ...)."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:77
+#: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:131
+msgid "Decomb Telecide"
+msgstr "Decomb Telecide"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:77
+msgid "Great deinterlacing package including IVTC."
+msgstr "D?sentrelaceur incluant l'Inverse Telecine."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:78
+#: avidemux/ADM_videoFilter/ADM_vidDecDec.cpp:211
+msgid "Decomb Decimate"
+msgstr "Decomb Decimate"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:78
+msgid "Useful to remove dupes left by Telecide."
+msgstr "Utile pour supprimer les erreurs laiss?es par Telecide."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:79
+msgid "Pulldown"
+msgstr "Pulldown"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:79
+msgid "Convert 24 fps to 30 fps by repeating fields."
+msgstr "Converti de 24fps en 30fps en r?p?tant les trames."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:81
+msgid "Bobber - convert each field into a full sized frame."
+msgstr "Converti chaque trame en une image compl?te."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:83
+msgid "PAL field shift"
+msgstr "PAL field shift"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:83
+#, fuzzy
+msgid "Shift fields by one. Useful for some PAL movies."
+msgstr "D?cale les trames par un. Utile pour certains films en PAL."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:84
+msgid "PAL smart"
+msgstr "PAL smart"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:84
+#, fuzzy
+msgid "Smartly revert non constant PAL field shift."
+msgstr "Annule intelligemment le d?calage non constant des trames PAL."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:89
+msgid "Drop"
+msgstr "Drop"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:89
+msgid "Drop damaged fields (e.g. from VHS capture)."
+msgstr "Saute les trames endommag?es (ex : depuis une capture VHS)."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:90
+msgid "Swap fields"
+msgstr "Swap fields"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:90
+msgid "Swap top and bottom fields."
+msgstr "Inverse les trames paires et impaires."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:91
+msgid "Smart swap fields"
+msgstr "Smart swap fields"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:91
+msgid "Smartly swap fields. Needed when field order changes."
+msgstr "Inverse intelligemment les trames. N?cessaire lorsqu'il y a un changement dans l'ordre des trames."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:93
+msgid "Keep even fields"
+msgstr "Keep even fields"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:93
+msgid "Keep top fields. Gives a half height picture."
+msgstr "Garde les trames paires. Obtient une image de demi-hauteur."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:94
+msgid "Keep odd fields"
+msgstr "Keep odd fields"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:94
+msgid "Keep bottom fileds. Gives a half height picture."
+msgstr "Garde les trames impaires. Obtient une image de demi-hauteur."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:95
+msgid "Separate fields"
+msgstr "Separate fields"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:95
+msgid "Each field becomes full picture, half sized."
+msgstr "Chaque trame devient une image compl?te, demi-hauteur."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:96
+msgid "Merge fields"
+msgstr "Merge fields"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:96
+msgid "Merge two pictures as if they were two fields."
+msgstr "Fusionne deux images comme s'ils ?taient deux trames."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:99
+msgid "Hz Stack fields"
+msgstr "Hz Stack fields"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:99
+msgid "Put botj fields side by side."
+msgstr "Met les deux trames c?te ? c?te."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:102
+msgid "Stack fields"
+msgstr "Stack fields"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:102
+msgid "Put two fields on top of one another."
+msgstr "Empile les deux trames."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:103
+msgid "Unstack fields"
+msgstr "Unstack fields"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:103
+msgid "Interleave top and bottom part of the picture."
+msgstr "Entrelace la trame paire et impaire de l'image."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:107
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eq2.cpp:205
+msgid "MPlayer eq2"
+msgstr "MPlayer eq2"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:107
+msgid "Adjust contrast, brightness, saturation and gamma."
+msgstr "Ajuste le contraste, la luminosit?, la saturation et le gamma."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:108
+msgid "MPlayer hue"
+msgstr "MPlayer hue"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:108
+msgid "Adjust hue and saturation."
+msgstr "Ajuste la teinte et la saturation."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:109
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:179
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_contrast.cpp:72
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_contrast.cpp:194
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_contrast.cpp:212
+msgid "Contrast"
+msgstr "Contrast"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:109
+msgid "Adjust contrast, brightness and colors."
+msgstr "Ajuste le contraste, la luminosit? et les couleurs."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:110
+msgid "Luma equalizer"
+msgstr "Luma equalizer"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:110
+msgid "Luma correction filter with histogram."
+msgstr "Filtre de correction de la luminance avec histogramme."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:112
+msgid "Swap U and V"
+msgstr "Swap U and V"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:112
+msgid "Invert chroma U and chroma V."
+msgstr "Inverse la chrominance en U et V."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:113
+msgid "Chroma shift"
+msgstr "Chroma shift"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:113
+msgid "Shift chroma U/V to fix badly synced luma/chroma."
+msgstr "D?cale la chrominance en U et V pour r?parer une luminance/chrominance mal synchonis?."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:115
+msgid "Luma only"
+msgstr "Luma only"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:115
+msgid "Convert picture to greyscale (black and white)."
+msgstr "Converti l'image en nuance de gris (noir et blanc)."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:116
+msgid "Chroma U only"
+msgstr "Chroma U only"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:116
+msgid "Convert picture to grey, keeping only chroma U."
+msgstr "Converti l'image en gris en gardant que la chrominance en U"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:117
+msgid "Chroma V only"
+msgstr "Chroma V only"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:117
+msgid "Convert picture to grey, keeping only chroma V."
+msgstr "Converti l'image en gris en ne gardant que la chrominance en V."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:119
+msgid "Luma delta"
+msgstr "Luma delta"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:119
+msgid "Difference between current and previous picture."
+msgstr "Diff?rence entre l'image actuel et la pr?c?dente."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:120
+msgid "Avisynth ColorYUV"
+msgstr "Avisynth ColorYUV"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:120
+msgid "Alter colors (auto white balance etc...). Ported from Avisynth."
+msgstr "Modifie les couleurs (balance automatique des blancs, ...) par Avisynth."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:130
+#: avidemux/ADM_videoFilter/ADM_vidMPLD3Dlow.cpp:80
+msgid "MPlayer denoise3d"
+msgstr "MPlayer denoise3d"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:130
+msgid "Reduce noise, smooth image, increase compressibility."
+msgstr "R?duit le bruit, lisse l'image, augmente la compressibilit?."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:131
+#: avidemux/ADM_videoFilter/ADM_vidMPLD3D.cpp:80
+msgid "MPlayer hqdn3d"
+msgstr "MPlayer hqdn3d"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:131
+msgid "High quality version of denoise3d. Slower but more precise."
+msgstr "Version haute qualit? de \"denoise3d\". Plus lent mais plus pr?cis."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:132
+#: avidemux/ADM_videoFilter/ADM_vidFlux.cpp:138
+msgid "FluxSmooth"
+msgstr "FluxSmooth"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:132
+msgid "Spatio-temporal cleaner by Ross Thomas."
+msgstr "Nettoyeur spatio-temporel par Ross Thomas."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:134
+#: avidemux/ADM_videoFilter/ADM_vidVlad.cpp:106
+msgid "Temporal Cleaner"
+msgstr "Temporal Cleaner"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:134
+msgid "Vlad59's Avisynth port of Jim Casaburi's denoiser."
+msgstr "D?bruiteur de Jim Casaburi port? par Vlad59 d'Avisynth."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:136
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filterlist.cpp:173
+#: avidemux/ADM_videoFilter/ADM_vidDenoise.cpp:397
+msgid "Denoise"
+msgstr "Denoise"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:136
+msgid "Port of Transcode DNR."
+msgstr "Portage de \"Transcode DNR\"."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:137
+#: avidemux/ADM_videoFilter/ADM_vidStabilize.cpp:66
+msgid "Stabilize"
+msgstr "Stabilize"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:137
+msgid "Light denoiser."
+msgstr "D?bruiteur l?ger."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:139
+msgid "Cnr2"
+msgstr "Cnr2"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:139
+msgid "Chroma noise reduction filter by MarcFD/Tritical."
+msgstr "Filtre de r?duction du bruit de la chrominance par MarcFD/Tritical."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:141
+msgid "MSmooth by Donald Graft"
+msgstr "MSmooth par Donald Graft"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:141
+msgid "Smooth the image, don't blur edges. Useful on anime."
+msgstr "Lisse l'image, ne floute par les contours. Utile sur les animes."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:142
+#: avidemux/ADM_videoFilter/ADM_vidSoften.cpp:74
+msgid "Soften"
+msgstr "Soften"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:142
+msgid "A variant of stabilize."
+msgstr "Une variante de \"stabilize\"."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:147
+msgid "Sharpen"
+msgstr "Sharpen"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:147
+msgid "Enhance difference between near pixels."
+msgstr "Am?liore la diff?rence entre les pixels proches"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:148
+#: avidemux/ADM_videoFilter/ADM_vidMSharpen.cpp:172
+msgid "MSharpen"
+msgstr "MSharpen"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:148
+msgid "Sharpen edges without amplifying noise. By Donald Graft."
+msgstr "Aiguise les contours sans amplifier le bruit par Donald Graft."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:149
+msgid "asharp"
+msgstr "asharp"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:149
+#, fuzzy
+msgid "Adaptative sharpener by MarcFD."
+msgstr "Adaptative sharpener par MarcFD."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:151
+msgid "Gauss smooth"
+msgstr "Gauss smooth"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:151
+msgid "Gaussian smooth. Blur the picture."
+msgstr "Lissage gaussien. Floute l'image."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:152
+msgid "Mean"
+msgstr "Mean"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:152
+msgid "Mean (blur) kernel."
+msgstr ""
+
+#: avidemux/ADM_filter/filter_declaration.cpp:153
+msgid "Median"
+msgstr "Median"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:153
+msgid "Median kernel 3x3. Remove high frequency noise."
+msgstr ""
+
+#: avidemux/ADM_filter/filter_declaration.cpp:154
+msgid "Median (5x5)"
+msgstr "Median (5x5)"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:154
+#, fuzzy
+msgid "Median kernel 5x5. Good for reducing chroma noise."
+msgstr "Median kernel 5x5. Bon pour la r?duction du bruit de la chrominance."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:155
+msgid "Forced postprocessing"
+msgstr "Forced postprocessing"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:155
+msgid "Apply blind postprocessing."
+msgstr "Applique un post-traitement aveugle."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:160
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:112
+msgid "Subtitler"
+msgstr "Subtitler"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:160
+msgid "Add srt/sub subtitles to the picture."
+msgstr "Ajoute des sous-titres SRT/SUB ? l'image."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:161
+#: avidemux/ADM_videoFilter/ADM_vidASS.cpp:95
+msgid "ASS"
+msgstr "ASS"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:161
+msgid "Add ASS/SSA subtitles to the picture."
+msgstr "Ajoute des sous-titres ASS/SSA ? l'image."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:164
+msgid "VobSub"
+msgstr "VobSub"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:164
+msgid "Embed VobSub subtitles into picture."
+msgstr "Ajoute des sous-titres VobSub ? l'image."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:166
+msgid "DVB sub"
+msgstr "DVB sub"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:166
+msgid "Embed DVB-T subtitle."
+msgstr "Ajoute des sous-titres DVB-T ? l'image."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:177
+msgid "Blend remover"
+msgstr "Blend remover"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:177
+#, fuzzy
+msgid "Remove blend between previous and next picture."
+msgstr "Supprime le lien entre l'image pr?c?dente et l'image suivante."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:178
+msgid "Hard pulldown removal"
+msgstr "Hard pulldown removal"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:178
+msgid "Remove IVTC that has been analog captured or resized."
+msgstr "Supprime l'Inverse Telecine qui a ?t? captur? ou redimensionn? en analogique."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:179
+msgid "Whirl"
+msgstr "Whirl"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:179
+msgid "Useless whirlwind effect."
+msgstr "Effecte tourbillon inutile."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:180
+#: avidemux/ADM_videoFilter/ADM_vidMosaic.cpp:98
+msgid "Mosaic"
+msgstr "Mosaic"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:180
+msgid "Split the picture into tiny thumbnails."
+msgstr "D?coupe l'image en vignette."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:181
+msgid "MPlayer delogo"
+msgstr "MPlayer delogo"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:181
+msgid "Blend a logo by interpolating its surrounding box."
+msgstr "Rend transparent un logo en interpolant une bo?te englobante."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:182
+#: avidemux/ADM_videoFilter/ADM_vidLogo.cpp:95
+msgid "Logo"
+msgstr "Logo"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:182
+msgid "Add a png as logo."
+msgstr "Ajoute un PNG comme logo."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:183
+msgid "Animated Menu"
+msgstr "Animated Menu"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:184
+#, fuzzy
+msgid "Create a video made of 6 mini windows, very useful to do DVD menus."
+msgstr "Cr?e une vid?o fa?te de 6 petites fen?tres, tr?s utile pour faire des menus DVD."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:186
+msgid "Compute Average"
+msgstr "Compute Average"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:186
+msgid "Compute average luma value for each pixel throughout all frames, and save to file"
+msgstr "Calcule la valeur moyenne de la luminance pour chaque pixel ? travers de toutes les imagee et enregistre dans un fichier."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:187
+msgid "Eraser"
+msgstr "Eraser"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:187
+msgid "\"Erase\" arbitrary areas of each frame"
+msgstr "Efface arbitrairement des zones de chaque image."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:188
+msgid "Swiss Army Knife"
+msgstr "Swiss Army Knife"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:188
+#, fuzzy
+msgid "Apply operation like P'=P*A, P-A, P+A, etc. using a convolution, rolling average, image from file, or constant"
+msgstr "Applique un op?ration de la forme P'=P*A, P-A, P+A, ... en utilisant une convolution, ..., une image depuis un fichier ou une constante."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:189
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:401
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:976
+msgid "Threshold"
+msgstr "Threshold"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:189
+#, fuzzy
+msgid "Force too-bright/too-dim pixels to 0 and the rest to 255 or vice-versa"
+msgstr "Force les pixels trop clairs ou trop fonc?s vers 0 et le reste vers 255 et vice-versa."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:190
+msgid "Particle List"
+msgstr "Particle List"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:190
+msgid "Identify 'particles' (groups of pixels)"
+msgstr ""
+
+#: avidemux/ADM_filter/filter_declaration.cpp:195
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_partial.cpp:123
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtersub.cpp:144
+msgid "Partial"
+msgstr "Partiel"
+
 #: avidemux/ADM_filter/filter_saveload.cpp:155
 msgid "Problem reading XML filters"
-msgstr "Probl?me ? la lecture des filtres XML"
+msgstr "Probl?me de lecture des filtres XML"
 
 #: avidemux/ADM_filter/filter_saveload.cpp:163
 msgid "No filter found"
-msgstr "Pas de filtre trouv?"
+msgstr "Aucun filtre trouv?"
 
 #: avidemux/ADM_filter/filter_saveload.cpp:199
 msgid "Could not find a filter"
@@ -386,15 +1039,15 @@
 
 #: avidemux/ADM_filter/filter_saveload.cpp:287
 msgid "Node not found"
-msgstr "Noeud non trouv?"
+msgstr "N?ud non trouv?"
 
 #: avidemux/ADM_inputs/ADM_h263/ADM_h263.cpp:258
 msgid "Size is not (s)QCIF"
 msgstr "La taille n'est pas (s)QCIF"
 
-#: avidemux/ADM_inputs/ADM_mp4/ADM_mp4Analyzer.cpp:583
+#: avidemux/ADM_inputs/ADM_mp4/ADM_mp4Analyzer.cpp:589
 msgid "Problem reading SVQ3 headers"
-msgstr "Probl?me ? la lecture des en-t?tes SVQ3"
+msgstr "Probl?me de lecture des en-t?tes SVQ3"
 
 #: avidemux/ADM_inputs/ADM_mp4/ADM_mp4Indexer.cpp:346
 msgid "No stts table"
@@ -414,14 +1067,15 @@
 
 #: avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_video.cpp:370
 msgid "Opening MPEG"
-msgstr "Ouverture du mpeg"
+msgstr "Ouverture du MPEG"
 
 #: avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_video.cpp:539
 msgid "MPEG renumbering error"
-msgstr "Echec de la re-num?rotation MPEG"
+msgstr "Echec de la renum?rotation MPEG"
 
 #: avidemux/ADM_inputs/ADM_nuv/ADM_nuv.cpp:542
 #: avidemux/ADM_inputs/ADM_nuv/ADM_nuv.cpp:571
+#, fuzzy
 msgid "Opening Nuppel video"
 msgstr "Ouverture du nuppel video"
 
@@ -435,7 +1089,7 @@
 
 #: avidemux/ADM_inputs/ADM_nuv/ADM_nuv.cpp:758
 msgid "Expect a crash."
-msgstr "Attendez vous ? un crash."
+msgstr "Attendez-vous ? un plantage."
 
 #: avidemux/ADM_inputs/ADM_nuv/ADM_nuv.cpp:1050
 msgid "Do you want to save an index ?"
@@ -453,19 +1107,19 @@
 #: avidemux/ADM_inputs/ADM_openDML/ADM_openDML.cpp:363
 #: avidemux/ADM_inputs/ADM_openDML/ADM_openDML.cpp:498
 msgid "Malformed header"
-msgstr "En-t?te ?rron?e"
+msgstr "En-t?te erron?e"
 
 #: avidemux/ADM_inputs/ADM_openDML/ADM_openDMLDepack.cpp:93
 msgid "Unpacking bitstream"
-msgstr ""
+msgstr "D?paqueter le bitstream"
 
 #: avidemux/ADM_inputs/ADM_openDML/ADM_opendml_reindex.cpp:68
 msgid "Indexing"
 msgstr "Indexation"
 
-#: avidemux/ADM_libraries/ADM_lavformat/ADM_lavformat.cpp:373
+#: avidemux/ADM_libraries/ADM_lavformat/ADM_lavformat.cpp:376
 msgid "Incompatible frame rate"
-msgstr "FPS incompatible"
+msgstr "Fr?quence d'image incompatible"
 
 #: avidemux/ADM_libraries/ADM_lvemux/ADM_muxer.cpp:85
 #: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:153
@@ -479,20 +1133,20 @@
 
 #: avidemux/ADM_libraries/ADM_lvemux/ADM_muxer.cpp:92
 msgid "lvemux init failed"
-msgstr "Echec init lvemux"
+msgstr "Echec d'initialisation du lvemux"
 
 #: avidemux/ADM_libraries/ADM_utilities/ADM_gettext.cpp:37
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:290
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:291
 msgid "_File"
 msgstr "_Fichier"
 
-#: avidemux/ADM_libraries/ADM_utilities/ADM_imageLoader.cpp:191
+#: avidemux/ADM_libraries/ADM_utilities/ADM_imageLoader.cpp:193
 msgid "Wrong Colorspace"
-msgstr "Colorspace incomatible"
+msgstr "Espace colorim?trique incompatible"
 
-#: avidemux/ADM_libraries/ADM_utilities/ADM_imageLoader.cpp:191
+#: avidemux/ADM_libraries/ADM_utilities/ADM_imageLoader.cpp:193
 msgid "Only YV12/I420 or YUY2/I422 JPegs are supported"
-msgstr "Seuls le YV12/I420 and YUY2/I422 sont accept?s"
+msgstr "Seuls les JPEGs YV12/I420 et YUY2/I422 sont support?s"
 
 #: avidemux/ADM_libraries/ADM_utilities/ADM_imageUtils.cpp:403
 msgid "Memory error"
@@ -503,9 +1157,9 @@
 msgstr "Erreur de conversion en BMP"
 
 #: avidemux/ADM_libraries/ADM_utilities/ADM_imageUtils.cpp:417
-#: avidemux/gtk_gui.cpp:1920
+#: avidemux/gtk_gui.cpp:1927
 msgid "Something bad happened"
-msgstr "Quelque de mauvais c'est pass?"
+msgstr "Quelque chose de mauvais c'est pass?"
 
 #: avidemux/ADM_libraries/ADM_utilities/ADM_imageUtils.cpp:472
 msgid "Cannot encode the frame"
@@ -523,42 +1177,45 @@
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:239
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:246
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:255
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp:328
-#: avidemux/gtk_gui.cpp:896 avidemux/gtk_gui.cpp:1498
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp:325
+#: avidemux/gtk_gui.cpp:903
+#: avidemux/gtk_gui.cpp:1505
 msgid "File error"
 msgstr "Erreur de fichier"
 
 #: avidemux/ADM_libraries/ADM_utilities/ADM_imageUtils.cpp:481
 #: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:366
-#: avidemux/ADM_outputs/oplug_ogm/op_ogsave.cpp:112 avidemux/gtk_gui.cpp:1498
+#: avidemux/ADM_outputs/oplug_ogm/op_ogsave.cpp:112
+#: avidemux/gtk_gui.cpp:1505
 #, c-format
 msgid "Cannot open \"%s\" for writing."
 msgstr "Impossible d'ouvrir ??%s?? en ?criture."
 
-#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:324
+#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:327
 msgid "NTSC 4:3"
 msgstr "NTSC 4:3"
 
-#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:325
-#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:326
+#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:328
+#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:329
 msgid "NTSC 16:9"
 msgstr "NTSC 16:9"
 
-#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:327
+#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:330
 msgid "PAL 4:3"
 msgstr "PAL 4:3"
 
-#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:328
+#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:331
 msgid "PAL 16:9"
 msgstr "PAL 16:9"
 
-#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:329
+#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:332
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:43
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:376
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:398
 msgid "1:1"
 msgstr "1:1"
 
-#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:331
+#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:334
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:598
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:795
 msgid "Unknown"
@@ -575,7 +1232,7 @@
 
 #: avidemux/ADM_ocr/ADM_ocrEngine.cpp:87
 msgid "Output file error"
-msgstr "Erreur fichier de sortie"
+msgstr "Erreur de fichier de sortie"
 
 #: avidemux/ADM_ocr/ADM_ocrEngine.cpp:87
 #, c-format
@@ -584,15 +1241,16 @@
 
 #: avidemux/ADM_ocr/ADM_ocrEngine.cpp:105
 msgid "Problem loading sub"
-msgstr "Probl?me de chargement sous-titres"
+msgstr "Probl?me de chargement des sous-titres"
 
 #: avidemux/ADM_ocr/ADM_vob2vobsub.cpp:254
+#, fuzzy
 msgid "Ifo error"
 msgstr "Erreur ifo"
 
 #: avidemux/ADM_ocr/ADM_vob2vobsub.cpp:254
 msgid "Error reading ifo file, aborting."
-msgstr "Erreur de lecture de fichier ifo, annulation."
+msgstr "Erreur de lecture du fichier IFO, annulation."
 
 #: avidemux/ADM_ocr/ADM_vob2vobsub.cpp:262
 msgid "Cannot write .idx"
@@ -608,7 +1266,7 @@
 
 #: avidemux/ADM_ocr/ADM_vob2vobsub.cpp:300
 msgid "Generating VobSub file"
-msgstr "G?n?ration du fichier vobub"
+msgstr "G?n?ration du fichier VobSub"
 
 #: avidemux/ADM_osSupport/ADM_crashdump.cpp:210
 #: avidemux/ADM_osSupport/ADM_crashdump.cpp:236
@@ -620,12 +1278,11 @@
 msgid ""
 "A fatal error has occurred.\n"
 "\n"
-"Click OK to generate debug information. This may take a few minutes to "
-"complete."
+"Click OK to generate debug information. This may take a few minutes to complete."
 msgstr ""
 "Une erreur fatale est survenue.\n"
 "\n"
-"Choisir OK pour generer un rapport. Cela peut prendre quelques minutes."
+"Choisir OK pour g?n?rer un rapport. Cela peut prendre quelques minutes."
 
 #: avidemux/ADM_osSupport/ADM_crashdump.cpp:437
 msgid "Load it"
@@ -633,7 +1290,7 @@
 
 #: avidemux/ADM_osSupport/ADM_crashdump.cpp:437
 msgid "Crash file"
-msgstr "Fichier de crash."
+msgstr "Fichier de plantage"
 
 #: avidemux/ADM_osSupport/ADM_crashdump.cpp:438
 msgid ""
@@ -641,40 +1298,40 @@
 "Do you want to load it  ?\n"
 "(It will be deleted in all cases, you should save it if you want to keep it)"
 msgstr ""
-"J'ai d?tect? un fichier de crash"
-"Voulez le charger ?\n"
-"(Il sera supprim? dans tous les cas, vous devriez le sauver si vous voulez "
-"le garder)"
+"J'ai d?tect? un fichier de crash.\n"
+"Voulez-vous le charger ?\n"
+"(Il sera supprim? dans tous les cas, vous devriez le sauvegarder si vous voulez le garder)"
 
-#: avidemux/ADM_osSupport/ADM_fileio.cpp:102
-#: avidemux/ADM_osSupport/ADM_fileio.cpp:126
-#: avidemux/ADM_osSupport/ADM_fileio.cpp:146
-#: avidemux/ADM_osSupport/ADM_fileio.cpp:153
-#: avidemux/ADM_osSupport/ADM_fileio.cpp:164 avidemux/GUI_jobs.cpp:37
+#: avidemux/ADM_osSupport/ADM_fileio.cpp:105
+#: avidemux/ADM_osSupport/ADM_fileio.cpp:129
+#: avidemux/ADM_osSupport/ADM_fileio.cpp:149
+#: avidemux/ADM_osSupport/ADM_fileio.cpp:156
+#: avidemux/ADM_osSupport/ADM_fileio.cpp:167
+#: avidemux/GUI_jobs.cpp:37
 msgid "Oops"
 msgstr "Oups"
 
-#: avidemux/ADM_osSupport/ADM_fileio.cpp:102
+#: avidemux/ADM_osSupport/ADM_fileio.cpp:105
 #, c-format
 msgid "can't create custom directory (%s)."
-msgstr "impossible de cr?er le r?pertoire ??%s??."
+msgstr "impossible de cr?er le dossier ??%s??."
 
-#: avidemux/ADM_osSupport/ADM_fileio.cpp:126
+#: avidemux/ADM_osSupport/ADM_fileio.cpp:129
 #, c-format
 msgid "can't create job directory (%s)."
-msgstr "impossible de cr?er le r?pertoire des t?ches ??%s??."
+msgstr "impossible de cr?er le dossier des t?ches ??%s??."
 
-#: avidemux/ADM_osSupport/ADM_fileio.cpp:146
+#: avidemux/ADM_osSupport/ADM_fileio.cpp:149
 msgid "can't determine $USERPROFILE."
-msgstr "ne peut d?terminer $USERPROFILE"
+msgstr "ne peut d?terminer $USERPROFILE."
 
-#: avidemux/ADM_osSupport/ADM_fileio.cpp:153
+#: avidemux/ADM_osSupport/ADM_fileio.cpp:156
 msgid "can't determine $HOME."
 msgstr "ne peut d?terminer $HOME"
 
-#: avidemux/ADM_osSupport/ADM_fileio.cpp:164
+#: avidemux/ADM_osSupport/ADM_fileio.cpp:167
 msgid "Cannot create the .avidemux directory"
-msgstr "Impossible de cr?er le r?pertoire ??.avidemux??."
+msgstr "Impossible de cr?er le dossier ??.avidemux??"
 
 #: avidemux/ADM_osSupport/ADM_misc.cpp:215
 #, c-format
@@ -694,37 +1351,37 @@
 #: avidemux/ADM_osSupport/ADM_misc.cpp:231
 #, c-format
 msgid "%lu seconds"
-msgstr "%lu seconds"
+msgstr "%lu secondes"
 
 #: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:74
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:243
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:242
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:845
 msgid "Normal"
 msgstr "Normal"
 
 #: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:75
 msgid "Mux every N video frames"
-msgstr "Multiplexer toute les N images vid?o"
+msgstr "Multiplexer toutes les N images vid?o"
 
 #: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:76
 msgid "Mux by packet size"
-msgstr "Multiplexer par taille de pacquet"
+msgstr "Multiplexer par taille de paquet"
 
 #: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:79
 msgid "Muxing _type:"
-msgstr "Type de multiplexage:"
+msgstr "_Type de multiplexage :"
 
 #: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:80
 msgid "_Split every MB:"
-msgstr "_Coupe tout les MB:"
+msgstr "_Couper tous les Mo :"
 
 #: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:82
 msgid "Mux _every x video frames:"
-msgstr "Multiplexer _toutes les x images"
+msgstr "Multiplexer _toutes les x images vid?o :"
 
 #: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:83
 msgid "Mux in _blocks of x bytes:"
-msgstr "Muxer en block de X octets"
+msgstr "Multiplexer en _bloc de x octets :"
 
 #: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:90
 msgid "AVI Muxer Options"
@@ -743,7 +1400,7 @@
 #: avidemux/ADM_outputs/oplug_avi/op_avisavecopy_pack.cpp:121
 #: avidemux/ADM_outputs/oplug_avi/op_avisavecopy_unpack.cpp:98
 msgid "Cannot initiate save"
-msgstr "Ne peut pas amorcer la sauvegarde"
+msgstr "Ne peut pas amorcer l'enregistrement"
 
 #: avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp:73
 msgid ""
@@ -756,23 +1413,23 @@
 #: avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp:93
 #: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:149
 #: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:203
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:174
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:176
 #: avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp:76
 msgid "Filter init failed"
 msgstr "Echec de l'initialisation du filtre"
 
 #: avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp:127
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:399
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:401
 #: avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp:100
 msgid ""
 "\n"
 " Reuse the existing log-file ?"
 msgstr ""
 "\n"
-" R?utiliser le fichier log??"
+" R?utiliser le fichier journal ?"
 
 #: avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp:152
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:435
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:437
 msgid "Aborting"
 msgstr "Annulation"
 
@@ -786,32 +1443,32 @@
 #: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:215
 #: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:233
 #: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:332
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:212
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:335
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:419
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:214
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:337
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:421
 #: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:352
 msgid "Error while encoding"
 msgstr "Erreur pendant l'encodage"
 
 #: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:190
 #: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:244
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:224
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:226
 msgid "KeyFrame error"
 msgstr "Erreur d'image-cl?"
 
 #: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:190
 #: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:244
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:224
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:226
 msgid ""
 "The beginning frame is not a key frame.\n"
 "Please move the A marker."
 msgstr ""
 "La premi?re image n'est pas une image-cl?.\n"
-"Bougez svp le marqueur A."
+"Veuillez d?placer le marqueur A."
 
 #: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:151
 msgid "Unsupported video"
-msgstr "Video non support?e"
+msgstr "Vid?o non support?e"
 
 #: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:151
 msgid "Only FLV1 and VP6 video are supported"
@@ -824,14 +1481,14 @@
 
 #: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:173
 msgid "Audio must be mp3 for flv output."
-msgstr "L'audio doit etre en MP3 pour le format FLV."
+msgstr "L'audio doit ?tre en MP3 pour le format FLV."
 
 #: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:178
 msgid "Frequency must be 44100, 22050 or 11025 Hz."
-msgstr "La frequence doit etre 44100, 22050 ou 11025 Hz"
+msgstr "La fr?quence doit ?tre 44100, 22050 ou 11025 Hz"
 
 #: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:254
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:251
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:253
 msgid "Cannot initialize the audio stream"
 msgstr "Ne peut pas initialiser le flux audio"
 
@@ -851,13 +1508,11 @@
 
 #: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:101
 msgid "The first frame is not intra frame"
-msgstr "La premi?re image n'est pas une image intra"
+msgstr "La premi?re image n'est pas une image-I"
 
 #: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:101
 msgid "Use the &lt;&lt; and the &gt;&gt; buttons to move using Intra frames."
-msgstr ""
-"Utiliser les boutons &lt;&lt; et &gt;&gt; pour ce d?placer dans les images-"
-"Intra."
+msgstr "Utiliser les boutons &lt;&lt; et &gt;&gt; pour ce d?placer dans les images-I."
 
 #: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:113
 #: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:163
@@ -867,29 +1522,27 @@
 #: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:153
 #: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:173
 msgid "For VCD, audio must be 44.1 kHz MP2."
-msgstr "Pour les VCD, l'audio doit ?tre 44.1 kHz MP2."
+msgstr "Pour les VCD, l'audio doit ?tre du MP2 ? 44.1 kHz."
 
 #: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:182
 msgid "For DVD, audio must be 48 kHz MP2(stereo), AC3, DTS or LPCM (stereo)."
-msgstr ""
-"Pour les DVD, l'audio doit ?tre 48 kHz MP2(st?reo), AC3, DTS ou LPCM "
-"(st?reo)."
+msgstr "Pour les DVD, l'audio doit ?tre MP2 (st?r?o), AC3, DTS ou LPCM (st?r?o) ? 48 kHz."
 
 #: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:193
 msgid "For DVD, audio must be 48 kHz MP2, AC3 or LPCM."
-msgstr "Pour les DVD, l'audio doit ?tre 48 kHz MP2, AC3 ou LPCM."
+msgstr "Pour les DVD, l'audio doit ?tre MP2, AC3 ou LPCM ? 48 kHz."
 
 #: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:305
 msgid "Reuse log file ?"
-msgstr "R?-utiliser le fichier de messages??"
+msgstr "R?utiliser le fichier journal??"
 
 #: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:320
 msgid "Error in pass 1"
-msgstr "Erreur en passe 1"
+msgstr "Erreur pendant la 1? passe"
 
 #: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:463
 msgid "Error in pass 2"
-msgstr "Erreur en passe 2"
+msgstr "Erreur pendant la 2? passe"
 
 #: avidemux/ADM_outputs/oplug_ogm/op_ogsave.cpp:126
 msgid "Could not initialize video"
@@ -901,19 +1554,25 @@
 
 #: avidemux/ADM_script/ADM_JSFunctions.cpp:238
 msgid "Select a directory"
-msgstr "S?lectionner un chemin"
+msgstr "S?lectionner un dossier"
 
 #: avidemux/ADM_script/ADM_JSFunctions.cpp:504
+#, fuzzy
 msgid "Uinteger"
+msgstr "Uinteger"
+
+#: avidemux/ADM_script/ADM_JSFunctions.cpp:507
+msgid "Test uinteger"
 msgstr ""
 
 #: avidemux/ADM_script/ADM_JSFunctions.cpp:519
+#, fuzzy
 msgid "Float"
-msgstr "Flot"
+msgstr "Float"
 
 #: avidemux/ADM_script/ADM_JSFunctions.cpp:537
 msgid "Toggle"
-msgstr "Toggle"
+msgstr ""
 
 #: avidemux/ADM_script/ADM_JSFunctions.cpp:558
 msgid "No Strategy"
@@ -921,7 +1580,7 @@
 
 #: avidemux/ADM_script/ADM_JSFunctions.cpp:559
 msgid "3:2 Pulldown"
-msgstr "3:2 Descendant"
+msgstr "3:2 Pulldown"
 
 #: avidemux/ADM_script/ADM_JSFunctions.cpp:560
 msgid "Pal/Secam"
@@ -938,51 +1597,65 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_animated.cpp:36
 msgid "_Background Image:"
-msgstr "Image de fond:"
+msgstr "Image de _fond :"
 
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_animated.cpp:36
+msgid "Select background image"
+msgstr "S?lectionner un image de fond"
+
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_animated.cpp:37
 msgid "_NTSC(default is Pal):"
-msgstr ""
+msgstr "_NTSC (PAL par d?faut) :"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_animated.cpp:38
 msgid "Vignette _Width:"
-msgstr "Largeur des imagettes "
+msgstr "_Largeur des vignettes :"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_animated.cpp:39
 msgid "Vignette _Height:"
-msgstr "Hauteur des imagettes :"
+msgstr "_Hauteur des vignettes :"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_animated.cpp:42
 msgid "Vignette frame number"
-msgstr "Num?ro d'image pour l'imagette"
+msgstr "Num?ro d'image pour la vignette"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_animated.cpp:46
 msgid "Timecode:"
-msgstr "Temps :"
+msgstr "Time-code :"
 
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_animated.cpp:53
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:70
+msgid "MPEG-2 Configuration"
+msgstr "Configuration du MPEG-2"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioconfig.cpp:56
+msgid "Audio Configuration"
+msgstr "Configuration de l'audio"
+
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:62
 msgid "_Dynamic range compression"
-msgstr "Courbe de compression dynamique"
+msgstr "Courbe de compression _dynamique"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:64
 msgid "_Time shift (ms):"
-msgstr "D?calage temporel (ms) :"
+msgstr "D?calage _temporel (ms) :"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:64
 msgid "Time shift value (ms)"
-msgstr "Valeur du d?calage (ms)"
+msgstr "Valeur du d?calage temporel (ms)"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:72
 msgid "R_esampling (Hz):"
-msgstr "R??echantillonage(Hz) :"
+msgstr "R??chantillonnag_e (Hz) :"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:72
 msgid "Resampling frequency (Hz)"
-msgstr "Frequence (Hz)"
+msgstr "Fr?quence de r??chantillonnage (Hz)"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:80
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:89
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:51
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:327
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:373
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:381
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:389
@@ -990,11 +1663,12 @@
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:568
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:583
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:219
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1124
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1188
 #: avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp:105
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:101
-#: avidemux/ADM_videoFilter/ADM_vidRotate.cpp:264 avidemux/gtk_gui.cpp:1998
-#: avidemux/gtk_gui.cpp:2097
+#: avidemux/ADM_videoFilter/ADM_vidRotate.cpp:264
+#: avidemux/gtk_gui.cpp:2005
+#: avidemux/gtk_gui.cpp:2104
 msgid "None"
 msgstr "Aucun"
 
@@ -1008,11 +1682,11 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:85
 msgid "_Frame rate change:"
-msgstr "_Changer fr?quence d'image:"
+msgstr "Changer la fr?quence d'_image :"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:90
 msgid "Automatic (max -3 dB)"
-msgstr "Automatique (max -3dB)"
+msgstr "Automatique (-3dB max)"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:91
 msgid "Manual"
@@ -1020,11 +1694,11 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:93
 msgid "_Gain mode:"
-msgstr "_Mode Gain:"
+msgstr "Mode _gain :"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:95
 msgid "G_ain value:"
-msgstr "Valeur Gain:"
+msgstr "Valeur du g_ain :"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:97
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:200
@@ -1061,15 +1735,15 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:111
 msgid "Dolby Pro Logic"
-msgstr "Dolby Pro logic"
+msgstr "Dolby Pro Logic"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:112
 msgid "Dolby Pro Logic II"
-msgstr "Dolby Pro logic 2"
+msgstr "Dolby Pro Logic II"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:115
 msgid "_Mixer:"
-msgstr "_Mixeur:"
+msgstr "_Mixeur :"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:119
 msgid "Audio Filters"
@@ -1080,13 +1754,37 @@
 msgid "No data"
 msgstr "Pas de donn?es"
 
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp:214
+msgid "Max. bitrate:"
+msgstr "D?bit max. :"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp:215
+msgid "Average bitrate:"
+msgstr "D?bit moyen :"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp:216
+msgid "Number of I frames:"
+msgstr "Nombre d'images-I :"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp:217
+msgid "Number of P frames:"
+msgstr "Nombre d'images-P :"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp:218
+msgid "Number of B frames:"
+msgstr "Nombre d'images-B :"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp:219
+msgid "Max. B frames:"
+msgstr "Images-B max. :"
+
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp:232
 msgid "Bitrate Histogram"
-msgstr "Histogramme de bitrate"
+msgstr "Histogramme du d?bit"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:128
 msgid "Video Codecs"
-msgstr ""
+msgstr "Codecs vid?o"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:129
 msgid "Xvid"
@@ -1098,7 +1796,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:135
 msgid "Audio Codecs"
-msgstr ""
+msgstr "Codecs audio"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:136
 msgid "Aften"
@@ -1134,13 +1832,15 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:144
 msgid "Vorbis"
-msgstr ""
+msgstr "Vorbis"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:156
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:307
 msgid "aRts"
 msgstr "aRts"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:157
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:313
 msgid "ESD"
 msgstr "ESD"
 
@@ -1153,24 +1853,27 @@
 msgstr "Freetype 2"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:160
-msgid "gettext"
-msgstr "gettext"
+msgid "Gettext"
+msgstr ""
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:161
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:304
 msgid "ALSA"
-msgstr ""
+msgstr "ALSA"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:162
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:319
 msgid "OSS"
 msgstr "OSS"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:163
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:322
 msgid "SDL"
 msgstr "SDL"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:164
 msgid "XVideo"
-msgstr "XVid?o"
+msgstr "XVideo"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:166
 msgid "AltiVec"
@@ -1178,7 +1881,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:167
 msgid "PowerPC"
-msgstr "Puissance PC"
+msgstr "PowerPC"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:168
 msgid "x86"
@@ -1194,139 +1897,157 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:177
 msgid "Libraries"
-msgstr ""
+msgstr "Biblioth?que"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:178
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:406
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:404
 msgid "CPU"
-msgstr ""
+msgstr "Processeur"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:182
 msgid "Built-in Support"
-msgstr "Support-int?gr? pour"
+msgstr "Support int?gr?"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:52
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:48
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:44
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:42
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:380
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:402
 msgid "4:3"
 msgstr "4:3"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:53
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:49
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:45
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:43
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:384
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:406
 msgid "16:9"
 msgstr "16:9"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:55
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:51
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:45
 msgid "Default"
 msgstr "D?faut"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:56
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:52
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:46
 msgid "TMPGEnc"
 msgstr "TMPGEnc"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:57
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:53
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:47
 msgid "Anime"
 msgstr "Anime"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:58
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:54
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:48
 msgid "KVCD"
 msgstr "KVCD"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:61
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:57
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:51
 msgid "Progressive"
 msgstr "Progressif"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:62
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:58
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:52
 msgid "Interlaced TFF"
-msgstr " TFF Entrelac?"
+msgstr "TFF Entrelac?"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:63
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:59
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:53
 msgid "Interlaced BFF"
 msgstr "BFF Entrelac?"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:74
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:70
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:60
 msgid "Ma_x. bitrate:"
-msgstr "Bitrate max:"
+msgstr "D?bit ma_x :"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:75
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:71
 msgid "Mi_n. bitrate:"
-msgstr "Bitrate max:"
+msgstr "D?bit mi_n :"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:76
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:72
 msgid "_Use Xvid rate control"
-msgstr "_Utilise le contr?le du bitrate du XviD"
+msgstr "_Utilise le contr?le du d?bit du XviD"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:78
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:74
 msgid "_Buffer size:"
-msgstr "Taille buffer:"
+msgstr "Taille du _tampon :"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:80
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:76
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:57
 msgid "Aspect _ratio:"
-msgstr "Ratio:"
+msgstr "_Rapport H/L :"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:81
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:77
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:58
 msgid "_Matrices:"
-msgstr "Matrices:"
+msgstr "_Matrices :"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:82
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:78
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flv1.cpp:45
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:59
 msgid "_GOP size:"
-msgstr "_Taille GOP:"
+msgstr "_Taille du GOP :"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:88
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:84
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:66
 msgid "_Interlacing:"
-msgstr "Entrelacement:"
+msgstr "_Entrelacement :"
 
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:88
+msgid "libavcodec MPEG-2 Configuration"
+msgstr "Configuration MPEG-4 de libavcodec"
+
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flv1.cpp:44
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:109
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:268
 msgid "_Bitrate (kb/s):"
-msgstr ""
+msgstr "_D?bit (kb/s) :"
 
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flv1.cpp:49
+msgid "FLV1 Configuration"
+msgstr "Configuration FLV1"
+
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_gototime.cpp:27
 msgid "_Hours:"
-msgstr "Heures:"
+msgstr "_Heures :"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_gototime.cpp:28
 msgid "_Minutes:"
-msgstr "Minutes:"
+msgstr "_Minutes :"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_gototime.cpp:29
 msgid "_Seconds:"
-msgstr "Secondes:"
+msgstr "_Secondes :"
 
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_gototime.cpp:32
+msgid "Go to Time"
+msgstr "Aller au temps"
+
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:52
 msgid "Full"
 msgstr "Complet"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:53
+#, fuzzy
 msgid "Log"
-msgstr " Log"
+msgstr "Log"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:54
+#, fuzzy
 msgid "Phods"
 msgstr "Phods"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:55
+#, fuzzy
 msgid "EPZS"
 msgstr "EPZS"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:56
+#, fuzzy
 msgid "X1"
 msgstr "X1"
 
@@ -1340,16 +2061,18 @@
 msgstr "MPEG"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:65
+#, fuzzy
 msgid "MB comparison"
-msgstr "comparaison MB"
+msgstr "Comparaison Mo"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:66
 msgid "Fewest bits (vhq)"
-msgstr " moins de bits (vhq)"
+msgstr "Moins de bits (VHQ)"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:67
+#, fuzzy
 msgid "Rate distortion"
-msgstr "distortion de vitesse"
+msgstr "Distorsion de vitesse"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:73
 msgid "Matrices"
@@ -1357,28 +2080,30 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:74
 msgid "Mi_n. quantizer:"
-msgstr "Quantificateur?min.:"
+msgstr "Quantificateur?mi_n. :"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:75
 msgid "Ma_x. quantizer:"
-msgstr "Quantificateur?max.:"
+msgstr "Quantificateur?ma_x. :"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:76
+#, fuzzy
 msgid "Max. quantizer _difference:"
-msgstr "Diff?rence quantiseur max:"
+msgstr "_Diff?rence quantificateur max :"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:78
+#, fuzzy
 msgid "4_MV"
 msgstr "4_MV"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:79
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1235
 msgid "_Trellis quantization"
-msgstr "_Quantification de treillis"
+msgstr "Quantification de _treillis"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:81
 msgid "_Quarter pixel"
-msgstr "_Quarter Pixel"
+msgstr "_Quart de pixel"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:82
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1018
@@ -1387,41 +2112,43 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:85
 msgid "_Number of B frames:"
-msgstr "_Nombre d'images-B:"
+msgstr "_Nombre d'images-B :"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:86
 msgid "_Quantization type:"
-msgstr "Type Quantisation:"
+msgstr "Type de _quantification :"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:88
+#, fuzzy
 msgid "_Macroblock decision:"
-msgstr "D?cision macrobloc:"
+msgstr "D?cision _macrobloc :"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:90
 msgid "_Filesize tolerance (kb):"
-msgstr "_Tol?rance taille fichier (kb):"
+msgstr "Tol?rance de la taille du _fichier (kb) :"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:92
+#, fuzzy
 msgid "_Quantizer compression:"
-msgstr "Courbe de compression:"
+msgstr "_Courbe de compression :"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:93
 msgid "Quantizer _blur:"
-msgstr "Quantificateur _blur:"
+msgstr "Quantificateur de _flou :"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:98
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:374
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:372
 msgid "User Interface"
 msgstr "Interface utilisateur"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:101
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1028
 msgid "Advanced Simple Profile"
-msgstr "Profil simple avanc?"
+msgstr "Profil simple avanc? (ASP)"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:108
 msgid "Motion Estimation"
-msgstr "Estimation mouvement"
+msgstr "Estimation du mouvement"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:112
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:309
@@ -1430,442 +2157,531 @@
 msgstr "Quantification"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:117
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1403
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1480
 msgid "Rate Control"
-msgstr "Contr?le du bitrate ou d?bit vid?o"
+msgstr "Contr?le du taux"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:120
 msgid "libavcodec MPEG-4 configuration"
-msgstr "Configuration libavcodec MPEG-4"
+msgstr "Configuration MPEG-4 de libavcodec"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavDecoder.cpp:45
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavDecoder.cpp:26
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp:41
 msgid "_Swap U and V"
-msgstr "Inverser U et V"
+msgstr "_Inverser U et V"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavDecoder.cpp:46
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavDecoder.cpp:27
 msgid "Show motion _vectors"
-msgstr "Montrer les vecteurs de mouvements"
+msgstr "Montrer les _vecteurs de mouvement"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavDecoder.cpp:48
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavDecoder.cpp:29
 msgid "Decoder Options"
-msgstr "Options de d?codage"
+msgstr "Option du d?codeur"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_mjpeg.cpp:41
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_mjpeg.cpp:37
 msgid "_Swap U&V:"
-msgstr "Echanger UV:"
+msgstr "_Inverser U & V :"
 
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_mjpeg.cpp:39
+msgid "Mjpeg Configuration"
+msgstr "Configuration Mjpeg"
+
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:92
 msgid "Select idx file:"
-msgstr "Choisir le fichier idx"
+msgstr "Choisir le fichier idx :"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:93
+msgid "Use GlyphSet (optional):"
+msgstr "Utiliser un dictionnaire de symbole (optionnel) :"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:93
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:210
-msgid "Use glyphset (optional):"
-msgstr "Utiliser un dictionnaire de symbole (optionnel):"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:367
+msgid "Select GlyphSet file"
+msgstr "S?lectionner le fichier de symboles"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:94
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:211
 msgid "Output SRT file"
-msgstr "Fichier de sortie (SRT)"
+msgstr "Fichier de sortie SRT"
 
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:94
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:211
+msgid "Save SRT file"
+msgstr "Enregistrer le fichier SRT"
+
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:105
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:222
 msgid "Select input and ouput files"
-msgstr "Choisir les fichiers"
+msgstr "Choisir les fichiers d'entr?e et sortie"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:115
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:127
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:246
 msgid "The idx/sub file does not exist."
-msgstr "Le couple idx/sub n'existe pas"
+msgstr "Le couple idx/sub n'existe pas."
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:120
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:239
 msgid "Please Select a valid output SRT file."
-msgstr "Choisissez un fichier SRT de sortie valide."
+msgstr "Veuillez choisir un fichier SRT de sortie valide."
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:136
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:255
 msgid "Cannot load the glyphset file."
-msgstr "Echec du chargement du dictionnaire"
+msgstr "Echec de chargement du fichier de dictionnaire de symbole."
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:156
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:276
-msgid "Glyphset filename"
-msgstr "Nom du fichier dictionnaire"
+msgid "GlyphSet filename"
+msgstr "Nom du fichier du dictionnaire de symbole"
 
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:156
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:276
+msgid "Save GlyphSet file"
+msgstr "Enregistrer le fichier de dictionnaire de symboles"
+
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:158
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:278
 msgid "Save Glyph"
-msgstr "Sauver le dictionnaire"
+msgstr "Enregistrer les symboles"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:208
 msgid "Input TS:"
-msgstr "Fichier TS d'entr?e"
+msgstr "Fichier TS d'entr?e :"
 
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:208
+msgid "Select TS file"
+msgstr "S?lectionner le fichier TS"
+
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:209
 msgid "Subtitle PID:"
-msgstr "PID de la piste de sous titre"
+msgstr "PID de la piste de sous titre :"
 
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:210
+msgid "Use glyphset (optional):"
+msgstr "Utiliser un dictionnaire de symbole (optionnel) :"
+
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:233
 msgid "Please Select a valid TS file."
-msgstr "S?lectionnez un fichier TS valide"
+msgstr "Veuillez choisir un fichier TS valide."
 
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:278
+msgid "Save GlyphSet"
+msgstr "Enregistrer le dictionnaire de symboles"
+
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp:40
 #: avidemux/ADM_videoFilter/ADM_vidForcedPP.cpp:60
 msgid "_Filter strength:"
-msgstr "Force de filtre:"
+msgstr "Force du _filtre :"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp:51
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:346
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:344
 #: avidemux/ADM_videoFilter/ADM_vidForcedPP.cpp:72
 msgid "_Horizontal deblocking"
-msgstr "_D?groupage horizontal"
+msgstr "D?blocage _horizontal"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp:52
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:347
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:345
 #: avidemux/ADM_videoFilter/ADM_vidForcedPP.cpp:73
 msgid "_Vertical deblocking"
-msgstr "_D?groupage vertical"
+msgstr "D?blocage _vertical"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp:53
 #: avidemux/ADM_videoFilter/ADM_vidForcedPP.cpp:74
 msgid "_Deringing"
-msgstr "_Eliminer oscillations parasites"
+msgstr "_Eliminer les oscillations parasites"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:188
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:187
+#, fuzzy
 msgid "_Use systray while encoding"
 msgstr "_Activer le systray pendant l'encodage"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:189
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:188
 msgid "_Accept non-standard audio frequency for DVD"
-msgstr "Accepter des fr?quences audio non-standard pour l'encodage DVD"
+msgstr "_Accepter des fr?quences audio non standard pour l'encodage DVD"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:190
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:189
 msgid "_Use libavcodec MPEG-2 decoder"
-msgstr "_Utiliser le d?codeur MPEG libavcodec"
+msgstr "_Utiliser le d?codeur MPEG-2 de libavcodec"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:191
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:190
 msgid "Create _OpenDML files"
-msgstr "Cr?er fichier _OpenDML"
+msgstr "Cr?er des fichiers _OpenDML"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:192
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:191
 msgid "Automatically _index MPEG files"
-msgstr "Indexer automatiquement les fichiers MPEG"
+msgstr "_Indexer automatiquement les fichiers MPEG"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:193
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:192
 msgid "Automatically _swap A and B if A>B"
 msgstr "_Inverser automatiquement les marques A et B si A > B"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:194
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:193
+#, fuzzy
 msgid "_Disable NUV audio sync"
-msgstr "_D?sactiver la resynchro NuppelVideo"
+msgstr "_D?sactiver la synchronisation audio pour NuppelVideo"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:196
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:195
 msgid "Automatically _build VBR map"
-msgstr "Construire automatiquement le map VBR"
+msgstr "_Construire automatiquement l'index VBR"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:197
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:196
 msgid "Automatically _rebuild index"
-msgstr "Reconstuire automatiquement l'index"
+msgstr "_Reconstruire automatiquement l'index"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:198
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:197
 msgid "Automatically remove _packed bitstream"
-msgstr "Enlever automatiquement le Packed Bitstream"
+msgstr "Enlever automatiquement le Bitstream em_paquet?"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:200
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:199
 msgid "SIMD"
-msgstr ""
+msgstr "SIMD"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:202
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:201
 msgid "Enable all SIMD"
-msgstr ""
+msgstr "Activer tous les SIMD"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:203
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:202
 msgid "Enable MMX"
-msgstr ""
+msgstr "Activer le MMX"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:204
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:203
 msgid "Enable MMXEXT"
-msgstr ""
+msgstr "Activer le MMXEXT"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:205
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:204
 msgid "Enable 3DNOW"
-msgstr ""
+msgstr "Activer le 3DNOW"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:206
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:205
 msgid "Enable 3DNOWEXT"
-msgstr ""
+msgstr "Activer le 3DNOWEXT"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:207
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:206
 msgid "Enable SSE"
-msgstr ""
+msgstr "Activer le SSE"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:208
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:207
 msgid "Enable SSE2"
-msgstr ""
+msgstr "Activer le SSE2"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:209
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:208
 msgid "Enable SSE3"
-msgstr ""
+msgstr "Activer le SSE3"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:210
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:209
 msgid "Enable SSSE3"
-msgstr ""
+msgstr "Activer le SSSE3"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:231
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:230
 msgid "_lavc threads:"
-msgstr ""
+msgstr "processus _lavc :"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:232
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:231
 msgid "_x264 threads:"
-msgstr ""
+msgstr "processus _x264 :"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:233
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:232
 msgid "X_vid threads:"
-msgstr ""
+msgstr "processus X_viD :"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:235
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:234
 msgid "Multi-threading"
-msgstr ""
+msgstr "Multit?che"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:241
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:240
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:843
 msgid "High"
-msgstr "Haut"
+msgstr "Haute"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:242
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:241
 msgid "Above normal"
-msgstr "Au dessus de normal"
+msgstr "Sup?rieure ? la normale"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:244
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:243
 msgid "Below normal"
-msgstr "En dessous de normal"
+msgstr "Inf?rieur ? la normale"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:245
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:244
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:847
 msgid "Low"
-msgstr "Bas"
+msgstr "Basse"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:247
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:246
 msgid "_Encoding priority:"
-msgstr "Priorit? d'encodage:"
+msgstr "Priorit? d'_encodage :"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:248
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:247
 msgid "_Indexing/unpacking priority:"
-msgstr "_Priorit? indexage/d?paquetage:"
+msgstr "Priorit? d'_indexation/d?paquetage :"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:249
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:248
 msgid "_Playback priority:"
-msgstr "_Priorit? playback:"
+msgstr "Priorit? de _lecture :"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:251
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:250
 msgid "Prioritisation"
-msgstr ""
+msgstr "Gestion des priorit?s"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:256
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:255
 msgid "_Split MPEG files every (MB):"
-msgstr "Auto coupe chaque fichier MPEG tous (MB):"
+msgstr "_Couper chaque fichier MPEG (Mo) :"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:258
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:257
 msgid "_Use alternative tag for MP3 in .mp4"
-msgstr "_Utiliserdes tags alternatifs pour le MP3 dans le .mp4"
+msgstr "_Utiliser des attributs alternatifs pour le MP3 dans le .mp4"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:261
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:260
 msgid "GTK+ (slow)"
 msgstr "GTK+ (lent)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:263
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:262
 msgid "XVideo (best)"
-msgstr "XVid?o (meilleur)"
+msgstr "XVideo (meilleur)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:267
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:266
 msgid "SDL (GDI)"
-msgstr ""
+msgstr "SDL (GDI)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:268
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:267
 msgid "SDL (DirectX)"
-msgstr ""
+msgstr "SDL (DirectX)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:270
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:269
 msgid "SDL (good)"
 msgstr "SDL (bon)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:274
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:273
 msgid "Video _display:"
-msgstr "Affichage Vid?o:"
+msgstr "_Affichage vid?o :"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:279
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:278
 msgid "No alerts"
 msgstr "Pas d'alerte"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:280
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:279
 msgid "Display only error alerts"
-msgstr "Afficher seulement s'il y des alertes d'erreurs"
+msgstr "Afficher seulement s'il y a des alertes d'erreur"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:281
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:280
 msgid "Display all alerts"
-msgstr "Toutes les alertes"
+msgstr "Afficher toutes les alertes"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:283
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:282
 msgid "_Message level:"
-msgstr "_Niveau Messages:"
+msgstr "Niveau de _messages :"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:288
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:287
 msgid "PCM"
 msgstr "PCM"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:289
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:288
+#, fuzzy
 msgid "Master"
 msgstr "Ma?tre"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:290
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:289
 msgid "_Volume control:"
-msgstr "_Contr?le du volume?:"
+msgstr "Contr?le du _volume? :"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:295
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:294
 msgid "No downmixing"
-msgstr "Pas de downmixing"
+msgstr "Pas de baise du nombre de canaux"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:297
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:296
 msgid "Pro Logic"
-msgstr "Pro logic"
+msgstr "Pro Logic"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:298
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:297
 msgid "Pro Logic II"
-msgstr "Pro logic 2"
+msgstr "Pro Logic II"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:300
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:299
 msgid "_Local playback downmixing:"
-msgstr "_Local playback downmixing:"
+msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:332
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:310
+msgid "Core Audio"
+msgstr ""
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:316
+#, fuzzy
+msgid "JACK"
+msgstr "JACK"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:325
+#, fuzzy
+msgid "Win32"
+msgstr "Win32"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:330
 msgid "_Audio output:"
-msgstr "_Sortie Audio:"
+msgstr "Sortie _audio :"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:335
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:333
 msgid "ALSA _device:"
-msgstr ""
+msgstr "_P?riph?rique ALSA :"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:348
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:346
 msgid "De_ringing"
-msgstr "D?cercler"
+msgstr "Eliminer les oscillations pa_rasites"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:349
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:347
 #: avidemux/ADM_videoFilter/ADM_vidMSharpen.cpp:167
+#: avidemux/ADM_videoFilter/ADM_vidMsmooth.cpp:197
 msgid "_Strength:"
-msgstr "_Force:"
+msgstr "_Force :"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:350
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:348
 msgid "Default Postprocessing"
 msgstr "Post-traitement par d?faut"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:364
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:362
 msgid "_Filter directory:"
-msgstr "Chemin filtre:"
+msgstr "_Dossier des filtres :"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:365
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:362
+msgid "Select filter directory"
+msgstr ""
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:363
 msgid "_Load external filters"
-msgstr "Charger des filtres ext?rieurs"
+msgstr "_Charger des filtres externes"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:368
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:366
 msgid "Use _Global GlyphSet"
-msgstr "Utiliser un dictionnaire de symbol global"
+msgstr "Utiliser un dictionnaire de symbole _global"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:369
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:367
 msgid "Gl_yphSet:"
-msgstr "Dictionnaire"
+msgstr "_Dictionnaire de symbole :"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:378
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:376
 msgid "Automation"
-msgstr ""
+msgstr "Automatisation"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:382
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp:430
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:380
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp:543
 msgid "Input"
 msgstr "Entr?e"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:386
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp:431
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:384
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp:544
 msgid "Output"
 msgstr "Sortie"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:391
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:394
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:397
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:389
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:392
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:395
 msgid "Audio"
-msgstr ""
+msgstr "Audio"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:402
-#: avidemux/gtk_gui.cpp:1997
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:400
+#: avidemux/gtk_gui.cpp:2004
 msgid "Video"
 msgstr "Vid?o"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:410
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:408
 msgid "Threading"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:414
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:412
 msgid "Global GlyphSet"
-msgstr "Dictionnaire global"
+msgstr "Dictionnaire de symbole global"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:418
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:416
 msgid "External Filters"
 msgstr "Filtres externes"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:422
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:420
 msgid "Preferences"
 msgstr "Pr?f?rences"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_requant.cpp:48
 msgid "_Shrink Factor:"
-msgstr "_Facteur shrink?:"
+msgstr "Facteur de _r?duction :"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:59
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_requant.cpp:51
+msgid "Requant Configuration"
+msgstr ""
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:33
+msgid "VCD"
+msgstr "VCD"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:34
+msgid "SVCD"
+msgstr "SVCD"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:35
+msgid "DVD"
+msgstr "DVD"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:36
+msgid "DVD half D1"
+msgstr ""
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:37
+msgid "PSP 480*272"
+msgstr "PSP 480*272"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:38
+msgid "PSP full res (720*480"
+msgstr "PSP haute r?s (720*480)"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:54
 msgid "_Target type:"
-msgstr "Type de cible"
+msgstr "Type de _cible :"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:60
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:55
 msgid "_Source aspect ratio:"
-msgstr "Rapport H/L source:"
+msgstr "Rapport H/L _source :"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:61
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:56
 msgid "_Destination aspect ratio:"
-msgstr "Rapport H/L destination:"
+msgstr "Rapport H/L _destination :"
 
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:61
+msgid "Auto Wizard"
+msgstr "Configuration automatique"
+
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:88
 msgid "_Subtitle file:"
-msgstr "Fichier de sous titres:"
+msgstr "Fichier de _sous-titres :"
 
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:88
+#: avidemux/ADM_videoFilter/ADM_vidASS.cpp:87
+msgid "Select Subtitle file"
+msgstr "S?lectionner le fichier de sous-titres"
+
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:89
 msgid "_Font (TTF):"
-msgstr "Fontes (TTF):"
+msgstr "_Police (TTF) :"
 
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:89
+msgid "Select TTF file"
+msgstr "S?lectionner le fichier TTF"
+
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:104
 msgid "_Encoding:"
-msgstr "Encodage:"
+msgstr "_Encodage :"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:106
 msgid "S_elect C_olor"
-msgstr "Choisir la couleur"
+msgstr "Choisir la c_oul_eur"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:107
 msgid "Set Size and _Position"
-msgstr "Choisir la taille et la position"
+msgstr "Choisir la taille et la _position"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:108
 msgid "_Auto split"
-msgstr "D?coupe automatique"
+msgstr "D?coupe _automatique"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:109
 msgid "_Delay (ms):"
-msgstr "Retard (ms)"
+msgstr "_Retard (ms) :"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:112
-msgid "Subtitler"
-msgstr ""
-
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:45
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:51
 msgid "Auto (might not work)"
@@ -1874,32 +2690,33 @@
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:46
 #: avidemux/ADM_videoFilter/ADM_vidYadif.cpp:178
 msgid "Top field first"
-msgstr ""
+msgstr "Trame paire en premier"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:47
 #: avidemux/ADM_videoFilter/ADM_vidYadif.cpp:177
 msgid "Bottom field first"
-msgstr ""
+msgstr "Trame impaire en premier"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:52
 msgid "Bottom field (keep top)"
-msgstr ""
+msgstr "Trame impaire (garde la paire)"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:53
 msgid "Top field (keep bottom)"
-msgstr ""
+msgstr "Trame paire (garde la impaire)"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:58
 msgid "Cubic interpolation"
-msgstr ""
+msgstr "Interpolation cubique"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:59
 msgid "Modified ELA"
 msgstr "ELA modifi?e"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:60
+#, fuzzy
 msgid "Kernel interpolation"
-msgstr ""
+msgstr "Interpolation de noyau"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:61
 msgid "Modified ELA-2"
@@ -1907,27 +2724,27 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:66
 msgid "4 fields check"
-msgstr ""
+msgstr "V?rification de 4 trames"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:67
 msgid "5 fields check"
-msgstr ""
+msgstr "V?rification de 5 trames"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:68
 msgid "4 fields check (no avg)"
-msgstr ""
+msgstr "V?rification de 4 trames (pas de moyenne)"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:69
 msgid "5 fields check (no avg)"
-msgstr ""
+msgstr "V?rification de 5 trames (pas de moyenne)"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:75
 msgid "No link"
-msgstr ""
+msgstr "Aucun lien"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:76
 msgid "Full link"
-msgstr ""
+msgstr "Lien complet"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:77
 msgid "Y to UV"
@@ -1952,13 +2769,13 @@
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:93
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:419
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:433
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1431
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1213
 msgid "0"
 msgstr "0"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:83
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:793
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:805
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:841
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:852
 msgid "1"
 msgstr "1"
 
@@ -1971,31 +2788,33 @@
 #: avidemux/ADM_videoFilter/ADM_vidDGbob.cpp:90
 #: avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp:92
 msgid "_Field order:"
-msgstr "Ordre trame:"
+msgstr "Ordre des _trames :"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:92
 msgid "_Interpolate:"
-msgstr "Interpoler:"
+msgstr "_Interpoler :"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:94
 msgid "_Type:"
-msgstr "Type:"
+msgstr "_Type :"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:95
+#, fuzzy
 msgid "_MntMode:"
-msgstr "MntMode:"
+msgstr "_MntMode :"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:96
 msgid "_Link:"
-msgstr "Lien:"
+msgstr "_Lien :"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:97
+#, fuzzy
 msgid "_AP type:"
-msgstr "Type AP:"
+msgstr "Type _AP :"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:100
 msgid "Use ch_roma to evalute"
-msgstr ""
+msgstr "Utilise la ch_rominance pour ?valuer"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:101
 msgid "Try _weave"
@@ -2003,24 +2822,24 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:102
 msgid "_Denoise"
-msgstr ""
+msgstr "_D?bruitage"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:103
 #: avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp:94
 msgid "_Sharp"
-msgstr "_Sharp"
+msgstr "_Nettet?"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:104
 msgid "_Evalute all frames"
-msgstr ""
+msgstr "_Evaluer toutes les images"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:107
 msgid "Motion threshold, l_uma:"
-msgstr ""
+msgstr "Seuil de mouvement, l_uminance :"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:108
 msgid "Motion threshold, c_hroma:"
-msgstr ""
+msgstr "Seuil de mouvement, c_hrominance :"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:109
 msgid "Area com_bing threshold:"
@@ -2032,53 +2851,61 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:111
 msgid "Artefact _protection threshold:"
-msgstr ""
+msgstr "Seuil de _protection des artefacts :"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:112
 msgid "Debug:"
-msgstr ""
+msgstr "D?bogage :"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:121
-msgid "TDeint"
-msgstr ""
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:41
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:34
 msgid "_VOB file(s):"
-msgstr ""
+msgstr "Fichier(s) _VOB :"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:42
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:34
+msgid "Select VOB file(s)"
+msgstr "S?lectionner le(s) fichier(s) VOB"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:35
 msgid "_IFO file:"
-msgstr ""
+msgstr "Fichier _IFO :"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:43
-msgid "Vob_Sub file:"
-msgstr ""
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:35
+msgid "Select IFO file"
+msgstr "S?lectionner le fichier IFO"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:48
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:36
+msgid "VobSub file:"
+msgstr "Fichier VobSub :"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:36
+msgid "Select VobSub file"
+msgstr "S?lectionner le fichier VobSub"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:41
 msgid "VOB to VobSub"
-msgstr ""
+msgstr "VOB vers VobSub"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:52
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:57
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:45
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:50
 msgid "The selected vobfile does not exist"
-msgstr ""
+msgstr "Le fichier VOB s?lectionn? n'existe pas"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:62
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:55
 msgid "Please select a correct VobSub path/dir"
-msgstr ""
+msgstr "Veuillez s?lectionner un chemin/dossier VobSub correct"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_about.cpp:66
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:273
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:274
 msgid "Avidemux"
 msgstr "Avidemux "
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_about.cpp:67
 msgid "? 2001-2007 Mean"
-msgstr ""
+msgstr "? 2001-2007 Mean"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_about.cpp:68
 msgid "Multiplatform video editor"
-msgstr "Editeur Vid?o Multi-plateforme"
+msgstr "Editeur vid?o multiplateforme"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_about.cpp:69
 msgid ""
@@ -2090,8 +2917,7 @@
 "\t\t       Version 2, June 1991\n"
 "\n"
 " Copyright (C) 1989, 1991 Free Software Foundation, Inc.\n"
-"                       51 Franklin St, Fifth Floor, Boston, MA  02110-1301  "
-"USA\n"
+"                       51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA\n"
 " Everyone is permitted to copy and distribute verbatim copies\n"
 " of this license document, but changing it is not allowed.\n"
 "\n"
@@ -2226,8 +3052,7 @@
 "\n"
 "    a) Accompany it with the complete corresponding machine-readable\n"
 "    source code, which must be distributed under the terms of Sections\n"
-"    1 and 2 above on a medium customarily used for software interchange; "
-"or,\n"
+"    1 and 2 above on a medium customarily used for software interchange; or,\n"
 "\n"
 "    b) Accompany it with a written offer, valid for at least three\n"
 "    years, to give any third party, for a charge no more than your\n"
@@ -2334,8 +3159,7 @@
 "later version\", you have the option of following the terms and conditions\n"
 "either of that version or of any later version published by the Free\n"
 "Software Foundation.  If the Program does not specify a version number of\n"
-"this License, you may choose any version ever published by the Free "
-"Software\n"
+"this License, you may choose any version ever published by the Free Software\n"
 "Foundation.\n"
 "\n"
 "  10. If you wish to incorporate parts of the Program into other free\n"
@@ -2351,8 +3175,7 @@
 "  11. BECAUSE THE PROGRAM IS LICENSED FREE OF CHARGE, THERE IS NO WARRANTY\n"
 "FOR THE PROGRAM, TO THE EXTENT PERMITTED BY APPLICABLE LAW.  EXCEPT WHEN\n"
 "OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR OTHER PARTIES\n"
-"PROVIDE THE PROGRAM \"AS IS\" WITHOUT WARRANTY OF ANY KIND, EITHER "
-"EXPRESSED\n"
+"PROVIDE THE PROGRAM \"AS IS\" WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESSED\n"
 "OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF\n"
 "MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  THE ENTIRE RISK AS\n"
 "TO THE QUALITY AND PERFORMANCE OF THE PROGRAM IS WITH YOU.  SHOULD THE\n"
@@ -2397,8 +3220,7 @@
 "\n"
 "    You should have received a copy of the GNU General Public License\n"
 "    along with this program; if not, write to the Free Software\n"
-"    Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  "
-"USA\n"
+"    Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA\n"
 "\n"
 "\n"
 "Also add information on how to contact you by electronic and paper mail.\n"
@@ -2407,8 +3229,7 @@
 "when it starts in an interactive mode:\n"
 "\n"
 "    Gnomovision version 69, Copyright (C) year name of author\n"
-"    Gnomovision comes with ABSOLUTELY NO WARRANTY; for details type `show "
-"w'.\n"
+"    Gnomovision comes with ABSOLUTELY NO WARRANTY; for details type `show w'.\n"
 "    This is free software, and you are welcome to redistribute it\n"
 "    under certain conditions; type `show c' for details.\n"
 "\n"
@@ -2440,7 +3261,9 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_about.cpp:74
 msgid "translator-credits"
-msgstr "Fran?ais - ? 2006 Eric Lassauge"
+msgstr ""
+"Eric Lassauge (2006)\n"
+"Nicolas Velin (2008)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_acodec.cpp:138
 msgid "AudioCodec"
@@ -2448,11 +3271,10 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_acodec.cpp:163
 msgid "Configure codec"
-msgstr "Configurer codec"
+msgstr "Configurer le codec"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_asharp.cpp:71
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_chromaShift.cpp:67
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_contrast.cpp:72
 msgid "ASHARP"
 msgstr "ASHARP"
 
@@ -2466,20 +3288,20 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_asharp.cpp:204
 msgid "Strength :"
-msgstr "Force:"
+msgstr "Force :"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_asharp.cpp:212
 msgid "Block Adaptative :"
-msgstr "Block adaptatif"
+msgstr "Bloc adaptatif :"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_asharp.cpp:220
 msgid "Unknown flag :"
-msgstr "Flag inconnu:"
+msgstr "Drapeau inconnu :"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_asharp.cpp:252
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:161
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:262
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:283
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:255
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:276
 msgid " "
 msgstr "?"
 
@@ -2488,7 +3310,7 @@
 msgstr "Occup?"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:401
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:994
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:999
 msgid "Calculator"
 msgstr "Calculatrice"
 
@@ -2498,7 +3320,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:441
 msgid "Duration:"
-msgstr "Dur?e:"
+msgstr "Dur?e :"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:447
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:802
@@ -2507,21 +3329,22 @@
 msgstr "00:00:00"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:461
+#, fuzzy
 msgid "_Medium:"
-msgstr "_Support:"
+msgstr "_Support :"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:472
 msgid "_Format:"
-msgstr "_Format:"
+msgstr "_Format :"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:483
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:541
 msgid "Total size (custom)"
-msgstr "Taille totale (perso)"
+msgstr "Taille totale (personnalis?e)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:493
 msgid "_Custom size (MB):"
-msgstr "Taille perosnnalis?e (MB):"
+msgstr "Taille _personnalis?e (Mo) :"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:507
 msgid "Output container format"
@@ -2552,26 +3375,26 @@
 msgstr "DVD5"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:559
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:808
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:855
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_threadCount.cpp:87
 msgid "Custom"
 msgstr "Personnalis?"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:571
 msgid "Track _1:"
-msgstr "Piste _1:"
+msgstr "Piste _1 :"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:579
 msgid "Audio bitrate in kb/s for track 1 (0 for no audio)"
-msgstr "Bitrate audio de la piste 1 ( 0 pour pas d'audio)"
+msgstr "D?bit audio en kb/s de la piste 1 ( 0 pour pas d'audio)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:586
 msgid "Track _2: "
-msgstr "Piste _2:"
+msgstr "Piste _2 :"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:594
 msgid "Audio bitrate in kb/s for track 2 (optional)"
-msgstr "Bitrate audio de la piste 2 (optionnel)"
+msgstr "D?bit audio en kb/s de la piste 2 (optionnel)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:598
 msgid "<b>Audio Bitrate</b>"
@@ -2579,23 +3402,23 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:624
 msgid "Audio size (MB):"
-msgstr "Taille audio (MB):"
+msgstr "Taille audio (Mo) :"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:640
 msgid "Video size (MB):"
-msgstr "Taille vid?o (MB):"
+msgstr "Taille vid?o (Mo) :"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:656
 msgid "Total size (MB):"
-msgstr "Taille totale (MB):"
+msgstr "Taille totale (Mo) :"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:678
 msgid "Video bitrate:"
-msgstr "Bitrate vid?o:"
+msgstr "D?bit vid?o :"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:686
 msgid "Bits per pixel:"
-msgstr "Bits par pixel"
+msgstr "Bits par pixel :"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:702
 msgid "0.0"
@@ -2606,16 +3429,17 @@
 msgstr "<b>R?sultat</b>"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_chromaShift.cpp:184
+#, fuzzy
 msgid "ChromaShift"
-msgstr "D?calage Chroma"
+msgstr "ChromaShift"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_chromaShift.cpp:198
 msgid "U Shift :"
-msgstr "U Shift :"
+msgstr "D?calage en U :"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_chromaShift.cpp:205
 msgid "V Shift :"
-msgstr "V Shift :"
+msgstr "D?calage en V :"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_chromaShift.cpp:247
 msgid "<b>Preview</b>"
@@ -2623,7 +3447,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_cnr2.cpp:137
 msgid "Chroma Noise Reduction 2"
-msgstr "R?duction de bruit chroma 2"
+msgstr "R?duction du bruit de la chrominance 2"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_cnr2.cpp:162
 msgid "<b>Scene change Treshold</b>"
@@ -2639,19 +3463,19 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_cnr2.cpp:204
 msgid "Luma :"
-msgstr "Luma :"
+msgstr "Luminance :"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_cnr2.cpp:211
 msgid "Chroma U :"
-msgstr "Chroma U :"
+msgstr "Chrominance en U :"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_cnr2.cpp:218
 msgid "Chroma V :"
-msgstr "Chroma V :"
+msgstr "Chrominance en V :"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_cnr2.cpp:261
 msgid "Narrow"
-msgstr "Narrow"
+msgstr ""
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_cnr2.cpp:286
 msgid "<b>Settings</b>"
@@ -2659,7 +3483,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_cnr2.cpp:305
 msgid "Use also chroma to detect scene change"
-msgstr "Utiliser ?galement le chroma pour d?tecter le changement de sc?ne"
+msgstr "Utilise ?galement la chrominance pour d?tecter le changement de sc?ne"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_cnr2.cpp:309
 msgid "<b>Mode</b>"
@@ -2667,14 +3491,8 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:155
 msgid "ColorYuv (From avisynth)"
-msgstr "Couleur YUV (vient AviSynth)"
+msgstr "Configuration de \"Avisynth ColorYUV\""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:179
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_contrast.cpp:194
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_contrast.cpp:212
-msgid "Contrast"
-msgstr "Contraste"
-
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:186
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_contrast.cpp:221
 msgid "Brightness"
@@ -2686,20 +3504,20 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:207
 msgid "Luma Y"
-msgstr "Luma Y"
+msgstr "Luminance en Y"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:214
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_contrast.cpp:239
 msgid "Chroma U"
-msgstr "Chroma U"
+msgstr "Chrominance en U"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:221
 msgid "Chroma V"
-msgstr "Chroma V"
+msgstr "Chrominance en V"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:324
 msgid "<b>Color Correction Matrix</b>"
-msgstr "<b>Matrice Correction Couleur</b>"
+msgstr "<b>Matrice de correction des couleurs</b>"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:347
 msgid "Matrix"
@@ -2719,7 +3537,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:382
 msgid "Coring"
-msgstr "Coring"
+msgstr ""
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:390
 msgid "TV->PC"
@@ -2738,20 +3556,21 @@
 "<b>Matrix Warning :</b>\n"
 "all above values are normalized to 256!"
 msgstr ""
-"<b>Probl?em de Matrice?:</b>\n"
+"<b>Probl?me de matrice?:</b>\n"
 "toutes les valeurs ci-dessus seront normalis?es ? 256?!"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:404
 msgid "AutoGain"
-msgstr "Gain Auto"
+msgstr "Gain automatique"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:408
+#, fuzzy
 msgid "Display Stats"
 msgstr "Affichage des stats"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:412
 msgid "AutoWhite"
-msgstr "Blanc Auto"
+msgstr "Balance  automaique des blancs"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:416
 msgid "<b>frame2</b>"
@@ -2759,39 +3578,39 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_contrast.cpp:235
 msgid "Luma"
-msgstr "Luma"
+msgstr "Luminance"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_contrast.cpp:243
 msgid "Chroma v"
-msgstr "Chroma v"
+msgstr "Chrominance en v"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_crop.cpp:258
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_crop.cpp:255
 msgid "Crop Settings"
-msgstr "R?glages d?coupe"
+msgstr "Configuration du \"Crop\""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_crop.cpp:292
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_crop.cpp:289
 msgid "AutoCrop"
-msgstr "Auto-d?coupage"
+msgstr "Retaillage automatique"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_crop.cpp:314
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_crop.cpp:311
 msgid "Reset"
-msgstr "RAZ"
+msgstr "R?initialiser"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_crop.cpp:323
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_crop.cpp:320
 msgid "Crop Left :"
-msgstr "D?coupe gauche?:"
+msgstr "Bordure gauche?:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_crop.cpp:331
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_crop.cpp:328
 msgid "Crop Top:"
-msgstr "D?coupe haut?:"
+msgstr "Bordure haute?:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_crop.cpp:339
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_crop.cpp:336
 msgid "Crop Right:"
-msgstr "D?coupe droite?:"
+msgstr "Bordure droite?:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_crop.cpp:347
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_crop.cpp:344
 msgid "Crop Bottom:"
-msgstr "D?coupe bas?:"
+msgstr "Bordure basse?:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:161
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:183
@@ -2801,7 +3620,7 @@
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:161
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:183
 msgid "Root privileges are required to perform this operation."
-msgstr ""
+msgstr "Les privil?ges d'administrateur sont requis pour effectuer cette op?ration."
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:204
 msgid "Shutting down"
@@ -2818,7 +3637,7 @@
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:418
 #, c-format
 msgid "%lu MB"
-msgstr "%lu MB"
+msgstr "%lu Mo"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:514
 msgid "Encoding..."
@@ -2826,70 +3645,70 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:545
 msgid "<b>Phase:</b>"
-msgstr "<b>Phase:</b>"
+msgstr "<b>Phase :</b>"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:560
 msgid "<b>Video Codec:</b>"
-msgstr "<b>Codec Vid?o:</b>"
+msgstr "<b>Codec vid?o :</b>"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:575
 msgid "<b>Audio Codec:</b>"
-msgstr "<b>Codec Audio:</b>"
+msgstr "<b>Codec audio :</b>"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:590
 msgid "<b>Container:</b>"
-msgstr "<b>Conteneur?:</b>"
+msgstr "<b>Conteneur :</b>"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:622
 msgid "<b>Processed Frames:</b>"
-msgstr "<b>Image trait?es:</b>"
+msgstr "<b>Image trait?es :</b>"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:630
 msgid "<b>Total Frames:</b>"
-msgstr "<b>Totale images:</b>"
+msgstr "<b>Images totales :</b>"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:638
 msgid "<b>Quantiser:</b>"
-msgstr "<b>Quantiseur:</b>"
+msgstr "<b>Quantificateur :</b>"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:646
 msgid "<b>Average Bitrate:</b>"
-msgstr "<b>Bitrate?moyen:</b>"
+msgstr "<b>D?bit moyen :</b>"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:654
 msgid "0 kB/s"
-msgstr "0 kB/s"
+msgstr "0 ko/s"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:699
 msgid "<b>Video Size:</b>"
-msgstr "<b>Taille Vid?o?:</b>"
+msgstr "<b>Taille de la vid?o?:</b>"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:707
 msgid "<b>Audio Size:</b>"
-msgstr "<b>Taille Audio?:</b>"
+msgstr "<b>Taille de l'audio?:</b>"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:715
 msgid "<b>Total Size:</b>"
-msgstr "<b>Taille Totale?:</b>"
+msgstr "<b>Taille totale?:</b>"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:723
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:731
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:739
 msgid "0 MB"
-msgstr "0 MB"
+msgstr "0 Mo"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:764
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_working.cpp:244
 msgid "<b>Elapsed:</b>"
-msgstr "<b>Ecoul?:</b>"
+msgstr "<b>Ecoul? :</b>"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:772
 msgid "<b>Time Remaining:</b>"
-msgstr "<b>Temps restant:</b>"
+msgstr "<b>Restant :</b>"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:780
 msgid "<b>Frames/sec:</b>"
-msgstr "<b>Image/sec:</b>"
+msgstr "<b>Image/sec :</b>"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:826
 msgid "Shut down computer when finished"
@@ -2897,7 +3716,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:834
 msgid "Priority:"
-msgstr "Priorit?"
+msgstr "Priorit? :"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:844
 msgid "Above Normal"
@@ -2911,10 +3730,6 @@
 msgid "Pause / Abort"
 msgstr "Pause/Annulation"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eq2.cpp:205
-msgid "MPlayer eq2"
-msgstr "MPlayer eq2"
-
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eq2.cpp:231
 msgid "Brigh_tness:"
 msgstr "Lumino_sit??:"
@@ -2953,7 +3768,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_equalizer.cpp:450
 msgid "Equalizer"
-msgstr "Equaliseur"
+msgstr "Configuration du \"Luma equalizer\""
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_exLame.cpp:80
 msgid "Lame command"
@@ -2961,7 +3776,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_exLame.cpp:89
 msgid "Enter parameters (i.e. -b 192 -m s ...)"
-msgstr "Entrer param?tres (i.e. -b 192 -ms ...)"
+msgstr "Saisir les param?tres (i.e. -b 192 -ms ...)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_hue.cpp:74
 msgid "Hue"
@@ -2981,7 +3796,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:51
 msgid "Continue indexing"
-msgstr "Continuer l'indexage"
+msgstr "Continuer l'indexation"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:51
 msgid "Abort Requested"
@@ -2989,27 +3804,27 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:51
 msgid "Do you want to abort indexing ?"
-msgstr "Voulez-vous annuler l'indexage??"
+msgstr "Voulez-vous annuler l'indexation??"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:153
 msgid "Indexing..."
-msgstr "Indexer un MPEG..."
+msgstr "Indexation..."
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:174
 msgid "Time left :"
-msgstr "Temps restant?:"
+msgstr "Dur?e restante?:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:182
 msgid "Timecode :"
-msgstr "Timecode?:"
+msgstr "Time-code :"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:190
 msgid "Nb pictures seen :"
-msgstr "Nb d'image vues?:"
+msgstr "Nb d'images vues?:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:214
 msgid "Indexing :"
-msgstr "Indexage?:"
+msgstr "Indexation?:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:222
 msgid "/dev/null"
@@ -3024,7 +3839,7 @@
 msgstr "R?ussi"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:25
-#: avidemux/gtk_gui.cpp:2275
+#: avidemux/gtk_gui.cpp:2282
 msgid "Failed"
 msgstr "Echou?"
 
@@ -3038,7 +3853,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:98
 msgid "  Job Name  "
-msgstr " Nom t?che?:"
+msgstr "  Nom de la t?che  "
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:103
 msgid "Started at"
@@ -3055,24 +3870,24 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:134
 msgid "Delete ALL jobs"
-msgstr "Effacer toutes les t?ches"
+msgstr "Supprimer TOUTES les t?ches"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:134
 msgid "Are you sure you want to delete all jobs ?"
-msgstr "Etes-vous s?r de vouloir effacer toutes les t?ches??"
+msgstr "Etes-vous s?r de vouloir supprimer toutes les t?ches??"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:172
 msgid "Delete job"
-msgstr "Supprimer t?che"
+msgstr "Supprimer la t?che"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:172
 #, c-format
 msgid "Are you sure you want to delete %s job ?"
-msgstr "Etes-vous s?r de vouloir effacer %s t?ches??"
+msgstr "Etes-vous s?r de vouloir supprimer la t?che?%s ?"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:181
 msgid "Unknown event"
-msgstr "Ev?nement inconnu"
+msgstr "Ev?nement inconnu"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:261
 msgid "Jobs"
@@ -3080,7 +3895,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:287
 msgid "Delete All Jobs"
-msgstr "Effacer toutes les t?ches"
+msgstr "Supprimer toutes les t?ches"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:292
 msgid "Delete Job"
@@ -3096,7 +3911,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs_save.cpp:49
 msgid "Select Video to Write"
-msgstr ""
+msgstr "S?lectionner la vid?o ? ?crire"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs_save.cpp:63
 msgid "Invalid filename"
@@ -3104,7 +3919,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs_save.cpp:63
 msgid "Please select or enter a valid filename."
-msgstr ""
+msgstr "Veuillez s?lectionner ou saisir un nom de fichier valide."
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs_save.cpp:69
 msgid "Invalid jobname"
@@ -3112,27 +3927,25 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs_save.cpp:69
 msgid "Please select or enter a valid jobname."
-msgstr ""
+msgstr "Veuillez s?lectionner ou saisir un nom de t?che valide."
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs_save.cpp:110
 msgid "Save Job"
-msgstr "Enregistrer t?che"
+msgstr "Enregistrer la t?che"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs_save.cpp:131
 msgid "Select the output file"
-msgstr "S?lectionner un fichier de sortie"
+msgstr "S?lectionner le fichier de sortie"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs_save.cpp:145
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_filesel.cpp:93
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_filesel.cpp:245
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_filesel.cpp:90
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_filesel.cpp:244
 msgid "_Browse..."
-msgstr "_Choisir..."
+msgstr "_Explorer..."
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs_save.cpp:154
 msgid "Job name displayed in the job list and used as the script filename"
-msgstr ""
-"Le nom du travail est montr? dans la liste du travail et utilis? comme nom "
-"de fichier de script"
+msgstr "Le nom de la t?che est montr? dans la liste de t?che et est utilis? comme nom de fichier de script"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs_save.cpp:163
 msgid "Filename of the audio/video output"
@@ -3140,15 +3953,15 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs_save.cpp:166
 msgid "_Job name:"
-msgstr "_Nom t?che?:"
+msgstr "Nom de la _t?che?:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs_save.cpp:173
 msgid "Output _file:"
-msgstr "Fichier de _Sortie?:"
+msgstr "_Fichier de sortie?:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_mpdelogo.cpp:379
 msgid "Mplayer Delogo"
-msgstr "Mplayer Delogo"
+msgstr "Configuration du \"Mplayer Delogo\""
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_mpdelogo.cpp:397
 msgid "X"
@@ -3180,15 +3993,15 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:100
 msgid "# of lines"
-msgstr "Nbr de lignes"
+msgstr "Nb de lignes"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:108
 msgid "TimeCode:"
-msgstr ""
+msgstr "Time-code :"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:116
 msgid "# of Glyphs :"
-msgstr "Nbr de Glyphes?:"
+msgstr "Nb de symboles?:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:124
 msgid "<b>Stats</b>"
@@ -3196,43 +4009,45 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:141
 msgid "Current Glyph"
-msgstr "Glyphe courante"
+msgstr "Symbole actuel"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:154
 msgid " Text:"
 msgstr " Texte?:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:176
+#, fuzzy
 msgid "_Calibrate"
-msgstr ""
+msgstr "_Calibrer"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:180
 msgid "If the glyphs are too thin, enter a lower value here"
-msgstr ""
+msgstr "Si les symboles sont trop fins, saisir une valeur plus petite ici"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:182
+#, fuzzy
 msgid "S_kip all"
-msgstr ""
+msgstr "P_asser tous"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:186
 msgid "Skip the whole image"
-msgstr ""
+msgstr "Passer l'image enti?re"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:188
 msgid "Skip Glyph"
-msgstr "Sauter Glyphe"
+msgstr "Sauter le symbole"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:192
 msgid "Skip the current letter/glyph"
-msgstr ""
+msgstr "Passer le symbole actuel"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:194
 msgid "_Ignore glyph"
-msgstr ""
+msgstr "_Ignorer le symbole"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:198
 msgid "This glyph will be ignored from now on"
-msgstr ""
+msgstr "Ce symbole sera ignor? ? partir de maintenant"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:200
 msgid "Ok"
@@ -3242,11 +4057,6 @@
 msgid "<b>Bitmap</b>"
 msgstr "<b>Bitmap</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_partial.cpp:123
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtersub.cpp:144
-msgid "Partial"
-msgstr "Partiel"
-
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_partial.cpp:137
 msgid "Start frame for partial :"
 msgstr "Image de d?but pour partiel?:"
@@ -3259,6 +4069,11 @@
 msgid "Configure partialized filter"
 msgstr "Configurer les filtres partiels"
 
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:269
+#, fuzzy
+msgid "Particle Analysis Configuration"
+msgstr "Configuration de l'analyse des particules"
+
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_pause.cpp:93
 msgid "Paused"
 msgstr "En pause"
@@ -3294,142 +4109,143 @@
 msgstr ""
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_preview.cpp:180
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:542
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp:336
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtersub.cpp:150
 msgid "Preview"
 msgstr "Pr?visualisation"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:47
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:40
 msgid "No"
-msgstr "?Non "
+msgstr "Non"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:47
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:40
 msgid "Yes"
-msgstr "?Oui "
+msgstr "Oui"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:67
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:60
 #, c-format
 msgid "%lu x %lu"
 msgstr "%lu x %lu"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:70
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:63
 #, c-format
 msgid "%2.3f fps"
 msgstr "%2.3f fps"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:73
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:66
 #, c-format
 msgid "%ld frames"
-msgstr "%ld d'images"
+msgstr "%ld images"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:83
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:133
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:76
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:126
 #, c-format
 msgid "%02d:%02d:%02d.%03d"
 msgstr "%02d:%02d:%02d.%03d"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:96
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:89
 #, c-format
 msgid "%s (%u:%u)"
 msgstr "%s (%u:%u)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:118
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:111
 #, c-format
 msgid "%lu Hz"
 msgstr "%lu Hz"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:120
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:113
 #, c-format
 msgid "%lu Bps / %lu kbps"
-msgstr "%lu Bps / %lu kbps"
+msgstr "%lu bps / %lu kbps"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:136
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:129
 #, c-format
 msgid "%.2f MB"
-msgstr "%.2f MB"
+msgstr "%.2f Mo"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:205
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:198
 msgid "Properties"
 msgstr "Propri?t?s "
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:234
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:227
 msgid "Frame Rate:"
-msgstr "FPS:"
+msgstr "Image par seconde :"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:241
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:234
 msgid "Frame Count:"
-msgstr "Compte image:"
+msgstr "Nombre d'image :"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:248
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:426
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:241
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:419
 msgid "Total Duration:"
-msgstr "Dur?e totale:"
+msgstr "Dur?e totale :"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:269
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:262
 msgid "Image Size:"
-msgstr "taille image:"
+msgstr "Taille de l'image :"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:290
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:283
 msgid "Codec 4CC:"
-msgstr "Codec FourCC:"
+msgstr "Codec FourCC :"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:304
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:297
 msgid "Aspect Ratio:"
-msgstr "Ratio:"
+msgstr "Rapport H/L :"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:318
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1058
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:311
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1063
 msgid "<b>Video</b>"
 msgstr "<b>Vid?o</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:337
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:330
 msgid "Global Motion Compensation:"
-msgstr "Compensation Globale du mouvement:"
+msgstr "Compensation Globale du Mouvement :"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:351
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:344
 msgid "Packed Bitstream:"
-msgstr "Packed Bitstream:"
+msgstr "Bitstream empaquet? :"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:365
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:358
 msgid "Quarter Pixel:"
-msgstr "Quarter Pixel:"
+msgstr "Quart de Pixel :"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:379
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:372
 msgid "<b>Extra Video Properties</b>"
-msgstr "<b>Propri?t?s vid?o extra</b>"
+msgstr "<b>Propri?t?s suppl?mentaire de la vid?o</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:398
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:391
 msgid "Codec:"
-msgstr "Codec:"
+msgstr "Codec :"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:405
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:398
 msgid "Channels:"
-msgstr "Canaux:"
+msgstr "Canaux :"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:412
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:405
 msgid "Bitrate:"
-msgstr "Bitrate:"
+msgstr "D?bit :"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:419
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:412
 msgid "Frequency:"
-msgstr "Fr?quence:"
+msgstr "Fr?quence :"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:468
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:461
 msgid "File Size:"
-msgstr "Taille fichier:"
+msgstr "Taille du fichier :"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:482
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:475
 msgid "Variable Bitrate:"
-msgstr "Bitrate variable:"
+msgstr "D?bit variable :"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:496
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1098
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:489
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1103
 msgid "<b>Audio</b>"
 msgstr "<b>Audio</b>"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_quota.cpp:90
 msgid "Filesystem full / quota exceeded"
-msgstr "Fichier syst?me complet / quota d?pass?"
+msgstr "Syst?me de fichier plein / quota d?pass?"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_quota.cpp:133
 msgid "Ignore"
@@ -3443,17 +4259,13 @@
 msgid "Recent files"
 msgstr "Fichiers r?cents"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:312
-msgid "Resize"
-msgstr "Redimensionner"
-
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:326
 msgid " Width "
-msgstr "Largeur"
+msgstr "Largeur :"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:333
 msgid " Height "
-msgstr "Hauteur"
+msgstr "Hauteur :"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:356
 msgid "Source :"
@@ -3461,15 +4273,15 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:362
 msgid "Destination"
-msgstr "Destination"
+msgstr "Destination :"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:412
 msgid " Error X:"
-msgstr "Erreur X?:"
+msgstr "Erreur en X?:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:426
 msgid " Error Y:"
-msgstr "Erreur Y?:"
+msgstr "Erreur en Y?:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:440
 msgid "16 round up"
@@ -3490,10 +4302,44 @@
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_srt.cpp:91
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_srt.cpp:222
 msgid "Subtitle Size and Position"
-msgstr ""
+msgstr "Position et taille des sous-titres"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_srt.cpp:236
 msgid "Font Size:"
+msgstr "Taille de la police :"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:505
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:388
+msgid "Swiss Army Knife Configuration"
+msgstr "Configuration du couteau suisse"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:200
+#: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:163
+msgid "Threshold Configuration"
+msgstr "Configuration du seuil"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:423
+msgid "Minimum value to be in-range:"
+msgstr "Valeur mi_nimun pour ?tre dans l'intervalle :"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:456
+msgid "Maximum value to be in-range:"
+msgstr "Valeur ma_ximun pour ?tre dans l'intervalle :"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:487
+msgid "Output values:   "
+msgstr "Valeurs de sortie :"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:494
+msgid "In-range values go black, out-of-range values go white"
+msgstr "Les valeurs dans l'intervalle deviennent noires, les autres deviennent blanches"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:495
+msgid "In-range values go white, out-of-range values go black"
+msgstr "Les valeurs dans l'intervalle deviennent blanches, les autres deviennent noires"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:501
+msgid "Debugging settings (bits):   "
 msgstr ""
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vcodec.cpp:104
@@ -3501,11 +4347,15 @@
 msgstr "Encodeur vid?o"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vcodec.cpp:118
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1078
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1118
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1083
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1123
 msgid "Configure"
 msgstr "Configurer"
 
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:88
+msgid "none"
+msgstr "aucun"
+
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:98
 msgid "Select .idx file"
 msgstr "S?lection du fichier .idx"
@@ -3520,15 +4370,15 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:227
 msgid "Select Language :"
-msgstr "S?lection Langue?:"
+msgstr "S?lection la langue?:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:241
 msgid "Select Sub"
-msgstr "S?lection Sous-titres"
+msgstr "S?lection les sous-titres"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:254
 msgid "Extra Shrink Factor :"
-msgstr "Facteur d'extra r?duction?:"
+msgstr "Facteur suppl?mentaire de r?duction?:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:269
 msgid "Shift (ms) :"
@@ -3536,694 +4386,629 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:283
 msgid "Extra Settings"
-msgstr "R?glages Extra"
+msgstr "R?glages suppl?mentaires"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_working.cpp:223
 msgid "Processing"
-msgstr ""
+msgstr "Traitement"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_working.cpp:259
 msgid "<b>Time remaining:</b>"
-msgstr ""
+msgstr "<b>Dur?e restante :</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:560
-msgid "X264 configuration"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:110
+#, fuzzy
+msgid "Hadamard Exhaustive Search"
+msgstr "Recherche exhaustive"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:596
+msgid "x264 Configuration"
 msgstr "Configuration x264"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:575
-msgid "Encoding Mode:"
-msgstr "Mode d'encodage?:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:617
+msgid "Encoding Mode"
+msgstr "Mode d'encodage"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:587
-msgid "Entry input for target file size or bitrate"
-msgstr "pour la taille ou le bitrate du fichier cible"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:624
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:480
+msgid "Quantizer"
+msgstr "Quantificateur"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:589
-msgid "Quantizer (0-51):"
-msgstr "Quantificateur (0-51)?:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:631
+msgid "Target Size"
+msgstr "Taille cible"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:602
-msgid ""
-"Constant Quantizer - Each frame will the same compression. Low numbers equal "
-"higher quality while high numbers equal lower quality"
-msgstr ""
-"Quantificateur constant - chaque image aura la m?me compression. Les valeurs "
-"faibles donnent une meilleure qualit? et donc les valeurs hautes donnent une "
-"qualit? basse"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:644
+#, fuzzy
+msgid "Constant Quantizer - Each frame will have the same compression. Low numbers equal higher quality while high numbers equal lower quality."
+msgstr "Quantificateur constant - chaque image aura la m?me compression. Les valeurs faibles donnent une meilleure qualit? et donc les valeurs hautes donnent une qualit? basse"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:612
-msgid "Target Size:"
-msgstr "Taille cible?:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:652
+msgid "Target bitrate or file size"
+msgstr "D?bit ou taille du fichier cible"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:624
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:660
 msgid "Single Pass - Quality Quantizer (Average)"
 msgstr "Une passe - Qualit? Quantificateur (moyen)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:625
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:661
 msgid "Single Pass - Quality Quantizer (Constant)"
 msgstr "Une passe - Qualit? Quantificateur (constant)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:626
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:662
 msgid "Single Pass - Bitrate (Average)"
 msgstr "Une passe - Bitrate (moyen)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:627
-msgid "Two Pass - File Size"
-msgstr "Deux passes - Taille fichier"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:663
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:768
+msgid "Two Pass - Video Size"
+msgstr "Deux passes - Taille de la vid?o"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:628
-msgid "Two Pass - Average bitrate"
-msgstr "Deux passes - Bitrate moyen"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:664
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:772
+msgid "Two Pass - Average Bitrate"
+msgstr "Deux passes - D?bit moyen"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:630
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:666
 msgid "Bitrate"
 msgstr "Bitrate"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:656
-msgid "Partition decision"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:699
+#, fuzzy
+msgid "Partition Decision"
 msgstr "D?cision de partition"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:663
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:706
 msgid "Method"
 msgstr "M?thode"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:675
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:718
 msgid "1  - Extremely Low (Fastest)"
-msgstr "1 - Extr?mement bas (le plus rapide)"
+msgstr "1 - Extr?mement bas (le plus rapide)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:676
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:719
 msgid "2  - Very Low"
 msgstr "2 - Tr?s bas"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:677
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:720
 msgid "3  - Low"
 msgstr "3 - Bas"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:678
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:721
 msgid "4  - Medium"
 msgstr "4 - Moyen"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:679
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:722
 msgid "5  - High (Default)"
 msgstr "5 - Haut (par d?faut)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:680
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:723
 msgid "6  - Very High"
 msgstr "6 - Tr?s haut"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:681
-msgid "6B - Very High (RDO on Bframes)"
-msgstr "6B - Tr?s haut (RDO sur Image-B)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:724
+msgid "6B - Very High (RDO on B-frames)"
+msgstr "6B - Tr?s haut (RDO sur images-B)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:682
-msgid "7 - Ultra High"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:725
+msgid "7  - Ultra High"
 msgstr "7 - Ultra haut"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:683
-msgid "7B - Ultra High (RDO on Bframes)"
-msgstr "7B - Ultra haut (RDO sur image-B)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:726
+msgid "7B - Ultra High (RDO on B-frames)"
+msgstr "7B - Ultra haut (RDO sur images-B)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:690
-msgid "Diamond search"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:733
+msgid "Diamond Search"
 msgstr "Recherche en diamand"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:691
-msgid "Hexagonal search"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:734
+msgid "Hexagonal Search"
 msgstr "Recherche hexagonale"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:692
-msgid "Uneven multi hexagon"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:735
+#, fuzzy
+msgid "Uneven Multi-hexagon"
 msgstr "Multi hexagone irr?gulier"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:693
-msgid "Exhaustive search"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:736
+msgid "Exhaustive Search"
 msgstr "Recherche exhaustive"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:705
-msgid ""
-"Set how many previous frames can be referenced by a P/B-frame. Numbers above "
-"5 do not seem to improve quality greatly. Numbers are 3 to 5 are recommended"
-msgstr ""
-"Choisir combien d'images pr?c?dentes sont r?f?renc?es par une image-P/B. Une "
-"valeur sup?rieure ? 5 ne semble pas avoir d'effet sur la qualit?. Une valeur "
-"entre 3 et 5 est recommand?e"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:708
-msgid "Max. Ref. frames"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:744
+#, fuzzy
+msgid "Max. Ref. Frames"
 msgstr "Max. images R?f."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:715
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:751
 msgid "Range"
 msgstr "Plage"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:728
-msgid ""
-"Define how many pixels are analysised. The higher the range the more "
-"accurate the analysis but the slower the encoding time"
-msgstr ""
-"D?finit combien de pixels sont analys?s. Plus la plage est grande, plus "
-"l'analyse est fine, mais au d?pend de la dur?e d'encodage"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:764
+#, fuzzy
+msgid "Define how many pixels are analysed for motion estimation. The higher the range the more accurate the analysis but the slower the encoding time."
+msgstr "D?finit combien de pixels sont analys?s. Plus la plage est grande, plus l'analyse est fine, mais au d?pend de la dur?e d'encodage"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:731
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:773
+#, fuzzy
+msgid "Set how many previous frames can be referenced by a P/B-frame. Numbers above 5 do not seem to improve quality greatly. Numbers 3 to 5 are recommended."
+msgstr "Choisir combien d'images pr?c?dentes sont r?f?renc?es par une image-P/B. Une valeur sup?rieure ? 5 ne semble pas avoir d'effet sur la qualit?. Une valeur entre 3 et 5 est recommand?e"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:776
+#, fuzzy
 msgid "Chroma ME"
-msgstr "Chroma ME"
+msgstr "Chrominance ME"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:736
-msgid ""
-"Uses chroma (color) components for motion for compression and helps the "
-"quality"
-msgstr ""
-"Utilise les composants chromas (couleur) pour la compression de mouvement et "
-"am?liore la qualit?"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:781
+msgid "Use color information for detecting motion to improve quality"
+msgstr "Utilise les informations de couleur pour estimer le mouvement afin d'am?liorer la qualit?"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:739
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:784
 msgid "Mixed Refs"
 msgstr "R?fs. Mix"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:744
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:789
 msgid "Calculate referencing individually based on each partition"
 msgstr "Calcule les r?f?rences individuellement pour chaque partition"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:750
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:795
 msgid "Fast P-Skip"
 msgstr "Saut P rapide "
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:753
-msgid "Uncheck to enable fast p-skip"
-msgstr "Pas de contr?le de saut P rapide"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:798
+msgid "Early skip detection on P-frames to speedup encoding. Quality will be slightly reduced."
+msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:756
-msgid "DCT decimate"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:801
+#, fuzzy
+msgid "DCT Decimate"
 msgstr "DCT decimate"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:760
-msgid "Interlace"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:806
+msgid "Interlaced"
 msgstr "Entrelac?"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:763
-msgid "Encode interlaced"
-msgstr "Encodage entrelac?"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:809
+msgid "Input video is interlaced"
+msgstr "La vid?o d'entr?e est entrelac?e"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:765
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:811
 msgid "<b>Motion Estimation</b>"
-msgstr "<b>Estimation Mouvement</b>"
+msgstr "<b>Estimation de mouvement</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:792
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:804
-msgid ""
-"Enforce the size of a decoded pixel decoded to a certain value. Leave this "
-"at 1:1 for non-anamorphic video"
-msgstr ""
-"Force la taille d'un pixel d?cod? ? une certaine valeur. Laisser ? 1:1 pour "
-"des vid?os non-anamorphiques"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:840
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:851
+#, fuzzy
+msgid "Enforce the size of a decoded pixel decoded to a certain value. Set this to 1:1 for non-anamorphic video."
+msgstr "Force la taille d'un pixel d?cod? ? une certaine valeur. Laisser ? 1:1 pour des vid?os non-anamorphiques"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:796
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:844
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1051
 msgid ":"
 msgstr "?:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:813
-msgid "Set a custom aspect ratio. Default 1:1 is recommended for most video."
-msgstr ""
-"Indiquer un ratio persdonnalis? . Par D?faut 1:1 est recommand? pour la "
-"plupart des vid?os."
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:860
+#, fuzzy
+msgid "Set a custom aspect ratio. The default 1:1 is recommended for most video."
+msgstr "Indiquer un ratio personnalis?. Par D?faut 1:1 est recommand? pour la plupart des vid?os."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:818
-msgid "Predefined Aspect Ratios"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:865
+#, fuzzy
+msgid "Predefined Aspect Ratio"
 msgstr "Ratio Pr?d?finis"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:823
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:870
 msgid "Set a common predefined aspect ratio"
 msgstr "Placer un radio d'aspect commun pr?d?fini"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:827
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1040
-msgid "As input"
-msgstr "Entr?e"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:874
+msgid "As Input"
+msgstr "Comme entr?e"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:832
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1043
-msgid "Get PAR from input video file"
-msgstr "R?cup?rer PAR du fichier vid?o en entr?e"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:856
-msgid "<b>Sample Aspect Ratio (A/R)</b>"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:895
+#, fuzzy
+msgid "<b>Sample Aspect Ratio</b>"
 msgstr "<b>Exemple Ratio Aspect (A/R)</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:878
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:922
 msgid "CABAC"
 msgstr "CABAC"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:881
-msgid ""
-"Lossless compression method which usually improves the bitrate usage by 15% "
-"(especially on high bitrate). Helps the quality a lot but is slower. "
-msgstr ""
-"M?thode de compression sans perte qui am?liore le bitrate de 15% "
-"(particuli?rement pour les bitrates ?l?v?s). Am?liore beaucoup la qualit? "
-"mais est plus lent"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:925
+msgid "Lossless compression technique that reduces bitrate by approximately 10%. Increases encoding and decoding time."
+msgstr "Technique de compression sans perte qui r?duit le d?bit d'environ 10%. Am?liore ? la fois l'encodage et le d?codage."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:884
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:932
 msgid "Trellis"
 msgstr "Trellis"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:893
-msgid ""
-"Use rate distortion quantization to find optimal encoding for each block. "
-"Level 0 equals disabled, level 1 equals normal and level 2 equals high"
-msgstr ""
-"Utilise une quantification de la distortion de vitesse pour trouver un "
-"encodage optimal pour chaque bloc. Un niveau ? 0 signifie inhib?e, 1 pour "
-"normale, 2 pour ?lev?e"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:941
+#, fuzzy
+msgid "Use Trellis Rate Distortion Optimisation to find optimal encoding for each block. Level 0 equals disabled, level 1 equals normal and level 2 equals high."
+msgstr "Utilise une quantification de la distortion de vitesse pour trouver un encodage optimal pour chaque bloc. Un niveau ? 0 signifie inhib?e, 1 pour normale, 2 pour ?lev?e"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:900
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:948
 msgid "Noise Reduction"
 msgstr "R?duction de bruit"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:909
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:957
 msgid "Set the amount of noise reduction"
 msgstr "Choisi le niveau de r?duction de bruit"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:916
-msgid "Deblocking Filter :"
-msgstr "Filtre de d?groupage?:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:964
+msgid "Deblocking Filter"
+msgstr "Filtre anti-blocs"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:919
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:967
 msgid "Enable in-loop deblocking to filter the video"
-msgstr "Autorise le filtre de d?groupage ??in-loop?? pour la vid?o"
+msgstr "Autorise le filtre anti-blocs ??in-loop?? pour la vid?o"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:932
-msgid "Set the amount of blurring to use for block edges when they are found"
-msgstr "D?finit la valeur de flou ? utiliser pour les bords des blocs trouv?s"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:984
+msgid "Strength"
+msgstr "Force"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:941
-msgid "Define the level for when deblocking is applied"
-msgstr "D?finit le niveau quand le filtre de d?groupage est appliqu?"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:998
+msgid "Threshold for block detection. Positive values will detect more blocks, negative values will detect less."
+msgstr "Seuil de la d?tection des blocs. Les valeurs positives d?tecteront plus de blocs, les valeurs n?gatives en d?tecteront moins."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:944
-msgid "<i>Threshold</i>"
-msgstr "<i>Seuil</i>"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1007
+msgid "Positive values will soften the video, negative values will sharpen"
+msgstr "Les valeurs positives adouciront la vid?o, les valeurs n?gatives l'aiguiseront"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:952
-msgid "<i>Strength</i>"
-msgstr "<i>Force</i>"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:960
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1010
 msgid "<b>Misc. Options</b>"
 msgstr "<b>Options diverses</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:965
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1015
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1066
 msgid "Motion & Misc"
 msgstr "Mouvement & Divers"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:986
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1041
 msgid "8x8 Transform"
 msgstr "Transformation 8x8"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:989
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1044
 msgid "General block breakdown transformation"
 msgstr "Transformation pour le d?pouillement g?n?ral des blocs"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:992
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1047
 msgid "8x8, 8x16 and 16x8 P-frame search"
 msgstr "Recherche images-P 8x8, 8x16 et 16x8"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:995
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1050
 msgid "Improve the P-frame quality"
 msgstr "Am?liore la qualit? des images-P"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:998
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1053
 msgid "8x8, 8x16 and 16x8 B-frame search"
 msgstr "Recherche images-B 8x8, 8x16 et 16x8"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1001
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1056
 msgid "Improve the B-frame quality"
 msgstr "Am?liore la qualit? des images-B"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1004
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1059
 msgid "4x4, 4x8 and 8x4 P-frame search"
 msgstr "Recherche images-P 4x4, 4x8 et 8x4"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1007
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1062
 msgid "Further improve the P-frame quality"
 msgstr "Am?liore encore plus la qualit? des images-P"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1009
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1064
 msgid "8x8 Intra search"
 msgstr "Recherche Intra 8x8"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1012
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1067
 msgid "Enable DCT Intra block search to improve quality"
 msgstr "Autorise la recherche des blocs Intra DCT pour am?liorer la qualit?"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1015
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1070
 msgid "4x4 Intra search"
 msgstr "Recherche Intra 4x4"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1018
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1073
 msgid "Further enable DCT Intra block search to improve quality"
-msgstr ""
-"Autorise la recherche des blocs Intra DCT pour am?liorer encore plus la "
-"qualit?"
+msgstr "Autorise la recherche des blocs Intra DCT pour am?liorer encore plus la qualit?"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1021
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1076
 msgid "<b>Partition Macroblocks</b>"
-msgstr "<p>Macro-blocs de partition</b>"
+msgstr "<b>Macro-blocs de partition</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1043
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1100
 msgid "Bias"
 msgstr "Polarisation"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1056
-msgid ""
-"Increase / decrease probability for how often B-frames are used. Will not "
-"violate the maximum consecutive frame limit"
-msgstr ""
-"Augmente/diminue la probabilit? d'utilisation des images-B. Sans violation "
-"de la limite max du nombre d'images cons?cutives"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1065
-msgid ""
-"Set the maximum number of consecutive B-frames. This defines how many "
-"duplicate frames can be droped. Numbers 2 to 5 are recommended. This greatly "
-"improves the use of bitrate and quality"
-msgstr ""
-"D?fini le nombre max d'images-B cons?cutives. Ceci d?fini combien d'images "
-"dupliqu?es seront ?limin?es. Une valeur entre 2 et 5 est recommand?e. Ceci "
-"am?liore grandement le bitrate et la qualit?"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1068
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1107
 msgid "Max Consecutive"
 msgstr "Max cons?cutives"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1079
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1120
+#, fuzzy
+msgid "Increase / decrease probability for how often B-frames are used. It will not violate the maximum consecutive frame limit."
+msgstr "Augmente/diminue la probabilit? d'utilisation des images-B. Sans violation de la limite max du nombre d'images cons?cutives"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1129
+#, fuzzy
+msgid "Set the maximum number of consecutive B-frames. This defines how many duplicate frames can be dropped. Numbers 2 to 5 are recommended. This greatly improves the use of bitrate and quality."
+msgstr "D?fini le nombre max d'images-B cons?cutives. Ceci d?fini combien d'images dupliqu?es seront ?limin?es. Une valeur entre 2 et 5 est recommand?e. Ceci am?liore grandement le d?bit et la qualit?"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1143
 msgid "Bidirectional ME"
 msgstr "ME bidirectionnel"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1084
-msgid ""
-"Jointly optimize both Motion Vector's in B-frames. This will improve quality "
-"but take more time for encoding"
-msgstr ""
-"Optimise les vecteurs de mouvement dans les images-B. Ceci am?liore la "
-"qualit? mais prend plus de temps ? l'encodage"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1148
+#, fuzzy
+msgid "Optimise both motion vectors in B-frames. This will improve quality but take more time for encoding."
+msgstr "Optimise les vecteurs de mouvement dans les images-B. Ceci am?liore la qualit? mais prend plus de temps ? l'encodage"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1086
-msgid "Weighted biprediction"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1150
+msgid "Weighted Biprediction"
 msgstr "Bi-pr?diction pond?r?e"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1091
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1155
 msgid "Enables weighting of B-frames to help fades"
 msgstr "Autorise la pond?ration des images-B pour am?liorer les fondus"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1094
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1158
 msgid "Adaptative DCT"
 msgstr "DCT adaptative"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1099
-msgid ""
-"Use fewer B-frame if needed. This is always recommended. If not enabled, the "
-"codec will always use the maximum number of consecutive B-frames"
-msgstr ""
-"Utilise moins d'images-B. Ceci est toujours recommand?. Si ceci n'est pas "
-"valid?, le codec utilisera toujours le nombre max d'images-B cons?cutives"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1163
+msgid "Use fewer B-frames if needed. This is always recommended. If not enabled, the codec will always use the maximum number of consecutive B-frames."
+msgstr "Utilise moins d'images-B. Ceci est toujours recommand?. Si ce n'est pas activ?, le codec utilisera toujours le nombre maximum d'images-B cons?cutives"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1102
-msgid "Use as reference"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1166
+msgid "Use as Reference"
 msgstr "Utilise comme r?f?rence"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1107
-msgid ""
-"Allow B-frames to make references non-linearly to another B-frame (instead "
-"of creating a duplicate copy)"
-msgstr ""
-"Permet aux images-B de faire des r?f?rences non-lin?aires ? d'autres images-"
-"B (au lieu de cr?er des copies)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1171
+msgid "Allow B-frames to make references non-linearly to another B-frame (instead of creating a duplicate copy)"
+msgstr "Permet aux images-B de faire des r?f?rences non-lin?aires ? d'autres images-B (au lieu de cr?er des copies)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1113
-msgid "B-Frame Direct Mode:  "
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1177
+#, fuzzy
+msgid "B-Frame Direct Mode"
 msgstr "Mode image-B direct?:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1121
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1185
 msgid "Auto"
 msgstr "Auto"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1122
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1186
 msgid "Temporal"
 msgstr "Temporal"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1123
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1187
 msgid "Spatial"
 msgstr "Spatial"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1126
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1190
 msgid "<b>B-Frames</b>"
 msgstr "<b>Images-B</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1131
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1195
 msgid "Partitions & Frames"
 msgstr "Images & Partitions"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1159
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1230
 msgid "Set how much \"bitrate bonus\" a keyframe can get"
-msgstr "D?fini le ??bonus de bitrate?? qu'une image-cl? peut avoir"
+msgstr "D?fini le ??bonus de d?bit?? qu'une image-cl? peut avoir"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1162
-msgid "Keyframe boost (%)"
-msgstr "Boost image-cl? (%)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1239
+msgid "Set how much bitrate is deducted from a B-frame as compared to the previous P-frame"
+msgstr "Indiquer combien est d?duit du d?bit d'une image-B par rapport ? l' image-P pr?c?dente"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1169
-msgid "B-frame reduction (%)"
-msgstr "R?duction image-B (%)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1248
+#, fuzzy
+msgid "Define how much the bitrate can fluctuate over the entire video. 0% results in a constant bitrate stream, while 100% results in a pure quality based bitrate stream."
+msgstr "D?finir de combien le d?bit peut flotter au-dessus de la vid?o enti?re. 0% a comme cons?quence un flux de d?bit constant alors que les r?sultats de 100% est une qualit? pure bas?e sur le flux de d?bit"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1176
-msgid "Bitrate variability (%)"
-msgstr "Variabilit? bitrate (%)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1251
+#, fuzzy
+msgid "Keyframe Boost (%)"
+msgstr "Boost image-cl? (%)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1189
-msgid ""
-"Set how much bitrate is deducted from a B-frame as compared to the previous "
-"P-frame"
-msgstr ""
-"Indiquer combien est d?duit du bitrate d'une frame-B par rapport ? la frame-"
-"P pr?c?dente"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1258
+#, fuzzy
+msgid "B-frame Reduction (%)"
+msgstr "R?duction des images-B (%)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1198
-msgid ""
-"Define how much the bitrate can fluctuate over the entire video. 0% results "
-"in a constant bitrate stream, while 100% results in a pure quality based "
-"bitrate stream"
-msgstr ""
-"D?finir combien le bitrate peut flotter au-dessus de la vid?o enti?re. 0% a "
-"comme cons?quence un flux constant du bitrate, alors que les r?sultats de "
-"100% est une qualit? pure bas?e sur le flux du bitrate"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1265
+msgid "Bitrate Variability (%)"
+msgstr "Variabilit? du d?bit (%)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1201
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1272
 msgid "<b>Bitrate</b>"
 msgstr "<b>Bitrate</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1219
-msgid "Min Qp"
-msgstr "Min Qp"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1292
+msgid "Min QP"
+msgstr "Qp min."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1226
-msgid "Max Qp"
-msgstr "Max Qp"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1299
+msgid "Max QP"
+msgstr "Qp max."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1233
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1306
 msgid "Max QP Step"
 msgstr "Max QP Step"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1247
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1320
 msgid "Enforce a minimum quantizer level"
 msgstr "Imposer un niveau minimum de quantificateur"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1256
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1329
 msgid "Enforce a maximum quantizer level"
 msgstr "Imposer un niveau maximum de quantificateur"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1265
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1338
 msgid "Define how much the quantizer rate can change between two consecutive frames"
-msgstr ""
-"D?finir combien le taux de quantificateur peut changer entre deux frames "
-"cons?cutives"
+msgstr "D?finir de combien le taux de quantificateur peut changer entre deux images cons?cutives"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1268
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1341
 msgid "<b>Quantization Limits</b>"
 msgstr "<b>Limites de quantification</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1286
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1368
+#, fuzzy
+msgid "Increase / decrease sensitivity for detecting scene changes. Improves I-frame usage and quality."
+msgstr "Augmenter/ Diminuer la sensibilit? pour d?tecter des changements de sc?ne pour compenser. Am?liore l'utilisation des images-I et aide la qualit?"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1371
 msgid "Scene Cut Threshold"
 msgstr "Seuil de coupe de sc?ne"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1300
-msgid ""
-"Increase / decrease sensitivity for detecting Scene Changes to compensate "
-"for. Improves I-frame usage and helps quality"
-msgstr ""
-"Augmenter/ Diminuer la sensibilit? pour d?tecter des changements de sc?ne "
-"pour compenser. Am?liore l'utilisation de trame I et aide la qualit?"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1378
+#, fuzzy
+msgid "Min IDR Frame Interval"
+msgstr "Intervalle min image IDR "
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1303
-msgid "Min IDR frame interval"
-msgstr "Interval min image IDR "
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1391
+#, fuzzy
+msgid "Set minimum frame interval between IDR frames. Defines the minimum amount a frame can be reused and referenced by other frames before a new IDR frame is established."
+msgstr "Placer l'intervalle minimum d'image entre les images IDR. D?finit la quantit? minimum qu'une image peut ?tre r?utilis?e et r?f?renc? par d'autres armatures avant qu'un nouveau nettoyage on est ?tabli"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1316
-msgid ""
-"Set minimum frame interval between IDR frames. Defines the minimum amount a "
-"frame can be reused and referenced by other frames before a new clean one is "
-"established"
-msgstr ""
-"Placer l'intervalle minimum d'image entre les images IDR. D?finit la "
-"quantit? minimum qu'une image peut ?tre r?utilis?e et r?f?renc? par d'autres "
-"armatures avant qu'un nouveau nettoyage on est ?tabli"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1400
+#, fuzzy
+msgid "Set maximum frame interval between IDR frames. Defines the maximum amount a frame can be reused and referenced by other frames before a new IDR frame is established."
+msgstr "Placer l'intervalle minimum d'image entre les images IDR. D?finit la quantit? minimum qu'une image peut ?tre r?utilis?e et r?f?renc? par d'autres armatures avant qu'un nouveau nettoyage on est ?tabli"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1325
-msgid ""
-"Set maximum frame interval between IDR frames. Defines the maximum amount a "
-"frame can be reused and referenced by other frames before a new clean one is "
-"established"
-msgstr ""
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1328
-msgid "Max IDR frame interval"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1403
+#, fuzzy
+msgid "Max IDR Frame Interval"
 msgstr "Intervalle max image-IDR"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1335
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1410
 msgid "<b>More Rate Settings</b>"
-msgstr "<b>R?glages bitrate avanc?s</b>"
+msgstr "<b>R?glage avanc?s du d?bit</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1353
-msgid "VBV buffer size"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1430
+#, fuzzy
+msgid "VBV Buffer Size"
 msgstr "Taille buffer VBV"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1360
-msgid "Initial VBV buffer (%)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1437
+#, fuzzy
+msgid "Initial VBV Buffer (%)"
 msgstr "Buffer VBV initial (%)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1367
-msgid "Maximum local bitrate"
-msgstr "Bitrate maximum local"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1444
+#, fuzzy
+msgid "Maximum Local Bitrate"
+msgstr "D?bit maximum local"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1398
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1475
 msgid "<b>Video Buffer Verifier</b>"
 msgstr "<b>V?rifieur Buffer Vid?o</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1430
-msgid ""
-"Allowed variance of average bitrate. Lower values mean less variance. Higher "
-"values mean more variance."
-msgstr ""
-"Variabilit? du bitrate moyen est autoris?. Des valeurs plus basses "
-"signifient moins de permissions. Des valeurs plus ?lev?es signifient plus de "
-"permissions."
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1433
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1508
 msgid "Bitrate Variance"
 msgstr "Bitrate Variance"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1446
-msgid ""
-"Allowed variance of average quantizer or quality. Lower values mean less "
-"variance. Higher values mean more variance. Note that 0 means constant "
-"quality while 1 means constant fluctuation. Recommended 0.6."
-msgstr ""
-"Variabilit? du quantificateur moyen ou de la qualit? est permis. Des valeurs "
-"plus basses signifient moins de permissions. Des valeurs plus ?lev?es "
-"signifient plus de permissions. Noter que 0 signifie qualit? constante "
-"tandis que 1 signifie une fluctuation constante. 0.6 recommand?."
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1521
+msgid "Allowed variance of average bitrate. Lower values mean less variance. Higher values mean more variance."
+msgstr "Variabilit? du d?bit moyen est autoris?. Des valeurs plus basses signifient moins de permissions. Des valeurs plus ?lev?es signifient plus de permissions."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1455
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1530
+msgid "Allowed variance of average quantizer or quality. Lower values mean less variance. Higher values mean more variance. Note that 0 means constant quality while 1 means constant fluctuation. Recommended 0.6."
+msgstr "Variabilit? du quantificateur moyen ou de la qualit? est permis. Des valeurs plus basses signifient moins de permissions. Des valeurs plus ?lev?es signifient plus de permissions. Noter que 0 signifie qualit? constante tandis que 1 signifie une fluctuation constante. 0.6 recommand?."
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1539
 msgid "Reduced fluctuations in Quantizer (before curve compression)"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1464
-msgid "Reduce fluctuations in QP (after curve compression)"
-msgstr ""
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1467
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1550
 msgid "Quantizer Compression"
 msgstr "Compression du quantificateur"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1474
-msgid "Temp. Blur of est Frame Complexity"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1557
+msgid "Temp. Blur of Est. Frame Complexity"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1481
-msgid "Temp. Blur of Quant after CC"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1564
+msgid "Temp. Blur of Quant. after CC"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1488
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1571
 msgid "<b>Misc</b>"
 msgstr "<b>Divers</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1512
-msgid "Quantization factors used between I- and P- frames"
-msgstr ""
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1597
+#, fuzzy
+msgid "Quantization factors used between I and P-frames"
+msgstr "Facteurs de quantification utilis? entre les images-I et les images-P"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1521
-msgid "Quantization used between P- and B- frames"
-msgstr ""
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1606
+#, fuzzy
+msgid "Quantization used between P and B-frames"
+msgstr "Quantification utilis? entre les images-P et les images-B"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1530
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1615
 msgid "Quantization difference between chroma (color) and luma (brightness)"
-msgstr ""
+msgstr "Diff?rence de quantification entre le chrominance (couleur) et la luminance (luminosit?)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1533
-msgid "Factor between I and P frame Quants"
-msgstr ""
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1618
+#, fuzzy
+msgid "Factor between I and P-frame Quants"
+msgstr "Facteur de quantification entre les images-I et les images-P"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1540
-msgid "Factor between P and B frame Quants"
-msgstr ""
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1625
+#, fuzzy
+msgid "Factor between P and B-frame Quants"
+msgstr "Facteur de quantification entre les images-P et les images-B"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1547
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1632
+#, fuzzy
 msgid "Chroma QP Offset"
-msgstr "Offset Chroma QP"
+msgstr "D?calage de la chrominance et du QP"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1554
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1639
 msgid "<b>Quantizers</b>"
-msgstr "<b>Quantiseur</b>"
+msgstr "<b>Quantificateur</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1572
-msgid "Custom matrix"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1657
+#, fuzzy
+msgid "Flat Matrix"
+msgstr "Matrice ? plat"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1664
+#, fuzzy
+msgid "JVT Matrix"
+msgstr "Matrice JVT"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1674
+msgid "Custom Matrix"
 msgstr "Matrice personnalis?e"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1581
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1684
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1128
 msgid "Open CQM file"
 msgstr "Ouvrir un fichier CQM"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1587
-msgid "JVT matrix"
-msgstr "Matrice JVT"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1595
-msgid "Flat matrix"
-msgstr ""
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1604
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1692
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1136
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1568
 msgid "Edit Custom Matrix"
 msgstr "Editer la matrice personnalis?e"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1609
-msgid "Edit a loaded custom quantization matrix file"
-msgstr "Editer fichier de matrice personnalis?e"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1695
+msgid "Edit loaded custom quantization matrix file"
+msgstr "Editer le fichier charg? de matrice personnalis?e de quantification"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1617
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1697
 msgid "<b>Quantization Matrices</b>"
-msgstr "<b>Quantification Matrices</b>"
+msgstr "<b>Matrices de quantification</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1622
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1702
 msgid "More"
 msgstr "Plus"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1630
-msgid "Defaults"
-msgstr "D?fauts"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1710
+#, fuzzy
+msgid "_Defaults"
+msgstr "_D?fauts"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:237
 msgid "Xvid Encoder"
@@ -4239,15 +5024,15 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:266
 msgid "Dual pass (MBytes)"
-msgstr "Double passe (Moctets)"
+msgstr "Double passe (Mo)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:292
 msgid "Basic"
-msgstr "Basic"
+msgstr "Basique"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:301
 msgid "Motion Search"
-msgstr "Recherche mouvement"
+msgstr "Recherche du mouvement"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:317
 msgid "Max I frame interval "
@@ -4288,7 +5073,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:395
 msgid "H263 Quantizer"
-msgstr "H263 Quantizer"
+msgstr "H.263 Quantizer"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:400
 msgid "MPEG Quantizer"
@@ -4299,8 +5084,9 @@
 msgstr "Avanc?"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:416
+#, fuzzy
 msgid "Min I Frame Qzer"
-msgstr "Min image-I  Qzer"
+msgstr "Min image-I Qfer"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:424
 msgid "Max I Frame Qzer"
@@ -4314,10 +5100,6 @@
 msgid "Max P Frame Qzer"
 msgstr "Max image-P Qfer"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:480
-msgid "Quantizer"
-msgstr "Quantificateur"
-
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:485
 msgid "Not Yet!"
 msgstr "Pas encore!"
@@ -4348,20 +5130,20 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:179
 msgid "Size (MBytes):"
-msgstr ""
+msgstr "Taille (Mo) :"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:185
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:369
 msgid "Average bitrate (kb/s):"
-msgstr ""
+msgstr "D?bit moyen (kb/s) :"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:354
 msgid "Target bitrate (kb/s):"
-msgstr ""
+msgstr "D?bit cible (kb/s) :"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:362
-msgid "Target size (MBytes):"
-msgstr ""
+msgid "Target video size (MB):"
+msgstr "Taille de la vid?o cible (Mo) :"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:479
 msgid "Select Custom Matrix File to write"
@@ -4396,29 +5178,21 @@
 msgstr "Choisir encodage 1 ou 2 passe(s)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:760
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:123
-msgid "Single pass - bitrate"
-msgstr "Une passe - Bitrate"
+msgid "Single Pass - Bitrate"
+msgstr "Une passe - d?bit"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:764
-msgid "Single pass - quantizer"
+msgid "Single Pass - Quantizer"
 msgstr "Une passe - Quantificateur"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:768
-msgid "Two pass, final size"
-msgstr "Deux passes - Taille finale"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:772
-msgid "Two pass, average bitrate"
-msgstr "Deux passes - Bitrate moyen"
-
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:776
-msgid "Same Qz as input"
-msgstr "M?me Qz que l'entr?e"
+#, fuzzy
+msgid "Same Quantizer as Input"
+msgstr "M?me Qfer que l'entr?e"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:785
 msgid "Target video bitrate"
-msgstr "Bitrate vid?o de la cible"
+msgstr "D?bit vid?o cible"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:792
 msgid "Constant quantizer - each frame will get the same compression"
@@ -4426,23 +5200,19 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:794
 msgid "Variable bitrate mode"
-msgstr "Mode Bitrate variable"
+msgstr "Mode d?bit variable"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:806
 msgid "_Interlaced"
 msgstr "_Entrelac?"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:809
-msgid ""
-"Enables interlaced frame support - use only if your source contains "
-"interlacing artifacts (i.e. fields instead of progressive frames)"
-msgstr ""
-"Permet le support d'images entrelac?es - utiliser seulement si votre fichier "
-"source contient des art?facts d'entrelacement"
+msgid "Enables interlaced frame support - use only if your source contains interlacing artifacts (i.e. fields instead of progressive frames)"
+msgstr "Permet le support d'images entrelac?es - utiliser seulement si votre fichier source contient des art?facts d'entrelacement"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:811
 msgid "_Greyscale"
-msgstr "_Niveaux de gris"
+msgstr "Niveaux de _gris"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:814
 msgid "Encode in black & white"
@@ -4454,15 +5224,15 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:823
 msgid "Enables special motion estimation features for cartoons/anime"
-msgstr "Permet l'option d'estimation sp?ciale des mouvement pour les cartoons/anime"
+msgstr "Permet l'option d'estimation sp?ciale de mouvement pour les cartoons/anime"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:825
 msgid "C_hroma optimizer"
-msgstr "Optimiseur de C_hroma"
+msgstr "Optimiseur de c_hroma"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:828
 msgid "Enables a chroma optimizer prefilter"
-msgstr "Permet l'utilisation en pr?-filtre d'un Optimiseur de chroma"
+msgstr "Permet l'utilisation en pr?-traitement d'un optimiseur de chrominance"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:834
 msgid "Turbo Mode"
@@ -4474,11 +5244,11 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:839
 msgid "Packed bitstream"
-msgstr "Packed bitstream"
+msgstr "Bitstream empaquet?"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:842
 msgid "Enables Divx like packed vop, DO NOT SET, it is ugly"
-msgstr "Permet Divx comme vop empaquet?, NE COCHEZ PAS, c'est laid"
+msgstr "Permet au DivX d'?tre comme un VOP empaquet? ; NE COCHEZ PAS, c'est horrible"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:844
 msgid "Main"
@@ -4490,13 +5260,11 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:867
 msgid "VHQ mode:"
-msgstr "Mode VHQ:?"
+msgstr "Mode VHQ :"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:880
 msgid "Higher settings give higher quality results, at the cost of slower encoding"
-msgstr ""
-"Plus les r?glages sont haut meilleur sera la qualit?, mais au prix d'un "
-"encodage plus lent"
+msgstr "Plus les r?glages sont haut meilleur sera la qualit?, mais au prix d'un encodage plus lent"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:888
 msgid "1 - Very low"
@@ -4548,11 +5316,11 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:947
 msgid "C_hroma motion"
-msgstr "Mouvement C_hroma"
+msgstr "Mouvement c_hroma"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:950
 msgid "Use chroma information to estimate motion"
-msgstr "Utiliser les informations chroma pour estimer le mouvement"
+msgstr "Utiliser les informations de chrominance pour estimer le mouvement"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:952
 msgid "_4MV"
@@ -4560,22 +5328,15 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:955
 msgid "Use 4 motion vectors per macroblock, might give better compression"
-msgstr ""
-"Utilise 4 vecteurs de mouvement par macroblock, devrait donner une meilleure "
-"compression"
+msgstr "Utilise 4 vecteurs de mouvement par macrobloc, devrait donner une meilleure compression"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:957
 msgid "HQ _AC"
 msgstr "HQ _AC"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:960
-msgid ""
-"Enable a better prediction of AC component. Turns on Lumi masking - applies "
-"more compression to dark/light areas that the eye cannot notice easily"
-msgstr ""
-"Permettre une meilleure pr?diction des composants AC. Met le masquage  Lumi "
-"- applique plus de compression aux secteurs sombres/l?gers que l'oeil ne "
-"peut pas remarquer facilement"
+msgid "Enable a better prediction of AC component. Turns on Lumi masking - applies more compression to dark/light areas that the eye cannot notice easily"
+msgstr "Permettre une meilleure pr?diction des composants AC. Met le masquage Lumi - applique plus de compression aux secteurs sombres/l?gers que l'?il ne peut pas remarquer facilement"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:966
 msgid "I-frame interval - Min:"
@@ -4601,12 +5362,8 @@
 msgstr "Nombre d'images-B?:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1007
-msgid ""
-"Maximum number of sequential B-frames (when set to 0, the original I/P "
-"encoder is used)"
-msgstr ""
-"Nombre maximal d'images-B s?quentielles (quand mis ? 0, l'encodeur original "
-"I/P est utilis?)"
+msgid "Maximum number of sequential B-frames (when set to 0, the original I/P encoder is used)"
+msgstr "Nombre maximal d'images-B s?quentielles (quand mis ? 0, l'encodeur original I/P est utilis?)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1013
 msgid "_Qpel"
@@ -4614,15 +5371,11 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1016
 msgid "Use Quarter pixel resolution for a more precise motion estimation"
-msgstr ""
-"Utilisation la r?solution de QuaterPixel  pour une ?valuation de mouvement "
-"plus pr?cise"
+msgstr "Utilisation la r?solution de QuaterPixel pour une ?valuation de mouvement plus pr?cise"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1021
 msgid "Global Motion Compensation can save bits on camera pans, zooming and rotation"
-msgstr ""
-"La compensation de Mouvement Globale peut ?conomiser des bits sur des prises "
-"de cam?ra, zooms et rotations"
+msgstr "La Compensation Globale du Mouvement peut ?conomiser des bits sur des prises de cam?ra, zooms et rotations"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1023
 msgid "_BVHQ"
@@ -4632,21 +5385,30 @@
 msgid "Produces nicer-looking B-frames"
 msgstr "Produit des images-B plus jolies"
 
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1040
+#, fuzzy
+msgid "As input"
+msgstr "Entr?e"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1043
+msgid "Get PAR from input video file"
+msgstr "R?cup?re le rapport H/L de la vid?o d'entr?e"
+
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1049
 msgid "Pixel Width"
-msgstr "Largeur Pixel"
+msgstr "Largeur des pixels"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1060
 msgid "Pixel Height"
-msgstr "Hauteur Pixel"
+msgstr "Hauteur des pixels"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1061
 msgid "Pixel Aspect Ratio"
-msgstr "Ratio Pixel"
+msgstr "Rapport H/L"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1079
 msgid "Quantization type:"
-msgstr "Type Quantization?:"
+msgstr "Type de quantification?:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1083
 msgid "_H.263"
@@ -4654,23 +5416,19 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1086
 msgid "H.263 quantizers smooth the picture (useful at lower bitrates)"
-msgstr "Les quantificateurs H263 lissent l'image (utile ? plus bas bitrates)"
+msgstr "Les quantificateurs H.263 lissent l'image (utile ? plus bas d?bit)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1090
 msgid "_MPEG"
 msgstr "_MPEG"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1093
-msgid ""
-"MPEG quantizers (slightly slower) produce sharper picture (useful at higher "
-"bitrates)"
-msgstr ""
-"Les quantificateurs MPEG (l?g?rement plus lent) produisent une image plus "
-"aigu? (utile ? plus haut bitrates)"
+msgid "MPEG quantizers (slightly slower) produce sharper picture (useful at higher bitrates)"
+msgstr "Les quantificateurs MPEG (l?g?rement plus lent) produisent une image plus aigu? (utile ? plus haut d?bit)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1097
 msgid "_Custom Matrix"
-msgstr "_Matrice personnalis?e"
+msgstr "Matrice _personnalis?e"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1107
 msgid "Load Custom Matrix:  "
@@ -4690,7 +5448,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1176
 msgid "Minimum quantizer allowed for I-frames"
-msgstr "Quantificateur minimum autoris? pour les images I"
+msgstr "Quantificateur minimum autoris? pour les images-I"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1182
 msgid "Minimum quantizer allowed for P-frames"
@@ -4702,7 +5460,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1217
 msgid "Maximum quantizer allowed for I-frames"
-msgstr "Quantificateur maximum autoris? pour les images I"
+msgstr "Quantificateur maximum autoris? pour les images-I"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1223
 msgid "Maximum quantizer allowed for P-frames"
@@ -4718,9 +5476,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1238
 msgid "Rate distortion quantization, will find optimal encoding for each block"
-msgstr ""
-"La quantification d'alt?ration de taux, trouvera le codage optimal pour "
-"chaque bloc"
+msgstr "La quantification d'alt?ration de taux, trouvera le codage optimal pour chaque bloc"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1268
 msgid "I-frame boost (%):"
@@ -4748,38 +5504,20 @@
 msgstr ""
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1306
-msgid ""
-"I-frames appearing in the range below this value will be treated as "
-"consecutive keyframes"
-msgstr ""
-"Les images I de l'intervalle inf?rieur ? cette valeur seront tra?t?es comme "
-"des images-cl?s cons?cutives"
+msgid "I-frames appearing in the range below this value will be treated as consecutive keyframes"
+msgstr "Les images-I de l'intervalle inf?rieur ? cette valeur seront trait?es comme des images-cl?s cons?cutives"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1311
-msgid ""
-"Reduction of bitrate for the first consecutive I-frames. The last I-frame "
-"will get treated normally"
-msgstr ""
-"R?duction du bitrate pour les premi?res images I cons?cutives. La derni?re "
-"image-I sera tra?t?e normallement"
+msgid "Reduction of bitrate for the first consecutive I-frames. The last I-frame will get treated normally"
+msgstr "R?duction du d?bit pour les premi?res images-I cons?cutives. La derni?re image-I sera trait?e normalement"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1316
-msgid ""
-"How much of the overflow the codec can eat into during undersized sections - "
-"larger values will bridge the gap faster"
-msgstr ""
-"Valeur du d?bordement que le codec peut tra?ter pour les sections sous-"
-"dimensionn?es - une valeur plus grande permettra de combler le trou plus "
-"rapidement"
+msgid "How much of the overflow the codec can eat into during undersized sections - larger values will bridge the gap faster"
+msgstr "Valeur du d?bordement que le codec peut traiter pour les sections sous-dimensionn?es - une valeur plus grande permettra de combler le trou plus rapidement"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1321
-msgid ""
-"How much of the overflow the codec can eat into during oversized sections - "
-"larger values will bridge the gap faster"
-msgstr ""
-"Valeur du d?bordement que le codec peut tra?ter pour les sections sur-"
-"dimensionn?es - une valeur plus grande permettra de combler le trou plus "
-"rapidement"
+msgid "How much of the overflow the codec can eat into during oversized sections - larger values will bridge the gap faster"
+msgstr "Valeur du d?bordement que le codec peut traiter pour les sections surdimensionn?es - une valeur plus grande permettra de combler le trou plus rapidement"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1323
 msgid "Two pass tuning"
@@ -4787,39 +5525,27 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1340
 msgid "High bitrate scenes (%):"
-msgstr "Sc?nes ? haut bitrate (%)?:"
+msgstr "Sc?nes ? haut d?bit (%)?:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1345
 msgid "Low bitrate scenes (%):"
-msgstr "Sc?nes ? bas bitrate (%)?:"
+msgstr "Sc?nes ? bas d?bit (%)?:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1350
 msgid "Overflow control strength (%):"
 msgstr "Puissance du contr?le du d?bordement (%)?:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1362
-msgid ""
-"The higher this value, the more bits get taken from frames larger than the "
-"average size, and redistributed to others"
-msgstr ""
-"Plus cette valeur est ?lev?e, plus le nombre de bits pris des images plus "
-"larges que la taille moyenne sera ?lev?, et redistribu? aux autres images"
+msgid "The higher this value, the more bits get taken from frames larger than the average size, and redistributed to others"
+msgstr "Plus cette valeur est ?lev?e, plus le nombre de bits pris des images plus larges que la taille moyenne sera ?lev?, et redistribu? aux autres images"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1367
-msgid ""
-"The higher this value, the more bits get assigned to frames below the "
-"average frame size"
-msgstr ""
-"Plus cette valeur est ?lev?e, plus le nombre de bits pris des images plus "
-"petites que la taille moyenne sera ?lev?"
+msgid "The higher this value, the more bits get assigned to frames below the average frame size"
+msgstr "Plus cette valeur est ?lev?e, plus le nombre de bits pris des images plus petites que la taille moyenne sera ?lev?"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1372
-msgid ""
-"0 = default from core (let XviD decide), else overflow payback percent per "
-"frame"
-msgstr ""
-"0 = d?faut (laisser XviD d?cider), sinon valeur du pourcentage de "
-"d?bordement par image"
+msgid "0 = default from core (let XviD decide), else overflow payback percent per frame"
+msgstr "0 = d?faut (laisser XviD d?cider), sinon valeur du pourcentage de d?bordement par image"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1374
 msgid "Curve compression"
@@ -4843,48 +5569,52 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:99
 msgid "_Encoding mode:"
-msgstr ""
+msgstr "Mode d'_encodage :"
 
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:123
+msgid "Single pass - bitrate"
+msgstr "Une passe - d?bit"
+
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:125
 msgid "Single pass - constant quality"
-msgstr ""
+msgstr "Une passe - qualit? constante"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:127
 msgid "Single pass - same qz as input"
-msgstr ""
+msgstr "Passe seule - m?me quantificateur qu'en entr?e"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:129
 msgid "Single pass - Average quantizer"
-msgstr ""
+msgstr "Passe seule - Quantificateur moyen"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:132
 msgid "Two pass - video size"
-msgstr ""
+msgstr "Deux passes - taille de la vid?o"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:134
 msgid "Two pass - average bitrate"
-msgstr ""
+msgstr "Deux passes - d?bit variable"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:273
 #: avidemux/ADM_videoFilter/ADM_vidForcedPP.cpp:61
 msgid "_Quantizer:"
-msgstr "_Quantifiseur?:"
+msgstr "_Quantificateur :"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:278
 msgid "A_vg Quantizer:"
-msgstr ""
+msgstr "Quantificateur _moyen :"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:283
 msgid "_Video size (MB):"
-msgstr ""
+msgstr "Taille de la _vid?o (Mo) :"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:288
 msgid "_Average bitrate (kb/s):"
-msgstr ""
+msgstr "D?bit _moyen (kb/s) :"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:293
 msgid "-"
-msgstr ""
+msgstr "-"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_hex.cpp:100
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_hex.cpp:134
@@ -4898,11 +5628,11 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_threadCount.cpp:75
 msgid "Disable"
-msgstr ""
+msgstr "D?sactiver"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_threadCount.cpp:79
 msgid "Auto-detect"
-msgstr ""
+msgstr "Auto-d?tection"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filterlist.cpp:64
 msgid "Add Video Filter"
@@ -4922,10 +5652,6 @@
 msgid "Colors"
 msgstr "Couleurs"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filterlist.cpp:173
-msgid "Denoise"
-msgstr "D?bruiter"
-
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filterlist.cpp:198
 msgid "Sharpen/Blur"
 msgstr "Nettet?/Flou"
@@ -5097,534 +5823,538 @@
 msgid "Save as script"
 msgstr "Enregistrer en script"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp:432
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp:545
 msgid "Side"
 msgstr "Face"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp:433
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp:546
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:90
 #: avidemux/ADM_videoFilter/ADM_vidDGbob.cpp:81
 #: avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp:87
 #: avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp:109
 msgid "Top"
-msgstr "Haut"
+msgstr "Paire"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp:434
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp:547
 msgid "Separate"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp:608
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp:721
 #, c-format
 msgid "Frame:%c(%02d)"
 msgstr "Image?: %c(%02d)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:297
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:298
 msgid "_Open..."
-msgstr "_Ouvrir une vid?o..."
+msgstr "_Ouvrir..."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:308
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:309
 msgid "_Append..."
-msgstr "_Ajouter une vid?o..."
+msgstr "_Ajouter..."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:319
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:320
 msgid "_Save"
 msgstr "_Enregistrer"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:330
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:331
 msgid "Save _Video..."
 msgstr "_Enregistrer une vid?o..."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:342
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:343
 msgid "Save _BMP Image..."
-msgstr "Sauver en image _BMP..."
+msgstr "Enregistrer en image _BMP..."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:346
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:347
 msgid "Save _JPEG Image..."
-msgstr "Sauver en image _JPEG..."
+msgstr "Enregistrer en image _JPEG..."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:350
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:351
 msgid "Save _Selection as JPEG Images..."
-msgstr "Sauver la s?lection en images JPEG..."
+msgstr "Enregistrer la _s?lection en images JPEG..."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:363
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:364
 msgid "Save _Project"
-msgstr "Enregistrer _Projet"
+msgstr "Enregistrer le _projet"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:371
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:372
 msgid "Save P_roject As..."
-msgstr "Enregistrer le P_rojet sous..."
+msgstr "Enregistrer le p_rojet sous..."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:379
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:380
 msgid "_Load/Run Project..."
-msgstr "_Charger/Lancer un Projet..."
+msgstr "_Charger/Lancer un projet..."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:387
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:388
 msgid "A_dd to Joblist..."
 msgstr "A_jouter ? la liste des t?ches..."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:391
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:392
 msgid "Show _Joblist"
-msgstr "Montrer _la liste des t?ches"
+msgstr "Montrer la liste des _t?ches"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:403
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:404
 msgid "Co_nnect to avsproxy"
 msgstr "Co_nnexion ? avsproxy"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:412
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:413
 msgid "Proper_ties"
-msgstr "Propri_?t?s (info) de la vid?o"
+msgstr "Propri?_t?s"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:423
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:424
 msgid "AVI _Muxer Options"
 msgstr "Options du _multiplexeur AVI"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:432
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:433
 msgid "_Quit"
 msgstr "_Quitter"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:443
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:444
 msgid "_Edit"
 msgstr "_Editer"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:450
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:451
 msgid "_Reset Edits"
-msgstr "_RAZ du job"
+msgstr "_R?initialiser les ?ditions"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:463
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:464
 msgid "Cu_t"
-msgstr "Co_uper"
+msgstr "Coup_er"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:474
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:475
 msgid "_Copy"
-msgstr "_Copier"
+msgstr "Co_pier"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:485
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:486
 msgid "_Paste"
-msgstr "_Coller"
+msgstr "C_oller"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:496
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:497
 msgid "_Delete"
 msgstr "_Supprimer"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:512
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:513
 msgid "Set Marker _A"
 msgstr "Marqueur _A"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:519
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:520
 msgid "Set Marker _B"
 msgstr "Marqueur _B"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:531
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:532
 msgid "Pre_ferences"
 msgstr "Pr?_f?rences"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:539
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:540
 msgid "_View"
 msgstr "_Affichage"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:546
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:547
 msgid "_Main Toolbar"
-msgstr "_Barre Principale"
+msgstr "Barre _principale"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:551
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:552
 msgid "_A/V Sidebar"
-msgstr "_Barre audio/vid?o"
+msgstr "Barre _audio/vid?o"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:561
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:562
 msgid "_Zoom 1:4"
 msgstr "_Zoom 1:4"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:568
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:569
 msgid "Z_oom 1:2"
 msgstr "Z_oom 1:2"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:575
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:576
 msgid "Zoom _1:1"
 msgstr "Zoom _1:1"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:582
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:583
 msgid "Zoom _2:1"
 msgstr "Zoom _2:1"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:589
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:590
 msgid "Vi_deo"
 msgstr "Vi_d?o"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:596
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:597
 msgid "_Decoder Options"
-msgstr "_Options du d?codeur"
+msgstr "Options du _d?codeur"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:603
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:604
 msgid "_Postprocessing"
-msgstr "_Post-Traitement"
+msgstr "_Post-traitement"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:606
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:607
 msgid "Select postprocessing level"
 msgstr "Choisir le niveau de post-traitement"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:616
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:617
 msgid "P_review"
 msgstr "A_per?u"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:623
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:624
 msgid "Display _Output"
-msgstr "Afficher dans la _fen?tre principale"
+msgstr "Afficher la _sortie"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:635
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:636
 msgid "_Frame Rate"
 msgstr "_Fr?quence d'image"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:639
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:688
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:640
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:689
 msgid "_Encoder"
 msgstr "_Encodeur"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:646
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:647
 msgid "Fil_ters"
 msgstr "Fil_tres"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:653
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:654
 msgid "_Audio"
 msgstr "_Audio"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:660
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:661
 msgid "_Main Track"
-msgstr "_Piste Principale"
+msgstr "Piste _principale"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:664
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:665
 msgid "_Second Track"
-msgstr "_Seconde piste audio"
+msgstr "Piste _secondaire"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:668
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:669
 msgid "_Build VBR Time Map"
-msgstr "_Construire le Time Map VBR"
+msgstr "_Construire l'index temporel VBR"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:677
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:678
 msgid "S_ave..."
-msgstr "E_nregistrer"
+msgstr "E_nregistrer..."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:695
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:696
 msgid "_Filters"
 msgstr "_Filtres"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:699
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:700
 msgid "_Tools"
 msgstr "_Outils"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:706
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:707
 msgid "_Calculator"
 msgstr "_Calculatrice"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:722
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:723
 msgid "_Rebuild Frames (I & B)"
-msgstr "_Reconstuire images (I?&?B)"
+msgstr "_Reconstruire les images (I & B)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:726
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:727
 msgid "C_heck Frames (slow)"
 msgstr "V_?rifier toutes les images (lent)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:730
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:731
 msgid "_Bitrate Histogram"
-msgstr "_Histogramme de bitrate"
+msgstr "Histogramme du _d?bit"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:734
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:735
 msgid "_Scan for Black Frames..."
 msgstr "_Chercher l'image noire suivante..."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:743
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:744
 msgid "_VOB -> VobSub"
 msgstr "_VOB -> VobSub"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:747
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:748
 msgid "_OCR (VobSub -> srt)"
 msgstr "_OCR (VobSub -> srt)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:751
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:752
 msgid "OCR (TS->srt)"
-msgstr ""
+msgstr "OCR (TS -> srt)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:755
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:756
 msgid "_Edit Glyph"
-msgstr ""
+msgstr "_Editer les symboles"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:764
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:765
 msgid "_Frame Hex Dump"
-msgstr ""
+msgstr "Dump hexad?cimal des _images"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:768
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:769
 msgid "A_uto"
 msgstr "A_uto"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:775
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:776
 msgid "_VCD"
 msgstr "_VCD"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:779
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:780
 msgid "_SVCD"
 msgstr "_SVCD"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:783
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:784
 msgid "_DVD"
 msgstr "_DVD"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:787
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:788
 msgid "_PSP"
 msgstr "_PSP"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:791
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:792
 msgid "PSP (_H.264)"
-msgstr "PSP ( H264)"
+msgstr "PSP (_ H.264)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:795
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:796
 msgid "F_LV"
-msgstr ""
+msgstr "F_LV"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:799
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:800
+msgid "IPOD (mpeg4)"
+msgstr "IPOD (MPEG4)"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:804
 msgid "_Go"
 msgstr "_Aller ?"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:806
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:811
 msgid "_Play/Stop"
 msgstr "_Lecture/Pause"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:817
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:822
 msgid "P_revious Frame"
-msgstr "I_mage pr?c?dente"
+msgstr "Image p_r?c?dente"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:828
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:833
 msgid "_Next Frame"
-msgstr "_Image suivante"
+msgstr "Image _suivante"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:839
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:844
 msgid "Pr_evious Intra Frame"
-msgstr "Im_age intra pr?c?dente"
+msgstr "Image-I pr?c?d_ente"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:850
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:855
 msgid "Next _Intra Frame"
 msgstr "Image _intra suivante"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:861
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:866
 msgid "Previou_s Black Frame"
-msgstr "Cherche_r l'image noire pr?c?dente"
+msgstr "Image noire _pr?c?dente"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:865
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:870
 msgid "Ne_xt Black Frame"
-msgstr "Cherch_er l'image noire suivante"
+msgstr "Image noire _suivante"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:869
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:874
 msgid "_First Frame"
 msgstr "_Premi?re image"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:880
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:885
 msgid "_Last Frame"
 msgstr "_Derni?re image"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:896
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:901
 msgid "Go to Marker _A"
 msgstr "Aller au marqueur _A"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:903
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:908
 msgid "Go to Marker _B"
 msgstr "Aller au marqueur _B"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:915
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:920
 msgid "Go to Fra_me..."
-msgstr ""
+msgstr "Aller ? l'i_mage..."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:926
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:931
 msgid "Go to _Time..."
-msgstr ""
+msgstr "Aller au _temps..."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:937
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:942
 msgid "_Custom"
 msgstr "_Personnalis?"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:941
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:946
 msgid "_Help"
 msgstr "_Aide"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:948
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:953
 msgid "_Built-in Support"
 msgstr "_Support int?gr? pour"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:952
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:957
 msgid "_About"
 msgstr "_A propos"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:970
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:975
 msgid "Open a file"
 msgstr "Ouvrir un fichier"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:980
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:985
 msgid "Save the file"
 msgstr "Enregistrer le fichier"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:986
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:991
 msgid "Audio/video file information"
 msgstr "Informations fichier audio/vid?o"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:997
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1002
 msgid "Bitrate/size calculator"
-msgstr "Calculatrice Bitrate/Taille"
+msgstr "Calculatrice d?bit/taille"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1076
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1116
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1081
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1121
 msgid "Copy"
 msgstr "Copie"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1081
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1086
 msgid "Configure video encoder"
 msgstr "Configurer l'encodeur vid?o"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1086
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1142
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1091
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1147
 msgid "Filters"
 msgstr "Filtres"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1089
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1094
 msgid "Video filters"
 msgstr "Filtres Vid?o"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1121
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1126
 msgid "Configure audio encoder"
 msgstr "Configurer l'encodeur audio"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1129
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1134
 msgid "Audio filters"
-msgstr "Filtres Audio"
+msgstr "Filtres audio"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1150
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1155
 msgid "Shift:"
 msgstr "D?calage?:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1153
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1158
 msgid "Enable time shift"
 msgstr "Permet le d?calage"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1159
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1164
 msgid "Audio/video time shift (ms)"
 msgstr "D?calage audio/vid?o (ms)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1166
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1171
 msgid "<b>Format</b>"
 msgstr "<b>Format</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1199
-msgid "<b>Selection</b>"
-msgstr "<b>S?lection</b>"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1204
+msgid "Frame: "
+msgstr "Image?: "
 
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1211
+msgid "Current frame"
+msgstr "Image actuelle"
+
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1216
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1224
-msgid " 0000000"
-msgstr " 0000000"
+msgid "/ 0000000"
+msgstr "/ 0000000"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1232
-msgid "A:"
-msgstr "A?:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1223
+msgid "Time: "
+msgstr "Temps?: "
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1239
-msgid "Go to marker A"
-msgstr "Aller au marqueur A"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1230
+msgid "Current time"
+msgstr "Temps actuel"
 
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1231
+msgid "00:00:00.000"
+msgstr "00:00:00.000"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1234
+msgid "/ 00:00:00,000"
+msgstr "/ 00:00:00,000"
+
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1241
-msgid "B:"
-msgstr "B?:"
+msgid "Frame: ?"
+msgstr "Image?: ?"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1248
-msgid "Go to marker B"
-msgstr "Aller au marqueur B"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1260
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1265
 msgid "Play"
 msgstr "Lecture"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1274
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1279
 msgid "Stop"
 msgstr "Stop"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1286
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1291
 msgid "Previous frame"
 msgstr "Image pr?c?dente"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1301
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1306
 msgid "Next frame"
 msgstr "Image suivante"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1316
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1321
 msgid "Previous keyframe"
 msgstr "Image-cl? pr?c?dente"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1331
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1336
 msgid "Next keyframe"
 msgstr "Image-cl? suivante"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1345
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1350
 msgid "Selection: start"
 msgstr "S?lection?: d?but"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1356
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1361
 msgid "Selection: end"
 msgstr "S?lection?: fin"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1367
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1372
 msgid "Previous black frame"
 msgstr "Image noire pr?c?dente"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1378
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1383
 msgid "Next black frame"
 msgstr "Image noire suivante"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1389
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1394
 msgid "First frame"
 msgstr "Premi?re image"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1400
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1405
 msgid "Last frame"
 msgstr "Derni?re image"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1422
-msgid "Frame: "
-msgstr "Image?: "
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1419
+msgid "<b>Selection</b>"
+msgstr "<b>S?lection</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1429
-msgid "Current frame"
-msgstr "Image courante"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1436
+msgid "B:"
+msgstr "B?:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1434
-msgid "/ 0000000"
-msgstr ""
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1443
+msgid "Go to marker B"
+msgstr "Aller au marqueur B"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1441
-msgid "Time: "
-msgstr "Temps?: "
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1445
+msgid "A:"
+msgstr "A?:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1448
-msgid "Current time"
-msgstr "Temps actuel"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1449
-msgid "00:00:00.000"
-msgstr "00:00:00.000"
-
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1452
-msgid "/ 00:00:00,000"
-msgstr ""
+msgid "Go to marker A"
+msgstr "Aller au marqueur A"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1459
-msgid "Frame: ?"
-msgstr "Image?: ?"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1454
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1462
+msgid " 0000000"
+msgstr " 0000000"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:53
 msgid "Select GlyphFile to edit"
-msgstr ""
+msgstr "S?lectionner le fichier de symboles ? ?diter"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:121
 msgid "String"
-msgstr ""
+msgstr "Cha?ne de caract?re"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:123
 msgid "Search string"
-msgstr ""
+msgstr "Recherche de la cha?ne de caract?re"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:149
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:192
@@ -5635,7 +6365,7 @@
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:192
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:216
 msgid "No more glyphs"
-msgstr ""
+msgstr "Plus aucun symbole"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:216
 msgid "Head reached"
@@ -5647,11 +6377,11 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:396
 msgid "Prev. Empty"
-msgstr ""
+msgstr "Pr?c?dent vide"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:418
 msgid "Next Empty"
-msgstr ""
+msgstr "Prochain vide"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_ocr.cpp:181
 msgid "Sure ?"
@@ -5663,41 +6393,48 @@
 msgid "Couldn't find pixmap file: %s"
 msgstr "Impossible de trouver le fichier d'image?: %s"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp:103
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp:204
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp:467
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp:100
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp:201
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp:469
 msgid "Cannot open directory as a file"
-msgstr "Impossible d'ouvrir le r?pertoire en tant que fichier"
+msgstr "Impossible d'ouvrir le dossier en tant que fichier"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp:328
-#: avidemux/gtk_gui.cpp:893
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp:325
+#: avidemux/gtk_gui.cpp:900
 #, c-format
 msgid "Cannot open \"%s\"."
 msgstr "Ne peut ouvrir ??%s??."
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp:338
-msgid "Overwrite file ?"
-msgstr "Ecraser le fichier??"
+#, c-format
+msgid ""
+"%s already exists.\n"
+"\n"
+"Do you want to replace it?"
+msgstr ""
+"%s existe d?j?.\n"
+"\n"
+"Voulez-vous le remplacer ?"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp:363
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp:377
-msgid "It could be possible that you try to overwrite an input file!"
-msgstr "Il est possible que vous tentiez d'?craser un fichier d'entr??!"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp:365
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp:379
+msgid "It is possible that you are trying to overwrite an input file!"
+msgstr "Il est possible que vous tentiez d'?craser un fichier d'entr?e?!"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp:388
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp:390
 msgid "Cannot write the file"
 msgstr "Impossible d'?crire le fichier"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp:388
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp:390
 #, c-format
 msgid "No write access to \"%s\"."
 msgstr "Pas d'acc?s en ?criture ? ??%s??."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp:522
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp:524
 msgid "Images"
 msgstr "Images"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp:534
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp:536
 msgid "All"
 msgstr "Tous"
 
@@ -5715,11 +6452,11 @@
 
 #: avidemux/ADM_video/ADM_vidFieldUnblend.cpp:81
 msgid "Metrics"
-msgstr "M?triques"
+msgstr "Mesures"
 
 #: avidemux/ADM_video/ADM_vidFieldUnblend.cpp:81
 msgid "Do you want to print metrics on screen ?"
-msgstr "Voulez-vous afficher les m?triques ? l'?cran??"
+msgstr "Voulez-vous afficher les mesures ? l'?cran??"
 
 #: avidemux/ADM_videoFilter/ADM_guiResize.cpp:96
 #: avidemux/ADM_videoFilter/ADM_vidMPLResize.cpp:143
@@ -5733,7 +6470,7 @@
 
 #: avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp:106
 msgid "Linear blend"
-msgstr ""
+msgstr "Fusion lin?aire"
 
 #: avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp:107
 msgid "Linear interpolate"
@@ -5745,7 +6482,7 @@
 
 #: avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp:109
 msgid "Median interpolate"
-msgstr "Interpolation moyenne"
+msgstr "Interpolation m?diane"
 
 #: avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp:110
 msgid "FFmpeg deint"
@@ -5753,19 +6490,53 @@
 
 #: avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp:114
 msgid "_Deinterlacing:"
-msgstr "_D?sentrelacement:"
+msgstr "_D?sentrelacement :"
 
 #: avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp:115
 msgid "_Autolevel"
+msgstr "Niveau _automatique"
+
+#: avidemux/ADM_videoFilter/ADM_vidAddBorder.cpp:224
+#: avidemux/ADM_videoFilter/ADM_vidBSmear.cpp:200
+msgid "_Left border:"
+msgstr "Bordure _gauche :"
+
+#: avidemux/ADM_videoFilter/ADM_vidAddBorder.cpp:225
+#: avidemux/ADM_videoFilter/ADM_vidBSmear.cpp:201
+msgid "_Right border:"
+msgstr "Bordure _droite :"
+
+#: avidemux/ADM_videoFilter/ADM_vidAddBorder.cpp:226
+#: avidemux/ADM_videoFilter/ADM_vidBSmear.cpp:202
+msgid "_Top border:"
+msgstr "Bordure _haute :"
+
+#: avidemux/ADM_videoFilter/ADM_vidAddBorder.cpp:227
+#: avidemux/ADM_videoFilter/ADM_vidBSmear.cpp:203
+msgid "_Bottom border:"
+msgstr "Bordure _basse :"
+
+#: avidemux/ADM_videoFilter/ADM_vidAddBorder.cpp:230
+msgid "Add Borders"
+msgstr "Ajouter des bordures"
+
+#: avidemux/ADM_videoFilter/ADM_vidAddBorder.cpp:234
+#: avidemux/ADM_videoFilter/ADM_vidBSmear.cpp:211
+msgid "Incorrect parameters"
+msgstr "Param?tres incorrects"
+
+#: avidemux/ADM_videoFilter/ADM_vidAddBorder.cpp:234
+#: avidemux/ADM_videoFilter/ADM_vidBSmear.cpp:211
+msgid "All parameters must be even and within range."
 msgstr ""
 
 #: avidemux/ADM_videoFilter/ADM_vidASS.cpp:87
 msgid "_Subtitle file (ASS/SSA):"
-msgstr ""
+msgstr "Fichier de _sous-titres (ASS/SSA) :"
 
 #: avidemux/ADM_videoFilter/ADM_vidASS.cpp:88
 msgid "_Line spacing:"
-msgstr ""
+msgstr "Espacement des _lignes :"
 
 #: avidemux/ADM_videoFilter/ADM_vidASS.cpp:89
 msgid "_Font scale:"
@@ -5773,88 +6544,101 @@
 
 #: avidemux/ADM_videoFilter/ADM_vidASS.cpp:90
 msgid "_Top margin:"
-msgstr ""
+msgstr "Marge _sup?rieure :"
 
 #: avidemux/ADM_videoFilter/ADM_vidASS.cpp:91
 msgid "Botto_m margin"
-msgstr ""
+msgstr "Marge _inf?rieur"
 
 #: avidemux/ADM_videoFilter/ADM_vidBlendRemoval.cpp:82
 #: avidemux/ADM_videoFilter/ADM_vidDGbob.cpp:92
 #: avidemux/ADM_videoFilter/ADM_vidHardIvtcRemoval.cpp:87
 #: avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp:93
 #: avidemux/ADM_videoFilter/ADM_vidMSharpen.cpp:166
+#: avidemux/ADM_videoFilter/ADM_vidMsmooth.cpp:196
 msgid "_Threshold:"
 msgstr "_Seuil?:"
 
 #: avidemux/ADM_videoFilter/ADM_vidBlendRemoval.cpp:83
-msgid ""
-"If value is smaller than threshold it is considered valid.Smaller value "
-"might mean more false positive."
+msgid "If value is smaller than threshold it is considered valid.Smaller value might mean more false positive."
 msgstr ""
 
 #: avidemux/ADM_videoFilter/ADM_vidBlendRemoval.cpp:85
 #: avidemux/ADM_videoFilter/ADM_vidHardIvtcRemoval.cpp:90
 msgid "_Noise:"
-msgstr "_Bruit:"
+msgstr "_Bruit :"
 
 #: avidemux/ADM_videoFilter/ADM_vidBlendRemoval.cpp:85
 #: avidemux/ADM_videoFilter/ADM_vidHardIvtcRemoval.cpp:90
 msgid "If pixels are closer than noise, they are considered to be the same"
-msgstr ""
-"Si les pixels sont plus ?troits que le bruit, ils sont consid?r?s comme "
-"identiques"
+msgstr "Si les pixels sont plus ?troits que le bruit, ils sont consid?r?s comme identiques"
 
 #: avidemux/ADM_videoFilter/ADM_vidBlendRemoval.cpp:86
 msgid "I_dentical:"
-msgstr ""
+msgstr "_Similitude :"
 
 #: avidemux/ADM_videoFilter/ADM_vidBlendRemoval.cpp:86
 #: avidemux/ADM_videoFilter/ADM_vidHardIvtcRemoval.cpp:91
 msgid "If metric is less than identical, images are considered identical"
-msgstr ""
+msgstr "Les images sont consid?r?es comme identique si le calcul de leur similitude est inf?rieur au seuil"
 
 #: avidemux/ADM_videoFilter/ADM_vidBlendRemoval.cpp:87
 #: avidemux/ADM_videoFilter/ADM_vidHardIvtcRemoval.cpp:92
 msgid "_Show metrics"
-msgstr "_Montrer les m?triques"
+msgstr "_Afficher les mesures"
 
 #: avidemux/ADM_videoFilter/ADM_vidBlendRemoval.cpp:87
 #: avidemux/ADM_videoFilter/ADM_vidHardIvtcRemoval.cpp:92
 msgid "Show metric in image (debug)"
-msgstr "Montrer les m?triques dans l'image (d?bug)"
+msgstr "Affiche les mesures dans l'image (d?bogage)"
 
-#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:187
+#: avidemux/ADM_videoFilter/ADM_vidBlendRemoval.cpp:91
+msgid "Blend Removal"
+msgstr "Configuration du \"Blend remover\""
+
+#: avidemux/ADM_videoFilter/ADM_vidBSmear.cpp:206
+msgid "Blacken Borders"
+msgstr "Configuration du \"Blacken borders\""
+
+#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:181
 msgid "_Start Frame (first frame # to include in average):"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:191
+#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:185
 msgid "_End Frame (last frame # to include), -1 = last:"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:195
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:160
+#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:189
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:191
 msgid "_Output File:"
-msgstr ""
+msgstr "Fichier de _sortie :"
 
-#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:198
+#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:189
+msgid "Select output file"
+msgstr "S?lectionner le fichier de sortie"
+
+#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:192
 msgid "_Bias (only for display; use 0 for average, 128 for frame minus average):"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:202
+#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:196
 msgid "Current frame minus average so far"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:203
+#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:197
 msgid "Average so far"
-msgstr ""
+msgstr "Moyenne jusqu'? pr?sent"
 
-#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:205
+#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:199
 msgid "Display nothing (fast for batch processing)"
-msgstr ""
+msgstr "Ne rien afficher (rapide pour le traitement en lot)"
 
-#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:209
+#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:203
 msgid "Display _Mode:"
+msgstr "_Mode d'affichage :"
+
+#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:208
+msgid "ComputeAverage"
 msgstr ""
 
 #: avidemux/ADM_videoFilter/ADM_vidDecDec.cpp:190
@@ -5875,46 +6659,50 @@
 
 #: avidemux/ADM_videoFilter/ADM_vidDecDec.cpp:196
 msgid "Fastest (no chroma, partial luma)"
-msgstr ""
+msgstr "Le plus rapide (pas de chrominance, luminance partielle)"
 
 #: avidemux/ADM_videoFilter/ADM_vidDecDec.cpp:197
 msgid "Fast (partial luma and chroma)"
-msgstr ""
+msgstr "Rapide (luminance et chrominance partielles)"
 
 #: avidemux/ADM_videoFilter/ADM_vidDecDec.cpp:198
 msgid "Medium (full luma, no chroma)"
-msgstr ""
+msgstr "Moyen (luminance ? fond, pas de chrominance)"
 
 #: avidemux/ADM_videoFilter/ADM_vidDecDec.cpp:199
 msgid "Slow (full luma and chroma)"
-msgstr ""
+msgstr "Lent (luminance et chrominance ? fond)"
 
 #: avidemux/ADM_videoFilter/ADM_vidDecDec.cpp:205
 msgid "_Threshold 1:"
-msgstr ""
+msgstr "_Seuil 1 :"
 
 #: avidemux/ADM_videoFilter/ADM_vidDecDec.cpp:206
 msgid "T_hreshold 2:"
-msgstr ""
+msgstr "S_euil 2 :"
 
+#: avidemux/ADM_videoFilter/ADM_vidDecDec.cpp:207
+msgid "C_ycle:"
+msgstr "C_ycle :"
+
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:83
 msgid "No strategy"
-msgstr ""
+msgstr "Pas de strat?gie"
 
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:84
 msgid "3:2 pulldown"
-msgstr ""
+msgstr "3:2 pulldown"
 
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:85
 msgid "PAL/SECAM"
-msgstr ""
+msgstr "PAL/SECAM"
 
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:91
 #: avidemux/ADM_videoFilter/ADM_vidDGbob.cpp:82
 #: avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp:88
 #: avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp:110
 msgid "Bottom"
-msgstr "Bas"
+msgstr "Impaire"
 
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:95
 msgid "Never"
@@ -5950,11 +6738,11 @@
 
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:110
 msgid "_Strategy:"
-msgstr ""
+msgstr "_Strat?gie :"
 
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:112
 msgid "_Postprocessing:"
-msgstr ""
+msgstr "_Post-traitement :"
 
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:113
 msgid "_Try backward:"
@@ -5962,7 +6750,7 @@
 
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:115
 msgid "_Direct threshold:"
-msgstr ""
+msgstr "Seuil _direct :"
 
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:116
 msgid "_Backward threshold:"
@@ -5970,59 +6758,61 @@
 
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:117
 msgid "_Noise threshold:"
-msgstr ""
+msgstr "Seuil de _bruit :"
 
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:118
 msgid "Postp_rocessing threshold:"
-msgstr ""
+msgstr "Seuil de post-t_raitement :"
 
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:120
 msgid "_Use chroma to decide"
-msgstr ""
+msgstr "_Utiliser la chrominance pour d?cider"
 
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:121
 msgid "Sho_w info"
-msgstr ""
+msgstr "_Montrer les informations"
 
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:122
 msgid "Debu_g"
-msgstr ""
+msgstr "D?boga_ge"
 
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:123
 msgid "Bl_end"
 msgstr ""
 
 #: avidemux/ADM_videoFilter/ADM_vidDenoise.cpp:386
+#, fuzzy
 msgid "_Luma lock:"
-msgstr ""
+msgstr "Verouille la _luminance :"
 
 #: avidemux/ADM_videoFilter/ADM_vidDenoise.cpp:387
+#, fuzzy
 msgid "C_hroma lock:"
-msgstr "C_hroma fermer:"
+msgstr "Verouille la c_hrominance :"
 
 #: avidemux/ADM_videoFilter/ADM_vidDenoise.cpp:388
 msgid "L_uma threshold:"
-msgstr "Seuil L_uma?:"
+msgstr "Seuil de l_uma?:"
 
 #: avidemux/ADM_videoFilter/ADM_vidDenoise.cpp:389
 msgid "Ch_roma threshold:"
-msgstr "Seuil Ch_roma:"
+msgstr "Seuil de ch_roma :"
 
 #: avidemux/ADM_videoFilter/ADM_vidDenoise.cpp:391
 msgid "_Scene change:"
-msgstr "Changementr sc?ne:"
+msgstr "Changement de _sc?ne :"
 
 #: avidemux/ADM_videoFilter/ADM_vidDGbob.cpp:85
 msgid "Keep nb of frames and fps"
-msgstr ""
+msgstr "Conserver le nombre d'image et d'images par seconde"
 
 #: avidemux/ADM_videoFilter/ADM_vidDGbob.cpp:86
 msgid "Double nb of frames and fps"
-msgstr "Double fps et Nb image"
+msgstr "Double le nombre d'image et d'image par seconde"
 
 #: avidemux/ADM_videoFilter/ADM_vidDGbob.cpp:87
 msgid "Double nb of frames (slow motion)"
-msgstr "Double Nb image (ralenti)"
+msgstr "Double le nombre d'images (ralenti)"
 
 #: avidemux/ADM_videoFilter/ADM_vidDGbob.cpp:93
 msgid "_Extra"
@@ -6032,69 +6822,189 @@
 msgid "Extra check, avoid using it"
 msgstr "Le contr?le suppl?mentaire, ?viter de l'employer"
 
+#: avidemux/ADM_videoFilter/ADM_vidDGbob.cpp:96
+msgid "DGBob"
+msgstr "DGBob"
+
 #: avidemux/ADM_videoFilter/ADM_vidDropOut.cpp:63
 msgid "DropOut Threshold"
-msgstr "Seuil DropOut"
+msgstr "Seuil de rejet"
 
+#: avidemux/ADM_videoFilter/ADM_vidDropOut.cpp:66
+msgid "Drop Out"
+msgstr "Configuration de \"Drop\""
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:191
+msgid "Erase"
+msgstr ""
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:192
+msgid "Un-Erase"
+msgstr ""
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:196
+msgid "1x1"
+msgstr "1x1"
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:197
+msgid "3x3"
+msgstr "3x3"
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:198
+msgid "5x5"
+msgstr "5x5"
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:199
+msgid "7x7"
+msgstr "7x7"
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:200
+msgid "9x9"
+msgstr "9x9"
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:201
+msgid "11x11"
+msgstr "11x11"
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:202
+msgid "15x15"
+msgstr "15x15"
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:203
+msgid "21x21"
+msgstr "21x21"
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:207
+msgid "Brush _Mode:"
+msgstr ""
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:211
+msgid "Brush _Size:"
+msgstr ""
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:244
+msgid "Output \"_Color\" for all masked pixels:"
+msgstr ""
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:250
+msgid "Eraser _Data File:"
+msgstr ""
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:250
+msgid "Select data file"
+msgstr "S?lectionner le fichier de donn?es"
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:255
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:196
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:378
+#: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:159
+msgid "_Debugging settings (bits):"
+msgstr ""
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:261
+#, fuzzy
+msgid "Eraser Configuration"
+msgstr "Configuration de \"Eraser\""
+
 #: avidemux/ADM_videoFilter/ADM_vidFade.cpp:65
 msgid "Out"
-msgstr "Sortie"
+msgstr "Sortant"
 
 #: avidemux/ADM_videoFilter/ADM_vidFade.cpp:65
 msgid "Fade out"
-msgstr "Fade sortie"
+msgstr "Fondu sortant"
 
 #: avidemux/ADM_videoFilter/ADM_vidFade.cpp:65
 msgid "In"
-msgstr "Entr?e"
+msgstr "Entrant"
 
 #: avidemux/ADM_videoFilter/ADM_vidFade.cpp:65
 msgid "Fade in"
-msgstr "Fade entr?e"
+msgstr "Fondu entrant"
 
 #: avidemux/ADM_videoFilter/ADM_vidFade.cpp:71
 msgid "_Fade type:"
-msgstr "Type de Fade:"
+msgstr "Type de _fondu :"
 
 #: avidemux/ADM_videoFilter/ADM_vidFade.cpp:72
 msgid "_Start frame:"
-msgstr "Premi?re image:"
+msgstr "_Premi?re image :"
 
 #: avidemux/ADM_videoFilter/ADM_vidFade.cpp:73
 msgid "_End frame:"
-msgstr "Derni?re image:"
+msgstr "_Derni?re image :"
 
 #: avidemux/ADM_videoFilter/ADM_vidFade.cpp:74
 msgid "Fade to _black"
-msgstr "Fondu en noir"
+msgstr "Fondu en _noir"
 
 #: avidemux/ADM_videoFilter/ADM_vidFade.cpp:83
 msgid "Parameter Error"
-msgstr "Erreur param?tre"
+msgstr "Erreur de param?tre"
 
 #: avidemux/ADM_videoFilter/ADM_vidFade.cpp:83
 msgid "Start must be before end, and both within video # of frames."
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidHardIvtcRemoval.cpp:88
-msgid ""
-"If value is smaller than threshold it is considered valid. Smaller value "
-"might mean more false positive"
+#: avidemux/ADM_videoFilter/ADM_vidFastConvolution.cpp:467
+#: avidemux/ADM_videoFilter/ADM_vidLargeMedian.cpp:304
+msgid "_Process luma"
+msgstr "_Traitement de la luminance"
+
+#: avidemux/ADM_videoFilter/ADM_vidFastConvolution.cpp:467
+#: avidemux/ADM_videoFilter/ADM_vidLargeMedian.cpp:304
+msgid "Process luma plane"
 msgstr ""
-"Si l'image est proche du seuil, est-elle consid?r?e comme valide.Plus la "
-"valeur est petite plus on a de fausses d?tections"
 
+#: avidemux/ADM_videoFilter/ADM_vidFastConvolution.cpp:468
+#: avidemux/ADM_videoFilter/ADM_vidLargeMedian.cpp:305
+msgid "P_rocess chroma"
+msgstr "T_raitement de la chrominance"
+
+#: avidemux/ADM_videoFilter/ADM_vidFastConvolution.cpp:472
+msgid "Fast Convolution"
+msgstr "Convolution rapide"
+
+#: avidemux/ADM_videoFilter/ADM_vidFields.cpp:229
+msgid "Motion Threshold"
+msgstr "Seuil de mouvement"
+
+#: avidemux/ADM_videoFilter/ADM_vidFields.cpp:231
+#, fuzzy
+msgid "Blend Threshold"
+msgstr "Seuil de fusion"
+
+#: avidemux/ADM_videoFilter/ADM_vidFlux.cpp:133
+msgid "_Temporal threshold:"
+msgstr "Seuil _temporel :"
+
+#: avidemux/ADM_videoFilter/ADM_vidFlux.cpp:134
+msgid "_Spatial threshold:"
+msgstr "Seuil _spatial :"
+
+#: avidemux/ADM_videoFilter/ADM_vidForcedPP.cpp:81
+msgid "Forced Postprocessing"
+msgstr "Post-traitement forc?"
+
+#: avidemux/ADM_videoFilter/ADM_vidHardIvtcRemoval.cpp:88
+msgid "If value is smaller than threshold it is considered valid. Smaller value might mean more false positive"
+msgstr "Si l'image est proche du seuil, est-elle consid?r?e comme valide. Plus la valeur est petite plus on a de fausses d?tections"
+
 #: avidemux/ADM_videoFilter/ADM_vidHardIvtcRemoval.cpp:91
 msgid "_Identical:"
-msgstr "_Identique:"
+msgstr "_Identique :"
 
+#: avidemux/ADM_videoFilter/ADM_vidHardIvtcRemoval.cpp:96
+msgid "Hard IVTC Removal"
+msgstr "Configuration du \"Hard pulldown removal\""
+
 #: avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp:93
 msgid "Smaller means more deinterlacing"
-msgstr "plus petit signifie plus de d?-entrelacement"
+msgstr "Plus le seuil est bas, plus fort est le d?sentrelacement"
 
 #: avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp:94
 msgid "_Sharper engine:"
-msgstr "_ moteur Sharp:"
+msgstr "Moteur de _nettet? :"
 
 #: avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp:95
 msgid "T_woway"
@@ -6110,23 +7020,31 @@
 
 #: avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp:96
 msgid "Show interlaced areas (for test!)"
-msgstr "Montrer les champs entrelac?s (test?!)"
+msgstr "Montre les zones entrelac?es (pour tester?!)"
 
+#: avidemux/ADM_videoFilter/ADM_vidLargeMedian.cpp:309
+msgid "Large Median 5x5"
+msgstr ""
+
 #: avidemux/ADM_videoFilter/ADM_vidLogo.cpp:88
 msgid "_Logo (jpg file):"
-msgstr ""
+msgstr "_Logo (fichier JPG) :"
 
+#: avidemux/ADM_videoFilter/ADM_vidLogo.cpp:88
+msgid "Select JPEG file"
+msgstr "S?lectionner le fichier JPEG"
+
 #: avidemux/ADM_videoFilter/ADM_vidLogo.cpp:89
 msgid "_X Position:"
-msgstr ""
+msgstr "Position en _X :"
 
 #: avidemux/ADM_videoFilter/ADM_vidLogo.cpp:90
 msgid "_Y Position:"
-msgstr ""
+msgstr "Position en _Y :"
 
 #: avidemux/ADM_videoFilter/ADM_vidLogo.cpp:91
 msgid "_Alpha:"
-msgstr ""
+msgstr "_Alpha :"
 
 #: avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp:104
 msgid "Fast"
@@ -6138,7 +7056,7 @@
 
 #: avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp:106
 msgid "Slow iterative motion search"
-msgstr " Lent, estimation it?rative de mouvement"
+msgstr "Lent, estimation it?rative de mouvement"
 
 #: avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp:107
 msgid "Extra slow (same as 3+multiple reference frames)"
@@ -6146,42 +7064,42 @@
 
 #: avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp:114
 msgid "_Field dominance:"
-msgstr "Dominance de champ:"
+msgstr "Dominance des _trames :"
 
 #: avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp:115
 msgid "_Qp:"
-msgstr "Qp:"
+msgstr "_Qp :"
 
 #: avidemux/ADM_videoFilter/ADM_vidMosaic.cpp:90
 msgid "_Horizontal stacking:"
-msgstr "Tassement horizontal:"
+msgstr "Empillement _horizontal :"
 
 #: avidemux/ADM_videoFilter/ADM_vidMosaic.cpp:91
 msgid "_Vertical stacking:"
-msgstr "Tassement vertical:"
+msgstr "Empillement _vertical :"
 
 #: avidemux/ADM_videoFilter/ADM_vidMosaic.cpp:92
 msgid "_Shrink factor:"
-msgstr "Facteur shrink:"
+msgstr "Facteur de _r?duction :"
 
 #: avidemux/ADM_videoFilter/ADM_vidMosaic.cpp:93
 msgid "Show _frame"
-msgstr "Montrer Nb image?:"
+msgstr "Montrer l'_image?:"
 
 #: avidemux/ADM_videoFilter/ADM_vidMPLD3D.cpp:74
 #: avidemux/ADM_videoFilter/ADM_vidMPLD3Dlow.cpp:74
 msgid "_Spatial luma strength:"
-msgstr "Seuil Luma Spatiale:"
+msgstr "Force _spatiale de la luminance :"
 
 #: avidemux/ADM_videoFilter/ADM_vidMPLD3D.cpp:75
 #: avidemux/ADM_videoFilter/ADM_vidMPLD3Dlow.cpp:75
 msgid "S_patial chroma strength:"
-msgstr "Seuil Chroma Spatiale:"
+msgstr "Force s_patiale de la chrominance :"
 
 #: avidemux/ADM_videoFilter/ADM_vidMPLD3D.cpp:76
 #: avidemux/ADM_videoFilter/ADM_vidMPLD3Dlow.cpp:76
 msgid "_Temporal strength:"
-msgstr "Seuil Temporal:"
+msgstr "Force _temporel :"
 
 #: avidemux/ADM_videoFilter/ADM_vidMSharpen.cpp:163
 msgid "_Mask"
@@ -6189,65 +7107,91 @@
 
 #: avidemux/ADM_videoFilter/ADM_vidMSharpen.cpp:164
 msgid "_High Q"
-msgstr "_High Q"
+msgstr "_Haute qualit?"
 
+#: avidemux/ADM_videoFilter/ADM_vidMsmooth.cpp:194
+msgid "_High quality"
+msgstr "_Haute qualit?"
+
+#: avidemux/ADM_videoFilter/ADM_vidMsmooth.cpp:195
+msgid "Show _mask"
+msgstr "Montre le _masque"
+
+#: avidemux/ADM_videoFilter/ADM_vidMsmooth.cpp:201
+msgid "MSmooth"
+msgstr "Configuration de \"MSmooth\""
+
 #: avidemux/ADM_videoFilter/ADM_vidPalShift.cpp:76
+#, fuzzy
 msgid "_Try reverse"
+msgstr "_Essaie d'inverser"
+
+#: avidemux/ADM_videoFilter/ADM_vidPalShift.cpp:80
+msgid "Pal Field Shift"
+msgstr "Configuration de \"Pal Field Shift\""
+
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:135
+msgid "New format, preferred, good for Tracker3D"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:129
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:137
+msgid "DG at UWA format (includes shape info & bounding box)"
+msgstr ""
+
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:139
+msgid "AB at ODU format (includes shape info)"
+msgstr ""
+
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:141
+msgid "Old format that Tracker3D can't read directly"
+msgstr ""
+
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:145
+msgid "Output _Format:"
+msgstr "Format de _sortie :"
+
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:170
 msgid "Mi_nimum area for a particle to be detected:"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:132
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:173
 msgid "Ma_ximum area for a particle to be detected:"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:136
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:177
 msgid "_Left side crop (ignore particles in):"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:139
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:180
 msgid "_Right side crop (ignore particles in):"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:142
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:183
 msgid "_Top crop (ignore particles in):"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:145
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:186
 msgid "_Bottom crop (ignore particles in):"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:149
-msgid "New format, preferred, good for Tracker3D"
-msgstr ""
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:191
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:324
+#: avidemux/gtk_gui.cpp:2016
+#: avidemux/gtk_gui.cpp:2113
+msgid "Select file"
+msgstr "S?lectionner un fichier"
 
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:151
-msgid "Old format that Tracker3D can't read directly"
-msgstr ""
-
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:155
-msgid "_Output Format:"
-msgstr ""
-
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:163
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:194
 msgid "_Camera number:"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:165
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:343
-#: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:147
-msgid "_Debugging settings (bits):"
-msgstr ""
-
 #: avidemux/ADM_videoFilter/ADM_vidResampleFPS.cpp:85
 msgid "_New frame rate:"
-msgstr "Nouvelle fr?quence d'image:"
+msgstr "_Images par seconde :"
 
 #: avidemux/ADM_videoFilter/ADM_vidResampleFPS.cpp:86
 msgid "_Blend"
-msgstr "_M?lange"
+msgstr "_Transparent"
 
 #: avidemux/ADM_videoFilter/ADM_vidRotate.cpp:265
 msgid "90 degrees"
@@ -6275,637 +7219,666 @@
 
 #: avidemux/ADM_videoFilter/ADM_vidRotate.cpp:269
 msgid "_Angle:"
-msgstr ""
+msgstr "_Angle :"
 
-#: avidemux/ADM_videoFilter/ADM_vidRotate.cpp:271
-msgid "Rotate"
-msgstr ""
-
 #: avidemux/ADM_videoFilter/ADM_vidSoften.cpp:68
 msgid "_Luma threshold:"
-msgstr "Seuil?Luma:"
+msgstr "Seuil?de la _luminance :"
 
 #: avidemux/ADM_videoFilter/ADM_vidSoften.cpp:69
 msgid "C_hroma threshold:"
-msgstr "Seuil Chroma:"
+msgstr "Seuil de c_hroma :"
 
 #: avidemux/ADM_videoFilter/ADM_vidSoften.cpp:70
 msgid "_Radius:"
-msgstr "_Radius:"
+msgstr "_Radius :"
 
-#: avidemux/ADM_videoFilter/ADM_vidSRT.cpp:214
+#: avidemux/ADM_videoFilter/ADM_vidSRT.cpp:210
 msgid "Could not open subtitle file"
 msgstr "Impossible d'ouvrir le fichier sous-titres"
 
-#: avidemux/ADM_videoFilter/ADM_vidSRT.cpp:234
+#: avidemux/ADM_videoFilter/ADM_vidSRT.cpp:230
 msgid "Cannot identify subtitle format"
 msgstr "Ne peut pas identifier le format de sous-titres"
 
 #: avidemux/ADM_videoFilter/ADM_vidStabilize.cpp:63
 msgid "Stabilize Threshold"
-msgstr "Stabiliser seuil"
+msgstr "Seuil de stabilisation"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:260
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:261
 msgid "P' = A"
-msgstr ""
+msgstr "P' = A"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:261
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:262
 msgid "P' = P"
-msgstr ""
+msgstr "P' = P"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:262
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:263
 msgid "P' = P - A"
-msgstr ""
+msgstr "P' = P - A"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:263
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:264
 msgid "P' = A - P"
-msgstr ""
+msgstr "P' = A - P"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:264
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:265
 msgid "P' = P + A"
-msgstr ""
+msgstr "P' = P + A"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:265
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:266
 msgid "P' = P * A"
-msgstr ""
+msgstr "P' = P * A"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:266
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:267
 msgid "P' = P / A"
-msgstr ""
+msgstr "P' = P / A"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:267
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:268
 msgid "P' = A / P"
-msgstr ""
+msgstr "P' = A / P"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:268
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:269
 msgid "P' = min (P, A)"
-msgstr ""
+msgstr "P' = min (P, A)"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:269
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:270
 msgid "P' = max (P, A)"
-msgstr ""
+msgstr "P' = max (P, A)"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:274
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:275
 msgid "A = convolve(P); Load convolution kernel from file"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:276
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:277
 msgid "A = pixel from image file as float; Load image from file"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:278
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:279
 msgid "A = pixel from image file as integer; Load image from file"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:280
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:281
 msgid "A = floating point constant value"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:282
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:283
 msgid "A = rolling average of pixel: A = A*(1-alpha)+(P*alpha)"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:287
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:288
 msgid "Select _Operation on each pixel P and input A:"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:291
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:293
 msgid "Input _Type:"
-msgstr ""
+msgstr "_Type d'entr?e :"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:296
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:324
 msgid "Input _File (image or convolution kernel):"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:299
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:327
 msgid ""
 "_Load Bias (added to each pixel\n"
 "in file image when loaded):"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:304
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:332
 msgid ""
 "Load _Multiplier (each pixel in\n"
 "file image mult. by this when loaded):"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:310
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:338
 msgid "Input _Constant:"
-msgstr ""
+msgstr "_Constante d'entr?e :"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:314
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:342
 msgid ""
-"Denominator of memory constant _alpha\n"
-"(where A = (1-alpha)*A + alpha*curr_frame):"
+"Memory constant _alpha\n"
+"(where A = (1-alpha)*A + alpha*(curr_frame + lookahead)):"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:319
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:347
+msgid "Look ahead _N frames:"
+msgstr ""
+
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:351
 msgid "Init _Start Frame (first frame # to use for head start):"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:323
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:355
 msgid "Init _End Frame (last frame # to use for head start):"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:327
-msgid ""
-"Init By _Rolling (compute head start using a rolling average rather than a "
-"straight average)"
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:359
+msgid "Init By _Rolling (compute head start using a rolling average rather than a straight average)"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:332
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:364
 msgid "_Bias (will be added to result):"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:335
-msgid "Mi_nimum value (will be scaled to 0):"
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:367
+msgid "_Result Bias (added to each result pixel):"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:338
-msgid "Ma_ximum value (will be scaled to 255):"
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:371
+msgid ""
+"Result _Multiplier (each result pixel\n"
+"multiplied by this):"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:341
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:376
 msgid "_Histogram every N frames (0 to disable):"
-msgstr ""
+msgstr "_Histogramme toutes les N images (0 pour d?sactiver) :"
 
-#: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:134
+#: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:146
 msgid "Mi_nimum value to be in-range:"
-msgstr ""
+msgstr "Valeur mi_nimun pour ?tre dans l'intervalle :"
 
-#: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:135
+#: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:147
 msgid "Ma_ximum value to be in-range:"
-msgstr ""
+msgstr "Valeur ma_ximun pour ?tre dans l'intervalle :"
 
-#: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:138
+#: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:150
 msgid "In-range values go white, out-of-range go black"
-msgstr ""
+msgstr "Les valeurs dans l'intervalle deviennent blanches, les autres deviennent noires"
 
-#: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:139
+#: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:151
 msgid "In-range values go black, out-of-range go white"
-msgstr ""
+msgstr "Les valeurs dans l'intervalle deviennent noires, les autres deviennent blanches"
 
-#: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:144
+#: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:156
 msgid "Output values:"
-msgstr ""
+msgstr "Valeurs de sortie :"
 
 #: avidemux/ADM_videoFilter/ADM_vidVlad.cpp:101
 msgid "_Luma temporal threshold:"
-msgstr ""
+msgstr "Seuil temporel de la _luminance :"
 
 #: avidemux/ADM_videoFilter/ADM_vidVlad.cpp:102
 msgid "Ch_roma temporal threshold:"
-msgstr ""
+msgstr "Seuil temporel de la ch_rominance :"
 
 #: avidemux/ADM_videoFilter/ADM_vidYadif.cpp:171
 msgid "Temporal & spatial check"
-msgstr ""
+msgstr "V?rification spatio-temporel"
 
 #: avidemux/ADM_videoFilter/ADM_vidYadif.cpp:172
 msgid "Bob, temporal & spatial check"
-msgstr ""
+msgstr "Bob, v?rification spatio-temporel"
 
 #: avidemux/ADM_videoFilter/ADM_vidYadif.cpp:173
 msgid "Skip spatial temporal check"
-msgstr ""
+msgstr "Saute la v?rification spatio-temporel"
 
 #: avidemux/ADM_videoFilter/ADM_vidYadif.cpp:174
 msgid "Bob, skip spatial temporal check"
-msgstr ""
+msgstr "Bob, saute la v?rification spatio-temporel"
 
 #: avidemux/ADM_videoFilter/ADM_vidYadif.cpp:182
 msgid "_Order:"
-msgstr ""
+msgstr "_Ordre :"
 
-#: avidemux/gtk_gui.cpp:251
+#: avidemux/gtk_gui.cpp:249
 msgid "Select ECMAScript to Run"
 msgstr ""
 
-#: avidemux/gtk_gui.cpp:298 avidemux/gtk_gui.cpp:337
+#: avidemux/gtk_gui.cpp:296
+#: avidemux/gtk_gui.cpp:335
 msgid "Obsolete"
 msgstr "Obsol?te"
 
-#: avidemux/gtk_gui.cpp:365
+#: avidemux/gtk_gui.cpp:363
 msgid "Not coded in this version"
 msgstr "Pas cod? dans cette version"
 
-#: avidemux/gtk_gui.cpp:380 avidemux/gtk_gui.cpp:385 avidemux/gtk_gui.cpp:507
-#: avidemux/gtk_gui.cpp:510
+#: avidemux/gtk_gui.cpp:378
+#: avidemux/gtk_gui.cpp:383
+#: avidemux/gtk_gui.cpp:506
+#: avidemux/gtk_gui.cpp:509
 msgid "Select AVI File..."
-msgstr ""
+msgstr "S?lectionner le fichier AVI..."
 
-#: avidemux/gtk_gui.cpp:441
+#: avidemux/gtk_gui.cpp:440
 msgid ""
 "This is to be used to undo packed VOP on MPEG-4.\n"
 "Continue ?"
 msgstr ""
-"Cela doit ?tre utilis? pour enlever les vop sur du MPEG4.\n"
+"Cela doit ?tre utilis? pour enlever les VOP sur du MPEG4.\n"
 "Continuer??"
 
-#: avidemux/gtk_gui.cpp:443
+#: avidemux/gtk_gui.cpp:442
 msgid "Select AVI File to Write"
-msgstr ""
+msgstr "S?lectionner le fichier AVI ? ?crire"
 
-#: avidemux/gtk_gui.cpp:449
+#: avidemux/gtk_gui.cpp:448
 msgid "Select OGM File to Write"
-msgstr ""
+msgstr "S?lectionner le fichier OGM ? ?crire"
 
-#: avidemux/gtk_gui.cpp:453 avidemux/gtk_gui.cpp:465
+#: avidemux/gtk_gui.cpp:452
+#: avidemux/gtk_gui.cpp:464
 msgid "Select Workbench to Save"
-msgstr ""
+msgstr "S?lectionner le fichier projet ? enregistrer"
 
-#: avidemux/gtk_gui.cpp:497
+#: avidemux/gtk_gui.cpp:496
 msgid "Select Raw File to Save"
-msgstr ""
+msgstr "S?lectionner le fichier brut ? enregistrer"
 
-#: avidemux/gtk_gui.cpp:513
+#: avidemux/gtk_gui.cpp:512
 msgid "Select AVI File to Append..."
 msgstr ""
 
-#: avidemux/gtk_gui.cpp:517
+#: avidemux/gtk_gui.cpp:516
 msgid "Select File to Save Audio"
 msgstr ""
 
-#: avidemux/gtk_gui.cpp:551
+#: avidemux/gtk_gui.cpp:550
 msgid "Select JPEG Sequence to Save"
-msgstr ""
+msgstr "S?lectionner la s?quence JPEG ? enregistrer"
 
-#: avidemux/gtk_gui.cpp:554
+#: avidemux/gtk_gui.cpp:553
 msgid "Select BMP to Save"
-msgstr ""
+msgstr "S?lectionner le BMP ? enregistrer"
 
-#: avidemux/gtk_gui.cpp:558
+#: avidemux/gtk_gui.cpp:557
 msgid "Select JPEG to Save"
-msgstr ""
+msgstr "S?lectionner le JPEG ? enregistrer"
 
-#: avidemux/gtk_gui.cpp:611 avidemux/gtk_gui.cpp:715
+#: avidemux/gtk_gui.cpp:610
+#: avidemux/gtk_gui.cpp:722
 msgid "Select File to Save"
-msgstr ""
+msgstr "S?lectionner le fichier ? enregistrer"
 
-#: avidemux/gtk_gui.cpp:655
+#: avidemux/gtk_gui.cpp:662
 msgid "Select MP3 to Load"
-msgstr ""
+msgstr "S?lectionner le MP3 ? charger"
 
-#: avidemux/gtk_gui.cpp:658
+#: avidemux/gtk_gui.cpp:665
 msgid "Select AC3 to Load"
-msgstr ""
+msgstr "S?lectionner l'AC3 ? charger"
 
-#: avidemux/gtk_gui.cpp:661
+#: avidemux/gtk_gui.cpp:668
 msgid "Select WAV to Load"
-msgstr ""
+msgstr "S?lectionner le WAV ? charger"
 
-#: avidemux/gtk_gui.cpp:709
+#: avidemux/gtk_gui.cpp:706
+msgid "Go to Frame"
+msgstr "Aller ? l'image"
+
+#: avidemux/gtk_gui.cpp:706
+msgid "_Go to frame:"
+msgstr "_Aller ? l'image :"
+
+#: avidemux/gtk_gui.cpp:716
 msgid "Out of bounds"
 msgstr "Hors limites"
 
-#: avidemux/gtk_gui.cpp:720 avidemux/gtk_gui.cpp:1908
+#: avidemux/gtk_gui.cpp:727
+#: avidemux/gtk_gui.cpp:1915
 msgid "Marker A > B"
 msgstr "Marqueur A?>?B"
 
-#: avidemux/gtk_gui.cpp:720
+#: avidemux/gtk_gui.cpp:727
 msgid "Cannot copy."
 msgstr "Ne peut pas copier"
 
-#: avidemux/gtk_gui.cpp:732
+#: avidemux/gtk_gui.cpp:739
 msgid "Something bad happened (II))"
 msgstr "Quelque chose de mauvais c'est pass? (II)"
 
-#: avidemux/gtk_gui.cpp:746
+#: avidemux/gtk_gui.cpp:753
 msgid "Are you sure?"
 msgstr "Etes vous s?r??"
 
-#: avidemux/gtk_gui.cpp:801
+#: avidemux/gtk_gui.cpp:808
 msgid "Frame Rate"
-msgstr ""
+msgstr "Fr?quence d'image"
 
-#: avidemux/gtk_gui.cpp:801
+#: avidemux/gtk_gui.cpp:808
 msgid "_Frames per second:"
-msgstr ""
+msgstr "_Images par seconde :"
 
-#: avidemux/gtk_gui.cpp:824
+#: avidemux/gtk_gui.cpp:831
 msgid "Width is not a multiple of 8"
 msgstr "La largeur n'est pas un multiple de 8"
 
-#: avidemux/gtk_gui.cpp:825
+#: avidemux/gtk_gui.cpp:832
 msgid "This will make trouble for AVI files."
 msgstr "Cela devrait engendrer des ennuis pour les fichiers AVI."
 
-#: avidemux/gtk_gui.cpp:835
+#: avidemux/gtk_gui.cpp:842
 msgid "Rebuild all Keyframes?"
 msgstr "Reconstruire toutes les images-cl???"
 
-#: avidemux/gtk_gui.cpp:893
+#: avidemux/gtk_gui.cpp:900
 msgid "Permission error"
-msgstr "Erreur permission"
+msgstr "Erreur de permission"
 
-#: avidemux/gtk_gui.cpp:896
+#: avidemux/gtk_gui.cpp:903
 #, c-format
 msgid "\"%s\" does not exist."
 msgstr "??%s?? n'existe pas."
 
-#: avidemux/gtk_gui.cpp:938
+#: avidemux/gtk_gui.cpp:945
 msgid "Cannot open project using the video loader."
 msgstr "Ne peut pas ouvrir le projet utilisant le chargeur vid?o."
 
-#: avidemux/gtk_gui.cpp:939
+#: avidemux/gtk_gui.cpp:946
 msgid "Try 'File' -> 'Load/Run Project...'"
-msgstr "Essayez ??Fichier->Charger/Lancer un Projet...??"
+msgstr "Essayez ??Fichier -> Charger/Lancer un projet...??"
 
-#: avidemux/gtk_gui.cpp:941
+#: avidemux/gtk_gui.cpp:948
 msgid "Could not open the file"
 msgstr "Ne peut ouvrir le fichier"
 
-#: avidemux/gtk_gui.cpp:976
+#: avidemux/gtk_gui.cpp:983
 msgid "Multiple Audio Tracks"
 msgstr "Multiple pistes audio"
 
-#: avidemux/gtk_gui.cpp:976
+#: avidemux/gtk_gui.cpp:983
 msgid ""
 "The file you just loaded contains several audio tracks.\n"
 "Go to Audio->MainTrack to select the active one."
 msgstr ""
 "Le fichier charg? contient plusieurs pistes audio.\n"
-"Aller ? ??Audio->Piste Principale?? pour choisir la piste active."
+"Aller ? ??Audio -> Piste Principale?? pour choisir la piste active."
 
-#: avidemux/gtk_gui.cpp:1039
+#: avidemux/gtk_gui.cpp:1046
 msgid "No audio decoder found for this file"
 msgstr "Pas de d?codeur audio pour ce fichier"
 
-#: avidemux/gtk_gui.cpp:1040
+#: avidemux/gtk_gui.cpp:1047
 msgid "Save (A+V) will generate bad AVI. Save audio will work."
-msgstr "Sauvegarder (A+V) g?n?rera un mauvais AVI. Sauvegarder l'audio fonctionnera."
+msgstr "Enregistrer l'audio et la vid?o g?n?rera un mauvais AVI. Enregistrer l'audio fonctionnera."
 
-#: avidemux/gtk_gui.cpp:1099
+#: avidemux/gtk_gui.cpp:1106
 msgid "Something failed when appending"
 msgstr "Quelque chose de mauvais c'est pass?"
 
-#: avidemux/gtk_gui.cpp:1108 avidemux/gtk_gui.cpp:1927
+#: avidemux/gtk_gui.cpp:1115
+#: avidemux/gtk_gui.cpp:1934
 msgid "Something bad happened (II)"
 msgstr "Quelque chose de mauvais c'est pass? (II)"
 
-#: avidemux/gtk_gui.cpp:1172
+#: avidemux/gtk_gui.cpp:1179
 msgid "Cannot save the audio in copy mode"
-msgstr "Ne peut pas sauvegarder l'audio en mode copie"
+msgstr "Ne peut pas enregistrer l'audio en mode copie"
 
-#: avidemux/gtk_gui.cpp:1172
+#: avidemux/gtk_gui.cpp:1179
 msgid "Select WAV PCM as the audio codec, otherwise the audio file would be raw PCM."
-msgstr ""
-"Choisissez WAV PCM comme codec audio, autrement le fichier audio sera en raw "
-"PCM."
+msgstr "Choisissez WAV PCM comme codec audio, autrement le fichier audio sera en PCM brut."
 
-#: avidemux/gtk_gui.cpp:1180 avidemux/gtk_gui.cpp:1537
+#: avidemux/gtk_gui.cpp:1187
+#: avidemux/gtk_gui.cpp:1544
 msgid "Saving audio"
-msgstr "Sauve la piste audio"
+msgstr "Enregistre la piste audio"
 
-#: avidemux/gtk_gui.cpp:1257
+#: avidemux/gtk_gui.cpp:1264
 msgid "Get Frame"
 msgstr ""
 
-#: avidemux/gtk_gui.cpp:1257
+#: avidemux/gtk_gui.cpp:1264
 msgid "Cannot get this frame to save"
 msgstr "Ne peut enregistrer l'image"
 
-#: avidemux/gtk_gui.cpp:1294
+#: avidemux/gtk_gui.cpp:1301
 msgid "Mark A > B"
 msgstr "Marque A > B"
 
-#: avidemux/gtk_gui.cpp:1294
+#: avidemux/gtk_gui.cpp:1301
 msgid "Set your markers correctly."
 msgstr "Mettez vos marqueurs correctement."
 
-#: avidemux/gtk_gui.cpp:1303
+#: avidemux/gtk_gui.cpp:1310
 msgid "Saving as set of jpegs"
-msgstr "Sauve comme un jeu de JPEGs"
+msgstr "Enregistre comme un jeu de JPEGs"
 
-#: avidemux/gtk_gui.cpp:1309
+#: avidemux/gtk_gui.cpp:1316
 msgid "Cannot decode frame"
 msgstr "Ne peut d?coder l'image"
 
-#: avidemux/gtk_gui.cpp:1309
+#: avidemux/gtk_gui.cpp:1316
 msgid "Aborting."
 msgstr "Annulation."
 
-#: avidemux/gtk_gui.cpp:1320 avidemux/gtk_gui.cpp:1339
-#: avidemux/gtk_gui.cpp:2271
+#: avidemux/gtk_gui.cpp:1327
+#: avidemux/gtk_gui.cpp:1346
+#: avidemux/gtk_gui.cpp:2278
 msgid "Done"
 msgstr "Fini"
 
-#: avidemux/gtk_gui.cpp:1320
+#: avidemux/gtk_gui.cpp:1327
 #, c-format
 msgid "Saved %d images."
-msgstr "Sauv? %d images."
+msgstr "%d images enregistr?es."
 
-#: avidemux/gtk_gui.cpp:1322
+#: avidemux/gtk_gui.cpp:1329
 msgid "Error"
 msgstr "Erreur"
 
-#: avidemux/gtk_gui.cpp:1322
+#: avidemux/gtk_gui.cpp:1329
 msgid "Could not save all images."
 msgstr "N'a pas pu enregistrer toutes les images"
 
-#: avidemux/gtk_gui.cpp:1339
+#: avidemux/gtk_gui.cpp:1346
 #, c-format
 msgid "Saved \"%s\"."
 msgstr "Enregistr? ??%s??."
 
-#: avidemux/gtk_gui.cpp:1341
+#: avidemux/gtk_gui.cpp:1348
 msgid "BMP op failed"
 msgstr ""
 
-#: avidemux/gtk_gui.cpp:1341
+#: avidemux/gtk_gui.cpp:1348
 #, c-format
 msgid "Saving %s as a BMP file failed."
-msgstr ""
+msgstr "Echec de l'enregistrement de %s comme fichier BMP."
 
-#: avidemux/gtk_gui.cpp:1361 avidemux/gtk_gui.cpp:1427
+#: avidemux/gtk_gui.cpp:1368
+#: avidemux/gtk_gui.cpp:1434
 msgid "Failed to open the file"
 msgstr "Echec d'ouverture de fichier"
 
-#: avidemux/gtk_gui.cpp:1361 avidemux/gtk_gui.cpp:1427
+#: avidemux/gtk_gui.cpp:1368
+#: avidemux/gtk_gui.cpp:1434
 msgid "Not a WAV file?"
 msgstr "Ce n'est pas un fichier WAV??"
 
-#: avidemux/gtk_gui.cpp:1362
+#: avidemux/gtk_gui.cpp:1369
 msgid "WAV open file failed..."
 msgstr "Echec de l'ouverture fichier WAV..."
 
-#: avidemux/gtk_gui.cpp:1491
+#: avidemux/gtk_gui.cpp:1498
 msgid "Cannot decompress audio frame"
 msgstr "Ne peut d?compresser l'image audio"
 
-#: avidemux/gtk_gui.cpp:1505
+#: avidemux/gtk_gui.cpp:1512
 msgid "Memory Error"
 msgstr "Erreur m?moire"
 
-#: avidemux/gtk_gui.cpp:1558
+#: avidemux/gtk_gui.cpp:1565
 msgid "No frames to encode"
 msgstr "Pas d'images ? encoder"
 
-#: avidemux/gtk_gui.cpp:1558
+#: avidemux/gtk_gui.cpp:1565
 msgid "Please check markers. Is \"A>\" == \">B\"?"
-msgstr "V?rifiez les marqueurs. ??A>? == ?>B????"
+msgstr "V?rifiez les marqueurs. ??A> ? == ? >B????"
 
-#: avidemux/gtk_gui.cpp:1697
+#: avidemux/gtk_gui.cpp:1704
 msgid "Saving raw video stream"
-msgstr "Sauver la video brute (flux ?lementaire)"
+msgstr "Enregistrer la video brute (flux ?l?mentaire)"
 
-#: avidemux/gtk_gui.cpp:1843
+#: avidemux/gtk_gui.cpp:1850
 msgid "Checking video"
-msgstr ""
+msgstr "V?rification de la vid?o"
 
-#: avidemux/gtk_gui.cpp:1859
+#: avidemux/gtk_gui.cpp:1866
 msgid "No error found"
 msgstr "Aucune erreur trouv?e"
 
-#: avidemux/gtk_gui.cpp:1863
+#: avidemux/gtk_gui.cpp:1870
 #, c-format
 msgid "Errors found in %u frames"
 msgstr "Erreurs trouv?es dans %u images"
 
-#: avidemux/gtk_gui.cpp:1881
+#: avidemux/gtk_gui.cpp:1888
 msgid "Cannot decompress the audio stream"
 msgstr "Ne peut d?compresser le flux audio"
 
-#: avidemux/gtk_gui.cpp:1881
+#: avidemux/gtk_gui.cpp:1888
 msgid "Switch audio codec to Copy."
 msgstr "Commutez le codec audio en ??Copie??."
 
-#: avidemux/gtk_gui.cpp:1908
+#: avidemux/gtk_gui.cpp:1915
 msgid "Cannot delete the selection."
 msgstr "Ne peut pas effacer la s?lection."
 
-#: avidemux/gtk_gui.cpp:1913
+#: avidemux/gtk_gui.cpp:1920
 msgid "You can't remove all frames"
 msgstr "Vous ne pouvez pas enlever toutes les images"
 
-#: avidemux/gtk_gui.cpp:1989
+#: avidemux/gtk_gui.cpp:1996
 msgid "Could not get tracks info"
 msgstr "Ne pouvait pas obtenir des infos de la piste"
 
-#: avidemux/gtk_gui.cpp:1997
+#: avidemux/gtk_gui.cpp:2004
 msgid "Take audio from video file"
-msgstr "R?cup?rer l'audio venant du fichier vid?o"
+msgstr "R?cup?rer l'audio venant du fichier vid?o"
 
-#: avidemux/gtk_gui.cpp:1998 avidemux/gtk_gui.cpp:2097
+#: avidemux/gtk_gui.cpp:2005
+#: avidemux/gtk_gui.cpp:2104
 msgid "No audio"
 msgstr "Pas d'audio"
 
-#: avidemux/gtk_gui.cpp:1999 avidemux/gtk_gui.cpp:2098
+#: avidemux/gtk_gui.cpp:2006
+#: avidemux/gtk_gui.cpp:2105
 msgid "External AC3"
 msgstr "AC3 externe"
 
-#: avidemux/gtk_gui.cpp:1999 avidemux/gtk_gui.cpp:2098
+#: avidemux/gtk_gui.cpp:2006
+#: avidemux/gtk_gui.cpp:2105
 msgid "Take audio from external AC3 file"
 msgstr "Prendre l'audio d'un fichier AC3 externe"
 
-#: avidemux/gtk_gui.cpp:2000 avidemux/gtk_gui.cpp:2099
+#: avidemux/gtk_gui.cpp:2007
+#: avidemux/gtk_gui.cpp:2106
 msgid "External MP3"
-msgstr "MP3/MP2 externe"
+msgstr "MP3 externe"
 
-#: avidemux/gtk_gui.cpp:2000 avidemux/gtk_gui.cpp:2099
+#: avidemux/gtk_gui.cpp:2007
+#: avidemux/gtk_gui.cpp:2106
 msgid "Take audio from external MP3 file"
-msgstr "Prendre l'audio d'un fichier MP2/MP3 externe"
+msgstr "Prendre l'audio d'un fichier MP3 externe"
 
-#: avidemux/gtk_gui.cpp:2001 avidemux/gtk_gui.cpp:2100
+#: avidemux/gtk_gui.cpp:2008
+#: avidemux/gtk_gui.cpp:2107
 msgid "External WAV"
 msgstr "Wav externe"
 
-#: avidemux/gtk_gui.cpp:2001 avidemux/gtk_gui.cpp:2100
+#: avidemux/gtk_gui.cpp:2008
+#: avidemux/gtk_gui.cpp:2107
 msgid "Take audio from external WAV file"
 msgstr "Prendre l'audio d'un fichier WAV externe"
 
-#: avidemux/gtk_gui.cpp:2005 avidemux/gtk_gui.cpp:2105
+#: avidemux/gtk_gui.cpp:2012
+#: avidemux/gtk_gui.cpp:2112
 msgid "_Audio source:"
-msgstr "Source Audio"
+msgstr "Source _audio :"
 
-#: avidemux/gtk_gui.cpp:2009 avidemux/gtk_gui.cpp:2106
+#: avidemux/gtk_gui.cpp:2016
+#: avidemux/gtk_gui.cpp:2113
 msgid "_External file:"
-msgstr "_Fichier externe"
+msgstr "_Fichier externe :"
 
-#: avidemux/gtk_gui.cpp:2024
+#: avidemux/gtk_gui.cpp:2031
 msgid "_Track from video:"
-msgstr "_Piste de la vid?o:"
+msgstr "_Piste de la vid?o :"
 
-#: avidemux/gtk_gui.cpp:2034
+#: avidemux/gtk_gui.cpp:2041
 msgid "Main Audio Track"
-msgstr "Piste Audio Principale"
+msgstr "Piste audio principale"
 
-#: avidemux/gtk_gui.cpp:2040 avidemux/gtk_gui.cpp:2118
+#: avidemux/gtk_gui.cpp:2047
+#: avidemux/gtk_gui.cpp:2125
 msgid "Cannot load"
 msgstr "Ne peut pas charger"
 
-#: avidemux/gtk_gui.cpp:2040 avidemux/gtk_gui.cpp:2118
+#: avidemux/gtk_gui.cpp:2047
+#: avidemux/gtk_gui.cpp:2125
 msgid "The selected audio file does not exist."
-msgstr "L'audio s?lectionn? n'existe pas"
+msgstr "L'audio s?lectionn? n'existe pas."
 
-#: avidemux/gtk_gui.cpp:2115
+#: avidemux/gtk_gui.cpp:2122
 msgid "Second Audio Track"
 msgstr "Seconde piste audio"
 
-#: avidemux/gtk_gui.cpp:2147
+#: avidemux/gtk_gui.cpp:2154
 msgid "Error loading the MP3 file"
 msgstr "Erreur de chargement de fichier MP3"
 
-#: avidemux/gtk_gui.cpp:2156 avidemux/gtk_gui.cpp:2178
-#: avidemux/gtk_gui.cpp:2200
+#: avidemux/gtk_gui.cpp:2163
+#: avidemux/gtk_gui.cpp:2185
+#: avidemux/gtk_gui.cpp:2207
 msgid "Second track loaded"
 msgstr "Seconde piste charg?e"
 
-#: avidemux/gtk_gui.cpp:2170
+#: avidemux/gtk_gui.cpp:2177
 msgid "Error loading the AC3 file"
 msgstr "Erreur de chargement de fichier AC3"
 
-#: avidemux/gtk_gui.cpp:2192
+#: avidemux/gtk_gui.cpp:2199
 msgid "Error loading the WAV file"
 msgstr "Erreur de chargement de fichier WAV"
 
-#: avidemux/gtk_gui.cpp:2259
+#: avidemux/gtk_gui.cpp:2266
 msgid "Saving failed"
-msgstr "Sauvegarde ?chou?e"
+msgstr "Echec de l'enregistrement"
 
-#: avidemux/gtk_gui.cpp:2259
+#: avidemux/gtk_gui.cpp:2266
 msgid "Saving the job failed. Maybe you have permission issue with ~/.avidemux"
-msgstr ""
-"La sauvegarde des t?ches a ?chou?e. Peut-?tre est ce la permission avec ~/."
-"avidemux"
+msgstr "Echec de l'enregistrement des t?ches. Peut-?tre qu'il des probl?me de permission avec ~/.avidemux"
 
-#: avidemux/gtk_gui.cpp:2271
+#: avidemux/gtk_gui.cpp:2278
 #, c-format
 msgid "File %s has been successfully saved."
 msgstr "Le fichier ??%s?? a ?t? enregistr? avec succ?s."
 
-#: avidemux/gtk_gui.cpp:2275
+#: avidemux/gtk_gui.cpp:2282
 #, c-format
 msgid "File %s was NOT saved correctly."
 msgstr "Le fichier ??%s?? n'a pas ?t? enregistr? correctement."
 
-#: avidemux/gtk_gui.cpp:2438
+#: avidemux/gtk_gui.cpp:2445
 msgid "AvsProxy"
 msgstr "AvsProxy"
 
-#: avidemux/gtk_gui.cpp:2438
+#: avidemux/gtk_gui.cpp:2445
 msgid ""
 "Failed to connect to avsproxy.\n"
 "Is it running ?"
 msgstr ""
+"Echec de connexion ? l'avsproxy.\n"
+"Est il lanc? ?"
 
-#: avidemux/gtk_gui.cpp:2443
+#: avidemux/gtk_gui.cpp:2450
 msgid "avsproxy"
 msgstr "avsproxy"
 
-#: avidemux/gtk_gui.cpp:2471
+#: avidemux/gtk_gui.cpp:2478
 msgid "Frame type:"
-msgstr "Type image:"
+msgstr "Type d'image :"
 
-#: avidemux/gtk_gui.cpp:2472
+#: avidemux/gtk_gui.cpp:2479
 msgid "Frame size:"
-msgstr "Taille image:"
+msgstr "Taille de l'image :"
 
-#: avidemux/gtk_gui.cpp:2474
+#: avidemux/gtk_gui.cpp:2481
 msgid "Frame Hex Dump"
-msgstr ""
+msgstr "Dump hexad?cimal des images"
 
-#: avidemux/guiplay.cpp:361
+#: avidemux/guiplay.cpp:359
 msgid "Trouble initializing audio device"
 msgstr "Ennui en initialisant le dispositif audio"
 
@@ -6917,21 +7890,31 @@
 msgid "An audio track is necessary to create such file"
 msgstr "Une piste est n?cessaire pour cr?er un fichier"
 
-#: avidemux/gui_autodrive.cpp:79
+#: avidemux/gui_autodrive.cpp:63
+msgid "You need Xvid4 and either LAME or FAAC support for the iPod profile"
+msgstr ""
+
+#: avidemux/gui_autodrive.cpp:74
+msgid "Cannot select the MPEG-4 SP codec."
+msgstr "Ne peut pas s?lectionner le codec MPEG4 SP."
+
+#: avidemux/gui_autodrive.cpp:121
 msgid ""
 "You don't have LAME!.\n"
 "It is needed to create FLV  video."
 msgstr ""
+"Vous n'avez pas LAME !\n"
+"C'est n?cessaire pour cr?er des vid?os FLV."
 
-#: avidemux/gui_autodrive.cpp:93
+#: avidemux/gui_autodrive.cpp:135
 msgid "Cannot select FLV1  codec."
-msgstr ""
+msgstr "Impossible de s?lectionner le codec FLV1."
 
-#: avidemux/gui_autodrive.cpp:120
+#: avidemux/gui_autodrive.cpp:162
 msgid "Cannot select mpeg4 sp codec."
-msgstr "Ne peut pas s?lectionner le codec MPEG4 sp."
+msgstr "Ne peut pas s?lectionner le codec MPEG4 SP."
 
-#: avidemux/gui_autodrive.cpp:155
+#: avidemux/gui_autodrive.cpp:197
 msgid ""
 "You don't have FAAC!.\n"
 "It is needed to create PSP compatible video."
@@ -6941,22 +7924,25 @@
 
 #: avidemux/GUI_jobs.cpp:37
 msgid "Something very wrong happened when building joblist."
-msgstr ""
+msgstr "Quelque chose de vraiment mauvais est arriv? lors de la construction de la liste des t?ches."
 
 #: avidemux/GUI_jobs.cpp:42
 msgid "There are no jobs stored"
-msgstr ""
+msgstr "Il n'y a pas de t?ches stock?es"
 
-#: avidemux/gui_navigate.cpp:76 avidemux/gui_navigate.cpp:114
-#: avidemux/gui_navigate.cpp:390 avidemux/gui_navigate.cpp:426
+#: avidemux/gui_navigate.cpp:73
+#: avidemux/gui_navigate.cpp:111
+#: avidemux/gui_navigate.cpp:393
+#: avidemux/gui_navigate.cpp:429
 msgid "Decompressing error"
-msgstr "Erreur d?compression"
+msgstr "Erreur de d?compression"
 
-#: avidemux/gui_navigate.cpp:76
+#: avidemux/gui_navigate.cpp:73
 msgid "Cannot decode next frame."
 msgstr "Ne peut pas d?coder la prochaine image."
 
-#: avidemux/gui_navigate.cpp:114 avidemux/gui_navigate.cpp:426
+#: avidemux/gui_navigate.cpp:111
+#: avidemux/gui_navigate.cpp:429
 msgid "Cannot decode keyframe."
 msgstr "Ne peut pas d?coder l'image-cl?."
 
@@ -6964,11 +7950,11 @@
 msgid "Seeking"
 msgstr "Recherche"
 
-#: avidemux/gui_navigate.cpp:315
+#: avidemux/gui_navigate.cpp:318
 msgid "Finding black frames"
-msgstr ""
+msgstr "Recherche des images noires"
 
-#: avidemux/gui_navigate.cpp:390
+#: avidemux/gui_navigate.cpp:393
 msgid "Cannot decode the frame."
 msgstr "Ne peut pas d?coder l'image."
 
@@ -6980,7 +7966,8 @@
 msgid "Select Copy as the video codec."
 msgstr "S?lectionner ??Copie?? pour le codec vid?o."
 
-#: avidemux/gui_savenew.cpp:207 avidemux/gui_savenew.cpp:223
+#: avidemux/gui_savenew.cpp:207
+#: avidemux/gui_savenew.cpp:223
 #: avidemux/gui_savenew.cpp:236
 msgid "Incompatible output format"
 msgstr "Format de sortie incompatible"
@@ -6997,11 +7984,13 @@
 msgid "Select dual audio AVI to write"
 msgstr "S?lection d'un fichier AVI double audio ? ?crire"
 
-#: avidemux/gui_savenew.cpp:280 avidemux/gui_savenew.cpp:298
+#: avidemux/gui_savenew.cpp:280
+#: avidemux/gui_savenew.cpp:298
 msgid "This cannot have packed VOP"
 msgstr "Ceci n'a pas de VOP empaquet?"
 
-#: avidemux/gui_savenew.cpp:280 avidemux/gui_savenew.cpp:298
+#: avidemux/gui_savenew.cpp:280
+#: avidemux/gui_savenew.cpp:298
 msgid "It is not MPEG-4 video. File will not be saved."
 msgstr "Ce n'est pas une vid?o MPEG4. Le fichier ne sera pas enregistr?."
 
@@ -7013,3 +8002,56 @@
 "Vous pouvez avoir besoin de la copie intelligente.\n"
 "La permettez-vous??"
 
+#~ msgid ""
+#~ ".\n"
+#~ " Did you use too low / too high target for 2 pass ?"
+#~ msgstr ""
+#~ ".\n"
+#~ "Avez vous sp?cifi? une cible trop haute ou trop basse pour le mode 2 "
+#~ "passes ?"
+#~ msgid "Entry input for target file size or bitrate"
+#~ msgstr "Saisir la taille ou le d?bit du fichier cible"
+#~ msgid "Quantizer (0-51):"
+#~ msgstr "Quantificateur (0-51)?:"
+#~ msgid ""
+#~ "Uses chroma (color) components for motion for compression and helps the "
+#~ "quality"
+#~ msgstr ""
+#~ "Utilise les composants chromas (couleur) pour la compression de mouvement "
+#~ "et am?liore la qualit?"
+#~ msgid "Uncheck to enable fast p-skip"
+#~ msgstr "Pas de contr?le de saut P rapide"
+#~ msgid ""
+#~ "Lossless compression method which usually improves the bitrate usage by "
+#~ "15% (especially on high bitrate). Helps the quality a lot but is slower. "
+#~ msgstr ""
+#~ "M?thode de compression sans perte qui am?liore le d?bit de 15% "
+#~ "(particuli?rement pour les d?bits ?lev?s). Am?liore beaucoup la qualit? "
+#~ "mais est plus lent."
+#~ msgid ""
+#~ "Set the amount of blurring to use for block edges when they are found"
+#~ msgstr ""
+#~ "D?finit la valeur de flou ? utiliser pour les bords des blocs trouv?s"
+#~ msgid "Define the level for when deblocking is applied"
+#~ msgstr "D?finit le niveau quand le filtre de d?groupage est appliqu?"
+#~ msgid "<i>Threshold</i>"
+#~ msgstr "<i>Seuil</i>"
+#~ msgid "<i>Strength</i>"
+#~ msgstr "<i>Force</i>"
+#~ msgid "Custom matrix"
+#~ msgstr "Matrice personnalis?e"
+#~ msgid "Two pass, final size"
+#~ msgstr "Deux passes - Taille finale"
+#~ msgid "Two pass, average bitrate"
+#~ msgstr "Deux passes - d?bit moyen"
+#~ msgid "Overwrite file ?"
+#~ msgstr "Ecraser le fichier??"
+
+#, fuzzy
+#~ msgid "Mi_nimum value (will be scaled to 0):"
+#~ msgstr "Valeur mi_nimun (sera transform? ? 0) :"
+
+#, fuzzy
+#~ msgid "Ma_ximum value (will be scaled to 255):"
+#~ msgstr "Valeur ma_ximun (sera transform? ? 255) :"
+



From mean at mail.berlios.de  Fri Mar 28 19:50:26 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 28 Mar 2008 19:50:26 +0100
Subject: [Avidemux-svn-commit] r3942 - in
	branches/avidemux_2.5_branch_gruntster:
	autononreg/dialogFactory avidemux/ADM_coreUI/include
	avidemux/ADM_coreUI/src avidemux/ADM_script
	avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory
Message-ID: <200803281850.m2SIoQux006198@sheep.berlios.de>

Author: mean
Date: 2008-03-28 19:50:25 +0100 (Fri, 28 Mar 2008)
New Revision: 3942

Added:
   branches/avidemux_2.5_branch_gruntster/autononreg/dialogFactory/hex.js
   branches/avidemux_2.5_branch_gruntster/autononreg/dialogFactory/notch.js
Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_coreUI_internal.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_factory.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_factory.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSFunctions.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_dialogFactory.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_hex.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_matrix.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_notch.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_readOnlyText.cpp
Log:
[Merge]


Added: branches/avidemux_2.5_branch_gruntster/autononreg/dialogFactory/hex.js
===================================================================
--- branches/avidemux_2.5_branch_gruntster/autononreg/dialogFactory/hex.js	2008-03-28 14:40:56 UTC (rev 3941)
+++ branches/avidemux_2.5_branch_gruntster/autononreg/dialogFactory/hex.js	2008-03-28 18:50:25 UTC (rev 3942)
@@ -0,0 +1,10 @@
+//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
+var app = new Avidemux();
+var file="/work/samples/2mn.avi";
+var goodfcc="DIV3";
+var fps;
+
+	dialogFactoryHex();
+
+/* End of test
+*/

Added: branches/avidemux_2.5_branch_gruntster/autononreg/dialogFactory/notch.js
===================================================================
--- branches/avidemux_2.5_branch_gruntster/autononreg/dialogFactory/notch.js	2008-03-28 14:40:56 UTC (rev 3941)
+++ branches/avidemux_2.5_branch_gruntster/autononreg/dialogFactory/notch.js	2008-03-28 18:50:25 UTC (rev 3942)
@@ -0,0 +1,10 @@
+//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
+var app = new Avidemux();
+var file="/work/samples/2mn.avi";
+var goodfcc="DIV3";
+var fps;
+
+	dialogFactoryNotch();
+
+/* End of test
+*/

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_coreUI_internal.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_coreUI_internal.h	2008-03-28 14:40:56 UTC (rev 3941)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_coreUI_internal.h	2008-03-28 18:50:25 UTC (rev 3942)
@@ -58,7 +58,21 @@
 // UInteger	
 	CREATE_UINTEGER_T    *CreateUInteger;
 	DELETE_DIA_ELEM_T    *DestroyUInteger;
-	
+// Notch	
+	DIA_CREATE_NOTCH_T   *CreateNotch;
+	DELETE_DIA_ELEM_T    *DestroyNotch;
+// ReadonlyText
+	DIA_CREATE_READONLYTEXT_T *CreateReadonlyText;
+	DELETE_DIA_ELEM_T    *DestroyReadonlyText;
+// Text
+	DIA_CREATE_TEXT_T    *CreateText;
+	DELETE_DIA_ELEM_T    *DestroyText;
+// Hex
+	DIA_CREATE_HEX_T     *CreateHex;
+	DELETE_DIA_ELEM_T    *DestroyHex;
+// Matrix
+	CREATE_MATRIX_T      *CreateMatrix;
+	DELETE_DIA_ELEM_T    *DestroyMatrix;
 }FactoryDescriptor;
 //
 uint8_t DIA_factoryInit(FactoryDescriptor *d);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_factory.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_factory.h	2008-03-28 14:40:56 UTC (rev 3941)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_factory.h	2008-03-28 18:50:25 UTC (rev 3942)
@@ -103,6 +103,7 @@
 };
 
 /*********************************************/
+typedef diaElem  *(CREATE_MATRIX_T)(uint8_t *trix,const char *toggleTitle, uint32_t trixSize,const char *tip);
 
 class diaElemMatrix : public diaElem
 {
@@ -370,6 +371,7 @@
 };
 /*************************************************/
 /* The text MUST be copied internally ! */
+typedef diaElem *(DIA_CREATE_READONLYTEXT_T )(char *readOnly,const char *toggleTitle, const char *tip);
 class diaElemReadOnlyText : public diaElem
 {
 
@@ -382,6 +384,7 @@
   
 };
 /*************************************************/
+typedef diaElem *(DIA_CREATE_TEXT_T )(char **readOnly,const char *toggleTitle, const char *tip);
 /* The text MUST be copied internally ! */
 class diaElemText : public diaElem
 {
@@ -396,6 +399,7 @@
 };
 
 /*********************************************/
+typedef diaElem *(DIA_CREATE_NOTCH_T )(uint32_t yes,const char *toggleTitle, const char *tip);
 class diaElemNotch : public diaElem
 {
   uint32_t yesno;
@@ -404,7 +408,7 @@
   diaElemNotch(uint32_t yes,const char *toggleTitle, const char *tip=NULL);
   virtual ~diaElemNotch() ;
   void setMe(void *dialog, void *opaque,uint32_t line);
-  void getMe(void) {};
+  void getMe(void) ;
 };
 /*********************************************/
 class diaElemTabs 
@@ -443,6 +447,7 @@
   void finalize(void);
 };
 /**********************************************/
+typedef diaElem *(DIA_CREATE_HEX_T )(const char *toggleTitle, uint32_t dataSize,uint8_t *data);
 class diaElemHex : public diaElem
 {
   uint32_t dataSize;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_factory.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_factory.cpp	2008-03-28 14:40:56 UTC (rev 3941)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_factory.cpp	2008-03-28 18:50:25 UTC (rev 3942)
@@ -129,5 +129,93 @@
 		internalPointer->enable(onoff); 
 	}
 DIA_MKSTUBS(diaElemUInteger)
+// ****************** diaElemNotch ********************
+diaElemNotch ::diaElemNotch(uint32_t yes,const char *toggleTitle, const char *tip):
+	diaElem(ELEM_NOTCH)
+{
+	ADM_assert(Factory); 
+	internalPointer=Factory->CreateNotch(yes,toggleTitle,tip);
+}
+diaElemNotch ::~diaElemNotch()
+{
+	ADM_assert(Factory); 
+	Factory->DestroyNotch(internalPointer);
+	internalPointer=NULL;
+}
+
+DIA_MKSTUBS(diaElemNotch)
+// ****************** diaReadonlyText ********************
+diaElemReadOnlyText ::diaElemReadOnlyText(char *readyOnly,const char *toggleTitle,const char *tip):
+	diaElem(ELEM_ROTEXT)
+{
+	ADM_assert(Factory); 
+	internalPointer=Factory->CreateReadonlyText(readyOnly,toggleTitle,tip);
+}
+diaElemReadOnlyText ::~diaElemReadOnlyText()
+{
+	ADM_assert(Factory); 
+	Factory->DestroyReadonlyText(internalPointer);
+	internalPointer=NULL;
+}
+
+DIA_MKSTUBS(diaElemReadOnlyText)
+// ****************** diaText ********************
+diaElemText ::diaElemText(char **readyOnly,const char *toggleTitle,const char *tip):
+	diaElem(ELEM_TEXT)
+{
+	ADM_assert(Factory); 
+	internalPointer=Factory->CreateText(readyOnly,toggleTitle,tip);
+}
+diaElemText ::~diaElemText()
+{
+	ADM_assert(Factory); 
+	Factory->DestroyText(internalPointer);
+	internalPointer=NULL;
+}
+void      diaElemText::enable(uint32_t onoff)
+	{ 
+		ADM_assert(internalPointer); 
+		internalPointer->enable(onoff); 
+	}
+DIA_MKSTUBS(diaElemText)
 // ******************************************	
+
+diaElemHex ::diaElemHex(const char *toggleTitle, uint32_t dataSize,uint8_t *data):
+	diaElem(ELEM_HEXDUMP)
+{
+	ADM_assert(Factory); 
+	internalPointer=Factory->CreateHex(toggleTitle,dataSize,data);
+}
+diaElemHex ::~diaElemHex()
+{
+	ADM_assert(Factory); 
+	Factory->DestroyHex(internalPointer);
+	internalPointer=NULL;
+}
+void      diaElemHex::finalize(void)
+	{ 
+		ADM_assert(internalPointer); 
+		internalPointer->finalize(); 
+	}
+DIA_MKSTUBS(diaElemHex)
+// ****************** diaElemMatrix ********************
+diaElemMatrix ::diaElemMatrix(uint8_t *trix,const char *toggleTitle, uint32_t trixSize,const char *tip):
+	diaElem(ELEM_MATRIX)
+{
+	ADM_assert(Factory); 
+	internalPointer=Factory->CreateMatrix(trix,toggleTitle,trixSize,tip);
+}
+diaElemMatrix ::~diaElemMatrix()
+{
+	ADM_assert(Factory); 
+	Factory->DestroyMatrix(internalPointer);
+	internalPointer=NULL;
+}
+void      diaElemMatrix::enable(uint32_t onoff)
+	{ 
+		ADM_assert(internalPointer); 
+		internalPointer->enable(onoff); 
+	}
+DIA_MKSTUBS(diaElemMatrix)
+
 // EOF

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSFunctions.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSFunctions.cpp	2008-03-28 14:40:56 UTC (rev 3941)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSFunctions.cpp	2008-03-28 18:50:25 UTC (rev 3942)
@@ -82,6 +82,7 @@
 JSBool facDirSel(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
 JSBool facButton(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
 JSBool facMatrix(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
+JSBool facNotch(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
 JSBool facSlider(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
 JSBool crashTest(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
 JSBool assertTest(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
@@ -102,23 +103,24 @@
   {"exec",          systemExecute,        3},
   {"include",          systemInclude,        1},
   {"pathOnly",          pathOnly,        1},
-  {"dialogFactoryInt",          facInt,        0},
-  {"dialogFactoryFloat",        facFloat,        0},
+  {"dialogFactoryInt",          facInt,           0},
+  {"dialogFactoryFloat",        facFloat,         0},
   {"dialogFactoryToggle",       facToggle,        0},
-  {"dialogFactoryMenu",         facMenu,        0},
-  {"dialogFactoryFileSel",      facFile,        0},
-  {"dialogFactoryBitrate",      facBitrate,        0},
-  {"dialogFactoryBar",        facBar,        0},
-  {"dialogFactoryRoText",     facRoText,        0},
-  {"dialogFactoryText",       facText,        0},
-  {"dialogFactoryTabs",       facTab,        0},
+  {"dialogFactoryMenu",         facMenu,          0},
+  {"dialogFactoryFileSel",      facFile,          0},
+  {"dialogFactoryBitrate",      facBitrate,       0},
+  {"dialogFactoryBar",        facBar,             0},
+  {"dialogFactoryRoText",     facRoText,          0},
+  {"dialogFactoryText",       facText,            0},
+  {"dialogFactoryTabs",       facTab,             0},
   {"dialogFactoryDirSel",       facDirSel,        0},
-  {"dialogFactoryFrame",       facFrame,        0},
-  {"dialogFactoryHex",       facHex,        0},
+  {"dialogFactoryFrame",       facFrame,          0},
+  {"dialogFactoryHex",       facHex,              0},
   {"dialogFactoryButton",       facButton,        0},
   {"dialogFactorySlider",       facSlider,        0},
   {"dialogFactoryMatrix",       facMatrix,        0},
-  {"crashTest",               crashTest,        0},
+  {"dialogFactoryNotch",       facNotch,		  0},
+  {"crashTest",               crashTest,          0},
   {"assertTest",               assertTest,        0},
   {0}
 };
@@ -820,6 +822,22 @@
       
       
 }
+JSBool facNotch(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
+{
+    
+	diaElemNotch notch(1,"Notch");
+      
+         diaElem *elems[]={&notch   };
+  if(diaFactoryRun("Test Notch",1,elems))
+  {
+    *rval = BOOLEAN_TO_JSVAL(1);
+    
+  }else
+    *rval = BOOLEAN_TO_JSVAL(0);
+  return JS_TRUE;
+      
+      
+}
 
 JSBool crashTest(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
 {

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_dialogFactory.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_dialogFactory.cpp	2008-03-28 14:40:56 UTC (rev 3941)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_dialogFactory.cpp	2008-03-28 18:50:25 UTC (rev 3942)
@@ -303,6 +303,16 @@
 extern CREATE_UINTEGER_T gtkCreateUInteger;
 extern DELETE_DIA_ELEM_T gtkDestroyInteger;
 extern DELETE_DIA_ELEM_T gtkDestroyUInteger;
+extern DIA_CREATE_NOTCH_T  gtkCreateNotch;
+extern DELETE_DIA_ELEM_T   gtkDestroyNotch;
+extern DIA_CREATE_READONLYTEXT_T gtkCreateRoText;
+extern DIA_CREATE_TEXT_T gtkCreateText;
+extern DELETE_DIA_ELEM_T   gtkDestroyRoText;
+extern DELETE_DIA_ELEM_T   gtkDestroyText;
+extern DIA_CREATE_HEX_T    gtkCreateHex;
+extern DELETE_DIA_ELEM_T   gtkDestroyHex;
+extern CREATE_MATRIX_T     gtkCreateMatrix;
+extern DELETE_DIA_ELEM_T   gtkDestroyMatrix;
 //************
 static FactoryDescriptor GtkFactoryDescriptor=
 {
@@ -322,7 +332,23 @@
 	&gtkDestroyInteger,
 	// UInteger
 	&gtkCreateUInteger,
-	&gtkDestroyUInteger
+	&gtkDestroyUInteger,
+	// Notch
+	&gtkCreateNotch,
+	&gtkDestroyNotch,
+	// RoText
+	&gtkCreateRoText,
+	&gtkDestroyRoText,
+	// Text
+	&gtkCreateText,
+	&gtkDestroyText,
+	// Hex
+	&gtkCreateHex,
+	&gtkDestroyHex,
+	// Matrix
+	&gtkCreateMatrix,
+	&gtkDestroyMatrix
+	
 };
 
 /**

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_hex.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_hex.cpp	2008-03-28 14:40:56 UTC (rev 3941)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_hex.cpp	2008-03-28 18:50:25 UTC (rev 3942)
@@ -15,8 +15,22 @@
 
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
 #include "DIA_factory.h"
+namespace ADM_GtkFactory
+{
+class diaElemHex : public diaElem
+{
+  uint32_t dataSize;
+  uint8_t  *data;
+  
+public:
+  
+  diaElemHex(const char *toggleTitle, uint32_t dataSize,uint8_t *data);
+  virtual ~diaElemHex() ;
+  void setMe(void *dialog, void *opaque,uint32_t line);
+  void getMe(void) ;
+  void finalize(void);
+};
 
-
 #define HEX_NB_LINE   8
 #define HEX_NB_COLUMN 16
 
@@ -212,4 +226,19 @@
 
 };
 
+} // End of namespace
+//****************************Hoook*****************
+
+diaElem  *gtkCreateHex(const char *toggleTitle, uint32_t dataSize,uint8_t *data)
+{
+	return new  ADM_GtkFactory::diaElemHex(toggleTitle,dataSize,data);
+}
+void gtkDestroyHex(diaElem *e)
+{
+	ADM_GtkFactory::diaElemHex *a=(ADM_GtkFactory::diaElemHex *)e;
+	delete a;
+}
 //EOF
+
+
+//EOF

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_matrix.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_matrix.cpp	2008-03-28 14:40:56 UTC (rev 3941)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_matrix.cpp	2008-03-28 18:50:25 UTC (rev 3942)
@@ -15,6 +15,20 @@
 
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
 #include "DIA_factory.h"
+namespace ADM_GtkFactory
+{
+class diaElemMatrix : public diaElem
+{
+  protected:
+  public:
+    uint8_t *_matrix;
+    uint32_t _matrixSize;
+    		diaElemMatrix(uint8_t *trix,const char *toggleTitle, uint32_t trixSize,const char *tip=NULL);
+  virtual   ~diaElemMatrix() ;
+  void      setMe(void *dialog, void *opaque,uint32_t line);
+  void      getMe(void);
+  void      enable(uint32_t onoff) ;
+};
 
 diaElemMatrix::diaElemMatrix(uint8_t *trix,const char *toggleTitle, uint32_t trixSize,const char *tip)
   : diaElem(ELEM_MATRIX)
@@ -114,5 +128,16 @@
 			  gtk_widget_set_sensitive( GTK_WIDGET(arrayWidget[index++]),onoff);
 		  }
 }
+} // End of namespace
+//****************************Hoook*****************
 
+diaElem  *gtkCreateMatrix(uint8_t *trix,const char *toggleTitle, uint32_t trixSize,const char *tip)
+{
+	return new  ADM_GtkFactory::diaElemMatrix(trix,toggleTitle,trixSize,tip);
+}
+void gtkDestroyMatrix(diaElem *e)
+{
+	ADM_GtkFactory::diaElemMatrix *a=(ADM_GtkFactory::diaElemMatrix *)e;
+	delete a;
+}
 //EOF

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_notch.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_notch.cpp	2008-03-28 14:40:56 UTC (rev 3941)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_notch.cpp	2008-03-28 18:50:25 UTC (rev 3942)
@@ -16,7 +16,22 @@
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
 #include "DIA_factory.h"
 
+namespace ADM_GtkFactory
+{
 
+
+class diaElemNotch : public diaElem
+{
+  uint32_t yesno;
+public:
+  
+  diaElemNotch(uint32_t yes,const char *toggleTitle, const char *tip=NULL);
+  virtual ~diaElemNotch() ;
+  void setMe(void *dialog, void *opaque,uint32_t line);
+  void getMe(void) {};
+};
+
+
 diaElemNotch::diaElemNotch(uint32_t yes,const char *toggleTitle, const char *tip)
   : diaElem(ELEM_NOTCH)
 {
@@ -56,5 +71,17 @@
                     (GtkAttachOptions) (0), 0, 0);
   
 }
+//****************************************************
+} // End of namespace
+//****************************Hoook*****************
 
+diaElem  *gtkCreateNotch(uint32_t yes,const char *toggleTitle, const char *tip)
+{
+	return new  ADM_GtkFactory::diaElemNotch(yes,toggleTitle, tip);
+}
+void gtkDestroyNotch(diaElem *e)
+{
+	ADM_GtkFactory::diaElemNotch *a=(ADM_GtkFactory::diaElemNotch *)e;
+	delete a;
+}
 //EOF

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_readOnlyText.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_readOnlyText.cpp	2008-03-28 14:40:56 UTC (rev 3941)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_readOnlyText.cpp	2008-03-28 18:50:25 UTC (rev 3942)
@@ -15,8 +15,34 @@
 
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
 #include "DIA_factory.h"
+namespace ADM_GtkFactory
+{
 
+class diaElemReadOnlyText : public diaElem
+{
 
+public:
+  
+  diaElemReadOnlyText(char *readyOnly,const char *toggleTitle,const char *tip=NULL);
+  virtual ~diaElemReadOnlyText() ;
+  void setMe(void *dialog, void *opaque,uint32_t line);
+  void getMe(void);
+  
+};
+
+class diaElemText : public diaElem
+{
+
+public:
+  
+  diaElemText(char **text,const char *toggleTitle,const char *tip=NULL);
+  virtual ~diaElemText() ;
+  void setMe(void *dialog, void *opaque,uint32_t line);
+  void getMe(void);
+  void enable(uint32_t onoff);
+};
+
+
 diaElemReadOnlyText::diaElemReadOnlyText(char *readyOnly,const char *toggleTitle,const char *tip)
   : diaElem(ELEM_ROTEXT)
 {
@@ -120,5 +146,26 @@
   GtkWidget *widget=(GtkWidget *)myWidget;
   gtk_widget_set_sensitive(GTK_WIDGET(myWidget),onoff);
 }
+} // End of namespace
+//****************************Hoook*****************
 
+diaElem  *gtkCreateRoText(char *text,const char *toggleTitle, const char *tip)
+{
+	return new  ADM_GtkFactory::diaElemReadOnlyText(text,toggleTitle,tip);
+}
+void gtkDestroyRoText(diaElem *e)
+{
+	ADM_GtkFactory::diaElemReadOnlyText *a=(ADM_GtkFactory::diaElemReadOnlyText *)e;
+	delete a;
+}
+
+diaElem  *gtkCreateText(char **text,const char *toggleTitle, const char *tip)
+{
+	return new  ADM_GtkFactory::diaElemText(text,toggleTitle,tip);
+}
+void gtkDestroyText(diaElem *e)
+{
+	ADM_GtkFactory::diaElemText *a=(ADM_GtkFactory::diaElemText *)e;
+	delete a;
+}
 //EOF



From gruntster at mail.berlios.de  Fri Mar 28 20:02:19 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Fri, 28 Mar 2008 20:02:19 +0100
Subject: [Avidemux-svn-commit] r3943 -
	branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4
Message-ID: <200803281902.m2SJ2Jfu007308@sheep.berlios.de>

Author: gruntster
Date: 2008-03-28 20:02:18 +0100 (Fri, 28 Mar 2008)
New Revision: 3943

Modified:
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ui_support.cpp
Log:
[Qt4] correctly cache translated strings

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ui_support.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ui_support.cpp	2008-03-28 18:50:25 UTC (rev 3942)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ui_support.cpp	2008-03-28 19:02:18 UTC (rev 3943)
@@ -1,12 +1,8 @@
 #include <stdio.h>
-#include <string.h>
 
 #include <QApplication>
-#include <QLocale>
-#include <QTranslator>
+#include <QtCore>
 
-static const int MAX_MESSAGE_COUNT = 300;
-static char* translatedMessage[MAX_MESSAGE_COUNT];
 static QTranslator qtTranslator;
 static QTranslator avidemuxTranslator;
 
@@ -23,28 +19,17 @@
 		printf("FAILED\n");		
 }
 
-void initTranslator(void)
-{
-	memset(translatedMessage, 0, MAX_MESSAGE_COUNT * sizeof(char*));
-}
+void initTranslator(void) {}
 
 const char* translate(const char *__domainname, const char *__msgid)
 {
-	static int counter = 0;
-	QString messageString = QApplication::translate("",  __msgid);
+	static QMap<QString, QByteArray> map;
+	QString msgid = QString(__msgid);
 
-	counter++;
+	if (!map.contains(msgid))
+		map[msgid] = QApplication::translate("", __msgid).toUtf8();
 
-	if (counter >= MAX_MESSAGE_COUNT)
-		counter = 0;
-
-	if (translatedMessage[counter])
-		delete[] translatedMessage[counter];
-
-	translatedMessage[counter] = new char[messageString.toUtf8().length() + 1];
-	strcpy(translatedMessage[counter], messageString.toUtf8().constData());
-
-	return translatedMessage[counter];
+	return map.value(msgid).constData();
 }
 
 #define HIDE_STRING_FROM_QT(domainname, msgid)  QApplication::translate(domainname, msgid) // to hide string from lupdate so a true test can be conducted
@@ -61,17 +46,8 @@
 	printf("[Locale] Test: &Edit -> %s\n\n", HIDE_STRING_FROM_QT("MainWindow", "&Edit").toUtf8().data());
 }
 
-void destroyTranslator(void)
-{
-	for (int counter = 0; counter < MAX_MESSAGE_COUNT; counter++)
-	{
-		if (translatedMessage[counter])
-			delete[] translatedMessage[counter];
-	}
+void destroyTranslator(void) {}
 
-	memset(translatedMessage, 0, MAX_MESSAGE_COUNT * sizeof(char*));
-}
-
 void getUIDescription(char* desc)
 {
 	sprintf(desc, "Qt4 (%s)", qVersion());



From gruntster at mail.berlios.de  Sat Mar 29 12:46:42 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Sat, 29 Mar 2008 12:46:42 +0100
Subject: [Avidemux-svn-commit] r3944 - branches/avidemux_2.4_branch/avidemux
Message-ID: <200803291146.m2TBkgTn000472@sheep.berlios.de>

Author: gruntster
Date: 2008-03-29 12:46:40 +0100 (Sat, 29 Mar 2008)
New Revision: 3944

Modified:
   branches/avidemux_2.4_branch/avidemux/main.cpp
Log:
[Win32] remove exception handler before exiting (causes crash with Vista + MinGW GCC + Qt4)

Modified: branches/avidemux_2.4_branch/avidemux/main.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/main.cpp	2008-03-28 19:02:18 UTC (rev 3943)
+++ branches/avidemux_2.4_branch/avidemux/main.cpp	2008-03-29 11:46:40 UTC (rev 3944)
@@ -262,6 +262,10 @@
 
     UI_RunApp();
 
+#ifdef ADM_WIN32
+	__except1(exceptionHandler);
+#endif
+
     printf("Normal exit\n");
     return 0;
 }



From gruntster at mail.berlios.de  Sat Mar 29 13:27:27 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Sat, 29 Mar 2008 13:27:27 +0100
Subject: [Avidemux-svn-commit] r3945 - in
	branches/avidemux_2.4_branch/avidemux: ADM_codecs ADM_encoder
	ADM_userInterfaces/ADM_GTK/ADM_dialog
	ADM_userInterfaces/ADM_GTK/glade
Message-ID: <200803291227.m2TCRRe4029781@sheep.berlios.de>

Author: gruntster
Date: 2008-03-29 13:27:24 +0100 (Sat, 29 Mar 2008)
New Revision: 3945

Modified:
   branches/avidemux_2.4_branch/avidemux/ADM_codecs/ADM_x264.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_encoder/ADM_encCodecDesc.h
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/glade/project_x264.glade
Log:
[x264] pass the correct direct prediction mode to encoder

Modified: branches/avidemux_2.4_branch/avidemux/ADM_codecs/ADM_x264.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_codecs/ADM_x264.cpp	2008-03-29 11:46:40 UTC (rev 3944)
+++ branches/avidemux_2.4_branch/avidemux/ADM_codecs/ADM_x264.cpp	2008-03-29 12:27:24 UTC (rev 3945)
@@ -98,7 +98,7 @@
   MKPARAM (b_interlaced,interlaced);
       
   //
-  MKPARAM(analyse.i_direct_mv_pred,DirectMode+1);
+  MKPARAM(analyse.i_direct_mv_pred,DirectMode);
   MKPARAM(rc.i_qp_min,MinQp);
   MKPARAM(rc.i_qp_max,MaxQp);
   MKPARAM(rc.i_qp_step,QpStep);

Modified: branches/avidemux_2.4_branch/avidemux/ADM_encoder/ADM_encCodecDesc.h
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_encoder/ADM_encCodecDesc.h	2008-03-29 11:46:40 UTC (rev 3944)
+++ branches/avidemux_2.4_branch/avidemux/ADM_encoder/ADM_encCodecDesc.h	2008-03-29 12:27:24 UTC (rev 3945)
@@ -722,7 +722,7 @@
 0,//     uint32_t BidirME;
 1,//     uint32_t Adaptative;
 1,//     uint32_t Weighted;
-0,//     uint32_t DirectMode;
+1,//     uint32_t DirectMode;
 //     //
 4,//     uint32_t PartitionDecision;
 16, //Range
@@ -780,7 +780,7 @@
 0,//     uint32_t BidirME;
 1,//     uint32_t Adaptative;
 1,//     uint32_t Weighted;
-0,//     uint32_t DirectMode;
+1,//     uint32_t DirectMode;
 //     //
 4,//     uint32_t PartitionDecision;
 4,//              Range

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp	2008-03-29 11:46:40 UTC (rev 3944)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp	2008-03-29 12:27:24 UTC (rev 3945)
@@ -1182,10 +1182,10 @@
   comboboxDirectMode = gtk_combo_box_new_text ();
   gtk_widget_show (comboboxDirectMode);
   gtk_box_pack_start (GTK_BOX (hbox1), comboboxDirectMode, FALSE, TRUE, 0);
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxDirectMode), QT_TR_NOOP("None"));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxDirectMode), QT_TR_NOOP("Spatial"));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxDirectMode), QT_TR_NOOP("Temporal"));
   gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxDirectMode), QT_TR_NOOP("Auto"));
-  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxDirectMode), QT_TR_NOOP("Temporal"));
-  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxDirectMode), QT_TR_NOOP("Spatial"));
-  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxDirectMode), QT_TR_NOOP("None"));
 
   label20 = gtk_label_new (QT_TR_NOOP("<b>B-Frames</b>"));
   gtk_widget_show (label20);

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/glade/project_x264.glade
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/glade/project_x264.glade	2008-03-29 11:46:40 UTC (rev 3944)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/glade/project_x264.glade	2008-03-29 12:27:24 UTC (rev 3945)
@@ -1884,10 +1884,10 @@
 				    <widget class="GtkComboBox" id="comboboxDirectMode">
 				      <property name="visible">True</property>
 				      <property name="has_default">True</property>
-				      <property name="items" translatable="yes">Auto
+				      <property name="items" translatable="yes">None
+Spatial
 Temporal
-Spatial
-None</property>
+Auto</property>
 				      <property name="add_tearoffs">False</property>
 				      <property name="focus_on_click">True</property>
 				    </widget>



From gruntster at mail.berlios.de  Sat Mar 29 23:24:02 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Sat, 29 Mar 2008 23:24:02 +0100
Subject: [Avidemux-svn-commit] r3946 - in
	branches/avidemux_2.5_branch_gruntster: avidemux
	avidemux/ADM_codecs avidemux/ADM_encoder
	avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog
	avidemux/ADM_userInterfaces/ADM_GTK/glade
	avidemux/ADM_userInterfaces/ADM_QT4
	avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory po
Message-ID: <200803292224.m2TMO214010095@sheep.berlios.de>

Author: gruntster
Date: 2008-03-29 23:23:47 +0100 (Sat, 29 Mar 2008)
New Revision: 3946

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_x264.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_encCodecDesc.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/glade/project_x264.glade
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_dialogFactory.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ui_support.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/main.cpp
   branches/avidemux_2.5_branch_gruntster/po/fr.po
Log:
[Merge] integrate changes from 2.4 branch (r3945)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_x264.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_x264.cpp	2008-03-29 12:27:24 UTC (rev 3945)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_x264.cpp	2008-03-29 22:23:47 UTC (rev 3946)
@@ -98,7 +98,7 @@
   MKPARAM (b_interlaced,interlaced);
       
   //
-  MKPARAM(analyse.i_direct_mv_pred,DirectMode+1);
+  MKPARAM(analyse.i_direct_mv_pred,DirectMode);
   MKPARAM(rc.i_qp_min,MinQp);
   MKPARAM(rc.i_qp_max,MaxQp);
   MKPARAM(rc.i_qp_step,QpStep);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_encCodecDesc.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_encCodecDesc.h	2008-03-29 12:27:24 UTC (rev 3945)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_encCodecDesc.h	2008-03-29 22:23:47 UTC (rev 3946)
@@ -722,7 +722,7 @@
 0,//     uint32_t BidirME;
 1,//     uint32_t Adaptative;
 1,//     uint32_t Weighted;
-0,//     uint32_t DirectMode;
+1,//     uint32_t DirectMode;
 //     //
 4,//     uint32_t PartitionDecision;
 16, //Range
@@ -780,7 +780,7 @@
 0,//     uint32_t BidirME;
 1,//     uint32_t Adaptative;
 1,//     uint32_t Weighted;
-0,//     uint32_t DirectMode;
+1,//     uint32_t DirectMode;
 //     //
 4,//     uint32_t PartitionDecision;
 4,//              Range

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp	2008-03-29 12:27:24 UTC (rev 3945)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp	2008-03-29 22:23:47 UTC (rev 3946)
@@ -1166,10 +1166,10 @@
   comboboxDirectMode = gtk_combo_box_new_text ();
   gtk_widget_show (comboboxDirectMode);
   gtk_box_pack_start (GTK_BOX (hbox1), comboboxDirectMode, FALSE, TRUE, 0);
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxDirectMode), QT_TR_NOOP("None"));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxDirectMode), QT_TR_NOOP("Spatial"));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxDirectMode), QT_TR_NOOP("Temporal"));
   gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxDirectMode), QT_TR_NOOP("Auto"));
-  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxDirectMode), QT_TR_NOOP("Temporal"));
-  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxDirectMode), QT_TR_NOOP("Spatial"));
-  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxDirectMode), QT_TR_NOOP("None"));
 
   label20 = gtk_label_new (QT_TR_NOOP("<b>B-Frames</b>"));
   gtk_widget_show (label20);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/glade/project_x264.glade
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/glade/project_x264.glade	2008-03-29 12:27:24 UTC (rev 3945)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/glade/project_x264.glade	2008-03-29 22:23:47 UTC (rev 3946)
@@ -1884,10 +1884,10 @@
 				    <widget class="GtkComboBox" id="comboboxDirectMode">
 				      <property name="visible">True</property>
 				      <property name="has_default">True</property>
-				      <property name="items" translatable="yes">Auto
+				      <property name="items" translatable="yes">None
+Spatial
 Temporal
-Spatial
-None</property>
+Auto</property>
 				      <property name="add_tearoffs">False</property>
 				      <property name="focus_on_click">True</property>
 				    </widget>

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_dialogFactory.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_dialogFactory.cpp	2008-03-29 12:27:24 UTC (rev 3945)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_dialogFactory.cpp	2008-03-29 22:23:47 UTC (rev 3946)
@@ -181,6 +181,7 @@
 
   QWidget *wid=new QWidget;
   QGridLayout *layout=new QGridLayout(wid);
+  QSpacerItem *spacerItem = new QSpacerItem(20, 40, QSizePolicy::Minimum, QSizePolicy::Expanding);
   
   /* First compute the size of our window */
   int vsize=0;
@@ -204,6 +205,8 @@
   {
     tab->dias[i]->finalize(); 
   }
+
+  layout->addItem(spacerItem, v, 0);
 }
 /**
  * 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ui_support.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ui_support.cpp	2008-03-29 12:27:24 UTC (rev 3945)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ui_support.cpp	2008-03-29 22:23:47 UTC (rev 3946)
@@ -1,12 +1,8 @@
 #include <stdio.h>
-#include <string.h>
 
 #include <QApplication>
-#include <QLocale>
-#include <QTranslator>
+#include <QtCore>
 
-static const int MAX_MESSAGE_COUNT = 300;
-static char* translatedMessage[MAX_MESSAGE_COUNT];
 static QTranslator qtTranslator;
 static QTranslator avidemuxTranslator;
 
@@ -23,28 +19,17 @@
 		printf("FAILED\n");		
 }
 
-void initTranslator(void)
-{
-	memset(translatedMessage, 0, MAX_MESSAGE_COUNT * sizeof(char*));
-}
+void initTranslator(void) {}
 
 const char* translate(const char *__domainname, const char *__msgid)
 {
-	static int counter = 0;
-	QString messageString = QApplication::translate("",  __msgid);
+	static QMap<QString, QByteArray> map;
+	QString msgid = QString(__msgid);
 
-	counter++;
+	if (!map.contains(msgid))
+		map[msgid] = QApplication::translate("", __msgid).toUtf8();
 
-	if (counter >= MAX_MESSAGE_COUNT)
-		counter = 0;
-
-	if (translatedMessage[counter])
-		delete[] translatedMessage[counter];
-
-	translatedMessage[counter] = new char[messageString.toUtf8().length() + 1];
-	strcpy(translatedMessage[counter], messageString.toUtf8().constData());
-
-	return translatedMessage[counter];
+	return map.value(msgid).constData();
 }
 
 #define HIDE_STRING_FROM_QT(domainname, msgid)  QApplication::translate(domainname, msgid) // to hide string from lupdate so a true test can be conducted
@@ -65,17 +50,8 @@
 	printf("[Locale] Test: &Edit -> %s\n\n", HIDE_STRING_FROM_QT("MainWindow", "&Edit").toUtf8().data());
 }
 
-void destroyTranslator(void)
-{
-	for (int counter = 0; counter < MAX_MESSAGE_COUNT; counter++)
-	{
-		if (translatedMessage[counter])
-			delete[] translatedMessage[counter];
-	}
+void destroyTranslator(void) {}
 
-	memset(translatedMessage, 0, MAX_MESSAGE_COUNT * sizeof(char*));
-}
-
 void getUIDescription(char* desc)
 {
 	sprintf(desc, "Qt4 (%s)", qVersion());

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/main.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/main.cpp	2008-03-29 12:27:24 UTC (rev 3945)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/main.cpp	2008-03-29 22:23:47 UTC (rev 3946)
@@ -274,6 +274,10 @@
 
     UI_RunApp();
 
+#ifdef ADM_WIN32
+	__except1(exceptionHandler);
+#endif
+
     printf("Normal exit\n");
     return 0;
 }

Modified: branches/avidemux_2.5_branch_gruntster/po/fr.po
===================================================================
--- branches/avidemux_2.5_branch_gruntster/po/fr.po	2008-03-29 12:27:24 UTC (rev 3945)
+++ branches/avidemux_2.5_branch_gruntster/po/fr.po	2008-03-29 22:23:47 UTC (rev 3946)
@@ -5,14 +5,17 @@
 msgstr ""
 "Project-Id-Version: fr\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2007-09-26 14:47+0100\n"
-"PO-Revision-Date: 2007-11-01 12:17+0100\n"
-"Last-Translator: \n"
+"POT-Creation-Date: 2008-03-18 14:10+0000\n"
+"PO-Revision-Date: 2008-03-27 14:17+0100\n"
+"Last-Translator: NSV <xxNSVxx at gmail.com>\n"
 "Language-Team:  <en at li.org>\n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: 8bit\n"
 "X-Generator: KBabel 1.11.4\n"
+"X-Poedit-Language: French\n"
+"X-Poedit-Country: FRANCE\n"
+"X-Poedit-Basepath: C:\\Users\\NSV\\Documents\\Projet\\C++\\Avidemux\\\n"
 
 #: avidemux/ADM_editor/ADM_outputfmt.h:42
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:511
@@ -29,19 +32,19 @@
 
 #: avidemux/ADM_editor/ADM_outputfmt.h:45
 msgid "AVI, unpack VOP"
-msgstr ""
+msgstr "AVI, sans VOP"
 
 #: avidemux/ADM_editor/ADM_outputfmt.h:46
 msgid "MPEG-PS (A+V)"
-msgstr "MPEG-PS A+V"
+msgstr "MPEG-PS (A+V)"
 
 #: avidemux/ADM_editor/ADM_outputfmt.h:47
 msgid "MPEG-TS (A+V)"
-msgstr "MPEG-TS A+V"
+msgstr "MPEG-TS (A+V)"
 
 #: avidemux/ADM_editor/ADM_outputfmt.h:48
 msgid "MPEG video"
-msgstr ""
+msgstr "Vid?o MPEG"
 
 #: avidemux/ADM_editor/ADM_outputfmt.h:49
 msgid "MP4"
@@ -58,31 +61,32 @@
 
 #: avidemux/ADM_editor/ADM_outputfmt.h:52
 msgid "FLV"
-msgstr ""
+msgstr "FLV"
 
 #: avidemux/ADM_editor/ADM_outputfmt.h:53
 msgid "MKV"
-msgstr ""
+msgstr "MKV"
 
 #: avidemux/ADM_editor/ADM_outputfmt.h:54
+#, fuzzy
 msgid "DUMMY"
-msgstr ""
+msgstr "EXEMPLE"
 
 #: avidemux/ADM_audio/audiotimeline.cpp:85
 #: avidemux/ADM_audio/audiotimeline.cpp:96
 msgid "Building VBR map"
-msgstr "Construction de l'index"
+msgstr "Construction de l'index VBR"
 
-#: avidemux/ADM_audiocodec/ADM_codecwma.cpp:75
-#: avidemux/ADM_audiocodec/ADM_codecwma.cpp:183
+#: avidemux/ADM_audiocodec/ADM_codecwma.cpp:88
+#: avidemux/ADM_audiocodec/ADM_codecwma.cpp:200
 msgid "Internal error"
 msgstr "Erreur interne"
 
-#: avidemux/ADM_audiocodec/ADM_codecwma.cpp:75
+#: avidemux/ADM_audiocodec/ADM_codecwma.cpp:88
 msgid "Cannot open WMA2 codec."
 msgstr "Ne peut pas ouvrir le codec WMA2."
 
-#: avidemux/ADM_audiocodec/ADM_codecwma.cpp:183
+#: avidemux/ADM_audiocodec/ADM_codecwma.cpp:200
 msgid "Cannot open AMR codec."
 msgstr "Ne peut pas ouvrir le codec AMR."
 
@@ -96,24 +100,24 @@
 
 #: avidemux/ADM_audiofilter/audioencoder_lame.cpp:220
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:104
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:296
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:110
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:295
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:103
 msgid "Stereo"
 msgstr "St?r?o"
 
 #: avidemux/ADM_audiofilter/audioencoder_lame.cpp:221
 msgid "Joint stereo"
-msgstr "St?r?o join"
+msgstr "St?r?o joint"
 
 #: avidemux/ADM_audiofilter/audioencoder_lame.cpp:222
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:103
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:107
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:100
 msgid "Mono"
 msgstr "Mono"
 
 #: avidemux/ADM_audiofilter/audioencoder_lame.cpp:224
 msgid "C_hannel mode:"
-msgstr "Mode Canal:"
+msgstr "Type de _canal :"
 
 #: avidemux/ADM_audiofilter/audioencoder_lame.cpp:227
 msgid "CBR"
@@ -125,29 +129,33 @@
 
 #: avidemux/ADM_audiofilter/audioencoder_lame.cpp:230
 msgid "Extreme"
-msgstr "Extr?me"
+msgstr "Extr?me"
 
 #: avidemux/ADM_audiofilter/audioencoder_lame.cpp:233
 msgid "Bit_rate mode:"
-msgstr "Mode Bi_trate:"
+msgstr "Type de _d?bit :"
 
 #: avidemux/ADM_audiofilter/audioencoder_lame.cpp:246
 #: avidemux/ADM_audiofilter/audioencoder_vorbis.cpp:288
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioconfig.cpp:59
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioconfig.cpp:52
 msgid "_Bitrate:"
-msgstr "_Bitrate:"
+msgstr "_D?bit :"
 
 #: avidemux/ADM_audiofilter/audioencoder_lame.cpp:251
 #: avidemux/ADM_audiofilter/audioencoder_vorbis.cpp:290
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_mjpeg.cpp:40
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_mjpeg.cpp:36
 #: avidemux/ADM_videoFilter/ADM_vidDecDec.cpp:204
 msgid "_Quality:"
-msgstr "_Qualit?:"
+msgstr "_Qualit? :"
 
 #: avidemux/ADM_audiofilter/audioencoder_lame.cpp:252
 msgid "_Disable reservoir:"
-msgstr "D?sactiver le bitrate r?servoir"
+msgstr "_D?sactiver le bit reservoir (Qualit? plus basse) :"
 
+#: avidemux/ADM_audiofilter/audioencoder_lame.cpp:256
+msgid "LAME Configuration"
+msgstr "Configuration de LAME"
+
 #: avidemux/ADM_audiofilter/audioencoder_vorbis.cpp:271
 msgid "VBR"
 msgstr "VBR"
@@ -162,18 +170,25 @@
 #: avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp:113
 #: avidemux/ADM_videoFilter/ADM_vidYadif.cpp:181
 msgid "_Mode:"
-msgstr "_Mode:"
+msgstr "_Mode :"
 
+#: avidemux/ADM_audiofilter/audioencoder_vorbis.cpp:297
+msgid "Vorbis Configuration"
+msgstr "Configuration de Vorbis"
+
 #: avidemux/ADM_audiofilter/audiofilter_buildchain.cpp:322
-#: avidemux/gui_autodrive.cpp:78 avidemux/gui_autodrive.cpp:93
-#: avidemux/gui_autodrive.cpp:120 avidemux/gui_autodrive.cpp:154
+#: avidemux/gui_autodrive.cpp:62
+#: avidemux/gui_autodrive.cpp:74
+#: avidemux/gui_autodrive.cpp:120
+#: avidemux/gui_autodrive.cpp:135
+#: avidemux/gui_autodrive.cpp:162
+#: avidemux/gui_autodrive.cpp:196
 msgid "Codec Error"
-msgstr "Erreur codec"
+msgstr "Erreur de codec"
 
 #: avidemux/ADM_audiofilter/audiofilter_buildchain.cpp:322
 msgid ""
-"The number of channels is greater than what the selected audio codec can "
-"do.\n"
+"The number of channels is greater than what the selected audio codec can do.\n"
 "Either change codec or use the mixer filter to have less channels."
 msgstr ""
 "Le nombre de canaux est plus grand que ce que le codec audio peut accepter.\n"
@@ -183,20 +198,14 @@
 msgid "Internal error finding codec"
 msgstr "Erreur interne pour trouver le codec"
 
-#: avidemux/ADM_codecs/ADM_ffmpeg.cpp:48
+#: avidemux/ADM_codecs/ADM_ffmpeg.cpp:49
 msgid "Internal error opening codec"
 msgstr "Erreur interne pour ouvrir le codec"
 
-#: avidemux/ADM_codecs/ADM_ffmpeg.cpp:50
+#: avidemux/ADM_codecs/ADM_ffmpeg.cpp:51
 msgid "Internal error with context for  codec"
 msgstr "Erreur interne avec le contexte du codec"
 
-#: avidemux/ADM_codecs/ADM_ffmpeg.cpp:50
-msgid ""
-".\n"
-" Did you use too low / too high target for 2 pass ?"
-msgstr "<br>Avez vous sp?cific? un bitrate trop haut ou trop bas ?"
-
 #: avidemux/ADM_editor/ADM_edFrameType.cpp:58
 msgid "No video loaded"
 msgstr "Aucune vid?o charg?e"
@@ -207,11 +216,11 @@
 
 #: avidemux/ADM_editor/ADM_edFrameType.cpp:63
 msgid "DivX 5 + packed?"
-msgstr "DivX 5 + packed??"
+msgstr "DivX 5 + empaquet? ?"
 
 #: avidemux/ADM_editor/ADM_edFrameType.cpp:93
 msgid "Rebuilding Frames"
-msgstr "Reconstuire un index"
+msgstr "Reconstruction des images"
 
 #: avidemux/ADM_editor/ADM_edFrameType.cpp:129
 msgid "Aborted"
@@ -228,30 +237,25 @@
 #: avidemux/ADM_editor/ADM_edit.cpp:415
 #, c-format
 msgid "Attempt to open %s failed!"
-msgstr "Echec ouverture de ??%s???!"
+msgstr "Echec de l'ouverture de ??%s???!"
 
 #: avidemux/ADM_editor/ADM_edit.cpp:439
 msgid ""
-"You cannot mix different video dimensions yet. Using the partial video "
-"filter later, will not work around this problem. The workaround is:\n"
-"1.) \"resize\" / \"add border\" / \"crop\" each stream to the same "
-"resolution\n"
+"You cannot mix different video dimensions yet. Using the partial video filter later, will not work around this problem. The workaround is:\n"
+"1.) \"resize\" / \"add border\" / \"crop\" each stream to the same resolution\n"
 "2.) concatinate them together"
 msgstr ""
-"Vous ne pouvez pas multiplexer des vid?os de dimensions diff?rentes.Utiliser "
-"un filtre vid?o partiel plus tard,ne focntionnera pas pour ce probl?me. Le "
-"travail est:\n"
-"1.)\"redimensionner\" /\"Ajout bordure\" /\"cropper\" chaque flux pour la "
-"m?me dimension \n"
+"Vous ne pouvez pas multiplexer des vid?os de dimensions diff?rentes. Utiliser un filtre vid?o partiel plus tard, ne fonctionnera pas pour ce probl?me. Le travail est :\n"
+"1.) \"redimensionner\" /\"ajout de bordure\" / \"retailler\" chaque flux pour la m?me dimension\n"
 "2.) concat?ner tous ensemble"
 
 #: avidemux/ADM_editor/ADM_edit.cpp:551
 msgid "Build Time Map"
-msgstr "Construire Time Map"
+msgstr "Construire l'index temporel"
 
 #: avidemux/ADM_editor/ADM_edit.cpp:551
 msgid "Build VBR time map?"
-msgstr "Construire le Time Map pour le VBR??"
+msgstr "Construire l'index temporel pour le VBR??"
 
 #: avidemux/ADM_editor/ADM_edit.cpp:585
 msgid "Use that mode"
@@ -259,22 +263,21 @@
 
 #: avidemux/ADM_editor/ADM_edit.cpp:585
 msgid "H264 detected"
-msgstr "H264 d?tect?"
+msgstr "H.264 d?tect?"
 
 #: avidemux/ADM_editor/ADM_edit.cpp:585
 msgid ""
-"If the file is using bframe as reference, it can lead to crash or "
-"stutteting.\n"
-"Avidemux can use another mode which is safed but <b>YOU WILL LOOSE FRAME "
-"ACCURACY</b>.\n"
+"If the file is using bframe as reference, it can lead to crash or stutteting.\n"
+"Avidemux can use another mode which is safed but <b>YOU WILL LOOSE FRAME ACCURACY</b>.\n"
 "Do you want to use that mode ?"
 msgstr ""
-"Si le fichier utilise l'option b-frame as reference, cela peut conduire ? un crash ou ? des saccades.\nAvidemux peut utilier un autre mode qui est plus stable, mais <b>cela fera perdre la pr?cision ? l'image pr?s</b>\n"
+"Si le fichier utilise l'option image-B comme r?f?rence, cela peut conduire ? un plantage ou ? des saccades.\n"
+"Avidemux peut utiliser un autre mode qui est plus stable mais <b>VOUS PERDREZ LA PRECISION DE L'IMAGE</b>.\n"
 "Voulez vous utiliser ce mode ?"
 
 #: avidemux/ADM_editor/ADM_edit.cpp:712
 msgid "Packed Bitstream detected"
-msgstr "Packed Bitstream d?tect?"
+msgstr "Bitstream empaquet? d?tect?"
 
 #: avidemux/ADM_editor/ADM_edit.cpp:713
 msgid "Do you want me to unpack it ?"
@@ -282,7 +285,7 @@
 
 #: avidemux/ADM_editor/ADM_edit.cpp:733
 msgid "Could not unpack the video"
-msgstr "Impossible de d?paquer la vid?o"
+msgstr "Impossible de d?paqueter la vid?o"
 
 #: avidemux/ADM_editor/ADM_edit.cpp:733
 msgid "Using backup decoder - not frame accurate."
@@ -294,7 +297,7 @@
 
 #: avidemux/ADM_editor/ADM_edit.cpp:738
 msgid "The unpacking succeedeed but the index is still not up to date."
-msgstr "Le d?paquetage a r?eussi mais l'index n'est toujours pas ? our."
+msgstr "Le d?paquetage a r?ussi mais l'index n'est toujours pas ? jour."
 
 #: avidemux/ADM_editor/ADM_edit.cpp:744
 msgid "Troubles ahead"
@@ -302,7 +305,7 @@
 
 #: avidemux/ADM_editor/ADM_edit.cpp:744
 msgid "This a VOP packed AVI."
-msgstr "Ceci est un AVI ??VOP packed??."
+msgstr "Ceci est un AVI avec VOP."
 
 #: avidemux/ADM_editor/ADM_edit.cpp:755
 msgid "Index is not up to date"
@@ -310,19 +313,19 @@
 
 #: avidemux/ADM_editor/ADM_edit.cpp:755
 msgid "You should use Tool->Rebuild frame. Do it now ?"
-msgstr "Vous devriez utiliser ??Outils->Reconstruire image??. Le faire maintenant??"
+msgstr "Vous devriez utiliser ??Outils -> Reconstruire image??. Le faire maintenant??"
 
-#: avidemux/ADM_editor/ADM_edit.cpp:1510
+#: avidemux/ADM_editor/ADM_edit.cpp:1517
 msgid ""
 "This looks like mpeg\n"
 " Do you want to index it?"
 msgstr ""
-"Ce fichier est un MPEG\n"
+"Ce fichier ressemble ? un MPEG.\n"
 "Voulez vous l'indexer??"
 
-#: avidemux/ADM_editor/ADM_edit.cpp:1562
+#: avidemux/ADM_editor/ADM_edit.cpp:1569
 msgid "Indexing failed"
-msgstr "Echec indexage"
+msgstr "Echec d'indexation"
 
 #: avidemux/ADM_editor/ADM_edLoadSave.cpp:75
 msgid "Unsupported"
@@ -330,7 +333,7 @@
 
 #: avidemux/ADM_editor/ADM_edLoadSave.cpp:301
 msgid "Old format project file"
-msgstr "Fichier projet ancien format"
+msgstr "Fichier projet dans un ancien format"
 
 #: avidemux/ADM_editor/ADM_edLoadSave.cpp:301
 msgid "No more supported."
@@ -362,19 +365,669 @@
 
 #: avidemux/ADM_encoder/adm_encffmpeg.cpp:261
 msgid "Incompatible settings"
-msgstr "R?glages incomptaibles"
+msgstr "R?glages incompatibles"
 
 #: avidemux/ADM_encoder/adm_encffmpeg.cpp:261
 msgid "At the moment, the DV codec only accepts 720*576 at 25"
-msgstr "Pour le moment,le codec DV accepte seulement le 720*576 at 25 fps"
+msgstr "Pour le moment, le codec DV accepte seulement le 720*576 at 25fps"
 
+#: avidemux/ADM_filter/filter_declaration.cpp:55
+msgid "Crop"
+msgstr "Crop"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:55
+msgid "Remove lines from top/bottom/left/right."
+msgstr "Retaille la vid?o."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:56
+msgid "MPlayer resize"
+msgstr "MPlayer resize"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:56
+msgid "Change image size. Faster than Avisynth's Resize."
+msgstr "Redimensionne l'image. Plus rapide que le filtre d'Avisynth."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:57
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:312
+msgid "Resize"
+msgstr "Resize"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:57
+msgid "Picture resizer ported from Avisynth."
+msgstr "Filtre de redimensionnement de l'image par Avisynth."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:58
+msgid "Add black borders"
+msgstr "Add black borders"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:58
+msgid "Add pure black border(s). Enlarges the picture."
+msgstr "Ajoute des bordures noires. Agrandit l'image."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:59
+msgid "Blacken borders"
+msgstr "Blacken borders"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:59
+msgid "Fill borders with pure black. Doesn't alter size."
+msgstr "Ajoute des bordures noires. N'agrandit pas l'image."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:60
+msgid "Vertical flip"
+msgstr "Vertical flip"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:60
+msgid "Vertically flip the picture."
+msgstr "Retourne l'image verticalement."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:61
+#: avidemux/ADM_videoFilter/ADM_vidRotate.cpp:271
+msgid "Rotate"
+msgstr "Rotate"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:61
+msgid "Rotate the picture by 90, 180 or 270 degrees."
+msgstr "Pivote l'image de 90, 180 ou 270 degr?s."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:63
+#: avidemux/ADM_videoFilter/ADM_vidResampleFPS.cpp:90
+msgid "Resample fps"
+msgstr "Resample fps"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:63
+msgid "Change framerate while keeping duration."
+msgstr "Change le nombre d'images par seconde en gardant la m?me dur?e de la vid?o."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:64
+msgid "Reverse"
+msgstr "Reverse"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:64
+msgid "Play video backward."
+msgstr "Lit la vid?o ? l'envers."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:65
+#: avidemux/ADM_videoFilter/ADM_vidFade.cpp:78
+msgid "Fade"
+msgstr "Fade"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:65
+msgid "Fade in/out."
+msgstr "Fondu entrant/sortant"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:71
+#: avidemux/ADM_videoFilter/ADM_vidYadif.cpp:186
+msgid "yadif"
+msgstr "yadif"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:71
+msgid "Yet Another DeInterlacer. Ported from MPlayer."
+msgstr "D?sentrelaceur port? depuis MPlayer."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:72
+#: avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp:119
+msgid "mcDeinterlace"
+msgstr "mcDeinterlace"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:72
+msgid "Motion compensation deinterlacer. Ported from MPlayer."
+msgstr "Motion compensation deinterlacer port? depuis MPlayer."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:73
+msgid "Deinterlace"
+msgstr "Deinterlace"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:73
+#, fuzzy
+msgid "Mask interlacing artifacts. Port of Smart deinterlace."
+msgstr "Masque les artefacts entrelac?s."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:74
+#: avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp:100
+msgid "KernelDeint"
+msgstr "KernelDeint"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:74
+msgid "Kernel deinterlacer by Donald Graft."
+msgstr "D?sentrelaceur par Donald Graft."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:75
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:121
+msgid "TDeint"
+msgstr "TDeint"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:75
+msgid "Motion adaptative deinterlacer by Tritical."
+msgstr "Motion adaptative deinterlacer par Tritical."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:76
+#: avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp:119
+msgid "libavcodec deinterlacer"
+msgstr "libavcodec deinterlacer"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:76
+msgid "All FFmpeg deinterlace filters (bicubic, median, ...)."
+msgstr "Tous les filtres FFmpeg de d?sentrelacement (bicubique, moyen, ...)."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:77
+#: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:131
+msgid "Decomb Telecide"
+msgstr "Decomb Telecide"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:77
+msgid "Great deinterlacing package including IVTC."
+msgstr "D?sentrelaceur incluant l'Inverse Telecine."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:78
+#: avidemux/ADM_videoFilter/ADM_vidDecDec.cpp:211
+msgid "Decomb Decimate"
+msgstr "Decomb Decimate"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:78
+msgid "Useful to remove dupes left by Telecide."
+msgstr "Utile pour supprimer les erreurs laiss?es par Telecide."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:79
+msgid "Pulldown"
+msgstr "Pulldown"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:79
+msgid "Convert 24 fps to 30 fps by repeating fields."
+msgstr "Converti de 24fps en 30fps en r?p?tant les trames."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:81
+msgid "Bobber - convert each field into a full sized frame."
+msgstr "Converti chaque trame en une image compl?te."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:83
+msgid "PAL field shift"
+msgstr "PAL field shift"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:83
+#, fuzzy
+msgid "Shift fields by one. Useful for some PAL movies."
+msgstr "D?cale les trames par un. Utile pour certains films en PAL."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:84
+msgid "PAL smart"
+msgstr "PAL smart"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:84
+#, fuzzy
+msgid "Smartly revert non constant PAL field shift."
+msgstr "Annule intelligemment le d?calage non constant des trames PAL."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:89
+msgid "Drop"
+msgstr "Drop"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:89
+msgid "Drop damaged fields (e.g. from VHS capture)."
+msgstr "Saute les trames endommag?es (ex : depuis une capture VHS)."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:90
+msgid "Swap fields"
+msgstr "Swap fields"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:90
+msgid "Swap top and bottom fields."
+msgstr "Inverse les trames paires et impaires."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:91
+msgid "Smart swap fields"
+msgstr "Smart swap fields"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:91
+msgid "Smartly swap fields. Needed when field order changes."
+msgstr "Inverse intelligemment les trames. N?cessaire lorsqu'il y a un changement dans l'ordre des trames."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:93
+msgid "Keep even fields"
+msgstr "Keep even fields"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:93
+msgid "Keep top fields. Gives a half height picture."
+msgstr "Garde les trames paires. Obtient une image de demi-hauteur."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:94
+msgid "Keep odd fields"
+msgstr "Keep odd fields"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:94
+msgid "Keep bottom fileds. Gives a half height picture."
+msgstr "Garde les trames impaires. Obtient une image de demi-hauteur."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:95
+msgid "Separate fields"
+msgstr "Separate fields"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:95
+msgid "Each field becomes full picture, half sized."
+msgstr "Chaque trame devient une image compl?te, demi-hauteur."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:96
+msgid "Merge fields"
+msgstr "Merge fields"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:96
+msgid "Merge two pictures as if they were two fields."
+msgstr "Fusionne deux images comme s'ils ?taient deux trames."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:99
+msgid "Hz Stack fields"
+msgstr "Hz Stack fields"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:99
+msgid "Put botj fields side by side."
+msgstr "Met les deux trames c?te ? c?te."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:102
+msgid "Stack fields"
+msgstr "Stack fields"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:102
+msgid "Put two fields on top of one another."
+msgstr "Empile les deux trames."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:103
+msgid "Unstack fields"
+msgstr "Unstack fields"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:103
+msgid "Interleave top and bottom part of the picture."
+msgstr "Entrelace la trame paire et impaire de l'image."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:107
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eq2.cpp:205
+msgid "MPlayer eq2"
+msgstr "MPlayer eq2"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:107
+msgid "Adjust contrast, brightness, saturation and gamma."
+msgstr "Ajuste le contraste, la luminosit?, la saturation et le gamma."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:108
+msgid "MPlayer hue"
+msgstr "MPlayer hue"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:108
+msgid "Adjust hue and saturation."
+msgstr "Ajuste la teinte et la saturation."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:109
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:179
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_contrast.cpp:72
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_contrast.cpp:194
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_contrast.cpp:212
+msgid "Contrast"
+msgstr "Contrast"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:109
+msgid "Adjust contrast, brightness and colors."
+msgstr "Ajuste le contraste, la luminosit? et les couleurs."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:110
+msgid "Luma equalizer"
+msgstr "Luma equalizer"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:110
+msgid "Luma correction filter with histogram."
+msgstr "Filtre de correction de la luminance avec histogramme."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:112
+msgid "Swap U and V"
+msgstr "Swap U and V"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:112
+msgid "Invert chroma U and chroma V."
+msgstr "Inverse la chrominance en U et V."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:113
+msgid "Chroma shift"
+msgstr "Chroma shift"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:113
+msgid "Shift chroma U/V to fix badly synced luma/chroma."
+msgstr "D?cale la chrominance en U et V pour r?parer une luminance/chrominance mal synchonis?."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:115
+msgid "Luma only"
+msgstr "Luma only"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:115
+msgid "Convert picture to greyscale (black and white)."
+msgstr "Converti l'image en nuance de gris (noir et blanc)."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:116
+msgid "Chroma U only"
+msgstr "Chroma U only"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:116
+msgid "Convert picture to grey, keeping only chroma U."
+msgstr "Converti l'image en gris en gardant que la chrominance en U"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:117
+msgid "Chroma V only"
+msgstr "Chroma V only"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:117
+msgid "Convert picture to grey, keeping only chroma V."
+msgstr "Converti l'image en gris en ne gardant que la chrominance en V."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:119
+msgid "Luma delta"
+msgstr "Luma delta"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:119
+msgid "Difference between current and previous picture."
+msgstr "Diff?rence entre l'image actuel et la pr?c?dente."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:120
+msgid "Avisynth ColorYUV"
+msgstr "Avisynth ColorYUV"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:120
+msgid "Alter colors (auto white balance etc...). Ported from Avisynth."
+msgstr "Modifie les couleurs (balance automatique des blancs, ...) par Avisynth."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:130
+#: avidemux/ADM_videoFilter/ADM_vidMPLD3Dlow.cpp:80
+msgid "MPlayer denoise3d"
+msgstr "MPlayer denoise3d"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:130
+msgid "Reduce noise, smooth image, increase compressibility."
+msgstr "R?duit le bruit, lisse l'image, augmente la compressibilit?."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:131
+#: avidemux/ADM_videoFilter/ADM_vidMPLD3D.cpp:80
+msgid "MPlayer hqdn3d"
+msgstr "MPlayer hqdn3d"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:131
+msgid "High quality version of denoise3d. Slower but more precise."
+msgstr "Version haute qualit? de \"denoise3d\". Plus lent mais plus pr?cis."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:132
+#: avidemux/ADM_videoFilter/ADM_vidFlux.cpp:138
+msgid "FluxSmooth"
+msgstr "FluxSmooth"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:132
+msgid "Spatio-temporal cleaner by Ross Thomas."
+msgstr "Nettoyeur spatio-temporel par Ross Thomas."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:134
+#: avidemux/ADM_videoFilter/ADM_vidVlad.cpp:106
+msgid "Temporal Cleaner"
+msgstr "Temporal Cleaner"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:134
+msgid "Vlad59's Avisynth port of Jim Casaburi's denoiser."
+msgstr "D?bruiteur de Jim Casaburi port? par Vlad59 d'Avisynth."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:136
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filterlist.cpp:173
+#: avidemux/ADM_videoFilter/ADM_vidDenoise.cpp:397
+msgid "Denoise"
+msgstr "Denoise"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:136
+msgid "Port of Transcode DNR."
+msgstr "Portage de \"Transcode DNR\"."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:137
+#: avidemux/ADM_videoFilter/ADM_vidStabilize.cpp:66
+msgid "Stabilize"
+msgstr "Stabilize"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:137
+msgid "Light denoiser."
+msgstr "D?bruiteur l?ger."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:139
+msgid "Cnr2"
+msgstr "Cnr2"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:139
+msgid "Chroma noise reduction filter by MarcFD/Tritical."
+msgstr "Filtre de r?duction du bruit de la chrominance par MarcFD/Tritical."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:141
+msgid "MSmooth by Donald Graft"
+msgstr "MSmooth par Donald Graft"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:141
+msgid "Smooth the image, don't blur edges. Useful on anime."
+msgstr "Lisse l'image, ne floute par les contours. Utile sur les animes."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:142
+#: avidemux/ADM_videoFilter/ADM_vidSoften.cpp:74
+msgid "Soften"
+msgstr "Soften"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:142
+msgid "A variant of stabilize."
+msgstr "Une variante de \"stabilize\"."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:147
+msgid "Sharpen"
+msgstr "Sharpen"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:147
+msgid "Enhance difference between near pixels."
+msgstr "Am?liore la diff?rence entre les pixels proches"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:148
+#: avidemux/ADM_videoFilter/ADM_vidMSharpen.cpp:172
+msgid "MSharpen"
+msgstr "MSharpen"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:148
+msgid "Sharpen edges without amplifying noise. By Donald Graft."
+msgstr "Aiguise les contours sans amplifier le bruit par Donald Graft."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:149
+msgid "asharp"
+msgstr "asharp"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:149
+#, fuzzy
+msgid "Adaptative sharpener by MarcFD."
+msgstr "Adaptative sharpener par MarcFD."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:151
+msgid "Gauss smooth"
+msgstr "Gauss smooth"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:151
+msgid "Gaussian smooth. Blur the picture."
+msgstr "Lissage gaussien. Floute l'image."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:152
+msgid "Mean"
+msgstr "Mean"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:152
+msgid "Mean (blur) kernel."
+msgstr ""
+
+#: avidemux/ADM_filter/filter_declaration.cpp:153
+msgid "Median"
+msgstr "Median"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:153
+msgid "Median kernel 3x3. Remove high frequency noise."
+msgstr ""
+
+#: avidemux/ADM_filter/filter_declaration.cpp:154
+msgid "Median (5x5)"
+msgstr "Median (5x5)"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:154
+#, fuzzy
+msgid "Median kernel 5x5. Good for reducing chroma noise."
+msgstr "Median kernel 5x5. Bon pour la r?duction du bruit de la chrominance."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:155
+msgid "Forced postprocessing"
+msgstr "Forced postprocessing"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:155
+msgid "Apply blind postprocessing."
+msgstr "Applique un post-traitement aveugle."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:160
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:112
+msgid "Subtitler"
+msgstr "Subtitler"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:160
+msgid "Add srt/sub subtitles to the picture."
+msgstr "Ajoute des sous-titres SRT/SUB ? l'image."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:161
+#: avidemux/ADM_videoFilter/ADM_vidASS.cpp:95
+msgid "ASS"
+msgstr "ASS"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:161
+msgid "Add ASS/SSA subtitles to the picture."
+msgstr "Ajoute des sous-titres ASS/SSA ? l'image."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:164
+msgid "VobSub"
+msgstr "VobSub"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:164
+msgid "Embed VobSub subtitles into picture."
+msgstr "Ajoute des sous-titres VobSub ? l'image."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:166
+msgid "DVB sub"
+msgstr "DVB sub"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:166
+msgid "Embed DVB-T subtitle."
+msgstr "Ajoute des sous-titres DVB-T ? l'image."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:177
+msgid "Blend remover"
+msgstr "Blend remover"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:177
+#, fuzzy
+msgid "Remove blend between previous and next picture."
+msgstr "Supprime le lien entre l'image pr?c?dente et l'image suivante."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:178
+msgid "Hard pulldown removal"
+msgstr "Hard pulldown removal"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:178
+msgid "Remove IVTC that has been analog captured or resized."
+msgstr "Supprime l'Inverse Telecine qui a ?t? captur? ou redimensionn? en analogique."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:179
+msgid "Whirl"
+msgstr "Whirl"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:179
+msgid "Useless whirlwind effect."
+msgstr "Effecte tourbillon inutile."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:180
+#: avidemux/ADM_videoFilter/ADM_vidMosaic.cpp:98
+msgid "Mosaic"
+msgstr "Mosaic"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:180
+msgid "Split the picture into tiny thumbnails."
+msgstr "D?coupe l'image en vignette."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:181
+msgid "MPlayer delogo"
+msgstr "MPlayer delogo"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:181
+msgid "Blend a logo by interpolating its surrounding box."
+msgstr "Rend transparent un logo en interpolant une bo?te englobante."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:182
+#: avidemux/ADM_videoFilter/ADM_vidLogo.cpp:95
+msgid "Logo"
+msgstr "Logo"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:182
+msgid "Add a png as logo."
+msgstr "Ajoute un PNG comme logo."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:183
+msgid "Animated Menu"
+msgstr "Animated Menu"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:184
+#, fuzzy
+msgid "Create a video made of 6 mini windows, very useful to do DVD menus."
+msgstr "Cr?e une vid?o fa?te de 6 petites fen?tres, tr?s utile pour faire des menus DVD."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:186
+msgid "Compute Average"
+msgstr "Compute Average"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:186
+msgid "Compute average luma value for each pixel throughout all frames, and save to file"
+msgstr "Calcule la valeur moyenne de la luminance pour chaque pixel ? travers de toutes les imagee et enregistre dans un fichier."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:187
+msgid "Eraser"
+msgstr "Eraser"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:187
+msgid "\"Erase\" arbitrary areas of each frame"
+msgstr "Efface arbitrairement des zones de chaque image."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:188
+msgid "Swiss Army Knife"
+msgstr "Swiss Army Knife"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:188
+#, fuzzy
+msgid "Apply operation like P'=P*A, P-A, P+A, etc. using a convolution, rolling average, image from file, or constant"
+msgstr "Applique un op?ration de la forme P'=P*A, P-A, P+A, ... en utilisant une convolution, ..., une image depuis un fichier ou une constante."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:189
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:401
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:976
+msgid "Threshold"
+msgstr "Threshold"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:189
+#, fuzzy
+msgid "Force too-bright/too-dim pixels to 0 and the rest to 255 or vice-versa"
+msgstr "Force les pixels trop clairs ou trop fonc?s vers 0 et le reste vers 255 et vice-versa."
+
+#: avidemux/ADM_filter/filter_declaration.cpp:190
+msgid "Particle List"
+msgstr "Particle List"
+
+#: avidemux/ADM_filter/filter_declaration.cpp:190
+msgid "Identify 'particles' (groups of pixels)"
+msgstr ""
+
+#: avidemux/ADM_filter/filter_declaration.cpp:195
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_partial.cpp:123
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtersub.cpp:144
+msgid "Partial"
+msgstr "Partiel"
+
 #: avidemux/ADM_filter/filter_saveload.cpp:155
 msgid "Problem reading XML filters"
-msgstr "Probl?me ? la lecture des filtres XML"
+msgstr "Probl?me de lecture des filtres XML"
 
 #: avidemux/ADM_filter/filter_saveload.cpp:163
 msgid "No filter found"
-msgstr "Pas de filtre trouv?"
+msgstr "Aucun filtre trouv?"
 
 #: avidemux/ADM_filter/filter_saveload.cpp:199
 msgid "Could not find a filter"
@@ -386,15 +1039,15 @@
 
 #: avidemux/ADM_filter/filter_saveload.cpp:287
 msgid "Node not found"
-msgstr "Noeud non trouv?"
+msgstr "N?ud non trouv?"
 
 #: avidemux/ADM_inputs/ADM_h263/ADM_h263.cpp:258
 msgid "Size is not (s)QCIF"
 msgstr "La taille n'est pas (s)QCIF"
 
-#: avidemux/ADM_inputs/ADM_mp4/ADM_mp4Analyzer.cpp:583
+#: avidemux/ADM_inputs/ADM_mp4/ADM_mp4Analyzer.cpp:589
 msgid "Problem reading SVQ3 headers"
-msgstr "Probl?me ? la lecture des en-t?tes SVQ3"
+msgstr "Probl?me de lecture des en-t?tes SVQ3"
 
 #: avidemux/ADM_inputs/ADM_mp4/ADM_mp4Indexer.cpp:346
 msgid "No stts table"
@@ -414,14 +1067,15 @@
 
 #: avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_video.cpp:370
 msgid "Opening MPEG"
-msgstr "Ouverture du mpeg"
+msgstr "Ouverture du MPEG"
 
 #: avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_video.cpp:539
 msgid "MPEG renumbering error"
-msgstr "Echec de la re-num?rotation MPEG"
+msgstr "Echec de la renum?rotation MPEG"
 
 #: avidemux/ADM_inputs/ADM_nuv/ADM_nuv.cpp:542
 #: avidemux/ADM_inputs/ADM_nuv/ADM_nuv.cpp:571
+#, fuzzy
 msgid "Opening Nuppel video"
 msgstr "Ouverture du nuppel video"
 
@@ -435,7 +1089,7 @@
 
 #: avidemux/ADM_inputs/ADM_nuv/ADM_nuv.cpp:758
 msgid "Expect a crash."
-msgstr "Attendez vous ? un crash."
+msgstr "Attendez-vous ? un plantage."
 
 #: avidemux/ADM_inputs/ADM_nuv/ADM_nuv.cpp:1050
 msgid "Do you want to save an index ?"
@@ -453,19 +1107,19 @@
 #: avidemux/ADM_inputs/ADM_openDML/ADM_openDML.cpp:363
 #: avidemux/ADM_inputs/ADM_openDML/ADM_openDML.cpp:498
 msgid "Malformed header"
-msgstr "En-t?te ?rron?e"
+msgstr "En-t?te erron?e"
 
 #: avidemux/ADM_inputs/ADM_openDML/ADM_openDMLDepack.cpp:93
 msgid "Unpacking bitstream"
-msgstr ""
+msgstr "D?paqueter le bitstream"
 
 #: avidemux/ADM_inputs/ADM_openDML/ADM_opendml_reindex.cpp:68
 msgid "Indexing"
 msgstr "Indexation"
 
-#: avidemux/ADM_libraries/ADM_lavformat/ADM_lavformat.cpp:373
+#: avidemux/ADM_libraries/ADM_lavformat/ADM_lavformat.cpp:376
 msgid "Incompatible frame rate"
-msgstr "FPS incompatible"
+msgstr "Fr?quence d'image incompatible"
 
 #: avidemux/ADM_libraries/ADM_lvemux/ADM_muxer.cpp:85
 #: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:153
@@ -479,20 +1133,20 @@
 
 #: avidemux/ADM_libraries/ADM_lvemux/ADM_muxer.cpp:92
 msgid "lvemux init failed"
-msgstr "Echec init lvemux"
+msgstr "Echec d'initialisation du lvemux"
 
 #: avidemux/ADM_libraries/ADM_utilities/ADM_gettext.cpp:37
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:290
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:291
 msgid "_File"
 msgstr "_Fichier"
 
-#: avidemux/ADM_libraries/ADM_utilities/ADM_imageLoader.cpp:191
+#: avidemux/ADM_libraries/ADM_utilities/ADM_imageLoader.cpp:193
 msgid "Wrong Colorspace"
-msgstr "Colorspace incomatible"
+msgstr "Espace colorim?trique incompatible"
 
-#: avidemux/ADM_libraries/ADM_utilities/ADM_imageLoader.cpp:191
+#: avidemux/ADM_libraries/ADM_utilities/ADM_imageLoader.cpp:193
 msgid "Only YV12/I420 or YUY2/I422 JPegs are supported"
-msgstr "Seuls le YV12/I420 and YUY2/I422 sont accept?s"
+msgstr "Seuls les JPEGs YV12/I420 et YUY2/I422 sont support?s"
 
 #: avidemux/ADM_libraries/ADM_utilities/ADM_imageUtils.cpp:403
 msgid "Memory error"
@@ -503,9 +1157,9 @@
 msgstr "Erreur de conversion en BMP"
 
 #: avidemux/ADM_libraries/ADM_utilities/ADM_imageUtils.cpp:417
-#: avidemux/gtk_gui.cpp:1920
+#: avidemux/gtk_gui.cpp:1927
 msgid "Something bad happened"
-msgstr "Quelque de mauvais c'est pass?"
+msgstr "Quelque chose de mauvais c'est pass?"
 
 #: avidemux/ADM_libraries/ADM_utilities/ADM_imageUtils.cpp:472
 msgid "Cannot encode the frame"
@@ -523,42 +1177,45 @@
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:239
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:246
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:255
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp:328
-#: avidemux/gtk_gui.cpp:896 avidemux/gtk_gui.cpp:1498
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp:325
+#: avidemux/gtk_gui.cpp:903
+#: avidemux/gtk_gui.cpp:1505
 msgid "File error"
 msgstr "Erreur de fichier"
 
 #: avidemux/ADM_libraries/ADM_utilities/ADM_imageUtils.cpp:481
 #: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:366
-#: avidemux/ADM_outputs/oplug_ogm/op_ogsave.cpp:112 avidemux/gtk_gui.cpp:1498
+#: avidemux/ADM_outputs/oplug_ogm/op_ogsave.cpp:112
+#: avidemux/gtk_gui.cpp:1505
 #, c-format
 msgid "Cannot open \"%s\" for writing."
 msgstr "Impossible d'ouvrir ??%s?? en ?criture."
 
-#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:324
+#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:327
 msgid "NTSC 4:3"
 msgstr "NTSC 4:3"
 
-#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:325
-#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:326
+#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:328
+#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:329
 msgid "NTSC 16:9"
 msgstr "NTSC 16:9"
 
-#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:327
+#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:330
 msgid "PAL 4:3"
 msgstr "PAL 4:3"
 
-#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:328
+#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:331
 msgid "PAL 16:9"
 msgstr "PAL 16:9"
 
-#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:329
+#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:332
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:43
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:376
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:398
 msgid "1:1"
 msgstr "1:1"
 
-#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:331
+#: avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp:334
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:598
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:795
 msgid "Unknown"
@@ -575,7 +1232,7 @@
 
 #: avidemux/ADM_ocr/ADM_ocrEngine.cpp:87
 msgid "Output file error"
-msgstr "Erreur fichier de sortie"
+msgstr "Erreur de fichier de sortie"
 
 #: avidemux/ADM_ocr/ADM_ocrEngine.cpp:87
 #, c-format
@@ -584,15 +1241,16 @@
 
 #: avidemux/ADM_ocr/ADM_ocrEngine.cpp:105
 msgid "Problem loading sub"
-msgstr "Probl?me de chargement sous-titres"
+msgstr "Probl?me de chargement des sous-titres"
 
 #: avidemux/ADM_ocr/ADM_vob2vobsub.cpp:254
+#, fuzzy
 msgid "Ifo error"
 msgstr "Erreur ifo"
 
 #: avidemux/ADM_ocr/ADM_vob2vobsub.cpp:254
 msgid "Error reading ifo file, aborting."
-msgstr "Erreur de lecture de fichier ifo, annulation."
+msgstr "Erreur de lecture du fichier IFO, annulation."
 
 #: avidemux/ADM_ocr/ADM_vob2vobsub.cpp:262
 msgid "Cannot write .idx"
@@ -608,7 +1266,7 @@
 
 #: avidemux/ADM_ocr/ADM_vob2vobsub.cpp:300
 msgid "Generating VobSub file"
-msgstr "G?n?ration du fichier vobub"
+msgstr "G?n?ration du fichier VobSub"
 
 #: avidemux/ADM_osSupport/ADM_crashdump.cpp:210
 #: avidemux/ADM_osSupport/ADM_crashdump.cpp:236
@@ -620,12 +1278,11 @@
 msgid ""
 "A fatal error has occurred.\n"
 "\n"
-"Click OK to generate debug information. This may take a few minutes to "
-"complete."
+"Click OK to generate debug information. This may take a few minutes to complete."
 msgstr ""
 "Une erreur fatale est survenue.\n"
 "\n"
-"Choisir OK pour generer un rapport. Cela peut prendre quelques minutes."
+"Choisir OK pour g?n?rer un rapport. Cela peut prendre quelques minutes."
 
 #: avidemux/ADM_osSupport/ADM_crashdump.cpp:437
 msgid "Load it"
@@ -633,7 +1290,7 @@
 
 #: avidemux/ADM_osSupport/ADM_crashdump.cpp:437
 msgid "Crash file"
-msgstr "Fichier de crash."
+msgstr "Fichier de plantage"
 
 #: avidemux/ADM_osSupport/ADM_crashdump.cpp:438
 msgid ""
@@ -641,40 +1298,40 @@
 "Do you want to load it  ?\n"
 "(It will be deleted in all cases, you should save it if you want to keep it)"
 msgstr ""
-"J'ai d?tect? un fichier de crash"
-"Voulez le charger ?\n"
-"(Il sera supprim? dans tous les cas, vous devriez le sauver si vous voulez "
-"le garder)"
+"J'ai d?tect? un fichier de crash.\n"
+"Voulez-vous le charger ?\n"
+"(Il sera supprim? dans tous les cas, vous devriez le sauvegarder si vous voulez le garder)"
 
-#: avidemux/ADM_osSupport/ADM_fileio.cpp:102
-#: avidemux/ADM_osSupport/ADM_fileio.cpp:126
-#: avidemux/ADM_osSupport/ADM_fileio.cpp:146
-#: avidemux/ADM_osSupport/ADM_fileio.cpp:153
-#: avidemux/ADM_osSupport/ADM_fileio.cpp:164 avidemux/GUI_jobs.cpp:37
+#: avidemux/ADM_osSupport/ADM_fileio.cpp:105
+#: avidemux/ADM_osSupport/ADM_fileio.cpp:129
+#: avidemux/ADM_osSupport/ADM_fileio.cpp:149
+#: avidemux/ADM_osSupport/ADM_fileio.cpp:156
+#: avidemux/ADM_osSupport/ADM_fileio.cpp:167
+#: avidemux/GUI_jobs.cpp:37
 msgid "Oops"
 msgstr "Oups"
 
-#: avidemux/ADM_osSupport/ADM_fileio.cpp:102
+#: avidemux/ADM_osSupport/ADM_fileio.cpp:105
 #, c-format
 msgid "can't create custom directory (%s)."
-msgstr "impossible de cr?er le r?pertoire ??%s??."
+msgstr "impossible de cr?er le dossier ??%s??."
 
-#: avidemux/ADM_osSupport/ADM_fileio.cpp:126
+#: avidemux/ADM_osSupport/ADM_fileio.cpp:129
 #, c-format
 msgid "can't create job directory (%s)."
-msgstr "impossible de cr?er le r?pertoire des t?ches ??%s??."
+msgstr "impossible de cr?er le dossier des t?ches ??%s??."
 
-#: avidemux/ADM_osSupport/ADM_fileio.cpp:146
+#: avidemux/ADM_osSupport/ADM_fileio.cpp:149
 msgid "can't determine $USERPROFILE."
-msgstr "ne peut d?terminer $USERPROFILE"
+msgstr "ne peut d?terminer $USERPROFILE."
 
-#: avidemux/ADM_osSupport/ADM_fileio.cpp:153
+#: avidemux/ADM_osSupport/ADM_fileio.cpp:156
 msgid "can't determine $HOME."
 msgstr "ne peut d?terminer $HOME"
 
-#: avidemux/ADM_osSupport/ADM_fileio.cpp:164
+#: avidemux/ADM_osSupport/ADM_fileio.cpp:167
 msgid "Cannot create the .avidemux directory"
-msgstr "Impossible de cr?er le r?pertoire ??.avidemux??."
+msgstr "Impossible de cr?er le dossier ??.avidemux??"
 
 #: avidemux/ADM_osSupport/ADM_misc.cpp:215
 #, c-format
@@ -694,37 +1351,37 @@
 #: avidemux/ADM_osSupport/ADM_misc.cpp:231
 #, c-format
 msgid "%lu seconds"
-msgstr "%lu seconds"
+msgstr "%lu secondes"
 
 #: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:74
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:243
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:242
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:845
 msgid "Normal"
 msgstr "Normal"
 
 #: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:75
 msgid "Mux every N video frames"
-msgstr "Multiplexer toute les N images vid?o"
+msgstr "Multiplexer toutes les N images vid?o"
 
 #: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:76
 msgid "Mux by packet size"
-msgstr "Multiplexer par taille de pacquet"
+msgstr "Multiplexer par taille de paquet"
 
 #: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:79
 msgid "Muxing _type:"
-msgstr "Type de multiplexage:"
+msgstr "_Type de multiplexage :"
 
 #: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:80
 msgid "_Split every MB:"
-msgstr "_Coupe tout les MB:"
+msgstr "_Couper tous les Mo :"
 
 #: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:82
 msgid "Mux _every x video frames:"
-msgstr "Multiplexer _toutes les x images"
+msgstr "Multiplexer _toutes les x images vid?o :"
 
 #: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:83
 msgid "Mux in _blocks of x bytes:"
-msgstr "Muxer en block de X octets"
+msgstr "Multiplexer en _bloc de x octets :"
 
 #: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:90
 msgid "AVI Muxer Options"
@@ -743,7 +1400,7 @@
 #: avidemux/ADM_outputs/oplug_avi/op_avisavecopy_pack.cpp:121
 #: avidemux/ADM_outputs/oplug_avi/op_avisavecopy_unpack.cpp:98
 msgid "Cannot initiate save"
-msgstr "Ne peut pas amorcer la sauvegarde"
+msgstr "Ne peut pas amorcer l'enregistrement"
 
 #: avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp:73
 msgid ""
@@ -756,23 +1413,23 @@
 #: avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp:93
 #: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:149
 #: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:203
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:174
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:176
 #: avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp:76
 msgid "Filter init failed"
 msgstr "Echec de l'initialisation du filtre"
 
 #: avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp:127
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:399
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:401
 #: avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp:100
 msgid ""
 "\n"
 " Reuse the existing log-file ?"
 msgstr ""
 "\n"
-" R?utiliser le fichier log??"
+" R?utiliser le fichier journal ?"
 
 #: avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp:152
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:435
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:437
 msgid "Aborting"
 msgstr "Annulation"
 
@@ -786,32 +1443,32 @@
 #: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:215
 #: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:233
 #: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:332
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:212
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:335
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:419
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:214
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:337
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:421
 #: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:352
 msgid "Error while encoding"
 msgstr "Erreur pendant l'encodage"
 
 #: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:190
 #: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:244
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:224
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:226
 msgid "KeyFrame error"
 msgstr "Erreur d'image-cl?"
 
 #: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:190
 #: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:244
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:224
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:226
 msgid ""
 "The beginning frame is not a key frame.\n"
 "Please move the A marker."
 msgstr ""
 "La premi?re image n'est pas une image-cl?.\n"
-"Bougez svp le marqueur A."
+"Veuillez d?placer le marqueur A."
 
 #: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:151
 msgid "Unsupported video"
-msgstr "Video non support?e"
+msgstr "Vid?o non support?e"
 
 #: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:151
 msgid "Only FLV1 and VP6 video are supported"
@@ -824,14 +1481,14 @@
 
 #: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:173
 msgid "Audio must be mp3 for flv output."
-msgstr "L'audio doit etre en MP3 pour le format FLV."
+msgstr "L'audio doit ?tre en MP3 pour le format FLV."
 
 #: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:178
 msgid "Frequency must be 44100, 22050 or 11025 Hz."
-msgstr "La frequence doit etre 44100, 22050 ou 11025 Hz"
+msgstr "La fr?quence doit ?tre 44100, 22050 ou 11025 Hz"
 
 #: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:254
-#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:251
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:253
 msgid "Cannot initialize the audio stream"
 msgstr "Ne peut pas initialiser le flux audio"
 
@@ -851,13 +1508,11 @@
 
 #: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:101
 msgid "The first frame is not intra frame"
-msgstr "La premi?re image n'est pas une image intra"
+msgstr "La premi?re image n'est pas une image-I"
 
 #: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:101
 msgid "Use the &lt;&lt; and the &gt;&gt; buttons to move using Intra frames."
-msgstr ""
-"Utiliser les boutons &lt;&lt; et &gt;&gt; pour ce d?placer dans les images-"
-"Intra."
+msgstr "Utiliser les boutons &lt;&lt; et &gt;&gt; pour ce d?placer dans les images-I."
 
 #: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:113
 #: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:163
@@ -867,29 +1522,27 @@
 #: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:153
 #: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:173
 msgid "For VCD, audio must be 44.1 kHz MP2."
-msgstr "Pour les VCD, l'audio doit ?tre 44.1 kHz MP2."
+msgstr "Pour les VCD, l'audio doit ?tre du MP2 ? 44.1 kHz."
 
 #: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:182
 msgid "For DVD, audio must be 48 kHz MP2(stereo), AC3, DTS or LPCM (stereo)."
-msgstr ""
-"Pour les DVD, l'audio doit ?tre 48 kHz MP2(st?reo), AC3, DTS ou LPCM "
-"(st?reo)."
+msgstr "Pour les DVD, l'audio doit ?tre MP2 (st?r?o), AC3, DTS ou LPCM (st?r?o) ? 48 kHz."
 
 #: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:193
 msgid "For DVD, audio must be 48 kHz MP2, AC3 or LPCM."
-msgstr "Pour les DVD, l'audio doit ?tre 48 kHz MP2, AC3 ou LPCM."
+msgstr "Pour les DVD, l'audio doit ?tre MP2, AC3 ou LPCM ? 48 kHz."
 
 #: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:305
 msgid "Reuse log file ?"
-msgstr "R?-utiliser le fichier de messages??"
+msgstr "R?utiliser le fichier journal??"
 
 #: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:320
 msgid "Error in pass 1"
-msgstr "Erreur en passe 1"
+msgstr "Erreur pendant la 1? passe"
 
 #: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:463
 msgid "Error in pass 2"
-msgstr "Erreur en passe 2"
+msgstr "Erreur pendant la 2? passe"
 
 #: avidemux/ADM_outputs/oplug_ogm/op_ogsave.cpp:126
 msgid "Could not initialize video"
@@ -901,19 +1554,25 @@
 
 #: avidemux/ADM_script/ADM_JSFunctions.cpp:238
 msgid "Select a directory"
-msgstr "S?lectionner un chemin"
+msgstr "S?lectionner un dossier"
 
 #: avidemux/ADM_script/ADM_JSFunctions.cpp:504
+#, fuzzy
 msgid "Uinteger"
+msgstr "Uinteger"
+
+#: avidemux/ADM_script/ADM_JSFunctions.cpp:507
+msgid "Test uinteger"
 msgstr ""
 
 #: avidemux/ADM_script/ADM_JSFunctions.cpp:519
+#, fuzzy
 msgid "Float"
-msgstr "Flot"
+msgstr "Float"
 
 #: avidemux/ADM_script/ADM_JSFunctions.cpp:537
 msgid "Toggle"
-msgstr "Toggle"
+msgstr ""
 
 #: avidemux/ADM_script/ADM_JSFunctions.cpp:558
 msgid "No Strategy"
@@ -921,7 +1580,7 @@
 
 #: avidemux/ADM_script/ADM_JSFunctions.cpp:559
 msgid "3:2 Pulldown"
-msgstr "3:2 Descendant"
+msgstr "3:2 Pulldown"
 
 #: avidemux/ADM_script/ADM_JSFunctions.cpp:560
 msgid "Pal/Secam"
@@ -938,51 +1597,65 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_animated.cpp:36
 msgid "_Background Image:"
-msgstr "Image de fond:"
+msgstr "Image de _fond :"
 
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_animated.cpp:36
+msgid "Select background image"
+msgstr "S?lectionner un image de fond"
+
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_animated.cpp:37
 msgid "_NTSC(default is Pal):"
-msgstr ""
+msgstr "_NTSC (PAL par d?faut) :"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_animated.cpp:38
 msgid "Vignette _Width:"
-msgstr "Largeur des imagettes "
+msgstr "_Largeur des vignettes :"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_animated.cpp:39
 msgid "Vignette _Height:"
-msgstr "Hauteur des imagettes :"
+msgstr "_Hauteur des vignettes :"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_animated.cpp:42
 msgid "Vignette frame number"
-msgstr "Num?ro d'image pour l'imagette"
+msgstr "Num?ro d'image pour la vignette"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_animated.cpp:46
 msgid "Timecode:"
-msgstr "Temps :"
+msgstr "Time-code :"
 
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_animated.cpp:53
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:70
+msgid "MPEG-2 Configuration"
+msgstr "Configuration du MPEG-2"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioconfig.cpp:56
+msgid "Audio Configuration"
+msgstr "Configuration de l'audio"
+
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:62
 msgid "_Dynamic range compression"
-msgstr "Courbe de compression dynamique"
+msgstr "Courbe de compression _dynamique"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:64
 msgid "_Time shift (ms):"
-msgstr "D?calage temporel (ms) :"
+msgstr "D?calage _temporel (ms) :"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:64
 msgid "Time shift value (ms)"
-msgstr "Valeur du d?calage (ms)"
+msgstr "Valeur du d?calage temporel (ms)"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:72
 msgid "R_esampling (Hz):"
-msgstr "R??echantillonage(Hz) :"
+msgstr "R??chantillonnag_e (Hz) :"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:72
 msgid "Resampling frequency (Hz)"
-msgstr "Frequence (Hz)"
+msgstr "Fr?quence de r??chantillonnage (Hz)"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:80
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:89
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:51
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:327
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:373
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:381
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:389
@@ -990,11 +1663,12 @@
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:568
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:583
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:219
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1124
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1188
 #: avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp:105
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:101
-#: avidemux/ADM_videoFilter/ADM_vidRotate.cpp:264 avidemux/gtk_gui.cpp:1998
-#: avidemux/gtk_gui.cpp:2097
+#: avidemux/ADM_videoFilter/ADM_vidRotate.cpp:264
+#: avidemux/gtk_gui.cpp:2005
+#: avidemux/gtk_gui.cpp:2104
 msgid "None"
 msgstr "Aucun"
 
@@ -1008,11 +1682,11 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:85
 msgid "_Frame rate change:"
-msgstr "_Changer fr?quence d'image:"
+msgstr "Changer la fr?quence d'_image :"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:90
 msgid "Automatic (max -3 dB)"
-msgstr "Automatique (max -3dB)"
+msgstr "Automatique (-3dB max)"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:91
 msgid "Manual"
@@ -1020,11 +1694,11 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:93
 msgid "_Gain mode:"
-msgstr "_Mode Gain:"
+msgstr "Mode _gain :"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:95
 msgid "G_ain value:"
-msgstr "Valeur Gain:"
+msgstr "Valeur du g_ain :"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:97
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:200
@@ -1061,15 +1735,15 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:111
 msgid "Dolby Pro Logic"
-msgstr "Dolby Pro logic"
+msgstr "Dolby Pro Logic"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:112
 msgid "Dolby Pro Logic II"
-msgstr "Dolby Pro logic 2"
+msgstr "Dolby Pro Logic II"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:115
 msgid "_Mixer:"
-msgstr "_Mixeur:"
+msgstr "_Mixeur :"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:119
 msgid "Audio Filters"
@@ -1080,13 +1754,37 @@
 msgid "No data"
 msgstr "Pas de donn?es"
 
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp:214
+msgid "Max. bitrate:"
+msgstr "D?bit max. :"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp:215
+msgid "Average bitrate:"
+msgstr "D?bit moyen :"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp:216
+msgid "Number of I frames:"
+msgstr "Nombre d'images-I :"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp:217
+msgid "Number of P frames:"
+msgstr "Nombre d'images-P :"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp:218
+msgid "Number of B frames:"
+msgstr "Nombre d'images-B :"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp:219
+msgid "Max. B frames:"
+msgstr "Images-B max. :"
+
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp:232
 msgid "Bitrate Histogram"
-msgstr "Histogramme de bitrate"
+msgstr "Histogramme du d?bit"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:128
 msgid "Video Codecs"
-msgstr ""
+msgstr "Codecs vid?o"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:129
 msgid "Xvid"
@@ -1098,7 +1796,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:135
 msgid "Audio Codecs"
-msgstr ""
+msgstr "Codecs audio"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:136
 msgid "Aften"
@@ -1134,13 +1832,15 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:144
 msgid "Vorbis"
-msgstr ""
+msgstr "Vorbis"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:156
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:307
 msgid "aRts"
 msgstr "aRts"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:157
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:313
 msgid "ESD"
 msgstr "ESD"
 
@@ -1153,24 +1853,27 @@
 msgstr "Freetype 2"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:160
-msgid "gettext"
-msgstr "gettext"
+msgid "Gettext"
+msgstr ""
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:161
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:304
 msgid "ALSA"
-msgstr ""
+msgstr "ALSA"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:162
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:319
 msgid "OSS"
 msgstr "OSS"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:163
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:322
 msgid "SDL"
 msgstr "SDL"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:164
 msgid "XVideo"
-msgstr "XVid?o"
+msgstr "XVideo"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:166
 msgid "AltiVec"
@@ -1178,7 +1881,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:167
 msgid "PowerPC"
-msgstr "Puissance PC"
+msgstr "PowerPC"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:168
 msgid "x86"
@@ -1194,139 +1897,157 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:177
 msgid "Libraries"
-msgstr ""
+msgstr "Biblioth?que"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:178
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:406
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:404
 msgid "CPU"
-msgstr ""
+msgstr "Processeur"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:182
 msgid "Built-in Support"
-msgstr "Support-int?gr? pour"
+msgstr "Support int?gr?"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:52
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:48
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:44
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:42
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:380
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:402
 msgid "4:3"
 msgstr "4:3"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:53
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:49
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:45
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:43
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:384
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:406
 msgid "16:9"
 msgstr "16:9"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:55
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:51
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:45
 msgid "Default"
 msgstr "D?faut"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:56
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:52
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:46
 msgid "TMPGEnc"
 msgstr "TMPGEnc"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:57
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:53
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:47
 msgid "Anime"
 msgstr "Anime"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:58
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:54
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:48
 msgid "KVCD"
 msgstr "KVCD"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:61
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:57
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:51
 msgid "Progressive"
 msgstr "Progressif"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:62
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:58
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:52
 msgid "Interlaced TFF"
-msgstr " TFF Entrelac?"
+msgstr "TFF Entrelac?"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:63
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:59
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:53
 msgid "Interlaced BFF"
 msgstr "BFF Entrelac?"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:74
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:70
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:60
 msgid "Ma_x. bitrate:"
-msgstr "Bitrate max:"
+msgstr "D?bit ma_x :"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:75
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:71
 msgid "Mi_n. bitrate:"
-msgstr "Bitrate max:"
+msgstr "D?bit mi_n :"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:76
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:72
 msgid "_Use Xvid rate control"
-msgstr "_Utilise le contr?le du bitrate du XviD"
+msgstr "_Utilise le contr?le du d?bit du XviD"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:78
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:74
 msgid "_Buffer size:"
-msgstr "Taille buffer:"
+msgstr "Taille du _tampon :"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:80
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:76
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:57
 msgid "Aspect _ratio:"
-msgstr "Ratio:"
+msgstr "_Rapport H/L :"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:81
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:77
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:58
 msgid "_Matrices:"
-msgstr "Matrices:"
+msgstr "_Matrices :"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:82
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:78
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flv1.cpp:45
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:59
 msgid "_GOP size:"
-msgstr "_Taille GOP:"
+msgstr "_Taille du GOP :"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:88
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:84
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_SVCD.cpp:66
 msgid "_Interlacing:"
-msgstr "Entrelacement:"
+msgstr "_Entrelacement :"
 
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp:88
+msgid "libavcodec MPEG-2 Configuration"
+msgstr "Configuration MPEG-4 de libavcodec"
+
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flv1.cpp:44
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:109
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:268
 msgid "_Bitrate (kb/s):"
-msgstr ""
+msgstr "_D?bit (kb/s) :"
 
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flv1.cpp:49
+msgid "FLV1 Configuration"
+msgstr "Configuration FLV1"
+
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_gototime.cpp:27
 msgid "_Hours:"
-msgstr "Heures:"
+msgstr "_Heures :"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_gototime.cpp:28
 msgid "_Minutes:"
-msgstr "Minutes:"
+msgstr "_Minutes :"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_gototime.cpp:29
 msgid "_Seconds:"
-msgstr "Secondes:"
+msgstr "_Secondes :"
 
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_gototime.cpp:32
+msgid "Go to Time"
+msgstr "Aller au temps"
+
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:52
 msgid "Full"
 msgstr "Complet"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:53
+#, fuzzy
 msgid "Log"
-msgstr " Log"
+msgstr "Log"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:54
+#, fuzzy
 msgid "Phods"
 msgstr "Phods"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:55
+#, fuzzy
 msgid "EPZS"
 msgstr "EPZS"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:56
+#, fuzzy
 msgid "X1"
 msgstr "X1"
 
@@ -1340,16 +2061,18 @@
 msgstr "MPEG"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:65
+#, fuzzy
 msgid "MB comparison"
-msgstr "comparaison MB"
+msgstr "Comparaison Mo"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:66
 msgid "Fewest bits (vhq)"
-msgstr " moins de bits (vhq)"
+msgstr "Moins de bits (VHQ)"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:67
+#, fuzzy
 msgid "Rate distortion"
-msgstr "distortion de vitesse"
+msgstr "Distorsion de vitesse"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:73
 msgid "Matrices"
@@ -1357,28 +2080,30 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:74
 msgid "Mi_n. quantizer:"
-msgstr "Quantificateur?min.:"
+msgstr "Quantificateur?mi_n. :"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:75
 msgid "Ma_x. quantizer:"
-msgstr "Quantificateur?max.:"
+msgstr "Quantificateur?ma_x. :"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:76
+#, fuzzy
 msgid "Max. quantizer _difference:"
-msgstr "Diff?rence quantiseur max:"
+msgstr "_Diff?rence quantificateur max :"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:78
+#, fuzzy
 msgid "4_MV"
 msgstr "4_MV"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:79
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1235
 msgid "_Trellis quantization"
-msgstr "_Quantification de treillis"
+msgstr "Quantification de _treillis"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:81
 msgid "_Quarter pixel"
-msgstr "_Quarter Pixel"
+msgstr "_Quart de pixel"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:82
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1018
@@ -1387,41 +2112,43 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:85
 msgid "_Number of B frames:"
-msgstr "_Nombre d'images-B:"
+msgstr "_Nombre d'images-B :"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:86
 msgid "_Quantization type:"
-msgstr "Type Quantisation:"
+msgstr "Type de _quantification :"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:88
+#, fuzzy
 msgid "_Macroblock decision:"
-msgstr "D?cision macrobloc:"
+msgstr "D?cision _macrobloc :"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:90
 msgid "_Filesize tolerance (kb):"
-msgstr "_Tol?rance taille fichier (kb):"
+msgstr "Tol?rance de la taille du _fichier (kb) :"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:92
+#, fuzzy
 msgid "_Quantizer compression:"
-msgstr "Courbe de compression:"
+msgstr "_Courbe de compression :"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:93
 msgid "Quantizer _blur:"
-msgstr "Quantificateur _blur:"
+msgstr "Quantificateur de _flou :"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:98
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:374
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:372
 msgid "User Interface"
 msgstr "Interface utilisateur"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:101
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1028
 msgid "Advanced Simple Profile"
-msgstr "Profil simple avanc?"
+msgstr "Profil simple avanc? (ASP)"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:108
 msgid "Motion Estimation"
-msgstr "Estimation mouvement"
+msgstr "Estimation du mouvement"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:112
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:309
@@ -1430,442 +2157,531 @@
 msgstr "Quantification"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:117
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1403
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1480
 msgid "Rate Control"
-msgstr "Contr?le du bitrate ou d?bit vid?o"
+msgstr "Contr?le du taux"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:120
 msgid "libavcodec MPEG-4 configuration"
-msgstr "Configuration libavcodec MPEG-4"
+msgstr "Configuration MPEG-4 de libavcodec"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavDecoder.cpp:45
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavDecoder.cpp:26
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp:41
 msgid "_Swap U and V"
-msgstr "Inverser U et V"
+msgstr "_Inverser U et V"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavDecoder.cpp:46
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavDecoder.cpp:27
 msgid "Show motion _vectors"
-msgstr "Montrer les vecteurs de mouvements"
+msgstr "Montrer les _vecteurs de mouvement"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavDecoder.cpp:48
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavDecoder.cpp:29
 msgid "Decoder Options"
-msgstr "Options de d?codage"
+msgstr "Option du d?codeur"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_mjpeg.cpp:41
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_mjpeg.cpp:37
 msgid "_Swap U&V:"
-msgstr "Echanger UV:"
+msgstr "_Inverser U & V :"
 
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_mjpeg.cpp:39
+msgid "Mjpeg Configuration"
+msgstr "Configuration Mjpeg"
+
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:92
 msgid "Select idx file:"
-msgstr "Choisir le fichier idx"
+msgstr "Choisir le fichier idx :"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:93
+msgid "Use GlyphSet (optional):"
+msgstr "Utiliser un dictionnaire de symbole (optionnel) :"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:93
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:210
-msgid "Use glyphset (optional):"
-msgstr "Utiliser un dictionnaire de symbole (optionnel):"
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:367
+msgid "Select GlyphSet file"
+msgstr "S?lectionner le fichier de symboles"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:94
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:211
 msgid "Output SRT file"
-msgstr "Fichier de sortie (SRT)"
+msgstr "Fichier de sortie SRT"
 
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:94
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:211
+msgid "Save SRT file"
+msgstr "Enregistrer le fichier SRT"
+
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:105
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:222
 msgid "Select input and ouput files"
-msgstr "Choisir les fichiers"
+msgstr "Choisir les fichiers d'entr?e et sortie"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:115
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:127
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:246
 msgid "The idx/sub file does not exist."
-msgstr "Le couple idx/sub n'existe pas"
+msgstr "Le couple idx/sub n'existe pas."
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:120
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:239
 msgid "Please Select a valid output SRT file."
-msgstr "Choisissez un fichier SRT de sortie valide."
+msgstr "Veuillez choisir un fichier SRT de sortie valide."
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:136
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:255
 msgid "Cannot load the glyphset file."
-msgstr "Echec du chargement du dictionnaire"
+msgstr "Echec de chargement du fichier de dictionnaire de symbole."
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:156
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:276
-msgid "Glyphset filename"
-msgstr "Nom du fichier dictionnaire"
+msgid "GlyphSet filename"
+msgstr "Nom du fichier du dictionnaire de symbole"
 
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:156
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:276
+msgid "Save GlyphSet file"
+msgstr "Enregistrer le fichier de dictionnaire de symboles"
+
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:158
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:278
 msgid "Save Glyph"
-msgstr "Sauver le dictionnaire"
+msgstr "Enregistrer les symboles"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:208
 msgid "Input TS:"
-msgstr "Fichier TS d'entr?e"
+msgstr "Fichier TS d'entr?e :"
 
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:208
+msgid "Select TS file"
+msgstr "S?lectionner le fichier TS"
+
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:209
 msgid "Subtitle PID:"
-msgstr "PID de la piste de sous titre"
+msgstr "PID de la piste de sous titre :"
 
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:210
+msgid "Use glyphset (optional):"
+msgstr "Utiliser un dictionnaire de symbole (optionnel) :"
+
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:233
 msgid "Please Select a valid TS file."
-msgstr "S?lectionnez un fichier TS valide"
+msgstr "Veuillez choisir un fichier TS valide."
 
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:278
+msgid "Save GlyphSet"
+msgstr "Enregistrer le dictionnaire de symboles"
+
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp:40
 #: avidemux/ADM_videoFilter/ADM_vidForcedPP.cpp:60
 msgid "_Filter strength:"
-msgstr "Force de filtre:"
+msgstr "Force du _filtre :"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp:51
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:346
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:344
 #: avidemux/ADM_videoFilter/ADM_vidForcedPP.cpp:72
 msgid "_Horizontal deblocking"
-msgstr "_D?groupage horizontal"
+msgstr "D?blocage _horizontal"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp:52
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:347
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:345
 #: avidemux/ADM_videoFilter/ADM_vidForcedPP.cpp:73
 msgid "_Vertical deblocking"
-msgstr "_D?groupage vertical"
+msgstr "D?blocage _vertical"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp:53
 #: avidemux/ADM_videoFilter/ADM_vidForcedPP.cpp:74
 msgid "_Deringing"
-msgstr "_Eliminer oscillations parasites"
+msgstr "_Eliminer les oscillations parasites"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:188
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:187
+#, fuzzy
 msgid "_Use systray while encoding"
 msgstr "_Activer le systray pendant l'encodage"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:189
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:188
 msgid "_Accept non-standard audio frequency for DVD"
-msgstr "Accepter des fr?quences audio non-standard pour l'encodage DVD"
+msgstr "_Accepter des fr?quences audio non standard pour l'encodage DVD"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:190
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:189
 msgid "_Use libavcodec MPEG-2 decoder"
-msgstr "_Utiliser le d?codeur MPEG libavcodec"
+msgstr "_Utiliser le d?codeur MPEG-2 de libavcodec"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:191
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:190
 msgid "Create _OpenDML files"
-msgstr "Cr?er fichier _OpenDML"
+msgstr "Cr?er des fichiers _OpenDML"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:192
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:191
 msgid "Automatically _index MPEG files"
-msgstr "Indexer automatiquement les fichiers MPEG"
+msgstr "_Indexer automatiquement les fichiers MPEG"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:193
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:192
 msgid "Automatically _swap A and B if A>B"
 msgstr "_Inverser automatiquement les marques A et B si A > B"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:194
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:193
+#, fuzzy
 msgid "_Disable NUV audio sync"
-msgstr "_D?sactiver la resynchro NuppelVideo"
+msgstr "_D?sactiver la synchronisation audio pour NuppelVideo"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:196
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:195
 msgid "Automatically _build VBR map"
-msgstr "Construire automatiquement le map VBR"
+msgstr "_Construire automatiquement l'index VBR"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:197
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:196
 msgid "Automatically _rebuild index"
-msgstr "Reconstuire automatiquement l'index"
+msgstr "_Reconstruire automatiquement l'index"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:198
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:197
 msgid "Automatically remove _packed bitstream"
-msgstr "Enlever automatiquement le Packed Bitstream"
+msgstr "Enlever automatiquement le Bitstream em_paquet?"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:200
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:199
 msgid "SIMD"
-msgstr ""
+msgstr "SIMD"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:202
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:201
 msgid "Enable all SIMD"
-msgstr ""
+msgstr "Activer tous les SIMD"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:203
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:202
 msgid "Enable MMX"
-msgstr ""
+msgstr "Activer le MMX"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:204
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:203
 msgid "Enable MMXEXT"
-msgstr ""
+msgstr "Activer le MMXEXT"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:205
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:204
 msgid "Enable 3DNOW"
-msgstr ""
+msgstr "Activer le 3DNOW"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:206
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:205
 msgid "Enable 3DNOWEXT"
-msgstr ""
+msgstr "Activer le 3DNOWEXT"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:207
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:206
 msgid "Enable SSE"
-msgstr ""
+msgstr "Activer le SSE"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:208
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:207
 msgid "Enable SSE2"
-msgstr ""
+msgstr "Activer le SSE2"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:209
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:208
 msgid "Enable SSE3"
-msgstr ""
+msgstr "Activer le SSE3"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:210
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:209
 msgid "Enable SSSE3"
-msgstr ""
+msgstr "Activer le SSSE3"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:231
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:230
 msgid "_lavc threads:"
-msgstr ""
+msgstr "processus _lavc :"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:232
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:231
 msgid "_x264 threads:"
-msgstr ""
+msgstr "processus _x264 :"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:233
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:232
 msgid "X_vid threads:"
-msgstr ""
+msgstr "processus X_viD :"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:235
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:234
 msgid "Multi-threading"
-msgstr ""
+msgstr "Multit?che"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:241
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:240
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:843
 msgid "High"
-msgstr "Haut"
+msgstr "Haute"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:242
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:241
 msgid "Above normal"
-msgstr "Au dessus de normal"
+msgstr "Sup?rieure ? la normale"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:244
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:243
 msgid "Below normal"
-msgstr "En dessous de normal"
+msgstr "Inf?rieur ? la normale"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:245
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:244
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:847
 msgid "Low"
-msgstr "Bas"
+msgstr "Basse"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:247
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:246
 msgid "_Encoding priority:"
-msgstr "Priorit? d'encodage:"
+msgstr "Priorit? d'_encodage :"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:248
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:247
 msgid "_Indexing/unpacking priority:"
-msgstr "_Priorit? indexage/d?paquetage:"
+msgstr "Priorit? d'_indexation/d?paquetage :"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:249
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:248
 msgid "_Playback priority:"
-msgstr "_Priorit? playback:"
+msgstr "Priorit? de _lecture :"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:251
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:250
 msgid "Prioritisation"
-msgstr ""
+msgstr "Gestion des priorit?s"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:256
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:255
 msgid "_Split MPEG files every (MB):"
-msgstr "Auto coupe chaque fichier MPEG tous (MB):"
+msgstr "_Couper chaque fichier MPEG (Mo) :"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:258
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:257
 msgid "_Use alternative tag for MP3 in .mp4"
-msgstr "_Utiliserdes tags alternatifs pour le MP3 dans le .mp4"
+msgstr "_Utiliser des attributs alternatifs pour le MP3 dans le .mp4"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:261
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:260
 msgid "GTK+ (slow)"
 msgstr "GTK+ (lent)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:263
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:262
 msgid "XVideo (best)"
-msgstr "XVid?o (meilleur)"
+msgstr "XVideo (meilleur)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:267
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:266
 msgid "SDL (GDI)"
-msgstr ""
+msgstr "SDL (GDI)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:268
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:267
 msgid "SDL (DirectX)"
-msgstr ""
+msgstr "SDL (DirectX)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:270
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:269
 msgid "SDL (good)"
 msgstr "SDL (bon)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:274
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:273
 msgid "Video _display:"
-msgstr "Affichage Vid?o:"
+msgstr "_Affichage vid?o :"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:279
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:278
 msgid "No alerts"
 msgstr "Pas d'alerte"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:280
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:279
 msgid "Display only error alerts"
-msgstr "Afficher seulement s'il y des alertes d'erreurs"
+msgstr "Afficher seulement s'il y a des alertes d'erreur"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:281
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:280
 msgid "Display all alerts"
-msgstr "Toutes les alertes"
+msgstr "Afficher toutes les alertes"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:283
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:282
 msgid "_Message level:"
-msgstr "_Niveau Messages:"
+msgstr "Niveau de _messages :"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:288
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:287
 msgid "PCM"
 msgstr "PCM"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:289
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:288
+#, fuzzy
 msgid "Master"
 msgstr "Ma?tre"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:290
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:289
 msgid "_Volume control:"
-msgstr "_Contr?le du volume?:"
+msgstr "Contr?le du _volume? :"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:295
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:294
 msgid "No downmixing"
-msgstr "Pas de downmixing"
+msgstr "Pas de baise du nombre de canaux"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:297
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:296
 msgid "Pro Logic"
-msgstr "Pro logic"
+msgstr "Pro Logic"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:298
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:297
 msgid "Pro Logic II"
-msgstr "Pro logic 2"
+msgstr "Pro Logic II"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:300
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:299
 msgid "_Local playback downmixing:"
-msgstr "_Local playback downmixing:"
+msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:332
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:310
+msgid "Core Audio"
+msgstr ""
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:316
+#, fuzzy
+msgid "JACK"
+msgstr "JACK"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:325
+#, fuzzy
+msgid "Win32"
+msgstr "Win32"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:330
 msgid "_Audio output:"
-msgstr "_Sortie Audio:"
+msgstr "Sortie _audio :"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:335
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:333
 msgid "ALSA _device:"
-msgstr ""
+msgstr "_P?riph?rique ALSA :"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:348
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:346
 msgid "De_ringing"
-msgstr "D?cercler"
+msgstr "Eliminer les oscillations pa_rasites"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:349
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:347
 #: avidemux/ADM_videoFilter/ADM_vidMSharpen.cpp:167
+#: avidemux/ADM_videoFilter/ADM_vidMsmooth.cpp:197
 msgid "_Strength:"
-msgstr "_Force:"
+msgstr "_Force :"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:350
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:348
 msgid "Default Postprocessing"
 msgstr "Post-traitement par d?faut"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:364
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:362
 msgid "_Filter directory:"
-msgstr "Chemin filtre:"
+msgstr "_Dossier des filtres :"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:365
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:362
+msgid "Select filter directory"
+msgstr ""
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:363
 msgid "_Load external filters"
-msgstr "Charger des filtres ext?rieurs"
+msgstr "_Charger des filtres externes"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:368
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:366
 msgid "Use _Global GlyphSet"
-msgstr "Utiliser un dictionnaire de symbol global"
+msgstr "Utiliser un dictionnaire de symbole _global"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:369
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:367
 msgid "Gl_yphSet:"
-msgstr "Dictionnaire"
+msgstr "_Dictionnaire de symbole :"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:378
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:376
 msgid "Automation"
-msgstr ""
+msgstr "Automatisation"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:382
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp:430
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:380
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp:543
 msgid "Input"
 msgstr "Entr?e"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:386
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp:431
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:384
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp:544
 msgid "Output"
 msgstr "Sortie"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:391
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:394
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:397
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:389
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:392
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:395
 msgid "Audio"
-msgstr ""
+msgstr "Audio"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:402
-#: avidemux/gtk_gui.cpp:1997
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:400
+#: avidemux/gtk_gui.cpp:2004
 msgid "Video"
 msgstr "Vid?o"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:410
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:408
 msgid "Threading"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:414
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:412
 msgid "Global GlyphSet"
-msgstr "Dictionnaire global"
+msgstr "Dictionnaire de symbole global"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:418
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:416
 msgid "External Filters"
 msgstr "Filtres externes"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:422
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:420
 msgid "Preferences"
 msgstr "Pr?f?rences"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_requant.cpp:48
 msgid "_Shrink Factor:"
-msgstr "_Facteur shrink?:"
+msgstr "Facteur de _r?duction :"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:59
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_requant.cpp:51
+msgid "Requant Configuration"
+msgstr ""
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:33
+msgid "VCD"
+msgstr "VCD"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:34
+msgid "SVCD"
+msgstr "SVCD"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:35
+msgid "DVD"
+msgstr "DVD"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:36
+msgid "DVD half D1"
+msgstr ""
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:37
+msgid "PSP 480*272"
+msgstr "PSP 480*272"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:38
+msgid "PSP full res (720*480"
+msgstr "PSP haute r?s (720*480)"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:54
 msgid "_Target type:"
-msgstr "Type de cible"
+msgstr "Type de _cible :"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:60
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:55
 msgid "_Source aspect ratio:"
-msgstr "Rapport H/L source:"
+msgstr "Rapport H/L _source :"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:61
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:56
 msgid "_Destination aspect ratio:"
-msgstr "Rapport H/L destination:"
+msgstr "Rapport H/L _destination :"
 
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.cpp:61
+msgid "Auto Wizard"
+msgstr "Configuration automatique"
+
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:88
 msgid "_Subtitle file:"
-msgstr "Fichier de sous titres:"
+msgstr "Fichier de _sous-titres :"
 
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:88
+#: avidemux/ADM_videoFilter/ADM_vidASS.cpp:87
+msgid "Select Subtitle file"
+msgstr "S?lectionner le fichier de sous-titres"
+
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:89
 msgid "_Font (TTF):"
-msgstr "Fontes (TTF):"
+msgstr "_Police (TTF) :"
 
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:89
+msgid "Select TTF file"
+msgstr "S?lectionner le fichier TTF"
+
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:104
 msgid "_Encoding:"
-msgstr "Encodage:"
+msgstr "_Encodage :"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:106
 msgid "S_elect C_olor"
-msgstr "Choisir la couleur"
+msgstr "Choisir la c_oul_eur"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:107
 msgid "Set Size and _Position"
-msgstr "Choisir la taille et la position"
+msgstr "Choisir la taille et la _position"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:108
 msgid "_Auto split"
-msgstr "D?coupe automatique"
+msgstr "D?coupe _automatique"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:109
 msgid "_Delay (ms):"
-msgstr "Retard (ms)"
+msgstr "_Retard (ms) :"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp:112
-msgid "Subtitler"
-msgstr ""
-
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:45
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:51
 msgid "Auto (might not work)"
@@ -1874,32 +2690,33 @@
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:46
 #: avidemux/ADM_videoFilter/ADM_vidYadif.cpp:178
 msgid "Top field first"
-msgstr ""
+msgstr "Trame paire en premier"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:47
 #: avidemux/ADM_videoFilter/ADM_vidYadif.cpp:177
 msgid "Bottom field first"
-msgstr ""
+msgstr "Trame impaire en premier"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:52
 msgid "Bottom field (keep top)"
-msgstr ""
+msgstr "Trame impaire (garde la paire)"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:53
 msgid "Top field (keep bottom)"
-msgstr ""
+msgstr "Trame paire (garde la impaire)"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:58
 msgid "Cubic interpolation"
-msgstr ""
+msgstr "Interpolation cubique"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:59
 msgid "Modified ELA"
 msgstr "ELA modifi?e"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:60
+#, fuzzy
 msgid "Kernel interpolation"
-msgstr ""
+msgstr "Interpolation de noyau"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:61
 msgid "Modified ELA-2"
@@ -1907,27 +2724,27 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:66
 msgid "4 fields check"
-msgstr ""
+msgstr "V?rification de 4 trames"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:67
 msgid "5 fields check"
-msgstr ""
+msgstr "V?rification de 5 trames"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:68
 msgid "4 fields check (no avg)"
-msgstr ""
+msgstr "V?rification de 4 trames (pas de moyenne)"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:69
 msgid "5 fields check (no avg)"
-msgstr ""
+msgstr "V?rification de 5 trames (pas de moyenne)"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:75
 msgid "No link"
-msgstr ""
+msgstr "Aucun lien"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:76
 msgid "Full link"
-msgstr ""
+msgstr "Lien complet"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:77
 msgid "Y to UV"
@@ -1952,13 +2769,13 @@
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:93
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:419
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:433
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1431
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1213
 msgid "0"
 msgstr "0"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:83
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:793
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:805
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:841
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:852
 msgid "1"
 msgstr "1"
 
@@ -1971,31 +2788,33 @@
 #: avidemux/ADM_videoFilter/ADM_vidDGbob.cpp:90
 #: avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp:92
 msgid "_Field order:"
-msgstr "Ordre trame:"
+msgstr "Ordre des _trames :"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:92
 msgid "_Interpolate:"
-msgstr "Interpoler:"
+msgstr "_Interpoler :"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:94
 msgid "_Type:"
-msgstr "Type:"
+msgstr "_Type :"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:95
+#, fuzzy
 msgid "_MntMode:"
-msgstr "MntMode:"
+msgstr "_MntMode :"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:96
 msgid "_Link:"
-msgstr "Lien:"
+msgstr "_Lien :"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:97
+#, fuzzy
 msgid "_AP type:"
-msgstr "Type AP:"
+msgstr "Type _AP :"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:100
 msgid "Use ch_roma to evalute"
-msgstr ""
+msgstr "Utilise la ch_rominance pour ?valuer"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:101
 msgid "Try _weave"
@@ -2003,24 +2822,24 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:102
 msgid "_Denoise"
-msgstr ""
+msgstr "_D?bruitage"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:103
 #: avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp:94
 msgid "_Sharp"
-msgstr "_Sharp"
+msgstr "_Nettet?"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:104
 msgid "_Evalute all frames"
-msgstr ""
+msgstr "_Evaluer toutes les images"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:107
 msgid "Motion threshold, l_uma:"
-msgstr ""
+msgstr "Seuil de mouvement, l_uminance :"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:108
 msgid "Motion threshold, c_hroma:"
-msgstr ""
+msgstr "Seuil de mouvement, c_hrominance :"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:109
 msgid "Area com_bing threshold:"
@@ -2032,53 +2851,61 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:111
 msgid "Artefact _protection threshold:"
-msgstr ""
+msgstr "Seuil de _protection des artefacts :"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:112
 msgid "Debug:"
-msgstr ""
+msgstr "D?bogage :"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp:121
-msgid "TDeint"
-msgstr ""
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:41
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:34
 msgid "_VOB file(s):"
-msgstr ""
+msgstr "Fichier(s) _VOB :"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:42
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:34
+msgid "Select VOB file(s)"
+msgstr "S?lectionner le(s) fichier(s) VOB"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:35
 msgid "_IFO file:"
-msgstr ""
+msgstr "Fichier _IFO :"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:43
-msgid "Vob_Sub file:"
-msgstr ""
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:35
+msgid "Select IFO file"
+msgstr "S?lectionner le fichier IFO"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:48
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:36
+msgid "VobSub file:"
+msgstr "Fichier VobSub :"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:36
+msgid "Select VobSub file"
+msgstr "S?lectionner le fichier VobSub"
+
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:41
 msgid "VOB to VobSub"
-msgstr ""
+msgstr "VOB vers VobSub"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:52
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:57
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:45
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:50
 msgid "The selected vobfile does not exist"
-msgstr ""
+msgstr "Le fichier VOB s?lectionn? n'existe pas"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:62
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp:55
 msgid "Please select a correct VobSub path/dir"
-msgstr ""
+msgstr "Veuillez s?lectionner un chemin/dossier VobSub correct"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_about.cpp:66
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:273
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:274
 msgid "Avidemux"
 msgstr "Avidemux "
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_about.cpp:67
 msgid "? 2001-2007 Mean"
-msgstr ""
+msgstr "? 2001-2007 Mean"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_about.cpp:68
 msgid "Multiplatform video editor"
-msgstr "Editeur Vid?o Multi-plateforme"
+msgstr "Editeur vid?o multiplateforme"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_about.cpp:69
 msgid ""
@@ -2090,8 +2917,7 @@
 "\t\t       Version 2, June 1991\n"
 "\n"
 " Copyright (C) 1989, 1991 Free Software Foundation, Inc.\n"
-"                       51 Franklin St, Fifth Floor, Boston, MA  02110-1301  "
-"USA\n"
+"                       51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA\n"
 " Everyone is permitted to copy and distribute verbatim copies\n"
 " of this license document, but changing it is not allowed.\n"
 "\n"
@@ -2226,8 +3052,7 @@
 "\n"
 "    a) Accompany it with the complete corresponding machine-readable\n"
 "    source code, which must be distributed under the terms of Sections\n"
-"    1 and 2 above on a medium customarily used for software interchange; "
-"or,\n"
+"    1 and 2 above on a medium customarily used for software interchange; or,\n"
 "\n"
 "    b) Accompany it with a written offer, valid for at least three\n"
 "    years, to give any third party, for a charge no more than your\n"
@@ -2334,8 +3159,7 @@
 "later version\", you have the option of following the terms and conditions\n"
 "either of that version or of any later version published by the Free\n"
 "Software Foundation.  If the Program does not specify a version number of\n"
-"this License, you may choose any version ever published by the Free "
-"Software\n"
+"this License, you may choose any version ever published by the Free Software\n"
 "Foundation.\n"
 "\n"
 "  10. If you wish to incorporate parts of the Program into other free\n"
@@ -2351,8 +3175,7 @@
 "  11. BECAUSE THE PROGRAM IS LICENSED FREE OF CHARGE, THERE IS NO WARRANTY\n"
 "FOR THE PROGRAM, TO THE EXTENT PERMITTED BY APPLICABLE LAW.  EXCEPT WHEN\n"
 "OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR OTHER PARTIES\n"
-"PROVIDE THE PROGRAM \"AS IS\" WITHOUT WARRANTY OF ANY KIND, EITHER "
-"EXPRESSED\n"
+"PROVIDE THE PROGRAM \"AS IS\" WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESSED\n"
 "OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF\n"
 "MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  THE ENTIRE RISK AS\n"
 "TO THE QUALITY AND PERFORMANCE OF THE PROGRAM IS WITH YOU.  SHOULD THE\n"
@@ -2397,8 +3220,7 @@
 "\n"
 "    You should have received a copy of the GNU General Public License\n"
 "    along with this program; if not, write to the Free Software\n"
-"    Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  "
-"USA\n"
+"    Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA\n"
 "\n"
 "\n"
 "Also add information on how to contact you by electronic and paper mail.\n"
@@ -2407,8 +3229,7 @@
 "when it starts in an interactive mode:\n"
 "\n"
 "    Gnomovision version 69, Copyright (C) year name of author\n"
-"    Gnomovision comes with ABSOLUTELY NO WARRANTY; for details type `show "
-"w'.\n"
+"    Gnomovision comes with ABSOLUTELY NO WARRANTY; for details type `show w'.\n"
 "    This is free software, and you are welcome to redistribute it\n"
 "    under certain conditions; type `show c' for details.\n"
 "\n"
@@ -2440,7 +3261,9 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_about.cpp:74
 msgid "translator-credits"
-msgstr "Fran?ais - ? 2006 Eric Lassauge"
+msgstr ""
+"Eric Lassauge (2006)\n"
+"Nicolas Velin (2008)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_acodec.cpp:138
 msgid "AudioCodec"
@@ -2448,11 +3271,10 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_acodec.cpp:163
 msgid "Configure codec"
-msgstr "Configurer codec"
+msgstr "Configurer le codec"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_asharp.cpp:71
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_chromaShift.cpp:67
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_contrast.cpp:72
 msgid "ASHARP"
 msgstr "ASHARP"
 
@@ -2466,20 +3288,20 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_asharp.cpp:204
 msgid "Strength :"
-msgstr "Force:"
+msgstr "Force :"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_asharp.cpp:212
 msgid "Block Adaptative :"
-msgstr "Block adaptatif"
+msgstr "Bloc adaptatif :"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_asharp.cpp:220
 msgid "Unknown flag :"
-msgstr "Flag inconnu:"
+msgstr "Drapeau inconnu :"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_asharp.cpp:252
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:161
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:262
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:283
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:255
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:276
 msgid " "
 msgstr "?"
 
@@ -2488,7 +3310,7 @@
 msgstr "Occup?"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:401
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:994
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:999
 msgid "Calculator"
 msgstr "Calculatrice"
 
@@ -2498,7 +3320,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:441
 msgid "Duration:"
-msgstr "Dur?e:"
+msgstr "Dur?e :"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:447
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:802
@@ -2507,21 +3329,22 @@
 msgstr "00:00:00"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:461
+#, fuzzy
 msgid "_Medium:"
-msgstr "_Support:"
+msgstr "_Support :"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:472
 msgid "_Format:"
-msgstr "_Format:"
+msgstr "_Format :"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:483
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:541
 msgid "Total size (custom)"
-msgstr "Taille totale (perso)"
+msgstr "Taille totale (personnalis?e)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:493
 msgid "_Custom size (MB):"
-msgstr "Taille perosnnalis?e (MB):"
+msgstr "Taille _personnalis?e (Mo) :"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:507
 msgid "Output container format"
@@ -2552,26 +3375,26 @@
 msgstr "DVD5"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:559
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:808
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:855
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_threadCount.cpp:87
 msgid "Custom"
 msgstr "Personnalis?"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:571
 msgid "Track _1:"
-msgstr "Piste _1:"
+msgstr "Piste _1 :"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:579
 msgid "Audio bitrate in kb/s for track 1 (0 for no audio)"
-msgstr "Bitrate audio de la piste 1 ( 0 pour pas d'audio)"
+msgstr "D?bit audio en kb/s de la piste 1 ( 0 pour pas d'audio)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:586
 msgid "Track _2: "
-msgstr "Piste _2:"
+msgstr "Piste _2 :"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:594
 msgid "Audio bitrate in kb/s for track 2 (optional)"
-msgstr "Bitrate audio de la piste 2 (optionnel)"
+msgstr "D?bit audio en kb/s de la piste 2 (optionnel)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:598
 msgid "<b>Audio Bitrate</b>"
@@ -2579,23 +3402,23 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:624
 msgid "Audio size (MB):"
-msgstr "Taille audio (MB):"
+msgstr "Taille audio (Mo) :"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:640
 msgid "Video size (MB):"
-msgstr "Taille vid?o (MB):"
+msgstr "Taille vid?o (Mo) :"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:656
 msgid "Total size (MB):"
-msgstr "Taille totale (MB):"
+msgstr "Taille totale (Mo) :"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:678
 msgid "Video bitrate:"
-msgstr "Bitrate vid?o:"
+msgstr "D?bit vid?o :"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:686
 msgid "Bits per pixel:"
-msgstr "Bits par pixel"
+msgstr "Bits par pixel :"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:702
 msgid "0.0"
@@ -2606,16 +3429,17 @@
 msgstr "<b>R?sultat</b>"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_chromaShift.cpp:184
+#, fuzzy
 msgid "ChromaShift"
-msgstr "D?calage Chroma"
+msgstr "ChromaShift"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_chromaShift.cpp:198
 msgid "U Shift :"
-msgstr "U Shift :"
+msgstr "D?calage en U :"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_chromaShift.cpp:205
 msgid "V Shift :"
-msgstr "V Shift :"
+msgstr "D?calage en V :"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_chromaShift.cpp:247
 msgid "<b>Preview</b>"
@@ -2623,7 +3447,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_cnr2.cpp:137
 msgid "Chroma Noise Reduction 2"
-msgstr "R?duction de bruit chroma 2"
+msgstr "R?duction du bruit de la chrominance 2"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_cnr2.cpp:162
 msgid "<b>Scene change Treshold</b>"
@@ -2639,19 +3463,19 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_cnr2.cpp:204
 msgid "Luma :"
-msgstr "Luma :"
+msgstr "Luminance :"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_cnr2.cpp:211
 msgid "Chroma U :"
-msgstr "Chroma U :"
+msgstr "Chrominance en U :"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_cnr2.cpp:218
 msgid "Chroma V :"
-msgstr "Chroma V :"
+msgstr "Chrominance en V :"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_cnr2.cpp:261
 msgid "Narrow"
-msgstr "Narrow"
+msgstr ""
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_cnr2.cpp:286
 msgid "<b>Settings</b>"
@@ -2659,7 +3483,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_cnr2.cpp:305
 msgid "Use also chroma to detect scene change"
-msgstr "Utiliser ?galement le chroma pour d?tecter le changement de sc?ne"
+msgstr "Utilise ?galement la chrominance pour d?tecter le changement de sc?ne"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_cnr2.cpp:309
 msgid "<b>Mode</b>"
@@ -2667,14 +3491,8 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:155
 msgid "ColorYuv (From avisynth)"
-msgstr "Couleur YUV (vient AviSynth)"
+msgstr "Configuration de \"Avisynth ColorYUV\""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:179
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_contrast.cpp:194
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_contrast.cpp:212
-msgid "Contrast"
-msgstr "Contraste"
-
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:186
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_contrast.cpp:221
 msgid "Brightness"
@@ -2686,20 +3504,20 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:207
 msgid "Luma Y"
-msgstr "Luma Y"
+msgstr "Luminance en Y"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:214
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_contrast.cpp:239
 msgid "Chroma U"
-msgstr "Chroma U"
+msgstr "Chrominance en U"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:221
 msgid "Chroma V"
-msgstr "Chroma V"
+msgstr "Chrominance en V"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:324
 msgid "<b>Color Correction Matrix</b>"
-msgstr "<b>Matrice Correction Couleur</b>"
+msgstr "<b>Matrice de correction des couleurs</b>"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:347
 msgid "Matrix"
@@ -2719,7 +3537,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:382
 msgid "Coring"
-msgstr "Coring"
+msgstr ""
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:390
 msgid "TV->PC"
@@ -2738,20 +3556,21 @@
 "<b>Matrix Warning :</b>\n"
 "all above values are normalized to 256!"
 msgstr ""
-"<b>Probl?em de Matrice?:</b>\n"
+"<b>Probl?me de matrice?:</b>\n"
 "toutes les valeurs ci-dessus seront normalis?es ? 256?!"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:404
 msgid "AutoGain"
-msgstr "Gain Auto"
+msgstr "Gain automatique"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:408
+#, fuzzy
 msgid "Display Stats"
 msgstr "Affichage des stats"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:412
 msgid "AutoWhite"
-msgstr "Blanc Auto"
+msgstr "Balance  automaique des blancs"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:416
 msgid "<b>frame2</b>"
@@ -2759,39 +3578,39 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_contrast.cpp:235
 msgid "Luma"
-msgstr "Luma"
+msgstr "Luminance"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_contrast.cpp:243
 msgid "Chroma v"
-msgstr "Chroma v"
+msgstr "Chrominance en v"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_crop.cpp:258
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_crop.cpp:255
 msgid "Crop Settings"
-msgstr "R?glages d?coupe"
+msgstr "Configuration du \"Crop\""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_crop.cpp:292
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_crop.cpp:289
 msgid "AutoCrop"
-msgstr "Auto-d?coupage"
+msgstr "Retaillage automatique"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_crop.cpp:314
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_crop.cpp:311
 msgid "Reset"
-msgstr "RAZ"
+msgstr "R?initialiser"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_crop.cpp:323
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_crop.cpp:320
 msgid "Crop Left :"
-msgstr "D?coupe gauche?:"
+msgstr "Bordure gauche?:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_crop.cpp:331
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_crop.cpp:328
 msgid "Crop Top:"
-msgstr "D?coupe haut?:"
+msgstr "Bordure haute?:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_crop.cpp:339
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_crop.cpp:336
 msgid "Crop Right:"
-msgstr "D?coupe droite?:"
+msgstr "Bordure droite?:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_crop.cpp:347
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_crop.cpp:344
 msgid "Crop Bottom:"
-msgstr "D?coupe bas?:"
+msgstr "Bordure basse?:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:161
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:183
@@ -2801,7 +3620,7 @@
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:161
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:183
 msgid "Root privileges are required to perform this operation."
-msgstr ""
+msgstr "Les privil?ges d'administrateur sont requis pour effectuer cette op?ration."
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:204
 msgid "Shutting down"
@@ -2818,7 +3637,7 @@
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:418
 #, c-format
 msgid "%lu MB"
-msgstr "%lu MB"
+msgstr "%lu Mo"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:514
 msgid "Encoding..."
@@ -2826,70 +3645,70 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:545
 msgid "<b>Phase:</b>"
-msgstr "<b>Phase:</b>"
+msgstr "<b>Phase :</b>"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:560
 msgid "<b>Video Codec:</b>"
-msgstr "<b>Codec Vid?o:</b>"
+msgstr "<b>Codec vid?o :</b>"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:575
 msgid "<b>Audio Codec:</b>"
-msgstr "<b>Codec Audio:</b>"
+msgstr "<b>Codec audio :</b>"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:590
 msgid "<b>Container:</b>"
-msgstr "<b>Conteneur?:</b>"
+msgstr "<b>Conteneur :</b>"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:622
 msgid "<b>Processed Frames:</b>"
-msgstr "<b>Image trait?es:</b>"
+msgstr "<b>Image trait?es :</b>"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:630
 msgid "<b>Total Frames:</b>"
-msgstr "<b>Totale images:</b>"
+msgstr "<b>Images totales :</b>"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:638
 msgid "<b>Quantiser:</b>"
-msgstr "<b>Quantiseur:</b>"
+msgstr "<b>Quantificateur :</b>"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:646
 msgid "<b>Average Bitrate:</b>"
-msgstr "<b>Bitrate?moyen:</b>"
+msgstr "<b>D?bit moyen :</b>"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:654
 msgid "0 kB/s"
-msgstr "0 kB/s"
+msgstr "0 ko/s"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:699
 msgid "<b>Video Size:</b>"
-msgstr "<b>Taille Vid?o?:</b>"
+msgstr "<b>Taille de la vid?o?:</b>"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:707
 msgid "<b>Audio Size:</b>"
-msgstr "<b>Taille Audio?:</b>"
+msgstr "<b>Taille de l'audio?:</b>"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:715
 msgid "<b>Total Size:</b>"
-msgstr "<b>Taille Totale?:</b>"
+msgstr "<b>Taille totale?:</b>"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:723
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:731
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:739
 msgid "0 MB"
-msgstr "0 MB"
+msgstr "0 Mo"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:764
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_working.cpp:244
 msgid "<b>Elapsed:</b>"
-msgstr "<b>Ecoul?:</b>"
+msgstr "<b>Ecoul? :</b>"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:772
 msgid "<b>Time Remaining:</b>"
-msgstr "<b>Temps restant:</b>"
+msgstr "<b>Restant :</b>"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:780
 msgid "<b>Frames/sec:</b>"
-msgstr "<b>Image/sec:</b>"
+msgstr "<b>Image/sec :</b>"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:826
 msgid "Shut down computer when finished"
@@ -2897,7 +3716,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:834
 msgid "Priority:"
-msgstr "Priorit?"
+msgstr "Priorit? :"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:844
 msgid "Above Normal"
@@ -2911,10 +3730,6 @@
 msgid "Pause / Abort"
 msgstr "Pause/Annulation"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eq2.cpp:205
-msgid "MPlayer eq2"
-msgstr "MPlayer eq2"
-
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eq2.cpp:231
 msgid "Brigh_tness:"
 msgstr "Lumino_sit??:"
@@ -2953,7 +3768,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_equalizer.cpp:450
 msgid "Equalizer"
-msgstr "Equaliseur"
+msgstr "Configuration du \"Luma equalizer\""
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_exLame.cpp:80
 msgid "Lame command"
@@ -2961,7 +3776,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_exLame.cpp:89
 msgid "Enter parameters (i.e. -b 192 -m s ...)"
-msgstr "Entrer param?tres (i.e. -b 192 -ms ...)"
+msgstr "Saisir les param?tres (i.e. -b 192 -ms ...)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_hue.cpp:74
 msgid "Hue"
@@ -2981,7 +3796,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:51
 msgid "Continue indexing"
-msgstr "Continuer l'indexage"
+msgstr "Continuer l'indexation"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:51
 msgid "Abort Requested"
@@ -2989,27 +3804,27 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:51
 msgid "Do you want to abort indexing ?"
-msgstr "Voulez-vous annuler l'indexage??"
+msgstr "Voulez-vous annuler l'indexation??"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:153
 msgid "Indexing..."
-msgstr "Indexer un MPEG..."
+msgstr "Indexation..."
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:174
 msgid "Time left :"
-msgstr "Temps restant?:"
+msgstr "Dur?e restante?:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:182
 msgid "Timecode :"
-msgstr "Timecode?:"
+msgstr "Time-code :"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:190
 msgid "Nb pictures seen :"
-msgstr "Nb d'image vues?:"
+msgstr "Nb d'images vues?:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:214
 msgid "Indexing :"
-msgstr "Indexage?:"
+msgstr "Indexation?:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp:222
 msgid "/dev/null"
@@ -3024,7 +3839,7 @@
 msgstr "R?ussi"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:25
-#: avidemux/gtk_gui.cpp:2275
+#: avidemux/gtk_gui.cpp:2282
 msgid "Failed"
 msgstr "Echou?"
 
@@ -3038,7 +3853,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:98
 msgid "  Job Name  "
-msgstr " Nom t?che?:"
+msgstr "  Nom de la t?che  "
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:103
 msgid "Started at"
@@ -3055,24 +3870,24 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:134
 msgid "Delete ALL jobs"
-msgstr "Effacer toutes les t?ches"
+msgstr "Supprimer TOUTES les t?ches"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:134
 msgid "Are you sure you want to delete all jobs ?"
-msgstr "Etes-vous s?r de vouloir effacer toutes les t?ches??"
+msgstr "Etes-vous s?r de vouloir supprimer toutes les t?ches??"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:172
 msgid "Delete job"
-msgstr "Supprimer t?che"
+msgstr "Supprimer la t?che"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:172
 #, c-format
 msgid "Are you sure you want to delete %s job ?"
-msgstr "Etes-vous s?r de vouloir effacer %s t?ches??"
+msgstr "Etes-vous s?r de vouloir supprimer la t?che?%s ?"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:181
 msgid "Unknown event"
-msgstr "Ev?nement inconnu"
+msgstr "Ev?nement inconnu"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:261
 msgid "Jobs"
@@ -3080,7 +3895,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:287
 msgid "Delete All Jobs"
-msgstr "Effacer toutes les t?ches"
+msgstr "Supprimer toutes les t?ches"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:292
 msgid "Delete Job"
@@ -3096,7 +3911,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs_save.cpp:49
 msgid "Select Video to Write"
-msgstr ""
+msgstr "S?lectionner la vid?o ? ?crire"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs_save.cpp:63
 msgid "Invalid filename"
@@ -3104,7 +3919,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs_save.cpp:63
 msgid "Please select or enter a valid filename."
-msgstr ""
+msgstr "Veuillez s?lectionner ou saisir un nom de fichier valide."
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs_save.cpp:69
 msgid "Invalid jobname"
@@ -3112,27 +3927,25 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs_save.cpp:69
 msgid "Please select or enter a valid jobname."
-msgstr ""
+msgstr "Veuillez s?lectionner ou saisir un nom de t?che valide."
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs_save.cpp:110
 msgid "Save Job"
-msgstr "Enregistrer t?che"
+msgstr "Enregistrer la t?che"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs_save.cpp:131
 msgid "Select the output file"
-msgstr "S?lectionner un fichier de sortie"
+msgstr "S?lectionner le fichier de sortie"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs_save.cpp:145
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_filesel.cpp:93
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_filesel.cpp:245
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_filesel.cpp:90
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_filesel.cpp:244
 msgid "_Browse..."
-msgstr "_Choisir..."
+msgstr "_Explorer..."
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs_save.cpp:154
 msgid "Job name displayed in the job list and used as the script filename"
-msgstr ""
-"Le nom du travail est montr? dans la liste du travail et utilis? comme nom "
-"de fichier de script"
+msgstr "Le nom de la t?che est montr? dans la liste de t?che et est utilis? comme nom de fichier de script"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs_save.cpp:163
 msgid "Filename of the audio/video output"
@@ -3140,15 +3953,15 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs_save.cpp:166
 msgid "_Job name:"
-msgstr "_Nom t?che?:"
+msgstr "Nom de la _t?che?:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs_save.cpp:173
 msgid "Output _file:"
-msgstr "Fichier de _Sortie?:"
+msgstr "_Fichier de sortie?:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_mpdelogo.cpp:379
 msgid "Mplayer Delogo"
-msgstr "Mplayer Delogo"
+msgstr "Configuration du \"Mplayer Delogo\""
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_mpdelogo.cpp:397
 msgid "X"
@@ -3180,15 +3993,15 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:100
 msgid "# of lines"
-msgstr "Nbr de lignes"
+msgstr "Nb de lignes"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:108
 msgid "TimeCode:"
-msgstr ""
+msgstr "Time-code :"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:116
 msgid "# of Glyphs :"
-msgstr "Nbr de Glyphes?:"
+msgstr "Nb de symboles?:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:124
 msgid "<b>Stats</b>"
@@ -3196,43 +4009,45 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:141
 msgid "Current Glyph"
-msgstr "Glyphe courante"
+msgstr "Symbole actuel"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:154
 msgid " Text:"
 msgstr " Texte?:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:176
+#, fuzzy
 msgid "_Calibrate"
-msgstr ""
+msgstr "_Calibrer"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:180
 msgid "If the glyphs are too thin, enter a lower value here"
-msgstr ""
+msgstr "Si les symboles sont trop fins, saisir une valeur plus petite ici"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:182
+#, fuzzy
 msgid "S_kip all"
-msgstr ""
+msgstr "P_asser tous"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:186
 msgid "Skip the whole image"
-msgstr ""
+msgstr "Passer l'image enti?re"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:188
 msgid "Skip Glyph"
-msgstr "Sauter Glyphe"
+msgstr "Sauter le symbole"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:192
 msgid "Skip the current letter/glyph"
-msgstr ""
+msgstr "Passer le symbole actuel"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:194
 msgid "_Ignore glyph"
-msgstr ""
+msgstr "_Ignorer le symbole"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:198
 msgid "This glyph will be ignored from now on"
-msgstr ""
+msgstr "Ce symbole sera ignor? ? partir de maintenant"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:200
 msgid "Ok"
@@ -3242,11 +4057,6 @@
 msgid "<b>Bitmap</b>"
 msgstr "<b>Bitmap</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_partial.cpp:123
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtersub.cpp:144
-msgid "Partial"
-msgstr "Partiel"
-
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_partial.cpp:137
 msgid "Start frame for partial :"
 msgstr "Image de d?but pour partiel?:"
@@ -3259,6 +4069,11 @@
 msgid "Configure partialized filter"
 msgstr "Configurer les filtres partiels"
 
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp:269
+#, fuzzy
+msgid "Particle Analysis Configuration"
+msgstr "Configuration de l'analyse des particules"
+
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_pause.cpp:93
 msgid "Paused"
 msgstr "En pause"
@@ -3294,142 +4109,143 @@
 msgstr ""
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_preview.cpp:180
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:542
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp:336
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtersub.cpp:150
 msgid "Preview"
 msgstr "Pr?visualisation"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:47
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:40
 msgid "No"
-msgstr "?Non "
+msgstr "Non"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:47
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:40
 msgid "Yes"
-msgstr "?Oui "
+msgstr "Oui"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:67
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:60
 #, c-format
 msgid "%lu x %lu"
 msgstr "%lu x %lu"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:70
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:63
 #, c-format
 msgid "%2.3f fps"
 msgstr "%2.3f fps"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:73
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:66
 #, c-format
 msgid "%ld frames"
-msgstr "%ld d'images"
+msgstr "%ld images"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:83
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:133
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:76
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:126
 #, c-format
 msgid "%02d:%02d:%02d.%03d"
 msgstr "%02d:%02d:%02d.%03d"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:96
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:89
 #, c-format
 msgid "%s (%u:%u)"
 msgstr "%s (%u:%u)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:118
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:111
 #, c-format
 msgid "%lu Hz"
 msgstr "%lu Hz"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:120
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:113
 #, c-format
 msgid "%lu Bps / %lu kbps"
-msgstr "%lu Bps / %lu kbps"
+msgstr "%lu bps / %lu kbps"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:136
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:129
 #, c-format
 msgid "%.2f MB"
-msgstr "%.2f MB"
+msgstr "%.2f Mo"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:205
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:198
 msgid "Properties"
 msgstr "Propri?t?s "
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:234
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:227
 msgid "Frame Rate:"
-msgstr "FPS:"
+msgstr "Image par seconde :"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:241
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:234
 msgid "Frame Count:"
-msgstr "Compte image:"
+msgstr "Nombre d'image :"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:248
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:426
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:241
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:419
 msgid "Total Duration:"
-msgstr "Dur?e totale:"
+msgstr "Dur?e totale :"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:269
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:262
 msgid "Image Size:"
-msgstr "taille image:"
+msgstr "Taille de l'image :"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:290
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:283
 msgid "Codec 4CC:"
-msgstr "Codec FourCC:"
+msgstr "Codec FourCC :"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:304
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:297
 msgid "Aspect Ratio:"
-msgstr "Ratio:"
+msgstr "Rapport H/L :"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:318
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1058
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:311
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1063
 msgid "<b>Video</b>"
 msgstr "<b>Vid?o</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:337
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:330
 msgid "Global Motion Compensation:"
-msgstr "Compensation Globale du mouvement:"
+msgstr "Compensation Globale du Mouvement :"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:351
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:344
 msgid "Packed Bitstream:"
-msgstr "Packed Bitstream:"
+msgstr "Bitstream empaquet? :"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:365
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:358
 msgid "Quarter Pixel:"
-msgstr "Quarter Pixel:"
+msgstr "Quart de Pixel :"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:379
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:372
 msgid "<b>Extra Video Properties</b>"
-msgstr "<b>Propri?t?s vid?o extra</b>"
+msgstr "<b>Propri?t?s suppl?mentaire de la vid?o</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:398
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:391
 msgid "Codec:"
-msgstr "Codec:"
+msgstr "Codec :"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:405
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:398
 msgid "Channels:"
-msgstr "Canaux:"
+msgstr "Canaux :"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:412
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:405
 msgid "Bitrate:"
-msgstr "Bitrate:"
+msgstr "D?bit :"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:419
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:412
 msgid "Frequency:"
-msgstr "Fr?quence:"
+msgstr "Fr?quence :"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:468
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:461
 msgid "File Size:"
-msgstr "Taille fichier:"
+msgstr "Taille du fichier :"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:482
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:475
 msgid "Variable Bitrate:"
-msgstr "Bitrate variable:"
+msgstr "D?bit variable :"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:496
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1098
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:489
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1103
 msgid "<b>Audio</b>"
 msgstr "<b>Audio</b>"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_quota.cpp:90
 msgid "Filesystem full / quota exceeded"
-msgstr "Fichier syst?me complet / quota d?pass?"
+msgstr "Syst?me de fichier plein / quota d?pass?"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_quota.cpp:133
 msgid "Ignore"
@@ -3443,17 +4259,13 @@
 msgid "Recent files"
 msgstr "Fichiers r?cents"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:312
-msgid "Resize"
-msgstr "Redimensionner"
-
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:326
 msgid " Width "
-msgstr "Largeur"
+msgstr "Largeur :"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:333
 msgid " Height "
-msgstr "Hauteur"
+msgstr "Hauteur :"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:356
 msgid "Source :"
@@ -3461,15 +4273,15 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:362
 msgid "Destination"
-msgstr "Destination"
+msgstr "Destination :"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:412
 msgid " Error X:"
-msgstr "Erreur X?:"
+msgstr "Erreur en X?:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:426
 msgid " Error Y:"
-msgstr "Erreur Y?:"
+msgstr "Erreur en Y?:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_resize.cpp:440
 msgid "16 round up"
@@ -3490,10 +4302,44 @@
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_srt.cpp:91
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_srt.cpp:222
 msgid "Subtitle Size and Position"
-msgstr ""
+msgstr "Position et taille des sous-titres"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_srt.cpp:236
 msgid "Font Size:"
+msgstr "Taille de la police :"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp:505
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:388
+msgid "Swiss Army Knife Configuration"
+msgstr "Configuration du couteau suisse"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:200
+#: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:163
+msgid "Threshold Configuration"
+msgstr "Configuration du seuil"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:423
+msgid "Minimum value to be in-range:"
+msgstr "Valeur mi_nimun pour ?tre dans l'intervalle :"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:456
+msgid "Maximum value to be in-range:"
+msgstr "Valeur ma_ximun pour ?tre dans l'intervalle :"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:487
+msgid "Output values:   "
+msgstr "Valeurs de sortie :"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:494
+msgid "In-range values go black, out-of-range values go white"
+msgstr "Les valeurs dans l'intervalle deviennent noires, les autres deviennent blanches"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:495
+msgid "In-range values go white, out-of-range values go black"
+msgstr "Les valeurs dans l'intervalle deviennent blanches, les autres deviennent noires"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:501
+msgid "Debugging settings (bits):   "
 msgstr ""
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vcodec.cpp:104
@@ -3501,11 +4347,15 @@
 msgstr "Encodeur vid?o"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vcodec.cpp:118
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1078
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1118
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1083
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1123
 msgid "Configure"
 msgstr "Configurer"
 
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:88
+msgid "none"
+msgstr "aucun"
+
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:98
 msgid "Select .idx file"
 msgstr "S?lection du fichier .idx"
@@ -3520,15 +4370,15 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:227
 msgid "Select Language :"
-msgstr "S?lection Langue?:"
+msgstr "S?lection la langue?:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:241
 msgid "Select Sub"
-msgstr "S?lection Sous-titres"
+msgstr "S?lection les sous-titres"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:254
 msgid "Extra Shrink Factor :"
-msgstr "Facteur d'extra r?duction?:"
+msgstr "Facteur suppl?mentaire de r?duction?:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:269
 msgid "Shift (ms) :"
@@ -3536,694 +4386,629 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:283
 msgid "Extra Settings"
-msgstr "R?glages Extra"
+msgstr "R?glages suppl?mentaires"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_working.cpp:223
 msgid "Processing"
-msgstr ""
+msgstr "Traitement"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_working.cpp:259
 msgid "<b>Time remaining:</b>"
-msgstr ""
+msgstr "<b>Dur?e restante :</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:560
-msgid "X264 configuration"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:110
+#, fuzzy
+msgid "Hadamard Exhaustive Search"
+msgstr "Recherche exhaustive"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:596
+msgid "x264 Configuration"
 msgstr "Configuration x264"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:575
-msgid "Encoding Mode:"
-msgstr "Mode d'encodage?:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:617
+msgid "Encoding Mode"
+msgstr "Mode d'encodage"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:587
-msgid "Entry input for target file size or bitrate"
-msgstr "pour la taille ou le bitrate du fichier cible"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:624
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:480
+msgid "Quantizer"
+msgstr "Quantificateur"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:589
-msgid "Quantizer (0-51):"
-msgstr "Quantificateur (0-51)?:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:631
+msgid "Target Size"
+msgstr "Taille cible"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:602
-msgid ""
-"Constant Quantizer - Each frame will the same compression. Low numbers equal "
-"higher quality while high numbers equal lower quality"
-msgstr ""
-"Quantificateur constant - chaque image aura la m?me compression. Les valeurs "
-"faibles donnent une meilleure qualit? et donc les valeurs hautes donnent une "
-"qualit? basse"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:644
+#, fuzzy
+msgid "Constant Quantizer - Each frame will have the same compression. Low numbers equal higher quality while high numbers equal lower quality."
+msgstr "Quantificateur constant - chaque image aura la m?me compression. Les valeurs faibles donnent une meilleure qualit? et donc les valeurs hautes donnent une qualit? basse"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:612
-msgid "Target Size:"
-msgstr "Taille cible?:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:652
+msgid "Target bitrate or file size"
+msgstr "D?bit ou taille du fichier cible"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:624
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:660
 msgid "Single Pass - Quality Quantizer (Average)"
 msgstr "Une passe - Qualit? Quantificateur (moyen)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:625
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:661
 msgid "Single Pass - Quality Quantizer (Constant)"
 msgstr "Une passe - Qualit? Quantificateur (constant)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:626
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:662
 msgid "Single Pass - Bitrate (Average)"
 msgstr "Une passe - Bitrate (moyen)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:627
-msgid "Two Pass - File Size"
-msgstr "Deux passes - Taille fichier"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:663
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:768
+msgid "Two Pass - Video Size"
+msgstr "Deux passes - Taille de la vid?o"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:628
-msgid "Two Pass - Average bitrate"
-msgstr "Deux passes - Bitrate moyen"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:664
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:772
+msgid "Two Pass - Average Bitrate"
+msgstr "Deux passes - D?bit moyen"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:630
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:666
 msgid "Bitrate"
 msgstr "Bitrate"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:656
-msgid "Partition decision"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:699
+#, fuzzy
+msgid "Partition Decision"
 msgstr "D?cision de partition"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:663
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:706
 msgid "Method"
 msgstr "M?thode"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:675
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:718
 msgid "1  - Extremely Low (Fastest)"
-msgstr "1 - Extr?mement bas (le plus rapide)"
+msgstr "1 - Extr?mement bas (le plus rapide)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:676
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:719
 msgid "2  - Very Low"
 msgstr "2 - Tr?s bas"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:677
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:720
 msgid "3  - Low"
 msgstr "3 - Bas"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:678
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:721
 msgid "4  - Medium"
 msgstr "4 - Moyen"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:679
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:722
 msgid "5  - High (Default)"
 msgstr "5 - Haut (par d?faut)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:680
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:723
 msgid "6  - Very High"
 msgstr "6 - Tr?s haut"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:681
-msgid "6B - Very High (RDO on Bframes)"
-msgstr "6B - Tr?s haut (RDO sur Image-B)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:724
+msgid "6B - Very High (RDO on B-frames)"
+msgstr "6B - Tr?s haut (RDO sur images-B)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:682
-msgid "7 - Ultra High"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:725
+msgid "7  - Ultra High"
 msgstr "7 - Ultra haut"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:683
-msgid "7B - Ultra High (RDO on Bframes)"
-msgstr "7B - Ultra haut (RDO sur image-B)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:726
+msgid "7B - Ultra High (RDO on B-frames)"
+msgstr "7B - Ultra haut (RDO sur images-B)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:690
-msgid "Diamond search"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:733
+msgid "Diamond Search"
 msgstr "Recherche en diamand"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:691
-msgid "Hexagonal search"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:734
+msgid "Hexagonal Search"
 msgstr "Recherche hexagonale"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:692
-msgid "Uneven multi hexagon"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:735
+#, fuzzy
+msgid "Uneven Multi-hexagon"
 msgstr "Multi hexagone irr?gulier"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:693
-msgid "Exhaustive search"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:736
+msgid "Exhaustive Search"
 msgstr "Recherche exhaustive"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:705
-msgid ""
-"Set how many previous frames can be referenced by a P/B-frame. Numbers above "
-"5 do not seem to improve quality greatly. Numbers are 3 to 5 are recommended"
-msgstr ""
-"Choisir combien d'images pr?c?dentes sont r?f?renc?es par une image-P/B. Une "
-"valeur sup?rieure ? 5 ne semble pas avoir d'effet sur la qualit?. Une valeur "
-"entre 3 et 5 est recommand?e"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:708
-msgid "Max. Ref. frames"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:744
+#, fuzzy
+msgid "Max. Ref. Frames"
 msgstr "Max. images R?f."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:715
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:751
 msgid "Range"
 msgstr "Plage"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:728
-msgid ""
-"Define how many pixels are analysised. The higher the range the more "
-"accurate the analysis but the slower the encoding time"
-msgstr ""
-"D?finit combien de pixels sont analys?s. Plus la plage est grande, plus "
-"l'analyse est fine, mais au d?pend de la dur?e d'encodage"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:764
+#, fuzzy
+msgid "Define how many pixels are analysed for motion estimation. The higher the range the more accurate the analysis but the slower the encoding time."
+msgstr "D?finit combien de pixels sont analys?s. Plus la plage est grande, plus l'analyse est fine, mais au d?pend de la dur?e d'encodage"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:731
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:773
+#, fuzzy
+msgid "Set how many previous frames can be referenced by a P/B-frame. Numbers above 5 do not seem to improve quality greatly. Numbers 3 to 5 are recommended."
+msgstr "Choisir combien d'images pr?c?dentes sont r?f?renc?es par une image-P/B. Une valeur sup?rieure ? 5 ne semble pas avoir d'effet sur la qualit?. Une valeur entre 3 et 5 est recommand?e"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:776
+#, fuzzy
 msgid "Chroma ME"
-msgstr "Chroma ME"
+msgstr "Chrominance ME"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:736
-msgid ""
-"Uses chroma (color) components for motion for compression and helps the "
-"quality"
-msgstr ""
-"Utilise les composants chromas (couleur) pour la compression de mouvement et "
-"am?liore la qualit?"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:781
+msgid "Use color information for detecting motion to improve quality"
+msgstr "Utilise les informations de couleur pour estimer le mouvement afin d'am?liorer la qualit?"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:739
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:784
 msgid "Mixed Refs"
 msgstr "R?fs. Mix"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:744
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:789
 msgid "Calculate referencing individually based on each partition"
 msgstr "Calcule les r?f?rences individuellement pour chaque partition"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:750
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:795
 msgid "Fast P-Skip"
 msgstr "Saut P rapide "
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:753
-msgid "Uncheck to enable fast p-skip"
-msgstr "Pas de contr?le de saut P rapide"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:798
+msgid "Early skip detection on P-frames to speedup encoding. Quality will be slightly reduced."
+msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:756
-msgid "DCT decimate"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:801
+#, fuzzy
+msgid "DCT Decimate"
 msgstr "DCT decimate"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:760
-msgid "Interlace"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:806
+msgid "Interlaced"
 msgstr "Entrelac?"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:763
-msgid "Encode interlaced"
-msgstr "Encodage entrelac?"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:809
+msgid "Input video is interlaced"
+msgstr "La vid?o d'entr?e est entrelac?e"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:765
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:811
 msgid "<b>Motion Estimation</b>"
-msgstr "<b>Estimation Mouvement</b>"
+msgstr "<b>Estimation de mouvement</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:792
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:804
-msgid ""
-"Enforce the size of a decoded pixel decoded to a certain value. Leave this "
-"at 1:1 for non-anamorphic video"
-msgstr ""
-"Force la taille d'un pixel d?cod? ? une certaine valeur. Laisser ? 1:1 pour "
-"des vid?os non-anamorphiques"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:840
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:851
+#, fuzzy
+msgid "Enforce the size of a decoded pixel decoded to a certain value. Set this to 1:1 for non-anamorphic video."
+msgstr "Force la taille d'un pixel d?cod? ? une certaine valeur. Laisser ? 1:1 pour des vid?os non-anamorphiques"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:796
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:844
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1051
 msgid ":"
 msgstr "?:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:813
-msgid "Set a custom aspect ratio. Default 1:1 is recommended for most video."
-msgstr ""
-"Indiquer un ratio persdonnalis? . Par D?faut 1:1 est recommand? pour la "
-"plupart des vid?os."
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:860
+#, fuzzy
+msgid "Set a custom aspect ratio. The default 1:1 is recommended for most video."
+msgstr "Indiquer un ratio personnalis?. Par D?faut 1:1 est recommand? pour la plupart des vid?os."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:818
-msgid "Predefined Aspect Ratios"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:865
+#, fuzzy
+msgid "Predefined Aspect Ratio"
 msgstr "Ratio Pr?d?finis"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:823
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:870
 msgid "Set a common predefined aspect ratio"
 msgstr "Placer un radio d'aspect commun pr?d?fini"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:827
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1040
-msgid "As input"
-msgstr "Entr?e"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:874
+msgid "As Input"
+msgstr "Comme entr?e"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:832
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1043
-msgid "Get PAR from input video file"
-msgstr "R?cup?rer PAR du fichier vid?o en entr?e"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:856
-msgid "<b>Sample Aspect Ratio (A/R)</b>"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:895
+#, fuzzy
+msgid "<b>Sample Aspect Ratio</b>"
 msgstr "<b>Exemple Ratio Aspect (A/R)</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:878
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:922
 msgid "CABAC"
 msgstr "CABAC"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:881
-msgid ""
-"Lossless compression method which usually improves the bitrate usage by 15% "
-"(especially on high bitrate). Helps the quality a lot but is slower. "
-msgstr ""
-"M?thode de compression sans perte qui am?liore le bitrate de 15% "
-"(particuli?rement pour les bitrates ?l?v?s). Am?liore beaucoup la qualit? "
-"mais est plus lent"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:925
+msgid "Lossless compression technique that reduces bitrate by approximately 10%. Increases encoding and decoding time."
+msgstr "Technique de compression sans perte qui r?duit le d?bit d'environ 10%. Am?liore ? la fois l'encodage et le d?codage."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:884
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:932
 msgid "Trellis"
 msgstr "Trellis"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:893
-msgid ""
-"Use rate distortion quantization to find optimal encoding for each block. "
-"Level 0 equals disabled, level 1 equals normal and level 2 equals high"
-msgstr ""
-"Utilise une quantification de la distortion de vitesse pour trouver un "
-"encodage optimal pour chaque bloc. Un niveau ? 0 signifie inhib?e, 1 pour "
-"normale, 2 pour ?lev?e"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:941
+#, fuzzy
+msgid "Use Trellis Rate Distortion Optimisation to find optimal encoding for each block. Level 0 equals disabled, level 1 equals normal and level 2 equals high."
+msgstr "Utilise une quantification de la distortion de vitesse pour trouver un encodage optimal pour chaque bloc. Un niveau ? 0 signifie inhib?e, 1 pour normale, 2 pour ?lev?e"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:900
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:948
 msgid "Noise Reduction"
 msgstr "R?duction de bruit"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:909
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:957
 msgid "Set the amount of noise reduction"
 msgstr "Choisi le niveau de r?duction de bruit"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:916
-msgid "Deblocking Filter :"
-msgstr "Filtre de d?groupage?:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:964
+msgid "Deblocking Filter"
+msgstr "Filtre anti-blocs"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:919
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:967
 msgid "Enable in-loop deblocking to filter the video"
-msgstr "Autorise le filtre de d?groupage ??in-loop?? pour la vid?o"
+msgstr "Autorise le filtre anti-blocs ??in-loop?? pour la vid?o"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:932
-msgid "Set the amount of blurring to use for block edges when they are found"
-msgstr "D?finit la valeur de flou ? utiliser pour les bords des blocs trouv?s"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:984
+msgid "Strength"
+msgstr "Force"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:941
-msgid "Define the level for when deblocking is applied"
-msgstr "D?finit le niveau quand le filtre de d?groupage est appliqu?"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:998
+msgid "Threshold for block detection. Positive values will detect more blocks, negative values will detect less."
+msgstr "Seuil de la d?tection des blocs. Les valeurs positives d?tecteront plus de blocs, les valeurs n?gatives en d?tecteront moins."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:944
-msgid "<i>Threshold</i>"
-msgstr "<i>Seuil</i>"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1007
+msgid "Positive values will soften the video, negative values will sharpen"
+msgstr "Les valeurs positives adouciront la vid?o, les valeurs n?gatives l'aiguiseront"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:952
-msgid "<i>Strength</i>"
-msgstr "<i>Force</i>"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:960
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1010
 msgid "<b>Misc. Options</b>"
 msgstr "<b>Options diverses</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:965
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1015
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1066
 msgid "Motion & Misc"
 msgstr "Mouvement & Divers"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:986
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1041
 msgid "8x8 Transform"
 msgstr "Transformation 8x8"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:989
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1044
 msgid "General block breakdown transformation"
 msgstr "Transformation pour le d?pouillement g?n?ral des blocs"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:992
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1047
 msgid "8x8, 8x16 and 16x8 P-frame search"
 msgstr "Recherche images-P 8x8, 8x16 et 16x8"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:995
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1050
 msgid "Improve the P-frame quality"
 msgstr "Am?liore la qualit? des images-P"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:998
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1053
 msgid "8x8, 8x16 and 16x8 B-frame search"
 msgstr "Recherche images-B 8x8, 8x16 et 16x8"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1001
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1056
 msgid "Improve the B-frame quality"
 msgstr "Am?liore la qualit? des images-B"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1004
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1059
 msgid "4x4, 4x8 and 8x4 P-frame search"
 msgstr "Recherche images-P 4x4, 4x8 et 8x4"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1007
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1062
 msgid "Further improve the P-frame quality"
 msgstr "Am?liore encore plus la qualit? des images-P"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1009
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1064
 msgid "8x8 Intra search"
 msgstr "Recherche Intra 8x8"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1012
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1067
 msgid "Enable DCT Intra block search to improve quality"
 msgstr "Autorise la recherche des blocs Intra DCT pour am?liorer la qualit?"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1015
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1070
 msgid "4x4 Intra search"
 msgstr "Recherche Intra 4x4"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1018
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1073
 msgid "Further enable DCT Intra block search to improve quality"
-msgstr ""
-"Autorise la recherche des blocs Intra DCT pour am?liorer encore plus la "
-"qualit?"
+msgstr "Autorise la recherche des blocs Intra DCT pour am?liorer encore plus la qualit?"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1021
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1076
 msgid "<b>Partition Macroblocks</b>"
-msgstr "<p>Macro-blocs de partition</b>"
+msgstr "<b>Macro-blocs de partition</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1043
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1100
 msgid "Bias"
 msgstr "Polarisation"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1056
-msgid ""
-"Increase / decrease probability for how often B-frames are used. Will not "
-"violate the maximum consecutive frame limit"
-msgstr ""
-"Augmente/diminue la probabilit? d'utilisation des images-B. Sans violation "
-"de la limite max du nombre d'images cons?cutives"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1065
-msgid ""
-"Set the maximum number of consecutive B-frames. This defines how many "
-"duplicate frames can be droped. Numbers 2 to 5 are recommended. This greatly "
-"improves the use of bitrate and quality"
-msgstr ""
-"D?fini le nombre max d'images-B cons?cutives. Ceci d?fini combien d'images "
-"dupliqu?es seront ?limin?es. Une valeur entre 2 et 5 est recommand?e. Ceci "
-"am?liore grandement le bitrate et la qualit?"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1068
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1107
 msgid "Max Consecutive"
 msgstr "Max cons?cutives"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1079
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1120
+#, fuzzy
+msgid "Increase / decrease probability for how often B-frames are used. It will not violate the maximum consecutive frame limit."
+msgstr "Augmente/diminue la probabilit? d'utilisation des images-B. Sans violation de la limite max du nombre d'images cons?cutives"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1129
+#, fuzzy
+msgid "Set the maximum number of consecutive B-frames. This defines how many duplicate frames can be dropped. Numbers 2 to 5 are recommended. This greatly improves the use of bitrate and quality."
+msgstr "D?fini le nombre max d'images-B cons?cutives. Ceci d?fini combien d'images dupliqu?es seront ?limin?es. Une valeur entre 2 et 5 est recommand?e. Ceci am?liore grandement le d?bit et la qualit?"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1143
 msgid "Bidirectional ME"
 msgstr "ME bidirectionnel"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1084
-msgid ""
-"Jointly optimize both Motion Vector's in B-frames. This will improve quality "
-"but take more time for encoding"
-msgstr ""
-"Optimise les vecteurs de mouvement dans les images-B. Ceci am?liore la "
-"qualit? mais prend plus de temps ? l'encodage"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1148
+#, fuzzy
+msgid "Optimise both motion vectors in B-frames. This will improve quality but take more time for encoding."
+msgstr "Optimise les vecteurs de mouvement dans les images-B. Ceci am?liore la qualit? mais prend plus de temps ? l'encodage"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1086
-msgid "Weighted biprediction"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1150
+msgid "Weighted Biprediction"
 msgstr "Bi-pr?diction pond?r?e"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1091
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1155
 msgid "Enables weighting of B-frames to help fades"
 msgstr "Autorise la pond?ration des images-B pour am?liorer les fondus"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1094
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1158
 msgid "Adaptative DCT"
 msgstr "DCT adaptative"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1099
-msgid ""
-"Use fewer B-frame if needed. This is always recommended. If not enabled, the "
-"codec will always use the maximum number of consecutive B-frames"
-msgstr ""
-"Utilise moins d'images-B. Ceci est toujours recommand?. Si ceci n'est pas "
-"valid?, le codec utilisera toujours le nombre max d'images-B cons?cutives"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1163
+msgid "Use fewer B-frames if needed. This is always recommended. If not enabled, the codec will always use the maximum number of consecutive B-frames."
+msgstr "Utilise moins d'images-B. Ceci est toujours recommand?. Si ce n'est pas activ?, le codec utilisera toujours le nombre maximum d'images-B cons?cutives"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1102
-msgid "Use as reference"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1166
+msgid "Use as Reference"
 msgstr "Utilise comme r?f?rence"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1107
-msgid ""
-"Allow B-frames to make references non-linearly to another B-frame (instead "
-"of creating a duplicate copy)"
-msgstr ""
-"Permet aux images-B de faire des r?f?rences non-lin?aires ? d'autres images-"
-"B (au lieu de cr?er des copies)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1171
+msgid "Allow B-frames to make references non-linearly to another B-frame (instead of creating a duplicate copy)"
+msgstr "Permet aux images-B de faire des r?f?rences non-lin?aires ? d'autres images-B (au lieu de cr?er des copies)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1113
-msgid "B-Frame Direct Mode:  "
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1177
+#, fuzzy
+msgid "B-Frame Direct Mode"
 msgstr "Mode image-B direct?:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1121
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1185
 msgid "Auto"
 msgstr "Auto"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1122
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1186
 msgid "Temporal"
 msgstr "Temporal"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1123
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1187
 msgid "Spatial"
 msgstr "Spatial"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1126
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1190
 msgid "<b>B-Frames</b>"
 msgstr "<b>Images-B</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1131
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1195
 msgid "Partitions & Frames"
 msgstr "Images & Partitions"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1159
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1230
 msgid "Set how much \"bitrate bonus\" a keyframe can get"
-msgstr "D?fini le ??bonus de bitrate?? qu'une image-cl? peut avoir"
+msgstr "D?fini le ??bonus de d?bit?? qu'une image-cl? peut avoir"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1162
-msgid "Keyframe boost (%)"
-msgstr "Boost image-cl? (%)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1239
+msgid "Set how much bitrate is deducted from a B-frame as compared to the previous P-frame"
+msgstr "Indiquer combien est d?duit du d?bit d'une image-B par rapport ? l' image-P pr?c?dente"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1169
-msgid "B-frame reduction (%)"
-msgstr "R?duction image-B (%)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1248
+#, fuzzy
+msgid "Define how much the bitrate can fluctuate over the entire video. 0% results in a constant bitrate stream, while 100% results in a pure quality based bitrate stream."
+msgstr "D?finir de combien le d?bit peut flotter au-dessus de la vid?o enti?re. 0% a comme cons?quence un flux de d?bit constant alors que les r?sultats de 100% est une qualit? pure bas?e sur le flux de d?bit"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1176
-msgid "Bitrate variability (%)"
-msgstr "Variabilit? bitrate (%)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1251
+#, fuzzy
+msgid "Keyframe Boost (%)"
+msgstr "Boost image-cl? (%)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1189
-msgid ""
-"Set how much bitrate is deducted from a B-frame as compared to the previous "
-"P-frame"
-msgstr ""
-"Indiquer combien est d?duit du bitrate d'une frame-B par rapport ? la frame-"
-"P pr?c?dente"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1258
+#, fuzzy
+msgid "B-frame Reduction (%)"
+msgstr "R?duction des images-B (%)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1198
-msgid ""
-"Define how much the bitrate can fluctuate over the entire video. 0% results "
-"in a constant bitrate stream, while 100% results in a pure quality based "
-"bitrate stream"
-msgstr ""
-"D?finir combien le bitrate peut flotter au-dessus de la vid?o enti?re. 0% a "
-"comme cons?quence un flux constant du bitrate, alors que les r?sultats de "
-"100% est une qualit? pure bas?e sur le flux du bitrate"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1265
+msgid "Bitrate Variability (%)"
+msgstr "Variabilit? du d?bit (%)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1201
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1272
 msgid "<b>Bitrate</b>"
 msgstr "<b>Bitrate</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1219
-msgid "Min Qp"
-msgstr "Min Qp"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1292
+msgid "Min QP"
+msgstr "Qp min."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1226
-msgid "Max Qp"
-msgstr "Max Qp"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1299
+msgid "Max QP"
+msgstr "Qp max."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1233
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1306
 msgid "Max QP Step"
 msgstr "Max QP Step"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1247
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1320
 msgid "Enforce a minimum quantizer level"
 msgstr "Imposer un niveau minimum de quantificateur"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1256
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1329
 msgid "Enforce a maximum quantizer level"
 msgstr "Imposer un niveau maximum de quantificateur"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1265
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1338
 msgid "Define how much the quantizer rate can change between two consecutive frames"
-msgstr ""
-"D?finir combien le taux de quantificateur peut changer entre deux frames "
-"cons?cutives"
+msgstr "D?finir de combien le taux de quantificateur peut changer entre deux images cons?cutives"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1268
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1341
 msgid "<b>Quantization Limits</b>"
 msgstr "<b>Limites de quantification</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1286
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1368
+#, fuzzy
+msgid "Increase / decrease sensitivity for detecting scene changes. Improves I-frame usage and quality."
+msgstr "Augmenter/ Diminuer la sensibilit? pour d?tecter des changements de sc?ne pour compenser. Am?liore l'utilisation des images-I et aide la qualit?"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1371
 msgid "Scene Cut Threshold"
 msgstr "Seuil de coupe de sc?ne"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1300
-msgid ""
-"Increase / decrease sensitivity for detecting Scene Changes to compensate "
-"for. Improves I-frame usage and helps quality"
-msgstr ""
-"Augmenter/ Diminuer la sensibilit? pour d?tecter des changements de sc?ne "
-"pour compenser. Am?liore l'utilisation de trame I et aide la qualit?"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1378
+#, fuzzy
+msgid "Min IDR Frame Interval"
+msgstr "Intervalle min image IDR "
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1303
-msgid "Min IDR frame interval"
-msgstr "Interval min image IDR "
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1391
+#, fuzzy
+msgid "Set minimum frame interval between IDR frames. Defines the minimum amount a frame can be reused and referenced by other frames before a new IDR frame is established."
+msgstr "Placer l'intervalle minimum d'image entre les images IDR. D?finit la quantit? minimum qu'une image peut ?tre r?utilis?e et r?f?renc? par d'autres armatures avant qu'un nouveau nettoyage on est ?tabli"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1316
-msgid ""
-"Set minimum frame interval between IDR frames. Defines the minimum amount a "
-"frame can be reused and referenced by other frames before a new clean one is "
-"established"
-msgstr ""
-"Placer l'intervalle minimum d'image entre les images IDR. D?finit la "
-"quantit? minimum qu'une image peut ?tre r?utilis?e et r?f?renc? par d'autres "
-"armatures avant qu'un nouveau nettoyage on est ?tabli"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1400
+#, fuzzy
+msgid "Set maximum frame interval between IDR frames. Defines the maximum amount a frame can be reused and referenced by other frames before a new IDR frame is established."
+msgstr "Placer l'intervalle minimum d'image entre les images IDR. D?finit la quantit? minimum qu'une image peut ?tre r?utilis?e et r?f?renc? par d'autres armatures avant qu'un nouveau nettoyage on est ?tabli"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1325
-msgid ""
-"Set maximum frame interval between IDR frames. Defines the maximum amount a "
-"frame can be reused and referenced by other frames before a new clean one is "
-"established"
-msgstr ""
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1328
-msgid "Max IDR frame interval"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1403
+#, fuzzy
+msgid "Max IDR Frame Interval"
 msgstr "Intervalle max image-IDR"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1335
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1410
 msgid "<b>More Rate Settings</b>"
-msgstr "<b>R?glages bitrate avanc?s</b>"
+msgstr "<b>R?glage avanc?s du d?bit</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1353
-msgid "VBV buffer size"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1430
+#, fuzzy
+msgid "VBV Buffer Size"
 msgstr "Taille buffer VBV"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1360
-msgid "Initial VBV buffer (%)"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1437
+#, fuzzy
+msgid "Initial VBV Buffer (%)"
 msgstr "Buffer VBV initial (%)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1367
-msgid "Maximum local bitrate"
-msgstr "Bitrate maximum local"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1444
+#, fuzzy
+msgid "Maximum Local Bitrate"
+msgstr "D?bit maximum local"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1398
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1475
 msgid "<b>Video Buffer Verifier</b>"
 msgstr "<b>V?rifieur Buffer Vid?o</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1430
-msgid ""
-"Allowed variance of average bitrate. Lower values mean less variance. Higher "
-"values mean more variance."
-msgstr ""
-"Variabilit? du bitrate moyen est autoris?. Des valeurs plus basses "
-"signifient moins de permissions. Des valeurs plus ?lev?es signifient plus de "
-"permissions."
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1433
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1508
 msgid "Bitrate Variance"
 msgstr "Bitrate Variance"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1446
-msgid ""
-"Allowed variance of average quantizer or quality. Lower values mean less "
-"variance. Higher values mean more variance. Note that 0 means constant "
-"quality while 1 means constant fluctuation. Recommended 0.6."
-msgstr ""
-"Variabilit? du quantificateur moyen ou de la qualit? est permis. Des valeurs "
-"plus basses signifient moins de permissions. Des valeurs plus ?lev?es "
-"signifient plus de permissions. Noter que 0 signifie qualit? constante "
-"tandis que 1 signifie une fluctuation constante. 0.6 recommand?."
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1521
+msgid "Allowed variance of average bitrate. Lower values mean less variance. Higher values mean more variance."
+msgstr "Variabilit? du d?bit moyen est autoris?. Des valeurs plus basses signifient moins de permissions. Des valeurs plus ?lev?es signifient plus de permissions."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1455
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1530
+msgid "Allowed variance of average quantizer or quality. Lower values mean less variance. Higher values mean more variance. Note that 0 means constant quality while 1 means constant fluctuation. Recommended 0.6."
+msgstr "Variabilit? du quantificateur moyen ou de la qualit? est permis. Des valeurs plus basses signifient moins de permissions. Des valeurs plus ?lev?es signifient plus de permissions. Noter que 0 signifie qualit? constante tandis que 1 signifie une fluctuation constante. 0.6 recommand?."
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1539
 msgid "Reduced fluctuations in Quantizer (before curve compression)"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1464
-msgid "Reduce fluctuations in QP (after curve compression)"
-msgstr ""
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1467
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1550
 msgid "Quantizer Compression"
 msgstr "Compression du quantificateur"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1474
-msgid "Temp. Blur of est Frame Complexity"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1557
+msgid "Temp. Blur of Est. Frame Complexity"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1481
-msgid "Temp. Blur of Quant after CC"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1564
+msgid "Temp. Blur of Quant. after CC"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1488
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1571
 msgid "<b>Misc</b>"
 msgstr "<b>Divers</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1512
-msgid "Quantization factors used between I- and P- frames"
-msgstr ""
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1597
+#, fuzzy
+msgid "Quantization factors used between I and P-frames"
+msgstr "Facteurs de quantification utilis? entre les images-I et les images-P"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1521
-msgid "Quantization used between P- and B- frames"
-msgstr ""
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1606
+#, fuzzy
+msgid "Quantization used between P and B-frames"
+msgstr "Quantification utilis? entre les images-P et les images-B"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1530
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1615
 msgid "Quantization difference between chroma (color) and luma (brightness)"
-msgstr ""
+msgstr "Diff?rence de quantification entre le chrominance (couleur) et la luminance (luminosit?)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1533
-msgid "Factor between I and P frame Quants"
-msgstr ""
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1618
+#, fuzzy
+msgid "Factor between I and P-frame Quants"
+msgstr "Facteur de quantification entre les images-I et les images-P"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1540
-msgid "Factor between P and B frame Quants"
-msgstr ""
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1625
+#, fuzzy
+msgid "Factor between P and B-frame Quants"
+msgstr "Facteur de quantification entre les images-P et les images-B"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1547
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1632
+#, fuzzy
 msgid "Chroma QP Offset"
-msgstr "Offset Chroma QP"
+msgstr "D?calage de la chrominance et du QP"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1554
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1639
 msgid "<b>Quantizers</b>"
-msgstr "<b>Quantiseur</b>"
+msgstr "<b>Quantificateur</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1572
-msgid "Custom matrix"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1657
+#, fuzzy
+msgid "Flat Matrix"
+msgstr "Matrice ? plat"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1664
+#, fuzzy
+msgid "JVT Matrix"
+msgstr "Matrice JVT"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1674
+msgid "Custom Matrix"
 msgstr "Matrice personnalis?e"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1581
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1684
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1128
 msgid "Open CQM file"
 msgstr "Ouvrir un fichier CQM"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1587
-msgid "JVT matrix"
-msgstr "Matrice JVT"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1595
-msgid "Flat matrix"
-msgstr ""
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1604
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1692
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1136
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1568
 msgid "Edit Custom Matrix"
 msgstr "Editer la matrice personnalis?e"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1609
-msgid "Edit a loaded custom quantization matrix file"
-msgstr "Editer fichier de matrice personnalis?e"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1695
+msgid "Edit loaded custom quantization matrix file"
+msgstr "Editer le fichier charg? de matrice personnalis?e de quantification"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1617
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1697
 msgid "<b>Quantization Matrices</b>"
-msgstr "<b>Quantification Matrices</b>"
+msgstr "<b>Matrices de quantification</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1622
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1702
 msgid "More"
 msgstr "Plus"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1630
-msgid "Defaults"
-msgstr "D?fauts"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1710
+#, fuzzy
+msgid "_Defaults"
+msgstr "_D?fauts"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:237
 msgid "Xvid Encoder"
@@ -4239,15 +5024,15 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:266
 msgid "Dual pass (MBytes)"
-msgstr "Double passe (Moctets)"
+msgstr "Double passe (Mo)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:292
 msgid "Basic"
-msgstr "Basic"
+msgstr "Basique"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:301
 msgid "Motion Search"
-msgstr "Recherche mouvement"
+msgstr "Recherche du mouvement"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:317
 msgid "Max I frame interval "
@@ -4288,7 +5073,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:395
 msgid "H263 Quantizer"
-msgstr "H263 Quantizer"
+msgstr "H.263 Quantizer"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:400
 msgid "MPEG Quantizer"
@@ -4299,8 +5084,9 @@
 msgstr "Avanc?"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:416
+#, fuzzy
 msgid "Min I Frame Qzer"
-msgstr "Min image-I  Qzer"
+msgstr "Min image-I Qfer"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:424
 msgid "Max I Frame Qzer"
@@ -4314,10 +5100,6 @@
 msgid "Max P Frame Qzer"
 msgstr "Max image-P Qfer"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:480
-msgid "Quantizer"
-msgstr "Quantificateur"
-
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:485
 msgid "Not Yet!"
 msgstr "Pas encore!"
@@ -4348,20 +5130,20 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:179
 msgid "Size (MBytes):"
-msgstr ""
+msgstr "Taille (Mo) :"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:185
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:369
 msgid "Average bitrate (kb/s):"
-msgstr ""
+msgstr "D?bit moyen (kb/s) :"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:354
 msgid "Target bitrate (kb/s):"
-msgstr ""
+msgstr "D?bit cible (kb/s) :"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:362
-msgid "Target size (MBytes):"
-msgstr ""
+msgid "Target video size (MB):"
+msgstr "Taille de la vid?o cible (Mo) :"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:479
 msgid "Select Custom Matrix File to write"
@@ -4396,29 +5178,21 @@
 msgstr "Choisir encodage 1 ou 2 passe(s)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:760
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:123
-msgid "Single pass - bitrate"
-msgstr "Une passe - Bitrate"
+msgid "Single Pass - Bitrate"
+msgstr "Une passe - d?bit"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:764
-msgid "Single pass - quantizer"
+msgid "Single Pass - Quantizer"
 msgstr "Une passe - Quantificateur"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:768
-msgid "Two pass, final size"
-msgstr "Deux passes - Taille finale"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:772
-msgid "Two pass, average bitrate"
-msgstr "Deux passes - Bitrate moyen"
-
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:776
-msgid "Same Qz as input"
-msgstr "M?me Qz que l'entr?e"
+#, fuzzy
+msgid "Same Quantizer as Input"
+msgstr "M?me Qfer que l'entr?e"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:785
 msgid "Target video bitrate"
-msgstr "Bitrate vid?o de la cible"
+msgstr "D?bit vid?o cible"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:792
 msgid "Constant quantizer - each frame will get the same compression"
@@ -4426,23 +5200,19 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:794
 msgid "Variable bitrate mode"
-msgstr "Mode Bitrate variable"
+msgstr "Mode d?bit variable"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:806
 msgid "_Interlaced"
 msgstr "_Entrelac?"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:809
-msgid ""
-"Enables interlaced frame support - use only if your source contains "
-"interlacing artifacts (i.e. fields instead of progressive frames)"
-msgstr ""
-"Permet le support d'images entrelac?es - utiliser seulement si votre fichier "
-"source contient des art?facts d'entrelacement"
+msgid "Enables interlaced frame support - use only if your source contains interlacing artifacts (i.e. fields instead of progressive frames)"
+msgstr "Permet le support d'images entrelac?es - utiliser seulement si votre fichier source contient des art?facts d'entrelacement"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:811
 msgid "_Greyscale"
-msgstr "_Niveaux de gris"
+msgstr "Niveaux de _gris"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:814
 msgid "Encode in black & white"
@@ -4454,15 +5224,15 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:823
 msgid "Enables special motion estimation features for cartoons/anime"
-msgstr "Permet l'option d'estimation sp?ciale des mouvement pour les cartoons/anime"
+msgstr "Permet l'option d'estimation sp?ciale de mouvement pour les cartoons/anime"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:825
 msgid "C_hroma optimizer"
-msgstr "Optimiseur de C_hroma"
+msgstr "Optimiseur de c_hroma"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:828
 msgid "Enables a chroma optimizer prefilter"
-msgstr "Permet l'utilisation en pr?-filtre d'un Optimiseur de chroma"
+msgstr "Permet l'utilisation en pr?-traitement d'un optimiseur de chrominance"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:834
 msgid "Turbo Mode"
@@ -4474,11 +5244,11 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:839
 msgid "Packed bitstream"
-msgstr "Packed bitstream"
+msgstr "Bitstream empaquet?"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:842
 msgid "Enables Divx like packed vop, DO NOT SET, it is ugly"
-msgstr "Permet Divx comme vop empaquet?, NE COCHEZ PAS, c'est laid"
+msgstr "Permet au DivX d'?tre comme un VOP empaquet? ; NE COCHEZ PAS, c'est horrible"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:844
 msgid "Main"
@@ -4490,13 +5260,11 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:867
 msgid "VHQ mode:"
-msgstr "Mode VHQ:?"
+msgstr "Mode VHQ :"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:880
 msgid "Higher settings give higher quality results, at the cost of slower encoding"
-msgstr ""
-"Plus les r?glages sont haut meilleur sera la qualit?, mais au prix d'un "
-"encodage plus lent"
+msgstr "Plus les r?glages sont haut meilleur sera la qualit?, mais au prix d'un encodage plus lent"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:888
 msgid "1 - Very low"
@@ -4548,11 +5316,11 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:947
 msgid "C_hroma motion"
-msgstr "Mouvement C_hroma"
+msgstr "Mouvement c_hroma"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:950
 msgid "Use chroma information to estimate motion"
-msgstr "Utiliser les informations chroma pour estimer le mouvement"
+msgstr "Utiliser les informations de chrominance pour estimer le mouvement"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:952
 msgid "_4MV"
@@ -4560,22 +5328,15 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:955
 msgid "Use 4 motion vectors per macroblock, might give better compression"
-msgstr ""
-"Utilise 4 vecteurs de mouvement par macroblock, devrait donner une meilleure "
-"compression"
+msgstr "Utilise 4 vecteurs de mouvement par macrobloc, devrait donner une meilleure compression"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:957
 msgid "HQ _AC"
 msgstr "HQ _AC"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:960
-msgid ""
-"Enable a better prediction of AC component. Turns on Lumi masking - applies "
-"more compression to dark/light areas that the eye cannot notice easily"
-msgstr ""
-"Permettre une meilleure pr?diction des composants AC. Met le masquage  Lumi "
-"- applique plus de compression aux secteurs sombres/l?gers que l'oeil ne "
-"peut pas remarquer facilement"
+msgid "Enable a better prediction of AC component. Turns on Lumi masking - applies more compression to dark/light areas that the eye cannot notice easily"
+msgstr "Permettre une meilleure pr?diction des composants AC. Met le masquage Lumi - applique plus de compression aux secteurs sombres/l?gers que l'?il ne peut pas remarquer facilement"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:966
 msgid "I-frame interval - Min:"
@@ -4601,12 +5362,8 @@
 msgstr "Nombre d'images-B?:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1007
-msgid ""
-"Maximum number of sequential B-frames (when set to 0, the original I/P "
-"encoder is used)"
-msgstr ""
-"Nombre maximal d'images-B s?quentielles (quand mis ? 0, l'encodeur original "
-"I/P est utilis?)"
+msgid "Maximum number of sequential B-frames (when set to 0, the original I/P encoder is used)"
+msgstr "Nombre maximal d'images-B s?quentielles (quand mis ? 0, l'encodeur original I/P est utilis?)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1013
 msgid "_Qpel"
@@ -4614,15 +5371,11 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1016
 msgid "Use Quarter pixel resolution for a more precise motion estimation"
-msgstr ""
-"Utilisation la r?solution de QuaterPixel  pour une ?valuation de mouvement "
-"plus pr?cise"
+msgstr "Utilisation la r?solution de QuaterPixel pour une ?valuation de mouvement plus pr?cise"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1021
 msgid "Global Motion Compensation can save bits on camera pans, zooming and rotation"
-msgstr ""
-"La compensation de Mouvement Globale peut ?conomiser des bits sur des prises "
-"de cam?ra, zooms et rotations"
+msgstr "La Compensation Globale du Mouvement peut ?conomiser des bits sur des prises de cam?ra, zooms et rotations"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1023
 msgid "_BVHQ"
@@ -4632,21 +5385,30 @@
 msgid "Produces nicer-looking B-frames"
 msgstr "Produit des images-B plus jolies"
 
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1040
+#, fuzzy
+msgid "As input"
+msgstr "Entr?e"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1043
+msgid "Get PAR from input video file"
+msgstr "R?cup?re le rapport H/L de la vid?o d'entr?e"
+
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1049
 msgid "Pixel Width"
-msgstr "Largeur Pixel"
+msgstr "Largeur des pixels"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1060
 msgid "Pixel Height"
-msgstr "Hauteur Pixel"
+msgstr "Hauteur des pixels"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1061
 msgid "Pixel Aspect Ratio"
-msgstr "Ratio Pixel"
+msgstr "Rapport H/L"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1079
 msgid "Quantization type:"
-msgstr "Type Quantization?:"
+msgstr "Type de quantification?:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1083
 msgid "_H.263"
@@ -4654,23 +5416,19 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1086
 msgid "H.263 quantizers smooth the picture (useful at lower bitrates)"
-msgstr "Les quantificateurs H263 lissent l'image (utile ? plus bas bitrates)"
+msgstr "Les quantificateurs H.263 lissent l'image (utile ? plus bas d?bit)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1090
 msgid "_MPEG"
 msgstr "_MPEG"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1093
-msgid ""
-"MPEG quantizers (slightly slower) produce sharper picture (useful at higher "
-"bitrates)"
-msgstr ""
-"Les quantificateurs MPEG (l?g?rement plus lent) produisent une image plus "
-"aigu? (utile ? plus haut bitrates)"
+msgid "MPEG quantizers (slightly slower) produce sharper picture (useful at higher bitrates)"
+msgstr "Les quantificateurs MPEG (l?g?rement plus lent) produisent une image plus aigu? (utile ? plus haut d?bit)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1097
 msgid "_Custom Matrix"
-msgstr "_Matrice personnalis?e"
+msgstr "Matrice _personnalis?e"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1107
 msgid "Load Custom Matrix:  "
@@ -4690,7 +5448,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1176
 msgid "Minimum quantizer allowed for I-frames"
-msgstr "Quantificateur minimum autoris? pour les images I"
+msgstr "Quantificateur minimum autoris? pour les images-I"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1182
 msgid "Minimum quantizer allowed for P-frames"
@@ -4702,7 +5460,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1217
 msgid "Maximum quantizer allowed for I-frames"
-msgstr "Quantificateur maximum autoris? pour les images I"
+msgstr "Quantificateur maximum autoris? pour les images-I"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1223
 msgid "Maximum quantizer allowed for P-frames"
@@ -4718,9 +5476,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1238
 msgid "Rate distortion quantization, will find optimal encoding for each block"
-msgstr ""
-"La quantification d'alt?ration de taux, trouvera le codage optimal pour "
-"chaque bloc"
+msgstr "La quantification d'alt?ration de taux, trouvera le codage optimal pour chaque bloc"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1268
 msgid "I-frame boost (%):"
@@ -4748,38 +5504,20 @@
 msgstr ""
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1306
-msgid ""
-"I-frames appearing in the range below this value will be treated as "
-"consecutive keyframes"
-msgstr ""
-"Les images I de l'intervalle inf?rieur ? cette valeur seront tra?t?es comme "
-"des images-cl?s cons?cutives"
+msgid "I-frames appearing in the range below this value will be treated as consecutive keyframes"
+msgstr "Les images-I de l'intervalle inf?rieur ? cette valeur seront trait?es comme des images-cl?s cons?cutives"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1311
-msgid ""
-"Reduction of bitrate for the first consecutive I-frames. The last I-frame "
-"will get treated normally"
-msgstr ""
-"R?duction du bitrate pour les premi?res images I cons?cutives. La derni?re "
-"image-I sera tra?t?e normallement"
+msgid "Reduction of bitrate for the first consecutive I-frames. The last I-frame will get treated normally"
+msgstr "R?duction du d?bit pour les premi?res images-I cons?cutives. La derni?re image-I sera trait?e normalement"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1316
-msgid ""
-"How much of the overflow the codec can eat into during undersized sections - "
-"larger values will bridge the gap faster"
-msgstr ""
-"Valeur du d?bordement que le codec peut tra?ter pour les sections sous-"
-"dimensionn?es - une valeur plus grande permettra de combler le trou plus "
-"rapidement"
+msgid "How much of the overflow the codec can eat into during undersized sections - larger values will bridge the gap faster"
+msgstr "Valeur du d?bordement que le codec peut traiter pour les sections sous-dimensionn?es - une valeur plus grande permettra de combler le trou plus rapidement"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1321
-msgid ""
-"How much of the overflow the codec can eat into during oversized sections - "
-"larger values will bridge the gap faster"
-msgstr ""
-"Valeur du d?bordement que le codec peut tra?ter pour les sections sur-"
-"dimensionn?es - une valeur plus grande permettra de combler le trou plus "
-"rapidement"
+msgid "How much of the overflow the codec can eat into during oversized sections - larger values will bridge the gap faster"
+msgstr "Valeur du d?bordement que le codec peut traiter pour les sections surdimensionn?es - une valeur plus grande permettra de combler le trou plus rapidement"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1323
 msgid "Two pass tuning"
@@ -4787,39 +5525,27 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1340
 msgid "High bitrate scenes (%):"
-msgstr "Sc?nes ? haut bitrate (%)?:"
+msgstr "Sc?nes ? haut d?bit (%)?:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1345
 msgid "Low bitrate scenes (%):"
-msgstr "Sc?nes ? bas bitrate (%)?:"
+msgstr "Sc?nes ? bas d?bit (%)?:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1350
 msgid "Overflow control strength (%):"
 msgstr "Puissance du contr?le du d?bordement (%)?:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1362
-msgid ""
-"The higher this value, the more bits get taken from frames larger than the "
-"average size, and redistributed to others"
-msgstr ""
-"Plus cette valeur est ?lev?e, plus le nombre de bits pris des images plus "
-"larges que la taille moyenne sera ?lev?, et redistribu? aux autres images"
+msgid "The higher this value, the more bits get taken from frames larger than the average size, and redistributed to others"
+msgstr "Plus cette valeur est ?lev?e, plus le nombre de bits pris des images plus larges que la taille moyenne sera ?lev?, et redistribu? aux autres images"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1367
-msgid ""
-"The higher this value, the more bits get assigned to frames below the "
-"average frame size"
-msgstr ""
-"Plus cette valeur est ?lev?e, plus le nombre de bits pris des images plus "
-"petites que la taille moyenne sera ?lev?"
+msgid "The higher this value, the more bits get assigned to frames below the average frame size"
+msgstr "Plus cette valeur est ?lev?e, plus le nombre de bits pris des images plus petites que la taille moyenne sera ?lev?"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1372
-msgid ""
-"0 = default from core (let XviD decide), else overflow payback percent per "
-"frame"
-msgstr ""
-"0 = d?faut (laisser XviD d?cider), sinon valeur du pourcentage de "
-"d?bordement par image"
+msgid "0 = default from core (let XviD decide), else overflow payback percent per frame"
+msgstr "0 = d?faut (laisser XviD d?cider), sinon valeur du pourcentage de d?bordement par image"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1374
 msgid "Curve compression"
@@ -4843,48 +5569,52 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:99
 msgid "_Encoding mode:"
-msgstr ""
+msgstr "Mode d'_encodage :"
 
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:123
+msgid "Single pass - bitrate"
+msgstr "Une passe - d?bit"
+
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:125
 msgid "Single pass - constant quality"
-msgstr ""
+msgstr "Une passe - qualit? constante"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:127
 msgid "Single pass - same qz as input"
-msgstr ""
+msgstr "Passe seule - m?me quantificateur qu'en entr?e"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:129
 msgid "Single pass - Average quantizer"
-msgstr ""
+msgstr "Passe seule - Quantificateur moyen"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:132
 msgid "Two pass - video size"
-msgstr ""
+msgstr "Deux passes - taille de la vid?o"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:134
 msgid "Two pass - average bitrate"
-msgstr ""
+msgstr "Deux passes - d?bit variable"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:273
 #: avidemux/ADM_videoFilter/ADM_vidForcedPP.cpp:61
 msgid "_Quantizer:"
-msgstr "_Quantifiseur?:"
+msgstr "_Quantificateur :"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:278
 msgid "A_vg Quantizer:"
-msgstr ""
+msgstr "Quantificateur _moyen :"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:283
 msgid "_Video size (MB):"
-msgstr ""
+msgstr "Taille de la _vid?o (Mo) :"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:288
 msgid "_Average bitrate (kb/s):"
-msgstr ""
+msgstr "D?bit _moyen (kb/s) :"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:293
 msgid "-"
-msgstr ""
+msgstr "-"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_hex.cpp:100
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_hex.cpp:134
@@ -4898,11 +5628,11 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_threadCount.cpp:75
 msgid "Disable"
-msgstr ""
+msgstr "D?sactiver"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_threadCount.cpp:79
 msgid "Auto-detect"
-msgstr ""
+msgstr "Auto-d?tection"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filterlist.cpp:64
 msgid "Add Video Filter"
@@ -4922,10 +5652,6 @@
 msgid "Colors"
 msgstr "Couleurs"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filterlist.cpp:173
-msgid "Denoise"
-msgstr "D?bruiter"
-
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filterlist.cpp:198
 msgid "Sharpen/Blur"
 msgstr "Nettet?/Flou"
@@ -5097,534 +5823,538 @@
 msgid "Save as script"
 msgstr "Enregistrer en script"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp:432
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp:545
 msgid "Side"
 msgstr "Face"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp:433
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp:546
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:90
 #: avidemux/ADM_videoFilter/ADM_vidDGbob.cpp:81
 #: avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp:87
 #: avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp:109
 msgid "Top"
-msgstr "Haut"
+msgstr "Paire"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp:434
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp:547
 msgid "Separate"
 msgstr ""
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp:608
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp:721
 #, c-format
 msgid "Frame:%c(%02d)"
 msgstr "Image?: %c(%02d)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:297
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:298
 msgid "_Open..."
-msgstr "_Ouvrir une vid?o..."
+msgstr "_Ouvrir..."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:308
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:309
 msgid "_Append..."
-msgstr "_Ajouter une vid?o..."
+msgstr "_Ajouter..."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:319
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:320
 msgid "_Save"
 msgstr "_Enregistrer"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:330
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:331
 msgid "Save _Video..."
 msgstr "_Enregistrer une vid?o..."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:342
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:343
 msgid "Save _BMP Image..."
-msgstr "Sauver en image _BMP..."
+msgstr "Enregistrer en image _BMP..."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:346
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:347
 msgid "Save _JPEG Image..."
-msgstr "Sauver en image _JPEG..."
+msgstr "Enregistrer en image _JPEG..."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:350
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:351
 msgid "Save _Selection as JPEG Images..."
-msgstr "Sauver la s?lection en images JPEG..."
+msgstr "Enregistrer la _s?lection en images JPEG..."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:363
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:364
 msgid "Save _Project"
-msgstr "Enregistrer _Projet"
+msgstr "Enregistrer le _projet"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:371
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:372
 msgid "Save P_roject As..."
-msgstr "Enregistrer le P_rojet sous..."
+msgstr "Enregistrer le p_rojet sous..."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:379
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:380
 msgid "_Load/Run Project..."
-msgstr "_Charger/Lancer un Projet..."
+msgstr "_Charger/Lancer un projet..."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:387
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:388
 msgid "A_dd to Joblist..."
 msgstr "A_jouter ? la liste des t?ches..."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:391
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:392
 msgid "Show _Joblist"
-msgstr "Montrer _la liste des t?ches"
+msgstr "Montrer la liste des _t?ches"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:403
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:404
 msgid "Co_nnect to avsproxy"
 msgstr "Co_nnexion ? avsproxy"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:412
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:413
 msgid "Proper_ties"
-msgstr "Propri_?t?s (info) de la vid?o"
+msgstr "Propri?_t?s"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:423
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:424
 msgid "AVI _Muxer Options"
 msgstr "Options du _multiplexeur AVI"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:432
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:433
 msgid "_Quit"
 msgstr "_Quitter"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:443
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:444
 msgid "_Edit"
 msgstr "_Editer"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:450
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:451
 msgid "_Reset Edits"
-msgstr "_RAZ du job"
+msgstr "_R?initialiser les ?ditions"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:463
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:464
 msgid "Cu_t"
-msgstr "Co_uper"
+msgstr "Coup_er"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:474
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:475
 msgid "_Copy"
-msgstr "_Copier"
+msgstr "Co_pier"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:485
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:486
 msgid "_Paste"
-msgstr "_Coller"
+msgstr "C_oller"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:496
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:497
 msgid "_Delete"
 msgstr "_Supprimer"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:512
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:513
 msgid "Set Marker _A"
 msgstr "Marqueur _A"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:519
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:520
 msgid "Set Marker _B"
 msgstr "Marqueur _B"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:531
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:532
 msgid "Pre_ferences"
 msgstr "Pr?_f?rences"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:539
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:540
 msgid "_View"
 msgstr "_Affichage"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:546
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:547
 msgid "_Main Toolbar"
-msgstr "_Barre Principale"
+msgstr "Barre _principale"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:551
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:552
 msgid "_A/V Sidebar"
-msgstr "_Barre audio/vid?o"
+msgstr "Barre _audio/vid?o"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:561
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:562
 msgid "_Zoom 1:4"
 msgstr "_Zoom 1:4"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:568
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:569
 msgid "Z_oom 1:2"
 msgstr "Z_oom 1:2"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:575
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:576
 msgid "Zoom _1:1"
 msgstr "Zoom _1:1"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:582
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:583
 msgid "Zoom _2:1"
 msgstr "Zoom _2:1"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:589
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:590
 msgid "Vi_deo"
 msgstr "Vi_d?o"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:596
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:597
 msgid "_Decoder Options"
-msgstr "_Options du d?codeur"
+msgstr "Options du _d?codeur"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:603
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:604
 msgid "_Postprocessing"
-msgstr "_Post-Traitement"
+msgstr "_Post-traitement"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:606
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:607
 msgid "Select postprocessing level"
 msgstr "Choisir le niveau de post-traitement"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:616
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:617
 msgid "P_review"
 msgstr "A_per?u"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:623
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:624
 msgid "Display _Output"
-msgstr "Afficher dans la _fen?tre principale"
+msgstr "Afficher la _sortie"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:635
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:636
 msgid "_Frame Rate"
 msgstr "_Fr?quence d'image"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:639
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:688
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:640
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:689
 msgid "_Encoder"
 msgstr "_Encodeur"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:646
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:647
 msgid "Fil_ters"
 msgstr "Fil_tres"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:653
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:654
 msgid "_Audio"
 msgstr "_Audio"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:660
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:661
 msgid "_Main Track"
-msgstr "_Piste Principale"
+msgstr "Piste _principale"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:664
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:665
 msgid "_Second Track"
-msgstr "_Seconde piste audio"
+msgstr "Piste _secondaire"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:668
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:669
 msgid "_Build VBR Time Map"
-msgstr "_Construire le Time Map VBR"
+msgstr "_Construire l'index temporel VBR"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:677
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:678
 msgid "S_ave..."
-msgstr "E_nregistrer"
+msgstr "E_nregistrer..."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:695
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:696
 msgid "_Filters"
 msgstr "_Filtres"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:699
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:700
 msgid "_Tools"
 msgstr "_Outils"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:706
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:707
 msgid "_Calculator"
 msgstr "_Calculatrice"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:722
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:723
 msgid "_Rebuild Frames (I & B)"
-msgstr "_Reconstuire images (I?&?B)"
+msgstr "_Reconstruire les images (I & B)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:726
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:727
 msgid "C_heck Frames (slow)"
 msgstr "V_?rifier toutes les images (lent)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:730
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:731
 msgid "_Bitrate Histogram"
-msgstr "_Histogramme de bitrate"
+msgstr "Histogramme du _d?bit"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:734
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:735
 msgid "_Scan for Black Frames..."
 msgstr "_Chercher l'image noire suivante..."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:743
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:744
 msgid "_VOB -> VobSub"
 msgstr "_VOB -> VobSub"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:747
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:748
 msgid "_OCR (VobSub -> srt)"
 msgstr "_OCR (VobSub -> srt)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:751
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:752
 msgid "OCR (TS->srt)"
-msgstr ""
+msgstr "OCR (TS -> srt)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:755
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:756
 msgid "_Edit Glyph"
-msgstr ""
+msgstr "_Editer les symboles"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:764
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:765
 msgid "_Frame Hex Dump"
-msgstr ""
+msgstr "Dump hexad?cimal des _images"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:768
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:769
 msgid "A_uto"
 msgstr "A_uto"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:775
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:776
 msgid "_VCD"
 msgstr "_VCD"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:779
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:780
 msgid "_SVCD"
 msgstr "_SVCD"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:783
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:784
 msgid "_DVD"
 msgstr "_DVD"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:787
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:788
 msgid "_PSP"
 msgstr "_PSP"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:791
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:792
 msgid "PSP (_H.264)"
-msgstr "PSP ( H264)"
+msgstr "PSP (_ H.264)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:795
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:796
 msgid "F_LV"
-msgstr ""
+msgstr "F_LV"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:799
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:800
+msgid "IPOD (mpeg4)"
+msgstr "IPOD (MPEG4)"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:804
 msgid "_Go"
 msgstr "_Aller ?"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:806
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:811
 msgid "_Play/Stop"
 msgstr "_Lecture/Pause"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:817
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:822
 msgid "P_revious Frame"
-msgstr "I_mage pr?c?dente"
+msgstr "Image p_r?c?dente"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:828
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:833
 msgid "_Next Frame"
-msgstr "_Image suivante"
+msgstr "Image _suivante"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:839
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:844
 msgid "Pr_evious Intra Frame"
-msgstr "Im_age intra pr?c?dente"
+msgstr "Image-I pr?c?d_ente"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:850
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:855
 msgid "Next _Intra Frame"
 msgstr "Image _intra suivante"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:861
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:866
 msgid "Previou_s Black Frame"
-msgstr "Cherche_r l'image noire pr?c?dente"
+msgstr "Image noire _pr?c?dente"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:865
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:870
 msgid "Ne_xt Black Frame"
-msgstr "Cherch_er l'image noire suivante"
+msgstr "Image noire _suivante"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:869
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:874
 msgid "_First Frame"
 msgstr "_Premi?re image"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:880
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:885
 msgid "_Last Frame"
 msgstr "_Derni?re image"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:896
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:901
 msgid "Go to Marker _A"
 msgstr "Aller au marqueur _A"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:903
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:908
 msgid "Go to Marker _B"
 msgstr "Aller au marqueur _B"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:915
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:920
 msgid "Go to Fra_me..."
-msgstr ""
+msgstr "Aller ? l'i_mage..."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:926
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:931
 msgid "Go to _Time..."
-msgstr ""
+msgstr "Aller au _temps..."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:937
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:942
 msgid "_Custom"
 msgstr "_Personnalis?"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:941
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:946
 msgid "_Help"
 msgstr "_Aide"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:948
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:953
 msgid "_Built-in Support"
 msgstr "_Support int?gr? pour"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:952
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:957
 msgid "_About"
 msgstr "_A propos"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:970
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:975
 msgid "Open a file"
 msgstr "Ouvrir un fichier"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:980
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:985
 msgid "Save the file"
 msgstr "Enregistrer le fichier"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:986
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:991
 msgid "Audio/video file information"
 msgstr "Informations fichier audio/vid?o"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:997
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1002
 msgid "Bitrate/size calculator"
-msgstr "Calculatrice Bitrate/Taille"
+msgstr "Calculatrice d?bit/taille"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1076
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1116
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1081
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1121
 msgid "Copy"
 msgstr "Copie"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1081
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1086
 msgid "Configure video encoder"
 msgstr "Configurer l'encodeur vid?o"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1086
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1142
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1091
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1147
 msgid "Filters"
 msgstr "Filtres"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1089
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1094
 msgid "Video filters"
 msgstr "Filtres Vid?o"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1121
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1126
 msgid "Configure audio encoder"
 msgstr "Configurer l'encodeur audio"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1129
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1134
 msgid "Audio filters"
-msgstr "Filtres Audio"
+msgstr "Filtres audio"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1150
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1155
 msgid "Shift:"
 msgstr "D?calage?:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1153
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1158
 msgid "Enable time shift"
 msgstr "Permet le d?calage"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1159
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1164
 msgid "Audio/video time shift (ms)"
 msgstr "D?calage audio/vid?o (ms)"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1166
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1171
 msgid "<b>Format</b>"
 msgstr "<b>Format</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1199
-msgid "<b>Selection</b>"
-msgstr "<b>S?lection</b>"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1204
+msgid "Frame: "
+msgstr "Image?: "
 
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1211
+msgid "Current frame"
+msgstr "Image actuelle"
+
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1216
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1224
-msgid " 0000000"
-msgstr " 0000000"
+msgid "/ 0000000"
+msgstr "/ 0000000"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1232
-msgid "A:"
-msgstr "A?:"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1223
+msgid "Time: "
+msgstr "Temps?: "
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1239
-msgid "Go to marker A"
-msgstr "Aller au marqueur A"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1230
+msgid "Current time"
+msgstr "Temps actuel"
 
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1231
+msgid "00:00:00.000"
+msgstr "00:00:00.000"
+
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1234
+msgid "/ 00:00:00,000"
+msgstr "/ 00:00:00,000"
+
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1241
-msgid "B:"
-msgstr "B?:"
+msgid "Frame: ?"
+msgstr "Image?: ?"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1248
-msgid "Go to marker B"
-msgstr "Aller au marqueur B"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1260
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1265
 msgid "Play"
 msgstr "Lecture"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1274
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1279
 msgid "Stop"
 msgstr "Stop"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1286
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1291
 msgid "Previous frame"
 msgstr "Image pr?c?dente"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1301
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1306
 msgid "Next frame"
 msgstr "Image suivante"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1316
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1321
 msgid "Previous keyframe"
 msgstr "Image-cl? pr?c?dente"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1331
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1336
 msgid "Next keyframe"
 msgstr "Image-cl? suivante"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1345
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1350
 msgid "Selection: start"
 msgstr "S?lection?: d?but"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1356
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1361
 msgid "Selection: end"
 msgstr "S?lection?: fin"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1367
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1372
 msgid "Previous black frame"
 msgstr "Image noire pr?c?dente"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1378
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1383
 msgid "Next black frame"
 msgstr "Image noire suivante"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1389
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1394
 msgid "First frame"
 msgstr "Premi?re image"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1400
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1405
 msgid "Last frame"
 msgstr "Derni?re image"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1422
-msgid "Frame: "
-msgstr "Image?: "
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1419
+msgid "<b>Selection</b>"
+msgstr "<b>S?lection</b>"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1429
-msgid "Current frame"
-msgstr "Image courante"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1436
+msgid "B:"
+msgstr "B?:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1434
-msgid "/ 0000000"
-msgstr ""
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1443
+msgid "Go to marker B"
+msgstr "Aller au marqueur B"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1441
-msgid "Time: "
-msgstr "Temps?: "
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1445
+msgid "A:"
+msgstr "A?:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1448
-msgid "Current time"
-msgstr "Temps actuel"
-
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1449
-msgid "00:00:00.000"
-msgstr "00:00:00.000"
-
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1452
-msgid "/ 00:00:00,000"
-msgstr ""
+msgid "Go to marker A"
+msgstr "Aller au marqueur A"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1459
-msgid "Frame: ?"
-msgstr "Image?: ?"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1454
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1462
+msgid " 0000000"
+msgstr " 0000000"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:53
 msgid "Select GlyphFile to edit"
-msgstr ""
+msgstr "S?lectionner le fichier de symboles ? ?diter"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:121
 msgid "String"
-msgstr ""
+msgstr "Cha?ne de caract?re"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:123
 msgid "Search string"
-msgstr ""
+msgstr "Recherche de la cha?ne de caract?re"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:149
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:192
@@ -5635,7 +6365,7 @@
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:192
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:216
 msgid "No more glyphs"
-msgstr ""
+msgstr "Plus aucun symbole"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:216
 msgid "Head reached"
@@ -5647,11 +6377,11 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:396
 msgid "Prev. Empty"
-msgstr ""
+msgstr "Pr?c?dent vide"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp:418
 msgid "Next Empty"
-msgstr ""
+msgstr "Prochain vide"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_ocr.cpp:181
 msgid "Sure ?"
@@ -5663,41 +6393,48 @@
 msgid "Couldn't find pixmap file: %s"
 msgstr "Impossible de trouver le fichier d'image?: %s"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp:103
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp:204
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp:467
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp:100
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp:201
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp:469
 msgid "Cannot open directory as a file"
-msgstr "Impossible d'ouvrir le r?pertoire en tant que fichier"
+msgstr "Impossible d'ouvrir le dossier en tant que fichier"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp:328
-#: avidemux/gtk_gui.cpp:893
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp:325
+#: avidemux/gtk_gui.cpp:900
 #, c-format
 msgid "Cannot open \"%s\"."
 msgstr "Ne peut ouvrir ??%s??."
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp:338
-msgid "Overwrite file ?"
-msgstr "Ecraser le fichier??"
+#, c-format
+msgid ""
+"%s already exists.\n"
+"\n"
+"Do you want to replace it?"
+msgstr ""
+"%s existe d?j?.\n"
+"\n"
+"Voulez-vous le remplacer ?"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp:363
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp:377
-msgid "It could be possible that you try to overwrite an input file!"
-msgstr "Il est possible que vous tentiez d'?craser un fichier d'entr??!"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp:365
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp:379
+msgid "It is possible that you are trying to overwrite an input file!"
+msgstr "Il est possible que vous tentiez d'?craser un fichier d'entr?e?!"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp:388
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp:390
 msgid "Cannot write the file"
 msgstr "Impossible d'?crire le fichier"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp:388
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp:390
 #, c-format
 msgid "No write access to \"%s\"."
 msgstr "Pas d'acc?s en ?criture ? ??%s??."
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp:522
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp:524
 msgid "Images"
 msgstr "Images"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp:534
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp:536
 msgid "All"
 msgstr "Tous"
 
@@ -5715,11 +6452,11 @@
 
 #: avidemux/ADM_video/ADM_vidFieldUnblend.cpp:81
 msgid "Metrics"
-msgstr "M?triques"
+msgstr "Mesures"
 
 #: avidemux/ADM_video/ADM_vidFieldUnblend.cpp:81
 msgid "Do you want to print metrics on screen ?"
-msgstr "Voulez-vous afficher les m?triques ? l'?cran??"
+msgstr "Voulez-vous afficher les mesures ? l'?cran??"
 
 #: avidemux/ADM_videoFilter/ADM_guiResize.cpp:96
 #: avidemux/ADM_videoFilter/ADM_vidMPLResize.cpp:143
@@ -5733,7 +6470,7 @@
 
 #: avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp:106
 msgid "Linear blend"
-msgstr ""
+msgstr "Fusion lin?aire"
 
 #: avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp:107
 msgid "Linear interpolate"
@@ -5745,7 +6482,7 @@
 
 #: avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp:109
 msgid "Median interpolate"
-msgstr "Interpolation moyenne"
+msgstr "Interpolation m?diane"
 
 #: avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp:110
 msgid "FFmpeg deint"
@@ -5753,19 +6490,53 @@
 
 #: avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp:114
 msgid "_Deinterlacing:"
-msgstr "_D?sentrelacement:"
+msgstr "_D?sentrelacement :"
 
 #: avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp:115
 msgid "_Autolevel"
+msgstr "Niveau _automatique"
+
+#: avidemux/ADM_videoFilter/ADM_vidAddBorder.cpp:224
+#: avidemux/ADM_videoFilter/ADM_vidBSmear.cpp:200
+msgid "_Left border:"
+msgstr "Bordure _gauche :"
+
+#: avidemux/ADM_videoFilter/ADM_vidAddBorder.cpp:225
+#: avidemux/ADM_videoFilter/ADM_vidBSmear.cpp:201
+msgid "_Right border:"
+msgstr "Bordure _droite :"
+
+#: avidemux/ADM_videoFilter/ADM_vidAddBorder.cpp:226
+#: avidemux/ADM_videoFilter/ADM_vidBSmear.cpp:202
+msgid "_Top border:"
+msgstr "Bordure _haute :"
+
+#: avidemux/ADM_videoFilter/ADM_vidAddBorder.cpp:227
+#: avidemux/ADM_videoFilter/ADM_vidBSmear.cpp:203
+msgid "_Bottom border:"
+msgstr "Bordure _basse :"
+
+#: avidemux/ADM_videoFilter/ADM_vidAddBorder.cpp:230
+msgid "Add Borders"
+msgstr "Ajouter des bordures"
+
+#: avidemux/ADM_videoFilter/ADM_vidAddBorder.cpp:234
+#: avidemux/ADM_videoFilter/ADM_vidBSmear.cpp:211
+msgid "Incorrect parameters"
+msgstr "Param?tres incorrects"
+
+#: avidemux/ADM_videoFilter/ADM_vidAddBorder.cpp:234
+#: avidemux/ADM_videoFilter/ADM_vidBSmear.cpp:211
+msgid "All parameters must be even and within range."
 msgstr ""
 
 #: avidemux/ADM_videoFilter/ADM_vidASS.cpp:87
 msgid "_Subtitle file (ASS/SSA):"
-msgstr ""
+msgstr "Fichier de _sous-titres (ASS/SSA) :"
 
 #: avidemux/ADM_videoFilter/ADM_vidASS.cpp:88
 msgid "_Line spacing:"
-msgstr ""
+msgstr "Espacement des _lignes :"
 
 #: avidemux/ADM_videoFilter/ADM_vidASS.cpp:89
 msgid "_Font scale:"
@@ -5773,88 +6544,101 @@
 
 #: avidemux/ADM_videoFilter/ADM_vidASS.cpp:90
 msgid "_Top margin:"
-msgstr ""
+msgstr "Marge _sup?rieure :"
 
 #: avidemux/ADM_videoFilter/ADM_vidASS.cpp:91
 msgid "Botto_m margin"
-msgstr ""
+msgstr "Marge _inf?rieur"
 
 #: avidemux/ADM_videoFilter/ADM_vidBlendRemoval.cpp:82
 #: avidemux/ADM_videoFilter/ADM_vidDGbob.cpp:92
 #: avidemux/ADM_videoFilter/ADM_vidHardIvtcRemoval.cpp:87
 #: avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp:93
 #: avidemux/ADM_videoFilter/ADM_vidMSharpen.cpp:166
+#: avidemux/ADM_videoFilter/ADM_vidMsmooth.cpp:196
 msgid "_Threshold:"
 msgstr "_Seuil?:"
 
 #: avidemux/ADM_videoFilter/ADM_vidBlendRemoval.cpp:83
-msgid ""
-"If value is smaller than threshold it is considered valid.Smaller value "
-"might mean more false positive."
+msgid "If value is smaller than threshold it is considered valid.Smaller value might mean more false positive."
 msgstr ""
 
 #: avidemux/ADM_videoFilter/ADM_vidBlendRemoval.cpp:85
 #: avidemux/ADM_videoFilter/ADM_vidHardIvtcRemoval.cpp:90
 msgid "_Noise:"
-msgstr "_Bruit:"
+msgstr "_Bruit :"
 
 #: avidemux/ADM_videoFilter/ADM_vidBlendRemoval.cpp:85
 #: avidemux/ADM_videoFilter/ADM_vidHardIvtcRemoval.cpp:90
 msgid "If pixels are closer than noise, they are considered to be the same"
-msgstr ""
-"Si les pixels sont plus ?troits que le bruit, ils sont consid?r?s comme "
-"identiques"
+msgstr "Si les pixels sont plus ?troits que le bruit, ils sont consid?r?s comme identiques"
 
 #: avidemux/ADM_videoFilter/ADM_vidBlendRemoval.cpp:86
 msgid "I_dentical:"
-msgstr ""
+msgstr "_Similitude :"
 
 #: avidemux/ADM_videoFilter/ADM_vidBlendRemoval.cpp:86
 #: avidemux/ADM_videoFilter/ADM_vidHardIvtcRemoval.cpp:91
 msgid "If metric is less than identical, images are considered identical"
-msgstr ""
+msgstr "Les images sont consid?r?es comme identique si le calcul de leur similitude est inf?rieur au seuil"
 
 #: avidemux/ADM_videoFilter/ADM_vidBlendRemoval.cpp:87
 #: avidemux/ADM_videoFilter/ADM_vidHardIvtcRemoval.cpp:92
 msgid "_Show metrics"
-msgstr "_Montrer les m?triques"
+msgstr "_Afficher les mesures"
 
 #: avidemux/ADM_videoFilter/ADM_vidBlendRemoval.cpp:87
 #: avidemux/ADM_videoFilter/ADM_vidHardIvtcRemoval.cpp:92
 msgid "Show metric in image (debug)"
-msgstr "Montrer les m?triques dans l'image (d?bug)"
+msgstr "Affiche les mesures dans l'image (d?bogage)"
 
-#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:187
+#: avidemux/ADM_videoFilter/ADM_vidBlendRemoval.cpp:91
+msgid "Blend Removal"
+msgstr "Configuration du \"Blend remover\""
+
+#: avidemux/ADM_videoFilter/ADM_vidBSmear.cpp:206
+msgid "Blacken Borders"
+msgstr "Configuration du \"Blacken borders\""
+
+#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:181
 msgid "_Start Frame (first frame # to include in average):"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:191
+#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:185
 msgid "_End Frame (last frame # to include), -1 = last:"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:195
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:160
+#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:189
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:191
 msgid "_Output File:"
-msgstr ""
+msgstr "Fichier de _sortie :"
 
-#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:198
+#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:189
+msgid "Select output file"
+msgstr "S?lectionner le fichier de sortie"
+
+#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:192
 msgid "_Bias (only for display; use 0 for average, 128 for frame minus average):"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:202
+#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:196
 msgid "Current frame minus average so far"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:203
+#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:197
 msgid "Average so far"
-msgstr ""
+msgstr "Moyenne jusqu'? pr?sent"
 
-#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:205
+#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:199
 msgid "Display nothing (fast for batch processing)"
-msgstr ""
+msgstr "Ne rien afficher (rapide pour le traitement en lot)"
 
-#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:209
+#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:203
 msgid "Display _Mode:"
+msgstr "_Mode d'affichage :"
+
+#: avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp:208
+msgid "ComputeAverage"
 msgstr ""
 
 #: avidemux/ADM_videoFilter/ADM_vidDecDec.cpp:190
@@ -5875,46 +6659,50 @@
 
 #: avidemux/ADM_videoFilter/ADM_vidDecDec.cpp:196
 msgid "Fastest (no chroma, partial luma)"
-msgstr ""
+msgstr "Le plus rapide (pas de chrominance, luminance partielle)"
 
 #: avidemux/ADM_videoFilter/ADM_vidDecDec.cpp:197
 msgid "Fast (partial luma and chroma)"
-msgstr ""
+msgstr "Rapide (luminance et chrominance partielles)"
 
 #: avidemux/ADM_videoFilter/ADM_vidDecDec.cpp:198
 msgid "Medium (full luma, no chroma)"
-msgstr ""
+msgstr "Moyen (luminance ? fond, pas de chrominance)"
 
 #: avidemux/ADM_videoFilter/ADM_vidDecDec.cpp:199
 msgid "Slow (full luma and chroma)"
-msgstr ""
+msgstr "Lent (luminance et chrominance ? fond)"
 
 #: avidemux/ADM_videoFilter/ADM_vidDecDec.cpp:205
 msgid "_Threshold 1:"
-msgstr ""
+msgstr "_Seuil 1 :"
 
 #: avidemux/ADM_videoFilter/ADM_vidDecDec.cpp:206
 msgid "T_hreshold 2:"
-msgstr ""
+msgstr "S_euil 2 :"
 
+#: avidemux/ADM_videoFilter/ADM_vidDecDec.cpp:207
+msgid "C_ycle:"
+msgstr "C_ycle :"
+
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:83
 msgid "No strategy"
-msgstr ""
+msgstr "Pas de strat?gie"
 
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:84
 msgid "3:2 pulldown"
-msgstr ""
+msgstr "3:2 pulldown"
 
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:85
 msgid "PAL/SECAM"
-msgstr ""
+msgstr "PAL/SECAM"
 
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:91
 #: avidemux/ADM_videoFilter/ADM_vidDGbob.cpp:82
 #: avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp:88
 #: avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp:110
 msgid "Bottom"
-msgstr "Bas"
+msgstr "Impaire"
 
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:95
 msgid "Never"
@@ -5950,11 +6738,11 @@
 
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:110
 msgid "_Strategy:"
-msgstr ""
+msgstr "_Strat?gie :"
 
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:112
 msgid "_Postprocessing:"
-msgstr ""
+msgstr "_Post-traitement :"
 
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:113
 msgid "_Try backward:"
@@ -5962,7 +6750,7 @@
 
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:115
 msgid "_Direct threshold:"
-msgstr ""
+msgstr "Seuil _direct :"
 
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:116
 msgid "_Backward threshold:"
@@ -5970,59 +6758,61 @@
 
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:117
 msgid "_Noise threshold:"
-msgstr ""
+msgstr "Seuil de _bruit :"
 
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:118
 msgid "Postp_rocessing threshold:"
-msgstr ""
+msgstr "Seuil de post-t_raitement :"
 
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:120
 msgid "_Use chroma to decide"
-msgstr ""
+msgstr "_Utiliser la chrominance pour d?cider"
 
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:121
 msgid "Sho_w info"
-msgstr ""
+msgstr "_Montrer les informations"
 
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:122
 msgid "Debu_g"
-msgstr ""
+msgstr "D?boga_ge"
 
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:123
 msgid "Bl_end"
 msgstr ""
 
 #: avidemux/ADM_videoFilter/ADM_vidDenoise.cpp:386
+#, fuzzy
 msgid "_Luma lock:"
-msgstr ""
+msgstr "Verouille la _luminance :"
 
 #: avidemux/ADM_videoFilter/ADM_vidDenoise.cpp:387
+#, fuzzy
 msgid "C_hroma lock:"
-msgstr "C_hroma fermer:"
+msgstr "Verouille la c_hrominance :"
 
 #: avidemux/ADM_videoFilter/ADM_vidDenoise.cpp:388
 msgid "L_uma threshold:"
-msgstr "Seuil L_uma?:"
+msgstr "Seuil de l_uma?:"
 
 #: avidemux/ADM_videoFilter/ADM_vidDenoise.cpp:389
 msgid "Ch_roma threshold:"
-msgstr "Seuil Ch_roma:"
+msgstr "Seuil de ch_roma :"
 
 #: avidemux/ADM_videoFilter/ADM_vidDenoise.cpp:391
 msgid "_Scene change:"
-msgstr "Changementr sc?ne:"
+msgstr "Changement de _sc?ne :"
 
 #: avidemux/ADM_videoFilter/ADM_vidDGbob.cpp:85
 msgid "Keep nb of frames and fps"
-msgstr ""
+msgstr "Conserver le nombre d'image et d'images par seconde"
 
 #: avidemux/ADM_videoFilter/ADM_vidDGbob.cpp:86
 msgid "Double nb of frames and fps"
-msgstr "Double fps et Nb image"
+msgstr "Double le nombre d'image et d'image par seconde"
 
 #: avidemux/ADM_videoFilter/ADM_vidDGbob.cpp:87
 msgid "Double nb of frames (slow motion)"
-msgstr "Double Nb image (ralenti)"
+msgstr "Double le nombre d'images (ralenti)"
 
 #: avidemux/ADM_videoFilter/ADM_vidDGbob.cpp:93
 msgid "_Extra"
@@ -6032,69 +6822,189 @@
 msgid "Extra check, avoid using it"
 msgstr "Le contr?le suppl?mentaire, ?viter de l'employer"
 
+#: avidemux/ADM_videoFilter/ADM_vidDGbob.cpp:96
+msgid "DGBob"
+msgstr "DGBob"
+
 #: avidemux/ADM_videoFilter/ADM_vidDropOut.cpp:63
 msgid "DropOut Threshold"
-msgstr "Seuil DropOut"
+msgstr "Seuil de rejet"
 
+#: avidemux/ADM_videoFilter/ADM_vidDropOut.cpp:66
+msgid "Drop Out"
+msgstr "Configuration de \"Drop\""
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:191
+msgid "Erase"
+msgstr ""
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:192
+msgid "Un-Erase"
+msgstr ""
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:196
+msgid "1x1"
+msgstr "1x1"
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:197
+msgid "3x3"
+msgstr "3x3"
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:198
+msgid "5x5"
+msgstr "5x5"
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:199
+msgid "7x7"
+msgstr "7x7"
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:200
+msgid "9x9"
+msgstr "9x9"
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:201
+msgid "11x11"
+msgstr "11x11"
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:202
+msgid "15x15"
+msgstr "15x15"
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:203
+msgid "21x21"
+msgstr "21x21"
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:207
+msgid "Brush _Mode:"
+msgstr ""
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:211
+msgid "Brush _Size:"
+msgstr ""
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:244
+msgid "Output \"_Color\" for all masked pixels:"
+msgstr ""
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:250
+msgid "Eraser _Data File:"
+msgstr ""
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:250
+msgid "Select data file"
+msgstr "S?lectionner le fichier de donn?es"
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:255
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:196
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:378
+#: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:159
+msgid "_Debugging settings (bits):"
+msgstr ""
+
+#: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:261
+#, fuzzy
+msgid "Eraser Configuration"
+msgstr "Configuration de \"Eraser\""
+
 #: avidemux/ADM_videoFilter/ADM_vidFade.cpp:65
 msgid "Out"
-msgstr "Sortie"
+msgstr "Sortant"
 
 #: avidemux/ADM_videoFilter/ADM_vidFade.cpp:65
 msgid "Fade out"
-msgstr "Fade sortie"
+msgstr "Fondu sortant"
 
 #: avidemux/ADM_videoFilter/ADM_vidFade.cpp:65
 msgid "In"
-msgstr "Entr?e"
+msgstr "Entrant"
 
 #: avidemux/ADM_videoFilter/ADM_vidFade.cpp:65
 msgid "Fade in"
-msgstr "Fade entr?e"
+msgstr "Fondu entrant"
 
 #: avidemux/ADM_videoFilter/ADM_vidFade.cpp:71
 msgid "_Fade type:"
-msgstr "Type de Fade:"
+msgstr "Type de _fondu :"
 
 #: avidemux/ADM_videoFilter/ADM_vidFade.cpp:72
 msgid "_Start frame:"
-msgstr "Premi?re image:"
+msgstr "_Premi?re image :"
 
 #: avidemux/ADM_videoFilter/ADM_vidFade.cpp:73
 msgid "_End frame:"
-msgstr "Derni?re image:"
+msgstr "_Derni?re image :"
 
 #: avidemux/ADM_videoFilter/ADM_vidFade.cpp:74
 msgid "Fade to _black"
-msgstr "Fondu en noir"
+msgstr "Fondu en _noir"
 
 #: avidemux/ADM_videoFilter/ADM_vidFade.cpp:83
 msgid "Parameter Error"
-msgstr "Erreur param?tre"
+msgstr "Erreur de param?tre"
 
 #: avidemux/ADM_videoFilter/ADM_vidFade.cpp:83
 msgid "Start must be before end, and both within video # of frames."
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidHardIvtcRemoval.cpp:88
-msgid ""
-"If value is smaller than threshold it is considered valid. Smaller value "
-"might mean more false positive"
+#: avidemux/ADM_videoFilter/ADM_vidFastConvolution.cpp:467
+#: avidemux/ADM_videoFilter/ADM_vidLargeMedian.cpp:304
+msgid "_Process luma"
+msgstr "_Traitement de la luminance"
+
+#: avidemux/ADM_videoFilter/ADM_vidFastConvolution.cpp:467
+#: avidemux/ADM_videoFilter/ADM_vidLargeMedian.cpp:304
+msgid "Process luma plane"
 msgstr ""
-"Si l'image est proche du seuil, est-elle consid?r?e comme valide.Plus la "
-"valeur est petite plus on a de fausses d?tections"
 
+#: avidemux/ADM_videoFilter/ADM_vidFastConvolution.cpp:468
+#: avidemux/ADM_videoFilter/ADM_vidLargeMedian.cpp:305
+msgid "P_rocess chroma"
+msgstr "T_raitement de la chrominance"
+
+#: avidemux/ADM_videoFilter/ADM_vidFastConvolution.cpp:472
+msgid "Fast Convolution"
+msgstr "Convolution rapide"
+
+#: avidemux/ADM_videoFilter/ADM_vidFields.cpp:229
+msgid "Motion Threshold"
+msgstr "Seuil de mouvement"
+
+#: avidemux/ADM_videoFilter/ADM_vidFields.cpp:231
+#, fuzzy
+msgid "Blend Threshold"
+msgstr "Seuil de fusion"
+
+#: avidemux/ADM_videoFilter/ADM_vidFlux.cpp:133
+msgid "_Temporal threshold:"
+msgstr "Seuil _temporel :"
+
+#: avidemux/ADM_videoFilter/ADM_vidFlux.cpp:134
+msgid "_Spatial threshold:"
+msgstr "Seuil _spatial :"
+
+#: avidemux/ADM_videoFilter/ADM_vidForcedPP.cpp:81
+msgid "Forced Postprocessing"
+msgstr "Post-traitement forc?"
+
+#: avidemux/ADM_videoFilter/ADM_vidHardIvtcRemoval.cpp:88
+msgid "If value is smaller than threshold it is considered valid. Smaller value might mean more false positive"
+msgstr "Si l'image est proche du seuil, est-elle consid?r?e comme valide. Plus la valeur est petite plus on a de fausses d?tections"
+
 #: avidemux/ADM_videoFilter/ADM_vidHardIvtcRemoval.cpp:91
 msgid "_Identical:"
-msgstr "_Identique:"
+msgstr "_Identique :"
 
+#: avidemux/ADM_videoFilter/ADM_vidHardIvtcRemoval.cpp:96
+msgid "Hard IVTC Removal"
+msgstr "Configuration du \"Hard pulldown removal\""
+
 #: avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp:93
 msgid "Smaller means more deinterlacing"
-msgstr "plus petit signifie plus de d?-entrelacement"
+msgstr "Plus le seuil est bas, plus fort est le d?sentrelacement"
 
 #: avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp:94
 msgid "_Sharper engine:"
-msgstr "_ moteur Sharp:"
+msgstr "Moteur de _nettet? :"
 
 #: avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp:95
 msgid "T_woway"
@@ -6110,23 +7020,31 @@
 
 #: avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp:96
 msgid "Show interlaced areas (for test!)"
-msgstr "Montrer les champs entrelac?s (test?!)"
+msgstr "Montre les zones entrelac?es (pour tester?!)"
 
+#: avidemux/ADM_videoFilter/ADM_vidLargeMedian.cpp:309
+msgid "Large Median 5x5"
+msgstr ""
+
 #: avidemux/ADM_videoFilter/ADM_vidLogo.cpp:88
 msgid "_Logo (jpg file):"
-msgstr ""
+msgstr "_Logo (fichier JPG) :"
 
+#: avidemux/ADM_videoFilter/ADM_vidLogo.cpp:88
+msgid "Select JPEG file"
+msgstr "S?lectionner le fichier JPEG"
+
 #: avidemux/ADM_videoFilter/ADM_vidLogo.cpp:89
 msgid "_X Position:"
-msgstr ""
+msgstr "Position en _X :"
 
 #: avidemux/ADM_videoFilter/ADM_vidLogo.cpp:90
 msgid "_Y Position:"
-msgstr ""
+msgstr "Position en _Y :"
 
 #: avidemux/ADM_videoFilter/ADM_vidLogo.cpp:91
 msgid "_Alpha:"
-msgstr ""
+msgstr "_Alpha :"
 
 #: avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp:104
 msgid "Fast"
@@ -6138,7 +7056,7 @@
 
 #: avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp:106
 msgid "Slow iterative motion search"
-msgstr " Lent, estimation it?rative de mouvement"
+msgstr "Lent, estimation it?rative de mouvement"
 
 #: avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp:107
 msgid "Extra slow (same as 3+multiple reference frames)"
@@ -6146,42 +7064,42 @@
 
 #: avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp:114
 msgid "_Field dominance:"
-msgstr "Dominance de champ:"
+msgstr "Dominance des _trames :"
 
 #: avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp:115
 msgid "_Qp:"
-msgstr "Qp:"
+msgstr "_Qp :"
 
 #: avidemux/ADM_videoFilter/ADM_vidMosaic.cpp:90
 msgid "_Horizontal stacking:"
-msgstr "Tassement horizontal:"
+msgstr "Empillement _horizontal :"
 
 #: avidemux/ADM_videoFilter/ADM_vidMosaic.cpp:91
 msgid "_Vertical stacking:"
-msgstr "Tassement vertical:"
+msgstr "Empillement _vertical :"
 
 #: avidemux/ADM_videoFilter/ADM_vidMosaic.cpp:92
 msgid "_Shrink factor:"
-msgstr "Facteur shrink:"
+msgstr "Facteur de _r?duction :"
 
 #: avidemux/ADM_videoFilter/ADM_vidMosaic.cpp:93
 msgid "Show _frame"
-msgstr "Montrer Nb image?:"
+msgstr "Montrer l'_image?:"
 
 #: avidemux/ADM_videoFilter/ADM_vidMPLD3D.cpp:74
 #: avidemux/ADM_videoFilter/ADM_vidMPLD3Dlow.cpp:74
 msgid "_Spatial luma strength:"
-msgstr "Seuil Luma Spatiale:"
+msgstr "Force _spatiale de la luminance :"
 
 #: avidemux/ADM_videoFilter/ADM_vidMPLD3D.cpp:75
 #: avidemux/ADM_videoFilter/ADM_vidMPLD3Dlow.cpp:75
 msgid "S_patial chroma strength:"
-msgstr "Seuil Chroma Spatiale:"
+msgstr "Force s_patiale de la chrominance :"
 
 #: avidemux/ADM_videoFilter/ADM_vidMPLD3D.cpp:76
 #: avidemux/ADM_videoFilter/ADM_vidMPLD3Dlow.cpp:76
 msgid "_Temporal strength:"
-msgstr "Seuil Temporal:"
+msgstr "Force _temporel :"
 
 #: avidemux/ADM_videoFilter/ADM_vidMSharpen.cpp:163
 msgid "_Mask"
@@ -6189,65 +7107,91 @@
 
 #: avidemux/ADM_videoFilter/ADM_vidMSharpen.cpp:164
 msgid "_High Q"
-msgstr "_High Q"
+msgstr "_Haute qualit?"
 
+#: avidemux/ADM_videoFilter/ADM_vidMsmooth.cpp:194
+msgid "_High quality"
+msgstr "_Haute qualit?"
+
+#: avidemux/ADM_videoFilter/ADM_vidMsmooth.cpp:195
+msgid "Show _mask"
+msgstr "Montre le _masque"
+
+#: avidemux/ADM_videoFilter/ADM_vidMsmooth.cpp:201
+msgid "MSmooth"
+msgstr "Configuration de \"MSmooth\""
+
 #: avidemux/ADM_videoFilter/ADM_vidPalShift.cpp:76
+#, fuzzy
 msgid "_Try reverse"
+msgstr "_Essaie d'inverser"
+
+#: avidemux/ADM_videoFilter/ADM_vidPalShift.cpp:80
+msgid "Pal Field Shift"
+msgstr "Configuration de \"Pal Field Shift\""
+
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:135
+msgid "New format, preferred, good for Tracker3D"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:129
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:137
+msgid "DG at UWA format (includes shape info & bounding box)"
+msgstr ""
+
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:139
+msgid "AB at ODU format (includes shape info)"
+msgstr ""
+
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:141
+msgid "Old format that Tracker3D can't read directly"
+msgstr ""
+
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:145
+msgid "Output _Format:"
+msgstr "Format de _sortie :"
+
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:170
 msgid "Mi_nimum area for a particle to be detected:"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:132
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:173
 msgid "Ma_ximum area for a particle to be detected:"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:136
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:177
 msgid "_Left side crop (ignore particles in):"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:139
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:180
 msgid "_Right side crop (ignore particles in):"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:142
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:183
 msgid "_Top crop (ignore particles in):"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:145
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:186
 msgid "_Bottom crop (ignore particles in):"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:149
-msgid "New format, preferred, good for Tracker3D"
-msgstr ""
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:191
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:324
+#: avidemux/gtk_gui.cpp:2016
+#: avidemux/gtk_gui.cpp:2113
+msgid "Select file"
+msgstr "S?lectionner un fichier"
 
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:151
-msgid "Old format that Tracker3D can't read directly"
-msgstr ""
-
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:155
-msgid "_Output Format:"
-msgstr ""
-
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:163
+#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:194
 msgid "_Camera number:"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:165
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:343
-#: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:147
-msgid "_Debugging settings (bits):"
-msgstr ""
-
 #: avidemux/ADM_videoFilter/ADM_vidResampleFPS.cpp:85
 msgid "_New frame rate:"
-msgstr "Nouvelle fr?quence d'image:"
+msgstr "_Images par seconde :"
 
 #: avidemux/ADM_videoFilter/ADM_vidResampleFPS.cpp:86
 msgid "_Blend"
-msgstr "_M?lange"
+msgstr "_Transparent"
 
 #: avidemux/ADM_videoFilter/ADM_vidRotate.cpp:265
 msgid "90 degrees"
@@ -6275,637 +7219,666 @@
 
 #: avidemux/ADM_videoFilter/ADM_vidRotate.cpp:269
 msgid "_Angle:"
-msgstr ""
+msgstr "_Angle :"
 
-#: avidemux/ADM_videoFilter/ADM_vidRotate.cpp:271
-msgid "Rotate"
-msgstr ""
-
 #: avidemux/ADM_videoFilter/ADM_vidSoften.cpp:68
 msgid "_Luma threshold:"
-msgstr "Seuil?Luma:"
+msgstr "Seuil?de la _luminance :"
 
 #: avidemux/ADM_videoFilter/ADM_vidSoften.cpp:69
 msgid "C_hroma threshold:"
-msgstr "Seuil Chroma:"
+msgstr "Seuil de c_hroma :"
 
 #: avidemux/ADM_videoFilter/ADM_vidSoften.cpp:70
 msgid "_Radius:"
-msgstr "_Radius:"
+msgstr "_Radius :"
 
-#: avidemux/ADM_videoFilter/ADM_vidSRT.cpp:214
+#: avidemux/ADM_videoFilter/ADM_vidSRT.cpp:210
 msgid "Could not open subtitle file"
 msgstr "Impossible d'ouvrir le fichier sous-titres"
 
-#: avidemux/ADM_videoFilter/ADM_vidSRT.cpp:234
+#: avidemux/ADM_videoFilter/ADM_vidSRT.cpp:230
 msgid "Cannot identify subtitle format"
 msgstr "Ne peut pas identifier le format de sous-titres"
 
 #: avidemux/ADM_videoFilter/ADM_vidStabilize.cpp:63
 msgid "Stabilize Threshold"
-msgstr "Stabiliser seuil"
+msgstr "Seuil de stabilisation"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:260
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:261
 msgid "P' = A"
-msgstr ""
+msgstr "P' = A"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:261
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:262
 msgid "P' = P"
-msgstr ""
+msgstr "P' = P"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:262
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:263
 msgid "P' = P - A"
-msgstr ""
+msgstr "P' = P - A"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:263
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:264
 msgid "P' = A - P"
-msgstr ""
+msgstr "P' = A - P"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:264
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:265
 msgid "P' = P + A"
-msgstr ""
+msgstr "P' = P + A"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:265
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:266
 msgid "P' = P * A"
-msgstr ""
+msgstr "P' = P * A"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:266
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:267
 msgid "P' = P / A"
-msgstr ""
+msgstr "P' = P / A"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:267
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:268
 msgid "P' = A / P"
-msgstr ""
+msgstr "P' = A / P"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:268
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:269
 msgid "P' = min (P, A)"
-msgstr ""
+msgstr "P' = min (P, A)"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:269
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:270
 msgid "P' = max (P, A)"
-msgstr ""
+msgstr "P' = max (P, A)"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:274
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:275
 msgid "A = convolve(P); Load convolution kernel from file"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:276
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:277
 msgid "A = pixel from image file as float; Load image from file"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:278
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:279
 msgid "A = pixel from image file as integer; Load image from file"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:280
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:281
 msgid "A = floating point constant value"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:282
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:283
 msgid "A = rolling average of pixel: A = A*(1-alpha)+(P*alpha)"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:287
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:288
 msgid "Select _Operation on each pixel P and input A:"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:291
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:293
 msgid "Input _Type:"
-msgstr ""
+msgstr "_Type d'entr?e :"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:296
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:324
 msgid "Input _File (image or convolution kernel):"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:299
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:327
 msgid ""
 "_Load Bias (added to each pixel\n"
 "in file image when loaded):"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:304
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:332
 msgid ""
 "Load _Multiplier (each pixel in\n"
 "file image mult. by this when loaded):"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:310
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:338
 msgid "Input _Constant:"
-msgstr ""
+msgstr "_Constante d'entr?e :"
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:314
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:342
 msgid ""
-"Denominator of memory constant _alpha\n"
-"(where A = (1-alpha)*A + alpha*curr_frame):"
+"Memory constant _alpha\n"
+"(where A = (1-alpha)*A + alpha*(curr_frame + lookahead)):"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:319
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:347
+msgid "Look ahead _N frames:"
+msgstr ""
+
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:351
 msgid "Init _Start Frame (first frame # to use for head start):"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:323
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:355
 msgid "Init _End Frame (last frame # to use for head start):"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:327
-msgid ""
-"Init By _Rolling (compute head start using a rolling average rather than a "
-"straight average)"
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:359
+msgid "Init By _Rolling (compute head start using a rolling average rather than a straight average)"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:332
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:364
 msgid "_Bias (will be added to result):"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:335
-msgid "Mi_nimum value (will be scaled to 0):"
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:367
+msgid "_Result Bias (added to each result pixel):"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:338
-msgid "Ma_ximum value (will be scaled to 255):"
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:371
+msgid ""
+"Result _Multiplier (each result pixel\n"
+"multiplied by this):"
 msgstr ""
 
-#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:341
+#: avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp:376
 msgid "_Histogram every N frames (0 to disable):"
-msgstr ""
+msgstr "_Histogramme toutes les N images (0 pour d?sactiver) :"
 
-#: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:134
+#: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:146
 msgid "Mi_nimum value to be in-range:"
-msgstr ""
+msgstr "Valeur mi_nimun pour ?tre dans l'intervalle :"
 
-#: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:135
+#: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:147
 msgid "Ma_ximum value to be in-range:"
-msgstr ""
+msgstr "Valeur ma_ximun pour ?tre dans l'intervalle :"
 
-#: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:138
+#: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:150
 msgid "In-range values go white, out-of-range go black"
-msgstr ""
+msgstr "Les valeurs dans l'intervalle deviennent blanches, les autres deviennent noires"
 
-#: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:139
+#: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:151
 msgid "In-range values go black, out-of-range go white"
-msgstr ""
+msgstr "Les valeurs dans l'intervalle deviennent noires, les autres deviennent blanches"
 
-#: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:144
+#: avidemux/ADM_videoFilter/ADM_vidThreshold.cpp:156
 msgid "Output values:"
-msgstr ""
+msgstr "Valeurs de sortie :"
 
 #: avidemux/ADM_videoFilter/ADM_vidVlad.cpp:101
 msgid "_Luma temporal threshold:"
-msgstr ""
+msgstr "Seuil temporel de la _luminance :"
 
 #: avidemux/ADM_videoFilter/ADM_vidVlad.cpp:102
 msgid "Ch_roma temporal threshold:"
-msgstr ""
+msgstr "Seuil temporel de la ch_rominance :"
 
 #: avidemux/ADM_videoFilter/ADM_vidYadif.cpp:171
 msgid "Temporal & spatial check"
-msgstr ""
+msgstr "V?rification spatio-temporel"
 
 #: avidemux/ADM_videoFilter/ADM_vidYadif.cpp:172
 msgid "Bob, temporal & spatial check"
-msgstr ""
+msgstr "Bob, v?rification spatio-temporel"
 
 #: avidemux/ADM_videoFilter/ADM_vidYadif.cpp:173
 msgid "Skip spatial temporal check"
-msgstr ""
+msgstr "Saute la v?rification spatio-temporel"
 
 #: avidemux/ADM_videoFilter/ADM_vidYadif.cpp:174
 msgid "Bob, skip spatial temporal check"
-msgstr ""
+msgstr "Bob, saute la v?rification spatio-temporel"
 
 #: avidemux/ADM_videoFilter/ADM_vidYadif.cpp:182
 msgid "_Order:"
-msgstr ""
+msgstr "_Ordre :"
 
-#: avidemux/gtk_gui.cpp:251
+#: avidemux/gtk_gui.cpp:249
 msgid "Select ECMAScript to Run"
 msgstr ""
 
-#: avidemux/gtk_gui.cpp:298 avidemux/gtk_gui.cpp:337
+#: avidemux/gtk_gui.cpp:296
+#: avidemux/gtk_gui.cpp:335
 msgid "Obsolete"
 msgstr "Obsol?te"
 
-#: avidemux/gtk_gui.cpp:365
+#: avidemux/gtk_gui.cpp:363
 msgid "Not coded in this version"
 msgstr "Pas cod? dans cette version"
 
-#: avidemux/gtk_gui.cpp:380 avidemux/gtk_gui.cpp:385 avidemux/gtk_gui.cpp:507
-#: avidemux/gtk_gui.cpp:510
+#: avidemux/gtk_gui.cpp:378
+#: avidemux/gtk_gui.cpp:383
+#: avidemux/gtk_gui.cpp:506
+#: avidemux/gtk_gui.cpp:509
 msgid "Select AVI File..."
-msgstr ""
+msgstr "S?lectionner le fichier AVI..."
 
-#: avidemux/gtk_gui.cpp:441
+#: avidemux/gtk_gui.cpp:440
 msgid ""
 "This is to be used to undo packed VOP on MPEG-4.\n"
 "Continue ?"
 msgstr ""
-"Cela doit ?tre utilis? pour enlever les vop sur du MPEG4.\n"
+"Cela doit ?tre utilis? pour enlever les VOP sur du MPEG4.\n"
 "Continuer??"
 
-#: avidemux/gtk_gui.cpp:443
+#: avidemux/gtk_gui.cpp:442
 msgid "Select AVI File to Write"
-msgstr ""
+msgstr "S?lectionner le fichier AVI ? ?crire"
 
-#: avidemux/gtk_gui.cpp:449
+#: avidemux/gtk_gui.cpp:448
 msgid "Select OGM File to Write"
-msgstr ""
+msgstr "S?lectionner le fichier OGM ? ?crire"
 
-#: avidemux/gtk_gui.cpp:453 avidemux/gtk_gui.cpp:465
+#: avidemux/gtk_gui.cpp:452
+#: avidemux/gtk_gui.cpp:464
 msgid "Select Workbench to Save"
-msgstr ""
+msgstr "S?lectionner le fichier projet ? enregistrer"
 
-#: avidemux/gtk_gui.cpp:497
+#: avidemux/gtk_gui.cpp:496
 msgid "Select Raw File to Save"
-msgstr ""
+msgstr "S?lectionner le fichier brut ? enregistrer"
 
-#: avidemux/gtk_gui.cpp:513
+#: avidemux/gtk_gui.cpp:512
 msgid "Select AVI File to Append..."
 msgstr ""
 
-#: avidemux/gtk_gui.cpp:517
+#: avidemux/gtk_gui.cpp:516
 msgid "Select File to Save Audio"
 msgstr ""
 
-#: avidemux/gtk_gui.cpp:551
+#: avidemux/gtk_gui.cpp:550
 msgid "Select JPEG Sequence to Save"
-msgstr ""
+msgstr "S?lectionner la s?quence JPEG ? enregistrer"
 
-#: avidemux/gtk_gui.cpp:554
+#: avidemux/gtk_gui.cpp:553
 msgid "Select BMP to Save"
-msgstr ""
+msgstr "S?lectionner le BMP ? enregistrer"
 
-#: avidemux/gtk_gui.cpp:558
+#: avidemux/gtk_gui.cpp:557
 msgid "Select JPEG to Save"
-msgstr ""
+msgstr "S?lectionner le JPEG ? enregistrer"
 
-#: avidemux/gtk_gui.cpp:611 avidemux/gtk_gui.cpp:715
+#: avidemux/gtk_gui.cpp:610
+#: avidemux/gtk_gui.cpp:722
 msgid "Select File to Save"
-msgstr ""
+msgstr "S?lectionner le fichier ? enregistrer"
 
-#: avidemux/gtk_gui.cpp:655
+#: avidemux/gtk_gui.cpp:662
 msgid "Select MP3 to Load"
-msgstr ""
+msgstr "S?lectionner le MP3 ? charger"
 
-#: avidemux/gtk_gui.cpp:658
+#: avidemux/gtk_gui.cpp:665
 msgid "Select AC3 to Load"
-msgstr ""
+msgstr "S?lectionner l'AC3 ? charger"
 
-#: avidemux/gtk_gui.cpp:661
+#: avidemux/gtk_gui.cpp:668
 msgid "Select WAV to Load"
-msgstr ""
+msgstr "S?lectionner le WAV ? charger"
 
-#: avidemux/gtk_gui.cpp:709
+#: avidemux/gtk_gui.cpp:706
+msgid "Go to Frame"
+msgstr "Aller ? l'image"
+
+#: avidemux/gtk_gui.cpp:706
+msgid "_Go to frame:"
+msgstr "_Aller ? l'image :"
+
+#: avidemux/gtk_gui.cpp:716
 msgid "Out of bounds"
 msgstr "Hors limites"
 
-#: avidemux/gtk_gui.cpp:720 avidemux/gtk_gui.cpp:1908
+#: avidemux/gtk_gui.cpp:727
+#: avidemux/gtk_gui.cpp:1915
 msgid "Marker A > B"
 msgstr "Marqueur A?>?B"
 
-#: avidemux/gtk_gui.cpp:720
+#: avidemux/gtk_gui.cpp:727
 msgid "Cannot copy."
 msgstr "Ne peut pas copier"
 
-#: avidemux/gtk_gui.cpp:732
+#: avidemux/gtk_gui.cpp:739
 msgid "Something bad happened (II))"
 msgstr "Quelque chose de mauvais c'est pass? (II)"
 
-#: avidemux/gtk_gui.cpp:746
+#: avidemux/gtk_gui.cpp:753
 msgid "Are you sure?"
 msgstr "Etes vous s?r??"
 
-#: avidemux/gtk_gui.cpp:801
+#: avidemux/gtk_gui.cpp:808
 msgid "Frame Rate"
-msgstr ""
+msgstr "Fr?quence d'image"
 
-#: avidemux/gtk_gui.cpp:801
+#: avidemux/gtk_gui.cpp:808
 msgid "_Frames per second:"
-msgstr ""
+msgstr "_Images par seconde :"
 
-#: avidemux/gtk_gui.cpp:824
+#: avidemux/gtk_gui.cpp:831
 msgid "Width is not a multiple of 8"
 msgstr "La largeur n'est pas un multiple de 8"
 
-#: avidemux/gtk_gui.cpp:825
+#: avidemux/gtk_gui.cpp:832
 msgid "This will make trouble for AVI files."
 msgstr "Cela devrait engendrer des ennuis pour les fichiers AVI."
 
-#: avidemux/gtk_gui.cpp:835
+#: avidemux/gtk_gui.cpp:842
 msgid "Rebuild all Keyframes?"
 msgstr "Reconstruire toutes les images-cl???"
 
-#: avidemux/gtk_gui.cpp:893
+#: avidemux/gtk_gui.cpp:900
 msgid "Permission error"
-msgstr "Erreur permission"
+msgstr "Erreur de permission"
 
-#: avidemux/gtk_gui.cpp:896
+#: avidemux/gtk_gui.cpp:903
 #, c-format
 msgid "\"%s\" does not exist."
 msgstr "??%s?? n'existe pas."
 
-#: avidemux/gtk_gui.cpp:938
+#: avidemux/gtk_gui.cpp:945
 msgid "Cannot open project using the video loader."
 msgstr "Ne peut pas ouvrir le projet utilisant le chargeur vid?o."
 
-#: avidemux/gtk_gui.cpp:939
+#: avidemux/gtk_gui.cpp:946
 msgid "Try 'File' -> 'Load/Run Project...'"
-msgstr "Essayez ??Fichier->Charger/Lancer un Projet...??"
+msgstr "Essayez ??Fichier -> Charger/Lancer un projet...??"
 
-#: avidemux/gtk_gui.cpp:941
+#: avidemux/gtk_gui.cpp:948
 msgid "Could not open the file"
 msgstr "Ne peut ouvrir le fichier"
 
-#: avidemux/gtk_gui.cpp:976
+#: avidemux/gtk_gui.cpp:983
 msgid "Multiple Audio Tracks"
 msgstr "Multiple pistes audio"
 
-#: avidemux/gtk_gui.cpp:976
+#: avidemux/gtk_gui.cpp:983
 msgid ""
 "The file you just loaded contains several audio tracks.\n"
 "Go to Audio->MainTrack to select the active one."
 msgstr ""
 "Le fichier charg? contient plusieurs pistes audio.\n"
-"Aller ? ??Audio->Piste Principale?? pour choisir la piste active."
+"Aller ? ??Audio -> Piste Principale?? pour choisir la piste active."
 
-#: avidemux/gtk_gui.cpp:1039
+#: avidemux/gtk_gui.cpp:1046
 msgid "No audio decoder found for this file"
 msgstr "Pas de d?codeur audio pour ce fichier"
 
-#: avidemux/gtk_gui.cpp:1040
+#: avidemux/gtk_gui.cpp:1047
 msgid "Save (A+V) will generate bad AVI. Save audio will work."
-msgstr "Sauvegarder (A+V) g?n?rera un mauvais AVI. Sauvegarder l'audio fonctionnera."
+msgstr "Enregistrer l'audio et la vid?o g?n?rera un mauvais AVI. Enregistrer l'audio fonctionnera."
 
-#: avidemux/gtk_gui.cpp:1099
+#: avidemux/gtk_gui.cpp:1106
 msgid "Something failed when appending"
 msgstr "Quelque chose de mauvais c'est pass?"
 
-#: avidemux/gtk_gui.cpp:1108 avidemux/gtk_gui.cpp:1927
+#: avidemux/gtk_gui.cpp:1115
+#: avidemux/gtk_gui.cpp:1934
 msgid "Something bad happened (II)"
 msgstr "Quelque chose de mauvais c'est pass? (II)"
 
-#: avidemux/gtk_gui.cpp:1172
+#: avidemux/gtk_gui.cpp:1179
 msgid "Cannot save the audio in copy mode"
-msgstr "Ne peut pas sauvegarder l'audio en mode copie"
+msgstr "Ne peut pas enregistrer l'audio en mode copie"
 
-#: avidemux/gtk_gui.cpp:1172
+#: avidemux/gtk_gui.cpp:1179
 msgid "Select WAV PCM as the audio codec, otherwise the audio file would be raw PCM."
-msgstr ""
-"Choisissez WAV PCM comme codec audio, autrement le fichier audio sera en raw "
-"PCM."
+msgstr "Choisissez WAV PCM comme codec audio, autrement le fichier audio sera en PCM brut."
 
-#: avidemux/gtk_gui.cpp:1180 avidemux/gtk_gui.cpp:1537
+#: avidemux/gtk_gui.cpp:1187
+#: avidemux/gtk_gui.cpp:1544
 msgid "Saving audio"
-msgstr "Sauve la piste audio"
+msgstr "Enregistre la piste audio"
 
-#: avidemux/gtk_gui.cpp:1257
+#: avidemux/gtk_gui.cpp:1264
 msgid "Get Frame"
 msgstr ""
 
-#: avidemux/gtk_gui.cpp:1257
+#: avidemux/gtk_gui.cpp:1264
 msgid "Cannot get this frame to save"
 msgstr "Ne peut enregistrer l'image"
 
-#: avidemux/gtk_gui.cpp:1294
+#: avidemux/gtk_gui.cpp:1301
 msgid "Mark A > B"
 msgstr "Marque A > B"
 
-#: avidemux/gtk_gui.cpp:1294
+#: avidemux/gtk_gui.cpp:1301
 msgid "Set your markers correctly."
 msgstr "Mettez vos marqueurs correctement."
 
-#: avidemux/gtk_gui.cpp:1303
+#: avidemux/gtk_gui.cpp:1310
 msgid "Saving as set of jpegs"
-msgstr "Sauve comme un jeu de JPEGs"
+msgstr "Enregistre comme un jeu de JPEGs"
 
-#: avidemux/gtk_gui.cpp:1309
+#: avidemux/gtk_gui.cpp:1316
 msgid "Cannot decode frame"
 msgstr "Ne peut d?coder l'image"
 
-#: avidemux/gtk_gui.cpp:1309
+#: avidemux/gtk_gui.cpp:1316
 msgid "Aborting."
 msgstr "Annulation."
 
-#: avidemux/gtk_gui.cpp:1320 avidemux/gtk_gui.cpp:1339
-#: avidemux/gtk_gui.cpp:2271
+#: avidemux/gtk_gui.cpp:1327
+#: avidemux/gtk_gui.cpp:1346
+#: avidemux/gtk_gui.cpp:2278
 msgid "Done"
 msgstr "Fini"
 
-#: avidemux/gtk_gui.cpp:1320
+#: avidemux/gtk_gui.cpp:1327
 #, c-format
 msgid "Saved %d images."
-msgstr "Sauv? %d images."
+msgstr "%d images enregistr?es."
 
-#: avidemux/gtk_gui.cpp:1322
+#: avidemux/gtk_gui.cpp:1329
 msgid "Error"
 msgstr "Erreur"
 
-#: avidemux/gtk_gui.cpp:1322
+#: avidemux/gtk_gui.cpp:1329
 msgid "Could not save all images."
 msgstr "N'a pas pu enregistrer toutes les images"
 
-#: avidemux/gtk_gui.cpp:1339
+#: avidemux/gtk_gui.cpp:1346
 #, c-format
 msgid "Saved \"%s\"."
 msgstr "Enregistr? ??%s??."
 
-#: avidemux/gtk_gui.cpp:1341
+#: avidemux/gtk_gui.cpp:1348
 msgid "BMP op failed"
 msgstr ""
 
-#: avidemux/gtk_gui.cpp:1341
+#: avidemux/gtk_gui.cpp:1348
 #, c-format
 msgid "Saving %s as a BMP file failed."
-msgstr ""
+msgstr "Echec de l'enregistrement de %s comme fichier BMP."
 
-#: avidemux/gtk_gui.cpp:1361 avidemux/gtk_gui.cpp:1427
+#: avidemux/gtk_gui.cpp:1368
+#: avidemux/gtk_gui.cpp:1434
 msgid "Failed to open the file"
 msgstr "Echec d'ouverture de fichier"
 
-#: avidemux/gtk_gui.cpp:1361 avidemux/gtk_gui.cpp:1427
+#: avidemux/gtk_gui.cpp:1368
+#: avidemux/gtk_gui.cpp:1434
 msgid "Not a WAV file?"
 msgstr "Ce n'est pas un fichier WAV??"
 
-#: avidemux/gtk_gui.cpp:1362
+#: avidemux/gtk_gui.cpp:1369
 msgid "WAV open file failed..."
 msgstr "Echec de l'ouverture fichier WAV..."
 
-#: avidemux/gtk_gui.cpp:1491
+#: avidemux/gtk_gui.cpp:1498
 msgid "Cannot decompress audio frame"
 msgstr "Ne peut d?compresser l'image audio"
 
-#: avidemux/gtk_gui.cpp:1505
+#: avidemux/gtk_gui.cpp:1512
 msgid "Memory Error"
 msgstr "Erreur m?moire"
 
-#: avidemux/gtk_gui.cpp:1558
+#: avidemux/gtk_gui.cpp:1565
 msgid "No frames to encode"
 msgstr "Pas d'images ? encoder"
 
-#: avidemux/gtk_gui.cpp:1558
+#: avidemux/gtk_gui.cpp:1565
 msgid "Please check markers. Is \"A>\" == \">B\"?"
-msgstr "V?rifiez les marqueurs. ??A>? == ?>B????"
+msgstr "V?rifiez les marqueurs. ??A> ? == ? >B????"
 
-#: avidemux/gtk_gui.cpp:1697
+#: avidemux/gtk_gui.cpp:1704
 msgid "Saving raw video stream"
-msgstr "Sauver la video brute (flux ?lementaire)"
+msgstr "Enregistrer la video brute (flux ?l?mentaire)"
 
-#: avidemux/gtk_gui.cpp:1843
+#: avidemux/gtk_gui.cpp:1850
 msgid "Checking video"
-msgstr ""
+msgstr "V?rification de la vid?o"
 
-#: avidemux/gtk_gui.cpp:1859
+#: avidemux/gtk_gui.cpp:1866
 msgid "No error found"
 msgstr "Aucune erreur trouv?e"
 
-#: avidemux/gtk_gui.cpp:1863
+#: avidemux/gtk_gui.cpp:1870
 #, c-format
 msgid "Errors found in %u frames"
 msgstr "Erreurs trouv?es dans %u images"
 
-#: avidemux/gtk_gui.cpp:1881
+#: avidemux/gtk_gui.cpp:1888
 msgid "Cannot decompress the audio stream"
 msgstr "Ne peut d?compresser le flux audio"
 
-#: avidemux/gtk_gui.cpp:1881
+#: avidemux/gtk_gui.cpp:1888
 msgid "Switch audio codec to Copy."
 msgstr "Commutez le codec audio en ??Copie??."
 
-#: avidemux/gtk_gui.cpp:1908
+#: avidemux/gtk_gui.cpp:1915
 msgid "Cannot delete the selection."
 msgstr "Ne peut pas effacer la s?lection."
 
-#: avidemux/gtk_gui.cpp:1913
+#: avidemux/gtk_gui.cpp:1920
 msgid "You can't remove all frames"
 msgstr "Vous ne pouvez pas enlever toutes les images"
 
-#: avidemux/gtk_gui.cpp:1989
+#: avidemux/gtk_gui.cpp:1996
 msgid "Could not get tracks info"
 msgstr "Ne pouvait pas obtenir des infos de la piste"
 
-#: avidemux/gtk_gui.cpp:1997
+#: avidemux/gtk_gui.cpp:2004
 msgid "Take audio from video file"
-msgstr "R?cup?rer l'audio venant du fichier vid?o"
+msgstr "R?cup?rer l'audio venant du fichier vid?o"
 
-#: avidemux/gtk_gui.cpp:1998 avidemux/gtk_gui.cpp:2097
+#: avidemux/gtk_gui.cpp:2005
+#: avidemux/gtk_gui.cpp:2104
 msgid "No audio"
 msgstr "Pas d'audio"
 
-#: avidemux/gtk_gui.cpp:1999 avidemux/gtk_gui.cpp:2098
+#: avidemux/gtk_gui.cpp:2006
+#: avidemux/gtk_gui.cpp:2105
 msgid "External AC3"
 msgstr "AC3 externe"
 
-#: avidemux/gtk_gui.cpp:1999 avidemux/gtk_gui.cpp:2098
+#: avidemux/gtk_gui.cpp:2006
+#: avidemux/gtk_gui.cpp:2105
 msgid "Take audio from external AC3 file"
 msgstr "Prendre l'audio d'un fichier AC3 externe"
 
-#: avidemux/gtk_gui.cpp:2000 avidemux/gtk_gui.cpp:2099
+#: avidemux/gtk_gui.cpp:2007
+#: avidemux/gtk_gui.cpp:2106
 msgid "External MP3"
-msgstr "MP3/MP2 externe"
+msgstr "MP3 externe"
 
-#: avidemux/gtk_gui.cpp:2000 avidemux/gtk_gui.cpp:2099
+#: avidemux/gtk_gui.cpp:2007
+#: avidemux/gtk_gui.cpp:2106
 msgid "Take audio from external MP3 file"
-msgstr "Prendre l'audio d'un fichier MP2/MP3 externe"
+msgstr "Prendre l'audio d'un fichier MP3 externe"
 
-#: avidemux/gtk_gui.cpp:2001 avidemux/gtk_gui.cpp:2100
+#: avidemux/gtk_gui.cpp:2008
+#: avidemux/gtk_gui.cpp:2107
 msgid "External WAV"
 msgstr "Wav externe"
 
-#: avidemux/gtk_gui.cpp:2001 avidemux/gtk_gui.cpp:2100
+#: avidemux/gtk_gui.cpp:2008
+#: avidemux/gtk_gui.cpp:2107
 msgid "Take audio from external WAV file"
 msgstr "Prendre l'audio d'un fichier WAV externe"
 
-#: avidemux/gtk_gui.cpp:2005 avidemux/gtk_gui.cpp:2105
+#: avidemux/gtk_gui.cpp:2012
+#: avidemux/gtk_gui.cpp:2112
 msgid "_Audio source:"
-msgstr "Source Audio"
+msgstr "Source _audio :"
 
-#: avidemux/gtk_gui.cpp:2009 avidemux/gtk_gui.cpp:2106
+#: avidemux/gtk_gui.cpp:2016
+#: avidemux/gtk_gui.cpp:2113
 msgid "_External file:"
-msgstr "_Fichier externe"
+msgstr "_Fichier externe :"
 
-#: avidemux/gtk_gui.cpp:2024
+#: avidemux/gtk_gui.cpp:2031
 msgid "_Track from video:"
-msgstr "_Piste de la vid?o:"
+msgstr "_Piste de la vid?o :"
 
-#: avidemux/gtk_gui.cpp:2034
+#: avidemux/gtk_gui.cpp:2041
 msgid "Main Audio Track"
-msgstr "Piste Audio Principale"
+msgstr "Piste audio principale"
 
-#: avidemux/gtk_gui.cpp:2040 avidemux/gtk_gui.cpp:2118
+#: avidemux/gtk_gui.cpp:2047
+#: avidemux/gtk_gui.cpp:2125
 msgid "Cannot load"
 msgstr "Ne peut pas charger"
 
-#: avidemux/gtk_gui.cpp:2040 avidemux/gtk_gui.cpp:2118
+#: avidemux/gtk_gui.cpp:2047
+#: avidemux/gtk_gui.cpp:2125
 msgid "The selected audio file does not exist."
-msgstr "L'audio s?lectionn? n'existe pas"
+msgstr "L'audio s?lectionn? n'existe pas."
 
-#: avidemux/gtk_gui.cpp:2115
+#: avidemux/gtk_gui.cpp:2122
 msgid "Second Audio Track"
 msgstr "Seconde piste audio"
 
-#: avidemux/gtk_gui.cpp:2147
+#: avidemux/gtk_gui.cpp:2154
 msgid "Error loading the MP3 file"
 msgstr "Erreur de chargement de fichier MP3"
 
-#: avidemux/gtk_gui.cpp:2156 avidemux/gtk_gui.cpp:2178
-#: avidemux/gtk_gui.cpp:2200
+#: avidemux/gtk_gui.cpp:2163
+#: avidemux/gtk_gui.cpp:2185
+#: avidemux/gtk_gui.cpp:2207
 msgid "Second track loaded"
 msgstr "Seconde piste charg?e"
 
-#: avidemux/gtk_gui.cpp:2170
+#: avidemux/gtk_gui.cpp:2177
 msgid "Error loading the AC3 file"
 msgstr "Erreur de chargement de fichier AC3"
 
-#: avidemux/gtk_gui.cpp:2192
+#: avidemux/gtk_gui.cpp:2199
 msgid "Error loading the WAV file"
 msgstr "Erreur de chargement de fichier WAV"
 
-#: avidemux/gtk_gui.cpp:2259
+#: avidemux/gtk_gui.cpp:2266
 msgid "Saving failed"
-msgstr "Sauvegarde ?chou?e"
+msgstr "Echec de l'enregistrement"
 
-#: avidemux/gtk_gui.cpp:2259
+#: avidemux/gtk_gui.cpp:2266
 msgid "Saving the job failed. Maybe you have permission issue with ~/.avidemux"
-msgstr ""
-"La sauvegarde des t?ches a ?chou?e. Peut-?tre est ce la permission avec ~/."
-"avidemux"
+msgstr "Echec de l'enregistrement des t?ches. Peut-?tre qu'il des probl?me de permission avec ~/.avidemux"
 
-#: avidemux/gtk_gui.cpp:2271
+#: avidemux/gtk_gui.cpp:2278
 #, c-format
 msgid "File %s has been successfully saved."
 msgstr "Le fichier ??%s?? a ?t? enregistr? avec succ?s."
 
-#: avidemux/gtk_gui.cpp:2275
+#: avidemux/gtk_gui.cpp:2282
 #, c-format
 msgid "File %s was NOT saved correctly."
 msgstr "Le fichier ??%s?? n'a pas ?t? enregistr? correctement."
 
-#: avidemux/gtk_gui.cpp:2438
+#: avidemux/gtk_gui.cpp:2445
 msgid "AvsProxy"
 msgstr "AvsProxy"
 
-#: avidemux/gtk_gui.cpp:2438
+#: avidemux/gtk_gui.cpp:2445
 msgid ""
 "Failed to connect to avsproxy.\n"
 "Is it running ?"
 msgstr ""
+"Echec de connexion ? l'avsproxy.\n"
+"Est il lanc? ?"
 
-#: avidemux/gtk_gui.cpp:2443
+#: avidemux/gtk_gui.cpp:2450
 msgid "avsproxy"
 msgstr "avsproxy"
 
-#: avidemux/gtk_gui.cpp:2471
+#: avidemux/gtk_gui.cpp:2478
 msgid "Frame type:"
-msgstr "Type image:"
+msgstr "Type d'image :"
 
-#: avidemux/gtk_gui.cpp:2472
+#: avidemux/gtk_gui.cpp:2479
 msgid "Frame size:"
-msgstr "Taille image:"
+msgstr "Taille de l'image :"
 
-#: avidemux/gtk_gui.cpp:2474
+#: avidemux/gtk_gui.cpp:2481
 msgid "Frame Hex Dump"
-msgstr ""
+msgstr "Dump hexad?cimal des images"
 
-#: avidemux/guiplay.cpp:361
+#: avidemux/guiplay.cpp:359
 msgid "Trouble initializing audio device"
 msgstr "Ennui en initialisant le dispositif audio"
 
@@ -6917,21 +7890,31 @@
 msgid "An audio track is necessary to create such file"
 msgstr "Une piste est n?cessaire pour cr?er un fichier"
 
-#: avidemux/gui_autodrive.cpp:79
+#: avidemux/gui_autodrive.cpp:63
+msgid "You need Xvid4 and either LAME or FAAC support for the iPod profile"
+msgstr ""
+
+#: avidemux/gui_autodrive.cpp:74
+msgid "Cannot select the MPEG-4 SP codec."
+msgstr "Ne peut pas s?lectionner le codec MPEG4 SP."
+
+#: avidemux/gui_autodrive.cpp:121
 msgid ""
 "You don't have LAME!.\n"
 "It is needed to create FLV  video."
 msgstr ""
+"Vous n'avez pas LAME !\n"
+"C'est n?cessaire pour cr?er des vid?os FLV."
 
-#: avidemux/gui_autodrive.cpp:93
+#: avidemux/gui_autodrive.cpp:135
 msgid "Cannot select FLV1  codec."
-msgstr ""
+msgstr "Impossible de s?lectionner le codec FLV1."
 
-#: avidemux/gui_autodrive.cpp:120
+#: avidemux/gui_autodrive.cpp:162
 msgid "Cannot select mpeg4 sp codec."
-msgstr "Ne peut pas s?lectionner le codec MPEG4 sp."
+msgstr "Ne peut pas s?lectionner le codec MPEG4 SP."
 
-#: avidemux/gui_autodrive.cpp:155
+#: avidemux/gui_autodrive.cpp:197
 msgid ""
 "You don't have FAAC!.\n"
 "It is needed to create PSP compatible video."
@@ -6941,22 +7924,25 @@
 
 #: avidemux/GUI_jobs.cpp:37
 msgid "Something very wrong happened when building joblist."
-msgstr ""
+msgstr "Quelque chose de vraiment mauvais est arriv? lors de la construction de la liste des t?ches."
 
 #: avidemux/GUI_jobs.cpp:42
 msgid "There are no jobs stored"
-msgstr ""
+msgstr "Il n'y a pas de t?ches stock?es"
 
-#: avidemux/gui_navigate.cpp:76 avidemux/gui_navigate.cpp:114
-#: avidemux/gui_navigate.cpp:390 avidemux/gui_navigate.cpp:426
+#: avidemux/gui_navigate.cpp:73
+#: avidemux/gui_navigate.cpp:111
+#: avidemux/gui_navigate.cpp:393
+#: avidemux/gui_navigate.cpp:429
 msgid "Decompressing error"
-msgstr "Erreur d?compression"
+msgstr "Erreur de d?compression"
 
-#: avidemux/gui_navigate.cpp:76
+#: avidemux/gui_navigate.cpp:73
 msgid "Cannot decode next frame."
 msgstr "Ne peut pas d?coder la prochaine image."
 
-#: avidemux/gui_navigate.cpp:114 avidemux/gui_navigate.cpp:426
+#: avidemux/gui_navigate.cpp:111
+#: avidemux/gui_navigate.cpp:429
 msgid "Cannot decode keyframe."
 msgstr "Ne peut pas d?coder l'image-cl?."
 
@@ -6964,11 +7950,11 @@
 msgid "Seeking"
 msgstr "Recherche"
 
-#: avidemux/gui_navigate.cpp:315
+#: avidemux/gui_navigate.cpp:318
 msgid "Finding black frames"
-msgstr ""
+msgstr "Recherche des images noires"
 
-#: avidemux/gui_navigate.cpp:390
+#: avidemux/gui_navigate.cpp:393
 msgid "Cannot decode the frame."
 msgstr "Ne peut pas d?coder l'image."
 
@@ -6980,7 +7966,8 @@
 msgid "Select Copy as the video codec."
 msgstr "S?lectionner ??Copie?? pour le codec vid?o."
 
-#: avidemux/gui_savenew.cpp:207 avidemux/gui_savenew.cpp:223
+#: avidemux/gui_savenew.cpp:207
+#: avidemux/gui_savenew.cpp:223
 #: avidemux/gui_savenew.cpp:236
 msgid "Incompatible output format"
 msgstr "Format de sortie incompatible"
@@ -6997,11 +7984,13 @@
 msgid "Select dual audio AVI to write"
 msgstr "S?lection d'un fichier AVI double audio ? ?crire"
 
-#: avidemux/gui_savenew.cpp:280 avidemux/gui_savenew.cpp:298
+#: avidemux/gui_savenew.cpp:280
+#: avidemux/gui_savenew.cpp:298
 msgid "This cannot have packed VOP"
 msgstr "Ceci n'a pas de VOP empaquet?"
 
-#: avidemux/gui_savenew.cpp:280 avidemux/gui_savenew.cpp:298
+#: avidemux/gui_savenew.cpp:280
+#: avidemux/gui_savenew.cpp:298
 msgid "It is not MPEG-4 video. File will not be saved."
 msgstr "Ce n'est pas une vid?o MPEG4. Le fichier ne sera pas enregistr?."
 
@@ -7013,3 +8002,56 @@
 "Vous pouvez avoir besoin de la copie intelligente.\n"
 "La permettez-vous??"
 
+#~ msgid ""
+#~ ".\n"
+#~ " Did you use too low / too high target for 2 pass ?"
+#~ msgstr ""
+#~ ".\n"
+#~ "Avez vous sp?cifi? une cible trop haute ou trop basse pour le mode 2 "
+#~ "passes ?"
+#~ msgid "Entry input for target file size or bitrate"
+#~ msgstr "Saisir la taille ou le d?bit du fichier cible"
+#~ msgid "Quantizer (0-51):"
+#~ msgstr "Quantificateur (0-51)?:"
+#~ msgid ""
+#~ "Uses chroma (color) components for motion for compression and helps the "
+#~ "quality"
+#~ msgstr ""
+#~ "Utilise les composants chromas (couleur) pour la compression de mouvement "
+#~ "et am?liore la qualit?"
+#~ msgid "Uncheck to enable fast p-skip"
+#~ msgstr "Pas de contr?le de saut P rapide"
+#~ msgid ""
+#~ "Lossless compression method which usually improves the bitrate usage by "
+#~ "15% (especially on high bitrate). Helps the quality a lot but is slower. "
+#~ msgstr ""
+#~ "M?thode de compression sans perte qui am?liore le d?bit de 15% "
+#~ "(particuli?rement pour les d?bits ?lev?s). Am?liore beaucoup la qualit? "
+#~ "mais est plus lent."
+#~ msgid ""
+#~ "Set the amount of blurring to use for block edges when they are found"
+#~ msgstr ""
+#~ "D?finit la valeur de flou ? utiliser pour les bords des blocs trouv?s"
+#~ msgid "Define the level for when deblocking is applied"
+#~ msgstr "D?finit le niveau quand le filtre de d?groupage est appliqu?"
+#~ msgid "<i>Threshold</i>"
+#~ msgstr "<i>Seuil</i>"
+#~ msgid "<i>Strength</i>"
+#~ msgstr "<i>Force</i>"
+#~ msgid "Custom matrix"
+#~ msgstr "Matrice personnalis?e"
+#~ msgid "Two pass, final size"
+#~ msgstr "Deux passes - Taille finale"
+#~ msgid "Two pass, average bitrate"
+#~ msgstr "Deux passes - d?bit moyen"
+#~ msgid "Overwrite file ?"
+#~ msgstr "Ecraser le fichier??"
+
+#, fuzzy
+#~ msgid "Mi_nimum value (will be scaled to 0):"
+#~ msgstr "Valeur mi_nimun (sera transform? ? 0) :"
+
+#, fuzzy
+#~ msgid "Ma_ximum value (will be scaled to 255):"
+#~ msgstr "Valeur ma_ximun (sera transform? ? 255) :"
+



From mean at mail.berlios.de  Sun Mar 30 09:59:19 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 30 Mar 2008 09:59:19 +0200
Subject: [Avidemux-svn-commit] r3947 -
	branches/avidemux_2.4_branch/avidemux/ADM_inputs/ADM_mp4
Message-ID: <200803300759.m2U7xJKs023193@sheep.berlios.de>

Author: mean
Date: 2008-03-30 09:59:18 +0200 (Sun, 30 Mar 2008)
New Revision: 3947

Modified:
   branches/avidemux_2.4_branch/avidemux/ADM_inputs/ADM_mp4/ADM_mp4Analyzer.cpp
Log:
[Mov] Support for mjpegA in mov/mp4

Modified: branches/avidemux_2.4_branch/avidemux/ADM_inputs/ADM_mp4/ADM_mp4Analyzer.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_inputs/ADM_mp4/ADM_mp4Analyzer.cpp	2008-03-29 22:23:47 UTC (rev 3946)
+++ branches/avidemux_2.4_branch/avidemux/ADM_inputs/ADM_mp4/ADM_mp4Analyzer.cpp	2008-03-30 07:59:18 UTC (rev 3947)
@@ -558,6 +558,11 @@
                                         commonPart(MJPB);
                                         left=0;
                                   }
+                                  case MKFCCR('m','j','p','a'):  //mjpegb
+                                 {
+                                       commonPart(MJPG);
+                                       left=0;
+                                 }
                                   break;
                                 case MKFCCR('s','2','6','3'):  //s263 d263
                                   {



From mean at mail.berlios.de  Sun Mar 30 10:00:36 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 30 Mar 2008 10:00:36 +0200
Subject: [Avidemux-svn-commit] r3948 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script
Message-ID: <200803300800.m2U80aWG023467@sheep.berlios.de>

Author: mean
Date: 2008-03-30 10:00:36 +0200 (Sun, 30 Mar 2008)
New Revision: 3948

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSFunctions.cpp
Log:
[Factory] Fix menu testcase


Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSFunctions.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSFunctions.cpp	2008-03-30 07:59:18 UTC (rev 3947)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSFunctions.cpp	2008-03-30 08:00:36 UTC (rev 3948)
@@ -554,7 +554,7 @@
 
 JSBool facMenu(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
 {
-   uint32_t tog=0;
+   uint32_t tog=4;
    
     diaMenuEntry menu[]={
                              {2,   QT_TR_NOOP("No Strategy"),NULL},



From mean at mail.berlios.de  Sun Mar 30 10:00:39 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 30 Mar 2008 10:00:39 +0200
Subject: [Avidemux-svn-commit] r3949 - in
	branches/avidemux_2.5_branch_gruntster/avidemux:
	ADM_coreUI/include ADM_coreUI/src ADM_script
	ADM_userInterfaces/ADM_GTK/ADM_dialogFactory
	ADM_userInterfaces/ADM_NONE/ADM_dialogFactory
	ADM_userInterfaces/ADM_QT4/ADM_dialogFactory
Message-ID: <200803300800.m2U80dSQ023477@sheep.berlios.de>

Author: mean
Date: 2008-03-30 10:00:38 +0200 (Sun, 30 Mar 2008)
New Revision: 3949

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_coreUI_internal.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_factory.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_factory.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSFunctions.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_dialogFactory.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_menu.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_readOnlyText.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialogFactory/FAC_toggle.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_readOnlyText.cpp
Log:
[Factory] Incomplete menu, constify, add linked testcase for menu


Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_coreUI_internal.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_coreUI_internal.h	2008-03-30 08:00:36 UTC (rev 3948)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_coreUI_internal.h	2008-03-30 08:00:38 UTC (rev 3949)
@@ -73,6 +73,13 @@
 // Matrix
 	CREATE_MATRIX_T      *CreateMatrix;
 	DELETE_DIA_ELEM_T    *DestroyMatrix;
+// Menu
+	CREATE_MENU_T        *CreateMenu;
+	DELETE_DIA_ELEM_T    *DestroyMenu;
+// MenuDynamic
+	CREATE_MENUDYNAMIC_T *CreateMenuDynamic;
+	DELETE_DIA_ELEM_T    *DestroyMenuDynamic;
+	
 }FactoryDescriptor;
 //
 uint8_t DIA_factoryInit(FactoryDescriptor *d);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_factory.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_factory.h	2008-03-30 08:00:36 UTC (rev 3948)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_factory.h	2008-03-30 08:00:38 UTC (rev 3949)
@@ -277,6 +277,10 @@
 //*******************************
 // Same but for dynamic menus
 //*******************************
+typedef diaElem  *(CREATE_MENU_T)(uint32_t *intValue,const char *itle, uint32_t nb, 
+        const diaMenuEntry *menu,const char *tip);
+typedef diaElem  *(CREATE_MENUDYNAMIC_T)(uint32_t *intValue,const char *itle, uint32_t nb, 
+         diaMenuEntryDynamic **menu,const char *tip);
 class diaElemMenuDynamic : public diaElem
 {
 diaMenuEntryDynamic **menu;
@@ -291,12 +295,13 @@
   virtual   ~diaElemMenuDynamic() ;
   void      setMe(void *dialog, void *opaque,uint32_t line);
   void      getMe(void);
-  uint8_t   link(diaMenuEntryDynamic *entry,uint32_t onoff,diaElem *w);
-  void      updateMe(void);
-  void      enable(uint32_t onoff) ;
-  void      finalize(void);
+  virtual uint8_t   link(diaMenuEntryDynamic *entry,uint32_t onoff,diaElem *w);
+  virtual void      updateMe(void);
+  virtual void      enable(uint32_t onoff) ;
+  virtual void      finalize(void);
 };
 
+ 
 class diaElemMenu : public diaElem
 {
 const diaMenuEntry  *menu;
@@ -313,8 +318,8 @@
   virtual ~diaElemMenu() ;
   void setMe(void *dialog, void *opaque,uint32_t line);
   void getMe(void);
-  uint8_t   link(diaMenuEntry *entry,uint32_t onoff,diaElem *w);
-  void      updateMe(void);
+  virtual uint8_t   link(diaMenuEntry *entry,uint32_t onoff,diaElem *w);
+  virtual void      updateMe(void);
   void      enable(uint32_t onoff) ;
   void      finalize(void);;
 };
@@ -371,13 +376,13 @@
 };
 /*************************************************/
 /* The text MUST be copied internally ! */
-typedef diaElem *(DIA_CREATE_READONLYTEXT_T )(char *readOnly,const char *toggleTitle, const char *tip);
+typedef diaElem *(DIA_CREATE_READONLYTEXT_T )(const char *readOnly,const char *toggleTitle, const char *tip);
 class diaElemReadOnlyText : public diaElem
 {
 
 public:
   
-  diaElemReadOnlyText(char *readyOnly,const char *toggleTitle,const char *tip=NULL);
+  diaElemReadOnlyText(const char *readyOnly,const char *toggleTitle,const char *tip=NULL);
   virtual ~diaElemReadOnlyText() ;
   void setMe(void *dialog, void *opaque,uint32_t line);
   void getMe(void);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_factory.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_factory.cpp	2008-03-30 08:00:36 UTC (rev 3948)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_factory.cpp	2008-03-30 08:00:38 UTC (rev 3949)
@@ -145,7 +145,7 @@
 
 DIA_MKSTUBS(diaElemNotch)
 // ****************** diaReadonlyText ********************
-diaElemReadOnlyText ::diaElemReadOnlyText(char *readyOnly,const char *toggleTitle,const char *tip):
+diaElemReadOnlyText ::diaElemReadOnlyText(const char *readyOnly,const char *toggleTitle,const char *tip):
 	diaElem(ELEM_ROTEXT)
 {
 	ADM_assert(Factory); 
@@ -217,5 +217,73 @@
 		internalPointer->enable(onoff); 
 	}
 DIA_MKSTUBS(diaElemMatrix)
+// ****************** diaElemMenu ********************
+diaElemMenu ::diaElemMenu(uint32_t *intValue,const char *itle, uint32_t nb, 
+        const diaMenuEntry *menu,const char *tip):
+	diaElem(ELEM_MENU)
+{
+	ADM_assert(Factory); 
+	internalPointer=Factory->CreateMenu(intValue, itle,  nb,  menu,tip);
+}
+diaElemMenu ::~diaElemMenu()
+{
+	ADM_assert(Factory); 
+	Factory->DestroyMenu(internalPointer);
+	internalPointer=NULL;
+}
+void      diaElemMenu::enable(uint32_t onoff)
+	{ 
+		ADM_assert(internalPointer); 
+		internalPointer->enable(onoff); 
+	}
+uint8_t   diaElemMenu::link(diaMenuEntry *entry,uint32_t onoff,diaElem *w)
+{
+	diaElemMenu *cast=(diaElemMenu *)internalPointer;
+	cast->link(entry,onoff,w);
+}
+void      diaElemMenu::updateMe(void)
+{
+	
 
+}
+void   diaElemMenu::finalize(void)
+{
+	internalPointer->finalize();
+}
+DIA_MKSTUBS(diaElemMenu)
+// ****************** diaElemMenuDynamic ********************
+diaElemMenuDynamic ::diaElemMenuDynamic(uint32_t *intValue,const char *itle, uint32_t nb, 
+         diaMenuEntryDynamic **menu,const char *tip):
+	diaElem(ELEM_MENU)
+{
+	ADM_assert(Factory); 
+	internalPointer=Factory->CreateMenuDynamic(intValue, itle,  nb,  menu,tip);
+}
+diaElemMenuDynamic ::~diaElemMenuDynamic()
+{
+	ADM_assert(Factory); 
+	Factory->DestroyMenuDynamic(internalPointer);
+	internalPointer=NULL;
+}
+void      diaElemMenuDynamic::enable(uint32_t onoff)
+	{ 
+		ADM_assert(internalPointer); 
+		internalPointer->enable(onoff); 
+	}
+uint8_t   diaElemMenuDynamic::link(diaMenuEntryDynamic *entry,uint32_t onoff,diaElem *w)
+{
+	diaElemMenuDynamic *cast=(diaElemMenuDynamic *)internalPointer;
+	cast->link(entry,onoff,w);
+}
+void   diaElemMenuDynamic::finalize(void)
+{
+	internalPointer->finalize();
+}
+void      diaElemMenuDynamic::updateMe(void)
+{
+	
+
+}
+
+DIA_MKSTUBS(diaElemMenuDynamic)
 // EOF

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSFunctions.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSFunctions.cpp	2008-03-30 08:00:36 UTC (rev 3948)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSFunctions.cpp	2008-03-30 08:00:38 UTC (rev 3949)
@@ -555,6 +555,7 @@
 JSBool facMenu(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
 {
    uint32_t tog=4;
+   ELEM_TYPE_FLOAT f=1;
    
     diaMenuEntry menu[]={
                              {2,   QT_TR_NOOP("No Strategy"),NULL},
@@ -563,9 +564,13 @@
                              {7,  QT_TR_NOOP("NTSC converted from PAL"),NULL}
                           };
    diaElemMenu blend(&tog,QT_TR_NOOP("menu"),4,menu);
-    diaElem *elems[]={&blend   };
     
-  if(diaFactoryRun("Test Menu",1,elems))
+    // Link it to another
+    diaElemFloat toggle(&f,"Linked float",1,2);
+    blend.link(&(menu[1]),1,&toggle);
+    //
+diaElem *elems[]={&blend,&toggle   };
+  if(diaFactoryRun("Test Menu",2,elems))
   {
     *rval = BOOLEAN_TO_JSVAL(1);
     printf("Value : %u\n",tog);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_dialogFactory.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_dialogFactory.cpp	2008-03-30 08:00:36 UTC (rev 3948)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_dialogFactory.cpp	2008-03-30 08:00:38 UTC (rev 3949)
@@ -313,6 +313,10 @@
 extern DELETE_DIA_ELEM_T   gtkDestroyHex;
 extern CREATE_MATRIX_T     gtkCreateMatrix;
 extern DELETE_DIA_ELEM_T   gtkDestroyMatrix;
+extern CREATE_MENUDYNAMIC_T     gtkCreateMenuDynamic;
+extern CREATE_MENU_T     gtkCreateMenu;
+extern DELETE_DIA_ELEM_T   gtkDestroyMenu;
+extern DELETE_DIA_ELEM_T   gtkDestroyMenuDynamic;
 //************
 static FactoryDescriptor GtkFactoryDescriptor=
 {
@@ -347,8 +351,13 @@
 	&gtkDestroyHex,
 	// Matrix
 	&gtkCreateMatrix,
-	&gtkDestroyMatrix
-	
+	&gtkDestroyMatrix,
+	// Menu
+	&gtkCreateMenu,
+	&gtkDestroyMenu,
+	&gtkCreateMenuDynamic,
+	&gtkDestroyMenuDynamic,
+		
 };
 
 /**

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_menu.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_menu.cpp	2008-03-30 08:00:36 UTC (rev 3948)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_menu.cpp	2008-03-30 08:00:38 UTC (rev 3949)
@@ -15,10 +15,56 @@
 
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
 #include "DIA_factory.h"
-
+namespace ADM_GtkFactory
+{
 static void cb_menu(void *w,void *p);
 static void cb_menus(void *w,void *p);
 
+
+class diaElemMenuDynamic : public diaElem
+{
+protected:
+	diaMenuEntryDynamic **menu;
+	uint32_t            nbMenu;
+	dialElemLink        links[MENU_MAX_lINK];
+	uint32_t            nbLink;
+
+public:
+  diaElemMenuDynamic(uint32_t *intValue,const char *itle, uint32_t nb, 
+               diaMenuEntryDynamic **menu,const char *tip=NULL);
+  
+  virtual   ~diaElemMenuDynamic() ;
+  void      setMe(void *dialog, void *opaque,uint32_t line);
+  void      getMe(void);
+  virtual uint8_t   link(diaMenuEntryDynamic *entry,uint32_t onoff,diaElem *w);
+  virtual void      updateMe(void);
+  virtual void      enable(uint32_t onoff) ;
+  virtual void      finalize(void);
+};
+//**********************
+class diaElemMenu : public diaElem
+{
+protected:
+	const diaMenuEntry  *menu;
+	uint32_t            nbMenu;
+	dialElemLink        links[MENU_MAX_lINK];
+	uint32_t            nbLink;
+
+	diaElemMenuDynamic  *dyna;
+	diaMenuEntryDynamic  **menus;	
+public:
+  diaElemMenu(uint32_t *intValue,const char *itle, uint32_t nb, 
+               const diaMenuEntry *menu,const char *tip=NULL);
+  
+  virtual ~diaElemMenu() ;
+  void setMe(void *dialog, void *opaque,uint32_t line);
+  void getMe(void);
+  virtual uint8_t   link(diaMenuEntry *entry,uint32_t onoff,diaElem *w);
+  virtual void      updateMe(void);
+  void      enable(uint32_t onoff) ;
+  void      finalize(void);;
+};
+//**********************
 diaElemMenu::diaElemMenu(uint32_t *intValue,const char *itle, uint32_t nb, 
                const diaMenuEntry *menu,const char *tip)
   : diaElem(ELEM_MENU)
@@ -220,5 +266,27 @@
   diaElemMenu *me=(diaElemMenu *)p;
   me->updateMe();
 }
+//********************
+}; // End of namespace
 
+diaElem  *gtkCreateMenu(uint32_t *intValue,const char *itle, uint32_t nb,         const diaMenuEntry *menu,const char *tip)
+{
+	return new  ADM_GtkFactory::diaElemMenu(intValue,itle,nb,menu,tip);
+}
+void gtkDestroyMenu(diaElem *e)
+{
+	ADM_GtkFactory::diaElemMenu *a=(ADM_GtkFactory::diaElemMenu *)e;
+	delete a;
+}
+diaElem  *gtkCreateMenuDynamic(uint32_t *intValue,const char *itle, uint32_t nb, 
+        diaMenuEntryDynamic **menu,const char *tipp)
+{
+	return new  ADM_GtkFactory::diaElemMenuDynamic(intValue,itle,nb,menu,tipp);
+}
+void gtkDestroyMenuDynamic(diaElem *e)
+{
+	ADM_GtkFactory::diaElemMenuDynamic *a=(ADM_GtkFactory::diaElemMenuDynamic *)e;
+	delete a;
+}
+
 //EOF

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_readOnlyText.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_readOnlyText.cpp	2008-03-30 08:00:36 UTC (rev 3948)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_readOnlyText.cpp	2008-03-30 08:00:38 UTC (rev 3949)
@@ -23,7 +23,7 @@
 
 public:
   
-  diaElemReadOnlyText(char *readyOnly,const char *toggleTitle,const char *tip=NULL);
+  diaElemReadOnlyText(const char *readyOnly,const char *toggleTitle,const char *tip=NULL);
   virtual ~diaElemReadOnlyText() ;
   void setMe(void *dialog, void *opaque,uint32_t line);
   void getMe(void);
@@ -43,7 +43,7 @@
 };
 
 
-diaElemReadOnlyText::diaElemReadOnlyText(char *readyOnly,const char *toggleTitle,const char *tip)
+diaElemReadOnlyText::diaElemReadOnlyText(const char *readyOnly,const char *toggleTitle,const char *tip)
   : diaElem(ELEM_ROTEXT)
 {
   param=(void *)ADM_strdup(readyOnly);
@@ -149,7 +149,7 @@
 } // End of namespace
 //****************************Hoook*****************
 
-diaElem  *gtkCreateRoText(char *text,const char *toggleTitle, const char *tip)
+diaElem  *gtkCreateRoText(const char *text,const char *toggleTitle, const char *tip)
 {
 	return new  ADM_GtkFactory::diaElemReadOnlyText(text,toggleTitle,tip);
 }

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialogFactory/FAC_toggle.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialogFactory/FAC_toggle.cpp	2008-03-30 08:00:36 UTC (rev 3948)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialogFactory/FAC_toggle.cpp	2008-03-30 08:00:38 UTC (rev 3949)
@@ -207,7 +207,7 @@
  
 }
 //******************************************************
-diaElemReadOnlyText::diaElemReadOnlyText(char *readyOnly,const char *toggleTitle,const char *tip)
+diaElemReadOnlyText::diaElemReadOnlyText(const char *readyOnly,const char *toggleTitle,const char *tip)
   : diaElem(ELEM_ROTEXT)
 {
  
@@ -267,6 +267,10 @@
 diaElemMenuDynamic::~diaElemMenuDynamic()
 { 
 }
+void      diaElemMenuDynamic::updateMe(void)
+{
+
+}
 void diaElemMenuDynamic::setMe(void *dialog, void *opaque,uint32_t line)
 {
 }

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_readOnlyText.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_readOnlyText.cpp	2008-03-30 08:00:36 UTC (rev 3948)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_readOnlyText.cpp	2008-03-30 08:00:38 UTC (rev 3949)
@@ -37,7 +37,7 @@
 
 
 //********************************************************************
-diaElemReadOnlyText::diaElemReadOnlyText(char *readyOnly,const char *toggleTitle,const char *tip)
+diaElemReadOnlyText::diaElemReadOnlyText(const char *readyOnly,const char *toggleTitle,const char *tip)
   : diaElem(ELEM_TOGGLE)
 {
   param=(void *)ADM_strdup(readyOnly);



From mean at mail.berlios.de  Sun Mar 30 10:00:50 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 30 Mar 2008 10:00:50 +0200
Subject: [Avidemux-svn-commit] r3950 - in
	branches/avidemux_2.5_branch_gruntster:
	autononreg/dialogFactory avidemux/ADM_coreUI/include
	avidemux/ADM_coreUI/src avidemux/ADM_script
	avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory
Message-ID: <200803300800.m2U80oR1023521@sheep.berlios.de>

Author: mean
Date: 2008-03-30 10:00:50 +0200 (Sun, 30 Mar 2008)
New Revision: 3950

Added:
   branches/avidemux_2.5_branch_gruntster/autononreg/dialogFactory/threadcount.js
Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_coreUI_internal.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_factory.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_factory.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSFunctions.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_dialogFactory.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_threadCount.cpp
Log:
[Factory] Threadcount + testcase


Added: branches/avidemux_2.5_branch_gruntster/autononreg/dialogFactory/threadcount.js
===================================================================
--- branches/avidemux_2.5_branch_gruntster/autononreg/dialogFactory/threadcount.js	2008-03-30 08:00:38 UTC (rev 3949)
+++ branches/avidemux_2.5_branch_gruntster/autononreg/dialogFactory/threadcount.js	2008-03-30 08:00:50 UTC (rev 3950)
@@ -0,0 +1,10 @@
+//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
+var app = new Avidemux();
+var file="/work/samples/2mn.avi";
+var goodfcc="DIV3";
+var fps;
+
+	dialogFactoryThreadCount();
+
+/* End of test
+*/

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_coreUI_internal.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_coreUI_internal.h	2008-03-30 08:00:38 UTC (rev 3949)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_coreUI_internal.h	2008-03-30 08:00:50 UTC (rev 3950)
@@ -59,16 +59,16 @@
 	CREATE_UINTEGER_T    *CreateUInteger;
 	DELETE_DIA_ELEM_T    *DestroyUInteger;
 // Notch	
-	DIA_CREATE_NOTCH_T   *CreateNotch;
+	CREATE_NOTCH_T   *CreateNotch;
 	DELETE_DIA_ELEM_T    *DestroyNotch;
 // ReadonlyText
-	DIA_CREATE_READONLYTEXT_T *CreateReadonlyText;
+	CREATE_READONLYTEXT_T *CreateReadonlyText;
 	DELETE_DIA_ELEM_T    *DestroyReadonlyText;
 // Text
-	DIA_CREATE_TEXT_T    *CreateText;
+	CREATE_TEXT_T    *CreateText;
 	DELETE_DIA_ELEM_T    *DestroyText;
 // Hex
-	DIA_CREATE_HEX_T     *CreateHex;
+	CREATE_HEX_T     *CreateHex;
 	DELETE_DIA_ELEM_T    *DestroyHex;
 // Matrix
 	CREATE_MATRIX_T      *CreateMatrix;
@@ -79,7 +79,9 @@
 // MenuDynamic
 	CREATE_MENUDYNAMIC_T *CreateMenuDynamic;
 	DELETE_DIA_ELEM_T    *DestroyMenuDynamic;
-	
+// ThreadCount
+	CREATE_THREADCOUNT_T *CreateThreadCount;
+	DELETE_DIA_ELEM_T    *DestroyThreadCount;
 }FactoryDescriptor;
 //
 uint8_t DIA_factoryInit(FactoryDescriptor *d);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_factory.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_factory.h	2008-03-30 08:00:38 UTC (rev 3949)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_factory.h	2008-03-30 08:00:50 UTC (rev 3950)
@@ -376,7 +376,7 @@
 };
 /*************************************************/
 /* The text MUST be copied internally ! */
-typedef diaElem *(DIA_CREATE_READONLYTEXT_T )(const char *readOnly,const char *toggleTitle, const char *tip);
+typedef diaElem *(CREATE_READONLYTEXT_T )(const char *readOnly,const char *toggleTitle, const char *tip);
 class diaElemReadOnlyText : public diaElem
 {
 
@@ -389,7 +389,7 @@
   
 };
 /*************************************************/
-typedef diaElem *(DIA_CREATE_TEXT_T )(char **readOnly,const char *toggleTitle, const char *tip);
+typedef diaElem *(CREATE_TEXT_T )(char **readOnly,const char *toggleTitle, const char *tip);
 /* The text MUST be copied internally ! */
 class diaElemText : public diaElem
 {
@@ -404,7 +404,7 @@
 };
 
 /*********************************************/
-typedef diaElem *(DIA_CREATE_NOTCH_T )(uint32_t yes,const char *toggleTitle, const char *tip);
+typedef diaElem *(CREATE_NOTCH_T )(uint32_t yes,const char *toggleTitle, const char *tip);
 class diaElemNotch : public diaElem
 {
   uint32_t yesno;
@@ -452,7 +452,7 @@
   void finalize(void);
 };
 /**********************************************/
-typedef diaElem *(DIA_CREATE_HEX_T )(const char *toggleTitle, uint32_t dataSize,uint8_t *data);
+typedef diaElem *(CREATE_HEX_T )(const char *toggleTitle, uint32_t dataSize,uint8_t *data);
 class diaElemHex : public diaElem
 {
   uint32_t dataSize;
@@ -467,6 +467,7 @@
   void finalize(void);
 };
 /**********************************************/
+typedef diaElem *(CREATE_THREADCOUNT_T)(uint32_t *value, const char *title, const char *tip = NULL);
 class diaElemThreadCount : public diaElem
 {
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_factory.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_factory.cpp	2008-03-30 08:00:38 UTC (rev 3949)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_factory.cpp	2008-03-30 08:00:50 UTC (rev 3950)
@@ -286,4 +286,20 @@
 }
 
 DIA_MKSTUBS(diaElemMenuDynamic)
+// ****************** diaElemMatrix ********************
+diaElemThreadCount ::diaElemThreadCount(uint32_t *value, const char *title, const char *tip):
+	diaElem(ELEM_THREAD_COUNT)
+{
+	ADM_assert(Factory); 
+	internalPointer=Factory->CreateThreadCount(value,title,tip);
+}
+diaElemThreadCount ::~diaElemThreadCount()
+{
+	ADM_assert(Factory); 
+	Factory->DestroyThreadCount(internalPointer);
+	internalPointer=NULL;
+}
+DIA_MKSTUBS(diaElemThreadCount)
+
+
 // EOF

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSFunctions.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSFunctions.cpp	2008-03-30 08:00:38 UTC (rev 3949)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSFunctions.cpp	2008-03-30 08:00:50 UTC (rev 3950)
@@ -83,6 +83,7 @@
 JSBool facButton(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
 JSBool facMatrix(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
 JSBool facNotch(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
+JSBool facThreadCount(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
 JSBool facSlider(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
 JSBool crashTest(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
 JSBool assertTest(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
@@ -120,6 +121,7 @@
   {"dialogFactorySlider",       facSlider,        0},
   {"dialogFactoryMatrix",       facMatrix,        0},
   {"dialogFactoryNotch",       facNotch,		  0},
+  {"dialogFactoryThreadCount", facThreadCount,		  0},
   {"crashTest",               crashTest,          0},
   {"assertTest",               assertTest,        0},
   {0}
@@ -827,6 +829,22 @@
       
       
 }
+JSBool facThreadCount(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
+{
+	uint32_t val=1;
+	diaElemThreadCount threadcount(&val,"ThreadCount");
+      
+    diaElem *elems[]={&threadcount   };
+    
+  if(diaFactoryRun("Test ThreadCount",1,elems))
+  {
+    *rval = BOOLEAN_TO_JSVAL(1);
+    
+  }else
+    *rval = BOOLEAN_TO_JSVAL(0);
+  return JS_TRUE;
+      
+}
 JSBool facNotch(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
 {
     

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_dialogFactory.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_dialogFactory.cpp	2008-03-30 08:00:38 UTC (rev 3949)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_dialogFactory.cpp	2008-03-30 08:00:50 UTC (rev 3950)
@@ -299,24 +299,26 @@
 extern void     gtkDeleteBar(diaElem *e);
 extern diaElem  *gtkCreateFloat(ELEM_TYPE_FLOAT *intValue,const char *toggleTitle, ELEM_TYPE_FLOAT min, ELEM_TYPE_FLOAT max,const char *tip);
 extern void     gtkDeleteFloat(diaElem *e);
-extern CREATE_INTEGER_T gtkCreateInteger;
+extern CREATE_INTEGER_T  gtkCreateInteger;
 extern CREATE_UINTEGER_T gtkCreateUInteger;
 extern DELETE_DIA_ELEM_T gtkDestroyInteger;
 extern DELETE_DIA_ELEM_T gtkDestroyUInteger;
-extern DIA_CREATE_NOTCH_T  gtkCreateNotch;
+extern CREATE_NOTCH_T    gtkCreateNotch;
 extern DELETE_DIA_ELEM_T   gtkDestroyNotch;
-extern DIA_CREATE_READONLYTEXT_T gtkCreateRoText;
-extern DIA_CREATE_TEXT_T gtkCreateText;
+extern CREATE_READONLYTEXT_T gtkCreateRoText;
+extern CREATE_TEXT_T gtkCreateText;
 extern DELETE_DIA_ELEM_T   gtkDestroyRoText;
 extern DELETE_DIA_ELEM_T   gtkDestroyText;
-extern DIA_CREATE_HEX_T    gtkCreateHex;
+extern CREATE_HEX_T        gtkCreateHex;
 extern DELETE_DIA_ELEM_T   gtkDestroyHex;
 extern CREATE_MATRIX_T     gtkCreateMatrix;
 extern DELETE_DIA_ELEM_T   gtkDestroyMatrix;
 extern CREATE_MENUDYNAMIC_T     gtkCreateMenuDynamic;
-extern CREATE_MENU_T     gtkCreateMenu;
+extern CREATE_MENU_T       gtkCreateMenu;
 extern DELETE_DIA_ELEM_T   gtkDestroyMenu;
 extern DELETE_DIA_ELEM_T   gtkDestroyMenuDynamic;
+extern CREATE_THREADCOUNT_T gtkCreateThreadCount;
+extern DELETE_DIA_ELEM_T    gtkDestroyThreadCount;
 //************
 static FactoryDescriptor GtkFactoryDescriptor=
 {
@@ -357,6 +359,9 @@
 	&gtkDestroyMenu,
 	&gtkCreateMenuDynamic,
 	&gtkDestroyMenuDynamic,
+	// ThreadCount
+	&gtkCreateThreadCount,
+	&gtkDestroyThreadCount
 		
 };
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_threadCount.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_threadCount.cpp	2008-03-30 08:00:38 UTC (rev 3949)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_threadCount.cpp	2008-03-30 08:00:50 UTC (rev 3950)
@@ -16,6 +16,21 @@
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
 #include "DIA_factory.h"
 
+
+namespace ADM_GtkFactory
+{
+
+class diaElemThreadCount : public diaElem
+{
+
+public:
+  
+  diaElemThreadCount(uint32_t *value, const char *title, const char *tip = NULL);
+  virtual ~diaElemThreadCount() ;
+  void setMe(void *dialog, void *opaque, uint32_t line);
+  void getMe(void);
+};
+
 static void customToggled(void *widget, void *userData);
 
 diaElemThreadCount::diaElemThreadCount(uint32_t *value, const char *title, const char *tip) : diaElem(ELEM_THREAD_COUNT)
@@ -129,5 +144,14 @@
 
 	gtk_widget_set_sensitive(GTK_WIDGET(widgets[3]), gtk_toggle_button_get_active(GTK_TOGGLE_BUTTON(widgets[2])));
 }
-
+} // End of namesapce
+diaElem  *gtkCreateThreadCount(uint32_t *value, const char *title, const char *tip)
+{
+	return new  ADM_GtkFactory::diaElemThreadCount(value,title,tip);
+}
+void gtkDestroyThreadCount(diaElem *e)
+{
+	ADM_GtkFactory::diaElemThreadCount *a=(ADM_GtkFactory::diaElemThreadCount *)e;
+	delete a;
+}
 //EOF



From mean at mail.berlios.de  Sun Mar 30 10:00:53 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 30 Mar 2008 10:00:53 +0200
Subject: [Avidemux-svn-commit] r3951 - in
	branches/avidemux_2.5_branch_gruntster/avidemux:
	ADM_coreUI/include ADM_coreUI/src
	ADM_userInterfaces/ADM_GTK/ADM_dialogFactory
Message-ID: <200803300800.m2U80rNh023550@sheep.berlios.de>

Author: mean
Date: 2008-03-30 10:00:52 +0200 (Sun, 30 Mar 2008)
New Revision: 3951

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_coreUI_internal.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_factory.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_factory.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_dialogFactory.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp
Log:
[Factory] Bitrate


Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_coreUI_internal.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_coreUI_internal.h	2008-03-30 08:00:50 UTC (rev 3950)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_coreUI_internal.h	2008-03-30 08:00:52 UTC (rev 3951)
@@ -82,6 +82,9 @@
 // ThreadCount
 	CREATE_THREADCOUNT_T *CreateThreadCount;
 	DELETE_DIA_ELEM_T    *DestroyThreadCount;
+// Bitrate
+	CREATE_BITRATE_T     *CreateBitrate;
+	DELETE_DIA_ELEM_T    *DestroyBitrate;
 }FactoryDescriptor;
 //
 uint8_t DIA_factoryInit(FactoryDescriptor *d);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_factory.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_factory.h	2008-03-30 08:00:50 UTC (rev 3950)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_factory.h	2008-03-30 08:00:52 UTC (rev 3951)
@@ -326,7 +326,7 @@
 
 /*************************************************/
 #include "ADM_encoder/ADM_vidEncode.hxx"
-
+typedef diaElem  *(CREATE_BITRATE_T)(COMPRES_PARAMS *p,const char *toggleTitle,const char *tip);
 class diaElemBitrate : public diaElem
 {
   protected:

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_factory.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_factory.cpp	2008-03-30 08:00:50 UTC (rev 3950)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_factory.cpp	2008-03-30 08:00:52 UTC (rev 3951)
@@ -301,5 +301,31 @@
 }
 DIA_MKSTUBS(diaElemThreadCount)
 
+// ****************** diaElemBitrate ********************
+diaElemBitrate ::diaElemBitrate(COMPRES_PARAMS *p,const char *toggleTitle,const char *tip):
+	diaElem(ELEM_BITRATE)
+{
+	ADM_assert(Factory); 
+	internalPointer=Factory->CreateBitrate(p,toggleTitle,tip);
+}
+diaElemBitrate ::~diaElemBitrate()
+{
+	ADM_assert(Factory); 
+	Factory->DestroyBitrate(internalPointer);
+	internalPointer=NULL;
+}
+void diaElemBitrate::updateMe()
+{
+	
+}
+void diaElemBitrate::setMaxQz(uint32_t qz)
+{
+	diaElemBitrate *cast=(diaElemBitrate *)internalPointer;
+		cast->setMaxQz(qz);
+	
+}
+DIA_MKSTUBS(diaElemBitrate)
 
+//
+
 // EOF

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_dialogFactory.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_dialogFactory.cpp	2008-03-30 08:00:50 UTC (rev 3950)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_dialogFactory.cpp	2008-03-30 08:00:52 UTC (rev 3951)
@@ -319,6 +319,8 @@
 extern DELETE_DIA_ELEM_T   gtkDestroyMenuDynamic;
 extern CREATE_THREADCOUNT_T gtkCreateThreadCount;
 extern DELETE_DIA_ELEM_T    gtkDestroyThreadCount;
+extern CREATE_BITRATE_T     gtkCreateBitrate;
+extern DELETE_DIA_ELEM_T    gtkDestroyBitrate;
 //************
 static FactoryDescriptor GtkFactoryDescriptor=
 {
@@ -361,7 +363,10 @@
 	&gtkDestroyMenuDynamic,
 	// ThreadCount
 	&gtkCreateThreadCount,
-	&gtkDestroyThreadCount
+	&gtkDestroyThreadCount,
+	// Bitrate
+	&gtkCreateBitrate,
+	&gtkDestroyBitrate
 		
 };
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp	2008-03-30 08:00:50 UTC (rev 3950)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp	2008-03-30 08:00:52 UTC (rev 3951)
@@ -15,8 +15,24 @@
 
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
 #include "DIA_factory.h"
+namespace ADM_GtkFactory
+{
+class diaElemBitrate : public diaElem
+{
+  protected:
+    COMPRES_PARAMS    copy;
+    uint32_t maxQ;
+public:
+  
+  diaElemBitrate(COMPRES_PARAMS *p,const char *toggleTitle,const char *tip=NULL);
+  virtual ~diaElemBitrate() ;
+  void setMe(void *dialog, void *opaque,uint32_t line);
+  void getMe(void);
+  void setMaxQz(uint32_t qz);
+  
+  void updateMe(void);
+};
 
-
 static void cb_mod(void *w,void *p);
 /**
  * 	\fn 	readPullDown
@@ -293,5 +309,16 @@
   me->updateMe();
 }
 
+} // End of namespace
+//****************************Hoook*****************
 
+diaElem  *gtkCreateBitrate(COMPRES_PARAMS *p,const char *toggleTitle,const char *tip)
+{
+	return new  ADM_GtkFactory::diaElemBitrate(p,toggleTitle,tip);
+}
+void gtkDestroyBitrate(diaElem *e)
+{
+	ADM_GtkFactory::diaElemBitrate *a=(ADM_GtkFactory::diaElemBitrate *)e;
+	delete a;
+}
 //EOF



From mean at mail.berlios.de  Sun Mar 30 10:00:55 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 30 Mar 2008 10:00:55 +0200
Subject: [Avidemux-svn-commit] r3952 - in
	branches/avidemux_2.5_branch_gruntster/avidemux:
	ADM_coreUI/include ADM_coreUI/src
	ADM_userInterfaces/ADM_GTK/ADM_dialogFactory
Message-ID: <200803300800.m2U80ti0023562@sheep.berlios.de>

Author: mean
Date: 2008-03-30 10:00:55 +0200 (Sun, 30 Mar 2008)
New Revision: 3952

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_coreUI_internal.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_factory.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_factory.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_dialogFactory.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_filesel.cpp
Log:
[Factory] file & dir


Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_coreUI_internal.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_coreUI_internal.h	2008-03-30 08:00:52 UTC (rev 3951)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_coreUI_internal.h	2008-03-30 08:00:55 UTC (rev 3952)
@@ -59,16 +59,16 @@
 	CREATE_UINTEGER_T    *CreateUInteger;
 	DELETE_DIA_ELEM_T    *DestroyUInteger;
 // Notch	
-	CREATE_NOTCH_T   *CreateNotch;
+	CREATE_NOTCH_T       *CreateNotch;
 	DELETE_DIA_ELEM_T    *DestroyNotch;
 // ReadonlyText
 	CREATE_READONLYTEXT_T *CreateReadonlyText;
-	DELETE_DIA_ELEM_T    *DestroyReadonlyText;
+	DELETE_DIA_ELEM_T     *DestroyReadonlyText;
 // Text
-	CREATE_TEXT_T    *CreateText;
+	CREATE_TEXT_T        *CreateText;
 	DELETE_DIA_ELEM_T    *DestroyText;
 // Hex
-	CREATE_HEX_T     *CreateHex;
+	CREATE_HEX_T         *CreateHex;
 	DELETE_DIA_ELEM_T    *DestroyHex;
 // Matrix
 	CREATE_MATRIX_T      *CreateMatrix;
@@ -85,6 +85,12 @@
 // Bitrate
 	CREATE_BITRATE_T     *CreateBitrate;
 	DELETE_DIA_ELEM_T    *DestroyBitrate;
+// File
+	CREATE_FILE_T        *CreateFile;
+	DELETE_DIA_ELEM_T    *DestroyFile;
+// Dir
+	CREATE_DIR_T         *CreateDir;
+	DELETE_DIA_ELEM_T    *DestroyDir;
 }FactoryDescriptor;
 //
 uint8_t DIA_factoryInit(FactoryDescriptor *d);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_factory.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_factory.h	2008-03-30 08:00:52 UTC (rev 3951)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_factory.h	2008-03-30 08:00:55 UTC (rev 3952)
@@ -344,6 +344,7 @@
 };
 
 /*************************************************/
+typedef diaElem *CREATE_FILE_T(uint32_t writeMode,char **filename,const char *toggleTitle,  const char *defaultSuffix ,const char *tip);
 class diaElemFile : public diaElem
 {
 
@@ -361,6 +362,7 @@
   void   enable(uint32_t onoff);
 };
 /*************************************************/
+typedef diaElem *CREATE_DIR_T(char **filename,const char *toggleTitle,const char *tip);
 class diaElemDirSelect : public diaElem
 {
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_factory.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_factory.cpp	2008-03-30 08:00:52 UTC (rev 3951)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_factory.cpp	2008-03-30 08:00:55 UTC (rev 3952)
@@ -4,6 +4,10 @@
   Check the GTK/QT/.. functions to see the intersting parts
   (C) Mean 2008 fixounet at free.fr
 
+/!\ Big Warning, each time there is a cast, it is a gross hack and needs to be fixed
+ later by using proper inheritance. It is very dangerous as it is.
+
+
  ***************************************************************************/
 
 /***************************************************************************
@@ -325,7 +329,55 @@
 	
 }
 DIA_MKSTUBS(diaElemBitrate)
+// ****************** diaElemFile ********************
+diaElemFile ::diaElemFile(uint32_t writeMode,char **filename,const char *toggleTitle,
+        const char *defaultSuffix ,const char *tip):
+	diaElem(ELEM_FILE_READ)
+{
+	ADM_assert(Factory); 
+	internalPointer=Factory->CreateFile(writeMode,filename,toggleTitle,defaultSuffix,tip);
+}
+diaElemFile ::~diaElemFile()
+{
+	ADM_assert(Factory); 
+	Factory->DestroyBitrate(internalPointer);
+	internalPointer=NULL;
+}
+void      diaElemFile::enable(uint32_t onoff)
+	{ 
+		ADM_assert(internalPointer); 
+		internalPointer->enable(onoff); 
+	}
+void      diaElemFile::changeFile(void)
+	{ 
+	diaElemFile *cast=(diaElemFile *)internalPointer;
+	cast->changeFile();
+	}
+DIA_MKSTUBS(diaElemFile)
 
-//
+// ****************** diaElemDirSelect ********************
+diaElemDirSelect ::diaElemDirSelect(char **filename,const char *toggleTitle,const char *tip):
+	diaElem(ELEM_DIR_SELECT)
+{
+	ADM_assert(Factory); 
+	internalPointer=Factory->CreateDir( filename, toggleTitle, tip);
+}
+diaElemDirSelect ::~diaElemDirSelect()
+{
+	ADM_assert(Factory); 
+	Factory->DestroyBitrate(internalPointer);
+	internalPointer=NULL;
+}
+void      diaElemDirSelect::enable(uint32_t onoff)
+	{ 
+		ADM_assert(internalPointer); 
+		internalPointer->enable(onoff); 
+	}
+void      diaElemDirSelect::changeFile(void)
+	{ 
+	diaElemDirSelect *cast=(diaElemDirSelect *)internalPointer;
+	cast->changeFile();
+	}
+DIA_MKSTUBS(diaElemDirSelect)
 
 // EOF

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_dialogFactory.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_dialogFactory.cpp	2008-03-30 08:00:52 UTC (rev 3951)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_dialogFactory.cpp	2008-03-30 08:00:55 UTC (rev 3952)
@@ -321,6 +321,12 @@
 extern DELETE_DIA_ELEM_T    gtkDestroyThreadCount;
 extern CREATE_BITRATE_T     gtkCreateBitrate;
 extern DELETE_DIA_ELEM_T    gtkDestroyBitrate;
+extern CREATE_FILE_T        gtkCreateFile;
+extern DELETE_DIA_ELEM_T    gtkDestroyFile;
+extern CREATE_DIR_T         gtkCreateDir;
+extern DELETE_DIA_ELEM_T    gtkDestroyDir;
+
+
 //************
 static FactoryDescriptor GtkFactoryDescriptor=
 {
@@ -366,7 +372,13 @@
 	&gtkDestroyThreadCount,
 	// Bitrate
 	&gtkCreateBitrate,
-	&gtkDestroyBitrate
+	&gtkDestroyBitrate,
+	// File
+	&gtkCreateFile,
+	&gtkDestroyFile,
+	// Dir
+	&gtkCreateDir,
+	&gtkDestroyDir
 		
 };
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_filesel.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_filesel.cpp	2008-03-30 08:00:52 UTC (rev 3951)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_filesel.cpp	2008-03-30 08:00:55 UTC (rev 3952)
@@ -15,7 +15,38 @@
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
 #include "DIA_factory.h"
 #include "DIA_fileSel.h"
+#include "prefs.h"
+namespace ADM_GtkFactory
+{
+class diaElemFile : public diaElem
+{
 
+protected:
+    const char * defaultSuffix;
+public:
+  
+  diaElemFile(uint32_t writeMode,char **filename,const char *toggleTitle,
+              const char *defaultSuffix = 0,const char *tip=NULL);
+  virtual ~diaElemFile() ;
+  void setMe(void *dialog, void *opaque,uint32_t line);
+  void getMe(void);
+  uint32_t _write;
+  void   changeFile(void);
+  void   enable(uint32_t onoff);
+};
+class diaElemDirSelect : public diaElem
+{
+
+public:
+  
+  diaElemDirSelect(char **filename,const char *toggleTitle,const char *tip=NULL);
+  virtual ~diaElemDirSelect() ;
+  void setMe(void *dialog, void *opaque,uint32_t line);
+  void getMe(void);
+  
+  void changeFile(void);
+  void   enable(uint32_t onoff);
+};
 static void fileRead(void *w,void *p);
 static void dirSel(void *w,void *p);
 
@@ -305,5 +336,27 @@
   diaElemDirSelect *me=(diaElemDirSelect *)p;
   me->changeFile();
 }
+} // End of namespace
+//****************************Hoook*****************
 
+diaElem  *gtkCreateFile(uint32_t writeMode,char **filename,const char *toggleTitle,
+        const char *defaultSuffix ,const char *tip)
+{
+	return new  ADM_GtkFactory::diaElemFile(writeMode,filename,toggleTitle,defaultSuffix ,tip);
+}
+void gtkDestroyFile(diaElem *e)
+{
+	ADM_GtkFactory::diaElemFile *a=(ADM_GtkFactory::diaElemFile *)e;
+	delete a;
+}
+
+diaElem  *gtkCreateDir(char **filename,const char *toggleTitle,const char *tip)
+{
+	return new  ADM_GtkFactory::diaElemDirSelect(filename,toggleTitle,tip);
+}
+void gtkDestroyDir(diaElem *e)
+{
+	ADM_GtkFactory::diaElemDirSelect *a=(ADM_GtkFactory::diaElemDirSelect *)e;
+	delete a;
+}
 //EOF



From mean at mail.berlios.de  Sun Mar 30 10:00:59 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 30 Mar 2008 10:00:59 +0200
Subject: [Avidemux-svn-commit] r3953 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mp4
Message-ID: <200803300800.m2U80xMr023573@sheep.berlios.de>

Author: mean
Date: 2008-03-30 10:00:59 +0200 (Sun, 30 Mar 2008)
New Revision: 3953

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mp4/ADM_mp4Analyzer.cpp
Log:
[Mov] MJPA support


Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mp4/ADM_mp4Analyzer.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mp4/ADM_mp4Analyzer.cpp	2008-03-30 08:00:55 UTC (rev 3952)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mp4/ADM_mp4Analyzer.cpp	2008-03-30 08:00:59 UTC (rev 3953)
@@ -555,6 +555,11 @@
                                         commonPart(MJPB);
                                         left=0;
                                   }
+                                  case MKFCCR('m','j','p','a'):  //mjpegb
+                                 {
+                                       commonPart(MJPG);
+                                       left=0;
+                                 }
                                   break;
                                 case MKFCCR('s','2','6','3'):  //s263 d263
                                   {



From mean at mail.berlios.de  Sun Mar 30 21:40:47 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 30 Mar 2008 21:40:47 +0200
Subject: [Avidemux-svn-commit] r3954 - branches/avidemux_2.5_branch_gruntster
Message-ID: <200803301940.m2UJelJn003799@sheep.berlios.de>

Author: mean
Date: 2008-03-30 21:40:47 +0200 (Sun, 30 Mar 2008)
New Revision: 3954

Modified:
   branches/avidemux_2.5_branch_gruntster/TODO
Log:
[Test]

Modified: branches/avidemux_2.5_branch_gruntster/TODO
===================================================================
--- branches/avidemux_2.5_branch_gruntster/TODO	2008-03-30 08:00:59 UTC (rev 3953)
+++ branches/avidemux_2.5_branch_gruntster/TODO	2008-03-30 19:40:47 UTC (rev 3954)
@@ -1 +1 @@
-
+ 



From mean at mail.berlios.de  Sun Mar 30 21:44:08 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 30 Mar 2008 21:44:08 +0200
Subject: [Avidemux-svn-commit] r3955 - in
	branches/avidemux_2.5_branch_gruntster/avidemux:
	ADM_coreUI/include ADM_coreUI/src
	ADM_userInterfaces/ADM_GTK/ADM_dialogFactory
	ADM_userInterfaces/ADM_NONE/ADM_dialogFactory
	ADM_userInterfaces/ADM_QT4/ADM_dialogFactory
Message-ID: <200803301944.m2UJi8SV004103@sheep.berlios.de>

Author: mean
Date: 2008-03-30 21:44:07 +0200 (Sun, 30 Mar 2008)
New Revision: 3955

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_coreUI_internal.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_factory.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_factory.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_dialogFactory.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_filesel.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_frame.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_menu.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialogFactory/FAC_toggle.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_frame.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_bitrate.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_filesel.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_menu.cpp
Log:
[Merge] Factory manual merge

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_coreUI_internal.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_coreUI_internal.h	2008-03-30 19:40:47 UTC (rev 3954)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_coreUI_internal.h	2008-03-30 19:44:07 UTC (rev 3955)
@@ -91,6 +91,9 @@
 // Dir
 	CREATE_DIR_T         *CreateDir;
 	DELETE_DIA_ELEM_T    *DestroyDir;
+// Frame
+	CREATE_FRAME_T       *CreateFrame;
+	DELETE_DIA_ELEM_T    *DestroyFrame;
 }FactoryDescriptor;
 //
 uint8_t DIA_factoryInit(FactoryDescriptor *d);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_factory.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_factory.h	2008-03-30 19:40:47 UTC (rev 3954)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_factory.h	2008-03-30 19:44:07 UTC (rev 3955)
@@ -281,14 +281,25 @@
         const diaMenuEntry *menu,const char *tip);
 typedef diaElem  *(CREATE_MENUDYNAMIC_T)(uint32_t *intValue,const char *itle, uint32_t nb, 
          diaMenuEntryDynamic **menu,const char *tip);
-class diaElemMenuDynamic : public diaElem
+
+class diaElemMenuDynamicBase : public diaElem
 {
+protected:	
 diaMenuEntryDynamic **menu;
 uint32_t            nbMenu;
 dialElemLink        links[MENU_MAX_lINK];
 uint32_t            nbLink;
 
 public:
+	diaElemMenuDynamicBase() : diaElem(ELEM_MENU) {};
+  
+  virtual   ~diaElemMenuDynamicBase() {};
+  virtual uint8_t   link(diaMenuEntryDynamic *entry,uint32_t onoff,diaElem *w)=0;
+};
+
+class diaElemMenuDynamic : public diaElemMenuDynamicBase
+{
+public:
   diaElemMenuDynamic(uint32_t *intValue,const char *itle, uint32_t nb, 
                diaMenuEntryDynamic **menu,const char *tip=NULL);
   
@@ -301,13 +312,20 @@
   virtual void      finalize(void);
 };
 
- 
-class diaElemMenu : public diaElem
+class diaElemMenuBase : public diaElem
 {
-const diaMenuEntry  *menu;
-uint32_t            nbMenu;
-dialElemLink        links[MENU_MAX_lINK];
-uint32_t            nbLink;
+protected:
+	const diaMenuEntry  *menu;
+	uint32_t            nbMenu;
+	dialElemLink        links[MENU_MAX_lINK];
+	uint32_t            nbLink;
+public:	
+	diaElemMenuBase(void) : diaElem(ELEM_MENU) {};
+	virtual ~diaElemMenuBase(void) {};
+	virtual uint8_t   link(diaMenuEntry *entry,uint32_t onoff,diaElem *w)=0;
+};
+class diaElemMenu : public diaElemMenuBase
+{
 
 diaElemMenuDynamic  *dyna;
 diaMenuEntryDynamic  **menus;
@@ -327,13 +345,22 @@
 /*************************************************/
 #include "ADM_encoder/ADM_vidEncode.hxx"
 typedef diaElem  *(CREATE_BITRATE_T)(COMPRES_PARAMS *p,const char *toggleTitle,const char *tip);
-class diaElemBitrate : public diaElem
+class diaElemBitrateBase : public diaElem
 {
   protected:
     COMPRES_PARAMS    copy;
     uint32_t maxQ;
 public:
   
+	diaElemBitrateBase(void) : diaElem(ELEM_BITRATE) {};
+  virtual ~diaElemBitrateBase() {} ;
+  virtual void setMaxQz(uint32_t qz)=0;
+};
+class diaElemBitrate : public diaElemBitrateBase
+{
+  protected:
+public:
+  
   diaElemBitrate(COMPRES_PARAMS *p,const char *toggleTitle,const char *tip=NULL);
   virtual ~diaElemBitrate() ;
   void setMe(void *dialog, void *opaque,uint32_t line);
@@ -345,29 +372,51 @@
 
 /*************************************************/
 typedef diaElem *CREATE_FILE_T(uint32_t writeMode,char **filename,const char *toggleTitle,  const char *defaultSuffix ,const char *tip);
-class diaElemFile : public diaElem
+class diaElemFileBase : public diaElem
 {
 
 protected:
     const char * defaultSuffix;
 public:
   
+	diaElemFileBase(void) : diaElem(ELEM_FILE_READ){};
+  virtual ~diaElemFileBase() {};
+  virtual void   changeFile(void)=0;
+  uint32_t _write;
+
+};
+class diaElemFile : public diaElemFileBase
+{
+
+protected:
+    
+public:
+  
   diaElemFile(uint32_t writeMode,char **filename,const char *toggleTitle,
               const char *defaultSuffix = 0,const char *tip=NULL);
   virtual ~diaElemFile() ;
   void setMe(void *dialog, void *opaque,uint32_t line);
   void getMe(void);
-  uint32_t _write;
+  
   void   changeFile(void);
   void   enable(uint32_t onoff);
 };
 /*************************************************/
 typedef diaElem *CREATE_DIR_T(char **filename,const char *toggleTitle,const char *tip);
-class diaElemDirSelect : public diaElem
+class diaElemDirSelectBase : public diaElem
 {
 
 public:
   
+	diaElemDirSelectBase(void) :diaElem(ELEM_DIR_SELECT) {};
+  virtual ~diaElemDirSelectBase() {} ;
+  virtual void changeFile(void)=0;
+};
+class diaElemDirSelect : public diaElemDirSelectBase
+{
+
+public:
+  
   diaElemDirSelect(char **filename,const char *toggleTitle,const char *tip=NULL);
   virtual ~diaElemDirSelect() ;
   void setMe(void *dialog, void *opaque,uint32_t line);
@@ -438,13 +487,24 @@
 };
 /**********************************************/
 #define DIA_MAX_FRAME 10
-class diaElemFrame : public diaElem
+class diaElemFrameBase :public diaElem
 {
+protected:
   uint32_t frameSize;
   uint32_t nbElems;
   diaElem  *elems[DIA_MAX_FRAME];
 public:
   
+	diaElemFrameBase(void) : diaElem(ELEM_FRAME) {};
+  virtual ~diaElemFrameBase() {};
+  virtual void swallow(diaElem *widget)=0;
+};
+typedef diaElem *(CREATE_FRAME_T )(const char *toggleTitle, const char *tip);
+class diaElemFrame : public diaElemFrameBase
+{
+  
+public:
+  
   diaElemFrame(const char *toggleTitle, const char *tip=NULL);
   virtual ~diaElemFrame() ;
   void setMe(void *dialog, void *opaque,uint32_t line);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_factory.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_factory.cpp	2008-03-30 19:40:47 UTC (rev 3954)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_factory.cpp	2008-03-30 19:44:07 UTC (rev 3955)
@@ -224,7 +224,7 @@
 // ****************** diaElemMenu ********************
 diaElemMenu ::diaElemMenu(uint32_t *intValue,const char *itle, uint32_t nb, 
         const diaMenuEntry *menu,const char *tip):
-	diaElem(ELEM_MENU)
+	diaElemMenuBase()
 {
 	ADM_assert(Factory); 
 	internalPointer=Factory->CreateMenu(intValue, itle,  nb,  menu,tip);
@@ -242,7 +242,7 @@
 	}
 uint8_t   diaElemMenu::link(diaMenuEntry *entry,uint32_t onoff,diaElem *w)
 {
-	diaElemMenu *cast=(diaElemMenu *)internalPointer;
+	diaElemMenuBase *cast=(diaElemMenuBase *)internalPointer;
 	cast->link(entry,onoff,w);
 }
 void      diaElemMenu::updateMe(void)
@@ -258,7 +258,7 @@
 // ****************** diaElemMenuDynamic ********************
 diaElemMenuDynamic ::diaElemMenuDynamic(uint32_t *intValue,const char *itle, uint32_t nb, 
          diaMenuEntryDynamic **menu,const char *tip):
-	diaElem(ELEM_MENU)
+        	 diaElemMenuDynamicBase()
 {
 	ADM_assert(Factory); 
 	internalPointer=Factory->CreateMenuDynamic(intValue, itle,  nb,  menu,tip);
@@ -276,7 +276,7 @@
 	}
 uint8_t   diaElemMenuDynamic::link(diaMenuEntryDynamic *entry,uint32_t onoff,diaElem *w)
 {
-	diaElemMenuDynamic *cast=(diaElemMenuDynamic *)internalPointer;
+	diaElemMenuDynamicBase *cast=(diaElemMenuDynamicBase *)internalPointer;
 	cast->link(entry,onoff,w);
 }
 void   diaElemMenuDynamic::finalize(void)
@@ -307,7 +307,7 @@
 
 // ****************** diaElemBitrate ********************
 diaElemBitrate ::diaElemBitrate(COMPRES_PARAMS *p,const char *toggleTitle,const char *tip):
-	diaElem(ELEM_BITRATE)
+	diaElemBitrateBase()
 {
 	ADM_assert(Factory); 
 	internalPointer=Factory->CreateBitrate(p,toggleTitle,tip);
@@ -324,15 +324,14 @@
 }
 void diaElemBitrate::setMaxQz(uint32_t qz)
 {
-	diaElemBitrate *cast=(diaElemBitrate *)internalPointer;
+	diaElemBitrateBase *cast=(diaElemBitrateBase *)internalPointer;
 		cast->setMaxQz(qz);
 	
 }
 DIA_MKSTUBS(diaElemBitrate)
 // ****************** diaElemFile ********************
 diaElemFile ::diaElemFile(uint32_t writeMode,char **filename,const char *toggleTitle,
-        const char *defaultSuffix ,const char *tip):
-	diaElem(ELEM_FILE_READ)
+        const char *defaultSuffix ,const char *tip)
 {
 	ADM_assert(Factory); 
 	internalPointer=Factory->CreateFile(writeMode,filename,toggleTitle,defaultSuffix,tip);
@@ -350,14 +349,14 @@
 	}
 void      diaElemFile::changeFile(void)
 	{ 
-	diaElemFile *cast=(diaElemFile *)internalPointer;
+	diaElemFileBase *cast=(diaElemFileBase *)internalPointer;
 	cast->changeFile();
 	}
 DIA_MKSTUBS(diaElemFile)
 
 // ****************** diaElemDirSelect ********************
 diaElemDirSelect ::diaElemDirSelect(char **filename,const char *toggleTitle,const char *tip):
-	diaElem(ELEM_DIR_SELECT)
+	diaElemDirSelectBase()
 {
 	ADM_assert(Factory); 
 	internalPointer=Factory->CreateDir( filename, toggleTitle, tip);
@@ -375,9 +374,40 @@
 	}
 void      diaElemDirSelect::changeFile(void)
 	{ 
-	diaElemDirSelect *cast=(diaElemDirSelect *)internalPointer;
+	diaElemDirSelectBase *cast=(diaElemDirSelectBase *)internalPointer;
 	cast->changeFile();
 	}
 DIA_MKSTUBS(diaElemDirSelect)
-
+// ****************** diaElemFrame ********************
+diaElemFrame ::diaElemFrame(const char *toggleTitle, const char *tip):
+	diaElemFrameBase()
+{
+	ADM_assert(Factory); 
+	internalPointer=Factory->CreateFrame( toggleTitle, tip);
+}
+diaElemFrame ::~diaElemFrame()
+{
+	ADM_assert(Factory); 
+	Factory->DestroyFrame(internalPointer);
+	internalPointer=NULL;
+}
+void      diaElemFrame::enable(uint32_t onoff)
+	{ 
+		ADM_assert(internalPointer); 
+		internalPointer->enable(onoff); 
+	}
+void diaElemFrame::swallow(diaElem *widget)
+{
+	diaElemFrameBase *cast=(diaElemFrameBase *)internalPointer;
+		cast->swallow(widget);	
+}
+ 
+void diaElemFrame::finalize(void)
+{
+	internalPointer->finalize();
+		
+}
+ 
+DIA_MKSTUBS(diaElemFrame)
+//
 // EOF

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_dialogFactory.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_dialogFactory.cpp	2008-03-30 19:40:47 UTC (rev 3954)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_dialogFactory.cpp	2008-03-30 19:44:07 UTC (rev 3955)
@@ -325,8 +325,9 @@
 extern DELETE_DIA_ELEM_T    gtkDestroyFile;
 extern CREATE_DIR_T         gtkCreateDir;
 extern DELETE_DIA_ELEM_T    gtkDestroyDir;
+CREATE_FRAME_T				gtkCreateFrame;
+extern DELETE_DIA_ELEM_T    gtkDestroyFrame;
 
-
 //************
 static FactoryDescriptor GtkFactoryDescriptor=
 {
@@ -378,7 +379,10 @@
 	&gtkDestroyFile,
 	// Dir
 	&gtkCreateDir,
-	&gtkDestroyDir
+	&gtkDestroyDir,
+	// Frame
+	&gtkCreateFrame,
+	&gtkDestroyFrame
 		
 };
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_filesel.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_filesel.cpp	2008-03-30 19:40:47 UTC (rev 3954)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_filesel.cpp	2008-03-30 19:44:07 UTC (rev 3955)
@@ -18,11 +18,11 @@
 #include "prefs.h"
 namespace ADM_GtkFactory
 {
-class diaElemFile : public diaElem
+class diaElemFile : public diaElemFileBase
 {
 
 protected:
-    const char * defaultSuffix;
+    
 public:
   
   diaElemFile(uint32_t writeMode,char **filename,const char *toggleTitle,
@@ -30,11 +30,11 @@
   virtual ~diaElemFile() ;
   void setMe(void *dialog, void *opaque,uint32_t line);
   void getMe(void);
-  uint32_t _write;
+  
   void   changeFile(void);
   void   enable(uint32_t onoff);
 };
-class diaElemDirSelect : public diaElem
+class diaElemDirSelect : public diaElemDirSelectBase
 {
 
 public:
@@ -54,9 +54,10 @@
 
 diaElemFile::diaElemFile(uint32_t writemode,char **filename,const char *toggleTitle,
                          const char * defaultSuffix,const char *selectFileDesc)
-  : diaElem(ELEM_FILE_READ),
-    defaultSuffix (defaultSuffix)
+  : diaElemFileBase()
+    
 {
+  this->defaultSuffix=defaultSuffix;
   param=(void *)filename;
   paramTitle=toggleTitle;
 
@@ -213,7 +214,7 @@
 
 /*********************************************************************/
 diaElemDirSelect::diaElemDirSelect(char **filename,const char *toggleTitle,const char *selectDirDesc)
-  : diaElem(ELEM_DIR_SELECT)
+  : diaElemDirSelectBase()
 {
   param=(void *)filename;
   paramTitle=toggleTitle;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_frame.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_frame.cpp	2008-03-30 19:40:47 UTC (rev 3954)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_frame.cpp	2008-03-30 19:44:07 UTC (rev 3955)
@@ -15,10 +15,23 @@
 
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
 #include "DIA_factory.h"
-
-
+namespace ADM_GtkFactory
+{
+class diaElemFrame : public diaElemFrameBase
+{
+  
+public:
+  
+  diaElemFrame(const char *toggleTitle, const char *tip=NULL);
+  virtual ~diaElemFrame() ;
+  void setMe(void *dialog, void *opaque,uint32_t line);
+  void getMe(void) ;
+  void swallow(diaElem *widget);
+  void enable(uint32_t onoff);
+  void finalize(void);
+};
 diaElemFrame::diaElemFrame(const char *toggleTitle, const char *tip)
-  : diaElem(ELEM_FRAME)
+  : diaElemFrameBase()
 {
   param=NULL;
   paramTitle=toggleTitle;
@@ -102,4 +115,17 @@
    GtkWidget *widget=(GtkWidget *)myWidget;
    gtk_widget_set_sensitive(GTK_WIDGET(myWidget),onoff);
 }
+} // End of namespace
+//****************************Hoook*****************
+
+diaElem  *gtkCreateFrame(const char *toggleTitle, const char *tip)
+{
+	return new  ADM_GtkFactory::diaElemFrame(toggleTitle,tip);
+}
+void gtkDestroyFrame(diaElem *e)
+{
+	ADM_GtkFactory::diaElemFrame *a=(ADM_GtkFactory::diaElemFrame *)e;
+	delete a;
+}
 //EOF
+//EOF

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_menu.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_menu.cpp	2008-03-30 19:40:47 UTC (rev 3954)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_menu.cpp	2008-03-30 19:44:07 UTC (rev 3955)
@@ -21,13 +21,10 @@
 static void cb_menus(void *w,void *p);
 
 
-class diaElemMenuDynamic : public diaElem
+class diaElemMenuDynamic : public diaElemMenuDynamicBase
 {
 protected:
-	diaMenuEntryDynamic **menu;
-	uint32_t            nbMenu;
-	dialElemLink        links[MENU_MAX_lINK];
-	uint32_t            nbLink;
+	
 
 public:
   diaElemMenuDynamic(uint32_t *intValue,const char *itle, uint32_t nb, 
@@ -42,13 +39,10 @@
   virtual void      finalize(void);
 };
 //**********************
-class diaElemMenu : public diaElem
+class diaElemMenu : public diaElemMenuBase
 {
 protected:
-	const diaMenuEntry  *menu;
-	uint32_t            nbMenu;
-	dialElemLink        links[MENU_MAX_lINK];
-	uint32_t            nbLink;
+	
 
 	diaElemMenuDynamic  *dyna;
 	diaMenuEntryDynamic  **menus;	
@@ -67,7 +61,7 @@
 //**********************
 diaElemMenu::diaElemMenu(uint32_t *intValue,const char *itle, uint32_t nb, 
                const diaMenuEntry *menu,const char *tip)
-  : diaElem(ELEM_MENU)
+  : diaElemMenuBase()
 {
   param=(void *)intValue;
   paramTitle=itle;
@@ -125,7 +119,7 @@
 //*******************************
 diaElemMenuDynamic::diaElemMenuDynamic(uint32_t *intValue,const char *itle, uint32_t nb, 
                 diaMenuEntryDynamic **menu,const char *tip)
-  : diaElem(ELEM_MENU)
+  : diaElemMenuDynamicBase()
 {
   param=(void *)intValue;
   paramTitle=itle;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialogFactory/FAC_toggle.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialogFactory/FAC_toggle.cpp	2008-03-30 19:40:47 UTC (rev 3954)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialogFactory/FAC_toggle.cpp	2008-03-30 19:44:07 UTC (rev 3955)
@@ -140,7 +140,7 @@
 
 diaElemMenu::diaElemMenu(uint32_t *intValue,const char *itle, uint32_t nb, 
                const diaMenuEntry *menu,const char *tip)
-  : diaElem(ELEM_MENU)
+  : diaElemMenuBase()
 {
 }
 
@@ -167,7 +167,7 @@
 //*****************
 diaElemFile::diaElemFile(uint32_t write,char **filename,const char *toggleTitle,
                          const char *defaultSuffix, const char *tip)
-  : diaElem(ELEM_FILE_READ)
+  : diaElemFileBase()
 {
  
 }
@@ -189,7 +189,7 @@
 {}
 #include "ADM_encoder/ADM_vidEncode.hxx"
   diaElemBitrate::diaElemBitrate(COMPRES_PARAMS *p,const char *toggleTitle,const char *tip)
-  : diaElem(ELEM_BITRATE)
+  : diaElemBitrateBase()
 {
   
 }
@@ -242,7 +242,7 @@
   
 }
 //******************************************************
-diaElemDirSelect::diaElemDirSelect(char **filename,const char *toggleTitle,const char *tip)  : diaElem(ELEM_NOTCH) {}
+diaElemDirSelect::diaElemDirSelect(char **filename,const char *toggleTitle,const char *tip)  : diaElemDirSelectBase() {}
 diaElemDirSelect::~diaElemDirSelect() {}
 void diaElemDirSelect::setMe(void *dialog, void *opaque,uint32_t line) {}
 void diaElemDirSelect::getMe(void) {}
@@ -260,7 +260,7 @@
 //******************************************************
 diaElemMenuDynamic::diaElemMenuDynamic(uint32_t *intValue,const char *itle, uint32_t nb, 
                 diaMenuEntryDynamic **menu,const char *tip)
-  : diaElem(ELEM_MENU)
+  : diaElemMenuDynamicBase()
 {
 }
 
@@ -288,7 +288,7 @@
 }
 //******************************************************
 diaElemFrame::diaElemFrame(const char *toggleTitle, const char *tip)
-  : diaElem(ELEM_FRAME)
+  : diaElemFrameBase()
 {
   
 }

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_frame.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_frame.cpp	2008-03-30 19:40:47 UTC (rev 3954)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_frame.cpp	2008-03-30 19:44:07 UTC (rev 3955)
@@ -34,7 +34,7 @@
 extern const char *shortkey(const char *);
 
 diaElemFrame::diaElemFrame(const char *toggleTitle, const char *tip)
-  : diaElem(ELEM_FRAME)
+  : diaElemFrameBase()
 {
   param=NULL;
   paramTitle=shortkey(toggleTitle);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_bitrate.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_bitrate.cpp	2008-03-30 19:40:47 UTC (rev 3954)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_bitrate.cpp	2008-03-30 19:44:07 UTC (rev 3955)
@@ -201,7 +201,7 @@
 
 //**********************************
 diaElemBitrate::diaElemBitrate(COMPRES_PARAMS *p,const char *toggleTitle,const char *tip)
-  : diaElem(ELEM_BITRATE)
+  : diaElemBitrateBase()
 {
  
   param=(void *)p;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_filesel.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_filesel.cpp	2008-03-30 19:40:47 UTC (rev 3954)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_filesel.cpp	2008-03-30 19:44:07 UTC (rev 3955)
@@ -140,9 +140,10 @@
 
 diaElemFile::diaElemFile(uint32_t writemode,char **filename,const char *toggleTitle,
                          const char *defaultSuffix,const char *selectFileDesc)
-  : diaElem(ELEM_FILE_READ),
-    defaultSuffix (defaultSuffix)
+  : diaElemFileBase()
+    
 {
+  this->defaultSuffix=defaultSuffix;
   param=(void *)filename;
   paramTitle=shortkey(toggleTitle);
 
@@ -188,7 +189,8 @@
 }
 
 //****************************
-diaElemDirSelect::diaElemDirSelect(char **filename,const char *toggleTitle,const char *selectDirDesc) : diaElem(ELEM_DIR_SELECT)
+diaElemDirSelect::diaElemDirSelect(char **filename,const char *toggleTitle,const char *selectDirDesc) :
+	diaElemDirSelectBase()
 {
   param=(void *)filename;
   paramTitle=shortkey(toggleTitle);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_menu.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_menu.cpp	2008-03-30 19:40:47 UTC (rev 3954)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_menu.cpp	2008-03-30 19:44:07 UTC (rev 3955)
@@ -66,7 +66,7 @@
 
 diaElemMenu::diaElemMenu(uint32_t *intValue,const char *itle, uint32_t nb, 
                const diaMenuEntry *menu,const char *tip)
-  : diaElem(ELEM_MENU)
+  : diaElemMenuBase()
 {
   param=(void *)intValue;
   paramTitle=itle;
@@ -128,7 +128,7 @@
 
 diaElemMenuDynamic::diaElemMenuDynamic(uint32_t *intValue,const char *itle, uint32_t nb, 
                 diaMenuEntryDynamic **menu,const char *tip)
-  : diaElem(ELEM_MENU)
+  : diaElemMenuDynamicBase()
 {
   param=(void *)intValue;
   paramTitle=shortkey(itle);



From mean at mail.berlios.de  Sun Mar 30 21:44:43 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 30 Mar 2008 21:44:43 +0200
Subject: [Avidemux-svn-commit] r3956 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script
Message-ID: <200803301944.m2UJihDj004208@sheep.berlios.de>

Author: mean
Date: 2008-03-30 21:44:43 +0200 (Sun, 30 Mar 2008)
New Revision: 3956

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSFunctions.cpp
Log:
[Merge]


Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSFunctions.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSFunctions.cpp	2008-03-30 19:44:07 UTC (rev 3955)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSFunctions.cpp	2008-03-30 19:44:43 UTC (rev 3956)
@@ -557,7 +557,6 @@
 JSBool facMenu(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
 {
    uint32_t tog=4;
-   ELEM_TYPE_FLOAT f=1;
    
     diaMenuEntry menu[]={
                              {2,   QT_TR_NOOP("No Strategy"),NULL},



From mean at mail.berlios.de  Sun Mar 30 21:44:45 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 30 Mar 2008 21:44:45 +0200
Subject: [Avidemux-svn-commit] r3957 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script
Message-ID: <200803301944.m2UJijqa004219@sheep.berlios.de>

Author: mean
Date: 2008-03-30 21:44:45 +0200 (Sun, 30 Mar 2008)
New Revision: 3957

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSFunctions.cpp
Log:
[Merge]


Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSFunctions.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSFunctions.cpp	2008-03-30 19:44:43 UTC (rev 3956)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSFunctions.cpp	2008-03-30 19:44:45 UTC (rev 3957)
@@ -557,6 +557,7 @@
 JSBool facMenu(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
 {
    uint32_t tog=4;
+   ELEM_TYPE_FLOAT f=1;
    
     diaMenuEntry menu[]={
                              {2,   QT_TR_NOOP("No Strategy"),NULL},



