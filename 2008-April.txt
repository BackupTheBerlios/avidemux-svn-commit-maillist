From gruntster at mail.berlios.de  Tue Apr  1 15:31:48 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Tue, 1 Apr 2008 15:31:48 +0200
Subject: [Avidemux-svn-commit] r3958 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog
Message-ID: <200804011331.m31DVm2j031294@sheep.berlios.de>

Author: gruntster
Date: 2008-04-01 15:31:47 +0200 (Tue, 01 Apr 2008)
New Revision: 3958

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_none.cpp
Log:
[Factory] initialise Qt4 file selectors

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_none.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_none.cpp	2008-03-30 19:44:45 UTC (rev 3957)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_none.cpp	2008-04-01 13:31:47 UTC (rev 3958)
@@ -41,7 +41,6 @@
 uint8_t DIA_RecentFiles( char **name ){return 0;}
 uint8_t DIA_about( void ){return 0;}
 void    DIA_Calculator(uint32_t *sizeInMeg, uint32_t *avgBitrate ){}
-uint8_t initFileSelector(void){return 0;}
 uint8_t initGUI( void ) {return 1;}
 void destroyGUI(void) {}
 int DIA_colorSel(uint8_t *r, uint8_t *g, uint8_t *b) {return 0;}



From gruntster at mail.berlios.de  Tue Apr  1 15:33:37 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Tue, 1 Apr 2008 15:33:37 +0200
Subject: [Avidemux-svn-commit] r3959 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk
Message-ID: <200804011333.m31DXbnZ031427@sheep.berlios.de>

Author: gruntster
Date: 2008-04-01 15:33:36 +0200 (Tue, 01 Apr 2008)
New Revision: 3959

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp
Log:
[Factory] consistent signatures for GTK file selectors

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp	2008-04-01 13:31:47 UTC (rev 3958)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp	2008-04-01 13:33:36 UTC (rev 3959)
@@ -39,7 +39,7 @@
 namespace ADM_GTK_fileSel 
 {
 
-static void GUI_FileSel(const char *label, SELFILE_CB *cb, int rw, char **name = NULL);
+static void GUI_FileSel(const char *label, SELFILE_CB cb, int rw, char **name = NULL);
 uint8_t initFileSelector(void);
 
 static GtkFileFilter *filter_avi = NULL, *filter_mpeg = NULL, *filter_image = NULL, *filter_all = NULL;
@@ -278,13 +278,13 @@
 	return ret;
 }
 
-void GUI_FileSelWrite(const char *label, SELFILE_CB * cb)
+void GUI_FileSelWrite(const char *label, SELFILE_CB cb)
 {
 	/* Create the selector */
 	GUI_FileSel(label, cb, 1);
 }
 
-void GUI_FileSelRead(const char *label, SELFILE_CB * cb)
+void GUI_FileSelRead(const char *label, SELFILE_CB cb)
 {
 	/* Create the selector */
 	GUI_FileSel(label, cb, 0);
@@ -301,7 +301,7 @@
 }
 
 // CYB 2005.02.23: DND
-void fileReadWrite(SELFILE_CB *cb, int rw, char *name)
+void fileReadWrite(SELFILE_CB cb, int rw, char *name)
 {
 	if (name)
 	{
@@ -407,7 +407,7 @@
 // CYB 2005.02.23: DND
 
 
-void GUI_FileSel(const char *label, SELFILE_CB * cb, int rw,char **rname)
+void GUI_FileSel(const char *label, SELFILE_CB cb, int rw,char **rname)
 {
 	/* Create the selector */
 	GtkWidget *dialog;
@@ -555,7 +555,7 @@
 } // End of nameSpace
 static DIA_FILESEL_DESC_T GtkFileSelDesc=
 {
-	ADM_GTK_fileSel::init,	
+	ADM_GTK_fileSel::init,
 	ADM_GTK_fileSel::GUI_FileSelRead,
 	ADM_GTK_fileSel::GUI_FileSelWrite,
 	ADM_GTK_fileSel::GUI_FileSelRead,
@@ -565,8 +565,6 @@
 	ADM_GTK_fileSel::FileSel_SelectDir
 };
 
-
-
 // Hook our functions
 void initFileSelector(void)
 {



From gruntster at mail.berlios.de  Tue Apr  1 15:36:25 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Tue, 1 Apr 2008 15:36:25 +0200
Subject: [Avidemux-svn-commit] r3960 - in
	branches/avidemux_2.5_branch_gruntster/avidemux: .
	ADM_userInterfaces/ADM_QT4/ADM_gui
Message-ID: <200804011336.m31DaPQl032203@sheep.berlios.de>

Author: gruntster
Date: 2008-04-01 15:36:23 +0200 (Tue, 01 Apr 2008)
New Revision: 3960

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/file_qt4.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/main.cpp
Log:
[Factory] cosmetics

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/file_qt4.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/file_qt4.cpp	2008-04-01 13:33:36 UTC (rev 3959)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/file_qt4.cpp	2008-04-01 13:36:23 UTC (rev 3960)
@@ -24,198 +24,197 @@
 
 namespace ADM_QT4_fileSel
 {
-static void GUI_FileSelSelect(const char *label, char **name, uint32_t access) ;
-static void GUI_FileSelRead(const char *label,SELFILE_CB cb) ;
-static void GUI_FileSelWrite(const char *label,SELFILE_CB cb);
-static void GUI_FileSelRead(const char *label, char * * name);
-static void GUI_FileSelWrite(const char *label, char * * name);
-//****************************************************************************************************
-void GUI_FileSelRead(const char *label,SELFILE_CB cb) 
-{
-  char *name;
-  GUI_FileSelRead(label,&name);
-  if(name)
-  {
-    cb(name); 
-    ADM_dealloc(name);
-  }
-}
-//****************************************************************************************************
-void GUI_FileSelWrite(const char *label,SELFILE_CB cb) 
-{
-  char *name;
-  GUI_FileSelWrite(label,&name);
-  if(name)
-  {
-    cb(name); 
-    ADM_dealloc(name);
-  }
+	/**
+	  \fn GUI_FileSelWrite (const char *label, char **name, uint32_t access) 
+	  \brief Ask for a file for reading (access=0) or writing (access=1)
+	*/
+	void GUI_FileSelSelect(const char *label, char **name, uint32_t access)
+	{
+		char *tmpname = NULL;
+		char *str = NULL;
+		options pref_entry = LASTDIR_READ;
 
-}
-//****************************************************************************************************
-void GUI_FileSelRead(const char *label, char * * name)
-{
- GUI_FileSelSelect(label, name, 0) ;
-}
-//****************************************************************************************************
-void GUI_FileSelWrite(const char *label, char * * name)
-{
- GUI_FileSelSelect(label, name, 1) ;
+		*name = NULL;
 
-}
-/**
-  \fn GUI_FileSelWrite (const char *label, char **name, uint32_t access) 
-  \brief Ask for a file for reading (access=0) or writing (access=1)
+		if (access)
+			pref_entry = LASTDIR_WRITE;
 
-*/
-void GUI_FileSelSelect(const char *label, char **name, uint32_t access) 
-{
-  char *dir=NULL,*tmpname=NULL;
-  *name=NULL;
-  char *str=NULL;
-  options pref_entry=LASTDIR_READ;
-  if(access) pref_entry=LASTDIR_WRITE;
-  
-  if(prefs->get(pref_entry,(ADM_filename **)&tmpname))
-  {
-     DIR *dir;
-        str=ADM_PathCanonize(tmpname);
-        ADM_PathStripName(str);
-        /* LASTDIR may have gone; then do nothing and use current dir instead (implied) */
-        if( (dir=opendir(str)) )
-        {
-                closedir(dir);
-        } else 
-        {
-            delete [] str;
-            str=NULL;
-        }
-  }
-  QString fileName;
-  QFileDialog::Options options = 0;
+		if (prefs->get(pref_entry,(ADM_filename **)&tmpname))
+		{
+			DIR *dir;
+			str = ADM_PathCanonize(tmpname);
+			ADM_PathStripName(str);
 
+			/* LASTDIR may have gone; then do nothing and use current dir instead (implied) */
+			if (dir = opendir(str))
+				closedir(dir);
+			else 
+			{
+				delete [] str;
+				str = NULL;
+			}
+		}
+
+		QString fileName;
+		QFileDialog::Options options = 0;
+
 #if defined(__APPLE__)
-   options |= QFileDialog::DontUseNativeDialog;
+		options |= QFileDialog::DontUseNativeDialog;
 #endif
 
-   if(access)  fileName=QFileDialog::getSaveFileName(NULL, label, str, NULL, NULL, options);
-       else    fileName=QFileDialog::getOpenFileName(NULL, label, str, NULL, NULL, options);
+		if (access)
+			fileName = QFileDialog::getSaveFileName(NULL, label, str, NULL, NULL, options);
+		else
+			fileName = QFileDialog::getOpenFileName(NULL, label, str, NULL, NULL, options);
 
-  if(!fileName.isNull() )
-  {
-    const char *s=fileName.toUtf8().constData();
-    *name=ADM_strdup(s);
-    prefs->set(pref_entry,(ADM_filename *)*name);
-  }
-  if(str) delete [] str;
-  
-}
-/**
-      \fn FileSel_SelectWrite
-      \brief select file, write mode
-      @param title window title
-      @param target where to store result
-      @param max Max buffer size in bytes
-      @param source Original value
-      @return 1 on success, 0 on failure
+		if (!fileName.isNull() )
+		{
+			const char *s = fileName.toUtf8().constData();
+			*name = ADM_strdup(s);
+			prefs->set(pref_entry, (ADM_filename*)*name);
+		}
 
-*/
-uint8_t FileSel_SelectWrite(const char *title,char *target,uint32_t max, const char *source)
-{
-  char *dir=NULL,*tmpname=NULL;
-  QString fileName;
-  QFileDialog::Options options = 0;
+		if (str)
+			delete [] str;
+	}
 
+	void GUI_FileSelRead(const char *label, char **name)
+	{
+		GUI_FileSelSelect(label, name, 0);
+	}
+
+	void GUI_FileSelWrite(const char *label, char **name)
+	{
+		GUI_FileSelSelect(label, name, 1);
+	}
+
+	void GUI_FileSelRead(const char *label, SELFILE_CB cb)
+	{
+		char *name;
+
+		GUI_FileSelRead(label, &name);
+
+		if (name)
+		{
+			cb(name); 
+			ADM_dealloc(name);
+		}
+	}
+
+	void GUI_FileSelWrite(const char *label, SELFILE_CB cb)
+	{
+		char *name;
+
+		GUI_FileSelWrite(label, &name);
+
+		if (name)
+		{
+			cb(name); 
+			ADM_dealloc(name);
+		}
+	}
+
+	/**
+		  \fn FileSel_SelectWrite
+		  \brief select file, write mode
+		  @param title window title
+		  @param target where to store result
+		  @param max Max buffer size in bytes
+		  @param source Original value
+		  @return 1 on success, 0 on failure
+	*/
+	uint8_t FileSel_SelectWrite(const char *title, char *target, uint32_t max, const char *source)
+	{
+		QString fileName;
+		QFileDialog::Options options = 0;
+
 #if defined(__APPLE__)
-  options |= QFileDialog::DontUseNativeDialog;
+		options |= QFileDialog::DontUseNativeDialog;
 #endif
 
-  fileName=QFileDialog::getSaveFileName(NULL, title, source, NULL, NULL, options);
+		fileName=QFileDialog::getSaveFileName(NULL, title, source, NULL, NULL, options);
 
-  if(!fileName.isNull() )
-  {
-    const char *s=fileName.toUtf8().constData();
-    strncpy(target,s,max);
-  }
-  
-  
-}
-/**
-      \fn FileSel_SelectRead
-      \brief select file, read mode
-      @param title window title
-      @param target where to store result
-      @param max Max buffer size in bytes
-      @param source Original value
-      @return 1 on success, 0 on failure
+		if (!fileName.isNull())
+		{
+			const char *s = fileName.toUtf8().constData();
+			strncpy(target, s, max);
+		}
+	}
 
-*/
-uint8_t FileSel_SelectRead(const char *title,char *target,uint32_t max, const char *source)
-{
-  char *dir=NULL,*tmpname=NULL;
-  QString fileName;
-  QFileDialog::Options options = 0;
+	/**
+		  \fn FileSel_SelectRead
+		  \brief select file, read mode
+		  @param title window title
+		  @param target where to store result
+		  @param max Max buffer size in bytes
+		  @param source Original value
+		  @return 1 on success, 0 on failure
+	*/
+	uint8_t FileSel_SelectRead(const char *title, char *target, uint32_t max, const char *source)
+	{
+		QString fileName;
+		QFileDialog::Options options = 0;
 
 #if defined(__APPLE__)
-  options |= QFileDialog::DontUseNativeDialog;
+		options |= QFileDialog::DontUseNativeDialog;
 #endif
 
-  fileName = QFileDialog::getOpenFileName(NULL, title, source, NULL, NULL, options);
+		fileName = QFileDialog::getOpenFileName(NULL, title, source, NULL, NULL, options);
 
-  if(!fileName.isNull() )
-  {
-    const char *s=fileName.toUtf8().constData();
-    strncpy(target,s,max);
+		if (!fileName.isNull())
+		{
+			const char *s = fileName.toUtf8().constData();
+			strncpy(target, s, max);
 
-	return 1;
-  }
-  
-  return 0;
-}
-/**
-      \fn FileSel_SelectDir
-      \brief select directory
-      @param title window title
-      @param target where to store result
-      @param max Max buffer size in bytes
-      @param source Original value
-      @return 1 on success, 0 on failure
+			return 1;
+		}
 
-*/
+		return 0;
+	}
 
-uint8_t FileSel_SelectDir(const char *title,char *target,uint32_t max, const char *source)
-{
-   char *dir=NULL,*tmpname=NULL;
-  
-   QString fileName;
-   QFileDialog::Options options = QFileDialog::ShowDirsOnly;
+	/**
+		  \fn FileSel_SelectDir
+		  \brief select directory
+		  @param title window title
+		  @param target where to store result
+		  @param max Max buffer size in bytes
+		  @param source Original value
+		  @return 1 on success, 0 on failure
+	*/
+	uint8_t FileSel_SelectDir(const char *title, char *target, uint32_t max, const char *source)
+	{
+		QString fileName;
+		QFileDialog::Options options = QFileDialog::ShowDirsOnly;
 
 #if defined(__APPLE__)
-   options |= QFileDialog::DontUseNativeDialog;
+		options |= QFileDialog::DontUseNativeDialog;
 #endif
 
-   fileName=QFileDialog::getExistingDirectory(NULL, title, source, options);
+		fileName = QFileDialog::getExistingDirectory(NULL, title, source, options);
 
-  if(!fileName.isNull() )
-  {
-    const char *s=fileName.toUtf8().constData();
-    strncpy(target,s,max);
-	return 1;
-  }
+		if (!fileName.isNull())
+		{
+			const char *s = fileName.toUtf8().constData();
+			strncpy(target, s, max);
 
-  return 0;
-}
-/**
- * 
- */
-void init(void)
-{
-	// Nothing special to do for QT4 fileselector
-}
+			return 1;
+		}
+
+		return 0;
+	}
+
+	/**
+		 * 
+	*/
+	void init(void)
+	{
+		// Nothing special to do for QT4 fileselector
+	}
 } // End of nameSpace
-static DIA_FILESEL_DESC_T Qt4FileSelDesc=
+
+static DIA_FILESEL_DESC_T Qt4FileSelDesc =
 {
-	ADM_QT4_fileSel::init,	
+	ADM_QT4_fileSel::init,
 	ADM_QT4_fileSel::GUI_FileSelRead,
 	ADM_QT4_fileSel::GUI_FileSelWrite,
 	ADM_QT4_fileSel::GUI_FileSelRead,
@@ -225,15 +224,9 @@
 	ADM_QT4_fileSel::FileSel_SelectDir
 };
 
-
-
 // Hook our functions
 void initFileSelector(void)
 {
 	DIA_fileSelInit(&Qt4FileSelDesc);
 }
 
-
-
-//****************************************************************************************************
-//EOF

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/main.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/main.cpp	2008-04-01 13:33:36 UTC (rev 3959)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/main.cpp	2008-04-01 13:36:23 UTC (rev 3960)
@@ -274,7 +274,7 @@
 
     UI_RunApp();
 
-#ifdef ADM_WIN32
+#ifdef __MINGW32__
 	__except1(exceptionHandler);
 #endif
 



From gruntster at mail.berlios.de  Tue Apr  1 15:39:51 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Tue, 1 Apr 2008 15:39:51 +0200
Subject: [Avidemux-svn-commit] r3961 - branches/avidemux_2.5_branch_gruntster
Message-ID: <200804011339.m31Ddpkk000475@sheep.berlios.de>

Author: gruntster
Date: 2008-04-01 15:39:50 +0200 (Tue, 01 Apr 2008)
New Revision: 3961

Modified:
   branches/avidemux_2.5_branch_gruntster/CMakeLists.txt
Log:
[Win32] use unique image bases for DLLs and suppress auto import warnings

Modified: branches/avidemux_2.5_branch_gruntster/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/CMakeLists.txt	2008-04-01 13:36:23 UTC (rev 3960)
+++ branches/avidemux_2.5_branch_gruntster/CMakeLists.txt	2008-04-01 13:39:50 UTC (rev 3961)
@@ -50,6 +50,8 @@
 
 IF (WIN32)
 	SET(BIN_DIR .)
+	SET(CMAKE_SHARED_LINKER_FLAGS "${CMAKE_SHARED_LINKER_FLAGS} -Wl,-enable-auto-image-base -Wl,-enable-auto-import")
+	SET(CMAKE_EXE_LINKER_FLAGS "${CMAKE_EXE_LINKER_FLAGS} -Wl,-enable-auto-import")
 
 	IF (CMAKE_BUILD_TYPE STREQUAL "Release")
 		SET(CMAKE_EXE_LINKER_FLAGS "${CMAKE_EXE_LINKER_FLAGS} -Wl,-s")



From gruntster at mail.berlios.de  Tue Apr  1 17:27:42 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Tue, 1 Apr 2008 17:27:42 +0200
Subject: [Avidemux-svn-commit] r3962 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui
Message-ID: <200804011527.m31FRg7A011525@sheep.berlios.de>

Author: gruntster
Date: 2008-04-01 17:27:40 +0200 (Tue, 01 Apr 2008)
New Revision: 3962

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/file_qt4.cpp
Log:
[Factory] switch Qt4 Open and Save dialogs

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/file_qt4.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/file_qt4.cpp	2008-04-01 13:39:50 UTC (rev 3961)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/file_qt4.cpp	2008-04-01 15:27:40 UTC (rev 3962)
@@ -219,8 +219,8 @@
 	ADM_QT4_fileSel::GUI_FileSelWrite,
 	ADM_QT4_fileSel::GUI_FileSelRead,
 	ADM_QT4_fileSel::GUI_FileSelWrite,
+	ADM_QT4_fileSel::FileSel_SelectRead,
 	ADM_QT4_fileSel::FileSel_SelectWrite,
-	ADM_QT4_fileSel::FileSel_SelectRead,
 	ADM_QT4_fileSel::FileSel_SelectDir
 };
 



From mean at mail.berlios.de  Tue Apr  1 19:37:50 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Tue, 1 Apr 2008 19:37:50 +0200
Subject: [Avidemux-svn-commit] r3963 - in
	branches/avidemux_2.5_branch_gruntster/avidemux:
	ADM_coreUI/include ADM_coreUI/src
	ADM_userInterfaces/ADM_GTK/ADM_dialogFactory
	ADM_userInterfaces/ADM_NONE/ADM_dialogFactory
Message-ID: <200804011737.m31HboiU015417@sheep.berlios.de>

Author: mean
Date: 2008-04-01 19:37:49 +0200 (Tue, 01 Apr 2008)
New Revision: 3963

Added:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_slider.cpp
Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_coreUI_internal.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_factory.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_factory.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_dialogFactory.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_integer.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_toggle.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialogFactory/FAC_toggle.cpp
Log:
[Merge]


Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_coreUI_internal.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_coreUI_internal.h	2008-04-01 15:27:40 UTC (rev 3962)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_coreUI_internal.h	2008-04-01 17:37:49 UTC (rev 3963)
@@ -41,6 +41,7 @@
 typedef uint8_t DIA_FACTORY_RUN(const char *title,uint32_t nb,diaElem **elems);
 typedef struct
 {
+	COREUI_GET_VERSION   *FactoryGetVersion;
 	DIA_FACTORY_RUN      *FactoryRun;
 	DIA_FACTORY_RUN_TABS *FactoryRunTab;
 //	
@@ -94,6 +95,21 @@
 // Frame
 	CREATE_FRAME_T       *CreateFrame;
 	DELETE_DIA_ELEM_T    *DestroyFrame;
+// Toggle uint
+	CREATE_TOGGLE_UINT   *CreateToggleUint;
+	DELETE_DIA_ELEM_T    *DestroyToggleUint;
+// Toggle int
+	CREATE_TOGGLE_INT    *CreateToggleInt;
+	DELETE_DIA_ELEM_T    *DestroyToggleInt;
+// Regular Toggle	
+	CREATE_TOGGLE_T      *CreateToggle;
+	DELETE_DIA_ELEM_T    *DestroyToggle;
+// Uslider
+	CREATE_USLIDER_T     *CreateUSlider;
+	DELETE_DIA_ELEM_T    *DestroyUSlider;
+// Slider
+	CREATE_SLIDER_T      *CreateSlider;
+	DELETE_DIA_ELEM_T    *DestroySlider;
 }FactoryDescriptor;
 //
 uint8_t DIA_factoryInit(FactoryDescriptor *d);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_factory.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_factory.h	2008-04-01 15:27:40 UTC (rev 3962)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_factory.h	2008-04-01 17:37:49 UTC (rev 3963)
@@ -1,6 +1,9 @@
 /***************************************************************************
                           DIA_factory.h
   Handles univeral dialog
+  
+  DO NOT USE TEMPLATE HERE!
+  
   (C) Mean 2006 fixounet at free.fr
 
  ***************************************************************************/
@@ -18,6 +21,10 @@
 
 #include "ADM_assert.h"
 
+#define ADM_COREUI_MAJOR 1
+#define ADM_COREUI_MINOR 0
+#define ADM_COREUI_PATCH 0
+
 typedef enum 
 {
   ELEM_INVALID=0,
@@ -85,10 +92,9 @@
 
 typedef void      DELETE_DIA_ELEM_T(diaElem *widget);
 typedef void      FINALIZE_DIA_ELEM_T(void);
+typedef void      COREUI_GET_VERSION(uint32_t *maj,uint32_t *min,uint32_t *patch);
 /*********************************************/
 typedef diaElem  *(CREATE_BUTTON_T)(const char *toggleTitle, ADM_FAC_CALLBACK *cb,void *cookie,const char *tip);
-
-
 class diaElemButton : public diaElem
 {
   protected:
@@ -118,35 +124,65 @@
   void      enable(uint32_t onoff) ;
 };
 /************************************/
-template <typename T>
-class diaElemGenericSlider : public diaElem
+class diaElemSliderBase : public diaElem
 {
   protected:
     
-    T min,max,incr;
-    uint32_t digits;
+      uint32_t digits;
 public:
-    diaElemGenericSlider(T *value,const char *toggleTitle, T min,T max,T incr = 1, const char *tip=NULL);
-  virtual   ~diaElemGenericSlider() ;
+	                diaElemSliderBase() : diaElem(ELEM_SLIDER) {}
+  virtual           ~diaElemSliderBase() {};
+  virtual uint8_t   setDigits(uint32_t digits) { this->digits = digits; }
+};
+
+typedef diaElem *CREATE_USLIDER_T(uint32_t *value,const char *toggleTitle, uint32_t min,uint32_t max,uint32_t incr , const char *tip);
+typedef diaElem *CREATE_SLIDER_T(int32_t *value,const char *toggleTitle, int32_t min,int32_t max,int32_t incr , const char *tip);
+class diaElemUSlider : public diaElemSliderBase
+{
+  protected:
+	  uint32_t min,max,incr;
+public:
+	diaElemUSlider(uint32_t *value,const char *toggleTitle, uint32_t min,uint32_t max,uint32_t incr = 1, const char *tip=NULL);
+  virtual   ~diaElemUSlider() ;
   void      setMe(void *dialog, void *opaque,uint32_t line);
   void      getMe(void);
   void      enable(uint32_t onoff) ;
-  void      setDigits(uint32_t digits) { this->digits = digits; }
+  uint8_t   setDigits(uint32_t digits) ;
 };
-typedef diaElemGenericSlider <int32_t> diaElemSlider;
-/* Same but unsigned */
-typedef diaElemGenericSlider <uint32_t> diaElemUSlider;
-/* Same but float */
-typedef diaElemGenericSlider <ELEM_TYPE_FLOAT> diaElemFSlider;
-
+class diaElemSlider : public diaElemSliderBase
+{
+  protected:
+    
+	  int32_t min,max,incr;
+    
+public:
+	diaElemSlider(int32_t *value,const char *toggleTitle, int32_t min,int32_t max,int32_t incr = 1, const char *tip=NULL);
+  virtual   ~diaElemSlider() ;
+  void      setMe(void *dialog, void *opaque,uint32_t line);
+  void      getMe(void);
+  void      enable(uint32_t onoff) ;
+  uint8_t   setDigits(uint32_t digits) ;
+  
+};
 /*********************************************/
-class diaElemToggle : public diaElem
+typedef diaElem *CREATE_TOGGLE(uint32_t *toggleValue,const char *toggleTitle, const char *tip);
+class diaElemToggleBase : public diaElem
 {
   protected:
     dialElemLink        links[MENU_MAX_lINK];
     uint32_t            nbLink;
     
 public:
+			diaElemToggleBase() :diaElem(ELEM_TOGGLE)
+						{};
+  virtual   ~diaElemToggleBase() {};
+  virtual uint8_t   link(uint32_t onoff,diaElem *w)=0;
+};
+typedef diaElem *CREATE_TOGGLE_T(uint32_t *toggleValue,const char *toggleTitle, const char *tip);
+class diaElemToggle : public diaElemToggleBase
+{
+  protected:
+public:
             diaElemToggle(uint32_t *toggleValue,const char *toggleTitle, const char *tip=NULL);
   virtual   ~diaElemToggle() ;
   void      setMe(void *dialog, void *opaque,uint32_t line);
@@ -157,6 +193,8 @@
   uint8_t   link(uint32_t onoff,diaElem *w);
 };
 /*********************************************/
+typedef diaElem *CREATE_TOGGLE_UINT(uint32_t *toggleValue,const char *toggleTitle, uint32_t *uintval, 
+								const char *name,uint32_t min,uint32_t max,const char *tip=NULL);
 class diaElemToggleUint : public diaElem
 {
   protected:
@@ -165,7 +203,8 @@
         void *widgetUint;
         uint32_t _min,_max;
 public:
-            diaElemToggleUint(uint32_t *toggleValue,const char *toggleTitle, uint32_t *uintval, const char *name,uint32_t min,uint32_t max,const char *tip=NULL);
+            diaElemToggleUint(uint32_t *toggleValue,const char *toggleTitle, uint32_t *uintval,
+            					const char *name,uint32_t min,uint32_t max,const char *tip=NULL);
   virtual   ~diaElemToggleUint() ;
   void      setMe(void *dialog, void *opaque,uint32_t line);
   void      getMe(void);
@@ -173,16 +212,24 @@
   void      finalize(void);
   void      updateMe();
 };
-class diaElemToggleInt : public diaElemToggleUint
+typedef diaElem *CREATE_TOGGLE_INT(uint32_t *toggleValue,const char *toggleTitle, int32_t *intval, 
+									const char *name,int32_t min,int32_t max,const char *tip=NULL);
+class diaElemToggleInt : public diaElem
 {
   protected:
-        int32_t *emb;
-        int32_t _min,_max;
+	  		 int32_t *emb;
+	         const char *embName;
+	         void *widgetUint;
+	         int32_t _min,_max;
 public:
-            diaElemToggleInt(uint32_t *toggleValue,const char *toggleTitle, int32_t *uintval, const char *name,int32_t min,int32_t max,const char *tip=NULL);
+            diaElemToggleInt(uint32_t *toggleValue,const char *toggleTitle, int32_t *uintval,
+            				const char *name,int32_t min,int32_t max,const char *tip=NULL);
   virtual   ~diaElemToggleInt() ;
   void      setMe(void *dialog, void *opaque,uint32_t line);
   void      getMe(void);
+  void      finalize(void);
+  void      updateMe();
+  void      enable(uint32_t onoff) ;
 };
 /*********************************************/
 typedef diaElem  *(CREATE_INTEGER_T)(int32_t *intValue,const char *toggleTitle,int32_t min, int32_t max,const char *tip);
@@ -467,6 +514,7 @@
   void getMe(void) ;
 };
 /*********************************************/
+typedef diaElem *(CREATE_TAB_T )(const char *toggleTitle, uint32_t nb, diaElem **content);
 class diaElemTabs 
 {
   public:

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_factory.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_factory.cpp	2008-04-01 15:27:40 UTC (rev 3962)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_factory.cpp	2008-04-01 17:37:49 UTC (rev 3963)
@@ -29,8 +29,21 @@
  */
 uint8_t  DIA_factoryInit(FactoryDescriptor *d)
 {
+	uint32_t major,minor,patch;
 	Factory=d;
-	return 1;
+	d->FactoryGetVersion(&major,&minor,&patch);
+	printf("[COREUI] Compiled with %02d.%02d.%02d\n",ADM_COREUI_MAJOR,ADM_COREUI_MINOR,ADM_COREUI_PATCH);
+	printf("[COREUI] Linked with   %02d.%02d.%02d\n",major,minor,patch);
+	if(major!=ADM_COREUI_MAJOR)
+	{
+			printf("[CoreUI]Incompatible COREUI Major version, compiled with %d, using %d\n",ADM_COREUI_MAJOR,major);
+			ADM_assert(0);
+	}
+	if(minor!=ADM_COREUI_MINOR)
+	{
+		printf("[CoreUI] Maybe Incompatible COREUI Minor version, compiled with %d, using %d\n",ADM_COREUI_MINOR,minor);
+	}
+	printf("[CoreUI] Compiled with patch version %d, using %d\n",ADM_COREUI_PATCH,patch);
 }
 // ****************** All ************************
 uint8_t diaFactoryRun(const char *title,uint32_t nb,diaElem **elems)
@@ -409,5 +422,137 @@
 }
  
 DIA_MKSTUBS(diaElemFrame)
+// ****************** diaElemToggleUint ********************
+diaElemToggleUint ::diaElemToggleUint(uint32_t *toggleValue,const char *toggleTitle, uint32_t *uintval, const char *name,uint32_t min,uint32_t max,const char *tip):
+	diaElem(ELEM_TOGGLE_UINT)
+{
+	ADM_assert(Factory); 
+	internalPointer=Factory->CreateToggleUint(toggleValue,toggleTitle,uintval,name,min,max,tip);
+}
+diaElemToggleUint ::~diaElemToggleUint()
+	{
+	
+	ADM_assert(Factory); 
+	Factory->DestroyToggleUint(internalPointer);
+	internalPointer=NULL;
+}
+void      diaElemToggleUint::finalize(void)
+	{ 
+		ADM_assert(internalPointer); 
+		internalPointer->finalize(); 
+	}
+void      diaElemToggleUint::enable(uint32_t onoff)
+	{ 
+		ADM_assert(internalPointer); 
+		internalPointer->enable(onoff); 
+	}
+DIA_MKSTUBS(diaElemToggleUint)
+// ****************** diaElemToggleInt ********************
+diaElemToggleInt ::diaElemToggleInt(uint32_t *toggleValue,const char *toggleTitle, int32_t *uintval, 
+									const char *name,int32_t min,int32_t max,const char *tip):
+	diaElem(ELEM_TOGGLE_INT)
+{
+	ADM_assert(Factory); 
+	internalPointer=Factory->CreateToggleInt(toggleValue,toggleTitle,uintval,name,min,max,tip);
+}
+diaElemToggleInt ::~diaElemToggleInt()
+	{
+	
+	ADM_assert(Factory); 
+	Factory->DestroyToggleInt(internalPointer);
+	internalPointer=NULL;
+}
+void      diaElemToggleInt::finalize(void)
+	{ 
+		ADM_assert(internalPointer); 
+		internalPointer->finalize(); 
+	}
+void      diaElemToggleInt::enable(uint32_t onoff)
+	{ 
+		ADM_assert(internalPointer); 
+		internalPointer->enable(onoff); 
+	}
+DIA_MKSTUBS(diaElemToggleInt)
+// ****************** diaElemToggle ********************
+diaElemToggle ::diaElemToggle(uint32_t *toggleValue,const char *toggleTitle, const char *tip):
+	diaElemToggleBase()
+{
+	ADM_assert(Factory); 
+	internalPointer=Factory->CreateToggle(toggleValue,toggleTitle,tip);
+}
+diaElemToggle ::~diaElemToggle()
+	{
+	
+	ADM_assert(Factory); 
+	Factory->DestroyToggle(internalPointer);
+	internalPointer=NULL;
+}
+void      diaElemToggle::finalize(void)
+	{ 
+		ADM_assert(internalPointer); 
+		internalPointer->finalize(); 
+	}
+void      diaElemToggle::enable(uint32_t onoff)
+	{ 
+		ADM_assert(internalPointer); 
+		internalPointer->enable(onoff); 
+	}
+uint8_t   diaElemToggle::link(uint32_t onoff,diaElem *w)
+{
+	diaElemToggleBase *cast=(diaElemToggleBase *)internalPointer;
+			cast->link(onoff,w);	
+}
+DIA_MKSTUBS(diaElemToggle)
 //
+// ****************** diaElemUSlider ********************
+diaElemUSlider ::diaElemUSlider(uint32_t *value,const char *toggleTitle, uint32_t min,uint32_t max,uint32_t incr , const char *tip):
+	diaElemSliderBase()
+{
+	ADM_assert(Factory); 
+	internalPointer=Factory->CreateUSlider(value,toggleTitle,min,max,incr,tip);
+}
+diaElemUSlider ::~diaElemUSlider()
+	{
+	
+	ADM_assert(Factory); 
+	Factory->DestroyUSlider(internalPointer);
+	internalPointer=NULL;
+}
+void      diaElemUSlider::enable(uint32_t onoff)
+	{ 
+		ADM_assert(internalPointer); 
+		internalPointer->enable(onoff); 
+	}
+uint8_t   diaElemUSlider::setDigits(uint32_t digits)
+{
+	diaElemSliderBase *cast=(diaElemSliderBase *)internalPointer;
+			cast->setDigits(digits);	
+}
+DIA_MKSTUBS(diaElemUSlider)
+// ****************** diaElemSlider ********************
+diaElemSlider ::diaElemSlider(int32_t *value,const char *toggleTitle, int32_t min,int32_t max,int32_t incr , const char *tip):
+	diaElemSliderBase()
+{
+	ADM_assert(Factory); 
+	internalPointer=Factory->CreateSlider(value,toggleTitle,min,max,incr,tip);
+}
+diaElemSlider ::~diaElemSlider()
+	{
+	
+	ADM_assert(Factory); 
+	Factory->DestroySlider(internalPointer);
+	internalPointer=NULL;
+}
+void      diaElemSlider::enable(uint32_t onoff)
+	{ 
+		ADM_assert(internalPointer); 
+		internalPointer->enable(onoff); 
+	}
+uint8_t   diaElemSlider::setDigits(uint32_t digits)
+{
+	diaElemSliderBase *cast=(diaElemSliderBase *)internalPointer;
+			cast->setDigits(digits);	
+}
+DIA_MKSTUBS(diaElemSlider)
+//
 // EOF

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/CMakeLists.txt	2008-04-01 15:27:40 UTC (rev 3962)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/CMakeLists.txt	2008-04-01 17:37:49 UTC (rev 3963)
@@ -16,7 +16,8 @@
 	FAC_notch.cpp
 	FAC_toggle.cpp
 	FAC_threadCount.cpp
+	FAC_slider.cpp
 	FAC_matrix.cpp)
 
 ADD_ADM_LIB_GTK_TARGET(${ADM_LIB} ${${ADM_LIB}_SRCS})
-ADD_CFLAGS_GTK_TARGET(${ADM_LIB} ${GTK_CFLAGS})
\ No newline at end of file
+ADD_CFLAGS_GTK_TARGET(${ADM_LIB} ${GTK_CFLAGS})

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_dialogFactory.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_dialogFactory.cpp	2008-04-01 15:27:40 UTC (rev 3962)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_dialogFactory.cpp	2008-04-01 17:37:49 UTC (rev 3963)
@@ -325,12 +325,33 @@
 extern DELETE_DIA_ELEM_T    gtkDestroyFile;
 extern CREATE_DIR_T         gtkCreateDir;
 extern DELETE_DIA_ELEM_T    gtkDestroyDir;
-CREATE_FRAME_T				gtkCreateFrame;
+extern CREATE_FRAME_T		gtkCreateFrame;
 extern DELETE_DIA_ELEM_T    gtkDestroyFrame;
-
+extern CREATE_TOGGLE_UINT   gtkCreateToggleUint;
+extern DELETE_DIA_ELEM_T    gtkDestroyToggleUint;
+extern CREATE_TOGGLE_INT    gtkCreateToggleInt;
+extern DELETE_DIA_ELEM_T    gtkDestroyToggleInt;
+extern CREATE_TOGGLE_T      gtkCreateToggle;
+extern DELETE_DIA_ELEM_T    gtkDestroyToggle;
+extern CREATE_USLIDER_T     gtkCreateUSlider;
+extern DELETE_DIA_ELEM_T    gtkDestroyUSlider;
+extern 	CREATE_SLIDER_T     gtkCreateSlider;
+extern 	DELETE_DIA_ELEM_T   gtkDestroySlider;
+/**
+ *  \fn gtkFactoryGetVersion
+ * 	\brief returns the version this has been compiled with
+ */
+void      gtkFactoryGetVersion(uint32_t *maj,uint32_t *minor,uint32_t *patch)
+{
+	*maj=ADM_COREUI_MAJOR;
+	*minor=ADM_COREUI_MINOR;
+	*patch=ADM_COREUI_PATCH;
+	
+}
 //************
 static FactoryDescriptor GtkFactoryDescriptor=
 {
+	&gtkFactoryGetVersion,
 	&gtkDiaFactoryRun,
 	&gtkDiaFactoryRunTabs,
 	// Buttons
@@ -382,8 +403,20 @@
 	&gtkDestroyDir,
 	// Frame
 	&gtkCreateFrame,
-	&gtkDestroyFrame
-		
+	&gtkDestroyFrame,
+    // Toggle uint/int
+	&gtkCreateToggleUint,
+	&gtkDestroyToggleUint,
+	&gtkCreateToggleInt,
+	&gtkDestroyToggleInt,
+	// Regular toggle
+	&gtkCreateToggle,
+	&gtkDestroyToggle,
+	// Slider
+	&gtkCreateUSlider,
+	&gtkDestroyUSlider,
+	&gtkCreateSlider,
+	&gtkDestroySlider
 };
 
 /**

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_integer.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_integer.cpp	2008-04-01 15:27:40 UTC (rev 3962)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_integer.cpp	2008-04-01 17:37:49 UTC (rev 3963)
@@ -206,120 +206,5 @@
 	ADM_GtkFactory::diaElemUInteger *a=(ADM_GtkFactory::diaElemUInteger *)e;
 	delete a;
 }
-//****************************************************
-template <typename T>
-static
-uint32_t diaElemSliderDigitsDefault (T incr)
-{
-    return 0; // used for int types; a specialization overrides this for float
-}
 
-template <>  // specialization of above...
-uint32_t diaElemSliderDigitsDefault (ELEM_TYPE_FLOAT incr) // ...for float
-{
-    char tmp [32];
-    uint32_t digits = 3;
-    sprintf (tmp, "%.*f", digits, incr);
-    const char * cptr = tmp + strlen (tmp);
-    while (*--cptr == '0')
-        --digits;
-
-    if (digits < 1)
-        return 1;
-    else
-        return digits;
-}
-
-template <typename T>
-diaElemGenericSlider<T>::diaElemGenericSlider(T *value,const char *toggleTitle, T min,T max,T incr,const char *tip)
-    : diaElem(ELEM_SLIDER),
-      min (min),
-      max (max),
-      incr (incr),
-      digits (diaElemSliderDigitsDefault (incr))
-{
-    param = (void *)value;
-    paramTitle = toggleTitle;
-    this->tip = tip;
-    size = 2;
-}
-
-template <typename T>
-diaElemGenericSlider<T>::~diaElemGenericSlider()
-{
-}
-
-template <typename T>
-void diaElemGenericSlider<T>::setMe(void *dialog, void *opaque,uint32_t line)
-{
-  GtkWidget *label = gtk_label_new_with_mnemonic (paramTitle);
-  gtk_misc_set_alignment (GTK_MISC (label), 0.0, 0.5);
-  gtk_widget_show(label);
-  
-  gtk_table_attach (GTK_TABLE (opaque), label, 0, 2, line, line+1,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  
-  T val=*(T *)param;
-
-  GtkAdjustment * adj = (GtkAdjustment *) gtk_adjustment_new (val, min, max, incr, incr, 0);
-
-  GtkWidget *spinner = gtk_spin_button_new (adj, 1, 0);
-  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON(spinner), TRUE);
-  gtk_spin_button_set_digits  (GTK_SPIN_BUTTON(spinner), digits);
-  
-  GtkWidget *slider = gtk_hscale_new (adj);
-  gtk_scale_set_draw_value (GTK_SCALE (slider), FALSE);
-  gtk_scale_set_digits (GTK_SCALE (slider), digits);
-  
-  GtkWidget *hbox = gtk_hbox_new (FALSE, 5);
-  gtk_box_pack_start (GTK_BOX (hbox), slider, TRUE, TRUE, 0);
-  gtk_box_pack_start (GTK_BOX (hbox), spinner, FALSE, FALSE, 0);
-
-  gtk_table_attach (GTK_TABLE (opaque), hbox, 0, 2, line+1, line+2,
-                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  
-  gtk_label_set_mnemonic_widget (GTK_LABEL(label), hbox);
-  gtk_widget_show (hbox);
-  gtk_widget_show (spinner);
-  gtk_widget_show (slider);
-  
-  myWidget=(void *)slider;
-  if(readOnly)
-  {
-    gtk_widget_set_sensitive(spinner,0);
-    gtk_widget_set_sensitive(slider,0);
-  }
-  if(tip)
-  {
-      GtkTooltips *tooltips= gtk_tooltips_new ();
-      gtk_tooltips_set_tip (tooltips, spinner, tip, NULL);
-      gtk_tooltips_set_tip (tooltips, slider, tip, NULL);
-  }
-}
-
-template <typename T>
-void diaElemGenericSlider<T>::getMe(void)
-{
-  GtkWidget *widget=(GtkWidget *)myWidget;
-  T *val=(T *)param;
-  ADM_assert(widget);
-  GtkAdjustment *adj = gtk_range_get_adjustment (GTK_RANGE(widget));
-  *val = (T)GTK_ADJUSTMENT(adj)->value;
-  if(*val<min) *val=min;
-  if(*val>max) *val=max;
-}
-
-template <typename T>
-void diaElemGenericSlider<T>::enable(uint32_t onoff)
-{
-  GtkWidget *widget=(GtkWidget *)myWidget;
-  gtk_widget_set_sensitive(GTK_WIDGET(myWidget),onoff);
-}
-
-template class diaElemGenericSlider <int32_t>;
-template class diaElemGenericSlider <uint32_t>;
-template class diaElemGenericSlider <ELEM_TYPE_FLOAT>;
-
 //EOF

Added: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_slider.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_slider.cpp	2008-04-01 15:27:40 UTC (rev 3962)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_slider.cpp	2008-04-01 17:37:49 UTC (rev 3963)
@@ -0,0 +1,250 @@
+/***************************************************************************
+  FAC_integer.cpp
+  Handle dialog factory elements : Integer, Slider, and variations thereupon
+  (C) 2006 Mean Fixounet at free.fr 
+***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#include "../ADM_toolkit_gtk/toolkit_gtk.h"
+#include "DIA_factory.h"
+
+
+
+namespace ADM_GtkFactory
+{
+
+
+class diaElemUSlider : public diaElemSliderBase
+{
+  protected:
+	  uint32_t min,max,incr;
+public:
+	diaElemUSlider(uint32_t *value,const char *toggleTitle, uint32_t min,uint32_t max,uint32_t incr = 1, const char *tip=NULL);
+  virtual   ~diaElemUSlider() ;
+  void      setMe(void *dialog, void *opaque,uint32_t line);
+  void      getMe(void);
+  void      enable(uint32_t onoff) ;
+  
+};
+class diaElemSlider : public diaElemSliderBase
+{
+  protected:
+    
+	  int32_t min,max,incr;
+    
+public:
+	diaElemSlider(int32_t *value,const char *toggleTitle, int32_t min,int32_t max,int32_t incr = 1, const char *tip=NULL);
+  virtual   ~diaElemSlider() ;
+  void      setMe(void *dialog, void *opaque,uint32_t line);
+  void      getMe(void);
+  void      enable(uint32_t onoff) ;
+  
+  
+};
+
+//****************************************************
+
+
+
+diaElemSlider::diaElemSlider(int32_t *value,const char *toggleTitle, int32_t min,int32_t max,
+				int32_t incr,const char *tip)
+    : diaElemSliderBase()
+    {
+      this->min=min;
+      this->max=max;
+      this->incr=incr;
+      incr=0;
+    param = (void *)value;
+    paramTitle = toggleTitle;
+    this->tip = tip;
+    size = 2;
+}
+
+diaElemSlider::~diaElemSlider()
+{
+}
+
+void diaElemSlider::setMe(void *dialog, void *opaque,uint32_t line)
+{
+  GtkWidget *label = gtk_label_new_with_mnemonic (paramTitle);
+  gtk_misc_set_alignment (GTK_MISC (label), 0.0, 0.5);
+  gtk_widget_show(label);
+  
+  gtk_table_attach (GTK_TABLE (opaque), label, 0, 2, line, line+1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  
+  int32_t val=*(int32_t  *)param;
+
+  GtkAdjustment * adj = (GtkAdjustment *) gtk_adjustment_new (val, min, max, incr, incr, 0);
+
+  GtkWidget *spinner = gtk_spin_button_new (adj, 1, 0);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON(spinner), TRUE);
+  gtk_spin_button_set_digits  (GTK_SPIN_BUTTON(spinner), digits);
+  
+  GtkWidget *slider = gtk_hscale_new (adj);
+  gtk_scale_set_draw_value (GTK_SCALE (slider), FALSE);
+  gtk_scale_set_digits (GTK_SCALE (slider), digits);
+  
+  GtkWidget *hbox = gtk_hbox_new (FALSE, 5);
+  gtk_box_pack_start (GTK_BOX (hbox), slider, TRUE, TRUE, 0);
+  gtk_box_pack_start (GTK_BOX (hbox), spinner, FALSE, FALSE, 0);
+
+  gtk_table_attach (GTK_TABLE (opaque), hbox, 0, 2, line+1, line+2,
+                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  
+  gtk_label_set_mnemonic_widget (GTK_LABEL(label), hbox);
+  gtk_widget_show (hbox);
+  gtk_widget_show (spinner);
+  gtk_widget_show (slider);
+  
+  myWidget=(void *)slider;
+  if(readOnly)
+  {
+    gtk_widget_set_sensitive(spinner,0);
+    gtk_widget_set_sensitive(slider,0);
+  }
+  if(tip)
+  {
+      GtkTooltips *tooltips= gtk_tooltips_new ();
+      gtk_tooltips_set_tip (tooltips, spinner, tip, NULL);
+      gtk_tooltips_set_tip (tooltips, slider, tip, NULL);
+  }
+}
+
+void diaElemSlider::getMe(void)
+{
+  GtkWidget *widget=(GtkWidget *)myWidget;
+  uint32_t *val=(uint32_t *)param;
+  ADM_assert(widget);
+  GtkAdjustment *adj = gtk_range_get_adjustment (GTK_RANGE(widget));
+  *val = (uint32_t)GTK_ADJUSTMENT(adj)->value;
+  if(*val<min) *val=min;
+  if(*val>max) *val=max;
+}
+
+void diaElemSlider::enable(uint32_t onoff)
+{
+  GtkWidget *widget=(GtkWidget *)myWidget;
+  gtk_widget_set_sensitive(GTK_WIDGET(myWidget),onoff);
+}
+//********************** USLIDER***********
+
+
+diaElemUSlider::diaElemUSlider(uint32_t *value,const char *toggleTitle, 
+		uint32_t min,uint32_t max,uint32_t incr,const char *tip)
+
+    : diaElemSliderBase()
+{
+      this->min=min;
+      this->max=max;
+      this->incr=incr;
+      digits=0;
+    param = (void *)value;
+    paramTitle = toggleTitle;
+    this->tip = tip;
+    size = 2;
+}
+
+diaElemUSlider::~diaElemUSlider()
+{
+}
+
+void diaElemUSlider::setMe(void *dialog, void *opaque,uint32_t line)
+{
+  GtkWidget *label = gtk_label_new_with_mnemonic (paramTitle);
+  gtk_misc_set_alignment (GTK_MISC (label), 0.0, 0.5);
+  gtk_widget_show(label);
+  
+  gtk_table_attach (GTK_TABLE (opaque), label, 0, 2, line, line+1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  
+  uint32_t val=*(uint32_t *)param;
+
+  GtkAdjustment * adj = (GtkAdjustment *) gtk_adjustment_new (val, min, max, incr, incr, 0);
+
+  GtkWidget *spinner = gtk_spin_button_new (adj, 1, 0);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON(spinner), TRUE);
+  gtk_spin_button_set_digits  (GTK_SPIN_BUTTON(spinner), digits);
+  
+  GtkWidget *slider = gtk_hscale_new (adj);
+  gtk_scale_set_draw_value (GTK_SCALE (slider), FALSE);
+  gtk_scale_set_digits (GTK_SCALE (slider), digits);
+  
+  GtkWidget *hbox = gtk_hbox_new (FALSE, 5);
+  gtk_box_pack_start (GTK_BOX (hbox), slider, TRUE, TRUE, 0);
+  gtk_box_pack_start (GTK_BOX (hbox), spinner, FALSE, FALSE, 0);
+
+  gtk_table_attach (GTK_TABLE (opaque), hbox, 0, 2, line+1, line+2,
+                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  
+  gtk_label_set_mnemonic_widget (GTK_LABEL(label), hbox);
+  gtk_widget_show (hbox);
+  gtk_widget_show (spinner);
+  gtk_widget_show (slider);
+  
+  myWidget=(void *)slider;
+  if(readOnly)
+  {
+    gtk_widget_set_sensitive(spinner,0);
+    gtk_widget_set_sensitive(slider,0);
+  }
+  if(tip)
+  {
+      GtkTooltips *tooltips= gtk_tooltips_new ();
+      gtk_tooltips_set_tip (tooltips, spinner, tip, NULL);
+      gtk_tooltips_set_tip (tooltips, slider, tip, NULL);
+  }
+}
+
+void diaElemUSlider::getMe(void)
+{
+  GtkWidget *widget=(GtkWidget *)myWidget;
+  uint32_t *val=(uint32_t *)param;
+  ADM_assert(widget);
+  GtkAdjustment *adj = gtk_range_get_adjustment (GTK_RANGE(widget));
+  *val = (uint32_t)GTK_ADJUSTMENT(adj)->value;
+  if(*val<min) *val=min;
+  if(*val>max) *val=max;
+}
+
+void diaElemUSlider::enable(uint32_t onoff)
+{
+  GtkWidget *widget=(GtkWidget *)myWidget;
+  gtk_widget_set_sensitive(GTK_WIDGET(myWidget),onoff);
+}
+//****************************************************
+} // End of namespace
+//****************************Hoook*****************
+
+diaElem  *gtkCreateSlider(int32_t *value,const char *toggleTitle, int32_t min,int32_t max,int32_t incr , const char *tip)
+{
+	return new  ADM_GtkFactory::diaElemSlider(value,toggleTitle,min,max,incr,tip);
+}
+void gtkDestroySlider(diaElem *e)
+{
+	ADM_GtkFactory::diaElemSlider *a=(ADM_GtkFactory::diaElemSlider *)e;
+	delete a;
+}
+diaElem  *gtkCreateUSlider(uint32_t *value,const char *toggleTitle, uint32_t min,uint32_t max,uint32_t incr , const char *tip)
+{
+	return new  ADM_GtkFactory::diaElemUSlider(value,toggleTitle,min,max,incr,tip);
+}
+void gtkDestroyUSlider(diaElem *e)
+{
+	ADM_GtkFactory::diaElemUSlider *a=(ADM_GtkFactory::diaElemUSlider *)e;
+	delete a;
+}
+//****************************************************
+//EOF

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_toggle.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_toggle.cpp	2008-04-01 15:27:40 UTC (rev 3962)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_toggle.cpp	2008-04-01 17:37:49 UTC (rev 3963)
@@ -16,13 +16,64 @@
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
 #include "DIA_factory.h"
 
+namespace ADM_GtkFactory
+{
+class diaElemToggle : public diaElemToggleBase
+{
+  protected:
+public:
+            diaElemToggle(uint32_t *toggleValue,const char *toggleTitle, const char *tip=NULL);
+  virtual   ~diaElemToggle() ;
+  void      setMe(void *dialog, void *opaque,uint32_t line);
+  void      getMe(void);
+  void      enable(uint32_t onoff) ;
+  void      finalize(void);
+  void      updateMe();
+  uint8_t   link(uint32_t onoff,diaElem *w);
+};
+
+class diaElemToggleUint : public diaElem
+{
+  protected:
+        uint32_t *emb;
+        const char *embName;
+        void *widgetUint;
+        uint32_t _min,_max;
+public:
+            diaElemToggleUint(uint32_t *toggleValue,const char *toggleTitle, uint32_t *uintval,
+            					const char *name,uint32_t min,uint32_t max,const char *tip=NULL);
+  virtual   ~diaElemToggleUint() ;
+  void      setMe(void *dialog, void *opaque,uint32_t line);
+  void      getMe(void);
+  void      enable(uint32_t onoff) ;
+  void      finalize(void);
+  void      updateMe();
+};
+class diaElemToggleInt : public diaElem
+{
+  protected:
+	  		 int32_t *emb;
+	         const char *embName;
+	         void *widgetUint;
+	         int32_t _min,_max;
+public:
+            diaElemToggleInt(uint32_t *toggleValue,const char *toggleTitle, int32_t *uintval,
+            				const char *name,int32_t min,int32_t max,const char *tip=NULL);
+  virtual   ~diaElemToggleInt() ;
+  void      setMe(void *dialog, void *opaque,uint32_t line);
+  void      getMe(void);
+  void      finalize(void);
+  void      updateMe();
+  void      enable(uint32_t onoff) ;
+};
+
 static void cb_menu(void *w,void *p);
 static void cb_menu2(void *w,void *p);
 
 
 
 diaElemToggle::diaElemToggle(uint32_t *toggleValue,const char *toggleTitle, const char *tip)
-  : diaElem(ELEM_TOGGLE)
+  : diaElemToggleBase()
 {
   param=(void *)toggleValue;
   paramTitle=toggleTitle;
@@ -208,7 +259,7 @@
 }
 //*************************************************************************
 diaElemToggleInt::diaElemToggleInt(uint32_t *toggleValue,const char *toggleTitle, int32_t *uintval, const char *name,int32_t min,int32_t max,const char *tip)
-  : diaElemToggleUint(toggleValue,toggleTitle, NULL, name,0,0,tip)
+  : diaElem(ELEM_TOGGLE_INT)
 {
   param=(void *)toggleValue;
   paramTitle=toggleTitle;
@@ -276,5 +327,67 @@
   diaElemToggleInt *me=(diaElemToggleInt *)p;
   me->updateMe();
 }
+void   diaElemToggleInt::updateMe(void)
+{
+  GtkWidget *widget=(GtkWidget *)myWidget;
+  GtkWidget *wuint=(GtkWidget *)widgetUint;
+  uint32_t val;
+  uint32_t rank;
+  ADM_assert(widget);
+  
+  
+  rank=gtk_toggle_button_get_active (GTK_TOGGLE_BUTTON (widget));
+  gtk_widget_set_sensitive(GTK_WIDGET(wuint),rank);
+    
+}
+void   diaElemToggleInt::finalize(void)
+{
+  updateMe();
+}
+void   diaElemToggleInt::enable(uint32_t onoff)
+{
+   GtkWidget *widget=(GtkWidget *)myWidget;
+  GtkWidget *wuint=(GtkWidget *)widgetUint;
+  
+  gtk_widget_set_sensitive(GTK_WIDGET(widget),onoff);
+  gtk_widget_set_sensitive(GTK_WIDGET(wuint),onoff);
+}
 
+} // End of namespace
+//****************************Hoook*****************
+
+diaElem  *gtkCreateToggleUint(uint32_t *toggleValue,const char *toggleTitle, uint32_t *uintval,
+		const char *name,uint32_t min,uint32_t max,const char *tip)
+{
+	return new  ADM_GtkFactory::diaElemToggleUint(toggleValue,toggleTitle, uintval,
+			name,min,max,tip);
+}
+void gtkDestroyToggleUint(diaElem *e)
+{
+	ADM_GtkFactory::diaElemToggleUint *a=(ADM_GtkFactory::diaElemToggleUint *)e;
+	delete a;
+}
+
+diaElem  *gtkCreateToggleInt(uint32_t *toggleValue,const char *toggleTitle, int32_t *uintval,
+		const char *name,int32_t min,int32_t max,const char *tip)
+{
+	return new  ADM_GtkFactory::diaElemToggleInt(toggleValue,toggleTitle, uintval,
+			name,min,max,tip);
+}
+void gtkDestroyToggleInt(diaElem *e)
+{
+	ADM_GtkFactory::diaElemToggleInt *a=(ADM_GtkFactory::diaElemToggleInt *)e;
+	delete a;
+}
+diaElem  *gtkCreateToggle(uint32_t *toggleValue,const char *toggleTitle, const char *tip)
+{
+	return new  ADM_GtkFactory::diaElemToggle(toggleValue,toggleTitle, tip);
+}
+void gtkDestroyToggle(diaElem *e)
+{
+	ADM_GtkFactory::diaElemToggle *a=(ADM_GtkFactory::diaElemToggle *)e;
+	delete a;
+}
+
+
 //EOF

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialogFactory/FAC_toggle.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialogFactory/FAC_toggle.cpp	2008-04-01 15:27:40 UTC (rev 3962)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialogFactory/FAC_toggle.cpp	2008-04-01 17:37:49 UTC (rev 3963)
@@ -29,7 +29,7 @@
 
 
 diaElemToggle::diaElemToggle(uint32_t *toggleValue,const char *toggleTitle, const char *tip)
-  : diaElem(ELEM_TOGGLE)
+  : diaElemToggleBase()
 {
 }
 
@@ -357,7 +357,7 @@
 }
 //**************************
 diaElemToggleInt::diaElemToggleInt(uint32_t *toggleValue,const char *toggleTitle, int32_t *uintval, const char *name,int32_t min,int32_t max,const char *tip)
-  :diaElemToggleUint(toggleValue,toggleTitle, NULL, name,0,0,tip)
+  :diaElem(ELEM_TOGGLE_INT)
 {
  
 }
@@ -398,7 +398,7 @@
 
 }
 //***
- 
+#if 0
  template <typename T>
  diaElemGenericSlider<T>::diaElemGenericSlider(T *value,const char *toggleTitle, T min,T max,T incr,const char *tip)
      : diaElem(ELEM_SLIDER)
@@ -429,9 +429,9 @@
  template class diaElemGenericSlider <uint32_t>;
  template class diaElemGenericSlider <ELEM_TYPE_FLOAT>;
 //****
+#endif
 
 
-
  diaElemMatrix::diaElemMatrix(uint8_t *trix,const char *toggleTitle, uint32_t trixSize,const char *tip)
    : diaElem(ELEM_MATRIX)
  {



From gruntster at mail.berlios.de  Thu Apr  3 01:54:14 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Thu, 3 Apr 2008 01:54:14 +0200
Subject: [Avidemux-svn-commit] r3964 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory
Message-ID: <200804022354.m32NsE1r010317@sheep.berlios.de>

Author: gruntster
Date: 2008-04-03 01:54:12 +0200 (Thu, 03 Apr 2008)
New Revision: 3964

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_slider.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_toggle.cpp
Log:
[Factory] fix compilation errors for Qt4

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_slider.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_slider.cpp	2008-04-01 17:37:49 UTC (rev 3963)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_slider.cpp	2008-04-02 23:54:12 UTC (rev 3964)
@@ -95,9 +95,8 @@
 
 //----------------------------------------------------------------------
 
-template <typename T>
-diaElemGenericSlider<T>::diaElemGenericSlider(T *value,const char *toggleTitle, T min,T max,T incr,const char *tip)
-  : diaElem(ELEM_SLIDER)
+diaElemUSlider::diaElemUSlider(uint32_t *value,const char *toggleTitle, uint32_t min,uint32_t max,uint32_t incr,const char *tip)
+  : diaElemSliderBase()
 {
   param=(void *)value;
   paramTitle=shortkey(toggleTitle);
@@ -108,20 +107,18 @@
   size = 2;
 }
 
-template <typename T>
-diaElemGenericSlider<T>::~diaElemGenericSlider()
+diaElemUSlider::~diaElemUSlider()
 { 
   if(paramTitle)
     delete paramTitle;
 }
 
-template <typename T>
-void diaElemGenericSlider<T>::setMe(void *dialog, void *opaque,uint32_t line)
+void diaElemUSlider::setMe(void *dialog, void *opaque,uint32_t line)
 {
   SpinSlider *slider = new SpinSlider ((QWidget *)dialog);
   slider->setMinimum(min);
   slider->setMaximum(max);
-  slider->setValue(*(T *)param);
+  slider->setValue(*(uint32_t *)param);
   slider->show();
  
   myWidget = (void *)slider;
@@ -134,18 +131,16 @@
   layout->addWidget(slider,line + 1,0,1,2);
 }
 
-template <typename T>
-void diaElemGenericSlider<T>::getMe(void)
+void diaElemUSlider::getMe(void)
 {
   SpinSlider *box=(SpinSlider *)myWidget;
-  T val=box->value();
+  uint32_t val=box->value();
   if(val<min) val=min;
   if(val>max) val=max;
-  *(T *)param=val;
+  *(uint32_t *)param=val;
 }
 
-template <typename T>
-void diaElemGenericSlider<T>::enable(uint32_t onoff) 
+void diaElemUSlider::enable(uint32_t onoff) 
 {
   SpinSlider *box=(SpinSlider *)myWidget;
   ADM_assert(box);
@@ -155,16 +150,57 @@
     box->setDisabled(1);
 }
 
-template class diaElemGenericSlider <int32_t>;
-template class diaElemGenericSlider <uint32_t>;
-template class diaElemGenericSlider <ELEM_TYPE_FLOAT>;
+diaElemSlider::diaElemSlider(int32_t *value,const char *toggleTitle, int32_t min,int32_t max,int32_t incr,const char *tip)
+  : diaElemSliderBase()
+{
+  param=(void *)value;
+  paramTitle=shortkey(toggleTitle);
+  this->min=min;
+  this->max=max;
+  this->incr=incr;
+  this->tip=tip;
+  size = 2;
+}
 
-// float doesn't really work right.  If anyone ever uses it, we can fix it by
-// providing a template specialization here that uses QDoubleSpinBox and
-// intercepts the signals to convert between an integer used by the slider and
-// the actual value (a double) used by the spinbox.  I don't have time to do
-// that right now (already spent too long on this) and no one is using a
-// diaElemFSlider yet anyway.
+diaElemSlider::~diaElemSlider()
+{ 
+  if(paramTitle)
+    delete paramTitle;
+}
 
-//EOF
+void diaElemSlider::setMe(void *dialog, void *opaque,uint32_t line)
+{
+  SpinSlider *slider = new SpinSlider ((QWidget *)dialog);
+  slider->setMinimum(min);
+  slider->setMaximum(max);
+  slider->setValue(*(int32_t *)param);
+  slider->show();
+ 
+  myWidget = (void *)slider;
 
+  QLabel *text = new QLabel (QString::fromUtf8(paramTitle), (QWidget *)dialog);
+  text->setBuddy (slider);
+
+  QGridLayout *layout = (QGridLayout*) opaque;
+  layout->addWidget(text,line,0,1,2);
+  layout->addWidget(slider,line + 1,0,1,2);
+}
+
+void diaElemSlider::getMe(void)
+{
+  SpinSlider *box=(SpinSlider *)myWidget;
+  int32_t val=box->value();
+  if(val<min) val=min;
+  if(val>max) val=max;
+  *(int32_t *)param=val;
+}
+
+void diaElemSlider::enable(uint32_t onoff) 
+{
+  SpinSlider *box=(SpinSlider *)myWidget;
+  ADM_assert(box);
+  if(onoff)
+    box->setEnabled(1);
+  else
+    box->setDisabled(1);
+}
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_toggle.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_toggle.cpp	2008-04-01 17:37:49 UTC (rev 3963)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_toggle.cpp	2008-04-02 23:54:12 UTC (rev 3964)
@@ -79,7 +79,7 @@
 
 
 diaElemToggle::diaElemToggle(uint32_t *toggleValue,const char *toggleTitle, const char *tip)
-  : diaElem(ELEM_TOGGLE)
+  : diaElemToggleBase()
 {
   param=(void *)toggleValue;
   paramTitle=shortkey(toggleTitle);
@@ -274,7 +274,7 @@
 //******************************************************
 
 diaElemToggleInt::diaElemToggleInt(uint32_t *toggleValue,const char *toggleTitle, int32_t *uintval, const char *name,int32_t min,int32_t max,const char *tip)
-  : diaElemToggleUint(toggleValue,toggleTitle, NULL, name,0,0,tip)
+  : diaElem(ELEM_TOGGLE_INT)
 {
    param=(void *)toggleValue;
   paramTitle=shortkey(toggleTitle);
@@ -330,6 +330,43 @@
  if(u>_max) u=_max;
  *emb=u;
 }
+
+void   diaElemToggleInt::finalize(void)
+{
+  updateMe();
+}
+void   diaElemToggleInt::updateMe(void)
+{
+  uint32_t val;
+  uint32_t rank=FALSE;
+  ADM_assert(myWidget);
+  
+  ADM_QCheckBox *box=(ADM_QCheckBox *)myWidget;
+  QSpinBox *spin=(QSpinBox *)widgetUint;
+  
+  if(Qt::Checked==box->checkState())
+  {
+    rank=TRUE;
+  }
+  spin->setEnabled(rank);
+}
+void   diaElemToggleInt::enable(uint32_t onoff)
+{
+    ADM_QCheckBox *box=(ADM_QCheckBox *)myWidget;
+      QSpinBox *spin=(QSpinBox *)widgetUint;
+  ADM_assert(box);
+  if(onoff)
+  {
+    box->setEnabled(TRUE);
+    spin->setEnabled(TRUE);
+  }
+  else
+  {
+    box->setEnabled(FALSE);
+    spin->setEnabled(FALSE);
+  }
+}
+
 //******************************************************
 
 



From gruntster at mail.berlios.de  Thu Apr  3 02:17:19 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Thu, 3 Apr 2008 02:17:19 +0200
Subject: [Avidemux-svn-commit] r3965 - in
	branches/avidemux_2.5_branch_gruntster/avidemux: ADM_codecs
	ADM_encoder ADM_userInterfaces/ADM_GTK/ADM_dialog
	ADM_userInterfaces/ADM_QT4/ADM_dialog
	ADM_userInterfaces/ADM_commonUI
Message-ID: <200804030017.m330HJfT012717@sheep.berlios.de>

Author: gruntster
Date: 2008-04-03 02:17:06 +0200 (Thu, 03 Apr 2008)
New Revision: 3965

Added:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_x264.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_x264_matrix.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_x264_matrix.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_x264_zones.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_x264_zones.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/x264.ui
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/x264_matrix.ui
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/x264_zones.ui
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/GUI_x264.cpp
Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_x264.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_x264.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_x264param.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_encCodecDesc.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encx264.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/CMakeLists.txt
Log:
[x264] new x264 dialogs for Qt4 (incomplete)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_x264.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_x264.cpp	2008-04-02 23:54:12 UTC (rev 3964)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_x264.cpp	2008-04-03 00:17:06 UTC (rev 3965)
@@ -15,6 +15,8 @@
 //
 #include "config.h"
 
+#ifdef USE_X264
+
 #include <stdio.h>
 #include <stdlib.h>
 #include <string.h>
@@ -22,165 +24,266 @@
 
 #include "ADM_default.h"
 #include "ADM_codecs/ADM_codec.h"
-#ifdef USE_X264
-
 #include "ADM_codecs/ADM_x264.h"
-extern "C"
-{
-#include "x264.h"
-};
-
 #include "ADM_assert.h"
 #include "avi_vars.h"
 
-#define HANDLE ((x264_t *)_handle)
-#define PICS ((x264_picture_t *)_pic)
+#define HANDLE ((x264_t *) _handle)
+#define PICS ((x264_picture_t *) _pic)
 
-
 typedef struct avcc		// for avcc atom
 {
-  uint8_t *sps;
-  int sps_length;
-  uint8_t *pps;
-  int pps_length;
+	uint8_t *sps;
+	int sps_length;
+	uint8_t *pps;
+	int pps_length;
 } avcc;
 
-
 // Yes, ugly FIXME
-static x264_param_t     param;
-static ADM_x264Param    admParam;
+static x264_param_t param;
+static ADM_x264Param admParam;
 
+void X264Encoder::printParam(x264_param_t *x264Param)
+{
+	printf("[x264] b_repeat_headers = %d\n", x264Param->b_repeat_headers);
+	printf("[x264] i_log_level = %d\n", x264Param->i_log_level);
+	printf("[x264] i_threads = %d", x264Param->i_threads);
+
+	if (x264Param->i_threads == 0)
+		printf (" (auto)");
+	if (x264Param->i_threads == 1)
+		printf (" (disabled)");
+
+	printf("\n[x264] i_width = %d, i_height = %d\n", x264Param->i_width, x264Param->i_height);
+	printf("[x264] i_csp = %d\n", x264Param->i_csp);	
+	printf("[x264] i_fps_num = %d, i_fps_den = %d\n", x264Param->i_fps_num, x264Param->i_fps_den);
+	printf("[x264] rc.i_rc_method = %d\n", x264Param->rc.i_rc_method);
+	printf("[x264] rc.i_bitrate = %d\n", x264Param->rc.i_bitrate);
+	printf("[x264] rc.f_rf_constant = %f\n", x264Param->rc.f_rf_constant);
+	printf("[x264] rc.i_qp_constant = %d\n", x264Param->rc.i_qp_constant);	
+	printf("[x264] analyse.i_subpel_refine = %d\n", x264Param->analyse.i_subpel_refine);
+	printf("[x264] analyse.b_bframe_rdo = %d\n", x264Param->analyse.b_bframe_rdo);
+	printf("[x264] analyse.i_me_method = %d\n", x264Param->analyse.i_me_method);
+	printf("[x264] analyse.i_me_range = %d\n", x264Param->analyse.i_me_range);
+	printf("[x264] analyse.i_mv_range = %d\n", x264Param->analyse.i_mv_range);
+	printf("[x264] analyse.i_mv_range_thread = %d\n", x264Param->analyse.i_mv_range_thread);
+	printf("[x264] analyse.i_direct_mv_pred = %d\n", x264Param->analyse.i_direct_mv_pred);
+	printf("[x264] analyse.i_direct_8x8_inference = %d\n", x264Param->analyse.i_direct_8x8_inference);
+	printf("[x264] analyse.b_weighted_bipred = %d\n", x264Param->analyse.b_weighted_bipred);
+	printf("[x264] analyse.b_transform_8x8 = %d\n", x264Param->analyse.b_transform_8x8);
+	printf("[x264] analyse.inter = %d\n", x264Param->analyse.inter);
+	printf("[x264] b_cabac = %d\n", x264Param->b_cabac);
+	printf("[x264] b_interlaced = %d\n", x264Param->b_interlaced);
+	printf("[x264] b_deblocking_filter = %d\n", x264Param->b_deblocking_filter);
+	printf("[x264] i_deblocking_filter_alphac0 = %d\n", x264Param->i_deblocking_filter_alphac0);
+	printf("[x264] i_deblocking_filter_beta = %d\n", x264Param->i_deblocking_filter_beta);
+	printf("[x264] i_bframe = %d\n", x264Param->i_bframe);
+	printf("[x264] i_bframe_bias = %d\n", x264Param->i_bframe_bias);
+	printf("[x264] i_frame_reference = %d\n", x264Param->i_frame_reference);
+	printf("[x264] b_bframe_pyramid = %d\n", x264Param->b_bframe_pyramid);
+	printf("[x264] b_bframe_adaptive = %d\n", x264Param->b_bframe_adaptive);
+	printf("[x264] i_keyint_max = %d\n", x264Param->i_keyint_max);
+	printf("[x264] i_keyint_min = %d\n", x264Param->i_keyint_min);
+	printf("[x264] i_scenecut_threshold = %d\n", x264Param->i_scenecut_threshold);
+	printf("[x264] b_pre_scenecut = %d\n", x264Param->b_pre_scenecut);
+	printf("[x264] analyse.b_mixed_references = %d\n", x264Param->analyse.b_mixed_references);
+	printf("[x264] analyse.b_chroma_me = %d\n", x264Param->analyse.b_chroma_me);
+	printf("[x264] analyse.b_bidir_me = %d\n", x264Param->analyse.b_bidir_me);
+	printf("[x264] analyse.i_trellis = %d\n", x264Param->analyse.i_trellis);
+	printf("[x264] analyse.b_fast_pskip = %d\n", x264Param->analyse.b_fast_pskip);
+	printf("[x264] analyse.b_dct_decimate = %d\n", x264Param->analyse.b_dct_decimate);
+	printf("[x264] analyse.i_noise_reduction = %d\n", x264Param->analyse.i_noise_reduction);
+	printf("[x264] analyse.i_luma_deadzone[0] = %d\n", x264Param->analyse.i_luma_deadzone[0]);
+	printf("[x264] analyse.i_luma_deadzone[1] = %d\n", x264Param->analyse.i_luma_deadzone[1]);
+	printf("[x264] i_cqm_preset = %d\n", x264Param->i_cqm_preset);
+
+	printf("[x264] cqm_4iy = ");
+	printCqm(x264Param->cqm_4iy, sizeof(x264Param->cqm_4iy));
+	printf("\n[x264] cqm_4ic = ");
+	printCqm(x264Param->cqm_4ic, sizeof(x264Param->cqm_4ic));
+	printf("\n[x264] cqm_4py = ");
+	printCqm(x264Param->cqm_4py, sizeof(x264Param->cqm_4py));
+	printf("\n[x264] cqm_4pc = ");
+	printCqm(x264Param->cqm_4pc, sizeof(x264Param->cqm_4pc));
+	printf("\n[x264] cqm_8iy = ");
+	printCqm(x264Param->cqm_8iy, sizeof(x264Param->cqm_8iy));
+	printf("\n[x264] cqm_8py = ");
+	printCqm(x264Param->cqm_8py, sizeof(x264Param->cqm_8py));
+
+	printf("\n[x264] rc.i_qp_min = %d\n", x264Param->rc.i_qp_min);
+	printf("[x264] rc.i_qp_max = %d\n", x264Param->rc.i_qp_max);
+	printf("[x264] rc.i_qp_step = %d\n", x264Param->rc.i_qp_step);
+	printf("[x264] rc.f_rate_tolerance = %f\n", x264Param->rc.f_rate_tolerance);
+	printf("[x264] rc.f_ip_factor = %f\n", x264Param->rc.f_ip_factor);
+	printf("[x264] rc.f_pb_factor = %f\n", x264Param->rc.f_pb_factor);
+	printf("[x264] analyse.i_chroma_qp_offset = %d\n", x264Param->analyse.i_chroma_qp_offset);
+	printf("[x264] rc.f_qcompress = %f\n", x264Param->rc.f_qcompress);
+	printf("[x264] rc.f_complexity_blur = %f\n", x264Param->rc.f_complexity_blur);
+	printf("[x264] rc.f_qblur = %f\n", x264Param->rc.f_qblur);
+	printf("[x264] rc.i_vbv_max_bitrate = %d\n", x264Param->rc.i_vbv_max_bitrate);
+	printf("[x264] rc.i_vbv_buffer_size = %d\n", x264Param->rc.i_vbv_buffer_size);
+	printf("[x264] rc.f_vbv_buffer_init = %f\n", x264Param->rc.f_vbv_buffer_init);
+
+	printf("[x264] i_level_idc = %d\n", x264Param->i_level_idc);
+	printf("[x264] i_sps_id = %d\n", x264Param->i_sps_id);
+	printf("[x264] b_deterministic = %d\n", x264Param->b_deterministic);
+	printf("[x264] b_aud = %d\n", x264Param->b_aud);
+	printf("[x264] analyse.b_psnr = %d\n", x264Param->analyse.b_psnr);
+	printf("[x264] analyse.b_ssim = %d\n", x264Param->analyse.b_ssim);
+	printf("[x264] vui.i_overscan = %d\n", x264Param->vui.i_overscan);
+	printf("[x264] vui.i_vidformat = %d\n", x264Param->vui.i_vidformat);
+	printf("[x264] vui.i_colorprim = %d\n", x264Param->vui.i_colorprim);
+	printf("[x264] vui.i_transfer = %d\n", x264Param->vui.i_transfer);
+	printf("[x264] vui.i_colmatrix = %d\n", x264Param->vui.i_colmatrix);
+	printf("[x264] vui.i_chroma_loc = %d\n", x264Param->vui.i_chroma_loc);
+	printf("[x264] vui.b_fullrange = %d\n", x264Param->vui.b_fullrange);
+}
+
+void X264Encoder::printCqm(const uint8_t cqm[], uint8_t size)
+{
+	for (int index = 0; index < size; index++)
+		printf("%d ", cqm[index]);
+}
+
 //**********************************************************
 // Do the translation avidemux parameters->x264 parameters
 //**********************************************************
-uint8_t X264Encoder::preamble (uint32_t fps1000, ADM_x264Param * zparam)
+uint8_t X264Encoder::preamble(uint32_t fps1000, ADM_x264Param *zparam)
 {
-  x264_t *xhandle = NULL;
+	x264_t *xhandle = NULL;
 
-  printf ("[x264] Opening x264 for %lu x %lu\n", _w, _h);
+	if (zparam->globalHeader)
+		param.b_repeat_headers = 0;
+	else
+		param.b_repeat_headers = 1;
 
-  param.i_threads = zparam->nbThreads;
-  param.i_width = _w;
-  param.i_height = _h;
-  param.i_csp = X264_CSP_I420;
+	param.i_log_level = X264_LOG_INFO;
+	param.i_threads = zparam->nbThreads;
+	param.i_width = _w;
+	param.i_height = _h;
+	param.i_csp = X264_CSP_I420;
+	param.i_fps_num = fps1000;
+	param.i_fps_den = 1000;
 
-#define MKPARAM(x,y) {param.x = zparam->y;printf("[x264] "#x" = %d\n",param.x);}
-#define MKPARAMF(x,y) {param.x = (float)zparam->y / 100; printf("[x264] "#x" = %.2f\n",param.x);}
+	if (zparam->AR_AsInput)
+	{
+		param.vui.i_sar_width = video_body->getPARWidth();
+		param.vui.i_sar_height = video_body->getPARHeight();
+	}
+	else
+	{
+		param.vui.i_sar_width = zparam->AR_Num;
+		param.vui.i_sar_height = zparam->AR_Den;
+	}
 
-  if (zparam->AR_AsInput) {
-    param.vui.i_sar_width = video_body->getPARWidth();
-    param.vui.i_sar_height = video_body->getPARHeight();
-  } else {
-    MKPARAM(vui.i_sar_width , AR_Num);	// FIXME
-    MKPARAM(vui.i_sar_height, AR_Den);
-  }
+	param.analyse.i_subpel_refine = zparam->PartitionDecision;
+	param.analyse.b_bframe_rdo = zparam->RDO;
+	param.analyse.i_me_method = zparam->Method;
+	param.analyse.i_me_range = zparam->Range;
+	param.analyse.i_mv_range = zparam->mv_range_thread;
+	param.analyse.i_mv_range_thread = zparam->mv_range_thread;
+	param.analyse.i_direct_mv_pred = zparam->DirectMode;
+	param.analyse.i_direct_8x8_inference = zparam->direct_8x8_inference;
+	param.analyse.b_weighted_bipred = zparam->Weighted;
+	param.analyse.b_transform_8x8 = zparam->_8x8;
+	param.analyse.inter = 0;
 
-  param.i_fps_num = fps1000;
-  param.i_fps_den = 1000;
-  if(zparam->idc)
-  {
-    MKPARAM(i_level_idc,idc);
-    printf("[x264] *** Forcing level = %d\n",param.i_level_idc);
-  }
-  // KeyframeBoost ?
-  // BframeReduction ?
-  // PartitionDecision ?
-  MKPARAMF(rc.f_qcompress,BitrateVariability);
-  
-  param.i_frame_reference = 1;
-  // update for Sadarax dialog
-  MKPARAM(rc.i_vbv_max_bitrate,vbv_max_bitrate);
-  MKPARAM(rc.i_vbv_buffer_size,vbv_buffer_size);
-  MKPARAMF(rc.f_vbv_buffer_init,vbv_buffer_init);
-  
-  MKPARAM (analyse.b_fast_pskip,fastPSkip);
-  MKPARAM (analyse.b_dct_decimate,DCTDecimate);
-  MKPARAM (b_interlaced,interlaced);
-      
-  //
-  MKPARAM(analyse.i_direct_mv_pred,DirectMode);
-  MKPARAM(rc.i_qp_min,MinQp);
-  MKPARAM(rc.i_qp_max,MaxQp);
-  MKPARAM(rc.i_qp_step,QpStep);
-  MKPARAM(i_frame_reference,MaxRefFrames);
-  MKPARAM(i_scenecut_threshold,SceneCut);
-  MKPARAM(i_keyint_min,MinIdr);
-  MKPARAM(i_keyint_max,MaxIdr);
-  MKPARAM(i_bframe,MaxBFrame);
-  MKPARAM(i_bframe_bias,Bias);
-  MKPARAM( b_bframe_pyramid,BasReference );
-  MKPARAM(analyse. b_bidir_me,BidirME );
-  MKPARAM( b_bframe_adaptive, Adaptative);
-  MKPARAM( analyse.b_weighted_bipred, Weighted);
-  MKPARAM( b_cabac , CABAC);
-  MKPARAM( analyse.i_trellis, Trellis);
-  MKPARAM(analyse.i_subpel_refine,PartitionDecision+1);
-#define MIN_RDO 6
-  if(zparam->PartitionDecision+1>=MIN_RDO)
-  {
-      int rank,parity;
-      rank=((zparam->PartitionDecision+1-MIN_RDO)>>1)+MIN_RDO;
-      parity=(zparam->PartitionDecision+1-MIN_RDO)&1;
-      
-      param.analyse.i_subpel_refine=rank;
-      param.analyse.b_bframe_rdo=parity;
-  }
-  MKPARAM(analyse.b_chroma_me,ChromaME);
-  MKPARAM(b_deblocking_filter,DeblockingFilter);
-  MKPARAM(i_deblocking_filter_alphac0,Strength );
-  MKPARAM(i_deblocking_filter_beta, Threshold);
-  
-  MKPARAM(analyse.i_me_method,Method);
-  MKPARAM(analyse.i_me_range,Range);
-//  MKPARAM(PartitionDecision,Method);
-  MKPARAM(analyse.b_transform_8x8,_8x8);
-  MKPARAM(analyse.b_mixed_references,MixedRefs);
-  MKPARAM(analyse.i_noise_reduction,NoiseReduction);
-  
-#define MES(x,y) if(zparam->x) {param.analyse.inter |=X264_ANALYSE_##y;printf("[x264] "#x" is on\n");}
-  param.analyse.inter=0;
-  MES(  _8x8P,  PSUB16x16);
-  MES(  _8x8B,  BSUB16x16);
-  MES(  _4x4,   PSUB8x8);
-  MES(  _8x8I,  I8x8);
-  MES(  _4x4I,  I4x4);
-  param.i_log_level=X264_LOG_INFO;
-  
-  /*
-     int         i_vbv_max_bitrate;
-        int         i_vbv_buffer_size;
-        float       f_vbv_buffer_init;
+	if (zparam->_8x8P)
+		param.analyse.inter |= X264_ANALYSE_PSUB16x16;
 
-  */
-  printf("[x264] VBV_max_br = %d\n", param.rc.i_vbv_max_bitrate);
-  printf("[x264] vbv_buffer_size = %d\n", param.rc.i_vbv_buffer_size);
-  printf("[x264] f_vbv_buffer_init = %f\n", param.rc.f_vbv_buffer_init);
-  
-  if(zparam->globalHeader)
-      param.b_repeat_headers=0;
-  else
-      param.b_repeat_headers=1;
+	if (zparam->_8x8B)
+		param.analyse.inter |= X264_ANALYSE_BSUB16x16;
 
-  xhandle = x264_encoder_open (&param);
-  if (!xhandle)
-    return 0;
+	if (zparam->_4x4)
+		param.analyse.inter |= X264_ANALYSE_PSUB8x8;
 
-  _handle = (void *) xhandle;
-  _pic = (void *) new    x264_picture_t;
-  printf ("[x264] init ok (atom mode: %d)\n", zparam->globalHeader);
+	if (zparam->_8x8I)
+		param.analyse.inter |= X264_ANALYSE_I8x8;
 
-  if (param.i_threads > 1)
-    printf ("[x264] using %d threads\n", param.i_threads);
-  else if (param.i_threads == 0)
-    printf ("[x264] using threads\n");
+	if (zparam->_4x4I)
+		param.analyse.inter |= X264_ANALYSE_I4x4;
 
-  if (zparam->globalHeader)
-    return createHeader ();
-  else
-    return 1;
+	param.b_cabac = zparam->CABAC;
+	param.b_interlaced = zparam->interlaced;
+	param.b_deblocking_filter = zparam->DeblockingFilter;
+	param.i_deblocking_filter_alphac0 = zparam->Strength;
+	param.i_deblocking_filter_beta = zparam->Threshold;
+	param.i_bframe = zparam->MaxBFrame;
+	param.i_bframe_bias = zparam->Bias;
+	param.i_frame_reference = zparam->MaxRefFrames;
+	param.b_bframe_pyramid = zparam->BasReference;
+	param.b_bframe_adaptive = zparam->Adaptative;
+	param.i_keyint_max = zparam->MaxIdr;
+	param.i_keyint_min = zparam->MinIdr;
+	param.i_scenecut_threshold = zparam->SceneCut;
+	param.b_pre_scenecut = zparam->pre_scenecut;
+	param.analyse.b_mixed_references = zparam->MixedRefs;
+	param.analyse.b_chroma_me = zparam->ChromaME;
+	param.analyse.b_bidir_me = zparam->BidirME;
+	param.analyse.i_trellis = zparam->Trellis;
+	param.analyse.b_fast_pskip = zparam->fastPSkip;
+	param.analyse.b_dct_decimate = zparam->DCTDecimate;
+	param.analyse.i_noise_reduction = zparam->NoiseReduction;
+	param.analyse.i_luma_deadzone[0] = zparam->interLumaDeadzone;
+	param.analyse.i_luma_deadzone[1] = zparam->intraLumaDeadzone;
+	param.i_cqm_preset = zparam->cqmPreset;
 
+	memcpy(param.cqm_4iy, zparam->intra4x4Luma, sizeof(param.cqm_4iy));
+	memcpy(param.cqm_4ic, zparam->intraChroma, sizeof(param.cqm_4ic));
+	memcpy(param.cqm_4py, zparam->inter4x4Luma, sizeof(param.cqm_4py));
+	memcpy(param.cqm_4pc, zparam->interChroma, sizeof(param.cqm_4pc));
+	memcpy(param.cqm_8iy, zparam->intra8x8Luma, sizeof(param.cqm_8iy));
+	memcpy(param.cqm_8py, zparam->inter8x8Luma, sizeof(param.cqm_8py));
 
+	param.rc.i_qp_min = zparam->MinQp;
+	param.rc.i_qp_max = zparam->MaxQp;
+	param.rc.i_qp_step = zparam->QpStep;
+	param.rc.f_rate_tolerance = (float)zparam->rateTolerance / 100;
+	param.rc.f_ip_factor = zparam->quantiserIpRatio;
+	param.rc.f_pb_factor = zparam->quantiserPbRatio;
+	param.analyse.i_chroma_qp_offset = zparam->chromaQuantiserOffset;
+	param.rc.f_qcompress = (float)zparam->BitrateVariability / 100;
+	param.rc.f_complexity_blur = zparam->quantiserComplexityBlur;
+	param.rc.f_qblur = zparam->quantiserBlur;
+	param.rc.i_vbv_max_bitrate = zparam->vbv_max_bitrate;
+	param.rc.i_vbv_buffer_size = zparam->vbv_buffer_size;
+	param.rc.f_vbv_buffer_init = (float)zparam->vbv_buffer_init / 100;
+
+	if (zparam->idc)	// Used to default to zero so still need to cater for it
+		param.i_level_idc = zparam->idc;
+
+	param.i_sps_id = zparam->spsId;
+	param.b_deterministic = zparam->deterministic;
+	param.b_aud = zparam->accessUnitDelimiters;
+	param.analyse.b_psnr = zparam->psnrComputation;
+	param.analyse.b_ssim = zparam->ssimComputation;
+
+	param.vui.i_overscan = zparam->overscan;
+	param.vui.i_vidformat = zparam->videoFormat;
+	param.vui.i_colorprim = zparam->colourPrimaries;
+	param.vui.i_transfer = zparam->transferCharacteristics;
+	param.vui.i_colmatrix = zparam->colourMatrix;
+	param.vui.i_chroma_loc = zparam->chromaSampleLocation;
+	param.vui.b_fullrange = zparam->fullRangeSamples;
+
+	printParam(&param);
+
+	xhandle = x264_encoder_open(&param);
+
+	if (!xhandle)
+		return 0;
+
+	_handle = (void*)xhandle;
+	_pic = (void*)new x264_picture_t;
+
+	printf("[x264] init ok (atom mode: %d)\n", zparam->globalHeader);
+
+	if (zparam->globalHeader)
+		return createHeader();
+	else
+		return 1;
 }
+
 uint8_t X264Encoder::getExtraData (uint32_t * l, uint8_t ** d)
 {
   *l = extraSize;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_x264.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_x264.h	2008-04-02 23:54:12 UTC (rev 3964)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_x264.h	2008-04-03 00:17:06 UTC (rev 3965)
@@ -12,120 +12,108 @@
 #ifdef USE_X264
 #include "ADM_codecs/ADM_x264param.h"
 
-class X264Encoder:public encoder
+extern "C"
 {
-protected:uint32_t _inited;
-  void *_handle;
-  void *_pic;
-  uint8_t 	*_seiUserData;
-  uint32_t  _seiUserDataLen; // X264 user data
-  uint8_t preamble (uint32_t fps1000, ADM_x264Param * param);
-  ADM_x264Param _param;
-  uint8_t *extraData;
-  uint32_t extraSize;
-  uint8_t createHeader (void);
-  uint32_t ptsFrame;
-  uint32_t curFrame;
-public:  X264Encoder (uint32_t width, uint32_t height):encoder (width,
-							   height)
-  {
-    _handle = NULL;
-    _inited = 0;
-    _pic = NULL;
-    extraData = NULL;
-    extraSize = 0;
-    ptsFrame = 0;
-    curFrame = 0;
-    _seiUserDataLen=0;
-    _seiUserData=NULL;
-    
-  };
-  ~X264Encoder ();
+#include "x264.h"
+};
 
-  uint8_t stopEncoder (void);
-  virtual uint8_t init (uint32_t val, uint32_t fps1000,
-			ADM_x264Param * param);
+class X264Encoder : public encoder
+{
+protected:
+	uint32_t _inited;
+	void *_handle;
+	void *_pic;
+	uint8_t *_seiUserData;
+	uint32_t _seiUserDataLen; // X264 user data
+	ADM_x264Param _param;
+	uint8_t *extraData;
+	uint32_t extraSize;  
+	uint32_t ptsFrame;
+	uint32_t curFrame;
 
-  uint8_t init (uint32_t a, uint32_t b)
-  {
-    return 0;
-  }				// not used
-  virtual uint8_t encode (ADMImage * in, ADMBitstream * out);
-  virtual uint8_t getExtraData (uint32_t * l, uint8_t ** d);
+	void printParam(x264_param_t* x264Param);
+	void printCqm(const uint8_t cqm[], uint8_t size);
+	uint8_t preamble(uint32_t fps1000, ADM_x264Param * param);
+	uint8_t createHeader(void);
 
+public:
+	X264Encoder(uint32_t width, uint32_t height) : encoder(width, height)
+	{
+		_handle = NULL;
+		_inited = 0;
+		_pic = NULL;
+		extraData = NULL;
+		extraSize = 0;
+		ptsFrame = 0;
+		curFrame = 0;
+		_seiUserDataLen = 0;
+		_seiUserData = NULL;
+	};
+	~X264Encoder();
+	uint8_t stopEncoder(void);
+	virtual uint8_t init(uint32_t val, uint32_t fps1000, ADM_x264Param * param);
+	uint8_t init(uint32_t a, uint32_t b) { return 0; }	// not used
+	virtual uint8_t encode(ADMImage * in, ADMBitstream * out);
+	virtual uint8_t getExtraData(uint32_t * l, uint8_t ** d);
 };
+
 //***************** CQ **************** 
-class X264EncoderCQ:public X264Encoder
+class X264EncoderCQ : public X264Encoder
 {
-protected:uint32_t _q;
+protected:
+	uint32_t _q;
 
-public:X264EncoderCQ (uint32_t width, uint32_t height):X264Encoder (width,
-							       height)
-  {
-
-  };
-  ~X264EncoderCQ ();
-  virtual uint8_t init (uint32_t val, uint32_t fps1000,
-			ADM_x264Param * param);
-
+public:
+	X264EncoderCQ(uint32_t width, uint32_t height) : X264Encoder (width, height) {};
+	~X264EncoderCQ();
+	virtual uint8_t init(uint32_t val, uint32_t fps1000, ADM_x264Param *param);
 };
+
 //***************** AQ **************** 
-class X264EncoderAQ:public X264Encoder
+class X264EncoderAQ : public X264Encoder
 {
-protected:uint32_t _q;
+protected:
+	uint32_t _q;
 
-public:X264EncoderAQ (uint32_t width, uint32_t height):X264Encoder (width,
-							       height)
-  {
-
-  };
-  ~X264EncoderAQ ();
-  virtual uint8_t init (uint32_t val, uint32_t fps1000,
-			ADM_x264Param * param);
-
+public:
+	X264EncoderAQ(uint32_t width, uint32_t height) : X264Encoder(width, height) {};
+	~X264EncoderAQ();
+	virtual uint8_t init(uint32_t val, uint32_t fps1000, ADM_x264Param *param);
 };
+
 //***************** CBR ****************
-class X264EncoderCBR:public X264Encoder
+class X264EncoderCBR : public X264Encoder
 {
-protected:uint32_t _br;
+protected:
+	uint32_t _br;
 
-public:X264EncoderCBR (uint32_t width, uint32_t height):X264Encoder (width,
-								height)
-  {
-
-  };
-  ~X264EncoderCBR ();
-  virtual uint8_t init (uint32_t br, uint32_t fps1000, ADM_x264Param * param);
-
+public:
+	X264EncoderCBR(uint32_t width, uint32_t height) : X264Encoder(width, height) {};
+	~X264EncoderCBR();
+	virtual uint8_t init(uint32_t br, uint32_t fps1000, ADM_x264Param *param);
 };
-//***************** Pass1 **************** 
-class X264EncoderPass1:public X264Encoder
+
+//***************** Pass 1 **************** 
+class X264EncoderPass1 : public X264Encoder
 {
-protected:uint32_t _q;
+protected:
+	uint32_t _q;
 
-public:X264EncoderPass1 (uint32_t width,
-		    uint32_t height):X264Encoder (width, height)
-  {
-
-  };
-  ~X264EncoderPass1 ();
-  virtual uint8_t init (uint32_t val, uint32_t fps1000,
-			ADM_x264Param * param);
-
+public:
+	X264EncoderPass1(uint32_t width, uint32_t height) : X264Encoder(width, height) {};
+	~X264EncoderPass1();
+	virtual uint8_t init(uint32_t val, uint32_t fps1000, ADM_x264Param* param);
 };
+
 //***************** Pass 2 **************** 
-class X264EncoderPass2:public X264Encoder
+class X264EncoderPass2 : public X264Encoder
 {
-protected:uint32_t _q;
+protected:
+	uint32_t _q;
 
-public:X264EncoderPass2 (uint32_t width,
-		    uint32_t height):X264Encoder (width, height)
-  {
-
-  };
-  ~X264EncoderPass2 ();
-  virtual uint8_t init (uint32_t val, uint32_t fps1000,
-			ADM_x264Param * param);
-
+public:
+	X264EncoderPass2(uint32_t width, uint32_t height) : X264Encoder(width, height) {};
+	~X264EncoderPass2();
+	virtual uint8_t init(uint32_t val, uint32_t fps1000, ADM_x264Param* param);
 };
 #endif

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_x264param.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_x264param.h	2008-04-02 23:54:12 UTC (rev 3964)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_x264param.h	2008-04-03 00:17:06 UTC (rev 3965)
@@ -11,66 +11,141 @@
 //
 #ifndef __X264_PARM_
 #define __X264_PARM_
+static const uint8_t x264_cqm_jvt4i[16] =
+{
+      6,13,20,28,
+     13,20,28,32,
+     20,28,32,37,
+     28,32,37,42
+};
+
+static const uint8_t x264_cqm_jvt4p[16] =
+{
+    10,14,20,24,
+    14,20,24,27,
+    20,24,27,30,
+    24,27,30,34
+};
+
+static const uint8_t x264_cqm_jvt8i[64] =
+{
+     6,10,13,16,18,23,25,27,
+    10,11,16,18,23,25,27,29,
+    13,16,18,23,25,27,29,31,
+    16,18,23,25,27,29,31,33,
+    18,23,25,27,29,31,33,36,
+    23,25,27,29,31,33,36,38,
+    25,27,29,31,33,36,38,40,
+    27,29,31,33,36,38,40,42
+};
+
+static const uint8_t x264_cqm_jvt8p[64] =
+{
+     9,13,15,17,19,21,22,24,
+    13,13,17,19,21,22,24,25,
+    15,17,19,21,22,24,25,27,
+    17,19,21,22,24,25,27,28,
+    19,21,22,24,25,27,28,30,
+    21,22,24,25,27,28,30,32,
+    22,24,25,27,28,30,32,33,
+    24,25,27,28,30,32,33,35
+};
+
 typedef struct ADM_x264Param
 {
-  uint32_t  globalHeader;
-  uint32_t  nbThreads;
-  char      *logfile;
-  //
-  uint32_t KeyframeBoost;
-  uint32_t BframeReduction;
-  uint32_t BitrateVariability;
-  //
-  uint32_t  MinQp;
-  uint32_t  MaxQp;
-  uint32_t  QpStep;
-  //
-  uint32_t  MaxRefFrames;
+  uint32_t  globalHeader;			// b_repeat_headers  {0 = No, 1 = Yes}
+  uint32_t  nbThreads;				// i_threads
+  char      *logfile;				// logfile
+
+  uint32_t KeyframeBoost;			// *** not used ***
+  uint32_t BframeReduction;			// *** not used ***
+  uint32_t BitrateVariability;		// rc.f_qcompress  (% to be translated to float between 0 and 1)
+
+  uint32_t  MinQp;					// rc.i_qp_min
+  uint32_t  MaxQp;					// rc.i_qp_max
+  uint32_t  QpStep;					// rc.i_qp_step
+
+  uint32_t  MaxRefFrames;			// i_frame_reference  (0 - 16)
   uint32_t  SceneCut;
-  uint32_t  MinIdr;
-  uint32_t  MaxIdr;
-  //
-  uint32_t  _8x8;
-  uint32_t  _8x8P;
-  uint32_t  _8x8B;
-  uint32_t  _4x4;
-  uint32_t  _8x8I;
-  uint32_t  _4x4I;
-  //
-  uint32_t  MaxBFrame;
-  int32_t   Bias;
-  //
-  uint32_t BasReference;
-  uint32_t BidirME;
-  uint32_t Adaptative;
-  uint32_t Weighted;
-  uint32_t DirectMode;
-  //
-  uint32_t PartitionDecision;
-  uint32_t Range;
-  uint32_t Method;
-  uint32_t AR_Num;
-  uint32_t AR_Den;
-  uint8_t  AR_AsInput;
-  uint32_t DeblockingFilter;
-  int32_t  Strength;
-  int32_t  Threshold;
-  uint32_t CABAC;
-  uint32_t Trellis;
-  uint32_t ChromaME;
-  uint32_t MixedRefs;
-  uint32_t NoiseReduction;
-  //
-  uint32_t idc;
-  // Sadarax ui
-  uint32_t fastPSkip;
-  uint32_t DCTDecimate;
-  uint32_t interlaced;
+  uint32_t  MinIdr;					// i_keyint_min  (0 - 100)
+  uint32_t  MaxIdr;					// i_keyint_max  (1 - 1000)
+
+  uint32_t  _8x8;					// analyse.b_transform_8x8  {0 = No, 1 = Yes}
+  uint32_t  _8x8P;					// analyse.inter
+  uint32_t  _8x8B;					// analyse.inter
+  uint32_t  _4x4;					// analyse.inter
+  uint32_t  _8x8I;					// analyse.inter
+  uint32_t  _4x4I;					// analyse.inter
+
+  uint32_t  MaxBFrame;				// i_bframe  (0 - 15)
+  int32_t   Bias;					// i_bframe_bias  (-100 - 100)
+
+  uint32_t BasReference;			// b_bframe_pyramid  {0 = No, 1 = Yes}
+  uint32_t BidirME;					// analyse.b_bidir_me  {0 = No, 1 = Yes}
+  uint32_t Adaptative;				// b_bframe_adaptive  {0 = No, 1 = Yes}
+  uint32_t Weighted;				// analyse.b_weighted_bipred  {0 = No, 1 = Yes}
+  uint32_t DirectMode;				// analyse.i_direct_mv_pred  {0 = none, 1 = spatial, 2 = temporal, 3 = auto}
+
+  uint32_t PartitionDecision;		// analyse.i_subpel_refine	(1 - 7)
+  uint32_t RDO;						// analyse.b_bframe_rdo  {0 = No, 1 = Yes}
+  uint32_t Range;					// analyse.i_me_range  (0 - 64)
+  uint32_t Method;					// analyse.i_me_method  {0 = dia, 1 = hex, 2 = umh, 3 = esa, 4 = tesa}
+  uint32_t AR_Num;					// vui.i_sar_width
+  uint32_t AR_Den;					// vui.i_sar_height
+  uint8_t  AR_AsInput;				// vui.i_sar_width, vui.i_sar_height
+  uint32_t DeblockingFilter;		// b_deblocking_filter  {0 = No, 1 = Yes}
+  int32_t  Strength;				// i_deblocking_filter_alphac0  (-6 - 6)
+  int32_t  Threshold;				// i_deblocking_filter_beta  (-6 - 6)
+  uint32_t CABAC;					// b_cabac  {0 = No, 1 = Yes}
+  uint32_t Trellis;					// analyse.i_trellis  (0 - 2)
+  uint32_t ChromaME;				// analyse.b_chroma_me  {0 = No, 1 = Yes}
+  uint32_t MixedRefs;				// analyse.b_mixed_references  {0 = No, 1 = Yes}
+  uint32_t NoiseReduction;			// analyse.i_noise_reduction  (0 - 65536)
+  uint32_t idc;						// i_level_idc
+
+  uint32_t fastPSkip;				// analyse.b_fast_pskip  {0 = No, 1 = Yes}
+  uint32_t DCTDecimate;				// analyse.b_dct_decimate  {0 = No, 1 = Yes}
+  uint32_t interlaced;				// b_interlaced  {0 = No, 1 = Yes}
   
-  uint32_t vbv_max_bitrate;
-  uint32_t vbv_buffer_size;
-  uint32_t vbv_buffer_init; /* In % to be translated to float between 0 and 1 */
+  uint32_t vbv_max_bitrate;			// rc.i_vbv_max_bitrate
+  uint32_t vbv_buffer_size;			// rc.i_vbv_buffer_size
+  uint32_t vbv_buffer_init;			// rc.f_vbv_buffer_init  (% to be translated to float between 0 and 1)
 
+  int32_t mv_range;					// analyse.i_mv_range  {-1 = off, (32 - 512)}
+  int32_t mv_range_thread;			// analyse.i_mv_range_thread
+  int32_t direct_8x8_inference;		// analyse.i_direct_8x8_inference  {-1 = smallest possible, 1 = 8x8, 2 = 4x4}
+  uint32_t pre_scenecut;			// b_pre_scenecut  {0 = No, 1 = Yes}
+  uint32_t interLumaDeadzone;		// analyse.i_luma_deadzone[0]  (0 - 32)
+  uint32_t intraLumaDeadzone;		// analyse.i_luma_deadzone[1]  (0 - 32)
+  uint32_t cqmPreset;				// i_cqm_preset  {0 = flat, 1 = jvt, 2 = custom}
+
+  uint8_t intra4x4Luma[16];			// cqm_4iy
+  uint8_t intraChroma[16];			// cqm_4ic
+  uint8_t inter4x4Luma[16];			// cqm_4py
+  uint8_t interChroma[16];			// cqm_4pc
+  uint8_t intra8x8Luma[64];			// cqm_8iy
+  uint8_t inter8x8Luma[64];			// cqm_8py
+
+  uint8_t rateTolerance;			// rc.f_rate_tolerance  (% to be translated to float between 0 and 1)
+  float quantiserIpRatio;			// rc.f_ip_factor  (0 - 10)
+  float quantiserPbRatio;			// rc.f_pb_factor  (0 - 10)
+  uint8_t chromaQuantiserOffset;	// analyse.i_chroma_qp_offset  (-12 - 12)
+  float quantiserComplexityBlur;	// rc.f_complexity_blur
+  float quantiserBlur;				// rc.f_qblur
+
+  uint8_t spsId;					// i_sps_id
+  uint8_t deterministic;			// b_deterministic  {0 = No, 1 = Yes}
+  uint8_t accessUnitDelimiters;		// b_aud  {0 = No, 1 = Yes}
+  uint8_t psnrComputation;			// analyse.b_psnr  {0 = No, 1 = Yes}
+  uint8_t ssimComputation;			// analyse.b_ssim  {0 = No, 1 = Yes}
+
+  uint8_t overscan;					// vui.i_overscan
+  uint8_t videoFormat;				// vui.i_vidformat
+  uint8_t colourPrimaries;			// vui.i_colorprim
+  uint8_t transferCharacteristics;	// vui.i_transfer
+  uint8_t colourMatrix;				// vui.i_colmatrix
+  uint8_t chromaSampleLocation;		// vui.i_chroma_loc
+  uint8_t fullRangeSamples;			// vui.b_fullrange  {0 = No, 1 = Yes}
 } ADM_x264Param;
 
 #endif

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_encCodecDesc.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_encCodecDesc.h	2008-04-02 23:54:12 UTC (rev 3964)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_encCodecDesc.h	2008-04-03 00:17:06 UTC (rev 3965)
@@ -715,16 +715,17 @@
 1,//     uint32_t   _8X8I;
 1,//     uint32_t   _4x4I;
 //     //
-2,//     uint32_t  MaxBFrame;
+0,//     uint32_t  MaxBFrame;
 0,//     int32_t   Bias;
 //     //
 0,//     uint32_t BasReference;
 0,//     uint32_t BidirME;
 1,//     uint32_t Adaptative;
-1,//     uint32_t Weighted;
+0,//     uint32_t Weighted;
 1,//     uint32_t DirectMode;
 //     //
-4,//     uint32_t PartitionDecision;
+5,//     uint32_t PartitionDecision;
+0,//	 bool RDO
 16, //Range
 1,//     uint32_t Method;
 1,//     uint32_t AR_Num;
@@ -738,14 +739,42 @@
 1, //        ChromaME
 0, // Mixed Ref
 0, //NoiseReduction
-0, // level IDC for psp  
+51, // level IDC
 0, // fastPSkip;
 1,  //DCTDecimate;
 0,   //interlaced;
 0,    // vbv_max_bitrate;
 0,  // vbv_buffer_size;
-90  // vbv_buffer_init;
-
+90, // vbv_buffer_init;
+-1,	// mv_range
+-1,	// mv_range_thread
+-1,	// direct_8x8_inference
+0,	// pre_scenecut
+21,	// interLumaDeadzone
+11,	// intraLumaDeadzone
+0,	// cqmPreset
+{6,13,20,28,13,20,28,32,20,28,32,37,28,32,37,42},	// intra4x4Luma
+{6,13,20,28,13,20,28,32,20,28,32,37,28,32,37,42},	// intra4x4Chroma
+{10,14,20,24,14,20,24,27,20,24,27,30,24,27,30,34},	// inter4x4Luma
+{10,14,20,24,14,20,24,27,20,24,27,30,24,27,30,34},	// inter4x4Chroma
+{6,10,13,16,18,23,25,27,10,11,16,18,23,25,27,29,13,16,18,23,25,27,29,31,16,18,23,25,27,29,31,33,18,23,25,27,29,31,33,36,23,25,27,29,31,33,36,38,25,27,29,31,33,36,38,40,27,29,31,33,36,38,40,42},	// intra8x8Luma
+{9,13,15,17,19,21,22,24,13,13,17,19,21,22,24,25,15,17,19,21,22,24,25,27,17,19,21,22,24,25,27,28,19,21,22,24,25,27,28,30,21,22,24,25,27,28,30,32,22,24,25,27,28,30,32,33,24,25,27,28,30,32,33,35},	// inter8x8Luma
+100,	// rateTolerance
+1.4,	// quantiserIpRatio
+1.3,	// quantiserPbRatio
+0,		// chromaQuantiserOffset
+20.0,	// quantiserComplexityBlur
+0.5,	// quantiserBlur
+0,		// spsId
+1,		// deterministic
+0,		// accessUnitDelimiters
+1,		// psnrComputation
+1,		// ssimComputation
+0,		// overscan
+5,		// videoFormat
+2,		// colourPrimaries
+2,		// transferCharacteristics
+2		// colourMatrix
 };
 /**************************************/
 ADM_x264Param x264ExtraPSP = {
@@ -779,10 +808,11 @@
 0,//     uint32_t BasReference;
 0,//     uint32_t BidirME;
 1,//     uint32_t Adaptative;
-1,//     uint32_t Weighted;
+0,//     uint32_t Weighted;
 1,//     uint32_t DirectMode;
 //     //
-4,//     uint32_t PartitionDecision;
+5,//     uint32_t PartitionDecision;
+0,//	 bool RDO
 4,//              Range
 1,//     uint32_t Method;
 1,//     uint32_t AR_Num;
@@ -796,13 +826,42 @@
 0, //        ChromaME
 0, // Mixed Ref
 0, //NoiseReduction
-30, // level IDC for psp  
+30, // level IDC
 0, // fastPSkip;
 1,  //DCTDecimate;
 0,   //interlaced;
 0,    // vbv_max_bitrate;
 0,  // vbv_buffer_size;
-90  // vbv_buffer_init;
+90, // vbv_buffer_init;
+-1,	// mv_range
+-1,	// mv_range_thread
+-1,	// direct_8x8_inference
+0,	// pre_scenecut
+21,	// interLumaDeadzone
+11,	// intraLumaDeadzone
+0,	// cqmPreset
+{6,13,20,28,13,20,28,32,20,28,32,37,28,32,37,42},	// intra4x4Luma
+{6,13,20,28,13,20,28,32,20,28,32,37,28,32,37,42},	// intra4x4Chroma
+{10,14,20,24,14,20,24,27,20,24,27,30,24,27,30,34},	// inter4x4Luma
+{10,14,20,24,14,20,24,27,20,24,27,30,24,27,30,34},	// inter4x4Chroma
+{6,10,13,16,18,23,25,27,10,11,16,18,23,25,27,29,13,16,18,23,25,27,29,31,16,18,23,25,27,29,31,33,18,23,25,27,29,31,33,36,23,25,27,29,31,33,36,38,25,27,29,31,33,36,38,40,27,29,31,33,36,38,40,42},	// intra8x8Luma
+{9,13,15,17,19,21,22,24,13,13,17,19,21,22,24,25,15,17,19,21,22,24,25,27,17,19,21,22,24,25,27,28,19,21,22,24,25,27,28,30,21,22,24,25,27,28,30,32,22,24,25,27,28,30,32,33,24,25,27,28,30,32,33,35},	// inter8x8Luma
+100,	// rateTolerance
+1.4,	// quantiserIpRatio
+1.3,	// quantiserPbRatio
+0,		// chromaQuantiserOffset
+20.0,	// quantiserComplexityBlur
+0.5,	// quantiserBlur
+0,		// spsId
+1,		// deterministic
+0,		// accessUnitDelimiters
+1,		// psnrComputation
+1,		// ssimComputation
+0,		// overscan
+5,		// videoFormat
+2,		// colourPrimaries
+2,		// transferCharacteristics
+2		// colourMatrix
 };
 /**************************************/
 ADM_x264Param x264ExtraDefault=x264Extra;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encx264.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encx264.cpp	2008-04-02 23:54:12 UTC (rev 3964)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encx264.cpp	2008-04-03 00:17:06 UTC (rev 3965)
@@ -96,7 +96,7 @@
     {
 
     case COMPRESS_CQ:
-      printf ("\n[x264] cq mode: %ld", _param.qz);
+      printf ("\n[x264] CQ mode: %ld\n", _param.qz);
       _state = enc_CQ;
       _codec = new X264EncoderCQ (_w, _h);
 
@@ -107,7 +107,7 @@
 	}
       break;
     case COMPRESS_AQ:
-      printf ("\n[x264] AQ mode: %ld", _param.qz);
+      printf ("\n[x264] AQ mode: %ld\n", _param.qz);
       _state = enc_CQ;
       _codec = new X264EncoderAQ (_w, _h);
 
@@ -118,7 +118,7 @@
 	}
       break;
     case COMPRESS_CBR:
-      printf ("\n[x264] CBR mode: %lu", _param.bitrate);
+      printf ("\n[x264] CBR mode: %lu\n", _param.bitrate);
       _state = enc_CBR;
 
       _codec = new X264EncoderCBR (_w, _h);
@@ -142,14 +142,11 @@
       ADM_assert (0);
     }
 
-
-  printf ("\n[x264] Encoder ready, w: %lu h: %lu mode: %d", _w, _h, _state);
+  printf ("[x264] Encoder ready, w: %lu, h: %lu, mode: %d\n", _w, _h, _state);
   return 1;
-
 }
 
 
-
 uint8_t
 EncoderX264::startPass1 (void)
 {

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp	2008-04-02 23:54:12 UTC (rev 3964)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp	2008-04-03 00:17:06 UTC (rev 3965)
@@ -309,7 +309,6 @@
     ENTRY(AR_Num);\
     ENTRY(AR_Den);\
     \
-    COMBO(PartitionDecision); \
     SPIN(Range);\
     COMBO(Method); \
     COMBO(DirectMode); \
@@ -333,6 +332,24 @@
 #undef ENTRY
 #undef PSEUDO
 	RADIO_SET(radiobuttonAsInputAR, param->AR_AsInput);
+
+	uint32_t decisionItem;
+
+	if (param->PartitionDecision < 6)
+		decisionItem = param->PartitionDecision - 1;
+	else
+		if (param->PartitionDecision == 6)
+			if (param->RDO)
+				decisionItem = 6;
+			else
+				decisionItem = 5;
+		else
+			if (param->RDO)
+				decisionItem = 8;
+			else
+				decisionItem = 7;
+
+	gtk_combo_box_set_active(GTK_COMBO_BOX(WID(comboboxPartitionDecision)), decisionItem);
 }
 void download(GtkWidget *dialog,ADM_x264Param *param)
 {
@@ -354,6 +371,24 @@
               param-> AR_Den=x264_ar[rank].den;
         }
         param->AR_AsInput = RADIO_GET(radiobuttonAsInputAR);
+
+	uint32_t decisionItem = gtk_combo_box_get_active(GTK_COMBO_BOX(WID(comboboxPartitionDecision)));
+
+	if (decisionItem < 6)
+	{
+		param->PartitionDecision = decisionItem + 1;
+		param->RDO = false;
+	}
+	else if (decisionItem == 6)
+	{
+		param->PartitionDecision = 6;
+		param->RDO = true;
+	}
+	else
+	{
+		param->PartitionDecision = 7;
+		param->RDO = (decisionItem == 8);
+	}
 }
 
 GtkWidget*

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/CMakeLists.txt	2008-04-02 23:54:12 UTC (rev 3964)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/CMakeLists.txt	2008-04-03 00:17:06 UTC (rev 3965)
@@ -12,6 +12,9 @@
 	resizing
 	jobs
 	working
+	x264_matrix
+	x264_zones
+	x264
 	vobsub)
 
 SET(${ADM_LIB}_T
@@ -23,7 +26,6 @@
 	alert_qt4.cpp
 	DIA_busy.cpp
 	DIA_none.cpp
-	DIA_x264.cpp
 	DIA_xvid4.cpp
 	OCR_none.cpp)
 

Added: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_x264.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_x264.cpp	2008-04-02 23:54:12 UTC (rev 3964)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_x264.cpp	2008-04-03 00:17:06 UTC (rev 3965)
@@ -0,0 +1,680 @@
+/***************************************************************************
+                         Q_x264.cpp  -  description
+                         --------------------------
+
+                          GUI for configuring x264
+
+    begin                : Tue May 18 2008
+    copyright            : (C) 2008 by gruntster
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#include "config.h"
+#include "ui_x264.h"
+#include "Q_x264_matrix.h"
+#include "Q_x264_zones.h"
+
+#include "ADM_default.h"
+#include "ADM_encoder/ADM_vidEncode.hxx"
+#include "ADM_codecs/ADM_x264param.h"
+#include "ADM_toolkit/toolkit.hxx"
+#include "avidemutils.h"
+#include "avi_vars.h"
+#include "DIA_fileSel.h"
+
+class x264ConfigDialog : public QDialog
+{
+	Q_OBJECT
+
+private:
+	Ui_x264ConfigDialog ui;
+
+	static const int aspectRatioCount = 4;
+	int predefinedARs[aspectRatioCount][2];
+
+	static const int idcLevelCount = 15;
+	uint8_t idcLevel[idcLevelCount];
+
+	static const int videoFormatCount = 6;
+	uint8_t videoFormat[videoFormatCount];
+
+	static const int colourPrimariesCount = 7;
+	uint8_t colourPrimaries[colourPrimariesCount];
+
+	static const int transferCharacteristicsCount = 9;
+	uint8_t transferCharacteristics[transferCharacteristicsCount];
+
+	static const int colourMatrixCount = 8;
+	uint8_t colourMatrix[colourMatrixCount];
+
+	int lastBitrate, lastVideoSize;
+	uint8_t intra4x4Luma[16], intraChroma[16];
+	uint8_t inter4x4Luma[16], interChroma[16];
+	uint8_t intra8x8Luma[64], inter8x8Luma[64];
+
+	void loadSettings(COMPRES_PARAMS *genericParam);
+	int getValueIndexInArray(uint8_t value, const uint8_t valueArray[], int elementCount);
+
+public:
+	x264ConfigDialog(COMPRES_PARAMS *config);
+	void saveSettings(COMPRES_PARAMS *genericParam);
+
+private slots:
+	// General tab
+	void encodingModeComboBox_currentIndexChanged(int index);
+	void quantiserSlider_valueChanged(int value);
+	void quantiserSpinBox_valueChanged(int value);
+	void targetRateControlSpinBox_valueChanged(int value);
+
+	// Motion Estimation tab
+	void meSlider_valueChanged(int value);
+	void meSpinBox_valueChanged(int value);
+	void dct8x8CheckBox_toggled(bool checked);
+	void p8x8CheckBox_toggled(bool checked);
+	
+	// Frame tab
+	void loopFilterCheckBox_toggled(bool checked);
+	void cabacCheckBox_toggled(bool checked);
+
+	// Analysis tab
+	void trellisCheckBox_toggled(bool checked);
+	void matrixCustomEditButton_pressed();
+
+	// Advanced Rate Control tab
+	void zoneAddButton_pressed();
+	void zoneEditButton_pressed();
+	void frameTypeFileButton_pressed();
+};
+
+x264ConfigDialog::x264ConfigDialog(COMPRES_PARAMS *config)
+{
+	static const int _predefinedARs[aspectRatioCount][2] = {{16, 15}, {64, 45}, {8, 9}, {32, 27}};
+
+	// Mappings for x264 array index -> UI combobox index
+	static const uint8_t _idcLevel[idcLevelCount] = {1, 11, 12, 13, 2, 21, 22, 3, 31, 32, 4, 41, 42, 5, 51};
+	static const uint8_t _videoFormat[videoFormatCount] = {5, 0, 1, 2, 3, 4};
+	static const uint8_t _colourPrimaries[colourPrimariesCount] = {2, 1, 4, 5, 6, 7, 8};
+	static const uint8_t _transferCharacteristics[transferCharacteristicsCount] = {2, 1, 4, 5, 8, 9, 10, 6, 7};
+	static const uint8_t _colourMatrix[colourMatrixCount] = {2, 1, 4, 5, 6, 7, 0, 8};
+
+	memcpy(predefinedARs, _predefinedARs, sizeof(predefinedARs));
+	memcpy(idcLevel, _idcLevel, sizeof(idcLevel));
+	memcpy(videoFormat, _videoFormat, sizeof(videoFormat));
+	memcpy(colourPrimaries, _colourPrimaries, sizeof(colourPrimaries));
+	memcpy(transferCharacteristics, _transferCharacteristics, sizeof(transferCharacteristics));	
+	memcpy(colourMatrix, _colourMatrix, sizeof(colourMatrix));	
+
+	ui.setupUi(this);
+
+	// General tab
+	lastBitrate = 1500;
+	lastVideoSize = 700;
+
+	connect(ui.encodingModeComboBox, SIGNAL(currentIndexChanged(int)), this, SLOT(encodingModeComboBox_currentIndexChanged(int)));
+	connect(ui.quantiserSlider, SIGNAL(valueChanged(int)), this, SLOT(quantiserSlider_valueChanged(int)));
+	connect(ui.quantiserSpinBox, SIGNAL(valueChanged(int)), this, SLOT(quantiserSpinBox_valueChanged(int)));
+	connect(ui.targetRateControlSpinBox, SIGNAL(valueChanged(int)), this, SLOT(targetRateControlSpinBox_valueChanged(int)));
+
+	uint32_t war = video_body->getPARWidth();
+	uint32_t har = video_body->getPARHeight();
+	const char *s;
+
+	getAspectRatioFromAR(war, har, &s);
+	ui.sarAsInputLabel->setText(QString("%1 (%2:%3)").arg(s).arg(war).arg(har));
+
+	// Motion Estimation tab
+	connect(ui.meSlider, SIGNAL(valueChanged(int)), this, SLOT(meSlider_valueChanged(int)));
+	connect(ui.meSpinBox, SIGNAL(valueChanged(int)), this, SLOT(meSpinBox_valueChanged(int)));
+	connect(ui.dct8x8CheckBox, SIGNAL(toggled(bool)), this, SLOT(dct8x8CheckBox_toggled(bool)));
+	connect(ui.p8x8CheckBox, SIGNAL(toggled(bool)), this, SLOT(p8x8CheckBox_toggled(bool)));
+
+	// Frame tab
+	connect(ui.loopFilterCheckBox, SIGNAL(toggled(bool)), this, SLOT(loopFilterCheckBox_toggled(bool)));
+	connect(ui.cabacCheckBox, SIGNAL(toggled(bool)), this, SLOT(cabacCheckBox_toggled(bool)));
+
+	// Analysis tab
+	connect(ui.trellisCheckBox, SIGNAL(toggled(bool)), this, SLOT(trellisCheckBox_toggled(bool)));
+	connect(ui.matrixCustomEditButton, SIGNAL(pressed()), this, SLOT(matrixCustomEditButton_pressed()));
+
+	// Advanced Rate Control
+	connect(ui.zoneAddButton, SIGNAL(pressed()), this, SLOT(zoneAddButton_pressed()));
+	connect(ui.zoneEditButton, SIGNAL(pressed()), this, SLOT(zoneEditButton_pressed()));
+	connect(ui.frameTypeFileButton, SIGNAL(pressed()), this, SLOT(frameTypeFileButton_pressed()));	
+
+	loadSettings(config);
+}
+
+// General tab
+void x264ConfigDialog::encodingModeComboBox_currentIndexChanged(int index)
+{
+	bool enable = false;
+
+	switch (index)
+	{
+		case 0:
+			ui.targetRateControlLabel1->setText(QT_TR_NOOP("Target Bitrate"));
+			ui.targetRateControlLabel2->setText(QT_TR_NOOP("kbit/s"));
+			ui.targetRateControlSpinBox->setValue(lastBitrate);
+			break;
+		case 1: // Constant Quality - 1 pass
+			ui.quantiserLabel2->setText(QT_TR_NOOP("Quantiser"));
+			enable = true;
+			break;
+		case 2: // Average Quantiser - 1 pass
+			ui.quantiserLabel2->setText(QT_TR_NOOP("Quality"));
+			enable = true;
+			break;
+		case 3: // Video Size - 2 pass
+			ui.targetRateControlLabel1->setText(QT_TR_NOOP("Target Video Size"));
+			ui.targetRateControlLabel2->setText(QT_TR_NOOP("MB"));
+			ui.targetRateControlSpinBox->setValue(lastVideoSize);
+			break;
+		case 4: // Average Bitrate - 2 pass
+			ui.targetRateControlLabel1->setText(QT_TR_NOOP("Average Bitrate"));
+			ui.targetRateControlLabel2->setText(QT_TR_NOOP("kbit/s"));
+			ui.targetRateControlSpinBox->setValue(lastBitrate);
+			break;
+	}
+
+	ui.quantiserLabel1->setEnabled(enable);
+	ui.quantiserLabel2->setEnabled(enable);
+	ui.quantiserLabel3->setEnabled(enable);
+	ui.quantiserSlider->setEnabled(enable);
+	ui.quantiserSpinBox->setEnabled(enable);
+
+	ui.targetRateControlLabel1->setEnabled(!enable);
+	ui.targetRateControlLabel2->setEnabled(!enable);
+	ui.targetRateControlSpinBox->setEnabled(!enable);
+}
+
+void x264ConfigDialog::quantiserSlider_valueChanged(int value)
+{
+	ui.quantiserSpinBox->setValue(value);
+}
+
+void x264ConfigDialog::quantiserSpinBox_valueChanged(int value)
+{
+	ui.quantiserSlider->setValue(value);
+}
+
+void x264ConfigDialog::targetRateControlSpinBox_valueChanged(int value)
+{
+	if (ui.encodingModeComboBox->currentIndex() == 3)	// Video Size - 2 pass
+		lastVideoSize = value;
+	else
+		lastBitrate = value;
+}
+
+// Motion Estimation tab
+void x264ConfigDialog::meSlider_valueChanged(int value)
+{
+	ui.meSpinBox->setValue(value);
+	ui.rdoCheckBox->setEnabled(value >= 6);
+
+	if (value < 6)
+		ui.rdoCheckBox->setChecked(false);
+}
+
+void x264ConfigDialog::meSpinBox_valueChanged(int value)
+{
+	ui.meSlider->setValue(value);
+}
+
+void x264ConfigDialog::dct8x8CheckBox_toggled(bool checked)
+{
+	if (!checked)
+		ui.i8x8CheckBox->setChecked(false);
+}
+
+void x264ConfigDialog::p8x8CheckBox_toggled(bool checked)
+{
+	if (!checked)
+		ui.p4x4CheckBox->setChecked(false);
+}
+
+// Frame tab
+void x264ConfigDialog::loopFilterCheckBox_toggled(bool checked)
+{
+	if (!checked)
+	{
+		ui.alphaC0SpinBox->setValue(0);
+		ui.betaSpinBox->setValue(0);
+	}
+}
+
+void x264ConfigDialog::cabacCheckBox_toggled(bool checked)
+{
+	if (!checked && ui.trellisCheckBox->isChecked())
+		if (GUI_Question(QT_TR_NOOP("Trellis optimisation isn't possible without CABAC coding enabled.  Trellis optimisation will automatically be disabled.\n\n Do you wish to continue?")))
+			ui.trellisCheckBox->setChecked(false);
+		else
+			ui.cabacCheckBox->setChecked(true);
+}
+
+// Analysis tab
+void x264ConfigDialog::trellisCheckBox_toggled(bool checked)
+{
+	if (checked && !ui.cabacCheckBox->isChecked())
+		if (GUI_Question(QT_TR_NOOP("Trellis optimisation requires CABAC coding to be enabled.  CABAC coding will automatically be enabled.\n\nDo you wish to continue?")))
+			ui.cabacCheckBox->setChecked(true);
+		else
+			ui.trellisCheckBox->setChecked(false);
+}
+
+void x264ConfigDialog::matrixCustomEditButton_pressed()
+{
+	x264CustomMatrixDialog dialog(intra4x4Luma, intraChroma, inter4x4Luma, interChroma, intra8x8Luma, inter8x8Luma);
+
+	if (dialog.exec() == QDialog::Accepted)
+		dialog.getMatrix(intra4x4Luma, intraChroma, inter4x4Luma, interChroma, intra8x8Luma, inter8x8Luma);
+}
+
+void x264ConfigDialog::zoneAddButton_pressed()
+{
+	x264ZonesDialog dialog;
+
+	if (dialog.exec() == QDialog::Accepted)
+	{
+	}
+}
+
+void x264ConfigDialog::zoneEditButton_pressed()
+{
+	x264ZonesDialog dialog;
+
+	if (dialog.exec() == QDialog::Accepted)
+	{
+	}
+}
+
+void x264ConfigDialog::frameTypeFileButton_pressed()
+{
+	char frameTypeFileName[1024];
+
+	if (FileSel_SelectRead(QT_TR_NOOP("Select Frame Type/Quantiser File"), frameTypeFileName, 1023, NULL) && ADM_fileExist(frameTypeFileName))
+		ui.frameTypeFileLineEdit->setText(frameTypeFileName);
+}
+
+int x264ConfigDialog::getValueIndexInArray(uint8_t value, const uint8_t valueArray[], int elementCount)
+{
+	int valueIndex = -1;
+
+	for (int index = 0; index < elementCount; index++)
+	{
+		if (valueArray[index] == value)
+		{
+			valueIndex = index;
+			break;
+		}
+	}
+
+	return valueIndex;
+}
+
+void x264ConfigDialog::loadSettings(COMPRES_PARAMS *genericParam)
+{
+	ADM_x264Param *x264Param = (ADM_x264Param*)genericParam->extraSettings;
+
+	// General tab
+	switch (genericParam->mode)
+	{
+		case COMPRESS_CBR:	// Constant Bitrate (Single Pass)
+			ui.encodingModeComboBox->setCurrentIndex(0);
+			ui.targetRateControlSpinBox->setValue(genericParam->bitrate);
+			break;
+		case COMPRESS_CQ:	// Constant Quality (Single Pass)
+			ui.encodingModeComboBox->setCurrentIndex(1);
+			ui.targetRateControlSpinBox->setValue(genericParam->qz);
+			break;
+		case COMPRESS_AQ:	// Average Quantizer (Single Pass)
+			ui.encodingModeComboBox->setCurrentIndex(2);
+			ui.targetRateControlSpinBox->setValue(genericParam->qz);
+			break;
+		case COMPRESS_2PASS:	// Video Size (Two Pass)
+			ui.encodingModeComboBox->setCurrentIndex(3);
+			ui.targetRateControlSpinBox->setValue(genericParam->finalsize);
+			break;
+		case COMPRESS_2PASS_BITRATE:	// Average Bitrate (Two Pass)
+			ui.encodingModeComboBox->setCurrentIndex(4);
+			ui.targetRateControlSpinBox->setValue(genericParam->avg_bitrate);
+			break;
+	}
+
+	if (x264Param->AR_AsInput)
+		ui.sarAsInputRadioButton->setChecked(true);
+	else
+	{
+		bool predefined = false;
+
+		for (int ratioIndex = 0; ratioIndex < aspectRatioCount; ratioIndex++)
+		{
+			if (x264Param->AR_Num == predefinedARs[ratioIndex][0] && x264Param->AR_Den == predefinedARs[ratioIndex][1])
+			{
+				ui.sarPredefinedRadioButton->setChecked(true);
+				ui.sarPredefinedComboBox->setCurrentIndex(ratioIndex);
+				predefined = true;
+				break;
+			}
+		}
+
+		if (!predefined)
+		{
+			ui.sarCustomSpinBox1->setValue(x264Param->AR_Num);
+			ui.sarCustomSpinBox2->setValue(x264Param->AR_Den);
+		}
+	}
+
+	// Motion Estimation tab
+	ui.meSpinBox->setValue(x264Param->PartitionDecision);
+	ui.rdoCheckBox->setChecked(x264Param->RDO);
+	ui.meMethodComboBox->setCurrentIndex(x264Param->Method);
+	ui.mvRangeSpinBox->setValue(x264Param->Range);
+
+	if (x264Param->mv_range == -1)
+		ui.mvLengthCheckBox->setChecked(false);
+	else
+	{
+		ui.mvLengthCheckBox->setChecked(true);
+		ui.mvLengthSpinBox->setValue(x264Param->mv_range);
+	}
+
+	if (x264Param->mv_range_thread == -1)
+		ui.minThreadBufferCheckBox->setChecked(false);
+	else
+	{
+		ui.minThreadBufferCheckBox->setChecked(true);
+		ui.minThreadBufferSpinBox->setValue(x264Param->mv_range_thread);
+	}
+
+	ui.predictModeComboBox->setCurrentIndex(x264Param->DirectMode);
+
+	if (x264Param->direct_8x8_inference == -1)
+		ui.predictSizeComboBox->setCurrentIndex(0);
+	else
+		ui.predictSizeComboBox->setCurrentIndex(x264Param->direct_8x8_inference);
+
+	ui.weightedPredictCheckBox->setChecked(x264Param->Weighted);
+	ui.dct8x8CheckBox->setChecked(x264Param->_8x8);
+	ui.p8x8CheckBox->setChecked(x264Param->_8x8P);
+	ui.b8x8CheckBox->setChecked(x264Param->_8x8B);
+	ui.p4x4CheckBox->setChecked(x264Param->_4x4);
+	ui.i8x8CheckBox->setChecked(x264Param->_8x8I);
+	ui.i4x4CheckBox->setChecked(x264Param->_4x4I);
+
+	// Frame tab
+	ui.cabacCheckBox->setChecked(x264Param->CABAC);
+	ui.interlacedCheckBox->setChecked(x264Param->interlaced);
+	ui.loopFilterCheckBox->setChecked(x264Param->DeblockingFilter);
+	ui.alphaC0SpinBox->setValue(x264Param->Strength);
+	ui.betaSpinBox->setValue(x264Param->Threshold);
+	ui.maxBFramesSpinBox->setValue(x264Param->MaxBFrame);
+	ui.BFrameBiasSpinBox->setValue(x264Param->Bias);
+	ui.refFramesSpinBox->setValue(x264Param->MaxRefFrames);
+	ui.bFrameRefCheckBox->setChecked(x264Param->BasReference);
+	ui.adaptiveBFrameCheckBox->setChecked(x264Param->Adaptative);
+	ui.maxGopSizeSpinBox->setValue(x264Param->MaxIdr);
+	ui.minGopSizeSpinBox->setValue(x264Param->MinIdr);
+	ui.IFrameThresholdSpinBox->setValue(x264Param->SceneCut);
+	ui.scenecutDetectionCheckBox->setChecked(x264Param->pre_scenecut);
+
+	// Analysis tab
+	ui.mixedRefsCheckBox->setChecked(x264Param->MixedRefs);
+	ui.chromaMotionEstCheckBox->setChecked(x264Param->ChromaME);
+	ui.bFrameMotionEstCheckBox->setChecked(x264Param->BidirME);
+
+	if (x264Param->Trellis)
+	{
+		ui.trellisCheckBox->setChecked(true);
+		ui.trellisComboBox->setCurrentIndex(x264Param->Trellis - 1);
+	}
+	else
+		ui.trellisCheckBox->setChecked(false);
+
+	ui.fastPSkipCheckBox->setChecked(x264Param->fastPSkip);
+	ui.dctDecimateCheckBox->setChecked(x264Param->DCTDecimate);
+	ui.noiseReductionSpinBox->setValue(x264Param->NoiseReduction);
+	ui.interLumaSpinBox->setValue(x264Param->interLumaDeadzone);
+	ui.intraLumaSpinBox->setValue(x264Param->intraLumaDeadzone);
+
+	switch (x264Param->cqmPreset)
+	{
+		case 0:
+			ui.matrixFlatRadioButton->setChecked(true);
+			break;
+		case 1:
+			ui.matrixJvtRadioButton->setChecked(true);
+			break;
+		case 2:
+			ui.matrixCustomRadioButton->setChecked(true);
+			break;
+	}
+
+	memcpy(intra4x4Luma, x264Param->intra4x4Luma, sizeof(intra4x4Luma));
+	memcpy(intraChroma, x264Param->intraChroma, sizeof(intraChroma));
+	memcpy(inter4x4Luma, x264Param->inter4x4Luma, sizeof(inter4x4Luma));
+	memcpy(interChroma, x264Param->interChroma, sizeof(interChroma));
+	memcpy(intra8x8Luma, x264Param->intra8x8Luma, sizeof(intra8x8Luma));
+	memcpy(inter8x8Luma, x264Param->inter8x8Luma, sizeof(inter8x8Luma));
+
+	// Quantiser tab
+	ui.quantiserMinSpinBox->setValue(x264Param->MinQp);
+	ui.quantiserMaxSpinBox->setValue(x264Param->MaxQp);
+	ui.quantiserMaxStepSpinBox->setValue(x264Param->QpStep);
+	ui.avgBitrateToleranceSpinBox->setValue(x264Param->rateTolerance);
+	ui.quantiserIpRatioSpinBox->setValue(x264Param->quantiserIpRatio);
+	ui.quantiserPbRatioSpinBox->setValue(x264Param->quantiserPbRatio);
+	ui.chromaLumaOffsetSpinBox->setValue(x264Param->chromaQuantiserOffset);
+	ui.quantiserCurveCompressSpinBox->setValue(x264Param->BitrateVariability);
+	ui.quantiserBeforeCompressSpinBox->setValue(x264Param->quantiserComplexityBlur);
+	ui.quantiserAfterCompressSpinBox->setValue(x264Param->quantiserBlur);
+	ui.vbvMaxBitrateSpinBox->setValue(x264Param->vbv_max_bitrate);
+	ui.vbvBufferSizeSpinBox->setValue(x264Param->vbv_buffer_size);
+	ui.vbvBufferOccupancySpinBox->setValue(x264Param->vbv_buffer_init);
+
+	// Output tab
+	if (!x264Param->idc)
+		x264Param->idc = 51;
+
+	ui.idcLevelComboBox->setCurrentIndex(getValueIndexInArray(x264Param->idc, idcLevel, idcLevelCount));
+
+	QString strSpsId;
+
+	strSpsId.setNum(x264Param->spsId);
+	ui.spsiComboBox->setCurrentIndex(ui.spsiComboBox->findText(strSpsId));
+	ui.repeatabilityCheckBox->setChecked(x264Param->deterministic);
+	ui.accessUnitCheckBox->setChecked(x264Param->accessUnitDelimiters);
+	ui.psnrCheckBox->setChecked(x264Param->psnrComputation);
+	ui.ssimCheckBox->setChecked(x264Param->ssimComputation);
+	ui.overscanComboBox->setCurrentIndex(x264Param->overscan);
+	ui.videoFormatComboBox->setCurrentIndex(getValueIndexInArray(x264Param->videoFormat, videoFormat, videoFormatCount));
+	ui.colourPrimariesComboBox->setCurrentIndex(getValueIndexInArray(x264Param->colourPrimaries, colourPrimaries, colourPrimariesCount));
+	ui.transferCharacteristicsComboBox->setCurrentIndex(getValueIndexInArray(x264Param->transferCharacteristics, transferCharacteristics, transferCharacteristicsCount));
+	ui.colourMatrixComboBox->setCurrentIndex(getValueIndexInArray(x264Param->colourMatrix, colourMatrix, colourMatrixCount));
+	ui.chromaSampleSpinBox->setValue(x264Param->chromaSampleLocation);
+	ui.fullRangeSamplesCheckBox->setChecked(x264Param->fullRangeSamples);
+}
+
+void x264ConfigDialog::saveSettings(COMPRES_PARAMS *genericParam)
+{
+	ADM_x264Param *x264Param = (ADM_x264Param*)genericParam->extraSettings;
+
+	// General tab
+	switch (ui.encodingModeComboBox->currentIndex())
+	{
+		case 0:	// Constant Bitrate (Single Pass)
+			genericParam->mode = COMPRESS_CBR;
+			genericParam->bitrate = ui.targetRateControlSpinBox->value();
+			break;
+		case 1: // Constant Quality (Single Pass)
+			genericParam->mode = COMPRESS_CQ;
+			genericParam->qz = ui.quantiserSpinBox->value();
+			break;
+		case 2: // Average Quantizer (Single Pass)
+			genericParam->mode = COMPRESS_AQ;
+			genericParam->qz = ui.quantiserSpinBox->value();
+			break;
+		case 3: // Video Size (Two Pass)
+			genericParam->mode = COMPRESS_2PASS;
+			genericParam->finalsize = ui.targetRateControlSpinBox->value();
+			break;
+		case 4: // Average Bitrate (Two Pass)
+			genericParam->mode = COMPRESS_2PASS_BITRATE;
+			genericParam->avg_bitrate = ui.targetRateControlSpinBox->value();
+			break;
+	}
+
+	x264Param->AR_AsInput = (ui.sarAsInputRadioButton->isChecked());
+
+	if (ui.sarCustomRadioButton->isChecked())
+	{
+		x264Param->AR_Num = ui.sarCustomSpinBox1->value();
+		x264Param->AR_Den = ui.sarCustomSpinBox2->value();
+	}
+	else if (ui.sarPredefinedRadioButton->isChecked())
+	{
+		x264Param->AR_Num = predefinedARs[ui.sarPredefinedComboBox->currentIndex()][0];
+		x264Param->AR_Den = predefinedARs[ui.sarPredefinedComboBox->currentIndex()][1];
+	}
+	else
+	{
+		// clear variables
+		x264Param->AR_Num = 1;
+		x264Param->AR_Den = 1;
+	}
+
+	// Motion Estimation tab
+	x264Param->PartitionDecision = ui.meSpinBox->value();
+	x264Param->RDO = ui.rdoCheckBox->isChecked();
+	x264Param->Method = ui.meMethodComboBox->currentIndex();
+	x264Param->Range = ui.mvRangeSpinBox->value();
+	
+	if (ui.mvLengthCheckBox->isChecked())
+		x264Param->mv_range = ui.mvLengthSpinBox->value();
+	else
+		x264Param->mv_range = -1;
+
+	if (ui.minThreadBufferCheckBox->isChecked())
+		x264Param->mv_range_thread = ui.minThreadBufferSpinBox->value();
+	else
+		x264Param->mv_range_thread = -1;
+
+	x264Param->DirectMode = ui.predictModeComboBox->currentIndex();
+	x264Param->direct_8x8_inference = ui.predictSizeComboBox->currentIndex();
+
+	if (x264Param->direct_8x8_inference == 0)
+		x264Param->direct_8x8_inference = -1;
+
+	x264Param->Weighted = ui.weightedPredictCheckBox->isChecked();
+	x264Param->_8x8 = ui.dct8x8CheckBox->isChecked();
+	x264Param->_8x8P = ui.p8x8CheckBox->isChecked();
+	x264Param->_8x8B = ui.b8x8CheckBox->isChecked();
+	x264Param->_4x4 = ui.p4x4CheckBox->isChecked();
+	x264Param->_8x8I = ui.i8x8CheckBox->isChecked();
+	x264Param->_4x4I = ui.i4x4CheckBox->isChecked();
+
+	// Frame tab
+	x264Param->CABAC = ui.cabacCheckBox->isChecked();
+	x264Param->interlaced = ui.interlacedCheckBox->isChecked();
+	x264Param->DeblockingFilter = ui.loopFilterCheckBox->isChecked();
+	x264Param->Strength = ui.alphaC0SpinBox->value();
+	x264Param->Threshold = ui.betaSpinBox->value();
+	x264Param->MaxBFrame = ui.maxBFramesSpinBox->value();
+	x264Param->Bias = ui.BFrameBiasSpinBox->value();
+	x264Param->MaxRefFrames = ui.refFramesSpinBox->value();
+	x264Param->BasReference = ui.bFrameRefCheckBox->isChecked();
+	x264Param->Adaptative = ui.adaptiveBFrameCheckBox->isChecked();
+	x264Param->MaxIdr = ui.maxGopSizeSpinBox->value();
+	x264Param->MinIdr = ui.minGopSizeSpinBox->value();
+	x264Param->SceneCut = ui.IFrameThresholdSpinBox->value();
+	x264Param->pre_scenecut = ui.scenecutDetectionCheckBox->isChecked();
+
+	// Analysis tab
+	x264Param->MixedRefs = ui.mixedRefsCheckBox->isChecked();
+	x264Param->ChromaME = ui.chromaMotionEstCheckBox->isChecked();
+	x264Param->BidirME = ui.bFrameMotionEstCheckBox->isChecked();
+
+	if (ui.trellisCheckBox->isChecked())
+		x264Param->Trellis = ui.trellisComboBox->currentIndex() + 1;
+	else
+		x264Param->Trellis = 0;
+
+	x264Param->fastPSkip = ui.fastPSkipCheckBox->isChecked();
+	x264Param->DCTDecimate = ui.dctDecimateCheckBox->isChecked();
+	x264Param->NoiseReduction = ui.noiseReductionSpinBox->value();
+	x264Param->interLumaDeadzone = ui.interLumaSpinBox->value();
+	x264Param->intraLumaDeadzone = ui.intraLumaSpinBox->value();
+
+	if (ui.matrixCustomRadioButton->isChecked())
+	{
+		x264Param->cqmPreset = 2;
+
+		memcpy(x264Param->intra4x4Luma, intra4x4Luma, sizeof(x264Param->intra4x4Luma));
+		memcpy(x264Param->intraChroma, intraChroma, sizeof(x264Param->intraChroma));
+		memcpy(x264Param->inter4x4Luma, inter4x4Luma, sizeof(x264Param->inter4x4Luma));
+		memcpy(x264Param->interChroma, interChroma, sizeof(x264Param->interChroma));
+		memcpy(x264Param->intra8x8Luma, intra8x8Luma, sizeof(x264Param->intra8x8Luma));
+		memcpy(x264Param->inter8x8Luma, inter8x8Luma, sizeof(x264Param->inter8x8Luma));
+	}
+	else if (ui.matrixJvtRadioButton->isChecked())
+		x264Param->cqmPreset = 1;
+	else
+		x264Param->cqmPreset = 0;
+
+	// Quantiser tab
+	x264Param->MinQp = ui.quantiserMinSpinBox->value();
+	x264Param->MaxQp = ui.quantiserMaxSpinBox->value();
+	x264Param->QpStep = ui.quantiserMaxStepSpinBox->value();
+	x264Param->rateTolerance = ui.avgBitrateToleranceSpinBox->value();
+	x264Param->quantiserIpRatio = ui.quantiserIpRatioSpinBox->value();
+	x264Param->quantiserPbRatio = ui.quantiserPbRatioSpinBox->value();
+	x264Param->chromaQuantiserOffset = ui.chromaLumaOffsetSpinBox->value();
+	x264Param->BitrateVariability = ui.quantiserCurveCompressSpinBox->value();
+	x264Param->quantiserComplexityBlur = ui.quantiserBeforeCompressSpinBox->value();
+	x264Param->quantiserBlur = ui.quantiserAfterCompressSpinBox->value();
+	x264Param->vbv_max_bitrate = ui.vbvMaxBitrateSpinBox->value();
+	x264Param->vbv_buffer_size = ui.vbvBufferSizeSpinBox->value();
+	x264Param->vbv_buffer_init = ui.vbvBufferOccupancySpinBox->value();
+
+	// Output tab
+	x264Param->idc = idcLevel[ui.idcLevelComboBox->currentIndex()];
+
+	bool ok;
+	x264Param->spsId = ui.spsiComboBox->currentText().toInt(&ok);
+	ADM_assert(ok);
+
+	x264Param->deterministic = ui.repeatabilityCheckBox->isChecked();
+	x264Param->accessUnitDelimiters = ui.accessUnitCheckBox->isChecked();
+	x264Param->psnrComputation = ui.psnrCheckBox->isChecked();
+	x264Param->ssimComputation = ui.ssimCheckBox->isChecked();
+	x264Param->overscan = ui.overscanComboBox->currentIndex();
+	x264Param->videoFormat = videoFormat[ui.videoFormatComboBox->currentIndex()];
+	x264Param->colourPrimaries = colourPrimaries[ui.colourPrimariesComboBox->currentIndex()];
+	x264Param->transferCharacteristics = transferCharacteristics[ui.transferCharacteristicsComboBox->currentIndex()];
+	x264Param->colourMatrix = colourMatrix[ui.colourMatrixComboBox->currentIndex()];
+	x264Param->chromaSampleLocation = ui.chromaSampleSpinBox->value();
+	x264Param->fullRangeSamples = ui.fullRangeSamplesCheckBox->isChecked();
+}
+
+uint8_t DIA_x264(COMPRES_PARAMS *config)
+{
+	ADM_assert(config->extraSettingsLen == sizeof(ADM_x264Param));
+
+	x264ConfigDialog dialog(config);
+
+	if (dialog.exec() == QDialog::Accepted)
+	{
+		dialog.saveSettings(config);
+
+		return 1;
+	}
+
+	return 0;
+}
\ No newline at end of file

Added: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_x264_matrix.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_x264_matrix.cpp	2008-04-02 23:54:12 UTC (rev 3964)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_x264_matrix.cpp	2008-04-03 00:17:06 UTC (rev 3965)
@@ -0,0 +1,504 @@
+/***************************************************************************
+                     Q_x264_matrix.cpp  -  description
+                     ---------------------------------
+
+                      GUI for configuring x264 matrix
+
+    begin                : Tue Apr 01 2008
+    copyright            : (C) 2008 by gruntster
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#include "config.h"
+#include "ui_x264_matrix.h"
+#include "ADM_default.h"
+#include "DIA_fileSel.h"
+#include "ADM_toolkit\toolkit.hxx"
+
+extern int x264_cqm_parse_file(const char *filename, uint8_t* cqm_4iy, uint8_t* cqm_4ic, uint8_t* cqm_4py, uint8_t* cqm_4pc, uint8_t* cqm_8iy, uint8_t* cqm_8py);
+
+class x264CustomMatrixDialog : public QDialog
+{
+	Q_OBJECT
+
+private:
+	Ui_x264CustomMatrixDialog ui;
+
+	void setIntra4x4Luma(const uint8_t intra4x4Luma[]);
+	void setIntraChroma(const uint8_t intraChroma[]);
+	void setInter4x4Luma(const uint8_t inter4x4Luma[]);
+	void setInterChroma(const uint8_t interChroma[]);
+	void setIntra8x8Luma(const uint8_t intra8x8Luma[]);
+	void setInter8x8Luma(const uint8_t inter8x8Luma[]);
+
+public:
+	x264CustomMatrixDialog(const uint8_t* intra4x4Luma, const uint8_t* intraChroma, const uint8_t* inter4x4Luma, 
+		const uint8_t* interChroma, const uint8_t* intra8x8Luma, const uint8_t* inter8x8Luma);
+	void getMatrix(uint8_t* intra4x4Luma, uint8_t* intra4x4Chroma, uint8_t* inter4x4Luma, 
+		uint8_t* inter4x4Chroma, uint8_t* intra8x8Luma, uint8_t* inter8x8Luma);
+
+private slots:
+	void loadFileButton_pressed();
+};
+
+x264CustomMatrixDialog::x264CustomMatrixDialog(const uint8_t intra4x4Luma[16], const uint8_t intraChroma[16], const uint8_t inter4x4Luma[16],
+											   const uint8_t interChroma[16], const uint8_t intra8x8Luma[64], const uint8_t inter8x8Luma[64])
+{
+	ui.setupUi(this);
+
+	connect(ui.loadFileButton, SIGNAL(pressed()), this, SLOT(loadFileButton_pressed()));
+
+	setIntra4x4Luma(intra4x4Luma);
+	setIntraChroma(intraChroma);
+	setInter4x4Luma(inter4x4Luma);
+	setInterChroma(interChroma);
+	setIntra8x8Luma(intra8x8Luma);
+	setInter8x8Luma(inter8x8Luma);
+}
+
+void x264CustomMatrixDialog::loadFileButton_pressed()
+{
+	char cqmFileName[1024];
+	uint8_t intra4x4Luma[16], intra4x4Chroma[16];
+	uint8_t inter4x4Luma[16], inter4x4Chroma[16];
+	uint8_t intra8x8Luma[64], inter8x8Luma[64];
+
+	if (FileSel_SelectRead(QT_TR_NOOP("Select Matrix File"), cqmFileName, 1023, NULL) && ADM_fileExist(cqmFileName))
+		if (x264_cqm_parse_file(cqmFileName, intra4x4Luma, intra4x4Chroma, inter4x4Luma, inter4x4Chroma, intra8x8Luma, inter8x8Luma) == 0)
+		{
+			setIntra4x4Luma(intra4x4Luma);
+			setIntraChroma(intra4x4Chroma);
+			setInter4x4Luma(inter4x4Luma);
+			setInterChroma(inter4x4Chroma);
+			setIntra8x8Luma(intra8x8Luma);
+			setInter8x8Luma(inter8x8Luma);
+		}
+		else
+			GUI_Error_HIG(QT_TR_NOOP("Read Error"), QT_TR_NOOP("Error reading custom matrix file."));
+}
+
+void x264CustomMatrixDialog::getMatrix(uint8_t* intra4x4Luma, uint8_t* intraChroma, uint8_t* inter4x4Luma, 
+									   uint8_t* interChroma, uint8_t* intra8x8Luma, uint8_t* inter8x8Luma)
+{
+	intra4x4Luma[0] = ui.intra4x4Luma1SpinBox->value();
+	intra4x4Luma[1] = ui.intra4x4Luma2SpinBox->value();
+	intra4x4Luma[2] = ui.intra4x4Luma3SpinBox->value();
+	intra4x4Luma[3] = ui.intra4x4Luma4SpinBox->value();
+	intra4x4Luma[4] = ui.intra4x4Luma5SpinBox->value();
+	intra4x4Luma[5] = ui.intra4x4Luma6SpinBox->value();
+	intra4x4Luma[6] = ui.intra4x4Luma7SpinBox->value();
+	intra4x4Luma[7] = ui.intra4x4Luma8SpinBox->value();
+	intra4x4Luma[8] = ui.intra4x4Luma9SpinBox->value();
+	intra4x4Luma[9] = ui.intra4x4Luma10SpinBox->value();
+	intra4x4Luma[10] = ui.intra4x4Luma11SpinBox->value();
+	intra4x4Luma[11] = ui.intra4x4Luma12SpinBox->value();
+	intra4x4Luma[12] = ui.intra4x4Luma13SpinBox->value();
+	intra4x4Luma[13] = ui.intra4x4Luma14SpinBox->value();
+	intra4x4Luma[14] = ui.intra4x4Luma15SpinBox->value();
+	intra4x4Luma[15] = ui.intra4x4Luma16SpinBox->value();
+
+	intraChroma[0] = ui.intraChroma1SpinBox->value();
+	intraChroma[1] = ui.intraChroma2SpinBox->value();
+	intraChroma[2] = ui.intraChroma3SpinBox->value();
+	intraChroma[3] = ui.intraChroma4SpinBox->value();
+	intraChroma[4] = ui.intraChroma5SpinBox->value();
+	intraChroma[5] = ui.intraChroma6SpinBox->value();
+	intraChroma[6] = ui.intraChroma7SpinBox->value();
+	intraChroma[7] = ui.intraChroma8SpinBox->value();
+	intraChroma[8] = ui.intraChroma9SpinBox->value();
+	intraChroma[9] = ui.intraChroma10SpinBox->value();
+	intraChroma[10] = ui.intraChroma11SpinBox->value();
+	intraChroma[11] = ui.intraChroma12SpinBox->value();
+	intraChroma[12] = ui.intraChroma13SpinBox->value();
+	intraChroma[13] = ui.intraChroma14SpinBox->value();
+	intraChroma[14] = ui.intraChroma15SpinBox->value();
+	intraChroma[15] = ui.intraChroma16SpinBox->value();
+
+	inter4x4Luma[0] = ui.inter4x4Luma1SpinBox->value();
+	inter4x4Luma[1] = ui.inter4x4Luma2SpinBox->value();
+	inter4x4Luma[2] = ui.inter4x4Luma3SpinBox->value();
+	inter4x4Luma[3] = ui.inter4x4Luma4SpinBox->value();
+	inter4x4Luma[4] = ui.inter4x4Luma5SpinBox->value();
+	inter4x4Luma[5] = ui.inter4x4Luma6SpinBox->value();
+	inter4x4Luma[6] = ui.inter4x4Luma7SpinBox->value();
+	inter4x4Luma[7] = ui.inter4x4Luma8SpinBox->value();
+	inter4x4Luma[8] = ui.inter4x4Luma9SpinBox->value();
+	inter4x4Luma[9] = ui.inter4x4Luma10SpinBox->value();
+	inter4x4Luma[10] = ui.inter4x4Luma11SpinBox->value();
+	inter4x4Luma[11] = ui.inter4x4Luma12SpinBox->value();
+	inter4x4Luma[12] = ui.inter4x4Luma13SpinBox->value();
+	inter4x4Luma[13] = ui.inter4x4Luma14SpinBox->value();
+	inter4x4Luma[14] = ui.inter4x4Luma15SpinBox->value();
+	inter4x4Luma[15] = ui.inter4x4Luma16SpinBox->value();
+
+	interChroma[0] = ui.interChroma1SpinBox->value();
+	interChroma[1] = ui.interChroma2SpinBox->value();
+	interChroma[2] = ui.interChroma3SpinBox->value();
+	interChroma[3] = ui.interChroma4SpinBox->value();
+	interChroma[4] = ui.interChroma5SpinBox->value();
+	interChroma[5] = ui.interChroma6SpinBox->value();
+	interChroma[6] = ui.interChroma7SpinBox->value();
+	interChroma[7] = ui.interChroma8SpinBox->value();
+	interChroma[8] = ui.interChroma9SpinBox->value();
+	interChroma[9] = ui.interChroma10SpinBox->value();
+	interChroma[10] = ui.interChroma11SpinBox->value();
+	interChroma[11] = ui.interChroma12SpinBox->value();
+	interChroma[12] = ui.interChroma13SpinBox->value();
+	interChroma[13] = ui.interChroma14SpinBox->value();
+	interChroma[14] = ui.interChroma15SpinBox->value();
+	interChroma[15] = ui.interChroma16SpinBox->value();
+
+	intra8x8Luma[0] = ui.intra8x8Luma1SpinBox->value();
+	intra8x8Luma[1] = ui.intra8x8Luma2SpinBox->value();
+	intra8x8Luma[2] = ui.intra8x8Luma3SpinBox->value();
+	intra8x8Luma[3] = ui.intra8x8Luma4SpinBox->value();
+	intra8x8Luma[4] = ui.intra8x8Luma5SpinBox->value();
+	intra8x8Luma[5] = ui.intra8x8Luma6SpinBox->value();
+	intra8x8Luma[6] = ui.intra8x8Luma7SpinBox->value();
+	intra8x8Luma[7] = ui.intra8x8Luma8SpinBox->value();
+	intra8x8Luma[8] = ui.intra8x8Luma9SpinBox->value();
+	intra8x8Luma[9] = ui.intra8x8Luma10SpinBox->value();
+	intra8x8Luma[10] = ui.intra8x8Luma11SpinBox->value();
+	intra8x8Luma[11] = ui.intra8x8Luma12SpinBox->value();
+	intra8x8Luma[12] = ui.intra8x8Luma13SpinBox->value();
+	intra8x8Luma[13] = ui.intra8x8Luma14SpinBox->value();
+	intra8x8Luma[14] = ui.intra8x8Luma15SpinBox->value();
+	intra8x8Luma[15] = ui.intra8x8Luma16SpinBox->value();
+	intra8x8Luma[16] = ui.intra8x8Luma17SpinBox->value();
+	intra8x8Luma[17] = ui.intra8x8Luma18SpinBox->value();
+	intra8x8Luma[18] = ui.intra8x8Luma19SpinBox->value();
+	intra8x8Luma[19] = ui.intra8x8Luma20SpinBox->value();
+	intra8x8Luma[20] = ui.intra8x8Luma21SpinBox->value();
+	intra8x8Luma[21] = ui.intra8x8Luma22SpinBox->value();
+	intra8x8Luma[22] = ui.intra8x8Luma23SpinBox->value();
+	intra8x8Luma[23] = ui.intra8x8Luma24SpinBox->value();
+	intra8x8Luma[24] = ui.intra8x8Luma25SpinBox->value();
+	intra8x8Luma[25] = ui.intra8x8Luma26SpinBox->value();
+	intra8x8Luma[26] = ui.intra8x8Luma27SpinBox->value();
+	intra8x8Luma[27] = ui.intra8x8Luma28SpinBox->value();
+	intra8x8Luma[28] = ui.intra8x8Luma29SpinBox->value();
+	intra8x8Luma[29] = ui.intra8x8Luma30SpinBox->value();
+	intra8x8Luma[30] = ui.intra8x8Luma31SpinBox->value();
+	intra8x8Luma[31] = ui.intra8x8Luma32SpinBox->value();
+	intra8x8Luma[32] = ui.intra8x8Luma33SpinBox->value();
+	intra8x8Luma[33] = ui.intra8x8Luma34SpinBox->value();
+	intra8x8Luma[34] = ui.intra8x8Luma35SpinBox->value();
+	intra8x8Luma[35] = ui.intra8x8Luma36SpinBox->value();
+	intra8x8Luma[36] = ui.intra8x8Luma37SpinBox->value();
+	intra8x8Luma[37] = ui.intra8x8Luma38SpinBox->value();
+	intra8x8Luma[38] = ui.intra8x8Luma39SpinBox->value();
+	intra8x8Luma[39] = ui.intra8x8Luma40SpinBox->value();
+	intra8x8Luma[40] = ui.intra8x8Luma41SpinBox->value();
+	intra8x8Luma[41] = ui.intra8x8Luma42SpinBox->value();
+	intra8x8Luma[42] = ui.intra8x8Luma43SpinBox->value();
+	intra8x8Luma[43] = ui.intra8x8Luma44SpinBox->value();
+	intra8x8Luma[44] = ui.intra8x8Luma45SpinBox->value();
+	intra8x8Luma[45] = ui.intra8x8Luma46SpinBox->value();
+	intra8x8Luma[46] = ui.intra8x8Luma47SpinBox->value();
+	intra8x8Luma[47] = ui.intra8x8Luma48SpinBox->value();
+	intra8x8Luma[48] = ui.intra8x8Luma49SpinBox->value();
+	intra8x8Luma[49] = ui.intra8x8Luma50SpinBox->value();
+	intra8x8Luma[50] = ui.intra8x8Luma51SpinBox->value();
+	intra8x8Luma[51] = ui.intra8x8Luma52SpinBox->value();
+	intra8x8Luma[52] = ui.intra8x8Luma53SpinBox->value();
+	intra8x8Luma[53] = ui.intra8x8Luma54SpinBox->value();
+	intra8x8Luma[54] = ui.intra8x8Luma55SpinBox->value();
+	intra8x8Luma[55] = ui.intra8x8Luma56SpinBox->value();
+	intra8x8Luma[56] = ui.intra8x8Luma57SpinBox->value();
+	intra8x8Luma[57] = ui.intra8x8Luma58SpinBox->value();
+	intra8x8Luma[58] = ui.intra8x8Luma59SpinBox->value();
+	intra8x8Luma[59] = ui.intra8x8Luma60SpinBox->value();
+	intra8x8Luma[60] = ui.intra8x8Luma61SpinBox->value();
+	intra8x8Luma[61] = ui.intra8x8Luma62SpinBox->value();
+	intra8x8Luma[62] = ui.intra8x8Luma63SpinBox->value();
+	intra8x8Luma[63] = ui.intra8x8Luma64SpinBox->value();
+
+	inter8x8Luma[0] = ui.inter8x8Luma1SpinBox->value();
+	inter8x8Luma[1] = ui.inter8x8Luma2SpinBox->value();
+	inter8x8Luma[2] = ui.inter8x8Luma3SpinBox->value();
+	inter8x8Luma[3] = ui.inter8x8Luma4SpinBox->value();
+	inter8x8Luma[4] = ui.inter8x8Luma5SpinBox->value();
+	inter8x8Luma[5] = ui.inter8x8Luma6SpinBox->value();
+	inter8x8Luma[6] = ui.inter8x8Luma7SpinBox->value();
+	inter8x8Luma[7] = ui.inter8x8Luma8SpinBox->value();
+	inter8x8Luma[8] = ui.inter8x8Luma9SpinBox->value();
+	inter8x8Luma[9] = ui.inter8x8Luma10SpinBox->value();
+	inter8x8Luma[10] = ui.inter8x8Luma11SpinBox->value();
+	inter8x8Luma[11] = ui.inter8x8Luma12SpinBox->value();
+	inter8x8Luma[12] = ui.inter8x8Luma13SpinBox->value();
+	inter8x8Luma[13] = ui.inter8x8Luma14SpinBox->value();
+	inter8x8Luma[14] = ui.inter8x8Luma15SpinBox->value();
+	inter8x8Luma[15] = ui.inter8x8Luma16SpinBox->value();
+	inter8x8Luma[16] = ui.inter8x8Luma17SpinBox->value();
+	inter8x8Luma[17] = ui.inter8x8Luma18SpinBox->value();
+	inter8x8Luma[18] = ui.inter8x8Luma19SpinBox->value();
+	inter8x8Luma[19] = ui.inter8x8Luma20SpinBox->value();
+	inter8x8Luma[20] = ui.inter8x8Luma21SpinBox->value();
+	inter8x8Luma[21] = ui.inter8x8Luma22SpinBox->value();
+	inter8x8Luma[22] = ui.inter8x8Luma23SpinBox->value();
+	inter8x8Luma[23] = ui.inter8x8Luma24SpinBox->value();
+	inter8x8Luma[24] = ui.inter8x8Luma25SpinBox->value();
+	inter8x8Luma[25] = ui.inter8x8Luma26SpinBox->value();
+	inter8x8Luma[26] = ui.inter8x8Luma27SpinBox->value();
+	inter8x8Luma[27] = ui.inter8x8Luma28SpinBox->value();
+	inter8x8Luma[28] = ui.inter8x8Luma29SpinBox->value();
+	inter8x8Luma[29] = ui.inter8x8Luma30SpinBox->value();
+	inter8x8Luma[30] = ui.inter8x8Luma31SpinBox->value();
+	inter8x8Luma[31] = ui.inter8x8Luma32SpinBox->value();
+	inter8x8Luma[32] = ui.inter8x8Luma33SpinBox->value();
+	inter8x8Luma[33] = ui.inter8x8Luma34SpinBox->value();
+	inter8x8Luma[34] = ui.inter8x8Luma35SpinBox->value();
+	inter8x8Luma[35] = ui.inter8x8Luma36SpinBox->value();
+	inter8x8Luma[36] = ui.inter8x8Luma37SpinBox->value();
+	inter8x8Luma[37] = ui.inter8x8Luma38SpinBox->value();
+	inter8x8Luma[38] = ui.inter8x8Luma39SpinBox->value();
+	inter8x8Luma[39] = ui.inter8x8Luma40SpinBox->value();
+	inter8x8Luma[40] = ui.inter8x8Luma41SpinBox->value();
+	inter8x8Luma[41] = ui.inter8x8Luma42SpinBox->value();
+	inter8x8Luma[42] = ui.inter8x8Luma43SpinBox->value();
+	inter8x8Luma[43] = ui.inter8x8Luma44SpinBox->value();
+	inter8x8Luma[44] = ui.inter8x8Luma45SpinBox->value();
+	inter8x8Luma[45] = ui.inter8x8Luma46SpinBox->value();
+	inter8x8Luma[46] = ui.inter8x8Luma47SpinBox->value();
+	inter8x8Luma[47] = ui.inter8x8Luma48SpinBox->value();
+	inter8x8Luma[48] = ui.inter8x8Luma49SpinBox->value();
+	inter8x8Luma[49] = ui.inter8x8Luma50SpinBox->value();
+	inter8x8Luma[50] = ui.inter8x8Luma51SpinBox->value();
+	inter8x8Luma[51] = ui.inter8x8Luma52SpinBox->value();
+	inter8x8Luma[52] = ui.inter8x8Luma53SpinBox->value();
+	inter8x8Luma[53] = ui.inter8x8Luma54SpinBox->value();
+	inter8x8Luma[54] = ui.inter8x8Luma55SpinBox->value();
+	inter8x8Luma[55] = ui.inter8x8Luma56SpinBox->value();
+	inter8x8Luma[56] = ui.inter8x8Luma57SpinBox->value();
+	inter8x8Luma[57] = ui.inter8x8Luma58SpinBox->value();
+	inter8x8Luma[58] = ui.inter8x8Luma59SpinBox->value();
+	inter8x8Luma[59] = ui.inter8x8Luma60SpinBox->value();
+	inter8x8Luma[60] = ui.inter8x8Luma61SpinBox->value();
+	inter8x8Luma[61] = ui.inter8x8Luma62SpinBox->value();
+	inter8x8Luma[62] = ui.inter8x8Luma63SpinBox->value();
+	inter8x8Luma[63] = ui.inter8x8Luma64SpinBox->value();
+}
+
+void x264CustomMatrixDialog::setIntra4x4Luma(const uint8_t intra4x4Luma[])
+{
+	ui.intra4x4Luma1SpinBox->setValue(intra4x4Luma[0]);
+	ui.intra4x4Luma2SpinBox->setValue(intra4x4Luma[1]);
+	ui.intra4x4Luma3SpinBox->setValue(intra4x4Luma[2]);
+	ui.intra4x4Luma4SpinBox->setValue(intra4x4Luma[3]);
+	ui.intra4x4Luma5SpinBox->setValue(intra4x4Luma[4]);
+	ui.intra4x4Luma6SpinBox->setValue(intra4x4Luma[5]);
+	ui.intra4x4Luma7SpinBox->setValue(intra4x4Luma[6]);
+	ui.intra4x4Luma8SpinBox->setValue(intra4x4Luma[7]);
+	ui.intra4x4Luma9SpinBox->setValue(intra4x4Luma[8]);
+	ui.intra4x4Luma10SpinBox->setValue(intra4x4Luma[9]);
+	ui.intra4x4Luma11SpinBox->setValue(intra4x4Luma[10]);
+	ui.intra4x4Luma12SpinBox->setValue(intra4x4Luma[11]);
+	ui.intra4x4Luma13SpinBox->setValue(intra4x4Luma[12]);
+	ui.intra4x4Luma14SpinBox->setValue(intra4x4Luma[13]);
+	ui.intra4x4Luma15SpinBox->setValue(intra4x4Luma[14]);
+	ui.intra4x4Luma16SpinBox->setValue(intra4x4Luma[15]);
+}
+
+void x264CustomMatrixDialog::setIntraChroma(const uint8_t intraChroma[])
+{
+	ui.intraChroma1SpinBox->setValue(intraChroma[0]);
+	ui.intraChroma2SpinBox->setValue(intraChroma[1]);
+	ui.intraChroma3SpinBox->setValue(intraChroma[2]);
+	ui.intraChroma4SpinBox->setValue(intraChroma[3]);
+	ui.intraChroma5SpinBox->setValue(intraChroma[4]);
+	ui.intraChroma6SpinBox->setValue(intraChroma[5]);
+	ui.intraChroma7SpinBox->setValue(intraChroma[6]);
+	ui.intraChroma8SpinBox->setValue(intraChroma[7]);
+	ui.intraChroma9SpinBox->setValue(intraChroma[8]);
+	ui.intraChroma10SpinBox->setValue(intraChroma[9]);
+	ui.intraChroma11SpinBox->setValue(intraChroma[10]);
+	ui.intraChroma12SpinBox->setValue(intraChroma[11]);
+	ui.intraChroma13SpinBox->setValue(intraChroma[12]);
+	ui.intraChroma14SpinBox->setValue(intraChroma[13]);
+	ui.intraChroma15SpinBox->setValue(intraChroma[14]);
+	ui.intraChroma16SpinBox->setValue(intraChroma[15]);
+}
+
+void x264CustomMatrixDialog::setInter4x4Luma(const uint8_t inter4x4Luma[])
+{
+	ui.inter4x4Luma1SpinBox->setValue(inter4x4Luma[0]);
+	ui.inter4x4Luma2SpinBox->setValue(inter4x4Luma[1]);
+	ui.inter4x4Luma3SpinBox->setValue(inter4x4Luma[2]);
+	ui.inter4x4Luma4SpinBox->setValue(inter4x4Luma[3]);
+	ui.inter4x4Luma5SpinBox->setValue(inter4x4Luma[4]);
+	ui.inter4x4Luma6SpinBox->setValue(inter4x4Luma[5]);
+	ui.inter4x4Luma7SpinBox->setValue(inter4x4Luma[6]);
+	ui.inter4x4Luma8SpinBox->setValue(inter4x4Luma[7]);
+	ui.inter4x4Luma9SpinBox->setValue(inter4x4Luma[8]);
+	ui.inter4x4Luma10SpinBox->setValue(inter4x4Luma[9]);
+	ui.inter4x4Luma11SpinBox->setValue(inter4x4Luma[10]);
+	ui.inter4x4Luma12SpinBox->setValue(inter4x4Luma[11]);
+	ui.inter4x4Luma13SpinBox->setValue(inter4x4Luma[12]);
+	ui.inter4x4Luma14SpinBox->setValue(inter4x4Luma[13]);
+	ui.inter4x4Luma15SpinBox->setValue(inter4x4Luma[14]);
+	ui.inter4x4Luma16SpinBox->setValue(inter4x4Luma[15]);
+}
+
+void x264CustomMatrixDialog::setInterChroma(const uint8_t interChroma[])
+{
+	ui.interChroma1SpinBox->setValue(interChroma[0]);
+	ui.interChroma2SpinBox->setValue(interChroma[1]);
+	ui.interChroma3SpinBox->setValue(interChroma[2]);
+	ui.interChroma4SpinBox->setValue(interChroma[3]);
+	ui.interChroma5SpinBox->setValue(interChroma[4]);
+	ui.interChroma6SpinBox->setValue(interChroma[5]);
+	ui.interChroma7SpinBox->setValue(interChroma[6]);
+	ui.interChroma8SpinBox->setValue(interChroma[7]);
+	ui.interChroma9SpinBox->setValue(interChroma[8]);
+	ui.interChroma10SpinBox->setValue(interChroma[9]);
+	ui.interChroma11SpinBox->setValue(interChroma[10]);
+	ui.interChroma12SpinBox->setValue(interChroma[11]);
+	ui.interChroma13SpinBox->setValue(interChroma[12]);
+	ui.interChroma14SpinBox->setValue(interChroma[13]);
+	ui.interChroma15SpinBox->setValue(interChroma[14]);
+	ui.interChroma16SpinBox->setValue(interChroma[15]);
+}
+
+void x264CustomMatrixDialog::setIntra8x8Luma(const uint8_t intra8x8Luma[])
+{
+	ui.intra8x8Luma1SpinBox->setValue(intra8x8Luma[0]);
+	ui.intra8x8Luma2SpinBox->setValue(intra8x8Luma[1]);
+	ui.intra8x8Luma3SpinBox->setValue(intra8x8Luma[2]);
+	ui.intra8x8Luma4SpinBox->setValue(intra8x8Luma[3]);
+	ui.intra8x8Luma5SpinBox->setValue(intra8x8Luma[4]);
+	ui.intra8x8Luma6SpinBox->setValue(intra8x8Luma[5]);
+	ui.intra8x8Luma7SpinBox->setValue(intra8x8Luma[6]);
+	ui.intra8x8Luma8SpinBox->setValue(intra8x8Luma[7]);
+	ui.intra8x8Luma9SpinBox->setValue(intra8x8Luma[8]);
+	ui.intra8x8Luma10SpinBox->setValue(intra8x8Luma[9]);
+	ui.intra8x8Luma11SpinBox->setValue(intra8x8Luma[10]);
+	ui.intra8x8Luma12SpinBox->setValue(intra8x8Luma[11]);
+	ui.intra8x8Luma13SpinBox->setValue(intra8x8Luma[12]);
+	ui.intra8x8Luma14SpinBox->setValue(intra8x8Luma[13]);
+	ui.intra8x8Luma15SpinBox->setValue(intra8x8Luma[14]);
+	ui.intra8x8Luma16SpinBox->setValue(intra8x8Luma[15]);
+	ui.intra8x8Luma17SpinBox->setValue(intra8x8Luma[16]);
+	ui.intra8x8Luma18SpinBox->setValue(intra8x8Luma[17]);
+	ui.intra8x8Luma19SpinBox->setValue(intra8x8Luma[18]);
+	ui.intra8x8Luma20SpinBox->setValue(intra8x8Luma[19]);
+	ui.intra8x8Luma21SpinBox->setValue(intra8x8Luma[20]);
+	ui.intra8x8Luma22SpinBox->setValue(intra8x8Luma[21]);
+	ui.intra8x8Luma23SpinBox->setValue(intra8x8Luma[22]);
+	ui.intra8x8Luma24SpinBox->setValue(intra8x8Luma[23]);
+	ui.intra8x8Luma25SpinBox->setValue(intra8x8Luma[24]);
+	ui.intra8x8Luma26SpinBox->setValue(intra8x8Luma[25]);
+	ui.intra8x8Luma27SpinBox->setValue(intra8x8Luma[26]);
+	ui.intra8x8Luma28SpinBox->setValue(intra8x8Luma[27]);
+	ui.intra8x8Luma29SpinBox->setValue(intra8x8Luma[28]);
+	ui.intra8x8Luma30SpinBox->setValue(intra8x8Luma[29]);
+	ui.intra8x8Luma31SpinBox->setValue(intra8x8Luma[30]);
+	ui.intra8x8Luma32SpinBox->setValue(intra8x8Luma[31]);
+	ui.intra8x8Luma33SpinBox->setValue(intra8x8Luma[32]);
+	ui.intra8x8Luma34SpinBox->setValue(intra8x8Luma[33]);
+	ui.intra8x8Luma35SpinBox->setValue(intra8x8Luma[34]);
+	ui.intra8x8Luma36SpinBox->setValue(intra8x8Luma[35]);
+	ui.intra8x8Luma37SpinBox->setValue(intra8x8Luma[36]);
+	ui.intra8x8Luma38SpinBox->setValue(intra8x8Luma[37]);
+	ui.intra8x8Luma39SpinBox->setValue(intra8x8Luma[38]);
+	ui.intra8x8Luma40SpinBox->setValue(intra8x8Luma[39]);
+	ui.intra8x8Luma41SpinBox->setValue(intra8x8Luma[40]);
+	ui.intra8x8Luma42SpinBox->setValue(intra8x8Luma[41]);
+	ui.intra8x8Luma43SpinBox->setValue(intra8x8Luma[42]);
+	ui.intra8x8Luma44SpinBox->setValue(intra8x8Luma[43]);
+	ui.intra8x8Luma45SpinBox->setValue(intra8x8Luma[44]);
+	ui.intra8x8Luma46SpinBox->setValue(intra8x8Luma[45]);
+	ui.intra8x8Luma47SpinBox->setValue(intra8x8Luma[46]);
+	ui.intra8x8Luma48SpinBox->setValue(intra8x8Luma[47]);
+	ui.intra8x8Luma49SpinBox->setValue(intra8x8Luma[48]);
+	ui.intra8x8Luma50SpinBox->setValue(intra8x8Luma[49]);
+	ui.intra8x8Luma51SpinBox->setValue(intra8x8Luma[50]);
+	ui.intra8x8Luma52SpinBox->setValue(intra8x8Luma[51]);
+	ui.intra8x8Luma53SpinBox->setValue(intra8x8Luma[52]);
+	ui.intra8x8Luma54SpinBox->setValue(intra8x8Luma[53]);
+	ui.intra8x8Luma55SpinBox->setValue(intra8x8Luma[54]);
+	ui.intra8x8Luma56SpinBox->setValue(intra8x8Luma[55]);
+	ui.intra8x8Luma57SpinBox->setValue(intra8x8Luma[56]);
+	ui.intra8x8Luma58SpinBox->setValue(intra8x8Luma[57]);
+	ui.intra8x8Luma59SpinBox->setValue(intra8x8Luma[58]);
+	ui.intra8x8Luma60SpinBox->setValue(intra8x8Luma[59]);
+	ui.intra8x8Luma61SpinBox->setValue(intra8x8Luma[60]);
+	ui.intra8x8Luma62SpinBox->setValue(intra8x8Luma[61]);
+	ui.intra8x8Luma63SpinBox->setValue(intra8x8Luma[62]);
+	ui.intra8x8Luma64SpinBox->setValue(intra8x8Luma[63]);
+}
+
+void x264CustomMatrixDialog::setInter8x8Luma(const uint8_t inter8x8Luma[])
+{
+	ui.inter8x8Luma1SpinBox->setValue(inter8x8Luma[0]);
+	ui.inter8x8Luma2SpinBox->setValue(inter8x8Luma[1]);
+	ui.inter8x8Luma3SpinBox->setValue(inter8x8Luma[2]);
+	ui.inter8x8Luma4SpinBox->setValue(inter8x8Luma[3]);
+	ui.inter8x8Luma5SpinBox->setValue(inter8x8Luma[4]);
+	ui.inter8x8Luma6SpinBox->setValue(inter8x8Luma[5]);
+	ui.inter8x8Luma7SpinBox->setValue(inter8x8Luma[6]);
+	ui.inter8x8Luma8SpinBox->setValue(inter8x8Luma[7]);
+	ui.inter8x8Luma9SpinBox->setValue(inter8x8Luma[8]);
+	ui.inter8x8Luma10SpinBox->setValue(inter8x8Luma[9]);
+	ui.inter8x8Luma11SpinBox->setValue(inter8x8Luma[10]);
+	ui.inter8x8Luma12SpinBox->setValue(inter8x8Luma[11]);
+	ui.inter8x8Luma13SpinBox->setValue(inter8x8Luma[12]);
+	ui.inter8x8Luma14SpinBox->setValue(inter8x8Luma[13]);
+	ui.inter8x8Luma15SpinBox->setValue(inter8x8Luma[14]);
+	ui.inter8x8Luma16SpinBox->setValue(inter8x8Luma[15]);
+	ui.inter8x8Luma17SpinBox->setValue(inter8x8Luma[16]);
+	ui.inter8x8Luma18SpinBox->setValue(inter8x8Luma[17]);
+	ui.inter8x8Luma19SpinBox->setValue(inter8x8Luma[18]);
+	ui.inter8x8Luma20SpinBox->setValue(inter8x8Luma[19]);
+	ui.inter8x8Luma21SpinBox->setValue(inter8x8Luma[20]);
+	ui.inter8x8Luma22SpinBox->setValue(inter8x8Luma[21]);
+	ui.inter8x8Luma23SpinBox->setValue(inter8x8Luma[22]);
+	ui.inter8x8Luma24SpinBox->setValue(inter8x8Luma[23]);
+	ui.inter8x8Luma25SpinBox->setValue(inter8x8Luma[24]);
+	ui.inter8x8Luma26SpinBox->setValue(inter8x8Luma[25]);
+	ui.inter8x8Luma27SpinBox->setValue(inter8x8Luma[26]);
+	ui.inter8x8Luma28SpinBox->setValue(inter8x8Luma[27]);
+	ui.inter8x8Luma29SpinBox->setValue(inter8x8Luma[28]);
+	ui.inter8x8Luma30SpinBox->setValue(inter8x8Luma[29]);
+	ui.inter8x8Luma31SpinBox->setValue(inter8x8Luma[30]);
+	ui.inter8x8Luma32SpinBox->setValue(inter8x8Luma[31]);
+	ui.inter8x8Luma33SpinBox->setValue(inter8x8Luma[32]);
+	ui.inter8x8Luma34SpinBox->setValue(inter8x8Luma[33]);
+	ui.inter8x8Luma35SpinBox->setValue(inter8x8Luma[34]);
+	ui.inter8x8Luma36SpinBox->setValue(inter8x8Luma[35]);
+	ui.inter8x8Luma37SpinBox->setValue(inter8x8Luma[36]);
+	ui.inter8x8Luma38SpinBox->setValue(inter8x8Luma[37]);
+	ui.inter8x8Luma39SpinBox->setValue(inter8x8Luma[38]);
+	ui.inter8x8Luma40SpinBox->setValue(inter8x8Luma[39]);
+	ui.inter8x8Luma41SpinBox->setValue(inter8x8Luma[40]);
+	ui.inter8x8Luma42SpinBox->setValue(inter8x8Luma[41]);
+	ui.inter8x8Luma43SpinBox->setValue(inter8x8Luma[42]);
+	ui.inter8x8Luma44SpinBox->setValue(inter8x8Luma[43]);
+	ui.inter8x8Luma45SpinBox->setValue(inter8x8Luma[44]);
+	ui.inter8x8Luma46SpinBox->setValue(inter8x8Luma[45]);
+	ui.inter8x8Luma47SpinBox->setValue(inter8x8Luma[46]);
+	ui.inter8x8Luma48SpinBox->setValue(inter8x8Luma[47]);
+	ui.inter8x8Luma49SpinBox->setValue(inter8x8Luma[48]);
+	ui.inter8x8Luma50SpinBox->setValue(inter8x8Luma[49]);
+	ui.inter8x8Luma51SpinBox->setValue(inter8x8Luma[50]);
+	ui.inter8x8Luma52SpinBox->setValue(inter8x8Luma[51]);
+	ui.inter8x8Luma53SpinBox->setValue(inter8x8Luma[52]);
+	ui.inter8x8Luma54SpinBox->setValue(inter8x8Luma[53]);
+	ui.inter8x8Luma55SpinBox->setValue(inter8x8Luma[54]);
+	ui.inter8x8Luma56SpinBox->setValue(inter8x8Luma[55]);
+	ui.inter8x8Luma57SpinBox->setValue(inter8x8Luma[56]);
+	ui.inter8x8Luma58SpinBox->setValue(inter8x8Luma[57]);
+	ui.inter8x8Luma59SpinBox->setValue(inter8x8Luma[58]);
+	ui.inter8x8Luma60SpinBox->setValue(inter8x8Luma[59]);
+	ui.inter8x8Luma61SpinBox->setValue(inter8x8Luma[60]);
+	ui.inter8x8Luma62SpinBox->setValue(inter8x8Luma[61]);
+	ui.inter8x8Luma63SpinBox->setValue(inter8x8Luma[62]);
+	ui.inter8x8Luma64SpinBox->setValue(inter8x8Luma[63]);
+}
\ No newline at end of file

Added: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_x264_matrix.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_x264_matrix.h	2008-04-02 23:54:12 UTC (rev 3964)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_x264_matrix.h	2008-04-03 00:17:06 UTC (rev 3965)
@@ -0,0 +1,25 @@
+#include "ui_x264_matrix.h"
+
+class x264CustomMatrixDialog : public QDialog
+{
+	Q_OBJECT
+
+private:
+	Ui_x264CustomMatrixDialog ui;
+
+	void setIntra4x4Luma(const uint8_t intra4x4Luma[]);
+	void setIntraChroma(const uint8_t intraChroma[]);
+	void setInterLuma(const uint8_t interLuma[]);
+	void setInterChroma(const uint8_t interChroma[]);
+	void setIntra8x8Luma(const uint8_t intra8x8Luma[]);
+	void setInter8x8Luma(const uint8_t inter8x8Luma[]);
+
+public:
+	x264CustomMatrixDialog(const uint8_t* intra4x4Luma, const uint8_t* intraChroma, const uint8_t* inter4x4Luma, 
+		const uint8_t* interChroma, const uint8_t* intra8x8Luma, const uint8_t* inter8x8Luma);
+	void getMatrix(uint8_t* intra4x4Luma, uint8_t* intra4x4Chroma, uint8_t* inter4x4Luma, 
+		uint8_t* inter4x4Chroma, uint8_t* intra8x8Luma, uint8_t* inter8x8Luma);
+
+private slots:
+	void loadFileButton_pressed();
+};
\ No newline at end of file

Added: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_x264_zones.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_x264_zones.cpp	2008-04-02 23:54:12 UTC (rev 3964)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_x264_zones.cpp	2008-04-03 00:17:06 UTC (rev 3965)
@@ -0,0 +1,40 @@
+/***************************************************************************
+                     Q_x264_zones.cpp  -  description
+                     --------------------------------
+
+                      GUI for configuring x264 zones
+
+    begin                : Wed Apr 02 2008
+    copyright            : (C) 2008 by gruntster
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#include "config.h"
+#include "ui_x264_zones.h"
+
+class x264ZonesDialog : public QDialog
+{
+	Q_OBJECT
+
+private:
+	Ui_x264ZonesDialog ui;
+
+public:
+	x264ZonesDialog();
+
+private slots:
+
+};
+
+x264ZonesDialog::x264ZonesDialog()
+{
+	ui.setupUi(this);
+}

Added: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_x264_zones.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_x264_zones.h	2008-04-02 23:54:12 UTC (rev 3964)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_x264_zones.h	2008-04-03 00:17:06 UTC (rev 3965)
@@ -0,0 +1,15 @@
+#include "ui_x264_zones.h"
+
+class x264ZonesDialog : public QDialog
+{
+	Q_OBJECT
+
+private:
+	Ui_x264ZonesDialog ui;
+
+public:
+	x264ZonesDialog();
+
+private slots:
+
+};
\ No newline at end of file

Added: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/x264.ui
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/x264.ui	2008-04-02 23:54:12 UTC (rev 3964)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/x264.ui	2008-04-03 00:17:06 UTC (rev 3965)
@@ -0,0 +1,4302 @@
+<ui version="4.0" >
+ <author>(C) 2008 by gruntster</author>
+ <comment></comment>
+ <exportmacro></exportmacro>
+ <class>x264ConfigDialog</class>
+ <widget class="QDialog" name="x264ConfigDialog" >
+  <property name="geometry" >
+   <rect>
+    <x>0</x>
+    <y>0</y>
+    <width>478</width>
+    <height>580</height>
+   </rect>
+  </property>
+  <property name="windowTitle" >
+   <string>x264 Configuraton</string>
+  </property>
+  <layout class="QVBoxLayout" >
+   <property name="margin" >
+    <number>9</number>
+   </property>
+   <property name="spacing" >
+    <number>6</number>
+   </property>
+   <item>
+    <widget class="QTabWidget" name="tabWidget" >
+     <property name="currentIndex" >
+      <number>0</number>
+     </property>
+     <widget class="QWidget" name="tab" >
+      <attribute name="title" >
+       <string>General</string>
+      </attribute>
+      <layout class="QVBoxLayout" >
+       <property name="margin" >
+        <number>9</number>
+       </property>
+       <property name="spacing" >
+        <number>6</number>
+       </property>
+       <item>
+        <widget class="QGroupBox" name="groupBox_2" >
+         <property name="title" >
+          <string>Rate Control</string>
+         </property>
+         <layout class="QVBoxLayout" >
+          <property name="margin" >
+           <number>9</number>
+          </property>
+          <property name="spacing" >
+           <number>6</number>
+          </property>
+          <item>
+           <layout class="QGridLayout" >
+            <property name="margin" >
+             <number>0</number>
+            </property>
+            <property name="spacing" >
+             <number>6</number>
+            </property>
+            <item row="1" column="0" >
+             <widget class="QLabel" name="targetRateControlLabel1" >
+              <property name="font" >
+               <font>
+                <family>MS Shell Dlg 2</family>
+                <pointsize>8</pointsize>
+                <weight>50</weight>
+                <italic>false</italic>
+                <bold>false</bold>
+                <underline>false</underline>
+                <strikeout>false</strikeout>
+               </font>
+              </property>
+              <property name="text" >
+               <string>Target Video Size:</string>
+              </property>
+             </widget>
+            </item>
+            <item row="0" column="1" >
+             <layout class="QHBoxLayout" >
+              <property name="margin" >
+               <number>0</number>
+              </property>
+              <property name="spacing" >
+               <number>6</number>
+              </property>
+              <item>
+               <widget class="QComboBox" name="encodingModeComboBox" >
+                <property name="font" >
+                 <font>
+                  <family>MS Shell Dlg 2</family>
+                  <pointsize>8</pointsize>
+                  <weight>50</weight>
+                  <italic>false</italic>
+                  <bold>false</bold>
+                  <underline>false</underline>
+                  <strikeout>false</strikeout>
+                 </font>
+                </property>
+                <property name="currentIndex" >
+                 <number>3</number>
+                </property>
+                <item>
+                 <property name="text" >
+                  <string>Constant Bitrate (Single Pass)</string>
+                 </property>
+                </item>
+                <item>
+                 <property name="text" >
+                  <string>Constant Quality (Single Pass)</string>
+                 </property>
+                </item>
+                <item>
+                 <property name="text" >
+                  <string>Average Quantizer (Single Pass)</string>
+                 </property>
+                </item>
+                <item>
+                 <property name="text" >
+                  <string>Video Size (Two Pass)</string>
+                 </property>
+                </item>
+                <item>
+                 <property name="text" >
+                  <string>Average Bitrate (Two Pass)</string>
+                 </property>
+                </item>
+               </widget>
+              </item>
+              <item>
+               <spacer>
+                <property name="orientation" >
+                 <enum>Qt::Horizontal</enum>
+                </property>
+                <property name="sizeHint" >
+                 <size>
+                  <width>40</width>
+                  <height>20</height>
+                 </size>
+                </property>
+               </spacer>
+              </item>
+             </layout>
+            </item>
+            <item row="0" column="0" >
+             <widget class="QLabel" name="label" >
+              <property name="font" >
+               <font>
+                <family>MS Shell Dlg 2</family>
+                <pointsize>8</pointsize>
+                <weight>50</weight>
+                <italic>false</italic>
+                <bold>false</bold>
+                <underline>false</underline>
+                <strikeout>false</strikeout>
+               </font>
+              </property>
+              <property name="text" >
+               <string>Encoding Mode:</string>
+              </property>
+             </widget>
+            </item>
+            <item row="1" column="1" >
+             <layout class="QHBoxLayout" >
+              <property name="margin" >
+               <number>0</number>
+              </property>
+              <property name="spacing" >
+               <number>6</number>
+              </property>
+              <item>
+               <widget class="QSpinBox" name="targetRateControlSpinBox" >
+                <property name="font" >
+                 <font>
+                  <family>MS Shell Dlg 2</family>
+                  <pointsize>8</pointsize>
+                  <weight>50</weight>
+                  <italic>false</italic>
+                  <bold>false</bold>
+                  <underline>false</underline>
+                  <strikeout>false</strikeout>
+                 </font>
+                </property>
+                <property name="prefix" >
+                 <string/>
+                </property>
+                <property name="maximum" >
+                 <number>999999999</number>
+                </property>
+                <property name="value" >
+                 <number>700</number>
+                </property>
+               </widget>
+              </item>
+              <item>
+               <widget class="QLabel" name="targetRateControlLabel2" >
+                <property name="font" >
+                 <font>
+                  <family>MS Shell Dlg 2</family>
+                  <pointsize>8</pointsize>
+                  <weight>50</weight>
+                  <italic>false</italic>
+                  <bold>false</bold>
+                  <underline>false</underline>
+                  <strikeout>false</strikeout>
+                 </font>
+                </property>
+                <property name="text" >
+                 <string>MB</string>
+                </property>
+               </widget>
+              </item>
+              <item>
+               <spacer>
+                <property name="orientation" >
+                 <enum>Qt::Horizontal</enum>
+                </property>
+                <property name="sizeHint" >
+                 <size>
+                  <width>183</width>
+                  <height>20</height>
+                 </size>
+                </property>
+               </spacer>
+              </item>
+             </layout>
+            </item>
+           </layout>
+          </item>
+          <item>
+           <spacer>
+            <property name="orientation" >
+             <enum>Qt::Vertical</enum>
+            </property>
+            <property name="sizeType" >
+             <enum>QSizePolicy::Fixed</enum>
+            </property>
+            <property name="sizeHint" >
+             <size>
+              <width>20</width>
+              <height>4</height>
+             </size>
+            </property>
+           </spacer>
+          </item>
+          <item>
+           <layout class="QHBoxLayout" >
+            <property name="margin" >
+             <number>0</number>
+            </property>
+            <property name="spacing" >
+             <number>12</number>
+            </property>
+            <item>
+             <layout class="QVBoxLayout" >
+              <property name="margin" >
+               <number>0</number>
+              </property>
+              <property name="spacing" >
+               <number>0</number>
+              </property>
+              <item>
+               <layout class="QHBoxLayout" >
+                <property name="margin" >
+                 <number>0</number>
+                </property>
+                <property name="spacing" >
+                 <number>0</number>
+                </property>
+                <item>
+                 <widget class="QLabel" name="quantiserLabel1" >
+                  <property name="enabled" >
+                   <bool>false</bool>
+                  </property>
+                  <property name="text" >
+                   <string>0 (High Quality)</string>
+                  </property>
+                 </widget>
+                </item>
+                <item>
+                 <spacer>
+                  <property name="orientation" >
+                   <enum>Qt::Horizontal</enum>
+                  </property>
+                  <property name="sizeHint" >
+                   <size>
+                    <width>40</width>
+                    <height>20</height>
+                   </size>
+                  </property>
+                 </spacer>
+                </item>
+                <item>
+                 <widget class="QLabel" name="quantiserLabel2" >
+                  <property name="enabled" >
+                   <bool>false</bool>
+                  </property>
+                  <property name="text" >
+                   <string>Quantiser</string>
+                  </property>
+                 </widget>
+                </item>
+                <item>
+                 <spacer>
+                  <property name="orientation" >
+                   <enum>Qt::Horizontal</enum>
+                  </property>
+                  <property name="sizeHint" >
+                   <size>
+                    <width>40</width>
+                    <height>20</height>
+                   </size>
+                  </property>
+                 </spacer>
+                </item>
+                <item>
+                 <widget class="QLabel" name="quantiserLabel3" >
+                  <property name="enabled" >
+                   <bool>false</bool>
+                  </property>
+                  <property name="text" >
+                   <string>51 (Low Quality)</string>
+                  </property>
+                 </widget>
+                </item>
+               </layout>
+              </item>
+              <item>
+               <widget class="QSlider" name="quantiserSlider" >
+                <property name="enabled" >
+                 <bool>false</bool>
+                </property>
+                <property name="maximum" >
+                 <number>51</number>
+                </property>
+                <property name="pageStep" >
+                 <number>5</number>
+                </property>
+                <property name="value" >
+                 <number>26</number>
+                </property>
+                <property name="orientation" >
+                 <enum>Qt::Horizontal</enum>
+                </property>
+                <property name="tickPosition" >
+                 <enum>QSlider::TicksBelow</enum>
+                </property>
+               </widget>
+              </item>
+             </layout>
+            </item>
+            <item>
+             <widget class="QSpinBox" name="quantiserSpinBox" >
+              <property name="enabled" >
+               <bool>false</bool>
+              </property>
+              <property name="maximum" >
+               <number>51</number>
+              </property>
+              <property name="value" >
+               <number>26</number>
+              </property>
+             </widget>
+            </item>
+           </layout>
+          </item>
+         </layout>
+        </widget>
+       </item>
+       <item>
+        <widget class="QGroupBox" name="groupBox_15" >
+         <property name="title" >
+          <string>Pixel Aspect Ratio</string>
+         </property>
+         <layout class="QVBoxLayout" >
+          <property name="margin" >
+           <number>9</number>
+          </property>
+          <property name="spacing" >
+           <number>6</number>
+          </property>
+          <item>
+           <layout class="QGridLayout" >
+            <property name="margin" >
+             <number>0</number>
+            </property>
+            <property name="spacing" >
+             <number>6</number>
+            </property>
+            <item row="0" column="0" >
+             <widget class="QRadioButton" name="sarCustomRadioButton" >
+              <property name="text" >
+               <string>Custom</string>
+              </property>
+              <property name="checked" >
+               <bool>true</bool>
+              </property>
+             </widget>
+            </item>
+            <item row="2" column="0" >
+             <widget class="QRadioButton" name="sarAsInputRadioButton" >
+              <property name="text" >
+               <string>As Input</string>
+              </property>
+             </widget>
+            </item>
+            <item row="2" column="1" >
+             <layout class="QHBoxLayout" >
+              <property name="margin" >
+               <number>0</number>
+              </property>
+              <property name="spacing" >
+               <number>6</number>
+              </property>
+              <item>
+               <widget class="QLabel" name="sarAsInputLabel" >
+                <property name="enabled" >
+                 <bool>false</bool>
+                </property>
+                <property name="text" >
+                 <string/>
+                </property>
+               </widget>
+              </item>
+              <item>
+               <spacer>
+                <property name="orientation" >
+                 <enum>Qt::Horizontal</enum>
+                </property>
+                <property name="sizeHint" >
+                 <size>
+                  <width>40</width>
+                  <height>20</height>
+                 </size>
+                </property>
+               </spacer>
+              </item>
+             </layout>
+            </item>
+            <item row="0" column="1" >
+             <layout class="QHBoxLayout" >
+              <property name="margin" >
+               <number>0</number>
+              </property>
+              <property name="spacing" >
+               <number>6</number>
+              </property>
+              <item>
+               <widget class="QSpinBox" name="sarCustomSpinBox1" >
+                <property name="maximum" >
+                 <number>9999</number>
+                </property>
+                <property name="minimum" >
+                 <number>1</number>
+                </property>
+                <property name="value" >
+                 <number>1</number>
+                </property>
+               </widget>
+              </item>
+              <item>
+               <widget class="QLabel" name="sarCustomLabel" >
+                <property name="text" >
+                 <string>:</string>
+                </property>
+               </widget>
+              </item>
+              <item>
+               <widget class="QSpinBox" name="sarCustomSpinBox2" >
+                <property name="maximum" >
+                 <number>9999</number>
+                </property>
+                <property name="minimum" >
+                 <number>1</number>
+                </property>
+                <property name="value" >
+                 <number>1</number>
+                </property>
+               </widget>
+              </item>
+              <item>
+               <spacer>
+                <property name="orientation" >
+                 <enum>Qt::Horizontal</enum>
+                </property>
+                <property name="sizeHint" >
+                 <size>
+                  <width>40</width>
+                  <height>20</height>
+                 </size>
+                </property>
+               </spacer>
+              </item>
+             </layout>
+            </item>
+            <item row="1" column="0" >
+             <widget class="QRadioButton" name="sarPredefinedRadioButton" >
+              <property name="text" >
+               <string>Predefined Aspect Ratio</string>
+              </property>
+             </widget>
+            </item>
+            <item row="1" column="1" >
+             <layout class="QHBoxLayout" >
+              <property name="margin" >
+               <number>0</number>
+              </property>
+              <property name="spacing" >
+               <number>6</number>
+              </property>
+              <item>
+               <widget class="QComboBox" name="sarPredefinedComboBox" >
+                <property name="enabled" >
+                 <bool>false</bool>
+                </property>
+                <item>
+                 <property name="text" >
+                  <string>16:15 (PAL 4:3)</string>
+                 </property>
+                </item>
+                <item>
+                 <property name="text" >
+                  <string>64:45 (PAL 16:9)</string>
+                 </property>
+                </item>
+                <item>
+                 <property name="text" >
+                  <string>8:9 (NTSC 4:3)</string>
+                 </property>
+                </item>
+                <item>
+                 <property name="text" >
+                  <string>32:27 (NTSC 16:9)</string>
+                 </property>
+                </item>
+               </widget>
+              </item>
+              <item>
+               <spacer>
+                <property name="orientation" >
+                 <enum>Qt::Horizontal</enum>
+                </property>
+                <property name="sizeHint" >
+                 <size>
+                  <width>40</width>
+                  <height>20</height>
+                 </size>
+                </property>
+               </spacer>
+              </item>
+             </layout>
+            </item>
+           </layout>
+          </item>
+         </layout>
+        </widget>
+       </item>
+       <item>
+        <spacer>
+         <property name="orientation" >
+          <enum>Qt::Vertical</enum>
+         </property>
+         <property name="sizeHint" >
+          <size>
+           <width>436</width>
+           <height>111</height>
+          </size>
+         </property>
+        </spacer>
+       </item>
+      </layout>
+     </widget>
+     <widget class="QWidget" name="tab_6" >
+      <attribute name="title" >
+       <string>Motion Estimation</string>
+      </attribute>
+      <layout class="QVBoxLayout" >
+       <property name="margin" >
+        <number>9</number>
+       </property>
+       <property name="spacing" >
+        <number>6</number>
+       </property>
+       <item>
+        <widget class="QGroupBox" name="groupBox_11" >
+         <property name="title" >
+          <string>Motion Estimation</string>
+         </property>
+         <layout class="QVBoxLayout" >
+          <property name="margin" >
+           <number>9</number>
+          </property>
+          <property name="spacing" >
+           <number>6</number>
+          </property>
+          <item>
+           <layout class="QVBoxLayout" >
+            <property name="margin" >
+             <number>0</number>
+            </property>
+            <property name="spacing" >
+             <number>6</number>
+            </property>
+            <item>
+             <layout class="QHBoxLayout" >
+              <property name="margin" >
+               <number>0</number>
+              </property>
+              <property name="spacing" >
+               <number>12</number>
+              </property>
+              <item>
+               <layout class="QVBoxLayout" >
+                <property name="margin" >
+                 <number>0</number>
+                </property>
+                <property name="spacing" >
+                 <number>0</number>
+                </property>
+                <item>
+                 <layout class="QHBoxLayout" >
+                  <property name="margin" >
+                   <number>0</number>
+                  </property>
+                  <property name="spacing" >
+                   <number>0</number>
+                  </property>
+                  <item>
+                   <widget class="QLabel" name="label_35" >
+                    <property name="text" >
+                     <string>1 (Fast)</string>
+                    </property>
+                   </widget>
+                  </item>
+                  <item>
+                   <spacer>
+                    <property name="orientation" >
+                     <enum>Qt::Horizontal</enum>
+                    </property>
+                    <property name="sizeHint" >
+                     <size>
+                      <width>40</width>
+                      <height>20</height>
+                     </size>
+                    </property>
+                   </spacer>
+                  </item>
+                  <item>
+                   <widget class="QLabel" name="label_36" >
+                    <property name="text" >
+                     <string>Subpixel Refinement</string>
+                    </property>
+                   </widget>
+                  </item>
+                  <item>
+                   <spacer>
+                    <property name="orientation" >
+                     <enum>Qt::Horizontal</enum>
+                    </property>
+                    <property name="sizeHint" >
+                     <size>
+                      <width>40</width>
+                      <height>20</height>
+                     </size>
+                    </property>
+                   </spacer>
+                  </item>
+                  <item>
+                   <widget class="QLabel" name="label_37" >
+                    <property name="text" >
+                     <string>7 (Best)</string>
+                    </property>
+                   </widget>
+                  </item>
+                 </layout>
+                </item>
+                <item>
+                 <widget class="QSlider" name="meSlider" >
+                  <property name="sizePolicy" >
+                   <sizepolicy>
+                    <hsizetype>5</hsizetype>
+                    <vsizetype>0</vsizetype>
+                    <horstretch>0</horstretch>
+                    <verstretch>0</verstretch>
+                   </sizepolicy>
+                  </property>
+                  <property name="minimum" >
+                   <number>1</number>
+                  </property>
+                  <property name="maximum" >
+                   <number>7</number>
+                  </property>
+                  <property name="pageStep" >
+                   <number>1</number>
+                  </property>
+                  <property name="value" >
+                   <number>5</number>
+                  </property>
+                  <property name="orientation" >
+                   <enum>Qt::Horizontal</enum>
+                  </property>
+                  <property name="tickPosition" >
+                   <enum>QSlider::TicksBelow</enum>
+                  </property>
+                 </widget>
+                </item>
+               </layout>
+              </item>
+              <item>
+               <widget class="QSpinBox" name="meSpinBox" >
+                <property name="maximum" >
+                 <number>7</number>
+                </property>
+                <property name="minimum" >
+                 <number>1</number>
+                </property>
+                <property name="value" >
+                 <number>5</number>
+                </property>
+               </widget>
+              </item>
+             </layout>
+            </item>
+            <item>
+             <widget class="QCheckBox" name="rdoCheckBox" >
+              <property name="enabled" >
+               <bool>false</bool>
+              </property>
+              <property name="text" >
+               <string>Rate Distortion Optimisation for B-frames</string>
+              </property>
+              <property name="checked" >
+               <bool>false</bool>
+              </property>
+             </widget>
+            </item>
+           </layout>
+          </item>
+          <item>
+           <spacer>
+            <property name="orientation" >
+             <enum>Qt::Vertical</enum>
+            </property>
+            <property name="sizeType" >
+             <enum>QSizePolicy::Fixed</enum>
+            </property>
+            <property name="sizeHint" >
+             <size>
+              <width>416</width>
+              <height>10</height>
+             </size>
+            </property>
+           </spacer>
+          </item>
+          <item>
+           <layout class="QVBoxLayout" >
+            <property name="margin" >
+             <number>0</number>
+            </property>
+            <property name="spacing" >
+             <number>6</number>
+            </property>
+            <item>
+             <layout class="QHBoxLayout" >
+              <property name="margin" >
+               <number>0</number>
+              </property>
+              <property name="spacing" >
+               <number>6</number>
+              </property>
+              <item>
+               <widget class="QLabel" name="label_38" >
+                <property name="text" >
+                 <string>Motion Estimation Method:</string>
+                </property>
+               </widget>
+              </item>
+              <item>
+               <layout class="QHBoxLayout" >
+                <property name="margin" >
+                 <number>0</number>
+                </property>
+                <property name="spacing" >
+                 <number>6</number>
+                </property>
+                <item>
+                 <widget class="QComboBox" name="meMethodComboBox" >
+                  <property name="currentIndex" >
+                   <number>1</number>
+                  </property>
+                  <item>
+                   <property name="text" >
+                    <string>Diamond Search</string>
+                   </property>
+                  </item>
+                  <item>
+                   <property name="text" >
+                    <string>Hexagonal Search</string>
+                   </property>
+                  </item>
+                  <item>
+                   <property name="text" >
+                    <string>Uneven Multi-hexagonal Search</string>
+                   </property>
+                  </item>
+                  <item>
+                   <property name="text" >
+                    <string>Exhaustive Search</string>
+                   </property>
+                  </item>
+                  <item>
+                   <property name="text" >
+                    <string>Hadamard Exhaustive Search</string>
+                   </property>
+                  </item>
+                 </widget>
+                </item>
+                <item>
+                 <spacer>
+                  <property name="orientation" >
+                   <enum>Qt::Horizontal</enum>
+                  </property>
+                  <property name="sizeHint" >
+                   <size>
+                    <width>40</width>
+                    <height>20</height>
+                   </size>
+                  </property>
+                 </spacer>
+                </item>
+               </layout>
+              </item>
+             </layout>
+            </item>
+            <item>
+             <layout class="QGridLayout" >
+              <property name="margin" >
+               <number>0</number>
+              </property>
+              <property name="spacing" >
+               <number>6</number>
+              </property>
+              <item row="1" column="1" >
+               <layout class="QHBoxLayout" >
+                <property name="margin" >
+                 <number>0</number>
+                </property>
+                <property name="spacing" >
+                 <number>6</number>
+                </property>
+                <item>
+                 <widget class="QSpinBox" name="mvLengthSpinBox" >
+                  <property name="enabled" >
+                   <bool>false</bool>
+                  </property>
+                  <property name="maximum" >
+                   <number>512</number>
+                  </property>
+                  <property name="minimum" >
+                   <number>32</number>
+                  </property>
+                 </widget>
+                </item>
+                <item>
+                 <spacer>
+                  <property name="orientation" >
+                   <enum>Qt::Horizontal</enum>
+                  </property>
+                  <property name="sizeHint" >
+                   <size>
+                    <width>40</width>
+                    <height>20</height>
+                   </size>
+                  </property>
+                 </spacer>
+                </item>
+               </layout>
+              </item>
+              <item row="1" column="0" >
+               <widget class="QCheckBox" name="mvLengthCheckBox" >
+                <property name="text" >
+                 <string>Maximum Motion Vector Length:</string>
+                </property>
+               </widget>
+              </item>
+              <item row="2" column="1" >
+               <layout class="QHBoxLayout" >
+                <property name="margin" >
+                 <number>0</number>
+                </property>
+                <property name="spacing" >
+                 <number>6</number>
+                </property>
+                <item>
+                 <widget class="QSpinBox" name="minThreadBufferSpinBox" >
+                  <property name="enabled" >
+                   <bool>false</bool>
+                  </property>
+                  <property name="maximum" >
+                   <number>2147483647</number>
+                  </property>
+                  <property name="minimum" >
+                   <number>0</number>
+                  </property>
+                  <property name="singleStep" >
+                   <number>1</number>
+                  </property>
+                  <property name="value" >
+                   <number>0</number>
+                  </property>
+                 </widget>
+                </item>
+                <item>
+                 <spacer>
+                  <property name="orientation" >
+                   <enum>Qt::Horizontal</enum>
+                  </property>
+                  <property name="sizeHint" >
+                   <size>
+                    <width>40</width>
+                    <height>20</height>
+                   </size>
+                  </property>
+                 </spacer>
+                </item>
+               </layout>
+              </item>
+              <item row="0" column="1" >
+               <layout class="QHBoxLayout" >
+                <property name="margin" >
+                 <number>0</number>
+                </property>
+                <property name="spacing" >
+                 <number>6</number>
+                </property>
+                <item>
+                 <widget class="QSpinBox" name="mvRangeSpinBox" >
+                  <property name="maximum" >
+                   <number>64</number>
+                  </property>
+                  <property name="value" >
+                   <number>16</number>
+                  </property>
+                 </widget>
+                </item>
+                <item>
+                 <spacer>
+                  <property name="orientation" >
+                   <enum>Qt::Horizontal</enum>
+                  </property>
+                  <property name="sizeHint" >
+                   <size>
+                    <width>40</width>
+                    <height>20</height>
+                   </size>
+                  </property>
+                 </spacer>
+                </item>
+               </layout>
+              </item>
+              <item row="2" column="0" >
+               <widget class="QCheckBox" name="minThreadBufferCheckBox" >
+                <property name="text" >
+                 <string>Minimum Buffer Between Threads:</string>
+                </property>
+               </widget>
+              </item>
+              <item row="0" column="0" >
+               <widget class="QLabel" name="label_39" >
+                <property name="text" >
+                 <string>Maximum Motion Vector Search Range:</string>
+                </property>
+               </widget>
+              </item>
+             </layout>
+            </item>
+           </layout>
+          </item>
+          <item>
+           <spacer>
+            <property name="orientation" >
+             <enum>Qt::Vertical</enum>
+            </property>
+            <property name="sizeType" >
+             <enum>QSizePolicy::Fixed</enum>
+            </property>
+            <property name="sizeHint" >
+             <size>
+              <width>416</width>
+              <height>10</height>
+             </size>
+            </property>
+           </spacer>
+          </item>
+          <item>
+           <layout class="QVBoxLayout" >
+            <property name="margin" >
+             <number>0</number>
+            </property>
+            <property name="spacing" >
+             <number>6</number>
+            </property>
+            <item>
+             <layout class="QGridLayout" >
+              <property name="margin" >
+               <number>0</number>
+              </property>
+              <property name="spacing" >
+               <number>6</number>
+              </property>
+              <item row="1" column="0" >
+               <widget class="QLabel" name="label_41" >
+                <property name="text" >
+                 <string>Direct Prediction Size:</string>
+                </property>
+               </widget>
+              </item>
+              <item row="0" column="0" >
+               <widget class="QLabel" name="label_40" >
+                <property name="text" >
+                 <string>Direct Prediction Mode:</string>
+                </property>
+               </widget>
+              </item>
+              <item row="0" column="1" >
+               <layout class="QHBoxLayout" >
+                <property name="margin" >
+                 <number>0</number>
+                </property>
+                <property name="spacing" >
+                 <number>6</number>
+                </property>
+                <item>
+                 <widget class="QComboBox" name="predictModeComboBox" >
+                  <property name="currentIndex" >
+                   <number>1</number>
+                  </property>
+                  <item>
+                   <property name="text" >
+                    <string>None</string>
+                   </property>
+                  </item>
+                  <item>
+                   <property name="text" >
+                    <string>Spatial</string>
+                   </property>
+                  </item>
+                  <item>
+                   <property name="text" >
+                    <string>Temporal</string>
+                   </property>
+                  </item>
+                  <item>
+                   <property name="text" >
+                    <string>Auto</string>
+                   </property>
+                  </item>
+                 </widget>
+                </item>
+                <item>
+                 <spacer>
+                  <property name="orientation" >
+                   <enum>Qt::Horizontal</enum>
+                  </property>
+                  <property name="sizeHint" >
+                   <size>
+                    <width>40</width>
+                    <height>20</height>
+                   </size>
+                  </property>
+                 </spacer>
+                </item>
+               </layout>
+              </item>
+              <item row="1" column="1" >
+               <layout class="QHBoxLayout" >
+                <property name="margin" >
+                 <number>0</number>
+                </property>
+                <property name="spacing" >
+                 <number>6</number>
+                </property>
+                <item>
+                 <widget class="QComboBox" name="predictSizeComboBox" >
+                  <item>
+                   <property name="text" >
+                    <string>Smallest Possible</string>
+                   </property>
+                  </item>
+                  <item>
+                   <property name="text" >
+                    <string>4x4</string>
+                   </property>
+                  </item>
+                  <item>
+                   <property name="text" >
+                    <string>8x8</string>
+                   </property>
+                  </item>
+                 </widget>
+                </item>
+                <item>
+                 <spacer>
+                  <property name="orientation" >
+                   <enum>Qt::Horizontal</enum>
+                  </property>
+                  <property name="sizeHint" >
+                   <size>
+                    <width>40</width>
+                    <height>20</height>
+                   </size>
+                  </property>
+                 </spacer>
+                </item>
+               </layout>
+              </item>
+             </layout>
+            </item>
+            <item>
+             <widget class="QCheckBox" name="weightedPredictCheckBox" >
+              <property name="text" >
+               <string>Weighted Prediction for B-frames</string>
+              </property>
+             </widget>
+            </item>
+           </layout>
+          </item>
+         </layout>
+        </widget>
+       </item>
+       <item>
+        <widget class="QGroupBox" name="groupBox_10" >
+         <property name="title" >
+          <string>Partition Search</string>
+         </property>
+         <layout class="QVBoxLayout" >
+          <property name="margin" >
+           <number>9</number>
+          </property>
+          <property name="spacing" >
+           <number>6</number>
+          </property>
+          <item>
+           <layout class="QVBoxLayout" >
+            <property name="margin" >
+             <number>0</number>
+            </property>
+            <property name="spacing" >
+             <number>6</number>
+            </property>
+            <item>
+             <widget class="QCheckBox" name="dct8x8CheckBox" >
+              <property name="text" >
+               <string>8x8 DCT Spatial Transform</string>
+              </property>
+              <property name="checked" >
+               <bool>true</bool>
+              </property>
+             </widget>
+            </item>
+            <item>
+             <widget class="QCheckBox" name="p8x8CheckBox" >
+              <property name="text" >
+               <string>8x8, 8x16 and 16x8 P-frame Intra-predicted Blocks</string>
+              </property>
+              <property name="checked" >
+               <bool>true</bool>
+              </property>
+             </widget>
+            </item>
+            <item>
+             <widget class="QCheckBox" name="b8x8CheckBox" >
+              <property name="text" >
+               <string>8x8, 8x16 and 16x8 B-frame Intra-predicted Blocks</string>
+              </property>
+              <property name="checked" >
+               <bool>true</bool>
+              </property>
+             </widget>
+            </item>
+            <item>
+             <widget class="QCheckBox" name="p4x4CheckBox" >
+              <property name="text" >
+               <string>4x4, 4x8 and 8x4 P-frame Intra-predicted Blocks</string>
+              </property>
+             </widget>
+            </item>
+            <item>
+             <widget class="QCheckBox" name="i8x8CheckBox" >
+              <property name="text" >
+               <string>8x8 Intra-predicted Blocks</string>
+              </property>
+              <property name="checked" >
+               <bool>true</bool>
+              </property>
+             </widget>
+            </item>
+            <item>
+             <widget class="QCheckBox" name="i4x4CheckBox" >
+              <property name="text" >
+               <string>4x4 Intra-predicted Blocks</string>
+              </property>
+              <property name="checked" >
+               <bool>true</bool>
+              </property>
+             </widget>
+            </item>
+           </layout>
+          </item>
+         </layout>
+        </widget>
+       </item>
+       <item>
+        <spacer>
+         <property name="orientation" >
+          <enum>Qt::Vertical</enum>
+         </property>
+         <property name="sizeHint" >
+          <size>
+           <width>436</width>
+           <height>2</height>
+          </size>
+         </property>
+        </spacer>
+       </item>
+      </layout>
+     </widget>
+     <widget class="QWidget" name="tab_4" >
+      <attribute name="title" >
+       <string>Frame</string>
+      </attribute>
+      <layout class="QVBoxLayout" >
+       <property name="margin" >
+        <number>9</number>
+       </property>
+       <property name="spacing" >
+        <number>6</number>
+       </property>
+       <item>
+        <widget class="QGroupBox" name="groupBox_6" >
+         <property name="title" >
+          <string>Frame Encoding</string>
+         </property>
+         <layout class="QVBoxLayout" >
+          <property name="margin" >
+           <number>9</number>
+          </property>
+          <property name="spacing" >
+           <number>6</number>
+          </property>
+          <item>
+           <layout class="QVBoxLayout" >
+            <property name="margin" >
+             <number>0</number>
+            </property>
+            <property name="spacing" >
+             <number>6</number>
+            </property>
+            <item>
+             <widget class="QCheckBox" name="cabacCheckBox" >
+              <property name="text" >
+               <string>CABAC</string>
+              </property>
+              <property name="checked" >
+               <bool>true</bool>
+              </property>
+             </widget>
+            </item>
+            <item>
+             <widget class="QCheckBox" name="interlacedCheckBox" >
+              <property name="text" >
+               <string>Pure Interlaced Mode</string>
+              </property>
+             </widget>
+            </item>
+           </layout>
+          </item>
+         </layout>
+        </widget>
+       </item>
+       <item>
+        <widget class="QGroupBox" name="groupBox_7" >
+         <property name="title" >
+          <string>Deblocking</string>
+         </property>
+         <layout class="QVBoxLayout" >
+          <property name="margin" >
+           <number>9</number>
+          </property>
+          <property name="spacing" >
+           <number>6</number>
+          </property>
+          <item>
+           <widget class="QCheckBox" name="loopFilterCheckBox" >
+            <property name="text" >
+             <string>Loop Filter</string>
+            </property>
+            <property name="checked" >
+             <bool>true</bool>
+            </property>
+           </widget>
+          </item>
+          <item>
+           <layout class="QHBoxLayout" >
+            <property name="margin" >
+             <number>0</number>
+            </property>
+            <property name="spacing" >
+             <number>6</number>
+            </property>
+            <item>
+             <spacer>
+              <property name="orientation" >
+               <enum>Qt::Horizontal</enum>
+              </property>
+              <property name="sizeType" >
+               <enum>QSizePolicy::Fixed</enum>
+              </property>
+              <property name="sizeHint" >
+               <size>
+                <width>20</width>
+                <height>20</height>
+               </size>
+              </property>
+             </spacer>
+            </item>
+            <item>
+             <layout class="QHBoxLayout" >
+              <property name="margin" >
+               <number>0</number>
+              </property>
+              <property name="spacing" >
+               <number>6</number>
+              </property>
+              <item>
+               <widget class="QLabel" name="alphaC0Label" >
+                <property name="text" >
+                 <string>AlphaC0:</string>
+                </property>
+               </widget>
+              </item>
+              <item>
+               <widget class="QSpinBox" name="alphaC0SpinBox" >
+                <property name="maximum" >
+                 <number>6</number>
+                </property>
+                <property name="minimum" >
+                 <number>-6</number>
+                </property>
+               </widget>
+              </item>
+              <item>
+               <spacer>
+                <property name="orientation" >
+                 <enum>Qt::Horizontal</enum>
+                </property>
+                <property name="sizeType" >
+                 <enum>QSizePolicy::Fixed</enum>
+                </property>
+                <property name="sizeHint" >
+                 <size>
+                  <width>10</width>
+                  <height>20</height>
+                 </size>
+                </property>
+               </spacer>
+              </item>
+              <item>
+               <widget class="QLabel" name="betaLabel" >
+                <property name="text" >
+                 <string>Beta:</string>
+                </property>
+               </widget>
+              </item>
+              <item>
+               <widget class="QSpinBox" name="betaSpinBox" >
+                <property name="maximum" >
+                 <number>6</number>
+                </property>
+                <property name="minimum" >
+                 <number>-6</number>
+                </property>
+               </widget>
+              </item>
+              <item>
+               <spacer>
+                <property name="orientation" >
+                 <enum>Qt::Horizontal</enum>
+                </property>
+                <property name="sizeType" >
+                 <enum>QSizePolicy::MinimumExpanding</enum>
+                </property>
+                <property name="sizeHint" >
+                 <size>
+                  <width>10</width>
+                  <height>20</height>
+                 </size>
+                </property>
+               </spacer>
+              </item>
+             </layout>
+            </item>
+           </layout>
+          </item>
+         </layout>
+        </widget>
+       </item>
+       <item>
+        <widget class="QGroupBox" name="groupBox_9" >
+         <property name="title" >
+          <string>B-frames</string>
+         </property>
+         <layout class="QVBoxLayout" >
+          <property name="margin" >
+           <number>9</number>
+          </property>
+          <property name="spacing" >
+           <number>6</number>
+          </property>
+          <item>
+           <layout class="QGridLayout" >
+            <property name="margin" >
+             <number>0</number>
+            </property>
+            <property name="spacing" >
+             <number>6</number>
+            </property>
+            <item row="0" column="1" >
+             <layout class="QHBoxLayout" >
+              <property name="margin" >
+               <number>0</number>
+              </property>
+              <property name="spacing" >
+               <number>6</number>
+              </property>
+              <item>
+               <widget class="QSpinBox" name="maxBFramesSpinBox" >
+                <property name="maximum" >
+                 <number>15</number>
+                </property>
+               </widget>
+              </item>
+              <item>
+               <spacer>
+                <property name="orientation" >
+                 <enum>Qt::Horizontal</enum>
+                </property>
+                <property name="sizeType" >
+                 <enum>QSizePolicy::MinimumExpanding</enum>
+                </property>
+                <property name="sizeHint" >
+                 <size>
+                  <width>10</width>
+                  <height>20</height>
+                 </size>
+                </property>
+               </spacer>
+              </item>
+             </layout>
+            </item>
+            <item row="1" column="1" >
+             <layout class="QHBoxLayout" >
+              <property name="margin" >
+               <number>0</number>
+              </property>
+              <property name="spacing" >
+               <number>6</number>
+              </property>
+              <item>
+               <widget class="QSpinBox" name="BFrameBiasSpinBox" >
+                <property name="maximum" >
+                 <number>100</number>
+                </property>
+                <property name="minimum" >
+                 <number>-100</number>
+                </property>
+               </widget>
+              </item>
+              <item>
+               <spacer>
+                <property name="orientation" >
+                 <enum>Qt::Horizontal</enum>
+                </property>
+                <property name="sizeType" >
+                 <enum>QSizePolicy::MinimumExpanding</enum>
+                </property>
+                <property name="sizeHint" >
+                 <size>
+                  <width>10</width>
+                  <height>20</height>
+                 </size>
+                </property>
+               </spacer>
+              </item>
+             </layout>
+            </item>
+            <item row="1" column="0" >
+             <widget class="QLabel" name="label_29" >
+              <property name="text" >
+               <string>B-frame Bias:</string>
+              </property>
+             </widget>
+            </item>
+            <item row="2" column="0" >
+             <widget class="QLabel" name="label_30" >
+              <property name="text" >
+               <string>Reference Frames:</string>
+              </property>
+             </widget>
+            </item>
+            <item row="0" column="0" >
+             <widget class="QLabel" name="label_31" >
+              <property name="text" >
+               <string>Maximum B-frames between I and P:</string>
+              </property>
+             </widget>
+            </item>
+            <item row="2" column="1" >
+             <layout class="QHBoxLayout" >
+              <property name="margin" >
+               <number>0</number>
+              </property>
+              <property name="spacing" >
+               <number>6</number>
+              </property>
+              <item>
+               <widget class="QSpinBox" name="refFramesSpinBox" >
+                <property name="maximum" >
+                 <number>16</number>
+                </property>
+                <property name="value" >
+                 <number>1</number>
+                </property>
+               </widget>
+              </item>
+              <item>
+               <spacer>
+                <property name="orientation" >
+                 <enum>Qt::Horizontal</enum>
+                </property>
+                <property name="sizeType" >
+                 <enum>QSizePolicy::MinimumExpanding</enum>
+                </property>
+                <property name="sizeHint" >
+                 <size>
+                  <width>10</width>
+                  <height>20</height>
+                 </size>
+                </property>
+               </spacer>
+              </item>
+             </layout>
+            </item>
+           </layout>
+          </item>
+          <item>
+           <spacer>
+            <property name="orientation" >
+             <enum>Qt::Vertical</enum>
+            </property>
+            <property name="sizeType" >
+             <enum>QSizePolicy::Fixed</enum>
+            </property>
+            <property name="sizeHint" >
+             <size>
+              <width>362</width>
+              <height>2</height>
+             </size>
+            </property>
+           </spacer>
+          </item>
+          <item>
+           <layout class="QVBoxLayout" >
+            <property name="margin" >
+             <number>0</number>
+            </property>
+            <property name="spacing" >
+             <number>6</number>
+            </property>
+            <item>
+             <widget class="QCheckBox" name="bFrameRefCheckBox" >
+              <property name="text" >
+               <string>Use B-frames as References</string>
+              </property>
+             </widget>
+            </item>
+            <item>
+             <widget class="QCheckBox" name="adaptiveBFrameCheckBox" >
+              <property name="text" >
+               <string>Adaptive B-frame Decision</string>
+              </property>
+              <property name="checked" >
+               <bool>true</bool>
+              </property>
+             </widget>
+            </item>
+           </layout>
+          </item>
+         </layout>
+        </widget>
+       </item>
+       <item>
+        <widget class="QGroupBox" name="groupBox_8" >
+         <property name="title" >
+          <string>I-frames</string>
+         </property>
+         <layout class="QVBoxLayout" >
+          <property name="margin" >
+           <number>9</number>
+          </property>
+          <property name="spacing" >
+           <number>6</number>
+          </property>
+          <item>
+           <layout class="QVBoxLayout" >
+            <property name="margin" >
+             <number>0</number>
+            </property>
+            <property name="spacing" >
+             <number>6</number>
+            </property>
+            <item>
+             <layout class="QGridLayout" >
+              <property name="margin" >
+               <number>0</number>
+              </property>
+              <property name="spacing" >
+               <number>6</number>
+              </property>
+              <item row="1" column="1" >
+               <layout class="QHBoxLayout" >
+                <property name="margin" >
+                 <number>0</number>
+                </property>
+                <property name="spacing" >
+                 <number>6</number>
+                </property>
+                <item>
+                 <widget class="QSpinBox" name="minGopSizeSpinBox" >
+                  <property name="maximum" >
+                   <number>100</number>
+                  </property>
+                  <property name="value" >
+                   <number>25</number>
+                  </property>
+                 </widget>
+                </item>
+                <item>
+                 <spacer>
+                  <property name="orientation" >
+                   <enum>Qt::Horizontal</enum>
+                  </property>
+                  <property name="sizeType" >
+                   <enum>QSizePolicy::MinimumExpanding</enum>
+                  </property>
+                  <property name="sizeHint" >
+                   <size>
+                    <width>10</width>
+                    <height>20</height>
+                   </size>
+                  </property>
+                 </spacer>
+                </item>
+               </layout>
+              </item>
+              <item row="0" column="0" >
+               <widget class="QLabel" name="label_26" >
+                <property name="text" >
+                 <string>Maximum GOP Size:</string>
+                </property>
+               </widget>
+              </item>
+              <item row="2" column="0" >
+               <widget class="QLabel" name="label_27" >
+                <property name="text" >
+                 <string>I-frame Threshold:</string>
+                </property>
+               </widget>
+              </item>
+              <item row="0" column="1" >
+               <layout class="QHBoxLayout" >
+                <property name="margin" >
+                 <number>0</number>
+                </property>
+                <property name="spacing" >
+                 <number>6</number>
+                </property>
+                <item>
+                 <widget class="QSpinBox" name="maxGopSizeSpinBox" >
+                  <property name="maximum" >
+                   <number>1000</number>
+                  </property>
+                  <property name="minimum" >
+                   <number>1</number>
+                  </property>
+                  <property name="value" >
+                   <number>250</number>
+                  </property>
+                 </widget>
+                </item>
+                <item>
+                 <spacer>
+                  <property name="orientation" >
+                   <enum>Qt::Horizontal</enum>
+                  </property>
+                  <property name="sizeType" >
+                   <enum>QSizePolicy::MinimumExpanding</enum>
+                  </property>
+                  <property name="sizeHint" >
+                   <size>
+                    <width>10</width>
+                    <height>20</height>
+                   </size>
+                  </property>
+                 </spacer>
+                </item>
+               </layout>
+              </item>
+              <item row="1" column="0" >
+               <widget class="QLabel" name="label_28" >
+                <property name="text" >
+                 <string>Minimum GOP Size:</string>
+                </property>
+               </widget>
+              </item>
+              <item row="2" column="1" >
+               <layout class="QHBoxLayout" >
+                <property name="margin" >
+                 <number>0</number>
+                </property>
+                <property name="spacing" >
+                 <number>6</number>
+                </property>
+                <item>
+                 <widget class="QSpinBox" name="IFrameThresholdSpinBox" >
+                  <property name="maximum" >
+                   <number>100</number>
+                  </property>
+                  <property name="value" >
+                   <number>40</number>
+                  </property>
+                 </widget>
+                </item>
+                <item>
+                 <spacer>
+                  <property name="orientation" >
+                   <enum>Qt::Horizontal</enum>
+                  </property>
+                  <property name="sizeType" >
+                   <enum>QSizePolicy::MinimumExpanding</enum>
+                  </property>
+                  <property name="sizeHint" >
+                   <size>
+                    <width>10</width>
+                    <height>20</height>
+                   </size>
+                  </property>
+                 </spacer>
+                </item>
+               </layout>
+              </item>
+             </layout>
+            </item>
+            <item>
+             <spacer>
+              <property name="orientation" >
+               <enum>Qt::Vertical</enum>
+              </property>
+              <property name="sizeType" >
+               <enum>QSizePolicy::Fixed</enum>
+              </property>
+              <property name="sizeHint" >
+               <size>
+                <width>362</width>
+                <height>2</height>
+               </size>
+              </property>
+             </spacer>
+            </item>
+            <item>
+             <widget class="QCheckBox" name="scenecutDetectionCheckBox" >
+              <property name="text" >
+               <string>Pre-scenecut Detection</string>
+              </property>
+             </widget>
+            </item>
+           </layout>
+          </item>
+         </layout>
+        </widget>
+       </item>
+       <item>
+        <spacer>
+         <property name="orientation" >
+          <enum>Qt::Vertical</enum>
+         </property>
+         <property name="sizeHint" >
+          <size>
+           <width>20</width>
+           <height>40</height>
+          </size>
+         </property>
+        </spacer>
+       </item>
+      </layout>
+     </widget>
+     <widget class="QWidget" name="tab_7" >
+      <attribute name="title" >
+       <string>Analysis</string>
+      </attribute>
+      <layout class="QVBoxLayout" >
+       <property name="margin" >
+        <number>9</number>
+       </property>
+       <property name="spacing" >
+        <number>6</number>
+       </property>
+       <item>
+        <widget class="QGroupBox" name="groupBox_12" >
+         <property name="title" >
+          <string>Analysis</string>
+         </property>
+         <layout class="QVBoxLayout" >
+          <property name="margin" >
+           <number>9</number>
+          </property>
+          <property name="spacing" >
+           <number>6</number>
+          </property>
+          <item>
+           <layout class="QVBoxLayout" >
+            <property name="margin" >
+             <number>0</number>
+            </property>
+            <property name="spacing" >
+             <number>6</number>
+            </property>
+            <item>
+             <widget class="QCheckBox" name="mixedRefsCheckBox" >
+              <property name="text" >
+               <string>Mixed References</string>
+              </property>
+             </widget>
+            </item>
+            <item>
+             <widget class="QCheckBox" name="chromaMotionEstCheckBox" >
+              <property name="text" >
+               <string>Chroma Motion Estimation</string>
+              </property>
+              <property name="checked" >
+               <bool>true</bool>
+              </property>
+             </widget>
+            </item>
+            <item>
+             <widget class="QCheckBox" name="bFrameMotionEstCheckBox" >
+              <property name="text" >
+               <string>Motion Estimation Before and After B-frames</string>
+              </property>
+             </widget>
+            </item>
+            <item>
+             <layout class="QHBoxLayout" >
+              <property name="margin" >
+               <number>0</number>
+              </property>
+              <property name="spacing" >
+               <number>6</number>
+              </property>
+              <item>
+               <widget class="QCheckBox" name="trellisCheckBox" >
+                <property name="text" >
+                 <string>Trellis Quantization:</string>
+                </property>
+               </widget>
+              </item>
+              <item>
+               <widget class="QComboBox" name="trellisComboBox" >
+                <property name="enabled" >
+                 <bool>false</bool>
+                </property>
+                <item>
+                 <property name="text" >
+                  <string>Final Macroblock Only</string>
+                 </property>
+                </item>
+                <item>
+                 <property name="text" >
+                  <string>Always On</string>
+                 </property>
+                </item>
+               </widget>
+              </item>
+              <item>
+               <spacer>
+                <property name="orientation" >
+                 <enum>Qt::Horizontal</enum>
+                </property>
+                <property name="sizeHint" >
+                 <size>
+                  <width>40</width>
+                  <height>20</height>
+                 </size>
+                </property>
+               </spacer>
+              </item>
+             </layout>
+            </item>
+            <item>
+             <widget class="QCheckBox" name="fastPSkipCheckBox" >
+              <property name="text" >
+               <string>Fast skip detection on P-frames</string>
+              </property>
+              <property name="checked" >
+               <bool>true</bool>
+              </property>
+             </widget>
+            </item>
+            <item>
+             <widget class="QCheckBox" name="dctDecimateCheckBox" >
+              <property name="text" >
+               <string>DCT Decimation on P-frames</string>
+              </property>
+              <property name="checked" >
+               <bool>true</bool>
+              </property>
+             </widget>
+            </item>
+            <item>
+             <layout class="QHBoxLayout" >
+              <property name="margin" >
+               <number>0</number>
+              </property>
+              <property name="spacing" >
+               <number>6</number>
+              </property>
+              <item>
+               <widget class="QLabel" name="label_42" >
+                <property name="text" >
+                 <string>Noise Reduction:</string>
+                </property>
+               </widget>
+              </item>
+              <item>
+               <widget class="QSpinBox" name="noiseReductionSpinBox" >
+                <property name="maximum" >
+                 <number>65536</number>
+                </property>
+               </widget>
+              </item>
+              <item>
+               <spacer>
+                <property name="orientation" >
+                 <enum>Qt::Horizontal</enum>
+                </property>
+                <property name="sizeHint" >
+                 <size>
+                  <width>40</width>
+                  <height>20</height>
+                 </size>
+                </property>
+               </spacer>
+              </item>
+             </layout>
+            </item>
+           </layout>
+          </item>
+         </layout>
+        </widget>
+       </item>
+       <item>
+        <widget class="QGroupBox" name="groupBox_13" >
+         <property name="title" >
+          <string>Luma Quantisation Deadzone</string>
+         </property>
+         <layout class="QVBoxLayout" >
+          <property name="margin" >
+           <number>9</number>
+          </property>
+          <property name="spacing" >
+           <number>6</number>
+          </property>
+          <item>
+           <layout class="QGridLayout" >
+            <property name="margin" >
+             <number>0</number>
+            </property>
+            <property name="spacing" >
+             <number>6</number>
+            </property>
+            <item row="0" column="0" >
+             <widget class="QLabel" name="label_44" >
+              <property name="text" >
+               <string>Intra Luma Quantisation Deadzone:</string>
+              </property>
+             </widget>
+            </item>
+            <item row="1" column="0" >
+             <widget class="QLabel" name="label_43" >
+              <property name="text" >
+               <string>Inter Luma Quantisation Deadzone:</string>
+              </property>
+             </widget>
+            </item>
+            <item row="0" column="1" >
+             <layout class="QHBoxLayout" >
+              <property name="margin" >
+               <number>0</number>
+              </property>
+              <property name="spacing" >
+               <number>6</number>
+              </property>
+              <item>
+               <widget class="QSpinBox" name="intraLumaSpinBox" >
+                <property name="maximum" >
+                 <number>32</number>
+                </property>
+                <property name="value" >
+                 <number>21</number>
+                </property>
+               </widget>
+              </item>
+              <item>
+               <spacer>
+                <property name="orientation" >
+                 <enum>Qt::Horizontal</enum>
+                </property>
+                <property name="sizeHint" >
+                 <size>
+                  <width>40</width>
+                  <height>20</height>
+                 </size>
+                </property>
+               </spacer>
+              </item>
+             </layout>
+            </item>
+            <item row="1" column="1" >
+             <layout class="QHBoxLayout" >
+              <property name="margin" >
+               <number>0</number>
+              </property>
+              <property name="spacing" >
+               <number>6</number>
+              </property>
+              <item>
+               <widget class="QSpinBox" name="interLumaSpinBox" >
+                <property name="maximum" >
+                 <number>32</number>
+                </property>
+                <property name="value" >
+                 <number>21</number>
+                </property>
+               </widget>
+              </item>
+              <item>
+               <spacer>
+                <property name="orientation" >
+                 <enum>Qt::Horizontal</enum>
+                </property>
+                <property name="sizeHint" >
+                 <size>
+                  <width>40</width>
+                  <height>20</height>
+                 </size>
+                </property>
+               </spacer>
+              </item>
+             </layout>
+            </item>
+           </layout>
+          </item>
+         </layout>
+        </widget>
+       </item>
+       <item>
+        <widget class="QGroupBox" name="groupBox_14" >
+         <property name="title" >
+          <string>Quantisation Matrix</string>
+         </property>
+         <layout class="QVBoxLayout" >
+          <property name="margin" >
+           <number>9</number>
+          </property>
+          <property name="spacing" >
+           <number>6</number>
+          </property>
+          <item>
+           <layout class="QVBoxLayout" >
+            <property name="margin" >
+             <number>0</number>
+            </property>
+            <property name="spacing" >
+             <number>6</number>
+            </property>
+            <item>
+             <widget class="QRadioButton" name="matrixFlatRadioButton" >
+              <property name="text" >
+               <string>Flat Matrix</string>
+              </property>
+              <property name="checked" >
+               <bool>true</bool>
+              </property>
+             </widget>
+            </item>
+            <item>
+             <widget class="QRadioButton" name="matrixJvtRadioButton" >
+              <property name="text" >
+               <string>JVT Matrix</string>
+              </property>
+             </widget>
+            </item>
+            <item>
+             <layout class="QHBoxLayout" >
+              <property name="margin" >
+               <number>0</number>
+              </property>
+              <property name="spacing" >
+               <number>6</number>
+              </property>
+              <item>
+               <widget class="QRadioButton" name="matrixCustomRadioButton" >
+                <property name="text" >
+                 <string>Custom Matrix</string>
+                </property>
+               </widget>
+              </item>
+              <item>
+               <widget class="QPushButton" name="matrixCustomEditButton" >
+                <property name="enabled" >
+                 <bool>false</bool>
+                </property>
+                <property name="text" >
+                 <string>Edit</string>
+                </property>
+               </widget>
+              </item>
+              <item>
+               <spacer>
+                <property name="orientation" >
+                 <enum>Qt::Horizontal</enum>
+                </property>
+                <property name="sizeHint" >
+                 <size>
+                  <width>40</width>
+                  <height>20</height>
+                 </size>
+                </property>
+               </spacer>
+              </item>
+             </layout>
+            </item>
+           </layout>
+          </item>
+         </layout>
+        </widget>
+       </item>
+       <item>
+        <spacer>
+         <property name="orientation" >
+          <enum>Qt::Vertical</enum>
+         </property>
+         <property name="sizeHint" >
+          <size>
+           <width>20</width>
+           <height>40</height>
+          </size>
+         </property>
+        </spacer>
+       </item>
+      </layout>
+     </widget>
+     <widget class="QWidget" name="tab_2" >
+      <attribute name="title" >
+       <string>Quantiser</string>
+      </attribute>
+      <layout class="QVBoxLayout" >
+       <property name="margin" >
+        <number>9</number>
+       </property>
+       <property name="spacing" >
+        <number>6</number>
+       </property>
+       <item>
+        <widget class="QGroupBox" name="groupBox_4" >
+         <property name="title" >
+          <string>Quantiser Control</string>
+         </property>
+         <layout class="QVBoxLayout" >
+          <property name="margin" >
+           <number>9</number>
+          </property>
+          <property name="spacing" >
+           <number>6</number>
+          </property>
+          <item>
+           <layout class="QGridLayout" >
+            <property name="margin" >
+             <number>0</number>
+            </property>
+            <property name="spacing" >
+             <number>6</number>
+            </property>
+            <item row="2" column="1" >
+             <layout class="QHBoxLayout" >
+              <property name="margin" >
+               <number>0</number>
+              </property>
+              <property name="spacing" >
+               <number>6</number>
+              </property>
+              <item>
+               <widget class="QSpinBox" name="quantiserMaxStepSpinBox" >
+                <property name="maximum" >
+                 <number>10</number>
+                </property>
+                <property name="value" >
+                 <number>4</number>
+                </property>
+               </widget>
+              </item>
+              <item>
+               <spacer>
+                <property name="orientation" >
+                 <enum>Qt::Horizontal</enum>
+                </property>
+                <property name="sizeHint" >
+                 <size>
+                  <width>40</width>
+                  <height>20</height>
+                 </size>
+                </property>
+               </spacer>
+              </item>
+             </layout>
+            </item>
+            <item row="1" column="0" >
+             <widget class="QLabel" name="label_16" >
+              <property name="text" >
+               <string>Maximum Quantiser:</string>
+              </property>
+             </widget>
+            </item>
+            <item row="4" column="0" >
+             <widget class="QLabel" name="label_6" >
+              <property name="text" >
+               <string>I and P-frame Quantiser Ratio:</string>
+              </property>
+             </widget>
+            </item>
+            <item row="0" column="1" >
+             <layout class="QHBoxLayout" >
+              <property name="margin" >
+               <number>0</number>
+              </property>
+              <property name="spacing" >
+               <number>6</number>
+              </property>
+              <item>
+               <widget class="QSpinBox" name="quantiserMinSpinBox" >
+                <property name="maximum" >
+                 <number>51</number>
+                </property>
+                <property name="value" >
+                 <number>10</number>
+                </property>
+               </widget>
+              </item>
+              <item>
+               <spacer>
+                <property name="orientation" >
+                 <enum>Qt::Horizontal</enum>
+                </property>
+                <property name="sizeHint" >
+                 <size>
+                  <width>47</width>
+                  <height>20</height>
+                 </size>
+                </property>
+               </spacer>
+              </item>
+             </layout>
+            </item>
+            <item row="5" column="1" >
+             <layout class="QHBoxLayout" >
+              <property name="margin" >
+               <number>0</number>
+              </property>
+              <property name="spacing" >
+               <number>6</number>
+              </property>
+              <item>
+               <widget class="QDoubleSpinBox" name="quantiserPbRatioSpinBox" >
+                <property name="decimals" >
+                 <number>1</number>
+                </property>
+                <property name="maximum" >
+                 <double>10</double>
+                </property>
+                <property name="minimum" >
+                 <double>1</double>
+                </property>
+                <property name="value" >
+                 <double>1.3</double>
+                </property>
+               </widget>
+              </item>
+              <item>
+               <spacer>
+                <property name="orientation" >
+                 <enum>Qt::Horizontal</enum>
+                </property>
+                <property name="sizeHint" >
+                 <size>
+                  <width>40</width>
+                  <height>20</height>
+                 </size>
+                </property>
+               </spacer>
+              </item>
+             </layout>
+            </item>
+            <item row="3" column="1" >
+             <layout class="QHBoxLayout" >
+              <property name="margin" >
+               <number>0</number>
+              </property>
+              <property name="spacing" >
+               <number>6</number>
+              </property>
+              <item>
+               <widget class="QSpinBox" name="avgBitrateToleranceSpinBox" >
+                <property name="maximum" >
+                 <number>100</number>
+                </property>
+                <property name="minimum" >
+                 <number>0</number>
+                </property>
+                <property name="value" >
+                 <number>100</number>
+                </property>
+               </widget>
+              </item>
+              <item>
+               <widget class="QLabel" name="label_2" >
+                <property name="text" >
+                 <string>%</string>
+                </property>
+               </widget>
+              </item>
+              <item>
+               <spacer>
+                <property name="orientation" >
+                 <enum>Qt::Horizontal</enum>
+                </property>
+                <property name="sizeHint" >
+                 <size>
+                  <width>40</width>
+                  <height>20</height>
+                 </size>
+                </property>
+               </spacer>
+              </item>
+             </layout>
+            </item>
+            <item row="2" column="0" >
+             <widget class="QLabel" name="label_17" >
+              <property name="text" >
+               <string>Maximum Quantiser Step:</string>
+              </property>
+             </widget>
+            </item>
+            <item row="6" column="1" >
+             <layout class="QHBoxLayout" >
+              <property name="margin" >
+               <number>0</number>
+              </property>
+              <property name="spacing" >
+               <number>6</number>
+              </property>
+              <item>
+               <widget class="QSpinBox" name="chromaLumaOffsetSpinBox" >
+                <property name="maximum" >
+                 <number>12</number>
+                </property>
+                <property name="minimum" >
+                 <number>-12</number>
+                </property>
+               </widget>
+              </item>
+              <item>
+               <spacer>
+                <property name="orientation" >
+                 <enum>Qt::Horizontal</enum>
+                </property>
+                <property name="sizeHint" >
+                 <size>
+                  <width>40</width>
+                  <height>20</height>
+                 </size>
+                </property>
+               </spacer>
+              </item>
+             </layout>
+            </item>
+            <item row="5" column="0" >
+             <widget class="QLabel" name="label_7" >
+              <property name="text" >
+               <string>P and B-frame Quantiser Ratio:</string>
+              </property>
+             </widget>
+            </item>
+            <item row="3" column="0" >
+             <widget class="QLabel" name="label_5" >
+              <property name="text" >
+               <string>Average Bitrate Tolerance:</string>
+              </property>
+             </widget>
+            </item>
+            <item row="6" column="0" >
+             <widget class="QLabel" name="label_20" >
+              <property name="text" >
+               <string>Chroma to Luma Quantiser Offset:</string>
+              </property>
+             </widget>
+            </item>
+            <item row="1" column="1" >
+             <layout class="QHBoxLayout" >
+              <property name="margin" >
+               <number>0</number>
+              </property>
+              <property name="spacing" >
+               <number>6</number>
+              </property>
+              <item>
+               <widget class="QSpinBox" name="quantiserMaxSpinBox" >
+                <property name="maximum" >
+                 <number>51</number>
+                </property>
+                <property name="minimum" >
+                 <number>10</number>
+                </property>
+                <property name="value" >
+                 <number>51</number>
+                </property>
+               </widget>
+              </item>
+              <item>
+               <spacer>
+                <property name="orientation" >
+                 <enum>Qt::Horizontal</enum>
+                </property>
+                <property name="sizeHint" >
+                 <size>
+                  <width>40</width>
+                  <height>20</height>
+                 </size>
+                </property>
+               </spacer>
+              </item>
+             </layout>
+            </item>
+            <item row="0" column="0" >
+             <widget class="QLabel" name="label_15" >
+              <property name="text" >
+               <string>Minimum Quantiser:</string>
+              </property>
+             </widget>
+            </item>
+            <item row="4" column="1" >
+             <layout class="QHBoxLayout" >
+              <property name="margin" >
+               <number>0</number>
+              </property>
+              <property name="spacing" >
+               <number>6</number>
+              </property>
+              <item>
+               <widget class="QDoubleSpinBox" name="quantiserIpRatioSpinBox" >
+                <property name="decimals" >
+                 <number>1</number>
+                </property>
+                <property name="maximum" >
+                 <double>10</double>
+                </property>
+                <property name="minimum" >
+                 <double>1</double>
+                </property>
+                <property name="singleStep" >
+                 <double>0.1</double>
+                </property>
+                <property name="value" >
+                 <double>1.4</double>
+                </property>
+               </widget>
+              </item>
+              <item>
+               <spacer>
+                <property name="orientation" >
+                 <enum>Qt::Horizontal</enum>
+                </property>
+                <property name="sizeHint" >
+                 <size>
+                  <width>40</width>
+                  <height>20</height>
+                 </size>
+                </property>
+               </spacer>
+              </item>
+             </layout>
+            </item>
+           </layout>
+          </item>
+         </layout>
+        </widget>
+       </item>
+       <item>
+        <widget class="QGroupBox" name="groupBox_3" >
+         <property name="title" >
+          <string>Quantiser Curve Compression</string>
+         </property>
+         <layout class="QVBoxLayout" >
+          <property name="margin" >
+           <number>9</number>
+          </property>
+          <property name="spacing" >
+           <number>6</number>
+          </property>
+          <item>
+           <layout class="QHBoxLayout" >
+            <property name="margin" >
+             <number>0</number>
+            </property>
+            <property name="spacing" >
+             <number>6</number>
+            </property>
+            <item>
+             <widget class="QLabel" name="label_8" >
+              <property name="text" >
+               <string>Quantiser Curve Compression:</string>
+              </property>
+             </widget>
+            </item>
+            <item>
+             <layout class="QHBoxLayout" >
+              <property name="margin" >
+               <number>0</number>
+              </property>
+              <property name="spacing" >
+               <number>6</number>
+              </property>
+              <item>
+               <widget class="QSpinBox" name="quantiserCurveCompressSpinBox" >
+                <property name="maximum" >
+                 <number>100</number>
+                </property>
+                <property name="value" >
+                 <number>60</number>
+                </property>
+               </widget>
+              </item>
+              <item>
+               <widget class="QLabel" name="label_18" >
+                <property name="text" >
+                 <string>%</string>
+                </property>
+               </widget>
+              </item>
+              <item>
+               <spacer>
+                <property name="orientation" >
+                 <enum>Qt::Horizontal</enum>
+                </property>
+                <property name="sizeHint" >
+                 <size>
+                  <width>40</width>
+                  <height>20</height>
+                 </size>
+                </property>
+               </spacer>
+              </item>
+             </layout>
+            </item>
+           </layout>
+          </item>
+          <item>
+           <spacer>
+            <property name="orientation" >
+             <enum>Qt::Vertical</enum>
+            </property>
+            <property name="sizeType" >
+             <enum>QSizePolicy::Fixed</enum>
+            </property>
+            <property name="sizeHint" >
+             <size>
+              <width>20</width>
+              <height>6</height>
+             </size>
+            </property>
+           </spacer>
+          </item>
+          <item>
+           <layout class="QVBoxLayout" >
+            <property name="margin" >
+             <number>0</number>
+            </property>
+            <property name="spacing" >
+             <number>6</number>
+            </property>
+            <item>
+             <widget class="QLabel" name="label_23" >
+              <property name="text" >
+               <string>Reduce Quantiser Fluctuation</string>
+              </property>
+             </widget>
+            </item>
+            <item>
+             <layout class="QHBoxLayout" >
+              <property name="margin" >
+               <number>0</number>
+              </property>
+              <property name="spacing" >
+               <number>6</number>
+              </property>
+              <item>
+               <spacer>
+                <property name="orientation" >
+                 <enum>Qt::Horizontal</enum>
+                </property>
+                <property name="sizeType" >
+                 <enum>QSizePolicy::Fixed</enum>
+                </property>
+                <property name="sizeHint" >
+                 <size>
+                  <width>20</width>
+                  <height>20</height>
+                 </size>
+                </property>
+               </spacer>
+              </item>
+              <item>
+               <layout class="QGridLayout" >
+                <property name="margin" >
+                 <number>0</number>
+                </property>
+                <property name="spacing" >
+                 <number>6</number>
+                </property>
+                <item row="1" column="0" >
+                 <widget class="QLabel" name="label_22" >
+                  <property name="text" >
+                   <string>After Curve Compression:</string>
+                  </property>
+                 </widget>
+                </item>
+                <item row="0" column="1" >
+                 <layout class="QHBoxLayout" >
+                  <property name="margin" >
+                   <number>0</number>
+                  </property>
+                  <property name="spacing" >
+                   <number>6</number>
+                  </property>
+                  <item>
+                   <widget class="QDoubleSpinBox" name="quantiserBeforeCompressSpinBox" >
+                    <property name="decimals" >
+                     <number>1</number>
+                    </property>
+                    <property name="maximum" >
+                     <double>999</double>
+                    </property>
+                    <property name="value" >
+                     <double>20</double>
+                    </property>
+                   </widget>
+                  </item>
+                  <item>
+                   <spacer>
+                    <property name="orientation" >
+                     <enum>Qt::Horizontal</enum>
+                    </property>
+                    <property name="sizeHint" >
+                     <size>
+                      <width>40</width>
+                      <height>20</height>
+                     </size>
+                    </property>
+                   </spacer>
+                  </item>
+                 </layout>
+                </item>
+                <item row="0" column="0" >
+                 <widget class="QLabel" name="label_21" >
+                  <property name="text" >
+                   <string>Before Curve Compression:</string>
+                  </property>
+                 </widget>
+                </item>
+                <item row="1" column="1" >
+                 <layout class="QHBoxLayout" >
+                  <property name="margin" >
+                   <number>0</number>
+                  </property>
+                  <property name="spacing" >
+                   <number>6</number>
+                  </property>
+                  <item>
+                   <widget class="QDoubleSpinBox" name="quantiserAfterCompressSpinBox" >
+                    <property name="decimals" >
+                     <number>1</number>
+                    </property>
+                    <property name="maximum" >
+                     <double>1</double>
+                    </property>
+                    <property name="singleStep" >
+                     <double>0.1</double>
+                    </property>
+                    <property name="value" >
+                     <double>0.5</double>
+                    </property>
+                   </widget>
+                  </item>
+                  <item>
+                   <spacer>
+                    <property name="orientation" >
+                     <enum>Qt::Horizontal</enum>
+                    </property>
+                    <property name="sizeHint" >
+                     <size>
+                      <width>40</width>
+                      <height>20</height>
+                     </size>
+                    </property>
+                   </spacer>
+                  </item>
+                 </layout>
+                </item>
+               </layout>
+              </item>
+             </layout>
+            </item>
+           </layout>
+          </item>
+         </layout>
+        </widget>
+       </item>
+       <item>
+        <widget class="QGroupBox" name="groupBox" >
+         <property name="sizePolicy" >
+          <sizepolicy>
+           <hsizetype>5</hsizetype>
+           <vsizetype>5</vsizetype>
+           <horstretch>0</horstretch>
+           <verstretch>0</verstretch>
+          </sizepolicy>
+         </property>
+         <property name="title" >
+          <string>Video Buffer Verifier</string>
+         </property>
+         <layout class="QVBoxLayout" >
+          <property name="margin" >
+           <number>9</number>
+          </property>
+          <property name="spacing" >
+           <number>6</number>
+          </property>
+          <item>
+           <layout class="QGridLayout" >
+            <property name="margin" >
+             <number>0</number>
+            </property>
+            <property name="spacing" >
+             <number>6</number>
+            </property>
+            <item row="0" column="0" >
+             <widget class="QLabel" name="label_9" >
+              <property name="font" >
+               <font>
+                <family>MS Shell Dlg 2</family>
+                <pointsize>8</pointsize>
+                <weight>50</weight>
+                <italic>false</italic>
+                <bold>false</bold>
+                <underline>false</underline>
+                <strikeout>false</strikeout>
+               </font>
+              </property>
+              <property name="text" >
+               <string>Maximum VBV Bitrate:</string>
+              </property>
+             </widget>
+            </item>
+            <item row="2" column="0" >
+             <widget class="QLabel" name="label_14" >
+              <property name="font" >
+               <font>
+                <family>MS Shell Dlg 2</family>
+                <pointsize>8</pointsize>
+                <weight>50</weight>
+                <italic>false</italic>
+                <bold>false</bold>
+                <underline>false</underline>
+                <strikeout>false</strikeout>
+               </font>
+              </property>
+              <property name="text" >
+               <string>Initial VBV Buffer Occupancy:</string>
+              </property>
+             </widget>
+            </item>
+            <item row="1" column="1" >
+             <layout class="QHBoxLayout" >
+              <property name="margin" >
+               <number>0</number>
+              </property>
+              <property name="spacing" >
+               <number>6</number>
+              </property>
+              <item>
+               <widget class="QSpinBox" name="vbvBufferSizeSpinBox" >
+                <property name="font" >
+                 <font>
+                  <family>MS Shell Dlg 2</family>
+                  <pointsize>8</pointsize>
+                  <weight>50</weight>
+                  <italic>false</italic>
+                  <bold>false</bold>
+                  <underline>false</underline>
+                  <strikeout>false</strikeout>
+                 </font>
+                </property>
+                <property name="maximum" >
+                 <number>99999</number>
+                </property>
+               </widget>
+              </item>
+              <item>
+               <widget class="QLabel" name="label_12" >
+                <property name="font" >
+                 <font>
+                  <family>MS Shell Dlg 2</family>
+                  <pointsize>8</pointsize>
+                  <weight>50</weight>
+                  <italic>false</italic>
+                  <bold>false</bold>
+                  <underline>false</underline>
+                  <strikeout>false</strikeout>
+                 </font>
+                </property>
+                <property name="text" >
+                 <string>kbit</string>
+                </property>
+               </widget>
+              </item>
+              <item>
+               <spacer>
+                <property name="orientation" >
+                 <enum>Qt::Horizontal</enum>
+                </property>
+                <property name="sizeHint" >
+                 <size>
+                  <width>40</width>
+                  <height>20</height>
+                 </size>
+                </property>
+               </spacer>
+              </item>
+             </layout>
+            </item>
+            <item row="2" column="1" >
+             <layout class="QHBoxLayout" >
+              <property name="margin" >
+               <number>0</number>
+              </property>
+              <property name="spacing" >
+               <number>6</number>
+              </property>
+              <item>
+               <widget class="QSpinBox" name="vbvBufferOccupancySpinBox" >
+                <property name="font" >
+                 <font>
+                  <family>MS Shell Dlg 2</family>
+                  <pointsize>8</pointsize>
+                  <weight>50</weight>
+                  <italic>false</italic>
+                  <bold>false</bold>
+                  <underline>false</underline>
+                  <strikeout>false</strikeout>
+                 </font>
+                </property>
+                <property name="maximum" >
+                 <number>100</number>
+                </property>
+                <property name="value" >
+                 <number>90</number>
+                </property>
+               </widget>
+              </item>
+              <item>
+               <widget class="QLabel" name="label_13" >
+                <property name="font" >
+                 <font>
+                  <family>MS Shell Dlg 2</family>
+                  <pointsize>8</pointsize>
+                  <weight>50</weight>
+                  <italic>false</italic>
+                  <bold>false</bold>
+                  <underline>false</underline>
+                  <strikeout>false</strikeout>
+                 </font>
+                </property>
+                <property name="text" >
+                 <string>%</string>
+                </property>
+               </widget>
+              </item>
+              <item>
+               <spacer>
+                <property name="orientation" >
+                 <enum>Qt::Horizontal</enum>
+                </property>
+                <property name="sizeHint" >
+                 <size>
+                  <width>40</width>
+                  <height>20</height>
+                 </size>
+                </property>
+               </spacer>
+              </item>
+             </layout>
+            </item>
+            <item row="0" column="1" >
+             <layout class="QHBoxLayout" >
+              <property name="margin" >
+               <number>0</number>
+              </property>
+              <property name="spacing" >
+               <number>6</number>
+              </property>
+              <item>
+               <widget class="QSpinBox" name="vbvMaxBitrateSpinBox" >
+                <property name="font" >
+                 <font>
+                  <family>MS Shell Dlg 2</family>
+                  <pointsize>8</pointsize>
+                  <weight>50</weight>
+                  <italic>false</italic>
+                  <bold>false</bold>
+                  <underline>false</underline>
+                  <strikeout>false</strikeout>
+                 </font>
+                </property>
+                <property name="maximum" >
+                 <number>99999</number>
+                </property>
+               </widget>
+              </item>
+              <item>
+               <widget class="QLabel" name="label_10" >
+                <property name="font" >
+                 <font>
+                  <family>MS Shell Dlg 2</family>
+                  <pointsize>8</pointsize>
+                  <weight>50</weight>
+                  <italic>false</italic>
+                  <bold>false</bold>
+                  <underline>false</underline>
+                  <strikeout>false</strikeout>
+                 </font>
+                </property>
+                <property name="text" >
+                 <string>kbit/s</string>
+                </property>
+               </widget>
+              </item>
+              <item>
+               <spacer>
+                <property name="orientation" >
+                 <enum>Qt::Horizontal</enum>
+                </property>
+                <property name="sizeHint" >
+                 <size>
+                  <width>40</width>
+                  <height>20</height>
+                 </size>
+                </property>
+               </spacer>
+              </item>
+             </layout>
+            </item>
+            <item row="1" column="0" >
+             <widget class="QLabel" name="label_11" >
+              <property name="font" >
+               <font>
+                <family>MS Shell Dlg 2</family>
+                <pointsize>8</pointsize>
+                <weight>50</weight>
+                <italic>false</italic>
+                <bold>false</bold>
+                <underline>false</underline>
+                <strikeout>false</strikeout>
+               </font>
+              </property>
+              <property name="text" >
+               <string>VBV Buffer Size:</string>
+              </property>
+             </widget>
+            </item>
+           </layout>
+          </item>
+         </layout>
+        </widget>
+       </item>
+       <item>
+        <spacer>
+         <property name="orientation" >
+          <enum>Qt::Vertical</enum>
+         </property>
+         <property name="sizeHint" >
+          <size>
+           <width>20</width>
+           <height>40</height>
+          </size>
+         </property>
+        </spacer>
+       </item>
+      </layout>
+     </widget>
+     <widget class="QWidget" name="tab_5" >
+      <attribute name="title" >
+       <string>Advanced Rate Control</string>
+      </attribute>
+      <layout class="QVBoxLayout" >
+       <property name="margin" >
+        <number>9</number>
+       </property>
+       <property name="spacing" >
+        <number>6</number>
+       </property>
+       <item>
+        <widget class="QLabel" name="label_32" >
+         <property name="text" >
+          <string>Zones:</string>
+         </property>
+        </widget>
+       </item>
+       <item>
+        <layout class="QHBoxLayout" >
+         <property name="margin" >
+          <number>0</number>
+         </property>
+         <property name="spacing" >
+          <number>6</number>
+         </property>
+         <item>
+          <widget class="QListView" name="listView" />
+         </item>
+         <item>
+          <layout class="QVBoxLayout" >
+           <property name="margin" >
+            <number>0</number>
+           </property>
+           <property name="spacing" >
+            <number>6</number>
+           </property>
+           <item>
+            <widget class="QPushButton" name="zoneAddButton" >
+             <property name="text" >
+              <string>Add</string>
+             </property>
+            </widget>
+           </item>
+           <item>
+            <widget class="QPushButton" name="zoneAddStringButton" >
+             <property name="text" >
+              <string>Add String</string>
+             </property>
+            </widget>
+           </item>
+           <item>
+            <widget class="QPushButton" name="zoneEditButton" >
+             <property name="text" >
+              <string>Edit</string>
+             </property>
+            </widget>
+           </item>
+           <item>
+            <widget class="QPushButton" name="zoneDeleteButton" >
+             <property name="text" >
+              <string>Delete</string>
+             </property>
+            </widget>
+           </item>
+           <item>
+            <spacer>
+             <property name="orientation" >
+              <enum>Qt::Vertical</enum>
+             </property>
+             <property name="sizeHint" >
+              <size>
+               <width>20</width>
+               <height>40</height>
+              </size>
+             </property>
+            </spacer>
+           </item>
+          </layout>
+         </item>
+        </layout>
+       </item>
+       <item>
+        <layout class="QGridLayout" >
+         <property name="margin" >
+          <number>0</number>
+         </property>
+         <property name="spacing" >
+          <number>6</number>
+         </property>
+         <item row="0" column="1" >
+          <layout class="QHBoxLayout" >
+           <property name="margin" >
+            <number>0</number>
+           </property>
+           <property name="spacing" >
+            <number>6</number>
+           </property>
+           <item>
+            <widget class="QLineEdit" name="frameTypeFileLineEdit" />
+           </item>
+           <item>
+            <widget class="QPushButton" name="frameTypeFileButton" >
+             <property name="text" >
+              <string>...</string>
+             </property>
+            </widget>
+           </item>
+          </layout>
+         </item>
+         <item row="1" column="0" >
+          <widget class="QLabel" name="label_33" >
+           <property name="text" >
+            <string>Rate Control Equation:</string>
+           </property>
+          </widget>
+         </item>
+         <item row="1" column="1" >
+          <widget class="QLineEdit" name="rateControlEqLineEdit" >
+           <property name="text" >
+            <string>blurCplx^(1-qComp)</string>
+           </property>
+          </widget>
+         </item>
+         <item row="0" column="0" >
+          <widget class="QLabel" name="label_34" >
+           <property name="text" >
+            <string>Frame Type and Quantiser File:</string>
+           </property>
+          </widget>
+         </item>
+        </layout>
+       </item>
+      </layout>
+     </widget>
+     <widget class="QWidget" name="tab_3" >
+      <attribute name="title" >
+       <string>Output</string>
+      </attribute>
+      <layout class="QVBoxLayout" >
+       <property name="margin" >
+        <number>9</number>
+       </property>
+       <property name="spacing" >
+        <number>6</number>
+       </property>
+       <item>
+        <widget class="QGroupBox" name="groupBox_16" >
+         <property name="title" >
+          <string>Output</string>
+         </property>
+         <layout class="QVBoxLayout" >
+          <property name="margin" >
+           <number>9</number>
+          </property>
+          <property name="spacing" >
+           <number>6</number>
+          </property>
+          <item>
+           <layout class="QVBoxLayout" >
+            <property name="margin" >
+             <number>0</number>
+            </property>
+            <property name="spacing" >
+             <number>6</number>
+            </property>
+            <item>
+             <layout class="QGridLayout" >
+              <property name="margin" >
+               <number>0</number>
+              </property>
+              <property name="spacing" >
+               <number>6</number>
+              </property>
+              <item row="0" column="1" >
+               <layout class="QHBoxLayout" >
+                <property name="margin" >
+                 <number>0</number>
+                </property>
+                <property name="spacing" >
+                 <number>6</number>
+                </property>
+                <item>
+                 <widget class="QComboBox" name="idcLevelComboBox" >
+                  <property name="currentIndex" >
+                   <number>14</number>
+                  </property>
+                  <item>
+                   <property name="text" >
+                    <string>1</string>
+                   </property>
+                  </item>
+                  <item>
+                   <property name="text" >
+                    <string>1.1</string>
+                   </property>
+                  </item>
+                  <item>
+                   <property name="text" >
+                    <string>1.2</string>
+                   </property>
+                  </item>
+                  <item>
+                   <property name="text" >
+                    <string>1.3</string>
+                   </property>
+                  </item>
+                  <item>
+                   <property name="text" >
+                    <string>2</string>
+                   </property>
+                  </item>
+                  <item>
+                   <property name="text" >
+                    <string>2.1</string>
+                   </property>
+                  </item>
+                  <item>
+                   <property name="text" >
+                    <string>2.2</string>
+                   </property>
+                  </item>
+                  <item>
+                   <property name="text" >
+                    <string>3</string>
+                   </property>
+                  </item>
+                  <item>
+                   <property name="text" >
+                    <string>3.1</string>
+                   </property>
+                  </item>
+                  <item>
+                   <property name="text" >
+                    <string>3.2</string>
+                   </property>
+                  </item>
+                  <item>
+                   <property name="text" >
+                    <string>4</string>
+                   </property>
+                  </item>
+                  <item>
+                   <property name="text" >
+                    <string>4.1</string>
+                   </property>
+                  </item>
+                  <item>
+                   <property name="text" >
+                    <string>4.2</string>
+                   </property>
+                  </item>
+                  <item>
+                   <property name="text" >
+                    <string>5</string>
+                   </property>
+                  </item>
+                  <item>
+                   <property name="text" >
+                    <string>5.1</string>
+                   </property>
+                  </item>
+                 </widget>
+                </item>
+                <item>
+                 <spacer>
+                  <property name="orientation" >
+                   <enum>Qt::Horizontal</enum>
+                  </property>
+                  <property name="sizeHint" >
+                   <size>
+                    <width>40</width>
+                    <height>20</height>
+                   </size>
+                  </property>
+                 </spacer>
+                </item>
+               </layout>
+              </item>
+              <item row="1" column="0" >
+               <widget class="QLabel" name="label_55" >
+                <property name="text" >
+                 <string>Sequence Parameter Set Identifer:</string>
+                </property>
+               </widget>
+              </item>
+              <item row="0" column="0" >
+               <widget class="QLabel" name="label_56" >
+                <property name="text" >
+                 <string>IDC Level:</string>
+                </property>
+               </widget>
+              </item>
+              <item row="1" column="1" >
+               <layout class="QHBoxLayout" >
+                <property name="margin" >
+                 <number>0</number>
+                </property>
+                <property name="spacing" >
+                 <number>6</number>
+                </property>
+                <item>
+                 <widget class="QComboBox" name="spsiComboBox" >
+                  <item>
+                   <property name="text" >
+                    <string>0</string>
+                   </property>
+                  </item>
+                  <item>
+                   <property name="text" >
+                    <string>1</string>
+                   </property>
+                  </item>
+                  <item>
+                   <property name="text" >
+                    <string>3</string>
+                   </property>
+                  </item>
+                  <item>
+                   <property name="text" >
+                    <string>7</string>
+                   </property>
+                  </item>
+                  <item>
+                   <property name="text" >
+                    <string>15</string>
+                   </property>
+                  </item>
+                  <item>
+                   <property name="text" >
+                    <string>31</string>
+                   </property>
+                  </item>
+                 </widget>
+                </item>
+                <item>
+                 <spacer>
+                  <property name="orientation" >
+                   <enum>Qt::Horizontal</enum>
+                  </property>
+                  <property name="sizeHint" >
+                   <size>
+                    <width>40</width>
+                    <height>20</height>
+                   </size>
+                  </property>
+                 </spacer>
+                </item>
+               </layout>
+              </item>
+             </layout>
+            </item>
+            <item>
+             <layout class="QVBoxLayout" >
+              <property name="margin" >
+               <number>0</number>
+              </property>
+              <property name="spacing" >
+               <number>6</number>
+              </property>
+              <item>
+               <widget class="QCheckBox" name="repeatabilityCheckBox" >
+                <property name="text" >
+                 <string>Enforce Repeatability</string>
+                </property>
+                <property name="checked" >
+                 <bool>true</bool>
+                </property>
+               </widget>
+              </item>
+              <item>
+               <widget class="QCheckBox" name="accessUnitCheckBox" >
+                <property name="text" >
+                 <string>Use Access Unit Delimiters</string>
+                </property>
+               </widget>
+              </item>
+              <item>
+               <widget class="QCheckBox" name="psnrCheckBox" >
+                <property name="text" >
+                 <string>PSNR Computation</string>
+                </property>
+                <property name="checked" >
+                 <bool>true</bool>
+                </property>
+               </widget>
+              </item>
+              <item>
+               <widget class="QCheckBox" name="ssimCheckBox" >
+                <property name="text" >
+                 <string>SSIM Computation</string>
+                </property>
+                <property name="checked" >
+                 <bool>true</bool>
+                </property>
+               </widget>
+              </item>
+             </layout>
+            </item>
+           </layout>
+          </item>
+         </layout>
+        </widget>
+       </item>
+       <item>
+        <widget class="QGroupBox" name="groupBox_5" >
+         <property name="title" >
+          <string>Video Usability Information</string>
+         </property>
+         <layout class="QVBoxLayout" >
+          <property name="margin" >
+           <number>9</number>
+          </property>
+          <property name="spacing" >
+           <number>6</number>
+          </property>
+          <item>
+           <widget class="QLabel" name="label_52" >
+            <property name="text" >
+             <string>Video Usability Information settings are not used by the encoder but are merely suggestions to the playback equipment.  Use at your own risk.</string>
+            </property>
+            <property name="wordWrap" >
+             <bool>true</bool>
+            </property>
+           </widget>
+          </item>
+          <item>
+           <spacer>
+            <property name="orientation" >
+             <enum>Qt::Vertical</enum>
+            </property>
+            <property name="sizeType" >
+             <enum>QSizePolicy::Fixed</enum>
+            </property>
+            <property name="sizeHint" >
+             <size>
+              <width>20</width>
+              <height>4</height>
+             </size>
+            </property>
+           </spacer>
+          </item>
+          <item>
+           <layout class="QVBoxLayout" >
+            <property name="margin" >
+             <number>0</number>
+            </property>
+            <property name="spacing" >
+             <number>6</number>
+            </property>
+            <item>
+             <layout class="QGridLayout" >
+              <property name="margin" >
+               <number>0</number>
+              </property>
+              <property name="spacing" >
+               <number>6</number>
+              </property>
+              <item row="3" column="1" >
+               <layout class="QHBoxLayout" >
+                <property name="margin" >
+                 <number>0</number>
+                </property>
+                <property name="spacing" >
+                 <number>6</number>
+                </property>
+                <item>
+                 <widget class="QComboBox" name="transferCharacteristicsComboBox" >
+                  <item>
+                   <property name="text" >
+                    <string>Undefined</string>
+                   </property>
+                  </item>
+                  <item>
+                   <property name="text" >
+                    <string>BT709</string>
+                   </property>
+                  </item>
+                  <item>
+                   <property name="text" >
+                    <string>BT470M</string>
+                   </property>
+                  </item>
+                  <item>
+                   <property name="text" >
+                    <string>BT470BG</string>
+                   </property>
+                  </item>
+                  <item>
+                   <property name="text" >
+                    <string>Linear</string>
+                   </property>
+                  </item>
+                  <item>
+                   <property name="text" >
+                    <string>LOG100</string>
+                   </property>
+                  </item>
+                  <item>
+                   <property name="text" >
+                    <string>LOG316</string>
+                   </property>
+                  </item>
+                  <item>
+                   <property name="text" >
+                    <string>SMPTEL170M</string>
+                   </property>
+                  </item>
+                  <item>
+                   <property name="text" >
+                    <string>SMPTE240M</string>
+                   </property>
+                  </item>
+                 </widget>
+                </item>
+                <item>
+                 <spacer>
+                  <property name="orientation" >
+                   <enum>Qt::Horizontal</enum>
+                  </property>
+                  <property name="sizeHint" >
+                   <size>
+                    <width>40</width>
+                    <height>20</height>
+                   </size>
+                  </property>
+                 </spacer>
+                </item>
+               </layout>
+              </item>
+              <item row="2" column="0" >
+               <widget class="QLabel" name="label_19" >
+                <property name="text" >
+                 <string>Colour Primaries:</string>
+                </property>
+               </widget>
+              </item>
+              <item row="0" column="1" >
+               <layout class="QHBoxLayout" >
+                <property name="margin" >
+                 <number>0</number>
+                </property>
+                <property name="spacing" >
+                 <number>6</number>
+                </property>
+                <item>
+                 <widget class="QComboBox" name="overscanComboBox" >
+                  <item>
+                   <property name="text" >
+                    <string>Undefined</string>
+                   </property>
+                  </item>
+                  <item>
+                   <property name="text" >
+                    <string>Show</string>
+                   </property>
+                  </item>
+                  <item>
+                   <property name="text" >
+                    <string>Crop</string>
+                   </property>
+                  </item>
+                 </widget>
+                </item>
+                <item>
+                 <spacer>
+                  <property name="orientation" >
+                   <enum>Qt::Horizontal</enum>
+                  </property>
+                  <property name="sizeHint" >
+                   <size>
+                    <width>40</width>
+                    <height>20</height>
+                   </size>
+                  </property>
+                 </spacer>
+                </item>
+               </layout>
+              </item>
+              <item row="4" column="1" >
+               <layout class="QHBoxLayout" >
+                <property name="margin" >
+                 <number>0</number>
+                </property>
+                <property name="spacing" >
+                 <number>6</number>
+                </property>
+                <item>
+                 <widget class="QComboBox" name="colourMatrixComboBox" >
+                  <item>
+                   <property name="text" >
+                    <string>Undefined</string>
+                   </property>
+                  </item>
+                  <item>
+                   <property name="text" >
+                    <string>BT709</string>
+                   </property>
+                  </item>
+                  <item>
+                   <property name="text" >
+                    <string>FCC</string>
+                   </property>
+                  </item>
+                  <item>
+                   <property name="text" >
+                    <string>BT470BG</string>
+                   </property>
+                  </item>
+                  <item>
+                   <property name="text" >
+                    <string>SMPTE170M</string>
+                   </property>
+                  </item>
+                  <item>
+                   <property name="text" >
+                    <string>SMPTE240M</string>
+                   </property>
+                  </item>
+                  <item>
+                   <property name="text" >
+                    <string>GBR</string>
+                   </property>
+                  </item>
+                  <item>
+                   <property name="text" >
+                    <string>YCgCo</string>
+                   </property>
+                  </item>
+                 </widget>
+                </item>
+                <item>
+                 <spacer>
+                  <property name="orientation" >
+                   <enum>Qt::Horizontal</enum>
+                  </property>
+                  <property name="sizeHint" >
+                   <size>
+                    <width>40</width>
+                    <height>20</height>
+                   </size>
+                  </property>
+                 </spacer>
+                </item>
+               </layout>
+              </item>
+              <item row="4" column="0" >
+               <widget class="QLabel" name="label_47" >
+                <property name="text" >
+                 <string>Colour Matrix:</string>
+                </property>
+               </widget>
+              </item>
+              <item row="1" column="1" >
+               <layout class="QHBoxLayout" >
+                <property name="margin" >
+                 <number>0</number>
+                </property>
+                <property name="spacing" >
+                 <number>6</number>
+                </property>
+                <item>
+                 <widget class="QComboBox" name="videoFormatComboBox" >
+                  <property name="currentIndex" >
+                   <number>0</number>
+                  </property>
+                  <item>
+                   <property name="text" >
+                    <string>Undefined</string>
+                   </property>
+                  </item>
+                  <item>
+                   <property name="text" >
+                    <string>Component</string>
+                   </property>
+                  </item>
+                  <item>
+                   <property name="text" >
+                    <string>PAL</string>
+                   </property>
+                  </item>
+                  <item>
+                   <property name="text" >
+                    <string>NTSC</string>
+                   </property>
+                  </item>
+                  <item>
+                   <property name="text" >
+                    <string>SECAM</string>
+                   </property>
+                  </item>
+                  <item>
+                   <property name="text" >
+                    <string>MAC</string>
+                   </property>
+                  </item>
+                 </widget>
+                </item>
+                <item>
+                 <spacer>
+                  <property name="orientation" >
+                   <enum>Qt::Horizontal</enum>
+                  </property>
+                  <property name="sizeHint" >
+                   <size>
+                    <width>40</width>
+                    <height>20</height>
+                   </size>
+                  </property>
+                 </spacer>
+                </item>
+               </layout>
+              </item>
+              <item row="2" column="1" >
+               <layout class="QHBoxLayout" >
+                <property name="margin" >
+                 <number>0</number>
+                </property>
+                <property name="spacing" >
+                 <number>6</number>
+                </property>
+                <item>
+                 <widget class="QComboBox" name="colourPrimariesComboBox" >
+                  <item>
+                   <property name="text" >
+                    <string>Undefined</string>
+                   </property>
+                  </item>
+                  <item>
+                   <property name="text" >
+                    <string>BT709</string>
+                   </property>
+                  </item>
+                  <item>
+                   <property name="text" >
+                    <string>BT470M</string>
+                   </property>
+                  </item>
+                  <item>
+                   <property name="text" >
+                    <string>BT470BG</string>
+                   </property>
+                  </item>
+                  <item>
+                   <property name="text" >
+                    <string>SMPTE170M</string>
+                   </property>
+                  </item>
+                  <item>
+                   <property name="text" >
+                    <string>SMPTE240M</string>
+                   </property>
+                  </item>
+                  <item>
+                   <property name="text" >
+                    <string>Film</string>
+                   </property>
+                  </item>
+                 </widget>
+                </item>
+                <item>
+                 <spacer>
+                  <property name="orientation" >
+                   <enum>Qt::Horizontal</enum>
+                  </property>
+                  <property name="sizeHint" >
+                   <size>
+                    <width>40</width>
+                    <height>20</height>
+                   </size>
+                  </property>
+                 </spacer>
+                </item>
+               </layout>
+              </item>
+              <item row="3" column="0" >
+               <widget class="QLabel" name="label_48" >
+                <property name="text" >
+                 <string>Transfer Characteristics:</string>
+                </property>
+               </widget>
+              </item>
+              <item row="5" column="0" >
+               <widget class="QLabel" name="label_49" >
+                <property name="text" >
+                 <string>Chroma Sample Location:</string>
+                </property>
+               </widget>
+              </item>
+              <item row="5" column="1" >
+               <layout class="QHBoxLayout" >
+                <property name="margin" >
+                 <number>0</number>
+                </property>
+                <property name="spacing" >
+                 <number>6</number>
+                </property>
+                <item>
+                 <widget class="QSpinBox" name="chromaSampleSpinBox" >
+                  <property name="maximum" >
+                   <number>4</number>
+                  </property>
+                 </widget>
+                </item>
+                <item>
+                 <spacer>
+                  <property name="orientation" >
+                   <enum>Qt::Horizontal</enum>
+                  </property>
+                  <property name="sizeHint" >
+                   <size>
+                    <width>40</width>
+                    <height>20</height>
+                   </size>
+                  </property>
+                 </spacer>
+                </item>
+               </layout>
+              </item>
+              <item row="1" column="0" >
+               <widget class="QLabel" name="label_50" >
+                <property name="text" >
+                 <string>Video Format:</string>
+                </property>
+               </widget>
+              </item>
+              <item row="0" column="0" >
+               <widget class="QLabel" name="label_51" >
+                <property name="text" >
+                 <string>Overscan:</string>
+                </property>
+               </widget>
+              </item>
+             </layout>
+            </item>
+            <item>
+             <widget class="QCheckBox" name="fullRangeSamplesCheckBox" >
+              <property name="text" >
+               <string>Full Range Samples</string>
+              </property>
+             </widget>
+            </item>
+           </layout>
+          </item>
+         </layout>
+        </widget>
+       </item>
+       <item>
+        <spacer>
+         <property name="orientation" >
+          <enum>Qt::Vertical</enum>
+         </property>
+         <property name="sizeHint" >
+          <size>
+           <width>20</width>
+           <height>61</height>
+          </size>
+         </property>
+        </spacer>
+       </item>
+      </layout>
+     </widget>
+    </widget>
+   </item>
+   <item>
+    <layout class="QHBoxLayout" >
+     <property name="margin" >
+      <number>0</number>
+     </property>
+     <property name="spacing" >
+      <number>6</number>
+     </property>
+     <item>
+      <spacer>
+       <property name="orientation" >
+        <enum>Qt::Horizontal</enum>
+       </property>
+       <property name="sizeHint" >
+        <size>
+         <width>131</width>
+         <height>31</height>
+        </size>
+       </property>
+      </spacer>
+     </item>
+     <item>
+      <widget class="QPushButton" name="okButton" >
+       <property name="text" >
+        <string>OK</string>
+       </property>
+      </widget>
+     </item>
+     <item>
+      <widget class="QPushButton" name="cancelButton" >
+       <property name="text" >
+        <string>Cancel</string>
+       </property>
+      </widget>
+     </item>
+    </layout>
+   </item>
+  </layout>
+ </widget>
+ <pixmapfunction></pixmapfunction>
+ <tabstops>
+  <tabstop>tabWidget</tabstop>
+  <tabstop>encodingModeComboBox</tabstop>
+  <tabstop>targetRateControlSpinBox</tabstop>
+  <tabstop>quantiserSlider</tabstop>
+  <tabstop>quantiserSpinBox</tabstop>
+  <tabstop>sarCustomRadioButton</tabstop>
+  <tabstop>sarCustomSpinBox1</tabstop>
+  <tabstop>sarCustomSpinBox2</tabstop>
+  <tabstop>sarPredefinedRadioButton</tabstop>
+  <tabstop>sarPredefinedComboBox</tabstop>
+  <tabstop>sarAsInputRadioButton</tabstop>
+  <tabstop>meSlider</tabstop>
+  <tabstop>meSpinBox</tabstop>
+  <tabstop>rdoCheckBox</tabstop>
+  <tabstop>meMethodComboBox</tabstop>
+  <tabstop>mvRangeSpinBox</tabstop>
+  <tabstop>mvLengthCheckBox</tabstop>
+  <tabstop>mvLengthSpinBox</tabstop>
+  <tabstop>minThreadBufferCheckBox</tabstop>
+  <tabstop>minThreadBufferSpinBox</tabstop>
+  <tabstop>predictModeComboBox</tabstop>
+  <tabstop>predictSizeComboBox</tabstop>
+  <tabstop>weightedPredictCheckBox</tabstop>
+  <tabstop>dct8x8CheckBox</tabstop>
+  <tabstop>p8x8CheckBox</tabstop>
+  <tabstop>b8x8CheckBox</tabstop>
+  <tabstop>p4x4CheckBox</tabstop>
+  <tabstop>i8x8CheckBox</tabstop>
+  <tabstop>i4x4CheckBox</tabstop>
+  <tabstop>cabacCheckBox</tabstop>
+  <tabstop>interlacedCheckBox</tabstop>
+  <tabstop>loopFilterCheckBox</tabstop>
+  <tabstop>alphaC0SpinBox</tabstop>
+  <tabstop>betaSpinBox</tabstop>
+  <tabstop>maxBFramesSpinBox</tabstop>
+  <tabstop>BFrameBiasSpinBox</tabstop>
+  <tabstop>refFramesSpinBox</tabstop>
+  <tabstop>bFrameRefCheckBox</tabstop>
+  <tabstop>adaptiveBFrameCheckBox</tabstop>
+  <tabstop>maxGopSizeSpinBox</tabstop>
+  <tabstop>minGopSizeSpinBox</tabstop>
+  <tabstop>IFrameThresholdSpinBox</tabstop>
+  <tabstop>scenecutDetectionCheckBox</tabstop>
+  <tabstop>mixedRefsCheckBox</tabstop>
+  <tabstop>chromaMotionEstCheckBox</tabstop>
+  <tabstop>bFrameMotionEstCheckBox</tabstop>
+  <tabstop>trellisCheckBox</tabstop>
+  <tabstop>trellisComboBox</tabstop>
+  <tabstop>fastPSkipCheckBox</tabstop>
+  <tabstop>dctDecimateCheckBox</tabstop>
+  <tabstop>noiseReductionSpinBox</tabstop>
+  <tabstop>intraLumaSpinBox</tabstop>
+  <tabstop>interLumaSpinBox</tabstop>
+  <tabstop>matrixFlatRadioButton</tabstop>
+  <tabstop>matrixJvtRadioButton</tabstop>
+  <tabstop>matrixCustomRadioButton</tabstop>
+  <tabstop>matrixCustomEditButton</tabstop>
+  <tabstop>quantiserMinSpinBox</tabstop>
+  <tabstop>quantiserMaxSpinBox</tabstop>
+  <tabstop>quantiserMaxStepSpinBox</tabstop>
+  <tabstop>quantiserIpRatioSpinBox</tabstop>
+  <tabstop>quantiserPbRatioSpinBox</tabstop>
+  <tabstop>chromaLumaOffsetSpinBox</tabstop>
+  <tabstop>quantiserCurveCompressSpinBox</tabstop>
+  <tabstop>quantiserBeforeCompressSpinBox</tabstop>
+  <tabstop>quantiserAfterCompressSpinBox</tabstop>
+  <tabstop>vbvMaxBitrateSpinBox</tabstop>
+  <tabstop>vbvBufferSizeSpinBox</tabstop>
+  <tabstop>vbvBufferOccupancySpinBox</tabstop>
+  <tabstop>listView</tabstop>
+  <tabstop>zoneAddButton</tabstop>
+  <tabstop>zoneAddStringButton</tabstop>
+  <tabstop>zoneEditButton</tabstop>
+  <tabstop>zoneDeleteButton</tabstop>
+  <tabstop>frameTypeFileLineEdit</tabstop>
+  <tabstop>frameTypeFileButton</tabstop>
+  <tabstop>rateControlEqLineEdit</tabstop>
+  <tabstop>idcLevelComboBox</tabstop>
+  <tabstop>spsiComboBox</tabstop>
+  <tabstop>repeatabilityCheckBox</tabstop>
+  <tabstop>accessUnitCheckBox</tabstop>
+  <tabstop>psnrCheckBox</tabstop>
+  <tabstop>ssimCheckBox</tabstop>
+  <tabstop>overscanComboBox</tabstop>
+  <tabstop>videoFormatComboBox</tabstop>
+  <tabstop>colourPrimariesComboBox</tabstop>
+  <tabstop>transferCharacteristicsComboBox</tabstop>
+  <tabstop>colourMatrixComboBox</tabstop>
+  <tabstop>chromaSampleSpinBox</tabstop>
+  <tabstop>fullRangeSamplesCheckBox</tabstop>
+  <tabstop>okButton</tabstop>
+  <tabstop>cancelButton</tabstop>
+ </tabstops>
+ <resources/>
+ <connections>
+  <connection>
+   <sender>okButton</sender>
+   <signal>clicked()</signal>
+   <receiver>x264ConfigDialog</receiver>
+   <slot>accept()</slot>
+   <hints>
+    <hint type="sourcelabel" >
+     <x>354</x>
+     <y>635</y>
+    </hint>
+    <hint type="destinationlabel" >
+     <x>246</x>
+     <y>344</y>
+    </hint>
+   </hints>
+  </connection>
+  <connection>
+   <sender>cancelButton</sender>
+   <signal>clicked()</signal>
+   <receiver>x264ConfigDialog</receiver>
+   <slot>reject()</slot>
+   <hints>
+    <hint type="sourcelabel" >
+     <x>437</x>
+     <y>635</y>
+    </hint>
+    <hint type="destinationlabel" >
+     <x>246</x>
+     <y>344</y>
+    </hint>
+   </hints>
+  </connection>
+  <connection>
+   <sender>sarPredefinedRadioButton</sender>
+   <signal>toggled(bool)</signal>
+   <receiver>sarPredefinedComboBox</receiver>
+   <slot>setEnabled(bool)</slot>
+   <hints>
+    <hint type="sourcelabel" >
+     <x>108</x>
+     <y>290</y>
+    </hint>
+    <hint type="destinationlabel" >
+     <x>243</x>
+     <y>290</y>
+    </hint>
+   </hints>
+  </connection>
+  <connection>
+   <sender>sarCustomRadioButton</sender>
+   <signal>toggled(bool)</signal>
+   <receiver>sarCustomSpinBox1</receiver>
+   <slot>setEnabled(bool)</slot>
+   <hints>
+    <hint type="sourcelabel" >
+     <x>108</x>
+     <y>262</y>
+    </hint>
+    <hint type="destinationlabel" >
+     <x>209</x>
+     <y>262</y>
+    </hint>
+   </hints>
+  </connection>
+  <connection>
+   <sender>sarCustomRadioButton</sender>
+   <signal>toggled(bool)</signal>
+   <receiver>sarCustomSpinBox2</receiver>
+   <slot>setEnabled(bool)</slot>
+   <hints>
+    <hint type="sourcelabel" >
+     <x>108</x>
+     <y>262</y>
+    </hint>
+    <hint type="destinationlabel" >
+     <x>272</x>
+     <y>262</y>
+    </hint>
+   </hints>
+  </connection>
+  <connection>
+   <sender>sarCustomRadioButton</sender>
+   <signal>toggled(bool)</signal>
+   <receiver>sarCustomLabel</receiver>
+   <slot>setEnabled(bool)</slot>
+   <hints>
+    <hint type="sourcelabel" >
+     <x>108</x>
+     <y>262</y>
+    </hint>
+    <hint type="destinationlabel" >
+     <x>240</x>
+     <y>262</y>
+    </hint>
+   </hints>
+  </connection>
+  <connection>
+   <sender>mvLengthCheckBox</sender>
+   <signal>toggled(bool)</signal>
+   <receiver>mvLengthSpinBox</receiver>
+   <slot>setEnabled(bool)</slot>
+   <hints>
+    <hint type="sourcelabel" >
+     <x>133</x>
+     <y>261</y>
+    </hint>
+    <hint type="destinationlabel" >
+     <x>256</x>
+     <y>261</y>
+    </hint>
+   </hints>
+  </connection>
+  <connection>
+   <sender>minThreadBufferCheckBox</sender>
+   <signal>toggled(bool)</signal>
+   <receiver>minThreadBufferSpinBox</receiver>
+   <slot>setEnabled(bool)</slot>
+   <hints>
+    <hint type="sourcelabel" >
+     <x>133</x>
+     <y>289</y>
+    </hint>
+    <hint type="destinationlabel" >
+     <x>256</x>
+     <y>289</y>
+    </hint>
+   </hints>
+  </connection>
+  <connection>
+   <sender>p8x8CheckBox</sender>
+   <signal>toggled(bool)</signal>
+   <receiver>p4x4CheckBox</receiver>
+   <slot>setEnabled(bool)</slot>
+   <hints>
+    <hint type="sourcelabel" >
+     <x>245</x>
+     <y>476</y>
+    </hint>
+    <hint type="destinationlabel" >
+     <x>245</x>
+     <y>524</y>
+    </hint>
+   </hints>
+  </connection>
+  <connection>
+   <sender>dct8x8CheckBox</sender>
+   <signal>toggled(bool)</signal>
+   <receiver>i8x8CheckBox</receiver>
+   <slot>setEnabled(bool)</slot>
+   <hints>
+    <hint type="sourcelabel" >
+     <x>245</x>
+     <y>452</y>
+    </hint>
+    <hint type="destinationlabel" >
+     <x>245</x>
+     <y>548</y>
+    </hint>
+   </hints>
+  </connection>
+  <connection>
+   <sender>loopFilterCheckBox</sender>
+   <signal>toggled(bool)</signal>
+   <receiver>alphaC0Label</receiver>
+   <slot>setEnabled(bool)</slot>
+   <hints>
+    <hint type="sourcelabel" >
+     <x>245</x>
+     <y>185</y>
+    </hint>
+    <hint type="destinationlabel" >
+     <x>87</x>
+     <y>212</y>
+    </hint>
+   </hints>
+  </connection>
+  <connection>
+   <sender>loopFilterCheckBox</sender>
+   <signal>toggled(bool)</signal>
+   <receiver>alphaC0SpinBox</receiver>
+   <slot>setEnabled(bool)</slot>
+   <hints>
+    <hint type="sourcelabel" >
+     <x>245</x>
+     <y>185</y>
+    </hint>
+    <hint type="destinationlabel" >
+     <x>137</x>
+     <y>212</y>
+    </hint>
+   </hints>
+  </connection>
+  <connection>
+   <sender>loopFilterCheckBox</sender>
+   <signal>toggled(bool)</signal>
+   <receiver>betaLabel</receiver>
+   <slot>setEnabled(bool)</slot>
+   <hints>
+    <hint type="sourcelabel" >
+     <x>245</x>
+     <y>185</y>
+    </hint>
+    <hint type="destinationlabel" >
+     <x>194</x>
+     <y>212</y>
+    </hint>
+   </hints>
+  </connection>
+  <connection>
+   <sender>loopFilterCheckBox</sender>
+   <signal>toggled(bool)</signal>
+   <receiver>betaSpinBox</receiver>
+   <slot>setEnabled(bool)</slot>
+   <hints>
+    <hint type="sourcelabel" >
+     <x>245</x>
+     <y>185</y>
+    </hint>
+    <hint type="destinationlabel" >
+     <x>235</x>
+     <y>212</y>
+    </hint>
+   </hints>
+  </connection>
+  <connection>
+   <sender>trellisCheckBox</sender>
+   <signal>toggled(bool)</signal>
+   <receiver>trellisComboBox</receiver>
+   <slot>setEnabled(bool)</slot>
+   <hints>
+    <hint type="sourcelabel" >
+     <x>98</x>
+     <y>176</y>
+    </hint>
+    <hint type="destinationlabel" >
+     <x>227</x>
+     <y>176</y>
+    </hint>
+   </hints>
+  </connection>
+  <connection>
+   <sender>matrixCustomRadioButton</sender>
+   <signal>toggled(bool)</signal>
+   <receiver>matrixCustomEditButton</receiver>
+   <slot>setEnabled(bool)</slot>
+   <hints>
+    <hint type="sourcelabel" >
+     <x>88</x>
+     <y>458</y>
+    </hint>
+    <hint type="destinationlabel" >
+     <x>413</x>
+     <y>459</y>
+    </hint>
+   </hints>
+  </connection>
+  <connection>
+   <sender>sarAsInputRadioButton</sender>
+   <signal>toggled(bool)</signal>
+   <receiver>sarAsInputLabel</receiver>
+   <slot>setEnabled(bool)</slot>
+   <hints>
+    <hint type="sourcelabel" >
+     <x>108</x>
+     <y>318</y>
+    </hint>
+    <hint type="destinationlabel" >
+     <x>184</x>
+     <y>317</y>
+    </hint>
+   </hints>
+  </connection>
+ </connections>
+</ui>

Added: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/x264_matrix.ui
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/x264_matrix.ui	2008-04-02 23:54:12 UTC (rev 3964)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/x264_matrix.ui	2008-04-03 00:17:06 UTC (rev 3965)
@@ -0,0 +1,2626 @@
+<ui version="4.0" >
+ <author></author>
+ <comment></comment>
+ <exportmacro></exportmacro>
+ <class>x264CustomMatrixDialog</class>
+ <widget class="QDialog" name="x264CustomMatrixDialog" >
+  <property name="geometry" >
+   <rect>
+    <x>0</x>
+    <y>0</y>
+    <width>509</width>
+    <height>315</height>
+   </rect>
+  </property>
+  <property name="windowTitle" >
+   <string>x264 Custom Matrix</string>
+  </property>
+  <layout class="QVBoxLayout" >
+   <property name="margin" >
+    <number>9</number>
+   </property>
+   <property name="spacing" >
+    <number>6</number>
+   </property>
+   <item>
+    <widget class="QTabWidget" name="tabWidget" >
+     <property name="currentIndex" >
+      <number>0</number>
+     </property>
+     <widget class="QWidget" name="tab" >
+      <attribute name="title" >
+       <string>Intra 4x4</string>
+      </attribute>
+      <layout class="QVBoxLayout" >
+       <property name="margin" >
+        <number>9</number>
+       </property>
+       <property name="spacing" >
+        <number>6</number>
+       </property>
+       <item>
+        <layout class="QHBoxLayout" >
+         <property name="margin" >
+          <number>0</number>
+         </property>
+         <property name="spacing" >
+          <number>6</number>
+         </property>
+         <item>
+          <layout class="QVBoxLayout" >
+           <property name="margin" >
+            <number>0</number>
+           </property>
+           <property name="spacing" >
+            <number>6</number>
+           </property>
+           <item>
+            <widget class="QLabel" name="label" >
+             <property name="text" >
+              <string>Luma:</string>
+             </property>
+            </widget>
+           </item>
+           <item>
+            <spacer>
+             <property name="orientation" >
+              <enum>Qt::Vertical</enum>
+             </property>
+             <property name="sizeHint" >
+              <size>
+               <width>20</width>
+               <height>40</height>
+              </size>
+             </property>
+            </spacer>
+           </item>
+          </layout>
+         </item>
+         <item>
+          <layout class="QGridLayout" >
+           <property name="margin" >
+            <number>0</number>
+           </property>
+           <property name="spacing" >
+            <number>6</number>
+           </property>
+           <item row="1" column="7" >
+            <widget class="QSpinBox" name="intra4x4Luma16SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="0" column="3" >
+            <widget class="QSpinBox" name="intra4x4Luma4SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="1" column="3" >
+            <widget class="QSpinBox" name="intra4x4Luma12SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="0" column="6" >
+            <widget class="QSpinBox" name="intra4x4Luma7SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="1" column="5" >
+            <widget class="QSpinBox" name="intra4x4Luma14SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="1" column="0" >
+            <widget class="QSpinBox" name="intra4x4Luma9SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="1" column="4" >
+            <widget class="QSpinBox" name="intra4x4Luma13SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="1" column="2" >
+            <widget class="QSpinBox" name="intra4x4Luma11SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="0" column="5" >
+            <widget class="QSpinBox" name="intra4x4Luma6SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="1" column="6" >
+            <widget class="QSpinBox" name="intra4x4Luma15SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="0" column="2" >
+            <widget class="QSpinBox" name="intra4x4Luma3SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="0" column="0" >
+            <widget class="QSpinBox" name="intra4x4Luma1SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="0" column="7" >
+            <widget class="QSpinBox" name="intra4x4Luma8SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="1" column="1" >
+            <widget class="QSpinBox" name="intra4x4Luma10SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="0" column="1" >
+            <widget class="QSpinBox" name="intra4x4Luma2SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="0" column="4" >
+            <widget class="QSpinBox" name="intra4x4Luma5SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+          </layout>
+         </item>
+        </layout>
+       </item>
+       <item>
+        <layout class="QHBoxLayout" >
+         <property name="margin" >
+          <number>0</number>
+         </property>
+         <property name="spacing" >
+          <number>6</number>
+         </property>
+         <item>
+          <layout class="QVBoxLayout" >
+           <property name="margin" >
+            <number>0</number>
+           </property>
+           <property name="spacing" >
+            <number>6</number>
+           </property>
+           <item>
+            <widget class="QLabel" name="label_2" >
+             <property name="text" >
+              <string>Chroma U/V:</string>
+             </property>
+            </widget>
+           </item>
+           <item>
+            <spacer>
+             <property name="orientation" >
+              <enum>Qt::Vertical</enum>
+             </property>
+             <property name="sizeHint" >
+              <size>
+               <width>20</width>
+               <height>40</height>
+              </size>
+             </property>
+            </spacer>
+           </item>
+          </layout>
+         </item>
+         <item>
+          <layout class="QGridLayout" >
+           <property name="margin" >
+            <number>0</number>
+           </property>
+           <property name="spacing" >
+            <number>6</number>
+           </property>
+           <item row="1" column="7" >
+            <widget class="QSpinBox" name="intraChroma16SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="0" column="3" >
+            <widget class="QSpinBox" name="intraChroma4SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="1" column="3" >
+            <widget class="QSpinBox" name="intraChroma12SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="0" column="6" >
+            <widget class="QSpinBox" name="intraChroma7SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="1" column="5" >
+            <widget class="QSpinBox" name="intraChroma14SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="1" column="0" >
+            <widget class="QSpinBox" name="intraChroma9SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="1" column="4" >
+            <widget class="QSpinBox" name="intraChroma13SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="1" column="2" >
+            <widget class="QSpinBox" name="intraChroma11SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="0" column="5" >
+            <widget class="QSpinBox" name="intraChroma6SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="1" column="6" >
+            <widget class="QSpinBox" name="intraChroma15SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="0" column="2" >
+            <widget class="QSpinBox" name="intraChroma3SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="0" column="0" >
+            <widget class="QSpinBox" name="intraChroma1SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="0" column="7" >
+            <widget class="QSpinBox" name="intraChroma8SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="1" column="1" >
+            <widget class="QSpinBox" name="intraChroma10SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="0" column="1" >
+            <widget class="QSpinBox" name="intraChroma2SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="0" column="4" >
+            <widget class="QSpinBox" name="intraChroma5SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+          </layout>
+         </item>
+        </layout>
+       </item>
+       <item>
+        <spacer>
+         <property name="orientation" >
+          <enum>Qt::Vertical</enum>
+         </property>
+         <property name="sizeHint" >
+          <size>
+           <width>20</width>
+           <height>40</height>
+          </size>
+         </property>
+        </spacer>
+       </item>
+      </layout>
+     </widget>
+     <widget class="QWidget" name="tab_2" >
+      <attribute name="title" >
+       <string>Inter 4x4</string>
+      </attribute>
+      <layout class="QVBoxLayout" >
+       <property name="margin" >
+        <number>9</number>
+       </property>
+       <property name="spacing" >
+        <number>6</number>
+       </property>
+       <item>
+        <layout class="QHBoxLayout" >
+         <property name="margin" >
+          <number>0</number>
+         </property>
+         <property name="spacing" >
+          <number>6</number>
+         </property>
+         <item>
+          <layout class="QVBoxLayout" >
+           <property name="margin" >
+            <number>0</number>
+           </property>
+           <property name="spacing" >
+            <number>6</number>
+           </property>
+           <item>
+            <widget class="QLabel" name="label_4" >
+             <property name="text" >
+              <string>Luma:</string>
+             </property>
+            </widget>
+           </item>
+           <item>
+            <spacer>
+             <property name="orientation" >
+              <enum>Qt::Vertical</enum>
+             </property>
+             <property name="sizeHint" >
+              <size>
+               <width>20</width>
+               <height>40</height>
+              </size>
+             </property>
+            </spacer>
+           </item>
+          </layout>
+         </item>
+         <item>
+          <layout class="QGridLayout" >
+           <property name="margin" >
+            <number>0</number>
+           </property>
+           <property name="spacing" >
+            <number>6</number>
+           </property>
+           <item row="1" column="7" >
+            <widget class="QSpinBox" name="inter4x4Luma16SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="0" column="3" >
+            <widget class="QSpinBox" name="inter4x4Luma4SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="1" column="3" >
+            <widget class="QSpinBox" name="inter4x4Luma12SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="0" column="6" >
+            <widget class="QSpinBox" name="inter4x4Luma7SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="1" column="5" >
+            <widget class="QSpinBox" name="inter4x4Luma14SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="1" column="0" >
+            <widget class="QSpinBox" name="inter4x4Luma9SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="1" column="4" >
+            <widget class="QSpinBox" name="inter4x4Luma13SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="1" column="2" >
+            <widget class="QSpinBox" name="inter4x4Luma11SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="0" column="5" >
+            <widget class="QSpinBox" name="inter4x4Luma6SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="1" column="6" >
+            <widget class="QSpinBox" name="inter4x4Luma15SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="0" column="2" >
+            <widget class="QSpinBox" name="inter4x4Luma3SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="0" column="0" >
+            <widget class="QSpinBox" name="inter4x4Luma1SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="0" column="7" >
+            <widget class="QSpinBox" name="inter4x4Luma8SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="1" column="1" >
+            <widget class="QSpinBox" name="inter4x4Luma10SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="0" column="1" >
+            <widget class="QSpinBox" name="inter4x4Luma2SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="0" column="4" >
+            <widget class="QSpinBox" name="inter4x4Luma5SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+          </layout>
+         </item>
+        </layout>
+       </item>
+       <item>
+        <layout class="QHBoxLayout" >
+         <property name="margin" >
+          <number>0</number>
+         </property>
+         <property name="spacing" >
+          <number>6</number>
+         </property>
+         <item>
+          <layout class="QVBoxLayout" >
+           <property name="margin" >
+            <number>0</number>
+           </property>
+           <property name="spacing" >
+            <number>6</number>
+           </property>
+           <item>
+            <widget class="QLabel" name="label_5" >
+             <property name="text" >
+              <string>Chroma U/V:</string>
+             </property>
+            </widget>
+           </item>
+           <item>
+            <spacer>
+             <property name="orientation" >
+              <enum>Qt::Vertical</enum>
+             </property>
+             <property name="sizeHint" >
+              <size>
+               <width>20</width>
+               <height>40</height>
+              </size>
+             </property>
+            </spacer>
+           </item>
+          </layout>
+         </item>
+         <item>
+          <layout class="QGridLayout" >
+           <property name="margin" >
+            <number>0</number>
+           </property>
+           <property name="spacing" >
+            <number>6</number>
+           </property>
+           <item row="1" column="7" >
+            <widget class="QSpinBox" name="interChroma16SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="0" column="3" >
+            <widget class="QSpinBox" name="interChroma4SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="1" column="3" >
+            <widget class="QSpinBox" name="interChroma12SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="0" column="6" >
+            <widget class="QSpinBox" name="interChroma7SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="1" column="5" >
+            <widget class="QSpinBox" name="interChroma14SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="1" column="0" >
+            <widget class="QSpinBox" name="interChroma9SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="1" column="4" >
+            <widget class="QSpinBox" name="interChroma13SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="1" column="2" >
+            <widget class="QSpinBox" name="interChroma11SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="0" column="5" >
+            <widget class="QSpinBox" name="interChroma6SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="1" column="6" >
+            <widget class="QSpinBox" name="interChroma15SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="0" column="2" >
+            <widget class="QSpinBox" name="interChroma3SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="0" column="0" >
+            <widget class="QSpinBox" name="interChroma1SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="0" column="7" >
+            <widget class="QSpinBox" name="interChroma8SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="1" column="1" >
+            <widget class="QSpinBox" name="interChroma10SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="0" column="1" >
+            <widget class="QSpinBox" name="interChroma2SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="0" column="4" >
+            <widget class="QSpinBox" name="interChroma5SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+          </layout>
+         </item>
+        </layout>
+       </item>
+       <item>
+        <spacer>
+         <property name="orientation" >
+          <enum>Qt::Vertical</enum>
+         </property>
+         <property name="sizeHint" >
+          <size>
+           <width>20</width>
+           <height>40</height>
+          </size>
+         </property>
+        </spacer>
+       </item>
+      </layout>
+     </widget>
+     <widget class="QWidget" name="tab_3" >
+      <attribute name="title" >
+       <string>Intra 8x8</string>
+      </attribute>
+      <layout class="QVBoxLayout" >
+       <property name="margin" >
+        <number>9</number>
+       </property>
+       <property name="spacing" >
+        <number>6</number>
+       </property>
+       <item>
+        <layout class="QHBoxLayout" >
+         <property name="margin" >
+          <number>0</number>
+         </property>
+         <property name="spacing" >
+          <number>6</number>
+         </property>
+         <item>
+          <layout class="QVBoxLayout" >
+           <property name="margin" >
+            <number>0</number>
+           </property>
+           <property name="spacing" >
+            <number>6</number>
+           </property>
+           <item>
+            <widget class="QLabel" name="label_7" >
+             <property name="text" >
+              <string>Luma:</string>
+             </property>
+            </widget>
+           </item>
+           <item>
+            <spacer>
+             <property name="orientation" >
+              <enum>Qt::Vertical</enum>
+             </property>
+             <property name="sizeHint" >
+              <size>
+               <width>20</width>
+               <height>40</height>
+              </size>
+             </property>
+            </spacer>
+           </item>
+          </layout>
+         </item>
+         <item>
+          <layout class="QGridLayout" >
+           <property name="margin" >
+            <number>0</number>
+           </property>
+           <property name="spacing" >
+            <number>6</number>
+           </property>
+           <item row="4" column="7" >
+            <widget class="QSpinBox" name="intra8x8Luma40SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="6" column="6" >
+            <widget class="QSpinBox" name="intra8x8Luma55SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="5" column="7" >
+            <widget class="QSpinBox" name="intra8x8Luma48SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="2" column="5" >
+            <widget class="QSpinBox" name="intra8x8Luma22SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="4" column="0" >
+            <widget class="QSpinBox" name="intra8x8Luma33SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="7" column="3" >
+            <widget class="QSpinBox" name="intra8x8Luma60SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="3" column="6" >
+            <widget class="QSpinBox" name="intra8x8Luma31SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="3" column="7" >
+            <widget class="QSpinBox" name="intra8x8Luma32SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="7" column="7" >
+            <widget class="QSpinBox" name="intra8x8Luma64SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="0" column="4" >
+            <widget class="QSpinBox" name="intra8x8Luma5SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="0" column="1" >
+            <widget class="QSpinBox" name="intra8x8Luma2SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="1" column="1" >
+            <widget class="QSpinBox" name="intra8x8Luma10SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="0" column="3" >
+            <widget class="QSpinBox" name="intra8x8Luma4SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="0" column="7" >
+            <widget class="QSpinBox" name="intra8x8Luma8SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="3" column="4" >
+            <widget class="QSpinBox" name="intra8x8Luma29SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="3" column="0" >
+            <widget class="QSpinBox" name="intra8x8Luma25SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="0" column="0" >
+            <widget class="QSpinBox" name="intra8x8Luma1SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="6" column="4" >
+            <widget class="QSpinBox" name="intra8x8Luma53SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="0" column="2" >
+            <widget class="QSpinBox" name="intra8x8Luma3SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="6" column="1" >
+            <widget class="QSpinBox" name="intra8x8Luma50SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="1" column="6" >
+            <widget class="QSpinBox" name="intra8x8Luma15SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="7" column="1" >
+            <widget class="QSpinBox" name="intra8x8Luma58SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="0" column="5" >
+            <widget class="QSpinBox" name="intra8x8Luma6SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="6" column="7" >
+            <widget class="QSpinBox" name="intra8x8Luma56SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="1" column="2" >
+            <widget class="QSpinBox" name="intra8x8Luma11SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="6" column="0" >
+            <widget class="QSpinBox" name="intra8x8Luma49SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="1" column="4" >
+            <widget class="QSpinBox" name="intra8x8Luma13SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="6" column="2" >
+            <widget class="QSpinBox" name="intra8x8Luma51SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="1" column="0" >
+            <widget class="QSpinBox" name="intra8x8Luma9SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="7" column="6" >
+            <widget class="QSpinBox" name="intra8x8Luma63SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="1" column="5" >
+            <widget class="QSpinBox" name="intra8x8Luma14SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="6" column="5" >
+            <widget class="QSpinBox" name="intra8x8Luma54SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="0" column="6" >
+            <widget class="QSpinBox" name="intra8x8Luma7SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="7" column="2" >
+            <widget class="QSpinBox" name="intra8x8Luma59SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="1" column="3" >
+            <widget class="QSpinBox" name="intra8x8Luma12SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="7" column="4" >
+            <widget class="QSpinBox" name="intra8x8Luma61SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="2" column="4" >
+            <widget class="QSpinBox" name="intra8x8Luma21SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="7" column="0" >
+            <widget class="QSpinBox" name="intra8x8Luma57SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="2" column="1" >
+            <widget class="QSpinBox" name="intra8x8Luma18SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="7" column="5" >
+            <widget class="QSpinBox" name="intra8x8Luma62SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="3" column="1" >
+            <widget class="QSpinBox" name="intra8x8Luma26SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="2" column="3" >
+            <widget class="QSpinBox" name="intra8x8Luma20SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="2" column="7" >
+            <widget class="QSpinBox" name="intra8x8Luma24SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="2" column="0" >
+            <widget class="QSpinBox" name="intra8x8Luma17SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="1" column="7" >
+            <widget class="QSpinBox" name="intra8x8Luma16SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="2" column="2" >
+            <widget class="QSpinBox" name="intra8x8Luma19SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="4" column="4" >
+            <widget class="QSpinBox" name="intra8x8Luma37SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="3" column="2" >
+            <widget class="QSpinBox" name="intra8x8Luma27SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="4" column="1" >
+            <widget class="QSpinBox" name="intra8x8Luma34SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="4" column="3" >
+            <widget class="QSpinBox" name="intra8x8Luma36SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="3" column="5" >
+            <widget class="QSpinBox" name="intra8x8Luma30SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="5" column="1" >
+            <widget class="QSpinBox" name="intra8x8Luma42SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="2" column="6" >
+            <widget class="QSpinBox" name="intra8x8Luma23SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="4" column="2" >
+            <widget class="QSpinBox" name="intra8x8Luma35SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="3" column="3" >
+            <widget class="QSpinBox" name="intra8x8Luma28SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="5" column="6" >
+            <widget class="QSpinBox" name="intra8x8Luma47SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="4" column="5" >
+            <widget class="QSpinBox" name="intra8x8Luma38SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="5" column="2" >
+            <widget class="QSpinBox" name="intra8x8Luma43SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="6" column="3" >
+            <widget class="QSpinBox" name="intra8x8Luma52SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="5" column="4" >
+            <widget class="QSpinBox" name="intra8x8Luma45SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="5" column="0" >
+            <widget class="QSpinBox" name="intra8x8Luma41SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="5" column="5" >
+            <widget class="QSpinBox" name="intra8x8Luma46SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="4" column="6" >
+            <widget class="QSpinBox" name="intra8x8Luma39SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="5" column="3" >
+            <widget class="QSpinBox" name="intra8x8Luma44SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+          </layout>
+         </item>
+        </layout>
+       </item>
+      </layout>
+     </widget>
+     <widget class="QWidget" name="tab_4" >
+      <attribute name="title" >
+       <string>Inter 8x8</string>
+      </attribute>
+      <layout class="QVBoxLayout" >
+       <property name="margin" >
+        <number>9</number>
+       </property>
+       <property name="spacing" >
+        <number>6</number>
+       </property>
+       <item>
+        <layout class="QHBoxLayout" >
+         <property name="margin" >
+          <number>0</number>
+         </property>
+         <property name="spacing" >
+          <number>6</number>
+         </property>
+         <item>
+          <layout class="QVBoxLayout" >
+           <property name="margin" >
+            <number>0</number>
+           </property>
+           <property name="spacing" >
+            <number>6</number>
+           </property>
+           <item>
+            <widget class="QLabel" name="label_8" >
+             <property name="text" >
+              <string>Luma:</string>
+             </property>
+            </widget>
+           </item>
+           <item>
+            <spacer>
+             <property name="orientation" >
+              <enum>Qt::Vertical</enum>
+             </property>
+             <property name="sizeHint" >
+              <size>
+               <width>20</width>
+               <height>40</height>
+              </size>
+             </property>
+            </spacer>
+           </item>
+          </layout>
+         </item>
+         <item>
+          <layout class="QGridLayout" >
+           <property name="margin" >
+            <number>0</number>
+           </property>
+           <property name="spacing" >
+            <number>6</number>
+           </property>
+           <item row="4" column="7" >
+            <widget class="QSpinBox" name="inter8x8Luma40SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="6" column="6" >
+            <widget class="QSpinBox" name="inter8x8Luma55SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="5" column="7" >
+            <widget class="QSpinBox" name="inter8x8Luma48SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="2" column="5" >
+            <widget class="QSpinBox" name="inter8x8Luma22SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="4" column="0" >
+            <widget class="QSpinBox" name="inter8x8Luma33SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="7" column="3" >
+            <widget class="QSpinBox" name="inter8x8Luma60SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="3" column="6" >
+            <widget class="QSpinBox" name="inter8x8Luma31SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="3" column="7" >
+            <widget class="QSpinBox" name="inter8x8Luma32SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="7" column="7" >
+            <widget class="QSpinBox" name="inter8x8Luma64SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="0" column="4" >
+            <widget class="QSpinBox" name="inter8x8Luma5SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="0" column="1" >
+            <widget class="QSpinBox" name="inter8x8Luma2SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="1" column="1" >
+            <widget class="QSpinBox" name="inter8x8Luma10SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="0" column="3" >
+            <widget class="QSpinBox" name="inter8x8Luma4SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="0" column="7" >
+            <widget class="QSpinBox" name="inter8x8Luma8SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="3" column="4" >
+            <widget class="QSpinBox" name="inter8x8Luma29SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="3" column="0" >
+            <widget class="QSpinBox" name="inter8x8Luma25SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="0" column="0" >
+            <widget class="QSpinBox" name="inter8x8Luma1SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="6" column="4" >
+            <widget class="QSpinBox" name="inter8x8Luma53SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="0" column="2" >
+            <widget class="QSpinBox" name="inter8x8Luma3SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="6" column="1" >
+            <widget class="QSpinBox" name="inter8x8Luma50SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="1" column="6" >
+            <widget class="QSpinBox" name="inter8x8Luma15SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="7" column="1" >
+            <widget class="QSpinBox" name="inter8x8Luma58SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="0" column="5" >
+            <widget class="QSpinBox" name="inter8x8Luma6SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="6" column="7" >
+            <widget class="QSpinBox" name="inter8x8Luma56SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="1" column="2" >
+            <widget class="QSpinBox" name="inter8x8Luma11SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="6" column="0" >
+            <widget class="QSpinBox" name="inter8x8Luma49SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="1" column="4" >
+            <widget class="QSpinBox" name="inter8x8Luma13SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="6" column="2" >
+            <widget class="QSpinBox" name="inter8x8Luma51SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="1" column="0" >
+            <widget class="QSpinBox" name="inter8x8Luma9SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="7" column="6" >
+            <widget class="QSpinBox" name="inter8x8Luma63SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="1" column="5" >
+            <widget class="QSpinBox" name="inter8x8Luma14SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="6" column="5" >
+            <widget class="QSpinBox" name="inter8x8Luma54SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="0" column="6" >
+            <widget class="QSpinBox" name="inter8x8Luma7SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="7" column="2" >
+            <widget class="QSpinBox" name="inter8x8Luma59SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="1" column="3" >
+            <widget class="QSpinBox" name="inter8x8Luma12SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="7" column="4" >
+            <widget class="QSpinBox" name="inter8x8Luma61SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="2" column="4" >
+            <widget class="QSpinBox" name="inter8x8Luma21SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="7" column="0" >
+            <widget class="QSpinBox" name="inter8x8Luma57SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="2" column="1" >
+            <widget class="QSpinBox" name="inter8x8Luma18SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="7" column="5" >
+            <widget class="QSpinBox" name="inter8x8Luma62SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="3" column="1" >
+            <widget class="QSpinBox" name="inter8x8Luma26SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="2" column="3" >
+            <widget class="QSpinBox" name="inter8x8Luma20SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="2" column="7" >
+            <widget class="QSpinBox" name="inter8x8Luma24SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="2" column="0" >
+            <widget class="QSpinBox" name="inter8x8Luma17SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="1" column="7" >
+            <widget class="QSpinBox" name="inter8x8Luma16SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="2" column="2" >
+            <widget class="QSpinBox" name="inter8x8Luma19SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="4" column="4" >
+            <widget class="QSpinBox" name="inter8x8Luma37SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="3" column="2" >
+            <widget class="QSpinBox" name="inter8x8Luma27SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="4" column="1" >
+            <widget class="QSpinBox" name="inter8x8Luma34SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="4" column="3" >
+            <widget class="QSpinBox" name="inter8x8Luma36SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="3" column="5" >
+            <widget class="QSpinBox" name="inter8x8Luma30SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="5" column="1" >
+            <widget class="QSpinBox" name="inter8x8Luma42SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="2" column="6" >
+            <widget class="QSpinBox" name="inter8x8Luma23SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="4" column="2" >
+            <widget class="QSpinBox" name="inter8x8Luma35SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="3" column="3" >
+            <widget class="QSpinBox" name="inter8x8Luma28SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="5" column="6" >
+            <widget class="QSpinBox" name="inter8x8Luma47SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="4" column="5" >
+            <widget class="QSpinBox" name="inter8x8Luma38SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="5" column="2" >
+            <widget class="QSpinBox" name="inter8x8Luma43SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="6" column="3" >
+            <widget class="QSpinBox" name="inter8x8Luma52SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="5" column="4" >
+            <widget class="QSpinBox" name="inter8x8Luma45SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="5" column="0" >
+            <widget class="QSpinBox" name="inter8x8Luma41SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="5" column="5" >
+            <widget class="QSpinBox" name="inter8x8Luma46SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="4" column="6" >
+            <widget class="QSpinBox" name="inter8x8Luma39SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+           <item row="5" column="3" >
+            <widget class="QSpinBox" name="inter8x8Luma44SpinBox" >
+             <property name="maximum" >
+              <number>255</number>
+             </property>
+             <property name="minimum" >
+              <number>1</number>
+             </property>
+            </widget>
+           </item>
+          </layout>
+         </item>
+        </layout>
+       </item>
+      </layout>
+     </widget>
+    </widget>
+   </item>
+   <item>
+    <spacer>
+     <property name="orientation" >
+      <enum>Qt::Vertical</enum>
+     </property>
+     <property name="sizeHint" >
+      <size>
+       <width>20</width>
+       <height>40</height>
+      </size>
+     </property>
+    </spacer>
+   </item>
+   <item>
+    <layout class="QHBoxLayout" >
+     <property name="margin" >
+      <number>0</number>
+     </property>
+     <property name="spacing" >
+      <number>6</number>
+     </property>
+     <item>
+      <widget class="QPushButton" name="loadFileButton" >
+       <property name="text" >
+        <string>Load File</string>
+       </property>
+      </widget>
+     </item>
+     <item>
+      <spacer>
+       <property name="orientation" >
+        <enum>Qt::Horizontal</enum>
+       </property>
+       <property name="sizeHint" >
+        <size>
+         <width>131</width>
+         <height>31</height>
+        </size>
+       </property>
+      </spacer>
+     </item>
+     <item>
+      <widget class="QPushButton" name="okButton" >
+       <property name="text" >
+        <string>OK</string>
+       </property>
+       <property name="default" >
+        <bool>true</bool>
+       </property>
+      </widget>
+     </item>
+     <item>
+      <widget class="QPushButton" name="cancelButton" >
+       <property name="text" >
+        <string>Cancel</string>
+       </property>
+      </widget>
+     </item>
+    </layout>
+   </item>
+  </layout>
+ </widget>
+ <pixmapfunction></pixmapfunction>
+ <tabstops>
+  <tabstop>tabWidget</tabstop>
+  <tabstop>intra4x4Luma1SpinBox</tabstop>
+  <tabstop>intra4x4Luma2SpinBox</tabstop>
+  <tabstop>intra4x4Luma3SpinBox</tabstop>
+  <tabstop>intra4x4Luma4SpinBox</tabstop>
+  <tabstop>intra4x4Luma5SpinBox</tabstop>
+  <tabstop>intra4x4Luma6SpinBox</tabstop>
+  <tabstop>intra4x4Luma7SpinBox</tabstop>
+  <tabstop>intra4x4Luma8SpinBox</tabstop>
+  <tabstop>intra4x4Luma9SpinBox</tabstop>
+  <tabstop>intra4x4Luma10SpinBox</tabstop>
+  <tabstop>intra4x4Luma11SpinBox</tabstop>
+  <tabstop>intra4x4Luma12SpinBox</tabstop>
+  <tabstop>intra4x4Luma13SpinBox</tabstop>
+  <tabstop>intra4x4Luma14SpinBox</tabstop>
+  <tabstop>intra4x4Luma15SpinBox</tabstop>
+  <tabstop>intra4x4Luma16SpinBox</tabstop>
+  <tabstop>intraChroma1SpinBox</tabstop>
+  <tabstop>intraChroma2SpinBox</tabstop>
+  <tabstop>intraChroma3SpinBox</tabstop>
+  <tabstop>intraChroma4SpinBox</tabstop>
+  <tabstop>intraChroma5SpinBox</tabstop>
+  <tabstop>intraChroma6SpinBox</tabstop>
+  <tabstop>intraChroma7SpinBox</tabstop>
+  <tabstop>intraChroma8SpinBox</tabstop>
+  <tabstop>intraChroma9SpinBox</tabstop>
+  <tabstop>intraChroma10SpinBox</tabstop>
+  <tabstop>intraChroma11SpinBox</tabstop>
+  <tabstop>intraChroma12SpinBox</tabstop>
+  <tabstop>intraChroma13SpinBox</tabstop>
+  <tabstop>intraChroma14SpinBox</tabstop>
+  <tabstop>intraChroma15SpinBox</tabstop>
+  <tabstop>intraChroma16SpinBox</tabstop>
+  <tabstop>inter4x4Luma1SpinBox</tabstop>
+  <tabstop>inter4x4Luma2SpinBox</tabstop>
+  <tabstop>inter4x4Luma3SpinBox</tabstop>
+  <tabstop>inter4x4Luma4SpinBox</tabstop>
+  <tabstop>inter4x4Luma5SpinBox</tabstop>
+  <tabstop>inter4x4Luma6SpinBox</tabstop>
+  <tabstop>inter4x4Luma7SpinBox</tabstop>
+  <tabstop>inter4x4Luma8SpinBox</tabstop>
+  <tabstop>inter4x4Luma9SpinBox</tabstop>
+  <tabstop>inter4x4Luma10SpinBox</tabstop>
+  <tabstop>inter4x4Luma11SpinBox</tabstop>
+  <tabstop>inter4x4Luma12SpinBox</tabstop>
+  <tabstop>inter4x4Luma13SpinBox</tabstop>
+  <tabstop>inter4x4Luma14SpinBox</tabstop>
+  <tabstop>inter4x4Luma15SpinBox</tabstop>
+  <tabstop>inter4x4Luma16SpinBox</tabstop>
+  <tabstop>interChroma1SpinBox</tabstop>
+  <tabstop>interChroma2SpinBox</tabstop>
+  <tabstop>interChroma3SpinBox</tabstop>
+  <tabstop>interChroma4SpinBox</tabstop>
+  <tabstop>interChroma5SpinBox</tabstop>
+  <tabstop>interChroma6SpinBox</tabstop>
+  <tabstop>interChroma7SpinBox</tabstop>
+  <tabstop>interChroma8SpinBox</tabstop>
+  <tabstop>interChroma9SpinBox</tabstop>
+  <tabstop>interChroma10SpinBox</tabstop>
+  <tabstop>interChroma11SpinBox</tabstop>
+  <tabstop>interChroma12SpinBox</tabstop>
+  <tabstop>interChroma13SpinBox</tabstop>
+  <tabstop>interChroma14SpinBox</tabstop>
+  <tabstop>interChroma15SpinBox</tabstop>
+  <tabstop>interChroma16SpinBox</tabstop>
+  <tabstop>intra8x8Luma1SpinBox</tabstop>
+  <tabstop>intra8x8Luma2SpinBox</tabstop>
+  <tabstop>intra8x8Luma3SpinBox</tabstop>
+  <tabstop>intra8x8Luma4SpinBox</tabstop>
+  <tabstop>intra8x8Luma5SpinBox</tabstop>
+  <tabstop>intra8x8Luma6SpinBox</tabstop>
+  <tabstop>intra8x8Luma7SpinBox</tabstop>
+  <tabstop>intra8x8Luma8SpinBox</tabstop>
+  <tabstop>intra8x8Luma9SpinBox</tabstop>
+  <tabstop>intra8x8Luma10SpinBox</tabstop>
+  <tabstop>intra8x8Luma11SpinBox</tabstop>
+  <tabstop>intra8x8Luma12SpinBox</tabstop>
+  <tabstop>intra8x8Luma13SpinBox</tabstop>
+  <tabstop>intra8x8Luma14SpinBox</tabstop>
+  <tabstop>intra8x8Luma15SpinBox</tabstop>
+  <tabstop>intra8x8Luma16SpinBox</tabstop>
+  <tabstop>intra8x8Luma17SpinBox</tabstop>
+  <tabstop>intra8x8Luma18SpinBox</tabstop>
+  <tabstop>intra8x8Luma19SpinBox</tabstop>
+  <tabstop>intra8x8Luma20SpinBox</tabstop>
+  <tabstop>intra8x8Luma21SpinBox</tabstop>
+  <tabstop>intra8x8Luma22SpinBox</tabstop>
+  <tabstop>intra8x8Luma23SpinBox</tabstop>
+  <tabstop>intra8x8Luma24SpinBox</tabstop>
+  <tabstop>intra8x8Luma25SpinBox</tabstop>
+  <tabstop>intra8x8Luma26SpinBox</tabstop>
+  <tabstop>intra8x8Luma27SpinBox</tabstop>
+  <tabstop>intra8x8Luma28SpinBox</tabstop>
+  <tabstop>intra8x8Luma29SpinBox</tabstop>
+  <tabstop>intra8x8Luma30SpinBox</tabstop>
+  <tabstop>intra8x8Luma31SpinBox</tabstop>
+  <tabstop>intra8x8Luma32SpinBox</tabstop>
+  <tabstop>intra8x8Luma33SpinBox</tabstop>
+  <tabstop>intra8x8Luma34SpinBox</tabstop>
+  <tabstop>intra8x8Luma35SpinBox</tabstop>
+  <tabstop>intra8x8Luma36SpinBox</tabstop>
+  <tabstop>intra8x8Luma37SpinBox</tabstop>
+  <tabstop>intra8x8Luma38SpinBox</tabstop>
+  <tabstop>intra8x8Luma39SpinBox</tabstop>
+  <tabstop>intra8x8Luma40SpinBox</tabstop>
+  <tabstop>intra8x8Luma41SpinBox</tabstop>
+  <tabstop>intra8x8Luma42SpinBox</tabstop>
+  <tabstop>intra8x8Luma43SpinBox</tabstop>
+  <tabstop>intra8x8Luma44SpinBox</tabstop>
+  <tabstop>intra8x8Luma45SpinBox</tabstop>
+  <tabstop>intra8x8Luma46SpinBox</tabstop>
+  <tabstop>intra8x8Luma47SpinBox</tabstop>
+  <tabstop>intra8x8Luma48SpinBox</tabstop>
+  <tabstop>intra8x8Luma49SpinBox</tabstop>
+  <tabstop>intra8x8Luma50SpinBox</tabstop>
+  <tabstop>intra8x8Luma51SpinBox</tabstop>
+  <tabstop>intra8x8Luma52SpinBox</tabstop>
+  <tabstop>intra8x8Luma53SpinBox</tabstop>
+  <tabstop>intra8x8Luma54SpinBox</tabstop>
+  <tabstop>intra8x8Luma55SpinBox</tabstop>
+  <tabstop>intra8x8Luma56SpinBox</tabstop>
+  <tabstop>intra8x8Luma57SpinBox</tabstop>
+  <tabstop>intra8x8Luma58SpinBox</tabstop>
+  <tabstop>intra8x8Luma59SpinBox</tabstop>
+  <tabstop>intra8x8Luma60SpinBox</tabstop>
+  <tabstop>intra8x8Luma61SpinBox</tabstop>
+  <tabstop>intra8x8Luma62SpinBox</tabstop>
+  <tabstop>intra8x8Luma63SpinBox</tabstop>
+  <tabstop>intra8x8Luma64SpinBox</tabstop>
+  <tabstop>inter8x8Luma1SpinBox</tabstop>
+  <tabstop>inter8x8Luma2SpinBox</tabstop>
+  <tabstop>inter8x8Luma3SpinBox</tabstop>
+  <tabstop>inter8x8Luma4SpinBox</tabstop>
+  <tabstop>inter8x8Luma5SpinBox</tabstop>
+  <tabstop>inter8x8Luma6SpinBox</tabstop>
+  <tabstop>inter8x8Luma7SpinBox</tabstop>
+  <tabstop>inter8x8Luma8SpinBox</tabstop>
+  <tabstop>inter8x8Luma9SpinBox</tabstop>
+  <tabstop>inter8x8Luma10SpinBox</tabstop>
+  <tabstop>inter8x8Luma11SpinBox</tabstop>
+  <tabstop>inter8x8Luma12SpinBox</tabstop>
+  <tabstop>inter8x8Luma13SpinBox</tabstop>
+  <tabstop>inter8x8Luma14SpinBox</tabstop>
+  <tabstop>inter8x8Luma15SpinBox</tabstop>
+  <tabstop>inter8x8Luma16SpinBox</tabstop>
+  <tabstop>inter8x8Luma17SpinBox</tabstop>
+  <tabstop>inter8x8Luma18SpinBox</tabstop>
+  <tabstop>inter8x8Luma19SpinBox</tabstop>
+  <tabstop>inter8x8Luma20SpinBox</tabstop>
+  <tabstop>inter8x8Luma21SpinBox</tabstop>
+  <tabstop>inter8x8Luma22SpinBox</tabstop>
+  <tabstop>inter8x8Luma23SpinBox</tabstop>
+  <tabstop>inter8x8Luma24SpinBox</tabstop>
+  <tabstop>inter8x8Luma25SpinBox</tabstop>
+  <tabstop>inter8x8Luma26SpinBox</tabstop>
+  <tabstop>inter8x8Luma27SpinBox</tabstop>
+  <tabstop>inter8x8Luma28SpinBox</tabstop>
+  <tabstop>inter8x8Luma29SpinBox</tabstop>
+  <tabstop>inter8x8Luma30SpinBox</tabstop>
+  <tabstop>inter8x8Luma31SpinBox</tabstop>
+  <tabstop>inter8x8Luma32SpinBox</tabstop>
+  <tabstop>inter8x8Luma33SpinBox</tabstop>
+  <tabstop>inter8x8Luma34SpinBox</tabstop>
+  <tabstop>inter8x8Luma35SpinBox</tabstop>
+  <tabstop>inter8x8Luma36SpinBox</tabstop>
+  <tabstop>inter8x8Luma37SpinBox</tabstop>
+  <tabstop>inter8x8Luma38SpinBox</tabstop>
+  <tabstop>inter8x8Luma39SpinBox</tabstop>
+  <tabstop>inter8x8Luma40SpinBox</tabstop>
+  <tabstop>inter8x8Luma41SpinBox</tabstop>
+  <tabstop>inter8x8Luma42SpinBox</tabstop>
+  <tabstop>inter8x8Luma43SpinBox</tabstop>
+  <tabstop>inter8x8Luma44SpinBox</tabstop>
+  <tabstop>inter8x8Luma45SpinBox</tabstop>
+  <tabstop>inter8x8Luma46SpinBox</tabstop>
+  <tabstop>inter8x8Luma47SpinBox</tabstop>
+  <tabstop>inter8x8Luma48SpinBox</tabstop>
+  <tabstop>inter8x8Luma49SpinBox</tabstop>
+  <tabstop>inter8x8Luma50SpinBox</tabstop>
+  <tabstop>inter8x8Luma51SpinBox</tabstop>
+  <tabstop>inter8x8Luma52SpinBox</tabstop>
+  <tabstop>inter8x8Luma53SpinBox</tabstop>
+  <tabstop>inter8x8Luma54SpinBox</tabstop>
+  <tabstop>inter8x8Luma55SpinBox</tabstop>
+  <tabstop>inter8x8Luma56SpinBox</tabstop>
+  <tabstop>inter8x8Luma57SpinBox</tabstop>
+  <tabstop>inter8x8Luma58SpinBox</tabstop>
+  <tabstop>inter8x8Luma59SpinBox</tabstop>
+  <tabstop>inter8x8Luma60SpinBox</tabstop>
+  <tabstop>inter8x8Luma61SpinBox</tabstop>
+  <tabstop>inter8x8Luma62SpinBox</tabstop>
+  <tabstop>inter8x8Luma63SpinBox</tabstop>
+  <tabstop>inter8x8Luma64SpinBox</tabstop>
+  <tabstop>loadFileButton</tabstop>
+  <tabstop>okButton</tabstop>
+  <tabstop>cancelButton</tabstop>
+ </tabstops>
+ <resources/>
+ <connections>
+  <connection>
+   <sender>okButton</sender>
+   <signal>clicked()</signal>
+   <receiver>x264CustomMatrixDialog</receiver>
+   <slot>accept()</slot>
+   <hints>
+    <hint type="sourcelabel" >
+     <x>278</x>
+     <y>253</y>
+    </hint>
+    <hint type="destinationlabel" >
+     <x>96</x>
+     <y>254</y>
+    </hint>
+   </hints>
+  </connection>
+  <connection>
+   <sender>cancelButton</sender>
+   <signal>clicked()</signal>
+   <receiver>x264CustomMatrixDialog</receiver>
+   <slot>reject()</slot>
+   <hints>
+    <hint type="sourcelabel" >
+     <x>369</x>
+     <y>253</y>
+    </hint>
+    <hint type="destinationlabel" >
+     <x>179</x>
+     <y>282</y>
+    </hint>
+   </hints>
+  </connection>
+ </connections>
+</ui>

Added: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/x264_zones.ui
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/x264_zones.ui	2008-04-02 23:54:12 UTC (rev 3964)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/x264_zones.ui	2008-04-03 00:17:06 UTC (rev 3965)
@@ -0,0 +1,363 @@
+<ui version="4.0" >
+ <author></author>
+ <comment></comment>
+ <exportmacro></exportmacro>
+ <class>x264ZonesDialog</class>
+ <widget class="QDialog" name="x264ZonesDialog" >
+  <property name="geometry" >
+   <rect>
+    <x>0</x>
+    <y>0</y>
+    <width>187</width>
+    <height>239</height>
+   </rect>
+  </property>
+  <property name="windowTitle" >
+   <string>x264 Zones</string>
+  </property>
+  <layout class="QVBoxLayout" >
+   <property name="margin" >
+    <number>9</number>
+   </property>
+   <property name="spacing" >
+    <number>6</number>
+   </property>
+   <item>
+    <widget class="QGroupBox" name="groupBox_2" >
+     <property name="title" >
+      <string>Range</string>
+     </property>
+     <layout class="QGridLayout" >
+      <property name="margin" >
+       <number>9</number>
+      </property>
+      <property name="spacing" >
+       <number>6</number>
+      </property>
+      <item row="0" column="1" >
+       <widget class="QSpinBox" name="frameStartSpinBox" >
+        <property name="maximum" >
+         <number>9999999</number>
+        </property>
+       </widget>
+      </item>
+      <item row="0" column="0" >
+       <widget class="QLabel" name="label" >
+        <property name="text" >
+         <string>Start Frame:</string>
+        </property>
+       </widget>
+      </item>
+      <item row="1" column="0" >
+       <widget class="QLabel" name="label_2" >
+        <property name="text" >
+         <string>End Frame:</string>
+        </property>
+       </widget>
+      </item>
+      <item row="1" column="1" >
+       <widget class="QSpinBox" name="frameEndSpinBox" >
+        <property name="maximum" >
+         <number>9999999</number>
+        </property>
+       </widget>
+      </item>
+      <item row="0" column="2" >
+       <spacer>
+        <property name="orientation" >
+         <enum>Qt::Horizontal</enum>
+        </property>
+        <property name="sizeHint" >
+         <size>
+          <width>40</width>
+          <height>20</height>
+         </size>
+        </property>
+       </spacer>
+      </item>
+      <item row="1" column="2" >
+       <spacer>
+        <property name="orientation" >
+         <enum>Qt::Horizontal</enum>
+        </property>
+        <property name="sizeHint" >
+         <size>
+          <width>40</width>
+          <height>20</height>
+         </size>
+        </property>
+       </spacer>
+      </item>
+     </layout>
+    </widget>
+   </item>
+   <item>
+    <widget class="QGroupBox" name="groupBox" >
+     <property name="title" >
+      <string>Mode</string>
+     </property>
+     <layout class="QGridLayout" >
+      <property name="margin" >
+       <number>9</number>
+      </property>
+      <property name="spacing" >
+       <number>6</number>
+      </property>
+      <item row="1" column="1" >
+       <layout class="QHBoxLayout" >
+        <property name="margin" >
+         <number>0</number>
+        </property>
+        <property name="spacing" >
+         <number>6</number>
+        </property>
+        <item>
+         <widget class="QSpinBox" name="bitrateSpinBox" >
+          <property name="enabled" >
+           <bool>false</bool>
+          </property>
+          <property name="maximum" >
+           <number>9999</number>
+          </property>
+          <property name="minimum" >
+           <number>1</number>
+          </property>
+          <property name="value" >
+           <number>100</number>
+          </property>
+         </widget>
+        </item>
+        <item>
+         <widget class="QLabel" name="label_3" >
+          <property name="enabled" >
+           <bool>false</bool>
+          </property>
+          <property name="text" >
+           <string>%</string>
+          </property>
+         </widget>
+        </item>
+        <item>
+         <spacer>
+          <property name="orientation" >
+           <enum>Qt::Horizontal</enum>
+          </property>
+          <property name="sizeHint" >
+           <size>
+            <width>16</width>
+            <height>18</height>
+           </size>
+          </property>
+         </spacer>
+        </item>
+       </layout>
+      </item>
+      <item row="0" column="1" >
+       <layout class="QHBoxLayout" >
+        <property name="margin" >
+         <number>0</number>
+        </property>
+        <property name="spacing" >
+         <number>6</number>
+        </property>
+        <item>
+         <widget class="QSpinBox" name="quantiserSpinBox" >
+          <property name="maximum" >
+           <number>51</number>
+          </property>
+          <property name="minimum" >
+           <number>1</number>
+          </property>
+          <property name="value" >
+           <number>26</number>
+          </property>
+         </widget>
+        </item>
+        <item>
+         <spacer>
+          <property name="orientation" >
+           <enum>Qt::Horizontal</enum>
+          </property>
+          <property name="sizeHint" >
+           <size>
+            <width>16</width>
+            <height>18</height>
+           </size>
+          </property>
+         </spacer>
+        </item>
+       </layout>
+      </item>
+      <item row="0" column="0" >
+       <widget class="QRadioButton" name="quantiserRadioButton" >
+        <property name="text" >
+         <string>Quantiser:</string>
+        </property>
+        <property name="checked" >
+         <bool>true</bool>
+        </property>
+       </widget>
+      </item>
+      <item row="1" column="0" >
+       <widget class="QRadioButton" name="bitrateRadioButton" >
+        <property name="text" >
+         <string>Bitrate:</string>
+        </property>
+       </widget>
+      </item>
+     </layout>
+    </widget>
+   </item>
+   <item>
+    <spacer>
+     <property name="orientation" >
+      <enum>Qt::Vertical</enum>
+     </property>
+     <property name="sizeType" >
+      <enum>QSizePolicy::MinimumExpanding</enum>
+     </property>
+     <property name="sizeHint" >
+      <size>
+       <width>20</width>
+       <height>20</height>
+      </size>
+     </property>
+    </spacer>
+   </item>
+   <item>
+    <layout class="QHBoxLayout" >
+     <property name="margin" >
+      <number>0</number>
+     </property>
+     <property name="spacing" >
+      <number>6</number>
+     </property>
+     <item>
+      <spacer>
+       <property name="orientation" >
+        <enum>Qt::Horizontal</enum>
+       </property>
+       <property name="sizeType" >
+        <enum>QSizePolicy::MinimumExpanding</enum>
+       </property>
+       <property name="sizeHint" >
+        <size>
+         <width>1</width>
+         <height>31</height>
+        </size>
+       </property>
+      </spacer>
+     </item>
+     <item>
+      <widget class="QPushButton" name="okButton" >
+       <property name="text" >
+        <string>OK</string>
+       </property>
+      </widget>
+     </item>
+     <item>
+      <widget class="QPushButton" name="cancelButton" >
+       <property name="text" >
+        <string>Cancel</string>
+       </property>
+      </widget>
+     </item>
+    </layout>
+   </item>
+  </layout>
+ </widget>
+ <pixmapfunction></pixmapfunction>
+ <tabstops>
+  <tabstop>frameStartSpinBox</tabstop>
+  <tabstop>frameEndSpinBox</tabstop>
+  <tabstop>quantiserRadioButton</tabstop>
+  <tabstop>quantiserSpinBox</tabstop>
+  <tabstop>bitrateRadioButton</tabstop>
+  <tabstop>bitrateSpinBox</tabstop>
+  <tabstop>okButton</tabstop>
+  <tabstop>cancelButton</tabstop>
+ </tabstops>
+ <resources/>
+ <connections>
+  <connection>
+   <sender>okButton</sender>
+   <signal>clicked()</signal>
+   <receiver>x264ZonesDialog</receiver>
+   <slot>accept()</slot>
+   <hints>
+    <hint type="sourcelabel" >
+     <x>278</x>
+     <y>253</y>
+    </hint>
+    <hint type="destinationlabel" >
+     <x>96</x>
+     <y>254</y>
+    </hint>
+   </hints>
+  </connection>
+  <connection>
+   <sender>cancelButton</sender>
+   <signal>clicked()</signal>
+   <receiver>x264ZonesDialog</receiver>
+   <slot>reject()</slot>
+   <hints>
+    <hint type="sourcelabel" >
+     <x>369</x>
+     <y>253</y>
+    </hint>
+    <hint type="destinationlabel" >
+     <x>179</x>
+     <y>282</y>
+    </hint>
+   </hints>
+  </connection>
+  <connection>
+   <sender>quantiserRadioButton</sender>
+   <signal>toggled(bool)</signal>
+   <receiver>quantiserSpinBox</receiver>
+   <slot>setEnabled(bool)</slot>
+   <hints>
+    <hint type="sourcelabel" >
+     <x>64</x>
+     <y>148</y>
+    </hint>
+    <hint type="destinationlabel" >
+     <x>129</x>
+     <y>149</y>
+    </hint>
+   </hints>
+  </connection>
+  <connection>
+   <sender>bitrateRadioButton</sender>
+   <signal>toggled(bool)</signal>
+   <receiver>bitrateSpinBox</receiver>
+   <slot>setEnabled(bool)</slot>
+   <hints>
+    <hint type="sourcelabel" >
+     <x>64</x>
+     <y>172</y>
+    </hint>
+    <hint type="destinationlabel" >
+     <x>129</x>
+     <y>173</y>
+    </hint>
+   </hints>
+  </connection>
+  <connection>
+   <sender>bitrateRadioButton</sender>
+   <signal>toggled(bool)</signal>
+   <receiver>label_3</receiver>
+   <slot>setEnabled(bool)</slot>
+   <hints>
+    <hint type="sourcelabel" >
+     <x>64</x>
+     <y>172</y>
+    </hint>
+    <hint type="destinationlabel" >
+     <x>163</x>
+     <y>173</y>
+    </hint>
+   </hints>
+  </connection>
+ </connections>
+</ui>

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/CMakeLists.txt	2008-04-02 23:54:12 UTC (rev 3964)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/CMakeLists.txt	2008-04-03 00:17:06 UTC (rev 3965)
@@ -5,7 +5,7 @@
 DIA_audioFilter.cpp   DIA_enter.cpp           DIA_flyCrop.cpp      DIA_gototime.cpp    DIA_postproc.cpp  DIA_srt.cpp        GUI_render.cpp
 DIA_bitrateHisto.cpp  DIA_flyAsharp.cpp       DIA_flyDialog.cpp    DIA_lavcodec.cpp    DIA_prefs.cpp     DIA_SVCD.cpp       GUI_sdlRender.cpp
 DIA_builtin.cpp       DIA_flyChromaShift.cpp  DIA_flyHue.cpp       DIA_lavDecoder.cpp  DIA_requant.cpp   DIA_tdeint.cpp     GUI_xvRender.cpp
-DIA_animated.cpp      DIA_ocr.cpp DIA_tsSub.cpp
+DIA_animated.cpp      DIA_ocr.cpp DIA_tsSub.cpp  GUI_x264.cpp
 DIA_flyEq2.cpp        DIA_flv1.cpp            DIA_flyThreshold.cpp DIA_flyParticle.cpp DIA_flyEraser.cpp DIA_flySwissArmyKnife.cpp
 )
 

Added: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/GUI_x264.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/GUI_x264.cpp	2008-04-02 23:54:12 UTC (rev 3964)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/GUI_x264.cpp	2008-04-03 00:17:06 UTC (rev 3965)
@@ -0,0 +1,145 @@
+/***************************************************************************
+GUI_x264.cpp  -  description
+----------------------------
+
+Common helper functions for x264 GUI.  Mostly modified from x264.
+
+begin                : Tue Apr 01 2008
+copyright            : (C) 2008 by gruntster
+***************************************************************************/
+
+/***************************************************************************
+*                                                                         *
+*   This program is free software; you can redistribute it and/or modify  *
+*   it under the terms of the GNU General Public License as published by  *
+*   the Free Software Foundation; either version 2 of the License, or     *
+*   (at your option) any later version.                                   *
+*                                                                         *
+***************************************************************************/
+
+#include "config.h"
+
+#ifdef USE_X264
+#include "ADM_default.h"
+#include "ADM_codecs/ADM_x264param.h"
+
+char *x264_slurp_file(const char *filename)
+{
+	int b_error = 0;
+	int i_size;
+	char *buf;
+
+	FILE *fh = fopen(filename, "rb");
+
+	if (!fh)
+		return NULL;
+
+	b_error |= fseek(fh, 0, SEEK_END) < 0;
+	b_error |= (i_size = ftell(fh) ) <= 0;
+	b_error |= fseek(fh, 0, SEEK_SET) < 0;
+
+	if(b_error)
+		return NULL;
+
+	buf = new char[i_size + 2];
+
+	if (buf == NULL)
+		return NULL;
+
+	b_error |= fread(buf, 1, i_size, fh) != i_size;
+
+	if (buf[i_size-1] != '\n')
+		buf[i_size++] = '\n';
+
+	buf[i_size] = 0;
+	fclose(fh);
+
+	if (b_error)
+	{
+		delete [] buf;
+		return NULL;
+	}
+
+	return buf;
+}
+
+int x264_cqm_parse_jmlist(const char *buf, const char *name, uint8_t *cqm, const uint8_t *jvt, int length)
+{
+	char *p;
+	char *nextvar;
+	int i;
+
+	p = strstr(buf, name);
+
+	if (!p)
+	{
+		memset(cqm, 16, length);
+		return 0;
+	}
+
+	p += strlen(name);
+
+	if (*p == 'U' || *p == 'V')
+		p++;
+
+	nextvar = strstr(p, "INT");
+
+	for (i = 0; i < length && (p = strpbrk(p, " \t\n,")) && (p = strpbrk(p, "0123456789")); i++)
+	{
+		int coef = -1;
+
+		sscanf(p, "%d", &coef);
+
+		if (i == 0 && coef == 0)
+		{
+			memcpy(cqm, jvt, length);
+			return 0;
+		}
+
+		if(coef < 1 || coef > 255)
+		{
+			//x264_log( h, X264_LOG_ERROR, "bad coefficient in list '%s'\n", name );
+			return -1;
+		}
+
+		cqm[i] = coef;
+	}
+
+	if((nextvar && p > nextvar) || i != length)
+	{
+		//x264_log( h, X264_LOG_ERROR, "not enough coefficients in list '%s'\n", name );
+		return -1;
+	}
+
+	return 0;
+}
+
+int x264_cqm_parse_file(const char *filename, uint8_t* intra4x4Luma, uint8_t* intra4x4Chroma, uint8_t* inter4x4Luma, 
+						uint8_t* inter4x4Chroma, uint8_t* intra8x8Luma, uint8_t* inter8x8Luma)
+{
+	char *buf, *p;
+	int b_error = 0;
+
+	buf = x264_slurp_file(filename);
+
+	if (!buf)
+	{
+		//x264_log( h, X264_LOG_ERROR, "can't open file '%s'\n", filename );
+		return -1;
+	}
+
+	while ((p = strchr(buf, '#')) != NULL)
+		memset(p, ' ', strcspn(p, "\n"));
+
+	b_error |= x264_cqm_parse_jmlist(buf, "INTRA4X4_LUMA",   intra4x4Luma, x264_cqm_jvt4i, 16);
+	b_error |= x264_cqm_parse_jmlist(buf, "INTRA4X4_CHROMA", intra4x4Chroma, x264_cqm_jvt4i, 16);
+	b_error |= x264_cqm_parse_jmlist(buf, "INTER4X4_LUMA",   inter4x4Luma, x264_cqm_jvt4p, 16);
+	b_error |= x264_cqm_parse_jmlist(buf, "INTER4X4_CHROMA", inter4x4Chroma, x264_cqm_jvt4p, 16);
+	b_error |= x264_cqm_parse_jmlist(buf, "INTRA8X8_LUMA",   intra8x8Luma, x264_cqm_jvt8i, 64);
+	b_error |= x264_cqm_parse_jmlist(buf, "INTER8X8_LUMA",   inter8x8Luma, x264_cqm_jvt8p, 64);
+
+	delete [] buf;
+
+	return b_error;
+}
+#endif



From gruntster at mail.berlios.de  Thu Apr  3 02:48:14 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Thu, 3 Apr 2008 02:48:14 +0200
Subject: [Avidemux-svn-commit] r3966 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog
Message-ID: <200804030048.m330mEKZ015359@sheep.berlios.de>

Author: gruntster
Date: 2008-04-03 02:48:12 +0200 (Thu, 03 Apr 2008)
New Revision: 3966

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_x264_matrix.cpp
Log:
[x264] Unix fix

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_x264_matrix.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_x264_matrix.cpp	2008-04-03 00:17:06 UTC (rev 3965)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_x264_matrix.cpp	2008-04-03 00:48:12 UTC (rev 3966)
@@ -21,7 +21,7 @@
 #include "ui_x264_matrix.h"
 #include "ADM_default.h"
 #include "DIA_fileSel.h"
-#include "ADM_toolkit\toolkit.hxx"
+#include "ADM_toolkit/toolkit.hxx"
 
 extern int x264_cqm_parse_file(const char *filename, uint8_t* cqm_4iy, uint8_t* cqm_4ic, uint8_t* cqm_4py, uint8_t* cqm_4pc, uint8_t* cqm_8iy, uint8_t* cqm_8py);
 



From gruntster at mail.berlios.de  Thu Apr  3 14:37:47 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Thu, 3 Apr 2008 14:37:47 +0200
Subject: [Avidemux-svn-commit] r3967 - in
	branches/avidemux_2.5_branch_gruntster:
	avidemux/plugins/ADM_audiodecoder/ADM_ad_amrnb cmake
Message-ID: <200804031237.m33CbldH019985@sheep.berlios.de>

Author: gruntster
Date: 2008-04-03 14:37:43 +0200 (Thu, 03 Apr 2008)
New Revision: 3967

Added:
   branches/avidemux_2.5_branch_gruntster/cmake/admCheckAmrnb.cmake
Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_amrnb/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/cmake/admCheckDca.cmake
   branches/avidemux_2.5_branch_gruntster/cmake/admCheckFaad.cmake
   branches/avidemux_2.5_branch_gruntster/cmake/admConfigSummary.cmake
Log:
[CMake] report detection of amrnb, FAAD and libdca

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_amrnb/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_amrnb/CMakeLists.txt	2008-04-03 00:48:12 UTC (rev 3966)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_audiodecoder/ADM_ad_amrnb/CMakeLists.txt	2008-04-03 12:37:43 UTC (rev 3967)
@@ -1,22 +1,6 @@
-MACRO(checkAMRNB)
-	OPTION(AMRNB "" ON)
-
-	MESSAGE(STATUS "Checking for amrnb")
-	MESSAGE(STATUS "******************")
-
-	IF (AMRNB)
-		FIND_HEADER_AND_LIB(AMRNB amrnb/interf_dec.h amrnb GP3Decoder_Interface_Decode)
-		PRINT_LIBRARY_INFO("amrnb" AMRNB_FOUND "${AMRNB_INCLUDE_DIR}" "${AMRNB_LIBRARY_DIR}")
-	ELSE (AMRNB)
-		MESSAGE("${MSG_DISABLE_OPTION}")
-	ENDIF (AMRNB)
-
-	MESSAGE("")
-ENDMACRO(checkAMRNB)
-
-
 # AMRNB decoder
-checkAMRNB()
+INCLUDE(admCheckAmrnb)
+checkAmrnb()
 
 IF (AMRNB_FOUND)
 	INCLUDE(ad_plugin)

Added: branches/avidemux_2.5_branch_gruntster/cmake/admCheckAmrnb.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admCheckAmrnb.cmake	2008-04-03 00:48:12 UTC (rev 3966)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admCheckAmrnb.cmake	2008-04-03 12:37:43 UTC (rev 3967)
@@ -0,0 +1,17 @@
+MACRO(checkAmrnb)
+	OPTION(AMRNB "" ON)
+
+	MESSAGE(STATUS "Checking for amrnb")
+	MESSAGE(STATUS "******************")
+
+	IF (AMRNB)
+		FIND_HEADER_AND_LIB(AMRNB amrnb/interf_dec.h amrnb GP3Decoder_Interface_Decode)
+		PRINT_LIBRARY_INFO("amrnb" AMRNB_FOUND "${AMRNB_INCLUDE_DIR}" "${AMRNB_LIBRARY_DIR}")
+	ELSE (AMRNB)
+		MESSAGE("${MSG_DISABLE_OPTION}")
+	ENDIF (AMRNB)
+	
+	SET(ENV{ADM_HAVE_AMRNB} ${AMRNB_FOUND})
+
+	MESSAGE("")
+ENDMACRO(checkAmrnb)
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/cmake/admCheckDca.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admCheckDca.cmake	2008-04-03 00:48:12 UTC (rev 3966)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admCheckDca.cmake	2008-04-03 12:37:43 UTC (rev 3967)
@@ -2,38 +2,38 @@
 # libdca
 ########################################
 MACRO(checkDca)
-OPTION(LIBDCA "" ON)
+	OPTION(LIBDCA "" ON)
 
-MESSAGE(STATUS "Checking for libdca")
-MESSAGE(STATUS "*******************")
+	MESSAGE(STATUS "Checking for libdca")
+	MESSAGE(STATUS "*******************")
 
-IF (LIBDCA)
-	IF (UNIX)
-		SET(LIBDCA_REQUIRED_FLAGS "-lm")
-	ENDIF (UNIX)
+	IF (LIBDCA)
+		IF (UNIX)
+			SET(LIBDCA_REQUIRED_FLAGS "-lm")
+		ENDIF (UNIX)
 
-	SET(LIBDCA_VERSION 005)
+		SET(LIBDCA_VERSION 005)
 
-	FIND_HEADER_AND_LIB(LIBDCA_005 dca.h dca dca_init ${LIBDCA_REQUIRED_FLAGS})
+		FIND_HEADER_AND_LIB(LIBDCA_005 dca.h dca dca_init ${LIBDCA_REQUIRED_FLAGS})
 
-	IF (NOT LIBDCA_005_FOUND)
-		SET(LIBDCA_VERSION 002)
-		FIND_HEADER_AND_LIB(LIBDCA_002 dts.h dts dts_init ${LIBDCA_REQUIRED_FLAGS})
-	ENDIF (NOT LIBDCA_005_FOUND)
+		IF (NOT LIBDCA_005_FOUND)
+			SET(LIBDCA_VERSION 002)
+			FIND_HEADER_AND_LIB(LIBDCA_002 dts.h dts dts_init ${LIBDCA_REQUIRED_FLAGS})
+		ENDIF (NOT LIBDCA_005_FOUND)
 
-	IF (LIBDCA_${LIBDCA_VERSION}_FOUND)
-		SET(LIBDCA_FOUND 1)
-		SET(USE_LIBDCA 1)
-		SET(USE_LIBDCA_${LIBDCA_VERSION} 1)
-		SET(LIBDCA_INCLUDE_DIR "${LIBDCA_${LIBDCA_VERSION}_INCLUDE_DIR}")
-		SET(LIBDCA_LIBRARY_DIR "${LIBDCA_${LIBDCA_VERSION}_LIBRARY_DIR}")
-	ENDIF (LIBDCA_${LIBDCA_VERSION}_FOUND)
+		IF (LIBDCA_${LIBDCA_VERSION}_FOUND)
+			SET(LIBDCA_FOUND 1)
+			SET(USE_LIBDCA_${LIBDCA_VERSION} 1)
+			SET(LIBDCA_INCLUDE_DIR "${LIBDCA_${LIBDCA_VERSION}_INCLUDE_DIR}")
+			SET(LIBDCA_LIBRARY_DIR "${LIBDCA_${LIBDCA_VERSION}_LIBRARY_DIR}")
+		ENDIF (LIBDCA_${LIBDCA_VERSION}_FOUND)
 
-	PRINT_LIBRARY_INFO("libdca" LIBDCA_FOUND "${LIBDCA_INCLUDE_DIR}" "${LIBDCA_LIBRARY_DIR}")
-ELSE (LIBDCA)
-	MESSAGE("${MSG_DISABLE_OPTION}")
-ENDIF (LIBDCA)
+		PRINT_LIBRARY_INFO("libdca" LIBDCA_FOUND "${LIBDCA_INCLUDE_DIR}" "${LIBDCA_LIBRARY_DIR}")
+	ELSE (LIBDCA)
+		MESSAGE("${MSG_DISABLE_OPTION}")
+	ENDIF (LIBDCA)
 
-MESSAGE("")
-ENDMACRO(checkDca)
+	SET(ENV{ADM_HAVE_LIBDCA} ${LIBDCA_FOUND})
 
+	MESSAGE("")
+ENDMACRO(checkDca)
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/cmake/admCheckFaad.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admCheckFaad.cmake	2008-04-03 00:48:12 UTC (rev 3966)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admCheckFaad.cmake	2008-04-03 12:37:43 UTC (rev 3967)
@@ -2,7 +2,7 @@
 #   FAAD_INCLUDE_DIR
 #   FAAD_LIBRARY_DIR
 #   FAAD_OLD_PROTOTYPE
-#   HAVE_FAAD
+#   ENV{ADM_HAVE_FAAD}
 
 MACRO(checkFaad)
 	OPTION (FAAD "" ON)
@@ -28,8 +28,6 @@
 		PRINT_LIBRARY_INFO("FAAD" FAAD_FOUND "${FAAD_INCLUDE_DIR}" "${FAAD_LIBRARY_DIR}")
 
 		IF (FAAD_FOUND)
-			SET(HAVE_FAAD 1)
-
 			CHECK_CFLAGS_REQUIRED(faad_check.cpp "-DOLD_FAAD_PROTO" "${FAAD_INCLUDE_DIR}" "${FAAD_LIBRARY_DIR}" FAAD_CFLAGS_REQUIRED)
 
 			IF (FAAD_CFLAGS_REQUIRED)
@@ -40,5 +38,7 @@
 		MESSAGE("${MSG_DISABLE_OPTION}")
 	ENDIF (FAAD)
 
+	SET(ENV{ADM_HAVE_FAAD} ${FAAD_FOUND})
+
 	MESSAGE("")
 ENDMACRO(checkFaad)
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/cmake/admConfigSummary.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admConfigSummary.cmake	2008-04-03 00:48:12 UTC (rev 3966)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admConfigSummary.cmake	2008-04-03 12:37:43 UTC (rev 3967)
@@ -1,57 +1,55 @@
 # ARGV2 - capable flag
-MACRO(ADM_DISPLAY _name _val)
-	SET(PROCEED TRUE)
-	
-	IF (${ARGC} EQUAL 3)
-		IF (NOT ${ARGV2})
-			SET(PROCEED FALSE)
-		ENDIF (NOT ${ARGV2})
-	ENDIF (${ARGC} EQUAL 3)
-	
-	IF (${PROCEED} STREQUAL "TRUE")
-		IF (${_val} EQUAL 1)
+MACRO(ADM_DISPLAY _name)
+	SET(PROCEED 1)
+
+	IF (NOT ${ARGV2})
+		SET(PROCEED 0)
+	ENDIF (NOT ${ARGV2})
+
+	IF (${PROCEED})
+		IF (${ARGV1})
 			SET(s "Yes")
-		ELSE (${_val} EQUAL 1)
+		ELSE (${ARGV1})
 			SET(s "No")
-		ENDIF (${_val} EQUAL 1)
-	
+		ENDIF (${ARGV1})
+
 		MESSAGE("   ${_name}  ${s}")
-	ENDIF (${PROCEED} STREQUAL "TRUE")
+	ENDIF (${PROCEED})
 ENDMACRO(ADM_DISPLAY)
 
 MESSAGE("*********************")
 MESSAGE("***    SUMMARY    ***")
 MESSAGE("*********************")
-ADM_DISPLAY("GTK+      " ADM_UI_GTK)
-ADM_DISPLAY("Qt 4      " ADM_UI_QT4)
+ADM_DISPLAY("GTK+      " "${ADM_UI_GTK}")
+ADM_DISPLAY("Qt 4      " "${ADM_UI_QT4}")
 
 MESSAGE("***  Video Codec  ***")
-ADM_DISPLAY("x264      " USE_X264)
-ADM_DISPLAY("Xvid      " USE_XVID_4)
+ADM_DISPLAY("x264      " "${USE_X264}")
+ADM_DISPLAY("Xvid      " "${USE_XVID_4}")
 
 MESSAGE("***  Audio Codec  ***")
-ADM_DISPLAY("Aften     " USE_AFTEN)
-ADM_DISPLAY("amrnb     " USE_AMR_NB)
-ADM_DISPLAY("LAME      " HAVE_LIBMP3LAME)
-ADM_DISPLAY("FAAC      " USE_FAAC)
-ADM_DISPLAY("FAAD      " HAVE_FAAD)
-ADM_DISPLAY("libdca    " USE_LIBDCA)
-ADM_DISPLAY("Vorbis    " USE_VORBIS)
+ADM_DISPLAY("Aften     " "${USE_AFTEN}")
+ADM_DISPLAY("amrnb     " "$ENV{ADM_HAVE_AMRNB}")
+ADM_DISPLAY("LAME      " "${HAVE_LIBMP3LAME}")
+ADM_DISPLAY("FAAC      " "${USE_FAAC}")
+ADM_DISPLAY("FAAD      " "$ENV{ADM_HAVE_FAAD}")
+ADM_DISPLAY("libdca    " "$ENV{ADM_HAVE_LIBDCA}")
+ADM_DISPLAY("Vorbis    " "${USE_VORBIS}")
 
 MESSAGE("*** Audio Device  ***")
-ADM_DISPLAY("ALSA      " ALSA_SUPPORT ${ALSA_CAPABLE})
-ADM_DISPLAY("aRts      " USE_ARTS ${ARTS_CAPABLE})
-ADM_DISPLAY("ESD       " USE_ESD ${ESD_CAPABLE})
-ADM_DISPLAY("JACK      " USE_JACK ${JACK_CAPABLE})
-ADM_DISPLAY("OSS       " OSS_SUPPORT ${OSS_CAPABLE})
-ADM_DISPLAY("SRC       " USE_SRC ${JACK_CAPABLE})
+ADM_DISPLAY("ALSA      " "${ALSA_SUPPORT}" "${ALSA_CAPABLE}")
+ADM_DISPLAY("aRts      " "${USE_ARTS}" "${ARTS_CAPABLE}")
+ADM_DISPLAY("ESD       " "${USE_ESD}" "${ESD_CAPABLE}")
+ADM_DISPLAY("JACK      " "${USE_JACK}" "${JACK_CAPABLE}")
+ADM_DISPLAY("OSS       " "${OSS_SUPPORT}" "${OSS_CAPABLE}")
+ADM_DISPLAY("SRC       " "${USE_SRC}" "${JACK_CAPABLE}")
 
 MESSAGE("*** Miscellaneous ***")
-ADM_DISPLAY("FontConfig" USE_FONTCONFIG)
-ADM_DISPLAY("FreeType2 " FREETYPE2_FOUND)
-ADM_DISPLAY("gettext   " HAVE_GETTEXT)
-ADM_DISPLAY("SDL       " USE_SDL)
-ADM_DISPLAY("XVideo    " USE_XV ${XVIDEO_CAPABLE})
+ADM_DISPLAY("FontConfig" "${USE_FONTCONFIG}")
+ADM_DISPLAY("FreeType2 " "${FREETYPE2_FOUND}")
+ADM_DISPLAY("gettext   " "${HAVE_GETTEXT}")
+ADM_DISPLAY("SDL       " "${USE_SDL}")
+ADM_DISPLAY("XVideo    " "${USE_XV}" "${XVIDEO_CAPABLE}")
 
 MESSAGE("*********************")
 



From mean at mail.berlios.de  Thu Apr  3 20:19:32 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 3 Apr 2008 20:19:32 +0200
Subject: [Avidemux-svn-commit] r3968 - in
 branches/avidemux_2.5_branch_gruntster/avidemux: . ADM_audio ADM_audiocodec
 ADM_audiodevice ADM_audiofilter ADM_codecs ADM_core/src ADM_coreUI/include
 ADM_editor ADM_encoder ADM_filter ADM_infoExtractor ADM_inputs/ADM_amv
 ADM_inputs/ADM_asf ADM_inputs/ADM_avsproxy ADM_inputs/ADM_flv
 ADM_inputs/ADM_h263 ADM_inputs/ADM_inpics ADM_inputs/ADM_matroska
 ADM_inputs/ADM_mp4 ADM_inputs/ADM_mpegdemuxer ADM_inputs/ADM_nuv
 ADM_inputs/ADM_ogm ADM_inputs/ADM_openDML ADM_libraries/ADM_lvemux
 ADM_libraries/ADM_mplex ADM_libraries/ADM_utilities ADM_ocr ADM_osSupport
 ADM_outputs ADM_outputs/oplug_avi ADM_outputs/oplug_dummy
 ADM_outputs/oplug_flv ADM_outputs/oplug_mp4 ADM_outputs/oplug_mpeg
 ADM_outputs/oplug_mpegFF ADM_outputs/oplug_ogm ADM_script ADM_toolkit
 ADM_userInterfaces/ADM_GTK/ADM_dialog
 ADM_userInterfaces/ADM_GTK/ADM_filters ADM_userInterfaces/ADM_GTK/ADM_gui2
 ADM_userInterfaces/ADM_GTK/ADM_ocr
 ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk ADM_userInterfaces/ADM_NONE!
 /ADM_dialog ADM_userInterfaces/ADM_NONE/ADM_gui2
 ADM_userInterfaces/ADM_QT4/ADM_dialog
 ADM_userInterfaces/ADM_QT4/ADM_filters ADM_userInterfaces/ADM_QT4/ADM_gui
 ADM_userInterfaces/ADM_QT4/ADM_ocr ADM_userInterfaces/ADM_commonUI
 ADM_video ADM_videoFilter
Message-ID: <200804031819.m33IJWBF012716@sheep.berlios.de>

Author: mean
Date: 2008-04-03 20:19:06 +0200 (Thu, 03 Apr 2008)
New Revision: 3968

Added:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_coreToolkit.h
Removed:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_toolkit/toolkit.hxx
Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audio/audiotimeline.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_codecwma.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/ADM_deviceSDL.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/ADM_deviceoss.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiodeng_buildfilters.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiofilter_buildchain.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiofilter_film2pal.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiofilter_normalize.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_codecs.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_ffmp43.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_ffmpeg.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_uyvy.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_crashdump.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_fileio.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_enter.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edFrameType.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edIdentify.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edLoadSave.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edit.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_outputfmt.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encCopy.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encRequant.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encXvid4.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encffmpeg.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encffmpeg1.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encmjpeg.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encmpeg2enc.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encoder.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encx264.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encyv12.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/ADM_vidDummyFilter.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter_declaration.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter_dylib.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter_saveload.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/vidVCD.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_infoExtractor/ADM_infoextractor.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_amv/ADM_amv.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_amv/ADM_amvAudio.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_asf/ADM_asf.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_asf/ADM_asfChunk.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_asf/ADM_asfPacket.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_asf/ADM_asf_audio.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_avsproxy/ADM_avsproxy.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_flv/ADM_flv.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_flv/ADM_flvAudio.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_flv/ADM_flvIndex.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_h263/ADM_h263.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_h263/ADM_mp4.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_inpics/ADM_pics.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_matroska/ADM_mkv.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_matroska/ADM_mkvEntries.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_matroska/ADM_mkvIndexer.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_matroska/ADM_mkvTrackType.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_matroska/ADM_mkv_audio.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mp4/ADM_mp4.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mp4/ADM_mp4Analyzer.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mp4/ADM_mp4Indexer.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_audio.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_indexer.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_indexer_h264.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_indexer_mpeg2.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_probe.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_probeTS.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_video.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_nuv/ADM_nuv.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_ogm/ADM_ogm.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_odml_odml.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_odml_regular.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_openDML.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_openDMLDepack.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_opendml_reindex.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_opendml_reorder.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lvemux/ADM_muxer.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mplexin.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mplexmuxer.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mplexout.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mthread.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_imageLoader.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_imageUtils.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_print.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/prefs.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_ocr/ADM_bitmapSource.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_ocr/ADM_ocr.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_ocr/ADM_ocrEngine.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_ocr/ADM_vob2vobsub.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_ocr/adm_glyph.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_crashHook.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_quota.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/ADM_lavformat.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/ADM_muxts.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/avilist.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisave.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_pack.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_unpack.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavedual.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_aviwrite.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_savesmart.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_ogm/op_ogaudio.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_ogm/op_ogsave.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_ogm/op_ogsavecopy.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_preview.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSAvidemux.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSAvidemuxAudio.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSAvidemuxVideo.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSFunctions.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSGlobal.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_toolkit/automation.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_busy.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_chromaShift.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_cnr2.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_contrast.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_crop.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eq2.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_equalizer.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eraser.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_hue.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs_save.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_mpdelogo.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_partial.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_pause.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_quota.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_srt.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_ocr.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/choice.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/toolkit_dialog.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_busy.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_encoding.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_flyDialog.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_indexing.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/alert_none.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_gui2/file_none.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_gui2/gui_none.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_busy.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_xvid4.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_asharp.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_chromashift.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_contrast.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_crop.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_encoding.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_eq2.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_hue.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_jobs.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_srt.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_vobsub.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_x264.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_x264_matrix.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_index_pg.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/alert_qt4.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/Q_mainfilter.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/file_qt4.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_ocr/Q_ocr.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flv1.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_mjpeg.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_requant.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tsSub.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_cache.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_genvideo.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_interlaced.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidCNR2.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidClean.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidColorYuv.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidEqualizer.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidFieldUnblend.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidFieldUtil.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidMPdelogo.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidPartial.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_guiResize.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_resizebis.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_resizeter.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidASS.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidAddBorder.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidAnimated.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidAsharp.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidBSmear.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidBlend.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidBlendRemoval.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidChroma.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidChromaShift.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidContrast.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidCrop.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDGbob.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDecDec.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDeintASM.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDeinterlace.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDelta.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDenoise.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDropOut.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDvbSub.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidEq2.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFade.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFastConvolution.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFields.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFlipV.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidForcedPP.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidHardIvtcRemoval.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidHue.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidLargeMedian.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidLogo.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidLuma.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLD3D.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLD3Dlow.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLResize.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMSharpen.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMosaic.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMsmooth.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidPalShift.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidPalSmart.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidPulldown.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidResampleFPS.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidResize.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidReverse.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidRotate.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSRT.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSRTRender.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSRTload.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSeparateField.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSoften.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidStabilize.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSwapFields.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSwapSmart.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidTdeint.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidThreshold.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidUVSwap.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidUnblend.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVlad.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVobSubRender.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVobsub.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidWhirl.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidYadif.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/GUI_jobs.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/gtk_gui.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/gui_autodrive.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/gui_navigate.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/gui_savenew.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/guiplay.cpp
Log:
[Merge]


Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audio/audiotimeline.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audio/audiotimeline.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audio/audiotimeline.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -18,13 +18,8 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-//#include <stream.h>
-#include "ADM_assert.h"
+#include "ADM_default.h"
 #include <math.h>
-
 #include "config.h"
 #include "avifmt.h"
 #include "avifmt2.h"
@@ -32,7 +27,6 @@
 #include "aviaudio.hxx"
 #include "prefs.h"
 
-#include "ADM_toolkit/toolkit.hxx"
 #include "ADM_userInterfaces/ADM_commonUI/DIA_working.h"
 #include "ADM_libraries/ADM_utilities/avidemutils.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_codecwma.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_codecwma.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_codecwma.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -26,7 +26,7 @@
 #include "ADM_lavcodec.h"
 
 #include "fourcc.h"
-#include "ADM_toolkit/toolkit.hxx"
+#include "DIA_coreToolkit.h"
 
 #include "ADM_audio/aviaudio.hxx"
 #include "ADM_audiocodec/ADM_audiocodec.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/ADM_deviceSDL.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/ADM_deviceSDL.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/ADM_deviceSDL.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -11,22 +11,17 @@
 //
 
 #include "config.h"
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-
 #include <errno.h>
 
 
-#include "ADM_assert.h"
+#include "ADM_default.h"
   
-#include "fourcc.h" 
  
 #ifdef USE_SDL
 #include "SDL.h"
 
 
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_audiodevice.h"
 #include "ADM_audiodevice/ADM_deviceoss.h"
 #include "ADM_audiodevice/ADM_deviceALSA.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/ADM_deviceoss.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/ADM_deviceoss.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/ADM_deviceoss.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -47,7 +47,7 @@
 #include "ADM_audiodevice.h"
 #include "ADM_assert.h"
 #include  "ADM_audiodevice/ADM_deviceoss.h"
-#include "ADM_toolkit/toolkit.hxx"
+#include "DIA_coreToolkit.h"
 #include "prefs.h"
 
 //_______________________________________________

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiodeng_buildfilters.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiodeng_buildfilters.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiodeng_buildfilters.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -25,7 +25,7 @@
 #include "ADM_audiofilter/audiofilter_limiter_param.h"
 #include "ADM_audiofilter/audiofilter_normalize_param.h"
 #include "audioprocess.hxx"
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_audiofilter/audioeng_buildfilters.h"
 
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiofilter_buildchain.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiofilter_buildchain.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiofilter_buildchain.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -17,7 +17,7 @@
 
 #include "config.h"
 #include "ADM_default.h"
-#include "ADM_toolkit/toolkit.hxx"
+#include "DIA_coreToolkit.h"
 
 #include "ADM_audio/audiomode.hxx"
 #include "ADM_audiofilter/audiofilter_limiter_param.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiofilter_film2pal.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiofilter_film2pal.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiofilter_film2pal.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -25,7 +25,7 @@
 #include "avifmt.h"
 #include "avifmt2.h"
 
-#include "ADM_toolkit/toolkit.hxx"
+
 //#include "ADM_dialog/DIA_working.h"
 #include "audioeng_process.h"
 #include "audiofilter_film2pal.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiofilter_normalize.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiofilter_normalize.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiofilter_normalize.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -28,7 +28,7 @@
 #include "avifmt.h"
 #include "avifmt2.h"
 
-#include "ADM_toolkit/toolkit.hxx"
+
 //#include "ADM_dialog/DIA_working.h"
 #include "audioeng_process.h"
 #include "audiofilter_normalize_param.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_codecs.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_codecs.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_codecs.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -19,10 +19,6 @@
  ***************************************************************************/
 #include "config.h"
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <math.h>
 
 #ifdef USE_FFMPEG
 extern "C"
@@ -63,7 +59,7 @@
 #endif
 
 #include "ADM_codecs/ADM_png.h"
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_assert.h"
 #include "prefs.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_ffmp43.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_ffmp43.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_ffmp43.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -19,9 +19,6 @@
  ***************************************************************************/
 #include "config.h"
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
 
 #include "ADM_assert.h"
 #include "prefs.h"
@@ -32,7 +29,7 @@
 
 #include "ADM_codecs/ADM_codec.h"
 #include "ADM_codecs/ADM_ffmp43.h"
-#include "ADM_toolkit/toolkit.hxx"
+#include "DIA_coreToolkit.h"
 
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME  MODULE_CODEC

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_ffmpeg.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_ffmpeg.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_ffmpeg.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -32,7 +32,7 @@
 
 #include "ADM_lavcodec.h"
 #include "avi_vars.h"
-#include "ADM_toolkit/toolkit.hxx"
+#include "DIA_coreToolkit.h"
 #include "ADM_assert.h"
 #include "ADM_codecs/ADM_ffmpeg.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_uyvy.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_uyvy.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_uyvy.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -18,14 +18,12 @@
 #if  defined( __FreeBSD__ ) || defined(__APPLE__)
 #include <sys/types.h>
 #endif
-#include <stdlib.h>
-#include <string.h>
 
 #include "ADM_default.h"
 #include "avifmt.h"
 #include "avifmt2.h"
 #include "fourcc.h"
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_codecs/ADM_codec.h"
 #include "ADM_codecs/ADM_uyvy.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_crashdump.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_crashdump.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_crashdump.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -28,8 +28,8 @@
 #endif
 
 #include "ADM_default.h"
-#include "ADM_toolkit/toolkit.hxx"
 
+
 #define CRASH_FILE "crash.js"
 
 // Our callback to give UI formatted informations....

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_fileio.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_fileio.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_fileio.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -29,8 +29,8 @@
 
 #include "ADM_default.h"
 #include "DIA_fileSel.h"
-#include "ADM_toolkit/toolkit.hxx"
 
+
 #ifdef __WIN32
 static const char *separator="\\";
 const char *ADM_DIR_NAME="\\avidemux";

Copied: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_coreToolkit.h (from rev 3967, branches/avidemux_2.5_branch_gruntster/avidemux/ADM_toolkit/toolkit.hxx)
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_toolkit/toolkit.hxx	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_coreToolkit.h	2008-04-03 18:19:06 UTC (rev 3968)
@@ -0,0 +1,46 @@
+/** *************************************************************************
+    \file                      DIA_toolkit.h
+    \brief Handle basic popup window
+                             
+    begin                : Fri Dec 14 2001--8
+    copyright            : (C) 2001 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#ifndef ADM_COREUI_TOOLKIT__
+#define ADM_COREUI_TOOLKIT__
+// These two are obsoletes...
+void            GUI_Alert(const char *alertstring);
+void            GUI_Info(const char *alertstring);
+// Display a warning/info/debug message. The primary field is the "title" of the window, secondary format is printf like
+void            GUI_Info_HIG(const ADM_LOG_LEVEL level,const char *primary, const char *secondary_format, ...);
+// Display an error message. The primary field is the "title" of the window, secondary format is printf like
+void            GUI_Error_HIG(const char *primary, const char *secondary_format, ...);
+// ask for confirmation. The button_confirm will be the title of the button (accept, do it,...) 
+int             GUI_Confirmation_HIG(const char *button_confirm, const char *primary, const char *secondary_format, ...);
+// Ask for yes/no. Yes will return 1, No will return 0
+int             GUI_YesNo(const char *primary, const char *secondary_format, ...);
+// About the same as GUI_YesNo, the button will be ok/cancel
+int             GUI_Question(const char *alertstring);
+// Give some time to the UI to handle its events
+void            GUI_Sleep(uint32_t ms);
+// Ask to choose between choice1 and choice2
+int             GUI_Alternate(char *title,char *choice1,char *choice2);
+
+
+// Set ui in verbose mode (default). Show all popup & questions
+void            GUI_Verbose(void);
+// Set the ui in silent mode. All popups & questions will be answered with their default value
+void            GUI_Quiet(void);
+// Is the UI in quiet mode ?
+uint8_t			GUI_isQuiet(void);
+#endif

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_enter.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_enter.h	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_enter.h	2008-04-03 18:19:06 UTC (rev 3968)
@@ -20,5 +20,7 @@
 uint8_t  DIA_GetFloatValue(float *value, float min, float max, const char *title, const char *legend);
 //  Get an integer value
 uint8_t  DIA_GetIntegerValue(int *value, int min, int max, const char *title, const char *legend);
+//uint8_t  		GUI_getDoubleValue(double *valye, float min, float max, const char *title);
 
+
 #endif

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edFrameType.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edFrameType.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edFrameType.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -30,7 +30,7 @@
 #include "ADM_filter/video_filters.h"
 #include "avi_vars.h"
 #include "../ADM_userInterfaces/ADM_commonUI/DIA_working.h"
-#include "ADM_toolkit/toolkit.hxx"
+#include "DIA_coreToolkit.h"
 #include "ADM_libraries/ADM_utilities/avidemutils.h"
 
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edIdentify.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edIdentify.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edIdentify.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -31,7 +31,7 @@
 //#include "ADM_3gp/ADM_3gp.h"
 #include "ADM_inputs/ADM_mp4/ADM_mp4.h"
 #include "ADM_inputs/ADM_avsproxy/ADM_avsproxy.h"
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_filter/video_filters.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edLoadSave.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edLoadSave.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edLoadSave.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -32,7 +32,7 @@
 #include "ADM_inputs/ADM_nuv/ADM_nuv.h"
 #include "ADM_inputs/ADM_h263/ADM_h263.h"
 
-#include "ADM_toolkit/toolkit.hxx"
+#include "DIA_coreToolkit.h"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_filter/video_filters.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edit.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edit.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edit.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -37,7 +37,7 @@
 #include "ADM_inputs/ADM_mp4/ADM_mp4.h"
 #include "ADM_inputs/ADM_openDML/ADM_openDML.h"
 #include "ADM_inputs/ADM_avsproxy/ADM_avsproxy.h"
-#include "ADM_toolkit/toolkit.hxx"
+#include "DIA_coreToolkit.h"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_filter/video_filters.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_outputfmt.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_outputfmt.h	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_outputfmt.h	2008-04-03 18:19:06 UTC (rev 3968)
@@ -11,6 +11,7 @@
 //
 #ifndef ADM_OUT_FMT
 #define ADM_OUT_FMT
+#include "config.h"
 typedef enum 
 {
 	ADM_AVI=0,

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -16,17 +16,13 @@
  ***************************************************************************/
 #include "config.h"
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <math.h>
-#include <string.h>
 #include "ADM_lavcodec.h"
 
 #include "ADM_assert.h"
 #include "fourcc.h"
 #include "ADM_osSupport/ADM_quota.h"
 #include "ADM_editor/ADM_edit.hxx"
-#include "ADM_toolkit/toolkit.hxx"
+#include "DIA_coreToolkit.h"
 
 #include "prefs.h"
 #include "ADM_vidEncode.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encCopy.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encCopy.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encCopy.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -22,21 +22,12 @@
  *                                                                         *
  ***************************************************************************/
 #include "config.h"
+#include "ADM_default.h"
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <math.h>
-#include <unistd.h>
-
-#include <time.h>
-#include <sys/time.h>
-
-
 #include "fourcc.h"
 #include "avi_vars.h"
-#include "ADM_toolkit/toolkit.hxx"
-#include "ADM_assert.h"
 
+
 #include "ADM_encoder/ADM_vidEncode.hxx"
 
 #include "ADM_video/ADM_genvideo.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encRequant.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encRequant.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encRequant.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -14,18 +14,10 @@
  ***************************************************************************/
 #include "config.h"
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <math.h>
-#include <unistd.h>
 
-#include <time.h>
-#include <sys/time.h>
-
-
 #include "fourcc.h"
 #include "avi_vars.h"
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_assert.h"
 
 #include "ADM_encoder/ADM_vidEncode.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encXvid4.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encXvid4.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encXvid4.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -17,22 +17,15 @@
  ***************************************************************************/
 #include "config.h"
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <math.h>
-#include <unistd.h>
 
-#include <time.h>
-#include <sys/time.h>
-
 #ifdef USE_XVID_4
 #include "xvid.h"
 
 #include "fourcc.h"
 #include "avi_vars.h"
-#include "ADM_toolkit/toolkit.hxx"
-#include "ADM_assert.h"
 
+#include "ADM_default.h"
+
 #include "ADM_encoder/ADM_vidEncode.hxx"
 
 #include "ADM_video/ADM_genvideo.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encffmpeg.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encffmpeg.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encffmpeg.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -16,24 +16,13 @@
  ***************************************************************************/
 #include "config.h"
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <math.h>
-#include <unistd.h>
-
-#include <time.h>
-#include <sys/time.h>
-
-
-
-
 #include "ADM_lavcodec.h"
 
 
 #include "fourcc.h"
 #include "avi_vars.h"
-#include "ADM_toolkit/toolkit.hxx"
-#include "ADM_assert.h"
+#include "DIA_coreToolkit.h"
+#include "ADM_default.h"
 #include "ADM_encoder/ADM_vidEncode.hxx"
 
 #include "ADM_video/ADM_genvideo.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encffmpeg1.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encffmpeg1.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encffmpeg1.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -16,9 +16,6 @@
  ***************************************************************************/
 #include "config.h"
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <math.h>
 #include <unistd.h>
 
 #include <time.h>
@@ -30,7 +27,7 @@
 
 #include "fourcc.h"
 #include "avi_vars.h"
-#include "ADM_toolkit/toolkit.hxx"
+#include "DIA_coreToolkit.h"
 #include "ADM_assert.h"
 
 #include "ADM_encoder/ADM_vidEncode.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encmjpeg.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encmjpeg.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encmjpeg.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -29,7 +29,7 @@
 #include "ADM_lavcodec.h"
 #include "fourcc.h"
 #include "avi_vars.h"
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_assert.h"
 #include "ADM_encoder/ADM_vidEncode.hxx"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encmpeg2enc.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encmpeg2enc.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encmpeg2enc.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -27,7 +27,7 @@
 #include "fourcc.h"
 #include "ADM_osSupport/ADM_quota.h"
 #include "avi_vars.h"
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_assert.h"
 
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encoder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encoder.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encoder.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -16,11 +16,6 @@
  ***************************************************************************/
 #include "config.h"
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <math.h>
-#include <unistd.h>
-
 #include <time.h>
 #include <sys/time.h>
 
@@ -32,7 +27,7 @@
 
 #include "fourcc.h"
 #include "avi_vars.h"
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_assert.h"
 
 #include "ADM_encoder/ADM_vidEncode.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encx264.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encx264.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encx264.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -19,10 +19,6 @@
  ***************************************************************************/
 #include "config.h"
 #ifdef USE_X264
-
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
 #include <math.h>
 
 #include "ADM_assert.h"
@@ -30,8 +26,8 @@
 
 #include "fourcc.h"
 #include "avi_vars.h"
-#include "ADM_toolkit/toolkit.hxx"
 
+
 #include "ADM_encoder/ADM_vidEncode.hxx"
 
 #include "ADM_video/ADM_genvideo.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encyv12.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encyv12.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encyv12.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -17,18 +17,10 @@
  ***************************************************************************/
 #include "config.h"
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <math.h>
-#include <unistd.h>
 
-#include <time.h>
-#include <sys/time.h>
-
-
 #include "fourcc.h"
 #include "avi_vars.h"
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_assert.h"
 
 #include "ADM_encoder/ADM_vidEncode.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/ADM_vidDummyFilter.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/ADM_vidDummyFilter.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/ADM_vidDummyFilter.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -23,7 +23,7 @@
 #include "fourcc.h"
 #include "avi_vars.h"
 
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_videoFilter/ADM_vidFlipV.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -24,7 +24,7 @@
 #include "config.h"
 #include "fourcc.h"
 
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_video/ADM_videoNull.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter_declaration.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter_declaration.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter_declaration.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -30,7 +30,7 @@
 #include "avi_vars.h"
 #ifdef HAVE_ENCODER
 
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_filter/video_filters.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter_dylib.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter_dylib.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter_dylib.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -32,7 +32,7 @@
 #include "ADM_assert.h"
 #include "fourcc.h"
 
-#include "ADM_toolkit/toolkit.hxx"
+#include "DIA_coreToolkit.h"
 #include "DIA_fileSel.h"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_filter/video_filters.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter_saveload.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter_saveload.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter_saveload.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -25,7 +25,7 @@
 #endif
 
 #include "fourcc.h"
-#include "ADM_toolkit/toolkit.hxx"
+#include "DIA_coreToolkit.h"
 #include "ADM_osSupport/ADM_quota.h"
 #include "ADM_assert.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/vidVCD.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/vidVCD.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/vidVCD.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -36,7 +36,7 @@
 #include "fourcc.h"
 #include "avi_vars.h"
 
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "prototype.h"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_infoExtractor/ADM_infoextractor.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_infoExtractor/ADM_infoextractor.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_infoExtractor/ADM_infoextractor.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -13,19 +13,13 @@
  ***************************************************************************/
 #include "config.h"
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <math.h>
-
-#include "ADM_assert.h"
 #include "ADM_default.h"
 #include "ADM_editor/ADM_Video.h"
 
 #include "fourcc.h"
 #include "ADM_inputs/ADM_mp4/ADM_mp4.h"
-#include "ADM_toolkit/toolkit.hxx"
 
+
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME MODULE_3GP
 #include "ADM_osSupport/ADM_debug.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_amv/ADM_amv.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_amv/ADM_amv.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_amv/ADM_amv.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -14,21 +14,14 @@
  *                                                                         *
  ***************************************************************************/
 #include "config.h"
-
-#include <stdio.h>
-#include <stdlib.h>
-
-#include <string.h>
-
 #include <math.h>
 
 #include "ADM_default.h"
 #include "ADM_editor/ADM_Video.h"
-#include "ADM_assert.h"
 
 #include "fourcc.h"
-#include "ADM_toolkit/toolkit.hxx"
 
+
 #include "ADM_amv.h"
 
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_amv/ADM_amvAudio.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_amv/ADM_amvAudio.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_amv/ADM_amvAudio.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -13,20 +13,13 @@
  ***************************************************************************/
 #include "config.h"
 
-#include <stdio.h>
-#include <stdlib.h>
-
-#include <string.h>
-
-#include <math.h>
-
 #include "ADM_default.h"
 #include "ADM_editor/ADM_Video.h"
 #include "ADM_assert.h"
 
 #include "fourcc.h"
-#include "ADM_toolkit/toolkit.hxx"
 
+
 #include "ADM_amv.h"
 
 #define vprintf(...) {}

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_asf/ADM_asf.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_asf/ADM_asf.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_asf/ADM_asf.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -13,9 +13,6 @@
  ***************************************************************************/
 #include "config.h"
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
 #include <math.h>
 
 #include "ADM_default.h"
@@ -23,7 +20,7 @@
 #include "ADM_assert.h"
 
 #include "fourcc.h"
-#include "ADM_toolkit/toolkit.hxx"
+#include "DIA_coreToolkit.h"
 //#include "DIA_working.h"
 #include "ADM_asf.h"
 #include "ADM_asfPacket.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_asf/ADM_asfChunk.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_asf/ADM_asfChunk.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_asf/ADM_asfChunk.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -25,8 +25,8 @@
 #include "ADM_assert.h"
 
 #include "fourcc.h"
-#include "ADM_toolkit/toolkit.hxx"
 
+
 #include "ADM_asf.h"
 
 // http://www.thozie.de/dnn/AVIMaster.aspx?PageContentID=4

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_asf/ADM_asfPacket.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_asf/ADM_asfPacket.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_asf/ADM_asfPacket.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -25,8 +25,8 @@
 #include "ADM_assert.h"
 
 #include "fourcc.h"
-#include "ADM_toolkit/toolkit.hxx"
 
+
 #include "ADM_asfPacket.h"
 
 #include "ADM_osSupport/ADM_debugID.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_asf/ADM_asf_audio.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_asf/ADM_asf_audio.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_asf/ADM_asf_audio.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -25,8 +25,8 @@
 #include "ADM_assert.h"
 
 #include "fourcc.h"
-#include "ADM_toolkit/toolkit.hxx"
 
+
 #include "ADM_asf.h"
 
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_avsproxy/ADM_avsproxy.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_avsproxy/ADM_avsproxy.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_avsproxy/ADM_avsproxy.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -17,8 +17,8 @@
 #include "fourcc.h"
 #include "ADM_avsproxy.h"
 #include "ADM_avsproxy_internal.h"
-#include "ADM_toolkit/toolkit.hxx"
 
+
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME MODULE_3GP
 #include "ADM_osSupport/ADM_debug.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_flv/ADM_flv.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_flv/ADM_flv.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_flv/ADM_flv.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -14,18 +14,13 @@
  *                                                                         *
  ***************************************************************************/
 #include "config.h"
-
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
 #include <math.h>
-
 #include "ADM_default.h"
 #include "ADM_editor/ADM_Video.h"
 #include "ADM_assert.h"
 
 #include "fourcc.h"
-#include "ADM_toolkit/toolkit.hxx"
+#include "DIA_coreToolkit.h"
 
 #include "ADM_flv.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_flv/ADM_flvAudio.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_flv/ADM_flvAudio.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_flv/ADM_flvAudio.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -25,8 +25,8 @@
 #include "ADM_assert.h"
 
 #include "fourcc.h"
-#include "ADM_toolkit/toolkit.hxx"
 
+
 #include "ADM_flv.h"
 
 #define vprintf(...) {}

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_flv/ADM_flvIndex.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_flv/ADM_flvIndex.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_flv/ADM_flvIndex.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -15,20 +15,14 @@
  ***************************************************************************/
 #include "config.h"
 
-#include <stdio.h>
-#include <stdlib.h>
 
-#include <string.h>
-
-#include <math.h>
-
 #include "ADM_default.h"
 #include "ADM_editor/ADM_Video.h"
-#include "ADM_assert.h"
 
+
 #include "fourcc.h"
-#include "ADM_toolkit/toolkit.hxx"
 
+
 #include "ADM_flv.h"
 
 flvTrak::flvTrak(int nb)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_h263/ADM_h263.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_h263/ADM_h263.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_h263/ADM_h263.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -32,7 +32,7 @@
 #include "fourcc.h"
 #include "ADM_h263.h"
 #include "bitsRead.h"
-#include "ADM_toolkit/toolkit.hxx"
+#include "DIA_coreToolkit.h"
 
 #ifdef H263_VERBOSE
 #define ONEOPT(x) {if(parser->read1bit()) printf(x);			}

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_h263/ADM_mp4.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_h263/ADM_mp4.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_h263/ADM_mp4.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -26,7 +26,7 @@
 
 #include "fourcc.h"
 #include "ADM_h263.h"
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "bitsRead.h"
 
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_inpics/ADM_pics.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_inpics/ADM_pics.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_inpics/ADM_pics.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -32,7 +32,7 @@
 #include "fourcc.h"
 #include "ADM_pics.h"
 #include "ADM_toolkit/bitmap.h"
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_assert.h"
 #include "DIA_fileSel.h"
 #include "ADM_osSupport/ADM_debugID.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_matroska/ADM_mkv.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_matroska/ADM_mkv.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_matroska/ADM_mkv.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -13,11 +13,6 @@
  ***************************************************************************/
 #include "config.h"
 
-#include <stdio.h>
-#include <stdlib.h>
-
-#include <string.h>
-
 #include <math.h>
 
 #include "ADM_default.h"
@@ -25,8 +20,8 @@
 #include "ADM_assert.h"
 
 #include "fourcc.h"
-#include "ADM_toolkit/toolkit.hxx"
 
+
 #include "ADM_mkv.h"
 
 #include "mkv_tags.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_matroska/ADM_mkvEntries.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_matroska/ADM_mkvEntries.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_matroska/ADM_mkvEntries.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -25,8 +25,8 @@
 #include "ADM_assert.h"
 
 #include "fourcc.h"
-#include "ADM_toolkit/toolkit.hxx"
 
+
 #include "ADM_mkv.h"
 
 #include "mkv_tags.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_matroska/ADM_mkvIndexer.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_matroska/ADM_mkvIndexer.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_matroska/ADM_mkvIndexer.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -25,8 +25,8 @@
 #include "ADM_assert.h"
 
 #include "fourcc.h"
-#include "ADM_toolkit/toolkit.hxx"
 
+
 #include "ADM_mkv.h"
 
 #include "mkv_tags.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_matroska/ADM_mkvTrackType.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_matroska/ADM_mkvTrackType.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_matroska/ADM_mkvTrackType.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -25,8 +25,8 @@
 #include "ADM_assert.h"
 
 #include "fourcc.h"
-#include "ADM_toolkit/toolkit.hxx"
 
+
 #include "ADM_mkv.h"
 
 #include "mkv_tags.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_matroska/ADM_mkv_audio.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_matroska/ADM_mkv_audio.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_matroska/ADM_mkv_audio.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -25,8 +25,8 @@
 #include "ADM_assert.h"
 
 #include "fourcc.h"
-#include "ADM_toolkit/toolkit.hxx"
 
+
 #include "ADM_mkv.h"
 #include "ADM_audio/ADM_a52info.h"
 #define vprintf(...) {}

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mp4/ADM_mp4.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mp4/ADM_mp4.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mp4/ADM_mp4.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -65,7 +65,7 @@
 
 #include "fourcc.h"
 #include "ADM_mp4.h"
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_codecs/ADM_codec.h"
 
 #include "ADM_video/ADM_videoInfoExtractor.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mp4/ADM_mp4Analyzer.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mp4/ADM_mp4Analyzer.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mp4/ADM_mp4Analyzer.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -26,7 +26,7 @@
 
 #include "fourcc.h"
 #include "ADM_mp4.h"
-#include "ADM_toolkit/toolkit.hxx"
+#include "DIA_coreToolkit.h"
 #include "ADM_codecs/ADM_codec.h"
 
 #include "ADM_mp4Tree.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mp4/ADM_mp4Indexer.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mp4/ADM_mp4Indexer.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mp4/ADM_mp4Indexer.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -26,7 +26,7 @@
 
 #include "fourcc.h"
 #include "ADM_mp4.h"
-#include "ADM_toolkit/toolkit.hxx"
+#include "DIA_coreToolkit.h"
 
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME MODULE_3GP

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_audio.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_audio.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_audio.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -31,8 +31,8 @@
 
 #include "fourcc.h"
 #include "ADM_assert.h"
-#include "ADM_toolkit/toolkit.hxx"
 
+
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME MODULE_MPEG_DEMUX
 #include "ADM_osSupport/ADM_debug.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_indexer.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_indexer.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_indexer.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -16,17 +16,12 @@
  ***************************************************************************/
 #include "config.h"
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <math.h>
-
 #include "ADM_default.h"
 #include "prefs.h"
 #include "ADM_assert.h"
 
 
-#include "ADM_toolkit/toolkit.hxx"
+#include "DIA_coreToolkit.h"
 #include "DIA_fileSel.h"
 #include "ADM_osSupport/ADM_quota.h"
 #include "ADM_userInterfaces/ADM_commonUI/DIA_idx_pg.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_indexer_h264.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_indexer_h264.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_indexer_h264.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -16,16 +16,9 @@
  ***************************************************************************/
 #include "config.h"
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <math.h>
-
 #include "ADM_default.h"
 #include "ADM_assert.h"
 
-
-#include "ADM_toolkit/toolkit.hxx"
 #include "DIA_fileSel.h"
 #include "ADM_osSupport/ADM_quota.h"
 #include "ADM_userInterfaces/ADM_commonUI/DIA_idx_pg.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_indexer_mpeg2.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_indexer_mpeg2.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_indexer_mpeg2.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -16,16 +16,8 @@
  ***************************************************************************/
 #include "config.h"
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <math.h>
-
 #include "ADM_default.h"
-#include "ADM_assert.h"
 
-
-#include "ADM_toolkit/toolkit.hxx"
 #include "DIA_fileSel.h"
 #include "ADM_osSupport/ADM_quota.h"
 #include "ADM_userInterfaces/ADM_commonUI/DIA_idx_pg.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_probe.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_probe.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_probe.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -16,15 +16,9 @@
  ***************************************************************************/
 #include "config.h"
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <math.h>
-
-#include "ADM_default.h"
 #include "ADM_assert.h"
 
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "DIA_fileSel.h"
 #include "fourcc.h"
 #include "ADM_userInterfaces/ADM_commonUI/DIA_working.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_probeTS.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_probeTS.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_probeTS.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -16,16 +16,11 @@
  ***************************************************************************/
 #include "config.h"
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <math.h>
-
 #include "ADM_default.h"
 #include "ADM_assert.h"
 
 
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "DIA_fileSel.h"
 #include "fourcc.h"
 #include "ADM_userInterfaces/ADM_commonUI/DIA_working.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_video.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_video.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_video.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -16,12 +16,8 @@
  ***************************************************************************/
 
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
 #include "config.h"
 #include <math.h>
-
 #include "ADM_default.h"
 #include "avifmt.h"
 #include "avifmt2.h"
@@ -30,10 +26,7 @@
 #include "ADM_audio/aviaudio.hxx"
 
 #include "fourcc.h"
-#include "ADM_assert.h"
-
-
-#include "ADM_toolkit/toolkit.hxx"
+#include "DIA_coreToolkit.h"
 #include "ADM_userInterfaces/ADM_commonUI/DIA_working.h"
 
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_nuv/ADM_nuv.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_nuv/ADM_nuv.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_nuv/ADM_nuv.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -53,9 +53,6 @@
 #ifdef __FreeBSD__
 	#include <sys/types.h>
 #endif
-#include <stdlib.h>
-#include <string.h>
-
 #include <math.h>
 
 #include "ADM_default.h"
@@ -76,7 +73,7 @@
 
 #include "RTjpegN.h"
 
-#include "ADM_toolkit/toolkit.hxx"
+#include "DIA_coreToolkit.h"
 #include "DIA_fileSel.h"
 
 #include "ADM_osSupport/ADM_debugID.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_ogm/ADM_ogm.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_ogm/ADM_ogm.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_ogm/ADM_ogm.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -33,19 +33,13 @@
  *                                                                         *
  ***************************************************************************/
 #include "config.h"
-
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
 #include <math.h>
-#include "ADM_assert.h"
-
 #include "ADM_default.h"
 #include "fourcc.h"
 #include "ADM_ogm.h"
 #include "ADM_ogmpages.h"
 #include "ADM_userInterfaces/ADM_commonUI/DIA_working.h"
-#include "ADM_toolkit/toolkit.hxx"
+#include "DIA_coreToolkit.h"
 
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME MODULE_OGM

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_odml_odml.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_odml_odml.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_odml_odml.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -17,21 +17,13 @@
  ***************************************************************************/
 
 #include "config.h"
-
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <math.h>
-
-#include "ADM_assert.h"
-
 #include "ADM_default.h"
 #include "ADM_editor/ADM_Video.h"
 
 #include "fourcc.h"
 #include "ADM_openDML.h"
-#include "ADM_toolkit/toolkit.hxx"
 
+
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME MODULE_ODML
 #include "ADM_osSupport/ADM_debug.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_odml_regular.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_odml_regular.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_odml_regular.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -30,8 +30,8 @@
 
 #include "fourcc.h"
 #include "ADM_openDML.h"
-#include "ADM_toolkit/toolkit.hxx"
 
+
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME MODULE_ODML
 #include "ADM_osSupport/ADM_debug.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_openDML.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_openDML.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_openDML.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -15,19 +15,12 @@
  *                                                                         *
  ***************************************************************************/
 #include "config.h"
-
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <math.h>
-
-#include "ADM_assert.h"
 #include "ADM_default.h"
 #include "ADM_editor/ADM_Video.h"
 
 #include "fourcc.h"
 #include "ADM_openDML.h"
-#include "ADM_toolkit/toolkit.hxx"
+#include "DIA_coreToolkit.h"
 #include "ADM_odml_audio.h"
 
 #include "ADM_osSupport/ADM_debugID.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_openDMLDepack.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_openDMLDepack.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_openDMLDepack.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -11,19 +11,13 @@
 //
 
 #include "config.h"
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <math.h>
-
-#include "ADM_assert.h"
 #include "ADM_default.h"
 #include "ADM_editor/ADM_Video.h"
 #include "prefs.h"
 
 #include "fourcc.h"
 #include "ADM_openDML.h"
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_userInterfaces/ADM_commonUI/DIA_working.h"
 #include "ADM_libraries/ADM_utilities/avidemutils.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_opendml_reindex.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_opendml_reindex.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_opendml_reindex.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -14,13 +14,6 @@
 //
 #include "config.h"
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <math.h>
-
-#include "ADM_assert.h"
-
 #ifdef ADM_DEBUG
 //	#define ODML_INDEX_VERBOSE
 #endif
@@ -30,7 +23,7 @@
 
 #include "fourcc.h"
 #include "ADM_openDML.h"
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_userInterfaces/ADM_commonUI/DIA_working.h"
 
 #include "ADM_osSupport/ADM_debugID.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_opendml_reorder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_opendml_reorder.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_opendml_reorder.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -17,20 +17,13 @@
 
 #include "config.h"
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <math.h>
-
-#include "ADM_assert.h"
-
 #include "ADM_default.h"
 #include "ADM_editor/ADM_Video.h"
 
 #include "fourcc.h"
 #include "ADM_openDML.h"
-#include "ADM_toolkit/toolkit.hxx"
 
+
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME MODULE_ODML
 #include "ADM_osSupport/ADM_debug.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lvemux/ADM_muxer.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lvemux/ADM_muxer.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lvemux/ADM_muxer.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -19,15 +19,9 @@
  ***************************************************************************/
 
 #include "config.h"
-
-#include <stdio.h>
-#include <stdlib.h>
 #include <math.h>
-#include <time.h>
-#include <sys/time.h>
-
 #include "ADM_default.h"
-#include "ADM_toolkit/toolkit.hxx"
+#include "DIA_coreToolkit.h"
 
 #include "ADM_audiofilter/audioprocess.hxx"
 #include "ADM_muxer.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mplexin.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mplexin.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mplexin.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -21,8 +21,8 @@
 #undef realloc
 #undef free
 
-#include "ADM_toolkit/toolkit.hxx"
 
+
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME MODULE_LAVFORMAT
 #include "ADM_osSupport/ADM_debug.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mplexmuxer.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mplexmuxer.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mplexmuxer.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -32,7 +32,7 @@
 #undef realloc
 #undef free
 
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_audiofilter/audioprocess.hxx"
 #include "ADM_audio/ADM_a52info.h"
 #include "avifmt.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mplexout.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mplexout.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mplexout.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -1,8 +1,3 @@
-#include <stdio.h>
-#include <stdlib.h>
-#include <math.h>
-#include <string.h>
-#include <sys/stat.h>
 
 #include "ADM_default.h"
 #include "ADM_threads.h"
@@ -12,8 +7,8 @@
 #undef realloc
 #undef free
 
-#include "ADM_toolkit/toolkit.hxx"
 
+
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME MODULE_LAVFORMAT
 #include "ADM_osSupport/ADM_debug.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mthread.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mthread.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mthread.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -14,15 +14,10 @@
  ***************************************************************************/
 
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <math.h>
-
 #include "ADM_default.h"
 #include "ADM_threads.h"
 
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_encoder/ADM_vidEncode.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_imageLoader.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_imageLoader.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_imageLoader.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -22,10 +22,10 @@
 #include "ADM_codecs/ADM_codec.h"
 #include "ADM_codecs/ADM_ffmp43.h"
 #include "ADM_codecs/ADM_png.h"
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_toolkit/bitmap.h"
 #include "ADM_editor/ADM_edit.hxx"
-
+#include "DIA_coreToolkit.h"
 //**********************************
 static ADMImage *createImageFromFile_jpeg(const char *filename);
 static ADMImage *createImageFromFile_Bmp(const char *filename);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_imageUtils.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_imageUtils.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_imageUtils.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -24,7 +24,7 @@
 #include "avifmt2.h"
 #include "ADM_bitstream.h"
 
-#include "ADM_toolkit/toolkit.hxx"
+#include "DIA_coreToolkit.h"
 #include "ADM_colorspace/colorspace.h"
 #include "ADM_encoder/ADM_vidEncode.hxx"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_print.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_print.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_print.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -1,15 +1,24 @@
+/***************************************************************************
+                    
+    copyright            : (C) 2006 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
 #include "config.h"
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include "ADM_assert.h"
 
-#include "config.h"
 #include "fourcc.h"
 #include "ADM_default.h"
 #include <math.h>
 
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_image.h"
 
 #include "ADM_print_priv.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/avidemutils.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -14,19 +14,15 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include <stdio.h>
-#include <stdlib.h>
-
-#include <string.h>
-//#include <sstream>
-#include "ADM_assert.h"
+#include "ADM_default.h"
+#include "config.h"
 #include <math.h>
 
-#include "config.h"
+
 #include "avifmt.h"
 #include "avifmt2.h"
 #include "fourcc.h"
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_toolkit/bitmap.h"
 #include "avidemutils.h"
 char *ADM_escape(const ADM_filename *incoming);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/prefs.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/prefs.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/prefs.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -22,10 +22,8 @@
 #include <libxml/parser.h>
 #endif
 #include "ADM_default.h"
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_osSupport/ADM_quota.h"
-#include <string.h>
-#include <strings.h>
 #include <unistd.h>	/* access(), R_OK */
 #include <errno.h>	/* errno, ENOENT */
 #include <dirent.h>

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_ocr/ADM_bitmapSource.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_ocr/ADM_bitmapSource.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_ocr/ADM_bitmapSource.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -22,8 +22,7 @@
 
  #include "ADM_ocr.h"
  #include "ADM_ocrInternal.h"
- #include "ADM_toolkit/toolkit.hxx"
- #include "DIA_enter.h"
+  #include "DIA_enter.h"
 #include "ADM_videoFilter/ADM_vidDvbSub.h"
 
 /*  *****************************

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_ocr/ADM_ocr.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_ocr/ADM_ocr.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_ocr/ADM_ocr.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -11,10 +11,6 @@
  *                                                                         *
  ***************************************************************************/
  #include "config.h"
- #include <stdio.h>
- #include <stdlib.h>
- #include <string.h>
- #include "ADM_assert.h"
 #include "ADM_default.h"
 
  #include "ADM_editor/ADM_edit.hxx"
@@ -22,8 +18,7 @@
 
  #include "ADM_ocr.h"
 #include "ADM_ocrInternal.h"
- #include "ADM_toolkit/toolkit.hxx"
- #include "DIA_enter.h"
+  #include "DIA_enter.h"
 static uint32_t minThreshold=0x80;
 
 /* In the UI related code */

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_ocr/ADM_ocrEngine.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_ocr/ADM_ocrEngine.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_ocr/ADM_ocrEngine.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -22,7 +22,7 @@
 
  #include "ADM_ocr.h"
  #include "ADM_ocrInternal.h"
- #include "ADM_toolkit/toolkit.hxx"
+ #include "DIA_coreToolkit.h"
 
 #include "ADM_video/ADM_vidMisc.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_ocr/ADM_vob2vobsub.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_ocr/ADM_vob2vobsub.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_ocr/ADM_vob2vobsub.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -24,21 +24,14 @@
  ***************************************************************************/
 #include "config.h"
 
-#include <stdio.h>
-#include <stdlib.h>
+#include "ADM_default.h"
 #include <math.h>
-#include <unistd.h>
-#include <string.h>
 
-
 #include <time.h>
 #include <sys/time.h>
 
-//#define TEST_V2V
+#include "DIA_coreToolkit.h"
 
-#include "ADM_default.h"
-#include "ADM_toolkit/toolkit.hxx"
-#include "ADM_assert.h"
 
 #include "ADM_audio/aviaudio.hxx"
 #include "ADM_audiofilter/audioprocess.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_ocr/adm_glyph.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_ocr/adm_glyph.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_ocr/adm_glyph.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -7,13 +7,9 @@
  *                                                                         *
  ***************************************************************************/
  #include "config.h"
- #include <stdio.h>
- #include <stdlib.h>
- #include <string.h>
- #include "ADM_assert.h"
 #include "ADM_default.h"
  #include "adm_glyph.h"
-#include "ADM_toolkit/toolkit.hxx"
+#include "DIA_coreToolkit.h"
  //*************************************************
 admGlyph::admGlyph(uint32_t w,uint32_t h)
 {

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_crashHook.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_crashHook.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_crashHook.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -16,7 +16,7 @@
 
 #include "config.h"
 #include "ADM_default.h"
-#include "ADM_toolkit/toolkit.hxx"
+#include "DIA_coreToolkit.h"
 #include "ADM_editor/ADM_edit.hxx"
 extern ADM_Composer *video_body;
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_quota.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_quota.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_quota.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -21,7 +21,7 @@
 #define msg_len 512
 static qfile_t qfile[qfile_len];
 
-#include "ADM_toolkit/toolkit.hxx"
+#include "DIA_coreToolkit.h"
 
          
 #ifdef USE_LIBXML2

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/ADM_lavformat.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/ADM_lavformat.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/ADM_lavformat.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -35,7 +35,7 @@
 #undef free
 
 #include "ADM_default.h"
-#include "ADM_toolkit/toolkit.hxx"
+#include "DIA_coreToolkit.h"
 
 #include "ADM_audiofilter/audioprocess.hxx"
 #include "ADM_audio/ADM_a52info.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/ADM_muxts.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/ADM_muxts.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/ADM_muxts.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -29,8 +29,8 @@
 #include "ADM_assert.h"
 
 #include "ADM_default.h"
-#include "ADM_toolkit/toolkit.hxx"
 
+
 #include "ADM_audiofilter/audioprocess.hxx"
 #include "ADM_audio/ADM_a52info.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/avilist.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/avilist.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/avilist.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -21,27 +21,14 @@
  /*
 * MODIFIED BY GMV 30.1.05: prepared for ODML
 */
- 
-#include <stdio.h>
-#include <stdlib.h>
-
-
-
-#include <string.h>
-//#include <stream.h>
-#include <math.h>
-
 #include "config.h"
+#include "ADM_default.h"
 #include "avifmt.h"
 #include "avifmt2.h"
-
-#include "ADM_assert.h"
-
 #include "fourcc.h"
-
 #include "avilist.h"
-#include "ADM_toolkit/toolkit.hxx"
 
+
 // initialize List
 
 AviList::AviList(const char *name, ADMFile * f)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisave.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisave.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisave.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -32,7 +32,7 @@
 
 #include "fourcc.h"
 #include "avi_vars.h"
-#include "ADM_toolkit/toolkit.hxx"
+#include "DIA_coreToolkit.h"
 
 //#include "avilist.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -33,7 +33,7 @@
 
 #include "fourcc.h"
 #include "avi_vars.h"
-#include "ADM_toolkit/toolkit.hxx"
+#include "DIA_coreToolkit.h"
 
 //#include "avilist.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_pack.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_pack.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_pack.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -30,7 +30,7 @@
 
 #include "fourcc.h"
 #include "avi_vars.h"
-#include "ADM_toolkit/toolkit.hxx"
+#include "DIA_coreToolkit.h"
 
 //#include "avilist.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_unpack.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_unpack.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_unpack.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -20,20 +20,13 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include <stdio.h>
-#include <stdlib.h>
-#include <math.h>
-#include <unistd.h>
-#include <time.h>
-#include <sys/time.h>
-
 #include "config.h"
 #include "ADM_default.h"
 #include "ADM_threads.h"
 
 #include "fourcc.h"
 #include "avi_vars.h"
-#include "ADM_toolkit/toolkit.hxx"
+#include "DIA_coreToolkit.h"
 
 //#include "avilist.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavedual.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavedual.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavedual.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -30,8 +30,8 @@
 
 #include "fourcc.h"
 #include "avi_vars.h"
-#include "ADM_toolkit/toolkit.hxx"
 
+
 //#include "avilist.h"
 
 #include "ADM_video/ADM_genvideo.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_aviwrite.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_aviwrite.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_aviwrite.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -42,7 +42,7 @@
 
 #include "avilist.h"
 #include "op_aviwrite.hxx"
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_osSupport/ADM_quota.h"
 #include "ADM_osSupport/ADM_fileio.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -18,13 +18,6 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include <stdio.h>
-#include <stdlib.h>
-#include <math.h>
-#include <unistd.h>
-#include <time.h>
-#include <sys/time.h>
-
 #include "config.h"
 #include "ADM_default.h"
 #include "ADM_threads.h"
@@ -32,7 +25,7 @@
 
 #include "fourcc.h"
 #include "avi_vars.h"
-#include "ADM_toolkit/toolkit.hxx"
+#include "DIA_coreToolkit.h"
 
 //#include "avilist.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_savesmart.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_savesmart.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_savesmart.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -29,7 +29,6 @@
 #include "avi_vars.h"
 #ifdef HAVE_ENCODER
 
-#include "ADM_toolkit/toolkit.hxx"
 
 #include "ADM_audio/aviaudio.hxx"
 #include "ADM_audiofilter/audioprocess.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -17,9 +17,6 @@
  *                                                                         *
  ***************************************************************************/
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
 #include <math.h>
 
 #include "config.h"
@@ -32,7 +29,7 @@
 
 #include "ADM_editor/ADM_Video.h"
 #include "ADM_colorspace/colorspace.h"
-#include "ADM_toolkit/toolkit.hxx"
+#include "DIA_coreToolkit.h"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_filter/video_filters.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -16,9 +16,6 @@
  *                                                                         *
  ***************************************************************************/
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
 #include <math.h>
 
 #include "config.h"
@@ -31,7 +28,7 @@
 
 #include "ADM_editor/ADM_Video.h"
 #include "ADM_colorspace/colorspace.h"
-#include "ADM_toolkit/toolkit.hxx"
+#include "DIA_coreToolkit.h"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_filter/video_filters.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -19,12 +19,6 @@
  *                                                                         *
  ***************************************************************************/
 #include "config.h"
-#include <stdio.h>
-#include <stdlib.h>
-
-#include <string.h>
-#include <math.h>
-
 #include "ADM_default.h"
 #include "ADM_threads.h"
 
@@ -36,7 +30,7 @@
 #include "prototype.h"
 
 #include "ADM_colorspace/colorspace.h"
-#include "ADM_toolkit/toolkit.hxx"
+#include "DIA_coreToolkit.h"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_filter/video_filters.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -11,14 +11,9 @@
 //
 //
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <math.h>
-#include <time.h>
-#include <sys/time.h>
-#include <errno.h>
 
 #include "config.h"
+#include <math.h>
 #include "ADM_default.h"
 #include "ADM_threads.h"
 
@@ -29,7 +24,7 @@
 
 #include "ADM_audiofilter/audioeng_buildfilters.h"
 #include "prefs.h"
-#include "ADM_toolkit/toolkit.hxx"
+#include "DIA_coreToolkit.h"
 #include "ADM_editor/ADM_outputfmt.h"
 #include "../ADM_lavformat.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -35,7 +35,7 @@
 #include "prototype.h"
 
 #include "ADM_colorspace/colorspace.h"
-#include "ADM_toolkit/toolkit.hxx"
+#include "DIA_coreToolkit.h"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_filter/video_filters.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_ogm/op_ogaudio.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_ogm/op_ogaudio.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_ogm/op_ogaudio.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -29,8 +29,8 @@
 #include "fourcc.h"
 #include "avi_vars.h"
 #include "ADM_assert.h"
-#include "ADM_toolkit/toolkit.hxx"
 
+
 //#include "avilist.h"
 
 #include "ADM_video/ADM_genvideo.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_ogm/op_ogsave.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_ogm/op_ogsave.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_ogm/op_ogsave.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -19,17 +19,10 @@
  ***************************************************************************/
 #include "config.h"
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <math.h>
-#include <time.h>
-#include <sys/time.h>
-
-#include "ADM_assert.h"
+#include "ADM_default.h"
 #include "fourcc.h"
 #include "avi_vars.h"
-#include "ADM_toolkit/toolkit.hxx"
+#include "DIA_coreToolkit.h"
 
 //#include "avilist.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_ogm/op_ogsavecopy.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_ogm/op_ogsavecopy.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_ogm/op_ogsavecopy.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -11,16 +11,10 @@
 //
 #include "config.h"
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <math.h>
-#include <unistd.h>
-#include <time.h>
-#include <sys/time.h>
 
 #include "fourcc.h"
 #include "avi_vars.h"
-#include "ADM_toolkit/toolkit.hxx"
+#include "ADM_default.h"
 #include "ADM_assert.h"
 
 //#include "avilist.h"
@@ -31,7 +25,7 @@
 #include "ADM_audio/aviaudio.hxx"
 #include "ADM_audiofilter/audioprocess.hxx"
 
-#include "ADM_default.h"
+
 #include "op_ogsave.h"
 
 #include "ADM_osSupport/ADM_debugID.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -30,7 +30,7 @@
 #include "config.h"
 #include "fourcc.h"
 #include "avi_vars.h"
-#include "ADM_toolkit/toolkit.hxx"
+#include "DIA_coreToolkit.h"
 
 //#include "avilist.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_preview.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_preview.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_preview.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -31,16 +31,11 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-
-#include "ADM_assert.h"
 #include "config.h"
 
 #include "ADM_default.h"
 
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_filter/video_filters.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSAvidemux.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSAvidemux.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSAvidemux.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -16,7 +16,7 @@
 #include "ADM_default.h"
 #include "ADM_JSAvidemux.h"
 #include "avi_vars.h"
-#include "ADM_toolkit/toolkit.hxx"
+#include "DIA_coreToolkit.h"
 #include "../ADM_userInterfaces/ADM_commonUI/GUI_ui.h"
 #include "ADM_script/ADM_container.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSAvidemuxAudio.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSAvidemuxAudio.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSAvidemuxAudio.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -10,12 +10,11 @@
 //
 //
 
+#include "ADM_default.h"
 #include "config.h"
-#include <stdlib.h>
 #include "ADM_JSGlobal.h"
 #include "ADM_JSAvidemuxAudio.h"
-#include "ADM_default.h"
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "../ADM_userInterfaces/ADM_commonUI/GUI_ui.h"
 #include "ADM_audiofilter/audioeng_buildfilters.h"
 #include "avi_vars.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSAvidemuxVideo.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSAvidemuxVideo.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSAvidemuxVideo.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -10,12 +10,12 @@
 // Copyright: See COPYING file that comes with this distribution
 //
 //
-#include "config.h"
-#include <stdlib.h>
+#include "ADM_default.h"
+
 #include "ADM_JSAvidemuxVideo.h"
 #include "ADM_JSGlobal.h"
-#include "ADM_default.h"
-#include "ADM_toolkit/toolkit.hxx"
+
+
 #include "../ADM_userInterfaces/ADM_commonUI/GUI_ui.h"
 #include "ADM_audiofilter/audioeng_buildfilters.h"
 #include "avi_vars.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSFunctions.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSFunctions.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSFunctions.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -27,7 +27,7 @@
 #include "ADM_JSAvidemux.h"
 #include "ADM_JSGlobal.h"
 #include "ADM_default.h"
-#include "ADM_toolkit/toolkit.hxx"
+#include "DIA_coreToolkit.h"
 #include "ADM_editor/ADM_outputfmt.h"
 #include "ADM_audiofilter/audioeng_buildfilters.h"
 #include "adm_scanner.h" 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSGlobal.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSGlobal.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSGlobal.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -1,14 +1,23 @@
-#include "config.h"
-#include <stdio.h>
-#include <stdlib.h>
+/**
+ * 
+ * 
+ */
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include "ADM_default.h"
 #include <string.h>
 #include <pthread.h>
-#include "ADM_default.h"
-#include "ADM_toolkit/toolkit.hxx"
+#include "DIA_coreToolkit.h"
 #include "ADM_JSGlobal.h"
 #include "ADM_JSAvidemux.h"
 #include "ADM_JSDirectorySearch.h"
-#include "ADM_assert.h"
 
 extern uint8_t JS_AvidemuxFunction(JSContext *cx,JSObject *global);
 extern void A_Resync(void);
@@ -17,7 +26,7 @@
 void
 printJSError(JSContext *cx, const char *message, JSErrorReport *report)
 {// begin printJSError
-int quiet=isQuiet();
+int quiet=GUI_isQuiet();
 char buf[4];
 FILE *fd = fopen(report->filename,"rb");
         if(quiet)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_toolkit/automation.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_toolkit/automation.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_toolkit/automation.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -36,7 +36,7 @@
 #include "prefs.h"
 #include "gtkgui.h"
 
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME  MODULE_COMMANDLINE
 #include "ADM_osSupport/ADM_debug.h"

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_toolkit/toolkit.hxx
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_toolkit/toolkit.hxx	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_toolkit/toolkit.hxx	2008-04-03 18:19:06 UTC (rev 3968)
@@ -1,39 +0,0 @@
-/***************************************************************************
-                          toolkit.hxx  -  description
-                             -------------------
-    begin                : Fri Dec 14 2001
-    copyright            : (C) 2001 by mean
-    email                : fixounet at free.fr
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-#ifndef __TOOLKIT__
-#define __TOOLKIT__
-
-void            GUI_Alert(const char *alertstring);
-void            GUI_Info(const char *alertstring);
-void            GUI_Info_HIG(const ADM_LOG_LEVEL level,const char *primary, const char *secondary_format, ...);
-void            GUI_Error_HIG(const char *primary, const char *secondary_format, ...);
-int             GUI_Confirmation_HIG(const char *button_confirm, const char *primary, const char *secondary_format, ...);
-int             GUI_YesNo(const char *primary, const char *secondary_format, ...);
-int             GUI_Question(const char *alertstring);
-void            GUI_Sleep(uint32_t ms);
-int             GUI_Alternate(char *title,char *choice1,char *choice2);
-uint32_t        getTime( int called );;
-void            runDialog(volatile int *lock);
-// warning : they are in GUI_enter
-uint8_t  		GUI_getDoubleValue(double *valye, float min, float max, const char *title);
-uint8_t  		GUI_getIntegerValue(int *valye, int min, int max, const char *title);
-
-uint8_t		isQuiet(void);
-void            GUI_Verbose(void);
-void            GUI_Quiet(void);
-#endif

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -28,7 +28,7 @@
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_videoFilter/ADM_vidSwissArmyKnife.h"
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "DIA_flyDialog.h"
 #include "DIA_flySwissArmyKnife.h"
 #include "DIA_factory.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_busy.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_busy.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_busy.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -19,8 +19,8 @@
  ***************************************************************************/
 
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
-#include "ADM_toolkit/toolkit.hxx"
 
+
 #include "DIA_busy.h"
 
 static GtkWidget	*create_dialog1 (void);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -18,7 +18,7 @@
 
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
 
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "DIA_fileSel.h"
 
 #include "ADM_editor/ADM_edit.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_chromaShift.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_chromaShift.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_chromaShift.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -15,8 +15,8 @@
  *                                                                         *
  ***************************************************************************/
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
-#include "ADM_toolkit/toolkit.hxx"
 
+
 #include "ADM_image.h"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_colorspace/ADM_rgb.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_cnr2.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_cnr2.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_cnr2.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -12,9 +12,9 @@
 //
 
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
-#include "ADM_toolkit/toolkit.hxx"
 
 
+
 #include "ADM_video/ADM_vidCNR2_param.h"
 
 static GtkWidget        *create_dialog1 (void);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_contrast.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_contrast.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_contrast.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -22,7 +22,7 @@
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_videoFilter/ADM_vidContrast.h"
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_colorspace/ADM_rgb.h"
 
 #include "DIA_flyDialog.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_crop.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_crop.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_crop.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -21,8 +21,8 @@
  ***************************************************************************/
 
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
-#include "ADM_toolkit/toolkit.hxx"
 
+
 #include "ADM_image.h"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_colorspace/ADM_rgb.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -12,7 +12,7 @@
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
 #include "prefs.h"
 
-#include "ADM_toolkit/toolkit.hxx"
+#include "DIA_coreToolkit.h"
 #include "ADM_libraries/ADM_utilities/avidemutils.h"
 #include "ADM_userInterfaces/ADM_commonUI/DIA_working.h"
 #include "DIA_encoding.h"
@@ -365,7 +365,7 @@
 
           sprintf(string,QT_TR_NOOP("%d%%"),(int)(100*f));
           
-          if(isQuiet()) printf("[Encoding]%s\n",string);
+          if(GUI_isQuiet()) printf("[Encoding]%s\n",string);
               gtk_progress_bar_set_text       (GTK_PROGRESS_BAR(WID(progressbar1)), string);
           
         _totalSize=_audioSize+_videoSize;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eq2.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eq2.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eq2.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -16,7 +16,7 @@
  *                                                                         *
  ***************************************************************************/
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_image.h"
 #include "ADM_video/ADM_genvideo.hxx"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_equalizer.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_equalizer.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_equalizer.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -22,7 +22,7 @@
 #include <math.h>
 
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "avi_vars.h"
 
 #include "ADM_colorspace/ADM_rgb.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eraser.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eraser.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eraser.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -27,7 +27,7 @@
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_videoFilter/ADM_vidEraser.h"
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "DIA_fileSel.h"
 
 #include "DIA_flyDialog.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_hue.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_hue.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_hue.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -19,10 +19,10 @@
  *                                                                         *
  ***************************************************************************/
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
-#include "ADM_toolkit/toolkit.hxx"
 
 
 
+
 #include "ADM_colorspace/ADM_rgb.h"
 
 #include "ADM_image.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -18,7 +18,7 @@
 #include <math.h>
 
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
-#include "ADM_toolkit/toolkit.hxx"
+#include "DIA_coreToolkit.h"
 
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_encoder/ADM_vidEncode.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -1,5 +1,5 @@
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
-#include "ADM_toolkit/toolkit.hxx"
+#include "DIA_coreToolkit.h"
 
 static GtkWidget       *create_dialog1 (void);
 static void             updateStatus(void);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs_save.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs_save.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs_save.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -1,5 +1,5 @@
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
-#include "ADM_toolkit/toolkit.hxx"
+#include "DIA_coreToolkit.h"
 #include "DIA_fileSel.h"
 #include "avidemutils.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_mpdelogo.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_mpdelogo.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_mpdelogo.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -23,8 +23,8 @@
 #include <math.h>
 
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
-#include "ADM_toolkit/toolkit.hxx"
 
+
 #include "ADM_image.h"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_colorspace/ADM_rgb.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_partial.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_partial.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_partial.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -23,11 +23,11 @@
 
 
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
-#include "ADM_toolkit/toolkit.hxx"
 
+
 #include "ADM_video/ADM_vidPartial_param.h"
 #include "ADM_video/ADM_genvideo.hxx"
-
+#include "DIA_coreToolkit.h"
 #define SPIN_GET(x,y) {param->y= gtk_spin_button_get_value_as_int(GTK_SPIN_BUTTON(WID(x))) ;}
 #define SPIN_SET(x,y)  {gtk_spin_button_set_value(GTK_SPIN_BUTTON(WID(x)),(gfloat)param->y) ;}
 #define SGET(x) gtk_spin_button_get_value_as_int(GTK_SPIN_BUTTON(WID(x))) 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -27,7 +27,7 @@
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_videoFilter/ADM_vidParticle.h"
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "DIA_fileSel.h"
 
 #include "DIA_flyDialog.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_pause.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_pause.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_pause.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -10,8 +10,8 @@
 //
 //
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
-#include "ADM_toolkit/toolkit.hxx"
 
+
 static GtkWidget	*create_dialog1 (void);
 //	Return 1 if resume, 0 if abort
 //

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -4,7 +4,7 @@
 #include <math.h>
 
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "avidemutils.h"
 #include "ADM_video/ADM_vidMisc.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_quota.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_quota.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_quota.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -10,8 +10,8 @@
 //
 //
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
-#include "ADM_toolkit/toolkit.hxx"
 
+
 static GtkWidget	*create_dialog1 (const char *);
 //	Return 1 if resume, 0 if ignore
 //

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_srt.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_srt.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_srt.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -19,7 +19,7 @@
 #ifdef USE_FREETYPE
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
 
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "DIA_fileSel.h"
 
 #include "ADM_editor/ADM_edit.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -20,7 +20,7 @@
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_videoFilter/ADM_vidThreshold.h"
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "DIA_flyDialog.h"
 #include "DIA_flyThreshold.h"
 #include "ADM_filter/video_filters.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -14,7 +14,7 @@
  *                                                                         *
  ***************************************************************************/
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "DIA_fileSel.h"
 
 #define CHECK_GET(x,y) {*y=gtk_toggle_button_get_active( GTK_TOGGLE_BUTTON(WID(x)));}

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -1,6 +1,6 @@
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
-#include "ADM_toolkit/toolkit.hxx"
 
+
 #include "avidemutils.h"
 #include "avi_vars.h"
 #ifdef USE_X264

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -1,8 +1,8 @@
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
 #include "ADM_lavcodec.h"
 
-#include "ADM_toolkit/toolkit.hxx"
 
+
 #include "ADM_encoder/ADM_vidEncode.hxx"
 //#include "ADM_gui/GUI_xvidparam.h"
 #include "prefs.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -1,6 +1,6 @@
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
 #include "DIA_fileSel.h"
-#include "ADM_toolkit/toolkit.hxx"
+#include "DIA_coreToolkit.h"
 
 #ifdef USE_XVID_4
 #include "ADM_encoder/ADM_vidEncode.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -10,7 +10,7 @@
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
 #include <vector>
 
-#include "ADM_toolkit/toolkit.hxx"
+#include "DIA_coreToolkit.h"
 #include "DIA_fileSel.h"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_editor/ADM_edit.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -35,7 +35,7 @@
 #include "../ADM_toolkit_gtk/jogshuttle.h"
 #include "../ADM_toolkit_gtk/ADM_jogshuttle.h"
 #include "gtkgui.h"
-#include "ADM_toolkit/toolkit.hxx"
+#include "DIA_coreToolkit.h"
 
 extern uint8_t UI_getPhysicalScreenSize(void* window, uint32_t *w,uint32_t *h);
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_editglyph.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -12,7 +12,7 @@
  *                                                                         *
  ***************************************************************************/
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
-#include "ADM_toolkit/toolkit.hxx"
+#include "DIA_coreToolkit.h"
 #include "DIA_fileSel.h"
 
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_ocr.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_ocr.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_ocr.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -32,7 +32,7 @@
  ***************************************************************************/
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
 
-#include "ADM_toolkit/toolkit.hxx"
+#include "DIA_coreToolkit.h"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_filter/video_filters.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -29,7 +29,7 @@
 
 #include "DIA_fileSel.h"
 #include "DIA_coreUI_internal.h"
-#include "ADM_toolkit/toolkit.hxx"
+#include "DIA_coreToolkit.h"
 #include "prefs.h"
 
 #define TH_READ 1

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/choice.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/choice.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/choice.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -15,8 +15,8 @@
  *                                                                         *
  ***************************************************************************/
 #include "toolkit_gtk.h"
-#include "ADM_toolkit/toolkit.hxx"
 
+
 static void alert_cb_ok(void);
 static void alert_cb_destroyed(void);
 static void alert_cb_ko(void);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/toolkit_dialog.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/toolkit_dialog.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/toolkit_dialog.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -102,7 +102,7 @@
 	Answers always no to question
 
 */
-uint8_t isQuiet(void )
+uint8_t GUI_isQuiet(void )
 {
 	return beQuiet;
 }

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_busy.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_busy.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_busy.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -18,18 +18,12 @@
  *                                                                         *
  ***************************************************************************/
 #include "config.h"
-#include <sys/types.h>
-#include <sys/stat.h>
-#include <unistd.h>
-#include <string.h>
-#include <stdio.h>
-#include <math.h>
 
 
 #include "ADM_default.h"
 
-#include "ADM_toolkit/toolkit.hxx"
 
+
 #include "DIA_busy.h"
 
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_encoding.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_encoding.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_encoding.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -20,8 +20,8 @@
 
 #include "prefs.h"
 
-#include "ADM_toolkit/toolkit.hxx"
 
+
 #include "ADM_assert.h" 
 
 #include "DIA_encoding.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_flyDialog.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_flyDialog.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_flyDialog.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -14,16 +14,13 @@
 
 #include "config.h"
 
-#include <string.h>
-#include <stdio.h>
-
 #include <math.h>
 
 #include "ADM_default.h"
 
 
-#include "ADM_toolkit/toolkit.hxx"
 
+
 #include "ADM_colorspace/ADM_rgb.h"
 
 #include "ADM_image.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_indexing.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_indexing.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_indexing.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -1,18 +1,13 @@
 # include "config.h"
 
-#include <sys/types.h>
-#include <sys/stat.h>
-#include <unistd.h>
-#include <string.h>
-#include <stdio.h>
 #include <math.h>
 
 #include "ADM_default.h"
 
 #include "prefs.h"
 
-#include "ADM_toolkit/toolkit.hxx"
 
+
 #include "ADM_assert.h" 
 #include "DIA_idx_pg.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/alert_none.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/alert_none.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/alert_none.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -12,8 +12,8 @@
 
 #include "prefs.h"
 
-#include "ADM_toolkit/toolkit.hxx"
 
+
 #include "ADM_assert.h" 
 
 #define BOX_SIZE 80
@@ -244,7 +244,7 @@
   return 0; 
 }
 
-uint8_t		isQuiet(void)
+uint8_t		GUI_isQuiet(void)
 {
     return beQuiet;
 }

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_gui2/file_none.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_gui2/file_none.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_gui2/file_none.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -10,10 +10,8 @@
 //
 
 #include "config.h"
-#include <stdio.h>
-#include <stdlib.h>
 #include "ADM_default.h"
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "DIA_fileSel.h"
 #include "DIA_coreUI_internal.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_gui2/gui_none.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_gui2/gui_none.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_gui2/gui_none.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -9,11 +9,9 @@
 //
 
 #include "config.h"
-#include <stdio.h>
-#include <stdlib.h>
 #include "ADM_default.h"
 #include "ADM_misc.h"
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "GUI_ui.h"
 #include "ADM_colorspace/ADM_rgb.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_busy.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_busy.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_busy.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -18,8 +18,8 @@
  *                                                                         *
  ***************************************************************************/
 #include "ADM_default.h"
-#include "ADM_toolkit/toolkit.hxx"
 
+
 #include "DIA_busy.h"
 
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -8,7 +8,7 @@
 #include "ADM_default.h"
 
 #include "DIA_factory.h"
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "DIA_fileSel.h"
 
 #include "ADM_editor/ADM_edit.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -9,7 +9,7 @@
 
 #ifdef USE_X264
 #include "ADM_default.h"
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "DIA_factory.h"
 #include "ADM_encoder/ADM_vidEncode.hxx"
 #include "ADM_codecs/ADM_x264param.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_xvid4.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_xvid4.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_xvid4.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -9,7 +9,7 @@
 
 #ifdef USE_XVID_4
 #include "ADM_default.h"
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "DIA_factory.h"
 #include "ADM_encoder/ADM_vidEncode.hxx"
 #include "ADM_codecs/ADM_xvid4param.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_asharp.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_asharp.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_asharp.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -27,7 +27,7 @@
 #undef Ui_Dialog
 
 #include "ADM_default.h"
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_image.h"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_colorspace/ADM_rgb.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_chromashift.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_chromashift.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_chromashift.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -26,7 +26,7 @@
 
 #include "ADM_default.h"
 
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_image.h"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_colorspace/ADM_rgb.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_contrast.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_contrast.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_contrast.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -26,7 +26,7 @@
 
 #include "ADM_default.h"
 
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_image.h"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_colorspace/ADM_rgb.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_crop.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_crop.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_crop.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -26,7 +26,7 @@
 
 #include "ADM_default.h"
 
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_image.h"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_colorspace/ADM_rgb.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_encoding.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_encoding.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_encoding.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -20,7 +20,7 @@
 #include "prefs.h"
 #include "DIA_working.h"
 #include "DIA_encoding.h"
-#include "ADM_toolkit/toolkit.hxx"
+#include "DIA_coreToolkit.h"
 #include "ADM_libraries/ADM_utilities/avidemutils.h"
 #include "ADM_video/ADM_vidMisc.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_eq2.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_eq2.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_eq2.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -18,7 +18,7 @@
 
 #include "ADM_default.h"
 
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_image.h"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_colorspace/ADM_rgb.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_hue.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_hue.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_hue.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -26,7 +26,6 @@
 
 #include "ADM_default.h"
 
-#include "ADM_toolkit/toolkit.hxx"
 #include "ADM_image.h"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_colorspace/ADM_rgb.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_jobs.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_jobs.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_jobs.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -7,7 +7,7 @@
 #include "ADM_default.h"
 
 
-#include "ADM_toolkit/toolkit.hxx"
+#include "DIA_coreToolkit.h"
 
 static void             updateStatus(void);
 extern bool parseECMAScript(const char *name);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_srt.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_srt.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_srt.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -23,7 +23,7 @@
 #include "config.h"
 #include "ADM_default.h"
 
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_image.h"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_colorspace/ADM_rgb.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_vobsub.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_vobsub.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_vobsub.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -20,7 +20,7 @@
 
 #include "ADM_default.h"
 
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "DIA_fileSel.h"
 #include "ADM_image.h"
 #include "ADM_video/ADM_genvideo.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_x264.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_x264.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_x264.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -25,7 +25,7 @@
 #include "ADM_default.h"
 #include "ADM_encoder/ADM_vidEncode.hxx"
 #include "ADM_codecs/ADM_x264param.h"
-#include "ADM_toolkit/toolkit.hxx"
+#include "DIA_coreToolkit.h"
 #include "avidemutils.h"
 #include "avi_vars.h"
 #include "DIA_fileSel.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_x264_matrix.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_x264_matrix.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_x264_matrix.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -21,7 +21,7 @@
 #include "ui_x264_matrix.h"
 #include "ADM_default.h"
 #include "DIA_fileSel.h"
-#include "ADM_toolkit/toolkit.hxx"
+#include "DIA_coreToolkit.h"
 
 extern int x264_cqm_parse_file(const char *filename, uint8_t* cqm_4iy, uint8_t* cqm_4ic, uint8_t* cqm_4py, uint8_t* cqm_4pc, uint8_t* cqm_8iy, uint8_t* cqm_8py);
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_index_pg.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_index_pg.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_index_pg.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -28,8 +28,8 @@
 #include <QtGui/QWidget>
 
 #include "ADM_default.h"
-#include "ADM_toolkit/toolkit.hxx"
 
+
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_encoder/ADM_vidEncode.hxx"
 #include "ADM_encoder/adm_encoder.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/alert_qt4.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/alert_qt4.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/alert_qt4.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -27,9 +27,9 @@
 #include "ADM_default.h"
 #include "prefs.h"
 
-#include "ADM_toolkit/toolkit.hxx"
 
 
+
 static int beQuiet=0;
 extern QWidget *QuiMainWindows;
 
@@ -237,7 +237,7 @@
   return 0; 
 }
 //****************************************************************************************************
-uint8_t		isQuiet(void)
+uint8_t		GUI_isQuiet(void)
 {
     return beQuiet;
 }

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/Q_mainfilter.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/Q_mainfilter.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/Q_mainfilter.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -22,12 +22,6 @@
  ***************************************************************************/
 
 #include "config.h"
-#include <stdio.h>
-#include <stdlib.h>
-#include <math.h>
-#include <sys/types.h>
-#include <sys/stat.h>
-#include <unistd.h>
 #include <vector>
 
 #define Ui_Dialog Ui_mainFilterDialog
@@ -42,10 +36,9 @@
 #include "ADM_audiodevice/audio_out.h"
 #include "ADM_audio/ADM_audiodef.h"
 
-#include "ADM_assert.h"
 #include "GUI_render.h"
 
-#include "ADM_toolkit/toolkit.hxx"
+#include "DIA_coreToolkit.h"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_filter/video_filters.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/file_qt4.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/file_qt4.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/file_qt4.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -16,7 +16,7 @@
 
 #include "ADM_default.h"
 
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "DIA_fileSel.h"
 #include "DIA_coreUI_internal.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_ocr/Q_ocr.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_ocr/Q_ocr.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_ocr/Q_ocr.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -24,7 +24,7 @@
 #include "ui_ocr.h"
 
 #include "ADM_default.h"
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "DIA_fileSel.h"
 #include "ADM_image.h"
 #include "ADM_video/ADM_genvideo.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -9,7 +9,7 @@
 
 #include "ADM_lavcodec.h"
 
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_codecs/ADM_codec.h"
 #include "ADM_encoder/ADM_vidEncode.hxx"
 #include "ADM_codecs/ADM_ffmpegConfig.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -14,8 +14,8 @@
 
 #include "config.h"
 #include "ADM_default.h"
-#include "ADM_toolkit/toolkit.hxx"
 
+
 #include "DIA_factory.h"
 #include "ADM_audiofilter/audiofilter_normalize_param.h"
 #include "ADM_audiofilter/audioeng_buildfilters.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_bitrateHisto.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -22,7 +22,7 @@
 
 #include "config.h"
 #include "ADM_default.h"
-#include "ADM_toolkit/toolkit.hxx"
+#include "DIA_coreToolkit.h"
 #include "DIA_factory.h"
 #include "avi_vars.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flv1.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flv1.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flv1.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -6,24 +6,16 @@
 */
 #include "config.h"
 
-#include <stdio.h>
-#include <stdlib.h>
-
-
 #include "ADM_lavcodec.h"
 
 #include "ADM_default.h"
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_codecs/ADM_codec.h"
 #include "ADM_encoder/ADM_vidEncode.hxx"
 #include "ADM_codecs/ADM_ffmpegConfig.h"
 #include "DIA_factory.h"
-#include "ADM_assert.h" 
+ 
 
-#include "ADM_codecs/ADM_codec.h"
-#include "ADM_encoder/ADM_vidEncode.hxx"
-#include "ADM_assert.h" 
-#include "DIA_factory.h"
 #include "../../ADM_libraries/ADM_libmpeg2enc/ADM_mpeg2enc.h"
 
 /**

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -14,8 +14,8 @@
 
 #include "config.h"
 #include "ADM_default.h"
-#include "ADM_toolkit/toolkit.hxx"
 
+
 #include "DIA_factory.h"
 #include "ADM_lavcodec.h"
 #include "ADM_codecs/ADM_ffmpegConfig.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_mjpeg.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_mjpeg.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_mjpeg.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -9,7 +9,7 @@
 
 #include "ADM_lavcodec.h"
 
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_codecs/ADM_codec.h"
 #include "ADM_encoder/ADM_vidEncode.hxx"
 #include "ADM_codecs/ADM_ffmpegConfig.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -23,10 +23,6 @@
 
 #include "config.h"
 
-
-#include <string.h>
-#include <stdio.h>
-#include <stdlib.h>
 #include <math.h>
 
 #include "ADM_default.h"
@@ -40,10 +36,10 @@
 #include "ADM_videoFilter/ADM_vobsubinfo.h"
 #include "ADM_videoFilter/ADM_vidVobSub.h"
 #include "ADM_ocr/ADM_ocr.h"
-#include "ADM_toolkit/toolkit.hxx"
+#include "DIA_coreToolkit.h"
 #include "prefs.h"
-#include "ADM_assert.h"
 
+
 #include "ADM_ocr/ADM_ocr.h"
 
 extern uint8_t DIA_vobsub(vobSubParam *param);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -14,8 +14,8 @@
 
 #include "config.h"
 #include "ADM_default.h"
-#include "ADM_toolkit/toolkit.hxx"
 
+
 #include "DIA_factory.h"
 
 int DIA_getMPParams( uint32_t *pplevel, uint32_t *ppstrength,uint32_t *swap)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -12,13 +12,6 @@
  *                                                                         *
  ***************************************************************************/
 
-
-#include <sys/types.h>
-#include <sys/stat.h>
-#include <unistd.h>
-#include <string.h>
-#include <stdio.h>
-
 #include "config.h"
 #include "ADM_default.h"
 # include "prefs.h"
@@ -27,7 +20,7 @@
 #include "ADM_assert.h"
 #include "GUI_render.h"
 
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "DIA_factory.h"
 
 #ifdef __WIN32

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_requant.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_requant.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_requant.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -5,25 +5,16 @@
 */
 #include "config.h"
 
-#include <stdio.h>
-#include <stdlib.h>
 
-
 #include "ADM_lavcodec.h"
 
 #include "ADM_default.h"
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_codecs/ADM_codec.h"
 #include "ADM_encoder/ADM_vidEncode.hxx"
 #include "ADM_codecs/ADM_ffmpegConfig.h"
-#include "DIA_factory.h"
-#include "ADM_assert.h" 
 
-
-
-#include "ADM_codecs/ADM_codec.h"
-#include "ADM_encoder/ADM_vidEncode.hxx"
-#include "ADM_assert.h" 
+  
 #include "DIA_factory.h"
 #include "../../ADM_encoder/adm_encmjpeg_param.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -19,8 +19,8 @@
 #include "ADM_video/ADM_genvideo.hxx"
 #include "DIA_flyDialog.h"
 
-#include "ADM_toolkit/toolkit.hxx"
 
+
 #include "DIA_factory.h"
 #include "ADM_encoder/ADM_vidEncode.hxx"
 //#include "ADM_video/ADM_vidFont.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tdeint.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -17,8 +17,8 @@
 #include "config.h"
 #include "ADM_default.h"
 
-#include "ADM_toolkit/toolkit.hxx"
 
+
 #include "DIA_factory.h"
 #include "ADM_videoFilter/ADM_vidTDeint_param.h"
 /**

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tsSub.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tsSub.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tsSub.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -16,16 +16,11 @@
  ***************************************************************************/
 #include "config.h"
 
-#include <sys/types.h>
-#include <sys/stat.h>
-#include <unistd.h>
-#include <string.h>
-#include <stdio.h>
 #include <math.h>
 
 #include "ADM_lavcodec.h"
 #include "ADM_default.h"
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "DIA_fileSel.h"
 #include "DIA_factory.h"
 #include "ADM_inputs/ADM_mpegdemuxer/dmx_mpegstartcode.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_v2v.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -18,7 +18,7 @@
 #include "config.h"
 #include "ADM_default.h"
 
-#include "ADM_toolkit/toolkit.hxx"
+#include "DIA_coreToolkit.h"
 #include "DIA_fileSel.h"
 #include "DIA_factory.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_cache.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_cache.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_cache.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -10,7 +10,7 @@
 //
 //
 #include "ADM_default.h"
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_video/ADM_cache.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_genvideo.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_genvideo.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_genvideo.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -28,7 +28,7 @@
 #include "fourcc.h"
 
 #include "config.h"
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_assert.h"
 
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_interlaced.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_interlaced.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_interlaced.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -30,7 +30,7 @@
  ***************************************************************************/
 #include "config.h"
 #include "ADM_default.h"
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_video/ADM_vidCommonFilter.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidCNR2.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidCNR2.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidCNR2.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -40,7 +40,6 @@
 #include "config.h"
 #include "ADM_default.h"
 
-#include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidClean.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidClean.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidClean.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -16,7 +16,7 @@
  ***************************************************************************/
 #include "ADM_default.h"
 
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_video/ADM_vidClean.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidColorYuv.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidColorYuv.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidColorYuv.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -47,7 +47,7 @@
 #include <math.h>
 
 #include "ADM_default.h"
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidEqualizer.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidEqualizer.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidEqualizer.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -10,7 +10,7 @@
 #include "ADM_default.h"
 #include <math.h>
 
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidFieldUnblend.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidFieldUnblend.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidFieldUnblend.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -17,17 +17,11 @@
  *                                                                         *
  ***************************************************************************/
 #include "config.h"
-#include <stdio.h>
-#include <stdlib.h>
 #include <string.h>
-#include "ADM_assert.h"
-
-#include "config.h"
-#include "fourcc.h"
 #include "ADM_default.h"
 #include <math.h>
 
-#include "ADM_toolkit/toolkit.hxx"
+#include "DIA_coreToolkit.h"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidFieldUtil.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidFieldUtil.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidFieldUtil.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -20,7 +20,7 @@
 
 #include "ADM_default.h"
 
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_video/ADM_vidFieldUtil.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidMPdelogo.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidMPdelogo.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidMPdelogo.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -8,7 +8,7 @@
  ***************************************************************************/
 #include "config.h"
 #include "ADM_default.h"
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_video/ADM_vidCommonFilter.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidPartial.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidPartial.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidPartial.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -22,7 +22,6 @@
 
 #include "ADM_default.h"
 
-#include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_filter/video_filters.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_guiResize.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_guiResize.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_guiResize.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -24,7 +24,7 @@
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_resizebis.hxx"
 #include "ADM_video/ADM_vidCommonFilter.h"
-#include "ADM_toolkit/toolkit.hxx"
+#include "DIA_coreToolkit.h"
 
 static int getResizeParams(uint32_t * w, uint32_t * h, uint32_t * algo,uint32_t ow,uint32_t oh,uint32_t fps);
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -19,17 +19,9 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include "config.h"
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
+#include "ADM_default.h"
 #include <math.h>
-#include "ADM_assert.h"
-
 #include "config.h"
-#include "fourcc.h"
-
-#include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_filter/video_filters.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_resizebis.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_resizebis.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_resizebis.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -24,7 +24,7 @@
 #include <math.h>
 
 #include "ADM_default.h"
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_video/ADM_vidCommonFilter.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_resizeter.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_resizeter.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_resizeter.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -24,7 +24,7 @@
 
 #include "ADM_default.h"
 
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_video/ADM_vidCommonFilter.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidASS.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidASS.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidASS.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -12,7 +12,7 @@
 */
 #include "config.h"
 #include "ADM_default.h"
-#include "ADM_toolkit/toolkit.hxx"
+#include "DIA_coreToolkit.h"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_video/ADM_vidCommonFilter.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidAddBorder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidAddBorder.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidAddBorder.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -17,7 +17,7 @@
 #include "config.h"
 #include "ADM_default.h"
 
-#include "ADM_toolkit/toolkit.hxx"
+#include "DIA_coreToolkit.h"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_vidAddBorder.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidAnimated.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidAnimated.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidAnimated.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -12,7 +12,7 @@
  *                                                                         *
  ***************************************************************************/
 #include "ADM_default.h"
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidAsharp.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidAsharp.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidAsharp.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -24,7 +24,7 @@
 */
 
 #include "ADM_default.h"
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include"ADM_video/ADM_cache.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidBSmear.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidBSmear.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidBSmear.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -24,7 +24,7 @@
 
 #include "config.h"
 #include "ADM_default.h"
-#include "ADM_toolkit/toolkit.hxx"
+#include "DIA_coreToolkit.h"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_video/ADM_vidCommonFilter.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidBlend.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidBlend.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidBlend.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -20,7 +20,7 @@
  ***************************************************************************/
 #include "config.h"
 #include "ADM_default.h"
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_vidField.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidBlendRemoval.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidBlendRemoval.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidBlendRemoval.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -27,7 +27,7 @@
 #include "ADM_default.h"
 #include <math.h>
 
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidChroma.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidChroma.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidChroma.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -17,7 +17,7 @@
 
 #include "ADM_default.h"
 
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_vidChroma.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidChromaShift.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidChromaShift.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidChromaShift.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -18,7 +18,7 @@
  ***************************************************************************/
 #include "ADM_default.h"
 
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_vidChromaShift.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -20,7 +20,6 @@
  
 #include "config.h"
 #include "ADM_default.h"
-#include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidContrast.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidContrast.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidContrast.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -17,7 +17,7 @@
 #include "ADM_default.h"
 #include <math.h>
 
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_videoFilter/ADM_vidContrast.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidCrop.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidCrop.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidCrop.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -21,7 +21,7 @@
  ***************************************************************************/
 
 #include "ADM_default.h"
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_video/ADM_vidCommonFilter.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDGbob.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDGbob.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDGbob.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -23,7 +23,6 @@
 
 #include "config.h"
 #include "ADM_default.h"
-#include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include"ADM_video/ADM_cache.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDecDec.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDecDec.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDecDec.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -42,7 +42,7 @@
 */
 #include "config.h"
 #include "ADM_default.h"
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_vidField.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -32,7 +32,7 @@
 */
 #include "config.h"
 #include "ADM_default.h"
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDeintASM.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDeintASM.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDeintASM.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -20,7 +20,7 @@
  ***************************************************************************/
 #include "config.h"
 #include "ADM_default.h"
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDeinterlace.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDeinterlace.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDeinterlace.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -21,7 +21,7 @@
  *                                                                         *
  ***************************************************************************/
 #include "ADM_default.h"
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDelta.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDelta.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDelta.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -6,7 +6,7 @@
 
 
 #include "ADM_default.h"
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDenoise.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDenoise.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDenoise.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -23,7 +23,7 @@
  ***************************************************************************/
 #include "config.h"
 #include "ADM_default.h"
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_vidDenoise.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDropOut.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDropOut.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDropOut.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -16,7 +16,7 @@
  ***************************************************************************/
 #include "config.h"
 #include "ADM_default.h"
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_vidDropOut.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDvbSub.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDvbSub.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDvbSub.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -31,7 +31,7 @@
 
 #include "fourcc.h"
 
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_video/ADM_vidCommonFilter.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidEq2.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidEq2.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidEq2.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -17,18 +17,10 @@
  *                                                                         *
  ***************************************************************************/
 #include "config.h"
-#include <stdio.h>
+#include "ADM_default.h"
 #include <math.h>
 
-#include <stdlib.h>
-#include <string.h>
-#include "ADM_assert.h"
 
-
-#include "ADM_default.h"
-
-
-#include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_filter/video_filters.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFade.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFade.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFade.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -12,7 +12,7 @@
 #include "config.h"
 #include "ADM_default.h"
 
-#include "ADM_toolkit/toolkit.hxx"
+#include "DIA_coreToolkit.h"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include"ADM_video/ADM_cache.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFastConvolution.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFastConvolution.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFastConvolution.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -15,13 +15,9 @@
  *                                                                         *
  ***************************************************************************/
 #include "config.h"
-    
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
 #include "ADM_default.h"
 
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_video/ADM_genvideo.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFields.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFields.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFields.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -16,11 +16,10 @@
  ***************************************************************************/
 #include "config.h"
 #include "ADM_default.h"
-#include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_vidField.h"
-
+#include "DIA_enter.h"
 //_______________________________________________________________
 
 ADMVideoFields::ADMVideoFields(
@@ -213,9 +212,9 @@
 	_in=instream;
 	i=(int)_param->motion_trigger;
 	j=(int)_param->blend_trigger;
-	if(GUI_getIntegerValue(&i,0,255,QT_TR_NOOP("Motion Threshold")))
+	if(DIA_GetIntegerValue(&i,0,255,QT_TR_NOOP("Motion Threshold"),""))
 	{
-		if(GUI_getIntegerValue(&j,0,255,QT_TR_NOOP("Blend Threshold")))
+		if(DIA_GetIntegerValue(&j,0,255,QT_TR_NOOP("Blend Threshold"),""))
 		{
 			_param->motion_trigger=(uint8_t)i;
 			_param->blend_trigger=(uint8_t)j;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFlipV.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFlipV.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFlipV.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -17,7 +17,6 @@
 
 #include "ADM_default.h"
 
-#include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_vidFlipV.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidForcedPP.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidForcedPP.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidForcedPP.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -14,7 +14,7 @@
 
 #include "config.h"
 #include "ADM_default.h"
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidHardIvtcRemoval.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidHardIvtcRemoval.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidHardIvtcRemoval.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -17,17 +17,11 @@
  *                                                                         *
  ***************************************************************************/
 #include "config.h"
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include "ADM_assert.h"
+#include "ADM_default.h"
 
-#include "config.h"
 #include "fourcc.h"
-#include "ADM_default.h"
 #include <math.h>
 
-#include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidHue.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidHue.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidHue.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -14,7 +14,7 @@
 #include "ADM_default.h"
 #include <math.h>
 
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_filter/video_filters.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -37,7 +37,7 @@
 #include "config.h"
 #include "ADM_default.h"
 
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidLargeMedian.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidLargeMedian.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidLargeMedian.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -22,7 +22,7 @@
 #include "config.h"
 #include "ADM_default.h"
 
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidLogo.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidLogo.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidLogo.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -19,16 +19,8 @@
 */
 #include "config.h"
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include "ADM_assert.h"
-
 #include "ADM_default.h"
 
-
-
-#include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_video/ADM_vidCommonFilter.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidLuma.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidLuma.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidLuma.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -16,7 +16,7 @@
  ***************************************************************************/
 
 #include "ADM_default.h"
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_vidLuma.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLD3D.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLD3D.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLD3D.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -21,7 +21,6 @@
 #include "config.h"
 #include "ADM_default.h"
 
-#include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_vidMPLD3D.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLD3Dlow.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLD3Dlow.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLD3Dlow.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -21,7 +21,7 @@
 #include "config.h"
 #include "ADM_default.h"
 
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_vidMPLD3Dlow.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLResize.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLResize.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLResize.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -21,7 +21,7 @@
  ***************************************************************************/
 #include "config.h"
 #include "ADM_default.h"
-#include "ADM_toolkit/toolkit.hxx"
+#include "DIA_coreToolkit.h"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_video/ADM_vidCommonFilter.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMSharpen.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMSharpen.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMSharpen.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -35,7 +35,7 @@
 
 #include "config.h"
 #include "ADM_default.h"
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_video/ADM_cache.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -26,7 +26,6 @@
 #include "ADM_lavcodec.h"
 
 
-#include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMosaic.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMosaic.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMosaic.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -16,7 +16,7 @@
  ***************************************************************************/
 #include "config.h"
 #include "ADM_default.h"
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_video/ADM_vidCommonFilter.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMsmooth.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMsmooth.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMsmooth.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -30,7 +30,7 @@
 
 #include "config.h"
 #include "ADM_default.h"
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_video/ADM_cache.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidPalShift.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidPalShift.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidPalShift.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -17,7 +17,7 @@
 #include "config.h"
 #include "ADM_default.h"
 
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_vidPalShift.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidPalSmart.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidPalSmart.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidPalSmart.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -15,7 +15,7 @@
 
 
 #include "ADM_default.h"
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidPulldown.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidPulldown.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidPulldown.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -21,7 +21,7 @@
  ***************************************************************************/
 
 #include "ADM_default.h"
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_video/ADM_vidFieldUtil.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidResampleFPS.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidResampleFPS.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidResampleFPS.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -19,7 +19,7 @@
 
 #include "config.h"
 #include "ADM_default.h"
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_filter/video_filters.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidResize.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidResize.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidResize.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -33,7 +33,7 @@
 #ifdef HAVE_ENCODER
 
 
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_resizebis.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidReverse.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidReverse.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidReverse.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -8,7 +8,7 @@
  ***************************************************************************/
 
 #include "ADM_default.h"
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include"ADM_video/ADM_cache.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidRotate.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidRotate.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidRotate.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -22,7 +22,7 @@
 #include "ADM_default.h"
 
 
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 //#include "ADM_video/ADM_vidRotate.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSRT.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSRT.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSRT.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -19,7 +19,7 @@
 
 #ifdef USE_FREETYPE
 #include "ADM_default.h"
-#include "ADM_toolkit/toolkit.hxx"
+#include "DIA_coreToolkit.h"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSRTRender.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSRTRender.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSRTRender.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -21,8 +21,8 @@
 #include <math.h>
 
 #include "ADM_default.h"
-#include "ADM_toolkit/toolkit.hxx"
 
+
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSRTload.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSRTload.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSRTload.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -35,7 +35,7 @@
 //#define __STDC_ISO_10646__
 
 #include "ADM_default.h"
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSeparateField.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSeparateField.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSeparateField.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -22,7 +22,7 @@
 
 #include "ADM_default.h"
 
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_video/ADM_vidFieldUtil.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSoften.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSoften.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSoften.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -18,7 +18,7 @@
 
 #include "config.h"
 #include "ADM_default.h"
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidStabilize.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidStabilize.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidStabilize.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -19,7 +19,7 @@
 #include "config.h"
 #include "ADM_default.h"
 
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_vidStabilize.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSwapFields.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSwapFields.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSwapFields.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -20,7 +20,7 @@
 
 #include "ADM_default.h"
 
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_video/ADM_vidFieldUtil.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSwapSmart.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSwapSmart.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSwapSmart.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -20,7 +20,7 @@
 
 #include "ADM_default.h"
 
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_vidSwapSmart.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidTdeint.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidTdeint.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidTdeint.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -42,7 +42,7 @@
 #include "ADM_default.h"
 #include <math.h>
 
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidThreshold.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidThreshold.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidThreshold.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -16,7 +16,6 @@
  
 #include "config.h"
 #include "ADM_default.h"
-#include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidUVSwap.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidUVSwap.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidUVSwap.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -16,7 +16,7 @@
  ***************************************************************************/
 
 #include "ADM_default.h"
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_vidUVSwap.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidUnblend.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidUnblend.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidUnblend.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -7,7 +7,7 @@
 #include "ADM_default.h"
 #include <math.h>
 
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVlad.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVlad.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVlad.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -22,7 +22,6 @@
  ***************************************************************************/
 #include "config.h"
 #include "ADM_default.h"
-#include "ADM_toolkit/toolkit.hxx"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_vidVlad.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVobSubRender.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVobSubRender.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVobSubRender.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -45,18 +45,14 @@
  *                                                                         *
  ***************************************************************************/
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
 
 #include "ADM_assert.h"
 #include "config.h"
 #include "fourcc.h"
 
-#include "config.h"
 #include "avi_vars.h"
 
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_filter/video_filters.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVobsub.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVobsub.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVobsub.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -34,7 +34,7 @@
 
 
 
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_filter/video_filters.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidWhirl.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidWhirl.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidWhirl.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -24,7 +24,7 @@
 #include <math.h>
 //#define LOOP
 
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_filter/video_filters.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidYadif.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidYadif.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidYadif.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -27,7 +27,7 @@
 */
 #include "config.h"
 #include "ADM_default.h"
-#include "ADM_toolkit/toolkit.hxx"
+
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_genvideo.hxx"
 #include "ADM_video/ADM_cache.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/GUI_jobs.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/GUI_jobs.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/GUI_jobs.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -21,7 +21,7 @@
 #include "ADM_default.h"
 #include "ADM_assert.h"
 #include "DIA_fileSel.h"
-#include "ADM_toolkit/toolkit.hxx"
+#include "DIA_coreToolkit.h"
 
 #define MAX_JOBS 120
 static char *jobName[MAX_JOBS];

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/gtk_gui.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/gtk_gui.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/gtk_gui.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -31,7 +31,7 @@
 #include "ADM_assert.h"
 #include "DIA_fileSel.h"
 #include "prototype.h"
-#include "ADM_toolkit/toolkit.hxx"
+#include "DIA_coreToolkit.h"
 #include "ADM_toolkit/bitmap.h"
 
 #include "ADM_audio/aviaudio.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/gui_autodrive.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/gui_autodrive.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/gui_autodrive.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -20,13 +20,11 @@
 
 #include "config.h"
 
-#include <stdio.h>
-#include <stdlib.h>
 #include <math.h>
 
 #include "avi_vars.h"
 #include "ADM_userInterfaces/ADM_commonUI/GUI_ui.h"
-#include "ADM_toolkit/toolkit.hxx"
+#include "DIA_coreToolkit.h"
 #include "ADM_assert.h"
 
 #include "ADM_audiodevice/audio_out.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/gui_navigate.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/gui_navigate.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/gui_navigate.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -31,7 +31,7 @@
 #include "ADM_audiofilter/audioprocess.hxx"
 #include "gui_action.hxx"
 #include "gtkgui.h"
-#include "ADM_toolkit/toolkit.hxx"
+#include "DIA_coreToolkit.h"
 #include "ADM_userInterfaces/ADM_commonUI/GUI_render.h"
 #include "ADM_userInterfaces/ADM_commonUI/DIA_working.h"
 #include "ADM_video/ADM_genvideo.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/gui_savenew.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/gui_savenew.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/gui_savenew.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -20,8 +20,8 @@
 
 #include "avi_vars.h"
 #include "prototype.h"
-#include "ADM_toolkit/toolkit.hxx"
-
+#include "DIA_coreToolkit.h"
+#include "DIA_enter.h"
 #include "ADM_audio/aviaudio.hxx"
 #include "ADM_audiofilter/audioprocess.hxx"
 
@@ -332,7 +332,7 @@
                     if(GUI_Question(QT_TR_NOOP("You may need smart copy.\n Enable it ?")))
                     {
                         value=4;
-                        if( ! GUI_getIntegerValue(&value, 2, 31, "_Q factor (set 4):"))
+                        if( ! DIA_GetIntegerValue(&value, 2, 31, "_Q factor (set 4):",""))
                                       return 0;
                         nw=new   GenericAviSaveSmart(value);
                     }

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/guiplay.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/guiplay.cpp	2008-04-03 12:37:43 UTC (rev 3967)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/guiplay.cpp	2008-04-03 18:19:06 UTC (rev 3968)
@@ -20,12 +20,7 @@
  ***************************************************************************/
 #include "config.h"
  
-#include <stdio.h>
-#include <stdlib.h>
 #include <math.h>
-#include <unistd.h>
-#include <errno.h>
-
 #include "prefs.h"
 #include "fourcc.h"
 #include "avi_vars.h"
@@ -35,7 +30,7 @@
 #include "prototype.h"
 #include "ADM_audiodevice/audio_out.h"
 
-#include "ADM_toolkit/toolkit.hxx"
+#include "DIA_coreToolkit.h"
 #include "ADM_audio/aviaudio.hxx"
 #include "ADM_audiofilter/audioprocess.hxx"
 



From mean at mail.berlios.de  Mon Apr  7 19:46:02 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Mon, 7 Apr 2008 19:46:02 +0200
Subject: [Avidemux-svn-commit] r3969 -
	branches/avidemux_2.4_branch/avidemux/ADM_inputs/ADM_mp4
Message-ID: <200804071746.m37Hk2bL032584@sheep.berlios.de>

Author: mean
Date: 2008-04-07 19:46:02 +0200 (Mon, 07 Apr 2008)
New Revision: 3969

Modified:
   branches/avidemux_2.4_branch/avidemux/ADM_inputs/ADM_mp4/ADM_mp4Analyzer.cpp
Log:
[Mov] Fix avc when colr atom is present

Modified: branches/avidemux_2.4_branch/avidemux/ADM_inputs/ADM_mp4/ADM_mp4Analyzer.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_inputs/ADM_mp4/ADM_mp4Analyzer.cpp	2008-04-03 18:19:06 UTC (rev 3968)
+++ branches/avidemux_2.4_branch/avidemux/ADM_inputs/ADM_mp4/ADM_mp4Analyzer.cpp	2008-04-07 17:46:02 UTC (rev 3969)
@@ -622,8 +622,14 @@
                                           commonPart(H264);
                                           // There is a avcC atom just after
                                           // configuration data for h264
+nextAtom:                                          
                                           adm_atom avcc(&son);
                                           printf("Reading avcC, got %s\n",fourCC::tostringBE(avcc.getFCC()));
+                                          if(avcc.getFCC()==MKFCCR('c','o','l','r')) // Color atom
+                                          {
+                                        	  avcc.skipAtom();
+                                        	  goto nextAtom;
+                                          }
                                           int len,offset;
                                           VDEO.extraDataSize=avcc.getRemainingSize();
                                           VDEO.extraData=new uint8_t [VDEO.extraDataSize];



From gruntster at mail.berlios.de  Thu Apr 10 16:50:27 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Thu, 10 Apr 2008 16:50:27 +0200
Subject: [Avidemux-svn-commit] r3970 - branches/avidemux_2.4_branch/po
Message-ID: <200804101450.m3AEoRD2002850@sheep.berlios.de>

Author: gruntster
Date: 2008-04-10 16:50:25 +0200 (Thu, 10 Apr 2008)
New Revision: 3970

Modified:
   branches/avidemux_2.4_branch/po/fr.po
Log:
[I18N] French update by NSV

Modified: branches/avidemux_2.4_branch/po/fr.po
===================================================================
--- branches/avidemux_2.4_branch/po/fr.po	2008-04-07 17:46:02 UTC (rev 3969)
+++ branches/avidemux_2.4_branch/po/fr.po	2008-04-10 14:50:25 UTC (rev 3970)
@@ -5,8 +5,8 @@
 msgstr ""
 "Project-Id-Version: fr\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2008-03-18 14:10+0000\n"
-"PO-Revision-Date: 2008-03-27 14:17+0100\n"
+"POT-Creation-Date: 2008-03-29 14:51+0000\n"
+"PO-Revision-Date: 2008-04-08 00:04+0100\n"
 "Last-Translator: NSV <xxNSVxx at gmail.com>\n"
 "Language-Team:  <en at li.org>\n"
 "MIME-Version: 1.0\n"
@@ -934,7 +934,7 @@
 
 #: avidemux/ADM_filter/filter_declaration.cpp:179
 msgid "Useless whirlwind effect."
-msgstr "Effecte tourbillon inutile."
+msgstr "Effect de tourbillon inutile."
 
 #: avidemux/ADM_filter/filter_declaration.cpp:180
 #: avidemux/ADM_videoFilter/ADM_vidMosaic.cpp:98
@@ -1000,7 +1000,7 @@
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:401
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:976
 msgid "Threshold"
-msgstr "Threshold"
+msgstr "Seuil"
 
 #: avidemux/ADM_filter/filter_declaration.cpp:189
 #, fuzzy
@@ -1119,7 +1119,7 @@
 
 #: avidemux/ADM_libraries/ADM_lavformat/ADM_lavformat.cpp:376
 msgid "Incompatible frame rate"
-msgstr "Fr?quence d'image incompatible"
+msgstr "Nombre d'images par seconde incompatible"
 
 #: avidemux/ADM_libraries/ADM_lvemux/ADM_muxer.cpp:85
 #: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:153
@@ -1663,7 +1663,7 @@
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:568
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:583
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:219
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1188
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1185
 #: avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp:105
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:101
 #: avidemux/ADM_videoFilter/ADM_vidRotate.cpp:264
@@ -2184,7 +2184,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_mjpeg.cpp:39
 msgid "Mjpeg Configuration"
-msgstr "Configuration Mjpeg"
+msgstr "Configuration MJPEG"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:92
 msgid "Select idx file:"
@@ -2192,7 +2192,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:93
 msgid "Use GlyphSet (optional):"
-msgstr "Utiliser un dictionnaire de symbole (optionnel) :"
+msgstr "Utiliser un dictionnaire de symboles (optionnel) :"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:93
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:210
@@ -2229,17 +2229,17 @@
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:136
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:255
 msgid "Cannot load the glyphset file."
-msgstr "Echec de chargement du fichier de dictionnaire de symbole."
+msgstr "Echec de chargement du dictionnaire de symboles."
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:156
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:276
 msgid "GlyphSet filename"
-msgstr "Nom du fichier du dictionnaire de symbole"
+msgstr "Nom du dictionnaire de symboles"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:156
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:276
 msgid "Save GlyphSet file"
-msgstr "Enregistrer le fichier de dictionnaire de symboles"
+msgstr "Enregistrer le dictionnaire de symboles"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:158
 msgid "Save Glyph"
@@ -2259,7 +2259,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:210
 msgid "Use glyphset (optional):"
-msgstr "Utiliser un dictionnaire de symbole (optionnel) :"
+msgstr "Utiliser un dictionnaire de symboles (optionnel) :"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:233
 msgid "Please Select a valid TS file."
@@ -2292,9 +2292,8 @@
 msgstr "_Eliminer les oscillations parasites"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:187
-#, fuzzy
 msgid "_Use systray while encoding"
-msgstr "_Activer le systray pendant l'encodage"
+msgstr "_Utiliser la zone de notification pendant l'encodage"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:188
 msgid "_Accept non-standard audio frequency for DVD"
@@ -2375,15 +2374,15 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:230
 msgid "_lavc threads:"
-msgstr "processus _lavc :"
+msgstr "Processus _lavc :"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:231
 msgid "_x264 threads:"
-msgstr "processus _x264 :"
+msgstr "Processus _x264 :"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:232
 msgid "X_vid threads:"
-msgstr "processus X_viD :"
+msgstr "Processus X_viD :"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:234
 msgid "Multi-threading"
@@ -2461,7 +2460,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:279
 msgid "Display only error alerts"
-msgstr "Afficher seulement s'il y a des alertes d'erreur"
+msgstr "Afficher seulement s'il y a des erreurs"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:280
 msgid "Display all alerts"
@@ -2486,7 +2485,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:294
 msgid "No downmixing"
-msgstr "Pas de baise du nombre de canaux"
+msgstr "Pas de baisse du nombre de canaux"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:296
 msgid "Pro Logic"
@@ -2505,12 +2504,10 @@
 msgstr ""
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:316
-#, fuzzy
 msgid "JACK"
 msgstr "JACK"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:325
-#, fuzzy
 msgid "Win32"
 msgstr "Win32"
 
@@ -2550,11 +2547,11 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:366
 msgid "Use _Global GlyphSet"
-msgstr "Utiliser un dictionnaire de symbole _global"
+msgstr "Utiliser un dictionnaire _global de symboles"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:367
 msgid "Gl_yphSet:"
-msgstr "_Dictionnaire de symbole :"
+msgstr "_Dictionnaire de symboles :"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:376
 msgid "Automation"
@@ -2583,11 +2580,11 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:408
 msgid "Threading"
-msgstr ""
+msgstr "Gestion des processus"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:412
 msgid "Global GlyphSet"
-msgstr "Dictionnaire de symbole global"
+msgstr "Dictionnaire global de symboles"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:416
 msgid "External Filters"
@@ -3329,7 +3326,6 @@
 msgstr "00:00:00"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:461
-#, fuzzy
 msgid "_Medium:"
 msgstr "_Support :"
 
@@ -3398,7 +3394,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:598
 msgid "<b>Audio Bitrate</b>"
-msgstr "<b>Bitrate audio</b>"
+msgstr "<b>D?bit audio</b>"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:624
 msgid "Audio size (MB):"
@@ -3564,9 +3560,8 @@
 msgstr "Gain automatique"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:408
-#, fuzzy
 msgid "Display Stats"
-msgstr "Affichage des stats"
+msgstr "Affichage des statistiques"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:412
 msgid "AutoWhite"
@@ -3832,20 +3827,20 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:25
 msgid "Ready"
-msgstr "Pr?t"
+msgstr "Pr?te"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:25
 msgid "Succeeded"
-msgstr "R?ussi"
+msgstr "R?ussie"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:25
 #: avidemux/gtk_gui.cpp:2282
 msgid "Failed"
-msgstr "Echou?"
+msgstr "Echou?e"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:25
 msgid "Deleted"
-msgstr "Supprim?"
+msgstr "Supprim?e"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:25
 msgid "Running"
@@ -3853,7 +3848,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:98
 msgid "  Job Name  "
-msgstr "  Nom de la t?che  "
+msgstr "Nom de la t?che  "
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:103
 msgid "Started at"
@@ -3866,7 +3861,7 @@
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:134
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:172
 msgid "Sure!"
-msgstr "S?r?!"
+msgstr "OK"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:134
 msgid "Delete ALL jobs"
@@ -3899,7 +3894,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:292
 msgid "Delete Job"
-msgstr "Supprimer t?che"
+msgstr "Supprimer la t?che"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:297
 msgid "Run all jobs"
@@ -3941,7 +3936,7 @@
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_filesel.cpp:90
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_filesel.cpp:244
 msgid "_Browse..."
-msgstr "_Explorer..."
+msgstr "_Parcourir..."
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs_save.cpp:154
 msgid "Job name displayed in the job list and used as the script filename"
@@ -4016,7 +4011,6 @@
 msgstr " Texte?:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:176
-#, fuzzy
 msgid "_Calibrate"
 msgstr "_Calibrer"
 
@@ -4025,7 +4019,6 @@
 msgstr "Si les symboles sont trop fins, saisir une valeur plus petite ici"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:182
-#, fuzzy
 msgid "S_kip all"
 msgstr "P_asser tous"
 
@@ -4174,7 +4167,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:234
 msgid "Frame Count:"
-msgstr "Nombre d'image :"
+msgstr "Nombre d'images :"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:241
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:419
@@ -4394,7 +4387,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_working.cpp:259
 msgid "<b>Time remaining:</b>"
-msgstr "<b>Dur?e restante :</b>"
+msgstr "<b>Restant :</b>"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:110
 #, fuzzy
@@ -4429,15 +4422,15 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:660
 msgid "Single Pass - Quality Quantizer (Average)"
-msgstr "Une passe - Qualit? Quantificateur (moyen)"
+msgstr "Une passe - Qualit? du quantificateur (moyenne)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:661
 msgid "Single Pass - Quality Quantizer (Constant)"
-msgstr "Une passe - Qualit? Quantificateur (constant)"
+msgstr "Une passe - Qualit? du quantificateur (constant)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:662
 msgid "Single Pass - Bitrate (Average)"
-msgstr "Une passe - Bitrate (moyen)"
+msgstr "Une passe - D?bit (moyenne)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:663
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:768
@@ -4451,7 +4444,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:666
 msgid "Bitrate"
-msgstr "Bitrate"
+msgstr "D?bit"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:699
 #, fuzzy
@@ -4593,22 +4586,20 @@
 msgstr "Indiquer un ratio personnalis?. Par D?faut 1:1 est recommand? pour la plupart des vid?os."
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:865
-#, fuzzy
 msgid "Predefined Aspect Ratio"
-msgstr "Ratio Pr?d?finis"
+msgstr "Rapport H/L pr?d?fini"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:870
 msgid "Set a common predefined aspect ratio"
-msgstr "Placer un radio d'aspect commun pr?d?fini"
+msgstr "D?fini un rapport H/L commun pr?d?fini"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:874
 msgid "As Input"
-msgstr "Comme entr?e"
+msgstr "Comme en entr?e"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:895
-#, fuzzy
 msgid "<b>Sample Aspect Ratio</b>"
-msgstr "<b>Exemple Ratio Aspect (A/R)</b>"
+msgstr "<b>Exemple de rapport H/L</b>"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:922
 msgid "CABAC"
@@ -4620,7 +4611,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:932
 msgid "Trellis"
-msgstr "Trellis"
+msgstr "Treillis"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:941
 #, fuzzy
@@ -4629,11 +4620,11 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:948
 msgid "Noise Reduction"
-msgstr "R?duction de bruit"
+msgstr "R?duction du bruit"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:957
 msgid "Set the amount of noise reduction"
-msgstr "Choisi le niveau de r?duction de bruit"
+msgstr "Choisi le niveau de r?duction du bruit"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:964
 msgid "Deblocking Filter"
@@ -4772,18 +4763,18 @@
 msgid "B-Frame Direct Mode"
 msgstr "Mode image-B direct?:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1185
-msgid "Auto"
-msgstr "Auto"
-
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1186
-msgid "Temporal"
-msgstr "Temporal"
+msgid "Spatial"
+msgstr "Spatiale"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1187
-msgid "Spatial"
-msgstr "Spatial"
+msgid "Temporal"
+msgstr "Temporel"
 
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1188
+msgid "Auto"
+msgstr "Auto"
+
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1190
 msgid "<b>B-Frames</b>"
 msgstr "<b>Images-B</b>"
@@ -4798,7 +4789,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1239
 msgid "Set how much bitrate is deducted from a B-frame as compared to the previous P-frame"
-msgstr "Indiquer combien est d?duit du d?bit d'une image-B par rapport ? l' image-P pr?c?dente"
+msgstr "D?fini de combien est d?duit le d?bit d'une image-B par rapport ? l' image-P pr?c?dente"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1248
 #, fuzzy
@@ -4806,12 +4797,10 @@
 msgstr "D?finir de combien le d?bit peut flotter au-dessus de la vid?o enti?re. 0% a comme cons?quence un flux de d?bit constant alors que les r?sultats de 100% est une qualit? pure bas?e sur le flux de d?bit"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1251
-#, fuzzy
 msgid "Keyframe Boost (%)"
-msgstr "Boost image-cl? (%)"
+msgstr "Boost des images-cl?s (%)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1258
-#, fuzzy
 msgid "B-frame Reduction (%)"
 msgstr "R?duction des images-B (%)"
 
@@ -4821,31 +4810,32 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1272
 msgid "<b>Bitrate</b>"
-msgstr "<b>Bitrate</b>"
+msgstr "<b>D?bit</b>"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1292
 msgid "Min QP"
-msgstr "Qp min."
+msgstr "QPel min."
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1299
 msgid "Max QP"
-msgstr "Qp max."
+msgstr "QPel max."
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1306
+#, fuzzy
 msgid "Max QP Step"
-msgstr "Max QP Step"
+msgstr "Palier max. de QPel"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1320
 msgid "Enforce a minimum quantizer level"
-msgstr "Imposer un niveau minimum de quantificateur"
+msgstr "Impose un niveau minimum de quantificateur"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1329
 msgid "Enforce a maximum quantizer level"
-msgstr "Imposer un niveau maximum de quantificateur"
+msgstr "Impose un niveau maximum de quantificateur"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1338
 msgid "Define how much the quantizer rate can change between two consecutive frames"
-msgstr "D?finir de combien le taux de quantificateur peut changer entre deux images cons?cutives"
+msgstr "D?fini de combien le taux de quantificateur peut changer entre deux images cons?cutives"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1341
 msgid "<b>Quantization Limits</b>"
@@ -4887,37 +4877,38 @@
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1430
 #, fuzzy
 msgid "VBV Buffer Size"
-msgstr "Taille buffer VBV"
+msgstr "Taille du tampon VBV"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1437
 #, fuzzy
 msgid "Initial VBV Buffer (%)"
-msgstr "Buffer VBV initial (%)"
+msgstr "Tampon VBV initial (%)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1444
-#, fuzzy
 msgid "Maximum Local Bitrate"
-msgstr "D?bit maximum local"
+msgstr "D?bit local maximum"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1475
+#, fuzzy
 msgid "<b>Video Buffer Verifier</b>"
-msgstr "<b>V?rifieur Buffer Vid?o</b>"
+msgstr "<b>V?rificateur du tampon de la vid?o</b>"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1508
 msgid "Bitrate Variance"
-msgstr "Bitrate Variance"
+msgstr "Variance de d?bit"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1521
 msgid "Allowed variance of average bitrate. Lower values mean less variance. Higher values mean more variance."
-msgstr "Variabilit? du d?bit moyen est autoris?. Des valeurs plus basses signifient moins de permissions. Des valeurs plus ?lev?es signifient plus de permissions."
+msgstr "Variabilit? autoris? du d?bit moyen. Des valeurs plus basses signifient moins de permissions. Des valeurs plus ?lev?es signifient plus de permissions."
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1530
 msgid "Allowed variance of average quantizer or quality. Lower values mean less variance. Higher values mean more variance. Note that 0 means constant quality while 1 means constant fluctuation. Recommended 0.6."
-msgstr "Variabilit? du quantificateur moyen ou de la qualit? est permis. Des valeurs plus basses signifient moins de permissions. Des valeurs plus ?lev?es signifient plus de permissions. Noter que 0 signifie qualit? constante tandis que 1 signifie une fluctuation constante. 0.6 recommand?."
+msgstr "Variabilit? autoris? du quantificateur moyen ou de la qualit?. Des valeurs plus basses signifient moins de permissions. Des valeurs plus ?lev?es signifient plus de permissions. Noter que 0 signifie qualit? constante tandis que 1 signifie une fluctuation constante. 0.6 recommand?."
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1539
+#, fuzzy
 msgid "Reduced fluctuations in Quantizer (before curve compression)"
-msgstr ""
+msgstr "Fluctucations r?duit dans le quantificateur (avant la courbe de compression)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1550
 msgid "Quantizer Compression"
@@ -4960,9 +4951,8 @@
 msgstr "Facteur de quantification entre les images-P et les images-B"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1632
-#, fuzzy
 msgid "Chroma QP Offset"
-msgstr "D?calage de la chrominance et du QP"
+msgstr "D?calage de la chrominance et du QPel"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1639
 msgid "<b>Quantizers</b>"
@@ -5006,9 +4996,8 @@
 msgstr "Plus"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1710
-#, fuzzy
 msgid "_Defaults"
-msgstr "_D?fauts"
+msgstr "Par _d?faut"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:237
 msgid "Xvid Encoder"
@@ -5020,7 +5009,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:258
 msgid "Constant Bitrate (kbps)"
-msgstr "Bitrate Constant (kbps)"
+msgstr "D?bit constant (kb/s)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:266
 msgid "Dual pass (MBytes)"
@@ -5167,7 +5156,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:739
 msgid "Bitrate (kb/s):"
-msgstr "Bitrate (kb/s)?:"
+msgstr "D?bit (kb/s)?:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:744
 msgid "Quantizer:"
@@ -5179,16 +5168,15 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:760
 msgid "Single Pass - Bitrate"
-msgstr "Une passe - d?bit"
+msgstr "Une passe - D?bit"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:764
 msgid "Single Pass - Quantizer"
 msgstr "Une passe - Quantificateur"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:776
-#, fuzzy
 msgid "Same Quantizer as Input"
-msgstr "M?me Qfer que l'entr?e"
+msgstr "M?me quantificateur qu'en entr?e"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:785
 msgid "Target video bitrate"
@@ -5264,7 +5252,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:880
 msgid "Higher settings give higher quality results, at the cost of slower encoding"
-msgstr "Plus les r?glages sont haut meilleur sera la qualit?, mais au prix d'un encodage plus lent"
+msgstr "Plus le r?glage est haut, plus la qualit? sera meilleure, mais au prix d'un encodage plus lent"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:888
 msgid "1 - Very low"
@@ -5292,7 +5280,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:917
 msgid "VHQ enables an additional search process to increase quality"
-msgstr "VHQ permet ? un processus de recherche compl?mentaire d'augmenter la qualit?"
+msgstr "Active un processus de recherche suppl?mentaire afin d'augmenter la qualit?"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:921
 msgid "0 - Off"
@@ -5316,11 +5304,11 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:947
 msgid "C_hroma motion"
-msgstr "Mouvement c_hroma"
+msgstr "Mouvement par la c_hrominance"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:950
 msgid "Use chroma information to estimate motion"
-msgstr "Utiliser les informations de chrominance pour estimer le mouvement"
+msgstr "Utilise les informations de chrominance pour estimer le mouvement"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:952
 msgid "_4MV"
@@ -5328,7 +5316,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:955
 msgid "Use 4 motion vectors per macroblock, might give better compression"
-msgstr "Utilise 4 vecteurs de mouvement par macrobloc, devrait donner une meilleure compression"
+msgstr "Utilise 4 vecteurs de mouvement par macrobloc. Devrait donner une meilleure compression"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:957
 msgid "HQ _AC"
@@ -5336,7 +5324,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:960
 msgid "Enable a better prediction of AC component. Turns on Lumi masking - applies more compression to dark/light areas that the eye cannot notice easily"
-msgstr "Permettre une meilleure pr?diction des composants AC. Met le masquage Lumi - applique plus de compression aux secteurs sombres/l?gers que l'?il ne peut pas remarquer facilement"
+msgstr "Permet une meilleure pr?diction des composants AC. Met le masquage de la luminance et applique plus de compression aux secteurs sombres/l?gers que l'?il ne peut pas facilement remarquer"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:966
 msgid "I-frame interval - Min:"
@@ -5355,7 +5343,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:984
 msgid "Maximum number of frames allowed between I-frames"
-msgstr "Nombre maximal d'images permises entre images I"
+msgstr "Nombre maximal d'images permises entre images-I"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:999
 msgid "Number of B-frames:"
@@ -5367,11 +5355,11 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1013
 msgid "_Qpel"
-msgstr "_Qpel"
+msgstr "_QPel"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1016
 msgid "Use Quarter pixel resolution for a more precise motion estimation"
-msgstr "Utilisation la r?solution de QuaterPixel pour une ?valuation de mouvement plus pr?cise"
+msgstr "Utilisation la r?solution du Quart de pixel pour une ?valuation de mouvement plus pr?cise"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1021
 msgid "Global Motion Compensation can save bits on camera pans, zooming and rotation"
@@ -5386,13 +5374,12 @@
 msgstr "Produit des images-B plus jolies"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1040
-#, fuzzy
 msgid "As input"
-msgstr "Entr?e"
+msgstr "Comme en entr?e"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1043
 msgid "Get PAR from input video file"
-msgstr "R?cup?re le rapport H/L de la vid?o d'entr?e"
+msgstr "R?cup?re le rapport H/L de la vid?o d'entr?e"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1049
 msgid "Pixel Width"
@@ -5432,7 +5419,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1107
 msgid "Load Custom Matrix:  "
-msgstr "Charger matrice personnalis?e?:"
+msgstr "Matrice personnalis?e?:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1153
 msgid "I-frame quantizer - Min:"
@@ -5476,11 +5463,11 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1238
 msgid "Rate distortion quantization, will find optimal encoding for each block"
-msgstr "La quantification d'alt?ration de taux, trouvera le codage optimal pour chaque bloc"
+msgstr "La quantification d'alt?ration du taux trouve le codage optimal pour chaque bloc"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1268
 msgid "I-frame boost (%):"
-msgstr "image-I boost (%)?:"
+msgstr "Boost des images-I (%)?:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1273
 msgid "I-frames closer than ... frames..."
@@ -5492,20 +5479,20 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1283
 msgid "Max overflow improvement (%):"
-msgstr "Am?lioration Max d?bordement (%)?:"
+msgstr "D?passement maximal de l'am?lioration (%)?:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1288
 msgid "Max overflow degradation (%):"
-msgstr "D?gradation Max d?bordement (%)?:"
+msgstr "D?passement maximal de la d?gradation (%)?:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1300
-#, c-format
+#, fuzzy, c-format
 msgid "A value of 20 will give 20% more bits to every I-frame"
-msgstr ""
+msgstr "Une valeur de 20 donnera 20% de bits en plus pour chaque image-I"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1306
 msgid "I-frames appearing in the range below this value will be treated as consecutive keyframes"
-msgstr "Les images-I de l'intervalle inf?rieur ? cette valeur seront trait?es comme des images-cl?s cons?cutives"
+msgstr "Les images-I d'intervalle inf?rieure ? cette valeur seront trait?es comme des images-cl?s cons?cutives"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1311
 msgid "Reduction of bitrate for the first consecutive I-frames. The last I-frame will get treated normally"
@@ -5513,15 +5500,15 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1316
 msgid "How much of the overflow the codec can eat into during undersized sections - larger values will bridge the gap faster"
-msgstr "Valeur du d?bordement que le codec peut traiter pour les sections sous-dimensionn?es - une valeur plus grande permettra de combler le trou plus rapidement"
+msgstr "Valeur du d?passement que le codec peut traiter pour les sections sous-dimensionn?es - une valeur plus grande permettra de combler le trou plus rapidement"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1321
 msgid "How much of the overflow the codec can eat into during oversized sections - larger values will bridge the gap faster"
-msgstr "Valeur du d?bordement que le codec peut traiter pour les sections surdimensionn?es - une valeur plus grande permettra de combler le trou plus rapidement"
+msgstr "Valeur du d?passement que le codec peut traiter pour les sections surdimensionn?es - une valeur plus grande permettra de combler le trou plus rapidement"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1323
 msgid "Two pass tuning"
-msgstr "Deux passes perso"
+msgstr "Deux passes personnalis?es"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1340
 msgid "High bitrate scenes (%):"
@@ -5533,7 +5520,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1350
 msgid "Overflow control strength (%):"
-msgstr "Puissance du contr?le du d?bordement (%)?:"
+msgstr "Puissance de contr?le du d?passement (%)?:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1362
 msgid "The higher this value, the more bits get taken from frames larger than the average size, and redistributed to others"
@@ -5545,7 +5532,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1372
 msgid "0 = default from core (let XviD decide), else overflow payback percent per frame"
-msgstr "0 = d?faut (laisser XviD d?cider), sinon valeur du pourcentage de d?bordement par image"
+msgstr "0 = d?faut (laisser XviD d?cider) sinon valeur du pourcentage de d?passement par image"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1374
 msgid "Curve compression"
@@ -5581,11 +5568,11 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:127
 msgid "Single pass - same qz as input"
-msgstr "Passe seule - m?me quantificateur qu'en entr?e"
+msgstr "Une passe - m?me quantificateur qu'en entr?e"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:129
 msgid "Single pass - Average quantizer"
-msgstr "Passe seule - Quantificateur moyen"
+msgstr "Une passe - Quantificateur moyen"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:132
 msgid "Two pass - video size"
@@ -5890,7 +5877,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:392
 msgid "Show _Joblist"
-msgstr "Montrer la liste des _t?ches"
+msgstr "Ouvrir la _liste des t?ches"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:404
 msgid "Co_nnect to avsproxy"
@@ -5898,7 +5885,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:413
 msgid "Proper_ties"
-msgstr "Propri?_t?s"
+msgstr "Propr_i?t?s"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:424
 msgid "AVI _Muxer Options"
@@ -5914,7 +5901,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:451
 msgid "_Reset Edits"
-msgstr "_R?initialiser les ?ditions"
+msgstr "_Annuler tout"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:464
 msgid "Cu_t"
@@ -5998,7 +5985,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:636
 msgid "_Frame Rate"
-msgstr "_Fr?quence d'image"
+msgstr "_Images par seconde"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:640
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:689
@@ -6729,12 +6716,14 @@
 msgstr ""
 
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:105
+#, fuzzy
 msgid "Process image (not fields)"
-msgstr ""
+msgstr "Traite l'image (pas les trames)"
 
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:106
+#, fuzzy
 msgid "Process image (not fields), debug"
-msgstr ""
+msgstr "Traite l'image (pas les trames), d?bogage"
 
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:110
 msgid "_Strategy:"
@@ -6792,11 +6781,11 @@
 
 #: avidemux/ADM_videoFilter/ADM_vidDenoise.cpp:388
 msgid "L_uma threshold:"
-msgstr "Seuil de l_uma?:"
+msgstr "Seuil de l_uminance?:"
 
 #: avidemux/ADM_videoFilter/ADM_vidDenoise.cpp:389
 msgid "Ch_roma threshold:"
-msgstr "Seuil de ch_roma :"
+msgstr "Seuil de ch_rominance :"
 
 #: avidemux/ADM_videoFilter/ADM_vidDenoise.cpp:391
 msgid "_Scene change:"
@@ -6883,8 +6872,9 @@
 msgstr ""
 
 #: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:244
+#, fuzzy
 msgid "Output \"_Color\" for all masked pixels:"
-msgstr ""
+msgstr "_Couleur de sortie pour tous les pixels masqu?s :"
 
 #: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:250
 msgid "Eraser _Data File:"
@@ -6902,7 +6892,6 @@
 msgstr ""
 
 #: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:261
-#, fuzzy
 msgid "Eraser Configuration"
 msgstr "Configuration de \"Eraser\""
 
@@ -7068,7 +7057,7 @@
 
 #: avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp:115
 msgid "_Qp:"
-msgstr "_Qp :"
+msgstr "_QPel :"
 
 #: avidemux/ADM_videoFilter/ADM_vidMosaic.cpp:90
 msgid "_Horizontal stacking:"
@@ -7223,11 +7212,11 @@
 
 #: avidemux/ADM_videoFilter/ADM_vidSoften.cpp:68
 msgid "_Luma threshold:"
-msgstr "Seuil?de la _luminance :"
+msgstr "Seuil?de _luminance :"
 
 #: avidemux/ADM_videoFilter/ADM_vidSoften.cpp:69
 msgid "C_hroma threshold:"
-msgstr "Seuil de c_hroma :"
+msgstr "Seuil de c_hrominance :"
 
 #: avidemux/ADM_videoFilter/ADM_vidSoften.cpp:70
 msgid "_Radius:"
@@ -7468,11 +7457,11 @@
 
 #: avidemux/gtk_gui.cpp:512
 msgid "Select AVI File to Append..."
-msgstr ""
+msgstr "S?lectionner le fichier AVI ? ajouter..."
 
 #: avidemux/gtk_gui.cpp:516
 msgid "Select File to Save Audio"
-msgstr ""
+msgstr "S?lectionner le fichier o? sauvegarder l'audio"
 
 #: avidemux/gtk_gui.cpp:550
 msgid "Select JPEG Sequence to Save"
@@ -7534,7 +7523,7 @@
 
 #: avidemux/gtk_gui.cpp:808
 msgid "Frame Rate"
-msgstr "Fr?quence d'image"
+msgstr "Images par seconde"
 
 #: avidemux/gtk_gui.cpp:808
 msgid "_Frames per second:"
@@ -7775,7 +7764,7 @@
 #: avidemux/gtk_gui.cpp:2008
 #: avidemux/gtk_gui.cpp:2107
 msgid "External WAV"
-msgstr "Wav externe"
+msgstr "WAV externe"
 
 #: avidemux/gtk_gui.cpp:2008
 #: avidemux/gtk_gui.cpp:2107



From gruntster at mail.berlios.de  Thu Apr 10 17:54:00 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Thu, 10 Apr 2008 17:54:00 +0200
Subject: [Avidemux-svn-commit] r3971 - in
	branches/avidemux_2.4_branch/avidemux: ADM_audiofilter
	ADM_encoder ADM_outputs/oplug_avi ADM_outputs/oplug_dummy
	ADM_outputs/oplug_flv ADM_outputs/oplug_mp4
	ADM_outputs/oplug_mpeg ADM_outputs/oplug_mpegFF
	ADM_outputs/oplug_ogm ADM_userInterfaces/ADM_GTK/ADM_dialog
	ADM_userInterfaces/ADM_commonUI
Message-ID: <200804101554.m3AFs0NB009202@sheep.berlios.de>

Author: gruntster
Date: 2008-04-10 17:53:48 +0200 (Thu, 10 Apr 2008)
New Revision: 3971

Modified:
   branches/avidemux_2.4_branch/avidemux/ADM_audiofilter/audiofilter_buildchain.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_encoder/ADM_encCodecDesc.h
   branches/avidemux_2.4_branch/avidemux/ADM_encoder/adm_encCopy.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_encoder/adm_encRequant.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_encoder/adm_encXvid4.h
   branches/avidemux_2.4_branch/avidemux/ADM_encoder/adm_encdivx.h
   branches/avidemux_2.4_branch/avidemux/ADM_encoder/adm_encffmpeg.h
   branches/avidemux_2.4_branch/avidemux/ADM_encoder/adm_encmjpeg.h
   branches/avidemux_2.4_branch/avidemux/ADM_encoder/adm_encmpeg2enc.h
   branches/avidemux_2.4_branch/avidemux/ADM_encoder/adm_encx264.h
   branches/avidemux_2.4_branch/avidemux/ADM_encoder/adm_encxvid.h
   branches/avidemux_2.4_branch/avidemux/ADM_encoder/adm_encyv12.h
   branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_avi/op_avisave.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_avi/op_avisave.h
   branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_avi/op_avisavecopy.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_pack.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_unpack.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_avi/op_savesmart.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_ogm/op_ogaudio.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_ogm/op_ogsave.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_ogm/op_ogsavecopy.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_mjpeg.cpp
Log:
[I18N] make various strings translatable

Modified: branches/avidemux_2.4_branch/avidemux/ADM_audiofilter/audiofilter_buildchain.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_audiofilter/audiofilter_buildchain.cpp	2008-04-10 14:50:25 UTC (rev 3970)
+++ branches/avidemux_2.4_branch/avidemux/ADM_audiofilter/audiofilter_buildchain.cpp	2008-04-10 15:53:48 UTC (rev 3971)
@@ -414,7 +414,7 @@
   {
     delete tmpfilter;
     tmpfilter=NULL;
-    GUI_Error_HIG("Encoder initialization failed", "Not activated."); 
+    GUI_Error_HIG(QT_TR_NOOP("Encoder initialization failed"), QT_TR_NOOP("Not activated."));
   }
   output=tmpfilter;
 

Modified: branches/avidemux_2.4_branch/avidemux/ADM_encoder/ADM_encCodecDesc.h
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_encoder/ADM_encCodecDesc.h	2008-04-10 14:50:25 UTC (rev 3970)
+++ branches/avidemux_2.4_branch/avidemux/ADM_encoder/ADM_encCodecDesc.h	2008-04-10 15:53:48 UTC (rev 3971)
@@ -10,7 +10,7 @@
 
 COMPRES_PARAMS yv12codec = {
   CodecYV12,
-  "YV12 (raw)",
+  QT_TR_NOOP("YV12 (raw)"),
   "YV12",
   "YV12",
   COMPRESS_CQ,
@@ -108,7 +108,7 @@
 
 COMPRES_PARAMS ffmpegH263Codec = {
   CodecH263,
-  "H.263 (lavc)",
+  QT_TR_NOOP("H.263 (lavc)"),
   "H263",
   "Lavcodec H263",
   COMPRESS_CQ,
@@ -124,7 +124,7 @@
 };
 COMPRES_PARAMS ffmpegH263PCodec = {
   CodecH263P,
-  "H.263+ (lavc)",
+  QT_TR_NOOP("H.263+ (lavc)"),
   "H263P",
   "Lavcodec H263+",
   COMPRESS_CQ,
@@ -140,7 +140,7 @@
 };
 COMPRES_PARAMS ffmpegMpeg4 = {
   CodecFF,
-  "MPEG-4 ASP (lavc)",
+  QT_TR_NOOP("MPEG-4 ASP (lavc)"),
   "FFMpeg4",
   "Lavcodec Mpeg4",
   COMPRESS_CQ,
@@ -156,7 +156,7 @@
 };
 COMPRES_PARAMS ffmpegDV = {
   CodecDV,
-  "DV (lavc)",
+  QT_TR_NOOP("DV (lavc)"),
   "DV",
   "DV",
   COMPRESS_CQ,
@@ -172,7 +172,7 @@
 };
 COMPRES_PARAMS ffmpegFLV1 = {
   CodecFLV1,
-  "FLV1 (lavc)",
+  QT_TR_NOOP("FLV1 (lavc)"),
   "FLV1",
   "FLV1",
   COMPRESS_CBR,
@@ -188,7 +188,7 @@
 };
 COMPRES_PARAMS ffmpegSnow = {
   CodecSnow,
-  "Snow (lavc)",
+  QT_TR_NOOP("Snow (lavc)"),
   "FFMpeg4",
   "Lavcodec Snow",
   COMPRESS_CQ,
@@ -204,7 +204,7 @@
 };
 COMPRES_PARAMS ffmpegFFHUFF = {
   CodecFFhuff,
-  "FF Huffyuv (lavc)",
+  QT_TR_NOOP("FF Huffyuv (lavc)"),
   "FFHUFF",
   "Lavcodec FF HUFFYUV",
   COMPRESS_CQ,
@@ -220,7 +220,7 @@
 };
 COMPRES_PARAMS ffmpegHUFF = {
   CodecHuff,
-  "Huffyuv (lavc)",
+  QT_TR_NOOP("Huffyuv (lavc)"),
   "HUFF",
   "Lavcodec HUFFYUV",
   COMPRESS_CQ,
@@ -236,7 +236,7 @@
 };
 COMPRES_PARAMS ffmpegFFV1 = {
   CodecFFV1,
-  "FFV1 (lavc)",
+  QT_TR_NOOP("FFV1 (lavc)"),
   "FFV1",
   "Lavcodec FFV1",
   COMPRESS_CQ,
@@ -254,7 +254,7 @@
 extern uint8_t DIA_mjpegCodecSetting (COMPRES_PARAMS * param);
 COMPRES_PARAMS MjpegCodec = {
   CodecMjpeg,
-  "MJPEG (lavc)",
+  QT_TR_NOOP("MJPEG (lavc)"),
   "Mjpeg",
   "Mjpeg (lavcodec)",
   COMPRESS_CQ,
@@ -311,7 +311,7 @@
 
 COMPRES_PARAMS ffmpeg1Codec = {
   CodecXVCD,
-  "VCD (lavc)",
+  QT_TR_NOOP("VCD (lavc)"),
   "XVCD",
   "Lavcodec Mpeg1",
   COMPRESS_CQ,
@@ -371,7 +371,7 @@
 
 COMPRES_PARAMS ffmpeg2DVDCodec = {
   CodecXDVD,
-  "DVD (lavc)",
+  QT_TR_NOOP("DVD (lavc)"),
   "XDVD",
   "Lavcodec Mpeg2 (DVD)",
   COMPRESS_CQ,
@@ -431,7 +431,7 @@
 
 COMPRES_PARAMS ffmpeg2SVCDCodec = {
   CodecXSVCD,
-  "SVCD (lavc)",
+  QT_TR_NOOP("SVCD (lavc)"),
   "XSVCD",
   "Lavcodec Mpeg2 (SVCD)",
   COMPRESS_CQ,
@@ -458,9 +458,9 @@
 
 COMPRES_PARAMS VCDCodec = {
   CodecVCD,
-  "VCD (mpeg2enc)",
+  QT_TR_NOOP("VCD (mpeg2enc)"),
   "VCD",
-  "Mpeg2enc(VCD)",
+  "Mpeg2enc (VCD)",
   COMPRESS_CBR,
   4,
   1500,
@@ -490,9 +490,9 @@
 
 COMPRES_PARAMS SVCDCodec = {
   CodecSVCD,
-  "SVCD (mpeg2enc)",
+  QT_TR_NOOP("SVCD (mpeg2enc)"),
   "SVCD",
-  "Mpeg2enc(SVCD)",
+  "Mpeg2enc (SVCD)",
   COMPRESS_CQ,
   4,
   1500,
@@ -509,7 +509,7 @@
 uint32_t RequantFactorExtra=1000; // 1000* the actual requant factor
 COMPRES_PARAMS RequantCodec = {
     CodecRequant,
-    "MPEG-2 requant",
+    QT_TR_NOOP("MPEG-2 requant"),
     "REQUANT",
     "Mpeg2 Requantizer",
     COMPRESS_CQ,
@@ -536,9 +536,9 @@
 
 COMPRES_PARAMS DVDCodec = {
   CodecDVD,
-  "DVD (mpeg2enc)",
+  QT_TR_NOOP("(DVD) mpeg2enc"),
   "DVD",
-  "Mpeg2enc(DVD)",
+  "Mpeg2enc (DVD)",
   COMPRESS_CQ,
   4,
   1500,
@@ -668,7 +668,7 @@
 extern uint8_t DIA_xvid4 (COMPRES_PARAMS * incoming);
 COMPRES_PARAMS Xvid4Codec = {
   CodecXvid4,
-  "MPEG-4 ASP (Xvid4)",
+  QT_TR_NOOP("MPEG-4 ASP (Xvid4)"),
   "XVID4",
   "XVID 4 mpeg4",
   COMPRESS_CQ,
@@ -809,7 +809,7 @@
 extern uint8_t DIA_x264 (COMPRES_PARAMS * conf);
 COMPRES_PARAMS x264Codec = {
   CodecX264,
-  "MPEG-4 AVC (x264)",
+  QT_TR_NOOP("MPEG-4 AVC (x264)"),
   "X264",
   "x264 h264 encoder",
   COMPRESS_AQ,
@@ -826,10 +826,10 @@
 
 #endif
 COMPRES_PARAMS DUMMYONE =
-  { CodecDummy, "dummy", "dummy", "dummy", COMPRESS_CQ, 4, 1500, 700,1000, 0, 0,
+  { CodecDummy, QT_TR_NOOP("dummy"), "dummy", "dummy", COMPRESS_CQ, 4, 1500, 700,1000, 0, 0,
 NULL, 0 };
 COMPRES_PARAMS CopyCodec =
-  { CodecCopy, "Copy", "Copy", "Copy", COMPRESS_CQ, 4, 1500, 700,1000, 0, 0, NULL,
+  { CodecCopy, QT_TR_NOOP("Copy"), "Copy", "Copy", COMPRESS_CQ, 4, 1500, 700,1000, 0, 0, NULL,
 0 };
 
 COMPRES_PARAMS *AllVideoCodec[] = {

Modified: branches/avidemux_2.4_branch/avidemux/ADM_encoder/adm_encCopy.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_encoder/adm_encCopy.cpp	2008-04-10 14:50:25 UTC (rev 3970)
+++ branches/avidemux_2.4_branch/avidemux/ADM_encoder/adm_encCopy.cpp	2008-04-10 15:53:48 UTC (rev 3971)
@@ -88,7 +88,7 @@
 const char *
 EncoderCopy::getDisplayName (void)
 {
-  return "Copy";
+  return QT_TR_NOOP("Copy");
 }
 
 

Modified: branches/avidemux_2.4_branch/avidemux/ADM_encoder/adm_encRequant.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_encoder/adm_encRequant.cpp	2008-04-10 14:50:25 UTC (rev 3970)
+++ branches/avidemux_2.4_branch/avidemux/ADM_encoder/adm_encRequant.cpp	2008-04-10 15:53:48 UTC (rev 3971)
@@ -95,7 +95,7 @@
 const char *
 EncoderRequant::getDisplayName (void)
 {
-  return "Requant";
+  return QT_TR_NOOP("Requant");
 }
 
 

Modified: branches/avidemux_2.4_branch/avidemux/ADM_encoder/adm_encXvid4.h
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_encoder/adm_encXvid4.h	2008-04-10 14:50:25 UTC (rev 3970)
+++ branches/avidemux_2.4_branch/avidemux/ADM_encoder/adm_encXvid4.h	2008-04-10 15:53:48 UTC (rev 3971)
@@ -59,7 +59,7 @@
   }
   virtual const char *getDisplayName (void)
   {
-    return "Xvid4";
+    return QT_TR_NOOP("Xvid4");
   }
 
 };

Modified: branches/avidemux_2.4_branch/avidemux/ADM_encoder/adm_encdivx.h
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_encoder/adm_encdivx.h	2008-04-10 14:50:25 UTC (rev 3970)
+++ branches/avidemux_2.4_branch/avidemux/ADM_encoder/adm_encdivx.h	2008-04-10 15:53:48 UTC (rev 3971)
@@ -49,7 +49,7 @@
   }
   virtual const char *getDisplayName (void)
   {
-    return "Divx";
+    return QT_TR_NOOP("DivX");
   }
 
 };

Modified: branches/avidemux_2.4_branch/avidemux/ADM_encoder/adm_encffmpeg.h
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_encoder/adm_encffmpeg.h	2008-04-10 14:50:25 UTC (rev 3970)
+++ branches/avidemux_2.4_branch/avidemux/ADM_encoder/adm_encffmpeg.h	2008-04-10 15:53:48 UTC (rev 3971)
@@ -44,7 +44,7 @@
   virtual uint8_t startPass1 (void);
   virtual const char *getDisplayName (void)
   {
-    return "LavCodec";
+    return QT_TR_NOOP("LavCodec");
   }
   virtual const char *getCodecName (void);	//{return "DX50";}
   virtual const char *getFCCHandler (void)

Modified: branches/avidemux_2.4_branch/avidemux/ADM_encoder/adm_encmjpeg.h
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_encoder/adm_encmjpeg.h	2008-04-10 14:50:25 UTC (rev 3970)
+++ branches/avidemux_2.4_branch/avidemux/ADM_encoder/adm_encmjpeg.h	2008-04-10 15:53:48 UTC (rev 3971)
@@ -57,7 +57,7 @@
   }
   virtual const char *getDisplayName (void)
   {
-    return "Mjpeg";
+    return QT_TR_NOOP("MJPEG");
   }
 };
 

Modified: branches/avidemux_2.4_branch/avidemux/ADM_encoder/adm_encmpeg2enc.h
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_encoder/adm_encmpeg2enc.h	2008-04-10 14:50:25 UTC (rev 3970)
+++ branches/avidemux_2.4_branch/avidemux/ADM_encoder/adm_encmpeg2enc.h	2008-04-10 15:53:48 UTC (rev 3971)
@@ -54,7 +54,7 @@
     virtual uint8_t startPass1 (void);
     virtual const char *getCodecName (void) {return "MPEG";};
     virtual const char *getFCCHandler (void) {return "MPEG";};
-    virtual const char *getDisplayName (void) {return "MPEG";}; // FIXME
+    virtual const char *getDisplayName (void) {return QT_TR_NOOP("MPEG");}; // FIXME
             uint8_t verifyLog(const char *name,uint32_t nbFrame);
 
 };

Modified: branches/avidemux_2.4_branch/avidemux/ADM_encoder/adm_encx264.h
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_encoder/adm_encx264.h	2008-04-10 14:50:25 UTC (rev 3970)
+++ branches/avidemux_2.4_branch/avidemux/ADM_encoder/adm_encx264.h	2008-04-10 15:53:48 UTC (rev 3971)
@@ -62,7 +62,7 @@
   }
   virtual const char *getDisplayName (void)
   {
-    return "X264";
+    return QT_TR_NOOP("x264");
   }
   virtual uint8_t hasExtraHeaderData (uint32_t * l, uint8_t ** data);
 

Modified: branches/avidemux_2.4_branch/avidemux/ADM_encoder/adm_encxvid.h
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_encoder/adm_encxvid.h	2008-04-10 14:50:25 UTC (rev 3970)
+++ branches/avidemux_2.4_branch/avidemux/ADM_encoder/adm_encxvid.h	2008-04-10 15:53:48 UTC (rev 3971)
@@ -58,7 +58,7 @@
   }
   virtual const char *getDisplayName (void)
   {
-    return "Xvid";
+    return QT_TR_NOOP("Xvid");
   }
 };
 

Modified: branches/avidemux_2.4_branch/avidemux/ADM_encoder/adm_encyv12.h
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_encoder/adm_encyv12.h	2008-04-10 14:50:25 UTC (rev 3970)
+++ branches/avidemux_2.4_branch/avidemux/ADM_encoder/adm_encyv12.h	2008-04-10 15:53:48 UTC (rev 3971)
@@ -66,7 +66,7 @@
   }
   const char *getDisplayName (void)
   {
-    return "YV12";
+    return QT_TR_NOOP("YV12");
   }
 
 };

Modified: branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_avi/op_avisave.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_avi/op_avisave.cpp	2008-04-10 14:50:25 UTC (rev 3970)
+++ branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_avi/op_avisave.cpp	2008-04-10 15:53:48 UTC (rev 3971)
@@ -253,7 +253,7 @@
   audio_filter=NULL;
    if(!currentaudiostream) 
    {
-   	encoding_gui->setAudioCodec("None");
+   	encoding_gui->setAudioCodec(QT_TR_NOOP("None"));
 	return 1;
    }
   printf (" mux mode : %d mux param %d\n", muxMode, muxParam);
@@ -268,7 +268,7 @@
     {
       // else prepare the incoming raw stream
       // audio copy mode here
-      encoding_gui->setAudioCodec("Copy");
+      encoding_gui->setAudioCodec(QT_TR_NOOP("Copy"));
       audio_filter=buildAudioFilter( currentaudiostream,video_body->getTime (frameStart));
       if(!audio_filter) return 0;
     }
@@ -364,9 +364,9 @@
 GenericAviSave::guiStart (void)
 {
       encoding_gui=new DIA_encoding(25000);
-      encoding_gui->setCodec("Copy");
+      encoding_gui->setCodec(QT_TR_NOOP("Copy"));
       encoding_gui->setFrame (0,0,2 ,100); // FXMe
-      encoding_gui->setContainer("Avi");
+      encoding_gui->setContainer(QT_TR_NOOP("AVI"));
 
 }
 
@@ -378,7 +378,7 @@
       encoding_gui=NULL;
 
 }
-void GenericAviSave::guiSetPhasis(char *str)
+void GenericAviSave::guiSetPhasis(const char *str)
 {
       ADM_assert(encoding_gui);
       encoding_gui->setPhasis(str);
@@ -482,24 +482,24 @@
 {
       switch(codec)
       {
-              case WAV_DTS: return (const char *)"DTS";
-              case WAV_PCM: return (const char *)"PCM";
-              case WAV_MP2: return (const char *)"MP2";
-              case WAV_MP3: return (const char *)"MP3";
-              case (WAV_WMA):  return (const char *)"WMA";
-              case (WAV_LPCM): return (const char *)"LPCM";	
-              case (WAV_AC3):  return (const char *)"AC3";
-              case (WAV_OGG): return (const char *)"Ogg Vorbis";
-              case (WAV_MP4): return (const char *)"MP4 audio";
-              case (WAV_AAC): return (const char *)"AAC";
-              case (WAV_QDM2): return (const char *)"QDM2";
-              case (WAV_AMRNB): return (const char *)"AMR narrow band";
-              case (WAV_MSADPCM): return (const char *)"MSADPCM";
-              case (WAV_ULAW): return (const char *)"ULAW";
-              case WAV_IMAADPCM: return (const char *)"IMA ADPCM";
-              case WAV_8BITS_UNSIGNED:return (const char *)"PCM 8bits";
+              case WAV_DTS: return QT_TR_NOOP("DTS");
+              case WAV_PCM: return QT_TR_NOOP("PCM");
+              case WAV_MP2: return QT_TR_NOOP("MP2");
+              case WAV_MP3: return QT_TR_NOOP("MP3");
+              case WAV_WMA:  return QT_TR_NOOP("WMA");
+              case WAV_LPCM: return QT_TR_NOOP("LPCM");	
+              case WAV_AC3:  return QT_TR_NOOP("AC3");
+              case WAV_OGG: return QT_TR_NOOP("Ogg Vorbis");
+              case WAV_MP4: return QT_TR_NOOP("MP4");
+              case WAV_AAC: return QT_TR_NOOP("AAC");
+              case WAV_QDM2: return QT_TR_NOOP("QDM2");
+              case WAV_AMRNB: return QT_TR_NOOP("AMR-NB");
+              case WAV_MSADPCM: return QT_TR_NOOP("MSADPCM");
+              case WAV_ULAW: return QT_TR_NOOP("ULAW");
+              case WAV_IMAADPCM: return QT_TR_NOOP("IMA ADPCM");
+              case WAV_8BITS_UNSIGNED:return QT_TR_NOOP("8-bit PCM");
       }
-      return (const char *)"Unknown codec";
+      return QT_TR_NOOP("Unknown codec");
 }
 
 //---------------------------------------

Modified: branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_avi/op_avisave.h
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_avi/op_avisave.h	2008-04-10 14:50:25 UTC (rev 3970)
+++ branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_avi/op_avisave.h	2008-04-10 15:53:48 UTC (rev 3971)
@@ -64,7 +64,7 @@
                     virtual uint8_t writeVideoChunk(uint32_t frame )=0;
                     virtual void guiStart(void);
                     virtual void guiStop(void);
-                    	    void guiSetPhasis(char *str);
+                    	    void guiSetPhasis(const char *str);
                     virtual uint8_t guiUpdate(uint32_t nb,uint32_t total);		    
                     uint8_t	handleMuxSize(void ) ; // auto chop
                     uint8_t reigniteChunk( uint32_t len, uint8_t *data );

Modified: branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_avi/op_avisavecopy.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_avi/op_avisavecopy.cpp	2008-04-10 14:50:25 UTC (rev 3970)
+++ branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_avi/op_avisavecopy.cpp	2008-04-10 15:53:48 UTC (rev 3971)
@@ -106,7 +106,7 @@
 	}
  _incoming = getFirstVideoFilter (frameStart,frameEnd-frameStart);
  encoding_gui->setFps(_incoming->getInfo()->fps1000);
- encoding_gui->setPhasis("Saving");
+ encoding_gui->setPhasis(QT_TR_NOOP("Saving"));
  // Set up our copy codec ...
   copy=new EncoderCopy(NULL);
   if(!copy->configure(_incoming))

Modified: branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_pack.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_pack.cpp	2008-04-10 14:50:25 UTC (rev 3970)
+++ branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_pack.cpp	2008-04-10 15:53:48 UTC (rev 3971)
@@ -131,7 +131,7 @@
 	}
  _incoming = getFirstVideoFilter (frameStart,frameEnd-frameStart);
  encoding_gui->setFps(_incoming->getInfo()->fps1000);
- encoding_gui->setPhasis("Saving");
+ encoding_gui->setPhasis(QT_TR_NOOP("Saving"));
  
  // Set up our copy codec ...
   copy=new EncoderCopy(NULL);

Modified: branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_unpack.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_unpack.cpp	2008-04-10 14:50:25 UTC (rev 3970)
+++ branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_unpack.cpp	2008-04-10 15:53:48 UTC (rev 3971)
@@ -108,7 +108,7 @@
 	}
  _incoming = getFirstVideoFilter (frameStart,frameEnd-frameStart);
  encoding_gui->setFps(_incoming->getInfo()->fps1000);
- encoding_gui->setPhasis("Saving");
+ encoding_gui->setPhasis(QT_TR_NOOP("Saving"));
  
  // Set up our copy codec ...
   copy=new EncoderCopy(NULL);

Modified: branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp	2008-04-10 14:50:25 UTC (rev 3970)
+++ branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp	2008-04-10 15:53:48 UTC (rev 3971)
@@ -133,7 +133,7 @@
 	if(!reuse)
  	{
 	
-      	guiSetPhasis ("1st Pass");
+      	guiSetPhasis (QT_TR_NOOP("1st Pass"));
       	aprintf("**Pass 1:%lu\n",frametogo);
      	buffer = new uint8_t[_incoming->getInfo ()->width *
 		    _incoming->getInfo ()->height * 3];
@@ -240,14 +240,14 @@
   // CBR or CQ
   if (frame == 0)
   {
-    encoding_gui->setCodec((char *)_encode->getDisplayName())  ;
+    encoding_gui->setCodec(_encode->getDisplayName())  ;
   if (!_encode->isDualPass ())
   {
-                          guiSetPhasis ("Encoding");
+                          guiSetPhasis (QT_TR_NOOP("Encoding"));
         }
   else
           {
-                          guiSetPhasis ("Encoding, 2nd pass");
+                          guiSetPhasis (QT_TR_NOOP("Encoding, 2nd pass"));
         }
   }
   // first read

Modified: branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_avi/op_savesmart.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_avi/op_savesmart.cpp	2008-04-10 14:50:25 UTC (rev 3970)
+++ branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_avi/op_savesmart.cpp	2008-04-10 15:53:48 UTC (rev 3971)
@@ -104,7 +104,7 @@
   aImage=new ADMImage(_mainaviheader.dwWidth,_mainaviheader.dwHeight);
   _incoming = getFirstVideoFilter (frameStart,frameEnd-frameStart);
   encoding_gui->setFps(_incoming->getInfo()->fps1000);
-  encoding_gui->setPhasis("Smart Copy");
+  encoding_gui->setPhasis(QT_TR_NOOP("Smart Copy"));
   // B frame ?
     for(int i=frameStart;i<frameEnd;i++)
     {

Modified: branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp	2008-04-10 14:50:25 UTC (rev 3970)
+++ branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp	2008-04-10 15:53:48 UTC (rev 3971)
@@ -137,10 +137,10 @@
                 }
 
                 // init compressor
-                encoding_gui->setContainer("Dummy");
-                encoding_gui->setAudioCodec("None");
+                encoding_gui->setContainer(QT_TR_NOOP("Dummy"));
+                encoding_gui->setAudioCodec(QT_TR_NOOP("None"));
                 if(!videoProcessMode())
-                        encoding_gui->setCodec("Copy");
+                        encoding_gui->setCodec(QT_TR_NOOP("Copy"));
                 else
                         encoding_gui->setCodec(_encode->getDisplayName());
                 
@@ -150,7 +150,7 @@
                      goto  stopit;
                 };
 
-                encoding_gui->setPhasis ("Encoding");
+                encoding_gui->setPhasis (QT_TR_NOOP("Encoding"));
                 
                 
                 info.width=_incoming->getInfo()->width;
@@ -192,7 +192,7 @@
               }
          
           if(!videoProcessMode())
-                encoding_gui->setCodec("Copy");
+                encoding_gui->setCodec(QT_TR_NOOP("Copy"));
           else
                 encoding_gui->setCodec(_encode->getDisplayName());
            //

Modified: branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp	2008-04-10 14:50:25 UTC (rev 3970)
+++ branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp	2008-04-10 15:53:48 UTC (rev 3971)
@@ -191,10 +191,10 @@
                 }
 
                 // init compressor
-                encoding_gui->setContainer("FLV");
-                encoding_gui->setAudioCodec("None");
+                encoding_gui->setContainer(QT_TR_NOOP("FLV"));
+                encoding_gui->setAudioCodec(QT_TR_NOOP("None"));
                 if(!videoProcessMode())
-                        encoding_gui->setCodec("Copy");
+                        encoding_gui->setCodec(QT_TR_NOOP("Copy"));
                 else
                         encoding_gui->setCodec(_encode->getDisplayName());
                 
@@ -204,7 +204,7 @@
                      goto  stopit;
                 };
 
-                encoding_gui->setPhasis ("Encoding");
+                encoding_gui->setPhasis (QT_TR_NOOP("Encoding"));
                 
                 
                 info.width=_incoming->getInfo()->width;
@@ -262,11 +262,11 @@
                 if(audioProcessMode())
                         encoding_gui->setAudioCodec(getStrFromAudioCodec(audio->getInfo()->encoding));
                 else
-                         encoding_gui->setAudioCodec("Copy");
+                         encoding_gui->setAudioCodec(QT_TR_NOOP("Copy"));
 
            }else
            {
-                encoding_gui->setAudioCodec("None");
+                encoding_gui->setAudioCodec(QT_TR_NOOP("None"));
            }
 // ____________Setup Muxer _____________________
            muxer= new lavMuxer;
@@ -280,10 +280,10 @@
                          goto stopit;
 //_____________ Loop _____________________
           
-          encoding_gui->setContainer("FLV");
+          encoding_gui->setContainer(QT_TR_NOOP("FLV"));
          
           if(!videoProcessMode())
-                encoding_gui->setCodec("Copy");
+                encoding_gui->setCodec(QT_TR_NOOP("Copy"));
           else
                 encoding_gui->setCodec(_encode->getDisplayName());
            //

Modified: branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp	2008-04-10 14:50:25 UTC (rev 3970)
+++ branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp	2008-04-10 15:53:48 UTC (rev 3971)
@@ -127,9 +127,9 @@
 const char *containerTitle;
            switch(type)
            {
-             case ADM_PSP:muxerType=MUXER_PSP;containerTitle="PSP";break;
-             case ADM_MP4:muxerType=MUXER_MP4;containerTitle="MP4";break;
-             case ADM_MATROSKA:muxerType=MUXER_MATROSKA;containerTitle="MKV";break;
+             case ADM_PSP:muxerType=MUXER_PSP;containerTitle=QT_TR_NOOP("PSP");break;
+             case ADM_MP4:muxerType=MUXER_MP4;containerTitle=QT_TR_NOOP("MP4");break;
+             case ADM_MATROSKA:muxerType=MUXER_MATROSKA;containerTitle=QT_TR_NOOP("MKV");break;
              default:
                 ADM_assert(0);
            }
@@ -161,9 +161,9 @@
                
                   encoding_gui->setContainer(containerTitle);
                
-                encoding_gui->setAudioCodec("None");
+                encoding_gui->setAudioCodec(QT_TR_NOOP("None"));
                 if(!videoProcessMode())
-                        encoding_gui->setCodec("Copy");
+                        encoding_gui->setCodec(QT_TR_NOOP("Copy"));
                 else
                         encoding_gui->setCodec(_encode->getDisplayName());
                 TwoPassLogFile=new char[strlen(name)+6];
@@ -185,7 +185,7 @@
                                 goto stopit;
                 }else
                 {
-                        encoding_gui->setPhasis ("Encoding");
+                        encoding_gui->setPhasis (QT_TR_NOOP("Encoding"));
                 }
                 
                 info.width=_incoming->getInfo()->width;
@@ -261,11 +261,11 @@
                 if(audioProcessMode())
                         encoding_gui->setAudioCodec(getStrFromAudioCodec(audio->getInfo()->encoding));
                 else
-                         encoding_gui->setAudioCodec("Copy");
+                         encoding_gui->setAudioCodec(QT_TR_NOOP("Copy"));
 
            }else
            {
-                encoding_gui->setAudioCodec("None");
+                encoding_gui->setAudioCodec(QT_TR_NOOP("None"));
            }
 // ____________Setup Muxer _____________________
            muxer= new lavMuxer;
@@ -282,7 +282,7 @@
           encoding_gui->setContainer(containerTitle);
          
           if(!videoProcessMode())
-                encoding_gui->setCodec("Copy");
+                encoding_gui->setCodec(QT_TR_NOOP("Copy"));
           else
                 encoding_gui->setCodec(_encode->getDisplayName());
            //
@@ -407,7 +407,7 @@
         if(!reuse)
         {
         
-                encoding_gui->setPhasis ("1st Pass");
+                encoding_gui->setPhasis (QT_TR_NOOP("1st Pass"));
                 aprintf("**Pass 1:%lu\n",total);
                 _encode->startPass1 ();
                 bitstream.data=buffer;
@@ -464,7 +464,7 @@
                 return 0;
         }
         printf("First pass : send %u frames\n",sent);
-        encoding_gui->setPhasis ("2nd Pass");
+        encoding_gui->setPhasis (QT_TR_NOOP("2nd Pass"));
         return 1;
 }
 void end (void)

Modified: branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp	2008-04-10 14:50:25 UTC (rev 3970)
+++ branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp	2008-04-10 15:53:48 UTC (rev 3971)
@@ -218,19 +218,19 @@
 	muxer->forceRestamp();
   ///____________________________
   work=new DIA_encoding(avifileinfo->fps1000);
-  work->setCodec("Copy");
-  work->setAudioCodec("---");
-  work->setPhasis("Saving");
+  work->setCodec(QT_TR_NOOP("Copy"));
+  work->setAudioCodec(QT_TR_NOOP("---"));
+  work->setPhasis(QT_TR_NOOP("Saving"));
   if(!audioProcessMode())
-     work->setAudioCodec("Copy");
+     work->setAudioCodec(QT_TR_NOOP("Copy"));
   else
      work->setAudioCodec(getStrFromAudioCodec(audio->getInfo()->encoding));
   switch(mux)
   {
-    case MUXER_TS: work->setContainer("Mpeg TS");break;
-    case MUXER_VCD: work->setContainer("Mpeg VCD");break;
-    case MUXER_SVCD: work->setContainer("Mpeg SVCD");break;
-    case MUXER_DVD: work->setContainer("Mpeg DVD");break;
+    case MUXER_TS: work->setContainer(QT_TR_NOOP("MPEG TS"));break;
+    case MUXER_VCD: work->setContainer(QT_TR_NOOP("MPEG VCD"));break;
+    case MUXER_SVCD: work->setContainer(QT_TR_NOOP("MPEG SVCD"));break;
+    case MUXER_DVD: work->setContainer(QT_TR_NOOP("MPEG DVD"));break;
     default:
         ADM_assert(0);
   }

Modified: branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp	2008-04-10 14:50:25 UTC (rev 3970)
+++ branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp	2008-04-10 15:53:48 UTC (rev 3971)
@@ -257,25 +257,25 @@
       switch(current_codec)
       {
           case CodecVCD:
-            encoding->setCodec("libmpeg2enc VCD");
+            encoding->setCodec(QT_TR_NOOP("libmpeg2enc VCD"));
             break;
           case CodecSVCD:
-            encoding->setCodec("libmpeg2enc SVCD");
+            encoding->setCodec(QT_TR_NOOP("libmpeg2enc SVCD"));
             break;
           case CodecDVD:
-            encoding->setCodec("libmpeg2enc DVD");
+            encoding->setCodec(QT_TR_NOOP("libmpeg2enc DVD"));
             break;
           case CodecXVCD:
-            encoding->setCodec("FFmpeg Mpeg1 VBR");
+            encoding->setCodec(QT_TR_NOOP("FFmpeg MPEG-1 VBR"));
             break;
           case CodecXSVCD:
-            encoding->setCodec("FFmpeg Mpeg2 SVCD VBR");
+            encoding->setCodec(QT_TR_NOOP("FFmpeg MPEG-2 SVCD VBR"));
             break;
           case CodecXDVD:
-            encoding->setCodec("FFmpeg Mpeg2 DVD VBR");
+            encoding->setCodec(QT_TR_NOOP("FFmpeg MPEG-2 DVD VBR"));
             break;
           case CodecRequant:
-            encoding->setCodec("Mpeg Requantizer");
+            encoding->setCodec(QT_TR_NOOP("MPEG Requantizer"));
             break;
           
           default:
@@ -283,11 +283,11 @@
 	}
         switch(mux)
           {
-            case MUXER_NONE:encoding->setContainer("Mpeg ES");break;
-            case MUXER_TS:  encoding->setContainer("Mpeg TS");break;
-            case MUXER_VCD: encoding->setContainer("Mpeg VCD");break;
-            case MUXER_SVCD:encoding->setContainer("Mpeg SVCD");break;
-            case MUXER_DVD: encoding->setContainer("Mpeg DVD");break;
+            case MUXER_NONE:encoding->setContainer(QT_TR_NOOP("MPEG ES"));break;
+            case MUXER_TS:  encoding->setContainer(QT_TR_NOOP("MPEG TS"));break;
+            case MUXER_VCD: encoding->setContainer(QT_TR_NOOP("MPEG VCD"));break;
+            case MUXER_SVCD:encoding->setContainer(QT_TR_NOOP("MPEG SVCD"));break;
+            case MUXER_DVD: encoding->setContainer(QT_TR_NOOP("MPEG DVD"));break;
             default:
                 ADM_assert(0);
           }
@@ -308,7 +308,7 @@
                                 }
                         if(!reuse)
                         {
-                                encoding->setPhasis ("Pass 1/2");
+                                encoding->setPhasis (QT_TR_NOOP("Pass 1/2"));
                                 encoder->startPass1();
                                 bitstream.data=_buffer;
                                 bitstream.bufferSize=_page;
@@ -368,15 +368,15 @@
                 }
               }
           if(encoder->isDualPass())
-                  encoding->setPhasis ("Pass 2/2");
+                  encoding->setPhasis (QT_TR_NOOP("Pass 2/2"));
           else
-                  encoding->setPhasis ("Encoding");
+                  encoding->setPhasis (QT_TR_NOOP("Encoding"));
 
          // Set info for audio if any
          if(muxer)
          {
             if(!audioProcessMode())
-                  encoding->setAudioCodec("Copy");
+                  encoding->setAudioCodec(QT_TR_NOOP("Copy"));
             else
                   encoding->setAudioCodec(getStrFromAudioCodec(audio->getInfo()->encoding));
          }

Modified: branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_ogm/op_ogaudio.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_ogm/op_ogaudio.cpp	2008-04-10 14:50:25 UTC (rev 3970)
+++ branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_ogm/op_ogaudio.cpp	2008-04-10 15:53:48 UTC (rev 3971)
@@ -67,7 +67,7 @@
 		{
 			audioFilter=NULL;	
 			_audioBuffer=NULL;
-			encoding_gui->setAudioCodec("None");
+			encoding_gui->setAudioCodec(QT_TR_NOOP("None"));
 			return 1;
 		}
 		if(audioProcessMode() && currentaudiostream->isCompressed() 
@@ -87,7 +87,7 @@
 		}
 		else	// Copymode
 		{
-			encoding_gui->setAudioCodec("Copy");
+			encoding_gui->setAudioCodec(QT_TR_NOOP("Copy"));
 			
 		}
 		//______________ Write headers/ Audio..._____________________

Modified: branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_ogm/op_ogsave.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_ogm/op_ogsave.cpp	2008-04-10 14:50:25 UTC (rev 3970)
+++ branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_ogm/op_ogsave.cpp	2008-04-10 15:53:48 UTC (rev 3971)
@@ -116,7 +116,7 @@
 		videoStream=new ogm_page(_fd,1);
 	
 		encoding_gui=new DIA_encoding(25000);
-                encoding_gui->setContainer("OGM");
+                encoding_gui->setContainer(QT_TR_NOOP("OGM"));
 		//______________ Write headers..._____________________
 		
 		if(!initVideo(name))

Modified: branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_ogm/op_ogsavecopy.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_ogm/op_ogsavecopy.cpp	2008-04-10 14:50:25 UTC (rev 3970)
+++ branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_ogm/op_ogsavecopy.cpp	2008-04-10 15:53:48 UTC (rev 3971)
@@ -66,8 +66,8 @@
 		memcpy(&(header.streamtype),"video\0\0\0",8);
 		MEMCPY(&(header.subtype),&(avifileinfo->fcc),4);
 		
-		encoding_gui->setCodec((char *)"Copy");
-		encoding_gui->setPhasis((char *)"Saving...");
+		encoding_gui->setCodec(QT_TR_NOOP("Copy"));
+		encoding_gui->setPhasis(QT_TR_NOOP("Saving..."));
 		
 		//header.size=sizeof(header);
 		dur32=sizeof(header);

Modified: branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp	2008-04-10 14:50:25 UTC (rev 3970)
+++ branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp	2008-04-10 15:53:48 UTC (rev 3971)
@@ -107,8 +107,8 @@
  		{
       			aprintf("**Pass 1:%lu\n",_togo);
       			_encode->startPass1 ();
-			encoding_gui->setCodec((char *)_encode->getCodecName());
-			encoding_gui->setPhasis("Pass one");
+			encoding_gui->setCodec(_encode->getCodecName());
+			encoding_gui->setPhasis(QT_TR_NOOP("Pass one"));
                         ADMBitstream bitstream(w*h*3);
                         bitstream.data=_videoBuffer;
       			//__________________________________
@@ -136,11 +136,11 @@
       			printf("Pass2 ignition failed\n");
       			return 0;
 		}
-		encoding_gui->setPhasis("Pass 2");
+		encoding_gui->setPhasis(QT_TR_NOOP("Pass 2"));
 	}   //-------------------------/VBR-----------------------------------
 	else
 	{
-		encoding_gui->setPhasis("Encoding");
+		encoding_gui->setPhasis(QT_TR_NOOP("Encoding"));
 	}
   // init save avi
 

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp	2008-04-10 14:50:25 UTC (rev 3970)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp	2008-04-10 15:53:48 UTC (rev 3971)
@@ -1037,7 +1037,7 @@
   gtk_container_add (GTK_CONTAINER (frame_par1), hbox_par1);
   gtk_container_set_border_width (GTK_CONTAINER (hbox_par1), 5);
 
-  checkbutton_par_asinput = gtk_check_button_new_with_mnemonic (QT_TR_NOOP("As input"));
+  checkbutton_par_asinput = gtk_check_button_new_with_mnemonic (QT_TR_NOOP("As Input"));
   gtk_widget_show (checkbutton_par_asinput);
   gtk_box_pack_start (GTK_BOX (hbox_par1), checkbutton_par_asinput, FALSE, FALSE, 10);
   gtk_tooltips_set_tip (tooltips, checkbutton_par_asinput, QT_TR_NOOP("Get PAR from input video file"), NULL);

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_mjpeg.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_mjpeg.cpp	2008-04-10 14:50:25 UTC (rev 3970)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_mjpeg.cpp	2008-04-10 15:53:48 UTC (rev 3971)
@@ -34,9 +34,9 @@
         ADM_assert(sizeof(MJPEGConfig)==param->extraSettingsLen);
         uint8_t ret=0;
         diaElemUInteger  qual(&(config->qual),QT_TR_NOOP("_Quality:"),1,100);
-        diaElemToggle    swap(&(config->swapped),QT_TR_NOOP("_Swap U&V:"));
+        diaElemToggle    swap(&(config->swapped),QT_TR_NOOP("_Swap U&V"));
         diaElem *elems[2]={&qual,&swap};
-        if( diaFactoryRun(QT_TR_NOOP("Mjpeg Configuration"),2,elems))
+        if( diaFactoryRun(QT_TR_NOOP("MJPEG Configuration"),2,elems))
         {
             ret=1;
         }



From gruntster at mail.berlios.de  Thu Apr 10 17:58:14 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Thu, 10 Apr 2008 17:58:14 +0200
Subject: [Avidemux-svn-commit] r3972 - in
	branches/avidemux_2.4_branch/avidemux/ADM_libraries:
	ADM_libMad ADM_libMpeg2Dec
Message-ID: <200804101558.m3AFwECU009561@sheep.berlios.de>

Author: gruntster
Date: 2008-04-10 17:58:12 +0200 (Thu, 10 Apr 2008)
New Revision: 3972

Modified:
   branches/avidemux_2.4_branch/avidemux/ADM_libraries/ADM_libMad/CMakeLists.txt
   branches/avidemux_2.4_branch/avidemux/ADM_libraries/ADM_libMpeg2Dec/CMakeLists.txt
Log:
[CMake] remove duplicate code from scripts otherwise CMake 2.6 complains

Modified: branches/avidemux_2.4_branch/avidemux/ADM_libraries/ADM_libMad/CMakeLists.txt
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_libraries/ADM_libMad/CMakeLists.txt	2008-04-10 15:53:48 UTC (rev 3971)
+++ branches/avidemux_2.4_branch/avidemux/ADM_libraries/ADM_libMad/CMakeLists.txt	2008-04-10 15:58:12 UTC (rev 3972)
@@ -1,24 +1,7 @@
-
-SET(ADM_libMad_SRCS 
-bit.c  decoder.c  fixed.c  frame.c  huffman.c  layer12.c  layer3.c  
-#minimad.c  i
-stream.c  synth.c  timer.c  version.c
-)
-ADD_LIBRARY(ADM_libMad STATIC ${ADM_libMad_SRCS})
-
-################################
-#
-################################
-include(AdmLib)
 SET(ADM_LIB ADM_libMad)
-#
+
 SET(${ADM_LIB}_SRCS 
 bit.c  decoder.c  fixed.c  frame.c  huffman.c  layer12.c  layer3.c  
-#minimad.c  i
-stream.c  synth.c  timer.c  version.c
-)
-ADD_LIBRARY(${ADM_LIB} STATIC ${${ADM_LIB}_SRCS})
-ADD_ADM_LIB(${ADM_LIB} ADM_libraries)
+stream.c  synth.c  timer.c  version.c)
 
-
-################################
+ADD_LIBRARY(${ADM_LIB} STATIC ${${ADM_LIB}_SRCS})
\ No newline at end of file

Modified: branches/avidemux_2.4_branch/avidemux/ADM_libraries/ADM_libMpeg2Dec/CMakeLists.txt
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_libraries/ADM_libMpeg2Dec/CMakeLists.txt	2008-04-10 15:53:48 UTC (rev 3971)
+++ branches/avidemux_2.4_branch/avidemux/ADM_libraries/ADM_libMpeg2Dec/CMakeLists.txt	2008-04-10 15:58:12 UTC (rev 3972)
@@ -1,20 +1,7 @@
-
-SET(ADM_libMpeg2dec_SRCS 
-alloc.c      cpu_state.c  header.c      idct_altivec.c  idct_mlib.c  motion_comp_alpha.c    motion_comp.c       motion_comp_mmx.c
-cpu_accel.c  decode.c     idct_alpha.c  idct.c          idct_mmx.c   motion_comp_altivec.c  motion_comp_mlib.c  slice.c
-)
-ADD_LIBRARY(ADM_libMpeg2Dec STATIC ${ADM_libMpeg2dec_SRCS})
-################################
-#
-################################
-include(AdmLib)
 SET(ADM_LIB ADM_libMpeg2Dec)
-#
+
 SET(${ADM_LIB}_SRCS 
 alloc.c      cpu_state.c  header.c      idct_altivec.c  idct_mlib.c  motion_comp_alpha.c    motion_comp.c       motion_comp_mmx.c
-cpu_accel.c  decode.c     idct_alpha.c  idct.c          idct_mmx.c   motion_comp_altivec.c  motion_comp_mlib.c  slice.c
-)
-ADD_LIBRARY(${ADM_LIB} STATIC ${${ADM_LIB}_SRCS})
-ADD_ADM_LIB(${ADM_LIB} ADM_libraries)
+cpu_accel.c  decode.c     idct_alpha.c  idct.c          idct_mmx.c   motion_comp_altivec.c  motion_comp_mlib.c  slice.c)
 
-################################
+ADD_LIBRARY(${ADM_LIB} STATIC ${${ADM_LIB}_SRCS})
\ No newline at end of file



From gruntster at mail.berlios.de  Thu Apr 10 18:49:02 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Thu, 10 Apr 2008 18:49:02 +0200
Subject: [Avidemux-svn-commit] r3973 -
	branches/avidemux_2.4_branch/avidemux/winInstaller
Message-ID: <200804101649.m3AGn2r4011399@sheep.berlios.de>

Author: gruntster
Date: 2008-04-10 18:49:00 +0200 (Thu, 10 Apr 2008)
New Revision: 3973

Modified:
   branches/avidemux_2.4_branch/avidemux/winInstaller/avidemux.nsi
Log:
[Win32] install GTK+ locale files to share directory and remove Qt locale files on uninstall

Modified: branches/avidemux_2.4_branch/avidemux/winInstaller/avidemux.nsi
===================================================================
--- branches/avidemux_2.4_branch/avidemux/winInstaller/avidemux.nsi	2008-04-10 15:58:12 UTC (rev 3972)
+++ branches/avidemux_2.4_branch/avidemux/winInstaller/avidemux.nsi	2008-04-10 16:49:00 UTC (rev 3973)
@@ -116,7 +116,7 @@
 installGtk${LANG_CODE}:
     SetOutPath $INSTDIR\share\locale\${LANG_CODE}\LC_MESSAGES
     File ..\..\..\avidemux_2.4_build\share\locale\${LANG_CODE}\LC_MESSAGES\avidemux.mo
-    File ..\..\..\avidemux_2.4_build\lib\locale\${LANG_CODE}\LC_MESSAGES\gtk20.mo
+    File ..\..\..\avidemux_2.4_build\share\locale\${LANG_CODE}\LC_MESSAGES\gtk20.mo
 
     WriteRegStr HKLM "${REGKEY}\Components" ${LANG_NAME} 1
 endGtk${LANG_CODE}:
@@ -138,8 +138,8 @@
 
 !macro UninstallLanguage LANG_NAME LANG_CODE
     RmDir /r /REBOOTOK $INSTDIR\share\locale\${LANG_CODE}
-    RmDir /r /REBOOTOK $INSTDIR\lib\locale\${LANG_CODE}
     Delete /REBOOTOK $INSTDIR\i18n\avidemux_${LANG_CODE}.qm
+    Delete /REBOOTOK $INSTDIR\i18n\qt_${LANG_CODE}.qm
     
     DeleteRegValue HKLM "${REGKEY}\Components" ${LANG_NAME}
 !macroend
@@ -543,7 +543,6 @@
 Section un.post UnSecUninstaller
     RmDir /REBOOTOK $INSTDIR\etc
     RmDir /REBOOTOK $INSTDIR\i18n
-    RmDir /REBOOTOK $INSTDIR\lib\locale
     RmDir /REBOOTOK $INSTDIR\lib
     RmDir /REBOOTOK $INSTDIR\share\locale
     RmDir /REBOOTOK $INSTDIR\share



From gruntster at mail.berlios.de  Thu Apr 10 19:59:46 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Thu, 10 Apr 2008 19:59:46 +0200
Subject: [Avidemux-svn-commit] r3974 -
	branches/avidemux_2.4_branch/avidemux/ADM_encoder
Message-ID: <200804101759.m3AHxkTL010731@sheep.berlios.de>

Author: gruntster
Date: 2008-04-10 19:59:45 +0200 (Thu, 10 Apr 2008)
New Revision: 3974

Modified:
   branches/avidemux_2.4_branch/avidemux/ADM_encoder/ADM_encCodecDesc.h
Log:
[I18N] fix typo introduced in r3971

Modified: branches/avidemux_2.4_branch/avidemux/ADM_encoder/ADM_encCodecDesc.h
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_encoder/ADM_encCodecDesc.h	2008-04-10 16:49:00 UTC (rev 3973)
+++ branches/avidemux_2.4_branch/avidemux/ADM_encoder/ADM_encCodecDesc.h	2008-04-10 17:59:45 UTC (rev 3974)
@@ -536,7 +536,7 @@
 
 COMPRES_PARAMS DVDCodec = {
   CodecDVD,
-  QT_TR_NOOP("(DVD) mpeg2enc"),
+  QT_TR_NOOP("DVD (mpeg2enc)"),
   "DVD",
   "Mpeg2enc (DVD)",
   COMPRESS_CQ,



From gruntster at mail.berlios.de  Fri Apr 11 01:44:42 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Fri, 11 Apr 2008 01:44:42 +0200
Subject: [Avidemux-svn-commit] r3975 - in
	branches/avidemux_2.5_branch_gruntster:
	avidemux/ADM_audiocodec avidemux/ADM_core/include
	avidemux/ADM_core/src avidemux/ADM_encoder
	avidemux/ADM_libraries cmake
Message-ID: <200804102344.m3ANighV028453@sheep.berlios.de>

Author: gruntster
Date: 2008-04-11 01:44:37 +0200 (Fri, 11 Apr 2008)
New Revision: 3975

Removed:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_dca.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_videocodeclist.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libMad/
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_liba52/
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libwrapper/
Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_pluginLoad.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_dynamicLoading.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_dynamicLoading.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/cmake/FindThreads.cmake
Log:
[Misc] tidy ups and tweaks

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_dca.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_dca.cpp	2008-04-10 17:59:45 UTC (rev 3974)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_dca.cpp	2008-04-10 23:44:37 UTC (rev 3975)
@@ -1,197 +0,0 @@
-/***************************************************************************
-                          ADM_codecac3.cpp  -  description
-                             -------------------
-    begin                : Fri May 31 2002
-    copyright            : (C) 2002 by mean
-    email                : fixounet at free.fr
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#include <math.h>
-
-#include "config.h"
-#include "ADM_default.h"
-
-#include "ADM_audio/aviaudio.hxx"
-#include "ADM_audiocodec/ADM_audiocodec.h"
-
-#include "prefs.h"
-
-#ifdef USE_LIBDCA
-#include "ADM_audio/ADM_dcainfo.h"
-#include "ADM_libraries/ADM_libwrapper/libwrapper_global.h"
-
-#define DTS_HANDLE ((dts_state_t *)dts_handle)
-
-ADM_AudiocodecDCA::ADM_AudiocodecDCA( uint32_t fourcc, WAVHeader *info) :   ADM_Audiocodec(fourcc)
-{
-    int flags=0;
-    ADM_assert(fourcc==WAV_DTS);
-    dts_handle=NULL;
-    
-#ifdef ADM_CPU_X86
-#define CHK(x,y) if(CpuCaps::has##x()) flags|=MM_ACCEL_X86_##y;
-    CHK(MMX,MMX);
-    CHK(3DNOW,3DNOW);
-    CHK(MMXEXT,MMXEXT);
-#endif
-    
-    dts_handle=(void *)dca->dts_init_(flags);
-    if(!dts_handle)
-    {
-        printf("Cannot init libdca\n");
-        ADM_assert(0);   
-    }
-	_wavHeader = info;
-}
-
-ADM_AudiocodecDCA::~ADM_AudiocodecDCA( )
-{
-    if(dts_handle)
-    {
-        dca->dts_free_(DTS_HANDLE);
-        dts_handle=NULL;
-    }
-}
-
-uint8_t ADM_AudiocodecDCA::beginDecompress( void )
-{
-    return 1;
-}
-
-uint8_t ADM_AudiocodecDCA::endDecompress( void )
-{
-    return 1;
-}
-
-uint8_t ADM_AudiocodecDCA::run(uint8_t *inptr, uint32_t nbIn, float *outptr, uint32_t *nbOut)
-{
-    uint32_t avail;
-    uint32_t length,syncoff;
-    int flags = 0, samprate = 0, bitrate = 0, frame_length;
-    uint8_t chan = _wavHeader->channels;
-    *nbOut=0;
-
-
-    //  Ready to decode
-    while(nbIn)
-    {
-        if(nbIn<DTS_HEADER_SIZE)
-        {
-            if(nbIn)
-                printf("[DTS]: no data to decode avail %u\n",nbIn);
-            break;
-        }
-        //length = ADM_DCAGetInfo(ptr,nbIn, &samprate, &bitrate, &chan,&syncoff,&flags);
-        length = dca->dts_syncinfo_ (DTS_HANDLE,  inptr, &flags, &samprate,&bitrate, &frame_length);
-
-        if(!length)
-        {
-            printf("[DTS] dts_syncinfo failed\n");
-            ADM_assert(0); 
-        }
-        if(length>nbIn)
-        {
-            // not enough data
-            break;
-        }
-
-	if (ch_route.mode < 1) {
-		CHANNEL_TYPE *p_ch_type = ch_route.input_type;
-		switch (flags & DTS_CHANNEL_MASK) {
-			case DTS_MONO:
-				*(p_ch_type++) = CH_MONO;
-			break;
-			case DTS_STEREO:
-			case DTS_DOLBY:
-				*(p_ch_type++) = CH_FRONT_LEFT;
-				*(p_ch_type++) = CH_FRONT_RIGHT;
-			break;
-			case DTS_3F:
-				*(p_ch_type++) = CH_FRONT_CENTER;
-				*(p_ch_type++) = CH_FRONT_LEFT;
-				*(p_ch_type++) = CH_FRONT_RIGHT;
-			break;
-			case DTS_2F1R:
-				*(p_ch_type++) = CH_FRONT_LEFT;
-				*(p_ch_type++) = CH_FRONT_RIGHT;
-				*(p_ch_type++) = CH_REAR_CENTER;
-			break;
-			case DTS_3F1R:
-				*(p_ch_type++) = CH_FRONT_CENTER;
-				*(p_ch_type++) = CH_FRONT_LEFT;
-				*(p_ch_type++) = CH_FRONT_RIGHT;
-				*(p_ch_type++) = CH_REAR_CENTER;
-			break;
-			case DTS_2F2R:
-				*(p_ch_type++) = CH_FRONT_LEFT;
-				*(p_ch_type++) = CH_FRONT_RIGHT;
-				*(p_ch_type++) = CH_REAR_LEFT;
-				*(p_ch_type++) = CH_REAR_RIGHT;
-			break;
-			case DTS_3F2R:
-				*(p_ch_type++) = CH_FRONT_CENTER;
-				*(p_ch_type++) = CH_FRONT_LEFT;
-				*(p_ch_type++) = CH_FRONT_RIGHT;
-				*(p_ch_type++) = CH_REAR_LEFT;
-				*(p_ch_type++) = CH_REAR_RIGHT;
-			break;
-			default:
-				ADM_assert(0);
-		}
-		if (flags & DTS_LFE) {
-			*(p_ch_type++) = CH_LFE;
-		}
-	}
-
-        sample_t level = 1, bias = 0;
-        flags &=DTS_CHANNEL_MASK;
-        flags |= DTS_ADJUST_LEVEL;
-
-        if (dca->dts_frame_(DTS_HANDLE, inptr, &flags, &level, bias))
-        {
-            printf("\n DTS_frame failed!");
-            inptr+=length;
-            nbIn-=length;
-            outptr+=256*chan;
-            *nbOut+=256*chan;
-            break;
-        };
-
-        inptr+=length;
-        nbIn-=length;
-        // Each block is 256 samples
-        *nbOut += 256 * chan * dca->dts_blocks_num_(DTS_HANDLE);
-	float *cur;
-	for (int i = 0; i < dca->dts_blocks_num_(DTS_HANDLE); i++) {
-		if (dca->dts_block_ (DTS_HANDLE)) {
-			printf("\n[DTS] dts_block failed on block %d/%d\n",i,dca->dts_blocks_num_ (DTS_HANDLE));
-			// in that case we silent out the chunk
-			memset(outptr, 0, 256 * chan * sizeof(float));
-		} else {
-			float *cur;
-			for (int k = 0; k < chan; k++) {
-				sample_t *sample=(sample_t *)dca->dts_samples_(DTS_HANDLE);
-				sample += 256 * k;
-				cur = outptr + k;
-				for (int j = 0; j < 256; j++) {
-					*cur = *sample++;
-					cur+=chan;
-				}
-			}
-		}
-		outptr += chan * 256;
-	}
-    }
-
-    return 1; 
-}
-
-#endif

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_pluginLoad.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_pluginLoad.cpp	2008-04-10 17:59:45 UTC (rev 3974)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/ADM_pluginLoad.cpp	2008-04-10 23:44:37 UTC (rev 3975)
@@ -21,6 +21,7 @@
 #include "DIA_fileSel.h"
 #include "ADM_dynamicLoading.h"
 #include <vector>
+
 #if 1
 #define aprintf printf
 #else
@@ -30,17 +31,27 @@
 /**
  * 
  */
-class ADM_ad_plugin
+class ADM_ad_plugin : public ADM_LibWrapper
 {
-public:
-	ADM_ad_CreateFunction		*create;
-	ADM_ad_DeleteFunction		*destroy;
-	ADM_ad_SupportedFormat		*supportedFormat;
-	ADM_ad_GetApiVersion		*getApiVersion;
-	ADM_ad_GetDecoderVersion	*getDecoderVersion;
-	ADM_ADM_ad_GetInfo			*getInfo;
-	ADM_LibWrapper				*wrapper;
-	const char 					*name;
+	public:
+		ADM_ad_CreateFunction		*create;
+		ADM_ad_DeleteFunction		*destroy;
+		ADM_ad_SupportedFormat		*supportedFormat;
+		ADM_ad_GetApiVersion		*getApiVersion;
+		ADM_ad_GetDecoderVersion	*getDecoderVersion;
+		ADM_ADM_ad_GetInfo			*getInfo;
+		const char 					*name;
+
+		ADM_ad_plugin(const char *file) : ADM_LibWrapper()
+		{
+			initialised = (loadLibrary(file) && getSymbols(6,
+				&create, "create",
+				&destroy, "destroy",
+				&supportedFormat, "supportedFormat",
+				&getApiVersion, "getApiVersion",
+				&getDecoderVersion, "getDecoderVersion",
+				&getInfo, "getInfo"));
+		};
 };
 
 std::vector<ADM_ad_plugin *> ADM_audioPlugins;
@@ -50,51 +61,38 @@
  */
 static uint8_t tryLoadingAudioPlugin(const char *file)
 {
-	ADM_ad_plugin blank;
-	//printf("[ADM_ad_plugin] Scanning %s\n",ADM_GetFileName(file));
-	ADM_LibWrapper *wrapper=new ADM_LibWrapper;
-	 if(true!=wrapper->loadLibrary(file))
-	 {
-		 printf("[ADM_ad_plugin] LoadLibrary failed for %s\n",ADM_GetFileName(file));
-		 goto Err_ad;
-	 }
-#define FUNCKY(a,b,c)	 blank.a=(b *)wrapper->getSymbol(#c); if(!blank.a) { printf("[ADM_ad_plugin]"#c" failed\n"); goto Err_ad;;}
-	 FUNCKY(create,ADM_ad_CreateFunction,create);
-	 FUNCKY(destroy,ADM_ad_DeleteFunction,destroy);
-	 FUNCKY(supportedFormat,ADM_ad_SupportedFormat,supportedFormat);
-	 FUNCKY(getApiVersion,ADM_ad_GetApiVersion,getApiVersion);
-	 FUNCKY(getDecoderVersion,ADM_ad_GetDecoderVersion,getDecoderVersion);
-	 FUNCKY(getInfo,ADM_ADM_ad_GetInfo,getInfo);
-	 
-	 // Check API version
-	 if(blank.getApiVersion()!=AD_API_VERSION)
-	 {
-		 	printf("[ADM_ad_plugin] File %s has API version too old (%d vs %d)\n",
-		 			ADM_GetFileName(file),ADM_GetFileName(file),AD_API_VERSION);
-		 	 goto Err_ad;
-	 }
-	 // Get infos
-	 uint32_t major,minor,patch;
-	 const char *desc;
-	 blank.getDecoderVersion(&major,&minor,&patch);
-	 blank.wrapper=wrapper;
-	 blank.name=ADM_strdup(ADM_GetFileName(file));
-	 desc=blank.getInfo();
-	 // Print out stuff
-	 printf("[ADM_ad_plugin] Plugin loaded version %d.%d.%d, name %s,desc : %s ",
-			 		major,minor,patch,blank.name,desc);
-	 
-	 //
-	 {
-		 ADM_ad_plugin *p=new ADM_ad_plugin;
-		 *p=blank;
-		 ADM_audioPlugins.push_back(p);
-	 }
-	 return 1;
+	ADM_ad_plugin *plugin = new ADM_ad_plugin(file);
+
+	if (!plugin->isAvailable())
+	{
+		printf("[ADM_ad_plugin] Unable to load %s\n", ADM_GetFileName(file));
+		goto Err_ad;
+	}
+
+	// Check API version
+	if (plugin->getApiVersion() != AD_API_VERSION)
+	{
+		printf("[ADM_ad_plugin] File %s has API version too old (%d vs %d)\n",
+			ADM_GetFileName(file), ADM_GetFileName(file), AD_API_VERSION);
+		goto Err_ad;
+	}
+
+	// Get infos
+	uint32_t major, minor, patch;
+
+	plugin->getDecoderVersion(&major, &minor, &patch);
+	plugin->name = ADM_strdup(ADM_GetFileName(file));
+
+	printf("[ADM_ad_plugin] Plugin loaded version %d.%d.%d, name %s, desc: %s\n",
+		major, minor, patch, plugin->name, plugin->getInfo());
+
+	ADM_audioPlugins.push_back(plugin);
+
+	return 1;
+
 Err_ad:
-	delete wrapper;
+	delete plugin;
 	return 0;
-	
 }
 /**
  * 	\fn ADM_ad_loadPlugins

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_dynamicLoading.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_dynamicLoading.h	2008-04-10 17:59:45 UTC (rev 3974)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_dynamicLoading.h	2008-04-10 23:44:37 UTC (rev 3975)
@@ -26,7 +26,7 @@
 	#ifdef __WIN32
 		virtual char* formatMessage(uint32_t msgCode);
 	#endif
-public:
+
 		ADM_LibWrapper();
 		virtual ~ADM_LibWrapper();		
 		virtual bool loadLibrary(const char* path);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_dynamicLoading.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_dynamicLoading.cpp	2008-04-10 17:59:45 UTC (rev 3974)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/ADM_dynamicLoading.cpp	2008-04-10 23:44:37 UTC (rev 3975)
@@ -16,6 +16,7 @@
 
 #include <stdlib.h>
 #include <stdio.h>
+#include <stdarg.h>
 
 #ifdef __WIN32
 #include <windows.h>
@@ -135,7 +136,6 @@
 
 bool ADM_LibWrapper::getSymbols(int symCount, ...)
 {
-#ifdef __WIN32
     va_list va;
     va_start(va, symCount);
 
@@ -159,5 +159,4 @@
 
     va_end(va);
     return true;
-#endif
 }

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/CMakeLists.txt	2008-04-10 17:59:45 UTC (rev 3974)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/src/CMakeLists.txt	2008-04-10 23:44:37 UTC (rev 3975)
@@ -6,7 +6,7 @@
 ADD_TARGET_DEFINITIONS(ADM_core ADM_DEBUG FIND_LEAKS)
 
 IF (MINGW)
-	TARGET_LINK_LIBRARIES(ADM_core "${PTHREAD_LIBRARIES}" imagehlp wsock32)
+	TARGET_LINK_LIBRARIES(ADM_core "${PTHREAD_LIBRARIES}" imagehlp ws2_32)
 	ADD_TARGET_CFLAGS(ADM_core "-I${PTHREAD_INCLUDE_DIR}")
 ELSEIF (APPLE)
 	ADD_TARGET_LDFLAGS(ADM_core "-framework Carbon")

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_videocodeclist.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_videocodeclist.h	2008-04-10 17:59:45 UTC (rev 3974)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_videocodeclist.h	2008-04-10 23:44:37 UTC (rev 3975)
@@ -1,45 +0,0 @@
-#if 0				//ndef ADM_VODEC_L
-#define ADM_VODEC_L
-
-typedef struct codecEnumByName
-{
-  SelectCodecType type;
-  const char *displayName;
-  const char *name;
-} codecEnumByName;
-
-static const codecEnumByName mycodec[] = {
-  {CodecCopy, "Copy", "Copy"},
-#ifdef USE_DIVX
-  {CodecDivx, "Divx", "Divx"},
-#endif
-#ifdef USE_XX_XVID
-  {CodecXvid, "Xvid", "Xvid"},
-#endif
-
-#ifdef USE_XVID_4
-  {CodecXvid4, "Xvid4", "Xvid4"},
-#endif
-  {CodecMjpeg, "MJpeg", "Mjpeg"},
-#ifdef USE_MJPEG
-  {CodecVCD, "VCD", "VCD"},
-  {CodecSVCD, "SVCD", "SVCD"},
-  {CodecDVD, "DVD", "DVD"},
-#endif
-  {CodecXVCD, "XVCD", "XVCD"},
-  {CodecXSVCD, "SVCD (lavc)", "XSVCD"},
-  {CodecXDVD, "DVD (lavc)", "XDVD"},
-  {CodecFF, "Lav Mpeg4", "FFmpeg4"},
-  {CodecH263, "H263", "H263"},
-  {CodecFFhuff, "FF Huffyuv", "FFHUFF"},
-  {CodecH263P, "H263+", "H263+"},
-  {CodecHuff, "Huffyuv", "Huffyuv"},
-  {CodecFFV1, "FFV1", "FFV1"},
-#ifdef USE_X264
-  {CodecX264, "X264", "X264"},
-#endif
-  {CodecSnow, "Snow", "Snow"}
-};
-
-
-#endif

Modified: branches/avidemux_2.5_branch_gruntster/cmake/FindThreads.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/FindThreads.cmake	2008-04-10 17:59:45 UTC (rev 3974)
+++ branches/avidemux_2.5_branch_gruntster/cmake/FindThreads.cmake	2008-04-10 23:44:37 UTC (rev 3975)
@@ -24,6 +24,10 @@
 
 	IF (NOT PTHREAD_LIBRARIES AND WIN32)
 		FIND_LIBRARY(PTHREAD_LIBRARIES "pthreadGC2")
+		
+		IF (NOT PTHREAD_LIBRARIES)
+			FIND_LIBRARY(PTHREAD_LIBRARIES "pthreadVC2")
+		ENDIF (NOT PTHREAD_LIBRARIES)
 	ENDIF (NOT PTHREAD_LIBRARIES AND WIN32)
 
 	IF (NOT PTHREAD_LIBRARIES)



From mean at mail.berlios.de  Fri Apr 11 19:37:31 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 11 Apr 2008 19:37:31 +0200
Subject: [Avidemux-svn-commit] r3976 - in
	branches/avidemux_2.5_branch_gruntster/avidemux: . ADM_codecs
	ADM_core/include ADM_coreUI/include ADM_coreUI/src
	ADM_inputs/ADM_mp4 ADM_script ADM_userInterfaces/ADM_GTK/ADM_dialog
	ADM_userInterfaces/ADM_GTK/ADM_dialogFactory
	ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk
	ADM_userInterfaces/ADM_NONE/ADM_dialog
	ADM_userInterfaces/ADM_NONE/ADM_gui2
	ADM_userInterfaces/ADM_QT4/ADM_dialog
	ADM_userInterfaces/ADM_QT4/ADM_dialogFactory
	ADM_userInterfaces/ADM_QT4/ADM_gui
Message-ID: <200804111737.m3BHbVof030278@sheep.berlios.de>

Author: mean
Date: 2008-04-11 19:37:22 +0200 (Fri, 11 Apr 2008)
New Revision: 3976

Added:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_coreToolkit.cpp
Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_ffmp43.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_ffmpeg.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_misc.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_coreToolkit.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_coreUI_internal.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_factory.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_fileSel.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mp4/ADM_mp4Analyzer.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSFunctions.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_dialogFactory.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/choice.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/toolkit_dialog.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/alert_none.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_gui2/file_none.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/alert_qt4.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_bar.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_float.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_frame.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_hex.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_integer.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_matrix.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_notch.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_readOnlyText.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_bitrate.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_button.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_dialogFactory.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_filesel.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_menu.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_slider.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_threadCount.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_toggle.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/file_qt4.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/main.cpp
Log:
[Merge] from mean branch


Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_ffmp43.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_ffmp43.cpp	2008-04-10 23:44:37 UTC (rev 3975)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_ffmp43.cpp	2008-04-11 17:37:22 UTC (rev 3976)
@@ -41,14 +41,14 @@
 #define WRAP_Open(x) \
 {\
 AVCodec *codec=avcodec_find_decoder(x);\
-if(!codec) {GUI_Alert(QT_TR_NOOP("Internal error finding codec"#x));ADM_assert(0);} \
+if(!codec) {GUI_Error_HIG("Codec",QT_TR_NOOP("Internal error finding codec"#x));ADM_assert(0);} \
   codecId=x; \
   _context->workaround_bugs=1*FF_BUG_AUTODETECT +1*FF_BUG_NO_PADDING;/**/ \
   _context->error_concealment=3; \
   if (avcodec_open(_context, codec) < 0)  \
                       { \
                                         printf("[lavc] Decoder init: "#x" video decoder failed!\n"); \
-                                        GUI_Alert("Internal error opening "#x); \
+                                        GUI_Error_HIG("Codec","Internal error opening "#x); \
                                         ADM_assert(0); \
                                 } \
                                 else \

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_ffmpeg.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_ffmpeg.cpp	2008-04-10 23:44:37 UTC (rev 3975)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_ffmpeg.cpp	2008-04-11 17:37:22 UTC (rev 3976)
@@ -47,9 +47,9 @@
 #define WRAP_Open(x) \
 {\
 AVCodec *codec=avcodec_find_encoder(x);\
-if(!codec) {GUI_Alert(QT_TR_NOOP("Internal error opening codec"#x));ADM_assert(0);} \
+if(!codec) {GUI_Error_HIG("Codec",QT_TR_NOOP("Internal error opening codec"#x));ADM_assert(0);} \
   res=avcodec_open(_context, codec); \
-  if(res<0) {GUI_Alert(QT_TR_NOOP("Internal error with context for  codec"#x".\n Did you use too low / too high target for 2 pass ?"));return 0;} \
+  if(res<0) {GUI_Error_HIG("Codec",QT_TR_NOOP("Internal error with context for  codec"#x".\n Did you use too low / too high target for 2 pass ?"));return 0;} \
 }
 /*****************************************/
 uint8_t ffmpegEncoder::stopEncoder(void)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_misc.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_misc.h	2008-04-10 23:44:37 UTC (rev 3975)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_misc.h	2008-04-11 17:37:22 UTC (rev 3976)
@@ -11,14 +11,6 @@
 
 #include "ADM_coreConfig.h"
 
-typedef enum 
-{
-        ADM_LOG_NONE=0,
-        ADM_LOG_IMPORTANT=1,
-        ADM_LOG_INFO=2,
-        ADM_LOG_DEBUG=3
-  
-} ADM_LOG_LEVEL;
 
 typedef struct 
 {

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_coreToolkit.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_coreToolkit.h	2008-04-10 23:44:37 UTC (rev 3975)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_coreToolkit.h	2008-04-11 17:37:22 UTC (rev 3976)
@@ -18,9 +18,23 @@
 
 #ifndef ADM_COREUI_TOOLKIT__
 #define ADM_COREUI_TOOLKIT__
+<<<<<<< HEAD:avidemux/ADM_coreUI/include/DIA_coreToolkit.h
+
+
+typedef enum 
+{
+        ADM_LOG_NONE=0,
+        ADM_LOG_IMPORTANT=1,
+        ADM_LOG_INFO=2,
+        ADM_LOG_DEBUG=3
+  
+} ADM_LOG_LEVEL;
+
+=======
 // These two are obsoletes...
 void            GUI_Alert(const char *alertstring);
 void            GUI_Info(const char *alertstring);
+>>>>>>> master:avidemux/ADM_coreUI/include/DIA_coreToolkit.h
 // Display a warning/info/debug message. The primary field is the "title" of the window, secondary format is printf like
 void            GUI_Info_HIG(const ADM_LOG_LEVEL level,const char *primary, const char *secondary_format, ...);
 // Display an error message. The primary field is the "title" of the window, secondary format is printf like

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_coreUI_internal.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_coreUI_internal.h	2008-04-10 23:44:37 UTC (rev 3975)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_coreUI_internal.h	2008-04-11 17:37:22 UTC (rev 3976)
@@ -113,4 +113,29 @@
 }FactoryDescriptor;
 //
 uint8_t DIA_factoryInit(FactoryDescriptor *d);
+
+// This is for coreToolkit UI elements
+typedef void            CREATE_GUI_INFO_HIG(const ADM_LOG_LEVEL level,const char *primary, const char *secondary_format);
+typedef void            CREATE_GUI_ERROR_HIG(const char *primary, const char *secondary_format);
+typedef int             CREATE_GUI_CONFIRMATION_HIG(const char *button_confirm, const char *primary, const char *secondary_format);
+typedef int             CREATE_GUI_YESNO(const char *primary, const char *secondary_format);
+typedef int             CREATE_GUI_QUESTION(const char *alertstring);
+typedef int             CREATE_GUI_ALTERNATE(char *title,char *choice1,char *choice2);
+typedef void            CREATE_GUI_VERBOSE(void);
+typedef void            CREATE_GUI_QUIET(void);
+typedef uint8_t			CREATE_GUI_IS_GUIET(void);
+// GUI_Sleep is internal
+typedef struct
+{
+	CREATE_GUI_INFO_HIG 		*infoHig;
+	CREATE_GUI_ERROR_HIG		*errorHig;
+	CREATE_GUI_CONFIRMATION_HIG *confirmationHig;
+	CREATE_GUI_YESNO 			*yesno;
+	CREATE_GUI_QUESTION 		*question;
+	CREATE_GUI_ALTERNATE        *alternate;
+	CREATE_GUI_VERBOSE 			*verbose;
+	CREATE_GUI_QUIET 			*quiet;
+	CREATE_GUI_IS_GUIET 		*isQuiet;
+}CoreToolkitDescriptor;
+uint8_t  DIA_toolkitInit(CoreToolkitDescriptor *d);
 #endif

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/CMakeLists.txt	2008-04-10 23:44:37 UTC (rev 3975)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/CMakeLists.txt	2008-04-11 17:37:22 UTC (rev 3976)
@@ -1,6 +1,7 @@
 SET(ADM_coreUI_SRCS 
 	DIA_factory.cpp
 	DIA_fileSel.cpp
+        DIA_coreToolkit.cpp
 )
 
 ADD_LIBRARY(ADM_coreUI SHARED ${ADM_coreUI_SRCS})

Added: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_coreToolkit.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_coreToolkit.cpp	2008-04-10 23:44:37 UTC (rev 3975)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_coreToolkit.cpp	2008-04-11 17:37:22 UTC (rev 3976)
@@ -0,0 +1,172 @@
+/** *************************************************************************
+        \file                  DIA_coreToolkit.cpp
+ 
+		(c) 2008 Mean, fixounet at free.fr
+
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#include "ADM_default.h"
+#include "DIA_coreToolkit.h"
+#include "DIA_coreUI_internal.h"
+#include "DIA_factoryStubs.h"
+#include <stdarg.h>
+static CoreToolkitDescriptor *Toolkit=NULL;
+#define MAX_ALERT_SIZE 1024
+/**
+ * 	\fn DIA_toolkitInit
+ *  \brief Hook a set of coreUIToolkit into the dll (needed for win32)
+ */
+uint8_t  DIA_toolkitInit(CoreToolkitDescriptor *d)
+{
+	uint32_t major,minor,patch;
+	Toolkit=d;
+	return 1;
+}
+/**
+ * 	\fn GUI_Info_HIG
+ *  \brief Display a warning/info/debug message. The primary field is the "title" of the window, secondary format is printf like
+ */
+
+void            GUI_Info_HIG(const ADM_LOG_LEVEL level,const char *primary, const char *secondary_format, ...)
+{
+	char text[MAX_ALERT_SIZE+1];
+	ADM_assert(Toolkit);
+	va_list ap;
+	
+		va_start(ap, secondary_format);
+		if (secondary_format)
+		{
+			 vsnprintf(text,
+						MAX_ALERT_SIZE,
+						secondary_format, 
+						ap);
+		}		
+		va_end(ap);
+		
+	Toolkit->infoHig(level,primary,text);
+	
+}
+/**
+ * 	\fn GUI_Error_HIG
+ *  \brief Display an error message. The primary field is the "title" of the window, secondary format is printf like
+ */
+
+void            GUI_Error_HIG(const char *primary, const char *secondary_format, ...)
+{
+	char text[MAX_ALERT_SIZE+1];
+		ADM_assert(Toolkit);
+		va_list ap;
+		
+			va_start(ap, secondary_format);
+			if (secondary_format)
+			{
+				 vsnprintf(text,
+							MAX_ALERT_SIZE,
+							secondary_format, 
+							ap);
+			}		
+			va_end(ap);
+	Toolkit->errorHig(primary,text);	
+}
+/**
+ * 	\fn GUI_Confirmation_HIG
+ *  \brief ask for confirmation. The button_confirm will be the title of the button (accept, do it,...)
+ */
+
+int             GUI_Confirmation_HIG(const char *button_confirm, const char *primary, const char *secondary_format, ...)
+{
+	char text[MAX_ALERT_SIZE+1];
+			ADM_assert(Toolkit);
+			va_list ap;
+			
+				va_start(ap, secondary_format);
+				if (secondary_format)
+				{
+					 vsnprintf(text,
+								MAX_ALERT_SIZE,
+								secondary_format, 
+								ap);
+				}		
+				va_end(ap);
+	return Toolkit->confirmationHig(button_confirm,primary,text);	
+}
+/**
+ * 	\fn GUI_YesNo
+ *  \brief Ask for yes/no. Yes will return 1, No will return 0
+ */
+
+int             GUI_YesNo(const char *primary, const char *secondary_format, ...)
+{
+	char text[MAX_ALERT_SIZE+1];
+			ADM_assert(Toolkit);
+			va_list ap;
+			
+				va_start(ap, secondary_format);
+				if (secondary_format)
+				{
+					 vsnprintf(text,
+								MAX_ALERT_SIZE,
+								secondary_format, 
+								ap);
+				}		
+				va_end(ap);
+	return Toolkit->yesno(primary,text);	
+}
+/**
+ * 	\fn GUI_Question
+ *  \brief About the same as GUI_YesNo, the button will be ok/cancel
+ */
+int             GUI_Question(const char *alertstring)
+{
+	ADM_assert(Toolkit);
+	return Toolkit->question(alertstring);	
+}
+/**
+ * 	\fn GUI_Alternate
+ *  \brief Ask to choose between choice1 and choice2
+ * 
+ */
+int             GUI_Alternate(char *title,char *choice1,char *choice2)
+{
+	ADM_assert(Toolkit);
+	return Toolkit->alternate(title,choice1,choice2);	
+}
+
+/**
+ * 	\fn GUI_Verbose
+ *  \brief  Set ui in verbose mode (default). Show all popup & questions
+ */
+void            GUI_Verbose(void)
+{
+	ADM_assert(Toolkit);
+	Toolkit->verbose();	
+}
+/**
+ * 	\fn GUI_Quiet
+ *  \brief Set the ui in silent mode. All popups & questions will be answered with their default value
+ */
+void            GUI_Quiet(void)
+{
+	ADM_assert(Toolkit);
+	Toolkit->quiet();	
+}
+/**
+ * 	\fn GUI_isQuiet
+ *  \brief  Is the UI in quiet mode ?
+ */
+uint8_t			GUI_isQuiet(void)
+{
+	ADM_assert(Toolkit);
+	return Toolkit->isQuiet();	
+}
+
+

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_factory.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_factory.cpp	2008-04-10 23:44:37 UTC (rev 3975)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_factory.cpp	2008-04-11 17:37:22 UTC (rev 3976)
@@ -20,6 +20,7 @@
  ***************************************************************************/
 
 #include "ADM_default.h"
+#include "DIA_coreToolkit.h"
 #include "DIA_coreUI_internal.h"
 #include "DIA_factoryStubs.h"
 
@@ -44,6 +45,7 @@
 		printf("[CoreUI] Maybe Incompatible COREUI Minor version, compiled with %d, using %d\n",ADM_COREUI_MINOR,minor);
 	}
 	printf("[CoreUI] Compiled with patch version %d, using %d\n",ADM_COREUI_PATCH,patch);
+	return 1;
 }
 // ****************** All ************************
 uint8_t diaFactoryRun(const char *title,uint32_t nb,diaElem **elems)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_fileSel.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_fileSel.cpp	2008-04-10 23:44:37 UTC (rev 3975)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_fileSel.cpp	2008-04-11 17:37:22 UTC (rev 3976)
@@ -15,6 +15,7 @@
  ***************************************************************************/
 
 #include "ADM_default.h"
+#include "DIA_coreToolkit.h"
 #include "DIA_coreUI_internal.h"
 
 static DIA_FILESEL_DESC_T *fileSelDescriptor=NULL;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mp4/ADM_mp4Analyzer.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mp4/ADM_mp4Analyzer.cpp	2008-04-10 23:44:37 UTC (rev 3975)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mp4/ADM_mp4Analyzer.cpp	2008-04-11 17:37:22 UTC (rev 3976)
@@ -619,8 +619,14 @@
                                           commonPart(H264);
                                           // There is a avcC atom just after
                                           // configuration data for h264
+nextAtom:                                          
                                           adm_atom avcc(&son);
                                           printf("Reading avcC, got %s\n",fourCC::tostringBE(avcc.getFCC()));
+                                          if(avcc.getFCC()==MKFCCR('c','o','l','r')) // Color atom
+                                          {
+                                        	  avcc.skipAtom();
+                                        	  goto nextAtom;
+                                          }
                                           int len,offset;
                                           VDEO.extraDataSize=avcc.getRemainingSize();
                                           VDEO.extraData=new uint8_t [VDEO.extraDataSize];

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSFunctions.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSFunctions.cpp	2008-04-10 23:44:37 UTC (rev 3975)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSFunctions.cpp	2008-04-11 17:37:22 UTC (rev 3976)
@@ -185,7 +185,7 @@
 		return JS_FALSE;
 	char  *stringa = JS_GetStringBytes(JSVAL_TO_STRING(argv[0]));
 	GUI_Verbose();
-	GUI_Alert(stringa);
+	GUI_Error_HIG("Error",stringa);
 	GUI_Quiet();
 
 	return JS_TRUE;
@@ -200,7 +200,7 @@
 		return JS_FALSE;
 	char  *stringa = JS_GetStringBytes(JSVAL_TO_STRING(argv[0]));
 	GUI_Verbose();
-	GUI_Info(stringa);
+	GUI_Info_HIG(ADM_LOG_IMPORTANT,"Info",stringa);
 	GUI_Quiet();
 	return JS_TRUE;
 }// end displayInfo

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp	2008-04-10 23:44:37 UTC (rev 3975)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp	2008-04-11 17:37:22 UTC (rev 3976)
@@ -161,7 +161,7 @@
                         
                         default:
                                 printf("Event:%d\n",event); 
-                                GUI_Alert(QT_TR_NOOP("Unknown event"));break;
+                                GUI_Error_HIG("Jobs",QT_TR_NOOP("Unknown event"));break;
                 }
                 
         }

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_dialogFactory.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_dialogFactory.cpp	2008-04-10 23:44:37 UTC (rev 3975)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_dialogFactory.cpp	2008-04-11 17:37:22 UTC (rev 3976)
@@ -14,6 +14,7 @@
 
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
 #include "DIA_factory.h"
+#include "DIA_coreToolkit.h"
 #include "DIA_coreUI_internal.h"
 
 static uint8_t  buildOneTab(GtkWidget *nb,int index, diaElemTabs *tab);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp	2008-04-10 23:44:37 UTC (rev 3975)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp	2008-04-11 17:37:22 UTC (rev 3976)
@@ -17,11 +17,9 @@
 #include "DIA_factory.h"
 namespace ADM_GtkFactory
 {
-class diaElemBitrate : public diaElem
+class diaElemBitrate : public diaElemBitrateBase
 {
-  protected:
-    COMPRES_PARAMS    copy;
-    uint32_t maxQ;
+protected:
 public:
   
   diaElemBitrate(COMPRES_PARAMS *p,const char *toggleTitle,const char *tip=NULL);
@@ -63,7 +61,7 @@
 }
 
  diaElemBitrate::diaElemBitrate(COMPRES_PARAMS *p,const char *toggleTitle,const char *tip)
-  : diaElem(ELEM_BITRATE)
+  : diaElemBitrateBase()
 {
   param=(void *)p;
   memcpy(&copy,p,sizeof(copy));

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp	2008-04-10 23:44:37 UTC (rev 3975)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp	2008-04-11 17:37:22 UTC (rev 3976)
@@ -18,7 +18,7 @@
 ***************************************************************************/
 
 #include "toolkit_gtk.h"
-
+#include "DIA_coreToolkit.h"
 #include <errno.h>
 #include <sys/types.h>
 #include <sys/stat.h>

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/choice.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/choice.cpp	2008-04-10 23:44:37 UTC (rev 3975)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/choice.cpp	2008-04-11 17:37:22 UTC (rev 3976)
@@ -63,6 +63,8 @@
 
 //
 //_______________________________
+namespace ADM_GtkCoreUIToolkit
+{
 int GUI_Alternate(char *title,char *choice1,char *choice2)
 {
     GtkWidget *window1;
@@ -132,5 +134,5 @@
     return ret;
 }
 
-
+} // End of namespace
 //EOF

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/toolkit_dialog.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/toolkit_dialog.cpp	2008-04-10 23:44:37 UTC (rev 3975)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/toolkit_dialog.cpp	2008-04-11 17:37:22 UTC (rev 3976)
@@ -20,7 +20,8 @@
  ***************************************************************************/
 #include "toolkit_gtk.h"
 #include "prefs.h"
-
+#include "DIA_coreToolkit.h"
+#include "DIA_coreUI_internal.h"
 #define GLADE_HOOKUP_OBJECT(component,widget,name) \
   g_object_set_data_full (G_OBJECT (component), name, \
     gtk_widget_ref (widget), (GDestroyNotify) gtk_widget_unref)
@@ -102,6 +103,8 @@
 	Answers always no to question
 
 */
+namespace ADM_GtkCoreUIToolkit
+{
 uint8_t GUI_isQuiet(void )
 {
 	return beQuiet;
@@ -192,7 +195,7 @@
 @secondary_format: printf()-style format string for secondary text, or NULL for no secondary text
 @...: arguments for secondary_format
 */
-void GUI_Info_HIG(const ADM_LOG_LEVEL level,const char *primary, const char *secondary_format, ...)
+void GUI_Info_HIG(const ADM_LOG_LEVEL level,const char *primary, const char *secondary_format)
 {
 	GtkWidget *dialog;
 	uint32_t msglvl=2;
@@ -205,22 +208,18 @@
                 return;
         }
 
-	va_list ap;
-	va_start(ap, secondary_format);
 
 	char *alertstring;
 	
 	if (secondary_format)
 	{
-		char *secondary = g_strdup_vprintf(secondary_format, ap);
+
 		if (beQuiet)
 		{
-			printf("Info: %s\n%s\n", primary, secondary);
-			g_free(secondary);
+			printf("Info: %s\n%s\n", primary, secondary_format);
 			return;
 		}
-		alertstring = g_strconcat("<span size=\"larger\" weight=\"bold\">", primary, "</span>\n\n", secondary, NULL);
-		g_free(secondary);
+		alertstring = g_strconcat("<span size=\"larger\" weight=\"bold\">", primary, "</span>\n\n", secondary_format, NULL);
 	}
 	else
 	{	
@@ -232,7 +231,6 @@
 		alertstring = g_strconcat("<span size=\"larger\" weight=\"bold\">", primary, "</span>", NULL);
 	}
 	
-	va_end(ap);
 	
 	dialog=create_dialogInfo();
 	gtk_label_set_text(GTK_LABEL(WID(label1)), alertstring);
@@ -245,32 +243,7 @@
 	UI_purge();
 }
 
-/**
-	GUI_Alert : Just display an alert string in a dialog box
-	The string can contain \n for multi lines display
-	
-	Deprecated - for error alerts, use GUI_Error_HIG.
-*/
-void 		GUI_Alert(const char *alertstring)
-{
-	   GtkWidget *dialog;
 
-        if(beQuiet) 
-        {
-                printf("Info: %s\n",alertstring);
-                return  ;
-        }
-        dialog=create_dialogWarning();
-        gtk_label_set_text(GTK_LABEL(WID(label1)),alertstring);
-        gtk_label_set_use_markup(GTK_LABEL(WID(label1)), TRUE);
-        gtk_register_dialog(dialog);
-        gtk_dialog_run(GTK_DIALOG(dialog));
-        gtk_unregister_dialog(dialog);
-        gtk_widget_destroy(dialog);
-	UI_purge();
-
-}
-
 /**
 GUI_Error_HIG: display an error dialog.
 Takes primary and optional secondary string, as described in GNOME HIG 2.0.
@@ -279,7 +252,7 @@
 @secondary_format: printf()-style format string for secondary text, or NULL for no secondary text
 @...: arguments for secondary_format
 */
-void GUI_Error_HIG(const char *primary, const char *secondary_format, ...)
+void GUI_Error_HIG(const char *primary, const char *secondary_format)
 {
 	GtkWidget *dialog;
 	uint32_t msglvl=2;
@@ -291,22 +264,18 @@
                 return;
         }
 
-	va_list ap;
-	va_start(ap, secondary_format);
 
 	char *alertstring;
 	
 	if (secondary_format)
 	{
-		char *secondary = g_strdup_vprintf(secondary_format, ap);
+		
 		if (beQuiet)
 		{
-			printf("Info: %s\n%s\n", primary, secondary);
-			g_free(secondary);
+			printf("Info: %s\n%s\n", primary, secondary_format);
 			return;
 		}
-		alertstring = g_strconcat("<span size=\"larger\" weight=\"bold\">", primary, "</span>\n\n", secondary, NULL);
-		g_free(secondary);
+		alertstring = g_strconcat("<span size=\"larger\" weight=\"bold\">", primary, "</span>\n\n", secondary_format, NULL);
 	}
 	else
 	{	
@@ -318,7 +287,6 @@
 		alertstring = g_strconcat("<span size=\"larger\" weight=\"bold\">", primary, "</span>", NULL);
 	}
 	
-	va_end(ap);
 	
 	dialog=create_dialogWarning();
 	gtk_label_set_text(GTK_LABEL(WID(label1)), alertstring);
@@ -345,27 +313,22 @@
 @secondary_format: printf()-style format string for secondary text, or NULL for no secondary text
 @...: arguments for secondary_format
 */
-int GUI_Confirmation_HIG(const char *button_confirm, const char *primary, const char *secondary_format, ...)
+int GUI_Confirmation_HIG(const char *button_confirm, const char *primary, const char *secondary_format)
 {
 	int ret=0;
 	GtkWidget *dialog;
 	
-	va_list ap;
-	va_start(ap, secondary_format);
-
 	char *alertstring;
 	
 	if (secondary_format)
 	{
-		char *secondary = g_strdup_vprintf(secondary_format, ap);
+		
 		if (beQuiet)
 		{
-			printf("Info: %s\n%s\n", primary, secondary);
-			g_free(secondary);
+			printf("Info: %s\n%s\n", primary, secondary_format);
 			return 0;
 		}
-		alertstring = g_strconcat("<span size=\"larger\" weight=\"bold\">", primary, "</span>\n\n", secondary, NULL);
-		g_free(secondary);
+		alertstring = g_strconcat("<span size=\"larger\" weight=\"bold\">", primary, "</span>\n\n", secondary_format, NULL);
 	}
 	else
 	{	
@@ -377,7 +340,6 @@
 		alertstring = g_strconcat("<span size=\"larger\" weight=\"bold\">", primary, "</span>", NULL);
 	}
 	
-	va_end(ap);
 
 	dialog=create_dialogConfirmation(button_confirm);
 	gtk_label_set_text(GTK_LABEL(WID(label1)), alertstring);
@@ -408,27 +370,22 @@
 @secondary_format: printf()-style format string for secondary text, or NULL for no secondary text
 @...: arguments for secondary_format
 */
-int GUI_YesNo(const char *primary, const char *secondary_format, ...)
+int GUI_YesNo(const char *primary, const char *secondary_format)
 {
 	int ret=0;
 	GtkWidget *dialog;
 	
-	va_list ap;
-	va_start(ap, secondary_format);
-
 	char *alertstring;
 	
 	if (secondary_format)
 	{
-		char *secondary = g_strdup_vprintf(secondary_format, ap);
+		
 		if (beQuiet)
 		{
-			printf("Info: %s\n%s\n", primary, secondary);
-			g_free(secondary);
+			printf("Info: %s\n%s\n", primary, secondary_format);
 			return 0;
 		}
-		alertstring = g_strconcat("<span size=\"larger\" weight=\"bold\">", primary, "</span>\n\n", secondary, NULL);
-		g_free(secondary);
+		alertstring = g_strconcat("<span size=\"larger\" weight=\"bold\">", primary, "</span>\n\n", secondary_format, NULL);
 	}
 	else
 	{	
@@ -440,7 +397,6 @@
 		alertstring = g_strconcat("<span size=\"larger\" weight=\"bold\">", primary, "</span>", NULL);
 	}
 	
-	va_end(ap);
 
 	dialog=create_dialogYN();
 	gtk_label_set_text(GTK_LABEL(WID(label1)), alertstring);
@@ -456,7 +412,27 @@
 	UI_purge();
 	return ret;
 }
+extern int GUI_Alternate(char *title,char *choice1,char *choice2);
+} // End of namespace
 
+static CoreToolkitDescriptor GtkCoreToolkitDescriptor=
+{
+		&ADM_GtkCoreUIToolkit::GUI_Info_HIG,
+		&ADM_GtkCoreUIToolkit::GUI_Error_HIG,
+		&ADM_GtkCoreUIToolkit::GUI_Confirmation_HIG,
+		&ADM_GtkCoreUIToolkit::GUI_YesNo,
+		&ADM_GtkCoreUIToolkit::GUI_Question,
+		&ADM_GtkCoreUIToolkit::GUI_Alternate,
+		&ADM_GtkCoreUIToolkit::GUI_Verbose,
+		&ADM_GtkCoreUIToolkit::GUI_Quiet,
+		&ADM_GtkCoreUIToolkit::GUI_isQuiet
+};
+
+void InitCoreToolkit(void )
+{
+	DIA_toolkitInit(&GtkCoreToolkitDescriptor);
+	
+}
 /**
 	Return the line number of a selection
 	0 if no selection of fails

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/alert_none.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/alert_none.cpp	2008-04-10 23:44:37 UTC (rev 3975)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/alert_none.cpp	2008-04-11 17:37:22 UTC (rev 3976)
@@ -12,8 +12,8 @@
 
 #include "prefs.h"
 
+#include "DIA_coreToolkit.h"
 
-
 #include "ADM_assert.h" 
 
 #define BOX_SIZE 80
@@ -41,20 +41,6 @@
 }
 
 
-void            GUI_Alert(const char *alertstring)
-{
-  boxStart();
-  boxAdd("Alert");
-  boxAdd(alertstring);
-  boxEnd();
-}
-void            GUI_Info(const char *alertstring)
-{
-  boxStart();
-  boxAdd("Alert");
-  boxAdd(alertstring);
-  boxEnd();
-}
 
 void            GUI_Info_HIG(const ADM_LOG_LEVEL level,const char *primary, const char *secondary_format, ...)
 {
@@ -260,3 +246,8 @@
 {
  return 0; 
 }
+void InitCoreToolkit(void)
+{
+	
+}
+//EOF

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_gui2/file_none.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_gui2/file_none.cpp	2008-04-10 23:44:37 UTC (rev 3975)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_gui2/file_none.cpp	2008-04-11 17:37:22 UTC (rev 3976)
@@ -13,6 +13,7 @@
 #include "ADM_default.h"
 
 #include "DIA_fileSel.h"
+#include "DIA_coreToolkit.h"
 #include "DIA_coreUI_internal.h"
 
 namespace  ADM_CLI_fileSel
@@ -78,4 +79,4 @@
 uint8_t UI_getPhysicalScreenSize(void *window, uint32_t *w,uint32_t *h)
 {
   *w=*h=10000; 
-}
\ No newline at end of file
+}

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/alert_qt4.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/alert_qt4.cpp	2008-04-10 23:44:37 UTC (rev 3975)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/alert_qt4.cpp	2008-04-11 17:37:22 UTC (rev 3976)
@@ -1,13 +1,5 @@
-
-
-
-
-
-
-
-
 /**
-    \fn alert_qt4
+    \file alert_qt4
    copyright            : (C) 2007 by mean
     email                : Mean/fixounet at free.fr
  ***************************************************************************/
@@ -23,16 +15,15 @@
 
 #include <QDialog>
 #include <QMessageBox>
-
+#include "DIA_coreToolkit.h"
+#include "DIA_coreUI_internal.h"
 #include "ADM_default.h"
 #include "prefs.h"
 
-
-
-
 static int beQuiet=0;
 extern QWidget *QuiMainWindows;
-
+namespace ADM_Qt4CoreUIToolkit
+{
 //****************************************************************************************************
 void            GUI_Alert(const char *alertstring)
 {
@@ -51,12 +42,11 @@
 }
 
 //****************************************************************************************************
-void            GUI_Info_HIG(const ADM_LOG_LEVEL level,const char *primary, const char *secondary_format, ...)
+void            GUI_Info_HIG(const ADM_LOG_LEVEL level,const char *primary, const char *secondary_format)
 {
   uint32_t msglvl=2;
   char *string;
   char alertstring[1024];
-  char alertstring2[1024];
 
         prefs->get(MESSAGE_LEVEL,&msglvl);
 
@@ -71,11 +61,7 @@
             snprintf(alertstring,1024,"<big><b>%s</b></big>",primary);
          }else
          {
-            va_list ap;
-            va_start(ap, secondary_format);
-            vsnprintf(alertstring2,1023,secondary_format, ap);
-            snprintf(alertstring,1024,"<big><b>%s</b></big><br><br>%s",primary,alertstring2);
-            va_end(ap);
+        	 snprintf(alertstring,1024,"<big><b>%s</b></big><br><br>%s",primary,secondary_format);
          }
         QMessageBox::StandardButton reply;
           reply = QMessageBox::information(QuiMainWindows, QString::fromUtf8(QT_TR_NOOP("Info")),
@@ -84,13 +70,13 @@
 
 }
 //****************************************************************************************************
-void            GUI_Error_HIG(const char *primary, const char *secondary_format, ...)
+void            GUI_Error_HIG(const char *primary, const char *secondary_format)
 {
   uint32_t msglvl=2;
   char *string;
   char alertstring[1024];
-  char alertstring2[1024];
   
+  
         prefs->get(MESSAGE_LEVEL,&msglvl);
 
         if(msglvl==ADM_LOG_NONE) 
@@ -104,11 +90,7 @@
             snprintf(alertstring,1024,"<big><b>%s</b></big>",primary);
          }else
          {
-            va_list ap;
-            va_start(ap, secondary_format);
-            vsnprintf(alertstring2,1023,secondary_format, ap);
-            snprintf(alertstring,1024,"<big><b>%s</b></big><br><br>%s",primary,alertstring2);
-            va_end(ap);
+        	 snprintf(alertstring,1024,"<big><b>%s</b></big><br><br>%s",primary,secondary_format);
          }
           QMessageBox::StandardButton reply;
           reply = QMessageBox::critical(QuiMainWindows, QString::fromUtf8(QT_TR_NOOP("Info")),
@@ -116,11 +98,11 @@
                                     QMessageBox::Ok );
 }
 //****************************************************************************************************
-int             GUI_Confirmation_HIG(const char *button_confirm, const char *primary, const char *secondary_format, ...)
+int             GUI_Confirmation_HIG(const char *button_confirm, const char *primary, const char *secondary_format)
 {
 uint32_t msglvl=2;
 char alertstring[1024];
-char alertstring2[1024];
+
         if (beQuiet)
               {
                       printf("Info: %s\n", primary);
@@ -133,11 +115,7 @@
         }
         else
         {	
-              va_list ap;
-              va_start(ap, secondary_format);
-              vsnprintf(alertstring2,1023,secondary_format, ap);
-              snprintf(alertstring,1024,"<big><b>%s</b></big><br><br>%s",primary,alertstring2);
-              va_end(ap);
+        	snprintf(alertstring,1024,"<big><b>%s</b></big><br><br>%s",primary,secondary_format);
         }
           QMessageBox::StandardButton reply;
           reply = QMessageBox::question(QuiMainWindows, QString::fromUtf8(QT_TR_NOOP("Confirmation")),
@@ -147,7 +125,7 @@
         return 0; 
 }
 //****************************************************************************************************
-int             GUI_YesNo(const char *primary, const char *secondary_format, ...)
+int             GUI_YesNo(const char *primary, const char *secondary_format)
 {
 uint32_t msglvl=2;
 char alertstring[1024];
@@ -164,11 +142,7 @@
         }
         else
         {	
-              va_list ap;
-              va_start(ap, secondary_format);
-              vsnprintf(alertstring2,1023,secondary_format, ap);
-              snprintf(alertstring,1024,"<big><b>%s</b></big><br><br>%s",primary,alertstring2);
-              va_end(ap);
+        	snprintf(alertstring,1024,"<big><b>%s</b></big><br><br>%s",primary,secondary_format);
         }
           QMessageBox::StandardButton reply;
           reply = QMessageBox::question(QuiMainWindows, QString::fromUtf8(QT_TR_NOOP("Confirmation")),
@@ -252,4 +226,24 @@
   beQuiet=1;
 }
 //****************************************************************************************************
+}
+
+static CoreToolkitDescriptor Qt4CoreToolkitDescriptor=
+{
+		&ADM_Qt4CoreUIToolkit::GUI_Info_HIG,
+		&ADM_Qt4CoreUIToolkit::GUI_Error_HIG,
+		&ADM_Qt4CoreUIToolkit::GUI_Confirmation_HIG,
+		&ADM_Qt4CoreUIToolkit::GUI_YesNo,
+		&ADM_Qt4CoreUIToolkit::GUI_Question,
+		&ADM_Qt4CoreUIToolkit::GUI_Alternate,
+		&ADM_Qt4CoreUIToolkit::GUI_Verbose,
+		&ADM_Qt4CoreUIToolkit::GUI_Quiet,
+		&ADM_Qt4CoreUIToolkit::GUI_isQuiet
+};
+
+void InitCoreToolkit(void )
+{
+	DIA_toolkitInit(&Qt4CoreToolkitDescriptor);
+	
+}
 //EOF

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_bar.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_bar.cpp	2008-04-10 23:44:37 UTC (rev 3975)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_bar.cpp	2008-04-11 17:37:22 UTC (rev 3976)
@@ -34,8 +34,20 @@
 
 extern const char *shortkey(const char *);
 
+namespace ADM_Qt4Factory
+{
+class diaElemBar : public diaElem
+{
+  protected :
+        uint32_t per;
+public:
+  
+  diaElemBar(uint32_t percent,const char *toggleTitle);
+  virtual ~diaElemBar() ;
+  void setMe(void *dialog, void *opaque,uint32_t line);
+  void getMe(void);
+};
 
-
 //********************************************************************
 diaElemBar::diaElemBar(uint32_t percent,const char *toggleTitle)
   : diaElem(ELEM_BAR)
@@ -68,5 +80,16 @@
 void diaElemBar::getMe(void)
 {
 }
+} // nameapsce
 
+diaElem  *qt4CreateBar(uint32_t percent,const char *toggleTitle)
+{
+	return new  ADM_Qt4Factory::diaElemBar(percent,toggleTitle);
+}
+void qt4DestroyBar(diaElem *e)
+{
+	ADM_Qt4Factory::diaElemBar *a=(ADM_Qt4Factory::diaElemBar *)e;
+	delete a;
+}
+//
 //EOF

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_float.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_float.cpp	2008-04-10 23:44:37 UTC (rev 3975)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_float.cpp	2008-04-11 17:37:22 UTC (rev 3976)
@@ -32,7 +32,24 @@
 
 extern const char *shortkey(const char *);
 
+namespace ADM_qt4Factory
+{
 
+
+class diaElemFloat : public diaElem
+{
+
+public:
+  ELEM_TYPE_FLOAT min,max;
+  diaElemFloat(ELEM_TYPE_FLOAT *intValue,const char *toggleTitle, ELEM_TYPE_FLOAT min, 
+               ELEM_TYPE_FLOAT max,const char *tip=NULL);
+  virtual ~diaElemFloat() ;
+  void setMe(void *dialog, void *opaque,uint32_t line);
+  void getMe(void);
+  void      enable(uint32_t onoff) ;
+};
+
+
 //********************************************************************
 diaElemFloat::diaElemFloat(ELEM_TYPE_FLOAT *intValue,const char *toggleTitle, ELEM_TYPE_FLOAT min, ELEM_TYPE_FLOAT max,const char *tip)
   : diaElem(ELEM_TOGGLE)
@@ -86,3 +103,16 @@
   else
     box->setDisabled(1);
 }
+} // End of namespace
+//****************************Hoook*****************
+
+diaElem  *qt4CreateFloat(ELEM_TYPE_FLOAT *intValue,const char *toggleTitle, ELEM_TYPE_FLOAT min,
+        ELEM_TYPE_FLOAT max,const char *tip)
+{
+	return new  ADM_qt4Factory::diaElemFloat(intValue,toggleTitle,min,max,tip);
+}
+void qt4DestroyFloat(diaElem *e)
+{
+	ADM_qt4Factory::diaElemFloat *a=(ADM_qt4Factory::diaElemFloat *)e;
+	delete a;
+}

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_frame.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_frame.cpp	2008-04-10 23:44:37 UTC (rev 3975)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_frame.cpp	2008-04-11 17:37:22 UTC (rev 3976)
@@ -33,6 +33,23 @@
 
 extern const char *shortkey(const char *);
 
+
+namespace ADM_qt4Factory
+{
+class diaElemFrame : public diaElemFrameBase
+{
+  
+public:
+  
+  diaElemFrame(const char *toggleTitle, const char *tip=NULL);
+  virtual ~diaElemFrame() ;
+  void setMe(void *dialog, void *opaque,uint32_t line);
+  void getMe(void) ;
+  void swallow(diaElem *widget);
+  void enable(uint32_t onoff);
+  void finalize(void);
+};
+
 diaElemFrame::diaElemFrame(const char *toggleTitle, const char *tip)
   : diaElemFrameBase()
 {
@@ -99,7 +116,16 @@
 {
   
 }
+} // End of namespace
+//****************************Hoook*****************
 
-//******************************************************
-
+diaElem  *qt4CreateFrame(const char *toggleTitle, const char *tip)
+{
+	return new  ADM_qt4Factory::diaElemFrame(toggleTitle,tip);
+}
+void qt4DestroyFrame(diaElem *e)
+{
+	ADM_qt4Factory::diaElemFrame *a=(ADM_qt4Factory::diaElemFrame *)e;
+	delete a;
+}
 //EOF

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_hex.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_hex.cpp	2008-04-10 23:44:37 UTC (rev 3975)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_hex.cpp	2008-04-11 17:37:22 UTC (rev 3976)
@@ -29,7 +29,21 @@
 #include "ADM_default.h"
 #include "DIA_factory.h"
 #include "ADM_assert.h"
-
+namespace ADM_qt4Factory
+{
+class diaElemHex : public diaElem
+{
+  uint32_t dataSize;
+  uint8_t  *data;
+  
+public:
+  
+  diaElemHex(const char *toggleTitle, uint32_t dataSize,uint8_t *data);
+  virtual ~diaElemHex() ;
+  void setMe(void *dialog, void *opaque,uint32_t line);
+  void getMe(void) ;
+  void finalize(void);
+};
 extern const char *shortkey(const char *);
   diaElemHex::diaElemHex(const char *toggleTitle, uint32_t dataSize,uint8_t *data) :diaElem(ELEM_HEXDUMP){};
   diaElemHex::~diaElemHex() {};
@@ -37,5 +51,19 @@
   void diaElemHex::getMe(void) {} ;
   void diaElemHex::finalize(void) {};
 //******************************************************
+} // End of namespace
+//****************************Hoook*****************
 
+diaElem  *qt4CreateHex(const char *toggleTitle, uint32_t dataSize,uint8_t *data)
+{
+	return new  ADM_qt4Factory::diaElemHex(toggleTitle,dataSize,data);
+}
+void qt4DestroyHex(diaElem *e)
+{
+	ADM_qt4Factory::diaElemHex *a=(ADM_qt4Factory::diaElemHex *)e;
+	delete a;
+}
 //EOF
+
+
+//EOF

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_integer.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_integer.cpp	2008-04-10 23:44:37 UTC (rev 3975)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_integer.cpp	2008-04-11 17:37:22 UTC (rev 3976)
@@ -35,7 +35,33 @@
 extern const char *shortkey(const char *);
 
 
+namespace ADM_qt4Factory
+{
+class diaElemInteger : public diaElem
+{
 
+public:
+  int32_t min,max;
+  diaElemInteger(int32_t *intValue,const char *toggleTitle, int32_t min, int32_t max,const char *tip=NULL);
+  virtual ~diaElemInteger() ;
+  void setMe(void *dialog, void *opaque,uint32_t line);
+  void getMe(void);
+  void      enable(uint32_t onoff) ;
+};
+/* Same but unsigned */
+class diaElemUInteger : public diaElem
+{
+
+public:
+  uint32_t min,max;
+  diaElemUInteger(uint32_t *intValue,const char *toggleTitle, uint32_t min, uint32_t max,const char *tip=NULL);
+  virtual ~diaElemUInteger() ;
+  void setMe(void *dialog, void *opaque,uint32_t line);
+  void getMe(void);
+  void      enable(uint32_t onoff) ;
+  
+};
+
 //********************************************************************
 diaElemInteger::diaElemInteger(int32_t *intValue,const char *toggleTitle, int32_t min, int32_t max,const char *tip)
   : diaElem(ELEM_TOGGLE)
@@ -144,6 +170,27 @@
     box->setDisabled(1);
 }
 //********************************************
+//****************************************************
+} // End of namespace
+//****************************Hoook*****************
 
+diaElem  *qt4CreateInteger(int32_t *intValue,const char *toggleTitle,int32_t min, int32_t max,const char *tip)
+{
+	return new  ADM_qt4Factory::diaElemInteger(intValue,toggleTitle,min,max,tip);
+}
+void qt4DestroyInteger(diaElem *e)
+{
+	ADM_qt4Factory::diaElemInteger *a=(ADM_qt4Factory::diaElemInteger *)e;
+	delete a;
+}
+diaElem  *qt4CreateUInteger(uint32_t *intValue,const char *toggleTitle,uint32_t min, uint32_t max,const char *tip)
+{
+	return new  ADM_qt4Factory::diaElemUInteger(intValue,toggleTitle,min,max,tip);
+}
+void qt4DestroyUInteger(diaElem *e)
+{
+	ADM_qt4Factory::diaElemUInteger *a=(ADM_qt4Factory::diaElemUInteger *)e;
+	delete a;
+}
 //EOF
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_matrix.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_matrix.cpp	2008-04-10 23:44:37 UTC (rev 3975)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_matrix.cpp	2008-04-11 17:37:22 UTC (rev 3976)
@@ -32,9 +32,22 @@
 
 extern const char *shortkey(const char *);
 
+namespace ADM_qt4Factory
+{
+class diaElemMatrix : public diaElem
+{
+  protected:
+  public:
+    uint8_t *_matrix;
+    uint32_t _matrixSize;
+    		diaElemMatrix(uint8_t *trix,const char *toggleTitle, uint32_t trixSize,const char *tip=NULL);
+  virtual   ~diaElemMatrix() ;
+  void      setMe(void *dialog, void *opaque,uint32_t line);
+  void      getMe(void);
+  void      enable(uint32_t onoff) ;
+};
 
 
-
 diaElemMatrix::diaElemMatrix(uint8_t *trix,const char *toggleTitle, uint32_t trixSize,const char *tip)
   : diaElem(ELEM_MATRIX)
 {
@@ -114,4 +127,15 @@
 				  
 			  }
 }
+}
+//****************************Hoook*****************
 
+diaElem  *qt4CreateMatrix(uint8_t *trix,const char *toggleTitle, uint32_t trixSize,const char *tip)
+{
+	return new  ADM_qt4Factory::diaElemMatrix(trix,toggleTitle,trixSize,tip);
+}
+void qt4DestroyMatrix(diaElem *e)
+{
+	ADM_qt4Factory::diaElemMatrix *a=(ADM_qt4Factory::diaElemMatrix *)e;
+	delete a;
+}

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_notch.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_notch.cpp	2008-04-10 23:44:37 UTC (rev 3975)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_notch.cpp	2008-04-11 17:37:22 UTC (rev 3976)
@@ -32,6 +32,20 @@
 
 extern const char *shortkey(const char *);
 
+namespace ADM_qt4Factory
+{
+
+
+class diaElemNotch : public diaElem
+{
+  uint32_t yesno;
+public:
+  
+  diaElemNotch(uint32_t yes,const char *toggleTitle, const char *tip=NULL);
+  virtual ~diaElemNotch() ;
+  void setMe(void *dialog, void *opaque,uint32_t line);
+  void getMe(void) {};
+};
 diaElemNotch::diaElemNotch(uint32_t yes,const char *toggleTitle, const char *tip)
   : diaElem(ELEM_NOTCH)
 {
@@ -57,5 +71,19 @@
  layout->addWidget(box,line,0);
 }
 //******************************************************
+//****************************************************
+} // End of namespace
+//****************************Hoook*****************
 
+diaElem  *qt4CreateNotch(uint32_t yes,const char *toggleTitle, const char *tip)
+{
+	return new  ADM_qt4Factory::diaElemNotch(yes,toggleTitle, tip);
+}
+void qt4DestroyNotch(diaElem *e)
+{
+	ADM_qt4Factory::diaElemNotch *a=(ADM_qt4Factory::diaElemNotch *)e;
+	delete a;
+}
 //EOF
+
+//EOF

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_readOnlyText.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_readOnlyText.cpp	2008-04-10 23:44:37 UTC (rev 3975)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_readOnlyText.cpp	2008-04-11 17:37:22 UTC (rev 3976)
@@ -34,8 +34,33 @@
 
 extern const char *shortkey(const char *);
 
+namespace ADM_qt4Factory
+{
 
+class diaElemReadOnlyText : public diaElem
+{
 
+public:
+  
+  diaElemReadOnlyText(const char *readyOnly,const char *toggleTitle,const char *tip=NULL);
+  virtual ~diaElemReadOnlyText() ;
+  void setMe(void *dialog, void *opaque,uint32_t line);
+  void getMe(void);
+  
+};
+
+class diaElemText : public diaElem
+{
+
+public:
+  
+  diaElemText(char **text,const char *toggleTitle,const char *tip=NULL);
+  virtual ~diaElemText() ;
+  void setMe(void *dialog, void *opaque,uint32_t line);
+  void getMe(void);
+  void enable(uint32_t onoff);
+};
+
 //********************************************************************
 diaElemReadOnlyText::diaElemReadOnlyText(const char *readyOnly,const char *toggleTitle,const char *tip)
   : diaElem(ELEM_TOGGLE)
@@ -119,5 +144,28 @@
   else
     lineEdit->setDisabled(TRUE);
 }
+} // End of namespace
+//****************************Hoook*****************
 
+diaElem  *qt4CreateRoText(const char *text,const char *toggleTitle, const char *tip)
+{
+	return new  ADM_qt4Factory::diaElemReadOnlyText(text,toggleTitle,tip);
+}
+void qt4DestroyRoText(diaElem *e)
+{
+	ADM_qt4Factory::diaElemReadOnlyText *a=(ADM_qt4Factory::diaElemReadOnlyText *)e;
+	delete a;
+}
+
+diaElem  *qt4CreateText(char **text,const char *toggleTitle, const char *tip)
+{
+	return new  ADM_qt4Factory::diaElemText(text,toggleTitle,tip);
+}
+void qt4DestroyText(diaElem *e)
+{
+	ADM_qt4Factory::diaElemText *a=(ADM_qt4Factory::diaElemText *)e;
+	delete a;
+}
 //EOF
+
+//EOF

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_bitrate.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_bitrate.cpp	2008-04-10 23:44:37 UTC (rev 3975)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_bitrate.cpp	2008-04-11 17:37:22 UTC (rev 3976)
@@ -34,6 +34,22 @@
 
 extern const char *shortkey(const char *);
 
+namespace ADM_Qt4Factory
+{
+class diaElemBitrate : public diaElemBitrateBase
+{
+protected:
+public:
+  
+  diaElemBitrate(COMPRES_PARAMS *p,const char *toggleTitle,const char *tip=NULL);
+  virtual ~diaElemBitrate() ;
+  void setMe(void *dialog, void *opaque,uint32_t line);
+  void getMe(void);
+  void setMaxQz(uint32_t qz);
+  
+  void updateMe(void);
+};
+
 class  ADM_Qbitrate : public QWidget
 {
      Q_OBJECT
@@ -241,5 +257,17 @@
   memcpy(param,&copy,sizeof(copy));
 }
 
+} // End of namespace
+//****************************Hoook*****************
+
+diaElem  *qt4CreateBitrate(COMPRES_PARAMS *p,const char *toggleTitle,const char *tip)
+{
+	return new  ADM_Qt4Factory::diaElemBitrate(p,toggleTitle,tip);
+}
+void qt4DestroyBitrate(diaElem *e)
+{
+	ADM_Qt4Factory::diaElemBitrate *a=(ADM_Qt4Factory::diaElemBitrate *)e;
+	delete a;
+}
 //EOF
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_button.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_button.cpp	2008-04-10 23:44:37 UTC (rev 3975)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_button.cpp	2008-04-11 17:37:22 UTC (rev 3976)
@@ -33,7 +33,22 @@
 #include "ADM_assert.h"
 
 extern const char *shortkey(const char *);
+namespace ADM_Qt4Factory
+{
+class diaElemButton : public diaElem
+{
+  protected:
+  public:
+    void            *_cookie;
+    ADM_FAC_CALLBACK *_callBack;
+            diaElemButton(const char *toggleTitle, ADM_FAC_CALLBACK *cb,void *cookie,const char *tip=NULL);
+  virtual   ~diaElemButton() ;
+  void      setMe(void *dialog, void *opaque,uint32_t line);
+  void      getMe(void);
+  void      enable(uint32_t onoff) ;
+};
 
+
 class  ADM_Qbutton : public QWidget
 {
      Q_OBJECT
@@ -69,7 +84,7 @@
 ADM_Qbutton::~ADM_Qbutton()
 {
 }
-
+//*****************************
 diaElemButton:: diaElemButton(const char *toggleTitle, ADM_FAC_CALLBACK *cb,void *cookie,const char *tip)
   : diaElem(ELEM_BUTTON)
 {
@@ -105,5 +120,19 @@
 {
 
 }
+
+}; // End of namespace
+//****************************Hoook*****************
+
+diaElem  *qt4CreateButton(const char *toggleTitle, ADM_FAC_CALLBACK *cb,void *cookie,const char *tip)
+{
+	return new  ADM_Qt4Factory::diaElemButton(toggleTitle,cb,cookie,tip);
+}
+void qt4DestroyButton(diaElem *e)
+{
+	ADM_Qt4Factory::diaElemButton *a=(ADM_Qt4Factory::diaElemButton *)e;
+	delete a;
+}
+//
 //EOF
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_dialogFactory.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_dialogFactory.cpp	2008-04-10 23:44:37 UTC (rev 3975)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_dialogFactory.cpp	2008-04-11 17:37:22 UTC (rev 3976)
@@ -30,6 +30,9 @@
 
 #include "ADM_default.h"
 #include "DIA_factory.h"
+#include "DIA_coreToolkit.h"
+#include "DIA_coreUI_internal.h"
+
 #include "ADM_assert.h"
 
 class factoryWindow : public QDialog
@@ -52,12 +55,12 @@
 
 
 /**
-    \fn diaFactoryRun(const char *title,uint32_t nb,diaElem **elems)
+    \fn qt4DiaFactoryRun(const char *title,uint32_t nb,diaElem **elems)
     \brief  Run a dialog made of nb elems, each elem being described in the **elems
     @return 0 on failure, 1 on success
 */
 
-uint8_t diaFactoryRun(const char *title,uint32_t nb,diaElem **elems)
+uint8_t qt4DiaFactoryRun(const char *title,uint32_t nb,diaElem **elems)
 {
   factoryWindow dialog;
   
@@ -125,7 +128,10 @@
  }
   return t;
 }
-uint8_t diaFactoryRunTabs(const char *title,uint32_t nb,diaElemTabs **tabs)
+/**
+ * 	\fn qt4DiaFactoryRunTabs
+ */
+uint8_t qt4DiaFactoryRunTabs(const char *title,uint32_t nb,diaElemTabs **tabs)
 {
     factoryWindow dialog;
   
@@ -208,12 +214,146 @@
 
   layout->addItem(spacerItem, v, 0);
 }
+
 /**
  * 
  */
+/**
+ *  \fn gtkFactoryGetVersion
+ * 	\brief returns the version this has been compiled with
+ */
+void      qt4FactoryGetVersion(uint32_t *maj,uint32_t *minor,uint32_t *patch)
+{
+	*maj=ADM_COREUI_MAJOR;
+	*minor=ADM_COREUI_MINOR;
+	*patch=ADM_COREUI_PATCH;
+	
+}
+extern CREATE_BITRATE_T     qt4CreateBitrate;
+extern DELETE_DIA_ELEM_T    qt4DestroyBitrate;
+extern CREATE_BAR_T         qt4CreateBar;
+extern DELETE_DIA_ELEM_T    qt4DestroyBar;
+extern CREATE_FLOAT_T       qt4CreateFloat;
+extern DELETE_DIA_ELEM_T    qt4DestroyFloat;
+extern CREATE_FRAME_T		qt4CreateFrame;
+extern DELETE_DIA_ELEM_T    qt4DestroyFrame;
+extern CREATE_HEX_T         qt4CreateHex;
+extern DELETE_DIA_ELEM_T    qt4DestroyHex;
+extern CREATE_INTEGER_T     qt4CreateInteger;
+extern CREATE_UINTEGER_T    qt4CreateUInteger;
+extern DELETE_DIA_ELEM_T    qt4DestroyInteger;
+extern DELETE_DIA_ELEM_T    qt4DestroyUInteger;
+extern CREATE_MATRIX_T      qt4CreateMatrix;
+extern DELETE_DIA_ELEM_T    qt4DestroyMatrix;
+extern CREATE_NOTCH_T       qt4CreateNotch;
+extern DELETE_DIA_ELEM_T    qt4DestroyNotch;
+extern CREATE_READONLYTEXT_T qt4CreateRoText;
+extern CREATE_TEXT_T 	   qt4CreateText;
+extern DELETE_DIA_ELEM_T   qt4DestroyRoText;
+extern DELETE_DIA_ELEM_T   qt4DestroyText;
+extern CREATE_BUTTON_T     qt4CreateButton;
+extern DELETE_DIA_ELEM_T   qt4DestroyButton;
+extern CREATE_FILE_T       qt4CreateFile;
+extern DELETE_DIA_ELEM_T   qt4DestroyFile;
+extern CREATE_DIR_T        qt4CreateDir;
+extern DELETE_DIA_ELEM_T   qt4DestroyDir;
+extern CREATE_MENUDYNAMIC_T     qt4CreateMenuDynamic;
+extern CREATE_MENU_T       qt4CreateMenu;
+extern DELETE_DIA_ELEM_T   qt4DestroyMenu;
+extern DELETE_DIA_ELEM_T   qt4DestroyMenuDynamic;
+extern CREATE_USLIDER_T     qt4CreateUSlider;
+extern DELETE_DIA_ELEM_T    qt4DestroyUSlider;
+extern 	CREATE_SLIDER_T     qt4CreateSlider;
+extern 	DELETE_DIA_ELEM_T   qt4DestroySlider;
+extern CREATE_THREADCOUNT_T qt4CreateThreadCount;
+extern DELETE_DIA_ELEM_T    qt4DestroyThreadCount;
+extern CREATE_TOGGLE_UINT   qt4CreateToggleUint;
+extern DELETE_DIA_ELEM_T    qt4DestroyToggleUint;
+extern CREATE_TOGGLE_INT    qt4CreateToggleInt;
+extern DELETE_DIA_ELEM_T    qt4DestroyToggleInt;
+extern CREATE_TOGGLE_T      qt4CreateToggle;
+extern DELETE_DIA_ELEM_T    qt4DestroyToggle;
+
+//************
+static FactoryDescriptor Qt4FactoryDescriptor=
+{
+	&qt4FactoryGetVersion,
+	&qt4DiaFactoryRun,
+	&qt4DiaFactoryRunTabs,
+	// Buttons
+	&qt4CreateButton,
+	&qt4DestroyButton,
+	// Bar
+	&qt4CreateBar,
+	&qt4DestroyBar,
+	// Float
+	&qt4CreateFloat,
+	&qt4DestroyFloat,
+	// Integer
+	&qt4CreateInteger,
+	&qt4DestroyInteger,
+	// UInteger
+	&qt4CreateUInteger,
+	&qt4DestroyUInteger,
+	// Notch
+	&qt4CreateNotch,
+	&qt4DestroyNotch,
+	// RoText
+	&qt4CreateRoText,
+	&qt4DestroyRoText,
+	// Text
+	&qt4CreateText,
+	&qt4DestroyText,
+	// Hex
+	&qt4CreateHex,
+	&qt4DestroyHex,
+	// Matrix
+	&qt4CreateMatrix,
+	&qt4DestroyMatrix,
+	// Menu
+	&qt4CreateMenu,
+	&qt4DestroyMenu,
+	&qt4CreateMenuDynamic,
+	&qt4DestroyMenuDynamic,
+	// ThreadCount
+	&qt4CreateThreadCount,
+	&qt4DestroyThreadCount,
+	// Bitrate
+	&qt4CreateBitrate,
+	&qt4DestroyBitrate,
+	// File
+	&qt4CreateFile,
+	&qt4DestroyFile,
+	// Dir
+	&qt4CreateDir,
+	&qt4DestroyDir,
+	// Frame
+	&qt4CreateFrame,
+	&qt4DestroyFrame,
+    // Toggle uint/int
+	&qt4CreateToggleUint,
+	&qt4DestroyToggleUint,
+	&qt4CreateToggleInt,
+	&qt4DestroyToggleInt,
+	// Regular toggle
+	&qt4CreateToggle,
+	&qt4DestroyToggle,
+	// Slider
+	&qt4CreateUSlider,
+	&qt4DestroyUSlider,
+	&qt4CreateSlider,
+	&qt4DestroySlider
+};
+
+/**
+ * 	\fn InitFactory
+ *  \brief Install our factory hooks
+ */
 void InitFactory(void)
 {
+	DIA_factoryInit(&Qt4FactoryDescriptor);
 	
+	
 }
 
 //EOF

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_filesel.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_filesel.cpp	2008-04-10 23:44:37 UTC (rev 3975)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_filesel.cpp	2008-04-11 17:37:22 UTC (rev 3976)
@@ -44,6 +44,39 @@
     ADM_FILEMODE_WRITE
 }ADM_fileMode;
 
+namespace ADM_Qt4Factory
+{
+class diaElemFile : public diaElemFileBase
+{
+
+protected:
+    
+public:
+  
+  diaElemFile(uint32_t writeMode,char **filename,const char *toggleTitle,
+              const char *defaultSuffix = 0,const char *tip=NULL);
+  virtual ~diaElemFile() ;
+  void setMe(void *dialog, void *opaque,uint32_t line);
+  void getMe(void);
+  
+  void   changeFile(void);
+  void   enable(uint32_t onoff);
+};
+class diaElemDirSelect : public diaElemDirSelectBase
+{
+
+public:
+  
+  diaElemDirSelect(char **filename,const char *toggleTitle,const char *tip=NULL);
+  virtual ~diaElemDirSelect() ;
+  void setMe(void *dialog, void *opaque,uint32_t line);
+  void getMe(void);
+  
+  void changeFile(void);
+  void   enable(uint32_t onoff);
+};
+
+
 class  ADM_Qfilesel : public QWidget
 {
      Q_OBJECT
@@ -187,7 +220,7 @@
   ADM_Qfilesel *fs=(ADM_Qfilesel *)myWidget;
   fs->setEnabled(onoff);
 }
-
+void diaElemFile::changeFile(void) {}
 //****************************
 diaElemDirSelect::diaElemDirSelect(char **filename,const char *toggleTitle,const char *selectDirDesc) :
 	diaElemDirSelectBase()
@@ -228,5 +261,29 @@
 void diaElemDirSelect::enable(uint32_t onoff) {}
   
 void diaElemDirSelect::changeFile(void) {}
+} // End of namespace
+//****************************Hoook*****************
 
+diaElem  *qt4CreateFile(uint32_t writeMode,char **filename,const char *toggleTitle,
+        const char *defaultSuffix ,const char *tip)
+{
+	return new  ADM_Qt4Factory::diaElemFile(writeMode,filename,toggleTitle,defaultSuffix ,tip);
+}
+void qt4DestroyFile(diaElem *e)
+{
+	ADM_Qt4Factory::diaElemFile *a=(ADM_Qt4Factory::diaElemFile *)e;
+	delete a;
+}
+
+diaElem  *qt4CreateDir(char **filename,const char *toggleTitle,const char *tip)
+{
+	return new  ADM_Qt4Factory::diaElemDirSelect(filename,toggleTitle,tip);
+}
+void qt4DestroyDir(diaElem *e)
+{
+	ADM_Qt4Factory::diaElemDirSelect *a=(ADM_Qt4Factory::diaElemDirSelect *)e;
+	delete a;
+}
 //EOF
+
+//EOF

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_menu.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_menu.cpp	2008-04-10 23:44:37 UTC (rev 3975)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_menu.cpp	2008-04-11 17:37:22 UTC (rev 3976)
@@ -34,6 +34,47 @@
 
 
 extern const char *shortkey(const char *);
+
+namespace ADM_qt4Factory
+{
+class diaElemMenuDynamic : public diaElemMenuDynamicBase
+{
+protected:
+	
+
+public:
+  diaElemMenuDynamic(uint32_t *intValue,const char *itle, uint32_t nb, 
+               diaMenuEntryDynamic **menu,const char *tip=NULL);
+  
+  virtual   ~diaElemMenuDynamic() ;
+  void      setMe(void *dialog, void *opaque,uint32_t line);
+  void      getMe(void);
+  virtual uint8_t   link(diaMenuEntryDynamic *entry,uint32_t onoff,diaElem *w);
+  virtual void      updateMe(void);
+  virtual void      enable(uint32_t onoff) ;
+  virtual void      finalize(void);
+};
+//**********************
+class diaElemMenu : public diaElemMenuBase
+{
+protected:
+	
+
+	diaElemMenuDynamic  *dyna;
+	diaMenuEntryDynamic  **menus;	
+public:
+  diaElemMenu(uint32_t *intValue,const char *itle, uint32_t nb, 
+               const diaMenuEntry *menu,const char *tip=NULL);
+  
+  virtual ~diaElemMenu() ;
+  void setMe(void *dialog, void *opaque,uint32_t line);
+  void getMe(void);
+  virtual uint8_t   link(diaMenuEntry *entry,uint32_t onoff,diaElem *w);
+  virtual void      updateMe(void);
+  void      enable(uint32_t onoff) ;
+  void      finalize(void);;
+};
+
 /**/
 
   class ADM_QComboBox : public QComboBox
@@ -241,4 +282,29 @@
 {
   finalize();
 }
+//********************
+}; // End of namespace
+
+diaElem  *qt4CreateMenu(uint32_t *intValue,const char *itle, uint32_t nb,         const diaMenuEntry *menu,const char *tip)
+{
+	return new  ADM_qt4Factory::diaElemMenu(intValue,itle,nb,menu,tip);
+}
+void qt4DestroyMenu(diaElem *e)
+{
+	ADM_qt4Factory::diaElemMenu *a=(ADM_qt4Factory::diaElemMenu *)e;
+	delete a;
+}
+diaElem  *qt4CreateMenuDynamic(uint32_t *intValue,const char *itle, uint32_t nb, 
+        diaMenuEntryDynamic **menu,const char *tipp)
+{
+	return new  ADM_qt4Factory::diaElemMenuDynamic(intValue,itle,nb,menu,tipp);
+}
+void qt4DestroyMenuDynamic(diaElem *e)
+{
+	ADM_qt4Factory::diaElemMenuDynamic *a=(ADM_qt4Factory::diaElemMenuDynamic *)e;
+	delete a;
+}
+
 //EOF
+
+//EOF

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_slider.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_slider.cpp	2008-04-10 23:44:37 UTC (rev 3975)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_slider.cpp	2008-04-11 17:37:22 UTC (rev 3976)
@@ -36,6 +36,39 @@
 
 
 
+namespace ADM_qt4Factory
+{
+
+
+class diaElemUSlider : public diaElemSliderBase
+{
+  protected:
+	  uint32_t min,max,incr;
+public:
+	diaElemUSlider(uint32_t *value,const char *toggleTitle, uint32_t min,uint32_t max,uint32_t incr = 1, const char *tip=NULL);
+  virtual   ~diaElemUSlider() ;
+  void      setMe(void *dialog, void *opaque,uint32_t line);
+  void      getMe(void);
+  void      enable(uint32_t onoff) ;
+  
+};
+class diaElemSlider : public diaElemSliderBase
+{
+  protected:
+    
+	  int32_t min,max,incr;
+    
+public:
+	diaElemSlider(int32_t *value,const char *toggleTitle, int32_t min,int32_t max,int32_t incr = 1, const char *tip=NULL);
+  virtual   ~diaElemSlider() ;
+  void      setMe(void *dialog, void *opaque,uint32_t line);
+  void      getMe(void);
+  void      enable(uint32_t onoff) ;
+  
+  
+};
+
+
 //********************************************************************
 
 class SpinSlider : public QWidget
@@ -203,4 +236,31 @@
     box->setEnabled(1);
   else
     box->setDisabled(1);
-}
\ No newline at end of file
+}
+
+//****************************************************
+} // End of namespace
+//****************************Hoook*****************
+
+diaElem  *qt4CreateSlider(int32_t *value,const char *toggleTitle, int32_t min,int32_t max,int32_t incr , const char *tip)
+{
+	return new  ADM_qt4Factory::diaElemSlider(value,toggleTitle,min,max,incr,tip);
+}
+void qt4DestroySlider(diaElem *e)
+{
+	ADM_qt4Factory::diaElemSlider *a=(ADM_qt4Factory::diaElemSlider *)e;
+	delete a;
+}
+diaElem  *qt4CreateUSlider(uint32_t *value,const char *toggleTitle, uint32_t min,uint32_t max,uint32_t incr , const char *tip)
+{
+	return new  ADM_qt4Factory::diaElemUSlider(value,toggleTitle,min,max,incr,tip);
+}
+void qt4DestroyUSlider(diaElem *e)
+{
+	ADM_qt4Factory::diaElemUSlider *a=(ADM_qt4Factory::diaElemUSlider *)e;
+	delete a;
+}
+//****************************************************
+//EOF
+
+

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_threadCount.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_threadCount.cpp	2008-04-10 23:44:37 UTC (rev 3975)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_threadCount.cpp	2008-04-11 17:37:22 UTC (rev 3976)
@@ -26,6 +26,21 @@
 
 extern const char* shortkey(const char*);
 
+
+namespace ADM_qt4Factory
+{
+
+class diaElemThreadCount : public diaElem
+{
+
+public:
+  
+  diaElemThreadCount(uint32_t *value, const char *title, const char *tip = NULL);
+  virtual ~diaElemThreadCount() ;
+  void setMe(void *dialog, void *opaque, uint32_t line);
+  void getMe(void);
+};
+
 class ADM_QthreadCount : public QWidget
 {
 	Q_OBJECT
@@ -141,3 +156,16 @@
 	else
 		*val = (threadCount->spinBox)->value();
 }
+//**********************
+} // End of namesapce
+//**********************
+diaElem  *qt4CreateThreadCount(uint32_t *value, const char *title, const char *tip)
+{
+	return new  ADM_qt4Factory::diaElemThreadCount(value,title,tip);
+}
+void qt4DestroyThreadCount(diaElem *e)
+{
+	ADM_qt4Factory::diaElemThreadCount *a=(ADM_qt4Factory::diaElemThreadCount *)e;
+	delete a;
+}
+//EOF

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_toggle.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_toggle.cpp	2008-04-10 23:44:37 UTC (rev 3975)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_toggle.cpp	2008-04-11 17:37:22 UTC (rev 3976)
@@ -32,6 +32,61 @@
 #include "ADM_assert.h"
 
 extern const char *shortkey(const char *);
+
+
+namespace ADM_qt4Factory
+{
+class diaElemToggle : public diaElemToggleBase
+{
+  protected:
+public:
+            diaElemToggle(uint32_t *toggleValue,const char *toggleTitle, const char *tip=NULL);
+  virtual   ~diaElemToggle() ;
+  void      setMe(void *dialog, void *opaque,uint32_t line);
+  void      getMe(void);
+  void      enable(uint32_t onoff) ;
+  void      finalize(void);
+  void      updateMe();
+  uint8_t   link(uint32_t onoff,diaElem *w);
+};
+
+class diaElemToggleUint : public diaElem
+{
+  protected:
+        uint32_t *emb;
+        const char *embName;
+        void *widgetUint;
+        uint32_t _min,_max;
+public:
+            diaElemToggleUint(uint32_t *toggleValue,const char *toggleTitle, uint32_t *uintval,
+            					const char *name,uint32_t min,uint32_t max,const char *tip=NULL);
+  virtual   ~diaElemToggleUint() ;
+  void      setMe(void *dialog, void *opaque,uint32_t line);
+  void      getMe(void);
+  void      enable(uint32_t onoff) ;
+  void      finalize(void);
+  void      updateMe();
+};
+class diaElemToggleInt : public diaElem
+{
+  protected:
+	  		 int32_t *emb;
+	         const char *embName;
+	         void *widgetUint;
+	         int32_t _min,_max;
+public:
+            diaElemToggleInt(uint32_t *toggleValue,const char *toggleTitle, int32_t *uintval,
+            				const char *name,int32_t min,int32_t max,const char *tip=NULL);
+  virtual   ~diaElemToggleInt() ;
+  void      setMe(void *dialog, void *opaque,uint32_t line);
+  void      getMe(void);
+  void      finalize(void);
+  void      updateMe();
+  void      enable(uint32_t onoff) ;
+};
+
+
+
 typedef enum
 {
     TT_TOGGLE,TT_TOGGLE_UINT,TT_TOGGLE_INT
@@ -367,9 +422,42 @@
   }
 }
 
-//******************************************************
+} // End of namespace
+//****************************Hoook*****************
 
+diaElem  *qt4CreateToggleUint(uint32_t *toggleValue,const char *toggleTitle, uint32_t *uintval,
+		const char *name,uint32_t min,uint32_t max,const char *tip)
+{
+	return new  ADM_qt4Factory::diaElemToggleUint(toggleValue,toggleTitle, uintval,
+			name,min,max,tip);
+}
+void qt4DestroyToggleUint(diaElem *e)
+{
+	ADM_qt4Factory::diaElemToggleUint *a=(ADM_qt4Factory::diaElemToggleUint *)e;
+	delete a;
+}
 
+diaElem  *qt4CreateToggleInt(uint32_t *toggleValue,const char *toggleTitle, int32_t *uintval,
+		const char *name,int32_t min,int32_t max,const char *tip)
+{
+	return new  ADM_qt4Factory::diaElemToggleInt(toggleValue,toggleTitle, uintval,
+			name,min,max,tip);
+}
+void qt4DestroyToggleInt(diaElem *e)
+{
+	ADM_qt4Factory::diaElemToggleInt *a=(ADM_qt4Factory::diaElemToggleInt *)e;
+	delete a;
+}
+diaElem  *qt4CreateToggle(uint32_t *toggleValue,const char *toggleTitle, const char *tip)
+{
+	return new  ADM_qt4Factory::diaElemToggle(toggleValue,toggleTitle, tip);
+}
+void qt4DestroyToggle(diaElem *e)
+{
+	ADM_qt4Factory::diaElemToggle *a=(ADM_qt4Factory::diaElemToggle *)e;
+	delete a;
+}
 
 
+
 //EOF

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/file_qt4.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/file_qt4.cpp	2008-04-10 23:44:37 UTC (rev 3975)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/file_qt4.cpp	2008-04-11 17:37:22 UTC (rev 3976)
@@ -18,6 +18,7 @@
 
 
 #include "DIA_fileSel.h"
+#include "DIA_coreToolkit.h"
 #include "DIA_coreUI_internal.h"
 
 #include "prefs.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/main.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/main.cpp	2008-04-10 23:44:37 UTC (rev 3975)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/main.cpp	2008-04-11 17:37:22 UTC (rev 3976)
@@ -75,6 +75,7 @@
 extern void getUIDescription(char*);
 extern uint8_t ADM_ad_loadPlugins(const char *path);
 extern void InitFactory(void);
+extern void InitCoreToolkit(void);
 #ifdef __MINGW32__
 extern EXCEPTION_DISPOSITION exceptionHandler(struct _EXCEPTION_RECORD* pExceptionRec, void* pEstablisherFrame, struct _CONTEXT* pContextRecord, void* pDispatcherContext);
 #else
@@ -203,8 +204,13 @@
 #ifdef USE_XVID_4
     xvid4_init();
 #endif
+    // Hook our UI...
     InitFactory();
+    InitCoreToolkit();
     initFileSelector();
+    //****************
+    
+    
     ADM_InitMemcpy();
 
 	// Load .avidemuxrc



From mean at mail.berlios.de  Fri Apr 11 19:37:36 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 11 Apr 2008 19:37:36 +0200
Subject: [Avidemux-svn-commit] r3977 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include
Message-ID: <200804111737.m3BHbaZK030314@sheep.berlios.de>

Author: mean
Date: 2008-04-11 19:37:35 +0200 (Fri, 11 Apr 2008)
New Revision: 3977

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_coreToolkit.h
Log:
[Merge]


Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_coreToolkit.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_coreToolkit.h	2008-04-11 17:37:22 UTC (rev 3976)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_coreToolkit.h	2008-04-11 17:37:35 UTC (rev 3977)
@@ -18,9 +18,9 @@
 
 #ifndef ADM_COREUI_TOOLKIT__
 #define ADM_COREUI_TOOLKIT__
-<<<<<<< HEAD:avidemux/ADM_coreUI/include/DIA_coreToolkit.h
 
 
+
 typedef enum 
 {
         ADM_LOG_NONE=0,
@@ -30,11 +30,6 @@
   
 } ADM_LOG_LEVEL;
 
-=======
-// These two are obsoletes...
-void            GUI_Alert(const char *alertstring);
-void            GUI_Info(const char *alertstring);
->>>>>>> master:avidemux/ADM_coreUI/include/DIA_coreToolkit.h
 // Display a warning/info/debug message. The primary field is the "title" of the window, secondary format is printf like
 void            GUI_Info_HIG(const ADM_LOG_LEVEL level,const char *primary, const char *secondary_format, ...);
 // Display an error message. The primary field is the "title" of the window, secondary format is printf like



From gruntster at mail.berlios.de  Thu Apr 24 19:07:37 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Thu, 24 Apr 2008 19:07:37 +0200
Subject: [Avidemux-svn-commit] r3979 - in
	branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264:
	. qt4
Message-ID: <200804241707.m3OH7bJ6015684@sheep.berlios.de>

Author: gruntster
Date: 2008-04-24 19:07:32 +0200 (Thu, 24 Apr 2008)
New Revision: 3979

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/configGuiLoader.h
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/options.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp
Log:
[x264] fix compilation errors on Linux

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/CMakeLists.txt	2008-04-24 15:54:44 UTC (rev 3978)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/CMakeLists.txt	2008-04-24 17:07:32 UTC (rev 3979)
@@ -8,6 +8,9 @@
 	checkLibxml2()
 
 	IF (LIBXML2_FOUND)
+		INCLUDE_DIRECTORIES(${CMAKE_CURRENT_BINARY_DIR} ${X264_INCLUDE_DIR} ${LIBXML2_INCLUDE_DIR})
+		ADD_DEFINITIONS(${LIBXML2_DEFINITIONS})
+		
 		SET(QT_PLUGIN_NAME "ADM_vidEnc_x264_Qt")
 		SET(GTK_PLUGIN_NAME "ADM_vidEnc_x264_Gtk")
 		SET(PLUGIN_SUBDIR "x264")
@@ -16,7 +19,6 @@
 		CONFIGURE_FILE("${CMAKE_CURRENT_SOURCE_DIR}/config.h.cmake" "${CMAKE_CURRENT_BINARY_DIR}/config.h")
 
 		ADD_SUBDIRECTORY(qt4)
-		INCLUDE_DIRECTORIES(${CMAKE_CURRENT_BINARY_DIR} ${X264_INCLUDE_DIR} ${LIBXML2_INCLUDE_DIR} ${LIBXML2_DEFINITIONS})
 		ADD_LIBRARY(ADM_vidEnc_x264 SHARED ${ADM_vidEnc_x264_SRCS})
 		TARGET_LINK_LIBRARIES(ADM_vidEnc_x264 ADM_core ${X264_LIBRARY_DIR} ${LIBXML2_LIBRARIES})
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/configGuiLoader.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/configGuiLoader.h	2008-04-24 15:54:44 UTC (rev 3978)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/configGuiLoader.h	2008-04-24 17:07:32 UTC (rev 3979)
@@ -1,7 +1,7 @@
 #ifndef configGuiLoader_h
 #define configGuiLoader_h
 
-#include "ADM_dynamicloading.h"
+#include "ADM_dynamicLoading.h"
 #include "options.h"
 
 extern "C"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/options.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/options.cpp	2008-04-24 15:54:44 UTC (rev 3978)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/options.cpp	2008-04-24 17:07:32 UTC (rev 3979)
@@ -748,7 +748,7 @@
 
 unsigned int x264Options::getVbrQuantiser(void)
 {
-	return _param.rc.f_rf_constant;
+	return (unsigned int)_param.rc.f_rf_constant;
 }
 
 void x264Options::setVbrQuantiser(unsigned vbrQuantiser)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp	2008-04-24 15:54:44 UTC (rev 3978)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp	2008-04-24 17:07:32 UTC (rev 3979)
@@ -601,4 +601,4 @@
 
 		return 0;
 	}
-}
\ No newline at end of file
+}



From mean at mail.berlios.de  Thu Apr 24 19:36:40 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 24 Apr 2008 19:36:40 +0200
Subject: [Avidemux-svn-commit] r3980 - in
	branches/avidemux_2.5_branch_gruntster/avidemux: . ADM_codecs
	ADM_coreImage ADM_coreImage/include ADM_coreImage/src
	ADM_coreUI/include ADM_editor ADM_encoder ADM_filter
	ADM_libraries/ADM_ffmpeg/ADM_lavcodec ADM_libraries/ADM_mplex
	ADM_libraries/ADM_utilities ADM_ocr ADM_outputs/oplug_avi
	ADM_outputs/oplug_dummy ADM_outputs/oplug_flv
	ADM_outputs/oplug_mp4 ADM_outputs/oplug_mpeg
	ADM_outputs/oplug_mpegFF ADM_outputs/oplug_ogm ADM_script
	ADM_userInterfaces/ADM_GTK/ADM_dialog
	ADM_userInterfaces/ADM_GTK/ADM_filters
	ADM_userInterfaces/ADM_GTK/ADM_ocr
	ADM_userInterfaces/ADM_NONE/ADM_dialog
	ADM_userInterfaces/ADM_NONE/ADM_gui2
	ADM_userInterfaces/ADM_QT4/ADM_dialog
	ADM_userInterfaces/ADM_QT4/ADM_filters
	ADM_userInterfaces/ADM_QT4/ADM_ocr
	ADM_userInterfaces/ADM_commonUI ADM_video ADM_videoFilter
Message-ID: <200804241736.m3OHaeWU029507@sheep.berlios.de>

Author: mean
Date: 2008-04-24 19:36:16 +0200 (Thu, 24 Apr 2008)
New Revision: 3980

Added:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/include/
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/include/ADM_confCouple.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/include/ADM_image.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/include/ADM_videoFilter.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/include/ADM_videoFilterCache.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/include/ADM_videoFilter_iface.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/include/ADM_videoFilter_internal.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/ADM_confCouple.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/ADM_image.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/ADM_imageResizer.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/ADM_imageUtils.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/ADM_videoFilter.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/ADM_videoFilterCache.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/CMakeLists.txt
Removed:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/video_filters.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_image.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_image.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_imageResizer.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_imageUtils.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_cache.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_cache.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_confCouple.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_confCouples.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_genvideo.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_genvideo.hxx
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidCached.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidCached.h
Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_ffmpeg.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_coreToolkit.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edFrameType.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edIdentify.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edLoadSave.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edRender.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edit.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_externalEncoder.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encCopy.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encRequant.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encXvid4.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encffmpeg.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encffmpeg1.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encmjpeg.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encmpeg2enc.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encoder.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encoder.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encx264.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encyv12.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/ADM_vidDummyFilter.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter_declaration.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter_dylib.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter_saveload.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/vidVCD.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/avcodec.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mthread.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_ocr/ADM_bitmapSource.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_ocr/ADM_ocr.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_ocr/ADM_ocrEngine.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisave.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_pack.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_unpack.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavedual.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_savesmart.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_ogm/op_ogaudio.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_ogm/op_ogsave.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_ogm/op_ogsavecopy.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_preview.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSAvidemuxAudio.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSAvidemuxVideo.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSFunctions.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/adm_scanner.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_asharp.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_chromaShift.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_contrast.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_crop.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eq2.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_equalizer.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eraser.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_flyDialog.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_hue.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_mpdelogo.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_partial.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_preview.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_srt.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vcodec.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_ocr.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_flyDialog.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_none.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_gui2/preview_none.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_none.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_asharp.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_chromashift.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_contrast.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_crop.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_eq2.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_hue.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_srt.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_vobsub.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_flyDialog.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_index_pg.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/Q_mainfilter.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_ocr/Q_ocr.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyAsharp.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyChromaShift.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyContrast.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyCrop.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyDialog.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyEq2.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyEraser.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyHue.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyParticle.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flySrtPos.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flySwissArmyKnife.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyThreshold.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_interlaced.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidCNR2.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidClean.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidColorYuv.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidColorYuv.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidEqualizer.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidFieldUnblend.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidFieldUtil.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidMPdelogo.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidNull.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidPartial.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidRaw.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_guiResize.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_resizebis.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_resizeter.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidASS.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidAddBorder.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidAnimated.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidAnimated.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidAsharp.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidBSmear.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidBlend.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidBlendRemoval.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidChroma.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidChromaShift.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidComputeAverage.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidContrast.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidCrop.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDGbob.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDecDec.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDecTelecide.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDeintASM.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDeinterlace.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDelta.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDenoise.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDropOut.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDropOut.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDvbSub.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidEq2.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidEraser.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidEraser.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFade.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFastConvolution.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFields.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFlipV.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFlux.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFlux.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidForcedPP.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidHardIvtcRemoval.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidHue.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidKernelDeint.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidLargeMedian.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidLogo.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidLuma.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLD3D.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLD3D.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLD3Dlow.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLD3Dlow.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLResize.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMSharpen.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMosaic.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMsmooth.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidPalShift.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidPalShift.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidPalSmart.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidPalSmart.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidParticle.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidParticle.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidPulldown.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidResampleFPS.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidResize.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidReverse.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidRotate.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSRT.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSRTRender.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSRTload.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSeparateField.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSeparateField.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSoften.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidStabilize.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidStabilize.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSwapFields.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSwapSmart.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidTdeint.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidThreshold.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidThreshold.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidUVSwap.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidUnblend.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVlad.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVlad.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVobSubRender.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVobsub.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidWhirl.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidYadif.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vobsubinfo.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADMmpdetc.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/gtk_gui.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/gui_navigate.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/gui_savenew.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/guiplay.cpp
Log:
[Merge] From mean


Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_ffmpeg.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_ffmpeg.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_ffmpeg.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -37,7 +37,7 @@
 #include "ADM_codecs/ADM_ffmpeg.h"
 
 #include "prefs.h"
-#include "ADM_video/ADM_cache.h"
+
 #include "ADM_video/ADM_vidMisc.h"
 //#define TEST_NOB 1
 

Added: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/CMakeLists.txt	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/CMakeLists.txt	2008-04-24 17:36:16 UTC (rev 3980)
@@ -0,0 +1 @@
+ADD_SUBDIRECTORY(src)

Copied: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/include/ADM_confCouple.h (from rev 3979, branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_confCouple.h)
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_confCouple.h	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/include/ADM_confCouple.h	2008-04-24 17:36:16 UTC (rev 3980)
@@ -0,0 +1,54 @@
+/***************************************************************************
+                          CONFcouple.cpp  -  description
+                             -------------------
+	Used to set a pair name/value
+	--> filters
+
+    begin                : Sun Apr 14 2002
+    copyright            : (C) 2002 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+ #ifndef __CONFCOUPLE__
+ #define __CONFCOUPLE__
+
+class CONFcouple
+{
+	private:
+			uint32_t    nb;
+			char 		**name;
+			char 		**value;
+			uint8_t	cur;
+
+			int32_t lookupName(const char *myname);
+	public:
+			CONFcouple(uint32_t nb);
+			~CONFcouple();
+			uint8_t setCouple(const char *name,uint32_t value);
+			uint8_t setCouple(const char *name,int32_t value);
+			uint8_t setCouple(const char *name,const char *value);
+			uint8_t setCouple(const char *name,const ADM_filename *value);
+			uint8_t setCouple(const char *name,double value);
+			uint8_t setCouple(const char *name,float value);
+
+			uint8_t getCouple(const char *name,int32_t *value);
+			uint8_t getCouple(const char *name,uint32_t *value);
+			uint8_t getCouple(const char *name,char **value);
+			uint8_t getCouple(const char *name,ADM_filename **value);
+			uint8_t getCouple(const char *name,double *value);
+			uint8_t getCouple(const char *name,float *value);
+			uint32_t getNumber(void) { return nb;};
+			uint8_t getEntry(uint32_t n, char **nm, char **val)
+				 { assert(n<nb); *nm=name[n];*val=value[n];return 1;};
+			void dump(void );
+
+};
+#endif

Copied: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/include/ADM_image.h (from rev 3979, branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_image.h)
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_image.h	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/include/ADM_image.h	2008-04-24 17:36:16 UTC (rev 3980)
@@ -0,0 +1,189 @@
+//
+// C++ Interface: %{MODULE}
+//
+// Description: 
+//
+//
+// Author: %{AUTHOR} <%{EMAIL}>, (C) %{YEAR}
+//
+// Copyright: See COPYING file that comes with this distribution
+//
+//
+//	This is the base time for image exchanged between codec/filters/...
+//
+//	We (optionnally) can carry extra informations
+//		- aspect ratio
+//		- frame type
+//		- quantizer for each macroblock (16x16 pixels)
+//	For the latter 3 infos are used
+//		quant which leads to the int8 quant array
+//		qstride = stride of array. Usually width+15)/16. 0 MEANS NOT USABLE
+//		qsize = size of the array (needed to be able to copy it)
+//
+#ifndef ADM_IMAGE
+#define ADM_IMAGE
+#include "ADM_assert.h"
+#include "ADM_colorspace/ADM_rgb.h"
+
+typedef enum 
+{
+	ADM_ASPECT_4_3=1,
+	ADM_ASPECT_16_9,
+	ADM_ASPECT_1_1
+} ADM_ASPECT;
+// Avisynth compatibility layer
+
+//#define vi.num_frames _info.nb_frames
+//#define vi.IsYV12()   1
+#define GetReadPtr GetWritePtr
+#define GetRowSize GetPitch
+
+typedef enum 
+{
+        PLANAR_Y=1,
+        PLANAR_U=2,
+        PLANAR_V=3
+        
+} ADM_PLANE;
+typedef enum 
+{
+		ADM_IMAGE_UNKNOWN=0,
+        ADM_IMAGE_JPG=1,
+        ADM_IMAGE_PNG=2,
+        ADM_IMAGE_BMP=3,
+        ADM_IMAGE_BMP2=4
+        
+} ADM_IMAGE_TYPE;
+class ADMImage
+{
+public:
+        uint32_t        demuxerFrameno;
+  
+        //*****************
+        uint8_t		*data;		/// Pointer to actual image data
+        uint32_t	_width;		/// Width of image
+        uint32_t	_height;	/// Height of image
+        uint32_t	_qStride;	/// Stride of Q infos, usually about width/8 <- ***if 0 means no quant usable***
+        uint8_t		*quant;		/// Byte representing quantize used for this block
+        uint32_t	_Qp;		/// Average quantizer for this image, Default=2
+        uint32_t	_qSize;		/// Size of the *quant field
+        ADM_ASPECT	_aspect;	/// Aspect ratio
+        uint32_t	flags;		/// Flags for this image (AVI_KEY_FRAME/AVI_B_FRAME)
+
+// This 3 fields are only used to convery container (reference to other datas)
+// Between codec & editor
+	uint8_t         _isRef;         /// If True means the datas are just a link to data we don't own!
+        ADM_colorspace  _colorspace;    /// Colorspace we are moving, default is YV12
+        uint8_t         _noPicture;     /// No picture to display
+
+// End of section dedicated to codec/editor transfer
+
+        void            commonInit(uint32_t w,uint32_t h); /// sub constructor
+        
+        uint32_t        GetPitch(ADM_PLANE plane)
+                                {
+                                        switch(plane)
+                                        {
+                                                case PLANAR_Y:return _width;break;
+                                                case PLANAR_U:
+                                                case PLANAR_V:return _width>>1;break;
+                                                default: ADM_assert(0);
+                                        }
+                                };
+        uint8_t         *GetWritePtr(ADM_PLANE plane)
+                        {       
+                                uint32_t plan=_width*_height;
+                                switch(plane)
+                                        {
+                                                case PLANAR_Y:return data;break;
+                                                case PLANAR_U:return data+plan;break;
+                                                case PLANAR_V:return data+((plan*5)>>2);break;
+                                                default: ADM_assert(0);
+                                        }
+                        };
+   
+        uint32_t GetHeight(ADM_PLANE plane)
+                                {
+                                        switch(plane)
+                                        {
+                                                case PLANAR_Y:return _height;break;
+                                                case PLANAR_U:
+                                                case PLANAR_V:return _height>>1;break;
+                                                default: ADM_assert(0);
+                                        }
+                                };
+        uint8_t duplicateMacro(ADMImage *src,uint32_t swap);       /// copy an image to ourself, including info
+public:
+
+        uint8_t         *_planes[3];     /// In case of linked data store y/u/v pointers
+        uint32_t        _planeStride[3]; /// Same story
+
+		ADMImage(uint32_t width, uint32_t height);
+                ADMImage(uint32_t width, uint32_t height,uint32_t dummy); /// To create linked datas image        
+
+                uint8_t   LumaReduceBy2(void);
+		~ADMImage();
+        uint8_t getWidthHeight(uint32_t *w,uint32_t *h)
+                    {
+                          *w=_width;
+                          *h=_height;
+                          return 1;
+                    }
+	uint8_t duplicate(ADMImage *src);	/// copy an image to ourself, including info
+        uint8_t duplicateSwapUV(ADMImage *src); /// copy an image to ourself, including info
+	uint8_t duplicateFull(ADMImage *src);	/// copy an image to ourself, including info
+	uint8_t copyInfo(ADMImage *src);	/// copy all the flags, not the data themselves
+	uint8_t copyQuantInfo(ADMImage *src);	/// copy quant table if any
+        uint8_t isRef(void) { return _isRef;};
+        uint8_t setLinkInfos(uint8_t *y,        /// To fill in infos for linked image
+                        uint8_t *u,uint8_t *v,uint32_t stridey,
+                        uint32_t strideu, uint32_t stridev);
+        uint8_t merge(ADMImage *src1,ADMImage *src2);
+        uint8_t substract(ADMImage *src1,ADMImage *src2);
+        uint8_t blacken(void);
+        uint8_t copyTo(ADMImage *target, uint32_t x, uint32_t y);
+        uint8_t copyToAlpha(ADMImage *target, uint32_t x, uint32_t y,uint32_t alpha);
+        uint8_t pack(uint8_t invertChroma);     /// Transfer data from planes to regular packed space
+        uint8_t copyLeftSideTo(ADMImage *dest);
+        /* Some utilitarian functions */
+        uint8_t  saveAsBmp(const char *filename);
+        uint8_t  saveAsJpg(const char *filename);
+        
+static uint32_t lumaDiff(ADMImage *src1,ADMImage *src2,uint32_t noise);
+};
+void drawString(ADMImage *dst, int x, int y, const char *s) ;
+#define YPLANE(x) ((x)->data)
+#define UPLANE(x) ((x)->data+((x)->_width*(x)->_height))
+#define VPLANE(x) ((x)->data+(5*((x)->_width*(x)->_height)>>2))
+
+//
+//  Simple image resizer
+//
+class ADMImageResizer
+{
+	private:
+		void    *_context;
+		uint32_t orgFormat, destFormat;
+		uint32_t orgWidth, orgHeight;
+		uint32_t destWidth, destHeight;
+
+		void init(uint32_t ow, uint32_t oh, uint32_t dw, uint32_t dh, int srcFormat, int dstFormat);
+		void getYuvPlanes(uint8_t *source, uint32_t width, uint32_t height, uint8_t*& yPlane, uint8_t*& uPlane, uint8_t*& vPlane);
+	public:
+		ADMImageResizer(uint32_t ow,uint32_t oh, uint32_t dw, uint32_t dh);
+		ADMImageResizer(uint32_t ow, uint32_t oh, uint32_t dw, uint32_t dh, int srcFormat, int dstFormat);
+		~ADMImageResizer();
+		
+		uint8_t resize(ADMImage *src, ADMImage *dest);
+		uint8_t resize(uint8_t *src, ADMImage *dest);
+		uint8_t resize(ADMImage *src, uint8_t *dest);
+		uint8_t resize(uint8_t *src, uint8_t *dest);
+};
+
+// Misc utilities
+uint8_t BitBlit(uint8_t *dst, uint32_t pitchDest,uint8_t *src,uint32_t pitchSrc,uint32_t width, uint32_t height);
+uint8_t BitBlitAlpha(uint8_t *dst, uint32_t pitchDst,uint8_t *src,uint32_t pitchSrc,uint32_t width, uint32_t height,uint32_t alpha);
+
+ADMImage *createImageFromFile(const char *filename);
+ADM_IMAGE_TYPE ADM_identidyImageFile(const char *filename,uint32_t *w,uint32_t *h);
+#endif

Copied: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/include/ADM_videoFilter.h (from rev 3979, branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_genvideo.hxx)
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_genvideo.hxx	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/include/ADM_videoFilter.h	2008-04-24 17:36:16 UTC (rev 3980)
@@ -0,0 +1,193 @@
+/***************************************************************************
+                          ADM_genvideo.hxx  -  description
+                             -------------------
+    begin                : Tue Mar 19 2002
+    copyright            : (C) 2002 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+ 
+#define ADM_FILTER_API_VERSION 1
+/**
+	Note for filter writers :
+
+		The constructor accept 2 parameters
+
+				_in : previous filter in the chain, the source of incoming image
+				couple : A configuration seen as couples of string
+						"size" "13" for example. Passing null means either
+						it has no parameters or set the default value for them.
+
+				_uncompressed : optional internal buffer
+
+				configure return 1 if the conf has changed, 0 else.
+
+
+
+*/
+#ifndef __ADM_VIDEO__
+#define __ADM_VIDEO__
+
+#define INT int32_t
+#include "ADM_confCouple.h"
+#include "ADM_image.h"
+
+#define Pixel uint8_t
+typedef struct
+ {
+ 		uint32_t width;
+ 		uint32_t height;
+ 		uint32_t nb_frames;
+ 		uint32_t encoding;
+ 		uint32_t codec;
+ 		uint32_t fps1000;
+		uint32_t orgFrame;
+ }ADV_Info;
+
+
+typedef struct
+{
+    uint32_t					w,h;
+    uint32_t				algo;
+}RESIZE_PARAMS;
+
+typedef struct
+{
+ 	uint32_t left,right;
+ 	uint32_t top,bottom;
+}CROP_PARAMS;
+
+typedef struct
+{
+ 	uint32_t newfps, precision;
+}CHFPS_PARAMS;
+
+typedef struct {
+    int pixel;
+    double weight;
+} CONTRIB;
+
+
+typedef struct {
+    uint32_t  n;			/* number of contributors */
+    CONTRIB *p;			/* pointer to list of contributions */
+} CLIST;
+
+typedef struct
+{
+	uint32_t 	width;		/* horizontal size of the image in Pixels */
+	uint32_t	height;		/* vertical size of the image in Pixels */
+	Pixel *	data;		/* pointer to first scanline of image */
+
+} Image;
+
+
+
+ class AVDMGenericVideoStream
+ {
+   protected:
+      	ADV_Info 					_info;
+   	  ADMImage   					*_uncompressed;
+	  AVDMGenericVideoStream 	*_in;
+/* not really used */
+          uint8_t		getPixel(int32_t x,int32_t y,uint8_t *data);
+          uint8_t		getPixelU(int32_t x,int32_t y,uint8_t *data);
+          uint8_t		setPixelU(uint8_t val,int32_t x,int32_t y,uint8_t *data);
+          uint8_t 	unPackChroma(uint8_t *ssrc,uint8_t *ddst);
+/* /not really used */
+   public:
+          virtual uint32_t   getPARWidth(void);
+          virtual uint32_t   getPARHeight(void);
+
+   	// return 1 -> conf changed need rebuild, 0 means conf not changed
+        virtual 	uint8_t 	configure( AVDMGenericVideoStream *instream)=0;
+          			AVDMGenericVideoStream( void)  {_uncompressed=NULL;_in=NULL;};
+  	virtual 		~AVDMGenericVideoStream( ) {};
+        virtual char 	*printConf(void) { static char *str=(char *)"."; return str;};
+
+        virtual uint8_t 	getFrameNumberNoAlloc(uint32_t frame, uint32_t *len,
+          							ADMImage *data,uint32_t *flags)=0;
+          	ADV_Info 	*getInfo( void ) { return &_info;};
+         virtual uint8_t	getCoupledConf( CONFcouple **couples)
+	  				{*couples=NULL;return 0;};
+ };
+
+void     DIA_previewInit(uint32_t width, uint32_t height);
+uint8_t  DIA_previewUpdate(uint8_t *data);
+void 	 DIA_previewEnd(void);
+uint8_t  DIA_previewStillAlive(void);
+uint8_t	 DIA_filterPreview(const char *captionText, AVDMGenericVideoStream *videoStream, uint32_t frame);
+
+ // Pseudo class used to register filters automagically
+ // Does not work atm
+class AVDMVideo_FilterDec
+{
+private:
+	int dum;
+public:
+  	AVDMVideo_FilterDec(char *name, AVDMGenericVideoStream *(*create) (AVDMGenericVideoStream *in, void *));
+};
+
+
+
+
+/**
+	These macros are used to build the create_ function automatically
+	That way external sw has no need to know the underlying class
+*/
+#undef NEW
+#define NEW(x) (x *)ADM_alloc(sizeof(x))
+#undef DELETE
+#define DELETE(x) {if(x){ADM_dealloc(x);x=NULL;}}
+#define CREATOR(x,clss)  return new clss(in,x);
+#define BUILD_CREATE(name,clss) AVDMGenericVideoStream *name(AVDMGenericVideoStream *in, CONFcouple *conf) \
+{		CREATOR(conf,clss); }
+#define VARIABLE_PARAMS 0xff
+#define SCRIPT_CREATE(name,clss,tmplate) \
+AVDMGenericVideoStream *name (AVDMGenericVideoStream *in, int n,Arg *args); \
+AVDMGenericVideoStream *name (AVDMGenericVideoStream *in, int n,Arg *args) \
+{ 							\
+CONFcouple		*couple; 			\
+AVDMGenericVideoStream *filter; 			\
+	couple=filterBuildCouple(&tmplate,n,args);	\
+	if(!couple) { printf("Filter built failed\n");return NULL;}\
+	filter= new clss(in,couple);			\
+	delete couple;					\
+	return filter;					\
+}
+
+
+
+#define GET(x) ADM_assert(couples->getCouple((char *)#x,&(_param->x)))
+#define GET2(x,t) (assert(couples->getCouple((char *)#x,&(t))),(_param->x)=(t))
+#define CSET(x)  (*couples)->setCouple((char *)#x,(_param->x))
+
+typedef struct
+ {
+          uint32_t    nb;
+          const char  *param[25];
+ }FILTER_PARAM;
+ 
+#include "ADM_videoFilter_iface.h"
+ CONFcouple *filterBuildCouple(FILTER_PARAM *param,uint32_t n,Arg *args); 
+ 
+#define MPLAYER_RESIZE_PREFFERED
+ // You should not use this functions.
+ // Needed for some legacy filters...
+ AVDMGenericVideoStream *getLastVideoFilter( uint32_t frameStart, uint32_t nbFrame);
+ AVDMGenericVideoStream *getLastVideoFilter( void );
+ AVDMGenericVideoStream *getFirstVideoFilter( uint32_t frameStart, uint32_t nbFrame);
+ AVDMGenericVideoStream *getFirstVideoFilter( void);
+ AVDMGenericVideoStream *getFirstCurrentVideoFilter( void);
+// 
+#include "ADM_videoFilterCache.h"
+#endif
+

Copied: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/include/ADM_videoFilterCache.h (from rev 3979, branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_cache.h)
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_cache.h	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/include/ADM_videoFilterCache.h	2008-04-24 17:36:16 UTC (rev 3980)
@@ -0,0 +1,48 @@
+//
+// C++ Interface: ADM_cache
+//
+// Description: 
+//
+//
+// Author: mean <fixounet at free.fr>, (C) 2004
+//
+// Copyright: See COPYING file that comes with this distribution
+//
+//
+
+#ifndef __ADM_CACHE__
+#define __ADM_CACHE__
+#include "ADM_videoFilter.h"
+typedef struct vidCacheEntry
+{
+		uint32_t 	frameNum;
+		ADMImage 	*frameBuffer;
+		uint8_t		frameLock;		
+		uint32_t	lastUse;
+
+}vidCacheEntry;
+
+class VideoCache
+{
+	private:
+		vidCacheEntry	*entry;
+		ADV_Info 	info;
+		uint32_t	counter;
+		uint32_t 	nbEntry;
+		
+		AVDMGenericVideoStream *incoming;
+		
+		
+		int32_t 	searchFrame( uint32_t frame);
+		int32_t 	searchPtr( ADMImage *ptr);
+		
+	public:
+		VideoCache(uint32_t nb,AVDMGenericVideoStream *in);
+		~VideoCache(void);
+		
+		ADMImage *getImage(uint32_t frame);
+		uint8_t unlockAll(void);
+		uint8_t unlock(ADMImage  *frame);
+		uint8_t purge(void);
+};
+#endif

Copied: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/include/ADM_videoFilter_iface.h (from rev 3979, branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidPalShift.h)
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidPalShift.h	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/include/ADM_videoFilter_iface.h	2008-04-24 17:36:16 UTC (rev 3980)
@@ -0,0 +1,50 @@
+/** *************************************************************************
+                          \file ADM_videoFilter_iface.h
+                             -------------------
+    begin                : Tue Mar 19 2002
+    copyright            : (C) 2002 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+ 
+#ifndef ADM_VIDEOFILTER_IFACE
+#define ADM_VIDEOFILTER_IFACE
+ typedef enum 
+ {
+ 	APM_NUM,
+ 	APM_HEXNUM,
+ 	APM_STRING,
+ 	APM_QUOTED,
+ 	APM_FLOAT,
+ 	APM_BOOL,
+ 	APM_LAST
+
+ }APM_TYPE;
+ 
+ typedef union
+ {
+ 	int 	integer;
+ 	float	real;
+ 	char	*string;
+
+ }ArgI;
+ 
+ typedef struct 
+ {
+ 	APM_TYPE type;
+ 	ArgI	 arg;
+
+ }Arg;
+ 
+ 
+ 
+#endif
+

Copied: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/include/ADM_videoFilter_internal.h (from rev 3979, branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/video_filters.h)
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/video_filters.h	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/include/ADM_videoFilter_internal.h	2008-04-24 17:36:16 UTC (rev 3980)
@@ -0,0 +1,216 @@
+/***************************************************************************
+                          video_filters.h  -  description
+                             -------------------
+    begin                : Wed Mar 27 2002
+    copyright            : (C) 2002 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+ #ifndef __VIDEO_FILTERS__
+ #define  __VIDEO_FILTERS__
+
+#include "ADM_script/adm_scanner.h"
+
+typedef enum
+{
+	VF_TRANSFORM,
+	VF_INTERLACING,
+	VF_COLORS,
+	VF_NOISE,
+	VF_SHARPNESS,
+	VF_SUBTITLE,
+	VF_MISC
+}VF_CATEGORY;
+
+typedef enum
+{
+                VF_INVALID=0,
+                VF_RESIZE=1,
+                VF_CROP,
+                VF_TELECIDE,
+                VF_BLACKEN,
+                VF_SHARPEN,
+                VF_MEAN,
+                VF_MEDIAN,
+                VF_GAUSSIAN,
+                VF_SMOOTHCLEAN,
+                VF_DEINTERLACE,
+                VF_ADDBORDER,
+                VF_PALSHIFT,
+                VF_SWAPUV,
+                VF_CONTRAST,
+                VF_LUMA,
+                VF_CHROMAU,
+                VF_CHROMAV,
+                VF_STABILIZE,
+                VF_FLIP,
+                VF_DENOISE,
+                VF_SUBTILE,
+                VF_LARGEMEDIAN,
+                VF_FLUXSMOOTH,
+                VF_SALT,
+                VF_PARTIAL          ,
+                VF_VLADSMOOTH,
+                VF_ROTATE,
+                VF_DROPOUT,
+                VF_SWAPFIELDS,
+                VF_KEEPODD,
+                VF_KEEPEVEN,
+                VF_SEPARATEFIELDS,
+                VF_MERGEFIELDS,
+                VF_CHROMASHIFT,
+                VF_SMARTSWAPFIELDS,
+                VF_MPLAYERRESIZE,
+                VF_IVTC,
+                VF_PULLDOWN,
+                VF_MPLHQD3D,
+                VF_MPLLQD3D,
+                VF_LAVDEINT,
+                VF_MPDETC,
+                VF_KRNDEINT,
+                VF_FORCEDPP,
+                VF_SOFTEN,
+                VF_DECOMB,
+                VF_DECIMATE,
+                VF_MSMOOTH,
+                VF_STACKFIELD,
+                VF_HZSTACKFIELD,
+                VF_WHIRL,
+                VF_EQUALIZER,
+                VF_VOBSUB,
+                VF_CHFPS,
+                VF_RESAMPLE_FPS,
+                VF_LAVPP_DEINT,
+                VF_UNSTACK_FIELD,
+                VF_HUE,
+                VF_EQ2,
+                VF_DGBOB,
+                VF_MSHARPEN,
+                VF_ASHARP,
+                VF_CNR2,
+                VF_DELTA,
+                VF_UNBLEND,
+                VF_HARDIVTC,
+                VF_MOSAIC,
+                VF_BLENDREMOVAL,
+                VF_TDEINT,
+                VF_MPDELOGO,
+                VF_COLOR_YUV,
+                VF_ANIMATED,
+                VF_MCDEINT,
+                VF_REVERSE,
+                VF_FADE,
+                VF_ASS,
+                VF_YADIF,
+                VF_DVBSUB,
+                VF_LOGO,
+                VF_COMPUTEAVERAGE,
+                VF_ERASER,
+                VF_SWISSARMYKNIFE,
+                VF_THRESHOLD,
+                VF_PARTICLELIST,
+                VF_DUMMY,
+                VF_COUNT,
+                MAX_FILTER = VF_COUNT - 1,
+                VF_EXTERNAL_START=0xF0000000
+          }VF_FILTERS;
+
+typedef AVDMGenericVideoStream *(ADM_createT) (AVDMGenericVideoStream *in, CONFcouple *);
+typedef AVDMGenericVideoStream *(ADM_create_from_scriptT) (AVDMGenericVideoStream *in, int n,Arg *args);
+
+         
+   struct FILTER_ENTRY
+   {
+        const char        *name;
+        ADM_createT       *create;
+        void              (*destroy)( AVDMGenericVideoStream *old); /* Maybe needed ...*/
+        VF_FILTERS        tag;
+        uint8_t           viewable;
+        const char        *filtername;
+        const char        *description;
+        ADM_create_from_scriptT *create_from_script;
+        VF_CATEGORY		  category;
+       FILTER_ENTRY (const char * name, ADM_createT * create, VF_FILTERS tag,
+                     uint8_t viewable, const char * filtername,
+                     VF_CATEGORY category=VF_MISC,
+                     const char * description = 0,
+                     ADM_create_from_scriptT * create_from_script = 0)
+           : name (name),
+             create (create),
+             destroy (0),
+             tag (tag),
+             viewable (viewable),
+             filtername (filtername),
+             description (description),
+             category(category),
+             create_from_script (create_from_script)
+       {
+       }
+
+       FILTER_ENTRY ()
+           : name (0),
+             create (0),
+             destroy (0),
+             tag (VF_INVALID),
+             viewable (0),
+             filtername (0),
+             description (0),
+             category(VF_MISC),
+             create_from_script (0)
+       {
+       }
+   };
+ 	
+   typedef struct
+   {
+          VF_FILTERS              tag;
+          AVDMGenericVideoStream *filter;
+          CONFcouple             *conf;
+   }FILTER;
+
+ 
+   
+
+FILTER * getCurrentVideoFilterList (uint32_t * count);
+const FILTER_ENTRY * filterGetEntryFromTag (VF_FILTERS tag);
+const char * filterGetNameFromTag(VF_FILTERS tag);
+
+  void	filterSetPostProc( void );
+  
+#ifdef USE_LIBXML2
+void filterSaveXml(char *name);
+void filterSaveXml(char *name,uint8_t silent);
+void filterLoadXml(char *name);
+int  filterLoadXml(char *name,uint8_t silent);
+#endif
+ void filterSave(char *name);
+ void filterLoad(char *name);
+ int filterLoad(char *name,uint8_t silent);
+ void filterSave(char *name,uint8_t silent);
+
+void filterSaveScriptJS(FILE *f);
+
+void registerFilter(const char *name,VF_FILTERS tag,uint8_t viewable,
+                    ADM_createT  *create,
+                    const char *fname);
+                    
+void registerFilterEx(const char *name,VF_FILTERS tag,uint8_t viewable,
+                ADM_createT  *create,
+                const char *filtername,
+                ADM_create_from_scriptT *create_from_script,
+                const char *description);
+                
+void 		filterListAll( void );
+VF_FILTERS 	filterGetTagFromName(char *inname);
+uint8_t 	filterAddScript(VF_FILTERS tags,uint32_t n,Arg *args);
+//AVDMGenericVideoStream *filterCreateFromTag(VF_FILTERS tag,uint8_t *conf, AVDMGenericVideoStream *in) ;
+
+ #endif

Copied: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/ADM_confCouple.cpp (from rev 3979, branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_confCouples.cpp)
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_confCouples.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/ADM_confCouple.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -0,0 +1,186 @@
+/***************************************************************************
+                          ADM_genvideo.cpp  -  description
+                             -------------------
+    begin                : Sun Apr 14 2002
+    copyright            : (C) 2002 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#include "ADM_default.h"
+
+#include "fourcc.h"
+#include "ADM_assert.h"
+
+#include "ADM_videoFilter.h"
+static char tmpstring[1024]; // should be enougth
+CONFcouple::CONFcouple(uint32_t nub)
+{
+	nb=nub;
+	name=new char *[nb];
+	value=new char *[nb];
+
+	for(uint32_t i=0;i<nb;i++)
+		{
+			name[i]=NULL;
+			value[i]=NULL;
+		}
+
+	cur=0;
+};
+
+CONFcouple::~CONFcouple()
+{
+	for(uint32_t i=0;i<nb;i++)
+		{
+			if(name[i]) delete name[i];
+			if(value[i]) delete value[i];
+		}
+		delete [] name;
+		delete [] value;
+
+
+};
+
+uint8_t CONFcouple::setCouple(const char *myname,uint32_t val)
+{
+	ADM_assert(cur<nb);
+
+	name[cur]=ADM_strdup(myname);
+	sprintf(tmpstring,"%lu",val);
+	value[cur]=ADM_strdup(tmpstring);
+	cur++;
+	return 1;
+}
+uint8_t CONFcouple::setCouple(const char *myname,float val)
+{
+	ADM_assert(cur<nb);
+
+	name[cur]=ADM_strdup(myname);
+	sprintf(tmpstring,"%f",val);
+	value[cur]=ADM_strdup(tmpstring);
+	cur++;
+	return 1;
+}
+uint8_t CONFcouple::setCouple(const char *myname,double val)
+{
+	ADM_assert(cur<nb);
+
+	name[cur]=ADM_strdup(myname);
+	sprintf(tmpstring,"%f",val);
+	value[cur]=ADM_strdup(tmpstring);
+	cur++;
+	return 1;
+}
+uint8_t CONFcouple::setCouple(const char *myname,int32_t val)
+{
+	ADM_assert(cur<nb);
+
+	name[cur]=ADM_strdup(myname);
+	sprintf(tmpstring,"%ld",val);
+	value[cur]=ADM_strdup(tmpstring);
+	cur++;
+	return 1;
+}
+uint8_t CONFcouple::setCouple(const char *myname,const char *val)
+{
+	ADM_assert(cur<nb);
+
+	name[cur]=ADM_strdup(myname);
+	value[cur]=ADM_strdup(val);
+	cur++;
+	return 1;
+}
+uint8_t CONFcouple::setCouple(const char *myname,const ADM_filename *val)
+{
+	ADM_assert(cur<nb);
+
+	name[cur]=ADM_strdup(myname);
+	value[cur]=ADM_strdup((char *)val);
+	cur++;
+	return 1;
+}
+
+uint8_t CONFcouple::getCouple(const char *myname,uint32_t *val)
+{
+	int32_t index=lookupName(myname);
+
+	ADM_assert(index!=-1);
+	ADM_assert(index<(int)nb);
+	*val=(int)atoi(value[index]);
+	return 1;
+}
+uint8_t CONFcouple::getCouple(const char *myname,int32_t *val)
+{
+	int32_t index=lookupName(myname);
+
+	ADM_assert(index!=-1);
+	ADM_assert(index<(int)nb);
+	*val=(int)atoi(value[index]);
+	return 1;
+}
+uint8_t CONFcouple::getCouple(const char *myname,char **val)
+{
+	int32_t index=lookupName(myname);
+
+	ADM_assert(index!=-1);
+	ADM_assert(index<(int)nb);
+	*val=ADM_strdup(value[index]);
+	return 1;
+}
+uint8_t CONFcouple::getCouple(const char *myname,ADM_filename **val)
+{
+	int32_t index=lookupName(myname);
+
+	ADM_assert(index!=-1);
+	ADM_assert(index<(int)nb);
+	*val=(ADM_filename *)ADM_strdup(value[index]);
+	return 1;
+}
+
+uint8_t CONFcouple::getCouple(const char *myname,float *val)
+{
+	int32_t index=lookupName(myname);
+
+	ADM_assert(index!=-1);
+	ADM_assert(index<(int)nb);
+	sscanf(value[index],"%f",val);;
+	return 1;
+}
+uint8_t CONFcouple::getCouple(const char *myname,double *val)
+{
+	int32_t index=lookupName(myname);
+
+	ADM_assert(index!=-1);
+	ADM_assert(index<(int)nb);
+	sscanf(value[index],"%lf",val);;
+	return 1;
+}
+
+int32_t CONFcouple::lookupName(const char *myname)
+{
+	for(uint32_t i=0;i<nb;i++)
+	{
+		if(!strcmp(name[i],myname)) return i;
+
+	}
+	return -1;
+
+}
+void CONFcouple::dump(void )
+{
+	for(uint32_t i=0;i<nb;i++)
+	{
+		if(name[i]) printf ("nm:%s ",name[i]); else printf("!! no name !! ");
+		if(value[i]) printf ("val:%s ",value[i]); else printf("!! no value !! ");
+	}
+}
+

Copied: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/ADM_image.cpp (from rev 3979, branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_image.cpp)
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_image.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/ADM_image.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -0,0 +1,388 @@
+/***************************************************************************
+    copyright            : (C) 2003-2005 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+
+#include "ADM_default.h"
+#include "ADM_image.h"
+
+//#include "ADM_assert.h"
+void ADMImage_stat( void );
+
+static uint32_t imgMaxMem=0;
+static uint32_t imgCurMem=0;
+static uint32_t imgMaxNb=0;
+static uint32_t imgCurNb=0;
+
+void ADMImage_stat( void )
+{
+	printf("\nImages stat:\n");
+	printf("___________\n");
+	printf("Max memory consumed (MB)     : %lu\n",imgMaxMem>>10);
+	printf("Current memory consumed (MB) : %lu\n",imgCurMem>>10);
+	printf("Max image used               : %lu\n",imgMaxNb);
+	printf("Cur image used               : %lu\n",imgCurNb);
+
+}
+//
+//	Allocate and initialize everything to default values
+//
+void    ADMImage::commonInit(uint32_t w,uint32_t h)
+{
+        _width=w;        
+        _height=h;
+        quant=NULL;
+        _qStride=0;
+        _Qp=2;
+        flags=0;
+        _qSize=0;
+        _aspect=ADM_ASPECT_1_1;
+        
+        imgCurNb++;
+        _planes[0]=_planes[1]=_planes[2]=NULL;
+        _noPicture=0;
+        _colorspace=ADM_COLOR_YV12;
+
+}
+ADMImage::ADMImage(uint32_t width, uint32_t height)
+{
+        commonInit(width,height);
+        _isRef=0;
+        data=new uint8_t [ ((width+15)&0xffffff0)*((height+15)&0xfffffff0)*2];
+        ADM_assert(data);
+        imgCurMem+=(width*height*3)>>1;
+        if(imgCurMem>imgMaxMem) imgMaxMem=imgCurMem;
+        if(imgCurNb>imgMaxNb) imgMaxNb=imgCurNb;
+
+};
+// Create a fake image with external datas
+ADMImage::ADMImage(uint32_t width, uint32_t height,uint32_t dummy)
+{       
+        commonInit(width,height); 
+        _isRef=1;
+        data=NULL;                
+                
+};
+//
+//	Deallocate
+//
+ADMImage::~ADMImage()
+{
+        if(!_isRef)
+        {
+	       if(quant) delete [] quant;
+	       quant=NULL;
+	       if(data) delete [] data;
+	       data=NULL;
+               imgCurMem-=(_width*_height*3)>>1;
+	}
+	imgCurNb--;
+	
+}
+
+//
+//	Duplicate
+//
+uint8_t ADMImage::duplicateMacro(ADMImage *src,uint32_t swap)
+{
+        // Sanity check
+        ADM_assert(src->_width==_width);
+        ADM_assert(src->_height==_height);
+
+        ADM_assert(!_isRef); // could not duplicate to a linked data image
+
+        // cleanup if needed
+        if(quant) delete [] quant;
+        quant=NULL;
+ 
+       _qStride=0;      
+        _qSize=0;
+        
+        copyInfo(src);
+        if(!src->_isRef)
+        {
+               memcpy(YPLANE(this),YPLANE(src),_width*_height);
+                if(swap)
+                {
+                        memcpy(UPLANE(this),VPLANE(src),(_width*_height)>>2);
+                        memcpy(VPLANE(this),UPLANE(src),(_width*_height)>>2);
+                }
+                else
+                {
+                        memcpy(UPLANE(this),UPLANE(src),(_width*_height)>>2);
+                        memcpy(VPLANE(this),VPLANE(src),(_width*_height)>>2);
+                }
+        }
+        else
+        {
+                if(src->_noPicture)
+                {
+                        // no pic available, blacken it                        
+                        memset(YPLANE(this),0,_width*_height);
+                        memset(UPLANE(this),128,(_width*_height)>>2);
+                        memset(VPLANE(this),128,(_width*_height)>>2);
+                        return 1;
+                        
+                }
+               // The source is a reference
+                // We have to use the alternate informations
+                // to copy & compact at the same time
+                //
+
+                ADM_assert(src->_planeStride[0]);
+                ADM_assert(src->_planeStride[1]);
+                ADM_assert(src->_planeStride[2]);
+
+                ADM_assert(src->_planes[0]);
+                ADM_assert(src->_planes[1]);
+                ADM_assert(src->_planes[2]);
+
+                uint8_t *in,*out;
+                uint32_t w,h,stride;
+
+                w=src->_width;
+                h=src->_height;
+                stride=src->_planeStride[0];
+                out=YPLANE(this);
+                in=src->_planes[0];
+#define PLANE_CPY(h) \
+                for(uint32_t y=0;y<h;y++)  \
+                { \
+                        memcpy(out,in,w); \
+                        in+=stride;       \
+                        out+=w;           \
+                } 
+                PLANE_CPY(h);
+
+                w>>=1;
+                h>>=1;
+                in=src->_planes[1];
+                if(swap)
+                        out=VPLANE(this);
+                else
+                        out=UPLANE(this);
+                stride=src->_planeStride[1];
+                PLANE_CPY(h);
+        
+                in=src->_planes[2];
+                if(swap)
+                        out=UPLANE(this);
+                else
+                        out=VPLANE(this);
+                stride=src->_planeStride[2];
+                PLANE_CPY(h);
+
+
+        }
+        return 1;
+}
+uint8_t ADMImage::duplicate(ADMImage *src)
+{
+	return duplicateMacro(src,0);
+}
+uint8_t ADMImage::duplicateSwapUV(ADMImage *src)
+{
+        return duplicateMacro(src,0);
+}
+uint8_t ADMImage::pack(uint8_t invertChroma)
+{
+int u=1,v=2;
+    if(invertChroma) {u=2;v=1;}
+    ADM_assert(_planeStride[0]>=_width);
+    // Pack luma
+    uint8_t *src,*dest;
+
+    src=_planes[0];
+    dest=YPLANE(this);
+    BitBlit(dest,_width,src,_planeStride[0],_width,_height);
+
+    src=_planes[u];
+    dest=UPLANE(this);
+    BitBlit(dest,_width>>1,src,_planeStride[u],_width>>1,_height>>1);
+
+    src=_planes[v];
+    dest=VPLANE(this);
+    BitBlit(dest,_width>>1,src,_planeStride[v],_width>>1,_height>>1);
+
+    return 1;
+}
+uint8_t ADMImage::duplicateFull(ADMImage *src)
+{
+	// Sanity check
+	ADM_assert(src->_width==_width);
+	ADM_assert(src->_height==_height);
+	
+	
+	copyInfo(src);
+        ADM_assert(!_isRef);
+
+	memcpy(YPLANE(this),YPLANE(src),_width*_height);
+	memcpy(UPLANE(this),UPLANE(src),(_width*_height)>>2);
+	memcpy(VPLANE(this),VPLANE(src),(_width*_height)>>2);
+	copyQuantInfo(src);
+	
+	return 1;
+}
+uint8_t ADMImage::copyInfo(ADMImage *src)
+{
+	_Qp=src->_Qp;
+	flags=src->flags;
+	_aspect=src->_aspect;
+}
+//
+//	By design the reallocation of quant should happen at startup
+//	but not in processing itself (reuse already allocated quant)
+//	It may seem shoddy, but it adds flexibility
+//
+uint8_t ADMImage::copyQuantInfo(ADMImage *src)
+{
+	if(!src->_qStride || !src->_qSize)  // No (usable) quant
+	{
+		_qStride=0;
+		return 1;
+	}
+	// Reuse Quant memory ?
+	if(!quant)
+	{	// need a new quant
+		quant=new uint8_t[src->_qSize];
+		_qSize=src->_qSize;
+	
+	}
+	
+	// Same size ?
+	ADM_assert(_qSize==src->_qSize);		
+	_qStride=src->_qStride;		
+	memcpy(quant,src->quant,_qSize);	
+	
+	return 1;
+}
+uint8_t ADMImage::blacken(void)
+{
+        memset(YPLANE(this),0,_width*_height);
+        memset(UPLANE(this),128,(_width*_height)>>2);
+        memset(VPLANE(this),128,(_width*_height)>>2);
+        return 1;
+
+}
+/*
+    Copy "this" image into dest image at x,y position
+
+*/
+uint8_t ADMImage::copyTo(ADMImage *dest, uint32_t x,uint32_t y)
+{
+      
+    uint32_t box_w=_width, box_h=_height;
+    // Clip if needed
+    if(y>dest->_height)
+    {
+        printf("Y out : %u %u\n",y,dest->_height);
+         return 1;
+    }
+    if(x>dest->_width) 
+    {
+        printf("X out : %u %u\n",x,dest->_width);
+         return 1;
+    }
+    
+    if(x+box_w>dest->_width) box_w=dest->_width-x;
+    if(y+box_h>dest->_height) box_h=dest->_height-y;
+
+    // do y
+    BitBlit(YPLANE(dest)+x+dest->_width*y,dest->_width,
+            data,_width,
+            box_w,box_h);
+    // Do u
+    BitBlit(UPLANE(dest)+x/2+(dest->_width*y)/4,dest->_width/2,
+            UPLANE(this),_width>>1,
+            box_w>>1,box_h>>1);
+
+    BitBlit(VPLANE(dest)+x/2+(dest->_width*y)/4,dest->_width/2,
+            VPLANE(this),_width>>1,
+            box_w>>1,box_h>>1);
+
+
+    return 1;
+
+}
+/*
+    \fn    copyToAlpha
+    \brief Copy "this" image into dest image at x,y position using alpha alpha
+    @param alpha alpha value (0--255)
+
+*/
+uint8_t ADMImage::copyToAlpha(ADMImage *dest, uint32_t x,uint32_t y,uint32_t alpha)
+{
+      
+    uint32_t box_w=_width, box_h=_height;
+    // Clip if needed
+    if(y>dest->_height)
+    {
+        printf("Y out : %u %u\n",y,dest->_height);
+         return 1;
+    }
+    if(x>dest->_width) 
+    {
+        printf("X out : %u %u\n",x,dest->_width);
+         return 1;
+    }
+    
+    if(x+box_w>dest->_width) box_w=dest->_width-x;
+    if(y+box_h>dest->_height) box_h=dest->_height-y;
+
+    // do y
+    BitBlitAlpha(YPLANE(dest)+x+dest->_width*y,dest->_width,         data,_width,            box_w,box_h,alpha);
+    // Do u
+    BitBlitAlpha(UPLANE(dest)+x/2+(dest->_width*y)/4,dest->_width/2,   UPLANE(this),_width>>1,  box_w>>1,box_h>>1,alpha);
+    // and V
+    BitBlitAlpha(VPLANE(dest)+x/2+(dest->_width*y)/4,dest->_width/2, VPLANE(this),_width>>1, box_w>>1,box_h>>1,alpha);
+
+
+    return 1;
+
+}
+/**
+ * 		\fn BitBlitAlpha
+ * 		\brief Alpha blit from dst to src
+ */
+uint8_t BitBlitAlpha(uint8_t *dst, uint32_t pitchDst,uint8_t *src,uint32_t pitchSrc,
+		uint32_t width, uint32_t height,uint32_t alpha)
+{
+    
+    for(int y=0;y<height;y++)
+    {
+    	for(int x=0;x<width;x++)
+    	{
+    		uint32_t s=src[x],d=dst[x];
+    		
+    		d=s*alpha+(255-alpha)*d;
+    		d>>=8;
+    		dst[x]=d;
+    	}
+        src+=pitchSrc;
+        dst+=pitchDst;   
+    }
+    return 1;
+}
+
+uint8_t BitBlit(uint8_t *dst, uint32_t pitchDst,uint8_t *src,uint32_t pitchSrc,uint32_t width, uint32_t height)
+{
+    
+    for(int y=0;y<height;y++)
+    {
+        memcpy(dst,src,width);
+        src+=pitchSrc;
+        dst+=pitchDst;   
+    }
+    return 1;
+}
+//EOF

Copied: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/ADM_imageResizer.cpp (from rev 3979, branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_imageResizer.cpp)
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_imageResizer.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/ADM_imageResizer.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -0,0 +1,154 @@
+/***************************************************************************
+    copyright            : (C) 2003-2005 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include "ADM_default.h"
+
+#include "ADM_image.h"
+
+extern "C" {
+#include "ADM_libraries/ADM_ffmpeg/ADM_lavcodec/avcodec.h"
+#include "ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale.h"
+}
+
+
+ADMImageResizer::ADMImageResizer(uint32_t ow, uint32_t oh, uint32_t dw, uint32_t dh)
+{
+	init(ow, oh, dw, dh, PIX_FMT_YUV420P, PIX_FMT_YUV420P);
+}
+
+ADMImageResizer::ADMImageResizer(uint32_t ow, uint32_t oh, uint32_t dw, uint32_t dh, int srcFormat, int destFormat)
+{
+	init(ow, oh, dw, dh, srcFormat, destFormat);
+}
+
+ADMImageResizer::~ADMImageResizer()
+{
+   if (_context)
+   {
+		sws_freeContext((SwsContext*)_context);
+		_context = NULL;
+   }
+}
+
+void ADMImageResizer::init(uint32_t ow, uint32_t oh, uint32_t dw, uint32_t dh, int srcFormat, int dstFormat)
+{
+    orgWidth = ow;
+    orgHeight = oh;
+    destWidth = dw;
+    destHeight = dh;
+
+	orgFormat = srcFormat;
+	destFormat = dstFormat;
+
+	int flags = SWS_SPLINE;
+
+#ifdef ADM_CPU_X86
+	#define ADD(x, y) if (CpuCaps::has##x()) flags |= SWS_CPU_CAPS_##y;
+
+	ADD(MMX,MMX);
+	ADD(3DNOW,3DNOW);
+	ADD(MMXEXT,MMX2);
+#endif
+
+#ifdef ADM_CPU_ALTIVEC
+    flags |= SWS_CPU_CAPS_ALTIVEC;
+#endif
+
+	_context = (void *)sws_getContext(orgWidth, orgHeight,
+									  srcFormat,
+									  destWidth, destHeight,
+									  destFormat,
+									  flags, NULL, NULL,NULL);
+}
+
+uint8_t ADMImageResizer::resize(ADMImage *source, ADMImage *dest)
+{
+    ADM_assert(source->_width == orgWidth);
+    ADM_assert(source->_height == orgHeight);
+    ADM_assert(dest->_width == destWidth);
+    ADM_assert(dest->_height == destHeight);
+
+	return resize(source->data, dest->data);
+}
+
+uint8_t ADMImageResizer::resize(ADMImage *source, uint8_t *dest)
+{
+    ADM_assert(source->_width == orgWidth);
+    ADM_assert(source->_height == orgHeight);
+
+	return resize(source->data, dest);
+}
+
+uint8_t ADMImageResizer::resize(uint8_t *source, ADMImage *dest)
+{
+    ADM_assert(dest->_width == destWidth);
+    ADM_assert(dest->_height == destHeight);
+
+	return resize(source, dest->data);
+}
+
+uint8_t ADMImageResizer::resize(uint8_t *source, uint8_t *dest)
+{
+	uint8_t *src[3];
+	uint8_t *dst[3];
+	int ssrc[3];
+	int ddst[3];
+
+	if (orgFormat == PIX_FMT_YUV420P)
+	{
+		getYuvPlanes(source, orgWidth, orgHeight, *&src[0], *&src[1], *&src[2]);
+
+		ssrc[0] = orgWidth;
+		ssrc[1] = ssrc[2] = orgWidth >> 1;
+	}
+	else	// RGB
+	{
+		src[0] = source;
+		src[1] = NULL;
+		src[2] = NULL;
+
+		ssrc[0]=orgWidth * 4;
+		ssrc[1] = 0;
+		ssrc[2] = 0;
+	}
+
+	if (destFormat == PIX_FMT_YUV420P)
+	{
+		getYuvPlanes(dest, destWidth, destHeight, *&dst[0], *&dst[1], *&dst[2]);
+
+		ddst[0] = destWidth;
+		ddst[1] = ddst[2] = destWidth >> 1;
+	}
+	else	// RGB
+	{
+		dst[0] = dest;
+		dst[1] = NULL;
+		dst[2] = NULL;
+
+		ddst[0] = destWidth * 4;
+		ddst[1] = 0;
+		ddst[2] = 0;
+	}
+
+    sws_scale((SwsContext*)_context, src, ssrc, 0, orgHeight, dst, ddst);
+
+    return 1;
+}
+
+void ADMImageResizer::getYuvPlanes(uint8_t *source, uint32_t width, uint32_t height, uint8_t*& yPlane, uint8_t*& uPlane, uint8_t*& vPlane)
+{
+	// Unfortunately xPLANE macros expect an ADMImage object so doubling up on logic.
+	yPlane = source;
+	uPlane = source + (width * height);
+	vPlane = source + (5 * (width * height) >> 2);
+}

Copied: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/ADM_imageUtils.cpp (from rev 3979, branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_imageUtils.cpp)
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_imageUtils.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/ADM_imageUtils.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -0,0 +1,556 @@
+/***************************************************************************
+    copyright            : (C) 2003-2005 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+
+
+#include "ADM_default.h"
+#include "ADM_image.h"
+#include "ADM_toolkit/bitmap.h"
+#include "avifmt.h"
+#include "avifmt2.h"
+#include "ADM_bitstream.h"
+
+#include "DIA_coreToolkit.h"
+#include "ADM_colorspace/colorspace.h"
+#include "ADM_encoder/ADM_vidEncode.hxx"
+
+#include "ADM_codecs/ADM_codec.h"
+#include "ADM_lavcodec.h"
+#include "ADM_codecs/ADM_ffmpeg.h"
+#define QT_TR_NOOP(x) x // No translation in core*
+static uint8_t tinyAverage(uint8_t *dst, uint8_t *src1, uint8_t *src2,uint32_t l)
+{
+
+uint8_t *s1,*s2,*d1;
+int a1,a2;
+        s1=src1;
+        s2=src2;
+        
+        d1=dst;
+          for(int y=0;y<l;y++)
+                {
+                        a1=*s1;
+                        a2=*s2;
+                        a1=a1+a2;
+                        a1>>=1;
+                        if(a1<0) a1=0;
+                        if(a1>255) a1=255;
+                        *d1=a1;                         
+
+                        s1++;
+                        s2++;
+                        d1++;
+                }
+        
+        return 1;
+}
+#ifdef ADM_CPU_X86
+static uint8_t tinyAverageMMX(uint8_t *dst, uint8_t *src1, uint8_t *src2,uint32_t l)
+{
+int delta;
+uint32_t ww,rr;
+uint8_t *s1,*s2,*d1;
+int a1,a2;
+        s1=src1;
+        s2=src2;
+        
+        d1=dst;
+        ww=l>>2;
+        rr=l&3;
+
+
+#ifdef GCC_2_95_X
+         __asm__(
+                         "pxor %mm7,%mm7"
+                ::
+                 );
+#else
+         __asm__(
+                         "pxor %%mm7,%%mm7"
+                ::
+                 );
+#endif
+
+          for(int y=0;y<ww;y++)
+          {
+                __asm__(
+                        "movd           (%0),%%mm0 \n"
+                        "movd           (%1),%%mm1 \n"
+                        "punpcklbw      %%mm7,%%mm0 \n"
+                        "punpcklbw      %%mm7,%%mm1 \n"
+                        "paddw           %%mm1,%%mm0 \n"
+                        "psrlw          $1,%%mm0 \n"
+                        "packuswb       %%mm0,  %%mm0\n"
+                        "movd           %%mm0,(%2) \n"
+
+                : : "r" (s1),"r" (s2),"r"(d1)
+                );
+                        s1+=4;
+                        s2+=4;
+                        d1+=4;
+                }
+        __asm__(
+                        "emms\n"
+                ::
+                );
+        if(rr) tinyAverage(d1, s1, s2,rr);
+        return 1;
+}
+
+
+#endif
+
+uint8_t ADMImage::merge(ADMImage *src1,ADMImage *src2)
+{
+#ifdef ADM_CPU_X86
+        if(CpuCaps::hasMMX())
+        {
+                tinyAverageMMX(YPLANE(this),YPLANE(src1),YPLANE(src2),(_width*_height*3)>>1);
+                return 1;
+        }
+#endif
+        tinyAverage(YPLANE(this),YPLANE(src1),YPLANE(src2),(_width*_height*3)>>1);
+        return 1;
+
+
+}
+/* 3000 * 3000 max size, using uint32_t is safe... */
+static uint32_t computeDiff(uint8_t  *s1,uint8_t *s2,uint32_t noise,uint32_t l)
+{
+uint32_t df=0;
+uint32_t delta;
+uint32_t ww,hh;
+
+
+        for(int x=0;x<l;x++)
+        {
+                delta=abs(*s1-*s2);
+                if(delta>noise)
+                        df+=delta;
+                s1++;
+                s2++;
+
+        }
+        return df;
+}
+#ifdef ADM_CPU_X86
+static uint64_t noise64;
+static uint32_t computeDiffMMX(uint8_t  *s1,uint8_t *s2,uint32_t noise,uint32_t l)
+{
+uint32_t df=0;
+uint32_t delta;
+uint32_t ll,rr;
+uint64_t noise2=(uint64_t )noise;
+
+uint32_t result=0;
+        noise64=noise2+(noise2<<16)+(noise2<<32)+(noise2<<48);
+        ll=l>>2;
+        rr=l&3;
+
+#ifdef GCC_2_95_X
+         __asm__(
+                         "pxor %mm7,%mm7\n"
+                         "pxor %mm3,%mm3\n"
+                         "movq "Mangle(noise64)", %mm6\n"
+                :: 
+                 );
+#else
+         __asm__(
+                         "pxor %%mm7,%%mm7\n"
+                         "pxor %%mm3,%%mm3\n"
+                         "movq "Mangle(noise64)", %%mm6\n"
+                :: 
+                 );
+#endif
+
+          for(int y=0;y<ll;y++)
+          {
+                __asm__(
+                        "movd           (%0),  %%mm0 \n"
+                        "movd           (%1),  %%mm1 \n"
+                        "punpcklbw      %%mm7, %%mm0 \n"
+                        "punpcklbw      %%mm7, %%mm1 \n"
+                        
+                        "movq           %%mm0, %%mm2 \n"
+                        "psubusw        %%mm1, %%mm2 \n"
+                        "psubusw        %%mm0, %%mm1 \n"
+                        "por            %%mm1, %%mm2 \n" // SAD  
+                                           
+                        "movq           %%mm2, %%mm0 \n"
+                        "pcmpgtw        %%mm6, %%mm2 \n" // Threshold against noise
+                        "pand           %%mm2, %%mm0 \n" // MM0 is the 4 diff, time to pack
+
+                        "movq           %%mm0, %%mm1 \n" // MM0 is a b c d and we want
+                        "psrlq          $16,  %%mm1 \n"  // mm3+=a+b+c+d
+
+                        "movq           %%mm0, %%mm2 \n"
+                        "psrlq          $32,  %%mm2 \n"
+
+                        "movq           %%mm0, %%mm4 \n"
+                        "psrlq          $48,  %%mm4 \n"
+
+                        "paddw          %%mm1, %%mm0 \n"
+                        "paddw          %%mm2, %%mm4 \n"
+                        "paddw          %%mm4, %%mm0 \n"
+
+                        "psllq          $48,  %%mm0 \n"
+                        "psrlq          $48,  %%mm0 \n"
+
+                        "paddw          %%mm0, %%mm3 \n" /* PADDQ is SSE2 */
+
+                : : "r" (s1),"r" (s2)
+                );
+                        s1+=4;
+                        s2+=4;
+                        
+         }
+        // Pack result
+#if 1        
+                __asm__(
+                       
+                        "movd           %%mm3,(%0)\n"
+                        "emms\n"
+                :: "r"(&result)
+                );
+#endif                
+        if(rr) result+=computeDiff(s1, s2, noise,rr);
+        return result;
+}
+
+
+#endif
+
+uint32_t ADMImage::lumaDiff(ADMImage *src1,ADMImage *src2,uint32_t noise)
+{
+
+#ifdef ADM_CPU_X86
+uint32_t r1,r2;
+        if(CpuCaps::hasMMX())
+        {
+                return computeDiffMMX(YPLANE(src1),YPLANE(src2),noise,src1->_width*src1->_height);                
+        }
+#endif
+        return computeDiff(YPLANE(src1),YPLANE(src2),noise,src1->_width*src1->_height);
+}
+
+//******************************************************************************
+// so srcR=2*src-srcP
+static uint8_t tinySubstract(uint8_t *dst, uint8_t *src1, uint8_t *src2,uint32_t l)
+{
+int delta;
+uint32_t ww,hh;
+uint8_t *s1,*s2,*d1;
+int a1,a2;
+        s1=src1;
+        s2=src2;
+        
+        d1=dst;
+       
+
+          for(int y=0;y<l;y++)
+               
+                {
+                        a1=*s1;
+                        a2=*s2;
+                        a1=2*a1-a2;
+                        if(a1<0) a1=0;
+                        if(a1>255) a1=255;
+                        *d1=a1;                         
+
+                        s1++;
+                        s2++;
+                        d1++;
+                }
+        return 1;
+}
+#ifdef ADM_CPU_X86
+static uint8_t tinySubstractMMX(uint8_t *dst, uint8_t *src1, uint8_t *src2,uint32_t l)
+{
+int delta;
+uint32_t ww,hh;
+uint8_t *s1,*s2,*d1;
+int ll,rr;
+        ll=l>>2;
+        rr=l&3;
+        s1=src1;
+        s2=src2;
+        
+        d1=dst;
+      
+#ifdef GCC_2_95_X
+        __asm__(
+                         "pxor %mm7,%mm7"
+                ::
+                 );
+#else
+        __asm__(
+                         "pxor %%mm7,%%mm7"
+                ::
+                 );
+#endif
+        for(int x=0;x<ll;x++)
+                {
+                        __asm__(
+                        "movd           (%0),%%mm0 \n"
+                        "movd           (%1),%%mm1 \n"
+                       
+                        "punpcklbw      %%mm7,%%mm0 \n"
+                        "punpcklbw      %%mm7,%%mm1 \n"
+                      
+                        
+                        "paddw          %%mm0,%%mm0 \n"
+                       
+                        
+                        "psubusw        %%mm1,%%mm0 \n" // mm1=sum                       
+                        "packuswb       %%mm0,  %%mm0\n"
+                        "movd           %%mm0,(%2) \n"                       
+                        :: "r"(s1),"r"(s2),"r"(d1)
+                        );
+                        s1+=4;
+                        s2+=4;
+                        d1+=4;
+                }
+                 __asm__(                       
+                        "emms\n"
+                :: 
+                );
+        if(rr) tinySubstractMMX(d1, s1, s2,rr);
+        return 1;
+}
+#endif
+
+uint8_t ADMImage::substract(ADMImage *src1,ADMImage *src2)
+{
+
+#ifdef ADM_CPU_X86
+uint32_t r1,r2;
+        if(CpuCaps::hasMMX())
+        {
+                 return tinySubstractMMX(YPLANE(this),YPLANE(src1),YPLANE(src2),src1->_width*src1->_height);                
+        }
+#endif
+        return tinySubstract(YPLANE(this),YPLANE(src1),YPLANE(src2),src1->_width*src1->_height);
+}
+ ADM_BITMAPFILEHEADER bmfh;
+ ADM_BITMAPINFOHEADER bmph;
+  FILE *fd;
+  uint32_t sz;
+  uint16_t s16;
+  uint32_t s32;
+  
+
+/**
+    \fn saveAsBmp
+    \brief save current image into filename, into bmp format
+*/
+uint8_t  ADMImage::saveAsBmp(const char *filename)
+{
+  ADM_BITMAPFILEHEADER bmfh;
+  ADM_BITMAPINFOHEADER bmph;
+  FILE *fd;
+  uint32_t sz;
+  uint16_t s16;
+  uint32_t s32;
+  
+  sz = _width* _height * 3;
+
+  bmfh.bfReserved1 = bmfh.bfReserved2 = 0;
+  bmfh.bfOffBits = sizeof (bmfh) + sizeof (bmph);
+//_________________________________________
+  bmph.biSize = sizeof (bmph);
+  bmph.biWidth = _width;
+  bmph.biHeight = _height;
+  bmph.biPlanes = 1;
+  bmph.biBitCount = 24;
+  bmph.biCompression = 0;	// COMPRESSION NONE
+  bmph.biSizeImage = sz;
+  bmph.biXPelsPerMeter = 0;
+  bmph.biYPelsPerMeter = 0;
+  bmph.biClrUsed = 0;
+  bmph.biClrImportant = 0;
+/*
+	bmph.resolutionUnits=0;
+	bmph.origin=0;
+	bmph.colorEncoding=0;
+*/
+
+  ADMImage image(_width,_height);
+  
+
+  printf ("\n %u x %u=%u\n", bmph.biWidth, bmph.biHeight, sz);
+
+  uint8_t *out;
+
+        out=(uint8_t *)ADM_alloc(sz);
+        if(!out)
+        {
+            GUI_Error_HIG(QT_TR_NOOP("Memory error"), NULL);
+//            ADM_dealloc(out);
+            return 0;
+        }
+
+        if(!COL_yv12rgbBMP(bmph.biWidth, bmph.biHeight,data, out))
+        {
+              GUI_Error_HIG(QT_TR_NOOP("Error converting to BMP"), NULL);
+              ADM_dealloc(out);
+              return 0;
+        }
+        fd = fopen (filename, "wb");
+        if (!fd)
+        {
+                GUI_Error_HIG (QT_TR_NOOP("Something bad happened"), NULL);
+                ADM_dealloc(out);
+                return 0;
+        }
+
+	// Bitmpap file header, not using tructure due to gcc padding it
+#ifdef ADM_BIG_ENDIAN
+	s16 = 0x424D;
+#else	
+  	s16 = 0x4D42;
+#endif	
+  	s32 = 14 + sizeof (bmph) + sz;
+#ifdef ADM_BIG_ENDIAN	
+	#define SWAP32(x) x=R32(x)	
+#else
+	#define SWAP32(x) ; 
+#endif
+        SWAP32(s32);	
+        fwrite (&s16, 2, 1, fd);
+        fwrite (&s32, 4, 1, fd);
+        s32 = 0;
+        fwrite (&s32, 4, 1, fd);
+        s32 = 14 + sizeof (bmph);
+        SWAP32(s32);
+        fwrite (&s32, 4, 1, fd);
+#ifdef ADM_BIG_ENDIAN
+	Endian_BitMapInfo(&bmph);
+#endif
+        fwrite (&bmph, sizeof (bmph), 1, fd);
+        fwrite (out, sz, 1, fd);
+  
+        fclose(fd);
+        ADM_dealloc(out);
+        return 1;
+}
+/**
+    \fn saveAsJpg
+    \brief save current image into filename, into jpg format
+*/
+uint8_t  ADMImage::saveAsJpg(const char *filename)
+{
+ ffmpegEncoderFFMjpeg *codec=NULL;
+  FILE *fd;
+  uint8_t *buffer=NULL;
+  uint32_t sz;
+  
+
+        sz = _width*_height*3;
+        ADMBitstream bitstream(sz);
+        buffer=new uint8_t[sz];
+        bitstream.data=buffer;
+        codec=new  ffmpegEncoderFFMjpeg(_width,_height,FF_MJPEG)  ;
+        codec->init( 95,25000);
+        if(!codec->encode(this,&bitstream))
+        {
+                GUI_Error_HIG(QT_TR_NOOP("Cannot encode the frame"), NULL);
+                delete [] buffer;
+                delete codec;
+                return 0;
+        }
+        delete codec;
+        fd=fopen(filename,"wb");
+        if(!fd)
+        {
+                GUI_Error_HIG(QT_TR_NOOP("File error"),QT_TR_NOOP( "Cannot open \"%s\" for writing."), filename);
+                delete [] buffer;
+                return 0;
+        }
+        fwrite (buffer, bitstream.len, 1, fd);
+        fclose(fd);
+        delete [] buffer;
+        return 1;
+}
+/**
+      \fn LumaReduceBy2
+      \brief Very simple reduce by 2 both hz & vz for luma plane only.
+*/
+ uint8_t   ADMImage::LumaReduceBy2(void)
+{
+  uint8_t *ptr1,*ptr2,*outptr;
+  for(int y=0;y<_height>>1;y++)
+  {
+    
+    ptr1=data+y*_width*2;
+    ptr2=ptr1+_width;
+    outptr=data+(_width>>1)*y;
+    for(int x=0;x<_width>>1;x++)
+    {
+      uint32_t a,b,c,d;  
+          a=ptr1[0]+ptr1[1];
+          b=ptr2[0]+ptr2[1];
+          ptr1+=2;
+          ptr2+=2;
+          a=(a+b)>>2;
+          *outptr++=a;
+    }
+  }
+  return 1;
+  
+}
+ /**
+  *		\fn  copyLeftSideTo
+  * 	\brief Copy half the image (left part) to dest
+  * 	@param dest : Image to copy to 
+  */
+ uint8_t ADMImage::copyLeftSideTo(ADMImage *dest)
+ {
+		uint8_t *src,*dst;
+		uint32_t stride;
+ 
+			ADM_assert(_width==dest->_width);
+			ADM_assert(_height==dest->_height);
+		
+	 		dst=YPLANE(dest);
+		    src=YPLANE(this);
+		    stride=_width;
+		    for(uint32_t y=0;y<_height;y++)   // We do both u & v!
+		    {
+		        memcpy(dst,src,stride>>1);
+		        dst+=stride;
+		        src+=stride;
+		    }
+		        // U
+		    dst=UPLANE(dest);
+		    src=UPLANE(this);
+		    stride=_width>>1;
+		    uint32_t h2=_height>>1;
+		    for(uint32_t y=0;y<h2;y++)   // We do both u & v!
+		    {
+		        memcpy(dst,src,stride>>1);
+		        dst+=stride;
+		        src+=stride;
+		    }
+		        // V
+		    dst=VPLANE(dest);
+		    src=VPLANE(this);
+		    for(uint32_t y=0;y<h2;y++)   // We do both u & v!
+		    {
+		        memcpy(dst,src,stride>>1);
+		        dst+=stride;
+		        src+=stride;
+		    }
+		    return 1;
+ }
+//EOF

Copied: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/ADM_videoFilter.cpp (from rev 3979, branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_genvideo.cpp)
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_genvideo.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/ADM_videoFilter.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -0,0 +1,166 @@
+/***************************************************************************
+                          ADM_genvideo.cpp  -  description
+                             -------------------
+    begin                : Sun Apr 14 2002
+    copyright            : (C) 2002 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+
+
+#include "ADM_default.h"
+
+
+#include "ADM_editor/ADM_edit.hxx"
+#include "ADM_videoFilter.h"
+
+#include"ADM_video/ADM_vidCommonFilter.h"
+uint8_t AVDMGenericVideoStream::getPixel(int32_t x,int32_t y,uint8_t *data)
+{
+		if(x>(int32_t)_info.width)
+  			{
+            	x=2*_info.width-x;
+       	}
+       if(y>(int32_t)_info.height)
+  			{
+            	y=2*_info.height-y;
+       	}
+        if(   x<0)
+          x=-x;
+        if(   y<0)
+          y=-y;
+
+          return *(data+x+(y*_info.width));
+}
+
+uint32_t   AVDMGenericVideoStream::getPARWidth(void)
+{
+  if(_in)
+  {
+    return _in-> getPARWidth();
+  }
+  return 1;
+}
+/* If there is a father, retrieve PAR from him else assume it is 1:1 */
+uint32_t   AVDMGenericVideoStream::getPARHeight(void)
+{
+  if(_in)
+  {
+    return _in-> getPARHeight();
+  }
+  return 1;
+}
+
+
+uint8_t AVDMGenericVideoStream::getPixelU(int32_t x,int32_t y,uint8_t *data)
+{
+int32_t w=_info.width>>1;
+int32_t h=_info.height>>1;
+	       	
+			x=x>>1;
+			y=y>>1;
+    		
+		if(x>w)
+  			{
+            	x=2*w-x;
+       	}
+       if(y>h)
+  			{
+            	y=2*h-y;
+       	}
+        if(   x<0)
+          x=-x;
+        if(   y<0)
+          y=-y;
+
+          return *(data+x+(y*w));
+
+
+}
+uint8_t AVDMGenericVideoStream::setPixelU(uint8_t val,int32_t x,int32_t y,uint8_t *data)
+{
+int32_t w=_info.width>>1;
+int32_t h=_info.height>>1;
+	       	
+			x=x>>1;
+			y=y>>1;
+
+		if(x>w)
+  			{
+            	x=2*w-x;
+       	}
+       if(y>h)
+  			{
+            	y=2*h-y;
+       	}
+        if(   x<0)
+          x=-x;
+        if(   y<0)
+          y=-y;
+
+           *(data+x+(y*w))=val;
+           return 1;
+
+
+}
+uint8_t AVDMGenericVideoStream::unPackChroma(uint8_t *ssrc,uint8_t *ddst)
+{
+uint8_t *src,*dst,*srcu,*srcv; //,*dstu,*dstv;
+	src=ssrc;
+ 	dst=ddst;
+   	// unpack   luma
+				for(uint32_t l=_info.width*_info.height;l>0;l--)
+    				{
+                   	*dst++=*src++;
+                    	dst+=2;
+          			}
+         	// unpack   chroma
+         	
+	          srcu=ssrc+_info.width*_info.height;
+       		srcv=srcu+((_info.width*_info.height)>>2);
+         		dst=ddst+1;
+
+             for(int32_t y=0;y<(int32_t)(_info.height >>1);y++)
+           	{
+		         		for(int32_t x=0;x<(int32_t)(_info.width );x++)
+             			{
+                  		
+                 			*dst=*(dst+3*_info.width)=*srcu;
+                    		dst++;
+                 			*dst=*(dst+3*_info.width)=*srcv;
+                    		dst+=2;
+                    		if(x&1) srcu++;
+                    		if(x&1) srcv++;
+
+                  	}
+                   dst+=_info.width*3;
+               }
+          return 1;
+}
+
+BUILD_CREATE(res_create,AVDMVideoStreamResize);
+BUILD_CREATE(crop_create,AVDMVideoStreamCrop);
+BUILD_CREATE(bsmear_create,AVDMVideoStreamBSMear);
+/*AVDMGenericVideoStream *res_create(AVDMGenericVideoStream *in, CONFcouple *param)
+{
+ 	return new   AVDMVideoStreamResize(in,param);
+}
+
+AVDMGenericVideoStream *crop_create(AVDMGenericVideoStream *in, CONFcouple *param)
+{
+ 	return new   AVDMVideoStreamCrop(in,param);
+}; ;
+AVDMGenericVideoStream *bsmear_create(AVDMGenericVideoStream *in, CONFcouple *param)
+{
+ 	return new   AVDMVideoStreamBSMear(in,param);
+}; ;
+*/

Copied: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/ADM_videoFilterCache.cpp (from rev 3979, branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_cache.cpp)
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_cache.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/ADM_videoFilterCache.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -0,0 +1,150 @@
+//
+// C++ Implementation: ADM_cache
+//
+// Description: 
+//
+//
+// Author: mean <fixounet at free.fr>, (C) 2004
+//
+// Copyright: See COPYING file that comes with this distribution
+//
+//
+#include "ADM_default.h"
+
+#include "ADM_editor/ADM_edit.hxx"
+#include "ADM_videoFilter.h"
+
+
+#include "ADM_osSupport/ADM_debugID.h"
+#define MODULE_NAME MODULE_FILTER
+#include "ADM_osSupport/ADM_debug.h"
+
+
+VideoCache::VideoCache(uint32_t nb,AVDMGenericVideoStream *in)
+{
+uint32_t sz;
+	nbEntry=nb;
+	incoming=in;
+	memcpy(&info,in->getInfo(),sizeof(info));
+	// Ready buffers
+	entry=new vidCacheEntry[nbEntry];
+	sz=(info.width*info.height*3)>>1;
+	for(uint32_t i=0;i<nbEntry;i++)
+	{
+		entry[i].frameBuffer	=new ADMImage(info.width,info.height);	
+		entry[i].frameNum	=0xffff0000;
+		entry[i].frameLock	=0;
+		entry[i].lastUse	=0xffff0000;
+	}	
+	counter=0;
+}
+//_____________________________________________
+VideoCache::~ VideoCache()
+{
+	for(uint32_t i=0;i<nbEntry;i++)
+	{
+		delete  entry[i].frameBuffer;
+	}
+	delete [] entry;
+	
+}
+//_____________________________________________
+int32_t VideoCache::searchFrame( uint32_t frame)
+{
+	for(uint32_t i=0;i<nbEntry;i++)
+	{
+		if(entry[i].frameNum==frame) return i;
+	}
+	return -1;
+}
+//_____________________________________________
+int32_t 	 VideoCache::searchPtr( ADMImage *ptr)
+{
+	for(uint32_t i=0;i<nbEntry;i++)
+	{
+		if(entry[i].frameBuffer==ptr) return i;
+	}
+	return -1;
+}
+//_____________________________________________
+uint8_t  VideoCache::unlockAll(void)
+{
+	for(uint32_t i=0;i<nbEntry;i++)
+	{		
+		entry[i].frameLock=0;		
+	}
+	return 1;
+}
+//_____________________________________________
+uint8_t  VideoCache::unlock(ADMImage *frame)
+{
+int32_t k;
+	k=searchPtr(frame) ;
+	ADM_assert(k>=0);
+	entry[k].frameLock--;	
+	return 1;	
+}
+//_____________________________________________
+uint8_t  VideoCache::purge(void)
+{
+	for(uint32_t i=0;i<nbEntry;i++)
+	{		
+		entry[i].frameLock=0;
+		entry[i].frameNum=0xffff0000;	
+		entry[i].lastUse=0xffff0000;	
+	}
+	return 1;
+
+}
+//_____________________________________________
+ADMImage *VideoCache::getImage(uint32_t frame)
+{
+int32_t i;
+uint32_t tryz=nbEntry;
+uint32_t len,flags;
+ADMImage *ptr=NULL;
+
+	// Already there ?
+	if((i=searchFrame(frame))>=0)
+	{
+		aprintf("Cache : Cache hit %d buffer %d\n",frame,i);
+		entry[i].frameLock++;
+		entry[i].lastUse=counter;
+		counter++;
+		return entry[i].frameBuffer;	
+	}
+	// Else get it!
+	
+	// First elect a new buffer, we do it by 
+	// using a RLU scheme
+	
+	uint32_t deltamax=0,delta;
+	uint32_t target=0xfff;
+	aprintf("Cache : Cache miss %d\n",frame);
+	//for(uint32_t i=0;i<nbEntry;i++) printf("%d(%d) ",frameNum[i],frameLock[i]);printf("\n");
+	for(uint32_t i=0;i<nbEntry;i++)
+	{
+		if(entry[i].frameLock) continue; 	// don"t consider locked frames
+		
+		
+		delta=abs((int)counter-(int)entry[i].lastUse);
+		if(delta>deltamax)
+		{
+			deltamax=delta;
+			target=i;
+		}
+	}
+	ADM_assert(target!=0xfff);
+	// Target is the new cache we will use
+
+	ptr=entry[target].frameBuffer;
+	if(!incoming->getFrameNumberNoAlloc(frame,&len,ptr,&flags)) return NULL;
+	// Update LRU info
+	entry[target].frameLock++;
+	entry[target].frameNum=frame;
+	entry[target].lastUse=counter;
+	counter++;	
+	return ptr;
+	
+}
+

Added: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/CMakeLists.txt	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/CMakeLists.txt	2008-04-24 17:36:16 UTC (rev 3980)
@@ -0,0 +1,14 @@
+SET(ADM_coreImage_SRCS 
+	ADM_confCouple.cpp  
+        ADM_videoFilter.cpp  
+        ADM_videoFilterCache.cpp
+        ADM_image.cpp  
+        ADM_imageUtils.cpp
+        ADM_imageResizer.cpp
+        
+)
+
+ADD_LIBRARY(ADM_coreImage SHARED ${ADM_coreImage_SRCS})
+TARGET_LINK_LIBRARIES(ADM_coreImage ADM_core)
+
+INSTALL(TARGETS ADM_coreImage RUNTIME DESTINATION ${BIN_DIR} LIBRARY DESTINATION lib)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_coreToolkit.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_coreToolkit.h	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_coreToolkit.h	2008-04-24 17:36:16 UTC (rev 3980)
@@ -20,7 +20,6 @@
 #define ADM_COREUI_TOOLKIT__
 
 
-
 typedef enum 
 {
         ADM_LOG_NONE=0,

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edFrameType.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edFrameType.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edFrameType.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -26,8 +26,7 @@
 #include "prefs.h"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_codecs/ADM_codec.h"
-#include "ADM_video/ADM_genvideo.hxx"
-#include "ADM_filter/video_filters.h"
+#include "ADM_videoFilter.h"
 #include "avi_vars.h"
 #include "../ADM_userInterfaces/ADM_commonUI/DIA_working.h"
 #include "DIA_coreToolkit.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edIdentify.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edIdentify.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edIdentify.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -33,8 +33,8 @@
 #include "ADM_inputs/ADM_avsproxy/ADM_avsproxy.h"
 
 #include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
-#include "ADM_filter/video_filters.h"
+#include "ADM_videoFilter.h"
+
 #include "ADM_inputs/ADM_mpegdemuxer/dmx_identify.h"
 #include "ADM_assert.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edLoadSave.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edLoadSave.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edLoadSave.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -34,8 +34,9 @@
 
 #include "DIA_coreToolkit.h"
 #include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
-#include "ADM_filter/video_filters.h"
+#include "ADM_videoFilter.h"
+#include "ADM_videoFilter_internal.h"
+
 #include "ADM_audiofilter/audioeng_buildfilters.h"
 #include "ADM_encoder/adm_encConfig.h"
 #include "prefs.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edRender.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edRender.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edRender.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -28,8 +28,7 @@
 #include "fourcc.h"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_codecs/ADM_codec.h"
-#include "ADM_video/ADM_genvideo.hxx"
-#include "ADM_filter/video_filters.h"
+#include "ADM_videoFilter.h"
 #include "avi_vars.h"
 
 #include "ADM_osSupport/ADM_debugID.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edit.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edit.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edit.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -39,8 +39,7 @@
 #include "ADM_inputs/ADM_avsproxy/ADM_avsproxy.h"
 #include "DIA_coreToolkit.h"
 #include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
-#include "ADM_filter/video_filters.h"
+#include "ADM_videoFilter.h"
 //#include "ADM_dialog/DIA_working.h"
 #include "ADM_inputs/ADM_ogm/ADM_ogm.h"
 #include "ADM_inputs/ADM_mpegdemuxer/dmx_video.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_externalEncoder.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_externalEncoder.h	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_externalEncoder.h	2008-04-24 17:36:16 UTC (rev 3980)
@@ -18,7 +18,7 @@
 #define ADM_externalEncoder_H
 
 #include "ADM_codecs/ADM_codec.h"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_vidEncode.hxx"
 #include "adm_encoder.h"
 #include "ADM_pluginLoad.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -26,8 +26,10 @@
 
 #include "prefs.h"
 #include "ADM_vidEncode.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 
+
+
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME MODULE_ENCODER
 #include "ADM_osSupport/ADM_debug.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encCopy.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encCopy.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encCopy.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -30,7 +30,7 @@
 
 #include "ADM_encoder/ADM_vidEncode.hxx"
 
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_encoder/adm_encoder.h"
 #include "ADM_encoder/adm_encCopy.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encRequant.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encRequant.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encRequant.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -22,7 +22,7 @@
 
 #include "ADM_encoder/ADM_vidEncode.hxx"
 
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_encoder/adm_encoder.h"
 #include "ADM_encoder/adm_encRequant.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encXvid4.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encXvid4.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encXvid4.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -28,7 +28,7 @@
 
 #include "ADM_encoder/ADM_vidEncode.hxx"
 
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_codecs/ADM_xvid4.h"
 #include "ADM_encoder/adm_encoder.h"
 #include "ADM_encoder/adm_encXvid4.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encffmpeg.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encffmpeg.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encffmpeg.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -25,7 +25,7 @@
 #include "ADM_default.h"
 #include "ADM_encoder/ADM_vidEncode.hxx"
 
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_codecs/ADM_ffmpeg.h"
 #include "ADM_encoder/adm_encoder.h"
 #include "ADM_encoder/adm_encffmpeg.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encffmpeg1.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encffmpeg1.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encffmpeg1.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -32,7 +32,9 @@
 
 #include "ADM_encoder/ADM_vidEncode.hxx"
 
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
+
+
 //#include "ADM_codecs/ADM_divxEncode.h"
 #include "ADM_codecs/ADM_ffmpeg.h"
 #include "ADM_encoder/adm_encoder.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encmjpeg.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encmjpeg.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encmjpeg.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -34,7 +34,7 @@
 #include "ADM_encoder/ADM_vidEncode.hxx"
 
 
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_codecs/ADM_ffmpeg.h"
 
 #include "ADM_encoder/adm_encoder.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encmpeg2enc.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encmpeg2enc.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encmpeg2enc.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -32,12 +32,12 @@
 
 
 #include "ADM_encoder/ADM_vidEncode.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_encoder/adm_encoder.h"
 #include "ADM_encoder/adm_encConfig.h"
 
 #include "ADM_audiofilter/audioprocess.hxx"
-#include "ADM_filter/video_filters.h"
+
 #include "ADM_libraries/ADM_libmpeg2enc/ADM_mpeg2enc.h"
 #include "ADM_audiofilter/audioeng_buildfilters.h"
 #include "prefs.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encoder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encoder.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encoder.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -32,7 +32,7 @@
 
 #include "ADM_encoder/ADM_vidEncode.hxx"
 
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_encoder/adm_encoder.h"
 
 #ifdef USE_DIVX

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encoder.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encoder.h	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encoder.h	2008-04-24 17:36:16 UTC (rev 3980)
@@ -26,6 +26,7 @@
 #define __ADM_encoder__
 #include "ADM_image.h"
 #include "ADM_bitstream.h"
+#include "ADM_videoFilter.h"
 typedef enum
 {
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encx264.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encx264.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encx264.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -30,7 +30,7 @@
 
 #include "ADM_encoder/ADM_vidEncode.hxx"
 
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 
 #include "ADM_encoder/adm_encoder.h"
 #include "ADM_encoder/adm_encx264.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encyv12.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encyv12.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encyv12.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -25,7 +25,7 @@
 
 #include "ADM_encoder/ADM_vidEncode.hxx"
 
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_encoder/adm_encoder.h"
 #include "ADM_encoder/adm_encyv12.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/ADM_vidDummyFilter.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/ADM_vidDummyFilter.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/ADM_vidDummyFilter.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -15,20 +15,14 @@
  *                                                                         *
  ***************************************************************************/
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
+#include "config.h"
 
 #include "ADM_default.h"
-#include "fourcc.h"
-#include "avi_vars.h"
 
-
-#include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_videoFilter/ADM_vidFlipV.h"
-#include "ADM_filter/video_filters.h"
 
+
 //#define REDUCED
 //adm_fast_memcpy myAdmMemcpy=memcpy;
 #undef memcpy

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -26,9 +26,9 @@
 
 
 #include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_video/ADM_videoNull.h"
-#include "ADM_filter/video_filters.h"
+#include "ADM_videoFilter_internal.h"
 #include "ADM_video/ADM_vidPartial.h"
 #include "ADM_userInterfaces/ADM_commonUI/GUI_render.h"
 
@@ -131,7 +131,7 @@
 {
 //    printf ("nb_video_filter = %d, max %d, name = %s\n", nb_video_filter, (MAX_FILTER-1), name);
         allfilters.push_back (FILTER_ENTRY (name, create, tag, viewable,
-                                            filtername, desc, create_from_script));
+                                            filtername, VF_MISC,desc, create_from_script));
 
         if(viewable==1)
 	{

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter_declaration.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter_declaration.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter_declaration.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -18,23 +18,14 @@
  *                                                                         *
  ***************************************************************************/
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-
-#include "ADM_assert.h"
-
 #include "config.h"
-#include "fourcc.h"
+#include "ADM_default.h"
 
-#include "avi_vars.h"
 #ifdef HAVE_ENCODER
 
 
-#include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
-#include "ADM_filter/video_filters.h"
-
+#include "ADM_videoFilter.h"
+#include "ADM_videoFilter_internal.h"
 #define FILTERDEC(x) extern   AVDMGenericVideoStream *x(AVDMGenericVideoStream *in, CONFcouple *param)
 #define FILTERDECX(x) extern   AVDMGenericVideoStream *x(AVDMGenericVideoStream *in, int n,Arg *args)
 #define REGISTER(e,a,g,b,c,d) {FILTERDEC(d);registerFilterEx(a,b,c,d,e,NULL,NULL);}

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter_dylib.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter_dylib.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter_dylib.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -34,9 +34,10 @@
 
 #include "DIA_coreToolkit.h"
 #include "DIA_fileSel.h"
-#include "ADM_video/ADM_genvideo.hxx"
-#include "ADM_filter/video_filters.h"
+#include "ADM_videoFilter.h"
 
+#include "ADM_videoFilter_internal.h"
+
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME MODULE_PREVIEW
 #include "ADM_osSupport/ADM_debug.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter_saveload.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter_saveload.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter_saveload.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -30,11 +30,10 @@
 #include "ADM_assert.h"
 
 #include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_video/ADM_videoNull.h"
-#include "ADM_filter/video_filters.h"
+#include "ADM_videoFilter_internal.h"
 #include "ADM_video/ADM_vidPartial.h"
-#include "ADM_video/ADM_confCouple.h"
 #include "avi_vars.h"
 // exported vars
 extern uint32_t nb_active_filter;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/vidVCD.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/vidVCD.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/vidVCD.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -39,8 +39,8 @@
 
 #include "prototype.h"
 #include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
-#include "ADM_filter/video_filters.h"
+#include "ADM_videoFilter.h"
+#include "ADM_videoFilter_internal.h"
 #include "ADM_filter/vidVCD.h"
 #include "prefs.h"
 #include "ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.h"

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/video_filters.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/video_filters.h	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/video_filters.h	2008-04-24 17:36:16 UTC (rev 3980)
@@ -1,209 +0,0 @@
-/***************************************************************************
-                          video_filters.h  -  description
-                             -------------------
-    begin                : Wed Mar 27 2002
-    copyright            : (C) 2002 by mean
-    email                : fixounet at free.fr
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
- #ifndef __VIDEO_FILTERS__
- #define  __VIDEO_FILTERS__
-
-#include "ADM_script/adm_scanner.h"
-typedef enum
-{
-                VF_INVALID=0,
-                VF_RESIZE=1,
-                VF_CROP,
-                VF_TELECIDE,
-                VF_BLACKEN,
-                VF_SHARPEN,
-                VF_MEAN,
-                VF_MEDIAN,
-                VF_GAUSSIAN,
-                VF_SMOOTHCLEAN,
-                VF_DEINTERLACE,
-                VF_ADDBORDER,
-                VF_PALSHIFT,
-                VF_SWAPUV,
-                VF_CONTRAST,
-                VF_LUMA,
-                VF_CHROMAU,
-                VF_CHROMAV,
-                VF_STABILIZE,
-                VF_FLIP,
-                VF_DENOISE,
-                VF_SUBTILE,
-                VF_LARGEMEDIAN,
-                VF_FLUXSMOOTH,
-                VF_SALT,
-                VF_PARTIAL          ,
-                VF_VLADSMOOTH,
-                VF_ROTATE,
-                VF_DROPOUT,
-                VF_SWAPFIELDS,
-                VF_KEEPODD,
-                VF_KEEPEVEN,
-                VF_SEPARATEFIELDS,
-                VF_MERGEFIELDS,
-                VF_CHROMASHIFT,
-                VF_SMARTSWAPFIELDS,
-                VF_MPLAYERRESIZE,
-                VF_IVTC,
-                VF_PULLDOWN,
-                VF_MPLHQD3D,
-                VF_MPLLQD3D,
-                VF_LAVDEINT,
-                VF_MPDETC,
-                VF_KRNDEINT,
-                VF_FORCEDPP,
-                VF_SOFTEN,
-                VF_DECOMB,
-                VF_DECIMATE,
-                VF_MSMOOTH,
-                VF_STACKFIELD,
-                VF_HZSTACKFIELD,
-                VF_WHIRL,
-                VF_EQUALIZER,
-                VF_VOBSUB,
-                VF_CHFPS,
-                VF_RESAMPLE_FPS,
-                VF_LAVPP_DEINT,
-                VF_UNSTACK_FIELD,
-                VF_HUE,
-                VF_EQ2,
-                VF_DGBOB,
-                VF_MSHARPEN,
-                VF_ASHARP,
-                VF_CNR2,
-                VF_DELTA,
-                VF_UNBLEND,
-                VF_HARDIVTC,
-                VF_MOSAIC,
-                VF_BLENDREMOVAL,
-                VF_TDEINT,
-                VF_MPDELOGO,
-                VF_COLOR_YUV,
-                VF_ANIMATED,
-                VF_MCDEINT,
-                VF_REVERSE,
-                VF_FADE,
-                VF_ASS,
-                VF_YADIF,
-                VF_DVBSUB,
-                VF_LOGO,
-                VF_COMPUTEAVERAGE,
-                VF_ERASER,
-                VF_SWISSARMYKNIFE,
-                VF_THRESHOLD,
-                VF_PARTICLELIST,
-                VF_DUMMY,
-                VF_COUNT,
-                MAX_FILTER = VF_COUNT - 1,
-                VF_EXTERNAL_START=0xF0000000
-          }VF_FILTERS;
-
-typedef AVDMGenericVideoStream *(ADM_createT) (AVDMGenericVideoStream *in, CONFcouple *);
-typedef AVDMGenericVideoStream *(ADM_create_from_scriptT) (AVDMGenericVideoStream *in, int n,Arg *args);
-
-         
-   struct FILTER_ENTRY
-   {
-        const char        *name;
-        ADM_createT       *create;
-        void              (*destroy)( AVDMGenericVideoStream *old); /* Maybe needed ...*/
-        VF_FILTERS        tag;
-        uint8_t           viewable;
-        const char        *filtername;
-        const char        *description;
-        ADM_create_from_scriptT *create_from_script;
-
-       FILTER_ENTRY (const char * name, ADM_createT * create, VF_FILTERS tag,
-                     uint8_t viewable, const char * filtername,
-                     const char * description = 0,
-                     ADM_create_from_scriptT * create_from_script = 0)
-           : name (name),
-             create (create),
-             destroy (0),
-             tag (tag),
-             viewable (viewable),
-             filtername (filtername),
-             description (description),
-             create_from_script (create_from_script)
-       {
-       }
-
-       FILTER_ENTRY ()
-           : name (0),
-             create (0),
-             destroy (0),
-             tag (VF_INVALID),
-             viewable (0),
-             filtername (0),
-             description (0),
-             create_from_script (0)
-       {
-       }
-   };
- 	
-   typedef struct
-   {
-          VF_FILTERS              tag;
-          AVDMGenericVideoStream *filter;
-          CONFcouple             *conf;
-   }FILTER;
-
-   typedef struct
-   {
-            uint32_t    nb;
-            const char  *param[25];
-   }FILTER_PARAM;
-   
-AVDMGenericVideoStream *getLastVideoFilter( uint32_t frameStart, uint32_t nbFrame);
-AVDMGenericVideoStream *getLastVideoFilter( void );
-AVDMGenericVideoStream *getFirstVideoFilter( uint32_t frameStart, uint32_t nbFrame);
-AVDMGenericVideoStream *getFirstVideoFilter( void);
-AVDMGenericVideoStream *getFirstCurrentVideoFilter( void);
-FILTER * getCurrentVideoFilterList (uint32_t * count);
-const FILTER_ENTRY * filterGetEntryFromTag (VF_FILTERS tag);
-const char * filterGetNameFromTag(VF_FILTERS tag);
-
-  void	filterSetPostProc( void );
-  
-#ifdef USE_LIBXML2
-void filterSaveXml(char *name);
-void filterSaveXml(char *name,uint8_t silent);
-void filterLoadXml(char *name);
-int  filterLoadXml(char *name,uint8_t silent);
-#endif
- void filterSave(char *name);
- void filterLoad(char *name);
- int filterLoad(char *name,uint8_t silent);
- void filterSave(char *name,uint8_t silent);
-CONFcouple *filterBuildCouple(FILTER_PARAM *param,uint32_t n,Arg *args);
-void filterSaveScriptJS(FILE *f);
-
-void registerFilter(const char *name,VF_FILTERS tag,uint8_t viewable,
-                    ADM_createT  *create,
-                    const char *fname);
-                    
-void registerFilterEx(const char *name,VF_FILTERS tag,uint8_t viewable,
-                ADM_createT  *create,
-                const char *filtername,
-                ADM_create_from_scriptT *create_from_script,
-                const char *description);
-                
-void 		filterListAll( void );
-VF_FILTERS 	filterGetTagFromName(char *inname);
-uint8_t 	filterAddScript(VF_FILTERS tags,uint32_t n,Arg *args);
-//AVDMGenericVideoStream *filterCreateFromTag(VF_FILTERS tag,uint8_t *conf, AVDMGenericVideoStream *in) ;
-
- #endif

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/avcodec.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/avcodec.h	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/avcodec.h	2008-04-24 17:36:16 UTC (rev 3980)
@@ -26,7 +26,7 @@
  * external API header
  */
 
-#include "config.h" // MEANX
+#include "ADM_coreConfig.h" // MEANX
 #include "../ADM_lavutil/avutil.h" // MEANX
 
 #define LIBAVCODEC_VERSION_MAJOR 51

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mthread.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mthread.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mthread.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -19,7 +19,7 @@
 
 
 #include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_encoder/ADM_vidEncode.hxx"
 #include "ADM_encoder/adm_encoder.h"
 #include "ADM_userInterfaces/ADM_commonUI/DIA_encoding.h"

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_image.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_image.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_image.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -1,393 +0,0 @@
-/***************************************************************************
-    copyright            : (C) 2003-2005 by mean
-    email                : fixounet at free.fr
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#include "config.h"
-
-#include <stdlib.h>
-#include <stdio.h>
-#include <string.h>
-#include "ADM_assert.h"
-#include "ADM_default.h"
-
-#include "ADM_image.h"
-
-//#include "ADM_assert.h"
-void ADMImage_stat( void );
-
-static uint32_t imgMaxMem=0;
-static uint32_t imgCurMem=0;
-static uint32_t imgMaxNb=0;
-static uint32_t imgCurNb=0;
-
-void ADMImage_stat( void )
-{
-	printf("\nImages stat:\n");
-	printf("___________\n");
-	printf("Max memory consumed (MB)     : %lu\n",imgMaxMem>>10);
-	printf("Current memory consumed (MB) : %lu\n",imgCurMem>>10);
-	printf("Max image used               : %lu\n",imgMaxNb);
-	printf("Cur image used               : %lu\n",imgCurNb);
-
-}
-//
-//	Allocate and initialize everything to default values
-//
-void    ADMImage::commonInit(uint32_t w,uint32_t h)
-{
-        _width=w;        
-        _height=h;
-        quant=NULL;
-        _qStride=0;
-        _Qp=2;
-        flags=0;
-        _qSize=0;
-        _aspect=ADM_ASPECT_1_1;
-        
-        imgCurNb++;
-        _planes[0]=_planes[1]=_planes[2]=NULL;
-        _noPicture=0;
-        _colorspace=ADM_COLOR_YV12;
-
-}
-ADMImage::ADMImage(uint32_t width, uint32_t height)
-{
-        commonInit(width,height);
-        _isRef=0;
-        data=new uint8_t [ ((width+15)&0xffffff0)*((height+15)&0xfffffff0)*2];
-        ADM_assert(data);
-        imgCurMem+=(width*height*3)>>1;
-        if(imgCurMem>imgMaxMem) imgMaxMem=imgCurMem;
-        if(imgCurNb>imgMaxNb) imgMaxNb=imgCurNb;
-
-};
-// Create a fake image with external datas
-ADMImage::ADMImage(uint32_t width, uint32_t height,uint32_t dummy)
-{       
-        commonInit(width,height); 
-        _isRef=1;
-        data=NULL;                
-                
-};
-//
-//	Deallocate
-//
-ADMImage::~ADMImage()
-{
-        if(!_isRef)
-        {
-	       if(quant) delete [] quant;
-	       quant=NULL;
-	       if(data) delete [] data;
-	       data=NULL;
-               imgCurMem-=(_width*_height*3)>>1;
-	}
-	imgCurNb--;
-	
-}
-
-//
-//	Duplicate
-//
-uint8_t ADMImage::duplicateMacro(ADMImage *src,uint32_t swap)
-{
-        // Sanity check
-        ADM_assert(src->_width==_width);
-        ADM_assert(src->_height==_height);
-
-        ADM_assert(!_isRef); // could not duplicate to a linked data image
-
-        // cleanup if needed
-        if(quant) delete [] quant;
-        quant=NULL;
- 
-       _qStride=0;      
-        _qSize=0;
-        
-        copyInfo(src);
-        if(!src->_isRef)
-        {
-               memcpy(YPLANE(this),YPLANE(src),_width*_height);
-                if(swap)
-                {
-                        memcpy(UPLANE(this),VPLANE(src),(_width*_height)>>2);
-                        memcpy(VPLANE(this),UPLANE(src),(_width*_height)>>2);
-                }
-                else
-                {
-                        memcpy(UPLANE(this),UPLANE(src),(_width*_height)>>2);
-                        memcpy(VPLANE(this),VPLANE(src),(_width*_height)>>2);
-                }
-        }
-        else
-        {
-                if(src->_noPicture)
-                {
-                        // no pic available, blacken it                        
-                        memset(YPLANE(this),0,_width*_height);
-                        memset(UPLANE(this),128,(_width*_height)>>2);
-                        memset(VPLANE(this),128,(_width*_height)>>2);
-                        return 1;
-                        
-                }
-               // The source is a reference
-                // We have to use the alternate informations
-                // to copy & compact at the same time
-                //
-
-                ADM_assert(src->_planeStride[0]);
-                ADM_assert(src->_planeStride[1]);
-                ADM_assert(src->_planeStride[2]);
-
-                ADM_assert(src->_planes[0]);
-                ADM_assert(src->_planes[1]);
-                ADM_assert(src->_planes[2]);
-
-                uint8_t *in,*out;
-                uint32_t w,h,stride;
-
-                w=src->_width;
-                h=src->_height;
-                stride=src->_planeStride[0];
-                out=YPLANE(this);
-                in=src->_planes[0];
-#define PLANE_CPY(h) \
-                for(uint32_t y=0;y<h;y++)  \
-                { \
-                        memcpy(out,in,w); \
-                        in+=stride;       \
-                        out+=w;           \
-                } 
-                PLANE_CPY(h);
-
-                w>>=1;
-                h>>=1;
-                in=src->_planes[1];
-                if(swap)
-                        out=VPLANE(this);
-                else
-                        out=UPLANE(this);
-                stride=src->_planeStride[1];
-                PLANE_CPY(h);
-        
-                in=src->_planes[2];
-                if(swap)
-                        out=UPLANE(this);
-                else
-                        out=VPLANE(this);
-                stride=src->_planeStride[2];
-                PLANE_CPY(h);
-
-
-        }
-        return 1;
-}
-uint8_t ADMImage::duplicate(ADMImage *src)
-{
-	return duplicateMacro(src,0);
-}
-uint8_t ADMImage::duplicateSwapUV(ADMImage *src)
-{
-        return duplicateMacro(src,0);
-}
-uint8_t ADMImage::pack(uint8_t invertChroma)
-{
-int u=1,v=2;
-    if(invertChroma) {u=2;v=1;}
-    ADM_assert(_planeStride[0]>=_width);
-    // Pack luma
-    uint8_t *src,*dest;
-
-    src=_planes[0];
-    dest=YPLANE(this);
-    BitBlit(dest,_width,src,_planeStride[0],_width,_height);
-
-    src=_planes[u];
-    dest=UPLANE(this);
-    BitBlit(dest,_width>>1,src,_planeStride[u],_width>>1,_height>>1);
-
-    src=_planes[v];
-    dest=VPLANE(this);
-    BitBlit(dest,_width>>1,src,_planeStride[v],_width>>1,_height>>1);
-
-    return 1;
-}
-uint8_t ADMImage::duplicateFull(ADMImage *src)
-{
-	// Sanity check
-	ADM_assert(src->_width==_width);
-	ADM_assert(src->_height==_height);
-	
-	
-	copyInfo(src);
-        ADM_assert(!_isRef);
-
-	memcpy(YPLANE(this),YPLANE(src),_width*_height);
-	memcpy(UPLANE(this),UPLANE(src),(_width*_height)>>2);
-	memcpy(VPLANE(this),VPLANE(src),(_width*_height)>>2);
-	copyQuantInfo(src);
-	
-	return 1;
-}
-uint8_t ADMImage::copyInfo(ADMImage *src)
-{
-	_Qp=src->_Qp;
-	flags=src->flags;
-	_aspect=src->_aspect;
-}
-//
-//	By design the reallocation of quant should happen at startup
-//	but not in processing itself (reuse already allocated quant)
-//	It may seem shoddy, but it adds flexibility
-//
-uint8_t ADMImage::copyQuantInfo(ADMImage *src)
-{
-	if(!src->_qStride || !src->_qSize)  // No (usable) quant
-	{
-		_qStride=0;
-		return 1;
-	}
-	// Reuse Quant memory ?
-	if(!quant)
-	{	// need a new quant
-		quant=new uint8_t[src->_qSize];
-		_qSize=src->_qSize;
-	
-	}
-	
-	// Same size ?
-	ADM_assert(_qSize==src->_qSize);		
-	_qStride=src->_qStride;		
-	memcpy(quant,src->quant,_qSize);	
-	
-	return 1;
-}
-uint8_t ADMImage::blacken(void)
-{
-        memset(YPLANE(this),0,_width*_height);
-        memset(UPLANE(this),128,(_width*_height)>>2);
-        memset(VPLANE(this),128,(_width*_height)>>2);
-        return 1;
-
-}
-/*
-    Copy "this" image into dest image at x,y position
-
-*/
-uint8_t ADMImage::copyTo(ADMImage *dest, uint32_t x,uint32_t y)
-{
-      
-    uint32_t box_w=_width, box_h=_height;
-    // Clip if needed
-    if(y>dest->_height)
-    {
-        printf("Y out : %u %u\n",y,dest->_height);
-         return 1;
-    }
-    if(x>dest->_width) 
-    {
-        printf("X out : %u %u\n",x,dest->_width);
-         return 1;
-    }
-    
-    if(x+box_w>dest->_width) box_w=dest->_width-x;
-    if(y+box_h>dest->_height) box_h=dest->_height-y;
-
-    // do y
-    BitBlit(YPLANE(dest)+x+dest->_width*y,dest->_width,
-            data,_width,
-            box_w,box_h);
-    // Do u
-    BitBlit(UPLANE(dest)+x/2+(dest->_width*y)/4,dest->_width/2,
-            UPLANE(this),_width>>1,
-            box_w>>1,box_h>>1);
-
-    BitBlit(VPLANE(dest)+x/2+(dest->_width*y)/4,dest->_width/2,
-            VPLANE(this),_width>>1,
-            box_w>>1,box_h>>1);
-
-
-    return 1;
-
-}
-/*
-    \fn    copyToAlpha
-    \brief Copy "this" image into dest image at x,y position using alpha alpha
-    @param alpha alpha value (0--255)
-
-*/
-uint8_t ADMImage::copyToAlpha(ADMImage *dest, uint32_t x,uint32_t y,uint32_t alpha)
-{
-      
-    uint32_t box_w=_width, box_h=_height;
-    // Clip if needed
-    if(y>dest->_height)
-    {
-        printf("Y out : %u %u\n",y,dest->_height);
-         return 1;
-    }
-    if(x>dest->_width) 
-    {
-        printf("X out : %u %u\n",x,dest->_width);
-         return 1;
-    }
-    
-    if(x+box_w>dest->_width) box_w=dest->_width-x;
-    if(y+box_h>dest->_height) box_h=dest->_height-y;
-
-    // do y
-    BitBlitAlpha(YPLANE(dest)+x+dest->_width*y,dest->_width,         data,_width,            box_w,box_h,alpha);
-    // Do u
-    BitBlitAlpha(UPLANE(dest)+x/2+(dest->_width*y)/4,dest->_width/2,   UPLANE(this),_width>>1,  box_w>>1,box_h>>1,alpha);
-    // and V
-    BitBlitAlpha(VPLANE(dest)+x/2+(dest->_width*y)/4,dest->_width/2, VPLANE(this),_width>>1, box_w>>1,box_h>>1,alpha);
-
-
-    return 1;
-
-}
-/**
- * 		\fn BitBlitAlpha
- * 		\brief Alpha blit from dst to src
- */
-uint8_t BitBlitAlpha(uint8_t *dst, uint32_t pitchDst,uint8_t *src,uint32_t pitchSrc,
-		uint32_t width, uint32_t height,uint32_t alpha)
-{
-    
-    for(int y=0;y<height;y++)
-    {
-    	for(int x=0;x<width;x++)
-    	{
-    		uint32_t s=src[x],d=dst[x];
-    		
-    		d=s*alpha+(255-alpha)*d;
-    		d>>=8;
-    		dst[x]=d;
-    	}
-        src+=pitchSrc;
-        dst+=pitchDst;   
-    }
-    return 1;
-}
-
-uint8_t BitBlit(uint8_t *dst, uint32_t pitchDst,uint8_t *src,uint32_t pitchSrc,uint32_t width, uint32_t height)
-{
-    
-    for(int y=0;y<height;y++)
-    {
-        memcpy(dst,src,width);
-        src+=pitchSrc;
-        dst+=pitchDst;   
-    }
-    return 1;
-}
-//EOF

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_image.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_image.h	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_image.h	2008-04-24 17:36:16 UTC (rev 3980)
@@ -1,189 +0,0 @@
-//
-// C++ Interface: %{MODULE}
-//
-// Description: 
-//
-//
-// Author: %{AUTHOR} <%{EMAIL}>, (C) %{YEAR}
-//
-// Copyright: See COPYING file that comes with this distribution
-//
-//
-//	This is the base time for image exchanged between codec/filters/...
-//
-//	We (optionnally) can carry extra informations
-//		- aspect ratio
-//		- frame type
-//		- quantizer for each macroblock (16x16 pixels)
-//	For the latter 3 infos are used
-//		quant which leads to the int8 quant array
-//		qstride = stride of array. Usually width+15)/16. 0 MEANS NOT USABLE
-//		qsize = size of the array (needed to be able to copy it)
-//
-#ifndef ADM_IMAGE
-#define ADM_IMAGE
-#include "ADM_assert.h"
-#include "ADM_colorspace/ADM_rgb.h"
-
-typedef enum 
-{
-	ADM_ASPECT_4_3=1,
-	ADM_ASPECT_16_9,
-	ADM_ASPECT_1_1
-} ADM_ASPECT;
-// Avisynth compatibility layer
-
-//#define vi.num_frames _info.nb_frames
-//#define vi.IsYV12()   1
-#define GetReadPtr GetWritePtr
-#define GetRowSize GetPitch
-
-typedef enum 
-{
-        PLANAR_Y=1,
-        PLANAR_U=2,
-        PLANAR_V=3
-        
-} ADM_PLANE;
-typedef enum 
-{
-		ADM_IMAGE_UNKNOWN=0,
-        ADM_IMAGE_JPG=1,
-        ADM_IMAGE_PNG=2,
-        ADM_IMAGE_BMP=3,
-        ADM_IMAGE_BMP2=4
-        
-} ADM_IMAGE_TYPE;
-class ADMImage
-{
-public:
-        uint32_t        demuxerFrameno;
-  
-        //*****************
-        uint8_t		*data;		/// Pointer to actual image data
-        uint32_t	_width;		/// Width of image
-        uint32_t	_height;	/// Height of image
-        uint32_t	_qStride;	/// Stride of Q infos, usually about width/8 <- ***if 0 means no quant usable***
-        uint8_t		*quant;		/// Byte representing quantize used for this block
-        uint32_t	_Qp;		/// Average quantizer for this image, Default=2
-        uint32_t	_qSize;		/// Size of the *quant field
-        ADM_ASPECT	_aspect;	/// Aspect ratio
-        uint32_t	flags;		/// Flags for this image (AVI_KEY_FRAME/AVI_B_FRAME)
-
-// This 3 fields are only used to convery container (reference to other datas)
-// Between codec & editor
-	uint8_t         _isRef;         /// If True means the datas are just a link to data we don't own!
-        ADM_colorspace  _colorspace;    /// Colorspace we are moving, default is YV12
-        uint8_t         _noPicture;     /// No picture to display
-
-// End of section dedicated to codec/editor transfer
-
-        void            commonInit(uint32_t w,uint32_t h); /// sub constructor
-        
-        uint32_t        GetPitch(ADM_PLANE plane)
-                                {
-                                        switch(plane)
-                                        {
-                                                case PLANAR_Y:return _width;break;
-                                                case PLANAR_U:
-                                                case PLANAR_V:return _width>>1;break;
-                                                default: ADM_assert(0);
-                                        }
-                                };
-        uint8_t         *GetWritePtr(ADM_PLANE plane)
-                        {       
-                                uint32_t plan=_width*_height;
-                                switch(plane)
-                                        {
-                                                case PLANAR_Y:return data;break;
-                                                case PLANAR_U:return data+plan;break;
-                                                case PLANAR_V:return data+((plan*5)>>2);break;
-                                                default: ADM_assert(0);
-                                        }
-                        };
-   
-        uint32_t GetHeight(ADM_PLANE plane)
-                                {
-                                        switch(plane)
-                                        {
-                                                case PLANAR_Y:return _height;break;
-                                                case PLANAR_U:
-                                                case PLANAR_V:return _height>>1;break;
-                                                default: ADM_assert(0);
-                                        }
-                                };
-        uint8_t duplicateMacro(ADMImage *src,uint32_t swap);       /// copy an image to ourself, including info
-public:
-
-        uint8_t         *_planes[3];     /// In case of linked data store y/u/v pointers
-        uint32_t        _planeStride[3]; /// Same story
-
-		ADMImage(uint32_t width, uint32_t height);
-                ADMImage(uint32_t width, uint32_t height,uint32_t dummy); /// To create linked datas image        
-
-                uint8_t   LumaReduceBy2(void);
-		~ADMImage();
-        uint8_t getWidthHeight(uint32_t *w,uint32_t *h)
-                    {
-                          *w=_width;
-                          *h=_height;
-                          return 1;
-                    }
-	uint8_t duplicate(ADMImage *src);	/// copy an image to ourself, including info
-        uint8_t duplicateSwapUV(ADMImage *src); /// copy an image to ourself, including info
-	uint8_t duplicateFull(ADMImage *src);	/// copy an image to ourself, including info
-	uint8_t copyInfo(ADMImage *src);	/// copy all the flags, not the data themselves
-	uint8_t copyQuantInfo(ADMImage *src);	/// copy quant table if any
-        uint8_t isRef(void) { return _isRef;};
-        uint8_t setLinkInfos(uint8_t *y,        /// To fill in infos for linked image
-                        uint8_t *u,uint8_t *v,uint32_t stridey,
-                        uint32_t strideu, uint32_t stridev);
-        uint8_t merge(ADMImage *src1,ADMImage *src2);
-        uint8_t substract(ADMImage *src1,ADMImage *src2);
-        uint8_t blacken(void);
-        uint8_t copyTo(ADMImage *target, uint32_t x, uint32_t y);
-        uint8_t copyToAlpha(ADMImage *target, uint32_t x, uint32_t y,uint32_t alpha);
-        uint8_t pack(uint8_t invertChroma);     /// Transfer data from planes to regular packed space
-        uint8_t copyLeftSideTo(ADMImage *dest);
-        /* Some utilitarian functions */
-        uint8_t  saveAsBmp(const char *filename);
-        uint8_t  saveAsJpg(const char *filename);
-        
-static uint32_t lumaDiff(ADMImage *src1,ADMImage *src2,uint32_t noise);
-};
-void drawString(ADMImage *dst, int x, int y, const char *s) ;
-#define YPLANE(x) ((x)->data)
-#define UPLANE(x) ((x)->data+((x)->_width*(x)->_height))
-#define VPLANE(x) ((x)->data+(5*((x)->_width*(x)->_height)>>2))
-
-//
-//  Simple image resizer
-//
-class ADMImageResizer
-{
-	private:
-		void    *_context;
-		uint32_t orgFormat, destFormat;
-		uint32_t orgWidth, orgHeight;
-		uint32_t destWidth, destHeight;
-
-		void init(uint32_t ow, uint32_t oh, uint32_t dw, uint32_t dh, int srcFormat, int dstFormat);
-		void getYuvPlanes(uint8_t *source, uint32_t width, uint32_t height, uint8_t*& yPlane, uint8_t*& uPlane, uint8_t*& vPlane);
-	public:
-		ADMImageResizer(uint32_t ow,uint32_t oh, uint32_t dw, uint32_t dh);
-		ADMImageResizer(uint32_t ow, uint32_t oh, uint32_t dw, uint32_t dh, int srcFormat, int dstFormat);
-		~ADMImageResizer();
-		
-		uint8_t resize(ADMImage *src, ADMImage *dest);
-		uint8_t resize(uint8_t *src, ADMImage *dest);
-		uint8_t resize(ADMImage *src, uint8_t *dest);
-		uint8_t resize(uint8_t *src, uint8_t *dest);
-};
-
-// Misc utilities
-uint8_t BitBlit(uint8_t *dst, uint32_t pitchDest,uint8_t *src,uint32_t pitchSrc,uint32_t width, uint32_t height);
-uint8_t BitBlitAlpha(uint8_t *dst, uint32_t pitchDst,uint8_t *src,uint32_t pitchSrc,uint32_t width, uint32_t height,uint32_t alpha);
-
-ADMImage *createImageFromFile(const char *filename);
-ADM_IMAGE_TYPE ADM_identidyImageFile(const char *filename,uint32_t *w,uint32_t *h);
-#endif

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_imageResizer.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_imageResizer.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_imageResizer.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -1,154 +0,0 @@
-/***************************************************************************
-    copyright            : (C) 2003-2005 by mean
-    email                : fixounet at free.fr
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#include "ADM_default.h"
-
-#include "ADM_image.h"
-
-extern "C" {
-#include "ADM_libraries/ADM_ffmpeg/ADM_lavcodec/avcodec.h"
-#include "ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale.h"
-}
-
-
-ADMImageResizer::ADMImageResizer(uint32_t ow, uint32_t oh, uint32_t dw, uint32_t dh)
-{
-	init(ow, oh, dw, dh, PIX_FMT_YUV420P, PIX_FMT_YUV420P);
-}
-
-ADMImageResizer::ADMImageResizer(uint32_t ow, uint32_t oh, uint32_t dw, uint32_t dh, int srcFormat, int destFormat)
-{
-	init(ow, oh, dw, dh, srcFormat, destFormat);
-}
-
-ADMImageResizer::~ADMImageResizer()
-{
-   if (_context)
-   {
-		sws_freeContext((SwsContext*)_context);
-		_context = NULL;
-   }
-}
-
-void ADMImageResizer::init(uint32_t ow, uint32_t oh, uint32_t dw, uint32_t dh, int srcFormat, int dstFormat)
-{
-    orgWidth = ow;
-    orgHeight = oh;
-    destWidth = dw;
-    destHeight = dh;
-
-	orgFormat = srcFormat;
-	destFormat = dstFormat;
-
-	int flags = SWS_SPLINE;
-
-#ifdef ADM_CPU_X86
-	#define ADD(x, y) if (CpuCaps::has##x()) flags |= SWS_CPU_CAPS_##y;
-
-	ADD(MMX,MMX);
-	ADD(3DNOW,3DNOW);
-	ADD(MMXEXT,MMX2);
-#endif
-
-#ifdef ADM_CPU_ALTIVEC
-    flags |= SWS_CPU_CAPS_ALTIVEC;
-#endif
-
-	_context = (void *)sws_getContext(orgWidth, orgHeight,
-									  srcFormat,
-									  destWidth, destHeight,
-									  destFormat,
-									  flags, NULL, NULL,NULL);
-}
-
-uint8_t ADMImageResizer::resize(ADMImage *source, ADMImage *dest)
-{
-    ADM_assert(source->_width == orgWidth);
-    ADM_assert(source->_height == orgHeight);
-    ADM_assert(dest->_width == destWidth);
-    ADM_assert(dest->_height == destHeight);
-
-	return resize(source->data, dest->data);
-}
-
-uint8_t ADMImageResizer::resize(ADMImage *source, uint8_t *dest)
-{
-    ADM_assert(source->_width == orgWidth);
-    ADM_assert(source->_height == orgHeight);
-
-	return resize(source->data, dest);
-}
-
-uint8_t ADMImageResizer::resize(uint8_t *source, ADMImage *dest)
-{
-    ADM_assert(dest->_width == destWidth);
-    ADM_assert(dest->_height == destHeight);
-
-	return resize(source, dest->data);
-}
-
-uint8_t ADMImageResizer::resize(uint8_t *source, uint8_t *dest)
-{
-	uint8_t *src[3];
-	uint8_t *dst[3];
-	int ssrc[3];
-	int ddst[3];
-
-	if (orgFormat == PIX_FMT_YUV420P)
-	{
-		getYuvPlanes(source, orgWidth, orgHeight, *&src[0], *&src[1], *&src[2]);
-
-		ssrc[0] = orgWidth;
-		ssrc[1] = ssrc[2] = orgWidth >> 1;
-	}
-	else	// RGB
-	{
-		src[0] = source;
-		src[1] = NULL;
-		src[2] = NULL;
-
-		ssrc[0]=orgWidth * 4;
-		ssrc[1] = 0;
-		ssrc[2] = 0;
-	}
-
-	if (destFormat == PIX_FMT_YUV420P)
-	{
-		getYuvPlanes(dest, destWidth, destHeight, *&dst[0], *&dst[1], *&dst[2]);
-
-		ddst[0] = destWidth;
-		ddst[1] = ddst[2] = destWidth >> 1;
-	}
-	else	// RGB
-	{
-		dst[0] = dest;
-		dst[1] = NULL;
-		dst[2] = NULL;
-
-		ddst[0] = destWidth * 4;
-		ddst[1] = 0;
-		ddst[2] = 0;
-	}
-
-    sws_scale((SwsContext*)_context, src, ssrc, 0, orgHeight, dst, ddst);
-
-    return 1;
-}
-
-void ADMImageResizer::getYuvPlanes(uint8_t *source, uint32_t width, uint32_t height, uint8_t*& yPlane, uint8_t*& uPlane, uint8_t*& vPlane)
-{
-	// Unfortunately xPLANE macros expect an ADMImage object so doubling up on logic.
-	yPlane = source;
-	uPlane = source + (width * height);
-	vPlane = source + (5 * (width * height) >> 2);
-}

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_imageUtils.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_imageUtils.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_imageUtils.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -1,559 +0,0 @@
-/***************************************************************************
-    copyright            : (C) 2003-2005 by mean
-    email                : fixounet at free.fr
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-#include "config.h"
-
-#include <stdlib.h>
-#include <stdio.h>
-#include <string.h>
-
-#include "ADM_image.h"
-#include "ADM_toolkit/bitmap.h"
-#include "avifmt.h"
-#include "avifmt2.h"
-#include "ADM_bitstream.h"
-
-#include "DIA_coreToolkit.h"
-#include "ADM_colorspace/colorspace.h"
-#include "ADM_encoder/ADM_vidEncode.hxx"
-
-#include "ADM_codecs/ADM_codec.h"
-#include "ADM_lavcodec.h"
-#include "ADM_codecs/ADM_ffmpeg.h"
-
-static uint8_t tinyAverage(uint8_t *dst, uint8_t *src1, uint8_t *src2,uint32_t l)
-{
-
-uint8_t *s1,*s2,*d1;
-int a1,a2;
-        s1=src1;
-        s2=src2;
-        
-        d1=dst;
-          for(int y=0;y<l;y++)
-                {
-                        a1=*s1;
-                        a2=*s2;
-                        a1=a1+a2;
-                        a1>>=1;
-                        if(a1<0) a1=0;
-                        if(a1>255) a1=255;
-                        *d1=a1;                         
-
-                        s1++;
-                        s2++;
-                        d1++;
-                }
-        
-        return 1;
-}
-#ifdef ADM_CPU_X86
-static uint8_t tinyAverageMMX(uint8_t *dst, uint8_t *src1, uint8_t *src2,uint32_t l)
-{
-int delta;
-uint32_t ww,rr;
-uint8_t *s1,*s2,*d1;
-int a1,a2;
-        s1=src1;
-        s2=src2;
-        
-        d1=dst;
-        ww=l>>2;
-        rr=l&3;
-
-
-#ifdef GCC_2_95_X
-         __asm__(
-                         "pxor %mm7,%mm7"
-                ::
-                 );
-#else
-         __asm__(
-                         "pxor %%mm7,%%mm7"
-                ::
-                 );
-#endif
-
-          for(int y=0;y<ww;y++)
-          {
-                __asm__(
-                        "movd           (%0),%%mm0 \n"
-                        "movd           (%1),%%mm1 \n"
-                        "punpcklbw      %%mm7,%%mm0 \n"
-                        "punpcklbw      %%mm7,%%mm1 \n"
-                        "paddw           %%mm1,%%mm0 \n"
-                        "psrlw          $1,%%mm0 \n"
-                        "packuswb       %%mm0,  %%mm0\n"
-                        "movd           %%mm0,(%2) \n"
-
-                : : "r" (s1),"r" (s2),"r"(d1)
-                );
-                        s1+=4;
-                        s2+=4;
-                        d1+=4;
-                }
-        __asm__(
-                        "emms\n"
-                ::
-                );
-        if(rr) tinyAverage(d1, s1, s2,rr);
-        return 1;
-}
-
-
-#endif
-
-uint8_t ADMImage::merge(ADMImage *src1,ADMImage *src2)
-{
-#ifdef ADM_CPU_X86
-        if(CpuCaps::hasMMX())
-        {
-                tinyAverageMMX(YPLANE(this),YPLANE(src1),YPLANE(src2),(_width*_height*3)>>1);
-                return 1;
-        }
-#endif
-        tinyAverage(YPLANE(this),YPLANE(src1),YPLANE(src2),(_width*_height*3)>>1);
-        return 1;
-
-
-}
-/* 3000 * 3000 max size, using uint32_t is safe... */
-static uint32_t computeDiff(uint8_t  *s1,uint8_t *s2,uint32_t noise,uint32_t l)
-{
-uint32_t df=0;
-uint32_t delta;
-uint32_t ww,hh;
-
-
-        for(int x=0;x<l;x++)
-        {
-                delta=abs(*s1-*s2);
-                if(delta>noise)
-                        df+=delta;
-                s1++;
-                s2++;
-
-        }
-        return df;
-}
-#ifdef ADM_CPU_X86
-static uint64_t noise64;
-static uint32_t computeDiffMMX(uint8_t  *s1,uint8_t *s2,uint32_t noise,uint32_t l)
-{
-uint32_t df=0;
-uint32_t delta;
-uint32_t ll,rr;
-uint64_t noise2=(uint64_t )noise;
-
-uint32_t result=0;
-        noise64=noise2+(noise2<<16)+(noise2<<32)+(noise2<<48);
-        ll=l>>2;
-        rr=l&3;
-
-#ifdef GCC_2_95_X
-         __asm__(
-                         "pxor %mm7,%mm7\n"
-                         "pxor %mm3,%mm3\n"
-                         "movq "Mangle(noise64)", %mm6\n"
-                :: 
-                 );
-#else
-         __asm__(
-                         "pxor %%mm7,%%mm7\n"
-                         "pxor %%mm3,%%mm3\n"
-                         "movq "Mangle(noise64)", %%mm6\n"
-                :: 
-                 );
-#endif
-
-          for(int y=0;y<ll;y++)
-          {
-                __asm__(
-                        "movd           (%0),  %%mm0 \n"
-                        "movd           (%1),  %%mm1 \n"
-                        "punpcklbw      %%mm7, %%mm0 \n"
-                        "punpcklbw      %%mm7, %%mm1 \n"
-                        
-                        "movq           %%mm0, %%mm2 \n"
-                        "psubusw        %%mm1, %%mm2 \n"
-                        "psubusw        %%mm0, %%mm1 \n"
-                        "por            %%mm1, %%mm2 \n" // SAD  
-                                           
-                        "movq           %%mm2, %%mm0 \n"
-                        "pcmpgtw        %%mm6, %%mm2 \n" // Threshold against noise
-                        "pand           %%mm2, %%mm0 \n" // MM0 is the 4 diff, time to pack
-
-                        "movq           %%mm0, %%mm1 \n" // MM0 is a b c d and we want
-                        "psrlq          $16,  %%mm1 \n"  // mm3+=a+b+c+d
-
-                        "movq           %%mm0, %%mm2 \n"
-                        "psrlq          $32,  %%mm2 \n"
-
-                        "movq           %%mm0, %%mm4 \n"
-                        "psrlq          $48,  %%mm4 \n"
-
-                        "paddw          %%mm1, %%mm0 \n"
-                        "paddw          %%mm2, %%mm4 \n"
-                        "paddw          %%mm4, %%mm0 \n"
-
-                        "psllq          $48,  %%mm0 \n"
-                        "psrlq          $48,  %%mm0 \n"
-
-                        "paddw          %%mm0, %%mm3 \n" /* PADDQ is SSE2 */
-
-                : : "r" (s1),"r" (s2)
-                );
-                        s1+=4;
-                        s2+=4;
-                        
-         }
-        // Pack result
-#if 1        
-                __asm__(
-                       
-                        "movd           %%mm3,(%0)\n"
-                        "emms\n"
-                :: "r"(&result)
-                );
-#endif                
-        if(rr) result+=computeDiff(s1, s2, noise,rr);
-        return result;
-}
-
-
-#endif
-
-uint32_t ADMImage::lumaDiff(ADMImage *src1,ADMImage *src2,uint32_t noise)
-{
-
-#ifdef ADM_CPU_X86
-uint32_t r1,r2;
-        if(CpuCaps::hasMMX())
-        {
-                return computeDiffMMX(YPLANE(src1),YPLANE(src2),noise,src1->_width*src1->_height);                
-        }
-#endif
-        return computeDiff(YPLANE(src1),YPLANE(src2),noise,src1->_width*src1->_height);
-}
-
-//******************************************************************************
-// so srcR=2*src-srcP
-static uint8_t tinySubstract(uint8_t *dst, uint8_t *src1, uint8_t *src2,uint32_t l)
-{
-int delta;
-uint32_t ww,hh;
-uint8_t *s1,*s2,*d1;
-int a1,a2;
-        s1=src1;
-        s2=src2;
-        
-        d1=dst;
-       
-
-          for(int y=0;y<l;y++)
-               
-                {
-                        a1=*s1;
-                        a2=*s2;
-                        a1=2*a1-a2;
-                        if(a1<0) a1=0;
-                        if(a1>255) a1=255;
-                        *d1=a1;                         
-
-                        s1++;
-                        s2++;
-                        d1++;
-                }
-        return 1;
-}
-#ifdef ADM_CPU_X86
-static uint8_t tinySubstractMMX(uint8_t *dst, uint8_t *src1, uint8_t *src2,uint32_t l)
-{
-int delta;
-uint32_t ww,hh;
-uint8_t *s1,*s2,*d1;
-int ll,rr;
-        ll=l>>2;
-        rr=l&3;
-        s1=src1;
-        s2=src2;
-        
-        d1=dst;
-      
-#ifdef GCC_2_95_X
-        __asm__(
-                         "pxor %mm7,%mm7"
-                ::
-                 );
-#else
-        __asm__(
-                         "pxor %%mm7,%%mm7"
-                ::
-                 );
-#endif
-        for(int x=0;x<ll;x++)
-                {
-                        __asm__(
-                        "movd           (%0),%%mm0 \n"
-                        "movd           (%1),%%mm1 \n"
-                       
-                        "punpcklbw      %%mm7,%%mm0 \n"
-                        "punpcklbw      %%mm7,%%mm1 \n"
-                      
-                        
-                        "paddw          %%mm0,%%mm0 \n"
-                       
-                        
-                        "psubusw        %%mm1,%%mm0 \n" // mm1=sum                       
-                        "packuswb       %%mm0,  %%mm0\n"
-                        "movd           %%mm0,(%2) \n"                       
-                        :: "r"(s1),"r"(s2),"r"(d1)
-                        );
-                        s1+=4;
-                        s2+=4;
-                        d1+=4;
-                }
-                 __asm__(                       
-                        "emms\n"
-                :: 
-                );
-        if(rr) tinySubstractMMX(d1, s1, s2,rr);
-        return 1;
-}
-#endif
-
-uint8_t ADMImage::substract(ADMImage *src1,ADMImage *src2)
-{
-
-#ifdef ADM_CPU_X86
-uint32_t r1,r2;
-        if(CpuCaps::hasMMX())
-        {
-                 return tinySubstractMMX(YPLANE(this),YPLANE(src1),YPLANE(src2),src1->_width*src1->_height);                
-        }
-#endif
-        return tinySubstract(YPLANE(this),YPLANE(src1),YPLANE(src2),src1->_width*src1->_height);
-}
- ADM_BITMAPFILEHEADER bmfh;
- ADM_BITMAPINFOHEADER bmph;
-  FILE *fd;
-  uint32_t sz;
-  uint16_t s16;
-  uint32_t s32;
-  
-
-/**
-    \fn saveAsBmp
-    \brief save current image into filename, into bmp format
-*/
-uint8_t  ADMImage::saveAsBmp(const char *filename)
-{
-  ADM_BITMAPFILEHEADER bmfh;
-  ADM_BITMAPINFOHEADER bmph;
-  FILE *fd;
-  uint32_t sz;
-  uint16_t s16;
-  uint32_t s32;
-  
-  sz = _width* _height * 3;
-
-  bmfh.bfReserved1 = bmfh.bfReserved2 = 0;
-  bmfh.bfOffBits = sizeof (bmfh) + sizeof (bmph);
-//_________________________________________
-  bmph.biSize = sizeof (bmph);
-  bmph.biWidth = _width;
-  bmph.biHeight = _height;
-  bmph.biPlanes = 1;
-  bmph.biBitCount = 24;
-  bmph.biCompression = 0;	// COMPRESSION NONE
-  bmph.biSizeImage = sz;
-  bmph.biXPelsPerMeter = 0;
-  bmph.biYPelsPerMeter = 0;
-  bmph.biClrUsed = 0;
-  bmph.biClrImportant = 0;
-/*
-	bmph.resolutionUnits=0;
-	bmph.origin=0;
-	bmph.colorEncoding=0;
-*/
-
-  ADMImage image(_width,_height);
-  
-
-  printf ("\n %u x %u=%u\n", bmph.biWidth, bmph.biHeight, sz);
-
-  uint8_t *out;
-
-        out=(uint8_t *)ADM_alloc(sz);
-        if(!out)
-        {
-            GUI_Error_HIG(QT_TR_NOOP("Memory error"), NULL);
-//            ADM_dealloc(out);
-            return 0;
-        }
-
-        if(!COL_yv12rgbBMP(bmph.biWidth, bmph.biHeight,data, out))
-        {
-              GUI_Error_HIG(QT_TR_NOOP("Error converting to BMP"), NULL);
-              ADM_dealloc(out);
-              return 0;
-        }
-        fd = fopen (filename, "wb");
-        if (!fd)
-        {
-                GUI_Error_HIG (QT_TR_NOOP("Something bad happened"), NULL);
-                ADM_dealloc(out);
-                return 0;
-        }
-
-	// Bitmpap file header, not using tructure due to gcc padding it
-#ifdef ADM_BIG_ENDIAN
-	s16 = 0x424D;
-#else	
-  	s16 = 0x4D42;
-#endif	
-  	s32 = 14 + sizeof (bmph) + sz;
-#ifdef ADM_BIG_ENDIAN	
-	#define SWAP32(x) x=R32(x)	
-#else
-	#define SWAP32(x) ; 
-#endif
-        SWAP32(s32);	
-        fwrite (&s16, 2, 1, fd);
-        fwrite (&s32, 4, 1, fd);
-        s32 = 0;
-        fwrite (&s32, 4, 1, fd);
-        s32 = 14 + sizeof (bmph);
-        SWAP32(s32);
-        fwrite (&s32, 4, 1, fd);
-#ifdef ADM_BIG_ENDIAN
-	Endian_BitMapInfo(&bmph);
-#endif
-        fwrite (&bmph, sizeof (bmph), 1, fd);
-        fwrite (out, sz, 1, fd);
-  
-        fclose(fd);
-        ADM_dealloc(out);
-        return 1;
-}
-/**
-    \fn saveAsJpg
-    \brief save current image into filename, into jpg format
-*/
-uint8_t  ADMImage::saveAsJpg(const char *filename)
-{
- ffmpegEncoderFFMjpeg *codec=NULL;
-  FILE *fd;
-  uint8_t *buffer=NULL;
-  uint32_t sz;
-  
-
-        sz = _width*_height*3;
-        ADMBitstream bitstream(sz);
-        buffer=new uint8_t[sz];
-        bitstream.data=buffer;
-        codec=new  ffmpegEncoderFFMjpeg(_width,_height,FF_MJPEG)  ;
-        codec->init( 95,25000);
-        if(!codec->encode(this,&bitstream))
-        {
-                GUI_Error_HIG(QT_TR_NOOP("Cannot encode the frame"), NULL);
-                delete [] buffer;
-                delete codec;
-                return 0;
-        }
-        delete codec;
-        fd=fopen(filename,"wb");
-        if(!fd)
-        {
-                GUI_Error_HIG(QT_TR_NOOP("File error"),QT_TR_NOOP( "Cannot open \"%s\" for writing."), filename);
-                delete [] buffer;
-                return 0;
-        }
-        fwrite (buffer, bitstream.len, 1, fd);
-        fclose(fd);
-        delete [] buffer;
-        return 1;
-}
-/**
-      \fn LumaReduceBy2
-      \brief Very simple reduce by 2 both hz & vz for luma plane only.
-*/
- uint8_t   ADMImage::LumaReduceBy2(void)
-{
-  uint8_t *ptr1,*ptr2,*outptr;
-  for(int y=0;y<_height>>1;y++)
-  {
-    
-    ptr1=data+y*_width*2;
-    ptr2=ptr1+_width;
-    outptr=data+(_width>>1)*y;
-    for(int x=0;x<_width>>1;x++)
-    {
-      uint32_t a,b,c,d;  
-          a=ptr1[0]+ptr1[1];
-          b=ptr2[0]+ptr2[1];
-          ptr1+=2;
-          ptr2+=2;
-          a=(a+b)>>2;
-          *outptr++=a;
-    }
-  }
-  return 1;
-  
-}
- /**
-  *		\fn  copyLeftSideTo
-  * 	\brief Copy half the image (left part) to dest
-  * 	@param dest : Image to copy to 
-  */
- uint8_t ADMImage::copyLeftSideTo(ADMImage *dest)
- {
-		uint8_t *src,*dst;
-		uint32_t stride;
- 
-			ADM_assert(_width==dest->_width);
-			ADM_assert(_height==dest->_height);
-		
-	 		dst=YPLANE(dest);
-		    src=YPLANE(this);
-		    stride=_width;
-		    for(uint32_t y=0;y<_height;y++)   // We do both u & v!
-		    {
-		        memcpy(dst,src,stride>>1);
-		        dst+=stride;
-		        src+=stride;
-		    }
-		        // U
-		    dst=UPLANE(dest);
-		    src=UPLANE(this);
-		    stride=_width>>1;
-		    uint32_t h2=_height>>1;
-		    for(uint32_t y=0;y<h2;y++)   // We do both u & v!
-		    {
-		        memcpy(dst,src,stride>>1);
-		        dst+=stride;
-		        src+=stride;
-		    }
-		        // V
-		    dst=VPLANE(dest);
-		    src=VPLANE(this);
-		    for(uint32_t y=0;y<h2;y++)   // We do both u & v!
-		    {
-		        memcpy(dst,src,stride>>1);
-		        dst+=stride;
-		        src+=stride;
-		    }
-		    return 1;
- }
-//EOF

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/CMakeLists.txt	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/CMakeLists.txt	2008-04-24 17:36:16 UTC (rev 3980)
@@ -1,8 +1,8 @@
 SET(ADM_LIB ADM_utilities)
 
 SET(${ADM_LIB}_SRCS 
-	ADM_bitstream.cpp  ADM_fileio.cpp  ADM_gettext.cpp  ADM_image.cpp  ADM_imageLoader.cpp  ADM_imageResizer.cpp
-	ADM_imageUtils.cpp  ADM_pp.cpp  ADM_print.cpp  avidemutils.cpp  aviindexer.cpp  fourcc.cpp  prefs.cpp)
+	ADM_bitstream.cpp  ADM_fileio.cpp  ADM_gettext.cpp   ADM_imageLoader.cpp  
+	ADM_pp.cpp  ADM_print.cpp  avidemutils.cpp  aviindexer.cpp  fourcc.cpp  prefs.cpp)
 
 ADD_ADM_LIB_ALL_TARGETS(${ADM_LIB} ${${ADM_LIB}_SRCS})
-ADD_SOURCE_CFLAGS(prefs.cpp -I${LIBXML2_INCLUDE_DIR} ${LIBXML2_DEFINITIONS})
\ No newline at end of file
+ADD_SOURCE_CFLAGS(prefs.cpp -I${LIBXML2_INCLUDE_DIR} ${LIBXML2_DEFINITIONS})

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_ocr/ADM_bitmapSource.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_ocr/ADM_bitmapSource.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_ocr/ADM_bitmapSource.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -11,15 +11,10 @@
  *                                                                         *
  ***************************************************************************/
  #include "config.h"
- #include <stdio.h>
- #include <stdlib.h>
- #include <string.h>
- #include "ADM_assert.h"
-#include "ADM_default.h"
+ #include "ADM_default.h"
 
  #include "ADM_editor/ADM_edit.hxx"
- #include "ADM_video/ADM_genvideo.hxx"
-
+ #include "ADM_videoFilter.h"
  #include "ADM_ocr.h"
  #include "ADM_ocrInternal.h"
   #include "DIA_enter.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_ocr/ADM_ocr.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_ocr/ADM_ocr.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_ocr/ADM_ocr.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -14,8 +14,7 @@
 #include "ADM_default.h"
 
  #include "ADM_editor/ADM_edit.hxx"
- #include "ADM_video/ADM_genvideo.hxx"
-
+ #include "ADM_videoFilter.h"
  #include "ADM_ocr.h"
 #include "ADM_ocrInternal.h"
   #include "DIA_enter.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_ocr/ADM_ocrEngine.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_ocr/ADM_ocrEngine.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_ocr/ADM_ocrEngine.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -11,15 +11,10 @@
  *                                                                         *
  ***************************************************************************/
  #include "config.h"
- #include <stdio.h>
- #include <stdlib.h>
- #include <string.h>
- #include "ADM_assert.h"
 #include "ADM_default.h"
 
  #include "ADM_editor/ADM_edit.hxx"
- #include "ADM_video/ADM_genvideo.hxx"
-
+ #include "ADM_videoFilter.h"
  #include "ADM_ocr.h"
  #include "ADM_ocrInternal.h"
  #include "DIA_coreToolkit.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisave.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisave.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisave.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -19,12 +19,6 @@
 * MODIFIED BY GMV 30.1.05: prepared for ODML
 */
  
-#include <stdio.h>
-#include <stdlib.h>
-#include <math.h>
-#include <unistd.h>
-#include <time.h>
-#include <sys/time.h>
 
 #include "config.h"
 #include "ADM_default.h"
@@ -36,9 +30,9 @@
 
 //#include "avilist.h"
 
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 
-#include "ADM_filter/video_filters.h"
+#include "ADM_videoFilter.h"
 #include "ADM_encoder/ADM_vidEncode.hxx"
 
 #include "ADM_audio/aviaudio.hxx"
@@ -46,7 +40,7 @@
 #include "op_aviwrite.hxx"
 #include "op_avisave.h"
 #include "GUI_mux.h"
-
+#include <math.h>
 uint32_t muxSize=4090;
 extern PARAM_MUX muxMode;
 extern int muxParam;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -20,13 +20,6 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include <stdio.h>
-#include <stdlib.h>
-#include <math.h>
-#include <unistd.h>
-#include <time.h>
-#include <sys/time.h>
-
 #include "config.h"
 #include "ADM_default.h"
 #include "ADM_threads.h"
@@ -37,8 +30,9 @@
 
 //#include "avilist.h"
 
-#include "ADM_video/ADM_genvideo.hxx"
-#include "ADM_filter/video_filters.h"
+#include "ADM_videoFilter.h"
+#include "ADM_videoFilter_internal.h"
+
 #include "ADM_encoder/ADM_vidEncode.hxx"
 
 #include "ADM_audio/aviaudio.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_pack.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_pack.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_pack.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -16,12 +16,6 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include <stdio.h>
-#include <stdlib.h>
-#include <math.h>
-#include <unistd.h>
-#include <time.h>
-#include <sys/time.h>
 
 #include "config.h"
 #include "ADM_default.h"
@@ -34,8 +28,9 @@
 
 //#include "avilist.h"
 
-#include "ADM_video/ADM_genvideo.hxx"
-#include "ADM_filter/video_filters.h"
+#include "ADM_videoFilter.h"
+#include "ADM_videoFilter_internal.h"
+
 #include "ADM_encoder/ADM_vidEncode.hxx"
 
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_unpack.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_unpack.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_unpack.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -30,8 +30,9 @@
 
 //#include "avilist.h"
 
-#include "ADM_video/ADM_genvideo.hxx"
-#include "ADM_filter/video_filters.h"
+#include "ADM_videoFilter.h"
+#include "ADM_videoFilter_internal.h"
+
 #include "ADM_encoder/ADM_vidEncode.hxx"
 
 #include "ADM_audio/aviaudio.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavedual.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavedual.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavedual.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -17,14 +17,8 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-
-#include <stdio.h>
-#include <stdlib.h>
 #include <math.h>
-#include <unistd.h>
-#include <time.h>
-#include <sys/time.h>
-
+#include "config.h"
 #include "ADM_default.h"
 #include "ADM_threads.h"
 
@@ -34,8 +28,8 @@
 
 //#include "avilist.h"
 
-#include "ADM_video/ADM_genvideo.hxx"
-#include "ADM_filter/video_filters.h"
+#include "ADM_videoFilter.h"
+#include "ADM_videoFilter_internal.h"
 #include "ADM_encoder/ADM_vidEncode.hxx"
 
 #include "ADM_audio/aviaudio.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -32,9 +32,9 @@
 #include "ADM_audio/aviaudio.hxx"
 #include "ADM_audiofilter/audioprocess.hxx"
 
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 //#include "ADM_gui/GUI_encoder.h"
-#include "ADM_filter/video_filters.h"
+#include "ADM_videoFilter_internal.h"
 #include "ADM_encoder/ADM_vidEncode.hxx"
 
 #include "op_aviwrite.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_savesmart.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_savesmart.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_savesmart.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -33,8 +33,9 @@
 #include "ADM_audio/aviaudio.hxx"
 #include "ADM_audiofilter/audioprocess.hxx"
 
-#include "ADM_video/ADM_genvideo.hxx"
-#include "ADM_filter/video_filters.h"
+#include "ADM_videoFilter.h"
+#include "ADM_videoFilter_internal.h"
+
 #include "ADM_encoder/ADM_vidEncode.hxx"
 
 #include "op_aviwrite.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -30,8 +30,8 @@
 #include "ADM_editor/ADM_Video.h"
 #include "ADM_colorspace/colorspace.h"
 #include "DIA_coreToolkit.h"
-#include "ADM_video/ADM_genvideo.hxx"
-#include "ADM_filter/video_filters.h"
+#include "ADM_videoFilter.h"
+#include "ADM_videoFilter_internal.h"
 
 #include "ADM_encoder/ADM_vidEncode.hxx"
 #include "ADM_codecs/ADM_codec.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -29,10 +29,9 @@
 #include "ADM_editor/ADM_Video.h"
 #include "ADM_colorspace/colorspace.h"
 #include "DIA_coreToolkit.h"
-#include "ADM_video/ADM_genvideo.hxx"
-#include "ADM_filter/video_filters.h"
+#include "ADM_videoFilter.h"
+#include "ADM_videoFilter_internal.h"
 
-
 #include "ADM_encoder/ADM_vidEncode.hxx"
 #include "ADM_codecs/ADM_codec.h"
 #include "ADM_encoder/adm_encoder.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -31,9 +31,10 @@
 
 #include "ADM_colorspace/colorspace.h"
 #include "DIA_coreToolkit.h"
-#include "ADM_video/ADM_genvideo.hxx"
-#include "ADM_filter/video_filters.h"
+#include "ADM_videoFilter.h"
+#include "ADM_videoFilter_internal.h"
 
+
 #include "ADM_encoder/ADM_vidEncode.hxx"
 #include "ADM_encoder/adm_encoder.h"
 //#include "ADM_codecs/ADM_divxEncode.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -36,7 +36,8 @@
 #include "ADM_inputs/ADM_mpegdemuxer/dmx_mpegstartcode.h"
 
 #include "ADM_encoder/ADM_vidEncode.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
+#include "ADM_videoFilter_internal.h"
 #include "ADM_encoder/adm_encoder.h"
 #include "ADM_encoder/adm_encCopy.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -36,8 +36,8 @@
 
 #include "ADM_colorspace/colorspace.h"
 #include "DIA_coreToolkit.h"
-#include "ADM_video/ADM_genvideo.hxx"
-#include "ADM_filter/video_filters.h"
+#include "ADM_videoFilter.h"
+#include "ADM_videoFilter_internal.h"
 
 #include "ADM_encoder/ADM_vidEncode.hxx"
 #include "ADM_encoder/adm_encoder.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_ogm/op_ogaudio.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_ogm/op_ogaudio.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_ogm/op_ogaudio.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -33,8 +33,8 @@
 
 //#include "avilist.h"
 
-#include "ADM_video/ADM_genvideo.hxx"
-#include "ADM_filter/video_filters.h"
+#include "ADM_videoFilter.h"
+
 #include "ADM_encoder/ADM_vidEncode.hxx"
 
 #include "ADM_audio/aviaudio.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_ogm/op_ogsave.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_ogm/op_ogsave.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_ogm/op_ogsave.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -26,9 +26,8 @@
 
 //#include "avilist.h"
 
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 
-#include "ADM_filter/video_filters.h"
 #include "ADM_encoder/ADM_vidEncode.hxx"
 
 #include "ADM_audio/aviaudio.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_ogm/op_ogsavecopy.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_ogm/op_ogsavecopy.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_ogm/op_ogsavecopy.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -19,8 +19,8 @@
 
 //#include "avilist.h"
 
-#include "ADM_video/ADM_genvideo.hxx"
-#include "ADM_filter/video_filters.h"
+#include "ADM_videoFilter.h"
+
 #include "ADM_encoder/ADM_vidEncode.hxx"
 #include "ADM_audio/aviaudio.hxx"
 #include "ADM_audiofilter/audioprocess.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -34,8 +34,8 @@
 
 //#include "avilist.h"
 
-#include "ADM_video/ADM_genvideo.hxx"
-#include "ADM_filter/video_filters.h"
+#include "ADM_videoFilter.h"
+#include "ADM_videoFilter_internal.h"
 #include "ADM_encoder/ADM_vidEncode.hxx"
 #include "ADM_audio/aviaudio.hxx"
 #include "ADM_audiofilter/audioprocess.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_preview.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_preview.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_preview.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -37,9 +37,8 @@
 
 
 #include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
-#include "ADM_filter/video_filters.h"
-
+#include "ADM_videoFilter.h"
+#include "ADM_videoFilter_internal.h"
 #include "ADM_userInterfaces/ADM_commonUI/GUI_render.h"
 
 #include "ADM_osSupport/ADM_debugID.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSAvidemuxAudio.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSAvidemuxAudio.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSAvidemuxAudio.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -20,13 +20,13 @@
 #include "avi_vars.h"
 #include "gui_action.hxx"
 #include "ADM_encoder/ADM_vidEncode.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_encoder/adm_encoder.h"
 #include "ADM_encoder/adm_encConfig.h"
 #include "ADM_editor/ADM_outputfmt.h"
-#include "ADM_filter/video_filters.h"
 
 
+
 #include "ADM_script/ADM_container.h"
 
 extern int A_audioSave(char *name);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSAvidemuxVideo.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSAvidemuxVideo.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSAvidemuxVideo.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -21,13 +21,14 @@
 #include "avi_vars.h"
 #include "gui_action.hxx"
 #include "ADM_encoder/ADM_vidEncode.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
+#include "ADM_videoFilter_internal.h"
 #include "ADM_encoder/adm_encoder.h"
 #include "ADM_encoder/adm_encConfig.h"
 #include "ADM_editor/ADM_outputfmt.h"
 #include "../ADM_userInterfaces/ADM_commonUI/GUI_ui.h"
-#include "ADM_filter/video_filters.h"
 
+
 #include "ADM_script/ADM_container.h"
 
 extern VF_FILTERS filterGetTagFromName(char *inname);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSFunctions.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSFunctions.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSFunctions.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -34,11 +34,11 @@
 #include "avi_vars.h"
 #include "gui_action.hxx"
 #include "ADM_encoder/ADM_vidEncode.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_encoder/adm_encoder.h"
 #include "ADM_encoder/adm_encConfig.h"
 #include "ADM_editor/ADM_outputfmt.h"
-#include "ADM_filter/video_filters.h"
+
 #include "ADM_script/ADM_container.h"
 
 #include "ADM_JSGlobal.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/adm_scanner.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/adm_scanner.h	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/adm_scanner.h	2008-04-24 17:36:16 UTC (rev 3980)
@@ -6,19 +6,8 @@
 #define ADMSCANNER
 
 #define ADM_MAX_VAR 50
+#include "ADM_videoFilter_iface.h"
 
-typedef enum 
-{
-	APM_NUM,
-	APM_HEXNUM,
-	APM_STRING,
-	APM_QUOTED,
-	APM_FLOAT,
-	APM_BOOL,
-	APM_LAST
-
-}APM_TYPE;
-
 typedef enum
 {
 	ASC_OK,
@@ -30,20 +19,8 @@
 
 int PushParam(APM_TYPE, char *value);
 int Call(char *string);
-typedef union
-{
-	int 	integer;
-	float	real;
-	char	*string;
 
-}ArgI;
 
-typedef struct 
-{
-	APM_TYPE type;
-	ArgI	 arg;
-
-}Arg;
 #define MAXPARAM 40
 #endif
 //END

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_SwissArmyKnife.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -26,13 +26,13 @@
 #ifdef HAVE_ENCODER
 
 #include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_videoFilter/ADM_vidSwissArmyKnife.h"
 
 #include "DIA_flyDialog.h"
 #include "DIA_flySwissArmyKnife.h"
 #include "DIA_factory.h"
-#include "ADM_filter/video_filters.h"
+#include "ADM_videoFilter_internal.h"
 
 #undef _
 #define _(_s) QT_TR_NOOP(_s)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_asharp.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_asharp.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_asharp.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -25,7 +25,7 @@
 #include "ADM_colorspace/ADM_rgb.h"
 
 #include "ADM_image.h"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_videoFilter/ADM_vidASharp_param.h"
 #include "DIA_flyDialog.h"
 #include "DIA_flyAsharp.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -22,12 +22,13 @@
 #include "DIA_fileSel.h"
 
 #include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
+#include "ADM_videoFilter_internal.h"
 
 #include "ADM_audiofilter/audioprocess.hxx"
 #include "ADM_audiofilter/audioeng_buildfilters.h"
 
-#include "ADM_filter/video_filters.h"
+
 #include "ADM_video/ADM_vidMisc.h"
 #include "avi_vars.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_chromaShift.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_chromaShift.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_chromaShift.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -18,7 +18,7 @@
 
 
 #include "ADM_image.h"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_colorspace/ADM_rgb.h"
 #include "ADM_assert.h"
 #include "DIA_flyDialog.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_contrast.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_contrast.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_contrast.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -19,8 +19,7 @@
 
 
 
-#include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_videoFilter/ADM_vidContrast.h"
 
 #include "ADM_colorspace/ADM_rgb.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_crop.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_crop.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_crop.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -24,7 +24,7 @@
 
 
 #include "ADM_image.h"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_colorspace/ADM_rgb.h"
 
 #include "DIA_flyDialog.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eq2.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eq2.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eq2.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -18,7 +18,7 @@
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
 
 #include "ADM_image.h"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 
 #include "ADM_videoFilter/ADM_vidEq2.h"
 #include "DIA_flyDialog.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_equalizer.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_equalizer.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_equalizer.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -28,7 +28,7 @@
 #include "ADM_colorspace/ADM_rgb.h"
 
 #include "ADM_image.h"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_video/ADM_vidEqualizer.h"
 
 extern "C" {

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eraser.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eraser.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eraser.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -25,7 +25,8 @@
 #include <algorithm>
 
 #include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
+#include "ADM_videoFilter_internal.h"
 #include "ADM_videoFilter/ADM_vidEraser.h"
 
 #include "DIA_fileSel.h"
@@ -33,8 +34,8 @@
 #include "DIA_flyDialog.h"
 #include "DIA_flyEraser.h"
 #include "DIA_factory.h"
-#include "ADM_filter/video_filters.h"
 
+
 using namespace std;
 
 #undef _

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_flyDialog.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_flyDialog.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_flyDialog.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -13,7 +13,7 @@
 ***************************************************************************///
 
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "DIA_flyDialog.h"
 #include "DIA_factory.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_hue.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_hue.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_hue.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -26,7 +26,7 @@
 #include "ADM_colorspace/ADM_rgb.h"
 
 #include "ADM_image.h"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_videoFilter/ADM_vidHue.h"
 #include "DIA_flyDialog.h"
 #include "DIA_flyHue.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_idx_pg.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -20,7 +20,7 @@
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
 #include "DIA_coreToolkit.h"
 
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_encoder/ADM_vidEncode.hxx"
 #include "ADM_encoder/adm_encoder.h"
 #include "DIA_idx_pg.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_mpdelogo.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_mpdelogo.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_mpdelogo.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -26,7 +26,7 @@
 
 
 #include "ADM_image.h"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_colorspace/ADM_rgb.h"
 #include "ADM_video/ADM_vidMPdelogo.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_partial.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_partial.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_partial.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -26,7 +26,7 @@
 
 
 #include "ADM_video/ADM_vidPartial_param.h"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "DIA_coreToolkit.h"
 #define SPIN_GET(x,y) {param->y= gtk_spin_button_get_value_as_int(GTK_SPIN_BUTTON(WID(x))) ;}
 #define SPIN_SET(x,y)  {gtk_spin_button_set_value(GTK_SPIN_BUTTON(WID(x)),(gfloat)param->y) ;}

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -25,7 +25,8 @@
 #ifdef HAVE_ENCODER
 
 #include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
+#include "ADM_videoFilter_internal.h"
 #include "ADM_videoFilter/ADM_vidParticle.h"
 
 #include "DIA_fileSel.h"
@@ -33,8 +34,8 @@
 #include "DIA_flyDialog.h"
 #include "DIA_flyParticle.h"
 #include "DIA_factory.h"
-#include "ADM_filter/video_filters.h"
 
+
 #undef _
 #define _(_s) QT_TR_NOOP(_s)
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_preview.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_preview.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_preview.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -20,7 +20,7 @@
  ***************************************************************************/
 
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 
 
 #include "DIA_flyDialog.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_srt.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_srt.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_srt.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -23,7 +23,7 @@
 #include "DIA_fileSel.h"
 
 #include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 
 //#include "ADM_video/ADM_vidFont.h"
 class ADMfont;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -18,13 +18,14 @@
 #include "../ADM_toolkit_gtk/toolkit_gtk.h"
 
 #include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
+#include "ADM_videoFilter_internal.h"
 #include "ADM_videoFilter/ADM_vidThreshold.h"
 
 #include "DIA_flyDialog.h"
 #include "DIA_flyThreshold.h"
-#include "ADM_filter/video_filters.h"
 
+
 #undef _
 #define _(_s) QT_TR_NOOP(_s)
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vcodec.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vcodec.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vcodec.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -6,7 +6,7 @@
 
 //___________________________________
 #include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 
 #include "ADM_encoder/ADM_vidEncode.hxx"
 #include "ADM_encoder/adm_encoder.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -19,12 +19,10 @@
 
 #define CHECK_GET(x,y) {*y=gtk_toggle_button_get_active( GTK_TOGGLE_BUTTON(WID(x)));}
 #define CHECK_SET(x,y) {gtk_toggle_button_set_active( GTK_TOGGLE_BUTTON(WID(x)),*y);}   
+#include "ADM_videoFilter.h"
 
-#include "ADM_video/ADM_genvideo.hxx"
-#include "ADM_filter/video_filters.h"
 
 
-
 #include "ADM_videoFilter/ADM_vobsubinfo.h"
 #include "ADM_videoFilter/ADM_vidVobSub.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -9,7 +9,7 @@
 #include "x264.h"
 }
 
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_encoder/ADM_vidEncode.hxx"
 #include "ADM_encoder/adm_encoder.h"
 #include "ADM_encoder/adm_encx264.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -12,10 +12,11 @@
 
 #include "DIA_coreToolkit.h"
 #include "DIA_fileSel.h"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
+#include "ADM_videoFilter_internal.h"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_video/ADM_videoNull.h"
-#include "ADM_filter/video_filters.h"
+
 #include "ADM_video/ADM_vidPartial.h"
 #include "avi_vars.h"
 #include "ADM_filter/vidVCD.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_ocr.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_ocr.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr/adm_ocr.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -34,9 +34,7 @@
 
 #include "DIA_coreToolkit.h"
 #include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
-#include "ADM_filter/video_filters.h"
-
+#include "ADM_videoFilter.h"
 #include "DIA_fileSel.h"
 #include "ADM_colorspace/colorspace.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_flyDialog.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_flyDialog.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_flyDialog.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -24,7 +24,7 @@
 #include "ADM_colorspace/ADM_rgb.h"
 
 #include "ADM_image.h"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "DIA_flyDialog.h"
 #include "ADM_assert.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_none.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_none.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_none.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -24,7 +24,7 @@
 
 #include "ADM_assert.h"
 
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_video/ADM_vidCNR2_param.h"
 #include "ADM_video/ADM_vidColorYuv_param.h"
 #include "ADM_video/ADM_vidPartial_param.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_gui2/preview_none.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_gui2/preview_none.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_gui2/preview_none.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -10,7 +10,7 @@
 #include "ADM_assert.h"
 #include "fourcc.h"
 #include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 
 #include "GUI_render.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_none.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_none.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_none.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -15,7 +15,7 @@
  ***************************************************************************/
 #include "config.h"
 #include "ADM_default.h"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_video/ADM_vidCNR2_param.h"
 #include "ADM_video/ADM_vidColorYuv_param.h"
 #include "ADM_video/ADM_vidEqualizer.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_srt.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -12,7 +12,7 @@
 #include "DIA_fileSel.h"
 
 #include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 
 #include "ADM_encoder/ADM_vidEncode.hxx"
 //#include "ADM_video/ADM_vidFont.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_asharp.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_asharp.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_asharp.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -29,7 +29,7 @@
 #include "ADM_default.h"
 
 #include "ADM_image.h"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_colorspace/ADM_rgb.h"
 #include "DIA_flyDialog.h"
 #include "DIA_flyDialogQt4.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_chromashift.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_chromashift.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_chromashift.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -28,7 +28,7 @@
 
 
 #include "ADM_image.h"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_colorspace/ADM_rgb.h"
 #include "DIA_flyDialog.h"
 #include "DIA_flyDialogQt4.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_contrast.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_contrast.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_contrast.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -28,7 +28,7 @@
 
 
 #include "ADM_image.h"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_colorspace/ADM_rgb.h"
 
 #include "DIA_flyDialog.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_crop.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_crop.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_crop.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -28,7 +28,7 @@
 
 
 #include "ADM_image.h"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_colorspace/ADM_rgb.h"
 #include "DIA_flyDialog.h"
 #include "DIA_flyDialogQt4.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_eq2.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_eq2.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_eq2.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -20,7 +20,7 @@
 
 
 #include "ADM_image.h"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_colorspace/ADM_rgb.h"
 #include "ADM_videoFilter/ADM_vidEq2.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_hue.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_hue.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_hue.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -27,7 +27,7 @@
 #include "ADM_default.h"
 
 #include "ADM_image.h"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_colorspace/ADM_rgb.h"
 #include "DIA_flyDialog.h"
 #include "DIA_flyDialogQt4.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_srt.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_srt.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_srt.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -25,7 +25,7 @@
 
 
 #include "ADM_image.h"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_colorspace/ADM_rgb.h"
 #include "DIA_flyDialog.h"
 #include "DIA_flyDialogQt4.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_vobsub.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_vobsub.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_vobsub.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -23,7 +23,7 @@
 
 #include "DIA_fileSel.h"
 #include "ADM_image.h"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_colorspace/ADM_rgb.h"
 
 #include "ADM_videoFilter/ADM_vobsubinfo.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_flyDialog.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_flyDialog.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_flyDialog.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -18,7 +18,7 @@
 
 #include "ADM_default.h"
 
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "DIA_flyDialog.h"
 #include "DIA_flyDialogQt4.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_index_pg.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_index_pg.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_index_pg.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -30,7 +30,7 @@
 #include "ADM_default.h"
 
 
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_encoder/ADM_vidEncode.hxx"
 #include "ADM_encoder/adm_encoder.h"
 #include "DIA_idx_pg.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/Q_mainfilter.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/Q_mainfilter.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/Q_mainfilter.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -40,8 +40,8 @@
 
 #include "DIA_coreToolkit.h"
 #include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
-#include "ADM_filter/video_filters.h"
+#include "ADM_videoFilter.h"
+#include "ADM_videoFilter_internal.h"
 #include "ADM_video/ADM_vidPartial.h"
 #include "ADM_filter/vidVCD.h"
 #include "DIA_factory.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_ocr/Q_ocr.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_ocr/Q_ocr.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_ocr/Q_ocr.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -17,8 +17,6 @@
  ***************************************************************************/
 
 #include "config.h"
-#include <string.h>
-#include <stdio.h>
 #include <math.h>
 
 #include "ui_ocr.h"
@@ -27,13 +25,12 @@
 
 #include "DIA_fileSel.h"
 #include "ADM_image.h"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_colorspace/ADM_rgb.h"
 
 #include "ADM_videoFilter/ADM_vobsubinfo.h"
 #include "ADM_videoFilter/ADM_vidVobSub.h"
 
-#include "ADM_assert.h"
 #include "ADM_ocr/ADM_ocr.h"
 #include "ADM_ocr/ADM_ocrInternal.h"
 #include "ui_ocr.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyAsharp.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyAsharp.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyAsharp.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -24,7 +24,7 @@
 #include "ADM_colorspace/ADM_rgb.h"
 
 #include "ADM_image.h"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_videoFilter/ADM_vidASharp_param.h"
 #include "DIA_flyDialog.h"
 #include "DIA_flyAsharp.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyChromaShift.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyChromaShift.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyChromaShift.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -22,7 +22,7 @@
 #include "ADM_colorspace/ADM_rgb.h"
 
 #include "ADM_image.h"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_videoFilter/ADM_vidChromaShift.h"
 #include "ADM_videoFilter/ADM_vidChromaShift_param.h"
 #include "DIA_flyDialog.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyContrast.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyContrast.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyContrast.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -20,7 +20,7 @@
 #include "ADM_colorspace/ADM_rgb.h"
 
 #include "ADM_image.h"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_videoFilter/ADM_vidContrast.h"
 #include "DIA_flyDialog.h"
 #include "DIA_flyContrast.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyCrop.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyCrop.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyCrop.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -20,7 +20,7 @@
 #include "ADM_default.h"
 
 #include "ADM_image.h"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_colorspace/ADM_rgb.h"
 #include "ADM_assert.h"
 #include "DIA_flyDialog.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyDialog.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyDialog.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyDialog.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -16,7 +16,7 @@
 
 #include "ADM_colorspace/ADM_rgb.h"
 #include "GUI_render.h"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "DIA_flyDialog.h"
 #include "ADM_assert.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyEq2.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyEq2.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyEq2.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -22,7 +22,7 @@
 #include "ADM_colorspace/ADM_rgb.h"
 
 #include "ADM_image.h"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_videoFilter/ADM_vidContrast.h"
 #include "DIA_flyDialog.h"
 #include "DIA_flyEq2.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyEraser.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyEraser.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyEraser.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -20,7 +20,7 @@
 #include "ADM_colorspace/ADM_rgb.h"
 
 #include "ADM_image.h"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_videoFilter/ADM_vidEraser.h"
 #include "DIA_flyDialog.h"
 #include "DIA_flyEraser.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyHue.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyHue.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyHue.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -30,7 +30,7 @@
 #include "ADM_default.h"
 #include "ADM_colorspace/ADM_rgb.h"
 #include "ADM_image.h"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_videoFilter/ADM_vidHue.h"
 #include "DIA_flyDialog.h"
 #include "DIA_flyHue.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyParticle.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyParticle.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyParticle.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -20,7 +20,7 @@
 #include "ADM_colorspace/ADM_rgb.h"
 
 #include "ADM_image.h"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_videoFilter/ADM_vidParticle.h"
 #include "DIA_flyDialog.h"
 #include "DIA_flyParticle.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flySrtPos.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flySrtPos.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flySrtPos.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -23,7 +23,7 @@
 #include "ADM_colorspace/ADM_rgb.h"
 #include "ADM_image.h"
 
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 class ADMfont;
 //#include "ADM_video/ADM_vidFont.h"
 #include "ADM_videoFilter/ADM_vidSRT.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flySwissArmyKnife.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flySwissArmyKnife.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flySwissArmyKnife.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -20,7 +20,7 @@
 #include "ADM_colorspace/ADM_rgb.h"
 
 #include "ADM_image.h"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_videoFilter/ADM_vidSwissArmyKnife.h"
 #include "DIA_flyDialog.h"
 #include "DIA_flySwissArmyKnife.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyThreshold.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyThreshold.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_flyThreshold.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -23,7 +23,7 @@
 #include "ADM_colorspace/ADM_rgb.h"
 
 #include "ADM_image.h"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_videoFilter/ADM_vidThreshold.h"
 #include "DIA_flyDialog.h"
 #include "DIA_flyThreshold.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -30,9 +30,9 @@
 
 #include "DIA_factory.h"
 #include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
-#include "ADM_filter/video_filters.h"
+#include "ADM_videoFilter.h"
 
+
 #include "ADM_videoFilter/ADM_vobsubinfo.h"
 #include "ADM_videoFilter/ADM_vidVobSub.h"
 #include "ADM_ocr/ADM_ocr.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_srt.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -16,7 +16,7 @@
 #ifdef USE_FREETYPE
 #include "ADM_default.h"
 #include "GUI_render.h"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "DIA_flyDialog.h"
 
 

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_cache.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_cache.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_cache.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -1,150 +0,0 @@
-//
-// C++ Implementation: ADM_cache
-//
-// Description: 
-//
-//
-// Author: mean <fixounet at free.fr>, (C) 2004
-//
-// Copyright: See COPYING file that comes with this distribution
-//
-//
-#include "ADM_default.h"
-
-#include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
-#include "ADM_video/ADM_cache.h"
-
-#include "ADM_osSupport/ADM_debugID.h"
-#define MODULE_NAME MODULE_FILTER
-#include "ADM_osSupport/ADM_debug.h"
-
-
-VideoCache::VideoCache(uint32_t nb,AVDMGenericVideoStream *in)
-{
-uint32_t sz;
-	nbEntry=nb;
-	incoming=in;
-	memcpy(&info,in->getInfo(),sizeof(info));
-	// Ready buffers
-	entry=new vidCacheEntry[nbEntry];
-	sz=(info.width*info.height*3)>>1;
-	for(uint32_t i=0;i<nbEntry;i++)
-	{
-		entry[i].frameBuffer	=new ADMImage(info.width,info.height);	
-		entry[i].frameNum	=0xffff0000;
-		entry[i].frameLock	=0;
-		entry[i].lastUse	=0xffff0000;
-	}	
-	counter=0;
-}
-//_____________________________________________
-VideoCache::~ VideoCache()
-{
-	for(uint32_t i=0;i<nbEntry;i++)
-	{
-		delete  entry[i].frameBuffer;
-	}
-	delete [] entry;
-	
-}
-//_____________________________________________
-int32_t VideoCache::searchFrame( uint32_t frame)
-{
-	for(uint32_t i=0;i<nbEntry;i++)
-	{
-		if(entry[i].frameNum==frame) return i;
-	}
-	return -1;
-}
-//_____________________________________________
-int32_t 	 VideoCache::searchPtr( ADMImage *ptr)
-{
-	for(uint32_t i=0;i<nbEntry;i++)
-	{
-		if(entry[i].frameBuffer==ptr) return i;
-	}
-	return -1;
-}
-//_____________________________________________
-uint8_t  VideoCache::unlockAll(void)
-{
-	for(uint32_t i=0;i<nbEntry;i++)
-	{		
-		entry[i].frameLock=0;		
-	}
-	return 1;
-}
-//_____________________________________________
-uint8_t  VideoCache::unlock(ADMImage *frame)
-{
-int32_t k;
-	k=searchPtr(frame) ;
-	ADM_assert(k>=0);
-	entry[k].frameLock--;	
-	return 1;	
-}
-//_____________________________________________
-uint8_t  VideoCache::purge(void)
-{
-	for(uint32_t i=0;i<nbEntry;i++)
-	{		
-		entry[i].frameLock=0;
-		entry[i].frameNum=0xffff0000;	
-		entry[i].lastUse=0xffff0000;	
-	}
-	return 1;
-
-}
-//_____________________________________________
-ADMImage *VideoCache::getImage(uint32_t frame)
-{
-int32_t i;
-uint32_t tryz=nbEntry;
-uint32_t len,flags;
-ADMImage *ptr=NULL;
-
-	// Already there ?
-	if((i=searchFrame(frame))>=0)
-	{
-		aprintf("Cache : Cache hit %d buffer %d\n",frame,i);
-		entry[i].frameLock++;
-		entry[i].lastUse=counter;
-		counter++;
-		return entry[i].frameBuffer;	
-	}
-	// Else get it!
-	
-	// First elect a new buffer, we do it by 
-	// using a RLU scheme
-	
-	uint32_t deltamax=0,delta;
-	uint32_t target=0xfff;
-	aprintf("Cache : Cache miss %d\n",frame);
-	//for(uint32_t i=0;i<nbEntry;i++) printf("%d(%d) ",frameNum[i],frameLock[i]);printf("\n");
-	for(uint32_t i=0;i<nbEntry;i++)
-	{
-		if(entry[i].frameLock) continue; 	// don"t consider locked frames
-		
-		
-		delta=abs((int)counter-(int)entry[i].lastUse);
-		if(delta>deltamax)
-		{
-			deltamax=delta;
-			target=i;
-		}
-	}
-	ADM_assert(target!=0xfff);
-	// Target is the new cache we will use
-
-	ptr=entry[target].frameBuffer;
-	if(!incoming->getFrameNumberNoAlloc(frame,&len,ptr,&flags)) return NULL;
-	// Update LRU info
-	entry[target].frameLock++;
-	entry[target].frameNum=frame;
-	entry[target].lastUse=counter;
-	counter++;	
-	return ptr;
-	
-}
-

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_cache.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_cache.h	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_cache.h	2008-04-24 17:36:16 UTC (rev 3980)
@@ -1,48 +0,0 @@
-//
-// C++ Interface: ADM_cache
-//
-// Description: 
-//
-//
-// Author: mean <fixounet at free.fr>, (C) 2004
-//
-// Copyright: See COPYING file that comes with this distribution
-//
-//
-
-#ifndef __ADM_CACHE__
-#define __ADM_CACHE__
-#include "ADM_video/ADM_genvideo.hxx"
-typedef struct vidCacheEntry
-{
-		uint32_t 	frameNum;
-		ADMImage 	*frameBuffer;
-		uint8_t		frameLock;		
-		uint32_t	lastUse;
-
-}vidCacheEntry;
-
-class VideoCache
-{
-	private:
-		vidCacheEntry	*entry;
-		ADV_Info 	info;
-		uint32_t	counter;
-		uint32_t 	nbEntry;
-		
-		AVDMGenericVideoStream *incoming;
-		
-		
-		int32_t 	searchFrame( uint32_t frame);
-		int32_t 	searchPtr( ADMImage *ptr);
-		
-	public:
-		VideoCache(uint32_t nb,AVDMGenericVideoStream *in);
-		~VideoCache(void);
-		
-		ADMImage *getImage(uint32_t frame);
-		uint8_t unlockAll(void);
-		uint8_t unlock(ADMImage  *frame);
-		uint8_t purge(void);
-};
-#endif

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_confCouple.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_confCouple.h	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_confCouple.h	2008-04-24 17:36:16 UTC (rev 3980)
@@ -1,54 +0,0 @@
-/***************************************************************************
-                          CONFcouple.cpp  -  description
-                             -------------------
-	Used to set a pair name/value
-	--> filters
-
-    begin                : Sun Apr 14 2002
-    copyright            : (C) 2002 by mean
-    email                : fixounet at free.fr
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
- #ifndef __CONFCOUPLE__
- #define __CONFCOUPLE__
-
-class CONFcouple
-{
-	private:
-			uint32_t    nb;
-			char 		**name;
-			char 		**value;
-			uint8_t	cur;
-
-			int32_t lookupName(const char *myname);
-	public:
-			CONFcouple(uint32_t nb);
-			~CONFcouple();
-			uint8_t setCouple(const char *name,uint32_t value);
-			uint8_t setCouple(const char *name,int32_t value);
-			uint8_t setCouple(const char *name,const char *value);
-			uint8_t setCouple(const char *name,const ADM_filename *value);
-			uint8_t setCouple(const char *name,double value);
-			uint8_t setCouple(const char *name,float value);
-
-			uint8_t getCouple(const char *name,int32_t *value);
-			uint8_t getCouple(const char *name,uint32_t *value);
-			uint8_t getCouple(const char *name,char **value);
-			uint8_t getCouple(const char *name,ADM_filename **value);
-			uint8_t getCouple(const char *name,double *value);
-			uint8_t getCouple(const char *name,float *value);
-			uint32_t getNumber(void) { return nb;};
-			uint8_t getEntry(uint32_t n, char **nm, char **val)
-				 { assert(n<nb); *nm=name[n];*val=value[n];return 1;};
-			void dump(void );
-
-};
-#endif

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_confCouples.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_confCouples.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_confCouples.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -1,186 +0,0 @@
-/***************************************************************************
-                          ADM_genvideo.cpp  -  description
-                             -------------------
-    begin                : Sun Apr 14 2002
-    copyright            : (C) 2002 by mean
-    email                : fixounet at free.fr
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-#include "ADM_default.h"
-
-#include "fourcc.h"
-#include "ADM_assert.h"
-
-#include "ADM_video/ADM_confCouple.h"
-static char tmpstring[1024]; // should be enougth
-CONFcouple::CONFcouple(uint32_t nub)
-{
-	nb=nub;
-	name=new char *[nb];
-	value=new char *[nb];
-
-	for(uint32_t i=0;i<nb;i++)
-		{
-			name[i]=NULL;
-			value[i]=NULL;
-		}
-
-	cur=0;
-};
-
-CONFcouple::~CONFcouple()
-{
-	for(uint32_t i=0;i<nb;i++)
-		{
-			if(name[i]) delete name[i];
-			if(value[i]) delete value[i];
-		}
-		delete [] name;
-		delete [] value;
-
-
-};
-
-uint8_t CONFcouple::setCouple(const char *myname,uint32_t val)
-{
-	ADM_assert(cur<nb);
-
-	name[cur]=ADM_strdup(myname);
-	sprintf(tmpstring,"%lu",val);
-	value[cur]=ADM_strdup(tmpstring);
-	cur++;
-	return 1;
-}
-uint8_t CONFcouple::setCouple(const char *myname,float val)
-{
-	ADM_assert(cur<nb);
-
-	name[cur]=ADM_strdup(myname);
-	sprintf(tmpstring,"%f",val);
-	value[cur]=ADM_strdup(tmpstring);
-	cur++;
-	return 1;
-}
-uint8_t CONFcouple::setCouple(const char *myname,double val)
-{
-	ADM_assert(cur<nb);
-
-	name[cur]=ADM_strdup(myname);
-	sprintf(tmpstring,"%f",val);
-	value[cur]=ADM_strdup(tmpstring);
-	cur++;
-	return 1;
-}
-uint8_t CONFcouple::setCouple(const char *myname,int32_t val)
-{
-	ADM_assert(cur<nb);
-
-	name[cur]=ADM_strdup(myname);
-	sprintf(tmpstring,"%ld",val);
-	value[cur]=ADM_strdup(tmpstring);
-	cur++;
-	return 1;
-}
-uint8_t CONFcouple::setCouple(const char *myname,const char *val)
-{
-	ADM_assert(cur<nb);
-
-	name[cur]=ADM_strdup(myname);
-	value[cur]=ADM_strdup(val);
-	cur++;
-	return 1;
-}
-uint8_t CONFcouple::setCouple(const char *myname,const ADM_filename *val)
-{
-	ADM_assert(cur<nb);
-
-	name[cur]=ADM_strdup(myname);
-	value[cur]=ADM_strdup((char *)val);
-	cur++;
-	return 1;
-}
-
-uint8_t CONFcouple::getCouple(const char *myname,uint32_t *val)
-{
-	int32_t index=lookupName(myname);
-
-	ADM_assert(index!=-1);
-	ADM_assert(index<(int)nb);
-	*val=(int)atoi(value[index]);
-	return 1;
-}
-uint8_t CONFcouple::getCouple(const char *myname,int32_t *val)
-{
-	int32_t index=lookupName(myname);
-
-	ADM_assert(index!=-1);
-	ADM_assert(index<(int)nb);
-	*val=(int)atoi(value[index]);
-	return 1;
-}
-uint8_t CONFcouple::getCouple(const char *myname,char **val)
-{
-	int32_t index=lookupName(myname);
-
-	ADM_assert(index!=-1);
-	ADM_assert(index<(int)nb);
-	*val=ADM_strdup(value[index]);
-	return 1;
-}
-uint8_t CONFcouple::getCouple(const char *myname,ADM_filename **val)
-{
-	int32_t index=lookupName(myname);
-
-	ADM_assert(index!=-1);
-	ADM_assert(index<(int)nb);
-	*val=(ADM_filename *)ADM_strdup(value[index]);
-	return 1;
-}
-
-uint8_t CONFcouple::getCouple(const char *myname,float *val)
-{
-	int32_t index=lookupName(myname);
-
-	ADM_assert(index!=-1);
-	ADM_assert(index<(int)nb);
-	sscanf(value[index],"%f",val);;
-	return 1;
-}
-uint8_t CONFcouple::getCouple(const char *myname,double *val)
-{
-	int32_t index=lookupName(myname);
-
-	ADM_assert(index!=-1);
-	ADM_assert(index<(int)nb);
-	sscanf(value[index],"%lf",val);;
-	return 1;
-}
-
-int32_t CONFcouple::lookupName(const char *myname)
-{
-	for(uint32_t i=0;i<nb;i++)
-	{
-		if(!strcmp(name[i],myname)) return i;
-
-	}
-	return -1;
-
-}
-void CONFcouple::dump(void )
-{
-	for(uint32_t i=0;i<nb;i++)
-	{
-		if(name[i]) printf ("nm:%s ",name[i]); else printf("!! no name !! ");
-		if(value[i]) printf ("val:%s ",value[i]); else printf("!! no value !! ");
-	}
-}
-

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_genvideo.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_genvideo.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_genvideo.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -1,178 +0,0 @@
-/***************************************************************************
-                          ADM_genvideo.cpp  -  description
-                             -------------------
-    begin                : Sun Apr 14 2002
-    copyright            : (C) 2002 by mean
-    email                : fixounet at free.fr
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#include "config.h"
-
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-
-#include <time.h>
-#include <sys/time.h>
-
-
-
-#include "fourcc.h"
-
-#include "config.h"
-
-#include "ADM_assert.h"
-
-
-#include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
-
-#include"ADM_video/ADM_vidCommonFilter.h"
-uint8_t AVDMGenericVideoStream::getPixel(int32_t x,int32_t y,uint8_t *data)
-{
-		if(x>(int32_t)_info.width)
-  			{
-            	x=2*_info.width-x;
-       	}
-       if(y>(int32_t)_info.height)
-  			{
-            	y=2*_info.height-y;
-       	}
-        if(   x<0)
-          x=-x;
-        if(   y<0)
-          y=-y;
-
-          return *(data+x+(y*_info.width));
-}
-
-uint32_t   AVDMGenericVideoStream::getPARWidth(void)
-{
-  if(_in)
-  {
-    return _in-> getPARWidth();
-  }
-  return 1;
-}
-/* If there is a father, retrieve PAR from him else assume it is 1:1 */
-uint32_t   AVDMGenericVideoStream::getPARHeight(void)
-{
-  if(_in)
-  {
-    return _in-> getPARHeight();
-  }
-  return 1;
-}
-
-
-uint8_t AVDMGenericVideoStream::getPixelU(int32_t x,int32_t y,uint8_t *data)
-{
-int32_t w=_info.width>>1;
-int32_t h=_info.height>>1;
-	       	
-			x=x>>1;
-			y=y>>1;
-    		
-		if(x>w)
-  			{
-            	x=2*w-x;
-       	}
-       if(y>h)
-  			{
-            	y=2*h-y;
-       	}
-        if(   x<0)
-          x=-x;
-        if(   y<0)
-          y=-y;
-
-          return *(data+x+(y*w));
-
-
-}
-uint8_t AVDMGenericVideoStream::setPixelU(uint8_t val,int32_t x,int32_t y,uint8_t *data)
-{
-int32_t w=_info.width>>1;
-int32_t h=_info.height>>1;
-	       	
-			x=x>>1;
-			y=y>>1;
-
-		if(x>w)
-  			{
-            	x=2*w-x;
-       	}
-       if(y>h)
-  			{
-            	y=2*h-y;
-       	}
-        if(   x<0)
-          x=-x;
-        if(   y<0)
-          y=-y;
-
-           *(data+x+(y*w))=val;
-           return 1;
-
-
-}
-uint8_t AVDMGenericVideoStream::unPackChroma(uint8_t *ssrc,uint8_t *ddst)
-{
-uint8_t *src,*dst,*srcu,*srcv; //,*dstu,*dstv;
-	src=ssrc;
- 	dst=ddst;
-   	// unpack   luma
-				for(uint32_t l=_info.width*_info.height;l>0;l--)
-    				{
-                   	*dst++=*src++;
-                    	dst+=2;
-          			}
-         	// unpack   chroma
-         	
-	          srcu=ssrc+_info.width*_info.height;
-       		srcv=srcu+((_info.width*_info.height)>>2);
-         		dst=ddst+1;
-
-             for(int32_t y=0;y<(int32_t)(_info.height >>1);y++)
-           	{
-		         		for(int32_t x=0;x<(int32_t)(_info.width );x++)
-             			{
-                  		
-                 			*dst=*(dst+3*_info.width)=*srcu;
-                    		dst++;
-                 			*dst=*(dst+3*_info.width)=*srcv;
-                    		dst+=2;
-                    		if(x&1) srcu++;
-                    		if(x&1) srcv++;
-
-                  	}
-                   dst+=_info.width*3;
-               }
-          return 1;
-}
-
-BUILD_CREATE(res_create,AVDMVideoStreamResize);
-BUILD_CREATE(crop_create,AVDMVideoStreamCrop);
-BUILD_CREATE(bsmear_create,AVDMVideoStreamBSMear);
-/*AVDMGenericVideoStream *res_create(AVDMGenericVideoStream *in, CONFcouple *param)
-{
- 	return new   AVDMVideoStreamResize(in,param);
-}
-
-AVDMGenericVideoStream *crop_create(AVDMGenericVideoStream *in, CONFcouple *param)
-{
- 	return new   AVDMVideoStreamCrop(in,param);
-}; ;
-AVDMGenericVideoStream *bsmear_create(AVDMGenericVideoStream *in, CONFcouple *param)
-{
- 	return new   AVDMVideoStreamBSMear(in,param);
-}; ;
-*/

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_genvideo.hxx
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_genvideo.hxx	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_genvideo.hxx	2008-04-24 17:36:16 UTC (rev 3980)
@@ -1,175 +0,0 @@
-/***************************************************************************
-                          ADM_genvideo.hxx  -  description
-                             -------------------
-    begin                : Tue Mar 19 2002
-    copyright            : (C) 2002 by mean
-    email                : fixounet at free.fr
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
- 
-#define ADM_FILTER_API_VERSION 1
-/**
-	Note for filter writers :
-
-		The constructor accept 2 parameters
-
-				_in : previous filter in the chain, the source of incoming image
-				couple : A configuration seen as couples of string
-						"size" "13" for example. Passing null means either
-						it has no parameters or set the default value for them.
-
-				_uncompressed : optional internal buffer
-
-				configure return 1 if the conf has changed, 0 else.
-
-
-
-*/
-#ifndef __ADM_VIDEO__
-#define __ADM_VIDEO__
-
-#define INT int32_t
-#include "ADM_confCouple.h"
-#include "ADM_image.h"
-
-#define Pixel uint8_t
-typedef struct
- {
- 		uint32_t width;
- 		uint32_t height;
- 		uint32_t nb_frames;
- 		uint32_t encoding;
- 		uint32_t codec;
- 		uint32_t fps1000;
-		uint32_t orgFrame;
- }ADV_Info;
-
-
-typedef struct
-{
-    uint32_t					w,h;
-    uint32_t				algo;
-}RESIZE_PARAMS;
-
-typedef struct
-{
- 	uint32_t left,right;
- 	uint32_t top,bottom;
-}CROP_PARAMS;
-
-typedef struct
-{
- 	uint32_t newfps, precision;
-}CHFPS_PARAMS;
-
-typedef struct {
-    int pixel;
-    double weight;
-} CONTRIB;
-
-
-typedef struct {
-    uint32_t  n;			/* number of contributors */
-    CONTRIB *p;			/* pointer to list of contributions */
-} CLIST;
-
-typedef struct
-{
-	uint32_t 	width;		/* horizontal size of the image in Pixels */
-	uint32_t	height;		/* vertical size of the image in Pixels */
-	Pixel *	data;		/* pointer to first scanline of image */
-
-} Image;
-
-
-
- class AVDMGenericVideoStream
- {
-   protected:
-      	ADV_Info 					_info;
-   	  ADMImage   					*_uncompressed;
-	  AVDMGenericVideoStream 	*_in;
-/* not really used */
-          uint8_t		getPixel(int32_t x,int32_t y,uint8_t *data);
-          uint8_t		getPixelU(int32_t x,int32_t y,uint8_t *data);
-          uint8_t		setPixelU(uint8_t val,int32_t x,int32_t y,uint8_t *data);
-          uint8_t 	unPackChroma(uint8_t *ssrc,uint8_t *ddst);
-/* /not really used */
-   public:
-          virtual uint32_t   getPARWidth(void);
-          virtual uint32_t   getPARHeight(void);
-
-   	// return 1 -> conf changed need rebuild, 0 means conf not changed
-        virtual 	uint8_t 	configure( AVDMGenericVideoStream *instream)=0;
-          			AVDMGenericVideoStream( void)  {_uncompressed=NULL;_in=NULL;};
-  	virtual 		~AVDMGenericVideoStream( ) {};
-        virtual char 	*printConf(void) { static char *str=(char *)"."; return str;};
-
-        virtual uint8_t 	getFrameNumberNoAlloc(uint32_t frame, uint32_t *len,
-          							ADMImage *data,uint32_t *flags)=0;
-          	ADV_Info 	*getInfo( void ) { return &_info;};
-         virtual uint8_t	getCoupledConf( CONFcouple **couples)
-	  				{*couples=NULL;return 0;};
- };
-
-void     DIA_previewInit(uint32_t width, uint32_t height);
-uint8_t  DIA_previewUpdate(uint8_t *data);
-void 	 DIA_previewEnd(void);
-uint8_t  DIA_previewStillAlive(void);
-uint8_t	 DIA_filterPreview(const char *captionText, AVDMGenericVideoStream *videoStream, uint32_t frame);
-
- // Pseudo class used to register filters automagically
- // Does not work atm
-class AVDMVideo_FilterDec
-{
-private:
-	int dum;
-public:
-  	AVDMVideo_FilterDec(char *name, AVDMGenericVideoStream *(*create) (AVDMGenericVideoStream *in, void *));
-};
-
-
-
-
-/**
-	These macros are used to build the create_ function automatically
-	That way external sw has no need to know the underlying class
-*/
-#undef NEW
-#define NEW(x) (x *)ADM_alloc(sizeof(x))
-#undef DELETE
-#define DELETE(x) {if(x){ADM_dealloc(x);x=NULL;}}
-#define CREATOR(x,clss)  return new clss(in,x);
-#define BUILD_CREATE(name,clss) AVDMGenericVideoStream *name(AVDMGenericVideoStream *in, CONFcouple *conf) \
-{		CREATOR(conf,clss); }
-#define VARIABLE_PARAMS 0xff
-#define SCRIPT_CREATE(name,clss,tmplate) \
-AVDMGenericVideoStream *name (AVDMGenericVideoStream *in, int n,Arg *args); \
-AVDMGenericVideoStream *name (AVDMGenericVideoStream *in, int n,Arg *args) \
-{ 							\
-CONFcouple		*couple; 			\
-AVDMGenericVideoStream *filter; 			\
-	couple=filterBuildCouple(&tmplate,n,args);	\
-	if(!couple) { printf("Filter built failed\n");return NULL;}\
-	filter= new clss(in,couple);			\
-	delete couple;					\
-	return filter;					\
-}
-
-
-
-#define GET(x) ADM_assert(couples->getCouple((char *)#x,&(_param->x)))
-#define GET2(x,t) (assert(couples->getCouple((char *)#x,&(t))),(_param->x)=(t))
-#define CSET(x)  (*couples)->setCouple((char *)#x,(_param->x))
-
-#define MPLAYER_RESIZE_PREFFERED
-#endif
-

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_interlaced.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_interlaced.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_interlaced.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -32,7 +32,7 @@
 #include "ADM_default.h"
 
 #include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_video/ADM_vidCommonFilter.h"
 
 //#define MMX_TRACE

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidCNR2.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidCNR2.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidCNR2.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -41,13 +41,12 @@
 #include "ADM_default.h"
 
 #include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME MODULE_FILTER
 #include "ADM_osSupport/ADM_debug.h"
-#include "ADM_video/ADM_cache.h"
-#include "ADM_filter/video_filters.h"
+#include "ADM_videoFilter.h"
 
 #include "ADM_vidCNR2_param.h"
 

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidCached.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidCached.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidCached.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -1 +0,0 @@
-// RMED

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidCached.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidCached.h	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidCached.h	2008-04-24 17:36:16 UTC (rev 3980)
@@ -1 +0,0 @@
-// RMED

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidClean.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidClean.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidClean.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -18,11 +18,11 @@
 
 
 #include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_video/ADM_vidClean.h"
-#include "ADM_filter/video_filters.h"
 
 
+
 static FILTER_PARAM smoothParam={2,{"radius","blend"}};
 
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidColorYuv.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidColorYuv.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidColorYuv.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -49,15 +49,15 @@
 #include "ADM_default.h"
 
 #include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME MODULE_FILTER
 #include "ADM_osSupport/ADM_debug.h"
 
 #include "ADM_vidColorYuv.h"
-#include "ADM_filter/video_filters.h"
 
+
 extern int DIA_coloryuv(COLOR_YUV_PARAM *param);
 
 static FILTER_PARAM coloryuv_template={19,

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidColorYuv.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidColorYuv.h	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidColorYuv.h	2008-04-24 17:36:16 UTC (rev 3980)
@@ -14,7 +14,6 @@
 #ifndef ADM_VID_COLOR_YUV_H
 #define ADM_VID_COLOR_YUV_H
 #include "ADM_vidColorYuv_param.h"
-#include "ADM_video/ADM_cache.h"
 class  ADMVideoColorYuv:public AVDMGenericVideoStream
 {
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidEqualizer.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidEqualizer.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidEqualizer.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -12,17 +12,15 @@
 
 
 #include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME MODULE_FILTER
 #include "ADM_osSupport/ADM_debug.h"
 
-
-
 #include "ADM_vidEqualizer.h"
-#include "ADM_filter/video_filters.h"
 
+
 static FILTER_PARAM equalizer_template={8,{"0","1","2","3"
 					,"4","5","6","7"}};
 BUILD_CREATE(equalizer_create,vidEqualizer);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidFieldUnblend.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidFieldUnblend.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidFieldUnblend.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -23,13 +23,12 @@
 
 #include "DIA_coreToolkit.h"
 #include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME MODULE_FILTER
 #include "ADM_osSupport/ADM_debug.h"
-#include "ADM_video/ADM_cache.h"
-#include "ADM_filter/video_filters.h"
+
 #include "DIA_enter.h"
 
 #define MUL 1

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidFieldUtil.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidFieldUtil.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidFieldUtil.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -22,7 +22,7 @@
 
 
 #include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_video/ADM_vidFieldUtil.h"
 
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidMPdelogo.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidMPdelogo.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidMPdelogo.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -10,7 +10,7 @@
 #include "ADM_default.h"
 
 #include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_video/ADM_vidCommonFilter.h"
 
 
@@ -20,9 +20,8 @@
 #include "ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale.h"
 }
 
-#include "ADM_filter/video_filters.h"
 
-#include "ADM_video/ADM_cache.h"
+
 #include "ADM_vidMPdelogo.h"
 
 class  ADMVideoMPdelogo:public AVDMGenericVideoStream

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidNull.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidNull.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidNull.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -21,26 +21,19 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include "ADM_assert.h"
-
 #include "config.h"
-#include "fourcc.h"
-
-#include "config.h"
+#include "ADM_default.h"
 #include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_video/ADM_videoNull.h"
 
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME MODULE_FILTER
 #include "ADM_osSupport/ADM_debug.h"
 
-#include "ADM_filter/video_filters.h"
 
 
+
 //_______________________________________________________________
 
 AVDMVideoStreamNull::AVDMVideoStreamNull(ADM_Composer *in,uint32_t start, uint32_t nb)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidPartial.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidPartial.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidPartial.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -23,8 +23,8 @@
 #include "ADM_default.h"
 
 #include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
-#include "ADM_filter/video_filters.h"
+#include "ADM_videoFilter.h"
+#include "ADM_videoFilter_internal.h"
 #include "ADM_video/ADM_vidPartial.h"
 
 extern AVDMGenericVideoStream *filterCreateFromTag(VF_FILTERS tag,CONFcouple *couple, AVDMGenericVideoStream *in);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidRaw.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidRaw.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidRaw.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -17,17 +17,10 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include "ADM_assert.h"
-
 #include "config.h"
-#include "fourcc.h"
-
-#include "config.h"
+#include "ADM_default.h"
 #include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_video/ADM_videoNull.h"
 
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/CMakeLists.txt	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/CMakeLists.txt	2008-04-24 17:36:16 UTC (rev 3980)
@@ -1,16 +1,12 @@
 SET(ADM_video_SRCS 
-ADM_cache.cpp                  
 ADM_vidCNR2.cpp       
 ADM_vidFieldUnblend.cpp  
 ADM_vidPartial.cpp    
-ADM_confCouples.cpp            
 ADM_vidColorYuv.cpp   
 ADM_vidFieldUtil.cpp     
 ADM_vidRaw.cpp        
-ADM_genvideo.cpp         
 ADM_vidFont.cpp
 ADM_interlaced.cpp       
-ADM_vidCached.cpp       
 ADM_vidMPdelogo.cpp      
 ADM_vidClean.cpp        
 ADM_vidEqualizer.cpp  

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_guiResize.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_guiResize.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_guiResize.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -20,8 +20,7 @@
 #include "config.h"
 #include "ADM_default.h"
 
-#include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_resizebis.hxx"
 #include "ADM_video/ADM_vidCommonFilter.h"
 #include "DIA_coreToolkit.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -22,9 +22,7 @@
 #include "ADM_default.h"
 #include <math.h>
 #include "config.h"
-#include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
-#include "ADM_filter/video_filters.h"
+#include "ADM_videoFilter.h"
 
 #include "DIA_fileSel.h"
 
@@ -37,7 +35,10 @@
 #include "ADM_osSupport/ADM_debug.h"
 
 #include "ADM_lavpp_deintparam.h"
-
+extern "C"
+{
+#include "ADM_libraries/ADM_ffmpeg/ADM_libpostproc/postprocess.h"
+};
 #include "DIA_factory.h"
 /*
 {"al", "autolevels",            0, 1, 2, LEVEL_FIX},
@@ -52,6 +53,8 @@
 {"l5", "lowpass5",              1, 1, 4, LOWPASS5_DEINT_FILTER}, *********
 */
 
+#define AVI_KEY_FRAME 0x10  // FIXME
+#define AVI_B_FRAME 0x4000
 
 
 class  ADMVideoLavPPDeint:public AVDMGenericVideoStream

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_resizebis.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_resizebis.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_resizebis.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -25,8 +25,7 @@
 
 #include "ADM_default.h"
 
-#include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_video/ADM_vidCommonFilter.h"
 #include "ADM_resizebis.hxx"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_resizeter.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_resizeter.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_resizeter.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -25,8 +25,7 @@
 #include "ADM_default.h"
 
 
-#include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_video/ADM_vidCommonFilter.h"
 #include "ADM_resizebis.hxx"
  

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidASS.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidASS.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidASS.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -13,11 +13,9 @@
 #include "config.h"
 #include "ADM_default.h"
 #include "DIA_coreToolkit.h"
-#include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_video/ADM_vidCommonFilter.h"
 #include "ADM_vidASS.h"
-#include "ADM_filter/video_filters.h"
 #include "ADM_colorspace/ADM_rgb.h"
 #include "DIA_factory.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidAddBorder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidAddBorder.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidAddBorder.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -18,11 +18,10 @@
 #include "ADM_default.h"
 
 #include "DIA_coreToolkit.h"
-#include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_vidAddBorder.h"
 #include "ADM_video/ADM_vidCommonFilter.h"
-#include "ADM_filter/video_filters.h"
+#include "ADM_videoFilter.h"
 
 #include "DIA_factory.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidAnimated.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidAnimated.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidAnimated.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -13,17 +13,16 @@
  ***************************************************************************/
 #include "ADM_default.h"
 
-#include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME MODULE_FILTER
 #include "ADM_osSupport/ADM_debug.h"
 
-#include "ADM_filter/video_filters.h"
+
 #include "ADM_vidAnimated.h"
 #include "ADM_inputs/ADM_inpics/ADM_pics.h"
-
+#include "ADM_codecs/ADM_codec.h" //For decoders
 static FILTER_PARAM animated_template={10,
     {"tc0","tc1","tc2",
     "tc3","tc4","tc5",

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidAnimated.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidAnimated.h	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidAnimated.h	2008-04-24 17:36:16 UTC (rev 3980)
@@ -20,7 +20,6 @@
 #define TOP_MARGIN 50
 
 #include "ADM_vidAnimated_param.h"
-#include "ADM_video/ADM_cache.h"
 
 class  ADMVideoAnimated:public AVDMGenericVideoStream
 {

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidAsharp.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidAsharp.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidAsharp.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -25,17 +25,12 @@
 
 #include "ADM_default.h"
 
-#include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
-#include"ADM_video/ADM_cache.h"
+#include "ADM_videoFilter.h"
 
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME MODULE_FILTER
 #include "ADM_osSupport/ADM_debug.h"
 
-
-#include "ADM_filter/video_filters.h"
-
 #include "ADM_vidASharp_param.h"
 class ASharp : public AVDMGenericVideoStream
 {

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidBSmear.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidBSmear.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidBSmear.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -25,10 +25,8 @@
 #include "config.h"
 #include "ADM_default.h"
 #include "DIA_coreToolkit.h"
-#include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_video/ADM_vidCommonFilter.h"
-#include "ADM_filter/video_filters.h"
 
 #include "DIA_factory.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidBlend.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidBlend.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidBlend.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -21,8 +21,7 @@
 #include "config.h"
 #include "ADM_default.h"
 
-#include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_vidField.h"
 
 #ifdef ADM_CPU_X86_64

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidBlendRemoval.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidBlendRemoval.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidBlendRemoval.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -17,25 +17,15 @@
  *                                                                         *
  ***************************************************************************/
 #include "config.h"
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include "ADM_assert.h"
-
-#include "config.h"
-#include "fourcc.h"
 #include "ADM_default.h"
 #include <math.h>
 
 
-#include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME MODULE_FILTER
 #include "ADM_osSupport/ADM_debug.h"
-#include "ADM_video/ADM_cache.h"
-#include "ADM_filter/video_filters.h"
 #include "DIA_enter.h"
 
 #include "DIA_factory.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidChroma.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidChroma.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidChroma.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -18,10 +18,8 @@
 #include "ADM_default.h"
 
 
-#include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_vidChroma.h"
-#include "ADM_filter/video_filters.h"
 
 
 static FILTER_PARAM nullParam={0,{""}};

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidChromaShift.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidChromaShift.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidChromaShift.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -19,11 +19,9 @@
 #include "ADM_default.h"
 
 
-#include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_vidChromaShift.h"
 
-#include "ADM_filter/video_filters.h"
 
 
 static FILTER_PARAM cshiftParam={2,{"u","v"}};

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidComputeAverage.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -20,13 +20,9 @@
  
 #include "config.h"
 #include "ADM_default.h"
-#include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 
-#include "ADM_filter/video_filters.h"
-
 #include "DIA_factory.h"
-
 #include "ADM_vidComputeAverage.h"
 
 static FILTER_PARAM computeAverageParam={5,{"start_frame",

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidComputeAverage.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidComputeAverage.h	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidComputeAverage.h	2008-04-24 17:36:16 UTC (rev 3980)
@@ -23,7 +23,6 @@
 
 #include <map>
 
-#include "ADM_video/ADM_cache.h"
 
 typedef struct COMPUTEAVERAGE_PARAM
 {

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidContrast.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidContrast.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidContrast.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -14,14 +14,13 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include "config.h"
 #include "ADM_default.h"
 #include <math.h>
 
 
-#include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_videoFilter/ADM_vidContrast.h"
-#include "ADM_filter/video_filters.h"
 
 static FILTER_PARAM contrastParam =
   { 5, {"offset", "coef", "doLuma", "doChromaU", "doChromaV"} };

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidCrop.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidCrop.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidCrop.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -22,10 +22,8 @@
 
 #include "ADM_default.h"
 
-#include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_video/ADM_vidCommonFilter.h"
-#include "ADM_filter/video_filters.h"
 
 
 static FILTER_PARAM cropParam={4,{"left","right","top","bottom"}};

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDGbob.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDGbob.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDGbob.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -23,17 +23,12 @@
 
 #include "config.h"
 #include "ADM_default.h"
-#include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
-#include"ADM_video/ADM_cache.h"
+#include "ADM_videoFilter.h"
 
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME MODULE_FILTER
 #include "ADM_osSupport/ADM_debug.h"
-#include "ADM_filter/video_filters.h"
-
 #include "ADM_vidDGbob_param.h"
-
 #include "DIA_factory.h"
 
 class DGbob : public AVDMGenericVideoStream

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDecDec.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDecDec.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDecDec.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -43,10 +43,8 @@
 #include "config.h"
 #include "ADM_default.h"
 
-#include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_vidField.h"
-#include "ADM_video/ADM_cache.h"
 
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME MODULE_FILTER
@@ -95,9 +93,9 @@
 }
 //________________________________
 #include "ADM_vidDecDec_param.h"
-#include "ADM_filter/video_filters.h"
 
 
+
 static FILTER_PARAM decdecParam={5,{"cycle","mode","quality","threshold","threshold2"}};
 
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -33,15 +33,13 @@
 #include "config.h"
 #include "ADM_default.h"
 
-#include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
 
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME MODULE_FILTER
 #include "ADM_osSupport/ADM_debug.h"
+#include "ADM_videoFilter.h"
 
 #include "ADM_vidDecTelecide.h"
-#include "ADM_filter/video_filters.h"
 #include "DIA_factory.h"
 
 static FILTER_PARAM decomb_template={16,{"order","back","guide",

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDecTelecide.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDecTelecide.h	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDecTelecide.h	2008-04-24 17:36:16 UTC (rev 3980)
@@ -18,7 +18,6 @@
 	along with this program; if not, write to the Free Software
 	Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
 */
-#include "ADM_video/ADM_cache.h"
 #undef DEBUG_PATTERN_GUIDANCE
 
 #undef WINDOWED_MATCH

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDeintASM.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDeintASM.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDeintASM.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -21,8 +21,7 @@
 #include "config.h"
 #include "ADM_default.h"
 
-#include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 
 #include"ADM_vidField.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDeinterlace.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDeinterlace.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDeinterlace.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -22,11 +22,9 @@
  ***************************************************************************/
 #include "ADM_default.h"
 
-#include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 
 #include"ADM_vidDeinterlace.h"
-#include "ADM_filter/video_filters.h"
 
 #include "DIA_factory.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDelta.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDelta.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDelta.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -7,14 +7,11 @@
 
 #include "ADM_default.h"
 
-#include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME MODULE_FILTER
 #include "ADM_osSupport/ADM_debug.h"
-#include "ADM_video/ADM_cache.h"
-#include "ADM_filter/video_filters.h"
 
 //#include "ADM_vidCNR2_param.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDenoise.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDenoise.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDenoise.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -24,10 +24,8 @@
 #include "config.h"
 #include "ADM_default.h"
 
-#include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_vidDenoise.h"
-#include "ADM_filter/video_filters.h"
 
 
 #include "DIA_factory.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDropOut.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDropOut.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDropOut.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -17,10 +17,8 @@
 #include "config.h"
 #include "ADM_default.h"
 
-#include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_vidDropOut.h"
-#include "ADM_filter/video_filters.h"
 #include "DIA_factory.h"
 
 static FILTER_PARAM dropParam={1,{"threshold"}};

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDropOut.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDropOut.h	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDropOut.h	2008-04-24 17:36:16 UTC (rev 3980)
@@ -16,7 +16,6 @@
  ***************************************************************************/
 #ifndef __DROPOUT__
 #define __DROPOUT__   
-#include "ADM_video/ADM_cache.h"
  
 class  ADMVideoDropOut:public AVDMGenericVideoStream
  {

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDvbSub.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDvbSub.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDvbSub.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -32,10 +32,8 @@
 #include "fourcc.h"
 
 
-#include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_video/ADM_vidCommonFilter.h"
-#include "ADM_filter/video_filters.h"
 #include "ADM_colorspace/ADM_rgb.h"
 #include "ADM_colorspace/colorspace.h"
 #include "ADM_codecs/ADM_codec.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidEq2.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidEq2.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidEq2.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -21,11 +21,8 @@
 #include <math.h>
 
 
-#include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
-#include "ADM_filter/video_filters.h"
+#include "ADM_videoFilter.h"
 #include "DIA_factory.h"
-#include "ADM_video/ADM_cache.h"
 
 
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidEraser.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidEraser.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidEraser.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -32,13 +32,10 @@
 #include "avi_vars.h"
 
 #include "ADM_toolkit/toolkit.hxx"
-#include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
-
+#include "ADM_videoFilter.h"
 #include "ADM_encoder/ADM_vidEncode.hxx"
 #include "ADM_encoder/adm_encoder.h"
 
-#include "ADM_filter/video_filters.h"
 
 #include "DIA_factory.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidEraser.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidEraser.h	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidEraser.h	2008-04-24 17:36:16 UTC (rev 3980)
@@ -20,7 +20,6 @@
 
 #include <map>
 
-#include "ADM_video/ADM_cache.h"
 
 #include <vector>
 #include <string>

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFade.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFade.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFade.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -13,14 +13,11 @@
 #include "ADM_default.h"
 
 #include "DIA_coreToolkit.h"
-#include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
-#include"ADM_video/ADM_cache.h"
+#include "ADM_videoFilter.h"
 
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME MODULE_FILTER
 #include "ADM_osSupport/ADM_debug.h"
-#include "ADM_filter/video_filters.h"
 #include "ADM_vidFade_param.h"
 
 #include "DIA_factory.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFastConvolution.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFastConvolution.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFastConvolution.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -18,11 +18,7 @@
 #include "ADM_default.h"
 
 
-#include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
-
-#include"ADM_filter/video_filters.h"
+#include "ADM_videoFilter.h"
 #include "DIA_factory.h"
 #include "ADM_vidConvolution.hxx"
 #include "ADM_assert.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFields.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFields.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFields.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -16,8 +16,7 @@
  ***************************************************************************/
 #include "config.h"
 #include "ADM_default.h"
-#include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_vidField.h"
 #include "DIA_enter.h"
 //_______________________________________________________________

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFlipV.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFlipV.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFlipV.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -17,10 +17,8 @@
 
 #include "ADM_default.h"
 
-#include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_vidFlipV.h"
-#include "ADM_filter/video_filters.h"
 
 
 static FILTER_PARAM flipParam={0,{""}};

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFlux.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFlux.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFlux.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -18,31 +18,13 @@
  *                                                                         *
  ***************************************************************************/
 #include "config.h" 
- 
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include "ADM_assert.h"
 #include <math.h>
-
 #include "ADM_default.h"
 #include "fourcc.h"
-#include "config.h"
-
-
-
-//#include "ADM_toolkit/toolkit.hxx"
-#include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
-
-
+#include "ADM_videoFilter.h"
 #include "DIA_factory.h"
 #include "ADM_vidFlux.h"
-#include "ADM_filter/video_filters.h"
 
-
-#include "ADM_assert.h"
-
 static int16_t scaletab[16];
 static uint64_t scaletab_MMX[65536];
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFlux.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFlux.h	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidFlux.h	2008-04-24 17:36:16 UTC (rev 3980)
@@ -17,7 +17,6 @@
  
 #ifndef __FLUX__
 #define __FLUX__   
-#include "ADM_video/ADM_cache.h"
 typedef struct FLUX_PARAM
 {
 	uint32_t temporal_threshold;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidForcedPP.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidForcedPP.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidForcedPP.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -15,8 +15,7 @@
 #include "config.h"
 #include "ADM_default.h"
 
-#include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME MODULE_FILTER
@@ -24,10 +23,14 @@
 
 #include "ADM_vidForcedPP.h"
 #include "DIA_enter.h"
-#include "ADM_filter/video_filters.h"
 
 #include "DIA_factory.h"
 
+// FIXME
+#define AVI_KEY_FRAME   0x10
+#define AVI_B_FRAME	0x4000	 // hopefully it is not used..
+
+
 static FILTER_PARAM ppParam={3,{"postProcType","postProcStrength","forcedQuant"}};
 
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidHardIvtcRemoval.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidHardIvtcRemoval.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidHardIvtcRemoval.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -19,17 +19,13 @@
 #include "config.h"
 #include "ADM_default.h"
 
-#include "fourcc.h"
 #include <math.h>
 
-#include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME MODULE_FILTER
 #include "ADM_osSupport/ADM_debug.h"
-#include "ADM_video/ADM_cache.h"
-#include "ADM_filter/video_filters.h"
 #include "DIA_enter.h"
 
 #include "DIA_factory.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidHue.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidHue.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidHue.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -15,11 +15,10 @@
 #include <math.h>
 
 
-#include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
-#include "ADM_filter/video_filters.h"
+#include "ADM_videoFilter.h"
+
+
 #include "DIA_enter.h"
-#include "ADM_video/ADM_cache.h"
 
 
 #include "ADM_vidHue.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -38,13 +38,10 @@
 #include "ADM_default.h"
 
 
-#include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
-
+#include "ADM_videoFilter.h"
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME MODULE_FILTER
 #include "ADM_osSupport/ADM_debug.h"
-#include "ADM_filter/video_filters.h"
 #include "ADM_vidKernelDeint.h"
 
 #include "DIA_factory.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidKernelDeint.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidKernelDeint.h	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidKernelDeint.h	2008-04-24 17:36:16 UTC (rev 3980)
@@ -2,7 +2,6 @@
 #ifndef ADM_KERNELDEINT
 #define ADM_KERNELDEINT
 
-#include "ADM_video/ADM_cache.h"
 typedef struct  KERNEL_CONF
 {
 	uint32_t		order, threshold;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidLargeMedian.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidLargeMedian.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidLargeMedian.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -23,11 +23,9 @@
 #include "ADM_default.h"
 
 
-#include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 
 #include"ADM_vidLargeMedian.h"
-#include "ADM_filter/video_filters.h"
 #include "DIA_factory.h"
 
 static FILTER_PARAM nullParam={2,{"chroma","luma"}};

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidLogo.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidLogo.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidLogo.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -21,10 +21,8 @@
 
 #include "ADM_default.h"
 
-#include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_video/ADM_vidCommonFilter.h"
-#include "ADM_filter/video_filters.h"
 #include "ADM_colorspace/ADM_rgb.h"
 #include "DIA_factory.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidLuma.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidLuma.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidLuma.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -17,10 +17,8 @@
 
 #include "ADM_default.h"
 
-#include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_vidLuma.h"
-#include "ADM_filter/video_filters.h"
 
 
 static FILTER_PARAM nullParam={0,{""}};

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLD3D.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLD3D.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLD3D.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -21,14 +21,12 @@
 #include "config.h"
 #include "ADM_default.h"
 
-#include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_vidMPLD3D.h"
 
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME MODULE_FILTER
 #include "ADM_osSupport/ADM_debug.h"
-#include "ADM_filter/video_filters.h"
 
 #include "DIA_factory.h"
 static FILTER_PARAM mp3Param={3,{"param1","param2","param3"}};

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLD3D.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLD3D.h	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLD3D.h	2008-04-24 17:36:16 UTC (rev 3980)
@@ -20,7 +20,7 @@
  
 #ifndef _D3D__
 #define _D3D__   
-#include "ADM_video/ADM_vidCached.h"
+
 typedef struct MPD3D_PARAM
 {
 	double  param1;  // Luma 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLD3Dlow.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLD3Dlow.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLD3Dlow.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -22,14 +22,12 @@
 #include "ADM_default.h"
 
 
-#include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_vidMPLD3Dlow.h"
 
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME MODULE_FILTER
 #include "ADM_osSupport/ADM_debug.h"
-#include "ADM_filter/video_filters.h"
 
 #include "DIA_factory.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLD3Dlow.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLD3Dlow.h	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLD3Dlow.h	2008-04-24 17:36:16 UTC (rev 3980)
@@ -20,7 +20,7 @@
 
 #ifndef __D3DLOW__
 #define __D3DLOW__
-#include "ADM_video/ADM_vidCached.h"
+
 #include "ADM_vidMPLD3D.h"
 
 class  ADMVideoMPD3Dlow:public AVDMGenericVideoStream

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLResize.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLResize.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLResize.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -22,8 +22,7 @@
 #include "config.h"
 #include "ADM_default.h"
 #include "DIA_coreToolkit.h"
-#include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_video/ADM_vidCommonFilter.h"
 
 
@@ -32,7 +31,6 @@
 #include "ADM_libraries/ADM_ffmpeg/ADM_lavutil/avutil.h"
 #include "ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale.h"
 }
-#include "ADM_filter/video_filters.h"
 
 typedef struct alg
 {

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMSharpen.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMSharpen.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMSharpen.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -36,15 +36,12 @@
 #include "config.h"
 #include "ADM_default.h"
 
-#include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
-#include "ADM_video/ADM_cache.h"
+#include "ADM_videoFilter.h"
 
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME MODULE_FILTER
 #include "ADM_osSupport/ADM_debug.h"
 
-#include "ADM_filter/video_filters.h"
 #include "ADM_vidMSharpen_param.h"
 #include "DIA_factory.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -26,11 +26,9 @@
 #include "ADM_lavcodec.h"
 
 
-#include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 
-#include "ADM_filter/video_filters.h"
-#include "ADM_video/ADM_cache.h"
+#include "ADM_videoFilter.h"
 
 #include "ADM_vidMcDeint_param.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMosaic.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMosaic.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMosaic.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -17,8 +17,7 @@
 #include "config.h"
 #include "ADM_default.h"
 
-#include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_video/ADM_vidCommonFilter.h"
 
 #include "DIA_factory.h"
@@ -32,9 +31,6 @@
 }
 
 
-
-#include "ADM_filter/video_filters.h"
-#include "ADM_video/ADM_cache.h"
 #include "ADM_vidMosaic_param.h"
 
 class  ADMVideoMosaic:public AVDMGenericVideoStream

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMsmooth.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMsmooth.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMsmooth.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -31,15 +31,12 @@
 #include "config.h"
 #include "ADM_default.h"
 
-#include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
-#include "ADM_video/ADM_cache.h"
+#include "ADM_videoFilter.h"
 
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME MODULE_FILTER
 #include "ADM_osSupport/ADM_debug.h"
 
-#include "ADM_filter/video_filters.h"
 #include "DIA_factory.h"
 
 #if 0

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidPalShift.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidPalShift.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidPalShift.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -16,13 +16,8 @@
  ***************************************************************************/
 #include "config.h"
 #include "ADM_default.h"
-
-
-#include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_vidPalShift.h"
-#include "ADM_filter/video_filters.h"
-
 #include "DIA_factory.h"
 
 static FILTER_PARAM nullParam={0,{""}};

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidPalShift.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidPalShift.h	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidPalShift.h	2008-04-24 17:36:16 UTC (rev 3980)
@@ -16,7 +16,6 @@
  ***************************************************************************/
 #ifndef PALSHIFT__
 #define PALSHIFT__
-#include "ADM_video/ADM_cache.h" 
  class  ADMVideoPalShift:public AVDMGenericVideoStream
  {
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidPalSmart.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidPalSmart.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidPalSmart.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -16,12 +16,9 @@
 
 #include "ADM_default.h"
 
-#include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
-
+#include "ADM_videoFilter.h"
 #include"ADM_vidDeinterlace.h"
 #include"ADM_vidPalSmart.h"
-#include "ADM_filter/video_filters.h"
 
 #define MATCH_THRESH 100
 #define ASM_DEINT

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidPalSmart.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidPalSmart.h	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidPalSmart.h	2008-04-24 17:36:16 UTC (rev 3980)
@@ -14,7 +14,6 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include "ADM_video/ADM_cache.h"
 class  ADMVideoTelecide:public ADMVideoFields
  {
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidParticle.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidParticle.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidParticle.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -28,8 +28,7 @@
 #include "fourcc.h"
 
 #include "ADM_toolkit/toolkit.hxx"
-#include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 
 #include "ADM_encoder/ADM_vidEncode.hxx"
 #include "ADM_encoder/adm_encoder.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidParticle.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidParticle.h	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidParticle.h	2008-04-24 17:36:16 UTC (rev 3980)
@@ -21,7 +21,6 @@
 #include <algorithm>
 #include <math.h>
 
-#include "ADM_video/ADM_cache.h"
 
 struct PARTICLE_PARAM
 {

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidPulldown.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidPulldown.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidPulldown.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -22,8 +22,7 @@
 
 #include "ADM_default.h"
 
-#include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_video/ADM_vidFieldUtil.h"
 #include "ADM_vidPulldown.h"
 #include "ADM_video/ADM_interlaced.h"
@@ -31,7 +30,6 @@
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME MODULE_FILTER
 #include "ADM_osSupport/ADM_debug.h"
-#include "ADM_filter/video_filters.h"
 
 
 static FILTER_PARAM swapParam={0,{""}};

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidResampleFPS.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidResampleFPS.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidResampleFPS.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -20,11 +20,8 @@
 #include "config.h"
 #include "ADM_default.h"
 
-#include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
-#include "ADM_filter/video_filters.h"
+#include "ADM_videoFilter.h"
 #include "DIA_enter.h"
-#include "ADM_video/ADM_cache.h"
 #include "DIA_factory.h"
 
 static FILTER_PARAM ResampParam={2,{"newfps","use_linear"}};

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidResize.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidResize.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidResize.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -21,24 +21,15 @@
  *                                                                         *
  ***************************************************************************/
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include "ADM_assert.h"
-
 #include "config.h"
-#include "fourcc.h"
-#include "config.h"
-#include "avi_vars.h"
+#include "ADM_default.h"
 #ifdef HAVE_ENCODER
 
 
 
-#include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_resizebis.hxx"
 #include "ADM_video/ADM_vidCommonFilter.h"
-#include "ADM_filter/video_filters.h"
 
 
 static FILTER_PARAM mpresizeParam={3,{"w","h","algo"}};

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidReverse.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidReverse.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidReverse.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -9,14 +9,11 @@
 
 #include "ADM_default.h"
 
-#include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
-#include"ADM_video/ADM_cache.h"
+#include "ADM_videoFilter.h"
 
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME MODULE_FILTER
 #include "ADM_osSupport/ADM_debug.h"
-#include "ADM_filter/video_filters.h"
 
 
 class AVDM_Reverse : public AVDMGenericVideoStream

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidRotate.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidRotate.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidRotate.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -15,18 +15,8 @@
  *                                                                         *
  ***************************************************************************/
 #include "config.h"
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-
 #include "ADM_default.h"
-
-
-
-#include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
-//#include "ADM_video/ADM_vidRotate.h"
-#include "ADM_filter/video_filters.h"
+#include "ADM_videoFilter.h"
 #include "ADM_assert.h"
         
 #include "DIA_factory.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSRT.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSRT.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSRT.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -20,8 +20,7 @@
 #ifdef USE_FREETYPE
 #include "ADM_default.h"
 #include "DIA_coreToolkit.h"
-#include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 
 #include "ADM_video/ADM_vidFont.h"
 #include "ADM_videoFilter/ADM_vidSRT.h"
@@ -30,7 +29,6 @@
 #define MODULE_NAME MODULE_FILTER
 #include "ADM_osSupport/ADM_debug.h"
 
-#include "ADM_filter/video_filters.h"
 #include "prefs.h"
 
 static FILTER_PARAM subParam={15,{"_fontsize","_subname","_fontname","_charset",

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSRTRender.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSRTRender.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSRTRender.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -23,8 +23,7 @@
 #include "ADM_default.h"
 
 
-#include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 
 #include "ADM_video/ADM_vidFont.h"
 #include "ADM_videoFilter/ADM_vidSRT.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSRTload.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSRTload.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSRTload.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -36,8 +36,7 @@
 
 #include "ADM_default.h"
 
-#include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 
 #include "ADM_video/ADM_vidFont.h"
 #include "ADM_videoFilter/ADM_vidSRT.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSeparateField.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSeparateField.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSeparateField.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -23,11 +23,9 @@
 #include "ADM_default.h"
 
 
-#include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_video/ADM_vidFieldUtil.h"
 #include "ADM_vidSeparateField.h"
-#include "ADM_filter/video_filters.h"
 
 
 static FILTER_PARAM swapParam={0,{""}};

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSeparateField.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSeparateField.h	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSeparateField.h	2008-04-24 17:36:16 UTC (rev 3980)
@@ -1,7 +1,6 @@
 /*
 
 */
-#include "ADM_video/ADM_cache.h"
   class  AVDMVideoSeparateField:public AVDMGenericVideoStream
  {
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSoften.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSoften.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSoften.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -19,8 +19,7 @@
 #include "config.h"
 #include "ADM_default.h"
 
-#include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME MODULE_FILTER
@@ -28,8 +27,6 @@
 
 #include "ADM_vidSoften.h"
 #include "DIA_enter.h"
-#include "ADM_filter/video_filters.h"
-
 #include "DIA_factory.h"
 
 static FILTER_PARAM softParam={3,{"radius","luma","chroma"}};

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidStabilize.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidStabilize.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidStabilize.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -20,10 +20,8 @@
 #include "ADM_default.h"
 
 
-#include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_vidStabilize.h"
-#include "ADM_filter/video_filters.h"
 
 #include "DIA_factory.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidStabilize.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidStabilize.h	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidStabilize.h	2008-04-24 17:36:16 UTC (rev 3980)
@@ -16,7 +16,6 @@
  ***************************************************************************/
 #ifndef __STABL__
 #define __STABL__   
-#include "ADM_video/ADM_cache.h" 
  class  ADMVideoStabilize:public AVDMGenericVideoStream
  {
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSwapFields.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSwapFields.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSwapFields.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -21,11 +21,9 @@
 #include "ADM_default.h"
 
 
-#include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_video/ADM_vidFieldUtil.h"
 #include "ADM_vidSwapFields.h"
-#include "ADM_filter/video_filters.h"
 
 
 static FILTER_PARAM swapParam={0,{""}};

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSwapSmart.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSwapSmart.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSwapSmart.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -21,15 +21,13 @@
 #include "ADM_default.h"
 
 
-#include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_vidSwapSmart.h"
 #include "ADM_video/ADM_interlaced.h"
 
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME MODULE_FILTER
 #include "ADM_osSupport/ADM_debug.h"
-#include "ADM_filter/video_filters.h"
 
 
 static FILTER_PARAM nullParam={0,{""}};

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -31,8 +31,7 @@
 #include "avi_vars.h"
 
 #include "ADM_toolkit/toolkit.hxx"
-#include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 
 #include "ADM_encoder/ADM_vidEncode.hxx"
 #include "ADM_encoder/adm_encoder.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.h	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.h	2008-04-24 17:36:16 UTC (rev 3980)
@@ -20,7 +20,6 @@
 
 #include <map>
 
-#include "ADM_video/ADM_cache.h"
 
 //#include <vector>
 #include <string>

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidTdeint.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidTdeint.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidTdeint.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -32,25 +32,15 @@
 */
 
 #include "config.h"
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include "ADM_assert.h"
-
-#include "config.h"
-#include "fourcc.h"
 #include "ADM_default.h"
 #include <math.h>
 
 
-#include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME MODULE_FILTER
 #include "ADM_osSupport/ADM_debug.h"
-#include "ADM_video/ADM_cache.h"
-#include "ADM_filter/video_filters.h"
 #include "DIA_factory.h"
 
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidThreshold.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidThreshold.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidThreshold.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -16,13 +16,8 @@
  
 #include "config.h"
 #include "ADM_default.h"
-#include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
-
-#include "ADM_filter/video_filters.h"
-
+#include "ADM_videoFilter.h"
 #include "DIA_factory.h"
-
 #include "ADM_vidThreshold.h"
 
 // #define THRESHOLD_HISTO 1

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidThreshold.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidThreshold.h	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidThreshold.h	2008-04-24 17:36:16 UTC (rev 3980)
@@ -17,7 +17,6 @@
 #ifndef __THRESHOLD__
 #define __THRESHOLD__   
 
-#include "ADM_video/ADM_cache.h"
 
 typedef struct THRESHOLD_PARAM
 {

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidUVSwap.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidUVSwap.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidUVSwap.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -14,13 +14,11 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-
+#include "config.h"
 #include "ADM_default.h"
 
-#include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_vidUVSwap.h"
-#include "ADM_filter/video_filters.h"
 
 
 static FILTER_PARAM nullParam={0,{""}};

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidUnblend.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidUnblend.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidUnblend.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -8,14 +8,11 @@
 #include <math.h>
 
 
-#include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME MODULE_FILTER
 #include "ADM_osSupport/ADM_debug.h"
-#include "ADM_video/ADM_cache.h"
-#include "ADM_filter/video_filters.h"
 #include "ADM_vidUnblend_param.h"
 
 class vidUnblend:public AVDMGenericVideoStream

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVlad.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVlad.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVlad.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -22,10 +22,8 @@
  ***************************************************************************/
 #include "config.h"
 #include "ADM_default.h"
-#include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_vidVlad.h"
-#include "ADM_filter/video_filters.h"
 
 #include "DIA_factory.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVlad.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVlad.h	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVlad.h	2008-04-24 17:36:16 UTC (rev 3980)
@@ -16,7 +16,6 @@
  ***************************************************************************/
 #ifndef __VLAD__
 #define __VLAD__   
-#include "ADM_video/ADM_cache.h" 
 typedef struct VLAD_PARAM
 {
 	uint32_t ythresholdMask;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVobSubRender.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVobSubRender.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVobSubRender.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -53,9 +53,7 @@
 #include "avi_vars.h"
 
 
-#include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
-#include "ADM_filter/video_filters.h"
+#include "ADM_videoFilter.h"
 #include "DIA_fileSel.h"
 #include "ADM_colorspace/colorspace.h"
 #include "ADM_vobsubinfo.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVobsub.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVobsub.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVobsub.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -20,32 +20,12 @@
  *                                                                         *
  ***************************************************************************/
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <math.h>
-#include "ADM_assert.h"
-
 #include "config.h"
-#include "fourcc.h"
-
-#include "config.h"
-#include "avi_vars.h"
-
-
-
-
-#include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
-#include "ADM_filter/video_filters.h"
-
-
+#include "ADM_default.h"
+#include "ADM_videoFilter.h"
 #include "DIA_fileSel.h"
-
 #include "ADM_colorspace/colorspace.h"
-
 #include "ADM_vobsubinfo.h"
-
 #define VOBSUB "/capture/sub/phone.sub"
 
 #include "ADM_vidVobSub.h"
@@ -53,8 +33,8 @@
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME MODULE_FILTER
 #include "ADM_osSupport/ADM_debug.h"
+#include <math.h>
 
-
 extern uint8_t DIA_vobsub(vobSubParam *param);
 
 static FILTER_PARAM vobsubParam={3,{"subname","index","subShift"}};

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidWhirl.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidWhirl.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidWhirl.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -20,15 +20,13 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include "config.h"
 #include "ADM_default.h"
 #include <math.h>
 //#define LOOP
 
+#include "ADM_videoFilter.h"
 
-#include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
-#include "ADM_filter/video_filters.h"
-
 static void Process(uint8_t *src,uint8_t *data, uint32_t width, uint32_t height,double frac);
 
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidYadif.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidYadif.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidYadif.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -28,11 +28,9 @@
 #include "config.h"
 #include "ADM_default.h"
 
-#include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
-#include "ADM_video/ADM_cache.h"
-#include "ADM_filter/video_filters.h"
 
+#include "ADM_videoFilter.h"
+
 #include "DIA_factory.h"
 //************************************************
 #define MIN(a,b) ((a) > (b) ? (b) : (a))

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vobsubinfo.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vobsubinfo.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vobsubinfo.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -18,9 +18,7 @@
  *                                                                         *
  ***************************************************************************/
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
+#include "config.h"
 
 #include "ADM_default.h"
 #include "ADM_vobsubinfo.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADMmpdetc.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADMmpdetc.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADMmpdetc.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -21,8 +21,7 @@
 #include "fourcc.h"
 
 #include "ADM_toolkit/toolkit.hxx"
-#include "ADM_editor/ADM_edit.hxx"
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
 #include "ADM_video/ADM_mpdetc.h"
 
 #include "ADM_osSupport/ADM_debugID.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt	2008-04-24 17:36:16 UTC (rev 3980)
@@ -55,6 +55,7 @@
 INCLUDE_DIRECTORIES("${CMAKE_BINARY_DIR}/config")
 INCLUDE_DIRECTORIES("${CMAKE_CURRENT_SOURCE_DIR}/ADM_core/include")
 INCLUDE_DIRECTORIES("${CMAKE_CURRENT_SOURCE_DIR}/ADM_coreUI/include")
+INCLUDE_DIRECTORIES("${CMAKE_CURRENT_SOURCE_DIR}/ADM_coreImage/include")
 INCLUDE_DIRECTORIES("${CMAKE_CURRENT_SOURCE_DIR}/ADM_libraries/ADM_utilities")
 INCLUDE_DIRECTORIES("${CMAKE_CURRENT_SOURCE_DIR}/ADM_libraries/ADM_ffmpeg/ADM_lavutil")
 INCLUDE_DIRECTORIES("${CMAKE_CURRENT_SOURCE_DIR}/ADM_libraries/ADM_ffmpeg/ADM_lavcodec")
@@ -306,6 +307,8 @@
 ADD_LIB_ALL_TARGETS(ADM_core)
 ADD_SUBDIRECTORY(ADM_coreUI)
 ADD_LIB_ALL_TARGETS(ADM_coreUI)
+ADD_SUBDIRECTORY(ADM_coreImage)
+ADD_LIB_ALL_TARGETS(ADM_coreImage)
 
 ###########################################
 # External libs

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/gtk_gui.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/gtk_gui.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/gtk_gui.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -55,8 +55,8 @@
 #include "DIA_factory.h"
 #include "DIA_enter.h"
 
-#include "ADM_video/ADM_genvideo.hxx"
-#include "ADM_filter/video_filters.h"
+#include "ADM_videoFilter.h"
+#include "ADM_videoFilter_internal.h"
 #include "ADM_encoder/ADM_vidEncode.hxx"
 #include "ADM_codecs/ADM_ffmpeg.h"
 #include "ADM_libraries/ADM_libmpeg2enc/ADM_mpeg2enc.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/gui_navigate.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/gui_navigate.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/gui_navigate.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -34,8 +34,8 @@
 #include "DIA_coreToolkit.h"
 #include "ADM_userInterfaces/ADM_commonUI/GUI_render.h"
 #include "ADM_userInterfaces/ADM_commonUI/DIA_working.h"
-#include "ADM_video/ADM_genvideo.hxx"
-#include "ADM_filter/video_filters.h"
+#include "ADM_videoFilter.h"
+#include "ADM_videoFilter_internal.h"
 #include "ADM_userInterfaces/ADM_commonUI/DIA_busy.h"
 #include "ADM_userInterfaces/ADM_commonUI/GUI_ui.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/gui_savenew.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/gui_savenew.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/gui_savenew.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -25,7 +25,8 @@
 #include "ADM_audio/aviaudio.hxx"
 #include "ADM_audiofilter/audioprocess.hxx"
 
-#include "ADM_video/ADM_genvideo.hxx"
+#include "ADM_videoFilter.h"
+#include "ADM_videoFilter_internal.h"
 //#include "ADM_codecs/ADM_divxEncode.h"
 #include "ADM_encoder/ADM_vidEncode.hxx"
 
@@ -38,8 +39,8 @@
 
 #include "ADM_outputs/oplug_avi/op_saveprocess.h"
 #include "ADM_outputs/oplug_avi/op_savesmart.hxx"
-#include "ADM_filter/video_filters.h"
 
+
 #include "DIA_fileSel.h"
 #include "ADM_userInterfaces/ADM_commonUI/GUI_ui.h"
 #include "ADM_outputs/oplug_mpegFF/oplug_vcdff.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/guiplay.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/guiplay.cpp	2008-04-24 17:07:32 UTC (rev 3979)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/guiplay.cpp	2008-04-24 17:36:16 UTC (rev 3980)
@@ -33,9 +33,8 @@
 #include "DIA_coreToolkit.h"
 #include "ADM_audio/aviaudio.hxx"
 #include "ADM_audiofilter/audioprocess.hxx"
-
-#include "ADM_video/ADM_genvideo.hxx"
-#include "ADM_filter/video_filters.h"
+#include "ADM_videoFilter.h"
+#include "ADM_videoFilter_internal.h"
 #include "gtkgui.h"
 #include "ADM_userInterfaces/ADM_commonUI/GUI_render.h"
 #include "ADM_audiofilter/audioeng_buildfilters.h"



From gruntster at mail.berlios.de  Thu Apr 24 19:39:54 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Thu, 24 Apr 2008 19:39:54 +0200
Subject: [Avidemux-svn-commit] r3981 - in
	branches/avidemux_2.4_branch/avidemux: ADM_outputs/oplug_avi
	ADM_userInterfaces/ADM_GTK/ADM_dialog
	ADM_userInterfaces/ADM_commonUI
Message-ID: <200804241739.m3OHdsET029741@sheep.berlios.de>

Author: gruntster
Date: 2008-04-24 19:39:51 +0200 (Thu, 24 Apr 2008)
New Revision: 3981

Modified:
   branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_chromaShift.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp
Log:
[I18N] make various strings translatable

Modified: branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp	2008-04-24 17:36:16 UTC (rev 3980)
+++ branches/avidemux_2.4_branch/avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp	2008-04-24 17:39:51 UTC (rev 3981)
@@ -247,7 +247,7 @@
         }
   else
           {
-                          guiSetPhasis (QT_TR_NOOP("Encoding, 2nd pass"));
+                          guiSetPhasis (QT_TR_NOOP("2nd Pass"));
         }
   }
   // first read

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_chromaShift.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_chromaShift.cpp	2008-04-24 17:36:16 UTC (rev 3980)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_chromaShift.cpp	2008-04-24 17:39:51 UTC (rev 3981)
@@ -64,7 +64,7 @@
 
         dialog=create_ChromaShift();
         gtk_register_dialog(dialog);
-        gtk_window_set_title (GTK_WINDOW (dialog), QT_TR_NOOP("ASHARP"));
+        gtk_window_set_title (GTK_WINDOW (dialog), QT_TR_NOOP("Chroma Shift"));
         gtk_widget_show(dialog);
 	
         myCrop=new flyChromaShift( width, height,in,WID(drawingarea1),WID(hscale));

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp	2008-04-24 17:36:16 UTC (rev 3980)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp	2008-04-24 17:39:51 UTC (rev 3981)
@@ -60,9 +60,9 @@
 };
 diaMenuEntry vbvM[3]=
 {
-	{40,"VCD 40 kB"},
-	{112,"SVCD 112 kB"},
-	{224,"DVD 224 kB"}
+	{40,QT_TR_NOOP("VCD 40 kB")},
+	{112,QT_TR_NOOP("SVCD 112 kB")},
+	{224,QT_TR_NOOP("DVD 224 kB")}
 };
 
                       



From mean at mail.berlios.de  Thu Apr 24 20:44:24 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 24 Apr 2008 20:44:24 +0200
Subject: [Avidemux-svn-commit] r3983 - in
	branches/avidemux_2.5_branch_gruntster/avidemux: .
	ADM_coreImage/src ADM_script
Message-ID: <200804241844.m3OIiO6Q002121@sheep.berlios.de>

Author: mean
Date: 2008-04-24 20:44:23 +0200 (Thu, 24 Apr 2008)
New Revision: 3983

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/ADM_imageUtils.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/ADM_videoFilter.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSDirectorySearch.h
   branches/avidemux_2.5_branch_gruntster/avidemux/gtk_gui.cpp
Log:
[Merge]


Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/ADM_imageUtils.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/ADM_imageUtils.cpp	2008-04-24 17:51:05 UTC (rev 3982)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/ADM_imageUtils.cpp	2008-04-24 18:44:23 UTC (rev 3983)
@@ -342,147 +342,8 @@
 #endif
         return tinySubstract(YPLANE(this),YPLANE(src1),YPLANE(src2),src1->_width*src1->_height);
 }
- ADM_BITMAPFILEHEADER bmfh;
- ADM_BITMAPINFOHEADER bmph;
-  FILE *fd;
-  uint32_t sz;
-  uint16_t s16;
-  uint32_t s32;
   
-
 /**
-    \fn saveAsBmp
-    \brief save current image into filename, into bmp format
-*/
-uint8_t  ADMImage::saveAsBmp(const char *filename)
-{
-  ADM_BITMAPFILEHEADER bmfh;
-  ADM_BITMAPINFOHEADER bmph;
-  FILE *fd;
-  uint32_t sz;
-  uint16_t s16;
-  uint32_t s32;
-  
-  sz = _width* _height * 3;
-
-  bmfh.bfReserved1 = bmfh.bfReserved2 = 0;
-  bmfh.bfOffBits = sizeof (bmfh) + sizeof (bmph);
-//_________________________________________
-  bmph.biSize = sizeof (bmph);
-  bmph.biWidth = _width;
-  bmph.biHeight = _height;
-  bmph.biPlanes = 1;
-  bmph.biBitCount = 24;
-  bmph.biCompression = 0;	// COMPRESSION NONE
-  bmph.biSizeImage = sz;
-  bmph.biXPelsPerMeter = 0;
-  bmph.biYPelsPerMeter = 0;
-  bmph.biClrUsed = 0;
-  bmph.biClrImportant = 0;
-/*
-	bmph.resolutionUnits=0;
-	bmph.origin=0;
-	bmph.colorEncoding=0;
-*/
-
-  ADMImage image(_width,_height);
-  
-
-  printf ("\n %u x %u=%u\n", bmph.biWidth, bmph.biHeight, sz);
-
-  uint8_t *out;
-
-        out=(uint8_t *)ADM_alloc(sz);
-        if(!out)
-        {
-            GUI_Error_HIG(QT_TR_NOOP("Memory error"), NULL);
-//            ADM_dealloc(out);
-            return 0;
-        }
-
-        if(!COL_yv12rgbBMP(bmph.biWidth, bmph.biHeight,data, out))
-        {
-              GUI_Error_HIG(QT_TR_NOOP("Error converting to BMP"), NULL);
-              ADM_dealloc(out);
-              return 0;
-        }
-        fd = fopen (filename, "wb");
-        if (!fd)
-        {
-                GUI_Error_HIG (QT_TR_NOOP("Something bad happened"), NULL);
-                ADM_dealloc(out);
-                return 0;
-        }
-
-	// Bitmpap file header, not using tructure due to gcc padding it
-#ifdef ADM_BIG_ENDIAN
-	s16 = 0x424D;
-#else	
-  	s16 = 0x4D42;
-#endif	
-  	s32 = 14 + sizeof (bmph) + sz;
-#ifdef ADM_BIG_ENDIAN	
-	#define SWAP32(x) x=R32(x)	
-#else
-	#define SWAP32(x) ; 
-#endif
-        SWAP32(s32);	
-        fwrite (&s16, 2, 1, fd);
-        fwrite (&s32, 4, 1, fd);
-        s32 = 0;
-        fwrite (&s32, 4, 1, fd);
-        s32 = 14 + sizeof (bmph);
-        SWAP32(s32);
-        fwrite (&s32, 4, 1, fd);
-#ifdef ADM_BIG_ENDIAN
-	Endian_BitMapInfo(&bmph);
-#endif
-        fwrite (&bmph, sizeof (bmph), 1, fd);
-        fwrite (out, sz, 1, fd);
-  
-        fclose(fd);
-        ADM_dealloc(out);
-        return 1;
-}
-/**
-    \fn saveAsJpg
-    \brief save current image into filename, into jpg format
-*/
-uint8_t  ADMImage::saveAsJpg(const char *filename)
-{
- ffmpegEncoderFFMjpeg *codec=NULL;
-  FILE *fd;
-  uint8_t *buffer=NULL;
-  uint32_t sz;
-  
-
-        sz = _width*_height*3;
-        ADMBitstream bitstream(sz);
-        buffer=new uint8_t[sz];
-        bitstream.data=buffer;
-        codec=new  ffmpegEncoderFFMjpeg(_width,_height,FF_MJPEG)  ;
-        codec->init( 95,25000);
-        if(!codec->encode(this,&bitstream))
-        {
-                GUI_Error_HIG(QT_TR_NOOP("Cannot encode the frame"), NULL);
-                delete [] buffer;
-                delete codec;
-                return 0;
-        }
-        delete codec;
-        fd=fopen(filename,"wb");
-        if(!fd)
-        {
-                GUI_Error_HIG(QT_TR_NOOP("File error"),QT_TR_NOOP( "Cannot open \"%s\" for writing."), filename);
-                delete [] buffer;
-                return 0;
-        }
-        fwrite (buffer, bitstream.len, 1, fd);
-        fclose(fd);
-        delete [] buffer;
-        return 1;
-}
-/**
       \fn LumaReduceBy2
       \brief Very simple reduce by 2 both hz & vz for luma plane only.
 */

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/ADM_videoFilter.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/ADM_videoFilter.cpp	2008-04-24 17:51:05 UTC (rev 3982)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/ADM_videoFilter.cpp	2008-04-24 18:44:23 UTC (rev 3983)
@@ -147,20 +147,3 @@
           return 1;
 }
 
-BUILD_CREATE(res_create,AVDMVideoStreamResize);
-BUILD_CREATE(crop_create,AVDMVideoStreamCrop);
-BUILD_CREATE(bsmear_create,AVDMVideoStreamBSMear);
-/*AVDMGenericVideoStream *res_create(AVDMGenericVideoStream *in, CONFcouple *param)
-{
- 	return new   AVDMVideoStreamResize(in,param);
-}
-
-AVDMGenericVideoStream *crop_create(AVDMGenericVideoStream *in, CONFcouple *param)
-{
- 	return new   AVDMVideoStreamCrop(in,param);
-}; ;
-AVDMGenericVideoStream *bsmear_create(AVDMGenericVideoStream *in, CONFcouple *param)
-{
- 	return new   AVDMVideoStreamBSMear(in,param);
-}; ;
-*/

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/CMakeLists.txt	2008-04-24 17:51:05 UTC (rev 3982)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/CMakeLists.txt	2008-04-24 18:44:23 UTC (rev 3983)
@@ -9,6 +9,6 @@
 )
 
 ADD_LIBRARY(ADM_coreImage SHARED ${ADM_coreImage_SRCS})
-TARGET_LINK_LIBRARIES(ADM_coreImage ADM_core)
+TARGET_LINK_LIBRARIES(ADM_coreImage ADM_core  ADM_coreUI ADM_libswscale)
 
 INSTALL(TARGETS ADM_coreImage RUNTIME DESTINATION ${BIN_DIR} LIBRARY DESTINATION lib)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSDirectorySearch.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSDirectorySearch.h	2008-04-24 17:51:05 UTC (rev 3982)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSDirectorySearch.h	2008-04-24 18:44:23 UTC (rev 3983)
@@ -7,6 +7,7 @@
 
 // Spidermonkey
 #include "ADM_libraries/ADM_smjs/jsapi.h"
+#include <string.h>
 #include "DirectorySearch.h"
 
 class ADM_JSDirectorySearch

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/gtk_gui.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/gtk_gui.cpp	2008-04-24 17:51:05 UTC (rev 3982)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/gtk_gui.cpp	2008-04-24 18:44:23 UTC (rev 3983)
@@ -2476,5 +2476,144 @@
  
  delete [] buffer;
 }
+// Temporary place...
 
+/**
+    \fn saveAsBmp
+    \brief save current image into filename, into bmp format
+*/
+uint8_t  ADMImage::saveAsBmp(const char *filename)
+{
+  ADM_BITMAPFILEHEADER bmfh;
+  ADM_BITMAPINFOHEADER bmph;
+  FILE *fd;
+  uint32_t sz;
+  uint16_t s16;
+  uint32_t s32;
+  
+  sz = _width* _height * 3;
+
+  bmfh.bfReserved1 = bmfh.bfReserved2 = 0;
+  bmfh.bfOffBits = sizeof (bmfh) + sizeof (bmph);
+//_________________________________________
+  bmph.biSize = sizeof (bmph);
+  bmph.biWidth = _width;
+  bmph.biHeight = _height;
+  bmph.biPlanes = 1;
+  bmph.biBitCount = 24;
+  bmph.biCompression = 0;	// COMPRESSION NONE
+  bmph.biSizeImage = sz;
+  bmph.biXPelsPerMeter = 0;
+  bmph.biYPelsPerMeter = 0;
+  bmph.biClrUsed = 0;
+  bmph.biClrImportant = 0;
+/*
+	bmph.resolutionUnits=0;
+	bmph.origin=0;
+	bmph.colorEncoding=0;
+*/
+
+  ADMImage image(_width,_height);
+  
+
+  printf ("\n %u x %u=%u\n", bmph.biWidth, bmph.biHeight, sz);
+
+  uint8_t *out;
+
+        out=(uint8_t *)ADM_alloc(sz);
+        if(!out)
+        {
+            GUI_Error_HIG(QT_TR_NOOP("Memory error"), NULL);
+//            ADM_dealloc(out);
+            return 0;
+        }
+
+        if(!COL_yv12rgbBMP(bmph.biWidth, bmph.biHeight,data, out))
+        {
+              GUI_Error_HIG(QT_TR_NOOP("Error converting to BMP"), NULL);
+              ADM_dealloc(out);
+              return 0;
+        }
+        fd = fopen (filename, "wb");
+        if (!fd)
+        {
+                GUI_Error_HIG (QT_TR_NOOP("Something bad happened"), NULL);
+                ADM_dealloc(out);
+                return 0;
+        }
+
+	// Bitmpap file header, not using tructure due to gcc padding it
+#ifdef ADM_BIG_ENDIAN
+	s16 = 0x424D;
+#else	
+  	s16 = 0x4D42;
+#endif	
+  	s32 = 14 + sizeof (bmph) + sz;
+#ifdef ADM_BIG_ENDIAN	
+	#define SWAP32(x) x=R32(x)	
+#else
+	#define SWAP32(x) ; 
+#endif
+        SWAP32(s32);	
+        fwrite (&s16, 2, 1, fd);
+        fwrite (&s32, 4, 1, fd);
+        s32 = 0;
+        fwrite (&s32, 4, 1, fd);
+        s32 = 14 + sizeof (bmph);
+        SWAP32(s32);
+        fwrite (&s32, 4, 1, fd);
+#ifdef ADM_BIG_ENDIAN
+	Endian_BitMapInfo(&bmph);
+#endif
+        fwrite (&bmph, sizeof (bmph), 1, fd);
+        fwrite (out, sz, 1, fd);
+  
+        fclose(fd);
+        ADM_dealloc(out);
+        return 1;
+}
+/**
+    \fn saveAsJpg
+    \brief save current image into filename, into jpg format
+*/
+uint8_t  ADMImage::saveAsJpg(const char *filename)
+{
+ ffmpegEncoderFFMjpeg *codec=NULL;
+  FILE *fd;
+  uint8_t *buffer=NULL;
+  uint32_t sz;
+  
+
+        sz = _width*_height*3;
+        ADMBitstream bitstream(sz);
+        buffer=new uint8_t[sz];
+        bitstream.data=buffer;
+        codec=new  ffmpegEncoderFFMjpeg(_width,_height,FF_MJPEG)  ;
+        codec->init( 95,25000);
+        if(!codec->encode(this,&bitstream))
+        {
+                GUI_Error_HIG(QT_TR_NOOP("Cannot encode the frame"), NULL);
+                delete [] buffer;
+                delete codec;
+                return 0;
+        }
+        delete codec;
+        fd=fopen(filename,"wb");
+        if(!fd)
+        {
+                GUI_Error_HIG(QT_TR_NOOP("File error"),QT_TR_NOOP( "Cannot open \"%s\" for writing."), filename);
+                delete [] buffer;
+                return 0;
+        }
+        fwrite (buffer, bitstream.len, 1, fd);
+        fclose(fd);
+        delete [] buffer;
+        return 1;
+}
+#include "ADM_videoFilter.h"
+#include "ADM_video/ADM_vidCommonFilter.h"
+BUILD_CREATE(res_create,AVDMVideoStreamResize);
+BUILD_CREATE(crop_create,AVDMVideoStreamCrop);
+BUILD_CREATE(bsmear_create,AVDMVideoStreamBSMear);
+
 // EOF



From gruntster at mail.berlios.de  Thu Apr 24 20:47:50 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Thu, 24 Apr 2008 20:47:50 +0200
Subject: [Avidemux-svn-commit] r3984 -
	branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264
Message-ID: <200804241847.m3OIloGj002339@sheep.berlios.de>

Author: gruntster
Date: 2008-04-24 20:47:48 +0200 (Thu, 24 Apr 2008)
New Revision: 3984

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/options.cpp
Log:
[x264] memory issues

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/options.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/options.cpp	2008-04-24 18:44:23 UTC (rev 3983)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/options.cpp	2008-04-24 18:47:48 UTC (rev 3984)
@@ -25,6 +25,7 @@
 x264Options::x264Options(void)
 {
 	x264_param_default(&_param);
+	_param.rc.psz_rc_eq = strdup(_param.rc.psz_rc_eq);
 
 	_sarAsInput = false;
 	_param.rc.i_rc_method = X264_RC_CQP;
@@ -1348,7 +1349,6 @@
 		memcpy(xml, tempBuffer, tempBufferSize);
 		xml[tempBufferSize] = 0;
 
-		xmlFree(xmlBuffer);
 		xmlFreeDoc(xmlDoc);
 
 		break;



From gruntster at mail.berlios.de  Fri Apr 25 16:10:13 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Fri, 25 Apr 2008 16:10:13 +0200
Subject: [Avidemux-svn-commit] r3985 - in
	branches/avidemux_2.5_branch_gruntster/avidemux: ADM_encoder
	plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4
Message-ID: <200804251410.m3PEADdG002001@sheep.berlios.de>

Author: gruntster
Date: 2008-04-25 16:10:11 +0200 (Fri, 25 Apr 2008)
New Revision: 3985

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_pluginLoad.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp
Log:
[x264] fixes

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_pluginLoad.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_pluginLoad.cpp	2008-04-24 18:47:48 UTC (rev 3984)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_pluginLoad.cpp	2008-04-25 14:10:11 UTC (rev 3985)
@@ -126,10 +126,7 @@
 	fflush(stdout);
 
 	if (!buildDirectoryContent(&nbFile, path, files, MAX_EXTERNAL_FILTER, SHARED_LIB_EXT))
-	{
 		printf("[ADM_vidEnc_plugin] Cannot parse plugin\n");
-		return 0;
-	}
 
 	for (int i = 0; i < nbFile; i++)
 		loadVideoPlugin(uiType, files[i]);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.cpp	2008-04-24 18:47:48 UTC (rev 3984)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.cpp	2008-04-25 14:10:11 UTC (rev 3985)
@@ -301,14 +301,14 @@
 {
 	int nb = encoderGetEncoderCount();
 
-	ADM_assert(i <= nb);
+	ADM_assert(i < nb);
 
 	return AllVideoCodec[i].menuName;
 }
 
 void videoCodecChanged(int newCodecIndex)
 {
-	ADM_assert(newCodecIndex <= encoderGetEncoderCount());
+	ADM_assert(newCodecIndex < encoderGetEncoderCount());
 
 	currentCodecType = AllVideoCodec[newCodecIndex].codec;
 	currentCodecIndex = newCodecIndex;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp	2008-04-24 18:47:48 UTC (rev 3984)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp	2008-04-25 14:10:11 UTC (rev 3985)
@@ -392,16 +392,16 @@
 	ui.quantiserMinSpinBox->setValue(options->getQuantiserMinimum());
 	ui.quantiserMaxSpinBox->setValue(options->getQuantiserMaximum());
 	ui.quantiserMaxStepSpinBox->setValue(options->getQuantiserStep());
-	ui.avgBitrateToleranceSpinBox->setValue(options->getAverageBitrateTolerance());
+	ui.avgBitrateToleranceSpinBox->setValue((int)(options->getAverageBitrateTolerance() * 100));
 	ui.quantiserIpRatioSpinBox->setValue(options->getIpFrameQuantiser());
 	ui.quantiserPbRatioSpinBox->setValue(options->getPbFrameQuantiser());
 	ui.chromaLumaOffsetSpinBox->setValue(options->getChromaLumaQuantiserDifference());
-	ui.quantiserCurveCompressSpinBox->setValue(options->getQuantiserCurveCompression());
+	ui.quantiserCurveCompressSpinBox->setValue((int)(options->getQuantiserCurveCompression() * 100));
 	ui.quantiserBeforeCompressSpinBox->setValue(options->getReduceFluxBeforeCurveCompression());
 	ui.quantiserAfterCompressSpinBox->setValue(options->getReduceFluxAfterCurveCompression());
 	ui.vbvMaxBitrateSpinBox->setValue(options->getVbvMaximumBitrate());
 	ui.vbvBufferSizeSpinBox->setValue(options->getVbvBufferSize());
-	ui.vbvBufferOccupancySpinBox->setValue(options->getVbvInitialOccupancy());
+	ui.vbvBufferOccupancySpinBox->setValue((int)(options->getVbvInitialOccupancy() * 100));
 
 	// Output tab
 	if (!options->getIdcLevel())



From gruntster at mail.berlios.de  Sat Apr 26 21:14:48 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Sat, 26 Apr 2008 21:14:48 +0200
Subject: [Avidemux-svn-commit] r3986 - in
	branches/avidemux_2.5_branch_gruntster/avidemux: ADM_encoder
	ADM_plugin ADM_userInterfaces/ADM_GTK
	ADM_userInterfaces/ADM_NONE ADM_userInterfaces/ADM_QT4
	plugins/ADM_videoEncoder/ADM_vidEnc_x264
	plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4
Message-ID: <200804261914.m3QJEmuN011410@sheep.berlios.de>

Author: gruntster
Date: 2008-04-26 21:14:38 +0200 (Sat, 26 Apr 2008)
New Revision: 3986

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_externalEncoder.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_externalEncoder.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_pluginLoad.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_pluginLoad.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_plugin/ADM_vidEnc_plugin.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ui_support.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ui_support.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ui_support.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/configGuiLoader.h
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.h
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/interface.c
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/options.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/options.h
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.h
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Param.xsd
Log:
[x264] pass options to plugin

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_externalEncoder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_externalEncoder.cpp	2008-04-25 14:10:11 UTC (rev 3985)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_externalEncoder.cpp	2008-04-26 19:14:38 UTC (rev 3986)
@@ -18,13 +18,9 @@
 #include "ADM_externalEncoder.h"
 #include "ADM_plugin/ADM_vidEnc_plugin.h"
 
-#include "avi_vars.h"
-
 externalEncoder::externalEncoder(COMPRES_PARAMS *params)
 {
-	memcpy(&_compressParams, params, sizeof(COMPRES_PARAMS));
-
-	_plugin = ADM_vidEnc_getPlugin(params->extra_param);
+	_plugin = getVideoEncoderPlugin(params->extra_param);
 	_openPass = false;
 }
 
@@ -47,37 +43,14 @@
 
 	_in = instream;
 
-	vidEncProperties properties;
+	vidEncVideoProperties properties;
 
+	properties.structSize = sizeof(vidEncVideoProperties);
 	properties.width = _w;
 	properties.height = _h;
-	properties.parWidth = video_body->getPARWidth();
-	properties.parHeight = video_body->getPARHeight();
+	properties.parWidth = instream->getPARWidth();
+	properties.parHeight = instream->getPARHeight();
 
-	switch (_compressParams.mode)
-	{
-		case COMPRESS_AQ:
-			properties.encodeMode = ADM_VIDENC_MODE_AQP;
-			properties.encodeModeParameter = _compressParams.qz;
-			break;
-		case COMPRESS_CQ:
-			properties.encodeMode = ADM_VIDENC_MODE_CQP;
-			properties.encodeModeParameter = _compressParams.qz;
-			break;
-		case COMPRESS_CBR:
-			properties.encodeMode = ADM_VIDENC_MODE_CBR;
-			properties.encodeModeParameter = _compressParams.bitrate;
-			break;
-		case COMPRESS_2PASS:
-			properties.encodeMode = ADM_VIDENC_MODE_2PASS_SIZE;
-			properties.encodeModeParameter = _compressParams.finalsize;
-			break;
-		case COMPRESS_2PASS_BITRATE:
-			properties.encodeMode = ADM_VIDENC_MODE_2PASS_ABR;
-			properties.encodeModeParameter = _compressParams.avg_bitrate;
-			break;
-	}
-
 	if (_plugin->open(_plugin->encoderId, &properties))
 		return 1;
 	else

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_externalEncoder.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_externalEncoder.h	2008-04-25 14:10:11 UTC (rev 3985)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_externalEncoder.h	2008-04-26 19:14:38 UTC (rev 3986)
@@ -26,7 +26,6 @@
 class externalEncoder : public Encoder
 {
 private:
-	COMPRES_PARAMS _compressParams;
 	ADM_vidEnc_plugin *_plugin;
 	bool _openPass;
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_pluginLoad.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_pluginLoad.cpp	2008-04-25 14:10:11 UTC (rev 3985)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_pluginLoad.cpp	2008-04-26 19:14:38 UTC (rev 3986)
@@ -61,7 +61,7 @@
 
 std::vector<ADM_vidEnc_plugin *> ADM_videoEncoderPlugins;
 
-static int loadVideoPlugin(int uiType, const char *file)
+static int loadVideoEncoderPlugin(int uiType, const char *file)
 {
 	ADM_vidEnc_plugin *plugin = new ADM_vidEnc_plugin(file);
 	int* encoderIds;
@@ -106,7 +106,7 @@
  * 	\fn ADM_vidEnc_loadPlugins
  *  \brief load all audio plugins
  */
-int ADM_vidEnc_loadPlugins(int uiType, const char *path)
+int loadVideoEncoderPlugins(int uiType, const char *path)
 {
 #define MAX_EXTERNAL_FILTER 50
 
@@ -119,7 +119,7 @@
 #endif
 
 	char *files[MAX_EXTERNAL_FILTER];
-	uint32_t nbFile;
+	uint32_t nbFile = 0;
 
 	memset(files, 0, sizeof(char *)*MAX_EXTERNAL_FILTER);
 	printf("[ADM_vidEnc_plugin] Scanning directory %s\n", path);
@@ -129,7 +129,7 @@
 		printf("[ADM_vidEnc_plugin] Cannot parse plugin\n");
 
 	for (int i = 0; i < nbFile; i++)
-		loadVideoPlugin(uiType, files[i]);
+		loadVideoEncoderPlugin(uiType, files[i]);
 
 	printf("[ADM_vidEnc_plugin] Scanning done, found %d codec\n", ADM_videoEncoderPlugins.size());
 
@@ -154,28 +154,116 @@
 
 		sprintf(displayName, "%s (%s)", codecType, codecName);
 
-		COMPRES_PARAMS *params = &AllVideoCodec[internalCodecCount + i];
+		COMPRES_PARAMS *param = &AllVideoCodec[internalCodecCount + i];
 
-		params->codec = CodecExternal;
-		params->menuName = displayName;
-		params->tagName = displayName;
-		params->extra_param = i;
+		param->codec = CodecExternal;
+		param->menuName = displayName;
+		param->tagName = displayName;
+		param->extra_param = i;
 
-		int length = plugin->getOptions(plugin->encoderId, NULL, 0);
-		char *options = new char[length + 1];
+		int length = plugin->getOptions(plugin->encoderId, NULL, NULL, 0);
+		char *pluginOptions = new char[length + 1];
+		vidEncOptions encodeOptions;
 
-		plugin->getOptions(plugin->encoderId, options, length);
-		options[length] = 0;
+		plugin->getOptions(plugin->encoderId, &encodeOptions, pluginOptions, length);
+		pluginOptions[length] = 0;
 
-		params->extraSettings = options;
-		params->extraSettingsLen = length;
+		updateCompressionParameters(param, encodeOptions.encodeMode, encodeOptions.encodeModeParameter, pluginOptions, length);
 	}
 
 	return 1;
 }
 
-ADM_vidEnc_plugin* ADM_vidEnc_getPlugin(int index)
+void updateCompressionParameters(COMPRES_PARAMS *params, int encodeMode, int encodeModeParameter, char* extraSettings, int extraSettingsLength)
 {
+	COMPRESSION_MODE compressMode = getCompressionMode(encodeMode);
+
+	switch (compressMode)
+	{
+		case COMPRESS_CBR:
+			params->bitrate = encodeModeParameter;
+			break;
+		case COMPRESS_AQ:
+			params->qz = encodeModeParameter;
+			break;
+		case COMPRESS_CQ:
+			params->qz = encodeModeParameter;
+			break;
+		case COMPRESS_2PASS:
+			params->finalsize = encodeModeParameter;
+			break;
+		case COMPRESS_2PASS_BITRATE:
+			params->avg_bitrate = encodeModeParameter;
+			break;
+		default:
+			ADM_assert(0);
+	}
+
+	if (params->extraSettings)
+		delete [] (char*)params->extraSettings;
+
+	params->extraSettings = extraSettings;
+	params->extraSettingsLen = extraSettingsLength;
+}
+
+COMPRESSION_MODE getCompressionMode(int encodeMode)
+{
+	COMPRESSION_MODE mode;
+
+	switch (encodeMode)
+	{
+		case ADM_VIDENC_MODE_AQP:
+			mode = COMPRESS_AQ;
+			break;
+		case ADM_VIDENC_MODE_CQP:
+			mode = COMPRESS_CQ;
+			break;
+		case ADM_VIDENC_MODE_CBR:
+			mode = COMPRESS_CBR;
+			break;
+		case ADM_VIDENC_MODE_2PASS_SIZE:
+			mode = COMPRESS_2PASS;
+			break;
+		case ADM_VIDENC_MODE_2PASS_ABR:
+			mode = COMPRESS_2PASS_BITRATE;
+			break;
+		default:
+			ADM_assert(0);
+	}
+
+	return mode;
+}
+
+int getVideoEncodePluginMode(COMPRESSION_MODE mode)
+{
+	int encodeMode;
+
+	switch (mode)
+	{
+		case COMPRESS_AQ:
+			encodeMode = ADM_VIDENC_MODE_AQP;
+			break;
+		case COMPRESS_CQ:
+			encodeMode = ADM_VIDENC_MODE_CQP;
+			break;
+		case COMPRESS_CBR:
+			encodeMode = ADM_VIDENC_MODE_CBR;
+			break;
+		case COMPRESS_2PASS:
+			encodeMode = ADM_VIDENC_MODE_2PASS_SIZE;
+			break;
+		case COMPRESS_2PASS_BITRATE:
+			encodeMode = ADM_VIDENC_MODE_2PASS_ABR;
+			break;
+		default:
+			ADM_assert(0);
+	}
+
+	return encodeMode;
+}
+
+ADM_vidEnc_plugin* getVideoEncoderPlugin(int index)
+{
 	ADM_assert(index < ADM_videoEncoderPlugins.size());
 
 	return ADM_videoEncoderPlugins[index];

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_pluginLoad.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_pluginLoad.h	2008-04-25 14:10:11 UTC (rev 3985)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_pluginLoad.h	2008-04-26 19:14:38 UTC (rev 3986)
@@ -19,6 +19,7 @@
 
 #include "ADM_dynamicLoading.h"
 #include "ADM_plugin/ADM_vidEnc_plugin.h"
+#include "ADM_vidEncode.hxx"
 
 typedef int _vidEncGetEncoders(int uiType, int **encoderIds);
 typedef const char* _vidEncGetEncoderName(int encoderId);
@@ -30,14 +31,14 @@
 typedef const char* _vidEncGetEncoderGuid(int encoderId);
 
 typedef int _vidEncIsConfigurable(int encoderId);
-typedef int _vidEncConfigure(int encoderId);
-typedef int _vidEncGetOptions(int encoderId, char *options, int bufferSize);
-typedef int _vidEncSetOptions(int encoderId, char *options);
+typedef int _vidEncConfigure(int encoderId, vidEncVideoProperties *properties);
+typedef int _vidEncGetOptions(int encoderId, vidEncOptions *encodeOptions, char *pluginOptions, int bufferSize);
+typedef int _vidEncSetOptions(int encoderId, vidEncOptions *encodeOptions, char *pluginOptions);
 
 typedef int _vidEncGetPassCount(int encoderId);
 typedef int _vidEncGetCurrentPass(int encoderId);
 
-typedef int _vidEncOpen(int encoderId, vidEncProperties *properties);
+typedef int _vidEncOpen(int encoderId, vidEncVideoProperties *properties);
 typedef int _vidEncBeginPass(int encoderId);
 typedef int _vidEncEncodeFrame(int encoderId, vidEncEncodeParams *encodeParams);
 typedef int _vidFinishPass(int encoderId);
@@ -75,7 +76,10 @@
 		ADM_vidEnc_plugin(const char *file);
 };
 
-ADM_vidEnc_plugin* ADM_vidEnc_getPlugin(int index);
-int ADM_vidEnc_loadPlugins(int uiType, const char *path);
+ADM_vidEnc_plugin* getVideoEncoderPlugin(int index);
+int loadVideoEncoderPlugins(int uiType, const char *path);
+void updateCompressionParameters(COMPRES_PARAMS *params, int encodeMode, int encodeModeParameter, char* extraSettings, int extraSettingsLength);
+COMPRESSION_MODE getCompressionMode(int encodeMode);
+int getVideoEncodePluginMode(COMPRESSION_MODE mode);
 
 #endif // ADM_pluginLoad_h

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.cpp	2008-04-25 14:10:11 UTC (rev 3985)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.cpp	2008-04-26 19:14:38 UTC (rev 3986)
@@ -28,8 +28,8 @@
 #include "ADM_vidEncode.hxx"
 #include "ADM_videoFilter.h"
 
+#include "avi_vars.h"
 
-
 #include "ADM_osSupport/ADM_debugID.h"
 #define MODULE_NAME MODULE_ENCODER
 #include "ADM_osSupport/ADM_debug.h"
@@ -440,23 +440,40 @@
 
 	if (currentCodecType == CodecExternal)
 	{
-		ADM_vidEnc_plugin *plugin = ADM_vidEnc_getPlugin(param->extra_param);
+		ADM_vidEnc_plugin *plugin = getVideoEncoderPlugin(param->extra_param);
+		vidEncOptions encodeOptions;
+		vidEncVideoProperties properties;
 
-		plugin->setOptions(plugin->encoderId, (char*)param->extraSettings);
+		if (avifileinfo)
+		{
+			aviInfo info;
+			video_body->getVideoInfo(&info);
 
+			properties.width = info.width;
+			properties.height = info.height;
+			properties.parWidth = video_body->getPARWidth();
+			properties.parHeight = video_body->getPARHeight();
+		}
+		else
+		{
+			properties.width = 0;
+			properties.height = 0;
+			properties.parWidth = 0;
+			properties.parHeight = 0;
+		}
+
+		properties.structSize = sizeof(vidEncVideoProperties);
+
 		if (plugin->isConfigurable(plugin->encoderId))
-			if (plugin->configure(plugin->encoderId))
+			if (plugin->configure(plugin->encoderId, &properties))
 			{
-				delete [] (char*)param->extraSettings;
+				int length = plugin->getOptions(plugin->encoderId, NULL, NULL, 0);
+				char *pluginOptions = new char[length + 1];
 
-				int length = plugin->getOptions(plugin->encoderId, NULL, 0);
-				char *options = new char[length + 1];
+				plugin->getOptions(plugin->encoderId, &encodeOptions, pluginOptions, length);
+				pluginOptions[length] = 0;
 
-				plugin->getOptions(plugin->encoderId, options, length);
-				options[length] = 0;
-
-				param->extraSettings = options;
-				param->extraSettingsLen = length;
+				updateCompressionParameters(param, encodeOptions.encodeMode, encodeOptions.encodeModeParameter, pluginOptions, length);
 			}
 	}
 	else
@@ -470,58 +487,72 @@
 	Set mode param and extra data for the currently selected codec
 	The extradata is a free binary chunk (->memcpy of codec.specific part)
 ___________________________________________________________*/
-
-void
-setVideoEncoderSettings (COMPRESSION_MODE mode, uint32_t param,
-			 uint32_t extraConf, uint8_t * extraData)
+void setVideoEncoderSettings(COMPRESSION_MODE mode, uint32_t param, uint32_t extraConf, uint8_t* extraData)
 {
-  COMPRES_PARAMS *generic = NULL;
-  void *specific = NULL;
-  uint32_t specSize = 0;
-  COMPRES_PARAMS *zparam = &AllVideoCodec[currentCodecIndex];
+	COMPRES_PARAMS *zparam = &AllVideoCodec[currentCodecIndex];
 
-  zparam->mode = mode;
+	zparam->mode = mode;
 
-  switch (mode)
-    {
-    case COMPRESS_SAME:
-      aprintf ("Same as input\n");
-      break;
-    case COMPRESS_CBR:
-      aprintf ("CBR : %lu kbps\n", param);
-      zparam->bitrate = param;
-      break;
-    case COMPRESS_AQ:
-      aprintf ("AQ : %lu q\n", param);
-      zparam->qz = param;
-      break;
-    case COMPRESS_CQ:
-      aprintf ("CQ : %lu q\n", param);
-      zparam->qz = param;
-      break;
-    case COMPRESS_2PASS:
-      aprintf ("2pass : %lu q\n", param);
-      zparam->finalsize = param;
-      break;
-    case COMPRESS_2PASS_BITRATE:
-      aprintf ("2passbitrate : %lu q\n", param);
-      zparam->avg_bitrate = param;
-      break;
-    default:
-      ADM_assert (0);
+	switch (mode)
+	{
+		case COMPRESS_SAME:
+			aprintf ("Same as input\n");
+			break;
+		case COMPRESS_CBR:
+			aprintf ("CBR : %lu kbps\n", param);
+			zparam->bitrate = param;
+			break;
+		case COMPRESS_AQ:
+			aprintf ("AQ : %lu q\n", param);
+			zparam->qz = param;
+			break;
+		case COMPRESS_CQ:
+			aprintf ("CQ : %lu q\n", param);
+			zparam->qz = param;
+			break;
+		case COMPRESS_2PASS:
+			aprintf ("2pass : %lu q\n", param);
+			zparam->finalsize = param;
+			break;
+		case COMPRESS_2PASS_BITRATE:
+			aprintf ("2passbitrate : %lu q\n", param);
+			zparam->avg_bitrate = param;
+			break;
+		default:
+			ADM_assert(0);
+	}
 
-    }
+	if (zparam->extra_param)
+	{
+		ADM_vidEnc_plugin *plugin = getVideoEncoderPlugin(zparam->extra_param);
+		vidEncOptions options;
 
-  if (extraConf && extraData && zparam->extraSettingsLen)
-    {
-      if (zparam->extraSettingsLen != extraConf)
-		printf("\n*** ERROR : Extra data for codec config has a different size!!! *****\n");
-      else
+		options.structSize = sizeof(vidEncOptions);
+		options.encodeMode = getVideoEncodePluginMode(mode);
+		options.encodeModeParameter = param;
+
+		if (zparam->extraSettings)
+			delete [] (char*)zparam->extraSettings;
+
+		zparam->extraSettings = extraData;
+
+		if (extraData)
+			zparam->extraSettingsLen = strlen((char*)extraData);
+		else
+			zparam->extraSettingsLen = 0;
+
+		plugin->setOptions(plugin->encoderId, &options, (char*)zparam->extraSettings);
+	}
+	else if (extraConf && extraData && zparam->extraSettingsLen)
 	{
-	  printf ("\n using %u bytes of codec specific data...\n", extraConf);
-	  memcpy (zparam->extraSettings, extraData, extraConf);
+		if (zparam->extraSettingsLen != extraConf)
+			printf("\n*** ERROR : Extra data for codec config has a different size!!! *****\n");
+		else
+		{
+			printf ("\n using %u bytes of codec specific data...\n", extraConf);
+			memcpy (zparam->extraSettings, extraData, extraConf);
+		}
 	}
-    }
 }
 
 Encoder *getVideoEncoder(uint32_t w, uint32_t h, uint32_t globalHeaderFlag)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_plugin/ADM_vidEnc_plugin.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_plugin/ADM_vidEnc_plugin.h	2008-04-25 14:10:11 UTC (rev 3985)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_plugin/ADM_vidEnc_plugin.h	2008-04-26 19:14:38 UTC (rev 3986)
@@ -56,13 +56,19 @@
 
 typedef struct
 {
+	int structSize;
 	unsigned int width;
 	unsigned int height;
 	unsigned int parWidth;
 	unsigned int parHeight;
+} vidEncVideoProperties;
+
+typedef struct
+{
+	int structSize;
 	unsigned int encodeMode;
 	int encodeModeParameter;
-} vidEncProperties;
+} vidEncOptions;
 
 int vidEncGetEncoders(int uiType, int **encoderIds);
 const char* vidEncGetEncoderName(int encoderId);
@@ -74,14 +80,14 @@
 const char* vidEncGetEncoderGuid(int encoderId);
 
 int vidEncIsConfigurable(int encoderId);
-int vidEncConfigure(int encoderId);
-int vidEncGetOptions(int encoderId, char *options, int bufferSize);
-int vidEncSetOptions(int encoderId, char *options);
+int vidEncConfigure(int encoderId, vidEncVideoProperties *properties);
+int vidEncGetOptions(int encoderId, vidEncOptions *encodeOptions, char *pluginOptions, int bufferSize);
+int vidEncSetOptions(int encoderId, vidEncOptions *encodeOptions, char *pluginOptions);
 
 int vidEncGetPassCount(int encoderId);
 int vidEncGetLastPass(int encoderId);
 
-int vidEncOpen(int encoderId, vidEncProperties *properties);
+int vidEncOpen(int encoderId, vidEncVideoProperties *properties);
 int vidEncBeginPass(int encoderId);
 int vidEncEncodeFrame(int encoderId, vidEncEncodeParams *encodeParams);
 int vidEndFinishPass(int encoderId);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ui_support.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ui_support.cpp	2008-04-25 14:10:11 UTC (rev 3985)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ui_support.cpp	2008-04-26 19:14:38 UTC (rev 3986)
@@ -38,6 +38,6 @@
 {
 	char *pluginDir = ADM_getPluginPath();
 
-	ADM_vidEnc_loadPlugins(ADM_VIDENC_UI_CLI, pluginDir);
+	loadVideoEncoderPlugins(ADM_VIDENC_UI_CLI, pluginDir);
 	delete [] pluginDir;
 }

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ui_support.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ui_support.cpp	2008-04-25 14:10:11 UTC (rev 3985)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ui_support.cpp	2008-04-26 19:14:38 UTC (rev 3986)
@@ -37,6 +37,6 @@
 {
 	char *pluginDir = ADM_getPluginPath();
 
-	ADM_vidEnc_loadPlugins(ADM_VIDENC_UI_CLI, pluginDir);
+	loadVideoEncoderPlugins(ADM_VIDENC_UI_CLI, pluginDir);
 	delete [] pluginDir;
 }

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ui_support.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ui_support.cpp	2008-04-25 14:10:11 UTC (rev 3985)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ui_support.cpp	2008-04-26 19:14:38 UTC (rev 3986)
@@ -65,6 +65,6 @@
 {
 	char *pluginDir = ADM_getPluginPath();
 
-	ADM_vidEnc_loadPlugins(ADM_VIDENC_UI_QT, pluginDir);
+	loadVideoEncoderPlugins(ADM_VIDENC_UI_QT, pluginDir);
 	delete [] pluginDir;
 }

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/configGuiLoader.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/configGuiLoader.h	2008-04-25 14:10:11 UTC (rev 3985)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/configGuiLoader.h	2008-04-26 19:14:38 UTC (rev 3986)
@@ -9,7 +9,7 @@
 #include "ADM_vidEnc_plugin.h"
 }
 
-typedef bool _showX264ConfigDialog(vidEncProperties *properties, x264Options *options);
+typedef bool _showX264ConfigDialog(vidEncVideoProperties *properties, vidEncOptions *encodeOptions, x264Options *options);
 
 class configGuiLoader : public ADM_LibWrapper
 {

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.cpp	2008-04-25 14:10:11 UTC (rev 3985)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.cpp	2008-04-26 19:14:38 UTC (rev 3986)
@@ -27,12 +27,12 @@
 {
 	void *encoders_getPointer(int uiType) { encoder.setUiType(uiType); return &encoders; } 
 	int x264Encoder_isConfigurable(void) { return encoder.isConfigurable(); }
-	int x264Encoder_configure(void) { return encoder.configure(); }
-	int x264Encoder_getOptions(char* options, int bufferSize) { return encoder.getOptions(options, bufferSize); };
-	int x264Encoder_setOptions(char* options) { return encoder.setOptions(options); };
+	int x264Encoder_configure(vidEncVideoProperties *properties) { return encoder.configure(properties); }
+	int x264Encoder_getOptions(vidEncOptions *encodeOptions, char *pluginOptions, int bufferSize) { return encoder.getOptions(encodeOptions, pluginOptions, bufferSize); };
+	int x264Encoder_setOptions(vidEncOptions *encodeOptions, char *pluginOptions) { return encoder.setOptions(encodeOptions, pluginOptions); };
 	int x264Encoder_getPassCount(void) { return encoder.getPassCount(); }
 	int x264Encoder_getCurrentPass(void) { return encoder.getCurrentPass(); }
-	int x264Encoder_open(vidEncProperties *properties) { return encoder.open(properties); }
+	int x264Encoder_open(vidEncVideoProperties *properties) { return encoder.open(properties); }
 	int x264Encoder_beginPass(void) { return encoder.beginPass(); }
 	int x264Encoder_encodeFrame(vidEncEncodeParams *encodeParams) { return encoder.encodeFrame(encodeParams); }
 	int x264Encoder_finishPass(void) { return encoder.finishPass(); }
@@ -43,14 +43,15 @@
 {
 	_loader = NULL;
 	_handler = NULL;
-	_passCount = 2;
+	_passCount = 1;
 	_currentPass = 0;
 	_openPass = false;
 
-	x264_param_t *param = _options.getParameters();
+	_encodeOptions.structSize = sizeof(vidEncOptions);
+	_encodeOptions.encodeMode = ADM_VIDENC_MODE_AQP;
+	_encodeOptions.encodeModeParameter = 26;
 
-	memcpy(&_param, param, sizeof(x264_param_t));
-	delete param;
+	updateParameters();
 }
 
 x264Encoder::~x264Encoder(void)
@@ -71,7 +72,7 @@
 	return (_uiType == ADM_VIDENC_UI_GTK || _uiType == ADM_VIDENC_UI_QT);
 }
 
-int x264Encoder::configure(void)
+int x264Encoder::configure(vidEncVideoProperties *properties)
 {
 	if (_loader == NULL)
 	{
@@ -99,18 +100,21 @@
 	}
 
 	if (_loader->isAvailable())
-		return _loader->showX264ConfigDialog(&_properties, &_options);
+		return _loader->showX264ConfigDialog(properties, &_encodeOptions, &_options);
 	else
 		return 0;
 }
 
-int x264Encoder::getOptions(char *options, int bufferSize)
+int x264Encoder::getOptions(vidEncOptions *encodeOptions, char *pluginOptions, int bufferSize)
 {
 	char* xml = _options.toXml();
 	int xmlLength = strlen(xml);
-	
+
 	if (bufferSize >= xmlLength)
-		memcpy(options, xml, xmlLength);
+	{
+		memcpy(pluginOptions, xml, xmlLength);
+		memcpy(encodeOptions, &_encodeOptions, sizeof(vidEncOptions));
+	}
 	else if (bufferSize != 0)
 		xmlLength = 0;
 
@@ -119,11 +123,51 @@
 	return xmlLength;
 }
 
-int x264Encoder::setOptions(char *options)
+int x264Encoder::setOptions(vidEncOptions *encodeOptions, char *pluginOptions)
 {
-	return _options.fromXml(options);
+	if (_options.fromXml(pluginOptions))
+	{
+		memcpy(&_encodeOptions, encodeOptions, sizeof(vidEncOptions));
+		updateParameters();
+
+		return 1;
+	}
+	else
+		return 0;
 }
 
+void x264Encoder::updateParameters(void)
+{
+	x264_param_t *param = _options.getParameters();
+
+	memcpy(&_param, param, sizeof(x264_param_t));
+	delete param;
+
+	switch (_encodeOptions.encodeMode)
+	{
+		case ADM_VIDENC_MODE_CBR:
+			_param.rc.i_rc_method = X264_RC_ABR;
+			_param.rc.i_bitrate = _encodeOptions.encodeModeParameter;
+			break;
+		case ADM_VIDENC_MODE_CQP:
+			_param.rc.i_rc_method = X264_RC_CQP;
+			_param.rc.i_qp_constant = _encodeOptions.encodeModeParameter;
+			break;
+		case ADM_VIDENC_MODE_AQP:
+			_param.rc.i_rc_method = X264_RC_CRF;
+			_param.rc.f_rf_constant = _encodeOptions.encodeModeParameter;
+			break;
+		case ADM_VIDENC_MODE_2PASS_SIZE:
+			_param.rc.i_rc_method = X264_RC_ABR;
+			_param.rc.i_bitrate = _encodeOptions.encodeModeParameter;
+			break;
+		case ADM_VIDENC_MODE_2PASS_ABR:
+			_param.rc.i_rc_method = X264_RC_ABR;
+			_param.rc.i_bitrate = _encodeOptions.encodeModeParameter;
+			break;
+	}
+}
+
 int x264Encoder::getCurrentPass(void)
 {
 	return _currentPass;
@@ -134,13 +178,11 @@
 	return _passCount;
 }
 
-int x264Encoder::open(vidEncProperties *properties)
+int x264Encoder::open(vidEncVideoProperties *properties)
 {
 	if (_handler)
 		return ADM_VIDENC_ERR_ALREADY_OPEN;
 
-	memcpy(&_properties, properties, sizeof(vidEncProperties));
-
 	_param.i_width = _width = properties->width;
 	_param.i_height = _height = properties->height;
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.h	2008-04-25 14:10:11 UTC (rev 3985)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.h	2008-04-26 19:14:38 UTC (rev 3986)
@@ -39,7 +39,7 @@
 
 		configGuiLoader *_loader;
 		x264Options _options;
-		vidEncProperties _properties;
+		vidEncOptions _encodeOptions;
 
 		x264_t *_handler;
 		x264_param_t _param;
@@ -58,18 +58,19 @@
 
 		void printParam(x264_param_t* x264Param);
 		void printCqm(const uint8_t cqm[], int size);
+		void updateParameters(void);
 
 	public:
 		x264Encoder(void);
 		~x264Encoder(void);
 		void setUiType(int uiType);
 		int isConfigurable(void);
-		int configure(void);
-		int getOptions(char *options, int bufferSize);
-		int setOptions(char *options);
+		int configure(vidEncVideoProperties *properties);
+		int getOptions(vidEncOptions *encodeOptions, char *pluginOptions, int bufferSize);
+		int setOptions(vidEncOptions *encodeOptions, char *pluginOptions);
 		int getCurrentPass(void);
 		int getPassCount(void);
-		int open(vidEncProperties *properties);
+		int open(vidEncVideoProperties *properties);
 		int beginPass(void);
 		int getExtraHeaderData(uint8_t **data);
 		int encodeFrame(vidEncEncodeParams *encodeParams);
@@ -79,12 +80,12 @@
 #else
 	void *encoders_getPointer(int uiType);
 	int x264Encoder_isConfigurable(void);
-	int x264Encoder_configure(void);
-	int x264Encoder_getOptions(char *options, int bufferSize);
-	int x264Encoder_setOptions(char *options);
+	int x264Encoder_configure(vidEncVideoProperties *properties);
+	int x264Encoder_getOptions(vidEncOptions *encodeOptions, char *pluginOptions, int bufferSize);
+	int x264Encoder_setOptions(vidEncOptions *encodeOptions, char *pluginOptions);
 	int x264Encoder_getPassCount(void);
 	int x264Encoder_getCurrentPass(void);
-	int x264Encoder_open(vidEncProperties *properties);
+	int x264Encoder_open(vidEncVideoProperties *properties);
 	void x264Encoder_close(void);
 	int x264Encoder_encodeFrame(vidEncEncodeParams *encodeParams);
 #endif	// __cplusplus

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/interface.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/interface.c	2008-04-25 14:10:11 UTC (rev 3985)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/interface.c	2008-04-26 19:14:38 UTC (rev 3986)
@@ -74,19 +74,19 @@
 	return x264Encoder_isConfigurable();
 }
 
-int vidEncConfigure(int encoderId)
+int vidEncConfigure(int encoderId, vidEncVideoProperties *properties)
 {
-	return x264Encoder_configure();
+	return x264Encoder_configure(properties);
 }
 
-int vidEncGetOptions(int encoderId, char *options, int bufferSize)
+int vidEncGetOptions(int encoderId, vidEncOptions *encodeOptions, char *pluginOptions, int bufferSize)
 {
-	return x264Encoder_getOptions(options, bufferSize);
+	return x264Encoder_getOptions(encodeOptions, pluginOptions, bufferSize);
 }
 
-int vidEncSetOptions(int encoderId, char *options)
+int vidEncSetOptions(int encoderId, vidEncOptions *encodeOptions, char *pluginOptions)
 {
-	return x264Encoder_setOptions(options);
+	return x264Encoder_setOptions(encodeOptions, pluginOptions);
 }
 
 int vidEncGetPassCount(int encoderId)
@@ -99,7 +99,7 @@
 	return x264Encoder_getCurrentPass();
 }
 
-int vidEncOpen(int encoderId, vidEncProperties *properties)
+int vidEncOpen(int encoderId, vidEncVideoProperties *properties)
 {
 	return x264Encoder_open(properties);
 }

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/options.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/options.cpp	2008-04-25 14:10:11 UTC (rev 3985)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/options.cpp	2008-04-26 19:14:38 UTC (rev 3986)
@@ -28,7 +28,6 @@
 	_param.rc.psz_rc_eq = strdup(_param.rc.psz_rc_eq);
 
 	_sarAsInput = false;
-	_param.rc.i_rc_method = X264_RC_CQP;
 }
 
 x264Options::~x264Options(void)
@@ -717,50 +716,6 @@
 	_param.analyse.b_ssim = computeSsim;
 }
 
-unsigned int x264Options::getRateControlMethod(void)
-{
-	return _param.rc.i_rc_method;
-}
-
-unsigned int x264Options::getBitrate(void)
-{
-	return _param.rc.i_bitrate;
-}
-
-void x264Options::setBitrate(unsigned int bitrate)
-{
-	_param.rc.i_rc_method = X264_RC_ABR;
-	_param.rc.i_bitrate = bitrate;
-}
-
-unsigned int x264Options::getQuantiser(void)
-{
-	return _param.rc.i_qp_constant;
-}
-
-void x264Options::setQuantiser(unsigned int quantiser)
-{
-	if (quantiser <= 51)
-	{
-		_param.rc.i_rc_method = X264_RC_CQP;
-		_param.rc.i_qp_constant = quantiser;
-	}
-}
-
-unsigned int x264Options::getVbrQuantiser(void)
-{
-	return (unsigned int)_param.rc.f_rf_constant;
-}
-
-void x264Options::setVbrQuantiser(unsigned vbrQuantiser)
-{
-	if (vbrQuantiser <= 51)
-	{
-		_param.rc.i_rc_method = X264_RC_CRF;
-		_param.rc.f_rf_constant = vbrQuantiser;
-	}
-}
-
 unsigned int x264Options::getQuantiserMinimum(void)
 {
 	return _param.rc.i_qp_min;
@@ -1283,21 +1238,6 @@
 		xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"computeSsim", boolean2String(xmlBuffer, bufferSize, getComputeSsim()));
 
 		xmlNodeChild = xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"rateControl", NULL);
-		xmlNodeChild2 = xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"method", NULL);
-
-		switch (getRateControlMethod())
-		{
-			case X264_RC_CQP:
-				xmlNewChild(xmlNodeChild2, NULL, (xmlChar*)"quantiser", number2String(xmlBuffer, bufferSize, getQuantiser()));
-				break;
-			case X264_RC_CRF:
-				xmlNewChild(xmlNodeChild2, NULL, (xmlChar*)"vbrQuantiser", number2String(xmlBuffer, bufferSize, getVbrQuantiser()));
-				break;
-			case X264_RC_ABR:
-				xmlNewChild(xmlNodeChild2, NULL, (xmlChar*)"bitrate", number2String(xmlBuffer, bufferSize, getBitrate()));
-				break;
-		}
-
 		xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"quantiserMinimum", number2String(xmlBuffer, bufferSize, getQuantiserMinimum()));
 		xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"quantiserMaximum", number2String(xmlBuffer, bufferSize, getQuantiserMaximum()));
 		xmlNewChild(xmlNodeChild, NULL, (xmlChar*)"quantiserStep", number2String(xmlBuffer, bufferSize, getQuantiserStep()));
@@ -1778,21 +1718,7 @@
 		{
 			char *content = (char*)xmlNodeGetContent(xmlChild);
 
-			if (strcmp((char*)xmlChild->name, "method") == 0)
-			{
-				xmlNode *xmlMethod = node->children;
-				char *methodContent = (char*)xmlNodeGetContent(xmlChild);
-
-				if (strcmp((char*)xmlMethod->name, "quantiser") == 0)
-					setQuantiser(atoi(methodContent));
-				else if (strcmp((char*)xmlMethod->name, "vbrQuantiser") == 0)
-					setVbrQuantiser(atoi(methodContent));
-				else if (strcmp((char*)xmlMethod->name, "bitrate") == 0)
-					setBitrate(atoi(methodContent));
-
-				xmlFree(methodContent);
-			}
-			else if (strcmp((char*)xmlChild->name, "quantiserMinimum") == 0)
+			if (strcmp((char*)xmlChild->name, "quantiserMinimum") == 0)
 				setQuantiserMinimum(atoi(content));
 			else if (strcmp((char*)xmlChild->name, "quantiserMaximum") == 0)
 				setQuantiserMaximum(atoi(content));

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/options.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/options.h	2008-04-25 14:10:11 UTC (rev 3985)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/options.h	2008-04-26 19:14:38 UTC (rev 3986)
@@ -229,17 +229,6 @@
 	bool getComputeSsim(void);
 	void setComputeSsim(bool computeSsim);
 
-	unsigned int getRateControlMethod(void);
-
-	unsigned int getBitrate(void);
-	void setBitrate(unsigned int bitrate);
-
-	unsigned int getQuantiser(void);
-	void setQuantiser(unsigned int quantiser);
-
-	unsigned int getVbrQuantiser(void);
-	void setVbrQuantiser(unsigned int vbrQuantiser);
-
 	unsigned int getQuantiserMinimum(void);
 	void setQuantiserMinimum(unsigned int quantiserMinimum);
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp	2008-04-25 14:10:11 UTC (rev 3985)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp	2008-04-26 19:14:38 UTC (rev 3986)
@@ -25,7 +25,7 @@
 #include "DIA_coreToolkit.h"
 #include "DIA_fileSel.h"
 
-x264ConfigDialog::x264ConfigDialog(vidEncProperties *properties, x264Options *options)
+x264ConfigDialog::x264ConfigDialog(vidEncVideoProperties *properties, vidEncOptions *encodeOptions, x264Options *options)
 {
 	static const int _predefinedARs[aspectRatioCount][2] = {{16, 15}, {64, 45}, {8, 9}, {32, 27}};
 
@@ -75,7 +75,7 @@
 	connect(ui.zoneEditButton, SIGNAL(pressed()), this, SLOT(zoneEditButton_pressed()));
 	connect(ui.frameTypeFileButton, SIGNAL(pressed()), this, SLOT(frameTypeFileButton_pressed()));	
 
-	loadSettings(properties, options);
+	loadSettings(encodeOptions, options);
 }
 
 // General tab
@@ -245,30 +245,30 @@
 	return valueIndex;
 }
 
-void x264ConfigDialog::loadSettings(vidEncProperties *properties, x264Options *options)
+void x264ConfigDialog::loadSettings(vidEncOptions *encodeOptions, x264Options *options)
 {
 	// General tab
-	switch (properties->encodeMode)
+	switch (encodeOptions->encodeMode)
 	{
 		case ADM_VIDENC_MODE_CBR:	// Constant Bitrate (Single Pass)
 			ui.encodingModeComboBox->setCurrentIndex(0);
-			ui.targetRateControlSpinBox->setValue(properties->encodeModeParameter);
+			ui.targetRateControlSpinBox->setValue(encodeOptions->encodeModeParameter);
 			break;
 		case ADM_VIDENC_MODE_CQP:	// Constant Quality (Single Pass)
 			ui.encodingModeComboBox->setCurrentIndex(1);
-			ui.targetRateControlSpinBox->setValue(properties->encodeModeParameter);
+			ui.quantiserSpinBox->setValue(encodeOptions->encodeModeParameter);
 			break;
 		case ADM_VIDENC_MODE_AQP:	// Average Quantizer (Single Pass)
 			ui.encodingModeComboBox->setCurrentIndex(2);
-			ui.targetRateControlSpinBox->setValue(properties->encodeModeParameter);
+			ui.quantiserSpinBox->setValue(encodeOptions->encodeModeParameter);
 			break;
 		case ADM_VIDENC_MODE_2PASS_SIZE:	// Video Size (Two Pass)
 			ui.encodingModeComboBox->setCurrentIndex(3);
-			ui.targetRateControlSpinBox->setValue(properties->encodeModeParameter);
+			ui.targetRateControlSpinBox->setValue(encodeOptions->encodeModeParameter);
 			break;
 		case ADM_VIDENC_MODE_2PASS_ABR:	// Average Bitrate (Two Pass)
 			ui.encodingModeComboBox->setCurrentIndex(4);
-			ui.targetRateControlSpinBox->setValue(properties->encodeModeParameter);
+			ui.targetRateControlSpinBox->setValue(encodeOptions->encodeModeParameter);
 			break;
 	}
 
@@ -426,30 +426,30 @@
 	ui.fullRangeSamplesCheckBox->setChecked(options->getFullRangeSamples());
 }
 
-void x264ConfigDialog::saveSettings(vidEncProperties *properties, x264Options *options)
+void x264ConfigDialog::saveSettings(vidEncOptions *encodeOptions, x264Options *options)
 {
 	// General tab
 	switch (ui.encodingModeComboBox->currentIndex())
 	{
 		case 0:	// Constant Bitrate (Single Pass)
-			properties->encodeMode = ADM_VIDENC_MODE_CBR;
-			properties->encodeModeParameter = ui.targetRateControlSpinBox->value();
+			encodeOptions->encodeMode = ADM_VIDENC_MODE_CBR;
+			encodeOptions->encodeModeParameter = ui.targetRateControlSpinBox->value();
 			break;
 		case 1: // Constant Quality (Single Pass)
-			properties->encodeMode = ADM_VIDENC_MODE_CQP;
-			properties->encodeModeParameter = ui.quantiserSpinBox->value();
+			encodeOptions->encodeMode = ADM_VIDENC_MODE_CQP;
+			encodeOptions->encodeModeParameter = ui.quantiserSpinBox->value();
 			break;
 		case 2: // Average Quantizer (Single Pass)
-			properties->encodeMode = ADM_VIDENC_MODE_AQP;
-			properties->encodeModeParameter = ui.quantiserSpinBox->value();
+			encodeOptions->encodeMode = ADM_VIDENC_MODE_AQP;
+			encodeOptions->encodeModeParameter = ui.quantiserSpinBox->value();
 			break;
 		case 3: // Video Size (Two Pass)
-			properties->encodeMode = ADM_VIDENC_MODE_2PASS_SIZE;
-			properties->encodeModeParameter = ui.targetRateControlSpinBox->value();
+			encodeOptions->encodeMode = ADM_VIDENC_MODE_2PASS_SIZE;
+			encodeOptions->encodeModeParameter = ui.targetRateControlSpinBox->value();
 			break;
 		case 4: // Average Bitrate (Two Pass)
-			properties->encodeMode = ADM_VIDENC_MODE_2PASS_ABR;
-			properties->encodeModeParameter = ui.targetRateControlSpinBox->value();
+			encodeOptions->encodeMode = ADM_VIDENC_MODE_2PASS_ABR;
+			encodeOptions->encodeModeParameter = ui.targetRateControlSpinBox->value();
 			break;
 	}
 
@@ -588,13 +588,13 @@
 
 extern "C"
 {
-	int showX264ConfigDialog(vidEncProperties *properties, x264Options *options)
+	int showX264ConfigDialog(vidEncVideoProperties *properties, vidEncOptions *encodeOptions, x264Options *options)
 	{
-		x264ConfigDialog dialog(properties, options);
+		x264ConfigDialog dialog(properties, encodeOptions, options);
 
 		if (dialog.exec() == QDialog::Accepted)
 		{
-			dialog.saveSettings(properties, options);
+			dialog.saveSettings(encodeOptions, options);
 
 			return 1;
 		}

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.h	2008-04-25 14:10:11 UTC (rev 3985)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.h	2008-04-26 19:14:38 UTC (rev 3986)
@@ -39,12 +39,12 @@
 	uint8_t inter4x4Luma[16], interChroma[16];
 	uint8_t intra8x8Luma[64], inter8x8Luma[64];
 
-	void loadSettings(vidEncProperties *properties, x264Options *options);
+	void loadSettings(vidEncOptions *encodeOptions, x264Options *options);
 	int getValueIndexInArray(uint8_t value, const uint8_t valueArray[], int elementCount);
 
 public:
-	x264ConfigDialog(vidEncProperties *properties, x264Options *options);
-	void saveSettings(vidEncProperties *properties, x264Options *options);
+	x264ConfigDialog(vidEncVideoProperties *properties, vidEncOptions *encodeOptions, x264Options *options);
+	void saveSettings(vidEncOptions *encodeOptions, x264Options *options);
 
 private slots:
 	// General tab

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Param.xsd
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Param.xsd	2008-04-25 14:10:11 UTC (rev 3985)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Param.xsd	2008-04-26 19:14:38 UTC (rev 3986)
@@ -348,15 +348,6 @@
 				<xs:element name="rateControl">
 					<xs:complexType>
 						<xs:sequence>
-							<xs:element name="method">
-								<xs:complexType>
-									<xs:choice>
-										<xs:element name="bitrate" type="uint"/>
-										<xs:element name="quantiser" type="quantiser"/>
-										<xs:element name="vbrQuantiser" type="quantiser"/>
-									</xs:choice>
-								</xs:complexType>
-							</xs:element>
 							<xs:element name="quantiserMinimum">
 								<xs:simpleType>
 									<xs:restriction base="xs:integer">



From gruntster at mail.berlios.de  Sat Apr 26 21:46:08 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Sat, 26 Apr 2008 21:46:08 +0200
Subject: [Avidemux-svn-commit] r3987 - in
	branches/avidemux_2.5_branch_gruntster:
	avidemux/ADM_audiofilter avidemux/ADM_encoder
	avidemux/ADM_outputs/oplug_avi avidemux/ADM_outputs/oplug_dummy
	avidemux/ADM_outputs/oplug_flv avidemux/ADM_outputs/oplug_mp4
	avidemux/ADM_outputs/oplug_mpeg avidemux/ADM_outputs/oplug_mpegFF
	avidemux/ADM_outputs/oplug_ogm
	avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog
	avidemux/ADM_userInterfaces/ADM_commonUI avidemux/winInstaller po
Message-ID: <200804261946.m3QJk8XZ013854@sheep.berlios.de>

Author: gruntster
Date: 2008-04-26 21:45:40 +0200 (Sat, 26 Apr 2008)
New Revision: 3987

Added:
   branches/avidemux_2.5_branch_gruntster/po/avidemux_fr.ts
   branches/avidemux_2.5_branch_gruntster/po/qt_fr.ts
Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiofilter_buildchain.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_encCodecDesc.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encCopy.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encRequant.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encXvid4.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encdivx.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encffmpeg.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encmjpeg.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encmpeg2enc.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encx264.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encxvid.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encyv12.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisave.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_pack.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_unpack.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_savesmart.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_ogm/op_ogaudio.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_ogm/op_ogsave.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_ogm/op_ogsavecopy.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_chromaShift.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_mjpeg.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/winInstaller/avidemux.nsi
   branches/avidemux_2.5_branch_gruntster/po/avidemux_it.ts
   branches/avidemux_2.5_branch_gruntster/po/fr.po
   branches/avidemux_2.5_branch_gruntster/po/it.po
Log:
[Merge] integrate changes from 2.4 branch (r3982)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiofilter_buildchain.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiofilter_buildchain.cpp	2008-04-26 19:14:38 UTC (rev 3986)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiofilter_buildchain.cpp	2008-04-26 19:45:40 UTC (rev 3987)
@@ -403,7 +403,7 @@
   {
     delete tmpfilter;
     tmpfilter=NULL;
-    GUI_Error_HIG("Encoder initialization failed", "Not activated."); 
+    GUI_Error_HIG(QT_TR_NOOP("Encoder initialization failed"), QT_TR_NOOP("Not activated."));
   }
   output=tmpfilter;
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_encCodecDesc.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_encCodecDesc.h	2008-04-26 19:14:38 UTC (rev 3986)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_encCodecDesc.h	2008-04-26 19:45:40 UTC (rev 3987)
@@ -11,7 +11,7 @@
 
 COMPRES_PARAMS yv12codec = {
   CodecYV12,
-  "YV12 (raw)",
+  QT_TR_NOOP("YV12 (raw)"),
   "YV12",
   "YV12",
   COMPRESS_CQ,
@@ -109,7 +109,7 @@
 
 COMPRES_PARAMS ffmpegH263Codec = {
   CodecH263,
-  "H.263 (lavc)",
+  QT_TR_NOOP("H.263 (lavc)"),
   "H263",
   "Lavcodec H263",
   COMPRESS_CQ,
@@ -125,7 +125,7 @@
 };
 COMPRES_PARAMS ffmpegH263PCodec = {
   CodecH263P,
-  "H.263+ (lavc)",
+  QT_TR_NOOP("H.263+ (lavc)"),
   "H263P",
   "Lavcodec H263+",
   COMPRESS_CQ,
@@ -141,7 +141,7 @@
 };
 COMPRES_PARAMS ffmpegMpeg4 = {
   CodecFF,
-  "MPEG-4 ASP (lavc)",
+  QT_TR_NOOP("MPEG-4 ASP (lavc)"),
   "FFMpeg4",
   "Lavcodec Mpeg4",
   COMPRESS_CQ,
@@ -157,7 +157,7 @@
 };
 COMPRES_PARAMS ffmpegDV = {
   CodecDV,
-  "DV (lavc)",
+  QT_TR_NOOP("DV (lavc)"),
   "DV",
   "DV",
   COMPRESS_CQ,
@@ -173,7 +173,7 @@
 };
 COMPRES_PARAMS ffmpegFLV1 = {
   CodecFLV1,
-  "FLV1 (lavc)",
+  QT_TR_NOOP("FLV1 (lavc)"),
   "FLV1",
   "FLV1",
   COMPRESS_CBR,
@@ -189,7 +189,7 @@
 };
 COMPRES_PARAMS ffmpegSnow = {
   CodecSnow,
-  "Snow (lavc)",
+  QT_TR_NOOP("Snow (lavc)"),
   "FFMpeg4",
   "Lavcodec Snow",
   COMPRESS_CQ,
@@ -205,7 +205,7 @@
 };
 COMPRES_PARAMS ffmpegFFHUFF = {
   CodecFFhuff,
-  "FF Huffyuv (lavc)",
+  QT_TR_NOOP("FF Huffyuv (lavc)"),
   "FFHUFF",
   "Lavcodec FF HUFFYUV",
   COMPRESS_CQ,
@@ -221,7 +221,7 @@
 };
 COMPRES_PARAMS ffmpegHUFF = {
   CodecHuff,
-  "Huffyuv (lavc)",
+  QT_TR_NOOP("Huffyuv (lavc)"),
   "HUFF",
   "Lavcodec HUFFYUV",
   COMPRESS_CQ,
@@ -237,7 +237,7 @@
 };
 COMPRES_PARAMS ffmpegFFV1 = {
   CodecFFV1,
-  "FFV1 (lavc)",
+  QT_TR_NOOP("FFV1 (lavc)"),
   "FFV1",
   "Lavcodec FFV1",
   COMPRESS_CQ,
@@ -255,7 +255,7 @@
 extern uint8_t DIA_mjpegCodecSetting (COMPRES_PARAMS * param);
 COMPRES_PARAMS MjpegCodec = {
   CodecMjpeg,
-  "MJPEG (lavc)",
+  QT_TR_NOOP("MJPEG (lavc)"),
   "Mjpeg",
   "Mjpeg (lavcodec)",
   COMPRESS_CQ,
@@ -312,7 +312,7 @@
 
 COMPRES_PARAMS ffmpeg1Codec = {
   CodecXVCD,
-  "VCD (lavc)",
+  QT_TR_NOOP("VCD (lavc)"),
   "XVCD",
   "Lavcodec Mpeg1",
   COMPRESS_CQ,
@@ -372,7 +372,7 @@
 
 COMPRES_PARAMS ffmpeg2DVDCodec = {
   CodecXDVD,
-  "DVD (lavc)",
+  QT_TR_NOOP("DVD (lavc)"),
   "XDVD",
   "Lavcodec Mpeg2 (DVD)",
   COMPRESS_CQ,
@@ -432,7 +432,7 @@
 
 COMPRES_PARAMS ffmpeg2SVCDCodec = {
   CodecXSVCD,
-  "SVCD (lavc)",
+  QT_TR_NOOP("SVCD (lavc)"),
   "XSVCD",
   "Lavcodec Mpeg2 (SVCD)",
   COMPRESS_CQ,
@@ -459,9 +459,9 @@
 
 COMPRES_PARAMS VCDCodec = {
   CodecVCD,
-  "VCD (mpeg2enc)",
+  QT_TR_NOOP("VCD (mpeg2enc)"),
   "VCD",
-  "Mpeg2enc(VCD)",
+  "Mpeg2enc (VCD)",
   COMPRESS_CBR,
   4,
   1500,
@@ -491,9 +491,9 @@
 
 COMPRES_PARAMS SVCDCodec = {
   CodecSVCD,
-  "SVCD (mpeg2enc)",
+  QT_TR_NOOP("SVCD (mpeg2enc)"),
   "SVCD",
-  "Mpeg2enc(SVCD)",
+  "Mpeg2enc (SVCD)",
   COMPRESS_CQ,
   4,
   1500,
@@ -510,7 +510,7 @@
 uint32_t RequantFactorExtra=1000; // 1000* the actual requant factor
 COMPRES_PARAMS RequantCodec = {
     CodecRequant,
-    "MPEG-2 requant",
+    QT_TR_NOOP("MPEG-2 requant"),
     "REQUANT",
     "Mpeg2 Requantizer",
     COMPRESS_CQ,
@@ -537,9 +537,9 @@
 
 COMPRES_PARAMS DVDCodec = {
   CodecDVD,
-  "DVD (mpeg2enc)",
+  QT_TR_NOOP("DVD (mpeg2enc)"),
   "DVD",
-  "Mpeg2enc(DVD)",
+  "Mpeg2enc (DVD)",
   COMPRESS_CQ,
   4,
   1500,
@@ -669,7 +669,7 @@
 extern uint8_t DIA_xvid4 (COMPRES_PARAMS * incoming);
 COMPRES_PARAMS Xvid4Codec = {
   CodecXvid4,
-  "MPEG-4 ASP (Xvid4)",
+  QT_TR_NOOP("MPEG-4 ASP (Xvid4)"),
   "XVID4",
   "XVID 4 mpeg4",
   COMPRESS_CQ,
@@ -869,7 +869,7 @@
 extern uint8_t DIA_x264 (COMPRES_PARAMS * conf);
 COMPRES_PARAMS x264Codec = {
   CodecX264,
-  "MPEG-4 AVC (x264)",
+  QT_TR_NOOP("MPEG-4 AVC (x264)"),
   "X264",
   "x264 h264 encoder",
   COMPRESS_AQ,
@@ -886,10 +886,10 @@
 
 #endif
 COMPRES_PARAMS DUMMYONE =
-  { CodecDummy, "dummy", "dummy", "dummy", COMPRESS_CQ, 4, 1500, 700,1000, 0, 0,
+  { CodecDummy, QT_TR_NOOP("dummy"), "dummy", "dummy", COMPRESS_CQ, 4, 1500, 700,1000, 0, 0,
 NULL, 0 };
 COMPRES_PARAMS CopyCodec =
-  { CodecCopy, "Copy", "Copy", "Copy", COMPRESS_CQ, 4, 1500, 700,1000, 0, 0, NULL,
+  { CodecCopy, QT_TR_NOOP("Copy"), "Copy", "Copy", COMPRESS_CQ, 4, 1500, 700,1000, 0, 0, NULL,
 0 };
 
 COMPRES_PARAMS *internalVideoCodec[] = {

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encCopy.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encCopy.cpp	2008-04-26 19:14:38 UTC (rev 3986)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encCopy.cpp	2008-04-26 19:45:40 UTC (rev 3987)
@@ -79,7 +79,7 @@
 const char *
 EncoderCopy::getDisplayName (void)
 {
-  return "Copy";
+  return QT_TR_NOOP("Copy");
 }
 
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encRequant.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encRequant.cpp	2008-04-26 19:14:38 UTC (rev 3986)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encRequant.cpp	2008-04-26 19:45:40 UTC (rev 3987)
@@ -87,7 +87,7 @@
 const char *
 EncoderRequant::getDisplayName (void)
 {
-  return "Requant";
+  return QT_TR_NOOP("Requant");
 }
 
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encXvid4.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encXvid4.h	2008-04-26 19:14:38 UTC (rev 3986)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encXvid4.h	2008-04-26 19:45:40 UTC (rev 3987)
@@ -59,7 +59,7 @@
   }
   virtual const char *getDisplayName (void)
   {
-    return "Xvid4";
+    return QT_TR_NOOP("Xvid4");
   }
 
 };

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encdivx.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encdivx.h	2008-04-26 19:14:38 UTC (rev 3986)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encdivx.h	2008-04-26 19:45:40 UTC (rev 3987)
@@ -49,7 +49,7 @@
   }
   virtual const char *getDisplayName (void)
   {
-    return "Divx";
+    return QT_TR_NOOP("DivX");
   }
 
 };

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encffmpeg.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encffmpeg.h	2008-04-26 19:14:38 UTC (rev 3986)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encffmpeg.h	2008-04-26 19:45:40 UTC (rev 3987)
@@ -44,7 +44,7 @@
   virtual uint8_t startPass1 (void);
   virtual const char *getDisplayName (void)
   {
-    return "LavCodec";
+    return QT_TR_NOOP("LavCodec");
   }
   virtual const char *getCodecName (void);	//{return "DX50";}
   virtual const char *getFCCHandler (void)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encmjpeg.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encmjpeg.h	2008-04-26 19:14:38 UTC (rev 3986)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encmjpeg.h	2008-04-26 19:45:40 UTC (rev 3987)
@@ -57,7 +57,7 @@
   }
   virtual const char *getDisplayName (void)
   {
-    return "Mjpeg";
+    return QT_TR_NOOP("MJPEG");
   }
 };
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encmpeg2enc.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encmpeg2enc.h	2008-04-26 19:14:38 UTC (rev 3986)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encmpeg2enc.h	2008-04-26 19:45:40 UTC (rev 3987)
@@ -54,7 +54,7 @@
     virtual uint8_t startPass1 (void);
     virtual const char *getCodecName (void) {return "MPEG";};
     virtual const char *getFCCHandler (void) {return "MPEG";};
-    virtual const char *getDisplayName (void) {return "MPEG";}; // FIXME
+    virtual const char *getDisplayName (void) {return QT_TR_NOOP("MPEG");}; // FIXME
             uint8_t verifyLog(const char *name,uint32_t nbFrame);
 
 };

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encx264.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encx264.h	2008-04-26 19:14:38 UTC (rev 3986)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encx264.h	2008-04-26 19:45:40 UTC (rev 3987)
@@ -62,7 +62,7 @@
   }
   virtual const char *getDisplayName (void)
   {
-    return "X264";
+    return QT_TR_NOOP("x264");
   }
   virtual uint8_t hasExtraHeaderData (uint32_t * l, uint8_t ** data);
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encxvid.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encxvid.h	2008-04-26 19:14:38 UTC (rev 3986)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encxvid.h	2008-04-26 19:45:40 UTC (rev 3987)
@@ -58,7 +58,7 @@
   }
   virtual const char *getDisplayName (void)
   {
-    return "Xvid";
+    return QT_TR_NOOP("Xvid");
   }
 };
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encyv12.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encyv12.h	2008-04-26 19:14:38 UTC (rev 3986)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encyv12.h	2008-04-26 19:45:40 UTC (rev 3987)
@@ -66,7 +66,7 @@
   }
   const char *getDisplayName (void)
   {
-    return "YV12";
+    return QT_TR_NOOP("YV12");
   }
 
 };

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisave.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisave.cpp	2008-04-26 19:14:38 UTC (rev 3986)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisave.cpp	2008-04-26 19:45:40 UTC (rev 3987)
@@ -243,7 +243,7 @@
   audio_filter=NULL;
    if(!currentaudiostream) 
    {
-   	encoding_gui->setAudioCodec("None");
+   	encoding_gui->setAudioCodec(QT_TR_NOOP("None"));
 	return 1;
    }
   printf (" mux mode : %d mux param %d\n", muxMode, muxParam);
@@ -258,7 +258,7 @@
     {
       // else prepare the incoming raw stream
       // audio copy mode here
-      encoding_gui->setAudioCodec("Copy");
+      encoding_gui->setAudioCodec(QT_TR_NOOP("Copy"));
       audio_filter=buildAudioFilter( currentaudiostream,video_body->getTime (frameStart));
       if(!audio_filter) return 0;
     }
@@ -354,9 +354,9 @@
 GenericAviSave::guiStart (void)
 {
       encoding_gui=new DIA_encoding(25000);
-      encoding_gui->setCodec("Copy");
+      encoding_gui->setCodec(QT_TR_NOOP("Copy"));
       encoding_gui->setFrame (0,0,2 ,100); // FXMe
-      encoding_gui->setContainer("Avi");
+      encoding_gui->setContainer(QT_TR_NOOP("AVI"));
 
 }
 
@@ -472,24 +472,24 @@
 {
       switch(codec)
       {
-              case WAV_DTS: return (const char *)"DTS";
-              case WAV_PCM: return (const char *)"PCM";
-              case WAV_MP2: return (const char *)"MP2";
-              case WAV_MP3: return (const char *)"MP3";
-              case (WAV_WMA):  return (const char *)"WMA";
-              case (WAV_LPCM): return (const char *)"LPCM";	
-              case (WAV_AC3):  return (const char *)"AC3";
-              case (WAV_OGG): return (const char *)"Ogg Vorbis";
-              case (WAV_MP4): return (const char *)"MP4 audio";
-              case (WAV_AAC): return (const char *)"AAC";
-              case (WAV_QDM2): return (const char *)"QDM2";
-              case (WAV_AMRNB): return (const char *)"AMR narrow band";
-              case (WAV_MSADPCM): return (const char *)"MSADPCM";
-              case (WAV_ULAW): return (const char *)"ULAW";
-              case WAV_IMAADPCM: return (const char *)"IMA ADPCM";
-              case WAV_8BITS_UNSIGNED:return (const char *)"PCM 8bits";
+              case WAV_DTS: return QT_TR_NOOP("DTS");
+              case WAV_PCM: return QT_TR_NOOP("PCM");
+              case WAV_MP2: return QT_TR_NOOP("MP2");
+              case WAV_MP3: return QT_TR_NOOP("MP3");
+              case WAV_WMA:  return QT_TR_NOOP("WMA");
+              case WAV_LPCM: return QT_TR_NOOP("LPCM");	
+              case WAV_AC3:  return QT_TR_NOOP("AC3");
+              case WAV_OGG: return QT_TR_NOOP("Ogg Vorbis");
+              case WAV_MP4: return QT_TR_NOOP("MP4");
+              case WAV_AAC: return QT_TR_NOOP("AAC");
+              case WAV_QDM2: return QT_TR_NOOP("QDM2");
+              case WAV_AMRNB: return QT_TR_NOOP("AMR-NB");
+              case WAV_MSADPCM: return QT_TR_NOOP("MSADPCM");
+              case WAV_ULAW: return QT_TR_NOOP("ULAW");
+              case WAV_IMAADPCM: return QT_TR_NOOP("IMA ADPCM");
+              case WAV_8BITS_UNSIGNED:return QT_TR_NOOP("8-bit PCM");
       }
-      return (const char *)"Unknown codec";
+      return QT_TR_NOOP("Unknown codec");
 }
 
 //---------------------------------------

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy.cpp	2008-04-26 19:14:38 UTC (rev 3986)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy.cpp	2008-04-26 19:45:40 UTC (rev 3987)
@@ -100,7 +100,7 @@
 	}
  _incoming = getFirstVideoFilter (frameStart,frameEnd-frameStart);
  encoding_gui->setFps(_incoming->getInfo()->fps1000);
- encoding_gui->setPhasis("Saving");
+ encoding_gui->setPhasis(QT_TR_NOOP("Saving"));
  // Set up our copy codec ...
   copy=new EncoderCopy(NULL);
   if(!copy->configure(_incoming))

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_pack.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_pack.cpp	2008-04-26 19:14:38 UTC (rev 3986)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_pack.cpp	2008-04-26 19:45:40 UTC (rev 3987)
@@ -128,7 +128,7 @@
 	}
  _incoming = getFirstVideoFilter (frameStart,frameEnd-frameStart);
  encoding_gui->setFps(_incoming->getInfo()->fps1000);
- encoding_gui->setPhasis("Saving");
+ encoding_gui->setPhasis(QT_TR_NOOP("Saving"));
  
  // Set up our copy codec ...
   copy=new EncoderCopy(NULL);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_unpack.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_unpack.cpp	2008-04-26 19:14:38 UTC (rev 3986)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_unpack.cpp	2008-04-26 19:45:40 UTC (rev 3987)
@@ -102,7 +102,7 @@
 	}
  _incoming = getFirstVideoFilter (frameStart,frameEnd-frameStart);
  encoding_gui->setFps(_incoming->getInfo()->fps1000);
- encoding_gui->setPhasis("Saving");
+ encoding_gui->setPhasis(QT_TR_NOOP("Saving"));
  
  // Set up our copy codec ...
   copy=new EncoderCopy(NULL);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp	2008-04-26 19:14:38 UTC (rev 3986)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp	2008-04-26 19:45:40 UTC (rev 3987)
@@ -128,7 +128,7 @@
 	if(!reuse)
  	{
 	
-      	guiSetPhasis ("1st Pass");
+      	guiSetPhasis (QT_TR_NOOP("1st Pass"));
       	aprintf("**Pass 1:%lu\n",frametogo);
      	buffer = new uint8_t[_incoming->getInfo ()->width *
 		    _incoming->getInfo ()->height * 3];
@@ -235,14 +235,14 @@
   // CBR or CQ
   if (frame == 0)
   {
-    encoding_gui->setCodec((char *)_encode->getDisplayName())  ;
+    encoding_gui->setCodec(_encode->getDisplayName())  ;
   if (!_encode->isDualPass ())
   {
-                          guiSetPhasis ("Encoding");
+                          guiSetPhasis (QT_TR_NOOP("Encoding"));
         }
   else
           {
-                          guiSetPhasis ("Encoding, 2nd pass");
+                          guiSetPhasis (QT_TR_NOOP("2nd Pass"));
         }
   }
   // first read

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_savesmart.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_savesmart.cpp	2008-04-26 19:14:38 UTC (rev 3986)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_savesmart.cpp	2008-04-26 19:45:40 UTC (rev 3987)
@@ -94,7 +94,7 @@
   aImage=new ADMImage(_mainaviheader.dwWidth,_mainaviheader.dwHeight);
   _incoming = getFirstVideoFilter (frameStart,frameEnd-frameStart);
   encoding_gui->setFps(_incoming->getInfo()->fps1000);
-  encoding_gui->setPhasis("Smart Copy");
+  encoding_gui->setPhasis(QT_TR_NOOP("Smart Copy"));
   // B frame ?
     for(int i=frameStart;i<frameEnd;i++)
     {

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp	2008-04-26 19:14:38 UTC (rev 3986)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp	2008-04-26 19:45:40 UTC (rev 3987)
@@ -131,10 +131,10 @@
                 }
 
                 // init compressor
-                encoding_gui->setContainer("Dummy");
-                encoding_gui->setAudioCodec("None");
+                encoding_gui->setContainer(QT_TR_NOOP("Dummy"));
+                encoding_gui->setAudioCodec(QT_TR_NOOP("None"));
                 if(!videoProcessMode())
-                        encoding_gui->setCodec("Copy");
+                        encoding_gui->setCodec(QT_TR_NOOP("Copy"));
                 else
                         encoding_gui->setCodec(_encode->getDisplayName());
                 
@@ -144,7 +144,7 @@
                      goto  stopit;
                 };
 
-                encoding_gui->setPhasis ("Encoding");
+                encoding_gui->setPhasis (QT_TR_NOOP("Encoding"));
                 
                 
                 info.width=_incoming->getInfo()->width;
@@ -186,7 +186,7 @@
               }
          
           if(!videoProcessMode())
-                encoding_gui->setCodec("Copy");
+                encoding_gui->setCodec(QT_TR_NOOP("Copy"));
           else
                 encoding_gui->setCodec(_encode->getDisplayName());
            //

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp	2008-04-26 19:14:38 UTC (rev 3986)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp	2008-04-26 19:45:40 UTC (rev 3987)
@@ -183,10 +183,10 @@
                 }
 
                 // init compressor
-                encoding_gui->setContainer("FLV");
-                encoding_gui->setAudioCodec("None");
+                encoding_gui->setContainer(QT_TR_NOOP("FLV"));
+                encoding_gui->setAudioCodec(QT_TR_NOOP("None"));
                 if(!videoProcessMode())
-                        encoding_gui->setCodec("Copy");
+                        encoding_gui->setCodec(QT_TR_NOOP("Copy"));
                 else
                         encoding_gui->setCodec(_encode->getDisplayName());
                 
@@ -196,7 +196,7 @@
                      goto  stopit;
                 };
 
-                encoding_gui->setPhasis ("Encoding");
+                encoding_gui->setPhasis (QT_TR_NOOP("Encoding"));
                 
                 
                 info.width=_incoming->getInfo()->width;
@@ -254,11 +254,11 @@
                 if(audioProcessMode())
                         encoding_gui->setAudioCodec(getStrFromAudioCodec(audio->getInfo()->encoding));
                 else
-                         encoding_gui->setAudioCodec("Copy");
+                         encoding_gui->setAudioCodec(QT_TR_NOOP("Copy"));
 
            }else
            {
-                encoding_gui->setAudioCodec("None");
+                encoding_gui->setAudioCodec(QT_TR_NOOP("None"));
            }
 // ____________Setup Muxer _____________________
            muxer= new lavMuxer;
@@ -272,10 +272,10 @@
                          goto stopit;
 //_____________ Loop _____________________
           
-          encoding_gui->setContainer("FLV");
+          encoding_gui->setContainer(QT_TR_NOOP("FLV"));
          
           if(!videoProcessMode())
-                encoding_gui->setCodec("Copy");
+                encoding_gui->setCodec(QT_TR_NOOP("Copy"));
           else
                 encoding_gui->setCodec(_encode->getDisplayName());
            //

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp	2008-04-26 19:14:38 UTC (rev 3986)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp	2008-04-26 19:45:40 UTC (rev 3987)
@@ -116,9 +116,9 @@
 const char *containerTitle;
            switch(type)
            {
-             case ADM_PSP:muxerType=MUXER_PSP;containerTitle="PSP";break;
-             case ADM_MP4:muxerType=MUXER_MP4;containerTitle="MP4";break;
-             case ADM_MATROSKA:muxerType=MUXER_MATROSKA;containerTitle="MKV";break;
+             case ADM_PSP:muxerType=MUXER_PSP;containerTitle=QT_TR_NOOP("PSP");break;
+             case ADM_MP4:muxerType=MUXER_MP4;containerTitle=QT_TR_NOOP("MP4");break;
+             case ADM_MATROSKA:muxerType=MUXER_MATROSKA;containerTitle=QT_TR_NOOP("MKV");break;
              default:
                 ADM_assert(0);
            }
@@ -150,9 +150,9 @@
                
                   encoding_gui->setContainer(containerTitle);
                
-                encoding_gui->setAudioCodec("None");
+                encoding_gui->setAudioCodec(QT_TR_NOOP("None"));
                 if(!videoProcessMode())
-                        encoding_gui->setCodec("Copy");
+                        encoding_gui->setCodec(QT_TR_NOOP("Copy"));
                 else
                         encoding_gui->setCodec(_encode->getDisplayName());
                 TwoPassLogFile=new char[strlen(name)+6];
@@ -174,7 +174,7 @@
                                 goto stopit;
                 }else
                 {
-                        encoding_gui->setPhasis ("Encoding");
+                        encoding_gui->setPhasis (QT_TR_NOOP("Encoding"));
                 }
                 
                 info.width=_incoming->getInfo()->width;
@@ -250,11 +250,11 @@
                 if(audioProcessMode())
                         encoding_gui->setAudioCodec(getStrFromAudioCodec(audio->getInfo()->encoding));
                 else
-                         encoding_gui->setAudioCodec("Copy");
+                         encoding_gui->setAudioCodec(QT_TR_NOOP("Copy"));
 
            }else
            {
-                encoding_gui->setAudioCodec("None");
+                encoding_gui->setAudioCodec(QT_TR_NOOP("None"));
            }
 // ____________Setup Muxer _____________________
            muxer= new lavMuxer;
@@ -271,7 +271,7 @@
           encoding_gui->setContainer(containerTitle);
          
           if(!videoProcessMode())
-                encoding_gui->setCodec("Copy");
+                encoding_gui->setCodec(QT_TR_NOOP("Copy"));
           else
                 encoding_gui->setCodec(_encode->getDisplayName());
            //
@@ -396,7 +396,7 @@
         if(!reuse)
         {
         
-                encoding_gui->setPhasis ("1st Pass");
+                encoding_gui->setPhasis (QT_TR_NOOP("1st Pass"));
                 aprintf("**Pass 1:%lu\n",total);
                 _encode->startPass1 ();
                 bitstream.data=buffer;
@@ -453,7 +453,7 @@
                 return 0;
         }
         printf("First pass : send %u frames\n",sent);
-        encoding_gui->setPhasis ("2nd Pass");
+        encoding_gui->setPhasis (QT_TR_NOOP("2nd Pass"));
         return 1;
 }
 void end (void)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp	2008-04-26 19:14:38 UTC (rev 3986)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp	2008-04-26 19:45:40 UTC (rev 3987)
@@ -170,19 +170,19 @@
 	muxer->forceRestamp();
   ///____________________________
   work=new DIA_encoding(avifileinfo->fps1000);
-  work->setCodec("Copy");
-  work->setAudioCodec("---");
-  work->setPhasis("Saving");
+  work->setCodec(QT_TR_NOOP("Copy"));
+  work->setAudioCodec(QT_TR_NOOP("---"));
+  work->setPhasis(QT_TR_NOOP("Saving"));
   if(!audioProcessMode())
-     work->setAudioCodec("Copy");
+     work->setAudioCodec(QT_TR_NOOP("Copy"));
   else
      work->setAudioCodec(getStrFromAudioCodec(audio->getInfo()->encoding));
   switch(mux)
   {
-    case MUXER_TS: work->setContainer("Mpeg TS");break;
-    case MUXER_VCD: work->setContainer("Mpeg VCD");break;
-    case MUXER_SVCD: work->setContainer("Mpeg SVCD");break;
-    case MUXER_DVD: work->setContainer("Mpeg DVD");break;
+    case MUXER_TS: work->setContainer(QT_TR_NOOP("MPEG TS"));break;
+    case MUXER_VCD: work->setContainer(QT_TR_NOOP("MPEG VCD"));break;
+    case MUXER_SVCD: work->setContainer(QT_TR_NOOP("MPEG SVCD"));break;
+    case MUXER_DVD: work->setContainer(QT_TR_NOOP("MPEG DVD"));break;
     default:
         ADM_assert(0);
   }

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp	2008-04-26 19:14:38 UTC (rev 3986)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp	2008-04-26 19:45:40 UTC (rev 3987)
@@ -242,25 +242,25 @@
       switch (videoCodecGetType())
       {
           case CodecVCD:
-            encoding->setCodec("libmpeg2enc VCD");
+            encoding->setCodec(QT_TR_NOOP("libmpeg2enc VCD"));
             break;
           case CodecSVCD:
-            encoding->setCodec("libmpeg2enc SVCD");
+            encoding->setCodec(QT_TR_NOOP("libmpeg2enc SVCD"));
             break;
           case CodecDVD:
-            encoding->setCodec("libmpeg2enc DVD");
+            encoding->setCodec(QT_TR_NOOP("libmpeg2enc DVD"));
             break;
           case CodecXVCD:
-            encoding->setCodec("FFmpeg Mpeg1 VBR");
+            encoding->setCodec(QT_TR_NOOP("FFmpeg MPEG-1 VBR"));
             break;
           case CodecXSVCD:
-            encoding->setCodec("FFmpeg Mpeg2 SVCD VBR");
+            encoding->setCodec(QT_TR_NOOP("FFmpeg MPEG-2 SVCD VBR"));
             break;
           case CodecXDVD:
-            encoding->setCodec("FFmpeg Mpeg2 DVD VBR");
+            encoding->setCodec(QT_TR_NOOP("FFmpeg MPEG-2 DVD VBR"));
             break;
           case CodecRequant:
-            encoding->setCodec("Mpeg Requantizer");
+            encoding->setCodec(QT_TR_NOOP("MPEG Requantizer"));
             break;
           
           default:
@@ -268,11 +268,11 @@
 	}
         switch(mux)
           {
-            case MUXER_NONE:encoding->setContainer("Mpeg ES");break;
-            case MUXER_TS:  encoding->setContainer("Mpeg TS");break;
-            case MUXER_VCD: encoding->setContainer("Mpeg VCD");break;
-            case MUXER_SVCD:encoding->setContainer("Mpeg SVCD");break;
-            case MUXER_DVD: encoding->setContainer("Mpeg DVD");break;
+            case MUXER_NONE:encoding->setContainer(QT_TR_NOOP("MPEG ES"));break;
+            case MUXER_TS:  encoding->setContainer(QT_TR_NOOP("MPEG TS"));break;
+            case MUXER_VCD: encoding->setContainer(QT_TR_NOOP("MPEG VCD"));break;
+            case MUXER_SVCD:encoding->setContainer(QT_TR_NOOP("MPEG SVCD"));break;
+            case MUXER_DVD: encoding->setContainer(QT_TR_NOOP("MPEG DVD"));break;
             default:
                 ADM_assert(0);
           }
@@ -293,7 +293,7 @@
                                 }
                         if(!reuse)
                         {
-                                encoding->setPhasis ("Pass 1/2");
+                                encoding->setPhasis (QT_TR_NOOP("Pass 1/2"));
                                 encoder->startPass1();
                                 bitstream.data=_buffer;
                                 bitstream.bufferSize=_page;
@@ -353,15 +353,15 @@
                 }
               }
           if(encoder->isDualPass())
-                  encoding->setPhasis ("Pass 2/2");
+                  encoding->setPhasis (QT_TR_NOOP("Pass 2/2"));
           else
-                  encoding->setPhasis ("Encoding");
+                  encoding->setPhasis (QT_TR_NOOP("Encoding"));
 
          // Set info for audio if any
          if(muxer)
          {
             if(!audioProcessMode())
-                  encoding->setAudioCodec("Copy");
+                  encoding->setAudioCodec(QT_TR_NOOP("Copy"));
             else
                   encoding->setAudioCodec(getStrFromAudioCodec(audio->getInfo()->encoding));
          }

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_ogm/op_ogaudio.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_ogm/op_ogaudio.cpp	2008-04-26 19:14:38 UTC (rev 3986)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_ogm/op_ogaudio.cpp	2008-04-26 19:45:40 UTC (rev 3987)
@@ -63,7 +63,7 @@
 		{
 			audioFilter=NULL;	
 			_audioBuffer=NULL;
-			encoding_gui->setAudioCodec("None");
+			encoding_gui->setAudioCodec(QT_TR_NOOP("None"));
 			return 1;
 		}
 		if(audioProcessMode() && currentaudiostream->isCompressed() 
@@ -83,7 +83,7 @@
 		}
 		else	// Copymode
 		{
-			encoding_gui->setAudioCodec("Copy");
+			encoding_gui->setAudioCodec(QT_TR_NOOP("Copy"));
 			
 		}
 		//______________ Write headers/ Audio..._____________________

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_ogm/op_ogsave.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_ogm/op_ogsave.cpp	2008-04-26 19:14:38 UTC (rev 3986)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_ogm/op_ogsave.cpp	2008-04-26 19:45:40 UTC (rev 3987)
@@ -104,7 +104,7 @@
 		videoStream=new ogm_page(_fd,1);
 	
 		encoding_gui=new DIA_encoding(25000);
-                encoding_gui->setContainer("OGM");
+                encoding_gui->setContainer(QT_TR_NOOP("OGM"));
 		//______________ Write headers..._____________________
 		
 		if(!initVideo(name))

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_ogm/op_ogsavecopy.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_ogm/op_ogsavecopy.cpp	2008-04-26 19:14:38 UTC (rev 3986)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_ogm/op_ogsavecopy.cpp	2008-04-26 19:45:40 UTC (rev 3987)
@@ -52,8 +52,8 @@
 		memcpy(&(header.streamtype),"video\0\0\0",8);
 		MEMCPY(&(header.subtype),&(avifileinfo->fcc),4);
 		
-		encoding_gui->setCodec((char *)"Copy");
-		encoding_gui->setPhasis((char *)"Saving...");
+		encoding_gui->setCodec(QT_TR_NOOP("Copy"));
+		encoding_gui->setPhasis(QT_TR_NOOP("Saving..."));
 		
 		//header.size=sizeof(header);
 		dur32=sizeof(header);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp	2008-04-26 19:14:38 UTC (rev 3986)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp	2008-04-26 19:45:40 UTC (rev 3987)
@@ -101,8 +101,8 @@
  		{
       			aprintf("**Pass 1:%lu\n",_togo);
       			_encode->startPass1 ();
-			encoding_gui->setCodec((char *)_encode->getCodecName());
-			encoding_gui->setPhasis("Pass one");
+			encoding_gui->setCodec(_encode->getCodecName());
+			encoding_gui->setPhasis(QT_TR_NOOP("Pass one"));
                         ADMBitstream bitstream(w*h*3);
                         bitstream.data=_videoBuffer;
       			//__________________________________
@@ -130,11 +130,11 @@
       			printf("Pass2 ignition failed\n");
       			return 0;
 		}
-		encoding_gui->setPhasis("Pass 2");
+		encoding_gui->setPhasis(QT_TR_NOOP("Pass 2"));
 	}   //-------------------------/VBR-----------------------------------
 	else
 	{
-		encoding_gui->setPhasis("Encoding");
+		encoding_gui->setPhasis(QT_TR_NOOP("Encoding"));
 	}
   // init save avi
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_chromaShift.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_chromaShift.cpp	2008-04-26 19:14:38 UTC (rev 3986)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_chromaShift.cpp	2008-04-26 19:45:40 UTC (rev 3987)
@@ -55,7 +55,7 @@
 
         dialog=create_ChromaShift();
         gtk_register_dialog(dialog);
-        gtk_window_set_title (GTK_WINDOW (dialog), QT_TR_NOOP("ASHARP"));
+        gtk_window_set_title (GTK_WINDOW (dialog), QT_TR_NOOP("Chroma Shift"));
         gtk_widget_show(dialog);
 	
         myCrop=new flyChromaShift( width, height,in,WID(drawingarea1),WID(hscale));

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp	2008-04-26 19:14:38 UTC (rev 3986)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp	2008-04-26 19:45:40 UTC (rev 3987)
@@ -1014,7 +1014,7 @@
   gtk_container_add (GTK_CONTAINER (frame_par1), hbox_par1);
   gtk_container_set_border_width (GTK_CONTAINER (hbox_par1), 5);
 
-  checkbutton_par_asinput = gtk_check_button_new_with_mnemonic (QT_TR_NOOP("As input"));
+  checkbutton_par_asinput = gtk_check_button_new_with_mnemonic (QT_TR_NOOP("As Input"));
   gtk_widget_show (checkbutton_par_asinput);
   gtk_box_pack_start (GTK_BOX (hbox_par1), checkbutton_par_asinput, FALSE, FALSE, 10);
   gtk_tooltips_set_tip (tooltips, checkbutton_par_asinput, QT_TR_NOOP("Get PAR from input video file"), NULL);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp	2008-04-26 19:14:38 UTC (rev 3986)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_DVDff.cpp	2008-04-26 19:45:40 UTC (rev 3987)
@@ -54,9 +54,9 @@
 };
 diaMenuEntry vbvM[3]=
 {
-	{40,"VCD 40 kB"},
-	{112,"SVCD 112 kB"},
-	{224,"DVD 224 kB"}
+	{40,QT_TR_NOOP("VCD 40 kB")},
+	{112,QT_TR_NOOP("SVCD 112 kB")},
+	{224,QT_TR_NOOP("DVD 224 kB")}
 };
 
                       

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_mjpeg.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_mjpeg.cpp	2008-04-26 19:14:38 UTC (rev 3986)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_mjpeg.cpp	2008-04-26 19:45:40 UTC (rev 3987)
@@ -28,9 +28,9 @@
         ADM_assert(sizeof(MJPEGConfig)==param->extraSettingsLen);
         uint8_t ret=0;
         diaElemUInteger  qual(&(config->qual),QT_TR_NOOP("_Quality:"),1,100);
-        diaElemToggle    swap(&(config->swapped),QT_TR_NOOP("_Swap U&V:"));
+        diaElemToggle    swap(&(config->swapped),QT_TR_NOOP("_Swap U&V"));
         diaElem *elems[2]={&qual,&swap};
-        if( diaFactoryRun(QT_TR_NOOP("Mjpeg Configuration"),2,elems))
+        if( diaFactoryRun(QT_TR_NOOP("MJPEG Configuration"),2,elems))
         {
             ret=1;
         }

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/winInstaller/avidemux.nsi
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/winInstaller/avidemux.nsi	2008-04-26 19:14:38 UTC (rev 3986)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/winInstaller/avidemux.nsi	2008-04-26 19:45:40 UTC (rev 3987)
@@ -116,7 +116,7 @@
 installGtk${LANG_CODE}:
     SetOutPath $INSTDIR\share\locale\${LANG_CODE}\LC_MESSAGES
     File ..\..\..\avidemux_2.4_build\share\locale\${LANG_CODE}\LC_MESSAGES\avidemux.mo
-    File ..\..\..\avidemux_2.4_build\lib\locale\${LANG_CODE}\LC_MESSAGES\gtk20.mo
+    File ..\..\..\avidemux_2.4_build\share\locale\${LANG_CODE}\LC_MESSAGES\gtk20.mo
 
     WriteRegStr HKLM "${REGKEY}\Components" ${LANG_NAME} 1
 endGtk${LANG_CODE}:
@@ -138,8 +138,8 @@
 
 !macro UninstallLanguage LANG_NAME LANG_CODE
     RmDir /r /REBOOTOK $INSTDIR\share\locale\${LANG_CODE}
-    RmDir /r /REBOOTOK $INSTDIR\lib\locale\${LANG_CODE}
     Delete /REBOOTOK $INSTDIR\i18n\avidemux_${LANG_CODE}.qm
+    Delete /REBOOTOK $INSTDIR\i18n\qt_${LANG_CODE}.qm
     
     DeleteRegValue HKLM "${REGKEY}\Components" ${LANG_NAME}
 !macroend
@@ -543,7 +543,6 @@
 Section un.post UnSecUninstaller
     RmDir /REBOOTOK $INSTDIR\etc
     RmDir /REBOOTOK $INSTDIR\i18n
-    RmDir /REBOOTOK $INSTDIR\lib\locale
     RmDir /REBOOTOK $INSTDIR\lib
     RmDir /REBOOTOK $INSTDIR\share\locale
     RmDir /REBOOTOK $INSTDIR\share

Copied: branches/avidemux_2.5_branch_gruntster/po/avidemux_fr.ts (from rev 3986, branches/avidemux_2.4_branch/po/avidemux_fr.ts)

Modified: branches/avidemux_2.5_branch_gruntster/po/avidemux_it.ts
===================================================================
--- branches/avidemux_2.5_branch_gruntster/po/avidemux_it.ts	2008-04-26 19:14:38 UTC (rev 3986)
+++ branches/avidemux_2.5_branch_gruntster/po/avidemux_it.ts	2008-04-26 19:45:40 UTC (rev 3987)
@@ -1,5 +1,6 @@
 <?xml version="1.0" encoding="utf-8"?>
 <!DOCTYPE TS><TS version="1.1" language="it">
+<defaultcodec></defaultcodec>
 <context>
     <name></name>
     <message>
@@ -768,11 +769,6 @@
         <translation>_Qualit?:</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_mjpeg.cpp" line="37"/>
-        <source>_Swap U&amp;V:</source>
-        <translation>_Inverti U&amp;V:</translation>
-    </message>
-    <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp" line="40"/>
         <source>_Filter strength:</source>
         <translation>Intensit? _filtro:</translation>
@@ -1088,11 +1084,6 @@
         <translation>Vai al tempo</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_mjpeg.cpp" line="39"/>
-        <source>Mjpeg Configuration</source>
-        <translation>Configurazione Mjpeg</translation>
-    </message>
-    <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_requant.cpp" line="51"/>
         <source>Requant Configuration</source>
         <translation>Configurazione Requant</translation>
@@ -1242,6 +1233,16 @@
         <source>Gettext</source>
         <translation>Gettext</translation>
     </message>
+    <message>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_mjpeg.cpp" line="37"/>
+        <source>_Swap U&amp;V</source>
+        <translation>_Inverti U e V</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_mjpeg.cpp" line="39"/>
+        <source>MJPEG Configuration</source>
+        <translation>Configurazione Mjpeg</translation>
+    </message>
 </context>
 <context>
     <name>@default</name>
@@ -1379,7 +1380,7 @@
         <translation>MPEG video</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_editor/ADM_outputfmt.h" line="49"/>
+        <location filename="../avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp" line="131"/>
         <source>MP4</source>
         <translation>MP4</translation>
     </message>
@@ -1389,17 +1390,17 @@
         <translation>OGM</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_editor/ADM_outputfmt.h" line="51"/>
+        <location filename="../avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp" line="130"/>
         <source>PSP</source>
         <translation>PSP</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_editor/ADM_outputfmt.h" line="52"/>
+        <location filename="../avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp" line="283"/>
         <source>FLV</source>
         <translation>FLV</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_editor/ADM_outputfmt.h" line="53"/>
+        <location filename="../avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp" line="132"/>
         <source>MKV</source>
         <translation>MKV</translation>
     </message>
@@ -4174,12 +4175,12 @@
     <message>
         <location filename="../avidemux/ADM_filter/filter_declaration.cpp" line="99"/>
         <source>Hz Stack fields</source>
-        <translation type="unfinished"></translation>
+        <translation>Affiancamento semiquadri</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_filter/filter_declaration.cpp" line="99"/>
         <source>Put botj fields side by side.</source>
-        <translation type="unfinished"></translation>
+        <translation>Mette due semiquadri uno accanto all&apos;altro.</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_x264.cpp" line="65"/>
@@ -4216,6 +4217,301 @@
         <source>x264 Configuration</source>
         <translation>Configurazione x264</translation>
     </message>
+    <message>
+        <location filename="../avidemux/ADM_audiofilter/audiofilter_buildchain.cpp" line="417"/>
+        <source>Encoder initialization failed</source>
+        <translation>Inizializzazione codificatore fallita</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_audiofilter/audiofilter_buildchain.cpp" line="417"/>
+        <source>Not activated.</source>
+        <translation>Non attivo.</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_encoder/ADM_encCodecDesc.h" line="13"/>
+        <source>YV12 (raw)</source>
+        <translation>YV12 (raw)</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_encoder/ADM_encCodecDesc.h" line="111"/>
+        <source>H.263 (lavc)</source>
+        <translation>H.263 (lavc)</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_encoder/ADM_encCodecDesc.h" line="127"/>
+        <source>H.263+ (lavc)</source>
+        <translation>H.263+ (lavc)</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_encoder/ADM_encCodecDesc.h" line="143"/>
+        <source>MPEG-4 ASP (lavc)</source>
+        <translation>MPEG-4 ASP (lavc)</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_encoder/ADM_encCodecDesc.h" line="159"/>
+        <source>DV (lavc)</source>
+        <translation>DV (lavc)</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_encoder/ADM_encCodecDesc.h" line="175"/>
+        <source>FLV1 (lavc)</source>
+        <translation>FLV1 (lavc)</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_encoder/ADM_encCodecDesc.h" line="191"/>
+        <source>Snow (lavc)</source>
+        <translation>Snow (lavc)</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_encoder/ADM_encCodecDesc.h" line="207"/>
+        <source>FF Huffyuv (lavc)</source>
+        <translation>FF Huffyuv (lavc)</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_encoder/ADM_encCodecDesc.h" line="223"/>
+        <source>Huffyuv (lavc)</source>
+        <translation>Huffyuv (lavc)</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_encoder/ADM_encCodecDesc.h" line="239"/>
+        <source>FFV1 (lavc)</source>
+        <translation>FFV1 (lavc)</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_encoder/ADM_encCodecDesc.h" line="257"/>
+        <source>MJPEG (lavc)</source>
+        <translation>MJPEG (lavc)</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_encoder/ADM_encCodecDesc.h" line="314"/>
+        <source>VCD (lavc)</source>
+        <translation>VCD (lavc)</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_encoder/ADM_encCodecDesc.h" line="374"/>
+        <source>DVD (lavc)</source>
+        <translation>DVD (lavc)</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_encoder/ADM_encCodecDesc.h" line="434"/>
+        <source>SVCD (lavc)</source>
+        <translation>SVCD (lavc)</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_encoder/ADM_encCodecDesc.h" line="461"/>
+        <source>VCD (mpeg2enc)</source>
+        <translation>VCD (mpeg2enc)</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_encoder/ADM_encCodecDesc.h" line="493"/>
+        <source>SVCD (mpeg2enc)</source>
+        <translation>SVCD (mpeg2enc)</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_encoder/ADM_encCodecDesc.h" line="512"/>
+        <source>MPEG-2 requant</source>
+        <translation>MPEG-2 requant</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_encoder/ADM_encCodecDesc.h" line="671"/>
+        <source>MPEG-4 ASP (Xvid4)</source>
+        <translation>MPEG-4 ASP (Xvid4)</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_encoder/ADM_encCodecDesc.h" line="812"/>
+        <source>MPEG-4 AVC (x264)</source>
+        <translation>MPEG-4 AVC (x264)</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_encoder/ADM_encCodecDesc.h" line="829"/>
+        <source>dummy</source>
+        <translation>dummy</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp" line="379"/>
+        <source>Copy</source>
+        <translation>Copia</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_outputs/oplug_avi/op_avisave.cpp" line="485"/>
+        <source>DTS</source>
+        <translation>DTS</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_outputs/oplug_avi/op_avisave.cpp" line="487"/>
+        <source>MP2</source>
+        <translation>MP2</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_outputs/oplug_avi/op_avisave.cpp" line="488"/>
+        <source>MP3</source>
+        <translation>MP3</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_outputs/oplug_avi/op_avisave.cpp" line="489"/>
+        <source>WMA</source>
+        <translation>WMA</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_outputs/oplug_avi/op_avisave.cpp" line="490"/>
+        <source>LPCM</source>
+        <translation>LPCM</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_outputs/oplug_avi/op_avisave.cpp" line="491"/>
+        <source>AC3</source>
+        <translation>AC3</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_outputs/oplug_avi/op_avisave.cpp" line="492"/>
+        <source>Ogg Vorbis</source>
+        <translation>Ogg Vorbis</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_outputs/oplug_avi/op_avisave.cpp" line="494"/>
+        <source>AAC</source>
+        <translation>AAC</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_outputs/oplug_avi/op_avisave.cpp" line="495"/>
+        <source>QDM2</source>
+        <translation>QDM2</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_outputs/oplug_avi/op_avisave.cpp" line="496"/>
+        <source>AMR-NB</source>
+        <translation>AMR-NB</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_outputs/oplug_avi/op_avisave.cpp" line="497"/>
+        <source>MSADPCM</source>
+        <translation>MSADPCM</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_outputs/oplug_avi/op_avisave.cpp" line="498"/>
+        <source>ULAW</source>
+        <translation>ULAW</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_outputs/oplug_avi/op_avisave.cpp" line="499"/>
+        <source>IMA ADPCM</source>
+        <translation>IMA ADPCM</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_outputs/oplug_avi/op_avisave.cpp" line="500"/>
+        <source>8-bit PCM</source>
+        <translation>PCM 8-bit</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_outputs/oplug_avi/op_avisave.cpp" line="502"/>
+        <source>Unknown codec</source>
+        <translation>Codec sconosciuto</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp" line="140"/>
+        <source>Dummy</source>
+        <translation>Dummy</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp" line="373"/>
+        <source>Encoding</source>
+        <translation>Codifica in corso</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp" line="410"/>
+        <source>1st Pass</source>
+        <translation>1a passata</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp" line="467"/>
+        <source>2nd Pass</source>
+        <translation>2a passata</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp" line="222"/>
+        <source>---</source>
+        <translation>---</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp" line="223"/>
+        <source>Saving</source>
+        <translation>Salvataggio in corso</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp" line="287"/>
+        <source>MPEG TS</source>
+        <translation>MPEG TS</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp" line="288"/>
+        <source>MPEG VCD</source>
+        <translation>MPEG VCD</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp" line="289"/>
+        <source>MPEG SVCD</source>
+        <translation>MPEG SVCD</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp" line="290"/>
+        <source>MPEG DVD</source>
+        <translation>MPEG DVD</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp" line="260"/>
+        <source>libmpeg2enc VCD</source>
+        <translation>VCD libmpeg2enc</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp" line="263"/>
+        <source>libmpeg2enc SVCD</source>
+        <translation>SVCD libmpeg2enc</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp" line="266"/>
+        <source>libmpeg2enc DVD</source>
+        <translation>DVD libmpeg2enc</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp" line="269"/>
+        <source>FFmpeg MPEG-1 VBR</source>
+        <translation>MPEG-1 VBR FFmpeg</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp" line="272"/>
+        <source>FFmpeg MPEG-2 SVCD VBR</source>
+        <translation>MPEG-2 SVCD VBR FFmpeg</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp" line="275"/>
+        <source>FFmpeg MPEG-2 DVD VBR</source>
+        <translation>MPEG-2 DVD VBR FFmpeg</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp" line="278"/>
+        <source>MPEG Requantizer</source>
+        <translation>MPEG Requantizer</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp" line="286"/>
+        <source>MPEG ES</source>
+        <translation>MPEG ES</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp" line="311"/>
+        <source>Pass 1/2</source>
+        <translation>Passata 1/2</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp" line="371"/>
+        <source>Pass 2/2</source>
+        <translation>Passata 2/2</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_encoder/ADM_encCodecDesc.h" line="539"/>
+        <source>DVD (mpeg2enc)</source>
+        <translation>DVD (mpeg2enc)</translation>
+    </message>
 </context>
 <context>
     <name>ADMImage</name>
@@ -4760,12 +5056,12 @@
     <message>
         <location filename="../avidemux/ADM_videoFilter/ADM_vidParticle.cpp" line="137"/>
         <source>DG at UWA format (includes shape info &amp; bounding box)</source>
-        <translation type="unfinished"></translation>
+        <translation>Formato DG at UWA (include info sulla forma &amp; rettangolo di contenimento)</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_videoFilter/ADM_vidParticle.cpp" line="139"/>
         <source>AB at ODU format (includes shape info)</source>
-        <translation type="unfinished"></translation>
+        <translation>Formato AB at ODU (include info sulla forma)</translation>
     </message>
 </context>
 <context>
@@ -5454,8 +5750,36 @@
         <source>Could not initialize audio</source>
         <translation>Impossibile avviare l&apos;audio</translation>
     </message>
+    <message>
+        <location filename="../avidemux/ADM_outputs/oplug_ogm/op_ogaudio.cpp" line="70"/>
+        <source>None</source>
+        <translation>Nessuno</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_outputs/oplug_ogm/op_ogaudio.cpp" line="90"/>
+        <source>Copy</source>
+        <translation>Copia</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_outputs/oplug_ogm/op_ogsave.cpp" line="119"/>
+        <source>OGM</source>
+        <translation>OGM</translation>
+    </message>
 </context>
 <context>
+    <name>ADM_ogmWriteCopy</name>
+    <message>
+        <location filename="../avidemux/ADM_outputs/oplug_ogm/op_ogsavecopy.cpp" line="69"/>
+        <source>Copy</source>
+        <translation>Copia</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_outputs/oplug_ogm/op_ogsavecopy.cpp" line="70"/>
+        <source>Saving...</source>
+        <translation>Salvataggio in corso...</translation>
+    </message>
+</context>
+<context>
     <name>ADM_ogmWriteProcess</name>
     <message>
         <location filename="../avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp" line="76"/>
@@ -5469,6 +5793,21 @@
         <translation>
  Riutilizzare il file log esistente?</translation>
     </message>
+    <message>
+        <location filename="../avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp" line="111"/>
+        <source>Pass one</source>
+        <translation>Passata 1</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp" line="139"/>
+        <source>Pass 2</source>
+        <translation>Passata 2</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp" line="143"/>
+        <source>Encoding</source>
+        <translation>Codifica in corso</translation>
+    </message>
 </context>
 <context>
     <name>AVDMFastVideoConvolution</name>
@@ -6008,7 +6347,7 @@
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/encoding.ui" line="124"/>
         <source>None</source>
-        <translation>Nessuno</translation>
+        <translation>Nessuna</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/encoding.ui" line="177"/>
@@ -6224,7 +6563,7 @@
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/props.ui" line="117"/>
         <source>Codec 4CC:</source>
-        <translation>Codec 4CC:</translation>
+        <translation>4CC Codec:</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/props.ui" line="127"/>
@@ -6662,6 +7001,30 @@
     </message>
 </context>
 <context>
+    <name>EncoderCopy</name>
+    <message>
+        <location filename="../avidemux/ADM_encoder/adm_encCopy.cpp" line="91"/>
+        <source>Copy</source>
+        <translation>Copia</translation>
+    </message>
+</context>
+<context>
+    <name>EncoderDivx</name>
+    <message>
+        <location filename="../avidemux/ADM_encoder/adm_encdivx.h" line="52"/>
+        <source>DivX</source>
+        <translation>DivX</translation>
+    </message>
+</context>
+<context>
+    <name>EncoderFFMPEG</name>
+    <message>
+        <location filename="../avidemux/ADM_encoder/adm_encffmpeg.h" line="47"/>
+        <source>LavCodec</source>
+        <translation>LavCodec</translation>
+    </message>
+</context>
+<context>
     <name>EncoderFFMPEGDV</name>
     <message>
         <location filename="../avidemux/ADM_encoder/adm_encffmpeg.cpp" line="261"/>
@@ -6675,6 +7038,62 @@
     </message>
 </context>
 <context>
+    <name>EncoderMjpeg</name>
+    <message>
+        <location filename="../avidemux/ADM_encoder/adm_encmjpeg.h" line="60"/>
+        <source>MJPEG</source>
+        <translation>MJPEG</translation>
+    </message>
+</context>
+<context>
+    <name>EncoderMpeg2enc</name>
+    <message>
+        <location filename="../avidemux/ADM_encoder/adm_encmpeg2enc.h" line="57"/>
+        <source>MPEG</source>
+        <translation>MPEG</translation>
+    </message>
+</context>
+<context>
+    <name>EncoderRequant</name>
+    <message>
+        <location filename="../avidemux/ADM_encoder/adm_encRequant.cpp" line="98"/>
+        <source>Requant</source>
+        <translation>Requant</translation>
+    </message>
+</context>
+<context>
+    <name>EncoderX264</name>
+    <message>
+        <location filename="../avidemux/ADM_encoder/adm_encx264.h" line="65"/>
+        <source>x264</source>
+        <translation>x264</translation>
+    </message>
+</context>
+<context>
+    <name>EncoderXvid</name>
+    <message>
+        <location filename="../avidemux/ADM_encoder/adm_encxvid.h" line="61"/>
+        <source>Xvid</source>
+        <translation>Xvid</translation>
+    </message>
+</context>
+<context>
+    <name>EncoderXvid4</name>
+    <message>
+        <location filename="../avidemux/ADM_encoder/adm_encXvid4.h" line="62"/>
+        <source>Xvid4</source>
+        <translation>Xvid4</translation>
+    </message>
+</context>
+<context>
+    <name>EncoderYV12</name>
+    <message>
+        <location filename="../avidemux/ADM_encoder/adm_encyv12.h" line="69"/>
+        <source>YV12</source>
+        <translation>YV12</translation>
+    </message>
+</context>
+<context>
     <name>GenericAviSave</name>
     <message>
         <location filename="../avidemux/ADM_outputs/oplug_avi/op_avisave.cpp" line="188"/>
@@ -6691,6 +7110,21 @@
         <source>Cannot initiate save</source>
         <translation>Impossibile iniziare il salvataggio</translation>
     </message>
+    <message>
+        <location filename="../avidemux/ADM_outputs/oplug_avi/op_avisave.cpp" line="256"/>
+        <source>None</source>
+        <translation>Nessuno</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_outputs/oplug_avi/op_avisave.cpp" line="367"/>
+        <source>Copy</source>
+        <translation>Copia</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_outputs/oplug_avi/op_avisave.cpp" line="369"/>
+        <source>AVI</source>
+        <translation>AVI</translation>
+    </message>
 </context>
 <context>
     <name>GenericAviSaveCopy</name>
@@ -6699,6 +7133,11 @@
         <source>Cannot initiate save</source>
         <translation>Impossibile iniziare il salvataggio</translation>
     </message>
+    <message>
+        <location filename="../avidemux/ADM_outputs/oplug_avi/op_avisavecopy.cpp" line="109"/>
+        <source>Saving</source>
+        <translation>Salvataggio in corso</translation>
+    </message>
 </context>
 <context>
     <name>GenericAviSaveCopyPack</name>
@@ -6707,6 +7146,11 @@
         <source>Cannot initiate save</source>
         <translation>Impossibile iniziare il salvataggio</translation>
     </message>
+    <message>
+        <location filename="../avidemux/ADM_outputs/oplug_avi/op_avisavecopy_pack.cpp" line="134"/>
+        <source>Saving</source>
+        <translation>Salvataggio in corso</translation>
+    </message>
 </context>
 <context>
     <name>GenericAviSaveCopyUnpack</name>
@@ -6715,6 +7159,11 @@
         <source>Cannot initiate save</source>
         <translation>Impossibile iniziare il salvataggio</translation>
     </message>
+    <message>
+        <location filename="../avidemux/ADM_outputs/oplug_avi/op_avisavecopy_unpack.cpp" line="111"/>
+        <source>Saving</source>
+        <translation>Salvataggio in corso</translation>
+    </message>
 </context>
 <context>
     <name>GenericAviSaveProcess</name>
@@ -6742,8 +7191,31 @@
         <source>Aborting</source>
         <translation>Annullamento in corso</translation>
     </message>
+    <message>
+        <location filename="../avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp" line="136"/>
+        <source>1st Pass</source>
+        <translation>1a passata</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp" line="246"/>
+        <source>Encoding</source>
+        <translation>Codifica in corso</translation>
+    </message>
+    <message>
+        <location filename="../avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp" line="250"/>
+        <source>Encoding, 2nd pass</source>
+        <translation>Codifica, 2a passata</translation>
+    </message>
 </context>
 <context>
+    <name>GenericAviSaveSmart</name>
+    <message>
+        <location filename="../avidemux/ADM_outputs/oplug_avi/op_savesmart.cpp" line="107"/>
+        <source>Smart Copy</source>
+        <translation>Copia intelligente</translation>
+    </message>
+</context>
+<context>
     <name>Jobs</name>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/jobs.ui" line="13"/>
@@ -6774,7 +7246,7 @@
 <context>
     <name>MP4Header</name>
     <message>
-        <location filename="../avidemux/ADM_inputs/ADM_mp4/ADM_mp4Analyzer.cpp" line="589"/>
+        <location filename="../avidemux/ADM_inputs/ADM_mp4/ADM_mp4Analyzer.cpp" line="594"/>
         <source>Problem reading SVQ3 headers</source>
         <translation>Problema di lettura delle intestazioni SVQ3</translation>
     </message>

Modified: branches/avidemux_2.5_branch_gruntster/po/fr.po
===================================================================
--- branches/avidemux_2.5_branch_gruntster/po/fr.po	2008-04-26 19:14:38 UTC (rev 3986)
+++ branches/avidemux_2.5_branch_gruntster/po/fr.po	2008-04-26 19:45:40 UTC (rev 3987)
@@ -5,8 +5,8 @@
 msgstr ""
 "Project-Id-Version: fr\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2008-03-18 14:10+0000\n"
-"PO-Revision-Date: 2008-03-27 14:17+0100\n"
+"POT-Creation-Date: 2008-04-10 19:53+0100\n"
+"PO-Revision-Date: 2008-04-24 17:18+0100\n"
 "Last-Translator: NSV <xxNSVxx at gmail.com>\n"
 "Language-Team:  <en at li.org>\n"
 "MIME-Version: 1.0\n"
@@ -18,6 +18,7 @@
 "X-Poedit-Basepath: C:\\Users\\NSV\\Documents\\Projet\\C++\\Avidemux\\\n"
 
 #: avidemux/ADM_editor/ADM_outputfmt.h:42
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:369
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:511
 msgid "AVI"
 msgstr "AVI"
@@ -47,23 +48,30 @@
 msgstr "Vid?o MPEG"
 
 #: avidemux/ADM_editor/ADM_outputfmt.h:49
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:493
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:131
 msgid "MP4"
 msgstr "MP4"
 
 #: avidemux/ADM_editor/ADM_outputfmt.h:50
+#: avidemux/ADM_outputs/oplug_ogm/op_ogsave.cpp:119
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:515
 msgid "OGM"
 msgstr "OGM"
 
 #: avidemux/ADM_editor/ADM_outputfmt.h:51
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:130
 msgid "PSP"
 msgstr "PSP"
 
 #: avidemux/ADM_editor/ADM_outputfmt.h:52
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:194
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:283
 msgid "FLV"
 msgstr "FLV"
 
 #: avidemux/ADM_editor/ADM_outputfmt.h:53
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:132
 msgid "MKV"
 msgstr "MKV"
 
@@ -72,6 +80,149 @@
 msgid "DUMMY"
 msgstr "EXEMPLE"
 
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:13
+msgid "YV12 (raw)"
+msgstr "YV12 (brut)"
+
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:111
+msgid "H.263 (lavc)"
+msgstr "H.263 (lavc)"
+
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:127
+msgid "H.263+ (lavc)"
+msgstr "H.263+ (lavc)"
+
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:143
+msgid "MPEG-4 ASP (lavc)"
+msgstr "MPEG-4 ASP (lavc)"
+
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:159
+msgid "DV (lavc)"
+msgstr "DV (lavc)"
+
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:175
+msgid "FLV1 (lavc)"
+msgstr "FLV1 (lavc)"
+
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:191
+msgid "Snow (lavc)"
+msgstr "Snow (lavc)"
+
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:207
+msgid "FF Huffyuv (lavc)"
+msgstr "FF Huffyuv (lavc)"
+
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:223
+msgid "Huffyuv (lavc)"
+msgstr "Huffyuv (lavc)"
+
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:239
+msgid "FFV1 (lavc)"
+msgstr "FFV1 (lavc)"
+
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:257
+msgid "MJPEG (lavc)"
+msgstr "MJPEG (lavc)"
+
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:314
+msgid "VCD (lavc)"
+msgstr "VCD (lavc)"
+
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:374
+msgid "DVD (lavc)"
+msgstr "DVD (lavc)"
+
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:434
+msgid "SVCD (lavc)"
+msgstr "SVCD (lavc)"
+
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:461
+msgid "VCD (mpeg2enc)"
+msgstr "VCD (mpeg2enc)"
+
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:493
+msgid "SVCD (mpeg2enc)"
+msgstr "SVCD (mpeg2enc)"
+
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:512
+msgid "MPEG-2 requant"
+msgstr ""
+
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:539
+msgid "DVD (mpeg2enc)"
+msgstr "DVD (mpeg2enc)"
+
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:671
+msgid "MPEG-4 ASP (Xvid4)"
+msgstr "MPEG-4 ASP (Xvid4)"
+
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:812
+msgid "MPEG-4 AVC (x264)"
+msgstr "MPEG-4 AVC (x264)"
+
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:829
+#, fuzzy
+msgid "dummy"
+msgstr "exemple"
+
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:832
+#: avidemux/ADM_encoder/adm_encCopy.cpp:91
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:271
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:367
+#: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:143
+#: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:195
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:197
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:265
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:286
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:166
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:264
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:285
+#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:221
+#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:225
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:379
+#: avidemux/ADM_outputs/oplug_ogm/op_ogaudio.cpp:90
+#: avidemux/ADM_outputs/oplug_ogm/op_ogsavecopy.cpp:69
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1081
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1121
+msgid "Copy"
+msgstr "Copie"
+
+#: avidemux/ADM_encoder/adm_encdivx.h:52
+msgid "DivX"
+msgstr "DivX"
+
+#: avidemux/ADM_encoder/adm_encffmpeg.h:47
+msgid "LavCodec"
+msgstr "LavCodec"
+
+#: avidemux/ADM_encoder/adm_encmjpeg.h:60
+msgid "MJPEG"
+msgstr "MJPEG"
+
+#: avidemux/ADM_encoder/adm_encmpeg2enc.h:57
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:61
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:519
+msgid "MPEG"
+msgstr "MPEG"
+
+#: avidemux/ADM_encoder/adm_encx264.h:65
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:130
+msgid "x264"
+msgstr "x264"
+
+#: avidemux/ADM_encoder/adm_encxvid.h:61
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:129
+msgid "Xvid"
+msgstr "XviD"
+
+#: avidemux/ADM_encoder/adm_encXvid4.h:62
+msgid "Xvid4"
+msgstr ""
+
+#: avidemux/ADM_encoder/adm_encyv12.h:69
+msgid "YV12"
+msgstr "YV12"
+
 #: avidemux/ADM_audio/audiotimeline.cpp:85
 #: avidemux/ADM_audio/audiotimeline.cpp:96
 msgid "Building VBR map"
@@ -194,6 +345,15 @@
 "Le nombre de canaux est plus grand que ce que le codec audio peut accepter.\n"
 "Changez de codec ou utilisez le filtre mixer pour avoir moins de canaux."
 
+#: avidemux/ADM_audiofilter/audiofilter_buildchain.cpp:417
+#, fuzzy
+msgid "Encoder initialization failed"
+msgstr "Echec de l'initialisation de l'encodeur"
+
+#: avidemux/ADM_audiofilter/audiofilter_buildchain.cpp:417
+msgid "Not activated."
+msgstr "Non activ?."
+
 #: avidemux/ADM_codecs/ADM_ffmp43.cpp:45
 msgid "Internal error finding codec"
 msgstr "Erreur interne pour trouver le codec"
@@ -371,6 +531,10 @@
 msgid "At the moment, the DV codec only accepts 720*576 at 25"
 msgstr "Pour le moment, le codec DV accepte seulement le 720*576 at 25fps"
 
+#: avidemux/ADM_encoder/adm_encRequant.cpp:98
+msgid "Requant"
+msgstr ""
+
 #: avidemux/ADM_filter/filter_declaration.cpp:55
 msgid "Crop"
 msgstr "Crop"
@@ -916,7 +1080,6 @@
 msgstr "Blend remover"
 
 #: avidemux/ADM_filter/filter_declaration.cpp:177
-#, fuzzy
 msgid "Remove blend between previous and next picture."
 msgstr "Supprime le lien entre l'image pr?c?dente et l'image suivante."
 
@@ -934,7 +1097,7 @@
 
 #: avidemux/ADM_filter/filter_declaration.cpp:179
 msgid "Useless whirlwind effect."
-msgstr "Effecte tourbillon inutile."
+msgstr "Effet de tourbillon inutile."
 
 #: avidemux/ADM_filter/filter_declaration.cpp:180
 #: avidemux/ADM_videoFilter/ADM_vidMosaic.cpp:98
@@ -967,7 +1130,6 @@
 msgstr "Animated Menu"
 
 #: avidemux/ADM_filter/filter_declaration.cpp:184
-#, fuzzy
 msgid "Create a video made of 6 mini windows, very useful to do DVD menus."
 msgstr "Cr?e une vid?o fa?te de 6 petites fen?tres, tr?s utile pour faire des menus DVD."
 
@@ -1000,7 +1162,7 @@
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_threshold.cpp:401
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:976
 msgid "Threshold"
-msgstr "Threshold"
+msgstr "Seuil"
 
 #: avidemux/ADM_filter/filter_declaration.cpp:189
 #, fuzzy
@@ -1045,7 +1207,7 @@
 msgid "Size is not (s)QCIF"
 msgstr "La taille n'est pas (s)QCIF"
 
-#: avidemux/ADM_inputs/ADM_mp4/ADM_mp4Analyzer.cpp:589
+#: avidemux/ADM_inputs/ADM_mp4/ADM_mp4Analyzer.cpp:594
 msgid "Problem reading SVQ3 headers"
 msgstr "Probl?me de lecture des en-t?tes SVQ3"
 
@@ -1077,7 +1239,7 @@
 #: avidemux/ADM_inputs/ADM_nuv/ADM_nuv.cpp:571
 #, fuzzy
 msgid "Opening Nuppel video"
-msgstr "Ouverture du nuppel video"
+msgstr "Ouverture d'une vid?o Nuppel "
 
 #: avidemux/ADM_inputs/ADM_nuv/ADM_nuv.cpp:547
 msgid "Sure you want to abort ?"
@@ -1119,7 +1281,7 @@
 
 #: avidemux/ADM_libraries/ADM_lavformat/ADM_lavformat.cpp:376
 msgid "Incompatible frame rate"
-msgstr "Fr?quence d'image incompatible"
+msgstr "Nombre d'images par seconde incompatible"
 
 #: avidemux/ADM_libraries/ADM_lvemux/ADM_muxer.cpp:85
 #: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:153
@@ -1395,6 +1557,33 @@
 msgid "Error initalizing video filters"
 msgstr "Erreur d'initialisation des filtres vid?o"
 
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:256
+#: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:141
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:195
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:269
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:164
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:268
+#: avidemux/ADM_outputs/oplug_ogm/op_ogaudio.cpp:70
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:80
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:89
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:51
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:327
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:373
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:381
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:389
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:553
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:568
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:583
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:219
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1185
+#: avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp:105
+#: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:101
+#: avidemux/ADM_videoFilter/ADM_vidRotate.cpp:264
+#: avidemux/gtk_gui.cpp:2005
+#: avidemux/gtk_gui.cpp:2104
+msgid "None"
+msgstr "Aucun"
+
 #: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:446
 #: avidemux/ADM_outputs/oplug_avi/op_avisavecopy.cpp:96
 #: avidemux/ADM_outputs/oplug_avi/op_avisavecopy_pack.cpp:121
@@ -1402,6 +1591,78 @@
 msgid "Cannot initiate save"
 msgstr "Ne peut pas amorcer l'enregistrement"
 
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:485
+msgid "DTS"
+msgstr "DTS"
+
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:486
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:287
+msgid "PCM"
+msgstr "PCM"
+
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:487
+msgid "MP2"
+msgstr "MP2"
+
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:488
+msgid "MP3"
+msgstr "MP3"
+
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:489
+msgid "WMA"
+msgstr "WMA"
+
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:490
+msgid "LPCM"
+msgstr "LPCM"
+
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:491
+msgid "AC3"
+msgstr "AC3"
+
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:492
+msgid "Ogg Vorbis"
+msgstr "Ogg Vorbis"
+
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:494
+msgid "AAC"
+msgstr "AAC"
+
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:495
+msgid "QDM2"
+msgstr ""
+
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:496
+msgid "AMR-NB"
+msgstr "AMR-NB"
+
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:497
+msgid "MSADPCM"
+msgstr "MSADPCM"
+
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:498
+msgid "ULAW"
+msgstr "ULAW"
+
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:499
+msgid "IMA ADPCM"
+msgstr "IMA ADPCM"
+
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:500
+msgid "8-bit PCM"
+msgstr ""
+
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:502
+msgid "Unknown codec"
+msgstr "Codec inconnu"
+
+#: avidemux/ADM_outputs/oplug_avi/op_avisavecopy.cpp:109
+#: avidemux/ADM_outputs/oplug_avi/op_avisavecopy_pack.cpp:134
+#: avidemux/ADM_outputs/oplug_avi/op_avisavecopy_unpack.cpp:111
+#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:223
+msgid "Saving"
+msgstr "Enregistrement"
+
 #: avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp:73
 msgid ""
 "Width is not a multiple of 8\n"
@@ -1428,17 +1689,44 @@
 "\n"
 " R?utiliser le fichier journal ?"
 
+#: avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp:136
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:410
+msgid "1st Pass"
+msgstr "Premi?re passe"
+
 #: avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp:152
 #: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:437
 msgid "Aborting"
 msgstr "Annulation"
 
+#: avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp:246
+#: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:153
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:207
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:188
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:373
+#: avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp:143
+msgid "Encoding"
+msgstr "Encodage"
+
+#: avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp:250
+msgid "Encoding, 2nd pass"
+msgstr "Seconde passe"
+
+#: avidemux/ADM_outputs/oplug_avi/op_savesmart.cpp:107
+msgid "Smart Copy"
+msgstr "Copie intelligente"
+
 #: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:135
 #: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:189
 #: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:156
 msgid "Cannot initialize the video stream"
 msgstr "Ne peut pas initialiser le flux vid?o"
 
+#: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:140
+#, fuzzy
+msgid "Dummy"
+msgstr "Exemple"
+
 #: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:179
 #: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:215
 #: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:233
@@ -1492,6 +1780,10 @@
 msgid "Cannot initialize the audio stream"
 msgstr "Ne peut pas initialiser le flux audio"
 
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:467
+msgid "2nd Pass"
+msgstr "Seconde passe"
+
 #: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:89
 msgid "This is not MPEG compatible"
 msgstr "Ce n'est pas compatible avec le MPEG"
@@ -1528,18 +1820,82 @@
 msgid "For DVD, audio must be 48 kHz MP2(stereo), AC3, DTS or LPCM (stereo)."
 msgstr "Pour les DVD, l'audio doit ?tre MP2 (st?r?o), AC3, DTS ou LPCM (st?r?o) ? 48 kHz."
 
+#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:222
+msgid "---"
+msgstr "---"
+
+#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:230
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:287
+msgid "MPEG TS"
+msgstr "MPEG TS"
+
+#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:231
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:288
+msgid "MPEG VCD"
+msgstr "MPEG VCD"
+
+#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:232
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:289
+msgid "MPEG SVCD"
+msgstr "MPEG SVCD"
+
+#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:233
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:290
+msgid "MPEG DVD"
+msgstr "MPEG DVD"
+
 #: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:193
 msgid "For DVD, audio must be 48 kHz MP2, AC3 or LPCM."
 msgstr "Pour les DVD, l'audio doit ?tre MP2, AC3 ou LPCM ? 48 kHz."
 
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:260
+msgid "libmpeg2enc VCD"
+msgstr "libmpeg2enc VCD"
+
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:263
+msgid "libmpeg2enc SVCD"
+msgstr "libmpeg2enc SVCD"
+
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:266
+msgid "libmpeg2enc DVD"
+msgstr "libmpeg2enc DVD"
+
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:269
+msgid "FFmpeg MPEG-1 VBR"
+msgstr "FFmpeg MPEG-1 VBR"
+
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:272
+msgid "FFmpeg MPEG-2 SVCD VBR"
+msgstr "FFmpeg MPEG-2 SVCD VBR"
+
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:275
+msgid "FFmpeg MPEG-2 DVD VBR"
+msgstr "FFmpeg MPEG-2 DVD VBR"
+
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:278
+msgid "MPEG Requantizer"
+msgstr ""
+
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:286
+msgid "MPEG ES"
+msgstr "MPEG ES"
+
 #: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:305
 msgid "Reuse log file ?"
 msgstr "R?utiliser le fichier journal??"
 
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:311
+msgid "Pass 1/2"
+msgstr "Passe 1/2"
+
 #: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:320
 msgid "Error in pass 1"
 msgstr "Erreur pendant la 1? passe"
 
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:371
+msgid "Pass 2/2"
+msgstr "Passe 2/2"
+
 #: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:463
 msgid "Error in pass 2"
 msgstr "Erreur pendant la 2? passe"
@@ -1552,23 +1908,33 @@
 msgid "Could not initialize audio"
 msgstr "Impossible d'initialiser l'audio"
 
+#: avidemux/ADM_outputs/oplug_ogm/op_ogsavecopy.cpp:70
+msgid "Saving..."
+msgstr "Enregistrement..."
+
+#: avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp:111
+msgid "Pass one"
+msgstr "Premi?re passe"
+
+#: avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp:139
+msgid "Pass 2"
+msgstr "Seconde passe"
+
 #: avidemux/ADM_script/ADM_JSFunctions.cpp:238
 msgid "Select a directory"
 msgstr "S?lectionner un dossier"
 
 #: avidemux/ADM_script/ADM_JSFunctions.cpp:504
-#, fuzzy
 msgid "Uinteger"
-msgstr "Uinteger"
+msgstr ""
 
 #: avidemux/ADM_script/ADM_JSFunctions.cpp:507
 msgid "Test uinteger"
 msgstr ""
 
 #: avidemux/ADM_script/ADM_JSFunctions.cpp:519
-#, fuzzy
 msgid "Float"
-msgstr "Float"
+msgstr ""
 
 #: avidemux/ADM_script/ADM_JSFunctions.cpp:537
 msgid "Toggle"
@@ -1652,26 +2018,6 @@
 msgid "Resampling frequency (Hz)"
 msgstr "Fr?quence de r??chantillonnage (Hz)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:80
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:89
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:51
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:327
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:373
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:381
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:389
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:553
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:568
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:583
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:219
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1188
-#: avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp:105
-#: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:101
-#: avidemux/ADM_videoFilter/ADM_vidRotate.cpp:264
-#: avidemux/gtk_gui.cpp:2005
-#: avidemux/gtk_gui.cpp:2104
-msgid "None"
-msgstr "Aucun"
-
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:81
 msgid "Film to PAL"
 msgstr "Film?vers?PAL"
@@ -1786,14 +2132,6 @@
 msgid "Video Codecs"
 msgstr "Codecs vid?o"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:129
-msgid "Xvid"
-msgstr "XviD"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:130
-msgid "x264"
-msgstr "x264"
-
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:135
 msgid "Audio Codecs"
 msgstr "Codecs audio"
@@ -2032,34 +2370,25 @@
 msgstr "Complet"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:53
-#, fuzzy
 msgid "Log"
-msgstr "Log"
+msgstr ""
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:54
-#, fuzzy
 msgid "Phods"
-msgstr "Phods"
+msgstr ""
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:55
-#, fuzzy
 msgid "EPZS"
-msgstr "EPZS"
+msgstr ""
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:56
-#, fuzzy
 msgid "X1"
-msgstr "X1"
+msgstr ""
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:60
 msgid "H.263"
 msgstr "H.263"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:61
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:519
-msgid "MPEG"
-msgstr "MPEG"
-
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:65
 #, fuzzy
 msgid "MB comparison"
@@ -2092,7 +2421,6 @@
 msgstr "_Diff?rence quantificateur max :"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:78
-#, fuzzy
 msgid "4_MV"
 msgstr "4_MV"
 
@@ -2179,12 +2507,12 @@
 msgstr "Option du d?codeur"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_mjpeg.cpp:37
-msgid "_Swap U&V:"
-msgstr "_Inverser U & V :"
+msgid "_Swap U&V"
+msgstr "_Inverser U & V"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_mjpeg.cpp:39
-msgid "Mjpeg Configuration"
-msgstr "Configuration Mjpeg"
+msgid "MJPEG Configuration"
+msgstr "Configuration de MJPEG"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:92
 msgid "Select idx file:"
@@ -2192,7 +2520,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:93
 msgid "Use GlyphSet (optional):"
-msgstr "Utiliser un dictionnaire de symbole (optionnel) :"
+msgstr "Utiliser un dictionnaire de symboles (optionnel) :"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:93
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:210
@@ -2229,17 +2557,17 @@
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:136
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:255
 msgid "Cannot load the glyphset file."
-msgstr "Echec de chargement du fichier de dictionnaire de symbole."
+msgstr "Echec de chargement du dictionnaire de symboles."
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:156
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:276
 msgid "GlyphSet filename"
-msgstr "Nom du fichier du dictionnaire de symbole"
+msgstr "Nom du dictionnaire de symboles"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:156
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:276
 msgid "Save GlyphSet file"
-msgstr "Enregistrer le fichier de dictionnaire de symboles"
+msgstr "Enregistrer le dictionnaire de symboles"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:158
 msgid "Save Glyph"
@@ -2259,7 +2587,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:210
 msgid "Use glyphset (optional):"
-msgstr "Utiliser un dictionnaire de symbole (optionnel) :"
+msgstr "Utiliser un dictionnaire de symboles (optionnel) :"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:233
 msgid "Please Select a valid TS file."
@@ -2292,9 +2620,8 @@
 msgstr "_Eliminer les oscillations parasites"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:187
-#, fuzzy
 msgid "_Use systray while encoding"
-msgstr "_Activer le systray pendant l'encodage"
+msgstr "_Utiliser la zone de notification pendant l'encodage"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:188
 msgid "_Accept non-standard audio frequency for DVD"
@@ -2375,15 +2702,15 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:230
 msgid "_lavc threads:"
-msgstr "processus _lavc :"
+msgstr "Processus _lavc :"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:231
 msgid "_x264 threads:"
-msgstr "processus _x264 :"
+msgstr "Processus _x264 :"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:232
 msgid "X_vid threads:"
-msgstr "processus X_viD :"
+msgstr "Processus X_viD :"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:234
 msgid "Multi-threading"
@@ -2461,7 +2788,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:279
 msgid "Display only error alerts"
-msgstr "Afficher seulement s'il y a des alertes d'erreur"
+msgstr "Afficher seulement s'il y a des erreurs"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:280
 msgid "Display all alerts"
@@ -2471,10 +2798,6 @@
 msgid "_Message level:"
 msgstr "Niveau de _messages :"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:287
-msgid "PCM"
-msgstr "PCM"
-
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:288
 #, fuzzy
 msgid "Master"
@@ -2486,7 +2809,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:294
 msgid "No downmixing"
-msgstr "Pas de baise du nombre de canaux"
+msgstr "Pas de baisse du nombre de canaux"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:296
 msgid "Pro Logic"
@@ -2505,12 +2828,10 @@
 msgstr ""
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:316
-#, fuzzy
 msgid "JACK"
 msgstr "JACK"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:325
-#, fuzzy
 msgid "Win32"
 msgstr "Win32"
 
@@ -2550,11 +2871,11 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:366
 msgid "Use _Global GlyphSet"
-msgstr "Utiliser un dictionnaire de symbole _global"
+msgstr "Utiliser un dictionnaire _global de symboles"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:367
 msgid "Gl_yphSet:"
-msgstr "_Dictionnaire de symbole :"
+msgstr "_Dictionnaire de symboles :"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:376
 msgid "Automation"
@@ -2583,11 +2904,11 @@
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:408
 msgid "Threading"
-msgstr ""
+msgstr "Gestion des processus"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:412
 msgid "Global GlyphSet"
-msgstr "Dictionnaire de symbole global"
+msgstr "Dictionnaire global de symboles"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:416
 msgid "External Filters"
@@ -3329,7 +3650,6 @@
 msgstr "00:00:00"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:461
-#, fuzzy
 msgid "_Medium:"
 msgstr "_Support :"
 
@@ -3398,7 +3718,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:598
 msgid "<b>Audio Bitrate</b>"
-msgstr "<b>Bitrate audio</b>"
+msgstr "<b>D?bit audio</b>"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:624
 msgid "Audio size (MB):"
@@ -3564,9 +3884,8 @@
 msgstr "Gain automatique"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:408
-#, fuzzy
 msgid "Display Stats"
-msgstr "Affichage des stats"
+msgstr "Affichage des statistiques"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:412
 msgid "AutoWhite"
@@ -3708,7 +4027,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:780
 msgid "<b>Frames/sec:</b>"
-msgstr "<b>Image/sec :</b>"
+msgstr "<b>Images/sec :</b>"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:826
 msgid "Shut down computer when finished"
@@ -3728,7 +4047,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:884
 msgid "Pause / Abort"
-msgstr "Pause/Annulation"
+msgstr "Pause / Annulation"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eq2.cpp:231
 msgid "Brigh_tness:"
@@ -3832,20 +4151,20 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:25
 msgid "Ready"
-msgstr "Pr?t"
+msgstr "Pr?te"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:25
 msgid "Succeeded"
-msgstr "R?ussi"
+msgstr "R?ussie"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:25
 #: avidemux/gtk_gui.cpp:2282
 msgid "Failed"
-msgstr "Echou?"
+msgstr "Echou?e"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:25
 msgid "Deleted"
-msgstr "Supprim?"
+msgstr "Supprim?e"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:25
 msgid "Running"
@@ -3853,7 +4172,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:98
 msgid "  Job Name  "
-msgstr "  Nom de la t?che  "
+msgstr "Nom de la t?che  "
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:103
 msgid "Started at"
@@ -3866,7 +4185,7 @@
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:134
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:172
 msgid "Sure!"
-msgstr "S?r?!"
+msgstr "OK"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:134
 msgid "Delete ALL jobs"
@@ -3899,7 +4218,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:292
 msgid "Delete Job"
-msgstr "Supprimer t?che"
+msgstr "Supprimer la t?che"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp:297
 msgid "Run all jobs"
@@ -3941,7 +4260,7 @@
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_filesel.cpp:90
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_filesel.cpp:244
 msgid "_Browse..."
-msgstr "_Explorer..."
+msgstr "_Parcourir..."
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs_save.cpp:154
 msgid "Job name displayed in the job list and used as the script filename"
@@ -4016,7 +4335,6 @@
 msgstr " Texte?:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:176
-#, fuzzy
 msgid "_Calibrate"
 msgstr "_Calibrer"
 
@@ -4025,7 +4343,6 @@
 msgstr "Si les symboles sont trop fins, saisir une valeur plus petite ici"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_ocr.cpp:182
-#, fuzzy
 msgid "S_kip all"
 msgstr "P_asser tous"
 
@@ -4086,7 +4403,7 @@
 msgstr ""
 "<b>Encodage en pause.</b>\n"
 "\n"
-"Vous pouvez le relancer ou l'annuler."
+"Vous pouvez le reprendre ou l'annuler."
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_pause.cpp:136
 msgid "Abort"
@@ -4094,7 +4411,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_pause.cpp:158
 msgid "Resume"
-msgstr "Relancer"
+msgstr "Reprendre"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_pipe.cpp:95
 msgid "Pipe to"
@@ -4174,7 +4491,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:234
 msgid "Frame Count:"
-msgstr "Nombre d'image :"
+msgstr "Nombre d'images :"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:241
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:419
@@ -4394,7 +4711,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_working.cpp:259
 msgid "<b>Time remaining:</b>"
-msgstr "<b>Dur?e restante :</b>"
+msgstr "<b>Restant :</b>"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:110
 #, fuzzy
@@ -4429,15 +4746,15 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:660
 msgid "Single Pass - Quality Quantizer (Average)"
-msgstr "Une passe - Qualit? Quantificateur (moyen)"
+msgstr "Une passe - Qualit? du quantificateur (moyenne)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:661
 msgid "Single Pass - Quality Quantizer (Constant)"
-msgstr "Une passe - Qualit? Quantificateur (constant)"
+msgstr "Une passe - Qualit? du quantificateur (constant)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:662
 msgid "Single Pass - Bitrate (Average)"
-msgstr "Une passe - Bitrate (moyen)"
+msgstr "Une passe - D?bit (moyenne)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:663
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:768
@@ -4451,7 +4768,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:666
 msgid "Bitrate"
-msgstr "Bitrate"
+msgstr "D?bit"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:699
 #, fuzzy
@@ -4593,22 +4910,21 @@
 msgstr "Indiquer un ratio personnalis?. Par D?faut 1:1 est recommand? pour la plupart des vid?os."
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:865
-#, fuzzy
 msgid "Predefined Aspect Ratio"
-msgstr "Ratio Pr?d?finis"
+msgstr "Rapport H/L pr?d?fini"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:870
 msgid "Set a common predefined aspect ratio"
-msgstr "Placer un radio d'aspect commun pr?d?fini"
+msgstr "D?fini un rapport H/L commun pr?d?fini"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:874
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1040
 msgid "As Input"
-msgstr "Comme entr?e"
+msgstr "Comme en entr?e"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:895
-#, fuzzy
 msgid "<b>Sample Aspect Ratio</b>"
-msgstr "<b>Exemple Ratio Aspect (A/R)</b>"
+msgstr "<b>Exemple de rapport H/L</b>"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:922
 msgid "CABAC"
@@ -4620,7 +4936,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:932
 msgid "Trellis"
-msgstr "Trellis"
+msgstr "Treillis"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:941
 #, fuzzy
@@ -4629,11 +4945,11 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:948
 msgid "Noise Reduction"
-msgstr "R?duction de bruit"
+msgstr "R?duction du bruit"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:957
 msgid "Set the amount of noise reduction"
-msgstr "Choisi le niveau de r?duction de bruit"
+msgstr "Choisi le niveau de r?duction du bruit"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:964
 msgid "Deblocking Filter"
@@ -4772,18 +5088,18 @@
 msgid "B-Frame Direct Mode"
 msgstr "Mode image-B direct?:"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1185
-msgid "Auto"
-msgstr "Auto"
-
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1186
-msgid "Temporal"
-msgstr "Temporal"
+msgid "Spatial"
+msgstr "Spatiale"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1187
-msgid "Spatial"
-msgstr "Spatial"
+msgid "Temporal"
+msgstr "Temporel"
 
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1188
+msgid "Auto"
+msgstr "Auto"
+
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1190
 msgid "<b>B-Frames</b>"
 msgstr "<b>Images-B</b>"
@@ -4798,7 +5114,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1239
 msgid "Set how much bitrate is deducted from a B-frame as compared to the previous P-frame"
-msgstr "Indiquer combien est d?duit du d?bit d'une image-B par rapport ? l' image-P pr?c?dente"
+msgstr "D?fini de combien est d?duit le d?bit d'une image-B par rapport ? l' image-P pr?c?dente"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1248
 #, fuzzy
@@ -4806,12 +5122,10 @@
 msgstr "D?finir de combien le d?bit peut flotter au-dessus de la vid?o enti?re. 0% a comme cons?quence un flux de d?bit constant alors que les r?sultats de 100% est une qualit? pure bas?e sur le flux de d?bit"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1251
-#, fuzzy
 msgid "Keyframe Boost (%)"
-msgstr "Boost image-cl? (%)"
+msgstr "Boost des images-cl?s (%)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1258
-#, fuzzy
 msgid "B-frame Reduction (%)"
 msgstr "R?duction des images-B (%)"
 
@@ -4821,31 +5135,32 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1272
 msgid "<b>Bitrate</b>"
-msgstr "<b>Bitrate</b>"
+msgstr "<b>D?bit</b>"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1292
 msgid "Min QP"
-msgstr "Qp min."
+msgstr "QPel min."
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1299
 msgid "Max QP"
-msgstr "Qp max."
+msgstr "QPel max."
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1306
+#, fuzzy
 msgid "Max QP Step"
-msgstr "Max QP Step"
+msgstr "Palier max. de QPel"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1320
 msgid "Enforce a minimum quantizer level"
-msgstr "Imposer un niveau minimum de quantificateur"
+msgstr "Impose un niveau minimum de quantificateur"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1329
 msgid "Enforce a maximum quantizer level"
-msgstr "Imposer un niveau maximum de quantificateur"
+msgstr "Impose un niveau maximum de quantificateur"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1338
 msgid "Define how much the quantizer rate can change between two consecutive frames"
-msgstr "D?finir de combien le taux de quantificateur peut changer entre deux images cons?cutives"
+msgstr "D?fini de combien le taux de quantificateur peut changer entre deux images cons?cutives"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1341
 msgid "<b>Quantization Limits</b>"
@@ -4887,37 +5202,38 @@
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1430
 #, fuzzy
 msgid "VBV Buffer Size"
-msgstr "Taille buffer VBV"
+msgstr "Taille du tampon VBV"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1437
 #, fuzzy
 msgid "Initial VBV Buffer (%)"
-msgstr "Buffer VBV initial (%)"
+msgstr "Tampon VBV initial (%)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1444
-#, fuzzy
 msgid "Maximum Local Bitrate"
-msgstr "D?bit maximum local"
+msgstr "D?bit local maximum"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1475
+#, fuzzy
 msgid "<b>Video Buffer Verifier</b>"
-msgstr "<b>V?rifieur Buffer Vid?o</b>"
+msgstr "<b>V?rificateur du tampon de la vid?o</b>"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1508
 msgid "Bitrate Variance"
-msgstr "Bitrate Variance"
+msgstr "Variance de d?bit"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1521
 msgid "Allowed variance of average bitrate. Lower values mean less variance. Higher values mean more variance."
-msgstr "Variabilit? du d?bit moyen est autoris?. Des valeurs plus basses signifient moins de permissions. Des valeurs plus ?lev?es signifient plus de permissions."
+msgstr "Variabilit? autoris? du d?bit moyen. Des valeurs plus basses signifient moins de permissions. Des valeurs plus ?lev?es signifient plus de permissions."
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1530
 msgid "Allowed variance of average quantizer or quality. Lower values mean less variance. Higher values mean more variance. Note that 0 means constant quality while 1 means constant fluctuation. Recommended 0.6."
-msgstr "Variabilit? du quantificateur moyen ou de la qualit? est permis. Des valeurs plus basses signifient moins de permissions. Des valeurs plus ?lev?es signifient plus de permissions. Noter que 0 signifie qualit? constante tandis que 1 signifie une fluctuation constante. 0.6 recommand?."
+msgstr "Variabilit? autoris? du quantificateur moyen ou de la qualit?. Des valeurs plus basses signifient moins de permissions. Des valeurs plus ?lev?es signifient plus de permissions. Noter que 0 signifie qualit? constante tandis que 1 signifie une fluctuation constante. 0.6 recommand?."
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1539
+#, fuzzy
 msgid "Reduced fluctuations in Quantizer (before curve compression)"
-msgstr ""
+msgstr "Fluctucations r?duit dans le quantificateur (avant la courbe de compression)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1550
 msgid "Quantizer Compression"
@@ -4960,9 +5276,8 @@
 msgstr "Facteur de quantification entre les images-P et les images-B"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1632
-#, fuzzy
 msgid "Chroma QP Offset"
-msgstr "D?calage de la chrominance et du QP"
+msgstr "D?calage de la chrominance et du QPel"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1639
 msgid "<b>Quantizers</b>"
@@ -5006,9 +5321,8 @@
 msgstr "Plus"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1710
-#, fuzzy
 msgid "_Defaults"
-msgstr "_D?fauts"
+msgstr "Par _d?faut"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:237
 msgid "Xvid Encoder"
@@ -5020,7 +5334,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:258
 msgid "Constant Bitrate (kbps)"
-msgstr "Bitrate Constant (kbps)"
+msgstr "D?bit constant (kb/s)"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid.cpp:266
 msgid "Dual pass (MBytes)"
@@ -5167,7 +5481,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:739
 msgid "Bitrate (kb/s):"
-msgstr "Bitrate (kb/s)?:"
+msgstr "D?bit (kb/s)?:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:744
 msgid "Quantizer:"
@@ -5179,16 +5493,15 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:760
 msgid "Single Pass - Bitrate"
-msgstr "Une passe - d?bit"
+msgstr "Une passe - D?bit"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:764
 msgid "Single Pass - Quantizer"
 msgstr "Une passe - Quantificateur"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:776
-#, fuzzy
 msgid "Same Quantizer as Input"
-msgstr "M?me Qfer que l'entr?e"
+msgstr "M?me quantificateur qu'en entr?e"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:785
 msgid "Target video bitrate"
@@ -5264,7 +5577,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:880
 msgid "Higher settings give higher quality results, at the cost of slower encoding"
-msgstr "Plus les r?glages sont haut meilleur sera la qualit?, mais au prix d'un encodage plus lent"
+msgstr "Plus le r?glage est haut, plus la qualit? sera meilleure, mais au prix d'un encodage plus lent"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:888
 msgid "1 - Very low"
@@ -5292,7 +5605,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:917
 msgid "VHQ enables an additional search process to increase quality"
-msgstr "VHQ permet ? un processus de recherche compl?mentaire d'augmenter la qualit?"
+msgstr "Active un processus de recherche suppl?mentaire afin d'augmenter la qualit?"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:921
 msgid "0 - Off"
@@ -5316,11 +5629,11 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:947
 msgid "C_hroma motion"
-msgstr "Mouvement c_hroma"
+msgstr "Mouvement par la c_hrominance"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:950
 msgid "Use chroma information to estimate motion"
-msgstr "Utiliser les informations de chrominance pour estimer le mouvement"
+msgstr "Utilise les informations de chrominance pour estimer le mouvement"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:952
 msgid "_4MV"
@@ -5328,7 +5641,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:955
 msgid "Use 4 motion vectors per macroblock, might give better compression"
-msgstr "Utilise 4 vecteurs de mouvement par macrobloc, devrait donner une meilleure compression"
+msgstr "Utilise 4 vecteurs de mouvement par macrobloc. Devrait donner une meilleure compression"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:957
 msgid "HQ _AC"
@@ -5336,7 +5649,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:960
 msgid "Enable a better prediction of AC component. Turns on Lumi masking - applies more compression to dark/light areas that the eye cannot notice easily"
-msgstr "Permettre une meilleure pr?diction des composants AC. Met le masquage Lumi - applique plus de compression aux secteurs sombres/l?gers que l'?il ne peut pas remarquer facilement"
+msgstr "Permet une meilleure pr?diction des composants AC. Met le masquage de la luminance et applique plus de compression aux secteurs sombres/l?gers que l'?il ne peut pas facilement remarquer"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:966
 msgid "I-frame interval - Min:"
@@ -5355,7 +5668,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:984
 msgid "Maximum number of frames allowed between I-frames"
-msgstr "Nombre maximal d'images permises entre images I"
+msgstr "Nombre maximal d'images permises entre images-I"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:999
 msgid "Number of B-frames:"
@@ -5367,11 +5680,11 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1013
 msgid "_Qpel"
-msgstr "_Qpel"
+msgstr "_QPel"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1016
 msgid "Use Quarter pixel resolution for a more precise motion estimation"
-msgstr "Utilisation la r?solution de QuaterPixel pour une ?valuation de mouvement plus pr?cise"
+msgstr "Utilisation la r?solution du Quart de pixel pour une ?valuation de mouvement plus pr?cise"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1021
 msgid "Global Motion Compensation can save bits on camera pans, zooming and rotation"
@@ -5385,14 +5698,9 @@
 msgid "Produces nicer-looking B-frames"
 msgstr "Produit des images-B plus jolies"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1040
-#, fuzzy
-msgid "As input"
-msgstr "Entr?e"
-
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1043
 msgid "Get PAR from input video file"
-msgstr "R?cup?re le rapport H/L de la vid?o d'entr?e"
+msgstr "R?cup?re le rapport H/L de la vid?o d'entr?e"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1049
 msgid "Pixel Width"
@@ -5432,7 +5740,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1107
 msgid "Load Custom Matrix:  "
-msgstr "Charger matrice personnalis?e?:"
+msgstr "Matrice personnalis?e?:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1153
 msgid "I-frame quantizer - Min:"
@@ -5476,11 +5784,11 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1238
 msgid "Rate distortion quantization, will find optimal encoding for each block"
-msgstr "La quantification d'alt?ration de taux, trouvera le codage optimal pour chaque bloc"
+msgstr "La quantification d'alt?ration du taux trouve le codage optimal pour chaque bloc"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1268
 msgid "I-frame boost (%):"
-msgstr "image-I boost (%)?:"
+msgstr "Boost des images-I (%)?:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1273
 msgid "I-frames closer than ... frames..."
@@ -5492,20 +5800,20 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1283
 msgid "Max overflow improvement (%):"
-msgstr "Am?lioration Max d?bordement (%)?:"
+msgstr "D?passement maximal de l'am?lioration (%)?:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1288
 msgid "Max overflow degradation (%):"
-msgstr "D?gradation Max d?bordement (%)?:"
+msgstr "D?passement maximal de la d?gradation (%)?:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1300
-#, c-format
+#, fuzzy, c-format
 msgid "A value of 20 will give 20% more bits to every I-frame"
-msgstr ""
+msgstr "Une valeur de 20 donnera 20% de bits en plus pour chaque image-I"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1306
 msgid "I-frames appearing in the range below this value will be treated as consecutive keyframes"
-msgstr "Les images-I de l'intervalle inf?rieur ? cette valeur seront trait?es comme des images-cl?s cons?cutives"
+msgstr "Les images-I d'intervalle inf?rieure ? cette valeur seront trait?es comme des images-cl?s cons?cutives"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1311
 msgid "Reduction of bitrate for the first consecutive I-frames. The last I-frame will get treated normally"
@@ -5513,15 +5821,15 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1316
 msgid "How much of the overflow the codec can eat into during undersized sections - larger values will bridge the gap faster"
-msgstr "Valeur du d?bordement que le codec peut traiter pour les sections sous-dimensionn?es - une valeur plus grande permettra de combler le trou plus rapidement"
+msgstr "Valeur du d?passement que le codec peut traiter pour les sections sous-dimensionn?es - une valeur plus grande permettra de combler le trou plus rapidement"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1321
 msgid "How much of the overflow the codec can eat into during oversized sections - larger values will bridge the gap faster"
-msgstr "Valeur du d?bordement que le codec peut traiter pour les sections surdimensionn?es - une valeur plus grande permettra de combler le trou plus rapidement"
+msgstr "Valeur du d?passement que le codec peut traiter pour les sections surdimensionn?es - une valeur plus grande permettra de combler le trou plus rapidement"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1323
 msgid "Two pass tuning"
-msgstr "Deux passes perso"
+msgstr "Deux passes personnalis?es"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1340
 msgid "High bitrate scenes (%):"
@@ -5533,7 +5841,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1350
 msgid "Overflow control strength (%):"
-msgstr "Puissance du contr?le du d?bordement (%)?:"
+msgstr "Puissance de contr?le du d?passement (%)?:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1362
 msgid "The higher this value, the more bits get taken from frames larger than the average size, and redistributed to others"
@@ -5545,7 +5853,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1372
 msgid "0 = default from core (let XviD decide), else overflow payback percent per frame"
-msgstr "0 = d?faut (laisser XviD d?cider), sinon valeur du pourcentage de d?bordement par image"
+msgstr "0 = d?faut (laisser XviD d?cider) sinon valeur du pourcentage de d?passement par image"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1374
 msgid "Curve compression"
@@ -5581,11 +5889,11 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:127
 msgid "Single pass - same qz as input"
-msgstr "Passe seule - m?me quantificateur qu'en entr?e"
+msgstr "Une passe - m?me quantificateur qu'en entr?e"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:129
 msgid "Single pass - Average quantizer"
-msgstr "Passe seule - Quantificateur moyen"
+msgstr "Une passe - Quantificateur moyen"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_bitrate.cpp:132
 msgid "Two pass - video size"
@@ -5890,7 +6198,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:392
 msgid "Show _Joblist"
-msgstr "Montrer la liste des _t?ches"
+msgstr "Ouvrir la _liste des t?ches"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:404
 msgid "Co_nnect to avsproxy"
@@ -5898,7 +6206,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:413
 msgid "Proper_ties"
-msgstr "Propri?_t?s"
+msgstr "Propr_i?t?s"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:424
 msgid "AVI _Muxer Options"
@@ -5910,11 +6218,11 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:444
 msgid "_Edit"
-msgstr "_Editer"
+msgstr "_Edition"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:451
 msgid "_Reset Edits"
-msgstr "_R?initialiser les ?ditions"
+msgstr "_Annuler tout"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:464
 msgid "Cu_t"
@@ -5998,7 +6306,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:636
 msgid "_Frame Rate"
-msgstr "_Fr?quence d'image"
+msgstr "_Images par seconde"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:640
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:689
@@ -6197,11 +6505,6 @@
 msgid "Bitrate/size calculator"
 msgstr "Calculatrice d?bit/taille"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1081
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1121
-msgid "Copy"
-msgstr "Copie"
-
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1086
 msgid "Configure video encoder"
 msgstr "Configurer l'encodeur vid?o"
@@ -6548,7 +6851,7 @@
 
 #: avidemux/ADM_videoFilter/ADM_vidASS.cpp:91
 msgid "Botto_m margin"
-msgstr "Marge _inf?rieur"
+msgstr "Marge _inf?rieure"
 
 #: avidemux/ADM_videoFilter/ADM_vidBlendRemoval.cpp:82
 #: avidemux/ADM_videoFilter/ADM_vidDGbob.cpp:92
@@ -6729,12 +7032,14 @@
 msgstr ""
 
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:105
+#, fuzzy
 msgid "Process image (not fields)"
-msgstr ""
+msgstr "Traite l'image (pas les trames)"
 
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:106
+#, fuzzy
 msgid "Process image (not fields), debug"
-msgstr ""
+msgstr "Traite l'image (pas les trames), d?bogage"
 
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:110
 msgid "_Strategy:"
@@ -6792,11 +7097,11 @@
 
 #: avidemux/ADM_videoFilter/ADM_vidDenoise.cpp:388
 msgid "L_uma threshold:"
-msgstr "Seuil de l_uma?:"
+msgstr "Seuil de l_uminance?:"
 
 #: avidemux/ADM_videoFilter/ADM_vidDenoise.cpp:389
 msgid "Ch_roma threshold:"
-msgstr "Seuil de ch_roma :"
+msgstr "Seuil de ch_rominance :"
 
 #: avidemux/ADM_videoFilter/ADM_vidDenoise.cpp:391
 msgid "_Scene change:"
@@ -6883,8 +7188,9 @@
 msgstr ""
 
 #: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:244
+#, fuzzy
 msgid "Output \"_Color\" for all masked pixels:"
-msgstr ""
+msgstr "_Couleur de sortie pour tous les pixels masqu?s :"
 
 #: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:250
 msgid "Eraser _Data File:"
@@ -6902,7 +7208,6 @@
 msgstr ""
 
 #: avidemux/ADM_videoFilter/ADM_vidEraser.cpp:261
-#, fuzzy
 msgid "Eraser Configuration"
 msgstr "Configuration de \"Eraser\""
 
@@ -7068,7 +7373,7 @@
 
 #: avidemux/ADM_videoFilter/ADM_vidMcDeint.cpp:115
 msgid "_Qp:"
-msgstr "_Qp :"
+msgstr "_QPel :"
 
 #: avidemux/ADM_videoFilter/ADM_vidMosaic.cpp:90
 msgid "_Horizontal stacking:"
@@ -7223,11 +7528,11 @@
 
 #: avidemux/ADM_videoFilter/ADM_vidSoften.cpp:68
 msgid "_Luma threshold:"
-msgstr "Seuil?de la _luminance :"
+msgstr "Seuil?de _luminance :"
 
 #: avidemux/ADM_videoFilter/ADM_vidSoften.cpp:69
 msgid "C_hroma threshold:"
-msgstr "Seuil de c_hroma :"
+msgstr "Seuil de c_hrominance :"
 
 #: avidemux/ADM_videoFilter/ADM_vidSoften.cpp:70
 msgid "_Radius:"
@@ -7468,11 +7773,11 @@
 
 #: avidemux/gtk_gui.cpp:512
 msgid "Select AVI File to Append..."
-msgstr ""
+msgstr "S?lectionner le fichier AVI ? ajouter..."
 
 #: avidemux/gtk_gui.cpp:516
 msgid "Select File to Save Audio"
-msgstr ""
+msgstr "S?lectionner le fichier o? sauvegarder l'audio"
 
 #: avidemux/gtk_gui.cpp:550
 msgid "Select JPEG Sequence to Save"
@@ -7534,7 +7839,7 @@
 
 #: avidemux/gtk_gui.cpp:808
 msgid "Frame Rate"
-msgstr "Fr?quence d'image"
+msgstr "Images par seconde"
 
 #: avidemux/gtk_gui.cpp:808
 msgid "_Frames per second:"
@@ -7775,7 +8080,7 @@
 #: avidemux/gtk_gui.cpp:2008
 #: avidemux/gtk_gui.cpp:2107
 msgid "External WAV"
-msgstr "Wav externe"
+msgstr "WAV externe"
 
 #: avidemux/gtk_gui.cpp:2008
 #: avidemux/gtk_gui.cpp:2107
@@ -7891,8 +8196,9 @@
 msgstr "Une piste est n?cessaire pour cr?er un fichier"
 
 #: avidemux/gui_autodrive.cpp:63
+#, fuzzy
 msgid "You need Xvid4 and either LAME or FAAC support for the iPod profile"
-msgstr ""
+msgstr "Vous avez besoin de XviD 4 et de LAME ou FAAC pour supporter le profil iPod"
 
 #: avidemux/gui_autodrive.cpp:74
 msgid "Cannot select the MPEG-4 SP codec."
@@ -8002,6 +8308,10 @@
 "Vous pouvez avoir besoin de la copie intelligente.\n"
 "La permettez-vous??"
 
+#~ msgid "Mjpeg Configuration"
+#~ msgstr "Configuration MJPEG"
+#~ msgid "As input"
+#~ msgstr "Comme en entr?e"
 #~ msgid ""
 #~ ".\n"
 #~ " Did you use too low / too high target for 2 pass ?"

Modified: branches/avidemux_2.5_branch_gruntster/po/it.po
===================================================================
--- branches/avidemux_2.5_branch_gruntster/po/it.po	2008-04-26 19:14:38 UTC (rev 3986)
+++ branches/avidemux_2.5_branch_gruntster/po/it.po	2008-04-26 19:45:40 UTC (rev 3987)
@@ -3,7 +3,7 @@
 "Project-Id-Version: avidemux\n"
 "Report-Msgid-Bugs-To: \n"
 "POT-Creation-Date: 2006-10-04 22:09+0300\n"
-"PO-Revision-Date: 2008-02-16 09:57+0100\n"
+"PO-Revision-Date: 2008-04-10 23:59+0100\n"
 "Last-Translator: \n"
 "Language-Team: it\n"
 "MIME-Version: 1.0\n"
@@ -12,6 +12,7 @@
 "X-Generator: KBabel 1.0.1\n"
 
 #: avidemux/ADM_editor/ADM_outputfmt.h:42
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:369
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:511
 msgid "AVI"
 msgstr "AVI"
@@ -41,23 +42,30 @@
 msgstr "MPEG video"
 
 #: avidemux/ADM_editor/ADM_outputfmt.h:49
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:493
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:131
 msgid "MP4"
 msgstr "MP4"
 
 #: avidemux/ADM_editor/ADM_outputfmt.h:50
+#: avidemux/ADM_outputs/oplug_ogm/op_ogsave.cpp:119
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:515
 msgid "OGM"
 msgstr "OGM"
 
 #: avidemux/ADM_editor/ADM_outputfmt.h:51
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:130
 msgid "PSP"
 msgstr "PSP"
 
 #: avidemux/ADM_editor/ADM_outputfmt.h:52
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:194
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:283
 msgid "FLV"
 msgstr "FLV"
 
 #: avidemux/ADM_editor/ADM_outputfmt.h:53
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:132
 msgid "MKV"
 msgstr "MKV"
 
@@ -65,6 +73,148 @@
 msgid "DUMMY"
 msgstr "DUMMY"
 
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:13
+msgid "YV12 (raw)"
+msgstr "YV12 (raw)"
+
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:111
+msgid "H.263 (lavc)"
+msgstr "H.263 (lavc)"
+
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:127
+msgid "H.263+ (lavc)"
+msgstr "H.263+ (lavc)"
+
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:143
+msgid "MPEG-4 ASP (lavc)"
+msgstr "MPEG-4 ASP (lavc)"
+
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:159
+msgid "DV (lavc)"
+msgstr "DV (lavc)"
+
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:175
+msgid "FLV1 (lavc)"
+msgstr "FLV1 (lavc)"
+
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:191
+msgid "Snow (lavc)"
+msgstr "Snow (lavc)"
+
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:207
+msgid "FF Huffyuv (lavc)"
+msgstr "FF Huffyuv (lavc)"
+
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:223
+msgid "Huffyuv (lavc)"
+msgstr "Huffyuv (lavc)"
+
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:239
+msgid "FFV1 (lavc)"
+msgstr "FFV1 (lavc)"
+
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:257
+msgid "MJPEG (lavc)"
+msgstr "MJPEG (lavc)"
+
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:314
+msgid "VCD (lavc)"
+msgstr "VCD (lavc)"
+
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:374
+msgid "DVD (lavc)"
+msgstr "DVD (lavc)"
+
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:434
+msgid "SVCD (lavc)"
+msgstr "SVCD (lavc)"
+
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:461
+msgid "VCD (mpeg2enc)"
+msgstr "VCD (mpeg2enc)"
+
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:493
+msgid "SVCD (mpeg2enc)"
+msgstr "SVCD (mpeg2enc)"
+
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:512
+msgid "MPEG-2 requant"
+msgstr "MPEG-2 requant"
+
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:539
+msgid "DVD (mpeg2enc)"
+msgstr "DVD (mpeg2enc)"
+
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:671
+msgid "MPEG-4 ASP (Xvid4)"
+msgstr "MPEG-4 ASP (Xvid4)"
+
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:812
+msgid "MPEG-4 AVC (x264)"
+msgstr "MPEG-4 AVC (x264)"
+
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:829
+msgid "dummy"
+msgstr "dummy"
+
+#: avidemux/ADM_encoder/ADM_encCodecDesc.h:832
+#: avidemux/ADM_encoder/adm_encCopy.cpp:91
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:271
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:367
+#: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:143
+#: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:195
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:197
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:265
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:286
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:166
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:264
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:285
+#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:221
+#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:225
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:379
+#: avidemux/ADM_outputs/oplug_ogm/op_ogaudio.cpp:90
+#: avidemux/ADM_outputs/oplug_ogm/op_ogsavecopy.cpp:69
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1081
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1121
+msgid "Copy"
+msgstr "Copia"
+
+#: avidemux/ADM_encoder/adm_encdivx.h:52
+msgid "DivX"
+msgstr "DivX"
+
+#: avidemux/ADM_encoder/adm_encffmpeg.h:47
+msgid "LavCodec"
+msgstr "LavCodec"
+
+#: avidemux/ADM_encoder/adm_encmjpeg.h:60
+msgid "MJPEG"
+msgstr "MJPEG"
+
+#: avidemux/ADM_encoder/adm_encmpeg2enc.h:57
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:61
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:519
+msgid "MPEG"
+msgstr "MPEG"
+
+#: avidemux/ADM_encoder/adm_encx264.h:65
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:130
+msgid "x264"
+msgstr "x264"
+
+#: avidemux/ADM_encoder/adm_encxvid.h:61
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:129
+msgid "Xvid"
+msgstr "Xvid"
+
+#: avidemux/ADM_encoder/adm_encXvid4.h:62
+msgid "Xvid4"
+msgstr "Xvid4"
+
+#: avidemux/ADM_encoder/adm_encyv12.h:69
+msgid "YV12"
+msgstr "YV12"
+
 #: avidemux/ADM_audio/audiotimeline.cpp:85
 #: avidemux/ADM_audio/audiotimeline.cpp:96
 msgid "Building VBR map"
@@ -187,6 +337,14 @@
 "Il numero di canali ? maggiore di quello supportato dal codec audio selezionato.\n"
 "Cambia il codec o usa il filtro mixer per ridurre i canali."
 
+#: avidemux/ADM_audiofilter/audiofilter_buildchain.cpp:417
+msgid "Encoder initialization failed"
+msgstr "Inizializzazione codificatore fallita"
+
+#: avidemux/ADM_audiofilter/audiofilter_buildchain.cpp:417
+msgid "Not activated."
+msgstr "Non attivo."
+
 #: avidemux/ADM_codecs/ADM_ffmp43.cpp:45
 msgid "Internal error finding codec"
 msgstr "Errore interno nel cercare i codec"
@@ -364,6 +522,10 @@
 msgid "At the moment, the DV codec only accepts 720*576 at 25"
 msgstr "Al momento, il codec DV accetta solo 720*576 at 25"
 
+#: avidemux/ADM_encoder/adm_encRequant.cpp:98
+msgid "Requant"
+msgstr "Requant"
+
 #: avidemux/ADM_filter/filter_declaration.cpp:55
 msgid "Crop"
 msgstr "Crop"
@@ -605,11 +767,11 @@
 
 #: avidemux/ADM_filter/filter_declaration.cpp:99
 msgid "Hz Stack fields"
-msgstr ""
+msgstr "Affiancamento semiquadri"
 
 #: avidemux/ADM_filter/filter_declaration.cpp:99
 msgid "Put botj fields side by side."
-msgstr ""
+msgstr "Mette due semiquadri uno accanto all'altro."
 
 #: avidemux/ADM_filter/filter_declaration.cpp:102
 msgid "Stack fields"
@@ -1029,7 +1191,7 @@
 msgid "Size is not (s)QCIF"
 msgstr "La dimensione non ? (s)QCIF"
 
-#: avidemux/ADM_inputs/ADM_mp4/ADM_mp4Analyzer.cpp:589
+#: avidemux/ADM_inputs/ADM_mp4/ADM_mp4Analyzer.cpp:594
 msgid "Problem reading SVQ3 headers"
 msgstr "Problema di lettura delle intestazioni SVQ3"
 
@@ -1377,6 +1539,33 @@
 msgid "Error initalizing video filters"
 msgstr "Errore di inizializzazione filtri video"
 
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:256
+#: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:141
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:195
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:269
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:164
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:268
+#: avidemux/ADM_outputs/oplug_ogm/op_ogaudio.cpp:70
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:80
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:89
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:51
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:327
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:373
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:381
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:389
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:553
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:568
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:583
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:219
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1185
+#: avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp:105
+#: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:101
+#: avidemux/ADM_videoFilter/ADM_vidRotate.cpp:264
+#: avidemux/gtk_gui.cpp:2005
+#: avidemux/gtk_gui.cpp:2104
+msgid "None"
+msgstr "Nessuno"
+
 #: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:446
 #: avidemux/ADM_outputs/oplug_avi/op_avisavecopy.cpp:96
 #: avidemux/ADM_outputs/oplug_avi/op_avisavecopy_pack.cpp:121
@@ -1384,6 +1573,78 @@
 msgid "Cannot initiate save"
 msgstr "Impossibile iniziare il salvataggio"
 
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:485
+msgid "DTS"
+msgstr "DTS"
+
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:486
+#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:287
+msgid "PCM"
+msgstr "PCM"
+
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:487
+msgid "MP2"
+msgstr "MP2"
+
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:488
+msgid "MP3"
+msgstr "MP3"
+
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:489
+msgid "WMA"
+msgstr "WMA"
+
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:490
+msgid "LPCM"
+msgstr "LPCM"
+
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:491
+msgid "AC3"
+msgstr "AC3"
+
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:492
+msgid "Ogg Vorbis"
+msgstr "Ogg Vorbis"
+
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:494
+msgid "AAC"
+msgstr "AAC"
+
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:495
+msgid "QDM2"
+msgstr "QDM2"
+
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:496
+msgid "AMR-NB"
+msgstr "AMR-NB"
+
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:497
+msgid "MSADPCM"
+msgstr "MSADPCM"
+
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:498
+msgid "ULAW"
+msgstr "ULAW"
+
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:499
+msgid "IMA ADPCM"
+msgstr "IMA ADPCM"
+
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:500
+msgid "8-bit PCM"
+msgstr "PCM 8-bit"
+
+#: avidemux/ADM_outputs/oplug_avi/op_avisave.cpp:502
+msgid "Unknown codec"
+msgstr "Codec sconosciuto"
+
+#: avidemux/ADM_outputs/oplug_avi/op_avisavecopy.cpp:109
+#: avidemux/ADM_outputs/oplug_avi/op_avisavecopy_pack.cpp:134
+#: avidemux/ADM_outputs/oplug_avi/op_avisavecopy_unpack.cpp:111
+#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:223
+msgid "Saving"
+msgstr "Salvataggio in corso"
+
 #: avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp:73
 msgid ""
 "Width is not a multiple of 8\n"
@@ -1410,17 +1671,43 @@
 "\n"
 " Riutilizzare il file log esistente?"
 
+#: avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp:136
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:410
+msgid "1st Pass"
+msgstr "1a passata"
+
 #: avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp:152
 #: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:437
 msgid "Aborting"
 msgstr "Annullamento in corso"
 
+#: avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp:246
+#: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:153
+#: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:207
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:188
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:373
+#: avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp:143
+msgid "Encoding"
+msgstr "Codifica in corso"
+
+#: avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp:250
+msgid "Encoding, 2nd pass"
+msgstr "Codifica, 2a passata"
+
+#: avidemux/ADM_outputs/oplug_avi/op_savesmart.cpp:107
+msgid "Smart Copy"
+msgstr "Copia intelligente"
+
 #: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:135
 #: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:189
 #: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:156
 msgid "Cannot initialize the video stream"
 msgstr "Impossibile inizializzare il flusso video"
 
+#: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:140
+msgid "Dummy"
+msgstr "Dummy"
+
 #: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:179
 #: avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp:215
 #: avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp:233
@@ -1474,6 +1761,10 @@
 msgid "Cannot initialize the audio stream"
 msgstr "Impossibile inizializzare il flusso audio"
 
+#: avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp:467
+msgid "2nd Pass"
+msgstr "2a passata"
+
 #: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:89
 msgid "This is not MPEG compatible"
 msgstr "Non ? compatibile con MPEG"
@@ -1510,18 +1801,82 @@
 msgid "For DVD, audio must be 48 kHz MP2(stereo), AC3, DTS or LPCM (stereo)."
 msgstr "Per un DVD, l'audio deve essere MP2 (stereo), AC3, DTS o LPCM (stereo) a 48 kHz."
 
+#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:222
+msgid "---"
+msgstr "---"
+
+#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:230
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:287
+msgid "MPEG TS"
+msgstr "MPEG TS"
+
+#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:231
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:288
+msgid "MPEG VCD"
+msgstr "MPEG VCD"
+
+#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:232
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:289
+msgid "MPEG SVCD"
+msgstr "MPEG SVCD"
+
+#: avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp:233
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:290
+msgid "MPEG DVD"
+msgstr "MPEG DVD"
+
 #: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:193
 msgid "For DVD, audio must be 48 kHz MP2, AC3 or LPCM."
 msgstr "Per un DVD, l'audio deve essere MP2, AC3 o LPCM a 48 kHz."
 
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:260
+msgid "libmpeg2enc VCD"
+msgstr "VCD libmpeg2enc"
+
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:263
+msgid "libmpeg2enc SVCD"
+msgstr "SVCD libmpeg2enc"
+
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:266
+msgid "libmpeg2enc DVD"
+msgstr "DVD libmpeg2enc"
+
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:269
+msgid "FFmpeg MPEG-1 VBR"
+msgstr "MPEG-1 VBR FFmpeg"
+
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:272
+msgid "FFmpeg MPEG-2 SVCD VBR"
+msgstr "MPEG-2 SVCD VBR FFmpeg"
+
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:275
+msgid "FFmpeg MPEG-2 DVD VBR"
+msgstr "MPEG-2 DVD VBR FFmpeg"
+
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:278
+msgid "MPEG Requantizer"
+msgstr "MPEG Requantizer"
+
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:286
+msgid "MPEG ES"
+msgstr "MPEG ES"
+
 #: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:305
 msgid "Reuse log file ?"
 msgstr "Riutilizzare il file log?"
 
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:311
+msgid "Pass 1/2"
+msgstr "Passata 1/2"
+
 #: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:320
 msgid "Error in pass 1"
 msgstr "Errore nella passata 1"
 
+#: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:371
+msgid "Pass 2/2"
+msgstr "Passata 2/2"
+
 #: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:463
 msgid "Error in pass 2"
 msgstr "Errore nella passata 2"
@@ -1534,6 +1889,18 @@
 msgid "Could not initialize audio"
 msgstr "Impossibile avviare l'audio"
 
+#: avidemux/ADM_outputs/oplug_ogm/op_ogsavecopy.cpp:70
+msgid "Saving..."
+msgstr "Salvataggio in corso..."
+
+#: avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp:111
+msgid "Pass one"
+msgstr "Passata 1"
+
+#: avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp:139
+msgid "Pass 2"
+msgstr "Passata 2"
+
 #: avidemux/ADM_script/ADM_JSFunctions.cpp:238
 msgid "Select a directory"
 msgstr "Seleziona una cartella"
@@ -1632,26 +1999,6 @@
 msgid "Resampling frequency (Hz)"
 msgstr "Frequenza di ricampionamento (Hz)"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:80
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:89
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:51
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:327
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:373
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:381
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_coloryuv.cpp:389
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:553
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:568
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp:583
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_vobsub.cpp:219
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1188
-#: avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp:105
-#: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:101
-#: avidemux/ADM_videoFilter/ADM_vidRotate.cpp:264
-#: avidemux/gtk_gui.cpp:2005
-#: avidemux/gtk_gui.cpp:2104
-msgid "None"
-msgstr "Nessuno"
-
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp:81
 msgid "Film to PAL"
 msgstr "Da film a PAL"
@@ -1766,14 +2113,6 @@
 msgid "Video Codecs"
 msgstr "Codec video"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:129
-msgid "Xvid"
-msgstr "Xvid"
-
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:130
-msgid "x264"
-msgstr "x264"
-
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp:135
 msgid "Audio Codecs"
 msgstr "Codec audio"
@@ -2031,11 +2370,6 @@
 msgid "H.263"
 msgstr "H.263"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:61
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_calculator.cpp:519
-msgid "MPEG"
-msgstr "MPEG"
-
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavcodec.cpp:65
 msgid "MB comparison"
 msgstr "Confronto MB"
@@ -2149,11 +2483,11 @@
 msgstr "Opzioni decodificatore"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_mjpeg.cpp:37
-msgid "_Swap U&V:"
-msgstr "_Inverti U e V:"
+msgid "_Swap U&V"
+msgstr "_Inverti U e V"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_mjpeg.cpp:39
-msgid "Mjpeg Configuration"
+msgid "MJPEG Configuration"
 msgstr "Configurazione Mjpeg"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp:92
@@ -2439,10 +2773,6 @@
 msgid "_Message level:"
 msgstr "Livello _messaggio:"
 
-#: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:287
-msgid "PCM"
-msgstr "PCM"
-
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:288
 msgid "Master"
 msgstr "Master"
@@ -2526,12 +2856,12 @@
 msgstr "Automazione"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:380
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp:438
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp:543
 msgid "Input"
 msgstr "Input"
 
 #: avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp:384
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp:439
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp:544
 msgid "Output"
 msgstr "Output"
 
@@ -4485,7 +4815,7 @@
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:283
 msgid "Codec 4CC:"
-msgstr "Codec 4CC:"
+msgstr "4CC Codec:"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_properties.cpp:297
 msgid "Aspect Ratio:"
@@ -4890,6 +5220,7 @@
 msgstr "Imposta proporzioni comuni predefinite"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:874
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1040
 msgid "As Input"
 msgstr "Come in ingresso"
 
@@ -5054,17 +5385,17 @@
 msgid "B-Frame Direct Mode"
 msgstr "Modalit? diretta fotogrammi-B "
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1185
-msgid "Auto"
-msgstr "Auto"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1186
+msgid "Spatial"
+msgstr "Spaziale"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1186
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1187
 msgid "Temporal"
 msgstr "Temporale"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1187
-msgid "Spatial"
-msgstr "Spaziale"
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1188
+msgid "Auto"
+msgstr "Auto"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_x264.cpp:1190
 msgid "<b>B-Frames</b>"
@@ -5646,10 +5977,6 @@
 msgid "Produces nicer-looking B-frames"
 msgstr "Produce fotogrammi-B migliori"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1040
-msgid "As input"
-msgstr "Come in ingresso"
-
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_xvid4.cpp:1043
 msgid "Get PAR from input video file"
 msgstr "Recupera proporzioni dal video in ingresso"
@@ -6083,11 +6410,11 @@
 msgid "Save as script"
 msgstr "Salva come script"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp:440
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp:545
 msgid "Side"
 msgstr "Laterale"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp:441
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp:546
 #: avidemux/ADM_videoFilter/ADM_vidDecTelecide.cpp:90
 #: avidemux/ADM_videoFilter/ADM_vidDGbob.cpp:81
 #: avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp:87
@@ -6095,11 +6422,11 @@
 msgid "Top"
 msgstr "Alto"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp:442
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp:547
 msgid "Separate"
 msgstr "Separati"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp:621
+#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp:721
 #, c-format
 msgid "Frame:%c(%02d)"
 msgstr "Fotogramma: %c(%02d)"
@@ -6457,11 +6784,6 @@
 msgid "Bitrate/size calculator"
 msgstr "Calcolatrice bitrate/dimensione"
 
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1081
-#: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1121
-msgid "Copy"
-msgstr "Copia"
-
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:1086
 msgid "Configure video encoder"
 msgstr "Configura codificatore video"
@@ -7391,11 +7713,11 @@
 
 #: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:137
 msgid "DG at UWA format (includes shape info & bounding box)"
-msgstr ""
+msgstr "Formato DG at UWA (include info sulla forma & rettangolo di contenimento)"
 
 #: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:139
 msgid "AB at ODU format (includes shape info)"
-msgstr ""
+msgstr "Formato AB at ODU (include info sulla forma)"
 
 #: avidemux/ADM_videoFilter/ADM_vidParticle.cpp:141
 msgid "Old format that Tracker3D can't read directly"

Copied: branches/avidemux_2.5_branch_gruntster/po/qt_fr.ts (from rev 3986, branches/avidemux_2.4_branch/po/qt_fr.ts)



From gruntster at mail.berlios.de  Sun Apr 27 04:48:40 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Sun, 27 Apr 2008 04:48:40 +0200
Subject: [Avidemux-svn-commit] r3988 - in
	branches/avidemux_2.5_branch_gruntster/avidemux: ADM_editor
	ADM_encoder ADM_script ADM_userInterfaces/ADM_GTK
	plugins/ADM_videoEncoder/ADM_vidEnc_x264
	plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4
Message-ID: <200804270248.m3R2meqs003530@sheep.berlios.de>

Author: gruntster
Date: 2008-04-27 04:48:33 +0200 (Sun, 27 Apr 2008)
New Revision: 3988

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edLoadSave.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_pluginLoad.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encoder.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSAvidemuxVideo.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSAvidemuxVideo.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ui_support.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/options.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp
Log:
[x264] save/load javascript using XML

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edLoadSave.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edLoadSave.cpp	2008-04-26 19:45:40 UTC (rev 3987)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edLoadSave.cpp	2008-04-27 02:48:33 UTC (rev 3988)
@@ -165,28 +165,33 @@
 //___________________________
         qfprintf(fd,"\n//** Filters **\n");
         filterSaveScriptJS(fd);
+
 // Video codec
 //___________________________
-uint8_t  *extraData ;
-uint32_t extraDataSize;
-char *pth;
-        qfprintf(fd,"\n//** Video Codec conf **\n");
-        videoCodecGetConf(&extraDataSize,&extraData);
-        
-        pth= ADM_cleanupPath(name );
-        qfprintf(fd,"app.video.codec(\"%s\",\"%s\",\"",videoCodecGetName(),videoCodecGetMode());
-        ADM_dealloc(pth);
-        // Now deal with extra data
-        qfprintf(fd,"%d ",extraDataSize);
-        if(extraDataSize)
-        {
-                for(int i=0;i<extraDataSize;i++)
-                {
-                        qfprintf(fd,"%02x ",extraData[i]);
-                }
+		uint8_t *extraData;
+		uint32_t extraDataSize;
 
-        }
-        qfprintf(fd,"\");\n");
+		qfprintf(fd, "\n//** Video Codec conf **\n");
+		videoCodecGetConf(&extraDataSize, &extraData);
+
+		if (videoCodecGetType() == CodecExternal)
+		{
+			qfprintf(fd, "app.video.codecPlugin(\"%s\", \"%s\", \"%s\");\n", videoCodecPluginGetGuid(), videoCodecGetName(), videoCodecGetMode());
+			qfprintf(fd, "app.video.codecConf(\"%s\");\n", extraData);
+		}
+		else
+		{
+			qfprintf(fd, "app.video.codec(\"%s\", \"%s\", \"", videoCodecGetName(), videoCodecGetMode());
+
+			// Now deal with extra data
+			qfprintf(fd, "%d ", extraDataSize);
+
+			if (extraDataSize)
+				for(int i = 0; i < extraDataSize; i++)
+					qfprintf(fd, "%02x ", extraData[i]);
+
+			qfprintf(fd, "\");\n");
+		}
         
 // Audio Source
 //______________________________________________

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_pluginLoad.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_pluginLoad.cpp	2008-04-26 19:45:40 UTC (rev 3987)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_pluginLoad.cpp	2008-04-27 02:48:33 UTC (rev 3988)
@@ -123,7 +123,6 @@
 
 	memset(files, 0, sizeof(char *)*MAX_EXTERNAL_FILTER);
 	printf("[ADM_vidEnc_plugin] Scanning directory %s\n", path);
-	fflush(stdout);
 
 	if (!buildDirectoryContent(&nbFile, path, files, MAX_EXTERNAL_FILTER, SHARED_LIB_EXT))
 		printf("[ADM_vidEnc_plugin] Cannot parse plugin\n");
@@ -158,8 +157,10 @@
 
 		param->codec = CodecExternal;
 		param->menuName = displayName;
-		param->tagName = displayName;
+		param->tagName = codecName;
 		param->extra_param = i;
+		param->extraSettings = NULL;
+		param->extraSettingsLen = 0;
 
 		int length = plugin->getOptions(plugin->encoderId, NULL, NULL, 0);
 		char *pluginOptions = new char[length + 1];
@@ -174,10 +175,12 @@
 	return 1;
 }
 
-void updateCompressionParameters(COMPRES_PARAMS *params, int encodeMode, int encodeModeParameter, char* extraSettings, int extraSettingsLength)
+void updateCompressionParameters(COMPRES_PARAMS *params, int encodeMode, int encodeModeParameter, char *extraSettings, int extraSettingsLength)
 {
 	COMPRESSION_MODE compressMode = getCompressionMode(encodeMode);
 
+	params->mode = compressMode;
+
 	switch (compressMode)
 	{
 		case COMPRESS_CBR:

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.cpp	2008-04-26 19:45:40 UTC (rev 3987)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.cpp	2008-04-27 02:48:33 UTC (rev 3988)
@@ -42,7 +42,6 @@
 // Some static stuff
 void setVideoEncoderSettings(COMPRESSION_MODE mode, uint32_t param, uint32_t extraConf, uint8_t *extraData);
 static void encoderPrint(void);
-static const char *encoderGetName(void);
 
 #include "adm_encConfig.h"
 #include "adm_encoder.h"
@@ -77,8 +76,6 @@
 SelectCodecType currentCodecType = CodecCopy;
 int currentCodecIndex = 0;
 
-uint8_t loadVideoCodecConf (char *name);
-uint8_t saveVideoCodecConf (char *name);
 uint8_t mk_hex (uint8_t a, uint8_t b);
 
 CodecFamilty videoCodecGetFamily(void)
@@ -148,7 +145,7 @@
 		go = cs + equal + 1;
 		*(cs + equal) = 0;
 		iparam = atoi (cs + equal + 1);
-		printf ("codec conf is %s\n", cs);
+		printf ("Codec conf is %s\n", cs);
 
 		// search the codec
 		if (!strcasecmp (cs, "aq"))
@@ -324,11 +321,6 @@
 	prefs->set (CODECS_PREFERREDCODEC, AllVideoCodec[currentCodecIndex].tagName);
 }
 
-const char* encoderGetName(void)
-{
-	return AllVideoCodec[currentCodecIndex].tagName;
-}
-
 SelectCodecType videoCodecGetType(void)
 {
 	return currentCodecType;
@@ -348,7 +340,7 @@
 		if (!strcasecmp(name, AllVideoCodec[i].tagName))
 		{
 			printf ("\n Codec %s found\n", name);
-			videoCodecSetcodec (AllVideoCodec[i].codec);
+			videoCodecSetCodec(i);
 
 			return 1;
 		}
@@ -362,6 +354,38 @@
 
 	return 0;
 }
+
+int videoCodecPluginSelectByGuid(const char *guid)
+{
+	int encoderCount = encoderGetEncoderCount();
+
+	for (int i = 0; i < encoderCount; i++)
+	{
+		if (AllVideoCodec[i].codec == CodecExternal)
+		{
+			ADM_vidEnc_plugin *plugin = getVideoEncoderPlugin(AllVideoCodec[i].extra_param);
+			const char* encoderGuid = plugin->getEncoderGuid(plugin->encoderId);
+
+			if (strcmp(encoderGuid, guid) == 0)
+			{
+				printf ("Codec plugin %s (%s) found\n", plugin->getEncoderName(plugin->encoderId), encoderGuid);
+				videoCodecSetCodec(i);
+
+				return 1;
+			}
+		}
+	}
+
+	return 0;
+}
+
+const char* videoCodecPluginGetGuid(void)
+{
+	ADM_vidEnc_plugin *plugin = getVideoEncoderPlugin(AllVideoCodec[currentCodecIndex].extra_param);
+
+	return plugin->getEncoderGuid(plugin->encoderId);
+}
+
 const char *videoCodecGetMode(void)
 {
 	uint8_t *data;
@@ -396,20 +420,9 @@
 	return string;
 }
 
-const char *
-videoCodecGetName (void)
+const char *videoCodecGetName(void)
 {
-  int nb = encoderGetEncoderCount ();
-  for (uint32_t i = 0; i < nb; i++)
-    {
-      if (currentCodecType == AllVideoCodec[i].codec)
-	{
-	  return AllVideoCodec[i].tagName;
-	}
-
-    }
-  printf ("\n Mmmm get video codec name failed..\n");
-  return NULL;
+	return AllVideoCodec[currentCodecIndex].tagName;
 }
 
 ///
@@ -423,9 +436,10 @@
 
 }
 
-void videoCodecSetcodec (SelectCodecType codec)
+void videoCodecSetCodec(int codecIndex)
 {
-	currentCodecType = codec;
+	currentCodecIndex = codecIndex;
+	currentCodecType = AllVideoCodec[codecIndex].codec;
 	encoderPrint();
 }
 
@@ -434,11 +448,9 @@
 	if (codecIndex == -1)
 		codecIndex = currentCodecIndex;
 
-	printf ("Configuring codec: %d\n", codecIndex);
-
 	COMPRES_PARAMS *param = &AllVideoCodec[codecIndex];
 
-	if (currentCodecType == CodecExternal)
+	if (AllVideoCodec[codecIndex].codec == CodecExternal)
 	{
 		ADM_vidEnc_plugin *plugin = getVideoEncoderPlugin(param->extra_param);
 		vidEncOptions encodeOptions;
@@ -522,7 +534,7 @@
 			ADM_assert(0);
 	}
 
-	if (zparam->extra_param)
+	if (zparam->codec == CodecExternal)
 	{
 		ADM_vidEnc_plugin *plugin = getVideoEncoderPlugin(zparam->extra_param);
 		vidEncOptions options;
@@ -546,10 +558,10 @@
 	else if (extraConf && extraData && zparam->extraSettingsLen)
 	{
 		if (zparam->extraSettingsLen != extraConf)
-			printf("\n*** ERROR : Extra data for codec config has a different size!!! *****\n");
+			printf("*** ERROR : Extra data for codec config has a different size!!! *****\n");
 		else
 		{
-			printf ("\n using %u bytes of codec specific data...\n", extraConf);
+			printf ("using %u bytes of codec specific data...\n", extraConf);
 			memcpy (zparam->extraSettings, extraData, extraConf);
 		}
 	}
@@ -630,47 +642,53 @@
 */
 uint8_t loadVideoCodecConf (char *name)
 {
-	FILE *fd = NULL;
-	char str[4000];
-	char str_extra[4000];
-	char str_tmp[4000];
-	uint32_t nb;
-	uint32_t extraSize = 0;
-	uint8_t *extra = NULL;
+	if (currentCodecType == CodecExternal)
+		videoCodecSetConf(strlen(name), (uint8_t*)name);
+	else
+	{
+		FILE *fd = NULL;
+		char str[4000];
+		char str_extra[4000];
+		char str_tmp[4000];
+		uint32_t nb;
+		uint32_t extraSize = 0;
+		uint8_t *extra = NULL;
 
-	fd = fopen (name, "rt");
+		fd = fopen (name, "rt");
 
-	if (!fd)
-	{
-		printf ("Trouble reading codec conf\n");
-		return 0;
-	}
+		if (!fd)
+		{
+			printf ("Trouble reading codec conf\n");
+			return 0;
+		}
 
-	fscanf (fd, "%s\n", str);
-	// and video codec
-	fscanf (fd, "Video codec : %s\n", str);
-	videoCodecSelectByName (str);
+		fscanf (fd, "%s\n", str);
+		// and video codec
+		fscanf (fd, "Video codec : %s\n", str);
+		videoCodecSelectByName (str);
 
-	fgets (str, 200, fd);		// here we got the conf
-	fscanf (fd, "Video extraConf size : %lu\n", &extraSize);
+		fgets (str, 200, fd);		// here we got the conf
+		fscanf (fd, "Video extraConf size : %lu\n", &extraSize);
 
-	if (extraSize)
-	{
-		uint8_t *ptr;
-		fgets (str_tmp, 3999, fd);
-		ptr = (uint8_t *) str_tmp;
+		if (extraSize)
+		{
+			uint8_t *ptr;
+			fgets (str_tmp, 3999, fd);
+			ptr = (uint8_t *) str_tmp;
 
-		for (uint32_t k = 0; k < extraSize; k++)
-		{
-			str_extra[k] = mk_hex (*ptr, *(ptr + 1));
-			ptr += 3;
+			for (uint32_t k = 0; k < extraSize; k++)
+			{
+				str_extra[k] = mk_hex (*ptr, *(ptr + 1));
+				ptr += 3;
+			}
+
+			extra = (uint8_t *) str_extra;
 		}
 
-		extra = (uint8_t *) str_extra;
+		videoCodecSetConf(extraSize, extra);
+		fclose (fd);
 	}
 
-	videoCodecSetConf (str, extraSize, extra);
-	fclose (fd);
 	return 1;
 }
 
@@ -701,7 +719,7 @@
 		}
 
 		extra = (uint8_t *)str_extra;
-		videoCodecSetConf(str, extraSize, extra);
+		videoCodecSetConf(extraSize, extra);
 	}
 
 	return 1;
@@ -732,11 +750,6 @@
 
 uint8_t videoCodecGetConf (uint32_t * optSize, uint8_t ** data)
 {
-	static char conf[4000];
-	static char tmp[2000];
-	uint32_t confSize = 0;
-	conf[0] = 0;
-
 	*optSize = 0;
 	*data = NULL;
 
@@ -744,21 +757,32 @@
 
 	if (param->extraSettingsLen)
 	{
-		*data = (uint8_t *) param->extraSettings;
+		*data = (uint8_t*)param->extraSettings;
 		*optSize = param->extraSettingsLen;
 	}
 
-	confSize = *optSize;
-	printf ("Conf size : %d\n", confSize);
+	printf ("Conf size: %d\n", *optSize);
+
 	return 1;
 }
 
-void videoCodecSetConf(char *name, uint32_t extraLen, uint8_t *extraData)
+void videoCodecSetConf(uint32_t extraLen, uint8_t *extraData)
 {
 	COMPRES_PARAMS *param = &AllVideoCodec[currentCodecIndex];
 
-	if (extraLen)
+	if (param->codec == CodecExternal)
 	{
+		if (param->extraSettings)
+			delete [] (char*)param->extraSettings;
+
+		param->extraSettings = new char[extraLen + 1];
+		param->extraSettingsLen = extraLen;
+
+		memcpy(param->extraSettings, extraData, extraLen);
+		((char*)param->extraSettings)[extraLen] = 0;
+	}
+	else if (extraLen)
+	{
 		if (extraLen != param->extraSettingsLen)
 		{
 			printf("Codec:%s\n", param->descriptor);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.h	2008-04-26 19:45:40 UTC (rev 3987)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.h	2008-04-27 02:48:33 UTC (rev 3988)
@@ -1,21 +1,25 @@
-#ifndef _ADM_encoder_Config_
-#define _ADM_encoder_Config_
+#ifndef adm_encConfig_h
+#define adm_encConfig_h
 
-void saveEncoderConfig (void);
-void loadEncoderConfig (void);
+#include "ADM_vidEncode.hxx"
 
-const char *videoCodecGetName (void);
+void saveEncoderConfig(void);
+void videoCodecSetCodec(int codecIndex);
+int videoCodecConfigure(char *cmdString, uint32_t optionSize, uint8_t * option);
+
+const char *videoCodecGetName(void);
 int videoCodecSelectByName (const char *name);
+int videoCodecPluginSelectByGuid(const char *guid);
 
+SelectCodecType videoCodecGetType(void);
+const char* videoCodecPluginGetGuid(void);
+void videoCodecSetConf(uint32_t extraLen, uint8_t * extraData);
+uint8_t videoCodecGetConf(uint32_t * nbData, uint8_t ** data);
 
-void videoCodecSetConf (char *name, uint32_t extraLen, uint8_t * extraData);
-uint8_t videoCodecGetConf (uint32_t * nbData, uint8_t ** data);
-
 // Returns the mode (CQ/CBR...) as a string, suitable for a script
-const char *videoCodecGetMode (void);
-uint8_t videoCodecSetFinalSize (uint32_t size);
+const char *videoCodecGetMode(void);
+uint8_t videoCodecSetFinalSize(uint32_t size);
 
-//
 void setPSP_X264Preset(void);
 void setIpod_Xvid4Preset(void);
-#endif
+#endif	// adm_encConfig_h

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encoder.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encoder.h	2008-04-26 19:45:40 UTC (rev 3987)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encoder.h	2008-04-27 02:48:33 UTC (rev 3988)
@@ -114,6 +114,4 @@
 extern void videoCodecConfigureUI(int codecIndex = -1);
 extern int videoCodecConfigure (char *p, uint32_t i, uint8_t * c);
 extern void videoCodecSelect (void);
-extern void videoCodecSetcodec (SelectCodecType codec);
-extern uint8_t EncoderSaveMpeg (const char *name);
 #endif

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSAvidemuxVideo.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSAvidemuxVideo.cpp	2008-04-26 19:45:40 UTC (rev 3987)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSAvidemuxVideo.cpp	2008-04-27 02:48:33 UTC (rev 3988)
@@ -27,22 +27,16 @@
 #include "ADM_encoder/adm_encConfig.h"
 #include "ADM_editor/ADM_outputfmt.h"
 #include "../ADM_userInterfaces/ADM_commonUI/GUI_ui.h"
-
-
 #include "ADM_script/ADM_container.h"
 
 extern VF_FILTERS filterGetTagFromName(char *inname);
-//extern uint8_t indexMpeg(char *mpeg,char *file,uint8_t aid);
 extern uint8_t A_ListAllBlackFrames( char *file );
 extern uint8_t loadVideoCodecConfString( char *name);
 extern uint8_t ADM_saveRaw (const char *name);
 extern int A_saveJpg (char *name);
 extern uint8_t loadVideoCodecConf( char *name);
-extern int videoCodecConfigure(char *p,uint32_t i, uint8_t  *c);
-
 extern void filterCleanUp( void );
 
-
 JSPropertySpec ADM_JSAvidemuxVideo::avidemuxvideo_properties[] = 
 { 
         { "process", videoprocess_prop, JSPROP_ENUMERATE },        // process video when saving
@@ -56,6 +50,7 @@
         { "clearFilters", ClearFilters, 0, 0, 0 }, // Delete all filters
 	{ "addFilter", AddFilter, 10, 0, 0 },	// Add filter to filter chain
 	{ "codec", Codec, 3, 0, 0 },	// Set the video codec
+	{ "codecPlugin", codecPlugin, 3, 0, 0 },	// Set the video codec plugin
 	{ "codecConf", CodecConf, 1, 0, 0 },	// load video codec config
 	{ "save", Save, 1, 0, 0 },	// save video portion of the stream
 	{ "saveJpeg", SaveJPEG, 1, 0, 0 },	// save the current frame as a JPEG
@@ -288,22 +283,70 @@
         return JS_TRUE;
 }// end Codec
 
+JSBool ADM_JSAvidemuxVideo::codecPlugin(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
+{
+	*rval = BOOLEAN_TO_JSVAL(false);
+
+	if (argc > 3)
+		return JS_FALSE;
+
+	printf("Codec Plugin ... \n");
+
+	if (!JSVAL_IS_STRING(argv[0]) || !JSVAL_IS_STRING(argv[1]) || !JSVAL_IS_STRING(argv[2]))
+		return JS_FALSE;
+
+	printf("[guid] %s\n", JS_GetStringBytes(JSVAL_TO_STRING(argv[0])));
+	printf("[desc] %s\n", JS_GetStringBytes(JSVAL_TO_STRING(argv[1])));
+	printf("[conf] %s\n", JS_GetStringBytes(JSVAL_TO_STRING(argv[2])));
+
+	char *guid = JS_GetStringBytes(JSVAL_TO_STRING(argv[0]));
+	char *desc = JS_GetStringBytes(JSVAL_TO_STRING(argv[1]));
+	char *conf = JS_GetStringBytes(JSVAL_TO_STRING(argv[2]));
+
+	enterLock();
+
+	if (!videoCodecPluginSelectByGuid(guid))
+		*rval = BOOLEAN_TO_JSVAL(false);
+	else
+	{
+		// now do the conf
+		// format CBR=bitrate in kbits
+		//	  CQ=Q
+		//	  2 Pass=size
+		// We have to replace
+		if (!videoCodecConfigure(conf, 0, NULL))
+			*rval = BOOLEAN_TO_JSVAL(false);
+		else
+			*rval = BOOLEAN_TO_JSVAL(true);
+	}
+
+	leaveLock();
+
+	return JS_TRUE;
+}
+
 JSBool ADM_JSAvidemuxVideo::CodecConf(JSContext *cx, JSObject *obj, uintN argc, 
                                        jsval *argv, jsval *rval)
-{// begin CodecConf
-        *rval = BOOLEAN_TO_JSVAL(false);
-        if(argc != 1)
-                return JS_FALSE;
-        if(JSVAL_IS_STRING(argv[0]) == false)
-                return JS_FALSE;
-        char *pTempStr = JS_GetStringBytes(JSVAL_TO_STRING(argv[0]));
-        printf("Codec Conf Video \"%s\"\n",pTempStr);
-        enterLock();
-        *rval = INT_TO_JSVAL(loadVideoCodecConf(pTempStr));
-        leaveLock();
-        return JS_TRUE;
-}// end CodecConf
+{
+	*rval = BOOLEAN_TO_JSVAL(false);
 
+	if (argc != 1)
+		return JS_FALSE;
+
+	if (!JSVAL_IS_STRING(argv[0]))
+		return JS_FALSE;
+
+	char *pTempStr = JS_GetStringBytes(JSVAL_TO_STRING(argv[0]));
+
+	printf("Codec Conf Video \"%s\"\n", pTempStr);
+
+	enterLock();
+	*rval = INT_TO_JSVAL(loadVideoCodecConf(pTempStr));
+	leaveLock();
+
+	return JS_TRUE;
+}
+
 JSBool ADM_JSAvidemuxVideo::Save(JSContext *cx, JSObject *obj, uintN argc, 
                                        jsval *argv, jsval *rval)
 {// begin Save

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSAvidemuxVideo.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSAvidemuxVideo.h	2008-04-26 19:45:40 UTC (rev 3987)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSAvidemuxVideo.h	2008-04-27 02:48:33 UTC (rev 3988)
@@ -25,6 +25,7 @@
 	static JSBool AddFilter(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
 	static JSBool IndexMPEG(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
 	static JSBool Codec(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
+	static JSBool codecPlugin(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
 	static JSBool CodecConf(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
 	static JSBool Save(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
 	static JSBool SaveJPEG(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ui_support.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ui_support.cpp	2008-04-26 19:45:40 UTC (rev 3987)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ui_support.cpp	2008-04-27 02:48:33 UTC (rev 3988)
@@ -38,6 +38,6 @@
 {
 	char *pluginDir = ADM_getPluginPath();
 
-	loadVideoEncoderPlugins(ADM_VIDENC_UI_CLI, pluginDir);
+	loadVideoEncoderPlugins(ADM_VIDENC_UI_GTK, pluginDir);
 	delete [] pluginDir;
 }

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.cpp	2008-04-26 19:45:40 UTC (rev 3987)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.cpp	2008-04-27 02:48:33 UTC (rev 3988)
@@ -125,15 +125,17 @@
 
 int x264Encoder::setOptions(vidEncOptions *encodeOptions, char *pluginOptions)
 {
-	if (_options.fromXml(pluginOptions))
-	{
+	bool success = true;
+
+	if (pluginOptions)
+		success = _options.fromXml(pluginOptions);
+
+	if (encodeOptions && success)
 		memcpy(&_encodeOptions, encodeOptions, sizeof(vidEncOptions));
-		updateParameters();
 
-		return 1;
-	}
-	else
-		return 0;
+	updateParameters();
+
+	return success;
 }
 
 void x264Encoder::updateParameters(void)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/options.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/options.cpp	2008-04-26 19:45:40 UTC (rev 3987)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/options.cpp	2008-04-27 02:48:33 UTC (rev 3988)
@@ -1283,8 +1283,26 @@
 		xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"accessUnitDelimiters", boolean2String(xmlBuffer, bufferSize, getAccessUnitDelimiters()));
 		xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"spsIdentifier", number2String(xmlBuffer, bufferSize, getSpsIdentifier()));
 
-		xmlDocDumpFormatMemory(xmlDoc, &tempBuffer, &tempBufferSize, 1);
+		xmlDocDumpMemory(xmlDoc, &tempBuffer, &tempBufferSize);
 
+		// remove carriage returns (even though libxml was instructed not to format the XML)
+		xmlChar* bufferChar = tempBuffer;
+		int bufferCharIndex = 0;
+
+		while (*bufferChar != '\0')
+		{
+			if (*bufferChar == '\n')
+			{
+				memmove(bufferChar, bufferChar + 1, tempBufferSize - bufferCharIndex);
+				tempBufferSize--;
+			}
+			else if (*bufferChar == '\"')
+				*bufferChar = '\'';
+
+			bufferChar++;
+			bufferCharIndex++;
+		}
+
 		xml = new char[tempBufferSize + 1];
 		memcpy(xml, tempBuffer, tempBufferSize);
 		xml[tempBufferSize] = 0;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp	2008-04-26 19:45:40 UTC (rev 3987)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp	2008-04-27 02:48:33 UTC (rev 3988)
@@ -428,6 +428,8 @@
 
 void x264ConfigDialog::saveSettings(vidEncOptions *encodeOptions, x264Options *options)
 {
+	encodeOptions->structSize = sizeof(vidEncOptions);
+
 	// General tab
 	switch (ui.encodingModeComboBox->currentIndex())
 	{



From gruntster at mail.berlios.de  Sun Apr 27 15:40:52 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Sun, 27 Apr 2008 15:40:52 +0200
Subject: [Avidemux-svn-commit] r3989 -
	branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters
Message-ID: <200804271340.m3RDeqCb020903@sheep.berlios.de>

Author: gruntster
Date: 2008-04-27 15:40:51 +0200 (Sun, 27 Apr 2008)
New Revision: 3989

Modified:
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/CMakeLists.txt
Log:
[CMake] mark Qt4 source file as generated

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/CMakeLists.txt
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/CMakeLists.txt	2008-04-27 02:48:33 UTC (rev 3988)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/CMakeLists.txt	2008-04-27 13:40:51 UTC (rev 3989)
@@ -11,9 +11,9 @@
 mainfilter
 )
 
-################################
+SET_SOURCE_FILES_PROPERTIES(filter_rsc.cpp PROPERTIES GENERATED TRUE)
+
 include(adm_qt4)
-################################
 Q_RCC(filter)
 
 include_directories(.. ../../../ADM_osSupport ../../../ADM_inputs)



From mean at mail.berlios.de  Sun Apr 27 19:20:20 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 27 Apr 2008 19:20:20 +0200
Subject: [Avidemux-svn-commit] r3990 - in
	branches/avidemux_2.5_branch_gruntster/avidemux: .
	ADM_coreImage/include ADM_filter
	ADM_userInterfaces/ADM_GTK/ADM_filters
	ADM_userInterfaces/ADM_QT4/ADM_filters
Message-ID: <200804271720.m3RHKKtj024879@sheep.berlios.de>

Author: mean
Date: 2008-04-27 19:20:19 +0200 (Sun, 27 Apr 2008)
New Revision: 3990

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/include/ADM_videoFilter.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/include/ADM_videoFilter_internal.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter_declaration.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter_dylib.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter_saveload.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/vidVCD.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_preview.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/Q_mainfilter.cpp
Log:
[Merge] Remove resize etc for the moment from metafilters


Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/include/ADM_videoFilter.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/include/ADM_videoFilter.h	2008-04-27 13:40:51 UTC (rev 3989)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/include/ADM_videoFilter.h	2008-04-27 17:20:19 UTC (rev 3990)
@@ -15,7 +15,7 @@
  *                                                                         *
  ***************************************************************************/
  
-#define ADM_FILTER_API_VERSION 1
+#define ADM_FILTER_API_VERSION 2
 /**
 	Note for filter writers :
 
@@ -91,34 +91,49 @@
 
 
 
- class AVDMGenericVideoStream
- {
-   protected:
-      	ADV_Info 					_info;
-   	  ADMImage   					*_uncompressed;
-	  AVDMGenericVideoStream 	*_in;
-/* not really used */
-          uint8_t		getPixel(int32_t x,int32_t y,uint8_t *data);
-          uint8_t		getPixelU(int32_t x,int32_t y,uint8_t *data);
-          uint8_t		setPixelU(uint8_t val,int32_t x,int32_t y,uint8_t *data);
-          uint8_t 	unPackChroma(uint8_t *ssrc,uint8_t *ddst);
-/* /not really used */
-   public:
-          virtual uint32_t   getPARWidth(void);
-          virtual uint32_t   getPARHeight(void);
+ class AVDMGenericVideoStream {
+protected:
+	ADV_Info _info;
+	ADMImage *_uncompressed;
+	AVDMGenericVideoStream *_in;
+	/* not really used */
+	uint8_t getPixel(int32_t x, int32_t y, uint8_t *data);
+	uint8_t getPixelU(int32_t x, int32_t y, uint8_t *data);
+	uint8_t setPixelU(uint8_t val, int32_t x, int32_t y, uint8_t *data);
+	uint8_t unPackChroma(uint8_t *ssrc, uint8_t *ddst);
+	/* /not really used */
+public:
+	virtual uint32_t getPARWidth(void);
+	virtual uint32_t getPARHeight(void);
 
-   	// return 1 -> conf changed need rebuild, 0 means conf not changed
-        virtual 	uint8_t 	configure( AVDMGenericVideoStream *instream)=0;
-          			AVDMGenericVideoStream( void)  {_uncompressed=NULL;_in=NULL;};
-  	virtual 		~AVDMGenericVideoStream( ) {};
-        virtual char 	*printConf(void) { static char *str=(char *)"."; return str;};
+	// return 1 -> conf changed need rebuild, 0 means conf not changed
+	virtual uint8_t configure(AVDMGenericVideoStream *instream)=0;
+	AVDMGenericVideoStream(void) {
+		_uncompressed=NULL;
+		_in=NULL;
+	}
+	;
+	virtual ~AVDMGenericVideoStream() {
+	}
+	;
+	virtual char *printConf(void) {
+		static char *str=(char *)".";
+		return str;
+	}
+	;
 
-        virtual uint8_t 	getFrameNumberNoAlloc(uint32_t frame, uint32_t *len,
-          							ADMImage *data,uint32_t *flags)=0;
-          	ADV_Info 	*getInfo( void ) { return &_info;};
-         virtual uint8_t	getCoupledConf( CONFcouple **couples)
-	  				{*couples=NULL;return 0;};
- };
+	virtual uint8_t getFrameNumberNoAlloc(uint32_t frame, uint32_t *len,
+			ADMImage *data, uint32_t *flags)=0;
+	ADV_Info *getInfo(void) {
+		return &_info;
+	}
+	;
+	virtual uint8_t getCoupledConf(CONFcouple **couples) {
+		*couples=NULL;
+		return 0;
+	}
+	;
+};
 
 void     DIA_previewInit(uint32_t width, uint32_t height);
 uint8_t  DIA_previewUpdate(uint8_t *data);
@@ -189,5 +204,6 @@
  AVDMGenericVideoStream *getFirstCurrentVideoFilter( void);
 // 
 #include "ADM_videoFilterCache.h"
+ 
 #endif
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/include/ADM_videoFilter_internal.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/include/ADM_videoFilter_internal.h	2008-04-27 13:40:51 UTC (rev 3989)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/include/ADM_videoFilter_internal.h	2008-04-27 17:20:19 UTC (rev 3990)
@@ -17,157 +17,63 @@
  #ifndef __VIDEO_FILTERS__
  #define  __VIDEO_FILTERS__
 
-#include "ADM_script/adm_scanner.h"
+#include "ADM_script/adm_scanner.h" // To get MAXPARAM...
 
 typedef enum
 {
-	VF_TRANSFORM,
-	VF_INTERLACING,
-	VF_COLORS,
-	VF_NOISE,
-	VF_SHARPNESS,
-	VF_SUBTITLE,
-	VF_MISC
+	VF_TRANSFORM=0,
+	VF_INTERLACING=1,
+	VF_COLORS=2,
+	VF_NOISE=3,
+	VF_SHARPNESS=4,
+	VF_SUBTITLE=5,
+	VF_MISC=6,
+	VF_MAX=7
 }VF_CATEGORY;
+#define VF_INVALID 		  0
 
-typedef enum
-{
-                VF_INVALID=0,
-                VF_RESIZE=1,
-                VF_CROP,
-                VF_TELECIDE,
-                VF_BLACKEN,
-                VF_SHARPEN,
-                VF_MEAN,
-                VF_MEDIAN,
-                VF_GAUSSIAN,
-                VF_SMOOTHCLEAN,
-                VF_DEINTERLACE,
-                VF_ADDBORDER,
-                VF_PALSHIFT,
-                VF_SWAPUV,
-                VF_CONTRAST,
-                VF_LUMA,
-                VF_CHROMAU,
-                VF_CHROMAV,
-                VF_STABILIZE,
-                VF_FLIP,
-                VF_DENOISE,
-                VF_SUBTILE,
-                VF_LARGEMEDIAN,
-                VF_FLUXSMOOTH,
-                VF_SALT,
-                VF_PARTIAL          ,
-                VF_VLADSMOOTH,
-                VF_ROTATE,
-                VF_DROPOUT,
-                VF_SWAPFIELDS,
-                VF_KEEPODD,
-                VF_KEEPEVEN,
-                VF_SEPARATEFIELDS,
-                VF_MERGEFIELDS,
-                VF_CHROMASHIFT,
-                VF_SMARTSWAPFIELDS,
-                VF_MPLAYERRESIZE,
-                VF_IVTC,
-                VF_PULLDOWN,
-                VF_MPLHQD3D,
-                VF_MPLLQD3D,
-                VF_LAVDEINT,
-                VF_MPDETC,
-                VF_KRNDEINT,
-                VF_FORCEDPP,
-                VF_SOFTEN,
-                VF_DECOMB,
-                VF_DECIMATE,
-                VF_MSMOOTH,
-                VF_STACKFIELD,
-                VF_HZSTACKFIELD,
-                VF_WHIRL,
-                VF_EQUALIZER,
-                VF_VOBSUB,
-                VF_CHFPS,
-                VF_RESAMPLE_FPS,
-                VF_LAVPP_DEINT,
-                VF_UNSTACK_FIELD,
-                VF_HUE,
-                VF_EQ2,
-                VF_DGBOB,
-                VF_MSHARPEN,
-                VF_ASHARP,
-                VF_CNR2,
-                VF_DELTA,
-                VF_UNBLEND,
-                VF_HARDIVTC,
-                VF_MOSAIC,
-                VF_BLENDREMOVAL,
-                VF_TDEINT,
-                VF_MPDELOGO,
-                VF_COLOR_YUV,
-                VF_ANIMATED,
-                VF_MCDEINT,
-                VF_REVERSE,
-                VF_FADE,
-                VF_ASS,
-                VF_YADIF,
-                VF_DVBSUB,
-                VF_LOGO,
-                VF_COMPUTEAVERAGE,
-                VF_ERASER,
-                VF_SWISSARMYKNIFE,
-                VF_THRESHOLD,
-                VF_PARTICLELIST,
-                VF_DUMMY,
-                VF_COUNT,
-                MAX_FILTER = VF_COUNT - 1,
-                VF_EXTERNAL_START=0xF0000000
-          }VF_FILTERS;
+#define VF_PARTIAL_FILTER 9
+#define VF_START_TAG 	  10
 
+typedef uint32_t VF_FILTERS ;
 typedef AVDMGenericVideoStream *(ADM_createT) (AVDMGenericVideoStream *in, CONFcouple *);
 typedef AVDMGenericVideoStream *(ADM_create_from_scriptT) (AVDMGenericVideoStream *in, int n,Arg *args);
 
-         
-   struct FILTER_ENTRY
-   {
-        const char        *name;
-        ADM_createT       *create;
-        void              (*destroy)( AVDMGenericVideoStream *old); /* Maybe needed ...*/
-        VF_FILTERS        tag;
-        uint8_t           viewable;
-        const char        *filtername;
-        const char        *description;
-        ADM_create_from_scriptT *create_from_script;
-        VF_CATEGORY		  category;
-       FILTER_ENTRY (const char * name, ADM_createT * create, VF_FILTERS tag,
-                     uint8_t viewable, const char * filtername,
-                     VF_CATEGORY category=VF_MISC,
-                     const char * description = 0,
-                     ADM_create_from_scriptT * create_from_script = 0)
-           : name (name),
-             create (create),
-             destroy (0),
-             tag (tag),
-             viewable (viewable),
-             filtername (filtername),
-             description (description),
-             category(category),
-             create_from_script (create_from_script)
-       {
-       }
-
-       FILTER_ENTRY ()
-           : name (0),
-             create (0),
-             destroy (0),
-             tag (VF_INVALID),
-             viewable (0),
-             filtername (0),
-             description (0),
-             category(VF_MISC),
-             create_from_script (0)
-       {
-       }
-   };
+class FilterDescriptor
+{
+public:
+	
+	 		const char *name; // external name asprinted
+			const char *filterName; // internal name, used to lookup a filter by its name
+			const char *description; // Description 
+			const VF_CATEGORY category;
+		
+			const ADM_createT *create;
+			const ADM_create_from_scriptT *create_from_script;
+			const void (*destroy)(AVDMGenericVideoStream *old); /* Maybe needed ...*/
+		
+			const uint32_t apiVersion;
+			const uint32_t filterVersion;
+			VF_FILTERS tag;
+			
+		
+			FilterDescriptor(uint32_t tag,
+					const char *name,
+					const char *filtername,
+					const char *descTex,
+					VF_CATEGORY category,
+					AVDMGenericVideoStream *(*create) (AVDMGenericVideoStream *in, CONFcouple *),
+					AVDMGenericVideoStream *(*create_from_script) (AVDMGenericVideoStream *in, int n,Arg *args),
+					uint32_t apiVersion=ADM_FILTER_API_VERSION,uint32_t filterVersion=1):
+						tag(tag),
+						name(name),filterName(filtername),description(descTex),category(category),
+						create(create),create_from_script(create_from_script),destroy(NULL),
+						apiVersion(apiVersion),filterVersion(filterVersion)
+					
+			{
+				tag=0;
+			}
+};   
  	
    typedef struct
    {
@@ -175,42 +81,28 @@
           AVDMGenericVideoStream *filter;
           CONFcouple             *conf;
    }FILTER;
-
- 
    
+/* Number of activated filters you can have ..*/   
+#define VF_MAX_FILTER 100
+ 
+/* Some utility functions to deal with filter list */   
+FILTER      *getCurrentVideoFilterList (uint32_t * count);
+const FilterDescriptor * filterGetEntryFromTag (VF_FILTERS tag);
+const char *filterGetNameFromTag(VF_FILTERS tag);
+VF_FILTERS 	filterGetTagFromName(char *inname);
+uint8_t 	filterAddScript(VF_FILTERS tags,uint32_t n,Arg *args);
 
-FILTER * getCurrentVideoFilterList (uint32_t * count);
-const FILTER_ENTRY * filterGetEntryFromTag (VF_FILTERS tag);
-const char * filterGetNameFromTag(VF_FILTERS tag);
+/* Statically register filters */
+void registerFilterEx(const char *name,const char *filtername,VF_CATEGORY category,
+		AVDMGenericVideoStream *(*create) (AVDMGenericVideoStream *in, CONFcouple *),
+		AVDMGenericVideoStream *(*create_from_script) (AVDMGenericVideoStream *in, int n,Arg *args),
+		const char *descText);
 
-  void	filterSetPostProc( void );
-  
-#ifdef USE_LIBXML2
+/* Save / load filters */
 void filterSaveXml(char *name);
 void filterSaveXml(char *name,uint8_t silent);
 void filterLoadXml(char *name);
 int  filterLoadXml(char *name,uint8_t silent);
-#endif
- void filterSave(char *name);
- void filterLoad(char *name);
- int filterLoad(char *name,uint8_t silent);
- void filterSave(char *name,uint8_t silent);
-
 void filterSaveScriptJS(FILE *f);
 
-void registerFilter(const char *name,VF_FILTERS tag,uint8_t viewable,
-                    ADM_createT  *create,
-                    const char *fname);
-                    
-void registerFilterEx(const char *name,VF_FILTERS tag,uint8_t viewable,
-                ADM_createT  *create,
-                const char *filtername,
-                ADM_create_from_scriptT *create_from_script,
-                const char *description);
-                
-void 		filterListAll( void );
-VF_FILTERS 	filterGetTagFromName(char *inname);
-uint8_t 	filterAddScript(VF_FILTERS tags,uint32_t n,Arg *args);
-//AVDMGenericVideoStream *filterCreateFromTag(VF_FILTERS tag,uint8_t *conf, AVDMGenericVideoStream *in) ;
-
  #endif

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter.cpp	2008-04-27 13:40:51 UTC (rev 3989)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter.cpp	2008-04-27 17:20:19 UTC (rev 3990)
@@ -38,11 +38,16 @@
 #include "ADM_osSupport/ADM_quota.h"
 //
 // exported vars
-std::vector <FILTER_ENTRY> allfilters;
+std::vector <FilterDescriptor *> allfilters;
+std::vector <FilterDescriptor *> filterCategories[VF_MAX];
+
 uint32_t nb_active_filter=0;
-FILTER  videofilters[MAX_FILTER];
+FILTER  videofilters[VF_MAX_FILTER];
 
+
+
 static uint32_t lastStart=0, lastNb=0;
+static uint32_t tagCount=VF_START_TAG;
 
 extern ADM_Composer *video_body;
 extern AVDMGenericVideoStream *filterCreateFromTag(VF_FILTERS tag,CONFcouple *conf, AVDMGenericVideoStream *in) ;
@@ -83,8 +88,8 @@
 	printf("\nVideo filters\n");
 	for(uint32_t i=0;i<allfilters.size();i++)
 	{
-		name=allfilters[ i].filtername;
-		if(allfilters[ i].viewable)
+		name=allfilters[i]->filterName;
+		
 		{
 			if(name)
 				printf("\t%s\n",name);
@@ -95,48 +100,47 @@
 VF_FILTERS filterGetTagFromName(char *inname)
 {
 const char *name;
-	VF_FILTERS filter=VF_DUMMY;
+	VF_FILTERS filter=VF_INVALID;
 	for(uint32_t i=0;i<allfilters.size();i++)
 	{
-		name=allfilters[ i].filtername;
-		if(allfilters[ i].viewable || allfilters[i].tag==VF_PARTIAL)
+		name=allfilters[ i]->filterName;
+		if( allfilters[i]->tag==VF_PARTIAL_FILTER)
 		{
 			if(name)
 			{
 				if(strlen(name))
 				{
 					if(!strcasecmp(name,inname))
-						return allfilters[ i].tag; 
+						return allfilters[ i]->tag; 
 				}
 			}
 		}
 	}
 	return filter;
 }
-void registerFilter(const char *name,VF_FILTERS tag,uint8_t viewable
-		,AVDMGenericVideoStream *(*create) (AVDMGenericVideoStream *in, CONFcouple *)
-		,const char *filtername)
-{
-//        printf ("*nb_video_filter() = %d, max %d, name = %s\n", nb_video_filter(), (MAX_FILTER-1), name);
-        allfilters.push_back (FILTER_ENTRY (name, create, tag, viewable, filtername));
 
-        if(viewable==1)
-	{
-        	aprintf("\nRegistered filter %lu: %s",allfilters.size(),name);
-	}
-}
-void registerFilterEx(const char *name,VF_FILTERS tag,uint8_t viewable
-		,AVDMGenericVideoStream *(*create) (AVDMGenericVideoStream *in, CONFcouple *)
-		,const char *filtername,AVDMGenericVideoStream *(*create_from_script) (AVDMGenericVideoStream *in, int n,Arg *args),const char *desc)
+/**
+ * 	\fn registerFilterEx
+ *  \brief Register a video filter
+ */
+void registerFilterEx(const char *name,const char *filtername,VF_CATEGORY category,
+		AVDMGenericVideoStream *(*create) (AVDMGenericVideoStream *in, CONFcouple *),
+		AVDMGenericVideoStream *(*create_from_script) (AVDMGenericVideoStream *in, int n,Arg *args),
+		const char *descText)
 {
-//    printf ("nb_video_filter = %d, max %d, name = %s\n", nb_video_filter, (MAX_FILTER-1), name);
-        allfilters.push_back (FILTER_ENTRY (name, create, tag, viewable,
-                                            filtername, VF_MISC,desc, create_from_script));
 
-        if(viewable==1)
-	{
-        	aprintf("\nRegistered filter %lu: %s",allfilters.size(),name);
-	}
+	FilterDescriptor *desc=new FilterDescriptor(tagCount++,filtername,name,
+												descText,
+												category,
+												create,
+												create_from_script);
+	
+		ADM_assert(desc->category<VF_MAX);
+	
+        allfilters.push_back (desc);
+        filterCategories[desc->category].push_back(desc);
+        
+        aprintf("[Filters] Registered filter %s\n",desc->name);
 
 
 }
@@ -264,25 +268,13 @@
 	 AVDMGenericVideoStream *filter;
 
 			ADM_assert(tag!=VF_INVALID);
-                        if(tag>=VF_EXTERNAL_START)
+                       
                         {
-                          // start from the end, it is an external filter 
-                          for(uint32_t i=allfilters.size()-1;i>=0;i--)
-                          {
-                              if(tag==allfilters[i].tag)
-                                {
-                                        filter=allfilters[i].create( in, couple);
-                                        return filter;
-                                }
-                          }
-                        } // else search forward
-                        else
-                        {
                           for(unsigned int i=0;i<allfilters.size();i++)
                                   {
-                                          if(tag==allfilters[i].tag)
+                                          if(tag==allfilters[i]->tag)
                                                   {
-                                                          filter=allfilters[i].create( in, couple);
+                                                          filter=allfilters[i]->create( in, couple);
                                                           return filter;
                                                   }
                                   }
@@ -294,14 +286,14 @@
 
 
 */
-const FILTER_ENTRY * filterGetEntryFromTag (VF_FILTERS tag)
+const FilterDescriptor * filterGetEntryFromTag (VF_FILTERS tag)
 {
     ADM_assert(tag!=VF_INVALID);
     for(unsigned int i=0;i<allfilters.size();i++)
     {
-        if(tag==allfilters[i].tag)
+        if(tag==allfilters[i]->tag)
         {
-            return &(allfilters[i]);
+            return (allfilters[i]);
         }
     }
     ADM_assert(0);
@@ -310,7 +302,7 @@
 
 const char  *filterGetNameFromTag(VF_FILTERS tag)
 {
-    const FILTER_ENTRY * entry = filterGetEntryFromTag (tag);
+    const FilterDescriptor * entry = filterGetEntryFromTag (tag);
     ADM_assert(entry);
     return entry->name;
 }
@@ -441,7 +433,7 @@
 
 	for(unsigned int i=0;i<allfilters.size();i++)
 	{
-		if(tag==allfilters[i].tag)
+		if(tag==allfilters[i]->tag)
 		{
 			if(nb_active_filter<1)
 			{
@@ -450,12 +442,12 @@
 			}
 			AVDMGenericVideoStream *filter=NULL;
 			CONFcouple *setup=NULL;
-			if(!allfilters[i].create_from_script)
+			if(!allfilters[i]->create_from_script)
 			{
 				printf("That filter cannot be created from script\n");
 				return 0;
 			}
-			filter=allfilters[i].create_from_script(videofilters[nb_active_filter-1].filter,n-1,&(args[1]));
+			filter=allfilters[i]->create_from_script(videofilters[nb_active_filter-1].filter,n-1,&(args[1]));
 			if(!filter) return 0;
 			videofilters[nb_active_filter].filter=filter;
 			videofilters[nb_active_filter].tag=tag;						
@@ -477,9 +469,9 @@
                         qfprintf(f,"app.video.addFilter(");
                         for(unsigned int j=0;j<allfilters.size();j++)
                                 {
-                                        if(tag==allfilters[j].tag)
+                                        if(tag==allfilters[j]->tag)
                                         {       
-                                                qfprintf(f,"\"%s\"",allfilters[j].filtername);
+                                                qfprintf(f,"\"%s\"",allfilters[j]->filterName);
                                                 break;  
                                         }
                                 }

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter_declaration.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter_declaration.cpp	2008-04-27 13:40:51 UTC (rev 3989)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter_declaration.cpp	2008-04-27 17:20:19 UTC (rev 3990)
@@ -21,17 +21,24 @@
 #include "config.h"
 #include "ADM_default.h"
 
-#ifdef HAVE_ENCODER
 
 
 #include "ADM_videoFilter.h"
 #include "ADM_videoFilter_internal.h"
-#define FILTERDEC(x) extern   AVDMGenericVideoStream *x(AVDMGenericVideoStream *in, CONFcouple *param)
-#define FILTERDECX(x) extern   AVDMGenericVideoStream *x(AVDMGenericVideoStream *in, int n,Arg *args)
-#define REGISTER(e,a,g,b,c,d) {FILTERDEC(d);registerFilterEx(a,b,c,d,e,NULL,NULL);}
-#define REGISTERX(e,a,g,b,c,d,f) {\
-FILTERDECX(f);\
-FILTERDEC(d);registerFilterEx((char*)a,b,c,d,e,f,(char*)g);\
+/*
+void registerFilterEx(const char *name,const char *filtername,VF_CATEGORY category,
+		AVDMGenericVideoStream *(*create) (AVDMGenericVideoStream *in, CONFcouple *),
+		AVDMGenericVideoStream *(*create_from_script) (AVDMGenericVideoStream *in, int n,Arg *args),
+		const char *descText)
+*/
+
+#define FILTERDEC_create(x) extern   AVDMGenericVideoStream *x(AVDMGenericVideoStream *in, CONFcouple *param)
+#define FILTERDEC_createFromScript(x) extern   AVDMGenericVideoStream *x(AVDMGenericVideoStream *in, int n,Arg *args)
+
+#define REGISTERX(z,a,b,c,d,e,f,g) {\
+			FILTERDEC_create(f);\
+			FILTERDEC_createFromScript(g);\
+			registerFilterEx((const char*)a,(const char *)b,z,f,g,(const char *)c);\
 }
 
 void registerVideoFilters( void )
@@ -40,155 +47,127 @@
 printf(  "*********************\n");
 
 	
-	registerFilter("---- Image size/border alteration----",VF_INVALID,2,NULL,NULL);
-//+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
-	REGISTERX("crop",QT_TR_NOOP("Crop"),QT_TR_NOOP("Remove lines from top/bottom/left/right."),VF_CROP,1,crop_create,crop_script);
-	REGISTERX("mpresize",QT_TR_NOOP("MPlayer resize"),QT_TR_NOOP("Change image size. Faster than Avisynth's Resize."),VF_MPLAYERRESIZE,1,mpresize_create,mpresize_script);
-	REGISTERX("resize",QT_TR_NOOP("Resize"),QT_TR_NOOP("Picture resizer ported from Avisynth."), VF_RESIZE,1,res_create,resize_script);
-  	REGISTERX("addblack",QT_TR_NOOP("Add black borders"),QT_TR_NOOP("Add pure black border(s). Enlarges the picture."),VF_ADDBORDER,1,addBorder_create,addBorder_script);
-	REGISTERX("blacken",QT_TR_NOOP("Blacken borders"),QT_TR_NOOP("Fill borders with pure black. Doesn't alter size."),VF_BLACKEN,1,bsmear_create,bsmear_script);
-  	REGISTERX("vflip",QT_TR_NOOP("Vertical flip"),QT_TR_NOOP("Vertically flip the picture."),VF_FLIP,1,flipv_create,flipv_script);
-	REGISTERX("rotate",QT_TR_NOOP("Rotate"),QT_TR_NOOP("Rotate the picture by 90, 180 or 270 degrees."),VF_ROTATE,1,rotate_create,rotate_script);
-        //REGISTERX("chfps","Change FPS",VF_CHFPS,1,chfps_create,chfps_script);
-        REGISTERX("resamplefps",QT_TR_NOOP("Resample fps"),QT_TR_NOOP("Change framerate while keeping duration."),VF_RESAMPLE_FPS,1,resamplefps_create,resamplefps_script);                
-        REGISTERX("reverse",QT_TR_NOOP("Reverse"),QT_TR_NOOP("Play video backward."),VF_REVERSE,1,reverse_create,reverse_script);
-        REGISTERX("fade",QT_TR_NOOP("Fade"),QT_TR_NOOP("Fade in/out."),VF_FADE,1,fade_create,fade_script);     
+	REGISTERX(VF_TRANSFORM, "crop",QT_TR_NOOP("Crop"),QT_TR_NOOP("Remove lines from top/bottom/left/right."),VF_CROP,1,crop_create,crop_script);
+	REGISTERX(VF_TRANSFORM, "mpresize",QT_TR_NOOP("MPlayer resize"),QT_TR_NOOP("Change image size. Faster than Avisynth's Resize."),VF_MPLAYERRESIZE,1,mpresize_create,mpresize_script);
+	REGISTERX(VF_TRANSFORM, "resize",QT_TR_NOOP("Resize"),QT_TR_NOOP("Picture resizer ported from Avisynth."), VF_RESIZE,1,res_create,resize_script);
+  	REGISTERX(VF_TRANSFORM, "addblack",QT_TR_NOOP("Add black borders"),QT_TR_NOOP("Add pure black border(s). Enlarges the picture."),VF_ADDBORDER,1,addBorder_create,addBorder_script);
+	REGISTERX(VF_TRANSFORM, "blacken",QT_TR_NOOP("Blacken borders"),QT_TR_NOOP("Fill borders with pure black. Doesn't alter size."),VF_BLACKEN,1,bsmear_create,bsmear_script);
+  	REGISTERX(VF_TRANSFORM, "vflip",QT_TR_NOOP("Vertical flip"),QT_TR_NOOP("Vertically flip the picture."),VF_FLIP,1,flipv_create,flipv_script);
+	REGISTERX(VF_TRANSFORM, "rotate",QT_TR_NOOP("Rotate"),QT_TR_NOOP("Rotate the picture by 90, 180 or 270 degrees."),VF_ROTATE,1,rotate_create,rotate_script);
+    REGISTERX(VF_TRANSFORM, "resamplefps",QT_TR_NOOP("Resample fps"),QT_TR_NOOP("Change framerate while keeping duration."),VF_RESAMPLE_FPS,1,resamplefps_create,resamplefps_script);                
+    REGISTERX(VF_TRANSFORM, "reverse",QT_TR_NOOP("Reverse"),QT_TR_NOOP("Play video backward."),VF_REVERSE,1,reverse_create,reverse_script);
+    REGISTERX(VF_TRANSFORM, "fade",QT_TR_NOOP("Fade"),QT_TR_NOOP("Fade in/out."),VF_FADE,1,fade_create,fade_script);     
 
-	registerFilter("----------- Interlacing -------------",VF_INVALID,2,NULL,NULL);
-//+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
-	// Buggy : Removed REGISTER("IVTC",VF_IVTC,1,ivtc_create);
-//	REGISTERX("mpivtc","Mplayer ivtc",VF_MPDETC,1,mpdetc_create,mpdetc_script);	
-        REGISTERX("YADIF",QT_TR_NOOP("yadif"),QT_TR_NOOP("Yet Another DeInterlacer. Ported from MPlayer."),VF_YADIF,1,yadif_create,yadif_script);
-        REGISTERX("mcdeinterlace",QT_TR_NOOP("mcDeinterlace"),QT_TR_NOOP("Motion compensation deinterlacer. Ported from MPlayer."),VF_MCDEINT,1,mcdeint_create,mcdeint_script);
-	REGISTERX("deinterlace",QT_TR_NOOP("Deinterlace"),QT_TR_NOOP("Mask interlacing artifacts. Port of Smart deinterlace."),VF_DEINTERLACE,1,deinterlace_create,deinterlace_script);
-	REGISTERX("kerneldeint",QT_TR_NOOP("KernelDeint"),QT_TR_NOOP("Kernel deinterlacer by Donald Graft."),VF_KRNDEINT,1,kerneldeint_create,kerneldeint_script);
-        REGISTERX("tdeint",QT_TR_NOOP("TDeint"),QT_TR_NOOP("Motion adaptative deinterlacer by Tritical."),VF_TDEINT,1,tdeint_create,tdeint_script);
-        REGISTERX("lavcppdeint",QT_TR_NOOP("libavcodec deinterlacer"),QT_TR_NOOP("All FFmpeg deinterlace filters (bicubic, median, ...)."),VF_LAVPP_DEINT,1,lavppdeint_create,lavppdeint_script);
-	REGISTERX("telecide",QT_TR_NOOP("Decomb Telecide"),QT_TR_NOOP("Great deinterlacing package including IVTC."),VF_DECOMB,1,decomb_create,decomb_script);
-	REGISTERX("decimate",QT_TR_NOOP("Decomb Decimate"),QT_TR_NOOP("Useful to remove dupes left by Telecide."),VF_DECIMATE,1,decimate_create,decimate_script);
-	REGISTERX("pulldown",QT_TR_NOOP("Pulldown"),QT_TR_NOOP("Convert 24 fps to 30 fps by repeating fields."),VF_PULLDOWN,1,pulldown_create,pulldown_script);
-	
-	REGISTERX("dgbob","DGBob",QT_TR_NOOP("Bobber - convert each field into a full sized frame."),VF_DGBOB,1,dgbob_create,dgbob_script);
+    REGISTERX(VF_INTERLACING, "YADIF",QT_TR_NOOP("yadif"),QT_TR_NOOP("Yet Another DeInterlacer. Ported from MPlayer."),VF_YADIF,1,yadif_create,yadif_script);
+    REGISTERX(VF_INTERLACING, "mcdeinterlace",QT_TR_NOOP("mcDeinterlace"),QT_TR_NOOP("Motion compensation deinterlacer. Ported from MPlayer."),VF_MCDEINT,1,mcdeint_create,mcdeint_script);
+	REGISTERX(VF_INTERLACING, "deinterlace",QT_TR_NOOP("Deinterlace"),QT_TR_NOOP("Mask interlacing artifacts. Port of Smart deinterlace."),VF_DEINTERLACE,1,deinterlace_create,deinterlace_script);
+	REGISTERX(VF_INTERLACING, "kerneldeint",QT_TR_NOOP("KernelDeint"),QT_TR_NOOP("Kernel deinterlacer by Donald Graft."),VF_KRNDEINT,1,kerneldeint_create,kerneldeint_script);
+    REGISTERX(VF_INTERLACING, "tdeint",QT_TR_NOOP("TDeint"),QT_TR_NOOP("Motion adaptative deinterlacer by Tritical."),VF_TDEINT,1,tdeint_create,tdeint_script);
+    REGISTERX(VF_INTERLACING, "lavcppdeint",QT_TR_NOOP("libavcodec deinterlacer"),QT_TR_NOOP("All FFmpeg deinterlace filters (bicubic, median, ...)."),VF_LAVPP_DEINT,1,lavppdeint_create,lavppdeint_script);
+	REGISTERX(VF_INTERLACING, "telecide",QT_TR_NOOP("Decomb Telecide"),QT_TR_NOOP("Great deinterlacing package including IVTC."),VF_DECOMB,1,decomb_create,decomb_script);
+	REGISTERX(VF_INTERLACING, "decimate",QT_TR_NOOP("Decomb Decimate"),QT_TR_NOOP("Useful to remove dupes left by Telecide."),VF_DECIMATE,1,decimate_create,decimate_script);
+	REGISTERX(VF_INTERLACING, "pulldown",QT_TR_NOOP("Pulldown"),QT_TR_NOOP("Convert 24 fps to 30 fps by repeating fields."),VF_PULLDOWN,1,pulldown_create,pulldown_script);	
+	REGISTERX(VF_INTERLACING, "dgbob","DGBob",QT_TR_NOOP("Bobber - convert each field into a full sized frame."),VF_DGBOB,1,dgbob_create,dgbob_script);
+    REGISTERX(VF_INTERLACING, "palfieldshift",QT_TR_NOOP("PAL field shift"),QT_TR_NOOP("Shift fields by one. Useful for some PAL movies."),VF_PALSHIFT,1,addPALShift_create,addPALShift_script);	
+	REGISTERX(VF_INTERLACING, "palsmart",QT_TR_NOOP("PAL smart"),QT_TR_NOOP("Smartly revert non constant PAL field shift."),VF_TELECIDE,1,telecide_create,telecide_script);
 
-        REGISTERX("palfieldshift",QT_TR_NOOP("PAL field shift"),QT_TR_NOOP("Shift fields by one. Useful for some PAL movies."),VF_PALSHIFT,1,addPALShift_create,addPALShift_script);	
-	REGISTERX("palsmart",QT_TR_NOOP("PAL smart"),QT_TR_NOOP("Smartly revert non constant PAL field shift."),VF_TELECIDE,1,telecide_create,telecide_script);
-//	REGISTERX("lavdeint","Lavcodec Deinterlacer",VF_LAVDEINT,1,lavdeint_create,lavdeint_script);
+	//	REGISTERX("lavdeint","Lavcodec Deinterlacer",VF_LAVDEINT,1,lavdeint_create,lavdeint_script);
         
         
 	
-	REGISTERX("drop",QT_TR_NOOP("Drop"),QT_TR_NOOP("Drop damaged fields (e.g. from VHS capture)."),VF_DROPOUT,1,dropout_create,dropout_script);
-	REGISTERX("swapfields",QT_TR_NOOP("Swap fields"),QT_TR_NOOP("Swap top and bottom fields."),VF_SWAPFIELDS,1,swapfield_create,swapfield_script);
-	REGISTERX("smartswapfield",QT_TR_NOOP("Smart swap fields"),QT_TR_NOOP("Smartly swap fields. Needed when field order changes."),VF_SMARTSWAPFIELDS,1,swapsmart_create,swapsmart_script);
+	REGISTERX(VF_INTERLACING, "drop",QT_TR_NOOP("Drop"),QT_TR_NOOP("Drop damaged fields (e.g. from VHS capture)."),VF_DROPOUT,1,dropout_create,dropout_script);
+	REGISTERX(VF_INTERLACING, "swapfields",QT_TR_NOOP("Swap fields"),QT_TR_NOOP("Swap top and bottom fields."),VF_SWAPFIELDS,1,swapfield_create,swapfield_script);
+	REGISTERX(VF_INTERLACING, "smartswapfield",QT_TR_NOOP("Smart swap fields"),QT_TR_NOOP("Smartly swap fields. Needed when field order changes."),VF_SMARTSWAPFIELDS,1,swapsmart_create,swapsmart_script);
 
-	REGISTERX("keepevenfield",QT_TR_NOOP("Keep even fields"),QT_TR_NOOP("Keep top fields. Gives a half height picture."),VF_KEEPEVEN,1,keepeven_create,keepeven_script);
-	REGISTERX("keepoddfield",QT_TR_NOOP("Keep odd fields"),QT_TR_NOOP("Keep bottom fileds. Gives a half height picture."),VF_KEEPODD,1,keepodd_create,keepodd_script);
-	REGISTERX("separatefields",QT_TR_NOOP("Separate fields"),QT_TR_NOOP("Each field becomes full picture, half sized."),VF_SEPARATEFIELDS,1, separatefield_create,separatefield_script);
-	REGISTERX("mergefield",QT_TR_NOOP("Merge fields"),QT_TR_NOOP("Merge two pictures as if they were two fields."),VF_MERGEFIELDS,1,mergefield_create,mergefield_script);
+	REGISTERX(VF_INTERLACING, "keepevenfield",QT_TR_NOOP("Keep even fields"),QT_TR_NOOP("Keep top fields. Gives a half height picture."),VF_KEEPEVEN,1,keepeven_create,keepeven_script);
+	REGISTERX(VF_INTERLACING, "keepoddfield",QT_TR_NOOP("Keep odd fields"),QT_TR_NOOP("Keep bottom fileds. Gives a half height picture."),VF_KEEPODD,1,keepodd_create,keepodd_script);
+	REGISTERX(VF_INTERLACING, "separatefields",QT_TR_NOOP("Separate fields"),QT_TR_NOOP("Each field becomes full picture, half sized."),VF_SEPARATEFIELDS,1, separatefield_create,separatefield_script);
+	REGISTERX(VF_INTERLACING, "mergefield",QT_TR_NOOP("Merge fields"),QT_TR_NOOP("Merge two pictures as if they were two fields."),VF_MERGEFIELDS,1,mergefield_create,mergefield_script);
 
-
-        REGISTERX("hzstackfield",QT_TR_NOOP("Hz Stack fields"),QT_TR_NOOP("Put botj fields side by side."),VF_HZSTACKFIELD,1,hzstackfield_create,hzstackfield_script);
+    REGISTERX(VF_INTERLACING, "hzstackfield",QT_TR_NOOP("Hz Stack fields"),QT_TR_NOOP("Put botj fields side by side."),VF_HZSTACKFIELD,1,hzstackfield_create,hzstackfield_script);
         
+	REGISTERX(VF_INTERLACING, "stackfield",QT_TR_NOOP("Stack fields"),QT_TR_NOOP("Put two fields on top of one another."),VF_STACKFIELD,1,stackfield_create,stackfield_script);
+    REGISTERX(VF_INTERLACING, "unstackfield",QT_TR_NOOP("Unstack fields"),QT_TR_NOOP("Interleave top and bottom part of the picture."),VF_UNSTACK_FIELD,1,unstackfield_create,unstackfield_script);
 
-	REGISTERX("stackfield",QT_TR_NOOP("Stack fields"),QT_TR_NOOP("Put two fields on top of one another."),VF_STACKFIELD,1,stackfield_create,stackfield_script);
-        REGISTERX("unstackfield",QT_TR_NOOP("Unstack fields"),QT_TR_NOOP("Interleave top and bottom part of the picture."),VF_UNSTACK_FIELD,1,unstackfield_create,unstackfield_script);
-	
-	registerFilter("------------ Luma/Chroma ------------",VF_INVALID,2,NULL,NULL);
-//+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++              
-        REGISTERX("eq2",QT_TR_NOOP("MPlayer eq2"),QT_TR_NOOP("Adjust contrast, brightness, saturation and gamma."),VF_EQ2,1,Eq2_create,Eq2_script);
-        REGISTERX("hue",QT_TR_NOOP("MPlayer hue"),QT_TR_NOOP("Adjust hue and saturation."),VF_HUE,1,hue_create,hue_script);
-        REGISTERX("contrast",QT_TR_NOOP("Contrast"),QT_TR_NOOP("Adjust contrast, brightness and colors."),VF_CONTRAST,1,contrast_create,contrast_script);
-        REGISTERX("equalizer",QT_TR_NOOP("Luma equalizer"),QT_TR_NOOP("Luma correction filter with histogram."),VF_EQUALIZER,1,equalizer_create,equalizer_script);
+    
+    
+    REGISTERX(VF_COLORS, "eq2",QT_TR_NOOP("MPlayer eq2"),QT_TR_NOOP("Adjust contrast, brightness, saturation and gamma."),VF_EQ2,1,Eq2_create,Eq2_script);
+    REGISTERX(VF_COLORS, "hue",QT_TR_NOOP("MPlayer hue"),QT_TR_NOOP("Adjust hue and saturation."),VF_HUE,1,hue_create,hue_script);
+    REGISTERX(VF_COLORS, "contrast",QT_TR_NOOP("Contrast"),QT_TR_NOOP("Adjust contrast, brightness and colors."),VF_CONTRAST,1,contrast_create,contrast_script);
+    REGISTERX(VF_COLORS, "equalizer",QT_TR_NOOP("Luma equalizer"),QT_TR_NOOP("Luma correction filter with histogram."),VF_EQUALIZER,1,equalizer_create,equalizer_script);
 
-        REGISTERX("swapuv",QT_TR_NOOP("Swap U and V"),QT_TR_NOOP("Invert chroma U and chroma V."),VF_SWAPUV,1,swapuv_create,swapuv_script);
-        REGISTERX("chromashift",QT_TR_NOOP("Chroma shift"),QT_TR_NOOP("Shift chroma U/V to fix badly synced luma/chroma."),VF_CHROMASHIFT,1,create_chromashift,chromashift_script);
+    REGISTERX(VF_COLORS, "swapuv",QT_TR_NOOP("Swap U and V"),QT_TR_NOOP("Invert chroma U and chroma V."),VF_SWAPUV,1,swapuv_create,swapuv_script);
+    REGISTERX(VF_COLORS, "chromashift",QT_TR_NOOP("Chroma shift"),QT_TR_NOOP("Shift chroma U/V to fix badly synced luma/chroma."),VF_CHROMASHIFT,1,create_chromashift,chromashift_script);
 
-        REGISTERX("lumaonly",QT_TR_NOOP("Luma only"),QT_TR_NOOP("Convert picture to greyscale (black and white)."),VF_LUMA,1,luma_create,luma_script);
-        REGISTERX("chromauonly",QT_TR_NOOP("Chroma U only"),QT_TR_NOOP("Convert picture to grey, keeping only chroma U."),VF_CHROMAU,1,chromaU_create,chromaU_script);
-        REGISTERX("chromavonly",QT_TR_NOOP("Chroma V only"),QT_TR_NOOP("Convert picture to grey, keeping only chroma V."),VF_CHROMAV,1,chromaV_create,chromaV_script);
-       
-        REGISTERX("delta",QT_TR_NOOP("Luma delta"),QT_TR_NOOP("Difference between current and previous picture."),VF_DELTA,1,delta_create,delta_script);
-        REGISTERX("coloryuv",QT_TR_NOOP("Avisynth ColorYUV"),QT_TR_NOOP("Alter colors (auto white balance etc...). Ported from Avisynth."),VF_COLOR_YUV,1,coloryuv_create,coloryuv_script);
-                 
+    REGISTERX(VF_COLORS, "lumaonly",QT_TR_NOOP("Luma only"),QT_TR_NOOP("Convert picture to greyscale (black and white)."),VF_LUMA,1,luma_create,luma_script);
+    REGISTERX(VF_COLORS, "chromauonly",QT_TR_NOOP("Chroma U only"),QT_TR_NOOP("Convert picture to grey, keeping only chroma U."),VF_CHROMAU,1,chromaU_create,chromaU_script);
+    REGISTERX(VF_COLORS, "chromavonly",QT_TR_NOOP("Chroma V only"),QT_TR_NOOP("Convert picture to grey, keeping only chroma V."),VF_CHROMAV,1,chromaV_create,chromaV_script);
+   
+    REGISTERX(VF_COLORS, "delta",QT_TR_NOOP("Luma delta"),QT_TR_NOOP("Difference between current and previous picture."),VF_DELTA,1,delta_create,delta_script);
+    REGISTERX(VF_COLORS, "coloryuv",QT_TR_NOOP("Avisynth ColorYUV"),QT_TR_NOOP("Alter colors (auto white balance etc...). Ported from Avisynth."),VF_COLOR_YUV,1,coloryuv_create,coloryuv_script);
 
-
-       
     
-	
-	registerFilter("-------------- Smoother -------------",VF_INVALID,2,NULL,NULL);
-//+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
-	//   registerFilter("Temporal smoother",tempsmooth_create);	
-	REGISTERX("mpdenoise3d",QT_TR_NOOP("MPlayer denoise3d"),QT_TR_NOOP("Reduce noise, smooth image, increase compressibility."),VF_MPLLQD3D,1,MPD3Dlow_create,MPD3Dlow_script);
-	REGISTERX("mphqdenoise3d",QT_TR_NOOP("MPlayer hqdn3d"),QT_TR_NOOP("High quality version of denoise3d. Slower but more precise."),VF_MPLHQD3D,1,MPD3D_create,MPD3D_script);
-	REGISTERX("fluxsmooth",QT_TR_NOOP("FluxSmooth"),QT_TR_NOOP("Spatio-temporal cleaner by Ross Thomas."),VF_FLUXSMOOTH,1,fluxsmooth_create,fluxsmooth_script);
+    REGISTERX(VF_NOISE, "mpdenoise3d",QT_TR_NOOP("MPlayer denoise3d"),QT_TR_NOOP("Reduce noise, smooth image, increase compressibility."),VF_MPLLQD3D,1,MPD3Dlow_create,MPD3Dlow_script);
+	REGISTERX(VF_NOISE, "mphqdenoise3d",QT_TR_NOOP("MPlayer hqdn3d"),QT_TR_NOOP("High quality version of denoise3d. Slower but more precise."),VF_MPLHQD3D,1,MPD3D_create,MPD3D_script);
+	REGISTERX(VF_NOISE, "fluxsmooth",QT_TR_NOOP("FluxSmooth"),QT_TR_NOOP("Spatio-temporal cleaner by Ross Thomas."),VF_FLUXSMOOTH,1,fluxsmooth_create,fluxsmooth_script);
 #ifdef ADM_CPU_X86
-    	REGISTERX("temporalcleaner",QT_TR_NOOP("Temporal Cleaner"),QT_TR_NOOP("Vlad59's Avisynth port of Jim Casaburi's denoiser."),VF_VLADSMOOTH,1,vladsmooth_create,vladsmooth_script);
+    	REGISTERX(VF_NOISE, "temporalcleaner",QT_TR_NOOP("Temporal Cleaner"),QT_TR_NOOP("Vlad59's Avisynth port of Jim Casaburi's denoiser."),VF_VLADSMOOTH,1,vladsmooth_create,vladsmooth_script);
 #endif
-	REGISTERX("denoise",QT_TR_NOOP("Denoise"),QT_TR_NOOP("Port of Transcode DNR."),VF_DENOISE,1,denoise_create,denoise_script);
-	REGISTERX("stabilize",QT_TR_NOOP("Stabilize"),QT_TR_NOOP("Light denoiser."),VF_STABILIZE,1,stabilize_create,stabilize_script);
+	REGISTERX(VF_NOISE, "denoise",QT_TR_NOOP("Denoise"),QT_TR_NOOP("Port of Transcode DNR."),VF_DENOISE,1,denoise_create,denoise_script);
+	REGISTERX(VF_NOISE, "stabilize",QT_TR_NOOP("Stabilize"),QT_TR_NOOP("Light denoiser."),VF_STABILIZE,1,stabilize_create,stabilize_script);
+    REGISTERX(VF_NOISE, "cnr2",QT_TR_NOOP("Cnr2"),QT_TR_NOOP("Chroma noise reduction filter by MarcFD/Tritical."),VF_CNR2,1,cnr2_create,cnr2_script);	
 
-        REGISTERX("cnr2",QT_TR_NOOP("Cnr2"),QT_TR_NOOP("Chroma noise reduction filter by MarcFD/Tritical."),VF_CNR2,1,cnr2_create,cnr2_script);	
+	REGISTERX(VF_SHARPNESS, "msmooth",QT_TR_NOOP("MSmooth by Donald Graft"),QT_TR_NOOP("Smooth the image, don't blur edges. Useful on anime."),VF_MSMOOTH,1,create_msmooth,msmooth_script);
+	REGISTERX(VF_SHARPNESS, "soften",QT_TR_NOOP("Soften"),QT_TR_NOOP("A variant of stabilize."),VF_SOFTEN,1,soften_create,soften_script);
 
-	REGISTERX("msmooth",QT_TR_NOOP("MSmooth by Donald Graft"),QT_TR_NOOP("Smooth the image, don't blur edges. Useful on anime."),VF_MSMOOTH,1,create_msmooth,msmooth_script);
-	REGISTERX("soften",QT_TR_NOOP("Soften"),QT_TR_NOOP("A variant of stabilize."),VF_SOFTEN,1,soften_create,soften_script);
-
 	//REGISTERX("smoothclean","Smooth Clean",VF_SMOOTHCLEAN,0,smooth_create,smooth_script);
-        registerFilter("-------- Convolution Kernel ---------",VF_INVALID,2,NULL,NULL);
-//+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
-        REGISTERX("sharpen",QT_TR_NOOP("Sharpen"),QT_TR_NOOP("Enhance difference between near pixels."),VF_SHARPEN,1,sharpen_create,sharpen_script);
-        REGISTERX("msharpen",QT_TR_NOOP("MSharpen"),QT_TR_NOOP("Sharpen edges without amplifying noise. By Donald Graft."),VF_MSHARPEN,1,msharpen_create,msharpen_script);
-        REGISTERX("asharp",QT_TR_NOOP("asharp"),QT_TR_NOOP("Adaptative sharpener by MarcFD."),VF_ASHARP,1,asharp_create,asharp_script);
+    REGISTERX(VF_SHARPNESS, "sharpen",QT_TR_NOOP("Sharpen"),QT_TR_NOOP("Enhance difference between near pixels."),VF_SHARPEN,1,sharpen_create,sharpen_script);
+    REGISTERX(VF_SHARPNESS, "msharpen",QT_TR_NOOP("MSharpen"),QT_TR_NOOP("Sharpen edges without amplifying noise. By Donald Graft."),VF_MSHARPEN,1,msharpen_create,msharpen_script);
+    REGISTERX(VF_SHARPNESS, "asharp",QT_TR_NOOP("asharp"),QT_TR_NOOP("Adaptative sharpener by MarcFD."),VF_ASHARP,1,asharp_create,asharp_script);
 
-        REGISTERX("gaussian",QT_TR_NOOP("Gauss smooth"),QT_TR_NOOP("Gaussian smooth. Blur the picture."),VF_GAUSSIAN,1,Gaussian_create,gaussian_script);
-        REGISTERX("mean",QT_TR_NOOP("Mean"),QT_TR_NOOP("Mean (blur) kernel."),VF_MEAN,1,mean_create,mean_script);
-        REGISTERX("median",QT_TR_NOOP("Median"),QT_TR_NOOP("Median kernel 3x3. Remove high frequency noise."),VF_MEDIAN,1,median_create,median_script);
-        REGISTERX("largemedian",QT_TR_NOOP("Median (5x5)"),QT_TR_NOOP("Median kernel 5x5. Good for reducing chroma noise."),VF_LARGEMEDIAN,1,largeMedian_create,largeMedian_script);
-        REGISTERX("forcedpp",QT_TR_NOOP("Forced postprocessing"),QT_TR_NOOP("Apply blind postprocessing."),VF_FORCEDPP,1,forcedpp_create,forcedpp_script);        
+    REGISTERX(VF_SHARPNESS, "gaussian",QT_TR_NOOP("Gauss smooth"),QT_TR_NOOP("Gaussian smooth. Blur the picture."),VF_GAUSSIAN,1,Gaussian_create,gaussian_script);
+    REGISTERX(VF_SHARPNESS, "mean",QT_TR_NOOP("Mean"),QT_TR_NOOP("Mean (blur) kernel."),VF_MEAN,1,mean_create,mean_script);
+    REGISTERX(VF_SHARPNESS, "median",QT_TR_NOOP("Median"),QT_TR_NOOP("Median kernel 3x3. Remove high frequency noise."),VF_MEDIAN,1,median_create,median_script);
+    REGISTERX(VF_SHARPNESS, "largemedian",QT_TR_NOOP("Median (5x5)"),QT_TR_NOOP("Median kernel 5x5. Good for reducing chroma noise."),VF_LARGEMEDIAN,1,largeMedian_create,largeMedian_script);
+    REGISTERX(VF_SHARPNESS, "forcedpp",QT_TR_NOOP("Forced postprocessing"),QT_TR_NOOP("Apply blind postprocessing."),VF_FORCEDPP,1,forcedpp_create,forcedpp_script);        
 
-	registerFilter("----------------- Subs --------------",VF_INVALID,2,NULL,NULL);
-//+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 #ifdef USE_FREETYPE   
-	REGISTERX("subtitle",QT_TR_NOOP("Subtitler"),QT_TR_NOOP("Add srt/sub subtitles to the picture."),VF_SUBTILE,1,subtitle_create,subtitle_script);
-	REGISTERX("ass",QT_TR_NOOP("ASS"),QT_TR_NOOP("Add ASS/SSA subtitles to the picture."),VF_ASS,1,ass_create,ass_script);
+	REGISTERX(VF_SUBTITLE, "subtitle",QT_TR_NOOP("Subtitler"),QT_TR_NOOP("Add srt/sub subtitles to the picture."),VF_SUBTILE,1,subtitle_create,subtitle_script);
+	REGISTERX(VF_SUBTITLE, "ass",QT_TR_NOOP("ASS"),QT_TR_NOOP("Add ASS/SSA subtitles to the picture."),VF_ASS,1,ass_create,ass_script);
 #endif
 
-        REGISTERX("vobsub",QT_TR_NOOP("VobSub"),QT_TR_NOOP("Embed VobSub subtitles into picture."),VF_VOBSUB,1,vobsub_create,vobsub_script);
+        REGISTERX(VF_SUBTITLE,"vobsub",QT_TR_NOOP("VobSub"),QT_TR_NOOP("Embed VobSub subtitles into picture."),VF_VOBSUB,1,vobsub_create,vobsub_script);
 #if 1 //def ADM_DEBUG
-        REGISTERX("dvbsub",QT_TR_NOOP("DVB sub"),QT_TR_NOOP("Embed DVB-T subtitle."),VF_DVBSUB,1,dvbsub_create,dvbsub_script);
+        REGISTERX(VF_SUBTITLE,"dvbsub",QT_TR_NOOP("DVB sub"),QT_TR_NOOP("Embed DVB-T subtitle."),VF_DVBSUB,1,dvbsub_create,dvbsub_script);
 #else
         FILTERDEC(dvbsub_create);
         FILTERDECX(dvbsub_script) ;
 #endif
 
         //*********************
- registerFilter("-------- Misc ---------",VF_INVALID,2,NULL,NULL);
-//+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
-//	registerFilter("---- Video Analysis Tools ----",VF_INVALID,2,NULL,NULL);
-
-        REGISTERX("blendremover",QT_TR_NOOP("Blend remover"),QT_TR_NOOP("Remove blend between previous and next picture."),VF_BLENDREMOVAL,1,blendremove_create,blendremove_script);
-        REGISTERX("hardivtcremove",QT_TR_NOOP("Hard pulldown removal"),QT_TR_NOOP("Remove IVTC that has been analog captured or resized."),VF_HARDIVTC,1,hardivtc_create,hardivtc_script);
-        REGISTERX("whirl",QT_TR_NOOP("Whirl"),QT_TR_NOOP("Useless whirlwind effect."),VF_WHIRL,1,whirl_create,whirl_script);
-        REGISTERX("mosaic",QT_TR_NOOP("Mosaic"),QT_TR_NOOP("Split the picture into tiny thumbnails."),VF_MOSAIC,1,     mosaic_create,mosaic_script);
-        REGISTERX("mpdelogo",QT_TR_NOOP("MPlayer delogo"),QT_TR_NOOP("Blend a logo by interpolating its surrounding box."),VF_MPDELOGO,1,mpdelogo_create,mpdelogo_script);
-        REGISTERX("logo",QT_TR_NOOP("Logo"),QT_TR_NOOP("Add a png as logo."),VF_LOGO,1,logo_create,logo_script);
-        REGISTERX("animatedmenu",QT_TR_NOOP("Animated Menu"),
-            QT_TR_NOOP("Create a video made of 6 mini windows, very useful to do DVD menus."),
+ 
+    REGISTERX(VF_MISC, "blendremover",QT_TR_NOOP("Blend remover"),QT_TR_NOOP("Remove blend between previous and next picture."),VF_BLENDREMOVAL,1,blendremove_create,blendremove_script);
+    REGISTERX(VF_MISC, "hardivtcremove",QT_TR_NOOP("Hard pulldown removal"),QT_TR_NOOP("Remove IVTC that has been analog captured or resized."),VF_HARDIVTC,1,hardivtc_create,hardivtc_script);
+    REGISTERX(VF_MISC, "whirl",QT_TR_NOOP("Whirl"),QT_TR_NOOP("Useless whirlwind effect."),VF_WHIRL,1,whirl_create,whirl_script);
+    REGISTERX(VF_MISC, "mosaic",QT_TR_NOOP("Mosaic"),QT_TR_NOOP("Split the picture into tiny thumbnails."),VF_MOSAIC,1,     mosaic_create,mosaic_script);
+    REGISTERX(VF_MISC, "mpdelogo",QT_TR_NOOP("MPlayer delogo"),QT_TR_NOOP("Blend a logo by interpolating its surrounding box."),VF_MPDELOGO,1,mpdelogo_create,mpdelogo_script);
+    REGISTERX(VF_MISC, "logo",QT_TR_NOOP("Logo"),QT_TR_NOOP("Add a png as logo."),VF_LOGO,1,logo_create,logo_script);
+    REGISTERX(VF_MISC, "animatedmenu",QT_TR_NOOP("Animated Menu"), QT_TR_NOOP("Create a video made of 6 mini windows, very useful to do DVD menus."),
             VF_ANIMATED,1,animated_create,animated_script);
-	REGISTERX("computeaverage",QT_TR_NOOP("Compute Average"),QT_TR_NOOP("Compute average luma value for each pixel throughout all frames, and save to file"),VF_COMPUTEAVERAGE,1,computeaverage_create,computeaverage_script);
+	REGISTERX(VF_MISC, "computeaverage",QT_TR_NOOP("Compute Average"),QT_TR_NOOP("Compute average luma value for each pixel throughout all frames, and save to file"),VF_COMPUTEAVERAGE,1,computeaverage_create,computeaverage_script);
+	REGISTERX(VF_MISC, "threshold",QT_TR_NOOP("Threshold"),QT_TR_NOOP("Force too-bright/too-dim pixels to 0 and the rest to 255 or vice-versa"),VF_THRESHOLD,1,threshold_create,threshold_script);
+	//REGISTERX("particlelist",QT_TR_NOOP("Particle List"),QT_TR_NOOP("Identify 'particles' (groups of pixels)"),VF_PARTICLELIST,1,particle_create,particle_script);
 	//REGISTERX("eraser",QT_TR_NOOP("Eraser"),QT_TR_NOOP("\"Erase\" arbitrary areas of each frame"),VF_ERASER,1,eraser_create,eraser_script);
 	//REGISTERX("swissarmyknife",QT_TR_NOOP("Swiss Army Knife"),QT_TR_NOOP("Apply operation like P'=P*A, P-A, P+A, etc. using a convolution, rolling average, image from file, or constant"),VF_SWISSARMYKNIFE,1,swissarmyknife_create,swissarmyknife_script);
-	REGISTERX("threshold",QT_TR_NOOP("Threshold"),QT_TR_NOOP("Force too-bright/too-dim pixels to 0 and the rest to 255 or vice-versa"),VF_THRESHOLD,1,threshold_create,threshold_script);
-	//REGISTERX("particlelist",QT_TR_NOOP("Particle List"),QT_TR_NOOP("Identify 'particles' (groups of pixels)"),VF_PARTICLELIST,1,particle_create,particle_script);
 
+
 // Does not work
 //        REGISTERX("unblend","Unblend by Bach",VF_UNBLEND,1,unblend_create,unblend_script);
         
-        REGISTERX("partial",QT_TR_NOOP("Partial"),"",VF_PARTIAL,0,partial_create,partial_script);
+	REGISTERX(VF_MISC,"partial",QT_TR_NOOP("Partial"),"",VF_PARTIAL,0,partial_create,partial_script);
 //	REGISTER("","Remove Salt",VF_SALT,0,salt_create);
  printf("\n");
 }		
 
 
-//
-
-
-#endif
+// EOF

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter_dylib.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter_dylib.cpp	2008-04-27 13:40:51 UTC (rev 3989)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter_dylib.cpp	2008-04-27 17:20:19 UTC (rev 3990)
@@ -134,7 +134,7 @@
     ADM_assert(desc);
     
     VF_FILTERS id=filterGetTagFromName(name);
-    if(VF_DUMMY!=id)
+    if(VF_INVALID!=id)
     {
       printf("This filter(%s) is already registered as %u\n", name,id);
       CLOSELIB(handle);
@@ -144,7 +144,7 @@
     
     printf("Loaded filter %s, version %d\n",name,versionP());
   
-   registerFilterEx(name,(VF_FILTERS)dynTag++,1,createP,name,createFromScriptP,desc);
+//   registerFilterEx(name,(VF_FILTERS)dynTag++,1,createP,name,createFromScriptP,desc);
 
 }
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter_saveload.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter_saveload.cpp	2008-04-27 13:40:51 UTC (rev 3989)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter_saveload.cpp	2008-04-27 17:20:19 UTC (rev 3990)
@@ -37,7 +37,7 @@
 #include "avi_vars.h"
 // exported vars
 extern uint32_t nb_active_filter;
-extern FILTER  videofilters[MAX_FILTER];
+extern FILTER  videofilters[VF_MAX_FILTER];
 
 extern AVDMGenericVideoStream *filterCreateFromTag(VF_FILTERS tag,CONFcouple *couple, AVDMGenericVideoStream *in);
 extern void filterCleanUp( void );

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/vidVCD.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/vidVCD.cpp	2008-04-27 13:40:51 UTC (rev 3989)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/vidVCD.cpp	2008-04-27 17:20:19 UTC (rev 3990)
@@ -46,7 +46,7 @@
 #include "ADM_userInterfaces/ADM_commonUI/DIA_resizeWiz.h"
 #include "ADM_video/ADM_vidMisc.h"
 //___________________________________________
-extern FILTER videofilters[MAX_FILTER];
+extern FILTER videofilters[VF_MAX_FILTER];
 extern uint32_t nb_active_filter;
 extern ADM_Composer *video_body;
 
@@ -305,7 +305,7 @@
 	createResizeFromParam (getLastVideoFilter (), newx, newy);
 
 
-      videofilters[nb_active_filter].tag = VF_MPLAYERRESIZE;
+      videofilters[nb_active_filter].tag = VF_INVALID; //VF_FIXME
       videofilters[nb_active_filter].filter->getCoupledConf (&couple);
       videofilters[nb_active_filter].conf = couple;;
       nb_active_filter++;
@@ -318,7 +318,7 @@
 	create_addBorder (videofilters[nb_active_filter - 1].filter,
 			  cropx >> 1, cropx >> 1, cropy >> 1, cropy >> 1);
 
-      videofilters[nb_active_filter].tag = VF_ADDBORDER;
+      videofilters[nb_active_filter].tag = VF_INVALID;  // VF_FIXME
       videofilters[nb_active_filter].filter->getCoupledConf (&couple);
       videofilters[nb_active_filter].conf = couple;;
       nb_active_filter++;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_preview.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_preview.cpp	2008-04-27 13:40:51 UTC (rev 3989)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_preview.cpp	2008-04-27 17:20:19 UTC (rev 3990)
@@ -49,7 +49,7 @@
 
 #define MAX(a,b) ( (a)>(b) ? (a) : (b) )
 
-extern FILTER  videofilters[MAX_FILTER];
+extern FILTER  videofilters[VF_MAX_FILTER];
 extern uint32_t nb_active_filter;
 
 static void previewBlit(ADMImage *from,ADMImage *to,uint32_t startx,uint32_t starty);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp	2008-04-27 13:40:51 UTC (rev 3989)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp	2008-04-27 17:20:19 UTC (rev 3990)
@@ -50,10 +50,12 @@
 						    in);
 extern const char  *filterGetNameFromTag(VF_FILTERS tag);
 //___________________________________________
-extern FILTER videofilters[MAX_FILTER];
+extern FILTER videofilters[VF_MAX_FILTER];
 extern uint32_t nb_active_filter;
-extern std::vector <FILTER_ENTRY> allfilters;
+extern std::vector <FilterDescriptor *> allfilters;
+extern std::vector <FilterDescriptor *> filterCategories[VF_MAX];
 
+
 extern ADM_Composer *video_body;
 //___________________________________________
 static gulong row_inserted_id;
@@ -89,10 +91,6 @@
 GUI_handleVFilter (void)
 {
 
-#ifndef HAVE_ENCODER
-    return 0;
-}
-#else
     getLastVideoFilter ();	// expand video to full size
 
     // sanity check
@@ -236,7 +234,7 @@
         AVDMGenericVideoStream *replace;
         CONFcouple *conf;
         conf = videofilters[action_parameter].conf;
-        if (videofilters[action_parameter].tag == VF_PARTIAL)	// cannot recurse
+        if (videofilters[action_parameter].tag == VF_PARTIAL_FILTER)	// cannot recurse
         {
             GUI_Error_HIG (QT_TR_NOOP("The filter is already partial"), NULL);
             break;
@@ -253,7 +251,7 @@
 			videofilters[action_parameter].filter = replace;
 			replace->getCoupledConf (&conf);
 			videofilters[action_parameter].conf = conf;
-			videofilters[action_parameter].tag = VF_PARTIAL;
+			videofilters[action_parameter].tag = VF_PARTIAL_FILTER;
 			getFirstVideoFilter ();
 			updateFilterList ();
 			setSelectionNumber(nb_active_filter-1, WID(treeview0), stores[0], action_parameter-1);
@@ -368,11 +366,10 @@
     } //end of switch
 }
 /*
- 	Pop-up a list of all available filters
-	Return the tag identifying the filter selected
+ 	\fn getFilterFromSelection
+	\brief returns the tag of the selected filter
 */
-VF_FILTERS
-getFilterFromSelection (void)
+VF_FILTERS getFilterFromSelection (void)
 {
     uint32_t sel = 0;
 	uint8_t ret = 0;
@@ -383,11 +380,15 @@
     page++;
     if ((ret = getSelectionNumber (max, trees[page], stores[page], &sel)))
 	{
-        tag = allfilters[sel+startFilter[page]].tag;
+        tag = filterCategories[page-1][sel]->tag;
 	}
     return tag;
 }
-
+/**
+ * 	\fn createFilterDialog
+ *  \brief Create the dialog including list of all filters available on the left.
+ * 
+ */
 GtkWidget *
 createFilterDialog (void)
 {
@@ -397,7 +398,7 @@
 #define CALLME_TOOLBAR(x,y) gtk_signal_connect(GTK_OBJECT(WID(x)),"clicked",  GTK_SIGNAL_FUNC(wrapToolButton), (void *) y);
 #define CALLME(x,y) gtk_dialog_add_action_widget (GTK_DIALOG (dialog), WID(x), y)
 
-	//CALLME (toolbuttonAdd, A_ADD);
+
         // Each of these triggers the following message:
         // Gtk-CRITICAL **: gtk_box_pack_end: assertion `child->parent == NULL' failed
         CALLME (buttonRemove,		A_REMOVE);
@@ -419,6 +420,8 @@
         
 
     //create treeviews
+    // Treeview zero is reserved and does not contain
+    //
     trees[0]=lookup_widget(dialog,"treeview0");
     stores[0]=gtk_list_store_new (3, G_TYPE_STRING, G_TYPE_INT, G_TYPE_POINTER);
     #define LOOK(x) {trees[x]=lookup_widget(dialog,"treeview"#x);\
@@ -435,31 +438,26 @@
     //load stores with filter names, get start filter for each page
     char *str=NULL;
     GtkTreeIter iter;
-    int current_tree=0;
-    for (uint32_t i = 0; i < allfilters.size(); i++)
+    
+    // Dispatch each category to the matching tree
+    for(int current_tree=0;current_tree< VF_MAX;current_tree++)
     {
-        if (allfilters[i].viewable==1)
-        {
-		
+    	 std::vector <FilterDescriptor *> vec=filterCategories[current_tree];
+    	for (uint32_t i = 0; i < vec.size(); i++)
+    	{		
 		 str = g_strconcat(
-				 "<span weight=\"bold\">", allfilters[i].name, "</span>\n",
-                 		//	"", allfilters[i].description, "", NULL);
-                 			"<span size=\"smaller\">", allfilters[i].description, "</span>", NULL);
+				 "<span weight=\"bold\">", vec[i]->name, "</span>\n",
+                 "<span size=\"smaller\">", vec[i]->description, "</span>", NULL);
 				
-            gtk_list_store_append (stores[current_tree], &iter);
-            gtk_list_store_set (stores[current_tree], &iter, 0, str ,-1);
+            gtk_list_store_append (stores[current_tree+1], &iter);
+            gtk_list_store_set (stores[current_tree+1], &iter, 0, str ,-1);
             g_free(str);
             max++;
-        }else
-        {
-                current_tree++;
-                if(current_tree>=NB_TREE) break;
-                startFilter[current_tree]=i+1;
-        }
+    	}
     }
 
     //setup treeviews
-    for(int i=0;i<NB_TREE;i++)
+    for(int i=0;i<VF_MAX+1;i++)
     {
         renderers[i] = gtk_cell_renderer_text_new();
    		columns[i] = gtk_tree_view_column_new_with_attributes (
@@ -502,9 +500,11 @@
     }
     return dialog;
 }
-
-void
-updateFilterList (void)
+/**
+ * 	\fn updateFilterList
+ *  \brief Update the list of activated filters
+ */
+void updateFilterList (void)
 {
     g_signal_handler_block(stores[0], row_inserted_id);
     g_signal_handler_block(stores[0], row_deleted_id);
@@ -619,4 +619,4 @@
 
 }
 
-#endif
+

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/Q_mainfilter.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/Q_mainfilter.cpp	2008-04-27 13:40:51 UTC (rev 3989)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/Q_mainfilter.cpp	2008-04-27 17:20:19 UTC (rev 3990)
@@ -6,6 +6,8 @@
     * I.e.
     0--1000 : QT4 internal
     2000-3000: Filters
+                 Each family starts a category*100 then filter in the order they are in categories
+                 ** 10 Categories MAX !!
     3000-4000  filterFamilyClick Filter
     8000-9000  Active Filter
     
@@ -57,8 +59,10 @@
 /******************************************************/
 extern FILTER videofilters[MAX_FILTER];
 extern uint32_t nb_active_filter;
-extern std::vector <FILTER_ENTRY> allfilters;
+extern std::vector <FilterDescriptor *> allfilters;
+extern std::vector <FilterDescriptor *> filterCategories[VF_MAX];
 
+
 extern const char  *filterGetNameFromTag(VF_FILTERS tag);
 extern ADM_Composer *video_body;
 extern AVDMGenericVideoStream *filterCreateFromTag(VF_FILTERS tag,CONFcouple *conf, AVDMGenericVideoStream *in) ;
@@ -97,8 +101,8 @@
 	void filterFamilyClick(int  item);
  private slots:
  private:
-        int startFilter[NB_TREE];
-        int filterSize[NB_TREE];
+        
+        
         void setSelected(int sel);
         void displayFamily(uint32_t family);
         void setupFilters(void);
@@ -127,8 +131,13 @@
      int itag=item->type();
      if(itag>=ALL_FILTER_BASE && itag < EXTERNAL_FILTER_BASE)
      {
-       tag=allfilters[itag-ALL_FILTER_BASE].tag;
-       
+    	 // Extract family & index
+    	 itag-=ALL_FILTER_BASE;
+    	 int index=itag%100;
+    	 int family=(itag-index)/100;
+    	 ADM_assert(family<VF_MAX);
+    	 ADM_assert(index<filterCategories[family].size());
+         tag=filterCategories[family][index]->tag;
      }else
      {
         ADM_assert(0); 
@@ -181,6 +190,7 @@
                     videofilters[itag].conf = NULL;
             }
         // recreate derivated filters
+
         for (uint32_t i = itag ; i < nb_active_filter-1; i++)
         {
                     delete videofilters[i ].filter;
@@ -190,6 +200,7 @@
                     videofilters[i ].conf = videofilters[i+1].conf;
                     videofilters[i ].tag = videofilters[i+1].tag;
         }
+        
         /* Delete last filter which is now at last filter -1 */
             delete videofilters[nb_active_filter - 1].filter;
             videofilters[nb_active_filter - 1].filter = NULL;
@@ -329,32 +340,24 @@
 void filtermainWindow::displayFamily(uint32_t family)
 {
   printf("Family :%u\n",family);
-  
+  ADM_assert(family<VF_MAX);
+  std::vector <FilterDescriptor *> vec=filterCategories[family];
   availableList->clear();
   QColor colorgrey;
   colorgrey.setRgb(myBg,myBg,myBg);
   QBrush brush(colorgrey);
   QSize sz;
   
-  for (uint32_t i = 0; i < filterSize[family]; i++)
+  for (uint32_t i = 0; i < vec.size(); i++)
     {
-      int r=startFilter[family]+i;
-
-      if (allfilters[r].viewable==1)
-        {
           QString str; //="<b>";
-          str+=allfilters[r].name;
+          str+=vec[i]->name;
          
           QListWidgetItem *item;
-          if(family==NB_TREE-1)
-                item=new QListWidgetItem(str,availableList,EXTERNAL_FILTER_BASE+i);
-          else
-                item=new QListWidgetItem(str,availableList,ALL_FILTER_BASE+r);
-          item->setToolTip(allfilters[r].description);
+          item=new QListWidgetItem(str,availableList,ALL_FILTER_BASE+i+family*100);
+          item->setToolTip(vec[i]->description);
           if(i&1) item->setBackground(brush);
           availableList->addItem(item);
-          
-        }
      }
    
 }
@@ -406,10 +409,12 @@
             GUI_Error_HIG (QT_TR_NOOP("The filter is already partial"), NULL);
             return;
         }
+
         replace =new ADMVideoPartial (videofilters[itag - 1].
                                       filter,
                                       videofilters[itag].tag,
                                       conf);
+        
         if(replace->configure (videofilters[itag - 1].filter))
         {
             delete videofilters[itag].filter;
@@ -429,34 +434,7 @@
 */
 void filtermainWindow::setupFilters(void)
 {
-  int current_tree=-1;
-  int current_raw=0;;
   
-  max=0;
-  
-  for (uint32_t i = 0; i < allfilters.size(); i++)
-    {
-      if (allfilters[i].viewable==1)
-        {
-          current_raw++;
-          
-        }else 
-        {
-                current_tree++;
-                if(current_tree) filterSize[current_tree-1]=current_raw;
-                if(current_tree>=NB_TREE) break;
-                startFilter[current_tree]=i+1;
-                current_raw=0;
-                
-        }
-    }
-    ADM_assert(NB_TREE==8);
-    startFilter[NB_TREE-1]=2000;
-    filterSize[NB_TREE-1]=0;
-    for(int i=0;i<NB_TREE;i++)
-    {
-             printf("%d Start at %d size :%d\n",i,startFilter[i],filterSize[i]);
-    }
 }
 
 /**
@@ -494,9 +472,7 @@
   */
 filtermainWindow::filtermainWindow()     : QDialog()
  {
-        memset( startFilter,0,sizeof(int)*NB_TREE);
-        memset( filterSize,0,sizeof(int)*NB_TREE);
- 
+        
     ui.setupUi(this);
     setupFilters();  
       



From mean at mail.berlios.de  Mon Apr 28 07:50:14 2008
From: mean at mail.berlios.de (mean at BerliOS)
Date: Mon, 28 Apr 2008 07:50:14 +0200
Subject: [Avidemux-svn-commit] r3991 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters
Message-ID: <200804280550.m3S5oEYY021977@sheep.berlios.de>

Author: mean
Date: 2008-04-28 07:50:13 +0200 (Mon, 28 Apr 2008)
New Revision: 3991

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/Q_mainfilter.cpp
Log:
[Filter] Fix merging with x264 plugin


Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/Q_mainfilter.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/Q_mainfilter.cpp	2008-04-27 17:20:19 UTC (rev 3990)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/Q_mainfilter.cpp	2008-04-28 05:50:13 UTC (rev 3991)
@@ -57,7 +57,7 @@
 #define EXTERNAL_FILTER_BASE  2000
 #define ACTIVE_FILTER_BASE    3000
 /******************************************************/
-extern FILTER videofilters[MAX_FILTER];
+extern FILTER videofilters[VF_MAX_FILTER];
 extern uint32_t nb_active_filter;
 extern std::vector <FilterDescriptor *> allfilters;
 extern std::vector <FilterDescriptor *> filterCategories[VF_MAX];
@@ -404,7 +404,7 @@
         AVDMGenericVideoStream *replace;
         CONFcouple *conf;
         conf = videofilters[itag].conf;
-        if (videofilters[itag].tag == VF_PARTIAL)	// cannot recurse
+        if (videofilters[itag].tag == VF_PARTIAL_FILTER)	// cannot recurse
         {
             GUI_Error_HIG (QT_TR_NOOP("The filter is already partial"), NULL);
             return;
@@ -422,7 +422,7 @@
             videofilters[itag].filter = replace;
             replace->getCoupledConf (&conf);
             videofilters[itag].conf = conf;
-            videofilters[itag].tag = VF_PARTIAL;
+            videofilters[itag].tag = VF_PARTIAL_FILTER;
             getFirstVideoFilter ();
             buildActiveFilterList ();   
         }



From gruntster at mail.berlios.de  Mon Apr 28 13:30:27 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Mon, 28 Apr 2008 13:30:27 +0200
Subject: [Avidemux-svn-commit] r3992 -
	branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui
Message-ID: <200804281130.m3SBURUs000407@sheep.berlios.de>

Author: gruntster
Date: 2008-04-28 13:30:25 +0200 (Mon, 28 Apr 2008)
New Revision: 3992

Modified:
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/translation_table.h
Log:
[Qt4] enable Save Project and Audio Filters menu items (patch by R. Keller)

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/translation_table.h
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/translation_table.h	2008-04-28 05:50:13 UTC (rev 3991)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/translation_table.h	2008-04-28 11:30:25 UTC (rev 3992)
@@ -14,7 +14,7 @@
 PROCESS(actionSave_BMP,ACT_SaveImg) \
 PROCESS(actionSave_jpeg,ACT_SaveJPG) \
 PROCESS(actionLoad_run_project,ACT_RunScript) \
-PROCESS(actionSave_project,ACT_DUMMY) \
+PROCESS(actionSave_project,ACT_SaveCurrentWork) \
 PROCESS(actionSave_project_as,ACT_SaveWork) \
 PROCESS(actionConnect_to_AvsProxy,ACT_AVS_PROXY) \
 PROCESS(actionReset_Edits,ACT_ResetSegments) \
@@ -34,7 +34,7 @@
 PROCESS(actionBuild_VBR_time_map,ACT_AudioMap) \
 PROCESS(actionSave_2,ACT_SaveWave) \
 PROCESS(actionEncoder_2,ACT_SelectEncoder) \
-PROCESS(actionFilters_2,ACT_DUMMY) \
+PROCESS(actionFilters_2,ACT_AudioFilters) \
 PROCESS(actionCalculator,ACT_DUMMY) \
 PROCESS(actionRebuild_I_B_Frames,ACT_RebuildKF) \
 PROCESS(actionBitrate_histogram,ACT_BitRate) \
@@ -73,7 +73,6 @@
 PROCESS(actionPrevious_intra_frame,ACT_PreviousKFrame) \
 PROCESS(actionNext_intra_frame,ACT_NextKFrame) \
 PROCESS(actionZoom_4_1,ACT_ZOOM_4_1) \
-PROCESS(actionMain_toolbar,ACT_SaveCurrentWork) \
 PROCESS(actionA_V_toolbar,ACT_DUMMY)
 #endif
 



From gruntster at mail.berlios.de  Mon Apr 28 13:35:41 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Mon, 28 Apr 2008 13:35:41 +0200
Subject: [Avidemux-svn-commit] r3993 -
	branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui
Message-ID: <200804281135.m3SBZfYH008388@sheep.berlios.de>

Author: gruntster
Date: 2008-04-28 13:35:40 +0200 (Mon, 28 Apr 2008)
New Revision: 3993

Modified:
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui
Log:
[Qt4] use Ctrl+S shortcut to save video instead

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui	2008-04-28 11:30:25 UTC (rev 3992)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui	2008-04-28 11:35:40 UTC (rev 3993)
@@ -1454,7 +1454,7 @@
      <x>0</x>
      <y>0</y>
      <width>838</width>
-     <height>25</height>
+     <height>22</height>
     </rect>
    </property>
    <widget class="QMenu" name="menuHelp" >
@@ -1781,6 +1781,9 @@
    <property name="toolTip" >
     <string>Save Video</string>
    </property>
+   <property name="shortcut" >
+    <string>Ctrl+S</string>
+   </property>
   </action>
   <action name="actionSave_BMP" >
    <property name="text" >
@@ -1831,9 +1834,6 @@
    <property name="toolTip" >
     <string>Save Project</string>
    </property>
-   <property name="shortcut" >
-    <string>Ctrl+S</string>
-   </property>
   </action>
   <action name="actionSave_project_as" >
    <property name="icon" >



From gruntster at mail.berlios.de  Mon Apr 28 17:09:11 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Mon, 28 Apr 2008 17:09:11 +0200
Subject: [Avidemux-svn-commit] r3994 - in
	branches/avidemux_2.5_branch_gruntster/avidemux: ADM_encoder
	ADM_outputs/oplug_avi ADM_outputs/oplug_dummy
	ADM_outputs/oplug_flv ADM_outputs/oplug_mp4
	ADM_outputs/oplug_mpeg ADM_outputs/oplug_mpegFF
	ADM_outputs/oplug_ogm ADM_plugin
	plugins/ADM_videoEncoder/ADM_vidEnc_x264
Message-ID: <200804281509.m3SF9B7S028147@sheep.berlios.de>

Author: gruntster
Date: 2008-04-28 17:08:46 +0200 (Mon, 28 Apr 2008)
New Revision: 3994

Removed:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encdivx2p.cpp
Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_externalEncoder.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_externalEncoder.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_pluginLoad.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encCopy.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encCopy.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encRequant.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encRequant.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encXvid4.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encXvid4.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encdivx.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encdivx.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encffmpeg.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encffmpeg.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encffmpeg1.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encmjpeg.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encmjpeg.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encmpeg2enc.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encmpeg2enc.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encoder.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encx264.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encx264.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encxvid.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encxvid.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encyv12.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encyv12.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_pack.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_unpack.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_plugin/ADM_vidEnc_plugin.h
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.h
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/interface.c
Log:
[x264] pass in and correctly process encode parameters

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_externalEncoder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_externalEncoder.cpp	2008-04-28 11:35:40 UTC (rev 3993)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_externalEncoder.cpp	2008-04-28 15:08:46 UTC (rev 3994)
@@ -22,15 +22,18 @@
 {
 	_plugin = getVideoEncoderPlugin(params->extra_param);
 	_openPass = false;
+	_logFileName = NULL;
 }
 
 externalEncoder::~externalEncoder()
 {
 	stop();
-	delete _plugin;
+
+	if (_logFileName)
+		delete [] _logFileName;
 }
 
-uint8_t externalEncoder::configure(AVDMGenericVideoStream *instream)
+uint8_t externalEncoder::configure(AVDMGenericVideoStream *instream, int useExistingLogFile)
 {
 	ADV_Info *info;
 
@@ -50,6 +53,10 @@
 	properties.height = _h;
 	properties.parWidth = instream->getPARWidth();
 	properties.parHeight = instream->getPARHeight();
+	properties.frameCount = info->nb_frames;
+	properties.fps1000 = info->fps1000;
+	properties.logFileName = _logFileName;
+	properties.useExistingLogFile = useExistingLogFile;
 
 	if (_plugin->open(_plugin->encoderId, &properties))
 		return 1;
@@ -62,15 +69,22 @@
 	uint32_t l, f;
 	int outLength, videoFrameType;
 	int64_t ptsFrame;
-	vidEncEncodeParams params;
+	vidEncEncodeParameters params;
 
+	if (!_openPass && !isDualPass())
+		if (startPass1() != ADM_VIDENC_ERR_SUCCESS)
+		{
+			printf ("[externalEncoder] Error starting first pass\n");
+			return 0;
+		}
+
 	if (!_in->getFrameNumberNoAlloc(frame, &l, _vbuffer, &f))
 	{
-		printf ("[VidEnc Plugin] Error: Cannot read incoming frame!\n");
+		printf ("[externalEncoder] Error reading incoming frame\n");
 		return 0;
 	}
 
-	params.structSize = sizeof(vidEncEncodeParams);
+	params.structSize = sizeof(vidEncEncodeParameters);
 	params.frameData = _vbuffer->data;
 	params.frameDataSize = 0;
 	params.encodedData = out->data;
@@ -132,8 +146,11 @@
 
 uint8_t externalEncoder::startPass2(void)
 {
-	_openPass = (_plugin->finishPass(_plugin->encoderId) && _plugin->beginPass(_plugin->encoderId));
+	if (_openPass)
+		_plugin->finishPass(_plugin->encoderId);
 
+	_openPass = (_plugin->beginPass(_plugin->encoderId) == ADM_VIDENC_ERR_SUCCESS);
+
 	return _openPass;
 }
 
@@ -160,5 +177,11 @@
 
 uint8_t externalEncoder::setLogFile(const char *p, uint32_t fr)
 {
+	if (_logFileName)
+		delete [] _logFileName;
+
+	_logFileName = new char[strlen(p) + 1];
+	strcpy(_logFileName, p);
+
 	return 1;
 }

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_externalEncoder.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_externalEncoder.h	2008-04-28 11:35:40 UTC (rev 3993)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_externalEncoder.h	2008-04-28 15:08:46 UTC (rev 3994)
@@ -28,12 +28,13 @@
 private:
 	ADM_vidEnc_plugin *_plugin;
 	bool _openPass;
+	char* _logFileName;
 
 public:
 	externalEncoder(COMPRES_PARAMS *params);
 	~externalEncoder();
 	virtual uint8_t isDualPass(void);
-	virtual uint8_t configure(AVDMGenericVideoStream * instream);
+	virtual uint8_t configure(AVDMGenericVideoStream * instream, int useExistingLogFile);
 	virtual uint8_t encode(uint32_t frame, ADMBitstream *out);
 	virtual uint8_t hasExtraHeaderData(uint32_t *l, uint8_t **data);
 	virtual uint8_t setLogFile(const char *p, uint32_t fr);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_pluginLoad.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_pluginLoad.h	2008-04-28 11:35:40 UTC (rev 3993)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_pluginLoad.h	2008-04-28 15:08:46 UTC (rev 3994)
@@ -40,7 +40,7 @@
 
 typedef int _vidEncOpen(int encoderId, vidEncVideoProperties *properties);
 typedef int _vidEncBeginPass(int encoderId);
-typedef int _vidEncEncodeFrame(int encoderId, vidEncEncodeParams *encodeParams);
+typedef int _vidEncEncodeFrame(int encoderId, vidEncEncodeParameters *encodeParams);
 typedef int _vidFinishPass(int encoderId);
 typedef int _vidEncClose(int encoderId);
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/CMakeLists.txt	2008-04-28 11:35:40 UTC (rev 3993)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/CMakeLists.txt	2008-04-28 15:08:46 UTC (rev 3994)
@@ -1,5 +1,5 @@
 SET(ADM_encoder_SRCS 
-	adm_encConfig.cpp  adm_encdivx2p.cpp  adm_encffmpeg1.cpp  adm_encmjpeg.cpp     adm_encoder.cpp     adm_encx264.cpp   adm_encxvid.cpp
+	adm_encConfig.cpp  adm_encffmpeg1.cpp  adm_encmjpeg.cpp     adm_encoder.cpp     adm_encx264.cpp   adm_encxvid.cpp
 	adm_encCopy.cpp    adm_encdivx.cpp    adm_encffmpeg.cpp   adm_encmpeg2enc.cpp  adm_encRequant.cpp  adm_encXvid4.cpp  adm_encyv12.cpp
 	ADM_pluginLoad.cpp ADM_externalEncoder.cpp)
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.cpp	2008-04-28 11:35:40 UTC (rev 3993)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.cpp	2008-04-28 15:08:46 UTC (rev 3994)
@@ -456,6 +456,9 @@
 		vidEncOptions encodeOptions;
 		vidEncVideoProperties properties;
 
+		memset(&properties, 0, sizeof(vidEncVideoProperties));
+		properties.structSize = sizeof(vidEncVideoProperties);
+
 		if (avifileinfo)
 		{
 			aviInfo info;
@@ -465,17 +468,10 @@
 			properties.height = info.height;
 			properties.parWidth = video_body->getPARWidth();
 			properties.parHeight = video_body->getPARHeight();
+			properties.frameCount = info.nb_frames;
+			properties.fps1000 = info.fps1000;
 		}
-		else
-		{
-			properties.width = 0;
-			properties.height = 0;
-			properties.parWidth = 0;
-			properties.parHeight = 0;
-		}
 
-		properties.structSize = sizeof(vidEncVideoProperties);
-
 		if (plugin->isConfigurable(plugin->encoderId))
 			if (plugin->configure(plugin->encoderId, &properties))
 			{

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encCopy.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encCopy.cpp	2008-04-28 11:35:40 UTC (rev 3993)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encCopy.cpp	2008-04-28 15:08:46 UTC (rev 3994)
@@ -99,7 +99,7 @@
 
 /****************************************************************/
 uint8_t
-EncoderCopy::configure (AVDMGenericVideoStream * instream)
+EncoderCopy::configure (AVDMGenericVideoStream * instream, int useExistingLogFile)
 {
   aviInfo info;
   _in = instream;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encCopy.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encCopy.h	2008-04-28 11:35:40 UTC (rev 3993)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encCopy.h	2008-04-28 15:08:46 UTC (rev 3994)
@@ -33,7 +33,7 @@
     EncoderCopy (COMPRES_PARAMS * codecconfig);
    ~EncoderCopy ();		// can be called twice if needed ..
   virtual uint8_t isDualPass (void);
-  virtual uint8_t configure (AVDMGenericVideoStream * instream);
+  virtual uint8_t configure (AVDMGenericVideoStream * instream, int useExistingLogFile);
   virtual uint8_t encode (uint32_t frame, ADMBitstream *out);
   virtual uint8_t setLogFile (const char *p, uint32_t fr);
   virtual uint8_t stop (void);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encRequant.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encRequant.cpp	2008-04-28 11:35:40 UTC (rev 3993)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encRequant.cpp	2008-04-28 15:08:46 UTC (rev 3994)
@@ -107,7 +107,7 @@
 
 /****************************************************************/
 uint8_t
-EncoderRequant::configure (AVDMGenericVideoStream * instream)
+EncoderRequant::configure (AVDMGenericVideoStream * instream, int useExistingLogFile)
 {
   aviInfo info;
   _in = instream;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encRequant.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encRequant.h	2008-04-28 11:35:40 UTC (rev 3993)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encRequant.h	2008-04-28 15:08:46 UTC (rev 3994)
@@ -30,7 +30,7 @@
           EncoderRequant (COMPRES_PARAMS * codecconfig);
           ~EncoderRequant ();		// can be called twice if needed ..
   virtual uint8_t isDualPass (void);
-  virtual uint8_t configure (AVDMGenericVideoStream * instream);
+  virtual uint8_t configure (AVDMGenericVideoStream * instream, int useExistingLogFile);
   virtual uint8_t encode (uint32_t frame, ADMBitstream *out);
   virtual uint8_t setLogFile (const char *p, uint32_t fr);
   virtual uint8_t stop (void);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encXvid4.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encXvid4.cpp	2008-04-28 11:35:40 UTC (rev 3993)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encXvid4.cpp	2008-04-28 15:08:46 UTC (rev 3994)
@@ -61,7 +61,7 @@
 };
 //--------------------------------
 uint8_t
-EncoderXvid4::configure (AVDMGenericVideoStream * instream)
+EncoderXvid4::configure (AVDMGenericVideoStream * instream, int useExistingLogFile)
 {
   ADM_assert (instream);
   ADV_Info *info;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encXvid4.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encXvid4.h	2008-04-28 11:35:40 UTC (rev 3993)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encXvid4.h	2008-04-28 15:08:46 UTC (rev 3994)
@@ -42,7 +42,7 @@
     EncoderXvid4 (COMPRES_PARAMS * codecconfig);
    ~EncoderXvid4 ();		// can be called twice if needed ..
   virtual uint8_t isDualPass (void);
-  virtual uint8_t configure (AVDMGenericVideoStream * instream);
+  virtual uint8_t configure (AVDMGenericVideoStream * instream, int useExistingLogFile);
  
   virtual uint8_t encode (uint32_t frame, ADMBitstream *out);
   virtual uint8_t setLogFile (const char *p, uint32_t fr);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encdivx.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encdivx.cpp	2008-04-28 11:35:40 UTC (rev 3993)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encdivx.cpp	2008-04-28 15:08:46 UTC (rev 3994)
@@ -54,7 +54,7 @@
 };
 //--------------------------------
 uint8_t
-EncoderDivx::configure (AVDMGenericVideoStream * instream)
+EncoderDivx::configure (AVDMGenericVideoStream * instream, int useExistingLogFile)
 {
   //  COMPRES_PARAMS par;
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encdivx.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encdivx.h	2008-04-28 11:35:40 UTC (rev 3993)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encdivx.h	2008-04-28 15:08:46 UTC (rev 3994)
@@ -32,7 +32,7 @@
 public:
   EncoderDivx (DIVXConfig * conf);
   virtual uint8_t isDualPass (void);
-  virtual uint8_t configure (AVDMGenericVideoStream * instream);
+  virtual uint8_t configure (AVDMGenericVideoStream * instream, int useExistingLogFile);
   virtual uint8_t encode (uint32_t frame, uint32_t * len, uint8_t * out,
 			  uint32_t * flags);
   virtual uint8_t setLogFile (const char *p, uint32_t fr);

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encdivx2p.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encdivx2p.cpp	2008-04-28 11:35:40 UTC (rev 3993)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encdivx2p.cpp	2008-04-28 15:08:46 UTC (rev 3994)
@@ -1 +0,0 @@
-// Rmed

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encffmpeg.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encffmpeg.cpp	2008-04-28 11:35:40 UTC (rev 3993)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encffmpeg.cpp	2008-04-28 15:08:46 UTC (rev 3994)
@@ -64,7 +64,7 @@
 
 }
 uint8_t
-EncoderFFMPEGHuff::configure (AVDMGenericVideoStream * instream)
+EncoderFFMPEGHuff::configure (AVDMGenericVideoStream * instream, int useExistingLogFile)
 {
   ADM_assert (instream);
   ADV_Info *info;
@@ -105,7 +105,7 @@
 
 }
 uint8_t
-EncoderFFMPEGFFHuff::configure (AVDMGenericVideoStream * instream)
+EncoderFFMPEGFFHuff::configure (AVDMGenericVideoStream * instream, int useExistingLogFile)
 {
   ADM_assert (instream);
   ADV_Info *info;
@@ -148,7 +148,7 @@
 
 }
 uint8_t
-EncoderFFMPEGFFV1::configure (AVDMGenericVideoStream * instream)
+EncoderFFMPEGFFV1::configure (AVDMGenericVideoStream * instream, int useExistingLogFile)
 {
   ADM_assert (instream);
   ADV_Info *info;
@@ -187,7 +187,7 @@
 
 }
 uint8_t
-EncodeFFMPEGSNow::configure (AVDMGenericVideoStream * instream)
+EncodeFFMPEGSNow::configure (AVDMGenericVideoStream * instream, int useExistingLogFile)
 {
   ADM_assert (instream);
   ADV_Info *info;
@@ -229,7 +229,7 @@
 
 }
 uint8_t
-EncoderFFMPEGDV::configure (AVDMGenericVideoStream * instream)
+EncoderFFMPEGDV::configure (AVDMGenericVideoStream * instream, int useExistingLogFile)
 {
   ADM_assert (instream);
   ADV_Info *info;
@@ -276,7 +276,7 @@
 
 }
 uint8_t
-EncoderFFMPEGFLV1::configure (AVDMGenericVideoStream * instream)
+EncoderFFMPEGFLV1::configure (AVDMGenericVideoStream * instream, int useExistingLogFile)
 {
   ADM_assert (instream);
   ADV_Info *info;
@@ -344,7 +344,7 @@
   return NULL;
 }
 //--------------------------------
-uint8_t EncoderFFMPEG::configure (AVDMGenericVideoStream * instream)
+uint8_t EncoderFFMPEG::configure (AVDMGenericVideoStream * instream, int useExistingLogFile)
 {
 
   ADM_assert (instream);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encffmpeg.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encffmpeg.h	2008-04-28 11:35:40 UTC (rev 3993)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encffmpeg.h	2008-04-28 15:08:46 UTC (rev 3994)
@@ -36,7 +36,7 @@
     stop ();
   };				// can be called twice if needed ..
   virtual uint8_t isDualPass (void);
-  virtual uint8_t configure (AVDMGenericVideoStream * instream);
+  virtual uint8_t configure (AVDMGenericVideoStream * instream, int useExistingLogFile);
   virtual uint8_t encode (uint32_t frame,ADMBitstream *out);
   virtual uint8_t setLogFile (const char *p, uint32_t fr);
   virtual uint8_t stop (void);
@@ -71,7 +71,7 @@
   {
     return 0;
   };
-  virtual uint8_t configure (AVDMGenericVideoStream * instream);
+  virtual uint8_t configure (AVDMGenericVideoStream * instream, int useExistingLogFile);
   virtual uint8_t setLogFile (const char *p, uint32_t fr)
   {
     UNUSED_ARG (p);
@@ -113,7 +113,7 @@
   {
     return 0;
   };
-  virtual uint8_t configure (AVDMGenericVideoStream * instream);
+  virtual uint8_t configure (AVDMGenericVideoStream * instream, int useExistingLogFile);
   virtual uint8_t setLogFile (const char *p, uint32_t fr)
   {
     UNUSED_ARG (p);
@@ -156,7 +156,7 @@
   {
     return 0;
   };
-  virtual uint8_t configure (AVDMGenericVideoStream * instream);
+  virtual uint8_t configure (AVDMGenericVideoStream * instream, int useExistingLogFile);
   virtual uint8_t setLogFile (const char *p, uint32_t fr)
   {
     UNUSED_ARG (p);
@@ -202,7 +202,7 @@
     EncoderFFMPEGMpeg1 (FF_CODEC_ID id, COMPRES_PARAMS * config);
     virtual ~ EncoderFFMPEGMpeg1 ();	// can be called twice if needed ..
   virtual uint8_t isDualPass (void);
-  virtual uint8_t configure (AVDMGenericVideoStream * instream);
+  virtual uint8_t configure (AVDMGenericVideoStream * instream, int useExistingLogFile);
   virtual uint8_t encode (uint32_t frame, ADMBitstream *out);
   virtual uint8_t setLogFile (const char *p, uint32_t fr);
   virtual uint8_t stop (void);
@@ -227,7 +227,7 @@
   {
     return 0;
   };
-  virtual uint8_t configure (AVDMGenericVideoStream * instream);
+  virtual uint8_t configure (AVDMGenericVideoStream * instream, int useExistingLogFile);
   virtual uint8_t setLogFile (const char *p, uint32_t fr)
   {
     UNUSED_ARG (p);
@@ -272,7 +272,7 @@
   {
     return 0;
   };
-  virtual uint8_t configure (AVDMGenericVideoStream * instream);
+  virtual uint8_t configure (AVDMGenericVideoStream * instream, int useExistingLogFile);
   virtual uint8_t setLogFile (const char *p, uint32_t fr)
   {
     UNUSED_ARG (p);
@@ -314,7 +314,7 @@
   {
     return 0;
   };
-  virtual uint8_t configure (AVDMGenericVideoStream * instream);
+  virtual uint8_t configure (AVDMGenericVideoStream * instream, int useExistingLogFile);
   virtual uint8_t setLogFile (const char *p, uint32_t fr)
   {
     UNUSED_ARG (p);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encffmpeg1.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encffmpeg1.cpp	2008-04-28 11:35:40 UTC (rev 3993)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encffmpeg1.cpp	2008-04-28 15:08:46 UTC (rev 3994)
@@ -202,7 +202,7 @@
 
 //--------------------------------
 uint8_t
-EncoderFFMPEGMpeg1::configure (AVDMGenericVideoStream * instream)
+EncoderFFMPEGMpeg1::configure (AVDMGenericVideoStream * instream, int useExistingLogFile)
 {
 
   ADM_assert (instream);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encmjpeg.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encmjpeg.cpp	2008-04-28 11:35:40 UTC (rev 3993)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encmjpeg.cpp	2008-04-28 15:08:46 UTC (rev 3994)
@@ -63,7 +63,7 @@
 };
 //--------------------------------
 uint8_t
-EncoderMjpeg::configure (AVDMGenericVideoStream * instream)
+EncoderMjpeg::configure (AVDMGenericVideoStream * instream, int useExistingLogFile)
 {
   ADV_Info *info;
 //         int q,s;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encmjpeg.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encmjpeg.h	2008-04-28 11:35:40 UTC (rev 3993)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encmjpeg.h	2008-04-28 15:08:46 UTC (rev 3994)
@@ -35,7 +35,7 @@
   {
     return 0;
   };				// mjpeg is always monopass
-  virtual uint8_t configure (AVDMGenericVideoStream * instream);
+  virtual uint8_t configure (AVDMGenericVideoStream * instream, int useExistingLogFile);
   virtual uint8_t encode (uint32_t frame, ADMBitstream *out);
   virtual uint8_t setLogFile (const char *p, uint32_t fr);	// for dual pass only
   virtual uint8_t stop (void);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encmpeg2enc.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encmpeg2enc.cpp	2008-04-28 11:35:40 UTC (rev 3993)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encmpeg2enc.cpp	2008-04-28 15:08:46 UTC (rev 3994)
@@ -191,7 +191,7 @@
 
 
 //--------------------------------
-uint8_t     EncoderMpeg2enc::configure (AVDMGenericVideoStream * instream)
+uint8_t     EncoderMpeg2enc::configure (AVDMGenericVideoStream * instream, int useExistingLogFile)
 {
 
   ADM_assert (instream);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encmpeg2enc.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encmpeg2enc.h	2008-04-28 11:35:40 UTC (rev 3993)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encmpeg2enc.h	2008-04-28 15:08:46 UTC (rev 3994)
@@ -46,7 +46,7 @@
     EncoderMpeg2enc (MPEG2ENC_ID id, COMPRES_PARAMS * config);
     virtual ~ EncoderMpeg2enc ();	// can be called twice if needed ..
     virtual uint8_t isDualPass (void);
-    virtual uint8_t configure (AVDMGenericVideoStream * instream);
+    virtual uint8_t configure (AVDMGenericVideoStream * instream, int useExistingLogFile);
     virtual uint8_t encode (uint32_t frame, ADMBitstream *out);
     virtual uint8_t setLogFile (const char *p, uint32_t fr);
     virtual uint8_t stop (void);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encoder.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encoder.h	2008-04-28 11:35:40 UTC (rev 3993)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encoder.h	2008-04-28 15:08:46 UTC (rev 3994)
@@ -81,7 +81,7 @@
   };
   virtual ~ Encoder (void);
   virtual uint8_t isDualPass (void) = 0;
-  virtual uint8_t configure (AVDMGenericVideoStream * instream) = 0;
+  virtual uint8_t configure (AVDMGenericVideoStream * instream, int useExistingLogFile) = 0;
   virtual uint8_t encode (uint32_t frame, ADMBitstream * out) = 0;
   virtual uint8_t stop (void) = 0;
   virtual uint8_t setLogFile (const char *o, uint32_t frames) = 0;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encx264.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encx264.cpp	2008-04-28 11:35:40 UTC (rev 3993)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encx264.cpp	2008-04-28 15:08:46 UTC (rev 3994)
@@ -75,7 +75,7 @@
 }
 //--------------------------------
 uint8_t
-EncoderX264::configure (AVDMGenericVideoStream * instream)
+EncoderX264::configure (AVDMGenericVideoStream * instream, int useExistingLogFile)
 {
   ADM_assert (instream);
   ADV_Info *info;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encx264.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encx264.h	2008-04-28 11:35:40 UTC (rev 3993)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encx264.h	2008-04-28 15:08:46 UTC (rev 3994)
@@ -46,7 +46,7 @@
     EncoderX264 (COMPRES_PARAMS * conf);
    ~EncoderX264 ();
   virtual uint8_t isDualPass (void);	// mjpeg is always monopass
-  virtual uint8_t configure (AVDMGenericVideoStream * instream);
+  virtual uint8_t configure (AVDMGenericVideoStream * instream, int useExistingLogFile);
   virtual uint8_t encode (uint32_t frame, ADMBitstream *out);
   virtual uint8_t setLogFile (const char *p, uint32_t fr);	// for dual pass only
   virtual uint8_t stop (void);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encxvid.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encxvid.cpp	2008-04-28 11:35:40 UTC (rev 3993)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encxvid.cpp	2008-04-28 15:08:46 UTC (rev 3994)
@@ -68,7 +68,7 @@
 
 };
 //--------------------------------
-uint8_t EncoderXvid::configure (AVDMGenericVideoStream * instream)
+uint8_t EncoderXvid::configure (AVDMGenericVideoStream * instream, int useExistingLogFile)
 {
   ADM_assert (instream);
   ADV_Info *

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encxvid.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encxvid.h	2008-04-28 11:35:40 UTC (rev 3993)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encxvid.h	2008-04-28 15:08:46 UTC (rev 3994)
@@ -41,7 +41,7 @@
     EncoderXvid (XVIDconfig * codecconfig);
    ~EncoderXvid ();		// can be called twice if needed ..
   virtual uint8_t isDualPass (void);
-  virtual uint8_t configure (AVDMGenericVideoStream * instream);
+  virtual uint8_t configure (AVDMGenericVideoStream * instream, int useExistingLogFile);
   virtual uint8_t encode (uint32_t frame, uint32_t * len, uint8_t * out,
 			  uint32_t * flags);
   virtual uint8_t setLogFile (const char *p, uint32_t fr);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encyv12.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encyv12.cpp	2008-04-28 11:35:40 UTC (rev 3993)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encyv12.cpp	2008-04-28 15:08:46 UTC (rev 3994)
@@ -46,7 +46,7 @@
 };
 //--------------------------------
 uint8_t
-EncoderYV12::configure (AVDMGenericVideoStream * instream)
+EncoderYV12::configure (AVDMGenericVideoStream * instream, int useExistingLogFile)
 {
   ADM_assert (instream);
   ADV_Info *info;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encyv12.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encyv12.h	2008-04-28 11:35:40 UTC (rev 3993)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encyv12.h	2008-04-28 15:08:46 UTC (rev 3994)
@@ -33,7 +33,7 @@
   {
     return 0;
   };
-  virtual uint8_t configure (AVDMGenericVideoStream * instream);
+  virtual uint8_t configure (AVDMGenericVideoStream * instream, int useExistingLogFile);
   virtual uint8_t encode (uint32_t frame, ADMBitstream *out);
 
   virtual uint8_t stop (void);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy.cpp	2008-04-28 11:35:40 UTC (rev 3993)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy.cpp	2008-04-28 15:08:46 UTC (rev 3994)
@@ -103,7 +103,7 @@
  encoding_gui->setPhasis(QT_TR_NOOP("Saving"));
  // Set up our copy codec ...
   copy=new EncoderCopy(NULL);
-  if(!copy->configure(_incoming))
+  if(!copy->configure(_incoming, 0))
   {
       printf("Copy cannot [configure] \n");
       return 0;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_pack.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_pack.cpp	2008-04-28 11:35:40 UTC (rev 3993)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_pack.cpp	2008-04-28 15:08:46 UTC (rev 3994)
@@ -132,7 +132,7 @@
  
  // Set up our copy codec ...
   copy=new EncoderCopy(NULL);
-  if(!copy->configure(_incoming))
+  if(!copy->configure(_incoming, 0))
   {
       printf("Copy cannot [configure] \n");
       return 0;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_unpack.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_unpack.cpp	2008-04-28 11:35:40 UTC (rev 3993)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_unpack.cpp	2008-04-28 15:08:46 UTC (rev 3994)
@@ -106,7 +106,7 @@
  
  // Set up our copy codec ...
   copy=new EncoderCopy(NULL);
-  if(!copy->configure(_incoming))
+  if(!copy->configure(_incoming, 0))
   {
       printf("Copy cannot [configure] \n");
       return 0;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp	2008-04-28 11:35:40 UTC (rev 3993)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp	2008-04-28 15:08:46 UTC (rev 3994)
@@ -78,10 +78,24 @@
   TwoPassLogFile=new char[strlen(name)+6];
   strcpy(TwoPassLogFile,name);
   strcat(TwoPassLogFile,".stat");
- _encode->setLogFile(TwoPassLogFile,frametogo);
+  _encode->setLogFile(TwoPassLogFile,frametogo);
+
+  int reuse = 0;
+
+  if (_encode->isDualPass())
+  {
+	  FILE *tmp;
+
+	  if ((tmp = fopen(TwoPassLogFile,"rt")))
+	  {
+		  fclose(tmp);
+
+		  if (GUI_Question(QT_TR_NOOP("Reuse the existing log file?")))
+			  reuse = 1;
+	  }
+  }
  
- 
-  if (!_encode->configure (_incoming))
+  if (!_encode->configure (_incoming, reuse))
     {
       delete 	_encode;
       _encode = NULL;
@@ -109,22 +123,9 @@
     {
       uint8_t *buffer;
       uint32_t len, flag;
-      FILE *tmp;
-	uint8_t reuse=0;
 
  	aprintf("\n** Dual pass encoding**\n");
 
-	
-	
-	if((tmp=fopen(TwoPassLogFile,"rt")))
-	{
-		fclose(tmp);
-                if(GUI_Question(QT_TR_NOOP("\n Reuse the existing log-file ?")))
-		{
-			reuse=1;
-		}
-	}
-	
 	if(!reuse)
  	{
 	

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp	2008-04-28 11:35:40 UTC (rev 3993)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp	2008-04-28 15:08:46 UTC (rev 3994)
@@ -138,7 +138,7 @@
                 else
                         encoding_gui->setCodec(_encode->getDisplayName());
                 
-                if (!_encode->configure (_incoming))
+                if (!_encode->configure (_incoming, 0))
                 {
                       GUI_Error_HIG (QT_TR_NOOP("Filter init failed"), NULL);
                      goto  stopit;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp	2008-04-28 11:35:40 UTC (rev 3993)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp	2008-04-28 15:08:46 UTC (rev 3994)
@@ -190,7 +190,7 @@
                 else
                         encoding_gui->setCodec(_encode->getDisplayName());
                 
-                if (!_encode->configure (_incoming))
+                if (!_encode->configure (_incoming, 0))
                 {
                       GUI_Error_HIG (QT_TR_NOOP("Filter init failed"), NULL);
                      goto  stopit;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp	2008-04-28 11:35:40 UTC (rev 3993)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp	2008-04-28 15:08:46 UTC (rev 3994)
@@ -66,7 +66,7 @@
 static char *twoFake=NULL;
 
 extern AVDMGenericAudioStream *mpt_getAudioStream(void);
-uint8_t prepareDualPass(uint32_t bufferSize,uint8_t *buffer,char *TwoPassLogFile,DIA_encoding *encoding_gui,Encoder *_encode,uint32_t total);
+uint8_t prepareDualPass(uint32_t bufferSize,uint8_t *buffer,DIA_encoding *encoding_gui,Encoder *_encode,uint32_t total,int reuse);
 uint8_t extractVolHeader(uint8_t *data,uint32_t dataSize,uint32_t *headerSize);
 extern void    UI_purge(void );
 /*
@@ -114,6 +114,8 @@
 uint32_t    totalAudioSize=0;
 uint32_t sent=0;
 const char *containerTitle;
+int reuse = 0;
+
            switch(type)
            {
              case ADM_PSP:muxerType=MUXER_PSP;containerTitle=QT_TR_NOOP("PSP");break;
@@ -160,17 +162,31 @@
                 strcat(TwoPassLogFile,".stat");
                 _encode->setLogFile(TwoPassLogFile,total);
 
-                if (!_encode->configure (_incoming))
+				dualPass = _encode->isDualPass();
+
+				if (dualPass)
+				{
+					FILE *tmp;
+
+					if ((tmp = fopen(TwoPassLogFile,"rt")))
+					{
+						fclose(tmp);
+
+						if (GUI_Question(QT_TR_NOOP("Reuse the existing log file?")))
+							reuse = 1;
+					}
+				}
+
+                if (!_encode->configure (_incoming, reuse))
                 {
                       GUI_Error_HIG (QT_TR_NOOP("Filter init failed"), NULL);
                      goto  stopit;
-                };
+                }
 
-                dualPass=_encode->isDualPass();
                 if(dualPass)
                 {
                        
-                        if(!prepareDualPass(bitstream.bufferSize,videoBuffer,TwoPassLogFile,encoding_gui,_encode,total))
+                        if(!prepareDualPass(bitstream.bufferSize,videoBuffer,encoding_gui,_encode,total,reuse))
                                 goto stopit;
                 }else
                 {
@@ -373,26 +389,16 @@
            deleteAudioFilter (audio);
            return ret;
 }
-uint8_t prepareDualPass(uint32_t bufferSize,uint8_t *buffer,char *TwoPassLogFile,DIA_encoding *encoding_gui,Encoder *_encode,uint32_t total)
+uint8_t prepareDualPass(uint32_t bufferSize,uint8_t *buffer,DIA_encoding *encoding_gui,Encoder *_encode,uint32_t total,int reuse)
 {
       uint32_t len, flag;
-      FILE *tmp;
-      uint8_t reuse=0,r;
+      uint8_t r;
       ADMBitstream bitstream(0);
       uint32_t prefill=0;
       uint32_t sent=0;
       
         aprintf("\n** Dual pass encoding**\n");
 
-        if((tmp=fopen(TwoPassLogFile,"rt")))
-        {
-                fclose(tmp);
-                if(GUI_Question(QT_TR_NOOP("\n Reuse the existing log-file ?")))
-                {
-                        reuse=1;
-                }
-        }
-        
         if(!reuse)
         {
         

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp	2008-04-28 11:35:40 UTC (rev 3993)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp	2008-04-28 15:08:46 UTC (rev 3994)
@@ -214,7 +214,7 @@
           copy=new EncoderCopy(NULL);
           muxerMT context;
           
-          copy->configure(NULL);
+          copy->configure(NULL, 0);
           // 
           memset(&context,0,sizeof(context));
           context.videoEncoder=copy;
@@ -269,7 +269,7 @@
             audioQueueMT context;
             uint8_t r;
             
-            copy->configure(NULL);
+            copy->configure(NULL, 0);
             pq=new PacketQueue("TS audioQ",5000,2*1024*1024);
             memset(&context,0,sizeof(context));
             context.audioEncoder=audio;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp	2008-04-28 11:35:40 UTC (rev 3993)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp	2008-04-28 15:08:46 UTC (rev 3994)
@@ -94,6 +94,7 @@
 ADMBitstream bitstream(0);
 uint32_t audioSum=0;
 DIA_encoding  *encoding;
+int reuse = 0;
 
         twoPass=new char[strlen(name)+6];
         twoFake=new char[strlen(name)+6];
@@ -229,7 +230,16 @@
       }
 
       encoder->setLogFile(twoPass,total);
-      if(!encoder->configure(_incoming))
+
+	  if (encoder->isDualPass())
+	  {
+		  printf("Verifying log file\n");
+
+		  if (encoder->verifyLog(twoPass, total) && GUI_Question(QT_TR_NOOP("Reuse the existing log file?")))
+			  reuse = 1;
+	  }
+
+      if(!encoder->configure(_incoming, reuse))
               goto finishvcdff;
 
       _buffer=new uint8_t[_page]; // Might overflow if _page only
@@ -282,15 +292,6 @@
         // pass 1
         if(encoder->isDualPass()) //Cannot be requant
         {
-                        FILE *fd;
-                        uint8_t reuse=0;
-                        
-                        printf("Verifying log file\n");
-                        if(encoder->verifyLog(twoPass,total))
-                          if(GUI_Question(QT_TR_NOOP("Reuse log file ?")))
-                                {
-                                        reuse=1;
-                                }
                         if(!reuse)
                         {
                                 encoding->setPhasis (QT_TR_NOOP("Pass 1/2"));

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp	2008-04-28 11:35:40 UTC (rev 3993)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_ogm/op_ogsaveprocess.cpp	2008-04-28 15:08:46 UTC (rev 3994)
@@ -63,7 +63,22 @@
    
  	_encode->setLogFile(TwoPassLogFile,_togo);
 	
-  	if (!_encode->configure (_incoming))
+	int reuse = 0;
+
+	if (_encode->isDualPass())
+	{
+		FILE *tmp;
+
+		if ((tmp = fopen(TwoPassLogFile,"rt")))
+		{
+			fclose(tmp);
+
+			if (GUI_Question(QT_TR_NOOP("Reuse the existing log file?")))
+				reuse = 1;
+		}
+	}
+
+  	if (!_encode->configure (_incoming, reuse))
     	{
       		delete 	_encode;
       		_encode = NULL;
@@ -83,19 +98,8 @@
 	{
 		uint8_t *buffer;
 		uint32_t len, flag;
-		FILE *tmp;
-		uint8_t reuse=0;
 
 		aprintf("\n** Dual pass encoding**\n");
-
-		if((tmp=fopen(TwoPassLogFile,"rt")))
-		{
-			fclose(tmp);
-                        if(GUI_Question(QT_TR_NOOP("\n Reuse the existing log-file ?")))
-			{
-				reuse=1;
-			}
-		}
 	
 		if(!reuse)
  		{

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_plugin/ADM_vidEnc_plugin.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_plugin/ADM_vidEnc_plugin.h	2008-04-28 11:35:40 UTC (rev 3993)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_plugin/ADM_vidEnc_plugin.h	2008-04-28 15:08:46 UTC (rev 3994)
@@ -19,8 +19,8 @@
 
 #define ADM_VIDENC_API_VERSION 1
 
+#define ADM_VIDENC_ERR_SUCCESS 1
 #define ADM_VIDENC_ERR_FAILED 0
-#define ADM_VIDENC_ERR_SUCCESS 1
 #define ADM_VIDENC_ERR_CLOSED -1
 #define ADM_VIDENC_ERR_ALREADY_OPEN -2
 #define ADM_VIDENC_ERR_INVALID_ENCODER_ID -3
@@ -52,7 +52,7 @@
 	int64_t ptsFrame;
 	unsigned int quantiser;
 	int frameType;
-} vidEncEncodeParams;
+} vidEncEncodeParameters;
 
 typedef struct
 {
@@ -61,6 +61,10 @@
 	unsigned int height;
 	unsigned int parWidth;
 	unsigned int parHeight;
+	unsigned int frameCount;
+	unsigned int fps1000;
+	const char* logFileName;
+	int useExistingLogFile;
 } vidEncVideoProperties;
 
 typedef struct
@@ -85,11 +89,11 @@
 int vidEncSetOptions(int encoderId, vidEncOptions *encodeOptions, char *pluginOptions);
 
 int vidEncGetPassCount(int encoderId);
-int vidEncGetLastPass(int encoderId);
+int vidEncGetCurrentPass(int encoderId);
 
 int vidEncOpen(int encoderId, vidEncVideoProperties *properties);
 int vidEncBeginPass(int encoderId);
-int vidEncEncodeFrame(int encoderId, vidEncEncodeParams *encodeParams);
+int vidEncEncodeFrame(int encoderId, vidEncEncodeParameters *encodeParams);
 int vidEndFinishPass(int encoderId);
 int vidEncClose(int encoderId);
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.cpp	2008-04-28 11:35:40 UTC (rev 3993)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.cpp	2008-04-28 15:08:46 UTC (rev 3994)
@@ -14,6 +14,8 @@
  *                                                                         *
  ***************************************************************************/
 
+#include <math.h>
+
 #include "config.h"
 #include "ADM_inttype.h"
 #include "ADM_files.h"
@@ -34,7 +36,7 @@
 	int x264Encoder_getCurrentPass(void) { return encoder.getCurrentPass(); }
 	int x264Encoder_open(vidEncVideoProperties *properties) { return encoder.open(properties); }
 	int x264Encoder_beginPass(void) { return encoder.beginPass(); }
-	int x264Encoder_encodeFrame(vidEncEncodeParams *encodeParams) { return encoder.encodeFrame(encodeParams); }
+	int x264Encoder_encodeFrame(vidEncEncodeParameters *encodeParams) { return encoder.encodeFrame(encodeParams); }
 	int x264Encoder_finishPass(void) { return encoder.finishPass(); }
 	void x264Encoder_close(void) { encoder.close(); }
 }
@@ -43,15 +45,23 @@
 {
 	_loader = NULL;
 	_handler = NULL;
+	_opened = false;
+
 	_passCount = 1;
 	_currentPass = 0;
 	_openPass = false;
 
+	_logFileName = NULL;
+
+	_extraData = NULL;
+	_extraSize = 0;
+
+	_seiUserData = NULL;
+	_seiUserDataLen = 0;
+
 	_encodeOptions.structSize = sizeof(vidEncOptions);
 	_encodeOptions.encodeMode = ADM_VIDENC_MODE_AQP;
 	_encodeOptions.encodeModeParameter = 26;
-
-	updateParameters();
 }
 
 x264Encoder::~x264Encoder(void)
@@ -60,6 +70,9 @@
 
 	if (_loader)
 		delete _loader;
+
+	if (_logFileName)
+		delete [] _logFileName;
 }
 
 void x264Encoder::setUiType(int uiType)
@@ -125,6 +138,9 @@
 
 int x264Encoder::setOptions(vidEncOptions *encodeOptions, char *pluginOptions)
 {
+	if (_opened)
+		return ADM_VIDENC_ERR_ALREADY_OPEN;
+
 	bool success = true;
 
 	if (pluginOptions)
@@ -133,43 +149,12 @@
 	if (encodeOptions && success)
 		memcpy(&_encodeOptions, encodeOptions, sizeof(vidEncOptions));
 
-	updateParameters();
-
-	return success;
+	if (success)
+		return ADM_VIDENC_ERR_SUCCESS;
+	else
+		return ADM_VIDENC_ERR_FAILED;
 }
 
-void x264Encoder::updateParameters(void)
-{
-	x264_param_t *param = _options.getParameters();
-
-	memcpy(&_param, param, sizeof(x264_param_t));
-	delete param;
-
-	switch (_encodeOptions.encodeMode)
-	{
-		case ADM_VIDENC_MODE_CBR:
-			_param.rc.i_rc_method = X264_RC_ABR;
-			_param.rc.i_bitrate = _encodeOptions.encodeModeParameter;
-			break;
-		case ADM_VIDENC_MODE_CQP:
-			_param.rc.i_rc_method = X264_RC_CQP;
-			_param.rc.i_qp_constant = _encodeOptions.encodeModeParameter;
-			break;
-		case ADM_VIDENC_MODE_AQP:
-			_param.rc.i_rc_method = X264_RC_CRF;
-			_param.rc.f_rf_constant = _encodeOptions.encodeModeParameter;
-			break;
-		case ADM_VIDENC_MODE_2PASS_SIZE:
-			_param.rc.i_rc_method = X264_RC_ABR;
-			_param.rc.i_bitrate = _encodeOptions.encodeModeParameter;
-			break;
-		case ADM_VIDENC_MODE_2PASS_ABR:
-			_param.rc.i_rc_method = X264_RC_ABR;
-			_param.rc.i_bitrate = _encodeOptions.encodeModeParameter;
-			break;
-	}
-}
-
 int x264Encoder::getCurrentPass(void)
 {
 	return _currentPass;
@@ -182,44 +167,45 @@
 
 int x264Encoder::open(vidEncVideoProperties *properties)
 {
-	if (_handler)
+	if (_opened)
 		return ADM_VIDENC_ERR_ALREADY_OPEN;
 
-	_param.i_width = _width = properties->width;
-	_param.i_height = _height = properties->height;
+	_opened = true;
+	_currentPass = 0;
 
-	// FIXME
-	_param.rc.i_rc_method = X264_RC_CRF;
-	_param.rc.f_rf_constant = 26;
-	_param.vui.i_sar_height = 1;
-	_param.vui.i_sar_width = 1;
+	memcpy(&_properties, properties, sizeof(vidEncVideoProperties));
+	_properties.logFileName = NULL;
 
-    _param.i_fps_num = 25000;
-    _param.i_fps_den = 1000;
+	if (_logFileName)
+		delete [] _logFileName;
 
-	//_param.rc.b_stat_read = 1;
-	//_param.rc.psz_stat_in = "C:\\Users\\Grant\\Desktop\\test.avi.stat";
+	_logFileName = new char[strlen(properties->logFileName) + 1];
+	strcpy(_logFileName, properties->logFileName);
 
-	printParam(&_param);
-	printCqm((uint8_t*)&_param, sizeof(x264_param_t));
-	printf("\n");
+	updateEncodeParameters(&_properties);
 
-	_handler = x264_encoder_open(&_param);
-	_seiUserData = NULL;
-	_seiUserDataLen = 0;
+	_param.i_width = _properties.width;
+	_param.i_height = _properties.height;
+	_param.i_fps_num = _properties.fps1000;
+	_param.i_fps_den = 1000;
 
-	_extraData = NULL;
-	_extraSize = 0;
+	if (_options.getSarAsInput())
+	{
+		_param.vui.i_sar_width = _properties.parWidth;
+		_param.vui.i_sar_height = _properties.parHeight;
+	}
 
-	if (_handler)
-		return ADM_VIDENC_ERR_SUCCESS;
-	else
-		return ADM_VIDENC_ERR_FAILED;
+	if (_passCount > 1 && properties->useExistingLogFile)
+		_currentPass++;
+
+	printParam(&_param);
+
+	return ADM_VIDENC_ERR_SUCCESS;
 }
 
 int x264Encoder::beginPass(void)
 {
-	if (!_handler)
+	if (!_opened)
 		return ADM_VIDENC_ERR_CLOSED;
 
 	if (_openPass)
@@ -230,11 +216,50 @@
 
 	_openPass = true;
 	_currentPass++;
+
+	printf("[x264] begin pass %d/%d\n", _currentPass, _passCount);
+
+	if (_passCount > 1)
+	{
+		if (_currentPass == 1)
+		{
+			_param.rc.b_stat_write = 1;
+			_param.rc.b_stat_read = 0;
+			_param.rc.psz_stat_out = _logFileName;
+			printf("[x264] writing to %s\n", _logFileName);
+		}
+		else
+		{
+			_param.rc.b_stat_write = 0;
+			_param.rc.b_stat_read = 1;
+			_param.rc.psz_stat_in = _logFileName;
+			printf("[x264] reading from %s\n", _logFileName);
+		}
+	}
+	else
+	{
+		_param.rc.b_stat_write = 0;
+		_param.rc.b_stat_read = 0;
+	}
+
+	_handler = x264_encoder_open(&_param);
+	_seiUserData = NULL;
+	_seiUserDataLen = 0;
+
+	_extraData = NULL;
+	_extraSize = 0;
+
+	_currentFrame = 0;
+
+	if (_handler)
+		return ADM_VIDENC_ERR_SUCCESS;
+	else
+		return ADM_VIDENC_ERR_FAILED;
 }
 
-int x264Encoder::encodeFrame(vidEncEncodeParams *encodeParams)
+int x264Encoder::encodeFrame(vidEncEncodeParameters *encodeParams)
 {
-	if (!_handler)
+	if (!_opened)
 		return ADM_VIDENC_ERR_CLOSED;
 
 	x264_nal_t *nal;
@@ -246,11 +271,11 @@
 	_picture.img.i_csp = X264_CSP_I420;
 	_picture.img.i_plane = 3;
 	_picture.img.plane[0] = encodeParams->frameData;	// Y
-	_picture.img.plane[2] = encodeParams->frameData + _width * _height;	// U
-	_picture.img.plane[1] = encodeParams->frameData + ((_width * _height * 5) >> 2);	// V
-	_picture.img.i_stride[0] = _width;
-	_picture.img.i_stride[1] = _width >> 1;
-	_picture.img.i_stride[2] = _width >> 1;
+	_picture.img.plane[2] = encodeParams->frameData + _param.i_width * _param.i_height;	// U
+	_picture.img.plane[1] = encodeParams->frameData + ((_param.i_width * _param.i_height * 5) >> 2);	// V
+	_picture.img.i_stride[0] = _param.i_width;
+	_picture.img.i_stride[1] = _param.i_width >> 1;
+	_picture.img.i_stride[2] = _param.i_width >> 1;
 	_picture.i_type = X264_TYPE_AUTO;
 	_picture.i_pts = _currentFrame++;
 
@@ -294,40 +319,40 @@
 
 	switch (picture_out.i_type)
 	{
-	case X264_TYPE_IDR:
-		encodeParams->frameType = ADM_VIDENC_FRAMETYPE_IDR;
+		case X264_TYPE_IDR:
+			encodeParams->frameType = ADM_VIDENC_FRAMETYPE_IDR;
 
-		if(!_param.b_repeat_headers && _seiUserData && !picture_out.i_pts)
-		{
-			// Put our SEI front...
-			// first a temp location...
-			uint8_t tmpBuffer[size];
-			memcpy(tmpBuffer, encodeParams->encodedData, size);
+			if(!_param.b_repeat_headers && _seiUserData && !picture_out.i_pts)
+			{
+				// Put our SEI front...
+				// first a temp location...
+				uint8_t tmpBuffer[size];
+				memcpy(tmpBuffer, encodeParams->encodedData, size);
 
-			// Put back out SEI and add Size
-			encodeParams->encodedData[0] = (_seiUserDataLen >> 24) & 0xff;
-			encodeParams->encodedData[1] = (_seiUserDataLen >> 16) & 0xff;
-			encodeParams->encodedData[2] = (_seiUserDataLen >> 8) & 0xff;
-			encodeParams->encodedData[3] = (_seiUserDataLen >> 0) & 0xff;
+				// Put back out SEI and add Size
+				encodeParams->encodedData[0] = (_seiUserDataLen >> 24) & 0xff;
+				encodeParams->encodedData[1] = (_seiUserDataLen >> 16) & 0xff;
+				encodeParams->encodedData[2] = (_seiUserDataLen >> 8) & 0xff;
+				encodeParams->encodedData[3] = (_seiUserDataLen >> 0) & 0xff;
 
-			memcpy(encodeParams->encodedData + 4, _seiUserData, _seiUserDataLen);
-			memcpy(encodeParams->encodedData + 4 + _seiUserDataLen, tmpBuffer, size);
+				memcpy(encodeParams->encodedData + 4, _seiUserData, _seiUserDataLen);
+				memcpy(encodeParams->encodedData + 4 + _seiUserDataLen, tmpBuffer, size);
 
-			size += 4 + _seiUserDataLen;
-			encodeParams->encodedDataSize = size; // update total size
-		}
+				size += 4 + _seiUserDataLen;
+				encodeParams->encodedDataSize = size; // update total size
+			}
 
-		break;
-	case X264_TYPE_I:
-	case X264_TYPE_P:
-		encodeParams->frameType = ADM_VIDENC_FRAMETYPE_P;
-		break;
-	case X264_TYPE_B:
-	case X264_TYPE_BREF:
-		encodeParams->frameType = ADM_VIDENC_FRAMETYPE_B;
-		break;
-	default:
-		printf ("[x264] Unknown image type: %d\n", picture_out.i_type);
+			break;
+		case X264_TYPE_I:
+		case X264_TYPE_P:
+			encodeParams->frameType = ADM_VIDENC_FRAMETYPE_P;
+			break;
+		case X264_TYPE_B:
+		case X264_TYPE_BREF:
+			encodeParams->frameType = ADM_VIDENC_FRAMETYPE_B;
+			break;
+		default:
+			printf ("[x264] Unknown image type: %d\n", picture_out.i_type);
 	}
 
 	encodeParams->quantiser = picture_out.i_qpplus1;
@@ -337,7 +362,7 @@
 
 int x264Encoder::getExtraHeaderData(uint8_t **data)
 {
-	if (!_handler)
+	if (!_opened)
 		return ADM_VIDENC_ERR_CLOSED;
 
 	return ADM_VIDENC_ERR_FAILED;
@@ -355,7 +380,7 @@
 	uint8_t picParam[X264_MAX_HEADER_SIZE];
 	uint8_t seqParam[X264_MAX_HEADER_SIZE];
 	uint8_t sei[X264_MAX_HEADER_SIZE];
-	int picParamLen = 0, seqParamLen = 0, seiParamLen=0, len;
+	int picParamLen = 0, seqParamLen = 0, seiParamLen = 0, len;
 	int sz;
 
 	_extraData = new uint8_t[X264_MAX_HEADER_SIZE];
@@ -409,7 +434,7 @@
 	_extraData[2] = seqParam[2];	//0x00; // profile_compatibility
 	_extraData[3] = seqParam[3];	//0x0D; // AVCLevelIndication
 	_extraData[4] = 0xFC + 3;	// lengthSizeMinusOne 
-	_extraData[5] = 0xE0 + 1;	// nonReferenceDegredationPriorityLow        
+	_extraData[5] = 0xE0 + 1;	// nonReferenceDegredationPriorityLow
 
 	offset = 6;
 	_extraData[offset] = seqParamLen >> 8;
@@ -448,15 +473,23 @@
 
 int x264Encoder::finishPass(void)
 {
-	if (!_handler)
+	if (!_opened)
 		return ADM_VIDENC_ERR_CLOSED;
 
 	if (_openPass)
 		_openPass = false;
+
+	if (_handler)
+	{
+		x264_encoder_close(_handler);
+		_handler = NULL;
+	}
 }
 
 void x264Encoder::close(void)
 {
+	_opened = false;
+
 	if (_handler)
 	{
 		x264_encoder_close(_handler);
@@ -572,3 +605,57 @@
 	for (int index = 0; index < size; index++)
 		printf("%d ", cqm[index]);
 }
+
+void x264Encoder::updateEncodeParameters(vidEncVideoProperties *properties)
+{
+	x264_param_t *param = _options.getParameters();
+
+	memcpy(&_param, param, sizeof(x264_param_t));
+	delete param;
+
+	switch (_encodeOptions.encodeMode)
+	{
+		case ADM_VIDENC_MODE_CBR:
+			_passCount = 1;
+			_param.rc.i_rc_method = X264_RC_ABR;
+			_param.rc.i_bitrate = _encodeOptions.encodeModeParameter;
+			break;
+		case ADM_VIDENC_MODE_CQP:
+			_passCount = 1;
+			_param.rc.i_rc_method = X264_RC_CQP;
+			_param.rc.i_qp_constant = _encodeOptions.encodeModeParameter;
+			break;
+		case ADM_VIDENC_MODE_AQP:
+			_passCount = 1;
+			_param.rc.i_rc_method = X264_RC_CRF;
+			_param.rc.f_rf_constant = _encodeOptions.encodeModeParameter;
+			break;
+		case ADM_VIDENC_MODE_2PASS_SIZE:
+			_passCount = 2;
+			_param.rc.i_rc_method = X264_RC_ABR;
+			_param.rc.i_bitrate = calculateBitrate(properties->fps1000, properties->frameCount, _encodeOptions.encodeModeParameter) / 1000;
+			break;
+		case ADM_VIDENC_MODE_2PASS_ABR:
+			_passCount = 2;
+			_param.rc.i_rc_method = X264_RC_ABR;
+			_param.rc.i_bitrate = _encodeOptions.encodeModeParameter;
+			break;
+	}
+}
+
+unsigned int x264Encoder::calculateBitrate(unsigned int fps1000, unsigned int frameCount, unsigned int sizeInMb)
+{
+	double db, ti;
+
+	db = sizeInMb;
+	db = db * 1024. * 1024. * 8.;
+	// now db is in bits
+
+	// compute duration
+	ti = frameCount;
+	ti *= 1000;
+	ti /= fps1000;	// nb sec
+	db = db / ti;
+
+	return (unsigned int)floor(db);
+}

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.h	2008-04-28 11:35:40 UTC (rev 3993)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.h	2008-04-28 15:08:46 UTC (rev 3994)
@@ -40,15 +40,16 @@
 		configGuiLoader *_loader;
 		x264Options _options;
 		vidEncOptions _encodeOptions;
+		vidEncVideoProperties _properties;
+		char *_logFileName;
 
 		x264_t *_handler;
 		x264_param_t _param;
 		x264_picture_t _picture;
 
-		int _width, _height;
 		uint32_t _currentFrame;
 		int _currentPass, _passCount;
-		bool _openPass;
+		bool _opened, _openPass;
 
 		uint8_t *_seiUserData;
 		uint32_t _seiUserDataLen;
@@ -58,7 +59,8 @@
 
 		void printParam(x264_param_t* x264Param);
 		void printCqm(const uint8_t cqm[], int size);
-		void updateParameters(void);
+		void updateEncodeParameters(vidEncVideoProperties *properties);
+		unsigned int calculateBitrate(unsigned int fps1000, unsigned int frameCount, unsigned int sizeInMb);
 
 	public:
 		x264Encoder(void);
@@ -73,7 +75,7 @@
 		int open(vidEncVideoProperties *properties);
 		int beginPass(void);
 		int getExtraHeaderData(uint8_t **data);
-		int encodeFrame(vidEncEncodeParams *encodeParams);
+		int encodeFrame(vidEncEncodeParameters *encodeParams);
 		int finishPass(void);
 		void close(void);
 	};
@@ -87,6 +89,6 @@
 	int x264Encoder_getCurrentPass(void);
 	int x264Encoder_open(vidEncVideoProperties *properties);
 	void x264Encoder_close(void);
-	int x264Encoder_encodeFrame(vidEncEncodeParams *encodeParams);
+	int x264Encoder_encodeFrame(vidEncEncodeParameters *encodeParams);
 #endif	// __cplusplus
 #endif	// encoder_h

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/interface.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/interface.c	2008-04-28 11:35:40 UTC (rev 3993)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/interface.c	2008-04-28 15:08:46 UTC (rev 3994)
@@ -109,7 +109,7 @@
 	return x264Encoder_beginPass();
 }
 
-int vidEncEncodeFrame(int encoderId, vidEncEncodeParams *encodeParams)
+int vidEncEncodeFrame(int encoderId, vidEncEncodeParameters *encodeParams)
 {
 	return x264Encoder_encodeFrame(encodeParams);
 }



From gruntster at mail.berlios.de  Tue Apr 29 02:17:31 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Tue, 29 Apr 2008 02:17:31 +0200
Subject: [Avidemux-svn-commit] r3995 - in
	branches/avidemux_2.5_branch_gruntster/avidemux: ADM_editor
	ADM_encoder ADM_plugin ADM_script
	plugins/ADM_videoEncoder/ADM_vidEnc_x264
Message-ID: <200804290017.m3T0HVKk023374@sheep.berlios.de>

Author: gruntster
Date: 2008-04-29 02:17:24 +0200 (Tue, 29 Apr 2008)
New Revision: 3995

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edLoadSave.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_externalEncoder.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_externalEncoder.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_pluginLoad.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_plugin/ADM_vidEnc_plugin.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSAvidemuxVideo.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.h
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/interface.c
Log:
[x264] support for global header

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edLoadSave.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edLoadSave.cpp	2008-04-28 15:08:46 UTC (rev 3994)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edLoadSave.cpp	2008-04-29 00:17:24 UTC (rev 3995)
@@ -175,10 +175,7 @@
 		videoCodecGetConf(&extraDataSize, &extraData);
 
 		if (videoCodecGetType() == CodecExternal)
-		{
-			qfprintf(fd, "app.video.codecPlugin(\"%s\", \"%s\", \"%s\");\n", videoCodecPluginGetGuid(), videoCodecGetName(), videoCodecGetMode());
-			qfprintf(fd, "app.video.codecConf(\"%s\");\n", extraData);
-		}
+			qfprintf(fd, "app.video.codecPlugin(\"%s\", \"%s\", \"%s\", \"%s\");\n", videoCodecPluginGetGuid(), videoCodecGetName(), videoCodecGetMode(), extraData);
 		else
 		{
 			qfprintf(fd, "app.video.codec(\"%s\", \"%s\", \"", videoCodecGetName(), videoCodecGetMode());

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_externalEncoder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_externalEncoder.cpp	2008-04-28 15:08:46 UTC (rev 3994)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_externalEncoder.cpp	2008-04-29 00:17:24 UTC (rev 3995)
@@ -18,11 +18,12 @@
 #include "ADM_externalEncoder.h"
 #include "ADM_plugin/ADM_vidEnc_plugin.h"
 
-externalEncoder::externalEncoder(COMPRES_PARAMS *params)
+externalEncoder::externalEncoder(COMPRES_PARAMS *params, bool globalHeader)
 {
 	_plugin = getVideoEncoderPlugin(params->extra_param);
 	_openPass = false;
 	_logFileName = NULL;
+	_globalHeader = globalHeader;
 }
 
 externalEncoder::~externalEncoder()
@@ -48,6 +49,8 @@
 
 	vidEncVideoProperties properties;
 
+	memset(&properties, 0, sizeof(vidEncVideoProperties));
+
 	properties.structSize = sizeof(vidEncVideoProperties);
 	properties.width = _w;
 	properties.height = _h;
@@ -58,8 +61,16 @@
 	properties.logFileName = _logFileName;
 	properties.useExistingLogFile = useExistingLogFile;
 
+	if (_globalHeader)
+		properties.flags |= ADM_VIDENC_FLAG_GLOBAL_HEADER;
+
 	if (_plugin->open(_plugin->encoderId, &properties))
-		return 1;
+	{
+		if (!isDualPass())
+			return (startPass() == ADM_VIDENC_ERR_SUCCESS);
+		else
+			return 1;
+	}
 	else
 		return 0;
 }
@@ -71,13 +82,6 @@
 	int64_t ptsFrame;
 	vidEncEncodeParameters params;
 
-	if (!_openPass && !isDualPass())
-		if (startPass1() != ADM_VIDENC_ERR_SUCCESS)
-		{
-			printf ("[externalEncoder] Error starting first pass\n");
-			return 0;
-		}
-
 	if (!_in->getFrameNumberNoAlloc(frame, &l, _vbuffer, &f))
 	{
 		printf ("[externalEncoder] Error reading incoming frame\n");
@@ -86,29 +90,32 @@
 
 	params.structSize = sizeof(vidEncEncodeParameters);
 	params.frameData = _vbuffer->data;
-	params.frameDataSize = 0;
-	params.encodedData = out->data;
+	params.frameDataSize = ((_w + 15) & 0xffffff0) * ((_h + 15) & 0xfffffff0) * 2;
+	params.encodedData = NULL;
+	params.encodedDataSize = 0;
 
 	if (_plugin->encodeFrame(_plugin->encoderId, &params))
 	{
+		memcpy(out->data, params.encodedData, params.encodedDataSize);
+
 		out->len = params.encodedDataSize;
 		out->ptsFrame = params.ptsFrame;
 		out->out_quantizer = params.quantiser;
 
 		switch (params.frameType)
 		{
-		case ADM_VIDENC_FRAMETYPE_IDR:
-			out->flags = AVI_KEY_FRAME;
-			break;
-		case ADM_VIDENC_FRAMETYPE_B:
-			out->flags = AVI_B_FRAME;
-			break;
-		case ADM_VIDENC_FRAMETYPE_P:
-			out->flags = AVI_P_FRAME;
-			break;
-		default:
-			assert(0);
-			break;
+			case ADM_VIDENC_FRAMETYPE_IDR:
+				out->flags = AVI_KEY_FRAME;
+				break;
+			case ADM_VIDENC_FRAMETYPE_B:
+				out->flags = AVI_B_FRAME;
+				break;
+			case ADM_VIDENC_FRAMETYPE_P:
+				out->flags = AVI_P_FRAME;
+				break;
+			default:
+				assert(0);
+				break;
 		}
 
 		return 1;
@@ -137,32 +144,55 @@
 	return _plugin->getPassCount(_plugin->encoderId) == 2;
 }
 
-uint8_t externalEncoder::startPass1(void)
+uint8_t externalEncoder::startPass(void)
 {
-	_openPass = (_plugin->beginPass(_plugin->encoderId) == ADM_VIDENC_ERR_SUCCESS);
+	vidEncPassParameters passParameters;
 
+	memset(&passParameters, 0, sizeof(vidEncPassParameters));
+	passParameters.structSize = sizeof(vidEncPassParameters);
+
+	_openPass = (_plugin->beginPass(_plugin->encoderId, &passParameters) == ADM_VIDENC_ERR_SUCCESS);
+
+	if (_openPass && _globalHeader)
+	{
+		_extraData = passParameters.extraData;
+		_extraDataSize = passParameters.extraDataSize;
+	}
+	else
+	{
+		_extraData = NULL;
+		_extraDataSize = 0;
+	}
+
 	return _openPass;
 }
 
+uint8_t externalEncoder::startPass1(void)
+{
+	return startPass();
+}
+
 uint8_t externalEncoder::startPass2(void)
 {
 	if (_openPass)
 		_plugin->finishPass(_plugin->encoderId);
 
-	_openPass = (_plugin->beginPass(_plugin->encoderId) == ADM_VIDENC_ERR_SUCCESS);
-
-	return _openPass;
+	return startPass();
 }
 
 uint8_t externalEncoder::hasExtraHeaderData(uint32_t *l, uint8_t **data)
 {
-/*	int headerSize = _plugin->getExtraHeaderData(data);
+	printf ("[externalEncoder] %d extra header bytes\n", _extraDataSize);
 
-	*l = headerSize;
-	printf ("[VidEnc Plugin] %d extra header bytes\n", headerSize);
+	if (_globalHeader && _extraDataSize > 0)
+	{
+		*data = _extraData;
+		*l = _extraDataSize;
 
-	return (headerSize > 0); */
-	return 0;
+		return 1;
+	}
+	else
+		return 0;
 }
 
 uint8_t externalEncoder::stop(void)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_externalEncoder.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_externalEncoder.h	2008-04-28 15:08:46 UTC (rev 3994)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_externalEncoder.h	2008-04-29 00:17:24 UTC (rev 3995)
@@ -29,9 +29,14 @@
 	ADM_vidEnc_plugin *_plugin;
 	bool _openPass;
 	char* _logFileName;
+	bool _globalHeader;
+	uint8_t *_extraData;
+	int _extraDataSize;
 
+	uint8_t startPass(void);
+
 public:
-	externalEncoder(COMPRES_PARAMS *params);
+	externalEncoder(COMPRES_PARAMS *params, bool globalHeader);
 	~externalEncoder();
 	virtual uint8_t isDualPass(void);
 	virtual uint8_t configure(AVDMGenericVideoStream * instream, int useExistingLogFile);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_pluginLoad.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_pluginLoad.h	2008-04-28 15:08:46 UTC (rev 3994)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_pluginLoad.h	2008-04-29 00:17:24 UTC (rev 3995)
@@ -39,7 +39,7 @@
 typedef int _vidEncGetCurrentPass(int encoderId);
 
 typedef int _vidEncOpen(int encoderId, vidEncVideoProperties *properties);
-typedef int _vidEncBeginPass(int encoderId);
+typedef int _vidEncBeginPass(int encoderId, vidEncPassParameters *passParameters);
 typedef int _vidEncEncodeFrame(int encoderId, vidEncEncodeParameters *encodeParams);
 typedef int _vidFinishPass(int encoderId);
 typedef int _vidEncClose(int encoderId);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.cpp	2008-04-28 15:08:46 UTC (rev 3994)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.cpp	2008-04-29 00:17:24 UTC (rev 3995)
@@ -625,7 +625,7 @@
 		}
 #endif
 	case CodecExternal:
-		e = new externalEncoder(&AllVideoCodec[currentCodecIndex]);
+		e = new externalEncoder(&AllVideoCodec[currentCodecIndex], globalHeaderFlag);
 		break;
 	}
 	return e;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_plugin/ADM_vidEnc_plugin.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_plugin/ADM_vidEnc_plugin.h	2008-04-28 15:08:46 UTC (rev 3994)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_plugin/ADM_vidEnc_plugin.h	2008-04-29 00:17:24 UTC (rev 3995)
@@ -42,6 +42,8 @@
 #define ADM_VIDENC_UI_GTK 1
 #define ADM_VIDENC_UI_QT 2
 
+#define ADM_VIDENC_FLAG_GLOBAL_HEADER 1
+
 typedef struct
 {
 	int structSize;
@@ -65,6 +67,7 @@
 	unsigned int fps1000;
 	const char* logFileName;
 	int useExistingLogFile;
+	unsigned int flags;
 } vidEncVideoProperties;
 
 typedef struct
@@ -74,6 +77,13 @@
 	int encodeModeParameter;
 } vidEncOptions;
 
+typedef struct
+{
+	int structSize;
+	uint8_t *extraData;
+	int extraDataSize;
+} vidEncPassParameters;
+
 int vidEncGetEncoders(int uiType, int **encoderIds);
 const char* vidEncGetEncoderName(int encoderId);
 const char* vidEncGetEncoderType(int encoderId);
@@ -92,7 +102,7 @@
 int vidEncGetCurrentPass(int encoderId);
 
 int vidEncOpen(int encoderId, vidEncVideoProperties *properties);
-int vidEncBeginPass(int encoderId);
+int vidEncBeginPass(int encoderId, vidEncPassParameters *passParameters);
 int vidEncEncodeFrame(int encoderId, vidEncEncodeParameters *encodeParams);
 int vidEndFinishPass(int encoderId);
 int vidEncClose(int encoderId);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSAvidemuxVideo.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSAvidemuxVideo.cpp	2008-04-28 15:08:46 UTC (rev 3994)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSAvidemuxVideo.cpp	2008-04-29 00:17:24 UTC (rev 3995)
@@ -50,7 +50,7 @@
         { "clearFilters", ClearFilters, 0, 0, 0 }, // Delete all filters
 	{ "addFilter", AddFilter, 10, 0, 0 },	// Add filter to filter chain
 	{ "codec", Codec, 3, 0, 0 },	// Set the video codec
-	{ "codecPlugin", codecPlugin, 3, 0, 0 },	// Set the video codec plugin
+	{ "codecPlugin", codecPlugin, 4, 0, 0 },	// Set the video codec plugin
 	{ "codecConf", CodecConf, 1, 0, 0 },	// load video codec config
 	{ "save", Save, 1, 0, 0 },	// save video portion of the stream
 	{ "saveJpeg", SaveJPEG, 1, 0, 0 },	// save the current frame as a JPEG
@@ -287,22 +287,24 @@
 {
 	*rval = BOOLEAN_TO_JSVAL(false);
 
-	if (argc > 3)
+	if (argc != 4)
 		return JS_FALSE;
 
 	printf("Codec Plugin ... \n");
 
-	if (!JSVAL_IS_STRING(argv[0]) || !JSVAL_IS_STRING(argv[1]) || !JSVAL_IS_STRING(argv[2]))
+	if (!JSVAL_IS_STRING(argv[0]) || !JSVAL_IS_STRING(argv[1]) || !JSVAL_IS_STRING(argv[2]) || !JSVAL_IS_STRING(argv[3]))
 		return JS_FALSE;
 
-	printf("[guid] %s\n", JS_GetStringBytes(JSVAL_TO_STRING(argv[0])));
-	printf("[desc] %s\n", JS_GetStringBytes(JSVAL_TO_STRING(argv[1])));
-	printf("[conf] %s\n", JS_GetStringBytes(JSVAL_TO_STRING(argv[2])));
-
 	char *guid = JS_GetStringBytes(JSVAL_TO_STRING(argv[0]));
 	char *desc = JS_GetStringBytes(JSVAL_TO_STRING(argv[1]));
 	char *conf = JS_GetStringBytes(JSVAL_TO_STRING(argv[2]));
+	char *data = JS_GetStringBytes(JSVAL_TO_STRING(argv[3]));
 
+	printf("[guid] %s\n", guid);
+	printf("[desc] %s\n", desc);
+	printf("[conf] %s\n", conf);
+	printf("[data] %s\n", data);
+
 	enterLock();
 
 	if (!videoCodecPluginSelectByGuid(guid))
@@ -317,7 +319,12 @@
 		if (!videoCodecConfigure(conf, 0, NULL))
 			*rval = BOOLEAN_TO_JSVAL(false);
 		else
-			*rval = BOOLEAN_TO_JSVAL(true);
+		{
+			if (!loadVideoCodecConf(data))
+				*rval = BOOLEAN_TO_JSVAL(false);
+			else
+				*rval = BOOLEAN_TO_JSVAL(true);
+		}
 	}
 
 	leaveLock();

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.cpp	2008-04-28 15:08:46 UTC (rev 3994)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.cpp	2008-04-29 00:17:24 UTC (rev 3995)
@@ -35,7 +35,7 @@
 	int x264Encoder_getPassCount(void) { return encoder.getPassCount(); }
 	int x264Encoder_getCurrentPass(void) { return encoder.getCurrentPass(); }
 	int x264Encoder_open(vidEncVideoProperties *properties) { return encoder.open(properties); }
-	int x264Encoder_beginPass(void) { return encoder.beginPass(); }
+	int x264Encoder_beginPass(vidEncPassParameters *passParameters) { return encoder.beginPass(passParameters); }
 	int x264Encoder_encodeFrame(vidEncEncodeParameters *encodeParams) { return encoder.encodeFrame(encodeParams); }
 	int x264Encoder_finishPass(void) { return encoder.finishPass(); }
 	void x264Encoder_close(void) { encoder.close(); }
@@ -44,7 +44,7 @@
 x264Encoder::x264Encoder(void)
 {
 	_loader = NULL;
-	_handler = NULL;
+	_handle = NULL;
 	_opened = false;
 
 	_passCount = 1;
@@ -52,9 +52,10 @@
 	_openPass = false;
 
 	_logFileName = NULL;
+	_buffer = NULL;
 
 	_extraData = NULL;
-	_extraSize = 0;
+	_extraDataSize = 0;
 
 	_seiUserData = NULL;
 	_seiUserDataLen = 0;
@@ -73,6 +74,9 @@
 
 	if (_logFileName)
 		delete [] _logFileName;
+
+	if (_buffer)
+		delete [] _buffer;
 }
 
 void x264Encoder::setUiType(int uiType)
@@ -172,6 +176,8 @@
 
 	_opened = true;
 	_currentPass = 0;
+	_bufferSize = properties->width * properties->height * 3;
+	_buffer = new uint8_t[_bufferSize];
 
 	memcpy(&_properties, properties, sizeof(vidEncVideoProperties));
 	_properties.logFileName = NULL;
@@ -195,6 +201,11 @@
 		_param.vui.i_sar_height = _properties.parHeight;
 	}
 
+	if (properties->flags & ADM_VIDENC_FLAG_GLOBAL_HEADER)
+		_param.b_repeat_headers = 0;
+	else
+		_param.b_repeat_headers = 1;
+
 	if (_passCount > 1 && properties->useExistingLogFile)
 		_currentPass++;
 
@@ -203,7 +214,7 @@
 	return ADM_VIDENC_ERR_SUCCESS;
 }
 
-int x264Encoder::beginPass(void)
+int x264Encoder::beginPass(vidEncPassParameters *passParameters)
 {
 	if (!_opened)
 		return ADM_VIDENC_ERR_CLOSED;
@@ -216,6 +227,7 @@
 
 	_openPass = true;
 	_currentPass++;
+	_currentFrame = 0;
 
 	printf("[x264] begin pass %d/%d\n", _currentPass, _passCount);
 
@@ -226,6 +238,7 @@
 			_param.rc.b_stat_write = 1;
 			_param.rc.b_stat_read = 0;
 			_param.rc.psz_stat_out = _logFileName;
+
 			printf("[x264] writing to %s\n", _logFileName);
 		}
 		else
@@ -233,6 +246,7 @@
 			_param.rc.b_stat_write = 0;
 			_param.rc.b_stat_read = 1;
 			_param.rc.psz_stat_in = _logFileName;
+
 			printf("[x264] reading from %s\n", _logFileName);
 		}
 	}
@@ -242,17 +256,24 @@
 		_param.rc.b_stat_read = 0;
 	}
 
-	_handler = x264_encoder_open(&_param);
-	_seiUserData = NULL;
-	_seiUserDataLen = 0;
+	_handle = x264_encoder_open(&_param);
 
-	_extraData = NULL;
-	_extraSize = 0;
+	if (_handle)
+	{
+		if (!_param.b_repeat_headers)
+		{
+			if (createHeader())
+			{
+				passParameters->structSize = sizeof(vidEncPassParameters);
+				passParameters->extraData = _extraData;
+				passParameters->extraDataSize = _extraDataSize;
+			}
+			else
+				return ADM_VIDENC_ERR_FAILED;
+		}
 
-	_currentFrame = 0;
-
-	if (_handler)
 		return ADM_VIDENC_ERR_SUCCESS;
+	}
 	else
 		return ADM_VIDENC_ERR_FAILED;
 }
@@ -279,7 +300,7 @@
 	_picture.i_type = X264_TYPE_AUTO;
 	_picture.i_pts = _currentFrame++;
 
-	if (x264_encoder_encode(_handler, &nal, &nalCount, &_picture, &picture_out) < 0)
+	if (x264_encoder_encode(_handle, &nal, &nalCount, &_picture, &picture_out) < 0)
 	{
 		printf("[x264] Error encoding\n");
 		return ADM_VIDENC_ERR_FAILED;
@@ -296,15 +317,15 @@
 		if (!_param.b_repeat_headers)
 			size += 4;
 
-		currentNal = x264_nal_encode(encodeParams->encodedData + size, &sizemax, _param.b_repeat_headers, &nal[i]);
+		currentNal = x264_nal_encode(_buffer + size, &sizemax, _param.b_repeat_headers, &nal[i]);
 
 		if (!_param.b_repeat_headers)
 		{
 			// Need to put size (assuming nal_size=4)
-			encodeParams->encodedData[size + 0 - 4] = (currentNal >> 24) & 0xff;
-			encodeParams->encodedData[size + 1 - 4] = (currentNal >> 16) & 0xff;
-			encodeParams->encodedData[size + 2 - 4] = (currentNal >> 8) & 0xff;
-			encodeParams->encodedData[size + 3 - 4] = (currentNal >> 0) & 0xff;
+			_buffer[size + 0 - 4] = (currentNal >> 24) & 0xff;
+			_buffer[size + 1 - 4] = (currentNal >> 16) & 0xff;
+			_buffer[size + 2 - 4] = (currentNal >> 8) & 0xff;
+			_buffer[size + 3 - 4] = (currentNal >> 0) & 0xff;
 		}
 
 		size += currentNal;
@@ -327,16 +348,16 @@
 				// Put our SEI front...
 				// first a temp location...
 				uint8_t tmpBuffer[size];
-				memcpy(tmpBuffer, encodeParams->encodedData, size);
+				memcpy(tmpBuffer, _buffer, size);
 
 				// Put back out SEI and add Size
-				encodeParams->encodedData[0] = (_seiUserDataLen >> 24) & 0xff;
-				encodeParams->encodedData[1] = (_seiUserDataLen >> 16) & 0xff;
-				encodeParams->encodedData[2] = (_seiUserDataLen >> 8) & 0xff;
-				encodeParams->encodedData[3] = (_seiUserDataLen >> 0) & 0xff;
+				_buffer[0] = (_seiUserDataLen >> 24) & 0xff;
+				_buffer[1] = (_seiUserDataLen >> 16) & 0xff;
+				_buffer[2] = (_seiUserDataLen >> 8) & 0xff;
+				_buffer[3] = (_seiUserDataLen >> 0) & 0xff;
 
-				memcpy(encodeParams->encodedData + 4, _seiUserData, _seiUserDataLen);
-				memcpy(encodeParams->encodedData + 4 + _seiUserDataLen, tmpBuffer, size);
+				memcpy(_buffer + 4, _seiUserData, _seiUserDataLen);
+				memcpy(_buffer + 4 + _seiUserDataLen, tmpBuffer, size);
 
 				size += 4 + _seiUserDataLen;
 				encodeParams->encodedDataSize = size; // update total size
@@ -356,23 +377,13 @@
 	}
 
 	encodeParams->quantiser = picture_out.i_qpplus1;
+	encodeParams->encodedData = _buffer;
 
 	return ADM_VIDENC_ERR_SUCCESS;
 }
 
-int x264Encoder::getExtraHeaderData(uint8_t **data)
+int x264Encoder::createHeader(void)
 {
-	if (!_opened)
-		return ADM_VIDENC_ERR_CLOSED;
-
-	return ADM_VIDENC_ERR_FAILED;
-
-	if (_extraData)
-	{
-		*data = _extraData;
-		return _extraSize;
-	}
-
 	x264_nal_t *nal;
 	int nalCount;
 	uint32_t offset = 0;
@@ -383,15 +394,21 @@
 	int picParamLen = 0, seqParamLen = 0, seiParamLen = 0, len;
 	int sz;
 
-	_extraData = new uint8_t[X264_MAX_HEADER_SIZE];
-	_extraSize = 0;
+	if (!_handle)
+		return ADM_VIDENC_ERR_FAILED;
 
-	if (x264_encoder_headers(_handler, &nal, &nalCount))
+	if (x264_encoder_headers(_handle, &nal, &nalCount))
 	{
 		printf("[x264] Cannot create header\n");
 		return ADM_VIDENC_ERR_FAILED;
 	}
 
+	if (_extraData)
+		delete _extraData;
+
+	_extraData = new uint8_t[X264_MAX_HEADER_SIZE];
+	_extraDataSize = 0;
+
 	printf("[x264] Nal count: %d\n", nalCount);
 
 	// Now encode them
@@ -416,6 +433,7 @@
 		if (sz <= 0)
 		{
 			printf("[x264] Cannot encode nal header %d\n", i);
+
 			return ADM_VIDENC_ERR_FAILED;
 		}
 	}
@@ -463,12 +481,11 @@
 		memcpy(_seiUserData, sei, _seiUserDataLen);
 	}
 
-	_extraSize = offset;
-	*data = _extraData;
+	_extraDataSize = offset;
 
+	printf("[x264] generated %d extra bytes for header\n", _extraDataSize);
+
 	//assert(offset < X264_MAX_HEADER_SIZE);
-
-	return _extraSize;
 }
 
 int x264Encoder::finishPass(void)
@@ -479,28 +496,38 @@
 	if (_openPass)
 		_openPass = false;
 
-	if (_handler)
+	if (_extraData)
 	{
-		x264_encoder_close(_handler);
-		_handler = NULL;
+		delete [] _extraData;
+		_extraData = NULL;
+		_extraDataSize = 0;
 	}
+
+	if (_seiUserData)
+	{
+		delete [] _seiUserData;
+		_seiUserData = NULL;
+		_seiUserDataLen = 0;
+	}
 }
 
 void x264Encoder::close(void)
 {
+	if (_openPass)
+		finishPass();
+
 	_opened = false;
 
-	if (_handler)
+	if (_handle)
 	{
-		x264_encoder_close(_handler);
-		_handler = NULL;
+		x264_encoder_close(_handle);
+		_handle = NULL;
 	}
 
-	if (_extraData)
+	if (_buffer)
 	{
-		delete [] _extraData;
-		_extraData = NULL;
-		_extraSize = 0;
+		delete [] _buffer;
+		_buffer = NULL;
 	}
 }
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.h	2008-04-28 15:08:46 UTC (rev 3994)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.h	2008-04-29 00:17:24 UTC (rev 3995)
@@ -43,9 +43,11 @@
 		vidEncVideoProperties _properties;
 		char *_logFileName;
 
-		x264_t *_handler;
+		x264_t *_handle;
 		x264_param_t _param;
 		x264_picture_t _picture;
+		uint8_t *_buffer;
+		int _bufferSize;
 
 		uint32_t _currentFrame;
 		int _currentPass, _passCount;
@@ -55,12 +57,13 @@
 		uint32_t _seiUserDataLen;
 
 		uint8_t *_extraData;
-		int _extraSize;
+		int _extraDataSize;
 
 		void printParam(x264_param_t* x264Param);
 		void printCqm(const uint8_t cqm[], int size);
 		void updateEncodeParameters(vidEncVideoProperties *properties);
 		unsigned int calculateBitrate(unsigned int fps1000, unsigned int frameCount, unsigned int sizeInMb);
+		int createHeader(void);
 
 	public:
 		x264Encoder(void);
@@ -73,8 +76,7 @@
 		int getCurrentPass(void);
 		int getPassCount(void);
 		int open(vidEncVideoProperties *properties);
-		int beginPass(void);
-		int getExtraHeaderData(uint8_t **data);
+		int beginPass(vidEncPassParameters *passParameters);
 		int encodeFrame(vidEncEncodeParameters *encodeParams);
 		int finishPass(void);
 		void close(void);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/interface.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/interface.c	2008-04-28 15:08:46 UTC (rev 3994)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/interface.c	2008-04-29 00:17:24 UTC (rev 3995)
@@ -44,7 +44,7 @@
 
 const char* vidEncGetEncoderDescription(int encoderId)
 {
-	return "x264 encoder plugin for Avidemux (c) Mean/Gruntster";
+	return "x264 video encoder plugin for Avidemux (c) Mean/Gruntster";
 }
 
 const char* vidEncGetFourCC(int encoderId)
@@ -104,9 +104,9 @@
 	return x264Encoder_open(properties);
 }
 
-int vidEncBeginPass(int encoderId)
+int vidEncBeginPass(int encoderId, vidEncPassParameters *passParameters)
 {
-	return x264Encoder_beginPass();
+	return x264Encoder_beginPass(passParameters);
 }
 
 int vidEncEncodeFrame(int encoderId, vidEncEncodeParameters *encodeParams)



From gruntster at mail.berlios.de  Tue Apr 29 17:45:18 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Tue, 29 Apr 2008 17:45:18 +0200
Subject: [Avidemux-svn-commit] r3996 -
	branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4
Message-ID: <200804291545.m3TFjITO007812@sheep.berlios.de>

Author: gruntster
Date: 2008-04-29 17:45:15 +0200 (Tue, 29 Apr 2008)
New Revision: 3996

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui
Log:
[x264] Qt4 tweaks

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp	2008-04-29 00:17:24 UTC (rev 3995)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp	2008-04-29 15:45:15 UTC (rev 3996)
@@ -17,6 +17,8 @@
  *                                                                         *
  ***************************************************************************/
 
+#include <math.h>
+
 #include "x264ConfigDialog.h"
 #include "x264CustomMatrixDialog.h"
 #include "x264ZonesDialog.h"
@@ -392,16 +394,16 @@
 	ui.quantiserMinSpinBox->setValue(options->getQuantiserMinimum());
 	ui.quantiserMaxSpinBox->setValue(options->getQuantiserMaximum());
 	ui.quantiserMaxStepSpinBox->setValue(options->getQuantiserStep());
-	ui.avgBitrateToleranceSpinBox->setValue((int)(options->getAverageBitrateTolerance() * 100));
+	ui.avgBitrateToleranceSpinBox->setValue((int)floor(options->getAverageBitrateTolerance() * 100 + .5));
 	ui.quantiserIpRatioSpinBox->setValue(options->getIpFrameQuantiser());
 	ui.quantiserPbRatioSpinBox->setValue(options->getPbFrameQuantiser());
 	ui.chromaLumaOffsetSpinBox->setValue(options->getChromaLumaQuantiserDifference());
-	ui.quantiserCurveCompressSpinBox->setValue((int)(options->getQuantiserCurveCompression() * 100));
+	ui.quantiserCurveCompressSpinBox->setValue((int)floor(options->getQuantiserCurveCompression() * 100 + .5));
 	ui.quantiserBeforeCompressSpinBox->setValue(options->getReduceFluxBeforeCurveCompression());
 	ui.quantiserAfterCompressSpinBox->setValue(options->getReduceFluxAfterCurveCompression());
 	ui.vbvMaxBitrateSpinBox->setValue(options->getVbvMaximumBitrate());
 	ui.vbvBufferSizeSpinBox->setValue(options->getVbvBufferSize());
-	ui.vbvBufferOccupancySpinBox->setValue((int)(options->getVbvInitialOccupancy() * 100));
+	ui.vbvBufferOccupancySpinBox->setValue((int)floor(options->getVbvInitialOccupancy() * 100 + .5));
 
 	// Output tab
 	if (!options->getIdcLevel())
@@ -557,16 +559,16 @@
 	options->setQuantiserMinimum(ui.quantiserMinSpinBox->value());
 	options->setQuantiserMaximum(ui.quantiserMaxSpinBox->value());
 	options->setQuantiserStep(ui.quantiserMaxStepSpinBox->value());
-	options->setAverageBitrateTolerance(ui.avgBitrateToleranceSpinBox->value());
+	options->setAverageBitrateTolerance((float)ui.avgBitrateToleranceSpinBox->value() / 100);
 	options->setIpFrameQuantiser(ui.quantiserIpRatioSpinBox->value());
 	options->setPbFrameQuantiser(ui.quantiserPbRatioSpinBox->value());
 	options->setChromaLumaQuantiserDifference(ui.chromaLumaOffsetSpinBox->value());
-	options->setQuantiserCurveCompression(ui.quantiserCurveCompressSpinBox->value());
+	options->setQuantiserCurveCompression((float)ui.quantiserCurveCompressSpinBox->value() / 100);
 	options->setReduceFluxBeforeCurveCompression(ui.quantiserBeforeCompressSpinBox->value());
 	options->setReduceFluxAfterCurveCompression(ui.quantiserAfterCompressSpinBox->value());
 	options->setVbvMaximumBitrate(ui.vbvMaxBitrateSpinBox->value());
 	options->setVbvBufferSize(ui.vbvBufferSizeSpinBox->value());
-	options->setVbvInitialOccupancy(ui.vbvBufferOccupancySpinBox->value());
+	options->setVbvInitialOccupancy((float)ui.vbvBufferOccupancySpinBox->value() / 100);
 
 	// Output tab
 	options->setIdcLevel(idcLevel[ui.idcLevelComboBox->currentIndex()]);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui	2008-04-29 00:17:24 UTC (rev 3995)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui	2008-04-29 15:45:15 UTC (rev 3996)
@@ -2300,6 +2300,9 @@
                 <property name="minimum" >
                  <double>1</double>
                 </property>
+                <property name="singleStep" >
+                 <double>0.1</double>
+                </property>
                 <property name="value" >
                  <double>1.3</double>
                 </property>



From gruntster at mail.berlios.de  Wed Apr 30 01:58:24 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Wed, 30 Apr 2008 01:58:24 +0200
Subject: [Avidemux-svn-commit] r3997 - in
	branches/avidemux_2.5_branch_gruntster: .
	avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264
	avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk
	avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4 cmake
Message-ID: <200804292358.m3TNwObX028746@sheep.berlios.de>

Author: gruntster
Date: 2008-04-30 01:58:16 +0200 (Wed, 30 Apr 2008)
New Revision: 3997

Added:
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/gtkSupport.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/gtkSupport.h
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.glade
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.h
   branches/avidemux_2.5_branch_gruntster/cmake/admCheckGettext.cmake
   branches/avidemux_2.5_branch_gruntster/cmake/admCheckGtk.cmake
Removed:
   branches/avidemux_2.5_branch_gruntster/cmake/admCheckUserInterfaceLibs.cmake
Modified:
   branches/avidemux_2.5_branch_gruntster/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/options.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/options.h
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp
   branches/avidemux_2.5_branch_gruntster/cmake/admCheckMiscLibs.cmake
Log:
[x264] GTK config dialog

Modified: branches/avidemux_2.5_branch_gruntster/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/CMakeLists.txt	2008-04-29 15:45:15 UTC (rev 3996)
+++ branches/avidemux_2.5_branch_gruntster/CMakeLists.txt	2008-04-29 23:58:16 UTC (rev 3997)
@@ -112,7 +112,19 @@
 SET(MSG_DISABLE_OPTION "Disabled per request")
 
 INCLUDE(admCheckRequiredLibs)
-INCLUDE(admCheckUserInterfaceLibs)
+INCLUDE(admCheckGtk)
+INCLUDE(admCheckQt4)
+
+checkGtk()
+IF (NOT GTK_FOUND OR NOT GTHREAD_FOUND)
+	SET(ADM_UI_GTK 0)
+ENDIF (NOT GTK_FOUND OR NOT GTHREAD_FOUND)
+
+checkQt4()
+IF (NOT QT4_FOUND)
+	SET(ADM_UI_QT4 0)
+ENDIF (NOT QT4_FOUND)
+
 INCLUDE(admCheckVideoCodecLibs)
 INCLUDE(admCheckAudioCodecLibs)
 INCLUDE(admCheckAudioDeviceLibs)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/CMakeLists.txt	2008-04-29 15:45:15 UTC (rev 3996)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/CMakeLists.txt	2008-04-29 23:58:16 UTC (rev 3997)
@@ -18,6 +18,7 @@
 
 		CONFIGURE_FILE("${CMAKE_CURRENT_SOURCE_DIR}/config.h.cmake" "${CMAKE_CURRENT_BINARY_DIR}/config.h")
 
+		ADD_SUBDIRECTORY(gtk)
 		ADD_SUBDIRECTORY(qt4)
 		ADD_LIBRARY(ADM_vidEnc_x264 SHARED ${ADM_vidEnc_x264_SRCS})
 		TARGET_LINK_LIBRARIES(ADM_vidEnc_x264 ADM_core ${X264_LIBRARY_DIR} ${LIBXML2_LIBRARIES})
@@ -25,5 +26,5 @@
 		INIT_VIDEO_ENCODER_PLUGIN(ADM_vidEnc_x264)
 		INSTALL_VIDEO_ENCODER(ADM_vidEnc_x264)
 		INSTALL(FILES x264Param.xsd DESTINATION "${CMAKE_INSTALL_PREFIX}/lib/ADM_plugins/videoEncoder/${PLUGIN_SUBDIR}")
-	ENDIF (LIBXML2_FOUND)		
+	ENDIF (LIBXML2_FOUND)
 ENDIF (X264_FOUND)
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.cpp	2008-04-29 15:45:15 UTC (rev 3996)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.cpp	2008-04-29 23:58:16 UTC (rev 3997)
@@ -61,8 +61,8 @@
 	_seiUserDataLen = 0;
 
 	_encodeOptions.structSize = sizeof(vidEncOptions);
-	_encodeOptions.encodeMode = ADM_VIDENC_MODE_AQP;
-	_encodeOptions.encodeModeParameter = 26;
+	_encodeOptions.encodeMode = DEFAULT_ENCODE_MODE;
+	_encodeOptions.encodeModeParameter = DEFAULT_ENCODE_MODE_PARAMETER;
 }
 
 x264Encoder::~x264Encoder(void)

Added: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/CMakeLists.txt	2008-04-29 15:45:15 UTC (rev 3996)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/CMakeLists.txt	2008-04-29 23:58:16 UTC (rev 3997)
@@ -0,0 +1,27 @@
+INCLUDE(admCheckGtk)
+INCLUDE(admCheckGettext)
+INCLUDE(admPluginVideoEncoder)
+
+checkGtk()
+
+IF (GTK_FOUND AND GTHREAD_FOUND)
+	checkGettext()
+
+	IF (GETTEXT_FOUND)
+		ADD_DEFINITIONS("-DHAVE_GETTEXT")
+		INCLUDE_DIRECTORIES(${GETTEXT_INCLUDE_DIR})
+	ENDIF (GETTEXT_FOUND)
+
+	SET(ADM_vidEnc_x264_Gtk_SRCS gtkSupport.cpp x264ConfigDialog.cpp)
+
+	ADD_DEFINITIONS(${GTK_CFLAGS})
+	ADD_LIBRARY(${GTK_PLUGIN_NAME} SHARED ${ADM_vidEnc_x264_Gtk_SRCS})
+	TARGET_LINK_LIBRARIES(${GTK_PLUGIN_NAME} ADM_vidEnc_x264 ${GTK_LDFLAGS} ${GTHREAD_LDFLAGS})
+	
+	IF (GETTEXT_FOUND)
+		TARGET_LINK_LIBRARIES(${GTK_PLUGIN_NAME} ${GETTEXT_LIBRARY_DIR})
+	ENDIF(GETTEXT_FOUND)
+
+	INIT_VIDEO_ENCODER_PLUGIN(ADM_vidEnc_x264_Gtk)
+	INSTALL(TARGETS ADM_vidEnc_x264_Gtk DESTINATION "${CMAKE_INSTALL_PREFIX}/lib/ADM_plugins/videoEncoder/${PLUGIN_SUBDIR}")
+ENDIF (GTK_FOUND AND GTHREAD_FOUND)
\ No newline at end of file

Added: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/gtkSupport.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/gtkSupport.cpp	2008-04-29 15:45:15 UTC (rev 3996)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/gtkSupport.cpp	2008-04-29 23:58:16 UTC (rev 3997)
@@ -0,0 +1,26 @@
+#include "gtkSupport.h"
+
+GtkWidget *lookup_widget(GtkWidget *widget, const gchar *widget_name)
+{
+	GtkWidget *parent, *found_widget;
+
+	for (;;)
+	{
+		if (GTK_IS_MENU (widget))
+			parent = gtk_menu_get_attach_widget (GTK_MENU (widget));
+		else
+			parent = widget->parent;
+		if (!parent)
+			parent = (GtkWidget *)g_object_get_data (G_OBJECT (widget), "GladeParentKey");
+		if (parent == NULL)
+			break;
+		widget = parent;
+	}
+
+	found_widget = (GtkWidget*) g_object_get_data (G_OBJECT (widget), widget_name);
+
+	if (!found_widget)
+		g_warning ("Widget not found: %s", widget_name);
+
+	return found_widget;
+}

Added: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/gtkSupport.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/gtkSupport.h	2008-04-29 15:45:15 UTC (rev 3996)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/gtkSupport.h	2008-04-29 23:58:16 UTC (rev 3997)
@@ -0,0 +1,15 @@
+#ifndef gtkSupport_h
+#define gtkSupport_h
+
+#include <gtk/gtk.h>
+
+GtkWidget *lookup_widget(GtkWidget *widget, const gchar *widget_name);
+
+#define GLADE_HOOKUP_OBJECT(component,widget,name) \
+  g_object_set_data_full (G_OBJECT (component), name, \
+    gtk_widget_ref (widget), (GDestroyNotify) gtk_widget_unref)
+
+#define GLADE_HOOKUP_OBJECT_NO_REF(component,widget,name) \
+  g_object_set_data (G_OBJECT (component), name, widget)
+
+#endif	// gtkSupport_h

Added: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp	2008-04-29 15:45:15 UTC (rev 3996)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp	2008-04-29 23:58:16 UTC (rev 3997)
@@ -0,0 +1,1957 @@
+/***************************************************************************
+                    x264ConfigDialog.cpp  -  description
+                    ------------------------------------
+
+                          GUI for configuring x264
+
+    begin                : Tue Apr 29 2008
+    copyright            : (C) 2008 by mean/gruntster
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#include <math.h>
+
+#ifdef HAVE_GETTEXT
+#include <libintl.h>
+#define _(x) gettext(x)
+#else
+#define _(x) #x
+#endif
+
+#include "ADM_inttype.h"
+#include "x264ConfigDialog.h"
+#include "gtkSupport.h"
+
+extern "C"
+{
+#include "x264.h"
+}
+
+#define MKAR(x, y, z) {x , y, #x":"#y" ("#z")"}
+#define NB_X264_AR sizeof(x264_ar) / sizeof(X264_AR)
+
+#define WID(x) lookup_widget(dialog, #x)
+
+typedef struct X264_AR
+{
+	uint32_t num, den;
+	const char *symbol;
+};
+
+const X264_AR x264_ar[] =
+{
+	MKAR(16,15,1.07),
+	MKAR(64,45,1.42),
+	MKAR(8,9,0.89),
+	MKAR(32,27,1.19)
+};
+
+typedef enum 
+{
+    ACTION_LOAD_DEFAULT = 10,
+    ACTION_LOAD_INVALID
+} x264_actions;
+
+static int _lastBitrate, _lastVideoSize;
+
+extern "C" int showX264ConfigDialog(vidEncVideoProperties *properties, vidEncOptions *encodeOptions, x264Options *options)
+{
+	_lastBitrate = 1500;
+	_lastVideoSize = 700;
+
+	GtkWidget *dialog = create_dialog1();
+
+	gtk_window_set_modal(GTK_WINDOW(dialog), 1);
+	gtk_dialog_add_action_widget(GTK_DIALOG(dialog), WID(buttonResetDaults), ACTION_LOAD_DEFAULT);
+
+#if X264_BUILD >= 58
+	gtk_combo_box_append_text(GTK_COMBO_BOX(WID(comboboxMethod)), _("Hadamard Exhaustive Search"));
+#endif
+
+	loadOptions(dialog, options);
+	updateMode(dialog, encodeOptions->encodeMode, encodeOptions->encodeModeParameter);
+	updateDeblockingFilter(dialog);
+
+	// Fill in A/R
+	for(int i = 0; i < NB_X264_AR; i++)
+		gtk_combo_box_append_text(GTK_COMBO_BOX(WID(comboboxentry1)),x264_ar[i].symbol); 
+
+	gtk_combo_box_set_active(GTK_COMBO_BOX(WID(comboboxentry1)),0);
+	gtk_signal_connect(GTK_OBJECT(WID(comboboxMode)), "changed", GTK_SIGNAL_FUNC(signalReceiver), dialog);
+	gtk_signal_connect(GTK_OBJECT(WID(entryTarget)), "changed", GTK_SIGNAL_FUNC(entryTarget_changed), dialog);
+
+	char text[40];
+
+	sprintf(text, "%u:%u", properties->parWidth, properties->parHeight);
+	gtk_label_set_text(GTK_LABEL(WID(label40)), text);
+
+	// Connect signal for deblocking filter
+	gtk_signal_connect(GTK_OBJECT(WID(checkbuttonDeblockingFilter)), "toggled", GTK_SIGNAL_FUNC(signalReceiver), dialog);
+
+	int reply = 0;
+
+	while (1)
+	{
+		reply = gtk_dialog_run(GTK_DIALOG(dialog));
+
+		if (reply == ACTION_LOAD_DEFAULT)
+		{
+			x264Options defaultOptions;
+
+			printf("Resetting to default\n");
+			loadOptions(dialog, &defaultOptions);
+			updateMode(dialog, DEFAULT_ENCODE_MODE, DEFAULT_ENCODE_MODE_PARAMETER);
+		}
+		else
+			break;
+	}
+
+	if (reply == GTK_RESPONSE_OK)
+	{
+		if (getCurrentEncodeMode(dialog) == ADM_VIDENC_MODE_CQP)
+			encodeOptions->encodeModeParameter = gtk_spin_button_get_value(GTK_SPIN_BUTTON(WID(spinbuttonQuantizer)));
+		else
+		{
+			char *str = gtk_editable_get_chars(GTK_EDITABLE(WID(entryTarget)), 0, -1);
+			encodeOptions->encodeModeParameter = atoi(str);
+		}
+
+		saveOptions(dialog, options);
+	}
+
+	gtk_widget_destroy(dialog);
+
+	return reply == GTK_RESPONSE_OK;  
+}
+
+int getCurrentEncodeMode(GtkWidget *dialog)
+{
+	int modeIndex = gtk_combo_box_get_active(GTK_COMBO_BOX(WID(comboboxMode)));
+	int encodeMode;
+
+	switch (modeIndex)
+	{
+		case 0:
+			encodeMode = ADM_VIDENC_MODE_AQP;
+			break;
+		case 1:
+			encodeMode = ADM_VIDENC_MODE_CQP;
+			break;
+		case 2:
+			encodeMode = ADM_VIDENC_MODE_CBR;
+			break;
+		case 3:
+			encodeMode = ADM_VIDENC_MODE_2PASS_SIZE;
+			break;
+		case 4:
+			encodeMode = ADM_VIDENC_MODE_2PASS_ABR;
+			break;
+	}
+
+	return encodeMode;
+}
+
+void updateMode(GtkWidget *dialog, int encodeMode, int encodeModeParameter)
+{
+	int modeIndex = 0;
+	bool quantiser = false;
+
+	switch (encodeMode)
+	{
+		case ADM_VIDENC_MODE_AQP:
+			modeIndex = 0;
+			quantiser = true;
+			break;
+		case ADM_VIDENC_MODE_CQP:
+			modeIndex = 1;
+			quantiser = true;
+			break;
+		case ADM_VIDENC_MODE_CBR:
+			modeIndex = 2;
+			gtk_label_set_text(GTK_LABEL(WID(labelTarget)),_("Target bitrate (kb/s)"));
+			break;
+		case ADM_VIDENC_MODE_2PASS_SIZE:
+			modeIndex = 3;
+			gtk_label_set_text(GTK_LABEL(WID(labelTarget)),_("Target video size (MB)"));
+			break;
+		case ADM_VIDENC_MODE_2PASS_ABR:
+			modeIndex = 4;
+			gtk_label_set_text(GTK_LABEL(WID(labelTarget)),_("Average bitrate (kb/s)"));
+			break;
+	}
+
+	gtk_combo_box_set_active(GTK_COMBO_BOX(WID(comboboxMode)), modeIndex);
+
+	if (quantiser)
+		gtk_spin_button_set_value(GTK_SPIN_BUTTON(WID(spinbuttonQuantizer)), encodeModeParameter);
+	else
+	{
+		char string[21];
+
+		snprintf(string, 20, "%d", encodeModeParameter);
+		gtk_entry_set_text(GTK_ENTRY(WID(entryTarget)), string);
+	}
+
+	gtk_widget_set_sensitive(WID(spinbuttonQuantizer), quantiser);
+	gtk_widget_set_sensitive(WID(entryTarget), !quantiser);
+}
+
+void updateDeblockingFilter(GtkWidget *dialog)
+{
+	int toggled = gtk_toggle_button_get_active(GTK_TOGGLE_BUTTON(WID(checkbuttonDeblockingFilter)));
+
+	gtk_widget_set_sensitive(WID(table8), toggled);
+}
+
+int signalReceiver(GtkObject* object, gpointer user_data)
+{
+	GtkWidget *dialog = (GtkWidget*)user_data;
+
+	if (object == GTK_OBJECT(WID(comboboxMode)))
+	{
+		int modeIndex = gtk_combo_box_get_active(GTK_COMBO_BOX(WID(comboboxMode)));
+		int encodeModeParameter;
+
+		switch (modeIndex)
+		{
+			case 0:
+				encodeModeParameter = gtk_spin_button_get_value(GTK_SPIN_BUTTON(WID(spinbuttonQuantizer)));
+				break;
+			case 1:
+				encodeModeParameter = gtk_spin_button_get_value(GTK_SPIN_BUTTON(WID(spinbuttonQuantizer)));
+				break;
+			case 2:
+				encodeModeParameter = _lastBitrate;
+				break;
+			case 3:
+				encodeModeParameter = _lastVideoSize;
+				break;
+			case 4:
+				encodeModeParameter = _lastBitrate;
+				break;
+		}
+
+		updateMode(dialog, getCurrentEncodeMode(dialog), encodeModeParameter);
+	}
+	else if (object == GTK_OBJECT(WID(checkbuttonDeblockingFilter)))
+		updateDeblockingFilter(dialog);
+}
+
+int entryTarget_changed(GtkObject* object, gpointer user_data)
+{
+	GtkWidget *dialog = (GtkWidget*)user_data;
+
+	if (gtk_combo_box_get_active(GTK_COMBO_BOX(WID(comboboxMode))) == 3)
+		_lastVideoSize = atoi(gtk_entry_get_text(GTK_ENTRY(WID(entryTarget))));
+	else
+		_lastBitrate = atoi(gtk_entry_get_text(GTK_ENTRY(WID(entryTarget))));
+}
+
+void loadOptions(GtkWidget *dialog, x264Options *options)
+{
+	gtk_toggle_button_set_active(GTK_TOGGLE_BUTTON(WID(checkbuttonfastPSkip)), options->getFastPSkip());
+	gtk_toggle_button_set_active(GTK_TOGGLE_BUTTON(WID(checkbuttonDCTDecimate)), options->getDctDecimate());
+	gtk_toggle_button_set_active(GTK_TOGGLE_BUTTON(WID(checkbuttoninterlaced)), options->getInterlaced());
+	gtk_toggle_button_set_active(GTK_TOGGLE_BUTTON(WID(checkbuttonBasReference)), options->getBFrameReferences());
+	gtk_toggle_button_set_active(GTK_TOGGLE_BUTTON(WID(checkbuttonBidirME)), options->getBidirectionalMotionEstimation());
+	gtk_toggle_button_set_active(GTK_TOGGLE_BUTTON(WID(checkbuttonAdaptative)), options->getAdaptiveBFrameDecision());
+	gtk_toggle_button_set_active(GTK_TOGGLE_BUTTON(WID(checkbuttonWeighted)), options->getWeightedPrediction());
+	gtk_toggle_button_set_active(GTK_TOGGLE_BUTTON(WID(checkbuttonMixedRefs)), options->getMixedReferences());
+	gtk_toggle_button_set_active(GTK_TOGGLE_BUTTON(WID(checkbuttonCABAC)), options->getCabac());
+
+	gtk_spin_button_set_value(GTK_SPIN_BUTTON(WID(spinbuttonTrellis)), options->getTrellis());
+	gtk_spin_button_set_value(GTK_SPIN_BUTTON(WID(spinbuttonNoiseReduction)), options->getNoiseReduction());
+
+	gtk_toggle_button_set_active(GTK_TOGGLE_BUTTON(WID(checkbuttonDeblockingFilter)), options->getLoopFilter());
+	gtk_toggle_button_set_active(GTK_TOGGLE_BUTTON(WID(checkbuttonChromaME)), options->getChromaMotionEstimation());
+
+	gtk_spin_button_set_value(GTK_SPIN_BUTTON(WID(spinbuttonBitrateVariability)), (int)floor(options->getQuantiserCurveCompression() * 100 + .5));
+	gtk_spin_button_set_value(GTK_SPIN_BUTTON(WID(spinbuttonMinQp)), options->getQuantiserMinimum());
+	gtk_spin_button_set_value(GTK_SPIN_BUTTON(WID(spinbuttonMaxQp)), options->getQuantiserMaximum());
+	gtk_spin_button_set_value(GTK_SPIN_BUTTON(WID(spinbuttonQpStep)), options->getQuantiserStep());
+	gtk_spin_button_set_value(GTK_SPIN_BUTTON(WID(spinbuttonSceneCut)), options->getScenecutThreshold());
+	gtk_spin_button_set_value(GTK_SPIN_BUTTON(WID(spinbuttonMinIdr)), options->getGopMinimumSize());
+	gtk_spin_button_set_value(GTK_SPIN_BUTTON(WID(spinbuttonMaxIdr)), options->getGopMaximumSize());
+	gtk_spin_button_set_value(GTK_SPIN_BUTTON(WID(spinbuttonvbv_max_bitrate)), options->getVbvMaximumBitrate());
+	gtk_spin_button_set_value(GTK_SPIN_BUTTON(WID(spinbuttonvbv_buffer_size)), options->getVbvBufferSize());
+	gtk_spin_button_set_value(GTK_SPIN_BUTTON(WID(spinbuttonvbv_buffer_init)), (int)floor(options->getVbvInitialOccupancy() * 100 + .5));
+	gtk_spin_button_set_value(GTK_SPIN_BUTTON(WID(spinbuttonMaxRefFrames)), options->getReferenceFrames());
+	gtk_spin_button_set_value(GTK_SPIN_BUTTON(WID(spinbuttonMaxBFrame)), options->getBFrames());
+	gtk_spin_button_set_value(GTK_SPIN_BUTTON(WID(spinbuttonBias)), options->getBFrameBias());
+	gtk_spin_button_set_value(GTK_SPIN_BUTTON(WID(spinbuttonStrength)), options->getLoopFilterAlphaC0());
+	gtk_spin_button_set_value(GTK_SPIN_BUTTON(WID(spinbuttonThreshold)), options->getLoopFilterBeta());
+
+	char string[11];
+
+	printf("%d, %d\n", options->getSarWidth(), options->getSarHeight());
+
+	snprintf(string, 10, "%d", options->getSarWidth());
+	gtk_entry_set_text(GTK_ENTRY(WID(entryAR_Num)), string);
+
+	snprintf(string, 10, "%d", options->getSarHeight());
+	gtk_entry_set_text(GTK_ENTRY(WID(entryAR_Den)), string);
+
+	gtk_spin_button_set_value(GTK_SPIN_BUTTON(WID(spinbuttonRange)), options->getMotionVectorSearchRange());
+
+	gtk_combo_box_set_active(GTK_COMBO_BOX(WID(comboboxMethod)), options->getMotionEstimationMethod());
+	gtk_combo_box_set_active(GTK_COMBO_BOX(WID(comboboxDirectMode)), options->getDirectPredictionMode());
+
+	gtk_toggle_button_set_active(GTK_TOGGLE_BUTTON(WID(checkbutton8x8)), options->getDct8x8());
+	gtk_toggle_button_set_active(GTK_TOGGLE_BUTTON(WID(checkbutton8x8P)), options->getPartitionP8x8());
+	gtk_toggle_button_set_active(GTK_TOGGLE_BUTTON(WID(checkbutton8x8B)), options->getPartitionB8x8());
+	gtk_toggle_button_set_active(GTK_TOGGLE_BUTTON(WID(checkbutton4x4)), options->getPartitionP4x4());
+	gtk_toggle_button_set_active(GTK_TOGGLE_BUTTON(WID(checkbutton8x8I)), options->getPartitionI8x8());
+	gtk_toggle_button_set_active(GTK_TOGGLE_BUTTON(WID(checkbutton4x4I)), options->getPartitionI4x4());
+	gtk_toggle_button_set_active(GTK_TOGGLE_BUTTON(WID(radiobuttonAsInputAR)), options->getSarAsInput());
+
+	int decisionItem;
+
+	if (options->getSubpixelRefinement() < 6)
+		decisionItem = options->getSubpixelRefinement() - 1;
+	else
+		if (options->getSubpixelRefinement() == 6)
+			if (options->getBFrameRdo())
+				decisionItem = 6;
+			else
+				decisionItem = 5;
+		else
+			if (options->getBFrameRdo())
+				decisionItem = 8;
+			else
+				decisionItem = 7;
+
+	gtk_combo_box_set_active(GTK_COMBO_BOX(WID(comboboxPartitionDecision)), decisionItem);
+}
+
+void saveOptions(GtkWidget *dialog, x264Options *options)
+{
+	options->setFastPSkip(gtk_toggle_button_get_active(GTK_TOGGLE_BUTTON(WID(checkbuttonfastPSkip))));
+	options->setDctDecimate(gtk_toggle_button_get_active(GTK_TOGGLE_BUTTON(WID(checkbuttonDCTDecimate))));
+	options->setInterlaced(gtk_toggle_button_get_active(GTK_TOGGLE_BUTTON(WID(checkbuttoninterlaced))));
+	options->setBFrameReferences(gtk_toggle_button_get_active(GTK_TOGGLE_BUTTON(WID(checkbuttonBasReference))));
+	options->setBidirectionalMotionEstimation(gtk_toggle_button_get_active(GTK_TOGGLE_BUTTON(WID(checkbuttonBidirME))));
+	options->setAdaptiveBFrameDecision(gtk_toggle_button_get_active(GTK_TOGGLE_BUTTON(WID(checkbuttonAdaptative))));
+	options->setWeightedPrediction(gtk_toggle_button_get_active(GTK_TOGGLE_BUTTON(WID(checkbuttonWeighted))));
+	options->setMixedReferences(gtk_toggle_button_get_active(GTK_TOGGLE_BUTTON(WID(checkbuttonMixedRefs))));
+	options->setCabac(gtk_toggle_button_get_active(GTK_TOGGLE_BUTTON(WID(checkbuttonCABAC))));
+
+	options->setTrellis(gtk_spin_button_get_value(GTK_SPIN_BUTTON(WID(spinbuttonTrellis))));
+	options->setNoiseReduction(gtk_spin_button_get_value(GTK_SPIN_BUTTON(WID(spinbuttonNoiseReduction))));
+
+	options->setLoopFilter(gtk_toggle_button_get_active(GTK_TOGGLE_BUTTON(WID(checkbuttonDeblockingFilter))));
+	options->setChromaMotionEstimation(gtk_toggle_button_get_active(GTK_TOGGLE_BUTTON(WID(checkbuttonChromaME))));
+
+	options->setQuantiserCurveCompression((float)gtk_spin_button_get_value(GTK_SPIN_BUTTON(WID(spinbuttonBitrateVariability))) / 100);
+	options->setQuantiserMinimum(gtk_spin_button_get_value(GTK_SPIN_BUTTON(WID(spinbuttonMinQp))));
+	options->setQuantiserMaximum(gtk_spin_button_get_value(GTK_SPIN_BUTTON(WID(spinbuttonMaxQp))));
+	options->setQuantiserStep(gtk_spin_button_get_value(GTK_SPIN_BUTTON(WID(spinbuttonQpStep))));
+	options->setScenecutThreshold(gtk_spin_button_get_value(GTK_SPIN_BUTTON(WID(spinbuttonSceneCut))));
+	options->setGopMinimumSize(gtk_spin_button_get_value(GTK_SPIN_BUTTON(WID(spinbuttonMinIdr))));
+	options->setGopMaximumSize(gtk_spin_button_get_value(GTK_SPIN_BUTTON(WID(spinbuttonMaxIdr))));
+	options->setVbvMaximumBitrate(gtk_spin_button_get_value(GTK_SPIN_BUTTON(WID(spinbuttonvbv_max_bitrate))));
+	options->setVbvBufferSize(gtk_spin_button_get_value(GTK_SPIN_BUTTON(WID(spinbuttonvbv_buffer_size))));
+	options->setVbvInitialOccupancy((float)gtk_spin_button_get_value(GTK_SPIN_BUTTON(WID(spinbuttonvbv_buffer_init))) / 100);
+	options->setReferenceFrames(gtk_spin_button_get_value(GTK_SPIN_BUTTON(WID(spinbuttonMaxRefFrames))));
+	options->setBFrames(gtk_spin_button_get_value(GTK_SPIN_BUTTON(WID(spinbuttonMaxBFrame))));
+	options->setBFrameBias(gtk_spin_button_get_value(GTK_SPIN_BUTTON(WID(spinbuttonBias))));
+	options->setLoopFilterAlphaC0(gtk_spin_button_get_value(GTK_SPIN_BUTTON(WID(spinbuttonStrength))));
+	options->setLoopFilterBeta(gtk_spin_button_get_value(GTK_SPIN_BUTTON(WID(spinbuttonThreshold))));
+	options->setMotionVectorSearchRange(gtk_spin_button_get_value(GTK_SPIN_BUTTON(WID(spinbuttonRange))));
+
+	options->setMotionEstimationMethod(gtk_combo_box_get_active(GTK_COMBO_BOX(WID(comboboxMethod))));
+	options->setDirectPredictionMode(gtk_combo_box_get_active(GTK_COMBO_BOX(WID(comboboxDirectMode))));
+
+	options->setDct8x8(gtk_toggle_button_get_active(GTK_TOGGLE_BUTTON(WID(checkbutton8x8))));
+	options->setPartitionP8x8(gtk_toggle_button_get_active(GTK_TOGGLE_BUTTON(WID(checkbutton8x8P))));
+	options->setPartitionB8x8(gtk_toggle_button_get_active(GTK_TOGGLE_BUTTON(WID(checkbutton8x8B))));
+	options->setPartitionP4x4(gtk_toggle_button_get_active(GTK_TOGGLE_BUTTON(WID(checkbutton4x4))));
+	options->setPartitionI8x8(gtk_toggle_button_get_active(GTK_TOGGLE_BUTTON(WID(checkbutton8x8I))));
+	options->setPartitionI4x4(gtk_toggle_button_get_active(GTK_TOGGLE_BUTTON(WID(checkbutton4x4I))));
+
+	/* Extra case for aspect ratio */
+	if (gtk_toggle_button_get_active(GTK_TOGGLE_BUTTON(WID(radiobuttonPredefinedAR))))
+	{
+		int rank = gtk_combo_box_get_active(GTK_COMBO_BOX(WID(comboboxentry1)));
+
+		options->setSarWidth(x264_ar[rank].num);
+		options->setSarHeight(x264_ar[rank].den);
+	}
+	else if (gtk_toggle_button_get_active(GTK_TOGGLE_BUTTON(WID(radiobuttonCustomAR))))
+	{
+		options->setSarWidth(atoi(gtk_entry_get_text(GTK_ENTRY(WID(entryAR_Num)))));
+		options->setSarHeight(atoi(gtk_entry_get_text(GTK_ENTRY(WID(entryAR_Den)))));
+	}
+	else
+	{
+		options->setSarWidth(1);
+		options->setSarHeight(1);
+	}
+
+	options->setSarAsInput(gtk_toggle_button_get_active(GTK_TOGGLE_BUTTON(WID(radiobuttonAsInputAR))));
+
+	uint32_t decisionItem = gtk_combo_box_get_active(GTK_COMBO_BOX(WID(comboboxPartitionDecision)));
+
+	if (decisionItem < 6)
+	{
+		options->setSubpixelRefinement(decisionItem + 1);
+		options->setBFrameRdo(false);
+	}
+	else if (decisionItem == 6)
+	{
+		options->setSubpixelRefinement(6);
+		options->setBFrameRdo(true);
+	}
+	else
+	{
+		options->setSubpixelRefinement(7);
+		options->setBFrameRdo(decisionItem == 8);
+	}
+}
+
+GtkWidget*
+create_dialog1 (void)
+{
+  GtkWidget *dialog1;
+  GtkWidget *dialog_vbox1;
+  GtkWidget *notebook1;
+  GtkWidget *alignment14;
+  GtkWidget *tableBitrate;
+  GtkWidget *labelEncodingMode;
+  GtkWidget *labelQuantizer;
+  GtkWidget *labelTarget;
+  GtkObject *spinbuttonQuantizer_adj;
+  GtkWidget *spinbuttonQuantizer;
+  GtkWidget *entryTarget;
+  GtkWidget *comboboxMode;
+  GtkWidget *labelPageBitrate;
+  GtkWidget *alignment15;
+  GtkWidget *vbox5;
+  GtkWidget *frame6;
+  GtkWidget *alignment6;
+  GtkWidget *vbox6;
+  GtkWidget *table7;
+  GtkWidget *labelPartitionDecision;
+  GtkWidget *labelMethod;
+  GtkWidget *comboboxPartitionDecision;
+  GtkWidget *comboboxMethod;
+  GtkWidget *table11;
+  GtkWidget *labelMaxRefFrames;
+  GtkWidget *labelRange;
+  GtkObject *spinbuttonRange_adj;
+  GtkWidget *spinbuttonRange;
+  GtkObject *spinbuttonMaxRefFrames_adj;
+  GtkWidget *spinbuttonMaxRefFrames;
+  GtkWidget *checkbuttonChromaME;
+  GtkWidget *checkbuttonMixedRefs;
+  GtkWidget *hbox8;
+  GtkWidget *checkbuttonfastPSkip;
+  GtkWidget *checkbuttonDCTDecimate;
+  GtkWidget *checkbuttoninterlaced;
+  GtkWidget *label24;
+  GtkWidget *frameSampleAR;
+  GtkWidget *alignment12;
+  GtkWidget *table35;
+  GtkWidget *hbox12;
+  GtkWidget *entryAR_Num;
+  GtkWidget *label53;
+  GtkWidget *entryAR_Den;
+  GtkWidget *radiobuttonCustomAR;
+  GSList *radiobuttonCustomAR_group = NULL;
+  GtkWidget *radiobuttonPredefinedAR;
+  GtkWidget *radiobuttonAsInputAR;
+  GtkWidget *label40;
+  GtkWidget *comboboxentry1;
+  GtkWidget *label39;
+  GtkWidget *frame7;
+  GtkWidget *alignment7;
+  GtkWidget *vbox7;
+  GtkWidget *alignment21;
+  GtkWidget *hbox2;
+  GtkWidget *checkbuttonCABAC;
+  GtkWidget *hbox7;
+  GtkWidget *labelTrellis;
+  GtkObject *spinbuttonTrellis_adj;
+  GtkWidget *spinbuttonTrellis;
+  GtkWidget *hbox11;
+  GtkWidget *labelNoiseReduction;
+  GtkObject *spinbuttonNoiseReduction_adj;
+  GtkWidget *spinbuttonNoiseReduction;
+  GtkWidget *hbox3;
+  GtkWidget *checkbuttonDeblockingFilter;
+  GtkWidget *table8;
+  GtkWidget *labelThreshold;
+  GtkWidget *labelStrength;
+  GtkObject *spinbuttonThreshold_adj;
+  GtkWidget *spinbuttonThreshold;
+  GtkObject *spinbuttonStrength_adj;
+  GtkWidget *spinbuttonStrength;
+  GtkWidget *label25;
+  GtkWidget *labelPageMotion_More;
+  GtkWidget *alignment16;
+  GtkWidget *vbox2;
+  GtkWidget *frame4;
+  GtkWidget *alignment4;
+  GtkWidget *vbox3;
+  GtkWidget *checkbutton8x8;
+  GtkWidget *checkbutton8x8P;
+  GtkWidget *checkbutton8x8B;
+  GtkWidget *checkbutton4x4;
+  GtkWidget *checkbutton8x8I;
+  GtkWidget *checkbutton4x4I;
+  GtkWidget *label19;
+  GtkWidget *frame5;
+  GtkWidget *alignment5;
+  GtkWidget *vbox4;
+  GtkWidget *table5;
+  GtkWidget *labelBias;
+  GtkWidget *labelMaxConsecutive;
+  GtkObject *spinbuttonBias_adj;
+  GtkWidget *spinbuttonBias;
+  GtkObject *spinbuttonMaxBFrame_adj;
+  GtkWidget *spinbuttonMaxBFrame;
+  GtkWidget *alignment20;
+  GtkWidget *table6;
+  GtkWidget *checkbuttonBidirME;
+  GtkWidget *checkbuttonWeighted;
+  GtkWidget *checkbuttonAdaptative;
+  GtkWidget *checkbuttonBasReference;
+  GtkWidget *hbox1;
+  GtkWidget *labelBFrameDirectMode;
+  GtkWidget *comboboxDirectMode;
+  GtkWidget *label20;
+  GtkWidget *labelPagePartion_Frame;
+  GtkWidget *alignment17;
+  GtkWidget *vbox1;
+  GtkWidget *frame1;
+  GtkWidget *alignment1;
+  GtkWidget *table2;
+  GtkObject *spinbuttonKeyframeBoost_adj;
+  GtkWidget *spinbuttonKeyframeBoost;
+  GtkObject *spinbuttonBframeReduction_adj;
+  GtkWidget *spinbuttonBframeReduction;
+  GtkObject *spinbuttonBitrateVariability_adj;
+  GtkWidget *spinbuttonBitrateVariability;
+  GtkWidget *labelKeyframeboost;
+  GtkWidget *label11;
+  GtkWidget *label12;
+  GtkWidget *label7;
+  GtkWidget *frame2;
+  GtkWidget *alignment2;
+  GtkWidget *table3;
+  GtkWidget *label13;
+  GtkWidget *label14;
+  GtkWidget *label15;
+  GtkObject *spinbuttonMinQp_adj;
+  GtkWidget *spinbuttonMinQp;
+  GtkObject *spinbuttonMaxQp_adj;
+  GtkWidget *spinbuttonMaxQp;
+  GtkObject *spinbuttonQpStep_adj;
+  GtkWidget *spinbuttonQpStep;
+  GtkWidget *label8;
+  GtkWidget *frame3;
+  GtkWidget *alignment3;
+  GtkWidget *table4;
+  GtkObject *spinbuttonSceneCut_adj;
+  GtkWidget *spinbuttonSceneCut;
+  GtkWidget *label16;
+  GtkWidget *label17;
+  GtkObject *spinbuttonMinIdr_adj;
+  GtkWidget *spinbuttonMinIdr;
+  GtkObject *spinbuttonMaxIdr_adj;
+  GtkWidget *spinbuttonMaxIdr;
+  GtkWidget *label18;
+  GtkWidget *labelMoreEncodingSettings;
+  GtkWidget *frameVideoBufferVerifier;
+  GtkWidget *alignment11;
+  GtkWidget *table12;
+  GtkWidget *labelVBVBufferSize;
+  GtkWidget *labelVBVInitialbuffer;
+  GtkWidget *labelVBVMaximumBitrate;
+  GtkObject *spinbuttonvbv_max_bitrate_adj;
+  GtkWidget *spinbuttonvbv_max_bitrate;
+  GtkObject *spinbuttonvbv_buffer_size_adj;
+  GtkWidget *spinbuttonvbv_buffer_size;
+  GtkObject *spinbuttonvbv_buffer_init_adj;
+  GtkWidget *spinbuttonvbv_buffer_init;
+  GtkWidget *labelVideoBufferVerifier;
+  GtkWidget *labelPageRateControl;
+  GtkWidget *alignment18;
+  GtkWidget *vbox8;
+  GtkWidget *frame10;
+  GtkWidget *alignment10;
+  GtkWidget *table15;
+  GtkWidget *labelBitrateVariance;
+  GtkObject *spinbuttonBitrateVariance_adj;
+  GtkWidget *spinbuttonBitrateVariance;
+  GtkObject *spinbuttonQuantizerCompression_adj;
+  GtkWidget *spinbuttonQuantizerCompression;
+  GtkObject *spinbuttonTempBlurFrame_adj;
+  GtkWidget *spinbuttonTempBlurFrame;
+  GtkObject *spinbuttonTempBlurQuant_adj;
+  GtkWidget *spinbuttonTempBlurQuant;
+  GtkWidget *labelQuantizerCompression;
+  GtkWidget *labelTempBlurEstFrame;
+  GtkWidget *labelTempBlueQuant;
+  GtkWidget *labelMisc;
+  GtkWidget *frame11;
+  GtkWidget *alignment13;
+  GtkWidget *table16;
+  GtkObject *spinbutton8_adj;
+  GtkWidget *spinbutton8;
+  GtkObject *spinbutton9_adj;
+  GtkWidget *spinbutton9;
+  GtkObject *spinbuttonChromaQPOffset_adj;
+  GtkWidget *spinbuttonChromaQPOffset;
+  GtkWidget *labelFactorbetweenIandP;
+  GtkWidget *labelFactorbetweenPandB;
+  GtkWidget *labelChromaQPOffset;
+  GtkWidget *labelQuantizers;
+  GtkWidget *frame9;
+  GtkWidget *alignment9;
+  GtkWidget *vbox9;
+  GtkWidget *radiobuttonFlatmatrix;
+  GSList *radiobuttonFlatmatrix_group = NULL;
+  GtkWidget *radiobuttonJVTmatrix;
+  GtkWidget *hbox13;
+  GtkWidget *radiobuttonCustommatrix;
+  GtkWidget *hbox14;
+  GtkWidget *filechooserbuttonOpenCQMFile;
+  GtkWidget *vseparator1;
+  GtkWidget *buttonEditCustomMatrix;
+  GtkWidget *labelFrameQuantizationMatrices;
+  GtkWidget *labelMore;
+  GtkWidget *dialog_action_area1;
+  GtkWidget *buttonResetDaults;
+  GtkWidget *cancelbutton1;
+  GtkWidget *okbutton1;
+  GtkTooltips *tooltips;
+
+  tooltips = gtk_tooltips_new ();
+
+  dialog1 = gtk_dialog_new ();
+  gtk_window_set_title (GTK_WINDOW (dialog1), _("x264 Configuration"));
+  gtk_window_set_type_hint (GTK_WINDOW (dialog1), GDK_WINDOW_TYPE_HINT_DIALOG);
+
+  dialog_vbox1 = GTK_DIALOG (dialog1)->vbox;
+  gtk_widget_show (dialog_vbox1);
+
+  notebook1 = gtk_notebook_new ();
+  gtk_widget_show (notebook1);
+  gtk_box_pack_start (GTK_BOX (dialog_vbox1), notebook1, TRUE, TRUE, 0);
+
+  alignment14 = gtk_alignment_new (0.5, 0.5, 1, 1);
+  gtk_widget_show (alignment14);
+  gtk_container_add (GTK_CONTAINER (notebook1), alignment14);
+  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment14), 7, 7, 7, 7);
+
+  tableBitrate = gtk_table_new (3, 2, FALSE);
+  gtk_widget_show (tableBitrate);
+  gtk_container_add (GTK_CONTAINER (alignment14), tableBitrate);
+  gtk_table_set_row_spacings (GTK_TABLE (tableBitrate), 3);
+  gtk_table_set_col_spacings (GTK_TABLE (tableBitrate), 10);
+
+  labelEncodingMode = gtk_label_new (_("Encoding Mode"));
+  gtk_widget_show (labelEncodingMode);
+  gtk_table_attach (GTK_TABLE (tableBitrate), labelEncodingMode, 0, 1, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelEncodingMode), 0, 0.5);
+
+  labelQuantizer = gtk_label_new (_("Quantizer"));
+  gtk_widget_show (labelQuantizer);
+  gtk_table_attach (GTK_TABLE (tableBitrate), labelQuantizer, 0, 1, 2, 3,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelQuantizer), 0, 0.5);
+
+  labelTarget = gtk_label_new (_("Target Size"));
+  gtk_widget_show (labelTarget);
+  gtk_table_attach (GTK_TABLE (tableBitrate), labelTarget, 0, 1, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelTarget), 0, 0.5);
+
+  spinbuttonQuantizer_adj = gtk_adjustment_new (4, 0, 51, 1, 10, 10);
+  spinbuttonQuantizer = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonQuantizer_adj), 1, 0);
+  gtk_widget_show (spinbuttonQuantizer);
+  gtk_table_attach (GTK_TABLE (tableBitrate), spinbuttonQuantizer, 1, 2, 2, 3,
+                    (GtkAttachOptions) (GTK_SHRINK | GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, spinbuttonQuantizer, _("Constant Quantizer - Each frame will have the same compression. Low numbers equal higher quality while high numbers equal lower quality."), NULL);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonQuantizer), TRUE);
+
+  entryTarget = gtk_entry_new ();
+  gtk_widget_show (entryTarget);
+  gtk_table_attach (GTK_TABLE (tableBitrate), entryTarget, 1, 2, 1, 2,
+                    (GtkAttachOptions) (GTK_SHRINK | GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, entryTarget, _("Target bitrate or file size"), NULL);
+  gtk_entry_set_width_chars (GTK_ENTRY (entryTarget), 4);
+
+  comboboxMode = gtk_combo_box_new_text ();
+  gtk_widget_show (comboboxMode);
+  gtk_table_attach (GTK_TABLE (tableBitrate), comboboxMode, 1, 2, 0, 1,
+                    (GtkAttachOptions) (GTK_SHRINK | GTK_FILL),
+                    (GtkAttachOptions) (GTK_FILL), 0, 0);
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxMode), _("Single Pass - Quality Quantizer (Average)"));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxMode), _("Single Pass - Quality Quantizer (Constant)"));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxMode), _("Single Pass - Bitrate (Average)"));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxMode), _("Two Pass - Video Size"));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxMode), _("Two Pass - Average Bitrate"));
+
+  labelPageBitrate = gtk_label_new (_("Bitrate"));
+  gtk_widget_show (labelPageBitrate);
+  gtk_notebook_set_tab_label (GTK_NOTEBOOK (notebook1), gtk_notebook_get_nth_page (GTK_NOTEBOOK (notebook1), 0), labelPageBitrate);
+  gtk_misc_set_alignment (GTK_MISC (labelPageBitrate), 0, 0.5);
+
+  alignment15 = gtk_alignment_new (0.5, 0.5, 1, 1);
+  gtk_widget_show (alignment15);
+  gtk_container_add (GTK_CONTAINER (notebook1), alignment15);
+  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment15), 7, 7, 7, 7);
+
+  vbox5 = gtk_vbox_new (FALSE, 3);
+  gtk_widget_show (vbox5);
+  gtk_container_add (GTK_CONTAINER (alignment15), vbox5);
+
+  frame6 = gtk_frame_new (NULL);
+  gtk_widget_show (frame6);
+  gtk_box_pack_start (GTK_BOX (vbox5), frame6, FALSE, TRUE, 0);
+
+  alignment6 = gtk_alignment_new (0.5, 0.5, 1, 1);
+  gtk_widget_show (alignment6);
+  gtk_container_add (GTK_CONTAINER (frame6), alignment6);
+  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment6), 7, 4, 7, 7);
+
+  vbox6 = gtk_vbox_new (FALSE, 3);
+  gtk_widget_show (vbox6);
+  gtk_container_add (GTK_CONTAINER (alignment6), vbox6);
+
+  table7 = gtk_table_new (2, 3, FALSE);
+  gtk_widget_show (table7);
+  gtk_box_pack_start (GTK_BOX (vbox6), table7, FALSE, TRUE, 0);
+  gtk_table_set_row_spacings (GTK_TABLE (table7), 3);
+  gtk_table_set_col_spacings (GTK_TABLE (table7), 10);
+
+  labelPartitionDecision = gtk_label_new (_("Partition Decision"));
+  gtk_widget_show (labelPartitionDecision);
+  gtk_table_attach (GTK_TABLE (table7), labelPartitionDecision, 0, 1, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelPartitionDecision), 0, 0.5);
+
+  labelMethod = gtk_label_new (_("Method"));
+  gtk_widget_show (labelMethod);
+  gtk_table_attach (GTK_TABLE (table7), labelMethod, 0, 1, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelMethod), 0, 0.5);
+
+  comboboxPartitionDecision = gtk_combo_box_new_text ();
+  gtk_widget_show (comboboxPartitionDecision);
+  gtk_table_attach (GTK_TABLE (table7), comboboxPartitionDecision, 1, 3, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (GTK_FILL), 0, 0);
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxPartitionDecision), _("1  - Extremely Low (Fastest)"));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxPartitionDecision), _("2  - Very Low"));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxPartitionDecision), _("3  - Low"));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxPartitionDecision), _("4  - Medium"));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxPartitionDecision), _("5  - High (Default)"));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxPartitionDecision), _("6  - Very High"));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxPartitionDecision), _("6B - Very High (RDO on B-frames)"));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxPartitionDecision), _("7  - Ultra High"));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxPartitionDecision), _("7B - Ultra High (RDO on B-frames)"));
+
+  comboboxMethod = gtk_combo_box_new_text ();
+  gtk_widget_show (comboboxMethod);
+  gtk_table_attach (GTK_TABLE (table7), comboboxMethod, 1, 3, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (GTK_FILL), 0, 0);
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxMethod), _("Diamond Search"));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxMethod), _("Hexagonal Search"));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxMethod), _("Uneven Multi-hexagon"));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxMethod), _("Exhaustive Search"));
+
+  table11 = gtk_table_new (2, 3, FALSE);
+  gtk_widget_show (table11);
+  gtk_box_pack_start (GTK_BOX (vbox6), table11, TRUE, FALSE, 0);
+  gtk_table_set_row_spacings (GTK_TABLE (table11), 3);
+  gtk_table_set_col_spacings (GTK_TABLE (table11), 10);
+
+  labelMaxRefFrames = gtk_label_new (_("Max. Ref. Frames"));
+  gtk_widget_show (labelMaxRefFrames);
+  gtk_table_attach (GTK_TABLE (table11), labelMaxRefFrames, 0, 1, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelMaxRefFrames), 0, 0.5);
+
+  labelRange = gtk_label_new (_("Range"));
+  gtk_widget_show (labelRange);
+  gtk_table_attach (GTK_TABLE (table11), labelRange, 0, 1, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelRange), 0, 0.5);
+
+  spinbuttonRange_adj = gtk_adjustment_new (17, 0, 64, 1, 10, 10);
+  spinbuttonRange = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonRange_adj), 1, 0);
+  gtk_widget_show (spinbuttonRange);
+  gtk_table_attach (GTK_TABLE (table11), spinbuttonRange, 1, 2, 0, 1,
+                    (GtkAttachOptions) (GTK_SHRINK | GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, spinbuttonRange, _("Define how many pixels are analysed for motion estimation. The higher the range the more accurate the analysis but the slower the encoding time."), NULL);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonRange), TRUE);
+
+  spinbuttonMaxRefFrames_adj = gtk_adjustment_new (1, 0, 16, 1, 10, 10);
+  spinbuttonMaxRefFrames = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonMaxRefFrames_adj), 1, 0);
+  gtk_widget_show (spinbuttonMaxRefFrames);
+  gtk_table_attach (GTK_TABLE (table11), spinbuttonMaxRefFrames, 1, 2, 1, 2,
+                    (GtkAttachOptions) (GTK_SHRINK | GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, spinbuttonMaxRefFrames, _("Set how many previous frames can be referenced by a P/B-frame. Numbers above 5 do not seem to improve quality greatly. Numbers 3 to 5 are recommended."), NULL);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonMaxRefFrames), TRUE);
+
+  checkbuttonChromaME = gtk_check_button_new_with_mnemonic (_("Chroma ME"));
+  gtk_widget_show (checkbuttonChromaME);
+  gtk_table_attach (GTK_TABLE (table11), checkbuttonChromaME, 2, 3, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 30, 0);
+  gtk_tooltips_set_tip (tooltips, checkbuttonChromaME, _("Use color information for detecting motion to improve quality"), NULL);
+  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (checkbuttonChromaME), TRUE);
+
+  checkbuttonMixedRefs = gtk_check_button_new_with_mnemonic (_("Mixed Refs"));
+  gtk_widget_show (checkbuttonMixedRefs);
+  gtk_table_attach (GTK_TABLE (table11), checkbuttonMixedRefs, 2, 3, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 30, 0);
+  gtk_tooltips_set_tip (tooltips, checkbuttonMixedRefs, _("Calculate referencing individually based on each partition"), NULL);
+
+  hbox8 = gtk_hbox_new (TRUE, 0);
+  gtk_widget_show (hbox8);
+  gtk_box_pack_start (GTK_BOX (vbox6), hbox8, TRUE, TRUE, 0);
+
+  checkbuttonfastPSkip = gtk_check_button_new_with_mnemonic (_("Fast P-Skip"));
+  gtk_widget_show (checkbuttonfastPSkip);
+  gtk_box_pack_start (GTK_BOX (hbox8), checkbuttonfastPSkip, FALSE, FALSE, 0);
+  gtk_tooltips_set_tip (tooltips, checkbuttonfastPSkip, _("Early skip detection on P-frames to speedup encoding. Quality will be slightly reduced."), NULL);
+  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (checkbuttonfastPSkip), TRUE);
+
+  checkbuttonDCTDecimate = gtk_check_button_new_with_mnemonic (_("DCT Decimate"));
+  gtk_widget_show (checkbuttonDCTDecimate);
+  gtk_box_pack_start (GTK_BOX (hbox8), checkbuttonDCTDecimate, FALSE, FALSE, 0);
+  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (checkbuttonDCTDecimate), TRUE);
+
+  checkbuttoninterlaced = gtk_check_button_new_with_mnemonic (_("Interlaced"));
+  gtk_widget_show (checkbuttoninterlaced);
+  gtk_box_pack_start (GTK_BOX (hbox8), checkbuttoninterlaced, FALSE, FALSE, 0);
+  gtk_tooltips_set_tip (tooltips, checkbuttoninterlaced, _("Input video is interlaced"), NULL);
+
+  label24 = gtk_label_new (_("<b>Motion Estimation</b>"));
+  gtk_widget_show (label24);
+  gtk_frame_set_label_widget (GTK_FRAME (frame6), label24);
+  gtk_label_set_use_markup (GTK_LABEL (label24), TRUE);
+
+  frameSampleAR = gtk_frame_new (NULL);
+  gtk_widget_show (frameSampleAR);
+  gtk_box_pack_start (GTK_BOX (vbox5), frameSampleAR, FALSE, TRUE, 0);
+
+  alignment12 = gtk_alignment_new (0.5, 0.5, 1, 1);
+  gtk_widget_show (alignment12);
+  gtk_container_add (GTK_CONTAINER (frameSampleAR), alignment12);
+  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment12), 7, 7, 7, 7);
+
+  table35 = gtk_table_new (3, 2, FALSE);
+  gtk_widget_show (table35);
+  gtk_container_add (GTK_CONTAINER (alignment12), table35);
+  gtk_table_set_row_spacings (GTK_TABLE (table35), 3);
+  gtk_table_set_col_spacings (GTK_TABLE (table35), 10);
+
+  hbox12 = gtk_hbox_new (FALSE, 0);
+  gtk_widget_show (hbox12);
+  gtk_table_attach (GTK_TABLE (table35), hbox12, 1, 2, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (GTK_FILL), 0, 0);
+
+  entryAR_Num = gtk_entry_new ();
+  gtk_widget_show (entryAR_Num);
+  gtk_box_pack_start (GTK_BOX (hbox12), entryAR_Num, TRUE, TRUE, 0);
+  gtk_tooltips_set_tip (tooltips, entryAR_Num, _("Enforce the size of a decoded pixel decoded to a certain value. Set this to 1:1 for non-anamorphic video."), NULL);
+  gtk_entry_set_text (GTK_ENTRY (entryAR_Num), _("1"));
+  gtk_entry_set_width_chars (GTK_ENTRY (entryAR_Num), 4);
+
+  label53 = gtk_label_new (_(":"));
+  gtk_widget_show (label53);
+  gtk_box_pack_start (GTK_BOX (hbox12), label53, FALSE, FALSE, 3);
+
+  entryAR_Den = gtk_entry_new ();
+  gtk_widget_show (entryAR_Den);
+  gtk_box_pack_start (GTK_BOX (hbox12), entryAR_Den, TRUE, TRUE, 0);
+  gtk_tooltips_set_tip (tooltips, entryAR_Den, _("Enforce the size of a decoded pixel decoded to a certain value. Set this to 1:1 for non-anamorphic video."), NULL);
+  gtk_entry_set_text (GTK_ENTRY (entryAR_Den), _("1"));
+  gtk_entry_set_width_chars (GTK_ENTRY (entryAR_Den), 4);
+
+  radiobuttonCustomAR = gtk_radio_button_new_with_mnemonic (NULL, _("Custom"));
+  gtk_widget_show (radiobuttonCustomAR);
+  gtk_table_attach (GTK_TABLE (table35), radiobuttonCustomAR, 0, 1, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, radiobuttonCustomAR, _("Set a custom aspect ratio. The default 1:1 is recommended for most video."), NULL);
+  gtk_radio_button_set_group (GTK_RADIO_BUTTON (radiobuttonCustomAR), radiobuttonCustomAR_group);
+  radiobuttonCustomAR_group = gtk_radio_button_get_group (GTK_RADIO_BUTTON (radiobuttonCustomAR));
+  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (radiobuttonCustomAR), TRUE);
+
+  radiobuttonPredefinedAR = gtk_radio_button_new_with_mnemonic (NULL, _("Predefined Aspect Ratio"));
+  gtk_widget_show (radiobuttonPredefinedAR);
+  gtk_table_attach (GTK_TABLE (table35), radiobuttonPredefinedAR, 0, 1, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, radiobuttonPredefinedAR, _("Set a common predefined aspect ratio"), NULL);
+  gtk_radio_button_set_group (GTK_RADIO_BUTTON (radiobuttonPredefinedAR), radiobuttonCustomAR_group);
+  radiobuttonCustomAR_group = gtk_radio_button_get_group (GTK_RADIO_BUTTON (radiobuttonPredefinedAR));
+
+  radiobuttonAsInputAR = gtk_radio_button_new_with_mnemonic (NULL, _("As Input"));
+  gtk_widget_show (radiobuttonAsInputAR);
+  gtk_table_attach (GTK_TABLE (table35), radiobuttonAsInputAR, 0, 1, 2, 3,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_radio_button_set_group (GTK_RADIO_BUTTON (radiobuttonAsInputAR), radiobuttonCustomAR_group);
+  radiobuttonCustomAR_group = gtk_radio_button_get_group (GTK_RADIO_BUTTON (radiobuttonAsInputAR));
+
+  label40 = gtk_label_new ("1:1 (1:1)");
+  gtk_widget_show (label40);
+  gtk_table_attach (GTK_TABLE (table35), label40, 1, 2, 2, 3,
+                    (GtkAttachOptions) (0),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (label40), 0, 0.5);
+
+  comboboxentry1 = gtk_combo_box_new_text ();
+  gtk_widget_show (comboboxentry1);
+  gtk_table_attach (GTK_TABLE (table35), comboboxentry1, 1, 2, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (GTK_FILL), 0, 0);
+
+  label39 = gtk_label_new (_("<b>Sample Aspect Ratio</b>"));
+  gtk_widget_show (label39);
+  gtk_frame_set_label_widget (GTK_FRAME (frameSampleAR), label39);
+  gtk_label_set_use_markup (GTK_LABEL (label39), TRUE);
+
+  frame7 = gtk_frame_new (NULL);
+  gtk_widget_show (frame7);
+  gtk_box_pack_start (GTK_BOX (vbox5), frame7, FALSE, TRUE, 0);
+
+  alignment7 = gtk_alignment_new (0.5, 0.5, 1, 1);
+  gtk_widget_show (alignment7);
+  gtk_container_add (GTK_CONTAINER (frame7), alignment7);
+  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment7), 7, 7, 7, 7);
+
+  vbox7 = gtk_vbox_new (FALSE, 3);
+  gtk_widget_show (vbox7);
+  gtk_container_add (GTK_CONTAINER (alignment7), vbox7);
+
+  alignment21 = gtk_alignment_new (0.5, 0.5, 1, 1);
+  gtk_widget_show (alignment21);
+  gtk_box_pack_start (GTK_BOX (vbox7), alignment21, TRUE, TRUE, 0);
+  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment21), 0, 3, 0, 0);
+
+  hbox2 = gtk_hbox_new (FALSE, 17);
+  gtk_widget_show (hbox2);
+  gtk_container_add (GTK_CONTAINER (alignment21), hbox2);
+
+  checkbuttonCABAC = gtk_check_button_new_with_mnemonic (_("CABAC"));
+  gtk_widget_show (checkbuttonCABAC);
+  gtk_box_pack_start (GTK_BOX (hbox2), checkbuttonCABAC, FALSE, FALSE, 0);
+  gtk_tooltips_set_tip (tooltips, checkbuttonCABAC, _("Lossless compression technique that reduces bitrate by approximately 10%. Increases encoding and decoding time."), NULL);
+  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (checkbuttonCABAC), TRUE);
+
+  hbox7 = gtk_hbox_new (FALSE, 10);
+  gtk_widget_show (hbox7);
+  gtk_box_pack_start (GTK_BOX (hbox2), hbox7, FALSE, FALSE, 0);
+
+  labelTrellis = gtk_label_new (_("Trellis"));
+  gtk_widget_show (labelTrellis);
+  gtk_box_pack_start (GTK_BOX (hbox7), labelTrellis, FALSE, FALSE, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelTrellis), 0, 0.5);
+
+  spinbuttonTrellis_adj = gtk_adjustment_new (0, 0, 2, 1, 10, 10);
+  spinbuttonTrellis = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonTrellis_adj), 1, 0);
+  gtk_widget_show (spinbuttonTrellis);
+  gtk_box_pack_start (GTK_BOX (hbox7), spinbuttonTrellis, FALSE, FALSE, 0);
+  gtk_tooltips_set_tip (tooltips, spinbuttonTrellis, _("Use Trellis Rate Distortion Optimisation to find optimal encoding for each block. Level 0 equals disabled, level 1 equals normal and level 2 equals high."), NULL);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonTrellis), TRUE);
+
+  hbox11 = gtk_hbox_new (FALSE, 10);
+  gtk_widget_show (hbox11);
+  gtk_box_pack_start (GTK_BOX (hbox2), hbox11, FALSE, FALSE, 2);
+
+  labelNoiseReduction = gtk_label_new (_("Noise Reduction"));
+  gtk_widget_show (labelNoiseReduction);
+  gtk_box_pack_start (GTK_BOX (hbox11), labelNoiseReduction, FALSE, FALSE, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelNoiseReduction), 0, 0.5);
+
+  spinbuttonNoiseReduction_adj = gtk_adjustment_new (0, 0, 1000000000, 1, 10, 10);
+  spinbuttonNoiseReduction = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonNoiseReduction_adj), 1, 0);
+  gtk_widget_show (spinbuttonNoiseReduction);
+  gtk_box_pack_start (GTK_BOX (hbox11), spinbuttonNoiseReduction, FALSE, FALSE, 0);
+  gtk_tooltips_set_tip (tooltips, spinbuttonNoiseReduction, _("Set the amount of noise reduction"), NULL);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonNoiseReduction), TRUE);
+
+  hbox3 = gtk_hbox_new (FALSE, 10);
+  gtk_widget_show (hbox3);
+  gtk_box_pack_start (GTK_BOX (vbox7), hbox3, TRUE, TRUE, 0);
+
+  checkbuttonDeblockingFilter = gtk_check_button_new_with_mnemonic (_("Deblocking Filter"));
+  gtk_widget_show (checkbuttonDeblockingFilter);
+  gtk_box_pack_start (GTK_BOX (hbox3), checkbuttonDeblockingFilter, FALSE, FALSE, 0);
+  gtk_tooltips_set_tip (tooltips, checkbuttonDeblockingFilter, _("Enable in-loop deblocking to filter the video"), NULL);
+  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (checkbuttonDeblockingFilter), TRUE);
+
+  table8 = gtk_table_new (2, 2, FALSE);
+  gtk_widget_show (table8);
+  gtk_box_pack_start (GTK_BOX (hbox3), table8, TRUE, TRUE, 0);
+  gtk_table_set_row_spacings (GTK_TABLE (table8), 3);
+  gtk_table_set_col_spacings (GTK_TABLE (table8), 10);
+
+  labelThreshold = gtk_label_new (_("Threshold"));
+  gtk_widget_show (labelThreshold);
+  gtk_table_attach (GTK_TABLE (table8), labelThreshold, 0, 1, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_label_set_use_markup (GTK_LABEL (labelThreshold), TRUE);
+  gtk_misc_set_alignment (GTK_MISC (labelThreshold), 0, 0.5);
+
+  labelStrength = gtk_label_new (_("Strength"));
+  gtk_widget_show (labelStrength);
+  gtk_table_attach (GTK_TABLE (table8), labelStrength, 0, 1, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_label_set_use_markup (GTK_LABEL (labelStrength), TRUE);
+  gtk_misc_set_alignment (GTK_MISC (labelStrength), 0, 0.5);
+
+  spinbuttonThreshold_adj = gtk_adjustment_new (0, -6, 6, 1, 10, 10);
+  spinbuttonThreshold = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonThreshold_adj), 1, 0);
+  gtk_widget_show (spinbuttonThreshold);
+  gtk_table_attach (GTK_TABLE (table8), spinbuttonThreshold, 1, 2, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, spinbuttonThreshold, _("Threshold for block detection. Positive values will detect more blocks, negative values will detect less."), NULL);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonThreshold), TRUE);
+
+  spinbuttonStrength_adj = gtk_adjustment_new (0, -6, 6, 1, 10, 10);
+  spinbuttonStrength = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonStrength_adj), 1, 0);
+  gtk_widget_show (spinbuttonStrength);
+  gtk_table_attach (GTK_TABLE (table8), spinbuttonStrength, 1, 2, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, spinbuttonStrength, _("Positive values will soften the video, negative values will sharpen"), NULL);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonStrength), TRUE);
+
+  label25 = gtk_label_new (_("<b>Misc. Options</b>"));
+  gtk_widget_show (label25);
+  gtk_frame_set_label_widget (GTK_FRAME (frame7), label25);
+  gtk_label_set_use_markup (GTK_LABEL (label25), TRUE);
+
+  labelPageMotion_More = gtk_label_new (_("Motion & Misc"));
+  gtk_widget_show (labelPageMotion_More);
+  gtk_notebook_set_tab_label (GTK_NOTEBOOK (notebook1), gtk_notebook_get_nth_page (GTK_NOTEBOOK (notebook1), 1), labelPageMotion_More);
+
+  alignment16 = gtk_alignment_new (0.5, 0.5, 1, 1);
+  gtk_widget_show (alignment16);
+  gtk_container_add (GTK_CONTAINER (notebook1), alignment16);
+  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment16), 7, 7, 7, 7);
+
+  vbox2 = gtk_vbox_new (FALSE, 3);
+  gtk_widget_show (vbox2);
+  gtk_container_add (GTK_CONTAINER (alignment16), vbox2);
+
+  frame4 = gtk_frame_new (NULL);
+  gtk_widget_show (frame4);
+  gtk_box_pack_start (GTK_BOX (vbox2), frame4, FALSE, TRUE, 0);
+
+  alignment4 = gtk_alignment_new (0.5, 0.5, 1, 1);
+  gtk_widget_show (alignment4);
+  gtk_container_add (GTK_CONTAINER (frame4), alignment4);
+  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment4), 7, 7, 7, 7);
+
+  vbox3 = gtk_vbox_new (FALSE, 3);
+  gtk_widget_show (vbox3);
+  gtk_container_add (GTK_CONTAINER (alignment4), vbox3);
+
+  checkbutton8x8 = gtk_check_button_new_with_mnemonic (_("8x8 Transform"));
+  gtk_widget_show (checkbutton8x8);
+  gtk_box_pack_start (GTK_BOX (vbox3), checkbutton8x8, FALSE, FALSE, 0);
+  gtk_tooltips_set_tip (tooltips, checkbutton8x8, _("General block breakdown transformation"), NULL);
+  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (checkbutton8x8), TRUE);
+
+  checkbutton8x8P = gtk_check_button_new_with_mnemonic (_("8x8, 8x16 and 16x8 P-frame search"));
+  gtk_widget_show (checkbutton8x8P);
+  gtk_box_pack_start (GTK_BOX (vbox3), checkbutton8x8P, FALSE, FALSE, 0);
+  gtk_tooltips_set_tip (tooltips, checkbutton8x8P, _("Improve the P-frame quality"), NULL);
+  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (checkbutton8x8P), TRUE);
+
+  checkbutton8x8B = gtk_check_button_new_with_mnemonic (_("8x8, 8x16 and 16x8 B-frame search"));
+  gtk_widget_show (checkbutton8x8B);
+  gtk_box_pack_start (GTK_BOX (vbox3), checkbutton8x8B, FALSE, FALSE, 0);
+  gtk_tooltips_set_tip (tooltips, checkbutton8x8B, _("Improve the B-frame quality"), NULL);
+  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (checkbutton8x8B), TRUE);
+
+  checkbutton4x4 = gtk_check_button_new_with_mnemonic (_("4x4, 4x8 and 8x4 P-frame search"));
+  gtk_widget_show (checkbutton4x4);
+  gtk_box_pack_start (GTK_BOX (vbox3), checkbutton4x4, FALSE, FALSE, 0);
+  gtk_tooltips_set_tip (tooltips, checkbutton4x4, _("Further improve the P-frame quality"), NULL);
+
+  checkbutton8x8I = gtk_check_button_new_with_mnemonic (_("8x8 Intra search"));
+  gtk_widget_show (checkbutton8x8I);
+  gtk_box_pack_start (GTK_BOX (vbox3), checkbutton8x8I, FALSE, FALSE, 0);
+  gtk_tooltips_set_tip (tooltips, checkbutton8x8I, _("Enable DCT Intra block search to improve quality"), NULL);
+  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (checkbutton8x8I), TRUE);
+
+  checkbutton4x4I = gtk_check_button_new_with_mnemonic (_("4x4 Intra search"));
+  gtk_widget_show (checkbutton4x4I);
+  gtk_box_pack_start (GTK_BOX (vbox3), checkbutton4x4I, FALSE, FALSE, 0);
+  gtk_tooltips_set_tip (tooltips, checkbutton4x4I, _("Further enable DCT Intra block search to improve quality"), NULL);
+  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (checkbutton4x4I), TRUE);
+
+  label19 = gtk_label_new (_("<b>Partition Macroblocks</b>"));
+  gtk_widget_show (label19);
+  gtk_frame_set_label_widget (GTK_FRAME (frame4), label19);
+  gtk_label_set_use_markup (GTK_LABEL (label19), TRUE);
+
+  frame5 = gtk_frame_new (NULL);
+  gtk_widget_show (frame5);
+  gtk_box_pack_start (GTK_BOX (vbox2), frame5, FALSE, TRUE, 0);
+
+  alignment5 = gtk_alignment_new (0.5, 0.5, 1, 1);
+  gtk_widget_show (alignment5);
+  gtk_container_add (GTK_CONTAINER (frame5), alignment5);
+  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment5), 7, 7, 7, 7);
+
+  vbox4 = gtk_vbox_new (FALSE, 3);
+  gtk_widget_show (vbox4);
+  gtk_container_add (GTK_CONTAINER (alignment5), vbox4);
+
+  table5 = gtk_table_new (2, 2, FALSE);
+  gtk_widget_show (table5);
+  gtk_box_pack_start (GTK_BOX (vbox4), table5, TRUE, TRUE, 0);
+  gtk_table_set_row_spacings (GTK_TABLE (table5), 3);
+  gtk_table_set_col_spacings (GTK_TABLE (table5), 10);
+
+  labelBias = gtk_label_new (_("Bias"));
+  gtk_widget_show (labelBias);
+  gtk_table_attach (GTK_TABLE (table5), labelBias, 0, 1, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelBias), 0, 0.5);
+
+  labelMaxConsecutive = gtk_label_new (_("Max Consecutive"));
+  gtk_widget_show (labelMaxConsecutive);
+  gtk_table_attach (GTK_TABLE (table5), labelMaxConsecutive, 0, 1, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelMaxConsecutive), 0, 0.5);
+
+  spinbuttonBias_adj = gtk_adjustment_new (0, -100, 100, 1, 10, 10);
+  spinbuttonBias = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonBias_adj), 1, 0);
+  gtk_widget_show (spinbuttonBias);
+  gtk_table_attach (GTK_TABLE (table5), spinbuttonBias, 1, 2, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, spinbuttonBias, _("Increase / decrease probability for how often B-frames are used. It will not violate the maximum consecutive frame limit."), NULL);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonBias), TRUE);
+
+  spinbuttonMaxBFrame_adj = gtk_adjustment_new (3, 0, 15, 1, 10, 10);
+  spinbuttonMaxBFrame = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonMaxBFrame_adj), 1, 0);
+  gtk_widget_show (spinbuttonMaxBFrame);
+  gtk_table_attach (GTK_TABLE (table5), spinbuttonMaxBFrame, 1, 2, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, spinbuttonMaxBFrame, _("Set the maximum number of consecutive B-frames. This defines how many duplicate frames can be dropped. Numbers 2 to 5 are recommended. This greatly improves the use of bitrate and quality."), NULL);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonMaxBFrame), TRUE);
+
+  alignment20 = gtk_alignment_new (0.5, 0.5, 1, 1);
+  gtk_widget_show (alignment20);
+  gtk_box_pack_start (GTK_BOX (vbox4), alignment20, TRUE, TRUE, 0);
+  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment20), 3, 3, 0, 0);
+
+  table6 = gtk_table_new (2, 2, FALSE);
+  gtk_widget_show (table6);
+  gtk_container_add (GTK_CONTAINER (alignment20), table6);
+  gtk_table_set_row_spacings (GTK_TABLE (table6), 3);
+  gtk_table_set_col_spacings (GTK_TABLE (table6), 10);
+
+  checkbuttonBidirME = gtk_check_button_new_with_mnemonic (_("Bidirectional ME"));
+  gtk_widget_show (checkbuttonBidirME);
+  gtk_table_attach (GTK_TABLE (table6), checkbuttonBidirME, 1, 2, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, checkbuttonBidirME, _("Optimise both motion vectors in B-frames. This will improve quality but take more time for encoding."), NULL);
+
+  checkbuttonWeighted = gtk_check_button_new_with_mnemonic (_("Weighted Biprediction"));
+  gtk_widget_show (checkbuttonWeighted);
+  gtk_table_attach (GTK_TABLE (table6), checkbuttonWeighted, 1, 2, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, checkbuttonWeighted, _("Enables weighting of B-frames to help fades"), NULL);
+  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (checkbuttonWeighted), TRUE);
+
+  checkbuttonAdaptative = gtk_check_button_new_with_mnemonic (_("Adaptative DCT"));
+  gtk_widget_show (checkbuttonAdaptative);
+  gtk_table_attach (GTK_TABLE (table6), checkbuttonAdaptative, 0, 1, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, checkbuttonAdaptative, _("Use fewer B-frames if needed. This is always recommended. If not enabled, the codec will always use the maximum number of consecutive B-frames."), NULL);
+  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (checkbuttonAdaptative), TRUE);
+
+  checkbuttonBasReference = gtk_check_button_new_with_mnemonic (_("Use as Reference"));
+  gtk_widget_show (checkbuttonBasReference);
+  gtk_table_attach (GTK_TABLE (table6), checkbuttonBasReference, 0, 1, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, checkbuttonBasReference, _("Allow B-frames to make references non-linearly to another B-frame (instead of creating a duplicate copy)"), NULL);
+
+  hbox1 = gtk_hbox_new (FALSE, 10);
+  gtk_widget_show (hbox1);
+  gtk_box_pack_start (GTK_BOX (vbox4), hbox1, TRUE, TRUE, 0);
+
+  labelBFrameDirectMode = gtk_label_new (_("B-Frame Direct Mode"));
+  gtk_widget_show (labelBFrameDirectMode);
+  gtk_box_pack_start (GTK_BOX (hbox1), labelBFrameDirectMode, FALSE, TRUE, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelBFrameDirectMode), 0, 0.5);
+
+  comboboxDirectMode = gtk_combo_box_new_text ();
+  gtk_widget_show (comboboxDirectMode);
+  gtk_box_pack_start (GTK_BOX (hbox1), comboboxDirectMode, FALSE, TRUE, 0);
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxDirectMode), _("None"));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxDirectMode), _("Spatial"));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxDirectMode), _("Temporal"));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxDirectMode), _("Auto"));
+
+  label20 = gtk_label_new (_("<b>B-Frames</b>"));
+  gtk_widget_show (label20);
+  gtk_frame_set_label_widget (GTK_FRAME (frame5), label20);
+  gtk_label_set_use_markup (GTK_LABEL (label20), TRUE);
+
+  labelPagePartion_Frame = gtk_label_new (_("Partitions & Frames"));
+  gtk_widget_show (labelPagePartion_Frame);
+  gtk_notebook_set_tab_label (GTK_NOTEBOOK (notebook1), gtk_notebook_get_nth_page (GTK_NOTEBOOK (notebook1), 2), labelPagePartion_Frame);
+
+  alignment17 = gtk_alignment_new (0.5, 0.5, 1, 1);
+  gtk_widget_show (alignment17);
+  gtk_container_add (GTK_CONTAINER (notebook1), alignment17);
+  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment17), 7, 7, 7, 7);
+
+  vbox1 = gtk_vbox_new (FALSE, 3);
+  gtk_widget_show (vbox1);
+  gtk_container_add (GTK_CONTAINER (alignment17), vbox1);
+
+  frame1 = gtk_frame_new (NULL);
+  gtk_widget_show (frame1);
+  gtk_box_pack_start (GTK_BOX (vbox1), frame1, FALSE, TRUE, 1);
+
+  alignment1 = gtk_alignment_new (0.5, 0.5, 1, 1);
+  gtk_widget_show (alignment1);
+  gtk_container_add (GTK_CONTAINER (frame1), alignment1);
+  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment1), 7, 7, 7, 7);
+
+  table2 = gtk_table_new (3, 2, FALSE);
+  gtk_widget_show (table2);
+  gtk_container_add (GTK_CONTAINER (alignment1), table2);
+  gtk_table_set_row_spacings (GTK_TABLE (table2), 3);
+  gtk_table_set_col_spacings (GTK_TABLE (table2), 10);
+
+  spinbuttonKeyframeBoost_adj = gtk_adjustment_new (40, 0, 100, 1, 10, 10);
+  spinbuttonKeyframeBoost = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonKeyframeBoost_adj), 1, 0);
+  gtk_widget_show (spinbuttonKeyframeBoost);
+  gtk_table_attach (GTK_TABLE (table2), spinbuttonKeyframeBoost, 1, 2, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_widget_set_size_request (spinbuttonKeyframeBoost, 115, -1);
+  gtk_tooltips_set_tip (tooltips, spinbuttonKeyframeBoost, _("Set how much \"bitrate bonus\" a keyframe can get"), NULL);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonKeyframeBoost), TRUE);
+
+  spinbuttonBframeReduction_adj = gtk_adjustment_new (30, 0, 100, 1, 10, 10);
+  spinbuttonBframeReduction = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonBframeReduction_adj), 1, 0);
+  gtk_widget_show (spinbuttonBframeReduction);
+  gtk_table_attach (GTK_TABLE (table2), spinbuttonBframeReduction, 1, 2, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, spinbuttonBframeReduction, _("Set how much bitrate is deducted from a B-frame as compared to the previous P-frame"), NULL);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonBframeReduction), TRUE);
+
+  spinbuttonBitrateVariability_adj = gtk_adjustment_new (60, 0, 100, 1, 10, 10);
+  spinbuttonBitrateVariability = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonBitrateVariability_adj), 1, 0);
+  gtk_widget_show (spinbuttonBitrateVariability);
+  gtk_table_attach (GTK_TABLE (table2), spinbuttonBitrateVariability, 1, 2, 2, 3,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, spinbuttonBitrateVariability, _("Define how much the bitrate can fluctuate over the entire video. 0% results in a constant bitrate stream, while 100% results in a pure quality based bitrate stream."), NULL);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonBitrateVariability), TRUE);
+
+  labelKeyframeboost = gtk_label_new (_("Keyframe Boost (%)"));
+  gtk_widget_show (labelKeyframeboost);
+  gtk_table_attach (GTK_TABLE (table2), labelKeyframeboost, 0, 1, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelKeyframeboost), 0, 0.5);
+
+  label11 = gtk_label_new (_("B-frame Reduction (%)"));
+  gtk_widget_show (label11);
+  gtk_table_attach (GTK_TABLE (table2), label11, 0, 1, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (label11), 0, 0.5);
+
+  label12 = gtk_label_new (_("Bitrate Variability (%)"));
+  gtk_widget_show (label12);
+  gtk_table_attach (GTK_TABLE (table2), label12, 0, 1, 2, 3,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (label12), 0, 0.5);
+
+  label7 = gtk_label_new (_("<b>Bitrate</b>"));
+  gtk_widget_show (label7);
+  gtk_frame_set_label_widget (GTK_FRAME (frame1), label7);
+  gtk_label_set_use_markup (GTK_LABEL (label7), TRUE);
+
+  frame2 = gtk_frame_new (NULL);
+  gtk_widget_show (frame2);
+  gtk_box_pack_start (GTK_BOX (vbox1), frame2, FALSE, TRUE, 1);
+
+  alignment2 = gtk_alignment_new (0.5, 0.5, 1, 1);
+  gtk_widget_show (alignment2);
+  gtk_container_add (GTK_CONTAINER (frame2), alignment2);
+  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment2), 7, 7, 7, 7);
+
+  table3 = gtk_table_new (3, 2, FALSE);
+  gtk_widget_show (table3);
+  gtk_container_add (GTK_CONTAINER (alignment2), table3);
+  gtk_table_set_row_spacings (GTK_TABLE (table3), 3);
+  gtk_table_set_col_spacings (GTK_TABLE (table3), 20);
+
+  label13 = gtk_label_new (_("Min QP"));
+  gtk_widget_show (label13);
+  gtk_table_attach (GTK_TABLE (table3), label13, 0, 1, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (label13), 0, 0.5);
+
+  label14 = gtk_label_new (_("Max QP"));
+  gtk_widget_show (label14);
+  gtk_table_attach (GTK_TABLE (table3), label14, 0, 1, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (label14), 0, 0.5);
+
+  label15 = gtk_label_new (_("Max QP Step"));
+  gtk_widget_show (label15);
+  gtk_table_attach (GTK_TABLE (table3), label15, 0, 1, 2, 3,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (label15), 0, 0.5);
+
+  spinbuttonMinQp_adj = gtk_adjustment_new (10, 10, 51, 1, 10, 10);
+  spinbuttonMinQp = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonMinQp_adj), 1, 0);
+  gtk_widget_show (spinbuttonMinQp);
+  gtk_table_attach (GTK_TABLE (table3), spinbuttonMinQp, 1, 2, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_widget_set_size_request (spinbuttonMinQp, 54, -1);
+  gtk_tooltips_set_tip (tooltips, spinbuttonMinQp, _("Enforce a minimum quantizer level"), NULL);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonMinQp), TRUE);
+
+  spinbuttonMaxQp_adj = gtk_adjustment_new (51, 10, 51, 1, 10, 10);
+  spinbuttonMaxQp = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonMaxQp_adj), 1, 0);
+  gtk_widget_show (spinbuttonMaxQp);
+  gtk_table_attach (GTK_TABLE (table3), spinbuttonMaxQp, 1, 2, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, spinbuttonMaxQp, _("Enforce a maximum quantizer level"), NULL);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonMaxQp), TRUE);
+
+  spinbuttonQpStep_adj = gtk_adjustment_new (4, 0, 10, 1, 10, 10);
+  spinbuttonQpStep = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonQpStep_adj), 1, 0);
+  gtk_widget_show (spinbuttonQpStep);
+  gtk_table_attach (GTK_TABLE (table3), spinbuttonQpStep, 1, 2, 2, 3,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, spinbuttonQpStep, _("Define how much the quantizer rate can change between two consecutive frames"), NULL);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonQpStep), TRUE);
+
+  label8 = gtk_label_new (_("<b>Quantization Limits</b>"));
+  gtk_widget_show (label8);
+  gtk_frame_set_label_widget (GTK_FRAME (frame2), label8);
+  gtk_label_set_use_markup (GTK_LABEL (label8), TRUE);
+
+  frame3 = gtk_frame_new (NULL);
+  gtk_widget_show (frame3);
+  gtk_box_pack_start (GTK_BOX (vbox1), frame3, FALSE, TRUE, 1);
+
+  alignment3 = gtk_alignment_new (0.5, 0.5, 1, 1);
+  gtk_widget_show (alignment3);
+  gtk_container_add (GTK_CONTAINER (frame3), alignment3);
+  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment3), 7, 7, 7, 7);
+
+  table4 = gtk_table_new (3, 2, FALSE);
+  gtk_widget_show (table4);
+  gtk_container_add (GTK_CONTAINER (alignment3), table4);
+  gtk_table_set_row_spacings (GTK_TABLE (table4), 3);
+  gtk_table_set_col_spacings (GTK_TABLE (table4), 10);
+
+  spinbuttonSceneCut_adj = gtk_adjustment_new (40, 0, 100, 1, 10, 10);
+  spinbuttonSceneCut = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonSceneCut_adj), 1, 0);
+  gtk_widget_show (spinbuttonSceneCut);
+  gtk_table_attach (GTK_TABLE (table4), spinbuttonSceneCut, 1, 2, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_widget_set_size_request (spinbuttonSceneCut, 115, -1);
+  gtk_tooltips_set_tip (tooltips, spinbuttonSceneCut, _("Increase / decrease sensitivity for detecting scene changes. Improves I-frame usage and quality."), NULL);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonSceneCut), TRUE);
+
+  label16 = gtk_label_new (_("Scene Cut Threshold"));
+  gtk_widget_show (label16);
+  gtk_table_attach (GTK_TABLE (table4), label16, 0, 1, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (label16), 0, 0.5);
+
+  label17 = gtk_label_new (_("Min IDR Frame Interval"));
+  gtk_widget_show (label17);
+  gtk_table_attach (GTK_TABLE (table4), label17, 0, 1, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (label17), 0, 0.5);
+
+  spinbuttonMinIdr_adj = gtk_adjustment_new (25, 0, 100, 1, 10, 10);
+  spinbuttonMinIdr = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonMinIdr_adj), 1, 0);
+  gtk_widget_show (spinbuttonMinIdr);
+  gtk_table_attach (GTK_TABLE (table4), spinbuttonMinIdr, 1, 2, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, spinbuttonMinIdr, _("Set minimum frame interval between IDR frames. Defines the minimum amount a frame can be reused and referenced by other frames before a new IDR frame is established."), NULL);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonMinIdr), TRUE);
+
+  spinbuttonMaxIdr_adj = gtk_adjustment_new (250, 1, 1000, 1, 10, 10);
+  spinbuttonMaxIdr = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonMaxIdr_adj), 1, 0);
+  gtk_widget_show (spinbuttonMaxIdr);
+  gtk_table_attach (GTK_TABLE (table4), spinbuttonMaxIdr, 1, 2, 2, 3,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, spinbuttonMaxIdr, _("Set maximum frame interval between IDR frames. Defines the maximum amount a frame can be reused and referenced by other frames before a new IDR frame is established."), NULL);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonMaxIdr), TRUE);
+
+  label18 = gtk_label_new (_("Max IDR Frame Interval"));
+  gtk_widget_show (label18);
+  gtk_table_attach (GTK_TABLE (table4), label18, 0, 1, 2, 3,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (label18), 0, 0.5);
+
+  labelMoreEncodingSettings = gtk_label_new (_("<b>More Rate Settings</b>"));
+  gtk_widget_show (labelMoreEncodingSettings);
+  gtk_frame_set_label_widget (GTK_FRAME (frame3), labelMoreEncodingSettings);
+  gtk_label_set_use_markup (GTK_LABEL (labelMoreEncodingSettings), TRUE);
+
+  frameVideoBufferVerifier = gtk_frame_new (NULL);
+  gtk_widget_show (frameVideoBufferVerifier);
+  gtk_box_pack_start (GTK_BOX (vbox1), frameVideoBufferVerifier, FALSE, TRUE, 0);
+
+  alignment11 = gtk_alignment_new (0.5, 0.5, 1, 1);
+  gtk_widget_show (alignment11);
+  gtk_container_add (GTK_CONTAINER (frameVideoBufferVerifier), alignment11);
+  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment11), 7, 7, 7, 7);
+
+  table12 = gtk_table_new (3, 2, FALSE);
+  gtk_widget_show (table12);
+  gtk_container_add (GTK_CONTAINER (alignment11), table12);
+  gtk_table_set_row_spacings (GTK_TABLE (table12), 3);
+  gtk_table_set_col_spacings (GTK_TABLE (table12), 10);
+
+  labelVBVBufferSize = gtk_label_new (_("VBV Buffer Size"));
+  gtk_widget_show (labelVBVBufferSize);
+  gtk_table_attach (GTK_TABLE (table12), labelVBVBufferSize, 0, 1, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelVBVBufferSize), 0, 0.5);
+
+  labelVBVInitialbuffer = gtk_label_new (_("Initial VBV Buffer (%)"));
+  gtk_widget_show (labelVBVInitialbuffer);
+  gtk_table_attach (GTK_TABLE (table12), labelVBVInitialbuffer, 0, 1, 2, 3,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelVBVInitialbuffer), 0, 0.5);
+
+  labelVBVMaximumBitrate = gtk_label_new (_("Maximum Local Bitrate"));
+  gtk_widget_show (labelVBVMaximumBitrate);
+  gtk_table_attach (GTK_TABLE (table12), labelVBVMaximumBitrate, 0, 1, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelVBVMaximumBitrate), 0, 0.5);
+
+  spinbuttonvbv_max_bitrate_adj = gtk_adjustment_new (0, 0, 99999, 1, 10, 10);
+  spinbuttonvbv_max_bitrate = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonvbv_max_bitrate_adj), 1, 0);
+  gtk_widget_show (spinbuttonvbv_max_bitrate);
+  gtk_table_attach (GTK_TABLE (table12), spinbuttonvbv_max_bitrate, 1, 2, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonvbv_max_bitrate), TRUE);
+
+  spinbuttonvbv_buffer_size_adj = gtk_adjustment_new (0, 0, 99999, 1, 10, 10);
+  spinbuttonvbv_buffer_size = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonvbv_buffer_size_adj), 1, 0);
+  gtk_widget_show (spinbuttonvbv_buffer_size);
+  gtk_table_attach (GTK_TABLE (table12), spinbuttonvbv_buffer_size, 1, 2, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonvbv_buffer_size), TRUE);
+
+  spinbuttonvbv_buffer_init_adj = gtk_adjustment_new (90, 0, 100, 1, 10, 10);
+  spinbuttonvbv_buffer_init = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonvbv_buffer_init_adj), 1, 0);
+  gtk_widget_show (spinbuttonvbv_buffer_init);
+  gtk_table_attach (GTK_TABLE (table12), spinbuttonvbv_buffer_init, 1, 2, 2, 3,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonvbv_buffer_init), TRUE);
+
+  labelVideoBufferVerifier = gtk_label_new (_("<b>Video Buffer Verifier</b>"));
+  gtk_widget_show (labelVideoBufferVerifier);
+  gtk_frame_set_label_widget (GTK_FRAME (frameVideoBufferVerifier), labelVideoBufferVerifier);
+  gtk_label_set_use_markup (GTK_LABEL (labelVideoBufferVerifier), TRUE);
+
+  labelPageRateControl = gtk_label_new (_("Rate Control"));
+  gtk_widget_show (labelPageRateControl);
+  gtk_notebook_set_tab_label (GTK_NOTEBOOK (notebook1), gtk_notebook_get_nth_page (GTK_NOTEBOOK (notebook1), 3), labelPageRateControl);
+
+  alignment18 = gtk_alignment_new (0.5, 0.5, 1, 1);
+  gtk_widget_show (alignment18);
+  gtk_container_add (GTK_CONTAINER (notebook1), alignment18);
+  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment18), 7, 7, 7, 7);
+
+  vbox8 = gtk_vbox_new (FALSE, 3);
+  gtk_widget_show (vbox8);
+  gtk_container_add (GTK_CONTAINER (alignment18), vbox8);
+
+  frame10 = gtk_frame_new (NULL);
+  gtk_widget_show (frame10);
+  gtk_box_pack_start (GTK_BOX (vbox8), frame10, FALSE, TRUE, 0);
+
+  alignment10 = gtk_alignment_new (0.5, 0.5, 1, 1);
+  gtk_widget_show (alignment10);
+  gtk_container_add (GTK_CONTAINER (frame10), alignment10);
+  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment10), 7, 7, 7, 7);
+
+  table15 = gtk_table_new (4, 2, FALSE);
+  gtk_widget_show (table15);
+  gtk_container_add (GTK_CONTAINER (alignment10), table15);
+  gtk_table_set_row_spacings (GTK_TABLE (table15), 3);
+  gtk_table_set_col_spacings (GTK_TABLE (table15), 10);
+
+  labelBitrateVariance = gtk_label_new (_("Bitrate Variance"));
+  gtk_widget_show (labelBitrateVariance);
+  gtk_table_attach (GTK_TABLE (table15), labelBitrateVariance, 0, 1, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelBitrateVariance), 0, 0.5);
+
+  spinbuttonBitrateVariance_adj = gtk_adjustment_new (1, 0, 1, 0.10000000149, 10, 10);
+  spinbuttonBitrateVariance = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonBitrateVariance_adj), 0.10000000149, 1);
+  gtk_widget_show (spinbuttonBitrateVariance);
+  gtk_table_attach (GTK_TABLE (table15), spinbuttonBitrateVariance, 1, 2, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, spinbuttonBitrateVariance, _("Allowed variance of average bitrate. Lower values mean less variance. Higher values mean more variance."), NULL);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonBitrateVariance), TRUE);
+
+  spinbuttonQuantizerCompression_adj = gtk_adjustment_new (0.600000023842, 0, 1, 0.10000000149, 10, 10);
+  spinbuttonQuantizerCompression = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonQuantizerCompression_adj), 0.10000000149, 1);
+  gtk_widget_show (spinbuttonQuantizerCompression);
+  gtk_table_attach (GTK_TABLE (table15), spinbuttonQuantizerCompression, 1, 2, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, spinbuttonQuantizerCompression, _("Allowed variance of average quantizer or quality. Lower values mean less variance. Higher values mean more variance. Note that 0 means constant quality while 1 means constant fluctuation. Recommended 0.6."), NULL);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonQuantizerCompression), TRUE);
+
+  spinbuttonTempBlurFrame_adj = gtk_adjustment_new (20, 0, 999, 1, 10, 10);
+  spinbuttonTempBlurFrame = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonTempBlurFrame_adj), 1, 0);
+  gtk_widget_show (spinbuttonTempBlurFrame);
+  gtk_table_attach (GTK_TABLE (table15), spinbuttonTempBlurFrame, 1, 2, 2, 3,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, spinbuttonTempBlurFrame, _("Reduced fluctuations in Quantizer (before curve compression)"), NULL);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonTempBlurFrame), TRUE);
+
+  spinbuttonTempBlurQuant_adj = gtk_adjustment_new (0.5, 0, 1, 0.5, 10, 10);
+  spinbuttonTempBlurQuant = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonTempBlurQuant_adj), 0.5, 1);
+  gtk_widget_show (spinbuttonTempBlurQuant);
+  gtk_table_attach (GTK_TABLE (table15), spinbuttonTempBlurQuant, 1, 2, 3, 4,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonTempBlurQuant), TRUE);
+
+  labelQuantizerCompression = gtk_label_new (_("Quantizer Compression"));
+  gtk_widget_show (labelQuantizerCompression);
+  gtk_table_attach (GTK_TABLE (table15), labelQuantizerCompression, 0, 1, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelQuantizerCompression), 0, 0.5);
+
+  labelTempBlurEstFrame = gtk_label_new (_("Temp. Blur of Est. Frame Complexity"));
+  gtk_widget_show (labelTempBlurEstFrame);
+  gtk_table_attach (GTK_TABLE (table15), labelTempBlurEstFrame, 0, 1, 2, 3,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelTempBlurEstFrame), 0, 0.5);
+
+  labelTempBlueQuant = gtk_label_new (_("Temp. Blur of Quant. after CC"));
+  gtk_widget_show (labelTempBlueQuant);
+  gtk_table_attach (GTK_TABLE (table15), labelTempBlueQuant, 0, 1, 3, 4,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelTempBlueQuant), 0, 0.5);
+
+  labelMisc = gtk_label_new (_("<b>Misc</b>"));
+  gtk_widget_show (labelMisc);
+  gtk_frame_set_label_widget (GTK_FRAME (frame10), labelMisc);
+  gtk_label_set_use_markup (GTK_LABEL (labelMisc), TRUE);
+
+  frame11 = gtk_frame_new (NULL);
+  gtk_widget_show (frame11);
+  gtk_box_pack_start (GTK_BOX (vbox8), frame11, FALSE, TRUE, 0);
+
+  alignment13 = gtk_alignment_new (0.5, 0.5, 1, 1);
+  gtk_widget_show (alignment13);
+  gtk_container_add (GTK_CONTAINER (frame11), alignment13);
+  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment13), 7, 7, 7, 7);
+
+  table16 = gtk_table_new (3, 2, FALSE);
+  gtk_widget_show (table16);
+  gtk_container_add (GTK_CONTAINER (alignment13), table16);
+  gtk_table_set_row_spacings (GTK_TABLE (table16), 3);
+  gtk_table_set_col_spacings (GTK_TABLE (table16), 10);
+
+  spinbutton8_adj = gtk_adjustment_new (1.39999997616, 1, 10, 0.10000000149, 10, 10);
+  spinbutton8 = gtk_spin_button_new (GTK_ADJUSTMENT (spinbutton8_adj), 0.10000000149, 1);
+  gtk_widget_show (spinbutton8);
+  gtk_table_attach (GTK_TABLE (table16), spinbutton8, 1, 2, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, spinbutton8, _("Quantization factors used between I and P-frames"), NULL);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbutton8), TRUE);
+
+  spinbutton9_adj = gtk_adjustment_new (1.29999995232, 1, 10, 0.10000000149, 10, 10);
+  spinbutton9 = gtk_spin_button_new (GTK_ADJUSTMENT (spinbutton9_adj), 0.10000000149, 1);
+  gtk_widget_show (spinbutton9);
+  gtk_table_attach (GTK_TABLE (table16), spinbutton9, 1, 2, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, spinbutton9, _("Quantization used between P and B-frames"), NULL);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbutton9), TRUE);
+
+  spinbuttonChromaQPOffset_adj = gtk_adjustment_new (0, -12, 12, 1, 10, 10);
+  spinbuttonChromaQPOffset = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonChromaQPOffset_adj), 1, 0);
+  gtk_widget_show (spinbuttonChromaQPOffset);
+  gtk_table_attach (GTK_TABLE (table16), spinbuttonChromaQPOffset, 1, 2, 2, 3,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, spinbuttonChromaQPOffset, _("Quantization difference between chroma (color) and luma (brightness)"), NULL);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonChromaQPOffset), TRUE);
+
+  labelFactorbetweenIandP = gtk_label_new (_("Factor between I and P-frame Quants"));
+  gtk_widget_show (labelFactorbetweenIandP);
+  gtk_table_attach (GTK_TABLE (table16), labelFactorbetweenIandP, 0, 1, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelFactorbetweenIandP), 0, 0.5);
+
+  labelFactorbetweenPandB = gtk_label_new (_("Factor between P and B-frame Quants"));
+  gtk_widget_show (labelFactorbetweenPandB);
+  gtk_table_attach (GTK_TABLE (table16), labelFactorbetweenPandB, 0, 1, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelFactorbetweenPandB), 0, 0.5);
+
+  labelChromaQPOffset = gtk_label_new (_("Chroma QP Offset"));
+  gtk_widget_show (labelChromaQPOffset);
+  gtk_table_attach (GTK_TABLE (table16), labelChromaQPOffset, 0, 1, 2, 3,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelChromaQPOffset), 0, 0.5);
+
+  labelQuantizers = gtk_label_new (_("<b>Quantizers</b>"));
+  gtk_widget_show (labelQuantizers);
+  gtk_frame_set_label_widget (GTK_FRAME (frame11), labelQuantizers);
+  gtk_label_set_use_markup (GTK_LABEL (labelQuantizers), TRUE);
+
+  frame9 = gtk_frame_new (NULL);
+  gtk_widget_show (frame9);
+  gtk_box_pack_start (GTK_BOX (vbox8), frame9, FALSE, TRUE, 0);
+
+  alignment9 = gtk_alignment_new (0.5, 0.5, 1, 1);
+  gtk_widget_show (alignment9);
+  gtk_container_add (GTK_CONTAINER (frame9), alignment9);
+  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment9), 7, 7, 7, 7);
+
+  vbox9 = gtk_vbox_new (FALSE, 3);
+  gtk_widget_show (vbox9);
+  gtk_container_add (GTK_CONTAINER (alignment9), vbox9);
+
+  radiobuttonFlatmatrix = gtk_radio_button_new_with_mnemonic (NULL, _("Flat Matrix"));
+  gtk_widget_show (radiobuttonFlatmatrix);
+  gtk_box_pack_start (GTK_BOX (vbox9), radiobuttonFlatmatrix, FALSE, FALSE, 0);
+  gtk_radio_button_set_group (GTK_RADIO_BUTTON (radiobuttonFlatmatrix), radiobuttonFlatmatrix_group);
+  radiobuttonFlatmatrix_group = gtk_radio_button_get_group (GTK_RADIO_BUTTON (radiobuttonFlatmatrix));
+  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (radiobuttonFlatmatrix), TRUE);
+
+  radiobuttonJVTmatrix = gtk_radio_button_new_with_mnemonic (NULL, _("JVT Matrix"));
+  gtk_widget_show (radiobuttonJVTmatrix);
+  gtk_box_pack_start (GTK_BOX (vbox9), radiobuttonJVTmatrix, FALSE, FALSE, 0);
+  gtk_radio_button_set_group (GTK_RADIO_BUTTON (radiobuttonJVTmatrix), radiobuttonFlatmatrix_group);
+  radiobuttonFlatmatrix_group = gtk_radio_button_get_group (GTK_RADIO_BUTTON (radiobuttonJVTmatrix));
+
+  hbox13 = gtk_hbox_new (FALSE, 10);
+  gtk_widget_show (hbox13);
+  gtk_box_pack_start (GTK_BOX (vbox9), hbox13, FALSE, FALSE, 0);
+
+  radiobuttonCustommatrix = gtk_radio_button_new_with_mnemonic (NULL, _("Custom Matrix"));
+  gtk_widget_show (radiobuttonCustommatrix);
+  gtk_box_pack_start (GTK_BOX (hbox13), radiobuttonCustommatrix, TRUE, TRUE, 0);
+  gtk_radio_button_set_group (GTK_RADIO_BUTTON (radiobuttonCustommatrix), radiobuttonFlatmatrix_group);
+  radiobuttonFlatmatrix_group = gtk_radio_button_get_group (GTK_RADIO_BUTTON (radiobuttonCustommatrix));
+
+  hbox14 = gtk_hbox_new (FALSE, 0);
+  gtk_widget_show (hbox14);
+  gtk_box_pack_start (GTK_BOX (hbox13), hbox14, TRUE, TRUE, 0);
+
+  filechooserbuttonOpenCQMFile = gtk_file_chooser_button_new (_("Open CQM file"), GTK_FILE_CHOOSER_ACTION_OPEN);
+  gtk_widget_show (filechooserbuttonOpenCQMFile);
+  gtk_box_pack_start (GTK_BOX (hbox14), filechooserbuttonOpenCQMFile, TRUE, TRUE, 0);
+
+  vseparator1 = gtk_vseparator_new ();
+  gtk_widget_show (vseparator1);
+  gtk_box_pack_start (GTK_BOX (hbox14), vseparator1, TRUE, TRUE, 0);
+
+  buttonEditCustomMatrix = gtk_button_new_with_mnemonic (_("Edit Custom Matrix"));
+  gtk_widget_show (buttonEditCustomMatrix);
+  gtk_box_pack_start (GTK_BOX (hbox14), buttonEditCustomMatrix, FALSE, FALSE, 0);
+  gtk_tooltips_set_tip (tooltips, buttonEditCustomMatrix, _("Edit loaded custom quantization matrix file"), NULL);
+
+  labelFrameQuantizationMatrices = gtk_label_new (_("<b>Quantization Matrices</b>"));
+  gtk_widget_show (labelFrameQuantizationMatrices);
+  gtk_frame_set_label_widget (GTK_FRAME (frame9), labelFrameQuantizationMatrices);
+  gtk_label_set_use_markup (GTK_LABEL (labelFrameQuantizationMatrices), TRUE);
+
+  labelMore = gtk_label_new (_("More"));
+  gtk_widget_show (labelMore);
+  gtk_notebook_set_tab_label (GTK_NOTEBOOK (notebook1), gtk_notebook_get_nth_page (GTK_NOTEBOOK (notebook1), 4), labelMore);
+
+  dialog_action_area1 = GTK_DIALOG (dialog1)->action_area;
+  gtk_widget_show (dialog_action_area1);
+  gtk_button_box_set_layout (GTK_BUTTON_BOX (dialog_action_area1), GTK_BUTTONBOX_END);
+
+  buttonResetDaults = gtk_button_new_with_mnemonic (_("_Defaults"));
+  gtk_widget_show (buttonResetDaults);
+  gtk_dialog_add_action_widget (GTK_DIALOG (dialog1), buttonResetDaults, 0);
+  GTK_WIDGET_SET_FLAGS (buttonResetDaults, GTK_CAN_DEFAULT);
+
+  cancelbutton1 = gtk_button_new_from_stock ("gtk-cancel");
+  gtk_widget_show (cancelbutton1);
+  gtk_dialog_add_action_widget (GTK_DIALOG (dialog1), cancelbutton1, GTK_RESPONSE_CANCEL);
+  GTK_WIDGET_SET_FLAGS (cancelbutton1, GTK_CAN_DEFAULT);
+
+  okbutton1 = gtk_button_new_from_stock ("gtk-ok");
+  gtk_widget_show (okbutton1);
+  gtk_dialog_add_action_widget (GTK_DIALOG (dialog1), okbutton1, GTK_RESPONSE_OK);
+  GTK_WIDGET_SET_FLAGS (okbutton1, GTK_CAN_DEFAULT);
+
+  /* Store pointers to all widgets, for use by lookup_widget(). */
+  GLADE_HOOKUP_OBJECT_NO_REF (dialog1, dialog1, "dialog1");
+  GLADE_HOOKUP_OBJECT_NO_REF (dialog1, dialog_vbox1, "dialog_vbox1");
+  GLADE_HOOKUP_OBJECT (dialog1, notebook1, "notebook1");
+  GLADE_HOOKUP_OBJECT (dialog1, alignment14, "alignment14");
+  GLADE_HOOKUP_OBJECT (dialog1, tableBitrate, "tableBitrate");
+  GLADE_HOOKUP_OBJECT (dialog1, labelEncodingMode, "labelEncodingMode");
+  GLADE_HOOKUP_OBJECT (dialog1, labelQuantizer, "labelQuantizer");
+  GLADE_HOOKUP_OBJECT (dialog1, labelTarget, "labelTarget");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonQuantizer, "spinbuttonQuantizer");
+  GLADE_HOOKUP_OBJECT (dialog1, entryTarget, "entryTarget");
+  GLADE_HOOKUP_OBJECT (dialog1, comboboxMode, "comboboxMode");
+  GLADE_HOOKUP_OBJECT (dialog1, labelPageBitrate, "labelPageBitrate");
+  GLADE_HOOKUP_OBJECT (dialog1, alignment15, "alignment15");
+  GLADE_HOOKUP_OBJECT (dialog1, vbox5, "vbox5");
+  GLADE_HOOKUP_OBJECT (dialog1, frame6, "frame6");
+  GLADE_HOOKUP_OBJECT (dialog1, alignment6, "alignment6");
+  GLADE_HOOKUP_OBJECT (dialog1, vbox6, "vbox6");
+  GLADE_HOOKUP_OBJECT (dialog1, table7, "table7");
+  GLADE_HOOKUP_OBJECT (dialog1, labelPartitionDecision, "labelPartitionDecision");
+  GLADE_HOOKUP_OBJECT (dialog1, labelMethod, "labelMethod");
+  GLADE_HOOKUP_OBJECT (dialog1, comboboxPartitionDecision, "comboboxPartitionDecision");
+  GLADE_HOOKUP_OBJECT (dialog1, comboboxMethod, "comboboxMethod");
+  GLADE_HOOKUP_OBJECT (dialog1, table11, "table11");
+  GLADE_HOOKUP_OBJECT (dialog1, labelMaxRefFrames, "labelMaxRefFrames");
+  GLADE_HOOKUP_OBJECT (dialog1, labelRange, "labelRange");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonRange, "spinbuttonRange");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonMaxRefFrames, "spinbuttonMaxRefFrames");
+  GLADE_HOOKUP_OBJECT (dialog1, checkbuttonChromaME, "checkbuttonChromaME");
+  GLADE_HOOKUP_OBJECT (dialog1, checkbuttonMixedRefs, "checkbuttonMixedRefs");
+  GLADE_HOOKUP_OBJECT (dialog1, hbox8, "hbox8");
+  GLADE_HOOKUP_OBJECT (dialog1, checkbuttonfastPSkip, "checkbuttonfastPSkip");
+  GLADE_HOOKUP_OBJECT (dialog1, checkbuttonDCTDecimate, "checkbuttonDCTDecimate");
+  GLADE_HOOKUP_OBJECT (dialog1, checkbuttoninterlaced, "checkbuttoninterlaced");
+  GLADE_HOOKUP_OBJECT (dialog1, label24, "label24");
+  GLADE_HOOKUP_OBJECT (dialog1, frameSampleAR, "frameSampleAR");
+  GLADE_HOOKUP_OBJECT (dialog1, alignment12, "alignment12");
+  GLADE_HOOKUP_OBJECT (dialog1, table35, "table35");
+  GLADE_HOOKUP_OBJECT (dialog1, hbox12, "hbox12");
+  GLADE_HOOKUP_OBJECT (dialog1, entryAR_Num, "entryAR_Num");
+  GLADE_HOOKUP_OBJECT (dialog1, label53, "label53");
+  GLADE_HOOKUP_OBJECT (dialog1, entryAR_Den, "entryAR_Den");
+  GLADE_HOOKUP_OBJECT (dialog1, radiobuttonCustomAR, "radiobuttonCustomAR");
+  GLADE_HOOKUP_OBJECT (dialog1, radiobuttonPredefinedAR, "radiobuttonPredefinedAR");
+  GLADE_HOOKUP_OBJECT (dialog1, radiobuttonAsInputAR, "radiobuttonAsInputAR");
+  GLADE_HOOKUP_OBJECT (dialog1, label40, "label40");
+  GLADE_HOOKUP_OBJECT (dialog1, comboboxentry1, "comboboxentry1");
+  GLADE_HOOKUP_OBJECT (dialog1, label39, "label39");
+  GLADE_HOOKUP_OBJECT (dialog1, frame7, "frame7");
+  GLADE_HOOKUP_OBJECT (dialog1, alignment7, "alignment7");
+  GLADE_HOOKUP_OBJECT (dialog1, vbox7, "vbox7");
+  GLADE_HOOKUP_OBJECT (dialog1, alignment21, "alignment21");
+  GLADE_HOOKUP_OBJECT (dialog1, hbox2, "hbox2");
+  GLADE_HOOKUP_OBJECT (dialog1, checkbuttonCABAC, "checkbuttonCABAC");
+  GLADE_HOOKUP_OBJECT (dialog1, hbox7, "hbox7");
+  GLADE_HOOKUP_OBJECT (dialog1, labelTrellis, "labelTrellis");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonTrellis, "spinbuttonTrellis");
+  GLADE_HOOKUP_OBJECT (dialog1, hbox11, "hbox11");
+  GLADE_HOOKUP_OBJECT (dialog1, labelNoiseReduction, "labelNoiseReduction");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonNoiseReduction, "spinbuttonNoiseReduction");
+  GLADE_HOOKUP_OBJECT (dialog1, hbox3, "hbox3");
+  GLADE_HOOKUP_OBJECT (dialog1, checkbuttonDeblockingFilter, "checkbuttonDeblockingFilter");
+  GLADE_HOOKUP_OBJECT (dialog1, table8, "table8");
+  GLADE_HOOKUP_OBJECT (dialog1, labelThreshold, "labelThreshold");
+  GLADE_HOOKUP_OBJECT (dialog1, labelStrength, "labelStrength");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonThreshold, "spinbuttonThreshold");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonStrength, "spinbuttonStrength");
+  GLADE_HOOKUP_OBJECT (dialog1, label25, "label25");
+  GLADE_HOOKUP_OBJECT (dialog1, labelPageMotion_More, "labelPageMotion_More");
+  GLADE_HOOKUP_OBJECT (dialog1, alignment16, "alignment16");
+  GLADE_HOOKUP_OBJECT (dialog1, vbox2, "vbox2");
+  GLADE_HOOKUP_OBJECT (dialog1, frame4, "frame4");
+  GLADE_HOOKUP_OBJECT (dialog1, alignment4, "alignment4");
+  GLADE_HOOKUP_OBJECT (dialog1, vbox3, "vbox3");
+  GLADE_HOOKUP_OBJECT (dialog1, checkbutton8x8, "checkbutton8x8");
+  GLADE_HOOKUP_OBJECT (dialog1, checkbutton8x8P, "checkbutton8x8P");
+  GLADE_HOOKUP_OBJECT (dialog1, checkbutton8x8B, "checkbutton8x8B");
+  GLADE_HOOKUP_OBJECT (dialog1, checkbutton4x4, "checkbutton4x4");
+  GLADE_HOOKUP_OBJECT (dialog1, checkbutton8x8I, "checkbutton8x8I");
+  GLADE_HOOKUP_OBJECT (dialog1, checkbutton4x4I, "checkbutton4x4I");
+  GLADE_HOOKUP_OBJECT (dialog1, label19, "label19");
+  GLADE_HOOKUP_OBJECT (dialog1, frame5, "frame5");
+  GLADE_HOOKUP_OBJECT (dialog1, alignment5, "alignment5");
+  GLADE_HOOKUP_OBJECT (dialog1, vbox4, "vbox4");
+  GLADE_HOOKUP_OBJECT (dialog1, table5, "table5");
+  GLADE_HOOKUP_OBJECT (dialog1, labelBias, "labelBias");
+  GLADE_HOOKUP_OBJECT (dialog1, labelMaxConsecutive, "labelMaxConsecutive");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonBias, "spinbuttonBias");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonMaxBFrame, "spinbuttonMaxBFrame");
+  GLADE_HOOKUP_OBJECT (dialog1, alignment20, "alignment20");
+  GLADE_HOOKUP_OBJECT (dialog1, table6, "table6");
+  GLADE_HOOKUP_OBJECT (dialog1, checkbuttonBidirME, "checkbuttonBidirME");
+  GLADE_HOOKUP_OBJECT (dialog1, checkbuttonWeighted, "checkbuttonWeighted");
+  GLADE_HOOKUP_OBJECT (dialog1, checkbuttonAdaptative, "checkbuttonAdaptative");
+  GLADE_HOOKUP_OBJECT (dialog1, checkbuttonBasReference, "checkbuttonBasReference");
+  GLADE_HOOKUP_OBJECT (dialog1, hbox1, "hbox1");
+  GLADE_HOOKUP_OBJECT (dialog1, labelBFrameDirectMode, "labelBFrameDirectMode");
+  GLADE_HOOKUP_OBJECT (dialog1, comboboxDirectMode, "comboboxDirectMode");
+  GLADE_HOOKUP_OBJECT (dialog1, label20, "label20");
+  GLADE_HOOKUP_OBJECT (dialog1, labelPagePartion_Frame, "labelPagePartion_Frame");
+  GLADE_HOOKUP_OBJECT (dialog1, alignment17, "alignment17");
+  GLADE_HOOKUP_OBJECT (dialog1, vbox1, "vbox1");
+  GLADE_HOOKUP_OBJECT (dialog1, frame1, "frame1");
+  GLADE_HOOKUP_OBJECT (dialog1, alignment1, "alignment1");
+  GLADE_HOOKUP_OBJECT (dialog1, table2, "table2");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonKeyframeBoost, "spinbuttonKeyframeBoost");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonBframeReduction, "spinbuttonBframeReduction");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonBitrateVariability, "spinbuttonBitrateVariability");
+  GLADE_HOOKUP_OBJECT (dialog1, labelKeyframeboost, "labelKeyframeboost");
+  GLADE_HOOKUP_OBJECT (dialog1, label11, "label11");
+  GLADE_HOOKUP_OBJECT (dialog1, label12, "label12");
+  GLADE_HOOKUP_OBJECT (dialog1, label7, "label7");
+  GLADE_HOOKUP_OBJECT (dialog1, frame2, "frame2");
+  GLADE_HOOKUP_OBJECT (dialog1, alignment2, "alignment2");
+  GLADE_HOOKUP_OBJECT (dialog1, table3, "table3");
+  GLADE_HOOKUP_OBJECT (dialog1, label13, "label13");
+  GLADE_HOOKUP_OBJECT (dialog1, label14, "label14");
+  GLADE_HOOKUP_OBJECT (dialog1, label15, "label15");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonMinQp, "spinbuttonMinQp");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonMaxQp, "spinbuttonMaxQp");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonQpStep, "spinbuttonQpStep");
+  GLADE_HOOKUP_OBJECT (dialog1, label8, "label8");
+  GLADE_HOOKUP_OBJECT (dialog1, frame3, "frame3");
+  GLADE_HOOKUP_OBJECT (dialog1, alignment3, "alignment3");
+  GLADE_HOOKUP_OBJECT (dialog1, table4, "table4");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonSceneCut, "spinbuttonSceneCut");
+  GLADE_HOOKUP_OBJECT (dialog1, label16, "label16");
+  GLADE_HOOKUP_OBJECT (dialog1, label17, "label17");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonMinIdr, "spinbuttonMinIdr");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonMaxIdr, "spinbuttonMaxIdr");
+  GLADE_HOOKUP_OBJECT (dialog1, label18, "label18");
+  GLADE_HOOKUP_OBJECT (dialog1, labelMoreEncodingSettings, "labelMoreEncodingSettings");
+  GLADE_HOOKUP_OBJECT (dialog1, frameVideoBufferVerifier, "frameVideoBufferVerifier");
+  GLADE_HOOKUP_OBJECT (dialog1, alignment11, "alignment11");
+  GLADE_HOOKUP_OBJECT (dialog1, table12, "table12");
+  GLADE_HOOKUP_OBJECT (dialog1, labelVBVBufferSize, "labelVBVBufferSize");
+  GLADE_HOOKUP_OBJECT (dialog1, labelVBVInitialbuffer, "labelVBVInitialbuffer");
+  GLADE_HOOKUP_OBJECT (dialog1, labelVBVMaximumBitrate, "labelVBVMaximumBitrate");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonvbv_max_bitrate, "spinbuttonvbv_max_bitrate");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonvbv_buffer_size, "spinbuttonvbv_buffer_size");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonvbv_buffer_init, "spinbuttonvbv_buffer_init");
+  GLADE_HOOKUP_OBJECT (dialog1, labelVideoBufferVerifier, "labelVideoBufferVerifier");
+  GLADE_HOOKUP_OBJECT (dialog1, labelPageRateControl, "labelPageRateControl");
+  GLADE_HOOKUP_OBJECT (dialog1, alignment18, "alignment18");
+  GLADE_HOOKUP_OBJECT (dialog1, vbox8, "vbox8");
+  GLADE_HOOKUP_OBJECT (dialog1, frame10, "frame10");
+  GLADE_HOOKUP_OBJECT (dialog1, alignment10, "alignment10");
+  GLADE_HOOKUP_OBJECT (dialog1, table15, "table15");
+  GLADE_HOOKUP_OBJECT (dialog1, labelBitrateVariance, "labelBitrateVariance");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonBitrateVariance, "spinbuttonBitrateVariance");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonQuantizerCompression, "spinbuttonQuantizerCompression");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonTempBlurFrame, "spinbuttonTempBlurFrame");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonTempBlurQuant, "spinbuttonTempBlurQuant");
+  GLADE_HOOKUP_OBJECT (dialog1, labelQuantizerCompression, "labelQuantizerCompression");
+  GLADE_HOOKUP_OBJECT (dialog1, labelTempBlurEstFrame, "labelTempBlurEstFrame");
+  GLADE_HOOKUP_OBJECT (dialog1, labelTempBlueQuant, "labelTempBlueQuant");
+  GLADE_HOOKUP_OBJECT (dialog1, labelMisc, "labelMisc");
+  GLADE_HOOKUP_OBJECT (dialog1, frame11, "frame11");
+  GLADE_HOOKUP_OBJECT (dialog1, alignment13, "alignment13");
+  GLADE_HOOKUP_OBJECT (dialog1, table16, "table16");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbutton8, "spinbutton8");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbutton9, "spinbutton9");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonChromaQPOffset, "spinbuttonChromaQPOffset");
+  GLADE_HOOKUP_OBJECT (dialog1, labelFactorbetweenIandP, "labelFactorbetweenIandP");
+  GLADE_HOOKUP_OBJECT (dialog1, labelFactorbetweenPandB, "labelFactorbetweenPandB");
+  GLADE_HOOKUP_OBJECT (dialog1, labelChromaQPOffset, "labelChromaQPOffset");
+  GLADE_HOOKUP_OBJECT (dialog1, labelQuantizers, "labelQuantizers");
+  GLADE_HOOKUP_OBJECT (dialog1, frame9, "frame9");
+  GLADE_HOOKUP_OBJECT (dialog1, alignment9, "alignment9");
+  GLADE_HOOKUP_OBJECT (dialog1, vbox9, "vbox9");
+  GLADE_HOOKUP_OBJECT (dialog1, radiobuttonFlatmatrix, "radiobuttonFlatmatrix");
+  GLADE_HOOKUP_OBJECT (dialog1, radiobuttonJVTmatrix, "radiobuttonJVTmatrix");
+  GLADE_HOOKUP_OBJECT (dialog1, hbox13, "hbox13");
+  GLADE_HOOKUP_OBJECT (dialog1, radiobuttonCustommatrix, "radiobuttonCustommatrix");
+  GLADE_HOOKUP_OBJECT (dialog1, hbox14, "hbox14");
+  GLADE_HOOKUP_OBJECT (dialog1, filechooserbuttonOpenCQMFile, "filechooserbuttonOpenCQMFile");
+  GLADE_HOOKUP_OBJECT (dialog1, vseparator1, "vseparator1");
+  GLADE_HOOKUP_OBJECT (dialog1, buttonEditCustomMatrix, "buttonEditCustomMatrix");
+  GLADE_HOOKUP_OBJECT (dialog1, labelFrameQuantizationMatrices, "labelFrameQuantizationMatrices");
+  GLADE_HOOKUP_OBJECT (dialog1, labelMore, "labelMore");
+  GLADE_HOOKUP_OBJECT_NO_REF (dialog1, dialog_action_area1, "dialog_action_area1");
+  GLADE_HOOKUP_OBJECT (dialog1, buttonResetDaults, "buttonResetDaults");
+  GLADE_HOOKUP_OBJECT (dialog1, cancelbutton1, "cancelbutton1");
+  GLADE_HOOKUP_OBJECT (dialog1, okbutton1, "okbutton1");
+  GLADE_HOOKUP_OBJECT_NO_REF (dialog1, tooltips, "tooltips");
+
+  gtk_widget_grab_default (comboboxDirectMode);
+  return dialog1;
+}

Added: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.glade
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.glade	2008-04-29 15:45:15 UTC (rev 3996)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.glade	2008-04-29 23:58:16 UTC (rev 3997)
@@ -0,0 +1,3609 @@
+<?xml version="1.0" standalone="no"?> <!--*- mode: xml -*-->
+<!DOCTYPE glade-interface SYSTEM "http://glade.gnome.org/glade-2.0.dtd">
+
+<glade-interface>
+
+<widget class="GtkDialog" id="dialog1">
+  <property name="visible">True</property>
+  <property name="title" translatable="yes">x264 Configuration</property>
+  <property name="type">GTK_WINDOW_TOPLEVEL</property>
+  <property name="window_position">GTK_WIN_POS_NONE</property>
+  <property name="modal">False</property>
+  <property name="resizable">True</property>
+  <property name="destroy_with_parent">False</property>
+  <property name="decorated">True</property>
+  <property name="skip_taskbar_hint">False</property>
+  <property name="skip_pager_hint">False</property>
+  <property name="type_hint">GDK_WINDOW_TYPE_HINT_DIALOG</property>
+  <property name="gravity">GDK_GRAVITY_NORTH_WEST</property>
+  <property name="focus_on_map">True</property>
+  <property name="has_separator">True</property>
+
+  <child internal-child="vbox">
+    <widget class="GtkVBox" id="dialog-vbox1">
+      <property name="visible">True</property>
+      <property name="homogeneous">False</property>
+      <property name="spacing">0</property>
+
+      <child internal-child="action_area">
+	<widget class="GtkHButtonBox" id="dialog-action_area1">
+	  <property name="visible">True</property>
+	  <property name="layout_style">GTK_BUTTONBOX_END</property>
+
+	  <child>
+	    <widget class="GtkButton" id="buttonResetDaults">
+	      <property name="visible">True</property>
+	      <property name="can_default">True</property>
+	      <property name="can_focus">True</property>
+	      <property name="label" translatable="yes">_Defaults</property>
+	      <property name="use_underline">True</property>
+	      <property name="relief">GTK_RELIEF_NORMAL</property>
+	      <property name="focus_on_click">True</property>
+	      <property name="response_id">0</property>
+	    </widget>
+	  </child>
+
+	  <child>
+	    <widget class="GtkButton" id="cancelbutton1">
+	      <property name="visible">True</property>
+	      <property name="can_default">True</property>
+	      <property name="can_focus">True</property>
+	      <property name="label">gtk-cancel</property>
+	      <property name="use_stock">True</property>
+	      <property name="relief">GTK_RELIEF_NORMAL</property>
+	      <property name="focus_on_click">True</property>
+	      <property name="response_id">-6</property>
+	    </widget>
+	  </child>
+
+	  <child>
+	    <widget class="GtkButton" id="okbutton1">
+	      <property name="visible">True</property>
+	      <property name="can_default">True</property>
+	      <property name="can_focus">True</property>
+	      <property name="label">gtk-ok</property>
+	      <property name="use_stock">True</property>
+	      <property name="relief">GTK_RELIEF_NORMAL</property>
+	      <property name="focus_on_click">True</property>
+	      <property name="response_id">-5</property>
+	    </widget>
+	  </child>
+	</widget>
+	<packing>
+	  <property name="padding">0</property>
+	  <property name="expand">False</property>
+	  <property name="fill">True</property>
+	  <property name="pack_type">GTK_PACK_END</property>
+	</packing>
+      </child>
+
+      <child>
+	<widget class="GtkNotebook" id="notebook1">
+	  <property name="visible">True</property>
+	  <property name="can_focus">True</property>
+	  <property name="show_tabs">True</property>
+	  <property name="show_border">True</property>
+	  <property name="tab_pos">GTK_POS_TOP</property>
+	  <property name="scrollable">False</property>
+	  <property name="enable_popup">False</property>
+
+	  <child>
+	    <widget class="GtkAlignment" id="alignment14">
+	      <property name="visible">True</property>
+	      <property name="xalign">0.5</property>
+	      <property name="yalign">0.5</property>
+	      <property name="xscale">1</property>
+	      <property name="yscale">1</property>
+	      <property name="top_padding">7</property>
+	      <property name="bottom_padding">7</property>
+	      <property name="left_padding">7</property>
+	      <property name="right_padding">7</property>
+
+	      <child>
+		<widget class="GtkTable" id="tableBitrate">
+		  <property name="visible">True</property>
+		  <property name="n_rows">3</property>
+		  <property name="n_columns">2</property>
+		  <property name="homogeneous">False</property>
+		  <property name="row_spacing">3</property>
+		  <property name="column_spacing">10</property>
+
+		  <child>
+		    <widget class="GtkLabel" id="labelEncodingMode">
+		      <property name="visible">True</property>
+		      <property name="label" translatable="yes">Encoding Mode</property>
+		      <property name="use_underline">False</property>
+		      <property name="use_markup">False</property>
+		      <property name="justify">GTK_JUSTIFY_LEFT</property>
+		      <property name="wrap">False</property>
+		      <property name="selectable">False</property>
+		      <property name="xalign">0</property>
+		      <property name="yalign">0.5</property>
+		      <property name="xpad">0</property>
+		      <property name="ypad">0</property>
+		      <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+		      <property name="width_chars">-1</property>
+		      <property name="single_line_mode">False</property>
+		      <property name="angle">0</property>
+		    </widget>
+		    <packing>
+		      <property name="left_attach">0</property>
+		      <property name="right_attach">1</property>
+		      <property name="top_attach">0</property>
+		      <property name="bottom_attach">1</property>
+		      <property name="x_options">fill</property>
+		      <property name="y_options"></property>
+		    </packing>
+		  </child>
+
+		  <child>
+		    <widget class="GtkLabel" id="labelQuantizer">
+		      <property name="visible">True</property>
+		      <property name="label" translatable="yes">Quantizer</property>
+		      <property name="use_underline">False</property>
+		      <property name="use_markup">False</property>
+		      <property name="justify">GTK_JUSTIFY_LEFT</property>
+		      <property name="wrap">False</property>
+		      <property name="selectable">False</property>
+		      <property name="xalign">0</property>
+		      <property name="yalign">0.5</property>
+		      <property name="xpad">0</property>
+		      <property name="ypad">0</property>
+		      <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+		      <property name="width_chars">-1</property>
+		      <property name="single_line_mode">False</property>
+		      <property name="angle">0</property>
+		    </widget>
+		    <packing>
+		      <property name="left_attach">0</property>
+		      <property name="right_attach">1</property>
+		      <property name="top_attach">2</property>
+		      <property name="bottom_attach">3</property>
+		      <property name="x_options">fill</property>
+		      <property name="y_options"></property>
+		    </packing>
+		  </child>
+
+		  <child>
+		    <widget class="GtkLabel" id="labelTarget">
+		      <property name="visible">True</property>
+		      <property name="label" translatable="yes">Target Size</property>
+		      <property name="use_underline">False</property>
+		      <property name="use_markup">False</property>
+		      <property name="justify">GTK_JUSTIFY_LEFT</property>
+		      <property name="wrap">False</property>
+		      <property name="selectable">False</property>
+		      <property name="xalign">0</property>
+		      <property name="yalign">0.5</property>
+		      <property name="xpad">0</property>
+		      <property name="ypad">0</property>
+		      <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+		      <property name="width_chars">-1</property>
+		      <property name="single_line_mode">False</property>
+		      <property name="angle">0</property>
+		    </widget>
+		    <packing>
+		      <property name="left_attach">0</property>
+		      <property name="right_attach">1</property>
+		      <property name="top_attach">1</property>
+		      <property name="bottom_attach">2</property>
+		      <property name="x_options">fill</property>
+		      <property name="y_options"></property>
+		    </packing>
+		  </child>
+
+		  <child>
+		    <widget class="GtkSpinButton" id="spinbuttonQuantizer">
+		      <property name="visible">True</property>
+		      <property name="tooltip" translatable="yes">Constant Quantizer - Each frame will have the same compression. Low numbers equal higher quality while high numbers equal lower quality.</property>
+		      <property name="can_focus">True</property>
+		      <property name="climb_rate">1</property>
+		      <property name="digits">0</property>
+		      <property name="numeric">True</property>
+		      <property name="update_policy">GTK_UPDATE_ALWAYS</property>
+		      <property name="snap_to_ticks">False</property>
+		      <property name="wrap">False</property>
+		      <property name="adjustment">4 0 51 1 10 10</property>
+		    </widget>
+		    <packing>
+		      <property name="left_attach">1</property>
+		      <property name="right_attach">2</property>
+		      <property name="top_attach">2</property>
+		      <property name="bottom_attach">3</property>
+		      <property name="x_options">shrink|fill</property>
+		      <property name="y_options"></property>
+		    </packing>
+		  </child>
+
+		  <child>
+		    <widget class="GtkEntry" id="entryTarget">
+		      <property name="visible">True</property>
+		      <property name="tooltip" translatable="yes">Target bitrate or file size</property>
+		      <property name="can_focus">True</property>
+		      <property name="editable">True</property>
+		      <property name="visibility">True</property>
+		      <property name="max_length">0</property>
+		      <property name="text" translatable="yes"></property>
+		      <property name="has_frame">True</property>
+		      <property name="invisible_char">*</property>
+		      <property name="activates_default">False</property>
+		      <property name="width_chars">4</property>
+		    </widget>
+		    <packing>
+		      <property name="left_attach">1</property>
+		      <property name="right_attach">2</property>
+		      <property name="top_attach">1</property>
+		      <property name="bottom_attach">2</property>
+		      <property name="x_options">shrink|fill</property>
+		      <property name="y_options"></property>
+		    </packing>
+		  </child>
+
+		  <child>
+		    <widget class="GtkComboBox" id="comboboxMode">
+		      <property name="visible">True</property>
+		      <property name="items" translatable="yes">Single Pass - Quality Quantizer (Average)
+Single Pass - Quality Quantizer (Constant)
+Single Pass - Bitrate (Average)
+Two Pass - Video Size
+Two Pass - Average Bitrate</property>
+		      <property name="add_tearoffs">False</property>
+		      <property name="focus_on_click">True</property>
+		    </widget>
+		    <packing>
+		      <property name="left_attach">1</property>
+		      <property name="right_attach">2</property>
+		      <property name="top_attach">0</property>
+		      <property name="bottom_attach">1</property>
+		      <property name="x_options">shrink|fill</property>
+		      <property name="y_options">fill</property>
+		    </packing>
+		  </child>
+		</widget>
+	      </child>
+	    </widget>
+	    <packing>
+	      <property name="tab_expand">False</property>
+	      <property name="tab_fill">True</property>
+	    </packing>
+	  </child>
+
+	  <child>
+	    <widget class="GtkLabel" id="labelPageBitrate">
+	      <property name="visible">True</property>
+	      <property name="label" translatable="yes">Bitrate</property>
+	      <property name="use_underline">False</property>
+	      <property name="use_markup">False</property>
+	      <property name="justify">GTK_JUSTIFY_LEFT</property>
+	      <property name="wrap">False</property>
+	      <property name="selectable">False</property>
+	      <property name="xalign">0</property>
+	      <property name="yalign">0.5</property>
+	      <property name="xpad">0</property>
+	      <property name="ypad">0</property>
+	      <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+	      <property name="width_chars">-1</property>
+	      <property name="single_line_mode">False</property>
+	      <property name="angle">0</property>
+	    </widget>
+	    <packing>
+	      <property name="type">tab</property>
+	    </packing>
+	  </child>
+
+	  <child>
+	    <widget class="GtkAlignment" id="alignment15">
+	      <property name="visible">True</property>
+	      <property name="xalign">0.5</property>
+	      <property name="yalign">0.5</property>
+	      <property name="xscale">1</property>
+	      <property name="yscale">1</property>
+	      <property name="top_padding">7</property>
+	      <property name="bottom_padding">7</property>
+	      <property name="left_padding">7</property>
+	      <property name="right_padding">7</property>
+
+	      <child>
+		<widget class="GtkVBox" id="vbox5">
+		  <property name="visible">True</property>
+		  <property name="homogeneous">False</property>
+		  <property name="spacing">3</property>
+
+		  <child>
+		    <widget class="GtkFrame" id="frame6">
+		      <property name="visible">True</property>
+		      <property name="label_xalign">0</property>
+		      <property name="label_yalign">0.5</property>
+		      <property name="shadow_type">GTK_SHADOW_ETCHED_IN</property>
+
+		      <child>
+			<widget class="GtkAlignment" id="alignment6">
+			  <property name="visible">True</property>
+			  <property name="xalign">0.5</property>
+			  <property name="yalign">0.5</property>
+			  <property name="xscale">1</property>
+			  <property name="yscale">1</property>
+			  <property name="top_padding">7</property>
+			  <property name="bottom_padding">4</property>
+			  <property name="left_padding">7</property>
+			  <property name="right_padding">7</property>
+
+			  <child>
+			    <widget class="GtkVBox" id="vbox6">
+			      <property name="visible">True</property>
+			      <property name="homogeneous">False</property>
+			      <property name="spacing">3</property>
+
+			      <child>
+				<widget class="GtkTable" id="table7">
+				  <property name="visible">True</property>
+				  <property name="n_rows">2</property>
+				  <property name="n_columns">3</property>
+				  <property name="homogeneous">False</property>
+				  <property name="row_spacing">3</property>
+				  <property name="column_spacing">10</property>
+
+				  <child>
+				    <widget class="GtkLabel" id="labelPartitionDecision">
+				      <property name="visible">True</property>
+				      <property name="label" translatable="yes">Partition Decision</property>
+				      <property name="use_underline">False</property>
+				      <property name="use_markup">False</property>
+				      <property name="justify">GTK_JUSTIFY_LEFT</property>
+				      <property name="wrap">False</property>
+				      <property name="selectable">False</property>
+				      <property name="xalign">0</property>
+				      <property name="yalign">0.5</property>
+				      <property name="xpad">0</property>
+				      <property name="ypad">0</property>
+				      <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+				      <property name="width_chars">-1</property>
+				      <property name="single_line_mode">False</property>
+				      <property name="angle">0</property>
+				    </widget>
+				    <packing>
+				      <property name="left_attach">0</property>
+				      <property name="right_attach">1</property>
+				      <property name="top_attach">0</property>
+				      <property name="bottom_attach">1</property>
+				      <property name="x_options">fill</property>
+				      <property name="y_options"></property>
+				    </packing>
+				  </child>
+
+				  <child>
+				    <widget class="GtkLabel" id="labelMethod">
+				      <property name="visible">True</property>
+				      <property name="label" translatable="yes">Method</property>
+				      <property name="use_underline">False</property>
+				      <property name="use_markup">False</property>
+				      <property name="justify">GTK_JUSTIFY_LEFT</property>
+				      <property name="wrap">False</property>
+				      <property name="selectable">False</property>
+				      <property name="xalign">0</property>
+				      <property name="yalign">0.5</property>
+				      <property name="xpad">0</property>
+				      <property name="ypad">0</property>
+				      <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+				      <property name="width_chars">-1</property>
+				      <property name="single_line_mode">False</property>
+				      <property name="angle">0</property>
+				    </widget>
+				    <packing>
+				      <property name="left_attach">0</property>
+				      <property name="right_attach">1</property>
+				      <property name="top_attach">1</property>
+				      <property name="bottom_attach">2</property>
+				      <property name="x_options">fill</property>
+				      <property name="y_options"></property>
+				    </packing>
+				  </child>
+
+				  <child>
+				    <widget class="GtkComboBox" id="comboboxPartitionDecision">
+				      <property name="visible">True</property>
+				      <property name="items" translatable="yes">1  - Extremely Low (Fastest)
+2  - Very Low
+3  - Low
+4  - Medium
+5  - High (Default)
+6  - Very High
+6B - Very High (RDO on B-frames)
+7  - Ultra High
+7B - Ultra High (RDO on B-frames)
+</property>
+				      <property name="add_tearoffs">False</property>
+				      <property name="focus_on_click">True</property>
+				    </widget>
+				    <packing>
+				      <property name="left_attach">1</property>
+				      <property name="right_attach">3</property>
+				      <property name="top_attach">0</property>
+				      <property name="bottom_attach">1</property>
+				      <property name="x_options">fill</property>
+				      <property name="y_options">fill</property>
+				    </packing>
+				  </child>
+
+				  <child>
+				    <widget class="GtkComboBox" id="comboboxMethod">
+				      <property name="visible">True</property>
+				      <property name="items" translatable="yes">Diamond Search
+Hexagonal Search
+Uneven Multi-hexagon
+Exhaustive Search</property>
+				      <property name="add_tearoffs">False</property>
+				      <property name="focus_on_click">True</property>
+				    </widget>
+				    <packing>
+				      <property name="left_attach">1</property>
+				      <property name="right_attach">3</property>
+				      <property name="top_attach">1</property>
+				      <property name="bottom_attach">2</property>
+				      <property name="x_options">fill</property>
+				      <property name="y_options">fill</property>
+				    </packing>
+				  </child>
+				</widget>
+				<packing>
+				  <property name="padding">0</property>
+				  <property name="expand">False</property>
+				  <property name="fill">True</property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkTable" id="table11">
+				  <property name="visible">True</property>
+				  <property name="n_rows">2</property>
+				  <property name="n_columns">3</property>
+				  <property name="homogeneous">False</property>
+				  <property name="row_spacing">3</property>
+				  <property name="column_spacing">10</property>
+
+				  <child>
+				    <widget class="GtkLabel" id="labelMaxRefFrames">
+				      <property name="visible">True</property>
+				      <property name="label" translatable="yes">Max. Ref. Frames</property>
+				      <property name="use_underline">False</property>
+				      <property name="use_markup">False</property>
+				      <property name="justify">GTK_JUSTIFY_LEFT</property>
+				      <property name="wrap">False</property>
+				      <property name="selectable">False</property>
+				      <property name="xalign">0</property>
+				      <property name="yalign">0.5</property>
+				      <property name="xpad">0</property>
+				      <property name="ypad">0</property>
+				      <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+				      <property name="width_chars">-1</property>
+				      <property name="single_line_mode">False</property>
+				      <property name="angle">0</property>
+				    </widget>
+				    <packing>
+				      <property name="left_attach">0</property>
+				      <property name="right_attach">1</property>
+				      <property name="top_attach">1</property>
+				      <property name="bottom_attach">2</property>
+				      <property name="x_options">fill</property>
+				      <property name="y_options"></property>
+				    </packing>
+				  </child>
+
+				  <child>
+				    <widget class="GtkLabel" id="labelRange">
+				      <property name="visible">True</property>
+				      <property name="label" translatable="yes">Range</property>
+				      <property name="use_underline">False</property>
+				      <property name="use_markup">False</property>
+				      <property name="justify">GTK_JUSTIFY_LEFT</property>
+				      <property name="wrap">False</property>
+				      <property name="selectable">False</property>
+				      <property name="xalign">0</property>
+				      <property name="yalign">0.5</property>
+				      <property name="xpad">0</property>
+				      <property name="ypad">0</property>
+				      <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+				      <property name="width_chars">-1</property>
+				      <property name="single_line_mode">False</property>
+				      <property name="angle">0</property>
+				    </widget>
+				    <packing>
+				      <property name="left_attach">0</property>
+				      <property name="right_attach">1</property>
+				      <property name="top_attach">0</property>
+				      <property name="bottom_attach">1</property>
+				      <property name="x_options">fill</property>
+				      <property name="y_options"></property>
+				    </packing>
+				  </child>
+
+				  <child>
+				    <widget class="GtkSpinButton" id="spinbuttonRange">
+				      <property name="visible">True</property>
+				      <property name="tooltip" translatable="yes">Define how many pixels are analysed for motion estimation. The higher the range the more accurate the analysis but the slower the encoding time.</property>
+				      <property name="can_focus">True</property>
+				      <property name="climb_rate">1</property>
+				      <property name="digits">0</property>
+				      <property name="numeric">True</property>
+				      <property name="update_policy">GTK_UPDATE_ALWAYS</property>
+				      <property name="snap_to_ticks">False</property>
+				      <property name="wrap">False</property>
+				      <property name="adjustment">17 0 64 1 10 10</property>
+				    </widget>
+				    <packing>
+				      <property name="left_attach">1</property>
+				      <property name="right_attach">2</property>
+				      <property name="top_attach">0</property>
+				      <property name="bottom_attach">1</property>
+				      <property name="x_options">shrink|fill</property>
+				      <property name="y_options"></property>
+				    </packing>
+				  </child>
+
+				  <child>
+				    <widget class="GtkSpinButton" id="spinbuttonMaxRefFrames">
+				      <property name="visible">True</property>
+				      <property name="tooltip" translatable="yes">Set how many previous frames can be referenced by a P/B-frame. Numbers above 5 do not seem to improve quality greatly. Numbers 3 to 5 are recommended.</property>
+				      <property name="can_focus">True</property>
+				      <property name="climb_rate">1</property>
+				      <property name="digits">0</property>
+				      <property name="numeric">True</property>
+				      <property name="update_policy">GTK_UPDATE_ALWAYS</property>
+				      <property name="snap_to_ticks">False</property>
+				      <property name="wrap">False</property>
+				      <property name="adjustment">1 0 16 1 10 10</property>
+				    </widget>
+				    <packing>
+				      <property name="left_attach">1</property>
+				      <property name="right_attach">2</property>
+				      <property name="top_attach">1</property>
+				      <property name="bottom_attach">2</property>
+				      <property name="x_options">shrink|fill</property>
+				      <property name="y_options"></property>
+				    </packing>
+				  </child>
+
+				  <child>
+				    <widget class="GtkCheckButton" id="checkbuttonChromaME">
+				      <property name="visible">True</property>
+				      <property name="tooltip" translatable="yes">Use color information for detecting motion to improve quality</property>
+				      <property name="can_focus">True</property>
+				      <property name="label" translatable="yes">Chroma ME</property>
+				      <property name="use_underline">True</property>
+				      <property name="relief">GTK_RELIEF_NORMAL</property>
+				      <property name="focus_on_click">True</property>
+				      <property name="active">True</property>
+				      <property name="inconsistent">False</property>
+				      <property name="draw_indicator">True</property>
+				    </widget>
+				    <packing>
+				      <property name="left_attach">2</property>
+				      <property name="right_attach">3</property>
+				      <property name="top_attach">0</property>
+				      <property name="bottom_attach">1</property>
+				      <property name="x_padding">30</property>
+				      <property name="x_options">fill</property>
+				      <property name="y_options"></property>
+				    </packing>
+				  </child>
+
+				  <child>
+				    <widget class="GtkCheckButton" id="checkbuttonMixedRefs">
+				      <property name="visible">True</property>
+				      <property name="tooltip" translatable="yes">Calculate referencing individually based on each partition</property>
+				      <property name="can_focus">True</property>
+				      <property name="label" translatable="yes">Mixed Refs</property>
+				      <property name="use_underline">True</property>
+				      <property name="relief">GTK_RELIEF_NORMAL</property>
+				      <property name="focus_on_click">True</property>
+				      <property name="active">False</property>
+				      <property name="inconsistent">False</property>
+				      <property name="draw_indicator">True</property>
+				    </widget>
+				    <packing>
+				      <property name="left_attach">2</property>
+				      <property name="right_attach">3</property>
+				      <property name="top_attach">1</property>
+				      <property name="bottom_attach">2</property>
+				      <property name="x_padding">30</property>
+				      <property name="x_options">fill</property>
+				      <property name="y_options"></property>
+				    </packing>
+				  </child>
+				</widget>
+				<packing>
+				  <property name="padding">0</property>
+				  <property name="expand">True</property>
+				  <property name="fill">False</property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkHBox" id="hbox8">
+				  <property name="visible">True</property>
+				  <property name="homogeneous">True</property>
+				  <property name="spacing">0</property>
+
+				  <child>
+				    <widget class="GtkCheckButton" id="checkbuttonfastPSkip">
+				      <property name="visible">True</property>
+				      <property name="tooltip" translatable="yes">Early skip detection on P-frames to speedup encoding. Quality will be slightly reduced.</property>
+				      <property name="can_focus">True</property>
+				      <property name="label" translatable="yes">Fast P-Skip</property>
+				      <property name="use_underline">True</property>
+				      <property name="relief">GTK_RELIEF_NORMAL</property>
+				      <property name="focus_on_click">True</property>
+				      <property name="active">True</property>
+				      <property name="inconsistent">False</property>
+				      <property name="draw_indicator">True</property>
+				    </widget>
+				    <packing>
+				      <property name="padding">0</property>
+				      <property name="expand">False</property>
+				      <property name="fill">False</property>
+				    </packing>
+				  </child>
+
+				  <child>
+				    <widget class="GtkCheckButton" id="checkbuttonDCTDecimate">
+				      <property name="visible">True</property>
+				      <property name="can_focus">True</property>
+				      <property name="label" translatable="yes">DCT Decimate</property>
+				      <property name="use_underline">True</property>
+				      <property name="relief">GTK_RELIEF_NORMAL</property>
+				      <property name="focus_on_click">True</property>
+				      <property name="active">True</property>
+				      <property name="inconsistent">False</property>
+				      <property name="draw_indicator">True</property>
+				    </widget>
+				    <packing>
+				      <property name="padding">0</property>
+				      <property name="expand">False</property>
+				      <property name="fill">False</property>
+				    </packing>
+				  </child>
+
+				  <child>
+				    <widget class="GtkCheckButton" id="checkbuttoninterlaced">
+				      <property name="visible">True</property>
+				      <property name="tooltip" translatable="yes">Input video is interlaced</property>
+				      <property name="can_focus">True</property>
+				      <property name="label" translatable="yes">Interlaced</property>
+				      <property name="use_underline">True</property>
+				      <property name="relief">GTK_RELIEF_NORMAL</property>
+				      <property name="focus_on_click">True</property>
+				      <property name="active">False</property>
+				      <property name="inconsistent">False</property>
+				      <property name="draw_indicator">True</property>
+				    </widget>
+				    <packing>
+				      <property name="padding">0</property>
+				      <property name="expand">False</property>
+				      <property name="fill">False</property>
+				    </packing>
+				  </child>
+				</widget>
+				<packing>
+				  <property name="padding">0</property>
+				  <property name="expand">True</property>
+				  <property name="fill">True</property>
+				</packing>
+			      </child>
+			    </widget>
+			  </child>
+			</widget>
+		      </child>
+
+		      <child>
+			<widget class="GtkLabel" id="label24">
+			  <property name="visible">True</property>
+			  <property name="label" translatable="yes">&lt;b&gt;Motion Estimation&lt;/b&gt;</property>
+			  <property name="use_underline">False</property>
+			  <property name="use_markup">True</property>
+			  <property name="justify">GTK_JUSTIFY_LEFT</property>
+			  <property name="wrap">False</property>
+			  <property name="selectable">False</property>
+			  <property name="xalign">0.5</property>
+			  <property name="yalign">0.5</property>
+			  <property name="xpad">0</property>
+			  <property name="ypad">0</property>
+			  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+			  <property name="width_chars">-1</property>
+			  <property name="single_line_mode">False</property>
+			  <property name="angle">0</property>
+			</widget>
+			<packing>
+			  <property name="type">label_item</property>
+			</packing>
+		      </child>
+		    </widget>
+		    <packing>
+		      <property name="padding">0</property>
+		      <property name="expand">False</property>
+		      <property name="fill">True</property>
+		    </packing>
+		  </child>
+
+		  <child>
+		    <widget class="GtkFrame" id="frameSampleAR">
+		      <property name="visible">True</property>
+		      <property name="label_xalign">0</property>
+		      <property name="label_yalign">0.5</property>
+		      <property name="shadow_type">GTK_SHADOW_ETCHED_IN</property>
+
+		      <child>
+			<widget class="GtkAlignment" id="alignment12">
+			  <property name="visible">True</property>
+			  <property name="xalign">0.5</property>
+			  <property name="yalign">0.5</property>
+			  <property name="xscale">1</property>
+			  <property name="yscale">1</property>
+			  <property name="top_padding">7</property>
+			  <property name="bottom_padding">7</property>
+			  <property name="left_padding">7</property>
+			  <property name="right_padding">7</property>
+
+			  <child>
+			    <widget class="GtkTable" id="table35">
+			      <property name="visible">True</property>
+			      <property name="n_rows">3</property>
+			      <property name="n_columns">2</property>
+			      <property name="homogeneous">False</property>
+			      <property name="row_spacing">3</property>
+			      <property name="column_spacing">10</property>
+
+			      <child>
+				<widget class="GtkHBox" id="hbox12">
+				  <property name="visible">True</property>
+				  <property name="homogeneous">False</property>
+				  <property name="spacing">0</property>
+
+				  <child>
+				    <widget class="GtkEntry" id="entryAR_Num">
+				      <property name="visible">True</property>
+				      <property name="tooltip" translatable="yes">Enforce the size of a decoded pixel decoded to a certain value. Set this to 1:1 for non-anamorphic video.</property>
+				      <property name="can_focus">True</property>
+				      <property name="editable">True</property>
+				      <property name="visibility">True</property>
+				      <property name="max_length">0</property>
+				      <property name="text" translatable="yes">1</property>
+				      <property name="has_frame">True</property>
+				      <property name="invisible_char">*</property>
+				      <property name="activates_default">False</property>
+				      <property name="width_chars">4</property>
+				    </widget>
+				    <packing>
+				      <property name="padding">0</property>
+				      <property name="expand">True</property>
+				      <property name="fill">True</property>
+				    </packing>
+				  </child>
+
+				  <child>
+				    <widget class="GtkLabel" id="label53">
+				      <property name="visible">True</property>
+				      <property name="label" translatable="yes">:</property>
+				      <property name="use_underline">False</property>
+				      <property name="use_markup">False</property>
+				      <property name="justify">GTK_JUSTIFY_LEFT</property>
+				      <property name="wrap">False</property>
+				      <property name="selectable">False</property>
+				      <property name="xalign">0.5</property>
+				      <property name="yalign">0.5</property>
+				      <property name="xpad">0</property>
+				      <property name="ypad">0</property>
+				      <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+				      <property name="width_chars">-1</property>
+				      <property name="single_line_mode">False</property>
+				      <property name="angle">0</property>
+				    </widget>
+				    <packing>
+				      <property name="padding">3</property>
+				      <property name="expand">False</property>
+				      <property name="fill">False</property>
+				    </packing>
+				  </child>
+
+				  <child>
+				    <widget class="GtkEntry" id="entryAR_Den">
+				      <property name="visible">True</property>
+				      <property name="tooltip" translatable="yes">Enforce the size of a decoded pixel decoded to a certain value. Set this to 1:1 for non-anamorphic video.</property>
+				      <property name="can_focus">True</property>
+				      <property name="editable">True</property>
+				      <property name="visibility">True</property>
+				      <property name="max_length">0</property>
+				      <property name="text" translatable="yes">1</property>
+				      <property name="has_frame">True</property>
+				      <property name="invisible_char">*</property>
+				      <property name="activates_default">False</property>
+				      <property name="width_chars">4</property>
+				    </widget>
+				    <packing>
+				      <property name="padding">0</property>
+				      <property name="expand">True</property>
+				      <property name="fill">True</property>
+				    </packing>
+				  </child>
+				</widget>
+				<packing>
+				  <property name="left_attach">1</property>
+				  <property name="right_attach">2</property>
+				  <property name="top_attach">1</property>
+				  <property name="bottom_attach">2</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options">fill</property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkRadioButton" id="radiobuttonCustomAR">
+				  <property name="visible">True</property>
+				  <property name="tooltip" translatable="yes">Set a custom aspect ratio. The default 1:1 is recommended for most video.</property>
+				  <property name="can_focus">True</property>
+				  <property name="label" translatable="yes">Custom</property>
+				  <property name="use_underline">True</property>
+				  <property name="relief">GTK_RELIEF_NORMAL</property>
+				  <property name="focus_on_click">True</property>
+				  <property name="active">True</property>
+				  <property name="inconsistent">False</property>
+				  <property name="draw_indicator">True</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">0</property>
+				  <property name="right_attach">1</property>
+				  <property name="top_attach">1</property>
+				  <property name="bottom_attach">2</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkRadioButton" id="radiobuttonPredefinedAR">
+				  <property name="visible">True</property>
+				  <property name="tooltip" translatable="yes">Set a common predefined aspect ratio</property>
+				  <property name="can_focus">True</property>
+				  <property name="label" translatable="yes">Predefined Aspect Ratio</property>
+				  <property name="use_underline">True</property>
+				  <property name="relief">GTK_RELIEF_NORMAL</property>
+				  <property name="focus_on_click">True</property>
+				  <property name="active">False</property>
+				  <property name="inconsistent">False</property>
+				  <property name="draw_indicator">True</property>
+				  <property name="group">radiobuttonCustomAR</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">0</property>
+				  <property name="right_attach">1</property>
+				  <property name="top_attach">0</property>
+				  <property name="bottom_attach">1</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkRadioButton" id="radiobuttonAsInputAR">
+				  <property name="visible">True</property>
+				  <property name="can_focus">True</property>
+				  <property name="label" translatable="yes">As Input</property>
+				  <property name="use_underline">True</property>
+				  <property name="relief">GTK_RELIEF_NORMAL</property>
+				  <property name="focus_on_click">True</property>
+				  <property name="active">False</property>
+				  <property name="inconsistent">False</property>
+				  <property name="draw_indicator">True</property>
+				  <property name="group">radiobuttonCustomAR</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">0</property>
+				  <property name="right_attach">1</property>
+				  <property name="top_attach">2</property>
+				  <property name="bottom_attach">3</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkLabel" id="label40">
+				  <property name="visible">True</property>
+				  <property name="label">1:1 (1:1)</property>
+				  <property name="use_underline">False</property>
+				  <property name="use_markup">False</property>
+				  <property name="justify">GTK_JUSTIFY_LEFT</property>
+				  <property name="wrap">False</property>
+				  <property name="selectable">False</property>
+				  <property name="xalign">0</property>
+				  <property name="yalign">0.5</property>
+				  <property name="xpad">0</property>
+				  <property name="ypad">0</property>
+				  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+				  <property name="width_chars">-1</property>
+				  <property name="single_line_mode">False</property>
+				  <property name="angle">0</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">1</property>
+				  <property name="right_attach">2</property>
+				  <property name="top_attach">2</property>
+				  <property name="bottom_attach">3</property>
+				  <property name="x_options"></property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkComboBox" id="comboboxentry1">
+				  <property name="visible">True</property>
+				  <property name="add_tearoffs">False</property>
+				  <property name="focus_on_click">True</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">1</property>
+				  <property name="right_attach">2</property>
+				  <property name="top_attach">0</property>
+				  <property name="bottom_attach">1</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options">fill</property>
+				</packing>
+			      </child>
+			    </widget>
+			  </child>
+			</widget>
+		      </child>
+
+		      <child>
+			<widget class="GtkLabel" id="label39">
+			  <property name="visible">True</property>
+			  <property name="label" translatable="yes">&lt;b&gt;Sample Aspect Ratio&lt;/b&gt;</property>
+			  <property name="use_underline">False</property>
+			  <property name="use_markup">True</property>
+			  <property name="justify">GTK_JUSTIFY_LEFT</property>
+			  <property name="wrap">False</property>
+			  <property name="selectable">False</property>
+			  <property name="xalign">0.5</property>
+			  <property name="yalign">0.5</property>
+			  <property name="xpad">0</property>
+			  <property name="ypad">0</property>
+			  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+			  <property name="width_chars">-1</property>
+			  <property name="single_line_mode">False</property>
+			  <property name="angle">0</property>
+			</widget>
+			<packing>
+			  <property name="type">label_item</property>
+			</packing>
+		      </child>
+		    </widget>
+		    <packing>
+		      <property name="padding">0</property>
+		      <property name="expand">False</property>
+		      <property name="fill">True</property>
+		    </packing>
+		  </child>
+
+		  <child>
+		    <widget class="GtkFrame" id="frame7">
+		      <property name="visible">True</property>
+		      <property name="label_xalign">0</property>
+		      <property name="label_yalign">0.5</property>
+		      <property name="shadow_type">GTK_SHADOW_ETCHED_IN</property>
+
+		      <child>
+			<widget class="GtkAlignment" id="alignment7">
+			  <property name="visible">True</property>
+			  <property name="xalign">0.5</property>
+			  <property name="yalign">0.5</property>
+			  <property name="xscale">1</property>
+			  <property name="yscale">1</property>
+			  <property name="top_padding">7</property>
+			  <property name="bottom_padding">7</property>
+			  <property name="left_padding">7</property>
+			  <property name="right_padding">7</property>
+
+			  <child>
+			    <widget class="GtkVBox" id="vbox7">
+			      <property name="visible">True</property>
+			      <property name="homogeneous">False</property>
+			      <property name="spacing">3</property>
+
+			      <child>
+				<widget class="GtkAlignment" id="alignment21">
+				  <property name="visible">True</property>
+				  <property name="xalign">0.5</property>
+				  <property name="yalign">0.5</property>
+				  <property name="xscale">1</property>
+				  <property name="yscale">1</property>
+				  <property name="top_padding">0</property>
+				  <property name="bottom_padding">3</property>
+				  <property name="left_padding">0</property>
+				  <property name="right_padding">0</property>
+
+				  <child>
+				    <widget class="GtkHBox" id="hbox2">
+				      <property name="visible">True</property>
+				      <property name="homogeneous">False</property>
+				      <property name="spacing">17</property>
+
+				      <child>
+					<widget class="GtkCheckButton" id="checkbuttonCABAC">
+					  <property name="visible">True</property>
+					  <property name="tooltip" translatable="yes">Lossless compression technique that reduces bitrate by approximately 10%. Increases encoding and decoding time.</property>
+					  <property name="can_focus">True</property>
+					  <property name="label" translatable="yes">CABAC</property>
+					  <property name="use_underline">True</property>
+					  <property name="relief">GTK_RELIEF_NORMAL</property>
+					  <property name="focus_on_click">True</property>
+					  <property name="active">True</property>
+					  <property name="inconsistent">False</property>
+					  <property name="draw_indicator">True</property>
+					</widget>
+					<packing>
+					  <property name="padding">0</property>
+					  <property name="expand">False</property>
+					  <property name="fill">False</property>
+					</packing>
+				      </child>
+
+				      <child>
+					<widget class="GtkHBox" id="hbox7">
+					  <property name="visible">True</property>
+					  <property name="homogeneous">False</property>
+					  <property name="spacing">10</property>
+
+					  <child>
+					    <widget class="GtkLabel" id="labelTrellis">
+					      <property name="visible">True</property>
+					      <property name="label" translatable="yes">Trellis</property>
+					      <property name="use_underline">False</property>
+					      <property name="use_markup">False</property>
+					      <property name="justify">GTK_JUSTIFY_LEFT</property>
+					      <property name="wrap">False</property>
+					      <property name="selectable">False</property>
+					      <property name="xalign">0</property>
+					      <property name="yalign">0.5</property>
+					      <property name="xpad">0</property>
+					      <property name="ypad">0</property>
+					      <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+					      <property name="width_chars">-1</property>
+					      <property name="single_line_mode">False</property>
+					      <property name="angle">0</property>
+					    </widget>
+					    <packing>
+					      <property name="padding">0</property>
+					      <property name="expand">False</property>
+					      <property name="fill">False</property>
+					    </packing>
+					  </child>
+
+					  <child>
+					    <widget class="GtkSpinButton" id="spinbuttonTrellis">
+					      <property name="visible">True</property>
+					      <property name="tooltip" translatable="yes">Use Trellis Rate Distortion Optimisation to find optimal encoding for each block. Level 0 equals disabled, level 1 equals normal and level 2 equals high.</property>
+					      <property name="can_focus">True</property>
+					      <property name="climb_rate">1</property>
+					      <property name="digits">0</property>
+					      <property name="numeric">True</property>
+					      <property name="update_policy">GTK_UPDATE_ALWAYS</property>
+					      <property name="snap_to_ticks">False</property>
+					      <property name="wrap">False</property>
+					      <property name="adjustment">0 0 2 1 10 10</property>
+					    </widget>
+					    <packing>
+					      <property name="padding">0</property>
+					      <property name="expand">False</property>
+					      <property name="fill">False</property>
+					    </packing>
+					  </child>
+					</widget>
+					<packing>
+					  <property name="padding">0</property>
+					  <property name="expand">False</property>
+					  <property name="fill">False</property>
+					</packing>
+				      </child>
+
+				      <child>
+					<widget class="GtkHBox" id="hbox11">
+					  <property name="visible">True</property>
+					  <property name="homogeneous">False</property>
+					  <property name="spacing">10</property>
+
+					  <child>
+					    <widget class="GtkLabel" id="labelNoiseReduction">
+					      <property name="visible">True</property>
+					      <property name="label" translatable="yes">Noise Reduction</property>
+					      <property name="use_underline">False</property>
+					      <property name="use_markup">False</property>
+					      <property name="justify">GTK_JUSTIFY_LEFT</property>
+					      <property name="wrap">False</property>
+					      <property name="selectable">False</property>
+					      <property name="xalign">0</property>
+					      <property name="yalign">0.5</property>
+					      <property name="xpad">0</property>
+					      <property name="ypad">0</property>
+					      <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+					      <property name="width_chars">-1</property>
+					      <property name="single_line_mode">False</property>
+					      <property name="angle">0</property>
+					    </widget>
+					    <packing>
+					      <property name="padding">0</property>
+					      <property name="expand">False</property>
+					      <property name="fill">False</property>
+					    </packing>
+					  </child>
+
+					  <child>
+					    <widget class="GtkSpinButton" id="spinbuttonNoiseReduction">
+					      <property name="visible">True</property>
+					      <property name="tooltip" translatable="yes">Set the amount of noise reduction</property>
+					      <property name="can_focus">True</property>
+					      <property name="climb_rate">1</property>
+					      <property name="digits">0</property>
+					      <property name="numeric">True</property>
+					      <property name="update_policy">GTK_UPDATE_ALWAYS</property>
+					      <property name="snap_to_ticks">False</property>
+					      <property name="wrap">False</property>
+					      <property name="adjustment">0 0 1000000000 1 10 10</property>
+					    </widget>
+					    <packing>
+					      <property name="padding">0</property>
+					      <property name="expand">False</property>
+					      <property name="fill">False</property>
+					    </packing>
+					  </child>
+					</widget>
+					<packing>
+					  <property name="padding">2</property>
+					  <property name="expand">False</property>
+					  <property name="fill">False</property>
+					</packing>
+				      </child>
+				    </widget>
+				  </child>
+				</widget>
+				<packing>
+				  <property name="padding">0</property>
+				  <property name="expand">True</property>
+				  <property name="fill">True</property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkHBox" id="hbox3">
+				  <property name="visible">True</property>
+				  <property name="homogeneous">False</property>
+				  <property name="spacing">10</property>
+
+				  <child>
+				    <widget class="GtkCheckButton" id="checkbuttonDeblockingFilter">
+				      <property name="visible">True</property>
+				      <property name="tooltip" translatable="yes">Enable in-loop deblocking to filter the video</property>
+				      <property name="can_focus">True</property>
+				      <property name="label" translatable="yes">Deblocking Filter</property>
+				      <property name="use_underline">True</property>
+				      <property name="relief">GTK_RELIEF_NORMAL</property>
+				      <property name="focus_on_click">True</property>
+				      <property name="active">True</property>
+				      <property name="inconsistent">False</property>
+				      <property name="draw_indicator">True</property>
+				    </widget>
+				    <packing>
+				      <property name="padding">0</property>
+				      <property name="expand">False</property>
+				      <property name="fill">False</property>
+				    </packing>
+				  </child>
+
+				  <child>
+				    <widget class="GtkTable" id="table8">
+				      <property name="visible">True</property>
+				      <property name="n_rows">2</property>
+				      <property name="n_columns">2</property>
+				      <property name="homogeneous">False</property>
+				      <property name="row_spacing">3</property>
+				      <property name="column_spacing">10</property>
+
+				      <child>
+					<widget class="GtkLabel" id="labelThreshold">
+					  <property name="visible">True</property>
+					  <property name="label" translatable="yes">Threshold</property>
+					  <property name="use_underline">False</property>
+					  <property name="use_markup">True</property>
+					  <property name="justify">GTK_JUSTIFY_LEFT</property>
+					  <property name="wrap">False</property>
+					  <property name="selectable">False</property>
+					  <property name="xalign">0</property>
+					  <property name="yalign">0.5</property>
+					  <property name="xpad">0</property>
+					  <property name="ypad">0</property>
+					  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+					  <property name="width_chars">-1</property>
+					  <property name="single_line_mode">False</property>
+					  <property name="angle">0</property>
+					</widget>
+					<packing>
+					  <property name="left_attach">0</property>
+					  <property name="right_attach">1</property>
+					  <property name="top_attach">1</property>
+					  <property name="bottom_attach">2</property>
+					  <property name="x_options">fill</property>
+					  <property name="y_options"></property>
+					</packing>
+				      </child>
+
+				      <child>
+					<widget class="GtkLabel" id="labelStrength">
+					  <property name="visible">True</property>
+					  <property name="label" translatable="yes">Strength</property>
+					  <property name="use_underline">False</property>
+					  <property name="use_markup">True</property>
+					  <property name="justify">GTK_JUSTIFY_LEFT</property>
+					  <property name="wrap">False</property>
+					  <property name="selectable">False</property>
+					  <property name="xalign">0</property>
+					  <property name="yalign">0.5</property>
+					  <property name="xpad">0</property>
+					  <property name="ypad">0</property>
+					  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+					  <property name="width_chars">-1</property>
+					  <property name="single_line_mode">False</property>
+					  <property name="angle">0</property>
+					</widget>
+					<packing>
+					  <property name="left_attach">0</property>
+					  <property name="right_attach">1</property>
+					  <property name="top_attach">0</property>
+					  <property name="bottom_attach">1</property>
+					  <property name="x_options">fill</property>
+					  <property name="y_options"></property>
+					</packing>
+				      </child>
+
+				      <child>
+					<widget class="GtkSpinButton" id="spinbuttonThreshold">
+					  <property name="visible">True</property>
+					  <property name="tooltip" translatable="yes">Threshold for block detection. Positive values will detect more blocks, negative values will detect less.</property>
+					  <property name="can_focus">True</property>
+					  <property name="climb_rate">1</property>
+					  <property name="digits">0</property>
+					  <property name="numeric">True</property>
+					  <property name="update_policy">GTK_UPDATE_ALWAYS</property>
+					  <property name="snap_to_ticks">False</property>
+					  <property name="wrap">False</property>
+					  <property name="adjustment">0 -6 6 1 10 10</property>
+					</widget>
+					<packing>
+					  <property name="left_attach">1</property>
+					  <property name="right_attach">2</property>
+					  <property name="top_attach">1</property>
+					  <property name="bottom_attach">2</property>
+					  <property name="x_options">fill</property>
+					  <property name="y_options"></property>
+					</packing>
+				      </child>
+
+				      <child>
+					<widget class="GtkSpinButton" id="spinbuttonStrength">
+					  <property name="visible">True</property>
+					  <property name="tooltip" translatable="yes">Positive values will soften the video, negative values will sharpen</property>
+					  <property name="can_focus">True</property>
+					  <property name="climb_rate">1</property>
+					  <property name="digits">0</property>
+					  <property name="numeric">True</property>
+					  <property name="update_policy">GTK_UPDATE_ALWAYS</property>
+					  <property name="snap_to_ticks">False</property>
+					  <property name="wrap">False</property>
+					  <property name="adjustment">0 -6 6 1 10 10</property>
+					</widget>
+					<packing>
+					  <property name="left_attach">1</property>
+					  <property name="right_attach">2</property>
+					  <property name="top_attach">0</property>
+					  <property name="bottom_attach">1</property>
+					  <property name="x_options">fill</property>
+					  <property name="y_options"></property>
+					</packing>
+				      </child>
+				    </widget>
+				    <packing>
+				      <property name="padding">0</property>
+				      <property name="expand">True</property>
+				      <property name="fill">True</property>
+				    </packing>
+				  </child>
+				</widget>
+				<packing>
+				  <property name="padding">0</property>
+				  <property name="expand">True</property>
+				  <property name="fill">True</property>
+				</packing>
+			      </child>
+			    </widget>
+			  </child>
+			</widget>
+		      </child>
+
+		      <child>
+			<widget class="GtkLabel" id="label25">
+			  <property name="visible">True</property>
+			  <property name="label" translatable="yes">&lt;b&gt;Misc. Options&lt;/b&gt;</property>
+			  <property name="use_underline">False</property>
+			  <property name="use_markup">True</property>
+			  <property name="justify">GTK_JUSTIFY_LEFT</property>
+			  <property name="wrap">False</property>
+			  <property name="selectable">False</property>
+			  <property name="xalign">0.5</property>
+			  <property name="yalign">0.5</property>
+			  <property name="xpad">0</property>
+			  <property name="ypad">0</property>
+			  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+			  <property name="width_chars">-1</property>
+			  <property name="single_line_mode">False</property>
+			  <property name="angle">0</property>
+			</widget>
+			<packing>
+			  <property name="type">label_item</property>
+			</packing>
+		      </child>
+		    </widget>
+		    <packing>
+		      <property name="padding">0</property>
+		      <property name="expand">False</property>
+		      <property name="fill">True</property>
+		    </packing>
+		  </child>
+		</widget>
+	      </child>
+	    </widget>
+	    <packing>
+	      <property name="tab_expand">False</property>
+	      <property name="tab_fill">True</property>
+	    </packing>
+	  </child>
+
+	  <child>
+	    <widget class="GtkLabel" id="labelPageMotion&amp;More">
+	      <property name="visible">True</property>
+	      <property name="label" translatable="yes">Motion &amp; Misc</property>
+	      <property name="use_underline">False</property>
+	      <property name="use_markup">False</property>
+	      <property name="justify">GTK_JUSTIFY_LEFT</property>
+	      <property name="wrap">False</property>
+	      <property name="selectable">False</property>
+	      <property name="xalign">0.5</property>
+	      <property name="yalign">0.5</property>
+	      <property name="xpad">0</property>
+	      <property name="ypad">0</property>
+	      <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+	      <property name="width_chars">-1</property>
+	      <property name="single_line_mode">False</property>
+	      <property name="angle">0</property>
+	    </widget>
+	    <packing>
+	      <property name="type">tab</property>
+	    </packing>
+	  </child>
+
+	  <child>
+	    <widget class="GtkAlignment" id="alignment16">
+	      <property name="visible">True</property>
+	      <property name="xalign">0.5</property>
+	      <property name="yalign">0.5</property>
+	      <property name="xscale">1</property>
+	      <property name="yscale">1</property>
+	      <property name="top_padding">7</property>
+	      <property name="bottom_padding">7</property>
+	      <property name="left_padding">7</property>
+	      <property name="right_padding">7</property>
+
+	      <child>
+		<widget class="GtkVBox" id="vbox2">
+		  <property name="visible">True</property>
+		  <property name="homogeneous">False</property>
+		  <property name="spacing">3</property>
+
+		  <child>
+		    <widget class="GtkFrame" id="frame4">
+		      <property name="visible">True</property>
+		      <property name="label_xalign">0</property>
+		      <property name="label_yalign">0.5</property>
+		      <property name="shadow_type">GTK_SHADOW_ETCHED_IN</property>
+
+		      <child>
+			<widget class="GtkAlignment" id="alignment4">
+			  <property name="visible">True</property>
+			  <property name="xalign">0.5</property>
+			  <property name="yalign">0.5</property>
+			  <property name="xscale">1</property>
+			  <property name="yscale">1</property>
+			  <property name="top_padding">7</property>
+			  <property name="bottom_padding">7</property>
+			  <property name="left_padding">7</property>
+			  <property name="right_padding">7</property>
+
+			  <child>
+			    <widget class="GtkVBox" id="vbox3">
+			      <property name="visible">True</property>
+			      <property name="homogeneous">False</property>
+			      <property name="spacing">3</property>
+
+			      <child>
+				<widget class="GtkCheckButton" id="checkbutton8x8">
+				  <property name="visible">True</property>
+				  <property name="tooltip" translatable="yes">General block breakdown transformation</property>
+				  <property name="can_focus">True</property>
+				  <property name="label" translatable="yes">8x8 Transform</property>
+				  <property name="use_underline">True</property>
+				  <property name="relief">GTK_RELIEF_NORMAL</property>
+				  <property name="focus_on_click">True</property>
+				  <property name="active">True</property>
+				  <property name="inconsistent">False</property>
+				  <property name="draw_indicator">True</property>
+				</widget>
+				<packing>
+				  <property name="padding">0</property>
+				  <property name="expand">False</property>
+				  <property name="fill">False</property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkCheckButton" id="checkbutton8x8P">
+				  <property name="visible">True</property>
+				  <property name="tooltip" translatable="yes">Improve the P-frame quality</property>
+				  <property name="can_focus">True</property>
+				  <property name="label" translatable="yes">8x8, 8x16 and 16x8 P-frame search</property>
+				  <property name="use_underline">True</property>
+				  <property name="relief">GTK_RELIEF_NORMAL</property>
+				  <property name="focus_on_click">True</property>
+				  <property name="active">True</property>
+				  <property name="inconsistent">False</property>
+				  <property name="draw_indicator">True</property>
+				</widget>
+				<packing>
+				  <property name="padding">0</property>
+				  <property name="expand">False</property>
+				  <property name="fill">False</property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkCheckButton" id="checkbutton8x8B">
+				  <property name="visible">True</property>
+				  <property name="tooltip" translatable="yes">Improve the B-frame quality</property>
+				  <property name="can_focus">True</property>
+				  <property name="label" translatable="yes">8x8, 8x16 and 16x8 B-frame search</property>
+				  <property name="use_underline">True</property>
+				  <property name="relief">GTK_RELIEF_NORMAL</property>
+				  <property name="focus_on_click">True</property>
+				  <property name="active">True</property>
+				  <property name="inconsistent">False</property>
+				  <property name="draw_indicator">True</property>
+				</widget>
+				<packing>
+				  <property name="padding">0</property>
+				  <property name="expand">False</property>
+				  <property name="fill">False</property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkCheckButton" id="checkbutton4x4">
+				  <property name="visible">True</property>
+				  <property name="tooltip" translatable="yes">Further improve the P-frame quality</property>
+				  <property name="can_focus">True</property>
+				  <property name="label" translatable="yes">4x4, 4x8 and 8x4 P-frame search</property>
+				  <property name="use_underline">True</property>
+				  <property name="relief">GTK_RELIEF_NORMAL</property>
+				  <property name="focus_on_click">True</property>
+				  <property name="active">False</property>
+				  <property name="inconsistent">False</property>
+				  <property name="draw_indicator">True</property>
+				</widget>
+				<packing>
+				  <property name="padding">0</property>
+				  <property name="expand">False</property>
+				  <property name="fill">False</property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkCheckButton" id="checkbutton8x8I">
+				  <property name="visible">True</property>
+				  <property name="tooltip" translatable="yes">Enable DCT Intra block search to improve quality</property>
+				  <property name="can_focus">True</property>
+				  <property name="label" translatable="yes">8x8 Intra search</property>
+				  <property name="use_underline">True</property>
+				  <property name="relief">GTK_RELIEF_NORMAL</property>
+				  <property name="focus_on_click">True</property>
+				  <property name="active">True</property>
+				  <property name="inconsistent">False</property>
+				  <property name="draw_indicator">True</property>
+				</widget>
+				<packing>
+				  <property name="padding">0</property>
+				  <property name="expand">False</property>
+				  <property name="fill">False</property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkCheckButton" id="checkbutton4x4I">
+				  <property name="visible">True</property>
+				  <property name="tooltip" translatable="yes">Further enable DCT Intra block search to improve quality</property>
+				  <property name="can_focus">True</property>
+				  <property name="label" translatable="yes">4x4 Intra search</property>
+				  <property name="use_underline">True</property>
+				  <property name="relief">GTK_RELIEF_NORMAL</property>
+				  <property name="focus_on_click">True</property>
+				  <property name="active">True</property>
+				  <property name="inconsistent">False</property>
+				  <property name="draw_indicator">True</property>
+				</widget>
+				<packing>
+				  <property name="padding">0</property>
+				  <property name="expand">False</property>
+				  <property name="fill">False</property>
+				</packing>
+			      </child>
+			    </widget>
+			  </child>
+			</widget>
+		      </child>
+
+		      <child>
+			<widget class="GtkLabel" id="label19">
+			  <property name="visible">True</property>
+			  <property name="label" translatable="yes">&lt;b&gt;Partition Macroblocks&lt;/b&gt;</property>
+			  <property name="use_underline">False</property>
+			  <property name="use_markup">True</property>
+			  <property name="justify">GTK_JUSTIFY_LEFT</property>
+			  <property name="wrap">False</property>
+			  <property name="selectable">False</property>
+			  <property name="xalign">0.5</property>
+			  <property name="yalign">0.5</property>
+			  <property name="xpad">0</property>
+			  <property name="ypad">0</property>
+			  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+			  <property name="width_chars">-1</property>
+			  <property name="single_line_mode">False</property>
+			  <property name="angle">0</property>
+			</widget>
+			<packing>
+			  <property name="type">label_item</property>
+			</packing>
+		      </child>
+		    </widget>
+		    <packing>
+		      <property name="padding">0</property>
+		      <property name="expand">False</property>
+		      <property name="fill">True</property>
+		    </packing>
+		  </child>
+
+		  <child>
+		    <widget class="GtkFrame" id="frame5">
+		      <property name="visible">True</property>
+		      <property name="label_xalign">0</property>
+		      <property name="label_yalign">0.5</property>
+		      <property name="shadow_type">GTK_SHADOW_ETCHED_IN</property>
+
+		      <child>
+			<widget class="GtkAlignment" id="alignment5">
+			  <property name="visible">True</property>
+			  <property name="xalign">0.5</property>
+			  <property name="yalign">0.5</property>
+			  <property name="xscale">1</property>
+			  <property name="yscale">1</property>
+			  <property name="top_padding">7</property>
+			  <property name="bottom_padding">7</property>
+			  <property name="left_padding">7</property>
+			  <property name="right_padding">7</property>
+
+			  <child>
+			    <widget class="GtkVBox" id="vbox4">
+			      <property name="visible">True</property>
+			      <property name="homogeneous">False</property>
+			      <property name="spacing">3</property>
+
+			      <child>
+				<widget class="GtkTable" id="table5">
+				  <property name="visible">True</property>
+				  <property name="n_rows">2</property>
+				  <property name="n_columns">2</property>
+				  <property name="homogeneous">False</property>
+				  <property name="row_spacing">3</property>
+				  <property name="column_spacing">10</property>
+
+				  <child>
+				    <widget class="GtkLabel" id="labelBias">
+				      <property name="visible">True</property>
+				      <property name="label" translatable="yes">Bias</property>
+				      <property name="use_underline">False</property>
+				      <property name="use_markup">False</property>
+				      <property name="justify">GTK_JUSTIFY_LEFT</property>
+				      <property name="wrap">False</property>
+				      <property name="selectable">False</property>
+				      <property name="xalign">0</property>
+				      <property name="yalign">0.5</property>
+				      <property name="xpad">0</property>
+				      <property name="ypad">0</property>
+				      <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+				      <property name="width_chars">-1</property>
+				      <property name="single_line_mode">False</property>
+				      <property name="angle">0</property>
+				    </widget>
+				    <packing>
+				      <property name="left_attach">0</property>
+				      <property name="right_attach">1</property>
+				      <property name="top_attach">1</property>
+				      <property name="bottom_attach">2</property>
+				      <property name="x_options">fill</property>
+				      <property name="y_options"></property>
+				    </packing>
+				  </child>
+
+				  <child>
+				    <widget class="GtkLabel" id="labelMaxConsecutive">
+				      <property name="visible">True</property>
+				      <property name="label" translatable="yes">Max Consecutive</property>
+				      <property name="use_underline">False</property>
+				      <property name="use_markup">False</property>
+				      <property name="justify">GTK_JUSTIFY_LEFT</property>
+				      <property name="wrap">False</property>
+				      <property name="selectable">False</property>
+				      <property name="xalign">0</property>
+				      <property name="yalign">0.5</property>
+				      <property name="xpad">0</property>
+				      <property name="ypad">0</property>
+				      <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+				      <property name="width_chars">-1</property>
+				      <property name="single_line_mode">False</property>
+				      <property name="angle">0</property>
+				    </widget>
+				    <packing>
+				      <property name="left_attach">0</property>
+				      <property name="right_attach">1</property>
+				      <property name="top_attach">0</property>
+				      <property name="bottom_attach">1</property>
+				      <property name="x_options">fill</property>
+				      <property name="y_options"></property>
+				    </packing>
+				  </child>
+
+				  <child>
+				    <widget class="GtkSpinButton" id="spinbuttonBias">
+				      <property name="visible">True</property>
+				      <property name="tooltip" translatable="yes">Increase / decrease probability for how often B-frames are used. It will not violate the maximum consecutive frame limit.</property>
+				      <property name="can_focus">True</property>
+				      <property name="climb_rate">1</property>
+				      <property name="digits">0</property>
+				      <property name="numeric">True</property>
+				      <property name="update_policy">GTK_UPDATE_ALWAYS</property>
+				      <property name="snap_to_ticks">False</property>
+				      <property name="wrap">False</property>
+				      <property name="adjustment">0 -100 100 1 10 10</property>
+				    </widget>
+				    <packing>
+				      <property name="left_attach">1</property>
+				      <property name="right_attach">2</property>
+				      <property name="top_attach">1</property>
+				      <property name="bottom_attach">2</property>
+				      <property name="x_options">fill</property>
+				      <property name="y_options"></property>
+				    </packing>
+				  </child>
+
+				  <child>
+				    <widget class="GtkSpinButton" id="spinbuttonMaxBFrame">
+				      <property name="visible">True</property>
+				      <property name="tooltip" translatable="yes">Set the maximum number of consecutive B-frames. This defines how many duplicate frames can be dropped. Numbers 2 to 5 are recommended. This greatly improves the use of bitrate and quality.</property>
+				      <property name="can_focus">True</property>
+				      <property name="climb_rate">1</property>
+				      <property name="digits">0</property>
+				      <property name="numeric">True</property>
+				      <property name="update_policy">GTK_UPDATE_ALWAYS</property>
+				      <property name="snap_to_ticks">False</property>
+				      <property name="wrap">False</property>
+				      <property name="adjustment">3 0 15 1 10 10</property>
+				    </widget>
+				    <packing>
+				      <property name="left_attach">1</property>
+				      <property name="right_attach">2</property>
+				      <property name="top_attach">0</property>
+				      <property name="bottom_attach">1</property>
+				      <property name="x_options">fill</property>
+				      <property name="y_options"></property>
+				    </packing>
+				  </child>
+				</widget>
+				<packing>
+				  <property name="padding">0</property>
+				  <property name="expand">True</property>
+				  <property name="fill">True</property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkAlignment" id="alignment20">
+				  <property name="visible">True</property>
+				  <property name="xalign">0.5</property>
+				  <property name="yalign">0.5</property>
+				  <property name="xscale">1</property>
+				  <property name="yscale">1</property>
+				  <property name="top_padding">3</property>
+				  <property name="bottom_padding">3</property>
+				  <property name="left_padding">0</property>
+				  <property name="right_padding">0</property>
+
+				  <child>
+				    <widget class="GtkTable" id="table6">
+				      <property name="visible">True</property>
+				      <property name="n_rows">2</property>
+				      <property name="n_columns">2</property>
+				      <property name="homogeneous">False</property>
+				      <property name="row_spacing">3</property>
+				      <property name="column_spacing">10</property>
+
+				      <child>
+					<widget class="GtkCheckButton" id="checkbuttonBidirME">
+					  <property name="visible">True</property>
+					  <property name="tooltip" translatable="yes">Optimise both motion vectors in B-frames. This will improve quality but take more time for encoding.</property>
+					  <property name="can_focus">True</property>
+					  <property name="label" translatable="yes">Bidirectional ME</property>
+					  <property name="use_underline">True</property>
+					  <property name="relief">GTK_RELIEF_NORMAL</property>
+					  <property name="focus_on_click">True</property>
+					  <property name="active">False</property>
+					  <property name="inconsistent">False</property>
+					  <property name="draw_indicator">True</property>
+					</widget>
+					<packing>
+					  <property name="left_attach">1</property>
+					  <property name="right_attach">2</property>
+					  <property name="top_attach">0</property>
+					  <property name="bottom_attach">1</property>
+					  <property name="x_options">fill</property>
+					  <property name="y_options"></property>
+					</packing>
+				      </child>
+
+				      <child>
+					<widget class="GtkCheckButton" id="checkbuttonWeighted">
+					  <property name="visible">True</property>
+					  <property name="tooltip" translatable="yes">Enables weighting of B-frames to help fades</property>
+					  <property name="can_focus">True</property>
+					  <property name="label" translatable="yes">Weighted Biprediction</property>
+					  <property name="use_underline">True</property>
+					  <property name="relief">GTK_RELIEF_NORMAL</property>
+					  <property name="focus_on_click">True</property>
+					  <property name="active">True</property>
+					  <property name="inconsistent">False</property>
+					  <property name="draw_indicator">True</property>
+					</widget>
+					<packing>
+					  <property name="left_attach">1</property>
+					  <property name="right_attach">2</property>
+					  <property name="top_attach">1</property>
+					  <property name="bottom_attach">2</property>
+					  <property name="x_options">fill</property>
+					  <property name="y_options"></property>
+					</packing>
+				      </child>
+
+				      <child>
+					<widget class="GtkCheckButton" id="checkbuttonAdaptative">
+					  <property name="visible">True</property>
+					  <property name="tooltip" translatable="yes">Use fewer B-frames if needed. This is always recommended. If not enabled, the codec will always use the maximum number of consecutive B-frames.</property>
+					  <property name="can_focus">True</property>
+					  <property name="label" translatable="yes">Adaptative DCT</property>
+					  <property name="use_underline">True</property>
+					  <property name="relief">GTK_RELIEF_NORMAL</property>
+					  <property name="focus_on_click">True</property>
+					  <property name="active">True</property>
+					  <property name="inconsistent">False</property>
+					  <property name="draw_indicator">True</property>
+					</widget>
+					<packing>
+					  <property name="left_attach">0</property>
+					  <property name="right_attach">1</property>
+					  <property name="top_attach">1</property>
+					  <property name="bottom_attach">2</property>
+					  <property name="x_options">fill</property>
+					  <property name="y_options"></property>
+					</packing>
+				      </child>
+
+				      <child>
+					<widget class="GtkCheckButton" id="checkbuttonBasReference">
+					  <property name="visible">True</property>
+					  <property name="tooltip" translatable="yes">Allow B-frames to make references non-linearly to another B-frame (instead of creating a duplicate copy)</property>
+					  <property name="can_focus">True</property>
+					  <property name="label" translatable="yes">Use as Reference</property>
+					  <property name="use_underline">True</property>
+					  <property name="relief">GTK_RELIEF_NORMAL</property>
+					  <property name="focus_on_click">True</property>
+					  <property name="active">False</property>
+					  <property name="inconsistent">False</property>
+					  <property name="draw_indicator">True</property>
+					</widget>
+					<packing>
+					  <property name="left_attach">0</property>
+					  <property name="right_attach">1</property>
+					  <property name="top_attach">0</property>
+					  <property name="bottom_attach">1</property>
+					  <property name="x_options">fill</property>
+					  <property name="y_options"></property>
+					</packing>
+				      </child>
+				    </widget>
+				  </child>
+				</widget>
+				<packing>
+				  <property name="padding">0</property>
+				  <property name="expand">True</property>
+				  <property name="fill">True</property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkHBox" id="hbox1">
+				  <property name="visible">True</property>
+				  <property name="homogeneous">False</property>
+				  <property name="spacing">10</property>
+
+				  <child>
+				    <widget class="GtkLabel" id="labelBFrameDirectMode">
+				      <property name="visible">True</property>
+				      <property name="label" translatable="yes">B-Frame Direct Mode</property>
+				      <property name="use_underline">False</property>
+				      <property name="use_markup">False</property>
+				      <property name="justify">GTK_JUSTIFY_LEFT</property>
+				      <property name="wrap">False</property>
+				      <property name="selectable">False</property>
+				      <property name="xalign">0</property>
+				      <property name="yalign">0.5</property>
+				      <property name="xpad">0</property>
+				      <property name="ypad">0</property>
+				      <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+				      <property name="width_chars">-1</property>
+				      <property name="single_line_mode">False</property>
+				      <property name="angle">0</property>
+				    </widget>
+				    <packing>
+				      <property name="padding">0</property>
+				      <property name="expand">False</property>
+				      <property name="fill">True</property>
+				    </packing>
+				  </child>
+
+				  <child>
+				    <widget class="GtkComboBox" id="comboboxDirectMode">
+				      <property name="visible">True</property>
+				      <property name="has_default">True</property>
+				      <property name="items" translatable="yes">None
+Spatial
+Temporal
+Auto</property>
+				      <property name="add_tearoffs">False</property>
+				      <property name="focus_on_click">True</property>
+				    </widget>
+				    <packing>
+				      <property name="padding">0</property>
+				      <property name="expand">False</property>
+				      <property name="fill">True</property>
+				    </packing>
+				  </child>
+				</widget>
+				<packing>
+				  <property name="padding">0</property>
+				  <property name="expand">True</property>
+				  <property name="fill">True</property>
+				</packing>
+			      </child>
+			    </widget>
+			  </child>
+			</widget>
+		      </child>
+
+		      <child>
+			<widget class="GtkLabel" id="label20">
+			  <property name="visible">True</property>
+			  <property name="label" translatable="yes">&lt;b&gt;B-Frames&lt;/b&gt;</property>
+			  <property name="use_underline">False</property>
+			  <property name="use_markup">True</property>
+			  <property name="justify">GTK_JUSTIFY_LEFT</property>
+			  <property name="wrap">False</property>
+			  <property name="selectable">False</property>
+			  <property name="xalign">0.5</property>
+			  <property name="yalign">0.5</property>
+			  <property name="xpad">0</property>
+			  <property name="ypad">0</property>
+			  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+			  <property name="width_chars">-1</property>
+			  <property name="single_line_mode">False</property>
+			  <property name="angle">0</property>
+			</widget>
+			<packing>
+			  <property name="type">label_item</property>
+			</packing>
+		      </child>
+		    </widget>
+		    <packing>
+		      <property name="padding">0</property>
+		      <property name="expand">False</property>
+		      <property name="fill">True</property>
+		    </packing>
+		  </child>
+		</widget>
+	      </child>
+	    </widget>
+	    <packing>
+	      <property name="tab_expand">False</property>
+	      <property name="tab_fill">True</property>
+	    </packing>
+	  </child>
+
+	  <child>
+	    <widget class="GtkLabel" id="labelPagePartion&amp;Frame">
+	      <property name="visible">True</property>
+	      <property name="label" translatable="yes">Partitions &amp; Frames</property>
+	      <property name="use_underline">False</property>
+	      <property name="use_markup">False</property>
+	      <property name="justify">GTK_JUSTIFY_LEFT</property>
+	      <property name="wrap">False</property>
+	      <property name="selectable">False</property>
+	      <property name="xalign">0.5</property>
+	      <property name="yalign">0.5</property>
+	      <property name="xpad">0</property>
+	      <property name="ypad">0</property>
+	      <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+	      <property name="width_chars">-1</property>
+	      <property name="single_line_mode">False</property>
+	      <property name="angle">0</property>
+	    </widget>
+	    <packing>
+	      <property name="type">tab</property>
+	    </packing>
+	  </child>
+
+	  <child>
+	    <widget class="GtkAlignment" id="alignment17">
+	      <property name="visible">True</property>
+	      <property name="xalign">0.5</property>
+	      <property name="yalign">0.5</property>
+	      <property name="xscale">1</property>
+	      <property name="yscale">1</property>
+	      <property name="top_padding">7</property>
+	      <property name="bottom_padding">7</property>
+	      <property name="left_padding">7</property>
+	      <property name="right_padding">7</property>
+
+	      <child>
+		<widget class="GtkVBox" id="vbox1">
+		  <property name="visible">True</property>
+		  <property name="homogeneous">False</property>
+		  <property name="spacing">3</property>
+
+		  <child>
+		    <widget class="GtkFrame" id="frame1">
+		      <property name="visible">True</property>
+		      <property name="label_xalign">0</property>
+		      <property name="label_yalign">0.5</property>
+		      <property name="shadow_type">GTK_SHADOW_ETCHED_IN</property>
+
+		      <child>
+			<widget class="GtkAlignment" id="alignment1">
+			  <property name="visible">True</property>
+			  <property name="xalign">0.5</property>
+			  <property name="yalign">0.5</property>
+			  <property name="xscale">1</property>
+			  <property name="yscale">1</property>
+			  <property name="top_padding">7</property>
+			  <property name="bottom_padding">7</property>
+			  <property name="left_padding">7</property>
+			  <property name="right_padding">7</property>
+
+			  <child>
+			    <widget class="GtkTable" id="table2">
+			      <property name="visible">True</property>
+			      <property name="n_rows">3</property>
+			      <property name="n_columns">2</property>
+			      <property name="homogeneous">False</property>
+			      <property name="row_spacing">3</property>
+			      <property name="column_spacing">10</property>
+
+			      <child>
+				<widget class="GtkSpinButton" id="spinbuttonKeyframeBoost">
+				  <property name="width_request">115</property>
+				  <property name="visible">True</property>
+				  <property name="tooltip" translatable="yes">Set how much &quot;bitrate bonus&quot; a keyframe can get</property>
+				  <property name="can_focus">True</property>
+				  <property name="climb_rate">1</property>
+				  <property name="digits">0</property>
+				  <property name="numeric">True</property>
+				  <property name="update_policy">GTK_UPDATE_ALWAYS</property>
+				  <property name="snap_to_ticks">False</property>
+				  <property name="wrap">False</property>
+				  <property name="adjustment">40 0 100 1 10 10</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">1</property>
+				  <property name="right_attach">2</property>
+				  <property name="top_attach">0</property>
+				  <property name="bottom_attach">1</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkSpinButton" id="spinbuttonBframeReduction">
+				  <property name="visible">True</property>
+				  <property name="tooltip" translatable="yes">Set how much bitrate is deducted from a B-frame as compared to the previous P-frame</property>
+				  <property name="can_focus">True</property>
+				  <property name="climb_rate">1</property>
+				  <property name="digits">0</property>
+				  <property name="numeric">True</property>
+				  <property name="update_policy">GTK_UPDATE_ALWAYS</property>
+				  <property name="snap_to_ticks">False</property>
+				  <property name="wrap">False</property>
+				  <property name="adjustment">30 0 100 1 10 10</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">1</property>
+				  <property name="right_attach">2</property>
+				  <property name="top_attach">1</property>
+				  <property name="bottom_attach">2</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkSpinButton" id="spinbuttonBitrateVariability">
+				  <property name="visible">True</property>
+				  <property name="tooltip" translatable="yes">Define how much the bitrate can fluctuate over the entire video. 0% results in a constant bitrate stream, while 100% results in a pure quality based bitrate stream.</property>
+				  <property name="can_focus">True</property>
+				  <property name="climb_rate">1</property>
+				  <property name="digits">0</property>
+				  <property name="numeric">True</property>
+				  <property name="update_policy">GTK_UPDATE_ALWAYS</property>
+				  <property name="snap_to_ticks">False</property>
+				  <property name="wrap">False</property>
+				  <property name="adjustment">60 0 100 1 10 10</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">1</property>
+				  <property name="right_attach">2</property>
+				  <property name="top_attach">2</property>
+				  <property name="bottom_attach">3</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkLabel" id="labelKeyframeboost">
+				  <property name="visible">True</property>
+				  <property name="label" translatable="yes">Keyframe Boost (%)</property>
+				  <property name="use_underline">False</property>
+				  <property name="use_markup">False</property>
+				  <property name="justify">GTK_JUSTIFY_LEFT</property>
+				  <property name="wrap">False</property>
+				  <property name="selectable">False</property>
+				  <property name="xalign">0</property>
+				  <property name="yalign">0.5</property>
+				  <property name="xpad">0</property>
+				  <property name="ypad">0</property>
+				  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+				  <property name="width_chars">-1</property>
+				  <property name="single_line_mode">False</property>
+				  <property name="angle">0</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">0</property>
+				  <property name="right_attach">1</property>
+				  <property name="top_attach">0</property>
+				  <property name="bottom_attach">1</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkLabel" id="label11">
+				  <property name="visible">True</property>
+				  <property name="label" translatable="yes">B-frame Reduction (%)</property>
+				  <property name="use_underline">False</property>
+				  <property name="use_markup">False</property>
+				  <property name="justify">GTK_JUSTIFY_LEFT</property>
+				  <property name="wrap">False</property>
+				  <property name="selectable">False</property>
+				  <property name="xalign">0</property>
+				  <property name="yalign">0.5</property>
+				  <property name="xpad">0</property>
+				  <property name="ypad">0</property>
+				  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+				  <property name="width_chars">-1</property>
+				  <property name="single_line_mode">False</property>
+				  <property name="angle">0</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">0</property>
+				  <property name="right_attach">1</property>
+				  <property name="top_attach">1</property>
+				  <property name="bottom_attach">2</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkLabel" id="label12">
+				  <property name="visible">True</property>
+				  <property name="label" translatable="yes">Bitrate Variability (%)</property>
+				  <property name="use_underline">False</property>
+				  <property name="use_markup">False</property>
+				  <property name="justify">GTK_JUSTIFY_LEFT</property>
+				  <property name="wrap">False</property>
+				  <property name="selectable">False</property>
+				  <property name="xalign">0</property>
+				  <property name="yalign">0.5</property>
+				  <property name="xpad">0</property>
+				  <property name="ypad">0</property>
+				  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+				  <property name="width_chars">-1</property>
+				  <property name="single_line_mode">False</property>
+				  <property name="angle">0</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">0</property>
+				  <property name="right_attach">1</property>
+				  <property name="top_attach">2</property>
+				  <property name="bottom_attach">3</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+			    </widget>
+			  </child>
+			</widget>
+		      </child>
+
+		      <child>
+			<widget class="GtkLabel" id="label7">
+			  <property name="visible">True</property>
+			  <property name="label" translatable="yes">&lt;b&gt;Bitrate&lt;/b&gt;</property>
+			  <property name="use_underline">False</property>
+			  <property name="use_markup">True</property>
+			  <property name="justify">GTK_JUSTIFY_LEFT</property>
+			  <property name="wrap">False</property>
+			  <property name="selectable">False</property>
+			  <property name="xalign">0.5</property>
+			  <property name="yalign">0.5</property>
+			  <property name="xpad">0</property>
+			  <property name="ypad">0</property>
+			  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+			  <property name="width_chars">-1</property>
+			  <property name="single_line_mode">False</property>
+			  <property name="angle">0</property>
+			</widget>
+			<packing>
+			  <property name="type">label_item</property>
+			</packing>
+		      </child>
+		    </widget>
+		    <packing>
+		      <property name="padding">1</property>
+		      <property name="expand">False</property>
+		      <property name="fill">True</property>
+		    </packing>
+		  </child>
+
+		  <child>
+		    <widget class="GtkFrame" id="frame2">
+		      <property name="visible">True</property>
+		      <property name="label_xalign">0</property>
+		      <property name="label_yalign">0.5</property>
+		      <property name="shadow_type">GTK_SHADOW_ETCHED_IN</property>
+
+		      <child>
+			<widget class="GtkAlignment" id="alignment2">
+			  <property name="visible">True</property>
+			  <property name="xalign">0.5</property>
+			  <property name="yalign">0.5</property>
+			  <property name="xscale">1</property>
+			  <property name="yscale">1</property>
+			  <property name="top_padding">7</property>
+			  <property name="bottom_padding">7</property>
+			  <property name="left_padding">7</property>
+			  <property name="right_padding">7</property>
+
+			  <child>
+			    <widget class="GtkTable" id="table3">
+			      <property name="visible">True</property>
+			      <property name="n_rows">3</property>
+			      <property name="n_columns">2</property>
+			      <property name="homogeneous">False</property>
+			      <property name="row_spacing">3</property>
+			      <property name="column_spacing">20</property>
+
+			      <child>
+				<widget class="GtkLabel" id="label13">
+				  <property name="visible">True</property>
+				  <property name="label" translatable="yes">Min QP</property>
+				  <property name="use_underline">False</property>
+				  <property name="use_markup">False</property>
+				  <property name="justify">GTK_JUSTIFY_LEFT</property>
+				  <property name="wrap">False</property>
+				  <property name="selectable">False</property>
+				  <property name="xalign">0</property>
+				  <property name="yalign">0.5</property>
+				  <property name="xpad">0</property>
+				  <property name="ypad">0</property>
+				  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+				  <property name="width_chars">-1</property>
+				  <property name="single_line_mode">False</property>
+				  <property name="angle">0</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">0</property>
+				  <property name="right_attach">1</property>
+				  <property name="top_attach">0</property>
+				  <property name="bottom_attach">1</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkLabel" id="label14">
+				  <property name="visible">True</property>
+				  <property name="label" translatable="yes">Max QP</property>
+				  <property name="use_underline">False</property>
+				  <property name="use_markup">False</property>
+				  <property name="justify">GTK_JUSTIFY_LEFT</property>
+				  <property name="wrap">False</property>
+				  <property name="selectable">False</property>
+				  <property name="xalign">0</property>
+				  <property name="yalign">0.5</property>
+				  <property name="xpad">0</property>
+				  <property name="ypad">0</property>
+				  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+				  <property name="width_chars">-1</property>
+				  <property name="single_line_mode">False</property>
+				  <property name="angle">0</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">0</property>
+				  <property name="right_attach">1</property>
+				  <property name="top_attach">1</property>
+				  <property name="bottom_attach">2</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkLabel" id="label15">
+				  <property name="visible">True</property>
+				  <property name="label" translatable="yes">Max QP Step</property>
+				  <property name="use_underline">False</property>
+				  <property name="use_markup">False</property>
+				  <property name="justify">GTK_JUSTIFY_LEFT</property>
+				  <property name="wrap">False</property>
+				  <property name="selectable">False</property>
+				  <property name="xalign">0</property>
+				  <property name="yalign">0.5</property>
+				  <property name="xpad">0</property>
+				  <property name="ypad">0</property>
+				  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+				  <property name="width_chars">-1</property>
+				  <property name="single_line_mode">False</property>
+				  <property name="angle">0</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">0</property>
+				  <property name="right_attach">1</property>
+				  <property name="top_attach">2</property>
+				  <property name="bottom_attach">3</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkSpinButton" id="spinbuttonMinQp">
+				  <property name="width_request">54</property>
+				  <property name="visible">True</property>
+				  <property name="tooltip" translatable="yes">Enforce a minimum quantizer level</property>
+				  <property name="can_focus">True</property>
+				  <property name="climb_rate">1</property>
+				  <property name="digits">0</property>
+				  <property name="numeric">True</property>
+				  <property name="update_policy">GTK_UPDATE_ALWAYS</property>
+				  <property name="snap_to_ticks">False</property>
+				  <property name="wrap">False</property>
+				  <property name="adjustment">10 10 51 1 10 10</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">1</property>
+				  <property name="right_attach">2</property>
+				  <property name="top_attach">0</property>
+				  <property name="bottom_attach">1</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkSpinButton" id="spinbuttonMaxQp">
+				  <property name="visible">True</property>
+				  <property name="tooltip" translatable="yes">Enforce a maximum quantizer level</property>
+				  <property name="can_focus">True</property>
+				  <property name="climb_rate">1</property>
+				  <property name="digits">0</property>
+				  <property name="numeric">True</property>
+				  <property name="update_policy">GTK_UPDATE_ALWAYS</property>
+				  <property name="snap_to_ticks">False</property>
+				  <property name="wrap">False</property>
+				  <property name="adjustment">51 10 51 1 10 10</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">1</property>
+				  <property name="right_attach">2</property>
+				  <property name="top_attach">1</property>
+				  <property name="bottom_attach">2</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkSpinButton" id="spinbuttonQpStep">
+				  <property name="visible">True</property>
+				  <property name="tooltip" translatable="yes">Define how much the quantizer rate can change between two consecutive frames</property>
+				  <property name="can_focus">True</property>
+				  <property name="climb_rate">1</property>
+				  <property name="digits">0</property>
+				  <property name="numeric">True</property>
+				  <property name="update_policy">GTK_UPDATE_ALWAYS</property>
+				  <property name="snap_to_ticks">False</property>
+				  <property name="wrap">False</property>
+				  <property name="adjustment">4 0 10 1 10 10</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">1</property>
+				  <property name="right_attach">2</property>
+				  <property name="top_attach">2</property>
+				  <property name="bottom_attach">3</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+			    </widget>
+			  </child>
+			</widget>
+		      </child>
+
+		      <child>
+			<widget class="GtkLabel" id="label8">
+			  <property name="visible">True</property>
+			  <property name="label" translatable="yes">&lt;b&gt;Quantization Limits&lt;/b&gt;</property>
+			  <property name="use_underline">False</property>
+			  <property name="use_markup">True</property>
+			  <property name="justify">GTK_JUSTIFY_LEFT</property>
+			  <property name="wrap">False</property>
+			  <property name="selectable">False</property>
+			  <property name="xalign">0.5</property>
+			  <property name="yalign">0.5</property>
+			  <property name="xpad">0</property>
+			  <property name="ypad">0</property>
+			  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+			  <property name="width_chars">-1</property>
+			  <property name="single_line_mode">False</property>
+			  <property name="angle">0</property>
+			</widget>
+			<packing>
+			  <property name="type">label_item</property>
+			</packing>
+		      </child>
+		    </widget>
+		    <packing>
+		      <property name="padding">1</property>
+		      <property name="expand">False</property>
+		      <property name="fill">True</property>
+		    </packing>
+		  </child>
+
+		  <child>
+		    <widget class="GtkFrame" id="frame3">
+		      <property name="visible">True</property>
+		      <property name="label_xalign">0</property>
+		      <property name="label_yalign">0.5</property>
+		      <property name="shadow_type">GTK_SHADOW_ETCHED_IN</property>
+
+		      <child>
+			<widget class="GtkAlignment" id="alignment3">
+			  <property name="visible">True</property>
+			  <property name="xalign">0.5</property>
+			  <property name="yalign">0.5</property>
+			  <property name="xscale">1</property>
+			  <property name="yscale">1</property>
+			  <property name="top_padding">7</property>
+			  <property name="bottom_padding">7</property>
+			  <property name="left_padding">7</property>
+			  <property name="right_padding">7</property>
+
+			  <child>
+			    <widget class="GtkTable" id="table4">
+			      <property name="visible">True</property>
+			      <property name="n_rows">3</property>
+			      <property name="n_columns">2</property>
+			      <property name="homogeneous">False</property>
+			      <property name="row_spacing">3</property>
+			      <property name="column_spacing">10</property>
+
+			      <child>
+				<widget class="GtkSpinButton" id="spinbuttonSceneCut">
+				  <property name="width_request">115</property>
+				  <property name="visible">True</property>
+				  <property name="tooltip" translatable="yes">Increase / decrease sensitivity for detecting scene changes. Improves I-frame usage and quality.</property>
+				  <property name="can_focus">True</property>
+				  <property name="climb_rate">1</property>
+				  <property name="digits">0</property>
+				  <property name="numeric">True</property>
+				  <property name="update_policy">GTK_UPDATE_ALWAYS</property>
+				  <property name="snap_to_ticks">False</property>
+				  <property name="wrap">False</property>
+				  <property name="adjustment">40 0 100 1 10 10</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">1</property>
+				  <property name="right_attach">2</property>
+				  <property name="top_attach">0</property>
+				  <property name="bottom_attach">1</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkLabel" id="label16">
+				  <property name="visible">True</property>
+				  <property name="label" translatable="yes">Scene Cut Threshold</property>
+				  <property name="use_underline">False</property>
+				  <property name="use_markup">False</property>
+				  <property name="justify">GTK_JUSTIFY_LEFT</property>
+				  <property name="wrap">False</property>
+				  <property name="selectable">False</property>
+				  <property name="xalign">0</property>
+				  <property name="yalign">0.5</property>
+				  <property name="xpad">0</property>
+				  <property name="ypad">0</property>
+				  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+				  <property name="width_chars">-1</property>
+				  <property name="single_line_mode">False</property>
+				  <property name="angle">0</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">0</property>
+				  <property name="right_attach">1</property>
+				  <property name="top_attach">0</property>
+				  <property name="bottom_attach">1</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkLabel" id="label17">
+				  <property name="visible">True</property>
+				  <property name="label" translatable="yes">Min IDR Frame Interval</property>
+				  <property name="use_underline">False</property>
+				  <property name="use_markup">False</property>
+				  <property name="justify">GTK_JUSTIFY_LEFT</property>
+				  <property name="wrap">False</property>
+				  <property name="selectable">False</property>
+				  <property name="xalign">0</property>
+				  <property name="yalign">0.5</property>
+				  <property name="xpad">0</property>
+				  <property name="ypad">0</property>
+				  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+				  <property name="width_chars">-1</property>
+				  <property name="single_line_mode">False</property>
+				  <property name="angle">0</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">0</property>
+				  <property name="right_attach">1</property>
+				  <property name="top_attach">1</property>
+				  <property name="bottom_attach">2</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkSpinButton" id="spinbuttonMinIdr">
+				  <property name="visible">True</property>
+				  <property name="tooltip" translatable="yes">Set minimum frame interval between IDR frames. Defines the minimum amount a frame can be reused and referenced by other frames before a new IDR frame is established.</property>
+				  <property name="can_focus">True</property>
+				  <property name="climb_rate">1</property>
+				  <property name="digits">0</property>
+				  <property name="numeric">True</property>
+				  <property name="update_policy">GTK_UPDATE_ALWAYS</property>
+				  <property name="snap_to_ticks">False</property>
+				  <property name="wrap">False</property>
+				  <property name="adjustment">25 0 100 1 10 10</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">1</property>
+				  <property name="right_attach">2</property>
+				  <property name="top_attach">1</property>
+				  <property name="bottom_attach">2</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkSpinButton" id="spinbuttonMaxIdr">
+				  <property name="visible">True</property>
+				  <property name="tooltip" translatable="yes">Set maximum frame interval between IDR frames. Defines the maximum amount a frame can be reused and referenced by other frames before a new IDR frame is established.</property>
+				  <property name="can_focus">True</property>
+				  <property name="climb_rate">1</property>
+				  <property name="digits">0</property>
+				  <property name="numeric">True</property>
+				  <property name="update_policy">GTK_UPDATE_ALWAYS</property>
+				  <property name="snap_to_ticks">False</property>
+				  <property name="wrap">False</property>
+				  <property name="adjustment">250 1 1000 1 10 10</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">1</property>
+				  <property name="right_attach">2</property>
+				  <property name="top_attach">2</property>
+				  <property name="bottom_attach">3</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkLabel" id="label18">
+				  <property name="visible">True</property>
+				  <property name="label" translatable="yes">Max IDR Frame Interval</property>
+				  <property name="use_underline">False</property>
+				  <property name="use_markup">False</property>
+				  <property name="justify">GTK_JUSTIFY_LEFT</property>
+				  <property name="wrap">False</property>
+				  <property name="selectable">False</property>
+				  <property name="xalign">0</property>
+				  <property name="yalign">0.5</property>
+				  <property name="xpad">0</property>
+				  <property name="ypad">0</property>
+				  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+				  <property name="width_chars">-1</property>
+				  <property name="single_line_mode">False</property>
+				  <property name="angle">0</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">0</property>
+				  <property name="right_attach">1</property>
+				  <property name="top_attach">2</property>
+				  <property name="bottom_attach">3</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+			    </widget>
+			  </child>
+			</widget>
+		      </child>
+
+		      <child>
+			<widget class="GtkLabel" id="labelMoreEncodingSettings">
+			  <property name="visible">True</property>
+			  <property name="label" translatable="yes">&lt;b&gt;More Rate Settings&lt;/b&gt;</property>
+			  <property name="use_underline">False</property>
+			  <property name="use_markup">True</property>
+			  <property name="justify">GTK_JUSTIFY_LEFT</property>
+			  <property name="wrap">False</property>
+			  <property name="selectable">False</property>
+			  <property name="xalign">0.5</property>
+			  <property name="yalign">0.5</property>
+			  <property name="xpad">0</property>
+			  <property name="ypad">0</property>
+			  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+			  <property name="width_chars">-1</property>
+			  <property name="single_line_mode">False</property>
+			  <property name="angle">0</property>
+			</widget>
+			<packing>
+			  <property name="type">label_item</property>
+			</packing>
+		      </child>
+		    </widget>
+		    <packing>
+		      <property name="padding">1</property>
+		      <property name="expand">False</property>
+		      <property name="fill">True</property>
+		    </packing>
+		  </child>
+
+		  <child>
+		    <widget class="GtkFrame" id="frameVideoBufferVerifier">
+		      <property name="visible">True</property>
+		      <property name="label_xalign">0</property>
+		      <property name="label_yalign">0.5</property>
+		      <property name="shadow_type">GTK_SHADOW_ETCHED_IN</property>
+
+		      <child>
+			<widget class="GtkAlignment" id="alignment11">
+			  <property name="visible">True</property>
+			  <property name="xalign">0.5</property>
+			  <property name="yalign">0.5</property>
+			  <property name="xscale">1</property>
+			  <property name="yscale">1</property>
+			  <property name="top_padding">7</property>
+			  <property name="bottom_padding">7</property>
+			  <property name="left_padding">7</property>
+			  <property name="right_padding">7</property>
+
+			  <child>
+			    <widget class="GtkTable" id="table12">
+			      <property name="visible">True</property>
+			      <property name="n_rows">3</property>
+			      <property name="n_columns">2</property>
+			      <property name="homogeneous">False</property>
+			      <property name="row_spacing">3</property>
+			      <property name="column_spacing">10</property>
+
+			      <child>
+				<widget class="GtkLabel" id="labelVBVBufferSize">
+				  <property name="visible">True</property>
+				  <property name="label" translatable="yes">VBV Buffer Size</property>
+				  <property name="use_underline">False</property>
+				  <property name="use_markup">False</property>
+				  <property name="justify">GTK_JUSTIFY_LEFT</property>
+				  <property name="wrap">False</property>
+				  <property name="selectable">False</property>
+				  <property name="xalign">0</property>
+				  <property name="yalign">0.5</property>
+				  <property name="xpad">0</property>
+				  <property name="ypad">0</property>
+				  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+				  <property name="width_chars">-1</property>
+				  <property name="single_line_mode">False</property>
+				  <property name="angle">0</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">0</property>
+				  <property name="right_attach">1</property>
+				  <property name="top_attach">1</property>
+				  <property name="bottom_attach">2</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkLabel" id="labelVBVInitialbuffer">
+				  <property name="visible">True</property>
+				  <property name="label" translatable="yes">Initial VBV Buffer (%)</property>
+				  <property name="use_underline">False</property>
+				  <property name="use_markup">False</property>
+				  <property name="justify">GTK_JUSTIFY_LEFT</property>
+				  <property name="wrap">False</property>
+				  <property name="selectable">False</property>
+				  <property name="xalign">0</property>
+				  <property name="yalign">0.5</property>
+				  <property name="xpad">0</property>
+				  <property name="ypad">0</property>
+				  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+				  <property name="width_chars">-1</property>
+				  <property name="single_line_mode">False</property>
+				  <property name="angle">0</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">0</property>
+				  <property name="right_attach">1</property>
+				  <property name="top_attach">2</property>
+				  <property name="bottom_attach">3</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkLabel" id="labelVBVMaximumBitrate">
+				  <property name="visible">True</property>
+				  <property name="label" translatable="yes">Maximum Local Bitrate</property>
+				  <property name="use_underline">False</property>
+				  <property name="use_markup">False</property>
+				  <property name="justify">GTK_JUSTIFY_LEFT</property>
+				  <property name="wrap">False</property>
+				  <property name="selectable">False</property>
+				  <property name="xalign">0</property>
+				  <property name="yalign">0.5</property>
+				  <property name="xpad">0</property>
+				  <property name="ypad">0</property>
+				  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+				  <property name="width_chars">-1</property>
+				  <property name="single_line_mode">False</property>
+				  <property name="angle">0</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">0</property>
+				  <property name="right_attach">1</property>
+				  <property name="top_attach">0</property>
+				  <property name="bottom_attach">1</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkSpinButton" id="spinbuttonvbv_max_bitrate">
+				  <property name="visible">True</property>
+				  <property name="can_focus">True</property>
+				  <property name="climb_rate">1</property>
+				  <property name="digits">0</property>
+				  <property name="numeric">True</property>
+				  <property name="update_policy">GTK_UPDATE_ALWAYS</property>
+				  <property name="snap_to_ticks">False</property>
+				  <property name="wrap">False</property>
+				  <property name="adjustment">0 0 99999 1 10 10</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">1</property>
+				  <property name="right_attach">2</property>
+				  <property name="top_attach">0</property>
+				  <property name="bottom_attach">1</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkSpinButton" id="spinbuttonvbv_buffer_size">
+				  <property name="visible">True</property>
+				  <property name="can_focus">True</property>
+				  <property name="climb_rate">1</property>
+				  <property name="digits">0</property>
+				  <property name="numeric">True</property>
+				  <property name="update_policy">GTK_UPDATE_ALWAYS</property>
+				  <property name="snap_to_ticks">False</property>
+				  <property name="wrap">False</property>
+				  <property name="adjustment">0 0 99999 1 10 10</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">1</property>
+				  <property name="right_attach">2</property>
+				  <property name="top_attach">1</property>
+				  <property name="bottom_attach">2</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkSpinButton" id="spinbuttonvbv_buffer_init">
+				  <property name="visible">True</property>
+				  <property name="can_focus">True</property>
+				  <property name="climb_rate">1</property>
+				  <property name="digits">0</property>
+				  <property name="numeric">True</property>
+				  <property name="update_policy">GTK_UPDATE_ALWAYS</property>
+				  <property name="snap_to_ticks">False</property>
+				  <property name="wrap">False</property>
+				  <property name="adjustment">90 0 100 1 10 10</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">1</property>
+				  <property name="right_attach">2</property>
+				  <property name="top_attach">2</property>
+				  <property name="bottom_attach">3</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+			    </widget>
+			  </child>
+			</widget>
+		      </child>
+
+		      <child>
+			<widget class="GtkLabel" id="labelVideoBufferVerifier">
+			  <property name="visible">True</property>
+			  <property name="label" translatable="yes">&lt;b&gt;Video Buffer Verifier&lt;/b&gt;</property>
+			  <property name="use_underline">False</property>
+			  <property name="use_markup">True</property>
+			  <property name="justify">GTK_JUSTIFY_LEFT</property>
+			  <property name="wrap">False</property>
+			  <property name="selectable">False</property>
+			  <property name="xalign">0.5</property>
+			  <property name="yalign">0.5</property>
+			  <property name="xpad">0</property>
+			  <property name="ypad">0</property>
+			  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+			  <property name="width_chars">-1</property>
+			  <property name="single_line_mode">False</property>
+			  <property name="angle">0</property>
+			</widget>
+			<packing>
+			  <property name="type">label_item</property>
+			</packing>
+		      </child>
+		    </widget>
+		    <packing>
+		      <property name="padding">0</property>
+		      <property name="expand">False</property>
+		      <property name="fill">True</property>
+		    </packing>
+		  </child>
+		</widget>
+	      </child>
+	    </widget>
+	    <packing>
+	      <property name="tab_expand">False</property>
+	      <property name="tab_fill">True</property>
+	    </packing>
+	  </child>
+
+	  <child>
+	    <widget class="GtkLabel" id="labelPageRateControl">
+	      <property name="visible">True</property>
+	      <property name="label" translatable="yes">Rate Control</property>
+	      <property name="use_underline">False</property>
+	      <property name="use_markup">False</property>
+	      <property name="justify">GTK_JUSTIFY_LEFT</property>
+	      <property name="wrap">False</property>
+	      <property name="selectable">False</property>
+	      <property name="xalign">0.5</property>
+	      <property name="yalign">0.5</property>
+	      <property name="xpad">0</property>
+	      <property name="ypad">0</property>
+	      <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+	      <property name="width_chars">-1</property>
+	      <property name="single_line_mode">False</property>
+	      <property name="angle">0</property>
+	    </widget>
+	    <packing>
+	      <property name="type">tab</property>
+	    </packing>
+	  </child>
+
+	  <child>
+	    <widget class="GtkAlignment" id="alignment18">
+	      <property name="visible">True</property>
+	      <property name="xalign">0.5</property>
+	      <property name="yalign">0.5</property>
+	      <property name="xscale">1</property>
+	      <property name="yscale">1</property>
+	      <property name="top_padding">7</property>
+	      <property name="bottom_padding">7</property>
+	      <property name="left_padding">7</property>
+	      <property name="right_padding">7</property>
+
+	      <child>
+		<widget class="GtkVBox" id="vbox8">
+		  <property name="visible">True</property>
+		  <property name="homogeneous">False</property>
+		  <property name="spacing">3</property>
+
+		  <child>
+		    <widget class="GtkFrame" id="frame10">
+		      <property name="visible">True</property>
+		      <property name="label_xalign">0</property>
+		      <property name="label_yalign">0.5</property>
+		      <property name="shadow_type">GTK_SHADOW_ETCHED_IN</property>
+
+		      <child>
+			<widget class="GtkAlignment" id="alignment10">
+			  <property name="visible">True</property>
+			  <property name="xalign">0.5</property>
+			  <property name="yalign">0.5</property>
+			  <property name="xscale">1</property>
+			  <property name="yscale">1</property>
+			  <property name="top_padding">7</property>
+			  <property name="bottom_padding">7</property>
+			  <property name="left_padding">7</property>
+			  <property name="right_padding">7</property>
+
+			  <child>
+			    <widget class="GtkTable" id="table15">
+			      <property name="visible">True</property>
+			      <property name="n_rows">4</property>
+			      <property name="n_columns">2</property>
+			      <property name="homogeneous">False</property>
+			      <property name="row_spacing">3</property>
+			      <property name="column_spacing">10</property>
+
+			      <child>
+				<widget class="GtkLabel" id="labelBitrateVariance">
+				  <property name="visible">True</property>
+				  <property name="label" translatable="yes">Bitrate Variance</property>
+				  <property name="use_underline">False</property>
+				  <property name="use_markup">False</property>
+				  <property name="justify">GTK_JUSTIFY_LEFT</property>
+				  <property name="wrap">False</property>
+				  <property name="selectable">False</property>
+				  <property name="xalign">0</property>
+				  <property name="yalign">0.5</property>
+				  <property name="xpad">0</property>
+				  <property name="ypad">0</property>
+				  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+				  <property name="width_chars">-1</property>
+				  <property name="single_line_mode">False</property>
+				  <property name="angle">0</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">0</property>
+				  <property name="right_attach">1</property>
+				  <property name="top_attach">0</property>
+				  <property name="bottom_attach">1</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkSpinButton" id="spinbuttonBitrateVariance">
+				  <property name="visible">True</property>
+				  <property name="tooltip" translatable="yes">Allowed variance of average bitrate. Lower values mean less variance. Higher values mean more variance.</property>
+				  <property name="can_focus">True</property>
+				  <property name="climb_rate">0.10000000149</property>
+				  <property name="digits">1</property>
+				  <property name="numeric">True</property>
+				  <property name="update_policy">GTK_UPDATE_ALWAYS</property>
+				  <property name="snap_to_ticks">False</property>
+				  <property name="wrap">False</property>
+				  <property name="adjustment">1 0 1 0.10000000149 10 10</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">1</property>
+				  <property name="right_attach">2</property>
+				  <property name="top_attach">0</property>
+				  <property name="bottom_attach">1</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkSpinButton" id="spinbuttonQuantizerCompression">
+				  <property name="visible">True</property>
+				  <property name="tooltip" translatable="yes">Allowed variance of average quantizer or quality. Lower values mean less variance. Higher values mean more variance. Note that 0 means constant quality while 1 means constant fluctuation. Recommended 0.6.</property>
+				  <property name="can_focus">True</property>
+				  <property name="climb_rate">0.10000000149</property>
+				  <property name="digits">1</property>
+				  <property name="numeric">True</property>
+				  <property name="update_policy">GTK_UPDATE_ALWAYS</property>
+				  <property name="snap_to_ticks">False</property>
+				  <property name="wrap">False</property>
+				  <property name="adjustment">0.600000023842 0 1 0.10000000149 10 10</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">1</property>
+				  <property name="right_attach">2</property>
+				  <property name="top_attach">1</property>
+				  <property name="bottom_attach">2</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkSpinButton" id="spinbuttonTempBlurFrame">
+				  <property name="visible">True</property>
+				  <property name="tooltip" translatable="yes">Reduced fluctuations in Quantizer (before curve compression)</property>
+				  <property name="can_focus">True</property>
+				  <property name="climb_rate">1</property>
+				  <property name="digits">0</property>
+				  <property name="numeric">True</property>
+				  <property name="update_policy">GTK_UPDATE_ALWAYS</property>
+				  <property name="snap_to_ticks">False</property>
+				  <property name="wrap">False</property>
+				  <property name="adjustment">20 0 999 1 10 10</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">1</property>
+				  <property name="right_attach">2</property>
+				  <property name="top_attach">2</property>
+				  <property name="bottom_attach">3</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkSpinButton" id="spinbuttonTempBlurQuant">
+				  <property name="visible">True</property>
+				  <property name="can_focus">True</property>
+				  <property name="climb_rate">0.5</property>
+				  <property name="digits">1</property>
+				  <property name="numeric">True</property>
+				  <property name="update_policy">GTK_UPDATE_ALWAYS</property>
+				  <property name="snap_to_ticks">False</property>
+				  <property name="wrap">False</property>
+				  <property name="adjustment">0.5 0 1 0.5 10 10</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">1</property>
+				  <property name="right_attach">2</property>
+				  <property name="top_attach">3</property>
+				  <property name="bottom_attach">4</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkLabel" id="labelQuantizerCompression">
+				  <property name="visible">True</property>
+				  <property name="label" translatable="yes">Quantizer Compression</property>
+				  <property name="use_underline">False</property>
+				  <property name="use_markup">False</property>
+				  <property name="justify">GTK_JUSTIFY_LEFT</property>
+				  <property name="wrap">False</property>
+				  <property name="selectable">False</property>
+				  <property name="xalign">0</property>
+				  <property name="yalign">0.5</property>
+				  <property name="xpad">0</property>
+				  <property name="ypad">0</property>
+				  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+				  <property name="width_chars">-1</property>
+				  <property name="single_line_mode">False</property>
+				  <property name="angle">0</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">0</property>
+				  <property name="right_attach">1</property>
+				  <property name="top_attach">1</property>
+				  <property name="bottom_attach">2</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkLabel" id="labelTempBlurEstFrame">
+				  <property name="visible">True</property>
+				  <property name="label" translatable="yes">Temp. Blur of Est. Frame Complexity</property>
+				  <property name="use_underline">False</property>
+				  <property name="use_markup">False</property>
+				  <property name="justify">GTK_JUSTIFY_LEFT</property>
+				  <property name="wrap">False</property>
+				  <property name="selectable">False</property>
+				  <property name="xalign">0</property>
+				  <property name="yalign">0.5</property>
+				  <property name="xpad">0</property>
+				  <property name="ypad">0</property>
+				  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+				  <property name="width_chars">-1</property>
+				  <property name="single_line_mode">False</property>
+				  <property name="angle">0</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">0</property>
+				  <property name="right_attach">1</property>
+				  <property name="top_attach">2</property>
+				  <property name="bottom_attach">3</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkLabel" id="labelTempBlueQuant">
+				  <property name="visible">True</property>
+				  <property name="label" translatable="yes">Temp. Blur of Quant. after CC</property>
+				  <property name="use_underline">False</property>
+				  <property name="use_markup">False</property>
+				  <property name="justify">GTK_JUSTIFY_LEFT</property>
+				  <property name="wrap">False</property>
+				  <property name="selectable">False</property>
+				  <property name="xalign">0</property>
+				  <property name="yalign">0.5</property>
+				  <property name="xpad">0</property>
+				  <property name="ypad">0</property>
+				  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+				  <property name="width_chars">-1</property>
+				  <property name="single_line_mode">False</property>
+				  <property name="angle">0</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">0</property>
+				  <property name="right_attach">1</property>
+				  <property name="top_attach">3</property>
+				  <property name="bottom_attach">4</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+			    </widget>
+			  </child>
+			</widget>
+		      </child>
+
+		      <child>
+			<widget class="GtkLabel" id="labelMisc">
+			  <property name="visible">True</property>
+			  <property name="label" translatable="yes">&lt;b&gt;Misc&lt;/b&gt;</property>
+			  <property name="use_underline">False</property>
+			  <property name="use_markup">True</property>
+			  <property name="justify">GTK_JUSTIFY_LEFT</property>
+			  <property name="wrap">False</property>
+			  <property name="selectable">False</property>
+			  <property name="xalign">0.5</property>
+			  <property name="yalign">0.5</property>
+			  <property name="xpad">0</property>
+			  <property name="ypad">0</property>
+			  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+			  <property name="width_chars">-1</property>
+			  <property name="single_line_mode">False</property>
+			  <property name="angle">0</property>
+			</widget>
+			<packing>
+			  <property name="type">label_item</property>
+			</packing>
+		      </child>
+		    </widget>
+		    <packing>
+		      <property name="padding">0</property>
+		      <property name="expand">False</property>
+		      <property name="fill">True</property>
+		    </packing>
+		  </child>
+
+		  <child>
+		    <widget class="GtkFrame" id="frame11">
+		      <property name="visible">True</property>
+		      <property name="label_xalign">0</property>
+		      <property name="label_yalign">0.5</property>
+		      <property name="shadow_type">GTK_SHADOW_ETCHED_IN</property>
+
+		      <child>
+			<widget class="GtkAlignment" id="alignment13">
+			  <property name="visible">True</property>
+			  <property name="xalign">0.5</property>
+			  <property name="yalign">0.5</property>
+			  <property name="xscale">1</property>
+			  <property name="yscale">1</property>
+			  <property name="top_padding">7</property>
+			  <property name="bottom_padding">7</property>
+			  <property name="left_padding">7</property>
+			  <property name="right_padding">7</property>
+
+			  <child>
+			    <widget class="GtkTable" id="table16">
+			      <property name="visible">True</property>
+			      <property name="n_rows">3</property>
+			      <property name="n_columns">2</property>
+			      <property name="homogeneous">False</property>
+			      <property name="row_spacing">3</property>
+			      <property name="column_spacing">10</property>
+
+			      <child>
+				<widget class="GtkSpinButton" id="spinbutton8">
+				  <property name="visible">True</property>
+				  <property name="tooltip" translatable="yes">Quantization factors used between I and P-frames</property>
+				  <property name="can_focus">True</property>
+				  <property name="climb_rate">0.10000000149</property>
+				  <property name="digits">1</property>
+				  <property name="numeric">True</property>
+				  <property name="update_policy">GTK_UPDATE_ALWAYS</property>
+				  <property name="snap_to_ticks">False</property>
+				  <property name="wrap">False</property>
+				  <property name="adjustment">1.39999997616 1 10 0.10000000149 10 10</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">1</property>
+				  <property name="right_attach">2</property>
+				  <property name="top_attach">0</property>
+				  <property name="bottom_attach">1</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkSpinButton" id="spinbutton9">
+				  <property name="visible">True</property>
+				  <property name="tooltip" translatable="yes">Quantization used between P and B-frames</property>
+				  <property name="can_focus">True</property>
+				  <property name="climb_rate">0.10000000149</property>
+				  <property name="digits">1</property>
+				  <property name="numeric">True</property>
+				  <property name="update_policy">GTK_UPDATE_ALWAYS</property>
+				  <property name="snap_to_ticks">False</property>
+				  <property name="wrap">False</property>
+				  <property name="adjustment">1.29999995232 1 10 0.10000000149 10 10</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">1</property>
+				  <property name="right_attach">2</property>
+				  <property name="top_attach">1</property>
+				  <property name="bottom_attach">2</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkSpinButton" id="spinbuttonChromaQPOffset">
+				  <property name="visible">True</property>
+				  <property name="tooltip" translatable="yes">Quantization difference between chroma (color) and luma (brightness)</property>
+				  <property name="can_focus">True</property>
+				  <property name="climb_rate">1</property>
+				  <property name="digits">0</property>
+				  <property name="numeric">True</property>
+				  <property name="update_policy">GTK_UPDATE_ALWAYS</property>
+				  <property name="snap_to_ticks">False</property>
+				  <property name="wrap">False</property>
+				  <property name="adjustment">0 -12 12 1 10 10</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">1</property>
+				  <property name="right_attach">2</property>
+				  <property name="top_attach">2</property>
+				  <property name="bottom_attach">3</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkLabel" id="labelFactorbetweenIandP">
+				  <property name="visible">True</property>
+				  <property name="label" translatable="yes">Factor between I and P-frame Quants</property>
+				  <property name="use_underline">False</property>
+				  <property name="use_markup">False</property>
+				  <property name="justify">GTK_JUSTIFY_LEFT</property>
+				  <property name="wrap">False</property>
+				  <property name="selectable">False</property>
+				  <property name="xalign">0</property>
+				  <property name="yalign">0.5</property>
+				  <property name="xpad">0</property>
+				  <property name="ypad">0</property>
+				  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+				  <property name="width_chars">-1</property>
+				  <property name="single_line_mode">False</property>
+				  <property name="angle">0</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">0</property>
+				  <property name="right_attach">1</property>
+				  <property name="top_attach">0</property>
+				  <property name="bottom_attach">1</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkLabel" id="labelFactorbetweenPandB">
+				  <property name="visible">True</property>
+				  <property name="label" translatable="yes">Factor between P and B-frame Quants</property>
+				  <property name="use_underline">False</property>
+				  <property name="use_markup">False</property>
+				  <property name="justify">GTK_JUSTIFY_LEFT</property>
+				  <property name="wrap">False</property>
+				  <property name="selectable">False</property>
+				  <property name="xalign">0</property>
+				  <property name="yalign">0.5</property>
+				  <property name="xpad">0</property>
+				  <property name="ypad">0</property>
+				  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+				  <property name="width_chars">-1</property>
+				  <property name="single_line_mode">False</property>
+				  <property name="angle">0</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">0</property>
+				  <property name="right_attach">1</property>
+				  <property name="top_attach">1</property>
+				  <property name="bottom_attach">2</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkLabel" id="labelChromaQPOffset">
+				  <property name="visible">True</property>
+				  <property name="label" translatable="yes">Chroma QP Offset</property>
+				  <property name="use_underline">False</property>
+				  <property name="use_markup">False</property>
+				  <property name="justify">GTK_JUSTIFY_LEFT</property>
+				  <property name="wrap">False</property>
+				  <property name="selectable">False</property>
+				  <property name="xalign">0</property>
+				  <property name="yalign">0.5</property>
+				  <property name="xpad">0</property>
+				  <property name="ypad">0</property>
+				  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+				  <property name="width_chars">-1</property>
+				  <property name="single_line_mode">False</property>
+				  <property name="angle">0</property>
+				</widget>
+				<packing>
+				  <property name="left_attach">0</property>
+				  <property name="right_attach">1</property>
+				  <property name="top_attach">2</property>
+				  <property name="bottom_attach">3</property>
+				  <property name="x_options">fill</property>
+				  <property name="y_options"></property>
+				</packing>
+			      </child>
+			    </widget>
+			  </child>
+			</widget>
+		      </child>
+
+		      <child>
+			<widget class="GtkLabel" id="labelQuantizers">
+			  <property name="visible">True</property>
+			  <property name="label" translatable="yes">&lt;b&gt;Quantizers&lt;/b&gt;</property>
+			  <property name="use_underline">False</property>
+			  <property name="use_markup">True</property>
+			  <property name="justify">GTK_JUSTIFY_LEFT</property>
+			  <property name="wrap">False</property>
+			  <property name="selectable">False</property>
+			  <property name="xalign">0.5</property>
+			  <property name="yalign">0.5</property>
+			  <property name="xpad">0</property>
+			  <property name="ypad">0</property>
+			  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+			  <property name="width_chars">-1</property>
+			  <property name="single_line_mode">False</property>
+			  <property name="angle">0</property>
+			</widget>
+			<packing>
+			  <property name="type">label_item</property>
+			</packing>
+		      </child>
+		    </widget>
+		    <packing>
+		      <property name="padding">0</property>
+		      <property name="expand">False</property>
+		      <property name="fill">True</property>
+		    </packing>
+		  </child>
+
+		  <child>
+		    <widget class="GtkFrame" id="frame9">
+		      <property name="visible">True</property>
+		      <property name="label_xalign">0</property>
+		      <property name="label_yalign">0.5</property>
+		      <property name="shadow_type">GTK_SHADOW_ETCHED_IN</property>
+
+		      <child>
+			<widget class="GtkAlignment" id="alignment9">
+			  <property name="visible">True</property>
+			  <property name="xalign">0.5</property>
+			  <property name="yalign">0.5</property>
+			  <property name="xscale">1</property>
+			  <property name="yscale">1</property>
+			  <property name="top_padding">7</property>
+			  <property name="bottom_padding">7</property>
+			  <property name="left_padding">7</property>
+			  <property name="right_padding">7</property>
+
+			  <child>
+			    <widget class="GtkVBox" id="vbox9">
+			      <property name="visible">True</property>
+			      <property name="homogeneous">False</property>
+			      <property name="spacing">3</property>
+
+			      <child>
+				<widget class="GtkRadioButton" id="radiobuttonFlatmatrix">
+				  <property name="visible">True</property>
+				  <property name="can_focus">True</property>
+				  <property name="label" translatable="yes">Flat Matrix</property>
+				  <property name="use_underline">True</property>
+				  <property name="relief">GTK_RELIEF_NORMAL</property>
+				  <property name="focus_on_click">True</property>
+				  <property name="active">True</property>
+				  <property name="inconsistent">False</property>
+				  <property name="draw_indicator">True</property>
+				</widget>
+				<packing>
+				  <property name="padding">0</property>
+				  <property name="expand">False</property>
+				  <property name="fill">False</property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkRadioButton" id="radiobuttonJVTmatrix">
+				  <property name="visible">True</property>
+				  <property name="can_focus">True</property>
+				  <property name="label" translatable="yes">JVT Matrix</property>
+				  <property name="use_underline">True</property>
+				  <property name="relief">GTK_RELIEF_NORMAL</property>
+				  <property name="focus_on_click">True</property>
+				  <property name="active">False</property>
+				  <property name="inconsistent">False</property>
+				  <property name="draw_indicator">True</property>
+				  <property name="group">radiobuttonFlatmatrix</property>
+				</widget>
+				<packing>
+				  <property name="padding">0</property>
+				  <property name="expand">False</property>
+				  <property name="fill">False</property>
+				</packing>
+			      </child>
+
+			      <child>
+				<widget class="GtkHBox" id="hbox13">
+				  <property name="visible">True</property>
+				  <property name="homogeneous">False</property>
+				  <property name="spacing">10</property>
+
+				  <child>
+				    <widget class="GtkRadioButton" id="radiobuttonCustommatrix">
+				      <property name="visible">True</property>
+				      <property name="can_focus">True</property>
+				      <property name="label" translatable="yes">Custom Matrix</property>
+				      <property name="use_underline">True</property>
+				      <property name="relief">GTK_RELIEF_NORMAL</property>
+				      <property name="focus_on_click">True</property>
+				      <property name="active">False</property>
+				      <property name="inconsistent">False</property>
+				      <property name="draw_indicator">True</property>
+				      <property name="group">radiobuttonFlatmatrix</property>
+				    </widget>
+				    <packing>
+				      <property name="padding">0</property>
+				      <property name="expand">True</property>
+				      <property name="fill">True</property>
+				    </packing>
+				  </child>
+
+				  <child>
+				    <widget class="GtkHBox" id="hbox14">
+				      <property name="visible">True</property>
+				      <property name="homogeneous">False</property>
+				      <property name="spacing">0</property>
+
+				      <child>
+					<widget class="GtkFileChooserButton" id="filechooserbuttonOpenCQMFile">
+					  <property name="visible">True</property>
+					  <property name="title" translatable="yes">Open CQM file</property>
+					  <property name="action">GTK_FILE_CHOOSER_ACTION_OPEN</property>
+					  <property name="local_only">True</property>
+					  <property name="show_hidden">False</property>
+					  <property name="width_chars">-1</property>
+					</widget>
+					<packing>
+					  <property name="padding">0</property>
+					  <property name="expand">True</property>
+					  <property name="fill">True</property>
+					</packing>
+				      </child>
+
+				      <child>
+					<widget class="GtkVSeparator" id="vseparator1">
+					  <property name="visible">True</property>
+					</widget>
+					<packing>
+					  <property name="padding">0</property>
+					  <property name="expand">True</property>
+					  <property name="fill">True</property>
+					</packing>
+				      </child>
+
+				      <child>
+					<widget class="GtkButton" id="buttonEditCustomMatrix">
+					  <property name="visible">True</property>
+					  <property name="tooltip" translatable="yes">Edit loaded custom quantization matrix file</property>
+					  <property name="can_focus">True</property>
+					  <property name="label" translatable="yes">Edit Custom Matrix</property>
+					  <property name="use_underline">True</property>
+					  <property name="relief">GTK_RELIEF_NORMAL</property>
+					  <property name="focus_on_click">True</property>
+					</widget>
+					<packing>
+					  <property name="padding">0</property>
+					  <property name="expand">False</property>
+					  <property name="fill">False</property>
+					</packing>
+				      </child>
+				    </widget>
+				    <packing>
+				      <property name="padding">0</property>
+				      <property name="expand">True</property>
+				      <property name="fill">True</property>
+				    </packing>
+				  </child>
+				</widget>
+				<packing>
+				  <property name="padding">0</property>
+				  <property name="expand">False</property>
+				  <property name="fill">False</property>
+				</packing>
+			      </child>
+			    </widget>
+			  </child>
+			</widget>
+		      </child>
+
+		      <child>
+			<widget class="GtkLabel" id="labelFrameQuantizationMatrices">
+			  <property name="visible">True</property>
+			  <property name="label" translatable="yes">&lt;b&gt;Quantization Matrices&lt;/b&gt;</property>
+			  <property name="use_underline">False</property>
+			  <property name="use_markup">True</property>
+			  <property name="justify">GTK_JUSTIFY_LEFT</property>
+			  <property name="wrap">False</property>
+			  <property name="selectable">False</property>
+			  <property name="xalign">0.5</property>
+			  <property name="yalign">0.5</property>
+			  <property name="xpad">0</property>
+			  <property name="ypad">0</property>
+			  <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+			  <property name="width_chars">-1</property>
+			  <property name="single_line_mode">False</property>
+			  <property name="angle">0</property>
+			</widget>
+			<packing>
+			  <property name="type">label_item</property>
+			</packing>
+		      </child>
+		    </widget>
+		    <packing>
+		      <property name="padding">0</property>
+		      <property name="expand">False</property>
+		      <property name="fill">True</property>
+		    </packing>
+		  </child>
+		</widget>
+	      </child>
+	    </widget>
+	    <packing>
+	      <property name="tab_expand">False</property>
+	      <property name="tab_fill">True</property>
+	    </packing>
+	  </child>
+
+	  <child>
+	    <widget class="GtkLabel" id="labelMore">
+	      <property name="visible">True</property>
+	      <property name="label" translatable="yes">More</property>
+	      <property name="use_underline">False</property>
+	      <property name="use_markup">False</property>
+	      <property name="justify">GTK_JUSTIFY_LEFT</property>
+	      <property name="wrap">False</property>
+	      <property name="selectable">False</property>
+	      <property name="xalign">0.5</property>
+	      <property name="yalign">0.5</property>
+	      <property name="xpad">0</property>
+	      <property name="ypad">0</property>
+	      <property name="ellipsize">PANGO_ELLIPSIZE_NONE</property>
+	      <property name="width_chars">-1</property>
+	      <property name="single_line_mode">False</property>
+	      <property name="angle">0</property>
+	    </widget>
+	    <packing>
+	      <property name="type">tab</property>
+	    </packing>
+	  </child>
+	</widget>
+	<packing>
+	  <property name="padding">0</property>
+	  <property name="expand">True</property>
+	  <property name="fill">True</property>
+	</packing>
+      </child>
+    </widget>
+  </child>
+</widget>
+
+</glade-interface>

Added: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.h	2008-04-29 15:45:15 UTC (rev 3996)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.h	2008-04-29 23:58:16 UTC (rev 3997)
@@ -0,0 +1,22 @@
+#ifndef x264ConfigDialog_h
+#define x264ConfigDialog_h
+
+#include <gtk/gtk.h>
+
+#include "../options.h"
+
+extern "C"
+{
+#include "ADM_vidEnc_plugin.h"
+}
+
+static GtkWidget *create_dialog1(void);
+static int getCurrentEncodeMode(GtkWidget *dialog);
+static void updateMode(GtkWidget *dialog, int encodeMode, int encodeModeParameter);
+static void updateDeblockingFilter(GtkWidget *dialog);
+static int signalReceiver(GtkObject* object, gpointer user_data);
+static int entryTarget_changed(GtkObject* object, gpointer user_data);
+static void loadOptions(GtkWidget *dialog, x264Options *options);
+static void saveOptions(GtkWidget *dialog, x264Options *options);
+
+#endif	// x264ConfigDialog_h

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/options.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/options.cpp	2008-04-29 15:45:15 UTC (rev 3996)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/options.cpp	2008-04-29 23:58:16 UTC (rev 3997)
@@ -26,6 +26,8 @@
 {
 	x264_param_default(&_param);
 	_param.rc.psz_rc_eq = strdup(_param.rc.psz_rc_eq);
+	_param.vui.i_sar_height = 1;
+	_param.vui.i_sar_width = 1;
 
 	_sarAsInput = false;
 }

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/options.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/options.h	2008-04-29 15:45:15 UTC (rev 3996)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/options.h	2008-04-29 23:58:16 UTC (rev 3997)
@@ -22,8 +22,12 @@
 extern "C"
 {
 #include "x264.h"
+#include "ADM_vidEnc_plugin.h"
 }
 
+#define DEFAULT_ENCODE_MODE ADM_VIDENC_MODE_AQP
+#define DEFAULT_ENCODE_MODE_PARAMETER 26
+
 class x264Options
 {
 private:

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp	2008-04-29 15:45:15 UTC (rev 3996)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp	2008-04-29 23:58:16 UTC (rev 3997)
@@ -590,19 +590,16 @@
 	options->setFullRangeSamples(ui.fullRangeSamplesCheckBox->isChecked());
 }
 
-extern "C"
+extern "C" int showX264ConfigDialog(vidEncVideoProperties *properties, vidEncOptions *encodeOptions, x264Options *options)
 {
-	int showX264ConfigDialog(vidEncVideoProperties *properties, vidEncOptions *encodeOptions, x264Options *options)
+	x264ConfigDialog dialog(properties, encodeOptions, options);
+
+	if (dialog.exec() == QDialog::Accepted)
 	{
-		x264ConfigDialog dialog(properties, encodeOptions, options);
+		dialog.saveSettings(encodeOptions, options);
 
-		if (dialog.exec() == QDialog::Accepted)
-		{
-			dialog.saveSettings(encodeOptions, options);
-
-			return 1;
-		}
-
-		return 0;
+		return 1;
 	}
+
+	return 0;
 }

Added: branches/avidemux_2.5_branch_gruntster/cmake/admCheckGettext.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admCheckGettext.cmake	2008-04-29 15:45:15 UTC (rev 3996)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admCheckGettext.cmake	2008-04-29 23:58:16 UTC (rev 3997)
@@ -0,0 +1,47 @@
+MACRO(checkGettext)
+	MESSAGE(STATUS "Checking for gettext")
+	MESSAGE(STATUS "********************")
+
+	OPTION(GETTEXT "" ON)
+
+	IF (GETTEXT)
+		FIND_HEADER_AND_LIB(GETTEXT libintl.h intl)
+		PRINT_LIBRARY_INFO("Gettext" GETTEXT_FOUND "${GETTEXT_INCLUDE_DIR}" "${GETTEXT_LIBRARY_DIR}")
+
+		IF (GETTEXT_INCLUDE_DIR)
+			# Try linking without -lintl
+			ADM_COMPILE(gettext.cpp "" "${GETTEXT_INCLUDE_DIR}" "" LIBINTL_NOT_REQUIRED outputWithoutLibintl)
+
+			IF (LIBINTL_NOT_REQUIRED)
+				SET(GETTEXT_LIBRARY_DIR "")
+				SET(HAVE_GETTEXT 1)
+
+				MESSAGE(STATUS "libintl not required for gettext support")
+			ELSE (LIBINTL_NOT_REQUIRED)
+				ADM_COMPILE(gettext.cpp "" "${GETTEXT_INCLUDE_DIR}" "${GETTEXT_LIBRARY_DIR}" LIBINTL_REQUIRED outputWithLibintl)
+
+				IF (LIBINTL_REQUIRED)
+					SET(HAVE_GETTEXT 1)
+
+					MESSAGE(STATUS "libintl required for gettext support")
+				ELSE (LIBINTL_REQUIRED)
+					SET(GETTEXT_FOUND 0 CACHE INTERNAL "")
+
+					MESSAGE("gettext support failed with or without libintl")
+					
+					IF (VERBOSE)
+						MESSAGE(STATUS "Compilation error with libintl:")
+						MESSAGE(STATUS ${outputWithLibintl})
+
+						MESSAGE(STATUS "Compilation error without libintl:")
+						MESSAGE(STATUS ${outputWithoutLibintl})
+					ENDIF (VERBOSE)
+				ENDIF (LIBINTL_REQUIRED)
+			ENDIF (LIBINTL_NOT_REQUIRED)
+		ENDIF (GETTEXT_INCLUDE_DIR)
+	ELSE (GETTEXT)
+		MESSAGE("${MSG_DISABLE_OPTION}")
+	ENDIF (GETTEXT)
+
+	MESSAGE("")
+ENDMACRO(checkGettext)
\ No newline at end of file

Added: branches/avidemux_2.5_branch_gruntster/cmake/admCheckGtk.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admCheckGtk.cmake	2008-04-29 15:45:15 UTC (rev 3996)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admCheckGtk.cmake	2008-04-29 23:58:16 UTC (rev 3997)
@@ -0,0 +1,47 @@
+MACRO(checkGtk)
+	OPTION(GTK "" ON)
+
+	MESSAGE(STATUS "Checking for GTK+")
+	MESSAGE(STATUS "*****************")
+
+	IF (GTK)
+		PKG_CHECK_MODULES(GTK gtk+-2.0)
+		PRINT_LIBRARY_INFO("GTK+" GTK_FOUND "${GTK_CFLAGS}" "${GTK_LDFLAGS}")
+
+		IF (GTK_FOUND)
+			ADM_COMPILE(gtk_x11_check.cpp "${GTK_CFLAGS}" "" "${GTK_LDFLAGS}" GTK_X11_SUPPORTED outputGtkX11Test)
+
+			IF (GTK_X11_SUPPORTED)
+				SET(HAVE_GTK_X11 1)
+
+				MESSAGE(STATUS "GTK+ uses X11")
+			ELSE (GTK_X11_SUPPORTED)
+				MESSAGE(STATUS "GTK+ doesn't use X11")
+
+				IF (VERBOSE)
+					MESSAGE("Error Message: ${outputGtkX11Test}")
+				ENDIF (VERBOSE)
+			ENDIF (GTK_X11_SUPPORTED)
+		ENDIF (GTK_FOUND)
+	ELSE (GTK)
+		MESSAGE("${MSG_DISABLE_OPTION}")
+	ENDIF (GTK)
+
+	MESSAGE("")
+
+	MESSAGE(STATUS "Checking for GThread")
+	MESSAGE(STATUS "********************")
+
+	IF (GTK)
+		PKG_CHECK_MODULES(GTHREAD gthread-2.0)
+		PRINT_LIBRARY_INFO("GThread" GTHREAD_FOUND "${GTHREAD_CFLAGS}" "${GTHREAD_LDFLAGS}")
+
+		IF (NOT GTHREAD_FOUND)
+			MESSAGE(STATUS "Could not find GThread")
+		ENDIF(NOT GTHREAD_FOUND)
+	ELSE (GTK)
+		MESSAGE("${MSG_DISABLE_OPTION}")
+	ENDIF (GTK)
+
+	MESSAGE("")
+ENDMACRO(checkGtk)
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/cmake/admCheckMiscLibs.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admCheckMiscLibs.cmake	2008-04-29 15:45:15 UTC (rev 3996)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admCheckMiscLibs.cmake	2008-04-29 23:58:16 UTC (rev 3997)
@@ -78,54 +78,12 @@
 ########################################
 # gettext
 ########################################
-MESSAGE(STATUS "Checking for gettext")
-MESSAGE(STATUS "********************")
+INCLUDE(admCheckGettext)
 
-OPTION(GETTEXT "" ON)
+checkGettext()
 
-IF (GETTEXT)
-	FIND_HEADER_AND_LIB(GETTEXT libintl.h intl)
-	PRINT_LIBRARY_INFO("Gettext" GETTEXT_FOUND "${GETTEXT_INCLUDE_DIR}" "${GETTEXT_LIBRARY_DIR}")
-
-	IF (GETTEXT_INCLUDE_DIR)
-		# Try linking without -lintl
-		ADM_COMPILE(gettext.cpp "" "${GETTEXT_INCLUDE_DIR}" "" LIBINTL_NOT_REQUIRED outputWithoutLibintl)
-
-		IF (LIBINTL_NOT_REQUIRED)
-			SET(GETTEXT_LIBRARY_DIR "")
-			SET(HAVE_GETTEXT 1)
-
-			MESSAGE(STATUS "libintl not required for gettext support")
-		ELSE (LIBINTL_NOT_REQUIRED)
-			ADM_COMPILE(gettext.cpp "" "${GETTEXT_INCLUDE_DIR}" "${GETTEXT_LIBRARY_DIR}" LIBINTL_REQUIRED outputWithLibintl)
-
-			IF (LIBINTL_REQUIRED)
-				SET(HAVE_GETTEXT 1)
-
-				MESSAGE(STATUS "libintl required for gettext support")
-			ELSE (LIBINTL_REQUIRED)
-				SET(GETTEXT_FOUND 0 CACHE INTERNAL "")
-
-				MESSAGE("gettext support failed with or without libintl")
-				
-				IF (VERBOSE)
-					MESSAGE(STATUS "Compilation error with libintl:")
-					MESSAGE(STATUS ${outputWithLibintl})
-
-					MESSAGE(STATUS "Compilation error without libintl:")
-					MESSAGE(STATUS ${outputWithoutLibintl})
-				ENDIF (VERBOSE)
-			ENDIF (LIBINTL_REQUIRED)
-		ENDIF (LIBINTL_NOT_REQUIRED)
-	ENDIF (GETTEXT_INCLUDE_DIR)
-ELSE (GETTEXT)
-	MESSAGE("${MSG_DISABLE_OPTION}")
-ENDIF (GETTEXT)
-
 SET(ADM_LOCALE "${CMAKE_INSTALL_PREFIX}/share/locale")
 
-MESSAGE("")
-
 ########################################
 # SDL
 ########################################

Deleted: branches/avidemux_2.5_branch_gruntster/cmake/admCheckUserInterfaceLibs.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admCheckUserInterfaceLibs.cmake	2008-04-29 15:45:15 UTC (rev 3996)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admCheckUserInterfaceLibs.cmake	2008-04-29 23:58:16 UTC (rev 3997)
@@ -1,67 +0,0 @@
-########################################
-# GTK+
-########################################
-OPTION(GTK "" ON)
-
-MESSAGE(STATUS "Checking for GTK+")
-MESSAGE(STATUS "*****************")
-
-IF (GTK)
-	PKG_CHECK_MODULES(GTK gtk+-2.0)
-	PRINT_LIBRARY_INFO("GTK+" GTK_FOUND "${GTK_CFLAGS}" "${GTK_LDFLAGS}")
-
-	IF (GTK_FOUND)
-		ADM_COMPILE(gtk_x11_check.cpp "${GTK_CFLAGS}" "" "${GTK_LDFLAGS}" GTK_X11_SUPPORTED outputGtkX11Test)
-
-		IF (GTK_X11_SUPPORTED)
-			SET(HAVE_GTK_X11 1)
-
-			MESSAGE(STATUS "GTK+ uses X11")
-		ELSE (GTK_X11_SUPPORTED)
-			MESSAGE(STATUS "GTK+ doesn't use X11")
-
-			IF (VERBOSE)
-				MESSAGE("Error Message: ${outputGtkX11Test}")
-			ENDIF (VERBOSE)
-		ENDIF (GTK_X11_SUPPORTED)
-	ELSE (GTK_FOUND)
-		SET(ADM_UI_GTK 0)
-	ENDIF (GTK_FOUND)
-ELSE (GTK)
-	SET(ADM_UI_GTK 0)
-	MESSAGE("${MSG_DISABLE_OPTION}")
-ENDIF (GTK)
-
-MESSAGE("")
-
-########################################
-# GThread
-########################################
-MESSAGE(STATUS "Checking for GThread")
-MESSAGE(STATUS "********************")
-
-IF (GTK)
-	PKG_CHECK_MODULES(GTHREAD gthread-2.0)
-	PRINT_LIBRARY_INFO("GThread" GTHREAD_FOUND "${GTHREAD_CFLAGS}" "${GTHREAD_LDFLAGS}")
-
-	IF (NOT GTHREAD_FOUND)
-		SET(ADM_UI_GTK 0)
-		MESSAGE(STATUS "Could not find GThread")
-	ENDIF(NOT GTHREAD_FOUND)
-ELSE (GTK)
-	SET(ADM_UI_GTK 0)
-	MESSAGE("${MSG_DISABLE_OPTION}")
-ENDIF (GTK)
-
-MESSAGE("")
-
-########################################
-# Qt4
-########################################
-INCLUDE(admCheckQt4)
-
-checkQt4()
-
-IF (NOT QT4_FOUND)
-	SET(ADM_UI_QT4 0)
-ENDIF (NOT QT4_FOUND)
\ No newline at end of file



From gruntster at mail.berlios.de  Wed Apr 30 03:24:31 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Wed, 30 Apr 2008 03:24:31 +0200
Subject: [Avidemux-svn-commit] r3998 -
	branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk
Message-ID: <200804300124.m3U1OVmL001178@sheep.berlios.de>

Author: gruntster
Date: 2008-04-30 03:24:27 +0200 (Wed, 30 Apr 2008)
New Revision: 3998

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.glade
Log:
[x264] remove GTK warnings on Linux

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp	2008-04-29 23:58:16 UTC (rev 3997)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp	2008-04-30 01:24:27 UTC (rev 3998)
@@ -23,7 +23,7 @@
 #include <libintl.h>
 #define _(x) gettext(x)
 #else
-#define _(x) #x
+#define _(x) x
 #endif
 
 #include "ADM_inttype.h"
@@ -117,7 +117,7 @@
 	if (reply == GTK_RESPONSE_OK)
 	{
 		if (getCurrentEncodeMode(dialog) == ADM_VIDENC_MODE_CQP)
-			encodeOptions->encodeModeParameter = gtk_spin_button_get_value(GTK_SPIN_BUTTON(WID(spinbuttonQuantizer)));
+			encodeOptions->encodeModeParameter = (int)gtk_spin_button_get_value(GTK_SPIN_BUTTON(WID(spinbuttonQuantizer)));
 		else
 		{
 			char *str = gtk_editable_get_chars(GTK_EDITABLE(WID(entryTarget)), 0, -1);
@@ -223,10 +223,10 @@
 		switch (modeIndex)
 		{
 			case 0:
-				encodeModeParameter = gtk_spin_button_get_value(GTK_SPIN_BUTTON(WID(spinbuttonQuantizer)));
+				encodeModeParameter = (int)gtk_spin_button_get_value(GTK_SPIN_BUTTON(WID(spinbuttonQuantizer)));
 				break;
 			case 1:
-				encodeModeParameter = gtk_spin_button_get_value(GTK_SPIN_BUTTON(WID(spinbuttonQuantizer)));
+				encodeModeParameter = (int)gtk_spin_button_get_value(GTK_SPIN_BUTTON(WID(spinbuttonQuantizer)));
 				break;
 			case 2:
 				encodeModeParameter = _lastBitrate;
@@ -343,28 +343,28 @@
 	options->setMixedReferences(gtk_toggle_button_get_active(GTK_TOGGLE_BUTTON(WID(checkbuttonMixedRefs))));
 	options->setCabac(gtk_toggle_button_get_active(GTK_TOGGLE_BUTTON(WID(checkbuttonCABAC))));
 
-	options->setTrellis(gtk_spin_button_get_value(GTK_SPIN_BUTTON(WID(spinbuttonTrellis))));
-	options->setNoiseReduction(gtk_spin_button_get_value(GTK_SPIN_BUTTON(WID(spinbuttonNoiseReduction))));
+	options->setTrellis((unsigned int)gtk_spin_button_get_value(GTK_SPIN_BUTTON(WID(spinbuttonTrellis))));
+	options->setNoiseReduction((unsigned int)gtk_spin_button_get_value(GTK_SPIN_BUTTON(WID(spinbuttonNoiseReduction))));
 
 	options->setLoopFilter(gtk_toggle_button_get_active(GTK_TOGGLE_BUTTON(WID(checkbuttonDeblockingFilter))));
 	options->setChromaMotionEstimation(gtk_toggle_button_get_active(GTK_TOGGLE_BUTTON(WID(checkbuttonChromaME))));
 
 	options->setQuantiserCurveCompression((float)gtk_spin_button_get_value(GTK_SPIN_BUTTON(WID(spinbuttonBitrateVariability))) / 100);
-	options->setQuantiserMinimum(gtk_spin_button_get_value(GTK_SPIN_BUTTON(WID(spinbuttonMinQp))));
-	options->setQuantiserMaximum(gtk_spin_button_get_value(GTK_SPIN_BUTTON(WID(spinbuttonMaxQp))));
-	options->setQuantiserStep(gtk_spin_button_get_value(GTK_SPIN_BUTTON(WID(spinbuttonQpStep))));
-	options->setScenecutThreshold(gtk_spin_button_get_value(GTK_SPIN_BUTTON(WID(spinbuttonSceneCut))));
-	options->setGopMinimumSize(gtk_spin_button_get_value(GTK_SPIN_BUTTON(WID(spinbuttonMinIdr))));
-	options->setGopMaximumSize(gtk_spin_button_get_value(GTK_SPIN_BUTTON(WID(spinbuttonMaxIdr))));
-	options->setVbvMaximumBitrate(gtk_spin_button_get_value(GTK_SPIN_BUTTON(WID(spinbuttonvbv_max_bitrate))));
-	options->setVbvBufferSize(gtk_spin_button_get_value(GTK_SPIN_BUTTON(WID(spinbuttonvbv_buffer_size))));
+	options->setQuantiserMinimum((unsigned int)gtk_spin_button_get_value(GTK_SPIN_BUTTON(WID(spinbuttonMinQp))));
+	options->setQuantiserMaximum((unsigned int)gtk_spin_button_get_value(GTK_SPIN_BUTTON(WID(spinbuttonMaxQp))));
+	options->setQuantiserStep((unsigned int)gtk_spin_button_get_value(GTK_SPIN_BUTTON(WID(spinbuttonQpStep))));
+	options->setScenecutThreshold((unsigned int)gtk_spin_button_get_value(GTK_SPIN_BUTTON(WID(spinbuttonSceneCut))));
+	options->setGopMinimumSize((unsigned int)gtk_spin_button_get_value(GTK_SPIN_BUTTON(WID(spinbuttonMinIdr))));
+	options->setGopMaximumSize((unsigned int)gtk_spin_button_get_value(GTK_SPIN_BUTTON(WID(spinbuttonMaxIdr))));
+	options->setVbvMaximumBitrate((unsigned int)gtk_spin_button_get_value(GTK_SPIN_BUTTON(WID(spinbuttonvbv_max_bitrate))));
+	options->setVbvBufferSize((unsigned int)gtk_spin_button_get_value(GTK_SPIN_BUTTON(WID(spinbuttonvbv_buffer_size))));
 	options->setVbvInitialOccupancy((float)gtk_spin_button_get_value(GTK_SPIN_BUTTON(WID(spinbuttonvbv_buffer_init))) / 100);
-	options->setReferenceFrames(gtk_spin_button_get_value(GTK_SPIN_BUTTON(WID(spinbuttonMaxRefFrames))));
-	options->setBFrames(gtk_spin_button_get_value(GTK_SPIN_BUTTON(WID(spinbuttonMaxBFrame))));
-	options->setBFrameBias(gtk_spin_button_get_value(GTK_SPIN_BUTTON(WID(spinbuttonBias))));
-	options->setLoopFilterAlphaC0(gtk_spin_button_get_value(GTK_SPIN_BUTTON(WID(spinbuttonStrength))));
-	options->setLoopFilterBeta(gtk_spin_button_get_value(GTK_SPIN_BUTTON(WID(spinbuttonThreshold))));
-	options->setMotionVectorSearchRange(gtk_spin_button_get_value(GTK_SPIN_BUTTON(WID(spinbuttonRange))));
+	options->setReferenceFrames((unsigned int)gtk_spin_button_get_value(GTK_SPIN_BUTTON(WID(spinbuttonMaxRefFrames))));
+	options->setBFrames((unsigned int)gtk_spin_button_get_value(GTK_SPIN_BUTTON(WID(spinbuttonMaxBFrame))));
+	options->setBFrameBias((int)gtk_spin_button_get_value(GTK_SPIN_BUTTON(WID(spinbuttonBias))));
+	options->setLoopFilterAlphaC0((int)gtk_spin_button_get_value(GTK_SPIN_BUTTON(WID(spinbuttonStrength))));
+	options->setLoopFilterBeta((int)gtk_spin_button_get_value(GTK_SPIN_BUTTON(WID(spinbuttonThreshold))));
+	options->setMotionVectorSearchRange((unsigned int)gtk_spin_button_get_value(GTK_SPIN_BUTTON(WID(spinbuttonRange))));
 
 	options->setMotionEstimationMethod(gtk_combo_box_get_active(GTK_COMBO_BOX(WID(comboboxMethod))));
 	options->setDirectPredictionMode(gtk_combo_box_get_active(GTK_COMBO_BOX(WID(comboboxDirectMode))));
@@ -416,1542 +416,1540 @@
 	}
 }
 
-GtkWidget*
-create_dialog1 (void)
-{
-  GtkWidget *dialog1;
-  GtkWidget *dialog_vbox1;
-  GtkWidget *notebook1;
-  GtkWidget *alignment14;
-  GtkWidget *tableBitrate;
-  GtkWidget *labelEncodingMode;
-  GtkWidget *labelQuantizer;
-  GtkWidget *labelTarget;
-  GtkObject *spinbuttonQuantizer_adj;
-  GtkWidget *spinbuttonQuantizer;
-  GtkWidget *entryTarget;
-  GtkWidget *comboboxMode;
-  GtkWidget *labelPageBitrate;
-  GtkWidget *alignment15;
-  GtkWidget *vbox5;
-  GtkWidget *frame6;
-  GtkWidget *alignment6;
-  GtkWidget *vbox6;
-  GtkWidget *table7;
-  GtkWidget *labelPartitionDecision;
-  GtkWidget *labelMethod;
-  GtkWidget *comboboxPartitionDecision;
-  GtkWidget *comboboxMethod;
-  GtkWidget *table11;
-  GtkWidget *labelMaxRefFrames;
-  GtkWidget *labelRange;
-  GtkObject *spinbuttonRange_adj;
-  GtkWidget *spinbuttonRange;
-  GtkObject *spinbuttonMaxRefFrames_adj;
-  GtkWidget *spinbuttonMaxRefFrames;
-  GtkWidget *checkbuttonChromaME;
-  GtkWidget *checkbuttonMixedRefs;
-  GtkWidget *hbox8;
-  GtkWidget *checkbuttonfastPSkip;
-  GtkWidget *checkbuttonDCTDecimate;
-  GtkWidget *checkbuttoninterlaced;
-  GtkWidget *label24;
-  GtkWidget *frameSampleAR;
-  GtkWidget *alignment12;
-  GtkWidget *table35;
-  GtkWidget *hbox12;
-  GtkWidget *entryAR_Num;
-  GtkWidget *label53;
-  GtkWidget *entryAR_Den;
-  GtkWidget *radiobuttonCustomAR;
-  GSList *radiobuttonCustomAR_group = NULL;
-  GtkWidget *radiobuttonPredefinedAR;
-  GtkWidget *radiobuttonAsInputAR;
-  GtkWidget *label40;
-  GtkWidget *comboboxentry1;
-  GtkWidget *label39;
-  GtkWidget *frame7;
-  GtkWidget *alignment7;
-  GtkWidget *vbox7;
-  GtkWidget *alignment21;
-  GtkWidget *hbox2;
-  GtkWidget *checkbuttonCABAC;
-  GtkWidget *hbox7;
-  GtkWidget *labelTrellis;
-  GtkObject *spinbuttonTrellis_adj;
-  GtkWidget *spinbuttonTrellis;
-  GtkWidget *hbox11;
-  GtkWidget *labelNoiseReduction;
-  GtkObject *spinbuttonNoiseReduction_adj;
-  GtkWidget *spinbuttonNoiseReduction;
-  GtkWidget *hbox3;
-  GtkWidget *checkbuttonDeblockingFilter;
-  GtkWidget *table8;
-  GtkWidget *labelThreshold;
-  GtkWidget *labelStrength;
-  GtkObject *spinbuttonThreshold_adj;
-  GtkWidget *spinbuttonThreshold;
-  GtkObject *spinbuttonStrength_adj;
-  GtkWidget *spinbuttonStrength;
-  GtkWidget *label25;
-  GtkWidget *labelPageMotion_More;
-  GtkWidget *alignment16;
-  GtkWidget *vbox2;
-  GtkWidget *frame4;
-  GtkWidget *alignment4;
-  GtkWidget *vbox3;
-  GtkWidget *checkbutton8x8;
-  GtkWidget *checkbutton8x8P;
-  GtkWidget *checkbutton8x8B;
-  GtkWidget *checkbutton4x4;
-  GtkWidget *checkbutton8x8I;
-  GtkWidget *checkbutton4x4I;
-  GtkWidget *label19;
-  GtkWidget *frame5;
-  GtkWidget *alignment5;
-  GtkWidget *vbox4;
-  GtkWidget *table5;
-  GtkWidget *labelBias;
-  GtkWidget *labelMaxConsecutive;
-  GtkObject *spinbuttonBias_adj;
-  GtkWidget *spinbuttonBias;
-  GtkObject *spinbuttonMaxBFrame_adj;
-  GtkWidget *spinbuttonMaxBFrame;
-  GtkWidget *alignment20;
-  GtkWidget *table6;
-  GtkWidget *checkbuttonBidirME;
-  GtkWidget *checkbuttonWeighted;
-  GtkWidget *checkbuttonAdaptative;
-  GtkWidget *checkbuttonBasReference;
-  GtkWidget *hbox1;
-  GtkWidget *labelBFrameDirectMode;
-  GtkWidget *comboboxDirectMode;
-  GtkWidget *label20;
-  GtkWidget *labelPagePartion_Frame;
-  GtkWidget *alignment17;
-  GtkWidget *vbox1;
-  GtkWidget *frame1;
-  GtkWidget *alignment1;
-  GtkWidget *table2;
-  GtkObject *spinbuttonKeyframeBoost_adj;
-  GtkWidget *spinbuttonKeyframeBoost;
-  GtkObject *spinbuttonBframeReduction_adj;
-  GtkWidget *spinbuttonBframeReduction;
-  GtkObject *spinbuttonBitrateVariability_adj;
-  GtkWidget *spinbuttonBitrateVariability;
-  GtkWidget *labelKeyframeboost;
-  GtkWidget *label11;
-  GtkWidget *label12;
-  GtkWidget *label7;
-  GtkWidget *frame2;
-  GtkWidget *alignment2;
-  GtkWidget *table3;
-  GtkWidget *label13;
-  GtkWidget *label14;
-  GtkWidget *label15;
-  GtkObject *spinbuttonMinQp_adj;
-  GtkWidget *spinbuttonMinQp;
-  GtkObject *spinbuttonMaxQp_adj;
-  GtkWidget *spinbuttonMaxQp;
-  GtkObject *spinbuttonQpStep_adj;
-  GtkWidget *spinbuttonQpStep;
-  GtkWidget *label8;
-  GtkWidget *frame3;
-  GtkWidget *alignment3;
-  GtkWidget *table4;
-  GtkObject *spinbuttonSceneCut_adj;
-  GtkWidget *spinbuttonSceneCut;
-  GtkWidget *label16;
-  GtkWidget *label17;
-  GtkObject *spinbuttonMinIdr_adj;
-  GtkWidget *spinbuttonMinIdr;
-  GtkObject *spinbuttonMaxIdr_adj;
-  GtkWidget *spinbuttonMaxIdr;
-  GtkWidget *label18;
-  GtkWidget *labelMoreEncodingSettings;
-  GtkWidget *frameVideoBufferVerifier;
-  GtkWidget *alignment11;
-  GtkWidget *table12;
-  GtkWidget *labelVBVBufferSize;
-  GtkWidget *labelVBVInitialbuffer;
-  GtkWidget *labelVBVMaximumBitrate;
-  GtkObject *spinbuttonvbv_max_bitrate_adj;
-  GtkWidget *spinbuttonvbv_max_bitrate;
-  GtkObject *spinbuttonvbv_buffer_size_adj;
-  GtkWidget *spinbuttonvbv_buffer_size;
-  GtkObject *spinbuttonvbv_buffer_init_adj;
-  GtkWidget *spinbuttonvbv_buffer_init;
-  GtkWidget *labelVideoBufferVerifier;
-  GtkWidget *labelPageRateControl;
-  GtkWidget *alignment18;
-  GtkWidget *vbox8;
-  GtkWidget *frame10;
-  GtkWidget *alignment10;
-  GtkWidget *table15;
-  GtkWidget *labelBitrateVariance;
-  GtkObject *spinbuttonBitrateVariance_adj;
-  GtkWidget *spinbuttonBitrateVariance;
-  GtkObject *spinbuttonQuantizerCompression_adj;
-  GtkWidget *spinbuttonQuantizerCompression;
-  GtkObject *spinbuttonTempBlurFrame_adj;
-  GtkWidget *spinbuttonTempBlurFrame;
-  GtkObject *spinbuttonTempBlurQuant_adj;
-  GtkWidget *spinbuttonTempBlurQuant;
-  GtkWidget *labelQuantizerCompression;
-  GtkWidget *labelTempBlurEstFrame;
-  GtkWidget *labelTempBlueQuant;
-  GtkWidget *labelMisc;
-  GtkWidget *frame11;
-  GtkWidget *alignment13;
-  GtkWidget *table16;
-  GtkObject *spinbutton8_adj;
-  GtkWidget *spinbutton8;
-  GtkObject *spinbutton9_adj;
-  GtkWidget *spinbutton9;
-  GtkObject *spinbuttonChromaQPOffset_adj;
-  GtkWidget *spinbuttonChromaQPOffset;
-  GtkWidget *labelFactorbetweenIandP;
-  GtkWidget *labelFactorbetweenPandB;
-  GtkWidget *labelChromaQPOffset;
-  GtkWidget *labelQuantizers;
-  GtkWidget *frame9;
-  GtkWidget *alignment9;
-  GtkWidget *vbox9;
-  GtkWidget *radiobuttonFlatmatrix;
-  GSList *radiobuttonFlatmatrix_group = NULL;
-  GtkWidget *radiobuttonJVTmatrix;
-  GtkWidget *hbox13;
-  GtkWidget *radiobuttonCustommatrix;
-  GtkWidget *hbox14;
-  GtkWidget *filechooserbuttonOpenCQMFile;
-  GtkWidget *vseparator1;
-  GtkWidget *buttonEditCustomMatrix;
-  GtkWidget *labelFrameQuantizationMatrices;
-  GtkWidget *labelMore;
-  GtkWidget *dialog_action_area1;
-  GtkWidget *buttonResetDaults;
-  GtkWidget *cancelbutton1;
-  GtkWidget *okbutton1;
-  GtkTooltips *tooltips;
-
-  tooltips = gtk_tooltips_new ();
-
-  dialog1 = gtk_dialog_new ();
-  gtk_window_set_title (GTK_WINDOW (dialog1), _("x264 Configuration"));
-  gtk_window_set_type_hint (GTK_WINDOW (dialog1), GDK_WINDOW_TYPE_HINT_DIALOG);
-
-  dialog_vbox1 = GTK_DIALOG (dialog1)->vbox;
-  gtk_widget_show (dialog_vbox1);
-
-  notebook1 = gtk_notebook_new ();
-  gtk_widget_show (notebook1);
-  gtk_box_pack_start (GTK_BOX (dialog_vbox1), notebook1, TRUE, TRUE, 0);
-
-  alignment14 = gtk_alignment_new (0.5, 0.5, 1, 1);
-  gtk_widget_show (alignment14);
-  gtk_container_add (GTK_CONTAINER (notebook1), alignment14);
-  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment14), 7, 7, 7, 7);
-
-  tableBitrate = gtk_table_new (3, 2, FALSE);
-  gtk_widget_show (tableBitrate);
-  gtk_container_add (GTK_CONTAINER (alignment14), tableBitrate);
-  gtk_table_set_row_spacings (GTK_TABLE (tableBitrate), 3);
-  gtk_table_set_col_spacings (GTK_TABLE (tableBitrate), 10);
-
-  labelEncodingMode = gtk_label_new (_("Encoding Mode"));
-  gtk_widget_show (labelEncodingMode);
-  gtk_table_attach (GTK_TABLE (tableBitrate), labelEncodingMode, 0, 1, 0, 1,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_misc_set_alignment (GTK_MISC (labelEncodingMode), 0, 0.5);
-
-  labelQuantizer = gtk_label_new (_("Quantizer"));
-  gtk_widget_show (labelQuantizer);
-  gtk_table_attach (GTK_TABLE (tableBitrate), labelQuantizer, 0, 1, 2, 3,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_misc_set_alignment (GTK_MISC (labelQuantizer), 0, 0.5);
-
-  labelTarget = gtk_label_new (_("Target Size"));
-  gtk_widget_show (labelTarget);
-  gtk_table_attach (GTK_TABLE (tableBitrate), labelTarget, 0, 1, 1, 2,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_misc_set_alignment (GTK_MISC (labelTarget), 0, 0.5);
-
-  spinbuttonQuantizer_adj = gtk_adjustment_new (4, 0, 51, 1, 10, 10);
-  spinbuttonQuantizer = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonQuantizer_adj), 1, 0);
-  gtk_widget_show (spinbuttonQuantizer);
-  gtk_table_attach (GTK_TABLE (tableBitrate), spinbuttonQuantizer, 1, 2, 2, 3,
-                    (GtkAttachOptions) (GTK_SHRINK | GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_tooltips_set_tip (tooltips, spinbuttonQuantizer, _("Constant Quantizer - Each frame will have the same compression. Low numbers equal higher quality while high numbers equal lower quality."), NULL);
-  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonQuantizer), TRUE);
-
-  entryTarget = gtk_entry_new ();
-  gtk_widget_show (entryTarget);
-  gtk_table_attach (GTK_TABLE (tableBitrate), entryTarget, 1, 2, 1, 2,
-                    (GtkAttachOptions) (GTK_SHRINK | GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_tooltips_set_tip (tooltips, entryTarget, _("Target bitrate or file size"), NULL);
-  gtk_entry_set_width_chars (GTK_ENTRY (entryTarget), 4);
-
-  comboboxMode = gtk_combo_box_new_text ();
-  gtk_widget_show (comboboxMode);
-  gtk_table_attach (GTK_TABLE (tableBitrate), comboboxMode, 1, 2, 0, 1,
-                    (GtkAttachOptions) (GTK_SHRINK | GTK_FILL),
-                    (GtkAttachOptions) (GTK_FILL), 0, 0);
-  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxMode), _("Single Pass - Quality Quantizer (Average)"));
-  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxMode), _("Single Pass - Quality Quantizer (Constant)"));
-  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxMode), _("Single Pass - Bitrate (Average)"));
-  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxMode), _("Two Pass - Video Size"));
-  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxMode), _("Two Pass - Average Bitrate"));
-
-  labelPageBitrate = gtk_label_new (_("Bitrate"));
-  gtk_widget_show (labelPageBitrate);
-  gtk_notebook_set_tab_label (GTK_NOTEBOOK (notebook1), gtk_notebook_get_nth_page (GTK_NOTEBOOK (notebook1), 0), labelPageBitrate);
-  gtk_misc_set_alignment (GTK_MISC (labelPageBitrate), 0, 0.5);
-
-  alignment15 = gtk_alignment_new (0.5, 0.5, 1, 1);
-  gtk_widget_show (alignment15);
-  gtk_container_add (GTK_CONTAINER (notebook1), alignment15);
-  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment15), 7, 7, 7, 7);
-
-  vbox5 = gtk_vbox_new (FALSE, 3);
-  gtk_widget_show (vbox5);
-  gtk_container_add (GTK_CONTAINER (alignment15), vbox5);
-
-  frame6 = gtk_frame_new (NULL);
-  gtk_widget_show (frame6);
-  gtk_box_pack_start (GTK_BOX (vbox5), frame6, FALSE, TRUE, 0);
-
-  alignment6 = gtk_alignment_new (0.5, 0.5, 1, 1);
-  gtk_widget_show (alignment6);
-  gtk_container_add (GTK_CONTAINER (frame6), alignment6);
-  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment6), 7, 4, 7, 7);
-
-  vbox6 = gtk_vbox_new (FALSE, 3);
-  gtk_widget_show (vbox6);
-  gtk_container_add (GTK_CONTAINER (alignment6), vbox6);
-
-  table7 = gtk_table_new (2, 3, FALSE);
-  gtk_widget_show (table7);
-  gtk_box_pack_start (GTK_BOX (vbox6), table7, FALSE, TRUE, 0);
-  gtk_table_set_row_spacings (GTK_TABLE (table7), 3);
-  gtk_table_set_col_spacings (GTK_TABLE (table7), 10);
-
-  labelPartitionDecision = gtk_label_new (_("Partition Decision"));
-  gtk_widget_show (labelPartitionDecision);
-  gtk_table_attach (GTK_TABLE (table7), labelPartitionDecision, 0, 1, 0, 1,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_misc_set_alignment (GTK_MISC (labelPartitionDecision), 0, 0.5);
-
-  labelMethod = gtk_label_new (_("Method"));
-  gtk_widget_show (labelMethod);
-  gtk_table_attach (GTK_TABLE (table7), labelMethod, 0, 1, 1, 2,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_misc_set_alignment (GTK_MISC (labelMethod), 0, 0.5);
-
-  comboboxPartitionDecision = gtk_combo_box_new_text ();
-  gtk_widget_show (comboboxPartitionDecision);
-  gtk_table_attach (GTK_TABLE (table7), comboboxPartitionDecision, 1, 3, 0, 1,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (GTK_FILL), 0, 0);
-  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxPartitionDecision), _("1  - Extremely Low (Fastest)"));
-  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxPartitionDecision), _("2  - Very Low"));
-  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxPartitionDecision), _("3  - Low"));
-  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxPartitionDecision), _("4  - Medium"));
-  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxPartitionDecision), _("5  - High (Default)"));
-  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxPartitionDecision), _("6  - Very High"));
-  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxPartitionDecision), _("6B - Very High (RDO on B-frames)"));
-  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxPartitionDecision), _("7  - Ultra High"));
-  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxPartitionDecision), _("7B - Ultra High (RDO on B-frames)"));
-
-  comboboxMethod = gtk_combo_box_new_text ();
-  gtk_widget_show (comboboxMethod);
-  gtk_table_attach (GTK_TABLE (table7), comboboxMethod, 1, 3, 1, 2,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (GTK_FILL), 0, 0);
-  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxMethod), _("Diamond Search"));
-  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxMethod), _("Hexagonal Search"));
-  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxMethod), _("Uneven Multi-hexagon"));
-  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxMethod), _("Exhaustive Search"));
-
-  table11 = gtk_table_new (2, 3, FALSE);
-  gtk_widget_show (table11);
-  gtk_box_pack_start (GTK_BOX (vbox6), table11, TRUE, FALSE, 0);
-  gtk_table_set_row_spacings (GTK_TABLE (table11), 3);
-  gtk_table_set_col_spacings (GTK_TABLE (table11), 10);
-
-  labelMaxRefFrames = gtk_label_new (_("Max. Ref. Frames"));
-  gtk_widget_show (labelMaxRefFrames);
-  gtk_table_attach (GTK_TABLE (table11), labelMaxRefFrames, 0, 1, 1, 2,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_misc_set_alignment (GTK_MISC (labelMaxRefFrames), 0, 0.5);
-
-  labelRange = gtk_label_new (_("Range"));
-  gtk_widget_show (labelRange);
-  gtk_table_attach (GTK_TABLE (table11), labelRange, 0, 1, 0, 1,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_misc_set_alignment (GTK_MISC (labelRange), 0, 0.5);
-
-  spinbuttonRange_adj = gtk_adjustment_new (17, 0, 64, 1, 10, 10);
-  spinbuttonRange = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonRange_adj), 1, 0);
-  gtk_widget_show (spinbuttonRange);
-  gtk_table_attach (GTK_TABLE (table11), spinbuttonRange, 1, 2, 0, 1,
-                    (GtkAttachOptions) (GTK_SHRINK | GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_tooltips_set_tip (tooltips, spinbuttonRange, _("Define how many pixels are analysed for motion estimation. The higher the range the more accurate the analysis but the slower the encoding time."), NULL);
-  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonRange), TRUE);
-
-  spinbuttonMaxRefFrames_adj = gtk_adjustment_new (1, 0, 16, 1, 10, 10);
-  spinbuttonMaxRefFrames = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonMaxRefFrames_adj), 1, 0);
-  gtk_widget_show (spinbuttonMaxRefFrames);
-  gtk_table_attach (GTK_TABLE (table11), spinbuttonMaxRefFrames, 1, 2, 1, 2,
-                    (GtkAttachOptions) (GTK_SHRINK | GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_tooltips_set_tip (tooltips, spinbuttonMaxRefFrames, _("Set how many previous frames can be referenced by a P/B-frame. Numbers above 5 do not seem to improve quality greatly. Numbers 3 to 5 are recommended."), NULL);
-  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonMaxRefFrames), TRUE);
-
-  checkbuttonChromaME = gtk_check_button_new_with_mnemonic (_("Chroma ME"));
-  gtk_widget_show (checkbuttonChromaME);
-  gtk_table_attach (GTK_TABLE (table11), checkbuttonChromaME, 2, 3, 0, 1,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 30, 0);
-  gtk_tooltips_set_tip (tooltips, checkbuttonChromaME, _("Use color information for detecting motion to improve quality"), NULL);
-  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (checkbuttonChromaME), TRUE);
-
-  checkbuttonMixedRefs = gtk_check_button_new_with_mnemonic (_("Mixed Refs"));
-  gtk_widget_show (checkbuttonMixedRefs);
-  gtk_table_attach (GTK_TABLE (table11), checkbuttonMixedRefs, 2, 3, 1, 2,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 30, 0);
-  gtk_tooltips_set_tip (tooltips, checkbuttonMixedRefs, _("Calculate referencing individually based on each partition"), NULL);
-
-  hbox8 = gtk_hbox_new (TRUE, 0);
-  gtk_widget_show (hbox8);
-  gtk_box_pack_start (GTK_BOX (vbox6), hbox8, TRUE, TRUE, 0);
-
-  checkbuttonfastPSkip = gtk_check_button_new_with_mnemonic (_("Fast P-Skip"));
-  gtk_widget_show (checkbuttonfastPSkip);
-  gtk_box_pack_start (GTK_BOX (hbox8), checkbuttonfastPSkip, FALSE, FALSE, 0);
-  gtk_tooltips_set_tip (tooltips, checkbuttonfastPSkip, _("Early skip detection on P-frames to speedup encoding. Quality will be slightly reduced."), NULL);
-  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (checkbuttonfastPSkip), TRUE);
-
-  checkbuttonDCTDecimate = gtk_check_button_new_with_mnemonic (_("DCT Decimate"));
-  gtk_widget_show (checkbuttonDCTDecimate);
-  gtk_box_pack_start (GTK_BOX (hbox8), checkbuttonDCTDecimate, FALSE, FALSE, 0);
-  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (checkbuttonDCTDecimate), TRUE);
-
-  checkbuttoninterlaced = gtk_check_button_new_with_mnemonic (_("Interlaced"));
-  gtk_widget_show (checkbuttoninterlaced);
-  gtk_box_pack_start (GTK_BOX (hbox8), checkbuttoninterlaced, FALSE, FALSE, 0);
-  gtk_tooltips_set_tip (tooltips, checkbuttoninterlaced, _("Input video is interlaced"), NULL);
-
-  label24 = gtk_label_new (_("<b>Motion Estimation</b>"));
-  gtk_widget_show (label24);
-  gtk_frame_set_label_widget (GTK_FRAME (frame6), label24);
-  gtk_label_set_use_markup (GTK_LABEL (label24), TRUE);
-
-  frameSampleAR = gtk_frame_new (NULL);
-  gtk_widget_show (frameSampleAR);
-  gtk_box_pack_start (GTK_BOX (vbox5), frameSampleAR, FALSE, TRUE, 0);
-
-  alignment12 = gtk_alignment_new (0.5, 0.5, 1, 1);
-  gtk_widget_show (alignment12);
-  gtk_container_add (GTK_CONTAINER (frameSampleAR), alignment12);
-  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment12), 7, 7, 7, 7);
-
-  table35 = gtk_table_new (3, 2, FALSE);
-  gtk_widget_show (table35);
-  gtk_container_add (GTK_CONTAINER (alignment12), table35);
-  gtk_table_set_row_spacings (GTK_TABLE (table35), 3);
-  gtk_table_set_col_spacings (GTK_TABLE (table35), 10);
-
-  hbox12 = gtk_hbox_new (FALSE, 0);
-  gtk_widget_show (hbox12);
-  gtk_table_attach (GTK_TABLE (table35), hbox12, 1, 2, 1, 2,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (GTK_FILL), 0, 0);
-
-  entryAR_Num = gtk_entry_new ();
-  gtk_widget_show (entryAR_Num);
-  gtk_box_pack_start (GTK_BOX (hbox12), entryAR_Num, TRUE, TRUE, 0);
-  gtk_tooltips_set_tip (tooltips, entryAR_Num, _("Enforce the size of a decoded pixel decoded to a certain value. Set this to 1:1 for non-anamorphic video."), NULL);
-  gtk_entry_set_text (GTK_ENTRY (entryAR_Num), _("1"));
-  gtk_entry_set_width_chars (GTK_ENTRY (entryAR_Num), 4);
-
-  label53 = gtk_label_new (_(":"));
-  gtk_widget_show (label53);
-  gtk_box_pack_start (GTK_BOX (hbox12), label53, FALSE, FALSE, 3);
-
-  entryAR_Den = gtk_entry_new ();
-  gtk_widget_show (entryAR_Den);
-  gtk_box_pack_start (GTK_BOX (hbox12), entryAR_Den, TRUE, TRUE, 0);
-  gtk_tooltips_set_tip (tooltips, entryAR_Den, _("Enforce the size of a decoded pixel decoded to a certain value. Set this to 1:1 for non-anamorphic video."), NULL);
-  gtk_entry_set_text (GTK_ENTRY (entryAR_Den), _("1"));
-  gtk_entry_set_width_chars (GTK_ENTRY (entryAR_Den), 4);
-
-  radiobuttonCustomAR = gtk_radio_button_new_with_mnemonic (NULL, _("Custom"));
-  gtk_widget_show (radiobuttonCustomAR);
-  gtk_table_attach (GTK_TABLE (table35), radiobuttonCustomAR, 0, 1, 1, 2,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_tooltips_set_tip (tooltips, radiobuttonCustomAR, _("Set a custom aspect ratio. The default 1:1 is recommended for most video."), NULL);
-  gtk_radio_button_set_group (GTK_RADIO_BUTTON (radiobuttonCustomAR), radiobuttonCustomAR_group);
-  radiobuttonCustomAR_group = gtk_radio_button_get_group (GTK_RADIO_BUTTON (radiobuttonCustomAR));
-  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (radiobuttonCustomAR), TRUE);
-
-  radiobuttonPredefinedAR = gtk_radio_button_new_with_mnemonic (NULL, _("Predefined Aspect Ratio"));
-  gtk_widget_show (radiobuttonPredefinedAR);
-  gtk_table_attach (GTK_TABLE (table35), radiobuttonPredefinedAR, 0, 1, 0, 1,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_tooltips_set_tip (tooltips, radiobuttonPredefinedAR, _("Set a common predefined aspect ratio"), NULL);
-  gtk_radio_button_set_group (GTK_RADIO_BUTTON (radiobuttonPredefinedAR), radiobuttonCustomAR_group);
-  radiobuttonCustomAR_group = gtk_radio_button_get_group (GTK_RADIO_BUTTON (radiobuttonPredefinedAR));
-
-  radiobuttonAsInputAR = gtk_radio_button_new_with_mnemonic (NULL, _("As Input"));
-  gtk_widget_show (radiobuttonAsInputAR);
-  gtk_table_attach (GTK_TABLE (table35), radiobuttonAsInputAR, 0, 1, 2, 3,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_radio_button_set_group (GTK_RADIO_BUTTON (radiobuttonAsInputAR), radiobuttonCustomAR_group);
-  radiobuttonCustomAR_group = gtk_radio_button_get_group (GTK_RADIO_BUTTON (radiobuttonAsInputAR));
-
-  label40 = gtk_label_new ("1:1 (1:1)");
-  gtk_widget_show (label40);
-  gtk_table_attach (GTK_TABLE (table35), label40, 1, 2, 2, 3,
-                    (GtkAttachOptions) (0),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_misc_set_alignment (GTK_MISC (label40), 0, 0.5);
-
-  comboboxentry1 = gtk_combo_box_new_text ();
-  gtk_widget_show (comboboxentry1);
-  gtk_table_attach (GTK_TABLE (table35), comboboxentry1, 1, 2, 0, 1,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (GTK_FILL), 0, 0);
-
-  label39 = gtk_label_new (_("<b>Sample Aspect Ratio</b>"));
-  gtk_widget_show (label39);
-  gtk_frame_set_label_widget (GTK_FRAME (frameSampleAR), label39);
-  gtk_label_set_use_markup (GTK_LABEL (label39), TRUE);
-
-  frame7 = gtk_frame_new (NULL);
-  gtk_widget_show (frame7);
-  gtk_box_pack_start (GTK_BOX (vbox5), frame7, FALSE, TRUE, 0);
-
-  alignment7 = gtk_alignment_new (0.5, 0.5, 1, 1);
-  gtk_widget_show (alignment7);
-  gtk_container_add (GTK_CONTAINER (frame7), alignment7);
-  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment7), 7, 7, 7, 7);
-
-  vbox7 = gtk_vbox_new (FALSE, 3);
-  gtk_widget_show (vbox7);
-  gtk_container_add (GTK_CONTAINER (alignment7), vbox7);
-
-  alignment21 = gtk_alignment_new (0.5, 0.5, 1, 1);
-  gtk_widget_show (alignment21);
-  gtk_box_pack_start (GTK_BOX (vbox7), alignment21, TRUE, TRUE, 0);
-  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment21), 0, 3, 0, 0);
-
-  hbox2 = gtk_hbox_new (FALSE, 17);
-  gtk_widget_show (hbox2);
-  gtk_container_add (GTK_CONTAINER (alignment21), hbox2);
-
-  checkbuttonCABAC = gtk_check_button_new_with_mnemonic (_("CABAC"));
-  gtk_widget_show (checkbuttonCABAC);
-  gtk_box_pack_start (GTK_BOX (hbox2), checkbuttonCABAC, FALSE, FALSE, 0);
-  gtk_tooltips_set_tip (tooltips, checkbuttonCABAC, _("Lossless compression technique that reduces bitrate by approximately 10%. Increases encoding and decoding time."), NULL);
-  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (checkbuttonCABAC), TRUE);
-
-  hbox7 = gtk_hbox_new (FALSE, 10);
-  gtk_widget_show (hbox7);
-  gtk_box_pack_start (GTK_BOX (hbox2), hbox7, FALSE, FALSE, 0);
-
-  labelTrellis = gtk_label_new (_("Trellis"));
-  gtk_widget_show (labelTrellis);
-  gtk_box_pack_start (GTK_BOX (hbox7), labelTrellis, FALSE, FALSE, 0);
-  gtk_misc_set_alignment (GTK_MISC (labelTrellis), 0, 0.5);
-
-  spinbuttonTrellis_adj = gtk_adjustment_new (0, 0, 2, 1, 10, 10);
-  spinbuttonTrellis = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonTrellis_adj), 1, 0);
-  gtk_widget_show (spinbuttonTrellis);
-  gtk_box_pack_start (GTK_BOX (hbox7), spinbuttonTrellis, FALSE, FALSE, 0);
-  gtk_tooltips_set_tip (tooltips, spinbuttonTrellis, _("Use Trellis Rate Distortion Optimisation to find optimal encoding for each block. Level 0 equals disabled, level 1 equals normal and level 2 equals high."), NULL);
-  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonTrellis), TRUE);
-
-  hbox11 = gtk_hbox_new (FALSE, 10);
-  gtk_widget_show (hbox11);
-  gtk_box_pack_start (GTK_BOX (hbox2), hbox11, FALSE, FALSE, 2);
-
-  labelNoiseReduction = gtk_label_new (_("Noise Reduction"));
-  gtk_widget_show (labelNoiseReduction);
-  gtk_box_pack_start (GTK_BOX (hbox11), labelNoiseReduction, FALSE, FALSE, 0);
-  gtk_misc_set_alignment (GTK_MISC (labelNoiseReduction), 0, 0.5);
-
-  spinbuttonNoiseReduction_adj = gtk_adjustment_new (0, 0, 1000000000, 1, 10, 10);
-  spinbuttonNoiseReduction = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonNoiseReduction_adj), 1, 0);
-  gtk_widget_show (spinbuttonNoiseReduction);
-  gtk_box_pack_start (GTK_BOX (hbox11), spinbuttonNoiseReduction, FALSE, FALSE, 0);
-  gtk_tooltips_set_tip (tooltips, spinbuttonNoiseReduction, _("Set the amount of noise reduction"), NULL);
-  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonNoiseReduction), TRUE);
-
-  hbox3 = gtk_hbox_new (FALSE, 10);
-  gtk_widget_show (hbox3);
-  gtk_box_pack_start (GTK_BOX (vbox7), hbox3, TRUE, TRUE, 0);
-
-  checkbuttonDeblockingFilter = gtk_check_button_new_with_mnemonic (_("Deblocking Filter"));
-  gtk_widget_show (checkbuttonDeblockingFilter);
-  gtk_box_pack_start (GTK_BOX (hbox3), checkbuttonDeblockingFilter, FALSE, FALSE, 0);
-  gtk_tooltips_set_tip (tooltips, checkbuttonDeblockingFilter, _("Enable in-loop deblocking to filter the video"), NULL);
-  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (checkbuttonDeblockingFilter), TRUE);
-
-  table8 = gtk_table_new (2, 2, FALSE);
-  gtk_widget_show (table8);
-  gtk_box_pack_start (GTK_BOX (hbox3), table8, TRUE, TRUE, 0);
-  gtk_table_set_row_spacings (GTK_TABLE (table8), 3);
-  gtk_table_set_col_spacings (GTK_TABLE (table8), 10);
-
-  labelThreshold = gtk_label_new (_("Threshold"));
-  gtk_widget_show (labelThreshold);
-  gtk_table_attach (GTK_TABLE (table8), labelThreshold, 0, 1, 1, 2,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_label_set_use_markup (GTK_LABEL (labelThreshold), TRUE);
-  gtk_misc_set_alignment (GTK_MISC (labelThreshold), 0, 0.5);
-
-  labelStrength = gtk_label_new (_("Strength"));
-  gtk_widget_show (labelStrength);
-  gtk_table_attach (GTK_TABLE (table8), labelStrength, 0, 1, 0, 1,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_label_set_use_markup (GTK_LABEL (labelStrength), TRUE);
-  gtk_misc_set_alignment (GTK_MISC (labelStrength), 0, 0.5);
-
-  spinbuttonThreshold_adj = gtk_adjustment_new (0, -6, 6, 1, 10, 10);
-  spinbuttonThreshold = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonThreshold_adj), 1, 0);
-  gtk_widget_show (spinbuttonThreshold);
-  gtk_table_attach (GTK_TABLE (table8), spinbuttonThreshold, 1, 2, 1, 2,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_tooltips_set_tip (tooltips, spinbuttonThreshold, _("Threshold for block detection. Positive values will detect more blocks, negative values will detect less."), NULL);
-  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonThreshold), TRUE);
-
-  spinbuttonStrength_adj = gtk_adjustment_new (0, -6, 6, 1, 10, 10);
-  spinbuttonStrength = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonStrength_adj), 1, 0);
-  gtk_widget_show (spinbuttonStrength);
-  gtk_table_attach (GTK_TABLE (table8), spinbuttonStrength, 1, 2, 0, 1,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_tooltips_set_tip (tooltips, spinbuttonStrength, _("Positive values will soften the video, negative values will sharpen"), NULL);
-  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonStrength), TRUE);
-
-  label25 = gtk_label_new (_("<b>Misc. Options</b>"));
-  gtk_widget_show (label25);
-  gtk_frame_set_label_widget (GTK_FRAME (frame7), label25);
-  gtk_label_set_use_markup (GTK_LABEL (label25), TRUE);
-
-  labelPageMotion_More = gtk_label_new (_("Motion & Misc"));
-  gtk_widget_show (labelPageMotion_More);
-  gtk_notebook_set_tab_label (GTK_NOTEBOOK (notebook1), gtk_notebook_get_nth_page (GTK_NOTEBOOK (notebook1), 1), labelPageMotion_More);
-
-  alignment16 = gtk_alignment_new (0.5, 0.5, 1, 1);
-  gtk_widget_show (alignment16);
-  gtk_container_add (GTK_CONTAINER (notebook1), alignment16);
-  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment16), 7, 7, 7, 7);
-
-  vbox2 = gtk_vbox_new (FALSE, 3);
-  gtk_widget_show (vbox2);
-  gtk_container_add (GTK_CONTAINER (alignment16), vbox2);
-
-  frame4 = gtk_frame_new (NULL);
-  gtk_widget_show (frame4);
-  gtk_box_pack_start (GTK_BOX (vbox2), frame4, FALSE, TRUE, 0);
-
-  alignment4 = gtk_alignment_new (0.5, 0.5, 1, 1);
-  gtk_widget_show (alignment4);
-  gtk_container_add (GTK_CONTAINER (frame4), alignment4);
-  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment4), 7, 7, 7, 7);
-
-  vbox3 = gtk_vbox_new (FALSE, 3);
-  gtk_widget_show (vbox3);
-  gtk_container_add (GTK_CONTAINER (alignment4), vbox3);
-
-  checkbutton8x8 = gtk_check_button_new_with_mnemonic (_("8x8 Transform"));
-  gtk_widget_show (checkbutton8x8);
-  gtk_box_pack_start (GTK_BOX (vbox3), checkbutton8x8, FALSE, FALSE, 0);
-  gtk_tooltips_set_tip (tooltips, checkbutton8x8, _("General block breakdown transformation"), NULL);
-  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (checkbutton8x8), TRUE);
-
-  checkbutton8x8P = gtk_check_button_new_with_mnemonic (_("8x8, 8x16 and 16x8 P-frame search"));
-  gtk_widget_show (checkbutton8x8P);
-  gtk_box_pack_start (GTK_BOX (vbox3), checkbutton8x8P, FALSE, FALSE, 0);
-  gtk_tooltips_set_tip (tooltips, checkbutton8x8P, _("Improve the P-frame quality"), NULL);
-  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (checkbutton8x8P), TRUE);
-
-  checkbutton8x8B = gtk_check_button_new_with_mnemonic (_("8x8, 8x16 and 16x8 B-frame search"));
-  gtk_widget_show (checkbutton8x8B);
-  gtk_box_pack_start (GTK_BOX (vbox3), checkbutton8x8B, FALSE, FALSE, 0);
-  gtk_tooltips_set_tip (tooltips, checkbutton8x8B, _("Improve the B-frame quality"), NULL);
-  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (checkbutton8x8B), TRUE);
-
-  checkbutton4x4 = gtk_check_button_new_with_mnemonic (_("4x4, 4x8 and 8x4 P-frame search"));
-  gtk_widget_show (checkbutton4x4);
-  gtk_box_pack_start (GTK_BOX (vbox3), checkbutton4x4, FALSE, FALSE, 0);
-  gtk_tooltips_set_tip (tooltips, checkbutton4x4, _("Further improve the P-frame quality"), NULL);
-
-  checkbutton8x8I = gtk_check_button_new_with_mnemonic (_("8x8 Intra search"));
-  gtk_widget_show (checkbutton8x8I);
-  gtk_box_pack_start (GTK_BOX (vbox3), checkbutton8x8I, FALSE, FALSE, 0);
-  gtk_tooltips_set_tip (tooltips, checkbutton8x8I, _("Enable DCT Intra block search to improve quality"), NULL);
-  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (checkbutton8x8I), TRUE);
-
-  checkbutton4x4I = gtk_check_button_new_with_mnemonic (_("4x4 Intra search"));
-  gtk_widget_show (checkbutton4x4I);
-  gtk_box_pack_start (GTK_BOX (vbox3), checkbutton4x4I, FALSE, FALSE, 0);
-  gtk_tooltips_set_tip (tooltips, checkbutton4x4I, _("Further enable DCT Intra block search to improve quality"), NULL);
-  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (checkbutton4x4I), TRUE);
-
-  label19 = gtk_label_new (_("<b>Partition Macroblocks</b>"));
-  gtk_widget_show (label19);
-  gtk_frame_set_label_widget (GTK_FRAME (frame4), label19);
-  gtk_label_set_use_markup (GTK_LABEL (label19), TRUE);
-
-  frame5 = gtk_frame_new (NULL);
-  gtk_widget_show (frame5);
-  gtk_box_pack_start (GTK_BOX (vbox2), frame5, FALSE, TRUE, 0);
-
-  alignment5 = gtk_alignment_new (0.5, 0.5, 1, 1);
-  gtk_widget_show (alignment5);
-  gtk_container_add (GTK_CONTAINER (frame5), alignment5);
-  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment5), 7, 7, 7, 7);
-
-  vbox4 = gtk_vbox_new (FALSE, 3);
-  gtk_widget_show (vbox4);
-  gtk_container_add (GTK_CONTAINER (alignment5), vbox4);
-
-  table5 = gtk_table_new (2, 2, FALSE);
-  gtk_widget_show (table5);
-  gtk_box_pack_start (GTK_BOX (vbox4), table5, TRUE, TRUE, 0);
-  gtk_table_set_row_spacings (GTK_TABLE (table5), 3);
-  gtk_table_set_col_spacings (GTK_TABLE (table5), 10);
-
-  labelBias = gtk_label_new (_("Bias"));
-  gtk_widget_show (labelBias);
-  gtk_table_attach (GTK_TABLE (table5), labelBias, 0, 1, 1, 2,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_misc_set_alignment (GTK_MISC (labelBias), 0, 0.5);
-
-  labelMaxConsecutive = gtk_label_new (_("Max Consecutive"));
-  gtk_widget_show (labelMaxConsecutive);
-  gtk_table_attach (GTK_TABLE (table5), labelMaxConsecutive, 0, 1, 0, 1,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_misc_set_alignment (GTK_MISC (labelMaxConsecutive), 0, 0.5);
-
-  spinbuttonBias_adj = gtk_adjustment_new (0, -100, 100, 1, 10, 10);
-  spinbuttonBias = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonBias_adj), 1, 0);
-  gtk_widget_show (spinbuttonBias);
-  gtk_table_attach (GTK_TABLE (table5), spinbuttonBias, 1, 2, 1, 2,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_tooltips_set_tip (tooltips, spinbuttonBias, _("Increase / decrease probability for how often B-frames are used. It will not violate the maximum consecutive frame limit."), NULL);
-  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonBias), TRUE);
-
-  spinbuttonMaxBFrame_adj = gtk_adjustment_new (3, 0, 15, 1, 10, 10);
-  spinbuttonMaxBFrame = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonMaxBFrame_adj), 1, 0);
-  gtk_widget_show (spinbuttonMaxBFrame);
-  gtk_table_attach (GTK_TABLE (table5), spinbuttonMaxBFrame, 1, 2, 0, 1,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_tooltips_set_tip (tooltips, spinbuttonMaxBFrame, _("Set the maximum number of consecutive B-frames. This defines how many duplicate frames can be dropped. Numbers 2 to 5 are recommended. This greatly improves the use of bitrate and quality."), NULL);
-  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonMaxBFrame), TRUE);
-
-  alignment20 = gtk_alignment_new (0.5, 0.5, 1, 1);
-  gtk_widget_show (alignment20);
-  gtk_box_pack_start (GTK_BOX (vbox4), alignment20, TRUE, TRUE, 0);
-  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment20), 3, 3, 0, 0);
-
-  table6 = gtk_table_new (2, 2, FALSE);
-  gtk_widget_show (table6);
-  gtk_container_add (GTK_CONTAINER (alignment20), table6);
-  gtk_table_set_row_spacings (GTK_TABLE (table6), 3);
-  gtk_table_set_col_spacings (GTK_TABLE (table6), 10);
-
-  checkbuttonBidirME = gtk_check_button_new_with_mnemonic (_("Bidirectional ME"));
-  gtk_widget_show (checkbuttonBidirME);
-  gtk_table_attach (GTK_TABLE (table6), checkbuttonBidirME, 1, 2, 0, 1,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_tooltips_set_tip (tooltips, checkbuttonBidirME, _("Optimise both motion vectors in B-frames. This will improve quality but take more time for encoding."), NULL);
-
-  checkbuttonWeighted = gtk_check_button_new_with_mnemonic (_("Weighted Biprediction"));
-  gtk_widget_show (checkbuttonWeighted);
-  gtk_table_attach (GTK_TABLE (table6), checkbuttonWeighted, 1, 2, 1, 2,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_tooltips_set_tip (tooltips, checkbuttonWeighted, _("Enables weighting of B-frames to help fades"), NULL);
-  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (checkbuttonWeighted), TRUE);
-
-  checkbuttonAdaptative = gtk_check_button_new_with_mnemonic (_("Adaptative DCT"));
-  gtk_widget_show (checkbuttonAdaptative);
-  gtk_table_attach (GTK_TABLE (table6), checkbuttonAdaptative, 0, 1, 1, 2,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_tooltips_set_tip (tooltips, checkbuttonAdaptative, _("Use fewer B-frames if needed. This is always recommended. If not enabled, the codec will always use the maximum number of consecutive B-frames."), NULL);
-  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (checkbuttonAdaptative), TRUE);
-
-  checkbuttonBasReference = gtk_check_button_new_with_mnemonic (_("Use as Reference"));
-  gtk_widget_show (checkbuttonBasReference);
-  gtk_table_attach (GTK_TABLE (table6), checkbuttonBasReference, 0, 1, 0, 1,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_tooltips_set_tip (tooltips, checkbuttonBasReference, _("Allow B-frames to make references non-linearly to another B-frame (instead of creating a duplicate copy)"), NULL);
-
-  hbox1 = gtk_hbox_new (FALSE, 10);
-  gtk_widget_show (hbox1);
-  gtk_box_pack_start (GTK_BOX (vbox4), hbox1, TRUE, TRUE, 0);
-
-  labelBFrameDirectMode = gtk_label_new (_("B-Frame Direct Mode"));
-  gtk_widget_show (labelBFrameDirectMode);
-  gtk_box_pack_start (GTK_BOX (hbox1), labelBFrameDirectMode, FALSE, TRUE, 0);
-  gtk_misc_set_alignment (GTK_MISC (labelBFrameDirectMode), 0, 0.5);
-
-  comboboxDirectMode = gtk_combo_box_new_text ();
-  gtk_widget_show (comboboxDirectMode);
-  gtk_box_pack_start (GTK_BOX (hbox1), comboboxDirectMode, FALSE, TRUE, 0);
-  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxDirectMode), _("None"));
-  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxDirectMode), _("Spatial"));
-  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxDirectMode), _("Temporal"));
-  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxDirectMode), _("Auto"));
-
-  label20 = gtk_label_new (_("<b>B-Frames</b>"));
-  gtk_widget_show (label20);
-  gtk_frame_set_label_widget (GTK_FRAME (frame5), label20);
-  gtk_label_set_use_markup (GTK_LABEL (label20), TRUE);
-
-  labelPagePartion_Frame = gtk_label_new (_("Partitions & Frames"));
-  gtk_widget_show (labelPagePartion_Frame);
-  gtk_notebook_set_tab_label (GTK_NOTEBOOK (notebook1), gtk_notebook_get_nth_page (GTK_NOTEBOOK (notebook1), 2), labelPagePartion_Frame);
-
-  alignment17 = gtk_alignment_new (0.5, 0.5, 1, 1);
-  gtk_widget_show (alignment17);
-  gtk_container_add (GTK_CONTAINER (notebook1), alignment17);
-  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment17), 7, 7, 7, 7);
-
-  vbox1 = gtk_vbox_new (FALSE, 3);
-  gtk_widget_show (vbox1);
-  gtk_container_add (GTK_CONTAINER (alignment17), vbox1);
-
-  frame1 = gtk_frame_new (NULL);
-  gtk_widget_show (frame1);
-  gtk_box_pack_start (GTK_BOX (vbox1), frame1, FALSE, TRUE, 1);
-
-  alignment1 = gtk_alignment_new (0.5, 0.5, 1, 1);
-  gtk_widget_show (alignment1);
-  gtk_container_add (GTK_CONTAINER (frame1), alignment1);
-  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment1), 7, 7, 7, 7);
-
-  table2 = gtk_table_new (3, 2, FALSE);
-  gtk_widget_show (table2);
-  gtk_container_add (GTK_CONTAINER (alignment1), table2);
-  gtk_table_set_row_spacings (GTK_TABLE (table2), 3);
-  gtk_table_set_col_spacings (GTK_TABLE (table2), 10);
-
-  spinbuttonKeyframeBoost_adj = gtk_adjustment_new (40, 0, 100, 1, 10, 10);
-  spinbuttonKeyframeBoost = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonKeyframeBoost_adj), 1, 0);
-  gtk_widget_show (spinbuttonKeyframeBoost);
-  gtk_table_attach (GTK_TABLE (table2), spinbuttonKeyframeBoost, 1, 2, 0, 1,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_widget_set_size_request (spinbuttonKeyframeBoost, 115, -1);
-  gtk_tooltips_set_tip (tooltips, spinbuttonKeyframeBoost, _("Set how much \"bitrate bonus\" a keyframe can get"), NULL);
-  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonKeyframeBoost), TRUE);
-
-  spinbuttonBframeReduction_adj = gtk_adjustment_new (30, 0, 100, 1, 10, 10);
-  spinbuttonBframeReduction = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonBframeReduction_adj), 1, 0);
-  gtk_widget_show (spinbuttonBframeReduction);
-  gtk_table_attach (GTK_TABLE (table2), spinbuttonBframeReduction, 1, 2, 1, 2,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_tooltips_set_tip (tooltips, spinbuttonBframeReduction, _("Set how much bitrate is deducted from a B-frame as compared to the previous P-frame"), NULL);
-  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonBframeReduction), TRUE);
-
-  spinbuttonBitrateVariability_adj = gtk_adjustment_new (60, 0, 100, 1, 10, 10);
-  spinbuttonBitrateVariability = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonBitrateVariability_adj), 1, 0);
-  gtk_widget_show (spinbuttonBitrateVariability);
-  gtk_table_attach (GTK_TABLE (table2), spinbuttonBitrateVariability, 1, 2, 2, 3,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_tooltips_set_tip (tooltips, spinbuttonBitrateVariability, _("Define how much the bitrate can fluctuate over the entire video. 0% results in a constant bitrate stream, while 100% results in a pure quality based bitrate stream."), NULL);
-  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonBitrateVariability), TRUE);
-
-  labelKeyframeboost = gtk_label_new (_("Keyframe Boost (%)"));
-  gtk_widget_show (labelKeyframeboost);
-  gtk_table_attach (GTK_TABLE (table2), labelKeyframeboost, 0, 1, 0, 1,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_misc_set_alignment (GTK_MISC (labelKeyframeboost), 0, 0.5);
-
-  label11 = gtk_label_new (_("B-frame Reduction (%)"));
-  gtk_widget_show (label11);
-  gtk_table_attach (GTK_TABLE (table2), label11, 0, 1, 1, 2,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_misc_set_alignment (GTK_MISC (label11), 0, 0.5);
-
-  label12 = gtk_label_new (_("Bitrate Variability (%)"));
-  gtk_widget_show (label12);
-  gtk_table_attach (GTK_TABLE (table2), label12, 0, 1, 2, 3,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_misc_set_alignment (GTK_MISC (label12), 0, 0.5);
-
-  label7 = gtk_label_new (_("<b>Bitrate</b>"));
-  gtk_widget_show (label7);
-  gtk_frame_set_label_widget (GTK_FRAME (frame1), label7);
-  gtk_label_set_use_markup (GTK_LABEL (label7), TRUE);
-
-  frame2 = gtk_frame_new (NULL);
-  gtk_widget_show (frame2);
-  gtk_box_pack_start (GTK_BOX (vbox1), frame2, FALSE, TRUE, 1);
-
-  alignment2 = gtk_alignment_new (0.5, 0.5, 1, 1);
-  gtk_widget_show (alignment2);
-  gtk_container_add (GTK_CONTAINER (frame2), alignment2);
-  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment2), 7, 7, 7, 7);
-
-  table3 = gtk_table_new (3, 2, FALSE);
-  gtk_widget_show (table3);
-  gtk_container_add (GTK_CONTAINER (alignment2), table3);
-  gtk_table_set_row_spacings (GTK_TABLE (table3), 3);
-  gtk_table_set_col_spacings (GTK_TABLE (table3), 20);
-
-  label13 = gtk_label_new (_("Min QP"));
-  gtk_widget_show (label13);
-  gtk_table_attach (GTK_TABLE (table3), label13, 0, 1, 0, 1,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_misc_set_alignment (GTK_MISC (label13), 0, 0.5);
-
-  label14 = gtk_label_new (_("Max QP"));
-  gtk_widget_show (label14);
-  gtk_table_attach (GTK_TABLE (table3), label14, 0, 1, 1, 2,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_misc_set_alignment (GTK_MISC (label14), 0, 0.5);
-
-  label15 = gtk_label_new (_("Max QP Step"));
-  gtk_widget_show (label15);
-  gtk_table_attach (GTK_TABLE (table3), label15, 0, 1, 2, 3,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_misc_set_alignment (GTK_MISC (label15), 0, 0.5);
-
-  spinbuttonMinQp_adj = gtk_adjustment_new (10, 10, 51, 1, 10, 10);
-  spinbuttonMinQp = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonMinQp_adj), 1, 0);
-  gtk_widget_show (spinbuttonMinQp);
-  gtk_table_attach (GTK_TABLE (table3), spinbuttonMinQp, 1, 2, 0, 1,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_widget_set_size_request (spinbuttonMinQp, 54, -1);
-  gtk_tooltips_set_tip (tooltips, spinbuttonMinQp, _("Enforce a minimum quantizer level"), NULL);
-  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonMinQp), TRUE);
-
-  spinbuttonMaxQp_adj = gtk_adjustment_new (51, 10, 51, 1, 10, 10);
-  spinbuttonMaxQp = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonMaxQp_adj), 1, 0);
-  gtk_widget_show (spinbuttonMaxQp);
-  gtk_table_attach (GTK_TABLE (table3), spinbuttonMaxQp, 1, 2, 1, 2,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_tooltips_set_tip (tooltips, spinbuttonMaxQp, _("Enforce a maximum quantizer level"), NULL);
-  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonMaxQp), TRUE);
-
-  spinbuttonQpStep_adj = gtk_adjustment_new (4, 0, 10, 1, 10, 10);
-  spinbuttonQpStep = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonQpStep_adj), 1, 0);
-  gtk_widget_show (spinbuttonQpStep);
-  gtk_table_attach (GTK_TABLE (table3), spinbuttonQpStep, 1, 2, 2, 3,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_tooltips_set_tip (tooltips, spinbuttonQpStep, _("Define how much the quantizer rate can change between two consecutive frames"), NULL);
-  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonQpStep), TRUE);
-
-  label8 = gtk_label_new (_("<b>Quantization Limits</b>"));
-  gtk_widget_show (label8);
-  gtk_frame_set_label_widget (GTK_FRAME (frame2), label8);
-  gtk_label_set_use_markup (GTK_LABEL (label8), TRUE);
-
-  frame3 = gtk_frame_new (NULL);
-  gtk_widget_show (frame3);
-  gtk_box_pack_start (GTK_BOX (vbox1), frame3, FALSE, TRUE, 1);
-
-  alignment3 = gtk_alignment_new (0.5, 0.5, 1, 1);
-  gtk_widget_show (alignment3);
-  gtk_container_add (GTK_CONTAINER (frame3), alignment3);
-  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment3), 7, 7, 7, 7);
-
-  table4 = gtk_table_new (3, 2, FALSE);
-  gtk_widget_show (table4);
-  gtk_container_add (GTK_CONTAINER (alignment3), table4);
-  gtk_table_set_row_spacings (GTK_TABLE (table4), 3);
-  gtk_table_set_col_spacings (GTK_TABLE (table4), 10);
-
-  spinbuttonSceneCut_adj = gtk_adjustment_new (40, 0, 100, 1, 10, 10);
-  spinbuttonSceneCut = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonSceneCut_adj), 1, 0);
-  gtk_widget_show (spinbuttonSceneCut);
-  gtk_table_attach (GTK_TABLE (table4), spinbuttonSceneCut, 1, 2, 0, 1,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_widget_set_size_request (spinbuttonSceneCut, 115, -1);
-  gtk_tooltips_set_tip (tooltips, spinbuttonSceneCut, _("Increase / decrease sensitivity for detecting scene changes. Improves I-frame usage and quality."), NULL);
-  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonSceneCut), TRUE);
-
-  label16 = gtk_label_new (_("Scene Cut Threshold"));
-  gtk_widget_show (label16);
-  gtk_table_attach (GTK_TABLE (table4), label16, 0, 1, 0, 1,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_misc_set_alignment (GTK_MISC (label16), 0, 0.5);
-
-  label17 = gtk_label_new (_("Min IDR Frame Interval"));
-  gtk_widget_show (label17);
-  gtk_table_attach (GTK_TABLE (table4), label17, 0, 1, 1, 2,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_misc_set_alignment (GTK_MISC (label17), 0, 0.5);
-
-  spinbuttonMinIdr_adj = gtk_adjustment_new (25, 0, 100, 1, 10, 10);
-  spinbuttonMinIdr = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonMinIdr_adj), 1, 0);
-  gtk_widget_show (spinbuttonMinIdr);
-  gtk_table_attach (GTK_TABLE (table4), spinbuttonMinIdr, 1, 2, 1, 2,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_tooltips_set_tip (tooltips, spinbuttonMinIdr, _("Set minimum frame interval between IDR frames. Defines the minimum amount a frame can be reused and referenced by other frames before a new IDR frame is established."), NULL);
-  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonMinIdr), TRUE);
-
-  spinbuttonMaxIdr_adj = gtk_adjustment_new (250, 1, 1000, 1, 10, 10);
-  spinbuttonMaxIdr = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonMaxIdr_adj), 1, 0);
-  gtk_widget_show (spinbuttonMaxIdr);
-  gtk_table_attach (GTK_TABLE (table4), spinbuttonMaxIdr, 1, 2, 2, 3,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_tooltips_set_tip (tooltips, spinbuttonMaxIdr, _("Set maximum frame interval between IDR frames. Defines the maximum amount a frame can be reused and referenced by other frames before a new IDR frame is established."), NULL);
-  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonMaxIdr), TRUE);
-
-  label18 = gtk_label_new (_("Max IDR Frame Interval"));
-  gtk_widget_show (label18);
-  gtk_table_attach (GTK_TABLE (table4), label18, 0, 1, 2, 3,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_misc_set_alignment (GTK_MISC (label18), 0, 0.5);
-
-  labelMoreEncodingSettings = gtk_label_new (_("<b>More Rate Settings</b>"));
-  gtk_widget_show (labelMoreEncodingSettings);
-  gtk_frame_set_label_widget (GTK_FRAME (frame3), labelMoreEncodingSettings);
-  gtk_label_set_use_markup (GTK_LABEL (labelMoreEncodingSettings), TRUE);
-
-  frameVideoBufferVerifier = gtk_frame_new (NULL);
-  gtk_widget_show (frameVideoBufferVerifier);
-  gtk_box_pack_start (GTK_BOX (vbox1), frameVideoBufferVerifier, FALSE, TRUE, 0);
-
-  alignment11 = gtk_alignment_new (0.5, 0.5, 1, 1);
-  gtk_widget_show (alignment11);
-  gtk_container_add (GTK_CONTAINER (frameVideoBufferVerifier), alignment11);
-  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment11), 7, 7, 7, 7);
-
-  table12 = gtk_table_new (3, 2, FALSE);
-  gtk_widget_show (table12);
-  gtk_container_add (GTK_CONTAINER (alignment11), table12);
-  gtk_table_set_row_spacings (GTK_TABLE (table12), 3);
-  gtk_table_set_col_spacings (GTK_TABLE (table12), 10);
-
-  labelVBVBufferSize = gtk_label_new (_("VBV Buffer Size"));
-  gtk_widget_show (labelVBVBufferSize);
-  gtk_table_attach (GTK_TABLE (table12), labelVBVBufferSize, 0, 1, 1, 2,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_misc_set_alignment (GTK_MISC (labelVBVBufferSize), 0, 0.5);
-
-  labelVBVInitialbuffer = gtk_label_new (_("Initial VBV Buffer (%)"));
-  gtk_widget_show (labelVBVInitialbuffer);
-  gtk_table_attach (GTK_TABLE (table12), labelVBVInitialbuffer, 0, 1, 2, 3,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_misc_set_alignment (GTK_MISC (labelVBVInitialbuffer), 0, 0.5);
-
-  labelVBVMaximumBitrate = gtk_label_new (_("Maximum Local Bitrate"));
-  gtk_widget_show (labelVBVMaximumBitrate);
-  gtk_table_attach (GTK_TABLE (table12), labelVBVMaximumBitrate, 0, 1, 0, 1,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_misc_set_alignment (GTK_MISC (labelVBVMaximumBitrate), 0, 0.5);
-
-  spinbuttonvbv_max_bitrate_adj = gtk_adjustment_new (0, 0, 99999, 1, 10, 10);
-  spinbuttonvbv_max_bitrate = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonvbv_max_bitrate_adj), 1, 0);
-  gtk_widget_show (spinbuttonvbv_max_bitrate);
-  gtk_table_attach (GTK_TABLE (table12), spinbuttonvbv_max_bitrate, 1, 2, 0, 1,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonvbv_max_bitrate), TRUE);
-
-  spinbuttonvbv_buffer_size_adj = gtk_adjustment_new (0, 0, 99999, 1, 10, 10);
-  spinbuttonvbv_buffer_size = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonvbv_buffer_size_adj), 1, 0);
-  gtk_widget_show (spinbuttonvbv_buffer_size);
-  gtk_table_attach (GTK_TABLE (table12), spinbuttonvbv_buffer_size, 1, 2, 1, 2,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonvbv_buffer_size), TRUE);
-
-  spinbuttonvbv_buffer_init_adj = gtk_adjustment_new (90, 0, 100, 1, 10, 10);
-  spinbuttonvbv_buffer_init = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonvbv_buffer_init_adj), 1, 0);
-  gtk_widget_show (spinbuttonvbv_buffer_init);
-  gtk_table_attach (GTK_TABLE (table12), spinbuttonvbv_buffer_init, 1, 2, 2, 3,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonvbv_buffer_init), TRUE);
-
-  labelVideoBufferVerifier = gtk_label_new (_("<b>Video Buffer Verifier</b>"));
-  gtk_widget_show (labelVideoBufferVerifier);
-  gtk_frame_set_label_widget (GTK_FRAME (frameVideoBufferVerifier), labelVideoBufferVerifier);
-  gtk_label_set_use_markup (GTK_LABEL (labelVideoBufferVerifier), TRUE);
-
-  labelPageRateControl = gtk_label_new (_("Rate Control"));
-  gtk_widget_show (labelPageRateControl);
-  gtk_notebook_set_tab_label (GTK_NOTEBOOK (notebook1), gtk_notebook_get_nth_page (GTK_NOTEBOOK (notebook1), 3), labelPageRateControl);
-
-  alignment18 = gtk_alignment_new (0.5, 0.5, 1, 1);
-  gtk_widget_show (alignment18);
-  gtk_container_add (GTK_CONTAINER (notebook1), alignment18);
-  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment18), 7, 7, 7, 7);
-
-  vbox8 = gtk_vbox_new (FALSE, 3);
-  gtk_widget_show (vbox8);
-  gtk_container_add (GTK_CONTAINER (alignment18), vbox8);
-
-  frame10 = gtk_frame_new (NULL);
-  gtk_widget_show (frame10);
-  gtk_box_pack_start (GTK_BOX (vbox8), frame10, FALSE, TRUE, 0);
-
-  alignment10 = gtk_alignment_new (0.5, 0.5, 1, 1);
-  gtk_widget_show (alignment10);
-  gtk_container_add (GTK_CONTAINER (frame10), alignment10);
-  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment10), 7, 7, 7, 7);
-
-  table15 = gtk_table_new (4, 2, FALSE);
-  gtk_widget_show (table15);
-  gtk_container_add (GTK_CONTAINER (alignment10), table15);
-  gtk_table_set_row_spacings (GTK_TABLE (table15), 3);
-  gtk_table_set_col_spacings (GTK_TABLE (table15), 10);
-
-  labelBitrateVariance = gtk_label_new (_("Bitrate Variance"));
-  gtk_widget_show (labelBitrateVariance);
-  gtk_table_attach (GTK_TABLE (table15), labelBitrateVariance, 0, 1, 0, 1,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_misc_set_alignment (GTK_MISC (labelBitrateVariance), 0, 0.5);
-
-  spinbuttonBitrateVariance_adj = gtk_adjustment_new (1, 0, 1, 0.10000000149, 10, 10);
-  spinbuttonBitrateVariance = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonBitrateVariance_adj), 0.10000000149, 1);
-  gtk_widget_show (spinbuttonBitrateVariance);
-  gtk_table_attach (GTK_TABLE (table15), spinbuttonBitrateVariance, 1, 2, 0, 1,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_tooltips_set_tip (tooltips, spinbuttonBitrateVariance, _("Allowed variance of average bitrate. Lower values mean less variance. Higher values mean more variance."), NULL);
-  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonBitrateVariance), TRUE);
-
-  spinbuttonQuantizerCompression_adj = gtk_adjustment_new (0.600000023842, 0, 1, 0.10000000149, 10, 10);
-  spinbuttonQuantizerCompression = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonQuantizerCompression_adj), 0.10000000149, 1);
-  gtk_widget_show (spinbuttonQuantizerCompression);
-  gtk_table_attach (GTK_TABLE (table15), spinbuttonQuantizerCompression, 1, 2, 1, 2,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_tooltips_set_tip (tooltips, spinbuttonQuantizerCompression, _("Allowed variance of average quantizer or quality. Lower values mean less variance. Higher values mean more variance. Note that 0 means constant quality while 1 means constant fluctuation. Recommended 0.6."), NULL);
-  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonQuantizerCompression), TRUE);
-
-  spinbuttonTempBlurFrame_adj = gtk_adjustment_new (20, 0, 999, 1, 10, 10);
-  spinbuttonTempBlurFrame = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonTempBlurFrame_adj), 1, 0);
-  gtk_widget_show (spinbuttonTempBlurFrame);
-  gtk_table_attach (GTK_TABLE (table15), spinbuttonTempBlurFrame, 1, 2, 2, 3,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_tooltips_set_tip (tooltips, spinbuttonTempBlurFrame, _("Reduced fluctuations in Quantizer (before curve compression)"), NULL);
-  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonTempBlurFrame), TRUE);
-
-  spinbuttonTempBlurQuant_adj = gtk_adjustment_new (0.5, 0, 1, 0.5, 10, 10);
-  spinbuttonTempBlurQuant = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonTempBlurQuant_adj), 0.5, 1);
-  gtk_widget_show (spinbuttonTempBlurQuant);
-  gtk_table_attach (GTK_TABLE (table15), spinbuttonTempBlurQuant, 1, 2, 3, 4,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonTempBlurQuant), TRUE);
-
-  labelQuantizerCompression = gtk_label_new (_("Quantizer Compression"));
-  gtk_widget_show (labelQuantizerCompression);
-  gtk_table_attach (GTK_TABLE (table15), labelQuantizerCompression, 0, 1, 1, 2,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_misc_set_alignment (GTK_MISC (labelQuantizerCompression), 0, 0.5);
-
-  labelTempBlurEstFrame = gtk_label_new (_("Temp. Blur of Est. Frame Complexity"));
-  gtk_widget_show (labelTempBlurEstFrame);
-  gtk_table_attach (GTK_TABLE (table15), labelTempBlurEstFrame, 0, 1, 2, 3,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_misc_set_alignment (GTK_MISC (labelTempBlurEstFrame), 0, 0.5);
-
-  labelTempBlueQuant = gtk_label_new (_("Temp. Blur of Quant. after CC"));
-  gtk_widget_show (labelTempBlueQuant);
-  gtk_table_attach (GTK_TABLE (table15), labelTempBlueQuant, 0, 1, 3, 4,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_misc_set_alignment (GTK_MISC (labelTempBlueQuant), 0, 0.5);
-
-  labelMisc = gtk_label_new (_("<b>Misc</b>"));
-  gtk_widget_show (labelMisc);
-  gtk_frame_set_label_widget (GTK_FRAME (frame10), labelMisc);
-  gtk_label_set_use_markup (GTK_LABEL (labelMisc), TRUE);
-
-  frame11 = gtk_frame_new (NULL);
-  gtk_widget_show (frame11);
-  gtk_box_pack_start (GTK_BOX (vbox8), frame11, FALSE, TRUE, 0);
-
-  alignment13 = gtk_alignment_new (0.5, 0.5, 1, 1);
-  gtk_widget_show (alignment13);
-  gtk_container_add (GTK_CONTAINER (frame11), alignment13);
-  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment13), 7, 7, 7, 7);
-
-  table16 = gtk_table_new (3, 2, FALSE);
-  gtk_widget_show (table16);
-  gtk_container_add (GTK_CONTAINER (alignment13), table16);
-  gtk_table_set_row_spacings (GTK_TABLE (table16), 3);
-  gtk_table_set_col_spacings (GTK_TABLE (table16), 10);
-
-  spinbutton8_adj = gtk_adjustment_new (1.39999997616, 1, 10, 0.10000000149, 10, 10);
-  spinbutton8 = gtk_spin_button_new (GTK_ADJUSTMENT (spinbutton8_adj), 0.10000000149, 1);
-  gtk_widget_show (spinbutton8);
-  gtk_table_attach (GTK_TABLE (table16), spinbutton8, 1, 2, 0, 1,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_tooltips_set_tip (tooltips, spinbutton8, _("Quantization factors used between I and P-frames"), NULL);
-  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbutton8), TRUE);
-
-  spinbutton9_adj = gtk_adjustment_new (1.29999995232, 1, 10, 0.10000000149, 10, 10);
-  spinbutton9 = gtk_spin_button_new (GTK_ADJUSTMENT (spinbutton9_adj), 0.10000000149, 1);
-  gtk_widget_show (spinbutton9);
-  gtk_table_attach (GTK_TABLE (table16), spinbutton9, 1, 2, 1, 2,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_tooltips_set_tip (tooltips, spinbutton9, _("Quantization used between P and B-frames"), NULL);
-  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbutton9), TRUE);
-
-  spinbuttonChromaQPOffset_adj = gtk_adjustment_new (0, -12, 12, 1, 10, 10);
-  spinbuttonChromaQPOffset = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonChromaQPOffset_adj), 1, 0);
-  gtk_widget_show (spinbuttonChromaQPOffset);
-  gtk_table_attach (GTK_TABLE (table16), spinbuttonChromaQPOffset, 1, 2, 2, 3,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_tooltips_set_tip (tooltips, spinbuttonChromaQPOffset, _("Quantization difference between chroma (color) and luma (brightness)"), NULL);
-  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonChromaQPOffset), TRUE);
-
-  labelFactorbetweenIandP = gtk_label_new (_("Factor between I and P-frame Quants"));
-  gtk_widget_show (labelFactorbetweenIandP);
-  gtk_table_attach (GTK_TABLE (table16), labelFactorbetweenIandP, 0, 1, 0, 1,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_misc_set_alignment (GTK_MISC (labelFactorbetweenIandP), 0, 0.5);
-
-  labelFactorbetweenPandB = gtk_label_new (_("Factor between P and B-frame Quants"));
-  gtk_widget_show (labelFactorbetweenPandB);
-  gtk_table_attach (GTK_TABLE (table16), labelFactorbetweenPandB, 0, 1, 1, 2,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_misc_set_alignment (GTK_MISC (labelFactorbetweenPandB), 0, 0.5);
-
-  labelChromaQPOffset = gtk_label_new (_("Chroma QP Offset"));
-  gtk_widget_show (labelChromaQPOffset);
-  gtk_table_attach (GTK_TABLE (table16), labelChromaQPOffset, 0, 1, 2, 3,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_misc_set_alignment (GTK_MISC (labelChromaQPOffset), 0, 0.5);
-
-  labelQuantizers = gtk_label_new (_("<b>Quantizers</b>"));
-  gtk_widget_show (labelQuantizers);
-  gtk_frame_set_label_widget (GTK_FRAME (frame11), labelQuantizers);
-  gtk_label_set_use_markup (GTK_LABEL (labelQuantizers), TRUE);
-
-  frame9 = gtk_frame_new (NULL);
-  gtk_widget_show (frame9);
-  gtk_box_pack_start (GTK_BOX (vbox8), frame9, FALSE, TRUE, 0);
-
-  alignment9 = gtk_alignment_new (0.5, 0.5, 1, 1);
-  gtk_widget_show (alignment9);
-  gtk_container_add (GTK_CONTAINER (frame9), alignment9);
-  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment9), 7, 7, 7, 7);
-
-  vbox9 = gtk_vbox_new (FALSE, 3);
-  gtk_widget_show (vbox9);
-  gtk_container_add (GTK_CONTAINER (alignment9), vbox9);
-
-  radiobuttonFlatmatrix = gtk_radio_button_new_with_mnemonic (NULL, _("Flat Matrix"));
-  gtk_widget_show (radiobuttonFlatmatrix);
-  gtk_box_pack_start (GTK_BOX (vbox9), radiobuttonFlatmatrix, FALSE, FALSE, 0);
-  gtk_radio_button_set_group (GTK_RADIO_BUTTON (radiobuttonFlatmatrix), radiobuttonFlatmatrix_group);
-  radiobuttonFlatmatrix_group = gtk_radio_button_get_group (GTK_RADIO_BUTTON (radiobuttonFlatmatrix));
-  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (radiobuttonFlatmatrix), TRUE);
-
-  radiobuttonJVTmatrix = gtk_radio_button_new_with_mnemonic (NULL, _("JVT Matrix"));
-  gtk_widget_show (radiobuttonJVTmatrix);
-  gtk_box_pack_start (GTK_BOX (vbox9), radiobuttonJVTmatrix, FALSE, FALSE, 0);
-  gtk_radio_button_set_group (GTK_RADIO_BUTTON (radiobuttonJVTmatrix), radiobuttonFlatmatrix_group);
-  radiobuttonFlatmatrix_group = gtk_radio_button_get_group (GTK_RADIO_BUTTON (radiobuttonJVTmatrix));
-
-  hbox13 = gtk_hbox_new (FALSE, 10);
-  gtk_widget_show (hbox13);
-  gtk_box_pack_start (GTK_BOX (vbox9), hbox13, FALSE, FALSE, 0);
-
-  radiobuttonCustommatrix = gtk_radio_button_new_with_mnemonic (NULL, _("Custom Matrix"));
-  gtk_widget_show (radiobuttonCustommatrix);
-  gtk_box_pack_start (GTK_BOX (hbox13), radiobuttonCustommatrix, TRUE, TRUE, 0);
-  gtk_radio_button_set_group (GTK_RADIO_BUTTON (radiobuttonCustommatrix), radiobuttonFlatmatrix_group);
-  radiobuttonFlatmatrix_group = gtk_radio_button_get_group (GTK_RADIO_BUTTON (radiobuttonCustommatrix));
-
-  hbox14 = gtk_hbox_new (FALSE, 0);
-  gtk_widget_show (hbox14);
-  gtk_box_pack_start (GTK_BOX (hbox13), hbox14, TRUE, TRUE, 0);
-
-  filechooserbuttonOpenCQMFile = gtk_file_chooser_button_new (_("Open CQM file"), GTK_FILE_CHOOSER_ACTION_OPEN);
-  gtk_widget_show (filechooserbuttonOpenCQMFile);
-  gtk_box_pack_start (GTK_BOX (hbox14), filechooserbuttonOpenCQMFile, TRUE, TRUE, 0);
-
-  vseparator1 = gtk_vseparator_new ();
-  gtk_widget_show (vseparator1);
-  gtk_box_pack_start (GTK_BOX (hbox14), vseparator1, TRUE, TRUE, 0);
-
-  buttonEditCustomMatrix = gtk_button_new_with_mnemonic (_("Edit Custom Matrix"));
-  gtk_widget_show (buttonEditCustomMatrix);
-  gtk_box_pack_start (GTK_BOX (hbox14), buttonEditCustomMatrix, FALSE, FALSE, 0);
-  gtk_tooltips_set_tip (tooltips, buttonEditCustomMatrix, _("Edit loaded custom quantization matrix file"), NULL);
-
-  labelFrameQuantizationMatrices = gtk_label_new (_("<b>Quantization Matrices</b>"));
-  gtk_widget_show (labelFrameQuantizationMatrices);
-  gtk_frame_set_label_widget (GTK_FRAME (frame9), labelFrameQuantizationMatrices);
-  gtk_label_set_use_markup (GTK_LABEL (labelFrameQuantizationMatrices), TRUE);
-
-  labelMore = gtk_label_new (_("More"));
-  gtk_widget_show (labelMore);
-  gtk_notebook_set_tab_label (GTK_NOTEBOOK (notebook1), gtk_notebook_get_nth_page (GTK_NOTEBOOK (notebook1), 4), labelMore);
-
-  dialog_action_area1 = GTK_DIALOG (dialog1)->action_area;
-  gtk_widget_show (dialog_action_area1);
-  gtk_button_box_set_layout (GTK_BUTTON_BOX (dialog_action_area1), GTK_BUTTONBOX_END);
-
-  buttonResetDaults = gtk_button_new_with_mnemonic (_("_Defaults"));
-  gtk_widget_show (buttonResetDaults);
-  gtk_dialog_add_action_widget (GTK_DIALOG (dialog1), buttonResetDaults, 0);
-  GTK_WIDGET_SET_FLAGS (buttonResetDaults, GTK_CAN_DEFAULT);
-
-  cancelbutton1 = gtk_button_new_from_stock ("gtk-cancel");
-  gtk_widget_show (cancelbutton1);
-  gtk_dialog_add_action_widget (GTK_DIALOG (dialog1), cancelbutton1, GTK_RESPONSE_CANCEL);
-  GTK_WIDGET_SET_FLAGS (cancelbutton1, GTK_CAN_DEFAULT);
-
-  okbutton1 = gtk_button_new_from_stock ("gtk-ok");
-  gtk_widget_show (okbutton1);
-  gtk_dialog_add_action_widget (GTK_DIALOG (dialog1), okbutton1, GTK_RESPONSE_OK);
-  GTK_WIDGET_SET_FLAGS (okbutton1, GTK_CAN_DEFAULT);
-
-  /* Store pointers to all widgets, for use by lookup_widget(). */
-  GLADE_HOOKUP_OBJECT_NO_REF (dialog1, dialog1, "dialog1");
-  GLADE_HOOKUP_OBJECT_NO_REF (dialog1, dialog_vbox1, "dialog_vbox1");
-  GLADE_HOOKUP_OBJECT (dialog1, notebook1, "notebook1");
-  GLADE_HOOKUP_OBJECT (dialog1, alignment14, "alignment14");
-  GLADE_HOOKUP_OBJECT (dialog1, tableBitrate, "tableBitrate");
-  GLADE_HOOKUP_OBJECT (dialog1, labelEncodingMode, "labelEncodingMode");
-  GLADE_HOOKUP_OBJECT (dialog1, labelQuantizer, "labelQuantizer");
-  GLADE_HOOKUP_OBJECT (dialog1, labelTarget, "labelTarget");
-  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonQuantizer, "spinbuttonQuantizer");
-  GLADE_HOOKUP_OBJECT (dialog1, entryTarget, "entryTarget");
-  GLADE_HOOKUP_OBJECT (dialog1, comboboxMode, "comboboxMode");
-  GLADE_HOOKUP_OBJECT (dialog1, labelPageBitrate, "labelPageBitrate");
-  GLADE_HOOKUP_OBJECT (dialog1, alignment15, "alignment15");
-  GLADE_HOOKUP_OBJECT (dialog1, vbox5, "vbox5");
-  GLADE_HOOKUP_OBJECT (dialog1, frame6, "frame6");
-  GLADE_HOOKUP_OBJECT (dialog1, alignment6, "alignment6");
-  GLADE_HOOKUP_OBJECT (dialog1, vbox6, "vbox6");
-  GLADE_HOOKUP_OBJECT (dialog1, table7, "table7");
-  GLADE_HOOKUP_OBJECT (dialog1, labelPartitionDecision, "labelPartitionDecision");
-  GLADE_HOOKUP_OBJECT (dialog1, labelMethod, "labelMethod");
-  GLADE_HOOKUP_OBJECT (dialog1, comboboxPartitionDecision, "comboboxPartitionDecision");
-  GLADE_HOOKUP_OBJECT (dialog1, comboboxMethod, "comboboxMethod");
-  GLADE_HOOKUP_OBJECT (dialog1, table11, "table11");
-  GLADE_HOOKUP_OBJECT (dialog1, labelMaxRefFrames, "labelMaxRefFrames");
-  GLADE_HOOKUP_OBJECT (dialog1, labelRange, "labelRange");
-  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonRange, "spinbuttonRange");
-  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonMaxRefFrames, "spinbuttonMaxRefFrames");
-  GLADE_HOOKUP_OBJECT (dialog1, checkbuttonChromaME, "checkbuttonChromaME");
-  GLADE_HOOKUP_OBJECT (dialog1, checkbuttonMixedRefs, "checkbuttonMixedRefs");
-  GLADE_HOOKUP_OBJECT (dialog1, hbox8, "hbox8");
-  GLADE_HOOKUP_OBJECT (dialog1, checkbuttonfastPSkip, "checkbuttonfastPSkip");
-  GLADE_HOOKUP_OBJECT (dialog1, checkbuttonDCTDecimate, "checkbuttonDCTDecimate");
-  GLADE_HOOKUP_OBJECT (dialog1, checkbuttoninterlaced, "checkbuttoninterlaced");
-  GLADE_HOOKUP_OBJECT (dialog1, label24, "label24");
-  GLADE_HOOKUP_OBJECT (dialog1, frameSampleAR, "frameSampleAR");
-  GLADE_HOOKUP_OBJECT (dialog1, alignment12, "alignment12");
-  GLADE_HOOKUP_OBJECT (dialog1, table35, "table35");
-  GLADE_HOOKUP_OBJECT (dialog1, hbox12, "hbox12");
-  GLADE_HOOKUP_OBJECT (dialog1, entryAR_Num, "entryAR_Num");
-  GLADE_HOOKUP_OBJECT (dialog1, label53, "label53");
-  GLADE_HOOKUP_OBJECT (dialog1, entryAR_Den, "entryAR_Den");
-  GLADE_HOOKUP_OBJECT (dialog1, radiobuttonCustomAR, "radiobuttonCustomAR");
-  GLADE_HOOKUP_OBJECT (dialog1, radiobuttonPredefinedAR, "radiobuttonPredefinedAR");
-  GLADE_HOOKUP_OBJECT (dialog1, radiobuttonAsInputAR, "radiobuttonAsInputAR");
-  GLADE_HOOKUP_OBJECT (dialog1, label40, "label40");
-  GLADE_HOOKUP_OBJECT (dialog1, comboboxentry1, "comboboxentry1");
-  GLADE_HOOKUP_OBJECT (dialog1, label39, "label39");
-  GLADE_HOOKUP_OBJECT (dialog1, frame7, "frame7");
-  GLADE_HOOKUP_OBJECT (dialog1, alignment7, "alignment7");
-  GLADE_HOOKUP_OBJECT (dialog1, vbox7, "vbox7");
-  GLADE_HOOKUP_OBJECT (dialog1, alignment21, "alignment21");
-  GLADE_HOOKUP_OBJECT (dialog1, hbox2, "hbox2");
-  GLADE_HOOKUP_OBJECT (dialog1, checkbuttonCABAC, "checkbuttonCABAC");
-  GLADE_HOOKUP_OBJECT (dialog1, hbox7, "hbox7");
-  GLADE_HOOKUP_OBJECT (dialog1, labelTrellis, "labelTrellis");
-  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonTrellis, "spinbuttonTrellis");
-  GLADE_HOOKUP_OBJECT (dialog1, hbox11, "hbox11");
-  GLADE_HOOKUP_OBJECT (dialog1, labelNoiseReduction, "labelNoiseReduction");
-  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonNoiseReduction, "spinbuttonNoiseReduction");
-  GLADE_HOOKUP_OBJECT (dialog1, hbox3, "hbox3");
-  GLADE_HOOKUP_OBJECT (dialog1, checkbuttonDeblockingFilter, "checkbuttonDeblockingFilter");
-  GLADE_HOOKUP_OBJECT (dialog1, table8, "table8");
-  GLADE_HOOKUP_OBJECT (dialog1, labelThreshold, "labelThreshold");
-  GLADE_HOOKUP_OBJECT (dialog1, labelStrength, "labelStrength");
-  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonThreshold, "spinbuttonThreshold");
-  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonStrength, "spinbuttonStrength");
-  GLADE_HOOKUP_OBJECT (dialog1, label25, "label25");
-  GLADE_HOOKUP_OBJECT (dialog1, labelPageMotion_More, "labelPageMotion_More");
-  GLADE_HOOKUP_OBJECT (dialog1, alignment16, "alignment16");
-  GLADE_HOOKUP_OBJECT (dialog1, vbox2, "vbox2");
-  GLADE_HOOKUP_OBJECT (dialog1, frame4, "frame4");
-  GLADE_HOOKUP_OBJECT (dialog1, alignment4, "alignment4");
-  GLADE_HOOKUP_OBJECT (dialog1, vbox3, "vbox3");
-  GLADE_HOOKUP_OBJECT (dialog1, checkbutton8x8, "checkbutton8x8");
-  GLADE_HOOKUP_OBJECT (dialog1, checkbutton8x8P, "checkbutton8x8P");
-  GLADE_HOOKUP_OBJECT (dialog1, checkbutton8x8B, "checkbutton8x8B");
-  GLADE_HOOKUP_OBJECT (dialog1, checkbutton4x4, "checkbutton4x4");
-  GLADE_HOOKUP_OBJECT (dialog1, checkbutton8x8I, "checkbutton8x8I");
-  GLADE_HOOKUP_OBJECT (dialog1, checkbutton4x4I, "checkbutton4x4I");
-  GLADE_HOOKUP_OBJECT (dialog1, label19, "label19");
-  GLADE_HOOKUP_OBJECT (dialog1, frame5, "frame5");
-  GLADE_HOOKUP_OBJECT (dialog1, alignment5, "alignment5");
-  GLADE_HOOKUP_OBJECT (dialog1, vbox4, "vbox4");
-  GLADE_HOOKUP_OBJECT (dialog1, table5, "table5");
-  GLADE_HOOKUP_OBJECT (dialog1, labelBias, "labelBias");
-  GLADE_HOOKUP_OBJECT (dialog1, labelMaxConsecutive, "labelMaxConsecutive");
-  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonBias, "spinbuttonBias");
-  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonMaxBFrame, "spinbuttonMaxBFrame");
-  GLADE_HOOKUP_OBJECT (dialog1, alignment20, "alignment20");
-  GLADE_HOOKUP_OBJECT (dialog1, table6, "table6");
-  GLADE_HOOKUP_OBJECT (dialog1, checkbuttonBidirME, "checkbuttonBidirME");
-  GLADE_HOOKUP_OBJECT (dialog1, checkbuttonWeighted, "checkbuttonWeighted");
-  GLADE_HOOKUP_OBJECT (dialog1, checkbuttonAdaptative, "checkbuttonAdaptative");
-  GLADE_HOOKUP_OBJECT (dialog1, checkbuttonBasReference, "checkbuttonBasReference");
-  GLADE_HOOKUP_OBJECT (dialog1, hbox1, "hbox1");
-  GLADE_HOOKUP_OBJECT (dialog1, labelBFrameDirectMode, "labelBFrameDirectMode");
-  GLADE_HOOKUP_OBJECT (dialog1, comboboxDirectMode, "comboboxDirectMode");
-  GLADE_HOOKUP_OBJECT (dialog1, label20, "label20");
-  GLADE_HOOKUP_OBJECT (dialog1, labelPagePartion_Frame, "labelPagePartion_Frame");
-  GLADE_HOOKUP_OBJECT (dialog1, alignment17, "alignment17");
-  GLADE_HOOKUP_OBJECT (dialog1, vbox1, "vbox1");
-  GLADE_HOOKUP_OBJECT (dialog1, frame1, "frame1");
-  GLADE_HOOKUP_OBJECT (dialog1, alignment1, "alignment1");
-  GLADE_HOOKUP_OBJECT (dialog1, table2, "table2");
-  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonKeyframeBoost, "spinbuttonKeyframeBoost");
-  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonBframeReduction, "spinbuttonBframeReduction");
-  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonBitrateVariability, "spinbuttonBitrateVariability");
-  GLADE_HOOKUP_OBJECT (dialog1, labelKeyframeboost, "labelKeyframeboost");
-  GLADE_HOOKUP_OBJECT (dialog1, label11, "label11");
-  GLADE_HOOKUP_OBJECT (dialog1, label12, "label12");
-  GLADE_HOOKUP_OBJECT (dialog1, label7, "label7");
-  GLADE_HOOKUP_OBJECT (dialog1, frame2, "frame2");
-  GLADE_HOOKUP_OBJECT (dialog1, alignment2, "alignment2");
-  GLADE_HOOKUP_OBJECT (dialog1, table3, "table3");
-  GLADE_HOOKUP_OBJECT (dialog1, label13, "label13");
-  GLADE_HOOKUP_OBJECT (dialog1, label14, "label14");
-  GLADE_HOOKUP_OBJECT (dialog1, label15, "label15");
-  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonMinQp, "spinbuttonMinQp");
-  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonMaxQp, "spinbuttonMaxQp");
-  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonQpStep, "spinbuttonQpStep");
-  GLADE_HOOKUP_OBJECT (dialog1, label8, "label8");
-  GLADE_HOOKUP_OBJECT (dialog1, frame3, "frame3");
-  GLADE_HOOKUP_OBJECT (dialog1, alignment3, "alignment3");
-  GLADE_HOOKUP_OBJECT (dialog1, table4, "table4");
-  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonSceneCut, "spinbuttonSceneCut");
-  GLADE_HOOKUP_OBJECT (dialog1, label16, "label16");
-  GLADE_HOOKUP_OBJECT (dialog1, label17, "label17");
-  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonMinIdr, "spinbuttonMinIdr");
-  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonMaxIdr, "spinbuttonMaxIdr");
-  GLADE_HOOKUP_OBJECT (dialog1, label18, "label18");
-  GLADE_HOOKUP_OBJECT (dialog1, labelMoreEncodingSettings, "labelMoreEncodingSettings");
-  GLADE_HOOKUP_OBJECT (dialog1, frameVideoBufferVerifier, "frameVideoBufferVerifier");
-  GLADE_HOOKUP_OBJECT (dialog1, alignment11, "alignment11");
-  GLADE_HOOKUP_OBJECT (dialog1, table12, "table12");
-  GLADE_HOOKUP_OBJECT (dialog1, labelVBVBufferSize, "labelVBVBufferSize");
-  GLADE_HOOKUP_OBJECT (dialog1, labelVBVInitialbuffer, "labelVBVInitialbuffer");
-  GLADE_HOOKUP_OBJECT (dialog1, labelVBVMaximumBitrate, "labelVBVMaximumBitrate");
-  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonvbv_max_bitrate, "spinbuttonvbv_max_bitrate");
-  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonvbv_buffer_size, "spinbuttonvbv_buffer_size");
-  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonvbv_buffer_init, "spinbuttonvbv_buffer_init");
-  GLADE_HOOKUP_OBJECT (dialog1, labelVideoBufferVerifier, "labelVideoBufferVerifier");
-  GLADE_HOOKUP_OBJECT (dialog1, labelPageRateControl, "labelPageRateControl");
-  GLADE_HOOKUP_OBJECT (dialog1, alignment18, "alignment18");
-  GLADE_HOOKUP_OBJECT (dialog1, vbox8, "vbox8");
-  GLADE_HOOKUP_OBJECT (dialog1, frame10, "frame10");
-  GLADE_HOOKUP_OBJECT (dialog1, alignment10, "alignment10");
-  GLADE_HOOKUP_OBJECT (dialog1, table15, "table15");
-  GLADE_HOOKUP_OBJECT (dialog1, labelBitrateVariance, "labelBitrateVariance");
-  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonBitrateVariance, "spinbuttonBitrateVariance");
-  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonQuantizerCompression, "spinbuttonQuantizerCompression");
-  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonTempBlurFrame, "spinbuttonTempBlurFrame");
-  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonTempBlurQuant, "spinbuttonTempBlurQuant");
-  GLADE_HOOKUP_OBJECT (dialog1, labelQuantizerCompression, "labelQuantizerCompression");
-  GLADE_HOOKUP_OBJECT (dialog1, labelTempBlurEstFrame, "labelTempBlurEstFrame");
-  GLADE_HOOKUP_OBJECT (dialog1, labelTempBlueQuant, "labelTempBlueQuant");
-  GLADE_HOOKUP_OBJECT (dialog1, labelMisc, "labelMisc");
-  GLADE_HOOKUP_OBJECT (dialog1, frame11, "frame11");
-  GLADE_HOOKUP_OBJECT (dialog1, alignment13, "alignment13");
-  GLADE_HOOKUP_OBJECT (dialog1, table16, "table16");
-  GLADE_HOOKUP_OBJECT (dialog1, spinbutton8, "spinbutton8");
-  GLADE_HOOKUP_OBJECT (dialog1, spinbutton9, "spinbutton9");
-  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonChromaQPOffset, "spinbuttonChromaQPOffset");
-  GLADE_HOOKUP_OBJECT (dialog1, labelFactorbetweenIandP, "labelFactorbetweenIandP");
-  GLADE_HOOKUP_OBJECT (dialog1, labelFactorbetweenPandB, "labelFactorbetweenPandB");
-  GLADE_HOOKUP_OBJECT (dialog1, labelChromaQPOffset, "labelChromaQPOffset");
-  GLADE_HOOKUP_OBJECT (dialog1, labelQuantizers, "labelQuantizers");
-  GLADE_HOOKUP_OBJECT (dialog1, frame9, "frame9");
-  GLADE_HOOKUP_OBJECT (dialog1, alignment9, "alignment9");
-  GLADE_HOOKUP_OBJECT (dialog1, vbox9, "vbox9");
-  GLADE_HOOKUP_OBJECT (dialog1, radiobuttonFlatmatrix, "radiobuttonFlatmatrix");
-  GLADE_HOOKUP_OBJECT (dialog1, radiobuttonJVTmatrix, "radiobuttonJVTmatrix");
-  GLADE_HOOKUP_OBJECT (dialog1, hbox13, "hbox13");
-  GLADE_HOOKUP_OBJECT (dialog1, radiobuttonCustommatrix, "radiobuttonCustommatrix");
-  GLADE_HOOKUP_OBJECT (dialog1, hbox14, "hbox14");
-  GLADE_HOOKUP_OBJECT (dialog1, filechooserbuttonOpenCQMFile, "filechooserbuttonOpenCQMFile");
-  GLADE_HOOKUP_OBJECT (dialog1, vseparator1, "vseparator1");
-  GLADE_HOOKUP_OBJECT (dialog1, buttonEditCustomMatrix, "buttonEditCustomMatrix");
-  GLADE_HOOKUP_OBJECT (dialog1, labelFrameQuantizationMatrices, "labelFrameQuantizationMatrices");
-  GLADE_HOOKUP_OBJECT (dialog1, labelMore, "labelMore");
-  GLADE_HOOKUP_OBJECT_NO_REF (dialog1, dialog_action_area1, "dialog_action_area1");
-  GLADE_HOOKUP_OBJECT (dialog1, buttonResetDaults, "buttonResetDaults");
-  GLADE_HOOKUP_OBJECT (dialog1, cancelbutton1, "cancelbutton1");
-  GLADE_HOOKUP_OBJECT (dialog1, okbutton1, "okbutton1");
-  GLADE_HOOKUP_OBJECT_NO_REF (dialog1, tooltips, "tooltips");
-
-  gtk_widget_grab_default (comboboxDirectMode);
-  return dialog1;
-}
+GtkWidget*
+create_dialog1 (void)
+{
+  GtkWidget *dialog1;
+  GtkWidget *dialog_vbox1;
+  GtkWidget *notebook1;
+  GtkWidget *alignment14;
+  GtkWidget *tableBitrate;
+  GtkWidget *labelEncodingMode;
+  GtkWidget *labelQuantizer;
+  GtkWidget *labelTarget;
+  GtkObject *spinbuttonQuantizer_adj;
+  GtkWidget *spinbuttonQuantizer;
+  GtkWidget *entryTarget;
+  GtkWidget *comboboxMode;
+  GtkWidget *labelPageBitrate;
+  GtkWidget *alignment15;
+  GtkWidget *vbox5;
+  GtkWidget *frame6;
+  GtkWidget *alignment6;
+  GtkWidget *vbox6;
+  GtkWidget *table7;
+  GtkWidget *labelPartitionDecision;
+  GtkWidget *labelMethod;
+  GtkWidget *comboboxPartitionDecision;
+  GtkWidget *comboboxMethod;
+  GtkWidget *table11;
+  GtkWidget *labelMaxRefFrames;
+  GtkWidget *labelRange;
+  GtkObject *spinbuttonRange_adj;
+  GtkWidget *spinbuttonRange;
+  GtkObject *spinbuttonMaxRefFrames_adj;
+  GtkWidget *spinbuttonMaxRefFrames;
+  GtkWidget *checkbuttonChromaME;
+  GtkWidget *checkbuttonMixedRefs;
+  GtkWidget *hbox8;
+  GtkWidget *checkbuttonfastPSkip;
+  GtkWidget *checkbuttonDCTDecimate;
+  GtkWidget *checkbuttoninterlaced;
+  GtkWidget *label24;
+  GtkWidget *frameSampleAR;
+  GtkWidget *alignment12;
+  GtkWidget *table35;
+  GtkWidget *hbox12;
+  GtkWidget *entryAR_Num;
+  GtkWidget *label53;
+  GtkWidget *entryAR_Den;
+  GtkWidget *radiobuttonCustomAR;
+  GSList *radiobuttonCustomAR_group = NULL;
+  GtkWidget *radiobuttonPredefinedAR;
+  GtkWidget *radiobuttonAsInputAR;
+  GtkWidget *label40;
+  GtkWidget *comboboxentry1;
+  GtkWidget *label39;
+  GtkWidget *frame7;
+  GtkWidget *alignment7;
+  GtkWidget *vbox7;
+  GtkWidget *alignment21;
+  GtkWidget *hbox2;
+  GtkWidget *checkbuttonCABAC;
+  GtkWidget *hbox7;
+  GtkWidget *labelTrellis;
+  GtkObject *spinbuttonTrellis_adj;
+  GtkWidget *spinbuttonTrellis;
+  GtkWidget *hbox11;
+  GtkWidget *labelNoiseReduction;
+  GtkObject *spinbuttonNoiseReduction_adj;
+  GtkWidget *spinbuttonNoiseReduction;
+  GtkWidget *hbox3;
+  GtkWidget *checkbuttonDeblockingFilter;
+  GtkWidget *table8;
+  GtkWidget *labelThreshold;
+  GtkWidget *labelStrength;
+  GtkObject *spinbuttonThreshold_adj;
+  GtkWidget *spinbuttonThreshold;
+  GtkObject *spinbuttonStrength_adj;
+  GtkWidget *spinbuttonStrength;
+  GtkWidget *label25;
+  GtkWidget *labelPageMotion_More;
+  GtkWidget *alignment16;
+  GtkWidget *vbox2;
+  GtkWidget *frame4;
+  GtkWidget *alignment4;
+  GtkWidget *vbox3;
+  GtkWidget *checkbutton8x8;
+  GtkWidget *checkbutton8x8P;
+  GtkWidget *checkbutton8x8B;
+  GtkWidget *checkbutton4x4;
+  GtkWidget *checkbutton8x8I;
+  GtkWidget *checkbutton4x4I;
+  GtkWidget *label19;
+  GtkWidget *frame5;
+  GtkWidget *alignment5;
+  GtkWidget *vbox4;
+  GtkWidget *table5;
+  GtkWidget *labelBias;
+  GtkWidget *labelMaxConsecutive;
+  GtkObject *spinbuttonBias_adj;
+  GtkWidget *spinbuttonBias;
+  GtkObject *spinbuttonMaxBFrame_adj;
+  GtkWidget *spinbuttonMaxBFrame;
+  GtkWidget *alignment20;
+  GtkWidget *table6;
+  GtkWidget *checkbuttonBidirME;
+  GtkWidget *checkbuttonWeighted;
+  GtkWidget *checkbuttonAdaptative;
+  GtkWidget *checkbuttonBasReference;
+  GtkWidget *hbox1;
+  GtkWidget *labelBFrameDirectMode;
+  GtkWidget *comboboxDirectMode;
+  GtkWidget *label20;
+  GtkWidget *labelPagePartion_Frame;
+  GtkWidget *alignment17;
+  GtkWidget *vbox1;
+  GtkWidget *frame1;
+  GtkWidget *alignment1;
+  GtkWidget *table2;
+  GtkObject *spinbuttonKeyframeBoost_adj;
+  GtkWidget *spinbuttonKeyframeBoost;
+  GtkObject *spinbuttonBframeReduction_adj;
+  GtkWidget *spinbuttonBframeReduction;
+  GtkObject *spinbuttonBitrateVariability_adj;
+  GtkWidget *spinbuttonBitrateVariability;
+  GtkWidget *labelKeyframeboost;
+  GtkWidget *label11;
+  GtkWidget *label12;
+  GtkWidget *label7;
+  GtkWidget *frame2;
+  GtkWidget *alignment2;
+  GtkWidget *table3;
+  GtkWidget *label13;
+  GtkWidget *label14;
+  GtkWidget *label15;
+  GtkObject *spinbuttonMinQp_adj;
+  GtkWidget *spinbuttonMinQp;
+  GtkObject *spinbuttonMaxQp_adj;
+  GtkWidget *spinbuttonMaxQp;
+  GtkObject *spinbuttonQpStep_adj;
+  GtkWidget *spinbuttonQpStep;
+  GtkWidget *label8;
+  GtkWidget *frame3;
+  GtkWidget *alignment3;
+  GtkWidget *table4;
+  GtkObject *spinbuttonSceneCut_adj;
+  GtkWidget *spinbuttonSceneCut;
+  GtkWidget *label16;
+  GtkWidget *label17;
+  GtkObject *spinbuttonMinIdr_adj;
+  GtkWidget *spinbuttonMinIdr;
+  GtkObject *spinbuttonMaxIdr_adj;
+  GtkWidget *spinbuttonMaxIdr;
+  GtkWidget *label18;
+  GtkWidget *labelMoreEncodingSettings;
+  GtkWidget *frameVideoBufferVerifier;
+  GtkWidget *alignment11;
+  GtkWidget *table12;
+  GtkWidget *labelVBVBufferSize;
+  GtkWidget *labelVBVInitialbuffer;
+  GtkWidget *labelVBVMaximumBitrate;
+  GtkObject *spinbuttonvbv_max_bitrate_adj;
+  GtkWidget *spinbuttonvbv_max_bitrate;
+  GtkObject *spinbuttonvbv_buffer_size_adj;
+  GtkWidget *spinbuttonvbv_buffer_size;
+  GtkObject *spinbuttonvbv_buffer_init_adj;
+  GtkWidget *spinbuttonvbv_buffer_init;
+  GtkWidget *labelVideoBufferVerifier;
+  GtkWidget *labelPageRateControl;
+  GtkWidget *alignment18;
+  GtkWidget *vbox8;
+  GtkWidget *frame10;
+  GtkWidget *alignment10;
+  GtkWidget *table15;
+  GtkWidget *labelBitrateVariance;
+  GtkObject *spinbuttonBitrateVariance_adj;
+  GtkWidget *spinbuttonBitrateVariance;
+  GtkObject *spinbuttonQuantizerCompression_adj;
+  GtkWidget *spinbuttonQuantizerCompression;
+  GtkObject *spinbuttonTempBlurFrame_adj;
+  GtkWidget *spinbuttonTempBlurFrame;
+  GtkObject *spinbuttonTempBlurQuant_adj;
+  GtkWidget *spinbuttonTempBlurQuant;
+  GtkWidget *labelQuantizerCompression;
+  GtkWidget *labelTempBlurEstFrame;
+  GtkWidget *labelTempBlueQuant;
+  GtkWidget *labelMisc;
+  GtkWidget *frame11;
+  GtkWidget *alignment13;
+  GtkWidget *table16;
+  GtkObject *spinbutton8_adj;
+  GtkWidget *spinbutton8;
+  GtkObject *spinbutton9_adj;
+  GtkWidget *spinbutton9;
+  GtkObject *spinbuttonChromaQPOffset_adj;
+  GtkWidget *spinbuttonChromaQPOffset;
+  GtkWidget *labelFactorbetweenIandP;
+  GtkWidget *labelFactorbetweenPandB;
+  GtkWidget *labelChromaQPOffset;
+  GtkWidget *labelQuantizers;
+  GtkWidget *frame9;
+  GtkWidget *alignment9;
+  GtkWidget *vbox9;
+  GtkWidget *radiobuttonFlatmatrix;
+  GSList *radiobuttonFlatmatrix_group = NULL;
+  GtkWidget *radiobuttonJVTmatrix;
+  GtkWidget *hbox13;
+  GtkWidget *radiobuttonCustommatrix;
+  GtkWidget *hbox14;
+  GtkWidget *filechooserbuttonOpenCQMFile;
+  GtkWidget *vseparator1;
+  GtkWidget *buttonEditCustomMatrix;
+  GtkWidget *labelFrameQuantizationMatrices;
+  GtkWidget *labelMore;
+  GtkWidget *dialog_action_area1;
+  GtkWidget *buttonResetDaults;
+  GtkWidget *cancelbutton1;
+  GtkWidget *okbutton1;
+  GtkTooltips *tooltips;
+
+  tooltips = gtk_tooltips_new ();
+
+  dialog1 = gtk_dialog_new ();
+  gtk_window_set_title (GTK_WINDOW (dialog1), _("x264 Configuration"));
+  gtk_window_set_type_hint (GTK_WINDOW (dialog1), GDK_WINDOW_TYPE_HINT_DIALOG);
+
+  dialog_vbox1 = GTK_DIALOG (dialog1)->vbox;
+  gtk_widget_show (dialog_vbox1);
+
+  notebook1 = gtk_notebook_new ();
+  gtk_widget_show (notebook1);
+  gtk_box_pack_start (GTK_BOX (dialog_vbox1), notebook1, TRUE, TRUE, 0);
+
+  alignment14 = gtk_alignment_new (0.5, 0.5, 1, 1);
+  gtk_widget_show (alignment14);
+  gtk_container_add (GTK_CONTAINER (notebook1), alignment14);
+  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment14), 7, 7, 7, 7);
+
+  tableBitrate = gtk_table_new (3, 2, FALSE);
+  gtk_widget_show (tableBitrate);
+  gtk_container_add (GTK_CONTAINER (alignment14), tableBitrate);
+  gtk_table_set_row_spacings (GTK_TABLE (tableBitrate), 3);
+  gtk_table_set_col_spacings (GTK_TABLE (tableBitrate), 10);
+
+  labelEncodingMode = gtk_label_new (_("Encoding Mode"));
+  gtk_widget_show (labelEncodingMode);
+  gtk_table_attach (GTK_TABLE (tableBitrate), labelEncodingMode, 0, 1, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelEncodingMode), 0, 0.5);
+
+  labelQuantizer = gtk_label_new (_("Quantizer"));
+  gtk_widget_show (labelQuantizer);
+  gtk_table_attach (GTK_TABLE (tableBitrate), labelQuantizer, 0, 1, 2, 3,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelQuantizer), 0, 0.5);
+
+  labelTarget = gtk_label_new (_("Target Size"));
+  gtk_widget_show (labelTarget);
+  gtk_table_attach (GTK_TABLE (tableBitrate), labelTarget, 0, 1, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelTarget), 0, 0.5);
+
+  spinbuttonQuantizer_adj = gtk_adjustment_new (4, 0, 51, 1, 10, 10);
+  spinbuttonQuantizer = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonQuantizer_adj), 1, 0);
+  gtk_widget_show (spinbuttonQuantizer);
+  gtk_table_attach (GTK_TABLE (tableBitrate), spinbuttonQuantizer, 1, 2, 2, 3,
+                    (GtkAttachOptions) (GTK_SHRINK | GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, spinbuttonQuantizer, _("Constant Quantizer - Each frame will have the same compression. Low numbers equal higher quality while high numbers equal lower quality."), NULL);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonQuantizer), TRUE);
+
+  entryTarget = gtk_entry_new ();
+  gtk_widget_show (entryTarget);
+  gtk_table_attach (GTK_TABLE (tableBitrate), entryTarget, 1, 2, 1, 2,
+                    (GtkAttachOptions) (GTK_SHRINK | GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, entryTarget, _("Target bitrate or file size"), NULL);
+  gtk_entry_set_width_chars (GTK_ENTRY (entryTarget), 4);
+
+  comboboxMode = gtk_combo_box_new_text ();
+  gtk_widget_show (comboboxMode);
+  gtk_table_attach (GTK_TABLE (tableBitrate), comboboxMode, 1, 2, 0, 1,
+                    (GtkAttachOptions) (GTK_SHRINK | GTK_FILL),
+                    (GtkAttachOptions) (GTK_FILL), 0, 0);
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxMode), _("Single Pass - Quality Quantizer (Average)"));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxMode), _("Single Pass - Quality Quantizer (Constant)"));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxMode), _("Single Pass - Bitrate (Average)"));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxMode), _("Two Pass - Video Size"));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxMode), _("Two Pass - Average Bitrate"));
+
+  labelPageBitrate = gtk_label_new (_("Bitrate"));
+  gtk_widget_show (labelPageBitrate);
+  gtk_notebook_set_tab_label (GTK_NOTEBOOK (notebook1), gtk_notebook_get_nth_page (GTK_NOTEBOOK (notebook1), 0), labelPageBitrate);
+  gtk_misc_set_alignment (GTK_MISC (labelPageBitrate), 0, 0.5);
+
+  alignment15 = gtk_alignment_new (0.5, 0.5, 1, 1);
+  gtk_widget_show (alignment15);
+  gtk_container_add (GTK_CONTAINER (notebook1), alignment15);
+  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment15), 7, 7, 7, 7);
+
+  vbox5 = gtk_vbox_new (FALSE, 3);
+  gtk_widget_show (vbox5);
+  gtk_container_add (GTK_CONTAINER (alignment15), vbox5);
+
+  frame6 = gtk_frame_new (NULL);
+  gtk_widget_show (frame6);
+  gtk_box_pack_start (GTK_BOX (vbox5), frame6, FALSE, TRUE, 0);
+
+  alignment6 = gtk_alignment_new (0.5, 0.5, 1, 1);
+  gtk_widget_show (alignment6);
+  gtk_container_add (GTK_CONTAINER (frame6), alignment6);
+  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment6), 7, 4, 7, 7);
+
+  vbox6 = gtk_vbox_new (FALSE, 3);
+  gtk_widget_show (vbox6);
+  gtk_container_add (GTK_CONTAINER (alignment6), vbox6);
+
+  table7 = gtk_table_new (2, 3, FALSE);
+  gtk_widget_show (table7);
+  gtk_box_pack_start (GTK_BOX (vbox6), table7, FALSE, TRUE, 0);
+  gtk_table_set_row_spacings (GTK_TABLE (table7), 3);
+  gtk_table_set_col_spacings (GTK_TABLE (table7), 10);
+
+  labelPartitionDecision = gtk_label_new (_("Partition Decision"));
+  gtk_widget_show (labelPartitionDecision);
+  gtk_table_attach (GTK_TABLE (table7), labelPartitionDecision, 0, 1, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelPartitionDecision), 0, 0.5);
+
+  labelMethod = gtk_label_new (_("Method"));
+  gtk_widget_show (labelMethod);
+  gtk_table_attach (GTK_TABLE (table7), labelMethod, 0, 1, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelMethod), 0, 0.5);
+
+  comboboxPartitionDecision = gtk_combo_box_new_text ();
+  gtk_widget_show (comboboxPartitionDecision);
+  gtk_table_attach (GTK_TABLE (table7), comboboxPartitionDecision, 1, 3, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (GTK_FILL), 0, 0);
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxPartitionDecision), _("1  - Extremely Low (Fastest)"));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxPartitionDecision), _("2  - Very Low"));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxPartitionDecision), _("3  - Low"));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxPartitionDecision), _("4  - Medium"));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxPartitionDecision), _("5  - High (Default)"));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxPartitionDecision), _("6  - Very High"));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxPartitionDecision), _("6B - Very High (RDO on B-frames)"));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxPartitionDecision), _("7  - Ultra High"));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxPartitionDecision), _("7B - Ultra High (RDO on B-frames)"));
+
+  comboboxMethod = gtk_combo_box_new_text ();
+  gtk_widget_show (comboboxMethod);
+  gtk_table_attach (GTK_TABLE (table7), comboboxMethod, 1, 3, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (GTK_FILL), 0, 0);
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxMethod), _("Diamond Search"));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxMethod), _("Hexagonal Search"));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxMethod), _("Uneven Multi-hexagon"));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxMethod), _("Exhaustive Search"));
+
+  table11 = gtk_table_new (2, 3, FALSE);
+  gtk_widget_show (table11);
+  gtk_box_pack_start (GTK_BOX (vbox6), table11, TRUE, FALSE, 0);
+  gtk_table_set_row_spacings (GTK_TABLE (table11), 3);
+  gtk_table_set_col_spacings (GTK_TABLE (table11), 10);
+
+  labelMaxRefFrames = gtk_label_new (_("Max. Ref. Frames"));
+  gtk_widget_show (labelMaxRefFrames);
+  gtk_table_attach (GTK_TABLE (table11), labelMaxRefFrames, 0, 1, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelMaxRefFrames), 0, 0.5);
+
+  labelRange = gtk_label_new (_("Range"));
+  gtk_widget_show (labelRange);
+  gtk_table_attach (GTK_TABLE (table11), labelRange, 0, 1, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelRange), 0, 0.5);
+
+  spinbuttonRange_adj = gtk_adjustment_new (17, 0, 64, 1, 10, 10);
+  spinbuttonRange = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonRange_adj), 1, 0);
+  gtk_widget_show (spinbuttonRange);
+  gtk_table_attach (GTK_TABLE (table11), spinbuttonRange, 1, 2, 0, 1,
+                    (GtkAttachOptions) (GTK_SHRINK | GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, spinbuttonRange, _("Define how many pixels are analysed for motion estimation. The higher the range the more accurate the analysis but the slower the encoding time."), NULL);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonRange), TRUE);
+
+  spinbuttonMaxRefFrames_adj = gtk_adjustment_new (1, 0, 16, 1, 10, 10);
+  spinbuttonMaxRefFrames = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonMaxRefFrames_adj), 1, 0);
+  gtk_widget_show (spinbuttonMaxRefFrames);
+  gtk_table_attach (GTK_TABLE (table11), spinbuttonMaxRefFrames, 1, 2, 1, 2,
+                    (GtkAttachOptions) (GTK_SHRINK | GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, spinbuttonMaxRefFrames, _("Set how many previous frames can be referenced by a P/B-frame. Numbers above 5 do not seem to improve quality greatly. Numbers 3 to 5 are recommended."), NULL);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonMaxRefFrames), TRUE);
+
+  checkbuttonChromaME = gtk_check_button_new_with_mnemonic (_("Chroma ME"));
+  gtk_widget_show (checkbuttonChromaME);
+  gtk_table_attach (GTK_TABLE (table11), checkbuttonChromaME, 2, 3, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 30, 0);
+  gtk_tooltips_set_tip (tooltips, checkbuttonChromaME, _("Use color information for detecting motion to improve quality"), NULL);
+  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (checkbuttonChromaME), TRUE);
+
+  checkbuttonMixedRefs = gtk_check_button_new_with_mnemonic (_("Mixed Refs"));
+  gtk_widget_show (checkbuttonMixedRefs);
+  gtk_table_attach (GTK_TABLE (table11), checkbuttonMixedRefs, 2, 3, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 30, 0);
+  gtk_tooltips_set_tip (tooltips, checkbuttonMixedRefs, _("Calculate referencing individually based on each partition"), NULL);
+
+  hbox8 = gtk_hbox_new (TRUE, 0);
+  gtk_widget_show (hbox8);
+  gtk_box_pack_start (GTK_BOX (vbox6), hbox8, TRUE, TRUE, 0);
+
+  checkbuttonfastPSkip = gtk_check_button_new_with_mnemonic (_("Fast P-Skip"));
+  gtk_widget_show (checkbuttonfastPSkip);
+  gtk_box_pack_start (GTK_BOX (hbox8), checkbuttonfastPSkip, FALSE, FALSE, 0);
+  gtk_tooltips_set_tip (tooltips, checkbuttonfastPSkip, _("Early skip detection on P-frames to speedup encoding. Quality will be slightly reduced."), NULL);
+  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (checkbuttonfastPSkip), TRUE);
+
+  checkbuttonDCTDecimate = gtk_check_button_new_with_mnemonic (_("DCT Decimate"));
+  gtk_widget_show (checkbuttonDCTDecimate);
+  gtk_box_pack_start (GTK_BOX (hbox8), checkbuttonDCTDecimate, FALSE, FALSE, 0);
+  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (checkbuttonDCTDecimate), TRUE);
+
+  checkbuttoninterlaced = gtk_check_button_new_with_mnemonic (_("Interlaced"));
+  gtk_widget_show (checkbuttoninterlaced);
+  gtk_box_pack_start (GTK_BOX (hbox8), checkbuttoninterlaced, FALSE, FALSE, 0);
+  gtk_tooltips_set_tip (tooltips, checkbuttoninterlaced, _("Input video is interlaced"), NULL);
+
+  label24 = gtk_label_new (_("<b>Motion Estimation</b>"));
+  gtk_widget_show (label24);
+  gtk_frame_set_label_widget (GTK_FRAME (frame6), label24);
+  gtk_label_set_use_markup (GTK_LABEL (label24), TRUE);
+
+  frameSampleAR = gtk_frame_new (NULL);
+  gtk_widget_show (frameSampleAR);
+  gtk_box_pack_start (GTK_BOX (vbox5), frameSampleAR, FALSE, TRUE, 0);
+
+  alignment12 = gtk_alignment_new (0.5, 0.5, 1, 1);
+  gtk_widget_show (alignment12);
+  gtk_container_add (GTK_CONTAINER (frameSampleAR), alignment12);
+  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment12), 7, 7, 7, 7);
+
+  table35 = gtk_table_new (3, 2, FALSE);
+  gtk_widget_show (table35);
+  gtk_container_add (GTK_CONTAINER (alignment12), table35);
+  gtk_table_set_row_spacings (GTK_TABLE (table35), 3);
+  gtk_table_set_col_spacings (GTK_TABLE (table35), 10);
+
+  hbox12 = gtk_hbox_new (FALSE, 0);
+  gtk_widget_show (hbox12);
+  gtk_table_attach (GTK_TABLE (table35), hbox12, 1, 2, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (GTK_FILL), 0, 0);
+
+  entryAR_Num = gtk_entry_new ();
+  gtk_widget_show (entryAR_Num);
+  gtk_box_pack_start (GTK_BOX (hbox12), entryAR_Num, TRUE, TRUE, 0);
+  gtk_tooltips_set_tip (tooltips, entryAR_Num, _("Enforce the size of a decoded pixel decoded to a certain value. Set this to 1:1 for non-anamorphic video."), NULL);
+  gtk_entry_set_text (GTK_ENTRY (entryAR_Num), _("1"));
+  gtk_entry_set_width_chars (GTK_ENTRY (entryAR_Num), 4);
+
+  label53 = gtk_label_new (_(":"));
+  gtk_widget_show (label53);
+  gtk_box_pack_start (GTK_BOX (hbox12), label53, FALSE, FALSE, 3);
+
+  entryAR_Den = gtk_entry_new ();
+  gtk_widget_show (entryAR_Den);
+  gtk_box_pack_start (GTK_BOX (hbox12), entryAR_Den, TRUE, TRUE, 0);
+  gtk_tooltips_set_tip (tooltips, entryAR_Den, _("Enforce the size of a decoded pixel decoded to a certain value. Set this to 1:1 for non-anamorphic video."), NULL);
+  gtk_entry_set_text (GTK_ENTRY (entryAR_Den), _("1"));
+  gtk_entry_set_width_chars (GTK_ENTRY (entryAR_Den), 4);
+
+  radiobuttonCustomAR = gtk_radio_button_new_with_mnemonic (NULL, _("Custom"));
+  gtk_widget_show (radiobuttonCustomAR);
+  gtk_table_attach (GTK_TABLE (table35), radiobuttonCustomAR, 0, 1, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, radiobuttonCustomAR, _("Set a custom aspect ratio. The default 1:1 is recommended for most video."), NULL);
+  gtk_radio_button_set_group (GTK_RADIO_BUTTON (radiobuttonCustomAR), radiobuttonCustomAR_group);
+  radiobuttonCustomAR_group = gtk_radio_button_get_group (GTK_RADIO_BUTTON (radiobuttonCustomAR));
+  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (radiobuttonCustomAR), TRUE);
+
+  radiobuttonPredefinedAR = gtk_radio_button_new_with_mnemonic (NULL, _("Predefined Aspect Ratio"));
+  gtk_widget_show (radiobuttonPredefinedAR);
+  gtk_table_attach (GTK_TABLE (table35), radiobuttonPredefinedAR, 0, 1, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, radiobuttonPredefinedAR, _("Set a common predefined aspect ratio"), NULL);
+  gtk_radio_button_set_group (GTK_RADIO_BUTTON (radiobuttonPredefinedAR), radiobuttonCustomAR_group);
+  radiobuttonCustomAR_group = gtk_radio_button_get_group (GTK_RADIO_BUTTON (radiobuttonPredefinedAR));
+
+  radiobuttonAsInputAR = gtk_radio_button_new_with_mnemonic (NULL, _("As Input"));
+  gtk_widget_show (radiobuttonAsInputAR);
+  gtk_table_attach (GTK_TABLE (table35), radiobuttonAsInputAR, 0, 1, 2, 3,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_radio_button_set_group (GTK_RADIO_BUTTON (radiobuttonAsInputAR), radiobuttonCustomAR_group);
+  radiobuttonCustomAR_group = gtk_radio_button_get_group (GTK_RADIO_BUTTON (radiobuttonAsInputAR));
+
+  label40 = gtk_label_new ("1:1 (1:1)");
+  gtk_widget_show (label40);
+  gtk_table_attach (GTK_TABLE (table35), label40, 1, 2, 2, 3,
+                    (GtkAttachOptions) (0),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (label40), 0, 0.5);
+
+  comboboxentry1 = gtk_combo_box_new_text ();
+  gtk_widget_show (comboboxentry1);
+  gtk_table_attach (GTK_TABLE (table35), comboboxentry1, 1, 2, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (GTK_FILL), 0, 0);
+
+  label39 = gtk_label_new (_("<b>Sample Aspect Ratio</b>"));
+  gtk_widget_show (label39);
+  gtk_frame_set_label_widget (GTK_FRAME (frameSampleAR), label39);
+  gtk_label_set_use_markup (GTK_LABEL (label39), TRUE);
+
+  frame7 = gtk_frame_new (NULL);
+  gtk_widget_show (frame7);
+  gtk_box_pack_start (GTK_BOX (vbox5), frame7, FALSE, TRUE, 0);
+
+  alignment7 = gtk_alignment_new (0.5, 0.5, 1, 1);
+  gtk_widget_show (alignment7);
+  gtk_container_add (GTK_CONTAINER (frame7), alignment7);
+  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment7), 7, 7, 7, 7);
+
+  vbox7 = gtk_vbox_new (FALSE, 3);
+  gtk_widget_show (vbox7);
+  gtk_container_add (GTK_CONTAINER (alignment7), vbox7);
+
+  alignment21 = gtk_alignment_new (0.5, 0.5, 1, 1);
+  gtk_widget_show (alignment21);
+  gtk_box_pack_start (GTK_BOX (vbox7), alignment21, TRUE, TRUE, 0);
+  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment21), 0, 3, 0, 0);
+
+  hbox2 = gtk_hbox_new (FALSE, 17);
+  gtk_widget_show (hbox2);
+  gtk_container_add (GTK_CONTAINER (alignment21), hbox2);
+
+  checkbuttonCABAC = gtk_check_button_new_with_mnemonic (_("CABAC"));
+  gtk_widget_show (checkbuttonCABAC);
+  gtk_box_pack_start (GTK_BOX (hbox2), checkbuttonCABAC, FALSE, FALSE, 0);
+  gtk_tooltips_set_tip (tooltips, checkbuttonCABAC, _("Lossless compression technique that reduces bitrate by approximately 10%. Increases encoding and decoding time."), NULL);
+  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (checkbuttonCABAC), TRUE);
+
+  hbox7 = gtk_hbox_new (FALSE, 10);
+  gtk_widget_show (hbox7);
+  gtk_box_pack_start (GTK_BOX (hbox2), hbox7, FALSE, FALSE, 0);
+
+  labelTrellis = gtk_label_new (_("Trellis"));
+  gtk_widget_show (labelTrellis);
+  gtk_box_pack_start (GTK_BOX (hbox7), labelTrellis, FALSE, FALSE, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelTrellis), 0, 0.5);
+
+  spinbuttonTrellis_adj = gtk_adjustment_new (0, 0, 2, 1, 10, 10);
+  spinbuttonTrellis = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonTrellis_adj), 1, 0);
+  gtk_widget_show (spinbuttonTrellis);
+  gtk_box_pack_start (GTK_BOX (hbox7), spinbuttonTrellis, FALSE, FALSE, 0);
+  gtk_tooltips_set_tip (tooltips, spinbuttonTrellis, _("Use Trellis Rate Distortion Optimisation to find optimal encoding for each block. Level 0 equals disabled, level 1 equals normal and level 2 equals high."), NULL);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonTrellis), TRUE);
+
+  hbox11 = gtk_hbox_new (FALSE, 10);
+  gtk_widget_show (hbox11);
+  gtk_box_pack_start (GTK_BOX (hbox2), hbox11, FALSE, FALSE, 2);
+
+  labelNoiseReduction = gtk_label_new (_("Noise Reduction"));
+  gtk_widget_show (labelNoiseReduction);
+  gtk_box_pack_start (GTK_BOX (hbox11), labelNoiseReduction, FALSE, FALSE, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelNoiseReduction), 0, 0.5);
+
+  spinbuttonNoiseReduction_adj = gtk_adjustment_new (0, 0, 1000000000, 1, 10, 10);
+  spinbuttonNoiseReduction = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonNoiseReduction_adj), 1, 0);
+  gtk_widget_show (spinbuttonNoiseReduction);
+  gtk_box_pack_start (GTK_BOX (hbox11), spinbuttonNoiseReduction, FALSE, FALSE, 0);
+  gtk_tooltips_set_tip (tooltips, spinbuttonNoiseReduction, _("Set the amount of noise reduction"), NULL);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonNoiseReduction), TRUE);
+
+  hbox3 = gtk_hbox_new (FALSE, 10);
+  gtk_widget_show (hbox3);
+  gtk_box_pack_start (GTK_BOX (vbox7), hbox3, TRUE, TRUE, 0);
+
+  checkbuttonDeblockingFilter = gtk_check_button_new_with_mnemonic (_("Deblocking Filter"));
+  gtk_widget_show (checkbuttonDeblockingFilter);
+  gtk_box_pack_start (GTK_BOX (hbox3), checkbuttonDeblockingFilter, FALSE, FALSE, 0);
+  gtk_tooltips_set_tip (tooltips, checkbuttonDeblockingFilter, _("Enable in-loop deblocking to filter the video"), NULL);
+  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (checkbuttonDeblockingFilter), TRUE);
+
+  table8 = gtk_table_new (2, 2, FALSE);
+  gtk_widget_show (table8);
+  gtk_box_pack_start (GTK_BOX (hbox3), table8, TRUE, TRUE, 0);
+  gtk_table_set_row_spacings (GTK_TABLE (table8), 3);
+  gtk_table_set_col_spacings (GTK_TABLE (table8), 10);
+
+  labelThreshold = gtk_label_new (_("Threshold"));
+  gtk_widget_show (labelThreshold);
+  gtk_table_attach (GTK_TABLE (table8), labelThreshold, 0, 1, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_label_set_use_markup (GTK_LABEL (labelThreshold), TRUE);
+  gtk_misc_set_alignment (GTK_MISC (labelThreshold), 0, 0.5);
+
+  labelStrength = gtk_label_new (_("Strength"));
+  gtk_widget_show (labelStrength);
+  gtk_table_attach (GTK_TABLE (table8), labelStrength, 0, 1, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_label_set_use_markup (GTK_LABEL (labelStrength), TRUE);
+  gtk_misc_set_alignment (GTK_MISC (labelStrength), 0, 0.5);
+
+  spinbuttonThreshold_adj = gtk_adjustment_new (0, -6, 6, 1, 10, 10);
+  spinbuttonThreshold = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonThreshold_adj), 1, 0);
+  gtk_widget_show (spinbuttonThreshold);
+  gtk_table_attach (GTK_TABLE (table8), spinbuttonThreshold, 1, 2, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, spinbuttonThreshold, _("Threshold for block detection. Positive values will detect more blocks, negative values will detect less."), NULL);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonThreshold), TRUE);
+
+  spinbuttonStrength_adj = gtk_adjustment_new (0, -6, 6, 1, 10, 10);
+  spinbuttonStrength = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonStrength_adj), 1, 0);
+  gtk_widget_show (spinbuttonStrength);
+  gtk_table_attach (GTK_TABLE (table8), spinbuttonStrength, 1, 2, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, spinbuttonStrength, _("Positive values will soften the video, negative values will sharpen"), NULL);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonStrength), TRUE);
+
+  label25 = gtk_label_new (_("<b>Misc. Options</b>"));
+  gtk_widget_show (label25);
+  gtk_frame_set_label_widget (GTK_FRAME (frame7), label25);
+  gtk_label_set_use_markup (GTK_LABEL (label25), TRUE);
+
+  labelPageMotion_More = gtk_label_new (_("Motion & Misc"));
+  gtk_widget_show (labelPageMotion_More);
+  gtk_notebook_set_tab_label (GTK_NOTEBOOK (notebook1), gtk_notebook_get_nth_page (GTK_NOTEBOOK (notebook1), 1), labelPageMotion_More);
+
+  alignment16 = gtk_alignment_new (0.5, 0.5, 1, 1);
+  gtk_widget_show (alignment16);
+  gtk_container_add (GTK_CONTAINER (notebook1), alignment16);
+  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment16), 7, 7, 7, 7);
+
+  vbox2 = gtk_vbox_new (FALSE, 3);
+  gtk_widget_show (vbox2);
+  gtk_container_add (GTK_CONTAINER (alignment16), vbox2);
+
+  frame4 = gtk_frame_new (NULL);
+  gtk_widget_show (frame4);
+  gtk_box_pack_start (GTK_BOX (vbox2), frame4, FALSE, TRUE, 0);
+
+  alignment4 = gtk_alignment_new (0.5, 0.5, 1, 1);
+  gtk_widget_show (alignment4);
+  gtk_container_add (GTK_CONTAINER (frame4), alignment4);
+  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment4), 7, 7, 7, 7);
+
+  vbox3 = gtk_vbox_new (FALSE, 3);
+  gtk_widget_show (vbox3);
+  gtk_container_add (GTK_CONTAINER (alignment4), vbox3);
+
+  checkbutton8x8 = gtk_check_button_new_with_mnemonic (_("8x8 Transform"));
+  gtk_widget_show (checkbutton8x8);
+  gtk_box_pack_start (GTK_BOX (vbox3), checkbutton8x8, FALSE, FALSE, 0);
+  gtk_tooltips_set_tip (tooltips, checkbutton8x8, _("General block breakdown transformation"), NULL);
+  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (checkbutton8x8), TRUE);
+
+  checkbutton8x8P = gtk_check_button_new_with_mnemonic (_("8x8, 8x16 and 16x8 P-frame search"));
+  gtk_widget_show (checkbutton8x8P);
+  gtk_box_pack_start (GTK_BOX (vbox3), checkbutton8x8P, FALSE, FALSE, 0);
+  gtk_tooltips_set_tip (tooltips, checkbutton8x8P, _("Improve the P-frame quality"), NULL);
+  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (checkbutton8x8P), TRUE);
+
+  checkbutton8x8B = gtk_check_button_new_with_mnemonic (_("8x8, 8x16 and 16x8 B-frame search"));
+  gtk_widget_show (checkbutton8x8B);
+  gtk_box_pack_start (GTK_BOX (vbox3), checkbutton8x8B, FALSE, FALSE, 0);
+  gtk_tooltips_set_tip (tooltips, checkbutton8x8B, _("Improve the B-frame quality"), NULL);
+  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (checkbutton8x8B), TRUE);
+
+  checkbutton4x4 = gtk_check_button_new_with_mnemonic (_("4x4, 4x8 and 8x4 P-frame search"));
+  gtk_widget_show (checkbutton4x4);
+  gtk_box_pack_start (GTK_BOX (vbox3), checkbutton4x4, FALSE, FALSE, 0);
+  gtk_tooltips_set_tip (tooltips, checkbutton4x4, _("Further improve the P-frame quality"), NULL);
+
+  checkbutton8x8I = gtk_check_button_new_with_mnemonic (_("8x8 Intra search"));
+  gtk_widget_show (checkbutton8x8I);
+  gtk_box_pack_start (GTK_BOX (vbox3), checkbutton8x8I, FALSE, FALSE, 0);
+  gtk_tooltips_set_tip (tooltips, checkbutton8x8I, _("Enable DCT Intra block search to improve quality"), NULL);
+  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (checkbutton8x8I), TRUE);
+
+  checkbutton4x4I = gtk_check_button_new_with_mnemonic (_("4x4 Intra search"));
+  gtk_widget_show (checkbutton4x4I);
+  gtk_box_pack_start (GTK_BOX (vbox3), checkbutton4x4I, FALSE, FALSE, 0);
+  gtk_tooltips_set_tip (tooltips, checkbutton4x4I, _("Further enable DCT Intra block search to improve quality"), NULL);
+  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (checkbutton4x4I), TRUE);
+
+  label19 = gtk_label_new (_("<b>Partition Macroblocks</b>"));
+  gtk_widget_show (label19);
+  gtk_frame_set_label_widget (GTK_FRAME (frame4), label19);
+  gtk_label_set_use_markup (GTK_LABEL (label19), TRUE);
+
+  frame5 = gtk_frame_new (NULL);
+  gtk_widget_show (frame5);
+  gtk_box_pack_start (GTK_BOX (vbox2), frame5, FALSE, TRUE, 0);
+
+  alignment5 = gtk_alignment_new (0.5, 0.5, 1, 1);
+  gtk_widget_show (alignment5);
+  gtk_container_add (GTK_CONTAINER (frame5), alignment5);
+  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment5), 7, 7, 7, 7);
+
+  vbox4 = gtk_vbox_new (FALSE, 3);
+  gtk_widget_show (vbox4);
+  gtk_container_add (GTK_CONTAINER (alignment5), vbox4);
+
+  table5 = gtk_table_new (2, 2, FALSE);
+  gtk_widget_show (table5);
+  gtk_box_pack_start (GTK_BOX (vbox4), table5, TRUE, TRUE, 0);
+  gtk_table_set_row_spacings (GTK_TABLE (table5), 3);
+  gtk_table_set_col_spacings (GTK_TABLE (table5), 10);
+
+  labelBias = gtk_label_new (_("Bias"));
+  gtk_widget_show (labelBias);
+  gtk_table_attach (GTK_TABLE (table5), labelBias, 0, 1, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelBias), 0, 0.5);
+
+  labelMaxConsecutive = gtk_label_new (_("Max Consecutive"));
+  gtk_widget_show (labelMaxConsecutive);
+  gtk_table_attach (GTK_TABLE (table5), labelMaxConsecutive, 0, 1, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelMaxConsecutive), 0, 0.5);
+
+  spinbuttonBias_adj = gtk_adjustment_new (0, -100, 100, 1, 10, 10);
+  spinbuttonBias = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonBias_adj), 1, 0);
+  gtk_widget_show (spinbuttonBias);
+  gtk_table_attach (GTK_TABLE (table5), spinbuttonBias, 1, 2, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, spinbuttonBias, _("Increase / decrease probability for how often B-frames are used. It will not violate the maximum consecutive frame limit."), NULL);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonBias), TRUE);
+
+  spinbuttonMaxBFrame_adj = gtk_adjustment_new (3, 0, 15, 1, 10, 10);
+  spinbuttonMaxBFrame = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonMaxBFrame_adj), 1, 0);
+  gtk_widget_show (spinbuttonMaxBFrame);
+  gtk_table_attach (GTK_TABLE (table5), spinbuttonMaxBFrame, 1, 2, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, spinbuttonMaxBFrame, _("Set the maximum number of consecutive B-frames. This defines how many duplicate frames can be dropped. Numbers 2 to 5 are recommended. This greatly improves the use of bitrate and quality."), NULL);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonMaxBFrame), TRUE);
+
+  alignment20 = gtk_alignment_new (0.5, 0.5, 1, 1);
+  gtk_widget_show (alignment20);
+  gtk_box_pack_start (GTK_BOX (vbox4), alignment20, TRUE, TRUE, 0);
+  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment20), 3, 3, 0, 0);
+
+  table6 = gtk_table_new (2, 2, FALSE);
+  gtk_widget_show (table6);
+  gtk_container_add (GTK_CONTAINER (alignment20), table6);
+  gtk_table_set_row_spacings (GTK_TABLE (table6), 3);
+  gtk_table_set_col_spacings (GTK_TABLE (table6), 10);
+
+  checkbuttonBidirME = gtk_check_button_new_with_mnemonic (_("Bidirectional ME"));
+  gtk_widget_show (checkbuttonBidirME);
+  gtk_table_attach (GTK_TABLE (table6), checkbuttonBidirME, 1, 2, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, checkbuttonBidirME, _("Optimise both motion vectors in B-frames. This will improve quality but take more time for encoding."), NULL);
+
+  checkbuttonWeighted = gtk_check_button_new_with_mnemonic (_("Weighted Biprediction"));
+  gtk_widget_show (checkbuttonWeighted);
+  gtk_table_attach (GTK_TABLE (table6), checkbuttonWeighted, 1, 2, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, checkbuttonWeighted, _("Enables weighting of B-frames to help fades"), NULL);
+  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (checkbuttonWeighted), TRUE);
+
+  checkbuttonAdaptative = gtk_check_button_new_with_mnemonic (_("Adaptative DCT"));
+  gtk_widget_show (checkbuttonAdaptative);
+  gtk_table_attach (GTK_TABLE (table6), checkbuttonAdaptative, 0, 1, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, checkbuttonAdaptative, _("Use fewer B-frames if needed. This is always recommended. If not enabled, the codec will always use the maximum number of consecutive B-frames."), NULL);
+  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (checkbuttonAdaptative), TRUE);
+
+  checkbuttonBasReference = gtk_check_button_new_with_mnemonic (_("Use as Reference"));
+  gtk_widget_show (checkbuttonBasReference);
+  gtk_table_attach (GTK_TABLE (table6), checkbuttonBasReference, 0, 1, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, checkbuttonBasReference, _("Allow B-frames to make references non-linearly to another B-frame (instead of creating a duplicate copy)"), NULL);
+
+  hbox1 = gtk_hbox_new (FALSE, 10);
+  gtk_widget_show (hbox1);
+  gtk_box_pack_start (GTK_BOX (vbox4), hbox1, TRUE, TRUE, 0);
+
+  labelBFrameDirectMode = gtk_label_new (_("B-Frame Direct Mode"));
+  gtk_widget_show (labelBFrameDirectMode);
+  gtk_box_pack_start (GTK_BOX (hbox1), labelBFrameDirectMode, FALSE, TRUE, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelBFrameDirectMode), 0, 0.5);
+
+  comboboxDirectMode = gtk_combo_box_new_text ();
+  gtk_widget_show (comboboxDirectMode);
+  gtk_box_pack_start (GTK_BOX (hbox1), comboboxDirectMode, FALSE, TRUE, 0);
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxDirectMode), _("None"));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxDirectMode), _("Spatial"));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxDirectMode), _("Temporal"));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxDirectMode), _("Auto"));
+
+  label20 = gtk_label_new (_("<b>B-Frames</b>"));
+  gtk_widget_show (label20);
+  gtk_frame_set_label_widget (GTK_FRAME (frame5), label20);
+  gtk_label_set_use_markup (GTK_LABEL (label20), TRUE);
+
+  labelPagePartion_Frame = gtk_label_new (_("Partitions & Frames"));
+  gtk_widget_show (labelPagePartion_Frame);
+  gtk_notebook_set_tab_label (GTK_NOTEBOOK (notebook1), gtk_notebook_get_nth_page (GTK_NOTEBOOK (notebook1), 2), labelPagePartion_Frame);
+
+  alignment17 = gtk_alignment_new (0.5, 0.5, 1, 1);
+  gtk_widget_show (alignment17);
+  gtk_container_add (GTK_CONTAINER (notebook1), alignment17);
+  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment17), 7, 7, 7, 7);
+
+  vbox1 = gtk_vbox_new (FALSE, 3);
+  gtk_widget_show (vbox1);
+  gtk_container_add (GTK_CONTAINER (alignment17), vbox1);
+
+  frame1 = gtk_frame_new (NULL);
+  gtk_widget_show (frame1);
+  gtk_box_pack_start (GTK_BOX (vbox1), frame1, FALSE, TRUE, 1);
+
+  alignment1 = gtk_alignment_new (0.5, 0.5, 1, 1);
+  gtk_widget_show (alignment1);
+  gtk_container_add (GTK_CONTAINER (frame1), alignment1);
+  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment1), 7, 7, 7, 7);
+
+  table2 = gtk_table_new (3, 2, FALSE);
+  gtk_widget_show (table2);
+  gtk_container_add (GTK_CONTAINER (alignment1), table2);
+  gtk_table_set_row_spacings (GTK_TABLE (table2), 3);
+  gtk_table_set_col_spacings (GTK_TABLE (table2), 10);
+
+  spinbuttonKeyframeBoost_adj = gtk_adjustment_new (40, 0, 100, 1, 10, 10);
+  spinbuttonKeyframeBoost = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonKeyframeBoost_adj), 1, 0);
+  gtk_widget_show (spinbuttonKeyframeBoost);
+  gtk_table_attach (GTK_TABLE (table2), spinbuttonKeyframeBoost, 1, 2, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_widget_set_size_request (spinbuttonKeyframeBoost, 115, -1);
+  gtk_tooltips_set_tip (tooltips, spinbuttonKeyframeBoost, _("Set how much \"bitrate bonus\" a keyframe can get"), NULL);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonKeyframeBoost), TRUE);
+
+  spinbuttonBframeReduction_adj = gtk_adjustment_new (30, 0, 100, 1, 10, 10);
+  spinbuttonBframeReduction = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonBframeReduction_adj), 1, 0);
+  gtk_widget_show (spinbuttonBframeReduction);
+  gtk_table_attach (GTK_TABLE (table2), spinbuttonBframeReduction, 1, 2, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, spinbuttonBframeReduction, _("Set how much bitrate is deducted from a B-frame as compared to the previous P-frame"), NULL);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonBframeReduction), TRUE);
+
+  spinbuttonBitrateVariability_adj = gtk_adjustment_new (60, 0, 100, 1, 10, 10);
+  spinbuttonBitrateVariability = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonBitrateVariability_adj), 1, 0);
+  gtk_widget_show (spinbuttonBitrateVariability);
+  gtk_table_attach (GTK_TABLE (table2), spinbuttonBitrateVariability, 1, 2, 2, 3,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, spinbuttonBitrateVariability, _("Define how much the bitrate can fluctuate over the entire video. 0% results in a constant bitrate stream, while 100% results in a pure quality based bitrate stream."), NULL);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonBitrateVariability), TRUE);
+
+  labelKeyframeboost = gtk_label_new (_("Keyframe Boost (%)"));
+  gtk_widget_show (labelKeyframeboost);
+  gtk_table_attach (GTK_TABLE (table2), labelKeyframeboost, 0, 1, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelKeyframeboost), 0, 0.5);
+
+  label11 = gtk_label_new (_("B-frame Reduction (%)"));
+  gtk_widget_show (label11);
+  gtk_table_attach (GTK_TABLE (table2), label11, 0, 1, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (label11), 0, 0.5);
+
+  label12 = gtk_label_new (_("Bitrate Variability (%)"));
+  gtk_widget_show (label12);
+  gtk_table_attach (GTK_TABLE (table2), label12, 0, 1, 2, 3,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (label12), 0, 0.5);
+
+  label7 = gtk_label_new (_("<b>Bitrate</b>"));
+  gtk_widget_show (label7);
+  gtk_frame_set_label_widget (GTK_FRAME (frame1), label7);
+  gtk_label_set_use_markup (GTK_LABEL (label7), TRUE);
+
+  frame2 = gtk_frame_new (NULL);
+  gtk_widget_show (frame2);
+  gtk_box_pack_start (GTK_BOX (vbox1), frame2, FALSE, TRUE, 1);
+
+  alignment2 = gtk_alignment_new (0.5, 0.5, 1, 1);
+  gtk_widget_show (alignment2);
+  gtk_container_add (GTK_CONTAINER (frame2), alignment2);
+  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment2), 7, 7, 7, 7);
+
+  table3 = gtk_table_new (3, 2, FALSE);
+  gtk_widget_show (table3);
+  gtk_container_add (GTK_CONTAINER (alignment2), table3);
+  gtk_table_set_row_spacings (GTK_TABLE (table3), 3);
+  gtk_table_set_col_spacings (GTK_TABLE (table3), 20);
+
+  label13 = gtk_label_new (_("Min QP"));
+  gtk_widget_show (label13);
+  gtk_table_attach (GTK_TABLE (table3), label13, 0, 1, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (label13), 0, 0.5);
+
+  label14 = gtk_label_new (_("Max QP"));
+  gtk_widget_show (label14);
+  gtk_table_attach (GTK_TABLE (table3), label14, 0, 1, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (label14), 0, 0.5);
+
+  label15 = gtk_label_new (_("Max QP Step"));
+  gtk_widget_show (label15);
+  gtk_table_attach (GTK_TABLE (table3), label15, 0, 1, 2, 3,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (label15), 0, 0.5);
+
+  spinbuttonMinQp_adj = gtk_adjustment_new (10, 10, 51, 1, 10, 10);
+  spinbuttonMinQp = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonMinQp_adj), 1, 0);
+  gtk_widget_show (spinbuttonMinQp);
+  gtk_table_attach (GTK_TABLE (table3), spinbuttonMinQp, 1, 2, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_widget_set_size_request (spinbuttonMinQp, 54, -1);
+  gtk_tooltips_set_tip (tooltips, spinbuttonMinQp, _("Enforce a minimum quantizer level"), NULL);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonMinQp), TRUE);
+
+  spinbuttonMaxQp_adj = gtk_adjustment_new (51, 10, 51, 1, 10, 10);
+  spinbuttonMaxQp = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonMaxQp_adj), 1, 0);
+  gtk_widget_show (spinbuttonMaxQp);
+  gtk_table_attach (GTK_TABLE (table3), spinbuttonMaxQp, 1, 2, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, spinbuttonMaxQp, _("Enforce a maximum quantizer level"), NULL);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonMaxQp), TRUE);
+
+  spinbuttonQpStep_adj = gtk_adjustment_new (4, 0, 10, 1, 10, 10);
+  spinbuttonQpStep = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonQpStep_adj), 1, 0);
+  gtk_widget_show (spinbuttonQpStep);
+  gtk_table_attach (GTK_TABLE (table3), spinbuttonQpStep, 1, 2, 2, 3,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, spinbuttonQpStep, _("Define how much the quantizer rate can change between two consecutive frames"), NULL);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonQpStep), TRUE);
+
+  label8 = gtk_label_new (_("<b>Quantization Limits</b>"));
+  gtk_widget_show (label8);
+  gtk_frame_set_label_widget (GTK_FRAME (frame2), label8);
+  gtk_label_set_use_markup (GTK_LABEL (label8), TRUE);
+
+  frame3 = gtk_frame_new (NULL);
+  gtk_widget_show (frame3);
+  gtk_box_pack_start (GTK_BOX (vbox1), frame3, FALSE, TRUE, 1);
+
+  alignment3 = gtk_alignment_new (0.5, 0.5, 1, 1);
+  gtk_widget_show (alignment3);
+  gtk_container_add (GTK_CONTAINER (frame3), alignment3);
+  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment3), 7, 7, 7, 7);
+
+  table4 = gtk_table_new (3, 2, FALSE);
+  gtk_widget_show (table4);
+  gtk_container_add (GTK_CONTAINER (alignment3), table4);
+  gtk_table_set_row_spacings (GTK_TABLE (table4), 3);
+  gtk_table_set_col_spacings (GTK_TABLE (table4), 10);
+
+  spinbuttonSceneCut_adj = gtk_adjustment_new (40, 0, 100, 1, 10, 10);
+  spinbuttonSceneCut = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonSceneCut_adj), 1, 0);
+  gtk_widget_show (spinbuttonSceneCut);
+  gtk_table_attach (GTK_TABLE (table4), spinbuttonSceneCut, 1, 2, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_widget_set_size_request (spinbuttonSceneCut, 115, -1);
+  gtk_tooltips_set_tip (tooltips, spinbuttonSceneCut, _("Increase / decrease sensitivity for detecting scene changes. Improves I-frame usage and quality."), NULL);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonSceneCut), TRUE);
+
+  label16 = gtk_label_new (_("Scene Cut Threshold"));
+  gtk_widget_show (label16);
+  gtk_table_attach (GTK_TABLE (table4), label16, 0, 1, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (label16), 0, 0.5);
+
+  label17 = gtk_label_new (_("Min IDR Frame Interval"));
+  gtk_widget_show (label17);
+  gtk_table_attach (GTK_TABLE (table4), label17, 0, 1, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (label17), 0, 0.5);
+
+  spinbuttonMinIdr_adj = gtk_adjustment_new (25, 0, 100, 1, 10, 10);
+  spinbuttonMinIdr = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonMinIdr_adj), 1, 0);
+  gtk_widget_show (spinbuttonMinIdr);
+  gtk_table_attach (GTK_TABLE (table4), spinbuttonMinIdr, 1, 2, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, spinbuttonMinIdr, _("Set minimum frame interval between IDR frames. Defines the minimum amount a frame can be reused and referenced by other frames before a new IDR frame is established."), NULL);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonMinIdr), TRUE);
+
+  spinbuttonMaxIdr_adj = gtk_adjustment_new (250, 1, 1000, 1, 10, 10);
+  spinbuttonMaxIdr = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonMaxIdr_adj), 1, 0);
+  gtk_widget_show (spinbuttonMaxIdr);
+  gtk_table_attach (GTK_TABLE (table4), spinbuttonMaxIdr, 1, 2, 2, 3,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, spinbuttonMaxIdr, _("Set maximum frame interval between IDR frames. Defines the maximum amount a frame can be reused and referenced by other frames before a new IDR frame is established."), NULL);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonMaxIdr), TRUE);
+
+  label18 = gtk_label_new (_("Max IDR Frame Interval"));
+  gtk_widget_show (label18);
+  gtk_table_attach (GTK_TABLE (table4), label18, 0, 1, 2, 3,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (label18), 0, 0.5);
+
+  labelMoreEncodingSettings = gtk_label_new (_("<b>More Rate Settings</b>"));
+  gtk_widget_show (labelMoreEncodingSettings);
+  gtk_frame_set_label_widget (GTK_FRAME (frame3), labelMoreEncodingSettings);
+  gtk_label_set_use_markup (GTK_LABEL (labelMoreEncodingSettings), TRUE);
+
+  frameVideoBufferVerifier = gtk_frame_new (NULL);
+  gtk_widget_show (frameVideoBufferVerifier);
+  gtk_box_pack_start (GTK_BOX (vbox1), frameVideoBufferVerifier, FALSE, TRUE, 0);
+
+  alignment11 = gtk_alignment_new (0.5, 0.5, 1, 1);
+  gtk_widget_show (alignment11);
+  gtk_container_add (GTK_CONTAINER (frameVideoBufferVerifier), alignment11);
+  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment11), 7, 7, 7, 7);
+
+  table12 = gtk_table_new (3, 2, FALSE);
+  gtk_widget_show (table12);
+  gtk_container_add (GTK_CONTAINER (alignment11), table12);
+  gtk_table_set_row_spacings (GTK_TABLE (table12), 3);
+  gtk_table_set_col_spacings (GTK_TABLE (table12), 10);
+
+  labelVBVBufferSize = gtk_label_new (_("VBV Buffer Size"));
+  gtk_widget_show (labelVBVBufferSize);
+  gtk_table_attach (GTK_TABLE (table12), labelVBVBufferSize, 0, 1, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelVBVBufferSize), 0, 0.5);
+
+  labelVBVInitialbuffer = gtk_label_new (_("Initial VBV Buffer (%)"));
+  gtk_widget_show (labelVBVInitialbuffer);
+  gtk_table_attach (GTK_TABLE (table12), labelVBVInitialbuffer, 0, 1, 2, 3,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelVBVInitialbuffer), 0, 0.5);
+
+  labelVBVMaximumBitrate = gtk_label_new (_("Maximum Local Bitrate"));
+  gtk_widget_show (labelVBVMaximumBitrate);
+  gtk_table_attach (GTK_TABLE (table12), labelVBVMaximumBitrate, 0, 1, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelVBVMaximumBitrate), 0, 0.5);
+
+  spinbuttonvbv_max_bitrate_adj = gtk_adjustment_new (0, 0, 99999, 1, 10, 10);
+  spinbuttonvbv_max_bitrate = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonvbv_max_bitrate_adj), 1, 0);
+  gtk_widget_show (spinbuttonvbv_max_bitrate);
+  gtk_table_attach (GTK_TABLE (table12), spinbuttonvbv_max_bitrate, 1, 2, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonvbv_max_bitrate), TRUE);
+
+  spinbuttonvbv_buffer_size_adj = gtk_adjustment_new (0, 0, 99999, 1, 10, 10);
+  spinbuttonvbv_buffer_size = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonvbv_buffer_size_adj), 1, 0);
+  gtk_widget_show (spinbuttonvbv_buffer_size);
+  gtk_table_attach (GTK_TABLE (table12), spinbuttonvbv_buffer_size, 1, 2, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonvbv_buffer_size), TRUE);
+
+  spinbuttonvbv_buffer_init_adj = gtk_adjustment_new (90, 0, 100, 1, 10, 10);
+  spinbuttonvbv_buffer_init = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonvbv_buffer_init_adj), 1, 0);
+  gtk_widget_show (spinbuttonvbv_buffer_init);
+  gtk_table_attach (GTK_TABLE (table12), spinbuttonvbv_buffer_init, 1, 2, 2, 3,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonvbv_buffer_init), TRUE);
+
+  labelVideoBufferVerifier = gtk_label_new (_("<b>Video Buffer Verifier</b>"));
+  gtk_widget_show (labelVideoBufferVerifier);
+  gtk_frame_set_label_widget (GTK_FRAME (frameVideoBufferVerifier), labelVideoBufferVerifier);
+  gtk_label_set_use_markup (GTK_LABEL (labelVideoBufferVerifier), TRUE);
+
+  labelPageRateControl = gtk_label_new (_("Rate Control"));
+  gtk_widget_show (labelPageRateControl);
+  gtk_notebook_set_tab_label (GTK_NOTEBOOK (notebook1), gtk_notebook_get_nth_page (GTK_NOTEBOOK (notebook1), 3), labelPageRateControl);
+
+  alignment18 = gtk_alignment_new (0.5, 0.5, 1, 1);
+  gtk_widget_show (alignment18);
+  gtk_container_add (GTK_CONTAINER (notebook1), alignment18);
+  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment18), 7, 7, 7, 7);
+
+  vbox8 = gtk_vbox_new (FALSE, 3);
+  gtk_widget_show (vbox8);
+  gtk_container_add (GTK_CONTAINER (alignment18), vbox8);
+
+  frame10 = gtk_frame_new (NULL);
+  gtk_widget_show (frame10);
+  gtk_box_pack_start (GTK_BOX (vbox8), frame10, FALSE, TRUE, 0);
+
+  alignment10 = gtk_alignment_new (0.5, 0.5, 1, 1);
+  gtk_widget_show (alignment10);
+  gtk_container_add (GTK_CONTAINER (frame10), alignment10);
+  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment10), 7, 7, 7, 7);
+
+  table15 = gtk_table_new (4, 2, FALSE);
+  gtk_widget_show (table15);
+  gtk_container_add (GTK_CONTAINER (alignment10), table15);
+  gtk_table_set_row_spacings (GTK_TABLE (table15), 3);
+  gtk_table_set_col_spacings (GTK_TABLE (table15), 10);
+
+  labelBitrateVariance = gtk_label_new (_("Bitrate Variance"));
+  gtk_widget_show (labelBitrateVariance);
+  gtk_table_attach (GTK_TABLE (table15), labelBitrateVariance, 0, 1, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelBitrateVariance), 0, 0.5);
+
+  spinbuttonBitrateVariance_adj = gtk_adjustment_new (1, 0, 1, 0.10000000149, 10, 10);
+  spinbuttonBitrateVariance = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonBitrateVariance_adj), 0.10000000149, 1);
+  gtk_widget_show (spinbuttonBitrateVariance);
+  gtk_table_attach (GTK_TABLE (table15), spinbuttonBitrateVariance, 1, 2, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, spinbuttonBitrateVariance, _("Allowed variance of average bitrate. Lower values mean less variance. Higher values mean more variance."), NULL);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonBitrateVariance), TRUE);
+
+  spinbuttonQuantizerCompression_adj = gtk_adjustment_new (0.600000023842, 0, 1, 0.10000000149, 10, 10);
+  spinbuttonQuantizerCompression = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonQuantizerCompression_adj), 0.10000000149, 1);
+  gtk_widget_show (spinbuttonQuantizerCompression);
+  gtk_table_attach (GTK_TABLE (table15), spinbuttonQuantizerCompression, 1, 2, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, spinbuttonQuantizerCompression, _("Allowed variance of average quantizer or quality. Lower values mean less variance. Higher values mean more variance. Note that 0 means constant quality while 1 means constant fluctuation. Recommended 0.6."), NULL);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonQuantizerCompression), TRUE);
+
+  spinbuttonTempBlurFrame_adj = gtk_adjustment_new (20, 0, 999, 1, 10, 10);
+  spinbuttonTempBlurFrame = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonTempBlurFrame_adj), 1, 0);
+  gtk_widget_show (spinbuttonTempBlurFrame);
+  gtk_table_attach (GTK_TABLE (table15), spinbuttonTempBlurFrame, 1, 2, 2, 3,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, spinbuttonTempBlurFrame, _("Reduced fluctuations in Quantizer (before curve compression)"), NULL);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonTempBlurFrame), TRUE);
+
+  spinbuttonTempBlurQuant_adj = gtk_adjustment_new (0.5, 0, 1, 0.5, 10, 10);
+  spinbuttonTempBlurQuant = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonTempBlurQuant_adj), 0.5, 1);
+  gtk_widget_show (spinbuttonTempBlurQuant);
+  gtk_table_attach (GTK_TABLE (table15), spinbuttonTempBlurQuant, 1, 2, 3, 4,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonTempBlurQuant), TRUE);
+
+  labelQuantizerCompression = gtk_label_new (_("Quantizer Compression"));
+  gtk_widget_show (labelQuantizerCompression);
+  gtk_table_attach (GTK_TABLE (table15), labelQuantizerCompression, 0, 1, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelQuantizerCompression), 0, 0.5);
+
+  labelTempBlurEstFrame = gtk_label_new (_("Temp. Blur of Est. Frame Complexity"));
+  gtk_widget_show (labelTempBlurEstFrame);
+  gtk_table_attach (GTK_TABLE (table15), labelTempBlurEstFrame, 0, 1, 2, 3,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelTempBlurEstFrame), 0, 0.5);
+
+  labelTempBlueQuant = gtk_label_new (_("Temp. Blur of Quant. after CC"));
+  gtk_widget_show (labelTempBlueQuant);
+  gtk_table_attach (GTK_TABLE (table15), labelTempBlueQuant, 0, 1, 3, 4,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelTempBlueQuant), 0, 0.5);
+
+  labelMisc = gtk_label_new (_("<b>Misc</b>"));
+  gtk_widget_show (labelMisc);
+  gtk_frame_set_label_widget (GTK_FRAME (frame10), labelMisc);
+  gtk_label_set_use_markup (GTK_LABEL (labelMisc), TRUE);
+
+  frame11 = gtk_frame_new (NULL);
+  gtk_widget_show (frame11);
+  gtk_box_pack_start (GTK_BOX (vbox8), frame11, FALSE, TRUE, 0);
+
+  alignment13 = gtk_alignment_new (0.5, 0.5, 1, 1);
+  gtk_widget_show (alignment13);
+  gtk_container_add (GTK_CONTAINER (frame11), alignment13);
+  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment13), 7, 7, 7, 7);
+
+  table16 = gtk_table_new (3, 2, FALSE);
+  gtk_widget_show (table16);
+  gtk_container_add (GTK_CONTAINER (alignment13), table16);
+  gtk_table_set_row_spacings (GTK_TABLE (table16), 3);
+  gtk_table_set_col_spacings (GTK_TABLE (table16), 10);
+
+  spinbutton8_adj = gtk_adjustment_new (1.39999997616, 1, 10, 0.10000000149, 10, 10);
+  spinbutton8 = gtk_spin_button_new (GTK_ADJUSTMENT (spinbutton8_adj), 0.10000000149, 1);
+  gtk_widget_show (spinbutton8);
+  gtk_table_attach (GTK_TABLE (table16), spinbutton8, 1, 2, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, spinbutton8, _("Quantization factors used between I and P-frames"), NULL);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbutton8), TRUE);
+
+  spinbutton9_adj = gtk_adjustment_new (1.29999995232, 1, 10, 0.10000000149, 10, 10);
+  spinbutton9 = gtk_spin_button_new (GTK_ADJUSTMENT (spinbutton9_adj), 0.10000000149, 1);
+  gtk_widget_show (spinbutton9);
+  gtk_table_attach (GTK_TABLE (table16), spinbutton9, 1, 2, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, spinbutton9, _("Quantization used between P and B-frames"), NULL);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbutton9), TRUE);
+
+  spinbuttonChromaQPOffset_adj = gtk_adjustment_new (0, -12, 12, 1, 10, 10);
+  spinbuttonChromaQPOffset = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonChromaQPOffset_adj), 1, 0);
+  gtk_widget_show (spinbuttonChromaQPOffset);
+  gtk_table_attach (GTK_TABLE (table16), spinbuttonChromaQPOffset, 1, 2, 2, 3,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, spinbuttonChromaQPOffset, _("Quantization difference between chroma (color) and luma (brightness)"), NULL);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonChromaQPOffset), TRUE);
+
+  labelFactorbetweenIandP = gtk_label_new (_("Factor between I and P-frame Quants"));
+  gtk_widget_show (labelFactorbetweenIandP);
+  gtk_table_attach (GTK_TABLE (table16), labelFactorbetweenIandP, 0, 1, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelFactorbetweenIandP), 0, 0.5);
+
+  labelFactorbetweenPandB = gtk_label_new (_("Factor between P and B-frame Quants"));
+  gtk_widget_show (labelFactorbetweenPandB);
+  gtk_table_attach (GTK_TABLE (table16), labelFactorbetweenPandB, 0, 1, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelFactorbetweenPandB), 0, 0.5);
+
+  labelChromaQPOffset = gtk_label_new (_("Chroma QP Offset"));
+  gtk_widget_show (labelChromaQPOffset);
+  gtk_table_attach (GTK_TABLE (table16), labelChromaQPOffset, 0, 1, 2, 3,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelChromaQPOffset), 0, 0.5);
+
+  labelQuantizers = gtk_label_new (_("<b>Quantizers</b>"));
+  gtk_widget_show (labelQuantizers);
+  gtk_frame_set_label_widget (GTK_FRAME (frame11), labelQuantizers);
+  gtk_label_set_use_markup (GTK_LABEL (labelQuantizers), TRUE);
+
+  frame9 = gtk_frame_new (NULL);
+  gtk_widget_show (frame9);
+  gtk_box_pack_start (GTK_BOX (vbox8), frame9, FALSE, TRUE, 0);
+
+  alignment9 = gtk_alignment_new (0.5, 0.5, 1, 1);
+  gtk_widget_show (alignment9);
+  gtk_container_add (GTK_CONTAINER (frame9), alignment9);
+  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment9), 7, 7, 7, 7);
+
+  vbox9 = gtk_vbox_new (FALSE, 3);
+  gtk_widget_show (vbox9);
+  gtk_container_add (GTK_CONTAINER (alignment9), vbox9);
+
+  radiobuttonFlatmatrix = gtk_radio_button_new_with_mnemonic (NULL, _("Flat Matrix"));
+  gtk_widget_show (radiobuttonFlatmatrix);
+  gtk_box_pack_start (GTK_BOX (vbox9), radiobuttonFlatmatrix, FALSE, FALSE, 0);
+  gtk_radio_button_set_group (GTK_RADIO_BUTTON (radiobuttonFlatmatrix), radiobuttonFlatmatrix_group);
+  radiobuttonFlatmatrix_group = gtk_radio_button_get_group (GTK_RADIO_BUTTON (radiobuttonFlatmatrix));
+  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (radiobuttonFlatmatrix), TRUE);
+
+  radiobuttonJVTmatrix = gtk_radio_button_new_with_mnemonic (NULL, _("JVT Matrix"));
+  gtk_widget_show (radiobuttonJVTmatrix);
+  gtk_box_pack_start (GTK_BOX (vbox9), radiobuttonJVTmatrix, FALSE, FALSE, 0);
+  gtk_radio_button_set_group (GTK_RADIO_BUTTON (radiobuttonJVTmatrix), radiobuttonFlatmatrix_group);
+  radiobuttonFlatmatrix_group = gtk_radio_button_get_group (GTK_RADIO_BUTTON (radiobuttonJVTmatrix));
+
+  hbox13 = gtk_hbox_new (FALSE, 10);
+  gtk_widget_show (hbox13);
+  gtk_box_pack_start (GTK_BOX (vbox9), hbox13, FALSE, FALSE, 0);
+
+  radiobuttonCustommatrix = gtk_radio_button_new_with_mnemonic (NULL, _("Custom Matrix"));
+  gtk_widget_show (radiobuttonCustommatrix);
+  gtk_box_pack_start (GTK_BOX (hbox13), radiobuttonCustommatrix, TRUE, TRUE, 0);
+  gtk_radio_button_set_group (GTK_RADIO_BUTTON (radiobuttonCustommatrix), radiobuttonFlatmatrix_group);
+  radiobuttonFlatmatrix_group = gtk_radio_button_get_group (GTK_RADIO_BUTTON (radiobuttonCustommatrix));
+
+  hbox14 = gtk_hbox_new (FALSE, 0);
+  gtk_widget_show (hbox14);
+  gtk_box_pack_start (GTK_BOX (hbox13), hbox14, TRUE, TRUE, 0);
+
+  filechooserbuttonOpenCQMFile = gtk_file_chooser_button_new (_("Open CQM file"), GTK_FILE_CHOOSER_ACTION_OPEN);
+  gtk_widget_show (filechooserbuttonOpenCQMFile);
+  gtk_box_pack_start (GTK_BOX (hbox14), filechooserbuttonOpenCQMFile, TRUE, TRUE, 0);
+
+  vseparator1 = gtk_vseparator_new ();
+  gtk_widget_show (vseparator1);
+  gtk_box_pack_start (GTK_BOX (hbox14), vseparator1, TRUE, TRUE, 0);
+
+  buttonEditCustomMatrix = gtk_button_new_with_mnemonic (_("Edit Custom Matrix"));
+  gtk_widget_show (buttonEditCustomMatrix);
+  gtk_box_pack_start (GTK_BOX (hbox14), buttonEditCustomMatrix, FALSE, FALSE, 0);
+  gtk_tooltips_set_tip (tooltips, buttonEditCustomMatrix, _("Edit loaded custom quantization matrix file"), NULL);
+
+  labelFrameQuantizationMatrices = gtk_label_new (_("<b>Quantization Matrices</b>"));
+  gtk_widget_show (labelFrameQuantizationMatrices);
+  gtk_frame_set_label_widget (GTK_FRAME (frame9), labelFrameQuantizationMatrices);
+  gtk_label_set_use_markup (GTK_LABEL (labelFrameQuantizationMatrices), TRUE);
+
+  labelMore = gtk_label_new (_("More"));
+  gtk_widget_show (labelMore);
+  gtk_notebook_set_tab_label (GTK_NOTEBOOK (notebook1), gtk_notebook_get_nth_page (GTK_NOTEBOOK (notebook1), 4), labelMore);
+
+  dialog_action_area1 = GTK_DIALOG (dialog1)->action_area;
+  gtk_widget_show (dialog_action_area1);
+  gtk_button_box_set_layout (GTK_BUTTON_BOX (dialog_action_area1), GTK_BUTTONBOX_END);
+
+  buttonResetDaults = gtk_button_new_with_mnemonic (_("_Defaults"));
+  gtk_widget_show (buttonResetDaults);
+  gtk_dialog_add_action_widget (GTK_DIALOG (dialog1), buttonResetDaults, 0);
+
+  cancelbutton1 = gtk_button_new_from_stock ("gtk-cancel");
+  gtk_widget_show (cancelbutton1);
+  gtk_dialog_add_action_widget (GTK_DIALOG (dialog1), cancelbutton1, GTK_RESPONSE_CANCEL);
+
+  okbutton1 = gtk_button_new_from_stock ("gtk-ok");
+  gtk_widget_show (okbutton1);
+  gtk_dialog_add_action_widget (GTK_DIALOG (dialog1), okbutton1, GTK_RESPONSE_OK);
+  GTK_WIDGET_SET_FLAGS (okbutton1, GTK_CAN_DEFAULT);
+
+  /* Store pointers to all widgets, for use by lookup_widget(). */
+  GLADE_HOOKUP_OBJECT_NO_REF (dialog1, dialog1, "dialog1");
+  GLADE_HOOKUP_OBJECT_NO_REF (dialog1, dialog_vbox1, "dialog_vbox1");
+  GLADE_HOOKUP_OBJECT (dialog1, notebook1, "notebook1");
+  GLADE_HOOKUP_OBJECT (dialog1, alignment14, "alignment14");
+  GLADE_HOOKUP_OBJECT (dialog1, tableBitrate, "tableBitrate");
+  GLADE_HOOKUP_OBJECT (dialog1, labelEncodingMode, "labelEncodingMode");
+  GLADE_HOOKUP_OBJECT (dialog1, labelQuantizer, "labelQuantizer");
+  GLADE_HOOKUP_OBJECT (dialog1, labelTarget, "labelTarget");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonQuantizer, "spinbuttonQuantizer");
+  GLADE_HOOKUP_OBJECT (dialog1, entryTarget, "entryTarget");
+  GLADE_HOOKUP_OBJECT (dialog1, comboboxMode, "comboboxMode");
+  GLADE_HOOKUP_OBJECT (dialog1, labelPageBitrate, "labelPageBitrate");
+  GLADE_HOOKUP_OBJECT (dialog1, alignment15, "alignment15");
+  GLADE_HOOKUP_OBJECT (dialog1, vbox5, "vbox5");
+  GLADE_HOOKUP_OBJECT (dialog1, frame6, "frame6");
+  GLADE_HOOKUP_OBJECT (dialog1, alignment6, "alignment6");
+  GLADE_HOOKUP_OBJECT (dialog1, vbox6, "vbox6");
+  GLADE_HOOKUP_OBJECT (dialog1, table7, "table7");
+  GLADE_HOOKUP_OBJECT (dialog1, labelPartitionDecision, "labelPartitionDecision");
+  GLADE_HOOKUP_OBJECT (dialog1, labelMethod, "labelMethod");
+  GLADE_HOOKUP_OBJECT (dialog1, comboboxPartitionDecision, "comboboxPartitionDecision");
+  GLADE_HOOKUP_OBJECT (dialog1, comboboxMethod, "comboboxMethod");
+  GLADE_HOOKUP_OBJECT (dialog1, table11, "table11");
+  GLADE_HOOKUP_OBJECT (dialog1, labelMaxRefFrames, "labelMaxRefFrames");
+  GLADE_HOOKUP_OBJECT (dialog1, labelRange, "labelRange");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonRange, "spinbuttonRange");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonMaxRefFrames, "spinbuttonMaxRefFrames");
+  GLADE_HOOKUP_OBJECT (dialog1, checkbuttonChromaME, "checkbuttonChromaME");
+  GLADE_HOOKUP_OBJECT (dialog1, checkbuttonMixedRefs, "checkbuttonMixedRefs");
+  GLADE_HOOKUP_OBJECT (dialog1, hbox8, "hbox8");
+  GLADE_HOOKUP_OBJECT (dialog1, checkbuttonfastPSkip, "checkbuttonfastPSkip");
+  GLADE_HOOKUP_OBJECT (dialog1, checkbuttonDCTDecimate, "checkbuttonDCTDecimate");
+  GLADE_HOOKUP_OBJECT (dialog1, checkbuttoninterlaced, "checkbuttoninterlaced");
+  GLADE_HOOKUP_OBJECT (dialog1, label24, "label24");
+  GLADE_HOOKUP_OBJECT (dialog1, frameSampleAR, "frameSampleAR");
+  GLADE_HOOKUP_OBJECT (dialog1, alignment12, "alignment12");
+  GLADE_HOOKUP_OBJECT (dialog1, table35, "table35");
+  GLADE_HOOKUP_OBJECT (dialog1, hbox12, "hbox12");
+  GLADE_HOOKUP_OBJECT (dialog1, entryAR_Num, "entryAR_Num");
+  GLADE_HOOKUP_OBJECT (dialog1, label53, "label53");
+  GLADE_HOOKUP_OBJECT (dialog1, entryAR_Den, "entryAR_Den");
+  GLADE_HOOKUP_OBJECT (dialog1, radiobuttonCustomAR, "radiobuttonCustomAR");
+  GLADE_HOOKUP_OBJECT (dialog1, radiobuttonPredefinedAR, "radiobuttonPredefinedAR");
+  GLADE_HOOKUP_OBJECT (dialog1, radiobuttonAsInputAR, "radiobuttonAsInputAR");
+  GLADE_HOOKUP_OBJECT (dialog1, label40, "label40");
+  GLADE_HOOKUP_OBJECT (dialog1, comboboxentry1, "comboboxentry1");
+  GLADE_HOOKUP_OBJECT (dialog1, label39, "label39");
+  GLADE_HOOKUP_OBJECT (dialog1, frame7, "frame7");
+  GLADE_HOOKUP_OBJECT (dialog1, alignment7, "alignment7");
+  GLADE_HOOKUP_OBJECT (dialog1, vbox7, "vbox7");
+  GLADE_HOOKUP_OBJECT (dialog1, alignment21, "alignment21");
+  GLADE_HOOKUP_OBJECT (dialog1, hbox2, "hbox2");
+  GLADE_HOOKUP_OBJECT (dialog1, checkbuttonCABAC, "checkbuttonCABAC");
+  GLADE_HOOKUP_OBJECT (dialog1, hbox7, "hbox7");
+  GLADE_HOOKUP_OBJECT (dialog1, labelTrellis, "labelTrellis");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonTrellis, "spinbuttonTrellis");
+  GLADE_HOOKUP_OBJECT (dialog1, hbox11, "hbox11");
+  GLADE_HOOKUP_OBJECT (dialog1, labelNoiseReduction, "labelNoiseReduction");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonNoiseReduction, "spinbuttonNoiseReduction");
+  GLADE_HOOKUP_OBJECT (dialog1, hbox3, "hbox3");
+  GLADE_HOOKUP_OBJECT (dialog1, checkbuttonDeblockingFilter, "checkbuttonDeblockingFilter");
+  GLADE_HOOKUP_OBJECT (dialog1, table8, "table8");
+  GLADE_HOOKUP_OBJECT (dialog1, labelThreshold, "labelThreshold");
+  GLADE_HOOKUP_OBJECT (dialog1, labelStrength, "labelStrength");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonThreshold, "spinbuttonThreshold");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonStrength, "spinbuttonStrength");
+  GLADE_HOOKUP_OBJECT (dialog1, label25, "label25");
+  GLADE_HOOKUP_OBJECT (dialog1, labelPageMotion_More, "labelPageMotion_More");
+  GLADE_HOOKUP_OBJECT (dialog1, alignment16, "alignment16");
+  GLADE_HOOKUP_OBJECT (dialog1, vbox2, "vbox2");
+  GLADE_HOOKUP_OBJECT (dialog1, frame4, "frame4");
+  GLADE_HOOKUP_OBJECT (dialog1, alignment4, "alignment4");
+  GLADE_HOOKUP_OBJECT (dialog1, vbox3, "vbox3");
+  GLADE_HOOKUP_OBJECT (dialog1, checkbutton8x8, "checkbutton8x8");
+  GLADE_HOOKUP_OBJECT (dialog1, checkbutton8x8P, "checkbutton8x8P");
+  GLADE_HOOKUP_OBJECT (dialog1, checkbutton8x8B, "checkbutton8x8B");
+  GLADE_HOOKUP_OBJECT (dialog1, checkbutton4x4, "checkbutton4x4");
+  GLADE_HOOKUP_OBJECT (dialog1, checkbutton8x8I, "checkbutton8x8I");
+  GLADE_HOOKUP_OBJECT (dialog1, checkbutton4x4I, "checkbutton4x4I");
+  GLADE_HOOKUP_OBJECT (dialog1, label19, "label19");
+  GLADE_HOOKUP_OBJECT (dialog1, frame5, "frame5");
+  GLADE_HOOKUP_OBJECT (dialog1, alignment5, "alignment5");
+  GLADE_HOOKUP_OBJECT (dialog1, vbox4, "vbox4");
+  GLADE_HOOKUP_OBJECT (dialog1, table5, "table5");
+  GLADE_HOOKUP_OBJECT (dialog1, labelBias, "labelBias");
+  GLADE_HOOKUP_OBJECT (dialog1, labelMaxConsecutive, "labelMaxConsecutive");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonBias, "spinbuttonBias");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonMaxBFrame, "spinbuttonMaxBFrame");
+  GLADE_HOOKUP_OBJECT (dialog1, alignment20, "alignment20");
+  GLADE_HOOKUP_OBJECT (dialog1, table6, "table6");
+  GLADE_HOOKUP_OBJECT (dialog1, checkbuttonBidirME, "checkbuttonBidirME");
+  GLADE_HOOKUP_OBJECT (dialog1, checkbuttonWeighted, "checkbuttonWeighted");
+  GLADE_HOOKUP_OBJECT (dialog1, checkbuttonAdaptative, "checkbuttonAdaptative");
+  GLADE_HOOKUP_OBJECT (dialog1, checkbuttonBasReference, "checkbuttonBasReference");
+  GLADE_HOOKUP_OBJECT (dialog1, hbox1, "hbox1");
+  GLADE_HOOKUP_OBJECT (dialog1, labelBFrameDirectMode, "labelBFrameDirectMode");
+  GLADE_HOOKUP_OBJECT (dialog1, comboboxDirectMode, "comboboxDirectMode");
+  GLADE_HOOKUP_OBJECT (dialog1, label20, "label20");
+  GLADE_HOOKUP_OBJECT (dialog1, labelPagePartion_Frame, "labelPagePartion_Frame");
+  GLADE_HOOKUP_OBJECT (dialog1, alignment17, "alignment17");
+  GLADE_HOOKUP_OBJECT (dialog1, vbox1, "vbox1");
+  GLADE_HOOKUP_OBJECT (dialog1, frame1, "frame1");
+  GLADE_HOOKUP_OBJECT (dialog1, alignment1, "alignment1");
+  GLADE_HOOKUP_OBJECT (dialog1, table2, "table2");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonKeyframeBoost, "spinbuttonKeyframeBoost");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonBframeReduction, "spinbuttonBframeReduction");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonBitrateVariability, "spinbuttonBitrateVariability");
+  GLADE_HOOKUP_OBJECT (dialog1, labelKeyframeboost, "labelKeyframeboost");
+  GLADE_HOOKUP_OBJECT (dialog1, label11, "label11");
+  GLADE_HOOKUP_OBJECT (dialog1, label12, "label12");
+  GLADE_HOOKUP_OBJECT (dialog1, label7, "label7");
+  GLADE_HOOKUP_OBJECT (dialog1, frame2, "frame2");
+  GLADE_HOOKUP_OBJECT (dialog1, alignment2, "alignment2");
+  GLADE_HOOKUP_OBJECT (dialog1, table3, "table3");
+  GLADE_HOOKUP_OBJECT (dialog1, label13, "label13");
+  GLADE_HOOKUP_OBJECT (dialog1, label14, "label14");
+  GLADE_HOOKUP_OBJECT (dialog1, label15, "label15");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonMinQp, "spinbuttonMinQp");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonMaxQp, "spinbuttonMaxQp");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonQpStep, "spinbuttonQpStep");
+  GLADE_HOOKUP_OBJECT (dialog1, label8, "label8");
+  GLADE_HOOKUP_OBJECT (dialog1, frame3, "frame3");
+  GLADE_HOOKUP_OBJECT (dialog1, alignment3, "alignment3");
+  GLADE_HOOKUP_OBJECT (dialog1, table4, "table4");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonSceneCut, "spinbuttonSceneCut");
+  GLADE_HOOKUP_OBJECT (dialog1, label16, "label16");
+  GLADE_HOOKUP_OBJECT (dialog1, label17, "label17");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonMinIdr, "spinbuttonMinIdr");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonMaxIdr, "spinbuttonMaxIdr");
+  GLADE_HOOKUP_OBJECT (dialog1, label18, "label18");
+  GLADE_HOOKUP_OBJECT (dialog1, labelMoreEncodingSettings, "labelMoreEncodingSettings");
+  GLADE_HOOKUP_OBJECT (dialog1, frameVideoBufferVerifier, "frameVideoBufferVerifier");
+  GLADE_HOOKUP_OBJECT (dialog1, alignment11, "alignment11");
+  GLADE_HOOKUP_OBJECT (dialog1, table12, "table12");
+  GLADE_HOOKUP_OBJECT (dialog1, labelVBVBufferSize, "labelVBVBufferSize");
+  GLADE_HOOKUP_OBJECT (dialog1, labelVBVInitialbuffer, "labelVBVInitialbuffer");
+  GLADE_HOOKUP_OBJECT (dialog1, labelVBVMaximumBitrate, "labelVBVMaximumBitrate");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonvbv_max_bitrate, "spinbuttonvbv_max_bitrate");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonvbv_buffer_size, "spinbuttonvbv_buffer_size");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonvbv_buffer_init, "spinbuttonvbv_buffer_init");
+  GLADE_HOOKUP_OBJECT (dialog1, labelVideoBufferVerifier, "labelVideoBufferVerifier");
+  GLADE_HOOKUP_OBJECT (dialog1, labelPageRateControl, "labelPageRateControl");
+  GLADE_HOOKUP_OBJECT (dialog1, alignment18, "alignment18");
+  GLADE_HOOKUP_OBJECT (dialog1, vbox8, "vbox8");
+  GLADE_HOOKUP_OBJECT (dialog1, frame10, "frame10");
+  GLADE_HOOKUP_OBJECT (dialog1, alignment10, "alignment10");
+  GLADE_HOOKUP_OBJECT (dialog1, table15, "table15");
+  GLADE_HOOKUP_OBJECT (dialog1, labelBitrateVariance, "labelBitrateVariance");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonBitrateVariance, "spinbuttonBitrateVariance");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonQuantizerCompression, "spinbuttonQuantizerCompression");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonTempBlurFrame, "spinbuttonTempBlurFrame");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonTempBlurQuant, "spinbuttonTempBlurQuant");
+  GLADE_HOOKUP_OBJECT (dialog1, labelQuantizerCompression, "labelQuantizerCompression");
+  GLADE_HOOKUP_OBJECT (dialog1, labelTempBlurEstFrame, "labelTempBlurEstFrame");
+  GLADE_HOOKUP_OBJECT (dialog1, labelTempBlueQuant, "labelTempBlueQuant");
+  GLADE_HOOKUP_OBJECT (dialog1, labelMisc, "labelMisc");
+  GLADE_HOOKUP_OBJECT (dialog1, frame11, "frame11");
+  GLADE_HOOKUP_OBJECT (dialog1, alignment13, "alignment13");
+  GLADE_HOOKUP_OBJECT (dialog1, table16, "table16");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbutton8, "spinbutton8");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbutton9, "spinbutton9");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonChromaQPOffset, "spinbuttonChromaQPOffset");
+  GLADE_HOOKUP_OBJECT (dialog1, labelFactorbetweenIandP, "labelFactorbetweenIandP");
+  GLADE_HOOKUP_OBJECT (dialog1, labelFactorbetweenPandB, "labelFactorbetweenPandB");
+  GLADE_HOOKUP_OBJECT (dialog1, labelChromaQPOffset, "labelChromaQPOffset");
+  GLADE_HOOKUP_OBJECT (dialog1, labelQuantizers, "labelQuantizers");
+  GLADE_HOOKUP_OBJECT (dialog1, frame9, "frame9");
+  GLADE_HOOKUP_OBJECT (dialog1, alignment9, "alignment9");
+  GLADE_HOOKUP_OBJECT (dialog1, vbox9, "vbox9");
+  GLADE_HOOKUP_OBJECT (dialog1, radiobuttonFlatmatrix, "radiobuttonFlatmatrix");
+  GLADE_HOOKUP_OBJECT (dialog1, radiobuttonJVTmatrix, "radiobuttonJVTmatrix");
+  GLADE_HOOKUP_OBJECT (dialog1, hbox13, "hbox13");
+  GLADE_HOOKUP_OBJECT (dialog1, radiobuttonCustommatrix, "radiobuttonCustommatrix");
+  GLADE_HOOKUP_OBJECT (dialog1, hbox14, "hbox14");
+  GLADE_HOOKUP_OBJECT (dialog1, filechooserbuttonOpenCQMFile, "filechooserbuttonOpenCQMFile");
+  GLADE_HOOKUP_OBJECT (dialog1, vseparator1, "vseparator1");
+  GLADE_HOOKUP_OBJECT (dialog1, buttonEditCustomMatrix, "buttonEditCustomMatrix");
+  GLADE_HOOKUP_OBJECT (dialog1, labelFrameQuantizationMatrices, "labelFrameQuantizationMatrices");
+  GLADE_HOOKUP_OBJECT (dialog1, labelMore, "labelMore");
+  GLADE_HOOKUP_OBJECT_NO_REF (dialog1, dialog_action_area1, "dialog_action_area1");
+  GLADE_HOOKUP_OBJECT (dialog1, buttonResetDaults, "buttonResetDaults");
+  GLADE_HOOKUP_OBJECT (dialog1, cancelbutton1, "cancelbutton1");
+  GLADE_HOOKUP_OBJECT (dialog1, okbutton1, "okbutton1");
+  GLADE_HOOKUP_OBJECT_NO_REF (dialog1, tooltips, "tooltips");
+
+  gtk_widget_grab_default (okbutton1);
+  return dialog1;
+}

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.glade
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.glade	2008-04-29 23:58:16 UTC (rev 3997)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.glade	2008-04-30 01:24:27 UTC (rev 3998)
@@ -33,7 +33,6 @@
 	  <child>
 	    <widget class="GtkButton" id="buttonResetDaults">
 	      <property name="visible">True</property>
-	      <property name="can_default">True</property>
 	      <property name="can_focus">True</property>
 	      <property name="label" translatable="yes">_Defaults</property>
 	      <property name="use_underline">True</property>
@@ -46,7 +45,6 @@
 	  <child>
 	    <widget class="GtkButton" id="cancelbutton1">
 	      <property name="visible">True</property>
-	      <property name="can_default">True</property>
 	      <property name="can_focus">True</property>
 	      <property name="label">gtk-cancel</property>
 	      <property name="use_stock">True</property>
@@ -60,6 +58,7 @@
 	    <widget class="GtkButton" id="okbutton1">
 	      <property name="visible">True</property>
 	      <property name="can_default">True</property>
+	      <property name="has_default">True</property>
 	      <property name="can_focus">True</property>
 	      <property name="label">gtk-ok</property>
 	      <property name="use_stock">True</property>
@@ -1883,7 +1882,6 @@
 				  <child>
 				    <widget class="GtkComboBox" id="comboboxDirectMode">
 				      <property name="visible">True</property>
-				      <property name="has_default">True</property>
 				      <property name="items" translatable="yes">None
 Spatial
 Temporal



From gruntster at mail.berlios.de  Wed Apr 30 20:01:36 2008
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Wed, 30 Apr 2008 20:01:36 +0200
Subject: [Avidemux-svn-commit] r3999 - in
	branches/avidemux_2.5_branch_gruntster/avidemux: ADM_encoder
	ADM_plugin ADM_userInterfaces/ADM_GTK
	ADM_userInterfaces/ADM_NONE ADM_userInterfaces/ADM_QT4
	plugins/ADM_videoEncoder/ADM_vidEnc_x264
	plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk
	plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4
Message-ID: <200804301801.m3UI1a3q008448@sheep.berlios.de>

Author: gruntster
Date: 2008-04-30 20:01:17 +0200 (Wed, 30 Apr 2008)
New Revision: 3999

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_pluginLoad.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_plugin/ADM_vidEnc_plugin.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ui_support.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ui_support.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ui_support.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/configGuiLoader.h
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.h
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/interface.c
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.h
Log:
[x264] pass through and use parent window

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_pluginLoad.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_pluginLoad.h	2008-04-30 01:24:27 UTC (rev 3998)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_pluginLoad.h	2008-04-30 18:01:17 UTC (rev 3999)
@@ -31,7 +31,7 @@
 typedef const char* _vidEncGetEncoderGuid(int encoderId);
 
 typedef int _vidEncIsConfigurable(int encoderId);
-typedef int _vidEncConfigure(int encoderId, vidEncVideoProperties *properties);
+typedef int _vidEncConfigure(int encoderId, vidEncConfigParameters *configParameters, vidEncVideoProperties *properties);
 typedef int _vidEncGetOptions(int encoderId, vidEncOptions *encodeOptions, char *pluginOptions, int bufferSize);
 typedef int _vidEncSetOptions(int encoderId, vidEncOptions *encodeOptions, char *pluginOptions);
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.cpp	2008-04-30 01:24:27 UTC (rev 3998)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.cpp	2008-04-30 18:01:17 UTC (rev 3999)
@@ -38,6 +38,7 @@
 extern int AllVideoCodecCount;
 extern uint8_t DIA_videoCodec(int *codecIndex);
 extern void UI_setVideoCodec(int i);
+extern void getMainWindowHandles(int *handle, int *nativeHandle);
 
 // Some static stuff
 void setVideoEncoderSettings(COMPRESSION_MODE mode, uint32_t param, uint32_t extraConf, uint8_t *extraData);
@@ -455,6 +456,7 @@
 		ADM_vidEnc_plugin *plugin = getVideoEncoderPlugin(param->extra_param);
 		vidEncOptions encodeOptions;
 		vidEncVideoProperties properties;
+		vidEncConfigParameters configParameters;
 
 		memset(&properties, 0, sizeof(vidEncVideoProperties));
 		properties.structSize = sizeof(vidEncVideoProperties);
@@ -472,8 +474,11 @@
 			properties.fps1000 = info.fps1000;
 		}
 
+		configParameters.structSize = sizeof(vidEncConfigParameters);
+		getMainWindowHandles(&configParameters.parent, &configParameters.parentNative);
+
 		if (plugin->isConfigurable(plugin->encoderId))
-			if (plugin->configure(plugin->encoderId, &properties))
+			if (plugin->configure(plugin->encoderId, &configParameters, &properties))
 			{
 				int length = plugin->getOptions(plugin->encoderId, NULL, NULL, 0);
 				char *pluginOptions = new char[length + 1];

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_plugin/ADM_vidEnc_plugin.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_plugin/ADM_vidEnc_plugin.h	2008-04-30 01:24:27 UTC (rev 3998)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_plugin/ADM_vidEnc_plugin.h	2008-04-30 18:01:17 UTC (rev 3999)
@@ -84,6 +84,13 @@
 	int extraDataSize;
 } vidEncPassParameters;
 
+typedef struct
+{
+	int structSize;
+	int parent;
+	int parentNative;
+} vidEncConfigParameters;
+
 int vidEncGetEncoders(int uiType, int **encoderIds);
 const char* vidEncGetEncoderName(int encoderId);
 const char* vidEncGetEncoderType(int encoderId);
@@ -94,7 +101,7 @@
 const char* vidEncGetEncoderGuid(int encoderId);
 
 int vidEncIsConfigurable(int encoderId);
-int vidEncConfigure(int encoderId, vidEncVideoProperties *properties);
+int vidEncConfigure(int encoderId, vidEncConfigParameters *configParameters, vidEncVideoProperties *properties);
 int vidEncGetOptions(int encoderId, vidEncOptions *encodeOptions, char *pluginOptions, int bufferSize);
 int vidEncSetOptions(int encoderId, vidEncOptions *encodeOptions, char *pluginOptions);
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ui_support.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ui_support.cpp	2008-04-30 01:24:27 UTC (rev 3998)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ui_support.cpp	2008-04-30 18:01:17 UTC (rev 3999)
@@ -1,11 +1,21 @@
 #include <stdio.h>
 #include <gtk/gtk.h>
 
+#ifdef __WIN32
+#include <gdk/gdkwin32.h>
+#elif defined(__APPLE__)
+extern "C" int getMainNSWindow(void);
+#else
+#include <gdk/gdkx.h>
+#endif
+
 #include "config.h"
 #include "ADM_inttype.h"
 #include "ADM_files.h"
 #include "ADM_encoder/ADM_pluginLoad.h"
 
+extern GtkWidget *guiRootWindow;
+
 #ifdef HAVE_GETTEXT
 #include <libintl.h>
 
@@ -41,3 +51,16 @@
 	loadVideoEncoderPlugins(ADM_VIDENC_UI_GTK, pluginDir);
 	delete [] pluginDir;
 }
+
+void getMainWindowHandles(int *handle, int *nativeHandle)
+{
+	*handle = (int)guiRootWindow;
+
+#ifdef __WIN32
+	*nativeHandle = (int)guiRootWindow->window;
+#elif defined(__APPLE__)
+	*nativeHandle = (int)getMainNSWindow();
+#else
+	*nativeHandle = (int)guiRootWindow->window;
+#endif
+}

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ui_support.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ui_support.cpp	2008-04-30 01:24:27 UTC (rev 3998)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ui_support.cpp	2008-04-30 18:01:17 UTC (rev 3999)
@@ -40,3 +40,9 @@
 	loadVideoEncoderPlugins(ADM_VIDENC_UI_CLI, pluginDir);
 	delete [] pluginDir;
 }
+
+void getMainWindowHandles(int *handle, int *nativeHandle)
+{
+	*handle = 0;
+	*nativeHandle = 0;
+}

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ui_support.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ui_support.cpp	2008-04-30 01:24:27 UTC (rev 3998)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ui_support.cpp	2008-04-30 18:01:17 UTC (rev 3999)
@@ -1,12 +1,18 @@
 #include <stdio.h>
-
 #include <QApplication>
 #include <QtCore>
+#include <QtGui>
 
+#ifdef __APPLE__
+#include <Carbon/Carbon.h>
+#endif
+
 #include "ADM_inttype.h"
 #include "ADM_files.h"
 #include "ADM_encoder/ADM_pluginLoad.h"
 
+extern QWidget *QuiMainWindows;
+
 static QTranslator qtTranslator;
 static QTranslator avidemuxTranslator;
 
@@ -68,3 +74,14 @@
 	loadVideoEncoderPlugins(ADM_VIDENC_UI_QT, pluginDir);
 	delete [] pluginDir;
 }
+
+void getMainWindowHandles(int *handle, int *nativeHandle)
+{
+	*handle = (int)QuiMainWindows;
+
+#if defined(__APPLE__)
+	*nativeHandle = (int)HIViewGetWindow(HIViewRef(QuiMainWindows->winId()));
+#else
+	*nativeHandle = (int)QuiMainWindows->winId();
+#endif
+}

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/configGuiLoader.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/configGuiLoader.h	2008-04-30 01:24:27 UTC (rev 3998)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/configGuiLoader.h	2008-04-30 18:01:17 UTC (rev 3999)
@@ -9,7 +9,7 @@
 #include "ADM_vidEnc_plugin.h"
 }
 
-typedef bool _showX264ConfigDialog(vidEncVideoProperties *properties, vidEncOptions *encodeOptions, x264Options *options);
+typedef bool _showX264ConfigDialog(vidEncConfigParameters *configParameters, vidEncVideoProperties *properties, vidEncOptions *encodeOptions, x264Options *options);
 
 class configGuiLoader : public ADM_LibWrapper
 {

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.cpp	2008-04-30 01:24:27 UTC (rev 3998)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.cpp	2008-04-30 18:01:17 UTC (rev 3999)
@@ -29,7 +29,7 @@
 {
 	void *encoders_getPointer(int uiType) { encoder.setUiType(uiType); return &encoders; } 
 	int x264Encoder_isConfigurable(void) { return encoder.isConfigurable(); }
-	int x264Encoder_configure(vidEncVideoProperties *properties) { return encoder.configure(properties); }
+	int x264Encoder_configure(vidEncConfigParameters *configParameters, vidEncVideoProperties *properties) { return encoder.configure(configParameters, properties); }
 	int x264Encoder_getOptions(vidEncOptions *encodeOptions, char *pluginOptions, int bufferSize) { return encoder.getOptions(encodeOptions, pluginOptions, bufferSize); };
 	int x264Encoder_setOptions(vidEncOptions *encodeOptions, char *pluginOptions) { return encoder.setOptions(encodeOptions, pluginOptions); };
 	int x264Encoder_getPassCount(void) { return encoder.getPassCount(); }
@@ -89,7 +89,7 @@
 	return (_uiType == ADM_VIDENC_UI_GTK || _uiType == ADM_VIDENC_UI_QT);
 }
 
-int x264Encoder::configure(vidEncVideoProperties *properties)
+int x264Encoder::configure(vidEncConfigParameters *configParameters, vidEncVideoProperties *properties)
 {
 	if (_loader == NULL)
 	{
@@ -117,7 +117,7 @@
 	}
 
 	if (_loader->isAvailable())
-		return _loader->showX264ConfigDialog(properties, &_encodeOptions, &_options);
+		return _loader->showX264ConfigDialog(configParameters, properties, &_encodeOptions, &_options);
 	else
 		return 0;
 }

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.h	2008-04-30 01:24:27 UTC (rev 3998)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.h	2008-04-30 18:01:17 UTC (rev 3999)
@@ -70,7 +70,7 @@
 		~x264Encoder(void);
 		void setUiType(int uiType);
 		int isConfigurable(void);
-		int configure(vidEncVideoProperties *properties);
+		int configure(vidEncConfigParameters *configParameters, vidEncVideoProperties *properties);
 		int getOptions(vidEncOptions *encodeOptions, char *pluginOptions, int bufferSize);
 		int setOptions(vidEncOptions *encodeOptions, char *pluginOptions);
 		int getCurrentPass(void);
@@ -84,7 +84,7 @@
 #else
 	void *encoders_getPointer(int uiType);
 	int x264Encoder_isConfigurable(void);
-	int x264Encoder_configure(vidEncVideoProperties *properties);
+	int x264Encoder_configure(vidEncConfigParameters *configParameters, vidEncVideoProperties *properties);
 	int x264Encoder_getOptions(vidEncOptions *encodeOptions, char *pluginOptions, int bufferSize);
 	int x264Encoder_setOptions(vidEncOptions *encodeOptions, char *pluginOptions);
 	int x264Encoder_getPassCount(void);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp	2008-04-30 01:24:27 UTC (rev 3998)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk/x264ConfigDialog.cpp	2008-04-30 18:01:17 UTC (rev 3999)
@@ -62,7 +62,7 @@
 
 static int _lastBitrate, _lastVideoSize;
 
-extern "C" int showX264ConfigDialog(vidEncVideoProperties *properties, vidEncOptions *encodeOptions, x264Options *options)
+extern "C" int showX264ConfigDialog(vidEncConfigParameters *configParameters, vidEncVideoProperties *properties, vidEncOptions *encodeOptions, x264Options *options)
 {
 	_lastBitrate = 1500;
 	_lastVideoSize = 700;
@@ -70,6 +70,7 @@
 	GtkWidget *dialog = create_dialog1();
 
 	gtk_window_set_modal(GTK_WINDOW(dialog), 1);
+	gtk_window_set_transient_for(GTK_WINDOW(dialog), GTK_WINDOW(configParameters->parent));
 	gtk_dialog_add_action_widget(GTK_DIALOG(dialog), WID(buttonResetDaults), ACTION_LOAD_DEFAULT);
 
 #if X264_BUILD >= 58
@@ -416,1540 +417,1540 @@
 	}
 }
 
-GtkWidget*
-create_dialog1 (void)
-{
-  GtkWidget *dialog1;
-  GtkWidget *dialog_vbox1;
-  GtkWidget *notebook1;
-  GtkWidget *alignment14;
-  GtkWidget *tableBitrate;
-  GtkWidget *labelEncodingMode;
-  GtkWidget *labelQuantizer;
-  GtkWidget *labelTarget;
-  GtkObject *spinbuttonQuantizer_adj;
-  GtkWidget *spinbuttonQuantizer;
-  GtkWidget *entryTarget;
-  GtkWidget *comboboxMode;
-  GtkWidget *labelPageBitrate;
-  GtkWidget *alignment15;
-  GtkWidget *vbox5;
-  GtkWidget *frame6;
-  GtkWidget *alignment6;
-  GtkWidget *vbox6;
-  GtkWidget *table7;
-  GtkWidget *labelPartitionDecision;
-  GtkWidget *labelMethod;
-  GtkWidget *comboboxPartitionDecision;
-  GtkWidget *comboboxMethod;
-  GtkWidget *table11;
-  GtkWidget *labelMaxRefFrames;
-  GtkWidget *labelRange;
-  GtkObject *spinbuttonRange_adj;
-  GtkWidget *spinbuttonRange;
-  GtkObject *spinbuttonMaxRefFrames_adj;
-  GtkWidget *spinbuttonMaxRefFrames;
-  GtkWidget *checkbuttonChromaME;
-  GtkWidget *checkbuttonMixedRefs;
-  GtkWidget *hbox8;
-  GtkWidget *checkbuttonfastPSkip;
-  GtkWidget *checkbuttonDCTDecimate;
-  GtkWidget *checkbuttoninterlaced;
-  GtkWidget *label24;
-  GtkWidget *frameSampleAR;
-  GtkWidget *alignment12;
-  GtkWidget *table35;
-  GtkWidget *hbox12;
-  GtkWidget *entryAR_Num;
-  GtkWidget *label53;
-  GtkWidget *entryAR_Den;
-  GtkWidget *radiobuttonCustomAR;
-  GSList *radiobuttonCustomAR_group = NULL;
-  GtkWidget *radiobuttonPredefinedAR;
-  GtkWidget *radiobuttonAsInputAR;
-  GtkWidget *label40;
-  GtkWidget *comboboxentry1;
-  GtkWidget *label39;
-  GtkWidget *frame7;
-  GtkWidget *alignment7;
-  GtkWidget *vbox7;
-  GtkWidget *alignment21;
-  GtkWidget *hbox2;
-  GtkWidget *checkbuttonCABAC;
-  GtkWidget *hbox7;
-  GtkWidget *labelTrellis;
-  GtkObject *spinbuttonTrellis_adj;
-  GtkWidget *spinbuttonTrellis;
-  GtkWidget *hbox11;
-  GtkWidget *labelNoiseReduction;
-  GtkObject *spinbuttonNoiseReduction_adj;
-  GtkWidget *spinbuttonNoiseReduction;
-  GtkWidget *hbox3;
-  GtkWidget *checkbuttonDeblockingFilter;
-  GtkWidget *table8;
-  GtkWidget *labelThreshold;
-  GtkWidget *labelStrength;
-  GtkObject *spinbuttonThreshold_adj;
-  GtkWidget *spinbuttonThreshold;
-  GtkObject *spinbuttonStrength_adj;
-  GtkWidget *spinbuttonStrength;
-  GtkWidget *label25;
-  GtkWidget *labelPageMotion_More;
-  GtkWidget *alignment16;
-  GtkWidget *vbox2;
-  GtkWidget *frame4;
-  GtkWidget *alignment4;
-  GtkWidget *vbox3;
-  GtkWidget *checkbutton8x8;
-  GtkWidget *checkbutton8x8P;
-  GtkWidget *checkbutton8x8B;
-  GtkWidget *checkbutton4x4;
-  GtkWidget *checkbutton8x8I;
-  GtkWidget *checkbutton4x4I;
-  GtkWidget *label19;
-  GtkWidget *frame5;
-  GtkWidget *alignment5;
-  GtkWidget *vbox4;
-  GtkWidget *table5;
-  GtkWidget *labelBias;
-  GtkWidget *labelMaxConsecutive;
-  GtkObject *spinbuttonBias_adj;
-  GtkWidget *spinbuttonBias;
-  GtkObject *spinbuttonMaxBFrame_adj;
-  GtkWidget *spinbuttonMaxBFrame;
-  GtkWidget *alignment20;
-  GtkWidget *table6;
-  GtkWidget *checkbuttonBidirME;
-  GtkWidget *checkbuttonWeighted;
-  GtkWidget *checkbuttonAdaptative;
-  GtkWidget *checkbuttonBasReference;
-  GtkWidget *hbox1;
-  GtkWidget *labelBFrameDirectMode;
-  GtkWidget *comboboxDirectMode;
-  GtkWidget *label20;
-  GtkWidget *labelPagePartion_Frame;
-  GtkWidget *alignment17;
-  GtkWidget *vbox1;
-  GtkWidget *frame1;
-  GtkWidget *alignment1;
-  GtkWidget *table2;
-  GtkObject *spinbuttonKeyframeBoost_adj;
-  GtkWidget *spinbuttonKeyframeBoost;
-  GtkObject *spinbuttonBframeReduction_adj;
-  GtkWidget *spinbuttonBframeReduction;
-  GtkObject *spinbuttonBitrateVariability_adj;
-  GtkWidget *spinbuttonBitrateVariability;
-  GtkWidget *labelKeyframeboost;
-  GtkWidget *label11;
-  GtkWidget *label12;
-  GtkWidget *label7;
-  GtkWidget *frame2;
-  GtkWidget *alignment2;
-  GtkWidget *table3;
-  GtkWidget *label13;
-  GtkWidget *label14;
-  GtkWidget *label15;
-  GtkObject *spinbuttonMinQp_adj;
-  GtkWidget *spinbuttonMinQp;
-  GtkObject *spinbuttonMaxQp_adj;
-  GtkWidget *spinbuttonMaxQp;
-  GtkObject *spinbuttonQpStep_adj;
-  GtkWidget *spinbuttonQpStep;
-  GtkWidget *label8;
-  GtkWidget *frame3;
-  GtkWidget *alignment3;
-  GtkWidget *table4;
-  GtkObject *spinbuttonSceneCut_adj;
-  GtkWidget *spinbuttonSceneCut;
-  GtkWidget *label16;
-  GtkWidget *label17;
-  GtkObject *spinbuttonMinIdr_adj;
-  GtkWidget *spinbuttonMinIdr;
-  GtkObject *spinbuttonMaxIdr_adj;
-  GtkWidget *spinbuttonMaxIdr;
-  GtkWidget *label18;
-  GtkWidget *labelMoreEncodingSettings;
-  GtkWidget *frameVideoBufferVerifier;
-  GtkWidget *alignment11;
-  GtkWidget *table12;
-  GtkWidget *labelVBVBufferSize;
-  GtkWidget *labelVBVInitialbuffer;
-  GtkWidget *labelVBVMaximumBitrate;
-  GtkObject *spinbuttonvbv_max_bitrate_adj;
-  GtkWidget *spinbuttonvbv_max_bitrate;
-  GtkObject *spinbuttonvbv_buffer_size_adj;
-  GtkWidget *spinbuttonvbv_buffer_size;
-  GtkObject *spinbuttonvbv_buffer_init_adj;
-  GtkWidget *spinbuttonvbv_buffer_init;
-  GtkWidget *labelVideoBufferVerifier;
-  GtkWidget *labelPageRateControl;
-  GtkWidget *alignment18;
-  GtkWidget *vbox8;
-  GtkWidget *frame10;
-  GtkWidget *alignment10;
-  GtkWidget *table15;
-  GtkWidget *labelBitrateVariance;
-  GtkObject *spinbuttonBitrateVariance_adj;
-  GtkWidget *spinbuttonBitrateVariance;
-  GtkObject *spinbuttonQuantizerCompression_adj;
-  GtkWidget *spinbuttonQuantizerCompression;
-  GtkObject *spinbuttonTempBlurFrame_adj;
-  GtkWidget *spinbuttonTempBlurFrame;
-  GtkObject *spinbuttonTempBlurQuant_adj;
-  GtkWidget *spinbuttonTempBlurQuant;
-  GtkWidget *labelQuantizerCompression;
-  GtkWidget *labelTempBlurEstFrame;
-  GtkWidget *labelTempBlueQuant;
-  GtkWidget *labelMisc;
-  GtkWidget *frame11;
-  GtkWidget *alignment13;
-  GtkWidget *table16;
-  GtkObject *spinbutton8_adj;
-  GtkWidget *spinbutton8;
-  GtkObject *spinbutton9_adj;
-  GtkWidget *spinbutton9;
-  GtkObject *spinbuttonChromaQPOffset_adj;
-  GtkWidget *spinbuttonChromaQPOffset;
-  GtkWidget *labelFactorbetweenIandP;
-  GtkWidget *labelFactorbetweenPandB;
-  GtkWidget *labelChromaQPOffset;
-  GtkWidget *labelQuantizers;
-  GtkWidget *frame9;
-  GtkWidget *alignment9;
-  GtkWidget *vbox9;
-  GtkWidget *radiobuttonFlatmatrix;
-  GSList *radiobuttonFlatmatrix_group = NULL;
-  GtkWidget *radiobuttonJVTmatrix;
-  GtkWidget *hbox13;
-  GtkWidget *radiobuttonCustommatrix;
-  GtkWidget *hbox14;
-  GtkWidget *filechooserbuttonOpenCQMFile;
-  GtkWidget *vseparator1;
-  GtkWidget *buttonEditCustomMatrix;
-  GtkWidget *labelFrameQuantizationMatrices;
-  GtkWidget *labelMore;
-  GtkWidget *dialog_action_area1;
-  GtkWidget *buttonResetDaults;
-  GtkWidget *cancelbutton1;
-  GtkWidget *okbutton1;
-  GtkTooltips *tooltips;
-
-  tooltips = gtk_tooltips_new ();
-
-  dialog1 = gtk_dialog_new ();
-  gtk_window_set_title (GTK_WINDOW (dialog1), _("x264 Configuration"));
-  gtk_window_set_type_hint (GTK_WINDOW (dialog1), GDK_WINDOW_TYPE_HINT_DIALOG);
-
-  dialog_vbox1 = GTK_DIALOG (dialog1)->vbox;
-  gtk_widget_show (dialog_vbox1);
-
-  notebook1 = gtk_notebook_new ();
-  gtk_widget_show (notebook1);
-  gtk_box_pack_start (GTK_BOX (dialog_vbox1), notebook1, TRUE, TRUE, 0);
-
-  alignment14 = gtk_alignment_new (0.5, 0.5, 1, 1);
-  gtk_widget_show (alignment14);
-  gtk_container_add (GTK_CONTAINER (notebook1), alignment14);
-  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment14), 7, 7, 7, 7);
-
-  tableBitrate = gtk_table_new (3, 2, FALSE);
-  gtk_widget_show (tableBitrate);
-  gtk_container_add (GTK_CONTAINER (alignment14), tableBitrate);
-  gtk_table_set_row_spacings (GTK_TABLE (tableBitrate), 3);
-  gtk_table_set_col_spacings (GTK_TABLE (tableBitrate), 10);
-
-  labelEncodingMode = gtk_label_new (_("Encoding Mode"));
-  gtk_widget_show (labelEncodingMode);
-  gtk_table_attach (GTK_TABLE (tableBitrate), labelEncodingMode, 0, 1, 0, 1,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_misc_set_alignment (GTK_MISC (labelEncodingMode), 0, 0.5);
-
-  labelQuantizer = gtk_label_new (_("Quantizer"));
-  gtk_widget_show (labelQuantizer);
-  gtk_table_attach (GTK_TABLE (tableBitrate), labelQuantizer, 0, 1, 2, 3,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_misc_set_alignment (GTK_MISC (labelQuantizer), 0, 0.5);
-
-  labelTarget = gtk_label_new (_("Target Size"));
-  gtk_widget_show (labelTarget);
-  gtk_table_attach (GTK_TABLE (tableBitrate), labelTarget, 0, 1, 1, 2,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_misc_set_alignment (GTK_MISC (labelTarget), 0, 0.5);
-
-  spinbuttonQuantizer_adj = gtk_adjustment_new (4, 0, 51, 1, 10, 10);
-  spinbuttonQuantizer = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonQuantizer_adj), 1, 0);
-  gtk_widget_show (spinbuttonQuantizer);
-  gtk_table_attach (GTK_TABLE (tableBitrate), spinbuttonQuantizer, 1, 2, 2, 3,
-                    (GtkAttachOptions) (GTK_SHRINK | GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_tooltips_set_tip (tooltips, spinbuttonQuantizer, _("Constant Quantizer - Each frame will have the same compression. Low numbers equal higher quality while high numbers equal lower quality."), NULL);
-  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonQuantizer), TRUE);
-
-  entryTarget = gtk_entry_new ();
-  gtk_widget_show (entryTarget);
-  gtk_table_attach (GTK_TABLE (tableBitrate), entryTarget, 1, 2, 1, 2,
-                    (GtkAttachOptions) (GTK_SHRINK | GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_tooltips_set_tip (tooltips, entryTarget, _("Target bitrate or file size"), NULL);
-  gtk_entry_set_width_chars (GTK_ENTRY (entryTarget), 4);
-
-  comboboxMode = gtk_combo_box_new_text ();
-  gtk_widget_show (comboboxMode);
-  gtk_table_attach (GTK_TABLE (tableBitrate), comboboxMode, 1, 2, 0, 1,
-                    (GtkAttachOptions) (GTK_SHRINK | GTK_FILL),
-                    (GtkAttachOptions) (GTK_FILL), 0, 0);
-  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxMode), _("Single Pass - Quality Quantizer (Average)"));
-  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxMode), _("Single Pass - Quality Quantizer (Constant)"));
-  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxMode), _("Single Pass - Bitrate (Average)"));
-  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxMode), _("Two Pass - Video Size"));
-  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxMode), _("Two Pass - Average Bitrate"));
-
-  labelPageBitrate = gtk_label_new (_("Bitrate"));
-  gtk_widget_show (labelPageBitrate);
-  gtk_notebook_set_tab_label (GTK_NOTEBOOK (notebook1), gtk_notebook_get_nth_page (GTK_NOTEBOOK (notebook1), 0), labelPageBitrate);
-  gtk_misc_set_alignment (GTK_MISC (labelPageBitrate), 0, 0.5);
-
-  alignment15 = gtk_alignment_new (0.5, 0.5, 1, 1);
-  gtk_widget_show (alignment15);
-  gtk_container_add (GTK_CONTAINER (notebook1), alignment15);
-  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment15), 7, 7, 7, 7);
-
-  vbox5 = gtk_vbox_new (FALSE, 3);
-  gtk_widget_show (vbox5);
-  gtk_container_add (GTK_CONTAINER (alignment15), vbox5);
-
-  frame6 = gtk_frame_new (NULL);
-  gtk_widget_show (frame6);
-  gtk_box_pack_start (GTK_BOX (vbox5), frame6, FALSE, TRUE, 0);
-
-  alignment6 = gtk_alignment_new (0.5, 0.5, 1, 1);
-  gtk_widget_show (alignment6);
-  gtk_container_add (GTK_CONTAINER (frame6), alignment6);
-  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment6), 7, 4, 7, 7);
-
-  vbox6 = gtk_vbox_new (FALSE, 3);
-  gtk_widget_show (vbox6);
-  gtk_container_add (GTK_CONTAINER (alignment6), vbox6);
-
-  table7 = gtk_table_new (2, 3, FALSE);
-  gtk_widget_show (table7);
-  gtk_box_pack_start (GTK_BOX (vbox6), table7, FALSE, TRUE, 0);
-  gtk_table_set_row_spacings (GTK_TABLE (table7), 3);
-  gtk_table_set_col_spacings (GTK_TABLE (table7), 10);
-
-  labelPartitionDecision = gtk_label_new (_("Partition Decision"));
-  gtk_widget_show (labelPartitionDecision);
-  gtk_table_attach (GTK_TABLE (table7), labelPartitionDecision, 0, 1, 0, 1,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_misc_set_alignment (GTK_MISC (labelPartitionDecision), 0, 0.5);
-
-  labelMethod = gtk_label_new (_("Method"));
-  gtk_widget_show (labelMethod);
-  gtk_table_attach (GTK_TABLE (table7), labelMethod, 0, 1, 1, 2,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_misc_set_alignment (GTK_MISC (labelMethod), 0, 0.5);
-
-  comboboxPartitionDecision = gtk_combo_box_new_text ();
-  gtk_widget_show (comboboxPartitionDecision);
-  gtk_table_attach (GTK_TABLE (table7), comboboxPartitionDecision, 1, 3, 0, 1,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (GTK_FILL), 0, 0);
-  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxPartitionDecision), _("1  - Extremely Low (Fastest)"));
-  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxPartitionDecision), _("2  - Very Low"));
-  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxPartitionDecision), _("3  - Low"));
-  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxPartitionDecision), _("4  - Medium"));
-  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxPartitionDecision), _("5  - High (Default)"));
-  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxPartitionDecision), _("6  - Very High"));
-  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxPartitionDecision), _("6B - Very High (RDO on B-frames)"));
-  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxPartitionDecision), _("7  - Ultra High"));
-  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxPartitionDecision), _("7B - Ultra High (RDO on B-frames)"));
-
-  comboboxMethod = gtk_combo_box_new_text ();
-  gtk_widget_show (comboboxMethod);
-  gtk_table_attach (GTK_TABLE (table7), comboboxMethod, 1, 3, 1, 2,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (GTK_FILL), 0, 0);
-  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxMethod), _("Diamond Search"));
-  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxMethod), _("Hexagonal Search"));
-  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxMethod), _("Uneven Multi-hexagon"));
-  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxMethod), _("Exhaustive Search"));
-
-  table11 = gtk_table_new (2, 3, FALSE);
-  gtk_widget_show (table11);
-  gtk_box_pack_start (GTK_BOX (vbox6), table11, TRUE, FALSE, 0);
-  gtk_table_set_row_spacings (GTK_TABLE (table11), 3);
-  gtk_table_set_col_spacings (GTK_TABLE (table11), 10);
-
-  labelMaxRefFrames = gtk_label_new (_("Max. Ref. Frames"));
-  gtk_widget_show (labelMaxRefFrames);
-  gtk_table_attach (GTK_TABLE (table11), labelMaxRefFrames, 0, 1, 1, 2,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_misc_set_alignment (GTK_MISC (labelMaxRefFrames), 0, 0.5);
-
-  labelRange = gtk_label_new (_("Range"));
-  gtk_widget_show (labelRange);
-  gtk_table_attach (GTK_TABLE (table11), labelRange, 0, 1, 0, 1,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_misc_set_alignment (GTK_MISC (labelRange), 0, 0.5);
-
-  spinbuttonRange_adj = gtk_adjustment_new (17, 0, 64, 1, 10, 10);
-  spinbuttonRange = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonRange_adj), 1, 0);
-  gtk_widget_show (spinbuttonRange);
-  gtk_table_attach (GTK_TABLE (table11), spinbuttonRange, 1, 2, 0, 1,
-                    (GtkAttachOptions) (GTK_SHRINK | GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_tooltips_set_tip (tooltips, spinbuttonRange, _("Define how many pixels are analysed for motion estimation. The higher the range the more accurate the analysis but the slower the encoding time."), NULL);
-  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonRange), TRUE);
-
-  spinbuttonMaxRefFrames_adj = gtk_adjustment_new (1, 0, 16, 1, 10, 10);
-  spinbuttonMaxRefFrames = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonMaxRefFrames_adj), 1, 0);
-  gtk_widget_show (spinbuttonMaxRefFrames);
-  gtk_table_attach (GTK_TABLE (table11), spinbuttonMaxRefFrames, 1, 2, 1, 2,
-                    (GtkAttachOptions) (GTK_SHRINK | GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_tooltips_set_tip (tooltips, spinbuttonMaxRefFrames, _("Set how many previous frames can be referenced by a P/B-frame. Numbers above 5 do not seem to improve quality greatly. Numbers 3 to 5 are recommended."), NULL);
-  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonMaxRefFrames), TRUE);
-
-  checkbuttonChromaME = gtk_check_button_new_with_mnemonic (_("Chroma ME"));
-  gtk_widget_show (checkbuttonChromaME);
-  gtk_table_attach (GTK_TABLE (table11), checkbuttonChromaME, 2, 3, 0, 1,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 30, 0);
-  gtk_tooltips_set_tip (tooltips, checkbuttonChromaME, _("Use color information for detecting motion to improve quality"), NULL);
-  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (checkbuttonChromaME), TRUE);
-
-  checkbuttonMixedRefs = gtk_check_button_new_with_mnemonic (_("Mixed Refs"));
-  gtk_widget_show (checkbuttonMixedRefs);
-  gtk_table_attach (GTK_TABLE (table11), checkbuttonMixedRefs, 2, 3, 1, 2,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 30, 0);
-  gtk_tooltips_set_tip (tooltips, checkbuttonMixedRefs, _("Calculate referencing individually based on each partition"), NULL);
-
-  hbox8 = gtk_hbox_new (TRUE, 0);
-  gtk_widget_show (hbox8);
-  gtk_box_pack_start (GTK_BOX (vbox6), hbox8, TRUE, TRUE, 0);
-
-  checkbuttonfastPSkip = gtk_check_button_new_with_mnemonic (_("Fast P-Skip"));
-  gtk_widget_show (checkbuttonfastPSkip);
-  gtk_box_pack_start (GTK_BOX (hbox8), checkbuttonfastPSkip, FALSE, FALSE, 0);
-  gtk_tooltips_set_tip (tooltips, checkbuttonfastPSkip, _("Early skip detection on P-frames to speedup encoding. Quality will be slightly reduced."), NULL);
-  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (checkbuttonfastPSkip), TRUE);
-
-  checkbuttonDCTDecimate = gtk_check_button_new_with_mnemonic (_("DCT Decimate"));
-  gtk_widget_show (checkbuttonDCTDecimate);
-  gtk_box_pack_start (GTK_BOX (hbox8), checkbuttonDCTDecimate, FALSE, FALSE, 0);
-  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (checkbuttonDCTDecimate), TRUE);
-
-  checkbuttoninterlaced = gtk_check_button_new_with_mnemonic (_("Interlaced"));
-  gtk_widget_show (checkbuttoninterlaced);
-  gtk_box_pack_start (GTK_BOX (hbox8), checkbuttoninterlaced, FALSE, FALSE, 0);
-  gtk_tooltips_set_tip (tooltips, checkbuttoninterlaced, _("Input video is interlaced"), NULL);
-
-  label24 = gtk_label_new (_("<b>Motion Estimation</b>"));
-  gtk_widget_show (label24);
-  gtk_frame_set_label_widget (GTK_FRAME (frame6), label24);
-  gtk_label_set_use_markup (GTK_LABEL (label24), TRUE);
-
-  frameSampleAR = gtk_frame_new (NULL);
-  gtk_widget_show (frameSampleAR);
-  gtk_box_pack_start (GTK_BOX (vbox5), frameSampleAR, FALSE, TRUE, 0);
-
-  alignment12 = gtk_alignment_new (0.5, 0.5, 1, 1);
-  gtk_widget_show (alignment12);
-  gtk_container_add (GTK_CONTAINER (frameSampleAR), alignment12);
-  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment12), 7, 7, 7, 7);
-
-  table35 = gtk_table_new (3, 2, FALSE);
-  gtk_widget_show (table35);
-  gtk_container_add (GTK_CONTAINER (alignment12), table35);
-  gtk_table_set_row_spacings (GTK_TABLE (table35), 3);
-  gtk_table_set_col_spacings (GTK_TABLE (table35), 10);
-
-  hbox12 = gtk_hbox_new (FALSE, 0);
-  gtk_widget_show (hbox12);
-  gtk_table_attach (GTK_TABLE (table35), hbox12, 1, 2, 1, 2,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (GTK_FILL), 0, 0);
-
-  entryAR_Num = gtk_entry_new ();
-  gtk_widget_show (entryAR_Num);
-  gtk_box_pack_start (GTK_BOX (hbox12), entryAR_Num, TRUE, TRUE, 0);
-  gtk_tooltips_set_tip (tooltips, entryAR_Num, _("Enforce the size of a decoded pixel decoded to a certain value. Set this to 1:1 for non-anamorphic video."), NULL);
-  gtk_entry_set_text (GTK_ENTRY (entryAR_Num), _("1"));
-  gtk_entry_set_width_chars (GTK_ENTRY (entryAR_Num), 4);
-
-  label53 = gtk_label_new (_(":"));
-  gtk_widget_show (label53);
-  gtk_box_pack_start (GTK_BOX (hbox12), label53, FALSE, FALSE, 3);
-
-  entryAR_Den = gtk_entry_new ();
-  gtk_widget_show (entryAR_Den);
-  gtk_box_pack_start (GTK_BOX (hbox12), entryAR_Den, TRUE, TRUE, 0);
-  gtk_tooltips_set_tip (tooltips, entryAR_Den, _("Enforce the size of a decoded pixel decoded to a certain value. Set this to 1:1 for non-anamorphic video."), NULL);
-  gtk_entry_set_text (GTK_ENTRY (entryAR_Den), _("1"));
-  gtk_entry_set_width_chars (GTK_ENTRY (entryAR_Den), 4);
-
-  radiobuttonCustomAR = gtk_radio_button_new_with_mnemonic (NULL, _("Custom"));
-  gtk_widget_show (radiobuttonCustomAR);
-  gtk_table_attach (GTK_TABLE (table35), radiobuttonCustomAR, 0, 1, 1, 2,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_tooltips_set_tip (tooltips, radiobuttonCustomAR, _("Set a custom aspect ratio. The default 1:1 is recommended for most video."), NULL);
-  gtk_radio_button_set_group (GTK_RADIO_BUTTON (radiobuttonCustomAR), radiobuttonCustomAR_group);
-  radiobuttonCustomAR_group = gtk_radio_button_get_group (GTK_RADIO_BUTTON (radiobuttonCustomAR));
-  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (radiobuttonCustomAR), TRUE);
-
-  radiobuttonPredefinedAR = gtk_radio_button_new_with_mnemonic (NULL, _("Predefined Aspect Ratio"));
-  gtk_widget_show (radiobuttonPredefinedAR);
-  gtk_table_attach (GTK_TABLE (table35), radiobuttonPredefinedAR, 0, 1, 0, 1,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_tooltips_set_tip (tooltips, radiobuttonPredefinedAR, _("Set a common predefined aspect ratio"), NULL);
-  gtk_radio_button_set_group (GTK_RADIO_BUTTON (radiobuttonPredefinedAR), radiobuttonCustomAR_group);
-  radiobuttonCustomAR_group = gtk_radio_button_get_group (GTK_RADIO_BUTTON (radiobuttonPredefinedAR));
-
-  radiobuttonAsInputAR = gtk_radio_button_new_with_mnemonic (NULL, _("As Input"));
-  gtk_widget_show (radiobuttonAsInputAR);
-  gtk_table_attach (GTK_TABLE (table35), radiobuttonAsInputAR, 0, 1, 2, 3,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_radio_button_set_group (GTK_RADIO_BUTTON (radiobuttonAsInputAR), radiobuttonCustomAR_group);
-  radiobuttonCustomAR_group = gtk_radio_button_get_group (GTK_RADIO_BUTTON (radiobuttonAsInputAR));
-
-  label40 = gtk_label_new ("1:1 (1:1)");
-  gtk_widget_show (label40);
-  gtk_table_attach (GTK_TABLE (table35), label40, 1, 2, 2, 3,
-                    (GtkAttachOptions) (0),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_misc_set_alignment (GTK_MISC (label40), 0, 0.5);
-
-  comboboxentry1 = gtk_combo_box_new_text ();
-  gtk_widget_show (comboboxentry1);
-  gtk_table_attach (GTK_TABLE (table35), comboboxentry1, 1, 2, 0, 1,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (GTK_FILL), 0, 0);
-
-  label39 = gtk_label_new (_("<b>Sample Aspect Ratio</b>"));
-  gtk_widget_show (label39);
-  gtk_frame_set_label_widget (GTK_FRAME (frameSampleAR), label39);
-  gtk_label_set_use_markup (GTK_LABEL (label39), TRUE);
-
-  frame7 = gtk_frame_new (NULL);
-  gtk_widget_show (frame7);
-  gtk_box_pack_start (GTK_BOX (vbox5), frame7, FALSE, TRUE, 0);
-
-  alignment7 = gtk_alignment_new (0.5, 0.5, 1, 1);
-  gtk_widget_show (alignment7);
-  gtk_container_add (GTK_CONTAINER (frame7), alignment7);
-  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment7), 7, 7, 7, 7);
-
-  vbox7 = gtk_vbox_new (FALSE, 3);
-  gtk_widget_show (vbox7);
-  gtk_container_add (GTK_CONTAINER (alignment7), vbox7);
-
-  alignment21 = gtk_alignment_new (0.5, 0.5, 1, 1);
-  gtk_widget_show (alignment21);
-  gtk_box_pack_start (GTK_BOX (vbox7), alignment21, TRUE, TRUE, 0);
-  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment21), 0, 3, 0, 0);
-
-  hbox2 = gtk_hbox_new (FALSE, 17);
-  gtk_widget_show (hbox2);
-  gtk_container_add (GTK_CONTAINER (alignment21), hbox2);
-
-  checkbuttonCABAC = gtk_check_button_new_with_mnemonic (_("CABAC"));
-  gtk_widget_show (checkbuttonCABAC);
-  gtk_box_pack_start (GTK_BOX (hbox2), checkbuttonCABAC, FALSE, FALSE, 0);
-  gtk_tooltips_set_tip (tooltips, checkbuttonCABAC, _("Lossless compression technique that reduces bitrate by approximately 10%. Increases encoding and decoding time."), NULL);
-  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (checkbuttonCABAC), TRUE);
-
-  hbox7 = gtk_hbox_new (FALSE, 10);
-  gtk_widget_show (hbox7);
-  gtk_box_pack_start (GTK_BOX (hbox2), hbox7, FALSE, FALSE, 0);
-
-  labelTrellis = gtk_label_new (_("Trellis"));
-  gtk_widget_show (labelTrellis);
-  gtk_box_pack_start (GTK_BOX (hbox7), labelTrellis, FALSE, FALSE, 0);
-  gtk_misc_set_alignment (GTK_MISC (labelTrellis), 0, 0.5);
-
-  spinbuttonTrellis_adj = gtk_adjustment_new (0, 0, 2, 1, 10, 10);
-  spinbuttonTrellis = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonTrellis_adj), 1, 0);
-  gtk_widget_show (spinbuttonTrellis);
-  gtk_box_pack_start (GTK_BOX (hbox7), spinbuttonTrellis, FALSE, FALSE, 0);
-  gtk_tooltips_set_tip (tooltips, spinbuttonTrellis, _("Use Trellis Rate Distortion Optimisation to find optimal encoding for each block. Level 0 equals disabled, level 1 equals normal and level 2 equals high."), NULL);
-  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonTrellis), TRUE);
-
-  hbox11 = gtk_hbox_new (FALSE, 10);
-  gtk_widget_show (hbox11);
-  gtk_box_pack_start (GTK_BOX (hbox2), hbox11, FALSE, FALSE, 2);
-
-  labelNoiseReduction = gtk_label_new (_("Noise Reduction"));
-  gtk_widget_show (labelNoiseReduction);
-  gtk_box_pack_start (GTK_BOX (hbox11), labelNoiseReduction, FALSE, FALSE, 0);
-  gtk_misc_set_alignment (GTK_MISC (labelNoiseReduction), 0, 0.5);
-
-  spinbuttonNoiseReduction_adj = gtk_adjustment_new (0, 0, 1000000000, 1, 10, 10);
-  spinbuttonNoiseReduction = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonNoiseReduction_adj), 1, 0);
-  gtk_widget_show (spinbuttonNoiseReduction);
-  gtk_box_pack_start (GTK_BOX (hbox11), spinbuttonNoiseReduction, FALSE, FALSE, 0);
-  gtk_tooltips_set_tip (tooltips, spinbuttonNoiseReduction, _("Set the amount of noise reduction"), NULL);
-  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonNoiseReduction), TRUE);
-
-  hbox3 = gtk_hbox_new (FALSE, 10);
-  gtk_widget_show (hbox3);
-  gtk_box_pack_start (GTK_BOX (vbox7), hbox3, TRUE, TRUE, 0);
-
-  checkbuttonDeblockingFilter = gtk_check_button_new_with_mnemonic (_("Deblocking Filter"));
-  gtk_widget_show (checkbuttonDeblockingFilter);
-  gtk_box_pack_start (GTK_BOX (hbox3), checkbuttonDeblockingFilter, FALSE, FALSE, 0);
-  gtk_tooltips_set_tip (tooltips, checkbuttonDeblockingFilter, _("Enable in-loop deblocking to filter the video"), NULL);
-  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (checkbuttonDeblockingFilter), TRUE);
-
-  table8 = gtk_table_new (2, 2, FALSE);
-  gtk_widget_show (table8);
-  gtk_box_pack_start (GTK_BOX (hbox3), table8, TRUE, TRUE, 0);
-  gtk_table_set_row_spacings (GTK_TABLE (table8), 3);
-  gtk_table_set_col_spacings (GTK_TABLE (table8), 10);
-
-  labelThreshold = gtk_label_new (_("Threshold"));
-  gtk_widget_show (labelThreshold);
-  gtk_table_attach (GTK_TABLE (table8), labelThreshold, 0, 1, 1, 2,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_label_set_use_markup (GTK_LABEL (labelThreshold), TRUE);
-  gtk_misc_set_alignment (GTK_MISC (labelThreshold), 0, 0.5);
-
-  labelStrength = gtk_label_new (_("Strength"));
-  gtk_widget_show (labelStrength);
-  gtk_table_attach (GTK_TABLE (table8), labelStrength, 0, 1, 0, 1,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_label_set_use_markup (GTK_LABEL (labelStrength), TRUE);
-  gtk_misc_set_alignment (GTK_MISC (labelStrength), 0, 0.5);
-
-  spinbuttonThreshold_adj = gtk_adjustment_new (0, -6, 6, 1, 10, 10);
-  spinbuttonThreshold = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonThreshold_adj), 1, 0);
-  gtk_widget_show (spinbuttonThreshold);
-  gtk_table_attach (GTK_TABLE (table8), spinbuttonThreshold, 1, 2, 1, 2,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_tooltips_set_tip (tooltips, spinbuttonThreshold, _("Threshold for block detection. Positive values will detect more blocks, negative values will detect less."), NULL);
-  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonThreshold), TRUE);
-
-  spinbuttonStrength_adj = gtk_adjustment_new (0, -6, 6, 1, 10, 10);
-  spinbuttonStrength = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonStrength_adj), 1, 0);
-  gtk_widget_show (spinbuttonStrength);
-  gtk_table_attach (GTK_TABLE (table8), spinbuttonStrength, 1, 2, 0, 1,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_tooltips_set_tip (tooltips, spinbuttonStrength, _("Positive values will soften the video, negative values will sharpen"), NULL);
-  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonStrength), TRUE);
-
-  label25 = gtk_label_new (_("<b>Misc. Options</b>"));
-  gtk_widget_show (label25);
-  gtk_frame_set_label_widget (GTK_FRAME (frame7), label25);
-  gtk_label_set_use_markup (GTK_LABEL (label25), TRUE);
-
-  labelPageMotion_More = gtk_label_new (_("Motion & Misc"));
-  gtk_widget_show (labelPageMotion_More);
-  gtk_notebook_set_tab_label (GTK_NOTEBOOK (notebook1), gtk_notebook_get_nth_page (GTK_NOTEBOOK (notebook1), 1), labelPageMotion_More);
-
-  alignment16 = gtk_alignment_new (0.5, 0.5, 1, 1);
-  gtk_widget_show (alignment16);
-  gtk_container_add (GTK_CONTAINER (notebook1), alignment16);
-  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment16), 7, 7, 7, 7);
-
-  vbox2 = gtk_vbox_new (FALSE, 3);
-  gtk_widget_show (vbox2);
-  gtk_container_add (GTK_CONTAINER (alignment16), vbox2);
-
-  frame4 = gtk_frame_new (NULL);
-  gtk_widget_show (frame4);
-  gtk_box_pack_start (GTK_BOX (vbox2), frame4, FALSE, TRUE, 0);
-
-  alignment4 = gtk_alignment_new (0.5, 0.5, 1, 1);
-  gtk_widget_show (alignment4);
-  gtk_container_add (GTK_CONTAINER (frame4), alignment4);
-  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment4), 7, 7, 7, 7);
-
-  vbox3 = gtk_vbox_new (FALSE, 3);
-  gtk_widget_show (vbox3);
-  gtk_container_add (GTK_CONTAINER (alignment4), vbox3);
-
-  checkbutton8x8 = gtk_check_button_new_with_mnemonic (_("8x8 Transform"));
-  gtk_widget_show (checkbutton8x8);
-  gtk_box_pack_start (GTK_BOX (vbox3), checkbutton8x8, FALSE, FALSE, 0);
-  gtk_tooltips_set_tip (tooltips, checkbutton8x8, _("General block breakdown transformation"), NULL);
-  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (checkbutton8x8), TRUE);
-
-  checkbutton8x8P = gtk_check_button_new_with_mnemonic (_("8x8, 8x16 and 16x8 P-frame search"));
-  gtk_widget_show (checkbutton8x8P);
-  gtk_box_pack_start (GTK_BOX (vbox3), checkbutton8x8P, FALSE, FALSE, 0);
-  gtk_tooltips_set_tip (tooltips, checkbutton8x8P, _("Improve the P-frame quality"), NULL);
-  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (checkbutton8x8P), TRUE);
-
-  checkbutton8x8B = gtk_check_button_new_with_mnemonic (_("8x8, 8x16 and 16x8 B-frame search"));
-  gtk_widget_show (checkbutton8x8B);
-  gtk_box_pack_start (GTK_BOX (vbox3), checkbutton8x8B, FALSE, FALSE, 0);
-  gtk_tooltips_set_tip (tooltips, checkbutton8x8B, _("Improve the B-frame quality"), NULL);
-  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (checkbutton8x8B), TRUE);
-
-  checkbutton4x4 = gtk_check_button_new_with_mnemonic (_("4x4, 4x8 and 8x4 P-frame search"));
-  gtk_widget_show (checkbutton4x4);
-  gtk_box_pack_start (GTK_BOX (vbox3), checkbutton4x4, FALSE, FALSE, 0);
-  gtk_tooltips_set_tip (tooltips, checkbutton4x4, _("Further improve the P-frame quality"), NULL);
-
-  checkbutton8x8I = gtk_check_button_new_with_mnemonic (_("8x8 Intra search"));
-  gtk_widget_show (checkbutton8x8I);
-  gtk_box_pack_start (GTK_BOX (vbox3), checkbutton8x8I, FALSE, FALSE, 0);
-  gtk_tooltips_set_tip (tooltips, checkbutton8x8I, _("Enable DCT Intra block search to improve quality"), NULL);
-  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (checkbutton8x8I), TRUE);
-
-  checkbutton4x4I = gtk_check_button_new_with_mnemonic (_("4x4 Intra search"));
-  gtk_widget_show (checkbutton4x4I);
-  gtk_box_pack_start (GTK_BOX (vbox3), checkbutton4x4I, FALSE, FALSE, 0);
-  gtk_tooltips_set_tip (tooltips, checkbutton4x4I, _("Further enable DCT Intra block search to improve quality"), NULL);
-  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (checkbutton4x4I), TRUE);
-
-  label19 = gtk_label_new (_("<b>Partition Macroblocks</b>"));
-  gtk_widget_show (label19);
-  gtk_frame_set_label_widget (GTK_FRAME (frame4), label19);
-  gtk_label_set_use_markup (GTK_LABEL (label19), TRUE);
-
-  frame5 = gtk_frame_new (NULL);
-  gtk_widget_show (frame5);
-  gtk_box_pack_start (GTK_BOX (vbox2), frame5, FALSE, TRUE, 0);
-
-  alignment5 = gtk_alignment_new (0.5, 0.5, 1, 1);
-  gtk_widget_show (alignment5);
-  gtk_container_add (GTK_CONTAINER (frame5), alignment5);
-  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment5), 7, 7, 7, 7);
-
-  vbox4 = gtk_vbox_new (FALSE, 3);
-  gtk_widget_show (vbox4);
-  gtk_container_add (GTK_CONTAINER (alignment5), vbox4);
-
-  table5 = gtk_table_new (2, 2, FALSE);
-  gtk_widget_show (table5);
-  gtk_box_pack_start (GTK_BOX (vbox4), table5, TRUE, TRUE, 0);
-  gtk_table_set_row_spacings (GTK_TABLE (table5), 3);
-  gtk_table_set_col_spacings (GTK_TABLE (table5), 10);
-
-  labelBias = gtk_label_new (_("Bias"));
-  gtk_widget_show (labelBias);
-  gtk_table_attach (GTK_TABLE (table5), labelBias, 0, 1, 1, 2,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_misc_set_alignment (GTK_MISC (labelBias), 0, 0.5);
-
-  labelMaxConsecutive = gtk_label_new (_("Max Consecutive"));
-  gtk_widget_show (labelMaxConsecutive);
-  gtk_table_attach (GTK_TABLE (table5), labelMaxConsecutive, 0, 1, 0, 1,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_misc_set_alignment (GTK_MISC (labelMaxConsecutive), 0, 0.5);
-
-  spinbuttonBias_adj = gtk_adjustment_new (0, -100, 100, 1, 10, 10);
-  spinbuttonBias = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonBias_adj), 1, 0);
-  gtk_widget_show (spinbuttonBias);
-  gtk_table_attach (GTK_TABLE (table5), spinbuttonBias, 1, 2, 1, 2,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_tooltips_set_tip (tooltips, spinbuttonBias, _("Increase / decrease probability for how often B-frames are used. It will not violate the maximum consecutive frame limit."), NULL);
-  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonBias), TRUE);
-
-  spinbuttonMaxBFrame_adj = gtk_adjustment_new (3, 0, 15, 1, 10, 10);
-  spinbuttonMaxBFrame = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonMaxBFrame_adj), 1, 0);
-  gtk_widget_show (spinbuttonMaxBFrame);
-  gtk_table_attach (GTK_TABLE (table5), spinbuttonMaxBFrame, 1, 2, 0, 1,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_tooltips_set_tip (tooltips, spinbuttonMaxBFrame, _("Set the maximum number of consecutive B-frames. This defines how many duplicate frames can be dropped. Numbers 2 to 5 are recommended. This greatly improves the use of bitrate and quality."), NULL);
-  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonMaxBFrame), TRUE);
-
-  alignment20 = gtk_alignment_new (0.5, 0.5, 1, 1);
-  gtk_widget_show (alignment20);
-  gtk_box_pack_start (GTK_BOX (vbox4), alignment20, TRUE, TRUE, 0);
-  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment20), 3, 3, 0, 0);
-
-  table6 = gtk_table_new (2, 2, FALSE);
-  gtk_widget_show (table6);
-  gtk_container_add (GTK_CONTAINER (alignment20), table6);
-  gtk_table_set_row_spacings (GTK_TABLE (table6), 3);
-  gtk_table_set_col_spacings (GTK_TABLE (table6), 10);
-
-  checkbuttonBidirME = gtk_check_button_new_with_mnemonic (_("Bidirectional ME"));
-  gtk_widget_show (checkbuttonBidirME);
-  gtk_table_attach (GTK_TABLE (table6), checkbuttonBidirME, 1, 2, 0, 1,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_tooltips_set_tip (tooltips, checkbuttonBidirME, _("Optimise both motion vectors in B-frames. This will improve quality but take more time for encoding."), NULL);
-
-  checkbuttonWeighted = gtk_check_button_new_with_mnemonic (_("Weighted Biprediction"));
-  gtk_widget_show (checkbuttonWeighted);
-  gtk_table_attach (GTK_TABLE (table6), checkbuttonWeighted, 1, 2, 1, 2,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_tooltips_set_tip (tooltips, checkbuttonWeighted, _("Enables weighting of B-frames to help fades"), NULL);
-  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (checkbuttonWeighted), TRUE);
-
-  checkbuttonAdaptative = gtk_check_button_new_with_mnemonic (_("Adaptative DCT"));
-  gtk_widget_show (checkbuttonAdaptative);
-  gtk_table_attach (GTK_TABLE (table6), checkbuttonAdaptative, 0, 1, 1, 2,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_tooltips_set_tip (tooltips, checkbuttonAdaptative, _("Use fewer B-frames if needed. This is always recommended. If not enabled, the codec will always use the maximum number of consecutive B-frames."), NULL);
-  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (checkbuttonAdaptative), TRUE);
-
-  checkbuttonBasReference = gtk_check_button_new_with_mnemonic (_("Use as Reference"));
-  gtk_widget_show (checkbuttonBasReference);
-  gtk_table_attach (GTK_TABLE (table6), checkbuttonBasReference, 0, 1, 0, 1,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_tooltips_set_tip (tooltips, checkbuttonBasReference, _("Allow B-frames to make references non-linearly to another B-frame (instead of creating a duplicate copy)"), NULL);
-
-  hbox1 = gtk_hbox_new (FALSE, 10);
-  gtk_widget_show (hbox1);
-  gtk_box_pack_start (GTK_BOX (vbox4), hbox1, TRUE, TRUE, 0);
-
-  labelBFrameDirectMode = gtk_label_new (_("B-Frame Direct Mode"));
-  gtk_widget_show (labelBFrameDirectMode);
-  gtk_box_pack_start (GTK_BOX (hbox1), labelBFrameDirectMode, FALSE, TRUE, 0);
-  gtk_misc_set_alignment (GTK_MISC (labelBFrameDirectMode), 0, 0.5);
-
-  comboboxDirectMode = gtk_combo_box_new_text ();
-  gtk_widget_show (comboboxDirectMode);
-  gtk_box_pack_start (GTK_BOX (hbox1), comboboxDirectMode, FALSE, TRUE, 0);
-  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxDirectMode), _("None"));
-  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxDirectMode), _("Spatial"));
-  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxDirectMode), _("Temporal"));
-  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxDirectMode), _("Auto"));
-
-  label20 = gtk_label_new (_("<b>B-Frames</b>"));
-  gtk_widget_show (label20);
-  gtk_frame_set_label_widget (GTK_FRAME (frame5), label20);
-  gtk_label_set_use_markup (GTK_LABEL (label20), TRUE);
-
-  labelPagePartion_Frame = gtk_label_new (_("Partitions & Frames"));
-  gtk_widget_show (labelPagePartion_Frame);
-  gtk_notebook_set_tab_label (GTK_NOTEBOOK (notebook1), gtk_notebook_get_nth_page (GTK_NOTEBOOK (notebook1), 2), labelPagePartion_Frame);
-
-  alignment17 = gtk_alignment_new (0.5, 0.5, 1, 1);
-  gtk_widget_show (alignment17);
-  gtk_container_add (GTK_CONTAINER (notebook1), alignment17);
-  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment17), 7, 7, 7, 7);
-
-  vbox1 = gtk_vbox_new (FALSE, 3);
-  gtk_widget_show (vbox1);
-  gtk_container_add (GTK_CONTAINER (alignment17), vbox1);
-
-  frame1 = gtk_frame_new (NULL);
-  gtk_widget_show (frame1);
-  gtk_box_pack_start (GTK_BOX (vbox1), frame1, FALSE, TRUE, 1);
-
-  alignment1 = gtk_alignment_new (0.5, 0.5, 1, 1);
-  gtk_widget_show (alignment1);
-  gtk_container_add (GTK_CONTAINER (frame1), alignment1);
-  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment1), 7, 7, 7, 7);
-
-  table2 = gtk_table_new (3, 2, FALSE);
-  gtk_widget_show (table2);
-  gtk_container_add (GTK_CONTAINER (alignment1), table2);
-  gtk_table_set_row_spacings (GTK_TABLE (table2), 3);
-  gtk_table_set_col_spacings (GTK_TABLE (table2), 10);
-
-  spinbuttonKeyframeBoost_adj = gtk_adjustment_new (40, 0, 100, 1, 10, 10);
-  spinbuttonKeyframeBoost = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonKeyframeBoost_adj), 1, 0);
-  gtk_widget_show (spinbuttonKeyframeBoost);
-  gtk_table_attach (GTK_TABLE (table2), spinbuttonKeyframeBoost, 1, 2, 0, 1,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_widget_set_size_request (spinbuttonKeyframeBoost, 115, -1);
-  gtk_tooltips_set_tip (tooltips, spinbuttonKeyframeBoost, _("Set how much \"bitrate bonus\" a keyframe can get"), NULL);
-  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonKeyframeBoost), TRUE);
-
-  spinbuttonBframeReduction_adj = gtk_adjustment_new (30, 0, 100, 1, 10, 10);
-  spinbuttonBframeReduction = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonBframeReduction_adj), 1, 0);
-  gtk_widget_show (spinbuttonBframeReduction);
-  gtk_table_attach (GTK_TABLE (table2), spinbuttonBframeReduction, 1, 2, 1, 2,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_tooltips_set_tip (tooltips, spinbuttonBframeReduction, _("Set how much bitrate is deducted from a B-frame as compared to the previous P-frame"), NULL);
-  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonBframeReduction), TRUE);
-
-  spinbuttonBitrateVariability_adj = gtk_adjustment_new (60, 0, 100, 1, 10, 10);
-  spinbuttonBitrateVariability = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonBitrateVariability_adj), 1, 0);
-  gtk_widget_show (spinbuttonBitrateVariability);
-  gtk_table_attach (GTK_TABLE (table2), spinbuttonBitrateVariability, 1, 2, 2, 3,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_tooltips_set_tip (tooltips, spinbuttonBitrateVariability, _("Define how much the bitrate can fluctuate over the entire video. 0% results in a constant bitrate stream, while 100% results in a pure quality based bitrate stream."), NULL);
-  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonBitrateVariability), TRUE);
-
-  labelKeyframeboost = gtk_label_new (_("Keyframe Boost (%)"));
-  gtk_widget_show (labelKeyframeboost);
-  gtk_table_attach (GTK_TABLE (table2), labelKeyframeboost, 0, 1, 0, 1,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_misc_set_alignment (GTK_MISC (labelKeyframeboost), 0, 0.5);
-
-  label11 = gtk_label_new (_("B-frame Reduction (%)"));
-  gtk_widget_show (label11);
-  gtk_table_attach (GTK_TABLE (table2), label11, 0, 1, 1, 2,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_misc_set_alignment (GTK_MISC (label11), 0, 0.5);
-
-  label12 = gtk_label_new (_("Bitrate Variability (%)"));
-  gtk_widget_show (label12);
-  gtk_table_attach (GTK_TABLE (table2), label12, 0, 1, 2, 3,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_misc_set_alignment (GTK_MISC (label12), 0, 0.5);
-
-  label7 = gtk_label_new (_("<b>Bitrate</b>"));
-  gtk_widget_show (label7);
-  gtk_frame_set_label_widget (GTK_FRAME (frame1), label7);
-  gtk_label_set_use_markup (GTK_LABEL (label7), TRUE);
-
-  frame2 = gtk_frame_new (NULL);
-  gtk_widget_show (frame2);
-  gtk_box_pack_start (GTK_BOX (vbox1), frame2, FALSE, TRUE, 1);
-
-  alignment2 = gtk_alignment_new (0.5, 0.5, 1, 1);
-  gtk_widget_show (alignment2);
-  gtk_container_add (GTK_CONTAINER (frame2), alignment2);
-  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment2), 7, 7, 7, 7);
-
-  table3 = gtk_table_new (3, 2, FALSE);
-  gtk_widget_show (table3);
-  gtk_container_add (GTK_CONTAINER (alignment2), table3);
-  gtk_table_set_row_spacings (GTK_TABLE (table3), 3);
-  gtk_table_set_col_spacings (GTK_TABLE (table3), 20);
-
-  label13 = gtk_label_new (_("Min QP"));
-  gtk_widget_show (label13);
-  gtk_table_attach (GTK_TABLE (table3), label13, 0, 1, 0, 1,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_misc_set_alignment (GTK_MISC (label13), 0, 0.5);
-
-  label14 = gtk_label_new (_("Max QP"));
-  gtk_widget_show (label14);
-  gtk_table_attach (GTK_TABLE (table3), label14, 0, 1, 1, 2,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_misc_set_alignment (GTK_MISC (label14), 0, 0.5);
-
-  label15 = gtk_label_new (_("Max QP Step"));
-  gtk_widget_show (label15);
-  gtk_table_attach (GTK_TABLE (table3), label15, 0, 1, 2, 3,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_misc_set_alignment (GTK_MISC (label15), 0, 0.5);
-
-  spinbuttonMinQp_adj = gtk_adjustment_new (10, 10, 51, 1, 10, 10);
-  spinbuttonMinQp = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonMinQp_adj), 1, 0);
-  gtk_widget_show (spinbuttonMinQp);
-  gtk_table_attach (GTK_TABLE (table3), spinbuttonMinQp, 1, 2, 0, 1,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_widget_set_size_request (spinbuttonMinQp, 54, -1);
-  gtk_tooltips_set_tip (tooltips, spinbuttonMinQp, _("Enforce a minimum quantizer level"), NULL);
-  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonMinQp), TRUE);
-
-  spinbuttonMaxQp_adj = gtk_adjustment_new (51, 10, 51, 1, 10, 10);
-  spinbuttonMaxQp = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonMaxQp_adj), 1, 0);
-  gtk_widget_show (spinbuttonMaxQp);
-  gtk_table_attach (GTK_TABLE (table3), spinbuttonMaxQp, 1, 2, 1, 2,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_tooltips_set_tip (tooltips, spinbuttonMaxQp, _("Enforce a maximum quantizer level"), NULL);
-  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonMaxQp), TRUE);
-
-  spinbuttonQpStep_adj = gtk_adjustment_new (4, 0, 10, 1, 10, 10);
-  spinbuttonQpStep = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonQpStep_adj), 1, 0);
-  gtk_widget_show (spinbuttonQpStep);
-  gtk_table_attach (GTK_TABLE (table3), spinbuttonQpStep, 1, 2, 2, 3,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_tooltips_set_tip (tooltips, spinbuttonQpStep, _("Define how much the quantizer rate can change between two consecutive frames"), NULL);
-  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonQpStep), TRUE);
-
-  label8 = gtk_label_new (_("<b>Quantization Limits</b>"));
-  gtk_widget_show (label8);
-  gtk_frame_set_label_widget (GTK_FRAME (frame2), label8);
-  gtk_label_set_use_markup (GTK_LABEL (label8), TRUE);
-
-  frame3 = gtk_frame_new (NULL);
-  gtk_widget_show (frame3);
-  gtk_box_pack_start (GTK_BOX (vbox1), frame3, FALSE, TRUE, 1);
-
-  alignment3 = gtk_alignment_new (0.5, 0.5, 1, 1);
-  gtk_widget_show (alignment3);
-  gtk_container_add (GTK_CONTAINER (frame3), alignment3);
-  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment3), 7, 7, 7, 7);
-
-  table4 = gtk_table_new (3, 2, FALSE);
-  gtk_widget_show (table4);
-  gtk_container_add (GTK_CONTAINER (alignment3), table4);
-  gtk_table_set_row_spacings (GTK_TABLE (table4), 3);
-  gtk_table_set_col_spacings (GTK_TABLE (table4), 10);
-
-  spinbuttonSceneCut_adj = gtk_adjustment_new (40, 0, 100, 1, 10, 10);
-  spinbuttonSceneCut = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonSceneCut_adj), 1, 0);
-  gtk_widget_show (spinbuttonSceneCut);
-  gtk_table_attach (GTK_TABLE (table4), spinbuttonSceneCut, 1, 2, 0, 1,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_widget_set_size_request (spinbuttonSceneCut, 115, -1);
-  gtk_tooltips_set_tip (tooltips, spinbuttonSceneCut, _("Increase / decrease sensitivity for detecting scene changes. Improves I-frame usage and quality."), NULL);
-  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonSceneCut), TRUE);
-
-  label16 = gtk_label_new (_("Scene Cut Threshold"));
-  gtk_widget_show (label16);
-  gtk_table_attach (GTK_TABLE (table4), label16, 0, 1, 0, 1,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_misc_set_alignment (GTK_MISC (label16), 0, 0.5);
-
-  label17 = gtk_label_new (_("Min IDR Frame Interval"));
-  gtk_widget_show (label17);
-  gtk_table_attach (GTK_TABLE (table4), label17, 0, 1, 1, 2,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_misc_set_alignment (GTK_MISC (label17), 0, 0.5);
-
-  spinbuttonMinIdr_adj = gtk_adjustment_new (25, 0, 100, 1, 10, 10);
-  spinbuttonMinIdr = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonMinIdr_adj), 1, 0);
-  gtk_widget_show (spinbuttonMinIdr);
-  gtk_table_attach (GTK_TABLE (table4), spinbuttonMinIdr, 1, 2, 1, 2,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_tooltips_set_tip (tooltips, spinbuttonMinIdr, _("Set minimum frame interval between IDR frames. Defines the minimum amount a frame can be reused and referenced by other frames before a new IDR frame is established."), NULL);
-  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonMinIdr), TRUE);
-
-  spinbuttonMaxIdr_adj = gtk_adjustment_new (250, 1, 1000, 1, 10, 10);
-  spinbuttonMaxIdr = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonMaxIdr_adj), 1, 0);
-  gtk_widget_show (spinbuttonMaxIdr);
-  gtk_table_attach (GTK_TABLE (table4), spinbuttonMaxIdr, 1, 2, 2, 3,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_tooltips_set_tip (tooltips, spinbuttonMaxIdr, _("Set maximum frame interval between IDR frames. Defines the maximum amount a frame can be reused and referenced by other frames before a new IDR frame is established."), NULL);
-  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonMaxIdr), TRUE);
-
-  label18 = gtk_label_new (_("Max IDR Frame Interval"));
-  gtk_widget_show (label18);
-  gtk_table_attach (GTK_TABLE (table4), label18, 0, 1, 2, 3,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_misc_set_alignment (GTK_MISC (label18), 0, 0.5);
-
-  labelMoreEncodingSettings = gtk_label_new (_("<b>More Rate Settings</b>"));
-  gtk_widget_show (labelMoreEncodingSettings);
-  gtk_frame_set_label_widget (GTK_FRAME (frame3), labelMoreEncodingSettings);
-  gtk_label_set_use_markup (GTK_LABEL (labelMoreEncodingSettings), TRUE);
-
-  frameVideoBufferVerifier = gtk_frame_new (NULL);
-  gtk_widget_show (frameVideoBufferVerifier);
-  gtk_box_pack_start (GTK_BOX (vbox1), frameVideoBufferVerifier, FALSE, TRUE, 0);
-
-  alignment11 = gtk_alignment_new (0.5, 0.5, 1, 1);
-  gtk_widget_show (alignment11);
-  gtk_container_add (GTK_CONTAINER (frameVideoBufferVerifier), alignment11);
-  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment11), 7, 7, 7, 7);
-
-  table12 = gtk_table_new (3, 2, FALSE);
-  gtk_widget_show (table12);
-  gtk_container_add (GTK_CONTAINER (alignment11), table12);
-  gtk_table_set_row_spacings (GTK_TABLE (table12), 3);
-  gtk_table_set_col_spacings (GTK_TABLE (table12), 10);
-
-  labelVBVBufferSize = gtk_label_new (_("VBV Buffer Size"));
-  gtk_widget_show (labelVBVBufferSize);
-  gtk_table_attach (GTK_TABLE (table12), labelVBVBufferSize, 0, 1, 1, 2,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_misc_set_alignment (GTK_MISC (labelVBVBufferSize), 0, 0.5);
-
-  labelVBVInitialbuffer = gtk_label_new (_("Initial VBV Buffer (%)"));
-  gtk_widget_show (labelVBVInitialbuffer);
-  gtk_table_attach (GTK_TABLE (table12), labelVBVInitialbuffer, 0, 1, 2, 3,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_misc_set_alignment (GTK_MISC (labelVBVInitialbuffer), 0, 0.5);
-
-  labelVBVMaximumBitrate = gtk_label_new (_("Maximum Local Bitrate"));
-  gtk_widget_show (labelVBVMaximumBitrate);
-  gtk_table_attach (GTK_TABLE (table12), labelVBVMaximumBitrate, 0, 1, 0, 1,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_misc_set_alignment (GTK_MISC (labelVBVMaximumBitrate), 0, 0.5);
-
-  spinbuttonvbv_max_bitrate_adj = gtk_adjustment_new (0, 0, 99999, 1, 10, 10);
-  spinbuttonvbv_max_bitrate = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonvbv_max_bitrate_adj), 1, 0);
-  gtk_widget_show (spinbuttonvbv_max_bitrate);
-  gtk_table_attach (GTK_TABLE (table12), spinbuttonvbv_max_bitrate, 1, 2, 0, 1,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonvbv_max_bitrate), TRUE);
-
-  spinbuttonvbv_buffer_size_adj = gtk_adjustment_new (0, 0, 99999, 1, 10, 10);
-  spinbuttonvbv_buffer_size = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonvbv_buffer_size_adj), 1, 0);
-  gtk_widget_show (spinbuttonvbv_buffer_size);
-  gtk_table_attach (GTK_TABLE (table12), spinbuttonvbv_buffer_size, 1, 2, 1, 2,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonvbv_buffer_size), TRUE);
-
-  spinbuttonvbv_buffer_init_adj = gtk_adjustment_new (90, 0, 100, 1, 10, 10);
-  spinbuttonvbv_buffer_init = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonvbv_buffer_init_adj), 1, 0);
-  gtk_widget_show (spinbuttonvbv_buffer_init);
-  gtk_table_attach (GTK_TABLE (table12), spinbuttonvbv_buffer_init, 1, 2, 2, 3,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonvbv_buffer_init), TRUE);
-
-  labelVideoBufferVerifier = gtk_label_new (_("<b>Video Buffer Verifier</b>"));
-  gtk_widget_show (labelVideoBufferVerifier);
-  gtk_frame_set_label_widget (GTK_FRAME (frameVideoBufferVerifier), labelVideoBufferVerifier);
-  gtk_label_set_use_markup (GTK_LABEL (labelVideoBufferVerifier), TRUE);
-
-  labelPageRateControl = gtk_label_new (_("Rate Control"));
-  gtk_widget_show (labelPageRateControl);
-  gtk_notebook_set_tab_label (GTK_NOTEBOOK (notebook1), gtk_notebook_get_nth_page (GTK_NOTEBOOK (notebook1), 3), labelPageRateControl);
-
-  alignment18 = gtk_alignment_new (0.5, 0.5, 1, 1);
-  gtk_widget_show (alignment18);
-  gtk_container_add (GTK_CONTAINER (notebook1), alignment18);
-  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment18), 7, 7, 7, 7);
-
-  vbox8 = gtk_vbox_new (FALSE, 3);
-  gtk_widget_show (vbox8);
-  gtk_container_add (GTK_CONTAINER (alignment18), vbox8);
-
-  frame10 = gtk_frame_new (NULL);
-  gtk_widget_show (frame10);
-  gtk_box_pack_start (GTK_BOX (vbox8), frame10, FALSE, TRUE, 0);
-
-  alignment10 = gtk_alignment_new (0.5, 0.5, 1, 1);
-  gtk_widget_show (alignment10);
-  gtk_container_add (GTK_CONTAINER (frame10), alignment10);
-  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment10), 7, 7, 7, 7);
-
-  table15 = gtk_table_new (4, 2, FALSE);
-  gtk_widget_show (table15);
-  gtk_container_add (GTK_CONTAINER (alignment10), table15);
-  gtk_table_set_row_spacings (GTK_TABLE (table15), 3);
-  gtk_table_set_col_spacings (GTK_TABLE (table15), 10);
-
-  labelBitrateVariance = gtk_label_new (_("Bitrate Variance"));
-  gtk_widget_show (labelBitrateVariance);
-  gtk_table_attach (GTK_TABLE (table15), labelBitrateVariance, 0, 1, 0, 1,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_misc_set_alignment (GTK_MISC (labelBitrateVariance), 0, 0.5);
-
-  spinbuttonBitrateVariance_adj = gtk_adjustment_new (1, 0, 1, 0.10000000149, 10, 10);
-  spinbuttonBitrateVariance = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonBitrateVariance_adj), 0.10000000149, 1);
-  gtk_widget_show (spinbuttonBitrateVariance);
-  gtk_table_attach (GTK_TABLE (table15), spinbuttonBitrateVariance, 1, 2, 0, 1,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_tooltips_set_tip (tooltips, spinbuttonBitrateVariance, _("Allowed variance of average bitrate. Lower values mean less variance. Higher values mean more variance."), NULL);
-  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonBitrateVariance), TRUE);
-
-  spinbuttonQuantizerCompression_adj = gtk_adjustment_new (0.600000023842, 0, 1, 0.10000000149, 10, 10);
-  spinbuttonQuantizerCompression = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonQuantizerCompression_adj), 0.10000000149, 1);
-  gtk_widget_show (spinbuttonQuantizerCompression);
-  gtk_table_attach (GTK_TABLE (table15), spinbuttonQuantizerCompression, 1, 2, 1, 2,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_tooltips_set_tip (tooltips, spinbuttonQuantizerCompression, _("Allowed variance of average quantizer or quality. Lower values mean less variance. Higher values mean more variance. Note that 0 means constant quality while 1 means constant fluctuation. Recommended 0.6."), NULL);
-  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonQuantizerCompression), TRUE);
-
-  spinbuttonTempBlurFrame_adj = gtk_adjustment_new (20, 0, 999, 1, 10, 10);
-  spinbuttonTempBlurFrame = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonTempBlurFrame_adj), 1, 0);
-  gtk_widget_show (spinbuttonTempBlurFrame);
-  gtk_table_attach (GTK_TABLE (table15), spinbuttonTempBlurFrame, 1, 2, 2, 3,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_tooltips_set_tip (tooltips, spinbuttonTempBlurFrame, _("Reduced fluctuations in Quantizer (before curve compression)"), NULL);
-  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonTempBlurFrame), TRUE);
-
-  spinbuttonTempBlurQuant_adj = gtk_adjustment_new (0.5, 0, 1, 0.5, 10, 10);
-  spinbuttonTempBlurQuant = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonTempBlurQuant_adj), 0.5, 1);
-  gtk_widget_show (spinbuttonTempBlurQuant);
-  gtk_table_attach (GTK_TABLE (table15), spinbuttonTempBlurQuant, 1, 2, 3, 4,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonTempBlurQuant), TRUE);
-
-  labelQuantizerCompression = gtk_label_new (_("Quantizer Compression"));
-  gtk_widget_show (labelQuantizerCompression);
-  gtk_table_attach (GTK_TABLE (table15), labelQuantizerCompression, 0, 1, 1, 2,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_misc_set_alignment (GTK_MISC (labelQuantizerCompression), 0, 0.5);
-
-  labelTempBlurEstFrame = gtk_label_new (_("Temp. Blur of Est. Frame Complexity"));
-  gtk_widget_show (labelTempBlurEstFrame);
-  gtk_table_attach (GTK_TABLE (table15), labelTempBlurEstFrame, 0, 1, 2, 3,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_misc_set_alignment (GTK_MISC (labelTempBlurEstFrame), 0, 0.5);
-
-  labelTempBlueQuant = gtk_label_new (_("Temp. Blur of Quant. after CC"));
-  gtk_widget_show (labelTempBlueQuant);
-  gtk_table_attach (GTK_TABLE (table15), labelTempBlueQuant, 0, 1, 3, 4,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_misc_set_alignment (GTK_MISC (labelTempBlueQuant), 0, 0.5);
-
-  labelMisc = gtk_label_new (_("<b>Misc</b>"));
-  gtk_widget_show (labelMisc);
-  gtk_frame_set_label_widget (GTK_FRAME (frame10), labelMisc);
-  gtk_label_set_use_markup (GTK_LABEL (labelMisc), TRUE);
-
-  frame11 = gtk_frame_new (NULL);
-  gtk_widget_show (frame11);
-  gtk_box_pack_start (GTK_BOX (vbox8), frame11, FALSE, TRUE, 0);
-
-  alignment13 = gtk_alignment_new (0.5, 0.5, 1, 1);
-  gtk_widget_show (alignment13);
-  gtk_container_add (GTK_CONTAINER (frame11), alignment13);
-  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment13), 7, 7, 7, 7);
-
-  table16 = gtk_table_new (3, 2, FALSE);
-  gtk_widget_show (table16);
-  gtk_container_add (GTK_CONTAINER (alignment13), table16);
-  gtk_table_set_row_spacings (GTK_TABLE (table16), 3);
-  gtk_table_set_col_spacings (GTK_TABLE (table16), 10);
-
-  spinbutton8_adj = gtk_adjustment_new (1.39999997616, 1, 10, 0.10000000149, 10, 10);
-  spinbutton8 = gtk_spin_button_new (GTK_ADJUSTMENT (spinbutton8_adj), 0.10000000149, 1);
-  gtk_widget_show (spinbutton8);
-  gtk_table_attach (GTK_TABLE (table16), spinbutton8, 1, 2, 0, 1,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_tooltips_set_tip (tooltips, spinbutton8, _("Quantization factors used between I and P-frames"), NULL);
-  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbutton8), TRUE);
-
-  spinbutton9_adj = gtk_adjustment_new (1.29999995232, 1, 10, 0.10000000149, 10, 10);
-  spinbutton9 = gtk_spin_button_new (GTK_ADJUSTMENT (spinbutton9_adj), 0.10000000149, 1);
-  gtk_widget_show (spinbutton9);
-  gtk_table_attach (GTK_TABLE (table16), spinbutton9, 1, 2, 1, 2,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_tooltips_set_tip (tooltips, spinbutton9, _("Quantization used between P and B-frames"), NULL);
-  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbutton9), TRUE);
-
-  spinbuttonChromaQPOffset_adj = gtk_adjustment_new (0, -12, 12, 1, 10, 10);
-  spinbuttonChromaQPOffset = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonChromaQPOffset_adj), 1, 0);
-  gtk_widget_show (spinbuttonChromaQPOffset);
-  gtk_table_attach (GTK_TABLE (table16), spinbuttonChromaQPOffset, 1, 2, 2, 3,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_tooltips_set_tip (tooltips, spinbuttonChromaQPOffset, _("Quantization difference between chroma (color) and luma (brightness)"), NULL);
-  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonChromaQPOffset), TRUE);
-
-  labelFactorbetweenIandP = gtk_label_new (_("Factor between I and P-frame Quants"));
-  gtk_widget_show (labelFactorbetweenIandP);
-  gtk_table_attach (GTK_TABLE (table16), labelFactorbetweenIandP, 0, 1, 0, 1,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_misc_set_alignment (GTK_MISC (labelFactorbetweenIandP), 0, 0.5);
-
-  labelFactorbetweenPandB = gtk_label_new (_("Factor between P and B-frame Quants"));
-  gtk_widget_show (labelFactorbetweenPandB);
-  gtk_table_attach (GTK_TABLE (table16), labelFactorbetweenPandB, 0, 1, 1, 2,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_misc_set_alignment (GTK_MISC (labelFactorbetweenPandB), 0, 0.5);
-
-  labelChromaQPOffset = gtk_label_new (_("Chroma QP Offset"));
-  gtk_widget_show (labelChromaQPOffset);
-  gtk_table_attach (GTK_TABLE (table16), labelChromaQPOffset, 0, 1, 2, 3,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_misc_set_alignment (GTK_MISC (labelChromaQPOffset), 0, 0.5);
-
-  labelQuantizers = gtk_label_new (_("<b>Quantizers</b>"));
-  gtk_widget_show (labelQuantizers);
-  gtk_frame_set_label_widget (GTK_FRAME (frame11), labelQuantizers);
-  gtk_label_set_use_markup (GTK_LABEL (labelQuantizers), TRUE);
-
-  frame9 = gtk_frame_new (NULL);
-  gtk_widget_show (frame9);
-  gtk_box_pack_start (GTK_BOX (vbox8), frame9, FALSE, TRUE, 0);
-
-  alignment9 = gtk_alignment_new (0.5, 0.5, 1, 1);
-  gtk_widget_show (alignment9);
-  gtk_container_add (GTK_CONTAINER (frame9), alignment9);
-  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment9), 7, 7, 7, 7);
-
-  vbox9 = gtk_vbox_new (FALSE, 3);
-  gtk_widget_show (vbox9);
-  gtk_container_add (GTK_CONTAINER (alignment9), vbox9);
-
-  radiobuttonFlatmatrix = gtk_radio_button_new_with_mnemonic (NULL, _("Flat Matrix"));
-  gtk_widget_show (radiobuttonFlatmatrix);
-  gtk_box_pack_start (GTK_BOX (vbox9), radiobuttonFlatmatrix, FALSE, FALSE, 0);
-  gtk_radio_button_set_group (GTK_RADIO_BUTTON (radiobuttonFlatmatrix), radiobuttonFlatmatrix_group);
-  radiobuttonFlatmatrix_group = gtk_radio_button_get_group (GTK_RADIO_BUTTON (radiobuttonFlatmatrix));
-  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (radiobuttonFlatmatrix), TRUE);
-
-  radiobuttonJVTmatrix = gtk_radio_button_new_with_mnemonic (NULL, _("JVT Matrix"));
-  gtk_widget_show (radiobuttonJVTmatrix);
-  gtk_box_pack_start (GTK_BOX (vbox9), radiobuttonJVTmatrix, FALSE, FALSE, 0);
-  gtk_radio_button_set_group (GTK_RADIO_BUTTON (radiobuttonJVTmatrix), radiobuttonFlatmatrix_group);
-  radiobuttonFlatmatrix_group = gtk_radio_button_get_group (GTK_RADIO_BUTTON (radiobuttonJVTmatrix));
-
-  hbox13 = gtk_hbox_new (FALSE, 10);
-  gtk_widget_show (hbox13);
-  gtk_box_pack_start (GTK_BOX (vbox9), hbox13, FALSE, FALSE, 0);
-
-  radiobuttonCustommatrix = gtk_radio_button_new_with_mnemonic (NULL, _("Custom Matrix"));
-  gtk_widget_show (radiobuttonCustommatrix);
-  gtk_box_pack_start (GTK_BOX (hbox13), radiobuttonCustommatrix, TRUE, TRUE, 0);
-  gtk_radio_button_set_group (GTK_RADIO_BUTTON (radiobuttonCustommatrix), radiobuttonFlatmatrix_group);
-  radiobuttonFlatmatrix_group = gtk_radio_button_get_group (GTK_RADIO_BUTTON (radiobuttonCustommatrix));
-
-  hbox14 = gtk_hbox_new (FALSE, 0);
-  gtk_widget_show (hbox14);
-  gtk_box_pack_start (GTK_BOX (hbox13), hbox14, TRUE, TRUE, 0);
-
-  filechooserbuttonOpenCQMFile = gtk_file_chooser_button_new (_("Open CQM file"), GTK_FILE_CHOOSER_ACTION_OPEN);
-  gtk_widget_show (filechooserbuttonOpenCQMFile);
-  gtk_box_pack_start (GTK_BOX (hbox14), filechooserbuttonOpenCQMFile, TRUE, TRUE, 0);
-
-  vseparator1 = gtk_vseparator_new ();
-  gtk_widget_show (vseparator1);
-  gtk_box_pack_start (GTK_BOX (hbox14), vseparator1, TRUE, TRUE, 0);
-
-  buttonEditCustomMatrix = gtk_button_new_with_mnemonic (_("Edit Custom Matrix"));
-  gtk_widget_show (buttonEditCustomMatrix);
-  gtk_box_pack_start (GTK_BOX (hbox14), buttonEditCustomMatrix, FALSE, FALSE, 0);
-  gtk_tooltips_set_tip (tooltips, buttonEditCustomMatrix, _("Edit loaded custom quantization matrix file"), NULL);
-
-  labelFrameQuantizationMatrices = gtk_label_new (_("<b>Quantization Matrices</b>"));
-  gtk_widget_show (labelFrameQuantizationMatrices);
-  gtk_frame_set_label_widget (GTK_FRAME (frame9), labelFrameQuantizationMatrices);
-  gtk_label_set_use_markup (GTK_LABEL (labelFrameQuantizationMatrices), TRUE);
-
-  labelMore = gtk_label_new (_("More"));
-  gtk_widget_show (labelMore);
-  gtk_notebook_set_tab_label (GTK_NOTEBOOK (notebook1), gtk_notebook_get_nth_page (GTK_NOTEBOOK (notebook1), 4), labelMore);
-
-  dialog_action_area1 = GTK_DIALOG (dialog1)->action_area;
-  gtk_widget_show (dialog_action_area1);
-  gtk_button_box_set_layout (GTK_BUTTON_BOX (dialog_action_area1), GTK_BUTTONBOX_END);
-
-  buttonResetDaults = gtk_button_new_with_mnemonic (_("_Defaults"));
-  gtk_widget_show (buttonResetDaults);
-  gtk_dialog_add_action_widget (GTK_DIALOG (dialog1), buttonResetDaults, 0);
-
-  cancelbutton1 = gtk_button_new_from_stock ("gtk-cancel");
-  gtk_widget_show (cancelbutton1);
-  gtk_dialog_add_action_widget (GTK_DIALOG (dialog1), cancelbutton1, GTK_RESPONSE_CANCEL);
-
-  okbutton1 = gtk_button_new_from_stock ("gtk-ok");
-  gtk_widget_show (okbutton1);
-  gtk_dialog_add_action_widget (GTK_DIALOG (dialog1), okbutton1, GTK_RESPONSE_OK);
-  GTK_WIDGET_SET_FLAGS (okbutton1, GTK_CAN_DEFAULT);
-
-  /* Store pointers to all widgets, for use by lookup_widget(). */
-  GLADE_HOOKUP_OBJECT_NO_REF (dialog1, dialog1, "dialog1");
-  GLADE_HOOKUP_OBJECT_NO_REF (dialog1, dialog_vbox1, "dialog_vbox1");
-  GLADE_HOOKUP_OBJECT (dialog1, notebook1, "notebook1");
-  GLADE_HOOKUP_OBJECT (dialog1, alignment14, "alignment14");
-  GLADE_HOOKUP_OBJECT (dialog1, tableBitrate, "tableBitrate");
-  GLADE_HOOKUP_OBJECT (dialog1, labelEncodingMode, "labelEncodingMode");
-  GLADE_HOOKUP_OBJECT (dialog1, labelQuantizer, "labelQuantizer");
-  GLADE_HOOKUP_OBJECT (dialog1, labelTarget, "labelTarget");
-  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonQuantizer, "spinbuttonQuantizer");
-  GLADE_HOOKUP_OBJECT (dialog1, entryTarget, "entryTarget");
-  GLADE_HOOKUP_OBJECT (dialog1, comboboxMode, "comboboxMode");
-  GLADE_HOOKUP_OBJECT (dialog1, labelPageBitrate, "labelPageBitrate");
-  GLADE_HOOKUP_OBJECT (dialog1, alignment15, "alignment15");
-  GLADE_HOOKUP_OBJECT (dialog1, vbox5, "vbox5");
-  GLADE_HOOKUP_OBJECT (dialog1, frame6, "frame6");
-  GLADE_HOOKUP_OBJECT (dialog1, alignment6, "alignment6");
-  GLADE_HOOKUP_OBJECT (dialog1, vbox6, "vbox6");
-  GLADE_HOOKUP_OBJECT (dialog1, table7, "table7");
-  GLADE_HOOKUP_OBJECT (dialog1, labelPartitionDecision, "labelPartitionDecision");
-  GLADE_HOOKUP_OBJECT (dialog1, labelMethod, "labelMethod");
-  GLADE_HOOKUP_OBJECT (dialog1, comboboxPartitionDecision, "comboboxPartitionDecision");
-  GLADE_HOOKUP_OBJECT (dialog1, comboboxMethod, "comboboxMethod");
-  GLADE_HOOKUP_OBJECT (dialog1, table11, "table11");
-  GLADE_HOOKUP_OBJECT (dialog1, labelMaxRefFrames, "labelMaxRefFrames");
-  GLADE_HOOKUP_OBJECT (dialog1, labelRange, "labelRange");
-  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonRange, "spinbuttonRange");
-  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonMaxRefFrames, "spinbuttonMaxRefFrames");
-  GLADE_HOOKUP_OBJECT (dialog1, checkbuttonChromaME, "checkbuttonChromaME");
-  GLADE_HOOKUP_OBJECT (dialog1, checkbuttonMixedRefs, "checkbuttonMixedRefs");
-  GLADE_HOOKUP_OBJECT (dialog1, hbox8, "hbox8");
-  GLADE_HOOKUP_OBJECT (dialog1, checkbuttonfastPSkip, "checkbuttonfastPSkip");
-  GLADE_HOOKUP_OBJECT (dialog1, checkbuttonDCTDecimate, "checkbuttonDCTDecimate");
-  GLADE_HOOKUP_OBJECT (dialog1, checkbuttoninterlaced, "checkbuttoninterlaced");
-  GLADE_HOOKUP_OBJECT (dialog1, label24, "label24");
-  GLADE_HOOKUP_OBJECT (dialog1, frameSampleAR, "frameSampleAR");
-  GLADE_HOOKUP_OBJECT (dialog1, alignment12, "alignment12");
-  GLADE_HOOKUP_OBJECT (dialog1, table35, "table35");
-  GLADE_HOOKUP_OBJECT (dialog1, hbox12, "hbox12");
-  GLADE_HOOKUP_OBJECT (dialog1, entryAR_Num, "entryAR_Num");
-  GLADE_HOOKUP_OBJECT (dialog1, label53, "label53");
-  GLADE_HOOKUP_OBJECT (dialog1, entryAR_Den, "entryAR_Den");
-  GLADE_HOOKUP_OBJECT (dialog1, radiobuttonCustomAR, "radiobuttonCustomAR");
-  GLADE_HOOKUP_OBJECT (dialog1, radiobuttonPredefinedAR, "radiobuttonPredefinedAR");
-  GLADE_HOOKUP_OBJECT (dialog1, radiobuttonAsInputAR, "radiobuttonAsInputAR");
-  GLADE_HOOKUP_OBJECT (dialog1, label40, "label40");
-  GLADE_HOOKUP_OBJECT (dialog1, comboboxentry1, "comboboxentry1");
-  GLADE_HOOKUP_OBJECT (dialog1, label39, "label39");
-  GLADE_HOOKUP_OBJECT (dialog1, frame7, "frame7");
-  GLADE_HOOKUP_OBJECT (dialog1, alignment7, "alignment7");
-  GLADE_HOOKUP_OBJECT (dialog1, vbox7, "vbox7");
-  GLADE_HOOKUP_OBJECT (dialog1, alignment21, "alignment21");
-  GLADE_HOOKUP_OBJECT (dialog1, hbox2, "hbox2");
-  GLADE_HOOKUP_OBJECT (dialog1, checkbuttonCABAC, "checkbuttonCABAC");
-  GLADE_HOOKUP_OBJECT (dialog1, hbox7, "hbox7");
-  GLADE_HOOKUP_OBJECT (dialog1, labelTrellis, "labelTrellis");
-  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonTrellis, "spinbuttonTrellis");
-  GLADE_HOOKUP_OBJECT (dialog1, hbox11, "hbox11");
-  GLADE_HOOKUP_OBJECT (dialog1, labelNoiseReduction, "labelNoiseReduction");
-  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonNoiseReduction, "spinbuttonNoiseReduction");
-  GLADE_HOOKUP_OBJECT (dialog1, hbox3, "hbox3");
-  GLADE_HOOKUP_OBJECT (dialog1, checkbuttonDeblockingFilter, "checkbuttonDeblockingFilter");
-  GLADE_HOOKUP_OBJECT (dialog1, table8, "table8");
-  GLADE_HOOKUP_OBJECT (dialog1, labelThreshold, "labelThreshold");
-  GLADE_HOOKUP_OBJECT (dialog1, labelStrength, "labelStrength");
-  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonThreshold, "spinbuttonThreshold");
-  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonStrength, "spinbuttonStrength");
-  GLADE_HOOKUP_OBJECT (dialog1, label25, "label25");
-  GLADE_HOOKUP_OBJECT (dialog1, labelPageMotion_More, "labelPageMotion_More");
-  GLADE_HOOKUP_OBJECT (dialog1, alignment16, "alignment16");
-  GLADE_HOOKUP_OBJECT (dialog1, vbox2, "vbox2");
-  GLADE_HOOKUP_OBJECT (dialog1, frame4, "frame4");
-  GLADE_HOOKUP_OBJECT (dialog1, alignment4, "alignment4");
-  GLADE_HOOKUP_OBJECT (dialog1, vbox3, "vbox3");
-  GLADE_HOOKUP_OBJECT (dialog1, checkbutton8x8, "checkbutton8x8");
-  GLADE_HOOKUP_OBJECT (dialog1, checkbutton8x8P, "checkbutton8x8P");
-  GLADE_HOOKUP_OBJECT (dialog1, checkbutton8x8B, "checkbutton8x8B");
-  GLADE_HOOKUP_OBJECT (dialog1, checkbutton4x4, "checkbutton4x4");
-  GLADE_HOOKUP_OBJECT (dialog1, checkbutton8x8I, "checkbutton8x8I");
-  GLADE_HOOKUP_OBJECT (dialog1, checkbutton4x4I, "checkbutton4x4I");
-  GLADE_HOOKUP_OBJECT (dialog1, label19, "label19");
-  GLADE_HOOKUP_OBJECT (dialog1, frame5, "frame5");
-  GLADE_HOOKUP_OBJECT (dialog1, alignment5, "alignment5");
-  GLADE_HOOKUP_OBJECT (dialog1, vbox4, "vbox4");
-  GLADE_HOOKUP_OBJECT (dialog1, table5, "table5");
-  GLADE_HOOKUP_OBJECT (dialog1, labelBias, "labelBias");
-  GLADE_HOOKUP_OBJECT (dialog1, labelMaxConsecutive, "labelMaxConsecutive");
-  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonBias, "spinbuttonBias");
-  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonMaxBFrame, "spinbuttonMaxBFrame");
-  GLADE_HOOKUP_OBJECT (dialog1, alignment20, "alignment20");
-  GLADE_HOOKUP_OBJECT (dialog1, table6, "table6");
-  GLADE_HOOKUP_OBJECT (dialog1, checkbuttonBidirME, "checkbuttonBidirME");
-  GLADE_HOOKUP_OBJECT (dialog1, checkbuttonWeighted, "checkbuttonWeighted");
-  GLADE_HOOKUP_OBJECT (dialog1, checkbuttonAdaptative, "checkbuttonAdaptative");
-  GLADE_HOOKUP_OBJECT (dialog1, checkbuttonBasReference, "checkbuttonBasReference");
-  GLADE_HOOKUP_OBJECT (dialog1, hbox1, "hbox1");
-  GLADE_HOOKUP_OBJECT (dialog1, labelBFrameDirectMode, "labelBFrameDirectMode");
-  GLADE_HOOKUP_OBJECT (dialog1, comboboxDirectMode, "comboboxDirectMode");
-  GLADE_HOOKUP_OBJECT (dialog1, label20, "label20");
-  GLADE_HOOKUP_OBJECT (dialog1, labelPagePartion_Frame, "labelPagePartion_Frame");
-  GLADE_HOOKUP_OBJECT (dialog1, alignment17, "alignment17");
-  GLADE_HOOKUP_OBJECT (dialog1, vbox1, "vbox1");
-  GLADE_HOOKUP_OBJECT (dialog1, frame1, "frame1");
-  GLADE_HOOKUP_OBJECT (dialog1, alignment1, "alignment1");
-  GLADE_HOOKUP_OBJECT (dialog1, table2, "table2");
-  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonKeyframeBoost, "spinbuttonKeyframeBoost");
-  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonBframeReduction, "spinbuttonBframeReduction");
-  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonBitrateVariability, "spinbuttonBitrateVariability");
-  GLADE_HOOKUP_OBJECT (dialog1, labelKeyframeboost, "labelKeyframeboost");
-  GLADE_HOOKUP_OBJECT (dialog1, label11, "label11");
-  GLADE_HOOKUP_OBJECT (dialog1, label12, "label12");
-  GLADE_HOOKUP_OBJECT (dialog1, label7, "label7");
-  GLADE_HOOKUP_OBJECT (dialog1, frame2, "frame2");
-  GLADE_HOOKUP_OBJECT (dialog1, alignment2, "alignment2");
-  GLADE_HOOKUP_OBJECT (dialog1, table3, "table3");
-  GLADE_HOOKUP_OBJECT (dialog1, label13, "label13");
-  GLADE_HOOKUP_OBJECT (dialog1, label14, "label14");
-  GLADE_HOOKUP_OBJECT (dialog1, label15, "label15");
-  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonMinQp, "spinbuttonMinQp");
-  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonMaxQp, "spinbuttonMaxQp");
-  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonQpStep, "spinbuttonQpStep");
-  GLADE_HOOKUP_OBJECT (dialog1, label8, "label8");
-  GLADE_HOOKUP_OBJECT (dialog1, frame3, "frame3");
-  GLADE_HOOKUP_OBJECT (dialog1, alignment3, "alignment3");
-  GLADE_HOOKUP_OBJECT (dialog1, table4, "table4");
-  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonSceneCut, "spinbuttonSceneCut");
-  GLADE_HOOKUP_OBJECT (dialog1, label16, "label16");
-  GLADE_HOOKUP_OBJECT (dialog1, label17, "label17");
-  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonMinIdr, "spinbuttonMinIdr");
-  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonMaxIdr, "spinbuttonMaxIdr");
-  GLADE_HOOKUP_OBJECT (dialog1, label18, "label18");
-  GLADE_HOOKUP_OBJECT (dialog1, labelMoreEncodingSettings, "labelMoreEncodingSettings");
-  GLADE_HOOKUP_OBJECT (dialog1, frameVideoBufferVerifier, "frameVideoBufferVerifier");
-  GLADE_HOOKUP_OBJECT (dialog1, alignment11, "alignment11");
-  GLADE_HOOKUP_OBJECT (dialog1, table12, "table12");
-  GLADE_HOOKUP_OBJECT (dialog1, labelVBVBufferSize, "labelVBVBufferSize");
-  GLADE_HOOKUP_OBJECT (dialog1, labelVBVInitialbuffer, "labelVBVInitialbuffer");
-  GLADE_HOOKUP_OBJECT (dialog1, labelVBVMaximumBitrate, "labelVBVMaximumBitrate");
-  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonvbv_max_bitrate, "spinbuttonvbv_max_bitrate");
-  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonvbv_buffer_size, "spinbuttonvbv_buffer_size");
-  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonvbv_buffer_init, "spinbuttonvbv_buffer_init");
-  GLADE_HOOKUP_OBJECT (dialog1, labelVideoBufferVerifier, "labelVideoBufferVerifier");
-  GLADE_HOOKUP_OBJECT (dialog1, labelPageRateControl, "labelPageRateControl");
-  GLADE_HOOKUP_OBJECT (dialog1, alignment18, "alignment18");
-  GLADE_HOOKUP_OBJECT (dialog1, vbox8, "vbox8");
-  GLADE_HOOKUP_OBJECT (dialog1, frame10, "frame10");
-  GLADE_HOOKUP_OBJECT (dialog1, alignment10, "alignment10");
-  GLADE_HOOKUP_OBJECT (dialog1, table15, "table15");
-  GLADE_HOOKUP_OBJECT (dialog1, labelBitrateVariance, "labelBitrateVariance");
-  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonBitrateVariance, "spinbuttonBitrateVariance");
-  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonQuantizerCompression, "spinbuttonQuantizerCompression");
-  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonTempBlurFrame, "spinbuttonTempBlurFrame");
-  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonTempBlurQuant, "spinbuttonTempBlurQuant");
-  GLADE_HOOKUP_OBJECT (dialog1, labelQuantizerCompression, "labelQuantizerCompression");
-  GLADE_HOOKUP_OBJECT (dialog1, labelTempBlurEstFrame, "labelTempBlurEstFrame");
-  GLADE_HOOKUP_OBJECT (dialog1, labelTempBlueQuant, "labelTempBlueQuant");
-  GLADE_HOOKUP_OBJECT (dialog1, labelMisc, "labelMisc");
-  GLADE_HOOKUP_OBJECT (dialog1, frame11, "frame11");
-  GLADE_HOOKUP_OBJECT (dialog1, alignment13, "alignment13");
-  GLADE_HOOKUP_OBJECT (dialog1, table16, "table16");
-  GLADE_HOOKUP_OBJECT (dialog1, spinbutton8, "spinbutton8");
-  GLADE_HOOKUP_OBJECT (dialog1, spinbutton9, "spinbutton9");
-  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonChromaQPOffset, "spinbuttonChromaQPOffset");
-  GLADE_HOOKUP_OBJECT (dialog1, labelFactorbetweenIandP, "labelFactorbetweenIandP");
-  GLADE_HOOKUP_OBJECT (dialog1, labelFactorbetweenPandB, "labelFactorbetweenPandB");
-  GLADE_HOOKUP_OBJECT (dialog1, labelChromaQPOffset, "labelChromaQPOffset");
-  GLADE_HOOKUP_OBJECT (dialog1, labelQuantizers, "labelQuantizers");
-  GLADE_HOOKUP_OBJECT (dialog1, frame9, "frame9");
-  GLADE_HOOKUP_OBJECT (dialog1, alignment9, "alignment9");
-  GLADE_HOOKUP_OBJECT (dialog1, vbox9, "vbox9");
-  GLADE_HOOKUP_OBJECT (dialog1, radiobuttonFlatmatrix, "radiobuttonFlatmatrix");
-  GLADE_HOOKUP_OBJECT (dialog1, radiobuttonJVTmatrix, "radiobuttonJVTmatrix");
-  GLADE_HOOKUP_OBJECT (dialog1, hbox13, "hbox13");
-  GLADE_HOOKUP_OBJECT (dialog1, radiobuttonCustommatrix, "radiobuttonCustommatrix");
-  GLADE_HOOKUP_OBJECT (dialog1, hbox14, "hbox14");
-  GLADE_HOOKUP_OBJECT (dialog1, filechooserbuttonOpenCQMFile, "filechooserbuttonOpenCQMFile");
-  GLADE_HOOKUP_OBJECT (dialog1, vseparator1, "vseparator1");
-  GLADE_HOOKUP_OBJECT (dialog1, buttonEditCustomMatrix, "buttonEditCustomMatrix");
-  GLADE_HOOKUP_OBJECT (dialog1, labelFrameQuantizationMatrices, "labelFrameQuantizationMatrices");
-  GLADE_HOOKUP_OBJECT (dialog1, labelMore, "labelMore");
-  GLADE_HOOKUP_OBJECT_NO_REF (dialog1, dialog_action_area1, "dialog_action_area1");
-  GLADE_HOOKUP_OBJECT (dialog1, buttonResetDaults, "buttonResetDaults");
-  GLADE_HOOKUP_OBJECT (dialog1, cancelbutton1, "cancelbutton1");
-  GLADE_HOOKUP_OBJECT (dialog1, okbutton1, "okbutton1");
-  GLADE_HOOKUP_OBJECT_NO_REF (dialog1, tooltips, "tooltips");
-
-  gtk_widget_grab_default (okbutton1);
-  return dialog1;
-}
+GtkWidget*
+create_dialog1 (void)
+{
+  GtkWidget *dialog1;
+  GtkWidget *dialog_vbox1;
+  GtkWidget *notebook1;
+  GtkWidget *alignment14;
+  GtkWidget *tableBitrate;
+  GtkWidget *labelEncodingMode;
+  GtkWidget *labelQuantizer;
+  GtkWidget *labelTarget;
+  GtkObject *spinbuttonQuantizer_adj;
+  GtkWidget *spinbuttonQuantizer;
+  GtkWidget *entryTarget;
+  GtkWidget *comboboxMode;
+  GtkWidget *labelPageBitrate;
+  GtkWidget *alignment15;
+  GtkWidget *vbox5;
+  GtkWidget *frame6;
+  GtkWidget *alignment6;
+  GtkWidget *vbox6;
+  GtkWidget *table7;
+  GtkWidget *labelPartitionDecision;
+  GtkWidget *labelMethod;
+  GtkWidget *comboboxPartitionDecision;
+  GtkWidget *comboboxMethod;
+  GtkWidget *table11;
+  GtkWidget *labelMaxRefFrames;
+  GtkWidget *labelRange;
+  GtkObject *spinbuttonRange_adj;
+  GtkWidget *spinbuttonRange;
+  GtkObject *spinbuttonMaxRefFrames_adj;
+  GtkWidget *spinbuttonMaxRefFrames;
+  GtkWidget *checkbuttonChromaME;
+  GtkWidget *checkbuttonMixedRefs;
+  GtkWidget *hbox8;
+  GtkWidget *checkbuttonfastPSkip;
+  GtkWidget *checkbuttonDCTDecimate;
+  GtkWidget *checkbuttoninterlaced;
+  GtkWidget *label24;
+  GtkWidget *frameSampleAR;
+  GtkWidget *alignment12;
+  GtkWidget *table35;
+  GtkWidget *hbox12;
+  GtkWidget *entryAR_Num;
+  GtkWidget *label53;
+  GtkWidget *entryAR_Den;
+  GtkWidget *radiobuttonCustomAR;
+  GSList *radiobuttonCustomAR_group = NULL;
+  GtkWidget *radiobuttonPredefinedAR;
+  GtkWidget *radiobuttonAsInputAR;
+  GtkWidget *label40;
+  GtkWidget *comboboxentry1;
+  GtkWidget *label39;
+  GtkWidget *frame7;
+  GtkWidget *alignment7;
+  GtkWidget *vbox7;
+  GtkWidget *alignment21;
+  GtkWidget *hbox2;
+  GtkWidget *checkbuttonCABAC;
+  GtkWidget *hbox7;
+  GtkWidget *labelTrellis;
+  GtkObject *spinbuttonTrellis_adj;
+  GtkWidget *spinbuttonTrellis;
+  GtkWidget *hbox11;
+  GtkWidget *labelNoiseReduction;
+  GtkObject *spinbuttonNoiseReduction_adj;
+  GtkWidget *spinbuttonNoiseReduction;
+  GtkWidget *hbox3;
+  GtkWidget *checkbuttonDeblockingFilter;
+  GtkWidget *table8;
+  GtkWidget *labelThreshold;
+  GtkWidget *labelStrength;
+  GtkObject *spinbuttonThreshold_adj;
+  GtkWidget *spinbuttonThreshold;
+  GtkObject *spinbuttonStrength_adj;
+  GtkWidget *spinbuttonStrength;
+  GtkWidget *label25;
+  GtkWidget *labelPageMotion_More;
+  GtkWidget *alignment16;
+  GtkWidget *vbox2;
+  GtkWidget *frame4;
+  GtkWidget *alignment4;
+  GtkWidget *vbox3;
+  GtkWidget *checkbutton8x8;
+  GtkWidget *checkbutton8x8P;
+  GtkWidget *checkbutton8x8B;
+  GtkWidget *checkbutton4x4;
+  GtkWidget *checkbutton8x8I;
+  GtkWidget *checkbutton4x4I;
+  GtkWidget *label19;
+  GtkWidget *frame5;
+  GtkWidget *alignment5;
+  GtkWidget *vbox4;
+  GtkWidget *table5;
+  GtkWidget *labelBias;
+  GtkWidget *labelMaxConsecutive;
+  GtkObject *spinbuttonBias_adj;
+  GtkWidget *spinbuttonBias;
+  GtkObject *spinbuttonMaxBFrame_adj;
+  GtkWidget *spinbuttonMaxBFrame;
+  GtkWidget *alignment20;
+  GtkWidget *table6;
+  GtkWidget *checkbuttonBidirME;
+  GtkWidget *checkbuttonWeighted;
+  GtkWidget *checkbuttonAdaptative;
+  GtkWidget *checkbuttonBasReference;
+  GtkWidget *hbox1;
+  GtkWidget *labelBFrameDirectMode;
+  GtkWidget *comboboxDirectMode;
+  GtkWidget *label20;
+  GtkWidget *labelPagePartion_Frame;
+  GtkWidget *alignment17;
+  GtkWidget *vbox1;
+  GtkWidget *frame1;
+  GtkWidget *alignment1;
+  GtkWidget *table2;
+  GtkObject *spinbuttonKeyframeBoost_adj;
+  GtkWidget *spinbuttonKeyframeBoost;
+  GtkObject *spinbuttonBframeReduction_adj;
+  GtkWidget *spinbuttonBframeReduction;
+  GtkObject *spinbuttonBitrateVariability_adj;
+  GtkWidget *spinbuttonBitrateVariability;
+  GtkWidget *labelKeyframeboost;
+  GtkWidget *label11;
+  GtkWidget *label12;
+  GtkWidget *label7;
+  GtkWidget *frame2;
+  GtkWidget *alignment2;
+  GtkWidget *table3;
+  GtkWidget *label13;
+  GtkWidget *label14;
+  GtkWidget *label15;
+  GtkObject *spinbuttonMinQp_adj;
+  GtkWidget *spinbuttonMinQp;
+  GtkObject *spinbuttonMaxQp_adj;
+  GtkWidget *spinbuttonMaxQp;
+  GtkObject *spinbuttonQpStep_adj;
+  GtkWidget *spinbuttonQpStep;
+  GtkWidget *label8;
+  GtkWidget *frame3;
+  GtkWidget *alignment3;
+  GtkWidget *table4;
+  GtkObject *spinbuttonSceneCut_adj;
+  GtkWidget *spinbuttonSceneCut;
+  GtkWidget *label16;
+  GtkWidget *label17;
+  GtkObject *spinbuttonMinIdr_adj;
+  GtkWidget *spinbuttonMinIdr;
+  GtkObject *spinbuttonMaxIdr_adj;
+  GtkWidget *spinbuttonMaxIdr;
+  GtkWidget *label18;
+  GtkWidget *labelMoreEncodingSettings;
+  GtkWidget *frameVideoBufferVerifier;
+  GtkWidget *alignment11;
+  GtkWidget *table12;
+  GtkWidget *labelVBVBufferSize;
+  GtkWidget *labelVBVInitialbuffer;
+  GtkWidget *labelVBVMaximumBitrate;
+  GtkObject *spinbuttonvbv_max_bitrate_adj;
+  GtkWidget *spinbuttonvbv_max_bitrate;
+  GtkObject *spinbuttonvbv_buffer_size_adj;
+  GtkWidget *spinbuttonvbv_buffer_size;
+  GtkObject *spinbuttonvbv_buffer_init_adj;
+  GtkWidget *spinbuttonvbv_buffer_init;
+  GtkWidget *labelVideoBufferVerifier;
+  GtkWidget *labelPageRateControl;
+  GtkWidget *alignment18;
+  GtkWidget *vbox8;
+  GtkWidget *frame10;
+  GtkWidget *alignment10;
+  GtkWidget *table15;
+  GtkWidget *labelBitrateVariance;
+  GtkObject *spinbuttonBitrateVariance_adj;
+  GtkWidget *spinbuttonBitrateVariance;
+  GtkObject *spinbuttonQuantizerCompression_adj;
+  GtkWidget *spinbuttonQuantizerCompression;
+  GtkObject *spinbuttonTempBlurFrame_adj;
+  GtkWidget *spinbuttonTempBlurFrame;
+  GtkObject *spinbuttonTempBlurQuant_adj;
+  GtkWidget *spinbuttonTempBlurQuant;
+  GtkWidget *labelQuantizerCompression;
+  GtkWidget *labelTempBlurEstFrame;
+  GtkWidget *labelTempBlueQuant;
+  GtkWidget *labelMisc;
+  GtkWidget *frame11;
+  GtkWidget *alignment13;
+  GtkWidget *table16;
+  GtkObject *spinbutton8_adj;
+  GtkWidget *spinbutton8;
+  GtkObject *spinbutton9_adj;
+  GtkWidget *spinbutton9;
+  GtkObject *spinbuttonChromaQPOffset_adj;
+  GtkWidget *spinbuttonChromaQPOffset;
+  GtkWidget *labelFactorbetweenIandP;
+  GtkWidget *labelFactorbetweenPandB;
+  GtkWidget *labelChromaQPOffset;
+  GtkWidget *labelQuantizers;
+  GtkWidget *frame9;
+  GtkWidget *alignment9;
+  GtkWidget *vbox9;
+  GtkWidget *radiobuttonFlatmatrix;
+  GSList *radiobuttonFlatmatrix_group = NULL;
+  GtkWidget *radiobuttonJVTmatrix;
+  GtkWidget *hbox13;
+  GtkWidget *radiobuttonCustommatrix;
+  GtkWidget *hbox14;
+  GtkWidget *filechooserbuttonOpenCQMFile;
+  GtkWidget *vseparator1;
+  GtkWidget *buttonEditCustomMatrix;
+  GtkWidget *labelFrameQuantizationMatrices;
+  GtkWidget *labelMore;
+  GtkWidget *dialog_action_area1;
+  GtkWidget *buttonResetDaults;
+  GtkWidget *cancelbutton1;
+  GtkWidget *okbutton1;
+  GtkTooltips *tooltips;
+
+  tooltips = gtk_tooltips_new ();
+
+  dialog1 = gtk_dialog_new ();
+  gtk_window_set_title (GTK_WINDOW (dialog1), _("x264 Configuration"));
+  gtk_window_set_type_hint (GTK_WINDOW (dialog1), GDK_WINDOW_TYPE_HINT_DIALOG);
+
+  dialog_vbox1 = GTK_DIALOG (dialog1)->vbox;
+  gtk_widget_show (dialog_vbox1);
+
+  notebook1 = gtk_notebook_new ();
+  gtk_widget_show (notebook1);
+  gtk_box_pack_start (GTK_BOX (dialog_vbox1), notebook1, TRUE, TRUE, 0);
+
+  alignment14 = gtk_alignment_new (0.5, 0.5, 1, 1);
+  gtk_widget_show (alignment14);
+  gtk_container_add (GTK_CONTAINER (notebook1), alignment14);
+  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment14), 7, 7, 7, 7);
+
+  tableBitrate = gtk_table_new (3, 2, FALSE);
+  gtk_widget_show (tableBitrate);
+  gtk_container_add (GTK_CONTAINER (alignment14), tableBitrate);
+  gtk_table_set_row_spacings (GTK_TABLE (tableBitrate), 3);
+  gtk_table_set_col_spacings (GTK_TABLE (tableBitrate), 10);
+
+  labelEncodingMode = gtk_label_new (_("Encoding Mode"));
+  gtk_widget_show (labelEncodingMode);
+  gtk_table_attach (GTK_TABLE (tableBitrate), labelEncodingMode, 0, 1, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelEncodingMode), 0, 0.5);
+
+  labelQuantizer = gtk_label_new (_("Quantizer"));
+  gtk_widget_show (labelQuantizer);
+  gtk_table_attach (GTK_TABLE (tableBitrate), labelQuantizer, 0, 1, 2, 3,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelQuantizer), 0, 0.5);
+
+  labelTarget = gtk_label_new (_("Target Size"));
+  gtk_widget_show (labelTarget);
+  gtk_table_attach (GTK_TABLE (tableBitrate), labelTarget, 0, 1, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelTarget), 0, 0.5);
+
+  spinbuttonQuantizer_adj = gtk_adjustment_new (4, 0, 51, 1, 10, 10);
+  spinbuttonQuantizer = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonQuantizer_adj), 1, 0);
+  gtk_widget_show (spinbuttonQuantizer);
+  gtk_table_attach (GTK_TABLE (tableBitrate), spinbuttonQuantizer, 1, 2, 2, 3,
+                    (GtkAttachOptions) (GTK_SHRINK | GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, spinbuttonQuantizer, _("Constant Quantizer - Each frame will have the same compression. Low numbers equal higher quality while high numbers equal lower quality."), NULL);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonQuantizer), TRUE);
+
+  entryTarget = gtk_entry_new ();
+  gtk_widget_show (entryTarget);
+  gtk_table_attach (GTK_TABLE (tableBitrate), entryTarget, 1, 2, 1, 2,
+                    (GtkAttachOptions) (GTK_SHRINK | GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, entryTarget, _("Target bitrate or file size"), NULL);
+  gtk_entry_set_width_chars (GTK_ENTRY (entryTarget), 4);
+
+  comboboxMode = gtk_combo_box_new_text ();
+  gtk_widget_show (comboboxMode);
+  gtk_table_attach (GTK_TABLE (tableBitrate), comboboxMode, 1, 2, 0, 1,
+                    (GtkAttachOptions) (GTK_SHRINK | GTK_FILL),
+                    (GtkAttachOptions) (GTK_FILL), 0, 0);
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxMode), _("Single Pass - Quality Quantizer (Average)"));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxMode), _("Single Pass - Quality Quantizer (Constant)"));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxMode), _("Single Pass - Bitrate (Average)"));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxMode), _("Two Pass - Video Size"));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxMode), _("Two Pass - Average Bitrate"));
+
+  labelPageBitrate = gtk_label_new (_("Bitrate"));
+  gtk_widget_show (labelPageBitrate);
+  gtk_notebook_set_tab_label (GTK_NOTEBOOK (notebook1), gtk_notebook_get_nth_page (GTK_NOTEBOOK (notebook1), 0), labelPageBitrate);
+  gtk_misc_set_alignment (GTK_MISC (labelPageBitrate), 0, 0.5);
+
+  alignment15 = gtk_alignment_new (0.5, 0.5, 1, 1);
+  gtk_widget_show (alignment15);
+  gtk_container_add (GTK_CONTAINER (notebook1), alignment15);
+  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment15), 7, 7, 7, 7);
+
+  vbox5 = gtk_vbox_new (FALSE, 3);
+  gtk_widget_show (vbox5);
+  gtk_container_add (GTK_CONTAINER (alignment15), vbox5);
+
+  frame6 = gtk_frame_new (NULL);
+  gtk_widget_show (frame6);
+  gtk_box_pack_start (GTK_BOX (vbox5), frame6, FALSE, TRUE, 0);
+
+  alignment6 = gtk_alignment_new (0.5, 0.5, 1, 1);
+  gtk_widget_show (alignment6);
+  gtk_container_add (GTK_CONTAINER (frame6), alignment6);
+  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment6), 7, 4, 7, 7);
+
+  vbox6 = gtk_vbox_new (FALSE, 3);
+  gtk_widget_show (vbox6);
+  gtk_container_add (GTK_CONTAINER (alignment6), vbox6);
+
+  table7 = gtk_table_new (2, 3, FALSE);
+  gtk_widget_show (table7);
+  gtk_box_pack_start (GTK_BOX (vbox6), table7, FALSE, TRUE, 0);
+  gtk_table_set_row_spacings (GTK_TABLE (table7), 3);
+  gtk_table_set_col_spacings (GTK_TABLE (table7), 10);
+
+  labelPartitionDecision = gtk_label_new (_("Partition Decision"));
+  gtk_widget_show (labelPartitionDecision);
+  gtk_table_attach (GTK_TABLE (table7), labelPartitionDecision, 0, 1, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelPartitionDecision), 0, 0.5);
+
+  labelMethod = gtk_label_new (_("Method"));
+  gtk_widget_show (labelMethod);
+  gtk_table_attach (GTK_TABLE (table7), labelMethod, 0, 1, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelMethod), 0, 0.5);
+
+  comboboxPartitionDecision = gtk_combo_box_new_text ();
+  gtk_widget_show (comboboxPartitionDecision);
+  gtk_table_attach (GTK_TABLE (table7), comboboxPartitionDecision, 1, 3, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (GTK_FILL), 0, 0);
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxPartitionDecision), _("1  - Extremely Low (Fastest)"));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxPartitionDecision), _("2  - Very Low"));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxPartitionDecision), _("3  - Low"));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxPartitionDecision), _("4  - Medium"));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxPartitionDecision), _("5  - High (Default)"));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxPartitionDecision), _("6  - Very High"));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxPartitionDecision), _("6B - Very High (RDO on B-frames)"));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxPartitionDecision), _("7  - Ultra High"));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxPartitionDecision), _("7B - Ultra High (RDO on B-frames)"));
+
+  comboboxMethod = gtk_combo_box_new_text ();
+  gtk_widget_show (comboboxMethod);
+  gtk_table_attach (GTK_TABLE (table7), comboboxMethod, 1, 3, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (GTK_FILL), 0, 0);
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxMethod), _("Diamond Search"));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxMethod), _("Hexagonal Search"));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxMethod), _("Uneven Multi-hexagon"));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxMethod), _("Exhaustive Search"));
+
+  table11 = gtk_table_new (2, 3, FALSE);
+  gtk_widget_show (table11);
+  gtk_box_pack_start (GTK_BOX (vbox6), table11, TRUE, FALSE, 0);
+  gtk_table_set_row_spacings (GTK_TABLE (table11), 3);
+  gtk_table_set_col_spacings (GTK_TABLE (table11), 10);
+
+  labelMaxRefFrames = gtk_label_new (_("Max. Ref. Frames"));
+  gtk_widget_show (labelMaxRefFrames);
+  gtk_table_attach (GTK_TABLE (table11), labelMaxRefFrames, 0, 1, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelMaxRefFrames), 0, 0.5);
+
+  labelRange = gtk_label_new (_("Range"));
+  gtk_widget_show (labelRange);
+  gtk_table_attach (GTK_TABLE (table11), labelRange, 0, 1, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelRange), 0, 0.5);
+
+  spinbuttonRange_adj = gtk_adjustment_new (17, 0, 64, 1, 10, 10);
+  spinbuttonRange = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonRange_adj), 1, 0);
+  gtk_widget_show (spinbuttonRange);
+  gtk_table_attach (GTK_TABLE (table11), spinbuttonRange, 1, 2, 0, 1,
+                    (GtkAttachOptions) (GTK_SHRINK | GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, spinbuttonRange, _("Define how many pixels are analysed for motion estimation. The higher the range the more accurate the analysis but the slower the encoding time."), NULL);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonRange), TRUE);
+
+  spinbuttonMaxRefFrames_adj = gtk_adjustment_new (1, 0, 16, 1, 10, 10);
+  spinbuttonMaxRefFrames = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonMaxRefFrames_adj), 1, 0);
+  gtk_widget_show (spinbuttonMaxRefFrames);
+  gtk_table_attach (GTK_TABLE (table11), spinbuttonMaxRefFrames, 1, 2, 1, 2,
+                    (GtkAttachOptions) (GTK_SHRINK | GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, spinbuttonMaxRefFrames, _("Set how many previous frames can be referenced by a P/B-frame. Numbers above 5 do not seem to improve quality greatly. Numbers 3 to 5 are recommended."), NULL);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonMaxRefFrames), TRUE);
+
+  checkbuttonChromaME = gtk_check_button_new_with_mnemonic (_("Chroma ME"));
+  gtk_widget_show (checkbuttonChromaME);
+  gtk_table_attach (GTK_TABLE (table11), checkbuttonChromaME, 2, 3, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 30, 0);
+  gtk_tooltips_set_tip (tooltips, checkbuttonChromaME, _("Use color information for detecting motion to improve quality"), NULL);
+  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (checkbuttonChromaME), TRUE);
+
+  checkbuttonMixedRefs = gtk_check_button_new_with_mnemonic (_("Mixed Refs"));
+  gtk_widget_show (checkbuttonMixedRefs);
+  gtk_table_attach (GTK_TABLE (table11), checkbuttonMixedRefs, 2, 3, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 30, 0);
+  gtk_tooltips_set_tip (tooltips, checkbuttonMixedRefs, _("Calculate referencing individually based on each partition"), NULL);
+
+  hbox8 = gtk_hbox_new (TRUE, 0);
+  gtk_widget_show (hbox8);
+  gtk_box_pack_start (GTK_BOX (vbox6), hbox8, TRUE, TRUE, 0);
+
+  checkbuttonfastPSkip = gtk_check_button_new_with_mnemonic (_("Fast P-Skip"));
+  gtk_widget_show (checkbuttonfastPSkip);
+  gtk_box_pack_start (GTK_BOX (hbox8), checkbuttonfastPSkip, FALSE, FALSE, 0);
+  gtk_tooltips_set_tip (tooltips, checkbuttonfastPSkip, _("Early skip detection on P-frames to speedup encoding. Quality will be slightly reduced."), NULL);
+  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (checkbuttonfastPSkip), TRUE);
+
+  checkbuttonDCTDecimate = gtk_check_button_new_with_mnemonic (_("DCT Decimate"));
+  gtk_widget_show (checkbuttonDCTDecimate);
+  gtk_box_pack_start (GTK_BOX (hbox8), checkbuttonDCTDecimate, FALSE, FALSE, 0);
+  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (checkbuttonDCTDecimate), TRUE);
+
+  checkbuttoninterlaced = gtk_check_button_new_with_mnemonic (_("Interlaced"));
+  gtk_widget_show (checkbuttoninterlaced);
+  gtk_box_pack_start (GTK_BOX (hbox8), checkbuttoninterlaced, FALSE, FALSE, 0);
+  gtk_tooltips_set_tip (tooltips, checkbuttoninterlaced, _("Input video is interlaced"), NULL);
+
+  label24 = gtk_label_new (_("<b>Motion Estimation</b>"));
+  gtk_widget_show (label24);
+  gtk_frame_set_label_widget (GTK_FRAME (frame6), label24);
+  gtk_label_set_use_markup (GTK_LABEL (label24), TRUE);
+
+  frameSampleAR = gtk_frame_new (NULL);
+  gtk_widget_show (frameSampleAR);
+  gtk_box_pack_start (GTK_BOX (vbox5), frameSampleAR, FALSE, TRUE, 0);
+
+  alignment12 = gtk_alignment_new (0.5, 0.5, 1, 1);
+  gtk_widget_show (alignment12);
+  gtk_container_add (GTK_CONTAINER (frameSampleAR), alignment12);
+  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment12), 7, 7, 7, 7);
+
+  table35 = gtk_table_new (3, 2, FALSE);
+  gtk_widget_show (table35);
+  gtk_container_add (GTK_CONTAINER (alignment12), table35);
+  gtk_table_set_row_spacings (GTK_TABLE (table35), 3);
+  gtk_table_set_col_spacings (GTK_TABLE (table35), 10);
+
+  hbox12 = gtk_hbox_new (FALSE, 0);
+  gtk_widget_show (hbox12);
+  gtk_table_attach (GTK_TABLE (table35), hbox12, 1, 2, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (GTK_FILL), 0, 0);
+
+  entryAR_Num = gtk_entry_new ();
+  gtk_widget_show (entryAR_Num);
+  gtk_box_pack_start (GTK_BOX (hbox12), entryAR_Num, TRUE, TRUE, 0);
+  gtk_tooltips_set_tip (tooltips, entryAR_Num, _("Enforce the size of a decoded pixel decoded to a certain value. Set this to 1:1 for non-anamorphic video."), NULL);
+  gtk_entry_set_text (GTK_ENTRY (entryAR_Num), _("1"));
+  gtk_entry_set_width_chars (GTK_ENTRY (entryAR_Num), 4);
+
+  label53 = gtk_label_new (_(":"));
+  gtk_widget_show (label53);
+  gtk_box_pack_start (GTK_BOX (hbox12), label53, FALSE, FALSE, 3);
+
+  entryAR_Den = gtk_entry_new ();
+  gtk_widget_show (entryAR_Den);
+  gtk_box_pack_start (GTK_BOX (hbox12), entryAR_Den, TRUE, TRUE, 0);
+  gtk_tooltips_set_tip (tooltips, entryAR_Den, _("Enforce the size of a decoded pixel decoded to a certain value. Set this to 1:1 for non-anamorphic video."), NULL);
+  gtk_entry_set_text (GTK_ENTRY (entryAR_Den), _("1"));
+  gtk_entry_set_width_chars (GTK_ENTRY (entryAR_Den), 4);
+
+  radiobuttonCustomAR = gtk_radio_button_new_with_mnemonic (NULL, _("Custom"));
+  gtk_widget_show (radiobuttonCustomAR);
+  gtk_table_attach (GTK_TABLE (table35), radiobuttonCustomAR, 0, 1, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, radiobuttonCustomAR, _("Set a custom aspect ratio. The default 1:1 is recommended for most video."), NULL);
+  gtk_radio_button_set_group (GTK_RADIO_BUTTON (radiobuttonCustomAR), radiobuttonCustomAR_group);
+  radiobuttonCustomAR_group = gtk_radio_button_get_group (GTK_RADIO_BUTTON (radiobuttonCustomAR));
+  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (radiobuttonCustomAR), TRUE);
+
+  radiobuttonPredefinedAR = gtk_radio_button_new_with_mnemonic (NULL, _("Predefined Aspect Ratio"));
+  gtk_widget_show (radiobuttonPredefinedAR);
+  gtk_table_attach (GTK_TABLE (table35), radiobuttonPredefinedAR, 0, 1, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, radiobuttonPredefinedAR, _("Set a common predefined aspect ratio"), NULL);
+  gtk_radio_button_set_group (GTK_RADIO_BUTTON (radiobuttonPredefinedAR), radiobuttonCustomAR_group);
+  radiobuttonCustomAR_group = gtk_radio_button_get_group (GTK_RADIO_BUTTON (radiobuttonPredefinedAR));
+
+  radiobuttonAsInputAR = gtk_radio_button_new_with_mnemonic (NULL, _("As Input"));
+  gtk_widget_show (radiobuttonAsInputAR);
+  gtk_table_attach (GTK_TABLE (table35), radiobuttonAsInputAR, 0, 1, 2, 3,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_radio_button_set_group (GTK_RADIO_BUTTON (radiobuttonAsInputAR), radiobuttonCustomAR_group);
+  radiobuttonCustomAR_group = gtk_radio_button_get_group (GTK_RADIO_BUTTON (radiobuttonAsInputAR));
+
+  label40 = gtk_label_new ("1:1 (1:1)");
+  gtk_widget_show (label40);
+  gtk_table_attach (GTK_TABLE (table35), label40, 1, 2, 2, 3,
+                    (GtkAttachOptions) (0),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (label40), 0, 0.5);
+
+  comboboxentry1 = gtk_combo_box_new_text ();
+  gtk_widget_show (comboboxentry1);
+  gtk_table_attach (GTK_TABLE (table35), comboboxentry1, 1, 2, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (GTK_FILL), 0, 0);
+
+  label39 = gtk_label_new (_("<b>Sample Aspect Ratio</b>"));
+  gtk_widget_show (label39);
+  gtk_frame_set_label_widget (GTK_FRAME (frameSampleAR), label39);
+  gtk_label_set_use_markup (GTK_LABEL (label39), TRUE);
+
+  frame7 = gtk_frame_new (NULL);
+  gtk_widget_show (frame7);
+  gtk_box_pack_start (GTK_BOX (vbox5), frame7, FALSE, TRUE, 0);
+
+  alignment7 = gtk_alignment_new (0.5, 0.5, 1, 1);
+  gtk_widget_show (alignment7);
+  gtk_container_add (GTK_CONTAINER (frame7), alignment7);
+  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment7), 7, 7, 7, 7);
+
+  vbox7 = gtk_vbox_new (FALSE, 3);
+  gtk_widget_show (vbox7);
+  gtk_container_add (GTK_CONTAINER (alignment7), vbox7);
+
+  alignment21 = gtk_alignment_new (0.5, 0.5, 1, 1);
+  gtk_widget_show (alignment21);
+  gtk_box_pack_start (GTK_BOX (vbox7), alignment21, TRUE, TRUE, 0);
+  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment21), 0, 3, 0, 0);
+
+  hbox2 = gtk_hbox_new (FALSE, 17);
+  gtk_widget_show (hbox2);
+  gtk_container_add (GTK_CONTAINER (alignment21), hbox2);
+
+  checkbuttonCABAC = gtk_check_button_new_with_mnemonic (_("CABAC"));
+  gtk_widget_show (checkbuttonCABAC);
+  gtk_box_pack_start (GTK_BOX (hbox2), checkbuttonCABAC, FALSE, FALSE, 0);
+  gtk_tooltips_set_tip (tooltips, checkbuttonCABAC, _("Lossless compression technique that reduces bitrate by approximately 10%. Increases encoding and decoding time."), NULL);
+  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (checkbuttonCABAC), TRUE);
+
+  hbox7 = gtk_hbox_new (FALSE, 10);
+  gtk_widget_show (hbox7);
+  gtk_box_pack_start (GTK_BOX (hbox2), hbox7, FALSE, FALSE, 0);
+
+  labelTrellis = gtk_label_new (_("Trellis"));
+  gtk_widget_show (labelTrellis);
+  gtk_box_pack_start (GTK_BOX (hbox7), labelTrellis, FALSE, FALSE, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelTrellis), 0, 0.5);
+
+  spinbuttonTrellis_adj = gtk_adjustment_new (0, 0, 2, 1, 10, 10);
+  spinbuttonTrellis = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonTrellis_adj), 1, 0);
+  gtk_widget_show (spinbuttonTrellis);
+  gtk_box_pack_start (GTK_BOX (hbox7), spinbuttonTrellis, FALSE, FALSE, 0);
+  gtk_tooltips_set_tip (tooltips, spinbuttonTrellis, _("Use Trellis Rate Distortion Optimisation to find optimal encoding for each block. Level 0 equals disabled, level 1 equals normal and level 2 equals high."), NULL);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonTrellis), TRUE);
+
+  hbox11 = gtk_hbox_new (FALSE, 10);
+  gtk_widget_show (hbox11);
+  gtk_box_pack_start (GTK_BOX (hbox2), hbox11, FALSE, FALSE, 2);
+
+  labelNoiseReduction = gtk_label_new (_("Noise Reduction"));
+  gtk_widget_show (labelNoiseReduction);
+  gtk_box_pack_start (GTK_BOX (hbox11), labelNoiseReduction, FALSE, FALSE, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelNoiseReduction), 0, 0.5);
+
+  spinbuttonNoiseReduction_adj = gtk_adjustment_new (0, 0, 1000000000, 1, 10, 10);
+  spinbuttonNoiseReduction = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonNoiseReduction_adj), 1, 0);
+  gtk_widget_show (spinbuttonNoiseReduction);
+  gtk_box_pack_start (GTK_BOX (hbox11), spinbuttonNoiseReduction, FALSE, FALSE, 0);
+  gtk_tooltips_set_tip (tooltips, spinbuttonNoiseReduction, _("Set the amount of noise reduction"), NULL);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonNoiseReduction), TRUE);
+
+  hbox3 = gtk_hbox_new (FALSE, 10);
+  gtk_widget_show (hbox3);
+  gtk_box_pack_start (GTK_BOX (vbox7), hbox3, TRUE, TRUE, 0);
+
+  checkbuttonDeblockingFilter = gtk_check_button_new_with_mnemonic (_("Deblocking Filter"));
+  gtk_widget_show (checkbuttonDeblockingFilter);
+  gtk_box_pack_start (GTK_BOX (hbox3), checkbuttonDeblockingFilter, FALSE, FALSE, 0);
+  gtk_tooltips_set_tip (tooltips, checkbuttonDeblockingFilter, _("Enable in-loop deblocking to filter the video"), NULL);
+  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (checkbuttonDeblockingFilter), TRUE);
+
+  table8 = gtk_table_new (2, 2, FALSE);
+  gtk_widget_show (table8);
+  gtk_box_pack_start (GTK_BOX (hbox3), table8, TRUE, TRUE, 0);
+  gtk_table_set_row_spacings (GTK_TABLE (table8), 3);
+  gtk_table_set_col_spacings (GTK_TABLE (table8), 10);
+
+  labelThreshold = gtk_label_new (_("Threshold"));
+  gtk_widget_show (labelThreshold);
+  gtk_table_attach (GTK_TABLE (table8), labelThreshold, 0, 1, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_label_set_use_markup (GTK_LABEL (labelThreshold), TRUE);
+  gtk_misc_set_alignment (GTK_MISC (labelThreshold), 0, 0.5);
+
+  labelStrength = gtk_label_new (_("Strength"));
+  gtk_widget_show (labelStrength);
+  gtk_table_attach (GTK_TABLE (table8), labelStrength, 0, 1, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_label_set_use_markup (GTK_LABEL (labelStrength), TRUE);
+  gtk_misc_set_alignment (GTK_MISC (labelStrength), 0, 0.5);
+
+  spinbuttonThreshold_adj = gtk_adjustment_new (0, -6, 6, 1, 10, 10);
+  spinbuttonThreshold = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonThreshold_adj), 1, 0);
+  gtk_widget_show (spinbuttonThreshold);
+  gtk_table_attach (GTK_TABLE (table8), spinbuttonThreshold, 1, 2, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, spinbuttonThreshold, _("Threshold for block detection. Positive values will detect more blocks, negative values will detect less."), NULL);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonThreshold), TRUE);
+
+  spinbuttonStrength_adj = gtk_adjustment_new (0, -6, 6, 1, 10, 10);
+  spinbuttonStrength = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonStrength_adj), 1, 0);
+  gtk_widget_show (spinbuttonStrength);
+  gtk_table_attach (GTK_TABLE (table8), spinbuttonStrength, 1, 2, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, spinbuttonStrength, _("Positive values will soften the video, negative values will sharpen"), NULL);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonStrength), TRUE);
+
+  label25 = gtk_label_new (_("<b>Misc. Options</b>"));
+  gtk_widget_show (label25);
+  gtk_frame_set_label_widget (GTK_FRAME (frame7), label25);
+  gtk_label_set_use_markup (GTK_LABEL (label25), TRUE);
+
+  labelPageMotion_More = gtk_label_new (_("Motion & Misc"));
+  gtk_widget_show (labelPageMotion_More);
+  gtk_notebook_set_tab_label (GTK_NOTEBOOK (notebook1), gtk_notebook_get_nth_page (GTK_NOTEBOOK (notebook1), 1), labelPageMotion_More);
+
+  alignment16 = gtk_alignment_new (0.5, 0.5, 1, 1);
+  gtk_widget_show (alignment16);
+  gtk_container_add (GTK_CONTAINER (notebook1), alignment16);
+  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment16), 7, 7, 7, 7);
+
+  vbox2 = gtk_vbox_new (FALSE, 3);
+  gtk_widget_show (vbox2);
+  gtk_container_add (GTK_CONTAINER (alignment16), vbox2);
+
+  frame4 = gtk_frame_new (NULL);
+  gtk_widget_show (frame4);
+  gtk_box_pack_start (GTK_BOX (vbox2), frame4, FALSE, TRUE, 0);
+
+  alignment4 = gtk_alignment_new (0.5, 0.5, 1, 1);
+  gtk_widget_show (alignment4);
+  gtk_container_add (GTK_CONTAINER (frame4), alignment4);
+  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment4), 7, 7, 7, 7);
+
+  vbox3 = gtk_vbox_new (FALSE, 3);
+  gtk_widget_show (vbox3);
+  gtk_container_add (GTK_CONTAINER (alignment4), vbox3);
+
+  checkbutton8x8 = gtk_check_button_new_with_mnemonic (_("8x8 Transform"));
+  gtk_widget_show (checkbutton8x8);
+  gtk_box_pack_start (GTK_BOX (vbox3), checkbutton8x8, FALSE, FALSE, 0);
+  gtk_tooltips_set_tip (tooltips, checkbutton8x8, _("General block breakdown transformation"), NULL);
+  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (checkbutton8x8), TRUE);
+
+  checkbutton8x8P = gtk_check_button_new_with_mnemonic (_("8x8, 8x16 and 16x8 P-frame search"));
+  gtk_widget_show (checkbutton8x8P);
+  gtk_box_pack_start (GTK_BOX (vbox3), checkbutton8x8P, FALSE, FALSE, 0);
+  gtk_tooltips_set_tip (tooltips, checkbutton8x8P, _("Improve the P-frame quality"), NULL);
+  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (checkbutton8x8P), TRUE);
+
+  checkbutton8x8B = gtk_check_button_new_with_mnemonic (_("8x8, 8x16 and 16x8 B-frame search"));
+  gtk_widget_show (checkbutton8x8B);
+  gtk_box_pack_start (GTK_BOX (vbox3), checkbutton8x8B, FALSE, FALSE, 0);
+  gtk_tooltips_set_tip (tooltips, checkbutton8x8B, _("Improve the B-frame quality"), NULL);
+  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (checkbutton8x8B), TRUE);
+
+  checkbutton4x4 = gtk_check_button_new_with_mnemonic (_("4x4, 4x8 and 8x4 P-frame search"));
+  gtk_widget_show (checkbutton4x4);
+  gtk_box_pack_start (GTK_BOX (vbox3), checkbutton4x4, FALSE, FALSE, 0);
+  gtk_tooltips_set_tip (tooltips, checkbutton4x4, _("Further improve the P-frame quality"), NULL);
+
+  checkbutton8x8I = gtk_check_button_new_with_mnemonic (_("8x8 Intra search"));
+  gtk_widget_show (checkbutton8x8I);
+  gtk_box_pack_start (GTK_BOX (vbox3), checkbutton8x8I, FALSE, FALSE, 0);
+  gtk_tooltips_set_tip (tooltips, checkbutton8x8I, _("Enable DCT Intra block search to improve quality"), NULL);
+  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (checkbutton8x8I), TRUE);
+
+  checkbutton4x4I = gtk_check_button_new_with_mnemonic (_("4x4 Intra search"));
+  gtk_widget_show (checkbutton4x4I);
+  gtk_box_pack_start (GTK_BOX (vbox3), checkbutton4x4I, FALSE, FALSE, 0);
+  gtk_tooltips_set_tip (tooltips, checkbutton4x4I, _("Further enable DCT Intra block search to improve quality"), NULL);
+  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (checkbutton4x4I), TRUE);
+
+  label19 = gtk_label_new (_("<b>Partition Macroblocks</b>"));
+  gtk_widget_show (label19);
+  gtk_frame_set_label_widget (GTK_FRAME (frame4), label19);
+  gtk_label_set_use_markup (GTK_LABEL (label19), TRUE);
+
+  frame5 = gtk_frame_new (NULL);
+  gtk_widget_show (frame5);
+  gtk_box_pack_start (GTK_BOX (vbox2), frame5, FALSE, TRUE, 0);
+
+  alignment5 = gtk_alignment_new (0.5, 0.5, 1, 1);
+  gtk_widget_show (alignment5);
+  gtk_container_add (GTK_CONTAINER (frame5), alignment5);
+  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment5), 7, 7, 7, 7);
+
+  vbox4 = gtk_vbox_new (FALSE, 3);
+  gtk_widget_show (vbox4);
+  gtk_container_add (GTK_CONTAINER (alignment5), vbox4);
+
+  table5 = gtk_table_new (2, 2, FALSE);
+  gtk_widget_show (table5);
+  gtk_box_pack_start (GTK_BOX (vbox4), table5, TRUE, TRUE, 0);
+  gtk_table_set_row_spacings (GTK_TABLE (table5), 3);
+  gtk_table_set_col_spacings (GTK_TABLE (table5), 10);
+
+  labelBias = gtk_label_new (_("Bias"));
+  gtk_widget_show (labelBias);
+  gtk_table_attach (GTK_TABLE (table5), labelBias, 0, 1, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelBias), 0, 0.5);
+
+  labelMaxConsecutive = gtk_label_new (_("Max Consecutive"));
+  gtk_widget_show (labelMaxConsecutive);
+  gtk_table_attach (GTK_TABLE (table5), labelMaxConsecutive, 0, 1, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelMaxConsecutive), 0, 0.5);
+
+  spinbuttonBias_adj = gtk_adjustment_new (0, -100, 100, 1, 10, 10);
+  spinbuttonBias = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonBias_adj), 1, 0);
+  gtk_widget_show (spinbuttonBias);
+  gtk_table_attach (GTK_TABLE (table5), spinbuttonBias, 1, 2, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, spinbuttonBias, _("Increase / decrease probability for how often B-frames are used. It will not violate the maximum consecutive frame limit."), NULL);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonBias), TRUE);
+
+  spinbuttonMaxBFrame_adj = gtk_adjustment_new (3, 0, 15, 1, 10, 10);
+  spinbuttonMaxBFrame = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonMaxBFrame_adj), 1, 0);
+  gtk_widget_show (spinbuttonMaxBFrame);
+  gtk_table_attach (GTK_TABLE (table5), spinbuttonMaxBFrame, 1, 2, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, spinbuttonMaxBFrame, _("Set the maximum number of consecutive B-frames. This defines how many duplicate frames can be dropped. Numbers 2 to 5 are recommended. This greatly improves the use of bitrate and quality."), NULL);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonMaxBFrame), TRUE);
+
+  alignment20 = gtk_alignment_new (0.5, 0.5, 1, 1);
+  gtk_widget_show (alignment20);
+  gtk_box_pack_start (GTK_BOX (vbox4), alignment20, TRUE, TRUE, 0);
+  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment20), 3, 3, 0, 0);
+
+  table6 = gtk_table_new (2, 2, FALSE);
+  gtk_widget_show (table6);
+  gtk_container_add (GTK_CONTAINER (alignment20), table6);
+  gtk_table_set_row_spacings (GTK_TABLE (table6), 3);
+  gtk_table_set_col_spacings (GTK_TABLE (table6), 10);
+
+  checkbuttonBidirME = gtk_check_button_new_with_mnemonic (_("Bidirectional ME"));
+  gtk_widget_show (checkbuttonBidirME);
+  gtk_table_attach (GTK_TABLE (table6), checkbuttonBidirME, 1, 2, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, checkbuttonBidirME, _("Optimise both motion vectors in B-frames. This will improve quality but take more time for encoding."), NULL);
+
+  checkbuttonWeighted = gtk_check_button_new_with_mnemonic (_("Weighted Biprediction"));
+  gtk_widget_show (checkbuttonWeighted);
+  gtk_table_attach (GTK_TABLE (table6), checkbuttonWeighted, 1, 2, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, checkbuttonWeighted, _("Enables weighting of B-frames to help fades"), NULL);
+  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (checkbuttonWeighted), TRUE);
+
+  checkbuttonAdaptative = gtk_check_button_new_with_mnemonic (_("Adaptative DCT"));
+  gtk_widget_show (checkbuttonAdaptative);
+  gtk_table_attach (GTK_TABLE (table6), checkbuttonAdaptative, 0, 1, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, checkbuttonAdaptative, _("Use fewer B-frames if needed. This is always recommended. If not enabled, the codec will always use the maximum number of consecutive B-frames."), NULL);
+  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (checkbuttonAdaptative), TRUE);
+
+  checkbuttonBasReference = gtk_check_button_new_with_mnemonic (_("Use as Reference"));
+  gtk_widget_show (checkbuttonBasReference);
+  gtk_table_attach (GTK_TABLE (table6), checkbuttonBasReference, 0, 1, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, checkbuttonBasReference, _("Allow B-frames to make references non-linearly to another B-frame (instead of creating a duplicate copy)"), NULL);
+
+  hbox1 = gtk_hbox_new (FALSE, 10);
+  gtk_widget_show (hbox1);
+  gtk_box_pack_start (GTK_BOX (vbox4), hbox1, TRUE, TRUE, 0);
+
+  labelBFrameDirectMode = gtk_label_new (_("B-Frame Direct Mode"));
+  gtk_widget_show (labelBFrameDirectMode);
+  gtk_box_pack_start (GTK_BOX (hbox1), labelBFrameDirectMode, FALSE, TRUE, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelBFrameDirectMode), 0, 0.5);
+
+  comboboxDirectMode = gtk_combo_box_new_text ();
+  gtk_widget_show (comboboxDirectMode);
+  gtk_box_pack_start (GTK_BOX (hbox1), comboboxDirectMode, FALSE, TRUE, 0);
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxDirectMode), _("None"));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxDirectMode), _("Spatial"));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxDirectMode), _("Temporal"));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxDirectMode), _("Auto"));
+
+  label20 = gtk_label_new (_("<b>B-Frames</b>"));
+  gtk_widget_show (label20);
+  gtk_frame_set_label_widget (GTK_FRAME (frame5), label20);
+  gtk_label_set_use_markup (GTK_LABEL (label20), TRUE);
+
+  labelPagePartion_Frame = gtk_label_new (_("Partitions & Frames"));
+  gtk_widget_show (labelPagePartion_Frame);
+  gtk_notebook_set_tab_label (GTK_NOTEBOOK (notebook1), gtk_notebook_get_nth_page (GTK_NOTEBOOK (notebook1), 2), labelPagePartion_Frame);
+
+  alignment17 = gtk_alignment_new (0.5, 0.5, 1, 1);
+  gtk_widget_show (alignment17);
+  gtk_container_add (GTK_CONTAINER (notebook1), alignment17);
+  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment17), 7, 7, 7, 7);
+
+  vbox1 = gtk_vbox_new (FALSE, 3);
+  gtk_widget_show (vbox1);
+  gtk_container_add (GTK_CONTAINER (alignment17), vbox1);
+
+  frame1 = gtk_frame_new (NULL);
+  gtk_widget_show (frame1);
+  gtk_box_pack_start (GTK_BOX (vbox1), frame1, FALSE, TRUE, 1);
+
+  alignment1 = gtk_alignment_new (0.5, 0.5, 1, 1);
+  gtk_widget_show (alignment1);
+  gtk_container_add (GTK_CONTAINER (frame1), alignment1);
+  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment1), 7, 7, 7, 7);
+
+  table2 = gtk_table_new (3, 2, FALSE);
+  gtk_widget_show (table2);
+  gtk_container_add (GTK_CONTAINER (alignment1), table2);
+  gtk_table_set_row_spacings (GTK_TABLE (table2), 3);
+  gtk_table_set_col_spacings (GTK_TABLE (table2), 10);
+
+  spinbuttonKeyframeBoost_adj = gtk_adjustment_new (40, 0, 100, 1, 10, 10);
+  spinbuttonKeyframeBoost = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonKeyframeBoost_adj), 1, 0);
+  gtk_widget_show (spinbuttonKeyframeBoost);
+  gtk_table_attach (GTK_TABLE (table2), spinbuttonKeyframeBoost, 1, 2, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_widget_set_size_request (spinbuttonKeyframeBoost, 115, -1);
+  gtk_tooltips_set_tip (tooltips, spinbuttonKeyframeBoost, _("Set how much \"bitrate bonus\" a keyframe can get"), NULL);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonKeyframeBoost), TRUE);
+
+  spinbuttonBframeReduction_adj = gtk_adjustment_new (30, 0, 100, 1, 10, 10);
+  spinbuttonBframeReduction = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonBframeReduction_adj), 1, 0);
+  gtk_widget_show (spinbuttonBframeReduction);
+  gtk_table_attach (GTK_TABLE (table2), spinbuttonBframeReduction, 1, 2, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, spinbuttonBframeReduction, _("Set how much bitrate is deducted from a B-frame as compared to the previous P-frame"), NULL);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonBframeReduction), TRUE);
+
+  spinbuttonBitrateVariability_adj = gtk_adjustment_new (60, 0, 100, 1, 10, 10);
+  spinbuttonBitrateVariability = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonBitrateVariability_adj), 1, 0);
+  gtk_widget_show (spinbuttonBitrateVariability);
+  gtk_table_attach (GTK_TABLE (table2), spinbuttonBitrateVariability, 1, 2, 2, 3,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, spinbuttonBitrateVariability, _("Define how much the bitrate can fluctuate over the entire video. 0% results in a constant bitrate stream, while 100% results in a pure quality based bitrate stream."), NULL);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonBitrateVariability), TRUE);
+
+  labelKeyframeboost = gtk_label_new (_("Keyframe Boost (%)"));
+  gtk_widget_show (labelKeyframeboost);
+  gtk_table_attach (GTK_TABLE (table2), labelKeyframeboost, 0, 1, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelKeyframeboost), 0, 0.5);
+
+  label11 = gtk_label_new (_("B-frame Reduction (%)"));
+  gtk_widget_show (label11);
+  gtk_table_attach (GTK_TABLE (table2), label11, 0, 1, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (label11), 0, 0.5);
+
+  label12 = gtk_label_new (_("Bitrate Variability (%)"));
+  gtk_widget_show (label12);
+  gtk_table_attach (GTK_TABLE (table2), label12, 0, 1, 2, 3,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (label12), 0, 0.5);
+
+  label7 = gtk_label_new (_("<b>Bitrate</b>"));
+  gtk_widget_show (label7);
+  gtk_frame_set_label_widget (GTK_FRAME (frame1), label7);
+  gtk_label_set_use_markup (GTK_LABEL (label7), TRUE);
+
+  frame2 = gtk_frame_new (NULL);
+  gtk_widget_show (frame2);
+  gtk_box_pack_start (GTK_BOX (vbox1), frame2, FALSE, TRUE, 1);
+
+  alignment2 = gtk_alignment_new (0.5, 0.5, 1, 1);
+  gtk_widget_show (alignment2);
+  gtk_container_add (GTK_CONTAINER (frame2), alignment2);
+  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment2), 7, 7, 7, 7);
+
+  table3 = gtk_table_new (3, 2, FALSE);
+  gtk_widget_show (table3);
+  gtk_container_add (GTK_CONTAINER (alignment2), table3);
+  gtk_table_set_row_spacings (GTK_TABLE (table3), 3);
+  gtk_table_set_col_spacings (GTK_TABLE (table3), 20);
+
+  label13 = gtk_label_new (_("Min QP"));
+  gtk_widget_show (label13);
+  gtk_table_attach (GTK_TABLE (table3), label13, 0, 1, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (label13), 0, 0.5);
+
+  label14 = gtk_label_new (_("Max QP"));
+  gtk_widget_show (label14);
+  gtk_table_attach (GTK_TABLE (table3), label14, 0, 1, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (label14), 0, 0.5);
+
+  label15 = gtk_label_new (_("Max QP Step"));
+  gtk_widget_show (label15);
+  gtk_table_attach (GTK_TABLE (table3), label15, 0, 1, 2, 3,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (label15), 0, 0.5);
+
+  spinbuttonMinQp_adj = gtk_adjustment_new (10, 10, 51, 1, 10, 10);
+  spinbuttonMinQp = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonMinQp_adj), 1, 0);
+  gtk_widget_show (spinbuttonMinQp);
+  gtk_table_attach (GTK_TABLE (table3), spinbuttonMinQp, 1, 2, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_widget_set_size_request (spinbuttonMinQp, 54, -1);
+  gtk_tooltips_set_tip (tooltips, spinbuttonMinQp, _("Enforce a minimum quantizer level"), NULL);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonMinQp), TRUE);
+
+  spinbuttonMaxQp_adj = gtk_adjustment_new (51, 10, 51, 1, 10, 10);
+  spinbuttonMaxQp = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonMaxQp_adj), 1, 0);
+  gtk_widget_show (spinbuttonMaxQp);
+  gtk_table_attach (GTK_TABLE (table3), spinbuttonMaxQp, 1, 2, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, spinbuttonMaxQp, _("Enforce a maximum quantizer level"), NULL);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonMaxQp), TRUE);
+
+  spinbuttonQpStep_adj = gtk_adjustment_new (4, 0, 10, 1, 10, 10);
+  spinbuttonQpStep = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonQpStep_adj), 1, 0);
+  gtk_widget_show (spinbuttonQpStep);
+  gtk_table_attach (GTK_TABLE (table3), spinbuttonQpStep, 1, 2, 2, 3,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, spinbuttonQpStep, _("Define how much the quantizer rate can change between two consecutive frames"), NULL);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonQpStep), TRUE);
+
+  label8 = gtk_label_new (_("<b>Quantization Limits</b>"));
+  gtk_widget_show (label8);
+  gtk_frame_set_label_widget (GTK_FRAME (frame2), label8);
+  gtk_label_set_use_markup (GTK_LABEL (label8), TRUE);
+
+  frame3 = gtk_frame_new (NULL);
+  gtk_widget_show (frame3);
+  gtk_box_pack_start (GTK_BOX (vbox1), frame3, FALSE, TRUE, 1);
+
+  alignment3 = gtk_alignment_new (0.5, 0.5, 1, 1);
+  gtk_widget_show (alignment3);
+  gtk_container_add (GTK_CONTAINER (frame3), alignment3);
+  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment3), 7, 7, 7, 7);
+
+  table4 = gtk_table_new (3, 2, FALSE);
+  gtk_widget_show (table4);
+  gtk_container_add (GTK_CONTAINER (alignment3), table4);
+  gtk_table_set_row_spacings (GTK_TABLE (table4), 3);
+  gtk_table_set_col_spacings (GTK_TABLE (table4), 10);
+
+  spinbuttonSceneCut_adj = gtk_adjustment_new (40, 0, 100, 1, 10, 10);
+  spinbuttonSceneCut = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonSceneCut_adj), 1, 0);
+  gtk_widget_show (spinbuttonSceneCut);
+  gtk_table_attach (GTK_TABLE (table4), spinbuttonSceneCut, 1, 2, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_widget_set_size_request (spinbuttonSceneCut, 115, -1);
+  gtk_tooltips_set_tip (tooltips, spinbuttonSceneCut, _("Increase / decrease sensitivity for detecting scene changes. Improves I-frame usage and quality."), NULL);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonSceneCut), TRUE);
+
+  label16 = gtk_label_new (_("Scene Cut Threshold"));
+  gtk_widget_show (label16);
+  gtk_table_attach (GTK_TABLE (table4), label16, 0, 1, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (label16), 0, 0.5);
+
+  label17 = gtk_label_new (_("Min IDR Frame Interval"));
+  gtk_widget_show (label17);
+  gtk_table_attach (GTK_TABLE (table4), label17, 0, 1, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (label17), 0, 0.5);
+
+  spinbuttonMinIdr_adj = gtk_adjustment_new (25, 0, 100, 1, 10, 10);
+  spinbuttonMinIdr = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonMinIdr_adj), 1, 0);
+  gtk_widget_show (spinbuttonMinIdr);
+  gtk_table_attach (GTK_TABLE (table4), spinbuttonMinIdr, 1, 2, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, spinbuttonMinIdr, _("Set minimum frame interval between IDR frames. Defines the minimum amount a frame can be reused and referenced by other frames before a new IDR frame is established."), NULL);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonMinIdr), TRUE);
+
+  spinbuttonMaxIdr_adj = gtk_adjustment_new (250, 1, 1000, 1, 10, 10);
+  spinbuttonMaxIdr = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonMaxIdr_adj), 1, 0);
+  gtk_widget_show (spinbuttonMaxIdr);
+  gtk_table_attach (GTK_TABLE (table4), spinbuttonMaxIdr, 1, 2, 2, 3,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, spinbuttonMaxIdr, _("Set maximum frame interval between IDR frames. Defines the maximum amount a frame can be reused and referenced by other frames before a new IDR frame is established."), NULL);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonMaxIdr), TRUE);
+
+  label18 = gtk_label_new (_("Max IDR Frame Interval"));
+  gtk_widget_show (label18);
+  gtk_table_attach (GTK_TABLE (table4), label18, 0, 1, 2, 3,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (label18), 0, 0.5);
+
+  labelMoreEncodingSettings = gtk_label_new (_("<b>More Rate Settings</b>"));
+  gtk_widget_show (labelMoreEncodingSettings);
+  gtk_frame_set_label_widget (GTK_FRAME (frame3), labelMoreEncodingSettings);
+  gtk_label_set_use_markup (GTK_LABEL (labelMoreEncodingSettings), TRUE);
+
+  frameVideoBufferVerifier = gtk_frame_new (NULL);
+  gtk_widget_show (frameVideoBufferVerifier);
+  gtk_box_pack_start (GTK_BOX (vbox1), frameVideoBufferVerifier, FALSE, TRUE, 0);
+
+  alignment11 = gtk_alignment_new (0.5, 0.5, 1, 1);
+  gtk_widget_show (alignment11);
+  gtk_container_add (GTK_CONTAINER (frameVideoBufferVerifier), alignment11);
+  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment11), 7, 7, 7, 7);
+
+  table12 = gtk_table_new (3, 2, FALSE);
+  gtk_widget_show (table12);
+  gtk_container_add (GTK_CONTAINER (alignment11), table12);
+  gtk_table_set_row_spacings (GTK_TABLE (table12), 3);
+  gtk_table_set_col_spacings (GTK_TABLE (table12), 10);
+
+  labelVBVBufferSize = gtk_label_new (_("VBV Buffer Size"));
+  gtk_widget_show (labelVBVBufferSize);
+  gtk_table_attach (GTK_TABLE (table12), labelVBVBufferSize, 0, 1, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelVBVBufferSize), 0, 0.5);
+
+  labelVBVInitialbuffer = gtk_label_new (_("Initial VBV Buffer (%)"));
+  gtk_widget_show (labelVBVInitialbuffer);
+  gtk_table_attach (GTK_TABLE (table12), labelVBVInitialbuffer, 0, 1, 2, 3,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelVBVInitialbuffer), 0, 0.5);
+
+  labelVBVMaximumBitrate = gtk_label_new (_("Maximum Local Bitrate"));
+  gtk_widget_show (labelVBVMaximumBitrate);
+  gtk_table_attach (GTK_TABLE (table12), labelVBVMaximumBitrate, 0, 1, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelVBVMaximumBitrate), 0, 0.5);
+
+  spinbuttonvbv_max_bitrate_adj = gtk_adjustment_new (0, 0, 99999, 1, 10, 10);
+  spinbuttonvbv_max_bitrate = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonvbv_max_bitrate_adj), 1, 0);
+  gtk_widget_show (spinbuttonvbv_max_bitrate);
+  gtk_table_attach (GTK_TABLE (table12), spinbuttonvbv_max_bitrate, 1, 2, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonvbv_max_bitrate), TRUE);
+
+  spinbuttonvbv_buffer_size_adj = gtk_adjustment_new (0, 0, 99999, 1, 10, 10);
+  spinbuttonvbv_buffer_size = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonvbv_buffer_size_adj), 1, 0);
+  gtk_widget_show (spinbuttonvbv_buffer_size);
+  gtk_table_attach (GTK_TABLE (table12), spinbuttonvbv_buffer_size, 1, 2, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonvbv_buffer_size), TRUE);
+
+  spinbuttonvbv_buffer_init_adj = gtk_adjustment_new (90, 0, 100, 1, 10, 10);
+  spinbuttonvbv_buffer_init = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonvbv_buffer_init_adj), 1, 0);
+  gtk_widget_show (spinbuttonvbv_buffer_init);
+  gtk_table_attach (GTK_TABLE (table12), spinbuttonvbv_buffer_init, 1, 2, 2, 3,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonvbv_buffer_init), TRUE);
+
+  labelVideoBufferVerifier = gtk_label_new (_("<b>Video Buffer Verifier</b>"));
+  gtk_widget_show (labelVideoBufferVerifier);
+  gtk_frame_set_label_widget (GTK_FRAME (frameVideoBufferVerifier), labelVideoBufferVerifier);
+  gtk_label_set_use_markup (GTK_LABEL (labelVideoBufferVerifier), TRUE);
+
+  labelPageRateControl = gtk_label_new (_("Rate Control"));
+  gtk_widget_show (labelPageRateControl);
+  gtk_notebook_set_tab_label (GTK_NOTEBOOK (notebook1), gtk_notebook_get_nth_page (GTK_NOTEBOOK (notebook1), 3), labelPageRateControl);
+
+  alignment18 = gtk_alignment_new (0.5, 0.5, 1, 1);
+  gtk_widget_show (alignment18);
+  gtk_container_add (GTK_CONTAINER (notebook1), alignment18);
+  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment18), 7, 7, 7, 7);
+
+  vbox8 = gtk_vbox_new (FALSE, 3);
+  gtk_widget_show (vbox8);
+  gtk_container_add (GTK_CONTAINER (alignment18), vbox8);
+
+  frame10 = gtk_frame_new (NULL);
+  gtk_widget_show (frame10);
+  gtk_box_pack_start (GTK_BOX (vbox8), frame10, FALSE, TRUE, 0);
+
+  alignment10 = gtk_alignment_new (0.5, 0.5, 1, 1);
+  gtk_widget_show (alignment10);
+  gtk_container_add (GTK_CONTAINER (frame10), alignment10);
+  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment10), 7, 7, 7, 7);
+
+  table15 = gtk_table_new (4, 2, FALSE);
+  gtk_widget_show (table15);
+  gtk_container_add (GTK_CONTAINER (alignment10), table15);
+  gtk_table_set_row_spacings (GTK_TABLE (table15), 3);
+  gtk_table_set_col_spacings (GTK_TABLE (table15), 10);
+
+  labelBitrateVariance = gtk_label_new (_("Bitrate Variance"));
+  gtk_widget_show (labelBitrateVariance);
+  gtk_table_attach (GTK_TABLE (table15), labelBitrateVariance, 0, 1, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelBitrateVariance), 0, 0.5);
+
+  spinbuttonBitrateVariance_adj = gtk_adjustment_new (1, 0, 1, 0.10000000149, 10, 10);
+  spinbuttonBitrateVariance = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonBitrateVariance_adj), 0.10000000149, 1);
+  gtk_widget_show (spinbuttonBitrateVariance);
+  gtk_table_attach (GTK_TABLE (table15), spinbuttonBitrateVariance, 1, 2, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, spinbuttonBitrateVariance, _("Allowed variance of average bitrate. Lower values mean less variance. Higher values mean more variance."), NULL);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonBitrateVariance), TRUE);
+
+  spinbuttonQuantizerCompression_adj = gtk_adjustment_new (0.600000023842, 0, 1, 0.10000000149, 10, 10);
+  spinbuttonQuantizerCompression = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonQuantizerCompression_adj), 0.10000000149, 1);
+  gtk_widget_show (spinbuttonQuantizerCompression);
+  gtk_table_attach (GTK_TABLE (table15), spinbuttonQuantizerCompression, 1, 2, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, spinbuttonQuantizerCompression, _("Allowed variance of average quantizer or quality. Lower values mean less variance. Higher values mean more variance. Note that 0 means constant quality while 1 means constant fluctuation. Recommended 0.6."), NULL);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonQuantizerCompression), TRUE);
+
+  spinbuttonTempBlurFrame_adj = gtk_adjustment_new (20, 0, 999, 1, 10, 10);
+  spinbuttonTempBlurFrame = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonTempBlurFrame_adj), 1, 0);
+  gtk_widget_show (spinbuttonTempBlurFrame);
+  gtk_table_attach (GTK_TABLE (table15), spinbuttonTempBlurFrame, 1, 2, 2, 3,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, spinbuttonTempBlurFrame, _("Reduced fluctuations in Quantizer (before curve compression)"), NULL);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonTempBlurFrame), TRUE);
+
+  spinbuttonTempBlurQuant_adj = gtk_adjustment_new (0.5, 0, 1, 0.5, 10, 10);
+  spinbuttonTempBlurQuant = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonTempBlurQuant_adj), 0.5, 1);
+  gtk_widget_show (spinbuttonTempBlurQuant);
+  gtk_table_attach (GTK_TABLE (table15), spinbuttonTempBlurQuant, 1, 2, 3, 4,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonTempBlurQuant), TRUE);
+
+  labelQuantizerCompression = gtk_label_new (_("Quantizer Compression"));
+  gtk_widget_show (labelQuantizerCompression);
+  gtk_table_attach (GTK_TABLE (table15), labelQuantizerCompression, 0, 1, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelQuantizerCompression), 0, 0.5);
+
+  labelTempBlurEstFrame = gtk_label_new (_("Temp. Blur of Est. Frame Complexity"));
+  gtk_widget_show (labelTempBlurEstFrame);
+  gtk_table_attach (GTK_TABLE (table15), labelTempBlurEstFrame, 0, 1, 2, 3,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelTempBlurEstFrame), 0, 0.5);
+
+  labelTempBlueQuant = gtk_label_new (_("Temp. Blur of Quant. after CC"));
+  gtk_widget_show (labelTempBlueQuant);
+  gtk_table_attach (GTK_TABLE (table15), labelTempBlueQuant, 0, 1, 3, 4,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelTempBlueQuant), 0, 0.5);
+
+  labelMisc = gtk_label_new (_("<b>Misc</b>"));
+  gtk_widget_show (labelMisc);
+  gtk_frame_set_label_widget (GTK_FRAME (frame10), labelMisc);
+  gtk_label_set_use_markup (GTK_LABEL (labelMisc), TRUE);
+
+  frame11 = gtk_frame_new (NULL);
+  gtk_widget_show (frame11);
+  gtk_box_pack_start (GTK_BOX (vbox8), frame11, FALSE, TRUE, 0);
+
+  alignment13 = gtk_alignment_new (0.5, 0.5, 1, 1);
+  gtk_widget_show (alignment13);
+  gtk_container_add (GTK_CONTAINER (frame11), alignment13);
+  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment13), 7, 7, 7, 7);
+
+  table16 = gtk_table_new (3, 2, FALSE);
+  gtk_widget_show (table16);
+  gtk_container_add (GTK_CONTAINER (alignment13), table16);
+  gtk_table_set_row_spacings (GTK_TABLE (table16), 3);
+  gtk_table_set_col_spacings (GTK_TABLE (table16), 10);
+
+  spinbutton8_adj = gtk_adjustment_new (1.39999997616, 1, 10, 0.10000000149, 10, 10);
+  spinbutton8 = gtk_spin_button_new (GTK_ADJUSTMENT (spinbutton8_adj), 0.10000000149, 1);
+  gtk_widget_show (spinbutton8);
+  gtk_table_attach (GTK_TABLE (table16), spinbutton8, 1, 2, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, spinbutton8, _("Quantization factors used between I and P-frames"), NULL);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbutton8), TRUE);
+
+  spinbutton9_adj = gtk_adjustment_new (1.29999995232, 1, 10, 0.10000000149, 10, 10);
+  spinbutton9 = gtk_spin_button_new (GTK_ADJUSTMENT (spinbutton9_adj), 0.10000000149, 1);
+  gtk_widget_show (spinbutton9);
+  gtk_table_attach (GTK_TABLE (table16), spinbutton9, 1, 2, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, spinbutton9, _("Quantization used between P and B-frames"), NULL);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbutton9), TRUE);
+
+  spinbuttonChromaQPOffset_adj = gtk_adjustment_new (0, -12, 12, 1, 10, 10);
+  spinbuttonChromaQPOffset = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonChromaQPOffset_adj), 1, 0);
+  gtk_widget_show (spinbuttonChromaQPOffset);
+  gtk_table_attach (GTK_TABLE (table16), spinbuttonChromaQPOffset, 1, 2, 2, 3,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_tooltips_set_tip (tooltips, spinbuttonChromaQPOffset, _("Quantization difference between chroma (color) and luma (brightness)"), NULL);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonChromaQPOffset), TRUE);
+
+  labelFactorbetweenIandP = gtk_label_new (_("Factor between I and P-frame Quants"));
+  gtk_widget_show (labelFactorbetweenIandP);
+  gtk_table_attach (GTK_TABLE (table16), labelFactorbetweenIandP, 0, 1, 0, 1,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelFactorbetweenIandP), 0, 0.5);
+
+  labelFactorbetweenPandB = gtk_label_new (_("Factor between P and B-frame Quants"));
+  gtk_widget_show (labelFactorbetweenPandB);
+  gtk_table_attach (GTK_TABLE (table16), labelFactorbetweenPandB, 0, 1, 1, 2,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelFactorbetweenPandB), 0, 0.5);
+
+  labelChromaQPOffset = gtk_label_new (_("Chroma QP Offset"));
+  gtk_widget_show (labelChromaQPOffset);
+  gtk_table_attach (GTK_TABLE (table16), labelChromaQPOffset, 0, 1, 2, 3,
+                    (GtkAttachOptions) (GTK_FILL),
+                    (GtkAttachOptions) (0), 0, 0);
+  gtk_misc_set_alignment (GTK_MISC (labelChromaQPOffset), 0, 0.5);
+
+  labelQuantizers = gtk_label_new (_("<b>Quantizers</b>"));
+  gtk_widget_show (labelQuantizers);
+  gtk_frame_set_label_widget (GTK_FRAME (frame11), labelQuantizers);
+  gtk_label_set_use_markup (GTK_LABEL (labelQuantizers), TRUE);
+
+  frame9 = gtk_frame_new (NULL);
+  gtk_widget_show (frame9);
+  gtk_box_pack_start (GTK_BOX (vbox8), frame9, FALSE, TRUE, 0);
+
+  alignment9 = gtk_alignment_new (0.5, 0.5, 1, 1);
+  gtk_widget_show (alignment9);
+  gtk_container_add (GTK_CONTAINER (frame9), alignment9);
+  gtk_alignment_set_padding (GTK_ALIGNMENT (alignment9), 7, 7, 7, 7);
+
+  vbox9 = gtk_vbox_new (FALSE, 3);
+  gtk_widget_show (vbox9);
+  gtk_container_add (GTK_CONTAINER (alignment9), vbox9);
+
+  radiobuttonFlatmatrix = gtk_radio_button_new_with_mnemonic (NULL, _("Flat Matrix"));
+  gtk_widget_show (radiobuttonFlatmatrix);
+  gtk_box_pack_start (GTK_BOX (vbox9), radiobuttonFlatmatrix, FALSE, FALSE, 0);
+  gtk_radio_button_set_group (GTK_RADIO_BUTTON (radiobuttonFlatmatrix), radiobuttonFlatmatrix_group);
+  radiobuttonFlatmatrix_group = gtk_radio_button_get_group (GTK_RADIO_BUTTON (radiobuttonFlatmatrix));
+  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (radiobuttonFlatmatrix), TRUE);
+
+  radiobuttonJVTmatrix = gtk_radio_button_new_with_mnemonic (NULL, _("JVT Matrix"));
+  gtk_widget_show (radiobuttonJVTmatrix);
+  gtk_box_pack_start (GTK_BOX (vbox9), radiobuttonJVTmatrix, FALSE, FALSE, 0);
+  gtk_radio_button_set_group (GTK_RADIO_BUTTON (radiobuttonJVTmatrix), radiobuttonFlatmatrix_group);
+  radiobuttonFlatmatrix_group = gtk_radio_button_get_group (GTK_RADIO_BUTTON (radiobuttonJVTmatrix));
+
+  hbox13 = gtk_hbox_new (FALSE, 10);
+  gtk_widget_show (hbox13);
+  gtk_box_pack_start (GTK_BOX (vbox9), hbox13, FALSE, FALSE, 0);
+
+  radiobuttonCustommatrix = gtk_radio_button_new_with_mnemonic (NULL, _("Custom Matrix"));
+  gtk_widget_show (radiobuttonCustommatrix);
+  gtk_box_pack_start (GTK_BOX (hbox13), radiobuttonCustommatrix, TRUE, TRUE, 0);
+  gtk_radio_button_set_group (GTK_RADIO_BUTTON (radiobuttonCustommatrix), radiobuttonFlatmatrix_group);
+  radiobuttonFlatmatrix_group = gtk_radio_button_get_group (GTK_RADIO_BUTTON (radiobuttonCustommatrix));
+
+  hbox14 = gtk_hbox_new (FALSE, 0);
+  gtk_widget_show (hbox14);
+  gtk_box_pack_start (GTK_BOX (hbox13), hbox14, TRUE, TRUE, 0);
+
+  filechooserbuttonOpenCQMFile = gtk_file_chooser_button_new (_("Open CQM file"), GTK_FILE_CHOOSER_ACTION_OPEN);
+  gtk_widget_show (filechooserbuttonOpenCQMFile);
+  gtk_box_pack_start (GTK_BOX (hbox14), filechooserbuttonOpenCQMFile, TRUE, TRUE, 0);
+
+  vseparator1 = gtk_vseparator_new ();
+  gtk_widget_show (vseparator1);
+  gtk_box_pack_start (GTK_BOX (hbox14), vseparator1, TRUE, TRUE, 0);
+
+  buttonEditCustomMatrix = gtk_button_new_with_mnemonic (_("Edit Custom Matrix"));
+  gtk_widget_show (buttonEditCustomMatrix);
+  gtk_box_pack_start (GTK_BOX (hbox14), buttonEditCustomMatrix, FALSE, FALSE, 0);
+  gtk_tooltips_set_tip (tooltips, buttonEditCustomMatrix, _("Edit loaded custom quantization matrix file"), NULL);
+
+  labelFrameQuantizationMatrices = gtk_label_new (_("<b>Quantization Matrices</b>"));
+  gtk_widget_show (labelFrameQuantizationMatrices);
+  gtk_frame_set_label_widget (GTK_FRAME (frame9), labelFrameQuantizationMatrices);
+  gtk_label_set_use_markup (GTK_LABEL (labelFrameQuantizationMatrices), TRUE);
+
+  labelMore = gtk_label_new (_("More"));
+  gtk_widget_show (labelMore);
+  gtk_notebook_set_tab_label (GTK_NOTEBOOK (notebook1), gtk_notebook_get_nth_page (GTK_NOTEBOOK (notebook1), 4), labelMore);
+
+  dialog_action_area1 = GTK_DIALOG (dialog1)->action_area;
+  gtk_widget_show (dialog_action_area1);
+  gtk_button_box_set_layout (GTK_BUTTON_BOX (dialog_action_area1), GTK_BUTTONBOX_END);
+
+  buttonResetDaults = gtk_button_new_with_mnemonic (_("_Defaults"));
+  gtk_widget_show (buttonResetDaults);
+  gtk_dialog_add_action_widget (GTK_DIALOG (dialog1), buttonResetDaults, 0);
+
+  cancelbutton1 = gtk_button_new_from_stock ("gtk-cancel");
+  gtk_widget_show (cancelbutton1);
+  gtk_dialog_add_action_widget (GTK_DIALOG (dialog1), cancelbutton1, GTK_RESPONSE_CANCEL);
+
+  okbutton1 = gtk_button_new_from_stock ("gtk-ok");
+  gtk_widget_show (okbutton1);
+  gtk_dialog_add_action_widget (GTK_DIALOG (dialog1), okbutton1, GTK_RESPONSE_OK);
+  GTK_WIDGET_SET_FLAGS (okbutton1, GTK_CAN_DEFAULT);
+
+  /* Store pointers to all widgets, for use by lookup_widget(). */
+  GLADE_HOOKUP_OBJECT_NO_REF (dialog1, dialog1, "dialog1");
+  GLADE_HOOKUP_OBJECT_NO_REF (dialog1, dialog_vbox1, "dialog_vbox1");
+  GLADE_HOOKUP_OBJECT (dialog1, notebook1, "notebook1");
+  GLADE_HOOKUP_OBJECT (dialog1, alignment14, "alignment14");
+  GLADE_HOOKUP_OBJECT (dialog1, tableBitrate, "tableBitrate");
+  GLADE_HOOKUP_OBJECT (dialog1, labelEncodingMode, "labelEncodingMode");
+  GLADE_HOOKUP_OBJECT (dialog1, labelQuantizer, "labelQuantizer");
+  GLADE_HOOKUP_OBJECT (dialog1, labelTarget, "labelTarget");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonQuantizer, "spinbuttonQuantizer");
+  GLADE_HOOKUP_OBJECT (dialog1, entryTarget, "entryTarget");
+  GLADE_HOOKUP_OBJECT (dialog1, comboboxMode, "comboboxMode");
+  GLADE_HOOKUP_OBJECT (dialog1, labelPageBitrate, "labelPageBitrate");
+  GLADE_HOOKUP_OBJECT (dialog1, alignment15, "alignment15");
+  GLADE_HOOKUP_OBJECT (dialog1, vbox5, "vbox5");
+  GLADE_HOOKUP_OBJECT (dialog1, frame6, "frame6");
+  GLADE_HOOKUP_OBJECT (dialog1, alignment6, "alignment6");
+  GLADE_HOOKUP_OBJECT (dialog1, vbox6, "vbox6");
+  GLADE_HOOKUP_OBJECT (dialog1, table7, "table7");
+  GLADE_HOOKUP_OBJECT (dialog1, labelPartitionDecision, "labelPartitionDecision");
+  GLADE_HOOKUP_OBJECT (dialog1, labelMethod, "labelMethod");
+  GLADE_HOOKUP_OBJECT (dialog1, comboboxPartitionDecision, "comboboxPartitionDecision");
+  GLADE_HOOKUP_OBJECT (dialog1, comboboxMethod, "comboboxMethod");
+  GLADE_HOOKUP_OBJECT (dialog1, table11, "table11");
+  GLADE_HOOKUP_OBJECT (dialog1, labelMaxRefFrames, "labelMaxRefFrames");
+  GLADE_HOOKUP_OBJECT (dialog1, labelRange, "labelRange");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonRange, "spinbuttonRange");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonMaxRefFrames, "spinbuttonMaxRefFrames");
+  GLADE_HOOKUP_OBJECT (dialog1, checkbuttonChromaME, "checkbuttonChromaME");
+  GLADE_HOOKUP_OBJECT (dialog1, checkbuttonMixedRefs, "checkbuttonMixedRefs");
+  GLADE_HOOKUP_OBJECT (dialog1, hbox8, "hbox8");
+  GLADE_HOOKUP_OBJECT (dialog1, checkbuttonfastPSkip, "checkbuttonfastPSkip");
+  GLADE_HOOKUP_OBJECT (dialog1, checkbuttonDCTDecimate, "checkbuttonDCTDecimate");
+  GLADE_HOOKUP_OBJECT (dialog1, checkbuttoninterlaced, "checkbuttoninterlaced");
+  GLADE_HOOKUP_OBJECT (dialog1, label24, "label24");
+  GLADE_HOOKUP_OBJECT (dialog1, frameSampleAR, "frameSampleAR");
+  GLADE_HOOKUP_OBJECT (dialog1, alignment12, "alignment12");
+  GLADE_HOOKUP_OBJECT (dialog1, table35, "table35");
+  GLADE_HOOKUP_OBJECT (dialog1, hbox12, "hbox12");
+  GLADE_HOOKUP_OBJECT (dialog1, entryAR_Num, "entryAR_Num");
+  GLADE_HOOKUP_OBJECT (dialog1, label53, "label53");
+  GLADE_HOOKUP_OBJECT (dialog1, entryAR_Den, "entryAR_Den");
+  GLADE_HOOKUP_OBJECT (dialog1, radiobuttonCustomAR, "radiobuttonCustomAR");
+  GLADE_HOOKUP_OBJECT (dialog1, radiobuttonPredefinedAR, "radiobuttonPredefinedAR");
+  GLADE_HOOKUP_OBJECT (dialog1, radiobuttonAsInputAR, "radiobuttonAsInputAR");
+  GLADE_HOOKUP_OBJECT (dialog1, label40, "label40");
+  GLADE_HOOKUP_OBJECT (dialog1, comboboxentry1, "comboboxentry1");
+  GLADE_HOOKUP_OBJECT (dialog1, label39, "label39");
+  GLADE_HOOKUP_OBJECT (dialog1, frame7, "frame7");
+  GLADE_HOOKUP_OBJECT (dialog1, alignment7, "alignment7");
+  GLADE_HOOKUP_OBJECT (dialog1, vbox7, "vbox7");
+  GLADE_HOOKUP_OBJECT (dialog1, alignment21, "alignment21");
+  GLADE_HOOKUP_OBJECT (dialog1, hbox2, "hbox2");
+  GLADE_HOOKUP_OBJECT (dialog1, checkbuttonCABAC, "checkbuttonCABAC");
+  GLADE_HOOKUP_OBJECT (dialog1, hbox7, "hbox7");
+  GLADE_HOOKUP_OBJECT (dialog1, labelTrellis, "labelTrellis");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonTrellis, "spinbuttonTrellis");
+  GLADE_HOOKUP_OBJECT (dialog1, hbox11, "hbox11");
+  GLADE_HOOKUP_OBJECT (dialog1, labelNoiseReduction, "labelNoiseReduction");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonNoiseReduction, "spinbuttonNoiseReduction");
+  GLADE_HOOKUP_OBJECT (dialog1, hbox3, "hbox3");
+  GLADE_HOOKUP_OBJECT (dialog1, checkbuttonDeblockingFilter, "checkbuttonDeblockingFilter");
+  GLADE_HOOKUP_OBJECT (dialog1, table8, "table8");
+  GLADE_HOOKUP_OBJECT (dialog1, labelThreshold, "labelThreshold");
+  GLADE_HOOKUP_OBJECT (dialog1, labelStrength, "labelStrength");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonThreshold, "spinbuttonThreshold");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonStrength, "spinbuttonStrength");
+  GLADE_HOOKUP_OBJECT (dialog1, label25, "label25");
+  GLADE_HOOKUP_OBJECT (dialog1, labelPageMotion_More, "labelPageMotion_More");
+  GLADE_HOOKUP_OBJECT (dialog1, alignment16, "alignment16");
+  GLADE_HOOKUP_OBJECT (dialog1, vbox2, "vbox2");
+  GLADE_HOOKUP_OBJECT (dialog1, frame4, "frame4");
+  GLADE_HOOKUP_OBJECT (dialog1, alignment4, "alignment4");
+  GLADE_HOOKUP_OBJECT (dialog1, vbox3, "vbox3");
+  GLADE_HOOKUP_OBJECT (dialog1, checkbutton8x8, "checkbutton8x8");
+  GLADE_HOOKUP_OBJECT (dialog1, checkbutton8x8P, "checkbutton8x8P");
+  GLADE_HOOKUP_OBJECT (dialog1, checkbutton8x8B, "checkbutton8x8B");
+  GLADE_HOOKUP_OBJECT (dialog1, checkbutton4x4, "checkbutton4x4");
+  GLADE_HOOKUP_OBJECT (dialog1, checkbutton8x8I, "checkbutton8x8I");
+  GLADE_HOOKUP_OBJECT (dialog1, checkbutton4x4I, "checkbutton4x4I");
+  GLADE_HOOKUP_OBJECT (dialog1, label19, "label19");
+  GLADE_HOOKUP_OBJECT (dialog1, frame5, "frame5");
+  GLADE_HOOKUP_OBJECT (dialog1, alignment5, "alignment5");
+  GLADE_HOOKUP_OBJECT (dialog1, vbox4, "vbox4");
+  GLADE_HOOKUP_OBJECT (dialog1, table5, "table5");
+  GLADE_HOOKUP_OBJECT (dialog1, labelBias, "labelBias");
+  GLADE_HOOKUP_OBJECT (dialog1, labelMaxConsecutive, "labelMaxConsecutive");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonBias, "spinbuttonBias");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonMaxBFrame, "spinbuttonMaxBFrame");
+  GLADE_HOOKUP_OBJECT (dialog1, alignment20, "alignment20");
+  GLADE_HOOKUP_OBJECT (dialog1, table6, "table6");
+  GLADE_HOOKUP_OBJECT (dialog1, checkbuttonBidirME, "checkbuttonBidirME");
+  GLADE_HOOKUP_OBJECT (dialog1, checkbuttonWeighted, "checkbuttonWeighted");
+  GLADE_HOOKUP_OBJECT (dialog1, checkbuttonAdaptative, "checkbuttonAdaptative");
+  GLADE_HOOKUP_OBJECT (dialog1, checkbuttonBasReference, "checkbuttonBasReference");
+  GLADE_HOOKUP_OBJECT (dialog1, hbox1, "hbox1");
+  GLADE_HOOKUP_OBJECT (dialog1, labelBFrameDirectMode, "labelBFrameDirectMode");
+  GLADE_HOOKUP_OBJECT (dialog1, comboboxDirectMode, "comboboxDirectMode");
+  GLADE_HOOKUP_OBJECT (dialog1, label20, "label20");
+  GLADE_HOOKUP_OBJECT (dialog1, labelPagePartion_Frame, "labelPagePartion_Frame");
+  GLADE_HOOKUP_OBJECT (dialog1, alignment17, "alignment17");
+  GLADE_HOOKUP_OBJECT (dialog1, vbox1, "vbox1");
+  GLADE_HOOKUP_OBJECT (dialog1, frame1, "frame1");
+  GLADE_HOOKUP_OBJECT (dialog1, alignment1, "alignment1");
+  GLADE_HOOKUP_OBJECT (dialog1, table2, "table2");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonKeyframeBoost, "spinbuttonKeyframeBoost");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonBframeReduction, "spinbuttonBframeReduction");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonBitrateVariability, "spinbuttonBitrateVariability");
+  GLADE_HOOKUP_OBJECT (dialog1, labelKeyframeboost, "labelKeyframeboost");
+  GLADE_HOOKUP_OBJECT (dialog1, label11, "label11");
+  GLADE_HOOKUP_OBJECT (dialog1, label12, "label12");
+  GLADE_HOOKUP_OBJECT (dialog1, label7, "label7");
+  GLADE_HOOKUP_OBJECT (dialog1, frame2, "frame2");
+  GLADE_HOOKUP_OBJECT (dialog1, alignment2, "alignment2");
+  GLADE_HOOKUP_OBJECT (dialog1, table3, "table3");
+  GLADE_HOOKUP_OBJECT (dialog1, label13, "label13");
+  GLADE_HOOKUP_OBJECT (dialog1, label14, "label14");
+  GLADE_HOOKUP_OBJECT (dialog1, label15, "label15");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonMinQp, "spinbuttonMinQp");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonMaxQp, "spinbuttonMaxQp");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonQpStep, "spinbuttonQpStep");
+  GLADE_HOOKUP_OBJECT (dialog1, label8, "label8");
+  GLADE_HOOKUP_OBJECT (dialog1, frame3, "frame3");
+  GLADE_HOOKUP_OBJECT (dialog1, alignment3, "alignment3");
+  GLADE_HOOKUP_OBJECT (dialog1, table4, "table4");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonSceneCut, "spinbuttonSceneCut");
+  GLADE_HOOKUP_OBJECT (dialog1, label16, "label16");
+  GLADE_HOOKUP_OBJECT (dialog1, label17, "label17");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonMinIdr, "spinbuttonMinIdr");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonMaxIdr, "spinbuttonMaxIdr");
+  GLADE_HOOKUP_OBJECT (dialog1, label18, "label18");
+  GLADE_HOOKUP_OBJECT (dialog1, labelMoreEncodingSettings, "labelMoreEncodingSettings");
+  GLADE_HOOKUP_OBJECT (dialog1, frameVideoBufferVerifier, "frameVideoBufferVerifier");
+  GLADE_HOOKUP_OBJECT (dialog1, alignment11, "alignment11");
+  GLADE_HOOKUP_OBJECT (dialog1, table12, "table12");
+  GLADE_HOOKUP_OBJECT (dialog1, labelVBVBufferSize, "labelVBVBufferSize");
+  GLADE_HOOKUP_OBJECT (dialog1, labelVBVInitialbuffer, "labelVBVInitialbuffer");
+  GLADE_HOOKUP_OBJECT (dialog1, labelVBVMaximumBitrate, "labelVBVMaximumBitrate");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonvbv_max_bitrate, "spinbuttonvbv_max_bitrate");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonvbv_buffer_size, "spinbuttonvbv_buffer_size");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonvbv_buffer_init, "spinbuttonvbv_buffer_init");
+  GLADE_HOOKUP_OBJECT (dialog1, labelVideoBufferVerifier, "labelVideoBufferVerifier");
+  GLADE_HOOKUP_OBJECT (dialog1, labelPageRateControl, "labelPageRateControl");
+  GLADE_HOOKUP_OBJECT (dialog1, alignment18, "alignment18");
+  GLADE_HOOKUP_OBJECT (dialog1, vbox8, "vbox8");
+  GLADE_HOOKUP_OBJECT (dialog1, frame10, "frame10");
+  GLADE_HOOKUP_OBJECT (dialog1, alignment10, "alignment10");
+  GLADE_HOOKUP_OBJECT (dialog1, table15, "table15");
+  GLADE_HOOKUP_OBJECT (dialog1, labelBitrateVariance, "labelBitrateVariance");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonBitrateVariance, "spinbuttonBitrateVariance");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonQuantizerCompression, "spinbuttonQuantizerCompression");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonTempBlurFrame, "spinbuttonTempBlurFrame");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonTempBlurQuant, "spinbuttonTempBlurQuant");
+  GLADE_HOOKUP_OBJECT (dialog1, labelQuantizerCompression, "labelQuantizerCompression");
+  GLADE_HOOKUP_OBJECT (dialog1, labelTempBlurEstFrame, "labelTempBlurEstFrame");
+  GLADE_HOOKUP_OBJECT (dialog1, labelTempBlueQuant, "labelTempBlueQuant");
+  GLADE_HOOKUP_OBJECT (dialog1, labelMisc, "labelMisc");
+  GLADE_HOOKUP_OBJECT (dialog1, frame11, "frame11");
+  GLADE_HOOKUP_OBJECT (dialog1, alignment13, "alignment13");
+  GLADE_HOOKUP_OBJECT (dialog1, table16, "table16");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbutton8, "spinbutton8");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbutton9, "spinbutton9");
+  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonChromaQPOffset, "spinbuttonChromaQPOffset");
+  GLADE_HOOKUP_OBJECT (dialog1, labelFactorbetweenIandP, "labelFactorbetweenIandP");
+  GLADE_HOOKUP_OBJECT (dialog1, labelFactorbetweenPandB, "labelFactorbetweenPandB");
+  GLADE_HOOKUP_OBJECT (dialog1, labelChromaQPOffset, "labelChromaQPOffset");
+  GLADE_HOOKUP_OBJECT (dialog1, labelQuantizers, "labelQuantizers");
+  GLADE_HOOKUP_OBJECT (dialog1, frame9, "frame9");
+  GLADE_HOOKUP_OBJECT (dialog1, alignment9, "alignment9");
+  GLADE_HOOKUP_OBJECT (dialog1, vbox9, "vbox9");
+  GLADE_HOOKUP_OBJECT (dialog1, radiobuttonFlatmatrix, "radiobuttonFlatmatrix");
+  GLADE_HOOKUP_OBJECT (dialog1, radiobuttonJVTmatrix, "radiobuttonJVTmatrix");
+  GLADE_HOOKUP_OBJECT (dialog1, hbox13, "hbox13");
+  GLADE_HOOKUP_OBJECT (dialog1, radiobuttonCustommatrix, "radiobuttonCustommatrix");
+  GLADE_HOOKUP_OBJECT (dialog1, hbox14, "hbox14");
+  GLADE_HOOKUP_OBJECT (dialog1, filechooserbuttonOpenCQMFile, "filechooserbuttonOpenCQMFile");
+  GLADE_HOOKUP_OBJECT (dialog1, vseparator1, "vseparator1");
+  GLADE_HOOKUP_OBJECT (dialog1, buttonEditCustomMatrix, "buttonEditCustomMatrix");
+  GLADE_HOOKUP_OBJECT (dialog1, labelFrameQuantizationMatrices, "labelFrameQuantizationMatrices");
+  GLADE_HOOKUP_OBJECT (dialog1, labelMore, "labelMore");
+  GLADE_HOOKUP_OBJECT_NO_REF (dialog1, dialog_action_area1, "dialog_action_area1");
+  GLADE_HOOKUP_OBJECT (dialog1, buttonResetDaults, "buttonResetDaults");
+  GLADE_HOOKUP_OBJECT (dialog1, cancelbutton1, "cancelbutton1");
+  GLADE_HOOKUP_OBJECT (dialog1, okbutton1, "okbutton1");
+  GLADE_HOOKUP_OBJECT_NO_REF (dialog1, tooltips, "tooltips");
+
+  gtk_widget_grab_default (okbutton1);
+  return dialog1;
+}

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/interface.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/interface.c	2008-04-30 01:24:27 UTC (rev 3998)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/interface.c	2008-04-30 18:01:17 UTC (rev 3999)
@@ -74,9 +74,9 @@
 	return x264Encoder_isConfigurable();
 }
 
-int vidEncConfigure(int encoderId, vidEncVideoProperties *properties)
+int vidEncConfigure(int encoderId, vidEncConfigParameters *configParameters, vidEncVideoProperties *properties)
 {
-	return x264Encoder_configure(properties);
+	return x264Encoder_configure(configParameters, properties);
 }
 
 int vidEncGetOptions(int encoderId, vidEncOptions *encodeOptions, char *pluginOptions, int bufferSize)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp	2008-04-30 01:24:27 UTC (rev 3998)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp	2008-04-30 18:01:17 UTC (rev 3999)
@@ -27,7 +27,8 @@
 #include "DIA_coreToolkit.h"
 #include "DIA_fileSel.h"
 
-x264ConfigDialog::x264ConfigDialog(vidEncVideoProperties *properties, vidEncOptions *encodeOptions, x264Options *options)
+x264ConfigDialog::x264ConfigDialog(vidEncConfigParameters *configParameters, vidEncVideoProperties *properties, vidEncOptions *encodeOptions, x264Options *options) :
+	QDialog((QWidget*)configParameters->parent, Qt::Dialog)
 {
 	static const int _predefinedARs[aspectRatioCount][2] = {{16, 15}, {64, 45}, {8, 9}, {32, 27}};
 
@@ -590,9 +591,9 @@
 	options->setFullRangeSamples(ui.fullRangeSamplesCheckBox->isChecked());
 }
 
-extern "C" int showX264ConfigDialog(vidEncVideoProperties *properties, vidEncOptions *encodeOptions, x264Options *options)
+extern "C" int showX264ConfigDialog(vidEncConfigParameters *configParameters, vidEncVideoProperties *properties, vidEncOptions *encodeOptions, x264Options *options)
 {
-	x264ConfigDialog dialog(properties, encodeOptions, options);
+	x264ConfigDialog dialog(configParameters, properties, encodeOptions, options);
 
 	if (dialog.exec() == QDialog::Accepted)
 	{

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.h	2008-04-30 01:24:27 UTC (rev 3998)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.h	2008-04-30 18:01:17 UTC (rev 3999)
@@ -43,7 +43,7 @@
 	int getValueIndexInArray(uint8_t value, const uint8_t valueArray[], int elementCount);
 
 public:
-	x264ConfigDialog(vidEncVideoProperties *properties, vidEncOptions *encodeOptions, x264Options *options);
+	x264ConfigDialog(vidEncConfigParameters *configParameters, vidEncVideoProperties *properties, vidEncOptions *encodeOptions, x264Options *options);
 	void saveSettings(vidEncOptions *encodeOptions, x264Options *options);
 
 private slots:



