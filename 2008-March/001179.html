<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Avidemux-svn-commit] r3917 - in	branches/avidemux_2.5_branch_gruntster/avidemux: ADM_codecs	ADM_colorspace ADM_editor ADM_libraries/ADM_ffmpeg/ADM_lavcodec	ADM_libraries/ADM_ffmpeg/ADM_lavformat	ADM_libraries/ADM_ffmpeg/ADM_libswscale	ADM_libraries/ADM_utilities ADM_outputs ADM_video ADM_videoFilter
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/avidemux-svn-commit/2008-March/index.html" >
   <LINK REL="made" HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r3917%20-%20in%0A%09branches/avidemux_2.5_branch_gruntster/avidemux%3A%20ADM_codecs%0A%09ADM_colorspace%20ADM_editor%20ADM_libraries/ADM_ffmpeg/ADM_lavcodec%0A%09ADM_libraries/ADM_ffmpeg/ADM_lavformat%0A%09ADM_libraries/ADM_ffmpeg/ADM_libswscale%0A%09ADM_libraries/ADM_utilities%20ADM_outputs%20ADM_video%20ADM_videoFilter&In-Reply-To=%3C200803210652.m2L6qHbS005093%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001178.html">
   <LINK REL="Next"  HREF="001180.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Avidemux-svn-commit] r3917 - in	branches/avidemux_2.5_branch_gruntster/avidemux: ADM_codecs	ADM_colorspace ADM_editor ADM_libraries/ADM_ffmpeg/ADM_lavcodec	ADM_libraries/ADM_ffmpeg/ADM_lavformat	ADM_libraries/ADM_ffmpeg/ADM_libswscale	ADM_libraries/ADM_utilities ADM_outputs ADM_video ADM_videoFilter</H1>
    <B>mean at BerliOS</B> 
    <A HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r3917%20-%20in%0A%09branches/avidemux_2.5_branch_gruntster/avidemux%3A%20ADM_codecs%0A%09ADM_colorspace%20ADM_editor%20ADM_libraries/ADM_ffmpeg/ADM_lavcodec%0A%09ADM_libraries/ADM_ffmpeg/ADM_lavformat%0A%09ADM_libraries/ADM_ffmpeg/ADM_libswscale%0A%09ADM_libraries/ADM_utilities%20ADM_outputs%20ADM_video%20ADM_videoFilter&In-Reply-To=%3C200803210652.m2L6qHbS005093%40sheep.berlios.de%3E"
       TITLE="[Avidemux-svn-commit] r3917 - in	branches/avidemux_2.5_branch_gruntster/avidemux: ADM_codecs	ADM_colorspace ADM_editor ADM_libraries/ADM_ffmpeg/ADM_lavcodec	ADM_libraries/ADM_ffmpeg/ADM_lavformat	ADM_libraries/ADM_ffmpeg/ADM_libswscale	ADM_libraries/ADM_utilities ADM_outputs ADM_video ADM_videoFilter">mean at mail.berlios.de
       </A><BR>
    <I>Fri Mar 21 07:52:17 CET 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001178.html">[Avidemux-svn-commit] r3916 - in	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg:	. ADM_lavcodec ADM_lavcodec/i386 ADM_lavformat ADM_lavutil	ADM_libpostproc ADM_libswscale
</A></li>
        <LI>Next message: <A HREF="001180.html">[Avidemux-svn-commit] r3918 -	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavutil
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1179">[ date ]</a>
              <a href="thread.html#1179">[ thread ]</a>
              <a href="subject.html#1179">[ subject ]</a>
              <a href="author.html#1179">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: mean
Date: 2008-03-21 07:52:13 +0100 (Fri, 21 Mar 2008)
New Revision: 3917

Added:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/ff_png.h
Removed:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/png.h
Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_ffmp43.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_png.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_colorspace/ADM_colorspace.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_colorspace/ADM_rgb.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_colorspace/rgb2yuv.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edRender.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/pngdec.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/pngenc.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/flvenc.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/riff.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/ADM_mp.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_imageResizer.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_pp.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/ADM_lavformat.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidMPdelogo.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidForcedPP.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLResize.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMosaic.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVobSubRender.cpp
Log:
[Lav*] Update + fix unresolved


Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_ffmp43.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_ffmp43.cpp	2008-03-21 06:51:55 UTC (rev 3916)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_ffmp43.cpp	2008-03-21 06:52:13 UTC (rev 3917)
@@ -25,7 +25,9 @@
 
 #include &quot;ADM_assert.h&quot;
 #include &quot;prefs.h&quot;
+extern &quot;C&quot; {
 #include &quot;ADM_lavcodec.h&quot;
+}
 #include &quot;ADM_default.h&quot;
 
 #include &quot;ADM_codecs/ADM_codec.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_png.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_png.cpp	2008-03-21 06:51:55 UTC (rev 3916)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_png.cpp	2008-03-21 06:52:13 UTC (rev 3917)
@@ -28,8 +28,10 @@
 
 #include &quot;ADM_codecs/ADM_codec.h&quot;
 #include &quot;ADM_codecs/ADM_png.h&quot;
-
+extern &quot;C&quot;
+{
 #include &quot;png.h&quot;
+}
 #include &quot;ADM_assert.h&quot;
 
 #define PNG_PTR ((png_structp)png_ptr)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/CMakeLists.txt	2008-03-21 06:51:55 UTC (rev 3916)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/CMakeLists.txt	2008-03-21 06:52:13 UTC (rev 3917)
@@ -14,4 +14,6 @@
 
 IF (USE_XVID_4)
 	ADD_SOURCE_CFLAGS(ADM_xvid4.cpp -I${XVID_INCLUDE_DIR})
-ENDIF (USE_XVID_4)
\ No newline at end of file
+ENDIF (USE_XVID_4)
+
+REMOVE_DEFINITIONS(-DHAVE_CONFIG_H)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_colorspace/ADM_colorspace.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_colorspace/ADM_colorspace.cpp	2008-03-21 06:51:55 UTC (rev 3916)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_colorspace/ADM_colorspace.cpp	2008-03-21 06:52:13 UTC (rev 3917)
@@ -18,14 +18,13 @@
 #include &quot;ADM_default.h&quot;
 #include &quot;colorspace.h&quot;
 
-#ifdef ADM_CPU_X86
+
 extern &quot;C&quot; {
 #include &quot;ADM_libraries/ADM_ffmpeg/ADM_lavcodec/avcodec.h&quot;
-}
-#endif
-
 #include &quot;ADM_libraries/ADM_ffmpeg/ADM_lavutil/avutil.h&quot;
 #include &quot;ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale.h&quot;
+}
+
 #include &quot;ADM_rgb.h&quot; 
 #include &quot;ADM_colorspace.h&quot;
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_colorspace/ADM_rgb.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_colorspace/ADM_rgb.cpp	2008-03-21 06:51:55 UTC (rev 3916)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_colorspace/ADM_rgb.cpp	2008-03-21 06:52:13 UTC (rev 3917)
@@ -23,14 +23,13 @@
 #include &quot;ADM_default.h&quot;
 #include &quot;colorspace.h&quot;
 
-#ifdef ADM_CPU_X86
 extern &quot;C&quot; {
 #include &quot;ADM_libraries/ADM_ffmpeg/ADM_lavcodec/avcodec.h&quot;
-}
-#endif
-
 #include &quot;ADM_libraries/ADM_ffmpeg/ADM_lavutil/avutil.h&quot;
 #include &quot;ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale.h&quot;
+}
+
+	
 #include &quot;ADM_rgb.h&quot; 
 
 #define CLEANUP() \

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_colorspace/rgb2yuv.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_colorspace/rgb2yuv.cpp	2008-03-21 06:51:55 UTC (rev 3916)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_colorspace/rgb2yuv.cpp	2008-03-21 06:52:13 UTC (rev 3917)
@@ -24,13 +24,12 @@
 #include &quot;config.h&quot;
 #include &quot;ADM_default.h&quot;
 
-#ifdef ADM_CPU_X86
+
 extern &quot;C&quot; {
 #include &quot;ADM_libraries/ADM_ffmpeg/ADM_lavcodec/avcodec.h&quot;
+#include &quot;ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale.h&quot;
 }
-#endif
 
-#include &quot;ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale.h&quot;
 #include &quot;colorspace.h&quot;
 
 /**

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edRender.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edRender.cpp	2008-03-21 06:51:55 UTC (rev 3916)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edRender.cpp	2008-03-21 06:52:13 UTC (rev 3917)
@@ -519,7 +519,8 @@
 
 	// we do postproc !
 	// keep
-	uint8_t *oBuff[3],*iBuff[3];
+	uint8_t *oBuff[3];
+	const uint8_t *iBuff[3];
 	int	strideTab[3];
 	int	strideTab2[3];
 	aviInfo _info;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/CMakeLists.txt	2008-03-21 06:51:55 UTC (rev 3916)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/CMakeLists.txt	2008-03-21 06:52:13 UTC (rev 3917)
@@ -16,7 +16,10 @@
 	h263_parser.c  h264_parser.c  mpeg4video_parser.c  mpegvideo_enc.c  mpeg12enc.c
 	mpegaudioenc.c  ac3enc.c  ac3.c  ac3tab.c  mjpegenc.c  mjpegdec.c  wma.c  
 	dvbsub_parser.c  dvbsubdec.c  dvbsub.c  xiph.c  sp5xdec.c  nellymoserdec.c
-	ADM_lavcodec.cpp
+	ADM_lavcodec.cpp pthread.c
+	huffman.c wmv2dec.c wmv2.c h264pred.c
+	intrax8.c intrax8dsp.c dnxhddata.c faanidct.c ac3_parser.c
+	aac_ac3_parser.c aac_parser.c
 )
 
 IF(ADM_CPU_X86)
@@ -24,7 +27,10 @@
 		i386/cputest.c  i386/mpegvideo_mmx.c  i386/vp3dsp_mmx.c  i386/dsputil_mmx.c
 		i386/fdct_mmx.c  i386/motion_est_mmx.c  i386/simple_idct_mmx.c  i386/fft_sse.c
 		i386/vp3dsp_sse2.c  i386/idct_mmx_xvid.c  i386/fft_3dn2.c  i386/snowdsp_mmx.c
-		i386/fft_3dn.c)
+		i386/fft_3dn.c
+		i386/dsputilenc_mmx.c
+		i386/vc1dsp_mmx.c
+		)
 ENDIF(ADM_CPU_X86)
 
 IF (ADM_CPU_ALTIVEC)

Copied: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/ff_png.h (from rev 3916, branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/png.h)
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/png.h	2008-03-21 06:51:55 UTC (rev 3916)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/ff_png.h	2008-03-21 06:52:13 UTC (rev 3917)
@@ -0,0 +1,77 @@
+/*
+ * PNG image format
+ * Copyright (c) 2003 Fabrice Bellard.
+ *
+ * This file is part of FFmpeg.
+ *
+ * FFmpeg is free software; you can redistribute it and/or
+ * modify it under the terms of the GNU Lesser General Public
+ * License as published by the Free Software Foundation; either
+ * version 2.1 of the License, or (at your option) any later version.
+ *
+ * FFmpeg is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+ * Lesser General Public License for more details.
+ *
+ * You should have received a copy of the GNU Lesser General Public
+ * License along with FFmpeg; if not, write to the Free Software
+ * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
+ */
+
+#ifndef FFMPEG_PNG_H
+#define FFMPEG_PNG_H
+
+#include &lt;stdint.h&gt;
+
+#define PNG_COLOR_MASK_PALETTE    1
+#define PNG_COLOR_MASK_COLOR      2
+#define PNG_COLOR_MASK_ALPHA      4
+
+#define PNG_COLOR_TYPE_GRAY 0
+#define PNG_COLOR_TYPE_PALETTE  (PNG_COLOR_MASK_COLOR | PNG_COLOR_MASK_PALETTE)
+#define PNG_COLOR_TYPE_RGB        (PNG_COLOR_MASK_COLOR)
+#define PNG_COLOR_TYPE_RGB_ALPHA  (PNG_COLOR_MASK_COLOR | PNG_COLOR_MASK_ALPHA)
+#define PNG_COLOR_TYPE_GRAY_ALPHA (PNG_COLOR_MASK_ALPHA)
+
+#define PNG_FILTER_TYPE_LOCO   64
+#define PNG_FILTER_VALUE_NONE  0
+#define PNG_FILTER_VALUE_SUB   1
+#define PNG_FILTER_VALUE_UP    2
+#define PNG_FILTER_VALUE_AVG   3
+#define PNG_FILTER_VALUE_PAETH 4
+#define PNG_FILTER_VALUE_MIXED 5
+
+#define PNG_IHDR      0x0001
+#define PNG_IDAT      0x0002
+#define PNG_ALLIMAGE  0x0004
+#define PNG_PLTE      0x0008
+
+#define NB_PASSES 7
+
+extern const uint8_t ff_pngsig[8];
+extern const uint8_t ff_mngsig[8];
+
+/* Mask to determine which y pixels are valid in a pass */
+extern const uint8_t ff_png_pass_ymask[NB_PASSES];
+
+/* minimum x value */
+extern const uint8_t ff_png_pass_xmin[NB_PASSES];
+
+/* x shift to get row width */
+extern const uint8_t ff_png_pass_xshift[NB_PASSES];
+
+/* Mask to determine which pixels are valid in a pass */
+extern const uint8_t ff_png_pass_mask[NB_PASSES];
+
+extern void *ff_png_zalloc(void *opaque, unsigned int items,
+                           unsigned int size);
+
+extern void ff_png_zfree(void *opaque, void *ptr);
+
+extern int ff_png_get_nb_channels(int color_type);
+
+/* compute the row size of an interleaved pass */
+extern int ff_png_pass_row_size(int pass, int bits_per_pixel, int width);
+
+#endif /* FFMPEG_PNG_H */

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/png.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/png.h	2008-03-21 06:51:55 UTC (rev 3916)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/png.h	2008-03-21 06:52:13 UTC (rev 3917)
@@ -1,77 +0,0 @@
-/*
- * PNG image format
- * Copyright (c) 2003 Fabrice Bellard.
- *
- * This file is part of FFmpeg.
- *
- * FFmpeg is free software; you can redistribute it and/or
- * modify it under the terms of the GNU Lesser General Public
- * License as published by the Free Software Foundation; either
- * version 2.1 of the License, or (at your option) any later version.
- *
- * FFmpeg is distributed in the hope that it will be useful,
- * but WITHOUT ANY WARRANTY; without even the implied warranty of
- * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
- * Lesser General Public License for more details.
- *
- * You should have received a copy of the GNU Lesser General Public
- * License along with FFmpeg; if not, write to the Free Software
- * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
- */
-
-#ifndef FFMPEG_PNG_H
-#define FFMPEG_PNG_H
-
-#include &lt;stdint.h&gt;
-
-#define PNG_COLOR_MASK_PALETTE    1
-#define PNG_COLOR_MASK_COLOR      2
-#define PNG_COLOR_MASK_ALPHA      4
-
-#define PNG_COLOR_TYPE_GRAY 0
-#define PNG_COLOR_TYPE_PALETTE  (PNG_COLOR_MASK_COLOR | PNG_COLOR_MASK_PALETTE)
-#define PNG_COLOR_TYPE_RGB        (PNG_COLOR_MASK_COLOR)
-#define PNG_COLOR_TYPE_RGB_ALPHA  (PNG_COLOR_MASK_COLOR | PNG_COLOR_MASK_ALPHA)
-#define PNG_COLOR_TYPE_GRAY_ALPHA (PNG_COLOR_MASK_ALPHA)
-
-#define PNG_FILTER_TYPE_LOCO   64
-#define PNG_FILTER_VALUE_NONE  0
-#define PNG_FILTER_VALUE_SUB   1
-#define PNG_FILTER_VALUE_UP    2
-#define PNG_FILTER_VALUE_AVG   3
-#define PNG_FILTER_VALUE_PAETH 4
-#define PNG_FILTER_VALUE_MIXED 5
-
-#define PNG_IHDR      0x0001
-#define PNG_IDAT      0x0002
-#define PNG_ALLIMAGE  0x0004
-#define PNG_PLTE      0x0008
-
-#define NB_PASSES 7
-
-extern const uint8_t ff_pngsig[8];
-extern const uint8_t ff_mngsig[8];
-
-/* Mask to determine which y pixels are valid in a pass */
-extern const uint8_t ff_png_pass_ymask[NB_PASSES];
-
-/* minimum x value */
-extern const uint8_t ff_png_pass_xmin[NB_PASSES];
-
-/* x shift to get row width */
-extern const uint8_t ff_png_pass_xshift[NB_PASSES];
-
-/* Mask to determine which pixels are valid in a pass */
-extern const uint8_t ff_png_pass_mask[NB_PASSES];
-
-extern void *ff_png_zalloc(void *opaque, unsigned int items,
-                           unsigned int size);
-
-extern void ff_png_zfree(void *opaque, void *ptr);
-
-extern int ff_png_get_nb_channels(int color_type);
-
-/* compute the row size of an interleaved pass */
-extern int ff_png_pass_row_size(int pass, int bits_per_pixel, int width);
-
-#endif /* FFMPEG_PNG_H */

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/pngdec.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/pngdec.c	2008-03-21 06:51:55 UTC (rev 3916)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/pngdec.c	2008-03-21 06:52:13 UTC (rev 3917)
@@ -20,7 +20,7 @@
  */
 #include &quot;avcodec.h&quot;
 #include &quot;bytestream.h&quot;
-#include &quot;png.h&quot;
+#include &quot;ff_png.h&quot;
 #include &quot;dsputil.h&quot;
 
 /* TODO:

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/pngenc.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/pngenc.c	2008-03-21 06:51:55 UTC (rev 3916)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/pngenc.c	2008-03-21 06:52:13 UTC (rev 3917)
@@ -20,7 +20,7 @@
  */
 #include &quot;avcodec.h&quot;
 #include &quot;bytestream.h&quot;
-#include &quot;png.h&quot;
+#include &quot;ff_png.h&quot;
 #include &lt;dsputil.h&gt;
 
 /* TODO:

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/CMakeLists.txt	2008-03-21 06:51:55 UTC (rev 3916)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/CMakeLists.txt	2008-03-21 06:52:13 UTC (rev 3917)
@@ -3,7 +3,8 @@
 SET(${ADM_LIB}_SRCS 
 	mpeg.c  utils.c  avio.c  aviobuf.c  cutils.c  img2.c  file.c  mpegtsenc.c
 	movenc.c  avienc.c  wav.c  mov.c  matroska.c  isom.c  isom.h  riff.c
-	flvenc.c  matroskaenc.c)
+	flvenc.c  matroskaenc.c
+	avc.c raw.c  riff.c)
 
 ADD_LIBRARY(${ADM_LIB} SHARED ${${ADM_LIB}_SRCS})
 ADD_TARGET_CFLAGS(${ADM_LIB} &quot;-I../ADM_lavcodec -I../ADM_lavutil -DHAVE_AV_CONFIG_H&quot;)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/flvenc.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/flvenc.c	2008-03-21 06:51:55 UTC (rev 3916)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/flvenc.c	2008-03-21 06:52:13 UTC (rev 3917)
@@ -340,3 +340,9 @@
     flv_write_trailer,
     .codec_tag= (const AVCodecTag*[]){flv_video_codec_ids, flv_audio_codec_ids, 0},
 };
+// MEANX
+int flvenc_init(void)
+{
+    av_register_output_format(&amp;flv_muxer);
+    return 0;
+}
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/riff.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/riff.c	2008-03-21 06:51:55 UTC (rev 3916)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/riff.c	2008-03-21 06:52:13 UTC (rev 3917)
@@ -343,7 +343,7 @@
 }
 #endif //CONFIG_MUXERS
 
-#ifdef CONFIG_DEMUXERS
+// MEANX #ifdef CONFIG_DEMUXERS
 /* We could be given one of the three possible structures here:
  * WAVEFORMAT, PCMWAVEFORMAT or WAVEFORMATEX. Each structure
  * is an expansion of the previous one with the fields added
@@ -410,8 +410,8 @@
         id = CODEC_ID_PCM_ZORK;
     return id;
 }
-#endif // CONFIG_DEMUXERS
-
+//#endif // CONFIG_DEMUXERS
+//#ifdef CONFIG_DEMUXERS //MEANX
 void ff_parse_specific_params(AVCodecContext *stream, int *au_rate, int *au_ssize, int *au_scale)
 {
     int gcd;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/ADM_mp.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/ADM_mp.cpp	2008-03-21 06:51:55 UTC (rev 3916)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/ADM_mp.cpp	2008-03-21 06:52:13 UTC (rev 3917)
@@ -21,14 +21,12 @@
 #include &quot;config.h&quot;
 #include &quot;fourcc.h&quot;
 
-#ifdef ADM_CPU_X86
+
 extern &quot;C&quot; {
 #include &quot;ADM_libraries/ADM_ffmpeg/ADM_lavcodec/avcodec.h&quot;
-}
-#endif
-
 #include &quot;ADM_libraries/ADM_ffmpeg/ADM_lavutil/avutil.h&quot;
 #include &quot;ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale.h&quot;
+}
 
 
 #include &quot;ADM_mp.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_imageResizer.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_imageResizer.cpp	2008-03-21 06:51:55 UTC (rev 3916)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_imageResizer.cpp	2008-03-21 06:52:13 UTC (rev 3917)
@@ -11,23 +11,16 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include &quot;config.h&quot;
-
-#include &lt;stdlib.h&gt;
-#include &lt;stdio.h&gt;
-#include &lt;string.h&gt;
-#include &quot;ADM_assert.h&quot;
 #include &quot;ADM_default.h&quot;
 
 #include &quot;ADM_image.h&quot;
 
-#ifdef ADM_CPU_X86
 extern &quot;C&quot; {
 #include &quot;ADM_libraries/ADM_ffmpeg/ADM_lavcodec/avcodec.h&quot;
-}
-#endif
 #include &quot;ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale.h&quot;
+}
 
+
 ADMImageResizer::ADMImageResizer(uint32_t ow, uint32_t oh, uint32_t dw, uint32_t dh)
 {
 	init(ow, oh, dw, dh, PIX_FMT_YUV420P, PIX_FMT_YUV420P);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_pp.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_pp.h	2008-03-21 06:51:55 UTC (rev 3916)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_pp.h	2008-03-21 06:52:13 UTC (rev 3917)
@@ -11,7 +11,9 @@
 //
 #ifndef ADMPP
 #define ADMPP
+extern &quot;C&quot; {
 #include &quot;../ADM_libpostproc/postprocess.h&quot;
+}
 typedef struct ADM_PP
 {
 	pp_context_t			*ppContext;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/ADM_lavformat.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/ADM_lavformat.cpp	2008-03-21 06:51:55 UTC (rev 3916)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/ADM_lavformat.cpp	2008-03-21 06:52:13 UTC (rev 3917)
@@ -680,7 +680,7 @@
 		// Flush
 		// Cause deadlock :
 		av_write_trailer(oc);
-		url_fclose(&amp;oc-&gt;pb);
+		url_fclose((oc-&gt;pb));
 
 	}
 	if(audio_st)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidMPdelogo.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidMPdelogo.cpp	2008-03-21 06:51:55 UTC (rev 3916)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_video/ADM_vidMPdelogo.cpp	2008-03-21 06:52:13 UTC (rev 3917)
@@ -13,14 +13,12 @@
 #include &quot;ADM_video/ADM_genvideo.hxx&quot;
 #include &quot;ADM_video/ADM_vidCommonFilter.h&quot;
 
-#ifdef ADM_CPU_X86
+
 extern &quot;C&quot; {
 #include &quot;ADM_libraries/ADM_ffmpeg/ADM_lavcodec/avcodec.h&quot;
-}
-#endif
-
 #include &quot;ADM_libraries/ADM_ffmpeg/ADM_lavutil/avutil.h&quot;
 #include &quot;ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale.h&quot;
+}
 
 #include &quot;ADM_filter/video_filters.h&quot;
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp	2008-03-21 06:51:55 UTC (rev 3916)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp	2008-03-21 06:52:13 UTC (rev 3917)
@@ -248,7 +248,8 @@
 
   
   //
-  uint8_t *iBuff[3],*oBuff[3];
+  const uint8_t *iBuff[3];
+   uint8_t *oBuff[3];
   int strideTab[3],strideTab2[3];                 
                                                                 
   oBuff[0]=YPLANE(data);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidForcedPP.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidForcedPP.cpp	2008-03-21 06:51:55 UTC (rev 3916)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidForcedPP.cpp	2008-03-21 06:52:13 UTC (rev 3917)
@@ -166,7 +166,8 @@
 		}
 			// we do postproc !
 			// keep
-			uint8_t *iBuff[3],*oBuff[3];
+			const uint8_t *iBuff[3];
+			uint8_t *oBuff[3];
 			int strideTab[3],strideTab2[3];			
 				
 				

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLResize.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLResize.cpp	2008-03-21 06:51:55 UTC (rev 3916)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMPLResize.cpp	2008-03-21 06:52:13 UTC (rev 3917)
@@ -26,14 +26,12 @@
 #include &quot;ADM_video/ADM_genvideo.hxx&quot;
 #include &quot;ADM_video/ADM_vidCommonFilter.h&quot;
 
-#ifdef ADM_CPU_X86
+
 extern &quot;C&quot; {
 #include &quot;ADM_libraries/ADM_ffmpeg/ADM_lavcodec/avcodec.h&quot;
-}
-#endif
-
 #include &quot;ADM_libraries/ADM_ffmpeg/ADM_lavutil/avutil.h&quot;
 #include &quot;ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale.h&quot;
+}
 #include &quot;ADM_filter/video_filters.h&quot;
 
 typedef struct alg

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMosaic.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMosaic.cpp	2008-03-21 06:51:55 UTC (rev 3916)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidMosaic.cpp	2008-03-21 06:52:13 UTC (rev 3917)
@@ -23,15 +23,16 @@
 
 #include &quot;ADM_userInterfaces/ADM_commonUI/DIA_factory.h&quot;
 
-#ifdef ADM_CPU_X86
+
 extern &quot;C&quot; {
 #include &quot;ADM_libraries/ADM_ffmpeg/ADM_lavcodec/avcodec.h&quot;
-}
-#endif
-
 #include &quot;ADM_libraries/ADM_ffmpeg/ADM_lavutil/avutil.h&quot;
 #include &quot;ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale.h&quot;
 
+}
+
+
+
 #include &quot;ADM_filter/video_filters.h&quot;
 #include &quot;ADM_video/ADM_cache.h&quot;
 #include &quot;ADM_vidMosaic_param.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVobSubRender.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVobSubRender.cpp	2008-03-21 06:51:55 UTC (rev 3916)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidVobSubRender.cpp	2008-03-21 06:52:13 UTC (rev 3917)
@@ -65,16 +65,15 @@
 #include &quot;ADM_vobsubinfo.h&quot;
 #include &quot;ADM_vidVobSub.h&quot;
 
-#ifdef ADM_CPU_X86
+
 extern &quot;C&quot; {
 #include &quot;ADM_libraries/ADM_ffmpeg/ADM_lavcodec/avcodec.h&quot;
-}
-#endif
-
 #include &quot;ADM_libraries/ADM_ffmpeg/ADM_lavutil/avutil.h&quot;
 #include &quot;ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale.h&quot;
+}
 
 
+
 #include &quot;ADM_osSupport/ADM_debugID.h&quot;
 #define MODULE_NAME MODULE_FILTER
 #include &quot;ADM_osSupport/ADM_debug.h&quot;


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001178.html">[Avidemux-svn-commit] r3916 - in	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg:	. ADM_lavcodec ADM_lavcodec/i386 ADM_lavformat ADM_lavutil	ADM_libpostproc ADM_libswscale
</A></li>
	<LI>Next message: <A HREF="001180.html">[Avidemux-svn-commit] r3918 -	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavutil
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1179">[ date ]</a>
              <a href="thread.html#1179">[ thread ]</a>
              <a href="subject.html#1179">[ subject ]</a>
              <a href="author.html#1179">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">More information about the Avidemux-svn-commit
mailing list</a><br>
</body></html>
