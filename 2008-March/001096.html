<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Avidemux-svn-commit] r3830 - in	branches/avidemux_2.5_branch_gruntster/avidemux: .	ADM_audiofilter ADM_inputs/ADM_avsproxy	ADM_inputs/ADM_matroska ADM_inputs/ADM_mp4	ADM_libraries/ADM_libmpeg2enc ADM_libraries/ADM_mplex	ADM_libraries/ADM_utilities ADM_outputs/oplug_avi ADM_script	ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk ADM_videoFilter
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/avidemux-svn-commit/2008-March/index.html" >
   <LINK REL="made" HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r3830%20-%20in%0A%09branches/avidemux_2.5_branch_gruntster/avidemux%3A%20.%0A%09ADM_audiofilter%20ADM_inputs/ADM_avsproxy%0A%09ADM_inputs/ADM_matroska%20ADM_inputs/ADM_mp4%0A%09ADM_libraries/ADM_libmpeg2enc%20ADM_libraries/ADM_mplex%0A%09ADM_libraries/ADM_utilities%20ADM_outputs/oplug_avi%20ADM_script%0A%09ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk%20ADM_videoFilter&In-Reply-To=%3C200803051922.m25JMfZi030280%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001095.html">
   <LINK REL="Next"  HREF="001097.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Avidemux-svn-commit] r3830 - in	branches/avidemux_2.5_branch_gruntster/avidemux: .	ADM_audiofilter ADM_inputs/ADM_avsproxy	ADM_inputs/ADM_matroska ADM_inputs/ADM_mp4	ADM_libraries/ADM_libmpeg2enc ADM_libraries/ADM_mplex	ADM_libraries/ADM_utilities ADM_outputs/oplug_avi ADM_script	ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk ADM_videoFilter</H1>
    <B>gruntster at mail.berlios.de</B> 
    <A HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r3830%20-%20in%0A%09branches/avidemux_2.5_branch_gruntster/avidemux%3A%20.%0A%09ADM_audiofilter%20ADM_inputs/ADM_avsproxy%0A%09ADM_inputs/ADM_matroska%20ADM_inputs/ADM_mp4%0A%09ADM_libraries/ADM_libmpeg2enc%20ADM_libraries/ADM_mplex%0A%09ADM_libraries/ADM_utilities%20ADM_outputs/oplug_avi%20ADM_script%0A%09ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk%20ADM_videoFilter&In-Reply-To=%3C200803051922.m25JMfZi030280%40sheep.berlios.de%3E"
       TITLE="[Avidemux-svn-commit] r3830 - in	branches/avidemux_2.5_branch_gruntster/avidemux: .	ADM_audiofilter ADM_inputs/ADM_avsproxy	ADM_inputs/ADM_matroska ADM_inputs/ADM_mp4	ADM_libraries/ADM_libmpeg2enc ADM_libraries/ADM_mplex	ADM_libraries/ADM_utilities ADM_outputs/oplug_avi ADM_script	ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk ADM_videoFilter">gruntster at mail.berlios.de
       </A><BR>
    <I>Wed Mar  5 20:22:41 CET 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001095.html">[Avidemux-svn-commit] r3829 -	branches/avidemux_2.5_branch_gruntster/cmake_compile_check
</A></li>
        <LI>Next message: <A HREF="001097.html">[Avidemux-svn-commit] r3831 - in	branches/avidemux_2.5_branch_mean/avidemux: .	ADM_core/include ADM_core/src ADM_libraries/ADM_mplex	ADM_libraries/ADM_utilities ADM_outputs/oplug_avi	ADM_outputs/oplug_dummy ADM_outputs/oplug_flv	ADM_outputs/oplug_mp4 ADM_outputs/oplug_mpeg	ADM_outputs/oplug_mpegFF ADM_toolkit	ADM_userInterfaces/ADM_GTK/ADM_gui2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1096">[ date ]</a>
              <a href="thread.html#1096">[ thread ]</a>
              <a href="subject.html#1096">[ subject ]</a>
              <a href="author.html#1096">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: gruntster
Date: 2008-03-05 20:22:27 +0100 (Wed, 05 Mar 2008)
New Revision: 3830

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiofilter_mixer.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_avsproxy/ADM_avsproxy_net.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_matroska/ADM_mkvIndexer.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mp4/ADM_mp4Analyzer.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/cpu_accel.cc
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/motionest.cc
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mplexmuxer.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/inputstrm.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/multiplexor.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/padstrm.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_imageLoader.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_aviwrite.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/DirectorySearch.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/DirectorySearch.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/mediactrl.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_guiResize.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDecDec.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidPulldown.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/gui_action.cpp
Log:
[Merge] integrate changes from 2.4 branch (r3821)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiofilter_mixer.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiofilter_mixer.cpp	2008-03-05 18:53:18 UTC (rev 3829)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiofilter_mixer.cpp	2008-03-05 19:22:27 UTC (rev 3830)
@@ -551,7 +551,6 @@
 
     uint32_t rd = 0;
     uint8_t *in,*out;
-    uint32_t window;
     int nbSampleMax=max/_wavHeader.channels;
     uint8_t input_channels = _previous-&gt;getInfo()-&gt;channels;
 
@@ -565,7 +564,7 @@
       {
         memset(&amp;_incomingBuffer[_head],0,sizeof(float) * input_channels);
         _tail=_head+input_channels;
-        printf(&quot;[Mixer] Warning asked %u symbols, a window is %u symbols\n&quot;,max,window);
+        printf(&quot;[Mixer] Warning asked %u symbols\n&quot;,max);
       }
       else
       {

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_avsproxy/ADM_avsproxy_net.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_avsproxy/ADM_avsproxy_net.cpp	2008-03-05 18:53:18 UTC (rev 3829)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_avsproxy/ADM_avsproxy_net.cpp	2008-03-05 19:22:27 UTC (rev 3830)
@@ -162,7 +162,6 @@
 uint8_t avsHeader::sendData(uint32_t cmd,uint32_t frame, uint32_t payload_size,uint8_t *payload)
 {
         SktHeader header;
-        int rx;
         memset(&amp;header,0,sizeof(header));
 
         header.cmd=cmd;
@@ -171,7 +170,7 @@
         header.magic=(uint32_t)MAGGIC;
         if(!txData(sizeof(header),(uint8_t *)&amp;header))
         {
-            printf(&quot;Error in senddata: header %d/%d\n&quot;,rx,sizeof(header));
+            printf(&quot;Error in senddata: header %d\n&quot;,sizeof(header));
             return 0;
         }
         int togo=payload_size;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_matroska/ADM_mkvIndexer.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_matroska/ADM_mkvIndexer.cpp	2008-03-05 18:53:18 UTC (rev 3829)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_matroska/ADM_mkvIndexer.cpp	2008-03-05 19:22:27 UTC (rev 3830)
@@ -127,7 +127,7 @@
 */
 uint8_t mkvHeader::indexBlock(ADM_ebml_file *parser,uint32_t len,uint32_t clusterTimeCodeMs)
 {
-  int lacing,nbLaces,entryFlags;
+  int lacing,nbLaces,entryFlags=0;
   //
   uint64_t tail=parser-&gt;tell()+len;
   // Read Track id 
@@ -147,6 +147,7 @@
       uint8_t flags=parser-&gt;readu8();
       uint32_t remaining=tail-parser-&gt;tell();
       lacing=((flags&gt;&gt;1)&amp;3);
+        // entryFlags ???
       //if(track) printf(&quot;This round %lld total:%lld\n&quot;,tail-parser-&gt;tell(),    _tracks[track]._sizeInBytes);
       switch(lacing)
       {

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mp4/ADM_mp4Analyzer.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mp4/ADM_mp4Analyzer.cpp	2008-03-05 18:53:18 UTC (rev 3829)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mp4/ADM_mp4Analyzer.cpp	2008-03-05 19:22:27 UTC (rev 3830)
@@ -640,7 +640,8 @@
         
                                             offset=8+len;
                                             printf(&quot;\navcC numOfPictureParSets  :%x\n&quot;, MKD8(offset++));
-                                            len=MKD16(offset++);
+                                            len=MKD16(offset);
+                                            offset++;
                                             printf(&quot;avcC Pic len              :%x\n&quot;,len);
                                             mixDump(VDEO.extraData+offset,len);
                                             left=0;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/cpu_accel.cc
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/cpu_accel.cc	2008-03-05 18:53:18 UTC (rev 3829)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/cpu_accel.cc	2008-03-05 19:22:27 UTC (rev 3830)
@@ -46,7 +46,7 @@
 {
    int32_t eax, ebx, ecx, edx;
    int32_t AMD;
-   int32_t caps;
+   int32_t caps=0;
 
    if(CpuCaps::hasMMX()) caps |=ACCEL_X86_MMX;
    if(CpuCaps::hasMMXEXT()) caps |=ACCEL_X86_MMXEXT;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/motionest.cc
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/motionest.cc	2008-03-05 18:53:18 UTC (rev 3829)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/motionest.cc	2008-03-05 19:22:27 UTC (rev 3830)
@@ -2048,7 +2048,7 @@
 			16);            /* block height */
 
 	bestdp_mc-&gt;pos.x = imindmv;
-	bestdp_mc-&gt;pos.x = jmindmv;
+	bestdp_mc-&gt;pos.y = jmindmv; // Meanx : Jw patch,  Seems logical but not sure
 	*vmcp = vmc_dp;
 }
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mplexmuxer.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mplexmuxer.cpp	2008-03-05 18:53:18 UTC (rev 3829)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mplexmuxer.cpp	2008-03-05 19:22:27 UTC (rev 3830)
@@ -289,7 +289,7 @@
                                 
                                 *(ptr+0)=(hh&lt;&lt;2)+(mm&gt;&gt;4);
                                 *(ptr+1)=((mm&amp;0xf)&lt;&lt;4)+8+(ss&gt;&gt;3);
-                                *(ptr+2)= ((ss&amp;7)&lt;&lt;5)+(ff&gt;&gt;1);
+                                *(ptr+2)= ((ss&amp;7)&lt;&lt;5)+(ms&gt;&gt;1);
                                 *(ptr+3)&amp;=0x7f;
                                 *(ptr+3)+=(ms&amp;1) &lt;&lt;7;
                                 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/inputstrm.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/inputstrm.cpp	2008-03-05 18:53:18 UTC (rev 3829)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/inputstrm.cpp	2008-03-05 19:22:27 UTC (rev 3830)
@@ -23,6 +23,7 @@
 
 #include &lt;config.h&gt;
 #include &lt;assert.h&gt;
+#include &lt;limits.h&gt;
 
 #include &quot;mjpeg_types.h&quot;
 #include &quot;inputstrm.hpp&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/multiplexor.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/multiplexor.cpp	2008-03-05 18:53:18 UTC (rev 3829)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/multiplexor.cpp	2008-03-05 19:22:27 UTC (rev 3830)
@@ -22,6 +22,7 @@
 #include &lt;config.h&gt;
 #include &lt;math.h&gt;
 #include &lt;stdlib.h&gt;
+#include &lt;string.h&gt;
 
 #include &lt;mjpeg_types.h&gt;
 #include &lt;mjpeg_logging.h&gt;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/padstrm.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/padstrm.cpp	2008-03-05 18:53:18 UTC (rev 3829)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/padstrm.cpp	2008-03-05 19:22:27 UTC (rev 3830)
@@ -23,6 +23,7 @@
 #ifdef HAVE_CONFIG_H
 #include &quot;config.h&quot;
 #endif
+#include &lt;string.h&gt;
 
 #include &quot;padstrm.hpp&quot;
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_imageLoader.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_imageLoader.cpp	2008-03-05 18:53:18 UTC (rev 3829)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_imageLoader.cpp	2008-03-05 19:22:27 UTC (rev 3830)
@@ -359,7 +359,7 @@
 			uint32_t *fcc;
 		    uint8_t fcc_tab[4];
 		    FILE *fd;
-		    uint32_t off,tag,count,size;
+		    uint32_t off,tag=0,count,size;
 
 		    // 1- identity the file type
 		    //

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_aviwrite.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_aviwrite.cpp	2008-03-05 18:53:18 UTC (rev 3829)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_aviwrite.cpp	2008-03-05 19:22:27 UTC (rev 3830)
@@ -359,6 +359,17 @@
 		extraLen=4;
 		}
 		break;
+#if 1		
+	case WAV_DTS:
+	case WAV_AC3: // Vista compatibility
+		 		  extra=(uint8_t *)wmaheader;
+		 		  extra[0]=0;
+		 		  extra[1]=0;
+				  extraLen=2;
+				  header-&gt;dwScale = 1;  
+				  wav.blockalign=1;	
+			break;
+#endif			
 	case WAV_MP3:							
 		  // then update VBR fields
 		  mp3vbr.cbsize = R16(12);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/DirectorySearch.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/DirectorySearch.cpp	2008-03-05 18:53:18 UTC (rev 3829)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/DirectorySearch.cpp	2008-03-05 19:22:27 UTC (rev 3830)
@@ -7,6 +7,7 @@
 Note:  This file is available under a BSD license.  Contact the author
 at <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">amistry at am-productions.biz</A>
 */
+#include &lt;string.h&gt;
 #include &quot;config.h&quot;
 #include &quot;DirectorySearch.h&quot;
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/DirectorySearch.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/DirectorySearch.h	2008-03-05 18:53:18 UTC (rev 3829)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/DirectorySearch.h	2008-03-05 19:22:27 UTC (rev 3830)
@@ -21,6 +21,7 @@
 #include &lt;sys/types.h&gt;
 #include &lt;sys/stat.h&gt;
 #include &lt;dirent.h&gt;
+#include &lt;string.h&gt;
 #endif
 #include &quot;StdFile.h&quot;
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp	2008-03-05 18:53:18 UTC (rev 3829)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp	2008-03-05 19:22:27 UTC (rev 3830)
@@ -414,7 +414,7 @@
 
         if(rw)
         {
-                        dialog=dialog = gtk_file_chooser_dialog_new (&quot;Save&quot;,
+                        dialog = gtk_file_chooser_dialog_new (&quot;Save&quot;,
                                       NULL,
                                       GTK_FILE_CHOOSER_ACTION_SAVE,
                                       GTK_STOCK_CANCEL, GTK_RESPONSE_CANCEL,
@@ -424,7 +424,7 @@
         }
         else
         {
-          dialog=dialog = gtk_file_chooser_dialog_new (&quot;Open File&quot;,
+          dialog = gtk_file_chooser_dialog_new (&quot;Open File&quot;,
                                       NULL,
                                       GTK_FILE_CHOOSER_ACTION_OPEN,
                                       GTK_STOCK_CANCEL, GTK_RESPONSE_CANCEL,

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/mediactrl.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/mediactrl.c	2008-03-05 18:53:18 UTC (rev 3829)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/mediactrl.c	2008-03-05 19:22:27 UTC (rev 3830)
@@ -35,7 +35,17 @@
 #include &lt;string.h&gt;
 #include &lt;errno.h&gt;
 #include &lt;linux/input.h&gt;
+#include &lt;linux/version.h&gt;
 
+#if LINUX_VERSION_CODE &lt; KERNEL_VERSION(2,6,0)
+struct input_id {
+        __u16 bustype;
+        __u16 vendor;
+        __u16 product;
+        __u16 version;
+};
+#endif
+
 #include &quot;mediactrl.h&quot;
 
 static char *_shuttle_name = &quot;Shuttle&quot;;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_guiResize.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_guiResize.cpp	2008-03-05 18:53:18 UTC (rev 3829)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_guiResize.cpp	2008-03-05 19:22:27 UTC (rev 3830)
@@ -41,7 +41,7 @@
 #include &quot;ADM_assert.h&quot;
 
 
-static int getResizeParams(uint32_t * w, uint32_t * h, uint32_t * algo,uint32_t w,uint32_t h,uint32_t fps);
+static int getResizeParams(uint32_t * w, uint32_t * h, uint32_t * algo,uint32_t ow,uint32_t oh,uint32_t fps);
 
 
 extern uint8_t DIA_resize(uint32_t *width,uint32_t *height,uint32_t *algo,uint32_t originalw, uint32_t originalh,uint32_t fps1000);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDecDec.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDecDec.cpp	2008-03-05 18:53:18 UTC (rev 3829)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDecDec.cpp	2008-03-05 19:22:27 UTC (rev 3830)
@@ -912,6 +912,7 @@
 		//return src;
 		//memcpy(data,src,*len);
 
+                GETFRAME(useframe, src); // MEANX : not sure (jw detected a problem here)
 		data-&gt;duplicate(src);
 		vidCache-&gt;unlockAll();		
 		return 1; // return src;			

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidPulldown.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidPulldown.cpp	2008-03-05 18:53:18 UTC (rev 3829)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidPulldown.cpp	2008-03-05 19:22:27 UTC (rev 3830)
@@ -131,7 +131,7 @@
 		uint32_t dflags,dlen;
 #define GET_FRAME(x,y) if(!_in-&gt;getFrameNumberNoAlloc(x, &amp;dlen,_uncompressed[y],&amp;dflags)) \
  {\
-				 	 	printf(&quot;Cannot get frame %lu\n&quot;,target+i);\
+				 	 	printf(&quot;Cannot get frame %lu\n&quot;,x);\
 					 	return 0;     \
 				 }
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/gui_action.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/gui_action.cpp	2008-03-05 18:53:18 UTC (rev 3829)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/gui_action.cpp	2008-03-05 19:22:27 UTC (rev 3830)
@@ -1,4 +1,5 @@
 #include &lt;stdio.h&gt;
+#include &lt;strings.h&gt;
 #include &lt;vector&gt;
 using std::vector;
 #include &lt;utility&gt;


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001095.html">[Avidemux-svn-commit] r3829 -	branches/avidemux_2.5_branch_gruntster/cmake_compile_check
</A></li>
	<LI>Next message: <A HREF="001097.html">[Avidemux-svn-commit] r3831 - in	branches/avidemux_2.5_branch_mean/avidemux: .	ADM_core/include ADM_core/src ADM_libraries/ADM_mplex	ADM_libraries/ADM_utilities ADM_outputs/oplug_avi	ADM_outputs/oplug_dummy ADM_outputs/oplug_flv	ADM_outputs/oplug_mp4 ADM_outputs/oplug_mpeg	ADM_outputs/oplug_mpegFF ADM_toolkit	ADM_userInterfaces/ADM_GTK/ADM_gui2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1096">[ date ]</a>
              <a href="thread.html#1096">[ thread ]</a>
              <a href="subject.html#1096">[ subject ]</a>
              <a href="author.html#1096">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">More information about the Avidemux-svn-commit
mailing list</a><br>
</body></html>
