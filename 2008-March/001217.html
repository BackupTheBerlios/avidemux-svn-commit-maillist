<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Avidemux-svn-commit] r3955 - in	branches/avidemux_2.5_branch_gruntster/avidemux:	ADM_coreUI/include ADM_coreUI/src	ADM_userInterfaces/ADM_GTK/ADM_dialogFactory	ADM_userInterfaces/ADM_NONE/ADM_dialogFactory	ADM_userInterfaces/ADM_QT4/ADM_dialogFactory
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/avidemux-svn-commit/2008-March/index.html" >
   <LINK REL="made" HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r3955%20-%20in%0A%09branches/avidemux_2.5_branch_gruntster/avidemux%3A%0A%09ADM_coreUI/include%20ADM_coreUI/src%0A%09ADM_userInterfaces/ADM_GTK/ADM_dialogFactory%0A%09ADM_userInterfaces/ADM_NONE/ADM_dialogFactory%0A%09ADM_userInterfaces/ADM_QT4/ADM_dialogFactory&In-Reply-To=%3C200803301944.m2UJi8SV004103%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001216.html">
   <LINK REL="Next"  HREF="001218.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Avidemux-svn-commit] r3955 - in	branches/avidemux_2.5_branch_gruntster/avidemux:	ADM_coreUI/include ADM_coreUI/src	ADM_userInterfaces/ADM_GTK/ADM_dialogFactory	ADM_userInterfaces/ADM_NONE/ADM_dialogFactory	ADM_userInterfaces/ADM_QT4/ADM_dialogFactory</H1>
    <B>mean at BerliOS</B> 
    <A HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r3955%20-%20in%0A%09branches/avidemux_2.5_branch_gruntster/avidemux%3A%0A%09ADM_coreUI/include%20ADM_coreUI/src%0A%09ADM_userInterfaces/ADM_GTK/ADM_dialogFactory%0A%09ADM_userInterfaces/ADM_NONE/ADM_dialogFactory%0A%09ADM_userInterfaces/ADM_QT4/ADM_dialogFactory&In-Reply-To=%3C200803301944.m2UJi8SV004103%40sheep.berlios.de%3E"
       TITLE="[Avidemux-svn-commit] r3955 - in	branches/avidemux_2.5_branch_gruntster/avidemux:	ADM_coreUI/include ADM_coreUI/src	ADM_userInterfaces/ADM_GTK/ADM_dialogFactory	ADM_userInterfaces/ADM_NONE/ADM_dialogFactory	ADM_userInterfaces/ADM_QT4/ADM_dialogFactory">mean at mail.berlios.de
       </A><BR>
    <I>Sun Mar 30 21:44:08 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001216.html">[Avidemux-svn-commit] r3954 - branches/avidemux_2.5_branch_gruntster
</A></li>
        <LI>Next message: <A HREF="001218.html">[Avidemux-svn-commit] r3956 -	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1217">[ date ]</a>
              <a href="thread.html#1217">[ thread ]</a>
              <a href="subject.html#1217">[ subject ]</a>
              <a href="author.html#1217">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: mean
Date: 2008-03-30 21:44:07 +0200 (Sun, 30 Mar 2008)
New Revision: 3955

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_coreUI_internal.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_factory.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_factory.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_dialogFactory.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_filesel.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_frame.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_menu.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialogFactory/FAC_toggle.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_frame.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_bitrate.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_filesel.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_menu.cpp
Log:
[Merge] Factory manual merge

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_coreUI_internal.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_coreUI_internal.h	2008-03-30 19:40:47 UTC (rev 3954)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_coreUI_internal.h	2008-03-30 19:44:07 UTC (rev 3955)
@@ -91,6 +91,9 @@
 // Dir
 	CREATE_DIR_T         *CreateDir;
 	DELETE_DIA_ELEM_T    *DestroyDir;
+// Frame
+	CREATE_FRAME_T       *CreateFrame;
+	DELETE_DIA_ELEM_T    *DestroyFrame;
 }FactoryDescriptor;
 //
 uint8_t DIA_factoryInit(FactoryDescriptor *d);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_factory.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_factory.h	2008-03-30 19:40:47 UTC (rev 3954)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/include/DIA_factory.h	2008-03-30 19:44:07 UTC (rev 3955)
@@ -281,14 +281,25 @@
         const diaMenuEntry *menu,const char *tip);
 typedef diaElem  *(CREATE_MENUDYNAMIC_T)(uint32_t *intValue,const char *itle, uint32_t nb, 
          diaMenuEntryDynamic **menu,const char *tip);
-class diaElemMenuDynamic : public diaElem
+
+class diaElemMenuDynamicBase : public diaElem
 {
+protected:	
 diaMenuEntryDynamic **menu;
 uint32_t            nbMenu;
 dialElemLink        links[MENU_MAX_lINK];
 uint32_t            nbLink;
 
 public:
+	diaElemMenuDynamicBase() : diaElem(ELEM_MENU) {};
+  
+  virtual   ~diaElemMenuDynamicBase() {};
+  virtual uint8_t   link(diaMenuEntryDynamic *entry,uint32_t onoff,diaElem *w)=0;
+};
+
+class diaElemMenuDynamic : public diaElemMenuDynamicBase
+{
+public:
   diaElemMenuDynamic(uint32_t *intValue,const char *itle, uint32_t nb, 
                diaMenuEntryDynamic **menu,const char *tip=NULL);
   
@@ -301,13 +312,20 @@
   virtual void      finalize(void);
 };
 
- 
-class diaElemMenu : public diaElem
+class diaElemMenuBase : public diaElem
 {
-const diaMenuEntry  *menu;
-uint32_t            nbMenu;
-dialElemLink        links[MENU_MAX_lINK];
-uint32_t            nbLink;
+protected:
+	const diaMenuEntry  *menu;
+	uint32_t            nbMenu;
+	dialElemLink        links[MENU_MAX_lINK];
+	uint32_t            nbLink;
+public:	
+	diaElemMenuBase(void) : diaElem(ELEM_MENU) {};
+	virtual ~diaElemMenuBase(void) {};
+	virtual uint8_t   link(diaMenuEntry *entry,uint32_t onoff,diaElem *w)=0;
+};
+class diaElemMenu : public diaElemMenuBase
+{
 
 diaElemMenuDynamic  *dyna;
 diaMenuEntryDynamic  **menus;
@@ -327,13 +345,22 @@
 /*************************************************/
 #include &quot;ADM_encoder/ADM_vidEncode.hxx&quot;
 typedef diaElem  *(CREATE_BITRATE_T)(COMPRES_PARAMS *p,const char *toggleTitle,const char *tip);
-class diaElemBitrate : public diaElem
+class diaElemBitrateBase : public diaElem
 {
   protected:
     COMPRES_PARAMS    copy;
     uint32_t maxQ;
 public:
   
+	diaElemBitrateBase(void) : diaElem(ELEM_BITRATE) {};
+  virtual ~diaElemBitrateBase() {} ;
+  virtual void setMaxQz(uint32_t qz)=0;
+};
+class diaElemBitrate : public diaElemBitrateBase
+{
+  protected:
+public:
+  
   diaElemBitrate(COMPRES_PARAMS *p,const char *toggleTitle,const char *tip=NULL);
   virtual ~diaElemBitrate() ;
   void setMe(void *dialog, void *opaque,uint32_t line);
@@ -345,29 +372,51 @@
 
 /*************************************************/
 typedef diaElem *CREATE_FILE_T(uint32_t writeMode,char **filename,const char *toggleTitle,  const char *defaultSuffix ,const char *tip);
-class diaElemFile : public diaElem
+class diaElemFileBase : public diaElem
 {
 
 protected:
     const char * defaultSuffix;
 public:
   
+	diaElemFileBase(void) : diaElem(ELEM_FILE_READ){};
+  virtual ~diaElemFileBase() {};
+  virtual void   changeFile(void)=0;
+  uint32_t _write;
+
+};
+class diaElemFile : public diaElemFileBase
+{
+
+protected:
+    
+public:
+  
   diaElemFile(uint32_t writeMode,char **filename,const char *toggleTitle,
               const char *defaultSuffix = 0,const char *tip=NULL);
   virtual ~diaElemFile() ;
   void setMe(void *dialog, void *opaque,uint32_t line);
   void getMe(void);
-  uint32_t _write;
+  
   void   changeFile(void);
   void   enable(uint32_t onoff);
 };
 /*************************************************/
 typedef diaElem *CREATE_DIR_T(char **filename,const char *toggleTitle,const char *tip);
-class diaElemDirSelect : public diaElem
+class diaElemDirSelectBase : public diaElem
 {
 
 public:
   
+	diaElemDirSelectBase(void) :diaElem(ELEM_DIR_SELECT) {};
+  virtual ~diaElemDirSelectBase() {} ;
+  virtual void changeFile(void)=0;
+};
+class diaElemDirSelect : public diaElemDirSelectBase
+{
+
+public:
+  
   diaElemDirSelect(char **filename,const char *toggleTitle,const char *tip=NULL);
   virtual ~diaElemDirSelect() ;
   void setMe(void *dialog, void *opaque,uint32_t line);
@@ -438,13 +487,24 @@
 };
 /**********************************************/
 #define DIA_MAX_FRAME 10
-class diaElemFrame : public diaElem
+class diaElemFrameBase :public diaElem
 {
+protected:
   uint32_t frameSize;
   uint32_t nbElems;
   diaElem  *elems[DIA_MAX_FRAME];
 public:
   
+	diaElemFrameBase(void) : diaElem(ELEM_FRAME) {};
+  virtual ~diaElemFrameBase() {};
+  virtual void swallow(diaElem *widget)=0;
+};
+typedef diaElem *(CREATE_FRAME_T )(const char *toggleTitle, const char *tip);
+class diaElemFrame : public diaElemFrameBase
+{
+  
+public:
+  
   diaElemFrame(const char *toggleTitle, const char *tip=NULL);
   virtual ~diaElemFrame() ;
   void setMe(void *dialog, void *opaque,uint32_t line);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_factory.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_factory.cpp	2008-03-30 19:40:47 UTC (rev 3954)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreUI/src/DIA_factory.cpp	2008-03-30 19:44:07 UTC (rev 3955)
@@ -224,7 +224,7 @@
 // ****************** diaElemMenu ********************
 diaElemMenu ::diaElemMenu(uint32_t *intValue,const char *itle, uint32_t nb, 
         const diaMenuEntry *menu,const char *tip):
-	diaElem(ELEM_MENU)
+	diaElemMenuBase()
 {
 	ADM_assert(Factory); 
 	internalPointer=Factory-&gt;CreateMenu(intValue, itle,  nb,  menu,tip);
@@ -242,7 +242,7 @@
 	}
 uint8_t   diaElemMenu::link(diaMenuEntry *entry,uint32_t onoff,diaElem *w)
 {
-	diaElemMenu *cast=(diaElemMenu *)internalPointer;
+	diaElemMenuBase *cast=(diaElemMenuBase *)internalPointer;
 	cast-&gt;link(entry,onoff,w);
 }
 void      diaElemMenu::updateMe(void)
@@ -258,7 +258,7 @@
 // ****************** diaElemMenuDynamic ********************
 diaElemMenuDynamic ::diaElemMenuDynamic(uint32_t *intValue,const char *itle, uint32_t nb, 
          diaMenuEntryDynamic **menu,const char *tip):
-	diaElem(ELEM_MENU)
+        	 diaElemMenuDynamicBase()
 {
 	ADM_assert(Factory); 
 	internalPointer=Factory-&gt;CreateMenuDynamic(intValue, itle,  nb,  menu,tip);
@@ -276,7 +276,7 @@
 	}
 uint8_t   diaElemMenuDynamic::link(diaMenuEntryDynamic *entry,uint32_t onoff,diaElem *w)
 {
-	diaElemMenuDynamic *cast=(diaElemMenuDynamic *)internalPointer;
+	diaElemMenuDynamicBase *cast=(diaElemMenuDynamicBase *)internalPointer;
 	cast-&gt;link(entry,onoff,w);
 }
 void   diaElemMenuDynamic::finalize(void)
@@ -307,7 +307,7 @@
 
 // ****************** diaElemBitrate ********************
 diaElemBitrate ::diaElemBitrate(COMPRES_PARAMS *p,const char *toggleTitle,const char *tip):
-	diaElem(ELEM_BITRATE)
+	diaElemBitrateBase()
 {
 	ADM_assert(Factory); 
 	internalPointer=Factory-&gt;CreateBitrate(p,toggleTitle,tip);
@@ -324,15 +324,14 @@
 }
 void diaElemBitrate::setMaxQz(uint32_t qz)
 {
-	diaElemBitrate *cast=(diaElemBitrate *)internalPointer;
+	diaElemBitrateBase *cast=(diaElemBitrateBase *)internalPointer;
 		cast-&gt;setMaxQz(qz);
 	
 }
 DIA_MKSTUBS(diaElemBitrate)
 // ****************** diaElemFile ********************
 diaElemFile ::diaElemFile(uint32_t writeMode,char **filename,const char *toggleTitle,
-        const char *defaultSuffix ,const char *tip):
-	diaElem(ELEM_FILE_READ)
+        const char *defaultSuffix ,const char *tip)
 {
 	ADM_assert(Factory); 
 	internalPointer=Factory-&gt;CreateFile(writeMode,filename,toggleTitle,defaultSuffix,tip);
@@ -350,14 +349,14 @@
 	}
 void      diaElemFile::changeFile(void)
 	{ 
-	diaElemFile *cast=(diaElemFile *)internalPointer;
+	diaElemFileBase *cast=(diaElemFileBase *)internalPointer;
 	cast-&gt;changeFile();
 	}
 DIA_MKSTUBS(diaElemFile)
 
 // ****************** diaElemDirSelect ********************
 diaElemDirSelect ::diaElemDirSelect(char **filename,const char *toggleTitle,const char *tip):
-	diaElem(ELEM_DIR_SELECT)
+	diaElemDirSelectBase()
 {
 	ADM_assert(Factory); 
 	internalPointer=Factory-&gt;CreateDir( filename, toggleTitle, tip);
@@ -375,9 +374,40 @@
 	}
 void      diaElemDirSelect::changeFile(void)
 	{ 
-	diaElemDirSelect *cast=(diaElemDirSelect *)internalPointer;
+	diaElemDirSelectBase *cast=(diaElemDirSelectBase *)internalPointer;
 	cast-&gt;changeFile();
 	}
 DIA_MKSTUBS(diaElemDirSelect)
-
+// ****************** diaElemFrame ********************
+diaElemFrame ::diaElemFrame(const char *toggleTitle, const char *tip):
+	diaElemFrameBase()
+{
+	ADM_assert(Factory); 
+	internalPointer=Factory-&gt;CreateFrame( toggleTitle, tip);
+}
+diaElemFrame ::~diaElemFrame()
+{
+	ADM_assert(Factory); 
+	Factory-&gt;DestroyFrame(internalPointer);
+	internalPointer=NULL;
+}
+void      diaElemFrame::enable(uint32_t onoff)
+	{ 
+		ADM_assert(internalPointer); 
+		internalPointer-&gt;enable(onoff); 
+	}
+void diaElemFrame::swallow(diaElem *widget)
+{
+	diaElemFrameBase *cast=(diaElemFrameBase *)internalPointer;
+		cast-&gt;swallow(widget);	
+}
+ 
+void diaElemFrame::finalize(void)
+{
+	internalPointer-&gt;finalize();
+		
+}
+ 
+DIA_MKSTUBS(diaElemFrame)
+//
 // EOF

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_dialogFactory.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_dialogFactory.cpp	2008-03-30 19:40:47 UTC (rev 3954)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_dialogFactory.cpp	2008-03-30 19:44:07 UTC (rev 3955)
@@ -325,8 +325,9 @@
 extern DELETE_DIA_ELEM_T    gtkDestroyFile;
 extern CREATE_DIR_T         gtkCreateDir;
 extern DELETE_DIA_ELEM_T    gtkDestroyDir;
+CREATE_FRAME_T				gtkCreateFrame;
+extern DELETE_DIA_ELEM_T    gtkDestroyFrame;
 
-
 //************
 static FactoryDescriptor GtkFactoryDescriptor=
 {
@@ -378,7 +379,10 @@
 	&amp;gtkDestroyFile,
 	// Dir
 	&amp;gtkCreateDir,
-	&amp;gtkDestroyDir
+	&amp;gtkDestroyDir,
+	// Frame
+	&amp;gtkCreateFrame,
+	&amp;gtkDestroyFrame
 		
 };
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_filesel.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_filesel.cpp	2008-03-30 19:40:47 UTC (rev 3954)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_filesel.cpp	2008-03-30 19:44:07 UTC (rev 3955)
@@ -18,11 +18,11 @@
 #include &quot;prefs.h&quot;
 namespace ADM_GtkFactory
 {
-class diaElemFile : public diaElem
+class diaElemFile : public diaElemFileBase
 {
 
 protected:
-    const char * defaultSuffix;
+    
 public:
   
   diaElemFile(uint32_t writeMode,char **filename,const char *toggleTitle,
@@ -30,11 +30,11 @@
   virtual ~diaElemFile() ;
   void setMe(void *dialog, void *opaque,uint32_t line);
   void getMe(void);
-  uint32_t _write;
+  
   void   changeFile(void);
   void   enable(uint32_t onoff);
 };
-class diaElemDirSelect : public diaElem
+class diaElemDirSelect : public diaElemDirSelectBase
 {
 
 public:
@@ -54,9 +54,10 @@
 
 diaElemFile::diaElemFile(uint32_t writemode,char **filename,const char *toggleTitle,
                          const char * defaultSuffix,const char *selectFileDesc)
-  : diaElem(ELEM_FILE_READ),
-    defaultSuffix (defaultSuffix)
+  : diaElemFileBase()
+    
 {
+  this-&gt;defaultSuffix=defaultSuffix;
   param=(void *)filename;
   paramTitle=toggleTitle;
 
@@ -213,7 +214,7 @@
 
 /*********************************************************************/
 diaElemDirSelect::diaElemDirSelect(char **filename,const char *toggleTitle,const char *selectDirDesc)
-  : diaElem(ELEM_DIR_SELECT)
+  : diaElemDirSelectBase()
 {
   param=(void *)filename;
   paramTitle=toggleTitle;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_frame.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_frame.cpp	2008-03-30 19:40:47 UTC (rev 3954)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_frame.cpp	2008-03-30 19:44:07 UTC (rev 3955)
@@ -15,10 +15,23 @@
 
 #include &quot;../ADM_toolkit_gtk/toolkit_gtk.h&quot;
 #include &quot;DIA_factory.h&quot;
-
-
+namespace ADM_GtkFactory
+{
+class diaElemFrame : public diaElemFrameBase
+{
+  
+public:
+  
+  diaElemFrame(const char *toggleTitle, const char *tip=NULL);
+  virtual ~diaElemFrame() ;
+  void setMe(void *dialog, void *opaque,uint32_t line);
+  void getMe(void) ;
+  void swallow(diaElem *widget);
+  void enable(uint32_t onoff);
+  void finalize(void);
+};
 diaElemFrame::diaElemFrame(const char *toggleTitle, const char *tip)
-  : diaElem(ELEM_FRAME)
+  : diaElemFrameBase()
 {
   param=NULL;
   paramTitle=toggleTitle;
@@ -102,4 +115,17 @@
    GtkWidget *widget=(GtkWidget *)myWidget;
    gtk_widget_set_sensitive(GTK_WIDGET(myWidget),onoff);
 }
+} // End of namespace
+//****************************Hoook*****************
+
+diaElem  *gtkCreateFrame(const char *toggleTitle, const char *tip)
+{
+	return new  ADM_GtkFactory::diaElemFrame(toggleTitle,tip);
+}
+void gtkDestroyFrame(diaElem *e)
+{
+	ADM_GtkFactory::diaElemFrame *a=(ADM_GtkFactory::diaElemFrame *)e;
+	delete a;
+}
 //EOF
+//EOF

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_menu.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_menu.cpp	2008-03-30 19:40:47 UTC (rev 3954)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_menu.cpp	2008-03-30 19:44:07 UTC (rev 3955)
@@ -21,13 +21,10 @@
 static void cb_menus(void *w,void *p);
 
 
-class diaElemMenuDynamic : public diaElem
+class diaElemMenuDynamic : public diaElemMenuDynamicBase
 {
 protected:
-	diaMenuEntryDynamic **menu;
-	uint32_t            nbMenu;
-	dialElemLink        links[MENU_MAX_lINK];
-	uint32_t            nbLink;
+	
 
 public:
   diaElemMenuDynamic(uint32_t *intValue,const char *itle, uint32_t nb, 
@@ -42,13 +39,10 @@
   virtual void      finalize(void);
 };
 //**********************
-class diaElemMenu : public diaElem
+class diaElemMenu : public diaElemMenuBase
 {
 protected:
-	const diaMenuEntry  *menu;
-	uint32_t            nbMenu;
-	dialElemLink        links[MENU_MAX_lINK];
-	uint32_t            nbLink;
+	
 
 	diaElemMenuDynamic  *dyna;
 	diaMenuEntryDynamic  **menus;	
@@ -67,7 +61,7 @@
 //**********************
 diaElemMenu::diaElemMenu(uint32_t *intValue,const char *itle, uint32_t nb, 
                const diaMenuEntry *menu,const char *tip)
-  : diaElem(ELEM_MENU)
+  : diaElemMenuBase()
 {
   param=(void *)intValue;
   paramTitle=itle;
@@ -125,7 +119,7 @@
 //*******************************
 diaElemMenuDynamic::diaElemMenuDynamic(uint32_t *intValue,const char *itle, uint32_t nb, 
                 diaMenuEntryDynamic **menu,const char *tip)
-  : diaElem(ELEM_MENU)
+  : diaElemMenuDynamicBase()
 {
   param=(void *)intValue;
   paramTitle=itle;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialogFactory/FAC_toggle.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialogFactory/FAC_toggle.cpp	2008-03-30 19:40:47 UTC (rev 3954)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialogFactory/FAC_toggle.cpp	2008-03-30 19:44:07 UTC (rev 3955)
@@ -140,7 +140,7 @@
 
 diaElemMenu::diaElemMenu(uint32_t *intValue,const char *itle, uint32_t nb, 
                const diaMenuEntry *menu,const char *tip)
-  : diaElem(ELEM_MENU)
+  : diaElemMenuBase()
 {
 }
 
@@ -167,7 +167,7 @@
 //*****************
 diaElemFile::diaElemFile(uint32_t write,char **filename,const char *toggleTitle,
                          const char *defaultSuffix, const char *tip)
-  : diaElem(ELEM_FILE_READ)
+  : diaElemFileBase()
 {
  
 }
@@ -189,7 +189,7 @@
 {}
 #include &quot;ADM_encoder/ADM_vidEncode.hxx&quot;
   diaElemBitrate::diaElemBitrate(COMPRES_PARAMS *p,const char *toggleTitle,const char *tip)
-  : diaElem(ELEM_BITRATE)
+  : diaElemBitrateBase()
 {
   
 }
@@ -242,7 +242,7 @@
   
 }
 //******************************************************
-diaElemDirSelect::diaElemDirSelect(char **filename,const char *toggleTitle,const char *tip)  : diaElem(ELEM_NOTCH) {}
+diaElemDirSelect::diaElemDirSelect(char **filename,const char *toggleTitle,const char *tip)  : diaElemDirSelectBase() {}
 diaElemDirSelect::~diaElemDirSelect() {}
 void diaElemDirSelect::setMe(void *dialog, void *opaque,uint32_t line) {}
 void diaElemDirSelect::getMe(void) {}
@@ -260,7 +260,7 @@
 //******************************************************
 diaElemMenuDynamic::diaElemMenuDynamic(uint32_t *intValue,const char *itle, uint32_t nb, 
                 diaMenuEntryDynamic **menu,const char *tip)
-  : diaElem(ELEM_MENU)
+  : diaElemMenuDynamicBase()
 {
 }
 
@@ -288,7 +288,7 @@
 }
 //******************************************************
 diaElemFrame::diaElemFrame(const char *toggleTitle, const char *tip)
-  : diaElem(ELEM_FRAME)
+  : diaElemFrameBase()
 {
   
 }

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_frame.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_frame.cpp	2008-03-30 19:40:47 UTC (rev 3954)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_frame.cpp	2008-03-30 19:44:07 UTC (rev 3955)
@@ -34,7 +34,7 @@
 extern const char *shortkey(const char *);
 
 diaElemFrame::diaElemFrame(const char *toggleTitle, const char *tip)
-  : diaElem(ELEM_FRAME)
+  : diaElemFrameBase()
 {
   param=NULL;
   paramTitle=shortkey(toggleTitle);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_bitrate.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_bitrate.cpp	2008-03-30 19:40:47 UTC (rev 3954)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_bitrate.cpp	2008-03-30 19:44:07 UTC (rev 3955)
@@ -201,7 +201,7 @@
 
 //**********************************
 diaElemBitrate::diaElemBitrate(COMPRES_PARAMS *p,const char *toggleTitle,const char *tip)
-  : diaElem(ELEM_BITRATE)
+  : diaElemBitrateBase()
 {
  
   param=(void *)p;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_filesel.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_filesel.cpp	2008-03-30 19:40:47 UTC (rev 3954)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_filesel.cpp	2008-03-30 19:44:07 UTC (rev 3955)
@@ -140,9 +140,10 @@
 
 diaElemFile::diaElemFile(uint32_t writemode,char **filename,const char *toggleTitle,
                          const char *defaultSuffix,const char *selectFileDesc)
-  : diaElem(ELEM_FILE_READ),
-    defaultSuffix (defaultSuffix)
+  : diaElemFileBase()
+    
 {
+  this-&gt;defaultSuffix=defaultSuffix;
   param=(void *)filename;
   paramTitle=shortkey(toggleTitle);
 
@@ -188,7 +189,8 @@
 }
 
 //****************************
-diaElemDirSelect::diaElemDirSelect(char **filename,const char *toggleTitle,const char *selectDirDesc) : diaElem(ELEM_DIR_SELECT)
+diaElemDirSelect::diaElemDirSelect(char **filename,const char *toggleTitle,const char *selectDirDesc) :
+	diaElemDirSelectBase()
 {
   param=(void *)filename;
   paramTitle=shortkey(toggleTitle);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_menu.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_menu.cpp	2008-03-30 19:40:47 UTC (rev 3954)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_menu.cpp	2008-03-30 19:44:07 UTC (rev 3955)
@@ -66,7 +66,7 @@
 
 diaElemMenu::diaElemMenu(uint32_t *intValue,const char *itle, uint32_t nb, 
                const diaMenuEntry *menu,const char *tip)
-  : diaElem(ELEM_MENU)
+  : diaElemMenuBase()
 {
   param=(void *)intValue;
   paramTitle=itle;
@@ -128,7 +128,7 @@
 
 diaElemMenuDynamic::diaElemMenuDynamic(uint32_t *intValue,const char *itle, uint32_t nb, 
                 diaMenuEntryDynamic **menu,const char *tip)
-  : diaElem(ELEM_MENU)
+  : diaElemMenuDynamicBase()
 {
   param=(void *)intValue;
   paramTitle=shortkey(itle);


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001216.html">[Avidemux-svn-commit] r3954 - branches/avidemux_2.5_branch_gruntster
</A></li>
	<LI>Next message: <A HREF="001218.html">[Avidemux-svn-commit] r3956 -	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1217">[ date ]</a>
              <a href="thread.html#1217">[ thread ]</a>
              <a href="subject.html#1217">[ subject ]</a>
              <a href="author.html#1217">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">More information about the Avidemux-svn-commit
mailing list</a><br>
</body></html>
