<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Avidemux-svn-commit] r3813 - in branches/avidemux_2.5_branch_gruntster: . avidemux avidemux/ADM_audio avidemux/ADM_audiodevice avidemux/ADM_audiofilter avidemux/ADM_editor avidemux/ADM_filter avidemux/ADM_inputs/ADM_avsproxy avidemux/ADM_inputs/ADM_inpics avidemux/ADM_inputs/ADM_mpegdemuxer avidemux/ADM_inputs/ADM_openDML avidemux/ADM_libraries/ADM_lavcodec avidemux/ADM_libraries/ADM_lavcodec/i386 avidemux/ADM_libraries/ADM_lavformat avidemux/ADM_libraries/ADM_libwrapper avidemux/ADM_libraries/ADM_mplex avidemux/ADM_libraries/ADM_smjs avidemux/ADM_libraries/ADM_utilities avidemux/ADM_osSupport avidemux/ADM_outputs/oplug_avi avidemux/ADM_outputs/oplug_dummy avidemux/ADM_outputs/oplug_flv avidemux/ADM_outputs/oplug_mp4 avidemux/ADM_outputs/oplug_mpeg avidemux/ADM_outputs/oplug_mpegFF avidemux/ADM_requant avidemux/ADM_script avidemux/ADM_toolkit avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2 ! avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui avidemux/ADM_userInterfaces/ADM_commonUI avidemux/ADM_videoFilter cmake
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/avidemux-svn-commit/2008-March/index.html" >
   <LINK REL="made" HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r3813%20-%20in%0A%20branches/avidemux_2.5_branch_gruntster%3A%20.%20avidemux%20avidemux/ADM_audio%0A%20avidemux/ADM_audiodevice%20avidemux/ADM_audiofilter%20avidemux/ADM_editor%0A%20avidemux/ADM_filter%20avidemux/ADM_inputs/ADM_avsproxy%0A%20avidemux/ADM_inputs/ADM_inpics%20avidemux/ADM_inputs/ADM_mpegdemuxer%0A%20avidemux/ADM_inputs/ADM_openDML%20avidemux/ADM_libraries/ADM_lavcodec%0A%20avidemux/ADM_libraries/ADM_lavcodec/i386%0A%20avidemux/ADM_libraries/ADM_lavformat%20avidemux/ADM_libraries/ADM_libwrapper%0A%20avidemux/ADM_libraries/ADM_mplex%20avidemux/ADM_libraries/ADM_smjs%0A%20avidemux/ADM_libraries/ADM_utilities%20avidemux/ADM_osSupport%0A%20avidemux/ADM_outputs/oplug_avi%20avidemux/ADM_outputs/oplug_dummy%0A%20avidemux/ADM_outputs/oplug_flv%20avidemux/ADM_outputs/oplug_mp4%0A%20avidemux/ADM_outputs/oplug_mpeg%20avidemux/ADM_outputs/oplug_mpegFF%0A%20avidemux/ADM_requant%20avidemux/ADM_script%20avidemux/ADM_toolkit%0A%20avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog%0A%20avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory%0A%20avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2%20%21%0A%20avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk%0A%20avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog%0A%20avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui%0A%20avidemux/ADM_userInterfaces/ADM_commonUI%20avidemux/ADM_videoFilter%20cmake&In-Reply-To=%3C200803021601.m22G1XN1005014%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001078.html">
   <LINK REL="Next"  HREF="001080.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Avidemux-svn-commit] r3813 - in branches/avidemux_2.5_branch_gruntster: . avidemux avidemux/ADM_audio avidemux/ADM_audiodevice avidemux/ADM_audiofilter avidemux/ADM_editor avidemux/ADM_filter avidemux/ADM_inputs/ADM_avsproxy avidemux/ADM_inputs/ADM_inpics avidemux/ADM_inputs/ADM_mpegdemuxer avidemux/ADM_inputs/ADM_openDML avidemux/ADM_libraries/ADM_lavcodec avidemux/ADM_libraries/ADM_lavcodec/i386 avidemux/ADM_libraries/ADM_lavformat avidemux/ADM_libraries/ADM_libwrapper avidemux/ADM_libraries/ADM_mplex avidemux/ADM_libraries/ADM_smjs avidemux/ADM_libraries/ADM_utilities avidemux/ADM_osSupport avidemux/ADM_outputs/oplug_avi avidemux/ADM_outputs/oplug_dummy avidemux/ADM_outputs/oplug_flv avidemux/ADM_outputs/oplug_mp4 avidemux/ADM_outputs/oplug_mpeg avidemux/ADM_outputs/oplug_mpegFF avidemux/ADM_requant avidemux/ADM_script avidemux/ADM_toolkit avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2 ! avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui avidemux/ADM_userInterfaces/ADM_commonUI avidemux/ADM_videoFilter cmake</H1>
    <B>gruntster at mail.berlios.de</B> 
    <A HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r3813%20-%20in%0A%20branches/avidemux_2.5_branch_gruntster%3A%20.%20avidemux%20avidemux/ADM_audio%0A%20avidemux/ADM_audiodevice%20avidemux/ADM_audiofilter%20avidemux/ADM_editor%0A%20avidemux/ADM_filter%20avidemux/ADM_inputs/ADM_avsproxy%0A%20avidemux/ADM_inputs/ADM_inpics%20avidemux/ADM_inputs/ADM_mpegdemuxer%0A%20avidemux/ADM_inputs/ADM_openDML%20avidemux/ADM_libraries/ADM_lavcodec%0A%20avidemux/ADM_libraries/ADM_lavcodec/i386%0A%20avidemux/ADM_libraries/ADM_lavformat%20avidemux/ADM_libraries/ADM_libwrapper%0A%20avidemux/ADM_libraries/ADM_mplex%20avidemux/ADM_libraries/ADM_smjs%0A%20avidemux/ADM_libraries/ADM_utilities%20avidemux/ADM_osSupport%0A%20avidemux/ADM_outputs/oplug_avi%20avidemux/ADM_outputs/oplug_dummy%0A%20avidemux/ADM_outputs/oplug_flv%20avidemux/ADM_outputs/oplug_mp4%0A%20avidemux/ADM_outputs/oplug_mpeg%20avidemux/ADM_outputs/oplug_mpegFF%0A%20avidemux/ADM_requant%20avidemux/ADM_script%20avidemux/ADM_toolkit%0A%20avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog%0A%20avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory%0A%20avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2%20%21%0A%20avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk%0A%20avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog%0A%20avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui%0A%20avidemux/ADM_userInterfaces/ADM_commonUI%20avidemux/ADM_videoFilter%20cmake&In-Reply-To=%3C200803021601.m22G1XN1005014%40sheep.berlios.de%3E"
       TITLE="[Avidemux-svn-commit] r3813 - in branches/avidemux_2.5_branch_gruntster: . avidemux avidemux/ADM_audio avidemux/ADM_audiodevice avidemux/ADM_audiofilter avidemux/ADM_editor avidemux/ADM_filter avidemux/ADM_inputs/ADM_avsproxy avidemux/ADM_inputs/ADM_inpics avidemux/ADM_inputs/ADM_mpegdemuxer avidemux/ADM_inputs/ADM_openDML avidemux/ADM_libraries/ADM_lavcodec avidemux/ADM_libraries/ADM_lavcodec/i386 avidemux/ADM_libraries/ADM_lavformat avidemux/ADM_libraries/ADM_libwrapper avidemux/ADM_libraries/ADM_mplex avidemux/ADM_libraries/ADM_smjs avidemux/ADM_libraries/ADM_utilities avidemux/ADM_osSupport avidemux/ADM_outputs/oplug_avi avidemux/ADM_outputs/oplug_dummy avidemux/ADM_outputs/oplug_flv avidemux/ADM_outputs/oplug_mp4 avidemux/ADM_outputs/oplug_mpeg avidemux/ADM_outputs/oplug_mpegFF avidemux/ADM_requant avidemux/ADM_script avidemux/ADM_toolkit avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2 ! avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui avidemux/ADM_userInterfaces/ADM_commonUI avidemux/ADM_videoFilter cmake">gruntster at mail.berlios.de
       </A><BR>
    <I>Sun Mar  2 17:01:33 CET 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001078.html">[Avidemux-svn-commit] r3812 - in	branches/avidemux_2.5_branch_mean/avidemux: .	ADM_core/include ADM_core/src ADM_editor	ADM_inputs/ADM_inpics ADM_inputs/ADM_mpegdemuxer	ADM_libraries/ADM_lavformat ADM_libraries/ADM_utilities	ADM_script ADM_toolkit ADM_userInterfaces/ADM_GTK/ADM_dialog	ADM_userInterfaces/ADM_GTK/ADM_gui2	ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk	ADM_userInterfaces/ADM_QT4/ADM_dialog	ADM_userInterfaces/ADM_QT4/ADM_gui
</A></li>
        <LI>Next message: <A HREF="001080.html">[Avidemux-svn-commit] r3814 - in	branches/avidemux_2.5_branch_gruntster/avidemux: .	ADM_libraries/ADM_utilities ADM_userInterfaces/ADM_commonUI
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1079">[ date ]</a>
              <a href="thread.html#1079">[ thread ]</a>
              <a href="subject.html#1079">[ subject ]</a>
              <a href="author.html#1079">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: gruntster
Date: 2008-03-02 17:00:49 +0100 (Sun, 02 Mar 2008)
New Revision: 3813

Modified:
   branches/avidemux_2.5_branch_gruntster/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_assert.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audio/audio_packetizer.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/ADM_audiodevice.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/ADM_deviceArts.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/ADM_deviceEsd.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/ADM_deviceJack.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/ADM_deviceWin32.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/ADM_deviceWin32.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/ADM_deviceoss.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/audio_out.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiofilter_normalize.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edit.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter_declaration.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter_dylib.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_avsproxy/ADM_avsproxy_net.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_inpics/bitmap.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_video.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_odml_audio.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_odml_odml.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_openDML.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_riff.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavcodec/fft.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavcodec/i386/dsputil_mmx.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavformat/ADM_lavformat.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libwrapper/libwrapper.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libwrapper/libwrapper.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libwrapper/libwrapper_amrnb.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libwrapper/libwrapper_dca.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mplexin.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mplexmuxer.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mthread.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/cpu_accel.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_smjs/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_gettext.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_imageUtils.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/avifmt.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/avifmt2.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/default.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/prefs.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_cpuCap.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_crashdump.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_fileio.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_misc.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_misc.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_quota.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/TLK_clock.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/win32.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisave.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_pack.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_unpack.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavedual.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_aviwrite.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_savesmart.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_requant/tcrequant.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSAvidemux.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSFunctions.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSGlobal.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/DirectorySearch.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/DirectorySearch.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/StdFile.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_toolkit/automation.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_toolkit/bitmap.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_integer.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_gtkRender.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/eggtray_win32.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/eggtrayicon.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/toolkit.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/toolkit_dialog.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_encoding.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/T_preview.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/GUI_render.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/GUI_render.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/GUI_sdlRender.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidAnimated.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidParticle.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidParticle.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSRTload.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/avi_vars.h
   branches/avidemux_2.5_branch_gruntster/avidemux/gtk_gui.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/gui_savenew.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/guiplay.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/main.cpp
   branches/avidemux_2.5_branch_gruntster/cmake/config.h.cmake
Log:
[CMake] Cygwin support and removal of ADM_WIN32 and WIN32_CLASH

Modified: branches/avidemux_2.5_branch_gruntster/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/CMakeLists.txt	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/CMakeLists.txt	2008-03-02 16:00:49 UTC (rev 3813)
@@ -41,13 +41,17 @@
 
 IF (ADM_OS_WINDOWS)
 	SET(CYG_MANGLING 1)
-	SET(ADM_WIN32 1)	# needs to be removed one day...
 ENDIF (ADM_OS_WINDOWS)
 
 IF (ADM_OS_DARWIN)
 	SET(CYG_MANGLING 1)
 ENDIF (ADM_OS_DARWIN)
 
+IF (CYGWIN)
+	SET(CMAKE_C_FLAGS &quot;${CMAKE_C_FLAGS} -mwin32&quot;)
+	SET(CMAKE_CXX_FLAGS &quot;${CMAKE_CXX_FLAGS} -mwin32&quot;)
+ENDIF (CYGWIN)
+
 IF (ADM_OS_LINUX)
 	SET(USE_JOG 1)		# jog shuttle is only available on Linux due to its interface
 ENDIF (ADM_OS_LINUX)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_assert.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_assert.h	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_assert.h	2008-03-02 16:00:49 UTC (rev 3813)
@@ -62,7 +62,7 @@
 }
 #endif
 // Compatibility with fprintf etc.. with long long &amp; win32
-#ifdef ADM_WIN32
+#ifdef __WIN32
         #define LLX &quot;I64x&quot;
         #define LLU &quot;I64u&quot;
         

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audio/audio_packetizer.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audio/audio_packetizer.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audio/audio_packetizer.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -22,12 +22,9 @@
 #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;
 #include &lt;string.h&gt;
-#include &quot;ADM_assert.h&quot;
 #include &lt;math.h&gt;
-#ifdef ADM_WIN32
-#include &lt;io.h&gt;
-#endif
 
+#include &quot;ADM_assert.h&quot;
 #include &quot;default.h&quot;
 #include &quot;ADM_editor/ADM_Video.h&quot;
 #include &quot;fourcc.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/ADM_audiodevice.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/ADM_audiodevice.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/ADM_audiodevice.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -44,7 +44,7 @@
 #include &quot;ADM_audiodevice/ADM_deviceSDL.h&quot;
 #endif
 
-#ifdef ADM_WIN32
+#ifdef __WIN32
 #include &quot;ADM_audiodevice/ADM_deviceWin32.h&quot;
 #endif
 
@@ -165,7 +165,7 @@
 			AVDM_switch(DEVICE_OSS);			
 			printf(&quot;\n Using OSS\n&quot;);
 		#else
-			#ifdef ADM_WIN32
+			#ifdef __WIN32
 			AVDM_switch(DEVICE_WIN32);
 			#else
                 #ifdef USE_ESD
@@ -208,19 +208,19 @@
 								break;
 
 #endif
-#if defined(OSS_SUPPORT) &amp;&amp; !defined(ADM_WIN32)
+#if defined(OSS_SUPPORT)
 		  case  DEVICE_OSS :
 								device=new 	 ossAudioDevice;
 								currentDevice=DEVICE_OSS;;
 								break;
 #endif
-#if defined(USE_ESD) &amp;&amp; !defined(ADM_WIN32)
+#if defined(USE_ESD)
 		  case  DEVICE_ESD :
 								device=new 	 esdAudioDevice;
 								currentDevice=DEVICE_ESD;;
 								break;
 #endif
-#if defined(USE_JACK) &amp;&amp; !defined(ADM_WIN32)
+#if defined(USE_JACK)
 		  case  DEVICE_JACK:
 								device=new 	 jackAudioDevice;
 								currentDevice=DEVICE_JACK;
@@ -247,7 +247,7 @@
 								break;
 #endif
 
-#ifdef ADM_WIN32
+#ifdef __WIN32
 		case DEVICE_WIN32:
 								device=new win32AudioDevice;
 								currentDevice=DEVICE_WIN32;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/ADM_deviceArts.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/ADM_deviceArts.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/ADM_deviceArts.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -17,7 +17,6 @@
 
 #include &quot;default.h&quot;
 
-#ifndef ADM_WIN32 
 #ifdef USE_ARTS
 #include &lt;artsc.h&gt;
 
@@ -119,5 +118,4 @@
 void dummy_art_func( void)
  {
 }
-#endif
-#endif
+#endif
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/ADM_deviceEsd.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/ADM_deviceEsd.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/ADM_deviceEsd.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -17,8 +17,7 @@
  ***************************************************************************/
 #include &quot;config.h&quot;
 
-#if defined( USE_ESD ) &amp;&amp; !defined(ADM_WIN32)
-
+#if defined(USE_ESD)
 #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;
 #include &lt;unistd.h&gt;
@@ -27,7 +26,6 @@
 #include &lt;fcntl.h&gt;
 #include &lt;sys/ioctl.h&gt;
 #include &lt;esd.h&gt;
- 
 
 #include &quot;default.h&quot;
 #include &quot;ADM_audiodevice.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/ADM_deviceJack.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/ADM_deviceJack.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/ADM_deviceJack.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -7,13 +7,11 @@
 
 #include &quot;config.h&quot;
 
-#if defined(USE_JACK) &amp;&amp; !defined(ADM_WIN32)
-
+#if defined(USE_JACK)
 #include &lt;unistd.h&gt;
 #include &lt;stdio.h&gt;
 #include &lt;stdint.h&gt;
 
-
 #include &quot;default.h&quot;
 #include &quot;ADM_audiodevice.h&quot;
 #include &quot;ADM_assert.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/ADM_deviceWin32.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/ADM_deviceWin32.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/ADM_deviceWin32.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -12,7 +12,7 @@
 
 #include &quot;config.h&quot;
 
-#ifdef ADM_WIN32
+#ifdef __WIN32
 #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;
 #include &lt;errno.h&gt;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/ADM_deviceWin32.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/ADM_deviceWin32.h	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/ADM_deviceWin32.h	2008-03-02 16:00:49 UTC (rev 3813)
@@ -9,7 +9,7 @@
 // Copyright: See COPYING file that comes with this distribution
 //
 //
-#ifdef ADM_WIN32
+#ifdef __WIN32
 
 class win32AudioDevice : public audioDevice
 {

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/ADM_deviceoss.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/ADM_deviceoss.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/ADM_deviceoss.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -16,8 +16,7 @@
  ***************************************************************************/
 #include &quot;config.h&quot;
 
-#if defined( OSS_SUPPORT ) &amp;&amp; !defined(ADM_WIN32)
-
+#ifdef OSS_SUPPORT
 #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;
 #include &lt;unistd.h&gt;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/audio_out.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/audio_out.h	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiodevice/audio_out.h	2008-03-02 16:00:49 UTC (rev 3813)
@@ -53,10 +53,10 @@
 #ifdef __APPLE__
 	MKADID(COREAUDIO),
 #endif
-#if	defined(USE_SDL) &amp;&amp; !defined(ADM_WIN32)	
+#if	defined(USE_SDL) &amp;&amp; !defined(__WIN32)	
 	MKADID(SDL),
 #endif	
-#ifdef ADM_WIN32	
+#ifdef __WIN32	
 	MKADID(WIN32),
 #endif	
 #ifdef USE_ESD	

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiofilter_normalize.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiofilter_normalize.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiofilter/audiofilter_normalize.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -40,16 +40,13 @@
 
 extern AVDMGenericAudioStream *currentaudiostream;
 
-
-#ifndef ADM_WIN32
-#ifdef ADM_BSD_FAMILY
-                #define POW10(x) powf(10.0,x)
+#ifdef __WIN32
+#define POW10(x)   pow(10,x)
+#elif defined(ADM_BSD_FAMILY)
+#define POW10(x) powf(10.0,x)
 #else
-                #define POW10(x)  pow10f(x)
+#define POW10(x)  pow10f(x)
 #endif
-#else
-                #define POW10(x)   pow(10,x)
-#endif
 
 #define LINEAR_TO_DB(x) (20.*log10(x))
 #define DB_TO_LINEAR(x) (POW10((x/20.)))

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edit.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edit.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edit.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -22,19 +22,12 @@
 #include &lt;string.h&gt;
 #include &lt;fcntl.h&gt;
 #include &lt;errno.h&gt;
-#include &lt;unistd.h&gt;
-#include &lt;pthread.h&gt;
-#define WIN32_CLASH
-//#include &lt;unistd.h&gt;
-#ifdef ADM_WIN32
-#include &quot;sys/stat.h&quot;
+
+#if defined(__MINGW32__) || defined(ADM_BSD_FAMILY)
+#include &lt;sys/stat.h&gt;
 #endif
-#ifdef ADM_BSD_FAMILY
-#include &quot;sys/stat.h&quot;
-#endif
-#include &quot;ADM_assert.h&quot;
 
-#include &quot;config.h&quot;
+#include &quot;ADM_assert.h&quot;
 #include &quot;fourcc.h&quot;
 #include &quot;avio.hxx&quot;
 #include &quot;ADM_editor/ADM_edit.hxx&quot;
@@ -358,7 +351,7 @@
                     printf(&quot;Filesystem is writable\n&quot;);
 		}else if( errno == EROFS ){
 		  char *tmpdir = getenv(&quot;TMPDIR&quot;);
-#ifdef ADM_WIN32
+#ifdef __WIN32
                         printf(&quot;Filesystem is not writable, looking for somewhere else\n&quot;);
 			if( !tmpdir )
 				tmpdir = &quot;c:&quot;;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter_declaration.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter_declaration.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter_declaration.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -184,10 +184,10 @@
             QT_TR_NOOP(&quot;Create a video made of 6 mini windows, very useful to do DVD menus.&quot;),
             VF_ANIMATED,1,animated_create,animated_script);
 	REGISTERX(&quot;computeaverage&quot;,QT_TR_NOOP(&quot;Compute Average&quot;),QT_TR_NOOP(&quot;Compute average luma value for each pixel throughout all frames, and save to file&quot;),VF_COMPUTEAVERAGE,1,computeaverage_create,computeaverage_script);
-	REGISTERX(&quot;eraser&quot;,QT_TR_NOOP(&quot;Eraser&quot;),QT_TR_NOOP(&quot;\&quot;Erase\&quot; arbitrary areas of each frame&quot;),VF_ERASER,1,eraser_create,eraser_script);
-	REGISTERX(&quot;swissarmyknife&quot;,QT_TR_NOOP(&quot;Swiss Army Knife&quot;),QT_TR_NOOP(&quot;Apply operation like P'=P*A, P-A, P+A, etc. using a convolution, rolling average, image from file, or constant&quot;),VF_SWISSARMYKNIFE,1,swissarmyknife_create,swissarmyknife_script);
+	//REGISTERX(&quot;eraser&quot;,QT_TR_NOOP(&quot;Eraser&quot;),QT_TR_NOOP(&quot;\&quot;Erase\&quot; arbitrary areas of each frame&quot;),VF_ERASER,1,eraser_create,eraser_script);
+	//REGISTERX(&quot;swissarmyknife&quot;,QT_TR_NOOP(&quot;Swiss Army Knife&quot;),QT_TR_NOOP(&quot;Apply operation like P'=P*A, P-A, P+A, etc. using a convolution, rolling average, image from file, or constant&quot;),VF_SWISSARMYKNIFE,1,swissarmyknife_create,swissarmyknife_script);
 	REGISTERX(&quot;threshold&quot;,QT_TR_NOOP(&quot;Threshold&quot;),QT_TR_NOOP(&quot;Force too-bright/too-dim pixels to 0 and the rest to 255 or vice-versa&quot;),VF_THRESHOLD,1,threshold_create,threshold_script);
-	REGISTERX(&quot;particlelist&quot;,QT_TR_NOOP(&quot;Particle List&quot;),QT_TR_NOOP(&quot;Identify 'particles' (groups of pixels)&quot;),VF_PARTICLELIST,1,particle_create,particle_script);
+	//REGISTERX(&quot;particlelist&quot;,QT_TR_NOOP(&quot;Particle List&quot;),QT_TR_NOOP(&quot;Identify 'particles' (groups of pixels)&quot;),VF_PARTICLELIST,1,particle_create,particle_script);
 
 // Does not work
 //        REGISTERX(&quot;unblend&quot;,&quot;Unblend by Bach&quot;,VF_UNBLEND,1,unblend_create,unblend_script);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter_dylib.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter_dylib.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_filter/filter_dylib.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -17,12 +17,9 @@
 
 //#define USE_EDLL
 
-
 #include &lt;stdio.h&gt;
-#include &lt;stdlib.h&gt;
-#include &lt;string.h&gt;
-#define WIN32_CLASH
-#ifdef ADM_WIN32
+
+#ifdef __MINGW32__
 #include &lt;windows.h&gt; 
 #ifdef USE_EDLL
 #include &quot;edll/edll.h&quot;
@@ -32,25 +29,19 @@
 #include &lt;dlfcn.h&gt;
 #endif
 
+#include &quot;default.h&quot;
 #include &quot;ADM_assert.h&quot;
 
-#include &quot;fourcc.h&quot;
-#include &quot;avio.hxx&quot;
-
 #include &quot;ADM_toolkit/toolkit.hxx&quot;
 #include &quot;ADM_toolkit/filesel.h&quot;
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
 #include &quot;ADM_video/ADM_genvideo.hxx&quot;
 #include &quot;ADM_filter/video_filters.h&quot;
-#include &quot;ADM_video/ADM_vidPartial.h&quot;
-#include &quot;avi_vars.h&quot;
 
 #include &quot;ADM_osSupport/ADM_debugID.h&quot;
 #define MODULE_NAME MODULE_PREVIEW
 #include &quot;ADM_osSupport/ADM_debug.h&quot;
-#include &quot;ADM_osSupport/ADM_quota.h&quot;
 
-#ifdef ADM_WIN32
+#ifdef __MINGW32__
 #ifdef USE_EDLL
 #define TYPEOFHANDLE     edll_module *
 #define OPENLIB(x)       edll_open(x)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_avsproxy/ADM_avsproxy_net.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_avsproxy/ADM_avsproxy_net.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_avsproxy/ADM_avsproxy_net.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -1,10 +1,10 @@
 #include &quot;config.h&quot;
-#ifdef ADM_WIN32
-#include &quot;windows.h&quot;
-#include &quot;winbase.h&quot;
-#include &quot;io.h&quot;
-#include &quot;winsock2.h&quot;
-#define WIN32_CLASH
+
+#ifdef __MINGW32__
+#include &lt;windows.h&gt;
+#include &lt;winbase.h&gt;
+#include &lt;io.h&gt;
+#include &lt;winsock2.h&gt;
 #else
 #include &lt;sys/types.h&gt;
 #include &lt;sys/socket.h&gt;
@@ -12,8 +12,6 @@
 #include &lt;arpa/inet.h&gt;
 #endif
 
-
-
 #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;
 #include &lt;string.h&gt;
@@ -32,10 +30,10 @@
 
 uint8_t avsHeader::bindMe(uint32_t port)
 {
- #ifndef ADM_WIN32
- mySocket = socket(PF_INET, SOCK_STREAM, 0);
- #else
+ #ifdef __MINGW32__
  mySocket = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);
+ #else
+ mySocket = socket(PF_INET, SOCK_STREAM, 0);
  #endif
     if(mySocket==-1)
     {
@@ -64,10 +62,10 @@
     if(mySocket)
     {
         int er;
-#ifndef ADM_WIN32        
-        er=shutdown(mySocket,SHUT_RDWR);
+#ifdef __MINGW32__
+		er=shutdown(mySocket,SD_BOTH);
 #else
-        er=shutdown(mySocket,SD_BOTH);
+        er=shutdown(mySocket,SHUT_RDWR);
 #endif
         if(er) printf(&quot;[avsProxy]Error when socket shutdown  %d (socket %d)\n&quot;,er,mySocket);
         mySocket=0;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_inpics/bitmap.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_inpics/bitmap.h	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_inpics/bitmap.h	2008-03-02 16:00:49 UTC (rev 3813)
@@ -15,8 +15,6 @@
  *                                                                         *
  ***************************************************************************/
 
-
-
 typedef struct BITMAPHEADER
 {
     uint32_t size;
@@ -42,11 +40,13 @@
 */
 } BITMAPHEADER;
 
+#ifndef _WINGDI_
 typedef struct BITMAPFILEHEADER
 {
-   uint16_t    type;
-	 uint32_t    size;
-   int16_t     xHotspot;
-   int16_t     yHotspot;
-   uint32_t    offsetToBits;
+   uint16_t    bfType;
+   uint32_t    bfSize;
+   int16_t     bfReserved1;
+   int16_t     bfReserved2;
+   uint32_t    bfOffBits;
 }  BITMAPFILEHEADER;
+#endif

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_video.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_video.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_video.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -403,7 +403,7 @@
                                                 ADM_assert(0);
                                         }
                                         str--;
-#ifdef ADM_WIN32                                        
+#ifdef __WIN32                                        
                                         sscanf(str,&quot;%c:%I64x,%I64x,%x&quot;,&amp;imgtype,&amp;imgabs,&amp;imgrel,&amp;imgsize);
 #else                                      
                                         sscanf(str,&quot;%c:%llx,%llx,%x&quot;,&amp;imgtype,&amp;imgabs,&amp;imgrel,&amp;imgsize);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_odml_audio.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_odml_audio.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_odml_audio.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -26,12 +26,9 @@
 #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;
 #include &lt;string.h&gt;
-#include &quot;ADM_assert.h&quot;
 #include &lt;math.h&gt;
-#ifdef ADM_WIN32
-#include &lt;io.h&gt;
-#endif
 
+#include &quot;ADM_assert.h&quot;
 #include &quot;default.h&quot;
 #include &quot;ADM_editor/ADM_Video.h&quot;
 #include &quot;fourcc.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_odml_odml.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_odml_odml.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_odml_odml.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -38,7 +38,7 @@
 
 //#define OPENDML_VERBOSE
 
-#if defined( ADM_WIN32) || defined(ARCH_X86_64)
+#if defined( __WIN32) || defined(ARCH_X86_64)
 	#define PPACKED __attribute__ ((packed, gcc_struct))
 #else
 	#define PPACKED 
@@ -242,7 +242,7 @@
 		fcc=read32();
 		len=read32();
                 aprintf(&quot;subindex : %lu size %lu (%lx)&quot;,i,len,len); 
-#ifdef ADM_WIN32
+#ifdef __WIN32
                 aprintf(&quot;Seeking to %I64x\n&quot;,superEntries[i].offset);
 #else                             
                 aprintf(&quot;Seeking to %llx\n&quot;,superEntries[i].offset);
@@ -254,7 +254,7 @@
 			printf(&quot;Problem reading secondary index (%u/%u) trying to continue \n&quot;,i,masterIndex.nbEntryInUse);
 			return 1;
 		}	
-#ifdef ADM_WIN32                
+#ifdef __WIN32                
                 aprintf(&quot;Base : %I64x\n&quot;,second.base);
 #else                                
 		aprintf(&quot;Base : %llx\n&quot;,second.base);
@@ -277,7 +277,7 @@
 					(*index)[count].intra=0;
 				else 
 					(*index)[count].intra=AVI_KEY_FRAME;
-#ifdef ADM_WIN32
+#ifdef __WIN32
                                 aprintf(&quot;Frame.off : %I64x, size %I64x\n&quot;,
                                         _idx[count].offset,
                                         _idx[count].size);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_openDML.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_openDML.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_openDML.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -240,7 +240,7 @@
 		// now read up each parts...
 		//____________________________
 		
-#ifdef ADM_WIN32
+#ifdef __WIN32
                 
 #define DUMP_TRACK(i) aprintf(&quot; at %I64u (%I64x) size : %I64u (%I64x)\n&quot;, \
                                 _Tracks[i].strh.offset,\

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_riff.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_riff.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_riff.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -30,7 +30,7 @@
 
 uint64_t riffParser::getPos( void ) 
 { 
-#ifdef ADM_WIN32
+#ifdef __WIN32
         aprintf(&quot;pos : %I64u / %I64u \n&quot;,curPos,ftello(fd));
 #else
 	aprintf(&quot;pos : %llu / %llu \n&quot;,curPos,ftello(fd));
@@ -59,7 +59,7 @@
 }
 uint8_t riffParser::endReached(void)
 {
-#ifdef ADM_WIN32
+#ifdef __WIN32
         aprintf(&quot;Cur : %I64u end : %I64u left: %I64u\n&quot;,curPos,endPos,endPos-curPos);
 #else
 	aprintf(&quot;Cur : %llu end : %llu left: %llu\n&quot;,curPos,endPos,endPos-curPos);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavcodec/fft.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavcodec/fft.c	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavcodec/fft.c	2008-03-02 16:00:49 UTC (rev 3813)
@@ -75,7 +75,7 @@
                 /* 3DNow! for K6-2/3 */
                 s-&gt;fft_calc = ff_fft_calc_3dn;
             }
-#ifndef ADM_WIN32	// GRUNTSTER
+#ifndef __WIN32	// GRUNTSTER
 			else if (has_vectors &amp; MM_SSE) {
                 /* SSE for P3/P4 */
                 s-&gt;imdct_calc = ff_imdct_calc_sse;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavcodec/i386/dsputil_mmx.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavcodec/i386/dsputil_mmx.c	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavcodec/i386/dsputil_mmx.c	2008-03-02 16:00:49 UTC (rev 3813)
@@ -3644,7 +3644,7 @@
         }
         if(mm_flags &amp; MM_3DNOWEXT)
             c-&gt;vector_fmul_reverse = vector_fmul_reverse_3dnow2;
-#ifndef ADM_WIN32	// GRUNTSTER
+#ifndef __WIN32	// GRUNTSTER
         if(mm_flags &amp; MM_SSE){
             c-&gt;vorbis_inverse_coupling = vorbis_inverse_coupling_sse;
             c-&gt;vector_fmul = vector_fmul_sse;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavformat/ADM_lavformat.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavformat/ADM_lavformat.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_lavformat/ADM_lavformat.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -19,7 +19,7 @@
  ***************************************************************************/
 
 #include &quot;config.h&quot;
-#define WIN32_CLASH
+
 #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;
 #include &lt;math.h&gt;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libwrapper/libwrapper.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libwrapper/libwrapper.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libwrapper/libwrapper.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -3,7 +3,7 @@
 #include &lt;stdlib.h&gt;
 #include &lt;stdio.h&gt;
 #include &quot;default.h&quot;
-#ifdef ADM_WIN32
+#ifdef __MINGW32__
 #include &lt;windows.h&gt;
 #else
 #include &lt;dlfcn.h&gt;
@@ -23,7 +23,7 @@
 	{
 		printf(&quot;Unloading library 0x%08x\n&quot;, hinstLib);
 
-	#ifdef ADM_WIN32
+	#ifdef __MINGW32__
 		FreeLibrary((HINSTANCE) hinstLib);
 	#else
 		dlclose(hinstLib);
@@ -36,7 +36,7 @@
 	return initialised;
 }
 
-#ifdef ADM_WIN32
+#ifdef __MINGW32__
 char* ADM_LibWrapper::formatMessage(uint32_t msgCode)
 {
 	char* lpMsgBuf;
@@ -49,7 +49,7 @@
 
 bool ADM_LibWrapper::loadLibrary(const char* path)
 {
-#ifdef ADM_WIN32
+#ifdef __MINGW32__
 	hinstLib = LoadLibrary(path);
 
 	if (hinstLib == NULL)
@@ -87,7 +87,7 @@
 
 void* ADM_LibWrapper::getSymbol(const char* name)
 {
-#ifdef ADM_WIN32
+#ifdef __MINGW32__
 	void* procAddr = (void*)GetProcAddress((HINSTANCE) hinstLib, name);
 
 	if (procAddr == NULL)
@@ -113,7 +113,7 @@
 
 bool ADM_LibWrapper::getSymbols(int symCount, ...)
 {
-#ifdef ADM_WIN32
+#ifdef __MINGW32__
     va_list va;
     va_start(va, symCount);
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libwrapper/libwrapper.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libwrapper/libwrapper.h	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libwrapper/libwrapper.h	2008-03-02 16:00:49 UTC (rev 3813)
@@ -7,7 +7,7 @@
 		void* hinstLib;
 		bool initialised;
 
-	#ifdef ADM_WIN32
+	#ifdef __WIN32
 		virtual char* formatMessage(uint32_t msgCode);
 	#endif
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libwrapper/libwrapper_amrnb.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libwrapper/libwrapper_amrnb.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libwrapper/libwrapper_amrnb.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -8,7 +8,7 @@
 ADM_LibWrapperAmrnb::ADM_LibWrapperAmrnb() : ADM_LibWrapper()
 {
 #ifdef USE_LATE_BINDING
-#ifdef ADM_WIN32
+#ifdef __WIN32
 	char* libname = &quot;libamrnb-2.dll&quot;;
 #else
 	char* libname = &quot;libamrnb-2.so&quot;;	// ???

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libwrapper/libwrapper_dca.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libwrapper/libwrapper_dca.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libwrapper/libwrapper_dca.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -8,7 +8,7 @@
 ADM_LibWrapperDca::ADM_LibWrapperDca() : ADM_LibWrapper()
 {
 #ifdef USE_LATE_BINDING
-#ifdef ADM_WIN32
+#ifdef __WIN32
 #ifdef USE_LIBDCA_002
 	const char* libname = &quot;libdts.dll&quot;;
 #else
@@ -20,7 +20,7 @@
 #else
 	const char* libname = &quot;libdca-0.so&quot;;	// ???
 #endif	// USE_LIBDCA_002
-#endif	// ADM_WIN32
+#endif	// __WIN32
 
 #ifdef USE_LIBDCA_002
 	initialised = (loadLibrary(libname) &amp;&amp; getSymbols(7, 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mplexin.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mplexin.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mplexin.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -17,9 +17,7 @@
 #include &lt;string.h&gt;
 #include &lt;sys/stat.h&gt;
 #include &lt;errno.h&gt;
-#ifdef ADM_WIN32
-#include &lt;io.h&gt;
-#endif
+
 #include &quot;interact.hpp&quot;
 
 #undef malloc
@@ -63,7 +61,7 @@
   char msg[512];
    while( !(strm = fopen( cur_filename, &quot;wb&quot; )) ){
       if( errno == ENOSPC
-#ifndef ADM_WIN32
+#ifndef __MINGW32__
                           || errno == EDQUOT
 #endif
                                              ){
@@ -129,7 +127,7 @@
          continue;
       }
       if( rc == -1 &amp;&amp; (errno == ENOSPC
-#ifndef ADM_WIN32
+#ifndef __MINGW32__
                                        || errno == EDQUOT
 #endif
                                                           ) ){

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mplexmuxer.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mplexmuxer.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mplexmuxer.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -29,7 +29,6 @@
 #include &lt;string.h&gt;
 #include &lt;sys/stat.h&gt;
 #include &lt;pthread.h&gt;
-#define WIN32_CLASH
 
 #include &quot;interact.hpp&quot;
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mthread.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mthread.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/ADM_mthread.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -20,8 +20,6 @@
 #include &lt;math.h&gt;
 #include &lt;pthread.h&gt;
 
-#define WIN32_CLASH
-
 #include &quot;default.h&quot;
 
 #include &quot;ADM_toolkit/toolkit.hxx&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/cpu_accel.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/cpu_accel.c	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_mplex/cpu_accel.c	2008-03-02 16:00:49 UTC (rev 3813)
@@ -348,7 +348,7 @@
 #endif		
 	}
 		
-#ifdef ADM_WIN32	// GRUNTSTER
+#ifdef __MINGW32__	// GRUNTSTER
 	pgsize = 4096;
 #else
 	pgsize = sysconf(_SC_PAGESIZE);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_smjs/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_smjs/CMakeLists.txt	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_smjs/CMakeLists.txt	2008-03-02 16:00:49 UTC (rev 3813)
@@ -7,11 +7,11 @@
 	
 ADD_ADM_LIB_ALL_TARGETS(${ADM_LIB} ${${ADM_LIB}_SRCS})
 
-IF(WIN32)
+IF (MINGW)
 	ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} &quot;-DXP_WIN&quot;)
-ELSE(WIN32)
+ELSE (MINGW)
 	ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} &quot;-DXP_UNIX -DSVR4 -DSYSV -D_BSD_SOURCE -DPOSIX_SOURCE -DHAVE_VA_COPY -DVA_COPY=va_copy&quot;)
-ENDIF(WIN32)
+ENDIF (MINGW)
 
 ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} &quot;-DNDEBUG -DTRIMMED -DEXPORT_JS_API -DJS_USE_SAFE_ARENA -D_IEEE_LIBM&quot;)
 ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} &quot;-Dmalloc=ADM_alloc&quot;)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_gettext.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_gettext.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_gettext.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -9,7 +9,7 @@
 {
 	char *local = setlocale(LC_ALL, &quot;&quot;);
 
-#ifdef ADM_WIN32
+#ifdef __WIN32
 	bindtextdomain(&quot;avidemux&quot;, &quot;./share/locale&quot;);
 #else
 	bindtextdomain(&quot;avidemux&quot;, ADMLOCALE);
@@ -31,7 +31,7 @@
 	if(local)
 		printf(&quot;[Locale] Textdomain is now %s\n&quot;, local);
 
-#ifndef ADM_WIN32
+#ifndef __WIN32
 	printf(&quot;[Locale] Files for %s appear to be in %s\n&quot;,&quot;avidemux&quot;, ADMLOCALE);
 #endif
 	printf(&quot;[Locale] Test: %s\n\n&quot;, dgettext(&quot;avidemux&quot;, &quot;_File&quot;));

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_imageUtils.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_imageUtils.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/ADM_imageUtils.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -370,8 +370,8 @@
   
   sz = _width* _height * 3;
 
-  bmfh.xHotspot = bmfh.yHotspot = 0;
-  bmfh.offsetToBits = sizeof (bmfh) + sizeof (bmph);
+  bmfh.bfReserved1 = bmfh.bfReserved2 = 0;
+  bmfh.bfOffBits = sizeof (bmfh) + sizeof (bmph);
 //_________________________________________
   bmph.biSize = sizeof (bmph);
   bmph.biWidth = _width;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/avifmt.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/avifmt.h	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/avifmt.h	2008-03-02 16:00:49 UTC (rev 3813)
@@ -12,8 +12,7 @@
 
 #ifndef NOAVIFMT
 
-#ifndef __WINE_WINDEF_H
-#if !defined( WIN32_CLASH) || !defined(ADM_WIN32)
+#if !defined(__WINE_WINDEF_H) &amp;&amp; !defined(_WINDEF_H)
 #define LOBYTE(w)              ((uint8_t)(uint16_t)(w))
 #define HIBYTE(w)              ((uint8_t)((uint16_t)(w) &gt;&gt; 8))
 
@@ -22,8 +21,6 @@
 
 #define MAKELONG(low,high)     ((int32_t)(((uint16_t)(low)) | (((uint32_t)((uint16_t)(high))) &lt;&lt; 16)))
 
-
-
 typedef struct __attribute__((__packed__))
 {
     int16_t	left;
@@ -31,9 +28,6 @@
     int16_t	right;
     int16_t	bottom;
 } RECT, *PRECT, *LPRECT;
-
-#endif
-
 #endif // __WINE_WINDEF_H
 
 #ifdef _MSC_VER

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/avifmt2.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/avifmt2.h	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/avifmt2.h	2008-03-02 16:00:49 UTC (rev 3813)
@@ -21,7 +21,7 @@
 #ifndef __AVIFMT2__
 #define __AVIFMT2__
 
-#if !defined( WIN32_CLASH) || !defined(ADM_WIN32)
+#ifndef _WINGDI_
 typedef struct
 {
     uint32_t 		biSize;
@@ -36,11 +36,12 @@
     uint32_t 		biClrUsed;
     uint32_t 		biClrImportant;
 } BITMAPINFOHEADER, *PBITMAPINFOHEADER, *LPBITMAPINFOHEADER;
+
 typedef struct {
 	BITMAPINFOHEADER bmiHeader;
 	int	bmiColors[1];
 } BITMAPINFO, *LPBITMAPINFO;
-#endif //win32clash
+#endif // _WINGDI_
 
 void printBih(BITMAPINFOHEADER *bi);
 /* Borrowed from vdub

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/default.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/default.h	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/default.h	2008-03-02 16:00:49 UTC (rev 3813)
@@ -97,7 +97,7 @@
 #if (defined( HAVE_LIBESD) &amp;&amp; defined(HAVE_ESD_H)) || \
  defined(OSS_SUPPORT) || defined (USE_ARTS) || \
   defined(USE_SDL) || defined(CONFIG_DARWIN) || \
-  defined(ADM_WIN32) || defined(ALSA_SUPPORT)
+  defined(__WIN32) || defined(ALSA_SUPPORT)
   
 #define HAVE_AUDIO
 #endif

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/prefs.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/prefs.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/prefs.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -425,7 +425,7 @@
         strcat(rcfile,CONFIG);
 
 
-#if defined(ADM_WIN32)
+#if defined(__MINGW32__)
 	xmlSetDocCompressMode(xdoc,9);
 	if( xmlSaveFormatFile(rcfile,xdoc,1) == -1 ){
            fprintf(stderr,&quot;\ncan't save xml tree to file. Filesystem full?\n\n&quot;);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_cpuCap.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_cpuCap.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_cpuCap.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -12,7 +12,7 @@
 #include &quot;config.h&quot;
 #include &lt;stdio.h&gt;
 
-#if defined(ADM_WIN32)
+#if defined(__MINGW32__)
 #include &lt;pthread.h&gt;
 #elif defined(__APPLE__) || defined(ADM_BSD_FAMILY)
 #include &lt;sys/types.h&gt;
@@ -196,7 +196,7 @@
 // Stolen from x264
 int ADM_cpu_num_processors(void)
 {
-#if defined(ADM_WIN32)
+#if defined(__MINGW32__)
     return pthread_num_processors_np();
 #elif defined(__APPLE__) || defined(ADM_BSD_FAMILY)
     int np;
@@ -207,7 +207,7 @@
         np = 1;
 
     return np;
-#else
+#elif defined(__unix__) &amp;&amp; !defined(__CYGWIN__)
     unsigned int bit;
     int np;
 
@@ -219,5 +219,7 @@
         np += (((uint8_t *)&amp;p_aff)[bit / 8] &gt;&gt; (bit % 8)) &amp; 1;
 
     return np;
+#else
+	return 1;
 #endif
 }

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_crashdump.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_crashdump.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_crashdump.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -20,20 +20,17 @@
 #include &lt;stdlib.h&gt;
 #include &lt;stdarg.h&gt;
 #include &lt;string.h&gt;
-#include &lt;default.h&gt;
 #include &lt;unistd.h&gt;
-
 #include &lt;math.h&gt;
-#include &quot;ADM_assert.h&quot;
 
-#if defined(ADM_WIN32)
-#define WIN32_CLASH
+#ifdef __MINGW32__
 #include &lt;windows.h&gt;
 #include &lt;excpt.h&gt;
 #include &lt;imagehlp.h&gt;
 #endif
 
 #include &quot;default.h&quot;
+#include &quot;ADM_assert.h&quot;
 #include &quot;ADM_toolkit/toolkit.hxx&quot;
 #include &quot;ADM_userInterfaces/ADM_commonUI/DIA_factory.h&quot;
 #include &quot;ADM_editor/ADM_edit.hxx&quot;
@@ -56,7 +53,7 @@
 	GUI_Error_HIG(&quot;Fatal Error&quot;,bfr);
 	assert(0);
 }
-#elif defined(WIN32)
+#elif defined(__MINGW32__)
 typedef struct STACK_FRAME
 {
     STACK_FRAME* ebp;	// address of the calling function frame
@@ -249,7 +246,11 @@
 }
 #else
 #include &lt;signal.h&gt;
+
+#ifndef __CYGWIN__
 #include &lt;execinfo.h&gt;
+#endif
+
 void sig_segfault_handler(int signo);
 void installSigHandler()
 {
@@ -369,6 +370,8 @@
      int count, i;
       
      saveCrashProject();
+
+#ifndef __CYGWIN__
       printf(&quot;\n*********** BACKTRACK **************\n&quot;);
       count = backtrace(stack, 20);
       functions = backtrace_symbols(stack, count);
@@ -391,7 +394,8 @@
       const char *title=&quot;Crash BackTrace&quot;;
       if(lineno) title=&quot;Assert failed&quot;;
       diaFactoryRun(title,count+1,(diaElem **)txt);
-      
+#endif __CYGWIN__
+
       //
      printf(&quot;Memory stat:\n&quot;);
      ADMImage_stat();

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_fileio.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_fileio.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_fileio.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -23,14 +23,13 @@
 
 #include &lt;unistd.h&gt;
 
-#ifdef WIN32
+#ifdef __MINGW32__
 #include &lt;glib.h&gt;
 #endif
 
 #include &quot;default.h&quot;
 #include &quot;ADM_misc.h&quot;
 
-
 #include &quot;ADM_toolkit/filesel.h&quot;
 #include &quot;ADM_toolkit/toolkit.hxx&quot;
 
@@ -42,26 +41,24 @@
 
 size_t ADM_fread (void *ptr, size_t size, size_t n, FILE *sstream)
 {
-  return fread(ptr,size,n,sstream); 
-  
+  return fread(ptr,size,n,sstream);
 }
 
 size_t ADM_fwrite (void *ptr, size_t size, size_t n, FILE *sstream)
 {
-  return fwrite(ptr,size,n,sstream); 
-  
+  return fwrite(ptr,size,n,sstream);
 }
 FILE  *ADM_fopen (const char *file, const char *mode)
 {
   FILE *f;
 
-#ifndef ADM_WIN32
-  return fopen(file,mode); 
-#else
+#ifdef __MINGW32__
   gchar *retval = g_locale_from_utf8 (file, -1, NULL, NULL, NULL);
   f=fopen(retval,mode);
   g_free (retval);
-  return f;  
+  return f;
+#else
+  return fopen(file,mode); 
 #endif
 }
 
@@ -76,7 +73,7 @@
 int baseDirDone=0;
 int jobDirDone=0;
 int customDirDone=0;
-#ifdef ADM_WIN32
+#ifdef __WIN32
 const char *ADM_DIR_NAME=&quot;\\avidemux&quot;;
 #else
 const char *ADM_DIR_NAME=&quot;/.avidemux&quot;;
@@ -95,7 +92,7 @@
   char *rootDir;
   rootDir=ADM_getBaseDir();
   strncpy(customdir,rootDir,1023);
-#if defined(ADM_WIN32)
+#if defined(__WIN32)
   strcat(customdir,&quot;\\custom&quot;); 
 #else
   strcat(customdir,&quot;/custom&quot;);
@@ -119,7 +116,7 @@
   char *rootDir;
   rootDir=ADM_getBaseDir();
   strncpy(jobdir,rootDir,1023);
-#if defined(ADM_WIN32)
+#if defined(__WIN32)
   strcat(jobdir,&quot;\\jobs&quot;); 
 #else
   strcat(jobdir,&quot;/jobs&quot;);
@@ -143,7 +140,7 @@
 //
         if(baseDirDone) return basedir;
 // Get the base directory
-#if defined(ADM_WIN32)
+#if defined(__WIN32)
         if( ! (home=getenv(&quot;USERPROFILE&quot;)) )
         {
           GUI_Error_HIG(QT_TR_NOOP(&quot;Oops&quot;),QT_TR_NOOP(&quot;can't determine $USERPROFILE.&quot;));
@@ -192,7 +189,7 @@
                   closedir(dir);
                   return 1;
               }
-#if defined(ADM_WIN32)
+#ifdef __MINGW32__
                 if(mkdir(dirname))
                 {
                     printf(&quot;Oops: mkdir failed on %s\n&quot;,dirname);   
@@ -297,14 +294,14 @@
 	{
 		out=new char [strlen(path)+2];
 		strcpy(out,path);
-#ifndef ADM_WIN32		
+#ifndef __WIN32		
 		strcat(out,&quot;/&quot;);
 #else
 		strcat(out,&quot;\\&quot;);
 #endif	
 		printf(&quot;\n Canonizing null string ??? (%s)\n&quot;,out);
 	}else if(tmpname[0]=='/'
-#if defined(ADM_WIN32)
+#if defined(__WIN32)
 		|| tmpname[1]==':'
 #endif	
 	
@@ -316,7 +313,7 @@
 	}else{
 		out=new char[strlen(path)+strlen(tmpname)+6];
 		strcpy(out,path);
-#ifndef ADM_WIN32		
+#ifndef __WIN32		
 		strcat(out,&quot;/&quot;);
 #else
 		strcat(out,&quot;\\&quot;);
@@ -335,7 +332,7 @@
 		int len=strlen(str);
 		if(len&lt;=1) return;
 		len--;
-#ifndef ADM_WIN32		
+#ifndef __WIN32		
 		while( *(str+len)!='/' &amp;&amp; len)
 #else
 	while( *(str+len)!='\\' &amp;&amp; len)
@@ -354,7 +351,7 @@
 {
 	char *filename;
         char *filename2;
-#ifndef ADM_WIN32		
+#ifndef __WIN32		
 	filename = strrchr(str, '/');
         
 #else

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_misc.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_misc.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_misc.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -23,7 +23,7 @@
 #include &lt;time.h&gt;
 #include &lt;math.h&gt;
 #include &lt;string.h&gt;
-#ifndef ADM_WIN32
+#ifndef __WIN32
 #include &lt;unistd.h&gt;
 #endif
 //#include &lt;gtk/gtk.h&gt;
@@ -298,7 +298,7 @@
 
 bool shutdown(void)
 {
-#ifdef ADM_WIN32
+#ifdef __WIN32
 	return (shutdown_win32() == 0);
 #else
 	return (system(&quot;shutdown -P 0&quot;) == 0);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_misc.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_misc.h	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_misc.h	2008-03-02 16:00:49 UTC (rev 3813)
@@ -73,7 +73,7 @@
 	#endif
 #endif
 
-#ifdef ADM_WIN32
+#ifdef __WIN32
 	#define PRIO_MIN -20
 	#define PRIO_MAX 20
 	#define PRIO_PROCESS 0

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_quota.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_quota.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_quota.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -74,7 +74,7 @@
 	while( !FD ){
 		FD = fopen (path,mode);
 		if( !FD &amp;&amp; (errno == ENOSPC 
-#ifndef ADM_WIN32
+#ifndef __MINGW32__
 || errno == EDQUOT
 #endif
 ) ){
@@ -157,7 +157,7 @@
 			continue;
 		}
 		if( rc == -1 &amp;&amp; (errno == ENOSPC 
-#ifndef ADM_WIN32
+#ifndef __MINGW32__
 || errno == EDQUOT
 #endif
 ) ){

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/TLK_clock.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/TLK_clock.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/TLK_clock.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -47,8 +47,8 @@
 static struct timeval _itimev;
 static uint32_t getAbsTime( void );
 
-#ifndef ADM_WIN32
-#include &quot;unistd.h&quot;
+#ifndef __WIN32
+#include &lt;unistd.h&gt;
 void ADM_usleep(unsigned long us)
 {
   usleep(us);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/win32.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/win32.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/win32.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -1,18 +1,19 @@
 #include &quot;config.h&quot;
 
-#ifdef ADM_WIN32
-#define WIN32_CLASH
+#ifdef __WIN32
+
 #include &lt;stdio.h&gt;
 #include &lt;stdlib.h&gt;
+#include &lt;windows.h&gt;
 
+#ifdef __MINGW32__
+#include &lt;winsock2.h&gt;
+#endif
+
 #include &quot;default.h&quot; 
 #include &quot;ADM_misc.h&quot;
-#include &quot;windows.h&quot;
-#include &quot;io.h&quot;
-#include &quot;winsock2.h&quot;
 #include &quot;ADM_assert.h&quot; 
 
-uint8_t win32_netInit(void);
 extern char *ADM_getBaseDir(void);
 
 void ADM_usleep(unsigned long us)
@@ -20,20 +21,25 @@
 	Sleep(us/1000);
 }
 
+#ifdef __MINGW32__
 uint8_t win32_netInit(void)
 {
-WSADATA wsaData;
+	WSADATA wsaData;
 	int iResult;
-		printf(&quot;Initializing WinSock\n&quot;);
-		iResult = WSAStartup(MAKEWORD(2,2), &amp;wsaData);
-		if (iResult != NO_ERROR)
-		{
-			printf(&quot;Error at WSAStartup()\n&quot;);
-			return 0;
-		}	
-		printf(&quot;WinSock ok\n&quot;);
-		return 1;
+
+	printf(&quot;Initializing WinSock\n&quot;);
+	iResult = WSAStartup(MAKEWORD(2,2), &amp;wsaData);
+
+	if (iResult != NO_ERROR)
+	{
+		printf(&quot;Error at WSAStartup()\n&quot;);
+		return 0;
+	}	
+
+	printf(&quot;WinSock ok\n&quot;);
+	return 1;
 }
+#endif
 
 #ifndef HAVE_GETTIMEOFDAY
 extern &quot;C&quot;
@@ -57,7 +63,7 @@
 
 	return;
 }
-#endif
+#endif	// HAVE_GETTIMEOFDAY
 
 int getpriority(int which, int who)
 {
@@ -480,6 +486,6 @@
 	setvbuf(stderr, NULL, _IOLBF, BUFSIZ);
 
 	delete[] logPath;
-#endif
+#endif	// USE_SDL
 }
-#endif
+#endif	// __WIN32

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisave.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisave.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisave.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -29,7 +29,6 @@
 #include &lt;time.h&gt;
 #include &lt;sys/time.h&gt;
 #include &lt;pthread.h&gt;
-#define WIN32_CLASH
 
 #include &quot;fourcc.h&quot;
 #include &quot;avi_vars.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -29,7 +29,7 @@
 #include &lt;sys/time.h&gt;
 #include &quot;config.h&quot;
 #include &lt;pthread.h&gt;
-#define WIN32_CLASH
+
 #include &quot;fourcc.h&quot;
 #include &quot;avi_vars.h&quot;
 #include &quot;ADM_toolkit/toolkit.hxx&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_pack.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_pack.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_pack.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -25,7 +25,7 @@
 #include &lt;sys/time.h&gt;
 #include &quot;config.h&quot;
 #include &lt;pthread.h&gt;
-#define WIN32_CLASH
+
 #include &quot;fourcc.h&quot;
 #include &quot;avi_vars.h&quot;
 #include &quot;ADM_toolkit/toolkit.hxx&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_unpack.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_unpack.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_unpack.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -29,7 +29,7 @@
 #include &lt;sys/time.h&gt;
 #include &quot;config.h&quot;
 #include &lt;pthread.h&gt;
-#define WIN32_CLASH
+
 #include &quot;fourcc.h&quot;
 #include &quot;avi_vars.h&quot;
 #include &quot;ADM_toolkit/toolkit.hxx&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavedual.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavedual.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavedual.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -27,7 +27,7 @@
 #include &lt;time.h&gt;
 #include &lt;sys/time.h&gt;
 #include &lt;pthread.h&gt;
-#define WIN32_CLASH
+
 #include &quot;fourcc.h&quot;
 #include &quot;avi_vars.h&quot;
 #include &quot;ADM_toolkit/toolkit.hxx&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_aviwrite.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_aviwrite.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_aviwrite.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -34,7 +34,7 @@
 
 #include &quot;config.h&quot;
 #include &lt;pthread.h&gt;
-#define WIN32_CLASH
+
 #include &quot;avifmt.h&quot;
 #include &quot;avifmt2.h&quot;
 #include &quot;ADM_audio/aviaudio.hxx&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_saveprocess.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -27,7 +27,7 @@
 #include &lt;sys/time.h&gt;
 #include &quot;config.h&quot;
 #include &lt;pthread.h&gt;
-#define WIN32_CLASH
+
 #include &quot;fourcc.h&quot;
 #include &quot;avi_vars.h&quot;
 #include &quot;ADM_toolkit/toolkit.hxx&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_savesmart.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_savesmart.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_savesmart.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -24,7 +24,7 @@
 #include &lt;time.h&gt;
 #include &lt;sys/time.h&gt;
 #include &lt;pthread.h&gt;
-#define WIN32_CLASH
+
 #ifdef USE_FFMPEG
 extern &quot;C&quot; {
 	#include &quot;ADM_lavcodec.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_dummy/oplug_dummy.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -23,9 +23,7 @@
 #include &lt;string.h&gt;
 #include &lt;math.h&gt;
 #include &lt;pthread.h&gt;
-#define WIN32_CLASH
 
-
 extern &quot;C&quot; {
 #include &quot;ADM_lavcodec.h&quot;
 };

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -22,9 +22,7 @@
 #include &lt;string.h&gt;
 #include &lt;math.h&gt;
 #include &lt;pthread.h&gt;
-#define WIN32_CLASH
 
-
 extern &quot;C&quot; {
 #include &quot;ADM_lavcodec.h&quot;
 };

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -25,7 +25,6 @@
 #include &lt;string.h&gt;
 #include &lt;math.h&gt;
 #include &lt;pthread.h&gt;
-#define WIN32_CLASH
 
 #ifdef USE_FFMPEG
 extern &quot;C&quot; {

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpeg/op_mpegpass.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -20,12 +20,9 @@
 #include &lt;sys/time.h&gt;
 #include &lt;errno.h&gt;
 
-
 #include &quot;default.h&quot;
 
-
 #include &quot;ADM_osSupport/ADM_threads.h&quot;
-#define WIN32_CLASH
 #include &quot;avi_vars.h&quot;
 #include &quot;ADM_assert.h&quot;
 #include &quot;ADM_audiofilter/audioprocess.hxx&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -26,8 +26,6 @@
 #include &lt;math.h&gt;
 #include &lt;pthread.h&gt;
 
-#define WIN32_CLASH
-
 #ifdef USE_FFMPEG
 extern &quot;C&quot; {
 #include &quot;ADM_lavcodec.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_requant/tcrequant.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_requant/tcrequant.c	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_requant/tcrequant.c	2008-03-02 16:00:49 UTC (rev 3813)
@@ -85,7 +85,7 @@
 
 // user defined types
 //typedef unsigned int		uint;
-#ifdef ADM_WIN32
+#ifdef __WIN32
 	#define uint unsigned int
 #endif
 #ifdef ADM_BSD_FAMILY

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSAvidemux.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSAvidemux.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSAvidemux.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -10,33 +10,20 @@
 //
 //
 #include &quot;config.h&quot;
-#include &lt;stdlib.h&gt;
+
 #include &lt;math.h&gt;
-#include &lt;pthread.h&gt;
-#define WIN32_CLASH
-#include &quot;ADM_JSAvidemux.h&quot;
+
 #include &quot;default.h&quot;
+#include &quot;ADM_JSAvidemux.h&quot;
+#include &quot;avi_vars.h&quot;
 #include &quot;ADM_toolkit/toolkit.hxx&quot;
 #include &quot;../ADM_userInterfaces/ADM_commonUI/GUI_ui.h&quot;
-#include &quot;ADM_editor/ADM_outputfmt.h&quot;
-#include &quot;ADM_audiofilter/audioeng_buildfilters.h&quot;
-#include &quot;adm_scanner.h&quot; 
-#include &quot;avi_vars.h&quot;
-#include &quot;gui_action.hxx&quot;
-#include &quot;ADM_encoder/ADM_vidEncode.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
-#include &quot;ADM_encoder/adm_encoder.h&quot;
-#include &quot;ADM_encoder/adm_encConfig.h&quot;
-#include &quot;ADM_editor/ADM_outputfmt.h&quot;
-#include &quot;../ADM_userInterfaces/ADM_commonUI/GUI_ui.h&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
 #include &quot;ADM_script/ADM_container.h&quot;
 
 #include &quot;ADM_osSupport/ADM_debugID.h&quot;
 #define MODULE_NAME MODULE_SCRIPT
 #include &quot;ADM_osSupport/ADM_debug.h&quot;
 
-
 extern int A_openAvi (char *name);
 extern int A_Save (const char *name);
 extern int A_appendAvi (char *name);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSFunctions.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSFunctions.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSFunctions.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -14,7 +14,7 @@
 #include &lt;unistd.h&gt;
 #include &lt;sys/types.h&gt;
 #include &lt;sys/stat.h&gt;
-#ifndef ADM_WIN32
+#ifndef __MINGW32__
 #include &lt;sys/wait.h&gt;
 #include &lt;sys/param.h&gt;
 #endif
@@ -313,7 +313,7 @@
         *rval=STRING_TO_JSVAL(JS_NewStringCopyZ(cx,n));
         return JS_TRUE;
 }
-#ifdef ADM_WIN32
+#ifdef __MINGW32__
 
 JSBool systemExecute(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
 {
@@ -373,14 +373,14 @@
 
         enterLock();
 	// clear file descriptor table of forked process and fork
-#if defined( __linux__) || defined(__macosx__) || defined(__APPLE__)
+#if defined( __linux__) || defined(__macosx__) || defined(__APPLE__) || defined(__CYGWIN__)
 	pid_t pidRtn = fork();
 #elif defined(__FreeBSD__) || defined(__OpenBSD__)
 	pid_t pidRtn = rfork(RFPROC|RFCFDG);
 #endif
 	if(pidRtn == 0)
 	{// begin child process
-#if defined( __linux__) || defined(__macosx__) || defined(__APPLE__)
+#if defined( __linux__) || defined(__macosx__) || defined(__APPLE__) || defined(__CYGWIN__)
 		close(STDIN_FILENO);
 		close(STDOUT_FILENO);
 		close(STDERR_FILENO);
@@ -416,7 +416,7 @@
 	return JS_TRUE;
 }// end systemExecute
 #endif
-#ifdef ADM_WIN32
+#ifdef __MINGW32__
 
 JSBool systemInclude(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
 {

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSGlobal.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSGlobal.h	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSGlobal.h	2008-03-02 16:00:49 UTC (rev 3813)
@@ -5,7 +5,7 @@
 
 #include &quot;ADM_libraries/ADM_smjs/jsapi.h&quot;
 #include &lt;pthread.h&gt;
-#define WIN32_CLASH
+
 // javscript debugging helper
 void printJSError(JSContext *cx, const char *message, JSErrorReport *report);
 bool SpidermonkeyInit();
@@ -19,7 +19,7 @@
 #else
 #define JSVAR(a,b,c) extern a b
 #endif
-#if defined( ADM_WIN32) &amp;&amp; defined(JSDECLARE)
+#if defined( __MINGW32__) &amp;&amp; defined(JSDECLARE)
  pthread_t g_pThreadSpidermonkey ;
 #else
 JSVAR( pthread_t, g_pThreadSpidermonkey , 0);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/DirectorySearch.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/DirectorySearch.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/DirectorySearch.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -14,7 +14,7 @@
 // Construction/Destruction
 //////////////////////////////////////////////////////////////////////
 
-#ifndef ADM_WIN32  // def __unix__
+#ifdef __unix__
 int CDirectorySearch::_findnext(unsigned long int hDir,_finddata_t *pfdData)
 {// begin _findnext
 	if(!hDir || hDir == 0xFFFFFFFF)
@@ -25,7 +25,7 @@
 	if(!pEntry)
 		return -1;
 	std::string sFilePath = &quot;&quot;;
-#if defined( __linux__) || defined(__macosx__) || defined(ADM_WIN32)
+#if defined( __linux__) || defined(__macosx__) || defined(__MINGW32__)
 	strncpy(pfdData-&gt;name,pEntry-&gt;d_name,pEntry-&gt;d_reclen);
 	// append NULL terminator
 	pfdData-&gt;name[pEntry-&gt;d_reclen] = '\0';
@@ -50,7 +50,7 @@
 		pfdData-&gt;attrib |= _A_SUBDIR;
 	if(S_ISCHR(stInfo.st_mode) ||
 	S_ISBLK(stInfo.st_mode) ||
-#if !defined(ADM_WIN32)	
+#if !defined(__WIN32)	
 	S_ISLNK(stInfo.st_mode) ||
 	S_ISSOCK(stInfo.st_mode) ||
 #endif
@@ -100,7 +100,7 @@
 	const char *old=sDirectory.c_str();
 	s=new char[strlen(old)+10];
 	strcpy(s,old);
-#ifdef ADM_WIN32	
+#ifdef __WIN32	
 	strcat(s,&quot;\\*&quot;);
 #endif
 	
@@ -112,7 +112,7 @@
 		printf(&quot;Find first failed\n&quot;);
 		return false;
 	}
-#ifdef ADM_WIN32   //ndef __unix__
+#ifdef __WIN32   //ndef __unix__
 	m_sDirectory = GetFileDirectory(sDirectory);
 #else
 	m_sDirectory = sDirectory;
@@ -149,7 +149,7 @@
 	for(int i = sFilePath.length()-1;i &gt;= 0;i--)
 		if(sFilePath[i] == DIRECTORY_DELIMITOR)
 		{// begin copy directory name into buffer
-#ifdef ADM_WIN32
+#ifdef __WIN32
 			if(sFilePath[0] == DIRECTORY_DELIMITOR)
 			{
 				sFilePath.erase(0,1);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/DirectorySearch.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/DirectorySearch.h	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/DirectorySearch.h	2008-03-02 16:00:49 UTC (rev 3813)
@@ -14,7 +14,7 @@
 #if _MSC_VER &gt; 1000
 #pragma once
 #endif // _MSC_VER &gt; 1000
-#if defined( ADM_WIN32) 
+#ifdef __MINGW32__
 #include &lt;io.h&gt;
 #include &lt;sys/stat.h&gt;
 #else
@@ -27,7 +27,7 @@
 // create a non file bit for unix
 #define _A_NONFILE	0x03
 
-#if (defined( __unix__)||defined(__APPLE__)) &amp;&amp; !defined(ADM_WIN32)
+#if (defined( __unix__)||defined(__APPLE__)) &amp;&amp; !defined(__MINGW32__)
 
 // wrap the file mode bits
 #define _A_NORMAL	0x00
@@ -104,7 +104,7 @@
 	_finddata_t m_fdData;
 	std::string m_sDirectory;
 private:
-#ifndef ADM_WIN32 //def __unix__
+#ifdef __unix__
 	// prototypes
 	int _findfirst(const char *path,_finddata_t *pfdData);
 	int _findnext(unsigned long int hDir,_finddata_t *pfdData);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/StdFile.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/StdFile.h	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/StdFile.h	2008-03-02 16:00:49 UTC (rev 3813)
@@ -23,7 +23,7 @@
 
 using namespace std;
 
-#ifdef ADM_WIN32
+#ifdef __WIN32
 	const char DIRECTORY_DELIMITOR = '\\';
 #else
 	const char DIRECTORY_DELIMITOR = '/';

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_toolkit/automation.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_toolkit/automation.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_toolkit/automation.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -22,7 +22,7 @@
 #include &lt;stdlib.h&gt;
 //#include &lt;glib.h&gt;
 #include &lt;signal.h&gt;
-#ifndef ADM_WIN32
+#ifndef __WIN32
 #include &lt;unistd.h&gt;
 #endif
 #include &lt;math.h&gt;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_toolkit/bitmap.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_toolkit/bitmap.h	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_toolkit/bitmap.h	2008-03-02 16:00:49 UTC (rev 3813)
@@ -42,11 +42,13 @@
 */
 } BITMAPHEADER;
 
+#ifndef _WINGDI_
 typedef struct BITMAPFILEHEADER
 {
-   uint16_t    type;
-	 uint32_t    size;
-   int16_t     xHotspot;
-   int16_t     yHotspot;
-   uint32_t    offsetToBits;
+   uint16_t    bfType;
+   uint32_t    bfSize;
+   int16_t     bfReserved1;
+   int16_t     bfReserved2;
+   uint32_t    bfOffBits;
 }  BITMAPFILEHEADER;
+#endif

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_encoding.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -43,7 +43,7 @@
 static void DIA_stop( void);
 static void change_priority(void);
 
-#ifndef ADM_WIN32
+#ifndef __WIN32
 static void shutdown_toggled(void);
 #endif
 
@@ -66,7 +66,7 @@
         
         gtk_register_dialog(dialog);
 
-	#ifndef ADM_WIN32
+	#ifndef __WIN32
 		// check for root privileges
 		if (getuid() != 0)
 		{
@@ -94,7 +94,7 @@
 
 		prefs-&gt;get(PRIORITY_ENCODING,&amp;priority);
 
-	#ifndef ADM_WIN32
+	#ifndef __WIN32
 		// check for root privileges
 		if (getuid() == 0)
 		{
@@ -151,7 +151,7 @@
 
 void change_priority(void)
 {
-#ifndef ADM_WIN32
+#ifndef __WIN32
 	if (getuid() != 0)
 	{
 		gtk_signal_disconnect_by_func(GTK_OBJECT(WID(combobox_priority)), GTK_SIGNAL_FUNC(change_priority), NULL);
@@ -171,7 +171,7 @@
 	setpriority(PRIO_PROCESS, 0, ADM_getNiceValue(priorityLevel));
 }
 
-#ifndef ADM_WIN32
+#ifndef __WIN32
 void shutdown_toggled(void)
 {
 	if (getuid() != 0)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_integer.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_integer.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_integer.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -15,14 +15,10 @@
 
 #include &quot;config.h&quot;
 
-#include &lt;string.h&gt;
-#include &lt;stdio.h&gt;
 #include &lt;math.h&gt;
 
 #include &quot;default.h&quot;
 #include &quot;../ADM_toolkit_gtk/ADM_gladeSupport.h&quot;
-#include &quot;../ADM_toolkit_gtk/toolkit_gtk.h&quot;
-#include &quot;../ADM_toolkit_gtk/toolkit_gtk_include.h&quot;
 #include &quot;../ADM_commonUI/DIA_factory.h&quot;
 #include &quot;ADM_assert.h&quot;
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_gtkRender.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_gtkRender.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_gtkRender.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -18,8 +18,8 @@
 #include &quot;default.h&quot;
 
 #include &lt;gtk/gtk.h&gt;
-#ifdef ADM_WIN32
-#define WIN32_CLASH
+
+#ifdef __WIN32
 #include &lt;gdk/gdkwin32.h&gt;
 #elif defined(__APPLE__)
 extern &quot;C&quot;
@@ -107,7 +107,7 @@
           
         win = gtk_widget_get_parent_window(widget);
 
-#ifdef ADM_WIN32
+#ifdef __WIN32
 		xinfo-&gt;display = (void*)GDK_WINDOW_HWND(widget-&gt;window);
 #elif defined(__APPLE__)
 		int windowWidth, windowHeight;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -349,7 +349,7 @@
 	                                ** you cannot overwrite segment data files, all files are kept open and
 	                                ** are detected here
 	                                */
-#ifndef ADM_WIN32
+#ifndef __WIN32
 					if( stat(name,&amp;buf) == -1 ){
 						fprintf(stderr,&quot;stat(%s) failed\n&quot;,name);
 						return;
@@ -461,7 +461,7 @@
 	{
 
                         selected_filename= (gchar *) 	gtk_file_chooser_get_filename(GTK_FILE_CHOOSER(dialog));
-#ifdef ADM_WIN32
+#ifdef __WIN32
                         if (*(selected_filename + strlen(selected_filename) - 1) == '\\'){
 #else			
                         if (*(selected_filename + strlen(selected_filename) - 1) == '/'){

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/eggtray_win32.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/eggtray_win32.c	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/eggtray_win32.c	2008-03-02 16:00:49 UTC (rev 3813)
@@ -22,7 +22,7 @@
 
 /* Stub code to interface with Shell_NotifyIcon */
 #include &quot;config.h&quot;
-#ifdef ADM_WIN32
+#ifdef __WIN32
 #include &lt;windows.h&gt;
 #include &lt;wingdi.h&gt;
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/eggtrayicon.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/eggtrayicon.c	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/eggtrayicon.c	2008-03-02 16:00:49 UTC (rev 3813)
@@ -18,7 +18,7 @@
  * Boston, MA 02111-1307, USA.
  */
 #include &quot;config.h&quot;
-#ifndef ADM_WIN32
+#ifndef __WIN32
 
 #include &lt;gtk/gtk.h&gt;
 #include &lt;gtk/gtkversion.h&gt;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/toolkit.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/toolkit.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/toolkit.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -22,7 +22,7 @@
 #include &lt;stdlib.h&gt;
 #include &lt;gtk/gtk.h&gt;
 
-#ifndef ADM_WIN32
+#ifndef __WIN32
 #include &lt;unistd.h&gt;
 #endif
 
@@ -192,7 +192,7 @@
 */
 uint8_t UI_getPhysicalScreenSize(uint32_t *w, uint32_t *h)
 {
-#ifdef ADM_WIN32
+#ifdef __WIN32
 	getWorkingArea(w, h);
 #else
 	static int inited = 0;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/toolkit_dialog.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/toolkit_dialog.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/toolkit_dialog.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -67,13 +67,13 @@
         // old one is no longer modal
         if(widgetCount)
         {
-#ifndef ADM_WIN32                
+#ifndef __WIN32                
                 gtk_window_set_modal(GTK_WINDOW(widgetStack[widgetCount-1]), 0);
 #endif
                 gtk_window_set_transient_for (GTK_WINDOW(newdialog),GTK_WINDOW(widgetStack[widgetCount-1]));
         }
         gtk_window_set_modal(GTK_WINDOW(widgetStack[widgetCount]), 1);
-#ifdef ADM_WIN32
+#ifdef __WIN32
         gtk_window_set_icon(GTK_WINDOW(widgetStack[widgetCount]), gtk_window_get_icon (GTK_WINDOW(widgetStack[0])));
 #endif
         widgetCount++;
@@ -87,7 +87,7 @@
 	{
 		// Reset the old one modal
 		gtk_window_set_modal(GTK_WINDOW(widgetStack[widgetCount-1]), 1);
-#ifdef ADM_WIN32
+#ifdef __WIN32
 		gtk_window_present(GTK_WINDOW(widgetStack[widgetCount-1]));
 #endif
 	}

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_encoding.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_encoding.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_encoding.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -43,7 +43,7 @@
 
 	void priorityChanged(int priorityLevel)
 	{
-	#ifndef ADM_WIN32
+	#ifndef __WIN32
 		if (getuid() != 0)
 		{
 			ui.comboBoxPriority-&gt;disconnect(SIGNAL(currentIndexChanged(int)));
@@ -61,7 +61,7 @@
 
 	void shutdownChanged(int state)
 	{
-	#ifndef ADM_WIN32
+	#ifndef __WIN32
 		if (getuid() != 0)
 		{
 			ui.checkBoxShutdown-&gt;disconnect(SIGNAL(stateChanged(int)));
@@ -83,7 +83,7 @@
  {
 	ui.setupUi(this);
 
-#ifndef ADM_WIN32
+#ifndef __WIN32
 	//check for root privileges
 	if (getuid() == 0)
 	{
@@ -101,7 +101,7 @@
 
 	prefs-&gt;get(PRIORITY_ENCODING,&amp;priority);	
 
-#ifndef ADM_WIN32
+#ifndef __WIN32
 	// check for root privileges
 	if (getuid() == 0)
 	{

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/T_preview.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/T_preview.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/T_preview.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -37,9 +37,10 @@
 /* Probably on unix/X11 ..*/
 #ifdef __APPLE__
 #include &lt;Carbon/Carbon.h&gt;
-#elif !defined(ADM_WIN32)
+#elif !defined(__WIN32)
 #include &lt;QX11Info&gt;
 #endif
+
 #include &quot;avio.hxx&quot;
 
 #include &quot;ADM_colorspace/ADM_rgb.h&quot;
@@ -188,7 +189,7 @@
 */
 void UI_getWindowInfo(void *draw, GUI_WindowInfo *xinfo)
 {
-#if defined(ADM_WIN32)
+#if defined(__WIN32)
 	xinfo-&gt;display=videoWindow-&gt;winId();
 #elif defined(__APPLE__)
 	QWidget* widget = videoWindow-&gt;parentWidget();

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -76,7 +76,7 @@
 #ifdef USE_VORBIS
         vorbis=1;
 #endif
-#ifdef ADM_WIN32
+#ifdef __WIN32
         win32=1;
 #endif
 #ifdef USE_FAAC

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -30,7 +30,7 @@
 #include &quot;ADM_toolkit/toolkit.hxx&quot;
 #include &quot;DIA_factory.h&quot;
 
-#ifdef ADM_WIN32
+#ifdef __WIN32
 #include &quot;GUI_sdlRender.h&quot;
 #endif
 
@@ -261,7 +261,7 @@
                              ,{RENDER_XV,   QT_TR_NOOP(&quot;XVideo (best)&quot;),NULL}
 #endif
 #ifdef USE_SDL
-#ifdef ADM_WIN32
+#ifdef __WIN32
                              ,{RENDER_SDL,      QT_TR_NOOP(&quot;SDL (GDI)&quot;),NULL}
 							 ,{RENDER_DIRECTX,      QT_TR_NOOP(&quot;SDL (DirectX)&quot;),NULL}
 #else
@@ -317,10 +317,10 @@
 		#ifdef OSS_SUPPORT
 			{DEVICE_OSS, QT_TR_NOOP(&quot;OSS&quot;)},
 		#endif
-		#if	defined(USE_SDL) &amp;&amp; !defined(ADM_WIN32)
+		#if	defined(USE_SDL) &amp;&amp; !defined(__WIN32)
 			{DEVICE_SDL, QT_TR_NOOP(&quot;SDL&quot;)},
 		#endif
-		#ifdef ADM_WIN32
+		#ifdef __WIN32
 			{DEVICE_WIN32, QT_TR_NOOP(&quot;Win32&quot;)},
 		#endif
 			{DEVICE_DUMMY, QT_TR_NOOP(&quot;None&quot;)}
@@ -353,7 +353,7 @@
      
         // Filter path
         if( prefs-&gt;get(FILTERS_AUTOLOAD_PATH, &amp;filterPath) != RC_OK )
-#ifndef ADM_WIN32
+#ifndef __WIN32
                filterPath = ADM_strdup(&quot;/tmp&quot;);
 #else
                filterPath = ADM_strdup(&quot;c:\\&quot;);
@@ -518,7 +518,7 @@
                 // Alternate mp3 tag (haali)
                 prefs-&gt;set(FEATURE_ALTERNATE_MP3_TAG,alternate_mp3_tag);
 
-			#if defined(ADM_WIN32) &amp;&amp; defined(USE_SDL)
+			#if defined(__WIN32) &amp;&amp; defined(USE_SDL)
 				// Initialise SDL again as driver may have changed
 				initSdl();
 			#endif

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/GUI_render.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/GUI_render.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/GUI_render.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -186,7 +186,7 @@
 uint8_t r=0;
 	ADM_assert(!accel_mode);
         
-#if !defined ADM_WIN32 &amp;&amp; !defined(__APPLE__)
+#if !defined __WIN32 &amp;&amp; !defined(__APPLE__)
 	// First check if local
 	// We do it in a very wrong way : If DISPLAY!=:0.0 we assume remote display
 	// in that case we do not even try to use accel
@@ -236,7 +236,7 @@
 
 #if defined(USE_SDL)
 			case RENDER_SDL:
-#ifdef ADM_WIN32
+#ifdef __WIN32
 			case RENDER_DIRECTX:
 #endif
 				accel_mode=new sdlAccelRender();

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/GUI_render.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/GUI_render.h	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/GUI_render.h	2008-03-02 16:00:49 UTC (rev 3813)
@@ -97,7 +97,7 @@
 #ifdef USE_SDL
         RENDER_SDL=2,
 
-#ifdef ADM_WIN32
+#ifdef __WIN32
 		RENDER_DIRECTX=3,
 #endif
 #endif

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/GUI_sdlRender.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/GUI_sdlRender.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/GUI_sdlRender.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -44,7 +44,7 @@
 #include &quot;GUI_sdlRender.h&quot;
 #include &quot;ADM_assert.h&quot;
 
-#ifdef ADM_WIN32
+#ifdef __WIN32
 #include &quot;prefs.h&quot;
 #endif
 
@@ -61,7 +61,7 @@
 static SDL_Overlay *sdl_overlay=NULL;
 static SDL_Surface *sdl_display=NULL;
 static SDL_Rect disp;
-#ifdef ADM_WIN32
+#ifdef __WIN32
 HWND sdlWin32;
 #endif
 static ColBase *color=NULL;
@@ -128,7 +128,7 @@
     }
 
     // Hack to get SDL to use GTK window, ugly but works
-#if !defined(ADM_WIN32) &amp;&amp; !defined(__APPLE__)
+#if !defined(__WIN32) &amp;&amp; !defined(__APPLE__)
 	char SDL_windowhack[32];
     int winId=(int)window-&gt;window;
 
@@ -146,7 +146,7 @@
 
     // Do it twice as the 1st time does not work
     // Hack to get SDL to use GTK window, ugly but works
-#if !defined(ADM_WIN32) &amp;&amp; !defined(__APPLE__)
+#if !defined(__WIN32) &amp;&amp; !defined(__APPLE__)
     putenv(SDL_windowhack);
     SDL_QuitSubSystem(SDL_INIT_VIDEO);
     if (SDL_InitSubSystem(SDL_INIT_VIDEO) &lt; 0) 
@@ -161,7 +161,7 @@
     flags = SDL_ANYFORMAT | SDL_HWPALETTE | SDL_HWSURFACE | SDL_NOFRAME;
     bpp= SDL_VideoModeOK( w, h,  32, flags );
 
-#ifdef ADM_WIN32
+#ifdef __WIN32
 	// SDL window is created and displayed before we get a chance to set the parent.
 	// Therefore, align the SDL overlay with the client area before it is displayed.
 	POINT screenPoint = {};
@@ -204,7 +204,7 @@
 
     SDL_LockSurface(sdl_display);
 
-#ifdef ADM_WIN32
+#ifdef __WIN32
 	struct SDL_SysWMinfo wmInfo;
 	SDL_VERSION(&amp;wmInfo.version);
 
@@ -281,7 +281,7 @@
 }
 uint8_t sdlAccelRender::display(uint8_t *ptr, uint32_t w, uint32_t h,renderZoom zoom)
 {
-#ifdef ADM_WIN32
+#ifdef __WIN32
 	// DirectX playback doesn't refresh correctly if the parent window is moved.
 	// Detect when the parent window has moved and force a coordinate update.
 	if (strcmp(getenv(&quot;SDL_VIDEODRIVER&quot;), &quot;directx&quot;) == 0)
@@ -369,7 +369,7 @@
 
     printf(&quot;[SDL] Version: %u.%u.%u\n&quot;,SDL_Linked_Version()-&gt;major, SDL_Linked_Version()-&gt;minor, SDL_Linked_Version()-&gt;patch);
 
-#ifdef ADM_WIN32
+#ifdef __WIN32
 	uint32_t videoDevice = RENDER_LAST;
 
 	if(!prefs-&gt;get(DEVICE_VIDEODEVICE, &amp;videoDevice) || videoDevice != RENDER_DIRECTX)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidAnimated.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidAnimated.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidAnimated.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -126,7 +126,7 @@
             MKP(isNTSC,0);
             MKP(vignetteW,160);
             MKP(vignetteH,120);
-#ifdef ADM_WIN32
+#ifdef __WIN32
        MKP(backgroundImg,(ADM_filename *)ADM_strdup(&quot;c:\\test.jpg&quot;));
 #else
             MKP(backgroundImg,(ADM_filename *)ADM_strdup(&quot;/tmp/taist.jpg&quot;));

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidParticle.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidParticle.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidParticle.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -18,7 +18,7 @@
 #include &lt;math.h&gt;
 #include &lt;algorithm&gt;
 #include &lt;string&gt;
-#include &lt;vector&gt;
+//#include &lt;vector&gt;
 using namespace std;
 
 #include &quot;default.h&quot;
@@ -547,7 +547,7 @@
 
 uint8_t ImageTool::autoOutline (uint32_t x, uint32_t y)
 {
-    my_particle.init (debug);
+/*    my_particle.init (debug);
     PixelLocVec &amp; outline = my_particle.outline;
 
     static int needbar = 1;
@@ -1070,7 +1070,7 @@
     }
 
 #endif // ? OLD_PARTICLE_WEDGE_SCHEME
-
+*/
     return 1;
 }
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidParticle.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidParticle.h	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidParticle.h	2008-03-02 16:00:49 UTC (rev 3813)
@@ -95,8 +95,8 @@
 //////////////////////////////////////////////////////////////////////////////
 
 #include &lt;list&gt;
-#include &lt;vector&gt;
-#include &lt;iostream&gt;
+//#include &lt;vector&gt;
+//#include &lt;iostream&gt;
 #include &lt;iterator&gt;
 
 class PixelLoc
@@ -136,8 +136,8 @@
     static const PixelLoc INVALID;
 };
 
-typedef std::vector &lt;PixelLoc&gt; PixelLocVec;
-
+//typedef std::vector &lt;PixelLoc&gt; PixelLocVec;
+/*
 inline std::ostream &amp;
 operator &lt;&lt; (std::ostream &amp; s, const PixelLoc &amp; pl)
 {
@@ -153,7 +153,7 @@
     s &lt;&lt; &quot;]&quot;;
     return s;
 }
-
+*/
 class ImageTool;
 
 #ifdef OLD_PARTICLE_WEDGE_SCHEME
@@ -244,7 +244,7 @@
         void trim_to_edge ();
     };
 
-    typedef std::vector &lt;Wedge&gt; WedgeVec;
+    //typedef std::vector &lt;Wedge&gt; WedgeVec;
 
     struct WedgePair
     {
@@ -286,7 +286,7 @@
 
     PixelLocVec outline;
     PixelLocVec white_pixels;
-    WedgeVec wedges;
+    //WedgeVec wedges;
     WedgePairVec wedge_pairs;
 
 public:
@@ -438,7 +438,7 @@
         };
     };
 
-    typedef std::vector &lt;Wedge&gt; WedgeVec;
+    //typedef std::vector &lt;Wedge&gt; WedgeVec;
 
     struct WedgePair
     {
@@ -470,7 +470,7 @@
         };
     };
 
-    typedef std::vector &lt;WedgePair&gt; WedgePairVec;
+    //typedef std::vector &lt;WedgePair&gt; WedgePairVec;
 
 public:
     uint16_t minx, maxx; // bounding box x
@@ -505,10 +505,10 @@
     double half_wedge_arc;
     BestFit best_fit;
 
-    PixelLocVec outline;
-    PixelLocVec white_pixels;
-    WedgeVec wedges;
-    WedgePairVec wedge_pairs;
+    //PixelLocVec outline;
+    //PixelLocVec white_pixels;
+    //WedgeVec wedges;
+    //WedgePairVec wedge_pairs;
 
 public:
     Particle ()
@@ -533,10 +533,10 @@
         wedge_interval = -1;
         half_wedge_arc = -1;
         best_fit = BestFit();
-        outline.clear();
-        white_pixels.clear();
-        wedges.clear();
-        wedge_pairs.clear();
+        //outline.clear();
+        //white_pixels.clear();
+        //wedges.clear();
+        //wedge_pairs.clear();
         debug = a_debug;
     }
 
@@ -555,7 +555,7 @@
             miny = y;
         if (y &gt; maxy)
             maxy = y;
-        white_pixels.push_back (PixelLoc (x, y));
+        //white_pixels.push_back (PixelLoc (x, y));
     }
 
     void computeCentroid ()
@@ -579,18 +579,18 @@
 
     const WedgePair &amp; getMinDist () const
     {
-        WedgePairVec::const_iterator wit = wedge_pairs.begin();
+/*        WedgePairVec::const_iterator wit = wedge_pairs.begin();
 #if 0
         while (!wit-&gt;total_distance)
             ++wit;
 #endif
-        return *wit;
+        return *wit; */
     }
 
     const WedgePair &amp; getMaxDist () const
     {
-        WedgePairVec::const_iterator wit = wedge_pairs.end();
-        return *--wit;
+        /*WedgePairVec::const_iterator wit = wedge_pairs.end();
+        return *--wit; */
     }
 
     float getMinDistance () const
@@ -820,11 +820,11 @@
 
     // implementation is in ADM_vidSwissArmyKnife.cpp - nothing else uses it
     // (currently).
-
+/*
     template &lt;class Oper, class Histo&gt;
     void convolve (const std::vector &lt;float&gt; &amp; kernel,
                    uint32_t kw, uint32_t kh, int32_t bias, const Oper &amp; op,
-                   const Histo &amp; histogram_in);
+                   const Histo &amp; histogram_in); */
 
     void setDebug (uint32_t newDebug)
     {

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSRTload.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSRTload.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSRTload.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -451,7 +451,7 @@
 	// Get the amound of utf16...
 	done=(ADM_RAW-sout)&gt;&gt;1;
 
-#if defined(ADM_WIN32) || defined(ADM_BSD_FAMILY)
+#if defined(__WIN32) || defined(ADM_BSD_FAMILY)
 	// For Win32 and BSD we swap le and be
 
        ADM_GLYPH_T glyph;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -778,7 +778,7 @@
 };
 
 //============================================================================
-
+/*
 template &lt;typename Oper, typename Histo&gt;
 void ImageTool::convolve (const std::vector &lt;float&gt; &amp; kernel,
                           uint32_t kw, uint32_t kh, int32_t bias,
@@ -886,7 +886,7 @@
             printf (&quot;    Saturated %d low, %d high\n&quot;, satlow, sathigh);
     }
 }
-
+*/
 //============================================================================
 
 template &lt;typename Oper, typename Histo&gt;
@@ -1614,7 +1614,7 @@
         }
     }
 
-    FloatVector &amp; kernel = myInfo-&gt;kernel;
+    //FloatVector &amp; kernel = myInfo-&gt;kernel;
     uint32_t &amp; kernel_w = myInfo-&gt;kernel_w;
     uint32_t &amp; kernel_h = myInfo-&gt;kernel_h;
 
@@ -1626,7 +1626,7 @@
 
         if (doingConvolution)
         {
-            kernel.clear();
+            //kernel.clear();
             kernel_w = 0;
             kernel_h = 0;
 
@@ -1671,7 +1671,7 @@
                 return 0;
             }
 #endif
-
+/*
             copy (istream_iterator &lt;float&gt; (inputStream),
                   istream_iterator &lt;float&gt; (),
                   back_inserter (kernel));
@@ -1709,7 +1709,7 @@
                 }
                 if (count % kernel_w)
                     printf (&quot;[incomplete?!]\n&quot;);
-            }
+            } */
         }
         else // file image (not convolution)
         {
@@ -2057,157 +2057,157 @@
 
     if (doingConvolution)
     {
-        if (kernel.empty())
+        /*if (kernel.empty())
         {
             fprintf (stderr, &quot;No convolution kernel loaded - can't do &quot;
                      &quot;convolution!\n&quot;);
             return 0;
-        }
+        }*/
 
         switch (tool)
         {
         case TOOL_A:
-            imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsA(), HistogramNull());
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsA(), HistogramNull());
             break;
         case TOOL_P: // HERE: we could optimize this if we wanted to
-            imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsP(), HistogramNull());
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsP(), HistogramNull());
             break;
         case TOOL_P_MINUS_A:
-            imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsPminusA(), HistogramNull());
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsPminusA(), HistogramNull());
             break;
         case TOOL_A_MINUS_P:
-            imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsAminusP(), HistogramNull());
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsAminusP(), HistogramNull());
             break;
         case TOOL_P_PLUS_A:
-            imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsPplusA(), HistogramNull());
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsPplusA(), HistogramNull());
             break;
         case TOOL_P_TIMES_A:
-            imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsPtimesA(), HistogramNull());
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsPtimesA(), HistogramNull());
             break;
         case TOOL_P_DIVBY_A:
-            imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsPdivByA(), HistogramNull());
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsPdivByA(), HistogramNull());
             break;
         case TOOL_A_DIVBY_P:
-            imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsAdivByP(), HistogramNull());
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsAdivByP(), HistogramNull());
             break;
         case TOOL_MIN_P_A:
-            imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsMinPA(), HistogramNull());
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsMinPA(), HistogramNull());
             break;
         case TOOL_MAX_P_A:
-            imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsMaxPA(), HistogramNull());
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsMaxPA(), HistogramNull());
             break;
 
         case TOOL_A_WITH_HISTOGRAM:
-            imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsA(), *histogram);
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsA(), *histogram);
             break;
         case TOOL_P_WITH_HISTOGRAM: // HERE: we could optimize this if we wanted to
-            imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsP(), *histogram);
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsP(), *histogram);
             break;
         case TOOL_P_MINUS_A_WITH_HISTOGRAM:
-            imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsPminusA(), *histogram);
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsPminusA(), *histogram);
             break;
         case TOOL_A_MINUS_P_WITH_HISTOGRAM:
-            imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsAminusP(), *histogram);
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsAminusP(), *histogram);
             break;
         case TOOL_P_PLUS_A_WITH_HISTOGRAM:
-            imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsPplusA(), *histogram);
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsPplusA(), *histogram);
             break;
         case TOOL_P_TIMES_A_WITH_HISTOGRAM:
-            imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsPtimesA(), *histogram);
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsPtimesA(), *histogram);
             break;
         case TOOL_P_DIVBY_A_WITH_HISTOGRAM:
-            imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsPdivByA(), *histogram);
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsPdivByA(), *histogram);
             break;
         case TOOL_A_DIVBY_P_WITH_HISTOGRAM:
-            imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsAdivByP(), *histogram);
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsAdivByP(), *histogram);
             break;
         case TOOL_MIN_P_A_WITH_HISTOGRAM:
-            imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsMinPA(), *histogram);
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsMinPA(), *histogram);
             break;
         case TOOL_MAX_P_A_WITH_HISTOGRAM:
-            imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsMaxPA(), *histogram);
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias, OpPequalsMaxPA(), *histogram);
             break;
 
         case TOOL_A_SCALED:
-            imtool.convolve (kernel, kernel_w, kernel_h, bias,
-                             OpPequalsA_Scaled (rbias, rmultiplier), HistogramNull());
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias,
+                             //OpPequalsA_Scaled (rbias, rmultiplier), HistogramNull());
             break;
         case TOOL_P_SCALED: // HERE_SCALED: we could optimize this if we wanted to
-            imtool.convolve (kernel, kernel_w, kernel_h, bias,
-                             OpPequalsP_Scaled (rbias, rmultiplier), HistogramNull());
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias,
+                             //OpPequalsP_Scaled (rbias, rmultiplier), HistogramNull());
             break;
         case TOOL_P_MINUS_A_SCALED:
-            imtool.convolve (kernel, kernel_w, kernel_h, bias,
-                             OpPequalsPminusA_Scaled (rbias, rmultiplier), HistogramNull());
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias,
+                             //OpPequalsPminusA_Scaled (rbias, rmultiplier), HistogramNull());
             break;
         case TOOL_A_MINUS_P_SCALED:
-            imtool.convolve (kernel, kernel_w, kernel_h, bias,
-                             OpPequalsAminusP_Scaled (rbias, rmultiplier), HistogramNull());
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias,
+                             //OpPequalsAminusP_Scaled (rbias, rmultiplier), HistogramNull());
             break;
         case TOOL_P_PLUS_A_SCALED:
-            imtool.convolve (kernel, kernel_w, kernel_h, bias,
-                             OpPequalsPplusA_Scaled (rbias, rmultiplier), HistogramNull());
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias,
+                             //OpPequalsPplusA_Scaled (rbias, rmultiplier), HistogramNull());
             break;
         case TOOL_P_TIMES_A_SCALED:
-            imtool.convolve (kernel, kernel_w, kernel_h, bias,
-                             OpPequalsPtimesA_Scaled (rbias, rmultiplier), HistogramNull());
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias,
+                             //OpPequalsPtimesA_Scaled (rbias, rmultiplier), HistogramNull());
             break;
         case TOOL_P_DIVBY_A_SCALED:
-            imtool.convolve (kernel, kernel_w, kernel_h, bias,
-                             OpPequalsPdivByA_Scaled (rbias, rmultiplier), HistogramNull());
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias,
+                             //OpPequalsPdivByA_Scaled (rbias, rmultiplier), HistogramNull());
             break;
         case TOOL_A_DIVBY_P_SCALED:
-            imtool.convolve (kernel, kernel_w, kernel_h, bias,
-                             OpPequalsAdivByP_Scaled (rbias, rmultiplier), HistogramNull());
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias,
+                             //OpPequalsAdivByP_Scaled (rbias, rmultiplier), HistogramNull());
             break;
         case TOOL_MIN_P_A_SCALED:
-            imtool.convolve (kernel, kernel_w, kernel_h, bias,
-                             OpPequalsMinPA_Scaled (rbias, rmultiplier), HistogramNull());
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias,
+                             //OpPequalsMinPA_Scaled (rbias, rmultiplier), HistogramNull());
             break;
         case TOOL_MAX_P_A_SCALED:
-            imtool.convolve (kernel, kernel_w, kernel_h, bias,
-                             OpPequalsMaxPA_Scaled (rbias, rmultiplier), HistogramNull());
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias,
+                             //OpPequalsMaxPA_Scaled (rbias, rmultiplier), HistogramNull());
             break;
 
         case TOOL_A_SCALED_WITH_HISTOGRAM:
-            imtool.convolve (kernel, kernel_w, kernel_h, bias,
-                             OpPequalsA_Scaled (rbias, rmultiplier), *histogram);
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias,
+                             //OpPequalsA_Scaled (rbias, rmultiplier), *histogram);
             break;
         case TOOL_P_SCALED_WITH_HISTOGRAM: // HERE: we could optimize this if we wanted to
-            imtool.convolve (kernel, kernel_w, kernel_h, bias,
-                             OpPequalsP_Scaled (rbias, rmultiplier), *histogram);
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias,
+                             //OpPequalsP_Scaled (rbias, rmultiplier), *histogram);
             break;
         case TOOL_P_MINUS_A_SCALED_WITH_HISTOGRAM:
-            imtool.convolve (kernel, kernel_w, kernel_h, bias,
-                             OpPequalsPminusA_Scaled (rbias, rmultiplier), *histogram);
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias,
+                             //OpPequalsPminusA_Scaled (rbias, rmultiplier), *histogram);
             break;
         case TOOL_A_MINUS_P_SCALED_WITH_HISTOGRAM:
-            imtool.convolve (kernel, kernel_w, kernel_h, bias,
-                             OpPequalsAminusP_Scaled (rbias, rmultiplier), *histogram);
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias,
+                             //OpPequalsAminusP_Scaled (rbias, rmultiplier), *histogram);
             break;
         case TOOL_P_PLUS_A_SCALED_WITH_HISTOGRAM:
-            imtool.convolve (kernel, kernel_w, kernel_h, bias,
-                             OpPequalsPplusA_Scaled (rbias, rmultiplier), *histogram);
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias,
+                             //OpPequalsPplusA_Scaled (rbias, rmultiplier), *histogram);
             break;
         case TOOL_P_TIMES_A_SCALED_WITH_HISTOGRAM:
-            imtool.convolve (kernel, kernel_w, kernel_h, bias,
-                             OpPequalsPtimesA_Scaled (rbias, rmultiplier), *histogram);
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias,
+                             //OpPequalsPtimesA_Scaled (rbias, rmultiplier), *histogram);
             break;
         case TOOL_P_DIVBY_A_SCALED_WITH_HISTOGRAM:
-            imtool.convolve (kernel, kernel_w, kernel_h, bias,
-                             OpPequalsPdivByA_Scaled (rbias, rmultiplier), *histogram);
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias,
+                             //OpPequalsPdivByA_Scaled (rbias, rmultiplier), *histogram);
             break;
         case TOOL_A_DIVBY_P_SCALED_WITH_HISTOGRAM:
-            imtool.convolve (kernel, kernel_w, kernel_h, bias,
-                             OpPequalsAdivByP_Scaled (rbias, rmultiplier), *histogram);
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias,
+                             //OpPequalsAdivByP_Scaled (rbias, rmultiplier), *histogram);
             break;
         case TOOL_MIN_P_A_SCALED_WITH_HISTOGRAM:
-            imtool.convolve (kernel, kernel_w, kernel_h, bias,
-                             OpPequalsMinPA_Scaled (rbias, rmultiplier), *histogram);
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias,
+                             //OpPequalsMinPA_Scaled (rbias, rmultiplier), *histogram);
             break;
         case TOOL_MAX_P_A_SCALED_WITH_HISTOGRAM:
-            imtool.convolve (kernel, kernel_w, kernel_h, bias,
-                             OpPequalsMaxPA_Scaled (rbias, rmultiplier), *histogram);
+            //imtool.convolve (kernel, kernel_w, kernel_h, bias,
+                             //OpPequalsMaxPA_Scaled (rbias, rmultiplier), *histogram);
             break;
 
         default:

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.h	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.h	2008-03-02 16:00:49 UTC (rev 3813)
@@ -22,7 +22,7 @@
 
 #include &quot;ADM_video/ADM_cache.h&quot;
 
-#include &lt;vector&gt;
+//#include &lt;vector&gt;
 #include &lt;string&gt;
 
 #include &lt;sys/time.h&gt;
@@ -76,7 +76,7 @@
     // configure() method.  This would allow the objects to maintain a
     // persistent state in a more straightforward way.
 
-    typedef std::vector &lt;float&gt; FloatVector;
+    //typedef std::vector &lt;float&gt; FloatVector;
 
     class PersistentInfo
     {
@@ -85,7 +85,7 @@
         CONFcouple *  oldConf;
         uint32_t      refCount;
 
-        FloatVector   kernel;
+        //FloatVector   kernel;
         uint32_t      kernel_w;
         uint32_t      kernel_h;
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/CMakeLists.txt	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/CMakeLists.txt	2008-03-02 16:00:49 UTC (rev 3813)
@@ -38,10 +38,7 @@
 	ADM_vidVobSubRender.cpp
 	ADM_vobsubinfo.cpp
 	ADM_vidComputeAverage.cpp
-	ADM_vidSwissArmyKnife.cpp
-	ADM_vidThreshold.cpp
-	ADM_vidParticle.cpp
-	ADM_vidEraser.cpp)
+	ADM_vidThreshold.cpp)
 
 ADD_ADM_LIB_ALL_TARGETS(ADM_videoFilter ${ADM_videoFilter_SRCS})
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt	2008-03-02 16:00:49 UTC (rev 3813)
@@ -460,7 +460,14 @@
 ###########################################
 IF (ADM_OS_WINDOWS)
 	ADD_ADMLIB_ALL_TARGETS(ADM_osSupport)
-	ADD_LIB_ALL_TARGETS(pthreadGC2 winmm wsock32 imagehlp)
+	
+	IF (MINGW)
+		ADD_LIB_ALL_TARGETS(imagehlp wsock32 pthreadGC2)
+	ELSEIF (CYGWIN)
+		ADD_LIB_ALL_TARGETS(pthread cygwin)
+	ENDIF (MINGW)
+	
+	ADD_LIB_ALL_TARGETS(winmm)
 	ADD_LIB_ALL_TARGETS(&quot;-mno-cygwin -Wl,--export-all-symbols&quot;)
 
 	ADD_TARGET_LDFLAGS(avidemux2_cli &quot;-Wl,-subsystem,console&quot;)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/avi_vars.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/avi_vars.h	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/avi_vars.h	2008-03-02 16:00:49 UTC (rev 3813)
@@ -1,7 +1,6 @@
 #ifndef __AVI_VARS
 #define __AVI_VARS
 #include &quot;default.h&quot;
-#include &lt;assert.h&gt;
 #include &quot;fourcc.h&quot;
 #include &quot;ADM_editor/ADM_edit.hxx&quot;
 //----------------------
@@ -16,7 +15,7 @@
 #if (defined( HAVE_LIBESD) &amp;&amp; defined(HAVE_ESD_H)) || \
  defined(OSS_SUPPORT) || defined (USE_ARTS) || \
   defined(USE_SDL) || defined(CONFIG_DARWIN) || \
-  defined(ADM_WIN32) || defined(ALSA_SUPPORT)
+  defined(__WIN32) || defined(ALSA_SUPPORT)
   
 #define HAVE_AUDIO
 #endif

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/gtk_gui.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/gtk_gui.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/gtk_gui.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -984,7 +984,7 @@
             setCurrentMixerFromString(&quot;NONE&quot;);
         }
 	for(i=strlen(longname);i&gt;=0;i--)
-#ifdef ADM_WIN32
+#ifdef __WIN32
 		if( longname[i] == '\\' || longname[i] == '/' ){
 #else
 		if( longname[i] == '/' ){

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/gui_savenew.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/gui_savenew.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/gui_savenew.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -24,7 +24,7 @@
 #include &lt;time.h&gt;
 #include &lt;sys/time.h&gt;
 #include &lt;pthread.h&gt;
-#define WIN32_CLASH
+
 #include &quot;avi_vars.h&quot;
 #include &quot;prototype.h&quot;
 #include &quot;ADM_toolkit/toolkit.hxx&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/guiplay.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/guiplay.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/guiplay.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -309,7 +309,7 @@
 //_______________________________________
 {
     uint32_t latency, one_sec;
-    uint32_t small;
+    uint32_t small_;
     uint32_t channels;
 
     wavbuf = 0;
@@ -367,11 +367,11 @@
     uint32_t fill=0;
     while(fill&lt;one_sec)
     {
-      if (!(small = playback-&gt;fill(one_sec-fill, wavbuf,&amp;status)))
+      if (!(small_ = playback-&gt;fill(one_sec-fill, wavbuf,&amp;status)))
       {
         break;
       }
-    fill+=small;
+    fill+=small_;
     }
     dauds += fill/channels;  // In sample
     AVDM_AudioPlay(wavbuf, fill);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/main.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/main.cpp	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/main.cpp	2008-03-02 16:00:49 UTC (rev 3813)
@@ -23,10 +23,8 @@
 
 #include &quot;default.h&quot;
 
-#ifdef ADM_WIN32
-#define WIN32_CLASH
+#ifdef __MINGW32__
 #include &lt;windows.h&gt;
-#include &lt;wingdi.h&gt;
 #include &lt;excpt.h&gt;
 #endif
 
@@ -81,14 +79,17 @@
 extern void ADM_memStatEnd( void );
 extern void getUIDescription(char*);
 
-#ifdef ADM_WIN32
+#ifdef __MINGW32__
 extern EXCEPTION_DISPOSITION exceptionHandler(struct _EXCEPTION_RECORD* pExceptionRec, void* pEstablisherFrame, struct _CONTEXT* pContextRecord, void* pDispatcherContext);
-extern bool getWindowsVersion(char* version);
-extern void redirectStdoutToFile(void);
 #else
 extern void installSigHandler(void);
 #endif
 
+#ifdef __WIN32
+extern bool getWindowsVersion(char* version);
+extern void redirectStdoutToFile(void);
+#endif
+
 extern uint8_t  quotaInit(void);
 extern void ADMImage_stat( void );
 extern uint8_t win32_netInit(void);
@@ -111,7 +112,7 @@
 
 int main(int argc, char *argv[])
 {
-#ifdef ADM_WIN32
+#ifdef __WIN32
 	redirectStdoutToFile();
 #endif
 
@@ -119,7 +120,7 @@
 	new_progname = argv[0];
 #endif
 
-#ifndef ADM_WIN32
+#ifndef __MINGW32__
 	// thx smurf uk :)
     installSigHandler();
 #endif
@@ -148,7 +149,7 @@
 
 	printf(&quot;Build Target: &quot;);
 
-#if defined(ADM_WIN32)
+#if defined(__WIN32)
 	printf(&quot;Microsoft Windows&quot;);
 #elif defined(__APPLE__)
 	printf(&quot;Apple&quot;);
@@ -170,7 +171,7 @@
 	getUIDescription(uiDesc);
 	printf(&quot;User Interface: %s\n&quot;, uiDesc);
 
-#ifdef ADM_WIN32
+#ifdef __WIN32
 	char version[250];
 
 	if (getWindowsVersion(version))
@@ -198,7 +199,7 @@
 
 	atexit(onexit);
 
-#ifdef ADM_WIN32
+#ifdef __MINGW32__
     win32_netInit();
 #endif
 
@@ -256,7 +257,7 @@
     else
 		ADM_assert(0); 
 
-#ifdef ADM_WIN32
+#ifdef __MINGW32__
 	__try1(exceptionHandler);
 #endif
 

Modified: branches/avidemux_2.5_branch_gruntster/cmake/config.h.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/config.h.cmake	2008-03-02 15:29:54 UTC (rev 3812)
+++ branches/avidemux_2.5_branch_gruntster/cmake/config.h.cmake	2008-03-02 16:00:49 UTC (rev 3813)
@@ -24,9 +24,6 @@
 /* Sparc workstations */
 #cmakedefine ADM_SPARC
 
-/* Build for Windows 32bits */
-#cmakedefine ADM_WIN32
-
 #if ${CONFIG_HEADER_TYPE} == ADM_BUILD_GTK || ${CONFIG_HEADER_TYPE} == ADM_BUILD_QT4
 /* use ALSA as possible audio device */
 #cmakedefine ALSA_SUPPORT
@@ -253,7 +250,7 @@
 #cmakedefine ADM_CPU_X86
 #cmakedefine ADM_CPU_X86_64
 
-#ifdef ADM_OS_WINDOWS
+#ifdef __MINGW32__
 #define rindex strrchr
 #define index strchr
 #define ftello ftello64


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001078.html">[Avidemux-svn-commit] r3812 - in	branches/avidemux_2.5_branch_mean/avidemux: .	ADM_core/include ADM_core/src ADM_editor	ADM_inputs/ADM_inpics ADM_inputs/ADM_mpegdemuxer	ADM_libraries/ADM_lavformat ADM_libraries/ADM_utilities	ADM_script ADM_toolkit ADM_userInterfaces/ADM_GTK/ADM_dialog	ADM_userInterfaces/ADM_GTK/ADM_gui2	ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk	ADM_userInterfaces/ADM_QT4/ADM_dialog	ADM_userInterfaces/ADM_QT4/ADM_gui
</A></li>
	<LI>Next message: <A HREF="001080.html">[Avidemux-svn-commit] r3814 - in	branches/avidemux_2.5_branch_gruntster/avidemux: .	ADM_libraries/ADM_utilities ADM_userInterfaces/ADM_commonUI
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1079">[ date ]</a>
              <a href="thread.html#1079">[ thread ]</a>
              <a href="subject.html#1079">[ subject ]</a>
              <a href="author.html#1079">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">More information about the Avidemux-svn-commit
mailing list</a><br>
</body></html>
