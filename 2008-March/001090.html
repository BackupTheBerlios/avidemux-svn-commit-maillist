<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Avidemux-svn-commit] r3824 - in	branches/avidemux_2.5_branch_gruntster: .	avidemux/ADM_audiocodec avidemux/ADM_codecs	avidemux/ADM_libraries/ADM_libMad	avidemux/ADM_libraries/ADM_libMpeg2Dec	avidemux/ADM_libraries/ADM_smjs	avidemux/ADM_libraries/ADM_utilities avidemux/ADM_osSupport	avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters	avidemux/ADM_userInterfaces/ADM_commonUI	avidemux/ADM_videoFilter cmake
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/avidemux-svn-commit/2008-March/index.html" >
   <LINK REL="made" HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r3824%20-%20in%0A%09branches/avidemux_2.5_branch_gruntster%3A%20.%0A%09avidemux/ADM_audiocodec%20avidemux/ADM_codecs%0A%09avidemux/ADM_libraries/ADM_libMad%0A%09avidemux/ADM_libraries/ADM_libMpeg2Dec%0A%09avidemux/ADM_libraries/ADM_smjs%0A%09avidemux/ADM_libraries/ADM_utilities%20avidemux/ADM_osSupport%0A%09avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters%0A%09avidemux/ADM_userInterfaces/ADM_commonUI%0A%09avidemux/ADM_videoFilter%20cmake&In-Reply-To=%3C200803042055.m24Kt1lK013958%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001089.html">
   <LINK REL="Next"  HREF="001091.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Avidemux-svn-commit] r3824 - in	branches/avidemux_2.5_branch_gruntster: .	avidemux/ADM_audiocodec avidemux/ADM_codecs	avidemux/ADM_libraries/ADM_libMad	avidemux/ADM_libraries/ADM_libMpeg2Dec	avidemux/ADM_libraries/ADM_smjs	avidemux/ADM_libraries/ADM_utilities avidemux/ADM_osSupport	avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters	avidemux/ADM_userInterfaces/ADM_commonUI	avidemux/ADM_videoFilter cmake</H1>
    <B>gruntster at mail.berlios.de</B> 
    <A HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r3824%20-%20in%0A%09branches/avidemux_2.5_branch_gruntster%3A%20.%0A%09avidemux/ADM_audiocodec%20avidemux/ADM_codecs%0A%09avidemux/ADM_libraries/ADM_libMad%0A%09avidemux/ADM_libraries/ADM_libMpeg2Dec%0A%09avidemux/ADM_libraries/ADM_smjs%0A%09avidemux/ADM_libraries/ADM_utilities%20avidemux/ADM_osSupport%0A%09avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters%0A%09avidemux/ADM_userInterfaces/ADM_commonUI%0A%09avidemux/ADM_videoFilter%20cmake&In-Reply-To=%3C200803042055.m24Kt1lK013958%40sheep.berlios.de%3E"
       TITLE="[Avidemux-svn-commit] r3824 - in	branches/avidemux_2.5_branch_gruntster: .	avidemux/ADM_audiocodec avidemux/ADM_codecs	avidemux/ADM_libraries/ADM_libMad	avidemux/ADM_libraries/ADM_libMpeg2Dec	avidemux/ADM_libraries/ADM_smjs	avidemux/ADM_libraries/ADM_utilities avidemux/ADM_osSupport	avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters	avidemux/ADM_userInterfaces/ADM_commonUI	avidemux/ADM_videoFilter cmake">gruntster at mail.berlios.de
       </A><BR>
    <I>Tue Mar  4 21:55:01 CET 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001089.html">[Avidemux-svn-commit] r3823 - in	branches/avidemux_2.5_branch_gruntster: . avidemux	avidemux/ADM_libraries/ADM_utilities	avidemux/ADM_userInterfaces/ADM_QT4 cmake cmake_compile_check
</A></li>
        <LI>Next message: <A HREF="001091.html">[Avidemux-svn-commit] r3825 - in	branches/avidemux_2.5_branch_gruntster: . avidemux	avidemux/ADM_audiocodec avidemux/ADM_codecs	avidemux/ADM_colorspace avidemux/ADM_filter	avidemux/ADM_inputs/ADM_openDML avidemux/ADM_libraries/ADM_lavcodec	avidemux/ADM_libraries/ADM_lavformat	avidemux/ADM_libraries/ADM_lavutil	avidemux/ADM_libraries/ADM_libMpeg2Dec	avidemux/ADM_libraries/ADM_libmpeg2enc	avidemux/ADM_libraries/ADM_libpostproc	avidemux/ADM_libraries/ADM_libswscale	avidemux/ADM_libraries/ADM_mplex	avidemux/ADM_libraries/ADM_utilities avidemux/ADM_osSupport	avidemux/ADM_userInterfaces/ADM_commonUI avidemux/ADM_video	avidemux/ADM_videoFilter cmake
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1090">[ date ]</a>
              <a href="thread.html#1090">[ thread ]</a>
              <a href="subject.html#1090">[ subject ]</a>
              <a href="author.html#1090">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: gruntster
Date: 2008-03-04 21:54:48 +0100 (Tue, 04 Mar 2008)
New Revision: 3824

Added:
   branches/avidemux_2.5_branch_gruntster/cmake/admLibMad.cmake
Modified:
   branches/avidemux_2.5_branch_gruntster/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_mpeg.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libMad/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libMpeg2Dec/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_smjs/jsautocfg.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/default.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_cpuCap.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/cmake/admDetermineSystem.cmake
   branches/avidemux_2.5_branch_gruntster/cmake/admSetLavcodecFlags.cmake
   branches/avidemux_2.5_branch_gruntster/cmake/config.h.cmake
Log:
[CMake] localise and clean up defines

Modified: branches/avidemux_2.5_branch_gruntster/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/CMakeLists.txt	2008-03-04 17:38:18 UTC (rev 3823)
+++ branches/avidemux_2.5_branch_gruntster/CMakeLists.txt	2008-03-04 20:54:48 UTC (rev 3824)
@@ -54,9 +54,7 @@
 ########################################
 SET(VERSION 2.5)
 
-SET(HAVE_BUILTIN_VECTOR 1)
 SET(HAVE_AUDIO 1)
-
 SET(USE_MP3 1)
 SET(USE_AC3 1)
 SET(USE_FFMPEG 1)
@@ -69,7 +67,6 @@
 ELSEIF (ADM_CPU_X86_64)
 	SET(ARCH_X86 1)
 	SET(ARCH_X86_64 1)
-	SET(ARCH_64_BITS 1)
 ELSEIF (ADM_CPU_PPC)
 	SET(ARCH_POWERPC 1)
 
@@ -89,21 +86,9 @@
 	SET(WORDS_BIGENDIAN 1)
 ENDIF (CMAKE_WORDS_BIGENDIAN)
 
-# LibMad
-IF (ADM_CPU_X86)
-	SET(FPM_INTEL 1)
-ELSEIF (ADM_CPU_X86_64)
-	SET(FPM_DEFAULT 1)
-ELSEIF (ADM_CPU_PPC)
-	SET(FPM_PPC 1)
-ENDIF (ADM_CPU_X86)
-
 # Libavcodec
 INCLUDE(admSetLavcodecFlags)
 
-# LibMpeg2Dec
-SET(ACCEL_DETECT 1)
-
 IF (NOT CMAKE_BUILD_TYPE)
 	SET(CMAKE_BUILD_TYPE &quot;Release&quot;)
 ELSEIF (CMAKE_BUILD_TYPE STREQUAL &quot;Debug&quot;)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/CMakeLists.txt	2008-03-04 17:38:18 UTC (rev 3823)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_audiocodec/CMakeLists.txt	2008-03-04 20:54:48 UTC (rev 3824)
@@ -21,4 +21,9 @@
 
 IF (USE_VORBIS)
 	ADD_SOURCE_CFLAGS(audiocodec_ogg.cpp -I${VORBIS_INCLUDE_DIR})
-ENDIF (USE_VORBIS)
\ No newline at end of file
+ENDIF (USE_VORBIS)
+
+INCLUDE(admLibMad)
+GET_MAD_CFLAGS(MAD_CFLAGS)
+
+ADD_SOURCE_CFLAGS(ADM_codecmp3.cpp ${MAD_CFLAGS})
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_mpeg.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_mpeg.cpp	2008-03-04 17:38:18 UTC (rev 3823)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_mpeg.cpp	2008-03-04 20:54:48 UTC (rev 3824)
@@ -422,7 +422,7 @@
 {
   uint8_t *all;
   uint32_t page, img;
-#ifdef ARCH_64_BITS
+#ifdef ADM_CPU_64BIT
   uint64_t i;
   i = (uint64_t) id;
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libMad/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libMad/CMakeLists.txt	2008-03-04 17:38:18 UTC (rev 3823)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libMad/CMakeLists.txt	2008-03-04 20:54:48 UTC (rev 3824)
@@ -1,7 +1,12 @@
-SET(ADM_LIB ADM_libMad)
-
-SET(${ADM_LIB}_SRCS 
-	bit.c  decoder.c  fixed.c  frame.c  huffman.c  layer12.c  layer3.c  
-	stream.c  synth.c  timer.c  version.c)
-	
-ADD_ADM_LIB_ALL_TARGETS(${ADM_LIB} ${${ADM_LIB}_SRCS})
\ No newline at end of file
+SET(ADM_LIB ADM_libMad)
+
+SET(${ADM_LIB}_SRCS 
+	bit.c  decoder.c  fixed.c  frame.c  huffman.c  layer12.c  layer3.c  
+	stream.c  synth.c  timer.c  version.c)
+
+ADD_ADM_LIB_ALL_TARGETS(${ADM_LIB} ${${ADM_LIB}_SRCS})
+
+INCLUDE(admLibMad)
+GET_MAD_CFLAGS(MAD_CFLAGS)
+
+ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} ${MAD_CFLAGS})
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libMpeg2Dec/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libMpeg2Dec/CMakeLists.txt	2008-03-04 17:38:18 UTC (rev 3823)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libMpeg2Dec/CMakeLists.txt	2008-03-04 20:54:48 UTC (rev 3824)
@@ -4,4 +4,5 @@
 	alloc.c      cpu_state.c  header.c      idct_altivec.c  idct_mlib.c  motion_comp_alpha.c    motion_comp.c       motion_comp_mmx.c
 	cpu_accel.c  decode.c     idct_alpha.c  idct.c          idct_mmx.c   motion_comp_altivec.c  motion_comp_mlib.c  slice.c)
 
-ADD_ADM_LIB_ALL_TARGETS(${ADM_LIB} ${${ADM_LIB}_SRCS})
\ No newline at end of file
+ADD_ADM_LIB_ALL_TARGETS(${ADM_LIB} ${${ADM_LIB}_SRCS})
+ADD_CFLAGS_ALL_TARGETS(${ADM_LIB} &quot;-DACCEL_DETECT&quot;)
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_smjs/jsautocfg.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_smjs/jsautocfg.h	2008-03-04 17:38:18 UTC (rev 3823)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_smjs/jsautocfg.h	2008-03-04 20:54:48 UTC (rev 3824)
@@ -22,7 +22,7 @@
 #define JS_BYTES_PER_DOUBLE 8L
 #define JS_BYTES_PER_DWORD  8L
 
-#ifdef ARCH_64_BITS
+#ifdef ADM_CPU_64BIT
 #define JS_BYTES_PER_LONG   8L
 #define JS_BYTES_PER_WORD   8L
 #define JS_BITS_PER_LONG    64L

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/default.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/default.h	2008-03-04 17:38:18 UTC (rev 3823)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/default.h	2008-03-04 20:54:48 UTC (rev 3824)
@@ -48,7 +48,7 @@
 #endif
 
 #ifndef GOT_TYPES
-#ifdef ARCH_64_BITS
+#ifdef ADM_CPU_64BIT
 #define int32_t 	signed int
 #define int64_t 	signed long int 
 #define uint64_t 	unsigned long  int

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_cpuCap.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_cpuCap.h	2008-03-04 17:38:18 UTC (rev 3823)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_cpuCap.h	2008-03-04 20:54:48 UTC (rev 3824)
@@ -51,7 +51,3 @@
 
 
 };
-
-#if (defined( ARCH_X86)  || defined(ARCH_X86_64)) &amp;&amp; defined(HAVE_BUILTIN_VECTOR)
-#define USE_SSE 1
-#endif

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp	2008-03-04 17:38:18 UTC (rev 3823)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters/gui_filtermanager.cpp	2008-03-04 20:54:48 UTC (rev 3824)
@@ -141,7 +141,7 @@
 wrapToolButton(GtkWidget * wid, gpointer user_data)
 {
         gui_act action;
-#ifdef ARCH_64_BITS
+#ifdef ADM_CPU_64BIT
 #define TPE long long int
 	long long int dummy;
 #else

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp	2008-03-04 17:38:18 UTC (rev 3823)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp	2008-03-04 20:54:48 UTC (rev 3824)
@@ -49,7 +49,7 @@
 #ifdef USE_FONTCONFIG
   adm_fontconfig=1;
 #endif
-#ifdef USE_ALTIVEC
+#ifdef ADM_CPU_ALTIVEC
         altivec=1;
 #endif
 #ifdef USE_MP3
@@ -112,13 +112,13 @@
 #ifdef USE_XV
 	xvideo=1;
 #endif
-#ifdef ARCH_X86
+#ifdef ADM_CPU_X86
 	x86=1;
 #endif
-#ifdef ARCH_X86_64
+#ifdef ADM_CPU_X86_64
 	x86_64=1;
 #endif
-#ifdef ARCH_POWERPC
+#ifdef ADM_CPU_PPC
 	adm_powerpc=1;
 #endif
 #ifdef HAVE_GETTEXT

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/CMakeLists.txt	2008-03-04 17:38:18 UTC (rev 3823)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/CMakeLists.txt	2008-03-04 20:54:48 UTC (rev 3824)
@@ -51,3 +51,7 @@
 	ADD_SOURCE_CFLAGS(ADM_vidSRTload.cpp &quot;${FREETYPE2_CFLAGS}&quot;)
 	ADD_SOURCE_CFLAGS(ADM_vidSRTRender.cpp &quot;${FREETYPE2_CFLAGS}&quot;)
 ENDIF (USE_FREETYPE)
+
+IF (ADM_CPU_X86)
+	ADD_SOURCE_CFLAGS(ADM_vidDecDec.cpp &quot;-DUSE_SSE&quot;)
+ENDIF (ADM_CPU_X86)
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/cmake/admDetermineSystem.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admDetermineSystem.cmake	2008-03-04 17:38:18 UTC (rev 3823)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admDetermineSystem.cmake	2008-03-04 20:54:48 UTC (rev 3824)
@@ -1,9 +1,11 @@
 # Determine CPU and Operating System for GCC
 #  ADM_BSD_FAMILY        - BSD family operating system was detected
+#  ADM_CPU_64BIT         - 64-bit CPU was detected
 #  ADM_CPU_ALTIVEC       - PowerPC CPU with AltiVec architecture was detected
 #  ADM_CPU_PPC           - PowerPC CPU architecture was detected
 #  ADM_CPU_X86           - x86 CPU architecture was detected
-#  ADM_CPU_X86_64        - x86-64 CPU architecture was detected
+#  ADM_CPU_X86_32        - x86 32-bit CPU architecture was detected
+#  ADM_CPU_X86_64        - x86 64-bit CPU architecture was detected
 #  CMAKE_WORDS_BIGENDIAN - big endian CPU detected
 
 MACRO (PERFORM_SYSTEM_TEST testFile testName testSupportedVarName)
@@ -89,16 +91,19 @@
 ########################################
 # Check CPU support
 ########################################
-PERFORM_SYSTEM_TEST(cpu_x86-64_check.cpp &quot;x86-64&quot; X86_64_SUPPORTED)
+PERFORM_SYSTEM_TEST(cpu_x86-64_check.cpp &quot;x86 64-bit&quot; X86_64_SUPPORTED)
 
 IF (X86_64_SUPPORTED)
+	SET(ADM_CPU_X86 1)
 	SET(ADM_CPU_X86_64 1)
+	SET(ADM_CPU_64BIT 1)
 ELSE (X86_64_SUPPORTED)
-	PERFORM_SYSTEM_TEST(cpu_x86_check.cpp &quot;x86&quot; X86_SUPPORTED)
+	PERFORM_SYSTEM_TEST(cpu_x86_check.cpp &quot;x86 32-bit&quot; X86_32_SUPPORTED)
 
-	IF (X86_SUPPORTED)
+	IF (X86_32_SUPPORTED)
 		SET(ADM_CPU_X86 1)
-	ELSE (X86_SUPPORTED)
+		SET(ADM_CPU_X86_32 1)
+	ELSE (X86_32_SUPPORTED)
 		PERFORM_SYSTEM_TEST(cpu_ppc_check.cpp &quot;PowerPC&quot; POWERPC_SUPPORTED)
 
 		IF (POWERPC_SUPPORTED)
@@ -110,17 +115,17 @@
 				SET(ADM_ALTIVEC_FLAGS &quot;${ADM_ALTIVEC_FLAGS} -faltivec&quot;)
 			ENDIF (APPLE)
 
-			PERFORM_SYSTEM_TEST(cpu_altivec_check.cpp &quot;AltiVec&quot; ALTIVEC_SUPPORTED)
+			PERFORM_SYSTEM_TEST(cpu_altivec_check.cpp &quot;AltiVec&quot; ALTIVEC_SUPPORTED &quot;${ADM_ALTIVEC_FLAGS}&quot;)
 
 			IF (ALTIVEC_SUPPORTED)
 				SET(ADM_CPU_ALTIVEC 1)
 			ENDIF (ALTIVEC_SUPPORTED)
 		ENDIF (POWERPC_SUPPORTED)
-	ENDIF (X86_SUPPORTED)
+	ENDIF (X86_32_SUPPORTED)
 ENDIF (X86_64_SUPPORTED)
 
 TEST_BIG_ENDIAN(CMAKE_WORDS_BIGENDIAN)
 
-IF (NOT ADM_CPU_X86 AND NOT ADM_CPU_X86_64 AND NOT ADM_CPU_PPC)
+IF (NOT ADM_CPU_X86_32 AND NOT ADM_CPU_X86_64 AND NOT ADM_CPU_PPC)
 	MESSAGE(FATAL_ERROR &quot;CPU not supported&quot;)
-ENDIF (NOT ADM_CPU_X86 AND NOT ADM_CPU_X86_64 AND NOT ADM_CPU_PPC)
\ No newline at end of file
+ENDIF (NOT ADM_CPU_X86_32 AND NOT ADM_CPU_X86_64 AND NOT ADM_CPU_PPC)
\ No newline at end of file

Added: branches/avidemux_2.5_branch_gruntster/cmake/admLibMad.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admLibMad.cmake	2008-03-04 17:38:18 UTC (rev 3823)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admLibMad.cmake	2008-03-04 20:54:48 UTC (rev 3824)
@@ -0,0 +1,9 @@
+MACRO (GET_MAD_CFLAGS varToSet)
+	IF (ADM_CPU_X86_32)
+		SET(${varToSet} &quot;-DFPM_INTEL&quot;)
+	ELSEIF (ADM_CPU_X86_64)
+		SET(${varToSet} &quot;-DFPM_DEFAULT&quot;)
+	ELSEIF (ADM_CPU_PPC)
+		SET(${varToSet} &quot;-DFPM_PPC&quot;)
+	ENDIF (ADM_CPU_X86_32)
+ENDMACRO (GET_MAD_CFLAGS)
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/cmake/admSetLavcodecFlags.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admSetLavcodecFlags.cmake	2008-03-04 17:38:18 UTC (rev 3823)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admSetLavcodecFlags.cmake	2008-03-04 20:54:48 UTC (rev 3824)
@@ -24,7 +24,7 @@
 SET(HAVE_THREADS 1)
 SET(RUNTIME_CPUDETECT 1)
 
-IF (ADM_CPU_X86 OR ADM_CPU_X86_64)
+IF (ADM_CPU_X86)
 	SET(ENABLE_MMX 1)
 	SET(HAVE_MMX 1)
 	SET(HAVE_FAST_UNALIGNED 1)
@@ -32,9 +32,9 @@
 	IF (ADM_CPU_X86_64)
 		SET(HAVE_FAST_64BIT 1)
 	ENDIF (ADM_CPU_X86_64)
-ELSE (ADM_CPU_X86 OR ADM_CPU_X86_64)
+ELSE (ADM_CPU_X86)
 	SET(ENABLE_MMX 0)
-ENDIF (ADM_CPU_X86 OR ADM_CPU_X86_64)
+ENDIF (ADM_CPU_X86)
 
 IF (APPLE)
 	SET(CONFIG_DARWIN 1)
@@ -43,7 +43,7 @@
 ########################################
 # Check GCC support for SSSE3
 ########################################
-IF (ADM_CPU_X86 OR ADM_CPU_X86_64)
+IF (ADM_CPU_X86)
 	ADM_COMPILE(cpu_ssse3_check.cpp &quot;&quot; &quot;&quot; &quot;&quot; SSSE3_SUPPORTED outputSsse3Test)
 
 	IF (SSSE3_SUPPORTED)
@@ -57,6 +57,6 @@
 			MESSAGE(&quot;Error Message: ${outputSsse3Test}&quot;)
 		ENDIF (VERBOSE)	
 	ENDIF (SSSE3_SUPPORTED)
-ENDIF (ADM_CPU_X86 OR ADM_CPU_X86_64)
+ENDIF (ADM_CPU_X86)
 
 MESSAGE(&quot;&quot;)
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/cmake/config.h.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/config.h.cmake	2008-03-04 17:38:18 UTC (rev 3823)
+++ branches/avidemux_2.5_branch_gruntster/cmake/config.h.cmake	2008-03-04 20:54:48 UTC (rev 3824)
@@ -4,12 +4,16 @@
 #define ADM_BUILD_GTK 2
 #define ADM_BUILD_QT4 3
 
+#cmakedefine ADM_CPU_64BIT
+#cmakedefine ADM_CPU_ALTIVEC
+#cmakedefine ADM_CPU_PPC
+#cmakedefine ADM_CPU_X86
+#cmakedefine ADM_CPU_X86_32
+#cmakedefine ADM_CPU_X86_64
+
 /* Jog Shuttle */
 #cmakedefine USE_JOG
 
-/* MPEG2DEC */
-#cmakedefine ACCEL_DETECT
-
 /* Big endian CPU - SPARC or PowerPC */
 #cmakedefine ADM_BIG_ENDIAN
 
@@ -21,9 +25,6 @@
 
 #cmakedefine HAVE_AUDIO
 
-/* Sparc workstations */
-#cmakedefine ADM_SPARC
-
 #if ${CONFIG_HEADER_TYPE} == ADM_BUILD_GTK || ${CONFIG_HEADER_TYPE} == ADM_BUILD_QT4
 /* use ALSA as possible audio device */
 #cmakedefine ALSA_SUPPORT
@@ -32,9 +33,6 @@
 /* AMR_NB */
 #cmakedefine AMR_NB
 
-/* X86_64 AMD64 assembly */
-#cmakedefine ARCH_64_BITS
-
 /* Enable PowerPC optim */
 #cmakedefine ARCH_POWERPC
 
@@ -84,24 +82,12 @@
 #cmakedefine HAVE_SSSE3
 #cmakedefine CONFIG_DARWIN
 
-/* Mad */
-#cmakedefine FPM_DEFAULT
-#cmakedefine FPM_INTEL
-#cmakedefine FPM_PPC
-#cmakedefine FPM_SPARC
-
-/* Using GCC 2.9x.x */
-#cmakedefine GCC_2_95_X
-
 /* AltiVec for mpeg2enc */
 #cmakedefine HAVE_ALTIVEC
 
 /* Enable AltiVec by default */
 #cmakedefine HAVE_ALTIVEC_H
 
-/* Enable AltiVec by default */
-#cmakedefine HAVE_BUILTIN_VECTOR
-
 /* FontConfig detected */
 #cmakedefine HAVE_FONTCONFIG
 
@@ -145,13 +131,9 @@
 
 /* use Aften AC3 encoder */
 #cmakedefine USE_AFTEN
+#cmakedefine USE_AFTEN_07	// 0.07
+#cmakedefine USE_AFTEN_08	// 0.0.8
 
-/* Use Aften 0.07 */
-#cmakedefine USE_AFTEN_07
-
-/* Use Aften 0.08 */
-#cmakedefine USE_AFTEN_08
-
 /* AltiVec for mpeg2enc */
 #cmakedefine USE_ALTIVEC
 
@@ -240,9 +222,6 @@
 /* use Nvwa memory leak detector */
 #cmakedefine FIND_LEAKS
 
-#cmakedefine ADM_CPU_X86
-#cmakedefine ADM_CPU_X86_64
-
 #ifdef __MINGW32__
 #define rindex strrchr
 #define index strchr


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001089.html">[Avidemux-svn-commit] r3823 - in	branches/avidemux_2.5_branch_gruntster: . avidemux	avidemux/ADM_libraries/ADM_utilities	avidemux/ADM_userInterfaces/ADM_QT4 cmake cmake_compile_check
</A></li>
	<LI>Next message: <A HREF="001091.html">[Avidemux-svn-commit] r3825 - in	branches/avidemux_2.5_branch_gruntster: . avidemux	avidemux/ADM_audiocodec avidemux/ADM_codecs	avidemux/ADM_colorspace avidemux/ADM_filter	avidemux/ADM_inputs/ADM_openDML avidemux/ADM_libraries/ADM_lavcodec	avidemux/ADM_libraries/ADM_lavformat	avidemux/ADM_libraries/ADM_lavutil	avidemux/ADM_libraries/ADM_libMpeg2Dec	avidemux/ADM_libraries/ADM_libmpeg2enc	avidemux/ADM_libraries/ADM_libpostproc	avidemux/ADM_libraries/ADM_libswscale	avidemux/ADM_libraries/ADM_mplex	avidemux/ADM_libraries/ADM_utilities avidemux/ADM_osSupport	avidemux/ADM_userInterfaces/ADM_commonUI avidemux/ADM_video	avidemux/ADM_videoFilter cmake
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1090">[ date ]</a>
              <a href="thread.html#1090">[ thread ]</a>
              <a href="subject.html#1090">[ subject ]</a>
              <a href="author.html#1090">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">More information about the Avidemux-svn-commit
mailing list</a><br>
</body></html>
