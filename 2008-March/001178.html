<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Avidemux-svn-commit] r3916 - in	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg:	. ADM_lavcodec ADM_lavcodec/i386 ADM_lavformat ADM_lavutil	ADM_libpostproc ADM_libswscale
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/avidemux-svn-commit/2008-March/index.html" >
   <LINK REL="made" HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r3916%20-%20in%0A%09branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg%3A%0A%09.%20ADM_lavcodec%20ADM_lavcodec/i386%20ADM_lavformat%20ADM_lavutil%0A%09ADM_libpostproc%20ADM_libswscale&In-Reply-To=%3C200803210652.m2L6q9tu005083%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001177.html">
   <LINK REL="Next"  HREF="001179.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Avidemux-svn-commit] r3916 - in	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg:	. ADM_lavcodec ADM_lavcodec/i386 ADM_lavformat ADM_lavutil	ADM_libpostproc ADM_libswscale</H1>
    <B>mean at BerliOS</B> 
    <A HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r3916%20-%20in%0A%09branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg%3A%0A%09.%20ADM_lavcodec%20ADM_lavcodec/i386%20ADM_lavformat%20ADM_lavutil%0A%09ADM_libpostproc%20ADM_libswscale&In-Reply-To=%3C200803210652.m2L6q9tu005083%40sheep.berlios.de%3E"
       TITLE="[Avidemux-svn-commit] r3916 - in	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg:	. ADM_lavcodec ADM_lavcodec/i386 ADM_lavformat ADM_lavutil	ADM_libpostproc ADM_libswscale">mean at mail.berlios.de
       </A><BR>
    <I>Fri Mar 21 07:52:09 CET 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001177.html">[Avidemux-svn-commit] r3915 -	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libpostproc
</A></li>
        <LI>Next message: <A HREF="001179.html">[Avidemux-svn-commit] r3917 - in	branches/avidemux_2.5_branch_gruntster/avidemux: ADM_codecs	ADM_colorspace ADM_editor ADM_libraries/ADM_ffmpeg/ADM_lavcodec	ADM_libraries/ADM_ffmpeg/ADM_lavformat	ADM_libraries/ADM_ffmpeg/ADM_libswscale	ADM_libraries/ADM_utilities ADM_outputs ADM_video ADM_videoFilter
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1178">[ date ]</a>
              <a href="thread.html#1178">[ thread ]</a>
              <a href="subject.html#1178">[ subject ]</a>
              <a href="author.html#1178">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: mean
Date: 2008-03-21 07:51:55 +0100 (Fri, 21 Mar 2008)
New Revision: 3916

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/avcodec.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/dsputil.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/ffv1.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/h263.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/h263dec.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/h264.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/cputest.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/dsputil_mmx.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/mpeg12.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/mpeg12enc.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/mpegvideo.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/mpegvideo_enc.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/opt.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/update_ffconf.sh
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/utils.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/avformat.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavutil/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libpostproc/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/rgb2rgb.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale_internal.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/yuv2rgb.c
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/config.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ffconf.c
Log:
[LAV*] Fix build on amd64


Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/CMakeLists.txt	2008-03-21 06:51:51 UTC (rev 3915)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/CMakeLists.txt	2008-03-21 06:51:55 UTC (rev 3916)
@@ -10,7 +10,7 @@
 	xan.c  rpza.c  msrle.c  msvideo1.c  cinepak.c  vqavideo.c  idcinvideo.c  smc.c
 	flicvideo.c  interplayvideo.c  dpcm.c  8bps.c  vmdav.c  truemotion1.c  flac.c
 	g726.c  qtrle.c  lcl.c  snow.c  rangecoder.c  bitstream.c  h264idct.c  h261.c
-	amr.c  tscc.c  resample2.c  pthread.c  qdm2.c  bitstream_filter.c  eval.c  vc1.c
+	amr.c  tscc.c  resample2.c    qdm2.c  bitstream_filter.c  eval.c  vc1.c
 	vc1dsp.c  vp56.c  vp6.c  vp5.c  indeo2.c  smacker.c  opt.c  fraps.c  dnxhddec.c
 	mpeg12data.c  mpegaudiodata.c  msmpeg4data.c  vc1data.c  vp56data.c  mjpegbdec.c
 	h263_parser.c  h264_parser.c  mpeg4video_parser.c  mpegvideo_enc.c  mpeg12enc.c
@@ -43,6 +43,7 @@
 ENDIF (ADM_DEBUG)
 IF (UNIX)
 	ADD_TARGET_CFLAGS(${ADM_LIB} -fPIC -DPIC)
+        ADD_TARGET_LDFLAGS(${ADM_LIB} &quot;-rdynamic -export-dynamic -Wl,-Bsymbolic&quot;)
 ENDIF (UNIX)
 
 TARGET_LINK_LIBRARIES(${ADM_LIB} ADM_core ADM_libavutil ${ZLIB_LIBRARY})

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/avcodec.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/avcodec.h	2008-03-21 06:51:51 UTC (rev 3915)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/avcodec.h	2008-03-21 06:51:55 UTC (rev 3916)
@@ -26,9 +26,9 @@
  * external API header
  */
 
+#include &quot;config.h&quot; // MEANX
+#include &quot;../ADM_lavutil/avutil.h&quot; // MEANX
 
-#include &quot;libavutil/avutil.h&quot;
-
 #define LIBAVCODEC_VERSION_MAJOR 51
 #define LIBAVCODEC_VERSION_MINOR 51
 #define LIBAVCODEC_VERSION_MICRO  0
@@ -449,6 +449,8 @@
 #define CODEC_FLAG2_CHUNKS        0x00008000 ///&lt; Input bitstream might be truncated at a packet boundaries instead of only at frame boundaries.
 #define CODEC_FLAG2_NON_LINEAR_QUANT 0x00010000 ///&lt; Use MPEG-2 nonlinear quantizer.
 #define CODEC_FLAG2_BIT_RESERVOIR 0x00020000 ///&lt; Use a bit reservoir when encoding if possible
+//MEANX: NEVER EVER USE CLOSED GOP ?
+#define CODEC_FLAG2_32_PULLDOWN   0x80000000 
 
 /* Unsupported options :
  *              Syntax Arithmetic coding (SAC)
@@ -1215,6 +1217,7 @@
      * - decoding: unused
      */
     int rc_max_rate;
+    int rc_max_rate_header; /*&lt; That one is set in the header MEANX */
 
     /**
      * minimum bitrate
@@ -1229,6 +1232,8 @@
      * - decoding: unused
      */
     int rc_buffer_size;
+    int rc_buffer_size_header;  /*&lt; That one is set in the header MEANX*/
+
     float rc_buffer_aggressivity;
 
     /**

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/dsputil.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/dsputil.h	2008-03-21 06:51:51 UTC (rev 3915)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/dsputil.h	2008-03-21 06:51:55 UTC (rev 3916)
@@ -29,8 +29,9 @@
 
 #ifndef FFMPEG_DSPUTIL_H
 #define FFMPEG_DSPUTIL_H
-
+#include &quot;math.h&quot; //MEANX
 #include &quot;avcodec.h&quot;
+#include &quot;intreadwrite.h&quot; //MEANX
 
 
 //#define DEBUG
@@ -510,7 +511,9 @@
 
 /* should be defined by architectures supporting
    one or more MultiMedia extension */
+#if 0 //MEANX
 int mm_support(void);
+#endif
 
 void dsputil_init_alpha(DSPContext* c, AVCodecContext *avctx);
 void dsputil_init_armv4l(DSPContext* c, AVCodecContext *avctx);
@@ -527,7 +530,8 @@
 #if defined(HAVE_MMX)
 
 #undef emms_c
-
+#include &quot;dsputil_cpu.h&quot; /* MEANX */
+#if 0
 #define MM_MMX    0x0001 /* standard MMX */
 #define MM_3DNOW  0x0004 /* AMD 3DNOW */
 #define MM_MMXEXT 0x0002 /* SSE integer functions or AMD MMX ext */
@@ -538,14 +542,15 @@
 #define MM_SSSE3  0x0080 /* Conroe SSSE3 functions */
 
 extern int mm_flags;
-
+#endif // /MEANX
 void add_pixels_clamped_mmx(const DCTELEM *block, uint8_t *pixels, int line_size);
 void put_pixels_clamped_mmx(const DCTELEM *block, uint8_t *pixels, int line_size);
 void put_signed_pixels_clamped_mmx(const DCTELEM *block, uint8_t *pixels, int line_size);
 
 static inline void emms(void)
 {
-    asm volatile (&quot;emms;&quot;:::&quot;memory&quot;);
+    //asm volatile (&quot;emms;&quot;:::&quot;memory&quot;);
+    asm volatile (&quot;emms;&quot;); //  MEANX
 }
 
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/ffv1.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/ffv1.c	2008-03-21 06:51:51 UTC (rev 3915)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/ffv1.c	2008-03-21 06:51:55 UTC (rev 3916)
@@ -959,6 +959,8 @@
         clear_state(f);
     }else{
         p-&gt;key_frame= 0;
+         p-&gt;pict_type= FF_P_TYPE; // MEANX : looks more like a P to me as user
+
     }
     if(!f-&gt;plane[0].state &amp;&amp; !f-&gt;plane[0].vlc_state)
         return -1;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/h263.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/h263.c	2008-03-21 06:51:51 UTC (rev 3915)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/h263.c	2008-03-21 06:51:55 UTC (rev 3916)
@@ -3129,8 +3129,14 @@
 static inline int mpeg4_is_resync(MpegEncContext *s){
     int bits_count= get_bits_count(&amp;s-&gt;gb);
     int v= show_bits(&amp;s-&gt;gb, 16);
-
-    if(s-&gt;workaround_bugs&amp;FF_BUG_NO_PADDING){
+ if(s-&gt;lavc_build==4655 || s-&gt;xvid_build ) // Breaks multithreaded decoding meanx
+    {
+    #if 0
+    #undef printf
+    printf(&quot;bugs: %X lavc_build:%d xvid_build:%d divx_version:%d divx_build:%d %s\n&quot;,
+               s-&gt;workaround_bugs, s-&gt;lavc_build, s-&gt;xvid_build, s-&gt;divx_version, s-&gt;divx_build,
+               s-&gt;divx_packed ? &quot;p&quot; : &quot;&quot;);
+    #endif
         return 0;
     }
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/h263dec.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/h263dec.c	2008-03-21 06:51:51 UTC (rev 3915)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/h263dec.c	2008-03-21 06:51:55 UTC (rev 3916)
@@ -118,7 +118,25 @@
 
     return 0;
 }
+/* MeanX : Ugly patch to detect vo ppacked stuff ... */
+int av_is_voppacked(AVCodecContext *avctx, int *vop_packed, int *gmc, int *qpel)
+{
+    MpegEncContext *s = avctx-&gt;priv_data;
+    // set sane default
+    *vop_packed=0;
+    *gmc=0;
+    *qpel=0;
+    if(avctx-&gt;codec-&gt;id!=CODEC_ID_MPEG4) return 0;
+    	
+  	*vop_packed=(s-&gt;divx_packed);
+	*qpel=s-&gt;quarter_sample;
+	*gmc=0;	// FIXME
+	return 1;
 
+  }
+  /* MeanX */
+
+
 int ff_h263_decode_end(AVCodecContext *avctx)
 {
     MpegEncContext *s = avctx-&gt;priv_data;
@@ -255,6 +273,7 @@
     /* try to detect the padding bug */
     if(      s-&gt;codec_id==CODEC_ID_MPEG4
        &amp;&amp;   (s-&gt;workaround_bugs&amp;FF_BUG_AUTODETECT)
+        &amp;&amp;  !(s-&gt;workaround_bugs&amp;FF_BUG_NO_PADDING) // MEANX
        &amp;&amp;    s-&gt;gb.size_in_bits - get_bits_count(&amp;s-&gt;gb) &gt;=0
        &amp;&amp;    s-&gt;gb.size_in_bits - get_bits_count(&amp;s-&gt;gb) &lt; 48
 //       &amp;&amp;   !s-&gt;resync_marker
@@ -277,8 +296,10 @@
                 s-&gt;padding_bug_score++;
         }
     }
-
-    if(s-&gt;workaround_bugs&amp;FF_BUG_AUTODETECT){
+// MEANX   slice end not reached when autodetect is set
+   if( !(s-&gt;workaround_bugs&amp;FF_BUG_NO_PADDING) &amp;&amp;
+            s-&gt;workaround_bugs&amp;FF_BUG_AUTODETECT ){
+    // MEANX if(s-&gt;workaround_bugs&amp;FF_BUG_AUTODETECT){
         if(s-&gt;padding_bug_score &gt; -2 &amp;&amp; !s-&gt;data_partitioning /*&amp;&amp; (s-&gt;divx_version || !s-&gt;resync_marker)*/)
             s-&gt;workaround_bugs |=  FF_BUG_NO_PADDING;
         else
@@ -412,7 +433,14 @@
     } else {
         ret = h263_decode_picture_header(s);
     }
+	//MEANX we need to do it here also for quicktime file / ctts atom 
+        // we need the correct frame type, and qt file may contain 
+        // vop not coded frame.
+        pict-&gt;pict_type=s-&gt;current_picture.pict_type= s-&gt;pict_type;
+        pict-&gt;key_frame=s-&gt;current_picture.key_frame= s-&gt;pict_type == FF_I_TYPE;
+        //MEANX
 
+
     if(ret==FRAME_SKIPPED) return get_consumed_bytes(s, buf_size);
 
     /* skip if the header was thrashed */
@@ -690,6 +718,12 @@
 
 assert(s-&gt;current_picture.pict_type == s-&gt;current_picture_ptr-&gt;pict_type);
 assert(s-&gt;current_picture.pict_type == s-&gt;pict_type);
+/* MEANX */
+  if(s-&gt;current_picture_ptr)
+      s-&gt;current_picture_ptr-&gt;opaque=pict-&gt;opaque;
+/* MEANX */
+
+
     if (s-&gt;pict_type == FF_B_TYPE || s-&gt;low_delay) {
         *pict= *(AVFrame*)s-&gt;current_picture_ptr;
     } else if (s-&gt;last_picture_ptr != NULL) {

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/h264.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/h264.c	2008-03-21 06:51:51 UTC (rev 3915)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/h264.c	2008-03-21 06:51:55 UTC (rev 3916)
@@ -75,7 +75,18 @@
 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 3, 3, 3, 3, 3, 3, 4, 4, 4, 4, 4, 4, 5, 5, 5, 5, 5, 5, 6, 6, 6, 6, 6, 6, 7, 7, 7, 7, 7, 7, 8, 8, 8, 8,
 };
 
+/* MEANX */
+int av_getAVCStreamInfo(AVCodecContext *avctx, uint32_t  *nalSize, uint32_t *isAvc)
+{
+      H264Context *h = avctx-&gt;priv_data;
+      assert(h);
+      *nalSize=h-&gt;nal_length_size;
+      *isAvc=h-&gt;is_avc;
+	return 1;
 
+  }
+/* MeanX */
+
 static void fill_caches(H264Context *h, int mb_type, int for_deblock){
     MpegEncContext * const s = &amp;h-&gt;s;
     const int mb_xy= s-&gt;mb_x + s-&gt;mb_y*s-&gt;mb_stride;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/cputest.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/cputest.c	2008-03-21 06:51:51 UTC (rev 3915)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/cputest.c	2008-03-21 06:51:55 UTC (rev 3916)
@@ -42,10 +42,16 @@
          : &quot;=a&quot; (eax), &quot;=S&quot; (ebx),\
            &quot;=c&quot; (ecx), &quot;=d&quot; (edx)\
          : &quot;0&quot; (index));
+/* MEANX */
+extern int ADM_lavcodec_mm_support(void);
+/*/MEANX */
 
 /* Function to test if multimedia instructions are supported...  */
 int mm_support(void)
 {
+	return ADM_lavcodec_mm_support();
+
+#if 0 //MEANX
     int rval = 0;
     int eax, ebx, ecx, edx;
     int max_std_level, max_ext_level, std_caps=0, ext_caps=0;
@@ -121,6 +127,7 @@
         (rval&amp;FF_MM_3DNOWEXT) ? &quot;3DNowExt &quot;:&quot;&quot;);
 #endif
     return rval;
+#endif // /MEANX
 }
 
 #ifdef TEST

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/dsputil_mmx.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/dsputil_mmx.c	2008-03-21 06:51:51 UTC (rev 3915)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/i386/dsputil_mmx.c	2008-03-21 06:51:55 UTC (rev 3916)
@@ -47,7 +47,7 @@
 DECLARE_ALIGNED_16(const uint64_t, ff_pdw_80000000[2]) =
 {0x8000000080000000ULL, 0x8000000080000000ULL};
 
-DECLARE_ALIGNED_8 (const uint64_t, ff_pw_3  ) = 0x0003000300030003ULL;
+DECLARE_ALIGNED_8 (const uint64_t, ff_pw_3  ) = 0x0003000300030003ULL; 
 DECLARE_ALIGNED_8 (const uint64_t, ff_pw_4  ) = 0x0004000400040004ULL;
 DECLARE_ALIGNED_16(const xmm_t,    ff_pw_5  ) = {0x0005000500050005ULL, 0x0005000500050005ULL};
 DECLARE_ALIGNED_8 (const uint64_t, ff_pw_8  ) = 0x0008000800080008ULL;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/mpeg12.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/mpeg12.c	2008-03-21 06:51:51 UTC (rev 3915)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/mpeg12.c	2008-03-21 06:51:55 UTC (rev 3916)
@@ -1934,7 +1934,12 @@
         ff_er_frame_end(s);
 
         MPV_frame_end(s);
+/* MEANX */
+  if(s-&gt;current_picture_ptr)
+      s-&gt;current_picture_ptr-&gt;opaque=pict-&gt;opaque;
+/* MEANX */
 
+
         if (s-&gt;pict_type == FF_B_TYPE || s-&gt;low_delay) {
             *pict= *(AVFrame*)s-&gt;current_picture_ptr;
             ff_print_debug_info(s, pict);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/mpeg12enc.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/mpeg12enc.c	2008-03-21 06:51:51 UTC (rev 3915)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/mpeg12enc.c	2008-03-21 06:51:55 UTC (rev 3916)
@@ -127,10 +127,19 @@
             s-&gt;frame_rate_index= i;
         }
     }
+ /* MEANX 
+
     if(dmin)
         return -1;
     else
         return 0;
+  */
+        if(dmin&gt;4)
+   {
+        av_log(0,AV_LOG_ERROR,&quot;We did a roundup ! Expect async!\n&quot;);
+   }
+        return 0; //MEANX
+
 }
 
 static int encode_init(AVCodecContext *avctx)
@@ -208,6 +217,7 @@
 
             put_bits(&amp;s-&gt;pb, 12, s-&gt;width);
             put_bits(&amp;s-&gt;pb, 12, s-&gt;height);
+#if 0 //MEANX
 
             for(i=1; i&lt;15; i++){
                 float error= aspect_ratio;
@@ -223,20 +233,44 @@
                     s-&gt;aspect_ratio_info= i;
                 }
             }
+#endif // MEANX
+            //MEANX put_bits(&amp;s-&gt;pb, 4, s-&gt;aspect_ratio_info);
+            //MEANX put_bits(&amp;s-&gt;pb, 4, s-&gt;frame_rate_index);
+ // MEANX 4:3
+  if(s-&gt;avctx-&gt;sample_aspect_ratio.num==16 &amp;&amp; s-&gt;avctx-&gt;sample_aspect_ratio.den==9)
+            {
+                //printf(&quot;FFmpeg : Wide\n&quot;);
+                put_bits(&amp;s-&gt;pb,4,3); //16:9
+            }
+            else        //4:3
+            {
+              if(s-&gt;codec_id == CODEC_ID_MPEG2VIDEO)
+                put_bits(&amp;s-&gt;pb, 4, 2);
+              else
+                put_bits(&amp;s-&gt;pb, 4, 12); // MPEG1
+            }
+// /MEANX
 
-            put_bits(&amp;s-&gt;pb, 4, s-&gt;aspect_ratio_info);
-            put_bits(&amp;s-&gt;pb, 4, s-&gt;frame_rate_index);
+// //MEANX PULLDOWN            put_bits(&amp;s-&gt;pb, 4, s-&gt;frame_rate_index);
+if((s-&gt;flags2 &amp; CODEC_FLAG2_32_PULLDOWN) &amp;&amp; (s-&gt;codec_id == CODEC_ID_MPEG2VIDEO))
+            {           
+                put_bits(&amp;s-&gt;pb, 4,4);
+            }
+            else
+            {                                  
+                put_bits(&amp;s-&gt;pb, 4, s-&gt;frame_rate_index);
+            } //MEANX pulldown
 
-            if(s-&gt;avctx-&gt;rc_max_rate){
-                v = (s-&gt;avctx-&gt;rc_max_rate + 399) / 400;
+            if(s-&gt;avctx-&gt;rc_max_rate_header){ //MEANX we use header
+                v = (s-&gt;avctx-&gt;rc_max_rate_header + 399) / 400;
                 if (v &gt; 0x3ffff &amp;&amp; s-&gt;codec_id == CODEC_ID_MPEG1VIDEO)
                     v = 0x3ffff;
             }else{
                 v= 0x3FFFF;
             }
 
-            if(s-&gt;avctx-&gt;rc_buffer_size)
-                vbv_buffer_size = s-&gt;avctx-&gt;rc_buffer_size;
+            if(s-&gt;avctx-&gt;rc_buffer_size_header) // MEANX we use header
+                vbv_buffer_size = s-&gt;avctx-&gt;rc_buffer_size_header;
             else
                 /* VBV calculation: Scaled so that a VCD has the proper VBV size of 40 kilobytes */
                 vbv_buffer_size = (( 20 * s-&gt;bit_rate) / (1151929 / 2)) * 8 * 1024;
@@ -269,8 +303,17 @@
 
                 put_bits(&amp;s-&gt;pb, 3, s-&gt;avctx-&gt;profile); //profile
                 put_bits(&amp;s-&gt;pb, 4, s-&gt;avctx-&gt;level); //level
+   // MEANX pulldown put_bits(&amp;s-&gt;pb, 1, s-&gt;progressive_sequence);
+  // MEANX Pulldown
+ if(s-&gt;flags2 &amp; CODEC_FLAG2_32_PULLDOWN) //MEANX
+                        put_bits(&amp;s-&gt;pb, 1, 0);
+                else
+                        put_bits(&amp;s-&gt;pb, 1, s-&gt;progressive_sequence);
 
-                put_bits(&amp;s-&gt;pb, 1, s-&gt;progressive_sequence);
+
+// /MEANX
+
+
                 put_bits(&amp;s-&gt;pb, 2, s-&gt;chroma_format);
                 put_bits(&amp;s-&gt;pb, 2, 0); //horizontal size ext
                 put_bits(&amp;s-&gt;pb, 2, 0); //vertical size ext
@@ -334,6 +377,8 @@
 
 void mpeg1_encode_picture_header(MpegEncContext *s, int picture_number)
 {
+	int tff,rff; //MEANX
+
     mpeg1_encode_sequence_header(s);
 
     /* mpeg1 picture header */
@@ -370,6 +415,49 @@
 
     s-&gt;frame_pred_frame_dct = 1;
     if(s-&gt;codec_id == CODEC_ID_MPEG2VIDEO){
+ /* MEANX -- Pulldown */
+        if(s-&gt;flags2 &amp; CODEC_FLAG2_32_PULLDOWN)
+        {
+        
+                switch((s-&gt;picture_number - 
+                          s-&gt;gop_picture_number)&amp;3)
+                {
+                        case 0:
+                        default:
+                                rff=1;
+                                tff=1;
+                                break;
+                        case 1:
+                                rff=0;
+                                tff=0;
+                                break;
+                        case 2:
+                                rff=1;
+                                tff=0;
+                                break;
+                        case 3:
+                                rff=0;
+                                tff=1;
+                                break;
+                }               
+           }
+        else
+        {
+                if (s-&gt;progressive_sequence) 
+                {
+                        tff=0; /* no repeat */
+                } else 
+                {
+                        tff= s-&gt;current_picture_ptr-&gt;top_field_first;
+                }
+                rff=s-&gt;repeat_first_field;
+        
+        }
+
+//               /MEANX pulldown
+
+
+
         put_header(s, EXT_START_CODE);
         put_bits(&amp;s-&gt;pb, 4, 8); //pic ext
         if (s-&gt;pict_type == FF_P_TYPE || s-&gt;pict_type == FF_B_TYPE) {
@@ -388,11 +476,16 @@
 
         assert(s-&gt;picture_structure == PICT_FRAME);
         put_bits(&amp;s-&gt;pb, 2, s-&gt;picture_structure);
+#if 0 //MEANX
+
         if (s-&gt;progressive_sequence) {
             put_bits(&amp;s-&gt;pb, 1, 0); /* no repeat */
         } else {
             put_bits(&amp;s-&gt;pb, 1, s-&gt;current_picture_ptr-&gt;top_field_first);
         }
+#endif
+         put_bits(&amp;s-&gt;pb, 1, tff);  //MEANX PULLDOWN
+
         /* XXX: optimize the generation of this flag with entropy
            measures */
         s-&gt;frame_pred_frame_dct = s-&gt;progressive_sequence;
@@ -402,7 +495,10 @@
         put_bits(&amp;s-&gt;pb, 1, s-&gt;q_scale_type);
         put_bits(&amp;s-&gt;pb, 1, s-&gt;intra_vlc_format);
         put_bits(&amp;s-&gt;pb, 1, s-&gt;alternate_scan);
-        put_bits(&amp;s-&gt;pb, 1, s-&gt;repeat_first_field);
+ // MEANX put_bits(&amp;s-&gt;pb, 1, s-&gt;repeat_first_field);
+	put_bits(&amp;s-&gt;pb, 1, rff);
+      // /MEANX
+
         s-&gt;progressive_frame = s-&gt;progressive_sequence;
         put_bits(&amp;s-&gt;pb, 1, s-&gt;chroma_format == CHROMA_420 ? s-&gt;progressive_frame : 0); /* chroma_420_type */
         put_bits(&amp;s-&gt;pb, 1, s-&gt;progressive_frame);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/mpegvideo.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/mpegvideo.c	2008-03-21 06:51:51 UTC (rev 3915)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/mpegvideo.c	2008-03-21 06:51:55 UTC (rev 3916)
@@ -558,7 +558,11 @@
     CHECKED_ALLOCZ(s-&gt;prev_pict_types, PREV_PICT_TYPES_BUFFER_SIZE);
 
     s-&gt;parse_context.state= -1;
-    if((s-&gt;avctx-&gt;debug&amp;(FF_DEBUG_VIS_QP|FF_DEBUG_VIS_MB_TYPE)) || (s-&gt;avctx-&gt;debug_mv)){
+ //MEANX: Allocate them always, as they may be free when we decode 1st image
+
+    // MEANXif((s-&gt;avctx-&gt;debug&amp;(FF_DEBUG_VIS_QP|FF_DEBUG_VIS_MB_TYPE)) || (s-&gt;avctx-&gt;debug_mv)){
+if(1){ // MEANX
+
        s-&gt;visualization_buffer[0] = av_malloc((s-&gt;mb_width*16 + 2*EDGE_WIDTH) * s-&gt;mb_height*16 + 2*EDGE_WIDTH);
        s-&gt;visualization_buffer[1] = av_malloc((s-&gt;mb_width*8 + EDGE_WIDTH) * s-&gt;mb_height*8 + EDGE_WIDTH);
        s-&gt;visualization_buffer[2] = av_malloc((s-&gt;mb_width*8 + EDGE_WIDTH) * s-&gt;mb_height*8 + EDGE_WIDTH);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/mpegvideo_enc.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/mpegvideo_enc.c	2008-03-21 06:51:51 UTC (rev 3915)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/mpegvideo_enc.c	2008-03-21 06:51:55 UTC (rev 3916)
@@ -371,12 +371,14 @@
 
         av_log(avctx, AV_LOG_INFO, &quot;Warning vbv_delay will be set to 0xFFFF (=VBR) as the specified vbv buffer is too large for the given bitrate!\n&quot;);
     }
+#if 0 //MEANX
 
     if((s-&gt;flags &amp; CODEC_FLAG_4MV) &amp;&amp; s-&gt;codec_id != CODEC_ID_MPEG4
        &amp;&amp; s-&gt;codec_id != CODEC_ID_H263 &amp;&amp; s-&gt;codec_id != CODEC_ID_H263P &amp;&amp; s-&gt;codec_id != CODEC_ID_FLV1){
         av_log(avctx, AV_LOG_ERROR, &quot;4MV not supported by codec\n&quot;);
         return -1;
     }
+#endif
 
     if(s-&gt;obmc &amp;&amp; s-&gt;avctx-&gt;mb_decision != FF_MB_DECISION_SIMPLE){
         av_log(avctx, AV_LOG_ERROR, &quot;OBMC is only supported with simple mb decision\n&quot;);
@@ -408,12 +410,13 @@
         av_log(avctx, AV_LOG_ERROR, &quot;interlacing not supported by codec\n&quot;);
         return -1;
     }
+#if 0 //MEANX
 
     if(s-&gt;mpeg_quant &amp;&amp; s-&gt;codec_id != CODEC_ID_MPEG4){ //FIXME mpeg2 uses that too
         av_log(avctx, AV_LOG_ERROR, &quot;mpeg2 style quantization not supported by codec\n&quot;);
         return -1;
     }
-
+#endif
     if((s-&gt;flags &amp; CODEC_FLAG_CBP_RD) &amp;&amp; !(s-&gt;flags &amp; CODEC_FLAG_TRELLIS_QUANT)){
         av_log(avctx, AV_LOG_ERROR, &quot;CBP RD needs trellis quant\n&quot;);
         return -1;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/opt.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/opt.h	2008-03-21 06:51:51 UTC (rev 3915)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/opt.h	2008-03-21 06:51:55 UTC (rev 3916)
@@ -27,7 +27,8 @@
  * AVOptions
  */
 
-#include &quot;libavutil/rational.h&quot;
+// MEANX #include &quot;libavutil/rational.h&quot;
+#include &quot;../ADM_lavutil/rational.h&quot;
 
 enum AVOptionType{
     FF_OPT_TYPE_FLAGS,

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/update_ffconf.sh
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/update_ffconf.sh	2008-03-21 06:51:51 UTC (rev 3915)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/update_ffconf.sh	2008-03-21 06:51:55 UTC (rev 3916)
@@ -1,2 +1,2 @@
-gcc ffconf.c -o ffconf
-./ffconf &gt; ffconf.h
+gcc ../ffconf.c -o ffconf
+./ffconf &gt; ../config.h

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/utils.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/utils.c	2008-03-21 06:51:51 UTC (rev 3915)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavcodec/utils.c	2008-03-21 06:51:55 UTC (rev 3916)
@@ -959,10 +959,12 @@
 
     if((avctx-&gt;codec-&gt;capabilities &amp; CODEC_CAP_DELAY) || buf_size){
         //FIXME remove the check below _after_ ensuring that all audio check that the available space is enough
+#if 0 // MEANX : Silence
         if(*frame_size_ptr &lt; AVCODEC_MAX_AUDIO_FRAME_SIZE){
             av_log(avctx, AV_LOG_ERROR, &quot;buffer smaller than AVCODEC_MAX_AUDIO_FRAME_SIZE\n&quot;);
             return -1;
         }
+#endif
         if(*frame_size_ptr &lt; FF_MIN_BUFFER_SIZE ||
         *frame_size_ptr &lt; avctx-&gt;channels * avctx-&gt;frame_size * sizeof(int16_t)){
             av_log(avctx, AV_LOG_ERROR, &quot;buffer %d too small\n&quot;, *frame_size_ptr);
@@ -1387,7 +1389,7 @@
         return -1;
     }
 #if !defined(HAVE_MKSTEMP)
-    fd = open(*filename, O_RDWR | O_BINARY | O_CREAT, 0444);
+    fd = open(*filename, O_RDWR /* MEANX | O_BINARY*/ | O_CREAT, 0444);
 #else
     snprintf(*filename, len, &quot;/tmp/%sXXXXXX&quot;, prefix);
     fd = mkstemp(*filename);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/CMakeLists.txt	2008-03-21 06:51:51 UTC (rev 3915)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/CMakeLists.txt	2008-03-21 06:51:55 UTC (rev 3916)
@@ -9,7 +9,8 @@
 ADD_TARGET_CFLAGS(${ADM_LIB} &quot;-I../ADM_lavcodec -I../ADM_lavutil -DHAVE_AV_CONFIG_H&quot;)
 
 IF (UNIX)
-	ADD_TARGET_CFLAGS(${ADM_LIB} -fPIC)
+	ADD_TARGET_CFLAGS(${ADM_LIB} -fPIC -DPIC)
+        ADD_TARGET_LDFLAGS(${ADM_LIB} &quot;-rdynamic -export-dynamic -Wl,-Bsymbolic&quot;)
 ENDIF (UNIX)
 
 TARGET_LINK_LIBRARIES(${ADM_LIB} ADM_core ADM_libavutil ADM_libavcodec)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/avformat.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/avformat.h	2008-03-21 06:51:51 UTC (rev 3915)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavformat/avformat.h	2008-03-21 06:51:55 UTC (rev 3916)
@@ -37,7 +37,7 @@
 
 #include &lt;time.h&gt;
 #include &lt;stdio.h&gt;  /* FILE */
-#include &quot;libavcodec/avcodec.h&quot;
+#include &quot;../ADM_lavcodec/avcodec.h&quot;
 
 #include &quot;avio.h&quot;
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavutil/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavutil/CMakeLists.txt	2008-03-21 06:51:51 UTC (rev 3915)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_lavutil/CMakeLists.txt	2008-03-21 06:51:55 UTC (rev 3916)
@@ -27,7 +27,8 @@
 ADD_TARGET_CFLAGS(${ADM_LIB} &quot;-DHAVE_AV_CONFIG_H&quot;)
 
 IF (UNIX)
-	ADD_TARGET_CFLAGS(${ADM_LIB} -fPIC)
+	ADD_TARGET_CFLAGS(${ADM_LIB} -fPIC -DPIC)
+        ADD_TARGET_LDFLAGS(${ADM_LIB} &quot;-rdynamic -export-dynamic -Wl,-Bsymbolic&quot;)
 ENDIF (UNIX)
 
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libpostproc/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libpostproc/CMakeLists.txt	2008-03-21 06:51:51 UTC (rev 3915)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libpostproc/CMakeLists.txt	2008-03-21 06:51:55 UTC (rev 3916)
@@ -10,6 +10,7 @@
 ENDIF(ADM_CPU_X86_64)
 IF (UNIX)
 	ADD_TARGET_CFLAGS(${ADM_LIB} -fPIC -DPIC)
+        ADD_TARGET_LDFLAGS(${ADM_LIB} &quot;-rdynamic -export-dynamic -Wl,-Bsymbolic&quot;)
 ENDIF (UNIX)
 
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/CMakeLists.txt	2008-03-21 06:51:51 UTC (rev 3915)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/CMakeLists.txt	2008-03-21 06:51:55 UTC (rev 3916)
@@ -18,7 +18,8 @@
 
 TARGET_LINK_LIBRARIES(${ADM_LIB} ADM_core ADM_libavutil)
 IF (UNIX)
-	ADD_TARGET_CFLAGS(${ADM_LIB} -fPIC -DPIC)
+	ADD_TARGET_CFLAGS(${ADM_LIB} -fPIC -DPIC )
+        ADD_TARGET_LDFLAGS(${ADM_LIB} &quot;-rdynamic -export-dynamic -Wl,-Bsymbolic&quot;)
 ENDIF (UNIX)
 
-INSTALL(TARGETS ${ADM_LIB} RUNTIME DESTINATION ${BIN_DIR} LIBRARY DESTINATION lib)
\ No newline at end of file
+INSTALL(TARGETS ${ADM_LIB} RUNTIME DESTINATION ${BIN_DIR} LIBRARY DESTINATION lib)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/rgb2rgb.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/rgb2rgb.c	2008-03-21 06:51:51 UTC (rev 3915)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/rgb2rgb.c	2008-03-21 06:51:55 UTC (rev 3916)
@@ -32,7 +32,12 @@
 #include &quot;swscale_internal.h&quot;
 #include &quot;x86_cpu.h&quot;
 #include &quot;bswap.h&quot;
+// MEANX
+#include &quot;wrapper.h&quot;
+#include &quot;ADM_mangle.h&quot;
+// /MEANX
 
+
 #define FAST_BGR2YV12 // use 7 bit coeffs instead of 15bit
 
 void (*rgb24to32)(const uint8_t *src, uint8_t *dst, long src_size);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale.c	2008-03-21 06:51:51 UTC (rev 3915)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale.c	2008-03-21 06:51:55 UTC (rev 3916)
@@ -59,7 +59,9 @@
 #include &lt;math.h&gt;
 #include &lt;stdio.h&gt;
 #include &lt;unistd.h&gt;
+#include &lt;stddef.h&gt; // MEANX
 #include &quot;config.h&quot;
+#include &lt;limits.h&gt; // MEANX
 #include &lt;assert.h&gt;
 #ifdef HAVE_SYS_MMAN_H
 #include &lt;sys/mman.h&gt;
@@ -72,7 +74,12 @@
 #include &quot;x86_cpu.h&quot;
 #include &quot;bswap.h&quot;
 #include &quot;rgb2rgb.h&quot;
-#include &quot;libavcodec/opt.h&quot;
+// MEANX #include &quot;libavcodec/opt.h&quot;
+#include &quot;../ADM_lavcodec/opt.h&quot;
+// MEANX
+#include &quot;wrapper.h&quot;
+#include &quot;ADM_mangle.h&quot;
+// /MEANX
 
 #undef MOVNTQ
 #undef PAVGB
@@ -83,7 +90,11 @@
 //#undef ARCH_X86
 //#define WORDS_BIGENDIAN
 #define DITHER1XBPP
-
+// MEANX
+#ifdef ARCH_X86_64
+#undef RUNTIME_CPUDETECT
+#endif 
+// /MEANX
 #define FAST_BGR2YV12 // use 7 bit coeffs instead of 15bit
 
 #define RET 0xC3 //near return opcode for X86
@@ -242,7 +253,7 @@
     return &quot;swscaler&quot;;
 }
 
-#define OFFSET(x) offsetof(SwsContext, x)
+#define OFFSET(x)  offsetof(SwsContext, x)
 #define DEFAULT 0
 #define VE AV_OPT_FLAG_VIDEO_PARAM | AV_OPT_FLAG_ENCODING_PARAM
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale.h	2008-03-21 06:51:51 UTC (rev 3915)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale.h	2008-03-21 06:51:55 UTC (rev 3916)
@@ -27,7 +27,8 @@
  *     external api for the swscale stuff
  */
 
-#include &quot;libavutil/avutil.h&quot;
+// MEANX #include &quot;libavutil/avutil.h&quot;
+#include &quot;../ADM_lavutil/avutil.h&quot;
 
 #define LIBSWSCALE_VERSION_MAJOR 0
 #define LIBSWSCALE_VERSION_MINOR 5

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale_internal.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale_internal.h	2008-03-21 06:51:51 UTC (rev 3915)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/swscale_internal.h	2008-03-21 06:51:55 UTC (rev 3916)
@@ -27,7 +27,8 @@
 #include &lt;altivec.h&gt;
 #endif
 
-#include &quot;avutil.h&quot;
+// MEANX #include &quot;avutil.h&quot;
+#include &quot;../ADM_lavutil/avutil.h&quot;
 
 #define MAX_FILTER_SIZE 256
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/yuv2rgb.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/yuv2rgb.c	2008-03-21 06:51:51 UTC (rev 3915)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libswscale/yuv2rgb.c	2008-03-21 06:51:55 UTC (rev 3916)
@@ -46,7 +46,12 @@
 #ifdef HAVE_MLIB
 #include &quot;yuv2rgb_mlib.c&quot;
 #endif
+// MEANX
+#include &quot;wrapper.h&quot;
+#include &quot;ADM_mangle.h&quot;
+// /MEANX
 
+
 #define DITHER1XBPP // only for mmx
 
 const uint8_t  __attribute__((aligned(8))) dither_2x2_4[2][8]={

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/config.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/config.h	2008-03-21 06:51:51 UTC (rev 3915)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/config.h	2008-03-21 06:51:55 UTC (rev 3916)
@@ -1,350 +1,385 @@
-#define ENABLE_NELLYMOSER_DECODER 1
-#define ENABLE_ADPCM_IMA_AMV_DECODER 1
-#define ENABLE_CINEPAK_DECODER 1
-#define ENABLE_DNXHD_DECODER 1
-#define ENABLE_FOURXM_DECODER 1
-#define ENABLE_FRAPS_DECODER 1
-#define ENABLE_H263_DECODER 1
-#define ENABLE_H264_DECODER 1
-#define ENABLE_INDEO2_DECODER 1
-#define ENABLE_INDEO3_DECODER 1
-#define ENABLE_INTERPLAY_VIDEO_DECODER 1
-#define ENABLE_MPEGVIDEO_DECODER 1
-#define ENABLE_MSVIDEO1_DECODER 1
-#define ENABLE_VC1_DECODER 1
-#define ENABLE_VCR1_DECODER 1
-#define ENABLE_VP5_DECODER 1
-#define ENABLE_VP6_DECODER 1
-#define ENABLE_VP6F_DECODER 1
-#define ENABLE_WMV3_DECODER 1
-#define ENABLE_WMV1_DECODER 1
-#define ENABLE_WMV2_DECODER 1
-#define ENABLE_VP3_DECODER 1
-#define ENABLE_MPEG4_DECODER 1
-#define ENABLE_MSMPEG4V1_DECODER 1
-#define ENABLE_MSMPEG4V2_DECODER 1
-#define ENABLE_MSMPEG4V3_DECODER 1
-#define ENABLE_MJPEGB_DECODER 1
-#define ENABLE_MJPEG_DECODER 1
-#define ENABLE_WMAV2_DECODER 1
-#define ENABLE_DVVIDEO_DECODER 1
-#define ENABLE_HUFFYUV_DECODER 1
-#define ENABLE_FFVHUFF_DECODER 1
-#define ENABLE_SVQ3_DECODER 1
-#define ENABLE_TSCC_DECODER 1
-#define ENABLE_QDM2_DECODER 1
-#define ENABLE_FFV1_DECODER 1
-#define ENABLE_MPEG1VIDEO_DECODER 1
-#define ENABLE_MPEG2VIDEO_DECODER 1
-#define ENABLE_RV10_DECODER 1
-#define ENABLE_RV20_DECODER 1
-#define ENABLE_DVBSUB_DECODER 1
-#define ENABLE_FLV_DECODER 1
-#define ENABLE_SNOW_DECODER 1
-#define ENABLE_AMV_DECODER 1
-#define ENABLE_AASC_DECODER 0
-#define ENABLE_AVS_DECODER 0
-#define ENABLE_BETHSOFTVID_DECODER 0
-#define ENABLE_C93_DECODER 0
-#define ENABLE_CAVS_DECODER 0
-#define ENABLE_CLJR_DECODER 0
-#define ENABLE_CSCD_DECODER 0
-#define ENABLE_CYUV_DECODER 0
-#define ENABLE_DSICINVIDEO_DECODER 0
-#define ENABLE_DXA_DECODER 0
-#define ENABLE_EIGHTBPS_DECODER 0
-#define ENABLE_FLIC_DECODER 0
-#define ENABLE_IDCIN_DECODER 0
-#define ENABLE_KMVC_DECODER 0
-#define ENABLE_LOCO_DECODER 0
-#define ENABLE_MDEC_DECODER 0
-#define ENABLE_MMVIDEO_DECODER 0
-#define ENABLE_MPEG_XVMC_DECODER 0
-#define ENABLE_MSRLE_DECODER 0
-#define ENABLE_MSZH_DECODER 0
-#define ENABLE_NUV_DECODER 0
-#define ENABLE_PTX_DECODER 0
-#define ENABLE_QDRAW_DECODER 0
-#define ENABLE_QPEG_DECODER 0
-#define ENABLE_RPZA_DECODER 0
-#define ENABLE_SMACKER_DECODER 0
-#define ENABLE_SMC_DECODER 0
-#define ENABLE_SP5X_DECODER 0
-#define ENABLE_THEORA_DECODER 0
-#define ENABLE_THP_DECODER 0
-#define ENABLE_TIERTEXSEQVIDEO_DECODER 0
-#define ENABLE_TRUEMOTION1_DECODER 0
-#define ENABLE_TRUEMOTION2_DECODER 0
-#define ENABLE_TXD_DECODER 0
-#define ENABLE_ULTI_DECODER 0
-#define ENABLE_VMDVIDEO_DECODER 0
-#define ENABLE_VMNC_DECODER 0
-#define ENABLE_VQA_DECODER 0
-#define ENABLE_WNV1_DECODER 0
-#define ENABLE_XAN_WC3_DECODER 0
-#define ENABLE_XL_DECODER 0
-#define ENABLE_MPEG4AAC_DECODER 0
-#define ENABLE_ALAC_DECODER 0
-#define ENABLE_ATRAC3_DECODER 0
-#define ENABLE_COOK_DECODER 0
-#define ENABLE_DCA_DECODER 0
-#define ENABLE_DSICINAUDIO_DECODER 0
-#define ENABLE_IMC_DECODER 0
-#define ENABLE_LIBA52_DECODER 0
-#define ENABLE_LIBFAAD_DECODER 0
-#define ENABLE_MACE3_DECODER 0
-#define ENABLE_MACE6_DECODER 0
-#define ENABLE_MP3_DECODER 0
-#define ENABLE_MP3ADU_DECODER 0
-#define ENABLE_MP3ON4_DECODER 0
-#define ENABLE_MPC7_DECODER 0
-#define ENABLE_RA_144_DECODER 0
-#define ENABLE_RA_288_DECODER 0
-#define ENABLE_SHORTEN_DECODER 0
-#define ENABLE_SMACKAUD_DECODER 0
-#define ENABLE_TRUESPEECH_DECODER 0
-#define ENABLE_TTA_DECODER 0
-#define ENABLE_VMDAUDIO_DECODER 0
-#define ENABLE_WAVPACK_DECODER 0
-#define ENABLE_WS_SND1_DECODER 0
-#define ENABLE_INTERPLAY_DPCM_DECODER 0
-#define ENABLE_SOL_DPCM_DECODER 0
-#define ENABLE_XAN_DPCM_DECODER 0
-#define ENABLE_ADPCM_THP_DECODER 0
-#define ENABLE_ASV1_DECODER 0
-#define ENABLE_ASV2_DECODER 0
-#define ENABLE_BMP_DECODER 0
-#define ENABLE_FLASHSV_DECODER 0
-#define ENABLE_GIF_DECODER 0
-#define ENABLE_H261_DECODER 0
-#define ENABLE_H263I_DECODER 0
-#define ENABLE_JPEGLS_DECODER 0
-#define ENABLE_PNG_DECODER 0
-#define ENABLE_QTRLE_DECODER 0
-#define ENABLE_RAWVIDEO_DECODER 0
-#define ENABLE_ROQ_DECODER 0
-#define ENABLE_SGI_DECODER 0
-#define ENABLE_SVQ1_DECODER 0
-#define ENABLE_TARGA_DECODER 0
-#define ENABLE_TIFF_DECODER 0
-#define ENABLE_ZLIB_DECODER 0
-#define ENABLE_ZMBV_DECODER 0
-#define ENABLE_FLAC_DECODER 0
-#define ENABLE_LIBAMR_NB_DECODER 0
-#define ENABLE_LIBAMR_WB_DECODER 0
-#define ENABLE_LIBGSM_DECODER 0
-#define ENABLE_LIBGSM_MS_DECODER 0
-#define ENABLE_MP2_DECODER 0
-#define ENABLE_SONIC_DECODER 0
-#define ENABLE_VORBIS_DECODER 0
-#define ENABLE_WMAV1_DECODER 0
-#define ENABLE_PCM_ALAW_DECODER 0
-#define ENABLE_PCM_MULAW_DECODER 0
-#define ENABLE_PCM_S8_DECODER 0
-#define ENABLE_PCM_S16BE_DECODER 0
-#define ENABLE_PCM_S16LE_DECODER 0
-#define ENABLE_PCM_S24BE_DECODER 0
-#define ENABLE_PCM_S24DAUD_DECODER 0
-#define ENABLE_PCM_S24LE_DECODER 0
-#define ENABLE_PCM_S32BE_DECODER 0
-#define ENABLE_PCM_S32LE_DECODER 0
-#define ENABLE_PCM_U8_DECODER 0
-#define ENABLE_PCM_U16BE_DECODER 0
-#define ENABLE_PCM_U16LE_DECODER 0
-#define ENABLE_PCM_U24BE_DECODER 0
-#define ENABLE_PCM_U24LE_DECODER 0
-#define ENABLE_PCM_U32BE_DECODER 0
-#define ENABLE_PCM_U32LE_DECODER 0
-#define ENABLE_ROQ_DPCM_DECODER 0
-#define ENABLE_ADPCM_4XM_DECODER 0
-#define ENABLE_ADPCM_ADX_DECODER 0
-#define ENABLE_ADPCM_CT_DECODER 0
-#define ENABLE_ADPCM_EA_DECODER 0
-#define ENABLE_ADPCM_G726_DECODER 0
-#define ENABLE_ADPCM_IMA_DK3_DECODER 0
-#define ENABLE_ADPCM_IMA_DK4_DECODER 0
-#define ENABLE_ADPCM_IMA_QT_DECODER 0
-#define ENABLE_ADPCM_IMA_SMJPEG_DECODER 0
-#define ENABLE_ADPCM_IMA_WAV_DECODER 0
-#define ENABLE_ADPCM_IMA_WS_DECODER 0
-#define ENABLE_ADPCM_MS_DECODER 0
-#define ENABLE_ADPCM_SBPRO_2_DECODER 0
-#define ENABLE_ADPCM_SBPRO_3_DECODER 0
-#define ENABLE_ADPCM_SBPRO_4_DECODER 0
-#define ENABLE_ADPCM_SWF_DECODER 0
-#define ENABLE_ADPCM_XA_DECODER 0
-#define ENABLE_ADPCM_YAMAHA_DECODER 0
-#define ENABLE_DVDSUB_DECODER 0
-#define ENABLE_LIBVORBIS_DECODER 0
-#define ENABLE_H263_PARSER 1
-#define ENABLE_H264_PARSER 1
-#define ENABLE_MPEG4VIDEO_PARSER 1
-#define ENABLE_AAC_PARSER 0
-#define ENABLE_AC3_PARSER 0
-#define ENABLE_CAVSVIDEO_PARSER 0
-#define ENABLE_DCA_PARSER 0
-#define ENABLE_DVBSUB_PARSER 0
-#define ENABLE_DVDSUB_PARSER 0
-#define ENABLE_H261_PARSER 0
-#define ENABLE_MJPEG_PARSER 0
-#define ENABLE_MPEGAUDIO_PARSER 0
-#define ENABLE_MPEGVIDEO_PARSER 0
-#define ENABLE_PNM_PARSER 0
-#define ENABLE_VC1_PARSER 0
-#define ENABLE_MJPEG_ENCODER 1
-#define ENABLE_MSMPEG4V3_ENCODER 1
-#define ENABLE_H263P_ENCODER 1
-#define ENABLE_AC3_ENCODER 1
-#define ENABLE_FFV1_ENCODER 1
-#define ENABLE_FLV1_ENCODER 1
-#define ENABLE_FFVHUFF_ENCODER 1
-#define ENABLE_H263_ENCODER 1
-#define ENABLE_MPEG1VIDEO_ENCODER 1
-#define ENABLE_MPEG2VIDEO_ENCODER 1
-#define ENABLE_MPEG4_ENCODER 1
-#define ENABLE_FLV_ENCODER 1
-#define ENABLE_MP2_ENCODER 1
-#define ENABLE_DVVIDEO_ENCODER 1
-#define ENABLE_HUFFYUV_ENCODER 1
-#define ENABLE_DVBSUB_ENCODER 1
-#define ENABLE_SNOW_ENCODER 1
-#define ENABLE_ADPCM_IMA_AMV_ENCODER 0
-#define ENABLE_LIBX264_ENCODER 0
-#define ENABLE_LIBXVID_ENCODER 0
-#define ENABLE_LJPEG_ENCODER 0
-#define ENABLE_PAM_ENCODER 0
-#define ENABLE_PBM_ENCODER 0
-#define ENABLE_PGM_ENCODER 0
-#define ENABLE_PGMYUV_ENCODER 0
-#define ENABLE_PPM_ENCODER 0
-#define ENABLE_LIBFAAC_ENCODER 0
-#define ENABLE_LIBMP3LAME_ENCODER 0
-#define ENABLE_LIBTHEORA_ENCODER 0
-#define ENABLE_SONIC_LS_ENCODER 0
-#define ENABLE_ASV1_ENCODER 0
-#define ENABLE_ASV2_ENCODER 0
-#define ENABLE_BMP_ENCODER 0
-#define ENABLE_FLASHSV_ENCODER 0
-#define ENABLE_GIF_ENCODER 0
-#define ENABLE_H261_ENCODER 0
-#define ENABLE_JPEGLS_ENCODER 0
-#define ENABLE_MSMPEG4V1_ENCODER 0
-#define ENABLE_MSMPEG4V2_ENCODER 0
-#define ENABLE_PNG_ENCODER 0
-#define ENABLE_QTRLE_ENCODER 0
-#define ENABLE_RAWVIDEO_ENCODER 0
-#define ENABLE_ROQ_ENCODER 0
-#define ENABLE_RV10_ENCODER 0
-#define ENABLE_RV20_ENCODER 0
-#define ENABLE_SGI_ENCODER 0
-#define ENABLE_SVQ1_ENCODER 0
-#define ENABLE_TARGA_ENCODER 0
-#define ENABLE_TIFF_ENCODER 0
-#define ENABLE_WMV1_ENCODER 0
-#define ENABLE_WMV2_ENCODER 0
-#define ENABLE_ZLIB_ENCODER 0
-#define ENABLE_ZMBV_ENCODER 0
-#define ENABLE_FLAC_ENCODER 0
-#define ENABLE_LIBAMR_NB_ENCODER 0
-#define ENABLE_LIBAMR_WB_ENCODER 0
-#define ENABLE_LIBGSM_ENCODER 0
-#define ENABLE_LIBGSM_MS_ENCODER 0
-#define ENABLE_SONIC_ENCODER 0
-#define ENABLE_VORBIS_ENCODER 0
-#define ENABLE_WMAV1_ENCODER 0
-#define ENABLE_WMAV2_ENCODER 0
-#define ENABLE_PCM_ALAW_ENCODER 0
-#define ENABLE_PCM_MULAW_ENCODER 0
-#define ENABLE_PCM_S8_ENCODER 0
-#define ENABLE_PCM_S16BE_ENCODER 0
-#define ENABLE_PCM_S16LE_ENCODER 0
-#define ENABLE_PCM_S24BE_ENCODER 0
-#define ENABLE_PCM_S24DAUD_ENCODER 0
-#define ENABLE_PCM_S24LE_ENCODER 0
-#define ENABLE_PCM_S32BE_ENCODER 0
-#define ENABLE_PCM_S32LE_ENCODER 0
-#define ENABLE_PCM_U8_ENCODER 0
-#define ENABLE_PCM_U16BE_ENCODER 0
-#define ENABLE_PCM_U16LE_ENCODER 0
-#define ENABLE_PCM_U24BE_ENCODER 0
-#define ENABLE_PCM_U24LE_ENCODER 0
-#define ENABLE_PCM_U32BE_ENCODER 0
-#define ENABLE_PCM_U32LE_ENCODER 0
-#define ENABLE_ROQ_DPCM_ENCODER 0
-#define ENABLE_ADPCM_4XM_ENCODER 0
-#define ENABLE_ADPCM_ADX_ENCODER 0
-#define ENABLE_ADPCM_CT_ENCODER 0
-#define ENABLE_ADPCM_EA_ENCODER 0
-#define ENABLE_ADPCM_G726_ENCODER 0
-#define ENABLE_ADPCM_IMA_DK3_ENCODER 0
-#define ENABLE_ADPCM_IMA_DK4_ENCODER 0
-#define ENABLE_ADPCM_IMA_QT_ENCODER 0
-#define ENABLE_ADPCM_IMA_SMJPEG_ENCODER 0
-#define ENABLE_ADPCM_IMA_WAV_ENCODER 0
-#define ENABLE_ADPCM_IMA_WS_ENCODER 0
-#define ENABLE_ADPCM_MS_ENCODER 0
-#define ENABLE_ADPCM_SBPRO_2_ENCODER 0
-#define ENABLE_ADPCM_SBPRO_3_ENCODER 0
-#define ENABLE_ADPCM_SBPRO_4_ENCODER 0
-#define ENABLE_ADPCM_SWF_ENCODER 0
-#define ENABLE_ADPCM_XA_ENCODER 0
-#define ENABLE_ADPCM_YAMAHA_ENCODER 0
-#define ENABLE_DVDSUB_ENCODER 0
-#define ENABLE_LIBVORBIS_ENCODER 0
-#define ENABLE_MP3_HEADER_COMPRESS_BSF 0
-#define ENABLE_IMX_DUMP_HEADER_BSF 0
-#define ENABLE_DUMP_EXTRADATA_BSF 0
-#define ENABLE_REMOVE_EXTRADATA_BSF 0
-#define ENABLE_NOISE_BSF 0
-#define ENABLE_MP3_HEADER_DECOMPRESS_BSF 0
-#define ENABLE_MJPEGA_DUMP_HEADER_BSF 0
-#define ENABLE_IMX_DUMP_HEADER_BSF 0
-#define CONFIG_MUXERS 1
-#define CONFIG_MOV_MUXER 1
-#define CONFIG_MP4_MUXER 1
-#define CONFIG_PSP_MUXER 1
-#define CONFIG_TG2_MUXER 1
-#define CONFIG_TGP_MUXER 1
-#define CONFIG_ENCODERS 1
-#define CONFIG_DVVIDEO_ENCODER 1
-#define CONFIG_SNOW_ENCODER 1
-#define CONFIG_DECODERS 1
-#define CONFIG_DVVIDEO_DECODER 1
-#define CONFIG_H263_DECODER 1
-#define CONFIG_MPEG4_DECODER 1
-#define CONFIG_SNOW_DECODER 1
-#define CONFIG_VC1_DECODER 1
-#define CONFIG_WMV2_DECODER 1
-#define CONFIG_WMV3_DECODER 1
-#define CONFIG_MPEGAUDIO_HP 1
-#define CONFIG_ZLIB 1
-#define ENABLE_ARMV4L 0
-#define ENABLE_MLIB 0
-#define ENABLE_SPARC 0
-#define ENABLE_ALPHA 0
-#define ENABLE_MMI 0
-#define ENABLE_SH4 0
-#define ENABLE_BFIN 0
-#define ENABLE_SMALL 0
-#ifdef ARCH_POWERPC
-#define ENABLE_POWERPC 1
-#else
-#define ENABLE_POWERPC 0
-#endif
-#ifdef ARCH_X86
-#define ENABLE_MMX 1
-#define HAVE_MMX 1
-#define HAVE_FAST_UNALIGNED 1
-#else
-#define ENABLE_MMX 0
-#endif
-#ifdef ARCH_X86_64
-#define HAVE_FAST_64BIT 1
-#endif
-#ifdef __APPLE__
-#define CONFIG_DARWIN 1
-#endif
-#define ENABLE_THREADS 1
-#define HAVE_LRINTF 1
-#define HAVE_THREADS 1
-#define RUNTIME_CPUDETECT 1
+#define ENABLE_NELLYMOSER_DECODER 1
+#define ENABLE_ADPCM_IMA_AMV_DECODER 1
+#define ENABLE_CINEPAK_DECODER 1
+#define ENABLE_DNXHD_DECODER 1
+#define ENABLE_FOURXM_DECODER 1
+#define ENABLE_FRAPS_DECODER 1
+#define ENABLE_H263_DECODER 1
+#define ENABLE_H264_DECODER 1
+#define ENABLE_INDEO2_DECODER 1
+#define ENABLE_INDEO3_DECODER 1
+#define ENABLE_INTERPLAY_VIDEO_DECODER 1
+#define ENABLE_MPEGVIDEO_DECODER 1
+#define ENABLE_MSVIDEO1_DECODER 1
+#define ENABLE_VC1_DECODER 1
+#define ENABLE_VCR1_DECODER 1
+#define ENABLE_VP5_DECODER 1
+#define ENABLE_VP6_DECODER 1
+#define ENABLE_VP6A_DECODER 1
+#define ENABLE_VP6F_DECODER 1
+#define ENABLE_WMV3_DECODER 1
+#define ENABLE_WMV1_DECODER 1
+#define ENABLE_WMV2_DECODER 1
+#define ENABLE_VP3_DECODER 1
+#define ENABLE_MPEG4_DECODER 1
+#define ENABLE_MSMPEG4V1_DECODER 1
+#define ENABLE_MSMPEG4V2_DECODER 1
+#define ENABLE_MSMPEG4V3_DECODER 1
+#define ENABLE_MJPEGB_DECODER 1
+#define ENABLE_MJPEG_DECODER 1
+#define ENABLE_WMAV2_DECODER 1
+#define ENABLE_DVVIDEO_DECODER 1
+#define ENABLE_HUFFYUV_DECODER 1
+#define ENABLE_FFVHUFF_DECODER 1
+#define ENABLE_SVQ3_DECODER 1
+#define ENABLE_TSCC_DECODER 1
+#define ENABLE_QDM2_DECODER 1
+#define ENABLE_FFV1_DECODER 1
+#define ENABLE_MPEG1VIDEO_DECODER 1
+#define ENABLE_MPEG2VIDEO_DECODER 1
+#define ENABLE_RV10_DECODER 1
+#define ENABLE_RV20_DECODER 1
+#define ENABLE_DVBSUB_DECODER 1
+#define ENABLE_FLV_DECODER 1
+#define ENABLE_SNOW_DECODER 1
+#define ENABLE_AMV_DECODER 1
+#define ENABLE_PCX_DECODER 0
+#define ENABLE_SUNRAST_DECODER 0
+#define ENABLE_VB_DECODER 0
+#define ENABLE_XSUB_DECODER 0
+#define ENABLE_AC3_DECODER 0
+#define ENABLE_APE_DECODER 0
+#define ENABLE_MPC8_DECODER 0
+#define ENABLE_PCM_S16LE_PLANAR_DECODER 0
+#define ENABLE_PCM_ZORK_DECODER 0
+#define ENABLE_ADPCM_EA_R1_DECODER 0
+#define ENABLE_ADPCM_EA_R2_DECODER 0
+#define ENABLE_ADPCM_EA_R3_DECODER 0
+#define ENABLE_ADPCM_EA_XAS_DECODER 0
+#define ENABLE_ADPCM_IMA_EA_EACS_DECODER 0
+#define ENABLE_ADPCM_IMA_EA_SEAD_DECODER 0
+#define ENABLE_AASC_DECODER 0
+#define ENABLE_AVS_DECODER 0
+#define ENABLE_BETHSOFTVID_DECODER 0
+#define ENABLE_C93_DECODER 0
+#define ENABLE_CAVS_DECODER 0
+#define ENABLE_CLJR_DECODER 0
+#define ENABLE_CSCD_DECODER 0
+#define ENABLE_CYUV_DECODER 0
+#define ENABLE_DSICINVIDEO_DECODER 0
+#define ENABLE_DXA_DECODER 0
+#define ENABLE_EIGHTBPS_DECODER 0
+#define ENABLE_FLIC_DECODER 0
+#define ENABLE_IDCIN_DECODER 0
+#define ENABLE_KMVC_DECODER 0
+#define ENABLE_LOCO_DECODER 0
+#define ENABLE_MDEC_DECODER 0
+#define ENABLE_MMVIDEO_DECODER 0
+#define ENABLE_MPEG_XVMC_DECODER 0
+#define ENABLE_MSRLE_DECODER 0
+#define ENABLE_MSZH_DECODER 0
+#define ENABLE_NUV_DECODER 0
+#define ENABLE_PTX_DECODER 0
+#define ENABLE_QDRAW_DECODER 0
+#define ENABLE_QPEG_DECODER 0
+#define ENABLE_RPZA_DECODER 0
+#define ENABLE_SMACKER_DECODER 0
+#define ENABLE_SMC_DECODER 0
+#define ENABLE_SP5X_DECODER 0
+#define ENABLE_THEORA_DECODER 0
+#define ENABLE_THP_DECODER 0
+#define ENABLE_TIERTEXSEQVIDEO_DECODER 0
+#define ENABLE_TRUEMOTION1_DECODER 0
+#define ENABLE_TRUEMOTION2_DECODER 0
+#define ENABLE_TXD_DECODER 0
+#define ENABLE_ULTI_DECODER 0
+#define ENABLE_VMDVIDEO_DECODER 0
+#define ENABLE_VMNC_DECODER 0
+#define ENABLE_VQA_DECODER 0
+#define ENABLE_WNV1_DECODER 0
+#define ENABLE_XAN_WC3_DECODER 0
+#define ENABLE_XL_DECODER 0
+#define ENABLE_MPEG4AAC_DECODER 0
+#define ENABLE_ALAC_DECODER 0
+#define ENABLE_ATRAC3_DECODER 0
+#define ENABLE_COOK_DECODER 0
+#define ENABLE_DCA_DECODER 0
+#define ENABLE_DSICINAUDIO_DECODER 0
+#define ENABLE_IMC_DECODER 0
+#define ENABLE_LIBA52_DECODER 0
+#define ENABLE_LIBFAAD_DECODER 0
+#define ENABLE_MACE3_DECODER 0
+#define ENABLE_MACE6_DECODER 0
+#define ENABLE_MP3_DECODER 0
+#define ENABLE_MP3ADU_DECODER 0
+#define ENABLE_MP3ON4_DECODER 0
+#define ENABLE_MPC7_DECODER 0
+#define ENABLE_RA_144_DECODER 0
+#define ENABLE_RA_288_DECODER 0
+#define ENABLE_SHORTEN_DECODER 0
+#define ENABLE_SMACKAUD_DECODER 0
+#define ENABLE_TRUESPEECH_DECODER 0
+#define ENABLE_TTA_DECODER 0
+#define ENABLE_VMDAUDIO_DECODER 0
+#define ENABLE_WAVPACK_DECODER 0
+#define ENABLE_WS_SND1_DECODER 0
+#define ENABLE_INTERPLAY_DPCM_DECODER 0
+#define ENABLE_SOL_DPCM_DECODER 0
+#define ENABLE_XAN_DPCM_DECODER 0
+#define ENABLE_ADPCM_THP_DECODER 0
+#define ENABLE_ASV1_DECODER 0
+#define ENABLE_ASV2_DECODER 0
+#define ENABLE_BMP_DECODER 0
+#define ENABLE_FLASHSV_DECODER 0
+#define ENABLE_GIF_DECODER 0
+#define ENABLE_H261_DECODER 0
+#define ENABLE_H263I_DECODER 0
+#define ENABLE_JPEGLS_DECODER 0
+#define ENABLE_PNG_DECODER 0
+#define ENABLE_QTRLE_DECODER 0
+#define ENABLE_RAWVIDEO_DECODER 0
+#define ENABLE_ROQ_DECODER 0
+#define ENABLE_SGI_DECODER 0
+#define ENABLE_SVQ1_DECODER 0
+#define ENABLE_TARGA_DECODER 0
+#define ENABLE_TIFF_DECODER 0
+#define ENABLE_ZLIB_DECODER 0
+#define ENABLE_ZMBV_DECODER 0
+#define ENABLE_FLAC_DECODER 0
+#define ENABLE_LIBAMR_NB_DECODER 0
+#define ENABLE_LIBAMR_WB_DECODER 0
+#define ENABLE_LIBGSM_DECODER 0
+#define ENABLE_LIBGSM_MS_DECODER 0
+#define ENABLE_MP2_DECODER 0
+#define ENABLE_SONIC_DECODER 0
+#define ENABLE_VORBIS_DECODER 0
+#define ENABLE_WMAV1_DECODER 0
+#define ENABLE_PCM_ALAW_DECODER 0
+#define ENABLE_PCM_MULAW_DECODER 0
+#define ENABLE_PCM_S8_DECODER 0
+#define ENABLE_PCM_S16BE_DECODER 0
+#define ENABLE_PCM_S16LE_DECODER 0
+#define ENABLE_PCM_S24BE_DECODER 0
+#define ENABLE_PCM_S24DAUD_DECODER 0
+#define ENABLE_PCM_S24LE_DECODER 0
+#define ENABLE_PCM_S32BE_DECODER 0
+#define ENABLE_PCM_S32LE_DECODER 0
+#define ENABLE_PCM_U8_DECODER 0
+#define ENABLE_PCM_U16BE_DECODER 0
+#define ENABLE_PCM_U16LE_DECODER 0
+#define ENABLE_PCM_U24BE_DECODER 0
+#define ENABLE_PCM_U24LE_DECODER 0
+#define ENABLE_PCM_U32BE_DECODER 0
+#define ENABLE_PCM_U32LE_DECODER 0
+#define ENABLE_ROQ_DPCM_DECODER 0
+#define ENABLE_ADPCM_4XM_DECODER 0
+#define ENABLE_ADPCM_ADX_DECODER 0
+#define ENABLE_ADPCM_CT_DECODER 0
+#define ENABLE_ADPCM_EA_DECODER 0
+#define ENABLE_ADPCM_G726_DECODER 0
+#define ENABLE_ADPCM_IMA_DK3_DECODER 0
+#define ENABLE_ADPCM_IMA_DK4_DECODER 0
+#define ENABLE_ADPCM_IMA_QT_DECODER 0
+#define ENABLE_ADPCM_IMA_SMJPEG_DECODER 0
+#define ENABLE_ADPCM_IMA_WAV_DECODER 0
+#define ENABLE_ADPCM_IMA_WS_DECODER 0
+#define ENABLE_ADPCM_MS_DECODER 0
+#define ENABLE_ADPCM_SBPRO_2_DECODER 0
+#define ENABLE_ADPCM_SBPRO_3_DECODER 0
+#define ENABLE_ADPCM_SBPRO_4_DECODER 0
+#define ENABLE_ADPCM_SWF_DECODER 0
+#define ENABLE_ADPCM_XA_DECODER 0
+#define ENABLE_ADPCM_YAMAHA_DECODER 0
+#define ENABLE_DVDSUB_DECODER 0
+#define ENABLE_LIBVORBIS_DECODER 0
+#define ENABLE_H263_PARSER 1
+#define ENABLE_H264_PARSER 1
+#define ENABLE_MPEG4VIDEO_PARSER 1
+#define ENABLE_AAC_PARSER 0
+#define ENABLE_AC3_PARSER 0
+#define ENABLE_CAVSVIDEO_PARSER 0
+#define ENABLE_DCA_PARSER 0
+#define ENABLE_DVBSUB_PARSER 0
+#define ENABLE_DVDSUB_PARSER 0
+#define ENABLE_H261_PARSER 0
+#define ENABLE_MJPEG_PARSER 0
+#define ENABLE_MPEGAUDIO_PARSER 0
+#define ENABLE_MPEGVIDEO_PARSER 0
+#define ENABLE_PNM_PARSER 0
+#define ENABLE_VC1_PARSER 0
+#define ENABLE_MJPEG_ENCODER 1
+#define ENABLE_MSMPEG4V3_ENCODER 1
+#define ENABLE_H263P_ENCODER 1
+#define ENABLE_AC3_ENCODER 1
+#define ENABLE_FFV1_ENCODER 1
+#define ENABLE_FLV1_ENCODER 1
+#define ENABLE_FFVHUFF_ENCODER 1
+#define ENABLE_H263_ENCODER 1
+#define ENABLE_MPEG1VIDEO_ENCODER 1
+#define ENABLE_MPEG2VIDEO_ENCODER 1
+#define ENABLE_MPEG4_ENCODER 1
+#define ENABLE_FLV_ENCODER 1
+#define ENABLE_MP2_ENCODER 1
+#define ENABLE_DVVIDEO_ENCODER 1
+#define ENABLE_HUFFYUV_ENCODER 1
+#define ENABLE_DVBSUB_ENCODER 1
+#define ENABLE_SNOW_ENCODER 1
+#define ENABLE_DNXHD_ENCODER 0
+#define ENABLE_PCM_ZORK_ENCODER 0
+#define ENABLE_ADPCM_IMA_AMV_ENCODER 0
+#define ENABLE_LIBX264_ENCODER 0
+#define ENABLE_LIBXVID_ENCODER 0
+#define ENABLE_LJPEG_ENCODER 0
+#define ENABLE_PAM_ENCODER 0
+#define ENABLE_PBM_ENCODER 0
+#define ENABLE_PGM_ENCODER 0
+#define ENABLE_PGMYUV_ENCODER 0
+#define ENABLE_PPM_ENCODER 0
+#define ENABLE_LIBFAAC_ENCODER 0
+#define ENABLE_LIBMP3LAME_ENCODER 0
+#define ENABLE_LIBTHEORA_ENCODER 0
+#define ENABLE_SONIC_LS_ENCODER 0
+#define ENABLE_ASV1_ENCODER 0
+#define ENABLE_ASV2_ENCODER 0
+#define ENABLE_BMP_ENCODER 0
+#define ENABLE_FLASHSV_ENCODER 0
+#define ENABLE_GIF_ENCODER 0
+#define ENABLE_H261_ENCODER 0
+#define ENABLE_JPEGLS_ENCODER 0
+#define ENABLE_MSMPEG4V1_ENCODER 0
+#define ENABLE_MSMPEG4V2_ENCODER 0
+#define ENABLE_PNG_ENCODER 0
+#define ENABLE_QTRLE_ENCODER 0
+#define ENABLE_RAWVIDEO_ENCODER 0
+#define ENABLE_ROQ_ENCODER 0
+#define ENABLE_RV10_ENCODER 0
+#define ENABLE_RV20_ENCODER 0
+#define ENABLE_SGI_ENCODER 0
+#define ENABLE_SVQ1_ENCODER 0
+#define ENABLE_TARGA_ENCODER 0
+#define ENABLE_TIFF_ENCODER 0
+#define ENABLE_WMV1_ENCODER 0
+#define ENABLE_WMV2_ENCODER 0
+#define ENABLE_ZLIB_ENCODER 0
+#define ENABLE_ZMBV_ENCODER 0
+#define ENABLE_FLAC_ENCODER 0
+#define ENABLE_LIBAMR_NB_ENCODER 0
+#define ENABLE_LIBAMR_WB_ENCODER 0
+#define ENABLE_LIBGSM_ENCODER 0
+#define ENABLE_LIBGSM_MS_ENCODER 0
+#define ENABLE_SONIC_ENCODER 0
+#define ENABLE_VORBIS_ENCODER 0
+#define ENABLE_WMAV1_ENCODER 0
+#define ENABLE_WMAV2_ENCODER 0
+#define ENABLE_PCM_ALAW_ENCODER 0
+#define ENABLE_PCM_MULAW_ENCODER 0
+#define ENABLE_PCM_S8_ENCODER 0
+#define ENABLE_PCM_S16BE_ENCODER 0
+#define ENABLE_PCM_S16LE_ENCODER 0
+#define ENABLE_PCM_S24BE_ENCODER 0
+#define ENABLE_PCM_S24DAUD_ENCODER 0
+#define ENABLE_PCM_S24LE_ENCODER 0
+#define ENABLE_PCM_S32BE_ENCODER 0
+#define ENABLE_PCM_S32LE_ENCODER 0
+#define ENABLE_PCM_U8_ENCODER 0
+#define ENABLE_PCM_U16BE_ENCODER 0
+#define ENABLE_PCM_U16LE_ENCODER 0
+#define ENABLE_PCM_U24BE_ENCODER 0
+#define ENABLE_PCM_U24LE_ENCODER 0
+#define ENABLE_PCM_U32BE_ENCODER 0
+#define ENABLE_PCM_U32LE_ENCODER 0
+#define ENABLE_ROQ_DPCM_ENCODER 0
+#define ENABLE_ADPCM_4XM_ENCODER 0
+#define ENABLE_ADPCM_ADX_ENCODER 0
+#define ENABLE_ADPCM_CT_ENCODER 0
+#define ENABLE_ADPCM_EA_ENCODER 0
+#define ENABLE_ADPCM_G726_ENCODER 0
+#define ENABLE_ADPCM_IMA_DK3_ENCODER 0
+#define ENABLE_ADPCM_IMA_DK4_ENCODER 0
+#define ENABLE_ADPCM_IMA_QT_ENCODER 0
+#define ENABLE_ADPCM_IMA_SMJPEG_ENCODER 0
+#define ENABLE_ADPCM_IMA_WAV_ENCODER 0
+#define ENABLE_ADPCM_IMA_WS_ENCODER 0
+#define ENABLE_ADPCM_MS_ENCODER 0
+#define ENABLE_ADPCM_SBPRO_2_ENCODER 0
+#define ENABLE_ADPCM_SBPRO_3_ENCODER 0
+#define ENABLE_ADPCM_SBPRO_4_ENCODER 0
+#define ENABLE_ADPCM_SWF_ENCODER 0
+#define ENABLE_ADPCM_XA_ENCODER 0
+#define ENABLE_ADPCM_YAMAHA_ENCODER 0
+#define ENABLE_DVDSUB_ENCODER 0
+#define ENABLE_LIBVORBIS_ENCODER 0
+#define ENABLE_MP3_HEADER_COMPRESS_BSF 0
+#define ENABLE_IMX_DUMP_HEADER_BSF 0
+#define ENABLE_DUMP_EXTRADATA_BSF 0
+#define ENABLE_REMOVE_EXTRADATA_BSF 0
+#define ENABLE_NOISE_BSF 0
+#define ENABLE_MP3_HEADER_DECOMPRESS_BSF 0
+#define ENABLE_MJPEGA_DUMP_HEADER_BSF 0
+#define ENABLE_H264_MP4TOANNEXB_BSF 0
+#define ENABLE_MOV2TEXTSUB_BSF 0
+#define ENABLE_TEXT2MOVSUB_BSF 0
+#define CONFIG_MUXERS 1
+#define CONFIG_MOV_MUXER 1
+#define CONFIG_MP4_MUXER 1
+#define CONFIG_PSP_MUXER 1
+#define CONFIG_TG2_MUXER 1
+#define CONFIG_TGP_MUXER 1
+#define CONFIG_ENCODERS 1
+#define CONFIG_DVVIDEO_ENCODER 1
+#define CONFIG_SNOW_ENCODER 1
+#define CONFIG_DECODERS 1
+#define CONFIG_DVVIDEO_DECODER 1
+#define CONFIG_H263_DECODER 1
+#define CONFIG_MPEG4_DECODER 1
+#define CONFIG_SNOW_DECODER 1
+#define CONFIG_VC1_DECODER 1
+#define CONFIG_WMV2_DECODER 1
+#define CONFIG_WMV3_DECODER 1
+#define CONFIG_MPEGAUDIO_HP 1
+#define CONFIG_ZLIB 1
+#define ENABLE_ARMV4L 0
+#define ENABLE_MLIB 0
+#define ENABLE_SPARC 0
+#define ENABLE_ALPHA 0
+#define ENABLE_MMI 0
+#define ENABLE_SH4 0
+#define ENABLE_BFIN 0
+#define ENABLE_SMALL 0
+#define ENABLE_MLP_PARSER 0
+#ifdef ARCH_POWERPC
+#define ENABLE_POWERPC 1
+#else
+#define ENABLE_POWERPC 0
+#endif
+#ifdef ARCH_X86
+#define ENABLE_MMX 1
+#define ENABLE_BSWAP 1
+#define HAVE_BYTESWAP_H 1
+#define HAVE_MMX 1
+#define HAVE_FAST_UNALIGNED 1
+#define ARCH_X86 1
+#else
+#define ENABLE_MMX 0
+#endif
+#ifdef ARCH_X86_64
+#define HAVE_FAST_64BIT 1
+#define HAVE_SSSE3 1
+#define HAVE_EBP_AVAILABLE 1
+#define HAVE_EBX_AVAILABLE 1
+#define ARCH_X86_64 1
+#endif
+#ifdef __APPLE__
+#define CONFIG_DARWIN 1
+#endif
+#define ENABLE_THREADS 1
+#define ENABLE_ENCODERS 1
+#define ENABLE_VIS 0
+#define ENABLE_GRAY 0
+#define HAVE_LRINTF 1
+#define HAVE_LLRINT 1
+#define HAVE_LRINT 1
+#define HAVE_ROUND 1
+#define HAVE_ROUNDF 1
+#define HAVE_THREADS 1
+#define RUNTIME_CPUDETECT 1

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ffconf.c
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ffconf.c	2008-03-21 06:51:51 UTC (rev 3915)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ffconf.c	2008-03-21 06:51:55 UTC (rev 3916)
@@ -25,6 +25,7 @@
     DECLARE_DECODER(VCR1, vcr1);
     DECLARE_DECODER(VP5, vp5);
     DECLARE_DECODER(VP6, vp6);
+    DECLARE_DECODER(VP6A, vp6);
     DECLARE_DECODER(VP6F, vp6f);
     DECLARE_DECODER(WMV3, wmv3);
     DECLARE_DECODER (WMV1, wmv1);
@@ -54,7 +55,23 @@
     DECLARE_DECODER (AMV, amv);
 #undef DECLARE_DECODER
 #define DECLARE_DECODER(a,b); printf(&quot;#define ENABLE_&quot;#a&quot;_DECODER 0\n&quot;); 
+    DECLARE_DECODER(PCX, aasc);
+    DECLARE_DECODER(SUNRAST, aasc);
+    DECLARE_DECODER(VB, aasc);
+    DECLARE_DECODER(XSUB, aasc);
+    DECLARE_DECODER(AC3, aasc);
+    DECLARE_DECODER(APE, aasc);
+    DECLARE_DECODER(MPC8, aasc);
+    DECLARE_DECODER(PCM_S16LE_PLANAR, aasc);
+    DECLARE_DECODER(PCM_ZORK, aasc);
+    DECLARE_DECODER(ADPCM_EA_R1, aasc);
+    DECLARE_DECODER(ADPCM_EA_R2, aasc);
+    DECLARE_DECODER(ADPCM_EA_R3, aasc);
+    DECLARE_DECODER(ADPCM_EA_XAS, aasc);
+    DECLARE_DECODER(ADPCM_IMA_EA_EACS, aasc);
+    DECLARE_DECODER(ADPCM_IMA_EA_SEAD, aasc);
 
+//
     DECLARE_DECODER(AASC, aasc);
     DECLARE_DECODER(AVS, avs);
     DECLARE_DECODER(BETHSOFTVID, bethsoftvid);
@@ -232,6 +249,8 @@
 
 #undef DECLARE_ENCODER
 #define DECLARE_ENCODER(a,b); printf(&quot;#define ENABLE_&quot;#a&quot;_ENCODER 0\n&quot;); 
+    DECLARE_ENCODER(DNXHD, amv);
+    DECLARE_ENCODER(PCM_ZORK, amv);
     DECLARE_ENCODER(ADPCM_IMA_AMV, amv);
     DECLARE_ENCODER(LIBX264, libx264);
     DECLARE_ENCODER(LIBXVID, libxvid);
@@ -326,7 +345,9 @@
 	DECLARE_BSF(NOISE, noise);
 	DECLARE_BSF(MP3_HEADER_DECOMPRESS, mp3_header_decompress);
 	DECLARE_BSF(MJPEGA_DUMP_HEADER, mjpega_dump_header);
-	DECLARE_BSF(IMX_DUMP_HEADER, imx_dump_header);
+	DECLARE_BSF(H264_MP4TOANNEXB, imx_dump_header);
+	DECLARE_BSF(MOV2TEXTSUB, imx_dump_header);
+	DECLARE_BSF(TEXT2MOVSUB, imx_dump_header);
 
 #define DECLARE_MUXER(a,b); printf(&quot;#define CONFIG_&quot;#a&quot;_MUXER 1\n&quot;);
 
@@ -365,6 +386,8 @@
 	ENABLE(SH4, sh4);
 	ENABLE(BFIN, bfin);
 	ENABLE(SMALL, small);
+#define DECLARE_ENABLE_PARSER(a,b); printf(&quot;#define ENABLE_&quot;#a&quot;_PARSER 0\n&quot;);
+	DECLARE_ENABLE_PARSER(MLP, wmv3);
 
 	// Hack so CMake and autoconf don't need to be changed
 	printf(&quot;#ifdef ARCH_POWERPC\n&quot;);
@@ -375,14 +398,22 @@
 
 	printf(&quot;#ifdef ARCH_X86\n&quot;);
 	printf(&quot;#define ENABLE_MMX 1\n&quot;);
+	printf(&quot;#define ENABLE_BSWAP 1\n&quot;);
+	printf(&quot;#define HAVE_BYTESWAP_H 1\n&quot;);
 	printf(&quot;#define HAVE_MMX 1\n&quot;);
 	printf(&quot;#define HAVE_FAST_UNALIGNED 1\n&quot;);
+	printf(&quot;#define ARCH_X86 1\n&quot;);
 	printf(&quot;#else\n&quot;);
 	printf(&quot;#define ENABLE_MMX 0\n&quot;);
+
 	printf(&quot;#endif\n&quot;);
 
 	printf(&quot;#ifdef ARCH_X86_64\n&quot;);
 	printf(&quot;#define HAVE_FAST_64BIT 1\n&quot;);
+	printf(&quot;#define HAVE_SSSE3 1\n&quot;);
+	printf(&quot;#define HAVE_EBP_AVAILABLE 1\n&quot;);
+	printf(&quot;#define HAVE_EBX_AVAILABLE 1\n&quot;);
+	printf(&quot;#define ARCH_X86_64 1\n&quot;);
 	printf(&quot;#endif\n&quot;);
 
 	printf(&quot;#ifdef __APPLE__\n&quot;);
@@ -390,7 +421,14 @@
 	printf(&quot;#endif\n&quot;);
 
 	printf(&quot;#define ENABLE_THREADS 1\n&quot;);
+	printf(&quot;#define ENABLE_ENCODERS 1\n&quot;);
+	printf(&quot;#define ENABLE_VIS 0\n&quot;);
+	printf(&quot;#define ENABLE_GRAY 0\n&quot;);
 	printf(&quot;#define HAVE_LRINTF 1\n&quot;);
+	printf(&quot;#define HAVE_LLRINT 1\n&quot;);
+	printf(&quot;#define HAVE_LRINT 1\n&quot;);
+	printf(&quot;#define HAVE_ROUND 1\n&quot;);
+	printf(&quot;#define HAVE_ROUNDF 1\n&quot;);
 	printf(&quot;#define HAVE_THREADS 1\n&quot;);
 	printf(&quot;#define RUNTIME_CPUDETECT 1\n&quot;);
 }


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001177.html">[Avidemux-svn-commit] r3915 -	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_ffmpeg/ADM_libpostproc
</A></li>
	<LI>Next message: <A HREF="001179.html">[Avidemux-svn-commit] r3917 - in	branches/avidemux_2.5_branch_gruntster/avidemux: ADM_codecs	ADM_colorspace ADM_editor ADM_libraries/ADM_ffmpeg/ADM_lavcodec	ADM_libraries/ADM_ffmpeg/ADM_lavformat	ADM_libraries/ADM_ffmpeg/ADM_libswscale	ADM_libraries/ADM_utilities ADM_outputs ADM_video ADM_videoFilter
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1178">[ date ]</a>
              <a href="thread.html#1178">[ thread ]</a>
              <a href="subject.html#1178">[ subject ]</a>
              <a href="author.html#1178">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">More information about the Avidemux-svn-commit
mailing list</a><br>
</body></html>
