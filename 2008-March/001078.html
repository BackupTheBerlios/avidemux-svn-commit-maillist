<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Avidemux-svn-commit] r3812 - in	branches/avidemux_2.5_branch_mean/avidemux: .	ADM_core/include ADM_core/src ADM_editor	ADM_inputs/ADM_inpics ADM_inputs/ADM_mpegdemuxer	ADM_libraries/ADM_lavformat ADM_libraries/ADM_utilities	ADM_script ADM_toolkit ADM_userInterfaces/ADM_GTK/ADM_dialog	ADM_userInterfaces/ADM_GTK/ADM_gui2	ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk	ADM_userInterfaces/ADM_QT4/ADM_dialog	ADM_userInterfaces/ADM_QT4/ADM_gui
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/avidemux-svn-commit/2008-March/index.html" >
   <LINK REL="made" HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r3812%20-%20in%0A%09branches/avidemux_2.5_branch_mean/avidemux%3A%20.%0A%09ADM_core/include%20ADM_core/src%20ADM_editor%0A%09ADM_inputs/ADM_inpics%20ADM_inputs/ADM_mpegdemuxer%0A%09ADM_libraries/ADM_lavformat%20ADM_libraries/ADM_utilities%0A%09ADM_script%20ADM_toolkit%20ADM_userInterfaces/ADM_GTK/ADM_dialog%0A%09ADM_userInterfaces/ADM_GTK/ADM_gui2%0A%09ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk%0A%09ADM_userInterfaces/ADM_QT4/ADM_dialog%0A%09ADM_userInterfaces/ADM_QT4/ADM_gui&In-Reply-To=%3C200803021529.m22FTuho002213%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   
   <LINK REL="Next"  HREF="001079.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Avidemux-svn-commit] r3812 - in	branches/avidemux_2.5_branch_mean/avidemux: .	ADM_core/include ADM_core/src ADM_editor	ADM_inputs/ADM_inpics ADM_inputs/ADM_mpegdemuxer	ADM_libraries/ADM_lavformat ADM_libraries/ADM_utilities	ADM_script ADM_toolkit ADM_userInterfaces/ADM_GTK/ADM_dialog	ADM_userInterfaces/ADM_GTK/ADM_gui2	ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk	ADM_userInterfaces/ADM_QT4/ADM_dialog	ADM_userInterfaces/ADM_QT4/ADM_gui</H1>
    <B>mean at BerliOS</B> 
    <A HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r3812%20-%20in%0A%09branches/avidemux_2.5_branch_mean/avidemux%3A%20.%0A%09ADM_core/include%20ADM_core/src%20ADM_editor%0A%09ADM_inputs/ADM_inpics%20ADM_inputs/ADM_mpegdemuxer%0A%09ADM_libraries/ADM_lavformat%20ADM_libraries/ADM_utilities%0A%09ADM_script%20ADM_toolkit%20ADM_userInterfaces/ADM_GTK/ADM_dialog%0A%09ADM_userInterfaces/ADM_GTK/ADM_gui2%0A%09ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk%0A%09ADM_userInterfaces/ADM_QT4/ADM_dialog%0A%09ADM_userInterfaces/ADM_QT4/ADM_gui&In-Reply-To=%3C200803021529.m22FTuho002213%40sheep.berlios.de%3E"
       TITLE="[Avidemux-svn-commit] r3812 - in	branches/avidemux_2.5_branch_mean/avidemux: .	ADM_core/include ADM_core/src ADM_editor	ADM_inputs/ADM_inpics ADM_inputs/ADM_mpegdemuxer	ADM_libraries/ADM_lavformat ADM_libraries/ADM_utilities	ADM_script ADM_toolkit ADM_userInterfaces/ADM_GTK/ADM_dialog	ADM_userInterfaces/ADM_GTK/ADM_gui2	ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk	ADM_userInterfaces/ADM_QT4/ADM_dialog	ADM_userInterfaces/ADM_QT4/ADM_gui">mean at mail.berlios.de
       </A><BR>
    <I>Sun Mar  2 16:29:56 CET 2008</I>
    <P><UL>
        
        <LI>Next message: <A HREF="001079.html">[Avidemux-svn-commit] r3813 - in branches/avidemux_2.5_branch_gruntster: . avidemux avidemux/ADM_audio avidemux/ADM_audiodevice avidemux/ADM_audiofilter avidemux/ADM_editor avidemux/ADM_filter avidemux/ADM_inputs/ADM_avsproxy avidemux/ADM_inputs/ADM_inpics avidemux/ADM_inputs/ADM_mpegdemuxer avidemux/ADM_inputs/ADM_openDML avidemux/ADM_libraries/ADM_lavcodec avidemux/ADM_libraries/ADM_lavcodec/i386 avidemux/ADM_libraries/ADM_lavformat avidemux/ADM_libraries/ADM_libwrapper avidemux/ADM_libraries/ADM_mplex avidemux/ADM_libraries/ADM_smjs avidemux/ADM_libraries/ADM_utilities avidemux/ADM_osSupport avidemux/ADM_outputs/oplug_avi avidemux/ADM_outputs/oplug_dummy avidemux/ADM_outputs/oplug_flv avidemux/ADM_outputs/oplug_mp4 avidemux/ADM_outputs/oplug_mpeg avidemux/ADM_outputs/oplug_mpegFF avidemux/ADM_requant avidemux/ADM_script avidemux/ADM_toolkit avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2 ! avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui avidemux/ADM_userInterfaces/ADM_commonUI avidemux/ADM_videoFilter cmake
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1078">[ date ]</a>
              <a href="thread.html#1078">[ thread ]</a>
              <a href="subject.html#1078">[ subject ]</a>
              <a href="author.html#1078">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: mean
Date: 2008-03-02 16:29:54 +0100 (Sun, 02 Mar 2008)
New Revision: 3812

Modified:
   branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_assert.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_misc.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_fileio.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_misc.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_editor/ADM_edLoadSave.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_inpics/ADM_pics.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_indexer.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_lavformat/ADM_lavformat.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/prefs.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_script/ADM_JSAvidemuxAudio.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_script/ADM_JSFunctions.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_toolkit/filesel.h
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_jobs.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/Q_gui2.cpp
   branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/file_qt4.cpp
   branches/avidemux_2.5_branch_mean/avidemux/gtk_gui.cpp
Log:
[Core] Commented &amp; prefixed core functions


Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_assert.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_assert.h	2008-02-29 18:35:39 UTC (rev 3811)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_assert.h	2008-03-02 15:29:54 UTC (rev 3812)
@@ -96,15 +96,16 @@
 }
 #endif
 // Compatibility with fprintf etc.. with long long &amp; win32
+// ADM_cleanupPath returns a cleaned up copy of the parameter
 #ifdef ADM_WIN32
         #define LLX &quot;I64x&quot;
         #define LLU &quot;I64u&quot;
         
-        #define cleanupPath(x) slashToBackSlash(x)
+        #define ADM_cleanupPath(x) ADM_slashToBackSlash(x)
 #else
         #define LLX &quot;llx&quot;
         #define LLU &quot;llu&quot;
-        #define cleanupPath(x) ADM_strdup(x)
+        #define ADM_cleanupPath(x) ADM_strdup(x)
 #endif
 
 

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_misc.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_misc.h	2008-02-29 18:35:39 UTC (rev 3811)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_core/include/ADM_misc.h	2008-03-02 15:29:54 UTC (rev 3812)
@@ -26,14 +26,20 @@
 } ADM_date;
 
 void            TLK_getDate(ADM_date *date);
-void            PathSplit(char *str, char **root, char **ext);
-void	        PathStripName(char *str);
-const char      *GetFileName(const char *str);
-char            *PathCanonize(const char *tmpname);
-void            LowerCase(char *string);
+// /dir/file.ext -&gt; /dir/file and ext returned values are copies
+void            ADM_PathSplit(char *str, char **root, char **ext);
+// Returns path only /foo/bar.avi -&gt; /foo INPLACE, no copy done
+void	        ADM_PathStripName(char *str);
+// Get the filename without path. /foo/bar.avi -&gt; bar.avi INPLACE, NO COPY
+const char      *ADM_GetFileName(const char *str);
+//  Canonize the path, returns a copy of the absolute path given as parameter
+char            *ADM_PathCanonize(const char *tmpname);
+// change to lower case in place the string
+void            ADM_LowerCase(char *string);
+
 uint32_t        getTime( int called );;
 uint32_t 	getTimeOfTheDay(void);
-extern char *slashToBackSlash(char *in);
+//extern char *slashToBackSlash(char *in);
 #ifdef HAVE_GETTIMEOFDAY
 	#define TIMZ struct timezone
 #else

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_fileio.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_fileio.cpp	2008-02-29 18:35:39 UTC (rev 3811)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_fileio.cpp	2008-03-02 15:29:54 UTC (rev 3812)
@@ -172,10 +172,11 @@
 	}
 }
 
-//
-//	Make it absolute
-//
-char *PathCanonize(const char *tmpname)
+/**
+        \fn ADM_PathCanonize
+        \brief Canonize the path, returns a copy of the absolute path given as parameter
+*/
+char *ADM_PathCanonize(const char *tmpname)
 {
 	char path[300];
 	char *out ;
@@ -218,11 +219,12 @@
 	simplify_path(&amp;out);
 	return out;
 }
-/*
-	Strip the path and only keep the name
+/**
+        \fn ADM_PathStripName
+	\brief Returns path only /foo/bar.avi -&gt; /foo INPLACE, no copy done
 
 */
-void		PathStripName(char *str)
+void		ADM_PathStripName(char *str)
 {
 		int len=strlen(str);
 		if(len&lt;=1) return;
@@ -238,11 +240,12 @@
 		}
 }
 
-/*
-	Get the filename without path
+/**
+    \fn ADM_GetFileName
+    \brief Get the filename without path. /foo/bar.avi -&gt; bar.avi INPLACE, NO COPY
 
 */
-const char *GetFileName(const char *str)
+const char *ADM_GetFileName(const char *str)
 {
 	char *filename;
         char *filename2;
@@ -263,16 +266,17 @@
 		return str;
 }
 
-/*
-	Split patch into absolute path+name and extention
+/**
+    \fn ADM_PathSplit
+    \brief Split path into absolute path+name and extention i.e. /foo/bar/zee.avi -&gt; /foo/bar/zee,avi.             Copy are returned
 
 */
-void PathSplit(char *str, char **root, char **ext)
+void ADM_PathSplit(char *str, char **root, char **ext)
 {
 	char *full;
 	uint32_t l;
 
-		full=PathCanonize(str);
+		full=ADM_PathCanonize(str);
 		// Search the last .
 		l=strlen(full);
 		l--;

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_misc.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_misc.cpp	2008-02-29 18:35:39 UTC (rev 3811)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_core/src/ADM_misc.cpp	2008-03-02 15:29:54 UTC (rev 3812)
@@ -205,8 +205,11 @@
 }
 
 
-// Convert everything to lowercase
-void  LowerCase(char *string)
+/**
+        \fn ADM_LowerCase
+        \brief change to lower case in place the string
+*/
+void  ADM_LowerCase(char *string)
 {
   int l=strlen(string)-1;
         for(int i=l;i&gt;=0;i--)
@@ -233,7 +236,7 @@
     This function convert the later to the former
 
 */
-extern char *slashToBackSlash(char *in)
+extern char *ADM_slashToBackSlash(char *in)
 {
     char *out,*cout;
     int n;

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_editor/ADM_edLoadSave.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_editor/ADM_edLoadSave.cpp	2008-02-29 18:35:39 UTC (rev 3811)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_editor/ADM_edLoadSave.cpp	2008-03-02 15:29:54 UTC (rev 3812)
@@ -109,7 +109,7 @@
 
   for (uint32_t i = 0; i &lt; _nb_video; i++)
     {
-        nm=cleanupPath(_videos[i]._aviheader-&gt;getMyName() );
+        nm=ADM_cleanupPath(_videos[i]._aviheader-&gt;getMyName() );
         if(vop)
         {
           qfprintf(fd,&quot;app.forceUnpack();\n&quot;);
@@ -175,7 +175,7 @@
         qfprintf(fd,&quot;\n//** Video Codec conf **\n&quot;);
         videoCodecGetConf(&amp;extraDataSize,&amp;extraData);
         
-        pth= cleanupPath(name );
+        pth= ADM_cleanupPath(name );
         qfprintf(fd,&quot;app.video.codec(\&quot;%s\&quot;,\&quot;%s\&quot;,\&quot;&quot;,videoCodecGetName(),videoCodecGetMode());
         ADM_dealloc(pth);
         // Now deal with extra data
@@ -210,7 +210,7 @@
 
         if(source!=AudioAvi)
         {
-                char *nm=cleanupPath(audioName);
+                char *nm=ADM_cleanupPath(audioName);
                 qfprintf(fd,&quot;app.audio.load(\&quot;%s\&quot;,\&quot;%s\&quot;);\n&quot;, audioSourceFromEnum(source),nm); 
                 ADM_dealloc(nm);
         }
@@ -273,7 +273,7 @@
   qfprintf(fd,&quot;app.setContainer(\&quot;%s\&quot;);\n&quot;,getCurrentContainerAsString());
   if(outputname)
   {
-        char *o=cleanupPath(outputname);
+        char *o=ADM_cleanupPath(outputname);
         qfprintf(fd,&quot;setSuccess(app.save(\&quot;%s\&quot;));\n&quot;,o);
         ADM_dealloc(o);
   }

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_inpics/ADM_pics.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_inpics/ADM_pics.cpp	2008-02-29 18:35:39 UTC (rev 3811)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_inpics/ADM_pics.cpp	2008-03-02 15:29:54 UTC (rev 3812)
@@ -161,7 +161,7 @@
     // Then spit the name in name and extension
     char *name;
     char *extension;
-    PathSplit(inname, &amp;name, &amp;extension);
+    ADM_PathSplit(inname, &amp;name, &amp;extension);
 
 
     nnum = 1;

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_indexer.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_indexer.cpp	2008-02-29 18:35:39 UTC (rev 3811)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_indexer.cpp	2008-03-02 15:29:54 UTC (rev 3812)
@@ -75,7 +75,7 @@
         DIA_progressIndexing *work;
         dmx_demuxer *demuxer;
 
-        char *realname=PathCanonize(mpeg);
+        char *realname=ADM_PathCanonize(mpeg);
         FILE *out;        
         DMX_TYPE mpegType;
         uint8_t  mpegTypeChar;

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_lavformat/ADM_lavformat.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_lavformat/ADM_lavformat.cpp	2008-02-29 18:35:39 UTC (rev 3811)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_lavformat/ADM_lavformat.cpp	2008-03-02 15:29:54 UTC (rev 3812)
@@ -227,7 +227,7 @@
                         // probably a memeleak here
                         char *foo=ADM_strdup(filename);
                         
-                        strcpy(oc-&gt;title,GetFileName(foo));
+                        strcpy(oc-&gt;title,ADM_GetFileName(foo));
                         strcpy(oc-&gt;author,&quot;Avidemux&quot;);
                         c-&gt;sample_aspect_ratio.num=1;
                         c-&gt;sample_aspect_ratio.den=1;

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/prefs.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/prefs.cpp	2008-02-29 18:35:39 UTC (rev 3811)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_libraries/ADM_utilities/prefs.cpp	2008-03-02 15:29:54 UTC (rev 3812)
@@ -33,7 +33,6 @@
 #undef free
 extern char *ADM_getBaseDir(void);
 #define CONFIG &quot;config&quot;
-extern char *PathCanonize(const char *tmpname);
 extern int  qxmlSaveFormatFile(const char *filename, xmlDocPtr cur, int format);
 static char *checkDirAccess(char *home);
 extern char *ADM_escape(const ADM_filename *incoming);
@@ -839,7 +838,7 @@
 		fprintf(stderr,&quot;Prefs: set_lastfile(NULL) called\n&quot;);
 		return RC_FAILED;
 	}
-	internal_file = PathCanonize(file);
+	internal_file = ADM_PathCanonize(file);
 	if( !internal_file ){
 		fprintf(stderr,&quot;Prefs: set_lastfile(): PathCanonize() returns NULL\n&quot;);
 		return RC_FAILED;

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_script/ADM_JSAvidemuxAudio.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_script/ADM_JSAvidemuxAudio.cpp	2008-02-29 18:35:39 UTC (rev 3811)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_script/ADM_JSAvidemuxAudio.cpp	2008-03-02 15:29:54 UTC (rev 3812)
@@ -373,7 +373,7 @@
         if(JSVAL_IS_STRING(argv[0]) == false || JSVAL_IS_INT(argv[1]) == false || JSVAL_IS_INT(argv[2]) == false  ||  JSVAL_IS_STRING(argv[3]) == false  )
                 return JS_FALSE;
         char *name = JS_GetStringBytes(JSVAL_TO_STRING(argv[0]));
-        LowerCase(name);
+        ADM_LowerCase(name);
         enterLock();
         // First search the codec by its name
         if(!audioCodecSetByName(name))
@@ -454,7 +454,7 @@
                 return JS_FALSE;
         // First arg is MP3 etc...
         char *name = JS_GetStringBytes(JSVAL_TO_STRING(argv[0]));
-        LowerCase(name);
+        ADM_LowerCase(name);
         // First search the codec by its name
         AudioSource source;
         if(AudioInvalid==(source=audioCodecGetFromName(name)))

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_script/ADM_JSFunctions.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_script/ADM_JSFunctions.cpp	2008-02-29 18:35:39 UTC (rev 3811)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_script/ADM_JSFunctions.cpp	2008-03-02 15:29:54 UTC (rev 3812)
@@ -490,7 +490,7 @@
     return JS_FALSE;
   char *name=NULL;
   char *orgName = JS_GetStringBytes(JSVAL_TO_STRING(argv[0]));
-  PathStripName(orgName);
+  ADM_PathStripName(orgName);
   /* Remove last / or last \ */
   int l=strlen(orgName);
   if(l) orgName[l-1]=0;

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_toolkit/filesel.h
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_toolkit/filesel.h	2008-02-29 18:35:39 UTC (rev 3811)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_toolkit/filesel.h	2008-03-02 15:29:54 UTC (rev 3812)
@@ -30,7 +30,7 @@
 char *ADM_getCustomDir(void);
 
 uint8_t buildDirectoryContent(uint32_t *outnb,const char *base, char *jobName[],int maxElems,const char *ext);
-const char *GetFileName(const char *str);
+//const char *GetFileName(const char *str);
 
 #endif
 //EOF

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp	2008-02-29 18:35:39 UTC (rev 3811)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_jobs.cpp	2008-03-02 15:29:54 UTC (rev 3812)
@@ -152,7 +152,7 @@
                         case COMMAND_DELETE: 
                                         sel=getSelection(jobs.dialog);
                                         if(sel&gt;=jobs.nb) break;
-                                        if(GUI_Confirmation_HIG(QT_TR_NOOP(&quot;Sure!&quot;),QT_TR_NOOP(&quot;Delete job&quot;),QT_TR_NOOP(&quot;Are you sure you want to delete %s job ?&quot;),GetFileName(jobs.name[sel])))
+                                        if(GUI_Confirmation_HIG(QT_TR_NOOP(&quot;Sure!&quot;),QT_TR_NOOP(&quot;Delete job&quot;),QT_TR_NOOP(&quot;Are you sure you want to delete %s job ?&quot;),ADM_GetFileName(jobs.name[sel])))
                                         {
                                                 jobs.status[sel].status=STATUS_DELETED;
                                         }
@@ -202,7 +202,7 @@
         {
                 sprintf(str1,&quot;&lt;span weight=\&quot;heavy\&quot;&gt; %s &lt;/span&gt;\n&quot; 
                &quot;&lt;span size=\&quot;smaller\&quot; style=\&quot;oblique\&quot; &gt; %s &lt;/span&gt; &quot;
-                ,GetFileName(jobs.name[i]),QT_TR_NOOP(StringStatus[jobs.status[i].status]));
+                ,ADM_GetFileName(jobs.name[i]),QT_TR_NOOP(StringStatus[jobs.status[i].status]));
 
                 date=&amp;(jobs.status[i].startDate);
                 sprintf(str2,&quot;%02d:%02d:%02d&quot;,date-&gt;hours,

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp	2008-02-29 18:35:39 UTC (rev 3811)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp	2008-03-02 15:29:54 UTC (rev 3812)
@@ -625,7 +625,7 @@
 
   for(int i=0;i&lt;ADM_nbCustom;i++)
   {
-    go = gtk_menu_item_new_with_mnemonic (GetFileName(customNames[i]));
+    go = gtk_menu_item_new_with_mnemonic (ADM_GetFileName(customNames[i]));
     gtk_widget_show (go);
     gtk_container_add (GTK_CONTAINER (menu), go);
     rank=ACT_CUSTOM_BASE+i;

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp	2008-02-29 18:35:39 UTC (rev 3811)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk/TLK_filesel.cpp	2008-03-02 15:29:54 UTC (rev 3812)
@@ -35,8 +35,8 @@
 extern char * actual_workbench_file;
 
 static void GUI_FileSel(const char *label, SELFILE_CB * cb, int rw, char **name=NULL);
-char            *PathCanonize(const char *tmpname);
-void            PathStripName(char *str);
+char            *ADM_PathCanonize(const char *tmpname);
+void            ADM_PathStripName(char *str);
 uint8_t         initFileSelector(void);
 
 static GtkFileFilter   *filter_avi=NULL,*filter_mpeg=NULL,*filter_image=NULL,*filter_all=NULL;
@@ -159,8 +159,8 @@
                 else // new file
 #endif
                 {
-                    dupe=PathCanonize(source);
-                    PathStripName(dupe);
+                    dupe=ADM_PathCanonize(source);
+                    ADM_PathStripName(dupe);
                     gtk_file_chooser_set_current_folder(GTK_FILE_CHOOSER(dialog),(gchar *)dupe);
                     gtk_file_chooser_set_current_name(GTK_FILE_CHOOSER(dialog),
                                                       (gchar *)(source + strlen(dupe)));
@@ -174,7 +174,7 @@
 		if( prefs-&gt;get(LASTDIR_WRITE,(ADM_filename **)&amp;tmpname))
 		{
 			
-			dupe=PathCanonize(tmpname);
+			dupe=ADM_PathCanonize(tmpname);
 
 			if( (dir=opendir(dupe)) )
 			{
@@ -238,8 +238,8 @@
         /* Set default dir if provided ..*/
         if(source)
         {
-                dupe=PathCanonize(source);
-                PathStripName(dupe);
+                dupe=ADM_PathCanonize(source);
+                ADM_PathStripName(dupe);
                 if( (dir=opendir(dupe)) )
                         {
                                 closedir(dir);
@@ -254,8 +254,8 @@
                 {
                         
         
-                        dupe=PathCanonize(tmpname);
-                        PathStripName(dupe);
+                        dupe=ADM_PathCanonize(tmpname);
+                        ADM_PathStripName(dupe);
   
                         if( (dir=opendir(dupe)) )
                         {
@@ -329,7 +329,7 @@
 
 					char msg[300];
 
-					snprintf(msg, 300, QT_TR_NOOP(&quot;%s already exists.\n\nDo you want to replace it?&quot;), GetFileName(name));
+					snprintf(msg, 300, QT_TR_NOOP(&quot;%s already exists.\n\nDo you want to replace it?&quot;), ADM_GetFileName(name));
 
                                         if(!GUI_Question(msg))
 						return;
@@ -439,8 +439,8 @@
         if(res)
 	{
                 DIR *dir;
-                char *str=PathCanonize(tmpname);
-                PathStripName(str);
+                char *str=ADM_PathCanonize(tmpname);
+                ADM_PathStripName(str);
 
                 /* LASTDIR may have gone; then do nothing and use current dir instead (implied) */
                 if( (dir=opendir(str)) )
@@ -466,8 +466,8 @@
                 {
                         name=ADM_strdup(selected_filename);
 
-                        char *str=PathCanonize(name);
-                        PathStripName(str);
+                        char *str=ADM_PathCanonize(name);
+                        ADM_PathStripName(str);
                         if(rw)
                                 prefs-&gt;set(LASTDIR_WRITE,(ADM_filename *)str);			
                         else

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_jobs.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_jobs.cpp	2008-02-29 18:35:39 UTC (rev 3811)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_jobs.cpp	2008-03-02 15:29:54 UTC (rev 3812)
@@ -144,7 +144,7 @@
    for(int i=0;i&lt;_nbJobs;i++)
    {
       j=&amp;(desc[i]);
-      ADM_setText(GetFileName(_jobsName[i]),0,i,WIDGET(tableWidget));
+      ADM_setText(ADM_GetFileName(_jobsName[i]),0,i,WIDGET(tableWidget));
       ADM_setText(StringStatus[j-&gt;status],1,i,WIDGET(tableWidget));
       
       sprintf(str,&quot;%02u:%02u:%02u&quot;,j-&gt;startDate.hours,j-&gt;startDate.minutes,j-&gt;startDate.seconds);
@@ -168,7 +168,7 @@
 {
   int sel=WIDGET(tableWidget)-&gt;currentRow();
         if(sel&lt;=0 || sel&gt;=_nbJobs) return 0;
-        if(GUI_Confirmation_HIG(QT_TR_NOOP(&quot;Sure!&quot;),QT_TR_NOOP(&quot;Delete job&quot;),QT_TR_NOOP(&quot;Are you sure you want to delete %s job ?&quot;),GetFileName(_jobsName[sel])))
+        if(GUI_Confirmation_HIG(QT_TR_NOOP(&quot;Sure!&quot;),QT_TR_NOOP(&quot;Delete job&quot;),QT_TR_NOOP(&quot;Are you sure you want to delete %s job ?&quot;),ADM_GetFileName(_jobsName[sel])))
         {
                 desc[sel].status=STATUS_DELETED;
         }

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/Q_gui2.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/Q_gui2.cpp	2008-02-29 18:35:39 UTC (rev 3811)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/Q_gui2.cpp	2008-03-02 15:29:54 UTC (rev 3812)
@@ -528,7 +528,7 @@
 
 		for(int i=0; i &lt; ADM_nbCustom; i++)
 		{
-			customActions[i] = new QAction(GetFileName(customNames[i]), NULL);
+			customActions[i] = new QAction(ADM_GetFileName(customNames[i]), NULL);
 			ui.menuCustom-&gt;addAction(customActions[i]);
 			connect(customActions[i], SIGNAL(triggered()), this, SLOT(custom()));
 		}

Modified: branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/file_qt4.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/file_qt4.cpp	2008-02-29 18:35:39 UTC (rev 3811)
+++ branches/avidemux_2.5_branch_mean/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/file_qt4.cpp	2008-03-02 15:29:54 UTC (rev 3812)
@@ -72,8 +72,8 @@
   if(prefs-&gt;get(pref_entry,(ADM_filename **)&amp;tmpname))
   {
      DIR *dir;
-        str=PathCanonize(tmpname);
-        PathStripName(str);
+        str=ADM_PathCanonize(tmpname);
+        ADM_PathStripName(str);
         /* LASTDIR may have gone; then do nothing and use current dir instead (implied) */
         if( (dir=opendir(str)) )
         {

Modified: branches/avidemux_2.5_branch_mean/avidemux/gtk_gui.cpp
===================================================================
--- branches/avidemux_2.5_branch_mean/avidemux/gtk_gui.cpp	2008-02-29 18:35:39 UTC (rev 3811)
+++ branches/avidemux_2.5_branch_mean/avidemux/gtk_gui.cpp	2008-03-02 15:29:54 UTC (rev 3812)
@@ -915,7 +915,7 @@
   /*
   ** we may get a relative path by cmdline
   */
-  longname = PathCanonize(name);
+  longname = ADM_PathCanonize(name);
   if (mode)
     res = video_body-&gt;addFile (longname, 1);
   else
@@ -1302,7 +1302,7 @@
                         return;
                 }
         // Split name into base + extension
-        PathSplit(name,&amp;name,&amp;ext);
+        ADM_PathSplit(name,&amp;name,&amp;ext);
         
         src=new ADMImage(avifileinfo-&gt;width,avifileinfo-&gt;height);
         ADM_assert(src);
@@ -1343,9 +1343,9 @@
   ADMImage image(avifileinfo-&gt;width,avifileinfo-&gt;height);
   GUI_getFrameContent(&amp;image, curframe);
   if(image.saveAsBmp(name))
-        GUI_Info_HIG (ADM_LOG_INFO,QT_TR_NOOP(&quot;Done&quot;),QT_TR_NOOP( &quot;Saved \&quot;%s\&quot;.&quot;), GetFileName(name));
+        GUI_Info_HIG (ADM_LOG_INFO,QT_TR_NOOP(&quot;Done&quot;),QT_TR_NOOP( &quot;Saved \&quot;%s\&quot;.&quot;), ADM_GetFileName(name));
   else
-        GUI_Error_HIG (QT_TR_NOOP(&quot;BMP op failed&quot;),QT_TR_NOOP( &quot;Saving %s as a BMP file failed.&quot;), GetFileName(name));
+        GUI_Error_HIG (QT_TR_NOOP(&quot;BMP op failed&quot;),QT_TR_NOOP( &quot;Saving %s as a BMP file failed.&quot;), ADM_GetFileName(name));
 }
 
 //_____________________________________________________________
@@ -1792,7 +1792,7 @@
 
 void A_parseECMAScript(const char *name){
   bool ret;
-  char *longname = PathCanonize(name);
+  char *longname = ADM_PathCanonize(name);
    if (playing){
       GUI_PlayAvi();
       curframe = 0;
@@ -2275,11 +2275,11 @@
 
         if(A_Save(name))
         {
-          GUI_Info_HIG (ADM_LOG_INFO,QT_TR_NOOP(&quot;Done&quot;),QT_TR_NOOP( &quot;File %s has been successfully saved.&quot;),GetFileName(name));
+          GUI_Info_HIG (ADM_LOG_INFO,QT_TR_NOOP(&quot;Done&quot;),QT_TR_NOOP( &quot;File %s has been successfully saved.&quot;),ADM_GetFileName(name));
         }
         else
         {
-          GUI_Error_HIG (QT_TR_NOOP(&quot;Failed&quot;), QT_TR_NOOP(&quot;File %s was NOT saved correctly.&quot;),GetFileName(name));
+          GUI_Error_HIG (QT_TR_NOOP(&quot;Failed&quot;), QT_TR_NOOP(&quot;File %s was NOT saved correctly.&quot;),ADM_GetFileName(name));
         }
         return 1;
 }


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	<LI>Next message: <A HREF="001079.html">[Avidemux-svn-commit] r3813 - in branches/avidemux_2.5_branch_gruntster: . avidemux avidemux/ADM_audio avidemux/ADM_audiodevice avidemux/ADM_audiofilter avidemux/ADM_editor avidemux/ADM_filter avidemux/ADM_inputs/ADM_avsproxy avidemux/ADM_inputs/ADM_inpics avidemux/ADM_inputs/ADM_mpegdemuxer avidemux/ADM_inputs/ADM_openDML avidemux/ADM_libraries/ADM_lavcodec avidemux/ADM_libraries/ADM_lavcodec/i386 avidemux/ADM_libraries/ADM_lavformat avidemux/ADM_libraries/ADM_libwrapper avidemux/ADM_libraries/ADM_mplex avidemux/ADM_libraries/ADM_smjs avidemux/ADM_libraries/ADM_utilities avidemux/ADM_osSupport avidemux/ADM_outputs/oplug_avi avidemux/ADM_outputs/oplug_dummy avidemux/ADM_outputs/oplug_flv avidemux/ADM_outputs/oplug_mp4 avidemux/ADM_outputs/oplug_mpeg avidemux/ADM_outputs/oplug_mpegFF avidemux/ADM_requant avidemux/ADM_script avidemux/ADM_toolkit avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2 ! avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui avidemux/ADM_userInterfaces/ADM_commonUI avidemux/ADM_videoFilter cmake
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1078">[ date ]</a>
              <a href="thread.html#1078">[ thread ]</a>
              <a href="subject.html#1078">[ subject ]</a>
              <a href="author.html#1078">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">More information about the Avidemux-svn-commit
mailing list</a><br>
</body></html>
