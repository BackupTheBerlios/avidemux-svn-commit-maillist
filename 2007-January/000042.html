<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Avidemux-svn-commit] r2714 - in	branches/avidemux_2.4_branch/avidemux:	ADM_userInterfaces/ADM_GTK ADM_video ADM_videoFilter
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/avidemux-svn-commit/2007-January/index.html" >
   <LINK REL="made" HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r2714%20-%20in%0A%09branches/avidemux_2.4_branch/avidemux%3A%0A%09ADM_userInterfaces/ADM_GTK%20ADM_video%20ADM_videoFilter&In-Reply-To=%3C200701131110.l0DBARNJ021436%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000041.html">
   <LINK REL="Next"  HREF="000043.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Avidemux-svn-commit] r2714 - in	branches/avidemux_2.4_branch/avidemux:	ADM_userInterfaces/ADM_GTK ADM_video ADM_videoFilter</H1>
    <B>mean at BerliOS</B> 
    <A HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r2714%20-%20in%0A%09branches/avidemux_2.4_branch/avidemux%3A%0A%09ADM_userInterfaces/ADM_GTK%20ADM_video%20ADM_videoFilter&In-Reply-To=%3C200701131110.l0DBARNJ021436%40sheep.berlios.de%3E"
       TITLE="[Avidemux-svn-commit] r2714 - in	branches/avidemux_2.4_branch/avidemux:	ADM_userInterfaces/ADM_GTK ADM_video ADM_videoFilter">mean at mail.berlios.de
       </A><BR>
    <I>Sat Jan 13 12:10:27 CET 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000041.html">[Avidemux-svn-commit] r2713 -	branches/avidemux_2.4_branch/avidemux/ADM_video
</A></li>
        <LI>Next message: <A HREF="000043.html">[Avidemux-svn-commit] r2715 - in	branches/avidemux_2.4_branch/avidemux: ADM_video ADM_videoFilter
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42">[ date ]</a>
              <a href="thread.html#42">[ thread ]</a>
              <a href="subject.html#42">[ subject ]</a>
              <a href="author.html#42">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: mean
Date: 2007-01-13 12:10:25 +0100 (Sat, 13 Jan 2007)
New Revision: 2714

Added:
   branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidChroma.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidChroma.h
   branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidConvolution.hxx
   branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidFlipV.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidFlipV.h
   branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidLargeMedian.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidLargeMedian.h
   branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidLuma.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidLuma.h
Removed:
   branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidChroma.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidChroma.h
   branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidConvolution.hxx
   branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidFlipV.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidFlipV.h
   branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidLargeMedian.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidLargeMedian.h
   branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidLuma.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidLuma.h
Modified:
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/adm_ocr.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_genvideo.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidEq2.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidHue.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidVobSubRender.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidVobsub.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_video/Makefile.am
   branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidFastConvolution.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidResampleFPS.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/Makefile.am
Log:
cleanup

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/adm_ocr.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/adm_ocr.cpp	2007-01-13 10:49:01 UTC (rev 2713)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/adm_ocr.cpp	2007-01-13 11:10:25 UTC (rev 2714)
@@ -50,13 +50,11 @@
 #include &quot;../ADM_GTK/ADM_toolkit_gtk/toolkit_gtk_include.h&quot;
 #include &quot;ADM_editor/ADM_edit.hxx&quot;
 #include &quot;ADM_video/ADM_genvideo.hxx&quot;
-#include &quot;ADM_video/ADM_vidFlipV.h&quot;
 #include &quot;ADM_filter/video_filters.h&quot;
 
 #include &quot;ADM_toolkit/toolkit.hxx&quot;
 #include &quot;ADM_editor/ADM_edit.hxx&quot;
 #include &quot;ADM_video/ADM_genvideo.hxx&quot;
-#include &quot;ADM_video/ADM_vidFlipV.h&quot;
 #include &quot;ADM_filter/video_filters.h&quot;
 
 

Modified: branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_genvideo.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_genvideo.cpp	2007-01-13 10:49:01 UTC (rev 2713)
+++ branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_genvideo.cpp	2007-01-13 11:10:25 UTC (rev 2714)
@@ -35,7 +35,6 @@
 #include &quot;ADM_editor/ADM_edit.hxx&quot;
 #include &quot;ADM_video/ADM_genvideo.hxx&quot;
 
-#include&quot;ADM_video/ADM_vidConvolution.hxx&quot;
 #include&quot;ADM_video/ADM_vidCommonFilter.h&quot;
 uint8_t AVDMGenericVideoStream::getPixel(int32_t x,int32_t y,uint8_t *data)
 {

Deleted: branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidChroma.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidChroma.cpp	2007-01-13 10:49:01 UTC (rev 2713)
+++ branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidChroma.cpp	2007-01-13 11:10:25 UTC (rev 2714)
@@ -1,202 +0,0 @@
-/***************************************************************************
-                          ADM_vidChroma.cpp  -  description
-                             -------------------
-    begin                : Wed Aug 28 2002
-    copyright            : (C) 2002 by mean
-    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-#include &lt;stdio.h&gt;
-#include &lt;stdlib.h&gt;
-#include &lt;string.h&gt;
-#include &lt;ADM_assert.h&gt;
-
-#include &quot;config.h&quot;
-#include &quot;fourcc.h&quot;
-#include &quot;avio.hxx&quot;
-#include &quot;config.h&quot;
-#include &quot;avi_vars.h&quot;
-
-
-#include &quot;ADM_toolkit/toolkit.hxx&quot;
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
-#include &quot;ADM_video/ADM_vidChroma.h&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
-
-
-static FILTER_PARAM nullParam={0,{&quot;&quot;}};
-
-
-SCRIPT_CREATE(chromaU_script,ADMVideoChromaU,nullParam);
-SCRIPT_CREATE(chromaV_script,ADMVideoChromaV,nullParam);
-
-BUILD_CREATE(chromaU_create,ADMVideoChromaU);
-BUILD_CREATE(chromaV_create,ADMVideoChromaV);
-
-
-char *ADMVideoChromaU::printConf( void )
-{
- 	static char buf[50];
- 	
- 	sprintf((char *)buf,&quot; chroma u only&quot;);
-        return buf;
-}
-
-//_______________________________________________________________
-
-ADMVideoChromaU::ADMVideoChromaU(
-									AVDMGenericVideoStream *in,CONFcouple *setup)
-{
-    UNUSED_ARG(setup);
-
-	_in=in;		
-	memcpy(&amp;_info,_in-&gt;getInfo(),sizeof(_info));  			 	
-	_info.encoding=1;
-	
-  	  	
-}
-ADMVideoChromaU::~ADMVideoChromaU()
-{
- 	
-	
- 	
-}
-
-//
-//	Remove y and v just keep U and expand it
-//
-   uint8_t ADMVideoChromaU::getFrameNumberNoAlloc(uint32_t frame,
-				uint32_t *len,
-   				ADMImage *data,
-				uint32_t *flags)
-{				
-uint32_t w,x;
-uint32_t page;
-		ADM_assert(frame&lt;_info.nb_frames);
-       		if(!_in-&gt;getFrameNumberNoAlloc(frame, len,data,flags)) return 0;
-		
-		page= _info.width*_info.height;
-		*len=(page*3)&gt;&gt;1;
-
-
-		// now expand  u
-		uint8_t *y,*v,*y2;
-
-		y=YPLANE(data);
-		y2=y+_info.width;
-		v=UPLANE(data);
-		for(w= _info.height&gt;&gt;1;w&gt;0;w--)
-		{
-			for(x= _info.width&gt;&gt;1;x&gt;0;x--)
-			{
-				*y=*v;
-				*y2=*v;
-				*(y+1)=*v;
-				*(y2+1)=*v;
-				v++;
-				y+=2;
-				y2+=2;
-			}
-                	y+=_info.width;
-			y2+=_info.width;
-       		 }
-
-		 // Remove chroma u &amp; v
-		 memset(UPLANE(data),0x80,page&gt;&gt;2);
-		 memset(VPLANE(data),0x80,page&gt;&gt;2);
-}
-
-//---______________________________________________---------v--------------
-//---______________________________________________---------v--------------
-//---______________________________________________---------v--------------
-//---______________________________________________---------v--------------
-//---______________________________________________---------v--------------
-//---______________________________________________---------v--------------
-//---______________________________________________---------v--------------
-//---______________________________________________---------v--------------
-
-
-
-
-char *ADMVideoChromaV::printConf( void )
-{
- 	static char buf[50];
-
- 	sprintf((char *)buf,&quot; chroma v only&quot;);
-        return buf;
-}
-
-//_______________________________________________________________
-
-ADMVideoChromaV::ADMVideoChromaV(
-									AVDMGenericVideoStream *in,CONFcouple *setup)
-{
-    UNUSED_ARG(setup);
-
-	_in=in;
-	memcpy(&amp;_info,_in-&gt;getInfo(),sizeof(_info));
-	_info.encoding=1;
- 
-
-}
-ADMVideoChromaV::~ADMVideoChromaV()
-{
-
-	
-
-}
-
-//
-//	Remove y and v just keep U and expand it
-//
-   uint8_t ADMVideoChromaV::getFrameNumberNoAlloc(uint32_t frame,
-				uint32_t *len,
-   				ADMImage *data,
-				uint32_t *flags)
-{
-uint32_t w,x;
-uint32_t page;
-		ADM_assert(frame&lt;_info.nb_frames);
-       		if(!_in-&gt;getFrameNumberNoAlloc(frame, len,data,flags)) return 0;
-		
-		page= _info.width*_info.height;
-		*len=(page*3)&gt;&gt;1;
-
-
-		// now expand  u
-		uint8_t *y,*v,*y2;
-
-		y=YPLANE(data);
-		y2=y+_info.width;
-		v=VPLANE(data);
-		for(w= _info.height&gt;&gt;1;w&gt;0;w--)
-		{
-			for(x= _info.width&gt;&gt;1;x&gt;0;x--)
-			{
-				*y=*v;
-				*y2=*v;
-				*(y+1)=*v;
-				*(y2+1)=*v;
-				v++;
-				y+=2;
-				y2+=2;
-			}
-                	y+=_info.width;
-			y2+=_info.width;
-       		 }
-
-		 // Remove chroma u &amp; v
-		 memset(UPLANE(data),0x80,page&gt;&gt;2);
-		 memset(VPLANE(data),0x80,page&gt;&gt;2);
-}
-

Deleted: branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidChroma.h
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidChroma.h	2007-01-13 10:49:01 UTC (rev 2713)
+++ branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidChroma.h	2007-01-13 11:10:25 UTC (rev 2714)
@@ -1,59 +0,0 @@
-/***************************************************************************
-                          ADM_vidChroma.h  -  description
-                             -------------------
-    begin                : Wed Aug 28 2002
-    copyright            : (C) 2002 by mean
-    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-#ifndef CHROMA_
-#define CHROMA_
-
- class  ADMVideoChromaU:public AVDMGenericVideoStream
- {
-
- protected:
-
-
-           virtual char 									*printConf(void);
-			
-			
-
- public:
- 		
-  					ADMVideoChromaU(  AVDMGenericVideoStream *in,CONFcouple *setup);  	          							
-  					virtual ~ADMVideoChromaU();
-		          virtual uint8_t getFrameNumberNoAlloc(uint32_t frame, uint32_t *len,
-			  		ADMImage *data,uint32_t *flags);
-				uint8_t configure( AVDMGenericVideoStream *instream) { UNUSED_ARG(instream); return 1;}
-							
- }     ;
-
- class  ADMVideoChromaV:public AVDMGenericVideoStream
- {
-
- protected:
-
-
-           virtual char 									*printConf(void);
-			uint8_t											_reverse;
-
- public:
- 		
-  					ADMVideoChromaV(  AVDMGenericVideoStream *in,CONFcouple *setup);
-  					virtual ~ADMVideoChromaV();
-		          virtual uint8_t getFrameNumberNoAlloc(uint32_t frame, uint32_t *len,											ADMImage *data,uint32_t *flags);
-					uint8_t configure( AVDMGenericVideoStream *instream) { UNUSED_ARG(instream); return 1;}
-							
- }     ;
-
-#endif

Deleted: branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidConvolution.hxx
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidConvolution.hxx	2007-01-13 10:49:01 UTC (rev 2713)
+++ branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidConvolution.hxx	2007-01-13 11:10:25 UTC (rev 2714)
@@ -1,178 +0,0 @@
-/***************************************************************************
-                          ADM_vidConvolution.hxx  -  description
-                             -------------------
-    begin                : Wed Apr 10 2002
-    copyright            : (C) 2002 by mean
-    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
- #ifndef __CONVPARAM__
- #define __CONVPARAM__
- typedef struct CONV_PARAM
- {
-        uint32_t luma;
-        uint32_t chroma;
-  }CONV_PARAM;
- #endif
-class  AVDMVideoConvolution:public AVDMGenericVideoStream
- {
-
- protected:
-
-                 uint8_t		*_U,*_V;
-    virtual	 uint8_t       		convolutionKernel(int32_t x,int32_t y,uint8_t *out)=0;
-           	virtual char 		*printConf(void);
-
- public:
-
-
-                                      AVDMVideoConvolution(  AVDMGenericVideoStream *in,CONFcouple *setup);
-
-                virtual               ~AVDMVideoConvolution();
-                virtual uint8_t       getFrameNumberNoAlloc(uint32_t frame, uint32_t *len,
-                                                                        ADMImage *data,uint32_t *flags);
-                virtual uint8_t       configure( AVDMGenericVideoStream *instream) { UNUSED_ARG(instream); return 0;};
-
- }     ;
-
-
-   class  AVDMVideoSharpen:public AVDMVideoConvolution
- {
-   protected:
-                    uint8_t  convolutionKernel(int32_t x,int32_t y,uint8_t *data);
- public:
-            virtual char *printConf(void);
-                          AVDMVideoSharpen(  AVDMGenericVideoStream *in,CONFcouple *setup)
-                                          : AVDMVideoConvolution( 	in,setup) {};;
- }     ;
-   class  AVDMVideoMean:public AVDMVideoConvolution
- {
-   protected:
-                    uint8_t  convolutionKernel(int32_t x,int32_t y,uint8_t *data);
- public:
-            virtual char *printConf(void);
-                    AVDMVideoMean(  AVDMGenericVideoStream *in,CONFcouple *setup)
-                      : AVDMVideoConvolution( in,setup) {};
-
- };
- 
-  class  AVDMVideoMedian:public AVDMVideoConvolution
- {
-   protected:
-                    uint8_t  convolutionKernel(int32_t x,int32_t y,uint8_t *data);
- 	public:
-            virtual char *printConf(void);
-                          AVDMVideoMedian(  AVDMGenericVideoStream *in,CONFcouple *setup)
-                                  : AVDMVideoConvolution( 	in,setup) {};
-
- }     ;
-
-  class  AVDMVideoGaussian:public AVDMVideoConvolution
- {
-   protected:
-                    uint8_t  convolutionKernel(int32_t x,int32_t y,uint8_t *data);
- 	public:
-            virtual char *printConf(void);
-                          AVDMVideoGaussian(  AVDMGenericVideoStream *in,CONFcouple *setup)
-                                        : AVDMVideoConvolution( 	in,setup) {};
- }     ;
-//---------------------------------------------------------
- class  AVDMFastVideoConvolution:public AVDMGenericVideoStream
- {
-
- protected:
-
-	virtual uint8_t doLine(uint8_t *pred, uint8_t *cur, uint8_t *next, uint8_t *out, uint32_t w)
-                      { UNUSED_ARG(pred); UNUSED_ARG(cur); UNUSED_ARG(next); UNUSED_ARG(out); UNUSED_ARG(w); return 0;}
-        
-                CONV_PARAM	*_param;
- public:
-#warning FIXME: string constants cannot be used as char
-                      virtual char     *printConf(void) { return const_cast&lt;char*&gt;(&quot;ERROR&quot;);};
-
-                                         AVDMFastVideoConvolution(  AVDMGenericVideoStream *in,CONFcouple *setup);
-                      virtual           ~AVDMFastVideoConvolution();
-                      virtual uint8_t   getFrameNumberNoAlloc(uint32_t frame, uint32_t *len,
-                                                      ADMImage *data,uint32_t *flags);
-                      virtual uint8_t	configure( AVDMGenericVideoStream *instream) ;
-
-                      virtual uint8_t	getCoupledConf( CONFcouple **couples);
-}     ;
-
- class    AVDMFastVideoMean: public AVDMFastVideoConvolution
- {
-        protected:
-            virtual uint8_t doLine(uint8_t  *pred,
-                                  uint8_t *cur,
-                                  uint8_t *next,
-                                  uint8_t *out,
-                                  uint32_t w)   ;
-
-        public:
-
-                              AVDMFastVideoMean(  AVDMGenericVideoStream *in,CONFcouple *setup) :
-                              AVDMFastVideoConvolution(  in,setup) {};
-              virtual char 	*printConf(void);
-
-	}      ;
-
-
-   class    AVDMFastVideoGauss: public AVDMFastVideoConvolution
- {
-    protected:
-              virtual uint8_t 		doLine(uint8_t  *pred,
-                                              uint8_t *cur,
-                                              uint8_t *next,
-                                              uint8_t *out,
-                                              uint32_t w)   ;
-  
-		public:
-
-                                    AVDMFastVideoGauss(  AVDMGenericVideoStream *in,CONFcouple *setup) :
-                                    AVDMFastVideoConvolution(  in,setup) {};
-                    virtual char	*printConf(void);
-
-	}      ;
-     class    AVDMFastVideoSharpen: public AVDMFastVideoConvolution
- {
-        protected:
-            virtual uint8_t 		doLine(uint8_t  *pred,
-                                                uint8_t *cur,
-                                                uint8_t *next,
-                                                uint8_t *out,
-                                                uint32_t w)   ;
-
-          public:
-
-                                      AVDMFastVideoSharpen(  AVDMGenericVideoStream *in,CONFcouple *setup) :
-                                      AVDMFastVideoConvolution(  in,setup) {};
-                              virtual char 		*printConf(void);	
-                      
-  }      ;
-
-  class    AVDMFastVideoMedian: public AVDMFastVideoConvolution
- {
-        protected:
-          virtual uint8_t 	doLine(uint8_t  *pred,
-                                        uint8_t *cur,
-                                        uint8_t *next,
-                                        uint8_t *out,
-                                        uint32_t w)   ;
-
-        public:
-
-                                AVDMFastVideoMedian(  AVDMGenericVideoStream *in,CONFcouple *setup) :
-                                AVDMFastVideoConvolution(  in,setup) {};
-                  virtual char 	*printConf(void);
- }      ;
-
-//EOF
-

Modified: branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidEq2.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidEq2.cpp	2007-01-13 10:49:01 UTC (rev 2713)
+++ branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidEq2.cpp	2007-01-13 11:10:25 UTC (rev 2714)
@@ -35,7 +35,6 @@
 #include &quot;ADM_toolkit/toolkit.hxx&quot;
 #include &quot;ADM_editor/ADM_edit.hxx&quot;
 #include &quot;ADM_video/ADM_genvideo.hxx&quot;
-#include &quot;ADM_video/ADM_vidFlipV.h&quot;
 #include &quot;ADM_filter/video_filters.h&quot;
 #include &quot;DIA_enter.h&quot;
 #include &quot;ADM_video/ADM_cache.h&quot;

Deleted: branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidFlipV.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidFlipV.cpp	2007-01-13 10:49:01 UTC (rev 2713)
+++ branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidFlipV.cpp	2007-01-13 11:10:25 UTC (rev 2714)
@@ -1,125 +0,0 @@
-/***************************************************************************
-                          ADM_vidFlipV.cpp  -  description
-                             -------------------
-    begin                : Wed Nov 6 2002
-    copyright            : (C) 2002 by mean
-    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
- #include &lt;stdio.h&gt;
-#include &lt;stdlib.h&gt;
-#include &lt;string.h&gt;
-#include &lt;ADM_assert.h&gt;
-
-#include &quot;config.h&quot;
-#include &quot;fourcc.h&quot;
-#include &quot;avio.hxx&quot;
-#include &quot;config.h&quot;
-#include &quot;avi_vars.h&quot;
-#ifdef HAVE_ENCODER
-
-
-#include &quot;ADM_toolkit/toolkit.hxx&quot;
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
-#include &quot;ADM_video/ADM_vidFlipV.h&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
-
-
-static FILTER_PARAM flipParam={0,{&quot;&quot;}};
-
-
-SCRIPT_CREATE(flipv_script,ADMVideoFlipV,flipParam);
-BUILD_CREATE(flipv_create,ADMVideoFlipV);
- 
-
-char *ADMVideoFlipV::printConf( void )
-{
- 	static char buf[50];
- 	
- 	sprintf((char *)buf,&quot; V-Flip&quot;);
-        return buf;
-}
-
-ADMVideoFlipV::ADMVideoFlipV(  AVDMGenericVideoStream *in,CONFcouple *setup)
-{
-    UNUSED_ARG(setup);
- 	_in=in;		
-   	memcpy(&amp;_info,_in-&gt;getInfo(),sizeof(_info)); 	
-  	_info.encoding=1;	
-	_uncompressed=new ADMImage(_in-&gt;getInfo()-&gt;width,_in-&gt;getInfo()-&gt;height);
-	ADM_assert(_uncompressed);    	  	
-}
-ADMVideoFlipV::~ADMVideoFlipV()
-{
- 	delete  _uncompressed;	
-	_uncompressed=NULL;
-  
-}
-uint8_t ADMVideoFlipV::getFrameNumberNoAlloc(uint32_t frame,
-				uint32_t *len,
-   				ADMImage *data,
-				uint32_t *flags)
-{
-
-	ADM_assert(frame&lt;_info.nb_frames);
-	// read uncompressed frame
-	if(!_in-&gt;getFrameNumberNoAlloc(frame, len,_uncompressed,flags)) return 0;
-
-         uint8_t *in,*out;
-         uint32_t stride=_info.width;
-         uint32_t h=_info.height;
-         uint32_t page,qpage;
-        
-
-	  
-         page=stride*h;
-         qpage=page&gt;&gt;2;
-         
-         in=YPLANE(_uncompressed);
-         out=YPLANE(data)+(h-1)*stride;
-         // flip y
-         for(uint32_t y=h;y&gt;0;y--)
-         {
-		 memcpy(out,in,stride);
-		 in+=stride;
-		 out-=stride;
-	}
-	// Flip U &amp; V			         
-        stride&gt;&gt;=1;
-	in=UPLANE(_uncompressed);	
-        out=UPLANE(data)+qpage-stride;
-         // flip u
-         for(uint32_t y=h&gt;&gt;1;y&gt;0;y--)
-         {
-		 memcpy(out,in,stride);
-		 in+=stride;
-		 out-=stride;
-	}
-	in=VPLANE(_uncompressed);
-        out=VPLANE(data)+qpage-stride;
-       
-      
-         // flip u
-         for(uint32_t y=h&gt;&gt;1;y&gt;0;y--)
-         {
-		 memcpy(out,in,stride);
-		 in+=stride;
-		 out-=stride;
-	}   
-	data-&gt;copyInfo(_uncompressed);
-	return 1;
-}
-
-
-
-#endif

Deleted: branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidFlipV.h
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidFlipV.h	2007-01-13 10:49:01 UTC (rev 2713)
+++ branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidFlipV.h	2007-01-13 11:10:25 UTC (rev 2714)
@@ -1,37 +0,0 @@
-/***************************************************************************
-                          ADM_vidFlipV.h  -  description
-                             -------------------
-    begin                : Wed Nov 6 2002
-    copyright            : (C) 2002 by mean
-    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#ifndef FLIP__
-#define FLIP__
-
- class  ADMVideoFlipV:public AVDMGenericVideoStream
- {
-
- protected:
-    		AVDMGenericVideoStream 	*_in;    	
-           virtual char 									*printConf(void);
-          
- public:
- 		
-  					ADMVideoFlipV(  AVDMGenericVideoStream *in,CONFcouple *setup);
-  					virtual ~ADMVideoFlipV();
-		          virtual uint8_t getFrameNumberNoAlloc(uint32_t frame, uint32_t *len,
-          																	ADMImage *data,uint32_t *flags);
-					virtual uint8_t configure( AVDMGenericVideoStream *instream) { UNUSED_ARG(instream); return 1;};          																	
-
-
- }     ;
-#endif

Modified: branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidHue.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidHue.cpp	2007-01-13 10:49:01 UTC (rev 2713)
+++ branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidHue.cpp	2007-01-13 11:10:25 UTC (rev 2714)
@@ -30,7 +30,6 @@
 #include &quot;ADM_toolkit/toolkit.hxx&quot;
 #include &quot;ADM_editor/ADM_edit.hxx&quot;
 #include &quot;ADM_video/ADM_genvideo.hxx&quot;
-#include &quot;ADM_video/ADM_vidFlipV.h&quot;
 #include &quot;ADM_filter/video_filters.h&quot;
 #include &quot;DIA_enter.h&quot;
 #include &quot;ADM_video/ADM_cache.h&quot;

Deleted: branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidLargeMedian.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidLargeMedian.cpp	2007-01-13 10:49:01 UTC (rev 2713)
+++ branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidLargeMedian.cpp	2007-01-13 11:10:25 UTC (rev 2714)
@@ -1,311 +0,0 @@
-/***************************************************************************
-                          ADM_vidLargeMedian.cpp  -  description
-                             -------------------
-    begin                : Wed Jan 1 2003
-    copyright            : (C) 2003 by mean
-    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
-    
-    Using <A HREF="http://ndevilla.free.fr/median/median/node20.html">http://ndevilla.free.fr/median/median/node20.html</A>
-    optimized median search
-    
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-#include &lt;stdio.h&gt;
-#include &lt;stdlib.h&gt;
-#include &lt;string.h&gt;
-#include &lt;ADM_assert.h&gt;
-
-#include &quot;config.h&quot;
-#include &quot;fourcc.h&quot;
-#include &quot;avio.hxx&quot;
-#include &quot;config.h&quot;
-#include &quot;avi_vars.h&quot;
-#ifdef HAVE_ENCODER
-
-
-#include &quot;ADM_toolkit/toolkit.hxx&quot;
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
-
-#include&quot;ADM_video/ADM_vidLargeMedian.h&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
-
-
-static FILTER_PARAM nullParam={2,{&quot;chroma&quot;,&quot;luma&quot;}};
-
-
-SCRIPT_CREATE(largeMedian_script,ADMVideoLargeMedian,nullParam);
-BUILD_CREATE(largeMedian_create,ADMVideoLargeMedian);
-
-//_______________________________________________________________
-
-ADMVideoLargeMedian::ADMVideoLargeMedian(
-									AVDMGenericVideoStream *in,CONFcouple *couples)
-{
-
-
-	_in=in;		
-	memcpy(&amp;_info,_in-&gt;getInfo(),sizeof(_info));  		
-	_uncompressed=new ADMImage(_in-&gt;getInfo()-&gt;width,_in-&gt;getInfo()-&gt;height);
-	ADM_assert(_uncompressed);
-	_info.encoding=1;
-	if(couples==NULL)
-	{
-		_param=NEW( CONV_PARAM);
-		_param-&gt;chroma=1;
-		_param-&gt;luma=1;
-		printf(&quot;\n Creating from null\n&quot;);
-	}
-	else
-	{
-			_param=NEW(CONV_PARAM);
-			GET(luma);
-			GET(chroma);
-	}
-
-
-}
-
-uint8_t	ADMVideoLargeMedian::getCoupledConf( CONFcouple **couples)
-{
-
-			ADM_assert(_param);
-			*couples=new CONFcouple(2);
-
-#define CSET(x)  (*couples)-&gt;setCouple((char *)#x,(_param-&gt;x))
-			CSET(luma);
-			CSET(chroma);
-			return 1;
-
-}
-ADMVideoLargeMedian::~ADMVideoLargeMedian()
-{
-	if(_uncompressed)
- 		delete _uncompressed;
-	_uncompressed=NULL;
-	DELETE(_param);
-}
-char *ADMVideoLargeMedian::printConf(void)
-{
- 		return (char *)&quot;Median (5x5)&quot;;; // this one is pure
-}
-//
-//	Basically ask a uncompressed frame from editor and ask
-//		GUI to decompress it .
-//
-
-uint8_t ADMVideoLargeMedian::getFrameNumberNoAlloc(uint32_t frame,
-				uint32_t *len,
-   				ADMImage *data,
-				uint32_t *flags)
-{
-//uint8_t *dst,*dstu,*dstv,*srcu,*srcv;
-uint8_t *x1,*x2,*x3,*x4,*x5,*o1;
-uint32_t stride,page;
-
-	ADM_assert(frame&lt;_info.nb_frames);
-	ADM_assert(_uncompressed);					
-	stride=_info.width;
-	page=(stride*_info.height)&gt;&gt;2;
-																
-	// read uncompressed frame
-	if(!_in-&gt;getFrameNumberNoAlloc(frame, len,_uncompressed,flags)) return 0;               
-         
-	if(!_param-&gt;luma)
-	{
-		memcpy(YPLANE(data),YPLANE(_uncompressed),page*4);						
-	}
-	else
-	{
-		memcpy(YPLANE(data),YPLANE(_uncompressed),stride*2);
-		memcpy(YPLANE(data)+page*4-stride*2,YPLANE(_uncompressed)+page*4-2*stride,2*stride);          
-	         
-		o1=YPLANE(data)+stride*2;;
-		x1=YPLANE(_uncompressed);
-		x2=x1+stride;
-		x3=x2+stride;
-		x4=x3+stride;
-		x5=x4+stride;
-		// Luma
-		for(int32_t y=2;y&lt;(int32_t)(_info.height)-2;y++)
-		{
-			doLine(x1,x2,x3,x4,x5,o1,stride);
-			x1=x2;
-			x2=x3;
-			x3=x4;
-			x4=x5;
-			x5+=stride; 
-			o1+=stride;                 
-		}
-	}
-					
-      	
-	stride&gt;&gt;=1;
-	if(!_param-&gt;chroma)
-	{
-	 	memcpy(UPLANE(data),UPLANE(_uncompressed),page*2);			
-	}	
-	else
-	{
-		// first and last line
-		memcpy(UPLANE(data),UPLANE(_uncompressed),stride*2);
-		memcpy(UPLANE(data)+page-stride*2,UPLANE(_uncompressed)+page-2*stride,2*stride);
-		// chroma u	
-		o1=UPLANE(data)+stride*2;
-		x1=UPLANE(_uncompressed);
-		x2=x1+stride;
-		x3=x2+stride;
-		x4=x3+stride;
-		x5=x4+stride;
-	          
-		for(int32_t y=2;y&lt;(int32_t)(_info.height&gt;&gt;1)-2;y++)
-		{
-			doLine(x1,x2,x3,x4,x5,o1,stride);
-			x1=x2;
-			x2=x3;
-			x3=x4;
-			x4=x5;
-			x5+=stride; 
-			o1+=stride;                 
-		}
-		// chroma V
-		// first and last line
-		memcpy(VPLANE(data),VPLANE(_uncompressed),stride*2);
-		memcpy(VPLANE(data)+page-2*stride,VPLANE(_uncompressed)+page-2*stride,2*stride);          
-	          
-		o1=VPLANE(data)+stride*2;
-		x1=VPLANE(_uncompressed);
-		x2=x1+stride;
-		x3=x2+stride;
-		x4=x3+stride;
-		x5=x4+stride;
-
-	         
-		for(int32_t y=2;y&lt;(int32_t)(_info.height&gt;&gt;1)-2;y++)
-		{
-			doLine(x1,x2,x3,x4,x5,o1,stride);
-			x1=x2;
-			x2=x3;
-			x3=x4;
-			x4=x5;
-			x5+=stride; 
-			o1+=stride;                      
-	      	}
-	}
-	data-&gt;copyInfo(_uncompressed);
-	return 1;
-}
-//________________________________________________________________________
-uint8_t ADMVideoLargeMedian::doLine(uint8_t  *pred2,uint8_t  *pred1,
-					uint8_t *cur,
-   					uint8_t *next1,uint8_t *next2,
-   					uint8_t *out,
-                       			uint32_t w)
-                                 
-{
-static uint8_t box[5][5];	
-static uint8_t box2[5][5];	
-
-uint32_t col;
-uint8_t temp;
-uint32_t inbox;
-	
-// prefill box
-	for(uint32_t x=0;x&lt;4;x++)
-		{
-			box[0][x+1]=*(pred2+x);
-			box[1][x+1]=*(pred1+x);
-			box[2][x+1]=*(cur+x);
-			box[3][x+1]=*(next1+x);
-			box[4][x+1]=*(next2+x);			
-		}
-		col=0;
-		*out=*cur;
-		*(out+1)=*(cur+1);
-		*(out+w-1)=*(cur+w-1);		
-		*(out+w-2)=*(cur+w-2);
-		out+=2;
-		next1+=4;
-		next2+=4;
-		pred1+=4;
-		pred2+=4;
-		cur+=4;	
-	while(w&gt;4)
-	{
-		// fill
-			box[0][col]=*pred2++;
-			box[1][col]=*pred1++;
-			box[2][col]=*cur++;
-			box[3][col]=*next1++;
-			box[4][col]=*next2++;
-			col++;
-			col%=5;
-			// copy &amp; sort
-			memcpy(box2,box,5*5);
-			uint8_t *p=(uint8_t *)box2;	
-			inbox=0;	
-#define PIX_SORT(a,b) { if ((a)&gt;(b)) PIX_SWAP((a),(b)); }
-#define PIX_SWAP(a,b) { temp=(a);(a)=(b);(b)=temp; }
-
-			
-    PIX_SORT(p[0], p[1]) ;   PIX_SORT(p[3], p[4]) ;   PIX_SORT(p[2], p[4]) ;
-    PIX_SORT(p[2], p[3]) ;   PIX_SORT(p[6], p[7]) ;   PIX_SORT(p[5], p[7]) ;
-    PIX_SORT(p[5], p[6]) ;   PIX_SORT(p[9], p[10]) ;  PIX_SORT(p[8], p[10]) ;
-    PIX_SORT(p[8], p[9]) ;   PIX_SORT(p[12], p[13]) ; PIX_SORT(p[11], p[13]) ;
-    PIX_SORT(p[11], p[12]) ; PIX_SORT(p[15], p[16]) ; PIX_SORT(p[14], p[16]) ;
-    PIX_SORT(p[14], p[15]) ; PIX_SORT(p[18], p[19]) ; PIX_SORT(p[17], p[19]) ;
-    PIX_SORT(p[17], p[18]) ; PIX_SORT(p[21], p[22]) ; PIX_SORT(p[20], p[22]) ;
-    PIX_SORT(p[20], p[21]) ; PIX_SORT(p[23], p[24]) ; PIX_SORT(p[2], p[5]) ;
-    PIX_SORT(p[3], p[6]) ;   PIX_SORT(p[0], p[6]) ;   PIX_SORT(p[0], p[3]) ;
-    PIX_SORT(p[4], p[7]) ;   PIX_SORT(p[1], p[7]) ;   PIX_SORT(p[1], p[4]) ;
-    PIX_SORT(p[11], p[14]) ; PIX_SORT(p[8], p[14]) ;  PIX_SORT(p[8], p[11]) ;
-    PIX_SORT(p[12], p[15]) ; PIX_SORT(p[9], p[15]) ;  PIX_SORT(p[9], p[12]) ;
-    PIX_SORT(p[13], p[16]) ; PIX_SORT(p[10], p[16]) ; PIX_SORT(p[10], p[13]) ;
-    PIX_SORT(p[20], p[23]) ; PIX_SORT(p[17], p[23]) ; PIX_SORT(p[17], p[20]) ;
-    PIX_SORT(p[21], p[24]) ; PIX_SORT(p[18], p[24]) ; PIX_SORT(p[18], p[21]) ;
-    PIX_SORT(p[19], p[22]) ; PIX_SORT(p[8], p[17]) ;  PIX_SORT(p[9], p[18]) ;
-    PIX_SORT(p[0], p[18]) ;  PIX_SORT(p[0], p[9]) ;   PIX_SORT(p[10], p[19]) ;
-    PIX_SORT(p[1], p[19]) ;  PIX_SORT(p[1], p[10]) ;  PIX_SORT(p[11], p[20]) ;
-    PIX_SORT(p[2], p[20]) ;  PIX_SORT(p[2], p[11]) ;  PIX_SORT(p[12], p[21]) ;
-    PIX_SORT(p[3], p[21]) ;  PIX_SORT(p[3], p[12]) ;  PIX_SORT(p[13], p[22]) ;
-    PIX_SORT(p[4], p[22]) ;  PIX_SORT(p[4], p[13]) ;  PIX_SORT(p[14], p[23]) ;
-    PIX_SORT(p[5], p[23]) ;  PIX_SORT(p[5], p[14]) ;  PIX_SORT(p[15], p[24]) ;
-    PIX_SORT(p[6], p[24]) ;  PIX_SORT(p[6], p[15]) ;  PIX_SORT(p[7], p[16]) ;
-    PIX_SORT(p[7], p[19]) ;  PIX_SORT(p[13], p[21]) ; PIX_SORT(p[15], p[23]) ;
-    PIX_SORT(p[7], p[13]) ;  PIX_SORT(p[7], p[15]) ;  PIX_SORT(p[1], p[9]) ;
-    PIX_SORT(p[3], p[11]) ;  PIX_SORT(p[5], p[17]) ;  PIX_SORT(p[11], p[17]) ;
-    PIX_SORT(p[9], p[17]) ;  PIX_SORT(p[4], p[10]) ;  PIX_SORT(p[6], p[12]) ;
-    PIX_SORT(p[7], p[14]) ;  PIX_SORT(p[4], p[6]) ;   PIX_SORT(p[4], p[7]) ;
-    PIX_SORT(p[12], p[14]) ; PIX_SORT(p[10], p[14]) ; PIX_SORT(p[6], p[7]) ;
-    PIX_SORT(p[10], p[12]) ; PIX_SORT(p[6], p[10]) ;  PIX_SORT(p[6], p[17]) ;
-    PIX_SORT(p[12], p[17]) ; PIX_SORT(p[7], p[17]) ;  PIX_SORT(p[7], p[10]) ;
-    PIX_SORT(p[12], p[18]) ; PIX_SORT(p[7], p[12]) ;  PIX_SORT(p[10], p[18]) ;
-    PIX_SORT(p[12], p[20]) ; PIX_SORT(p[10], p[20]) ; PIX_SORT(p[10], p[12]) ;
-			
-		  
-		  *out++=p[12];
-		  w--;
-	}	
-	
-	return 1;
-}
-
-uint8_t ADMVideoLargeMedian::configure(AVDMGenericVideoStream * instream)
-{
-  return 1; 
-}
-
-
-
-#endif
-
-

Deleted: branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidLargeMedian.h
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidLargeMedian.h	2007-01-13 10:49:01 UTC (rev 2713)
+++ branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidLargeMedian.h	2007-01-13 11:10:25 UTC (rev 2714)
@@ -1,53 +0,0 @@
-/***************************************************************************
-                          ADM_vidLargeMedian.h  -  description
-                             -------------------
-    begin                : Wed Jan 1 2003
-    copyright            : (C) 2003 by mean
-    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
- #ifndef  __CONVPARAM__
- #define __CONVPARAM__
- typedef struct CONV_PARAM
- {
-	 	uint32_t luma;
-	  	uint32_t chroma;
-	}CONV_PARAM;
- #endif
-class  ADMVideoLargeMedian:public AVDMGenericVideoStream
- {
-
- protected:
-    		AVDMGenericVideoStream 	*_in;
-    		//uint8_t					*_uncompressed;
-	virtual uint8_t 					doLine(uint8_t  *pred2,
-										uint8_t *pred1,
-   										uint8_t *cur,
-                                          					uint8_t *next1,
-                                           					uint8_t *next2,
-   										uint8_t *out,
-                       								uint32_t w)    ;
-        	CONV_PARAM				*_param;
- public:
- 		        virtual char 	*printConf(void) ;
-  						
-  						ADMVideoLargeMedian(  AVDMGenericVideoStream *in,CONFcouple *setup);
-
-  			virtual 		~ADMVideoLargeMedian();
-		        virtual uint8_t 	getFrameNumberNoAlloc(uint32_t frame, uint32_t *len,
-									ADMImage *data,uint32_t *flags);
-			virtual uint8_t 	configure( AVDMGenericVideoStream *instream) ;
-			virtual uint8_t 	getCoupledConf( CONFcouple **couples);
-
- }     ;
-
-
-

Deleted: branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidLuma.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidLuma.cpp	2007-01-13 10:49:01 UTC (rev 2713)
+++ branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidLuma.cpp	2007-01-13 11:10:25 UTC (rev 2714)
@@ -1,98 +0,0 @@
-/***************************************************************************
-                          ADM_vidLuma.cpp  -  description
-                             -------------------
-    begin                : Sat Aug 24 2002
-    copyright            : (C) 2002 by mean
-    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
- #include &lt;stdio.h&gt;
-#include &lt;stdlib.h&gt;
-#include &lt;string.h&gt;
-#include &lt;ADM_assert.h&gt;
-
-#include &quot;config.h&quot;
-#include &quot;fourcc.h&quot;
-#include &quot;avio.hxx&quot;
-#include &quot;config.h&quot;
-#include &quot;avi_vars.h&quot;
-#ifdef HAVE_ENCODER
-
-
-#include &quot;ADM_toolkit/toolkit.hxx&quot;
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
-#include &quot;ADM_video/ADM_vidLuma.h&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
-
-
-static FILTER_PARAM nullParam={0,{&quot;&quot;}};
-
-
-SCRIPT_CREATE(luma_script,ADMVideoLuma,nullParam);
-BUILD_CREATE(luma_create,ADMVideoLuma);
-
- 
-
-char *ADMVideoLuma::printConf( void )
-{
- 	static char buf[50];
- 	
- 	sprintf((char *)buf,&quot; Luma only&quot;);
-        return buf;
-}
-
-ADMVideoLuma::ADMVideoLuma(  AVDMGenericVideoStream *in,CONFcouple *setup)
-{
-
- 	_in=in;		
-   	memcpy(&amp;_info,_in-&gt;getInfo(),sizeof(_info));  		
-	
-		if(setup)
-		{
-			 _param=(void *)setup;
-		}	
-			else 			
-		{	// default parameter	
-				_param= NULL;
-		}				
-					 	
-  _info.encoding=1;
-
-  	  	
-}
-ADMVideoLuma::~ADMVideoLuma()
-{
- 	
-}
-uint8_t ADMVideoLuma::getFrameNumberNoAlloc(uint32_t frame,
-				uint32_t *len,
-   				ADMImage *data,
-				uint32_t *flags)
-{
-
-	ADM_assert(frame&lt;_info.nb_frames);
-	// read uncompressed frame
-	if(!_in-&gt;getFrameNumberNoAlloc(frame, len,data,flags)) return 0;
-
-	uint32_t sz;
-			
-	sz=_info.width*_info.height;
-	memset(UPLANE(data),128,sz&gt;&gt;2);
-	memset(VPLANE(data),128,sz&gt;&gt;2);
-
-      return 1;
-}
-
-
-
-#endif

Deleted: branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidLuma.h
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidLuma.h	2007-01-13 10:49:01 UTC (rev 2713)
+++ branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidLuma.h	2007-01-13 11:10:25 UTC (rev 2714)
@@ -1,38 +0,0 @@
-/***************************************************************************
-                          ADM_vidLuma.h  -  description
-                             -------------------
-    begin                : Sat Aug 24 2002
-    copyright            : (C) 2002 by mean
-    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-#ifndef LUMA__
-#define LUMA__
-
- class  ADMVideoLuma:public AVDMGenericVideoStream
- {
-
- protected:
-
-           virtual char 									*printConf(void);
-			void													*_param;
-
- public:
- 		
-  					ADMVideoLuma(  AVDMGenericVideoStream *in,CONFcouple *setup);
-  					virtual ~ADMVideoLuma();
-		          virtual uint8_t getFrameNumberNoAlloc(uint32_t frame, uint32_t *len,
-          					ADMImage *data,uint32_t *flags);
-					virtual uint8_t configure( AVDMGenericVideoStream *instream) { UNUSED_ARG(instream); return 1;};          																	
-							
- }     ;
-#endif

Modified: branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidVobSubRender.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidVobSubRender.cpp	2007-01-13 10:49:01 UTC (rev 2713)
+++ branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidVobSubRender.cpp	2007-01-13 11:10:25 UTC (rev 2714)
@@ -61,7 +61,6 @@
 #include &quot;ADM_toolkit/toolkit.hxx&quot;
 #include &quot;ADM_editor/ADM_edit.hxx&quot;
 #include &quot;ADM_video/ADM_genvideo.hxx&quot;
-#include &quot;ADM_video/ADM_vidFlipV.h&quot;
 #include &quot;ADM_filter/video_filters.h&quot;
 
 

Modified: branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidVobsub.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidVobsub.cpp	2007-01-13 10:49:01 UTC (rev 2713)
+++ branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidVobsub.cpp	2007-01-13 11:10:25 UTC (rev 2714)
@@ -37,7 +37,6 @@
 #include &quot;ADM_toolkit/toolkit.hxx&quot;
 #include &quot;ADM_editor/ADM_edit.hxx&quot;
 #include &quot;ADM_video/ADM_genvideo.hxx&quot;
-#include &quot;ADM_video/ADM_vidFlipV.h&quot;
 #include &quot;ADM_filter/video_filters.h&quot;
 
 

Modified: branches/avidemux_2.4_branch/avidemux/ADM_video/Makefile.am
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_video/Makefile.am	2007-01-13 10:49:01 UTC (rev 2713)
+++ branches/avidemux_2.4_branch/avidemux/ADM_video/Makefile.am	2007-01-13 11:10:25 UTC (rev 2714)
@@ -9,20 +9,16 @@
 libADM_video_a_SOURCES = ADM_vidFields.cpp \
  ADM_vidDeintASM.cpp \
  ADM_vidVlad.cpp \
- ADM_vidLargeMedian.cpp \
  ADM_vidSalt.cpp \
  ADM_vidCached.cpp \
  ADM_vidPartial.cpp \
  ADM_vidFont.cpp \
  ADM_vidSRT.cpp \
-	ADM_vidFlipV.cpp \
  ADM_vidStabilize.cpp \
  ADM_vidContrast.cpp \
 	ADM_resizeter.cpp \
- ADM_vidConvolution.cpp \
  ADM_vidCrop.cpp \
  ADM_vidDeinterlace.cpp \
-	ADM_vidLuma.cpp \
  ADM_vidNull.cpp \
  ADM_vidPalShift.cpp \
 	ADM_vidResize.cpp \
@@ -30,7 +26,6 @@
  ADM_vidTempSmooth.cpp \
  ADM_vidUVSwap.cpp \
 	ADM_vidClean.cpp \
- ADM_vidChroma.cpp \
 	ADM_resizebis.cpp \
  ADM_genvideo.cpp \
  ADM_vidRotate.cpp \
@@ -105,8 +100,8 @@
 ADM_vidASharp_param.h  ADM_vidFieldUtil.cpp  ADM_vidSalt.cpp \
 ADM_vidFieldUtil.h  ADM_vidSalt.h \
 ADM_vidFields.cpp ADM_vidSeparateField.cpp \
-ADM_vidAnimated.cpp  ADM_vidFlipV.cpp  ADM_vidSeparateField.h \
-ADM_vidAnimated.h  ADM_vidFlipV.h  \
+ADM_vidAnimated.cpp  ADM_vidSeparateField.h \
+ADM_vidAnimated.h  \
 ADM_vidAnimated_param.h   \
 ADM_vidAsharp.cpp   ADM_vidStabilize.cpp \
 ADM_vidFont.cpp ADM_vidStabilize.h \
@@ -119,11 +114,11 @@
 ADM_vidCached.h  ADM_vidIVTC.cpp ADM_vidTelecide.cpp \
 ADM_vidIVTC.h ADM_vidTelecide.h \
 ADM_vidTempSmooth.cpp \
-ADM_vidChroma.cpp  ADM_vidTempSmooth.h \
-ADM_vidChroma.h  ADM_vidLargeMedian.cpp  ADM_vidUVSwap.cpp \
-ADM_vidChromaShift.cpp ADM_vidLargeMedian.h  ADM_vidUVSwap.h \
-ADM_vidChromaShift.h ADM_vidLuma.cpp ADM_vidUnblend.cpp \
-ADM_vidClean.cpp ADM_vidLuma.h ADM_vidUnblend_param.h \
+ADM_vidTempSmooth.h \
+ADM_vidUVSwap.cpp \
+ADM_vidChromaShift.cpp ADM_vidUVSwap.h \
+ADM_vidChromaShift.h ADM_vidUnblend.cpp \
+ADM_vidClean.cpp ADM_vidUnblend_param.h \
 ADM_vidClean.h ADM_vidVlad.cpp \
 ADM_vidColorYuv.cpp  ADM_vidVlad.h \
 ADM_vidColorYuv.h  ADM_vidVobSub.h \
@@ -131,8 +126,8 @@
 ADM_vidCommonFilter.h  ADM_vidMPLResize.cpp  ADM_vidVobsub.cpp \
 ADM_vidContrast.cpp  ADM_vidMPdelogo.cpp ADM_vidWirl.cpp \
 ADM_vidContrast.h  ADM_vidMPdelogo.h ADM_vidlavdeint.cpp \
-ADM_vidConvolution.cpp  ADM_vidlavdeint.h \
-ADM_vidConvolution.hxx  ADM_vobsubinfo.cpp \
+ADM_vidlavdeint.h \
+ADM_vobsubinfo.cpp \
 ADM_vidCrop.cpp  ADM_vidMSmooth_param.h  ADM_vobsubinfo.h \
 ASM_vidDenoise.cpp \
 ADM_vidDecDec.cpp  swscale_internal.h \

Copied: branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidChroma.cpp (from rev 2489, branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidChroma.cpp)
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidChroma.cpp	2006-10-31 15:59:58 UTC (rev 2489)
+++ branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidChroma.cpp	2007-01-13 11:10:25 UTC (rev 2714)
@@ -0,0 +1,202 @@
+/***************************************************************************
+                          ADM_vidChroma.cpp  -  description
+                             -------------------
+    begin                : Wed Aug 28 2002
+    copyright            : (C) 2002 by mean
+    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#include &lt;stdio.h&gt;
+#include &lt;stdlib.h&gt;
+#include &lt;string.h&gt;
+#include &lt;ADM_assert.h&gt;
+
+#include &quot;config.h&quot;
+#include &quot;fourcc.h&quot;
+#include &quot;avio.hxx&quot;
+#include &quot;config.h&quot;
+#include &quot;avi_vars.h&quot;
+
+
+#include &quot;ADM_toolkit/toolkit.hxx&quot;
+#include &quot;ADM_editor/ADM_edit.hxx&quot;
+#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_vidChroma.h&quot;
+#include &quot;ADM_filter/video_filters.h&quot;
+
+
+static FILTER_PARAM nullParam={0,{&quot;&quot;}};
+
+
+SCRIPT_CREATE(chromaU_script,ADMVideoChromaU,nullParam);
+SCRIPT_CREATE(chromaV_script,ADMVideoChromaV,nullParam);
+
+BUILD_CREATE(chromaU_create,ADMVideoChromaU);
+BUILD_CREATE(chromaV_create,ADMVideoChromaV);
+
+
+char *ADMVideoChromaU::printConf( void )
+{
+ 	static char buf[50];
+ 	
+ 	sprintf((char *)buf,&quot; chroma u only&quot;);
+        return buf;
+}
+
+//_______________________________________________________________
+
+ADMVideoChromaU::ADMVideoChromaU(
+									AVDMGenericVideoStream *in,CONFcouple *setup)
+{
+    UNUSED_ARG(setup);
+
+	_in=in;		
+	memcpy(&amp;_info,_in-&gt;getInfo(),sizeof(_info));  			 	
+	_info.encoding=1;
+	
+  	  	
+}
+ADMVideoChromaU::~ADMVideoChromaU()
+{
+ 	
+	
+ 	
+}
+
+//
+//	Remove y and v just keep U and expand it
+//
+   uint8_t ADMVideoChromaU::getFrameNumberNoAlloc(uint32_t frame,
+				uint32_t *len,
+   				ADMImage *data,
+				uint32_t *flags)
+{				
+uint32_t w,x;
+uint32_t page;
+		ADM_assert(frame&lt;_info.nb_frames);
+       		if(!_in-&gt;getFrameNumberNoAlloc(frame, len,data,flags)) return 0;
+		
+		page= _info.width*_info.height;
+		*len=(page*3)&gt;&gt;1;
+
+
+		// now expand  u
+		uint8_t *y,*v,*y2;
+
+		y=YPLANE(data);
+		y2=y+_info.width;
+		v=UPLANE(data);
+		for(w= _info.height&gt;&gt;1;w&gt;0;w--)
+		{
+			for(x= _info.width&gt;&gt;1;x&gt;0;x--)
+			{
+				*y=*v;
+				*y2=*v;
+				*(y+1)=*v;
+				*(y2+1)=*v;
+				v++;
+				y+=2;
+				y2+=2;
+			}
+                	y+=_info.width;
+			y2+=_info.width;
+       		 }
+
+		 // Remove chroma u &amp; v
+		 memset(UPLANE(data),0x80,page&gt;&gt;2);
+		 memset(VPLANE(data),0x80,page&gt;&gt;2);
+}
+
+//---______________________________________________---------v--------------
+//---______________________________________________---------v--------------
+//---______________________________________________---------v--------------
+//---______________________________________________---------v--------------
+//---______________________________________________---------v--------------
+//---______________________________________________---------v--------------
+//---______________________________________________---------v--------------
+//---______________________________________________---------v--------------
+
+
+
+
+char *ADMVideoChromaV::printConf( void )
+{
+ 	static char buf[50];
+
+ 	sprintf((char *)buf,&quot; chroma v only&quot;);
+        return buf;
+}
+
+//_______________________________________________________________
+
+ADMVideoChromaV::ADMVideoChromaV(
+									AVDMGenericVideoStream *in,CONFcouple *setup)
+{
+    UNUSED_ARG(setup);
+
+	_in=in;
+	memcpy(&amp;_info,_in-&gt;getInfo(),sizeof(_info));
+	_info.encoding=1;
+ 
+
+}
+ADMVideoChromaV::~ADMVideoChromaV()
+{
+
+	
+
+}
+
+//
+//	Remove y and v just keep U and expand it
+//
+   uint8_t ADMVideoChromaV::getFrameNumberNoAlloc(uint32_t frame,
+				uint32_t *len,
+   				ADMImage *data,
+				uint32_t *flags)
+{
+uint32_t w,x;
+uint32_t page;
+		ADM_assert(frame&lt;_info.nb_frames);
+       		if(!_in-&gt;getFrameNumberNoAlloc(frame, len,data,flags)) return 0;
+		
+		page= _info.width*_info.height;
+		*len=(page*3)&gt;&gt;1;
+
+
+		// now expand  u
+		uint8_t *y,*v,*y2;
+
+		y=YPLANE(data);
+		y2=y+_info.width;
+		v=VPLANE(data);
+		for(w= _info.height&gt;&gt;1;w&gt;0;w--)
+		{
+			for(x= _info.width&gt;&gt;1;x&gt;0;x--)
+			{
+				*y=*v;
+				*y2=*v;
+				*(y+1)=*v;
+				*(y2+1)=*v;
+				v++;
+				y+=2;
+				y2+=2;
+			}
+                	y+=_info.width;
+			y2+=_info.width;
+       		 }
+
+		 // Remove chroma u &amp; v
+		 memset(UPLANE(data),0x80,page&gt;&gt;2);
+		 memset(VPLANE(data),0x80,page&gt;&gt;2);
+}
+

Copied: branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidChroma.h (from rev 2489, branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidChroma.h)

Copied: branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidConvolution.hxx (from rev 2555, branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidConvolution.hxx)
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidConvolution.hxx	2006-11-11 14:10:10 UTC (rev 2555)
+++ branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidConvolution.hxx	2007-01-13 11:10:25 UTC (rev 2714)
@@ -0,0 +1,117 @@
+/***************************************************************************
+                          ADM_vidConvolution.hxx  -  description
+                             -------------------
+    begin                : Wed Apr 10 2002
+    copyright            : (C) 2002 by mean
+    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+ #ifndef __CONVPARAM__
+ #define __CONVPARAM__
+ typedef struct CONV_PARAM
+ {
+        uint32_t luma;
+        uint32_t chroma;
+  }CONV_PARAM;
+ #endif
+
+//---------------------------------------------------------
+ class  AVDMFastVideoConvolution:public AVDMGenericVideoStream
+ {
+
+ protected:
+
+	virtual uint8_t doLine(uint8_t *pred, uint8_t *cur, uint8_t *next, uint8_t *out, uint32_t w)
+                      { UNUSED_ARG(pred); UNUSED_ARG(cur); UNUSED_ARG(next); UNUSED_ARG(out); UNUSED_ARG(w); return 0;}
+        
+                CONV_PARAM	*_param;
+ public:
+#warning FIXME: string constants cannot be used as char
+                      virtual char     *printConf(void) { return const_cast&lt;char*&gt;(&quot;ERROR&quot;);};
+
+                                         AVDMFastVideoConvolution(  AVDMGenericVideoStream *in,CONFcouple *setup);
+                      virtual           ~AVDMFastVideoConvolution();
+                      virtual uint8_t   getFrameNumberNoAlloc(uint32_t frame, uint32_t *len,
+                                                      ADMImage *data,uint32_t *flags);
+                      virtual uint8_t	configure( AVDMGenericVideoStream *instream) ;
+
+                      virtual uint8_t	getCoupledConf( CONFcouple **couples);
+}     ;
+
+ class    AVDMFastVideoMean: public AVDMFastVideoConvolution
+ {
+        protected:
+            virtual uint8_t doLine(uint8_t  *pred,
+                                  uint8_t *cur,
+                                  uint8_t *next,
+                                  uint8_t *out,
+                                  uint32_t w)   ;
+
+        public:
+
+                              AVDMFastVideoMean(  AVDMGenericVideoStream *in,CONFcouple *setup) :
+                              AVDMFastVideoConvolution(  in,setup) {};
+              virtual char 	*printConf(void);
+
+	}      ;
+
+
+   class    AVDMFastVideoGauss: public AVDMFastVideoConvolution
+ {
+    protected:
+              virtual uint8_t 		doLine(uint8_t  *pred,
+                                              uint8_t *cur,
+                                              uint8_t *next,
+                                              uint8_t *out,
+                                              uint32_t w)   ;
+  
+		public:
+
+                                    AVDMFastVideoGauss(  AVDMGenericVideoStream *in,CONFcouple *setup) :
+                                    AVDMFastVideoConvolution(  in,setup) {};
+                    virtual char	*printConf(void);
+
+	}      ;
+     class    AVDMFastVideoSharpen: public AVDMFastVideoConvolution
+ {
+        protected:
+            virtual uint8_t 		doLine(uint8_t  *pred,
+                                                uint8_t *cur,
+                                                uint8_t *next,
+                                                uint8_t *out,
+                                                uint32_t w)   ;
+
+          public:
+
+                                      AVDMFastVideoSharpen(  AVDMGenericVideoStream *in,CONFcouple *setup) :
+                                      AVDMFastVideoConvolution(  in,setup) {};
+                              virtual char 		*printConf(void);	
+                      
+  }      ;
+
+  class    AVDMFastVideoMedian: public AVDMFastVideoConvolution
+ {
+        protected:
+          virtual uint8_t 	doLine(uint8_t  *pred,
+                                        uint8_t *cur,
+                                        uint8_t *next,
+                                        uint8_t *out,
+                                        uint32_t w)   ;
+
+        public:
+
+                                AVDMFastVideoMedian(  AVDMGenericVideoStream *in,CONFcouple *setup) :
+                                AVDMFastVideoConvolution(  in,setup) {};
+                  virtual char 	*printConf(void);
+ }      ;
+
+//EOF
+

Modified: branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidFastConvolution.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidFastConvolution.cpp	2007-01-13 10:49:01 UTC (rev 2713)
+++ branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidFastConvolution.cpp	2007-01-13 11:10:25 UTC (rev 2714)
@@ -24,18 +24,27 @@
 #include &quot;ADM_toolkit/toolkit.hxx&quot;
 #include &quot;ADM_editor/ADM_edit.hxx&quot;
 #include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_video/ADM_genvideo.hxx&quot;
 
-#include&quot;ADM_video/ADM_vidConvolution.hxx&quot;
+#include&quot;ADM_filter/video_filters.h&quot;
 #include &quot;ADM_userInterfaces/ADM_commonUI/DIA_factory.h&quot;
+#include &quot;ADM_vidConvolution.hxx&quot;
 #include &lt;ADM_assert.h&gt;
 
 
 BUILD_CREATE(mean_create,AVDMFastVideoMean);
 BUILD_CREATE(sharpen_create,AVDMFastVideoSharpen);
 BUILD_CREATE(Gaussian_create,AVDMFastVideoGauss);
+BUILD_CREATE(median_create,AVDMFastVideoMedian);
 
+static FILTER_PARAM convParam={2,{&quot;luma&quot;,&quot;chroma&quot;}};
 
+SCRIPT_CREATE(mean_script,AVDMFastVideoMean,convParam);
+SCRIPT_CREATE(sharpen_script,AVDMFastVideoSharpen,convParam);
+SCRIPT_CREATE(gaussian_script,AVDMFastVideoGauss,convParam);
+SCRIPT_CREATE(median_script,AVDMFastVideoMedian,convParam);
 
+
 uint8_t	AVDMFastVideoConvolution::getCoupledConf( CONFcouple **couples)
 {
 

Copied: branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidFlipV.cpp (from rev 2489, branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidFlipV.cpp)
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidFlipV.cpp	2006-10-31 15:59:58 UTC (rev 2489)
+++ branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidFlipV.cpp	2007-01-13 11:10:25 UTC (rev 2714)
@@ -0,0 +1,125 @@
+/***************************************************************************
+                          ADM_vidFlipV.cpp  -  description
+                             -------------------
+    begin                : Wed Nov 6 2002
+    copyright            : (C) 2002 by mean
+    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+ #include &lt;stdio.h&gt;
+#include &lt;stdlib.h&gt;
+#include &lt;string.h&gt;
+#include &lt;ADM_assert.h&gt;
+
+#include &quot;config.h&quot;
+#include &quot;fourcc.h&quot;
+#include &quot;avio.hxx&quot;
+#include &quot;config.h&quot;
+#include &quot;avi_vars.h&quot;
+#ifdef HAVE_ENCODER
+
+
+#include &quot;ADM_toolkit/toolkit.hxx&quot;
+#include &quot;ADM_editor/ADM_edit.hxx&quot;
+#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_vidFlipV.h&quot;
+#include &quot;ADM_filter/video_filters.h&quot;
+
+
+static FILTER_PARAM flipParam={0,{&quot;&quot;}};
+
+
+SCRIPT_CREATE(flipv_script,ADMVideoFlipV,flipParam);
+BUILD_CREATE(flipv_create,ADMVideoFlipV);
+ 
+
+char *ADMVideoFlipV::printConf( void )
+{
+ 	static char buf[50];
+ 	
+ 	sprintf((char *)buf,&quot; V-Flip&quot;);
+        return buf;
+}
+
+ADMVideoFlipV::ADMVideoFlipV(  AVDMGenericVideoStream *in,CONFcouple *setup)
+{
+    UNUSED_ARG(setup);
+ 	_in=in;		
+   	memcpy(&amp;_info,_in-&gt;getInfo(),sizeof(_info)); 	
+  	_info.encoding=1;	
+	_uncompressed=new ADMImage(_in-&gt;getInfo()-&gt;width,_in-&gt;getInfo()-&gt;height);
+	ADM_assert(_uncompressed);    	  	
+}
+ADMVideoFlipV::~ADMVideoFlipV()
+{
+ 	delete  _uncompressed;	
+	_uncompressed=NULL;
+  
+}
+uint8_t ADMVideoFlipV::getFrameNumberNoAlloc(uint32_t frame,
+				uint32_t *len,
+   				ADMImage *data,
+				uint32_t *flags)
+{
+
+	ADM_assert(frame&lt;_info.nb_frames);
+	// read uncompressed frame
+	if(!_in-&gt;getFrameNumberNoAlloc(frame, len,_uncompressed,flags)) return 0;
+
+         uint8_t *in,*out;
+         uint32_t stride=_info.width;
+         uint32_t h=_info.height;
+         uint32_t page,qpage;
+        
+
+	  
+         page=stride*h;
+         qpage=page&gt;&gt;2;
+         
+         in=YPLANE(_uncompressed);
+         out=YPLANE(data)+(h-1)*stride;
+         // flip y
+         for(uint32_t y=h;y&gt;0;y--)
+         {
+		 memcpy(out,in,stride);
+		 in+=stride;
+		 out-=stride;
+	}
+	// Flip U &amp; V			         
+        stride&gt;&gt;=1;
+	in=UPLANE(_uncompressed);	
+        out=UPLANE(data)+qpage-stride;
+         // flip u
+         for(uint32_t y=h&gt;&gt;1;y&gt;0;y--)
+         {
+		 memcpy(out,in,stride);
+		 in+=stride;
+		 out-=stride;
+	}
+	in=VPLANE(_uncompressed);
+        out=VPLANE(data)+qpage-stride;
+       
+      
+         // flip u
+         for(uint32_t y=h&gt;&gt;1;y&gt;0;y--)
+         {
+		 memcpy(out,in,stride);
+		 in+=stride;
+		 out-=stride;
+	}   
+	data-&gt;copyInfo(_uncompressed);
+	return 1;
+}
+
+
+
+#endif

Copied: branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidFlipV.h (from rev 2489, branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidFlipV.h)

Copied: branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidLargeMedian.cpp (from rev 2545, branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidLargeMedian.cpp)
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidLargeMedian.cpp	2006-11-04 15:58:52 UTC (rev 2545)
+++ branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidLargeMedian.cpp	2007-01-13 11:10:25 UTC (rev 2714)
@@ -0,0 +1,311 @@
+/***************************************************************************
+                          ADM_vidLargeMedian.cpp  -  description
+                             -------------------
+    begin                : Wed Jan 1 2003
+    copyright            : (C) 2003 by mean
+    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
+    
+    Using <A HREF="http://ndevilla.free.fr/median/median/node20.html">http://ndevilla.free.fr/median/median/node20.html</A>
+    optimized median search
+    
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#include &lt;stdio.h&gt;
+#include &lt;stdlib.h&gt;
+#include &lt;string.h&gt;
+#include &lt;ADM_assert.h&gt;
+
+#include &quot;config.h&quot;
+#include &quot;fourcc.h&quot;
+#include &quot;avio.hxx&quot;
+#include &quot;config.h&quot;
+#include &quot;avi_vars.h&quot;
+#ifdef HAVE_ENCODER
+
+
+#include &quot;ADM_toolkit/toolkit.hxx&quot;
+#include &quot;ADM_editor/ADM_edit.hxx&quot;
+#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+
+#include&quot;ADM_vidLargeMedian.h&quot;
+#include &quot;ADM_filter/video_filters.h&quot;
+
+
+static FILTER_PARAM nullParam={2,{&quot;chroma&quot;,&quot;luma&quot;}};
+
+
+SCRIPT_CREATE(largeMedian_script,ADMVideoLargeMedian,nullParam);
+BUILD_CREATE(largeMedian_create,ADMVideoLargeMedian);
+
+//_______________________________________________________________
+
+ADMVideoLargeMedian::ADMVideoLargeMedian(
+									AVDMGenericVideoStream *in,CONFcouple *couples)
+{
+
+
+	_in=in;		
+	memcpy(&amp;_info,_in-&gt;getInfo(),sizeof(_info));  		
+	_uncompressed=new ADMImage(_in-&gt;getInfo()-&gt;width,_in-&gt;getInfo()-&gt;height);
+	ADM_assert(_uncompressed);
+	_info.encoding=1;
+	if(couples==NULL)
+	{
+		_param=NEW( CONV_PARAM);
+		_param-&gt;chroma=1;
+		_param-&gt;luma=1;
+		printf(&quot;\n Creating from null\n&quot;);
+	}
+	else
+	{
+			_param=NEW(CONV_PARAM);
+			GET(luma);
+			GET(chroma);
+	}
+
+
+}
+
+uint8_t	ADMVideoLargeMedian::getCoupledConf( CONFcouple **couples)
+{
+
+			ADM_assert(_param);
+			*couples=new CONFcouple(2);
+
+#define CSET(x)  (*couples)-&gt;setCouple((char *)#x,(_param-&gt;x))
+			CSET(luma);
+			CSET(chroma);
+			return 1;
+
+}
+ADMVideoLargeMedian::~ADMVideoLargeMedian()
+{
+	if(_uncompressed)
+ 		delete _uncompressed;
+	_uncompressed=NULL;
+	DELETE(_param);
+}
+char *ADMVideoLargeMedian::printConf(void)
+{
+ 		return (char *)&quot;Median (5x5)&quot;;; // this one is pure
+}
+//
+//	Basically ask a uncompressed frame from editor and ask
+//		GUI to decompress it .
+//
+
+uint8_t ADMVideoLargeMedian::getFrameNumberNoAlloc(uint32_t frame,
+				uint32_t *len,
+   				ADMImage *data,
+				uint32_t *flags)
+{
+//uint8_t *dst,*dstu,*dstv,*srcu,*srcv;
+uint8_t *x1,*x2,*x3,*x4,*x5,*o1;
+uint32_t stride,page;
+
+	ADM_assert(frame&lt;_info.nb_frames);
+	ADM_assert(_uncompressed);					
+	stride=_info.width;
+	page=(stride*_info.height)&gt;&gt;2;
+																
+	// read uncompressed frame
+	if(!_in-&gt;getFrameNumberNoAlloc(frame, len,_uncompressed,flags)) return 0;               
+         
+	if(!_param-&gt;luma)
+	{
+		memcpy(YPLANE(data),YPLANE(_uncompressed),page*4);						
+	}
+	else
+	{
+		memcpy(YPLANE(data),YPLANE(_uncompressed),stride*2);
+		memcpy(YPLANE(data)+page*4-stride*2,YPLANE(_uncompressed)+page*4-2*stride,2*stride);          
+	         
+		o1=YPLANE(data)+stride*2;;
+		x1=YPLANE(_uncompressed);
+		x2=x1+stride;
+		x3=x2+stride;
+		x4=x3+stride;
+		x5=x4+stride;
+		// Luma
+		for(int32_t y=2;y&lt;(int32_t)(_info.height)-2;y++)
+		{
+			doLine(x1,x2,x3,x4,x5,o1,stride);
+			x1=x2;
+			x2=x3;
+			x3=x4;
+			x4=x5;
+			x5+=stride; 
+			o1+=stride;                 
+		}
+	}
+					
+      	
+	stride&gt;&gt;=1;
+	if(!_param-&gt;chroma)
+	{
+	 	memcpy(UPLANE(data),UPLANE(_uncompressed),page*2);			
+	}	
+	else
+	{
+		// first and last line
+		memcpy(UPLANE(data),UPLANE(_uncompressed),stride*2);
+		memcpy(UPLANE(data)+page-stride*2,UPLANE(_uncompressed)+page-2*stride,2*stride);
+		// chroma u	
+		o1=UPLANE(data)+stride*2;
+		x1=UPLANE(_uncompressed);
+		x2=x1+stride;
+		x3=x2+stride;
+		x4=x3+stride;
+		x5=x4+stride;
+	          
+		for(int32_t y=2;y&lt;(int32_t)(_info.height&gt;&gt;1)-2;y++)
+		{
+			doLine(x1,x2,x3,x4,x5,o1,stride);
+			x1=x2;
+			x2=x3;
+			x3=x4;
+			x4=x5;
+			x5+=stride; 
+			o1+=stride;                 
+		}
+		// chroma V
+		// first and last line
+		memcpy(VPLANE(data),VPLANE(_uncompressed),stride*2);
+		memcpy(VPLANE(data)+page-2*stride,VPLANE(_uncompressed)+page-2*stride,2*stride);          
+	          
+		o1=VPLANE(data)+stride*2;
+		x1=VPLANE(_uncompressed);
+		x2=x1+stride;
+		x3=x2+stride;
+		x4=x3+stride;
+		x5=x4+stride;
+
+	         
+		for(int32_t y=2;y&lt;(int32_t)(_info.height&gt;&gt;1)-2;y++)
+		{
+			doLine(x1,x2,x3,x4,x5,o1,stride);
+			x1=x2;
+			x2=x3;
+			x3=x4;
+			x4=x5;
+			x5+=stride; 
+			o1+=stride;                      
+	      	}
+	}
+	data-&gt;copyInfo(_uncompressed);
+	return 1;
+}
+//________________________________________________________________________
+uint8_t ADMVideoLargeMedian::doLine(uint8_t  *pred2,uint8_t  *pred1,
+					uint8_t *cur,
+   					uint8_t *next1,uint8_t *next2,
+   					uint8_t *out,
+                       			uint32_t w)
+                                 
+{
+static uint8_t box[5][5];	
+static uint8_t box2[5][5];	
+
+uint32_t col;
+uint8_t temp;
+uint32_t inbox;
+	
+// prefill box
+	for(uint32_t x=0;x&lt;4;x++)
+		{
+			box[0][x+1]=*(pred2+x);
+			box[1][x+1]=*(pred1+x);
+			box[2][x+1]=*(cur+x);
+			box[3][x+1]=*(next1+x);
+			box[4][x+1]=*(next2+x);			
+		}
+		col=0;
+		*out=*cur;
+		*(out+1)=*(cur+1);
+		*(out+w-1)=*(cur+w-1);		
+		*(out+w-2)=*(cur+w-2);
+		out+=2;
+		next1+=4;
+		next2+=4;
+		pred1+=4;
+		pred2+=4;
+		cur+=4;	
+	while(w&gt;4)
+	{
+		// fill
+			box[0][col]=*pred2++;
+			box[1][col]=*pred1++;
+			box[2][col]=*cur++;
+			box[3][col]=*next1++;
+			box[4][col]=*next2++;
+			col++;
+			col%=5;
+			// copy &amp; sort
+			memcpy(box2,box,5*5);
+			uint8_t *p=(uint8_t *)box2;	
+			inbox=0;	
+#define PIX_SORT(a,b) { if ((a)&gt;(b)) PIX_SWAP((a),(b)); }
+#define PIX_SWAP(a,b) { temp=(a);(a)=(b);(b)=temp; }
+
+			
+    PIX_SORT(p[0], p[1]) ;   PIX_SORT(p[3], p[4]) ;   PIX_SORT(p[2], p[4]) ;
+    PIX_SORT(p[2], p[3]) ;   PIX_SORT(p[6], p[7]) ;   PIX_SORT(p[5], p[7]) ;
+    PIX_SORT(p[5], p[6]) ;   PIX_SORT(p[9], p[10]) ;  PIX_SORT(p[8], p[10]) ;
+    PIX_SORT(p[8], p[9]) ;   PIX_SORT(p[12], p[13]) ; PIX_SORT(p[11], p[13]) ;
+    PIX_SORT(p[11], p[12]) ; PIX_SORT(p[15], p[16]) ; PIX_SORT(p[14], p[16]) ;
+    PIX_SORT(p[14], p[15]) ; PIX_SORT(p[18], p[19]) ; PIX_SORT(p[17], p[19]) ;
+    PIX_SORT(p[17], p[18]) ; PIX_SORT(p[21], p[22]) ; PIX_SORT(p[20], p[22]) ;
+    PIX_SORT(p[20], p[21]) ; PIX_SORT(p[23], p[24]) ; PIX_SORT(p[2], p[5]) ;
+    PIX_SORT(p[3], p[6]) ;   PIX_SORT(p[0], p[6]) ;   PIX_SORT(p[0], p[3]) ;
+    PIX_SORT(p[4], p[7]) ;   PIX_SORT(p[1], p[7]) ;   PIX_SORT(p[1], p[4]) ;
+    PIX_SORT(p[11], p[14]) ; PIX_SORT(p[8], p[14]) ;  PIX_SORT(p[8], p[11]) ;
+    PIX_SORT(p[12], p[15]) ; PIX_SORT(p[9], p[15]) ;  PIX_SORT(p[9], p[12]) ;
+    PIX_SORT(p[13], p[16]) ; PIX_SORT(p[10], p[16]) ; PIX_SORT(p[10], p[13]) ;
+    PIX_SORT(p[20], p[23]) ; PIX_SORT(p[17], p[23]) ; PIX_SORT(p[17], p[20]) ;
+    PIX_SORT(p[21], p[24]) ; PIX_SORT(p[18], p[24]) ; PIX_SORT(p[18], p[21]) ;
+    PIX_SORT(p[19], p[22]) ; PIX_SORT(p[8], p[17]) ;  PIX_SORT(p[9], p[18]) ;
+    PIX_SORT(p[0], p[18]) ;  PIX_SORT(p[0], p[9]) ;   PIX_SORT(p[10], p[19]) ;
+    PIX_SORT(p[1], p[19]) ;  PIX_SORT(p[1], p[10]) ;  PIX_SORT(p[11], p[20]) ;
+    PIX_SORT(p[2], p[20]) ;  PIX_SORT(p[2], p[11]) ;  PIX_SORT(p[12], p[21]) ;
+    PIX_SORT(p[3], p[21]) ;  PIX_SORT(p[3], p[12]) ;  PIX_SORT(p[13], p[22]) ;
+    PIX_SORT(p[4], p[22]) ;  PIX_SORT(p[4], p[13]) ;  PIX_SORT(p[14], p[23]) ;
+    PIX_SORT(p[5], p[23]) ;  PIX_SORT(p[5], p[14]) ;  PIX_SORT(p[15], p[24]) ;
+    PIX_SORT(p[6], p[24]) ;  PIX_SORT(p[6], p[15]) ;  PIX_SORT(p[7], p[16]) ;
+    PIX_SORT(p[7], p[19]) ;  PIX_SORT(p[13], p[21]) ; PIX_SORT(p[15], p[23]) ;
+    PIX_SORT(p[7], p[13]) ;  PIX_SORT(p[7], p[15]) ;  PIX_SORT(p[1], p[9]) ;
+    PIX_SORT(p[3], p[11]) ;  PIX_SORT(p[5], p[17]) ;  PIX_SORT(p[11], p[17]) ;
+    PIX_SORT(p[9], p[17]) ;  PIX_SORT(p[4], p[10]) ;  PIX_SORT(p[6], p[12]) ;
+    PIX_SORT(p[7], p[14]) ;  PIX_SORT(p[4], p[6]) ;   PIX_SORT(p[4], p[7]) ;
+    PIX_SORT(p[12], p[14]) ; PIX_SORT(p[10], p[14]) ; PIX_SORT(p[6], p[7]) ;
+    PIX_SORT(p[10], p[12]) ; PIX_SORT(p[6], p[10]) ;  PIX_SORT(p[6], p[17]) ;
+    PIX_SORT(p[12], p[17]) ; PIX_SORT(p[7], p[17]) ;  PIX_SORT(p[7], p[10]) ;
+    PIX_SORT(p[12], p[18]) ; PIX_SORT(p[7], p[12]) ;  PIX_SORT(p[10], p[18]) ;
+    PIX_SORT(p[12], p[20]) ; PIX_SORT(p[10], p[20]) ; PIX_SORT(p[10], p[12]) ;
+			
+		  
+		  *out++=p[12];
+		  w--;
+	}	
+	
+	return 1;
+}
+
+uint8_t ADMVideoLargeMedian::configure(AVDMGenericVideoStream * instream)
+{
+  return 1; 
+}
+
+
+
+#endif
+
+

Copied: branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidLargeMedian.h (from rev 2489, branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidLargeMedian.h)

Copied: branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidLuma.cpp (from rev 2489, branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidLuma.cpp)
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidLuma.cpp	2006-10-31 15:59:58 UTC (rev 2489)
+++ branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidLuma.cpp	2007-01-13 11:10:25 UTC (rev 2714)
@@ -0,0 +1,98 @@
+/***************************************************************************
+                          ADM_vidLuma.cpp  -  description
+                             -------------------
+    begin                : Sat Aug 24 2002
+    copyright            : (C) 2002 by mean
+    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+ #include &lt;stdio.h&gt;
+#include &lt;stdlib.h&gt;
+#include &lt;string.h&gt;
+#include &lt;ADM_assert.h&gt;
+
+#include &quot;config.h&quot;
+#include &quot;fourcc.h&quot;
+#include &quot;avio.hxx&quot;
+#include &quot;config.h&quot;
+#include &quot;avi_vars.h&quot;
+#ifdef HAVE_ENCODER
+
+
+#include &quot;ADM_toolkit/toolkit.hxx&quot;
+#include &quot;ADM_editor/ADM_edit.hxx&quot;
+#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_vidLuma.h&quot;
+#include &quot;ADM_filter/video_filters.h&quot;
+
+
+static FILTER_PARAM nullParam={0,{&quot;&quot;}};
+
+
+SCRIPT_CREATE(luma_script,ADMVideoLuma,nullParam);
+BUILD_CREATE(luma_create,ADMVideoLuma);
+
+ 
+
+char *ADMVideoLuma::printConf( void )
+{
+ 	static char buf[50];
+ 	
+ 	sprintf((char *)buf,&quot; Luma only&quot;);
+        return buf;
+}
+
+ADMVideoLuma::ADMVideoLuma(  AVDMGenericVideoStream *in,CONFcouple *setup)
+{
+
+ 	_in=in;		
+   	memcpy(&amp;_info,_in-&gt;getInfo(),sizeof(_info));  		
+	
+		if(setup)
+		{
+			 _param=(void *)setup;
+		}	
+			else 			
+		{	// default parameter	
+				_param= NULL;
+		}				
+					 	
+  _info.encoding=1;
+
+  	  	
+}
+ADMVideoLuma::~ADMVideoLuma()
+{
+ 	
+}
+uint8_t ADMVideoLuma::getFrameNumberNoAlloc(uint32_t frame,
+				uint32_t *len,
+   				ADMImage *data,
+				uint32_t *flags)
+{
+
+	ADM_assert(frame&lt;_info.nb_frames);
+	// read uncompressed frame
+	if(!_in-&gt;getFrameNumberNoAlloc(frame, len,data,flags)) return 0;
+
+	uint32_t sz;
+			
+	sz=_info.width*_info.height;
+	memset(UPLANE(data),128,sz&gt;&gt;2);
+	memset(VPLANE(data),128,sz&gt;&gt;2);
+
+      return 1;
+}
+
+
+
+#endif

Copied: branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidLuma.h (from rev 2489, branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidLuma.h)

Modified: branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidResampleFPS.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidResampleFPS.cpp	2007-01-13 10:49:01 UTC (rev 2713)
+++ branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidResampleFPS.cpp	2007-01-13 11:10:25 UTC (rev 2714)
@@ -33,7 +33,6 @@
 #include &quot;ADM_toolkit/toolkit.hxx&quot;
 #include &quot;ADM_editor/ADM_edit.hxx&quot;
 #include &quot;ADM_video/ADM_genvideo.hxx&quot;
-#include &quot;ADM_video/ADM_vidFlipV.h&quot;
 #include &quot;ADM_filter/video_filters.h&quot;
 #include &quot;DIA_enter.h&quot;
 #include &quot;ADM_video/ADM_cache.h&quot;

Modified: branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/Makefile.am
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/Makefile.am	2007-01-13 10:49:01 UTC (rev 2713)
+++ branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/Makefile.am	2007-01-13 11:10:25 UTC (rev 2714)
@@ -7,6 +7,10 @@
 #INCLUDES = $(all_includes) 
 
 libADM_videoFilter_a_SOURCES =  \
+ ADM_vidFlipV.cpp \
+ ADM_vidLuma.cpp \
+ ADM_vidLargeMedian.cpp \
+ ADM_vidChroma.cpp \
  ADM_vidMosaic.cpp \
  ADM_vidBlendRemoval.cpp  \
  ADM_vidHardIvtcRemoval.cpp \


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000041.html">[Avidemux-svn-commit] r2713 -	branches/avidemux_2.4_branch/avidemux/ADM_video
</A></li>
	<LI>Next message: <A HREF="000043.html">[Avidemux-svn-commit] r2715 - in	branches/avidemux_2.4_branch/avidemux: ADM_video ADM_videoFilter
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42">[ date ]</a>
              <a href="thread.html#42">[ thread ]</a>
              <a href="subject.html#42">[ subject ]</a>
              <a href="author.html#42">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">More information about the Avidemux-svn-commit
mailing list</a><br>
</body></html>
