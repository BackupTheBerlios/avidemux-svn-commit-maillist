<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Avidemux-svn-commit] r2715 - in	branches/avidemux_2.4_branch/avidemux: ADM_video ADM_videoFilter
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/avidemux-svn-commit/2007-January/index.html" >
   <LINK REL="made" HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r2715%20-%20in%0A%09branches/avidemux_2.4_branch/avidemux%3A%20ADM_video%20ADM_videoFilter&In-Reply-To=%3C200701131131.l0DBVIT2024720%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000042.html">
   <LINK REL="Next"  HREF="000044.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Avidemux-svn-commit] r2715 - in	branches/avidemux_2.4_branch/avidemux: ADM_video ADM_videoFilter</H1>
    <B>mean at BerliOS</B> 
    <A HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r2715%20-%20in%0A%09branches/avidemux_2.4_branch/avidemux%3A%20ADM_video%20ADM_videoFilter&In-Reply-To=%3C200701131131.l0DBVIT2024720%40sheep.berlios.de%3E"
       TITLE="[Avidemux-svn-commit] r2715 - in	branches/avidemux_2.4_branch/avidemux: ADM_video ADM_videoFilter">mean at mail.berlios.de
       </A><BR>
    <I>Sat Jan 13 12:31:18 CET 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000042.html">[Avidemux-svn-commit] r2714 - in	branches/avidemux_2.4_branch/avidemux:	ADM_userInterfaces/ADM_GTK ADM_video ADM_videoFilter
</A></li>
        <LI>Next message: <A HREF="000044.html">[Avidemux-svn-commit] r2716 -	branches/avidemux_2.4_branch/avidemux/ADM_video
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43">[ date ]</a>
              <a href="thread.html#43">[ thread ]</a>
              <a href="subject.html#43">[ subject ]</a>
              <a href="author.html#43">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: mean
Date: 2007-01-13 12:31:17 +0100 (Sat, 13 Jan 2007)
New Revision: 2715

Added:
   branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidDropOut.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidDropOut.h
   branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidPulldown.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidPulldown.h
   branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidStabilize.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidStabilize.h
   branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidUVSwap.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidUVSwap.h
   branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidVlad.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidVlad.h
   branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidWhirl.cpp
Removed:
   branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidDropOut.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidDropOut.h
   branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidPulldown.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidPulldown.h
   branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidStabilize.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidStabilize.h
   branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidUVSwap.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidUVSwap.h
   branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidVlad.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidVlad.h
   branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidWirl.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidlavdeint.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidlavdeint.h
Modified:
   branches/avidemux_2.4_branch/avidemux/ADM_video/Makefile.am
   branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidBlendRemoval.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/Makefile.am
Log:
cleanup

Deleted: branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidDropOut.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidDropOut.cpp	2007-01-13 11:10:25 UTC (rev 2714)
+++ branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidDropOut.cpp	2007-01-13 11:31:17 UTC (rev 2715)
@@ -1,230 +0,0 @@
-/***************************************************************************
-                          ADM_vidDropOut.cpp  -  description
-                             -------------------
-    begin                : Mon Oct 7 2002
-    copyright            : (C) 2002 by Ron Reithoffer 
-    email                : &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">ron.reithoffer at chello.at</A>&gt;
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#include &lt;stdio.h&gt;
-#include &lt;stdlib.h&gt;
-#include &lt;string.h&gt;
-#include &lt;ADM_assert.h&gt;
-#include &lt;math.h&gt;
-
-#include &quot;config.h&quot;
-#include &quot;fourcc.h&quot;
-#include &quot;avio.hxx&quot;
-#include &quot;config.h&quot;
-#include &quot;avi_vars.h&quot;
-#ifdef HAVE_ENCODER
-
-
-#include &quot;ADM_toolkit/toolkit.hxx&quot;
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
-#include &quot;ADM_video/ADM_vidDropOut.h&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
-
-
-static FILTER_PARAM dropParam={1,{&quot;threshold&quot;}};
-
-
-SCRIPT_CREATE(dropout_script,ADMVideoDropOut,dropParam);
-
-
-//extern uint8_t distMatrix[256][256];
-extern uint32_t fixMul[16];
-
-BUILD_CREATE(dropout_create,ADMVideoDropOut);
-//_______________________________________________________________
- 
-
-char  *ADMVideoDropOut::printConf(void)
-{
-	static char buf[50];
-
- 	sprintf((char *)buf,&quot; DropOut :%ld&quot;,*_param);
-        return buf;
-}
-uint8_t  GUI_getIntegerValue(int *valye, int min, int max, char *title);	
-uint8_t ADMVideoDropOut::configure(AVDMGenericVideoStream *instream)
-{
-int i;
-
-	_in=instream;
-	i=(int)*_param;
-	if(GUI_getIntegerValue(&amp;i,1,255,&quot;DropOut Threshold&quot;))
-	{
-		*_param=(uint32_t)i;
-		return 1;
-	}
-	return 0;
-}
-ADMVideoDropOut::~ADMVideoDropOut()
-{
-	DELETE(_param);
-	delete vidCache;
-	vidCache=NULL;
-}
-
-//--------------------------------------------------------	
-ADMVideoDropOut::ADMVideoDropOut(AVDMGenericVideoStream *in,CONFcouple *couples)
-{
-
-  
-	_in=in;
-  	_info.encoding=1;
-	if(couples)
-	{
-  		_param=NEW( uint32_t);
-		couples-&gt;getCouple((char *)&quot;threshold&quot;,(uint32_t *)_param);
-	}
-	else
-	{
-		_param=NEW( uint32_t);
-		*_param=30;
-	}
-	vidCache=new VideoCache(4,_in);
-	memcpy(&amp;_info,_in-&gt;getInfo(),sizeof(_info));
-	
- 
-}
-
-uint8_t	ADMVideoDropOut::getCoupledConf( CONFcouple **couples)
-{
-
-			ADM_assert(_param);
-			*couples=new CONFcouple(1);
-			(*couples)-&gt;setCouple((char *)&quot;threshold&quot;,(*_param));
-			return 1;
-
-}
-
-//                     1
-//		Get in range in 121 + coeff matrix
-//                     1
-//
-// If the value is too far away we ignore it
-// else we blend
-
-uint8_t ADMVideoDropOut::getFrameNumberNoAlloc(uint32_t frame,
-				uint32_t *len,
-   				ADMImage *data,
-				uint32_t *flags)
-{
-UNUSED_ARG(flags);
-
-uint32_t uvlen;
-uint32_t dlen,dflags;
-
-ADMImage	*_next;
-ADMImage	*_previous;
-ADMImage	*_current;
-
-	//		printf(&quot;\n DropOut : %lu\n&quot;,frame);
-
-
-
-
-			uvlen=    _info.width*_info.height;
-			*len=uvlen+(uvlen&gt;&gt;1);
-			  if(frame&gt; _info.nb_frames-1) return 0;
-			if(!frame || (frame==_info.nb_frames-1))
-			{
-				_current=vidCache-&gt;getImage(frame);
-				if(!_current) return 0;
-				memcpy(YPLANE(data),YPLANE(_current),uvlen);
-				memcpy(UPLANE(data),UPLANE(_current),uvlen&gt;&gt;2);
-				memcpy(VPLANE(data),VPLANE(_current),uvlen&gt;&gt;2);
-				vidCache-&gt;unlockAll();
-				return 1;
-			}
-			
-		_current=vidCache-&gt;getImage(frame);
-		_previous=vidCache-&gt;getImage(frame-1);
-		_next=vidCache-&gt;getImage(frame+1);
-		if(!_current || !_previous || !_next)
-		{
-			vidCache-&gt;unlockAll();
-			 return 0;	
-		}
-           	// for u &amp; v , no action -&gt; copy it as is
-           	memcpy(UPLANE(data),UPLANE(_current),uvlen&gt;&gt;2);
-		memcpy(VPLANE(data),VPLANE(_current),uvlen&gt;&gt;2);
-
-             uint8_t *inprev,*innext,*incur,*zout;
-
-              inprev=YPLANE(_previous)+1+_info.width;
-              innext=YPLANE(_next)+1+_info.width;
-              incur =YPLANE(_current)+1+_info.width;
-
-              zout=YPLANE(data)+_info.width+1;
-
-              int32_t c0,c1,c2,c3; //,_nextPix,_currPix,_prevPix,cc;
-
-              for(uint32_t y= _info.height-2;y&gt;2;y--)
-              	{
-		  c0=0;
-		  c1=0;
-		  c2=0;
-		  c3=0;
-
-	  	inprev=YPLANE(_previous)	+1+y*_info.width;
-              	innext=YPLANE(_next)		+1+y*_info.width;;
-              	incur =YPLANE(_current)	+1+y*_info.width;;
-
-			// look if the field is more different temporarily than spacially
-
-			    for(uint32_t x= _info.width-1;x&gt;1;x--)
-        		      	{
-
-						c0+=(abs(((*inprev))-( *incur    ))^2);
-						c1+=(abs(((*inprev))-( *innext   ))^2)&lt;&lt;1;
-						c0+=(abs(((*incur ))-( *innext   ))^2);
-
-
-						c2+=(abs(((    *(incur-_info.width*2) ))-( *(incur            )   ))^2)   ;
-						c3+=(abs(((    *(incur-_info.width*2) ))-( *(incur+_info.width*2)   ))^2)&lt;&lt;1;
-						c2+=(abs(((    *(incur            ) ))-( *(incur+_info.width*2)   ))^2)   ;
-
-
-						incur++;
-						innext++;
-						inprev++;
-				}
-
-		// If yes, replace the line by an average of next/previous image
-		inprev=YPLANE(_previous)	+y*_info.width;
-              	innext=YPLANE(_next)		+y*_info.width;;
-              	incur =YPLANE(_current)		+y*_info.width;;
-		zout=YPLANE(data)		+y*_info.width;
-
-		if (c1&lt;c0 &amp;&amp;c3&lt;c2)
-		{
-		    for(uint32_t x= _info.width;x&gt;0;x--)
-       			      	{
-					*zout= ((*(inprev))+(*(innext)))&gt;&gt;1 ;
-					zout++;
-					innext++;
-					inprev++;
-				}
-		}
-		else
-			memcpy(zout,incur,_info.width);
-	}
-	data-&gt;copyInfo(_current);
-	vidCache-&gt;unlockAll();
-return 1;
-}
-
-
-#endif

Deleted: branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidDropOut.h
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidDropOut.h	2007-01-13 11:10:25 UTC (rev 2714)
+++ branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidDropOut.h	2007-01-13 11:31:17 UTC (rev 2715)
@@ -1,41 +0,0 @@
-/***************************************************************************
-                          ADM_vidDropOut.h  -  description
-                             -------------------
-    begin                : Mon Oct 7 2002
-    copyright            : (C) 2002 by mean
-    email                : RON
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#ifndef __DROPOUT__
-#define __DROPOUT__   
-#include &quot;ADM_video/ADM_cache.h&quot;
- 
-class  ADMVideoDropOut:public AVDMGenericVideoStream
- {
-
- protected:
-
-        virtual char 				*printConf(void) ;
-						VideoCache	*vidCache;
-	 uint32_t				*_param;
- public:
- 					
-  						ADMVideoDropOut(  AVDMGenericVideoStream *in,CONFcouple *setup);
-  						~ADMVideoDropOut();
-		      virtual uint8_t 	getFrameNumberNoAlloc(uint32_t frame, uint32_t *len,
-          									ADMImage *data,uint32_t *flags);
-
-			virtual uint8_t configure( AVDMGenericVideoStream *instream) ;
-			virtual uint8_t getCoupledConf( CONFcouple **couples);
-
- }     ;
- 
-#endif

Deleted: branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidPulldown.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidPulldown.cpp	2007-01-13 11:10:25 UTC (rev 2714)
+++ branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidPulldown.cpp	2007-01-13 11:31:17 UTC (rev 2715)
@@ -1,183 +0,0 @@
-/***************************************************************************
-                       Pulldown : Duplicate frame fields to convert
-		       	24 fps to 30 fps movie
-
-			1 2 3 4       1  2  3  4  4
-			1 2 3 4 --&gt; 1  2  2  3  4
-
-
-    begin                : Thu Mar 21 2002
-    copyright            : (C) 2002 by mean
-    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-#include &lt;stdio.h&gt;
-#include &lt;stdlib.h&gt;
-#include &lt;string.h&gt;
-#include &lt;ADM_assert.h&gt;
-
-#include &quot;config.h&quot;
-#include &quot;fourcc.h&quot;
-#include &quot;avio.hxx&quot;
-#include &quot;config.h&quot;
-#include &quot;avi_vars.h&quot;
-
-
-#include &quot;ADM_toolkit/toolkit.hxx&quot;
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
-#include &quot;ADM_video/ADM_vidFieldUtil.h&quot;
-#include &quot;ADM_video/ADM_vidPulldown.h&quot;
-#include &quot;ADM_video/ADM_interlaced.h&quot;
-#include &quot;ADM_osSupport/TLK_clock.h&quot;
-#include &quot;ADM_osSupport/ADM_debugID.h&quot;
-#define MODULE_NAME MODULE_FILTER
-#include &quot;ADM_osSupport/ADM_debug.h&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
-
-
-static FILTER_PARAM swapParam={0,{&quot;&quot;}};
-SCRIPT_CREATE(pulldown_script,ADMVideoPullDown,swapParam);
-BUILD_CREATE(pulldown_create,ADMVideoPullDown);
-
-char *ADMVideoPullDown::printConf( void )
-{
- 	static char buf[50];
-
- 	sprintf((char *)buf,&quot; Pulldown&quot;);
-        return buf;
-}
-//_______________________________________________________________
-ADMVideoPullDown::ADMVideoPullDown(
-									AVDMGenericVideoStream *in,CONFcouple *setup)
-{
-UNUSED_ARG(setup);
-  	_in=in;
-   	memcpy(&amp;_info,_in-&gt;getInfo(),sizeof(_info));
-	_info.fps1000=(_info.fps1000*5)/4;
-	_info.nb_frames=(_info.nb_frames*5)/4;
-	for(uint32_t i=0;i&lt;5;i++)
-	{
-		_uncompressed[i]=new ADMImage(_info.width,_info.height);
-	}
-	_cacheStart=0xfffffff;
-}
-// ___ destructor_____________
-ADMVideoPullDown::~ADMVideoPullDown()
-{
-	for(uint32_t i=0;i&lt;5;i++)
-	{
- 		delete  _uncompressed[i];
-	}
-}
-
-
-uint8_t ADMVideoPullDown::getFrameNumberNoAlloc(uint32_t frame,
-				uint32_t *len,
-   				ADMImage *data,
-				uint32_t *flags)
-{
-//static Image in,out;
-			if(frame&gt;=_info.nb_frames)
-			{
-				printf(&quot;out of bound frame (%lu / %lu)\n&quot;,frame,_info.nb_frames);
-				return 0;
-			}
-
-		uint32_t w=_info.width;
-		uint32_t h=_info.height;
-		uint32_t page=w*h;
-		uint32_t i;
-
-		uint32_t target;
-		uint32_t loop=0;
-
-		*len=(page*3)&gt;&gt;1;
-
-cont:
-
-		target=frame-((frame)%5);
-		// got it ?
-		if(_cacheStart==target)
-		{
-			uint32_t index;
-
-			aprintf(&quot;Filter: It is in cache...(cachestart=%lu)\n&quot;,_cacheStart);
-			index=frame%5;
-			aprintf(&quot;getting %lu)\n&quot;,index);
-			memcpy(YPLANE(data),YPLANE(_uncompressed[index]),page);
-			memcpy(UPLANE(data),UPLANE(_uncompressed[index]),page&gt;&gt;2);
-			memcpy(VPLANE(data),VPLANE(_uncompressed[index]),page&gt;&gt;2);
-			*flags=0;			
-			return 1;
-		}
-		else
-		{
-			aprintf(&quot;Not in cache...\n&quot;);
-		}
-		// Else ask the 5 corresponding frame
-		_cacheStart=target;
-		target=(target*4)/5;
-
-		uint32_t dflags,dlen;
-#define GET_FRAME(x,y) if(!_in-&gt;getFrameNumberNoAlloc(x, &amp;dlen,_uncompressed[y],&amp;dflags)) \
- {\
-				 	 	printf(&quot;Cannot get frame %lu\n&quot;,target+i);\
-					 	return 0;     \
-				 }
-
-		GET_FRAME(target+0,0);
-		GET_FRAME(target+1,1);
-		GET_FRAME(target+2,3);
-		GET_FRAME(target+3,4);
-		// copy chroma 1-&gt;2
-		memcpy(UPLANE(_uncompressed[2]),UPLANE(_uncompressed[1]),page&gt;&gt;2);
-		memcpy(VPLANE(_uncompressed[2]),VPLANE(_uncompressed[1]),page&gt;&gt;2);
-#define COPY_FIELD \
-		for(uint32_t y=0;y&lt;_info.height&gt;&gt;1;y++) \
-		{ \
-			memcpy(out,in,_info.width); \
-			in+=_info.width&lt;&lt;1; \
-			out+=_info.width&lt;&lt;1; \
-		}
-
-		// now we merge 1 &amp; 3 into 2
-
-		uint8_t *in,*out;
-		in=YPLANE(_uncompressed[1]);
-		out=YPLANE(_uncompressed[2]);
-		COPY_FIELD;
-
-
-		// merge 3-&gt;2
-		//
-		//	0 1 x 2 3
-		//      0 1 x 2 3
-		//
-		//  0 1 1 2 3
-		//  0 1 X 2 3
-		in=YPLANE(_uncompressed[3])+w;
-		out=YPLANE(_uncompressed[2])+w;
-		COPY_FIELD;
-		//  0 1 1 2 3
-		//  0 1 2 2 3
-		in=YPLANE(_uncompressed[4])+w;
-		out=YPLANE(_uncompressed[3])+w;
-		//  0 1 1 2 3
-		//  0 1 2 3 3
-		COPY_FIELD;
-		goto cont;
-		return 1;
-}
-
-
-

Deleted: branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidPulldown.h
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidPulldown.h	2007-01-13 11:10:25 UTC (rev 2714)
+++ branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidPulldown.h	2007-01-13 11:31:17 UTC (rev 2715)
@@ -1,24 +0,0 @@
-#ifndef VID_PDW_
-#define VID_PDW_
-
- class  ADMVideoPullDown:public AVDMGenericVideoStream
- {
-
- protected:
-
-				ADMImage	*_uncompressed[5];
-     		virtual 	char 		*printConf(void);
-				uint32_t	_cacheStart;
-
- public:
-
-
-  				ADMVideoPullDown(  AVDMGenericVideoStream *in,CONFcouple *setup);
-
-  	virtual 		~ADMVideoPullDown();
-	virtual uint8_t 	getFrameNumberNoAlloc(uint32_t frame, uint32_t *len,
-          								ADMImage *data,uint32_t *flags);
-	virtual uint8_t configure( AVDMGenericVideoStream *instream) {return 1;};
-
- }     ;
-#endif

Deleted: branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidStabilize.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidStabilize.cpp	2007-01-13 11:10:25 UTC (rev 2714)
+++ branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidStabilize.cpp	2007-01-13 11:31:17 UTC (rev 2715)
@@ -1,214 +0,0 @@
-/***************************************************************************
-                          ADM_vidStabilize.cpp  -  description
-                             -------------------
-    begin                : Mon Oct 7 2002
-    copyright            : (C) 2002 by mean
-    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#include &lt;stdio.h&gt;
-#include &lt;stdlib.h&gt;
-#include &lt;string.h&gt;
-#include &lt;ADM_assert.h&gt;
-#include &lt;math.h&gt;
-
-#include &quot;config.h&quot;
-#include &quot;fourcc.h&quot;
-#include &quot;avio.hxx&quot;
-#include &quot;config.h&quot;
-#include &quot;avi_vars.h&quot;
-#ifdef HAVE_ENCODER
-
-
-#include &quot;ADM_toolkit/toolkit.hxx&quot;
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
-#include &quot;ADM_video/ADM_vidStabilize.h&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
-
-
-static FILTER_PARAM stabParam={1,{&quot;param&quot;}};
-
-
-SCRIPT_CREATE(stabilize_script,ADMVideoStabilize,stabParam);
-extern uint8_t distMatrix[256][256];
-extern uint32_t fixMul[16];
-
-BUILD_CREATE(stabilize_create,ADMVideoStabilize);
-
-
-
-char 	*ADMVideoStabilize::printConf(void)
-{
-  static char buf[50];
-
- 	sprintf((char *)buf,&quot; Stabilize :%ld&quot;,*_param);
-        return buf;
-}
-uint8_t  GUI_getIntegerValue(int *valye, int min, int max, char *title);
-uint8_t ADMVideoStabilize::configure(AVDMGenericVideoStream *instream)
-{
-int i;
-			_in=instream;
-			i=(int)*_param;
-			if(GUI_getIntegerValue(&amp;i,1,255,&quot;Stabilize Threshold&quot;))
-			{
-					*_param=(uint32_t)i;
-					return 1;
-			}
-			return 0;
-		    
-	
-}
-//--------------------------------------------------------	
-ADMVideoStabilize::ADMVideoStabilize(AVDMGenericVideoStream *in,CONFcouple *couples)
-{
-  //uint32_t frame;
-  _uncompressed=NULL;
-  _in=in;
-  memcpy(&amp;_info,in-&gt;getInfo(),sizeof(_info)); 
- 
-  _info.encoding=1;
-  if(couples)
-  {
-			_param=NEW(uint32_t);
-			ADM_assert(couples-&gt;getCouple((char *)&quot;param&quot;,_param));
-	}
-	else
-	{
-			_param=NEW( uint32_t);
-			*_param=30;
-	}
-	vidCache=new VideoCache(5,_in);
- 
-}
-ADMVideoStabilize::~ADMVideoStabilize()
-{
- 
- 	DELETE(_param);
-	if(vidCache) delete vidCache;
-	vidCache=NULL;
-}
-
-
-uint8_t	ADMVideoStabilize::getCoupledConf( CONFcouple **couples)
-{
-
-			ADM_assert(_param);
-			*couples=new CONFcouple(1);
- 			(*couples)-&gt;setCouple((char *)&quot;param&quot;,*_param);
-
-			return 1;
-
-}
-//                     1
-//		Get in range in 121 + coeff matrix
-//                     1
-//
-// If the value is too far away we ignore it
-// else we blend
-
-uint8_t ADMVideoStabilize::getFrameNumberNoAlloc(uint32_t frame,
-				uint32_t *len,
-   				ADMImage *data,
-				uint32_t *flags)
-{
-UNUSED_ARG(flags);
-uint32_t uvlen;
-uint32_t dlen,dflags;
-
-ADMImage	*_next;
-ADMImage	*_previous;  	
-ADMImage	*_current;
-		
-		uvlen=    _info.width*_info.height;
-		*len=uvlen+(uvlen&gt;&gt;1);
-		if(frame&gt; _info.nb_frames-1) return 0;
-		_current=vidCache-&gt;getImage(frame);
-		if(!_current) return 0;
-		data-&gt;copyInfo(_current);
-		if(!frame || (frame==_info.nb_frames-1))
-		{
-
-			data-&gt;duplicate(_current);
-			vidCache-&gt;unlockAll();
-			return 1;
-		}	 
-   		_previous=vidCache-&gt;getImage(frame-1);		
-		if(!_previous)
-		{
-			vidCache-&gt;unlockAll();
-			return 0;
-		}
-   		_next=vidCache-&gt;getImage(frame+1);
-		if(!_next)
-		{
-			vidCache-&gt;unlockAll();
-			return 0;
-		}
-		
-           // for u &amp; v , no action -&gt; copy it as is
-           memcpy(UPLANE(data),UPLANE(_current),uvlen&gt;&gt;2);
-	   memcpy(VPLANE(data),VPLANE(_current),uvlen&gt;&gt;2);
-
-           uint8_t *inprev,*innext,*incur,*zout;
-              
-              inprev=YPLANE(_previous)+1+_info.width;
-              innext=YPLANE(_next)+1+_info.width;
-              incur =YPLANE(_current)+1+_info.width;
-              
-              zout=YPLANE(data)+_info.width+1;
-              
-             
-              uint8_t *nl,*pl,*nc,*pc;
-              
-              uint16_t c,coeff;
-              uint32_t x;
-              for(uint32_t y= _info.height-1;y&gt;1;y--)
-              	{
-			nl=incur+_info.width;
-			pl=incur-_info.width;
-			nc=incur+1;
-			pc=incur-1;		   
-								   
-		        for(x= _info.width-1;x&gt;1;x--)
-        		{
-	               		c=*incur*4;;
-	                    	coeff=4;
-#define PONDERATE(x,p) if(distMatrix[*incur][x]&lt;*_param)	                      \
-{ c+=x;coeff++;}
-																PONDERATE(*innext,1);
-				PONDERATE(*inprev,1);
-				PONDERATE(*(pc),1);
-				PONDERATE(*(nc),1);
-				PONDERATE(*(nl),1);
-				PONDERATE(*(pl),1);
-													//*zout=(uint8_t)floor(0.49+(c/coeff));
-																ADM_assert(coeff);
-				ADM_assert(coeff&lt;16);
-				*zout=(c*fixMul[coeff])&gt;&gt;16;
-				zout++;
-				incur++;
-				innext++;
-				inprev++;	
-				nl++;pl++;nc++;pc++;	  
-			}
-			zout+=2;
-			incur+=2;
-			innext+=2;
-			inprev+=2;
-		}
-		vidCache-&gt;unlockAll();
-		return 1;	
-}
-
-
-#endif

Deleted: branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidStabilize.h
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidStabilize.h	2007-01-13 11:10:25 UTC (rev 2714)
+++ branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidStabilize.h	2007-01-13 11:31:17 UTC (rev 2715)
@@ -1,39 +0,0 @@
-/***************************************************************************
-                          ADM_vidStabilize.h  -  description
-                             -------------------
-    begin                : Mon Oct 7 2002
-    copyright            : (C) 2002 by mean
-    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#ifndef __STABL__
-#define __STABL__   
-#include &quot;ADM_video/ADM_cache.h&quot; 
- class  ADMVideoStabilize:public AVDMGenericVideoStream
- {
-
- protected:
-    		
-        		uint32_t		*_param;
-        		virtual char 	*printConf(void);
-				VideoCache		*vidCache;
-
-
- public:
-
-						ADMVideoStabilize(  AVDMGenericVideoStream *in,CONFcouple *setup);
-  					 	~ADMVideoStabilize();
-		        virtual uint8_t 	getFrameNumberNoAlloc(uint32_t frame, uint32_t *len,
-          										ADMImage *data,uint32_t *flags);
-			virtual uint8_t 	configure( AVDMGenericVideoStream *instream);
-			virtual uint8_t	getCoupledConf( CONFcouple **couples)		;
- }     ;
-#endif

Deleted: branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidUVSwap.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidUVSwap.cpp	2007-01-13 11:10:25 UTC (rev 2714)
+++ branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidUVSwap.cpp	2007-01-13 11:31:17 UTC (rev 2715)
@@ -1,102 +0,0 @@
-/***************************************************************************
-                          ADM_vidUVSwap.cpp  -  description
-                             -------------------
-    begin                : Tue Sep 10 2002
-    copyright            : (C) 2002 by mean
-    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
- #include &lt;stdio.h&gt;
-#include &lt;stdlib.h&gt;
-#include &lt;string.h&gt;
-#include &lt;ADM_assert.h&gt;
-
-#include &quot;config.h&quot;
-#include &quot;fourcc.h&quot;
-#include &quot;avio.hxx&quot;
-#include &quot;config.h&quot;
-#include &quot;avi_vars.h&quot;
-#ifdef HAVE_ENCODER
-
-
-#include &quot;ADM_toolkit/toolkit.hxx&quot;
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
-#include &quot;ADM_video/ADM_vidUVSwap.h&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
-
-
-static FILTER_PARAM nullParam={0,{&quot;&quot;}};
-
-
-SCRIPT_CREATE(swapuv_script,ADMVideoUVSwap,nullParam);
-BUILD_CREATE(swapuv_create,ADMVideoUVSwap);
-
-char *ADMVideoUVSwap::printConf( void )
-{
- 	static char buf[50];
-
- 	sprintf((char *)buf,&quot; UV Swap&quot;);
-        return buf;
-}
-
-ADMVideoUVSwap::ADMVideoUVSwap(  AVDMGenericVideoStream *in,CONFcouple *setup)
-{
-UNUSED_ARG(setup);
-	_buf=NULL;
- 	_in=in;
-   	memcpy(&amp;_info,_in-&gt;getInfo(),sizeof(_info));
-
-		
-  _info.encoding=1;
- _buf=new uint8_t [(_info.width*_info.height)&gt;&gt;2];
-
-
-}
-ADMVideoUVSwap::~ADMVideoUVSwap()
-{
-		if(_buf)
-		{
-            		delete []_buf;
-			_buf=NULL;
-		}
-}
-uint8_t ADMVideoUVSwap::getFrameNumberNoAlloc(uint32_t frame,
-				uint32_t *len,
-   				ADMImage *data,
-				uint32_t *flags)
-{
-
-		ADM_assert(frame&lt;_info.nb_frames);
-		// read uncompressed frame
-       		if(!_in-&gt;getFrameNumberNoAlloc(frame, len,data,flags)) return 0;
-
-		uint32_t sz;
-		uint8_t *start;
-					
-			sz=_info.width*_info.height;
-			sz&gt;&gt;=2;
-				
-			start=UPLANE(data);
-			memcpy(_buf,start,sz);
-					
-			memcpy(UPLANE(data),VPLANE(data),sz);
-			memcpy(VPLANE(data),_buf,sz);
-			
-
-
-      return 1;
-}
-
-
-
-#endif

Deleted: branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidUVSwap.h
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidUVSwap.h	2007-01-13 11:10:25 UTC (rev 2714)
+++ branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidUVSwap.h	2007-01-13 11:31:17 UTC (rev 2715)
@@ -1,37 +0,0 @@
-/***************************************************************************
-                          ADM_vidUVSwap.h  -  description
-                             -------------------
-    begin                : Tue Sep 10 2002
-    copyright            : (C) 2002 by mean
-    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#ifndef UVSWAP_
-#define UVSWAP_
-
- class  ADMVideoUVSwap:public AVDMGenericVideoStream
- {
-
- protected:
-
-           virtual 	char					*printConf(void);
-			uint8_t				*_buf;
-
- public:
-
-  						ADMVideoUVSwap(  AVDMGenericVideoStream *in,CONFcouple *setup);
-  			virtual 		~ADMVideoUVSwap();
-		        virtual uint8_t 	getFrameNumberNoAlloc(uint32_t frame, uint32_t *len,
-          							ADMImage *data,uint32_t *flags);
-			virtual uint8_t 	configure( AVDMGenericVideoStream *instream) { UNUSED_ARG(instream); return 1;};
-
- }     ;
-#endif

Deleted: branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidVlad.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidVlad.cpp	2007-01-13 11:10:25 UTC (rev 2714)
+++ branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidVlad.cpp	2007-01-13 11:31:17 UTC (rev 2715)
@@ -1,531 +0,0 @@
-/***************************************************************************
-                          ADM_vidVlad.cpp  -  description
-                             -------------------
-    begin                : Fri Jan 3 2003
-    copyright            : (C) 2003 by mean
-    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
-    
-    Port from Vlad59 / Jim Casaburi TemporalCleaner from avisynth YV12
-    
-    Luma only
-   	Patch by Daniel Glockner 
-    
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#include &lt;stdio.h&gt;
-#include &lt;stdlib.h&gt;
-#include &lt;string.h&gt;
-#include &lt;ADM_assert.h&gt;
-
-#include &quot;config.h&quot;
-#include &quot;fourcc.h&quot;
-#include &quot;avio.hxx&quot;
-#include &quot;config.h&quot;
-#include &quot;avi_vars.h&quot;
-#include &quot;admmangle.h&quot;
-
-#include &quot;ADM_toolkit/toolkit.hxx&quot;
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
-#include &quot;ADM_video/ADM_vidVlad.h&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
-#include &quot;ADM_osSupport/ADM_cpuCap.h&quot;
-
-
-
-#if  defined(ARCH_X86_64)
-#define COUNTER long int
-#else
-#define COUNTER int
-#endif
-
-#if defined( ARCH_X86)  || defined(ARCH_X86_64)
-static void ProcessCPlane_mmxe(unsigned char *source,
-				   unsigned char *prev,
-				   unsigned char* dest,
-				   unsigned char* mask,
-				   int width, int height,
-				   uint64_t  threshold);
-static void ProcessYPlane_mmxe( unsigned char *source,
-				    unsigned char *prev,
-				    unsigned char* dest,
-				    unsigned char* mask,
-				    long  int width, long int height,
-				    uint64_t  threshold);
-#endif
-static void ProcessCPlane_C(unsigned char *source,
-				   unsigned char *prev,
-				   unsigned char* dest,
-				   unsigned char* mask,
-				   int width, int height,
-				   uint64_t  threshold);
-static void ProcessYPlane_C( unsigned char *source,
-				    unsigned char *prev,
-				    unsigned char* dest,
-				    unsigned char* mask,
-				    long  int width, long int height,
-				    uint64_t  threshold);
-
-#define EXPAND(x) { x=x+(x&lt;&lt;8)+(x&lt;&lt;16)+(x&lt;&lt;24)+(x&lt;&lt;32)+(x&lt;&lt;40) \
-										+(x&lt;&lt;48)+(x&lt;&lt;56);}
-static FILTER_PARAM vladParam={2,{&quot;ythresholdMask&quot;,&quot;cthresholdMask&quot;}};
-
-
-SCRIPT_CREATE(vladsmooth_script,AVDMVideoVlad,vladParam);
-BUILD_CREATE(vladsmooth_create,AVDMVideoVlad);
-
-
-char *AVDMVideoVlad::printConf(void)
-{
-	static char buf[50];
- 	
-	sprintf((char *)buf,&quot; Temporal Cleaner : Y: %02lu / c: %02lu&quot;,_param-&gt;ythresholdMask,
-				_param-&gt;cthresholdMask	);
-        return buf;
-}
-
-
-uint8_t AVDMVideoVlad::configure( AVDMGenericVideoStream *instream)
-{
-UNUSED_ARG(instream);
-int i,j;
-		i=_param-&gt;ythresholdMask;
-		j=_param-&gt;cthresholdMask;
-	  	if(GUI_getIntegerValue(&amp;i,0,255,&quot;Luma Temporal  Threshold&quot;))
-		{			
-			if(GUI_getIntegerValue(&amp;j,0,255,&quot;Chroma Temporal  Threshold&quot;))
-			{
-				_param-&gt;ythresholdMask=i;
-				_param-&gt;cthresholdMask=j;
-		 		ythresholdMask = (uint64_t)_param-&gt;ythresholdMask;
-	   			cthresholdMask = (uint64_t)_param-&gt;cthresholdMask;	   
-
-				EXPAND(	ythresholdMask);
-				EXPAND(	cthresholdMask);					
-				return 1;				
-			}		
-		}
-		return 0;
-}     											
-AVDMVideoVlad::AVDMVideoVlad(  AVDMGenericVideoStream *in,CONFcouple *couples)
-		
-
-{
-	_in=in;
-	memcpy(&amp;_info,_in-&gt;getInfo(),sizeof(_info));
-	num_frame=0xFFFF0000;
-	if(couples)
-	{
-		_param=NEW(VLAD_PARAM);
-		GET(ythresholdMask);
-		GET(cthresholdMask);
-	}
-	else
-	{
-		_param=NEW(VLAD_PARAM);
-		ADM_assert(_param);
-	  _param-&gt;ythresholdMask=5;
- 	  _param-&gt;cthresholdMask=0;
-   }
-    	_mask=new uint8_t[_info.width*_info.height/4];
-  	memset(_mask,0,	_info.width*_info.height/4);
-	  
-	   ythresholdMask=0;
-	   ythresholdMask = (uint64_t)_param-&gt;ythresholdMask;
-	   cthresholdMask = (uint64_t)_param-&gt;cthresholdMask;	   
-
-		EXPAND(	ythresholdMask);
-		EXPAND(	cthresholdMask);
-	vidCache=new VideoCache(2,in);
-
-	ProcessYPlane = ProcessYPlane_C;
-	ProcessCPlane = ProcessCPlane_C;
-#if defined( ARCH_X86)  || defined(ARCH_X86_64)
-#if 0
-// Check
-	if(CpuCaps::hasMMXEXT() &amp;&amp; (_info.width&amp;7) == 0)
-	{
-		ProcessYPlane = ProcessYPlane_mmxe;
-		ProcessCPlane = ProcessCPlane_mmxe;
-	}
-#endif	
-#endif
-}
-
-
-uint8_t	AVDMVideoVlad::getCoupledConf( CONFcouple **couples)
-{
-
-			ADM_assert(_param);
-			*couples=new CONFcouple(2);
-
-#define CSET(x)  (*couples)-&gt;setCouple((char *)#x,(_param-&gt;x))
-	CSET(ythresholdMask);
-	CSET(cthresholdMask);
-	return 1;
-
-}
-AVDMVideoVlad::~AVDMVideoVlad()
-{
-		delete [] _mask;
-		DELETE(_param);
-		delete vidCache;
-}  									
-
-void ProcessYPlane_C( unsigned char *source,
-				    unsigned char *prev,
-				    unsigned char* dest,
-				    unsigned char* mask, 
-				    long  int width, long int height,
-				    uint64_t  threshold)
-{
-	int thp=threshold&amp;0xff;
-	int thn=-thp;
-	
-	width &gt;&gt;= 1;
-
-	for (int y = height &gt;&gt; 1; --y &gt;= 0;)
-	{
-		int x2 = -width;
-		int x = x2*2;
-
-		source += 4*width;
-		prev += 4*width;
-		dest += 4*width;
-		mask += width;
-
-		do {
-			int yc,yp;
-			int m = 0;
-			yc=source[x*2];
-			yp=prev[x*2];
-			if(thn&lt;=yc-yp &amp;&amp; yc-yp&lt;=thp) {
-				yc=(yc+yp+1)&gt;&gt;1;
-				m=1;
-			}
-			source[x*2]=dest[x*2]=yc;
-
-			yc=source[x*2+1];
-			yp=prev[x*2+1];
-			if(thn&lt;=yc-yp &amp;&amp; yc-yp&lt;=thp) {
-				yc=(yc+yp+1)&gt;&gt;1;
-				m++;
-			}
-			source[x*2+1]=dest[x*2+1]=yc;
-
-			x++;
-
-			yc=source[x2*2];
-			yp=prev[x2*2];
-			if(thn&lt;=yc-yp &amp;&amp; yc-yp&lt;=thp) {
-				yc=(yc+yp+1)&gt;&gt;1;
-				m++;
-			}
-			source[x2*2]=dest[x2*2]=yc;
-
-			yc=source[x2*2+1];
-			yp=prev[x2*2+1];
-			if(thn&lt;=yc-yp &amp;&amp; yc-yp&lt;=thp) {
-			  yc=(yc+yp+1)&gt;&gt;1;
-			  m++;
-			}
-			source[x2*2+1]=dest[x2*2+1]=yc;
-
-			mask[x2]=m;
-		} while(++x2 &lt; 0);
-	}
-}
-
-void ProcessCPlane_C( unsigned char *source,
-				    unsigned char *prev,
-				    unsigned char* dest,
-				    unsigned char* mask, 
-				    int width, int height,
-				    uint64_t  threshold)
-{
-	int thp = threshold&amp;0xff;
-	int thn = -thp;
-	long int i = width*height;
-	
-	source += i;
-	prev += i;
-	dest += i;
-	mask += i;
-	i = -i;
-	
-	do {
-		int cc,cp;
-		cc=source[i];
-		cp=prev[i];
-		if(thn&lt;=cc-cp &amp;&amp; cc-cp&lt;=thp &amp;&amp; mask[i]&gt;3) {
-			cc=(cc+cp+1)&gt;&gt;1;
-		}
-		source[i]=dest[i]=cc;
-	} while(++i &lt; 0);
-}
-
-#if defined( ARCH_X86)  || defined(ARCH_X86_64)
-void ProcessYPlane_mmxe( unsigned char *source,
-				    unsigned char *prev,
-				    unsigned char* dest,
-				    unsigned char* mask, 
-				    long  int width, long int height,
-				    uint64_t  threshold)
-{
-	COUNTER tmp,tmp2;
-	long int  h2, w8;
-
-	w8 = -(width &gt;&gt; 3);
-	width &gt;&gt;= 1;
-
-__asm__ __volatile__(
-			&quot;movq (%0),%%mm6 \n\t&quot;
-			:
-			: &quot;r&quot;(&amp;threshold)
-		);
-	
-	for (h2 = height &gt;&gt; 1; --h2 &gt;= 0;)
-	{
-		source += 4*width;
-		prev += 4*width;
-		dest += 4*width;
-		mask += width;
-
-#define REG_source &quot;%2&quot;
-#define REG_dest &quot;%3&quot;
-#define REG_prev &quot;%4&quot;
-#define REG_mask &quot;%5&quot;
-#define REG_counter &quot;%0&quot;
-#define REG_counter2 &quot;%1&quot;
-	  
-__asm__ __volatile__(
-&quot;prefetchnta (&quot;REG_source&quot;,&quot;REG_counter&quot;,8) \n\t&quot;
-&quot;prefetchnta (&quot;REG_prev&quot;,&quot;REG_counter&quot;,8) \n\t&quot;
-&quot;.p2align 4\n\t&quot;
-&quot;pxor %%mm7,%%mm7\n\t&quot;
-&quot;HLine%=:  \n\t&quot;
-
-&quot;prefetchnta (&quot;REG_source&quot;,&quot;REG_counter2&quot;,8) \n\t&quot;
-&quot;prefetchnta (&quot;REG_prev&quot;,&quot;REG_counter2&quot;,8) \n\t&quot;
-
-&quot;movq (&quot;REG_source&quot;,&quot;REG_counter&quot;,8),%%mm0 \n\t&quot;   // mm0 &lt;- lsource+(size/8)*8
-&quot;movq (&quot;REG_prev&quot;,&quot;REG_counter&quot;,8),%%mm1 \n\t&quot;     // mm1 &lt;- lprev+(size/8)*8
-&quot;movq %%mm0,%%mm2 \n\t&quot;               // mm2 &lt;- mm0  source
-&quot;movq %%mm1,%%mm3 \n\t&quot;               // mm3 &lt;-mm1   oold
-&quot;psubusb %%mm1,%%mm0 \n\t&quot;            // mm0=mm0-mm1
-&quot;psubusb %%mm2,%%mm1 \n\t&quot;            // mm1=mm1-mm2
-&quot;por %%mm1,%%mm0 \n\t&quot;                // mm0=mm0 or mm1
-&quot;pavgb %%mm2,%%mm3 \n\t&quot;              // mm3= 'mm2+mm3&quot;/2
-&quot; \n\t&quot;                               // mm0=mm6-mm0 diff to threshold
-&quot;psubusb %%mm6,%%mm0 \n\t&quot;  // &gt;0 ?
-&quot;pcmpeqb %%mm7,%%mm0 \n\t&quot;
-&quot; \n\t&quot;
-&quot;movq %%mm0,%%mm4 \n\t&quot;               // masked diff &gt;m4
-&quot; \n\t&quot;
-&quot;pand %%mm0,%%mm3 \n\t&quot;               // mm0=old and mask diff
-&quot;pandn %%mm2,%%mm0 \n\t&quot;              // mm1= source and invert diff
-&quot;por %%mm3,%%mm0 \n\t&quot;                // m0 = mix
-&quot;movq %%mm0,(&quot;REG_dest&quot;,&quot;REG_counter&quot;,8) \n\t&quot;   // store to des+ecx*8
-&quot;movq %%mm0,(&quot;REG_source&quot;,&quot;REG_counter&quot;,8) \n\t&quot; // store to mask+ecx*8
-
-&quot;movq (&quot;REG_source&quot;,&quot;REG_counter2&quot;,8),%%mm0 \n\t&quot;  // mm0 &lt;- lsource+(size/8)*8
-&quot;movq (&quot;REG_prev&quot;,&quot;REG_counter2&quot;,8),%%mm1 \n\t&quot;    // mm1 &lt;- lprev+(size/8)*8
-
-&quot;prefetchnta 8(&quot;REG_source&quot;,&quot;REG_counter&quot;,8) \n\t&quot;
-&quot;prefetchnta 8(&quot;REG_prev&quot;,&quot;REG_counter&quot;,8) \n\t&quot;
-&quot;add $1,&quot;REG_counter&quot; \n\t&quot;
-
-&quot;movq %%mm0,%%mm2 \n\t&quot;               // mm2 &lt;- mm0  source
-&quot;movq %%mm1,%%mm3 \n\t&quot;               // mm3 &lt;- mm1  oold
-&quot;psubusb %%mm1,%%mm0 \n\t&quot;            // mm0=mm0-mm1
-&quot;psubusb %%mm2,%%mm1 \n\t&quot;            // mm1=mm1-mm2
-&quot;por %%mm1,%%mm0 \n\t&quot;                // mm0=mm0 or mm1
-&quot;pavgb %%mm2,%%mm3 \n\t&quot;              // mm3= 'mm2+mm3&quot;/2
-&quot; \n\t&quot;                               // mm0=mm6-mm0 diff to threshold
-&quot;psubusb %%mm6,%%mm0 \n\t&quot;  // &gt;0 ?
-&quot;pcmpeqb %%mm7,%%mm0 \n\t&quot;
-&quot; \n\t&quot;
-
-&quot;pand %%mm0,%%mm4 \n\t&quot;
-&quot;movq %%mm4,%%mm1 \n\t&quot;               // masked diff -&gt; mm1
-&quot;psrlw $8,%%mm4 \n\t&quot;                 // shift
-&quot;pand %%mm4,%%mm1 \n\t&quot;               // if right &amp; left triggered
-&quot;packuswb %%mm1,%%mm1 \n\t&quot;           // packed to 4 bytes
-&quot;movd %%mm1,(&quot;REG_mask&quot;,&quot;REG_counter2&quot;,4) \n\t&quot;     // store mask m4-&gt;mask+ecx*4
-
-&quot; \n\t&quot;
-&quot;pand %%mm0,%%mm3 \n\t&quot;               // mm3 = old and mask diff
-&quot;pandn %%mm2,%%mm0 \n\t&quot;              // mm0 = source and invert diff
-&quot;por %%mm3,%%mm0 \n\t&quot;                // mm0 = mix
-&quot;movq %%mm0,(&quot;REG_dest&quot;,&quot;REG_counter2&quot;,8) \n\t&quot;   // store to des+ecx*8
-&quot;movq %%mm0,(&quot;REG_source&quot;,&quot;REG_counter2&quot;,8) \n\t&quot; // store to mask+ecx*8
-
-
-&quot;add $1,&quot;REG_counter2&quot; \n\t&quot;          // add 1 to ecv
-&quot;jnz HLine%=&quot;                         // while !=0
- : &quot;=r&quot;(tmp), &quot;=r&quot;(tmp2)
- : &quot;r&quot;(source), &quot;r&quot;(dest), &quot;r&quot;(prev),
-   &quot;r&quot;(mask)
-   , &quot;0&quot;(2*w8), &quot;1&quot;(w8)
- );
-
-	}
- __asm__ __volatile__(&quot;emms \n\t&quot;);
-}
-
-
-//#pragma -O0
-
-void ProcessCPlane_mmxe(unsigned char *source,
-				   unsigned char *prev, 
-				   unsigned char* dest, 
-				   unsigned char* mask, 
-				   int width, int height,
-				   uint64_t  threshold)
-{
-	long int w8;
-	COUNTER tmp;
-
-	w8 = width*height;
-	source += w8;
-	dest += w8;
-	prev += w8;
-	mask += w8;
-	w8 = -(w8&gt;&gt;3);
-
-__asm__ __volatile__(
-			&quot;movq (%0),%%mm6 \n\t&quot;
-			:
-			: &quot;r&quot;(&amp;threshold)
-		);
-	
-__asm__ __volatile__ (
-&quot;prefetchnta (&quot;REG_source&quot;,&quot;REG_counter&quot;,8) \n\t&quot;
-&quot;prefetchnta (&quot;REG_prev&quot;,&quot;REG_counter&quot;,8) \n\t&quot;
-&quot;prefetchnta (&quot;REG_mask&quot;,&quot;REG_counter&quot;,8) \n\t&quot;
-&quot;.p2align 4\n\t&quot;
-&quot;pxor %%mm7,%%mm7\n\t&quot;
-&quot;Lfoo%=:  \n\t&quot;
-&quot;prefetchnta 8(&quot;REG_source&quot;,&quot;REG_counter&quot;,8) \n\t&quot;
-&quot;prefetchnta 8(&quot;REG_prev&quot;,&quot;REG_counter&quot;,8) \n\t&quot;
-&quot;prefetchnta 8(&quot;REG_mask&quot;,&quot;REG_counter&quot;,8) \n\t&quot;
-&quot;movq (&quot;REG_source&quot;,&quot;REG_counter&quot;,8),%%mm0 \n\t&quot;
-&quot;movq (&quot;REG_prev&quot;,&quot;REG_counter&quot;,8),%%mm1 \n\t&quot;
-&quot;movq %%mm0,%%mm2 \n\t&quot;
-&quot;movq %%mm1,%%mm3 \n\t&quot;
-&quot;psubusb %%mm1,%%mm0 \n\t&quot;
-&quot;psubusb %%mm2,%%mm1 \n\t&quot;
-&quot;por %%mm1,%%mm0 \n\t&quot;
-&quot;pavgb %%mm2,%%mm3 \n\t&quot;
-&quot; \n\t&quot;
-&quot;psubusb %%mm6,%%mm0 \n\t&quot;
-&quot;pcmpeqb %%mm7,%%mm0 \n\t&quot;
-&quot; \n\t&quot;
-&quot;pand (&quot;REG_mask&quot;,&quot;REG_counter&quot;,8),%%mm0 \n\t&quot;
-&quot; \n\t&quot;
-&quot;pand %%mm0,%%mm3 \n\t&quot;
-&quot;pandn %%mm2,%%mm0 \n\t&quot;
-&quot;por %%mm3,%%mm0 \n\t&quot;
-&quot;movq %%mm0,(&quot;REG_dest&quot;,&quot;REG_counter&quot;,8) \n\t&quot;
-&quot;movq %%mm0,(&quot;REG_source&quot;,&quot;REG_counter&quot;,8) \n\t&quot;
-&quot;add $1,&quot;REG_counter&quot; \n\t&quot;
-&quot;jnz Lfoo%= \n\t&quot;
- : &quot;=r&quot;(tmp)
- : &quot;0&quot;(w8), &quot;r&quot;(source), &quot;r&quot;(dest), &quot;r&quot;(prev),
-   &quot;r&quot;(mask)
- 
- );
-	__asm__ __volatile__(&quot;emms \n\t&quot;);
-}
-#endif
-
-//$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
-//$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
-//$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
-//$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
-uint8_t AVDMVideoVlad::getFrameNumberNoAlloc(uint32_t frame,
-				uint32_t *len,
-   				ADMImage *data,
-				uint32_t *flags)
-{
-	
-	uint32_t page=_info.width*_info.height;
-	ADMImage *cur,*prev;
-	
-		if(frame&gt;(_info.nb_frames-1)) return 0;
-		
-		*len=(page*3)&gt;&gt;1;
-		
-		if(frame)
-		{
-		 	prev=vidCache-&gt;getImage(frame-1);
-			if(!prev)
-				return 0;
-		}
-		
-		cur=vidCache-&gt;getImage(frame);
-		if(!cur)
-		{
-			vidCache-&gt;unlockAll();
-			return 0;
-		}
-		data-&gt;copyInfo(cur);
-		if(!frame)
-		{
-			
-			data-&gt;duplicate(cur);
-			vidCache-&gt;unlockAll();
-			return 1  ;
-		}
-		
-		
-			  
-		ProcessYPlane (YPLANE(cur),
-				YPLANE(prev),     	
-				YPLANE(data), 
-				_mask, 
-				_info.width, 
-		       		_info.height,
-				ythresholdMask);
-		if (0==_param-&gt;cthresholdMask)
-		{
-			//memcpy(data-&gt;data+page,_uncompressed-&gt;data+page,page&gt;&gt;1);
-			memcpy(UPLANE(data),UPLANE(cur),page&gt;&gt;2);
-			memcpy(VPLANE(data),VPLANE(cur),page&gt;&gt;2);
-		}
-		else
-		{
-			
-				ProcessCPlane (UPLANE(cur),
-							UPLANE(prev),     	
-							UPLANE(data), 
-							_mask, 
-							_info.width&gt;&gt;1, 
-							_info.height&gt;&gt;1,
-							cthresholdMask);       
-				
-			
-				ProcessCPlane (VPLANE(cur),
-							VPLANE(prev),     	
-							VPLANE(data), 
-							_mask, 
-							_info.width&gt;&gt;1, 
-							_info.height&gt;&gt;1,
-							cthresholdMask);       				
-			
-			}
-		
-		vidCache-&gt;unlockAll();
-		return 1;
-
-}
-
-

Deleted: branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidVlad.h
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidVlad.h	2007-01-13 11:10:25 UTC (rev 2714)
+++ branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidVlad.h	2007-01-13 11:31:17 UTC (rev 2715)
@@ -1,62 +0,0 @@
-/***************************************************************************
-                          ADM_vidVlad.h  -  description
-                             -------------------
-    begin                : Fri Jan 3 2003
-    copyright            : (C) 2003 by mean
-    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#ifndef __VLAD__
-#define __VLAD__   
-#include &quot;ADM_video/ADM_cache.h&quot; 
-typedef struct VLAD_PARAM
-{
-	uint32_t ythresholdMask;
-	uint32_t cthresholdMask;
-}VLAD_PARAM;
- class  AVDMVideoVlad:public AVDMGenericVideoStream
- {
-
- protected:
-
-        			VLAD_PARAM	*_param;
-        			virtual char 	*printConf(void);
-	      			uint8_t		*_mask;
-	      			VideoCache	*vidCache;
-	      			
-        			uint64_t		ythresholdMask;
-				uint64_t 		cthresholdMask;
-				uint32_t 		num_frame;
-				void (*ProcessCPlane)(unsigned char *source,
-				                      unsigned char *prev,
-				                      unsigned char* dest,
-				                      unsigned char* mask,
-				                      int width, int height,
-				                      uint64_t  threshold);
-				void (*ProcessYPlane)(unsigned char *source,
-				                      unsigned char *prev,
-				                      unsigned char* dest,
-				                      unsigned char* mask,
-				                      long int width,
-				                      long int height,
-				                      uint64_t  threshold);
- public:
-
-
-						AVDMVideoVlad(  AVDMGenericVideoStream *in,CONFcouple *setup);
-  					 	~AVDMVideoVlad();
-		        virtual uint8_t 	getFrameNumberNoAlloc(uint32_t frame, uint32_t *len,
-          							ADMImage *data,uint32_t *flags);
-
-			virtual uint8_t 	configure( AVDMGenericVideoStream *instream);
-			virtual uint8_t	getCoupledConf( CONFcouple **couples)		;
- }     ;
-#endif

Deleted: branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidWirl.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidWirl.cpp	2007-01-13 11:10:25 UTC (rev 2714)
+++ branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidWirl.cpp	2007-01-13 11:31:17 UTC (rev 2715)
@@ -1,204 +0,0 @@
-
-/***************************************************************************
-                          ADM_vidWhirl.cpp  -  description
-                             -------------------
-    begin                : Fri Jan 3 2003
-    copyright            : (C) 2003 by mean
-    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
-    
-    
-   Whrilpool like effect
-    
-    
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#include &lt;stdio.h&gt;
-#include &lt;stdlib.h&gt;
-#include &lt;string.h&gt;
-#include &lt;math.h&gt;
-#include &lt;ADM_assert.h&gt;
-
-#include &quot;config.h&quot;
-#include &quot;fourcc.h&quot;
-#include &quot;avio.hxx&quot;
-#include &quot;config.h&quot;
-#include &quot;avi_vars.h&quot;
-
-//#define LOOP
-#include &quot;admmangle.h&quot;
-
-#include &quot;ADM_toolkit/toolkit.hxx&quot;
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
-#include &quot;ADM_video/ADM_vidVlad.h&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
-
-static void Process(uint8_t *src,uint8_t *data, uint32_t width, uint32_t height,double frac);
-
-
-static FILTER_PARAM whirlParam={0,{&quot;ythresholdMask&quot;,&quot;cthresholdMask&quot;}};
-
-#define STEP_SIZE 150
-static int COS_CALCED[3600];
-static int SIN_CALCED[3600];
-class  AVDMVideoWhirl:public AVDMGenericVideoStream
- {
-
- protected:
-
-        			
-        			virtual 	char *printConf(void);
-						
- public:
-
-
-						AVDMVideoWhirl(  AVDMGenericVideoStream *in,CONFcouple *setup);
-  					 	AVDMVideoWhirl();
-		        virtual uint8_t 	getFrameNumberNoAlloc(uint32_t frame, uint32_t *len,
-          							ADMImage *data,uint32_t *flags);
-
-			virtual uint8_t 	configure( AVDMGenericVideoStream *instream);
-			
- }     ;
- 
-SCRIPT_CREATE(whirl_script,AVDMVideoWhirl,whirlParam);
-BUILD_CREATE(whirl_create,AVDMVideoWhirl);
-
-char *AVDMVideoWhirl::printConf(void)
-{
-	static char buf[50];
- 	
-	sprintf((char *)buf,&quot; Whril&quot;);
-        return buf;
-}
-
-
-uint8_t AVDMVideoWhirl::configure( AVDMGenericVideoStream *instream)
-{
-		
-		return 1;
-}     											
-AVDMVideoWhirl::AVDMVideoWhirl(  AVDMGenericVideoStream *in,CONFcouple *couples)
-		
-
-{
-	_in=in;
-	memcpy(&amp;_info,_in-&gt;getInfo(),sizeof(_info));
-	_uncompressed= new ADMImage(_info.width,_info.height);
-	
-	#define TWOPI (2*3.1415)
-	double angle;
-	for(int i=0;i&lt;3600;i++)
-	{
-		angle=(double)i;
-		angle/=TWOPI;
-		angle/=10.;
-		COS_CALCED[i]=(int)floor(0.49+65536.*cos(angle));
-		SIN_CALCED[i]=(int)floor(0.49+65536.*sin(angle));
-		
-	}
-}
-
-
-AVDMVideoWhirl::AVDMVideoWhirl()
-{
-	delete _uncompressed;
-}  
-
-
-uint8_t AVDMVideoWhirl::getFrameNumberNoAlloc(uint32_t frame,
-				uint32_t *len,
-   				ADMImage *data,
-				uint32_t *flags)
-{
-	
-	uint32_t page=_info.width*_info.height;
-	ADMImage *cur,*prev;
-	double frac;
-	
-		if(frame&gt;STEP_SIZE)
-			frac=1;
-		else
-			frac=(double)frame/(double)STEP_SIZE;
-		if(frame&gt;(_info.nb_frames-1)) return 0;
-		
-		*len=(page*3)&gt;&gt;1;
-		if(!_in-&gt;getFrameNumberNoAlloc(frame,len,_uncompressed,flags)) return 0;
-		
-		data-&gt;copyInfo(_uncompressed);
-		Process(YPLANE(_uncompressed),YPLANE(data),_info.width,_info.height,frac);
-		Process(UPLANE(_uncompressed),UPLANE(data),_info.width&gt;&gt;1,_info.height&gt;&gt;1,frac);
-		Process(VPLANE(_uncompressed),VPLANE(data),_info.width&gt;&gt;1,_info.height&gt;&gt;1,frac);
-		
-		return 1;
-
-}
-#define invlen(x) x
-void Process(uint8_t *src,uint8_t *data, uint32_t width, uint32_t height,double frac)
-{
-int	dprime,d;
-int 	pointx,pointy;
-int	fx,fy;
-int	alpha,beta;
-
-uint8_t *wr;
-double angle;
-int 	iang;
-
-	wr=data;
-	frac=10*frac*180./width;
-	for(uint32_t y=0;y&lt;height;y++)
-	{
-	for(uint32_t x=0;x&lt;width;x++)
-	{
-		pointx=x-(width&gt;&gt;1);
-		pointy=y-(height&gt;&gt;1);
-		if(!pointx &amp;&amp; !pointy)
-		{
-			// center continue
-			*wr++=*(src+((width*height+width)&gt;&gt;1));
-			continue;
-		}
-		
-		dprime=pointx*pointx+pointy*pointy;
-		dprime=(int)floor(0.49+sqrt(dprime));
-
-//		dprime=abs(pointx)+abs(pointy);		
-		d=invlen(dprime);
-		// rotate 
-		
-		iang=(int)floor((double)d*frac);
-		iang%=3600;
-		
-		alpha=COS_CALCED[iang];
-		beta=SIN_CALCED[iang];
-		
-		fx=alpha*pointx+beta*pointy;
-		fy=-beta*pointx+alpha*pointy;
-		// expand
-		fx=fx&gt;&gt;16;
-		fy=fy&gt;&gt;16;
-		// put back to original
-		pointx=fx+(width&gt;&gt;1);
-		pointy=fy+(height&gt;&gt;1);
-		
-		// Clamp
-		if(pointx&lt;0) pointx=0;
-		if(pointx&gt;width-1) pointx=width-1;
-		if(pointy&lt;0) pointy=0;
-		if(pointy&gt;height-1) pointy=height-1;
-		
-		*(wr++)=*(src+pointx+width*pointy);
-		
-	
-	}
-	}
-}

Deleted: branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidlavdeint.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidlavdeint.cpp	2007-01-13 11:10:25 UTC (rev 2714)
+++ branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidlavdeint.cpp	2007-01-13 11:31:17 UTC (rev 2715)
@@ -1,123 +0,0 @@
-//
-//
-// C++ Implementation: ADM_vidlavdeint
-//
-// Description: 
-//		Wrapper for libavcode deinterlacer
-//
-// Author: mean &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>&gt;, (C) 2003
-//
-// Copyright: See COPYING file that comes with this distribution
-//
-//
-
-#include &lt;stdio.h&gt;
-#include &lt;stdlib.h&gt;
-#include &lt;string.h&gt;
-#include &lt;ADM_assert.h&gt;
-#include &quot;ADM_lavcodec.h&quot;
-
-#include &quot;config.h&quot;
-#include &quot;fourcc.h&quot;
-#include &quot;avio.hxx&quot;
-#include &quot;config.h&quot;
-#include &quot;avi_vars.h&quot;
-
-
-
-#include &quot;ADM_toolkit/toolkit.hxx&quot;
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
-#include &quot;ADM_video/ADM_vidlavdeint.h&quot;
-//static void decimate(uint8_t *src,uint8_t *target, uint32_t linessrc, uint32_t width);
-#include &quot;ADM_filter/video_filters.h&quot;
-
-
-static FILTER_PARAM nullParam={0,{&quot;&quot;}};
-
-
-SCRIPT_CREATE(lavdeint_script,AVDMVideoLavDeint,nullParam);
-BUILD_CREATE(lavdeint_create,AVDMVideoLavDeint);
-
-
-char *AVDMVideoLavDeint::printConf( void )
-{
- 	static char buf[50];
-
- 	sprintf((char *)buf,&quot; Lavcodec deinterlacer&quot;);
-        return buf;
-}
-
-//_______________________________________________________________
-AVDMVideoLavDeint::AVDMVideoLavDeint(
-									AVDMGenericVideoStream *in,CONFcouple *setup)
-{
-UNUSED_ARG(setup);
-  	_in=in;
-   	memcpy(&amp;_info,_in-&gt;getInfo(),sizeof(_info));
-	_uncompressed=new ADMImage(_info.width,_info.height);
-
-
-}
-
-// ___ destructor_____________
-AVDMVideoLavDeint::~AVDMVideoLavDeint()
-{
- 	delete  _uncompressed;
-	_uncompressed=NULL;
-
-}
-
-//
-//	Basically ask a uncompressed frame from editor and ask
-//		GUI to decompress it .
-//
-
-uint8_t AVDMVideoLavDeint::getFrameNumberNoAlloc(uint32_t frame,
-				uint32_t *len,
-   				ADMImage *data,
-				uint32_t *flags)
-{
-//static Image in,out;
-		if(frame&gt;=_info.nb_frames) return 0;
-
-
-		// read uncompressed frame
-       		if(!_in-&gt;getFrameNumberNoAlloc(frame, len,_uncompressed,flags)) return 0;
-		data-&gt;copyInfo(_uncompressed);
-		// if not %4 -&gt; skip
-		if((_info.width&amp;03) || (_info.height &amp; 3))
-		{
-			printf(&quot;\n WIDTH &amp; HEIGHT must be multiple of 4!!\n&quot;);
-
-			data-&gt;duplicate(_uncompressed);
-			return 1;
-		}
-		// and deinterlace it
-		AVPicture src;
-  		AVPicture dest;
-		uint32_t page=_info.width*_info.height;
-		
-		src.data[0]=YPLANE(_uncompressed);
-		src.data[1]=UPLANE(_uncompressed);
-		src.data[2]=VPLANE(_uncompressed);
-  
-		dest.data[0]=YPLANE(data);
-		dest.data[1]=UPLANE(data);
-		dest.data[2]=VPLANE(data);
-		
-		src.linesize[0]=dest.linesize[0]=_info.width;
-		src.linesize[1]=dest.linesize[1]=_info.width&gt;&gt;1;
-		src.linesize[2]=dest.linesize[2]=_info.width&gt;&gt;1;
-  
-		if (avpicture_deinterlace(&amp;dest,&amp;src,PIX_FMT_YUV420P,_info.width,_info.height)&lt;0)
-		{
-			printf(&quot;Error in avpicture deinterlace!\n&quot;);
-			return 0;
-		} 	
-
-
-      return 1;
-}
-
-

Deleted: branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidlavdeint.h
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidlavdeint.h	2007-01-13 11:10:25 UTC (rev 2714)
+++ branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidlavdeint.h	2007-01-13 11:31:17 UTC (rev 2715)
@@ -1,34 +0,0 @@
-//
-//
-// C++ Interface: ADM_vidlavdeint
-//
-// Description: 
-//
-//
-// Author: mean &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>&gt;, (C) 2003
-//
-// Copyright: See COPYING file that comes with this distribution
-//
-//
-
-class  AVDMVideoLavDeint:public AVDMGenericVideoStream
- {
-
- protected:
-
-
-        virtual char 		*printConf(void) ;
-
- public:
-  				AVDMVideoLavDeint(  AVDMGenericVideoStream *in,CONFcouple *setup);
-  				~AVDMVideoLavDeint();
-	virtual uint8_t 	getFrameNumberNoAlloc(uint32_t frame, uint32_t *len,
-          						ADMImage *data,uint32_t *flags);
-
-			virtual uint8_t 	configure( AVDMGenericVideoStream *instream) 
-								{return 0;};
-
-
- }     ;
-
- 

Modified: branches/avidemux_2.4_branch/avidemux/ADM_video/Makefile.am
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_video/Makefile.am	2007-01-13 11:10:25 UTC (rev 2714)
+++ branches/avidemux_2.4_branch/avidemux/ADM_video/Makefile.am	2007-01-13 11:31:17 UTC (rev 2715)
@@ -8,13 +8,11 @@
 
 libADM_video_a_SOURCES = ADM_vidFields.cpp \
  ADM_vidDeintASM.cpp \
- ADM_vidVlad.cpp \
  ADM_vidSalt.cpp \
  ADM_vidCached.cpp \
  ADM_vidPartial.cpp \
  ADM_vidFont.cpp \
  ADM_vidSRT.cpp \
- ADM_vidStabilize.cpp \
  ADM_vidContrast.cpp \
 	ADM_resizeter.cpp \
  ADM_vidCrop.cpp \
@@ -24,14 +22,12 @@
 	ADM_vidResize.cpp \
  ADM_vidTelecide.cpp \
  ADM_vidTempSmooth.cpp \
- ADM_vidUVSwap.cpp \
 	ADM_vidClean.cpp \
 	ADM_resizebis.cpp \
  ADM_genvideo.cpp \
  ADM_vidRotate.cpp \
  ADM_vidRotate.h \
-	ADM_vidDropOut.cpp \
- ADM_vidDropOut.h ADM_vidResize25.cpp \
+ ADM_vidResize25.cpp \
  ADM_vidSwapFields.cpp \
 	ADM_vidSwapFields.h ADM_vidSeparateField.cpp \
  ADM_vidFieldUtil.cpp \
@@ -44,17 +40,15 @@
 	ADM_vidMPLResize.cpp \
  ADM_vidIVTC.cpp \
  ADM_vidIVTC.h ADM_interlaced.cpp \
-	ADM_interlaced.h ADM_vidPulldown.h ADM_vidPulldown.cpp \
+	ADM_interlaced.h \
  ADM_vidBlend.cpp \
  ADM_vidRaw.cpp \
 	ADM_vidSRTRender.cpp \
  ADM_vidSRTload.cpp \
- ADM_vidlavdeint.cpp \
 	ADM_mpdetc.cpp \
  ADM_vidDecTelecide.cpp \
  ADM_vidDecTelecide.h ADM_cache.cpp \
  ADM_vidDecDec.cpp \
- ADM_vidWirl.cpp \
  ADM_vidEqualizer.cpp \
  ADM_vidVobsub.cpp \
  ADM_vobsubinfo.cpp \
@@ -84,10 +78,8 @@
 ADM_genvideo.hxx ADM_vidDeinterlace.cpp  ADM_vidPartial.cpp \
 ADM_vidDeinterlace.h  ADM_vidPartial.h \
 ADM_vidDelta.cpp  ADM_vidPartial_param.h \
-ADM_vidPulldown.cpp \
- ADM_vidPulldown.h \
-ADM_guiResize.cpp  ADM_vidDropOut.cpp  ADM_vidRaw.cpp \
-ADM_interlaced.cpp ADM_vidDropOut.h  \
+ADM_guiResize.cpp   ADM_vidRaw.cpp \
+ADM_interlaced.cpp  \
 ADM_interlaced.h ADM_vidEq2.cpp  ADM_vidResize.cpp \
 ADM_vidEq2.h  ADM_vidResize25.cpp \
 ADM_vidEqualizer.cpp  ADM_vidReverse.cpp \
@@ -103,8 +95,8 @@
 ADM_vidAnimated.cpp  ADM_vidSeparateField.h \
 ADM_vidAnimated.h  \
 ADM_vidAnimated_param.h   \
-ADM_vidAsharp.cpp   ADM_vidStabilize.cpp \
-ADM_vidFont.cpp ADM_vidStabilize.h \
+ADM_vidAsharp.cpp   \
+ADM_vidFont.cpp \
 ADM_vidBlend.cpp ADM_vidFont.h ADM_vidSwapFields.cpp \
 ADM_vidSwapFields.h \
 ADM_vidSwapSmart.cpp \
@@ -115,18 +107,16 @@
 ADM_vidIVTC.h ADM_vidTelecide.h \
 ADM_vidTempSmooth.cpp \
 ADM_vidTempSmooth.h \
-ADM_vidUVSwap.cpp \
-ADM_vidChromaShift.cpp ADM_vidUVSwap.h \
+ADM_vidChromaShift.cpp \
 ADM_vidChromaShift.h ADM_vidUnblend.cpp \
 ADM_vidClean.cpp ADM_vidUnblend_param.h \
-ADM_vidClean.h ADM_vidVlad.cpp \
-ADM_vidColorYuv.cpp  ADM_vidVlad.h \
+ADM_vidClean.h \
+ADM_vidColorYuv.cpp  \
 ADM_vidColorYuv.h  ADM_vidVobSub.h \
 ADM_vidColorYuv_param.h  ADM_vidVobSubRender.cpp \
 ADM_vidCommonFilter.h  ADM_vidMPLResize.cpp  ADM_vidVobsub.cpp \
-ADM_vidContrast.cpp  ADM_vidMPdelogo.cpp ADM_vidWirl.cpp \
-ADM_vidContrast.h  ADM_vidMPdelogo.h ADM_vidlavdeint.cpp \
-ADM_vidlavdeint.h \
+ADM_vidContrast.cpp  ADM_vidMPdelogo.cpp \
+ADM_vidContrast.h  ADM_vidMPdelogo.h \
 ADM_vobsubinfo.cpp \
 ADM_vidCrop.cpp  ADM_vidMSmooth_param.h  ADM_vobsubinfo.h \
 ASM_vidDenoise.cpp \
@@ -137,7 +127,7 @@
 ####### kdevelop will overwrite this part!!! (end)############
 INCLUDES = $(all_includes) -I../ADM_libraries -I../ADM_libraries/ADM_utilities -I../ADM_libraries/ADM_lavutil \
 			 $(FREETYPE_CFLAGS) $(ALTIVEC_SWITCH) -I../ADM_userInterfaces/ADM_commonUI -I../ADM_inputs
-noinst_HEADERS = ADM_vidlavdeint.h ADM_mpdetc.h \
+noinst_HEADERS = ADM_mpdetc.h \
 					  ADM_cache.h ADM_vidDecTel_param.h ADM_vidDecDec_param.h \
 					ADM_vidMSmooth_param.h ADM_vidEqualizer.h ADM_vobsubinfo.h ADM_vidVobSub.h \
 		ADM_vidEq2.h ADM_vidASS.h

Modified: branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidBlendRemoval.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidBlendRemoval.cpp	2007-01-13 11:10:25 UTC (rev 2714)
+++ branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidBlendRemoval.cpp	2007-01-13 11:31:17 UTC (rev 2715)
@@ -84,7 +84,7 @@
             &quot; Smaller value might mean more false positive&quot;));
     diaElemUInteger   noise(PX(noise),_(&quot;noise&quot;),0,99,_(&quot;If pixel are closer than noise, they are considered to be the same&quot;));
     diaElemUInteger   identical(PX(identical),_(&quot;identical&quot;),0,99,_(&quot;If metric is less than identical, images are considered identical&quot;));
-    diaElemToggle     show(PX(show),_(&quot;identical&quot;),_(&quot;Show metric in image (debug)&quot;));
+    diaElemToggle     show(PX(show),_(&quot;show&quot;),_(&quot;Show metric in image (debug)&quot;));
     
        diaElem *elems[]={&amp;thresh,&amp;noise,&amp;identical,&amp;show};
   

Copied: branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidDropOut.cpp (from rev 2489, branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidDropOut.cpp)
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidDropOut.cpp	2006-10-31 15:59:58 UTC (rev 2489)
+++ branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidDropOut.cpp	2007-01-13 11:31:17 UTC (rev 2715)
@@ -0,0 +1,226 @@
+/***************************************************************************
+                          ADM_vidDropOut.cpp  -  description
+                             -------------------
+    begin                : Mon Oct 7 2002
+    copyright            : (C) 2002 by Ron Reithoffer 
+    email                : &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">ron.reithoffer at chello.at</A>&gt;
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include &lt;stdio.h&gt;
+#include &lt;stdlib.h&gt;
+#include &lt;string.h&gt;
+#include &lt;ADM_assert.h&gt;
+#include &lt;math.h&gt;
+
+#include &quot;config.h&quot;
+#include &quot;fourcc.h&quot;
+#include &quot;avio.hxx&quot;
+#include &quot;config.h&quot;
+#include &quot;avi_vars.h&quot;
+#ifdef HAVE_ENCODER
+
+
+#include &quot;ADM_toolkit/toolkit.hxx&quot;
+#include &quot;ADM_editor/ADM_edit.hxx&quot;
+#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_vidDropOut.h&quot;
+#include &quot;ADM_filter/video_filters.h&quot;
+#include &quot;ADM_userInterfaces/ADM_commonUI/DIA_factory.h&quot;
+
+static FILTER_PARAM dropParam={1,{&quot;threshold&quot;}};
+
+
+SCRIPT_CREATE(dropout_script,ADMVideoDropOut,dropParam);
+
+
+//extern uint8_t distMatrix[256][256];
+extern uint32_t fixMul[16];
+
+BUILD_CREATE(dropout_create,ADMVideoDropOut);
+//_______________________________________________________________
+ 
+
+char  *ADMVideoDropOut::printConf(void)
+{
+	static char buf[50];
+
+ 	sprintf((char *)buf,&quot; DropOut :%ld&quot;,*_param);
+        return buf;
+}
+uint8_t  GUI_getIntegerValue(int *valye, int min, int max, char *title);	
+uint8_t ADMVideoDropOut::configure(AVDMGenericVideoStream *instream)
+{
+	_in=instream;
+        
+         diaElemUInteger chroma(_param,_(&quot;DropOut Threshold&quot;),1,255);    
+         diaElem *elems[]={&amp;chroma};
+  
+    return diaFactoryRun(&quot;Drop Out&quot;,sizeof(elems)/sizeof(diaElem *),elems);
+}
+ADMVideoDropOut::~ADMVideoDropOut()
+{
+	DELETE(_param);
+	delete vidCache;
+	vidCache=NULL;
+}
+
+//--------------------------------------------------------	
+ADMVideoDropOut::ADMVideoDropOut(AVDMGenericVideoStream *in,CONFcouple *couples)
+{
+
+  
+	_in=in;
+  	_info.encoding=1;
+	if(couples)
+	{
+  		_param=NEW( uint32_t);
+		couples-&gt;getCouple((char *)&quot;threshold&quot;,(uint32_t *)_param);
+	}
+	else
+	{
+		_param=NEW( uint32_t);
+		*_param=30;
+	}
+	vidCache=new VideoCache(4,_in);
+	memcpy(&amp;_info,_in-&gt;getInfo(),sizeof(_info));
+	
+ 
+}
+
+uint8_t	ADMVideoDropOut::getCoupledConf( CONFcouple **couples)
+{
+
+			ADM_assert(_param);
+			*couples=new CONFcouple(1);
+			(*couples)-&gt;setCouple((char *)&quot;threshold&quot;,(*_param));
+			return 1;
+
+}
+
+//                     1
+//		Get in range in 121 + coeff matrix
+//                     1
+//
+// If the value is too far away we ignore it
+// else we blend
+
+uint8_t ADMVideoDropOut::getFrameNumberNoAlloc(uint32_t frame,
+				uint32_t *len,
+   				ADMImage *data,
+				uint32_t *flags)
+{
+UNUSED_ARG(flags);
+
+uint32_t uvlen;
+uint32_t dlen,dflags;
+
+ADMImage	*_next;
+ADMImage	*_previous;
+ADMImage	*_current;
+
+	//		printf(&quot;\n DropOut : %lu\n&quot;,frame);
+
+
+
+
+			uvlen=    _info.width*_info.height;
+			*len=uvlen+(uvlen&gt;&gt;1);
+			  if(frame&gt; _info.nb_frames-1) return 0;
+			if(!frame || (frame==_info.nb_frames-1))
+			{
+				_current=vidCache-&gt;getImage(frame);
+				if(!_current) return 0;
+				memcpy(YPLANE(data),YPLANE(_current),uvlen);
+				memcpy(UPLANE(data),UPLANE(_current),uvlen&gt;&gt;2);
+				memcpy(VPLANE(data),VPLANE(_current),uvlen&gt;&gt;2);
+				vidCache-&gt;unlockAll();
+				return 1;
+			}
+			
+		_current=vidCache-&gt;getImage(frame);
+		_previous=vidCache-&gt;getImage(frame-1);
+		_next=vidCache-&gt;getImage(frame+1);
+		if(!_current || !_previous || !_next)
+		{
+			vidCache-&gt;unlockAll();
+			 return 0;	
+		}
+           	// for u &amp; v , no action -&gt; copy it as is
+           	memcpy(UPLANE(data),UPLANE(_current),uvlen&gt;&gt;2);
+		memcpy(VPLANE(data),VPLANE(_current),uvlen&gt;&gt;2);
+
+             uint8_t *inprev,*innext,*incur,*zout;
+
+              inprev=YPLANE(_previous)+1+_info.width;
+              innext=YPLANE(_next)+1+_info.width;
+              incur =YPLANE(_current)+1+_info.width;
+
+              zout=YPLANE(data)+_info.width+1;
+
+              int32_t c0,c1,c2,c3; //,_nextPix,_currPix,_prevPix,cc;
+
+              for(uint32_t y= _info.height-2;y&gt;2;y--)
+              	{
+		  c0=0;
+		  c1=0;
+		  c2=0;
+		  c3=0;
+
+	  	inprev=YPLANE(_previous)	+1+y*_info.width;
+              	innext=YPLANE(_next)		+1+y*_info.width;;
+              	incur =YPLANE(_current)	+1+y*_info.width;;
+
+			// look if the field is more different temporarily than spacially
+
+			    for(uint32_t x= _info.width-1;x&gt;1;x--)
+        		      	{
+
+						c0+=(abs(((*inprev))-( *incur    ))^2);
+						c1+=(abs(((*inprev))-( *innext   ))^2)&lt;&lt;1;
+						c0+=(abs(((*incur ))-( *innext   ))^2);
+
+
+						c2+=(abs(((    *(incur-_info.width*2) ))-( *(incur            )   ))^2)   ;
+						c3+=(abs(((    *(incur-_info.width*2) ))-( *(incur+_info.width*2)   ))^2)&lt;&lt;1;
+						c2+=(abs(((    *(incur            ) ))-( *(incur+_info.width*2)   ))^2)   ;
+
+
+						incur++;
+						innext++;
+						inprev++;
+				}
+
+		// If yes, replace the line by an average of next/previous image
+		inprev=YPLANE(_previous)	+y*_info.width;
+              	innext=YPLANE(_next)		+y*_info.width;;
+              	incur =YPLANE(_current)		+y*_info.width;;
+		zout=YPLANE(data)		+y*_info.width;
+
+		if (c1&lt;c0 &amp;&amp;c3&lt;c2)
+		{
+		    for(uint32_t x= _info.width;x&gt;0;x--)
+       			      	{
+					*zout= ((*(inprev))+(*(innext)))&gt;&gt;1 ;
+					zout++;
+					innext++;
+					inprev++;
+				}
+		}
+		else
+			memcpy(zout,incur,_info.width);
+	}
+	data-&gt;copyInfo(_current);
+	vidCache-&gt;unlockAll();
+return 1;
+}
+
+
+#endif

Copied: branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidDropOut.h (from rev 2489, branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidDropOut.h)

Copied: branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidPulldown.cpp (from rev 2489, branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidPulldown.cpp)
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidPulldown.cpp	2006-10-31 15:59:58 UTC (rev 2489)
+++ branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidPulldown.cpp	2007-01-13 11:31:17 UTC (rev 2715)
@@ -0,0 +1,183 @@
+/***************************************************************************
+                       Pulldown : Duplicate frame fields to convert
+		       	24 fps to 30 fps movie
+
+			1 2 3 4       1  2  3  4  4
+			1 2 3 4 --&gt; 1  2  2  3  4
+
+
+    begin                : Thu Mar 21 2002
+    copyright            : (C) 2002 by mean
+    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#include &lt;stdio.h&gt;
+#include &lt;stdlib.h&gt;
+#include &lt;string.h&gt;
+#include &lt;ADM_assert.h&gt;
+
+#include &quot;config.h&quot;
+#include &quot;fourcc.h&quot;
+#include &quot;avio.hxx&quot;
+#include &quot;config.h&quot;
+#include &quot;avi_vars.h&quot;
+
+
+#include &quot;ADM_toolkit/toolkit.hxx&quot;
+#include &quot;ADM_editor/ADM_edit.hxx&quot;
+#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_video/ADM_vidFieldUtil.h&quot;
+#include &quot;ADM_vidPulldown.h&quot;
+#include &quot;ADM_video/ADM_interlaced.h&quot;
+#include &quot;ADM_osSupport/TLK_clock.h&quot;
+#include &quot;ADM_osSupport/ADM_debugID.h&quot;
+#define MODULE_NAME MODULE_FILTER
+#include &quot;ADM_osSupport/ADM_debug.h&quot;
+#include &quot;ADM_filter/video_filters.h&quot;
+
+
+static FILTER_PARAM swapParam={0,{&quot;&quot;}};
+SCRIPT_CREATE(pulldown_script,ADMVideoPullDown,swapParam);
+BUILD_CREATE(pulldown_create,ADMVideoPullDown);
+
+char *ADMVideoPullDown::printConf( void )
+{
+ 	static char buf[50];
+
+ 	sprintf((char *)buf,&quot; Pulldown&quot;);
+        return buf;
+}
+//_______________________________________________________________
+ADMVideoPullDown::ADMVideoPullDown(
+									AVDMGenericVideoStream *in,CONFcouple *setup)
+{
+UNUSED_ARG(setup);
+  	_in=in;
+   	memcpy(&amp;_info,_in-&gt;getInfo(),sizeof(_info));
+	_info.fps1000=(_info.fps1000*5)/4;
+	_info.nb_frames=(_info.nb_frames*5)/4;
+	for(uint32_t i=0;i&lt;5;i++)
+	{
+		_uncompressed[i]=new ADMImage(_info.width,_info.height);
+	}
+	_cacheStart=0xfffffff;
+}
+// ___ destructor_____________
+ADMVideoPullDown::~ADMVideoPullDown()
+{
+	for(uint32_t i=0;i&lt;5;i++)
+	{
+ 		delete  _uncompressed[i];
+	}
+}
+
+
+uint8_t ADMVideoPullDown::getFrameNumberNoAlloc(uint32_t frame,
+				uint32_t *len,
+   				ADMImage *data,
+				uint32_t *flags)
+{
+//static Image in,out;
+			if(frame&gt;=_info.nb_frames)
+			{
+				printf(&quot;out of bound frame (%lu / %lu)\n&quot;,frame,_info.nb_frames);
+				return 0;
+			}
+
+		uint32_t w=_info.width;
+		uint32_t h=_info.height;
+		uint32_t page=w*h;
+		uint32_t i;
+
+		uint32_t target;
+		uint32_t loop=0;
+
+		*len=(page*3)&gt;&gt;1;
+
+cont:
+
+		target=frame-((frame)%5);
+		// got it ?
+		if(_cacheStart==target)
+		{
+			uint32_t index;
+
+			aprintf(&quot;Filter: It is in cache...(cachestart=%lu)\n&quot;,_cacheStart);
+			index=frame%5;
+			aprintf(&quot;getting %lu)\n&quot;,index);
+			memcpy(YPLANE(data),YPLANE(_uncompressed[index]),page);
+			memcpy(UPLANE(data),UPLANE(_uncompressed[index]),page&gt;&gt;2);
+			memcpy(VPLANE(data),VPLANE(_uncompressed[index]),page&gt;&gt;2);
+			*flags=0;			
+			return 1;
+		}
+		else
+		{
+			aprintf(&quot;Not in cache...\n&quot;);
+		}
+		// Else ask the 5 corresponding frame
+		_cacheStart=target;
+		target=(target*4)/5;
+
+		uint32_t dflags,dlen;
+#define GET_FRAME(x,y) if(!_in-&gt;getFrameNumberNoAlloc(x, &amp;dlen,_uncompressed[y],&amp;dflags)) \
+ {\
+				 	 	printf(&quot;Cannot get frame %lu\n&quot;,target+i);\
+					 	return 0;     \
+				 }
+
+		GET_FRAME(target+0,0);
+		GET_FRAME(target+1,1);
+		GET_FRAME(target+2,3);
+		GET_FRAME(target+3,4);
+		// copy chroma 1-&gt;2
+		memcpy(UPLANE(_uncompressed[2]),UPLANE(_uncompressed[1]),page&gt;&gt;2);
+		memcpy(VPLANE(_uncompressed[2]),VPLANE(_uncompressed[1]),page&gt;&gt;2);
+#define COPY_FIELD \
+		for(uint32_t y=0;y&lt;_info.height&gt;&gt;1;y++) \
+		{ \
+			memcpy(out,in,_info.width); \
+			in+=_info.width&lt;&lt;1; \
+			out+=_info.width&lt;&lt;1; \
+		}
+
+		// now we merge 1 &amp; 3 into 2
+
+		uint8_t *in,*out;
+		in=YPLANE(_uncompressed[1]);
+		out=YPLANE(_uncompressed[2]);
+		COPY_FIELD;
+
+
+		// merge 3-&gt;2
+		//
+		//	0 1 x 2 3
+		//      0 1 x 2 3
+		//
+		//  0 1 1 2 3
+		//  0 1 X 2 3
+		in=YPLANE(_uncompressed[3])+w;
+		out=YPLANE(_uncompressed[2])+w;
+		COPY_FIELD;
+		//  0 1 1 2 3
+		//  0 1 2 2 3
+		in=YPLANE(_uncompressed[4])+w;
+		out=YPLANE(_uncompressed[3])+w;
+		//  0 1 1 2 3
+		//  0 1 2 3 3
+		COPY_FIELD;
+		goto cont;
+		return 1;
+}
+
+
+

Copied: branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidPulldown.h (from rev 2489, branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidPulldown.h)

Copied: branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidStabilize.cpp (from rev 2489, branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidStabilize.cpp)
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidStabilize.cpp	2006-10-31 15:59:58 UTC (rev 2489)
+++ branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidStabilize.cpp	2007-01-13 11:31:17 UTC (rev 2715)
@@ -0,0 +1,212 @@
+/***************************************************************************
+                          ADM_vidStabilize.cpp  -  description
+                             -------------------
+    begin                : Mon Oct 7 2002
+    copyright            : (C) 2002 by mean
+    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include &lt;stdio.h&gt;
+#include &lt;stdlib.h&gt;
+#include &lt;string.h&gt;
+#include &lt;ADM_assert.h&gt;
+#include &lt;math.h&gt;
+
+#include &quot;config.h&quot;
+#include &quot;fourcc.h&quot;
+#include &quot;avio.hxx&quot;
+#include &quot;config.h&quot;
+#include &quot;avi_vars.h&quot;
+#ifdef HAVE_ENCODER
+
+
+#include &quot;ADM_toolkit/toolkit.hxx&quot;
+#include &quot;ADM_editor/ADM_edit.hxx&quot;
+#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_vidStabilize.h&quot;
+#include &quot;ADM_filter/video_filters.h&quot;
+
+#include &quot;ADM_userInterfaces/ADM_commonUI/DIA_factory.h&quot;
+
+static FILTER_PARAM stabParam={1,{&quot;param&quot;}};
+
+
+SCRIPT_CREATE(stabilize_script,ADMVideoStabilize,stabParam);
+extern uint8_t distMatrix[256][256];
+extern uint32_t fixMul[16];
+
+BUILD_CREATE(stabilize_create,ADMVideoStabilize);
+
+
+
+char 	*ADMVideoStabilize::printConf(void)
+{
+  static char buf[50];
+
+ 	sprintf((char *)buf,&quot; Stabilize :%ld&quot;,*_param);
+        return buf;
+}
+uint8_t  GUI_getIntegerValue(int *valye, int min, int max, char *title);
+uint8_t ADMVideoStabilize::configure(AVDMGenericVideoStream *instream)
+{
+int i;
+	_in=instream;
+        
+         diaElemUInteger chroma(_param,_(&quot;DropOut Threshold&quot;),1,255);    
+         diaElem *elems[]={&amp;chroma};
+  
+    return diaFactoryRun(&quot;Stabilize&quot;,sizeof(elems)/sizeof(diaElem *),elems);
+	
+}
+//--------------------------------------------------------	
+ADMVideoStabilize::ADMVideoStabilize(AVDMGenericVideoStream *in,CONFcouple *couples)
+{
+  //uint32_t frame;
+  _uncompressed=NULL;
+  _in=in;
+  memcpy(&amp;_info,in-&gt;getInfo(),sizeof(_info)); 
+ 
+  _info.encoding=1;
+  if(couples)
+  {
+			_param=NEW(uint32_t);
+			ADM_assert(couples-&gt;getCouple((char *)&quot;param&quot;,_param));
+	}
+	else
+	{
+			_param=NEW( uint32_t);
+			*_param=30;
+	}
+	vidCache=new VideoCache(5,_in);
+ 
+}
+ADMVideoStabilize::~ADMVideoStabilize()
+{
+ 
+ 	DELETE(_param);
+	if(vidCache) delete vidCache;
+	vidCache=NULL;
+}
+
+
+uint8_t	ADMVideoStabilize::getCoupledConf( CONFcouple **couples)
+{
+
+			ADM_assert(_param);
+			*couples=new CONFcouple(1);
+ 			(*couples)-&gt;setCouple((char *)&quot;param&quot;,*_param);
+
+			return 1;
+
+}
+//                     1
+//		Get in range in 121 + coeff matrix
+//                     1
+//
+// If the value is too far away we ignore it
+// else we blend
+
+uint8_t ADMVideoStabilize::getFrameNumberNoAlloc(uint32_t frame,
+				uint32_t *len,
+   				ADMImage *data,
+				uint32_t *flags)
+{
+UNUSED_ARG(flags);
+uint32_t uvlen;
+uint32_t dlen,dflags;
+
+ADMImage	*_next;
+ADMImage	*_previous;  	
+ADMImage	*_current;
+		
+		uvlen=    _info.width*_info.height;
+		*len=uvlen+(uvlen&gt;&gt;1);
+		if(frame&gt; _info.nb_frames-1) return 0;
+		_current=vidCache-&gt;getImage(frame);
+		if(!_current) return 0;
+		data-&gt;copyInfo(_current);
+		if(!frame || (frame==_info.nb_frames-1))
+		{
+
+			data-&gt;duplicate(_current);
+			vidCache-&gt;unlockAll();
+			return 1;
+		}	 
+   		_previous=vidCache-&gt;getImage(frame-1);		
+		if(!_previous)
+		{
+			vidCache-&gt;unlockAll();
+			return 0;
+		}
+   		_next=vidCache-&gt;getImage(frame+1);
+		if(!_next)
+		{
+			vidCache-&gt;unlockAll();
+			return 0;
+		}
+		
+           // for u &amp; v , no action -&gt; copy it as is
+           memcpy(UPLANE(data),UPLANE(_current),uvlen&gt;&gt;2);
+	   memcpy(VPLANE(data),VPLANE(_current),uvlen&gt;&gt;2);
+
+           uint8_t *inprev,*innext,*incur,*zout;
+              
+              inprev=YPLANE(_previous)+1+_info.width;
+              innext=YPLANE(_next)+1+_info.width;
+              incur =YPLANE(_current)+1+_info.width;
+              
+              zout=YPLANE(data)+_info.width+1;
+              
+             
+              uint8_t *nl,*pl,*nc,*pc;
+              
+              uint16_t c,coeff;
+              uint32_t x;
+              for(uint32_t y= _info.height-1;y&gt;1;y--)
+              	{
+			nl=incur+_info.width;
+			pl=incur-_info.width;
+			nc=incur+1;
+			pc=incur-1;		   
+								   
+		        for(x= _info.width-1;x&gt;1;x--)
+        		{
+	               		c=*incur*4;;
+	                    	coeff=4;
+#define PONDERATE(x,p) if(distMatrix[*incur][x]&lt;*_param)	                      \
+{ c+=x;coeff++;}
+																PONDERATE(*innext,1);
+				PONDERATE(*inprev,1);
+				PONDERATE(*(pc),1);
+				PONDERATE(*(nc),1);
+				PONDERATE(*(nl),1);
+				PONDERATE(*(pl),1);
+													//*zout=(uint8_t)floor(0.49+(c/coeff));
+																ADM_assert(coeff);
+				ADM_assert(coeff&lt;16);
+				*zout=(c*fixMul[coeff])&gt;&gt;16;
+				zout++;
+				incur++;
+				innext++;
+				inprev++;	
+				nl++;pl++;nc++;pc++;	  
+			}
+			zout+=2;
+			incur+=2;
+			innext+=2;
+			inprev+=2;
+		}
+		vidCache-&gt;unlockAll();
+		return 1;	
+}
+
+
+#endif

Copied: branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidStabilize.h (from rev 2489, branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidStabilize.h)

Copied: branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidUVSwap.cpp (from rev 2489, branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidUVSwap.cpp)
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidUVSwap.cpp	2006-10-31 15:59:58 UTC (rev 2489)
+++ branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidUVSwap.cpp	2007-01-13 11:31:17 UTC (rev 2715)
@@ -0,0 +1,102 @@
+/***************************************************************************
+                          ADM_vidUVSwap.cpp  -  description
+                             -------------------
+    begin                : Tue Sep 10 2002
+    copyright            : (C) 2002 by mean
+    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+ #include &lt;stdio.h&gt;
+#include &lt;stdlib.h&gt;
+#include &lt;string.h&gt;
+#include &lt;ADM_assert.h&gt;
+
+#include &quot;config.h&quot;
+#include &quot;fourcc.h&quot;
+#include &quot;avio.hxx&quot;
+#include &quot;config.h&quot;
+#include &quot;avi_vars.h&quot;
+#ifdef HAVE_ENCODER
+
+
+#include &quot;ADM_toolkit/toolkit.hxx&quot;
+#include &quot;ADM_editor/ADM_edit.hxx&quot;
+#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_vidUVSwap.h&quot;
+#include &quot;ADM_filter/video_filters.h&quot;
+
+
+static FILTER_PARAM nullParam={0,{&quot;&quot;}};
+
+
+SCRIPT_CREATE(swapuv_script,ADMVideoUVSwap,nullParam);
+BUILD_CREATE(swapuv_create,ADMVideoUVSwap);
+
+char *ADMVideoUVSwap::printConf( void )
+{
+ 	static char buf[50];
+
+ 	sprintf((char *)buf,&quot; UV Swap&quot;);
+        return buf;
+}
+
+ADMVideoUVSwap::ADMVideoUVSwap(  AVDMGenericVideoStream *in,CONFcouple *setup)
+{
+UNUSED_ARG(setup);
+	_buf=NULL;
+ 	_in=in;
+   	memcpy(&amp;_info,_in-&gt;getInfo(),sizeof(_info));
+
+		
+  _info.encoding=1;
+ _buf=new uint8_t [(_info.width*_info.height)&gt;&gt;2];
+
+
+}
+ADMVideoUVSwap::~ADMVideoUVSwap()
+{
+		if(_buf)
+		{
+            		delete []_buf;
+			_buf=NULL;
+		}
+}
+uint8_t ADMVideoUVSwap::getFrameNumberNoAlloc(uint32_t frame,
+				uint32_t *len,
+   				ADMImage *data,
+				uint32_t *flags)
+{
+
+		ADM_assert(frame&lt;_info.nb_frames);
+		// read uncompressed frame
+       		if(!_in-&gt;getFrameNumberNoAlloc(frame, len,data,flags)) return 0;
+
+		uint32_t sz;
+		uint8_t *start;
+					
+			sz=_info.width*_info.height;
+			sz&gt;&gt;=2;
+				
+			start=UPLANE(data);
+			memcpy(_buf,start,sz);
+					
+			memcpy(UPLANE(data),VPLANE(data),sz);
+			memcpy(VPLANE(data),_buf,sz);
+			
+
+
+      return 1;
+}
+
+
+
+#endif

Copied: branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidUVSwap.h (from rev 2489, branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidUVSwap.h)

Copied: branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidVlad.cpp (from rev 2489, branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidVlad.cpp)
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidVlad.cpp	2006-10-31 15:59:58 UTC (rev 2489)
+++ branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidVlad.cpp	2007-01-13 11:31:17 UTC (rev 2715)
@@ -0,0 +1,530 @@
+/***************************************************************************
+                          ADM_vidVlad.cpp  -  description
+                             -------------------
+    begin                : Fri Jan 3 2003
+    copyright            : (C) 2003 by mean
+    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
+    
+    Port from Vlad59 / Jim Casaburi TemporalCleaner from avisynth YV12
+    
+    Luma only
+   	Patch by Daniel Glockner 
+    
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include &lt;stdio.h&gt;
+#include &lt;stdlib.h&gt;
+#include &lt;string.h&gt;
+#include &lt;ADM_assert.h&gt;
+
+#include &quot;config.h&quot;
+#include &quot;fourcc.h&quot;
+#include &quot;avio.hxx&quot;
+#include &quot;config.h&quot;
+#include &quot;avi_vars.h&quot;
+#include &quot;admmangle.h&quot;
+
+#include &quot;ADM_toolkit/toolkit.hxx&quot;
+#include &quot;ADM_editor/ADM_edit.hxx&quot;
+#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_vidVlad.h&quot;
+#include &quot;ADM_filter/video_filters.h&quot;
+#include &quot;ADM_osSupport/ADM_cpuCap.h&quot;
+
+#include &quot;ADM_userInterfaces/ADM_commonUI/DIA_factory.h&quot;
+
+#if  defined(ARCH_X86_64)
+#define COUNTER long int
+#else
+#define COUNTER int
+#endif
+
+#if defined( ARCH_X86)  || defined(ARCH_X86_64)
+static void ProcessCPlane_mmxe(unsigned char *source,
+				   unsigned char *prev,
+				   unsigned char* dest,
+				   unsigned char* mask,
+				   int width, int height,
+				   uint64_t  threshold);
+static void ProcessYPlane_mmxe( unsigned char *source,
+				    unsigned char *prev,
+				    unsigned char* dest,
+				    unsigned char* mask,
+				    long  int width, long int height,
+				    uint64_t  threshold);
+#endif
+static void ProcessCPlane_C(unsigned char *source,
+				   unsigned char *prev,
+				   unsigned char* dest,
+				   unsigned char* mask,
+				   int width, int height,
+				   uint64_t  threshold);
+static void ProcessYPlane_C( unsigned char *source,
+				    unsigned char *prev,
+				    unsigned char* dest,
+				    unsigned char* mask,
+				    long  int width, long int height,
+				    uint64_t  threshold);
+
+#define EXPAND(x) { x=x+(x&lt;&lt;8)+(x&lt;&lt;16)+(x&lt;&lt;24)+(x&lt;&lt;32)+(x&lt;&lt;40) \
+										+(x&lt;&lt;48)+(x&lt;&lt;56);}
+static FILTER_PARAM vladParam={2,{&quot;ythresholdMask&quot;,&quot;cthresholdMask&quot;}};
+
+
+SCRIPT_CREATE(vladsmooth_script,AVDMVideoVlad,vladParam);
+BUILD_CREATE(vladsmooth_create,AVDMVideoVlad);
+
+
+char *AVDMVideoVlad::printConf(void)
+{
+	static char buf[50];
+ 	
+	sprintf((char *)buf,&quot; Temporal Cleaner : Y: %02lu / c: %02lu&quot;,_param-&gt;ythresholdMask,
+				_param-&gt;cthresholdMask	);
+        return buf;
+}
+
+
+uint8_t AVDMVideoVlad::configure( AVDMGenericVideoStream *instream)
+{
+UNUSED_ARG(instream);
+int i,j;
+
+   diaElemUInteger luma(&amp;(_param-&gt;ythresholdMask),_(&quot;Luma Temporal Threshold&quot;),0,255);
+   diaElemUInteger chroma(&amp;(_param-&gt;cthresholdMask),_(&quot;Chroma Temporal Threshold&quot;),0,255);
+    
+    diaElem *elems[]={&amp;luma,&amp;chroma};
+  
+    if(diaFactoryRun(&quot;Temporal Cleaner&quot;,sizeof(elems)/sizeof(diaElem *),elems))
+    {
+      ythresholdMask = (uint64_t)_param-&gt;ythresholdMask;
+      cthresholdMask = (uint64_t)_param-&gt;cthresholdMask;	   
+
+      EXPAND(	ythresholdMask);
+      EXPAND(	cthresholdMask);	
+      return 1;
+    }
+    return 0;
+}
+AVDMVideoVlad::AVDMVideoVlad(  AVDMGenericVideoStream *in,CONFcouple *couples)
+		
+
+{
+	_in=in;
+	memcpy(&amp;_info,_in-&gt;getInfo(),sizeof(_info));
+	num_frame=0xFFFF0000;
+	if(couples)
+	{
+		_param=NEW(VLAD_PARAM);
+		GET(ythresholdMask);
+		GET(cthresholdMask);
+	}
+	else
+	{
+		_param=NEW(VLAD_PARAM);
+		ADM_assert(_param);
+	  _param-&gt;ythresholdMask=5;
+ 	  _param-&gt;cthresholdMask=0;
+   }
+    	_mask=new uint8_t[_info.width*_info.height/4];
+  	memset(_mask,0,	_info.width*_info.height/4);
+	  
+	   ythresholdMask=0;
+	   ythresholdMask = (uint64_t)_param-&gt;ythresholdMask;
+	   cthresholdMask = (uint64_t)_param-&gt;cthresholdMask;	   
+
+		EXPAND(	ythresholdMask);
+		EXPAND(	cthresholdMask);
+	vidCache=new VideoCache(2,in);
+
+	ProcessYPlane = ProcessYPlane_C;
+	ProcessCPlane = ProcessCPlane_C;
+#if defined( ARCH_X86)  || defined(ARCH_X86_64)
+#if 0
+// Check
+	if(CpuCaps::hasMMXEXT() &amp;&amp; (_info.width&amp;7) == 0)
+	{
+		ProcessYPlane = ProcessYPlane_mmxe;
+		ProcessCPlane = ProcessCPlane_mmxe;
+	}
+#endif	
+#endif
+}
+
+
+uint8_t	AVDMVideoVlad::getCoupledConf( CONFcouple **couples)
+{
+
+			ADM_assert(_param);
+			*couples=new CONFcouple(2);
+
+#define CSET(x)  (*couples)-&gt;setCouple((char *)#x,(_param-&gt;x))
+	CSET(ythresholdMask);
+	CSET(cthresholdMask);
+	return 1;
+
+}
+AVDMVideoVlad::~AVDMVideoVlad()
+{
+		delete [] _mask;
+		DELETE(_param);
+		delete vidCache;
+}  									
+
+void ProcessYPlane_C( unsigned char *source,
+				    unsigned char *prev,
+				    unsigned char* dest,
+				    unsigned char* mask, 
+				    long  int width, long int height,
+				    uint64_t  threshold)
+{
+	int thp=threshold&amp;0xff;
+	int thn=-thp;
+	
+	width &gt;&gt;= 1;
+
+	for (int y = height &gt;&gt; 1; --y &gt;= 0;)
+	{
+		int x2 = -width;
+		int x = x2*2;
+
+		source += 4*width;
+		prev += 4*width;
+		dest += 4*width;
+		mask += width;
+
+		do {
+			int yc,yp;
+			int m = 0;
+			yc=source[x*2];
+			yp=prev[x*2];
+			if(thn&lt;=yc-yp &amp;&amp; yc-yp&lt;=thp) {
+				yc=(yc+yp+1)&gt;&gt;1;
+				m=1;
+			}
+			source[x*2]=dest[x*2]=yc;
+
+			yc=source[x*2+1];
+			yp=prev[x*2+1];
+			if(thn&lt;=yc-yp &amp;&amp; yc-yp&lt;=thp) {
+				yc=(yc+yp+1)&gt;&gt;1;
+				m++;
+			}
+			source[x*2+1]=dest[x*2+1]=yc;
+
+			x++;
+
+			yc=source[x2*2];
+			yp=prev[x2*2];
+			if(thn&lt;=yc-yp &amp;&amp; yc-yp&lt;=thp) {
+				yc=(yc+yp+1)&gt;&gt;1;
+				m++;
+			}
+			source[x2*2]=dest[x2*2]=yc;
+
+			yc=source[x2*2+1];
+			yp=prev[x2*2+1];
+			if(thn&lt;=yc-yp &amp;&amp; yc-yp&lt;=thp) {
+			  yc=(yc+yp+1)&gt;&gt;1;
+			  m++;
+			}
+			source[x2*2+1]=dest[x2*2+1]=yc;
+
+			mask[x2]=m;
+		} while(++x2 &lt; 0);
+	}
+}
+
+void ProcessCPlane_C( unsigned char *source,
+				    unsigned char *prev,
+				    unsigned char* dest,
+				    unsigned char* mask, 
+				    int width, int height,
+				    uint64_t  threshold)
+{
+	int thp = threshold&amp;0xff;
+	int thn = -thp;
+	long int i = width*height;
+	
+	source += i;
+	prev += i;
+	dest += i;
+	mask += i;
+	i = -i;
+	
+	do {
+		int cc,cp;
+		cc=source[i];
+		cp=prev[i];
+		if(thn&lt;=cc-cp &amp;&amp; cc-cp&lt;=thp &amp;&amp; mask[i]&gt;3) {
+			cc=(cc+cp+1)&gt;&gt;1;
+		}
+		source[i]=dest[i]=cc;
+	} while(++i &lt; 0);
+}
+
+#if defined( ARCH_X86)  || defined(ARCH_X86_64)
+void ProcessYPlane_mmxe( unsigned char *source,
+				    unsigned char *prev,
+				    unsigned char* dest,
+				    unsigned char* mask, 
+				    long  int width, long int height,
+				    uint64_t  threshold)
+{
+	COUNTER tmp,tmp2;
+	long int  h2, w8;
+
+	w8 = -(width &gt;&gt; 3);
+	width &gt;&gt;= 1;
+
+__asm__ __volatile__(
+			&quot;movq (%0),%%mm6 \n\t&quot;
+			:
+			: &quot;r&quot;(&amp;threshold)
+		);
+	
+	for (h2 = height &gt;&gt; 1; --h2 &gt;= 0;)
+	{
+		source += 4*width;
+		prev += 4*width;
+		dest += 4*width;
+		mask += width;
+
+#define REG_source &quot;%2&quot;
+#define REG_dest &quot;%3&quot;
+#define REG_prev &quot;%4&quot;
+#define REG_mask &quot;%5&quot;
+#define REG_counter &quot;%0&quot;
+#define REG_counter2 &quot;%1&quot;
+	  
+__asm__ __volatile__(
+&quot;prefetchnta (&quot;REG_source&quot;,&quot;REG_counter&quot;,8) \n\t&quot;
+&quot;prefetchnta (&quot;REG_prev&quot;,&quot;REG_counter&quot;,8) \n\t&quot;
+&quot;.p2align 4\n\t&quot;
+&quot;pxor %%mm7,%%mm7\n\t&quot;
+&quot;HLine%=:  \n\t&quot;
+
+&quot;prefetchnta (&quot;REG_source&quot;,&quot;REG_counter2&quot;,8) \n\t&quot;
+&quot;prefetchnta (&quot;REG_prev&quot;,&quot;REG_counter2&quot;,8) \n\t&quot;
+
+&quot;movq (&quot;REG_source&quot;,&quot;REG_counter&quot;,8),%%mm0 \n\t&quot;   // mm0 &lt;- lsource+(size/8)*8
+&quot;movq (&quot;REG_prev&quot;,&quot;REG_counter&quot;,8),%%mm1 \n\t&quot;     // mm1 &lt;- lprev+(size/8)*8
+&quot;movq %%mm0,%%mm2 \n\t&quot;               // mm2 &lt;- mm0  source
+&quot;movq %%mm1,%%mm3 \n\t&quot;               // mm3 &lt;-mm1   oold
+&quot;psubusb %%mm1,%%mm0 \n\t&quot;            // mm0=mm0-mm1
+&quot;psubusb %%mm2,%%mm1 \n\t&quot;            // mm1=mm1-mm2
+&quot;por %%mm1,%%mm0 \n\t&quot;                // mm0=mm0 or mm1
+&quot;pavgb %%mm2,%%mm3 \n\t&quot;              // mm3= 'mm2+mm3&quot;/2
+&quot; \n\t&quot;                               // mm0=mm6-mm0 diff to threshold
+&quot;psubusb %%mm6,%%mm0 \n\t&quot;  // &gt;0 ?
+&quot;pcmpeqb %%mm7,%%mm0 \n\t&quot;
+&quot; \n\t&quot;
+&quot;movq %%mm0,%%mm4 \n\t&quot;               // masked diff &gt;m4
+&quot; \n\t&quot;
+&quot;pand %%mm0,%%mm3 \n\t&quot;               // mm0=old and mask diff
+&quot;pandn %%mm2,%%mm0 \n\t&quot;              // mm1= source and invert diff
+&quot;por %%mm3,%%mm0 \n\t&quot;                // m0 = mix
+&quot;movq %%mm0,(&quot;REG_dest&quot;,&quot;REG_counter&quot;,8) \n\t&quot;   // store to des+ecx*8
+&quot;movq %%mm0,(&quot;REG_source&quot;,&quot;REG_counter&quot;,8) \n\t&quot; // store to mask+ecx*8
+
+&quot;movq (&quot;REG_source&quot;,&quot;REG_counter2&quot;,8),%%mm0 \n\t&quot;  // mm0 &lt;- lsource+(size/8)*8
+&quot;movq (&quot;REG_prev&quot;,&quot;REG_counter2&quot;,8),%%mm1 \n\t&quot;    // mm1 &lt;- lprev+(size/8)*8
+
+&quot;prefetchnta 8(&quot;REG_source&quot;,&quot;REG_counter&quot;,8) \n\t&quot;
+&quot;prefetchnta 8(&quot;REG_prev&quot;,&quot;REG_counter&quot;,8) \n\t&quot;
+&quot;add $1,&quot;REG_counter&quot; \n\t&quot;
+
+&quot;movq %%mm0,%%mm2 \n\t&quot;               // mm2 &lt;- mm0  source
+&quot;movq %%mm1,%%mm3 \n\t&quot;               // mm3 &lt;- mm1  oold
+&quot;psubusb %%mm1,%%mm0 \n\t&quot;            // mm0=mm0-mm1
+&quot;psubusb %%mm2,%%mm1 \n\t&quot;            // mm1=mm1-mm2
+&quot;por %%mm1,%%mm0 \n\t&quot;                // mm0=mm0 or mm1
+&quot;pavgb %%mm2,%%mm3 \n\t&quot;              // mm3= 'mm2+mm3&quot;/2
+&quot; \n\t&quot;                               // mm0=mm6-mm0 diff to threshold
+&quot;psubusb %%mm6,%%mm0 \n\t&quot;  // &gt;0 ?
+&quot;pcmpeqb %%mm7,%%mm0 \n\t&quot;
+&quot; \n\t&quot;
+
+&quot;pand %%mm0,%%mm4 \n\t&quot;
+&quot;movq %%mm4,%%mm1 \n\t&quot;               // masked diff -&gt; mm1
+&quot;psrlw $8,%%mm4 \n\t&quot;                 // shift
+&quot;pand %%mm4,%%mm1 \n\t&quot;               // if right &amp; left triggered
+&quot;packuswb %%mm1,%%mm1 \n\t&quot;           // packed to 4 bytes
+&quot;movd %%mm1,(&quot;REG_mask&quot;,&quot;REG_counter2&quot;,4) \n\t&quot;     // store mask m4-&gt;mask+ecx*4
+
+&quot; \n\t&quot;
+&quot;pand %%mm0,%%mm3 \n\t&quot;               // mm3 = old and mask diff
+&quot;pandn %%mm2,%%mm0 \n\t&quot;              // mm0 = source and invert diff
+&quot;por %%mm3,%%mm0 \n\t&quot;                // mm0 = mix
+&quot;movq %%mm0,(&quot;REG_dest&quot;,&quot;REG_counter2&quot;,8) \n\t&quot;   // store to des+ecx*8
+&quot;movq %%mm0,(&quot;REG_source&quot;,&quot;REG_counter2&quot;,8) \n\t&quot; // store to mask+ecx*8
+
+
+&quot;add $1,&quot;REG_counter2&quot; \n\t&quot;          // add 1 to ecv
+&quot;jnz HLine%=&quot;                         // while !=0
+ : &quot;=r&quot;(tmp), &quot;=r&quot;(tmp2)
+ : &quot;r&quot;(source), &quot;r&quot;(dest), &quot;r&quot;(prev),
+   &quot;r&quot;(mask)
+   , &quot;0&quot;(2*w8), &quot;1&quot;(w8)
+ );
+
+	}
+ __asm__ __volatile__(&quot;emms \n\t&quot;);
+}
+
+
+//#pragma -O0
+
+void ProcessCPlane_mmxe(unsigned char *source,
+				   unsigned char *prev, 
+				   unsigned char* dest, 
+				   unsigned char* mask, 
+				   int width, int height,
+				   uint64_t  threshold)
+{
+	long int w8;
+	COUNTER tmp;
+
+	w8 = width*height;
+	source += w8;
+	dest += w8;
+	prev += w8;
+	mask += w8;
+	w8 = -(w8&gt;&gt;3);
+
+__asm__ __volatile__(
+			&quot;movq (%0),%%mm6 \n\t&quot;
+			:
+			: &quot;r&quot;(&amp;threshold)
+		);
+	
+__asm__ __volatile__ (
+&quot;prefetchnta (&quot;REG_source&quot;,&quot;REG_counter&quot;,8) \n\t&quot;
+&quot;prefetchnta (&quot;REG_prev&quot;,&quot;REG_counter&quot;,8) \n\t&quot;
+&quot;prefetchnta (&quot;REG_mask&quot;,&quot;REG_counter&quot;,8) \n\t&quot;
+&quot;.p2align 4\n\t&quot;
+&quot;pxor %%mm7,%%mm7\n\t&quot;
+&quot;Lfoo%=:  \n\t&quot;
+&quot;prefetchnta 8(&quot;REG_source&quot;,&quot;REG_counter&quot;,8) \n\t&quot;
+&quot;prefetchnta 8(&quot;REG_prev&quot;,&quot;REG_counter&quot;,8) \n\t&quot;
+&quot;prefetchnta 8(&quot;REG_mask&quot;,&quot;REG_counter&quot;,8) \n\t&quot;
+&quot;movq (&quot;REG_source&quot;,&quot;REG_counter&quot;,8),%%mm0 \n\t&quot;
+&quot;movq (&quot;REG_prev&quot;,&quot;REG_counter&quot;,8),%%mm1 \n\t&quot;
+&quot;movq %%mm0,%%mm2 \n\t&quot;
+&quot;movq %%mm1,%%mm3 \n\t&quot;
+&quot;psubusb %%mm1,%%mm0 \n\t&quot;
+&quot;psubusb %%mm2,%%mm1 \n\t&quot;
+&quot;por %%mm1,%%mm0 \n\t&quot;
+&quot;pavgb %%mm2,%%mm3 \n\t&quot;
+&quot; \n\t&quot;
+&quot;psubusb %%mm6,%%mm0 \n\t&quot;
+&quot;pcmpeqb %%mm7,%%mm0 \n\t&quot;
+&quot; \n\t&quot;
+&quot;pand (&quot;REG_mask&quot;,&quot;REG_counter&quot;,8),%%mm0 \n\t&quot;
+&quot; \n\t&quot;
+&quot;pand %%mm0,%%mm3 \n\t&quot;
+&quot;pandn %%mm2,%%mm0 \n\t&quot;
+&quot;por %%mm3,%%mm0 \n\t&quot;
+&quot;movq %%mm0,(&quot;REG_dest&quot;,&quot;REG_counter&quot;,8) \n\t&quot;
+&quot;movq %%mm0,(&quot;REG_source&quot;,&quot;REG_counter&quot;,8) \n\t&quot;
+&quot;add $1,&quot;REG_counter&quot; \n\t&quot;
+&quot;jnz Lfoo%= \n\t&quot;
+ : &quot;=r&quot;(tmp)
+ : &quot;0&quot;(w8), &quot;r&quot;(source), &quot;r&quot;(dest), &quot;r&quot;(prev),
+   &quot;r&quot;(mask)
+ 
+ );
+	__asm__ __volatile__(&quot;emms \n\t&quot;);
+}
+#endif
+
+//$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
+//$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
+//$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
+//$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
+uint8_t AVDMVideoVlad::getFrameNumberNoAlloc(uint32_t frame,
+				uint32_t *len,
+   				ADMImage *data,
+				uint32_t *flags)
+{
+	
+	uint32_t page=_info.width*_info.height;
+	ADMImage *cur,*prev;
+	
+		if(frame&gt;(_info.nb_frames-1)) return 0;
+		
+		*len=(page*3)&gt;&gt;1;
+		
+		if(frame)
+		{
+		 	prev=vidCache-&gt;getImage(frame-1);
+			if(!prev)
+				return 0;
+		}
+		
+		cur=vidCache-&gt;getImage(frame);
+		if(!cur)
+		{
+			vidCache-&gt;unlockAll();
+			return 0;
+		}
+		data-&gt;copyInfo(cur);
+		if(!frame)
+		{
+			
+			data-&gt;duplicate(cur);
+			vidCache-&gt;unlockAll();
+			return 1  ;
+		}
+		
+		
+			  
+		ProcessYPlane (YPLANE(cur),
+				YPLANE(prev),     	
+				YPLANE(data), 
+				_mask, 
+				_info.width, 
+		       		_info.height,
+				ythresholdMask);
+		if (0==_param-&gt;cthresholdMask)
+		{
+			//memcpy(data-&gt;data+page,_uncompressed-&gt;data+page,page&gt;&gt;1);
+			memcpy(UPLANE(data),UPLANE(cur),page&gt;&gt;2);
+			memcpy(VPLANE(data),VPLANE(cur),page&gt;&gt;2);
+		}
+		else
+		{
+			
+				ProcessCPlane (UPLANE(cur),
+							UPLANE(prev),     	
+							UPLANE(data), 
+							_mask, 
+							_info.width&gt;&gt;1, 
+							_info.height&gt;&gt;1,
+							cthresholdMask);       
+				
+			
+				ProcessCPlane (VPLANE(cur),
+							VPLANE(prev),     	
+							VPLANE(data), 
+							_mask, 
+							_info.width&gt;&gt;1, 
+							_info.height&gt;&gt;1,
+							cthresholdMask);       				
+			
+			}
+		
+		vidCache-&gt;unlockAll();
+		return 1;
+
+}
+
+

Copied: branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidVlad.h (from rev 2489, branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidVlad.h)

Copied: branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidWhirl.cpp (from rev 2489, branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidWirl.cpp)
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidWirl.cpp	2006-10-31 15:59:58 UTC (rev 2489)
+++ branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidWhirl.cpp	2007-01-13 11:31:17 UTC (rev 2715)
@@ -0,0 +1,203 @@
+
+/***************************************************************************
+                          ADM_vidWhirl.cpp  -  description
+                             -------------------
+    begin                : Fri Jan 3 2003
+    copyright            : (C) 2003 by mean
+    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
+    
+    
+   Whrilpool like effect
+    
+    
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include &lt;stdio.h&gt;
+#include &lt;stdlib.h&gt;
+#include &lt;string.h&gt;
+#include &lt;math.h&gt;
+#include &lt;ADM_assert.h&gt;
+
+#include &quot;config.h&quot;
+#include &quot;fourcc.h&quot;
+#include &quot;avio.hxx&quot;
+#include &quot;config.h&quot;
+#include &quot;avi_vars.h&quot;
+
+//#define LOOP
+#include &quot;admmangle.h&quot;
+
+#include &quot;ADM_toolkit/toolkit.hxx&quot;
+#include &quot;ADM_editor/ADM_edit.hxx&quot;
+#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_filter/video_filters.h&quot;
+
+static void Process(uint8_t *src,uint8_t *data, uint32_t width, uint32_t height,double frac);
+
+
+static FILTER_PARAM whirlParam={0,{&quot;ythresholdMask&quot;,&quot;cthresholdMask&quot;}};
+
+#define STEP_SIZE 150
+static int COS_CALCED[3600];
+static int SIN_CALCED[3600];
+class  AVDMVideoWhirl:public AVDMGenericVideoStream
+ {
+
+ protected:
+
+        			
+        			virtual 	char *printConf(void);
+						
+ public:
+
+
+						AVDMVideoWhirl(  AVDMGenericVideoStream *in,CONFcouple *setup);
+  					 	AVDMVideoWhirl();
+		        virtual uint8_t 	getFrameNumberNoAlloc(uint32_t frame, uint32_t *len,
+          							ADMImage *data,uint32_t *flags);
+
+			virtual uint8_t 	configure( AVDMGenericVideoStream *instream);
+			
+ }     ;
+ 
+SCRIPT_CREATE(whirl_script,AVDMVideoWhirl,whirlParam);
+BUILD_CREATE(whirl_create,AVDMVideoWhirl);
+
+char *AVDMVideoWhirl::printConf(void)
+{
+	static char buf[50];
+ 	
+	sprintf((char *)buf,&quot; Whril&quot;);
+        return buf;
+}
+
+
+uint8_t AVDMVideoWhirl::configure( AVDMGenericVideoStream *instream)
+{
+		
+		return 1;
+}     											
+AVDMVideoWhirl::AVDMVideoWhirl(  AVDMGenericVideoStream *in,CONFcouple *couples)
+		
+
+{
+	_in=in;
+	memcpy(&amp;_info,_in-&gt;getInfo(),sizeof(_info));
+	_uncompressed= new ADMImage(_info.width,_info.height);
+	
+	#define TWOPI (2*3.1415)
+	double angle;
+	for(int i=0;i&lt;3600;i++)
+	{
+		angle=(double)i;
+		angle/=TWOPI;
+		angle/=10.;
+		COS_CALCED[i]=(int)floor(0.49+65536.*cos(angle));
+		SIN_CALCED[i]=(int)floor(0.49+65536.*sin(angle));
+		
+	}
+}
+
+
+AVDMVideoWhirl::AVDMVideoWhirl()
+{
+	delete _uncompressed;
+}  
+
+
+uint8_t AVDMVideoWhirl::getFrameNumberNoAlloc(uint32_t frame,
+				uint32_t *len,
+   				ADMImage *data,
+				uint32_t *flags)
+{
+	
+	uint32_t page=_info.width*_info.height;
+	ADMImage *cur,*prev;
+	double frac;
+	
+		if(frame&gt;STEP_SIZE)
+			frac=1;
+		else
+			frac=(double)frame/(double)STEP_SIZE;
+		if(frame&gt;(_info.nb_frames-1)) return 0;
+		
+		*len=(page*3)&gt;&gt;1;
+		if(!_in-&gt;getFrameNumberNoAlloc(frame,len,_uncompressed,flags)) return 0;
+		
+		data-&gt;copyInfo(_uncompressed);
+		Process(YPLANE(_uncompressed),YPLANE(data),_info.width,_info.height,frac);
+		Process(UPLANE(_uncompressed),UPLANE(data),_info.width&gt;&gt;1,_info.height&gt;&gt;1,frac);
+		Process(VPLANE(_uncompressed),VPLANE(data),_info.width&gt;&gt;1,_info.height&gt;&gt;1,frac);
+		
+		return 1;
+
+}
+#define invlen(x) x
+void Process(uint8_t *src,uint8_t *data, uint32_t width, uint32_t height,double frac)
+{
+int	dprime,d;
+int 	pointx,pointy;
+int	fx,fy;
+int	alpha,beta;
+
+uint8_t *wr;
+double angle;
+int 	iang;
+
+	wr=data;
+	frac=10*frac*180./width;
+	for(uint32_t y=0;y&lt;height;y++)
+	{
+	for(uint32_t x=0;x&lt;width;x++)
+	{
+		pointx=x-(width&gt;&gt;1);
+		pointy=y-(height&gt;&gt;1);
+		if(!pointx &amp;&amp; !pointy)
+		{
+			// center continue
+			*wr++=*(src+((width*height+width)&gt;&gt;1));
+			continue;
+		}
+		
+		dprime=pointx*pointx+pointy*pointy;
+		dprime=(int)floor(0.49+sqrt(dprime));
+
+//		dprime=abs(pointx)+abs(pointy);		
+		d=invlen(dprime);
+		// rotate 
+		
+		iang=(int)floor((double)d*frac);
+		iang%=3600;
+		
+		alpha=COS_CALCED[iang];
+		beta=SIN_CALCED[iang];
+		
+		fx=alpha*pointx+beta*pointy;
+		fy=-beta*pointx+alpha*pointy;
+		// expand
+		fx=fx&gt;&gt;16;
+		fy=fy&gt;&gt;16;
+		// put back to original
+		pointx=fx+(width&gt;&gt;1);
+		pointy=fy+(height&gt;&gt;1);
+		
+		// Clamp
+		if(pointx&lt;0) pointx=0;
+		if(pointx&gt;width-1) pointx=width-1;
+		if(pointy&lt;0) pointy=0;
+		if(pointy&gt;height-1) pointy=height-1;
+		
+		*(wr++)=*(src+pointx+width*pointy);
+		
+	
+	}
+	}
+}

Modified: branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/Makefile.am
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/Makefile.am	2007-01-13 11:10:25 UTC (rev 2714)
+++ branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/Makefile.am	2007-01-13 11:31:17 UTC (rev 2715)
@@ -7,6 +7,12 @@
 #INCLUDES = $(all_includes) 
 
 libADM_videoFilter_a_SOURCES =  \
+ ADM_vidUVSwap.cpp \
+ ADM_vidStabilize.cpp \
+ ADM_vidDropOut.cpp \
+ ADM_vidVlad.cpp \ 
+ ADM_vidWhirl.cpp \
+ ADM_vidPulldown.cpp \
  ADM_vidFlipV.cpp \
  ADM_vidLuma.cpp \
  ADM_vidLargeMedian.cpp \


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000042.html">[Avidemux-svn-commit] r2714 - in	branches/avidemux_2.4_branch/avidemux:	ADM_userInterfaces/ADM_GTK ADM_video ADM_videoFilter
</A></li>
	<LI>Next message: <A HREF="000044.html">[Avidemux-svn-commit] r2716 -	branches/avidemux_2.4_branch/avidemux/ADM_video
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#43">[ date ]</a>
              <a href="thread.html#43">[ thread ]</a>
              <a href="subject.html#43">[ subject ]</a>
              <a href="author.html#43">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">More information about the Avidemux-svn-commit
mailing list</a><br>
</body></html>
