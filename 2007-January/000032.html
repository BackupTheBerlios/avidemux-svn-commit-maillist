<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Avidemux-svn-commit] r2704 - in	branches/avidemux_2.4_branch/avidemux:	ADM_userInterfaces/ADM_GTK/ADM_dialog	ADM_userInterfaces/ADM_GTK/ADM_dialogFactory	ADM_userInterfaces/ADM_NONE/ADM_dialog	ADM_userInterfaces/ADM_QT4/ADM_dialog ADM_video ADM_videoFilter
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/avidemux-svn-commit/2007-January/index.html" >
   <LINK REL="made" HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r2704%20-%20in%0A%09branches/avidemux_2.4_branch/avidemux%3A%0A%09ADM_userInterfaces/ADM_GTK/ADM_dialog%0A%09ADM_userInterfaces/ADM_GTK/ADM_dialogFactory%0A%09ADM_userInterfaces/ADM_NONE/ADM_dialog%0A%09ADM_userInterfaces/ADM_QT4/ADM_dialog%20ADM_video%20ADM_videoFilter&In-Reply-To=%3C200701111918.l0BJI98s024329%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000031.html">
   <LINK REL="Next"  HREF="000033.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Avidemux-svn-commit] r2704 - in	branches/avidemux_2.4_branch/avidemux:	ADM_userInterfaces/ADM_GTK/ADM_dialog	ADM_userInterfaces/ADM_GTK/ADM_dialogFactory	ADM_userInterfaces/ADM_NONE/ADM_dialog	ADM_userInterfaces/ADM_QT4/ADM_dialog ADM_video ADM_videoFilter</H1>
    <B>mean at BerliOS</B> 
    <A HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r2704%20-%20in%0A%09branches/avidemux_2.4_branch/avidemux%3A%0A%09ADM_userInterfaces/ADM_GTK/ADM_dialog%0A%09ADM_userInterfaces/ADM_GTK/ADM_dialogFactory%0A%09ADM_userInterfaces/ADM_NONE/ADM_dialog%0A%09ADM_userInterfaces/ADM_QT4/ADM_dialog%20ADM_video%20ADM_videoFilter&In-Reply-To=%3C200701111918.l0BJI98s024329%40sheep.berlios.de%3E"
       TITLE="[Avidemux-svn-commit] r2704 - in	branches/avidemux_2.4_branch/avidemux:	ADM_userInterfaces/ADM_GTK/ADM_dialog	ADM_userInterfaces/ADM_GTK/ADM_dialogFactory	ADM_userInterfaces/ADM_NONE/ADM_dialog	ADM_userInterfaces/ADM_QT4/ADM_dialog ADM_video ADM_videoFilter">mean at mail.berlios.de
       </A><BR>
    <I>Thu Jan 11 20:18:09 CET 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000031.html">[Avidemux-svn-commit] r2703 - in	branches/avidemux_2.4_branch/avidemux: ADM_video ADM_videoFilter
</A></li>
        <LI>Next message: <A HREF="000033.html">[Avidemux-svn-commit] r2705 - in	branches/avidemux_2.4_branch/avidemux:	ADM_userInterfaces/ADM_GTK/ADM_dialog	ADM_userInterfaces/ADM_NONE/ADM_dialog	ADM_userInterfaces/ADM_QT4/ADM_dialog ADM_video ADM_videoFilter
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32">[ date ]</a>
              <a href="thread.html#32">[ thread ]</a>
              <a href="subject.html#32">[ subject ]</a>
              <a href="author.html#32">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: mean
Date: 2007-01-11 20:18:08 +0100 (Thu, 11 Jan 2007)
New Revision: 2704

Added:
   branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_lavpp_deintparam.h
   branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidKernelDeint.h
   branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidMPLD3D.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidMPLD3D.h
   branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidMPLD3Dlow.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidMPLD3Dlow.h
Removed:
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_denoise.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_kerneldeint.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_lavpp_deint.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_lavpp_deint.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_lavpp_deintparam.h
   branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidKernelDeint.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidKernelDeint.h
   branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidMPLD3D.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidMPLD3D.h
   branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidMPLD3Dlow.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidMPLD3Dlow.h
   branches/avidemux_2.4_branch/avidemux/ADM_video/DIA_kerneldeint.cpp
Modified:
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/Makefile.am
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_float.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_integer.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_none.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_none.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_video/Makefile.am
   branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/Makefile.am
Log:
more dialogFactory

Deleted: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_denoise.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_denoise.cpp	2007-01-11 08:07:07 UTC (rev 2703)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_denoise.cpp	2007-01-11 19:18:08 UTC (rev 2704)
@@ -1 +0,0 @@
-// EMPTY

Deleted: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_kerneldeint.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_kerneldeint.cpp	2007-01-11 08:07:07 UTC (rev 2703)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_kerneldeint.cpp	2007-01-11 19:18:08 UTC (rev 2704)
@@ -1,203 +0,0 @@
-//
-
-# include &lt;config.h&gt;
-#include &lt;sys/types.h&gt;
-#include &lt;sys/stat.h&gt;
-
-#include &lt;gdk/gdkkeysyms.h&gt;
-#include &lt;gtk/gtk.h&gt;
-
-
-#include &lt;gdk/gdkkeysyms.h&gt;
-#include &lt;gtk/gtk.h&gt;
-#include &quot;config.h&quot;
-#include &quot;default.h&quot;
-#include &quot;ADM_toolkit_gtk/ADM_gladeSupport.h&quot;
-#include &quot;ADM_toolkit_gtk/toolkit_gtk.h&quot;
-#include &quot;ADM_toolkit_gtk/toolkit_gtk_include.h&quot;
-
-static GtkWidget	*create_dialog1 (void);
-
-#define CHECK_GET(x,y) {*y=gtk_toggle_button_get_active( GTK_TOGGLE_BUTTON(WID(x)));}
-#define CHECK_SET(x,y) {gtk_toggle_button_set_active( GTK_TOGGLE_BUTTON(WID(x)),*y);}	
-
-#define SPIN_GET(x,y) {*y= gtk_spin_button_get_value_as_int(GTK_SPIN_BUTTON(WID(x))) ;\
-				printf(#x&quot;:%d\n&quot;,*y);}
-
-#define SPIN_SET(x,y)  {gtk_spin_button_set_value(GTK_SPIN_BUTTON(WID(x)),(gfloat)*y) ; \
-				printf(#x&quot;:%d\n&quot;,*y);}
-
-
-uint8_t DIA_kerneldeint(uint32_t *order, uint32_t *threshold, uint32_t *sharp, 
-		uint32_t *twoway, uint32_t *map);
-uint8_t DIA_kerneldeint(uint32_t *order, uint32_t *threshold, uint32_t *sharp, 
-		uint32_t *twoway, uint32_t *map)
-{
-	GtkWidget *dialog;
-
-	char str[100];
-	uint8_t ret=0;
-
-	gint r;
-
-	dialog=create_dialog1();
-//	gtk_transient(dialog);
-        gtk_register_dialog(dialog);
-	// Now update the entries
-	if(*order==0) // BFF
-	{
-		RADIO_SET(radiobuttonBFF,1);	
-	}
-	else
-	{
-		RADIO_SET(radiobuttonTFF,1);			
-	}
-	CHECK_SET(checkbuttonSharp,sharp);
-	CHECK_SET(checkbuttonTwoWay,twoway);
-	CHECK_SET(checkbuttonMap,map);
-	SPIN_SET(spinbuttonThresold,threshold);
-	
-	ret=0;
-	if(gtk_dialog_run(GTK_DIALOG(dialog))==GTK_RESPONSE_OK)
-	{
-		CHECK_GET(checkbuttonSharp,sharp);
-		CHECK_GET(checkbuttonTwoWay,twoway);
-		CHECK_GET(checkbuttonMap,map);
-		SPIN_GET(spinbuttonThresold,threshold);
-		*order=RADIO_GET(radiobuttonTFF);	
-		ret=1;
-	}
-        gtk_unregister_dialog(dialog);
-	gtk_widget_destroy(dialog);
-
-	return ret;
-
-}
-
-GtkWidget*
-create_dialog1 (void)
-{
-  GtkWidget *dialog1;
-  GtkWidget *dialog_vbox1;
-  GtkWidget *vbox1;
-  GtkWidget *hbox1;
-  GtkWidget *label1;
-  GtkWidget *hbox2;
-  GtkWidget *radiobuttonBFF;
-  GSList *radiobuttonBFF_group = NULL;
-  GtkWidget *radiobuttonTFF;
-  GtkWidget *hbox3;
-  GtkWidget *label2;
-  GtkObject *spinbuttonThresold_adj;
-  GtkWidget *spinbuttonThresold;
-  GtkWidget *checkbuttonSharp;
-  GtkWidget *checkbuttonTwoWay;
-  GtkWidget *checkbuttonMap;
-  GtkWidget *dialog_action_area1;
-  GtkWidget *cancelbutton1;
-  GtkWidget *okbutton1;
-  GtkTooltips *tooltips;
-
-  tooltips = gtk_tooltips_new ();
-
-  dialog1 = gtk_dialog_new ();
-  gtk_window_set_title (GTK_WINDOW (dialog1), _(&quot;Kernel Deinterlacer&quot;));
-
-  dialog_vbox1 = GTK_DIALOG (dialog1)-&gt;vbox;
-  gtk_widget_show (dialog_vbox1);
-
-  vbox1 = gtk_vbox_new (FALSE, 0);
-  gtk_widget_show (vbox1);
-  gtk_box_pack_start (GTK_BOX (dialog_vbox1), vbox1, TRUE, TRUE, 0);
-
-  hbox1 = gtk_hbox_new (FALSE, 0);
-  gtk_widget_show (hbox1);
-  gtk_box_pack_start (GTK_BOX (vbox1), hbox1, TRUE, TRUE, 0);
-
-  label1 = gtk_label_new (_(&quot;Field Order :&quot;));
-  gtk_widget_show (label1);
-  gtk_box_pack_start (GTK_BOX (hbox1), label1, TRUE, FALSE, 0);
-
-  hbox2 = gtk_hbox_new (FALSE, 0);
-  gtk_widget_show (hbox2);
-  gtk_box_pack_start (GTK_BOX (hbox1), hbox2, TRUE, TRUE, 0);
-
-  radiobuttonBFF = gtk_radio_button_new_with_mnemonic (NULL, _(&quot;Bottom Field First&quot;));
-  gtk_widget_show (radiobuttonBFF);
-  gtk_box_pack_start (GTK_BOX (hbox2), radiobuttonBFF, FALSE, FALSE, 0);
-  gtk_radio_button_set_group (GTK_RADIO_BUTTON (radiobuttonBFF), radiobuttonBFF_group);
-  radiobuttonBFF_group = gtk_radio_button_get_group (GTK_RADIO_BUTTON (radiobuttonBFF));
-
-  radiobuttonTFF = gtk_radio_button_new_with_mnemonic (NULL, _(&quot;Top Field First&quot;));
-  gtk_widget_show (radiobuttonTFF);
-  gtk_box_pack_start (GTK_BOX (hbox2), radiobuttonTFF, FALSE, FALSE, 0);
-  gtk_radio_button_set_group (GTK_RADIO_BUTTON (radiobuttonTFF), radiobuttonBFF_group);
-  radiobuttonBFF_group = gtk_radio_button_get_group (GTK_RADIO_BUTTON (radiobuttonTFF));
-
-  hbox3 = gtk_hbox_new (FALSE, 0);
-  gtk_widget_show (hbox3);
-  gtk_box_pack_start (GTK_BOX (vbox1), hbox3, TRUE, TRUE, 0);
-
-  label2 = gtk_label_new (_(&quot;Threshold :&quot;));
-  gtk_widget_show (label2);
-  gtk_box_pack_start (GTK_BOX (hbox3), label2, TRUE, FALSE, 0);
-
-  spinbuttonThresold_adj = gtk_adjustment_new (1, 0, 100, 1, 10, 10);
-  spinbuttonThresold = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonThresold_adj), 1, 0);
-  gtk_widget_show (spinbuttonThresold);
-  gtk_box_pack_start (GTK_BOX (hbox3), spinbuttonThresold, TRUE, TRUE, 0);
-  gtk_tooltips_set_tip (tooltips, spinbuttonThresold, _(&quot;smaller means deinterlace more!&quot;), NULL);
-  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (spinbuttonThresold), TRUE);
-
-  checkbuttonSharp = gtk_check_button_new_with_mnemonic (_(&quot;Sharp&quot;));
-  gtk_widget_show (checkbuttonSharp);
-  gtk_box_pack_start (GTK_BOX (vbox1), checkbuttonSharp, FALSE, FALSE, 0);
-  gtk_tooltips_set_tip (tooltips, checkbuttonSharp, _(&quot;Sharper engine&quot;), NULL);
-
-  checkbuttonTwoWay = gtk_check_button_new_with_mnemonic (_(&quot;Two Way&quot;));
-  gtk_widget_show (checkbuttonTwoWay);
-  gtk_box_pack_start (GTK_BOX (vbox1), checkbuttonTwoWay, FALSE, FALSE, 0);
-  gtk_tooltips_set_tip (tooltips, checkbuttonTwoWay, _(&quot;Extrapolate two ways (better not use it)&quot;), NULL);
-
-  checkbuttonMap = gtk_check_button_new_with_mnemonic (_(&quot;Map&quot;));
-  gtk_widget_show (checkbuttonMap);
-  gtk_box_pack_start (GTK_BOX (vbox1), checkbuttonMap, FALSE, FALSE, 0);
-  gtk_tooltips_set_tip (tooltips, checkbuttonMap, _(&quot;Show the interlaced areas (test only!)&quot;), NULL);
-
-  dialog_action_area1 = GTK_DIALOG (dialog1)-&gt;action_area;
-  gtk_widget_show (dialog_action_area1);
-  gtk_button_box_set_layout (GTK_BUTTON_BOX (dialog_action_area1), GTK_BUTTONBOX_END);
-
-  cancelbutton1 = gtk_button_new_from_stock (&quot;gtk-cancel&quot;);
-  gtk_widget_show (cancelbutton1);
-  gtk_dialog_add_action_widget (GTK_DIALOG (dialog1), cancelbutton1, GTK_RESPONSE_CANCEL);
-  GTK_WIDGET_SET_FLAGS (cancelbutton1, GTK_CAN_DEFAULT);
-
-  okbutton1 = gtk_button_new_from_stock (&quot;gtk-ok&quot;);
-  gtk_widget_show (okbutton1);
-  gtk_dialog_add_action_widget (GTK_DIALOG (dialog1), okbutton1, GTK_RESPONSE_OK);
-  GTK_WIDGET_SET_FLAGS (okbutton1, GTK_CAN_DEFAULT);
-
-  /* Store pointers to all widgets, for use by lookup_widget(). */
-  GLADE_HOOKUP_OBJECT_NO_REF (dialog1, dialog1, &quot;dialog1&quot;);
-  GLADE_HOOKUP_OBJECT_NO_REF (dialog1, dialog_vbox1, &quot;dialog_vbox1&quot;);
-  GLADE_HOOKUP_OBJECT (dialog1, vbox1, &quot;vbox1&quot;);
-  GLADE_HOOKUP_OBJECT (dialog1, hbox1, &quot;hbox1&quot;);
-  GLADE_HOOKUP_OBJECT (dialog1, label1, &quot;label1&quot;);
-  GLADE_HOOKUP_OBJECT (dialog1, hbox2, &quot;hbox2&quot;);
-  GLADE_HOOKUP_OBJECT (dialog1, radiobuttonBFF, &quot;radiobuttonBFF&quot;);
-  GLADE_HOOKUP_OBJECT (dialog1, radiobuttonTFF, &quot;radiobuttonTFF&quot;);
-  GLADE_HOOKUP_OBJECT (dialog1, hbox3, &quot;hbox3&quot;);
-  GLADE_HOOKUP_OBJECT (dialog1, label2, &quot;label2&quot;);
-  GLADE_HOOKUP_OBJECT (dialog1, spinbuttonThresold, &quot;spinbuttonThresold&quot;);
-  GLADE_HOOKUP_OBJECT (dialog1, checkbuttonSharp, &quot;checkbuttonSharp&quot;);
-  GLADE_HOOKUP_OBJECT (dialog1, checkbuttonTwoWay, &quot;checkbuttonTwoWay&quot;);
-  GLADE_HOOKUP_OBJECT (dialog1, checkbuttonMap, &quot;checkbuttonMap&quot;);
-  GLADE_HOOKUP_OBJECT_NO_REF (dialog1, dialog_action_area1, &quot;dialog_action_area1&quot;);
-  GLADE_HOOKUP_OBJECT (dialog1, cancelbutton1, &quot;cancelbutton1&quot;);
-  GLADE_HOOKUP_OBJECT (dialog1, okbutton1, &quot;okbutton1&quot;);
-  GLADE_HOOKUP_OBJECT_NO_REF (dialog1, tooltips, &quot;tooltips&quot;);
-
-  return dialog1;
-}
-

Deleted: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_lavpp_deint.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_lavpp_deint.cpp	2007-01-11 08:07:07 UTC (rev 2703)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_lavpp_deint.cpp	2007-01-11 19:18:08 UTC (rev 2704)
@@ -1,194 +0,0 @@
-//
-// C++ Implementation: %{MODULE}
-//
-// Description: 
-//
-//
-// Author: %{AUTHOR} &lt;%{EMAIL}&gt;, (C) %{YEAR}
-//
-// Copyright: See COPYING file that comes with this distribution
-//
-//
-#include &lt;config.h&gt;
-#include &quot;ADM_lavcodec.h&quot;
-
-
-#include &lt;string.h&gt;
-#include &lt;stdio.h&gt;
-
-#include &lt;gdk/gdkkeysyms.h&gt;
-#include &lt;gtk/gtk.h&gt;
-
-
-
-#include &lt;gdk/gdkkeysyms.h&gt;
-#include &lt;gtk/gtk.h&gt;
-# include &lt;math.h&gt;
-
-
-#include &quot;default.h&quot;//#include &quot;avi_vars.h&quot;
-#include &quot;ADM_toolkit_gtk/ADM_gladeSupport.h&quot;
-#include &quot;ADM_toolkit_gtk/toolkit_gtk.h&quot;
-#include &quot;ADM_toolkit_gtk/toolkit_gtk_include.h&quot;
-
-
-
-#include &quot;ADM_toolkit/toolkit.hxx&quot;
-#include &quot;ADM_assert.h&quot; 
-
-#include &quot;ADM_toolkit/toolkit.hxx&quot;
-#include &quot;ADM_video/ADM_lavpp_deintparam.h&quot;
-
-#define CHECK_GET(x,y) {param-&gt;y=gtk_toggle_button_get_active( GTK_TOGGLE_BUTTON(WID(x)));}
-#define CHECK_SET(x,y) {gtk_toggle_button_set_active( GTK_TOGGLE_BUTTON(WID(x)),param-&gt;y);}                                 
-
-static GtkWidget        *create_dialog1 (void);
-
-uint8_t DIA_lavpp_deint(lavc_pp_param *param)
-{
-  GtkWidget *dialog;
-  uint8_t r=0;
-  
-  
-  dialog=create_dialog1();
-  gtk_register_dialog(dialog);
-  CHECK_SET(checkbuttonAutoLevel,autolevel);
- 
-  
-  gtk_option_menu_set_history (GTK_OPTION_MENU(WID(optionmenu1)),param-&gt;deintType);
-  
-  if(gtk_dialog_run(GTK_DIALOG(dialog))==GTK_RESPONSE_OK)
-  {
-    CHECK_GET(checkbuttonAutoLevel,autolevel);
-    param-&gt;deintType=getRangeInMenu(WID(optionmenu1));
-    r=1; 
-  }
-  gtk_unregister_dialog(dialog);
-  gtk_widget_destroy(dialog);
-  return r;
-}
-
-//**************************
-GtkWidget*
-create_dialog1 (void)
-{
-  GtkWidget *dialog1;
-  GtkWidget *dialog_vbox1;
-  GtkWidget *table1;
-  GtkWidget *label1;
-  GtkWidget *label2;
-  GtkWidget *checkbuttonAutoLevel;
-  GtkWidget *optionmenu1;
-  GtkWidget *menu1;
-  GtkWidget *none1;
-  GtkWidget *linear_blend1;
-  GtkWidget *linear_interpolation1;
-  GtkWidget *cubic_interpolation1;
-  GtkWidget *median_deinterlacer1;
-  GtkWidget *ffmpeg_deinterlacer1;
-  GtkWidget *dialog_action_area1;
-  GtkWidget *cancelbutton1;
-  GtkWidget *okbutton1;
-
-  dialog1 = gtk_dialog_new ();
-  gtk_window_set_title (GTK_WINDOW (dialog1), _(&quot;Lavc PP Deint&quot;));
-
-  dialog_vbox1 = GTK_DIALOG (dialog1)-&gt;vbox;
-  gtk_widget_show (dialog_vbox1);
-
-  table1 = gtk_table_new (2, 2, FALSE);
-  gtk_widget_show (table1);
-  gtk_box_pack_start (GTK_BOX (dialog_vbox1), table1, TRUE, TRUE, 0);
-
-  label1 = gtk_label_new (_(&quot;Deinterlacing : &quot;));
-  gtk_widget_show (label1);
-  gtk_table_attach (GTK_TABLE (table1), label1, 0, 1, 0, 1,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_label_set_justify (GTK_LABEL (label1), GTK_JUSTIFY_LEFT);
-  gtk_misc_set_alignment (GTK_MISC (label1), 0, 0.5);
-
-  label2 = gtk_label_new (_(&quot;AutoLevel :&quot;));
-  gtk_widget_show (label2);
-  gtk_table_attach (GTK_TABLE (table1), label2, 0, 1, 1, 2,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  gtk_label_set_justify (GTK_LABEL (label2), GTK_JUSTIFY_LEFT);
-  gtk_misc_set_alignment (GTK_MISC (label2), 0, 0.5);
-
-  checkbuttonAutoLevel = gtk_check_button_new_with_mnemonic (_(&quot; &quot;));
-  gtk_widget_show (checkbuttonAutoLevel);
-  gtk_table_attach (GTK_TABLE (table1), checkbuttonAutoLevel, 1, 2, 1, 2,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-
-  optionmenu1 = gtk_option_menu_new ();
-  gtk_widget_show (optionmenu1);
-  gtk_table_attach (GTK_TABLE (table1), optionmenu1, 1, 2, 0, 1,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-
-  menu1 = gtk_menu_new ();
-
-  none1 = gtk_menu_item_new_with_mnemonic (_(&quot;None&quot;));
-  gtk_widget_show (none1);
-  gtk_container_add (GTK_CONTAINER (menu1), none1);
-
-  linear_blend1 = gtk_menu_item_new_with_mnemonic (_(&quot;Linear Blend&quot;));
-  gtk_widget_show (linear_blend1);
-  gtk_container_add (GTK_CONTAINER (menu1), linear_blend1);
-
-  linear_interpolation1 = gtk_menu_item_new_with_mnemonic (_(&quot;Linear Interpolation&quot;));
-  gtk_widget_show (linear_interpolation1);
-  gtk_container_add (GTK_CONTAINER (menu1), linear_interpolation1);
-
-  cubic_interpolation1 = gtk_menu_item_new_with_mnemonic (_(&quot;Cubic interpolation&quot;));
-  gtk_widget_show (cubic_interpolation1);
-  gtk_container_add (GTK_CONTAINER (menu1), cubic_interpolation1);
-
-  median_deinterlacer1 = gtk_menu_item_new_with_mnemonic (_(&quot;Median Deinterlacer&quot;));
-  gtk_widget_show (median_deinterlacer1);
-  gtk_container_add (GTK_CONTAINER (menu1), median_deinterlacer1);
-
-  ffmpeg_deinterlacer1 = gtk_menu_item_new_with_mnemonic (_(&quot;FFmpeg Deinterlacer&quot;));
-  gtk_widget_show (ffmpeg_deinterlacer1);
-  gtk_container_add (GTK_CONTAINER (menu1), ffmpeg_deinterlacer1);
-
-  gtk_option_menu_set_menu (GTK_OPTION_MENU (optionmenu1), menu1);
-
-  dialog_action_area1 = GTK_DIALOG (dialog1)-&gt;action_area;
-  gtk_widget_show (dialog_action_area1);
-  gtk_button_box_set_layout (GTK_BUTTON_BOX (dialog_action_area1), GTK_BUTTONBOX_END);
-
-  cancelbutton1 = gtk_button_new_from_stock (&quot;gtk-cancel&quot;);
-  gtk_widget_show (cancelbutton1);
-  gtk_dialog_add_action_widget (GTK_DIALOG (dialog1), cancelbutton1, GTK_RESPONSE_CANCEL);
-  GTK_WIDGET_SET_FLAGS (cancelbutton1, GTK_CAN_DEFAULT);
-
-  okbutton1 = gtk_button_new_from_stock (&quot;gtk-ok&quot;);
-  gtk_widget_show (okbutton1);
-  gtk_dialog_add_action_widget (GTK_DIALOG (dialog1), okbutton1, GTK_RESPONSE_OK);
-  GTK_WIDGET_SET_FLAGS (okbutton1, GTK_CAN_DEFAULT);
-
-  /* Store pointers to all widgets, for use by lookup_widget(). */
-  GLADE_HOOKUP_OBJECT_NO_REF (dialog1, dialog1, &quot;dialog1&quot;);
-  GLADE_HOOKUP_OBJECT_NO_REF (dialog1, dialog_vbox1, &quot;dialog_vbox1&quot;);
-  GLADE_HOOKUP_OBJECT (dialog1, table1, &quot;table1&quot;);
-  GLADE_HOOKUP_OBJECT (dialog1, label1, &quot;label1&quot;);
-  GLADE_HOOKUP_OBJECT (dialog1, label2, &quot;label2&quot;);
-  GLADE_HOOKUP_OBJECT (dialog1, checkbuttonAutoLevel, &quot;checkbuttonAutoLevel&quot;);
-  GLADE_HOOKUP_OBJECT (dialog1, optionmenu1, &quot;optionmenu1&quot;);
-  GLADE_HOOKUP_OBJECT (dialog1, menu1, &quot;menu1&quot;);
-  GLADE_HOOKUP_OBJECT (dialog1, none1, &quot;none1&quot;);
-  GLADE_HOOKUP_OBJECT (dialog1, linear_blend1, &quot;linear_blend1&quot;);
-  GLADE_HOOKUP_OBJECT (dialog1, linear_interpolation1, &quot;linear_interpolation1&quot;);
-  GLADE_HOOKUP_OBJECT (dialog1, cubic_interpolation1, &quot;cubic_interpolation1&quot;);
-  GLADE_HOOKUP_OBJECT (dialog1, median_deinterlacer1, &quot;median_deinterlacer1&quot;);
-  GLADE_HOOKUP_OBJECT (dialog1, ffmpeg_deinterlacer1, &quot;ffmpeg_deinterlacer1&quot;);
-  GLADE_HOOKUP_OBJECT_NO_REF (dialog1, dialog_action_area1, &quot;dialog_action_area1&quot;);
-  GLADE_HOOKUP_OBJECT (dialog1, cancelbutton1, &quot;cancelbutton1&quot;);
-  GLADE_HOOKUP_OBJECT (dialog1, okbutton1, &quot;okbutton1&quot;);
-
-  return dialog1;
-}
-

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/Makefile.am
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/Makefile.am	2007-01-11 08:07:07 UTC (rev 2703)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/Makefile.am	2007-01-11 19:18:08 UTC (rev 2704)
@@ -14,15 +14,15 @@
 	DIA_working.h DIA_busy.cpp DIA_busy.h DIA_exLame.cpp DIA_pipe.cpp DIA_mpeg2opt.cpp \
 	DIA_d3d.cpp DIA_postproc.cpp DIA_enter.cpp DIA_enter.h DIA_xvcd.cpp DIA_muxer.cpp \
 	DIA_xvid.cpp DIA_crop.cpp DIA_color.cpp DIA_encoding.cpp DIA_SVCD.cpp DIA_prefs.cpp \
-	DIA_requant.cpp DIA_xvid4.cpp DIA_lavcodec.cpp DIA_kerneldeint.cpp \
+	DIA_requant.cpp DIA_xvid4.cpp DIA_lavcodec.cpp \
 	DIA_dectel.cpp DIA_decimate.cpp DIA_pause.cpp \
 	DIA_DVDff.cpp DIA_lavdecoder.cpp DIA_lame.cpp DIA_calculator.cpp DIA_equalizer.cpp \
-	DIA_vobsub.cpp DIA_x264.cpp DIA_ocr.cpp DIA_lavpp_deint.cpp DIA_hue.cpp DIA_eq2.cpp \
+	DIA_vobsub.cpp DIA_x264.cpp DIA_ocr.cpp  DIA_hue.cpp DIA_eq2.cpp \
 	DIA_dgbob.cpp DIA_msharpen.cpp DIA_asharp.cpp DIA_dmx.cpp DIA_idx_pg.cpp DIA_gototime.cpp \
 	DIA_audioTrack.cpp DIA_cnr2.cpp DIA_resizeWiz.cpp DIA_jobs.cpp DIA_jobs_save.cpp DIA_mosaic.cpp \
 	DIA_deblend.cpp DIA_v2v.cpp DIA_tdeint.cpp DIA_builtin.cpp DIA_mpdelogo.cpp DIA_vorbis.cpp \
         DIA_chromaShift.cpp \
-        DIA_denoise.cpp \
+        \
         DIA_preview.cpp \
         DIA_contrast.cpp \
         DIA_srt.cpp \
@@ -51,8 +51,8 @@
 DIA_audio.cpp        DIA_decimate.cpp      DIA_idx_pg.h         DIA_pause.cpp       DIA_vorbis.cpp \
 DIA_audioTrack.cpp   DIA_dectel.cpp        DIA_indexer.cpp      DIA_pipe.cpp        DIA_working.cpp \
 DIA_audiocodec.cpp   DIA_defaultAudio.cpp  DIA_jobs.cpp         DIA_postproc.cpp    DIA_working.h \
-DIA_denoise.cpp       DIA_jobs_save.cpp    DIA_prefs.cpp       DIA_x264.cpp \
-DIA_builtin.cpp      DIA_dgbob.cpp         DIA_kerneldeint.cpp  DIA_preview.cpp     DIA_xvcd.cpp \
+DIA_jobs_save.cpp    DIA_prefs.cpp       DIA_x264.cpp \
+DIA_builtin.cpp      DIA_dgbob.cpp         DIA_preview.cpp     DIA_xvcd.cpp \
 DIA_busy.cpp         DIA_dmx.cpp           DIA_lame.cpp         DIA_properties.cpp  DIA_xvid.cpp \
 DIA_busy.h           DIA_dnr.cpp           DIA_lavcodec.cpp     DIA_quota.cpp       DIA_xvid4.cpp \
 DIA_calculator.cpp   DIA_encoding.cpp      DIA_lavdecoder.cpp   DIA_recent.cpp \

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_float.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_float.cpp	2007-01-11 08:07:07 UTC (rev 2703)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_float.cpp	2007-01-11 19:18:08 UTC (rev 2704)
@@ -80,7 +80,9 @@
   GtkWidget *widget=(GtkWidget *)myWidget;
   ELEM_TYPE_FLOAT *val=(ELEM_TYPE_FLOAT *)param;
   ADM_assert(widget);
-  *(ELEM_TYPE_FLOAT *)param=gtk_spin_button_get_value_as_int (GTK_SPIN_BUTTON (widget));
+  *val=gtk_spin_button_get_value(GTK_SPIN_BUTTON (widget));
+  if(*val&lt;min) *val=min;
+  if(*val&gt;max) *val=max;
 }
 
 //EOF

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_integer.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_integer.cpp	2007-01-11 08:07:07 UTC (rev 2703)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_integer.cpp	2007-01-11 19:18:08 UTC (rev 2704)
@@ -79,7 +79,10 @@
   GtkWidget *widget=(GtkWidget *)myWidget;
   int32_t *val=(int32_t *)param;
   ADM_assert(widget);
-  *(int32_t *)param=gtk_spin_button_get_value_as_int (GTK_SPIN_BUTTON (widget));
+  *val=gtk_spin_button_get_value_as_int (GTK_SPIN_BUTTON (widget));
+  if(*val&lt;min) *val=min;
+  if(*val&gt;max) *val=max;
+  
 }
 //**********************************************************************************
 
@@ -132,7 +135,10 @@
   GtkWidget *widget=(GtkWidget *)myWidget;
   uint32_t *val=(uint32_t *)param;
   ADM_assert(widget);
-  *(uint32_t *)param=gtk_spin_button_get_value_as_int (GTK_SPIN_BUTTON (widget));
+  *val=gtk_spin_button_get_value_as_int (GTK_SPIN_BUTTON (widget));
+  if(*val&lt;min) *val=min;
+  if(*val&gt;max) *val=max;
+
 }
 
 

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_none.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_none.cpp	2007-01-11 08:07:07 UTC (rev 2703)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_none.cpp	2007-01-11 19:18:08 UTC (rev 2704)
@@ -58,7 +58,6 @@
 #include &quot;ADM_video/ADM_vidChromaShift_param.h&quot;
 #include &quot;ADM_video/ADM_vidMPdelogo.h&quot;
 #include &quot;ADM_video/ADM_vidEq2.h&quot;
-#include &quot;ADM_video/ADM_lavpp_deintparam.h&quot;
 #include &quot;ADM_video/ADM_vidContrast.h&quot;
 #include &quot;ADM_video/ADM_vidFont.h&quot;
 #include &quot;ADM_video/ADM_vidSRT.h&quot;
@@ -110,7 +109,6 @@
 uint8_t DIA_getMSharpen(MSHARPEN_PARAM *param){return 0;}
 uint8_t DIA_getMSmooth(MSMOOTH_PARAM *param){return 0;}
 uint8_t DIA_getPartial(PARTIAL_CONFIG *param,AVDMGenericVideoStream *son,AVDMGenericVideoStream *previous){return 0;}
-uint8_t DIA_lavpp_deint(lavc_pp_param *param){return 0;}
 uint8_t DIA_mjpegCodecSetting(COMPRES_PARAMS *param){return 0;}
 uint8_t  DIA_mosaic(MOSAIC_PARAMS *mosaic){return 0;}
 uint8_t DIA_pipe(char **cmd,char **param){return 0;}

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_none.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_none.cpp	2007-01-11 08:07:07 UTC (rev 2703)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_none.cpp	2007-01-11 19:18:08 UTC (rev 2704)
@@ -58,7 +58,6 @@
 #include &quot;ADM_video/ADM_vidChromaShift_param.h&quot;
 #include &quot;ADM_video/ADM_vidMPdelogo.h&quot;
 #include &quot;ADM_video/ADM_vidEq2.h&quot;
-#include &quot;ADM_video/ADM_lavpp_deintparam.h&quot;
 #include &quot;ADM_video/ADM_vidContrast.h&quot;
 #include &quot;ADM_video/ADM_vidFont.h&quot;
 #include &quot;ADM_video/ADM_vidSRT.h&quot;
@@ -110,7 +109,6 @@
 uint8_t DIA_getMSharpen(MSHARPEN_PARAM *param){return 0;}
 uint8_t DIA_getMSmooth(MSMOOTH_PARAM *param){return 0;}
 uint8_t DIA_getPartial(PARTIAL_CONFIG *param,AVDMGenericVideoStream *son,AVDMGenericVideoStream *previous){return 0;}
-uint8_t DIA_lavpp_deint(lavc_pp_param *param){return 0;}
 uint8_t DIA_mjpegCodecSetting(COMPRES_PARAMS *param){return 0;}
 uint8_t  DIA_mosaic(MOSAIC_PARAMS *mosaic){return 0;}
 uint8_t DIA_pipe(char **cmd,char **param){return 0;}

Deleted: branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_lavpp_deint.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_lavpp_deint.cpp	2007-01-11 08:07:07 UTC (rev 2703)
+++ branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_lavpp_deint.cpp	2007-01-11 19:18:08 UTC (rev 2704)
@@ -1,272 +0,0 @@
-//
-// C++ Implementation: %{MODULE}
-//
-// Description: 
-//
-//
-// Author: %{AUTHOR} &lt;%{EMAIL}&gt;, (C) %{YEAR}
-//
-// Copyright: See COPYING file that comes with this distribution
-//
-//  Small wrapper for lavcodec deinterlacer postprocessing
-
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#include &quot;config.h&quot;
-#include &lt;stdio.h&gt;
-#include &lt;stdlib.h&gt;
-#include &lt;string.h&gt;
-#include &lt;math.h&gt;
-#include &lt;ADM_assert.h&gt;
-
-#include &quot;config.h&quot;
-#include &quot;fourcc.h&quot;
-
-#include &quot;ADM_toolkit/toolkit.hxx&quot;
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
-
-#include &quot;ADM_toolkit/filesel.h&quot;
-
-#include &quot;ADM_colorspace/colorspace.h&quot;
-
-#include &quot;ADM_osSupport/ADM_cpuCap.h&quot;
-
-#include &quot;ADM_osSupport/ADM_debugID.h&quot;
-#define MODULE_NAME MODULE_FILTER
-#include &quot;ADM_osSupport/ADM_debug.h&quot;
-
-#include &quot;ADM_lavpp_deintparam.h&quot;
-
-/*
-{&quot;al&quot;, &quot;autolevels&quot;,            0, 1, 2, LEVEL_FIX},
-{&quot;lb&quot;, &quot;linblenddeint&quot;,         1, 1, 4, LINEAR_BLEND_DEINT_FILTER},
-{&quot;li&quot;, &quot;linipoldeint&quot;,          1, 1, 4, LINEAR_IPOL_DEINT_FILTER},
-{&quot;ci&quot;, &quot;cubicipoldeint&quot;,        1, 1, 4, CUBIC_IPOL_DEINT_FILTER},
-{&quot;md&quot;, &quot;mediandeint&quot;,           1, 1, 4, MEDIAN_DEINT_FILTER},
-{&quot;fd&quot;, &quot;ffmpegdeint&quot;,           1, 1, 4, FFMPEG_DEINT_FILTER},
-{&quot;tn&quot;, &quot;tmpnoise&quot;,              1, 7, 8, TEMP_NOISE_FILTER},
-
-{&quot;fq&quot;, &quot;forcequant&quot;,            1, 0, 0, FORCE_QUANT}, *******************
-{&quot;l5&quot;, &quot;lowpass5&quot;,              1, 1, 4, LOWPASS5_DEINT_FILTER}, *********
-*/
-
-
-extern uint8_t DIA_lavpp_deint(lavc_pp_param *param);
-
-class  ADMVideoLavPPDeint:public AVDMGenericVideoStream
-{
-
-  protected:
-    virtual char                    *printConf(void);
-    void                            *ppcontext;
-    void                            *ppmode;
-    ADMImage                        *uncompressed;
-    lavc_pp_param                   *_param;
-    
-    void                            setup( void );
-    void                            cleanup( void );
-  public:
-    
-    
-    ADMVideoLavPPDeint(  AVDMGenericVideoStream *in,CONFcouple *setup);
-    ~ADMVideoLavPPDeint();
-    virtual uint8_t getFrameNumberNoAlloc(uint32_t frame, uint32_t *len,
-                                          ADMImage *data,uint32_t *flags);
-    virtual uint8_t getCoupledConf( CONFcouple **couples)           ;
-    virtual uint8_t configure( AVDMGenericVideoStream *instream);
-                                                        
-};
-
-
-static FILTER_PARAM lavppdeint_param={2,{&quot;deintType&quot;,&quot;autolevel&quot;}};
-//*************************************************************
-//
-
-//*************************************************************
-SCRIPT_CREATE(lavppdeint_script,ADMVideoLavPPDeint,lavppdeint_param);
-BUILD_CREATE(lavppdeint_create,ADMVideoLavPPDeint);
-//*************************************************************
-uint8_t ADMVideoLavPPDeint::configure(AVDMGenericVideoStream *in)
-{
-
-  if(DIA_lavpp_deint(_param))
-  {
-    setup();
-    return 1; 
-  }
-  return 0;        
-}
- 
-//*************************************************************
-char *ADMVideoLavPPDeint::printConf( void )
-{
-  static char buf[50];
-        
-  sprintf((char *)buf,&quot; Lavcodec PP deinterlacer autolev:%d deint:%d&quot;,_param-&gt;autolevel,_param-&gt;deintType);
-  return buf;
-}
-//*************************************************************
-ADMVideoLavPPDeint::ADMVideoLavPPDeint(  AVDMGenericVideoStream *in,CONFcouple *couples)
-{
-
-  _in=in;         
-  memcpy(&amp;_info,_in-&gt;getInfo(),sizeof(_info));    
-  _info.encoding=1;  
-  
-  ppcontext=NULL;  
-  ppmode=NULL;   
-  
-  _uncompressed=new ADMImage(_info.width,_info.height);
-  if(couples)
-  {   
-    _param=NEW(lavc_pp_param);
-    GET(deintType);    
-    GET(autolevel);
-  }      
-  else
-  {
-    _param=NEW(lavc_pp_param);
-    _param-&gt;deintType=0;
-    _param-&gt;autolevel=0;
-    
-  } 
-                 
-  setup();
- 
-}
-//*************************************************************
-void ADMVideoLavPPDeint::cleanup(void)
-{
-  if(ppcontext)
-  {
-    pp_free_context(ppcontext);
-    ppcontext=NULL;
-  }
-  if(ppmode)
-  {
-    pp_free_mode(ppmode);
-    ppmode=NULL;
-  }
-  
-} 
-//*************************************************************
-void ADMVideoLavPPDeint::setup(void)
-{
-  char string[1024];
-  uint32_t ppCaps=0;
-                
-  string[0]=0;
-  
-        cleanup();
-#if (defined( ARCH_X86)  || defined(ARCH_X86_64))
-#define ADD(x,y) if( CpuCaps::has##x()) ppCaps|=PP_CPU_CAPS_##y;                
-                ADD(MMX,MMX);           
-                ADD(3DNOW,3DNOW);
-                ADD(MMXEXT,MMX2);
-#endif             
-        cleanup();
-#undef ADD       
-#define ADD(z)  { if(string[0]) strcat(string,&quot;,&quot;#z); else strcpy(string,#z);}        
-               
-        if(_param-&gt;autolevel) ADD(al);
-        switch(_param-&gt;deintType)
-        {
-          case PP_BM_NONE:break;
-          case PP_BM_LINEAR_BLEND: ADD(lb);break;
-          case PP_BM_LINEAR_INTER: ADD(li);break;
-          case PP_BM_CUBIC_INTER: ADD(ci);break;
-          case PP_BM_MEDIAN_INTER: ADD(md);break;
-          case PP_BM_FFMPEG_DEINT: ADD(fd);break;                             
-        }        
-
-
-        ppcontext=pp_get_context(_info.width, _info.height, ppCaps);           
-        ppmode=pp_get_mode_by_name_and_quality(string,1);;
-        
-        ADM_assert(ppcontext);
-        ADM_assert(ppmode);
-  
-} 
-//*************************************************************
-ADMVideoLavPPDeint::~ADMVideoLavPPDeint()
-{
-  cleanup();
-  if(_uncompressed)
-        delete _uncompressed;
-  DELETE(_param);
-  _uncompressed=NULL;
-}
-
-//*************************************************************
-uint8_t ADMVideoLavPPDeint::getCoupledConf( CONFcouple **couples)
-{
-  
-  *couples=new CONFcouple(2);
-  CSET(deintType);    
-  CSET(autolevel);
-  
-  return 1;
-}
-//*************************************************************
-uint8_t ADMVideoLavPPDeint::getFrameNumberNoAlloc(uint32_t frame,
-                                              uint32_t *len,
-                                              ADMImage *data,
-                                              uint32_t *flags)
-{
-
- 
-  ADM_assert(frame&lt;_info.nb_frames);
-        // read uncompressed frame
-  if(!_in-&gt;getFrameNumberNoAlloc(frame, len,_uncompressed,flags)) return 0;
-
-  
-  //
-  uint8_t *iBuff[3],*oBuff[3];
-  int strideTab[3],strideTab2[3];                 
-                                                                
-  oBuff[0]=YPLANE(data);
-  oBuff[1]=UPLANE(data);
-  oBuff[2]=VPLANE(data);
-                                
-  iBuff[0]=YPLANE(_uncompressed);
-  iBuff[1]=UPLANE(_uncompressed);
-  iBuff[2]=VPLANE(_uncompressed);
-                                
-                                
-  strideTab[0]=strideTab2[0]=_info.width;
-  strideTab[1]=strideTab2[1]=_info.width&gt;&gt;1;
-  strideTab[2]=strideTab2[2]=_info.width&gt;&gt;1;
-        
-  int type;
-  if(_uncompressed-&gt;flags&amp;AVI_KEY_FRAME)
-    type=1;
-  else if(_uncompressed-&gt;flags &amp; AVI_B_FRAME)
-    type=3;
-  else
-    type=2;
-  pp_postprocess(
-        iBuff,
-        strideTab,
-        oBuff,
-        strideTab2,
-        _info.width,
-        _info.height,
-        NULL,
-        0,
-        ppmode,
-        ppcontext,
-        type); // I ?
-                                
-  
-  data-&gt;copyInfo(_uncompressed);
-  return 1;
-}

Deleted: branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_lavpp_deintparam.h
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_lavpp_deintparam.h	2007-01-11 08:07:07 UTC (rev 2703)
+++ branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_lavpp_deintparam.h	2007-01-11 19:18:08 UTC (rev 2704)
@@ -1,26 +0,0 @@
-//
-// C++ Interface: %{MODULE}
-//
-// Description: 
-//
-//
-// Author: %{AUTHOR} &lt;%{EMAIL}&gt;, (C) %{YEAR}
-//
-// Copyright: See COPYING file that comes with this distribution
-//
-//
-typedef enum 
-{
-  PP_BM_NONE           =0x0000,
-  PP_BM_LINEAR_BLEND   =0x0001, 
-  PP_BM_LINEAR_INTER   =0x0002, 
-  PP_BM_CUBIC_INTER    =0x0003, 
-  PP_BM_MEDIAN_INTER   =0x0004, 
-  PP_BM_FFMPEG_DEINT   =0x0005,  
-};
-
-typedef struct lavc_pp_param
-{
-  uint32_t      deintType;
-  uint32_t       autolevel;
-}lavc_pp_param;

Deleted: branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidKernelDeint.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidKernelDeint.cpp	2007-01-11 08:07:07 UTC (rev 2703)
+++ branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidKernelDeint.cpp	2007-01-11 19:18:08 UTC (rev 2704)
@@ -1,449 +0,0 @@
-/***************************************************************************
-                          ADM_vidKernelDeint  -  description
-                             -------------------
- 			Port of another D Graft deinterlacer
-			<A HREF="http://neuron2.net/kerneldeint/kerneldeint.html">http://neuron2.net/kerneldeint/kerneldeint.html</A>
-     ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-
-/*
-	KernelDeint() plugin for Avisynth.
-
-	Copyright (C) 2003 Donald A. Graft
-
-	This program is free software; you can redistribute it and/or modify
-	it under the terms of the GNU General Public License as published by
-	the Free Software Foundation.
-
-	This program is distributed in the hope that it will be useful,
-	but WITHOUT ANY WARRANTY; without even the implied warranty of
-	MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-	GNU General Public License for more details.
-
-	You should have received a copy of the GNU General Public License
-	along with this program; if not, write to the Free Software
-	Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
-*/
-
-#include &lt;stdio.h&gt;
-#include &lt;stdlib.h&gt;
-#include &lt;string.h&gt;
-#include &lt;ADM_assert.h&gt;
-#include &lt;math.h&gt;
-#include &lt;math.h&gt;
-#include &lt;iconv.h&gt;
-#include &quot;config.h&quot;
-
-
-#include &quot;fourcc.h&quot;
-#include &quot;avio.hxx&quot;
-
-#include &quot;avi_vars.h&quot;
-
-#include &quot;ADM_toolkit/toolkit.hxx&quot;
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
-
-#include &quot;ADM_osSupport/ADM_debugID.h&quot;
-#define MODULE_NAME MODULE_FILTER
-#include &quot;ADM_osSupport/ADM_debug.h&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
-#include &quot;ADM_vidKernelDeint.h&quot;
-
-static FILTER_PARAM kdintParam={5,{&quot;order&quot;,&quot;threshold&quot;,&quot;sharp&quot;,&quot;twoway&quot;,&quot;map&quot;}};
-
-
-SCRIPT_CREATE(kerneldeint_script,ADMVideoKernelDeint,kdintParam);
-BUILD_CREATE(kerneldeint_create,ADMVideoKernelDeint);
-
-static int PutHintingData(uint8_t *video, unsigned int hint);
-static int GetHintingData(uint8_t *video, unsigned int *hint);
-
-extern uint8_t DIA_kerneldeint(uint32_t *order, uint32_t *threshold, uint32_t *sharp, 
-		uint32_t *twoway, uint32_t *map);
-
-#define PROGRESSIVE  0x00000001
-
-
-
-
-
-uint8_t ADMVideoKernelDeint::configure( AVDMGenericVideoStream *instream)
-{
-	_in=instream;
-	#define PX(x) &amp;_param-&gt;x
-	if(DIA_kerneldeint(PX(order), PX(threshold), PX(sharp), 
-		PX(twoway), PX(map)))
-					return 1;
-	return 0;	
- 	
-}
-uint8_t	ADMVideoKernelDeint::getCoupledConf( CONFcouple **couples)
-{
-
-			*couples=new CONFcouple(5);
-
-			CSET(order);
-			CSET(threshold);
-			CSET(sharp);
-			CSET(twoway);
-			CSET(map);	
-
-		return 1;	
-}
-char *ADMVideoKernelDeint::printConf( void )
-{
- 	static char buf[50];
- 	
- 	sprintf((char *)buf,&quot; D Graft Kernel Deint&quot;);
-        return buf;
-}
-
-ADMVideoKernelDeint::~ADMVideoKernelDeint()
-{
- if(vidCache) delete vidCache;
- 	
-}
-
-
- ADMVideoKernelDeint::ADMVideoKernelDeint( AVDMGenericVideoStream *in,CONFcouple *couples)
-{
-
-		if(!couples)
-		{
-			_param=NEW(KERNEL_CONF);
-	    		_param-&gt;order=1; // Bff=0 / 1=tff
-	    		_param-&gt;threshold=10;
-	    		_param-&gt;sharp=0;
-	    		_param-&gt;twoway=0;
-	    		_param-&gt;map=0;
-		}
-		else
-		{
-			_param=NEW(KERNEL_CONF);
-			GET(order);
-			GET(threshold);
-			GET(sharp);
-			GET(twoway);
-			GET(map);
-						
-		}
-	    debug=0;   
-	    _in=in;
-	    
-	   _uncompressed=NULL;
-
-  	memcpy(&amp;_info,_in-&gt;getInfo(),sizeof(_info));
-	vidCache=new VideoCache(4,_in);
-
-
-}
-uint8_t ADMVideoKernelDeint::getFrameNumberNoAlloc(uint32_t frame,
-							uint32_t *len,
-							ADMImage *data,
-							uint32_t *flags)
-{
-		
-		uint32_t frame_prev;
-		uint32_t page=_info.width*_info.height;
-		ADMImage *mysrc=NULL, *myprev=NULL;
-		
-		if(frame&gt;_info.nb_frames-1) return 0;
-
-
-		
-		frame_prev=frame;
-		if(frame_prev) frame_prev--;
-		
-		
-		
-			mysrc=vidCache-&gt;getImage(frame);
-			myprev=vidCache-&gt;getImage(frame_prev);
-			ADM_assert(mysrc);
-			ADM_assert(myprev);
-		// Now go to kernel deint code
-			
-    const uint8_t *srcp, *prvp,*prvp_saved, *prvpp, *prvpn, *prvppp, *prvpnn, *prvp4p, *prvp4n;
-	const uint8_t *srcp_saved;
-	const uint8_t *srcpp, *srcppp, *srcpn, *srcpnn, *srcp3p, *srcp3n, *srcp4p, *srcp4n;
-    uint8_t *dstp;
-	uint8_t *dstp_saved;
- 
-	int plane;
-	int src_pitch;
-    int dst_pitch;
-    int w;
-    int h;
-	int x, y, z;
-	int val, hi, lo;
-	double valf;
-	unsigned int hint;
-	char buf[80];
-	
-	uint32_t pitch;
-	uint32_t offset;
-	
-	
-	uint32_t		order, threshold;
-	uint8_t			sharp, twoway, map;
-	
-	order=_param-&gt;order;
-	threshold=_param-&gt;threshold;
-	sharp=_param-&gt;sharp;
-	twoway=_param-&gt;twoway;
-	map=_param-&gt;map;
-	
-	
-	for (z = 0; z &lt; 3; z++)
-	{
-		
-		pitch=_info.width;
-		switch(z)
-		{
-			case 0:		offset=0;
-					srcp=srcp_saved= YPLANE(mysrc);
-					dstp = dstp_saved=YPLANE(data);
-					prvp_saved=prvp=YPLANE(myprev);
-					break;
-			case 1:		offset=page;
-					pitch&gt;&gt;=1;
-					srcp=srcp_saved=UPLANE(mysrc);
-					dstp = dstp_saved=UPLANE(data);
-					prvp_saved=prvp=UPLANE(myprev);
-					break;
-			case 2:		offset=((page*5)&gt;&gt;2);
-					pitch&gt;&gt;=1;
-					srcp=srcp_saved=VPLANE(mysrc);
-					dstp = dstp_saved=VPLANE(data);
-					prvp_saved=prvp=VPLANE(myprev);
-					break;
-		
-		}
-		
-		if (z==0 &amp;&amp; (GetHintingData((uint8_t *) srcp, &amp;hint) == false) &amp;&amp; (hint &amp; PROGRESSIVE))
-		{
-			if (debug ==true)
-			{
-				printf( &quot;KernelDeint: frame %d: progressive\n&quot;, frame); 
-				
-			}
-			memcpy(YPLANE(data),YPLANE(mysrc),page);
-			memcpy(UPLANE(data),UPLANE(mysrc),page&gt;&gt;2);
-			memcpy(VPLANE(data),VPLANE(mysrc),page&gt;&gt;2);
-			vidCache-&gt;unlockAll();
-			data-&gt;copyInfo(mysrc);
-			return 1;
-		}
-		else
-		{
-			if (debug == true)
-			{
-				printf( &quot;KernelDeint: frame %d: interkaced\n&quot;, frame); 
-			}
-		}
-		
-		src_pitch = pitch;	
-		dst_pitch = pitch;
-		
-		w = pitch; //dst-&gt;GetRowSize(plane);
-		h=_info.height;
-		if(z) h&gt;&gt;=1;  //h = dst-&gt;GetHeight(plane);
-		
-		srcp = srcp_saved  + (1-order) * src_pitch;
-		dstp = dstp_saved  + (1-order) * dst_pitch;
-		for (y = 0; y &lt; h; y+=2)
-		{
-			memcpy(dstp, srcp, w);
-			srcp += 2*src_pitch;
-			dstp += 2*dst_pitch;
-		}
-
-		// Copy through the lines that will be missed below.
-		memcpy(dstp_saved + order*dst_pitch, srcp_saved + (1-order)*src_pitch, w);
-		memcpy(dstp_saved + (2+order)*dst_pitch, srcp_saved + (3-order)*src_pitch, w);
-		memcpy(dstp_saved + (h-2+order)*dst_pitch, srcp_saved + (h-1-order)*src_pitch, w);
-		memcpy(dstp_saved + (h-4+order)*dst_pitch, srcp_saved + (h-3-order)*src_pitch, w);
-		/* For the other field choose adaptively between using the previous field
-		   or the interpolant from the current field. */
-		//prvp = prv-&gt;GetReadPtr(plane) + 5*src_pitch - (1-order)*src_pitch;
-		prvp = prvp_saved + 5*src_pitch - (1-order)*src_pitch;
-		
-		
-		prvpp = prvp - src_pitch;
-		prvppp = prvp - 2*src_pitch;
-		prvp4p = prvp - 4*src_pitch;
-		prvpn = prvp + src_pitch;
-		prvpnn = prvp + 2*src_pitch;
-		prvp4n = prvp + 4*src_pitch;
-		srcp = srcp_saved + 5*src_pitch - (1-order)*src_pitch;
-		srcpp = srcp - src_pitch;
-		srcppp = srcp - 2*src_pitch;
-		srcp3p = srcp - 3*src_pitch;
-		srcp4p = srcp - 4*src_pitch;
-		srcpn = srcp + src_pitch;
-		srcpnn = srcp + 2*src_pitch;
-		srcp3n = srcp + 3*src_pitch;
-		srcp4n = srcp + 4*src_pitch;
-		dstp =  dstp_saved  + 5*dst_pitch - (1-order)*dst_pitch;
-		for (y = 5 - (1-order); y &lt;= h - 5 - (1-order); y+=2)
-		{
-			for (x = 0; x &lt; w; x++)
-			{
-				if ((threshold == 0) || (frame == 0) ||
-					(abs((int)prvp[x] - (int)srcp[x]) &gt; threshold) ||
-					(abs((int)prvpp[x] - (int)srcpp[x]) &gt; threshold) ||
-					(abs((int)prvpn[x] - (int)srcpn[x]) &gt; threshold))
-				{
-					if (map == true)
-					{
-						int g = x &amp; ~3;
-						
-						{
-							if (z == 0) dstp[x] = 235;
-							else dstp[x] = 128;
-						}
-					}
-					else
-					{
-						
-						{
-							hi = (z == 0) ? 235 : 240;
-							lo = 16;
-						}
-						
-						if (sharp == true)
-						{
-							if (twoway == true)
-								valf = + 0.526*((int)srcpp[x] +
-								 (int)srcpn[x])
-								   + 0.170*((int)srcp[x] + (int)prvp[x])
-								   - 0.116*((int)srcppp[x] +
-								    (int)srcpnn[x] + (int)prvppp[x] +
-								    (int)prvpnn[x])
-					 			   - 0.026*((int)srcp3p[x] +
-								    (int)srcp3n[x])
-								   + 0.031*((int)srcp4p[x] +
-								    (int)srcp4n[x] + (int)prvp4p[x] +
-								    (int)prvp4n[x]);
-							else
-								valf = + 0.526*((int)srcpp[x] +
-								 (int)srcpn[x])
-								   + 0.170*((int)prvp[x])
-								   - 0.116*((int)prvppp[x] +
-								    (int)prvpnn[x])
-					 			   - 0.026*((int)srcp3p[x] +
-								    (int)srcp3n[x])
-								   + 0.031*((int)prvp4p[x] +
-								    (int)prvp4p[x]);
-							if (valf &gt; hi) valf = hi;
-							else if (valf &lt; lo) valf = lo;
-							dstp[x] = (int) valf;
-						}
-						else
-						{
-							if (twoway == true)
-								val = (8*((int)srcpp[x] + (int)srcpn[x]) +
-								 2*((int)srcp[x] + (int)prvp[x]) -
-								 			 
-									(int)(srcppp[x]) -
-									 (int)(srcpnn[x]) -
-									(int)(prvppp[x]) -
-									 (int)(prvpnn[x])) &gt;&gt; 4;
-							else
-								val = (8*((int)srcpp[x] + (int)srcpn[x]) +
-								 2*((int)prvp[x]) -
-									(int)(prvppp[x]) -
-									 (int)(prvpnn[x])) &gt;&gt; 4;
-							if (val &gt; hi) val = hi;
-							else if (val &lt; lo) val = lo;
-							dstp[x] = (int) val;
-						}
-					}
-				}
-				else
-				{
-					dstp[x] = srcp[x];
-				}
-			}
-			prvp  += 2*src_pitch;
-			prvpp  += 2*src_pitch;
-			prvppp  += 2*src_pitch;
-			prvpn  += 2*src_pitch;
-			prvpnn  += 2*src_pitch;
-			prvp4p  += 2*src_pitch;
-			prvp4n  += 2*src_pitch;
-			srcp  += 2*src_pitch;
-			srcpp += 2*src_pitch;
-			srcppp += 2*src_pitch;
-			srcp3p += 2*src_pitch;
-			srcp4p += 2*src_pitch;
-			srcpn += 2*src_pitch;
-			srcpnn += 2*src_pitch;
-			srcp3n += 2*src_pitch;
-			srcp4n += 2*src_pitch;
-			dstp  += 2*dst_pitch;
-		}
-	}
-	data-&gt;copyInfo(mysrc);
-	vidCache-&gt;unlockAll();
-	return 1;
-}
-
-
-
-#define MAGIC_NUMBER (0xdeadbeef)
-
-int PutHintingData(uint8_t *video, unsigned int hint)
-{
-	uint8_t *p;
-	unsigned int i, magic_number = MAGIC_NUMBER;
-	int error = false;
-
-	p = video;
-	for (i = 0; i &lt; 32; i++)
-	{
-		*p &amp;= ~1; 
-		*p++ |= ((magic_number &amp; (1 &lt;&lt; i)) &gt;&gt; i);
-	}
-	for (i = 0; i &lt; 32; i++)
-	{
-		*p &amp;= ~1;
-		*p++ |= ((hint &amp; (1 &lt;&lt; i)) &gt;&gt; i);
-	}
-	return error;
-}
-
-int GetHintingData(uint8_t *video, unsigned int *hint)
-{
-	uint8_t *p;
-	unsigned int i, magic_number = 0;
-	int error = false;
-
-	p = video;
-	for (i = 0; i &lt; 32; i++)
-	{
-		magic_number |= ((*p++ &amp; 1) &lt;&lt; i);
-	}
-	if (magic_number != MAGIC_NUMBER)
-	{
-		error = true;
-	}
-	else
-	{
-		*hint = 0;
-		for (i = 0; i &lt; 32; i++)
-		{
-			*hint |= ((*p++ &amp; 1) &lt;&lt; i);
-		}
-	}
-	return error;
-}

Deleted: branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidKernelDeint.h
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidKernelDeint.h	2007-01-11 08:07:07 UTC (rev 2703)
+++ branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidKernelDeint.h	2007-01-11 19:18:08 UTC (rev 2704)
@@ -1,34 +0,0 @@
-
-#ifndef ADM_KERNELDEINT
-#define ADM_KERNELDEINT
-
-#include &quot;ADM_video/ADM_cache.h&quot;
-typedef struct  KERNEL_CONF
-{
-	uint32_t		order, threshold;
-	uint32_t		sharp, twoway, map;
-
-}KERNEL_CONF;
-
-class  ADMVideoKernelDeint:public AVDMGenericVideoStream
- {
-
- protected:
-        virtual char 		*printConf(void) ;
-	KERNEL_CONF		*_param;
-        int			 debug;
-	VideoCache		*vidCache;
-	   
-
- public:
- 		
-  			ADMVideoKernelDeint(  AVDMGenericVideoStream *in,CONFcouple *setup);
-  			~ADMVideoKernelDeint();
-	virtual uint8_t getFrameNumberNoAlloc(uint32_t frame, uint32_t *len,
-						ADMImage *data,uint32_t *flags);
-	virtual uint8_t	getCoupledConf( CONFcouple **couples)		;
-	virtual uint8_t configure( AVDMGenericVideoStream *instream);
-							
-};
-
-#endif

Deleted: branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidMPLD3D.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidMPLD3D.cpp	2007-01-11 08:07:07 UTC (rev 2703)
+++ branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidMPLD3D.cpp	2007-01-11 19:18:08 UTC (rev 2704)
@@ -1,347 +0,0 @@
-/***************************************************************************
-                          ADM_vidMPLD3D.cpp  -  description
-                             -------------------
-Mplayer HQDenoise3d port to avidemux2
-Original Authors
-Copyright (C) 2003
-Daniel Moreno &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">comac at comac.darktech.org</A>&gt;
-	&amp; A'rpi
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#include &lt;stdio.h&gt;
-#include &lt;stdlib.h&gt;
-#include &lt;string.h&gt;
-#include &lt;ADM_assert.h&gt;
-#include &lt;math.h&gt;
-
-#include &quot;config.h&quot;
-#include &quot;fourcc.h&quot;
-#include &quot;avio.hxx&quot;
-#include &quot;config.h&quot;
-#include &quot;avi_vars.h&quot;
-
-#include &quot;ADM_toolkit/toolkit.hxx&quot;
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
-#include &quot;ADM_video/ADM_vidMPLD3D.h&quot;
-
-#include &quot;ADM_osSupport/ADM_debugID.h&quot;
-#define MODULE_NAME MODULE_FILTER
-#include &quot;ADM_osSupport/ADM_debug.h&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
-
-
-static FILTER_PARAM mp3Param={3,{&quot;param1&quot;,&quot;param2&quot;,&quot;param3&quot;}};
-
-
-SCRIPT_CREATE(MPD3D_script,ADMVideoMPD3D,mp3Param);
-
-BUILD_CREATE(MPD3D_create,ADMVideoMPD3D);
-
-#define PARAM1_DEFAULT 4.0
-#define PARAM2_DEFAULT 3.0
-#define PARAM3_DEFAULT 6.0
-uint8_t DIA_d3d(double *luma,double *chroma,double *temporal);
- char 	*ADMVideoMPD3D::printConf(void)
- {
-	  	static char buf[50];
-
- 				sprintf((char *)buf,&quot; MPlayer HQ Denoise 3D (%2.1f - %2.1f - %2.1f)'&quot;,
-						_param-&gt;param1,_param-&gt;param2,_param-&gt;param3);
-        return buf;
-}
-
-uint8_t ADMVideoMPD3D::configure(AVDMGenericVideoStream *instream)
-{
-
-			_in=instream;
-			if(DIA_d3d(&amp;_param-&gt;param1,
-					&amp;_param-&gt;param2,
-					&amp;_param-&gt;param3))
-			{
-				setup();
-				return 1;
-			}
-			return 0;
-}
-ADMVideoMPD3D::~ADMVideoMPD3D()
-{
-
- 	DELETE(_param);
-	if(_uncompressed)
-		delete [] _uncompressed;
-	if(Line)
-		delete [] Line;
-	if(_storage)
-		delete  _storage;
-
-	_storage=NULL;
-	Line=NULL;
-	_uncompressed=NULL;
-}
-
-static inline unsigned int LowPassMul(unsigned int PrevMul, unsigned int CurrMul, int* Coef){
-//    int dMul= (PrevMul&amp;0xFFFFFF)-(CurrMul&amp;0xFFFFFF);
-    int dMul= PrevMul-CurrMul;
-    int d=((dMul+0x10007FF)/(65536/16));
-    return CurrMul + Coef[d];
-}
-
-void ADMVideoMPD3D::deNoise(unsigned char *Frame,        // mpi-&gt;planes[x]
-                    unsigned char *FrameDest,    // dmpi-&gt;planes[x]
-                   uint32_t 		 *LineAnt,      // vf-&gt;priv-&gt;Line (width bytes)
-		    unsigned short 	*FrameAntPtr,
-                    int W, int H, int sStride, int dStride,
-                    int *Horizontal, int *Vertical, int *Temporal)
-{
-    int X, Y;
-    int sLineOffs = 0, dLineOffs = 0;
-    unsigned int PixelAnt;
-    int PixelDst;
-    unsigned short* FrameAnt=(FrameAntPtr);
-    
-
-    /* First pixel has no left nor top neightbour. Only previous frame */
-    LineAnt[0] = PixelAnt = Frame[0]&lt;&lt;16;
-    PixelDst = LowPassMul(FrameAnt[0]&lt;&lt;8, PixelAnt, Temporal);
-    FrameAnt[0] = ((PixelDst+0x1000007F)/256);
-    FrameDest[0]= ((PixelDst+0x10007FFF)/65536);
-
-    /* Fist line has no top neightbour. Only left one for each pixel and
-     * last frame */
-    for (X = 1; X &lt; W; X++){
-        LineAnt[X] = PixelAnt = LowPassMul(PixelAnt, Frame[X]&lt;&lt;16, Horizontal);
-        PixelDst = LowPassMul(FrameAnt[X]&lt;&lt;8, PixelAnt, Temporal);
-	FrameAnt[X] = ((PixelDst+0x1000007F)/256);
-	FrameDest[X]= ((PixelDst+0x10007FFF)/65536);
-    }
-
-    for (Y = 1; Y &lt; H; Y++){
-	unsigned int PixelAnt;
-	unsigned short* LinePrev=&amp;FrameAnt[Y*W];
-	sLineOffs += sStride, dLineOffs += dStride;
-        /* First pixel on each line doesn't have previous pixel */
-        PixelAnt = Frame[sLineOffs]&lt;&lt;16;
-        LineAnt[0] = LowPassMul(LineAnt[0], PixelAnt, Vertical);
-	PixelDst = LowPassMul(LinePrev[0]&lt;&lt;8, LineAnt[0], Temporal);
-	LinePrev[0] = ((PixelDst+0x1000007F)/256);
-	FrameDest[dLineOffs]= ((PixelDst+0x10007FFF)/65536);
-
-        for (X = 1; X &lt; W; X++){
-	    int PixelDst;
-            /* The rest are normal */
-            PixelAnt = LowPassMul(PixelAnt, Frame[sLineOffs+X]&lt;&lt;16, Horizontal);
-            LineAnt[X] = LowPassMul(LineAnt[X], PixelAnt, Vertical);
-	    PixelDst = LowPassMul(LinePrev[X]&lt;&lt;8, LineAnt[X], Temporal);
-	    LinePrev[X] = ((PixelDst+0x1000007F)/256);
-	    FrameDest[dLineOffs+X]= ((PixelDst+0x10007FFF)/65536);
-        }
-    }
-}
-
-
-uint8_t  ADMVideoMPD3D::setup(void)
-{
- double LumSpac, LumTmp, ChromSpac, ChromTmp;
-
-        LumSpac = _param-&gt;param1;
-        LumTmp = _param-&gt;param3;
-
-        ChromSpac = _param-&gt;param2;
-        ChromTmp = LumTmp * ChromSpac / LumSpac;
-
-        PrecalcCoefs((int *)Coefs[0], LumSpac);
-        PrecalcCoefs((int *)Coefs[1], LumTmp);
-        PrecalcCoefs((int *)Coefs[2], ChromSpac);
-        PrecalcCoefs((int *)Coefs[3], ChromTmp);
-
-	aprintf(&quot;\n Param : %lf %lf %lf \n&quot;,
-		_param-&gt;param1,
-		_param-&gt;param2,
-		_param-&gt;param3);
-
-	return 1;
-}
-//--------------------------------------------------------
-ADMVideoMPD3D::ADMVideoMPD3D(AVDMGenericVideoStream *in,CONFcouple *couples)
-
-{
-  //uint32_t frame;
-  _storage=NULL;
-  _uncompressed=NULL;
-  Line=NULL;
-
-  _in=in;
-
-  Line=new uint32_t[in-&gt;getInfo()-&gt;width];
-  memcpy(&amp;_info,in-&gt;getInfo(),sizeof(_info));
-  _info.encoding=1;
-  if(couples)
-  {
-			_param=NEW(MPD3D_PARAM);
-			GET(param1);
-			GET(param2);
-			GET(param3);
-	}
-	else
-	{
-			_param=NEW( MPD3D_PARAM);
-			_param-&gt;param1=PARAM1_DEFAULT;
-			_param-&gt;param2=PARAM2_DEFAULT;
-			_param-&gt;param3=PARAM3_DEFAULT;
-	}
-	_uncompressed=new uint16_t[(_info.width*_info.height*3)&gt;&gt;1];
-	_storage=new ADMImage(_info.width,_info.height);
-	setup();
-
-	_last=0xFFFFFFF;
-}
-
-
-uint8_t	ADMVideoMPD3D::getCoupledConf( CONFcouple **couples)
-{
-
-			ADM_assert(_param);
-			*couples=new CONFcouple(3);
- 			//(*couples)-&gt;setCouple((char *)&quot;param&quot;,*_param);
-#define CSET(x)  (*couples)-&gt;setCouple((char *)#x,(_param-&gt;x))
-			CSET(param1);
-			CSET(param2);
-			CSET(param3);
-			return 1;
-
-}
-//                     1
-//		Get in range in 121 + coeff matrix
-//                     1
-//
-// If the value is too far away we ignore it
-// else we blend
-
-uint8_t ADMVideoMPD3D::getFrameNumberNoAlloc(uint32_t frame,
-				uint32_t *len,
-   				ADMImage *data,
-				uint32_t *flags)
-{
-UNUSED_ARG(flags);
-
-	int cw= _info.width&gt;&gt;1;
-	int ch= _info.height&gt;&gt;1;
-        int W = _info.width;
-	int H  = _info.height;
-	uint32_t dlen,dflags;
-
-  		if(frame&gt; _info.nb_frames-1) return 0;
-		*len=(W*H*3)&gt;&gt;1;
-		// First and last frame we don&quot;t modify.
-		if(!frame || (frame!=_last+1))
-			{
-					 if(!_in-&gt;getFrameNumberNoAlloc(frame, &amp;dlen,data,&amp;dflags))
-					 {
-					 	return 0;
-					}
-				 	unsigned short* dst=_uncompressed;
-	    				unsigned char* src=YPLANE(data);
-					for (int Y = 0; Y &lt; W*H; Y++)
-						{
-	    						 	*(dst++)=*(src++)&lt;&lt;8;
-						}
-					src=UPLANE(data);
-					dst=_uncompressed+(W*H);
-					for (int Y = 0; Y &lt; (W*H)&gt;&gt;2; Y++)
-						{
-	    						 	*(dst++)=*(src++)&lt;&lt;8;
-						}
-					src=VPLANE(data);
-					dst=_uncompressed+((5*W*H)&gt;&gt;2);
-					for (int Y = 0; Y &lt; (W*H)&gt;&gt;2; Y++)
-						{
-	    						 	*(dst++)=*(src++)&lt;&lt;8;
-						}
-					
-					_last=frame;
-					return 1;
-
-			}
-		ADM_assert(frame&lt;_info.nb_frames);
-		// read uncompressed frame
-		// else we fill previous/current/next
-		if(!_in-&gt;getFrameNumberNoAlloc(frame, &amp;dlen,_storage,&amp;dflags))
-		{
-			return 0;
-		}
-
-		uint8_t *c,*n;
-		unsigned short *ant;
-
-		ant=(_uncompressed);
-		n=YPLANE(data);
-		c=YPLANE(_storage);
-//
-   		deNoise(c, n,
-			Line,ant, W, H,
-                	W,W,
-                	(int *)Coefs[0],
-                	(int *)Coefs[0],
-                	(int *)Coefs[1]);
-
-
-		ant=(_uncompressed)+W*H;
-		n=UPLANE(data);
-		c=UPLANE(_storage);
-
-		deNoise(c, n,
-			Line, ant, cw, ch,
-                	cw,cw,
-                	(int *)Coefs[2],
-                	(int *)Coefs[2],
-                	(int *)Coefs[3]);
-
-
-		ant=_uncompressed+((W*H*5)&gt;&gt;2);
-		n=VPLANE(data);
-		c=VPLANE(_storage);
-
-		deNoise(c, n,
-			Line, ant, cw, ch,
-                	cw,cw,
-                	(int *)Coefs[2],
-                	(int *)Coefs[2],
-                	(int *)Coefs[3]);
-
-	// n is out....
-	_last=frame;
-	data-&gt;copyInfo(_storage);
-	return 1;
-
-
-}
-
-#define ABS(A) ( (A) &gt; 0 ? (A) : -(A) )
-
-void ADMVideoMPD3D::PrecalcCoefs(int *Ct, double Dist25)
-{
-    int i;
-    double Gamma, Simil, C;
-
-    Gamma = log(0.25) / log(1.0 - Dist25/255.0 - 0.00001);
-
-    for (i = -256*16; i &lt; 256*16; i++)
-    {
-        Simil = 1.0 - ABS(i) / (16*255.0);
-	C=4096.*(double)i;
-        C *= pow(Simil, Gamma) ;
-       Ct[16*256+i] = (int)((C&lt;0) ? (C-0.5) : (C+0.5));
-    }
-
-}
-
-

Deleted: branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidMPLD3D.h
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidMPLD3D.h	2007-01-11 08:07:07 UTC (rev 2703)
+++ branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidMPLD3D.h	2007-01-11 19:18:08 UTC (rev 2704)
@@ -1,69 +0,0 @@
-/***************************************************************************
-                          ADM_vidMPLD3D.h  -  description
-                             -------------------
-Mplayer HQDenoise3d port to avidemux2
-Original Authors
-Copyright (C) 2003
-Daniel Moreno &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">comac at comac.darktech.org</A>&gt;
-	&amp; A'rpi
-
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
- 
-#ifndef _D3D__
-#define _D3D__   
-#include &quot;ADM_video/ADM_vidCached.h&quot;
-typedef struct MPD3D_PARAM
-{
-	double  param1;
-	double  param2;
-	double  param3;
-}MPD3D_PARAM;
-
-class  ADMVideoMPD3D:public AVDMGenericVideoStream
- {
-
- protected:
-
-        			MPD3D_PARAM			*_param;
-
-				int	  					Coefs[4][512*16];
-        			uint32_t					*Line;
-
-				uint16_t				*_uncompressed;
-				ADMImage				*_storage;
-				uint32_t				_last;
-
-				void 	PrecalcCoefs(int *Ct, double Dist25);
-				uint8_t  	setup(void);
-				void 	deNoise(unsigned char *Frame,        // mpi-&gt;planes[x]
-                    					unsigned char *FrameDest,    // dmpi-&gt;planes[x]
-                    					uint32_t *LineAnt,      // vf-&gt;priv-&gt;Line (width bytes)
-		    					unsigned short *FrameAntPtr,
-                    					int W, int H, int sStride, int dStride,
-                    					int *Horizontal, int *Vertical, int *Temporal);
-
-
-
- public:
-
-
-						ADMVideoMPD3D(  AVDMGenericVideoStream *in,CONFcouple *setup);
-  						 ~ADMVideoMPD3D();
-		        virtual uint8_t 	getFrameNumberNoAlloc(uint32_t frame, uint32_t *len,
-   								ADMImage *data,uint32_t *flags);
-
-			virtual uint8_t 	configure( AVDMGenericVideoStream *instream);
-     			virtual char 	*printConf(void);
-			virtual uint8_t 	getCoupledConf( CONFcouple **couples);
-							
- }     ;
-#endif

Deleted: branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidMPLD3Dlow.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidMPLD3Dlow.cpp	2007-01-11 08:07:07 UTC (rev 2703)
+++ branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidMPLD3Dlow.cpp	2007-01-11 19:18:08 UTC (rev 2704)
@@ -1,328 +0,0 @@
-/***************************************************************************
-                          ADM_vidMPLD3D.cpp  -  description
-                             -------------------
-Mplayer HQDenoise3d port to avidemux2
-Original Authors
-Copyright (C) 2003
-Daniel Moreno &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">comac at comac.darktech.org</A>&gt;
-	&amp; A'rpi
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#include &lt;stdio.h&gt;
-#include &lt;stdlib.h&gt;
-#include &lt;string.h&gt;
-#include &lt;ADM_assert.h&gt;
-#include &lt;math.h&gt;
-
-#include &quot;config.h&quot;
-#include &quot;fourcc.h&quot;
-#include &quot;avio.hxx&quot;
-#include &quot;config.h&quot;
-#include &quot;avi_vars.h&quot;
-
-#include &quot;ADM_toolkit/toolkit.hxx&quot;
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
-#include &quot;ADM_video/ADM_vidMPLD3Dlow.h&quot;
-
-#include &quot;ADM_osSupport/ADM_debugID.h&quot;
-#define MODULE_NAME MODULE_FILTER
-#include &quot;ADM_osSupport/ADM_debug.h&quot;
-#include &quot;ADM_filter/video_filters.h&quot;
-
-
-static FILTER_PARAM mp3Param={3,{&quot;param1&quot;,&quot;param2&quot;,&quot;param3&quot;}};
-
-
-SCRIPT_CREATE(MPD3Dlow_script,ADMVideoMPD3Dlow,mp3Param);
-BUILD_CREATE(MPD3Dlow_create,ADMVideoMPD3Dlow);
-
-#define PARAM1_DEFAULT 4.0
-#define PARAM2_DEFAULT 3.0
-#define PARAM3_DEFAULT 6.0
-uint8_t DIA_d3d(double *luma,double *chroma,double *temporal);
- char 	*ADMVideoMPD3Dlow::printConf(void)
- {
-	  	static char buf[50];
-
- 				sprintf((char *)buf,&quot; MPlayer Denoise 3D (%2.1f - %2.1f - %2.1f)'&quot;,
-						_param-&gt;param1,_param-&gt;param2,_param-&gt;param3);
-        return buf;
-}
-
-uint8_t ADMVideoMPD3Dlow::configure(AVDMGenericVideoStream *instream)
-{
-
-			_in=instream;
-			if(DIA_d3d(&amp;_param-&gt;param1,
-					&amp;_param-&gt;param2,
-					&amp;_param-&gt;param3))
-			{
-				setup();
-				return 1;
-			}
-			return 0;
-}
-ADMVideoMPD3Dlow::~ADMVideoMPD3Dlow()
-{
-
- 	DELETE(_param);
-	delete  _uncompressed;
-	delete  _stored;
-	delete [] Line;
-	Line=NULL;
-	_param=NULL;
-	_uncompressed=NULL;
-	_stored=NULL;
-}
-
-
-#define LowPass(Prev, Curr, Coef) (Curr + Coef[Prev - Curr])
-
-
-void ADMVideoMPD3Dlow::deNoise(unsigned char *Frame,        // mpi-&gt;planes[x]
-                    unsigned char *FramePrev,    // pmpi-&gt;planes[x]
-                    unsigned char *FrameDest,    // dmpi-&gt;planes[x]
-                    unsigned char *LineAnt,      // vf-&gt;priv-&gt;Line (width bytes)
-                    int W, int H, int sStride, int pStride, int dStride,
-                    int *Horizontal, int *Vertical, int *Temporal)
-{
-    int X, Y;
-    int sLineOffs = 0, pLineOffs = 0, dLineOffs = 0;
-    unsigned char PixelAnt;
-
-    /* First pixel has no left nor top neightbour. Only previous frame */
-    LineAnt[0] = PixelAnt = Frame[0];
-    FrameDest[0] = LowPass(FramePrev[0], LineAnt[0], Temporal);
-
-    /* Fist line has no top neightbour. Only left one for each pixel and
-     * last frame */
-    for (X = 1; X &lt; W; X++)
-    {
-        PixelAnt = LowPass(PixelAnt, Frame[X], Horizontal);
-        LineAnt[X] = PixelAnt;
-        FrameDest[X] = LowPass(FramePrev[X], LineAnt[X], Temporal);
-    }
-
-    for (Y = 1; Y &lt; H; Y++)
-    {
-	sLineOffs += sStride, pLineOffs += pStride, dLineOffs += dStride;
-        /* First pixel on each line doesn't have previous pixel */
-        PixelAnt = Frame[sLineOffs];
-        LineAnt[0] = LowPass(LineAnt[0], PixelAnt, Vertical);
-        FrameDest[dLineOffs] = LowPass(FramePrev[pLineOffs], LineAnt[0], Temporal);
-
-        for (X = 1; X &lt; W; X++)
-        {
-            /* The rest are normal */
-            PixelAnt = LowPass(PixelAnt, Frame[sLineOffs+X], Horizontal);
-            LineAnt[X] = LowPass(LineAnt[X], PixelAnt, Vertical);
-            FrameDest[dLineOffs+X] = LowPass(FramePrev[pLineOffs+X], LineAnt[X], Temporal);
-        }
-    }
-}
-
-
-
-uint8_t  ADMVideoMPD3Dlow::setup(void)
-{
- double LumSpac, LumTmp, ChromSpac, ChromTmp;
-
-        LumSpac = _param-&gt;param1;
-        LumTmp = _param-&gt;param3;
-
-        ChromSpac = _param-&gt;param2;
-        ChromTmp = LumTmp * ChromSpac / LumSpac;
-
-        PrecalcCoefs((int *)Coefs[0], LumSpac);
-        PrecalcCoefs((int *)Coefs[1], LumTmp);
-        PrecalcCoefs((int *)Coefs[2], ChromSpac);
-        PrecalcCoefs((int *)Coefs[3], ChromTmp);
-
-	aprintf(&quot;\n Param : %lf %lf %lf \n&quot;,
-		_param-&gt;param1,
-		_param-&gt;param2,
-		_param-&gt;param3);
-
-	_last=0xFFFFFFF;
-
-	return 1;
-}
-//--------------------------------------------------------
-ADMVideoMPD3Dlow::ADMVideoMPD3Dlow(
-									AVDMGenericVideoStream *in,CONFcouple *couples)
-
-{
-uint32_t page;
-
-  Line=new uint8_t [in-&gt;getInfo()-&gt;width];
-  memcpy(&amp;_info,in-&gt;getInfo(),sizeof(_info));
-
-	page=_info.width*_info.height;
-
- // _stored=new uint8_t[(page*3)&gt;&gt;1];
- // _uncompressed=new uint8_t[ (page*3)&gt;&gt;1];
- 	_stored=new ADMImage(_info.width,_info.height);
-	_uncompressed=new ADMImage(_info.width,_info.height);
-
-  _info.encoding=1;
-  _in=in;
-  if(couples)
-  {
-			_param=NEW(MPD3D_PARAM);
-			GET(param1);
-			GET(param2);
-			GET(param3);
-	}
-	else
-	{
-			_param=NEW( MPD3D_PARAM);
-			_param-&gt;param1=PARAM1_DEFAULT;
-			_param-&gt;param2=PARAM2_DEFAULT;
-			_param-&gt;param3=PARAM3_DEFAULT;
-	}
-	setup();
-
-}
-
-
-uint8_t	ADMVideoMPD3Dlow::getCoupledConf( CONFcouple **couples)
-{
-
-			ADM_assert(_param);
-			*couples=new CONFcouple(3);
- 			//(*couples)-&gt;setCouple((char *)&quot;param&quot;,*_param);
-#define CSET(x)  (*couples)-&gt;setCouple((char *)#x,(_param-&gt;x))
-			CSET(param1);
-			CSET(param2);
-			CSET(param3);
-			return 1;
-
-}
-//                     1
-//		Get in range in 121 + coeff matrix
-//                     1
-//
-// If the value is too far away we ignore it
-// else we blend
-
-uint8_t ADMVideoMPD3Dlow::getFrameNumberNoAlloc(uint32_t frame,
-				uint32_t *len,
-   				ADMImage *data,
-				uint32_t *flags)
-{
-UNUSED_ARG(flags);
-
-	int cw= _info.width&gt;&gt;1;
-	int ch= _info.height&gt;&gt;1;
-        int W = _info.width;
-	int H  = _info.height;
-	uint32_t dlen,dflags;
-
-  		if(frame&gt; _info.nb_frames-1) return 0;
-		*len=(W*H*3)&gt;&gt;1;
-		// First and last frame we don&quot;t modify.
-		if(!frame || (frame!=_last+1))
-			{
-				aprintf(&quot;D3D: First /last frame\n&quot;);
-				 if(!_in-&gt;getFrameNumberNoAlloc(frame, &amp;dlen,data,&amp;dflags))
-				 {
-					 	return 0;
-				 }
-				// store for future use
-				memcpy(_stored-&gt;data,data-&gt;data,*len);
-				_last=frame;
-				
-				return 1;
-			}
-			ADM_assert(frame&lt;_info.nb_frames);
-			aprintf(&quot;D3D: next frame\n&quot;);
-			// read uncompressed frame
-	 		if(!_in-&gt;getFrameNumberNoAlloc(frame, &amp;dlen,_uncompressed,&amp;dflags))
-				 {
-					 	return 0;
-				 }
-
-		uint8_t *c,*d,*p;
-
-		d=YPLANE(data);
-		c=YPLANE(_uncompressed);
-		p=YPLANE(_stored);
-//
-
-   	deNoise(c,p, d,
-		Line, W, H,
-                W,W,W,
-               	Coefs[0] + 256,
-                Coefs[0] + 256,
-                Coefs[1] + 256);
-
-	uint32_t page=W*H;
-		d=UPLANE(data);
-		c=UPLANE(_uncompressed);
-		p=UPLANE(_stored);
-
-	deNoise(c,p, d,
-		Line, cw, ch,
-                cw,cw,cw,
-               	Coefs[2] + 256,
-                Coefs[2] + 256,
-                Coefs[3] + 256);
-
-	page=page&gt;&gt;2;		
-		d=VPLANE(data);
-		c=VPLANE(_uncompressed);
-		p=VPLANE(_stored);
-
-	deNoise(c,p, d,
-		Line, cw, ch,
-                cw,cw,cw,
-               	Coefs[2] + 256,
-              	Coefs[2] + 256,
-                Coefs[3] + 256);
-
-
-	_last=frame;
-	memcpy(YPLANE(_stored),YPLANE(data),W*H);
-	memcpy(UPLANE(_stored),UPLANE(data),(W*H)&gt;&gt;2);
-	memcpy(VPLANE(_stored),VPLANE(data),(W*H)&gt;&gt;2);
-	data-&gt;copyInfo(_uncompressed);
-	return 1;
-
-
-}
-
-#define ABS(A) ( (A) &gt; 0 ? (A) : -(A) )
-
-void ADMVideoMPD3Dlow::PrecalcCoefs(int *Ct, double Dist25)
-{
- int i;
-    double Gamma, Simil, C;
-    double d;
-    Gamma = log(0.25) / log(1.0 - Dist25/255.0);
-
-    for (i = -256; i &lt;= 255; i++)
-    {
-    	if(i&gt;0) d=(double)i/255.;
-		else d=(double)-i/255.;
-        Simil = 1.0 - d;
-//        Ct[256+i] = lround(pow(Simil, Gamma) * (double)i);
- 	C= (double)i;
-        C *= pow(Simil, Gamma);
-
-  	Ct[256+i] = (int)((C&lt;0) ? (C-0.5) : (C+0.5));
-
-    }
-
-
-}
-
-

Deleted: branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidMPLD3Dlow.h
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidMPLD3Dlow.h	2007-01-11 08:07:07 UTC (rev 2703)
+++ branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidMPLD3Dlow.h	2007-01-11 19:18:08 UTC (rev 2704)
@@ -1,65 +0,0 @@
-/***************************************************************************
-                          ADM_vidMPLD3D.h  -  description
-                             -------------------
-Mplayer Denoise3d port to avidemux2
-Original Authors
-Copyright (C) 2003
-Daniel Moreno &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">comac at comac.darktech.org</A>&gt;
-
-
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-#ifndef __D3DLOW__
-#define __D3DLOW__
-#include &quot;ADM_video/ADM_vidCached.h&quot;
-#include &quot;ADM_video/ADM_vidMPLD3D.h&quot;
-
-class  ADMVideoMPD3Dlow:public AVDMGenericVideoStream
- {
-
- protected:
-
-        			MPD3D_PARAM			*_param;
-
-				int				Coefs[4][512];
-        			uint8_t				*Line;
-				ADMImage			*_stored;
-				
-
-
-				uint32_t					_last;
-
-				void 	PrecalcCoefs(int *Ct, double Dist25);
-				uint8_t  	setup(void);
-				void 	deNoise(unsigned char *Frame,        // mpi-&gt;planes[x]
-                    						unsigned char *FramePrev,    // pmpi-&gt;planes[x]
-                    						unsigned char *FrameDest,    // dmpi-&gt;planes[x]
-                    						unsigned char *LineAnt,      // vf-&gt;priv-&gt;Line (width bytes)
-                    						int W, int H, int sStride, int pStride, int dStride,
-                    						int *Horizontal, int *Vertical, int *Temporal);
-
-
-
- public:
-
-
-						ADMVideoMPD3Dlow(  AVDMGenericVideoStream *in,CONFcouple *setup);
-  						 ~ADMVideoMPD3Dlow();
-		        virtual uint8_t 	getFrameNumberNoAlloc(uint32_t frame, uint32_t *len,
- 									ADMImage *data,uint32_t *flags);
-
-			virtual uint8_t 	configure( AVDMGenericVideoStream *instream);
-     			virtual char 		*printConf(void);
-			virtual uint8_t 	getCoupledConf( CONFcouple **couples);
-
- }     ;
-#endif

Deleted: branches/avidemux_2.4_branch/avidemux/ADM_video/DIA_kerneldeint.cpp
===================================================================

Modified: branches/avidemux_2.4_branch/avidemux/ADM_video/Makefile.am
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_video/Makefile.am	2007-01-11 08:07:07 UTC (rev 2703)
+++ branches/avidemux_2.4_branch/avidemux/ADM_video/Makefile.am	2007-01-11 19:18:08 UTC (rev 2704)
@@ -51,16 +51,12 @@
  ADM_vidIVTC.cpp \
  ADM_vidIVTC.h ADM_interlaced.cpp \
 	ADM_interlaced.h ADM_vidPulldown.h ADM_vidPulldown.cpp \
- ADM_vidMPLD3D.cpp \
- ADM_vidMPLD3D.h \
-	ADM_vidMPLD3Dlow.h ADM_vidMPLD3Dlow.cpp \
  ADM_vidBlend.cpp \
  ADM_vidRaw.cpp \
 	ADM_vidSRTRender.cpp \
  ADM_vidSRTload.cpp \
  ADM_vidlavdeint.cpp \
 	ADM_mpdetc.cpp \
- ADM_vidKernelDeint.cpp \
  ADM_vidForcedPP.cpp \
  ADM_vidDecTelecide.cpp \
  ADM_vidDecTelecide.h ADM_cache.cpp \
@@ -71,7 +67,6 @@
  ADM_vobsubinfo.cpp \
  ADM_vidChangeFPS.cpp \
  ADM_vidVobSubRender.cpp \
- ADM_lavpp_deint.cpp \
  ADM_vidHue.cpp \
  ADM_vidEq2.cpp \
  ADM_vidDGbob.cpp \
@@ -108,8 +103,8 @@
 ADM_guiResize.cpp  ADM_vidDropOut.cpp  ADM_vidRaw.cpp \
 ADM_interlaced.cpp ADM_vidDropOut.h  \
 ADM_interlaced.h ADM_vidEq2.cpp  ADM_vidResize.cpp \
-ADM_lavpp_deint.cpp  ADM_vidEq2.h  ADM_vidResize25.cpp \
-ADM_lavpp_deintparam.h ADM_vidEqualizer.cpp  ADM_vidReverse.cpp \
+ADM_vidEq2.h  ADM_vidResize25.cpp \
+ADM_vidEqualizer.cpp  ADM_vidReverse.cpp \
 ADM_mpdetc.cpp ADM_vidEqualizer.h  ADM_vidRotate.cpp \
 ADM_mpdetc.h ADM_vidRotate.h \
 ADM_resizebis.cpp   ADM_vidSRT.cpp \
@@ -132,16 +127,16 @@
 ADM_vidCached.cpp  ADM_vidHue.h  ADM_vidTdeint.cpp \
 ADM_vidCached.h  ADM_vidIVTC.cpp ADM_vidTelecide.cpp \
 ADM_vidChangeFPS.cpp ADM_vidIVTC.h ADM_vidTelecide.h \
-ADM_vidChangeFPS.h ADM_vidKernelDeint.cpp  ADM_vidTempSmooth.cpp \
-ADM_vidChroma.cpp  ADM_vidKernelDeint.h  ADM_vidTempSmooth.h \
+ADM_vidChangeFPS.h ADM_vidTempSmooth.cpp \
+ADM_vidChroma.cpp  ADM_vidTempSmooth.h \
 ADM_vidChroma.h  ADM_vidLargeMedian.cpp  ADM_vidUVSwap.cpp \
 ADM_vidChromaShift.cpp ADM_vidLargeMedian.h  ADM_vidUVSwap.h \
 ADM_vidChromaShift.h ADM_vidLuma.cpp ADM_vidUnblend.cpp \
 ADM_vidClean.cpp ADM_vidLuma.h ADM_vidUnblend_param.h \
-ADM_vidClean.h ADM_vidMPLD3D.cpp ADM_vidVlad.cpp \
-ADM_vidColorYuv.cpp  ADM_vidMPLD3D.h ADM_vidVlad.h \
-ADM_vidColorYuv.h  ADM_vidMPLD3Dlow.cpp  ADM_vidVobSub.h \
-ADM_vidColorYuv_param.h  ADM_vidMPLD3Dlow.h  ADM_vidVobSubRender.cpp \
+ADM_vidClean.h ADM_vidVlad.cpp \
+ADM_vidColorYuv.cpp  ADM_vidVlad.h \
+ADM_vidColorYuv.h  ADM_vidVobSub.h \
+ADM_vidColorYuv_param.h  ADM_vidVobSubRender.cpp \
 ADM_vidCommonFilter.h  ADM_vidMPLResize.cpp  ADM_vidVobsub.cpp \
 ADM_vidContrast.cpp  ADM_vidMPdelogo.cpp ADM_vidWirl.cpp \
 ADM_vidContrast.h  ADM_vidMPdelogo.h ADM_vidlavdeint.cpp \
@@ -149,7 +144,7 @@
 ADM_vidConvolution.hxx ADM_vidMSharpen_param.h ADM_vobsubinfo.cpp \
 ADM_vidCrop.cpp  ADM_vidMSmooth_param.h  ADM_vobsubinfo.h \
 ADM_vidDGbob.cpp ASM_vidDenoise.cpp \
-ADM_vidDGbob_param.h   DIA_kerneldeint.cpp \
+ADM_vidDGbob_param.h   \
 ADM_vidDecDec.cpp  ADM_vidMosaic.cpp swscale_internal.h \
 ADM_vidTdeint_util.txt ADM_vidASS.h ADM_vidASS.cpp \
 ADM_vidAss_Params.h mmx_macros.h
@@ -157,7 +152,7 @@
 ####### kdevelop will overwrite this part!!! (end)############
 INCLUDES = $(all_includes) -I../ADM_libraries -I../ADM_libraries/ADM_utilities -I../ADM_libraries/ADM_lavutil \
 			 $(FREETYPE_CFLAGS) $(ALTIVEC_SWITCH) -I../ADM_userInterfaces/ADM_commonUI -I../ADM_inputs
-noinst_HEADERS = ADM_vidlavdeint.h ADM_mpdetc.h ADM_vidKernelDeint.h \
+noinst_HEADERS = ADM_vidlavdeint.h ADM_mpdetc.h \
 					ADM_vidForcedPP.h  ADM_cache.h ADM_vidDecTel_param.h ADM_vidDecDec_param.h \
 					ADM_vidMSmooth_param.h ADM_vidEqualizer.h ADM_vobsubinfo.h ADM_vidVobSub.h \
-		ADM_lavpp_deintparam.h ADM_vidEq2.h ADM_vidASS.h
+		ADM_vidEq2.h ADM_vidASS.h

Copied: branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp (from rev 2489, branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_lavpp_deint.cpp)
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_lavpp_deint.cpp	2006-10-31 15:59:58 UTC (rev 2489)
+++ branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_lavpp_deint.cpp	2007-01-11 19:18:08 UTC (rev 2704)
@@ -0,0 +1,290 @@
+//
+// C++ Implementation: %{MODULE}
+//
+// Description: 
+//
+//
+// Author: %{AUTHOR} &lt;%{EMAIL}&gt;, (C) %{YEAR}
+//
+// Copyright: See COPYING file that comes with this distribution
+//
+//  Small wrapper for lavcodec deinterlacer postprocessing
+
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include &quot;config.h&quot;
+#include &lt;stdio.h&gt;
+#include &lt;stdlib.h&gt;
+#include &lt;string.h&gt;
+#include &lt;math.h&gt;
+#include &lt;ADM_assert.h&gt;
+
+#include &quot;config.h&quot;
+#include &quot;fourcc.h&quot;
+
+#include &quot;ADM_toolkit/toolkit.hxx&quot;
+#include &quot;ADM_editor/ADM_edit.hxx&quot;
+#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_filter/video_filters.h&quot;
+
+#include &quot;ADM_toolkit/filesel.h&quot;
+
+#include &quot;ADM_colorspace/colorspace.h&quot;
+
+#include &quot;ADM_osSupport/ADM_cpuCap.h&quot;
+
+#include &quot;ADM_osSupport/ADM_debugID.h&quot;
+#define MODULE_NAME MODULE_FILTER
+#include &quot;ADM_osSupport/ADM_debug.h&quot;
+
+#include &quot;ADM_lavpp_deintparam.h&quot;
+
+#include &quot;ADM_userInterfaces/ADM_commonUI/DIA_factory.h&quot;
+/*
+{&quot;al&quot;, &quot;autolevels&quot;,            0, 1, 2, LEVEL_FIX},
+{&quot;lb&quot;, &quot;linblenddeint&quot;,         1, 1, 4, LINEAR_BLEND_DEINT_FILTER},
+{&quot;li&quot;, &quot;linipoldeint&quot;,          1, 1, 4, LINEAR_IPOL_DEINT_FILTER},
+{&quot;ci&quot;, &quot;cubicipoldeint&quot;,        1, 1, 4, CUBIC_IPOL_DEINT_FILTER},
+{&quot;md&quot;, &quot;mediandeint&quot;,           1, 1, 4, MEDIAN_DEINT_FILTER},
+{&quot;fd&quot;, &quot;ffmpegdeint&quot;,           1, 1, 4, FFMPEG_DEINT_FILTER},
+{&quot;tn&quot;, &quot;tmpnoise&quot;,              1, 7, 8, TEMP_NOISE_FILTER},
+
+{&quot;fq&quot;, &quot;forcequant&quot;,            1, 0, 0, FORCE_QUANT}, *******************
+{&quot;l5&quot;, &quot;lowpass5&quot;,              1, 1, 4, LOWPASS5_DEINT_FILTER}, *********
+*/
+
+
+
+class  ADMVideoLavPPDeint:public AVDMGenericVideoStream
+{
+
+  protected:
+    virtual char                    *printConf(void);
+    void                            *ppcontext;
+    void                            *ppmode;
+    ADMImage                        *uncompressed;
+    lavc_pp_param                   *_param;
+    
+    void                            setup( void );
+    void                            cleanup( void );
+  public:
+    
+    
+    ADMVideoLavPPDeint(  AVDMGenericVideoStream *in,CONFcouple *setup);
+    ~ADMVideoLavPPDeint();
+    virtual uint8_t getFrameNumberNoAlloc(uint32_t frame, uint32_t *len,
+                                          ADMImage *data,uint32_t *flags);
+    virtual uint8_t getCoupledConf( CONFcouple **couples)           ;
+    virtual uint8_t configure( AVDMGenericVideoStream *instream);
+                                                        
+};
+
+
+static FILTER_PARAM lavppdeint_param={2,{&quot;deintType&quot;,&quot;autolevel&quot;}};
+//*************************************************************
+//
+
+//*************************************************************
+SCRIPT_CREATE(lavppdeint_script,ADMVideoLavPPDeint,lavppdeint_param);
+BUILD_CREATE(lavppdeint_create,ADMVideoLavPPDeint);
+//*************************************************************
+uint8_t ADMVideoLavPPDeint::configure(AVDMGenericVideoStream *in)
+{
+
+  #define PX(x) &amp;(_param-&gt;x)
+  _in=in;
+  
+  
+   diaMenuEntry menuField[6]={{PP_BM_NONE,        _(&quot;None&quot;),NULL},
+                             {PP_BM_LINEAR_BLEND, _(&quot;Linear Blend&quot;),NULL},
+                             {PP_BM_LINEAR_INTER, _(&quot;Linear Interpolate&quot;),NULL},
+                             {PP_BM_CUBIC_INTER, _(&quot;Cubic Interpolate&quot;),NULL},
+                             {PP_BM_MEDIAN_INTER, _(&quot;Median Interpolate&quot;),NULL},
+                             {PP_BM_FFMPEG_DEINT, _(&quot;FFmpeg deint&quot;),NULL},
+                          };
+  
+    
+    diaElemMenu     menu1(PX(deintType),_(&quot;Deinterlacing&quot;), 6,menuField);
+    diaElemToggle   autolevel(PX(autolevel),_(&quot;Autolevel&quot;));
+    
+    diaElem *elems[2]={&amp;menu1,&amp;autolevel};
+  
+   if(diaFactoryRun(&quot;Lavcodec deinterlacer&quot;,2,elems))
+  {
+    setup();
+    return 1; 
+  }
+  return 0;        
+}
+ 
+//*************************************************************
+char *ADMVideoLavPPDeint::printConf( void )
+{
+  static char buf[50];
+        
+  sprintf((char *)buf,&quot; Lavcodec PP deinterlacer autolev:%d deint:%d&quot;,_param-&gt;autolevel,_param-&gt;deintType);
+  return buf;
+}
+//*************************************************************
+ADMVideoLavPPDeint::ADMVideoLavPPDeint(  AVDMGenericVideoStream *in,CONFcouple *couples)
+{
+
+  _in=in;         
+  memcpy(&amp;_info,_in-&gt;getInfo(),sizeof(_info));    
+  _info.encoding=1;  
+  
+  ppcontext=NULL;  
+  ppmode=NULL;   
+  
+  _uncompressed=new ADMImage(_info.width,_info.height);
+  if(couples)
+  {   
+    _param=NEW(lavc_pp_param);
+    GET(deintType);    
+    GET(autolevel);
+  }      
+  else
+  {
+    _param=NEW(lavc_pp_param);
+    _param-&gt;deintType=0;
+    _param-&gt;autolevel=0;
+    
+  } 
+                 
+  setup();
+ 
+}
+//*************************************************************
+void ADMVideoLavPPDeint::cleanup(void)
+{
+  if(ppcontext)
+  {
+    pp_free_context(ppcontext);
+    ppcontext=NULL;
+  }
+  if(ppmode)
+  {
+    pp_free_mode(ppmode);
+    ppmode=NULL;
+  }
+  
+} 
+//*************************************************************
+void ADMVideoLavPPDeint::setup(void)
+{
+  char string[1024];
+  uint32_t ppCaps=0;
+                
+  string[0]=0;
+  
+        cleanup();
+#if (defined( ARCH_X86)  || defined(ARCH_X86_64))
+#define ADD(x,y) if( CpuCaps::has##x()) ppCaps|=PP_CPU_CAPS_##y;                
+                ADD(MMX,MMX);           
+                ADD(3DNOW,3DNOW);
+                ADD(MMXEXT,MMX2);
+#endif             
+        cleanup();
+#undef ADD       
+#define ADD(z)  { if(string[0]) strcat(string,&quot;,&quot;#z); else strcpy(string,#z);}        
+               
+        if(_param-&gt;autolevel) ADD(al);
+        switch(_param-&gt;deintType)
+        {
+          case PP_BM_NONE:break;
+          case PP_BM_LINEAR_BLEND: ADD(lb);break;
+          case PP_BM_LINEAR_INTER: ADD(li);break;
+          case PP_BM_CUBIC_INTER: ADD(ci);break;
+          case PP_BM_MEDIAN_INTER: ADD(md);break;
+          case PP_BM_FFMPEG_DEINT: ADD(fd);break;                             
+        }        
+
+
+        ppcontext=pp_get_context(_info.width, _info.height, ppCaps);           
+        ppmode=pp_get_mode_by_name_and_quality(string,1);;
+        
+        ADM_assert(ppcontext);
+        ADM_assert(ppmode);
+  
+} 
+//*************************************************************
+ADMVideoLavPPDeint::~ADMVideoLavPPDeint()
+{
+  cleanup();
+  if(_uncompressed)
+        delete _uncompressed;
+  DELETE(_param);
+  _uncompressed=NULL;
+}
+
+//*************************************************************
+uint8_t ADMVideoLavPPDeint::getCoupledConf( CONFcouple **couples)
+{
+  
+  *couples=new CONFcouple(2);
+  CSET(deintType);    
+  CSET(autolevel);
+  
+  return 1;
+}
+//*************************************************************
+uint8_t ADMVideoLavPPDeint::getFrameNumberNoAlloc(uint32_t frame,
+                                              uint32_t *len,
+                                              ADMImage *data,
+                                              uint32_t *flags)
+{
+
+ 
+  ADM_assert(frame&lt;_info.nb_frames);
+        // read uncompressed frame
+  if(!_in-&gt;getFrameNumberNoAlloc(frame, len,_uncompressed,flags)) return 0;
+
+  
+  //
+  uint8_t *iBuff[3],*oBuff[3];
+  int strideTab[3],strideTab2[3];                 
+                                                                
+  oBuff[0]=YPLANE(data);
+  oBuff[1]=UPLANE(data);
+  oBuff[2]=VPLANE(data);
+                                
+  iBuff[0]=YPLANE(_uncompressed);
+  iBuff[1]=UPLANE(_uncompressed);
+  iBuff[2]=VPLANE(_uncompressed);
+                                
+                                
+  strideTab[0]=strideTab2[0]=_info.width;
+  strideTab[1]=strideTab2[1]=_info.width&gt;&gt;1;
+  strideTab[2]=strideTab2[2]=_info.width&gt;&gt;1;
+        
+  int type;
+  if(_uncompressed-&gt;flags&amp;AVI_KEY_FRAME)
+    type=1;
+  else if(_uncompressed-&gt;flags &amp; AVI_B_FRAME)
+    type=3;
+  else
+    type=2;
+  pp_postprocess(
+        iBuff,
+        strideTab,
+        oBuff,
+        strideTab2,
+        _info.width,
+        _info.height,
+        NULL,
+        0,
+        ppmode,
+        ppcontext,
+        type); // I ?
+                                
+  
+  data-&gt;copyInfo(_uncompressed);
+  return 1;
+}

Copied: branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_lavpp_deintparam.h (from rev 2489, branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_lavpp_deintparam.h)

Copied: branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp (from rev 2489, branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidKernelDeint.cpp)
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidKernelDeint.cpp	2006-10-31 15:59:58 UTC (rev 2489)
+++ branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidKernelDeint.cpp	2007-01-11 19:18:08 UTC (rev 2704)
@@ -0,0 +1,461 @@
+/***************************************************************************
+                          ADM_vidKernelDeint  -  description
+                             -------------------
+ 			Port of another D Graft deinterlacer
+			<A HREF="http://neuron2.net/kerneldeint/kerneldeint.html">http://neuron2.net/kerneldeint/kerneldeint.html</A>
+     ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+
+/*
+	KernelDeint() plugin for Avisynth.
+
+	Copyright (C) 2003 Donald A. Graft
+
+	This program is free software; you can redistribute it and/or modify
+	it under the terms of the GNU General Public License as published by
+	the Free Software Foundation.
+
+	This program is distributed in the hope that it will be useful,
+	but WITHOUT ANY WARRANTY; without even the implied warranty of
+	MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+	GNU General Public License for more details.
+
+	You should have received a copy of the GNU General Public License
+	along with this program; if not, write to the Free Software
+	Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
+*/
+
+#include &lt;stdio.h&gt;
+#include &lt;stdlib.h&gt;
+#include &lt;string.h&gt;
+#include &lt;ADM_assert.h&gt;
+#include &lt;math.h&gt;
+#include &lt;math.h&gt;
+#include &lt;iconv.h&gt;
+#include &quot;config.h&quot;
+
+
+#include &quot;fourcc.h&quot;
+#include &quot;avio.hxx&quot;
+
+#include &quot;avi_vars.h&quot;
+
+#include &quot;ADM_toolkit/toolkit.hxx&quot;
+#include &quot;ADM_editor/ADM_edit.hxx&quot;
+#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+
+#include &quot;ADM_osSupport/ADM_debugID.h&quot;
+#define MODULE_NAME MODULE_FILTER
+#include &quot;ADM_osSupport/ADM_debug.h&quot;
+#include &quot;ADM_filter/video_filters.h&quot;
+#include &quot;ADM_vidKernelDeint.h&quot;
+
+#include &quot;ADM_userInterfaces/ADM_commonUI/DIA_factory.h&quot;
+
+static FILTER_PARAM kdintParam={5,{&quot;order&quot;,&quot;threshold&quot;,&quot;sharp&quot;,&quot;twoway&quot;,&quot;map&quot;}};
+
+
+SCRIPT_CREATE(kerneldeint_script,ADMVideoKernelDeint,kdintParam);
+BUILD_CREATE(kerneldeint_create,ADMVideoKernelDeint);
+
+static int PutHintingData(uint8_t *video, unsigned int hint);
+static int GetHintingData(uint8_t *video, unsigned int *hint);
+
+// extern uint8_t DIA_kerneldeint(uint32_t *order, uint32_t *threshold, uint32_t *sharp, 
+// 		uint32_t *twoway, uint32_t *map);
+
+#define PROGRESSIVE  0x00000001
+
+
+
+
+
+uint8_t ADMVideoKernelDeint::configure( AVDMGenericVideoStream *instream)
+{
+  #define PX(x) &amp;(_param-&gt;x)
+_in=instream;
+
+   diaMenuEntry menuField[2]={{1,_(&quot;Top&quot;),NULL},
+                             {0,_(&quot;Bottom&quot;),NULL}
+                          };
+  
+    
+    diaElemMenu     menu1(PX(order),_(&quot;Field Order&quot;), 2,menuField);
+    diaElemUInteger threshold(PX(threshold),_(&quot;Threshold&quot;),0,100,_(&quot;Smaller means more deinterlacing&quot;));
+    diaElemToggle   sharp(PX(sharp),_(&quot;Sharp&quot;),_(&quot;Sharper Engine&quot;));
+    diaElemToggle   twoway(PX(twoway),_(&quot;Twoway&quot;),_(&quot;Extrapolate better (better not to use it)&quot;));
+    diaElemToggle   map(PX(map),_(&quot;Map&quot;),_(&quot;Show interlaced areas (for test!)&quot;));
+    
+    diaElem *elems[5]={&amp;menu1,&amp;threshold,&amp;sharp,&amp;twoway,&amp;map};
+  
+   return  diaFactoryRun(&quot;Fade&quot;,5,elems);
+}
+uint8_t	ADMVideoKernelDeint::getCoupledConf( CONFcouple **couples)
+{
+
+			*couples=new CONFcouple(5);
+
+			CSET(order);
+			CSET(threshold);
+			CSET(sharp);
+			CSET(twoway);
+			CSET(map);	
+
+		return 1;	
+}
+char *ADMVideoKernelDeint::printConf( void )
+{
+ 	static char buf[50];
+ 	
+ 	sprintf((char *)buf,&quot; D Graft Kernel Deint&quot;);
+        return buf;
+}
+
+ADMVideoKernelDeint::~ADMVideoKernelDeint()
+{
+ if(vidCache) delete vidCache;
+ 	
+}
+
+
+ ADMVideoKernelDeint::ADMVideoKernelDeint( AVDMGenericVideoStream *in,CONFcouple *couples)
+{
+
+		if(!couples)
+		{
+			_param=NEW(KERNEL_CONF);
+	    		_param-&gt;order=1; // Bff=0 / 1=tff
+	    		_param-&gt;threshold=10;
+	    		_param-&gt;sharp=0;
+	    		_param-&gt;twoway=0;
+	    		_param-&gt;map=0;
+		}
+		else
+		{
+			_param=NEW(KERNEL_CONF);
+			GET(order);
+			GET(threshold);
+			GET(sharp);
+			GET(twoway);
+			GET(map);
+						
+		}
+	    debug=0;   
+	    _in=in;
+	    
+	   _uncompressed=NULL;
+
+  	memcpy(&amp;_info,_in-&gt;getInfo(),sizeof(_info));
+	vidCache=new VideoCache(4,_in);
+
+
+}
+uint8_t ADMVideoKernelDeint::getFrameNumberNoAlloc(uint32_t frame,
+							uint32_t *len,
+							ADMImage *data,
+							uint32_t *flags)
+{
+		
+		uint32_t frame_prev;
+		uint32_t page=_info.width*_info.height;
+		ADMImage *mysrc=NULL, *myprev=NULL;
+		
+		if(frame&gt;_info.nb_frames-1) return 0;
+
+
+		
+		frame_prev=frame;
+		if(frame_prev) frame_prev--;
+		
+		
+		
+			mysrc=vidCache-&gt;getImage(frame);
+			myprev=vidCache-&gt;getImage(frame_prev);
+			ADM_assert(mysrc);
+			ADM_assert(myprev);
+		// Now go to kernel deint code
+			
+    const uint8_t *srcp, *prvp,*prvp_saved, *prvpp, *prvpn, *prvppp, *prvpnn, *prvp4p, *prvp4n;
+	const uint8_t *srcp_saved;
+	const uint8_t *srcpp, *srcppp, *srcpn, *srcpnn, *srcp3p, *srcp3n, *srcp4p, *srcp4n;
+    uint8_t *dstp;
+	uint8_t *dstp_saved;
+ 
+	int plane;
+	int src_pitch;
+    int dst_pitch;
+    int w;
+    int h;
+	int x, y, z;
+	int val, hi, lo;
+	double valf;
+	unsigned int hint;
+	char buf[80];
+	
+	uint32_t pitch;
+	uint32_t offset;
+	
+	
+	uint32_t		order, threshold;
+	uint8_t			sharp, twoway, map;
+	
+	order=_param-&gt;order;
+	threshold=_param-&gt;threshold;
+	sharp=_param-&gt;sharp;
+	twoway=_param-&gt;twoway;
+	map=_param-&gt;map;
+	
+	
+	for (z = 0; z &lt; 3; z++)
+	{
+		
+		pitch=_info.width;
+		switch(z)
+		{
+			case 0:		offset=0;
+					srcp=srcp_saved= YPLANE(mysrc);
+					dstp = dstp_saved=YPLANE(data);
+					prvp_saved=prvp=YPLANE(myprev);
+					break;
+			case 1:		offset=page;
+					pitch&gt;&gt;=1;
+					srcp=srcp_saved=UPLANE(mysrc);
+					dstp = dstp_saved=UPLANE(data);
+					prvp_saved=prvp=UPLANE(myprev);
+					break;
+			case 2:		offset=((page*5)&gt;&gt;2);
+					pitch&gt;&gt;=1;
+					srcp=srcp_saved=VPLANE(mysrc);
+					dstp = dstp_saved=VPLANE(data);
+					prvp_saved=prvp=VPLANE(myprev);
+					break;
+		
+		}
+		
+		if (z==0 &amp;&amp; (GetHintingData((uint8_t *) srcp, &amp;hint) == false) &amp;&amp; (hint &amp; PROGRESSIVE))
+		{
+			if (debug ==true)
+			{
+				printf( &quot;KernelDeint: frame %d: progressive\n&quot;, frame); 
+				
+			}
+			memcpy(YPLANE(data),YPLANE(mysrc),page);
+			memcpy(UPLANE(data),UPLANE(mysrc),page&gt;&gt;2);
+			memcpy(VPLANE(data),VPLANE(mysrc),page&gt;&gt;2);
+			vidCache-&gt;unlockAll();
+			data-&gt;copyInfo(mysrc);
+			return 1;
+		}
+		else
+		{
+			if (debug == true)
+			{
+				printf( &quot;KernelDeint: frame %d: interkaced\n&quot;, frame); 
+			}
+		}
+		
+		src_pitch = pitch;	
+		dst_pitch = pitch;
+		
+		w = pitch; //dst-&gt;GetRowSize(plane);
+		h=_info.height;
+		if(z) h&gt;&gt;=1;  //h = dst-&gt;GetHeight(plane);
+		
+		srcp = srcp_saved  + (1-order) * src_pitch;
+		dstp = dstp_saved  + (1-order) * dst_pitch;
+		for (y = 0; y &lt; h; y+=2)
+		{
+			memcpy(dstp, srcp, w);
+			srcp += 2*src_pitch;
+			dstp += 2*dst_pitch;
+		}
+
+		// Copy through the lines that will be missed below.
+		memcpy(dstp_saved + order*dst_pitch, srcp_saved + (1-order)*src_pitch, w);
+		memcpy(dstp_saved + (2+order)*dst_pitch, srcp_saved + (3-order)*src_pitch, w);
+		memcpy(dstp_saved + (h-2+order)*dst_pitch, srcp_saved + (h-1-order)*src_pitch, w);
+		memcpy(dstp_saved + (h-4+order)*dst_pitch, srcp_saved + (h-3-order)*src_pitch, w);
+		/* For the other field choose adaptively between using the previous field
+		   or the interpolant from the current field. */
+		//prvp = prv-&gt;GetReadPtr(plane) + 5*src_pitch - (1-order)*src_pitch;
+		prvp = prvp_saved + 5*src_pitch - (1-order)*src_pitch;
+		
+		
+		prvpp = prvp - src_pitch;
+		prvppp = prvp - 2*src_pitch;
+		prvp4p = prvp - 4*src_pitch;
+		prvpn = prvp + src_pitch;
+		prvpnn = prvp + 2*src_pitch;
+		prvp4n = prvp + 4*src_pitch;
+		srcp = srcp_saved + 5*src_pitch - (1-order)*src_pitch;
+		srcpp = srcp - src_pitch;
+		srcppp = srcp - 2*src_pitch;
+		srcp3p = srcp - 3*src_pitch;
+		srcp4p = srcp - 4*src_pitch;
+		srcpn = srcp + src_pitch;
+		srcpnn = srcp + 2*src_pitch;
+		srcp3n = srcp + 3*src_pitch;
+		srcp4n = srcp + 4*src_pitch;
+		dstp =  dstp_saved  + 5*dst_pitch - (1-order)*dst_pitch;
+		for (y = 5 - (1-order); y &lt;= h - 5 - (1-order); y+=2)
+		{
+			for (x = 0; x &lt; w; x++)
+			{
+				if ((threshold == 0) || (frame == 0) ||
+					(abs((int)prvp[x] - (int)srcp[x]) &gt; threshold) ||
+					(abs((int)prvpp[x] - (int)srcpp[x]) &gt; threshold) ||
+					(abs((int)prvpn[x] - (int)srcpn[x]) &gt; threshold))
+				{
+					if (map == true)
+					{
+						int g = x &amp; ~3;
+						
+						{
+							if (z == 0) dstp[x] = 235;
+							else dstp[x] = 128;
+						}
+					}
+					else
+					{
+						
+						{
+							hi = (z == 0) ? 235 : 240;
+							lo = 16;
+						}
+						
+						if (sharp == true)
+						{
+							if (twoway == true)
+								valf = + 0.526*((int)srcpp[x] +
+								 (int)srcpn[x])
+								   + 0.170*((int)srcp[x] + (int)prvp[x])
+								   - 0.116*((int)srcppp[x] +
+								    (int)srcpnn[x] + (int)prvppp[x] +
+								    (int)prvpnn[x])
+					 			   - 0.026*((int)srcp3p[x] +
+								    (int)srcp3n[x])
+								   + 0.031*((int)srcp4p[x] +
+								    (int)srcp4n[x] + (int)prvp4p[x] +
+								    (int)prvp4n[x]);
+							else
+								valf = + 0.526*((int)srcpp[x] +
+								 (int)srcpn[x])
+								   + 0.170*((int)prvp[x])
+								   - 0.116*((int)prvppp[x] +
+								    (int)prvpnn[x])
+					 			   - 0.026*((int)srcp3p[x] +
+								    (int)srcp3n[x])
+								   + 0.031*((int)prvp4p[x] +
+								    (int)prvp4p[x]);
+							if (valf &gt; hi) valf = hi;
+							else if (valf &lt; lo) valf = lo;
+							dstp[x] = (int) valf;
+						}
+						else
+						{
+							if (twoway == true)
+								val = (8*((int)srcpp[x] + (int)srcpn[x]) +
+								 2*((int)srcp[x] + (int)prvp[x]) -
+								 			 
+									(int)(srcppp[x]) -
+									 (int)(srcpnn[x]) -
+									(int)(prvppp[x]) -
+									 (int)(prvpnn[x])) &gt;&gt; 4;
+							else
+								val = (8*((int)srcpp[x] + (int)srcpn[x]) +
+								 2*((int)prvp[x]) -
+									(int)(prvppp[x]) -
+									 (int)(prvpnn[x])) &gt;&gt; 4;
+							if (val &gt; hi) val = hi;
+							else if (val &lt; lo) val = lo;
+							dstp[x] = (int) val;
+						}
+					}
+				}
+				else
+				{
+					dstp[x] = srcp[x];
+				}
+			}
+			prvp  += 2*src_pitch;
+			prvpp  += 2*src_pitch;
+			prvppp  += 2*src_pitch;
+			prvpn  += 2*src_pitch;
+			prvpnn  += 2*src_pitch;
+			prvp4p  += 2*src_pitch;
+			prvp4n  += 2*src_pitch;
+			srcp  += 2*src_pitch;
+			srcpp += 2*src_pitch;
+			srcppp += 2*src_pitch;
+			srcp3p += 2*src_pitch;
+			srcp4p += 2*src_pitch;
+			srcpn += 2*src_pitch;
+			srcpnn += 2*src_pitch;
+			srcp3n += 2*src_pitch;
+			srcp4n += 2*src_pitch;
+			dstp  += 2*dst_pitch;
+		}
+	}
+	data-&gt;copyInfo(mysrc);
+	vidCache-&gt;unlockAll();
+	return 1;
+}
+
+
+
+#define MAGIC_NUMBER (0xdeadbeef)
+
+int PutHintingData(uint8_t *video, unsigned int hint)
+{
+	uint8_t *p;
+	unsigned int i, magic_number = MAGIC_NUMBER;
+	int error = false;
+
+	p = video;
+	for (i = 0; i &lt; 32; i++)
+	{
+		*p &amp;= ~1; 
+		*p++ |= ((magic_number &amp; (1 &lt;&lt; i)) &gt;&gt; i);
+	}
+	for (i = 0; i &lt; 32; i++)
+	{
+		*p &amp;= ~1;
+		*p++ |= ((hint &amp; (1 &lt;&lt; i)) &gt;&gt; i);
+	}
+	return error;
+}
+
+int GetHintingData(uint8_t *video, unsigned int *hint)
+{
+	uint8_t *p;
+	unsigned int i, magic_number = 0;
+	int error = false;
+
+	p = video;
+	for (i = 0; i &lt; 32; i++)
+	{
+		magic_number |= ((*p++ &amp; 1) &lt;&lt; i);
+	}
+	if (magic_number != MAGIC_NUMBER)
+	{
+		error = true;
+	}
+	else
+	{
+		*hint = 0;
+		for (i = 0; i &lt; 32; i++)
+		{
+			*hint |= ((*p++ &amp; 1) &lt;&lt; i);
+		}
+	}
+	return error;
+}

Copied: branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidKernelDeint.h (from rev 2489, branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidKernelDeint.h)

Copied: branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidMPLD3D.cpp (from rev 2489, branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidMPLD3D.cpp)
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidMPLD3D.cpp	2006-10-31 15:59:58 UTC (rev 2489)
+++ branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidMPLD3D.cpp	2007-01-11 19:18:08 UTC (rev 2704)
@@ -0,0 +1,364 @@
+/***************************************************************************
+                          ADM_vidMPLD3D.cpp  -  description
+                             -------------------
+Mplayer HQDenoise3d port to avidemux2
+Original Authors
+Copyright (C) 2003
+Daniel Moreno &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">comac at comac.darktech.org</A>&gt;
+	&amp; A'rpi
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include &lt;stdio.h&gt;
+#include &lt;stdlib.h&gt;
+#include &lt;string.h&gt;
+#include &lt;ADM_assert.h&gt;
+#include &lt;math.h&gt;
+
+#include &quot;config.h&quot;
+#include &quot;fourcc.h&quot;
+#include &quot;avio.hxx&quot;
+#include &quot;config.h&quot;
+#include &quot;avi_vars.h&quot;
+
+#include &quot;ADM_toolkit/toolkit.hxx&quot;
+#include &quot;ADM_editor/ADM_edit.hxx&quot;
+#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_video/ADM_vidMPLD3D.h&quot;
+
+#include &quot;ADM_osSupport/ADM_debugID.h&quot;
+#define MODULE_NAME MODULE_FILTER
+#include &quot;ADM_osSupport/ADM_debug.h&quot;
+#include &quot;ADM_filter/video_filters.h&quot;
+
+#include &quot;ADM_userInterfaces/ADM_commonUI/DIA_factory.h&quot;
+static FILTER_PARAM mp3Param={3,{&quot;param1&quot;,&quot;param2&quot;,&quot;param3&quot;}};
+
+
+SCRIPT_CREATE(MPD3D_script,ADMVideoMPD3D,mp3Param);
+
+BUILD_CREATE(MPD3D_create,ADMVideoMPD3D);
+
+#define PARAM1_DEFAULT 4.0
+#define PARAM2_DEFAULT 3.0
+#define PARAM3_DEFAULT 6.0
+uint8_t DIA_d3d(double *luma,double *chroma,double *temporal);
+ char 	*ADMVideoMPD3D::printConf(void)
+ {
+	  	static char buf[50];
+
+ 				sprintf((char *)buf,&quot; MPlayer HQ Denoise 3D (%2.1f - %2.1f - %2.1f)'&quot;,
+						_param-&gt;param1,_param-&gt;param2,_param-&gt;param3);
+        return buf;
+}
+
+uint8_t ADMVideoMPD3D::configure(AVDMGenericVideoStream *instream)
+{
+
+        _in=instream;
+        ELEM_TYPE_FLOAT fluma,fchroma,ftemporal;
+#define PX(x) &amp;x
+#define OOP(x,y) f##x=(ELEM_TYPE_FLOAT )_param-&gt;y;
+        
+        OOP(luma,param1);
+        OOP(chroma,param2);
+        OOP(temporal,param3);
+        
+    diaElemFloat   luma(PX(fluma),_(&quot;Luma Spatial Threshold&quot;),0.,100.);
+    diaElemFloat   chroma(PX(fchroma),_(&quot;Chroma Spatial Threshold&quot;),0.,100.);
+    diaElemFloat   temporal(PX(ftemporal),_(&quot;Temporal Threshold&quot;),0.,100.);
+    
+       diaElem *elems[3]={&amp;luma,&amp;chroma,&amp;temporal};
+  
+   if(  diaFactoryRun(&quot;MPlayer D3D&quot;,3,elems))
+        {
+#undef OOP
+#define OOP(x,y) _param-&gt;y=(double) f##x
+                OOP(luma,param1);
+                OOP(chroma,param2);
+                OOP(temporal,param3);
+          
+                setup();
+                return 1;
+        }
+        return 0;}
+ADMVideoMPD3D::~ADMVideoMPD3D()
+{
+
+ 	DELETE(_param);
+	if(_uncompressed)
+		delete [] _uncompressed;
+	if(Line)
+		delete [] Line;
+	if(_storage)
+		delete  _storage;
+
+	_storage=NULL;
+	Line=NULL;
+	_uncompressed=NULL;
+}
+
+static inline unsigned int LowPassMul(unsigned int PrevMul, unsigned int CurrMul, int* Coef){
+//    int dMul= (PrevMul&amp;0xFFFFFF)-(CurrMul&amp;0xFFFFFF);
+    int dMul= PrevMul-CurrMul;
+    int d=((dMul+0x10007FF)/(65536/16));
+    return CurrMul + Coef[d];
+}
+
+void ADMVideoMPD3D::deNoise(unsigned char *Frame,        // mpi-&gt;planes[x]
+                    unsigned char *FrameDest,    // dmpi-&gt;planes[x]
+                   uint32_t 		 *LineAnt,      // vf-&gt;priv-&gt;Line (width bytes)
+		    unsigned short 	*FrameAntPtr,
+                    int W, int H, int sStride, int dStride,
+                    int *Horizontal, int *Vertical, int *Temporal)
+{
+    int X, Y;
+    int sLineOffs = 0, dLineOffs = 0;
+    unsigned int PixelAnt;
+    int PixelDst;
+    unsigned short* FrameAnt=(FrameAntPtr);
+    
+
+    /* First pixel has no left nor top neightbour. Only previous frame */
+    LineAnt[0] = PixelAnt = Frame[0]&lt;&lt;16;
+    PixelDst = LowPassMul(FrameAnt[0]&lt;&lt;8, PixelAnt, Temporal);
+    FrameAnt[0] = ((PixelDst+0x1000007F)/256);
+    FrameDest[0]= ((PixelDst+0x10007FFF)/65536);
+
+    /* Fist line has no top neightbour. Only left one for each pixel and
+     * last frame */
+    for (X = 1; X &lt; W; X++){
+        LineAnt[X] = PixelAnt = LowPassMul(PixelAnt, Frame[X]&lt;&lt;16, Horizontal);
+        PixelDst = LowPassMul(FrameAnt[X]&lt;&lt;8, PixelAnt, Temporal);
+	FrameAnt[X] = ((PixelDst+0x1000007F)/256);
+	FrameDest[X]= ((PixelDst+0x10007FFF)/65536);
+    }
+
+    for (Y = 1; Y &lt; H; Y++){
+	unsigned int PixelAnt;
+	unsigned short* LinePrev=&amp;FrameAnt[Y*W];
+	sLineOffs += sStride, dLineOffs += dStride;
+        /* First pixel on each line doesn't have previous pixel */
+        PixelAnt = Frame[sLineOffs]&lt;&lt;16;
+        LineAnt[0] = LowPassMul(LineAnt[0], PixelAnt, Vertical);
+	PixelDst = LowPassMul(LinePrev[0]&lt;&lt;8, LineAnt[0], Temporal);
+	LinePrev[0] = ((PixelDst+0x1000007F)/256);
+	FrameDest[dLineOffs]= ((PixelDst+0x10007FFF)/65536);
+
+        for (X = 1; X &lt; W; X++){
+	    int PixelDst;
+            /* The rest are normal */
+            PixelAnt = LowPassMul(PixelAnt, Frame[sLineOffs+X]&lt;&lt;16, Horizontal);
+            LineAnt[X] = LowPassMul(LineAnt[X], PixelAnt, Vertical);
+	    PixelDst = LowPassMul(LinePrev[X]&lt;&lt;8, LineAnt[X], Temporal);
+	    LinePrev[X] = ((PixelDst+0x1000007F)/256);
+	    FrameDest[dLineOffs+X]= ((PixelDst+0x10007FFF)/65536);
+        }
+    }
+}
+
+
+uint8_t  ADMVideoMPD3D::setup(void)
+{
+ double LumSpac, LumTmp, ChromSpac, ChromTmp;
+
+        LumSpac = _param-&gt;param1;
+        LumTmp = _param-&gt;param3;
+
+        ChromSpac = _param-&gt;param2;
+        ChromTmp = LumTmp * ChromSpac / LumSpac;
+
+        PrecalcCoefs((int *)Coefs[0], LumSpac);
+        PrecalcCoefs((int *)Coefs[1], LumTmp);
+        PrecalcCoefs((int *)Coefs[2], ChromSpac);
+        PrecalcCoefs((int *)Coefs[3], ChromTmp);
+
+	aprintf(&quot;\n Param : %lf %lf %lf \n&quot;,
+		_param-&gt;param1,
+		_param-&gt;param2,
+		_param-&gt;param3);
+
+	return 1;
+}
+//--------------------------------------------------------
+ADMVideoMPD3D::ADMVideoMPD3D(AVDMGenericVideoStream *in,CONFcouple *couples)
+
+{
+  //uint32_t frame;
+  _storage=NULL;
+  _uncompressed=NULL;
+  Line=NULL;
+
+  _in=in;
+
+  Line=new uint32_t[in-&gt;getInfo()-&gt;width];
+  memcpy(&amp;_info,in-&gt;getInfo(),sizeof(_info));
+  _info.encoding=1;
+  if(couples)
+  {
+			_param=NEW(MPD3D_PARAM);
+			GET(param1);
+			GET(param2);
+			GET(param3);
+	}
+	else
+	{
+			_param=NEW( MPD3D_PARAM);
+			_param-&gt;param1=PARAM1_DEFAULT;
+			_param-&gt;param2=PARAM2_DEFAULT;
+			_param-&gt;param3=PARAM3_DEFAULT;
+	}
+	_uncompressed=new uint16_t[(_info.width*_info.height*3)&gt;&gt;1];
+	_storage=new ADMImage(_info.width,_info.height);
+	setup();
+
+	_last=0xFFFFFFF;
+}
+
+
+uint8_t	ADMVideoMPD3D::getCoupledConf( CONFcouple **couples)
+{
+
+			ADM_assert(_param);
+			*couples=new CONFcouple(3);
+ 			//(*couples)-&gt;setCouple((char *)&quot;param&quot;,*_param);
+#define CSET(x)  (*couples)-&gt;setCouple((char *)#x,(_param-&gt;x))
+			CSET(param1);
+			CSET(param2);
+			CSET(param3);
+			return 1;
+
+}
+//                     1
+//		Get in range in 121 + coeff matrix
+//                     1
+//
+// If the value is too far away we ignore it
+// else we blend
+
+uint8_t ADMVideoMPD3D::getFrameNumberNoAlloc(uint32_t frame,
+				uint32_t *len,
+   				ADMImage *data,
+				uint32_t *flags)
+{
+UNUSED_ARG(flags);
+
+	int cw= _info.width&gt;&gt;1;
+	int ch= _info.height&gt;&gt;1;
+        int W = _info.width;
+	int H  = _info.height;
+	uint32_t dlen,dflags;
+
+  		if(frame&gt; _info.nb_frames-1) return 0;
+		*len=(W*H*3)&gt;&gt;1;
+		// First and last frame we don&quot;t modify.
+		if(!frame || (frame!=_last+1))
+			{
+					 if(!_in-&gt;getFrameNumberNoAlloc(frame, &amp;dlen,data,&amp;dflags))
+					 {
+					 	return 0;
+					}
+				 	unsigned short* dst=_uncompressed;
+	    				unsigned char* src=YPLANE(data);
+					for (int Y = 0; Y &lt; W*H; Y++)
+						{
+	    						 	*(dst++)=*(src++)&lt;&lt;8;
+						}
+					src=UPLANE(data);
+					dst=_uncompressed+(W*H);
+					for (int Y = 0; Y &lt; (W*H)&gt;&gt;2; Y++)
+						{
+	    						 	*(dst++)=*(src++)&lt;&lt;8;
+						}
+					src=VPLANE(data);
+					dst=_uncompressed+((5*W*H)&gt;&gt;2);
+					for (int Y = 0; Y &lt; (W*H)&gt;&gt;2; Y++)
+						{
+	    						 	*(dst++)=*(src++)&lt;&lt;8;
+						}
+					
+					_last=frame;
+					return 1;
+
+			}
+		ADM_assert(frame&lt;_info.nb_frames);
+		// read uncompressed frame
+		// else we fill previous/current/next
+		if(!_in-&gt;getFrameNumberNoAlloc(frame, &amp;dlen,_storage,&amp;dflags))
+		{
+			return 0;
+		}
+
+		uint8_t *c,*n;
+		unsigned short *ant;
+
+		ant=(_uncompressed);
+		n=YPLANE(data);
+		c=YPLANE(_storage);
+//
+   		deNoise(c, n,
+			Line,ant, W, H,
+                	W,W,
+                	(int *)Coefs[0],
+                	(int *)Coefs[0],
+                	(int *)Coefs[1]);
+
+
+		ant=(_uncompressed)+W*H;
+		n=UPLANE(data);
+		c=UPLANE(_storage);
+
+		deNoise(c, n,
+			Line, ant, cw, ch,
+                	cw,cw,
+                	(int *)Coefs[2],
+                	(int *)Coefs[2],
+                	(int *)Coefs[3]);
+
+
+		ant=_uncompressed+((W*H*5)&gt;&gt;2);
+		n=VPLANE(data);
+		c=VPLANE(_storage);
+
+		deNoise(c, n,
+			Line, ant, cw, ch,
+                	cw,cw,
+                	(int *)Coefs[2],
+                	(int *)Coefs[2],
+                	(int *)Coefs[3]);
+
+	// n is out....
+	_last=frame;
+	data-&gt;copyInfo(_storage);
+	return 1;
+
+
+}
+
+#define ABS(A) ( (A) &gt; 0 ? (A) : -(A) )
+
+void ADMVideoMPD3D::PrecalcCoefs(int *Ct, double Dist25)
+{
+    int i;
+    double Gamma, Simil, C;
+
+    Gamma = log(0.25) / log(1.0 - Dist25/255.0 - 0.00001);
+
+    for (i = -256*16; i &lt; 256*16; i++)
+    {
+        Simil = 1.0 - ABS(i) / (16*255.0);
+	C=4096.*(double)i;
+        C *= pow(Simil, Gamma) ;
+       Ct[16*256+i] = (int)((C&lt;0) ? (C-0.5) : (C+0.5));
+    }
+
+}
+
+

Copied: branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidMPLD3D.h (from rev 2489, branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidMPLD3D.h)
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidMPLD3D.h	2006-10-31 15:59:58 UTC (rev 2489)
+++ branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidMPLD3D.h	2007-01-11 19:18:08 UTC (rev 2704)
@@ -0,0 +1,69 @@
+/***************************************************************************
+                          ADM_vidMPLD3D.h  -  description
+                             -------------------
+Mplayer HQDenoise3d port to avidemux2
+Original Authors
+Copyright (C) 2003
+Daniel Moreno &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">comac at comac.darktech.org</A>&gt;
+	&amp; A'rpi
+
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+ 
+#ifndef _D3D__
+#define _D3D__   
+#include &quot;ADM_video/ADM_vidCached.h&quot;
+typedef struct MPD3D_PARAM
+{
+	double  param1;  // Luma 
+	double  param2;  // Chroma
+	double  param3;  // Temporal
+}MPD3D_PARAM;
+
+class  ADMVideoMPD3D:public AVDMGenericVideoStream
+ {
+
+ protected:
+
+        			MPD3D_PARAM			*_param;
+
+				int	  					Coefs[4][512*16];
+        			uint32_t					*Line;
+
+				uint16_t				*_uncompressed;
+				ADMImage				*_storage;
+				uint32_t				_last;
+
+				void 	PrecalcCoefs(int *Ct, double Dist25);
+				uint8_t  	setup(void);
+				void 	deNoise(unsigned char *Frame,        // mpi-&gt;planes[x]
+                    					unsigned char *FrameDest,    // dmpi-&gt;planes[x]
+                    					uint32_t *LineAnt,      // vf-&gt;priv-&gt;Line (width bytes)
+		    					unsigned short *FrameAntPtr,
+                    					int W, int H, int sStride, int dStride,
+                    					int *Horizontal, int *Vertical, int *Temporal);
+
+
+
+ public:
+
+
+						ADMVideoMPD3D(  AVDMGenericVideoStream *in,CONFcouple *setup);
+  						 ~ADMVideoMPD3D();
+		        virtual uint8_t 	getFrameNumberNoAlloc(uint32_t frame, uint32_t *len,
+   								ADMImage *data,uint32_t *flags);
+
+			virtual uint8_t 	configure( AVDMGenericVideoStream *instream);
+     			virtual char 	*printConf(void);
+			virtual uint8_t 	getCoupledConf( CONFcouple **couples);
+							
+ }     ;
+#endif

Copied: branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidMPLD3Dlow.cpp (from rev 2489, branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidMPLD3Dlow.cpp)
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidMPLD3Dlow.cpp	2006-10-31 15:59:58 UTC (rev 2489)
+++ branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidMPLD3Dlow.cpp	2007-01-11 19:18:08 UTC (rev 2704)
@@ -0,0 +1,347 @@
+/***************************************************************************
+                          ADM_vidMPLD3D.cpp  -  description
+                             -------------------
+Mplayer HQDenoise3d port to avidemux2
+Original Authors
+Copyright (C) 2003
+Daniel Moreno &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">comac at comac.darktech.org</A>&gt;
+	&amp; A'rpi
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include &lt;stdio.h&gt;
+#include &lt;stdlib.h&gt;
+#include &lt;string.h&gt;
+#include &lt;ADM_assert.h&gt;
+#include &lt;math.h&gt;
+
+#include &quot;config.h&quot;
+#include &quot;fourcc.h&quot;
+#include &quot;avio.hxx&quot;
+#include &quot;config.h&quot;
+#include &quot;avi_vars.h&quot;
+
+#include &quot;ADM_toolkit/toolkit.hxx&quot;
+#include &quot;ADM_editor/ADM_edit.hxx&quot;
+#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_vidMPLD3Dlow.h&quot;
+
+#include &quot;ADM_osSupport/ADM_debugID.h&quot;
+#define MODULE_NAME MODULE_FILTER
+#include &quot;ADM_osSupport/ADM_debug.h&quot;
+#include &quot;ADM_filter/video_filters.h&quot;
+
+#include &quot;ADM_userInterfaces/ADM_commonUI/DIA_factory.h&quot;
+
+static FILTER_PARAM mp3Param={3,{&quot;param1&quot;,&quot;param2&quot;,&quot;param3&quot;}};
+
+
+SCRIPT_CREATE(MPD3Dlow_script,ADMVideoMPD3Dlow,mp3Param);
+BUILD_CREATE(MPD3Dlow_create,ADMVideoMPD3Dlow);
+
+#define PARAM1_DEFAULT 4.0
+#define PARAM2_DEFAULT 3.0
+#define PARAM3_DEFAULT 6.0
+
+ char 	*ADMVideoMPD3Dlow::printConf(void)
+ {
+	  	static char buf[50];
+
+ 				sprintf((char *)buf,&quot; MPlayer Denoise 3D (%2.1f - %2.1f - %2.1f)'&quot;,
+						_param-&gt;param1,_param-&gt;param2,_param-&gt;param3);
+        return buf;
+}
+
+uint8_t ADMVideoMPD3Dlow::configure(AVDMGenericVideoStream *instream)
+{
+
+        _in=instream;
+        ELEM_TYPE_FLOAT fluma,fchroma,ftemporal;
+#define PX(x) &amp;x
+#define OOP(x,y) f##x=(ELEM_TYPE_FLOAT )_param-&gt;y;
+        
+        OOP(luma,param1);
+        OOP(chroma,param2);
+        OOP(temporal,param3);
+        
+    diaElemFloat   luma(PX(fluma),_(&quot;Luma Spatial Threshold&quot;),0.,100.);
+    diaElemFloat   chroma(PX(fchroma),_(&quot;Chroma Spatial Threshold&quot;),0.,100.);
+    diaElemFloat   temporal(PX(ftemporal),_(&quot;Temporal Threshold&quot;),0.,100.);
+    
+       diaElem *elems[3]={&amp;luma,&amp;chroma,&amp;temporal};
+  
+   if(  diaFactoryRun(&quot;MPlayer D3D&quot;,3,elems))
+        {
+#undef OOP
+#define OOP(x,y) _param-&gt;y=(double) f##x
+                OOP(luma,param1);
+                OOP(chroma,param2);
+                OOP(temporal,param3);
+          
+                setup();
+                return 1;
+        }
+        return 0;
+}
+ADMVideoMPD3Dlow::~ADMVideoMPD3Dlow()
+{
+
+ 	DELETE(_param);
+	delete  _uncompressed;
+	delete  _stored;
+	delete [] Line;
+	Line=NULL;
+	_param=NULL;
+	_uncompressed=NULL;
+	_stored=NULL;
+}
+
+
+#define LowPass(Prev, Curr, Coef) (Curr + Coef[Prev - Curr])
+
+
+void ADMVideoMPD3Dlow::deNoise(unsigned char *Frame,        // mpi-&gt;planes[x]
+                    unsigned char *FramePrev,    // pmpi-&gt;planes[x]
+                    unsigned char *FrameDest,    // dmpi-&gt;planes[x]
+                    unsigned char *LineAnt,      // vf-&gt;priv-&gt;Line (width bytes)
+                    int W, int H, int sStride, int pStride, int dStride,
+                    int *Horizontal, int *Vertical, int *Temporal)
+{
+    int X, Y;
+    int sLineOffs = 0, pLineOffs = 0, dLineOffs = 0;
+    unsigned char PixelAnt;
+
+    /* First pixel has no left nor top neightbour. Only previous frame */
+    LineAnt[0] = PixelAnt = Frame[0];
+    FrameDest[0] = LowPass(FramePrev[0], LineAnt[0], Temporal);
+
+    /* Fist line has no top neightbour. Only left one for each pixel and
+     * last frame */
+    for (X = 1; X &lt; W; X++)
+    {
+        PixelAnt = LowPass(PixelAnt, Frame[X], Horizontal);
+        LineAnt[X] = PixelAnt;
+        FrameDest[X] = LowPass(FramePrev[X], LineAnt[X], Temporal);
+    }
+
+    for (Y = 1; Y &lt; H; Y++)
+    {
+	sLineOffs += sStride, pLineOffs += pStride, dLineOffs += dStride;
+        /* First pixel on each line doesn't have previous pixel */
+        PixelAnt = Frame[sLineOffs];
+        LineAnt[0] = LowPass(LineAnt[0], PixelAnt, Vertical);
+        FrameDest[dLineOffs] = LowPass(FramePrev[pLineOffs], LineAnt[0], Temporal);
+
+        for (X = 1; X &lt; W; X++)
+        {
+            /* The rest are normal */
+            PixelAnt = LowPass(PixelAnt, Frame[sLineOffs+X], Horizontal);
+            LineAnt[X] = LowPass(LineAnt[X], PixelAnt, Vertical);
+            FrameDest[dLineOffs+X] = LowPass(FramePrev[pLineOffs+X], LineAnt[X], Temporal);
+        }
+    }
+}
+
+
+
+uint8_t  ADMVideoMPD3Dlow::setup(void)
+{
+ double LumSpac, LumTmp, ChromSpac, ChromTmp;
+
+        LumSpac = _param-&gt;param1;
+        LumTmp = _param-&gt;param3;
+
+        ChromSpac = _param-&gt;param2;
+        ChromTmp = LumTmp * ChromSpac / LumSpac;
+
+        PrecalcCoefs((int *)Coefs[0], LumSpac);
+        PrecalcCoefs((int *)Coefs[1], LumTmp);
+        PrecalcCoefs((int *)Coefs[2], ChromSpac);
+        PrecalcCoefs((int *)Coefs[3], ChromTmp);
+
+	aprintf(&quot;\n Param : %lf %lf %lf \n&quot;,
+		_param-&gt;param1,
+		_param-&gt;param2,
+		_param-&gt;param3);
+
+	_last=0xFFFFFFF;
+
+	return 1;
+}
+//--------------------------------------------------------
+ADMVideoMPD3Dlow::ADMVideoMPD3Dlow(
+									AVDMGenericVideoStream *in,CONFcouple *couples)
+
+{
+uint32_t page;
+
+  Line=new uint8_t [in-&gt;getInfo()-&gt;width];
+  memcpy(&amp;_info,in-&gt;getInfo(),sizeof(_info));
+
+	page=_info.width*_info.height;
+
+ // _stored=new uint8_t[(page*3)&gt;&gt;1];
+ // _uncompressed=new uint8_t[ (page*3)&gt;&gt;1];
+ 	_stored=new ADMImage(_info.width,_info.height);
+	_uncompressed=new ADMImage(_info.width,_info.height);
+
+  _info.encoding=1;
+  _in=in;
+  if(couples)
+  {
+			_param=NEW(MPD3D_PARAM);
+			GET(param1);
+			GET(param2);
+			GET(param3);
+	}
+	else
+	{
+			_param=NEW( MPD3D_PARAM);
+			_param-&gt;param1=PARAM1_DEFAULT;
+			_param-&gt;param2=PARAM2_DEFAULT;
+			_param-&gt;param3=PARAM3_DEFAULT;
+	}
+	setup();
+
+}
+
+
+uint8_t	ADMVideoMPD3Dlow::getCoupledConf( CONFcouple **couples)
+{
+
+			ADM_assert(_param);
+			*couples=new CONFcouple(3);
+ 			//(*couples)-&gt;setCouple((char *)&quot;param&quot;,*_param);
+#define CSET(x)  (*couples)-&gt;setCouple((char *)#x,(_param-&gt;x))
+			CSET(param1);
+			CSET(param2);
+			CSET(param3);
+			return 1;
+
+}
+//                     1
+//		Get in range in 121 + coeff matrix
+//                     1
+//
+// If the value is too far away we ignore it
+// else we blend
+
+uint8_t ADMVideoMPD3Dlow::getFrameNumberNoAlloc(uint32_t frame,
+				uint32_t *len,
+   				ADMImage *data,
+				uint32_t *flags)
+{
+UNUSED_ARG(flags);
+
+	int cw= _info.width&gt;&gt;1;
+	int ch= _info.height&gt;&gt;1;
+        int W = _info.width;
+	int H  = _info.height;
+	uint32_t dlen,dflags;
+
+  		if(frame&gt; _info.nb_frames-1) return 0;
+		*len=(W*H*3)&gt;&gt;1;
+		// First and last frame we don&quot;t modify.
+		if(!frame || (frame!=_last+1))
+			{
+				aprintf(&quot;D3D: First /last frame\n&quot;);
+				 if(!_in-&gt;getFrameNumberNoAlloc(frame, &amp;dlen,data,&amp;dflags))
+				 {
+					 	return 0;
+				 }
+				// store for future use
+				memcpy(_stored-&gt;data,data-&gt;data,*len);
+				_last=frame;
+				
+				return 1;
+			}
+			ADM_assert(frame&lt;_info.nb_frames);
+			aprintf(&quot;D3D: next frame\n&quot;);
+			// read uncompressed frame
+	 		if(!_in-&gt;getFrameNumberNoAlloc(frame, &amp;dlen,_uncompressed,&amp;dflags))
+				 {
+					 	return 0;
+				 }
+
+		uint8_t *c,*d,*p;
+
+		d=YPLANE(data);
+		c=YPLANE(_uncompressed);
+		p=YPLANE(_stored);
+//
+
+   	deNoise(c,p, d,
+		Line, W, H,
+                W,W,W,
+               	Coefs[0] + 256,
+                Coefs[0] + 256,
+                Coefs[1] + 256);
+
+	uint32_t page=W*H;
+		d=UPLANE(data);
+		c=UPLANE(_uncompressed);
+		p=UPLANE(_stored);
+
+	deNoise(c,p, d,
+		Line, cw, ch,
+                cw,cw,cw,
+               	Coefs[2] + 256,
+                Coefs[2] + 256,
+                Coefs[3] + 256);
+
+	page=page&gt;&gt;2;		
+		d=VPLANE(data);
+		c=VPLANE(_uncompressed);
+		p=VPLANE(_stored);
+
+	deNoise(c,p, d,
+		Line, cw, ch,
+                cw,cw,cw,
+               	Coefs[2] + 256,
+              	Coefs[2] + 256,
+                Coefs[3] + 256);
+
+
+	_last=frame;
+	memcpy(YPLANE(_stored),YPLANE(data),W*H);
+	memcpy(UPLANE(_stored),UPLANE(data),(W*H)&gt;&gt;2);
+	memcpy(VPLANE(_stored),VPLANE(data),(W*H)&gt;&gt;2);
+	data-&gt;copyInfo(_uncompressed);
+	return 1;
+
+
+}
+
+#define ABS(A) ( (A) &gt; 0 ? (A) : -(A) )
+
+void ADMVideoMPD3Dlow::PrecalcCoefs(int *Ct, double Dist25)
+{
+ int i;
+    double Gamma, Simil, C;
+    double d;
+    Gamma = log(0.25) / log(1.0 - Dist25/255.0);
+
+    for (i = -256; i &lt;= 255; i++)
+    {
+    	if(i&gt;0) d=(double)i/255.;
+		else d=(double)-i/255.;
+        Simil = 1.0 - d;
+//        Ct[256+i] = lround(pow(Simil, Gamma) * (double)i);
+ 	C= (double)i;
+        C *= pow(Simil, Gamma);
+
+  	Ct[256+i] = (int)((C&lt;0) ? (C-0.5) : (C+0.5));
+
+    }
+
+
+}
+
+

Copied: branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/ADM_vidMPLD3Dlow.h (from rev 2489, branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidMPLD3Dlow.h)

Modified: branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/Makefile.am
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/Makefile.am	2007-01-11 08:07:07 UTC (rev 2703)
+++ branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/Makefile.am	2007-01-11 19:18:08 UTC (rev 2704)
@@ -7,6 +7,10 @@
 #INCLUDES = $(all_includes) 
 
 libADM_videoFilter_a_SOURCES =  \
+ ADM_vidMPLD3D.cpp \
+ ADM_vidMPLD3Dlow.cpp \
+ ADM_lavpp_deint.cpp \
+ ADM_vidKernelDeint.cpp \
  ADM_vidMcDeint.cpp \
  ADM_vidFade.cpp \
  ADM_vidResampleFPS.cpp \


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000031.html">[Avidemux-svn-commit] r2703 - in	branches/avidemux_2.4_branch/avidemux: ADM_video ADM_videoFilter
</A></li>
	<LI>Next message: <A HREF="000033.html">[Avidemux-svn-commit] r2705 - in	branches/avidemux_2.4_branch/avidemux:	ADM_userInterfaces/ADM_GTK/ADM_dialog	ADM_userInterfaces/ADM_NONE/ADM_dialog	ADM_userInterfaces/ADM_QT4/ADM_dialog ADM_video ADM_videoFilter
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#32">[ date ]</a>
              <a href="thread.html#32">[ thread ]</a>
              <a href="subject.html#32">[ subject ]</a>
              <a href="author.html#32">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">More information about the Avidemux-svn-commit
mailing list</a><br>
</body></html>
