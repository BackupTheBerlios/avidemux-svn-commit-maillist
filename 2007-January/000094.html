<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Avidemux-svn-commit] r2768 - in	branches/avidemux_2.4_branch/avidemux: ADM_audiofilter	ADM_userInterfaces/ADM_GTK/ADM_dialog	ADM_userInterfaces/ADM_NONE/ADM_dialog	ADM_userInterfaces/ADM_QT4/ADM_dialog	ADM_userInterfaces/ADM_commonUI
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/avidemux-svn-commit/2007-January/index.html" >
   <LINK REL="made" HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r2768%20-%20in%0A%09branches/avidemux_2.4_branch/avidemux%3A%20ADM_audiofilter%0A%09ADM_userInterfaces/ADM_GTK/ADM_dialog%0A%09ADM_userInterfaces/ADM_NONE/ADM_dialog%0A%09ADM_userInterfaces/ADM_QT4/ADM_dialog%0A%09ADM_userInterfaces/ADM_commonUI&In-Reply-To=%3C200701231939.l0NJdoQq016924%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000093.html">
   <LINK REL="Next"  HREF="000095.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Avidemux-svn-commit] r2768 - in	branches/avidemux_2.4_branch/avidemux: ADM_audiofilter	ADM_userInterfaces/ADM_GTK/ADM_dialog	ADM_userInterfaces/ADM_NONE/ADM_dialog	ADM_userInterfaces/ADM_QT4/ADM_dialog	ADM_userInterfaces/ADM_commonUI</H1>
    <B>mean at BerliOS</B> 
    <A HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r2768%20-%20in%0A%09branches/avidemux_2.4_branch/avidemux%3A%20ADM_audiofilter%0A%09ADM_userInterfaces/ADM_GTK/ADM_dialog%0A%09ADM_userInterfaces/ADM_NONE/ADM_dialog%0A%09ADM_userInterfaces/ADM_QT4/ADM_dialog%0A%09ADM_userInterfaces/ADM_commonUI&In-Reply-To=%3C200701231939.l0NJdoQq016924%40sheep.berlios.de%3E"
       TITLE="[Avidemux-svn-commit] r2768 - in	branches/avidemux_2.4_branch/avidemux: ADM_audiofilter	ADM_userInterfaces/ADM_GTK/ADM_dialog	ADM_userInterfaces/ADM_NONE/ADM_dialog	ADM_userInterfaces/ADM_QT4/ADM_dialog	ADM_userInterfaces/ADM_commonUI">mean at mail.berlios.de
       </A><BR>
    <I>Tue Jan 23 20:39:50 CET 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000093.html">[Avidemux-svn-commit] r2767 - in	branches/avidemux_2.4_branch/avidemux: .	ADM_userInterfaces/ADM_GTK/ADM_dialog	ADM_userInterfaces/ADM_NONE/ADM_dialog	ADM_userInterfaces/ADM_QT4/ADM_dialog	ADM_userInterfaces/ADM_commonUI
</A></li>
        <LI>Next message: <A HREF="000095.html">[Avidemux-svn-commit] r2769 -	branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#94">[ date ]</a>
              <a href="thread.html#94">[ thread ]</a>
              <a href="subject.html#94">[ subject ]</a>
              <a href="author.html#94">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: mean
Date: 2007-01-23 20:39:49 +0100 (Tue, 23 Jan 2007)
New Revision: 2768

Removed:
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_defaultAudio.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_lame.cpp
Modified:
   branches/avidemux_2.4_branch/avidemux/ADM_audiofilter/audioencoder_config.h
   branches/avidemux_2.4_branch/avidemux/ADM_audiofilter/audioencoder_faac.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_audiofilter/audioencoder_lame.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/Makefile.am
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_none.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_none.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/Makefile.am
Log:
dialog for lame/default audio moved to dialogFactory

Modified: branches/avidemux_2.4_branch/avidemux/ADM_audiofilter/audioencoder_config.h
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_audiofilter/audioencoder_config.h	2007-01-22 19:41:03 UTC (rev 2767)
+++ branches/avidemux_2.4_branch/avidemux/ADM_audiofilter/audioencoder_config.h	2007-01-23 19:39:49 UTC (rev 2768)
@@ -7,8 +7,8 @@
 #include &quot;audioencoder_vorbis_param.h&quot;
 #include &quot;audioencoder_aften_param.h&quot;
 
-extern int DIA_getVorbisSettings(ADM_audioEncoderDescriptor *descriptor);
-extern int DIA_getLameSettings(ADM_audioEncoderDescriptor *descriptor);
+
+
 extern int DIA_defaultSettings(ADM_audioEncoderDescriptor *descriptor);
 /**** Copy ****/
 
@@ -23,6 +23,7 @@
   NULL
 };
 /**** FAAC ****/
+#ifdef USE_FAAC
 FAAC_encoderParam aacParam={128};
 ADM_audioEncoderDescriptor aacDescriptor=
 {
@@ -34,6 +35,7 @@
         sizeof(aacParam),
         &amp;aacParam
 };
+#endif
 /**** LAME ****/
 LAME_encoderParam lameParam=
 {
@@ -41,6 +43,8 @@
   ADM_STEREO,
   2
 };
+#ifdef HAVE_LIBMP3LAME
+extern int DIA_getLameSettings(ADM_audioEncoderDescriptor *descriptor);
 ADM_audioEncoderDescriptor  lameDescriptor=
 {
   AUDIOENC_MP3,
@@ -51,6 +55,7 @@
   sizeof(lameParam),
   &amp;lameParam
 };
+#endif
 /**** TWOLAME ****/
 TWOLAME_encoderParam twolameParam=
 {
@@ -89,6 +94,8 @@
 };
 
 /************** Vorbis **************/
+#ifdef USE_VORBIS
+extern int DIA_getVorbisSettings(ADM_audioEncoderDescriptor *descriptor);
 VORBIS_encoderParam vorbisParam=
 {
   ADM_VORBIS_VBR,
@@ -105,6 +112,7 @@
   sizeof(vorbisParam),
   &amp;vorbisParam
 };
+#endif
 /********** PCM **************/
 ADM_audioEncoderDescriptor  pcmDescriptor=
 {
@@ -147,17 +155,23 @@
 ADM_audioEncoderDescriptor *allDescriptors[]=
 {
       &amp;copyDescriptor,
+#ifdef USE_FAAC
       &amp;aacDescriptor,
+#endif
       &amp;twolameDescriptor,
       &amp;lavcodecAC3Descriptor,
       &amp;lavcodecMP2Descriptor,
+#ifdef USE_VORBIS
       &amp;vorbisDescriptor ,
+#endif      
       &amp;pcmDescriptor,
-      &amp;lpcmDescriptor,
+      &amp;lpcmDescriptor
 #ifdef USE_AFTEN
-      &amp;aftenDescriptor,
-#endif      
-      &amp;lameDescriptor
+      ,&amp;aftenDescriptor
+#endif
+#ifdef HAVE_LIBMP3LAME
+      ,&amp;lameDescriptor
+#endif
 };
 #define NB_AUDIO_DESCRIPTOR (sizeof(allDescriptors)/sizeof(ADM_audioEncoderDescriptor *))
 #endif

Modified: branches/avidemux_2.4_branch/avidemux/ADM_audiofilter/audioencoder_faac.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_audiofilter/audioencoder_faac.cpp	2007-01-22 19:41:03 UTC (rev 2767)
+++ branches/avidemux_2.4_branch/avidemux/ADM_audiofilter/audioencoder_faac.cpp	2007-01-23 19:39:49 UTC (rev 2768)
@@ -82,6 +82,7 @@
 faacEncConfigurationPtr cfg;
 int ret=0;
 
+    printf(&quot;[FAAC] Incoming Fq :%u\n&quot;,_wavheader-&gt;frequency);
      _handle = faacEncOpen(_wavheader-&gt;frequency,
                                  _wavheader-&gt;channels,
                                  &amp;samples_input,
@@ -220,6 +221,5 @@
         tmphead+=_chunk;
         return 1;
 }
-
 #endif		
 // EOF

Modified: branches/avidemux_2.4_branch/avidemux/ADM_audiofilter/audioencoder_lame.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_audiofilter/audioencoder_lame.cpp	2007-01-22 19:41:03 UTC (rev 2767)
+++ branches/avidemux_2.4_branch/avidemux/ADM_audiofilter/audioencoder_lame.cpp	2007-01-23 19:39:49 UTC (rev 2768)
@@ -189,6 +189,67 @@
         *len=nbout;
         return 1;
 }
+/**
+      \fn DIA_getLameSettings
+      \brief Dialog to set lame settings
+      @return 1 on success, 0 on failure
 
-
+*/
+#include &quot;ADM_userInterfaces/ADM_commonUI/DIA_factory.h&quot;
+int DIA_getLameSettings(ADM_audioEncoderDescriptor *descriptor)
+  {
+    int ret=0;
+    char string[400];
+    uint32_t mmode,ppreset;
+#define SZT(x) sizeof(x)/sizeof(diaMenuEntry )
+#define PX(x) &amp;(lameParam-&gt;x)
+    
+    
+    LAME_encoderParam *lameParam;
+    ADM_assert(sizeof(LAME_encoderParam)==descriptor-&gt;paramSize);
+  
+    lameParam=(LAME_encoderParam*)descriptor-&gt;param;
+    mmode=lameParam-&gt;mode;
+    ppreset=lameParam-&gt;preset;
+    diaMenuEntry channelMode[]={
+                             {ADM_STEREO,      _(&quot;Stereo&quot;),NULL},
+                             {ADM_JSTEREO,   _(&quot;Joint stereo&quot;),NULL},
+                             {ADM_MONO,      _(&quot;Mono&quot;),NULL}};
+          
+    diaElemMenu menuMode(&amp;mmode,   _(&quot;Channel Mode&quot;), SZT(channelMode),channelMode);
+    
+    diaMenuEntry encodingMode[]={
+                             {ADM_LAME_PRESET_CBR,      _(&quot;CBR&quot;),NULL},
+                             {ADM_LAME_PRESET_ABR,   _(&quot;ABR&quot;),NULL},
+                             {ADM_LAME_PRESET_EXTREME,      _(&quot;Extreme&quot;),NULL}}; 
+    diaElemMenu Mode(&amp;ppreset,   _(&quot;Mode&quot;), SZT(encodingMode),encodingMode);
+#define BITRATE(x) {x,_(#x)}
+    diaMenuEntry bitrateM[]={
+                              BITRATE(56),
+                              BITRATE(64),
+                              BITRATE(80),
+                              BITRATE(96),
+                              BITRATE(112),
+                              BITRATE(128),
+                              BITRATE(160),
+                              BITRATE(192),
+                              BITRATE(224)
+                          };
+    diaElemMenu bitrate(&amp;(descriptor-&gt;bitrate),   _(&quot;Bitrate&quot;), SZT(bitrateM),bitrateM);
+    
+    
+    
+    
+    diaElemUInteger quality(PX(quality),_(&quot;Quality&quot;),0,9);
+  
+      diaElem *elems[]={&amp;menuMode,&amp;Mode,&amp;quality,&amp;bitrate};
+    
+  if( diaFactoryRun(&quot;Lame Settings&quot;,4,elems))
+  {
+    lameParam-&gt;mode=(ADM_mode)mmode; 
+    lameParam-&gt;preset=(ADM_LAME_PRESET)ppreset;
+    return 1;
+  }
+  return 0;
+}  
 #endif

Deleted: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_defaultAudio.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_defaultAudio.cpp	2007-01-22 19:41:03 UTC (rev 2767)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_defaultAudio.cpp	2007-01-23 19:39:49 UTC (rev 2768)
@@ -1,144 +0,0 @@
-/*
- * DO NOT EDIT THIS FILE - it is generated by Glade.
- */
-# include &lt;config.h&gt;
-
-#include &lt;stdio.h&gt;
-#include &lt;stdlib.h&gt;
-
-#include &lt;sys/types.h&gt;
-#include &lt;sys/stat.h&gt;
-#include &lt;unistd.h&gt;
-#include &lt;string.h&gt;
-
-
-#include &lt;gdk/gdkkeysyms.h&gt;
-#include &lt;gtk/gtk.h&gt;
-#include &quot;ADM_assert.h&quot;
-#include &quot;default.h&quot;
-#include &quot;ADM_toolkit_gtk/ADM_gladeSupport.h&quot;
-#include &quot;ADM_toolkit_gtk/toolkit_gtk.h&quot;
-#include &quot;ADM_toolkit_gtk/toolkit_gtk_include.h&quot;
-
-#include &quot;ADM_assert.h&quot; 
-
-
-#include &quot;ADM_audiofilter/audioeng_buildfilters.h&quot;
-#include &quot;ADM_audiofilter/audioencoder.h&quot;
-#include &quot;ADM_audiofilter/audioencoder_lame_param.h&quot;
-
-
-#define NB_BITRATE 11
-static int BTR[] = {		// see interface.c if you change this !
-		48,
-		56,
-		64,
-		80,
-    		96,
-    		112,
-    		128,
-   		 160,
-    		192,
-   		 224,
-		 384
-};
-  
-
-
- static GtkWidget	*create_dialog1 (void);
- 
- int DIA_defaultSettings(ADM_audioEncoderDescriptor *descriptor)
-  {
-  GtkWidget *dialog;
-  
-  int ret=0;
-  char string[400];
-  GtkComboBox *combo_box;
-
-    dialog=create_dialog1();
-    gtk_window_set_title (GTK_WINDOW (dialog), descriptor-&gt;name);
-    gtk_register_dialog(dialog);
-
-        // ******** Set mode****************
-        // *******  set bitrate ************
-        combo_box=GTK_COMBO_BOX(WID(comboboxBitrate));
-        gtk_combo_box_remove_text(combo_box,0);
-        
-        for(unsigned int i=0;i&lt;NB_BITRATE;i++)
-        {
-            sprintf(string,&quot;%d kbits&quot;,BTR[i]);
-            gtk_combo_box_append_text(combo_box,string);
-            if(descriptor-&gt;bitrate==BTR[i])
-              gtk_combo_box_set_active(combo_box,i);
-        }
-        if(GTK_RESPONSE_OK==gtk_dialog_run(GTK_DIALOG(dialog)))
-        {
-          combo_box=GTK_COMBO_BOX(WID(comboboxBitrate));
-          descriptor-&gt;bitrate=BTR[gtk_combo_box_get_active(combo_box)];
-        }
-        gtk_unregister_dialog(dialog);
-        gtk_widget_destroy(dialog);
-        return ret;
-  }
-
-//___________ glade stuff below ____________
-
-  GtkWidget*
-      create_dialog1 (void)
-  {
-    GtkWidget *dialog1;
-    GtkWidget *dialog_vbox1;
-    GtkWidget *hbox1;
-    GtkWidget *label1;
-    GtkWidget *comboboxBitrate;
-    GtkWidget *dialog_action_area1;
-    GtkWidget *cancelbutton1;
-    GtkWidget *okbutton1;
-
-    dialog1 = gtk_dialog_new ();
-    gtk_window_set_title (GTK_WINDOW (dialog1), _(&quot;Audio Encoder Settings&quot;));
-    gtk_window_set_type_hint (GTK_WINDOW (dialog1), GDK_WINDOW_TYPE_HINT_DIALOG);
-
-    dialog_vbox1 = GTK_DIALOG (dialog1)-&gt;vbox;
-    gtk_widget_show (dialog_vbox1);
-
-    hbox1 = gtk_hbox_new (FALSE, 0);
-    gtk_widget_show (hbox1);
-    gtk_box_pack_start (GTK_BOX (dialog_vbox1), hbox1, FALSE, TRUE, 0);
-
-    label1 = gtk_label_new (_(&quot;&lt;b&gt;Bitrate :&lt;/b&gt;&quot;));
-    gtk_widget_show (label1);
-    gtk_box_pack_start (GTK_BOX (hbox1), label1, FALSE, FALSE, 0);
-    gtk_label_set_use_markup (GTK_LABEL (label1), TRUE);
-
-    comboboxBitrate = gtk_combo_box_new_text ();
-    gtk_widget_show (comboboxBitrate);
-    gtk_box_pack_start (GTK_BOX (hbox1), comboboxBitrate, TRUE, TRUE, 0);
-
-    dialog_action_area1 = GTK_DIALOG (dialog1)-&gt;action_area;
-    gtk_widget_show (dialog_action_area1);
-    gtk_button_box_set_layout (GTK_BUTTON_BOX (dialog_action_area1), GTK_BUTTONBOX_END);
-
-    cancelbutton1 = gtk_button_new_from_stock (&quot;gtk-cancel&quot;);
-    gtk_widget_show (cancelbutton1);
-    gtk_dialog_add_action_widget (GTK_DIALOG (dialog1), cancelbutton1, GTK_RESPONSE_CANCEL);
-    GTK_WIDGET_SET_FLAGS (cancelbutton1, GTK_CAN_DEFAULT);
-
-    okbutton1 = gtk_button_new_from_stock (&quot;gtk-ok&quot;);
-    gtk_widget_show (okbutton1);
-    gtk_dialog_add_action_widget (GTK_DIALOG (dialog1), okbutton1, GTK_RESPONSE_OK);
-    GTK_WIDGET_SET_FLAGS (okbutton1, GTK_CAN_DEFAULT);
-
-    /* Store pointers to all widgets, for use by lookup_widget(). */
-    GLADE_HOOKUP_OBJECT_NO_REF (dialog1, dialog1, &quot;dialog1&quot;);
-    GLADE_HOOKUP_OBJECT_NO_REF (dialog1, dialog_vbox1, &quot;dialog_vbox1&quot;);
-    GLADE_HOOKUP_OBJECT (dialog1, hbox1, &quot;hbox1&quot;);
-    GLADE_HOOKUP_OBJECT (dialog1, label1, &quot;label1&quot;);
-    GLADE_HOOKUP_OBJECT (dialog1, comboboxBitrate, &quot;comboboxBitrate&quot;);
-    GLADE_HOOKUP_OBJECT_NO_REF (dialog1, dialog_action_area1, &quot;dialog_action_area1&quot;);
-    GLADE_HOOKUP_OBJECT (dialog1, cancelbutton1, &quot;cancelbutton1&quot;);
-    GLADE_HOOKUP_OBJECT (dialog1, okbutton1, &quot;okbutton1&quot;);
-
-    return dialog1;
-  }
-

Deleted: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_lame.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_lame.cpp	2007-01-22 19:41:03 UTC (rev 2767)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_lame.cpp	2007-01-23 19:39:49 UTC (rev 2768)
@@ -1,249 +0,0 @@
-/*
- * DO NOT EDIT THIS FILE - it is generated by Glade.
- */
-# include &lt;config.h&gt;
-
-#include &lt;stdio.h&gt;
-#include &lt;stdlib.h&gt;
-
-#include &lt;sys/types.h&gt;
-#include &lt;sys/stat.h&gt;
-#include &lt;unistd.h&gt;
-#include &lt;string.h&gt;
-
-
-#include &lt;gdk/gdkkeysyms.h&gt;
-#include &lt;gtk/gtk.h&gt;
-#include &quot;ADM_assert.h&quot;
-#include &quot;default.h&quot;
-#include &quot;ADM_toolkit_gtk/ADM_gladeSupport.h&quot;
-#include &quot;ADM_toolkit_gtk/toolkit_gtk.h&quot;
-#include &quot;ADM_toolkit_gtk/toolkit_gtk_include.h&quot;
-
-#include &quot;ADM_assert.h&quot; 
-
-
-#include &quot;ADM_audiofilter/audioeng_buildfilters.h&quot;
-#include &quot;ADM_audiofilter/audioencoder.h&quot;
-#include &quot;ADM_audiofilter/audioencoder_lame_param.h&quot;
-
-
-#define NB_BITRATE 11
-static int BTR[] = {		// see interface.c if you change this !
-		48,
-		56,
-		64,
-		80,
-    		96,
-    		112,
-    		128,
-   		 160,
-    		192,
-   		 224,
-		 384
-};
-  
-
-
- static GtkWidget	*create_dialog1 (void);
- 
- int DIA_getLameSettings(ADM_audioEncoderDescriptor *descriptor)
-  {
-  GtkWidget *dialog;
-  
-  int ret=0;
-  char string[400];
-  GtkComboBox *combo_box;
-
-  LAME_encoderParam *lameParam;
-  ADM_assert(sizeof(LAME_encoderParam)==descriptor-&gt;paramSize);
-  
-  lameParam=(LAME_encoderParam*)descriptor-&gt;param;
-  
-    dialog=create_dialog1();
-    gtk_register_dialog(dialog);
-
-        // ******** Set mode****************
-        int mindex;
-        mindex=1;
-        switch(lameParam-&gt;mode)
-        {
-            case ADM_MONO:mindex=0;break;
-            default:
-            case ADM_STEREO:mindex=1;break;
-            case ADM_JSTEREO:mindex=2;break;	
-        }
-        combo_box=GTK_COMBO_BOX(WID(comboboxMode));
-        gtk_combo_box_set_active(combo_box,mindex);
-        // *******  set bitrate ************
-        combo_box=GTK_COMBO_BOX(WID(comboboxBitrate));
-        gtk_combo_box_remove_text(combo_box,0);
-        
-        for(unsigned int i=0;i&lt;NB_BITRATE;i++)
-        {
-            sprintf(string,&quot;%d kbits&quot;,BTR[i]);
-            gtk_combo_box_append_text(combo_box,string);
-            if(descriptor-&gt;bitrate==BTR[i])
-              gtk_combo_box_set_active(combo_box,i);
-        }
-        // ******** Set preset ********
-        combo_box=GTK_COMBO_BOX(WID(comboboxPreset));
-        gtk_combo_box_remove_text(combo_box,0);
-        for(unsigned int i=0;i&lt;3;i++)
-        {
-          gtk_combo_box_append_text(combo_box,presetDefinition[i].name);
-          if(lameParam-&gt;preset==presetDefinition[i].preset)
-            gtk_combo_box_set_active(combo_box,i);
-        }
-        // ********* Quality ******
-        gtk_spin_button_set_value(GTK_SPIN_BUTTON(WID(spinbuttonQuality)),(gfloat)lameParam-&gt;quality) ;
-
-        if(GTK_RESPONSE_OK==gtk_dialog_run(GTK_DIALOG(dialog)))
-        {
-          combo_box=GTK_COMBO_BOX(WID(comboboxBitrate));
-          descriptor-&gt;bitrate=BTR[gtk_combo_box_get_active(combo_box)];
-          
-          combo_box=GTK_COMBO_BOX(WID(comboboxPreset));
-          lameParam-&gt;preset=presetDefinition[gtk_combo_box_get_active(combo_box)].preset;
-              
-          combo_box=GTK_COMBO_BOX(WID(comboboxMode));
-          switch(gtk_combo_box_get_active(combo_box))
-          {
-            case 0: lameParam-&gt;mode=ADM_MONO;break;
-            case 1: lameParam-&gt;mode=ADM_STEREO;break;
-            case 2: lameParam-&gt;mode=ADM_JSTEREO;break;
-            default : ADM_assert(0);
-          }
-          lameParam-&gt;quality=gtk_spin_button_get_value_as_int(GTK_SPIN_BUTTON(WID(spinbuttonQuality))) ;
-          
-        }
-        gtk_unregister_dialog(dialog);
-        gtk_widget_destroy(dialog);
-        return ret;
-  }
-
-//___________ glade stuff below ____________
-
-  GtkWidget*
-      create_dialog1 (void)
-  {
-    GtkWidget *dialog1;
-    GtkWidget *dialog_vbox1;
-    GtkWidget *table1;
-    GtkObject *spinbuttonQuality_adj;
-    GtkWidget *spinbuttonQuality;
-    GtkWidget *comboboxMode;
-    GtkWidget *comboboxBitrate;
-    GtkWidget *comboboxPreset;
-    GtkWidget *label1;
-    GtkWidget *label2;
-    GtkWidget *label3;
-    GtkWidget *label4;
-    GtkWidget *dialog_action_area1;
-    GtkWidget *cancelbutton1;
-    GtkWidget *okbutton1;
-
-    dialog1 = gtk_dialog_new ();
-    gtk_window_set_title (GTK_WINDOW (dialog1), _(&quot;Lame Encoder Settings&quot;));
-    gtk_window_set_type_hint (GTK_WINDOW (dialog1), GDK_WINDOW_TYPE_HINT_DIALOG);
-
-    dialog_vbox1 = GTK_DIALOG (dialog1)-&gt;vbox;
-    gtk_widget_show (dialog_vbox1);
-
-    table1 = gtk_table_new (4, 2, FALSE);
-    gtk_widget_show (table1);
-    gtk_box_pack_start (GTK_BOX (dialog_vbox1), table1, TRUE, TRUE, 0);
-
-    spinbuttonQuality_adj = gtk_adjustment_new (1, 0, 9, 1, 10, 10);
-    spinbuttonQuality = gtk_spin_button_new (GTK_ADJUSTMENT (spinbuttonQuality_adj), 1, 0);
-    gtk_widget_show (spinbuttonQuality);
-    gtk_table_attach (GTK_TABLE (table1), spinbuttonQuality, 1, 2, 3, 4,
-                      (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
-                      (GtkAttachOptions) (0), 0, 0);
-
-    comboboxMode = gtk_combo_box_new_text ();
-    gtk_widget_show (comboboxMode);
-    gtk_table_attach (GTK_TABLE (table1), comboboxMode, 1, 2, 0, 1,
-                      (GtkAttachOptions) (GTK_EXPAND | GTK_SHRINK | GTK_FILL),
-                      (GtkAttachOptions) (GTK_FILL), 0, 0);
-    gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxMode), _(&quot;Mono&quot;));
-    gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxMode), _(&quot;Stereo&quot;));
-    gtk_combo_box_append_text (GTK_COMBO_BOX (comboboxMode), _(&quot;Joint-Stereo&quot;));
-
-    comboboxBitrate = gtk_combo_box_new_text ();
-    gtk_widget_show (comboboxBitrate);
-    gtk_table_attach (GTK_TABLE (table1), comboboxBitrate, 1, 2, 1, 2,
-                      (GtkAttachOptions) (GTK_SHRINK | GTK_FILL),
-                      (GtkAttachOptions) (GTK_FILL), 0, 0);
-
-    comboboxPreset = gtk_combo_box_new_text ();
-    gtk_widget_show (comboboxPreset);
-    gtk_table_attach (GTK_TABLE (table1), comboboxPreset, 1, 2, 2, 3,
-                      (GtkAttachOptions) (GTK_SHRINK | GTK_FILL),
-                      (GtkAttachOptions) (GTK_FILL), 0, 0);
-
-    label1 = gtk_label_new (_(&quot;&lt;b&gt;Channel Mode:&lt;/b&gt;&quot;));
-    gtk_widget_show (label1);
-    gtk_table_attach (GTK_TABLE (table1), label1, 0, 1, 0, 1,
-                      (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
-                      (GtkAttachOptions) (0), 0, 0);
-    gtk_label_set_use_markup (GTK_LABEL (label1), TRUE);
-    gtk_misc_set_alignment (GTK_MISC (label1), 0, 0.5);
-
-    label2 = gtk_label_new (_(&quot;&lt;b&gt;Bitrate:&lt;/b&gt;&quot;));
-    gtk_widget_show (label2);
-    gtk_table_attach (GTK_TABLE (table1), label2, 0, 1, 1, 2,
-                      (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
-                      (GtkAttachOptions) (0), 0, 0);
-    gtk_label_set_use_markup (GTK_LABEL (label2), TRUE);
-    gtk_misc_set_alignment (GTK_MISC (label2), 0, 0.5);
-
-    label3 = gtk_label_new (_(&quot;&lt;b&gt;Mode:&lt;/b&gt;&quot;));
-    gtk_widget_show (label3);
-    gtk_table_attach (GTK_TABLE (table1), label3, 0, 1, 2, 3,
-                      (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
-                      (GtkAttachOptions) (0), 0, 0);
-    gtk_label_set_use_markup (GTK_LABEL (label3), TRUE);
-    gtk_misc_set_alignment (GTK_MISC (label3), 0, 0.5);
-
-    label4 = gtk_label_new (_(&quot;&lt;b&gt;Quality:&lt;/b&gt;&quot;));
-    gtk_widget_show (label4);
-    gtk_table_attach (GTK_TABLE (table1), label4, 0, 1, 3, 4,
-                      (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
-                      (GtkAttachOptions) (0), 0, 0);
-    gtk_label_set_use_markup (GTK_LABEL (label4), TRUE);
-    gtk_misc_set_alignment (GTK_MISC (label4), 0, 0.5);
-
-    dialog_action_area1 = GTK_DIALOG (dialog1)-&gt;action_area;
-    gtk_widget_show (dialog_action_area1);
-    gtk_button_box_set_layout (GTK_BUTTON_BOX (dialog_action_area1), GTK_BUTTONBOX_END);
-
-    cancelbutton1 = gtk_button_new_from_stock (&quot;gtk-cancel&quot;);
-    gtk_widget_show (cancelbutton1);
-    gtk_dialog_add_action_widget (GTK_DIALOG (dialog1), cancelbutton1, GTK_RESPONSE_CANCEL);
-    GTK_WIDGET_SET_FLAGS (cancelbutton1, GTK_CAN_DEFAULT);
-
-    okbutton1 = gtk_button_new_from_stock (&quot;gtk-ok&quot;);
-    gtk_widget_show (okbutton1);
-    gtk_dialog_add_action_widget (GTK_DIALOG (dialog1), okbutton1, GTK_RESPONSE_OK);
-    GTK_WIDGET_SET_FLAGS (okbutton1, GTK_CAN_DEFAULT);
-
-    /* Store pointers to all widgets, for use by lookup_widget(). */
-    GLADE_HOOKUP_OBJECT_NO_REF (dialog1, dialog1, &quot;dialog1&quot;);
-    GLADE_HOOKUP_OBJECT_NO_REF (dialog1, dialog_vbox1, &quot;dialog_vbox1&quot;);
-    GLADE_HOOKUP_OBJECT (dialog1, table1, &quot;table1&quot;);
-    GLADE_HOOKUP_OBJECT (dialog1, spinbuttonQuality, &quot;spinbuttonQuality&quot;);
-    GLADE_HOOKUP_OBJECT (dialog1, comboboxMode, &quot;comboboxMode&quot;);
-    GLADE_HOOKUP_OBJECT (dialog1, comboboxBitrate, &quot;comboboxBitrate&quot;);
-    GLADE_HOOKUP_OBJECT (dialog1, comboboxPreset, &quot;comboboxPreset&quot;);
-    GLADE_HOOKUP_OBJECT (dialog1, label1, &quot;label1&quot;);
-    GLADE_HOOKUP_OBJECT (dialog1, label2, &quot;label2&quot;);
-    GLADE_HOOKUP_OBJECT (dialog1, label3, &quot;label3&quot;);
-    GLADE_HOOKUP_OBJECT (dialog1, label4, &quot;label4&quot;);
-    GLADE_HOOKUP_OBJECT_NO_REF (dialog1, dialog_action_area1, &quot;dialog_action_area1&quot;);
-    GLADE_HOOKUP_OBJECT (dialog1, cancelbutton1, &quot;cancelbutton1&quot;);
-    GLADE_HOOKUP_OBJECT (dialog1, okbutton1, &quot;okbutton1&quot;);
-
-    return dialog1;
-  }
-

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/Makefile.am
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/Makefile.am	2007-01-22 19:41:03 UTC (rev 2767)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/Makefile.am	2007-01-23 19:39:49 UTC (rev 2768)
@@ -16,7 +16,7 @@
 	DIA_xvid.cpp DIA_crop.cpp DIA_color.cpp DIA_encoding.cpp DIA_SVCD.cpp DIA_prefs.cpp \
 	DIA_requant.cpp DIA_xvid4.cpp DIA_lavcodec.cpp \
 	DIA_pause.cpp \
-	DIA_DVDff.cpp DIA_lavdecoder.cpp DIA_lame.cpp DIA_calculator.cpp DIA_equalizer.cpp \
+	DIA_DVDff.cpp DIA_lavdecoder.cpp DIA_calculator.cpp DIA_equalizer.cpp \
 	DIA_vobsub.cpp DIA_x264.cpp DIA_ocr.cpp  DIA_hue.cpp DIA_eq2.cpp \
 	DIA_asharp.cpp DIA_dmx.cpp DIA_idx_pg.cpp DIA_gototime.cpp \
 	DIA_audioTrack.cpp DIA_cnr2.cpp DIA_jobs.cpp DIA_jobs_save.cpp  \
@@ -31,7 +31,6 @@
 	DIA_coloryuv.cpp \
 	DIA_quota.cpp \
 	DIA_animated.cpp \
-	DIA_defaultAudio.cpp \
 	DIA_partial.cpp \
 	DIA_ass.cpp DIA_bitrateHisto.cpp
 
@@ -53,7 +52,7 @@
 DIA_defaultAudio.cpp  DIA_jobs.cpp        DIA_working.h \
 DIA_jobs_save.cpp    DIA_prefs.cpp       DIA_x264.cpp \
 DIA_preview.cpp     DIA_xvcd.cpp \
-DIA_busy.cpp         DIA_dmx.cpp           DIA_lame.cpp         DIA_properties.cpp  DIA_xvid.cpp \
+DIA_busy.cpp         DIA_dmx.cpp           DIA_properties.cpp  DIA_xvid.cpp \
 DIA_busy.h           DIA_lavcodec.cpp     DIA_quota.cpp       DIA_xvid4.cpp \
 DIA_calculator.cpp   DIA_encoding.cpp      DIA_lavdecoder.cpp   DIA_recent.cpp \
 DIA_chromaShift.cpp  DIA_encoding.h        DIA_lavpp_deint.cpp  DIA_requant.cpp DIA_ass.cpp

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_none.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_none.cpp	2007-01-22 19:41:03 UTC (rev 2767)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_none.cpp	2007-01-23 19:39:49 UTC (rev 2768)
@@ -109,8 +109,6 @@
 
 //******************************
 int DIA_getVorbisSettings(ADM_audioEncoderDescriptor *descriptor) {return 0;}
-int DIA_getLameSettings(ADM_audioEncoderDescriptor *descriptor){return 0;}
-int DIA_defaultSettings(ADM_audioEncoderDescriptor *descriptor){return 0;}
 uint8_t getFFCompressParams (COMPRES_PARAMS * incoming) {return 0;}
 uint8_t DIA_quota(char *) {return 0;}
 

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_none.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_none.cpp	2007-01-22 19:41:03 UTC (rev 2767)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_none.cpp	2007-01-23 19:39:49 UTC (rev 2768)
@@ -109,8 +109,6 @@
 
 //******************************
 int DIA_getVorbisSettings(ADM_audioEncoderDescriptor *descriptor) {return 0;}
-int DIA_getLameSettings(ADM_audioEncoderDescriptor *descriptor){return 0;}
-int DIA_defaultSettings(ADM_audioEncoderDescriptor *descriptor){return 0;}
 uint8_t getFFCompressParams (COMPRES_PARAMS * incoming) {return 0;}
 uint8_t DIA_quota(char *) {return 0;}
 

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/Makefile.am
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/Makefile.am	2007-01-22 19:41:03 UTC (rev 2767)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/Makefile.am	2007-01-23 19:39:49 UTC (rev 2768)
@@ -1,6 +1,8 @@
 noinst_LIBRARIES = libADM_CommonUI.a 
 libADM_CommonUI_a_METASOURCES = AUTO
-libADM_CommonUI_a_SOURCES = GUI_sdlRender.cpp  GUI_xvRender.cpp  DIA_resizeWiz.cpp DIA_builtin.cpp DIA_postproc.cpp DIA_enter.cpp
+libADM_CommonUI_a_SOURCES = GUI_sdlRender.cpp  GUI_xvRender.cpp  \
+DIA_resizeWiz.cpp DIA_builtin.cpp DIA_postproc.cpp DIA_enter.cpp \
+DIA_audioconfig.cpp
 
 
 INCLUDES = $(all_includes) $(GTK_CFLAGS) $(XML_CFLAGS)  $(FREETYPE_CFLAGS) -DADM_SUBVERSION=@ADM_SUBVERSION@ \


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000093.html">[Avidemux-svn-commit] r2767 - in	branches/avidemux_2.4_branch/avidemux: .	ADM_userInterfaces/ADM_GTK/ADM_dialog	ADM_userInterfaces/ADM_NONE/ADM_dialog	ADM_userInterfaces/ADM_QT4/ADM_dialog	ADM_userInterfaces/ADM_commonUI
</A></li>
	<LI>Next message: <A HREF="000095.html">[Avidemux-svn-commit] r2769 -	branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#94">[ date ]</a>
              <a href="thread.html#94">[ thread ]</a>
              <a href="subject.html#94">[ subject ]</a>
              <a href="author.html#94">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">More information about the Avidemux-svn-commit
mailing list</a><br>
</body></html>
