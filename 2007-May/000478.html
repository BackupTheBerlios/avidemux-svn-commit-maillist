<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Avidemux-svn-commit] r3183 - in branches/avidemux_2.4_branch:	avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog	avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory	avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters	avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui cmake
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/avidemux-svn-commit/2007-May/index.html" >
   <LINK REL="made" HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r3183%20-%20in%20branches/avidemux_2.4_branch%3A%0A%09avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog%0A%09avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory%0A%09avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters%0A%09avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui%20cmake&In-Reply-To=%3C200705291534.l4TFYa6P022468%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000477.html">
   <LINK REL="Next"  HREF="000479.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Avidemux-svn-commit] r3183 - in branches/avidemux_2.4_branch:	avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog	avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory	avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters	avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui cmake</H1>
    <B>mean at BerliOS</B> 
    <A HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r3183%20-%20in%20branches/avidemux_2.4_branch%3A%0A%09avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog%0A%09avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory%0A%09avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters%0A%09avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui%20cmake&In-Reply-To=%3C200705291534.l4TFYa6P022468%40sheep.berlios.de%3E"
       TITLE="[Avidemux-svn-commit] r3183 - in branches/avidemux_2.4_branch:	avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog	avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory	avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters	avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui cmake">mean at mail.berlios.de
       </A><BR>
    <I>Tue May 29 17:34:36 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000477.html">[Avidemux-svn-commit] r3182 - in	branches/avidemux_2.4_branch/avidemux: . ADM_userInterfaces	ADM_userInterfaces/ADM_QT4 ADM_userInterfaces/ADM_QT4/ADM_dialog	ADM_userInterfaces/ADM_QT4/ADM_dialogFactory	ADM_userInterfaces/ADM_QT4/ADM_filters	ADM_userInterfaces/ADM_QT4/ADM_gui
</A></li>
        <LI>Next message: <A HREF="000479.html">[Avidemux-svn-commit] r3184 - branches/avidemux_2.4_branch/avidemux
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#478">[ date ]</a>
              <a href="thread.html#478">[ thread ]</a>
              <a href="subject.html#478">[ subject ]</a>
              <a href="author.html#478">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: mean
Date: 2007-05-29 17:34:35 +0200 (Tue, 29 May 2007)
New Revision: 3183

Added:
   branches/avidemux_2.4_branch/cmake/adm_qt4.cmake
Modified:
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/CMakeLists.txt
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/CMakeLists.txt
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/CMakeLists.txt
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/CMakeLists.txt
Log:
moc &amp; uic with cmake

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/CMakeLists.txt
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/CMakeLists.txt	2007-05-29 13:56:35 UTC (rev 3182)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/CMakeLists.txt	2007-05-29 15:34:35 UTC (rev 3183)
@@ -4,21 +4,27 @@
 include(AdmLib)
 SET(ADM_LIB ADM_dialogQt4)
 #
+SET(${ADM_LIB}_Q
+asharp
+chromashift
+contrast
+crop
+encoding
+hue
+props
+resizing
+srt
+working
+)
+#
+SET(${ADM_LIB}_T
+flyDialog
+index_pg
+QCanvas
+)
+#
 SET(${ADM_LIB}_SRCS
 alert_qt4.cpp
-AQ_asharp.cpp
-AQ_chromashift.cpp
-AQ_contrast.cpp
-AQ_crop.cpp
-AQ_encoding.cpp
-AQ_hue.cpp
-AQ_props.cpp
-AQ_resizing.cpp
-AQ_srt.cpp
-AQ_working.cpp
-AT_flyDialog.cpp
-AT_index_pg.cpp
-AT_QCanvas.cpp
 DIA_busy.cpp
 DIA_none.cpp
 DIA_srt.cpp
@@ -26,15 +32,16 @@
 DIA_xvid4.cpp
 OCR_none.cpp
 )
-ADD_LIBRARY(${ADM_LIB} STATIC ${${ADM_LIB}_SRCS})
-ADD_ADM_LIB(${ADM_LIB} ADM_libraries)
 
 
 ################################
+include(adm_qt4)
+################################
 ADD_definitions(-DADM_SUBVERSION=0 )
 include_directories(.. ../../../ADM_osSupport ../../../ADM_inputs)
 include_directories(${QT_INCLUDES})
 
+
 if(FT_FOUND)
 add_definitions(${FT_CFLAGS})
 endif(FT_FOUND)

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/CMakeLists.txt
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/CMakeLists.txt	2007-05-29 13:56:35 UTC (rev 3182)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/CMakeLists.txt	2007-05-29 15:34:35 UTC (rev 3183)
@@ -4,13 +4,21 @@
 include(AdmLib)
 SET(ADM_LIB ADM_dialogFactoryQt4)
 #
+SET(${ADM_LIB}_T
+bitrate  
+dialogFactory  
+button
+filesel        
+)
+
 SET(${ADM_LIB}_SRCS
-AT_bitrate.cpp  AT_dialogFactory.cpp  FAC_bar.cpp    FAC_frame.cpp  FAC_integer.cpp  FAC_notch.cpp         FAC_toggle.cpp
-AT_button.cpp   AT_filesel.cpp        FAC_float.cpp  FAC_hex.cpp    FAC_menu.cpp     FAC_readOnlyText.cpp
+FAC_bar.cpp    FAC_frame.cpp  FAC_integer.cpp  FAC_notch.cpp         FAC_toggle.cpp
+FAC_float.cpp  FAC_hex.cpp    FAC_menu.cpp     FAC_readOnlyText.cpp
 )
-ADD_LIBRARY(${ADM_LIB} STATIC ${${ADM_LIB}_SRCS})
-ADD_ADM_LIB(${ADM_LIB} ADM_libraries)
 
+################################
+include(adm_qt4)
+################################
 
 ################################
 ADD_definitions(-DADM_SUBVERSION=0 )

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/CMakeLists.txt
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/CMakeLists.txt	2007-05-29 13:56:35 UTC (rev 3182)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/CMakeLists.txt	2007-05-29 15:34:35 UTC (rev 3183)
@@ -5,13 +5,15 @@
 SET(ADM_LIB ADM_filtersQt4)
 #
 SET(${ADM_LIB}_SRCS
-AQ_mainfilter.cpp  filter_none.cpp  filter_rsc.cpp
+filter_none.cpp  filter_rsc.cpp
 )
-ADD_LIBRARY(${ADM_LIB} STATIC ${${ADM_LIB}_SRCS})
-ADD_ADM_LIB(${ADM_LIB} ADM_libraries)
+SET(${ADM_LIB}_Q
+mainfilter
+)
 
-
 ################################
+include(adm_qt4)
+################################
 ADD_definitions(-DADM_SUBVERSION=0 )
 include_directories(.. ../../../ADM_osSupport ../../../ADM_inputs)
 include_directories(${QT_INCLUDES})

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/CMakeLists.txt
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/CMakeLists.txt	2007-05-29 13:56:35 UTC (rev 3182)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/CMakeLists.txt	2007-05-29 15:34:35 UTC (rev 3183)
@@ -5,12 +5,21 @@
 SET(ADM_LIB ADM_guiQt4)
 #
 SET(${ADM_LIB}_SRCS
-AQ_gui2.cpp  AT_preview.cpp  AT_qslider.cpp  avidemux_rsc.cpp  file_qt4.cpp  gui_none.cpp
+avidemux_rsc.cpp  file_qt4.cpp  gui_none.cpp
 )
-ADD_LIBRARY(${ADM_LIB} STATIC ${${ADM_LIB}_SRCS})
-ADD_ADM_LIB(${ADM_LIB} ADM_libraries)
+#
+#
+SET(${ADM_LIB}_T
+preview
+qslider
+)
+#
+SET(${ADM_LIB}_Q
+gui2
+)
 
-
+#########################################&quot;
+include(adm_qt4)
 ################################
 ADD_definitions(-DADM_SUBVERSION=0 )
 include_directories(.. .)

Added: branches/avidemux_2.4_branch/cmake/adm_qt4.cmake
===================================================================
--- branches/avidemux_2.4_branch/cmake/adm_qt4.cmake	2007-05-29 13:56:35 UTC (rev 3182)
+++ branches/avidemux_2.4_branch/cmake/adm_qt4.cmake	2007-05-29 15:34:35 UTC (rev 3183)
@@ -0,0 +1,53 @@
+#AQ_%.cpp : Q_%.cpp %.ui
+##############################################################&quot;
+# FOR AQ
+# Q_foo.cpp and foo.ui =&gt; AQ_foo.cpp, ui_foo.h and Q_foo.moc
+##############################################################&quot;
+MACRO(Q_UIMOCIFY _source)                     
+  ADD_CUSTOM_COMMAND(OUTPUT AQ_${_source}.cpp
+                     COMMAND  ${QT_UIC_EXECUTABLE} ${_source}.ui -o ui_${_source}.h 
+                     COMMAND  ${QT_MOC_EXECUTABLE} Q_${_source}.cpp -o Q_${_source}.moc 
+                     COMMAND  echo &quot;#include \&quot;Q_${_source}.cpp\&quot;&quot; &gt; AQ_${_source}.cpp
+                     COMMAND  echo &quot;#include \&quot;Q_${_source}.moc\&quot;&quot; &gt;&gt; AQ_${_source}.cpp
+                     DEPENDS  ${_source}.ui Q_${_source}.cpp
+                     VERBATIM
+                )
+   #FILE(WRITE ${CMAKE_CURRENT_SOURCE_DIR}/AQ_${_source}.cpp &quot;#include \&quot;Q_${_source}.cpp\&quot; \n&quot; )
+   #FILE(APPEND ${CMAKE_CURRENT_SOURCE_DIR}/AQ_${_source}.cpp &quot;#include \&quot;Q_${_source}.moc\&quot; \n&quot; )
+ENDMACRO(Q_UIMOCIFY _source)  
+##############################################################&quot;
+# FOR AT
+# T_foo.cpp i =&gt; AT_foo.cpp and T_foo.moc
+##############################################################&quot;
+
+MACRO(Q_MOCIFY _source)                     
+  ADD_CUSTOM_COMMAND(OUTPUT AT_${_source}.cpp
+                     COMMAND   ${QT_MOC_EXECUTABLE} T_${_source}.cpp -o T_${_source}.moc 
+                     COMMAND  echo &quot;#include \&quot;T_${_source}.cpp\&quot;&quot; &gt; AT_${_source}.cpp
+                     COMMAND  echo &quot;#include \&quot;T_${_source}.moc\&quot;&quot; &gt;&gt; AT_${_source}.cpp
+                     DEPENDS   T_${_source}.cpp
+                     VERBATIM
+                )
+   #FILE(WRITE AT_${_source}.cpp &quot;#include \&quot;T_${_source}.cpp\&quot; \n&quot; )
+   #FILE(APPEND AT_${_source}.cpp &quot;#include \&quot;T_${_source}.moc\&quot; \n&quot; )
+ENDMACRO(Q_MOCIFY _source)                     
+
+# Add to our Targets..
+FOREACH(_current ${${ADM_LIB}_Q})
+ Q_UIMOCIFY(${_current})
+ SET(${ADM_LIB}_SRCS ${${ADM_LIB}_SRCS} AQ_${_current}.cpp)
+ENDFOREACH(_current ${${ADM_LIB}_Q})
+FOREACH(_current ${${ADM_LIB}_T})
+ Q_MOCIFY(${_current})
+ SET(${ADM_LIB}_SRCS ${${ADM_LIB}_SRCS} AT_${_current}.cpp)
+ENDFOREACH(_current ${${ADM_LIB}_T})
+
+
+ADD_LIBRARY(${ADM_LIB} STATIC ${${ADM_LIB}_SRCS})
+ADD_ADM_LIB(${ADM_LIB} ADM_libraries)
+
+# EOF
+
+
+
+


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000477.html">[Avidemux-svn-commit] r3182 - in	branches/avidemux_2.4_branch/avidemux: . ADM_userInterfaces	ADM_userInterfaces/ADM_QT4 ADM_userInterfaces/ADM_QT4/ADM_dialog	ADM_userInterfaces/ADM_QT4/ADM_dialogFactory	ADM_userInterfaces/ADM_QT4/ADM_filters	ADM_userInterfaces/ADM_QT4/ADM_gui
</A></li>
	<LI>Next message: <A HREF="000479.html">[Avidemux-svn-commit] r3184 - branches/avidemux_2.4_branch/avidemux
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#478">[ date ]</a>
              <a href="thread.html#478">[ thread ]</a>
              <a href="subject.html#478">[ subject ]</a>
              <a href="author.html#478">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">More information about the Avidemux-svn-commit
mailing list</a><br>
</body></html>
