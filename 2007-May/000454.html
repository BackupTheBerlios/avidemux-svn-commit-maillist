<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Avidemux-svn-commit] r3159 - in branches/avidemux_2.4_branch: .	avidemux avidemux/ADM_editor avidemux/ADM_inputs	avidemux/ADM_inputs/ADM_asf avidemux/ADM_inputs/ADM_nuv	avidemux/ADM_libraries	avidemux/ADM_libraries/ADM_lavcodec/i386 avidemux/ADM_ocr	avidemux/ADM_userInterfaces	avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog	avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialogFactory	avidemux/ADM_userInterfaces/ADM_NONE/ADM_filters	avidemux/ADM_userInterfaces/ADM_NONE/ADM_gui2	avidemux/ADM_userInterfaces/ADM_commonUI avidemux/ADM_video	avidemux/ADM_videoFilter
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/avidemux-svn-commit/2007-May/index.html" >
   <LINK REL="made" HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r3159%20-%20in%20branches/avidemux_2.4_branch%3A%20.%0A%09avidemux%20avidemux/ADM_editor%20avidemux/ADM_inputs%0A%09avidemux/ADM_inputs/ADM_asf%20avidemux/ADM_inputs/ADM_nuv%0A%09avidemux/ADM_libraries%0A%09avidemux/ADM_libraries/ADM_lavcodec/i386%20avidemux/ADM_ocr%0A%09avidemux/ADM_userInterfaces%0A%09avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog%0A%09avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialogFactory%0A%09avidemux/ADM_userInterfaces/ADM_NONE/ADM_filters%0A%09avidemux/ADM_userInterfaces/ADM_NONE/ADM_gui2%0A%09avidemux/ADM_userInterfaces/ADM_commonUI%20avidemux/ADM_video%0A%09avidemux/ADM_videoFilter&In-Reply-To=%3C200705281306.l4SD68hY011691%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000453.html">
   <LINK REL="Next"  HREF="000455.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Avidemux-svn-commit] r3159 - in branches/avidemux_2.4_branch: .	avidemux avidemux/ADM_editor avidemux/ADM_inputs	avidemux/ADM_inputs/ADM_asf avidemux/ADM_inputs/ADM_nuv	avidemux/ADM_libraries	avidemux/ADM_libraries/ADM_lavcodec/i386 avidemux/ADM_ocr	avidemux/ADM_userInterfaces	avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog	avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialogFactory	avidemux/ADM_userInterfaces/ADM_NONE/ADM_filters	avidemux/ADM_userInterfaces/ADM_NONE/ADM_gui2	avidemux/ADM_userInterfaces/ADM_commonUI avidemux/ADM_video	avidemux/ADM_videoFilter</H1>
    <B>mean at BerliOS</B> 
    <A HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r3159%20-%20in%20branches/avidemux_2.4_branch%3A%20.%0A%09avidemux%20avidemux/ADM_editor%20avidemux/ADM_inputs%0A%09avidemux/ADM_inputs/ADM_asf%20avidemux/ADM_inputs/ADM_nuv%0A%09avidemux/ADM_libraries%0A%09avidemux/ADM_libraries/ADM_lavcodec/i386%20avidemux/ADM_ocr%0A%09avidemux/ADM_userInterfaces%0A%09avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog%0A%09avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialogFactory%0A%09avidemux/ADM_userInterfaces/ADM_NONE/ADM_filters%0A%09avidemux/ADM_userInterfaces/ADM_NONE/ADM_gui2%0A%09avidemux/ADM_userInterfaces/ADM_commonUI%20avidemux/ADM_video%0A%09avidemux/ADM_videoFilter&In-Reply-To=%3C200705281306.l4SD68hY011691%40sheep.berlios.de%3E"
       TITLE="[Avidemux-svn-commit] r3159 - in branches/avidemux_2.4_branch: .	avidemux avidemux/ADM_editor avidemux/ADM_inputs	avidemux/ADM_inputs/ADM_asf avidemux/ADM_inputs/ADM_nuv	avidemux/ADM_libraries	avidemux/ADM_libraries/ADM_lavcodec/i386 avidemux/ADM_ocr	avidemux/ADM_userInterfaces	avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog	avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialogFactory	avidemux/ADM_userInterfaces/ADM_NONE/ADM_filters	avidemux/ADM_userInterfaces/ADM_NONE/ADM_gui2	avidemux/ADM_userInterfaces/ADM_commonUI avidemux/ADM_video	avidemux/ADM_videoFilter">mean at mail.berlios.de
       </A><BR>
    <I>Mon May 28 15:06:08 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000453.html">[Avidemux-svn-commit] r3158 - in branches/avidemux_2.4_branch: . autononreg/dialogFactory avidemux/ADM_libraries avidemux/ADM_libraries/ADM_lavcodec avidemux/ADM_libraries/ADM_lavformat avidemux/ADM_libraries/ADM_lavutil avidemux/ADM_libraries/ADM_libMad avidemux/ADM_libraries/ADM_libMpeg2Dec avidemux/ADM_libraries/ADM_liba52 avidemux/ADM_libraries/ADM_libass avidemux/ADM_libraries/ADM_libmpeg2enc avidemux/ADM_libraries/ADM_libpostproc avidemux/ADM_libraries/ADM_libswscale avidemux/ADM_libraries/ADM_libtwolame avidemux/ADM_libraries/ADM_libwrapper avidemux/ADM_libraries/ADM_lvemux avidemux/ADM_libraries/ADM_mplex avidemux/ADM_libraries/ADM_smjs avidemux/ADM_libraries/ADM_utilities avidemux/ADM_libraries/ADM_xvidratectl avidemux/ADM_outputs avidemux/ADM_outputs/oplug_avi avidemux/ADM_outputs/oplug_mp4 avidemux/ADM_outputs/oplug_mpeg avidemux/ADM_outputs/oplug_mpegFF avidemux/ADM_outputs/oplug_ogm avidemux/ADM_userInterfaces/ADM_GTK avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog avidemux/A! DM_userInterfaces/ADM_GTK/ADM_dialogFactory avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2 avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk cmake
</A></li>
        <LI>Next message: <A HREF="000455.html">[Avidemux-svn-commit] r3160 - in	branches/avidemux_2.4_branch/avidemux: .	ADM_libraries/ADM_libass ADM_libraries/ADM_libtwolame	ADM_libraries/ADM_mplex ADM_ocr ADM_script	ADM_userInterfaces/ADM_GTK/ADM_dialog	ADM_userInterfaces/ADM_NONE/ADM_dialog ADM_video ADM_videoFilter
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#454">[ date ]</a>
              <a href="thread.html#454">[ thread ]</a>
              <a href="subject.html#454">[ subject ]</a>
              <a href="author.html#454">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: mean
Date: 2007-05-28 15:06:07 +0200 (Mon, 28 May 2007)
New Revision: 3159

Modified:
   branches/avidemux_2.4_branch/CMakeLists.txt
   branches/avidemux_2.4_branch/avidemux/ADM_editor/CMakeLists.txt
   branches/avidemux_2.4_branch/avidemux/ADM_inputs/ADM_asf/CMakeLists.txt
   branches/avidemux_2.4_branch/avidemux/ADM_inputs/ADM_nuv/CMakeLists.txt
   branches/avidemux_2.4_branch/avidemux/ADM_inputs/CMakeLists.txt
   branches/avidemux_2.4_branch/avidemux/ADM_libraries/ADM_lavcodec/i386/cputest.c
   branches/avidemux_2.4_branch/avidemux/ADM_libraries/CMakeLists.txt
   branches/avidemux_2.4_branch/avidemux/ADM_ocr/CMakeLists.txt
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/CMakeLists.txt
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialogFactory/CMakeLists.txt
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_NONE/ADM_filters/CMakeLists.txt
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_NONE/ADM_gui2/CMakeLists.txt
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/CMakeLists.txt
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/CMakeLists.txt
   branches/avidemux_2.4_branch/avidemux/ADM_video/CMakeLists.txt
   branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/CMakeLists.txt
   branches/avidemux_2.4_branch/avidemux/CMakeLists.txt
Log:
updated cmake

Modified: branches/avidemux_2.4_branch/CMakeLists.txt
===================================================================
--- branches/avidemux_2.4_branch/CMakeLists.txt	2007-05-28 13:03:46 UTC (rev 3158)
+++ branches/avidemux_2.4_branch/CMakeLists.txt	2007-05-28 13:06:07 UTC (rev 3159)
@@ -14,7 +14,6 @@
 
 include(Po)
 include(CheckCXXCompilerFlag)
-include(lavcodec)
 include(FindLibXml2)
 #**************************************************
 # libxml2
@@ -31,6 +30,19 @@
              MESSAGE(FATAL_ERROR &quot;Could not find pkg-config&quot;)
 endif(NOT PKGCONFIG_EXECUTABLE)
 #**************************************************
+# Search for FREETYPE
+#**************************************************
+PKGCONFIG(freetype2 FT_INCLUDE FT_LIB FT_LDFLAGS FT_CFLAGS)
+
+IF(NOT FT_INCLUDE)
+    MESSAGE(&quot;Could not find Freetype &quot;)
+ELSE(NOT FT_INCLUDE)
+    SET(FT_FOUND TRUE)
+    SET(FT_CFLAGS ${FT_CFLAGS})
+    SET(FT_INCLUDE ${FT_INCLUDE})
+    MESSAGE(&quot;FreeType Found (&quot;${FT_CFLAGS} ${FT_INCLUDE}&quot;)&quot;)
+ENDIF(NOT FT_INCLUDE)
+#**************************************************
 # Search for  X11 (not on windows)
 #**************************************************
 if(NOT WIN32)
@@ -51,6 +63,8 @@
 ELSE(NOT GLIB_INCLUDE)
     SET(GLIB_FOUND,TRUE)
     SET(GLIB_CFLAGS,${GLIB_CFLAGS})
+    SET(GLIB_LDFLAGS,${GLIB_LDFLAGS})
+    SET(GLIB_LIB,${GLIB_LIB})
     MESSAGE(&quot;GLIB Found (&quot;${GLIB_CFLAGS}&quot;)&quot;)
 ENDIF(NOT GLIB_INCLUDE)
 #**************************************************
@@ -62,10 +76,26 @@
 IF(NOT GTK_CFLAGS)
     MESSAGE(&quot;Could not find GTK - cannot compile avidemux2_gtk here&quot;)
 ELSE(NOT GTK_CFLAGS)
-    SET(GTK_FOUND,TRUE)
+    SET(GTK_FOUND TRUE)
+    SET(GTK_CFLAGS,${GTK_CFLAGS})
+    SET(GTK_LDFLAGS,${GTK_LDFLAGS})
+    SET(GTK_LIB,${GTK_LIB})
     MESSAGE(&quot;GTK Found&quot;)
 ENDIF(NOT GTK_CFLAGS)
 #**************************************************
+# Search for Gthread through PKG-Config
+#**************************************************
+MESSAGE(&quot;Checking for GTK&quot;)
+PKGCONFIG(gthread-2.0 GTHREAD_INCLUDE GTHREAD_LIB GTHREAD_LDFLAGS GTHREAD_CFLAGS)
+
+IF(NOT GTHREAD_CFLAGS)
+    MESSAGE(&quot;Could not find GTHREAD&quot;)
+    SET(GTK_FOUND FALSE)
+ELSE(NOT GTHREAD_CFLAGS)
+    SET(GTHREAD_LDFLAGS,${GTHREAD_LDFLAGS})
+    MESSAGE(&quot;GTHREAD Found&quot;)
+ENDIF(NOT GTHREAD_CFLAGS)
+#**************************************************
 # Search for QT4 
 #**************************************************
 MESSAGE(&quot;Checking for QT4&quot;)
@@ -80,7 +110,6 @@
 include_DIRECTORIES(${CMAKE_CURRENT_BINARY_DIR} ${CMAKE_CURRENT_BINARY_DIR}/avidemux ${CMAKE_CURRENT_BINARY_DIR}/avidemux/ADM_libraries)
 include_directories(${CMAKE_CURRENT_BINARY_DIR}/avidemux/ADM_libraries/ADM_utilities/ ${CMAKE_CURRENT_BINARY_DIR}/avidemux/ADM_libraries/ADM_lavutil)
 include_directories(${CMAKE_CURRENT_BINARY_DIR}/avidemux/ADM_libraries/ADM_lavcodec  )
-SET_LAVCODEC_FLAGS()
 #**********************************************
 # Some CFLAGS
 #**********************************************

Modified: branches/avidemux_2.4_branch/avidemux/ADM_editor/CMakeLists.txt
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_editor/CMakeLists.txt	2007-05-28 13:03:46 UTC (rev 3158)
+++ branches/avidemux_2.4_branch/avidemux/ADM_editor/CMakeLists.txt	2007-05-28 13:06:07 UTC (rev 3159)
@@ -2,3 +2,4 @@
 SET(ADM_editor_SRCS ADM_edAudio.cpp  ADM_edCache.cpp      ADM_edIdentify.cpp  ADM_edLoadSave.cpp  ADM_edSearch.cpp  ADM_Video.cpp
 ADMedAVIAUD.cpp  ADM_edFrameType.cpp  ADM_edit.cpp        ADM_edRender.cpp    ADM_edStub.cpp)
 ADD_LIBRARY(ADM_editor STATIC ${ADM_editor_SRCS})
+include_directories(../ADM_inputs)

Modified: branches/avidemux_2.4_branch/avidemux/ADM_inputs/ADM_asf/CMakeLists.txt
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_inputs/ADM_asf/CMakeLists.txt	2007-05-28 13:03:46 UTC (rev 3158)
+++ branches/avidemux_2.4_branch/avidemux/ADM_inputs/ADM_asf/CMakeLists.txt	2007-05-28 13:06:07 UTC (rev 3159)
@@ -1,4 +1,4 @@
 
 SET(ADM_asf_SRCS 
 ADM_asf_audio.cpp  ADM_asfChunk.cpp  ADM_asf.cpp  ADM_asfPacket.cpp)
-ADD_LIBRARY(ADM_asf STATIC ${ADM_asf_SRCS})
+ADD_LIBRARY(ADM_asf STATIC ${ADM_asf_SRCS})
\ No newline at end of file

Modified: branches/avidemux_2.4_branch/avidemux/ADM_inputs/ADM_nuv/CMakeLists.txt
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_inputs/ADM_nuv/CMakeLists.txt	2007-05-28 13:03:46 UTC (rev 3158)
+++ branches/avidemux_2.4_branch/avidemux/ADM_inputs/ADM_nuv/CMakeLists.txt	2007-05-28 13:06:07 UTC (rev 3159)
@@ -1,6 +1,7 @@
 
 SET(ADM_nuv_SRCS 
-ADM_nuvAudio.cpp  ADM_nuv.cpp  RTjpegN.cpp  RToldformat.cpp)
+ADM_nuvAudio.cpp  ADM_nuv.cpp  minilzo.c  RTjpeg.c  RTjpegN.cpp  RToldformat.cpp)
+
 ADD_LIBRARY(ADM_nuv STATIC ${ADM_nuv_SRCS})
 include_directories(..)
 include_directories(../../ADM_userInterfaces/ADM_commonUI)

Modified: branches/avidemux_2.4_branch/avidemux/ADM_inputs/CMakeLists.txt
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_inputs/CMakeLists.txt	2007-05-28 13:03:46 UTC (rev 3158)
+++ branches/avidemux_2.4_branch/avidemux/ADM_inputs/CMakeLists.txt	2007-05-28 13:06:07 UTC (rev 3159)
@@ -1,12 +1,61 @@
-add_subdirectory(ADM_asf)
-add_subdirectory(ADM_avsproxy)
-add_subdirectory(ADM_h263)
-add_subdirectory(ADM_inpics)
-add_subdirectory(ADM_matroska)
-add_subdirectory(ADM_mpegdemuxer)
-add_subdirectory(ADM_nuv)
-add_subdirectory(ADM_ogm)
-add_subdirectory(ADM_openDML)
+SET(ADM_inputs_SRCS 
+ADM_openDML/ADM_openDML.cpp
+ADM_openDML/ADM_opendml_reorder.cpp
+ADM_openDML/ADM_odml_odml.cpp
+ADM_openDML/ADM_openDMLDepack.cpp
+ADM_openDML/ADM_riff.cpp
+ADM_openDML/ADM_odml_audio.cpp
+ADM_openDML/ADM_odml_regular.cpp
+ADM_openDML/ADM_opendml_reindex.cpp
+ADM_mp4/ADM_mp4Indexer.cpp
+ADM_mp4/ADM_atom.cpp
+ADM_mp4/ADM_mp4.cpp
+ADM_mp4/ADM_mp4audio.cpp
+ADM_mp4/ADM_mp4Analyzer.cpp
+ADM_mp4/ADM_infoextractor.cpp
+ADM_mp4/ADM_mp4Leaf.cpp
+ADM_matroska/ADM_mkv.cpp
+ADM_matroska/ADM_mkv_audio.cpp
+ADM_matroska/ebml.cpp
+ADM_matroska/ADM_mkvTrackType.cpp
+ADM_matroska/ADM_mkvEntries.cpp
+ADM_matroska/mkv_tags.cpp
+ADM_matroska/ADM_mkvIndexer.cpp
+ADM_h263/ADM_mp4.cpp
+ADM_h263/ADM_h263.cpp
+ADM_h263/bitsRead.cpp
+ADM_mpegdemuxer/dmx_indexer_mpeg2.cpp
+ADM_mpegdemuxer/dmx_indexer.cpp
+ADM_mpegdemuxer/dmx_demuxerES.cpp
+ADM_mpegdemuxer/dmx_audio.cpp
+ADM_mpegdemuxer/dmx_indexer_h264.cpp
+ADM_mpegdemuxer/dmx_video.cpp
+ADM_mpegdemuxer/dmx_io.cpp
+ADM_mpegdemuxer/dmx_probe.cpp
+ADM_mpegdemuxer/dmx_demuxer.cpp
+ADM_mpegdemuxer/dmx_identify.cpp
+ADM_mpegdemuxer/dmx_demuxerPS.cpp
+ADM_mpegdemuxer/dmx_probeTS.cpp
+ADM_mpegdemuxer/dmx_demuxerTS.cpp
+ADM_mpegdemuxer/dmx_demuxerMSDVR.cpp
+ADM_ogm/ADM_ogm.cpp
+ADM_ogm/ADM_ogmpages.cpp
+ADM_ogm/ADM_ogmAudio.cpp
+ADM_ogm/ADM_ogmreorder.cpp
+ADM_inpics/ADM_pics.cpp
+ADM_nuv/minilzo.c
+ADM_nuv/RTjpeg.c
+ADM_nuv/RTjpegN.cpp
+ADM_nuv/ADM_nuvAudio.cpp
+ADM_nuv/ADM_nuv.cpp
+ADM_nuv/RToldformat.cpp
+ADM_asf/ADM_asfPacket.cpp
+ADM_asf/ADM_asfChunk.cpp
+ADM_asf/ADM_asf.cpp
+ADM_asf/ADM_asf_audio.cpp
+ADM_avsproxy/ADM_avsproxy_net.cpp
+ADM_avsproxy/ADM_avsproxy.cpp
+)
+ADD_LIBRARY(ADM_inputs STATIC ${ADM_inputs_SRCS})
+include_directories(./ )
 
-
-

Modified: branches/avidemux_2.4_branch/avidemux/ADM_libraries/ADM_lavcodec/i386/cputest.c
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_libraries/ADM_lavcodec/i386/cputest.c	2007-05-28 13:03:46 UTC (rev 3158)
+++ branches/avidemux_2.4_branch/avidemux/ADM_libraries/ADM_lavcodec/i386/cputest.c	2007-05-28 13:06:07 UTC (rev 3159)
@@ -83,7 +83,7 @@
         cpuid(1, eax, ebx, ecx, std_caps);
         if (std_caps &amp; (1&lt;&lt;23))
             rval |= MM_MMX;
-#if 1	    
+#if 0	    
         if (std_caps &amp; (1&lt;&lt;25))
             rval |= MM_MMXEXT | MM_SSE;
         if (std_caps &amp; (1&lt;&lt;26))

Modified: branches/avidemux_2.4_branch/avidemux/ADM_libraries/CMakeLists.txt
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_libraries/CMakeLists.txt	2007-05-28 13:03:46 UTC (rev 3158)
+++ branches/avidemux_2.4_branch/avidemux/ADM_libraries/CMakeLists.txt	2007-05-28 13:06:07 UTC (rev 3159)
@@ -1,16 +1,20 @@
-add_subdirectory(ADM_lavcodec)
-add_subdirectory(ADM_lavformat)
-add_subdirectory(ADM_lavutil)
-add_subdirectory(ADM_liba52)
-add_subdirectory(ADM_libass)
-add_subdirectory(ADM_libMad)
-add_subdirectory(ADM_libMpeg2Dec)
-add_subdirectory(ADM_libmpeg2enc)
-add_subdirectory(ADM_libswscale)
-add_subdirectory(ADM_libtwolame)
-add_subdirectory(ADM_libwrapper)
-add_subdirectory(ADM_lvemux)
-add_subdirectory(ADM_mplex)
-add_subdirectory(ADM_smjs)
-add_subdirectory(ADM_utilities)
-add_subdirectory(ADM_xvidratectl)
+subdirs (PREORDER ADM_lavcodec)
+subdirs (PREORDER ADM_lavformat)
+subdirs (PREORDER ADM_lavutil)
+subdirs (PREORDER ADM_liba52)
+subdirs (PREORDER ADM_libMad)
+subdirs (PREORDER ADM_libMpeg2Dec)
+subdirs (PREORDER ADM_libmpeg2enc)
+subdirs (PREORDER ADM_libswscale)
+subdirs (PREORDER ADM_libtwolame)
+subdirs (PREORDER ADM_libwrapper)
+subdirs (PREORDER ADM_lvemux)
+subdirs (PREORDER ADM_mplex)
+subdirs (PREORDER ADM_smjs)
+subdirs (PREORDER ADM_utilities)
+subdirs (PREORDER ADM_xvidratectl)
+subdirs (PREORDER ADM_libpostproc)
+
+if(FT_FOUND)
+subdirs (PREORDER ADM_libass)
+endif(FT_FOUND)

Modified: branches/avidemux_2.4_branch/avidemux/ADM_ocr/CMakeLists.txt
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_ocr/CMakeLists.txt	2007-05-28 13:03:46 UTC (rev 3158)
+++ branches/avidemux_2.4_branch/avidemux/ADM_ocr/CMakeLists.txt	2007-05-28 13:06:07 UTC (rev 3159)
@@ -2,3 +2,4 @@
 SET(ADM_ocr_SRCS 
 adm_glyph.cpp  adm_leftturn.cpp  ADM_vob2vobsub.cpp)
 ADD_LIBRARY(ADM_ocr STATIC ${ADM_ocr_SRCS})
+include_directories(../ADM_inputs)
\ No newline at end of file

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/CMakeLists.txt
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/CMakeLists.txt	2007-05-28 13:03:46 UTC (rev 3158)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/CMakeLists.txt	2007-05-28 13:06:07 UTC (rev 3159)
@@ -1,7 +1,15 @@
-include_directories(../../ADM_commonUI)
-include_directories(../../../ADM_inputs)
-
-SET(ADM_dialogNone_SRCS 
+################################
+#
+################################
+include(AdmLib)
+SET(ADM_LIB ADM_dialogNone)
+#
+SET(${ADM_LIB}_SRCS 
 alert_none.cpp  DIA_busy.cpp  DIA_encoding.cpp  DIA_flyDialog.cpp  DIA_indexing.cpp  DIA_none.cpp  DIA_working.cpp  OCR_none.cpp
 )
-ADD_LIBRARY(ADM_dialogNone STATIC ${ADM_dialogNone_SRCS})
+ADD_LIBRARY(${ADM_LIB} STATIC ${${ADM_LIB}_SRCS})
+ADD_ADM_LIB(${ADM_LIB} ADM_libraries)
+
+
+################################
+include_directories(../../../ADM_inputs)

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialogFactory/CMakeLists.txt
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialogFactory/CMakeLists.txt	2007-05-28 13:03:46 UTC (rev 3158)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialogFactory/CMakeLists.txt	2007-05-28 13:06:07 UTC (rev 3159)
@@ -1,6 +1,15 @@
-include_directories(../../)
-
-SET(ADM_dialogFactoryNone_SRCS 
+################################
+#
+################################
+include(AdmLib)
+SET(ADM_LIB ADM_dialogFactoryNone)
+#
+SET(${ADM_LIB}_SRCS 
 DIA_dialogFactory.cpp  FAC_toggle.cpp
 )
-ADD_LIBRARY(ADM_dialogFactoryNone STATIC ${ADM_dialogFactoryNone_SRCS})
+ADD_LIBRARY(${ADM_LIB} STATIC ${${ADM_LIB}_SRCS})
+ADD_ADM_LIB(${ADM_LIB} ADM_libraries)
+
+
+################################
+include_directories(../..)

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_NONE/ADM_filters/CMakeLists.txt
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_NONE/ADM_filters/CMakeLists.txt	2007-05-28 13:03:46 UTC (rev 3158)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_NONE/ADM_filters/CMakeLists.txt	2007-05-28 13:06:07 UTC (rev 3159)
@@ -1,4 +1,17 @@
 
-SET(ADM_filtersNone_SRCS filter_none.cpp)
-ADD_LIBRARY(ADM_filtersNone STATIC ${ADM_filtersNone_SRCS})
+################################
+#
+################################
+include(AdmLib)
+SET(ADM_LIB ADM_dialogFiltersNone)
+#
+SET(${ADM_LIB}_SRCS 
+filter_none
+)
+ADD_LIBRARY(${ADM_LIB} STATIC ${${ADM_LIB}_SRCS})
+ADD_ADM_LIB(${ADM_LIB} ADM_libraries)
+
+
+################################
+include_directories(../..)
 include_directories(../ADM_commonUI)

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_NONE/ADM_gui2/CMakeLists.txt
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_NONE/ADM_gui2/CMakeLists.txt	2007-05-28 13:03:46 UTC (rev 3158)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_NONE/ADM_gui2/CMakeLists.txt	2007-05-28 13:06:07 UTC (rev 3159)
@@ -1,6 +1,15 @@
-include_directories(../../ADM_commonUI)
-
-SET(ADM_guiNone_SRCS 
+################################
+#
+################################
+include(AdmLib)
+SET(ADM_LIB ADM_dialogGuiNone)
+#
+SET(${ADM_LIB}_SRCS 
 file_none.cpp  gui_none.cpp  preview_none.cpp
 )
-ADD_LIBRARY(ADM_guiNone STATIC ${ADM_guiNone_SRCS})
+ADD_LIBRARY(${ADM_LIB} STATIC ${${ADM_LIB}_SRCS})
+ADD_ADM_LIB(${ADM_LIB} ADM_libraries)
+
+
+################################
+#include_directories(../..)

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/CMakeLists.txt
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/CMakeLists.txt	2007-05-28 13:03:46 UTC (rev 3158)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/CMakeLists.txt	2007-05-28 13:06:07 UTC (rev 3159)
@@ -1,10 +1,17 @@
-
-SET(ADM_commonUI_SRCS 
+################################
+#
+################################
+include(AdmLib)
+SET(ADM_LIB ADM_commonUI)
+#
+SET(${ADM_LIB}_SRCS
 DIA_audioconfig.cpp   DIA_DVDff.cpp           DIA_flyContrast.cpp  DIA_flySrtPos.cpp   DIA_mjpeg.cpp     DIA_resizeWiz.cpp  DIA_v2v.cpp
 DIA_audioFilter.cpp   DIA_enter.cpp           DIA_flyCrop.cpp      DIA_gototime.cpp    DIA_postproc.cpp  DIA_srt.cpp        GUI_render.cpp
 DIA_bitrateHisto.cpp  DIA_flyAsharp.cpp       DIA_flyDialog.cpp    DIA_lavcodec.cpp    DIA_prefs.cpp     DIA_SVCD.cpp       GUI_sdlRender.cpp
 DIA_builtin.cpp       DIA_flyChromaShift.cpp  DIA_flyHue.cpp       DIA_lavDecoder.cpp  DIA_requant.cpp   DIA_tdeint.cpp     GUI_xvRender.cpp
 )
+ADD_LIBRARY(${ADM_LIB} STATIC ${${ADM_LIB}_SRCS})
+ADD_ADM_LIB(${ADM_LIB} ADM_userInterfaces)
 
-ADD_LIBRARY(ADM_commonUI STATIC ${ADM_commonUI_SRCS})
+####################################&quot;
 include_directories(./..)

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/CMakeLists.txt
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/CMakeLists.txt	2007-05-28 13:03:46 UTC (rev 3158)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/CMakeLists.txt	2007-05-28 13:06:07 UTC (rev 3159)
@@ -1,8 +1,8 @@
-#if(QT4_FOUND)
-#add_subdirectory(ADM_QT4)
-#endifif(QT4_FOUND)
+subdirs(PREORDER ADM_NONE)
+subdirs(PREORDER ADM_commonUI)
 
-add_subdirectory(ADM_NONE)
-add_subdirectory(ADM_commonUI)
+if(GTK_FOUND)
+subdirs(PREORDER ADM_GTK)
+endif(GTK_FOUND)
 
 include_directories(ADM_commonUI)

Modified: branches/avidemux_2.4_branch/avidemux/ADM_video/CMakeLists.txt
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_video/CMakeLists.txt	2007-05-28 13:03:46 UTC (rev 3158)
+++ branches/avidemux_2.4_branch/avidemux/ADM_video/CMakeLists.txt	2007-05-28 13:06:07 UTC (rev 3159)
@@ -8,3 +8,4 @@
 ADM_vidClean.cpp        ADM_vidEqualizer.cpp  ADM_vidNull.cpp          ADM_vidSRTRender.cpp
 )
 ADD_LIBRARY(ADM_video STATIC ${ADM_video_SRCS})
+include_directories(../ADM_inputs)
\ No newline at end of file

Modified: branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/CMakeLists.txt
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/CMakeLists.txt	2007-05-28 13:03:46 UTC (rev 3158)
+++ branches/avidemux_2.4_branch/avidemux/ADM_videoFilter/CMakeLists.txt	2007-05-28 13:06:07 UTC (rev 3159)
@@ -8,5 +8,6 @@
 ADM_vidBSmear.cpp        ADM_vidDropOut.cpp          ADM_vidKernelDeint.cpp      ADM_vidMsmooth.cpp    ADM_vidSoften.cpp
 ADM_vidChroma.cpp        ADM_vidFade.cpp             ADM_vidLargeMedian.cpp      ADM_vidPalShift.cpp   ADM_vidStabilize.cpp
 ADM_vidDecDec.cpp        ADM_vidFastConvolution.cpp  ADM_vidLuma.cpp             ADM_vidPalSmart.cpp   ADM_vidSwapFields.cpp
+ADM_vidYadif_asm.c
 )
 ADD_LIBRARY(ADM_videoFilter STATIC ${ADM_videoFilter_SRCS})

Modified: branches/avidemux_2.4_branch/avidemux/CMakeLists.txt
===================================================================
--- branches/avidemux_2.4_branch/avidemux/CMakeLists.txt	2007-05-28 13:03:46 UTC (rev 3158)
+++ branches/avidemux_2.4_branch/avidemux/CMakeLists.txt	2007-05-28 13:06:07 UTC (rev 3159)
@@ -1,3 +1,10 @@
+##########################################################
+#
+#  Main CMake makefile for avidemux2
+#  It is not for the faint of heart and pretty ugly
+#
+##########################################################
+
 INCLUDE(Po)
 MESSAGE(&quot;GTK:&quot;${GTK_CFLAGS}&quot;GLIB:&quot;${GLIB_CFLAGS})
 
@@ -3,94 +10,133 @@
 SET(adm_EXE_SRCS ADM_preview.cpp  gtk_gui.cpp  gui_autodrive.cpp  GUI_jobs.cpp  gui_navigate.cpp  guiplay.cpp  gui_savenew.cpp  main.cpp )
 COMPILE_PO_FILES(${CMAKE_SOURCE_DIR}/po adm_EXE_SRCS)
+include_directories(ADM_userInterfaces/ADM_commonUI ADM_outputs)
+#
+# Normal subdirs, compile and link what is inside....
+#
+SET(ADM_SUBDIR 
+ADM_filter
+ADM_audiofilter 
+ADM_editor
+ADM_audiocodec 
+ADM_audio
+ADM_script 
 
+ADM_videoFilter
+ADM_filter
+ADM_video 
+ADM_colorspace 
+ADM_audiodevice
+ADM_ocr  
 
+ADM_outputs
+ADM_inputs
+ADM_encoder
+ADM_codecs
+ADM_requant 
+ADM_toolkit  
+ADM_osSupport  
+)
 
-SET(ADM_SUBDIR ADM_audiocodec ADM_audiodevice ADM_audiofilter ADM_codecs ADM_colorspace ADM_editor ADM_encoder ADM_filter   ADM_ocr ADM_osSupport  ADM_requant ADM_script ADM_toolkit  ADM_video ADM_videoFilter)
-#ADM_inputs ADM_outputs
 
-ADD_EXECUTABLE(avidemux2_cli ${adm_EXE_SRCS} )
-
 ########################################################
-# Custom Rule to force evaluation if *INPUT* SUBDIR*
+# Our exectuables
 ########################################################
+ADD_EXECUTABLE(avidemux2_cli ${adm_EXE_SRCS} )
+if(GTK_FOUND)
+ADD_EXECUTABLE(avidemux2_gtk ${adm_EXE_SRCS} )
+endif(GTK_FOUND)
 
-# add_subdirectory(ADM_inputs)
-# SET(ADM_INPUT_SUBDIR 
-# ADM_asf
-# ADM_avsproxy
-# ADM_h263
-# ADM_inpics
-# ADM_matroska
-# ADM_mp4
-# ADM_mpegdemuxer
-# ADM_nuv
-# ADM_ogm
-# ADM_openDML
-# )
-# FOREACH(_current ${ADM_INPUT_SUBDIR})
-# 
-# ADD_CUSTOM_TARGET(  ADM_buildInput ALL
-#                     COMMAND make
-#                     DEPENDS 
-#                     WORKING_DIRECTORY ${CMAKE_SOURCE_DIR}/avidemux/ADM_inputs
-#                     COMMENT &quot;Building inputs&quot;)
-# 
-# ENDFOREACH(_current ${ADM_SUBDIR})
-# 
-# add_subdirectory(ADM_userInterfaces)
-########################################################
-# Custom Rule to force evaluation if *CommonUI*
-########################################################
-# add_subdirectory(ADM_userInterfaces/ADM_commonUI)
-# 
-# 
-# add_subdirectory(ADM_userInterfaces/ADM_commonUI)
-# ADD_CUSTOM_TARGET(  ADM_buildInput ALL
-#                     COMMAND make
-#                     DEPENDS 
-#                     WORKING_DIRECTORY ${CMAKE_SOURCE_DIR}/avidemux/ADM_userInterfaces/ADM_commonUI
-#                     COMMENT &quot;Building commonUI&quot;)
+add_definitions(${GLIB_CFLAGS})
+###########################################
+# Build Regular Subdirs
+###########################################
+FOREACH(_current ${ADM_SUBDIR})
+subdirs (PREORDER ${_current})
+TARGET_LINK_LIBRARIES(avidemux2_cli ${_current})
+if(GTK_FOUND)
+TARGET_LINK_LIBRARIES(avidemux2_gtk ${_current})
+endif(GTK_FOUND)
 
-########################################################
-# Custom Rule to force evaluation if *None UI*
-########################################################
+ENDFOREACH(_current ${ADM_SUBDIR})
 
-# add_subdirectory(ADM_userInterfaces/ADM_NONE)
-# SET(ADM_NONE_SUBDIR 
-# ADM_dialog
-# ADM_dialogFactory
-# ADM_filters
-# ADM_gui2
-# )
-# FOREACH(_current ${ADM_NONE_SUBDIR})
-# 
-# ADD_CUSTOM_TARGET(  ADM_buildInput ALL
-#                     COMMAND make
-#                     DEPENDS 
-#                     WORKING_DIRECTORY ${CMAKE_SOURCE_DIR}/avidemux/ADM_userInterfaces/ADM_NONE/${_current}
-#                     COMMENT &quot;Building NONE&quot;)
-# 
-# ENDFOREACH(_current ${ADM_NONE_SUBDIR})
+###########################################
+# Construct ADM_libraries
+###########################################
+subdirs (PREORDER ADM_libraries)
+LINK_DIRECTORIES(ADM_libraries)
+SET(ADM_LIBRARIES
 
+ADM_lavformat
+ADM_lavcodec
+ADM_lavutil
+ADM_liba52
+ADM_libMad
+ADM_mplex
+ADM_libMpeg2Dec
+ADM_libmpeg2enc
+ADM_libswscale
+ADM_libtwolame
+ADM_libwrapper
+ADM_lvemux
+ADM_smjs
+ADM_utilities
+ADM_xvidratectl
+ADM_libpostproc
+)
+if(FT_FOUND)
+SET(ADM_LIBRARIES ${ADM_LIBRARIES}  ADM_libass)
+ENDIF(FT_FOUND)
 
-# ** User interfaces **
+FOREACH(_current ${ADM_LIBRARIES})
+TARGET_LINK_LIBRARIES(avidemux2_cli ${_current})
+if(GTK_FOUND)
+TARGET_LINK_LIBRARIES(avidemux2_gtk ${_current})
+endif(GTK_FOUND)
 
-add_definitions(${GLIB_CFLAGS})
+ENDFOREACH(_current ${ADM_SUBDIR})
 
-include_directories(ADM_userInterfaces/ADM_commonUI)
-include_directories(ADM_inputs)
-include_directories(ADM_outputs)
+###########################################
+# Construct ADM_userInterface
+###########################################
+subdirs (PREORDER ADM_userInterfaces)
 
-FOREACH(_current ${ADM_SUBDIR})
-add_subdirectory(${_current})
-ENDFOREACH(_current ${ADM_SUBDIR})
+LINK_DIRECTORIES(ADM_userInterfaces)
+LINK_DIRECTORIES(ADM_userInterfaces/ADM_NONE)
 
 
+TARGET_LINK_LIBRARIES(avidemux2_cli ADM_commonUI )
+TARGET_LINK_LIBRARIES(avidemux2_cli ADM_dialogNone )
+TARGET_LINK_LIBRARIES(avidemux2_cli ADM_dialogFactoryNone )
+TARGET_LINK_LIBRARIES(avidemux2_cli ADM_dialogFiltersNone )
+TARGET_LINK_LIBRARIES(avidemux2_cli ADM_dialogGuiNone )
 
-FOREACH(_current ${ADM_SUBDIR})
-TARGET_LINK_LIBRARIES(avidemux2_cli ${_current})
-ENDFOREACH(_current ${ADM_SUBDIR})
+if(GTK_FOUND)
+TARGET_LINK_LIBRARIES(avidemux2_gtk ADM_ocrGtk )
+TARGET_LINK_LIBRARIES(avidemux2_gtk ADM_ocr )
+TARGET_LINK_LIBRARIES(avidemux2_gtk ADM_commonUI )
+TARGET_LINK_LIBRARIES(avidemux2_gtk ADM_dialogGtk )
+TARGET_LINK_LIBRARIES(avidemux2_gtk ADM_filtersGtk )
+TARGET_LINK_LIBRARIES(avidemux2_gtk ADM_dialogFactoryGtk )
+TARGET_LINK_LIBRARIES(avidemux2_gtk ADM_gui2Gtk )
+TARGET_LINK_LIBRARIES(avidemux2_gtk ADM_toolkitGtk )
+TARGET_LINK_LIBRARIES(avidemux2_gtk ADM_commonUI )
+endif(GTK_FOUND)
 
+###########################################
+# Add external libs
+###########################################
+TARGET_LINK_LIBRARIES(avidemux2_cli ${GLIB_LDFLAGS} )
+LINK_DIRECTORIES(avidemux2_cli ${GLIB_LIB}  )
+TARGET_LINK_LIBRARIES(avidemux2_cli xml2 )
+if(GTK_FOUND)
+TARGET_LINK_LIBRARIES(avidemux2_gtk ${GLIB_LDFLAGS} )
+LINK_DIRECTORIES(avidemux2_gtk ${GLIB_LIB}  )
+TARGET_LINK_LIBRARIES(avidemux2_gtk xml2 )
+TARGET_LINK_LIBRARIES(avidemux2_gtk ${GTK_LDFLAGS} )
+TARGET_LINK_LIBRARIES(avidemux2_gtk ${GTHREAD_LDFLAGS} ) # FIXME
+endif(GTK_FOUND)
 
 
+# /EOF
 
+


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000453.html">[Avidemux-svn-commit] r3158 - in branches/avidemux_2.4_branch: . autononreg/dialogFactory avidemux/ADM_libraries avidemux/ADM_libraries/ADM_lavcodec avidemux/ADM_libraries/ADM_lavformat avidemux/ADM_libraries/ADM_lavutil avidemux/ADM_libraries/ADM_libMad avidemux/ADM_libraries/ADM_libMpeg2Dec avidemux/ADM_libraries/ADM_liba52 avidemux/ADM_libraries/ADM_libass avidemux/ADM_libraries/ADM_libmpeg2enc avidemux/ADM_libraries/ADM_libpostproc avidemux/ADM_libraries/ADM_libswscale avidemux/ADM_libraries/ADM_libtwolame avidemux/ADM_libraries/ADM_libwrapper avidemux/ADM_libraries/ADM_lvemux avidemux/ADM_libraries/ADM_mplex avidemux/ADM_libraries/ADM_smjs avidemux/ADM_libraries/ADM_utilities avidemux/ADM_libraries/ADM_xvidratectl avidemux/ADM_outputs avidemux/ADM_outputs/oplug_avi avidemux/ADM_outputs/oplug_mp4 avidemux/ADM_outputs/oplug_mpeg avidemux/ADM_outputs/oplug_mpegFF avidemux/ADM_outputs/oplug_ogm avidemux/ADM_userInterfaces/ADM_GTK avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog avidemux/A! DM_userInterfaces/ADM_GTK/ADM_dialogFactory avidemux/ADM_userInterfaces/ADM_GTK/ADM_filters avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2 avidemux/ADM_userInterfaces/ADM_GTK/ADM_ocr avidemux/ADM_userInterfaces/ADM_GTK/ADM_toolkit_gtk cmake
</A></li>
	<LI>Next message: <A HREF="000455.html">[Avidemux-svn-commit] r3160 - in	branches/avidemux_2.4_branch/avidemux: .	ADM_libraries/ADM_libass ADM_libraries/ADM_libtwolame	ADM_libraries/ADM_mplex ADM_ocr ADM_script	ADM_userInterfaces/ADM_GTK/ADM_dialog	ADM_userInterfaces/ADM_NONE/ADM_dialog ADM_video ADM_videoFilter
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#454">[ date ]</a>
              <a href="thread.html#454">[ thread ]</a>
              <a href="subject.html#454">[ subject ]</a>
              <a href="author.html#454">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">More information about the Avidemux-svn-commit
mailing list</a><br>
</body></html>
