<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Avidemux-svn-commit] r3119 - in	branches/avidemux_2.4_branch/avidemux: ADM_script	ADM_userInterfaces/ADM_GTK/ADM_dialogFactory	ADM_userInterfaces/ADM_NONE/ADM_dialogFactory	ADM_userInterfaces/ADM_QT4/ADM_dialogFactory	ADM_userInterfaces/ADM_commonUI
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/avidemux-svn-commit/2007-May/index.html" >
   <LINK REL="made" HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r3119%20-%20in%0A%09branches/avidemux_2.4_branch/avidemux%3A%20ADM_script%0A%09ADM_userInterfaces/ADM_GTK/ADM_dialogFactory%0A%09ADM_userInterfaces/ADM_NONE/ADM_dialogFactory%0A%09ADM_userInterfaces/ADM_QT4/ADM_dialogFactory%0A%09ADM_userInterfaces/ADM_commonUI&In-Reply-To=%3C200705201200.l4KC0dxk012362%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000413.html">
   <LINK REL="Next"  HREF="000415.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Avidemux-svn-commit] r3119 - in	branches/avidemux_2.4_branch/avidemux: ADM_script	ADM_userInterfaces/ADM_GTK/ADM_dialogFactory	ADM_userInterfaces/ADM_NONE/ADM_dialogFactory	ADM_userInterfaces/ADM_QT4/ADM_dialogFactory	ADM_userInterfaces/ADM_commonUI</H1>
    <B>mean at BerliOS</B> 
    <A HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r3119%20-%20in%0A%09branches/avidemux_2.4_branch/avidemux%3A%20ADM_script%0A%09ADM_userInterfaces/ADM_GTK/ADM_dialogFactory%0A%09ADM_userInterfaces/ADM_NONE/ADM_dialogFactory%0A%09ADM_userInterfaces/ADM_QT4/ADM_dialogFactory%0A%09ADM_userInterfaces/ADM_commonUI&In-Reply-To=%3C200705201200.l4KC0dxk012362%40sheep.berlios.de%3E"
       TITLE="[Avidemux-svn-commit] r3119 - in	branches/avidemux_2.4_branch/avidemux: ADM_script	ADM_userInterfaces/ADM_GTK/ADM_dialogFactory	ADM_userInterfaces/ADM_NONE/ADM_dialogFactory	ADM_userInterfaces/ADM_QT4/ADM_dialogFactory	ADM_userInterfaces/ADM_commonUI">mean at mail.berlios.de
       </A><BR>
    <I>Sun May 20 14:00:39 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000413.html">[Avidemux-svn-commit] r3118 -	branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui
</A></li>
        <LI>Next message: <A HREF="000415.html">[Avidemux-svn-commit] r3120 -	branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#414">[ date ]</a>
              <a href="thread.html#414">[ thread ]</a>
              <a href="subject.html#414">[ subject ]</a>
              <a href="author.html#414">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: mean
Date: 2007-05-20 14:00:33 +0200 (Sun, 20 May 2007)
New Revision: 3119

Modified:
   branches/avidemux_2.4_branch/avidemux/ADM_script/ADM_JSFunctions.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_integer.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialogFactory/FAC_toggle.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_integer.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_factory.h
Log:
test function for customSlider

Modified: branches/avidemux_2.4_branch/avidemux/ADM_script/ADM_JSFunctions.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_script/ADM_JSFunctions.cpp	2007-05-20 11:59:50 UTC (rev 3118)
+++ branches/avidemux_2.4_branch/avidemux/ADM_script/ADM_JSFunctions.cpp	2007-05-20 12:00:33 UTC (rev 3119)
@@ -81,6 +81,7 @@
 JSBool facHex(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
 JSBool facDirSel(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
 JSBool facButton(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
+JSBool facSlider(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
 JSBool crashTest(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
 JSBool assertTest(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
 
@@ -114,6 +115,7 @@
   {&quot;dialogFactoryFrame&quot;,       facFrame,        0},
   {&quot;dialogFactoryHex&quot;,       facHex,        0},
   {&quot;dialogFactoryButton&quot;,       facButton,        0},
+  {&quot;dialogFactorySlider&quot;,       facSlider,        0},
   {&quot;crashTest&quot;,               crashTest,        0},
   {&quot;assertTest&quot;,               assertTest,        0},
   {0}
@@ -663,6 +665,21 @@
   
   return JS_TRUE;
 }
+JSBool facSlider(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
+{
+  uint32_t val=4;
+      diaElemSlider slide(&amp;val,&quot;foo&quot;, 0,10);
+      
+      diaElem *elems[]={&amp;slide   };
+  if(diaFactoryRun(&quot;Test Slider&quot;,1,elems))
+  {
+    *rval = BOOLEAN_TO_JSVAL(1);
+    
+  }else
+    *rval = BOOLEAN_TO_JSVAL(0);
+  
+  return JS_TRUE;
+}
 JSBool facRoText(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
 {
     

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_integer.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_integer.cpp	2007-05-20 11:59:50 UTC (rev 3118)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_integer.cpp	2007-05-20 12:00:33 UTC (rev 3119)
@@ -171,5 +171,26 @@
   gtk_widget_set_sensitive(GTK_WIDGET(myWidget),onoff);
 }
 
+//****************************************************
+diaElemSlider::diaElemSlider(uint32_t *value,const char *toggleTitle, uint32_t min,uint32_t max,const char *tip)
+  : diaElem(ELEM_SLIDER)
+{
+ }
+ 
 
+diaElemSlider::~diaElemSlider()
+{
+}
+void diaElemSlider::setMe(void *dialog, void *opaque,uint32_t line)
+{
+}
+void diaElemSlider::getMe(void)
+{
+
+}
+
+void diaElemSlider::enable(uint32_t onoff) 
+{
+}
+
 //EOF

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialogFactory/FAC_toggle.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialogFactory/FAC_toggle.cpp	2007-05-20 11:59:50 UTC (rev 3118)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialogFactory/FAC_toggle.cpp	2007-05-20 12:00:33 UTC (rev 3119)
@@ -391,4 +391,26 @@
 {
 
 }
+//***
+diaElemSlider::diaElemSlider(uint32_t *value,const char *toggleTitle, uint32_t min,uint32_t max,const char *tip)
+  : diaElem(ELEM_SLIDER)
+{
+ }
+ 
+
+diaElemSlider::~diaElemSlider()
+{
+}
+void diaElemSlider::setMe(void *dialog, void *opaque,uint32_t line)
+{
+}
+void diaElemSlider::getMe(void)
+{
+
+}
+
+void diaElemSlider::enable(uint32_t onoff) 
+{
+}
+
 //EOF

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_integer.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_integer.cpp	2007-05-20 11:59:50 UTC (rev 3118)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_integer.cpp	2007-05-20 12:00:33 UTC (rev 3119)
@@ -25,6 +25,7 @@
 #include &lt;QSpinBox&gt;
 #include &lt;QGridLayout&gt;
 #include &lt;QLabel&gt;
+#include &lt;QSlider&gt;
 
 #include &quot;default.h&quot;
 #include &quot;ADM_commonUI/DIA_factory.h&quot;
@@ -142,4 +143,88 @@
   else
     box-&gt;setDisabled(1);
 }
+//********************************************
+#if 0
+class diaElemSlider : public diaElem
+{
+  protected:
+    
+    uint32_t _min,_max;
+public:
+            diaElemSlider(uint32_t *value,const char *toggleTitle, uint32_t min,uint32_t max,const char *tip=NULL);
+  virtual   ~diaElemSlider() ;
+  void      setMe(void *dialog, void *opaque,uint32_t line);
+  void      getMe(void);
+  void      enable(uint32_t onoff) ;
+};
+#endif
+#include &quot;../ADM_gui/ADM_qslider.h&quot;
+
+#define ADM_TEST_ADM_SLIDER
+#ifdef ADM_TEST_ADM_SLIDER
+#define MYSLIDERTYPE  ADM_QSlider
+#else
+#define MYSLIDERTYPE  QSlider
+#endif
+             
+diaElemSlider::diaElemSlider(uint32_t *value,const char *toggleTitle, uint32_t min,uint32_t max,const char *tip)
+  : diaElem(ELEM_SLIDER)
+{
+  param=(void *)value;
+  paramTitle=shortkey(toggleTitle);
+  this-&gt;_min=min;
+  this-&gt;_max=max;
+  this-&gt;tip=tip;
+  
+ }
+ 
+
+diaElemSlider::~diaElemSlider()
+{ 
+  if(paramTitle)
+    delete paramTitle;
+}
+void diaElemSlider::setMe(void *dialog, void *opaque,uint32_t line)
+{
+  MYSLIDERTYPE *box=new MYSLIDERTYPE((QWidget *)dialog);
+  box-&gt;setOrientation ( Qt::Horizontal );
+  
+  QGridLayout *layout=(QGridLayout*) opaque;
+ myWidget=(void *)box; 
+   
+ box-&gt;setMinimum(_min);
+ box-&gt;setMaximum(_max);
+ box-&gt;setValue(*(uint32_t *)param);
+#ifdef ADM_TEST_ADM_SLIDER
+  box-&gt;setNbFrames(_max); 
+  box-&gt;setA(_max/3);
+  box-&gt;setB((_max*2)/3);
+#endif
+ box-&gt;show();
+ 
+ QLabel *text=new QLabel( this-&gt;paramTitle,(QWidget *)dialog);
+ text-&gt;setBuddy(box);
+ layout-&gt;addWidget(text,line,0);
+ layout-&gt;addWidget(box,line,1);
+}
+void diaElemSlider::getMe(void)
+{
+  uint32_t val;
+ MYSLIDERTYPE *box=(MYSLIDERTYPE *)myWidget;
+ val=box-&gt;value();
+ if(val&lt;_min) val=_min;
+ if(val&gt;_max) val=_max;
+ *(uint32_t *)param=val;
+}
+
+void diaElemSlider::enable(uint32_t onoff) 
+{
+  MYSLIDERTYPE *box=(MYSLIDERTYPE *)myWidget;
+  ADM_assert(box);
+  if(onoff)
+    box-&gt;setEnabled(1);
+  else
+    box-&gt;setDisabled(1);
+}
 //EOF
+

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_factory.h
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_factory.h	2007-05-20 11:59:50 UTC (rev 3118)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_factory.h	2007-05-20 12:00:33 UTC (rev 3119)
@@ -37,6 +37,7 @@
   ELEM_TOGGLE_UINT,
   ELEM_TOGGLE_INT,
   ELEM_BUTTON,
+  ELEM_SLIDER,
   ELEM_MAX=ELEM_TOGGLE
 };
 typedef void ADM_FAC_CALLBACK(void *cookie);
@@ -88,6 +89,19 @@
   void      getMe(void);
   void      enable(uint32_t onoff) ;
 };
+/************************************/
+class diaElemSlider : public diaElem
+{
+  protected:
+    
+    uint32_t _min,_max;
+public:
+            diaElemSlider(uint32_t *value,const char *toggleTitle, uint32_t min,uint32_t max,const char *tip=NULL);
+  virtual   ~diaElemSlider() ;
+  void      setMe(void *dialog, void *opaque,uint32_t line);
+  void      getMe(void);
+  void      enable(uint32_t onoff) ;
+};
 /*********************************************/
 class diaElemToggle : public diaElem
 {


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000413.html">[Avidemux-svn-commit] r3118 -	branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui
</A></li>
	<LI>Next message: <A HREF="000415.html">[Avidemux-svn-commit] r3120 -	branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#414">[ date ]</a>
              <a href="thread.html#414">[ thread ]</a>
              <a href="subject.html#414">[ subject ]</a>
              <a href="author.html#414">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">More information about the Avidemux-svn-commit
mailing list</a><br>
</body></html>
