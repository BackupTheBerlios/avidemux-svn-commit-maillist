<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Avidemux-svn-commit] r3147 - in	branches/avidemux_2.4_branch/avidemux: . ADM_audio	ADM_osSupport ADM_video
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/avidemux-svn-commit/2007-May/index.html" >
   <LINK REL="made" HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r3147%20-%20in%0A%09branches/avidemux_2.4_branch/avidemux%3A%20.%20ADM_audio%0A%09ADM_osSupport%20ADM_video&In-Reply-To=%3C200705261103.l4QB32dT029871%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000441.html">
   <LINK REL="Next"  HREF="000443.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Avidemux-svn-commit] r3147 - in	branches/avidemux_2.4_branch/avidemux: . ADM_audio	ADM_osSupport ADM_video</H1>
    <B>mean at BerliOS</B> 
    <A HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r3147%20-%20in%0A%09branches/avidemux_2.4_branch/avidemux%3A%20.%20ADM_audio%0A%09ADM_osSupport%20ADM_video&In-Reply-To=%3C200705261103.l4QB32dT029871%40sheep.berlios.de%3E"
       TITLE="[Avidemux-svn-commit] r3147 - in	branches/avidemux_2.4_branch/avidemux: . ADM_audio	ADM_osSupport ADM_video">mean at mail.berlios.de
       </A><BR>
    <I>Sat May 26 13:03:02 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000441.html">[Avidemux-svn-commit] r3146 - in	branches/avidemux_2.4_branch/avidemux: . ADM_audiofilter	ADM_editor ADM_filter ADM_libraries/ADM_libwrapper	ADM_libraries/ADM_mplex ADM_libraries/ADM_utilities	ADM_requant ADM_toolkit
</A></li>
        <LI>Next message: <A HREF="000443.html">[Avidemux-svn-commit] r3148 - branches/avidemux_2.4_branch
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#442">[ date ]</a>
              <a href="thread.html#442">[ thread ]</a>
              <a href="subject.html#442">[ subject ]</a>
              <a href="author.html#442">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: mean
Date: 2007-05-26 13:03:01 +0200 (Sat, 26 May 2007)
New Revision: 3147

Modified:
   branches/avidemux_2.4_branch/avidemux/ADM_audio/audio_packetizer.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_osSupport/ADM_crashdump.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_osSupport/ADM_fileio.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_osSupport/ADM_misc.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_osSupport/ADM_misc.h
   branches/avidemux_2.4_branch/avidemux/ADM_osSupport/ADM_quota.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_osSupport/TLK_clock.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_osSupport/win32.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidAnimated.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidSRTload.cpp
   branches/avidemux_2.4_branch/avidemux/avi_vars.h
   branches/avidemux_2.4_branch/avidemux/gtk_gui.cpp
   branches/avidemux_2.4_branch/avidemux/main.cpp
Log:
cygmangling-&gt;adm_win32

Modified: branches/avidemux_2.4_branch/avidemux/ADM_audio/audio_packetizer.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_audio/audio_packetizer.cpp	2007-05-26 11:01:30 UTC (rev 3146)
+++ branches/avidemux_2.4_branch/avidemux/ADM_audio/audio_packetizer.cpp	2007-05-26 11:03:01 UTC (rev 3147)
@@ -24,7 +24,7 @@
 #include &lt;string.h&gt;
 #include &lt;ADM_assert.h&gt;
 #include &lt;math.h&gt;
-#ifdef CYG_MANGLING
+#ifdef ADM_WIN32
 #include &lt;io.h&gt;
 #endif
 

Modified: branches/avidemux_2.4_branch/avidemux/ADM_osSupport/ADM_crashdump.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_osSupport/ADM_crashdump.cpp	2007-05-26 11:01:30 UTC (rev 3146)
+++ branches/avidemux_2.4_branch/avidemux/ADM_osSupport/ADM_crashdump.cpp	2007-05-26 11:03:01 UTC (rev 3147)
@@ -37,7 +37,7 @@
 static void saveCrashProject(void);
 extern char *ADM_getBaseDir(void);
 extern void A_parseECMAScript(const char *name);
-#ifdef CYG_MANGLING
+#ifdef ADM_WIN32
 void installSigHandler()
 {
 

Modified: branches/avidemux_2.4_branch/avidemux/ADM_osSupport/ADM_fileio.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_osSupport/ADM_fileio.cpp	2007-05-26 11:01:30 UTC (rev 3146)
+++ branches/avidemux_2.4_branch/avidemux/ADM_osSupport/ADM_fileio.cpp	2007-05-26 11:03:01 UTC (rev 3147)
@@ -50,7 +50,7 @@
 FILE  *ADM_fopen (const char *file, const char *mode)
 {
   FILE *f;
-#ifndef CYG_MANGLING
+#ifndef ADM_WIN32
   return fopen(file,mode); 
 #else
   
@@ -73,7 +73,7 @@
 int baseDirDone=0;
 int jobDirDone=0;
 int customDirDone=0;
-#ifdef CYG_MANGLING
+#ifdef ADM_WIN32
 const char *ADM_DIR_NAME=&quot;\\avidemux&quot;;
 #else
 const char *ADM_DIR_NAME=&quot;/.avidemux&quot;;
@@ -92,7 +92,7 @@
   char *rootDir;
   rootDir=ADM_getBaseDir();
   strncpy(customdir,rootDir,1023);
-#if defined(CYG_MANGLING)
+#if defined(ADM_WIN32)
   strcat(customdir,&quot;\\custom&quot;); 
 #else
   strcat(customdir,&quot;/custom&quot;);
@@ -116,7 +116,7 @@
   char *rootDir;
   rootDir=ADM_getBaseDir();
   strncpy(jobdir,rootDir,1023);
-#if defined(CYG_MANGLING)
+#if defined(ADM_WIN32)
   strcat(jobdir,&quot;\\jobs&quot;); 
 #else
   strcat(jobdir,&quot;/jobs&quot;);
@@ -140,7 +140,7 @@
 //
         if(baseDirDone) return basedir;
 // Get the base directory
-#if defined(CYG_MANGLING)
+#if defined(ADM_WIN32)
         if( ! (home=getenv(&quot;USERPROFILE&quot;)) )
         {
           GUI_Error_HIG(_(&quot;Oops&quot;),_(&quot;can't determine $USERPROFILE.&quot;));
@@ -189,7 +189,7 @@
                   closedir(dir);
                   return 1;
               }
-#if defined(CYG_MANGLING)
+#if defined(ADM_WIN32)
                 if(mkdir(dirname))
                 {
                     printf(&quot;Oops: mkdir failed on %s\n&quot;,dirname);   
@@ -294,14 +294,14 @@
 	{
 		out=new char [strlen(path)+2];
 		strcpy(out,path);
-#ifndef CYG_MANGLING		
+#ifndef ADM_WIN32		
 		strcat(out,&quot;/&quot;);
 #else
 		strcat(out,&quot;\\&quot;);
 #endif	
 		printf(&quot;\n Canonizing null string ??? (%s)\n&quot;,out);
 	}else if(tmpname[0]=='/'
-#if defined(CYG_MANGLING)
+#if defined(ADM_WIN32)
 		|| tmpname[1]==':'
 #endif	
 	
@@ -313,7 +313,7 @@
 	}else{
 		out=new char[strlen(path)+strlen(tmpname)+6];
 		strcpy(out,path);
-#ifndef CYG_MANGLING		
+#ifndef ADM_WIN32		
 		strcat(out,&quot;/&quot;);
 #else
 		strcat(out,&quot;\\&quot;);
@@ -332,7 +332,7 @@
 		int len=strlen(str);
 		if(len&lt;=1) return;
 		len--;
-#ifndef CYG_MANGLING		
+#ifndef ADM_WIN32		
 		while( *(str+len)!='/' &amp;&amp; len)
 #else
 	while( *(str+len)!='\\' &amp;&amp; len)
@@ -351,7 +351,7 @@
 {
 	char *filename;
         char *filename2;
-#ifndef CYG_MANGLING		
+#ifndef ADM_WIN32		
 	filename = strrchr(str, '/');
         
 #else

Modified: branches/avidemux_2.4_branch/avidemux/ADM_osSupport/ADM_misc.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_osSupport/ADM_misc.cpp	2007-05-26 11:01:30 UTC (rev 3146)
+++ branches/avidemux_2.4_branch/avidemux/ADM_osSupport/ADM_misc.cpp	2007-05-26 11:03:01 UTC (rev 3147)
@@ -23,7 +23,7 @@
 #include &lt;time.h&gt;
 #include &lt;math.h&gt;
 #include &lt;string.h&gt;
-#ifndef CYG_MANGLING
+#ifndef ADM_WIN32
 #include &lt;unistd.h&gt;
 #endif
 //#include &lt;gtk/gtk.h&gt;
@@ -322,12 +322,12 @@
   
 }
 
-bool shutdown(void)
-{
-#ifdef CYG_MANGLING
-	return (shutdown_win32() == 0);
-#else
-	return (system(&quot;shutdown -P 0&quot;) == 0);
-#endif
+bool shutdown(void)
+{
+#ifdef ADM_WIN32
+	return (shutdown_win32() == 0);
+#else
+	return (system(&quot;shutdown -P 0&quot;) == 0);
+#endif
 }
 //EOF

Modified: branches/avidemux_2.4_branch/avidemux/ADM_osSupport/ADM_misc.h
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_osSupport/ADM_misc.h	2007-05-26 11:01:30 UTC (rev 3146)
+++ branches/avidemux_2.4_branch/avidemux/ADM_osSupport/ADM_misc.h	2007-05-26 11:03:01 UTC (rev 3147)
@@ -73,7 +73,7 @@
 	#endif
 #endif
 
-#ifdef CYG_MANGLING
+#ifdef ADM_WIN32
 	#define PRIO_MIN -20
 	#define PRIO_MAX 20
 	#define PRIO_PROCESS 0

Modified: branches/avidemux_2.4_branch/avidemux/ADM_osSupport/ADM_quota.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_osSupport/ADM_quota.cpp	2007-05-26 11:01:30 UTC (rev 3146)
+++ branches/avidemux_2.4_branch/avidemux/ADM_osSupport/ADM_quota.cpp	2007-05-26 11:03:01 UTC (rev 3147)
@@ -73,7 +73,7 @@
 	while( !FD ){
 		FD = fopen (path,mode);
 		if( !FD &amp;&amp; (errno == ENOSPC 
-#ifndef CYG_MANGLING
+#ifndef ADM_WIN32
 || errno == EDQUOT
 #endif
 ) ){
@@ -156,7 +156,7 @@
 			continue;
 		}
 		if( rc == -1 &amp;&amp; (errno == ENOSPC 
-#ifndef CYG_MANGLING
+#ifndef ADM_WIN32
 || errno == EDQUOT
 #endif
 ) ){

Modified: branches/avidemux_2.4_branch/avidemux/ADM_osSupport/TLK_clock.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_osSupport/TLK_clock.cpp	2007-05-26 11:01:30 UTC (rev 3146)
+++ branches/avidemux_2.4_branch/avidemux/ADM_osSupport/TLK_clock.cpp	2007-05-26 11:03:01 UTC (rev 3147)
@@ -47,7 +47,7 @@
 static struct timeval _itimev;
 static uint32_t getAbsTime( void );
 
-#ifndef CYG_MANGLING
+#ifndef ADM_WIN32
 #include &quot;unistd.h&quot;
 void ADM_usleep(unsigned long us)
 {

Modified: branches/avidemux_2.4_branch/avidemux/ADM_osSupport/win32.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_osSupport/win32.cpp	2007-05-26 11:01:30 UTC (rev 3146)
+++ branches/avidemux_2.4_branch/avidemux/ADM_osSupport/win32.cpp	2007-05-26 11:03:01 UTC (rev 3147)
@@ -6,7 +6,7 @@
 #include &quot;ADM_misc.h&quot;
 
 
-#ifdef CYG_MANGLING
+#ifdef ADM_WIN32
 #include &quot;windows.h&quot;
 #include &quot;winbase.h&quot;
 #include &quot;io.h&quot;

Modified: branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidAnimated.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidAnimated.cpp	2007-05-26 11:01:30 UTC (rev 3146)
+++ branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidAnimated.cpp	2007-05-26 11:03:01 UTC (rev 3147)
@@ -125,7 +125,7 @@
             MKP(isNTSC,0);
             MKP(vignetteW,160);
             MKP(vignetteH,120);
-#ifdef CYG_MANGLING
+#ifdef ADM_WIN32
        MKP(backgroundImg,(ADM_filename *)ADM_strdup(&quot;c:\\test.jpg&quot;));
 #else
             MKP(backgroundImg,(ADM_filename *)ADM_strdup(&quot;/tmp/taist.jpg&quot;));

Modified: branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidSRTload.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidSRTload.cpp	2007-05-26 11:01:30 UTC (rev 3146)
+++ branches/avidemux_2.4_branch/avidemux/ADM_video/ADM_vidSRTload.cpp	2007-05-26 11:03:01 UTC (rev 3147)
@@ -450,7 +450,7 @@
 	// Get the amound of utf16...
 	done=(ADM_RAW-sout)&gt;&gt;1;
 // For win32 we swap le and be
-#ifdef CYG_MANGLING
+#ifdef ADM_WIN32
        ADM_GLYPH_T glyph;
        for(uint32_t w=0;w&lt;done;w++)
        {

Modified: branches/avidemux_2.4_branch/avidemux/avi_vars.h
===================================================================
--- branches/avidemux_2.4_branch/avidemux/avi_vars.h	2007-05-26 11:01:30 UTC (rev 3146)
+++ branches/avidemux_2.4_branch/avidemux/avi_vars.h	2007-05-26 11:03:01 UTC (rev 3147)
@@ -19,7 +19,7 @@
 #if (defined( HAVE_LIBESD) &amp;&amp; defined(HAVE_ESD_H)) || \
  defined(OSS_SUPPORT) || defined (USE_ARTS) || \
   defined(USE_SDL) || defined(CONFIG_DARWIN) || \
-  defined(CYG_MANGLING) || defined(ALSA_SUPPORT)
+  defined(ADM_WIN32) || defined(ALSA_SUPPORT)
   
 #define HAVE_AUDIO
 #endif

Modified: branches/avidemux_2.4_branch/avidemux/gtk_gui.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/gtk_gui.cpp	2007-05-26 11:01:30 UTC (rev 3146)
+++ branches/avidemux_2.4_branch/avidemux/gtk_gui.cpp	2007-05-26 11:03:01 UTC (rev 3147)
@@ -976,7 +976,7 @@
             setCurrentMixerFromString(&quot;NONE&quot;);
         }
 	for(i=strlen(longname);i&gt;=0;i--)
-#ifdef CYG_MANGLING
+#ifdef ADM_WIN32
 		if( longname[i] == '\\' ){
 #else
 		if( longname[i] == '/' ){

Modified: branches/avidemux_2.4_branch/avidemux/main.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/main.cpp	2007-05-26 11:01:30 UTC (rev 3146)
+++ branches/avidemux_2.4_branch/avidemux/main.cpp	2007-05-26 11:03:01 UTC (rev 3147)
@@ -28,7 +28,7 @@
 #endif
 #include &quot;default.h&quot;
 
-#ifdef CYG_MANGLING
+#ifdef ADM_WIN32
 #define WIN32_CLASH
 #include &quot;windows.h&quot;
 #include &quot;wingdi.h&quot;
@@ -141,7 +141,7 @@
 #endif
 #ifdef HAVE_GETTEXT
   char *local=setlocale (LC_ALL, &quot;&quot;);
-#ifndef CYG_MANGLING
+#ifndef ADM_WIN32
   bindtextdomain (&quot;avidemux&quot;, ADMLOCALE);
 #else
   bindtextdomain (&quot;avidemux&quot;, &quot;./share/locale&quot;);
@@ -157,7 +157,7 @@
   local=textdomain(NULL);
   if(local)
     printf(&quot;[Locale] Textdomain is now  %s \n&quot;,local);
-#ifndef CYG_MANGLING  
+#ifndef ADM_WIN32  
   printf(&quot;[Locale] Files for %s appear to be in %s\n&quot;,&quot;avidemux&quot;, ADMLOCALE);
 #endif
   printf(&quot;[Locale] Test: %s \n&quot;,dgettext(&quot;avidemux&quot;,&quot;_File&quot;));
@@ -185,7 +185,7 @@
 
 
     
-#ifdef CYG_MANGLING    
+#ifdef ADM_WIN32    
     win32_netInit();
 #endif
     UI_Init(argc,argv);


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000441.html">[Avidemux-svn-commit] r3146 - in	branches/avidemux_2.4_branch/avidemux: . ADM_audiofilter	ADM_editor ADM_filter ADM_libraries/ADM_libwrapper	ADM_libraries/ADM_mplex ADM_libraries/ADM_utilities	ADM_requant ADM_toolkit
</A></li>
	<LI>Next message: <A HREF="000443.html">[Avidemux-svn-commit] r3148 - branches/avidemux_2.4_branch
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#442">[ date ]</a>
              <a href="thread.html#442">[ thread ]</a>
              <a href="subject.html#442">[ subject ]</a>
              <a href="author.html#442">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">More information about the Avidemux-svn-commit
mailing list</a><br>
</body></html>
