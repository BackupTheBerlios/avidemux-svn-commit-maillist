<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Avidemux-svn-commit] r3114 - in	branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4:	ADM_dialog ADM_filters
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/avidemux-svn-commit/2007-May/index.html" >
   <LINK REL="made" HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r3114%20-%20in%0A%09branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4%3A%0A%09ADM_dialog%20ADM_filters&In-Reply-To=%3C200705181751.l4IHpLHV016908%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000408.html">
   <LINK REL="Next"  HREF="000410.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Avidemux-svn-commit] r3114 - in	branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4:	ADM_dialog ADM_filters</H1>
    <B>mean at BerliOS</B> 
    <A HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r3114%20-%20in%0A%09branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4%3A%0A%09ADM_dialog%20ADM_filters&In-Reply-To=%3C200705181751.l4IHpLHV016908%40sheep.berlios.de%3E"
       TITLE="[Avidemux-svn-commit] r3114 - in	branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4:	ADM_dialog ADM_filters">mean at mail.berlios.de
       </A><BR>
    <I>Fri May 18 19:51:21 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000408.html">[Avidemux-svn-commit] r3113 - in	branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces:	ADM_GTK/ADM_dialogFactory ADM_NONE/ADM_dialogFactory	ADM_QT4/ADM_dialogFactory ADM_QT4/ADM_filters ADM_QT4/ADM_gui	ADM_commonUI
</A></li>
        <LI>Next message: <A HREF="000410.html">[Avidemux-svn-commit] r3115 - in	branches/avidemux_2.4_branch/avidemux: ADM_audiocodec	ADM_encoder ADM_userInterfaces/ADM_QT4/ADM_gui
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#409">[ date ]</a>
              <a href="thread.html#409">[ thread ]</a>
              <a href="subject.html#409">[ subject ]</a>
              <a href="author.html#409">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: mean
Date: 2007-05-18 19:51:20 +0200 (Fri, 18 May 2007)
New Revision: 3114

Modified:
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_none.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/Q_mainfilter.cpp
Log:
partial for QT4

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_none.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_none.cpp	2007-05-18 16:10:31 UTC (rev 3113)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_none.cpp	2007-05-18 17:51:20 UTC (rev 3114)
@@ -82,7 +82,7 @@
 uint8_t DIA_getEqualizer(EqualizerParam *param, ADMImage *image){return 0;}
 uint8_t DIA_getEqualizer(EqualizerParam *param, AVDMGenericVideoStream *in){return 0;}
 uint8_t DIA_getMPdelogo(MPDELOGO_PARAM *param,AVDMGenericVideoStream *in){return 0;}
-uint8_t DIA_getPartial(PARTIAL_CONFIG *param,AVDMGenericVideoStream *son,AVDMGenericVideoStream *previous){return 0;}
+//uint8_t DIA_getPartial(PARTIAL_CONFIG *param,AVDMGenericVideoStream *son,AVDMGenericVideoStream *previous){return 0;}
 uint8_t DIA_vobsub(vobSubParam *param){return 0;}
 uint8_t DIA_x264(COMPRES_PARAMS *config){return 0;}
 uint8_t DIA_job(uint32_t nb,char **name){return 0;}

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/Q_mainfilter.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/Q_mainfilter.cpp	2007-05-18 16:10:31 UTC (rev 3113)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/Q_mainfilter.cpp	2007-05-18 17:51:20 UTC (rev 3114)
@@ -51,6 +51,7 @@
 #include &quot;ADM_filter/video_filters.h&quot;
 #include &quot;ADM_video/ADM_vidPartial.h&quot;
 #include &quot;ADM_filter/vidVCD.h&quot;
+#include &quot;ADM_userInterfaces/ADM_commonUI/DIA_factory.h&quot;
 /*******************************************************/
 #define NB_TREE 8
 #define myFg 0xFF
@@ -521,6 +522,7 @@
     connect((ui.pushButtonRemove),SIGNAL(clicked(bool)),this,SLOT(remove(bool)));
     connect((ui.toolButtonUp),SIGNAL(clicked(bool)),this,SLOT(up(bool)));
     connect((ui.toolButtonDown),SIGNAL(clicked(bool)),this,SLOT(down(bool)));
+    connect((ui.toolButtonPartial),SIGNAL(clicked(bool)),this,SLOT(partial(bool)));
     connect(ui.buttonClose, SIGNAL(clicked(bool)), this, SLOT(accept()));
     connect(ui.pushButtonDVD, SIGNAL(clicked(bool)), this, SLOT(DVD(bool)));
     connect(ui.pushButtonVCD, SIGNAL(clicked(bool)), this, SLOT(VCD(bool)));
@@ -549,6 +551,38 @@
         }
 	return 0;
 }
+/** 
+    \fn partialCb
+    \brief Partial callback to configure the swallowed filter
+    
+*/
+static void partialCb(void *cookie);
+void partialCb(void *cookie)
+{
+  void **params=(void **)cookie;
+  AVDMGenericVideoStream *son=(AVDMGenericVideoStream *)params[0];
+  AVDMGenericVideoStream *previous=(AVDMGenericVideoStream *)params[1];
+  son-&gt;configure(previous);
+}
+/** 
+    \fn DIA_getPartial
+    \brief Partial dialog
+    
+*/
 
+uint8_t DIA_getPartial(PARTIAL_CONFIG *param,AVDMGenericVideoStream *son,AVDMGenericVideoStream *previous)
+{
+#define PX(x) &amp;(param-&gt;x)
+  void *params[2]={son,previous};
+         uint32_t fmax=previous-&gt;getInfo()-&gt;nb_frames;
+         if(fmax) fmax--;
+         
+         diaElemUInteger  start(PX(_start),_(&quot;Partial Start Frame:&quot;),0,fmax);
+         diaElemUInteger  end(PX(_end),_(&quot;Partial End Frame:&quot;),0,fmax);
+         diaElemButton    button(_(&quot;Configure child&quot;), partialCb,params);
+         
+         diaElem *tabs[]={&amp;start,&amp;end,&amp;button};
+        return diaFactoryRun(_(&quot;Partial Video Filter&quot;),3,tabs);
+}
 //EOF
 


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000408.html">[Avidemux-svn-commit] r3113 - in	branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces:	ADM_GTK/ADM_dialogFactory ADM_NONE/ADM_dialogFactory	ADM_QT4/ADM_dialogFactory ADM_QT4/ADM_filters ADM_QT4/ADM_gui	ADM_commonUI
</A></li>
	<LI>Next message: <A HREF="000410.html">[Avidemux-svn-commit] r3115 - in	branches/avidemux_2.4_branch/avidemux: ADM_audiocodec	ADM_encoder ADM_userInterfaces/ADM_QT4/ADM_gui
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#409">[ date ]</a>
              <a href="thread.html#409">[ thread ]</a>
              <a href="subject.html#409">[ subject ]</a>
              <a href="author.html#409">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">More information about the Avidemux-svn-commit
mailing list</a><br>
</body></html>
