<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Avidemux-svn-commit] r4993 - in	branches/avidemux_2.5_branch_gruntster: avidemux	avidemux/ADM_codecs avidemux/ADM_editor avidemux/ADM_encoder	avidemux/ADM_libraries/ADM_libmpeg2enc	avidemux/ADM_outputs/oplug_avi avidemux/ADM_outputs/oplug_mp4	plugins/ADM_videoEncoder/ADM_vidEnc_avcodec	plugins/ADM_videoEncoder/ADM_vidEnc_x264
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/avidemux-svn-commit/2009-July/index.html" >
   <LINK REL="made" HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r4993%20-%20in%0A%09branches/avidemux_2.5_branch_gruntster%3A%20avidemux%0A%09avidemux/ADM_codecs%20avidemux/ADM_editor%20avidemux/ADM_encoder%0A%09avidemux/ADM_libraries/ADM_libmpeg2enc%0A%09avidemux/ADM_outputs/oplug_avi%20avidemux/ADM_outputs/oplug_mp4%0A%09plugins/ADM_videoEncoder/ADM_vidEnc_avcodec%0A%09plugins/ADM_videoEncoder/ADM_vidEnc_x264&In-Reply-To=%3C200907041619.n64GJM1f004928%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002207.html">
   <LINK REL="Next"  HREF="002209.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Avidemux-svn-commit] r4993 - in	branches/avidemux_2.5_branch_gruntster: avidemux	avidemux/ADM_codecs avidemux/ADM_editor avidemux/ADM_encoder	avidemux/ADM_libraries/ADM_libmpeg2enc	avidemux/ADM_outputs/oplug_avi avidemux/ADM_outputs/oplug_mp4	plugins/ADM_videoEncoder/ADM_vidEnc_avcodec	plugins/ADM_videoEncoder/ADM_vidEnc_x264</H1>
    <B>gruntster at mail.berlios.de</B> 
    <A HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r4993%20-%20in%0A%09branches/avidemux_2.5_branch_gruntster%3A%20avidemux%0A%09avidemux/ADM_codecs%20avidemux/ADM_editor%20avidemux/ADM_encoder%0A%09avidemux/ADM_libraries/ADM_libmpeg2enc%0A%09avidemux/ADM_outputs/oplug_avi%20avidemux/ADM_outputs/oplug_mp4%0A%09plugins/ADM_videoEncoder/ADM_vidEnc_avcodec%0A%09plugins/ADM_videoEncoder/ADM_vidEnc_x264&In-Reply-To=%3C200907041619.n64GJM1f004928%40sheep.berlios.de%3E"
       TITLE="[Avidemux-svn-commit] r4993 - in	branches/avidemux_2.5_branch_gruntster: avidemux	avidemux/ADM_codecs avidemux/ADM_editor avidemux/ADM_encoder	avidemux/ADM_libraries/ADM_libmpeg2enc	avidemux/ADM_outputs/oplug_avi avidemux/ADM_outputs/oplug_mp4	plugins/ADM_videoEncoder/ADM_vidEnc_avcodec	plugins/ADM_videoEncoder/ADM_vidEnc_x264">gruntster at mail.berlios.de
       </A><BR>
    <I>Sat Jul  4 18:19:22 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="002207.html">[Avidemux-svn-commit] r4992 - in	branches/avidemux_2.5_branch_gruntster/platforms/windows:	build_scripts/avidemux installer
</A></li>
        <LI>Next message: <A HREF="002209.html">[Avidemux-svn-commit] r4994 -	branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2208">[ date ]</a>
              <a href="thread.html#2208">[ thread ]</a>
              <a href="subject.html#2208">[ subject ]</a>
              <a href="author.html#2208">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: gruntster
Date: 2009-07-04 18:19:10 +0200 (Sat, 04 Jul 2009)
New Revision: 4993

Removed:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_theora_dec.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_theora_dec.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_theora_enc.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encdivx.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encdivx.h
Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_mjpegEncode.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edit.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_vidEncode.hxx
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encffmpeg1.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encoder.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/ADM_mpe2enc.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_savesmart.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/gui_savenew.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/encoder.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.cpp
Log:
[vidEnc] more cleanup

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_mjpegEncode.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_mjpegEncode.cpp	2009-07-03 13:38:42 UTC (rev 4992)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_mjpegEncode.cpp	2009-07-04 16:19:10 UTC (rev 4993)
@@ -36,7 +36,6 @@
 #include &quot;mjpegtools/jpegutils.h&quot;
 }
 
-//#include &quot;ADM_codecs/ADM_divxEncode.h&quot;
 #include &quot;ADM_codecs/ADM_mjpegEncode.h&quot;
 
 //

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_theora_dec.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_theora_dec.cpp	2009-07-03 13:38:42 UTC (rev 4992)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_theora_dec.cpp	2009-07-04 16:19:10 UTC (rev 4993)
@@ -1,116 +0,0 @@
-/***************************************************************************
-                          ADM_theora_dec.cpp  -  description
-                             -------------------
-    begin                : Thu Sep 26 2002
-    copyright            : (C) 2002 by mean
-    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-#include &quot;config.h&quot;
-#include &quot;ADM_default.h&quot;
-
-#ifdef USE_THEORA
-#include &quot;ADM_colorspace/colorspace.h&quot;
-
-#include &quot;ADM_codecs/ADM_codec.h&quot;
-
-#include &quot;ADM_codecs/ADM_theora_dec.h&quot;
-//________________________________________________
-void
-decoderTheora::setParam (void)
-{
-  return;			// no param for ffmpeg
-}
-//-------------------------------
-decoderTheora::decoderTheora (uint32_t w, uint32_t h):decoders (w, h)
-{
-  memset (&amp;_tinfo, 0, sizeof (_tinfo));
-  memset (&amp;_tstate, 0, sizeof (_tstate));
-
-  _tinfo.width = _w;
-  _tinfo.height = _h;
-  _tinfo.fps_numerator = 25;
-  _tinfo.fps_denominator = 1;
-  _tinfo.aspect_numerator = 4;
-  _tinfo.aspect_denominator = 3;
-  _tinfo.quality = 9;
-
-  _tinfo.version_major = 3;
-  _tinfo.version_minor = 1;
-
-
-  theora_decode_init (&amp;_tstate, &amp;_tinfo);
-  printf (&quot;\n Theora initialized\n&quot;);
-}
-
-
-//-------------------------------
-
-uint8_t
-  decoderTheora::uncompress (uint8_t * in, uint8_t * out, uint32_t len,
-			     uint32_t * flagz)
-{
-  int got_picture = 0;
-
-  if (len == 0)			// Null frame, silently skip
-    {
-      if (flagz)
-	*flagz = 0;
-      return 1;
-    }
-  ogg_packet ogg;
-
-  memset (&amp;ogg, 0, sizeof (ogg));
-  ogg.packet = in;
-  ogg.bytes = len;
-  /*
-     typedef struct {
-     unsigned char *packet;
-     long  bytes;
-     long  b_o_s;
-     long  e_o_s;
-
-     ogg_int64_t  granulepos;
-
-     ogg_int64_t  packetno;      sequence number for decode; the framing
-     knows where there's a hole in the data,
-     but we need coupling so that the codec
-     (which is in a seperate abstraction
-     layer) also knows about the gap 
-     } ogg_packet; */
-  if (theora_decode_packetin (&amp;_tstate, &amp;ogg))
-    {
-      printf (&quot;\n error decoding theora ..\n&quot;);
-      return 0;
-    }
-  yuv_buffer yuv;
-  theora_decode_YUVout (&amp;_tstate, &amp;yuv);
-  memcpy (out, yuv.y, _w * _h);
-  memset (out + _w * _h, 128, (_w * _h) &gt;&gt; 1);
-
-
-
-
-
-  return 1;
-}
-
-//_____________________________________________________
-
-decoderTheora::~decoderTheora ()
-{
-
-  printf (&quot;Theora destroyed\n&quot;);
-  theora_clear (&amp;_tstate);
-}
-
-#endif

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_theora_dec.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_theora_dec.h	2009-07-03 13:38:42 UTC (rev 4992)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_theora_dec.h	2009-07-04 16:19:10 UTC (rev 4993)
@@ -1,46 +0,0 @@
-/***************************************************************************
-                          ADM_theora_dec.h  -  description
-                             -------------------
-    begin                : Thu Sep 26 2002
-    copyright            : (C) 2002 by mean
-    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#ifdef USE_THEORA
-#ifndef __theora__
-#define __theora__
-
-extern &quot;C&quot;
-{
-#include &quot;theora/theora.h&quot;
-}
-class decoderTheora:public decoders
-{
-protected:
-
-
-  theora_info _tinfo;
-  theora_state _tstate;
-
-
-
-public:
-    decoderTheora (uint32_t w, uint32_t h);
-    virtual ~ decoderTheora ();
-  virtual uint8_t uncompress (uint8_t * in, uint8_t * out, uint32_t len,
-			      uint32_t * flag = NULL);
-  virtual void setParam (void);
-
-
-};
-
-#endif
-#endif

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_theora_enc.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_theora_enc.h	2009-07-03 13:38:42 UTC (rev 4992)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_theora_enc.h	2009-07-04 16:19:10 UTC (rev 4993)
@@ -1,16 +0,0 @@
-/***************************************************************************
-                          ADM_theora_enc.h  -  description
-                             -------------------
-    begin                : Thu Sep 26 2002
-    copyright            : (C) 2002 by mean
-    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/CMakeLists.txt	2009-07-03 13:38:42 UTC (rev 4992)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/CMakeLists.txt	2009-07-04 16:19:10 UTC (rev 4993)
@@ -1,5 +1,5 @@
 SET(ADM_codecs_SRCS 
-	ADM_codecs.cpp  ADM_ffmpeg.cpp  ADM_mjpegEncode.cpp  ADM_theora_dec.cpp
+	ADM_codecs.cpp  ADM_ffmpeg.cpp  ADM_mjpegEncode.cpp
 	ADM_ffmp43.cpp  ADM_mjpeg.cpp   ADM_uyvy.cpp)
 
 ADD_ADM_LIB_ALL_TARGETS(ADM_codecs ${ADM_codecs_SRCS})

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edit.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edit.cpp	2009-07-03 13:38:42 UTC (rev 4992)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_editor/ADM_edit.cpp	2009-07-04 16:19:10 UTC (rev 4993)
@@ -55,9 +55,6 @@
 #define MODULE_NAME MODULE_EDITOR
 #include &quot;ADM_osSupport/ADM_debug.h&quot;
 
-#ifdef USE_DIVX
-	#include &quot;ADM_codecs/ADM_divx4.h&quot;
-#endif
 #include &quot;ADM_inputs/ADM_mpegdemuxer/dmx_indexer.h&quot;
 #include &quot;ADM_outputfmt.h&quot;
 //#include &quot;ADM_gui2/GUI_ui.h&quot;
@@ -718,17 +715,12 @@
                                                                         GUI_Error_HIG(QT_TR_NOOP(&quot;Could not unpack the video&quot;),QT_TR_NOOP( &quot;Using backup decoder - not frame accurate.&quot;));
 									}
 								}
-#if  1 //def USE_DIVX
                                                                 if(count)
                                                                         GUI_Info_HIG(ADM_LOG_IMPORTANT,QT_TR_NOOP(&quot;Weird&quot;),QT_TR_NOOP( &quot;The unpacking succeedeed but the index is still not up to date.&quot;));
 								printf(&quot;\n Switching codec...\n&quot;);
 								delete vid-&gt;decoder;
 								vid-&gt;decoder=getDecoderVopPacked(info.fcc, info.width,info.height,0,NULL);
 								ispacked=1;
-#else
-								GUI_Info_HIG(ADM_LOG_IMPORTANT,QT_TR_NOOP(&quot;Troubles ahead&quot;), QT_TR_NOOP(&quot;This a VOP packed AVI.&quot;));
-#endif
-
 							}
 
 						}

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_vidEncode.hxx
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_vidEncode.hxx	2009-07-03 13:38:42 UTC (rev 4992)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_vidEncode.hxx	2009-07-04 16:19:10 UTC (rev 4993)
@@ -20,7 +20,6 @@
 typedef enum 
 {
   CodecCopy,
-  CodecDivx,
   CodecFF,
   CodecMjpeg,
   CodecH263,

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/CMakeLists.txt	2009-07-03 13:38:42 UTC (rev 4992)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/CMakeLists.txt	2009-07-04 16:19:10 UTC (rev 4993)
@@ -1,6 +1,6 @@
 SET(ADM_encoder_SRCS 
 	adm_encConfig.cpp  adm_encffmpeg1.cpp  adm_encmjpeg.cpp     adm_encoder.cpp
-	adm_encCopy.cpp    adm_encdivx.cpp    adm_encffmpeg.cpp   adm_encmpeg2enc.cpp  adm_encRequant.cpp  adm_encyv12.cpp
+	adm_encCopy.cpp    adm_encffmpeg.cpp   adm_encmpeg2enc.cpp  adm_encRequant.cpp  adm_encyv12.cpp
 	ADM_pluginLoad.cpp ADM_externalEncoder.cpp)
 
 ADD_ADM_LIB_ALL_TARGETS(ADM_encoder ${ADM_encoder_SRCS})

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encdivx.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encdivx.cpp	2009-07-03 13:38:42 UTC (rev 4992)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encdivx.cpp	2009-07-04 16:19:10 UTC (rev 4993)
@@ -1,187 +0,0 @@
-/***************************************************************************
-                          adm_encdivx.cpp  -  description
-                             -------------------
-    begin                : Sun Jul 14 2002
-    copyright            : (C) 2002 by mean
-    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-#include &lt;stdio.h&gt;
-#include &lt;stdlib.h&gt;
-#include &lt;math.h&gt;
-#include &lt;unistd.h&gt;
-
-#include &lt;time.h&gt;
-#include &lt;sys/time.h&gt;
-#include &quot;config.h&quot;
-#ifdef USE_DIVX
-
-#include &quot;fourcc.h&quot;
-#include &quot;avi_vars.h&quot;
-#include &quot;ADM_toolkit/toolkit.hxx&quot;
-
-#include &quot;ADM_encoder/ADM_vidEncode.hxx&quot;
-
-//#include &quot;ADM_video/ADM_vidEncode.hxx&quot;
-
-#include &quot;ADM_codecs/ADM_divxInc.h&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
-#include &quot;ADM_encoder/adm_encoder.h&quot;
-#include &quot;ADM_codecs/ADM_divxEncode.h&quot;
-#include &quot;ADM_encoder/adm_encdivx.h&quot;
-
-extern int getCompressParams (COMPRESSION_MODE * mode, uint32_t * qz,
-			      uint32_t * br, uint32_t * fs);
-
-/*_________________________________________________*/
-EncoderDivx::EncoderDivx (DIVXConfig * config)
-{
-  _codec = NULL;
-  fd = NULL;
-  entries = NULL;
-  strcpy (_logname, &quot;&quot;);
-  _frametogo = 0;
-  memcpy (&amp;_param, &amp;(config-&gt;generic), sizeof (_param));
-};
-//--------------------------------
-uint8_t
-EncoderDivx::configure (AVDMGenericVideoStream * instream, int useExistingLogFile)
-{
-  //  COMPRES_PARAMS par;
-
-  ADM_assert (instream);
-  ADV_Info *info;
-
-  info = instream-&gt;getInfo ();
-  _w = info-&gt;width;
-  _h = info-&gt;height;
-  _vbuffer = new uint8_t[_w * _h * 3];
-  ADM_assert (_vbuffer);
-
-
-  switch (_param.mode)
-    {
-    case COMPRESS_CQ:
-      _state = enc_CQ;
-      _codec = new divxEncoderCQ (_w, _h);
-      _codec-&gt;init (_param.qz, info-&gt;fps1000);
-      break;
-    case COMPRESS_CBR:
-      _state = enc_CBR;
-      _codec = new divxEncoderCBR (_w, _h);
-      _codec-&gt;init (_param.bitrate, info-&gt;fps1000);	//qz,bitrate,finalsize;
-      break;
-    case COMPRESS_2PASS:
-      _state = enc_Pass1;
-      _codec = new divxEncoderCQ (_w, _h);
-      _codec-&gt;init (2, info-&gt;fps1000);
-      break;
-    default:
-      ADM_assert (0);
-
-    }
-  _in = instream;
-  printf (&quot;\n Divx Encoder , w: %lu h:%lu mode:%d&quot;, _w, _h, _state);
-  return 1;
-
-}
-
-
-
-uint8_t
-EncoderDivx::startPass1 (void)
-{
-  ADM_assert (_state == enc_Pass1);
-  _frametogo = 0;
-  printf (&quot;\n Starting pass 1\n&quot;);
-  printf (&quot; Creating logfile :%s\n&quot;, _logname);
-  fd = fopen (_logname, &quot;wt&quot;);
-  if (!fd)
-    {
-      printf (&quot;\n cannot create logfile !\n&quot;);
-      return 0;
-    }
-  return 1;
-}
-
-int EncoderDivx::getRequirements (void) { return 0; }
-
-uint8_t
-EncoderDivx::isDualPass (void)
-{
-  if ((_state == enc_Pass1) || (_state == enc_Pass2))
-    {
-      return 1;
-    }
-  return 0;
-
-}
-uint8_t
-EncoderDivx::setLogFile (const char *lofile, uint32_t nbframe)
-{
-  strcpy (_logname, lofile);
-  _frametogo = nbframe;
-  return 1;
-
-}
-
-//______________________________
-uint8_t
-EncoderDivx::encode (uint32_t frame, uint32_t * len, uint8_t * out,
-		     uint32_t * flags)
-{
-  uint32_t l, f;
-  myENC_RESULT enc;
-
-  ADM_assert (_codec);
-  ADM_assert (_in);
-
-  if (!_in-&gt;getFrameNumberNoAlloc (frame, &amp;l, _vbuffer, &amp;f))
-    {
-      printf (&quot;\n Error : Cannot read incoming frame !&quot;);
-      return 0;
-    }
-
-  switch (_state)
-    {
-    case enc_CBR:
-    case enc_CQ:
-      return _codec-&gt;encode (_vbuffer, out, len, flags);
-      break;
-    case enc_Pass1:
-
-      break;
-
-    default:
-      ADM_assert (0);
-    }
-  return 0;
-}
-
-//_______________________________
-uint8_t
-EncoderDivx::stop (void)
-{
-  delete _codec;
-  _codec = 0;
-  return 1;
-
-}
-
-uint8_t
-EncoderDivx::startPass2 (void)
-{
-
-  return 0;
-}
-
-#endif

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encdivx.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encdivx.h	2009-07-03 13:38:42 UTC (rev 4992)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encdivx.h	2009-07-04 16:19:10 UTC (rev 4993)
@@ -1,59 +0,0 @@
-/***************************************************************************
-                          adm_encdivx.h  -  description
-                             -------------------
-    begin                : Sun Jul 14 2002
-    copyright            : (C) 2002 by mean
-    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#ifndef __ADM_encoder_divx__
-#define __ADM_encoder_divx__
-typedef struct DIVXConfig
-{
-  COMPRES_PARAMS generic;
-} DIVXConfig;
-
-
-
-class EncoderDivx:public Encoder
-{
-
-protected:
-
-  divxEncoder * _codec;
-public:
-  EncoderDivx (DIVXConfig * conf);
-  virtual int getRequirements (void);
-  virtual uint8_t isDualPass (void);
-  virtual uint8_t configure (AVDMGenericVideoStream * instream, int useExistingLogFile);
-  virtual uint8_t encode (uint32_t frame, uint32_t * len, uint8_t * out,
-			  uint32_t * flags);
-  virtual uint8_t setLogFile (const char *p, uint32_t fr);
-  virtual uint8_t stop (void);
-  virtual uint8_t startPass2 (void);
-  virtual uint8_t startPass1 (void);
-  virtual const char *getCodecName (void)
-  {
-    return &quot;DX50&quot;;
-  }
-  virtual const char *getFCCHandler (void)
-  {
-    return &quot;divx&quot;;
-  }
-  virtual const char *getDisplayName (void)
-  {
-    return QT_TR_NOOP(&quot;DivX&quot;);
-  }
-
-};
-
-
-#endif

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encffmpeg1.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encffmpeg1.cpp	2009-07-03 13:38:42 UTC (rev 4992)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encffmpeg1.cpp	2009-07-04 16:19:10 UTC (rev 4993)
@@ -34,8 +34,6 @@
 
 #include &quot;ADM_videoFilter.h&quot;
 
-
-//#include &quot;ADM_codecs/ADM_divxEncode.h&quot;
 #include &quot;ADM_codecs/ADM_ffmpeg.h&quot;
 #include &quot;ADM_encoder/adm_encoder.h&quot;
 #include &quot;ADM_encoder/adm_encffmpeg.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encoder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encoder.cpp	2009-07-03 13:38:42 UTC (rev 4992)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encoder.cpp	2009-07-04 16:19:10 UTC (rev 4993)
@@ -35,12 +35,6 @@
 #include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_encoder/adm_encoder.h&quot;
 
-#ifdef USE_DIVX
-#include &quot;ADM_codecs/ADM_divxEncode.h&quot;
-#include &quot;ADM_encoder/adm_encdivx.h&quot;
-
-#endif
-
 #ifdef USE_FFMPEG
 #include &quot;ADM_codecs/ADM_ffmpeg.h&quot;
 #include &quot;ADM_encoder/adm_encffmpeg.h&quot;
@@ -77,11 +71,6 @@
   printf (&quot;\n Registering Encoders\n&quot;);
   printf (&quot;*********************\n&quot;);
 
-#ifdef USE_DIVX
-  nb_encoder++;
-  printf (&quot;DivX encoder registered\n&quot;);
-#endif
-
 #ifdef USE_FFMPEG
   nb_encoder++;
   printf (&quot;MJPEG encoder registered\n&quot;);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/ADM_mpe2enc.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/ADM_mpe2enc.cpp	2009-07-03 13:38:42 UTC (rev 4992)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_libmpeg2enc/ADM_mpe2enc.cpp	2009-07-04 16:19:10 UTC (rev 4993)
@@ -36,7 +36,6 @@
 
 //#include &quot;ADM_colorspace/colorspace.h&quot;
 #include &quot;ADM_encoder/ADM_vidEncode.hxx&quot;
-//#include &quot;ADM_codecs/ADM_divxEncode.h&quot;
 #include &quot;ADM_mpeg2enc.h&quot;
 #include &quot;ADM_encoder/adm_encffmatrix.h&quot;
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_savesmart.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_savesmart.cpp	2009-07-03 13:38:42 UTC (rev 4992)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_savesmart.cpp	2009-07-04 16:19:10 UTC (rev 4993)
@@ -399,12 +399,6 @@
 
   if(  isMpeg4Compatible(info.fcc) )
   	{
-/*	
-#ifdef USE_DIVX		 
-		 	 _encoder = new divxEncoderCQ (info.width, info.height);
-	   
-#else			
-*/
 // 	uint8_t				setConfig(FFcodecSetting *set);	
 			ffmpegEncoderCQ *tmp;		
 			tmp = new ffmpegEncoderCQ (info.width, info.height,FF_MPEG4);					
@@ -413,9 +407,6 @@
 			printf(&quot;\n init qz %ld\n&quot;,qz);
 	    		ret= tmp-&gt;init (qz,25000);
 			_encoder=tmp;
-/*			
-#endif		  		  
-*/
 		
 #warning 25 fps hardcoded
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp	2009-07-03 13:38:42 UTC (rev 4992)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp	2009-07-04 16:19:10 UTC (rev 4993)
@@ -39,8 +39,6 @@
 
 #include &quot;ADM_encoder/ADM_vidEncode.hxx&quot;
 #include &quot;ADM_encoder/adm_encoder.h&quot;
-//#include &quot;ADM_codecs/ADM_divxEncode.h&quot;
-//#include &quot;ADM_encoder/adm_encdivx.h&quot;
 
 #include &quot;ADM_codecs/ADM_ffmpeg.h&quot;
 #include &quot;ADM_encoder/adm_encffmpeg.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/gui_savenew.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/gui_savenew.cpp	2009-07-03 13:38:42 UTC (rev 4992)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/gui_savenew.cpp	2009-07-04 16:19:10 UTC (rev 4993)
@@ -27,7 +27,6 @@
 
 #include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_videoFilter_internal.h&quot;
-//#include &quot;ADM_codecs/ADM_divxEncode.h&quot;
 #include &quot;ADM_encoder/ADM_vidEncode.hxx&quot;
 
 #include &quot;ADM_outputs/oplug_avi/op_aviwrite.hxx&quot;

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/encoder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/encoder.cpp	2009-07-03 13:38:42 UTC (rev 4992)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/encoder.cpp	2009-07-04 16:19:10 UTC (rev 4993)
@@ -18,7 +18,7 @@
 #include &quot;dvEncoder.h&quot;
 #include &quot;ffv1Encoder.h&quot;
 #include &quot;ffvhuffEncoder.h&quot;
-#include &quot;HuffyuvEncoder.h&quot;
+#include &quot;huffyuvEncoder.h&quot;
 #include &quot;ADM_inttype.h&quot;
 
 int uiType;

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.cpp	2009-07-03 13:38:42 UTC (rev 4992)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.cpp	2009-07-04 16:19:10 UTC (rev 4993)
@@ -534,6 +534,8 @@
 		_seiUserData = NULL;
 		_seiUserDataLen = 0;
 	}
+
+	return ADM_VIDENC_ERR_SUCCESS;
 }
 
 void x264Encoder::close(void)


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002207.html">[Avidemux-svn-commit] r4992 - in	branches/avidemux_2.5_branch_gruntster/platforms/windows:	build_scripts/avidemux installer
</A></li>
	<LI>Next message: <A HREF="002209.html">[Avidemux-svn-commit] r4994 -	branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2208">[ date ]</a>
              <a href="thread.html#2208">[ thread ]</a>
              <a href="subject.html#2208">[ subject ]</a>
              <a href="author.html#2208">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">More information about the Avidemux-svn-commit
mailing list</a><br>
</body></html>
