<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Avidemux-svn-commit] r5089 - in branches/avidemux_2.6_branch_mean:	avidemux/common avidemux/common/ADM_audioFilter/include	avidemux/common/ADM_audioFilter/src	avidemux/common/ADM_commonUI avidemux/common/ADM_script	avidemux/common/ADM_toolkit	avidemux_core/ADM_coreAudioFilter/include	avidemux_plugins/ADM_audioEncoders/lame
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/avidemux-svn-commit/2009-July/index.html" >
   <LINK REL="made" HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r5089%20-%20in%20branches/avidemux_2.6_branch_mean%3A%0A%09avidemux/common%20avidemux/common/ADM_audioFilter/include%0A%09avidemux/common/ADM_audioFilter/src%0A%09avidemux/common/ADM_commonUI%20avidemux/common/ADM_script%0A%09avidemux/common/ADM_toolkit%0A%09avidemux_core/ADM_coreAudioFilter/include%0A%09avidemux_plugins/ADM_audioEncoders/lame&In-Reply-To=%3C200907141537.n6EFbQDB028333%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002303.html">
   <LINK REL="Next"  HREF="002305.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Avidemux-svn-commit] r5089 - in branches/avidemux_2.6_branch_mean:	avidemux/common avidemux/common/ADM_audioFilter/include	avidemux/common/ADM_audioFilter/src	avidemux/common/ADM_commonUI avidemux/common/ADM_script	avidemux/common/ADM_toolkit	avidemux_core/ADM_coreAudioFilter/include	avidemux_plugins/ADM_audioEncoders/lame</H1>
    <B>mean at BerliOS</B> 
    <A HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r5089%20-%20in%20branches/avidemux_2.6_branch_mean%3A%0A%09avidemux/common%20avidemux/common/ADM_audioFilter/include%0A%09avidemux/common/ADM_audioFilter/src%0A%09avidemux/common/ADM_commonUI%20avidemux/common/ADM_script%0A%09avidemux/common/ADM_toolkit%0A%09avidemux_core/ADM_coreAudioFilter/include%0A%09avidemux_plugins/ADM_audioEncoders/lame&In-Reply-To=%3C200907141537.n6EFbQDB028333%40sheep.berlios.de%3E"
       TITLE="[Avidemux-svn-commit] r5089 - in branches/avidemux_2.6_branch_mean:	avidemux/common avidemux/common/ADM_audioFilter/include	avidemux/common/ADM_audioFilter/src	avidemux/common/ADM_commonUI avidemux/common/ADM_script	avidemux/common/ADM_toolkit	avidemux_core/ADM_coreAudioFilter/include	avidemux_plugins/ADM_audioEncoders/lame">mean at mail.berlios.de
       </A><BR>
    <I>Tue Jul 14 17:37:26 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="002303.html">[Avidemux-svn-commit] r5088 - in branches/avidemux_2.6_branch_mean:	avidemux avidemux/common avidemux/common/ADM_audioFilter	avidemux/common/ADM_audioFilter/include	avidemux/common/ADM_audioFilter/src	avidemux/common/ADM_audioFilter_old	avidemux/common/ADM_commonUI avidemux/common/ADM_editor	avidemux/common/ADM_script avidemux/common/ADM_toolkit	avidemux/gtk/ADM_userInterfaces/ADM_dialog	avidemux_core/ADM_coreAudio/include	avidemux_core/ADM_coreAudioFilter/include
</A></li>
        <LI>Next message: <A HREF="002305.html">[Avidemux-svn-commit] r5090 -	branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2304">[ date ]</a>
              <a href="thread.html#2304">[ thread ]</a>
              <a href="subject.html#2304">[ subject ]</a>
              <a href="author.html#2304">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: mean
Date: 2009-07-14 17:37:25 +0200 (Tue, 14 Jul 2009)
New Revision: 5089

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/include/ADM_audioFilterInterface.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audiofilter_interface.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/DIA_audioFilter.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemux.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_toolkit/automation.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioFilter/include/audiofilter_conf.h
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lame/audioencoder_lame.cpp
Log:
[audio] Big cleanup on audio filter, re-enable filter configuration dialog

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/include/ADM_audioFilterInterface.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/include/ADM_audioFilterInterface.h	2009-07-14 15:37:21 UTC (rev 5088)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/include/ADM_audioFilterInterface.h	2009-07-14 15:37:25 UTC (rev 5089)
@@ -31,6 +31,8 @@
 FILMCONV        audioFilterGetFrameRate(void);
 CHANNEL_CONF    audioFilterGetMixer(void); // Invalid to disable
 
+bool            audioFilterConfigure(void);
+
 /* Encoder part */
 uint8_t         audioCodecSetByIndex(int i);
 void            audioCodecConfigure( void );

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audiofilter_interface.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audiofilter_interface.cpp	2009-07-14 15:37:21 UTC (rev 5088)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audiofilter_interface.cpp	2009-07-14 15:37:25 UTC (rev 5089)
@@ -22,7 +22,17 @@
 // Warning, we have another one for playback
 
 ADM_AUDIOFILTER_CONFIG audioEncodingConfig;
+extern int DIA_getAudioFilter(ADM_AUDIOFILTER_CONFIG *config);
+
 /**
+    \fn audioFilterconfigure
+    \brief
+*/
+bool audioFilterConfigure(void)
+{
+    return DIA_getAudioFilter(&amp;audioEncodingConfig);
+}
+/**
     \fn audioFilterReset
     \brief Put back default value on audio filter chain
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/DIA_audioFilter.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/DIA_audioFilter.cpp	2009-07-14 15:37:21 UTC (rev 5088)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/DIA_audioFilter.cpp	2009-07-14 15:37:25 UTC (rev 5089)
@@ -22,13 +22,10 @@
 */
 int DIA_getAudioFilter(ADM_AUDIOFILTER_CONFIG *config)
 {
-  
-  uint32_t vFreq=config-&gt;resamplerFrequency;
   uint32_t vChan=config-&gt;mixerConf;
-  uint32_t vDownsample=config-&gt;mixerEnabled;
   uint32_t vFilm=config-&gt;film2pal;
-
-   diaElemToggleUint eResample(&amp;vDownsample,QT_TR_NOOP(&quot;R_esampling (Hz):&quot;),&amp;vFreq,QT_TR_NOOP(&quot;Resampling frequency (Hz)&quot;),6000,64000);
+#define PX(x) (&amp;(config-&gt;x))
+   diaElemToggleUint eResample(PX(resamplerEnabled),QT_TR_NOOP(&quot;R_esampling (Hz):&quot;),PX(resamplerFrequency),QT_TR_NOOP(&quot;Resampling frequency (Hz)&quot;),6000,64000);
     
     //**********************************
     diaMenuEntry menuFPS[]={
@@ -60,9 +57,7 @@
  diaElem *elems[]={&amp;eFPS, &amp;eMixer, &amp;eResample};
   if( diaFactoryRun(QT_TR_NOOP(&quot;Audio Filters&quot;),3,elems))
     {
-        config-&gt;resamplerFrequency=vFreq;
         config-&gt;mixerConf=(CHANNEL_CONF)vChan;
-        config-&gt;mixerEnabled=vDownsample;
         config-&gt;film2pal=(FILMCONV)vFilm;
       return true;
     }

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemux.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemux.cpp	2009-07-14 15:37:21 UTC (rev 5088)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script/ADM_JSAvidemux.cpp	2009-07-14 15:37:25 UTC (rev 5089)
@@ -322,6 +322,7 @@
 JSBool ADM_JSAvidemux::LoadFilters(JSContext *cx, JSObject *obj, uintN argc, 
                                        jsval *argv, jsval *rval)
 {// begin LoadFilters
+#if 0
         ADM_JSAvidemux *p = (ADM_JSAvidemux *)JS_GetPrivate(cx, obj);
         // default return value
         *rval = BOOLEAN_TO_JSVAL(false);
@@ -334,6 +335,7 @@
         enterLock();
         *rval = BOOLEAN_TO_JSVAL(filterLoadXml(pTempStr,0));
         leaveLock();
+#endif
 	return JS_TRUE;
 }// end LoadFilters
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_toolkit/automation.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_toolkit/automation.cpp	2009-07-14 15:37:21 UTC (rev 5088)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_toolkit/automation.cpp	2009-07-14 15:37:25 UTC (rev 5089)
@@ -48,7 +48,7 @@
 
 //extern uint8_t loadVideoCodecConf( const char *name);
 extern int A_saveJpg (char *name);
-extern void filterLoadXml(const char *n);
+//extern void filterLoadXml(const char *n);
 extern int A_appendAvi (const char *name);
 extern void A_saveAudioCopy(char *name);
 extern int A_loadNone( void );
@@ -144,7 +144,7 @@
         {&quot;run&quot;,			1,&quot;load and run a script&quot;,		(one_arg_type)A_parseECMAScript},
         {&quot;audio-normalize&quot;,	1,&quot;activate normalization&quot;,		call_normalize},
         {&quot;audio-resample&quot;,	1,&quot;resample to x hz&quot;,			call_resample},
-        {&quot;filters&quot;,		1,&quot;load a filter preset&quot;,		(one_arg_type)filterLoadXml}   ,
+//        {&quot;filters&quot;,		1,&quot;load a filter preset&quot;,		(one_arg_type)filterLoadXml}   ,
 //        {&quot;codec-conf&quot;,		1,&quot;load a codec configuration&quot;,		(one_arg_type )loadVideoCodecConf}   ,
 //        {&quot;vcd-res&quot;,		0,&quot;set VCD resolution&quot;,			(one_arg_type)setVCD}              ,
 //        {&quot;svcd-res&quot;,		0,&quot;set SVCD resolution&quot;,		(one_arg_type)setSVCD}              ,

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp	2009-07-14 15:37:21 UTC (rev 5088)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp	2009-07-14 15:37:25 UTC (rev 5089)
@@ -13,22 +13,15 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-
-
 #include &quot;ADM_default.h&quot;
 #include &lt;math.h&gt;
 #include &lt;errno.h&gt;
 
-#include &quot;ADM_lavcodec.h&quot;
 #include &quot;fourcc.h&quot;
-#include &quot;avi_vars.h&quot;
+
 #include &quot;DIA_fileSel.h&quot;
-#include &quot;prototype.h&quot;
 #include &quot;DIA_coreToolkit.h&quot;
-#include &quot;ADM_bitmap.h&quot;
 
-#include &quot;ADM_coreAudio.h&quot;
-
 #include &quot;gui_action.hxx&quot;
 #include &quot;gtkgui.h&quot;
 
@@ -36,21 +29,15 @@
 #include &quot;ADM_render/GUI_render.h&quot;
 #include &quot;ADM_commonUI/GUI_ui.h&quot;
 
-#include &quot;audio_out.h&quot;
-
-#include &quot;ADM_commonUI/DIA_busy.h&quot;
 #include &quot;DIA_working.h&quot;
 #include &quot;DIA_factory.h&quot;
-#include &quot;DIA_enter.h&quot;
 
-#include &quot;ADM_videoFilter.h&quot;
-#include &quot;ADM_videoFilter_internal.h&quot;
-
 #include &quot;ADM_vidMisc.h&quot;
 #include &quot;ADM_preview.h&quot;
 #include &quot;ADM_coreVideoEncoder.h&quot;
 #include &quot;ADM_audioFilter/include/ADM_audioFilterInterface.h&quot;
 
+#include &quot;avi_vars.h&quot;
 
 char * actual_workbench_file;
 renderZoom currentZoom=ZOOM_1_1;
@@ -129,7 +116,7 @@
 uint8_t A_jumpToTime(uint32_t hh,uint32_t mm,uint32_t ss,uint32_t ms);
 //__________
 
-
+extern int  GUI_GoToFrame(uint32_t frame);;
 extern void videoCodecConfigureUI(int codecIndex = -1);
 extern void audioCodecChanged(int newcodec);
 extern void videoCodecChanged(int newcodec);
@@ -171,15 +158,6 @@
         case ACT_BUILT_IN:
                                 DIA_builtin();
                                 return;
-#if BAZOOKA
-        case ACT_GLYPHEDIT:
-                                DIA_glyphEdit();
-                                return;
-
-        case ACT_V2V:
-                                A_vob2vobsub();
-                                return;
-#endif
         case ACT_HANDLE_JOB:
                                 GUI_jobs();
                                 return;
@@ -187,48 +165,36 @@
         case ACT_RECENT1:
         case ACT_RECENT2:
         case ACT_RECENT3:
-                        const char **name;
-						char* fileName;
-                        int rank;
-                                name=prefs-&gt;get_lastfiles();
-                                rank=(int)action-ACT_RECENT0;
-                                ADM_assert(name[rank]);
-                                A_openAvi2 (name[rank], 0);
+                const char **name;
+                char* fileName;
+                int rank;
 
+                name=prefs-&gt;get_lastfiles();
+                rank=(int)action-ACT_RECENT0;
+                ADM_assert(name[rank]);
+                A_openAvi2 (name[rank], 0);
                 return;
         case ACT_ViewMain: UI_toogleMain();return;
         case ACT_ViewSide: UI_toogleSide();return;
-#ifdef BAZOOKA
-        case ACT_DVB_Ocr:
-        		DIA_ocrDvb();
-        		return;
-
-      case ACT_Ocr:
-                DIA_ocrGen(); //
-                return;
-#endif
       case ACT_AudioConfigure:
 //    		audioCodecSelect();
 		return;
 	case ACT_VideoConfigure:
     		videoEncoder6Configure();
-		return;
+            return;
     case ACT_VideoCodecChanged:
     		nw=UI_getCurrentVCodec();
     		videoEncoder6_SetCurrentEncoder(nw);
-		return;
+            return;
    case ACT_AudioCodecChanged:
-                nw=UI_getCurrentACodec();
-                audioCodecSetByIndex(nw);
-
-		return;
+            nw=UI_getCurrentACodec();
+            audioCodecSetByIndex(nw);
+            return;
     case ACT_PLUGIN_INFO:
             DIA_pluginsInfo();
             return;
     case ACT_RunScript:
-                GUI_FileSelRead (QT_TR_NOOP(&quot;Select ECMAScript to Run&quot;),(SELFILE_CB *) A_parseECMAScript);
-
-                        //
+            GUI_FileSelRead (QT_TR_NOOP(&quot;Select ECMAScript to Run&quot;),(SELFILE_CB *) A_parseECMAScript);
     		return;
 
     case ACT_RecentFiles:
@@ -242,50 +208,33 @@
     		 DIA_about( );
 		 return;
     case ACT_VideoCodec:
-      //videoCodecSelect ();
       videoEncoder6Configure();
       return;
     case ACT_AudioCodec:
-      //audioCodecSelect ();
       audioCodecConfigure();
       return;
 
     case ACT_AudioFilters:
     //  audioFilter_configureFilters ();
+      audioFilterConfigure();
       return;
     case ACT_Pref:
         if(playing) return;
     	if(DIA_Preferences())
-	{
-//	saveEncoderConfig ();
- 	#ifdef HAVE_AUDIO
-      		AVDM_audioSave();
- 	#endif
-      	prefs-&gt;save ();
-	}
-	return;
+        {
+            prefs-&gt;save ();
+        }
+        return;
     case ACT_SavePref:
-//      saveEncoderConfig ();
- #ifdef HAVE_AUDIO
-      AVDM_audioSave();
- #endif
-      prefs-&gt;save ();
-      return;
-    case ACT_SetLogFile:
-//      GUI_FileSelWrite (&quot;Select log File to use&quot;, encoderSetLogFile);
-      GUI_Error_HIG(QT_TR_NOOP(&quot;Obsolete&quot;), NULL);
-      return;
-      break;
+        prefs-&gt;save ();
+        return;
     case ACT_SetMuxParam:
         {
         int index=UI_GetCurrentFormat();
         ADM_mux_configure(index);
+        return;
         }
-      return;
       break;
-    case ACT_Fast:
-      ADM_assert(0);
-      break;
     case ACT_Exit:
       { uint32_t saveprefsonexit;
          prefs-&gt;get(FEATURE_SAVEPREFSONEXIT,&amp;saveprefsonexit);
@@ -295,79 +244,58 @@
       cleanUp ();
       exit (0);
       break;
-/*			case ACT_SelectEncoder:
-
-						A_selectEncoder();
-  	  			return;
-						break;*/
-    case ACT_SelectEncoder:
-      GUI_Error_HIG (QT_TR_NOOP(&quot;Obsolete&quot;), NULL);
-      break;
-
     default:
       break;
 
     }
-//------------------------------------------------
 
   if (playing)			// only allow some action
     {
       switch (action)
-	{
-	case ACT_PlayAvi:
+        {
+        case ACT_PlayAvi:
 
-	case ACT_StopAvi:
-	  A_playAvi ();
-	  break;
-	default:
-	  return;
-	}
+        case ACT_StopAvi:
+          A_playAvi ();
+          break;
+        default:
+          return;
+        }
     }
-  // not playing
-  // allow all actions
-
+  // not playing,
   // restict disabled uncoded actions
   if ((int) action &gt;= ACT_DUMMY)
     {
       GUI_Error_HIG (QT_TR_NOOP(&quot;Not coded in this version&quot;), NULL);
       return;
-
     }
   // allow only if avi loaded
   if (!avifileinfo)
     {
       switch (action)
-	{
+        {
           case ACT_JOG:
                 break;
-	case ACT_OpenAvi:
-          GUI_FileSelRead (QT_TR_NOOP(&quot;Select AVI File...&quot;), (SELFILE_CB *)A_openAvi);
-	  break;
-
-	case ACT_BrokenAvi:
-	  printf (&quot;\n Opening in broken mode...\n&quot;);
-          GUI_FileSelRead (QT_TR_NOOP(&quot;Select AVI File...&quot;), A_openBrokenAvi);
-	  break;
-
-
-	default:
-	  ;
-	}
-      return;
+          case ACT_OpenAvi:
+                GUI_FileSelRead (QT_TR_NOOP(&quot;Select AVI File...&quot;), (SELFILE_CB *)A_openAvi);
+                break;
+          default:
+            break;
+        }
+        return;
     }
 
-//#define TEST_UNPACK
-  // we have an AVI loaded
+  // Dispatch actions, we have a file loaded
   if(action&gt;ACT_NAVIGATE_BEGIN &amp;&amp; action &lt; ACT_NAVIGATE_END)
   {
-    HandleAction_Navigate(action);
+    return HandleAction_Navigate(action);
   }
-  else if(action&gt;ACT_SAVE_BEGIN &amp;&amp; action &lt; ACT_SAVE_END)
+  if(action&gt;ACT_SAVE_BEGIN &amp;&amp; action &lt; ACT_SAVE_END)
   {
-    HandleAction_Save(action);
+    return HandleAction_Save(action);
   }
 
-  else switch (action)
+  switch (action)
     {
        case ACT_JOG:
                 A_jog();
@@ -410,42 +338,24 @@
     			break;
 
     case ACT_ADD_JOB:
-        A_addJob();
-        break;
- 
-    case ACT_CutWizard:
-      ADM_cutWizard ();
-      break;
-    case ACT_SecondAudioTrack:
-                A_externalAudioTrack();
-                break;
+            A_addJob();
+            break;
 
     case ACT_OpenAvi:
-      GUI_FileSelRead (QT_TR_NOOP(&quot;Select AVI File...&quot;),(SELFILE_CB *) A_openAvi);
-      break;
-    case ACT_BrokenAvi:
-      GUI_FileSelRead (QT_TR_NOOP(&quot;Select AVI File...&quot;), A_openBrokenAvi);
-      break;
+        GUI_FileSelRead (QT_TR_NOOP(&quot;Select AVI File...&quot;),(SELFILE_CB *) A_openAvi);
+        break;
     case ACT_AppendAvi:
-      GUI_FileSelRead (QT_TR_NOOP(&quot;Select AVI File to Append...&quot;),(SELFILE_CB *) A_appendAvi);
-      break;
-
+        GUI_FileSelRead (QT_TR_NOOP(&quot;Select AVI File to Append...&quot;),(SELFILE_CB *) A_appendAvi);
+        break;
     case ACT_AviInfo:
-      DIA_properties ();
-      break;
-  
+        DIA_properties ();
+        break;
 	case ACT_BitRate:
 		 GUI_displayBitrate(  );
-	break;
-
- 
-
+        break;
     case ACT_PlayAvi:
       GUI_PlayAvi ();
       break;
-
-
-
   
 #define TOGGLE_PREVIEW ADM_PREVIEW_OUTPUT
     case ACT_PreviewChanged:
@@ -651,6 +561,7 @@
 
       break;
     case ACT_VideoParameter:
+#if 0
       // first remove current viewer
       if (getPreviewMode()!=ADM_PREVIEW_NONE)
         {
@@ -666,6 +577,7 @@
          admPreview::start();
 //         admPreview::update (curframe);
       }
+#endif
       break;
 
     case ACT_RebuildKF:
@@ -688,13 +600,8 @@
       return;
 
     }
-
-
-  // gtk_widget_grab_focus(sb_frame);
 }
 
-
-
 //_____________________________________________________________
 //
 // Open AVI File
@@ -742,7 +649,7 @@
 
   GUI_close(); // Cleanup
 
-  DIA_StartBusy ();
+//  DIA_StartBusy ();
   /*
   ** we may get a relative path by cmdline
   */
@@ -753,7 +660,7 @@
   {
     res = video_body-&gt;addFile (longname);
   }
-  DIA_StopBusy ();
+//  DIA_StopBusy ();
 
   // forget last project file
   if( actual_workbench_file ){
@@ -854,7 +761,7 @@
     }
 
 
-  getFirstVideoFilter(); // reinit first filter
+//  getFirstVideoFilter(); // reinit first filter
 
   // now get audio information if exists
   wavinfo = video_body-&gt;getInfo ();	//wavinfo); // will be null if no audio
@@ -884,7 +791,7 @@
   // Draw first frame
   GUI_setAllFrameAndTime();
   A_ResetMarkers();
-  getFirstVideoFilter(); // Rebuild filter if needed
+//  getFirstVideoFilter(); // Rebuild filter if needed
 
   /* Zoom out if needed */
   uint32_t phyW,phyH;
@@ -925,14 +832,14 @@
 
   if (playing)
     return 0;
-  DIA_StartBusy ();
+//  DIA_StartBusy ();
   if (!video_body-&gt;addFile (name))
     {
-      DIA_StopBusy ();
+//      DIA_StopBusy ();
       GUI_Error_HIG (QT_TR_NOOP(&quot;Something failed when appending&quot;), NULL);
       return 0;
     }
-  DIA_StopBusy ();
+//  DIA_StopBusy ();
 
 
   video_body-&gt;dumpSeg ();
@@ -977,7 +884,7 @@
 //      A_changeAudioStream (aviaudiostream, AudioAvi,NULL);
     }
   	//updateVideoFilters ();
-	getFirstVideoFilter();
+//	getFirstVideoFilter();
 
 }
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioFilter/include/audiofilter_conf.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioFilter/include/audiofilter_conf.h	2009-07-14 15:37:21 UTC (rev 5088)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioFilter/include/audiofilter_conf.h	2009-07-14 15:37:25 UTC (rev 5089)
@@ -46,10 +46,10 @@
     uint64_t     startTimeInUs;
     int32_t      shiftInMs;
     // Mixer
-    bool         mixerEnabled;
+    uint32_t     mixerEnabled;
     CHANNEL_CONF mixerConf;
     // Resampler
-    bool         resamplerEnabled;
+    uint32_t     resamplerEnabled;
     uint32_t     resamplerFrequency;
     // film2pal &amp; pal2film
     FILMCONV     film2pal;

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lame/audioencoder_lame.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lame/audioencoder_lame.cpp	2009-07-14 15:37:21 UTC (rev 5088)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioEncoders/lame/audioencoder_lame.cpp	2009-07-14 15:37:25 UTC (rev 5089)
@@ -293,6 +293,7 @@
 
   if (diaFactoryRun (QT_TR_NOOP (&quot;LAME Configuration&quot;), 4, elems))
     {
+      lameParam-&gt;preset=(ADM_LAME_PRESET)ppreset;
       return 1;
     }
   return 0;


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002303.html">[Avidemux-svn-commit] r5088 - in branches/avidemux_2.6_branch_mean:	avidemux avidemux/common avidemux/common/ADM_audioFilter	avidemux/common/ADM_audioFilter/include	avidemux/common/ADM_audioFilter/src	avidemux/common/ADM_audioFilter_old	avidemux/common/ADM_commonUI avidemux/common/ADM_editor	avidemux/common/ADM_script avidemux/common/ADM_toolkit	avidemux/gtk/ADM_userInterfaces/ADM_dialog	avidemux_core/ADM_coreAudio/include	avidemux_core/ADM_coreAudioFilter/include
</A></li>
	<LI>Next message: <A HREF="002305.html">[Avidemux-svn-commit] r5090 -	branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2304">[ date ]</a>
              <a href="thread.html#2304">[ thread ]</a>
              <a href="subject.html#2304">[ subject ]</a>
              <a href="author.html#2304">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">More information about the Avidemux-svn-commit
mailing list</a><br>
</body></html>
